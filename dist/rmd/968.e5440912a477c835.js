(self.webpackChunkSteex=self.webpackChunkSteex||[]).push([[968],{7674:(oo,Yr,Rt)=>{"use strict";Rt.r(Yr),Rt.d(Yr,{CustomPagesModule:()=>GL});var k=Rt(2308),pn=Rt(3756),Fe=Rt.n(pn),t=Rt(4496),V=Rt(6504),Oe=Rt(7048),Me=Rt(6716);let De=(()=>{class r{constructor(e){this.http=e,this.apiUrl=Me.O.apiUrl,this.headers=new Oe.UD({"Content-Type":"application/json; charset=utf-8"});const s=localStorage.getItem("access_token"),l=localStorage.getItem("userType");s&&(this.headers=this.headers.set("access_token",`Bearer ${s}`),this.headers=this.headers.set("userType",`${l}`))}fetchBannerSection(e,s){const l={headers:new Oe.UD({"Content-Type":"application/json",Authorization:"Auth "+e})};return this.http.get(this.apiUrl+"homebanner/"+s,l)}updateBannerSection(e,s,l){return this.http.patch(this.apiUrl+"homebanner/"+l,s)}updateData(e,s){return this.http.put(this.apiUrl,s)}deleteData(e){return this.http.delete(e)}put(e,s,l){return this.http.put(`${this.apiUrl+e}/${s}`,l)}postwithid(e,s,l){return this.http.post(`${this.apiUrl+e}/${s}`,l)}post(e,s){return this.http.post(`${this.apiUrl+e}`,s)}get(e,s){return this.http.get(`${this.apiUrl+e}/${s}`)}getwithoutid(e){return this.http.get(`${this.apiUrl+e}`)}deleteWithId(e,s){return this.http.delete(`${this.apiUrl+e}/${s}`)}static#e=this.\u0275fac=function(s){return new(s||r)(t.CoB(Oe.KK))};static#t=this.\u0275prov=t.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Be=Rt(4400),Ge=Rt(1368),Je=Rt(6708),nt=Rt(8216);const mt=(r,i)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":i});function Pt(r,i){if(1&r){const e=t.KQA();t.I0R(0,"tr")(1,"td",38),t.OEk(2),t.C$Y(),t.wR5(3,"td",39)(4,"td",39),t.I0R(5,"td",40)(6,"div",41)(7,"input",42),t.qCj("change",function(l){const w=t.usT(e).$implicit,z=t.GaO();return t.CGJ(z.setStatus(w.id,l))}),t.C$Y(),t.I0R(8,"label",43)(9,"span",44),t.OEk(10),t.C$Y()()()(),t.I0R(11,"td",45)(12,"ul",46)(13,"li")(14,"a",47),t.wR5(15,"i",48),t.C$Y()(),t.I0R(16,"li")(17,"a",49),t.qCj("click",function(){const f=t.usT(e).$implicit,w=t.GaO();return t.CGJ(w.delete(f.id))}),t.wR5(18,"i",50),t.C$Y()()()()()}if(2&r){const e=i.$implicit,s=i.$index,l=t.GaO();t.yG2(2),t.oRS(" ",(l.currentPage-1)*l.itemsPerPage+s+1," "),t.yG2(),t.E7m("innerHtml",e.name,t.E3n),t.yG2(),t.E7m("innerHtml",e.cin_id,t.E3n),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),t.yG2(),t.E7m("for","customSwitchsizemd"+s),t.yG2(),t.E7m("ngClass",t.IBC(9,mt,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," "),t.yG2(4),t.CI5("routerLink","/edit-company/",e.id,"")}}function ot(r,i){1&r&&(t.I0R(0,"div",37)(1,"div",51)(2,"span",52),t.OEk(3,"Loading..."),t.C$Y()()())}let vt=(()=>{class r{constructor(e,s,l){this.formBuilder=e,this.api=s,this.toastService=l,this.spinnerStatus=!1,this.companyData=[],this.companyDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Company",active:!0},{label:"Company list",active:!0}],this.getCompanyData()}getCompanyData(){this.toggleSpinner(!0),this.api.getwithoutid("company").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.companyData=e.data||[],this.companyDataList=e.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,s){const f=s.target.checked?"active":"inactive",w=new FormData;w.append("status",f),this.toggleSpinner(!0),this.api.put("company",e,w).subscribe(z=>this.handleStatusChangeResponse(z),z=>this.handleError(z))}toggleSpinner(e){this.spinnerStatus=e}delete(e){e&&Fe().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&this.api.deleteWithId("company",e).subscribe(l=>this.handleStatusChangeResponse(l),l=>this.handleError(l))})}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getCompanyData()):(console.log(e),this.toastService.error(e.message))}handleError(e){this.toggleSpinner(!1)}filterdata(){this.companyData=this.term?this.companyDataList.filter(e=>{const s=this.term.toLowerCase();return e.name.toLowerCase().includes(s)||e.cin_id.toLowerCase().includes(s)||e.status.toLowerCase().includes(s)}):this.companyDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.companyData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.companyDataList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.companyData=this.companyDataList.slice(e,this.endItem)}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(V.im),t.GI1(De),t.GI1(Be.SA))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-company-list"]],decls:61,vars:7,consts:[["title","Company List",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/add-company",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){1&s&&(t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),t.wR5(12,"div",10),t.C$Y()(),t.I0R(13,"div",11)(14,"div",12)(15,"input",13),t.iHE("ngModelChange",function(w){return t.kNx(l.term,w)||(l.term=w),w}),t.qCj("keyup",function(){return l.filterdata()}),t.C$Y(),t.wR5(16,"i",14),t.C$Y()(),t.I0R(17,"div",15)(18,"div",16)(19,"div")(20,"a",17),t.wR5(21,"i",18),t.OEk(22,"Add"),t.C$Y()()()()()(),t.I0R(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),t.OEk(29,"S No."),t.C$Y(),t.I0R(30,"th",23),t.OEk(31,"Company Name"),t.C$Y(),t.I0R(32,"th",23),t.OEk(33,"CIN"),t.C$Y(),t.I0R(34,"th",23),t.OEk(35,"Status"),t.C$Y(),t.I0R(36,"th",24),t.OEk(37,"Action"),t.C$Y()()(),t.I0R(38,"tbody",25),t.c53(39,Pt,19,12,"tr",null,t.wJt),t.C$Y()(),t.I0R(41,"div",26)(42,"div",27),t.wR5(43,"i",28),t.I0R(44,"h5",29),t.OEk(45,"Sorry! No Result Found"),t.C$Y(),t.I0R(46,"p",30),t.OEk(47," We did not find any Details for you search. "),t.C$Y()()()(),t.I0R(48,"div",31)(49,"div",32)(50,"div",33),t.OEk(51," Showing "),t.I0R(52,"span",34),t.OEk(53),t.C$Y(),t.OEk(54," of "),t.I0R(55,"span",34),t.OEk(56),t.C$Y(),t.OEk(57," Results "),t.C$Y()(),t.I0R(58,"div",35)(59,"pagination",36),t.qCj("pageChanged",function(w){return l.pageChanged(w)}),t.C$Y()()()()()()(),t.yuY(60,ot,4,0,"div",37),t.C$Y()()()()),2&s&&(t.E7m("breadcrumbItems",l.breadCrumbItems),t.yG2(15),t.OKB("ngModel",l.term),t.yG2(24),t.oho(l.companyData),t.yG2(14),t.cNF(null==l.companyData?null:l.companyData.length),t.yG2(3),t.cNF(null==l.companyDataList?null:l.companyDataList.length),t.yG2(3),t.E7m("totalItems",null==l.companyDataList?null:l.companyDataList.length)("itemsPerPage",5),t.yG2(),t.C0Y(60,l.spinnerStatus?60:-1))},dependencies:[Ge.QF,Je.O,k.ER,V.ot,V.ue,V._G,nt.im]})}return r})();function wt(r,i){if(1&r&&(t.I0R(0,"div",9)(1,"div",91),t.wR5(2,"img",92),t.C$Y()()),2&r){const e=t.GaO(2);t.yG2(2),t.E7m("src",e.companyselectedImagePreview,t.K6U)}}function ai(r,i){if(1&r&&t.yuY(0,wt,3,1,"div",90),2&r){const e=t.GaO();t.C0Y(0,e.companyselectedImagePreview?0:-1)}}function We(r,i){if(1&r&&(t.I0R(0,"div",9)(1,"div",91),t.wR5(2,"img",92),t.C$Y()()),2&r){const e=t.GaO();t.yG2(2),t.E7m("src",e.companyuploadedImage,t.K6U)}}function ni(r,i){1&r&&(t.I0R(0,"div",9)(1,"div",91),t.wR5(2,"img",93),t.C$Y()())}function li(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Logo is required."),t.C$Y())}function at(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Company name is required."),t.C$Y())}function si(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1," Company name must be at most 45 characters "),t.C$Y())}function Xt(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Business type is required."),t.C$Y())}function jt(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1," Business type must be at most 45 characters "),t.C$Y())}function ht(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"TIN is required."),t.C$Y())}function qt(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"CIN is required."),t.C$Y())}function ri(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"No. of Employee is required."),t.C$Y())}function mi(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Website url is required."),t.C$Y())}function Vi(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Contact person is required."),t.C$Y())}function _i(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Email is required."),t.C$Y())}function Ci(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1," Email must be a valid email address "),t.C$Y())}function Fi(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Mobile is required."),t.C$Y())}function qi(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1," Please, Enter 10 digit Mobile Number. "),t.C$Y())}function xn(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"City is required."),t.C$Y())}function mn(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"State is required."),t.C$Y())}function Vn(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"zip_code is required."),t.C$Y())}function ei(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Address is required."),t.C$Y())}function Bi(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1," Address must be at most 100 characters "),t.C$Y())}function on(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Password is required."),t.C$Y())}function Wn(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1," password must be at minimum 5 characters "),t.C$Y())}function Nn(r,i){1&r&&(t.I0R(0,"div",94),t.OEk(1,"Status is required."),t.C$Y())}function An(r,i){1&r&&(t.I0R(0,"button",95),t.OEk(1,"Save"),t.C$Y())}function Gi(r,i){1&r&&(t.I0R(0,"button",96),t.wR5(1,"span",97),t.OEk(2," Please wait "),t.C$Y())}function kr(r,i){1&r&&(t.I0R(0,"div",89)(1,"div",98)(2,"span",99),t.OEk(3,"Loading..."),t.C$Y()()())}const sr=r=>({"is-invalid":r}),fr=(r,i)=>({"mdi-eye-off-outline":r,"mdi-eye-outline":i});let wn=(()=>{class r{constructor(e,s,l,f,w){this.route=e,this.formBuilder=s,this.api=l,this.router=f,this.toastService=w,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.companyselectedImage=null,this.companyselectedImagePreview=null,this.companyuploadedImage=null,this.mockLocationUpdates=[{lng:78.22045594790079,lat:26.230978491880894},{lng:78.22581623978483,lat:26.230717171669912},{lng:78.22831983563903,lat:26.229851080580822}]}ngOnInit(){this.breadCrumbItems=[{label:"Compay",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.initializeForm(),this.urlId&&this.getCompanyData()}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],address:["",[V.AQ.maxLength(100),V.AQ.required]],no_of_emp:["",[V.AQ.required]],logo:["",this.imageValidator()],cin_id:["",[V.AQ.required]],tax_no:["",[V.AQ.required]],website_url:["",[V.AQ.required]],email:["",[V.AQ.required,V.AQ.email,V.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[V.AQ.required,V.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],business_type:["",[V.AQ.maxLength(45),V.AQ.required]],password:["",[this.imageValidator(),V.AQ.minLength(5)]],status:["",[V.AQ.required]],city:["",[V.AQ.required]],state:["",[V.AQ.required]],zip_code:["",[V.AQ.required]],contact_person:["",[V.AQ.required]],check_out_time:["",[V.AQ.required]],check_in_time_start:["",[V.AQ.required]],check_in_time_end:["",[V.AQ.required]]})}imageValidator(){return e=>this.urlId?null:V.AQ.required(e)}get f(){return this.formGroup.controls}getCompanyData(){this.toggleSpinner(!0),this.api.get("company",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setCompanyDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setCompanyDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,no_of_emp:e.no_of_emp,cin_id:e.cin_id,tax_no:e.tax_no,email:e.email,password:e.password,status:e.status,mobile:e.mobile,business_type:e.business_type,city:e.city,state:e.state,zip_code:e.zip_code,contact_person:e.contact_person,website_url:e.website_url,check_in_time_start:e.check_in_time_start,check_in_time_end:e.check_in_time_end,check_out_time:e.check_out_time}),this.companyuploadedImage=e.logo||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData(),s=this.f.check_in_time_start.value,l=this.f.check_in_time_end.value,f=this.f.check_out_time.value;if(s>l)return void this.toastService.error("Check-in start time must be before the end time.");if(f<=l)return void this.toastService.error("Check-out time must be after the check-in end time.");if(f<=s)return void this.toastService.error("Check-out time must be after the check-in start time.");this.urlId?this.updateCompany(e):this.addCompany(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("name",this.f.name.value),e.append("address",this.f.address.value),e.append("no_of_emp",this.f.no_of_emp.value),e.append("cin_id",this.f.cin_id.value),e.append("email",this.f.email.value),e.append("password",this.f.password.value),e.append("status",this.f.status.value),e.append("mobile",this.f.mobile.value),e.append("business_type",this.f.business_type.value),e.append("tax_no",this.f.tax_no.value),e.append("city",this.f.city.value),e.append("state",this.f.state.value),e.append("zip_code",this.f.zip_code.value),e.append("contact_person",this.f.contact_person.value),e.append("website_url",this.f.website_url.value),e.append("check_out_time",this.f.check_out_time.value),e.append("check_in_time_start",this.f.check_in_time_start.value),e.append("check_in_time_end",this.f.check_in_time_end.value),this.companyselectedImage&&e.append("logo",this.companyselectedImage),e}addCompany(e){this.api.post("company",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}updateCompany(e){this.api.put("company",this.urlId,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["company"])):this.toastService.error(e.message)}resetForm(){this.companyselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}companyimageSelect(e){const s=e.target.files[0];s&&(this.companyselectedImage=s,this.companyselectedImagePreview=URL.createObjectURL(s))}companyremoveImage(){this.companyselectedImage=null,this.companyselectedImagePreview=null}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(k.gV),t.GI1(V.im),t.GI1(De),t.GI1(k.E5),t.GI1(Be.SA))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-add-company"]],decls:244,vars:59,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-4"],[1,"card","overflow-hidden"],[1,"ratio","ratio-16x9"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6509156.773725123!2d-123.79622260161696!3d37.19312212390098!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb9fe5f285e3d%3A0x8b5109a227086f55!2sCalifornia%2C%20USA!5e0!3m2!1sen!2sin!4v1678106410566!5m2!1sen!2sin","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[1,"card-body","pt-1"],["class","invalid-text"],[1,"avatar-lg","mt-n5","position-relative","mx-auto"],["type","file","id","companylogo","accept","image/*","formControlName","logo","hidden","",3,"change"],["companylogo",""],["for","companylogo",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","companylogo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"text-center","mt-4"],[1,"mb-2"],[1,"text-muted","mb-4","pb-2"],[1,"table-responsive","table-card"],[1,"table","align-middle","table-borderless","mb-0"],[1,"hstack","gap-2","justify-content-center","list-unstyled","mt-4","pt-2","mb-0"],["href","javascript:void(0);",1,"btn","btn-success","btn-sm"],[1,"bi","bi-whatsapp"],["href","javascript:void(0);",1,"btn","btn-primary","btn-sm"],[1,"bi","bi-facebook"],["href","javascript:void(0);",1,"btn","btn-info","btn-sm"],[1,"bi","bi-twitter"],["href","javascript:void(0);",1,"btn","btn-danger","btn-sm"],[1,"bi","bi-envelope"],[1,"col-xl-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter company name","value","name",1,"form-control",3,"ngClass"],["for","business_type",1,"form-label"],["type","text","id","business_type","formControlName","business_type","placeholder","Enter Business type","value","business_type",1,"form-control",3,"ngClass"],["for","tax_no",1,"form-label"],["type","text","id","tax_no","formControlName","tax_no","placeholder","Enter TIN","value","tax_no",1,"form-control",3,"ngClass"],["for","cin_id",1,"form-label"],["type","text","id","cin_id","formControlName","cin_id","placeholder","Enter CIN","value","cin_id",1,"form-control",3,"ngClass"],["for","no_of_emp",1,"form-label"],["type","number","id","no_of_emp","formControlName","no_of_emp","placeholder","Enter No. of employee","value","no_of_emp",1,"form-control",3,"ngClass"],["for","website_url",1,"form-label"],["type","text","id","website_url","formControlName","website_url","placeholder","Enter Website Url","value","website_url",1,"form-control",3,"ngClass"],["for","checkInTimeStart",1,"form-label"],[1,"row","g-2"],[1,"col-lg-5"],["type","time","id","checkInTimeStart","formControlName","check_in_time_start",1,"form-control"],[1,"col-auto","align-self-center"],["type","time","id","checkInTimeEnd","formControlName","check_in_time_end",1,"form-control"],["for","checkOutTime",1,"form-label"],["type","time","id","checkOutTime","formControlName","check_out_time",1,"form-control"],[1,"card","mt-3"],[1,"col-lg-4"],["for","contact_person",1,"form-label"],["type","text","id","contact_person","formControlName","contact_person","placeholder","Enter Contact person","value","contact_person",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter City","value","city",1,"form-control",3,"ngClass"],["for","State",1,"form-label"],["type","text","id","State","formControlName","state","placeholder","Enter state","value","state",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","text","id","zip_code","formControlName","zip_code","placeholder","Enter zip code","value","zip_code",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","5","formControlName","address",1,"form-control",3,"ngClass"],["for","password-input",1,"form-label"],[1,"position-relative","auth-pass-inputgroup","mb-3"],["formControlName","password","type","password","placeholder","Enter password","id","password-input",1,"form-control","pe-5","password-input",3,"type","ngClass"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon"],[1,"ri-eye-fill","align-middle",3,"ngClass","click"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["class","avatar-lg mt-n5 position-relative mx-auto"],[1,"avatar-title","bg-body-secondary","rounded","shadow"],["alt","",1,"avatar-sm",3,"src"],["src","assets/images/companies/img-1.png","alt","",1,"avatar-sm"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){1&s&&(t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"form",1),t.qCj("ngSubmit",function(){return l.onSubmit()}),t.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.wR5(6,"iframe",6),t.C$Y(),t.I0R(7,"div",7),t.yuY(8,ai,1,1)(9,We,3,1)(10,ni,3,0)(11,li,2,0,"div",8),t.I0R(12,"div",9)(13,"input",10,11),t.qCj("change",function(w){return l.companyimageSelect(w)}),t.C$Y(),t.I0R(15,"div",12)(16,"label",13)(17,"span",14),t.wR5(18,"i",15),t.C$Y()()()(),t.I0R(19,"div",16)(20,"h5",17),t.OEk(21),t.C$Y(),t.I0R(22,"p",18),t.OEk(23),t.C$Y()(),t.I0R(24,"div",19)(25,"table",20)(26,"tbody")(27,"tr")(28,"th"),t.OEk(29,"TIN"),t.C$Y(),t.I0R(30,"td"),t.OEk(31),t.C$Y()(),t.I0R(32,"tr")(33,"th"),t.OEk(34,"CIN"),t.C$Y(),t.I0R(35,"td"),t.OEk(36),t.C$Y()(),t.I0R(37,"tr")(38,"th"),t.OEk(39,"Location"),t.C$Y(),t.I0R(40,"td"),t.OEk(41),t.C$Y()(),t.I0R(42,"tr")(43,"th"),t.OEk(44,"Website"),t.C$Y(),t.I0R(45,"td"),t.OEk(46),t.C$Y()(),t.I0R(47,"tr")(48,"th"),t.OEk(49,"Phone Number"),t.C$Y(),t.I0R(50,"td")(51,"a"),t.OEk(52),t.C$Y()()()()()(),t.I0R(53,"ul",21)(54,"li")(55,"a",22),t.wR5(56,"i",23),t.C$Y()(),t.I0R(57,"li")(58,"a",24),t.wR5(59,"i",25),t.C$Y()(),t.I0R(60,"li")(61,"a",26),t.wR5(62,"i",27),t.C$Y()(),t.I0R(63,"li")(64,"a",28),t.wR5(65,"i",29),t.C$Y()()()()()(),t.I0R(66,"div",30)(67,"div",31)(68,"div",32)(69,"h6",33),t.OEk(70,"Company Information"),t.C$Y()(),t.I0R(71,"div",34)(72,"div",35)(73,"div",2)(74,"div",36)(75,"div",37)(76,"label",38),t.OEk(77,"Company name "),t.I0R(78,"span",39),t.OEk(79,"*"),t.C$Y()(),t.wR5(80,"input",40),t.yuY(81,at,2,0,"div",8)(82,si,2,0,"div",8),t.C$Y()(),t.I0R(83,"div",36)(84,"div",37)(85,"label",41),t.OEk(86,"Business type "),t.I0R(87,"span",39),t.OEk(88,"*"),t.C$Y()(),t.wR5(89,"input",42),t.yuY(90,Xt,2,0,"div",8)(91,jt,2,0,"div",8),t.C$Y()(),t.I0R(92,"div",36)(93,"div",37)(94,"label",43),t.OEk(95,"Tax Identification Number (TIN) "),t.I0R(96,"span",39),t.OEk(97,"*"),t.C$Y()(),t.wR5(98,"input",44),t.yuY(99,ht,2,0,"div",8),t.C$Y()(),t.I0R(100,"div",36)(101,"div",37)(102,"label",45),t.OEk(103,"Corporate Identification Number (CIN) "),t.I0R(104,"span",39),t.OEk(105,"*"),t.C$Y()(),t.wR5(106,"input",46),t.yuY(107,qt,2,0,"div",8),t.C$Y()(),t.I0R(108,"div",36)(109,"div",37)(110,"label",47),t.OEk(111,"No. of Employee "),t.I0R(112,"span",39),t.OEk(113,"*"),t.C$Y()(),t.wR5(114,"input",48),t.yuY(115,ri,2,0,"div",8),t.C$Y()(),t.I0R(116,"div",36)(117,"div",37)(118,"label",49),t.OEk(119,"Website Url"),t.I0R(120,"span",39),t.OEk(121,"*"),t.C$Y()(),t.wR5(122,"input",50),t.yuY(123,mi,2,0,"div",8),t.C$Y()(),t.I0R(124,"div",36)(125,"div",37)(126,"label",51),t.OEk(127,"Check-In Time"),t.C$Y(),t.I0R(128,"div",52)(129,"div",53),t.wR5(130,"input",54),t.C$Y(),t.I0R(131,"div",55),t.OEk(132,"to"),t.C$Y(),t.I0R(133,"div",53),t.wR5(134,"input",56),t.C$Y()()()(),t.I0R(135,"div",36)(136,"div",37)(137,"label",57),t.OEk(138,"Check-Out Time"),t.C$Y(),t.wR5(139,"input",58),t.C$Y()()()()()(),t.I0R(140,"div",59)(141,"div",32)(142,"h6",33),t.OEk(143,"Contact Information"),t.C$Y()(),t.I0R(144,"div",34)(145,"div",35)(146,"div",2)(147,"div",60)(148,"div",37)(149,"label",61),t.OEk(150,"Contact person "),t.I0R(151,"span",39),t.OEk(152,"*"),t.C$Y()(),t.wR5(153,"input",62),t.yuY(154,Vi,2,0,"div",8),t.C$Y()(),t.I0R(155,"div",60)(156,"div",37)(157,"label",63),t.OEk(158,"Email "),t.I0R(159,"span",39),t.OEk(160,"*"),t.C$Y()(),t.wR5(161,"input",64),t.yuY(162,_i,2,0,"div",8)(163,Ci,2,0,"div",8),t.C$Y()(),t.I0R(164,"div",60)(165,"div",37)(166,"label",65),t.OEk(167,"Contact Number "),t.I0R(168,"span",39),t.OEk(169,"*"),t.C$Y()(),t.wR5(170,"input",66),t.yuY(171,Fi,2,0,"div",8)(172,qi,2,0,"div",8),t.C$Y()()()()()(),t.I0R(173,"div",59)(174,"div",32)(175,"h6",33),t.OEk(176,"Address Information"),t.C$Y()(),t.I0R(177,"div",34)(178,"div",35)(179,"div",2)(180,"div",60)(181,"div",37)(182,"label",67),t.OEk(183,"City "),t.I0R(184,"span",39),t.OEk(185,"*"),t.C$Y()(),t.wR5(186,"input",68),t.yuY(187,xn,2,0,"div",8),t.C$Y()(),t.I0R(188,"div",60)(189,"div",37)(190,"label",69),t.OEk(191,"State "),t.I0R(192,"span",39),t.OEk(193,"*"),t.C$Y()(),t.wR5(194,"input",70),t.yuY(195,mn,2,0,"div",8),t.C$Y()(),t.I0R(196,"div",60)(197,"div",37)(198,"label",71),t.OEk(199,"Zip code "),t.I0R(200,"span",39),t.OEk(201,"*"),t.C$Y()(),t.wR5(202,"input",72),t.yuY(203,Vn,2,0,"div",8),t.C$Y()(),t.I0R(204,"div",73)(205,"div",37)(206,"label",74),t.OEk(207," Address "),t.I0R(208,"span",39),t.OEk(209,"*"),t.C$Y()(),t.wR5(210,"textarea",75),t.yuY(211,ei,2,0,"div",8)(212,Bi,2,0,"div",8),t.C$Y()(),t.I0R(213,"div",60)(214,"div",37)(215,"label",76),t.OEk(216,"Password "),t.I0R(217,"span",39),t.OEk(218,"*"),t.C$Y()(),t.I0R(219,"div",77),t.wR5(220,"input",78),t.I0R(221,"button",79)(222,"i",80),t.qCj("click",function(){return l.toggleFieldTextType()}),t.C$Y()(),t.yuY(223,on,2,0,"div",8)(224,Wn,2,0,"div",8),t.C$Y()()(),t.I0R(225,"div",60)(226,"div",37)(227,"label",81),t.OEk(228,"Status "),t.I0R(229,"span",39),t.OEk(230,"*"),t.C$Y()(),t.I0R(231,"select",82)(232,"option",83),t.OEk(233,"Select Status"),t.C$Y(),t.I0R(234,"option",84),t.OEk(235,"Active"),t.C$Y(),t.I0R(236,"option",85),t.OEk(237,"Inactive"),t.C$Y()(),t.yuY(238,Nn,2,0,"div",8),t.C$Y()(),t.I0R(239,"div",86)(240,"div",87),t.yuY(241,An,2,0,"button",88)(242,Gi,3,0),t.C$Y()()()()()()(),t.yuY(243,kr,4,0,"div",89),t.C$Y()()),2&s&&(t.E7m("title",l.urlId?"Edit Company":"Add Company")("breadcrumbItems",l.breadCrumbItems),t.yG2(),t.E7m("formGroup",l.formGroup),t.yG2(7),t.C0Y(8,l.companyselectedImage?8:l.companyuploadedImage?9:10),t.yG2(3),t.C0Y(11,l.f.logo&&l.f.logo.hasError("required")&&l.f.logo.touched?11:-1),t.yG2(10),t.cNF(l.f.name.value),t.yG2(2),t.cNF(l.f.business_type.value),t.yG2(8),t.cNF(l.f.tax_no.value),t.yG2(5),t.cNF(l.f.cin_id.value),t.yG2(5),t.cNF(l.f.address.value),t.yG2(5),t.cNF(l.f.website_url.value),t.yG2(6),t.cNF(l.f.mobile.value),t.yG2(28),t.E7m("ngClass",l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?"is-invalid":""),t.yG2(),t.C0Y(81,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?81:-1),t.yG2(),t.C0Y(82,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?82:-1),t.yG2(7),t.E7m("ngClass",l.f.business_type&&l.f.business_type.hasError("required")&&l.f.business_type.touched?"is-invalid":""),t.yG2(),t.C0Y(90,l.f.business_type&&l.f.business_type.hasError("required")&&l.f.business_type.touched?90:-1),t.yG2(),t.C0Y(91,l.f.business_type&&l.f.business_type.hasError("maxlength")&&l.f.business_type.touched?91:-1),t.yG2(7),t.E7m("ngClass",l.f.tax_no&&l.f.tax_no.hasError("required")&&l.f.tax_no.touched?"is-invalid":""),t.yG2(),t.C0Y(99,l.f.tax_no&&l.f.tax_no.hasError("required")&&l.f.tax_no.touched?99:-1),t.yG2(7),t.E7m("ngClass",l.f.cin_id&&l.f.cin_id.hasError("required")&&l.f.cin_id.touched?"is-invalid":""),t.yG2(),t.C0Y(107,l.f.cin_id&&l.f.cin_id.hasError("required")&&l.f.cin_id.touched?107:-1),t.yG2(7),t.E7m("ngClass",l.f.no_of_emp&&l.f.no_of_emp.hasError("required")&&l.f.no_of_emp.touched?"is-invalid":""),t.yG2(),t.C0Y(115,l.f.no_of_emp&&l.f.no_of_emp.hasError("required")&&l.f.no_of_emp.touched?115:-1),t.yG2(7),t.E7m("ngClass",l.f.website_url&&l.f.website_url.hasError("required")&&l.f.website_url.touched?"is-invalid":""),t.yG2(),t.C0Y(123,l.f.website_url&&l.f.website_url.hasError("required")&&l.f.website_url.touched?123:-1),t.yG2(30),t.E7m("ngClass",l.f.contact_person&&l.f.contact_person.hasError("required")&&l.f.contact_person.touched?"is-invalid":""),t.yG2(),t.C0Y(154,l.f.contact_person&&l.f.contact_person.hasError("required")&&l.f.contact_person.touched?154:-1),t.yG2(7),t.E7m("ngClass",l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?"is-invalid":""),t.yG2(),t.C0Y(162,l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?162:-1),t.yG2(),t.C0Y(163,l.f.email.hasError("pattern")?163:-1),t.yG2(7),t.E7m("ngClass",l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?"is-invalid":""),t.yG2(),t.C0Y(171,l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?171:-1),t.yG2(),t.C0Y(172,l.f.mobile.hasError("pattern")?172:-1),t.yG2(14),t.E7m("ngClass",l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?"is-invalid":""),t.yG2(),t.C0Y(187,l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?187:-1),t.yG2(7),t.E7m("ngClass",l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?"is-invalid":""),t.yG2(),t.C0Y(195,l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?195:-1),t.yG2(7),t.E7m("ngClass",l.f.zip_code&&l.f.zip_code.hasError("required")&&l.f.zip_code.touched?"is-invalid":""),t.yG2(),t.C0Y(203,l.f.zip_code&&l.f.zip_code.hasError("required")&&l.f.zip_code.touched?203:-1),t.yG2(7),t.E7m("ngClass",t.S45(52,sr,l.f.address&&l.f.address.errors&&l.f.address.touched)),t.yG2(),t.C0Y(211,l.f.address&&l.f.address.hasError("required")&&l.f.address.touched?211:-1),t.yG2(),t.C0Y(212,l.f.address&&l.f.address.hasError("maxlength")&&l.f.address.touched?212:-1),t.yG2(8),t.E7m("type",l.fieldTextType?"text":"password")("ngClass",t.S45(54,sr,l.submitted&&l.f.password.errors)),t.yG2(2),t.E7m("ngClass",t.IBC(56,fr,!l.fieldTextType,l.fieldTextType)),t.yG2(),t.C0Y(223,l.f.password&&l.f.password.hasError("required")&&l.f.password.touched?223:-1),t.yG2(),t.C0Y(224,l.f.password&&l.f.password.hasError("minlength")&&l.f.password.touched?224:-1),t.yG2(7),t.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(238,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?238:-1),t.yG2(3),t.C0Y(241,l.saveButtonActive?241:242),t.yG2(2),t.C0Y(243,l.spinnerStatus?243:-1))},dependencies:[Ge.QF,Je.O,V.sz,V.wd,V.GO,V.ot,V.O4,V.GC,V.ue,V.u,V.uW,V.Wo],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.match-parent[_ngcontent-%COMP%]{width:100%;height:500px}.mt-n5[_ngcontent-%COMP%]{margin-top:-5rem!important}"]})}return r})();var en=Rt(5140),_n=Rt(1768);const Xi=["showModal"],ji=["deleteRecordModal"];function Gn(r,i){if(1&r&&t.wR5(0,"img",79),2&r){const e=t.GaO().$implicit;t._6D("src",e.image,t.K6U)}}function tn(r,i){1&r&&t.wR5(0,"img",80)}const Ti=()=>({tab:"personalDetails"});function gn(r,i){if(1&r){const e=t.KQA();t.I0R(0,"ul",81)(1,"li")(2,"a",82),t.wR5(3,"i",83),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",84),t.wR5(7,"i",85),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",86),t.qCj("click",function(){t.usT(e);const l=t.GaO().$implicit,f=t.GaO();return t.CGJ(f.removeItem(l.id))}),t.wR5(11,"i",87),t.OEk(12," Remove"),t.C$Y()()()}if(2&r){const e=t.GaO().$implicit;t.yG2(2),t.CI5("routerLink","/employee-detail/",e.id,""),t.E7m("queryParams",t.q4q(3,Ti)),t.yG2(4),t.CI5("routerLink","/edit-employee/",e.id,"")}}const Pn=(r,i)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":i});function Dr(r,i){if(1&r){const e=t.KQA();t.I0R(0,"tr",58)(1,"td")(2,"div",23)(3,"input",59),t.iHE("ngModelChange",function(l){const w=t.usT(e).$implicit;return t.kNx(w.states,l)||(w.states=l),t.CGJ(l)}),t.qCj("change",function(l){t.usT(e);const f=t.GaO();return t.CGJ(f.onCheckboxChange(l))}),t.C$Y(),t.wR5(4,"label",60),t.C$Y()(),t.I0R(5,"td",61)(6,"a",62),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",63)(9,"div",64)(10,"div",65),t.yuY(11,Gn,1,1,"img",66)(12,tn,1,0),t.C$Y(),t.I0R(13,"div")(14,"h6",67)(15,"a",68),t.OEk(16),t.C$Y()()()()(),t.I0R(17,"td",69),t.OEk(18),t.C$Y(),t.I0R(19,"td",69),t.OEk(20),t.C$Y(),t.I0R(21,"td",69),t.OEk(22),t.C$Y(),t.I0R(23,"td",69),t.OEk(24),t.C$Y(),t.I0R(25,"td",70)(26,"div",71)(27,"input",72),t.qCj("change",function(l){const w=t.usT(e).$implicit,z=t.GaO();return t.CGJ(z.setStatus(w.id,l))}),t.C$Y(),t.I0R(28,"label",73)(29,"span",74),t.OEk(30),t.C$Y()()()(),t.I0R(31,"td")(32,"div",75)(33,"button",76),t.wR5(34,"i",77),t.C$Y(),t.yuY(35,gn,13,4,"ul",78),t.C$Y()()()}if(2&r){const e=i.$implicit,s=i.$index;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(8),t.C0Y(11,e.image?11:12),t.yG2(5),t.cNF(e.name),t.yG2(2),t.oRS(" ",e.mobile," "),t.yG2(2),t.oRS(" ",e.employee_id," "),t.yG2(2),t.oRS(" ",e.designation," "),t.yG2(2),t.oRS(" ",e.department," "),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),t.yG2(),t.E7m("for","customSwitchsizemd"+s),t.yG2(),t.E7m("ngClass",t.IBC(14,Pn,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," ")}}function Ir(r,i){1&r&&(t.I0R(0,"div",28)(1,"div",88)(2,"span",89),t.OEk(3,"Loading..."),t.C$Y()()())}let wr=(()=>{class r{constructor(e,s,l){this.formBuilder=e,this.api=s,this.toastService=l,this.spinnerStatus=!1,this.employeeData=[],this.employeeDataList=[],this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management",active:!0},{label:"Employees",active:!0}];const e=localStorage.getItem("currentUser");if(e){const s=JSON.parse(e);this.company_id=s.id}this.getemployeeData()}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe(s=>{s&&s.status?(this.toggleSpinner(!1),this.employeeData=s.data||[],this.employeeDataList=s.data||[]):this.handleError("Unexpected response format")},s=>{this.handleError(s.message||"An error occurred while fetching data")})}setStatus(e,s){const f=s.target.checked?"active":"inactive",w=new FormData;w.append("status",f),this.toggleSpinner(!0),this.api.put("employees",e,w).subscribe(z=>this.handleStatusChangeResponse(z),z=>this.handleError(z))}toggleSpinner(e){this.spinnerStatus=e}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getemployeeData()):this.toastService.error(e.message)}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("employees",e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l));const s=this.checkedValGet;s&&s.length>0&&this.api.post("employees-delete-multiple",{ids:s}).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Employee Data Delete Successfully!!"),this.getemployeeData(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.employeeData];s.sort((l,f)=>{const w=this.compare(l[e],f[e]);return"asc"===this.direction?w:-w}),this.employeeData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.employeeData=this.employeeDataList.slice(s,this.endItem)}filterdata(){this.employeeData=this.term?this.employeeDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())||e.mobile.toLowerCase().includes(this.term.toLowerCase())||e.email.toLowerCase().includes(this.term.toLowerCase())||e.designation.toLowerCase().includes(this.term.toLowerCase())||e.department.toLowerCase().includes(this.term.toLowerCase())||e.employee_id.toLowerCase().includes(this.term.toLowerCase())):this.employeeDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.employeeData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}onCheckboxChange(e){for(var s=[],f=0;f<this.employeeData.length;f++)1==this.employeeData[f].states&&s.push(this.employeeData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.employeeData=this.employeeData.map(w=>({...w,states:e.target.checked}));for(var s=[],f=0;f<this.employeeData.length;f++)1==this.employeeData[f].states&&s.push(this.employeeData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(V.im),t.GI1(De),t.GI1(Be.SA))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-employee-list"]],viewQuery:function(s,l){if(1&s&&(t.CC$(Xi,5),t.CC$(ji,5)),2&s){let f;t.wto(f=t.Gqi())&&(l.showModal=f.first),t.wto(f=t.Gqi())&&(l.deleteRecordModal=f.first)}},decls:90,vars:10,consts:[["title","Employees List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name, mobile,etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button","routerLink","/add-employee",1,"btn","btn-primary","add-btn"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"text-danger"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","","class","img-fluid d-block",3,"src"],[1,"mb-0"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"category"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ph-pencil","align-middle","me-1"],[1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){if(1&s){const f=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Employeess "),t.I0R(9,"span",8),t.OEk(10),t.C$Y()()(),t.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),t.iHE("ngModelChange",function(z){return t.kNx(l.term,z)||(l.term=z),z}),t.qCj("keyup",function(){return l.filterdata()}),t.C$Y(),t.wR5(16,"i",14),t.C$Y()(),t.I0R(17,"button",15),t.qCj("click",function(){t.usT(f);const z=t.Gew(71);return t.CGJ(z.show())}),t.wR5(18,"i",16),t.C$Y(),t.I0R(19,"button",17),t.wR5(20,"i",18),t.OEk(21," Add Employee "),t.C$Y()()()(),t.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),t.iHE("ngModelChange",function(z){return t.kNx(l.masterSelected,z)||(l.masterSelected=z),z}),t.qCj("change",function(z){return l.checkUncheckAll(z)}),t.C$Y(),t.wR5(30,"label",25),t.C$Y()(),t.I0R(31,"th",26),t.qCj("click",function(){return l.onSort("name")}),t.OEk(32," Employee Name "),t.C$Y(),t.I0R(33,"th",26),t.qCj("click",function(){return l.onSort("mobile")}),t.OEk(34," Mobile "),t.C$Y(),t.I0R(35,"th",26),t.qCj("click",function(){return l.onSort("employee_id")}),t.OEk(36," Employee ID "),t.C$Y(),t.I0R(37,"th",26),t.qCj("click",function(){return l.onSort("designation")}),t.OEk(38," Designation "),t.C$Y(),t.I0R(39,"th",26),t.qCj("click",function(){return l.onSort("department")}),t.OEk(40," Department "),t.C$Y(),t.I0R(41,"th",26),t.qCj("click",function(){return l.onSort("status")}),t.OEk(42," Status "),t.C$Y(),t.I0R(43,"th"),t.OEk(44,"Action"),t.C$Y()()(),t.I0R(45,"tbody",27),t.c53(46,Dr,36,17,"tr",58,t.wJt),t.C$Y(),t.yuY(48,Ir,4,0,"div",28),t.C$Y()(),t.I0R(49,"div",29)(50,"div",30)(51,"div",31)(52,"div",32),t.wR5(53,"i",33),t.C$Y()(),t.I0R(54,"h5",34),t.OEk(55,"Sorry! No Result Found"),t.C$Y(),t.I0R(56,"p",35),t.OEk(57),t.C$Y()()(),t.I0R(58,"div",36)(59,"div",37)(60,"div",38),t.OEk(61," Showing "),t.I0R(62,"span",39),t.OEk(63),t.C$Y(),t.OEk(64," of "),t.I0R(65,"span",39),t.OEk(66),t.C$Y(),t.OEk(67," Results "),t.C$Y()(),t.I0R(68,"div",40)(69,"pagination",41),t.qCj("pageChanged",function(z){return l.pageChanged(z)}),t.C$Y()()()()()()()(),t.I0R(70,"div",42,43)(72,"div",44)(73,"div",45)(74,"div",46)(75,"button",47),t.qCj("click",function(){t.usT(f);const z=t.Gew(71);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(76,"div",48)(77,"div",49)(78,"div",50),t.wR5(79,"i",51),t.C$Y(),t.I0R(80,"div",52)(81,"h3",53),t.OEk(82,"Are you sure ?"),t.C$Y(),t.I0R(83,"p",54),t.OEk(84," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(85,"div",55)(86,"button",56),t.qCj("click",function(){t.usT(f);const z=t.Gew(71);return t.CGJ(z.hide())}),t.OEk(87," Close "),t.C$Y(),t.I0R(88,"button",57),t.qCj("click",function(){return l.deleteData(l.deleteId)}),t.OEk(89," Yes, Delete It! "),t.C$Y()()()()()()}2&s&&(t.E7m("breadcrumbItems",l.breadCrumbItems),t.yG2(10),t.cNF(null==l.employeeDataList?null:l.employeeDataList.length),t.yG2(5),t.OKB("ngModel",l.term),t.yG2(14),t.OKB("ngModel",l.masterSelected),t.yG2(17),t.oho(l.employeeData),t.yG2(2),t.C0Y(48,l.spinnerStatus?48:-1),t.yG2(9),t.oRS(" We've searched ",l.employeeDataList.length," Department We did not find any Department for you search. "),t.yG2(6),t.cNF(null==l.employeeData?null:l.employeeData.length),t.yG2(3),t.cNF(null==l.employeeDataList?null:l.employeeDataList.length),t.yG2(3),t.E7m("totalItems",null==l.employeeDataList?null:l.employeeDataList.length)("itemsPerPage",10))},dependencies:[Ge.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.ot,V.SU,V.ue,V._G,nt.im,_n.uK],styles:[".uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}"]})}return r})();var pr=Rt(7995);const or=["showModal"],Tn=["showModalDepartment"];function ur(r,i){if(1&r&&t.wR5(0,"img",98),2&r){const e=t.GaO(2);t.E7m("src",e.employeeselectedImagePreview,t.K6U)}}function Rr(r,i){if(1&r&&t.yuY(0,ur,1,1,"img",97),2&r){const e=t.GaO();t.C0Y(0,e.employeeselectedImagePreview?0:-1)}}function ks(r,i){if(1&r&&t.wR5(0,"img",99),2&r){const e=t.GaO();t.E7m("src",e.employeeuploadedImage,t.K6U)}}function er(r,i){1&r&&t.wR5(0,"img",100)}function gr(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Image is required."),t.C$Y())}function hr(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Empolyee name is required."),t.C$Y())}function Cr(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Empolyee name must be at most 45 characters "),t.C$Y())}function $r(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Employee Id is required."),t.C$Y())}function Ct(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Email is required."),t.C$Y())}function Ie(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Email must be a valid email address "),t.C$Y())}function Ne(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Mobile is required."),t.C$Y())}function ut(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Please, Enter 10 digit Mobile Number. "),t.C$Y())}function lt(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Date of Birth is required."),t.C$Y())}function zt(r,i){if(1&r&&(t.I0R(0,"option",102),t.OEk(1),t.C$Y()),2&r){const e=i.$implicit;t._6D("value",e.slug),t.yG2(),t.cNF(e.name)}}function Kt(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Designation is required."),t.C$Y())}function Jt(r,i){if(1&r&&(t.I0R(0,"option",102),t.OEk(1),t.C$Y()),2&r){const e=i.$implicit;t._6D("value",e.slug),t.yG2(),t.cNF(e.name)}}function pt(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Department is required."),t.C$Y())}function ui(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Gender is required."),t.C$Y())}function Hi(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Address is required."),t.C$Y())}function Ui(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Address must be at most 100 characters "),t.C$Y())}function di(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"City is required."),t.C$Y())}function un(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Zip code is required. "),t.C$Y())}function Et(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Invalid zip code. "),t.C$Y())}function St(r,i){if(1&r&&(t.I0R(0,"div"),t.yuY(1,un,2,0,"div",103)(2,Et,2,0,"div",103),t.C$Y()),2&r){const e=t.GaO();t.yG2(),t.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("required")),t.yG2(),t.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("maxlength"))}}function qe(r,i){if(1&r&&(t.I0R(0,"option",102),t.OEk(1),t.C$Y()),2&r){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function Xe(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"State is required."),t.C$Y())}function ze(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Status is required."),t.C$Y())}function He(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Password is required. "),t.C$Y())}const ft=r=>({"is-invalid":r}),Yt=(r,i)=>({"mdi-eye-off-outline":r,"mdi-eye-outline":i});function xi(r,i){if(1&r){const e=t.KQA();t.I0R(0,"div",56)(1,"div",104)(2,"label",105),t.OEk(3,"New Password*"),t.C$Y(),t.I0R(4,"div",106)(5,"input",107),t.qCj("input",function(){t.usT(e);const l=t.GaO();return t.CGJ(l.checkPasswordPattern())}),t.C$Y(),t.I0R(6,"button",108),t.qCj("click",function(){t.usT(e);const l=t.GaO();return t.CGJ(l.toggleFieldTextType1())}),t.wR5(7,"i",109),t.C$Y()(),t.yuY(8,He,2,0,"div",103),t.C$Y()()}if(2&r){const e=t.GaO();t.yG2(5),t.E7m("type",e.fieldTextType1?"text":"password")("ngClass",t.S45(4,ft,e.f.password.hasError("required")&&e.f.password.touched)),t.yG2(2),t.E7m("ngClass",t.IBC(6,Yt,!e.fieldTextType1,e.fieldTextType1)),t.yG2(),t.E7m("ngIf",e.f.password.hasError("required")&&e.f.password.touched)}}function pi(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Confirm Password is required. "),t.C$Y())}function Pi(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Password and Confirm Password does not match. "),t.C$Y())}function rt(r,i){if(1&r){const e=t.KQA();t.I0R(0,"div",56)(1,"div",104)(2,"label",110),t.OEk(3,"Confirm Password*"),t.C$Y(),t.I0R(4,"div",106),t.wR5(5,"input",111),t.I0R(6,"button",108),t.qCj("click",function(){t.usT(e);const l=t.GaO();return t.CGJ(l.toggleFieldTextType2())}),t.wR5(7,"i",109),t.C$Y()(),t.yuY(8,pi,2,0,"div",103)(9,Pi,2,0,"div",103),t.C$Y()()}if(2&r){const e=t.GaO();t.yG2(5),t.E7m("type",e.fieldTextType2?"text":"password")("ngClass",t.S45(5,ft,e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched)),t.yG2(2),t.E7m("ngClass",t.IBC(7,Yt,!e.fieldTextType2,e.fieldTextType2)),t.yG2(),t.E7m("ngIf",e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched),t.yG2(),t.E7m("ngIf",e.formGroup.hasError("mismatch")&&(null==e.f.confirmPassword?null:e.f.confirmPassword.value)&&(null==e.f.password?null:e.f.password.value))}}function yt(r,i){if(1&r&&(t.I0R(0,"div",112)(1,"div",113)(2,"div",20)(3,"div",114)(4,"h5",115),t.OEk(5,"Password must contain:"),t.C$Y()(),t.I0R(6,"div")(7,"p",116),t.OEk(8," Minimum "),t.I0R(9,"b"),t.OEk(10,"8 characters"),t.C$Y()(),t.I0R(11,"p",117),t.OEk(12," At least "),t.I0R(13,"b"),t.OEk(14,"one lowercase"),t.C$Y(),t.OEk(15," letter (a-z) "),t.C$Y(),t.I0R(16,"p",118),t.OEk(17," At least "),t.I0R(18,"b"),t.OEk(19,"one uppercase"),t.C$Y(),t.OEk(20," letter (A-Z) "),t.C$Y(),t.I0R(21,"p",119),t.OEk(22," At least "),t.I0R(23,"b"),t.OEk(24,"one number"),t.C$Y(),t.OEk(25," (0-9) "),t.C$Y(),t.I0R(26,"p",120),t.OEk(27," At least "),t.I0R(28,"b"),t.OEk(29,"one special character"),t.C$Y(),t.OEk(30," (!@#$!%*?&) "),t.C$Y()()()()()),2&r){const e=t.GaO();t.yG2(7),t.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),t.yG2(4),t.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),t.yG2(5),t.eAK("valid",e.passwordValidations.upper),t.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.number?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.special?"valid":"invalid")}}function fe(r,i){1&r&&(t.I0R(0,"button",121),t.OEk(1,"Save"),t.C$Y())}function it(r,i){1&r&&(t.I0R(0,"button",122),t.wR5(1,"span",123),t.OEk(2," Please wait "),t.C$Y())}function Tt(r,i){1&r&&(t.I0R(0,"div",77)(1,"div",124)(2,"span",125),t.OEk(3,"Loading..."),t.C$Y()()())}function Pe(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Designation name is required."),t.C$Y())}function Lt(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Designation name must be at most 45 characters "),t.C$Y())}function le(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Status is required."),t.C$Y())}function o(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Department name is required."),t.C$Y())}function c(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1," Department name must be at most 45 characters "),t.C$Y())}function h(r,i){1&r&&(t.I0R(0,"div",101),t.OEk(1,"Status is required."),t.C$Y())}let _=(()=>{class r{constructor(e,s,l,f,w){this.route=e,this.formBuilder=s,this.api=l,this.router=f,this.toastService=w,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeselectedImage=null,this.employeeselectedImagePreview=null,this.employeeuploadedImage=null,this.states=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep","Delhi","Puducherry","Ladakh","Jammu and Kashmir"],this.fieldTextType1=!1,this.fieldTextType2=!1,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1,special:!1},this.useDefaultPassword=!0,this.departments=[],this.designations=[]}ngOnInit(){this.breadCrumbItems=[{label:"Employee",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(s=>{this.urlId=s.id?Number(s.id):null}),this.initializeForm(),this.urlId&&(this.useDefaultPassword=!1,this.getemployeeData());const e=localStorage.getItem("currentUser");if(e){const s=JSON.parse(e);this.company_id=s.id}this.updateFormControls(),this.getDepartment(),this.getDesignation(),this.formGroupDesignation=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]}),this.formGroupDepartment=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]})}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],address:["",[V.AQ.maxLength(100),V.AQ.required]],dob:["",[V.AQ.required]],image:["",this.imageValidator()],emp_id:["",[V.AQ.required]],email:["",[V.AQ.required,V.AQ.email,V.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[V.AQ.required,V.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],status:["",[V.AQ.required]],gender:["",[V.AQ.required]],state:["",[V.AQ.required]],city:["",[V.AQ.required]],zip_code:["",[V.AQ.required,V.AQ.maxLength(6)]],designation:["",[V.AQ.required]],department:["",[V.AQ.required]],joining_date:[""],password:[this.urlId?"":"123456",this.urlId?[V.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]:[V.AQ.required,V.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]],confirmPassword:[this.urlId?"":"123456",this.urlId?[]:[V.AQ.required]]},{validator:this.passwordMatchValidator})}imageValidator(){}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}passwordMatchValidator(e){const s=e.get("password")?.value,l=e.get("confirmPassword")?.value;return s&&l?s===l?null:{mismatch:!0}:null}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e),this.passwordValidations.special=/[@$!%*?&]/.test(e)}onCheckboxChange(e){this.useDefaultPassword=e.target.checked,this.updateFormControls()}updateFormControls(){this.useDefaultPassword?(this.formGroup.get("password")?.setValue("123456"),this.formGroup.get("confirmPassword")?.setValue("123456"),this.formGroup.get("password")?.disable(),this.formGroup.get("confirmPassword")?.disable()):(this.formGroup.get("password")?.enable(),this.formGroup.get("confirmPassword")?.enable(),this.formGroup.get("password")?.setValue(""),this.formGroup.get("confirmPassword")?.setValue(""))}get f(){return this.formGroup.controls}get d(){return this.formGroupDesignation.controls}get de(){return this.formGroupDepartment.controls}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department?status=active").subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid("designation?status=active").subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setemployeeDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setemployeeDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,dob:e.dob,emp_id:e.employee_id,email:e.email,password:e.password,status:e.status,mobile:e.mobile,joining_date:e.joining_date,gender:e.gender,designation:e.designation,department:e.department,state:e.state,city:e.city,zip_code:e.zip_code}),this.employeeuploadedImage=e.image||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.urlId?this.updateemployee(e):this.addemployee(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("company_id",this.company_id),e.append("name",this.f.name.value),e.append("mobile",this.f.mobile.value),e.append("email",this.f.email.value),e.append("address",this.f.address.value),e.append("dob",this.f.dob.value),e.append("employee_id",this.f.emp_id.value),e.append("status",this.f.status.value),e.append("joining_date",this.f.joining_date.value),e.append("gender",this.f.gender.value),e.append("designation",this.f.designation.value),e.append("department",this.f.department.value),e.append("state",this.f.state.value),e.append("city",this.f.city.value),e.append("zip_code",this.f.zip_code.value),this.f.password.value&&e.append("password",this.f.password.value),this.employeeselectedImage&&e.append("image",this.employeeselectedImage),e}addemployee(e){this.api.post("employees",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}updateemployee(e){this.api.put("employees",this.urlId,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["employee"])):this.toastService.error(e.message)}resetForm(){this.employeeselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}employeeimageSelect(e){const s=e.target.files[0];s&&(this.employeeselectedImage=s,this.employeeselectedImagePreview=URL.createObjectURL(s))}employeeremoveImage(){this.employeeselectedImage=null,this.employeeselectedImagePreview=null}onAdd(){this.resetFormDes(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDes(){this.formGroupDesignation.reset(),this.formGroupDesignation.patchValue({name:"",status:""})}onSubmitDes(){if(this.formGroupDesignation.valid){this.toggleSpinner(!0);const e=this.createFormDataDes();this.adddes(e)}else this.formGroupDesignation.markAllAsTouched()}createFormDataDes(){return{name:this.d.name.value,status:this.d.status.value}}adddes(e){this.api.post("designation",e).subscribe(s=>this.handleResponseDes(s),s=>this.handleError(s))}handleResponseDes(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDesignation.reset(),this.toastService.success("Designation Created Successfully!!"),this.getDesignation(),this.showModal?.hide()):this.toastService.error(e.message)}onAdddep(){this.resetFormDes(),this.showModalDepartment?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDep(){this.formGroupDepartment.reset(),this.formGroupDepartment.patchValue({name:"",status:""})}onSubmitDep(){if(this.formGroupDepartment.valid){this.toggleSpinner(!0);const e=this.createFormDataDep();this.adddep(e)}else this.formGroupDepartment.markAllAsTouched()}createFormDataDep(){return{name:this.de.name.value,status:this.de.status.value}}adddep(e){this.api.post("department",e).subscribe(s=>this.handleResponseDep(s),s=>this.handleError(s))}handleResponseDep(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDepartment.reset(),this.toastService.success("Department Created Successfully!!"),this.getDepartment(),this.showModalDepartment?.hide()):this.toastService.error(e.message)}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(k.gV),t.GI1(V.im),t.GI1(De),t.GI1(k.E5),t.GI1(Be.SA))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-add-employee"]],viewQuery:function(s,l){if(1&s&&(t.CC$(or,5),t.CC$(Tn,5)),2&s){let f;t.wto(f=t.Gqi())&&(l.showModal=f.first),t.wto(f=t.Gqi())&&(l.showModalDepartment=f.first)}},decls:271,vars:52,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["class","invalid-text"],["type","file","id","empimage","accept","image/*","formControlName","image","hidden","",3,"change"],["empimage",""],["for","empimage",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","empimage","placement","right","tooltip","Select Employee Photo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"col-xl-9"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter Empolyee name","value","name",1,"form-control",3,"ngClass"],["for","emp_id",1,"form-label"],["type","text","id","emp_id","formControlName","emp_id","placeholder","Enter Employee Id","value","emp_id",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","dob",1,"form-label"],["type","date","id","dob","formControlName","dob","placeholder","Enter Date of Birth","value","dob",1,"form-control",3,"ngClass"],["for","JoiningdatInput",1,"form-label"],["formControlName","joining_date","type","date",1,"form-control"],[1,"d-flex"],[1,"flex-grow-1"],["for","designation",1,"form-label"],[1,"flex-shrink-0"],[1,"link-effect",3,"click"],[1,"bi","bi-arrow-right","align-baseline","ms-1"],["id","designation","formControlName","designation","placeholder","Enter Designation",1,"form-select"],["selected",""],["for","departments",1,"form-label"],["id","departments","formControlName","department","placeholder","Enter Department",1,"form-select"],["for","gender",1,"form-label"],["formControlName","gender","data-choices","","id","gender",1,"form-control",3,"ngClass"],["value",""],["value","Male"],["value","Female"],["value","Other"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","3","formControlName","address",1,"form-control",3,"ngClass"],[1,"col-lg-4"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter city","value","city",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","number","id","zip_code","formControlName","zip_code","placeholder","Enter zip code",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","state",1,"form-label"],["formControlName","state","data-choices","","id","state",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"col-lg-6","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","directMessage",1,"form-check-input",3,"checked","change"],["class","col-lg-4",4,"ngIf"],["class","col-lg-12 mt-4"],[1,"col-12"],[1,"hstack","gap-2","justify-content-end","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","product-title-input",1,"form-label"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["showModalDepartment","bs-modal"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image","alt","Dropzone-Image",3,"src"],["alt","Dropzone-Image",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["alt","Uploaded Thumbnail",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"invalid-text"],[3,"value"],["class","invalid-text",4,"ngIf"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","formControlName","password","placeholder","Enter new password",1,"form-control","password-input",3,"type","ngClass","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["for","confirm-password-input",1,"form-label"],["id","confirm-password-input","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","password-input",3,"type","ngClass"],[1,"col-lg-12","mt-4"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){if(1&s){const f=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"form",1),t.qCj("ngSubmit",function(){return l.onSubmit()}),t.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),t.wR5(6,"img",5),t.C$Y(),t.I0R(7,"div",6)(8,"div",7)(9,"div",8),t.yuY(10,Rr,1,1)(11,ks,1,1)(12,er,1,0)(13,gr,2,0,"div",9),t.I0R(14,"input",10,11),t.qCj("change",function(z){return l.employeeimageSelect(z)}),t.C$Y(),t.I0R(16,"div",12)(17,"label",13)(18,"span",14),t.wR5(19,"i",15),t.C$Y()()()()()()()(),t.I0R(20,"div",16)(21,"div",17)(22,"div",18)(23,"h6",19),t.OEk(24,"Personal Details"),t.C$Y()(),t.I0R(25,"div",20)(26,"div",21)(27,"div",2)(28,"div",22)(29,"div",23)(30,"label",24),t.OEk(31,"Empolyee Name "),t.I0R(32,"span",25),t.OEk(33,"*"),t.C$Y()(),t.wR5(34,"input",26),t.yuY(35,hr,2,0,"div",9)(36,Cr,2,0,"div",9),t.C$Y()(),t.I0R(37,"div",22)(38,"div",23)(39,"label",27),t.OEk(40,"Employee Id "),t.I0R(41,"span",25),t.OEk(42,"*"),t.C$Y()(),t.wR5(43,"input",28),t.yuY(44,$r,2,0,"div",9),t.C$Y()(),t.I0R(45,"div",22)(46,"div",23)(47,"label",29),t.OEk(48,"Email "),t.I0R(49,"span",25),t.OEk(50,"*"),t.C$Y()(),t.wR5(51,"input",30),t.yuY(52,Ct,2,0,"div",9)(53,Ie,2,0,"div",9),t.C$Y()(),t.I0R(54,"div",22)(55,"div",23)(56,"label",31),t.OEk(57,"Contact Number "),t.I0R(58,"span",25),t.OEk(59,"*"),t.C$Y()(),t.wR5(60,"input",32),t.yuY(61,Ne,2,0,"div",9)(62,ut,2,0,"div",9),t.C$Y()(),t.I0R(63,"div",22)(64,"div",23)(65,"label",33),t.OEk(66,"Date of Birth "),t.I0R(67,"span",25),t.OEk(68,"*"),t.C$Y()(),t.wR5(69,"input",34),t.yuY(70,lt,2,0,"div",9),t.C$Y()(),t.I0R(71,"div",22)(72,"div",23)(73,"label",35),t.OEk(74,"Joining Date"),t.C$Y(),t.wR5(75,"input",36),t.C$Y()(),t.I0R(76,"div",22)(77,"div",23)(78,"div",37)(79,"div",38)(80,"label",39),t.OEk(81,"Designation "),t.I0R(82,"span",25),t.OEk(83,"*"),t.C$Y()()(),t.I0R(84,"div",40)(85,"a",41),t.qCj("click",function(){return l.onAdd()}),t.OEk(86,"Create New "),t.wR5(87,"i",42),t.C$Y()()(),t.I0R(88,"select",43)(89,"option",44),t.OEk(90,"Select Designation"),t.C$Y(),t.c53(91,zt,2,2,"option",102,t.wJt),t.C$Y(),t.yuY(93,Kt,2,0,"div",9),t.C$Y()(),t.I0R(94,"div",22)(95,"div",23)(96,"div",37)(97,"div",38)(98,"label",45),t.OEk(99,"Department "),t.I0R(100,"span",25),t.OEk(101,"*"),t.C$Y()()(),t.I0R(102,"div",40)(103,"a",41),t.qCj("click",function(){return l.onAdddep()}),t.OEk(104,"Create New "),t.wR5(105,"i",42),t.C$Y()()(),t.I0R(106,"select",46)(107,"option",44),t.OEk(108,"Select Department"),t.C$Y(),t.c53(109,Jt,2,2,"option",102,t.wJt),t.C$Y(),t.yuY(111,pt,2,0,"div",9),t.C$Y()(),t.I0R(112,"div",22)(113,"div",23)(114,"label",47),t.OEk(115,"Gender "),t.I0R(116,"span",25),t.OEk(117,"*"),t.C$Y()(),t.I0R(118,"select",48)(119,"option",49),t.OEk(120,"Select Gender"),t.C$Y(),t.I0R(121,"option",50),t.OEk(122,"Male"),t.C$Y(),t.I0R(123,"option",51),t.OEk(124,"Female"),t.C$Y(),t.I0R(125,"option",52),t.OEk(126,"Other"),t.C$Y()(),t.yuY(127,ui,2,0,"div",9),t.C$Y()(),t.I0R(128,"div",53)(129,"div",23)(130,"label",54),t.OEk(131," Address "),t.I0R(132,"span",25),t.OEk(133,"*"),t.C$Y()(),t.wR5(134,"textarea",55),t.yuY(135,Hi,2,0,"div",9)(136,Ui,2,0,"div",9),t.C$Y()(),t.I0R(137,"div",56)(138,"div",23)(139,"label",57),t.OEk(140,"City "),t.I0R(141,"span",25),t.OEk(142,"*"),t.C$Y()(),t.wR5(143,"input",58),t.yuY(144,di,2,0,"div",9),t.C$Y()(),t.I0R(145,"div",56)(146,"div",23)(147,"label",59),t.OEk(148,"Zip code "),t.I0R(149,"span",25),t.OEk(150,"*"),t.C$Y()(),t.wR5(151,"input",60),t.yuY(152,St,3,2,"div",61),t.C$Y()(),t.I0R(153,"div",56)(154,"div",23)(155,"label",62),t.OEk(156,"State "),t.I0R(157,"span",25),t.OEk(158,"*"),t.C$Y()(),t.I0R(159,"select",63)(160,"option",49),t.OEk(161,"Select State"),t.C$Y(),t.yuY(162,qe,2,2,"option",64),t.C$Y(),t.yuY(163,Xe,2,0,"div",9),t.C$Y()(),t.I0R(164,"div",22)(165,"div",23)(166,"label",65),t.OEk(167,"Status "),t.I0R(168,"span",25),t.OEk(169,"*"),t.C$Y()(),t.I0R(170,"select",66)(171,"option",49),t.OEk(172,"Select Status"),t.C$Y(),t.I0R(173,"option",67),t.OEk(174,"Active"),t.C$Y(),t.I0R(175,"option",68),t.OEk(176,"Inactive"),t.C$Y()(),t.yuY(177,ze,2,0,"div",9),t.C$Y()(),t.I0R(178,"div",69)(179,"li",37)(180,"div",40)(181,"div",70)(182,"input",71),t.qCj("change",function(z){return l.onCheckboxChange(z)}),t.C$Y(),t.OEk(183," Use Default Password (Password : 123456) "),t.C$Y()()()(),t.yuY(184,xi,9,9,"div",72)(185,rt,10,10,"div",72)(186,yt,31,7,"div",73),t.C$Y(),t.I0R(187,"div",74)(188,"div",75),t.yuY(189,fe,2,0,"button",76)(190,it,3,0),t.C$Y()(),t.wR5(191,"div"),t.C$Y(),t.yuY(192,Tt,4,0,"div",77),t.C$Y()()()()(),t.I0R(193,"div",78,79),t.qCj("hidden.bs.modal",function(){return l.resetFormDes()}),t.I0R(195,"div",80)(196,"div",81)(197,"div",82)(198,"h5",83),t.OEk(199,"Add Designation"),t.C$Y(),t.I0R(200,"button",84),t.qCj("click",function(){t.usT(f);const z=t.Gew(194);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(201,"form",85),t.qCj("ngSubmit",function(){return l.onSubmitDes()}),t.I0R(202,"div",86),t.wR5(203,"div",87),t.I0R(204,"div",23)(205,"label",88),t.OEk(206,"Designation Name "),t.I0R(207,"span",25),t.OEk(208,"*"),t.C$Y()(),t.wR5(209,"input",89),t.yuY(210,Pe,2,0,"div",9)(211,Lt,2,0,"div",9),t.C$Y(),t.I0R(212,"div",23)(213,"label",65),t.OEk(214,"Status "),t.I0R(215,"span",25),t.OEk(216,"*"),t.C$Y()(),t.I0R(217,"select",66)(218,"option",49),t.OEk(219,"Select Status"),t.C$Y(),t.I0R(220,"option",67),t.OEk(221,"Active"),t.C$Y(),t.I0R(222,"option",68),t.OEk(223,"Inactive"),t.C$Y()(),t.yuY(224,le,2,0,"div",9),t.C$Y()(),t.I0R(225,"div",90)(226,"div",91)(227,"button",92),t.qCj("click",function(){t.usT(f);const z=t.Gew(194);return t.CGJ(z.hide())}),t.wR5(228,"i",93),t.OEk(229," Close "),t.C$Y(),t.I0R(230,"button",94),t.OEk(231," Add "),t.C$Y()()()()()()(),t.I0R(232,"div",78,95),t.qCj("hidden.bs.modal",function(){return l.resetFormDep()}),t.I0R(234,"div",80)(235,"div",81)(236,"div",82)(237,"h5",83),t.OEk(238,"Add Department"),t.C$Y(),t.I0R(239,"button",84),t.qCj("click",function(){t.usT(f);const z=t.Gew(233);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(240,"form",85),t.qCj("ngSubmit",function(){return l.onSubmitDep()}),t.I0R(241,"div",86),t.wR5(242,"div",87),t.I0R(243,"div",23)(244,"label",88),t.OEk(245,"Department Name "),t.I0R(246,"span",25),t.OEk(247,"*"),t.C$Y()(),t.wR5(248,"input",96),t.yuY(249,o,2,0,"div",9)(250,c,2,0,"div",9),t.C$Y(),t.I0R(251,"div",23)(252,"label",65),t.OEk(253,"Status "),t.I0R(254,"span",25),t.OEk(255,"*"),t.C$Y()(),t.I0R(256,"select",66)(257,"option",49),t.OEk(258,"Select Status"),t.C$Y(),t.I0R(259,"option",67),t.OEk(260,"Active"),t.C$Y(),t.I0R(261,"option",68),t.OEk(262,"Inactive"),t.C$Y()(),t.yuY(263,h,2,0,"div",9),t.C$Y()(),t.I0R(264,"div",90)(265,"div",91)(266,"button",92),t.qCj("click",function(){t.usT(f);const z=t.Gew(233);return t.CGJ(z.hide())}),t.wR5(267,"i",93),t.OEk(268," Close "),t.C$Y(),t.I0R(269,"button",94),t.OEk(270," Add "),t.C$Y()()()()()()()}2&s&&(t.E7m("title",l.urlId?"Edit Employee Detail":"Add Employee Detail")("breadcrumbItems",l.breadCrumbItems),t.yG2(),t.E7m("formGroup",l.formGroup),t.yG2(9),t.C0Y(10,l.employeeselectedImage?10:l.employeeuploadedImage?11:12),t.yG2(3),t.C0Y(13,l.f.image&&l.f.image.hasError("required")&&l.f.image.touched?13:-1),t.yG2(21),t.E7m("ngClass",l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?"is-invalid":""),t.yG2(),t.C0Y(35,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?35:-1),t.yG2(),t.C0Y(36,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?36:-1),t.yG2(7),t.E7m("ngClass",l.f.emp_id&&l.f.emp_id.hasError("required")&&l.f.emp_id.touched?"is-invalid":""),t.yG2(),t.C0Y(44,l.f.emp_id&&l.f.emp_id.hasError("required")&&l.f.emp_id.touched?44:-1),t.yG2(7),t.E7m("ngClass",l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?"is-invalid":""),t.yG2(),t.C0Y(52,l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?52:-1),t.yG2(),t.C0Y(53,l.f.email.hasError("pattern")?53:-1),t.yG2(7),t.E7m("ngClass",l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?"is-invalid":""),t.yG2(),t.C0Y(61,l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?61:-1),t.yG2(),t.C0Y(62,l.f.mobile.hasError("pattern")?62:-1),t.yG2(7),t.E7m("ngClass",l.f.dob&&l.f.dob.hasError("required")&&l.f.dob.touched?"is-invalid":""),t.yG2(),t.C0Y(70,l.f.dob&&l.f.dob.hasError("required")&&l.f.dob.touched?70:-1),t.yG2(21),t.oho(l.designations),t.yG2(2),t.C0Y(93,l.f.designation&&l.f.designation.hasError("required")&&l.f.designation.touched?93:-1),t.yG2(16),t.oho(l.departments),t.yG2(2),t.C0Y(111,l.f.department&&l.f.department.hasError("required")&&l.f.department.touched?111:-1),t.yG2(7),t.E7m("ngClass",l.f.gender&&l.f.gender.hasError("required")&&l.f.gender.touched?"is-invalid":""),t.yG2(9),t.C0Y(127,l.f.gender&&l.f.gender.hasError("required")&&l.f.gender.touched?127:-1),t.yG2(7),t.E7m("ngClass",t.S45(50,ft,l.f.address&&l.f.address.errors&&l.f.address.touched)),t.yG2(),t.C0Y(135,l.f.address&&l.f.address.hasError("required")&&l.f.address.touched?135:-1),t.yG2(),t.C0Y(136,l.f.address&&l.f.address.hasError("maxlength")&&l.f.address.touched?136:-1),t.yG2(7),t.E7m("ngClass",l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?"is-invalid":""),t.yG2(),t.C0Y(144,l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?144:-1),t.yG2(7),t.E7m("ngClass",l.f.zip_code&&l.f.zip_code.hasError("required")&&l.f.zip_code.touched?"is-invalid":""),t.yG2(),t.E7m("ngIf",(null==l.f.zip_code?null:l.f.zip_code.touched)&&(null==l.f.zip_code?null:l.f.zip_code.errors)),t.yG2(7),t.E7m("ngClass",l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?"is-invalid":""),t.yG2(3),t.E7m("ngForOf",l.states),t.yG2(),t.C0Y(163,l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?163:-1),t.yG2(7),t.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(177,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?177:-1),t.yG2(5),t.E7m("checked",l.useDefaultPassword),t.yG2(2),t.E7m("ngIf",!l.useDefaultPassword),t.yG2(),t.E7m("ngIf",!l.useDefaultPassword),t.yG2(),t.C0Y(186,l.f.password&&l.f.password.hasError("pattern")?186:-1),t.yG2(3),t.C0Y(189,l.saveButtonActive?189:190),t.yG2(3),t.C0Y(192,l.spinnerStatus?192:-1),t.yG2(9),t.E7m("formGroup",l.formGroupDesignation),t.yG2(9),t.C0Y(210,l.d.name&&l.d.name.hasError("required")&&l.d.name.touched?210:-1),t.yG2(),t.C0Y(211,l.d.name&&l.d.name.hasError("maxlength")&&l.d.name.touched?211:-1),t.yG2(6),t.E7m("ngClass",l.d.status&&l.d.status.hasError("required")&&l.d.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(224,l.d.status&&l.d.status.hasError("required")&&l.d.status.touched?224:-1),t.yG2(16),t.E7m("formGroup",l.formGroupDepartment),t.yG2(9),t.C0Y(249,l.de.name&&l.de.name.hasError("required")&&l.de.name.touched?249:-1),t.yG2(),t.C0Y(250,l.de.name&&l.de.name.hasError("maxlength")&&l.de.name.touched?250:-1),t.yG2(6),t.E7m("ngClass",l.de.status&&l.de.status.hasError("required")&&l.de.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(263,l.de.status&&l.de.status.hasError("required")&&l.de.status.touched?263:-1))},dependencies:[Ge.QF,Ge.ay,Ge.u_,Je.O,V.sz,V.wd,V.GO,V.ot,V.O4,V.GC,V.ue,V.u,V.uW,V.Wo,_n.uK,pr.uM],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}']})}return r})();var b=Rt(4448),x=Rt(5657),M=Rt(4680),I=Rt(3304);function F(r,i){if(1&r&&(t.I0R(0,"div",17)(1,"p",18),t.OEk(2,"Check-In At"),t.C$Y(),t.wR5(3,"h5",32),t.C$Y()),2&r){const e=t.GaO();t.yG2(3),t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.check_in_time),t.E3n)}}function U(r,i){if(1&r&&(t.I0R(0,"div",17)(1,"p",18),t.OEk(2,"Check-out At"),t.C$Y(),t.I0R(3,"h5",19),t.wR5(4,"span",33),t.C$Y()()),2&r){const e=t.GaO();t.yG2(4),t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.check_out_time),t.E3n)}}function $(r,i){if(1&r&&(t.I0R(0,"div",17)(1,"p",18),t.OEk(2,"Total Time"),t.C$Y(),t.I0R(3,"h5",19)(4,"span",34),t.OEk(5),t.C$Y()()()),2&r){const e=t.GaO();t.yG2(5),t.cNF(e.formattedTotalTime)}}function q(r,i){if(1&r&&(t.I0R(0,"div",17)(1,"p",18),t.OEk(2,"Total Distance"),t.C$Y(),t.I0R(3,"h5",19)(4,"span",34),t.OEk(5),t.C$Y()()()),2&r){const e=t.GaO();t.yG2(5),t.oRS("",e.totaldistanceToshow," km")}}const ne=r=>({"selected-item":r});function de(r,i){if(1&r){const e=t.KQA();t.I0R(0,"li",35),t.qCj("click",function(){const f=t.usT(e).$implicit,w=t.GaO();return t.CGJ(w.updateMarkerAndPath(f.end.longitude,f.end.latitude,f))}),t.I0R(1,"div",36)(2,"span",37),t.OEk(3),t.C$Y(),t.I0R(4,"button",38),t.wR5(5,"span",39),t.OEk(6),t.C$Y()(),t.I0R(7,"p",40),t.OEk(8),t.C$Y()()}if(2&r){const e=i.$implicit,s=t.GaO();t.E7m("ngClass",t.S45(5,ne,s.selectedItem===e)),t.yG2(3),t.cNF(e.end.formattedTime),t.yG2(),t.E7m("ngClass",s.getBatteryClass(e.end.battery_status)),t.yG2(2),t.oRS(" ",e.end.battery_status," % "),t.yG2(2),t.cNF(e.end.address)}}function ge(r,i){1&r&&(t.I0R(0,"div",41),t.wR5(1,"div",42),t.I0R(2,"button",43)(3,"span",44)(4,"span",45),t.OEk(5," Loading... "),t.C$Y(),t.I0R(6,"span",46)(7,"span",47),t.OEk(8,"Loading..."),t.C$Y()()()()())}const we=r=>({rotate:r});let me=(()=>{class r{constructor(e,s,l){this.route=e,this.api=s,this.cdr=l,this.urlId=null,this.dateChangeSubject=new x.E,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeTimeline=[],this.selectedDate=new Date,this.markers=[],this.selectedItem=null,this.checkIndetails={},this.selectedInterval=15,this.intervalTimeCoordinates=[],this.isRotating=!1}ngOnDestroy(){this.map&&this.map.remove()}ngOnInit(){this.cdr.detectChanges(),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(new Date)),this.bsConfig={dateInputFormat:"DD-MMM-YY",showWeekNumbers:!1},this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&(this.getemployeeTimeline(),this.getCheckInDetail()),this.dateChangeSubject.pipe((0,M.o)(300)).subscribe(e=>{this.handleDateChange(e)})}onIntervalChange(){this.initializeMap()}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getemployeeTimeline(),this.getCheckInDetail()}refreshTimeline(){this.isRotating=!0,this.getemployeeTimeline(),setTimeout(()=>{this.isRotating=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),e&&e.status?(this.checkIndetails=e.data[0],this.checkIndetails?.check_in_time&&this.checkIndetails?.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeTimeline(){this.toggleSpinner(!0),this.api.getwithoutid(`getCoordinates?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status&&e.data.length>0){if(this.employeeTimeline=e.data.map(s=>(s.formattedTime=this.formatTime(s.time),s)),this.employeeTimeline&&this.employeeTimeline.length>0){this.initializeMap();let s=0;for(let f=1;f<this.employeeTimeline.length;f++)s+=this.calculateDistance(this.employeeTimeline[f-1].latitude,this.employeeTimeline[f-1].longitude,this.employeeTimeline[f].latitude,this.employeeTimeline[f].longitude);this.calculateTimeSpent(),this.totaldistanceToshow=s.toFixed(1)}}else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null},e=>{this.toggleSpinner(!1),this.employeeTimeline=[],this.initializeDefaultMap(),this.handleError(e.message||"An error occurred while fetching data")})}filterCoordinatesByInterval(e,s){const[l,f,w]=e.split(":").map(Number),W=[];let ie=3600*l+60*f+w;const oe=$t=>{const[ci,zi,kn]=$t.split(":").map(Number);return 3600*ci+60*zi+kn},je=oe(this.employeeTimeline[this.employeeTimeline.length-1].time),Ye=this.employeeTimeline[0];for(W.push({start:Ye,end:Ye});ie<=je;){ie+=60*s;const $t=this.employeeTimeline.find(ci=>oe(ci.time)>=ie);if(!$t)break;{const ci=W[W.length-1];(!ci||ci.end.id!==$t.id)&&W.push({start:W[W.length-1].end,end:$t})}}const Wt=this.employeeTimeline[this.employeeTimeline.length-1];return(0===W.length||W[W.length-1].end.id!==Wt.id)&&W.push({start:W.length>0?W[W.length-1].end:Wt,end:Wt}),this.intervalTimeCoordinates=W,W}calculateDistance(e,s,l,f){const z=this.deg2rad(l-e),W=this.deg2rad(f-s),ie=Math.sin(z/2)*Math.sin(z/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(l))*Math.sin(W/2)*Math.sin(W/2);return 2*Math.atan2(Math.sqrt(ie),Math.sqrt(1-ie))*6371}deg2rad(e){return e*(Math.PI/180)}calculateTimeSpent(){const e={driving:0,cycling:0,walking:0,stationary:0};for(let l=1;l<this.employeeTimeline.length;l++){const f=this.employeeTimeline[l-1],w=this.employeeTimeline[l],z=new Date(`1970-01-01T${f.time}Z`),ie=(new Date(`1970-01-01T${w.time}Z`).getTime()-z.getTime())/1e3/60,Re=this.calculateDistance(f.latitude,f.longitude,w.latitude,w.longitude)/(ie/60);Re>25?e.driving+=ie:Re>15?e.cycling+=ie:Re>5?e.walking+=ie:e.stationary+=ie}const s=l=>`${Math.floor(l/60)} hours ${Math.round(l%60)} minutes`;return{driving:s(e.driving),cycling:s(e.cycling),walking:s(e.walking),stationary:s(e.stationary)}}geocodeCoordinates(e,s){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${s}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(f=>f.json()).then(f=>f.features[0].place_name).catch(f=>(console.error("Error fetching address:",f),""))}initializeMap(){this.map=new b.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),this.map.addControl(new b.NavigationControl),this.map.on("load",()=>{if(!this.employeeTimeline||0===this.employeeTimeline.length)return void console.error("Employee timeline data is empty or undefined.");this.map.resize();const e=this.filterCoordinatesByInterval(this.employeeTimeline[0].time,this.selectedInterval),s=this.employeeTimeline.map(l=>this.geocodeCoordinates(l.longitude,l.latitude).then(f=>{l.address=f}).catch(f=>{console.error("Error fetching address:",f)}));Promise.all(s).then(()=>{const l=this.employeeTimeline[0],f=this.employeeTimeline[this.employeeTimeline.length-1],w=new b.Popup({offset:25}).setHTML(`<h6>${l.formattedTime}</h6>\n                <p>Battery Percentage: ${l.battery_status}%</p>\n                <p>Address: ${l.address}</p>`),z=new b.Marker({color:"green"}).setLngLat([l.longitude,l.latitude]).setPopup(w).addTo(this.map),W=new b.Popup({offset:25}).setHTML(`<h6>${f.formattedTime}</h6>\n                <p>Battery Percentage: ${f.battery_status}%</p>\n                <p>Address: ${f.address}</p>`),ie=new b.Marker({color:"red"}).setLngLat([f.longitude,f.latitude]).setPopup(W).addTo(this.map);this.markers.push(z,ie),e.forEach((Re,je)=>{if(!Re.start||!Re.end)return void console.error(`Segment at index ${je} is missing start or end coordinates.`);const Ye=this.employeeTimeline.filter($t=>{const ci=this.getTimeInSeconds($t.time),zi=this.getTimeInSeconds(Re.start.time),kn=this.getTimeInSeconds(Re.end.time);return ci>=zi&&ci<=kn}).map($t=>[$t.longitude,$t.latitude]);(Ye[0][0]!==Re.start.longitude||Ye[0][1]!==Re.start.latitude)&&Ye.unshift([Re.start.longitude,Re.start.latitude]),(Ye[Ye.length-1][0]!==Re.end.longitude||Ye[Ye.length-1][1]!==Re.end.latitude)&&Ye.push([Re.end.longitude,Re.end.latitude]);const Wt=`path-${je}`;this.removeLayerIfExists(Wt),this.map.addLayer({id:Wt,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:Ye}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":8}})});const oe=new b.LngLatBounds;this.markers.forEach(Re=>oe.extend(Re.getLngLat())),this.map.fitBounds(oe,{padding:50})})})}getTimeInSeconds(e){const[s,l,f]=e.split(":").map(Number);return 3600*s+60*l+f}removeLayerIfExists(e){this.map.getLayer(e)&&this.map.removeLayer(e),this.map.getSource(e)&&this.map.removeSource(e)}initializeDefaultMap(){this.map=new b.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.9629,20.5937],zoom:13}),this.map.addControl(new b.NavigationControl)}formatTime(e){const[s,l,f]=e.split(":");return`${+s%12||12}:${l} ${+s>=12?"PM":"AM"}`}handleError(e){this.toggleSpinner(!1)}updateMarkerAndPath(e,s,l){this.marker&&this.marker.remove(),this.marker=new b.Marker({color:"#ffc703"}).setLngLat([e,s]).addTo(this.map);const f=new b.Popup({offset:25}).setHTML(`<h6>${l.end.formattedTime}</h6>\n        <p>Battery Percentage: ${l.end.battery_status}%</p>\n        <p>Address: ${l.end.address}</p>`);this.marker.setPopup(f),this.selectedItem=l}getBatteryClass(e){return e>=75?"battery-high":e>=35?"battery-mid":"battery-low"}calculateTotalTime(e,s){const[l,f]=e.split(":").map(Number),[w,z]=s.split(":").map(Number),W=new Date;W.setHours(l,f,0);const ie=new Date;ie.setHours(w,z,0);const oe=ie.getTime()-W.getTime(),Re=Math.floor(oe/6e4);return`${Math.floor(Re/60)}h ${Re%60}m`}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(k.gV),t.GI1(De),t.GI1(t.kD9))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-timeline"]],inputs:{companyId:"companyId"},decls:47,vars:18,consts:[[1,"card","py-3"],[1,"row"],[1,"col-lg-2"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","15"],["value","30"],["value","60"],[1,"col-8","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"p-3","user-chat-topbar","border-bottom","border-2"],[1,"row","align-items-center","flex-nowrap"],[1,"col-lg","col-3"],[1,"text-muted","mb-2","text-uppercase"],[1,"fs-md","mb-0"],["id","total-amount"],["class","col-lg col-3"],[1,"col-lg-4",3,"ngClass"],[1,"acitivity-timeline-2","list-unstyled","mb-0","mt-3","overflow"],[1,"col-lg-8",3,"ngClass"],["id","map",1,"match-parent","w-100","h-100"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"],["id","map",1,"match-parent"],[1,"fs-md","mb-0",3,"innerHTML"],["id","invoice-date",3,"innerHTML"],["id","invoice-due-date"],[1,"activity-item","pt-2",3,"ngClass","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-md","badge","bg-body-secondary","border","border-secondary","text-secondary"],["type","button","data-bs-toggle","tooltip","placement","top","tooltip","Battery Percentage",1,"btn","battery-status",3,"ngClass"],[1,"ri-battery-saver-line"],[1,"mb-0","mt-2"],[1,"mt-5","pt-5","text-center"],[1,"error-img","text-center","px-5","mt-5"],["type","button",1,"btn","btn-info","btn-load","mt-5"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","me-2"],["role","status",1,"spinner-grow","flex-shrink-0"],[1,"visually-hidden"],["class","activity-item pt-2",3,"ngClass"],["class","mt-5 pt-5 text-center"]],template:function(s,l){1&s&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.iHE("ngModelChange",function(w){return t.kNx(l.selectedDate,w)||(l.selectedDate=w),w}),t.qCj("bsValueChange",function(w){return l.onDateChange(w)}),t.C$Y(),t.I0R(5,"div",5)(6,"label",6),t.wR5(7,"i",7),t.C$Y()()()(),t.I0R(8,"div",2)(9,"select",8),t.iHE("ngModelChange",function(w){return t.kNx(l.selectedInterval,w)||(l.selectedInterval=w),w}),t.qCj("change",function(){return l.onIntervalChange()}),t.I0R(10,"option",9),t.OEk(11,"15 Minutes"),t.C$Y(),t.I0R(12,"option",10),t.OEk(13,"30 Minutes"),t.C$Y(),t.I0R(14,"option",11),t.OEk(15,"1 Hour"),t.C$Y()()(),t.I0R(16,"div",12)(17,"button",13),t.qCj("click",function(){return l.refreshTimeline()}),t.wR5(18,"i",14),t.C$Y()()()(),t.I0R(19,"div",15)(20,"div",16)(21,"div",17)(22,"p",18),t.OEk(23,"Date"),t.C$Y(),t.I0R(24,"h5",19)(25,"span",20),t.OEk(26),t.wVc(27,"date"),t.C$Y()()(),t.yuY(28,F,4,1,"div",21)(29,U,5,1,"div",21)(30,$,6,1,"div",21)(31,q,6,1,"div",21),t.C$Y()(),t.I0R(32,"div",1)(33,"div",22)(34,"ul",23),t.c53(35,de,9,7,"li",48,t.wJt,!1,ge,9,0,"div",49),t.C$Y()(),t.I0R(38,"div",24),t.wR5(39,"div",25),t.C$Y(),t.I0R(40,"div",26)(41,"div",27)(42,"div",28),t.wR5(43,"img",29),t.C$Y(),t.I0R(44,"h3",30),t.OEk(45,"Sorry! No Result Found"),t.C$Y()()()(),t.wR5(46,"div",31)),2&s&&(t.yG2(4),t.E7m("bsConfig",l.bsConfig),t.OKB("ngModel",l.selectedDate),t.yG2(5),t.OKB("ngModel",l.selectedInterval),t.yG2(8),t.E7m("ngClass",t.S45(16,we,l.isRotating)),t.yG2(9),t.cNF(t.g7$(27,13,l.formattedDate,"dd/MMM/yyyy")),t.yG2(2),t.C0Y(28,null!=l.checkIndetails&&l.checkIndetails.check_in_time?28:-1),t.yG2(),t.C0Y(29,null!=l.checkIndetails&&l.checkIndetails.check_out_time?29:-1),t.yG2(),t.C0Y(30,null!=l.checkIndetails&&l.checkIndetails.check_in_time&&null!=l.checkIndetails&&l.checkIndetails.check_out_time?30:-1),t.yG2(),t.C0Y(31,l.totaldistanceToshow?31:-1),t.yG2(2),t.E7m("ngClass",l.employeeTimeline&&l.employeeTimeline.length>0?"d-block":"d-none"),t.yG2(2),t.oho(l.intervalTimeCoordinates),t.yG2(3),t.E7m("ngClass",l.employeeTimeline&&0==l.employeeTimeline.length?"d-none":"d-block"),t.yG2(3),t.E7m("ngClass",l.employeeTimeline&&0===l.employeeTimeline.length?"d-block":"d-none"))},dependencies:[Ge.QF,V.wd,V.GO,V.ot,V.GC,V.ue,V._G,pr.uM,I.em,I.U5,Ge.y],styles:[".activity-timeline-2[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.activity-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.selected-item[_ngcontent-%COMP%]{background-color:#d1ecf1}.battery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.battery-status[_ngcontent-%COMP%]   .ri-battery-saver-line[_ngcontent-%COMP%]{margin-right:5px}.battery-high[_ngcontent-%COMP%]{color:green}.battery-mid[_ngcontent-%COMP%]{color:orange}.battery-low[_ngcontent-%COMP%]{color:red}#noresult[_ngcontent-%COMP%]{text-align:center;padding:20px}#map[_ngcontent-%COMP%]{width:100%!important;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:500px}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return r})();function Se(r,i){1&r&&(t.I0R(0,"div",30),t.OEk(1,"Password is required."),t.C$Y())}function N(r,i){1&r&&(t.I0R(0,"div",30),t.OEk(1,"Confirm Password is required."),t.C$Y())}function Q(r,i){1&r&&(t.I0R(0,"div",30),t.OEk(1," Password and Confirm Password does not match. "),t.C$Y())}function pe(r,i){if(1&r&&(t.I0R(0,"div",18)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),t.OEk(5,"Password must contain:"),t.C$Y()(),t.I0R(6,"div")(7,"p",35),t.OEk(8," Minimum "),t.I0R(9,"b"),t.OEk(10,"8 characters"),t.C$Y()(),t.I0R(11,"p",36),t.OEk(12," At least "),t.I0R(13,"b"),t.OEk(14,"one lowercase"),t.C$Y(),t.OEk(15," letter (a-z) "),t.C$Y(),t.I0R(16,"p",37),t.OEk(17," At least "),t.I0R(18,"b"),t.OEk(19,"one uppercase"),t.C$Y(),t.OEk(20," letter (A-Z) "),t.C$Y(),t.I0R(21,"p",38),t.OEk(22," At least "),t.I0R(23,"b"),t.OEk(24,"one number"),t.C$Y(),t.OEk(25," (0-9) "),t.C$Y()()()()()),2&r){const e=t.GaO();t.yG2(7),t.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),t.yG2(4),t.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),t.yG2(5),t.eAK("valid",e.passwordValidations.upper),t.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.number?"valid":"invalid")}}function xe(r,i){if(1&r&&(t.I0R(0,"tr")(1,"td"),t.wR5(2,"i",39),t.OEk(3),t.C$Y(),t.I0R(4,"td"),t.OEk(5),t.C$Y(),t.I0R(6,"td"),t.OEk(7),t.wVc(8,"date"),t.C$Y(),t.I0R(9,"td"),t.OEk(10),t.C$Y(),t.I0R(11,"td")(12,"a",40),t.OEk(13,"Logout "),t.wR5(14,"i",41),t.C$Y()()()),2&r){const e=i.$implicit;t.yG2(3),t.oRS(" ",e.device," "),t.yG2(2),t.cNF(e.ip_address),t.yG2(2),t.cNF(t.g7$(8,4,e.date,"dd MMM , yyyy")),t.yG2(3),t.cNF(e.address)}}const Le=(r,i)=>({"mdi-eye-off-outline":r,"mdi-eye-outline":i});let Ze=(()=>{class r{constructor(e,s,l,f){this.route=e,this.api=s,this.toastService=l,this.formBuilder=f,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.loginDetails=[],this.loginDetailsList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1}}ngOnInit(){this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&this.getemployeeLoginDetail(),this.initializeForm()}initializeForm(){this.formGroup=this.formBuilder.group({password:["",[V.AQ.required,V.AQ.pattern("(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}")]],confirmPassword:["",V.AQ.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){const s=e.get("password")?.value,l=e.get("confirmPassword")?.value;return s===l?null:{mismatch:!0}}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e)}get f(){return this.formGroup.controls}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeLoginDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLoginDetail?emp_id=${this.urlId}company_id=${this.companyId}`).subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.loginDetails=s.data,this.loginDetails=s.data||[],this.loginDetailsList=s.data||[],this.updatePagination(),this.updateDisplayedItems()):this.loginDetails=[]},s=>{this.toggleSpinner(!1),this.handleError(s.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.updateemployee(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("company_id",this.companyId),e.append("password",this.f.password.value),e}updateemployee(e){this.api.put("employees",this.urlId,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}filterdata(){this.loginDetails=this.term?this.loginDetailsList.filter(e=>{const s=this.term.toLowerCase();return e.name.toLowerCase().includes(s)||e.employee_id.toLowerCase().includes(s)||e.status.toLowerCase().includes(s)}):this.loginDetailsList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.loginDetails.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.loginDetailsList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.loginDetails=this.loginDetailsList.slice(e,this.endItem)}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(k.gV),t.GI1(De),t.GI1(Be.SA),t.GI1(V.im))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-password-change"]],inputs:{companyId:"companyId"},decls:60,vars:19,consts:[[3,"formGroup","ngSubmit"],[1,"row","g-2","align-items-center"],[1,"col-lg-4"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","onpaste","return false","placeholder","Enter new password","formControlName","password","required","",1,"form-control","password-input",3,"type","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["class","invalid-text"],["for","confirm-password-input",1,"form-label"],["onpaste","return false","id","confirm-password-input","placeholder","Confirm password","formControlName","confirmPassword","required","",1,"form-control","password-input",3,"type"],[1,"d-flex","align-items-center","justify-content-between"],["type","submit",1,"btn","btn-success"],["class","col-lg-12"],[1,"mt-4","mb-4","pb-3","border-bottom","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],[1,"ri-logout-box-r-line"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[1,"invalid-text"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"card-body"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"bi","bi-phone","align-baseline","me-1"],["href","javascript:void(0);",1,"icon-link","icon-link-hover"],[1,"bi","bi-box-arrow-right"]],template:function(s,l){1&s&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return l.onSubmit()}),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t.OEk(5,"New Password*"),t.C$Y(),t.I0R(6,"div",5)(7,"input",6),t.qCj("input",function(){return l.checkPasswordPattern()}),t.C$Y(),t.I0R(8,"button",7),t.qCj("click",function(){return l.toggleFieldTextType1()}),t.wR5(9,"i",8),t.C$Y()(),t.yuY(10,Se,2,0,"div",9),t.C$Y()(),t.I0R(11,"div",2)(12,"div",3)(13,"label",10),t.OEk(14,"Confirm Password*"),t.C$Y(),t.I0R(15,"div",5),t.wR5(16,"input",11),t.I0R(17,"button",7),t.qCj("click",function(){return l.toggleFieldTextType2()}),t.wR5(18,"i",8),t.C$Y()(),t.yuY(19,N,2,0,"div",9)(20,Q,2,0,"div",9),t.C$Y()(),t.I0R(21,"div",12)(22,"div")(23,"button",13),t.OEk(24,"Change Password"),t.C$Y()()(),t.yuY(25,pe,26,6,"div",14),t.C$Y()(),t.I0R(26,"div",15)(27,"h5",16),t.OEk(28,"Login History"),t.C$Y()(),t.I0R(29,"div",17)(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead",21)(34,"tr")(35,"th",22),t.OEk(36,"Mobile"),t.C$Y(),t.I0R(37,"th",22),t.OEk(38,"IP Address"),t.C$Y(),t.I0R(39,"th",22),t.OEk(40,"Date"),t.C$Y(),t.I0R(41,"th",22),t.OEk(42,"Address"),t.C$Y(),t.I0R(43,"th",22),t.wR5(44,"i",23),t.C$Y()()(),t.I0R(45,"tbody"),t.c53(46,xe,15,7,"tr",null,t.wJt),t.C$Y()()(),t.I0R(48,"div",24)(49,"div",25)(50,"div",26),t.OEk(51," Showing "),t.I0R(52,"span",27),t.OEk(53),t.C$Y(),t.OEk(54," of "),t.I0R(55,"span",27),t.OEk(56),t.C$Y(),t.OEk(57," Results "),t.C$Y()(),t.I0R(58,"div",28)(59,"pagination",29),t.qCj("pageChanged",function(w){return l.pageChanged(w)}),t.C$Y()()()()()),2&s&&(t.E7m("formGroup",l.formGroup),t.yG2(7),t.E7m("type",l.fieldTextType1?"text":"password"),t.yG2(2),t.E7m("ngClass",t.IBC(13,Le,!l.fieldTextType1,l.fieldTextType1)),t.yG2(),t.C0Y(10,l.f.password&&l.f.password.hasError("required")&&l.f.password.touched?10:-1),t.yG2(6),t.E7m("type",l.fieldTextType2?"text":"password"),t.yG2(2),t.E7m("ngClass",t.IBC(16,Le,!l.fieldTextType2,l.fieldTextType2)),t.yG2(),t.C0Y(19,l.f.confirmPassword&&l.f.confirmPassword.hasError("required")&&l.f.confirmPassword.touched?19:-1),t.yG2(),t.C0Y(20,l.formGroup.hasError("mismatch")&&l.f.confirmPassword.value&&l.f.password.value?20:-1),t.yG2(5),t.C0Y(25,l.f.password&&l.f.password.hasError("pattern")?25:-1),t.yG2(21),t.oho(l.loginDetails),t.yG2(7),t.cNF(null==l.loginDetails?null:l.loginDetails.length),t.yG2(3),t.cNF(null==l.loginDetailsList?null:l.loginDetailsList.length),t.yG2(3),t.E7m("totalItems",null==l.loginDetailsList?null:l.loginDetailsList.length)("itemsPerPage",l.itemsPerPage))},dependencies:[Ge.QF,V.sz,V.ot,V.ue,V.u,V.eJ,V.uW,V.Wo,nt.im,Ge.y],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}']})}return r})();var kt=Rt(1528);const It=r=>({rotate:r});let ii=(()=>{class r{constructor(e,s){this.api=e,this.route=s,this.urlId=null,this.selectedDate=new Date,this.spinnerStatus=!1,this.isRotatinglive=!1,this.refreshInterval=3e4}ngOnDestroy(){this.livemap&&this.livemap.remove(),this.liveLocationTimeout&&clearTimeout(this.liveLocationTimeout)}ngOnInit(){this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.companyId&&this.scheduleNextUpdate(),this.initializeMap()}refreshTimeline(){this.isRotatinglive=!0,this.getLiveLocation(),setTimeout(()=>{this.isRotatinglive=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getLiveLocation(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLiveLocation?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.liveCoordinates=s.data,this.addMarkerToMap(this.liveCoordinates)):this.liveCoordinates=[],this.scheduleNextUpdate()},s=>{this.toggleSpinner(!1),this.handleError(s.message||"An error occurred while fetching data"),this.scheduleNextUpdate()})}scheduleNextUpdate(){this.liveLocationTimeout=setTimeout(()=>{this.getLiveLocation()},this.refreshInterval)}handleError(e){this.toggleSpinner(!1),console.error(e)}initializeMap(){b.accessToken="pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",this.livemap=new b.Map({container:"mapId",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),window.addEventListener("resize",()=>{this.livemap.resize()}),this.livemap.on("load",e=>{this.livemap.resize()}),this.livemap.addControl(new b.NavigationControl)}addMarkerToMap(e){var s=this;return(0,kt.c)(function*(){if(!e)return;const l=[e.longitude,e.latitude];try{const f=yield s.geocodeCoordinates(e.longitude,e.latitude),w=new b.Popup({offset:25}).setText(`Address: ${f}\nMotion: ${e.motion}`),z=document.createElement("div");z.className="custom-marker",z.style.backgroundImage=`url(${s.emp_image})`,z.style.width="42px",z.style.height="42px",z.style.backgroundSize="100%",z.style.borderRadius="50%",new b.Marker(z).setLngLat(l).setPopup(w).addTo(s.livemap).togglePopup(),s.livemap.flyTo({center:l,zoom:14})}catch(f){console.error("Error adding marker to map:",f)}})()}geocodeCoordinates(e,s){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${s}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(f=>f.json()).then(f=>f.features[0].place_name).catch(f=>(console.error("Error fetching address:",f),"Unknown location"))}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(De),t.GI1(k.gV))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-live-location"]],inputs:{companyId:"companyId",emp_image:"emp_image"},decls:13,vars:5,consts:[[1,"card"],[1,"row"],[1,"col-12","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"col-lg-12",3,"ngClass"],["id","mapId"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"]],template:function(s,l){1&s&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.qCj("click",function(){return l.refreshTimeline()}),t.wR5(4,"i",4),t.C$Y()(),t.I0R(5,"div",5),t.wR5(6,"div",6),t.C$Y(),t.I0R(7,"div",7)(8,"div",8)(9,"div",9),t.wR5(10,"img",10),t.C$Y(),t.I0R(11,"h3",11),t.OEk(12,"Sorry! No Result Found"),t.C$Y()()()()()),2&s&&(t.yG2(3),t.E7m("ngClass",t.S45(3,It,l.isRotatinglive)),t.yG2(2),t.E7m("ngClass",l.liveCoordinates&&0==l.liveCoordinates.length?"d-none":"d-block"),t.yG2(3),t.E7m("ngClass",l.liveCoordinates&&0===l.liveCoordinates.length?"d-block":"d-none"))},dependencies:[Ge.QF],styles:["[_nghost-%COMP%]     #mapId{width:100%!important;height:500px!important}.match-parent[_ngcontent-%COMP%]{height:100%}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return r})();function wi(r,i){if(1&r&&(t.I0R(0,"div",13)(1,"p",14),t.OEk(2,"Check-In At"),t.C$Y(),t.wR5(3,"h5",28),t.C$Y()),2&r){const e=t.GaO();t.yG2(3),t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.check_in_time),t.E3n)}}function Mi(r,i){if(1&r&&(t.I0R(0,"div",13)(1,"p",14),t.OEk(2,"Check-out At"),t.C$Y(),t.I0R(3,"h5",15),t.wR5(4,"span",29),t.C$Y()()),2&r){const e=t.GaO();t.yG2(4),t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.check_out_time),t.E3n)}}function dn(r,i){if(1&r&&(t.I0R(0,"div",13)(1,"p",14),t.OEk(2,"Total Time"),t.C$Y(),t.I0R(3,"h5",15)(4,"span",30),t.OEk(5),t.C$Y()()()),2&r){const e=t.GaO();t.yG2(5),t.cNF(e.formattedTotalTime)}}function En(r,i){if(1&r&&(t.I0R(0,"div",13)(1,"p",14),t.OEk(2,"Total Distance"),t.C$Y(),t.I0R(3,"h5",15)(4,"span",30),t.OEk(5),t.C$Y()()()),2&r){const e=t.GaO();t.yG2(5),t.oRS("",e.totaldistanceToshow," km")}}const Fn=r=>({"selected-item":r});function Jn(r,i){if(1&r){const e=t.KQA();t.I0R(0,"li",31),t.qCj("click",function(){const f=t.usT(e).$implicit,w=t.GaO();return t.CGJ(w.updateMarkerAndPath(f.longitude,f.latitude,f))}),t.I0R(1,"div",32)(2,"span",33),t.OEk(3),t.C$Y(),t.I0R(4,"button",34),t.wR5(5,"span",35),t.OEk(6),t.C$Y()(),t.I0R(7,"p",36),t.OEk(8),t.C$Y()()}if(2&r){const e=i.$implicit,s=t.GaO();t.E7m("ngClass",t.S45(5,Fn,s.selectedItem===e)),t.yG2(3),t.cNF(s.formatTime(e.time)),t.yG2(),t.E7m("ngClass",s.getBatteryClass(e.battery_status)),t.yG2(2),t.oRS(" ",e.motionStatus," "),t.yG2(2),t.cNF(e.address)}}function ar(r,i){1&r&&(t.I0R(0,"div",37),t.wR5(1,"div",38),t.I0R(2,"button",39)(3,"span",40)(4,"span",41),t.OEk(5," Loading... "),t.C$Y(),t.I0R(6,"span",42)(7,"span",43),t.OEk(8,"Loading..."),t.C$Y()()()()())}const lr=r=>({rotate:r});let Lr=(()=>{class r{constructor(e,s,l){this.route=e,this.api=s,this.cdr=l,this.urlId=null,this.dateChangeSubject=new x.E,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeTimeline=[],this.selectedDate=new Date,this.markers=[],this.selectedItem=null,this.checkIndetails={},this.selectedInterval=15,this.intervalTimeCoordinates=[],this.isRotating=!1,this.notInMotionData=[],this.motionData=[],this.newarray=[]}ngOnDestroy(){this.mapv2&&this.mapv2.remove()}ngOnInit(){this.cdr.detectChanges(),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(new Date)),this.bsConfig={dateInputFormat:"DD-MMM-YY",showWeekNumbers:!1},this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&(this.getemployeeTimeline(),this.getCheckInDetail()),this.dateChangeSubject.pipe((0,M.o)(300)).subscribe(e=>{this.handleDateChange(e)})}onIntervalChange(){this.initializeMap()}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getemployeeTimeline(),this.getCheckInDetail()}refreshTimeline(){this.isRotating=!0,this.getemployeeTimeline(),setTimeout(()=>{this.isRotating=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),e&&e.status?(this.checkIndetails=e.data[0],this.checkIndetails?.check_in_time&&this.checkIndetails?.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeTimeline(){this.toggleSpinner(!0),this.api.getwithoutid(`getCoordinatesv2?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status&&e.data.length>0)if(this.employeeTimeline=e.data.reverse().map(s=>(s.formattedTime=this.formatTime(s.time),s)),this.employeeTimeline&&this.employeeTimeline.length>0){this.initializeMap();let s=0;for(let l=1;l<this.employeeTimeline.length;l++)s+=this.calculateDistance(this.employeeTimeline[l-1].latitude,this.employeeTimeline[l-1].longitude,this.employeeTimeline[l].latitude,this.employeeTimeline[l].longitude);this.totaldistanceToshow=s.toFixed(1)}else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null;else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null},e=>{this.toggleSpinner(!1),this.employeeTimeline=[],this.initializeDefaultMap(),this.handleError(e.message||"An error occurred while fetching data")})}calculateDistance(e,s,l,f){const z=this.deg2rad(l-e),W=this.deg2rad(f-s),ie=Math.sin(z/2)*Math.sin(z/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(l))*Math.sin(W/2)*Math.sin(W/2);return 2*Math.atan2(Math.sqrt(ie),Math.sqrt(1-ie))*6371}deg2rad(e){return e*(Math.PI/180)}calculateTimeSpent(){const e={driving:0,cycling:0,walking:0,stationary:0};for(let l=1;l<this.employeeTimeline.length;l++){const f=this.employeeTimeline[l-1],w=this.employeeTimeline[l],z=new Date(`1970-01-01T${f.time}Z`),ie=(new Date(`1970-01-01T${w.time}Z`).getTime()-z.getTime())/1e3/60,Re=this.calculateDistance(f.latitude,f.longitude,w.latitude,w.longitude)/(ie/60);Re>25?e.driving+=ie:Re>15?e.cycling+=ie:Re>5?e.walking+=ie:e.stationary+=ie}const s=l=>`${Math.floor(l/60)} hours ${Math.round(l%60)} minutes`;return{driving:s(e.driving),cycling:s(e.cycling),walking:s(e.walking),stationary:s(e.stationary)}}geocodeCoordinates(e,s){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${s}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(f=>f.json()).then(f=>f.features[0].place_name).catch(f=>(console.error("Error fetching address:",f),""))}initializeMap(){this.mapv2=new b.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"mapv2",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),this.mapv2.addControl(new b.NavigationControl),this.mapv2.on("load",()=>{if(!this.employeeTimeline||0===this.employeeTimeline.length)return void console.error("Employee timeline data is empty or undefined.");this.mapv2.resize();const e=this.filterMotionTimeline(this.employeeTimeline),s=e.map(l=>this.geocodeCoordinates(l.longitude,l.latitude));Promise.all(s).then(l=>{const f=e.map((W,ie)=>{const oe=e[0],Re=e[e.length-1],je=new b.Popup({offset:25}).setHTML(`<h6>${oe.formattedTime}</h6>\n                            <p>Battery Percentage: ${oe.battery_status}%</p>\n                            <p>Address: ${oe.address}</p>`),Ye=new b.Marker({color:"green"}).setLngLat([oe.longitude,oe.latitude]).setPopup(je).addTo(this.mapv2),Wt=new b.Popup({offset:25}).setHTML(`<h6>${Re.formattedTime}</h6>\n                            <p>Battery Percentage: ${Re.battery_status}%</p>\n                            <p>Address: ${Re.address}</p>`),$t=new b.Marker({color:"red"}).setLngLat([Re.longitude,Re.latitude]).setPopup(Wt).addTo(this.mapv2);return this.markers.push(Ye,$t),{...W,address:l[ie]}}),w=this.employeeTimeline.map(W=>[W.longitude,W.latitude]),z=w.reduce((W,ie)=>W.extend(ie),new b.LngLatBounds(w[0],w[0]));this.mapv2.fitBounds(z,{padding:50}),this.newarray=f,this.mapv2.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:w}}}),this.mapv2.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#0074D9","line-width":4}})}).catch(l=>{console.error("Error fetching addresses:",l)})})}filterMotionTimeline(e){const s=[];for(let f=0;f<e.length;f++){const w=e[f],z=e[f+1],W=e[f-1];w.motionStatus=w.cnt<=10?"In Motion":"Not In Motion",w.cnt>=10?s.push(w):w.cnt<=10&&(W&&W.cnt>=10&&z&&z.cnt<10&&s.push(w),z&&z.cnt>10&&s.push(w))}return s}initializeDefaultMap(){this.mapv2=new b.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"mapv2",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5})}calculateTotalTime(e,s){const l=new Date(e),f=new Date(s),w=Math.abs(f.getTime()-l.getTime());return`${Math.floor(w/36e5)}h ${Math.floor(w%36e5/6e4)}m`}handleError(e){alert(e)}onItemClick(e){this.selectedItem=e,this.cdr.detectChanges()}onClosePopup(){this.selectedItem=null}updateMarkerAndPath(e,s,l){this.marker&&this.marker.remove(),this.marker=new b.Marker({color:"#ffc703"}).setLngLat([e,s]).addTo(this.mapv2);const f=new b.Popup({offset:25}).setHTML(`<h6>${l.formattedTime}</h6>\n        <p>Battery Percentage: ${l.battery_status}%</p>\n        <p>Address: ${l.address}</p>`);this.marker.setPopup(f),this.selectedItem=l}getBatteryClass(e){return e>=75?"battery-high":e>=35?"battery-mid":"battery-low"}formatTime(e){const[s,l,f]=e.split(":");return`${+s%12||12}:${l} ${+s>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(k.gV),t.GI1(De),t.GI1(t.kD9))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-map"]],inputs:{companyId:"companyId"},decls:39,vars:17,consts:[[1,"card","py-3"],[1,"row"],[1,"col-lg-2"],[1,"input-group"],["type","text","id","datepickers","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepickers",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"col-8","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"p-3","user-chat-topbar","border-bottom","border-2"],[1,"row","align-items-center","flex-nowrap"],[1,"col-lg","col-3"],[1,"text-muted","mb-2","text-uppercase"],[1,"fs-md","mb-0"],["id","total-amount"],["class","col-lg col-3"],[1,"col-lg-4",3,"ngClass"],[1,"acitivity-timeline-2","list-unstyled","mb-0","mt-3","overflow"],[1,"col-lg-8",3,"ngClass"],["id","mapv2",1,"match-parent","w-100","h-100"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"],["id","mapv2",1,"match-parent"],[1,"fs-md","mb-0",3,"innerHTML"],["id","invoice-date",3,"innerHTML"],["id","invoice-due-date"],[1,"activity-item","pt-2",3,"ngClass","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-md","badge","bg-body-secondary","border","border-secondary","text-secondary"],["type","button","data-bs-toggle","tooltip","placement","top","tooltip","Battery Percentage",1,"btn","battery-status",3,"ngClass"],[1,"ri-battery-saver-line"],[1,"mb-0","mt-2"],[1,"mt-5","pt-5","text-center"],[1,"error-img","text-center","px-5","mt-5"],["type","button",1,"btn","btn-info","btn-load","mt-5"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","me-2"],["role","status",1,"spinner-grow","flex-shrink-0"],[1,"visually-hidden"],["class","activity-item pt-2",3,"ngClass"],["class","mt-5 pt-5 text-center"]],template:function(s,l){1&s&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.iHE("ngModelChange",function(w){return t.kNx(l.selectedDate,w)||(l.selectedDate=w),w}),t.qCj("bsValueChange",function(w){return l.onDateChange(w)}),t.C$Y(),t.I0R(5,"div",5)(6,"label",6),t.wR5(7,"i",7),t.C$Y()()()(),t.I0R(8,"div",8)(9,"button",9),t.qCj("click",function(){return l.refreshTimeline()}),t.wR5(10,"i",10),t.C$Y()()()(),t.I0R(11,"div",11)(12,"div",12)(13,"div",13)(14,"p",14),t.OEk(15,"Date"),t.C$Y(),t.I0R(16,"h5",15)(17,"span",16),t.OEk(18),t.wVc(19,"date"),t.C$Y()()(),t.yuY(20,wi,4,1,"div",17)(21,Mi,5,1,"div",17)(22,dn,6,1,"div",17)(23,En,6,1,"div",17),t.C$Y()(),t.I0R(24,"div",1)(25,"div",18)(26,"ul",19),t.c53(27,Jn,9,7,"li",44,t.wJt,!1,ar,9,0,"div",45),t.C$Y()(),t.I0R(30,"div",20),t.wR5(31,"div",21),t.C$Y(),t.I0R(32,"div",22)(33,"div",23)(34,"div",24),t.wR5(35,"img",25),t.C$Y(),t.I0R(36,"h3",26),t.OEk(37,"Sorry! No Result Found"),t.C$Y()()()(),t.wR5(38,"div",27)),2&s&&(t.yG2(4),t.E7m("bsConfig",l.bsConfig),t.OKB("ngModel",l.selectedDate),t.yG2(5),t.E7m("ngClass",t.S45(15,lr,l.isRotating)),t.yG2(9),t.cNF(t.g7$(19,12,l.formattedDate,"dd/MMM/yyyy")),t.yG2(2),t.C0Y(20,null!=l.checkIndetails&&l.checkIndetails.check_in_time?20:-1),t.yG2(),t.C0Y(21,null!=l.checkIndetails&&l.checkIndetails.check_out_time?21:-1),t.yG2(),t.C0Y(22,null!=l.checkIndetails&&l.checkIndetails.check_in_time&&null!=l.checkIndetails&&l.checkIndetails.check_out_time?22:-1),t.yG2(),t.C0Y(23,l.totaldistanceToshow?23:-1),t.yG2(2),t.E7m("ngClass",l.employeeTimeline&&l.employeeTimeline.length>0?"d-block":"d-none"),t.yG2(2),t.oho(l.newarray),t.yG2(3),t.E7m("ngClass",l.employeeTimeline&&0==l.employeeTimeline.length?"d-none":"d-block"),t.yG2(3),t.E7m("ngClass",l.employeeTimeline&&0===l.employeeTimeline.length?"d-block":"d-none"))},dependencies:[Ge.QF,V.ot,V.ue,V._G,pr.uM,I.em,I.U5,Ge.y],styles:[".activity-timeline-2[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.activity-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.selected-item[_ngcontent-%COMP%]{background-color:#d1ecf1}.battery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.battery-status[_ngcontent-%COMP%]   .ri-battery-saver-line[_ngcontent-%COMP%]{margin-right:5px}.battery-high[_ngcontent-%COMP%]{color:green}.battery-mid[_ngcontent-%COMP%]{color:orange}.battery-low[_ngcontent-%COMP%]{color:red}#noresult[_ngcontent-%COMP%]{text-align:center;padding:20px}#map[_ngcontent-%COMP%]{width:100%!important;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:500px}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return r})();function Hr(r,i){if(1&r&&t.wR5(0,"img",46),2&r){const e=t.GaO();t._6D("src",null==e.employeeDetail?null:e.employeeDetail.image,t.K6U)}}function Wr(r,i){1&r&&t.wR5(0,"img",47)}function Mr(r,i){if(1&r&&(t.I0R(0,"a",48)(1,"span",49),t.wR5(2,"i",50),t.C$Y()()),2&r){const e=t.GaO();t.CI5("href","tel:",null==e.employeeDetail?null:e.employeeDetail.mobile,"",t.K6U)}}function qn(r,i){if(1&r&&(t.I0R(0,"a",48)(1,"span",51),t.wR5(2,"i",52),t.C$Y()()),2&r){const e=t.GaO();t.CI5("href","mailto:",null==e.employeeDetail?null:e.employeeDetail.email,"",t.K6U)}}function as(r,i){if(1&r&&t.wR5(0,"div",53),2&r){const e=t.GaO();t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckInTime),t.E3n)}}function $n(r,i){1&r&&(t.I0R(0,"div",54),t.OEk(1,"Not Checked In Yet"),t.C$Y())}function Xr(r,i){if(1&r&&t.wR5(0,"div",53),2&r){const e=t.GaO();t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckOutTime),t.E3n)}}function ul(r,i){1&r&&(t.I0R(0,"div",54),t.OEk(1,"Not Checked Out Yet"),t.C$Y())}function ba(r,i){if(1&r&&(t.I0R(0,"div",55),t.OEk(1),t.C$Y()),2&r){const e=t.GaO();t.yG2(),t.oRS(" ",null==e.checkIndetails?null:e.checkIndetails.totalDuration," ")}}function hs(r,i){1&r&&t.OEk(0,"-")}function Yo(r,i){if(1&r&&t.wR5(0,"app-password-change",41),2&r){const e=t.GaO();t.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function rc(r,i){if(1&r&&t.wR5(0,"app-timeline",41),2&r){const e=t.GaO();t.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function Io(r,i){if(1&r&&t.wR5(0,"app-map",41),2&r){const e=t.GaO();t.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function Zr(r,i){if(1&r&&t.wR5(0,"app-live-location",45),2&r){const e=t.GaO();t.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)("emp_image",null==e.employeeDetail?null:e.employeeDetail.image)}}let ao=(()=>{class r{constructor(e,s,l){this.formBuilder=e,this.route=s,this.api=l,this.formGroups=[],this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.selectedDate=new Date,this.checkIndetails={},this.route.queryParams.subscribe(f=>{this.currentTab=f.tab||"personalDetails"})}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Profile Settings",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.getemployeeData()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0],this.getCheckInDetail()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.employeeDetail.company_id}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),this.checkIndetails=e&&e.status?e.data:null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}changeTab(e){this.currentTab=e}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}addForm(){const e=this.formBuilder.group(this.educationForm.value);this.formGroups.push(e)}deleteForm(e){this.formGroups.splice(e,1)}calculateTimeDifference(e,s){const[l,f,w]=e.split(":").map(Number),[z,W,ie]=s.split(":").map(Number),oe=new Date;oe.setHours(l,f,w);const Re=new Date;Re.setHours(z,W,ie);const je=Re.getTime()-oe.getTime();return Math.max(0,Math.floor(je/6e4))}calculateTotalTimeForAll(){if(!this.checkIndetails||0===this.checkIndetails.length)return"No check-in/check-out data available";let e=0;for(const f of this.checkIndetails)f.check_in_time&&f.check_out_time&&(e+=this.calculateTimeDifference(f.check_in_time,f.check_out_time));return`${Math.floor(e/60)}h ${e%60}m`}calculateTotalTime(e,s){const[l,f]=e.split(":").map(Number),[w,z]=s.split(":").map(Number),W=new Date;W.setHours(l,f,0);const ie=new Date;ie.setHours(w,z,0);const oe=ie.getTime()-W.getTime(),Re=Math.floor(oe/6e4);return`${Math.floor(Re/60)}h ${Re%60}m`}formatTime(e){if(!e)return"Invalid time";const[s,l,f]=e.split(":");return`${+s%12||12}:${l} ${+s>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(V.im),t.GI1(k.gV),t.GI1(De))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-employee-detail"]],decls:166,vars:46,consts:[[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["alt","","id","user-img","class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"d-flex","justify-content-center","gap-2","mt-2"],["class","avatar-xs d-block",3,"href"],[1,"card","border-top"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"list-unstyled","vstack","gap-2","mb-0"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"ri-login-box-line","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted",3,"innerHTML"],[1,"ri-logout-box-line","align-middle","me-1","text-primary-emphasis"],[1,"ph","ph-timer","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","false","tabindex","-1",1,"nav-link",3,"click"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-secondary",3,"routerLink"],[1,"bi","bi-pencil-square","align-baseline","me-1"],[1,"card"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-body","p-4"],[1,""],[1,"table-responsive"],[1,"table","table-sm","table-borderless","align-middle","description-table","mb-0"],["id","changePassword","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId"],["id","timeline","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","timelinev2","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","liveLocation","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId","emp_image"],["alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"avatar-xs","d-block",3,"href"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-phone-line"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-mail-line"],[1,"flex-shrink-0","text-muted",3,"innerHTML"],[1,"flex-shrink-0","text-danger"],[1,"flex-shrink-0","text-muted"]],template:function(s,l){1&s&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t.wR5(4,"img",3)(5,"div"),t.C$Y(),t.I0R(6,"div",4)(7,"div",5)(8,"div",6),t.yuY(9,Hr,1,1,"img",7)(10,Wr,1,0),t.C$Y(),t.I0R(11,"div",8)(12,"h5"),t.OEk(13),t.C$Y(),t.I0R(14,"p",9),t.OEk(15),t.C$Y()(),t.I0R(16,"div",10),t.yuY(17,Mr,3,1,"a",11)(18,qn,3,1,"a",11),t.C$Y()()(),t.I0R(19,"div",12)(20,"div",13)(21,"h6",14),t.OEk(22,"Today Attendance"),t.C$Y()(),t.I0R(23,"div",15)(24,"ul",16)(25,"li")(26,"div",17)(27,"div",18),t.wR5(28,"i",19),t.OEk(29," Checkin Time "),t.C$Y(),t.yuY(30,as,1,1,"div",20)(31,$n,2,0),t.C$Y()(),t.I0R(32,"li")(33,"div",17)(34,"div",18),t.wR5(35,"i",21),t.OEk(36," Checkout Time "),t.C$Y(),t.yuY(37,Xr,1,1,"div",20)(38,ul,2,0),t.C$Y()(),t.I0R(39,"li")(40,"div",17)(41,"div",18),t.wR5(42,"i",22),t.OEk(43," Total Time "),t.C$Y(),t.yuY(44,ba,2,1,"div",23)(45,hs,1,0),t.C$Y()()()()()()(),t.I0R(46,"div",24)(47,"div",25)(48,"ul",26)(49,"li",27)(50,"a",28),t.qCj("click",function(){return l.changeTab("timeline")}),t.OEk(51," Timeline "),t.C$Y()(),t.I0R(52,"li",27)(53,"a",28),t.qCj("click",function(){return l.changeTab("timelinev2")}),t.OEk(54," Timeline v2 "),t.C$Y()(),t.I0R(55,"li",27)(56,"a",29),t.qCj("click",function(){return l.changeTab("personalDetails")}),t.OEk(57," Personal Details "),t.C$Y()(),t.I0R(58,"li",27)(59,"a",28),t.qCj("click",function(){return l.changeTab("changePassword")}),t.OEk(60," Changes Password "),t.C$Y()(),t.I0R(61,"li",27)(62,"a",28),t.qCj("click",function(){return l.changeTab("liveLocation")}),t.OEk(63," Live Location "),t.C$Y()()(),t.I0R(64,"div",30)(65,"a",31),t.wR5(66,"i",32),t.OEk(67," Edit Profile"),t.C$Y()()(),t.I0R(68,"div",33)(69,"div",34)(70,"div",35)(71,"div",33)(72,"div",13)(73,"h6",14),t.OEk(74,"Personal Details"),t.C$Y()(),t.I0R(75,"div",36)(76,"div",37)(77,"div",38)(78,"table",39)(79,"tbody")(80,"tr")(81,"th"),t.OEk(82,"Name"),t.C$Y(),t.I0R(83,"td"),t.OEk(84),t.C$Y()(),t.I0R(85,"tr")(86,"th"),t.OEk(87,"Gender"),t.C$Y(),t.I0R(88,"td"),t.OEk(89),t.C$Y()(),t.I0R(90,"tr")(91,"th"),t.OEk(92,"Designation"),t.C$Y(),t.I0R(93,"td"),t.OEk(94),t.C$Y()(),t.I0R(95,"tr")(96,"th"),t.OEk(97,"Employee id"),t.C$Y(),t.I0R(98,"td"),t.OEk(99),t.C$Y()(),t.I0R(100,"tr")(101,"th"),t.OEk(102,"Email"),t.C$Y(),t.I0R(103,"td"),t.OEk(104),t.C$Y()(),t.I0R(105,"tr")(106,"th"),t.OEk(107,"Mobile"),t.C$Y(),t.I0R(108,"td"),t.OEk(109),t.C$Y()(),t.I0R(110,"tr")(111,"th"),t.OEk(112,"Date of Birth"),t.C$Y(),t.I0R(113,"td"),t.OEk(114),t.wVc(115,"date"),t.C$Y()(),t.I0R(116,"tr")(117,"th"),t.OEk(118,"Joining date"),t.C$Y(),t.I0R(119,"td"),t.OEk(120),t.wVc(121,"date"),t.C$Y()(),t.I0R(122,"tr")(123,"th"),t.OEk(124,"Address"),t.C$Y(),t.I0R(125,"td"),t.OEk(126),t.C$Y()(),t.I0R(127,"tr")(128,"th"),t.OEk(129,"City"),t.C$Y(),t.I0R(130,"td"),t.OEk(131),t.C$Y()(),t.I0R(132,"tr")(133,"th"),t.OEk(134,"State"),t.C$Y(),t.I0R(135,"td"),t.OEk(136),t.C$Y()(),t.I0R(137,"tr")(138,"th"),t.OEk(139,"Zip code"),t.C$Y(),t.I0R(140,"td"),t.OEk(141),t.C$Y()()()()()()()()(),t.I0R(142,"div",40)(143,"div",13)(144,"h6",14),t.OEk(145,"Changes Password"),t.C$Y()(),t.I0R(146,"div",15),t.yuY(147,Yo,1,1,"app-password-change",41),t.C$Y()(),t.I0R(148,"div",42)(149,"div",13)(150,"h6",14),t.OEk(151,"Timeline"),t.C$Y()(),t.I0R(152,"div",15),t.yuY(153,rc,1,1,"app-timeline",41),t.C$Y()(),t.I0R(154,"div",43)(155,"div",13)(156,"h6",14),t.OEk(157,"Timeline v2"),t.C$Y()(),t.I0R(158,"div",15),t.yuY(159,Io,1,1,"app-map",41),t.C$Y()(),t.I0R(160,"div",44)(161,"div",13)(162,"h6",14),t.OEk(163,"Live Location"),t.C$Y()(),t.I0R(164,"div",15),t.yuY(165,Zr,1,2,"app-live-location",45),t.C$Y()()()()()()),2&s&&(t.yG2(9),t.C0Y(9,null!=l.employeeDetail&&l.employeeDetail.image?9:10),t.yG2(4),t.oRS(" ",null==l.employeeDetail?null:l.employeeDetail.name," "),t.yG2(2),t.cNF(null==l.employeeDetail?null:l.employeeDetail.designation),t.yG2(2),t.C0Y(17,null!=l.employeeDetail&&l.employeeDetail.mobile?17:-1),t.yG2(),t.C0Y(18,null!=l.employeeDetail&&l.employeeDetail.email?18:-1),t.yG2(12),t.C0Y(30,null!=l.checkIndetails&&l.checkIndetails.latestCheckInTime?30:31),t.yG2(7),t.C0Y(37,null!=l.checkIndetails&&l.checkIndetails.latestCheckOutTime?37:38),t.yG2(7),t.C0Y(44,null!=l.checkIndetails&&l.checkIndetails.latestCheckInTime&&null!=l.checkIndetails&&l.checkIndetails.latestCheckOutTime?44:45),t.yG2(6),t.eAK("active","timeline"===l.currentTab),t.yG2(3),t.eAK("active","timelinev2"===l.currentTab),t.yG2(3),t.eAK("active","personalDetails"===l.currentTab),t.yG2(3),t.eAK("active","changePassword"===l.currentTab),t.yG2(3),t.eAK("active","liveLocation"===l.currentTab),t.yG2(3),t.CI5("routerLink","/edit-employee/",l.urlId,""),t.yG2(5),t.E7m("hidden","personalDetails"!==l.currentTab),t.yG2(14),t.cNF(null==l.employeeDetail?null:l.employeeDetail.name),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.gender),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.designation),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.employee_id),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.email),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.mobile),t.yG2(5),t.oRS(" ",t.g7$(115,40,null==l.employeeDetail?null:l.employeeDetail.dob,"dd/MMM/yyyy")," "),t.yG2(6),t.oRS(" ",t.g7$(121,43,null==l.employeeDetail?null:l.employeeDetail.joining_date,"dd/MMM/yyyy")," "),t.yG2(6),t.cNF(null==l.employeeDetail?null:l.employeeDetail.address),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.city),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.state),t.yG2(5),t.cNF(null==l.employeeDetail?null:l.employeeDetail.zip_code),t.yG2(),t.E7m("hidden","changePassword"!==l.currentTab),t.yG2(5),t.C0Y(147,l.employeeDetail?147:-1),t.yG2(),t.E7m("hidden","timeline"!==l.currentTab),t.yG2(5),t.C0Y(153,l.employeeDetail?153:-1),t.yG2(),t.E7m("hidden","timelinev2"!==l.currentTab),t.yG2(5),t.C0Y(159,l.employeeDetail?159:-1),t.yG2(),t.E7m("hidden","liveLocation"!==l.currentTab),t.yG2(5),t.C0Y(165,l.employeeDetail?165:-1))},dependencies:[k.ER,me,Ze,ii,Lr,Ge.y]})}return r})();var dl=function(){return dl=Object.assign||function(r){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l]);return r},dl.apply(this,arguments)},Oa=function(){function r(i,e,s){var l=this;this.endVal=e,this.options=s,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(f){l.startTime||(l.startTime=f);var w=f-l.startTime;l.remaining=l.duration-w,l.frameVal=l.useEasing?l.countDown?l.startVal-l.easingFn(w,0,l.startVal-l.endVal,l.duration):l.easingFn(w,l.startVal,l.endVal-l.startVal,l.duration):l.startVal+w/l.duration*(l.endVal-l.startVal),l.frameVal=(l.countDown?l.frameVal<l.endVal:l.frameVal>l.endVal)?l.endVal:l.frameVal,l.frameVal=Number(l.frameVal.toFixed(l.options.decimalPlaces)),l.printValue(l.frameVal),w<l.duration?l.rAF=requestAnimationFrame(l.count):null!==l.finalEndVal?l.update(l.finalEndVal):l.options.onCompleteCallback&&l.options.onCompleteCallback()},this.formatNumber=function(f){var w,z,W,ie,oe=f<0?"-":"";w=Math.abs(f).toFixed(l.options.decimalPlaces);var Re=(w+="").split(".");if(z=Re[0],W=Re.length>1?l.options.decimal+Re[1]:"",l.options.useGrouping){ie="";for(var je=3,Ye=0,Wt=0,$t=z.length;Wt<$t;++Wt)l.options.useIndianSeparators&&4===Wt&&(je=2,Ye=1),0!==Wt&&Ye%je==0&&(ie=l.options.separator+ie),Ye++,ie=z[$t-Wt-1]+ie;z=ie}return l.options.numerals&&l.options.numerals.length&&(z=z.replace(/[0-9]/g,function(ci){return l.options.numerals[+ci]}),W=W.replace(/[0-9]/g,function(ci){return l.options.numerals[+ci]})),oe+l.options.prefix+z+W+l.options.suffix},this.easeOutExpo=function(f,w,z,W){return z*(1-Math.pow(2,-10*f/W))*1024/1023+w},this.options=dl(dl({},this.defaults),s),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(e),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof i?document.getElementById(i):i,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,i):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return l.handleScroll(l)}),window.onscroll=function(){window.onScrollFns.forEach(function(f){return f()})},this.handleScroll(this)))}return r.prototype.handleScroll=function(i){if(i&&window&&!i.once){var e=window.innerHeight+window.scrollY,s=i.el.getBoundingClientRect(),l=s.top+window.pageYOffset,f=s.top+s.height+window.pageYOffset;f<e&&f>window.scrollY&&i.paused?(i.paused=!1,setTimeout(function(){return i.start()},i.options.scrollSpyDelay),i.options.scrollSpyOnce&&(i.once=!0)):(window.scrollY>f||l>e)&&!i.paused&&i.reset()}},r.prototype.determineDirectionAndSmartEasing=function(){var i=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>i,Math.abs(i-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=i,this.endVal=i+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=i,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},r.prototype.start=function(i){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),i&&(this.options.onCompleteCallback=i),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},r.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},r.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},r.prototype.update=function(i){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(i),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},r.prototype.printValue=function(i){var e;if(this.el){var s=this.formattingFn(i);null!==(e=this.options.plugin)&&void 0!==e&&e.render?this.options.plugin.render(this.el,s):"INPUT"===this.el.tagName?this.el.value=s:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=s:this.el.innerHTML=s}},r.prototype.ensureNumber=function(i){return"number"==typeof i&&!isNaN(i)},r.prototype.validateValue=function(i){var e=Number(i);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: ".concat(i),null)},r.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},r}();let ia=(()=>{class r{constructor(e,s,l){this.el=e,this.zone=s,this.platformId=l,this.options={},this.reanimateOnClick=!0,this.complete=new t._w7}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(e){if(!(0,Ge.c0)(this.platformId))return;const{options:s,endVal:l}=e;void 0!==l?.currentValue?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==s?.currentValue&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new Oa(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return r.\u0275fac=function(e){return new(e||r)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(t.AHE))},r.\u0275dir=t.Sc5({type:r,selectors:[["","countUp",""]],hostBindings:function(e,s){1&e&&t.qCj("click",function(){return s.onClick()})},inputs:{endVal:[t.Wk5.None,"countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[t.SYr]}),r})(),Ml=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.a4G({type:r}),r.\u0275inj=t.s3X({imports:[[]]}),r})();var _c=Rt(4884);function gu(r,i){if(1&r&&(t.I0R(0,"div",125),t.wR5(1,"img",126),t.C$Y()),2&r){const e=t.GaO().$implicit;t.yG2(),t._6D("src",e.image,t.K6U)}}function Al(r,i){1&r&&(t.I0R(0,"div",125),t.wR5(1,"img",127),t.C$Y())}const vr=()=>({tab:"timeline"});function Nc(r,i){if(1&r&&(t.I0R(0,"ul",128)(1,"li")(2,"a",129),t.wR5(3,"i",130),t.OEk(4," View Timeline"),t.C$Y()(),t.I0R(5,"li")(6,"a",131),t.wR5(7,"i",132),t.OEk(8,"Attendance Detail"),t.C$Y()()()),2&r){const e=t.GaO().$implicit,s=t.GaO();t.yG2(2),t.CI5("routerLink","/employee-detail/",e.id,""),t.E7m("queryParams",t.q4q(4,vr)),t.yG2(4),t.u6R("routerLink","/attendance-calender/",e.id,"/",s.company_id,"")}}function Ks(r,i){if(1&r){const e=t.KQA();t.I0R(0,"tr",106),t.wR5(1,"td"),t.I0R(2,"td",107)(3,"a",108),t.OEk(4,"#TB01"),t.C$Y()(),t.I0R(5,"td",109)(6,"div",110),t.yuY(7,gu,2,1,"div",111)(8,Al,2,0),t.I0R(9,"div")(10,"h6",14)(11,"a",112),t.OEk(12),t.C$Y()()()()(),t.I0R(13,"td",113),t.OEk(14),t.C$Y(),t.I0R(15,"td",114),t.OEk(16),t.C$Y(),t.I0R(17,"td",115),t.OEk(18),t.C$Y(),t.I0R(19,"td",116),t.OEk(20),t.C$Y(),t.I0R(21,"td",117),t.OEk(22),t.C$Y(),t.I0R(23,"td",117),t.OEk(24),t.wR5(25,"br"),t.I0R(26,"a",118),t.qCj("click",function(){const f=t.usT(e).$implicit,w=t.GaO();return t.Gew(138).show(),t.CGJ(w.updateCheckInDetal(f.checkIns,f.totalDuration))}),t.OEk(27,"Check Detail "),t.C$Y()(),t.I0R(28,"td",119)(29,"span",120),t.OEk(30),t.C$Y()(),t.I0R(31,"td")(32,"div",121)(33,"button",122),t.wR5(34,"i",123),t.C$Y(),t.yuY(35,Nc,9,5,"ul",124),t.C$Y()()()}if(2&r){const e=i.$implicit,s=t.GaO();t.CI5("id","p_",e._id,""),t.yG2(7),t.C0Y(7,e.image?7:8),t.yG2(5),t.cNF(e.name),t.yG2(2),t.cNF(e.mobile),t.yG2(2),t.cNF(e.email),t.yG2(2),t.cNF(e.designation),t.yG2(2),t.oRS(" ",s.formatTime(e.latestCheckInTime)," "),t.yG2(2),t.oRS(" ",s.formatTime(e.latestCheckOutTime)," "),t.yG2(2),t.oRS(" ",e.totalDuration,""),t.yG2(5),t.E7m("ngClass","Present"==e.checkin_status?"bg-success":"bg-danger"),t.yG2(),t.cNF(e.checkin_status)}}function js(r,i){1&r&&(t.I0R(0,"div",51)(1,"div",133)(2,"span",134),t.OEk(3,"Loading..."),t.C$Y()()())}function sc(r,i){if(1&r&&(t.I0R(0,"tr")(1,"th",82),t.OEk(2),t.C$Y(),t.I0R(3,"td"),t.OEk(4),t.C$Y(),t.I0R(5,"td"),t.OEk(6),t.C$Y(),t.I0R(7,"td",83),t.OEk(8),t.C$Y()()),2&r){const e=i.$implicit,s=i.$index,l=t.GaO();t.yG2(2),t.cNF(s+1),t.yG2(2),t.cNF(l.formatTime(e.check_in_time)),t.yG2(2),t.cNF(l.formatTime(e.check_out_time)),t.yG2(2),t.cNF(e.duration)}}const na=()=>({standalone:!0});let hl=(()=>{class r{constructor(e){this.api=e,this.dateChangeSubject=new x.E,this.spinnerStatus=!1,this.selectedDate=new Date,this.attendanceData=[],this.attendanceDataList=[],this.checkInDetails=[],this.selectValue=["Alaska","Hawaii","California","Nevada","Oregon","Washington","Arizona","Colorado","Idaho","Montana","Nebraska","New Mexico","North Dakota","Utah","Wyoming","Alabama","Arkansas","Illinois","Iowa"],this.departments=[],this.selectedDepartments=[],this.selectedDesignations=[],this.designations=[],this.selectedStatus="",this.direction="asc",this.bsConfig={maxDate:new Date,showWeekNumbers:!1,dateInputFormat:"DD/MM/YYYY"}}ngOnInit(){this.breadCrumbItems=[{label:"Attendance"},{label:"Employee",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate));const e=localStorage.getItem("currentUser");if(e){const s=JSON.parse(e);this.company_id=s.id}this.company_id&&this.getAttendance(),this.dateChangeSubject.pipe((0,M.o)(300)).subscribe(s=>{this.handleDateChange(s)}),this.getDepartment(),this.getDesignation()}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department?status=active").subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid("designation?status=active").subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getAttendance()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid(`getAttendence?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.attendanceData=s.data||[],this.attendanceDataList=s.data||[],this.attendanceCount=s.attendenceCount||[]):(this.attendanceData=[],this.attendanceDataList=[],this.attendanceCount=[],this.toggleSpinner(!1))},s=>{this.handleError(s.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}updateCheckInDetal(e,s){this.totalDuration=s,this.checkInDetails=e}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.attendanceData];s.sort((l,f)=>{const w=this.compare(l[e],f[e]);return"asc"===this.direction?w:-w}),this.attendanceData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.attendanceData=this.attendanceDataList.slice(s,this.endItem)}filterdata(){let e=this.attendanceDataList;const s=this.selectedDesignations?this.selectedDesignations.map(f=>f.toLowerCase()):[],l=this.selectedDepartments?this.selectedDepartments.map(f=>f.toLowerCase()):[];this.term&&(e=e.filter(f=>f.name.toLowerCase().includes(this.term.toLowerCase())||f.mobile.toLowerCase().includes(this.term.toLowerCase())||f.email.toLowerCase().includes(this.term.toLowerCase())||f.employee_id.toLowerCase().includes(this.term.toLowerCase()))),l.length>0&&(e=e.filter(f=>l.includes(f.department.toLowerCase()))),s.length>0&&(e=e.filter(f=>s.includes(f.designation.toLowerCase()))),this.selectedStatus&&(e=e.filter(f=>f.checkin_status===this.selectedStatus)),this.attendanceData=e,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.attendanceData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}formatTime(e){if(!e)return"-";const[s,l,f]=e.split(":");return`${+s%12||12}:${l}:${f} ${+s>=12?"PM":"AM"} `}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(De))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-attendance-list"]],decls:212,vars:32,consts:[["title","Employee Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-xl-7"],[1,"card"],[1,"card-body"],[1,"row","g-4"],[1,"col-lg-3","col-sm-6","border-end-sm","ng-star-inserted"],[1,"d-flex","align-items-center","gap-2","mb-4"],[1,"avatar-xs","flex-shrink-0"],[1,"avatar-title","bg-body-secondary","border","border-primary-subtle","rounded-circle","text-primary"],[1,"ri-user-line"],[1,"flex-grow-1"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"counter-value",3,"countUp"],[1,"avatar-title","bg-body-secondary","border","border-success-subtle","rounded-circle","text-success"],[1,"ri-user-follow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-danger"],[1,"ri-user-unfollow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-warning"],[1,"bi","bi-clock-history"],[1,"counter-value"],[1,"col-lg-12"],[1,"card-header","d-flex","align-items-center"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name, mobile etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-auto"],[1,"hstack","flex-wrap","gap-2"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","exampleModalPopovers",1,"modal","fade"],["tooltipmodal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table-responsive","mt-4"],[1,"table","table-borderless","text-center","table-nowrap","align-middle","mb-0"],[1,"table-light"],["scope","col",2,"width","50px"],["scope","col"],["scope","col",1,"text-end"],["id","products-list"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"border-top","border-top-dashed","fs-base"],["scope","row"],[1,"text-end"],[1,"bi","bi-clock","align-baseline","me-1"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-light",3,"click"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],["action","#!"],[1,"mb-3"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],["value","Present"],["value","Absent"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100"],[1,"bi","bi-x-lg","align-baseline","me-1"],[1,"btn","btn-secondary","w-100"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],["class","avatar-sm bg-light rounded p-1 me-2"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"discount"],[1,"category"],[1,"stock"],[1,"price"],[1,"orders"],[1,"text-decoration-underline","ng-star-inserted",3,"click"],[1,"published"],[1,"badge",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);",1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ri-folder-reduce-line","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){if(1&s){const f=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div")(9,"div",8)(10,"div",9)(11,"div",10),t.wR5(12,"i",11),t.C$Y()(),t.I0R(13,"div",12)(14,"p",13),t.OEk(15,"Total Employee"),t.C$Y()()(),t.I0R(16,"h3",14)(17,"span",15),t.OEk(18),t.C$Y()()()(),t.I0R(19,"div",7)(20,"div")(21,"div",8)(22,"div",9)(23,"div",16),t.wR5(24,"i",17),t.C$Y()(),t.I0R(25,"div",12)(26,"p",13),t.OEk(27,"Present"),t.C$Y()()(),t.I0R(28,"h3",14)(29,"span",15),t.OEk(30),t.C$Y()()()(),t.I0R(31,"div",7)(32,"div")(33,"div",8)(34,"div",9)(35,"div",18),t.wR5(36,"i",19),t.C$Y()(),t.I0R(37,"div",12)(38,"p",13),t.OEk(39,"Absent"),t.C$Y()()(),t.I0R(40,"h3",14)(41,"span",15),t.OEk(42),t.C$Y()()()(),t.I0R(43,"div",7)(44,"div")(45,"div",8)(46,"div",9)(47,"div",20),t.wR5(48,"i",21),t.C$Y()(),t.I0R(49,"div",12)(50,"p",13),t.OEk(51,"Total Duration"),t.C$Y()()(),t.I0R(52,"h3",14)(53,"span",22),t.OEk(54),t.C$Y()()()()()()()()(),t.I0R(55,"div",2)(56,"div",23)(57,"div",4)(58,"div",24)(59,"div",12)(60,"h5",25),t.OEk(61," Employees "),t.I0R(62,"span",26),t.OEk(63),t.C$Y()(),t.I0R(64,"p",27),t.OEk(65," Showing Result of Date: "),t.I0R(66,"span",28),t.OEk(67),t.wVc(68,"date"),t.C$Y()()(),t.I0R(69,"div",29)(70,"div",30)(71,"div",31)(72,"div",32)(73,"input",33),t.iHE("ngModelChange",function(z){return t.kNx(l.selectedDate,z)||(l.selectedDate=z),z}),t.qCj("bsValueChange",function(z){return l.onDateChange(z)}),t.C$Y(),t.I0R(74,"div",34)(75,"label",35),t.wR5(76,"i",36),t.C$Y()()()(),t.I0R(77,"div",37)(78,"input",38),t.iHE("ngModelChange",function(z){return t.kNx(l.term,z)||(l.term=z),z}),t.qCj("keyup",function(){return l.filterdata()}),t.C$Y(),t.wR5(79,"i",39),t.C$Y(),t.I0R(80,"div",40)(81,"div",41)(82,"div")(83,"button",42),t.qCj("click",function(){return l.openEnd()}),t.wR5(84,"i",43),t.OEk(85," Filter "),t.C$Y()()()()()()(),t.I0R(86,"div",5)(87,"div",44)(88,"table",45)(89,"thead",46)(90,"tr")(91,"th")(92,"div",47),t.wR5(93,"label",48),t.C$Y()(),t.I0R(94,"th",49),t.qCj("click",function(){return l.onSort("name")}),t.OEk(95," Name "),t.C$Y(),t.I0R(96,"th",49),t.qCj("click",function(){return l.onSort("mobile")}),t.OEk(97," Mobile "),t.C$Y(),t.I0R(98,"th",49),t.qCj("click",function(){return l.onSort("email")}),t.OEk(99," Email "),t.C$Y(),t.I0R(100,"th",49),t.qCj("click",function(){return l.onSort("designation")}),t.OEk(101," Designation "),t.C$Y(),t.I0R(102,"th",49),t.qCj("click",function(){return l.onSort("check_in_time")}),t.OEk(103," Check-in Time "),t.C$Y(),t.I0R(104,"th",49),t.qCj("click",function(){return l.onSort("check_out_time")}),t.OEk(105," Check-out Time "),t.C$Y(),t.I0R(106,"th",49),t.qCj("click",function(){return l.onSort("totalDuration")}),t.OEk(107," Total Duration "),t.C$Y(),t.I0R(108,"th",49),t.qCj("click",function(){return l.onSort("checkin_status")}),t.OEk(109," Attendance Status "),t.C$Y(),t.I0R(110,"th"),t.OEk(111,"Action"),t.C$Y()()(),t.I0R(112,"tbody",50),t.c53(113,Ks,36,11,"tr",106,t.wJt),t.C$Y(),t.yuY(115,js,4,0,"div",51),t.C$Y()(),t.I0R(116,"div",52)(117,"div",53)(118,"div",54)(119,"div",55),t.wR5(120,"i",56),t.C$Y()(),t.I0R(121,"h5",57),t.OEk(122,"Sorry! No Result Found"),t.C$Y(),t.I0R(123,"p",13),t.OEk(124),t.C$Y()()(),t.I0R(125,"div",58)(126,"div",59)(127,"div",60),t.OEk(128," Showing "),t.I0R(129,"span",61),t.OEk(130),t.C$Y(),t.OEk(131," of "),t.I0R(132,"span",61),t.OEk(133),t.C$Y(),t.OEk(134," Results "),t.C$Y()(),t.I0R(135,"div",62)(136,"pagination",63),t.qCj("pageChanged",function(z){return l.pageChanged(z)}),t.C$Y()()()()()()()(),t.I0R(137,"div",64,65)(139,"div",66)(140,"div",67)(141,"div",68)(142,"h5",69),t.OEk(143,"Check-in Detail"),t.C$Y(),t.I0R(144,"button",70),t.qCj("click",function(){t.usT(f);const z=t.Gew(138);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(145,"div",71)(146,"div",72)(147,"table",73)(148,"thead")(149,"tr",74)(150,"th",75),t.OEk(151,"#"),t.C$Y(),t.I0R(152,"th",76),t.OEk(153,"Check-In Time"),t.C$Y(),t.I0R(154,"th",76),t.OEk(155,"Check-Out Time"),t.C$Y(),t.I0R(156,"th",77),t.OEk(157,"Duration"),t.C$Y()()(),t.I0R(158,"tbody",78),t.c53(159,sc,9,4,"tr",null,t.wJt),t.C$Y()()(),t.I0R(161,"div",79)(162,"table",80)(163,"tbody")(164,"tr",81)(165,"th",82),t.OEk(166,"Total Duration"),t.C$Y(),t.I0R(167,"th",83),t.wR5(168,"i",84),t.OEk(169),t.C$Y()()()()()(),t.I0R(170,"div",85)(171,"div",23)(172,"div",86)(173,"button",87),t.qCj("click",function(){t.usT(f);const z=t.Gew(138);return t.CGJ(z.hide())}),t.OEk(174," Close "),t.C$Y()()()()()()(),t.I0R(175,"div",88)(176,"div",89)(177,"h5",90),t.OEk(178,"Attendance Filters"),t.C$Y(),t.I0R(179,"button",70),t.qCj("click",function(){return l.closeoffcanvas()}),t.C$Y()(),t.I0R(180,"div",91)(181,"form",92)(182,"div",2)(183,"div",23)(184,"div",93)(185,"p",94),t.OEk(186," Attendance Status "),t.C$Y(),t.I0R(187,"select",95),t.iHE("ngModelChange",function(z){return t.kNx(l.selectedStatus,z)||(l.selectedStatus=z),z}),t.qCj("change",function(){return l.filterdata()}),t.I0R(188,"option",96),t.OEk(189,"All"),t.C$Y(),t.I0R(190,"option",97),t.OEk(191,"Present"),t.C$Y(),t.I0R(192,"option",98),t.OEk(193,"Absent"),t.C$Y()()()(),t.I0R(194,"div",23)(195,"div",93)(196,"p",94),t.OEk(197,"Department"),t.C$Y(),t.I0R(198,"ng-select",99),t.qCj("change",function(){return l.filterdata()}),t.iHE("ngModelChange",function(z){return t.kNx(l.selectedDepartments,z)||(l.selectedDepartments=z),z}),t.C$Y()()(),t.I0R(199,"div",23)(200,"div",93)(201,"p",94),t.OEk(202,"Designation"),t.C$Y(),t.I0R(203,"ng-select",100),t.qCj("change",function(){return l.filterdata()}),t.iHE("ngModelChange",function(z){return t.kNx(l.selectedDesignations,z)||(l.selectedDesignations=z),z}),t.C$Y()()()()()(),t.I0R(204,"div",101)(205,"button",102),t.wR5(206,"i",103),t.OEk(207," Reset "),t.C$Y(),t.I0R(208,"button",104),t.wR5(209,"i",43),t.OEk(210," Filters "),t.C$Y()()(),t.I0R(211,"div",105),t.qCj("click",function(){return l.closeoffcanvas()}),t.C$Y()}2&s&&(t.E7m("breadcrumbItems",l.breadCrumbItems),t.yG2(17),t.E7m("countUp",null==l.attendanceDataList?null:l.attendanceDataList.length),t.yG2(),t.cNF(null==l.attendanceDataList?null:l.attendanceDataList.length),t.yG2(11),t.E7m("countUp",null==l.attendanceCount?null:l.attendanceCount.totalPresent),t.yG2(),t.cNF(null==l.attendanceCount?null:l.attendanceCount.totalPresent),t.yG2(11),t.E7m("countUp",null==l.attendanceCount?null:l.attendanceCount.totalAbsent),t.yG2(),t.cNF(null==l.attendanceCount?null:l.attendanceCount.totalAbsent),t.yG2(12),t.cNF(null==l.attendanceCount?null:l.attendanceCount.totalDuration),t.yG2(9),t.cNF(null==l.attendanceData?null:l.attendanceData.length),t.yG2(4),t.oRS(" ",t.g7$(68,28,l.formattedDate,"dd MMM , yyyy"),""),t.yG2(6),t.E7m("bsConfig",l.bsConfig),t.OKB("ngModel",l.selectedDate),t.yG2(5),t.OKB("ngModel",l.term),t.yG2(35),t.oho(l.attendanceData),t.yG2(2),t.C0Y(115,l.spinnerStatus?115:-1),t.yG2(9),t.oRS(" We've searched ",null==l.attendanceDataList?null:l.attendanceDataList.length," Employee Data. We did not find any Employee for you search. "),t.yG2(6),t.cNF(null==l.attendanceData?null:l.attendanceData.length),t.yG2(3),t.cNF(null==l.attendanceDataList?null:l.attendanceDataList.length),t.yG2(3),t.E7m("totalItems",null==l.attendanceDataList?null:l.attendanceDataList.length)("itemsPerPage",10),t.yG2(23),t.oho(l.checkInDetails),t.yG2(10),t.oRS(" ",l.totalDuration," "),t.yG2(18),t.OKB("ngModel",l.selectedStatus),t.E7m("ngModelOptions",t.q4q(31,na)),t.yG2(11),t.E7m("items",l.departments)("multiple",!0),t.OKB("ngModel",l.selectedDepartments),t.yG2(5),t.E7m("items",l.designations)("multiple",!0),t.OKB("ngModel",l.selectedDesignations))},dependencies:[Ge.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.sz,V.wd,V.GO,V.ot,V.GC,V.ue,V.u,V._G,V.SC,nt.im,_n.uK,ia,_c.UT,I.em,I.U5,Ge.y]})}return r})();const Dl=["showModal"],$a=["deleteRecordModal"];function vu(r,i){if(1&r){const e=t.KQA();t.I0R(0,"ul",96)(1,"li")(2,"a",97),t.wR5(3,"i",98),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",99),t.qCj("click",function(){t.usT(e);const l=t.GaO().$implicit,f=t.GaO();return t.CGJ(f.editList(l))}),t.wR5(7,"i",100),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",101),t.qCj("click",function(){t.usT(e);const l=t.GaO().$implicit,f=t.GaO();return t.CGJ(f.removeItem(l.id))}),t.wR5(11,"i",102),t.OEk(12," Remove"),t.C$Y()()()}}const oc=(r,i)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":i});function ra(r,i){if(1&r){const e=t.KQA();t.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),t.iHE("ngModelChange",function(l){const w=t.usT(e).$implicit;return t.kNx(w.states,l)||(w.states=l),t.CGJ(l)}),t.qCj("change",function(l){t.usT(e);const f=t.GaO();return t.CGJ(f.onCheckboxChange(l))}),t.C$Y(),t.wR5(4,"label",82),t.C$Y()(),t.I0R(5,"td",83)(6,"a",84),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",85),t.OEk(9),t.C$Y(),t.I0R(10,"td",86)(11,"div",87)(12,"input",88),t.qCj("change",function(l){const w=t.usT(e).$implicit,z=t.GaO();return t.CGJ(z.setStatus(w,l))}),t.C$Y(),t.I0R(13,"label",89)(14,"span",90),t.OEk(15),t.C$Y()()()(),t.I0R(16,"td",91),t.OEk(17),t.wVc(18,"date"),t.C$Y(),t.I0R(19,"td")(20,"div",92)(21,"button",93),t.wR5(22,"i",94),t.C$Y(),t.yuY(23,vu,13,0,"ul",95),t.C$Y()()()}if(2&r){const e=i.$implicit,s=i.$index;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(6),t.oRS(" ",e.name," "),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),t.yG2(),t.E7m("for","customSwitchsizemd"+s),t.yG2(),t.E7m("ngClass",t.IBC(13,oc,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," "),t.yG2(2),t.oRS(" ",t.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function Il(r,i){1&r&&(t.I0R(0,"div",28)(1,"div",103)(2,"span",104),t.OEk(3,"Loading..."),t.C$Y()()())}function bo(r,i){1&r&&(t.I0R(0,"div",105),t.OEk(1,"Department name is required."),t.C$Y())}function zr(r,i){1&r&&(t.I0R(0,"div",105),t.OEk(1," Department name must be at most 45 characters "),t.C$Y())}function Zu(r,i){1&r&&(t.I0R(0,"div",105),t.OEk(1,"Status is required."),t.C$Y())}let Pa=(()=>{class r{constructor(e,s,l){this.api=e,this.toastService=s,this.formBuilder=l,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Department",active:!0}],this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.departmentData=e.data||[],this.departmentDataList=e.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,s){const w={name:e.name,status:s.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("department",e.id,w).subscribe(z=>this.handleResponse(z),z=>this.handleError(z))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("department",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}update(e){this.api.put("department",this.id,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Department",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Department",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("department",e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l));const s=this.checkedValGet;s&&s.length>0&&this.api.post("department-delete-multiple",{ids:s}).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(w=>({...w,states:e.target.checked}));for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.departmentData];s.sort((l,f)=>{const w=this.compare(l[e],f[e]);return"asc"===this.direction?w:-w}),this.departmentData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.departmentData=this.departmentDataList.slice(s,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(De),t.GI1(Be.SA),t.GI1(V.im))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-department-list"]],viewQuery:function(s,l){if(1&s&&(t.CC$(Dl,5),t.CC$($a,5)),2&s){let f;t.wto(f=t.Gqi())&&(l.showModal=f.first),t.wto(f=t.Gqi())&&(l.deleteRecordModal=f.first)}},decls:123,vars:15,consts:[["title","Department",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(s,l){if(1&s){const f=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Departments "),t.I0R(9,"span",8),t.OEk(10),t.C$Y()()(),t.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),t.iHE("ngModelChange",function(z){return t.kNx(l.term,z)||(l.term=z),z}),t.qCj("keyup",function(){return l.filterdata()}),t.C$Y(),t.wR5(16,"i",14),t.C$Y()(),t.I0R(17,"button",15),t.qCj("click",function(){t.usT(f);const z=t.Gew(104);return t.CGJ(z.show())}),t.wR5(18,"i",16),t.C$Y(),t.I0R(19,"button",17),t.qCj("click",function(){return l.onAdd()}),t.wR5(20,"i",18),t.OEk(21," Add Department "),t.C$Y()()()(),t.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),t.iHE("ngModelChange",function(z){return t.kNx(l.masterSelected,z)||(l.masterSelected=z),z}),t.qCj("change",function(z){return l.checkUncheckAll(z)}),t.C$Y(),t.wR5(30,"label",25),t.C$Y()(),t.I0R(31,"th",26),t.qCj("click",function(){return l.onSort("name")}),t.OEk(32," Department Name "),t.C$Y(),t.I0R(33,"th",26),t.qCj("click",function(){return l.onSort("status")}),t.OEk(34," Status "),t.C$Y(),t.I0R(35,"th",26),t.qCj("click",function(){return l.onSort("created_at")}),t.OEk(36," Created At "),t.C$Y(),t.I0R(37,"th"),t.OEk(38,"Action"),t.C$Y()()(),t.I0R(39,"tbody",27),t.c53(40,ra,24,16,"tr",80,t.wJt),t.C$Y(),t.yuY(42,Il,4,0,"div",28),t.C$Y()(),t.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),t.wR5(47,"i",33),t.C$Y()(),t.I0R(48,"h5",34),t.OEk(49,"Sorry! No Result Found"),t.C$Y(),t.I0R(50,"p",35),t.OEk(51),t.C$Y()()(),t.I0R(52,"div",36)(53,"div",37)(54,"div",38),t.OEk(55," Showing "),t.I0R(56,"span",39),t.OEk(57),t.C$Y(),t.OEk(58," of "),t.I0R(59,"span",39),t.OEk(60),t.C$Y(),t.OEk(61," Results "),t.C$Y()(),t.I0R(62,"div",40)(63,"pagination",41),t.qCj("pageChanged",function(z){return l.pageChanged(z)}),t.C$Y()()()()()()()(),t.I0R(64,"div",42,43),t.qCj("hidden.bs.modal",function(){return l.resetForm()}),t.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),t.OEk(70,"Add Department"),t.C$Y(),t.I0R(71,"button",48),t.qCj("click",function(){t.usT(f);const z=t.Gew(65);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(72,"form",49),t.qCj("ngSubmit",function(){return l.onSubmit()}),t.I0R(73,"div",50),t.wR5(74,"div",51),t.I0R(75,"div",52)(76,"label",53),t.OEk(77,"Department Name "),t.I0R(78,"span",54),t.OEk(79,"*"),t.C$Y()(),t.wR5(80,"input",55),t.yuY(81,bo,2,0,"div",56)(82,zr,2,0,"div",56),t.C$Y(),t.I0R(83,"div",52)(84,"label",57),t.OEk(85,"Status "),t.I0R(86,"span",54),t.OEk(87,"*"),t.C$Y()(),t.I0R(88,"select",58)(89,"option",59),t.OEk(90,"Select Status"),t.C$Y(),t.I0R(91,"option",60),t.OEk(92,"Active"),t.C$Y(),t.I0R(93,"option",61),t.OEk(94,"Inactive"),t.C$Y()(),t.yuY(95,Zu,2,0,"div",56),t.C$Y()(),t.I0R(96,"div",62)(97,"div",63)(98,"button",64),t.qCj("click",function(){t.usT(f);const z=t.Gew(65);return t.CGJ(z.hide())}),t.wR5(99,"i",65),t.OEk(100," Close "),t.C$Y(),t.I0R(101,"button",66),t.OEk(102," Add "),t.C$Y()()()()()()(),t.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),t.qCj("click",function(){t.usT(f);const z=t.Gew(104);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(109,"div",71)(110,"div",72)(111,"div",54),t.wR5(112,"i",73),t.C$Y(),t.I0R(113,"div",74)(114,"h3",75),t.OEk(115,"Are you sure ?"),t.C$Y(),t.I0R(116,"p",76),t.OEk(117," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(118,"div",77)(119,"button",78),t.qCj("click",function(){t.usT(f);const z=t.Gew(104);return t.CGJ(z.hide())}),t.OEk(120," Close "),t.C$Y(),t.I0R(121,"button",79),t.qCj("click",function(){return l.deleteData(l.deleteId)}),t.OEk(122," Yes, Delete It! "),t.C$Y()()()()()()}2&s&&(t.E7m("breadcrumbItems",l.breadCrumbItems),t.yG2(10),t.cNF(null==l.departmentData?null:l.departmentData.length),t.yG2(5),t.OKB("ngModel",l.term),t.yG2(14),t.OKB("ngModel",l.masterSelected),t.yG2(11),t.oho(l.departmentData),t.yG2(2),t.C0Y(42,l.spinnerStatus?42:-1),t.yG2(9),t.oRS(" We've searched ",l.departmentDataList.length," Department We did not find any Department for you search. "),t.yG2(6),t.cNF(null==l.departmentData?null:l.departmentData.length),t.yG2(3),t.cNF(null==l.departmentDataList?null:l.departmentDataList.length),t.yG2(3),t.E7m("totalItems",null==l.departmentDataList?null:l.departmentDataList.length)("itemsPerPage",10),t.yG2(9),t.E7m("formGroup",l.formGroup),t.yG2(9),t.C0Y(81,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?81:-1),t.yG2(),t.C0Y(82,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?82:-1),t.yG2(6),t.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(95,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?95:-1))},dependencies:[Ge.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.sz,V.wd,V.GO,V.ot,V.SU,V.GC,V.ue,V.u,V._G,V.uW,V.Wo,nt.im,_n.uK,Ge.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}"]})}return r})();const yc=["showModal"],bc=["deleteRecordModal"];function sa(r,i){if(1&r){const e=t.KQA();t.I0R(0,"ul",96)(1,"li")(2,"a",97),t.wR5(3,"i",98),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",99),t.qCj("click",function(){t.usT(e);const l=t.GaO().$implicit,f=t.GaO();return t.CGJ(f.editList(l))}),t.wR5(7,"i",100),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",101),t.qCj("click",function(){t.usT(e);const l=t.GaO().$implicit,f=t.GaO();return t.CGJ(f.removeItem(l.id))}),t.wR5(11,"i",102),t.OEk(12," Remove"),t.C$Y()()()}}const Ns=(r,i)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":i});function Ho(r,i){if(1&r){const e=t.KQA();t.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),t.iHE("ngModelChange",function(l){const w=t.usT(e).$implicit;return t.kNx(w.states,l)||(w.states=l),t.CGJ(l)}),t.qCj("change",function(l){t.usT(e);const f=t.GaO();return t.CGJ(f.onCheckboxChange(l))}),t.C$Y(),t.wR5(4,"label",82),t.C$Y()(),t.I0R(5,"td",83)(6,"a",84),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",85),t.OEk(9),t.C$Y(),t.I0R(10,"td",86)(11,"div",87)(12,"input",88),t.qCj("change",function(l){const w=t.usT(e).$implicit,z=t.GaO();return t.CGJ(z.setStatus(w,l))}),t.C$Y(),t.I0R(13,"label",89)(14,"span",90),t.OEk(15),t.C$Y()()()(),t.I0R(16,"td",91),t.OEk(17),t.wVc(18,"date"),t.C$Y(),t.I0R(19,"td")(20,"div",92)(21,"button",93),t.wR5(22,"i",94),t.C$Y(),t.yuY(23,sa,13,0,"ul",95),t.C$Y()()()}if(2&r){const e=i.$implicit,s=i.$index;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(6),t.oRS(" ",e.name," "),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),t.yG2(),t.E7m("for","customSwitchsizemd"+s),t.yG2(),t.E7m("ngClass",t.IBC(13,Ns,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," "),t.yG2(2),t.oRS(" ",t.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function Lo(r,i){1&r&&(t.I0R(0,"div",28)(1,"div",103)(2,"span",104),t.OEk(3,"Loading..."),t.C$Y()()())}function pl(r,i){1&r&&(t.I0R(0,"div",105),t.OEk(1,"Designation name is required."),t.C$Y())}function Ra(r,i){1&r&&(t.I0R(0,"div",105),t.OEk(1," Designation name must be at most 45 characters "),t.C$Y())}function xa(r,i){1&r&&(t.I0R(0,"div",105),t.OEk(1,"Status is required."),t.C$Y())}let Ll=(()=>{class r{constructor(e,s,l){this.api=e,this.toastService=s,this.formBuilder=l,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Designation",active:!0}],this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("designation").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.departmentData=e.data||[],this.departmentDataList=e.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,s){const w={name:e.name,status:s.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("designation",e.id,w).subscribe(z=>this.handleResponse(z),z=>this.handleError(z))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("designation",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}update(e){this.api.put("designation",this.id,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Designation",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("designation",e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l));const s=this.checkedValGet;s&&s.length>0&&this.api.post("designation-delete-multiple",{ids:s}).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(w=>({...w,states:e.target.checked}));for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.departmentData];s.sort((l,f)=>{const w=this.compare(l[e],f[e]);return"asc"===this.direction?w:-w}),this.departmentData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.departmentData=this.departmentDataList.slice(s,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(De),t.GI1(Be.SA),t.GI1(V.im))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-designation-list"]],viewQuery:function(s,l){if(1&s&&(t.CC$(yc,5),t.CC$(bc,5)),2&s){let f;t.wto(f=t.Gqi())&&(l.showModal=f.first),t.wto(f=t.Gqi())&&(l.deleteRecordModal=f.first)}},decls:123,vars:15,consts:[["title","Designation",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(s,l){if(1&s){const f=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Designation "),t.I0R(9,"span",8),t.OEk(10),t.C$Y()()(),t.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),t.iHE("ngModelChange",function(z){return t.kNx(l.term,z)||(l.term=z),z}),t.qCj("keyup",function(){return l.filterdata()}),t.C$Y(),t.wR5(16,"i",14),t.C$Y()(),t.I0R(17,"button",15),t.qCj("click",function(){t.usT(f);const z=t.Gew(104);return t.CGJ(z.show())}),t.wR5(18,"i",16),t.C$Y(),t.I0R(19,"button",17),t.qCj("click",function(){return l.onAdd()}),t.wR5(20,"i",18),t.OEk(21," Add Designation "),t.C$Y()()()(),t.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),t.iHE("ngModelChange",function(z){return t.kNx(l.masterSelected,z)||(l.masterSelected=z),z}),t.qCj("change",function(z){return l.checkUncheckAll(z)}),t.C$Y(),t.wR5(30,"label",25),t.C$Y()(),t.I0R(31,"th",26),t.qCj("click",function(){return l.onSort("name")}),t.OEk(32," Designation Name "),t.C$Y(),t.I0R(33,"th",26),t.qCj("click",function(){return l.onSort("status")}),t.OEk(34," Status "),t.C$Y(),t.I0R(35,"th",26),t.qCj("click",function(){return l.onSort("created_at")}),t.OEk(36," Created At "),t.C$Y(),t.I0R(37,"th"),t.OEk(38,"Action"),t.C$Y()()(),t.I0R(39,"tbody",27),t.c53(40,Ho,24,16,"tr",80,t.wJt),t.C$Y(),t.yuY(42,Lo,4,0,"div",28),t.C$Y()(),t.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),t.wR5(47,"i",33),t.C$Y()(),t.I0R(48,"h5",34),t.OEk(49,"Sorry! No Result Found"),t.C$Y(),t.I0R(50,"p",35),t.OEk(51),t.C$Y()()(),t.I0R(52,"div",36)(53,"div",37)(54,"div",38),t.OEk(55," Showing "),t.I0R(56,"span",39),t.OEk(57),t.C$Y(),t.OEk(58," of "),t.I0R(59,"span",39),t.OEk(60),t.C$Y(),t.OEk(61," Results "),t.C$Y()(),t.I0R(62,"div",40)(63,"pagination",41),t.qCj("pageChanged",function(z){return l.pageChanged(z)}),t.C$Y()()()()()()()(),t.I0R(64,"div",42,43),t.qCj("hidden.bs.modal",function(){return l.resetForm()}),t.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),t.OEk(70,"Add Designation"),t.C$Y(),t.I0R(71,"button",48),t.qCj("click",function(){t.usT(f);const z=t.Gew(65);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(72,"form",49),t.qCj("ngSubmit",function(){return l.onSubmit()}),t.I0R(73,"div",50),t.wR5(74,"div",51),t.I0R(75,"div",52)(76,"label",53),t.OEk(77,"Designation Name "),t.I0R(78,"span",54),t.OEk(79,"*"),t.C$Y()(),t.wR5(80,"input",55),t.yuY(81,pl,2,0,"div",56)(82,Ra,2,0,"div",56),t.C$Y(),t.I0R(83,"div",52)(84,"label",57),t.OEk(85,"Status "),t.I0R(86,"span",54),t.OEk(87,"*"),t.C$Y()(),t.I0R(88,"select",58)(89,"option",59),t.OEk(90,"Select Status"),t.C$Y(),t.I0R(91,"option",60),t.OEk(92,"Active"),t.C$Y(),t.I0R(93,"option",61),t.OEk(94,"Inactive"),t.C$Y()(),t.yuY(95,xa,2,0,"div",56),t.C$Y()(),t.I0R(96,"div",62)(97,"div",63)(98,"button",64),t.qCj("click",function(){t.usT(f);const z=t.Gew(65);return t.CGJ(z.hide())}),t.wR5(99,"i",65),t.OEk(100," Close "),t.C$Y(),t.I0R(101,"button",66),t.OEk(102," Add "),t.C$Y()()()()()()(),t.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),t.qCj("click",function(){t.usT(f);const z=t.Gew(104);return t.CGJ(z.hide())}),t.C$Y()(),t.I0R(109,"div",71)(110,"div",72)(111,"div",54),t.wR5(112,"i",73),t.C$Y(),t.I0R(113,"div",74)(114,"h3",75),t.OEk(115,"Are you sure ?"),t.C$Y(),t.I0R(116,"p",76),t.OEk(117," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(118,"div",77)(119,"button",78),t.qCj("click",function(){t.usT(f);const z=t.Gew(104);return t.CGJ(z.hide())}),t.OEk(120," Close "),t.C$Y(),t.I0R(121,"button",79),t.qCj("click",function(){return l.deleteData(l.deleteId)}),t.OEk(122," Yes, Delete It! "),t.C$Y()()()()()()}2&s&&(t.E7m("breadcrumbItems",l.breadCrumbItems),t.yG2(10),t.cNF(null==l.departmentData?null:l.departmentData.length),t.yG2(5),t.OKB("ngModel",l.term),t.yG2(14),t.OKB("ngModel",l.masterSelected),t.yG2(11),t.oho(l.departmentData),t.yG2(2),t.C0Y(42,l.spinnerStatus?42:-1),t.yG2(9),t.oRS(" We've searched ",l.departmentDataList.length," Department We did not find any Department for you search. "),t.yG2(6),t.cNF(null==l.departmentData?null:l.departmentData.length),t.yG2(3),t.cNF(null==l.departmentDataList?null:l.departmentDataList.length),t.yG2(3),t.E7m("totalItems",null==l.departmentDataList?null:l.departmentDataList.length)("itemsPerPage",10),t.yG2(9),t.E7m("formGroup",l.formGroup),t.yG2(9),t.C0Y(81,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?81:-1),t.yG2(),t.C0Y(82,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?82:-1),t.yG2(6),t.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(95,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?95:-1))},dependencies:[Ge.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.sz,V.wd,V.GO,V.ot,V.SU,V.GC,V.ue,V.u,V._G,V.uW,V.Wo,nt.im,_n.uK,Ge.y]})}return r})();var xo,Yn,Ol,ls,Xa,wo,Hs,Or,fl,Pl={},Rl=[],zl=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Us(r,i){for(var e in i)r[e]=i[e];return r}function Co(r){var i=r.parentNode;i&&i.removeChild(r)}function Mt(r,i,e){var s,l,f,w={};for(f in i)"key"==f?s=i[f]:"ref"==f?l=i[f]:w[f]=i[f];if(arguments.length>2&&(w.children=arguments.length>3?xo.call(arguments,2):e),"function"==typeof r&&null!=r.defaultProps)for(f in r.defaultProps)void 0===w[f]&&(w[f]=r.defaultProps[f]);return ac(r,w,s,l,null)}function ac(r,i,e,s,l){var f={type:r,props:i,key:e,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l??++Ol};return null==l&&null!=Yn.vnode&&Yn.vnode(f),f}function Vr(r){return r.children}function lo(r,i,e){"-"===i[0]?r.setProperty(i,e??""):r[i]=null==e?"":"number"!=typeof e||zl.test(i)?e:e+"px"}function Za(r,i,e,s,l){var f;e:if("style"===i)if("string"==typeof e)r.style.cssText=e;else{if("string"==typeof s&&(r.style.cssText=s=""),s)for(i in s)e&&i in e||lo(r.style,i,"");if(e)for(i in e)s&&e[i]===s[i]||lo(r.style,i,e[i])}else if("o"===i[0]&&"n"===i[1])f=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in r?i.toLowerCase().slice(2):i.slice(2),r.l||(r.l={}),r.l[i+f]=e,e?s||r.addEventListener(i,f?qa:oa,f):r.removeEventListener(i,f?qa:oa,f);else if("dangerouslySetInnerHTML"!==i){if(l)i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==i&&"height"!==i&&"href"!==i&&"list"!==i&&"form"!==i&&"tabIndex"!==i&&"download"!==i&&i in r)try{r[i]=e??"";break e}catch{}"function"==typeof e||(null==e||!1===e&&-1==i.indexOf("-")?r.removeAttribute(i):r.setAttribute(i,e))}}function oa(r){Xa=!0;try{return this.l[r.type+!1](Yn.event?Yn.event(r):r)}finally{Xa=!1}}function qa(r){Xa=!0;try{return this.l[r.type+!0](Yn.event?Yn.event(r):r)}finally{Xa=!1}}function zs(r,i){this.props=r,this.context=i}function wa(r,i){if(null==i)return r.__?wa(r.__,r.__.__k.indexOf(r)+1):null;for(var e;i<r.__k.length;i++)if(null!=(e=r.__k[i])&&null!=e.__e)return e.__e;return"function"==typeof r.type?wa(r):null}function aa(r){var i,e;if(null!=(r=r.__)&&null!=r.__c){for(r.__e=r.__c.base=null,i=0;i<r.__k.length;i++)if(null!=(e=r.__k[i])&&null!=e.__e){r.__e=r.__c.base=e.__e;break}return aa(r)}}function xc(r){Xa?setTimeout(r):Or(r)}function Ws(r){(!r.__d&&(r.__d=!0)&&wo.push(r)&&!Vo.__r++||Hs!==Yn.debounceRendering)&&((Hs=Yn.debounceRendering)||xc)(Vo)}function Vo(){var r,i,e,s,l,f,w,z;for(wo.sort(function(W,ie){return W.__v.__b-ie.__v.__b});r=wo.shift();)r.__d&&(i=wo.length,s=void 0,l=void 0,w=(f=(e=r).__v).__e,(z=e.__P)&&(s=[],(l=Us({},f)).__v=f.__v+1,uo(z,f,l,e.__n,void 0!==z.ownerSVGElement,null!=f.__h?[w]:null,s,w??wa(f),f.__h),yu(s,f),f.__e!=w&&aa(f)),wo.length>i&&wo.sort(function(W,ie){return W.__v.__b-ie.__v.__b}));Vo.__r=0}function Go(r,i,e,s,l,f,w,z,W,ie){var oe,Re,je,Ye,Wt,$t,ci,zi=s&&s.__k||Rl,kn=zi.length;for(e.__k=[],oe=0;oe<i.length;oe++)if(null!=(Ye=e.__k[oe]=null==(Ye=i[oe])||"boolean"==typeof Ye?null:"string"==typeof Ye||"number"==typeof Ye||"bigint"==typeof Ye?ac(null,Ye,null,null,Ye):Array.isArray(Ye)?ac(Vr,{children:Ye},null,null,null):Ye.__b>0?ac(Ye.type,Ye.props,Ye.key,Ye.ref?Ye.ref:null,Ye.__v):Ye)){if(Ye.__=e,Ye.__b=e.__b+1,null===(je=zi[oe])||je&&Ye.key==je.key&&Ye.type===je.type)zi[oe]=void 0;else for(Re=0;Re<kn;Re++){if((je=zi[Re])&&Ye.key==je.key&&Ye.type===je.type){zi[Re]=void 0;break}je=null}uo(r,Ye,je=je||Pl,l,f,w,z,W,ie),Wt=Ye.__e,(Re=Ye.ref)&&je.ref!=Re&&(ci||(ci=[]),je.ref&&ci.push(je.ref,null,Ye),ci.push(Re,Ye.__c||Wt,Ye)),null!=Wt?(null==$t&&($t=Wt),"function"==typeof Ye.type&&Ye.__k===je.__k?Ye.__d=W=Ka(Ye,W,r):W=co(r,Ye,je,zi,Wt,W),"function"==typeof e.type&&(e.__d=W)):W&&je.__e==W&&W.parentNode!=r&&(W=wa(je))}for(e.__e=$t,oe=kn;oe--;)null!=zi[oe]&&("function"==typeof e.type&&null!=zi[oe].__e&&zi[oe].__e==e.__d&&(e.__d=wc(s).nextSibling),za(zi[oe],zi[oe]));if(ci)for(oe=0;oe<ci.length;oe++)Ja(ci[oe],ci[++oe],ci[++oe])}function Ka(r,i,e){for(var s,l=r.__k,f=0;l&&f<l.length;f++)(s=l[f])&&(s.__=r,i="function"==typeof s.type?Ka(s,i,e):co(e,s,s,l,s.__e,i));return i}function jo(r,i){return i=i||[],null==r||"boolean"==typeof r||(Array.isArray(r)?r.some(function(e){jo(e,i)}):i.push(r)),i}function co(r,i,e,s,l,f){var w,z,W;if(void 0!==i.__d)w=i.__d,i.__d=void 0;else if(null==e||l!=f||null==l.parentNode)e:if(null==f||f.parentNode!==r)r.appendChild(l),w=null;else{for(z=f,W=0;(z=z.nextSibling)&&W<s.length;W+=1)if(z==l)break e;r.insertBefore(l,f),w=f}return void 0!==w?w:l.nextSibling}function wc(r){var i,e,s;if(null==r.type||"string"==typeof r.type)return r.__e;if(r.__k)for(i=r.__k.length-1;i>=0;i--)if((e=r.__k[i])&&(s=wc(e)))return s;return null}function uo(r,i,e,s,l,f,w,z,W){var ie,oe,Re,je,Ye,Wt,$t,ci,zi,kn,xr,Tr,eo,rs,Bs,es=i.type;if(void 0!==i.constructor)return null;null!=e.__h&&(W=e.__h,z=i.__e=e.__e,i.__h=null,f=[z]),(ie=Yn.__b)&&ie(i);try{e:if("function"==typeof es){if(ci=i.props,zi=(ie=es.contextType)&&s[ie.__c],kn=ie?zi?zi.props.value:ie.__:s,e.__c?$t=(oe=i.__c=e.__c).__=oe.__E:("prototype"in es&&es.prototype.render?i.__c=oe=new es(ci,kn):(i.__c=oe=new zs(ci,kn),oe.constructor=es,oe.render=lc),zi&&zi.sub(oe),oe.props=ci,oe.state||(oe.state={}),oe.context=kn,oe.__n=s,Re=oe.__d=!0,oe.__h=[],oe._sb=[]),null==oe.__s&&(oe.__s=oe.state),null!=es.getDerivedStateFromProps&&(oe.__s==oe.state&&(oe.__s=Us({},oe.__s)),Us(oe.__s,es.getDerivedStateFromProps(ci,oe.__s))),je=oe.props,Ye=oe.state,oe.__v=i,Re)null==es.getDerivedStateFromProps&&null!=oe.componentWillMount&&oe.componentWillMount(),null!=oe.componentDidMount&&oe.__h.push(oe.componentDidMount);else{if(null==es.getDerivedStateFromProps&&ci!==je&&null!=oe.componentWillReceiveProps&&oe.componentWillReceiveProps(ci,kn),!oe.__e&&null!=oe.shouldComponentUpdate&&!1===oe.shouldComponentUpdate(ci,oe.__s,kn)||i.__v===e.__v){for(i.__v!==e.__v&&(oe.props=ci,oe.state=oe.__s,oe.__d=!1),i.__e=e.__e,i.__k=e.__k,i.__k.forEach(function(Xu){Xu&&(Xu.__=i)}),xr=0;xr<oe._sb.length;xr++)oe.__h.push(oe._sb[xr]);oe._sb=[],oe.__h.length&&w.push(oe);break e}null!=oe.componentWillUpdate&&oe.componentWillUpdate(ci,oe.__s,kn),null!=oe.componentDidUpdate&&oe.__h.push(function(){oe.componentDidUpdate(je,Ye,Wt)})}if(oe.context=kn,oe.props=ci,oe.__P=r,Tr=Yn.__r,eo=0,"prototype"in es&&es.prototype.render){for(oe.state=oe.__s,oe.__d=!1,Tr&&Tr(i),ie=oe.render(oe.props,oe.state,oe.context),rs=0;rs<oe._sb.length;rs++)oe.__h.push(oe._sb[rs]);oe._sb=[]}else do{oe.__d=!1,Tr&&Tr(i),ie=oe.render(oe.props,oe.state,oe.context),oe.state=oe.__s}while(oe.__d&&++eo<25);oe.state=oe.__s,null!=oe.getChildContext&&(s=Us(Us({},s),oe.getChildContext())),Re||null==oe.getSnapshotBeforeUpdate||(Wt=oe.getSnapshotBeforeUpdate(je,Ye)),Bs=null!=ie&&ie.type===Vr&&null==ie.key?ie.props.children:ie,Go(r,Array.isArray(Bs)?Bs:[Bs],i,e,s,l,f,w,z,W),oe.base=i.__e,i.__h=null,oe.__h.length&&w.push(oe),$t&&(oe.__E=oe.__=null),oe.__e=!1}else null==f&&i.__v===e.__v?(i.__k=e.__k,i.__e=e.__e):i.__e=function la(r,i,e,s,l,f,w,z){var W,ie,oe,Re=e.props,je=i.props,Ye=i.type,Wt=0;if("svg"===Ye&&(l=!0),null!=f)for(;Wt<f.length;Wt++)if((W=f[Wt])&&"setAttribute"in W==!!Ye&&(Ye?W.localName===Ye:3===W.nodeType)){r=W,f[Wt]=null;break}if(null==r){if(null===Ye)return document.createTextNode(je);r=l?document.createElementNS("http://www.w3.org/2000/svg",Ye):document.createElement(Ye,je.is&&je),f=null,z=!1}if(null===Ye)Re===je||z&&r.data===je||(r.data=je);else{if(f=f&&xo.call(r.childNodes),ie=(Re=e.props||Pl).dangerouslySetInnerHTML,oe=je.dangerouslySetInnerHTML,!z){if(null!=f)for(Re={},Wt=0;Wt<r.attributes.length;Wt++)Re[r.attributes[Wt].name]=r.attributes[Wt].value;(oe||ie)&&(oe&&(ie&&oe.__html==ie.__html||oe.__html===r.innerHTML)||(r.innerHTML=oe&&oe.__html||""))}if(function _u(r,i,e,s,l){var f;for(f in e)"children"===f||"key"===f||f in i||Za(r,f,null,e[f],s);for(f in i)l&&"function"!=typeof i[f]||"children"===f||"key"===f||"value"===f||"checked"===f||e[f]===i[f]||Za(r,f,i[f],e[f],s)}(r,je,Re,l,z),oe)i.__k=[];else if(Wt=i.props.children,Go(r,Array.isArray(Wt)?Wt:[Wt],i,e,s,l&&"foreignObject"!==Ye,f,w,f?f[0]:e.__k&&wa(e,0),z),null!=f)for(Wt=f.length;Wt--;)null!=f[Wt]&&Co(f[Wt]);z||("value"in je&&void 0!==(Wt=je.value)&&(Wt!==r.value||"progress"===Ye&&!Wt||"option"===Ye&&Wt!==Re.value)&&Za(r,"value",Wt,Re.value,!1),"checked"in je&&void 0!==(Wt=je.checked)&&Wt!==r.checked&&Za(r,"checked",Wt,Re.checked,!1))}return r}(e.__e,i,e,s,l,f,w,W);(ie=Yn.diffed)&&ie(i)}catch(Xu){i.__v=null,(W||null!=f)&&(i.__e=z,i.__h=!!W,f[f.indexOf(z)]=null),Yn.__e(Xu,i,e)}}function yu(r,i){Yn.__c&&Yn.__c(i,r),r.some(function(e){try{r=e.__h,e.__h=[],r.some(function(s){s.call(e)})}catch(s){Yn.__e(s,e.__v)}})}function Ja(r,i,e){try{"function"==typeof r?r(i):r.current=i}catch(s){Yn.__e(s,e)}}function za(r,i,e){var s,l;if(Yn.unmount&&Yn.unmount(r),(s=r.ref)&&(s.current&&s.current!==r.__e||Ja(s,null,i)),null!=(s=r.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(f){Yn.__e(f,i)}s.base=s.__P=null,r.__c=void 0}if(s=r.__k)for(l=0;l<s.length;l++)s[l]&&za(s[l],i,e||"function"!=typeof r.type);e||null==r.__e||Co(r.__e),r.__=r.__e=r.__d=void 0}function lc(r,i,e){return this.constructor(r,e)}function ys(r,i,e){var s,l,f;Yn.__&&Yn.__(r,i),l=(s="function"==typeof e)?null:e&&e.__k||i.__k,f=[],uo(i,r=(!s&&e||i).__k=Mt(Vr,null,[r]),l||Pl,Pl,void 0!==i.ownerSVGElement,!s&&e?[e]:l?null:i.firstChild?xo.call(i.childNodes):null,f,!s&&e?e:l?l.__e:i.firstChild,s),yu(f,r)}xo=Rl.slice,Yn={__e:function(r,i,e,s){for(var l,f,w;i=i.__;)if((l=i.__c)&&!l.__)try{if((f=l.constructor)&&null!=f.getDerivedStateFromError&&(l.setState(f.getDerivedStateFromError(r)),w=l.__d),null!=l.componentDidCatch&&(l.componentDidCatch(r,s||{}),w=l.__d),w)return l.__E=l}catch(z){r=z}throw r}},Ol=0,ls=function(r){return null!=r&&void 0===r.constructor},Xa=!1,zs.prototype.setState=function(r,i){var e;e=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Us({},this.state),"function"==typeof r&&(r=r(Us({},e),this.props)),r&&Us(e,r),null!=r&&this.__v&&(i&&this._sb.push(i),Ws(this))},zs.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Ws(this))},zs.prototype.render=Vr,wo=[],Or="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vo.__r=0,fl=0;var Kr,gl,cc,Yc=[],Fa=[],bu=Yn.__b,Hc=Yn.__r,xu=Yn.diffed,Uo=Yn.__c,ca=Yn.unmount;function Fl(){for(var r;r=Yc.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(Xo),r.__H.__h.forEach(To),r.__H.__h=[]}catch(i){r.__H.__h=[],Yn.__e(i,r.__v)}}Yn.__b=function(r){Kr=null,bu&&bu(r)},Yn.__r=function(r){Hc&&Hc(r);var i=(Kr=r.__c).__H;i&&(gl===Kr?(i.__h=[],Kr.__h=[],i.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=Fa,e.__N=e.i=void 0})):(i.__h.forEach(Xo),i.__h.forEach(To),i.__h=[])),gl=Kr},Yn.diffed=function(r){xu&&xu(r);var i=r.__c;i&&i.__H&&(i.__H.__h.length&&(1!==Yc.push(i)&&cc===Yn.requestAnimationFrame||((cc=Yn.requestAnimationFrame)||el)(Fl)),i.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==Fa&&(e.__=e.__V),e.i=void 0,e.__V=Fa})),gl=Kr=null},Yn.__c=function(r,i){i.some(function(e){try{e.__h.forEach(Xo),e.__h=e.__h.filter(function(s){return!s.__||To(s)})}catch(s){i.some(function(l){l.__h&&(l.__h=[])}),i=[],Yn.__e(s,e.__v)}}),Uo&&Uo(r,i)},Yn.unmount=function(r){ca&&ca(r);var i,e=r.__c;e&&e.__H&&(e.__H.__.forEach(function(s){try{Xo(s)}catch(l){i=l}}),e.__H=void 0,i&&Yn.__e(i,e.__v))};var Qa="function"==typeof requestAnimationFrame;function el(r){var i,e=function(){clearTimeout(s),Qa&&cancelAnimationFrame(i),setTimeout(r)},s=setTimeout(e,100);Qa&&(i=requestAnimationFrame(e))}function Xo(r){var i=Kr,e=r.__c;"function"==typeof e&&(r.__c=void 0,e()),Kr=i}function To(r){var i=Kr;r.__c=r.__(),Kr=i}function bl(r,i){for(var e in r)if("__source"!==e&&!(e in i))return!0;for(var s in i)if("__source"!==s&&r[s]!==i[s])return!0;return!1}function Na(r){this.props=r}(Na.prototype=new zs).isPureReactComponent=!0,Na.prototype.shouldComponentUpdate=function(r,i){return bl(this.props,r)||bl(this.state,i)};var xl=Yn.__b;Yn.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),xl&&xl(r)},typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref");var m=Yn.__e;Yn.__e=function(r,i,e,s){if(r.then)for(var l,f=i;f=f.__;)if((l=f.__c)&&l.__c)return null==i.__e&&(i.__e=e.__e,i.__k=e.__k),l.__c(r,i);m(r,i,e,s)};var D=Yn.unmount;function G(r,i,e){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(s){"function"==typeof s.__c&&s.__c()}),r.__c.__H=null),null!=(r=function Ro(r,i){for(var e in i)r[e]=i[e];return r}({},r)).__c&&(r.__c.__P===e&&(r.__c.__P=i),r.__c=null),r.__k=r.__k&&r.__k.map(function(s){return G(s,i,e)})),r}function re(r,i,e){return r&&(r.__v=null,r.__k=r.__k&&r.__k.map(function(s){return re(s,i,e)}),r.__c&&r.__c.__P===i&&(r.__e&&e.insertBefore(r.__e,r.__d),r.__c.__e=!0,r.__c.__P=e)),r}function _e(){this.__u=0,this.t=null,this.__b=null}function Ue(r){var i=r.__.__c;return i&&i.__a&&i.__a(r)}function oi(){this.u=null,this.o=null}Yn.unmount=function(r){var i=r.__c;i&&i.__R&&i.__R(),i&&!0===r.__h&&(r.type=null),D&&D(r)},(_e.prototype=new zs).__c=function(r,i){var e=i.__c,s=this;null==s.t&&(s.t=[]),s.t.push(e);var l=Ue(s.__v),f=!1,w=function(){f||(f=!0,e.__R=null,l?l(z):z())};e.__R=w;var z=function(){if(! --s.__u){if(s.state.__a){var ie=s.state.__a;s.__v.__k[0]=re(ie,ie.__c.__P,ie.__c.__O)}var oe;for(s.setState({__a:s.__b=null});oe=s.t.pop();)oe.forceUpdate()}},W=!0===i.__h;s.__u++||W||s.setState({__a:s.__b=s.__v.__k[0]}),r.then(w,w)},_e.prototype.componentWillUnmount=function(){this.t=[]},_e.prototype.render=function(r,i){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=G(this.__b,e,s.__O=s.__P)}this.__b=null}var l=i.__a&&Mt(Vr,null,r.fallback);return l&&(l.__h=null),[Mt(Vr,null,i.__a?null:r.children),l]};var ki=function(r,i,e){if(++e[1]===e[0]&&r.o.delete(i),r.props.revealOrder&&("t"!==r.props.revealOrder[0]||!r.o.size))for(e=r.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;r.u=e=e[2]}};function sn(r){return this.getChildContext=function(){return r.context},r.children}function Dn(r){var i=this,e=r.i;i.componentWillUnmount=function(){ys(null,i.l),i.l=null,i.i=null},i.i&&i.i!==e&&i.componentWillUnmount(),r.__v?(i.l||(i.i=e,i.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(s){this.childNodes.push(s),i.i.appendChild(s)},insertBefore:function(s,l){this.childNodes.push(s),i.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),i.i.removeChild(s)}}),ys(Mt(sn,{context:i.context},r.__v),i.l)):i.l&&i.componentWillUnmount()}(oi.prototype=new zs).__a=function(r){var i=this,e=Ue(i.__v),s=i.o.get(r);return s[0]++,function(l){var f=function(){i.props.revealOrder?(s.push(l),ki(i,r,s)):l()};e?e(f):f()}},oi.prototype.render=function(r){this.u=null,this.o=new Map;var i=jo(r.children);r.revealOrder&&"b"===r.revealOrder[0]&&i.reverse();for(var e=i.length;e--;)this.o.set(i[e],this.u=[1,0,this.u]);return r.children},oi.prototype.componentDidUpdate=oi.prototype.componentDidMount=function(){var r=this;this.o.forEach(function(i,e){ki(r,e,i)})};var mr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Br=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ys=typeof document<"u",io=function(r){return(typeof Symbol<"u"&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(r)};zs.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(zs.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(i){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:i})}})});var Ha=Yn.event;function po(){}function kc(){return this.cancelBubble}function Bl(){return this.defaultPrevented}Yn.event=function(r){return Ha&&(r=Ha(r)),r.persist=po,r.isPropagationStopped=kc,r.isDefaultPrevented=Bl,r.nativeEvent=r};var Nl={configurable:!0,get:function(){return this.class}},Ee=Yn.vnode;Yn.vnode=function(r){var i=r.type,e=r.props,s=e;if("string"==typeof i){var l=-1===i.indexOf("-");for(var f in s={},e){var w=e[f];Ys&&"children"===f&&"noscript"===i||"value"===f&&"defaultValue"in e&&null==w||("defaultValue"===f&&"value"in e&&null==e.value?f="value":"download"===f&&!0===w?w="":/ondoubleclick/i.test(f)?f="ondblclick":/^onchange(textarea|input)/i.test(f+i)&&!io(e.type)?f="oninput":/^onfocus$/i.test(f)?f="onfocusin":/^onblur$/i.test(f)?f="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(f)?f=f.toLowerCase():l&&Br.test(f)?f=f.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===w&&(w=void 0),/^oninput$/i.test(f)&&(f=f.toLowerCase(),s[f]&&(f="oninputCapture")),s[f]=w)}"select"==i&&s.multiple&&Array.isArray(s.value)&&(s.value=jo(e.children).forEach(function(z){z.props.selected=-1!=s.value.indexOf(z.props.value)})),"select"==i&&null!=s.defaultValue&&(s.value=jo(e.children).forEach(function(z){z.props.selected=s.multiple?-1!=s.defaultValue.indexOf(z.props.value):s.defaultValue==z.props.value})),r.props=s,e.class!=e.className&&(Nl.enumerable="className"in e,null!=e.className&&(s.class=e.className),Object.defineProperty(s,"className",Nl))}r.$$typeof=mr,Ee&&Ee(r)};var J=Yn.__r;Yn.__r=function(r){J&&J(r)};const wl=[],da=new Map;function Hl(r){wl.push(r),da.forEach(i=>{jd(i,r)})}function Sn(r){let i=da.get(r);if(!i||!i.isConnected){if(i=r.querySelector("style[data-fullcalendar]"),!i){i=document.createElement("style"),i.setAttribute("data-fullcalendar","");const e=function Vc(){return void 0===uc&&(uc=function yn(){const r=document.querySelector('meta[name="csp-nonce"]');if(r&&r.hasAttribute("content"))return r.getAttribute("content");const i=document.querySelector("script[nonce]");return i&&i.nonce||""}()),uc}();e&&(i.nonce=e);const s=r===document?document.head:r,l=r===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(i,l)}da.set(r,i),function Rh(r){for(const i of wl)jd(r,i)}(i)}}function jd(r,i){const{sheet:e}=r,s=e.cssRules.length;i.split("}").forEach((l,f)=>{(l=l.trim())&&e.insertRule(l+"}",s+f)})}let uc;typeof document<"u"&&Sn(document),Hl(':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}');class zh{constructor(i){this.drainedOption=i,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(i){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==i?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),i))}pause(i=""){let{pauseDepths:e}=this;e[i]=(e[i]||0)+1,this.clearTimeout()}resume(i="",e){let{pauseDepths:s}=this;i in s&&(e?delete s[i]:(s[i]-=1,s[i]<=0&&delete s[i]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Ud(r){r.parentNode&&r.parentNode.removeChild(r)}function ko(r,i){if(r.closest)return r.closest(i);if(!document.documentElement.contains(r))return null;do{if(Wd(r,i))return r;r=r.parentElement||r.parentNode}while(null!==r&&1===r.nodeType);return null}function Wd(r,i){return(r.matches||r.matchesSelector||r.msMatchesSelector).call(r,i)}const nl=/(top|left|right|bottom|width|height)$/i;function Mc(r,i){for(let e in i)$d(r,e,i[e])}function $d(r,i,e){r.style[i]=null==e?"":"number"==typeof e&&nl.test(i)?`${e}px`:e}function Xd(r){var i,e;return null!==(e=null===(i=r.composedPath)||void 0===i?void 0:i.call(r)[0])&&void 0!==e?e:r.target}let wu=0;function C(){return wu+=1,"fc-dom-"+wu}function d(r){r.preventDefault()}function T(r,i,e,s){let l=function g(r,i){return e=>{let s=ko(e.target,r);s&&i.call(s,e,s)}}(e,s);return r.addEventListener(i,l),()=>{r.removeEventListener(i,l)}}const B=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function K(r){return Object.assign({onClick:r},te(r))}function te(r){return{tabIndex:0,onKeyDown(i){("Enter"===i.key||" "===i.key)&&(r(i),i.preventDefault())}}}let he=0;function ue(){return he+=1,String(he)}function Ce(){document.body.classList.add("fc-not-allowed")}function Ve(){document.body.classList.remove("fc-not-allowed")}function bt(r,i,e){return e.func?e.func(r,i):function xt(r,i){return r||i?null==i?-1:null==r?1:"string"==typeof r||"string"==typeof i?String(r).localeCompare(String(i)):r-i:0}(r[e.field],i[e.field])*(e.order||1)}function Ht(r,i){let e=String(r);return"000".substr(0,i-e.length)+e}function Gt(r,i,e){return"function"==typeof r?r(...i):"string"==typeof r?i.reduce((s,l,f)=>s.replace("$"+f,l||""),r):e}function Ut(r,i){return r-i}function ti(r){return r%1==0}function Qt(r){let i=r.querySelector(".fc-scrollgrid-shrink-frame"),e=r.querySelector(".fc-scrollgrid-shrink-cushion");if(!i)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!e)throw new Error("needs fc-scrollgrid-shrink-cushion className");return r.getBoundingClientRect().width-i.getBoundingClientRect().width+e.getBoundingClientRect().width}const gi=["years","months","days","milliseconds"],Ji=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Zt(r,i){return"string"==typeof r?function Oi(r){let i=Ji.exec(r);if(i){let e=i[1]?-1:1;return{years:0,months:0,days:e*(i[2]?parseInt(i[2],10):0),milliseconds:e*(60*(i[3]?parseInt(i[3],10):0)*60*1e3+60*(i[4]?parseInt(i[4],10):0)*1e3+1e3*(i[5]?parseInt(i[5],10):0)+(i[6]?parseInt(i[6],10):0))}}return null}(r):"object"==typeof r&&r?yi(r):"number"==typeof r?yi({[i||"milliseconds"]:r}):null}function yi(r){let i={years:r.years||r.year||0,months:r.months||r.month||0,days:r.days||r.day||0,milliseconds:60*(r.hours||r.hour||0)*60*1e3+60*(r.minutes||r.minute||0)*1e3+1e3*(r.seconds||r.second||0)+(r.milliseconds||r.millisecond||r.ms||0)},e=r.weeks||r.week;return e&&(i.days+=7*e,i.specifiedWeeks=!0),i}function Ii(r,i){return{years:r.years+i.years,months:r.months+i.months,days:r.days+i.days,milliseconds:r.milliseconds+i.milliseconds}}function nr(r){return Zn(r)/864e5}function Zn(r){return 31536e6*r.years+2592e6*r.months+864e5*r.days+r.milliseconds}function tr(r,i){let e=null;for(let s=0;s<gi.length;s+=1){let l=gi[s];if(i[l]){let f=r[l]/i[l];if(!ti(f)||null!==e&&e!==f)return null;e=f}else if(r[l])return null}return e}function zn(r){let i=r.milliseconds;if(i){if(i%1e3!=0)return{unit:"millisecond",value:i};if(i%6e4!=0)return{unit:"second",value:i/1e3};if(i%36e5!=0)return{unit:"minute",value:i/6e4};if(i)return{unit:"hour",value:i/36e5}}return r.days?r.specifiedWeeks&&r.days%7==0?{unit:"week",value:r.days/7}:{unit:"day",value:r.days}:r.months?{unit:"month",value:r.months}:r.years?{unit:"year",value:r.years}:{unit:"millisecond",value:0}}function Ur(r,i,e){if(r===i)return!0;let l,s=r.length;if(s!==i.length)return!1;for(l=0;l<s;l+=1)if(!(e?e(r[l],i[l]):r[l]===i[l]))return!1;return!0}const ms=["sun","mon","tue","wed","thu","fri","sat"];function gs(r,i){let e=Va(r);return e[2]+=7*i,is(e)}function cs(r,i){let e=Va(r);return e[2]+=i,is(e)}function Ls(r,i){let e=Va(r);return e[6]+=i,is(e)}function qo(r,i){return(i.valueOf()-r.valueOf())/864e5}function xs(r,i){return Eu(r)===Eu(i)?Math.round(qo(r,i)):null}function jr(r){return is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()])}function El(r,i,e,s){let l=is([i,0,1+Gc(i,e,s)]),f=jr(r),w=Math.round(qo(l,f));return Math.floor(w/7)+1}function Gc(r,i,e){let s=7+i-e;return-(7+is([r,0,s]).getUTCDay()-i)%7+s-1}function qu(r){return[r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()]}function jc(r){return new Date(r[0],r[1]||0,null==r[2]?1:r[2],r[3]||0,r[4]||0,r[5]||0)}function Va(r){return[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()]}function is(r){return 1===r.length&&(r=r.concat([0])),new Date(Date.UTC(...r))}function Ep(r){return!isNaN(r.valueOf())}function Eu(r){return 1e3*r.getUTCHours()*60*60+1e3*r.getUTCMinutes()*60+1e3*r.getUTCSeconds()+r.getUTCMilliseconds()}function Fh(r,i,e=!1){let s=r.toISOString();return s=s.replace(".000",""),e&&(s=s.replace("T00:00:00Z","")),s.length>10&&(null==i?s=s.replace("Z",""):0!==i&&(s=s.replace("Z",_d(i,!0)))),s}function Su(r){return r.toISOString().replace(/T.*$/,"")}function Sp(r){return Ht(r.getUTCHours(),2)+":"+Ht(r.getUTCMinutes(),2)+":"+Ht(r.getUTCSeconds(),2)}function _d(r,i=!1){let e=r<0?"-":"+",s=Math.abs(r),l=Math.floor(s/60),f=Math.round(s%60);return i?`${e+Ht(l,2)}:${Ht(f,2)}`:`GMT${e}${l}${f?`:${Ht(f,2)}`:""}`}function Qn(r,i,e){let s,l;return function(...f){if(s){if(!Ur(s,f)){e&&e(l);let w=r.apply(this,f);(!i||!i(w,l))&&(l=w)}}else l=r.apply(this,f);return s=f,l}}function Ku(r,i,e){let s,l;return f=>{if(s){if(!Ga(s,f)){e&&e(l);let w=r.call(this,f);(!i||!i(w,l))&&(l=w)}}else l=r.call(this,f);return s=f,l}}const Ff={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},Bh={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Nh=/\s*([ap])\.?m\.?/i,Tp=/,/g,Zd=/\s+/g,yd=/\u200e/g,Uc=/UTC|GMT/;class zo{constructor(i){let e={},s={},l=0;for(let f in i)f in Ff?(s[f]=i[f],l=Math.max(Ff[f],l)):(e[f]=i[f],f in Bh&&(l=Math.max(Bh[f],l)));this.standardDateProps=e,this.extendedSettings=s,this.severity=l,this.buildFormattingFunc=Qn(Wc)}format(i,e){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,e)(i)}formatRange(i,e,s,l){let{standardDateProps:f,extendedSettings:w}=this,z=function Mp(r,i,e){return e.getMarkerYear(r)!==e.getMarkerYear(i)?5:e.getMarkerMonth(r)!==e.getMarkerMonth(i)?4:e.getMarkerDay(r)!==e.getMarkerDay(i)?2:Eu(r)!==Eu(i)?1:0}(i.marker,e.marker,s.calendarSystem);if(!z)return this.format(i,s);let W=z;W>1&&("numeric"===f.year||"2-digit"===f.year)&&("numeric"===f.month||"2-digit"===f.month)&&("numeric"===f.day||"2-digit"===f.day)&&(W=1);let ie=this.format(i,s),oe=this.format(e,s);if(ie===oe)return ie;let Re=function Mu(r,i){let e={};for(let s in r)(!(s in Bh)||Bh[s]<=i)&&(e[s]=r[s]);return e}(f,W),je=Wc(Re,w,s),Ye=je(i),Wt=je(e),$t=function sg(r,i,e,s){let l=0;for(;l<r.length;){let f=r.indexOf(i,l);if(-1===f)break;let w=r.substr(0,f);l=f+i.length;let z=r.substr(l),W=0;for(;W<e.length;){let ie=e.indexOf(s,W);if(-1===ie)break;let oe=e.substr(0,ie);W=ie+s.length;let Re=e.substr(W);if(w===oe&&z===Re)return{before:w,after:z}}}return null}(ie,Ye,oe,Wt),ci=w.separator||l||s.defaultSeparator||"";return $t?$t.before+Ye+ci+Wt+$t.after:ie+ci+oe}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Wc(r,i,e){let s=Object.keys(r).length;return 1===s&&"short"===r.timeZoneName?l=>_d(l.timeZoneOffset):0===s&&i.week?l=>function kp(r,i,e,s,l){let f=[];return"long"===l?f.push(e):("short"===l||"narrow"===l)&&f.push(i),("long"===l||"short"===l)&&f.push(" "),f.push(s.simpleNumberFormat.format(r)),"rtl"===s.options.direction&&f.reverse(),f.join("")}(e.computeWeekNumber(l.marker),e.weekText,e.weekTextLong,e.locale,i.week):function Tu(r,i,e){r=Object.assign({},r),i=Object.assign({},i),function ku(r,i){r.timeZoneName&&(r.hour||(r.hour="2-digit"),r.minute||(r.minute="2-digit")),"long"===r.timeZoneName&&(r.timeZoneName="short"),i.omitZeroMinute&&(r.second||r.millisecond)&&delete i.omitZeroMinute}(r,i),r.timeZone="UTC";let l,s=new Intl.DateTimeFormat(e.locale.codes,r);if(i.omitZeroMinute){let f=Object.assign({},r);delete f.minute,l=new Intl.DateTimeFormat(e.locale.codes,f)}return f=>{let z,{marker:w}=f;return z=l&&!w.getUTCMinutes()?l:s,function ng(r,i,e,s,l){return r=r.replace(yd,""),"short"===e.timeZoneName&&(r=function rg(r,i){let e=!1;return r=r.replace(Uc,()=>(e=!0,i)),e||(r+=` ${i}`),r}(r,"UTC"===l.timeZone||null==i.timeZoneOffset?"UTC":_d(i.timeZoneOffset))),s.omitCommas&&(r=r.replace(Tp,"").trim()),s.omitZeroMinute&&(r=r.replace(":00","")),!1===s.meridiem?r=r.replace(Nh,"").trim():"narrow"===s.meridiem?r=r.replace(Nh,(f,w)=>w.toLocaleLowerCase()):"short"===s.meridiem?r=r.replace(Nh,(f,w)=>`${w.toLocaleLowerCase()}m`):"lowercase"===s.meridiem&&(r=r.replace(Nh,f=>f.toLocaleLowerCase())),r=(r=r.replace(Zd," ")).trim()}(z.format(w),f,r,i,e)}}(r,i,e)}function Sl(r,i){let e=i.markerToArray(r.marker);return{marker:r.marker,timeZoneOffset:r.timeZoneOffset,array:e,year:e[0],month:e[1],day:e[2],hour:e[3],minute:e[4],second:e[5],millisecond:e[6]}}function qd(r,i,e,s){let l=Sl(r,e.calendarSystem);return{date:l,start:l,end:i?Sl(i,e.calendarSystem):null,timeZone:e.timeZone,localeCodes:e.locale.codes,defaultSeparator:s||e.defaultSeparator}}class Bf{constructor(i){this.cmdStr=i}format(i,e,s){return e.cmdFormatter(this.cmdStr,qd(i,null,e,s))}formatRange(i,e,s,l){return s.cmdFormatter(this.cmdStr,qd(i,e,s,l))}}class Xs{constructor(i){this.func=i}format(i,e,s){return this.func(qd(i,null,e,s))}formatRange(i,e,s,l){return this.func(qd(i,e,s,l))}}function hn(r){return"object"==typeof r&&r?new zo(r):"string"==typeof r?new Bf(r):"function"==typeof r?new Xs(r):null}const Ac={navLinkDayClick:Ai,navLinkWeekClick:Ai,duration:Zt,bootstrapFontAwesome:Ai,buttonIcons:Ai,customButtons:Ai,defaultAllDayEventDuration:Zt,defaultTimedEventDuration:Zt,nextDayThreshold:Zt,scrollTime:Zt,scrollTimeReset:Boolean,slotMinTime:Zt,slotMaxTime:Zt,dayPopoverFormat:hn,slotDuration:Zt,snapDuration:Zt,headerToolbar:Ai,footerToolbar:Ai,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:hn,dayHeaderClassNames:Ai,dayHeaderContent:Ai,dayHeaderDidMount:Ai,dayHeaderWillUnmount:Ai,dayCellClassNames:Ai,dayCellContent:Ai,dayCellDidMount:Ai,dayCellWillUnmount:Ai,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Ai,weekNumbers:Boolean,weekNumberClassNames:Ai,weekNumberContent:Ai,weekNumberDidMount:Ai,weekNumberWillUnmount:Ai,editable:Boolean,viewClassNames:Ai,viewDidMount:Ai,viewWillUnmount:Ai,nowIndicator:Boolean,nowIndicatorClassNames:Ai,nowIndicatorContent:Ai,nowIndicatorDidMount:Ai,nowIndicatorWillUnmount:Ai,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Ai,locale:Ai,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Ai,eventOrder:function Te(r){let s,l,i=[],e=[];for("string"==typeof r?e=r.split(/\s*,\s*/):"function"==typeof r?e=[r]:Array.isArray(r)&&(e=r),s=0;s<e.length;s+=1)l=e[s],"string"==typeof l?i.push("-"===l.charAt(0)?{field:l.substring(1),order:-1}:{field:l,order:1}):"function"==typeof l&&i.push({func:l});return i},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Ai,contentHeight:Ai,direction:String,weekNumberFormat:hn,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Ai,initialDate:Ai,now:Ai,eventDataTransform:Ai,stickyHeaderDates:Ai,stickyFooterScrollbar:Ai,viewHeight:Ai,defaultAllDay:Boolean,eventSourceFailure:Ai,eventSourceSuccess:Ai,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Ai,eventConstraint:Ai,eventAllow:Ai,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Ai,eventContent:Ai,eventDidMount:Ai,eventWillUnmount:Ai,selectConstraint:Ai,selectOverlap:Ai,selectAllow:Ai,droppable:Boolean,unselectCancel:String,slotLabelFormat:Ai,slotLaneClassNames:Ai,slotLaneContent:Ai,slotLaneDidMount:Ai,slotLaneWillUnmount:Ai,slotLabelClassNames:Ai,slotLabelContent:Ai,slotLabelDidMount:Ai,slotLabelWillUnmount:Ai,dayMaxEvents:Ai,dayMaxEventRows:Ai,dayMinWidth:Number,slotLabelInterval:Zt,allDayText:String,allDayClassNames:Ai,allDayContent:Ai,allDayDidMount:Ai,allDayWillUnmount:Ai,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:hn,rerenderDelay:Number,moreLinkText:Ai,moreLinkHint:Ai,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Ai,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Zt,hiddenDays:Ai,fixedWeekCount:Boolean,validRange:Ai,visibleRange:Ai,titleFormat:Ai,eventInteractive:Boolean,noEventsText:String,viewHint:Ai,navLinkHint:Ai,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Ai,moreLinkClassNames:Ai,moreLinkContent:Ai,moreLinkDidMount:Ai,moreLinkWillUnmount:Ai,monthStartFormat:hn,handleCustomRendering:Ai,customRenderingMetaMap:Ai,customRenderingReplaces:Boolean},hc={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},pa={datesSet:Ai,eventsSet:Ai,eventAdd:Ai,eventChange:Ai,eventRemove:Ai,windowResize:Ai,eventClick:Ai,eventMouseEnter:Ai,eventMouseLeave:Ai,select:Ai,unselect:Ai,loading:Ai,_unmount:Ai,_beforeprint:Ai,_afterprint:Ai,_noEventDrop:Ai,_noEventResize:Ai,_resize:Ai,_scrollRequest:Ai},Yh={buttonText:Ai,buttonHints:Ai,views:Ai,plugins:Ai,initialEvents:Ai,events:Ai,eventSources:Ai},$c={headerToolbar:Ko,footerToolbar:Ko,buttonText:Ko,buttonHints:Ko,buttonIcons:Ko,dateIncrement:Ko,plugins:bd,events:bd,eventSources:bd,resources:bd};function Ko(r,i){return"object"==typeof r&&"object"==typeof i&&r&&i?Ga(r,i):r===i}function bd(r,i){return Array.isArray(r)&&Array.isArray(i)?Ur(r,i):r===i}const Ju={type:String,component:Ai,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Ai,usesMinMaxTime:Boolean,classNames:Ai,content:Ai,didMount:Ai,willUnmount:Ai};function Au(r){return Hh(r,$c)}function Tl(r,i){let e={},s={};for(let l in i)l in r&&(e[l]=i[l](r[l]));for(let l in r)l in i||(s[l]=r[l]);return{refined:e,extra:s}}function Ai(r){return r}const{hasOwnProperty:Qu}=Object.prototype;function Hh(r,i){let e={};if(i)for(let s in i)if(i[s]===Ko){let l=[];for(let f=r.length-1;f>=0;f-=1){let w=r[f][s];if("object"==typeof w&&w)l.unshift(w);else if(void 0!==w){e[s]=w;break}}l.length&&(e[s]=Hh(l))}for(let s=r.length-1;s>=0;s-=1){let l=r[s];for(let f in l)f in e||(e[f]=l[f])}return e}function Xc(r,i){let e={};for(let s in r)i(r[s],s)&&(e[s]=r[s]);return e}function Zc(r,i){let e={};for(let s in r)e[s]=i(r[s],s);return e}function Kd(r){let i={};for(let e of r)i[e]=!0;return i}function Jd(r){let i=[];for(let e in r)i.push(r[e]);return i}function Ga(r,i){if(r===i)return!0;for(let e in r)if(Qu.call(r,e)&&!(e in i))return!1;for(let e in i)if(Qu.call(i,e)&&r[e]!==i[e])return!1;return!0}const qc=/^on[A-Z]/;function ed(r,i){let e=[];for(let s in r)Qu.call(r,s)&&(s in i||e.push(s));for(let s in i)Qu.call(i,s)&&r[s]!==i[s]&&e.push(s);return e}function Vh(r,i,e={}){if(r===i)return!0;for(let s in i)if(!(s in r)||!fa(r[s],i[s],e[s]))return!1;for(let s in r)if(!(s in i))return!1;return!0}function fa(r,i,e){return r===i||!0===e||!!e&&e(r,i)}let rl={};!function Jc(r,i){rl[r]=i}("gregory",class sl{getMarkerYear(i){return i.getUTCFullYear()}getMarkerMonth(i){return i.getUTCMonth()}getMarkerDay(i){return i.getUTCDate()}arrayToMarker(i){return is(i)}markerToArray(i){return Va(i)}});const Ap=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;class Nf{constructor(i){let e=this.timeZone=i.timeZone,s="local"!==e&&"UTC"!==e;i.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new i.namedTimeZoneImpl(e)),this.canComputeOffset=!(s&&!this.namedTimeZoneImpl),this.calendarSystem=function ma(r){return new rl[r]}(i.calendarSystem),this.locale=i.locale,this.weekDow=i.locale.week.dow,this.weekDoy=i.locale.week.doy,"ISO"===i.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof i.firstDay&&(this.weekDow=i.firstDay),"function"==typeof i.weekNumberCalculation&&(this.weekNumberFunc=i.weekNumberCalculation),this.weekText=null!=i.weekText?i.weekText:i.locale.options.weekText,this.weekTextLong=(null!=i.weekTextLong?i.weekTextLong:i.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=i.cmdFormatter,this.defaultSeparator=i.defaultSeparator}createMarker(i){let e=this.createMarkerMeta(i);return null===e?null:e.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):is(qu(new Date))}createMarkerMeta(i){if("string"==typeof i)return this.parse(i);let e=null;return"number"==typeof i?e=this.timestampToMarker(i):i instanceof Date?(i=i.valueOf(),isNaN(i)||(e=this.timestampToMarker(i))):Array.isArray(i)&&(e=is(i)),null!==e&&Ep(e)?{marker:e,isTimeUnspecified:!1,forcedTzo:null}:null}parse(i){let e=function Zs(r){let i=Ap.exec(r);if(i){let e=new Date(Date.UTC(Number(i[1]),i[3]?Number(i[3])-1:0,Number(i[5]||1),Number(i[7]||0),Number(i[8]||0),Number(i[10]||0),i[12]?1e3*+`0.${i[12]}`:0));if(Ep(e)){let s=null;return i[13]&&(s=("-"===i[15]?-1:1)*(60*Number(i[16]||0)+Number(i[18]||0))),{marker:e,isTimeUnspecified:!i[6],timeZoneOffset:s}}}return null}(i);if(null===e)return null;let{marker:s}=e,l=null;return null!==e.timeZoneOffset&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-60*e.timeZoneOffset*1e3):l=e.timeZoneOffset),{marker:s,isTimeUnspecified:e.isTimeUnspecified,forcedTzo:l}}getYear(i){return this.calendarSystem.getMarkerYear(i)}getMonth(i){return this.calendarSystem.getMarkerMonth(i)}getDay(i){return this.calendarSystem.getMarkerDay(i)}add(i,e){let s=this.calendarSystem.markerToArray(i);return s[0]+=e.years,s[1]+=e.months,s[2]+=e.days,s[6]+=e.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(i,e){let s=this.calendarSystem.markerToArray(i);return s[0]-=e.years,s[1]-=e.months,s[2]-=e.days,s[6]-=e.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(i,e){let s=this.calendarSystem.markerToArray(i);return s[0]+=e,this.calendarSystem.arrayToMarker(s)}addMonths(i,e){let s=this.calendarSystem.markerToArray(i);return s[1]+=e,this.calendarSystem.arrayToMarker(s)}diffWholeYears(i,e){let{calendarSystem:s}=this;return Eu(i)===Eu(e)&&s.getMarkerDay(i)===s.getMarkerDay(e)&&s.getMarkerMonth(i)===s.getMarkerMonth(e)?s.getMarkerYear(e)-s.getMarkerYear(i):null}diffWholeMonths(i,e){let{calendarSystem:s}=this;return Eu(i)===Eu(e)&&s.getMarkerDay(i)===s.getMarkerDay(e)?s.getMarkerMonth(e)-s.getMarkerMonth(i)+12*(s.getMarkerYear(e)-s.getMarkerYear(i)):null}greatestWholeUnit(i,e){let s=this.diffWholeYears(i,e);return null!==s?{unit:"year",value:s}:(s=this.diffWholeMonths(i,e),null!==s?{unit:"month",value:s}:(s=function Ma(r,i){let e=xs(r,i);return null!==e&&e%7==0?e/7:null}(i,e),null!==s?{unit:"week",value:s}:(s=xs(i,e),null!==s?{unit:"day",value:s}:(s=function Os(r,i){return(i.valueOf()-r.valueOf())/36e5}(i,e),ti(s)?{unit:"hour",value:s}:(s=function qr(r,i){return(i.valueOf()-r.valueOf())/6e4}(i,e),ti(s)?{unit:"minute",value:s}:(s=function Jr(r,i){return(i.valueOf()-r.valueOf())/1e3}(i,e),ti(s)?{unit:"second",value:s}:{unit:"millisecond",value:e.valueOf()-i.valueOf()}))))))}countDurationsBetween(i,e,s){let l;return s.years&&(l=this.diffWholeYears(i,e),null!==l)?l/function Ki(r){return nr(r)/365}(s):s.months&&(l=this.diffWholeMonths(i,e),null!==l)?l/function Hn(r){return nr(r)/30}(s):s.days&&(l=xs(i,e),null!==l)?l/nr(s):(e.valueOf()-i.valueOf())/Zn(s)}startOf(i,e){return"year"===e?this.startOfYear(i):"month"===e?this.startOfMonth(i):"week"===e?this.startOfWeek(i):"day"===e?jr(i):"hour"===e?function Cu(r){return is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours()])}(i):"minute"===e?function Cl(r){return is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes()])}(i):"second"===e?function Vl(r){return is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()])}(i):null}startOfYear(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i)])}startOfMonth(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i),this.calendarSystem.getMarkerMonth(i)])}startOfWeek(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i),this.calendarSystem.getMarkerMonth(i),i.getUTCDate()-(i.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(i){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(i)):function dc(r,i,e){let s=r.getUTCFullYear(),l=El(r,s,i,e);if(l<1)return El(r,s-1,i,e);let f=El(r,s+1,i,e);return f>=1?Math.min(l,f):l}(i,this.weekDow,this.weekDoy)}format(i,e,s={}){return e.format({marker:i,timeZoneOffset:null!=s.forcedTzo?s.forcedTzo:this.offsetForMarker(i)},this)}formatRange(i,e,s,l={}){return l.isEndExclusive&&(e=Ls(e,-1)),s.formatRange({marker:i,timeZoneOffset:null!=l.forcedStartTzo?l.forcedStartTzo:this.offsetForMarker(i)},{marker:e,timeZoneOffset:null!=l.forcedEndTzo?l.forcedEndTzo:this.offsetForMarker(e)},this,l.defaultSeparator)}formatIso(i,e={}){let s=null;return e.omitTimeZoneOffset||(s=null!=e.forcedTzo?e.forcedTzo:this.offsetForMarker(i)),Fh(i,s,e.omitTime)}timestampToMarker(i){return"local"===this.timeZone?is(qu(new Date(i))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?is(this.namedTimeZoneImpl.timestampToArray(i)):new Date(i)}offsetForMarker(i){return"local"===this.timeZone?-jc(Va(i)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Va(i)):null}toDate(i,e){return"local"===this.timeZone?jc(Va(i)):"UTC"===this.timeZone?new Date(i.valueOf()):this.namedTimeZoneImpl?new Date(i.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(Va(i))*60):new Date(i.valueOf()-(e||0))}}class Qc{constructor(i){this.iconOverrideOption&&this.setIconOverride(i[this.iconOverrideOption])}setIconOverride(i){let e,s;if("object"==typeof i&&i){for(s in e=Object.assign({},this.iconClasses),i)e[s]=this.applyIconOverridePrefix(i[s]);this.iconClasses=e}else!1===i&&(this.iconClasses={})}applyIconOverridePrefix(i){let e=this.iconOverridePrefix;return e&&0!==i.indexOf(e)&&(i=e+i),i}getClass(i){return this.classes[i]||""}getIconClass(i,e){let s;return s=e&&this.rtlIconClasses&&this.rtlIconClasses[i]||this.iconClasses[i],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(i){let e;return this.iconOverrideCustomButtonOption&&(e=i[this.iconOverrideCustomButtonOption],e)?`${this.baseIconClass} ${this.applyIconOverridePrefix(e)}`:""}}function ol(r){r();let i=Yn.debounceRendering,e=[];for(Yn.debounceRendering=function s(l){e.push(l)},ys(Mt(og,{}),document.createElement("div"));e.length;)e.shift()();Yn.debounceRendering=i}Qc.prototype.classes={},Qc.prototype.iconClasses={},Qc.prototype.baseIconClass="",Qc.prototype.iconOverridePrefix="";class og extends zs{render(){return Mt("div",{})}componentDidMount(){this.setState({})}}function Yf(r){let i=function Oo(r,i){var e={__c:i="__cC"+fl++,__:r,Consumer:function(s,l){return s.children(l)},Provider:function(s){var l,f;return this.getChildContext||(l=[],(f={})[i]=this,this.getChildContext=function(){return f},this.shouldComponentUpdate=function(w){this.props.value!==w.value&&l.some(function(z){z.__e=!0,Ws(z)})},this.sub=function(w){l.push(w);var z=w.componentWillUnmount;w.componentWillUnmount=function(){l.splice(l.indexOf(w),1),z&&z.call(w)}}),s.children}};return e.Provider.__=e.Consumer.contextType=e}(r),e=i.Provider;return i.Provider=function(){let s=!this.getChildContext,l=e.apply(this,arguments);if(s){let f=[];this.shouldComponentUpdate=w=>{this.props.value!==w.value&&f.forEach(z=>{z.context=w.value,z.forceUpdate()})},this.sub=w=>{f.push(w);let z=w.componentWillUnmount;w.componentWillUnmount=()=>{f.splice(f.indexOf(w),1),z&&z.call(w)}}}return l},i}class Hf{constructor(i,e,s,l){this.execFunc=i,this.emitter=e,this.scrollTime=s,this.scrollTimeReset=l,this.handleScrollRequest=f=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},f),this.drain()},e.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(i){i&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Dc=Yf({});function td(r,i,e,s,l,f,w,z,W,ie,oe,Re,je){return{dateEnv:l,options:e,pluginHooks:w,emitter:ie,dispatch:z,getCurrentData:W,calendarApi:oe,viewSpec:r,viewApi:i,dateProfileGenerator:s,theme:f,isRtl:"rtl"===e.direction,addResizeHandler(Ye){ie.on("_resize",Ye)},removeResizeHandler(Ye){ie.off("_resize",Ye)},createScrollResponder:Ye=>new Hf(Ye,ie,Zt(e.scrollTime),e.scrollTimeReset),registerInteractiveComponent:Re,unregisterInteractiveComponent:je}}let Qd=(()=>{class r extends zs{shouldComponentUpdate(e,s){return this.debug&&console.log(ed(e,this.props),ed(s,this.state)),!Vh(this.props,e,this.propEquality)||!Vh(this.state,s,this.stateEquality)}safeSetState(e){Vh(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}return r.addPropsEquality=Vf,r.addStateEquality=Gf,r.contextType=Dc,r})();Qd.prototype.propEquality={},Qd.prototype.stateEquality={};let vs=(()=>{class r extends Qd{}return r.contextType=Dc,r})();function Vf(r){let i=Object.create(this.prototype.propEquality);Object.assign(i,r),this.prototype.propEquality=i}function Gf(r){let i=Object.create(this.prototype.stateEquality);Object.assign(i,r),this.prototype.stateEquality=i}function eu(r,i){"function"==typeof r?r(i):r&&(r.current=i)}class Dp extends vs{constructor(){super(...arguments),this.id=ue(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=i=>{const{options:e}=this.context,{generatorName:s}=this.props;(!e.customRenderingReplaces||!Gh(s,e))&&this.updateElRef(i)},this.updateElRef=i=>{this.props.elRef&&eu(this.props.elRef,i)}}render(){const{props:i,context:e}=this,{options:s}=e,{customGenerator:l,defaultGenerator:f,renderProps:w}=i,z=Ip(i,[],this.handleEl);let ie,Re,W=!1,oe=[];if(null!=l){const je="function"==typeof l?l(w,Mt):l;if(!0===je)W=!0;else{const Ye=je&&"object"==typeof je;Ye&&"html"in je?z.dangerouslySetInnerHTML={__html:je.html}:Ye&&"domNodes"in je?oe=Array.prototype.slice.call(je.domNodes):(Ye?ls(je):"function"!=typeof je)?ie=je:Re=je}}else W=!Gh(i.generatorName,s);return W&&f&&(ie=f(w)),this.queuedDomNodes=oe,this.currentGeneratorMeta=Re,Mt(i.elTag,z,ie)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(i){var e;const{props:s,context:l}=this,{handleCustomRendering:f,customRenderingMetaMap:w}=l.options;if(f){const z=null!==(e=this.currentGeneratorMeta)&&void 0!==e?e:w?.[s.generatorName];z&&f(Object.assign(Object.assign({id:this.id,isActive:i,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:z},s),{elClasses:(s.elClasses||[]).filter(eh)}))}}applyQueueudDomNodes(){const{queuedDomNodes:i,currentDomNodes:e}=this,s=this.base;if(!Ur(i,e)){e.forEach(Ud);for(let l of i)s.appendChild(l);this.currentDomNodes=i}}}function Gh(r,i){var e;return!!(i.handleCustomRendering&&r&&null!==(e=i.customRenderingMetaMap)&&void 0!==e&&e[r])}function Ip(r,i,e){const s=Object.assign(Object.assign({},r.elAttrs),{ref:e});return(r.elClasses||i)&&(s.className=(r.elClasses||[]).concat(i||[]).concat(s.className||[]).filter(Boolean).join(" ")),r.elStyle&&(s.style=r.elStyle),s}function eh(r){return!!r}Dp.addPropsEquality({elClasses:Ur,elStyle:Ga,elAttrs:function Kc(r,i){const e=ed(r,i);for(let s of e)if(!qc.test(s))return!1;return!0},renderProps:Ga});const jh=Yf(0);let ga=(()=>{class r extends zs{constructor(){super(...arguments),this.InnerContent=Uh.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(eu(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,s=function Aa(r,i){const e="function"==typeof r?r(i):r||[];return"string"==typeof e?[e]:e}(e.classNameGenerator,e.renderProps);if(e.children){const l=Ip(e,s,this.handleEl),f=e.children(this.InnerContent,e.renderProps,l);return e.elTag?Mt(e.elTag,l,f):f}return Mt(Dp,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(s),renderId:this.context}))}componentDidMount(){var e,s;this.el?null===(s=(e=this.props).didMount)||void 0===s||s.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,s;null===(s=(e=this.props).willUnmount)||void 0===s||s.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}return r.contextType=jh,r})();function Uh(r,i){const e=r.props;return Mt(Dp,Object.assign({renderProps:e.renderProps,generatorName:e.generatorName,customGenerator:e.customGenerator,defaultGenerator:e.defaultGenerator,renderId:r.context},i))}class id extends vs{render(){let{props:i,context:e}=this,{options:s}=e,l={view:e.viewApi};return Mt(ga,Object.assign({},i,{elTag:i.elTag||"div",elClasses:[...Lp(i.viewSpec),...i.elClasses||[]],renderProps:l,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount}),()=>i.children)}}function Lp(r){return[`fc-${r.type}-view`,"fc-view"]}function jf(r,i){let l,f,e=[],{start:s}=i;for(r.sort(nd),l=0;l<r.length;l+=1)f=r[l],f.start>s&&e.push({start:s,end:f.start}),f.end>s&&(s=f.end);return s<i.end&&e.push({start:s,end:i.end}),e}function nd(r,i){return r.start.valueOf()-i.start.valueOf()}function Gl(r,i){let{start:e,end:s}=r,l=null;return null!==i.start&&(e=null===e?i.start:new Date(Math.max(e.valueOf(),i.start.valueOf()))),null!=i.end&&(s=null===s?i.end:new Date(Math.min(s.valueOf(),i.end.valueOf()))),(null===e||null===s||e<s)&&(l={start:e,end:s}),l}function al(r,i){return(null===r.end||null===i.start||r.end>i.start)&&(null===r.start||null===i.end||r.start<i.end)}function Wh(r,i){return(null===r.start||null!==i.start&&i.start>=r.start)&&(null===r.end||null!==i.end&&i.end<=r.end)}function Ul(r,i){return(null===r.start||i>=r.start)&&(null===r.end||i<r.end)}function Wf(r){let i=Math.floor(qo(r.start,r.end))||1,e=jr(r.start);return{start:e,end:cs(e,i)}}function th(r,i=Zt(0)){let e=null,s=null;if(r.end){s=jr(r.end);let l=r.end.valueOf()-s.valueOf();l&&l>=Zn(i)&&(s=cs(s,1))}return r.start&&(e=jr(r.start),s&&s<=e&&(s=cs(e,1))),{start:e,end:s}}function Wl(r,i,e,s){return"year"===s?Zt(e.diffWholeYears(r,i),"year"):"month"===s?Zt(e.diffWholeMonths(r,i),"month"):function Ps(r,i){let e=jr(r),s=jr(i);return{years:0,months:0,days:Math.round(qo(e,s)),milliseconds:i.valueOf()-s.valueOf()-(r.valueOf()-e.valueOf())}}(r,i)}function ih(r,i){return"function"==typeof r&&(r=r()),null==r?i.createNowMarker():i.createMarker(r)}class nh{constructor(i){this.props=i,this.nowDate=ih(i.nowInput,i.dateEnv),this.initHiddenDays()}buildPrev(i,e,s){let{dateEnv:l}=this.props,f=l.subtract(l.startOf(e,i.currentRangeUnit),i.dateIncrement);return this.build(f,-1,s)}buildNext(i,e,s){let{dateEnv:l}=this.props,f=l.add(l.startOf(e,i.currentRangeUnit),i.dateIncrement);return this.build(f,1,s)}build(i,e,s=!0){let f,w,z,W,ie,oe,{props:l}=this;return f=this.buildValidRange(),f=this.trimHiddenDays(f),s&&(i=function Uf(r,i){return null!=i.start&&r<i.start?i.start:null!=i.end&&r>=i.end?new Date(i.end.valueOf()-1):r}(i,f)),w=this.buildCurrentRangeInfo(i,e),z=/^(year|month|week|day)$/.test(w.unit),W=this.buildRenderRange(this.trimHiddenDays(w.range),w.unit,z),W=this.trimHiddenDays(W),ie=W,l.showNonCurrentDates||(ie=Gl(ie,w.range)),ie=this.adjustActiveRange(ie),ie=Gl(ie,f),oe=al(w.range,f),Ul(W,i)||(i=W.start),{currentDate:i,validRange:f,currentRange:w.range,currentRangeUnit:w.unit,isRangeAllDay:z,activeRange:ie,renderRange:W,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,isValid:oe,dateIncrement:this.buildDateIncrement(w.duration)}}buildValidRange(){let i=this.props.validRangeInput,e="function"==typeof i?i.call(this.props.calendarApi,this.nowDate):i;return this.refineRange(e)||{start:null,end:null}}buildCurrentRangeInfo(i,e){let z,{props:s}=this,l=null,f=null,w=null;return s.duration?(l=s.duration,f=s.durationUnit,w=this.buildRangeFromDuration(i,e,l,f)):(z=this.props.dayCount)?(f="day",w=this.buildRangeFromDayCount(i,e,z)):(w=this.buildCustomVisibleRange(i))?f=s.dateEnv.greatestWholeUnit(w.start,w.end).unit:(l=this.getFallbackDuration(),f=zn(l).unit,w=this.buildRangeFromDuration(i,e,l,f)),{duration:l,unit:f,range:w}}getFallbackDuration(){return Zt({day:1})}adjustActiveRange(i){let{dateEnv:e,usesMinMaxTime:s,slotMinTime:l,slotMaxTime:f}=this.props,{start:w,end:z}=i;return s&&(nr(l)<0&&(w=jr(w),w=e.add(w,l)),nr(f)>1&&(z=jr(z),z=cs(z,-1),z=e.add(z,f))),{start:w,end:z}}buildRangeFromDuration(i,e,s,l){let z,W,ie,{dateEnv:f,dateAlignment:w}=this.props;if(!w){let{dateIncrement:Re}=this.props;w=Re&&Zn(Re)<Zn(s)?zn(Re).unit:l}function oe(){z=f.startOf(i,w),W=f.add(z,s),ie={start:z,end:W}}return nr(s)<=1&&this.isHiddenDay(z)&&(z=this.skipHiddenDays(z,e),z=jr(z)),oe(),this.trimHiddenDays(ie)||(i=this.skipHiddenDays(i,e),oe()),ie}buildRangeFromDayCount(i,e,s){let W,{dateEnv:l,dateAlignment:f}=this.props,w=0,z=i;f&&(z=l.startOf(z,f)),z=jr(z),z=this.skipHiddenDays(z,e),W=z;do{W=cs(W,1),this.isHiddenDay(W)||(w+=1)}while(w<s);return{start:z,end:W}}buildCustomVisibleRange(i){let{props:e}=this,s=e.visibleRangeInput,l="function"==typeof s?s.call(e.calendarApi,e.dateEnv.toDate(i)):s,f=this.refineRange(l);return!f||null!=f.start&&null!=f.end?f:null}buildRenderRange(i,e,s){return i}buildDateIncrement(i){let s,{dateIncrement:e}=this.props;return e||((s=this.props.dateAlignment)?Zt(1,s):i||Zt({days:1}))}refineRange(i){if(i){let e=function Ic(r,i){let e=null,s=null;return r.start&&(e=i.createMarker(r.start)),r.end&&(s=i.createMarker(r.end)),!e&&!s||e&&s&&s<e?null:{start:e,end:s}}(i,this.props.dateEnv);return e&&(e=th(e)),e}return null}initHiddenDays(){let l,i=this.props.hiddenDays||[],e=[],s=0;for(!1===this.props.weekends&&i.push(0,6),l=0;l<7;l+=1)(e[l]=-1!==i.indexOf(l))||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=e}trimHiddenDays(i){let{start:e,end:s}=i;return e&&(e=this.skipHiddenDays(e)),s&&(s=this.skipHiddenDays(s,-1,!0)),null==e||null==s||e<s?{start:e,end:s}:null}isHiddenDay(i){return i instanceof Date&&(i=i.getUTCDay()),this.isHiddenDayHash[i]}skipHiddenDays(i,e=1,s=!1){for(;this.isHiddenDayHash[(i.getUTCDay()+(s?e:0)+7)%7];)i=cs(i,e);return i}}function rh(r,i,e,s){return{instanceId:ue(),defId:r,range:i,forcedStartTzo:e??null,forcedEndTzo:s??null}}function $l(r,i,e){let{dateEnv:s,pluginHooks:l,options:f}=e,{defs:w,instances:z}=r;z=Xc(z,W=>!w[W.defId].recurringDef);for(let W in w){let ie=w[W];if(ie.recurringDef){let{duration:oe}=ie.recurringDef;oe||(oe=ie.allDay?f.defaultAllDayEventDuration:f.defaultTimedEventDuration);let Re=sh(ie,oe,i,s,l.recurringTypes);for(let je of Re){let Ye=rh(W,{start:je,end:s.add(je,oe)});z[Ye.instanceId]=Ye}}}return{defs:w,instances:z}}function sh(r,i,e,s,l){let w=l[r.recurringDef.typeId].expand(r.recurringDef.typeData,{start:s.subtract(e.start,i),end:e.end},s);return r.allDay&&(w=w.map(jr)),w}const rd={id:String,groupId:String,title:String,url:String,interactive:Boolean},Op={start:Ai,end:Ai,date:Ai,allDay:Boolean},oh=Object.assign(Object.assign(Object.assign({},rd),Op),{extendedProps:Ai});function Pp(r,i,e,s,l=Iu(e),f,w){let{refined:z,extra:W}=Rp(r,e,l),ie=function Zf(r,i){let e=null;return r&&(e=r.defaultAllDay),null==e&&(e=i.options.defaultAllDay),e}(i,e),oe=function xd(r,i,e,s){for(let l=0;l<s.length;l+=1){let f=s[l].parse(r,e);if(f){let{allDay:w}=r;return null==w&&(w=i,null==w&&(w=f.allDayGuess,null==w&&(w=!1))),{allDay:w,duration:f.duration,typeData:f.typeData,typeId:l}}}return null}(z,ie,e.dateEnv,e.pluginHooks.recurringTypes);if(oe){let je=$h(z,W,i?i.sourceId:"",oe.allDay,!!oe.duration,e,f);return je.recurringDef={typeId:oe.typeId,typeData:oe.typeData,duration:oe.duration},{def:je,instance:null}}let Re=function zp(r,i,e,s){let f,W,{allDay:l}=r,w=null,z=!1,ie=null;if(f=e.dateEnv.createMarkerMeta(null!=r.start?r.start:r.date),f)w=f.marker;else if(!s)return null;return null!=r.end&&(W=e.dateEnv.createMarkerMeta(r.end)),null==l&&(l=null!=i?i:(!f||f.isTimeUnspecified)&&(!W||W.isTimeUnspecified)),l&&w&&(w=jr(w)),W&&(ie=W.marker,l&&(ie=jr(ie)),w&&ie<=w&&(ie=null)),ie?z=!0:s||(z=e.options.forceEventDuration||!1,ie=e.dateEnv.add(w,l?e.options.defaultAllDayEventDuration:e.options.defaultTimedEventDuration)),{allDay:l,hasEnd:z,range:{start:w,end:ie},forcedStartTzo:f?f.forcedTzo:null,forcedEndTzo:W?W.forcedTzo:null}}(z,ie,e,s);if(Re){let je=$h(z,W,i?i.sourceId:"",Re.allDay,Re.hasEnd,e,f),Ye=rh(je.defId,Re.range,Re.forcedStartTzo,Re.forcedEndTzo);return w&&je.publicId&&w[je.publicId]&&(Ye.instanceId=w[je.publicId]),{def:je,instance:Ye}}return null}function Rp(r,i,e=Iu(i)){return Tl(r,e)}function Iu(r){return Object.assign(Object.assign(Object.assign({},Da),oh),r.pluginHooks.eventRefiners)}function $h(r,i,e,s,l,f,w){let z={title:r.title||"",groupId:r.groupId||"",publicId:r.id||"",url:r.url||"",recurringDef:null,defId:(w&&r.id?w[r.id]:"")||ue(),sourceId:e,allDay:s,hasEnd:l,interactive:r.interactive,ui:lh(r,f),extendedProps:Object.assign(Object.assign({},r.extendedProps||{}),i)};for(let W of f.pluginHooks.eventDefMemberAdders)Object.assign(z,W(r));return Object.freeze(z.ui.classNames),Object.freeze(z.extendedProps),z}function ah(r,i,e,s,l,f){let w={defs:{},instances:{}},z=Iu(e);for(let W of r){let ie=Pp(W,i,e,s,z,l,f);ie&&Fp(ie,w)}return w}function Fp(r,i={defs:{},instances:{}}){return i.defs[r.def.defId]=r.def,r.instance&&(i.instances[r.instance.instanceId]=r.instance),i}function sd(r,i){let e=r.instances[i];if(e){let s=r.defs[e.defId],l=wd(r,f=>function qf(r,i){return!(!r.groupId||r.groupId!==i.groupId)}(s,f));return l.defs[s.defId]=s,l.instances[e.instanceId]=e,l}return{defs:{},instances:{}}}function us(r,i){return{defs:Object.assign(Object.assign({},r.defs),i.defs),instances:Object.assign(Object.assign({},r.instances),i.instances)}}function wd(r,i){let e=Xc(r.defs,i),s=Xc(r.instances,l=>e[l.defId]);return{defs:e,instances:s}}function Xl(r){return Array.isArray(r)?r:"string"==typeof r?r.split(/\s+/):[]}const Da={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Ai,overlap:Ai,allow:Ai,className:Xl,classNames:Xl,color:String,backgroundColor:String,borderColor:String,textColor:String},Jo={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function lh(r,i){let e=function Pc(r,i){return Array.isArray(r)?ah(r,null,i,!0):"object"==typeof r&&r?ah([r],null,i,!0):null!=r?String(r):null}(r.constraint,i);return{display:r.display||null,startEditable:null!=r.startEditable?r.startEditable:r.editable,durationEditable:null!=r.durationEditable?r.durationEditable:r.editable,constraints:null!=e?[e]:[],overlap:null!=r.overlap?r.overlap:null,allows:null!=r.allow?[r.allow]:[],backgroundColor:r.backgroundColor||r.color||"",borderColor:r.borderColor||r.color||"",textColor:r.textColor||"",classNames:(r.className||[]).concat(r.classNames||[])}}function Fo(r){return r.reduce(Kf,Jo)}function Kf(r,i){return{display:null!=i.display?i.display:r.display,startEditable:null!=i.startEditable?i.startEditable:r.startEditable,durationEditable:null!=i.durationEditable?i.durationEditable:r.durationEditable,constraints:r.constraints.concat(i.constraints),overlap:"boolean"==typeof i.overlap?i.overlap:r.overlap,allows:r.allows.concat(i.allows),backgroundColor:i.backgroundColor||r.backgroundColor,borderColor:i.borderColor||r.borderColor,textColor:i.textColor||r.textColor,classNames:r.classNames.concat(i.classNames)}}const Cd={id:String,defaultAllDay:Boolean,url:String,format:String,events:Ai,eventDataTransform:Ai,success:Ai,failure:Ai};function Xh(r,i,e=Bp(i)){let s;if("string"==typeof r?s={url:r}:"function"==typeof r||Array.isArray(r)?s={events:r}:"object"==typeof r&&r&&(s=r),s){let{refined:l,extra:f}=Tl(s,e),w=function Np(r,i){let e=i.pluginHooks.eventSourceDefs;for(let s=e.length-1;s>=0;s-=1){let f=e[s].parseMeta(r);if(f)return{sourceDefId:s,meta:f}}return null}(l,i);if(w)return{_raw:r,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:l.defaultAllDay,eventDataTransform:l.eventDataTransform,success:l.success,failure:l.failure,publicId:l.id||"",sourceId:ue(),sourceDefId:w.sourceDefId,meta:w.meta,ui:lh(l,i),extendedProps:f}}return null}function Bp(r){return Object.assign(Object.assign(Object.assign({},Da),Cd),r.pluginHooks.eventSourceRefiners)}function Qf(r,i,e){let s=e.options.eventDataTransform,l=i?i.eventDataTransform:null;return l&&(r=tu(r,l)),s&&(r=tu(r,s)),r}function tu(r,i){let e;if(i){e=[];for(let s of r){let l=i(s);l?e.push(l):null==l&&e.push(s)}}else e=r;return e}function Ed(r,i,e){let{defs:s}=r,l=Zc(r.instances,f=>s[f.defId].allDay?f:Object.assign(Object.assign({},f),{range:{start:e.createMarker(i.toDate(f.range.start,f.forcedStartTzo)),end:e.createMarker(i.toDate(f.range.end,f.forcedEndTzo))},forcedStartTzo:e.canComputeOffset?null:f.forcedStartTzo,forcedEndTzo:e.canComputeOffset?null:f.forcedEndTzo}));return{defs:s,instances:l}}function Sd(r,i){return wd(r,e=>e.sourceId!==i)}class od{constructor(){this.handlers={},this.thisContext=null}setThisContext(i){this.thisContext=i}setOptions(i){this.options=i}on(i,e){!function Td(r,i,e){(r[i]||(r[i]=[])).push(e)}(this.handlers,i,e)}off(i,e){!function lg(r,i,e){e?r[i]&&(r[i]=r[i].filter(s=>s!==e)):delete r[i]}(this.handlers,i,e)}trigger(i,...e){let f=[].concat(this.options&&this.options[i]||[],this.handlers[i]||[]);for(let w of f)w.apply(this.thisContext,e)}hasHandlers(i){return!!(this.handlers[i]&&this.handlers[i].length||this.options&&this.options[i])}}const Hp={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function qh(r,i,e){e.emitter.trigger("select",Object.assign(Object.assign({},iu(r,e)),{jsEvent:i?i.origEvent:null,view:e.viewApi||e.calendarApi.view}))}function iu(r,i){let e={};for(let s of i.pluginHooks.dateSpanTransforms)Object.assign(e,s(r,i));return Object.assign(e,function nm(r,i){return Object.assign(Object.assign({},sm(r.range,i,r.allDay)),{allDay:r.allDay})}(r,i.dateEnv)),e}function ch(r,i,e){let{dateEnv:s,options:l}=e,f=i;return r?(f=jr(f),f=s.add(f,l.defaultAllDayEventDuration)):f=s.add(f,l.defaultTimedEventDuration),f}function ad(r,i,e,s){let l=Md(r.defs,i),f={defs:{},instances:{}};for(let w in r.defs)f.defs[w]=Lu(r.defs[w],l[w],e,s);for(let w in r.instances){let z=r.instances[w];f.instances[w]=kd(z,f.defs[z.defId],l[z.defId],e,s)}return f}function Lu(r,i,e,s){let l=e.standardProps||{};null==l.hasEnd&&i.durationEditable&&(e.startDelta||e.endDelta)&&(l.hasEnd=!0);let f=Object.assign(Object.assign(Object.assign({},r),l),{ui:Object.assign(Object.assign({},r.ui),l.ui)});e.extendedProps&&(f.extendedProps=Object.assign(Object.assign({},f.extendedProps),e.extendedProps));for(let w of s.pluginHooks.eventDefMutationAppliers)w(f,e,s);return!f.hasEnd&&s.options.forceEventDuration&&(f.hasEnd=!0),f}function kd(r,i,e,s,l){let{dateEnv:f}=l,w=s.standardProps&&!0===s.standardProps.allDay,z=s.standardProps&&!1===s.standardProps.hasEnd,W=Object.assign({},r);return w&&(W.range=Wf(W.range)),s.datesDelta&&e.startEditable&&(W.range={start:f.add(W.range.start,s.datesDelta),end:f.add(W.range.end,s.datesDelta)}),s.startDelta&&e.durationEditable&&(W.range={start:f.add(W.range.start,s.startDelta),end:W.range.end}),s.endDelta&&e.durationEditable&&(W.range={start:W.range.start,end:f.add(W.range.end,s.endDelta)}),z&&(W.range={start:W.range.start,end:ch(i.allDay,W.range.start,l)}),i.allDay&&(W.range={start:jr(W.range.start),end:jr(W.range.end)}),W.range.end<W.range.start&&(W.range.end=ch(i.allDay,W.range.start,l)),W}class Ou{constructor(i,e){this.context=i,this.internalEventSource=e}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Vs{constructor(i,e,s){this._context=i,this._def=e,this._instance=s||null}setProp(i,e){if(i in Op)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===i)e=rd[i](e),this.mutate({standardProps:{publicId:e}});else if(i in rd)e=rd[i](e),this.mutate({standardProps:{[i]:e}});else if(i in Da){let s=Da[i](e);s="color"===i?{backgroundColor:e,borderColor:e}:"editable"===i?{startEditable:e,durationEditable:e}:{[i]:e},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${i}'. Use setExtendedProp instead.`)}setExtendedProp(i,e){this.mutate({extendedProps:{[i]:e}})}setStart(i,e={}){let{dateEnv:s}=this._context,l=s.createMarker(i);if(l&&this._instance){let w=Wl(this._instance.range.start,l,s,e.granularity);this.mutate(e.maintainDuration?{datesDelta:w}:{startDelta:w})}}setEnd(i,e={}){let l,{dateEnv:s}=this._context;if((null==i||(l=s.createMarker(i),l))&&this._instance)if(l){let f=Wl(this._instance.range.end,l,s,e.granularity);this.mutate({endDelta:f})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(i,e,s={}){let z,{dateEnv:l}=this._context,f={allDay:s.allDay},w=l.createMarker(i);if(w&&(null==e||(z=l.createMarker(e),z))&&this._instance){let W=this._instance.range;!0===s.allDay&&(W=Wf(W));let ie=Wl(W.start,w,l,s.granularity);if(z){let oe=Wl(W.end,z,l,s.granularity);!function Qi(r,i){return r.years===i.years&&r.months===i.months&&r.days===i.days&&r.milliseconds===i.milliseconds}(ie,oe)?this.mutate({startDelta:ie,endDelta:oe,standardProps:f}):this.mutate({datesDelta:ie,standardProps:f})}else f.hasEnd=!1,this.mutate({datesDelta:ie,standardProps:f})}}moveStart(i){let e=Zt(i);e&&this.mutate({startDelta:e})}moveEnd(i){let e=Zt(i);e&&this.mutate({endDelta:e})}moveDates(i){let e=Zt(i);e&&this.mutate({datesDelta:e})}setAllDay(i,e={}){let s={allDay:i},{maintainDuration:l}=e;null==l&&(l=this._context.options.allDayMaintainDuration),this._def.allDay!==i&&(s.hasEnd=l),this.mutate({standardProps:s})}formatRange(i){let{dateEnv:e}=this._context,s=this._instance,l=hn(i);return this._def.hasEnd?e.formatRange(s.range.start,s.range.end,l,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):e.format(s.range.start,l,{forcedTzo:s.forcedStartTzo})}mutate(i){let e=this._instance;if(e){let s=this._def,l=this._context,{eventStore:f}=l.getCurrentData(),w=sd(f,e.instanceId);w=ad(w,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},i,l);let W=new Vs(l,s,e);this._def=w.defs[s.defId],this._instance=w.instances[e.instanceId],l.dispatch({type:"MERGE_EVENTS",eventStore:w}),l.emitter.trigger("eventChange",{oldEvent:W,event:this,relatedEvents:Pu(w,l,e),revert(){l.dispatch({type:"RESET_EVENTS",eventStore:f})}})}}remove(){let i=this._context,e=Gp(this);i.dispatch({type:"REMOVE_EVENTS",eventStore:e}),i.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){i.dispatch({type:"MERGE_EVENTS",eventStore:e})}})}get source(){let{sourceId:i}=this._def;return i?new Ou(this._context,this._context.getCurrentData().eventSources[i]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let i=this._instance;return i?this._context.dateEnv.formatIso(i.range.start,{omitTime:this._def.allDay,forcedTzo:i.forcedStartTzo}):""}get endStr(){let i=this._instance;return i&&this._def.hasEnd?this._context.dateEnv.formatIso(i.range.end,{omitTime:this._def.allDay,forcedTzo:i.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(i={}){let e=this._def,{ui:s}=e,{startStr:l,endStr:f}=this,w={allDay:e.allDay};return e.title&&(w.title=e.title),l&&(w.start=l),f&&(w.end=f),e.publicId&&(w.id=e.publicId),e.groupId&&(w.groupId=e.groupId),e.url&&(w.url=e.url),s.display&&"auto"!==s.display&&(w.display=s.display),i.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?w.color=s.backgroundColor:(s.backgroundColor&&(w.backgroundColor=s.backgroundColor),s.borderColor&&(w.borderColor=s.borderColor)),s.textColor&&(w.textColor=s.textColor),s.classNames.length&&(w.classNames=s.classNames),Object.keys(e.extendedProps).length&&(i.collapseExtendedProps?Object.assign(w,e.extendedProps):w.extendedProps=e.extendedProps),w}toJSON(){return this.toPlainObject()}}function Gp(r){let i=r._def,e=r._instance;return{defs:{[i.defId]:i},instances:e?{[e.instanceId]:e}:{}}}function Pu(r,i,e){let{defs:s,instances:l}=r,f=[],w=e?e.instanceId:"";for(let z in l){let W=l[z];W.instanceId!==w&&f.push(new Vs(i,s[W.defId],W))}return f}function uh(r,i,e,s){let l={},f={},w={},z=[],W=[],ie=Md(r.defs,i);for(let oe in r.defs){let Re=r.defs[oe];"inverse-background"===ie[Re.defId].display&&(Re.groupId?(l[Re.groupId]=[],w[Re.groupId]||(w[Re.groupId]=Re)):f[oe]=[])}for(let oe in r.instances){let Re=r.instances[oe],je=r.defs[Re.defId],Ye=ie[je.defId],Wt=Re.range,$t=!je.allDay&&s?th(Wt,s):Wt,ci=Gl($t,e);ci&&("inverse-background"===Ye.display?je.groupId?l[je.groupId].push(ci):f[Re.defId].push(ci):"none"!==Ye.display&&("background"===Ye.display?z:W).push({def:je,ui:Ye,instance:Re,range:ci,isStart:$t.start&&$t.start.valueOf()===ci.start.valueOf(),isEnd:$t.end&&$t.end.valueOf()===ci.end.valueOf()}))}for(let oe in l){let je=jf(l[oe],e);for(let Ye of je){let Wt=w[oe];z.push({def:Wt,ui:ie[Wt.defId],instance:null,range:Ye,isStart:!1,isEnd:!1})}}for(let oe in f){let je=jf(f[oe],e);for(let Ye of je)z.push({def:r.defs[oe],ui:ie[oe],instance:null,range:Ye,isStart:!1,isEnd:!1})}return{bg:z,fg:W}}function Kh(r,i){r.fcSeg=i}function Ru(r){return r.fcSeg||r.parentNode.fcSeg||null}function Md(r,i){return Zc(r,e=>jp(e,i))}function jp(r,i){let e=[];return i[""]&&e.push(i[""]),i[r.defId]&&e.push(i[r.defId]),e.push(r.ui),Fo(e)}function Jh(r,i){let e=r.map(im);return e.sort((s,l)=>function Ke(r,i,e){let s,l;for(s=0;s<e.length;s+=1)if(l=bt(r,i,e[s]),l)return l;return 0}(s,l,i)),e.map(s=>s._seg)}function im(r){let{eventRange:i}=r,e=i.def,s=i.instance?i.instance.range:i.range,l=s.start?s.start.valueOf():0,f=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},e.extendedProps),e),{id:e.publicId,start:l,end:f,duration:f-l,allDay:Number(e.allDay),_seg:r})}function Up(r,i){let{pluginHooks:e}=i,s=e.isDraggableTransformers,{def:l,ui:f}=r.eventRange,w=f.startEditable;for(let z of s)w=z(w,l,f,i);return w}function nu(r,i){return r.isStart&&r.eventRange.ui.durationEditable&&i.options.eventResizableFromStart}function dh(r,i,e,s,l,f,w){let{dateEnv:z,options:W}=e,{displayEventTime:ie,displayEventEnd:oe}=W,Re=r.eventRange.def,je=r.eventRange.instance;null==ie&&(ie=!1!==s),null==oe&&(oe=!1!==l);let Ye=je.range.start,Wt=je.range.end,$t=f||r.start||r.eventRange.range.start,ci=w||r.end||r.eventRange.range.end,zi=jr(Ye).valueOf()===jr($t).valueOf(),kn=jr(Ls(Wt,-1)).valueOf()===jr(Ls(ci,-1)).valueOf();return ie&&!Re.allDay&&(zi||kn)?($t=zi?Ye:$t,ci=kn?Wt:ci,oe&&Re.hasEnd?z.formatRange($t,ci,i,{forcedStartTzo:f?null:je.forcedStartTzo,forcedEndTzo:w?null:je.forcedEndTzo}):z.format($t,i,{forcedTzo:f?null:je.forcedStartTzo})):""}function pc(r,i,e){let s=r.eventRange.range;return{isPast:s.end<=(e||i.start),isFuture:s.start>=(e||i.end),isToday:i&&Ul(i,s.start)}}function cg(r){let i=["fc-event"];return r.isMirror&&i.push("fc-event-mirror"),r.isDraggable&&i.push("fc-event-draggable"),(r.isStartResizable||r.isEndResizable)&&i.push("fc-event-resizable"),r.isDragging&&i.push("fc-event-dragging"),r.isResizing&&i.push("fc-event-resizing"),r.isSelected&&i.push("fc-event-selected"),r.isStart&&i.push("fc-event-start"),r.isEnd&&i.push("fc-event-end"),r.isPast&&i.push("fc-event-past"),r.isToday&&i.push("fc-event-today"),r.isFuture&&i.push("fc-event-future"),i}function Wp(r){return r.instance?r.instance.instanceId:`${r.def.defId}:${r.range.start.toISOString()}`}function $p(r,i){let{def:e,instance:s}=r.eventRange,{url:l}=e;if(l)return{href:l};let{emitter:f,options:w}=i,{eventInteractive:z}=w;return null==z&&(z=e.interactive,null==z&&(z=!!f.hasHandlers("eventClick"))),z?te(W=>{f.trigger("eventClick",{el:W.target,event:new Vs(i,e,s),jsEvent:W,view:i.viewApi})}):{}}const hh={start:Ai,end:Ai,allDay:Boolean};function rm(r,i,e){return Object.assign(Object.assign({},sm(r,i,e)),{timeZone:i.timeZone})}function sm(r,i,e){return{start:i.toDate(r.start),end:i.toDate(r.end),startStr:i.formatIso(r.start,{omitTime:e}),endStr:i.formatIso(r.end,{omitTime:e})}}class Zp extends Error{constructor(i,e){super(i),this.response=e}}let mh;function om(){return null==mh&&(mh=function Dd(){if(typeof document>"u")return!0;let r=document.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.innerHTML="<table><tr><td><div></div></td></tr></table>",r.querySelector("table").style.height="100px",r.querySelector("div").style.height="100%",document.body.appendChild(r);let e=r.querySelector("div").offsetHeight>0;return document.body.removeChild(r),e}()),mh}class hg extends vs{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{ol(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{ol(()=>{this.setState({forPrint:!1})})}}render(){let{props:i}=this,{options:e}=i,{forPrint:s}=this.state,l=s||"auto"===e.height||"auto"===e.contentHeight,f=l||null==e.height?"":e.height,w=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${e.direction}`,i.theme.getClass("root")];return om()||w.push("fc-liquid-hack"),i.children(w,f,l,s)}componentDidMount(){let{emitter:i}=this.props;i.on("_beforeprint",this.handleBeforePrint),i.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:i}=this.props;i.off("_beforeprint",this.handleBeforePrint),i.off("_afterprint",this.handleAfterPrint)}}class _s{constructor(i){this.component=i.component,this.isHitComboAllowed=i.isHitComboAllowed||null}destroy(){}}function gh(r){return{[r.component.uid]:r}}const Rc={};class vh{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(i){this.currentDataManager.dispatch(i)}get view(){return this.getCurrentData().viewApi}batchRendering(i){i()}updateSize(){this.trigger("_resize",!0)}setOption(i,e){this.dispatch({type:"SET_OPTION",optionName:i,rawOptionValue:e})}getOption(i){return this.currentDataManager.currentCalendarOptionsInput[i]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(i,e){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[i]?s.emitter.on(i,e):console.warn(`Unknown listener name '${i}'`)}off(i,e){this.currentDataManager.emitter.off(i,e)}trigger(i,...e){this.currentDataManager.emitter.trigger(i,...e)}changeView(i,e){this.batchRendering(()=>{if(this.unselect(),e)if(e.start&&e.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:e});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i,dateMarker:s.createMarker(e)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i})})}zoomTo(i,e){let l;l=this.getCurrentData().viewSpecs[e=e||"day"]||this.getUnitViewSpec(e),this.unselect(),this.dispatch(l?{type:"CHANGE_VIEW_TYPE",viewType:l.type,dateMarker:i}:{type:"CHANGE_DATE",dateMarker:i})}getUnitViewSpec(i){let f,w,{viewSpecs:e,toolbarConfig:s}=this.getCurrentData(),l=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]);for(let z in e)l.push(z);for(f=0;f<l.length;f+=1)if(w=e[l[f]],w&&w.singleUnit===i)return w;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:i.dateEnv.addYears(i.currentDate,-1)})}nextYear(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:i.dateEnv.addYears(i.currentDate,1)})}today(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:ih(i.calendarOptions.now,i.dateEnv)})}gotoDate(i){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.createMarker(i)})}incrementDate(i){let e=this.getCurrentData(),s=Zt(i);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.add(e.currentDate,s)}))}getDate(){let i=this.getCurrentData();return i.dateEnv.toDate(i.currentDate)}formatDate(i,e){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(i),hn(e))}formatRange(i,e,s){let{dateEnv:l}=this.getCurrentData();return l.formatRange(l.createMarker(i),l.createMarker(e),hn(s),s)}formatIso(i,e){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(i),{omitTime:e})}select(i,e){let s;s=null==e?null!=i.start?i:{start:i,end:null}:{start:i,end:e};let l=this.getCurrentData(),f=function Ad(r,i,e){let s=function ph(r,i){let{refined:e,extra:s}=Tl(r,hh),l=e.start?i.createMarkerMeta(e.start):null,f=e.end?i.createMarkerMeta(e.end):null,{allDay:w}=e;return null==w&&(w=l&&l.isTimeUnspecified&&(!f||f.isTimeUnspecified)),Object.assign({range:{start:l?l.marker:null,end:f?f.marker:null},allDay:w},s)}(r,i),{range:l}=s;if(!l.start)return null;if(!l.end){if(null==e)return null;l.end=i.add(l.start,e)}return s}(s,l.dateEnv,Zt({days:1}));f&&(this.dispatch({type:"SELECT_DATES",selection:f}),qh(f,null,l))}unselect(i){let e=this.getCurrentData();e.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function em(r,i){i.emitter.trigger("unselect",{jsEvent:r?r.origEvent:null,view:i.viewApi||i.calendarApi.view})}(i,e))}addEvent(i,e){if(i instanceof Vs){let w=i._def,z=i._instance;return this.getCurrentData().eventStore.defs[w.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Fp({def:w,instance:z})}),this.triggerEventAdd(i)),i}let l,s=this.getCurrentData();if(e instanceof Ou)l=e.internalEventSource;else if("boolean"==typeof e)e&&([l]=Jd(s.eventSources));else if(null!=e){let w=this.getEventSourceById(e);if(!w)return console.warn(`Could not find an event source with ID "${e}"`),null;l=w.internalEventSource}let f=Pp(i,l,s,!1);if(f){let w=new Vs(s,f.def,f.def.recurringDef?null:f.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Fp(f)}),this.triggerEventAdd(w),w}return null}triggerEventAdd(i){let{emitter:e}=this.getCurrentData();e.trigger("eventAdd",{event:i,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:Gp(i)})}})}getEventById(i){let e=this.getCurrentData(),{defs:s,instances:l}=e.eventStore;i=String(i);for(let f in s){let w=s[f];if(w.publicId===i){if(w.recurringDef)return new Vs(e,w,null);for(let z in l){let W=l[z];if(W.defId===w.defId)return new Vs(e,w,W)}}}return null}getEvents(){let i=this.getCurrentData();return Pu(i.eventStore,i)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let i=this.getCurrentData(),e=i.eventSources,s=[];for(let l in e)s.push(new Ou(i,e[l]));return s}getEventSourceById(i){let e=this.getCurrentData(),s=e.eventSources;i=String(i);for(let l in s)if(s[l].publicId===i)return new Ou(e,s[l]);return null}addEventSource(i){let e=this.getCurrentData();if(i instanceof Ou)return e.eventSources[i.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i.internalEventSource]}),i;let s=Xh(i,e);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new Ou(e,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(i){let e=Zt(i);e&&this.trigger("_scrollRequest",{time:e})}}function zc(r,i){return r.left>=i.left&&r.left<i.right&&r.top>=i.top&&r.top<i.bottom}function qp(r,i){let e={left:Math.max(r.left,i.left),right:Math.min(r.right,i.right),top:Math.max(r.top,i.top),bottom:Math.min(r.bottom,i.bottom)};return e.left<e.right&&e.top<e.bottom&&e}const Ld={defs:{},instances:{}};class am{constructor(){this.getKeysForEventDefs=Qn(this._getKeysForEventDefs),this.splitDateSelection=Qn(this._splitDateSpan),this.splitEventStore=Qn(this._splitEventStore),this.splitIndividualUi=Qn(this._splitIndividualUi),this.splitEventDrag=Qn(this._splitInteraction),this.splitEventResize=Qn(this._splitInteraction),this.eventUiBuilders={}}splitProps(i){let e=this.getKeyInfo(i),s=this.getKeysForEventDefs(i.eventStore),l=this.splitDateSelection(i.dateSelection),f=this.splitIndividualUi(i.eventUiBases,s),w=this.splitEventStore(i.eventStore,s),z=this.splitEventDrag(i.eventDrag),W=this.splitEventResize(i.eventResize),ie={};this.eventUiBuilders=Zc(e,(oe,Re)=>this.eventUiBuilders[Re]||Qn(Jp));for(let oe in e){let Re=e[oe],je=w[oe]||Ld;ie[oe]={businessHours:Re.businessHours||i.businessHours,dateSelection:l[oe]||null,eventStore:je,eventUiBases:(0,this.eventUiBuilders[oe])(i.eventUiBases[""],Re.ui,f[oe]),eventSelection:je.instances[i.eventSelection]?i.eventSelection:"",eventDrag:z[oe]||null,eventResize:W[oe]||null}}return ie}_splitDateSpan(i){let e={};if(i){let s=this.getKeysForDateSpan(i);for(let l of s)e[l]=i}return e}_getKeysForEventDefs(i){return Zc(i.defs,e=>this.getKeysForEventDef(e))}_splitEventStore(i,e){let{defs:s,instances:l}=i,f={};for(let w in s)for(let z of e[w])f[z]||(f[z]={defs:{},instances:{}}),f[z].defs[w]=s[w];for(let w in l){let z=l[w];for(let W of e[z.defId])f[W]&&(f[W].instances[w]=z)}return f}_splitIndividualUi(i,e){let s={};for(let l in i)if(l)for(let f of e[l])s[f]||(s[f]={}),s[f][l]=i[l];return s}_splitInteraction(i){let e={};if(i){let s=this._splitEventStore(i.affectedEvents,this._getKeysForEventDefs(i.affectedEvents)),l=this._getKeysForEventDefs(i.mutatedEvents),f=this._splitEventStore(i.mutatedEvents,l),w=z=>{e[z]||(e[z]={affectedEvents:s[z]||Ld,mutatedEvents:f[z]||Ld,isEvent:i.isEvent})};for(let z in s)w(z);for(let z in f)w(z)}return e}}function Jp(r,i,e){let s=[];r&&s.push(r),i&&s.push(i);let l={"":Fo(s)};return e&&Object.assign(l,e),l}function cd(r,i,e,s){return{dow:r.getUTCDay(),isDisabled:!(!s||Ul(s.activeRange,r)),isOther:!(!s||Ul(s.currentRange,r)),isToday:!(!i||!Ul(i,r)),isPast:!!(e?r<e:i&&r<i.start),isFuture:!!(e?r>e:i&&r>=i.end)}}function ru(r,i){let e=["fc-day",`fc-day-${ms[r.dow]}`];return r.isDisabled?e.push("fc-day-disabled"):(r.isToday&&(e.push("fc-day-today"),e.push(i.getClass("today"))),r.isPast&&e.push("fc-day-past"),r.isFuture&&e.push("fc-day-future"),r.isOther&&e.push("fc-day-other")),e}const Av=hn({year:"numeric",month:"long",day:"numeric"}),lm=hn({week:"long"});function ud(r,i,e="day",s=!0){const{dateEnv:l,options:f,calendarApi:w}=r;let z=l.format(i,"week"===e?lm:Av);if(f.navLinks){let W=l.toDate(i);const ie=oe=>{let Re="day"===e?f.navLinkDayClick:"week"===e?f.navLinkWeekClick:null;"function"==typeof Re?Re.call(w,l.toDate(i),oe):("string"==typeof Re&&(e=Re),w.zoomTo(i,e))};return Object.assign({title:Gt(f.navLinkHint,[z,W],z),"data-navlink":""},s?K(ie):{onClick:ie})}return{"aria-label":z}}let cm,yh=null;function Qh(r){return{x:r.offsetHeight-r.clientHeight,y:r.offsetWidth-r.clientWidth}}function Fu(r,i=!1,e){let s=e?r.getBoundingClientRect():tp(r),l=function ep(r,i=!1){let e=window.getComputedStyle(r),s=parseInt(e.borderLeftWidth,10)||0,l=parseInt(e.borderRightWidth,10)||0,f=parseInt(e.borderTopWidth,10)||0,w=parseInt(e.borderBottomWidth,10)||0,z=Qh(r),W=z.y-s-l,oe={borderLeft:s,borderRight:l,borderTop:f,borderBottom:w,scrollbarBottom:z.x-f-w,scrollbarLeft:0,scrollbarRight:0};return function fg(){return null===yh&&(yh=function Dv(){let r=document.createElement("div");Mc(r,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),r.innerHTML="<div></div>",document.body.appendChild(r);let e=r.firstChild.getBoundingClientRect().left>r.getBoundingClientRect().left;return Ud(r),e}()),yh}()&&"rtl"===e.direction?oe.scrollbarLeft=W:oe.scrollbarRight=W,i&&(oe.paddingLeft=parseInt(e.paddingLeft,10)||0,oe.paddingRight=parseInt(e.paddingRight,10)||0,oe.paddingTop=parseInt(e.paddingTop,10)||0,oe.paddingBottom=parseInt(e.paddingBottom,10)||0),oe}(r,i),f={left:s.left+l.borderLeft+l.scrollbarLeft,right:s.right-l.borderRight-l.scrollbarRight,top:s.top+l.borderTop,bottom:s.bottom-l.borderBottom-l.scrollbarBottom};return i&&(f.left+=l.paddingLeft,f.right-=l.paddingRight,f.top+=l.paddingTop,f.bottom-=l.paddingBottom),f}function tp(r){let i=r.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,right:i.right+window.pageXOffset,bottom:i.bottom+window.pageYOffset}}function um(r){let i=[];for(;r instanceof HTMLElement;){let e=window.getComputedStyle(r);if("fixed"===e.position)break;/(auto|scroll)/.test(e.overflow+e.overflowY+e.overflowX)&&i.push(r),r=r.parentNode}return i}class dd{constructor(i,e,s,l){this.els=e;let f=this.originClientRect=i.getBoundingClientRect();s&&this.buildElHorizontals(f.left),l&&this.buildElVerticals(f.top)}buildElHorizontals(i){let e=[],s=[];for(let l of this.els){let f=l.getBoundingClientRect();e.push(f.left-i),s.push(f.right-i)}this.lefts=e,this.rights=s}buildElVerticals(i){let e=[],s=[];for(let l of this.els){let f=l.getBoundingClientRect();e.push(f.top-i),s.push(f.bottom-i)}this.tops=e,this.bottoms=s}leftToIndex(i){let f,{lefts:e,rights:s}=this,l=e.length;for(f=0;f<l;f+=1)if(i>=e[f]&&i<s[f])return f}topToIndex(i){let f,{tops:e,bottoms:s}=this,l=e.length;for(f=0;f<l;f+=1)if(i>=e[f]&&i<s[f])return f}getWidth(i){return this.rights[i]-this.lefts[i]}getHeight(i){return this.bottoms[i]-this.tops[i]}similarTo(i){return ip(this.tops||[],i.tops||[])&&ip(this.bottoms||[],i.bottoms||[])&&ip(this.lefts||[],i.lefts||[])&&ip(this.rights||[],i.rights||[])}}function ip(r,i){const e=r.length;if(e!==i.length)return!1;for(let s=0;s<e;s++)if(Math.round(r[s])!==Math.round(i[s]))return!1;return!0}class y{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class O extends y{constructor(i){super(),this.el=i}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(i){this.el.scrollTop=i}setScrollLeft(i){this.el.scrollLeft=i}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class S extends y{getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}setScrollTop(i){window.scroll(window.pageXOffset,i)}setScrollLeft(i){window.scroll(i,window.pageYOffset)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Y extends vs{constructor(){super(...arguments),this.uid=ue()}prepareHits(){}queryHit(i,e,s,l){return null}isValidSegDownEl(i){return!this.props.eventDrag&&!this.props.eventResize&&!ko(i,".fc-event-mirror")}isValidDateDownEl(i){return!(ko(i,".fc-event:not(.fc-bg-event)")||ko(i,".fc-more-link")||ko(i,"a[data-navlink]")||ko(i,".fc-popover"))}}class ye{constructor(i=(e=>e.thickness||1)){this.getEntryThickness=i,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(i){let e=[];for(let s of i)this.insertEntry(s,e);return e}insertEntry(i,e){let s=this.findInsertion(i);this.isInsertionValid(s,i)?this.insertEntryAt(i,s):this.handleInvalidInsertion(s,i,e)}isInsertionValid(i,e){return(-1===this.maxCoord||i.levelCoord+this.getEntryThickness(e)<=this.maxCoord)&&(-1===this.maxStackCnt||i.stackCnt<this.maxStackCnt)}handleInvalidInsertion(i,e,s){if(this.allowReslicing&&i.touchingEntry){const l=Object.assign(Object.assign({},e),{span:ws(e.span,i.touchingEntry.span)});s.push(l),this.splitEntry(e,i.touchingEntry,s)}else s.push(e)}splitEntry(i,e,s){let l=i.span,f=e.span;l.start<f.start&&this.insertEntry({index:i.index,thickness:i.thickness,span:{start:l.start,end:f.start}},s),l.end>f.end&&this.insertEntry({index:i.index,thickness:i.thickness,span:{start:f.end,end:l.end}},s)}insertEntryAt(i,e){let{entriesByLevel:s,levelCoords:l}=this;-1===e.lateral?(no(l,e.level,e.levelCoord),no(s,e.level,[i])):no(s[e.level],e.lateral,i),this.stackCnts[Ei(i)]=e.stackCnt}findInsertion(i){let{levelCoords:e,entriesByLevel:s,strictOrder:l,stackCnts:f}=this,w=e.length,z=0,W=-1,ie=-1,oe=null,Re=0;for(let Wt=0;Wt<w;Wt+=1){const $t=e[Wt];if(!l&&$t>=z+this.getEntryThickness(i))break;let zi,ci=s[Wt],kn=Qo(ci,i.span.start,gt),xr=kn[0]+kn[1];for(;(zi=ci[xr])&&zi.span.start<i.span.end;){let Tr=$t+this.getEntryThickness(zi);Tr>z&&(z=Tr,oe=zi,W=Wt,ie=xr),Tr===z&&(Re=Math.max(Re,f[Ei(zi)]+1)),xr+=1}}let je=0;if(oe)for(je=W+1;je<w&&e[je]<z;)je+=1;let Ye=-1;return je<w&&e[je]===z&&(Ye=Qo(s[je],i.span.end,gt)[0]),{touchingLevel:W,touchingLateral:ie,touchingEntry:oe,stackCnt:Re,levelCoord:z,level:je,lateral:Ye}}toRects(){let{entriesByLevel:i,levelCoords:e}=this,s=i.length,l=[];for(let f=0;f<s;f+=1){let w=i[f],z=e[f];for(let W of w)l.push(Object.assign(Object.assign({},W),{thickness:this.getEntryThickness(W),levelCoord:z}))}return l}}function gt(r){return r.span.end}function Ei(r){return r.index+":"+r.span.start}function Qr(r,i){return{start:Math.min(r.start,i.start),end:Math.max(r.end,i.end)}}function ws(r,i){let e=Math.max(r.start,i.start),s=Math.min(r.end,i.end);return e<s?{start:e,end:s}:null}function no(r,i,e){r.splice(i,0,e)}function Qo(r,i,e){let s=0,l=r.length;if(!l||i<e(r[s]))return[0,0];if(i>e(r[l-1]))return[l,0];for(;s<l;){let f=Math.floor(s+(l-s)/2),w=e(r[f]);if(i<w)l=f;else{if(!(i>w))return[f,1];s=f+1}}return[s,0]}class Bu{constructor(i,e){this.emitter=new od}destroy(){}setMirrorIsVisible(i){}setMirrorNeedsRevert(i){}setAutoScrollEnabled(i){}}const np={};Boolean;const bh="fc-col-header-cell";function _g(r){return r.text}class Iv extends vs{render(){let{dateEnv:i,options:e,theme:s,viewApi:l}=this.context,{props:f}=this,{date:w,dateProfile:z}=f,W=cd(w,f.todayRange,null,z),ie=[bh].concat(ru(W,s)),oe=i.format(w,f.dayHeaderFormat),Re=!W.isDisabled&&f.colCnt>1?ud(this.context,w):{},je=Object.assign(Object.assign(Object.assign({date:i.toDate(w),view:l},f.extraRenderProps),{text:oe}),W);return Mt(ga,{elTag:"th",elClasses:ie,elAttrs:Object.assign({role:"columnheader",colSpan:f.colSpan,"data-date":W.isDisabled?void 0:Su(w)},f.extraDataAttrs),renderProps:je,generatorName:"dayHeaderContent",customGenerator:e.dayHeaderContent,defaultGenerator:_g,classNameGenerator:e.dayHeaderClassNames,didMount:e.dayHeaderDidMount,willUnmount:e.dayHeaderWillUnmount},Ye=>Mt("div",{className:"fc-scrollgrid-sync-inner"},!W.isDisabled&&Mt(Ye,{elTag:"a",elAttrs:Re,elClasses:["fc-col-header-cell-cushion",f.isSticky&&"fc-sticky"]})))}}const Lv=hn({weekday:"long"});class Oy extends vs{render(){let{props:i}=this,{dateEnv:e,theme:s,viewApi:l,options:f}=this.context,w=cs(new Date(2592e5),i.dow),z={dow:i.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},W=e.format(w,i.dayHeaderFormat),ie=Object.assign(Object.assign(Object.assign(Object.assign({date:w},z),{view:l}),i.extraRenderProps),{text:W});return Mt(ga,{elTag:"th",elClasses:[bh,...ru(z,s),...i.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan},i.extraDataAttrs),renderProps:ie,generatorName:"dayHeaderContent",customGenerator:f.dayHeaderContent,defaultGenerator:_g,classNameGenerator:f.dayHeaderClassNames,didMount:f.dayHeaderDidMount,willUnmount:f.dayHeaderWillUnmount},oe=>Mt("div",{className:"fc-scrollgrid-sync-inner"},Mt(oe,{elTag:"a",elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"],elAttrs:{"aria-label":e.format(w,Lv)}})))}}let ef=(()=>{class r extends zs{constructor(e,s){super(e,s),this.initialNowDate=ih(s.options.now,s.dateEnv),this.initialNowQueriedMs=(new Date).valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:s}=this;return e.children(s.nowDate,s.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:s}=this,l=Ls(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),f=s.dateEnv.startOf(l,e.unit),w=s.dateEnv.add(f,Zt(1,e.unit)),z=w.valueOf()-l.valueOf();return z=Math.min(864e5,z),{currentState:{nowDate:f,todayRange:yg(f)},nextState:{nowDate:w,todayRange:yg(w)},waitMs:z}}setTimeout(){let{nextState:e,waitMs:s}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},s)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}return r.contextType=Dc,r})();function yg(r){let i=jr(r);return{start:i,end:cs(i,1)}}class tf extends vs{constructor(){super(...arguments),this.createDayHeaderFormatter=Qn(Ov)}render(){let{context:i}=this,{dates:e,dateProfile:s,datesRepDistinctDays:l,renderIntro:f}=this.props,w=this.createDayHeaderFormatter(i.options.dayHeaderFormat,l,e.length);return Mt(ef,{unit:"day"},(z,W)=>Mt("tr",{role:"row"},f&&f("day"),e.map(ie=>l?Mt(Iv,{key:ie.toISOString(),date:ie,dateProfile:s,todayRange:W,colCnt:e.length,dayHeaderFormat:w}):Mt(Oy,{key:ie.getUTCDay(),dow:ie.getUTCDay(),dayHeaderFormat:w}))))}}function Ov(r,i,e){return r||function fc(r,i){return hn(!r||i>10?{weekday:"short"}:i>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(i,e)}class Wa{constructor(i,e){let s=i.start,{end:l}=i,f=[],w=[],z=-1;for(;s<l;)e.isHiddenDay(s)?f.push(z+.5):(z+=1,f.push(z),w.push(s)),s=cs(s,1);this.dates=w,this.indices=f,this.cnt=w.length}sliceRange(i){let e=this.getDateDayIndex(i.start),s=this.getDateDayIndex(cs(i.end,-1)),l=Math.max(0,e),f=Math.min(this.cnt-1,s);return l=Math.ceil(l),f=Math.floor(f),l<=f?{firstIndex:l,lastIndex:f,isStart:e===l,isEnd:s===f}:null}getDateDayIndex(i){let{indices:e}=this,s=Math.floor(qo(this.dates[0],i));return s<0?e[0]-1:s>=e.length?e[e.length-1]+1:e[s]}}class rp{constructor(i,e){let l,f,w,{dates:s}=i;if(e){for(f=s[0].getUTCDay(),l=1;l<s.length&&s[l].getUTCDay()!==f;l+=1);w=Math.ceil(s.length/l)}else w=1,l=s.length;this.rowCnt=w,this.colCnt=l,this.daySeries=i,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let i=[];for(let e=0;e<this.rowCnt;e+=1){let s=[];for(let l=0;l<this.colCnt;l+=1)s.push(this.buildCell(e,l));i.push(s)}return i}buildCell(i,e){let s=this.daySeries.dates[i*this.colCnt+e];return{key:s.toISOString(),date:s}}buildHeaderDates(){let i=[];for(let e=0;e<this.colCnt;e+=1)i.push(this.cells[0][e].date);return i}sliceRange(i){let{colCnt:e}=this,s=this.daySeries.sliceRange(i),l=[];if(s){let{firstIndex:f,lastIndex:w}=s,z=f;for(;z<=w;){let W=Math.floor(z/e),ie=Math.min((W+1)*e,w+1);l.push({row:W,firstCol:z%e,lastCol:(ie-1)%e,isStart:s.isStart&&z===f,isEnd:s.isEnd&&ie-1===w}),z=ie}}return l}}class xh{constructor(){this.sliceBusinessHours=Qn(this._sliceBusinessHours),this.sliceDateSelection=Qn(this._sliceDateSpan),this.sliceEventStore=Qn(this._sliceEventStore),this.sliceEventDrag=Qn(this._sliceInteraction),this.sliceEventResize=Qn(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(i,e,s,l,...f){let{eventUiBases:w}=i,z=this.sliceEventStore(i.eventStore,w,e,s,...f);return{dateSelectionSegs:this.sliceDateSelection(i.dateSelection,e,s,w,l,...f),businessHourSegs:this.sliceBusinessHours(i.businessHours,e,s,l,...f),fgEventSegs:z.fg,bgEventSegs:z.bg,eventDrag:this.sliceEventDrag(i.eventDrag,w,e,s,...f),eventResize:this.sliceEventResize(i.eventResize,w,e,s,...f),eventSelection:i.eventSelection}}sliceNowDate(i,e,s,l,...f){return this._sliceDateSpan({range:{start:i,end:Ls(i,1)},allDay:!1},e,s,{},l,...f)}_sliceBusinessHours(i,e,s,l,...f){return i?this._sliceEventStore($l(i,Pd(e,!!s),l),{},e,s,...f).bg:[]}_sliceEventStore(i,e,s,l,...f){if(i){let w=uh(i,e,Pd(s,!!l),l);return{bg:this.sliceEventRanges(w.bg,f),fg:this.sliceEventRanges(w.fg,f)}}return{bg:[],fg:[]}}_sliceInteraction(i,e,s,l,...f){if(!i)return null;let w=uh(i.mutatedEvents,e,Pd(s,!!l),l);return{segs:this.sliceEventRanges(w.fg,f),affectedInstances:i.affectedEvents.instances,isEvent:i.isEvent}}_sliceDateSpan(i,e,s,l,f,...w){if(!i)return[];let z=Pd(e,!!s),W=Gl(i.range,z);if(W){let ie=function ug(r,i,e){let s=Rp({editable:!1},e),l=$h(s.refined,s.extra,"",r.allDay,!0,e);return{def:l,ui:jp(l,i),instance:rh(l.defId,r.range),range:r.range,isStart:!0,isEnd:!0}}(i=Object.assign(Object.assign({},i),{range:W}),l,f),oe=this.sliceRange(i.range,...w);for(let Re of oe)Re.eventRange=ie;return oe}return[]}sliceEventRanges(i,e){let s=[];for(let l of i)s.push(...this.sliceEventRange(l,e));return s}sliceEventRange(i,e){let s=i.range;this.forceDayIfListItem&&"list-item"===i.ui.display&&(s={start:s.start,end:cs(s.start,1)});let l=this.sliceRange(s,...e);for(let f of l)f.eventRange=i,f.isStart=i.isStart&&f.isStart,f.isEnd=i.isEnd&&f.isEnd;return l}}function Pd(r,i){let e=r.activeRange;return i?e:{start:Ls(e.start,r.slotMinTime.milliseconds),end:Ls(e.end,r.slotMaxTime.milliseconds-864e5)}}function bg(r,i,e){let{instances:s}=r.mutatedEvents;for(let l in s)if(!Wh(i.validRange,s[l].range))return!1;return Rv({eventDrag:r},e)}function Rv(r,i){let e=i.getCurrentData(),s=Object.assign({businessHours:e.businessHours,dateSelection:"",eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},r);return(i.pluginHooks.isPropsValid||Py)(s,i)}function Py(r,i,e={},s){return!(r.eventDrag&&!function Ry(r,i,e,s){let l=i.getCurrentData(),f=r.eventDrag,w=f.mutatedEvents,z=w.defs,W=w.instances,ie=Md(z,f.isEvent?r.eventUiBases:{"":l.selectionConfig});s&&(ie=Zc(ie,s));let oe=function Zh(r,i){return{defs:r.defs,instances:Xc(r.instances,e=>!i[e.instanceId])}}(r.eventStore,f.affectedEvents.instances),Re=oe.defs,je=oe.instances,Ye=Md(Re,r.eventUiBases);for(let Wt in W){let $t=W[Wt],ci=$t.range,zi=ie[$t.defId],kn=z[$t.defId];if(!zv(zi.constraints,ci,oe,r.businessHours,i))return!1;let{eventOverlap:xr}=i.options,Tr="function"==typeof xr?xr:null;for(let rs in je){let Bs=je[rs];if(al(ci,Bs.range)&&(!1===Ye[Bs.defId].overlap&&f.isEvent||!1===zi.overlap||Tr&&!Tr(new Vs(i,Re[Bs.defId],Bs),new Vs(i,kn,$t))))return!1}let eo=l.eventStore;for(let rs of zi.allows){let gd,Bs=Object.assign(Object.assign({},e),{range:$t.range,allDay:kn.allDay}),es=eo.defs[kn.defId];if(gd=es?new Vs(i,es,eo.instances[Wt]):new Vs(i,kn),!rs(iu(Bs,i),gd))return!1}}return!0}(r,i,e,s)||r.dateSelection&&!function zy(r,i,e,s){let l=r.eventStore,f=l.defs,w=l.instances,z=r.dateSelection,W=z.range,{selectionConfig:ie}=i.getCurrentData();if(s&&(ie=s(ie)),!zv(ie.constraints,W,l,r.businessHours,i))return!1;let{selectOverlap:oe}=i.options,Re="function"==typeof oe?oe:null;for(let je in w){let Ye=w[je];if(al(W,Ye.range)&&(!1===ie.overlap||Re&&!Re(new Vs(i,f[Ye.defId],Ye),null)))return!1}for(let je of ie.allows)if(!je(iu(Object.assign(Object.assign({},e),z),i),null))return!1;return!0}(r,i,e,s))}function zv(r,i,e,s,l){for(let f of r)if(!By(Fy(f,i,e,s,l),i))return!1;return!0}function Fy(r,i,e,s,l){return"businessHours"===r?sp($l(s,i,l)):"string"==typeof r?sp(wd(e,f=>f.groupId===r)):"object"==typeof r&&r?sp($l(r,i,l)):[]}function sp(r){let{instances:i}=r,e=[];for(let s in i)e.push(i[s].range);return e}function By(r,i){for(let e of r)if(Wh(e,i))return!0;return!1}const nf=/^(visible|hidden)$/;class xg extends vs{constructor(){super(...arguments),this.handleEl=i=>{this.el=i,eu(this.props.elRef,i)}}render(){let{props:i}=this,{liquid:e,liquidIsAbsolute:s}=i,l=e&&s,f=["fc-scroller"];return e&&f.push(s?"fc-scroller-liquid-absolute":"fc-scroller-liquid"),Mt("div",{ref:this.handleEl,className:f.join(" "),style:{overflowX:i.overflowX,overflowY:i.overflowY,left:l&&-(i.overcomeLeft||0)||"",right:l&&-(i.overcomeRight||0)||"",bottom:l&&-(i.overcomeBottom||0)||"",marginLeft:!l&&-(i.overcomeLeft||0)||"",marginRight:!l&&-(i.overcomeRight||0)||"",marginBottom:!l&&-(i.overcomeBottom||0)||"",maxHeight:i.maxHeight||""}},i.children)}needsXScrolling(){if(nf.test(this.props.overflowX))return!1;let{el:i}=this,e=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=i;for(let l=0;l<s.length;l+=1)if(s[l].getBoundingClientRect().width>e)return!0;return!1}needsYScrolling(){if(nf.test(this.props.overflowY))return!1;let{el:i}=this,e=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=i;for(let l=0;l<s.length;l+=1)if(s[l].getBoundingClientRect().height>e)return!0;return!1}getXScrollbarWidth(){return nf.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return nf.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Nu{constructor(i){this.masterCallback=i,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(e,s)=>{let{depths:l,currentMap:f}=this,w=!1,z=!1;null!==e?(w=s in f,f[s]=e,l[s]=(l[s]||0)+1,z=!0):(l[s]-=1,l[s]||(delete f[s],delete this.callbackMap[s],w=!0)),this.masterCallback&&(w&&this.masterCallback(null,String(s)),z&&this.masterCallback(e,String(s)))}}createRef(i){let e=this.callbackMap[i];return e||(e=this.callbackMap[i]=s=>{this.handleValue(s,String(i))}),e}collect(i,e,s){return function Du(r,i=0,e,s=1){let l=[];null==e&&(e=Object.keys(r).length);for(let f=i;f<e;f+=s){let w=r[f];void 0!==w&&l.push(w)}return l}(this.currentMap,i,e,s)}getAll(){return Jd(this.currentMap)}}function Fv(r,i){return r.liquid&&i.liquid}function Vy(r,i){return Ur(r,i,Ga)}function Bv(r,i){let e=[];for(let s of r){let l=s.span||1;for(let f=0;f<l;f+=1)e.push(Mt("col",{style:{width:"shrink"===s.width?Gy(i):s.width||"",minWidth:s.minWidth||""}}))}return Mt("colgroup",{},...e)}function Gy(r){return r??4}function wg(r,i){let e=["fc-scrollgrid-section",`fc-scrollgrid-section-${r.type}`,r.className];return i&&r.liquid&&null==r.maxHeight&&e.push("fc-scrollgrid-section-liquid"),r.isSticky&&e.push("fc-scrollgrid-section-sticky"),e}function op(r){return Mt("div",{className:"fc-scrollgrid-sticky-shim",style:{width:r.clientWidth,minWidth:r.tableMinWidth}})}function hd(r){let{stickyHeaderDates:i}=r;return(null==i||"auto"===i)&&(i="auto"===r.height||"auto"===r.viewHeight),i}function Nv(r){let{stickyFooterScrollbar:i}=r;return(null==i||"auto"===i)&&(i="auto"===r.height||"auto"===r.viewHeight),i}class Cg extends vs{constructor(){super(...arguments),this.processCols=Qn(i=>i,Vy),this.renderMicroColGroup=Qn(Bv),this.scrollerRefs=new Nu,this.scrollerElRefs=new Nu(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:i,state:e,context:s}=this,l=i.sections||[],f=this.processCols(i.cols),w=this.renderMicroColGroup(f,e.shrinkWidth),z=function su(r,i){let e=["fc-scrollgrid",i.theme.getClass("table")];return r&&e.push("fc-scrollgrid-liquid"),e}(i.liquid,s);i.collapsibleWidth&&z.push("fc-scrollgrid-collapsible");let oe,W=l.length,ie=0,Re=[],je=[],Ye=[];for(;ie<W&&"header"===(oe=l[ie]).type;)Re.push(this.renderSection(oe,w,!0)),ie+=1;for(;ie<W&&"body"===(oe=l[ie]).type;)je.push(this.renderSection(oe,w,!1)),ie+=1;for(;ie<W&&"footer"===(oe=l[ie]).type;)Ye.push(this.renderSection(oe,w,!0)),ie+=1;let Wt=!om();const $t={role:"rowgroup"};return Mt("table",{role:"grid",className:z.join(" "),style:{height:i.height}},!(Wt||!Re.length)&&Mt("thead",$t,...Re),!(Wt||!je.length)&&Mt("tbody",$t,...je),!(Wt||!Ye.length)&&Mt("tfoot",$t,...Ye),Wt&&Mt("tbody",$t,...Re,...je,...Ye))}renderSection(i,e,s){return"outerContent"in i?Mt(Vr,{key:i.key},i.outerContent):Mt("tr",{key:i.key,role:"presentation",className:wg(i,this.props.liquid).join(" ")},this.renderChunkTd(i,e,i.chunk,s))}renderChunkTd(i,e,s,l){if("outerContent"in s)return s.outerContent;let{props:f}=this,{forceYScrollbars:w,scrollerClientWidths:z,scrollerClientHeights:W}=this.state,ie=function Yy(r,i){return null!=i.maxHeight||Fv(r,i)}(f,i),oe=Fv(f,i),Re=f.liquid?w?"scroll":ie?"auto":"hidden":"visible",je=i.key,Ye=function Hy(r,i,e,s){let{expandRows:l}=e;return"function"==typeof i.content?i.content(e):Mt("table",{role:"presentation",className:[i.tableClassName,r.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:l?e.clientHeight:""}},e.tableColGroupNode,Mt(s?"thead":"tbody",{role:"presentation"},"function"==typeof i.rowContent?i.rowContent(e):i.rowContent))}(i,s,{tableColGroupNode:e,tableMinWidth:"",clientWidth:f.collapsibleWidth||void 0===z[je]?null:z[je],clientHeight:void 0!==W[je]?W[je]:null,expandRows:i.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},l);return Mt(l?"th":"td",{ref:s.elRef,role:"presentation"},Mt("div",{className:"fc-scroller-harness"+(oe?" fc-scroller-harness-liquid":"")},Mt(xg,{ref:this.scrollerRefs.createRef(je),elRef:this.scrollerElRefs.createRef(je),overflowY:Re,overflowX:f.liquid?"hidden":"visible",maxHeight:i.maxHeight,liquid:oe,liquidIsAbsolute:!0},Ye)))}_handleScrollerEl(i,e){let s=function rf(r,i){for(let e of r)if(e.key===i)return e;return null}(this.props.sections,e);s&&eu(s.chunk.scrollerElRef,i)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return function va(r){for(let i of r)if("shrink"===i.width)return!0;return!1}(this.props.cols)?function Ny(r){let i=function Cp(r,i){let e=r instanceof HTMLElement?[r]:r,s=[];for(let l=0;l<e.length;l+=1){let f=e[l].querySelectorAll(i);for(let w=0;w<f.length;w+=1)s.push(f[w])}return s}(r,".fc-scrollgrid-shrink"),e=0;for(let s of i)e=Math.max(e,Qt(s));return Math.ceil(e)}(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let i=function mg(){return cm||(cm=function gg(){let r=document.createElement("div");r.style.overflow="scroll",r.style.position="absolute",r.style.top="-9999px",r.style.left="-9999px",document.body.appendChild(r);let i=Qh(r);return document.body.removeChild(r),i}()),cm}(),{scrollerRefs:e,scrollerElRefs:s}=this,l=!1,f={},w={};for(let z in e.currentMap){let W=e.currentMap[z];if(W&&W.needsYScrolling()){l=!0;break}}for(let z of this.props.sections){let W=z.key,ie=s.currentMap[W];if(ie){let oe=ie.parentNode;f[W]=Math.floor(oe.getBoundingClientRect().width-(l?i.y:0)),w[W]=Math.floor(oe.getBoundingClientRect().height)}}return{forceYScrollbars:l,scrollerClientWidths:f,scrollerClientHeights:w}}}Cg.addStateEquality({scrollerClientWidths:Ga,scrollerClientHeights:Ga});class dm extends vs{constructor(){super(...arguments),this.handleEl=i=>{this.el=i,i&&Kh(i,this.props.seg)}}render(){const{props:i,context:e}=this,{options:s}=e,{seg:l}=i,{eventRange:f}=l,{ui:w}=f,z={event:new Vs(e,f.def,f.instance),view:e.viewApi,timeText:i.timeText,textColor:w.textColor,backgroundColor:w.backgroundColor,borderColor:w.borderColor,isDraggable:!i.disableDragging&&Up(l,e),isStartResizable:!i.disableResizing&&nu(l,e),isEndResizable:!i.disableResizing&&(r=l,r.isEnd&&r.eventRange.ui.durationEditable),isMirror:!!(i.isDragging||i.isResizing||i.isDateSelecting),isStart:!!l.isStart,isEnd:!!l.isEnd,isPast:!!i.isPast,isFuture:!!i.isFuture,isToday:!!i.isToday,isSelected:!!i.isSelected,isDragging:!!i.isDragging,isResizing:!!i.isResizing};var r;return Mt(ga,Object.assign({},i,{elRef:this.handleEl,elClasses:[...cg(z),...l.eventRange.ui.classNames,...i.elClasses||[]],renderProps:z,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:i.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount}))}componentDidUpdate(i){this.el&&this.props.seg!==i.seg&&Kh(this.el,this.props.seg)}}class Yv extends vs{render(){let{props:i,context:e}=this,{options:s}=e,{seg:l}=i,{ui:f}=l.eventRange,z=dh(l,s.eventTimeFormat||i.defaultTimeFormat,e,i.defaultDisplayEventTime,i.defaultDisplayEventEnd);return Mt(dm,Object.assign({},i,{elTag:"a",elStyle:{borderColor:f.borderColor,backgroundColor:f.backgroundColor},elAttrs:$p(l,e),defaultGenerator:Hv,timeText:z}),(W,ie)=>Mt(Vr,null,Mt(W,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:ie.textColor}}),!!ie.isStartResizable&&Mt("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!ie.isEndResizable&&Mt("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function Hv(r){return Mt("div",{className:"fc-event-main-frame"},r.timeText&&Mt("div",{className:"fc-event-time"},r.timeText),Mt("div",{className:"fc-event-title-container"},Mt("div",{className:"fc-event-title fc-sticky"},r.event.title||Mt(Vr,null,"\xa0"))))}const hm=r=>Mt(Dc.Consumer,null,i=>{let{options:e}=i,s={isAxis:r.isAxis,date:i.dateEnv.toDate(r.date),view:i.viewApi};return Mt(ga,Object.assign({},r,{elTag:r.elTag||"div",renderProps:s,generatorName:"nowIndicatorContent",customGenerator:e.nowIndicatorContent,classNameGenerator:e.nowIndicatorClassNames,didMount:e.nowIndicatorDidMount,willUnmount:e.nowIndicatorWillUnmount}))}),Vv=hn({day:"numeric"});class Cs extends vs{constructor(){super(...arguments),this.refineRenderProps=Ku(Gv)}render(){let{props:i,context:e}=this,{options:s}=e,l=this.refineRenderProps({date:i.date,dateProfile:i.dateProfile,todayRange:i.todayRange,isMonthStart:i.isMonthStart||!1,showDayNumber:i.showDayNumber,extraRenderProps:i.extraRenderProps,viewApi:e.viewApi,dateEnv:e.dateEnv,monthStartFormat:s.monthStartFormat});return Mt(ga,Object.assign({},i,{elClasses:[...ru(l,e.theme),...i.elClasses||[]],elAttrs:Object.assign(Object.assign({},i.elAttrs),l.isDisabled?{}:{"data-date":Su(i.date)}),renderProps:l,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:i.defaultGenerator,classNameGenerator:l.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount}))}}function sf(r){return!(!r.dayCellContent&&!Gh("dayCellContent",r))}function Gv(r){let{date:i,dateEnv:e,dateProfile:s,isMonthStart:l}=r,f=cd(i,r.todayRange,null,s),w=r.showDayNumber?e.format(i,l?r.monthStartFormat:Vv):"";return Object.assign(Object.assign(Object.assign({date:e.toDate(i),view:r.viewApi},f),{isMonthStart:l,dayNumberText:w}),r.extraRenderProps)}class Eg extends vs{render(){let{props:i}=this,{seg:e}=i;return Mt(dm,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:e.eventRange.ui.backgroundColor},defaultGenerator:pd,seg:e,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:i.isPast,isFuture:i.isFuture,isToday:i.isToday,disableDragging:!0,disableResizing:!0})}}function pd(r){let{title:i}=r.event;return i&&Mt("div",{className:"fc-event-title"},r.event.title)}function wh(r){return Mt("div",{className:`fc-${r}`})}const Sg=r=>Mt(Dc.Consumer,null,i=>{let{dateEnv:e,options:s}=i,{date:l}=r,f=s.weekNumberFormat||r.defaultFormat,w=e.computeWeekNumber(l),z=e.format(l,f);return Mt(ga,Object.assign({},r,{renderProps:{num:w,text:z,date:l},generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:jy,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount}))});function jy(r){return r.text}class Uy extends vs{constructor(){super(...arguments),this.state={titleId:C()},this.handleRootEl=i=>{this.rootEl=i,this.props.elRef&&eu(this.props.elRef,i)},this.handleDocumentMouseDown=i=>{const e=Xd(i);this.rootEl.contains(e)||this.handleCloseClick()},this.handleDocumentKeyDown=i=>{"Escape"===i.key&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:i}=this.props;i&&i()}}render(){let{theme:i,options:e}=this.context,{props:s,state:l}=this,f=["fc-popover",i.getClass("popover")].concat(s.extraClassNames||[]);return function Bn(r,i){var e=Mt(Dn,{__v:r,i});return e.containerInfo=i,e}(Mt("div",Object.assign({},s.extraAttrs,{id:s.id,className:f.join(" "),"aria-labelledby":l.titleId,ref:this.handleRootEl}),Mt("div",{className:"fc-popover-header "+i.getClass("popoverHeader")},Mt("span",{className:"fc-popover-title",id:l.titleId},s.title),Mt("span",{className:"fc-popover-close "+i.getIconClass("close"),title:e.closeHint,onClick:this.handleCloseClick})),Mt("div",{className:"fc-popover-body "+i.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:i}=this.context,{alignmentEl:e,alignGridTop:s}=this.props,{rootEl:l}=this,f=function Od(r){let i=um(r),e=r.getBoundingClientRect();for(let s of i){let l=qp(e,s.getBoundingClientRect());if(!l)return null;e=l}return e}(e);if(f){let w=l.getBoundingClientRect(),z=s?ko(e,".fc-scrollgrid").getBoundingClientRect().top:f.top,W=i?f.right-w.width:f.left;z=Math.max(z,10),W=Math.min(W,document.documentElement.clientWidth-10-w.width),W=Math.max(W,10);let ie=l.offsetParent.getBoundingClientRect();Mc(l,{top:z-ie.top,left:W-ie.left})}}}class Wy extends Y{constructor(){super(...arguments),this.handleRootEl=i=>{this.rootEl=i,i?this.context.registerInteractiveComponent(this,{el:i,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:i,dateEnv:e}=this.context,{props:s}=this,{startDate:l,todayRange:f,dateProfile:w}=s,z=e.format(l,i.dayPopoverFormat);return Mt(Cs,{elRef:this.handleRootEl,date:l,dateProfile:w,todayRange:f},(W,ie,oe)=>Mt(Uy,{elRef:oe.ref,id:s.id,title:z,extraClassNames:["fc-more-popover"].concat(oe.className||[]),extraAttrs:oe,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},sf(i)&&Mt(W,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(i,e,s,l){let{rootEl:f,props:w}=this;return i>=0&&i<s&&e>=0&&e<l?{dateProfile:w.dateProfile,dateSpan:Object.assign({allDay:!w.forceTimed,range:{start:w.startDate,end:w.endDate}},w.extraDateSpan),dayEl:f,rect:{left:0,top:0,right:s,bottom:l},layer:1}:null}}class jv extends vs{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:C()},this.handleLinkEl=i=>{this.linkEl=i,this.props.elRef&&eu(this.props.elRef,i)},this.handleClick=i=>{let{props:e,context:s}=this,{moreLinkClick:l}=s.options,f=Uv(e).start;function w(z){let{def:W,instance:ie,range:oe}=z.eventRange;return{event:new Vs(s,W,ie),start:s.dateEnv.toDate(oe.start),end:s.dateEnv.toDate(oe.end),isStart:z.isStart,isEnd:z.isEnd}}"function"==typeof l&&(l=l({date:f,allDay:!!e.allDayDate,allSegs:e.allSegs.map(w),hiddenSegs:e.hiddenSegs.map(w),jsEvent:i,view:s.viewApi})),l&&"popover"!==l?"string"==typeof l&&s.calendarApi.zoomTo(f,l):this.setState({isPopoverOpen:!0})},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:i,state:e}=this;return Mt(Dc.Consumer,null,s=>{let{viewApi:l,options:f,calendarApi:w}=s,{moreLinkText:z}=f,{moreCnt:W}=i,ie=Uv(i),oe="function"==typeof z?z.call(w,W):`+${W} ${z}`,Re=Gt(f.moreLinkHint,[W],oe),je={num:W,shortText:`+${W}`,text:oe,view:l};return Mt(Vr,null,!!i.moreCnt&&Mt(ga,{elTag:i.elTag||"a",elRef:this.handleLinkEl,elClasses:[...i.elClasses||[],"fc-more-link"],elStyle:i.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},i.elAttrs),K(this.handleClick)),{title:Re,"aria-expanded":e.isPopoverOpen,"aria-controls":e.isPopoverOpen?e.popoverId:""}),renderProps:je,generatorName:"moreLinkContent",customGenerator:f.moreLinkContent,defaultGenerator:i.defaultGenerator||$y,classNameGenerator:f.moreLinkClassNames,didMount:f.moreLinkDidMount,willUnmount:f.moreLinkWillUnmount},i.children),e.isPopoverOpen&&Mt(Wy,{id:e.popoverId,startDate:ie.start,endDate:ie.end,dateProfile:i.dateProfile,todayRange:i.todayRange,extraDateSpan:i.extraDateSpan,parentEl:this.parentEl,alignmentEl:i.alignmentElRef?i.alignmentElRef.current:this.linkEl,alignGridTop:i.alignGridTop,forceTimed:i.forceTimed,onClose:this.handlePopoverClose},i.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=ko(this.linkEl,".fc-view-harness"))}}function $y(r){return r.text}function Uv(r){if(r.allDayDate)return{start:r.allDayDate,end:cs(r.allDayDate,1)};let{hiddenSegs:i}=r;return{start:Wv(i),end:pm(i)}}function Wv(r){return r.reduce(Xy).eventRange.range.start}function Xy(r,i){return r.eventRange.range.start<i.eventRange.range.start?r:i}function pm(r){return r.reduce(ap).eventRange.range.end}function ap(r,i){return r.eventRange.range.end>i.eventRange.range.end?r:i}class $v{constructor(){this.handlers=[]}set(i){this.currentValue=i;for(let e of this.handlers)e(i)}subscribe(i){this.handlers.push(i),void 0!==this.currentValue&&i(this.currentValue)}}class fm extends $v{constructor(){super(...arguments),this.map=new Map}handle(i){const{map:e}=this;let s=!1;i.isActive?(e.set(i.id,i),s=!0):e.has(i.id)&&(e.delete(i.id),s=!0),s&&this.set(e)}}const kg=[],Xv={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},Zv=Object.assign(Object.assign({},Xv),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(r,i)=>"day"===i?"Today":`This ${r}`},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:r=>`Show ${r} more event${1===r?"":"s"}`});function qv(r){let i=r.length>0?r[0].code:"en",e=kg.concat(r),s={en:Zv};for(let l of e)s[l.code]=l;return{map:s,defaultCode:i}}function mm(r,i){return"object"!=typeof r||Array.isArray(r)?function Mg(r,i){let e=[].concat(r||[]),s=function kl(r,i){for(let e=0;e<r.length;e+=1){let s=r[e].toLocaleLowerCase().split("-");for(let l=s.length;l>0;l-=1){let f=s.slice(0,l).join("-");if(i[f])return i[f]}}return null}(e,i)||Zv;return gm(r,e,s)}(r,i):gm(r.code,[r.code],r)}function gm(r,i,e){let s=Hh([Xv,e],["buttonText"]);delete s.code;let{week:l}=s;return delete s.week,{codeArg:r,codes:i,week:l,simpleNumberFormat:new Intl.NumberFormat(r),options:s}}function ou(r){return{id:ue(),name:r.name,premiumReleaseDate:r.premiumReleaseDate?new Date(r.premiumReleaseDate):void 0,deps:r.deps||[],reducers:r.reducers||[],isLoadingFuncs:r.isLoadingFuncs||[],contextInit:[].concat(r.contextInit||[]),eventRefiners:r.eventRefiners||{},eventDefMemberAdders:r.eventDefMemberAdders||[],eventSourceRefiners:r.eventSourceRefiners||{},isDraggableTransformers:r.isDraggableTransformers||[],eventDragMutationMassagers:r.eventDragMutationMassagers||[],eventDefMutationAppliers:r.eventDefMutationAppliers||[],dateSelectionTransformers:r.dateSelectionTransformers||[],datePointTransforms:r.datePointTransforms||[],dateSpanTransforms:r.dateSpanTransforms||[],views:r.views||{},viewPropsTransformers:r.viewPropsTransformers||[],isPropsValid:r.isPropsValid||null,externalDefTransforms:r.externalDefTransforms||[],viewContainerAppends:r.viewContainerAppends||[],eventDropTransformers:r.eventDropTransformers||[],componentInteractions:r.componentInteractions||[],calendarInteractions:r.calendarInteractions||[],themeClasses:r.themeClasses||{},eventSourceDefs:r.eventSourceDefs||[],cmdFormatter:r.cmdFormatter,recurringTypes:r.recurringTypes||[],namedTimeZonedImpl:r.namedTimeZonedImpl,initialView:r.initialView||"",elementDraggingImpl:r.elementDraggingImpl,optionChangeHandlers:r.optionChangeHandlers||{},scrollGridImpl:r.scrollGridImpl||null,listenerRefiners:r.listenerRefiners||{},optionRefiners:r.optionRefiners||{},propSetHandlers:r.propSetHandlers||{}}}function of(r,i){return{premiumReleaseDate:lp(r.premiumReleaseDate,i.premiumReleaseDate),reducers:r.reducers.concat(i.reducers),isLoadingFuncs:r.isLoadingFuncs.concat(i.isLoadingFuncs),contextInit:r.contextInit.concat(i.contextInit),eventRefiners:Object.assign(Object.assign({},r.eventRefiners),i.eventRefiners),eventDefMemberAdders:r.eventDefMemberAdders.concat(i.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},r.eventSourceRefiners),i.eventSourceRefiners),isDraggableTransformers:r.isDraggableTransformers.concat(i.isDraggableTransformers),eventDragMutationMassagers:r.eventDragMutationMassagers.concat(i.eventDragMutationMassagers),eventDefMutationAppliers:r.eventDefMutationAppliers.concat(i.eventDefMutationAppliers),dateSelectionTransformers:r.dateSelectionTransformers.concat(i.dateSelectionTransformers),datePointTransforms:r.datePointTransforms.concat(i.datePointTransforms),dateSpanTransforms:r.dateSpanTransforms.concat(i.dateSpanTransforms),views:Object.assign(Object.assign({},r.views),i.views),viewPropsTransformers:r.viewPropsTransformers.concat(i.viewPropsTransformers),isPropsValid:i.isPropsValid||r.isPropsValid,externalDefTransforms:r.externalDefTransforms.concat(i.externalDefTransforms),viewContainerAppends:r.viewContainerAppends.concat(i.viewContainerAppends),eventDropTransformers:r.eventDropTransformers.concat(i.eventDropTransformers),calendarInteractions:r.calendarInteractions.concat(i.calendarInteractions),componentInteractions:r.componentInteractions.concat(i.componentInteractions),themeClasses:Object.assign(Object.assign({},r.themeClasses),i.themeClasses),eventSourceDefs:r.eventSourceDefs.concat(i.eventSourceDefs),cmdFormatter:i.cmdFormatter||r.cmdFormatter,recurringTypes:r.recurringTypes.concat(i.recurringTypes),namedTimeZonedImpl:i.namedTimeZonedImpl||r.namedTimeZonedImpl,initialView:r.initialView||i.initialView,elementDraggingImpl:r.elementDraggingImpl||i.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},r.optionChangeHandlers),i.optionChangeHandlers),scrollGridImpl:i.scrollGridImpl||r.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},r.listenerRefiners),i.listenerRefiners),optionRefiners:Object.assign(Object.assign({},r.optionRefiners),i.optionRefiners),propSetHandlers:Object.assign(Object.assign({},r.propSetHandlers),i.propSetHandlers)}}function lp(r,i){return void 0===r?i:void 0===i?r:new Date(Math.max(r.valueOf(),i.valueOf()))}class Yu extends Qc{}function Ag(r,i,e,s){if(i[r])return i[r];let l=function Jv(r,i,e,s){let l=e[r],f=s[r],w=oe=>l&&null!==l[oe]?l[oe]:f&&null!==f[oe]?f[oe]:null,z=w("component"),W=w("superType"),ie=null;if(W){if(W===r)throw new Error("Can't have a custom view type that references itself");ie=Ag(W,i,e,s)}return!z&&ie&&(z=ie.component),z?{type:r,component:z,defaults:Object.assign(Object.assign({},ie?ie.defaults:{}),l?l.rawOptions:{}),overrides:Object.assign(Object.assign({},ie?ie.overrides:{}),f?f.rawOptions:{})}:null}(r,i,e,s);return l&&(i[r]=l),l}function Dg(r){return Zc(r,Zy)}function Zy(r){let i="function"==typeof r?{component:r}:r,{component:e}=i;return i.content?e=Ig(i):e&&!(e.prototype instanceof vs)&&(e=Ig(Object.assign(Object.assign({},i),{content:e}))),{superType:i.type,component:e,rawOptions:i}}function Ig(r){return i=>Mt(Dc.Consumer,null,e=>Mt(ga,{elTag:"div",elClasses:Lp(e.viewSpec),renderProps:Object.assign(Object.assign({},i),{nextDayThreshold:e.options.nextDayThreshold}),generatorName:void 0,customGenerator:r.content,classNameGenerator:r.classNames,didMount:r.didMount,willUnmount:r.willUnmount}))}function Qv(r,i,e,s){let l=Dg(r),f=Dg(i.views),w=function vm(r,i){let s,e={};for(s in r)Ag(s,e,r,i);for(s in i)Ag(s,e,r,i);return e}(l,f);return Zc(w,z=>function Lg(r,i,e,s,l){let f=r.overrides.duration||r.defaults.duration||s.duration||e.duration,w=null,z="",W="",ie={};if(f&&(w=function qy(r){let i=JSON.stringify(r),e=Og[i];return void 0===e&&(e=Zt(r),Og[i]=e),e}(f),w)){let je=zn(w);z=je.unit,1===je.value&&(W=z,ie=i[z]?i[z].rawOptions:{})}let oe=je=>{let Ye=je.buttonText||{},Wt=r.defaults.buttonTextKey;return null!=Wt&&null!=Ye[Wt]?Ye[Wt]:null!=Ye[r.type]?Ye[r.type]:null!=Ye[W]?Ye[W]:null},Re=je=>{let Ye=je.buttonHints||{},Wt=r.defaults.buttonTextKey;return null!=Wt&&null!=Ye[Wt]?Ye[Wt]:null!=Ye[r.type]?Ye[r.type]:null!=Ye[W]?Ye[W]:null};return{type:r.type,component:r.component,duration:w,durationUnit:z,singleUnit:W,optionDefaults:r.defaults,optionOverrides:Object.assign(Object.assign({},ie),r.overrides),buttonTextOverride:oe(s)||oe(e)||r.overrides.buttonText,buttonTextDefault:oe(l)||r.defaults.buttonText||oe(hc)||r.type,buttonTitleOverride:Re(s)||Re(e)||r.overrides.buttonHint,buttonTitleDefault:Re(l)||r.defaults.buttonHint||Re(hc)}}(z,f,i,e,s))}Yu.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},Yu.prototype.baseIconClass="fc-icon",Yu.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},Yu.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},Yu.prototype.iconOverrideOption="buttonIcons",Yu.prototype.iconOverrideCustomButtonOption="icon",Yu.prototype.iconOverridePrefix="fc-icon-";let Og={};function s_(r){for(let i in r)if(r[i].isFetching)return!0;return!1}function o_(r,i,e,s){let l={};for(let f of i)l[f.sourceId]=f;return e&&(l=Pg(l,e,s)),Object.assign(Object.assign({},r),l)}function Pg(r,i,e){return _m(r,Xc(r,s=>function af(r,i,e){return Ch(r,e)?!e.options.lazyFetching||!r.fetchRange||r.isFetching||i.start<r.fetchRange.start||i.end>r.fetchRange.end:!r.latestFetchId}(s,i,e)),i,!1,e)}function _m(r,i,e,s,l){let f={};for(let w in r){let z=r[w];f[w]=i[w]?l_(z,e,s,l):z}return f}function l_(r,i,e,s){let{options:l,calendarApi:f}=s,w=s.pluginHooks.eventSourceDefs[r.sourceDefId],z=ue();return w.fetch({eventSource:r,range:i,isRefetch:e,context:s},W=>{let{rawEvents:ie}=W;l.eventSourceSuccess&&(ie=l.eventSourceSuccess.call(f,ie,W.response)||ie),r.success&&(ie=r.success.call(f,ie,W.response)||ie),s.dispatch({type:"RECEIVE_EVENTS",sourceId:r.sourceId,fetchId:z,fetchRange:i,rawEvents:ie})},W=>{let ie=!1;l.eventSourceFailure&&(l.eventSourceFailure.call(f,W),ie=!0),r.failure&&(r.failure(W),ie=!0),ie||console.warn(W.message,W),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:r.sourceId,fetchId:z,fetchRange:i,error:W})}),Object.assign(Object.assign({},r),{isFetching:!0,latestFetchId:z})}function ym(r,i){return Xc(r,e=>Ch(e,i))}function Ch(r,i){return!i.pluginHooks.eventSourceDefs[r.sourceDefId].ignoreRange}function c_(r,i){switch(i.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return i.selection;default:return r}}function bm(r,i){switch(i.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return i.eventInstanceId;default:return r}}function u_(r,i){let e;switch(i.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return e=i.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return r}}function xm(r,i){let e;switch(i.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return e=i.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return r}}function wm(r,i,e,s,l){return{header:r.headerToolbar?d_(r.headerToolbar,r,i,e,s,l):null,footer:r.footerToolbar?d_(r.footerToolbar,r,i,e,s,l):null}}function d_(r,i,e,s,l,f){let w={},z=[],W=!1;for(let ie in r){let Re=Ky(r[ie],i,e,s,l,f);w[ie]=Re.widgets,z.push(...Re.viewsWithButtons),W=W||Re.hasTitle}return{sectionWidgets:w,viewsWithButtons:z,hasTitle:W}}function Ky(r,i,e,s,l,f){let w="rtl"===i.direction,z=i.customButtons||{},W=e.buttonText||{},ie=i.buttonText||{},oe=e.buttonHints||{},Re=i.buttonHints||{},je=r?r.split(" "):[],Ye=[],Wt=!1;return{widgets:je.map(ci=>ci.split(",").map(zi=>{if("title"===zi)return Wt=!0,{buttonName:zi};let kn,xr,Tr,eo,rs,Bs;if(kn=z[zi])Tr=es=>{kn.click&&kn.click.call(es.target,es,es.target)},(eo=s.getCustomButtonIconClass(kn))||(eo=s.getIconClass(zi,w))||(rs=kn.text),Bs=kn.hint||kn.text;else if(xr=l[zi]){Ye.push(zi),Tr=()=>{f.changeView(zi)},(rs=xr.buttonTextOverride)||(eo=s.getIconClass(zi,w))||(rs=xr.buttonTextDefault);let es=xr.buttonTextOverride||xr.buttonTextDefault;Bs=Gt(xr.buttonTitleOverride||xr.buttonTitleDefault||i.viewHint,[es,zi],es)}else if(f[zi])if(Tr=()=>{f[zi]()},(rs=W[zi])||(eo=s.getIconClass(zi,w))||(rs=ie[zi]),"prevYear"===zi||"nextYear"===zi){let es="prevYear"===zi?"prev":"next";Bs=Gt(oe[es]||Re[es],[ie.year||"year","year"],ie[zi])}else Bs=es=>Gt(oe[zi]||Re[zi],[ie[es]||es,es],ie[zi]);return{buttonName:zi,buttonClick:Tr,buttonIcon:eo,buttonText:rs,buttonHint:Bs}})),viewsWithButtons:Ye,hasTitle:Wt}}class Jy{constructor(i,e,s){this.type=i,this.getCurrentData=e,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(i){return this.getCurrentData().options[i]}}const Qy=ou({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:r=>Array.isArray(r.events)?r.events:null,fetch(r,i){i({rawEvents:r.eventSource.meta})}}]}),up=ou({name:"func-event-source",eventSourceDefs:[{parseMeta:r=>"function"==typeof r.events?r.events:null,fetch(r,i,e){const{dateEnv:s}=r.context;!function Xp(r,i,e){let s=!1,l=function(z){s||(s=!0,i(z))},f=function(z){s||(s=!0,e(z))},w=r(l,f);w&&"function"==typeof w.then&&w.then(l,f)}(r.eventSource.meta.bind(null,rm(r.range,s)),f=>i({rawEvents:f}),e)}}]}),p_=ou({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:Ai,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:r=>!r.url||"json"!==r.format&&r.format?null:{url:r.url,format:"json",method:(r.method||"GET").toUpperCase(),extraParams:r.extraParams,startParam:r.startParam,endParam:r.endParam,timeZoneParam:r.timeZoneParam},fetch(r,i,e){const{meta:s}=r.eventSource,l=function e0(r,i,e){let f,w,z,W,{dateEnv:s,options:l}=e,ie={};return f=r.startParam,null==f&&(f=l.startParam),w=r.endParam,null==w&&(w=l.endParam),z=r.timeZoneParam,null==z&&(z=l.timeZoneParam),W="function"==typeof r.extraParams?r.extraParams():r.extraParams||{},Object.assign(ie,W),ie[f]=s.formatIso(i.start),ie[w]=s.formatIso(i.end),"local"!==s.timeZone&&(ie[z]=s.timeZone),ie}(s,r.range,r.context);(function dg(r,i,e){const s={method:r=r.toUpperCase()};return"GET"===r?i+=(-1===i.indexOf("?")?"?":"&")+new URLSearchParams(e):(s.body=new URLSearchParams(e),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(i,s).then(l=>{if(l.ok)return l.json().then(f=>[f,l],()=>{throw new Zp("Failure parsing JSON",l)});throw new Zp("Request failed",l)})})(s.method,s.url,l).then(([f,w])=>{i({rawEvents:f,response:w})},e)}}]}),cf=ou({name:"simple-recurring-event",recurringTypes:[{parse(r,i){if(r.daysOfWeek||r.startTime||r.endTime||r.startRecur||r.endRecur){let s,e={daysOfWeek:r.daysOfWeek||null,startTime:r.startTime||null,endTime:r.endTime||null,startRecur:r.startRecur?i.createMarker(r.startRecur):null,endRecur:r.endRecur?i.createMarker(r.endRecur):null};return r.duration&&(s=r.duration),!s&&r.startTime&&r.endTime&&(s=function nn(r,i){return{years:r.years-i.years,months:r.months-i.months,days:r.days-i.days,milliseconds:r.milliseconds-i.milliseconds}}(r.endTime,r.startTime)),{allDayGuess:!r.startTime&&!r.endTime,duration:s,typeData:e}}return null},expand(r,i,e){let s=Gl(i,{start:r.startRecur,end:r.endRecur});return s?function Rd(r,i,e,s){let l=r?Kd(r):null,f=jr(e.start),w=e.end,z=[];for(;f<w;){let W;(!l||l[f.getUTCDay()])&&(W=i?s.add(f,i):f,z.push(W)),f=cs(f,1)}return z}(r.daysOfWeek,r.startTime,s,e):[]}}],eventRefiners:{daysOfWeek:Ai,startTime:Zt,endTime:Zt,duration:Zt,startRecur:Ai,endRecur:Ai}}),m_=ou({name:"change-handler",optionChangeHandlers:{events(r,i){Rg([r],i)},eventSources:Rg}});function Rg(r,i){let e=Jd(i.getCurrentData().eventSources);if(1===e.length&&1===r.length&&Array.isArray(e[0]._raw)&&Array.isArray(r[0]))return void i.dispatch({type:"RESET_RAW_EVENTS",sourceId:e[0].sourceId,rawEvents:r[0]});let s=[];for(let l of r){let f=!1;for(let w=0;w<e.length;w+=1)if(e[w]._raw===l){e.splice(w,1),f=!0;break}f||s.push(l)}for(let l of e)i.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:l.sourceId});for(let l of s)i.calendarApi.addEventSource(l)}const t0=[Qy,up,p_,cf,m_,ou({name:"misc",isLoadingFuncs:[r=>s_(r.eventSources)],propSetHandlers:{dateProfile:function Cm(r,i){i.emitter.trigger("datesSet",Object.assign(Object.assign({},rm(r.activeRange,i.dateEnv)),{view:i.viewApi}))},eventStore:function zg(r,i){let{emitter:e}=i;e.hasHandlers("eventsSet")&&e.trigger("eventsSet",Pu(r,i))}}})];class g_{constructor(i,e){this.runTaskOption=i,this.drainedOption=e,this.queue=[],this.delayedRunner=new zh(this.drain.bind(this))}request(i,e){this.queue.push(i),this.delayedRunner.request(e)}pause(i){this.delayedRunner.pause(i)}resume(i,e){this.delayedRunner.resume(i,e)}drain(){let{queue:i}=this;for(;i.length;){let s,e=[];for(;s=i.shift();)this.runTask(s),e.push(s);this.drained(e)}}runTask(i){this.runTaskOption&&this.runTaskOption(i)}drained(i){this.drainedOption&&this.drainedOption(i)}}function Eh(r,i,e){let s;return s=/^(year|month)$/.test(r.currentRangeUnit)?r.currentRange:r.activeRange,e.formatRange(s.start,s.end,hn(i.titleFormat||function n0(r){let{currentRangeUnit:i}=r;if("year"===i)return{year:"numeric"};if("month"===i)return{year:"numeric",month:"long"};let e=xs(r.currentRange.start,r.currentRange.end);return null!==e&&e>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(r)),{isEndExclusive:r.isRangeAllDay,defaultSeparator:i.titleRangeSeparator})}class zd{constructor(i){this.computeCurrentViewData=Qn(this._computeCurrentViewData),this.organizeRawLocales=Qn(qv),this.buildLocale=Qn(mm),this.buildPluginHooks=function Kv(){let e,r=[],i=[];return(s,l)=>((!e||!Ur(s,r)||!Ur(l,i))&&(e=function mc(r,i){let e={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function l(f){for(let w of f){const z=w.name,W=e[z];void 0===W?(e[z]=w.id,l(w.deps),s=of(s,w)):W!==w.id&&console.warn(`Duplicate plugin '${z}'`)}}return r&&l(r),l(i),s}(s,l)),r=s,i=l,e)}(),this.buildDateEnv=Qn(r0),this.buildTheme=Qn(uf),this.parseToolbars=Qn(wm),this.buildViewSpecs=Qn(Qv),this.buildDateProfileGenerator=Ku(df),this.buildViewApi=Qn(hf),this.buildViewUiProps=Ku(s0),this.buildEventUiBySource=Qn(pf,Ga),this.buildEventUiBases=Qn(Em),this.parseContextBusinessHours=Ku(dp),this.buildTitle=Qn(Eh),this.emitter=new od,this.actionRunner=new g_(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=je=>{this.actionRunner.request(je)},this.props=i,this.actionRunner.pause();let e={},s=this.computeOptionsData(i.optionOverrides,e,i.calendarApi),l=s.calendarOptions.initialView||s.pluginHooks.initialView,f=this.computeCurrentViewData(l,s,i.optionOverrides,e);i.calendarApi.currentDataManager=this,this.emitter.setThisContext(i.calendarApi),this.emitter.setOptions(f.options);let w=function Xf(r,i){let e=r.initialDate;return null!=e?i.createMarker(e):ih(r.now,i)}(s.calendarOptions,s.dateEnv),z=f.dateProfileGenerator.build(w);Ul(z.activeRange,w)||(w=z.currentRange.start);let W={dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:i.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let je of s.pluginHooks.contextInit)je(W);let ie=function i_(r,i,e){let s=i?i.activeRange:null;return o_({},function cp(r,i){let e=Bp(i),s=[].concat(r.eventSources||[]),l=[];r.initialEvents&&s.unshift(r.initialEvents),r.events&&s.unshift(r.events);for(let f of s){let w=Xh(f,i,e);w&&l.push(w)}return l}(r,e),s,e)}(s.calendarOptions,z,W),oe={dynamicOptionOverrides:e,currentViewType:l,currentDate:w,dateProfile:z,businessHours:this.parseContextBusinessHours(W),eventSources:ie,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(W).selectionConfig},Re=Object.assign(Object.assign({},W),oe);for(let je of s.pluginHooks.reducers)Object.assign(oe,je(null,null,Re));Fg(oe,W)&&this.emitter.trigger("loading",!0),this.state=oe,this.updateData(),this.actionRunner.resume()}resetOptions(i,e){let{props:s}=this;void 0===e?s.optionOverrides=i:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),i),this.optionsForRefining.push(...e)),(void 0===e||e.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(i){let{props:e,state:s,emitter:l}=this,f=function fd(r,i){return"SET_OPTION"===i.type?Object.assign(Object.assign({},r),{[i.optionName]:i.rawOptionValue}):r}(s.dynamicOptionOverrides,i),w=this.computeOptionsData(e.optionOverrides,f,e.calendarApi),z=function e_(r,i){return"CHANGE_VIEW_TYPE"===i.type&&(r=i.viewType),r}(s.currentViewType,i),W=this.computeCurrentViewData(z,w,e.optionOverrides,f);e.calendarApi.currentDataManager=this,l.setThisContext(e.calendarApi),l.setOptions(W.options);let ie={dateEnv:w.dateEnv,options:w.calendarOptions,pluginHooks:w.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:l,getCurrentData:this.getCurrentData},{currentDate:oe,dateProfile:Re}=s;this.data&&this.data.dateProfileGenerator!==W.dateProfileGenerator&&(Re=W.dateProfileGenerator.build(oe)),oe=function $f(r,i){return"CHANGE_DATE"===i.type?i.dateMarker:r}(oe,i),Re=function t_(r,i,e,s){let l;switch(i.type){case"CHANGE_VIEW_TYPE":return s.build(i.dateMarker||e);case"CHANGE_DATE":return s.build(i.dateMarker);case"PREV":if(l=s.buildPrev(r,e),l.isValid)return l;break;case"NEXT":if(l=s.buildNext(r,e),l.isValid)return l}return r}(Re,i,oe,W.dateProfileGenerator),("PREV"===i.type||"NEXT"===i.type||!Ul(Re.currentRange,oe))&&(oe=Re.currentRange.start);let je=function n_(r,i,e,s){let l=e?e.activeRange:null;switch(i.type){case"ADD_EVENT_SOURCES":return o_(r,i.sources,l,s);case"REMOVE_EVENT_SOURCE":return function a_(r,i){return Xc(r,e=>e.sourceId!==i)}(r,i.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return e?Pg(r,l,s):r;case"FETCH_EVENT_SOURCES":return _m(r,i.sourceIds?Kd(i.sourceIds):ym(r,s),l,i.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function au(r,i,e,s){let l=r[i];return l&&e===l.latestFetchId?Object.assign(Object.assign({},r),{[i]:Object.assign(Object.assign({},l),{isFetching:!1,fetchRange:s})}):r}(r,i.sourceId,i.fetchId,i.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return r}}(s.eventSources,i,Re,ie),Ye=function ag(r,i,e,s,l){switch(i.type){case"RECEIVE_EVENTS":return function Yp(r,i,e,s,l,f){if(i&&e===i.latestFetchId){let w=ah(Qf(l,i,f),i,f);return s&&(w=$l(w,s,f)),us(Sd(r,i.sourceId),w)}return r}(r,e[i.sourceId],i.fetchId,i.fetchRange,i.rawEvents,l);case"RESET_RAW_EVENTS":return function Jf(r,i,e,s,l){const{defIdMap:f,instanceIdMap:w}=function fo(r){const{defs:i,instances:e}=r,s={},l={};for(let f in i){const w=i[f],{publicId:z}=w;z&&(s[z]=f)}for(let f in e){const z=i[e[f].defId],{publicId:W}=z;W&&(l[W]=f)}return{defIdMap:s,instanceIdMap:l}}(r);return $l(ah(Qf(e,i,l),i,l,!1,f,w),s,l)}(r,e[i.sourceId],i.rawEvents,s.activeRange,l);case"ADD_EVENTS":return function ja(r,i,e,s){return e&&(i=$l(i,e,s)),us(r,i)}(r,i.eventStore,s?s.activeRange:null,l);case"RESET_EVENTS":return i.eventStore;case"MERGE_EVENTS":return us(r,i.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?$l(r,s.activeRange,l):r;case"REMOVE_EVENTS":return function Oc(r,i){let{defs:e,instances:s}=r,l={},f={};for(let w in e)i.defs[w]||(l[w]=e[w]);for(let w in s)!i.instances[w]&&l[s[w].defId]&&(f[w]=s[w]);return{defs:l,instances:f}}(r,i.eventStore);case"REMOVE_EVENT_SOURCE":return Sd(r,i.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return wd(r,f=>!f.sourceId);case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return r}}(s.eventStore,i,je,Re,ie),$t=s_(je)&&!W.options.progressiveEventRendering&&s.renderableEventStore||Ye,{eventUiSingleBase:ci,selectionConfig:zi}=this.buildViewUiProps(ie),kn=this.buildEventUiBySource(je),Tr={dynamicOptionOverrides:f,currentViewType:z,currentDate:oe,dateProfile:Re,eventSources:je,eventStore:Ye,renderableEventStore:$t,selectionConfig:zi,eventUiBases:this.buildEventUiBases($t.defs,ci,kn),businessHours:this.parseContextBusinessHours(ie),dateSelection:c_(s.dateSelection,i),eventSelection:bm(s.eventSelection,i),eventDrag:u_(s.eventDrag,i),eventResize:xm(s.eventResize,i)},eo=Object.assign(Object.assign({},ie),Tr);for(let es of w.pluginHooks.reducers)Object.assign(Tr,es(s,i,eo));let rs=Fg(s,ie),Bs=Fg(Tr,ie);!rs&&Bs?l.trigger("loading",!0):rs&&!Bs&&l.trigger("loading",!1),this.state=Tr,e.onAction&&e.onAction(i)}updateData(){let{props:i,state:e}=this,s=this.data,l=this.computeOptionsData(i.optionOverrides,e.dynamicOptionOverrides,i.calendarApi),f=this.computeCurrentViewData(e.currentViewType,l,i.optionOverrides,e.dynamicOptionOverrides),w=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(e.dateProfile,f.options,l.dateEnv),calendarApi:i.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l),f),e),z=l.pluginHooks.optionChangeHandlers,W=s&&s.calendarOptions,ie=l.calendarOptions;if(W&&W!==ie){W.timeZone!==ie.timeZone&&(e.eventSources=w.eventSources=function r_(r,i,e){let s=i?i.activeRange:null;return _m(r,ym(r,e),s,!0,e)}(w.eventSources,e.dateProfile,w),e.eventStore=w.eventStore=Ed(w.eventStore,s.dateEnv,w.dateEnv),e.renderableEventStore=w.renderableEventStore=Ed(w.renderableEventStore,s.dateEnv,w.dateEnv));for(let oe in z)(-1!==this.optionsForHandling.indexOf(oe)||W[oe]!==ie[oe])&&z[oe](ie[oe],w)}this.optionsForHandling=[],i.onData&&i.onData(w)}computeOptionsData(i,e,s){if(!this.optionsForRefining.length&&i===this.stableOptionOverrides&&e===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:l,pluginHooks:f,localeDefaults:w,availableLocaleData:z,extra:W}=this.processRawCalendarOptions(i,e);ff(W);let ie=this.buildDateEnv(l.timeZone,l.locale,l.weekNumberCalculation,l.firstDay,l.weekText,f,z,l.defaultRangeSeparator),oe=this.buildViewSpecs(f.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,w),Re=this.buildTheme(l,f),je=this.parseToolbars(l,this.stableOptionOverrides,Re,oe,s);return this.stableCalendarOptionsData={calendarOptions:l,pluginHooks:f,dateEnv:ie,viewSpecs:oe,theme:Re,toolbarConfig:je,localeDefaults:w,availableRawLocales:z.map}}processRawCalendarOptions(i,e){let{locales:s,locale:l}=Au([hc,i,e]),f=this.organizeRawLocales(s),z=this.buildLocale(l||f.defaultCode,f.map).options,W=this.buildPluginHooks(i.plugins||[],t0),ie=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ac),pa),Yh),W.listenerRefiners),W.optionRefiners),oe={},Re=Au([hc,z,i,e]),je={},Ye=this.currentCalendarOptionsInput,Wt=this.currentCalendarOptionsRefined,$t=!1;for(let ci in Re)-1===this.optionsForRefining.indexOf(ci)&&(Re[ci]===Ye[ci]||$c[ci]&&ci in Ye&&$c[ci](Ye[ci],Re[ci]))?je[ci]=Wt[ci]:ie[ci]?(je[ci]=ie[ci](Re[ci]),$t=!0):oe[ci]=Ye[ci];return $t&&(this.currentCalendarOptionsInput=Re,this.currentCalendarOptionsRefined=je,this.stableOptionOverrides=i,this.stableDynamicOptionOverrides=e),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:W,availableLocaleData:f,localeDefaults:z,extra:oe}}_computeCurrentViewData(i,e,s,l){let f=e.viewSpecs[i];if(!f)throw new Error(`viewType "${i}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:w,extra:z}=this.processRawViewOptions(f,e.pluginHooks,e.localeDefaults,s,l);return ff(z),{viewSpec:f,options:w,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:f.optionDefaults.dateProfileGeneratorClass,duration:f.duration,durationUnit:f.durationUnit,usesMinMaxTime:f.optionDefaults.usesMinMaxTime,dateEnv:e.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:w.slotMinTime,slotMaxTime:w.slotMaxTime,showNonCurrentDates:w.showNonCurrentDates,dayCount:w.dayCount,dateAlignment:w.dateAlignment,dateIncrement:w.dateIncrement,hiddenDays:w.hiddenDays,weekends:w.weekends,nowInput:w.now,validRangeInput:w.validRange,visibleRangeInput:w.visibleRange,fixedWeekCount:w.fixedWeekCount}),viewApi:this.buildViewApi(i,this.getCurrentData,e.dateEnv)}}processRawViewOptions(i,e,s,l,f){let w=Au([hc,i.optionDefaults,s,l,i.optionOverrides,f]),z=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ac),pa),Yh),Ju),e.listenerRefiners),e.optionRefiners),W={},ie=this.currentViewOptionsInput,oe=this.currentViewOptionsRefined,Re=!1,je={};for(let Ye in w)w[Ye]===ie[Ye]||$c[Ye]&&$c[Ye](w[Ye],ie[Ye])?W[Ye]=oe[Ye]:(w[Ye]===this.currentCalendarOptionsInput[Ye]||$c[Ye]&&$c[Ye](w[Ye],this.currentCalendarOptionsInput[Ye])?Ye in this.currentCalendarOptionsRefined&&(W[Ye]=this.currentCalendarOptionsRefined[Ye]):z[Ye]?W[Ye]=z[Ye](w[Ye]):je[Ye]=w[Ye],Re=!0);return Re&&(this.currentViewOptionsInput=w,this.currentViewOptionsRefined=W),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:je}}}function r0(r,i,e,s,l,f,w,z){let W=mm(i||w.defaultCode,w.map);return new Nf({calendarSystem:"gregory",timeZone:r,namedTimeZoneImpl:f.namedTimeZonedImpl,locale:W,weekNumberCalculation:e,firstDay:s,weekText:l,cmdFormatter:f.cmdFormatter,defaultSeparator:z})}function uf(r,i){return new(i.themeClasses[r.themeSystem]||Yu)(r)}function df(r){return new(r.dateProfileGeneratorClass||nh)(r)}function hf(r,i,e){return new Jy(r,i,e)}function pf(r){return Zc(r,i=>i.ui)}function Em(r,i,e){let s={"":i};for(let l in r){let f=r[l];f.sourceId&&e[f.sourceId]&&(s[l]=e[f.sourceId])}return s}function s0(r){let{options:i}=r;return{eventUiSingleBase:lh({display:i.eventDisplay,editable:i.editable,startEditable:i.eventStartEditable,durationEditable:i.eventDurationEditable,constraint:i.eventConstraint,overlap:"boolean"==typeof i.eventOverlap?i.eventOverlap:void 0,allow:i.eventAllow,backgroundColor:i.eventBackgroundColor,borderColor:i.eventBorderColor,textColor:i.eventTextColor,color:i.eventColor},r),selectionConfig:lh({constraint:i.selectConstraint,overlap:"boolean"==typeof i.selectOverlap?i.selectOverlap:void 0,allow:i.selectAllow},r)}}function Fg(r,i){for(let e of i.pluginHooks.isLoadingFuncs)if(e(r))return!0;return!1}function dp(r){return function Mv(r,i){return ah(function Vp(r){let i;return i=!0===r?[{}]:Array.isArray(r)?r.filter(e=>e.daysOfWeek):"object"==typeof r&&r?[r]:[],i=i.map(e=>Object.assign(Object.assign({},Hp),e)),i}(r),null,i)}(r.options.businessHours,r)}function ff(r,i){for(let e in r)console.warn(`Unknown option '${e}'`+(i?` for view '${i}'`:""))}class o0 extends vs{render(){return Mt("div",{className:"fc-toolbar-chunk"},...this.props.widgetGroups.map(e=>this.renderWidgetGroup(e)))}renderWidgetGroup(i){let{props:e}=this,{theme:s}=this.context,l=[],f=!0;for(let w of i){let{buttonName:z,buttonClick:W,buttonText:ie,buttonIcon:oe,buttonHint:Re}=w;if("title"===z)f=!1,l.push(Mt("h2",{className:"fc-toolbar-title",id:e.titleId},e.title));else{let je=z===e.activeButton,Ye=!e.isTodayEnabled&&"today"===z||!e.isPrevEnabled&&"prev"===z||!e.isNextEnabled&&"next"===z,Wt=[`fc-${z}-button`,s.getClass("button")];je&&Wt.push(s.getClass("buttonActive")),l.push(Mt("button",{type:"button",title:"function"==typeof Re?Re(e.navUnit):Re,disabled:Ye,"aria-pressed":je,className:Wt.join(" "),onClick:W},ie||(oe?Mt("span",{className:oe,role:"img"}):"")))}}return l.length>1?Mt("div",{className:f&&s.getClass("buttonGroup")||""},...l):l[0]}}class Bg extends vs{render(){let l,f,{model:i,extraClassName:e}=this.props,s=!1,w=i.sectionWidgets,z=w.center;return w.left?(s=!0,l=w.left):l=w.start,w.right?(s=!0,f=w.right):f=w.end,Mt("div",{className:[e||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",l||[]),this.renderSection("center",z||[]),this.renderSection("end",f||[]))}renderSection(i,e){let{props:s}=this;return Mt(o0,{key:i,widgetGroups:e,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}}class v_ extends vs{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=i=>{this.el=i,eu(this.props.elRef,i),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:i,state:e}=this,{aspectRatio:s}=i,f="",w="";return s?null!==e.availableWidth?f=e.availableWidth/s:w=1/s*100+"%":f=i.height||"",Mt("div",{"aria-labelledby":i.labeledById,ref:this.handleEl,className:["fc-view-harness",s||i.liquid||i.height?"fc-view-harness-active":"fc-view-harness-passive"].join(" "),style:{height:f,paddingBottom:w}},i.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class a0 extends _s{constructor(i){super(i),this.handleSegClick=(e,s)=>{let{component:l}=this,{context:f}=l,w=Ru(s);if(w&&l.isValidSegDownEl(e.target)){let z=ko(e.target,".fc-event-forced-url"),W=z?z.querySelector("a[href]").href:"";f.emitter.trigger("eventClick",{el:s,event:new Vs(l.context,w.eventRange.def,w.eventRange.instance),jsEvent:e,view:f.viewApi}),W&&!e.defaultPrevented&&(window.location.href=W)}},this.destroy=T(i.el,"click",".fc-event",this.handleSegClick)}}class __ extends _s{constructor(i){super(i),this.handleEventElRemove=e=>{e===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(e,s)=>{Ru(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",e,s))},this.handleSegLeave=(e,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",e,s))},this.removeHoverListeners=function P(r,i,e,s){let l;return T(r,"mouseover",i,(f,w)=>{if(w!==l){l=w,e(f,w);let z=W=>{l=null,s(W,w),w.removeEventListener("mouseleave",z)};w.addEventListener("mouseleave",z)}})}(i.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(i,e,s){let{component:l}=this,{context:f}=l,w=Ru(s);(!e||l.isValidSegDownEl(e.target))&&f.emitter.trigger(i,{el:s,event:new Vs(f,w.eventRange.def,w.eventRange.instance),jsEvent:e,view:f.viewApi})}}class l0 extends Qd{constructor(){super(...arguments),this.buildViewContext=Qn(td),this.buildViewPropTransformers=Qn(c0),this.buildToolbarProps=Qn(y_),this.headerRef={current:null},this.footerRef={current:null},this.interactionsStore={},this.state={viewLabelId:C()},this.registerInteractiveComponent=(i,e)=>{let s=function Id(r,i){return{component:r,el:i.el,useEventCenter:null==i.useEventCenter||i.useEventCenter,isHitComboAllowed:i.isHitComboAllowed||null}}(i,e),w=[a0,__].concat(this.props.pluginHooks.componentInteractions).map(z=>new z(s));this.interactionsStore[i.uid]=w,Rc[i.uid]=s},this.unregisterInteractiveComponent=i=>{let e=this.interactionsStore[i.uid];if(e){for(let s of e)s.destroy();delete this.interactionsStore[i.uid]}delete Rc[i.uid]},this.resizeRunner=new zh(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=i=>{let{options:e}=this.props;e.handleWindowResize&&i.target===window&&this.resizeRunner.request(e.windowResizeDelay)}}render(){let z,{props:i}=this,{toolbarConfig:e,options:s}=i,l=this.buildToolbarProps(i.viewSpec,i.dateProfile,i.dateProfileGenerator,i.currentDate,ih(i.options.now,i.dateEnv),i.viewTitle),f=!1,w="";i.isHeightAuto||i.forPrint?w="":null!=s.height?f=!0:null!=s.contentHeight?w=s.contentHeight:z=Math.max(s.aspectRatio,.5);let W=this.buildViewContext(i.viewSpec,i.viewApi,i.options,i.dateProfileGenerator,i.dateEnv,i.theme,i.pluginHooks,i.dispatch,i.getCurrentData,i.emitter,i.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),ie=e.header&&e.header.hasTitle?this.state.viewLabelId:void 0;return Mt(Dc.Provider,{value:W},e.header&&Mt(Bg,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:e.header,titleId:ie},l)),Mt(v_,{liquid:f,height:w,aspectRatio:z,labeledById:ie},this.renderView(i),this.buildAppendContent()),e.footer&&Mt(Bg,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:e.footer,titleId:""},l)))}componentDidMount(){let{props:i}=this;this.calendarInteractions=i.pluginHooks.calendarInteractions.map(s=>new s(i)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:e}=i.pluginHooks;for(let s in e)e[s](i[s],i)}componentDidUpdate(i){let{props:e}=this,{propSetHandlers:s}=e.pluginHooks;for(let l in s)e[l]!==i[l]&&s[l](e[l],e)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let i of this.calendarInteractions)i.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:i}=this;return Mt(Vr,{},...i.pluginHooks.viewContainerAppends.map(s=>s(i)))}renderView(i){let{pluginHooks:e}=i,{viewSpec:s}=i,l={dateProfile:i.dateProfile,businessHours:i.businessHours,eventStore:i.renderableEventStore,eventUiBases:i.eventUiBases,dateSelection:i.dateSelection,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,isHeightAuto:i.isHeightAuto,forPrint:i.forPrint},f=this.buildViewPropTransformers(e.viewPropsTransformers);for(let z of f)Object.assign(l,z.transform(l,i));return Mt(s.component,Object.assign({},l))}}function y_(r,i,e,s,l,f){let w=e.build(l,void 0,!1),z=e.buildPrev(i,s,!1),W=e.buildNext(i,s,!1);return{title:f,activeButton:r.type,navUnit:r.singleUnit,isTodayEnabled:w.isValid&&!Ul(i.currentRange,l),isPrevEnabled:z.isValid,isNextEnabled:W.isValid}}function c0(r){return r.map(i=>new i)}class b_ extends vh{constructor(i,e={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;ol(()=>{ys(Mt(hg,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(l,f,w,z)=>(this.setClassNames(l),this.setHeight(f),Mt(jh.Provider,{value:this.customContentRenderId},Mt(l0,Object.assign({isHeightAuto:w,forPrint:z},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,ys(null,this.el),this.setClassNames([]),this.setHeight(""))},function ha(r){r.isConnected&&r.getRootNode&&Sn(r.getRootNode())}(i),this.el=i,this.renderRunner=new zh(this.handleRenderRequest),new zd({optionOverrides:e,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let i=this.isRendering;i?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),i&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){ol(()=>{super.updateSize()})}batchRendering(i){this.renderRunner.pause("batchRendering"),i(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(i,e){this.currentDataManager.resetOptions(i,e)}setClassNames(i){if(!Ur(i,this.currentClassNames)){let{classList:e}=this.el;for(let s of this.currentClassNames)e.remove(s);for(let s of i)e.add(s);this.currentClassNames=i}}setHeight(i){$d(this.el,"height",i)}}np.touchMouseIgnoreWait=500;let Hg=0,hp=0,gf=!1;class Hu{constructor(i){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{if(!this.shouldIgnoreMouse()&&function u0(r){return 0===r.button&&!r.ctrlKey}(e)&&this.tryStart(e)){let s=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=e=>{let s=this.createEventFromMouse(e);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup()},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let s=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let l=e.target;this.shouldIgnoreMove||l.addEventListener("touchmove",this.handleTouchMove),l.addEventListener("touchend",this.handleTouchEnd),l.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=e=>{let s=this.createEventFromTouch(e);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=e=>{if(this.isDragging){let s=e.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,function Vg(){Hg+=1,setTimeout(()=>{Hg-=1},np.touchMouseIgnoreWait)}()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let s=window.pageXOffset-this.prevScrollX+this.prevPageX,l=window.pageYOffset-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:l,deltaX:s-this.origPageX,deltaY:l-this.origPageY})}},this.containerEl=i,this.emitter=new od,i.addEventListener("mousedown",this.handleMouseDown),i.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function x_(){hp+=1,1===hp&&window.addEventListener("touchmove",w_,{passive:!1})}()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function Sm(){hp-=1,hp||window.removeEventListener("touchmove",w_,{passive:!1})}()}tryStart(i){let e=this.querySubjectEl(i);return!(!e||this.handleSelector&&!ko(i.target,this.handleSelector)||(this.subjectEl=e,this.isDragging=!0,this.wasTouchScroll=!1,0))}cleanup(){gf=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(i){return this.selector?ko(i.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Hg||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(gf=!0)}initScrollWatch(i){this.shouldWatchScroll&&(this.recordCoords(i),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(i){this.shouldWatchScroll&&(this.prevPageX=i.pageX,this.prevPageY=i.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(i,e){let s=0,l=0;return e?(this.origPageX=i.pageX,this.origPageY=i.pageY):(s=i.pageX-this.origPageX,l=i.pageY-this.origPageY),{origEvent:i,isTouch:!1,subjectEl:this.subjectEl,pageX:i.pageX,pageY:i.pageY,deltaX:s,deltaY:l}}createEventFromTouch(i,e){let l,f,s=i.touches,w=0,z=0;return s&&s.length?(l=s[0].pageX,f=s[0].pageY):(l=i.pageX,f=i.pageY),e?(this.origPageX=l,this.origPageY=f):(w=l-this.origPageX,z=f-this.origPageY),{origEvent:i,isTouch:!0,subjectEl:this.subjectEl,pageX:l,pageY:f,deltaX:w,deltaY:z}}}function w_(r){gf&&r.preventDefault()}class d0{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(i,e,s){this.sourceEl=i,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=e-window.pageXOffset,this.origScreenY=s-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(i,e){this.deltaX=i-window.pageXOffset-this.origScreenX,this.deltaY=e-window.pageYOffset-this.origScreenY,this.updateElPosition()}setIsVisible(i){i?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=i,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=i)}stop(i,e){let s=()=>{this.cleanup(),e()};i&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(i,e){let s=this.mirrorEl,l=this.sourceEl.getBoundingClientRect();s.style.transition="top "+e+"ms,left "+e+"ms",Mc(s,{left:l.left,top:l.top}),function X(r,i){let e=s=>{i(s),B.forEach(l=>{r.removeEventListener(l,e)})};B.forEach(s=>{r.addEventListener(s,e)})}(s,()=>{s.style.transition="",i()})}cleanup(){this.mirrorEl&&(Ud(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Mc(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let i=this.sourceElRect,e=this.mirrorEl;return e||(e=this.mirrorEl=this.sourceEl.cloneNode(!0),e.style.userSelect="none",e.style.webkitUserSelect="none",e.classList.add("fc-event-dragging"),Mc(e,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:i.right-i.left,height:i.bottom-i.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(e)),e}}class C_ extends y{constructor(i,e){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=i,this.doesListening=e,this.scrollTop=this.origScrollTop=i.getScrollTop(),this.scrollLeft=this.origScrollLeft=i.getScrollLeft(),this.scrollWidth=i.getScrollWidth(),this.scrollHeight=i.getScrollHeight(),this.clientWidth=i.getClientWidth(),this.clientHeight=i.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(i){this.scrollController.setScrollTop(i),this.doesListening||(this.scrollTop=Math.max(Math.min(i,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(i){this.scrollController.setScrollLeft(i),this.doesListening||(this.scrollLeft=Math.max(Math.min(i,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class E_ extends C_{constructor(i,e){super(new O(i),e)}getEventTarget(){return this.scrollController.el}computeClientRect(){return Fu(this.scrollController.el)}}class Gg extends C_{constructor(i){super(new S,i)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const S_="function"==typeof performance?performance.now:Date.now;class vf{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let i=this.computeBestEdge(this.pointerScreenX+window.pageXOffset,this.pointerScreenY+window.pageYOffset);if(i){let e=S_();this.handleSide(i,(e-this.msSinceRequest)/1e3),this.requestAnimation(e)}else this.isAnimating=!1}}}start(i,e,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(i,e))}handleMove(i,e){if(this.isEnabled){let s=i-window.pageXOffset,l=e-window.pageYOffset,f=null===this.pointerScreenY?0:l-this.pointerScreenY,w=null===this.pointerScreenX?0:s-this.pointerScreenX;f<0?this.everMovedUp=!0:f>0&&(this.everMovedDown=!0),w<0?this.everMovedLeft=!0:w>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=l,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(S_()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let i of this.scrollCaches)i.destroy();this.scrollCaches=null}}requestAnimation(i){this.msSinceRequest=i,requestAnimationFrame(this.animate)}handleSide(i,e){let{scrollCache:s}=i,{edgeThreshold:l}=this,f=l-i.distance,w=f*f/(l*l)*this.maxVelocity*e,z=1;switch(i.name){case"left":z=-1;case"right":s.setScrollLeft(s.getScrollLeft()+w*z);break;case"top":z=-1;case"bottom":s.setScrollTop(s.getScrollTop()+w*z)}}computeBestEdge(i,e){let{edgeThreshold:s}=this,l=null,f=this.scrollCaches||[];for(let w of f){let z=w.clientRect,W=i-z.left,ie=z.right-i,oe=e-z.top,Re=z.bottom-e;W>=0&&ie>=0&&oe>=0&&Re>=0&&(oe<=s&&this.everMovedUp&&w.canScrollUp()&&(!l||l.distance>oe)&&(l={scrollCache:w,name:"top",distance:oe}),Re<=s&&this.everMovedDown&&w.canScrollDown()&&(!l||l.distance>Re)&&(l={scrollCache:w,name:"bottom",distance:Re}),W<=s&&this.everMovedLeft&&w.canScrollLeft()&&(!l||l.distance>W)&&(l={scrollCache:w,name:"left",distance:W}),ie<=s&&this.everMovedRight&&w.canScrollRight()&&(!l||l.distance>ie)&&(l={scrollCache:w,name:"right",distance:ie}))}return l}buildCaches(i){return this.queryScrollEls(i).map(e=>e===window?new Gg(!1):new E_(e,!1))}queryScrollEls(i){let e=[];for(let s of this.scrollQuery)"object"==typeof s?e.push(s):e.push(...Array.prototype.slice.call(i.getRootNode().querySelectorAll(s)));return e}}class pp extends Bu{constructor(i,e){super(i),this.containerEl=i,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=l=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,function Qe(r){r.style.userSelect="none",r.style.webkitUserSelect="none",r.addEventListener("selectstart",d)}(document.body),function tt(r){r.addEventListener("contextmenu",d)}(document.body),l.isTouch||l.origEvent.preventDefault(),this.emitter.trigger("pointerdown",l),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(l.subjectEl,l.pageX,l.pageY),this.startDelay(l),this.minDistance||this.handleDistanceSurpassed(l)))},this.onPointerMove=l=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",l),!this.isDistanceSurpassed){let w,f=this.minDistance,{deltaX:z,deltaY:W}=l;w=z*z+W*W,w>=f*f&&this.handleDistanceSurpassed(l)}this.isDragging&&("scroll"!==l.origEvent.type&&(this.mirror.handleMove(l.pageX,l.pageY),this.autoScroller.handleMove(l.pageX,l.pageY)),this.emitter.trigger("dragmove",l))}},this.onPointerUp=l=>{this.isInteracting&&(this.isInteracting=!1,function et(r){r.style.userSelect="",r.style.webkitUserSelect="",r.removeEventListener("selectstart",d)}(document.body),function st(r){r.removeEventListener("contextmenu",d)}(document.body),this.emitter.trigger("pointerup",l),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(l)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new Hu(i);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),e&&(s.selector=e),this.mirror=new d0,this.autoScroller=new vf}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(i){"number"==typeof this.delay?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(i)},this.delay):this.handleDelayEnd(i)}handleDelayEnd(i){this.isDelayEnded=!0,this.tryStartDrag(i)}handleDistanceSurpassed(i){this.isDistanceSurpassed=!0,this.tryStartDrag(i)}tryStartDrag(i){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(i.pageX,i.pageY,this.containerEl),this.emitter.trigger("dragstart",i),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())}tryStopDrag(i){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,i))}stopDrag(i){this.isDragging=!1,this.emitter.trigger("dragend",i)}setIgnoreMove(i){this.pointer.shouldIgnoreMove=i}setMirrorIsVisible(i){this.mirror.setIsVisible(i)}setMirrorNeedsRevert(i){this.mirrorNeedsRevert=i}setAutoScrollEnabled(i){this.autoScroller.isEnabled=i}}class h0{constructor(i){this.origRect=tp(i),this.scrollCaches=um(i).map(e=>new E_(e,!0))}destroy(){for(let i of this.scrollCaches)i.destroy()}computeLeft(){let i=this.origRect.left;for(let e of this.scrollCaches)i+=e.origScrollLeft-e.getScrollLeft();return i}computeTop(){let i=this.origRect.top;for(let e of this.scrollCaches)i+=e.origScrollTop-e.getScrollTop();return i}isWithinClipping(i,e){let s={left:i,top:e};for(let l of this.scrollCaches)if(!T_(l.getEventTarget())&&!zc(s,l.clientRect))return!1;return!0}}function T_(r){let i=r.tagName;return"HTML"===i||"BODY"===i}class _f{constructor(i,e){this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:l}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(l.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):l.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=e,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("dragmove",this.handleDragMove),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd),this.dragging=i,this.emitter=new od}processFirstCoord(i){let f,e={left:i.pageX,top:i.pageY},s=e,l=i.subjectEl;l instanceof HTMLElement&&(f=tp(l),s=function ld(r,i){return{left:Math.min(Math.max(r.left,i.left),i.right),top:Math.min(Math.max(r.top,i.top),i.bottom)}}(s,f));let w=this.initialHit=this.queryHitForOffset(s.left,s.top);if(w){if(this.useSubjectCenter&&f){let z=qp(f,w.rect);z&&(s=function Kp(r){return{left:(r.left+r.right)/2,top:(r.top+r.bottom)/2}}(z))}this.coordAdjust=function _h(r,i){return{left:r.left-i.left,top:r.top-i.top}}(s,e)}else this.coordAdjust={left:0,top:0}}handleMove(i,e){let s=this.queryHitForOffset(i.pageX+this.coordAdjust.left,i.pageY+this.coordAdjust.top);(e||!yf(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,i))}prepareHits(){this.offsetTrackers=Zc(this.droppableStore,i=>(i.component.prepareHits(),new h0(i.el)))}releaseHits(){let{offsetTrackers:i}=this;for(let e in i)i[e].destroy();this.offsetTrackers={}}queryHitForOffset(i,e){let{droppableStore:s,offsetTrackers:l}=this,f=null;for(let w in s){let z=s[w].component,W=l[w];if(W&&W.isWithinClipping(i,e)){let ie=W.computeLeft(),oe=W.computeTop(),Re=i-ie,je=e-oe,{origRect:Ye}=W,Wt=Ye.right-Ye.left,$t=Ye.bottom-Ye.top;if(Re>=0&&Re<Wt&&je>=0&&je<$t){let ci=z.queryHit(Re,je,Wt,$t);ci&&Wh(ci.dateProfile.activeRange,ci.dateSpan.range)&&(!f||ci.layer>f.layer)&&(ci.componentId=w,ci.context=z.context,ci.rect.left+=ie,ci.rect.right+=ie,ci.rect.top+=oe,ci.rect.bottom+=oe,f=ci)}}}return f}}function yf(r,i){return!r&&!i||!!r==!!i&&function zu(r,i){return function jl(r,i){return(null===r.start?null:r.start.valueOf())===(null===i.start?null:i.start.valueOf())&&(null===r.end?null:r.end.valueOf())===(null===i.end?null:i.end.valueOf())}(r.range,i.range)&&r.allDay===i.allDay&&function fh(r,i){for(let e in i)if("range"!==e&&"allDay"!==e&&r[e]!==i[e])return!1;for(let e in r)if(!(e in i))return!1;return!0}(r,i)}(r.dateSpan,i.dateSpan)}function Zl(r,i){let e={};for(let s of i.pluginHooks.datePointTransforms)Object.assign(e,s(r,i));return Object.assign(e,function Vu(r,i){return{date:i.toDate(r.range.start),dateStr:i.formatIso(r.range.start,{omitTime:r.allDay}),allDay:r.allDay}}(r,i.dateEnv)),e}let jg=(()=>{class r extends _s{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=z=>{let W=z.origEvent.target,{component:ie,dragging:oe}=this,{mirror:Re}=oe,{options:je}=ie.context,Ye=ie.context;this.subjectEl=z.subjectEl;let Wt=this.subjectSeg=Ru(z.subjectEl),ci=(this.eventRange=Wt.eventRange).instance.instanceId;this.relevantEvents=sd(Ye.getCurrentData().eventStore,ci),oe.minDistance=z.isTouch?0:je.eventDragMinDistance,oe.delay=z.isTouch&&ci!==ie.props.eventSelection?function M_(r){let{options:i}=r.context,e=i.eventLongPressDelay;return null==e&&(e=i.longPressDelay),e}(ie):null,Re.parentNode=je.fixedMirrorParent?je.fixedMirrorParent:ko(W,".fc"),Re.revertDuration=je.dragRevertDuration;let zi=ie.isValidSegDownEl(W)&&!ko(W,".fc-event-resizer");oe.setIgnoreMove(!zi),this.isDragging=zi&&z.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=z=>{let W=this.component.context,ie=this.eventRange,oe=ie.instance.instanceId;z.isTouch?oe!==this.component.props.eventSelection&&W.dispatch({type:"SELECT_EVENT",eventInstanceId:oe}):W.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(W.calendarApi.unselect(z),W.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Vs(W,ie.def,ie.instance),jsEvent:z.origEvent,view:W.viewApi}))},this.handleHitUpdate=(z,W)=>{if(!this.isDragging)return;let ie=this.relevantEvents,oe=this.hitDragging.initialHit,Re=this.component.context,je=null,Ye=null,Wt=null,$t=!1,ci={affectedEvents:ie,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(z){je=z.context;let zi=je.options;Re===je||zi.editable&&zi.droppable?(Ye=function k_(r,i,e){let s=r.dateSpan,l=i.dateSpan,f=s.range.start,w=l.range.start,z={};s.allDay!==l.allDay&&(z.allDay=l.allDay,z.hasEnd=i.context.options.allDayMaintainDuration,l.allDay&&(f=jr(f)));let W=Wl(f,w,r.context.dateEnv,r.componentId===i.componentId?r.largeUnit:null);W.milliseconds&&(z.allDay=!1);let ie={datesDelta:W,standardProps:z};for(let oe of e)oe(ie,r,i);return ie}(oe,z,je.getCurrentData().pluginHooks.eventDragMutationMassagers),Ye&&(Wt=ad(ie,je.getCurrentData().eventUiBases,Ye,je),ci.mutatedEvents=Wt,bg(ci,z.dateProfile,je)||($t=!0,Ye=null,Wt=null,ci.mutatedEvents={defs:{},instances:{}}))):je=null}this.displayDrag(je,ci),$t?Ce():Ve(),W||(Re===je&&yf(oe,z)&&(Ye=null),this.dragging.setMirrorNeedsRevert(!Ye),this.dragging.setMirrorIsVisible(!z||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=je,this.validMutation=Ye,this.mutatedRelevantEvents=Wt)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=z=>{if(this.isDragging){let W=this.component.context,ie=W.viewApi,{receivingContext:oe,validMutation:Re}=this,je=this.eventRange.def,Ye=this.eventRange.instance,Wt=new Vs(W,je,Ye),$t=this.relevantEvents,ci=this.mutatedRelevantEvents,{finalHit:zi}=this.hitDragging;if(this.clearDrag(),W.emitter.trigger("eventDragStop",{el:this.subjectEl,event:Wt,jsEvent:z.origEvent,view:ie}),Re){if(oe===W){let kn=new Vs(W,ci.defs[je.defId],Ye?ci.instances[Ye.instanceId]:null);W.dispatch({type:"MERGE_EVENTS",eventStore:ci});let xr={oldEvent:Wt,event:kn,relatedEvents:Pu(ci,W,Ye),revert(){W.dispatch({type:"MERGE_EVENTS",eventStore:$t})}},Tr={};for(let eo of W.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(Tr,eo(Re,W));W.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},xr),Tr),{el:z.subjectEl,delta:Re.datesDelta,jsEvent:z.origEvent,view:ie})),W.emitter.trigger("eventChange",xr)}else if(oe){let kn={event:Wt,relatedEvents:Pu($t,W,Ye),revert(){W.dispatch({type:"MERGE_EVENTS",eventStore:$t})}};W.emitter.trigger("eventLeave",Object.assign(Object.assign({},kn),{draggedEl:z.subjectEl,view:ie})),W.dispatch({type:"REMOVE_EVENTS",eventStore:$t}),W.emitter.trigger("eventRemove",kn);let Tr=ci.instances[Ye.instanceId],eo=new Vs(oe,ci.defs[je.defId],Tr);oe.dispatch({type:"MERGE_EVENTS",eventStore:ci});let rs={event:eo,relatedEvents:Pu(ci,oe,Tr),revert(){oe.dispatch({type:"REMOVE_EVENTS",eventStore:ci})}};oe.emitter.trigger("eventAdd",rs),z.isTouch&&oe.dispatch({type:"SELECT_EVENT",eventInstanceId:Ye.instanceId}),oe.emitter.trigger("drop",Object.assign(Object.assign({},Zl(zi.dateSpan,oe)),{draggedEl:z.subjectEl,jsEvent:z.origEvent,view:zi.context.viewApi})),oe.emitter.trigger("eventReceive",Object.assign(Object.assign({},rs),{draggedEl:z.subjectEl,view:zi.context.viewApi}))}}else W.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:s}=this,{options:l}=s.context,f=this.dragging=new pp(e.el);f.pointer.selector=r.SELECTOR,f.touchScrollAllowed=!1,f.autoScroller.isEnabled=l.dragScroll;let w=this.hitDragging=new _f(this.dragging,Rc);w.useSubjectCenter=e.useEventCenter,w.emitter.on("pointerdown",this.handlePointerDown),w.emitter.on("dragstart",this.handleDragStart),w.emitter.on("hitupdate",this.handleHitUpdate),w.emitter.on("pointerup",this.handlePointerUp),w.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,s){let f=this.receivingContext;f&&f!==e&&f.dispatch(f===this.component.context?{type:"SET_EVENT_DRAG",state:{affectedEvents:s.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}:{type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:s})}clearDrag(){let e=this.component.context,{receivingContext:s}=this;s&&s.dispatch({type:"UNSET_EVENT_DRAG"}),e!==s&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return r.SELECTOR=".fc-event-draggable, .fc-event-resizable",r})();const D_={fixedMirrorParent:Ai},I_={dateClick:Ai,eventDragStart:Ai,eventDragStop:Ai,eventDrop:Ai,eventResizeStart:Ai,eventResizeStop:Ai,eventResize:Ai,drop:Ai,eventReceive:Ai,eventLeave:Ai};np.dataAttrPrefix="";var f0=ou({name:"@fullcalendar/interaction",componentInteractions:[class Fd extends _s{constructor(i){super(i),this.handlePointerDown=s=>{let{dragging:l}=this;l.setIgnoreMove(!this.component.isValidDateDownEl(s.origEvent.target))},this.handleDragEnd=s=>{let{component:l}=this,{pointer:f}=this.dragging;if(!f.wasTouchScroll){let{initialHit:w,finalHit:z}=this.hitDragging;if(w&&z&&yf(w,z)){let{context:W}=l,ie=Object.assign(Object.assign({},Zl(w.dateSpan,W)),{dayEl:w.dayEl,jsEvent:s.origEvent,view:W.viewApi||W.calendarApi.view});W.emitter.trigger("dateClick",ie)}}},this.dragging=new pp(i.el),this.dragging.autoScroller.isEnabled=!1;let e=this.hitDragging=new _f(this.dragging,gh(i));e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class Gu extends _s{constructor(i){super(i),this.dragSelection=null,this.handlePointerDown=w=>{let{component:z,dragging:W}=this,{options:ie}=z.context,oe=ie.selectable&&z.isValidDateDownEl(w.origEvent.target);W.setIgnoreMove(!oe),W.delay=w.isTouch?function Bd(r){let{options:i}=r.context,e=i.selectLongPressDelay;return null==e&&(e=i.longPressDelay),e}(z):null},this.handleDragStart=w=>{this.component.context.calendarApi.unselect(w)},this.handleHitUpdate=(w,z)=>{let{context:W}=this.component,ie=null,oe=!1;if(w){let Re=this.hitDragging.initialHit;w.componentId===Re.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(Re,w)||(ie=function Tm(r,i,e){let s=r.dateSpan,l=i.dateSpan,f=[s.range.start,s.range.end,l.range.start,l.range.end];f.sort(Ut);let w={};for(let z of e){let W=z(r,i);if(!1===W)return null;W&&Object.assign(w,W)}return w.range={start:f[0],end:f[3]},w.allDay=s.allDay,w}(Re,w,W.pluginHooks.dateSelectionTransformers)),(!ie||!function Pv(r,i,e){return!!Wh(i.validRange,r.range)&&Rv({dateSelection:r},e)}(ie,w.dateProfile,W))&&(oe=!0,ie=null)}ie?W.dispatch({type:"SELECT_DATES",selection:ie}):z||W.dispatch({type:"UNSELECT_DATES"}),oe?Ce():Ve(),z||(this.dragSelection=ie)},this.handlePointerUp=w=>{this.dragSelection&&(qh(this.dragSelection,w,this.component.context),this.dragSelection=null)};let{component:e}=i,{options:s}=e.context,l=this.dragging=new pp(i.el);l.touchScrollAllowed=!1,l.minDistance=s.selectMinDistance||0,l.autoScroller.isEnabled=s.dragScroll;let f=this.hitDragging=new _f(this.dragging,gh(i));f.emitter.on("pointerdown",this.handlePointerDown),f.emitter.on("dragstart",this.handleDragStart),f.emitter.on("hitupdate",this.handleHitUpdate),f.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},jg,class Ug extends _s{constructor(i){super(i),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=f=>{let{component:w}=this,W=Ru(this.querySegEl(f)),ie=this.eventRange=W.eventRange;this.dragging.minDistance=w.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(f.origEvent.target)||f.isTouch&&this.component.props.eventSelection!==ie.instance.instanceId)},this.handleDragStart=f=>{let{context:w}=this.component,z=this.eventRange;this.relevantEvents=sd(w.getCurrentData().eventStore,this.eventRange.instance.instanceId);let W=this.querySegEl(f);this.draggingSegEl=W,this.draggingSeg=Ru(W),w.calendarApi.unselect(),w.emitter.trigger("eventResizeStart",{el:W,event:new Vs(w,z.def,z.instance),jsEvent:f.origEvent,view:w.viewApi})},this.handleHitUpdate=(f,w,z)=>{let{context:W}=this.component,ie=this.relevantEvents,oe=this.hitDragging.initialHit,Re=this.eventRange.instance,je=null,Ye=null,Wt=!1,$t={affectedEvents:ie,mutatedEvents:{defs:{},instances:{}},isEvent:!0};f&&(f.componentId===oe.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(oe,f)||(je=function p0(r,i,e,s){let l=r.context.dateEnv,z=Wl(r.dateSpan.range.start,i.dateSpan.range.start,l,r.largeUnit);if(e){if(l.add(s.start,z)<s.end)return{startDelta:z}}else if(l.add(s.end,z)>s.start)return{endDelta:z};return null}(oe,f,z.subjectEl.classList.contains("fc-event-resizer-start"),Re.range))),je&&(Ye=ad(ie,W.getCurrentData().eventUiBases,je,W),$t.mutatedEvents=Ye,bg($t,f.dateProfile,W)||(Wt=!0,je=null,Ye=null,$t.mutatedEvents=null)),W.dispatch(Ye?{type:"SET_EVENT_RESIZE",state:$t}:{type:"UNSET_EVENT_RESIZE"}),Wt?Ce():Ve(),w||(je&&yf(oe,f)&&(je=null),this.validMutation=je,this.mutatedRelevantEvents=Ye)},this.handleDragEnd=f=>{let{context:w}=this.component,z=this.eventRange.def,W=this.eventRange.instance,ie=new Vs(w,z,W),oe=this.relevantEvents,Re=this.mutatedRelevantEvents;if(w.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:ie,jsEvent:f.origEvent,view:w.viewApi}),this.validMutation){let je=new Vs(w,Re.defs[z.defId],W?Re.instances[W.instanceId]:null);w.dispatch({type:"MERGE_EVENTS",eventStore:Re});let Ye={oldEvent:ie,event:je,relatedEvents:Pu(Re,w,W),revert(){w.dispatch({type:"MERGE_EVENTS",eventStore:oe})}};w.emitter.trigger("eventResize",Object.assign(Object.assign({},Ye),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Zt(0),endDelta:this.validMutation.endDelta||Zt(0),jsEvent:f.origEvent,view:w.viewApi})),w.emitter.trigger("eventChange",Ye)}else w.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:e}=i,s=this.dragging=new pp(i.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=e.context.options.dragScroll;let l=this.hitDragging=new _f(this.dragging,gh(i));l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(i){return ko(i.subjectEl,".fc-event")}}],calendarInteractions:[class A_{constructor(i){this.context=i,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let l=this.context.options.unselectCancel,f=Xd(s.origEvent);this.matchesCancel=!!ko(f,l),this.matchesEvent=!!ko(f,jg.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:l}=this,{documentPointer:f}=this,w=l.getCurrentData();if(!f.wasTouchScroll){if(w.dateSelection&&!this.isRecentPointerDateSelect){let z=l.options.unselectAuto;z&&(!z||!this.matchesCancel)&&l.calendarApi.unselect(s)}w.eventSelection&&!this.matchesEvent&&l.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let e=this.documentPointer=new Hu(document);e.shouldIgnoreMove=!0,e.shouldWatchScroll=!1,e.emitter.on("pointerdown",this.onDocumentPointerDown),e.emitter.on("pointerup",this.onDocumentPointerUp),i.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:pp,optionRefiners:D_,listenerRefiners:I_});class km extends Y{constructor(){super(...arguments),this.headerElRef={current:null}}renderSimpleLayout(i,e){let{props:s,context:l}=this,f=[],w=hd(l.options);return i&&f.push({type:"header",key:"header",isSticky:w,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}}),f.push({type:"body",key:"body",liquid:!0,chunk:{content:e}}),Mt(id,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},Mt(Cg,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:f}))}renderHScrollLayout(i,e,s,l){let f=this.context.pluginHooks.scrollGridImpl;if(!f)throw new Error("No ScrollGrid implementation");let{props:w,context:z}=this,W=!w.forPrint&&hd(z.options),ie=!w.forPrint&&Nv(z.options),oe=[];return i&&oe.push({type:"header",key:"header",isSticky:W,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}]}),oe.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:e}]}),ie&&oe.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:op}]}),Mt(id,{elClasses:["fc-daygrid"],viewSpec:z.viewSpec},Mt(f,{liquid:!w.isHeightAuto&&!w.forPrint,forPrint:w.forPrint,collapsibleWidth:w.forPrint,colGroups:[{cols:[{span:s,minWidth:l}]}],sections:oe}))}}function Mm(r,i){let e=[];for(let s=0;s<i;s+=1)e[s]=[];for(let s of r)e[s.row].push(s);return e}function md(r,i){let e=[];for(let s=0;s<i;s+=1)e[s]=[];for(let s of r)e[s.firstCol].push(s);return e}function Am(r,i){let e=[];if(r){for(let s=0;s<i;s+=1)e[s]={affectedInstances:r.affectedInstances,isEvent:r.isEvent,segs:[]};for(let s of r.segs)e[s.row].segs.push(s)}else for(let s=0;s<i;s+=1)e[s]=null;return e}const Dm=hn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function lu(r){let{display:i}=r.eventRange.ui;return"list-item"===i||"auto"===i&&!r.eventRange.def.allDay&&r.firstCol===r.lastCol&&r.isStart&&r.isEnd}class Im extends vs{render(){let{props:i}=this;return Mt(Yv,Object.assign({},i,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:Dm,defaultDisplayEventEnd:i.defaultDisplayEventEnd,disableResizing:!i.seg.eventRange.def.allDay}))}}class Lm extends vs{render(){let{props:i,context:e}=this,{options:s}=e,{seg:l}=i,w=dh(l,s.eventTimeFormat||Dm,e,!0,i.defaultDisplayEventEnd);return Mt(dm,Object.assign({},i,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:$p(i.seg,e),defaultGenerator:cu,timeText:w,isResizing:!1,isDateSelecting:!1}))}}function cu(r){return Mt(Vr,null,Mt("div",{className:"fc-daygrid-event-dot",style:{borderColor:r.borderColor||r.backgroundColor}}),r.timeText&&Mt("div",{className:"fc-event-time"},r.timeText),Mt("div",{className:"fc-event-title"},r.event.title||Mt(Vr,null,"\xa0")))}class Th extends vs{constructor(){super(...arguments),this.compileSegs=Qn(z_)}render(){let{props:i}=this,{allSegs:e,invisibleSegs:s}=this.compileSegs(i.singlePlacements);return Mt(jv,{elClasses:["fc-daygrid-more-link"],dateProfile:i.dateProfile,todayRange:i.todayRange,allDayDate:i.allDayDate,moreCnt:i.moreCnt,allSegs:e,hiddenSegs:s,alignmentElRef:i.alignmentElRef,alignGridTop:i.alignGridTop,extraDateSpan:i.extraDateSpan,popoverContent:()=>{let l=(i.eventDrag?i.eventDrag.affectedInstances:null)||(i.eventResize?i.eventResize.affectedInstances:null)||{};return Mt(Vr,null,e.map(f=>{let w=f.eventRange.instance.instanceId;return Mt("div",{className:"fc-daygrid-event-harness",key:w,style:{visibility:l[w]?"hidden":""}},lu(f)?Mt(Lm,Object.assign({seg:f,isDragging:!1,isSelected:w===i.eventSelection,defaultDisplayEventEnd:!1},pc(f,i.todayRange))):Mt(Im,Object.assign({seg:f,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:w===i.eventSelection,defaultDisplayEventEnd:!1},pc(f,i.todayRange))))}))}})}}function z_(r){let i=[],e=[];for(let s of r)i.push(s.seg),s.isVisible||e.push(s.seg);return{allSegs:i,invisibleSegs:e}}const F_=hn({week:"narrow"});class bf extends Y{constructor(){super(...arguments),this.rootElRef={current:null},this.state={dayNumberId:C()},this.handleRootEl=i=>{eu(this.rootElRef,i),eu(this.props.elRef,i)}}render(){let{context:i,props:e,state:s,rootElRef:l}=this,{options:f,dateEnv:w}=i,{date:z,dateProfile:W}=e;const ie=e.showDayNumber&&function B_(r,i,e){const{start:s,end:l}=i,f=Ls(l,-1),w=e.getYear(s),z=e.getMonth(s),W=e.getYear(f),ie=e.getMonth(f);return!(w===W&&z===ie)&&(r.valueOf()===s.valueOf()||1===e.getDay(r)&&r.valueOf()<l.valueOf())}(z,W.currentRange,w);return Mt(Cs,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...e.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},e.extraDataAttrs),e.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Om,date:z,dateProfile:W,todayRange:e.todayRange,showDayNumber:e.showDayNumber,isMonthStart:ie,extraRenderProps:e.extraRenderProps},(oe,Re)=>Mt("div",{ref:e.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:e.minHeight}},e.showWeekNumber&&Mt(Sg,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:ud(i,z,"week"),date:z,defaultFormat:F_}),!Re.isDisabled&&(e.showDayNumber||sf(f)||e.forceDayTop)?Mt("div",{className:"fc-daygrid-day-top"},Mt(oe,{elTag:"a",elClasses:["fc-daygrid-day-number",ie&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},ud(i,z)),{id:s.dayNumberId})})):e.showDayNumber?Mt("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Mt("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,Mt("div",{className:"fc-daygrid-day-events",ref:e.fgContentElRef},e.fgContent,Mt("div",{className:"fc-daygrid-day-bottom",style:{marginTop:e.moreMarginTop}},Mt(Th,{allDayDate:z,singlePlacements:e.singlePlacements,moreCnt:e.moreCnt,alignmentElRef:l,alignGridTop:!e.showDayNumber,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange}))),Mt("div",{className:"fc-daygrid-day-bg"},e.bgContent)))}}function Om(r){return r.dayNumberText||Mt(Vr,null,"\xa0")}function $g(r){return r.eventRange.instance.instanceId+":"+r.firstCol}function N_(r){return $g(r)+":"+r.lastCol}function fp(r,i,e,s){if(r.firstCol===i&&r.lastCol===e-1)return r;let l=r.eventRange,f=l.range,w=Gl(f,{start:s[i].date,end:cs(s[e-1].date,1)});return Object.assign(Object.assign({},r),{firstCol:i,lastCol:e-1,eventRange:{def:l.def,ui:Object.assign(Object.assign({},l.ui),{durationEditable:!1}),instance:l.instance,range:w},isStart:r.isStart&&w.start.valueOf()===f.start.valueOf(),isEnd:r.isEnd&&w.end.valueOf()===f.end.valueOf()})}class Xg extends ye{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(i){const e=super.addSegs(i),{entriesByLevel:s}=this,l=f=>!this.forceHidden[Ei(f)];for(let f=0;f<s.length;f+=1)s[f]=s[f].filter(l);return e}handleInvalidInsertion(i,e,s){const{entriesByLevel:l,forceHidden:f}=this,{touchingEntry:w,touchingLevel:z,touchingLateral:W}=i;if(this.hiddenConsumes&&w){const ie=Ei(w);if(!f[ie])if(this.allowReslicing){const oe=Object.assign(Object.assign({},w),{span:ws(w.span,e.span)});f[Ei(oe)]=!0,l[z][W]=oe,s.push(oe),this.splitEntry(w,e,s)}else f[ie]=!0,s.push(w)}super.handleInvalidInsertion(i,e,s)}}class Zg extends Y{constructor(){super(...arguments),this.cellElRefs=new Nu,this.frameElRefs=new Nu,this.fgElRefs=new Nu,this.segHarnessRefs=new Nu,this.rootElRef={current:null},this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=i=>{i&&this.updateSizing(!0)}}render(){let{props:i,state:e,context:s}=this,{options:l}=s,f=i.cells.length,w=md(i.businessHourSegs,f),z=md(i.bgEventSegs,f),W=md(this.getHighlightSegs(),f),ie=md(this.getMirrorSegs(),f),{singleColPlacements:oe,multiColPlacements:Re,moreCnts:je,moreMarginTops:Ye}=function Y_(r,i,e,s,l,f,w){let z=new Xg(zi=>l[r[zi.index].eventRange.instance.instanceId+":"+zi.span.start+":"+(zi.span.end-1)]||1);z.allowReslicing=!0,z.strictOrder=s,!0===i||!0===e?(z.maxCoord=f,z.hiddenConsumes=!0):"number"==typeof i?z.maxStackCnt=i:"number"==typeof e&&(z.maxStackCnt=e,z.hiddenConsumes=!0);let W=[],ie=[];for(let zi=0;zi<r.length;zi+=1){let kn=r[zi],xr=N_(kn);null!=l[xr]?W.push({index:zi,span:{start:kn.firstCol,end:kn.lastCol+1}}):ie.push(kn)}let oe=z.addSegs(W),Re=z.toRects(),{singleColPlacements:je,multiColPlacements:Ye,leftoverMargins:Wt}=function H_(r,i,e){let s=function V_(r,i){let e=[];for(let s=0;s<i;s+=1)e.push([]);for(let s of r)for(let l=s.span.start;l<s.span.end;l+=1)e[l].push(s);return e}(r,e.length),l=[],f=[],w=[];for(let z=0;z<e.length;z+=1){let W=s[z],ie=[],oe=0,Re=0;for(let Ye of W)ie.push({seg:fp(i[Ye.index],z,z+1,e),isVisible:!0,isAbsolute:!1,absoluteTop:Ye.levelCoord,marginTop:Ye.levelCoord-oe}),oe=Ye.levelCoord+Ye.thickness;let je=[];oe=0,Re=0;for(let Ye of W){let Wt=i[Ye.index],ci=Ye.span.start===z;Re+=Ye.levelCoord-oe,oe=Ye.levelCoord+Ye.thickness,Ye.span.end-Ye.span.start>1?(Re+=Ye.thickness,ci&&je.push({seg:fp(Wt,Ye.span.start,Ye.span.end,e),isVisible:!0,isAbsolute:!0,absoluteTop:Ye.levelCoord,marginTop:0})):ci&&(je.push({seg:fp(Wt,Ye.span.start,Ye.span.end,e),isVisible:!0,isAbsolute:!1,absoluteTop:Ye.levelCoord,marginTop:Re}),Re=0)}l.push(ie),f.push(je),w.push(Re)}return{singleColPlacements:l,multiColPlacements:f,leftoverMargins:w}}(Re,r,w),$t=[],ci=[];for(let zi of ie){Ye[zi.firstCol].push({seg:zi,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let kn=zi.firstCol;kn<=zi.lastCol;kn+=1)je[kn].push({seg:fp(zi,kn,kn+1,w),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let zi=0;zi<w.length;zi+=1)$t.push(0);for(let zi of oe){let kn=r[zi.index],xr=zi.span;Ye[xr.start].push({seg:fp(kn,xr.start,xr.end,w),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Tr=xr.start;Tr<xr.end;Tr+=1)$t[Tr]+=1,je[Tr].push({seg:fp(kn,Tr,Tr+1,w),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let zi=0;zi<w.length;zi+=1)ci.push(Wt[zi]);return{singleColPlacements:je,multiColPlacements:Ye,moreCnts:$t,moreMarginTops:ci}}(Jh(i.fgEventSegs,l.eventOrder),i.dayMaxEvents,i.dayMaxEventRows,l.eventOrderStrict,e.segHeights,e.maxContentHeight,i.cells),Wt=i.eventDrag&&i.eventDrag.affectedInstances||i.eventResize&&i.eventResize.affectedInstances||{};return Mt("tr",{ref:this.rootElRef,role:"row"},i.renderIntro&&i.renderIntro(),i.cells.map(($t,ci)=>{let zi=this.renderFgSegs(ci,i.forPrint?oe[ci]:Re[ci],i.todayRange,Wt),kn=this.renderFgSegs(ci,function G_(r,i){if(!r.length)return[];let e=function j_(r){let i={};for(let e of r)for(let s of e)i[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return i}(i);return r.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:e[s.eventRange.instance.instanceId],marginTop:0}))}(ie[ci],Re),i.todayRange,{},!!i.eventDrag,!!i.eventResize,!1);return Mt(bf,{key:$t.key,elRef:this.cellElRefs.createRef($t.key),innerElRef:this.frameElRefs.createRef($t.key),dateProfile:i.dateProfile,date:$t.date,showDayNumber:i.showDayNumbers,showWeekNumber:i.showWeekNumbers&&0===ci,forceDayTop:i.showWeekNumbers,todayRange:i.todayRange,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,extraRenderProps:$t.extraRenderProps,extraDataAttrs:$t.extraDataAttrs,extraClassNames:$t.extraClassNames,extraDateSpan:$t.extraDateSpan,moreCnt:je[ci],moreMarginTop:Ye[ci],singlePlacements:oe[ci],fgContentElRef:this.fgElRefs.createRef($t.key),fgContent:Mt(Vr,null,Mt(Vr,null,zi),Mt(Vr,null,kn)),bgContent:Mt(Vr,null,this.renderFillSegs(W[ci],"highlight"),this.renderFillSegs(w[ci],"non-business"),this.renderFillSegs(z[ci],"bg-event")),minHeight:i.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(i,e){this.updateSizing(!Ga(i,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:i}=this;return i.eventDrag&&i.eventDrag.segs.length?i.eventDrag.segs:i.eventResize&&i.eventResize.segs.length?i.eventResize.segs:i.dateSelectionSegs}getMirrorSegs(){let{props:i}=this;return i.eventResize&&i.eventResize.segs.length?i.eventResize.segs:[]}renderFgSegs(i,e,s,l,f,w,z){let{context:W}=this,{eventSelection:ie}=this.props,{framePositions:oe}=this.state,Re=1===this.props.cells.length,je=f||w||z,Ye=[];if(oe)for(let Wt of e){let{seg:$t}=Wt,{instanceId:ci}=$t.eventRange.instance,zi=Wt.isVisible&&!l[ci],kn=Wt.isAbsolute,xr="",Tr="";kn&&(W.isRtl?(Tr=0,xr=oe.lefts[$t.lastCol]-oe.lefts[$t.firstCol]):(xr=0,Tr=oe.rights[$t.firstCol]-oe.rights[$t.lastCol])),Ye.push(Mt("div",{className:"fc-daygrid-event-harness"+(kn?" fc-daygrid-event-harness-abs":""),key:$g($t),ref:je?null:this.segHarnessRefs.createRef(N_($t)),style:{visibility:zi?"":"hidden",marginTop:kn?"":Wt.marginTop,top:kn?Wt.absoluteTop:"",left:xr,right:Tr}},lu($t)?Mt(Lm,Object.assign({seg:$t,isDragging:f,isSelected:ci===ie,defaultDisplayEventEnd:Re},pc($t,s))):Mt(Im,Object.assign({seg:$t,isDragging:f,isResizing:w,isDateSelecting:z,isSelected:ci===ie,defaultDisplayEventEnd:Re},pc($t,s)))))}return Ye}renderFillSegs(i,e){let{isRtl:s}=this.context,{todayRange:l}=this.props,{framePositions:f}=this.state,w=[];if(f)for(let z of i){let W=s?{right:0,left:f.lefts[z.lastCol]-f.lefts[z.firstCol]}:{left:0,right:f.rights[z.firstCol]-f.rights[z.lastCol]};w.push(Mt("div",{key:Wp(z.eventRange),className:"fc-daygrid-bg-harness",style:W},"bg-event"===e?Mt(Eg,Object.assign({seg:z},pc(z,l))):wh(e)))}return Mt(Vr,{},...w)}updateSizing(i){let{props:e,state:s,frameElRefs:l}=this;if(!e.forPrint&&null!==e.clientWidth){if(i){let W=e.cells.map(ie=>l.currentMap[ie.key]);if(W.length){let ie=this.rootElRef.current,oe=new dd(ie,W,!0,!1);(!s.framePositions||!s.framePositions.similarTo(oe))&&this.setState({framePositions:new dd(ie,W,!0,!1)})}}const f=this.state.segHeights,w=this.querySegHeights(),z=!0===e.dayMaxEvents||!0===e.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},f),w),maxContentHeight:z?this.computeMaxContentHeight():null})}}querySegHeights(){let i=this.segHarnessRefs.currentMap,e={};for(let s in i){let l=Math.round(i[s].getBoundingClientRect().height);e[s]=Math.max(e[s]||0,l)}return e}computeMaxContentHeight(){let i=this.props.cells[0].key,s=this.fgElRefs.currentMap[i];return this.cellElRefs.currentMap[i].getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let i=this.cellElRefs.currentMap;return this.props.cells.map(e=>i[e.key])}}Zg.addStateEquality({segHeights:Ga});class qg extends Y{constructor(){super(...arguments),this.splitBusinessHourSegs=Qn(Mm),this.splitBgEventSegs=Qn(Mm),this.splitFgEventSegs=Qn(Mm),this.splitDateSelectionSegs=Qn(Mm),this.splitEventDrag=Qn(Am),this.splitEventResize=Qn(Am),this.rowRefs=new Nu}render(){let{props:i,context:e}=this,s=i.cells.length,l=this.splitBusinessHourSegs(i.businessHourSegs,s),f=this.splitBgEventSegs(i.bgEventSegs,s),w=this.splitFgEventSegs(i.fgEventSegs,s),z=this.splitDateSelectionSegs(i.dateSelectionSegs,s),W=this.splitEventDrag(i.eventDrag,s),ie=this.splitEventResize(i.eventResize,s),oe=s>=7&&i.clientWidth?i.clientWidth/e.options.aspectRatio/6:null;return Mt(ef,{unit:"day"},(Re,je)=>Mt(Vr,null,i.cells.map((Ye,Wt)=>Mt(Zg,{ref:this.rowRefs.createRef(Wt),key:Ye.length?Ye[0].date.toISOString():Wt,showDayNumbers:s>1,showWeekNumbers:i.showWeekNumbers,todayRange:je,dateProfile:i.dateProfile,cells:Ye,renderIntro:i.renderRowIntro,businessHourSegs:l[Wt],eventSelection:i.eventSelection,bgEventSegs:f[Wt].filter(Kg),fgEventSegs:w[Wt],dateSelectionSegs:z[Wt],eventDrag:W[Wt],eventResize:ie[Wt],dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,clientWidth:i.clientWidth,clientHeight:i.clientHeight,cellMinHeight:oe,forPrint:i.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const i=this.rowRefs.currentMap[0].getCellEls()[0],e=i?i.closest(".fc-daygrid-body"):null;e&&(this.rootEl=e,this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new dd(this.rootEl,this.rowRefs.collect().map(i=>i.getCellEls()[0]),!1,!0),this.colPositions=new dd(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(i,e){let{colPositions:s,rowPositions:l}=this,f=s.leftToIndex(i),w=l.topToIndex(e);if(null!=w&&null!=f){let z=this.props.cells[w][f];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(w,f),allDay:!0},z.extraDateSpan),dayEl:this.getCellEl(w,f),rect:{left:s.lefts[f],right:s.rights[f],top:l.tops[w],bottom:l.bottoms[w]},layer:0}}return null}getCellEl(i,e){return this.rowRefs.currentMap[i].getCellEls()[e]}getCellRange(i,e){let s=this.props.cells[i][e].date;return{start:s,end:cs(s,1)}}}function Kg(r){return r.eventRange.def.allDay}class U_ extends Y{constructor(){super(...arguments),this.elRef={current:null},this.needsScrollReset=!1}render(){let{props:i}=this,{dayMaxEventRows:e,dayMaxEvents:s,expandRows:l}=i,f=!0===s||!0===e;return f&&!l&&(f=!1,e=null,s=null),Mt("div",{ref:this.elRef,className:["fc-daygrid-body",f?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",l?"":"fc-daygrid-body-natural"].join(" "),style:{width:i.clientWidth,minWidth:i.tableMinWidth}},Mt("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:i.clientWidth,minWidth:i.tableMinWidth,height:l?i.clientHeight:""}},i.colGroupNode,Mt("tbody",{role:"presentation"},Mt(qg,{dateProfile:i.dateProfile,cells:i.cells,renderRowIntro:i.renderRowIntro,showWeekNumbers:i.showWeekNumbers,clientWidth:i.clientWidth,clientHeight:i.clientHeight,businessHourSegs:i.businessHourSegs,bgEventSegs:i.bgEventSegs,fgEventSegs:i.fgEventSegs,dateSelectionSegs:i.dateSelectionSegs,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,dayMaxEvents:s,dayMaxEventRows:e,forPrint:i.forPrint,isHitComboAllowed:i.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(i){i.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const i=function xf(r,i){let e;return i.currentRangeUnit.match(/year|month/)&&(e=r.querySelector(`[data-date="${function zf(r){return r.toISOString().match(/^\d{4}-\d{2}/)[0]}(i.currentDate)}-01"]`)),e||(e=r.querySelector(`[data-date="${Su(i.currentDate)}"]`)),e}(this.elRef.current,this.props.dateProfile);if(i){const e=i.closest(".fc-daygrid-body"),s=e.closest(".fc-scroller"),l=i.getBoundingClientRect().top-e.getBoundingClientRect().top;s.scrollTop=l?l+1:0}this.needsScrollReset=!1}}}class Jg extends xh{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(i,e){return e.sliceRange(i)}}class Qg extends Y{constructor(){super(...arguments),this.slicer=new Jg,this.tableRef={current:null}}render(){let{props:i,context:e}=this;return Mt(U_,Object.assign({ref:this.tableRef},this.slicer.sliceProps(i,i.dateProfile,i.nextDayThreshold,e,i.dayTableModel),{dateProfile:i.dateProfile,cells:i.dayTableModel.cells,colGroupNode:i.colGroupNode,tableMinWidth:i.tableMinWidth,renderRowIntro:i.renderRowIntro,dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,showWeekNumbers:i.showWeekNumbers,expandRows:i.expandRows,headerAlignElRef:i.headerAlignElRef,clientWidth:i.clientWidth,clientHeight:i.clientHeight,forPrint:i.forPrint}))}}function n(r,i){let e=new Wa(r.renderRange,i);return new rp(e,/year|month|week/.test(r.currentRangeUnit))}Hl(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var E=ou({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class a extends km{constructor(){super(...arguments),this.buildDayTableModel=Qn(n),this.headerRef={current:null},this.tableRef={current:null}}render(){let{options:i,dateProfileGenerator:e}=this.context,{props:s}=this,l=this.buildDayTableModel(s.dateProfile,e),f=i.dayHeaders&&Mt(tf,{ref:this.headerRef,dateProfile:s.dateProfile,dates:l.headerDates,datesRepDistinctDays:1===l.rowCnt}),w=z=>Mt(Qg,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:l,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:i.nextDayThreshold,colGroupNode:z.tableColGroupNode,tableMinWidth:z.tableMinWidth,dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,showWeekNumbers:i.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:z.clientWidth,clientHeight:z.clientHeight,forPrint:s.forPrint});return i.dayMinWidth?this.renderHScrollLayout(f,w,l.colCnt,i.dayMinWidth):this.renderSimpleLayout(f,w)}},dateProfileGeneratorClass:class u extends nh{buildRenderRange(i,e,s){let l=super.buildRenderRange(i,e,s),{props:f}=this;return function p(r){let f,{dateEnv:i,currentRange:e}=r,{start:s,end:l}=e;if(r.snapToWeek&&(s=i.startOfWeek(s),f=i.startOfWeek(l),f.valueOf()!==l.valueOf()&&(l=gs(f,1))),r.fixedWeekCount){let w=i.startOfWeek(i.startOfMonth(cs(e.end,-1))),z=Math.ceil(function ka(r,i){return qo(r,i)/7}(w,l));l=gs(l,6-z)}return{start:s,end:l}}({currentRange:l,snapToWeek:/^(year|month)$/.test(e),fixedWeekCount:f.fixedWeekCount,dateEnv:f.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class A extends am{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(i){return i.allDay?["allDay"]:["timed"]}getKeysForEventDef(i){return i.allDay?function tm(r){return"background"===r.ui.display||"inverse-background"===r.ui.display}(i)?["timed","allDay"]:["allDay"]:["timed"]}}const R=hn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function H(r){let i=["fc-timegrid-slot","fc-timegrid-slot-label",r.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return Mt(Dc.Consumer,null,e=>{if(!r.isLabeled)return Mt("td",{className:i.join(" "),"data-time":r.isoTimeStr});let{dateEnv:s,options:l,viewApi:f}=e,w=null==l.slotLabelFormat?R:Array.isArray(l.slotLabelFormat)?hn(l.slotLabelFormat[0]):hn(l.slotLabelFormat),z={level:0,time:r.time,date:s.toDate(r.date),view:f,text:s.format(r.date,w)};return Mt(ga,{elTag:"td",elClasses:i,elAttrs:{"data-time":r.isoTimeStr},renderProps:z,generatorName:"slotLabelContent",customGenerator:l.slotLabelContent,defaultGenerator:j,classNameGenerator:l.slotLabelClassNames,didMount:l.slotLabelDidMount,willUnmount:l.slotLabelWillUnmount},W=>Mt("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},Mt(W,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function j(r){return r.text}class ee extends vs{render(){return this.props.slatMetas.map(i=>Mt("tr",{key:i.key},Mt(H,Object.assign({},i))))}}const se=hn({week:"short"});class ve extends Y{constructor(){super(...arguments),this.allDaySplitter=new A,this.headerElRef={current:null},this.rootElRef={current:null},this.scrollerElRef={current:null},this.state={slatCoords:null},this.handleScrollTopRequest=i=>{let e=this.scrollerElRef.current;e&&(e.scrollTop=i)},this.renderHeadAxis=(i,e="")=>{let{options:s}=this.context,{dateProfile:l}=this.props,f=l.renderRange,z=1===qo(f.start,f.end)?ud(this.context,f.start,"week"):{};return s.weekNumbers&&"day"===i?Mt(Sg,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:f.start,defaultFormat:se},W=>Mt("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:e}},Mt(W,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:z}))):Mt("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},Mt("div",{className:"fc-timegrid-axis-frame",style:{height:e}}))},this.renderTableRowAxis=i=>{let{options:e,viewApi:s}=this.context;return Mt(ga,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:{text:e.allDayText,view:s},generatorName:"allDayContent",customGenerator:e.allDayContent,defaultGenerator:be,classNameGenerator:e.allDayClassNames,didMount:e.allDayDidMount,willUnmount:e.allDayWillUnmount},f=>Mt("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==i?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:i}},Mt(f,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=i=>{this.setState({slatCoords:i})}}renderSimpleLayout(i,e,s){let{context:l,props:f}=this,w=[],z=hd(l.options);return i&&w.push({type:"header",key:"header",isSticky:z,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}}),e&&(w.push({type:"body",key:"all-day",chunk:{content:e}}),w.push({type:"body",key:"all-day-divider",outerContent:Mt("tr",{role:"presentation",className:"fc-scrollgrid-section"},Mt("td",{className:"fc-timegrid-divider "+l.theme.getClass("tableCellShaded")}))})),w.push({type:"body",key:"body",liquid:!0,expandRows:!!l.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:s}}),Mt(id,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:l.viewSpec},Mt(Cg,{liquid:!f.isHeightAuto&&!f.forPrint,collapsibleWidth:f.forPrint,cols:[{width:"shrink"}],sections:w}))}renderHScrollLayout(i,e,s,l,f,w,z){let W=this.context.pluginHooks.scrollGridImpl;if(!W)throw new Error("No ScrollGrid implementation");let{context:ie,props:oe}=this,Re=!oe.forPrint&&hd(ie.options),je=!oe.forPrint&&Nv(ie.options),Ye=[];i&&Ye.push({type:"header",key:"header",isSticky:Re,syncRowHeights:!0,chunks:[{key:"axis",rowContent:$t=>Mt("tr",{role:"presentation"},this.renderHeadAxis("day",$t.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}]}),e&&(Ye.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:$t=>Mt("tr",{role:"presentation"},this.renderTableRowAxis($t.rowSyncHeights[0]))},{key:"cols",content:e}]}),Ye.push({key:"all-day-divider",type:"body",outerContent:Mt("tr",{role:"presentation",className:"fc-scrollgrid-section"},Mt("td",{colSpan:2,className:"fc-timegrid-divider "+ie.theme.getClass("tableCellShaded")}))}));let Wt=ie.options.nowIndicator;return Ye.push({type:"body",key:"body",liquid:!0,expandRows:!!ie.options.expandRows,chunks:[{key:"axis",content:$t=>Mt("div",{className:"fc-timegrid-axis-chunk"},Mt("table",{"aria-hidden":!0,style:{height:$t.expandRows?$t.clientHeight:""}},$t.tableColGroupNode,Mt("tbody",null,Mt(ee,{slatMetas:w}))),Mt("div",{className:"fc-timegrid-now-indicator-container"},Mt(ef,{unit:Wt?"minute":"day"},ci=>{let zi=Wt&&z&&z.safeComputeTop(ci);return"number"==typeof zi?Mt(hm,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:zi},isAxis:!0,date:ci}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:s}]}),je&&Ye.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:op},{key:"cols",content:op}]}),Mt(id,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:ie.viewSpec},Mt(W,{liquid:!oe.isHeightAuto&&!oe.forPrint,forPrint:oe.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:l,minWidth:f}]}],sections:Ye}))}getAllDayMaxEventProps(){let{dayMaxEvents:i,dayMaxEventRows:e}=this.context.options;return(!0===i||!0===e)&&(i=void 0,e=5),{dayMaxEvents:i,dayMaxEventRows:e}}}function be(r){return r.text}class Ae{constructor(i,e,s){this.positions=i,this.dateProfile=e,this.slotDuration=s}safeComputeTop(i){let{dateProfile:e}=this;if(Ul(e.currentRange,i)){let s=jr(i),l=i.valueOf()-s.valueOf();if(l>=Zn(e.slotMinTime)&&l<Zn(e.slotMaxTime))return this.computeTimeTop(Zt(l))}return null}computeDateTop(i,e){return e||(e=jr(i)),this.computeTimeTop(Zt(i.valueOf()-e.valueOf()))}computeTimeTop(i){let w,z,{positions:e,dateProfile:s}=this,l=e.els.length,f=(i.milliseconds-Zn(s.slotMinTime))/Zn(this.slotDuration);return f=Math.max(0,f),f=Math.min(l,f),w=Math.floor(f),w=Math.min(w,l-1),z=f-w,e.tops[w]+e.getHeight(w)*z}}class $e extends vs{render(){let{props:i,context:e}=this,{options:s}=e,{slatElRefs:l}=i;return Mt("tbody",null,i.slatMetas.map((f,w)=>{let z={time:f.time,date:e.dateEnv.toDate(f.date),view:e.viewApi};return Mt("tr",{key:f.key,ref:l.createRef(f.key)},i.axis&&Mt(H,Object.assign({},f)),Mt(ga,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!f.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":f.isoTimeStr},renderProps:z,generatorName:"slotLaneContent",customGenerator:s.slotLaneContent,classNameGenerator:s.slotLaneClassNames,didMount:s.slotLaneDidMount,willUnmount:s.slotLaneWillUnmount}))}))}}class dt extends vs{constructor(){super(...arguments),this.rootElRef={current:null},this.slatElRefs=new Nu}render(){let{props:i,context:e}=this;return Mt("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},Mt("table",{"aria-hidden":!0,className:e.theme.getClass("table"),style:{minWidth:i.tableMinWidth,width:i.clientWidth,height:i.minHeight}},i.tableColGroupNode,Mt($e,{slatElRefs:this.slatElRefs,axis:i.axis,slatMetas:i.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:i,props:e}=this;e.onCoords&&null!==e.clientWidth&&this.rootElRef.current.offsetHeight&&e.onCoords(new Ae(new dd(this.rootElRef.current,function Ot(r,i){return i.map(e=>r[e.key])}(this.slatElRefs.currentMap,e.slatMetas),!1,!0),this.props.dateProfile,i.options.slotDuration))}}function ct(r,i){let s,e=[];for(s=0;s<i;s+=1)e.push([]);if(r)for(s=0;s<r.length;s+=1)e[r[s].col].push(r[s]);return e}function At(r,i){let e=[];if(r){for(let s=0;s<i;s+=1)e[s]={affectedInstances:r.affectedInstances,isEvent:r.isEvent,segs:[]};for(let s of r.segs)e[s.col].segs.push(s)}else for(let s=0;s<i;s+=1)e[s]=null;return e}class Nt extends vs{render(){let{props:i}=this;return Mt(jv,{elClasses:["fc-timegrid-more-link"],elStyle:{top:i.top,bottom:i.bottom},allDayDate:null,moreCnt:i.hiddenSegs.length,allSegs:i.hiddenSegs,hiddenSegs:i.hiddenSegs,extraDateSpan:i.extraDateSpan,dateProfile:i.dateProfile,todayRange:i.todayRange,popoverContent:()=>ln(i.hiddenSegs,i),defaultGenerator:Bt,forceTimed:!0},e=>Mt(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function Bt(r){return r.shortText}function Li(r,i){if(!r)return[[],0];let{level:e,lateralStart:s,lateralEnd:l}=r,f=s,w=[];for(;f<l;)w.push(i(e,f)),f+=1;return w.sort(rn),[w.map(Si),w[0][1]]}function rn(r,i){return i[1]-r[1]}function Si(r){return r[0]}function Zi(r){let i=[];const e=an((l,f,w)=>Ei(l),(l,f,w)=>{let z=Object.assign(Object.assign({},l),{levelCoord:f,stackDepth:w,stackForward:0});return i.push(z),z.stackForward=s(l.nextLevelNodes,f+l.thickness,w+1)+1});function s(l,f,w){let z=0;for(let W of l)z=Math.max(e(W,f,w),z);return z}return s(r,0,0),i}function an(r,i){const e={};return(...s)=>{let l=r(...s);return l in e?e[l]:e[l]=i(...s)}}function Di(r,i,e=null,s=0){let l=[];if(e)for(let f=0;f<r.length;f+=1){let w=r[f],z=e.computeDateTop(w.start,i),W=Math.max(z+(s||0),e.computeDateTop(w.end,i));l.push({start:Math.round(z),end:Math.round(W)})}return l}const On=hn({hour:"numeric",minute:"2-digit",meridiem:!1});class Cn extends vs{render(){return Mt(Yv,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:On}))}}class _r extends vs{constructor(){super(...arguments),this.sortEventSegs=Qn(Jh)}render(){let{props:i,context:e}=this,{options:s}=e,l=s.selectMirror,f=i.eventDrag&&i.eventDrag.segs||i.eventResize&&i.eventResize.segs||l&&i.dateSelectionSegs||[],w=i.eventDrag&&i.eventDrag.affectedInstances||i.eventResize&&i.eventResize.affectedInstances||{},z=this.sortEventSegs(i.fgEventSegs,s.eventOrder);return Mt(Cs,{elTag:"td",elRef:i.elRef,elClasses:["fc-timegrid-col",...i.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},i.extraDataAttrs),date:i.date,dateProfile:i.dateProfile,todayRange:i.todayRange,extraRenderProps:i.extraRenderProps},W=>Mt("div",{className:"fc-timegrid-col-frame"},Mt("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(i.businessHourSegs,"non-business"),this.renderFillSegs(i.bgEventSegs,"bg-event"),this.renderFillSegs(i.dateSelectionSegs,"highlight")),Mt("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(z,w,!1,!1,!1)),Mt("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(f,{},!!i.eventDrag,!!i.eventResize,!!l,"mirror")),Mt("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(i.nowIndicatorSegs)),sf(s)&&Mt(W,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(i,e,s,l,f,w){let{props:z}=this;return z.forPrint?ln(i,z):this.renderPositionedFgSegs(i,e,s,l,f,w)}renderPositionedFgSegs(i,e,s,l,f,w){let{eventMaxStack:z,eventShortHeight:W,eventOrderStrict:ie,eventMinHeight:oe}=this.context.options,{date:Re,slatCoords:je,eventSelection:Ye,todayRange:Wt,nowDate:$t}=this.props,ci=s||l||f,zi=Di(i,Re,je,oe),{segPlacements:kn,hiddenGroups:xr}=function bn(r,i,e,s){let l=[],f=[];for(let ie=0;ie<r.length;ie+=1){let oe=i[ie];oe?l.push({index:ie,thickness:1,span:oe}):f.push(r[ie])}let{segRects:w,hiddenGroups:z}=function bi(r,i,e){let s=new ye;null!=i&&(s.strictOrder=i),null!=e&&(s.maxStackCnt=e);let f=function fn(r){let i=[];for(let e of r){let s=[],l={span:e.span,entries:[e]};for(let f of i)ws(f.span,l.span)?l={entries:f.entries.concat(l.entries),span:Qr(f.span,l.span)}:s.push(f);s.push(l),i=s}return i}(s.addSegs(r)),w=function hi(r){const{entriesByLevel:i}=r,e=an((s,l)=>s+":"+l,(s,l)=>{let f=function Ni(r,i,e){let{levelCoords:s,entriesByLevel:l}=r,f=l[i][e],w=s[i]+f.thickness,z=s.length,W=i;for(;W<z&&s[W]<w;W+=1);for(;W<z;W+=1){let oe,ie=l[W],Re=Qo(ie,f.span.start,gt),je=Re[0]+Re[1],Ye=je;for(;(oe=ie[Ye])&&oe.span.start<f.span.end;)Ye+=1;if(je<Ye)return{level:W,lateralStart:je,lateralEnd:Ye}}return null}(r,s,l),w=Li(f,e),z=i[s][l];return[Object.assign(Object.assign({},z),{nextLevelNodes:w[0]}),z.thickness+w[1]]});return Li(i.length?{level:0,lateralStart:0,lateralEnd:i[0].length}:null,e)[0]}(s);return w=function Yi(r,i){const e=an((s,l,f)=>Ei(s),(s,l,f)=>{let oe,{nextLevelNodes:w,thickness:z}=s,W=z+f,ie=z/W,Re=[];if(w.length)for(let Ye of w)if(void 0===oe){let Wt=e(Ye,l,W);oe=Wt[0],Re.push(Wt[1])}else{let Wt=e(Ye,oe,0);Re.push(Wt[1])}else oe=i;let je=(oe-l)*ie;return[oe-je,Object.assign(Object.assign({},s),{thickness:je,nextLevelNodes:Re})]});return r.map(s=>e(s,0,0)[1])}(w,1),{segRects:Zi(w),hiddenGroups:f}}(l,e,s),W=[];for(let ie of w)W.push({seg:r[ie.index],rect:ie});for(let ie of f)W.push({seg:ie,rect:null});return{segPlacements:W,hiddenGroups:z}}(i,zi,ie,z);return Mt(Vr,null,this.renderHiddenGroups(xr,i),kn.map(Tr=>{let{seg:eo,rect:rs}=Tr,Bs=eo.eventRange.instance.instanceId,es=ci||!(e[Bs]||!rs),Xu=jn(rs&&rs.span),gd=!ci&&rs?this.computeSegHStyle(rs):{left:0,right:0},Jm=!!rs&&rs.span.end-rs.span.start<W;return Mt("div",{className:"fc-timegrid-event-harness"+(rs&&rs.stackForward>0?" fc-timegrid-event-harness-inset":""),key:w||Bs,style:Object.assign(Object.assign({visibility:es?"":"hidden"},Xu),gd)},Mt(Cn,Object.assign({seg:eo,isDragging:s,isResizing:l,isDateSelecting:f,isSelected:Bs===Ye,isShort:Jm},pc(eo,Wt,$t))))}))}renderHiddenGroups(i,e){let{extraDateSpan:s,dateProfile:l,todayRange:f,nowDate:w,eventSelection:z,eventDrag:W,eventResize:ie}=this.props;return Mt(Vr,null,i.map(oe=>{let Re=jn(oe.span),je=function yr(r,i){return r.map(e=>i[e.index])}(oe.entries,e);return Mt(Nt,{key:Fh(Wv(je)),hiddenSegs:je,top:Re.top,bottom:Re.bottom,extraDateSpan:s,dateProfile:l,todayRange:f,nowDate:w,eventSelection:z,eventDrag:W,eventResize:ie})}))}renderFillSegs(i,e){let{props:s,context:l}=this,w=Di(i,s.date,s.slatCoords,l.options.eventMinHeight).map((z,W)=>{let ie=i[W];return Mt("div",{key:Wp(ie.eventRange),className:"fc-timegrid-bg-harness",style:jn(z)},"bg-event"===e?Mt(Eg,Object.assign({seg:ie},pc(ie,s.todayRange,s.nowDate))):wh(e))});return Mt(Vr,null,w)}renderNowIndicator(i){let{slatCoords:e,date:s}=this.props;return e?i.map((l,f)=>Mt(hm,{key:f,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:e.computeDateTop(l.start,s)},isAxis:!1,date:s})):null}computeSegHStyle(i){let z,W,{isRtl:e,options:s}=this.context,l=s.slotEventOverlap,f=i.levelCoord,w=i.levelCoord+i.thickness;l&&(w=Math.min(1,f+2*(w-f))),e?(z=1-w,W=f):(z=f,W=1-w);let ie={zIndex:i.stackDepth+1,left:100*z+"%",right:100*W+"%"};return l&&!i.stackForward&&(ie[e?"marginLeft":"marginRight"]=20),ie}}function ln(r,{todayRange:i,nowDate:e,eventSelection:s,eventDrag:l,eventResize:f}){let w=(l?l.affectedInstances:null)||(f?f.affectedInstances:null)||{};return Mt(Vr,null,r.map(z=>{let W=z.eventRange.instance.instanceId;return Mt("div",{key:W,style:{visibility:w[W]?"hidden":""}},Mt(Cn,Object.assign({seg:z,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:W===s,isShort:!1},pc(z,i,e))))}))}function jn(r){return r?{top:r.start,bottom:-r.end}:{top:"",bottom:""}}class ns extends vs{constructor(){super(...arguments),this.splitFgEventSegs=Qn(ct),this.splitBgEventSegs=Qn(ct),this.splitBusinessHourSegs=Qn(ct),this.splitNowIndicatorSegs=Qn(ct),this.splitDateSelectionSegs=Qn(ct),this.splitEventDrag=Qn(At),this.splitEventResize=Qn(At),this.rootElRef={current:null},this.cellElRefs=new Nu}render(){let{props:i,context:e}=this,s=e.options.nowIndicator&&i.slatCoords&&i.slatCoords.safeComputeTop(i.nowDate),l=i.cells.length,f=this.splitFgEventSegs(i.fgEventSegs,l),w=this.splitBgEventSegs(i.bgEventSegs,l),z=this.splitBusinessHourSegs(i.businessHourSegs,l),W=this.splitNowIndicatorSegs(i.nowIndicatorSegs,l),ie=this.splitDateSelectionSegs(i.dateSelectionSegs,l),oe=this.splitEventDrag(i.eventDrag,l),Re=this.splitEventResize(i.eventResize,l);return Mt("div",{className:"fc-timegrid-cols",ref:this.rootElRef},Mt("table",{role:"presentation",style:{minWidth:i.tableMinWidth,width:i.clientWidth}},i.tableColGroupNode,Mt("tbody",{role:"presentation"},Mt("tr",{role:"row"},i.axis&&Mt("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},Mt("div",{className:"fc-timegrid-col-frame"},Mt("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof s&&Mt(hm,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:s},isAxis:!0,date:i.nowDate})))),i.cells.map((je,Ye)=>Mt(_r,{key:je.key,elRef:this.cellElRefs.createRef(je.key),dateProfile:i.dateProfile,date:je.date,nowDate:i.nowDate,todayRange:i.todayRange,extraRenderProps:je.extraRenderProps,extraDataAttrs:je.extraDataAttrs,extraClassNames:je.extraClassNames,extraDateSpan:je.extraDateSpan,fgEventSegs:f[Ye],bgEventSegs:w[Ye],businessHourSegs:z[Ye],nowIndicatorSegs:W[Ye],dateSelectionSegs:ie[Ye],eventDrag:oe[Ye],eventResize:Re[Ye],slatCoords:i.slatCoords,eventSelection:i.eventSelection,forPrint:i.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:i}=this;i.onColCoords&&null!==i.clientWidth&&i.onColCoords(new dd(this.rootElRef.current,function br(r,i){return i.map(e=>r[e.key])}(this.cellElRefs.currentMap,i.cells),!0,!1))}}class ir extends Y{constructor(){super(...arguments),this.processSlotOptions=Qn(Rs),this.state={slatCoords:null},this.handleRootEl=i=>{i?this.context.registerInteractiveComponent(this,{el:i,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=i=>{let{onScrollTopRequest:e}=this.props,{slatCoords:s}=this.state;if(e&&s){if(i.time){let l=s.computeTimeTop(i.time);l=Math.ceil(l),l&&(l+=1),e(l)}return!0}return!1},this.handleColCoords=i=>{this.colCoords=i},this.handleSlatCoords=i=>{this.setState({slatCoords:i}),this.props.onSlatCoords&&this.props.onSlatCoords(i)}}render(){let{props:i,state:e}=this;return Mt("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:i.clientWidth,minWidth:i.tableMinWidth}},Mt(dt,{axis:i.axis,dateProfile:i.dateProfile,slatMetas:i.slatMetas,clientWidth:i.clientWidth,minHeight:i.expandRows?i.clientHeight:"",tableMinWidth:i.tableMinWidth,tableColGroupNode:i.axis?i.tableColGroupNode:null,onCoords:this.handleSlatCoords}),Mt(ns,{cells:i.cells,axis:i.axis,dateProfile:i.dateProfile,businessHourSegs:i.businessHourSegs,bgEventSegs:i.bgEventSegs,fgEventSegs:i.fgEventSegs,dateSelectionSegs:i.dateSelectionSegs,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,todayRange:i.todayRange,nowDate:i.nowDate,nowIndicatorSegs:i.nowIndicatorSegs,clientWidth:i.clientWidth,tableMinWidth:i.tableMinWidth,tableColGroupNode:i.tableColGroupNode,slatCoords:e.slatCoords,onColCoords:this.handleColCoords,forPrint:i.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(i){this.scrollResponder.update(i.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(i,e){let{dateEnv:s,options:l}=this.context,{colCoords:f}=this,{dateProfile:w}=this.props,{slatCoords:z}=this.state,{snapDuration:W,snapsPerSlot:ie}=this.processSlotOptions(this.props.slotDuration,l.snapDuration),oe=f.leftToIndex(i),Re=z.positions.topToIndex(e);if(null!=oe&&null!=Re){let je=this.props.cells[oe],Ye=z.positions.tops[Re],Wt=z.positions.getHeight(Re),ci=Math.floor((e-Ye)/Wt*ie),kn=this.props.cells[oe].date,xr=Ii(w.slotMinTime,function $i(r,i){return{years:r.years*i,months:r.months*i,days:r.days*i,milliseconds:r.milliseconds*i}}(W,Re*ie+ci)),Tr=s.add(kn,xr),eo=s.add(Tr,W);return{dateProfile:w,dateSpan:Object.assign({range:{start:Tr,end:eo},allDay:!1},je.extraDateSpan),dayEl:f.els[oe],rect:{left:f.lefts[oe],right:f.rights[oe],top:Ye,bottom:Ye+Wt},layer:0}}return null}}function Rs(r,i){let e=i||r,s=tr(r,e);return null===s&&(e=r,s=1),{snapDuration:e,snapsPerSlot:s}}class Er extends xh{sliceRange(i,e){let s=[];for(let l=0;l<e.length;l+=1){let f=Gl(i,e[l]);f&&s.push({start:f.start,end:f.end,isStart:f.start.valueOf()===i.start.valueOf(),isEnd:f.end.valueOf()===i.end.valueOf(),col:l})}return s}}class Sr extends Y{constructor(){super(...arguments),this.buildDayRanges=Qn(Es),this.slicer=new Er,this.timeColsRef={current:null}}render(){let{props:i,context:e}=this,{dateProfile:s,dayTableModel:l}=i,{nowIndicator:f,nextDayThreshold:w}=e.options,z=this.buildDayRanges(l,s,e.dateEnv);return Mt(ef,{unit:f?"minute":"day"},(W,ie)=>Mt(ir,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(i,s,null,e,z),{forPrint:i.forPrint,axis:i.axis,dateProfile:s,slatMetas:i.slatMetas,slotDuration:i.slotDuration,cells:l.cells[0],tableColGroupNode:i.tableColGroupNode,tableMinWidth:i.tableMinWidth,clientWidth:i.clientWidth,clientHeight:i.clientHeight,expandRows:i.expandRows,nowDate:W,nowIndicatorSegs:f&&this.slicer.sliceNowDate(W,s,w,e,z),todayRange:ie,onScrollTopRequest:i.onScrollTopRequest,onSlatCoords:i.onSlatCoords})))}}function Es(r,i,e){let s=[];for(let l of r.headerDates)s.push({start:e.add(l,i.slotMinTime),end:e.add(l,i.slotMaxTime)});return s}const Ss=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function Ms(r,i,e,s,l){let f=new Date(0),w=r,z=Zt(0),W=e||function Ts(r){let i,e,s;for(i=Ss.length-1;i>=0;i-=1)if(e=Zt(Ss[i]),s=tr(e,r),null!==s&&s>1)return e;return r}(s),ie=[];for(;Zn(w)<Zn(i);){let oe=l.add(f,w),Re=null!==tr(z,W);ie.push({date:oe,time:w,key:oe.toISOString(),isoTimeStr:Sp(oe),isLabeled:Re}),w=Ii(w,s),z=Ii(z,s)}return ie}function Qs(r,i){let e=new Wa(r.renderRange,i);return new rp(e,!1)}Hl('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');var Ao=ou({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:{allDaySlot:Boolean},views:{timeGrid:{component:class Gs extends ve{constructor(){super(...arguments),this.buildTimeColsModel=Qn(Qs),this.buildSlatMetas=Qn(Ms)}render(){let{options:i,dateEnv:e,dateProfileGenerator:s}=this.context,{props:l}=this,{dateProfile:f}=l,w=this.buildTimeColsModel(f,s),z=this.allDaySplitter.splitProps(l),W=this.buildSlatMetas(f.slotMinTime,f.slotMaxTime,i.slotLabelInterval,i.slotDuration,e),{dayMinWidth:ie}=i,oe=!ie,Re=ie,je=i.dayHeaders&&Mt(tf,{dates:w.headerDates,dateProfile:f,datesRepDistinctDays:!0,renderIntro:oe?this.renderHeadAxis:null}),Ye=!1!==i.allDaySlot&&($t=>Mt(Qg,Object.assign({},z.allDay,{dateProfile:f,dayTableModel:w,nextDayThreshold:i.nextDayThreshold,tableMinWidth:$t.tableMinWidth,colGroupNode:$t.tableColGroupNode,renderRowIntro:oe?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:$t.clientWidth,clientHeight:$t.clientHeight,forPrint:l.forPrint},this.getAllDayMaxEventProps()))),Wt=$t=>Mt(Sr,Object.assign({},z.timed,{dayTableModel:w,dateProfile:f,axis:oe,slotDuration:i.slotDuration,slatMetas:W,forPrint:l.forPrint,tableColGroupNode:$t.tableColGroupNode,tableMinWidth:$t.tableMinWidth,clientWidth:$t.clientWidth,clientHeight:$t.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:$t.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return Re?this.renderHScrollLayout(je,Ye,Wt,w.colCnt,ie,W,this.state.slatCoords):this.renderSimpleLayout(je,Ye,Wt)}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class go extends vs{constructor(){super(...arguments),this.state={textId:C()}}render(){let{theme:i,dateEnv:e,options:s,viewApi:l}=this.context,{cellId:f,dayDate:w,todayRange:z}=this.props,{textId:W}=this.state,ie=cd(w,z),oe=s.listDayFormat?e.format(w,s.listDayFormat):"",Re=s.listDaySideFormat?e.format(w,s.listDaySideFormat):"",je=Object.assign({date:e.toDate(w),view:l,textId:W,text:oe,sideText:Re,navLinkAttrs:ud(this.context,w),sideNavLinkAttrs:ud(this.context,w,"day",!1)},ie);return Mt(ga,{elTag:"tr",elClasses:["fc-list-day",...ru(ie,i)],elAttrs:{"data-date":Su(w)},renderProps:je,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:qs,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},Ye=>Mt("th",{scope:"colgroup",colSpan:3,id:f,"aria-labelledby":W},Mt(Ye,{elTag:"div",elClasses:["fc-list-day-cushion",i.getClass("tableCellShaded")]})))}}function qs(r){return Mt(Vr,null,r.text&&Mt("a",Object.assign({id:r.textId,className:"fc-list-day-text"},r.navLinkAttrs),r.text),r.sideText&&Mt("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},r.sideNavLinkAttrs),r.sideText))}const ss=hn({hour:"numeric",minute:"2-digit",meridiem:"short"});class vo extends vs{render(){let{props:i,context:e}=this,{options:s}=e,{seg:l,timeHeaderId:f,eventHeaderId:w,dateHeaderId:z}=i,W=s.eventTimeFormat||ss;return Mt(dm,Object.assign({},i,{elTag:"tr",elClasses:["fc-list-event",l.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>function Ds(r,i){let e=$p(r,i);return Mt("a",Object.assign({},e),r.eventRange.def.title)}(l,e),seg:l,timeText:"",disableDragging:!0,disableResizing:!0}),(ie,oe)=>Mt(Vr,null,function ll(r,i,e,s,l){let{options:f}=e;if(!1!==f.displayEventTime){let ie,z=r.eventRange.instance,W=!1;return r.eventRange.def.allDay?W=!0:function Lc(r){let i=th(r);return qo(i.start,i.end)>1}(r.eventRange.range)?r.isStart?ie=dh(r,i,e,null,null,z.range.start,r.end):r.isEnd?ie=dh(r,i,e,null,null,r.start,z.range.end):W=!0:ie=dh(r,i,e),W?Mt(ga,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${s} ${l}`},renderProps:{text:e.options.allDayText,view:e.viewApi},generatorName:"allDayContent",customGenerator:f.allDayContent,defaultGenerator:_o,classNameGenerator:f.allDayClassNames,didMount:f.allDayDidMount,willUnmount:f.allDayWillUnmount}):Mt("td",{className:"fc-list-event-time"},ie)}return null}(l,W,e,f,z),Mt("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},Mt("span",{className:"fc-list-event-dot",style:{borderColor:oe.borderColor||oe.backgroundColor}})),Mt(ie,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${w} ${z}`}})))}}function _o(r){return r.text}function ea(r){return r.text}function cl(r){let i=jr(r.renderRange.start),e=r.renderRange.end,s=[],l=[];for(;i<e;)s.push(i),l.push({start:i,end:cs(i,1)}),i=cs(i,1);return{dayDates:s,dayRanges:l}}function gp(r){return!1===r?null:hn(r)}Hl(':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}');var wf=ou({name:"@fullcalendar/list",optionRefiners:{listDayFormat:gp,listDaySideFormat:gp,noEventsClassNames:Ai,noEventsContent:Ai,noEventsDidMount:Ai,noEventsWillUnmount:Ai},views:{list:{component:class _a extends Y{constructor(){super(...arguments),this.computeDateVars=Qn(cl),this.eventStoreToSegs=Qn(this._eventStoreToSegs),this.state={timeHeaderId:C(),eventHeaderId:C(),dateHeaderIdRoot:C()},this.setRootEl=i=>{i?this.context.registerInteractiveComponent(this,{el:i}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:i,context:e}=this,{dayDates:s,dayRanges:l}=this.computeDateVars(i.dateProfile),f=this.eventStoreToSegs(i.eventStore,i.eventUiBases,l);return Mt(id,{elRef:this.setRootEl,elClasses:["fc-list",e.theme.getClass("table"),!1!==e.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:e.viewSpec},Mt(xg,{liquid:!i.isHeightAuto,overflowX:i.isHeightAuto?"visible":"hidden",overflowY:i.isHeightAuto?"visible":"auto"},f.length>0?this.renderSegList(f,s):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:i,viewApi:e}=this.context;return Mt(ga,{elTag:"div",elClasses:["fc-list-empty"],renderProps:{text:i.noEventsText,view:e},generatorName:"noEventsContent",customGenerator:i.noEventsContent,defaultGenerator:ea,classNameGenerator:i.noEventsClassNames,didMount:i.noEventsDidMount,willUnmount:i.noEventsWillUnmount},l=>Mt(l,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(i,e){let{theme:s,options:l}=this.context,{timeHeaderId:f,eventHeaderId:w,dateHeaderIdRoot:z}=this.state,W=function ta(r){let e,s,i=[];for(e=0;e<r.length;e+=1)s=r[e],(i[s.dayIndex]||(i[s.dayIndex]=[])).push(s);return i}(i);return Mt(ef,{unit:"day"},(ie,oe)=>{let Re=[];for(let je=0;je<W.length;je+=1){let Ye=W[je];if(Ye){let Wt=Su(e[je]),$t=z+"-"+Wt;Re.push(Mt(go,{key:Wt,cellId:$t,dayDate:e[je],todayRange:oe})),Ye=Jh(Ye,l.eventOrder);for(let ci of Ye)Re.push(Mt(vo,Object.assign({key:Wt+":"+ci.eventRange.instance.instanceId,seg:ci,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:f,eventHeaderId:w,dateHeaderId:$t},pc(ci,oe,ie))))}}return Mt("table",{className:"fc-list-table "+s.getClass("table")},Mt("thead",null,Mt("tr",null,Mt("th",{scope:"col",id:f},l.timeHint),Mt("th",{scope:"col","aria-hidden":!0}),Mt("th",{scope:"col",id:w},l.eventHint))),Mt("tbody",null,Re))})}_eventStoreToSegs(i,e,s){return this.eventRangesToSegs(uh(i,e,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,s)}eventRangesToSegs(i,e){let s=[];for(let l of i)s.push(...this.eventRangeToSegs(l,e));return s}eventRangeToSegs(i,e){let z,W,ie,{dateEnv:s}=this.context,{nextDayThreshold:l}=this.context.options,f=i.range,w=i.def.allDay,oe=[];for(z=0;z<e.length;z+=1)if(W=Gl(f,e[z]),W&&(ie={component:this,eventRange:i,start:W.start,end:W.end,isStart:i.isStart&&W.start.valueOf()===f.start.valueOf(),isEnd:i.isEnd&&W.end.valueOf()===f.end.valueOf(),dayIndex:z},oe.push(ie),!ie.isEnd&&!w&&z+1<e.length&&f.end<s.add(e[z+1].start,l))){ie.end=f.end,ie.isEnd=!0;break}return oe}},buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});const W_=["*"],$_=["rootEl"],kh=r=>({$implicit:r});function X_(r,i){if(1&r&&(t.I0R(0,"div",1,2),t.C_f(2,3),t.C$Y()),2&r){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,kh,e.renderProps))}}function ev(r,i){if(1&r&&(t.I0R(0,"span",1,2),t.C_f(2,3),t.C$Y()),2&r){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,kh,e.renderProps))}}function tv(r,i){if(1&r&&(t.I0R(0,"a",1,2),t.C_f(2,3),t.C$Y()),2&r){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,kh,e.renderProps))}}function ju(r,i){if(1&r&&(t.I0R(0,"tr",1,2),t.C_f(2,3),t.C$Y()),2&r){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,kh,e.renderProps))}}function Z_(r,i){if(1&r&&(t.I0R(0,"th",1,2),t.C_f(2,3),t.C$Y()),2&r){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,kh,e.renderProps))}}function Mh(r,i){if(1&r&&(t.I0R(0,"td",1,2),t.C_f(2,3),t.C$Y()),2&r){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,kh,e.renderProps))}}const iv=["dayHeaderContent"],nv=["dayCellContent"],Nd=["weekNumberContent"],rv=["nowIndicatorContent"],m0=["eventContent"],ql=["slotLaneContent"],Kl=["slotLabelContent"],Cf=["allDayContent"],sv=["moreLinkContent"],q_=["noEventsContent"],Ah=["resourceAreaHeaderContent"],Gw=["resourceGroupLabelContent"],jw=["resourceLabelContent"],Uw=["resourceLaneContent"],Ww=["resourceGroupLaneContent"];function $w(r,i){if(1&r&&t.wR5(0,"transport-container",1),2&r){const e=i.$implicit,s=t.GaO();t.E7m("inPlaceOf",e.containerEl)("reportEl",e.reportNewContainerEl)("elTag",e.elTag)("elClasses",e.elClasses)("elStyle",e.elStyle)("elAttrs",e.elAttrs)("template",s.templateMap[e.generatorName])("renderProps",e.renderProps)}}const zb={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},Xw=["events","eventSources","resources"],Zw=Object.prototype.hasOwnProperty;function K_(r){return Array.isArray(r)?r.map(K_):r instanceof Date?new Date(r.valueOf()):"object"==typeof r&&r?Fb(r,K_):r}function Fb(r,i){const e={};for(const s in r)Zw.call(r,s)&&(e[s]=i(r[s],s));return e}function g0(r,i){if(r===i)return!0;if(r&&i&&"object"==typeof r&&"object"==typeof i){if(r.constructor!==i.constructor)return!1;var e,s,l;if(Array.isArray(r)){if((e=r.length)!=i.length)return!1;for(s=e;0!=s--;)if(!g0(r[s],i[s]))return!1;return!0}if(r.constructor===RegExp)return r.source===i.source&&r.flags===i.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===i.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===i.toString();if((e=(l=Object.keys(r)).length)!==Object.keys(i).length)return!1;for(s=e;0!=s--;)if(!Object.prototype.hasOwnProperty.call(i,l[s]))return!1;for(s=e;0!=s--;){var f=l[s];if(!g0(r[f],i[f]))return!1}return!0}return r!=r&&i!=i}const J_=typeof document<"u"?document.createDocumentFragment():null;let qw=(()=>{class r{constructor(e){this.element=e}ngAfterViewInit(){J_&&J_.appendChild(this.element.nativeElement)}ngOnDestroy(){J_&&J_.removeChild(this.element.nativeElement)}}return r.\u0275fac=function(e){return new(e||r)(t.GI1(t.GMv))},r.\u0275cmp=t.In1({type:r,selectors:[["offscreen-fragment"]],ngContentSelectors:W_,decls:1,vars:0,template:function(e,s){1&e&&(t.kPM(),t._Xx(0))},encapsulation:2}),r})();const Pm=typeof document<"u"?document.createDocumentFragment():null;let Kw=(()=>{class r{ngAfterViewInit(){const e=this.rootElRef?.nativeElement;Bb(e,this.inPlaceOf),v0(e,void 0,this.elAttrs),this.inPlaceOf.style.display="none",this.reportEl(e)}ngOnChanges(e){const s=this.rootElRef?.nativeElement;if(s)if(this.inPlaceOf.parentNode!==Pm)Bb(s,this.inPlaceOf),v0(s,void 0,this.elAttrs),this.reportEl(s);else{const l=e.elAttrs;l&&v0(s,l.previousValue,l.currentValue)}}ngOnDestroy(){this.inPlaceOf.parentNode===Pm&&Pm&&Pm.removeChild(this.inPlaceOf),this.reportEl(null)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.In1({type:r,selectors:[["transport-container"]],viewQuery:function(e,s){if(1&e&&t.CC$($_,5),2&e){let l;t.wto(l=t.Gqi())&&(s.rootElRef=l.first)}},inputs:{inPlaceOf:"inPlaceOf",reportEl:"reportEl",elTag:"elTag",elClasses:"elClasses",elStyle:"elStyle",elAttrs:"elAttrs",template:"template",renderProps:"renderProps"},features:[t.SYr],decls:6,vars:6,consts:[[3,"ngIf"],[3,"ngClass","ngStyle"],["rootEl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,s){1&e&&t.yuY(0,X_,3,6,"ng-template",0)(1,ev,3,6,"ng-template",0)(2,tv,3,6,"ng-template",0)(3,ju,3,6,"ng-template",0)(4,Z_,3,6,"ng-template",0)(5,Mh,3,6,"ng-template",0),2&e&&(t.E7m("ngIf","div"==s.elTag),t.yG2(),t.E7m("ngIf","span"==s.elTag),t.yG2(),t.E7m("ngIf","a"==s.elTag),t.yG2(),t.E7m("ngIf","tr"==s.elTag),t.yG2(),t.E7m("ngIf","th"==s.elTag),t.yG2(),t.E7m("ngIf","td"==s.elTag))},dependencies:[Ge.u_,Ge.QF,Ge.Qt,Ge.XV],encapsulation:2}),r})();function Bb(r,i){i.parentNode?.insertBefore(r,i.nextSibling),Pm&&Pm.appendChild(i)}function v0(r,i={},e={}){for(const s in i)s in e||(r[s]=null);for(const s in e)r[s]=e[s]}let Jw=(()=>{class r{constructor(e,s){this.element=e,this.calendar=null,this.optionSnapshot={},this.customRenderingMap=new Map,this.templateMap={};const l=new fm;l.subscribe(f=>{this.customRenderingMap=f,this.customRenderingArray=void 0,s.detectChanges()}),this.handleCustomRendering=l.handle.bind(l),this.templateMap=this}ngAfterViewInit(){const{deepChangeDetection:e}=this,s={...this.options,...this.buildInputOptions()};this.optionSnapshot=Fb(s,(z,W)=>e&&zb[W]?K_(z):z);const l=this.element.nativeElement,f=this.calendar=new b_(l,{...s,...this.buildExtraOptions()}),w=l.closest("ion-content");w&&w.componentOnReady?w.componentOnReady().then(()=>{window.requestAnimationFrame(()=>{f.render()})}):f.render()}ngDoCheck(){if(this.calendar){const{deepChangeDetection:e,optionSnapshot:s}=this,l={...this.options,...this.buildInputOptions()},f={},w=[];for(const W in l)if(l.hasOwnProperty(W)){let ie=l[W];e&&zb[W]?g0(s[W],ie)||(s[W]=K_(ie),w.push(W)):s[W]!==ie&&(s[W]=ie,w.push(W)),f[W]=ie}const z=Object.keys(s);for(const W of z)W in l||(delete s[W],w.push(W));w.length&&(this.calendar.pauseRendering(),this.calendar.resetOptions({...f,...this.buildExtraOptions()},w))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}get customRenderings(){return this.customRenderingArray||(this.customRenderingArray=[...this.customRenderingMap.values()])}getApi(){return this.calendar}buildInputOptions(){const e={};for(const s of Xw){const l=this[s];null!=l&&(e[s]=l)}return e}buildExtraOptions(){return{handleCustomRendering:this.handleCustomRendering,customRenderingMetaMap:this.templateMap,customRenderingReplaces:!0}}trackCustomRendering(e,s){return s.id}}return r.\u0275fac=function(e){return new(e||r)(t.GI1(t.GMv),t.GI1(t.kD9))},r.\u0275cmp=t.In1({type:r,selectors:[["full-calendar"]],contentQueries:function(e,s,l){if(1&e&&(t.szK(l,iv,7),t.szK(l,nv,7),t.szK(l,Nd,7),t.szK(l,rv,7),t.szK(l,m0,7),t.szK(l,ql,7),t.szK(l,Kl,7),t.szK(l,Cf,7),t.szK(l,sv,7),t.szK(l,q_,7),t.szK(l,Ah,7),t.szK(l,Gw,7),t.szK(l,jw,7),t.szK(l,Uw,7),t.szK(l,Ww,7)),2&e){let f;t.wto(f=t.Gqi())&&(s.dayHeaderContent=f.first),t.wto(f=t.Gqi())&&(s.dayCellContent=f.first),t.wto(f=t.Gqi())&&(s.weekNumberContent=f.first),t.wto(f=t.Gqi())&&(s.nowIndicatorContent=f.first),t.wto(f=t.Gqi())&&(s.eventContent=f.first),t.wto(f=t.Gqi())&&(s.slotLaneContent=f.first),t.wto(f=t.Gqi())&&(s.slotLabelContent=f.first),t.wto(f=t.Gqi())&&(s.allDayContent=f.first),t.wto(f=t.Gqi())&&(s.moreLinkContent=f.first),t.wto(f=t.Gqi())&&(s.noEventsContent=f.first),t.wto(f=t.Gqi())&&(s.resourceAreaHeaderContent=f.first),t.wto(f=t.Gqi())&&(s.resourceGroupLabelContent=f.first),t.wto(f=t.Gqi())&&(s.resourceLabelContent=f.first),t.wto(f=t.Gqi())&&(s.resourceLaneContent=f.first),t.wto(f=t.Gqi())&&(s.resourceGroupLaneContent=f.first)}},inputs:{options:"options",deepChangeDetection:"deepChangeDetection",events:"events",eventSources:"eventSources",resources:"resources"},decls:2,vars:2,consts:[[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps",4,"ngFor","ngForOf","ngForTrackBy"],[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps"]],template:function(e,s){1&e&&(t.I0R(0,"offscreen-fragment"),t.yuY(1,$w,1,8,"transport-container",0),t.C$Y()),2&e&&(t.yG2(),t.E7m("ngForOf",s.customRenderings)("ngForTrackBy",s.trackCustomRendering))},dependencies:[qw,Kw,Ge.ay],encapsulation:2}),r})(),Qw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.a4G({type:r}),r.\u0275inj=t.s3X({imports:[[Ge.MD]]}),r})();const eC=[{path:"company",component:vt},{path:"add-company",component:wn},{path:"edit-company/:id",component:wn},{path:"employee",component:wr},{path:"add-employee",component:_},{path:"edit-employee/:id",component:_},{path:"employee-detail/:id",component:ao},{path:"attendance-list",component:hl},{path:"department-list",component:Pa},{path:"designation-list",component:Ll},{path:"attendance-calender/:id/:company_id",component:(()=>{class r{constructor(e,s){this.api=e,this.route=s,this.spinnerStatus=!1,this.attendanceData=[],this.attendanceDataList=[],this.checkIndetails={},this.urlId=null,this.company_id=null,this.calendarOptions={plugins:[E,wf,f0,Ao],headerToolbar:{right:"dayGridMonth,dayGridWeek,dayGridDay,listWeek",center:"title",left:"prev,next today"},initialView:"dayGridMonth",themeSystem:"bootstrap",timeZone:"local",selectable:!0,navLinks:!0,eventResizableFromStart:!0,events:[],eventContent:function(l){const{extendedProps:f}=l.event;return{html:`\n\n          <div >\n        \n           <b>Check-in:</b> ${f.earliestCheckInTime} <br>\n            <b>Check-out:</b> ${f.latestCheckOutTime||"Ongoing"} <br>\n            <b>Total Duration:</b>   ${f.totalDuration}\n           \n           \n          </div>\n        `}}}}ngOnInit(){this.route.params.subscribe(e=>{}),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null,this.company_id=e.company_id?Number(e.company_id):null}),this.getAttendance(),this.urlId&&this.company_id&&this.getCheckInDetail()}toggleSpinner(e){this.spinnerStatus=e}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid("getAttendence?company_id=1&date=2024-08-10").subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.attendanceData=s.data||[],this.attendanceDataList=s.data||[]):(this.attendanceData=[],this.attendanceDataList=[],this.toggleSpinner(!1))},s=>{this.handleError(s.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetailAllDate?emp_id=${this.urlId}&company_id=${this.company_id}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status){this.checkIndetails=e.data,console.log(this.checkIndetails);const s=this.checkIndetails.checkInsByDate.flatMap(l=>({title:`${l.earliestCheckInTime} - ${l.latestCheckOutTime||"Ongoing"}`,start:`${l.date}T${l.earliestCheckInTime}`,end:l.latestCheckOutTime?`${l.date}T${l.latestCheckOutTime}`:null,extendedProps:{earliestCheckInTime:this.formatTime(l.earliestCheckInTime),latestCheckOutTime:this.formatTime(l.latestCheckOutTime),totalDuration:l.totalDuration},className:"bg-warning-subtle"}));this.calendarOptions={...this.calendarOptions,events:s}}else this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}formatTime(e){if(!e)return"Invalid time";const[s,l,f]=e.split(":");return`${+s%12||12}:${l} ${+s>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(De),t.GI1(k.gV))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["app-atten-calender"]],decls:6,vars:1,consts:[[1,"calendar-wrapper","d-lg-flex","gap-4"],[1,"w-100"],[1,"card","card-h-100"],[1,""],["id","calendar"],[3,"options"]],template:function(s,l){1&s&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.wR5(5,"full-calendar",5),t.C$Y()()()()()),2&s&&(t.yG2(5),t.E7m("options",l.calendarOptions))},dependencies:[Jw]})}return r})()}];let tC=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=t.a4G({type:r});static#i=this.\u0275inj=t.s3X({imports:[k.qQ.forChild(eC),k.qQ]})}return r})();var iC=Rt(1116),Nb=Rt(2700);function Jl(r){this.content=r}Jl.prototype={constructor:Jl,find:function(r){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===r)return i;return-1},get:function(r){var i=this.find(r);return-1==i?void 0:this.content[i+1]},update:function(r,i,e){var s=e&&e!=r?this.remove(e):this,l=s.find(r),f=s.content.slice();return-1==l?f.push(e||r,i):(f[l+1]=i,e&&(f[l]=e)),new Jl(f)},remove:function(r){var i=this.find(r);if(-1==i)return this;var e=this.content.slice();return e.splice(i,2),new Jl(e)},addToStart:function(r,i){return new Jl([r,i].concat(this.remove(r).content))},addToEnd:function(r,i){var e=this.remove(r).content.slice();return e.push(r,i),new Jl(e)},addBefore:function(r,i,e){var s=this.remove(i),l=s.content.slice(),f=s.find(r);return l.splice(-1==f?l.length:f,0,i,e),new Jl(l)},forEach:function(r){for(var i=0;i<this.content.length;i+=2)r(this.content[i],this.content[i+1])},prepend:function(r){return(r=Jl.from(r)).size?new Jl(r.content.concat(this.subtract(r).content)):this},append:function(r){return(r=Jl.from(r)).size?new Jl(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var i=this;r=Jl.from(r);for(var e=0;e<r.content.length;e+=2)i=i.remove(r.content[e]);return i},toObject:function(){var r={};return this.forEach(function(i,e){r[i]=e}),r},get size(){return this.content.length>>1}},Jl.from=function(r){if(r instanceof Jl)return r;var i=[];if(r)for(var e in r)i.push(e,r[e]);return new Jl(i)};const Yb=Jl;function Hb(r,i,e){for(let s=0;;s++){if(s==r.childCount||s==i.childCount)return r.childCount==i.childCount?null:e;let l=r.child(s),f=i.child(s);if(l!=f){if(!l.sameMarkup(f))return e;if(l.isText&&l.text!=f.text){for(let w=0;l.text[w]==f.text[w];w++)e++;return e}if(l.content.size||f.content.size){let w=Hb(l.content,f.content,e+1);if(null!=w)return w}e+=l.nodeSize}else e+=l.nodeSize}}function Vb(r,i,e,s){for(let l=r.childCount,f=i.childCount;;){if(0==l||0==f)return l==f?null:{a:e,b:s};let w=r.child(--l),z=i.child(--f),W=w.nodeSize;if(w!=z){if(!w.sameMarkup(z))return{a:e,b:s};if(w.isText&&w.text!=z.text){let ie=0,oe=Math.min(w.text.length,z.text.length);for(;ie<oe&&w.text[w.text.length-ie-1]==z.text[z.text.length-ie-1];)ie++,e--,s--;return{a:e,b:s}}if(w.content.size||z.content.size){let ie=Vb(w.content,z.content,e-1,s-1);if(ie)return ie}e-=W,s-=W}else e-=W,s-=W}}class Rn{constructor(i,e){if(this.content=i,this.size=e||0,null==e)for(let s=0;s<i.length;s++)this.size+=i[s].nodeSize}nodesBetween(i,e,s,l=0,f){for(let w=0,z=0;z<e;w++){let W=this.content[w],ie=z+W.nodeSize;if(ie>i&&!1!==s(W,l+z,f||null,w)&&W.content.size){let oe=z+1;W.nodesBetween(Math.max(0,i-oe),Math.min(W.content.size,e-oe),s,l+oe)}z=ie}}descendants(i){this.nodesBetween(0,this.size,i)}textBetween(i,e,s,l){let f="",w=!0;return this.nodesBetween(i,e,(z,W)=>{z.isText?(f+=z.text.slice(Math.max(i,W)-W,e-W),w=!s):z.isLeaf?(l?f+="function"==typeof l?l(z):l:z.type.spec.leafText&&(f+=z.type.spec.leafText(z)),w=!s):!w&&z.isBlock&&(f+=s,w=!0)},0),f}append(i){if(!i.size)return this;if(!this.size)return i;let e=this.lastChild,s=i.firstChild,l=this.content.slice(),f=0;for(e.isText&&e.sameMarkup(s)&&(l[l.length-1]=e.withText(e.text+s.text),f=1);f<i.content.length;f++)l.push(i.content[f]);return new Rn(l,this.size+i.size)}cut(i,e=this.size){if(0==i&&e==this.size)return this;let s=[],l=0;if(e>i)for(let f=0,w=0;w<e;f++){let z=this.content[f],W=w+z.nodeSize;W>i&&((w<i||W>e)&&(z=z.isText?z.cut(Math.max(0,i-w),Math.min(z.text.length,e-w)):z.cut(Math.max(0,i-w-1),Math.min(z.content.size,e-w-1))),s.push(z),l+=z.nodeSize),w=W}return new Rn(s,l)}cutByIndex(i,e){return i==e?Rn.empty:0==i&&e==this.content.length?this:new Rn(this.content.slice(i,e))}replaceChild(i,e){let s=this.content[i];if(s==e)return this;let l=this.content.slice(),f=this.size+e.nodeSize-s.nodeSize;return l[i]=e,new Rn(l,f)}addToStart(i){return new Rn([i].concat(this.content),this.size+i.nodeSize)}addToEnd(i){return new Rn(this.content.concat(i),this.size+i.nodeSize)}eq(i){if(this.content.length!=i.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(i.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(i){let e=this.content[i];if(!e)throw new RangeError("Index "+i+" out of range for "+this);return e}maybeChild(i){return this.content[i]||null}forEach(i){for(let e=0,s=0;e<this.content.length;e++){let l=this.content[e];i(l,s,e),s+=l.nodeSize}}findDiffStart(i,e=0){return Hb(this,i,e)}findDiffEnd(i,e=this.size,s=i.size){return Vb(this,i,e,s)}findIndex(i,e=-1){if(0==i)return Q_(0,i);if(i==this.size)return Q_(this.content.length,i);if(i>this.size||i<0)throw new RangeError(`Position ${i} outside of fragment (${this})`);for(let s=0,l=0;;s++){let w=l+this.child(s).nodeSize;if(w>=i)return w==i||e>0?Q_(s+1,w):Q_(s,l);l=w}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(i=>i.toJSON()):null}static fromJSON(i,e){if(!e)return Rn.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Rn(e.map(i.nodeFromJSON))}static fromArray(i){if(!i.length)return Rn.empty;let e,s=0;for(let l=0;l<i.length;l++){let f=i[l];s+=f.nodeSize,l&&f.isText&&i[l-1].sameMarkup(f)?(e||(e=i.slice(0,l)),e[e.length-1]=f.withText(e[e.length-1].text+f.text)):e&&e.push(f)}return new Rn(e||i,s)}static from(i){if(!i)return Rn.empty;if(i instanceof Rn)return i;if(Array.isArray(i))return this.fromArray(i);if(i.attrs)return new Rn([i],i.nodeSize);throw new RangeError("Can not convert "+i+" to a Fragment"+(i.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Rn.empty=new Rn([],0);const _0={index:0,offset:0};function Q_(r,i){return _0.index=r,_0.offset=i,_0}function ey(r,i){if(r===i)return!0;if(!r||"object"!=typeof r||!i||"object"!=typeof i)return!1;let e=Array.isArray(r);if(Array.isArray(i)!=e)return!1;if(e){if(r.length!=i.length)return!1;for(let s=0;s<r.length;s++)if(!ey(r[s],i[s]))return!1}else{for(let s in r)if(!(s in i)||!ey(r[s],i[s]))return!1;for(let s in i)if(!(s in r))return!1}return!0}let ro=(()=>{class r{constructor(e,s){this.type=e,this.attrs=s}addToSet(e){let s,l=!1;for(let f=0;f<e.length;f++){let w=e[f];if(this.eq(w))return e;if(this.type.excludes(w.type))s||(s=e.slice(0,f));else{if(w.type.excludes(this.type))return e;!l&&w.type.rank>this.type.rank&&(s||(s=e.slice(0,f)),s.push(this),l=!0),s&&s.push(w)}}return s||(s=e.slice()),l||s.push(this),s}removeFromSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return e.slice(0,s).concat(e.slice(s+1));return e}isInSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ey(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let l=e.marks[s.type];if(!l)throw new RangeError(`There is no mark type ${s.type} in this schema`);return l.create(s.attrs)}static sameSet(e,s){if(e==s)return!0;if(e.length!=s.length)return!1;for(let l=0;l<e.length;l++)if(!e[l].eq(s[l]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return r.none;if(e instanceof r)return[e];let s=e.slice();return s.sort((l,f)=>l.type.rank-f.type.rank),s}}return r.none=[],r})();class ty extends Error{}class dr{constructor(i,e,s){this.content=i,this.openStart=e,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(i,e){let s=jb(this.content,i+this.openStart,e);return s&&new dr(s,this.openStart,this.openEnd)}removeBetween(i,e){return new dr(Gb(this.content,i+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(i){return this.content.eq(i.content)&&this.openStart==i.openStart&&this.openEnd==i.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let i={content:this.content.toJSON()};return this.openStart>0&&(i.openStart=this.openStart),this.openEnd>0&&(i.openEnd=this.openEnd),i}static fromJSON(i,e){if(!e)return dr.empty;let s=e.openStart||0,l=e.openEnd||0;if("number"!=typeof s||"number"!=typeof l)throw new RangeError("Invalid input for Slice.fromJSON");return new dr(Rn.fromJSON(i,e.content),s,l)}static maxOpen(i,e=!0){let s=0,l=0;for(let f=i.firstChild;f&&!f.isLeaf&&(e||!f.type.spec.isolating);f=f.firstChild)s++;for(let f=i.lastChild;f&&!f.isLeaf&&(e||!f.type.spec.isolating);f=f.lastChild)l++;return new dr(i,s,l)}}function Gb(r,i,e){let{index:s,offset:l}=r.findIndex(i),f=r.maybeChild(s),{index:w,offset:z}=r.findIndex(e);if(l==i||f.isText){if(z!=e&&!r.child(w).isText)throw new RangeError("Removing non-flat range");return r.cut(0,i).append(r.cut(e))}if(s!=w)throw new RangeError("Removing non-flat range");return r.replaceChild(s,f.copy(Gb(f.content,i-l-1,e-l-1)))}function jb(r,i,e,s){let{index:l,offset:f}=r.findIndex(i),w=r.maybeChild(l);if(f==i||w.isText)return s&&!s.canReplace(l,l,e)?null:r.cut(0,i).append(e).append(r.cut(i));let z=jb(w.content,i-f-1,e);return z&&r.replaceChild(l,w.copy(z))}function nC(r,i,e){if(e.openStart>r.depth)throw new ty("Inserted content deeper than insertion position");if(r.depth-e.openStart!=i.depth-e.openEnd)throw new ty("Inconsistent open depths");return Ub(r,i,e,0)}function Ub(r,i,e,s){let l=r.index(s),f=r.node(s);if(l==i.index(s)&&s<r.depth-e.openStart){let w=Ub(r,i,e,s+1);return f.copy(f.content.replaceChild(l,w))}if(e.content.size){if(e.openStart||e.openEnd||r.depth!=s||i.depth!=s){let{start:w,end:z}=function rC(r,i){let e=i.depth-r.openStart,l=i.node(e).copy(r.content);for(let f=e-1;f>=0;f--)l=i.node(f).copy(Rn.from(l));return{start:l.resolveNoCache(r.openStart+e),end:l.resolveNoCache(l.content.size-r.openEnd-e)}}(e,r);return Sf(f,$b(r,w,z,i,s))}{let w=r.parent,z=w.content;return Sf(w,z.cut(0,r.parentOffset).append(e.content).append(z.cut(i.parentOffset)))}}return Sf(f,iy(r,i,s))}function Wb(r,i){if(!i.type.compatibleContent(r.type))throw new ty("Cannot join "+i.type.name+" onto "+r.type.name)}function y0(r,i,e){let s=r.node(e);return Wb(s,i.node(e)),s}function Ef(r,i){let e=i.length-1;e>=0&&r.isText&&r.sameMarkup(i[e])?i[e]=r.withText(i[e].text+r.text):i.push(r)}function ov(r,i,e,s){let l=(i||r).node(e),f=0,w=i?i.index(e):l.childCount;r&&(f=r.index(e),r.depth>e?f++:r.textOffset&&(Ef(r.nodeAfter,s),f++));for(let z=f;z<w;z++)Ef(l.child(z),s);i&&i.depth==e&&i.textOffset&&Ef(i.nodeBefore,s)}function Sf(r,i){return r.type.checkContent(i),r.copy(i)}function $b(r,i,e,s,l){let f=r.depth>l&&y0(r,i,l+1),w=s.depth>l&&y0(e,s,l+1),z=[];return ov(null,r,l,z),f&&w&&i.index(l)==e.index(l)?(Wb(f,w),Ef(Sf(f,$b(r,i,e,s,l+1)),z)):(f&&Ef(Sf(f,iy(r,i,l+1)),z),ov(i,e,l,z),w&&Ef(Sf(w,iy(e,s,l+1)),z)),ov(s,null,l,z),new Rn(z)}function iy(r,i,e){let s=[];return ov(null,r,e,s),r.depth>e&&Ef(Sf(y0(r,i,e+1),iy(r,i,e+1)),s),ov(i,null,e,s),new Rn(s)}dr.empty=new dr(Rn.empty,0,0);class av{constructor(i,e,s){this.pos=i,this.path=e,this.parentOffset=s,this.depth=e.length/3-1}resolveDepth(i){return null==i?this.depth:i<0?this.depth+i:i}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(i){return this.path[3*this.resolveDepth(i)]}index(i){return this.path[3*this.resolveDepth(i)+1]}indexAfter(i){return i=this.resolveDepth(i),this.index(i)+(i!=this.depth||this.textOffset?1:0)}start(i){return 0==(i=this.resolveDepth(i))?0:this.path[3*i-1]+1}end(i){return i=this.resolveDepth(i),this.start(i)+this.node(i).content.size}before(i){if(!(i=this.resolveDepth(i)))throw new RangeError("There is no position before the top-level node");return i==this.depth+1?this.pos:this.path[3*i-1]}after(i){if(!(i=this.resolveDepth(i)))throw new RangeError("There is no position after the top-level node");return i==this.depth+1?this.pos:this.path[3*i-1]+this.path[3*i].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let i=this.parent,e=this.index(this.depth);if(e==i.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=i.child(e);return s?i.child(e).cut(s):l}get nodeBefore(){let i=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(i).cut(0,e):0==i?null:this.parent.child(i-1)}posAtIndex(i,e){e=this.resolveDepth(e);let s=this.path[3*e],l=0==e?0:this.path[3*e-1]+1;for(let f=0;f<i;f++)l+=s.child(f).nodeSize;return l}marks(){let i=this.parent,e=this.index();if(0==i.content.size)return ro.none;if(this.textOffset)return i.child(e).marks;let s=i.maybeChild(e-1),l=i.maybeChild(e);if(!s){let z=s;s=l,l=z}let f=s.marks;for(var w=0;w<f.length;w++)!1===f[w].type.spec.inclusive&&(!l||!f[w].isInSet(l.marks))&&(f=f[w--].removeFromSet(f));return f}marksAcross(i){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let s=e.marks,l=i.parent.maybeChild(i.index());for(var f=0;f<s.length;f++)!1===s[f].type.spec.inclusive&&(!l||!s[f].isInSet(l.marks))&&(s=s[f--].removeFromSet(s));return s}sharedDepth(i){for(let e=this.depth;e>0;e--)if(this.start(e)<=i&&this.end(e)>=i)return e;return 0}blockRange(i=this,e){if(i.pos<this.pos)return i.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==i.pos?1:0);s>=0;s--)if(i.pos<=this.end(s)&&(!e||e(this.node(s))))return new ny(this,i,s);return null}sameParent(i){return this.pos-this.parentOffset==i.pos-i.parentOffset}max(i){return i.pos>this.pos?i:this}min(i){return i.pos<this.pos?i:this}toString(){let i="";for(let e=1;e<=this.depth;e++)i+=(i?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return i+":"+this.parentOffset}static resolve(i,e){if(!(e>=0&&e<=i.content.size))throw new RangeError("Position "+e+" out of range");let s=[],l=0,f=e;for(let w=i;;){let{index:z,offset:W}=w.content.findIndex(f),ie=f-W;if(s.push(w,z,l+W),!ie||(w=w.child(z),w.isText))break;f=ie-1,l+=W+1}return new av(e,s,f)}static resolveCached(i,e){for(let l=0;l<b0.length;l++){let f=b0[l];if(f.pos==e&&f.doc==i)return f}let s=b0[x0]=av.resolve(i,e);return x0=(x0+1)%sC,s}}let b0=[],x0=0,sC=12;class ny{constructor(i,e,s){this.$from=i,this.$to=e,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const oC=Object.create(null);class Dh{constructor(i,e,s,l=ro.none){this.type=i,this.attrs=e,this.marks=l,this.content=s||Rn.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(i){return this.content.child(i)}maybeChild(i){return this.content.maybeChild(i)}forEach(i){this.content.forEach(i)}nodesBetween(i,e,s,l=0){this.content.nodesBetween(i,e,s,l,this)}descendants(i){this.nodesBetween(0,this.content.size,i)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(i,e,s,l){return this.content.textBetween(i,e,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(i){return this==i||this.sameMarkup(i)&&this.content.eq(i.content)}sameMarkup(i){return this.hasMarkup(i.type,i.attrs,i.marks)}hasMarkup(i,e,s){return this.type==i&&ey(this.attrs,e||i.defaultAttrs||oC)&&ro.sameSet(this.marks,s||ro.none)}copy(i=null){return i==this.content?this:new Dh(this.type,this.attrs,i,this.marks)}mark(i){return i==this.marks?this:new Dh(this.type,this.attrs,this.content,i)}cut(i,e=this.content.size){return 0==i&&e==this.content.size?this:this.copy(this.content.cut(i,e))}slice(i,e=this.content.size,s=!1){if(i==e)return dr.empty;let l=this.resolve(i),f=this.resolve(e),w=s?0:l.sharedDepth(e),z=l.start(w),ie=l.node(w).content.cut(l.pos-z,f.pos-z);return new dr(ie,l.depth-w,f.depth-w)}replace(i,e,s){return nC(this.resolve(i),this.resolve(e),s)}nodeAt(i){for(let e=this;;){let{index:s,offset:l}=e.content.findIndex(i);if(e=e.maybeChild(s),!e)return null;if(l==i||e.isText)return e;i-=l+1}}childAfter(i){let{index:e,offset:s}=this.content.findIndex(i);return{node:this.content.maybeChild(e),index:e,offset:s}}childBefore(i){if(0==i)return{node:null,index:0,offset:0};let{index:e,offset:s}=this.content.findIndex(i);if(s<i)return{node:this.content.child(e),index:e,offset:s};let l=this.content.child(e-1);return{node:l,index:e-1,offset:s-l.nodeSize}}resolve(i){return av.resolveCached(this,i)}resolveNoCache(i){return av.resolve(this,i)}rangeHasMark(i,e,s){let l=!1;return e>i&&this.nodesBetween(i,e,f=>(s.isInSet(f.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let i=this.type.name;return this.content.size&&(i+="("+this.content.toStringInner()+")"),Xb(this.marks,i)}contentMatchAt(i){let e=this.type.contentMatch.matchFragment(this.content,0,i);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(i,e,s=Rn.empty,l=0,f=s.childCount){let w=this.contentMatchAt(i).matchFragment(s,l,f),z=w&&w.matchFragment(this.content,e);if(!z||!z.validEnd)return!1;for(let W=l;W<f;W++)if(!this.type.allowsMarks(s.child(W).marks))return!1;return!0}canReplaceWith(i,e,s,l){if(l&&!this.type.allowsMarks(l))return!1;let f=this.contentMatchAt(i).matchType(s),w=f&&f.matchFragment(this.content,e);return!!w&&w.validEnd}canAppend(i){return i.content.size?this.canReplace(this.childCount,this.childCount,i.content):this.type.compatibleContent(i.type)}check(){this.type.checkContent(this.content);let i=ro.none;for(let e=0;e<this.marks.length;e++)i=this.marks[e].addToSet(i);if(!ro.sameSet(i,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let i={type:this.type.name};for(let e in this.attrs){i.attrs=this.attrs;break}return this.content.size&&(i.content=this.content.toJSON()),this.marks.length&&(i.marks=this.marks.map(e=>e.toJSON())),i}static fromJSON(i,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let s=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=e.marks.map(i.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return i.text(e.text,s)}let l=Rn.fromJSON(i,e.content);return i.nodeType(e.type).create(e.attrs,l,s)}}Dh.prototype.text=void 0;class ry extends Dh{constructor(i,e,s,l){if(super(i,e,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Xb(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(i,e){return this.text.slice(i,e)}get nodeSize(){return this.text.length}mark(i){return i==this.marks?this:new ry(this.type,this.attrs,this.text,i)}withText(i){return i==this.text?this:new ry(this.type,this.attrs,i,this.marks)}cut(i=0,e=this.text.length){return 0==i&&e==this.text.length?this:this.withText(this.text.slice(i,e))}eq(i){return this.sameMarkup(i)&&this.text==i.text}toJSON(){let i=super.toJSON();return i.text=this.text,i}}function Xb(r,i){for(let e=r.length-1;e>=0;e--)i=r[e].type.name+"("+i+")";return i}class Tf{constructor(i){this.validEnd=i,this.next=[],this.wrapCache=[]}static parse(i,e){let s=new aC(i,e);if(null==s.next)return Tf.empty;let l=Zb(s);s.next&&s.err("Unexpected trailing text");let f=function fC(r){let i=Object.create(null);return function e(s){let l=[];s.forEach(w=>{r[w].forEach(({term:z,to:W})=>{if(!z)return;let ie;for(let oe=0;oe<l.length;oe++)l[oe][0]==z&&(ie=l[oe][1]);Jb(r,W).forEach(oe=>{ie||l.push([z,ie=[]]),-1==ie.indexOf(oe)&&ie.push(oe)})})});let f=i[s.join(",")]=new Tf(s.indexOf(r.length-1)>-1);for(let w=0;w<l.length;w++){let z=l[w][1].sort(Kb);f.next.push({type:l[w][0],next:i[z.join(",")]||e(z)})}return f}(Jb(r,0))}(function pC(r){let i=[[]];return l(function f(w,z){if("choice"==w.type)return w.exprs.reduce((W,ie)=>W.concat(f(ie,z)),[]);if("seq"!=w.type){if("star"==w.type){let W=e();return s(z,W),l(f(w.expr,W),W),[s(W)]}if("plus"==w.type){let W=e();return l(f(w.expr,z),W),l(f(w.expr,W),W),[s(W)]}if("opt"==w.type)return[s(z)].concat(f(w.expr,z));if("range"==w.type){let W=z;for(let ie=0;ie<w.min;ie++){let oe=e();l(f(w.expr,W),oe),W=oe}if(-1==w.max)l(f(w.expr,W),W);else for(let ie=w.min;ie<w.max;ie++){let oe=e();s(W,oe),l(f(w.expr,W),oe),W=oe}return[s(W)]}if("name"==w.type)return[s(z,void 0,w.value)];throw new Error("Unknown expr type")}for(let W=0;;W++){let ie=f(w.exprs[W],z);if(W==w.exprs.length-1)return ie;l(ie,z=e())}}(r,0),e()),i;function e(){return i.push([])-1}function s(w,z,W){let ie={term:W,to:z};return i[w].push(ie),ie}function l(w,z){w.forEach(W=>W.to=z)}}(l));return function mC(r,i){for(let e=0,s=[r];e<s.length;e++){let l=s[e],f=!l.validEnd,w=[];for(let z=0;z<l.next.length;z++){let{type:W,next:ie}=l.next[z];w.push(W.name),f&&!(W.isText||W.hasRequiredAttrs())&&(f=!1),-1==s.indexOf(ie)&&s.push(ie)}f&&i.err("Only non-generatable nodes ("+w.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(f,s),f}matchType(i){for(let e=0;e<this.next.length;e++)if(this.next[e].type==i)return this.next[e].next;return null}matchFragment(i,e=0,s=i.childCount){let l=this;for(let f=e;l&&f<s;f++)l=l.matchType(i.child(f).type);return l}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let i=0;i<this.next.length;i++){let{type:e}=this.next[i];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(i){for(let e=0;e<this.next.length;e++)for(let s=0;s<i.next.length;s++)if(this.next[e].type==i.next[s].type)return!0;return!1}fillBefore(i,e=!1,s=0){let l=[this];return function f(w,z){let W=w.matchFragment(i,s);if(W&&(!e||W.validEnd))return Rn.from(z.map(ie=>ie.createAndFill()));for(let ie=0;ie<w.next.length;ie++){let{type:oe,next:Re}=w.next[ie];if(!oe.isText&&!oe.hasRequiredAttrs()&&-1==l.indexOf(Re)){l.push(Re);let je=f(Re,z.concat(oe));if(je)return je}}return null}(this,[])}findWrapping(i){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==i)return this.wrapCache[s+1];let e=this.computeWrapping(i);return this.wrapCache.push(i,e),e}computeWrapping(i){let e=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),f=l.match;if(f.matchType(i)){let w=[];for(let z=l;z.type;z=z.via)w.push(z.type);return w.reverse()}for(let w=0;w<f.next.length;w++){let{type:z,next:W}=f.next[w];!z.isLeaf&&!z.hasRequiredAttrs()&&!(z.name in e)&&(!l.type||W.validEnd)&&(s.push({match:z.contentMatch,type:z,via:l}),e[z.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(i){if(i>=this.next.length)throw new RangeError(`There's no ${i}th edge in this content match`);return this.next[i]}toString(){let i=[];return function e(s){i.push(s);for(let l=0;l<s.next.length;l++)-1==i.indexOf(s.next[l].next)&&e(s.next[l].next)}(this),i.map((s,l)=>{let f=l+(s.validEnd?"*":" ")+" ";for(let w=0;w<s.next.length;w++)f+=(w?", ":"")+s.next[w].type.name+"->"+i.indexOf(s.next[w].next);return f}).join("\n")}}Tf.empty=new Tf(!0);class aC{constructor(i,e){this.string=i,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=i.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(i){return this.next==i&&(this.pos++||!0)}err(i){throw new SyntaxError(i+" (in content expression '"+this.string+"')")}}function Zb(r){let i=[];do{i.push(lC(r))}while(r.eat("|"));return 1==i.length?i[0]:{type:"choice",exprs:i}}function lC(r){let i=[];do{i.push(cC(r))}while(r.next&&")"!=r.next&&"|"!=r.next);return 1==i.length?i[0]:{type:"seq",exprs:i}}function cC(r){let i=function hC(r){if(r.eat("(")){let i=Zb(r);return r.eat(")")||r.err("Missing closing paren"),i}if(!/\W/.test(r.next)){let i=function dC(r,i){let e=r.nodeTypes,s=e[i];if(s)return[s];let l=[];for(let f in e){let w=e[f];w.groups.indexOf(i)>-1&&l.push(w)}return 0==l.length&&r.err("No node type or group '"+i+"' found"),l}(r,r.next).map(e=>(null==r.inline?r.inline=e.isInline:r.inline!=e.isInline&&r.err("Mixing inline and block content"),{type:"name",value:e}));return r.pos++,1==i.length?i[0]:{type:"choice",exprs:i}}r.err("Unexpected token '"+r.next+"'")}(r);for(;;)if(r.eat("+"))i={type:"plus",expr:i};else if(r.eat("*"))i={type:"star",expr:i};else if(r.eat("?"))i={type:"opt",expr:i};else{if(!r.eat("{"))break;i=uC(r,i)}return i}function qb(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let i=Number(r.next);return r.pos++,i}function uC(r,i){let e=qb(r),s=e;return r.eat(",")&&(s="}"!=r.next?qb(r):-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:e,max:s,expr:i}}function Kb(r,i){return i-r}function Jb(r,i){let e=[];return function s(l){let f=r[l];if(1==f.length&&!f[0].term)return s(f[0].to);e.push(l);for(let w=0;w<f.length;w++){let{term:z,to:W}=f[w];!z&&-1==e.indexOf(W)&&s(W)}}(i),e.sort(Kb)}function Qb(r){let i=Object.create(null);for(let e in r){let s=r[e];if(!s.hasDefault)return null;i[e]=s.default}return i}function ex(r,i){let e=Object.create(null);for(let s in r){let l=i&&i[s];if(void 0===l){let f=r[s];if(!f.hasDefault)throw new RangeError("No value supplied for attribute "+s);l=f.default}e[s]=l}return e}function tx(r){let i=Object.create(null);if(r)for(let e in r)i[e]=new gC(r[e]);return i}class sy{constructor(i,e,s){this.name=i,this.schema=e,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=tx(s.attrs),this.defaultAttrs=Qb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||"text"==i),this.isText="text"==i}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Tf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let i in this.attrs)if(this.attrs[i].isRequired)return!0;return!1}compatibleContent(i){return this==i||this.contentMatch.compatible(i.contentMatch)}computeAttrs(i){return!i&&this.defaultAttrs?this.defaultAttrs:ex(this.attrs,i)}create(i=null,e,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Dh(this,this.computeAttrs(i),Rn.from(e),ro.setFrom(s))}createChecked(i=null,e,s){return e=Rn.from(e),this.checkContent(e),new Dh(this,this.computeAttrs(i),e,ro.setFrom(s))}createAndFill(i=null,e,s){if(i=this.computeAttrs(i),(e=Rn.from(e)).size){let w=this.contentMatch.fillBefore(e);if(!w)return null;e=w.append(e)}let l=this.contentMatch.matchFragment(e),f=l&&l.fillBefore(Rn.empty,!0);return f?new Dh(this,i,e.append(f),ro.setFrom(s)):null}validContent(i){let e=this.contentMatch.matchFragment(i);if(!e||!e.validEnd)return!1;for(let s=0;s<i.childCount;s++)if(!this.allowsMarks(i.child(s).marks))return!1;return!0}checkContent(i){if(!this.validContent(i))throw new RangeError(`Invalid content for node ${this.name}: ${i.toString().slice(0,50)}`)}allowsMarkType(i){return null==this.markSet||this.markSet.indexOf(i)>-1}allowsMarks(i){if(null==this.markSet)return!0;for(let e=0;e<i.length;e++)if(!this.allowsMarkType(i[e].type))return!1;return!0}allowedMarks(i){if(null==this.markSet)return i;let e;for(let s=0;s<i.length;s++)this.allowsMarkType(i[s].type)?e&&e.push(i[s]):e||(e=i.slice(0,s));return e?e.length?e:ro.none:i}static compile(i,e){let s=Object.create(null);i.forEach((f,w)=>s[f]=new sy(f,e,w));let l=e.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let f in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}}class gC{constructor(i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default}get isRequired(){return!this.hasDefault}}class oy{constructor(i,e,s,l){this.name=i,this.rank=e,this.schema=s,this.spec=l,this.attrs=tx(l.attrs),this.excluded=null;let f=Qb(this.attrs);this.instance=f?new ro(this,f):null}create(i=null){return!i&&this.instance?this.instance:new ro(this,ex(this.attrs,i))}static compile(i,e){let s=Object.create(null),l=0;return i.forEach((f,w)=>s[f]=new oy(f,l++,e,w)),s}removeFromSet(i){for(var e=0;e<i.length;e++)i[e].type==this&&(i=i.slice(0,e).concat(i.slice(e+1)),e--);return i}isInSet(i){for(let e=0;e<i.length;e++)if(i[e].type==this)return i[e]}excludes(i){return this.excluded.indexOf(i)>-1}}function ix(r,i){let e=[];for(let s=0;s<i.length;s++){let l=i[s],f=r.marks[l],w=f;if(f)e.push(f);else for(let z in r.marks){let W=r.marks[z];("_"==l||W.spec.group&&W.spec.group.split(" ").indexOf(l)>-1)&&e.push(w=W)}if(!w)throw new SyntaxError("Unknown mark type: '"+i[s]+"'")}return e}const ux=Math.pow(2,16);function EC(r,i){return r+i*ux}function dx(r){return 65535&r}class E0{constructor(i,e,s){this.pos=i,this.delInfo=e,this.recover=s}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class du{constructor(i,e=!1){if(this.ranges=i,this.inverted=e,!i.length&&du.empty)return du.empty}recover(i){let e=0,s=dx(i);if(!this.inverted)for(let l=0;l<s;l++)e+=this.ranges[3*l+2]-this.ranges[3*l+1];return this.ranges[3*s]+e+function SC(r){return(r-(65535&r))/ux}(i)}mapResult(i,e=1){return this._map(i,e,!1)}map(i,e=1){return this._map(i,e,!0)}_map(i,e,s){let l=0,f=this.inverted?2:1,w=this.inverted?1:2;for(let z=0;z<this.ranges.length;z+=3){let W=this.ranges[z]-(this.inverted?l:0);if(W>i)break;let ie=this.ranges[z+f],oe=this.ranges[z+w],Re=W+ie;if(i<=Re){let Ye=W+l+((ie?i==W?-1:i==Re?1:e:e)<0?0:oe);if(s)return Ye;let Wt=i==(e<0?W:Re)?null:EC(z/3,i-W),$t=i==W?2:i==Re?1:4;return(e<0?i!=W:i!=Re)&&($t|=8),new E0(Ye,$t,Wt)}l+=oe-ie}return s?i+l:new E0(i+l,0,null)}touches(i,e){let s=0,l=dx(e),f=this.inverted?2:1,w=this.inverted?1:2;for(let z=0;z<this.ranges.length;z+=3){let W=this.ranges[z]-(this.inverted?s:0);if(W>i)break;let ie=this.ranges[z+f];if(i<=W+ie&&z==3*l)return!0;s+=this.ranges[z+w]-ie}return!1}forEach(i){let e=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,f=0;l<this.ranges.length;l+=3){let w=this.ranges[l],z=w-(this.inverted?f:0),W=w+(this.inverted?0:f),ie=this.ranges[l+e],oe=this.ranges[l+s];i(z,z+ie,W,W+oe),f+=oe-ie}}invert(){return new du(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(i){return 0==i?du.empty:new du(i<0?[0,-i,0]:[0,0,i])}}du.empty=new du([]);const S0=Object.create(null);class Ql{getMap(){return du.empty}merge(i){return null}static fromJSON(i,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=S0[e.stepType];if(!s)throw new RangeError(`No step type ${e.stepType} defined`);return s.fromJSON(i,e)}static jsonID(i,e){if(i in S0)throw new RangeError("Duplicate use of step JSON ID "+i);return S0[i]=e,e.prototype.jsonID=i,e}}class Ia{constructor(i,e){this.doc=i,this.failed=e}static ok(i){return new Ia(i,null)}static fail(i){return new Ia(null,i)}static fromReplace(i,e,s,l){try{return Ia.ok(i.replace(e,s,l))}catch(f){if(f instanceof ty)return Ia.fail(f.message);throw f}}}function T0(r,i,e){let s=[];for(let l=0;l<r.childCount;l++){let f=r.child(l);f.content.size&&(f=f.copy(T0(f.content,i,f))),f.isInline&&(f=i(f,e,l)),s.push(f)}return Rn.fromArray(s)}class vp extends Ql{constructor(i,e,s){super(),this.from=i,this.to=e,this.mark=s}apply(i){let e=i.slice(this.from,this.to),s=i.resolve(this.from),l=s.node(s.sharedDepth(this.to)),f=new dr(T0(e.content,(w,z)=>w.isAtom&&z.type.allowsMarkType(this.mark.type)?w.mark(this.mark.addToSet(w.marks)):w,l),e.openStart,e.openEnd);return Ia.fromReplace(i,this.from,this.to,f)}invert(){return new Yd(this.from,this.to,this.mark)}map(i){let e=i.mapResult(this.from,1),s=i.mapResult(this.to,-1);return e.deleted&&s.deleted||e.pos>=s.pos?null:new vp(e.pos,s.pos,this.mark)}merge(i){return i instanceof vp&&i.mark.eq(this.mark)&&this.from<=i.to&&this.to>=i.from?new vp(Math.min(this.from,i.from),Math.max(this.to,i.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new vp(e.from,e.to,i.markFromJSON(e.mark))}}Ql.jsonID("addMark",vp);class Yd extends Ql{constructor(i,e,s){super(),this.from=i,this.to=e,this.mark=s}apply(i){let e=i.slice(this.from,this.to),s=new dr(T0(e.content,l=>l.mark(this.mark.removeFromSet(l.marks)),i),e.openStart,e.openEnd);return Ia.fromReplace(i,this.from,this.to,s)}invert(){return new vp(this.from,this.to,this.mark)}map(i){let e=i.mapResult(this.from,1),s=i.mapResult(this.to,-1);return e.deleted&&s.deleted||e.pos>=s.pos?null:new Yd(e.pos,s.pos,this.mark)}merge(i){return i instanceof Yd&&i.mark.eq(this.mark)&&this.from<=i.to&&this.to>=i.from?new Yd(Math.min(this.from,i.from),Math.max(this.to,i.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yd(e.from,e.to,i.markFromJSON(e.mark))}}Ql.jsonID("removeMark",Yd);class _p extends Ql{constructor(i,e){super(),this.pos=i,this.mark=e}apply(i){let e=i.nodeAt(this.pos);if(!e)return Ia.fail("No node at mark step's position");let s=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return Ia.fromReplace(i,this.pos,this.pos+1,new dr(Rn.from(s),0,e.isLeaf?0:1))}invert(i){let e=i.nodeAt(this.pos);if(e){let s=this.mark.addToSet(e.marks);if(s.length==e.marks.length){for(let l=0;l<e.marks.length;l++)if(!e.marks[l].isInSet(s))return new _p(this.pos,e.marks[l]);return new _p(this.pos,this.mark)}}return new Rm(this.pos,this.mark)}map(i){let e=i.mapResult(this.pos,1);return e.deletedAfter?null:new _p(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(i,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _p(e.pos,i.markFromJSON(e.mark))}}Ql.jsonID("addNodeMark",_p);class Rm extends Ql{constructor(i,e){super(),this.pos=i,this.mark=e}apply(i){let e=i.nodeAt(this.pos);if(!e)return Ia.fail("No node at mark step's position");let s=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return Ia.fromReplace(i,this.pos,this.pos+1,new dr(Rn.from(s),0,e.isLeaf?0:1))}invert(i){let e=i.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new _p(this.pos,this.mark):this}map(i){let e=i.mapResult(this.pos,1);return e.deletedAfter?null:new Rm(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(i,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Rm(e.pos,i.markFromJSON(e.mark))}}Ql.jsonID("removeNodeMark",Rm);class ec extends Ql{constructor(i,e,s,l=!1){super(),this.from=i,this.to=e,this.slice=s,this.structure=l}apply(i){return this.structure&&k0(i,this.from,this.to)?Ia.fail("Structure replace would overwrite content"):Ia.fromReplace(i,this.from,this.to,this.slice)}getMap(){return new du([this.from,this.to-this.from,this.slice.size])}invert(i){return new ec(this.from,this.from+this.slice.size,i.slice(this.from,this.to))}map(i){let e=i.mapResult(this.from,1),s=i.mapResult(this.to,-1);return e.deletedAcross&&s.deletedAcross?null:new ec(e.pos,Math.max(e.pos,s.pos),this.slice)}merge(i){if(!(i instanceof ec)||i.structure||this.structure)return null;if(this.from+this.slice.size!=i.from||this.slice.openEnd||i.slice.openStart){if(i.to!=this.from||this.slice.openStart||i.slice.openEnd)return null;{let e=this.slice.size+i.slice.size==0?dr.empty:new dr(i.slice.content.append(this.slice.content),i.slice.openStart,this.slice.openEnd);return new ec(i.from,this.to,e,this.structure)}}{let e=this.slice.size+i.slice.size==0?dr.empty:new dr(this.slice.content.append(i.slice.content),this.slice.openStart,i.slice.openEnd);return new ec(this.from,this.to+(i.to-i.from),e,this.structure)}}toJSON(){let i={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(i.slice=this.slice.toJSON()),this.structure&&(i.structure=!0),i}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ec(e.from,e.to,dr.fromJSON(i,e.slice),!!e.structure)}}Ql.jsonID("replace",ec);class tc extends Ql{constructor(i,e,s,l,f,w,z=!1){super(),this.from=i,this.to=e,this.gapFrom=s,this.gapTo=l,this.slice=f,this.insert=w,this.structure=z}apply(i){if(this.structure&&(k0(i,this.from,this.gapFrom)||k0(i,this.gapTo,this.to)))return Ia.fail("Structure gap-replace would overwrite content");let e=i.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Ia.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,e.content);return s?Ia.fromReplace(i,this.from,this.to,s):Ia.fail("Content does not fit in gap")}getMap(){return new du([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(i){let e=this.gapTo-this.gapFrom;return new tc(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,i.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(i){let e=i.mapResult(this.from,1),s=i.mapResult(this.to,-1),l=i.map(this.gapFrom,-1),f=i.map(this.gapTo,1);return e.deletedAcross&&s.deletedAcross||l<e.pos||f>s.pos?null:new tc(e.pos,s.pos,l,f,this.slice,this.insert,this.structure)}toJSON(){let i={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(i.slice=this.slice.toJSON()),this.structure&&(i.structure=!0),i}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new tc(e.from,e.to,e.gapFrom,e.gapTo,dr.fromJSON(i,e.slice),e.insert,!!e.structure)}}function k0(r,i,e){let s=r.resolve(i),l=e-i,f=s.depth;for(;l>0&&f>0&&s.indexAfter(f)==s.node(f).childCount;)f--,l--;if(l>0){let w=s.node(f).maybeChild(s.indexAfter(f));for(;l>0;){if(!w||w.isLeaf)return!0;w=w.firstChild,l--}}return!1}function AC(r,i,e){return(0==i||r.canReplace(i,r.childCount))&&(e==r.childCount||r.canReplace(0,e))}function dv(r){let e=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let s=r.depth;;--s){let l=r.$from.node(s),f=r.$from.index(s),w=r.$to.indexAfter(s);if(s<r.depth&&l.canReplace(f,w,e))return s;if(0==s||l.type.spec.isolating||!AC(l,f,w))break}return null}function mx(r,i,e=null,s=r){let l=function IC(r,i){let{parent:e,startIndex:s,endIndex:l}=r,f=e.contentMatchAt(s).findWrapping(i);return f&&e.canReplaceWith(s,l,f.length?f[0]:i)?f:null}(r,i),f=l&&function LC(r,i){let{parent:e,startIndex:s,endIndex:l}=r,f=e.child(s),w=i.contentMatch.findWrapping(f.type);if(!w)return null;let W=(w.length?w[w.length-1]:i).contentMatch;for(let ie=s;W&&ie<l;ie++)W=W.matchType(e.child(ie).type);return W&&W.validEnd?w:null}(s,i);return f?l.map(gx).concat({type:i,attrs:e}).concat(f.map(gx)):null}function gx(r){return{type:r,attrs:null}}function hv(r,i,e=1,s){let l=r.resolve(i),f=l.depth-e,w=s&&s[s.length-1]||l.parent;if(f<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!w.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let ie=l.depth-1,oe=e-2;ie>f;ie--,oe--){let Re=l.node(ie),je=l.index(ie);if(Re.type.spec.isolating)return!1;let Ye=Re.content.cutByIndex(je,Re.childCount),Wt=s&&s[oe+1];Wt&&(Ye=Ye.replaceChild(0,Wt.type.create(Wt.attrs)));let $t=s&&s[oe]||Re;if(!Re.canReplace(je+1,Re.childCount)||!$t.type.validContent(Ye))return!1}let z=l.indexAfter(f),W=s&&s[0];return l.node(f).canReplaceWith(z,z,W?W.type:l.node(f+1).type)}function M0(r,i){let e=r.resolve(i),s=e.index();return function vx(r,i){return!(!r||!i||r.isLeaf||!r.canAppend(i))}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(s,s+1)}function A0(r,i,e=i,s=dr.empty){if(i==e&&!s.size)return null;let l=r.resolve(i),f=r.resolve(e);return function _x(r,i,e){return!e.openStart&&!e.openEnd&&r.start()==i.start()&&r.parent.canReplace(r.index(),i.index(),e.content)}(l,f,s)?new ec(i,e,s):new YC(l,f,s).fit()}Ql.jsonID("replaceAround",tc);class YC{constructor(i,e,s){this.$from=i,this.$to=e,this.unplaced=s,this.frontier=[],this.placed=Rn.empty;for(let l=0;l<=i.depth;l++){let f=i.node(l);this.frontier.push({type:f.type,match:f.contentMatchAt(i.indexAfter(l))})}for(let l=i.depth;l>0;l--)this.placed=Rn.from(i.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let ie=this.findFittable();ie?this.placeNodes(ie):this.openMore()||this.dropNode()}let i=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(i<0?this.$to:s.doc.resolve(i));if(!l)return null;let f=this.placed,w=s.depth,z=l.depth;for(;w&&z&&1==f.childCount;)f=f.firstChild.content,w--,z--;let W=new dr(f,w,z);return i>-1?new tc(s.pos,i,this.$to.pos,this.$to.end(),W,e):W.size||s.pos!=this.$to.pos?new ec(s.pos,l.pos,W):null}findFittable(){let i=this.unplaced.openStart;for(let e=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<i;s++){let f=e.firstChild;if(e.childCount>1&&(l=0),f.type.spec.isolating&&l<=s){i=s;break}e=f.content}for(let e=1;e<=2;e++)for(let s=1==e?i:this.unplaced.openStart;s>=0;s--){let l,f=null;s?(f=D0(this.unplaced.content,s-1).firstChild,l=f.content):l=this.unplaced.content;let w=l.firstChild;for(let z=this.depth;z>=0;z--){let oe,{type:W,match:ie}=this.frontier[z],Re=null;if(1==e&&(w?ie.matchType(w.type)||(Re=ie.fillBefore(Rn.from(w),!1)):f&&W.compatibleContent(f.type)))return{sliceDepth:s,frontierDepth:z,parent:f,inject:Re};if(2==e&&w&&(oe=ie.findWrapping(w.type)))return{sliceDepth:s,frontierDepth:z,parent:f,wrap:oe};if(f&&ie.matchType(f.type))break}}}openMore(){let{content:i,openStart:e,openEnd:s}=this.unplaced,l=D0(i,e);return!(!l.childCount||l.firstChild.isLeaf||(this.unplaced=new dr(i,e+1,Math.max(s,l.size+e>=i.size-s?e+1:0)),0))}dropNode(){let{content:i,openStart:e,openEnd:s}=this.unplaced,l=D0(i,e);if(l.childCount<=1&&e>0){let f=i.size-e<=e+l.size;this.unplaced=new dr(pv(i,e-1,1),e-1,f?e-1:s)}else this.unplaced=new dr(pv(i,e,1),e,s)}placeNodes({sliceDepth:i,frontierDepth:e,parent:s,inject:l,wrap:f}){for(;this.depth>e;)this.closeFrontierNode();if(f)for(let $t=0;$t<f.length;$t++)this.openFrontierNode(f[$t]);let w=this.unplaced,z=s?s.content:w.content,W=w.openStart-i,ie=0,oe=[],{match:Re,type:je}=this.frontier[e];if(l){for(let $t=0;$t<l.childCount;$t++)oe.push(l.child($t));Re=Re.matchFragment(l)}let Ye=z.size+i-(w.content.size-w.openEnd);for(;ie<z.childCount;){let $t=z.child(ie),ci=Re.matchType($t.type);if(!ci)break;ie++,(ie>1||0==W||$t.content.size)&&(Re=ci,oe.push(yx($t.mark(je.allowedMarks($t.marks)),1==ie?W:0,ie==z.childCount?Ye:-1)))}let Wt=ie==z.childCount;Wt||(Ye=-1),this.placed=fv(this.placed,e,Rn.from(oe)),this.frontier[e].match=Re,Wt&&Ye<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let $t=0,ci=z;$t<Ye;$t++){let zi=ci.lastChild;this.frontier.push({type:zi.type,match:zi.contentMatchAt(zi.childCount)}),ci=zi.content}this.unplaced=Wt?0==i?dr.empty:new dr(pv(w.content,i-1,1),i-1,Ye<0?w.openEnd:i-1):new dr(pv(w.content,i,ie),w.openStart,w.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,i=this.frontier[this.depth];if(!i.type.isTextblock||!I0(this.$to,this.$to.depth,i.type,i.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(i){e:for(let e=Math.min(this.depth,i.depth);e>=0;e--){let{match:s,type:l}=this.frontier[e],f=e<i.depth&&i.end(e+1)==i.pos+(i.depth-(e+1)),w=I0(i,e,l,s,f);if(w){for(let z=e-1;z>=0;z--){let{match:W,type:ie}=this.frontier[z],oe=I0(i,z,ie,W,!0);if(!oe||oe.childCount)continue e}return{depth:e,fit:w,move:f?i.doc.resolve(i.after(e+1)):i}}}}close(i){let e=this.findCloseLevel(i);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=fv(this.placed,e.depth,e.fit)),i=e.move;for(let s=e.depth+1;s<=i.depth;s++){let l=i.node(s),f=l.type.contentMatch.fillBefore(l.content,!0,i.index(s));this.openFrontierNode(l.type,l.attrs,f)}return i}openFrontierNode(i,e=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(i),this.placed=fv(this.placed,this.depth,Rn.from(i.create(e,s))),this.frontier.push({type:i,match:i.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Rn.empty,!0);e.childCount&&(this.placed=fv(this.placed,this.frontier.length,e))}}function pv(r,i,e){return 0==i?r.cutByIndex(e,r.childCount):r.replaceChild(0,r.firstChild.copy(pv(r.firstChild.content,i-1,e)))}function fv(r,i,e){return 0==i?r.append(e):r.replaceChild(r.childCount-1,r.lastChild.copy(fv(r.lastChild.content,i-1,e)))}function D0(r,i){for(let e=0;e<i;e++)r=r.firstChild.content;return r}function yx(r,i,e){if(i<=0)return r;let s=r.content;return i>1&&(s=s.replaceChild(0,yx(s.firstChild,i-1,1==s.childCount?e-1:0))),i>0&&(s=r.type.contentMatch.fillBefore(s).append(s),e<=0&&(s=s.append(r.type.contentMatch.matchFragment(s).fillBefore(Rn.empty,!0)))),r.copy(s)}function I0(r,i,e,s,l){let f=r.node(i),w=l?r.indexAfter(i):r.index(i);if(w==f.childCount&&!e.compatibleContent(f.type))return null;let z=s.fillBefore(f.content,!0,w);return z&&!function HC(r,i,e){for(let s=e;s<i.childCount;s++)if(!r.allowsMarks(i.child(s).marks))return!0;return!1}(e,f.content,w)?z:null}class zm extends Ql{constructor(i,e,s){super(),this.pos=i,this.attr=e,this.value=s}apply(i){let e=i.nodeAt(this.pos);if(!e)return Ia.fail("No node at attribute step's position");let s=Object.create(null);for(let f in e.attrs)s[f]=e.attrs[f];s[this.attr]=this.value;let l=e.type.create(s,null,e.marks);return Ia.fromReplace(i,this.pos,this.pos+1,new dr(Rn.from(l),0,e.isLeaf?0:1))}getMap(){return du.empty}invert(i){return new zm(this.pos,this.attr,i.nodeAt(this.pos).attrs[this.attr])}map(i){let e=i.mapResult(this.pos,1);return e.deletedAfter?null:new zm(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(i,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new zm(e.pos,e.attr,e.value)}}Ql.jsonID("attr",zm);class mv extends Ql{constructor(i,e){super(),this.attr=i,this.value=e}apply(i){let e=Object.create(null);for(let l in i.attrs)e[l]=i.attrs[l];e[this.attr]=this.value;let s=i.type.create(e,i.content,i.marks);return Ia.ok(s)}getMap(){return du.empty}invert(i){return new mv(this.attr,i.attrs[this.attr])}map(i){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(i,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new mv(e.attr,e.value)}}Ql.jsonID("docAttr",mv);let Fm=class extends Error{};Fm=function r(i){let e=Error.call(this,i);return e.__proto__=r.prototype,e},(Fm.prototype=Object.create(Error.prototype)).constructor=Fm,Fm.prototype.name="TransformError";const L0=Object.create(null);class Do{constructor(i,e,s){this.$anchor=i,this.$head=e,this.ranges=s||[new $C(i.min(e),i.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let i=this.ranges;for(let e=0;e<i.length;e++)if(i[e].$from.pos!=i[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(i,e=dr.empty){let s=e.content.lastChild,l=null;for(let z=0;z<e.openEnd;z++)l=s,s=s.lastChild;let f=i.steps.length,w=this.ranges;for(let z=0;z<w.length;z++){let{$from:W,$to:ie}=w[z],oe=i.mapping.slice(f);i.replaceRange(oe.map(W.pos),oe.map(ie.pos),z?dr.empty:e),0==z&&Ex(i,f,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(i,e){let s=i.steps.length,l=this.ranges;for(let f=0;f<l.length;f++){let{$from:w,$to:z}=l[f],W=i.mapping.slice(s),ie=W.map(w.pos),oe=W.map(z.pos);f?i.deleteRange(ie,oe):(i.replaceRangeWith(ie,oe,e),Ex(i,s,e.isInline?-1:1))}}static findFrom(i,e,s=!1){let l=i.parent.inlineContent?new gc(i):Bm(i.node(0),i.parent,i.pos,i.index(),e,s);if(l)return l;for(let f=i.depth-1;f>=0;f--){let w=e<0?Bm(i.node(0),i.node(f),i.before(f+1),i.index(f),e,s):Bm(i.node(0),i.node(f),i.after(f+1),i.index(f)+1,e,s);if(w)return w}return null}static near(i,e=1){return this.findFrom(i,e)||this.findFrom(i,-e)||new Uu(i.node(0))}static atStart(i){return Bm(i,i,0,0,1)||new Uu(i)}static atEnd(i){return Bm(i,i,i.content.size,i.childCount,-1)||new Uu(i)}static fromJSON(i,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=L0[e.type];if(!s)throw new RangeError(`No selection type ${e.type} defined`);return s.fromJSON(i,e)}static jsonID(i,e){if(i in L0)throw new RangeError("Duplicate use of selection JSON ID "+i);return L0[i]=e,e.prototype.jsonID=i,e}getBookmark(){return gc.between(this.$anchor,this.$head).getBookmark()}}Do.prototype.visible=!0;class $C{constructor(i,e){this.$from=i,this.$to=e}}let wx=!1;function Cx(r){!wx&&!r.parent.inlineContent&&(wx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class gc extends Do{constructor(i,e=i){Cx(i),Cx(e),super(i,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(i,e){let s=i.resolve(e.map(this.head));if(!s.parent.inlineContent)return Do.near(s);let l=i.resolve(e.map(this.anchor));return new gc(l.parent.inlineContent?l:s,s)}replace(i,e=dr.empty){if(super.replace(i,e),e==dr.empty){let s=this.$from.marksAcross(this.$to);s&&i.ensureMarks(s)}}eq(i){return i instanceof gc&&i.anchor==this.anchor&&i.head==this.head}getBookmark(){return new dy(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(i,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new gc(i.resolve(e.anchor),i.resolve(e.head))}static create(i,e,s=e){let l=i.resolve(e);return new this(l,s==e?l:i.resolve(s))}static between(i,e,s){let l=i.pos-e.pos;if((!s||l)&&(s=l>=0?1:-1),!e.parent.inlineContent){let f=Do.findFrom(e,s,!0)||Do.findFrom(e,-s,!0);if(!f)return Do.near(e,s);e=f.$head}return i.parent.inlineContent||(0==l||(i=(Do.findFrom(i,-s,!0)||Do.findFrom(i,s,!0)).$anchor).pos<e.pos!=l<0)&&(i=e),new gc(i,e)}}Do.jsonID("text",gc);class dy{constructor(i,e){this.anchor=i,this.head=e}map(i){return new dy(i.map(this.anchor),i.map(this.head))}resolve(i){return gc.between(i.resolve(this.anchor),i.resolve(this.head))}}class Bo extends Do{constructor(i){let e=i.nodeAfter,s=i.node(0).resolve(i.pos+e.nodeSize);super(i,s),this.node=e}map(i,e){let{deleted:s,pos:l}=e.mapResult(this.anchor),f=i.resolve(l);return s?Do.near(f):new Bo(f)}content(){return new dr(Rn.from(this.node),0,0)}eq(i){return i instanceof Bo&&i.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new O0(this.anchor)}static fromJSON(i,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Bo(i.resolve(e.anchor))}static create(i,e){return new Bo(i.resolve(e))}static isSelectable(i){return!i.isText&&!1!==i.type.spec.selectable}}Bo.prototype.visible=!1,Do.jsonID("node",Bo);class O0{constructor(i){this.anchor=i}map(i){let{deleted:e,pos:s}=i.mapResult(this.anchor);return e?new dy(s,s):new O0(s)}resolve(i){let e=i.resolve(this.anchor),s=e.nodeAfter;return s&&Bo.isSelectable(s)?new Bo(e):Do.near(e)}}class Uu extends Do{constructor(i){super(i.resolve(0),i.resolve(i.content.size))}replace(i,e=dr.empty){if(e==dr.empty){i.delete(0,i.doc.content.size);let s=Do.atStart(i.doc);s.eq(i.selection)||i.setSelection(s)}else super.replace(i,e)}toJSON(){return{type:"all"}}static fromJSON(i){return new Uu(i)}map(i){return new Uu(i)}eq(i){return i instanceof Uu}getBookmark(){return XC}}Do.jsonID("all",Uu);const XC={map(){return this},resolve:r=>new Uu(r)};function Bm(r,i,e,s,l,f=!1){if(i.inlineContent)return gc.create(r,e);for(let w=s-(l>0?0:1);l>0?w<i.childCount:w>=0;w+=l){let z=i.child(w);if(z.isAtom){if(!f&&Bo.isSelectable(z))return Bo.create(r,e-(l<0?z.nodeSize:0))}else{let W=Bm(r,z,e+l,l<0?z.childCount:0,l,f);if(W)return W}e+=z.nodeSize*l}return null}function Ex(r,i,e){let s=r.steps.length-1;if(s<i)return;let w,l=r.steps[s];(l instanceof ec||l instanceof tc)&&(r.mapping.maps[s].forEach((z,W,ie,oe)=>{null==w&&(w=oe)}),r.setSelection(Do.near(r.doc.resolve(w),e)))}function kx(r,i){return i&&r?r.bind(i):r}class gv{constructor(i,e,s){this.name=i,this.init=kx(e.init,s),this.apply=kx(e.apply,s)}}new gv("doc",{init:r=>r.doc||r.schema.topNodeType.createAndFill(),apply:r=>r.doc}),new gv("selection",{init:(r,i)=>r.selection||Do.atStart(i.doc),apply:r=>r.selection}),new gv("storedMarks",{init:r=>r.storedMarks||null,apply:(r,i,e,s)=>s.selection.$cursor?r.storedMarks:null}),new gv("scrollToSelection",{init:()=>0,apply:(r,i)=>r.scrolledIntoView?i+1:i});const KC=["ol",0],JC=["ul",0],QC=["li",0],Dx={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:r=>({order:r.hasAttribute("start")?+r.getAttribute("start"):1})}],toDOM:r=>1==r.attrs.order?KC:["ol",{start:r.attrs.order},0]};const Ox=r=>{const i=(r=>{const i={};return Object.keys(r).forEach(e=>{r[e]&&(i[e]=r[e])}),i})(r);return Object.entries(i).map(([e,s])=>`${(r=>r.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`))(e)}:${s}`).join(";")};Error;const aE={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:r=>({href:r.getAttribute("href"),title:r.getAttribute("title"),target:r.getAttribute("target")})}],toDOM(r){const{href:i,title:e,target:s}=r.attrs;return["a",{href:i,title:e,target:s},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:r=>"normal"!==r.style.fontWeight&&null},{style:"font-weight",getAttrs:r=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(r)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:r=>({color:r})}],toDOM(r){const{color:i}=r.attrs;return["span",{style:`color:${i};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:r=>({backgroundColor:r})}],toDOM(r){const{backgroundColor:i}=r.attrs;return["span",{style:`background-color:${i};`},0]}}},uE={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(r){const{textAlign:i}=r.style;return{align:r.getAttribute("align")||i||null}}}],toDOM(r){const{align:i}=r.attrs;return["p",{style:Ox({textAlign:"left"!==i?i:null})||null},0]}},pE={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(r){const{textAlign:i}=r.style;return{level:1,align:r.getAttribute("align")||i||null}}},{tag:"h2",getAttrs(r){const{textAlign:i}=r.style;return{level:2,align:r.getAttribute("align")||i||null}}},{tag:"h3",getAttrs(r){const{textAlign:i}=r.style;return{level:3,align:r.getAttribute("align")||i||null}}},{tag:"h4",getAttrs(r){const{textAlign:i}=r.style;return{level:4,align:r.getAttribute("align")||i||null}}},{tag:"h5",getAttrs(r){const{textAlign:i}=r.style;return{level:5,align:r.getAttribute("align")||i||null}}},{tag:"h6",getAttrs(r){const{textAlign:i}=r.style;return{level:6,align:r.getAttribute("align")||i||null}}}],toDOM(r){const{level:i,align:e}=r.attrs;return[`h${i}`,{style:Ox({textAlign:"left"!==e?e:null})||null},0]}},gE={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:r=>({src:r.getAttribute("src"),title:r.getAttribute("title"),alt:r.getAttribute("alt"),width:r.getAttribute("width")})}],toDOM(r){const{src:i,alt:e,title:s,width:l}=r.attrs;return["img",{src:i,alt:e,title:s,width:l}]}},bE={doc:{content:"block+"},text:{group:"inline"},paragraph:uE,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:pE,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:gE,list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>QC,defining:!0},content:"paragraph block*"},ordered_list:{...Dx,content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>JC},content:"list_item+",group:"block"}},Px=(new class vC{constructor(i){this.cached=Object.create(null);let e=this.spec={};for(let l in i)e[l]=i[l];e.nodes=Yb.from(i.nodes),e.marks=Yb.from(i.marks||{}),this.nodes=sy.compile(this.spec.nodes,this),this.marks=oy.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let f=this.nodes[l],w=f.spec.content||"",z=f.spec.marks;f.contentMatch=s[w]||(s[w]=Tf.parse(w,this.nodes)),f.inlineContent=f.contentMatch.inlineContent,f.markSet="_"==z?null:z?ix(this,z.split(" ")):""!=z&&f.inlineContent?null:[]}for(let l in this.marks){let f=this.marks[l],w=f.spec.excludes;f.excluded=null==w?[f]:""==w?[]:ix(this,w.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(i,e=null,s,l){if("string"==typeof i)i=this.nodeType(i);else{if(!(i instanceof sy))throw new RangeError("Invalid node type: "+i);if(i.schema!=this)throw new RangeError("Node type from different schema used ("+i.name+")")}return i.createChecked(e,s,l)}text(i,e){let s=this.nodes.text;return new ry(s,s.defaultAttrs,i,ro.setFrom(e))}mark(i,e){return"string"==typeof i&&(i=this.marks[i]),i.create(e)}nodeFromJSON(i){return Dh.fromJSON(this,i)}markFromJSON(i){return ro.fromJSON(this,i)}nodeType(i){let e=this.nodes[i];if(!e)throw new RangeError("Unknown node type: "+i);return e}}({marks:aE,nodes:bE}),(r,i)=>!r.selection.empty&&(i&&i(r.tr.deleteSelection().scrollIntoView()),!0));function Nm(r,i,e=!1){for(let s=r;s;s="start"==i?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(e&&1!=s.childCount)return!1}return!1}function F0(r){if(!r.parent.type.spec.isolating)for(let i=r.depth-1;i>=0;i--){if(r.index(i)>0)return r.doc.resolve(r.before(i+1));if(r.node(i).type.spec.isolating)break}return null}function B0(r){if(!r.parent.type.spec.isolating)for(let i=r.depth-1;i>=0;i--){let e=r.node(i);if(r.index(i)+1<e.childCount)return r.doc.resolve(r.after(i+1));if(e.type.spec.isolating)break}return null}function N0(r){for(let i=0;i<r.edgeCount;i++){let{type:e}=r.edge(i);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const Bx=function IE(r){return(i,e)=>{let{$from:s,$to:l}=i.selection;if(i.selection instanceof Bo&&i.selection.node.isBlock)return!(!s.parentOffset||!hv(i.doc,s.pos)||(e&&e(i.tr.split(s.pos).scrollIntoView()),0));if(!s.parent.isBlock)return!1;if(e){let f=l.parentOffset==l.parent.content.size,w=i.tr;(i.selection instanceof gc||i.selection instanceof Uu)&&w.deleteSelection();let z=0==s.depth?null:N0(s.node(-1).contentMatchAt(s.indexAfter(-1))),W=r&&r(l.parent,f),ie=W?[W]:f&&z?[{type:z}]:void 0,oe=hv(w.doc,w.mapping.map(s.pos),1,ie);if(!ie&&!oe&&hv(w.doc,w.mapping.map(s.pos),1,z?[{type:z}]:void 0)&&(z&&(ie=[{type:z}]),oe=!0),oe&&(w.split(w.mapping.map(s.pos),1,ie),!f&&!s.parentOffset&&s.parent.type!=z)){let Re=w.mapping.map(s.before()),je=w.doc.resolve(Re);z&&s.node(-1).canReplaceWith(je.index(),je.index()+1,z)&&w.setNodeMarkup(w.mapping.map(s.before()),z)}e(w.scrollIntoView())}return!0}}();function Nx(r,i,e){let f,w,s=i.nodeBefore,l=i.nodeAfter;if(s.type.spec.isolating||l.type.spec.isolating)return!1;if(function OE(r,i,e){let s=i.nodeBefore,l=i.nodeAfter,f=i.index();return!(!(s&&l&&s.type.compatibleContent(l.type))||(!s.content.size&&i.parent.canReplace(f-1,f)?(e&&e(r.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),0):!i.parent.canReplace(f,f+1)||!l.isTextblock&&!M0(r.doc,i.pos)||(e&&e(r.tr.clearIncompatible(i.pos,s.type,s.contentMatchAt(s.childCount)).join(i.pos).scrollIntoView()),0)))}(r,i,e))return!0;let z=i.parent.canReplace(i.index(),i.index()+1);if(z&&(f=(w=s.contentMatchAt(s.childCount)).findWrapping(l.type))&&w.matchType(f[0]||l.type).validEnd){if(e){let Re=i.pos+l.nodeSize,je=Rn.empty;for(let $t=f.length-1;$t>=0;$t--)je=Rn.from(f[$t].create(null,je));je=Rn.from(s.copy(je));let Ye=r.tr.step(new tc(i.pos-1,Re,i.pos,Re,new dr(je,1,0),f.length,!0)),Wt=Re+2*f.length;M0(Ye.doc,Wt)&&Ye.join(Wt),e(Ye.scrollIntoView())}return!0}let W=Do.findFrom(i,1),ie=W&&W.$from.blockRange(W.$to),oe=ie&&dv(ie);if(null!=oe&&oe>=i.depth)return e&&e(r.tr.lift(ie,oe).scrollIntoView()),!0;if(z&&Nm(l,"start",!0)&&Nm(s,"end")){let Re=s,je=[];for(;je.push(Re),!Re.isTextblock;)Re=Re.lastChild;let Ye=l,Wt=1;for(;!Ye.isTextblock;Ye=Ye.firstChild)Wt++;if(Re.canReplace(Re.childCount,Re.childCount,Ye.content)){if(e){let $t=Rn.empty;for(let zi=je.length-1;zi>=0;zi--)$t=Rn.from(je[zi].copy($t));e(r.tr.step(new tc(i.pos-je.length,i.pos+l.nodeSize,i.pos+Wt,i.pos+l.nodeSize-Wt,new dr($t,je.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Yx(r){return function(i,e){let s=i.selection,l=r<0?s.$from:s.$to,f=l.depth;for(;l.node(f).isInline;){if(!f)return!1;f--}return!!l.node(f).isTextblock&&(e&&e(i.tr.setSelection(gc.create(i.doc,r<0?l.start(f):l.end(f)))),!0)}}const PE=Yx(-1),RE=Yx(1);function Y0(r,i=null){return function(e,s){let l=!1;for(let f=0;f<e.selection.ranges.length&&!l;f++){let{$from:{pos:w},$to:{pos:z}}=e.selection.ranges[f];e.doc.nodesBetween(w,z,(W,ie)=>{if(l)return!1;if(W.isTextblock&&!W.hasMarkup(r,i))if(W.type==r)l=!0;else{let oe=e.doc.resolve(ie),Re=oe.index();l=oe.parent.canReplaceWith(Re,Re+1,r)}})}if(!l)return!1;if(s){let f=e.tr;for(let w=0;w<e.selection.ranges.length;w++){let{$from:{pos:z},$to:{pos:W}}=e.selection.ranges[w];f.setBlockType(z,W,r,i)}s(f.scrollIntoView())}return!0}}function Hx(r,i=null){return function(e,s){let{empty:l,$cursor:f,ranges:w}=e.selection;if(l&&!f||!function FE(r,i,e){for(let s=0;s<i.length;s++){let{$from:l,$to:f}=i[s],w=0==l.depth&&r.inlineContent&&r.type.allowsMarkType(e);if(r.nodesBetween(l.pos,f.pos,z=>{if(w)return!1;w=z.inlineContent&&z.type.allowsMarkType(e)}),w)return!0}return!1}(e.doc,w,r))return!1;if(s)if(f)r.isInSet(e.storedMarks||f.marks())?s(e.tr.removeStoredMark(r)):s(e.tr.addStoredMark(r.create(i)));else{let z=!1,W=e.tr;for(let ie=0;!z&&ie<w.length;ie++){let{$from:oe,$to:Re}=w[ie];z=e.doc.rangeHasMark(oe.pos,Re.pos,r)}for(let ie=0;ie<w.length;ie++){let{$from:oe,$to:Re}=w[ie];if(z)W.removeMark(oe.pos,Re.pos,r);else{let je=oe.pos,Ye=Re.pos,Wt=oe.nodeAfter,$t=Re.nodeBefore,ci=Wt&&Wt.isText?/^\s*/.exec(Wt.text)[0].length:0,zi=$t&&$t.isText?/\s*$/.exec($t.text)[0].length:0;je+ci<Ye&&(je+=ci,Ye-=zi),W.addMark(je,Ye,r.create(i))}}s(W.scrollIntoView())}return!0}}function H0(...r){return function(i,e,s){for(let l=0;l<r.length;l++)if(r[l](i,e,s))return!0;return!1}}let V0=H0(Px,(r,i,e)=>{let s=function Rx(r,i){let{$cursor:e}=r.selection;return!e||(i?!i.endOfTextblock("backward",r):e.parentOffset>0)?null:e}(r,e);if(!s)return!1;let l=F0(s);if(!l){let w=s.blockRange(),z=w&&dv(w);return null!=z&&(i&&i(r.tr.lift(w,z).scrollIntoView()),!0)}let f=l.nodeBefore;if(!f.type.spec.isolating&&Nx(r,l,i))return!0;if(0==s.parent.content.size&&(Nm(f,"end")||Bo.isSelectable(f))){let w=A0(r.doc,s.before(),s.after(),dr.empty);if(w&&w.slice.size<w.to-w.from){if(i){let z=r.tr.step(w);z.setSelection(Nm(f,"end")?Do.findFrom(z.doc.resolve(z.mapping.map(l.pos,-1)),-1):Bo.create(z.doc,l.pos-f.nodeSize)),i(z.scrollIntoView())}return!0}}return!(!f.isAtom||l.depth!=s.depth-1||(i&&i(r.tr.delete(l.pos-f.nodeSize,l.pos).scrollIntoView()),0))},(r,i,e)=>{let{$head:s,empty:l}=r.selection,f=s;if(!l)return!1;if(s.parent.isTextblock){if(e?!e.endOfTextblock("backward",r):s.parentOffset>0)return!1;f=F0(s)}let w=f&&f.nodeBefore;return!(!w||!Bo.isSelectable(w)||(i&&i(r.tr.setSelection(Bo.create(r.doc,f.pos-w.nodeSize)).scrollIntoView()),0))}),Vx=H0(Px,(r,i,e)=>{let s=function Fx(r,i){let{$cursor:e}=r.selection;return!e||(i?!i.endOfTextblock("forward",r):e.parentOffset<e.parent.content.size)?null:e}(r,e);if(!s)return!1;let l=B0(s);if(!l)return!1;let f=l.nodeAfter;if(Nx(r,l,i))return!0;if(0==s.parent.content.size&&(Nm(f,"start")||Bo.isSelectable(f))){let w=A0(r.doc,s.before(),s.after(),dr.empty);if(w&&w.slice.size<w.to-w.from){if(i){let z=r.tr.step(w);z.setSelection(Nm(f,"start")?Do.findFrom(z.doc.resolve(z.mapping.map(l.pos)),1):Bo.create(z.doc,z.mapping.map(l.pos))),i(z.scrollIntoView())}return!0}}return!(!f.isAtom||l.depth!=s.depth-1||(i&&i(r.tr.delete(l.pos,l.pos+f.nodeSize).scrollIntoView()),0))},(r,i,e)=>{let{$head:s,empty:l}=r.selection,f=s;if(!l)return!1;if(s.parent.isTextblock){if(e?!e.endOfTextblock("forward",r):s.parentOffset<s.parent.content.size)return!1;f=B0(s)}let w=f&&f.nodeAfter;return!(!w||!Bo.isSelectable(w)||(i&&i(r.tr.setSelection(Bo.create(r.doc,f.pos)).scrollIntoView()),0))});const yp={Enter:H0((r,i)=>{let{$head:e,$anchor:s}=r.selection;return!(!e.parent.type.spec.code||!e.sameParent(s)||(i&&i(r.tr.insertText("\n").scrollIntoView()),0))},(r,i)=>{let e=r.selection,{$from:s,$to:l}=e;if(e instanceof Uu||s.parent.inlineContent||l.parent.inlineContent)return!1;let f=N0(l.parent.contentMatchAt(l.indexAfter()));if(!f||!f.isTextblock)return!1;if(i){let w=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,z=r.tr.insert(w,f.createAndFill());z.setSelection(gc.create(z.doc,w+1)),i(z.scrollIntoView())}return!0},(r,i)=>{let{$cursor:e}=r.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let f=e.before();if(hv(r.doc,f))return i&&i(r.tr.split(f).scrollIntoView()),!0}let s=e.blockRange(),l=s&&dv(s);return null!=l&&(i&&i(r.tr.lift(s,l).scrollIntoView()),!0)},Bx),"Mod-Enter":(r,i)=>{let{$head:e,$anchor:s}=r.selection;if(!e.parent.type.spec.code||!e.sameParent(s))return!1;let l=e.node(-1),f=e.indexAfter(-1),w=N0(l.contentMatchAt(f));if(!w||!l.canReplaceWith(f,f,w))return!1;if(i){let z=e.after(),W=r.tr.replaceWith(z,z,w.createAndFill());W.setSelection(Do.near(W.doc.resolve(z),1)),i(W.scrollIntoView())}return!0},Backspace:V0,"Mod-Backspace":V0,"Shift-Backspace":V0,Delete:Vx,"Mod-Delete":Vx,"Mod-a":(r,i)=>(i&&i(r.tr.setSelection(new Uu(r.doc))),!0)},NE={"Ctrl-h":yp.Backspace,"Alt-Backspace":yp["Mod-Backspace"],"Ctrl-d":yp.Delete,"Ctrl-Alt-Backspace":yp["Mod-Delete"],"Alt-Delete":yp["Mod-Delete"],"Alt-d":yp["Mod-Delete"],"Ctrl-a":PE,"Ctrl-e":RE};for(let r in yp)NE[r]=yp[r];typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform();const G0=(r,i)=>{const{from:e,$from:s,to:l,empty:f}=r.selection;return f?!!i.isInSet(r.storedMarks||s.marks()):r.doc.rangeHasMark(e,l,i)},Gx=(r,i,e={})=>{const{selection:s}=r,{$from:l,to:f}=s,w=((r,i)=>{for(let e=i.depth;e>0;e-=1)if(i.node(e).type===r)return i.node(e).type;return null})(i,l);return Object.entries(e).length&&w?f<=l.end()&&l.parent.hasMarkup(i,e):!!w},jx=r=>{const i=[],{selection:{from:e,to:s}}=r;return r.doc.nodesBetween(e,s,l=>{i.push(l)}),i},Ux=(r,i,e)=>{for(const s of i){const{$from:l,$to:f}=s;let w=0===l.depth&&r.type.allowsMarkType(e);if(r.nodesBetween(l.pos,f.pos,z=>!w&&(w=z.inlineContent&&z.type.allowsMarkType(e),!0)),w)return!0}return!1},Wx=(r,i={})=>(e,s)=>{const{tr:l,selection:f}=e,{empty:w,ranges:z,$from:W,$to:ie}=f;if(w&&f instanceof gc){const{$cursor:oe}=f;if(!oe||!Ux(e.doc,z,r)||(l.addStoredMark(r.create(i)),!l.storedMarksSet))return!1;s?.(l)}else{if(l.addMark(W.pos,ie.pos,r.create(i)),!l.docChanged)return!1;s?.(l.scrollIntoView())}return!0};var UE=Rt(4476);class Ym{constructor(i){this.name=i}apply(){return(i,e)=>{const{schema:s}=i,l=s.marks[this.name];return!!l&&Wx(l)(i,e)}}toggle(){return(i,e)=>{const{schema:s}=i,l=s.marks[this.name];return!!l&&Hx(l)(i,e)}}isActive(i){const{schema:e}=i,s=e.marks[this.name];return!!s&&G0(i,s)}canExecute(i){return this.toggle()(i)}}class py{constructor(i=!1){this.isBulletList=!1,this.isBulletList=i}getType(i){return this.isBulletList?i.nodes.bullet_list:i.nodes.ordered_list}toggle(){return(i,e)=>{const{schema:s}=i,l=this.getType(s);return!!l&&(this.isActive(i)?function iE(r){return function(i,e){let{$from:s,$to:l}=i.selection,f=s.blockRange(l,w=>w.childCount>0&&w.firstChild.type==r);return!!f&&(!e||(s.node(f.depth-1).type==r?function nE(r,i,e,s){let l=r.tr,f=s.end,w=s.$to.end(s.depth);f<w&&(l.step(new tc(f-1,w,f,w,new dr(Rn.from(e.create(null,s.parent.copy())),1,0),1,!0)),s=new ny(l.doc.resolve(s.$from.pos),l.doc.resolve(w),s.depth));const z=dv(s);if(null==z)return!1;l.lift(s,z);let W=l.mapping.map(f,-1)-1;return M0(l.doc,W)&&l.join(W),i(l.scrollIntoView()),!0}(i,e,r,f):function rE(r,i,e){let s=r.tr,l=e.parent;for(let Ye=e.end,Wt=e.endIndex-1,$t=e.startIndex;Wt>$t;Wt--)Ye-=l.child(Wt).nodeSize,s.delete(Ye-1,Ye+1);let f=s.doc.resolve(e.start),w=f.nodeAfter;if(s.mapping.map(e.end)!=e.start+f.nodeAfter.nodeSize)return!1;let z=0==e.startIndex,W=e.endIndex==l.childCount,ie=f.node(-1),oe=f.index(-1);if(!ie.canReplace(oe+(z?0:1),oe+1,w.content.append(W?Rn.empty:Rn.from(l))))return!1;let Re=f.pos,je=Re+w.nodeSize;return s.step(new tc(Re-(z?1:0),je+(W?1:0),Re+1,je-1,new dr((z?Rn.empty:Rn.from(l.copy(Rn.empty))).append(W?Rn.empty:Rn.from(l.copy(Rn.empty))),z?0:1,W?0:1),z?0:1)),i(s.scrollIntoView()),!0}(i,e,f)))}}(s.nodes.list_item)(i,e):function eE(r,i=null){return function(e,s){let{$from:l,$to:f}=e.selection,w=l.blockRange(f),z=!1,W=w;if(!w)return!1;if(w.depth>=2&&l.node(w.depth-1).type.compatibleContent(r)&&0==w.startIndex){if(0==l.index(w.depth-1))return!1;let oe=e.doc.resolve(w.start-2);W=new ny(oe,oe,w.depth),w.endIndex<w.parent.childCount&&(w=new ny(l,e.doc.resolve(f.end(w.depth)),w.depth)),z=!0}let ie=mx(W,r,i,w);return!!ie&&(s&&s(function tE(r,i,e,s,l){let f=Rn.empty;for(let oe=e.length-1;oe>=0;oe--)f=Rn.from(e[oe].type.create(e[oe].attrs,f));r.step(new tc(i.start-(s?2:0),i.end,i.start,i.end,new dr(f,0,0),e.length,!0));let w=0;for(let oe=0;oe<e.length;oe++)e[oe].type==l&&(w=oe+1);let z=e.length-w,W=i.start+e.length-(s?2:0),ie=i.parent;for(let oe=i.startIndex,Re=i.endIndex,je=!0;oe<Re;oe++,je=!1)!je&&hv(r.doc,W,z)&&(r.split(W,z),W+=2*z),W+=ie.child(oe).nodeSize;return r}(e.tr,w,ie,z,r).scrollIntoView()),!0)}}(l)(i,e))}}isActive(i){const{schema:e}=i,s=this.getType(e);return!!s&&Gx(i,s)}canExecute(i){return this.toggle()(i)}}class kf{constructor(i){this.level=i}apply(){return(i,e)=>{const{schema:s}=i,l=s.nodes.heading;return!!l&&Y0(l)(i,e)}}toggle(){return(i,e)=>{const{schema:s,selection:l,doc:f}=i,w=s.nodes.heading;if(!w)return!1;const z=l.$from.before(1),ie=f.nodeAt(z)?.attrs??{};return this.isActive(i)?Y0(s.nodes.paragraph,ie)(i,e):Y0(w,{...ie,level:this.level})(i,e)}}isActive(i){const{schema:e}=i,s=jx(i),l=e.nodes.heading;if(!l)return!1;const f=[l,e.nodes.text,e.nodes.blockquote];return!!s.filter(W=>f.includes(W.type)).find(W=>W.attrs.level===this.level)}canExecute(i){return this.toggle()(i)}}class yv{constructor(i){this.align=i}toggle(){return(i,e)=>{const{doc:s,selection:l,tr:f,schema:w}=i,{from:z,to:W}=l;let ie=!1;return s.nodesBetween(z,W,(oe,Re)=>{const je=oe.type;return[w.nodes.paragraph,w.nodes.heading].includes(je)&&(ie=!0,f.setNodeMarkup(Re,je,{...oe.attrs,align:this.align})),!0}),!!ie&&(f.docChanged&&e?.(f),!0)}}isActive(i){return!!jx(i).find(l=>l.attrs.align===this.align)}canExecute(i){return this.toggle()(i)}}const SS={strict:!0};let Hm=class{constructor(i,e="color"){this.name=i,this.attrName=e}apply(i){return(e,s)=>{const{schema:l,selection:f,doc:w}=e,z=l.marks[this.name];if(!z)return!1;const{from:W,to:ie,empty:oe}=f;if(!oe&&W+1===ie){const Re=w.nodeAt(W);if(Re?.isAtom&&!Re.isText&&Re.isLeaf)return!1}return Wx(z,i)(e,s)}}isActive(i){const{schema:e}=i,s=e.marks[this.name];return!!s&&G0(i,s)}getActiveColors(i){if(!this.isActive(i))return[];const{schema:e}=i;return(r=>{let i=[];const{selection:e,storedMarks:s}=r,{from:l,to:f,empty:w,$from:z}=e;return w?i=s||z.marks():r.doc.nodesBetween(l,f,W=>{i=[...i,...W.marks]}),i})(i).filter(f=>f.type===e.marks[this.name]).map(f=>f.attrs[this.attrName]).filter(Boolean)}remove(){return(i,e)=>{const{schema:s}=i,l=s.marks[this.name];return!!l&&(r=l,(i,e)=>{const{tr:s,selection:l,storedMarks:f,doc:w}=i,{empty:z,ranges:W}=l;if(z&&l instanceof gc){const{$cursor:ie}=l;if(!ie||!Ux(i.doc,W,r))return!1;if(r.isInSet(f||ie.marks()))return s.removeStoredMark(r),e?.(s),!0}else{for(const ie of W){const{$from:oe,$to:Re}=ie;w.rangeHasMark(oe.pos,Re.pos,r)&&s.removeMark(oe.pos,Re.pos,r)}if(!s.docChanged)return!1;e?.(s.scrollIntoView())}return!1})(i,e);var r}}canExecute(i){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(i)}};const TS=["link"];new Ym("strong"),new Ym("em"),new Ym("code"),new Ym("u"),new Ym("s"),new class CS{toggle(){return(i,e)=>{const{schema:s}=i,l=s.nodes.blockquote;return!!l&&(this.isActive(i)?((r,i)=>{let{$from:e,$to:s}=r.selection,l=e.blockRange(s),f=l&&dv(l);return null!=f&&(i&&i(r.tr.lift(l,f).scrollIntoView()),!0)})(i,e):function zE(r,i=null){return function(e,s){let{$from:l,$to:f}=e.selection,w=l.blockRange(f),z=w&&mx(w,r,i);return!!z&&(s&&s(e.tr.wrap(w,z).scrollIntoView()),!0)}}(l)(i,e))}}isActive(i){const{schema:e}=i,s=e.nodes.blockquote;return!!s&&Gx(i,s)}canExecute(i){return this.toggle()(i)}},new class ES{insert(){return(i,e)=>{const{schema:s,tr:l}=i,f=s.nodes.horizontal_rule;return!!f&&(e(l.replaceSelectionWith(f.create()).scrollIntoView()),!0)}}canExecute(i){return((r,i)=>{const{$from:e}=r.selection;for(let s=e.depth;s>=0;s-=1){const l=e.index(s);if(e.node(s).canReplaceWith(l,l,i))return!0}return!1})(i,i.schema.nodes.horizontal_rule)}},new class kS{insert(){return(i,e)=>{const{tr:s}=i,{ranges:l,empty:f}=s.selection;return f||(Object.entries(i.schema.marks).forEach(([w,z])=>{TS.includes(w)||l.forEach(W=>{s.removeMark(W.$from.pos,W.$to.pos,z)})}),e(s)),!0}}canExecute(){return!0}},new py(!0),new py(!1),new kf(1),new kf(2),new kf(3),new kf(4),new kf(5),new kf(6),new yv("left"),new yv("center"),new yv("right"),new yv("justify"),new class{update(i){return(e,s)=>{const{schema:l,selection:f}=e,w=l.marks.link;return!(!w||f.empty)&&Hx(w,i)(e,s)}}insert(i,e){return(s,l)=>{const{schema:f,tr:w}=s;if(!f.marks.link)return!1;const ie=f.text(i,[f.marks.link.create({href:e.href,title:e.title??i,target:e.target??"_blank"})]);return w.replaceSelectionWith(ie,!1).scrollIntoView(),!!w.docChanged&&(l?.(w),!0)}}isActive(i,e=SS){if(e.strict)return!0;const{schema:s}=i,l=s.marks.link;return!!l&&G0(i,l)}remove(i,e){return((r,i)=>{const{doc:e,selection:s,tr:l}=r,{$head:{pos:f},from:w,to:z}=s;if(w===z){const W=e.resolve(f),ie=f-W.textOffset,oe=ie+W.parent.child(W.index()).nodeSize;l.removeMark(ie,oe)}else l.removeMark(w,z);return!!l.docChanged&&(i?.(l),!0)})(i,e)}canExecute(i){const e={href:""};return this.insert("Exec",e)(i)||this.update(e)(i)}},new class{insert(i,e){return(s,l)=>{const{schema:f,tr:w,selection:z}=s,W=f.nodes.image;if(!W)return!1;const ie={width:null,src:i,...e};!ie.width&&z instanceof Bo&&z.node.type===W&&(ie.width=z.node.attrs.width),w.replaceSelectionWith(W.createAndFill(ie));const oe=w.doc.resolve(w.selection.anchor-w.selection.$anchor.nodeBefore.nodeSize);return w.setSelection(new Bo(oe)).scrollIntoView(),!!w.docChanged&&(l?.(w),!0)}}isActive(i){const{selection:e}=i;return e instanceof Bo&&"image"===e.node.type.name}},new Hm("text_color","color"),new Hm("text_background_color","backgroundColor");const U0={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class XS{constructor(i={}){this.locals=U0,this.get=e=>{const s=this.locals[e];return s?(0,iC.X)(s)?s:(0,Nb.of)(s):(0,Nb.of)("")},this.locals={...U0,...i}}}const Kx={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class vT{static get(i,e="currentColor"){const s=Kx[i];return s&&(s.includes("<path")||s.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${e}\n          height=20\n          width=20\n        >\n          ${s}\n        </svg>\n      `:s}}let W0=(()=>{class r{constructor(){this.locals={},this.icons={}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=t.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),_T=(()=>{class r{constructor(e){this.config=e}get locals(){return new XS(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:vT.get(e)}static#e=this.\u0275fac=function(s){return new(s||r)(t.CoB(W0,8))};static#t=this.\u0275prov=t.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Jx=r=>({locals:r.locals??{},icons:r.icons??{}});let yT=(()=>{class r{constructor(e){this.sanitizer=e}transform(e){return(r=>window.trustedTypes?.isHTML(r)??!1)(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(UE.mI,16))};static#t=this.\u0275pipe=t.UTH({name:"sanitizeHtml",type:r,pure:!0})}return r})(),bT=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=t.a4G({type:r});static#i=this.\u0275inj=t.s3X({providers:[yT],imports:[Ge.MD,V.sl]})}return r})();const fy=new t.UbH("NgxEditorConfig"),Qx={locals:U0,icons:Kx};let xT=(()=>{class r{static forRoot(e=Qx){return{ngModule:r,providers:[{provide:fy,useValue:e},{provide:W0,useFactory:Jx,deps:[fy]}]}}static forChild(e=Qx){return{ngModule:r,providers:[{provide:fy,useValue:e},{provide:W0,useFactory:Jx,deps:[fy]},_T]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=t.a4G({type:r});static#i=this.\u0275inj=t.s3X({imports:[Ge.MD,bT]})}return r})();typeof navigator<"u"&&/Mac/.test(navigator.platform);var zT=Rt(9280);Rt(1176),new t.UbH("DROPZONE_CONFIG");let FT=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=t.a4G({type:r});static \u0275inj=t.s3X({imports:[Ge.MD,Ge.MD]})}return r})();var BT=Rt(3768),NT=Rt(112),YT=Rt(5448),r1=Rt(7773),HT=Rt(560),GT=Rt(3120);function s1(r,i=NT.M,e){const s=(0,GT.k)(r,i);return function VT(r,i){return(0,YT.i)((e,s)=>{const{leading:l=!0,trailing:f=!1}=i??{};let w=!1,z=null,W=null,ie=!1;const oe=()=>{W?.unsubscribe(),W=null,f&&(Ye(),ie&&s.complete())},Re=()=>{W=null,ie&&s.complete()},je=Wt=>W=(0,HT.Uv)(r(Wt)).subscribe((0,r1.e)(s,oe,Re)),Ye=()=>{if(w){w=!1;const Wt=z;z=null,s.next(Wt),!ie&&je(Wt)}};e.subscribe((0,r1.e)(s,Wt=>{w=!0,z=Wt,(!W||W.closed)&&(l?Ye():je(Wt))},()=>{ie=!0,(!(f&&w&&W)||W.closed)&&s.complete()}))})}(()=>s,e)}var o1=Rt(9212),a1=Rt(4e3),l1=Rt(6684),hu=typeof window<"u"?window:{screen:{},navigator:{}},Vm=(hu.matchMedia||function(){return{matches:!1}}).bind(hu),c1=!1,u1=function(){};hu.addEventListener&&hu.addEventListener("p",u1,{get passive(){return c1=!0}}),hu.removeEventListener&&hu.removeEventListener("p",u1,!1);var d1=c1,$0="ontouchstart"in hu,p1=($0||"TouchEvent"in hu&&Vm("(any-pointer: coarse)"),hu.navigator.userAgent||"");Vm("(pointer: coarse)").matches&&/iPad|Macintosh/.test(p1)&&Math.min(hu.screen.width||0,hu.screen.height||0);function ZT(r,i){}function qT(r,i){1&r&&t.yuY(0,ZT,0,0,"ng-template")}(Vm("(pointer: coarse)").matches||!Vm("(pointer: fine)").matches&&$0)&&/Windows.*Firefox/.test(p1),Vm("(any-pointer: fine)").matches||Vm("(any-hover: hover)");const KT=(r,i,e)=>({tooltip:r,placement:i,content:e});function JT(r,i){if(1&r&&(t.SAx(0),t.yuY(1,qT,1,0,null,1),t.k70()),2&r){const e=t.GaO();t.yG2(),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.uAc(2,KT,e.tooltip,e.placement,e.content))}}function QT(r,i){if(1&r&&(t.SAx(0),t.I0R(1,"div",2),t.OEk(2),t.C$Y(),t.k70()),2&r){const e=t.GaO();t.yG2(),t.e48("title",e.tooltip)("data-tooltip-placement",e.placement),t.yG2(),t.oRS(" ",e.content," ")}}const e2=["tooltipTemplate"],t2=["leftOuterSelectionBar"],n2=["rightOuterSelectionBar"],r2=["fullBar"],s2=["selectionBar"],o2=["minHandle"],a2=["maxHandle"],l2=["floorLabel"],c2=["ceilLabel"],u2=["minHandleLabel"],d2=["maxHandleLabel"],h2=["combinedLabel"],p2=["ticksElement"];function f2(r,i){if(1&r&&t.wR5(0,"ngx-slider-tooltip-wrapper",32),2&r){const e=t.GaO().$implicit,s=t.GaO();t.E7m("template",s.tooltipTemplate)("tooltip",e.valueTooltip)("placement",e.valueTooltipPlacement)("content",e.value)}}function m2(r,i){if(1&r&&t.wR5(0,"span",33),2&r){const e=t.GaO().$implicit;t.E7m("innerText",e.legend)}}function g2(r,i){if(1&r&&t.wR5(0,"span",34),2&r){const e=t.GaO().$implicit;t.E7m("innerHTML",e.legend,t.E3n)}}const v2=r=>({"ngx-slider-selected":r});function _2(r,i){if(1&r&&(t.I0R(0,"span",27),t.wR5(1,"ngx-slider-tooltip-wrapper",28),t.yuY(2,f2,1,4,"ngx-slider-tooltip-wrapper",29)(3,m2,1,1,"span",30)(4,g2,1,1,"span",31),t.C$Y()),2&r){const e=i.$implicit,s=t.GaO();t.E7m("ngClass",t.S45(8,v2,e.selected))("ngStyle",e.style),t.yG2(),t.E7m("template",s.tooltipTemplate)("tooltip",e.tooltip)("placement",e.tooltipPlacement),t.yG2(),t.E7m("ngIf",null!=e.value),t.yG2(),t.E7m("ngIf",null!=e.legend&&!1===s.allowUnsafeHtmlInSlider),t.yG2(),t.E7m("ngIf",null!=e.legend&&(null==s.allowUnsafeHtmlInSlider||s.allowUnsafeHtmlInSlider))}}var Hd=function(r){return r[r.Low=0]="Low",r[r.High=1]="High",r[r.Floor=2]="Floor",r[r.Ceil=3]="Ceil",r[r.TickValue=4]="TickValue",r}(Hd||{});class my{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1}const g1=new t.UbH("AllowUnsafeHtmlInSlider");var Kn=function(r){return r[r.Min=0]="Min",r[r.Max=1]="Max",r}(Kn||{});class y2{value;highValue;pointerType}class cn{static isNullOrUndefined(i){return null==i}static areArraysEqual(i,e){if(i.length!==e.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==e[s])return!1;return!0}static linearValueToPosition(i,e,s){return(i-e)/(s-e)}static logValueToPosition(i,e,s){return((i=Math.log(i))-(e=Math.log(e)))/((s=Math.log(s))-e)}static linearPositionToValue(i,e,s){return i*(s-e)+e}static logPositionToValue(i,e,s){return e=Math.log(e),s=Math.log(s),Math.exp(i*(s-e)+e)}static findStepIndex(i,e){const s=e.map(f=>Math.abs(i-f.value));let l=0;for(let f=0;f<e.length;f++)s[f]!==s[l]&&s[f]<s[l]&&(l=f);return l}}class bp{static isTouchEvent(i){return void 0!==window.TouchEvent?i instanceof TouchEvent:void 0!==i.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class ya{static roundToPrecisionLimit(i,e){return+i.toPrecision(e)}static isModuloWithinPrecisionLimit(i,e,s){const l=Math.pow(10,-s);return Math.abs(i%e)<=l||Math.abs(Math.abs(i%e)-e)<=l}static clampToRange(i,e,s){return Math.min(Math.max(i,e),s)}}class v1{eventName=null;events=null;eventsSubscription=null;teardownCallback=null}class _1{renderer;constructor(i){this.renderer=i}attachPassiveEventListener(i,e,s,l){if(!0!==d1)return this.attachEventListener(i,e,s,l);const f=new v1;f.eventName=e,f.events=new x.E;const w=z=>{f.events.next(z)};return i.addEventListener(e,w,{passive:!0,capture:!1}),f.teardownCallback=()=>{i.removeEventListener(e,w,{passive:!0,capture:!1})},f.eventsSubscription=f.events.pipe(cn.isNullOrUndefined(l)?(0,o1.y)(()=>{}):s1(l,void 0,{leading:!0,trailing:!0})).subscribe(z=>{s(z)}),f}detachEventListener(i){cn.isNullOrUndefined(i.eventsSubscription)||(i.eventsSubscription.unsubscribe(),i.eventsSubscription=null),cn.isNullOrUndefined(i.events)||(i.events.complete(),i.events=null),cn.isNullOrUndefined(i.teardownCallback)||(i.teardownCallback(),i.teardownCallback=null)}attachEventListener(i,e,s,l){const f=new v1;return f.eventName=e,f.events=new x.E,f.teardownCallback=this.renderer.listen(i,e,z=>{f.events.next(z)}),f.eventsSubscription=f.events.pipe(cn.isNullOrUndefined(l)?(0,o1.y)(()=>{}):s1(l,void 0,{leading:!0,trailing:!0})).subscribe(z=>{s(z)}),f}}let xp=(()=>{class r{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(e,s,l){this.elemRef=e,this.renderer=s,this.changeDetectionRef=l,this.eventListenerHelper=new _1(this.renderer)}setAlwaysHide(e){this._alwaysHide=e,this.visibility=e?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(e){this._scale=e}setRotate(e){this._rotate=e,this.transform="rotate("+e+"deg)"}getRotate(){return this._rotate}setPosition(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}calculateDimension(){const e=this.getBoundingClientRect();this._dimension=this.vertical?(e.bottom-e.top)*this.scale:(e.right-e.left)*this.scale}setDimension(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(e,s,l){const f=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,s,l);this.eventListeners.push(f)}onPassive(e,s,l){const f=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,s,l);this.eventListeners.push(f)}off(e){let s,l;cn.isNullOrUndefined(e)?(s=[],l=this.eventListeners):(s=this.eventListeners.filter(f=>f.eventName!==e),l=this.eventListeners.filter(f=>f.eventName===e));for(const f of l)this.eventListenerHelper.detachEventListener(f);this.eventListeners=s}isRefDestroyed(){return cn.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(s){return new(s||r)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(t.kD9))};static \u0275dir=t.Sc5({type:r,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(s,l){2&s&&t.m4B("opacity",l.opacity)("visibility",l.visibility)("left",l.left)("bottom",l.bottom)("height",l.height)("width",l.width)("transform",l.transform)}})}return r})(),X0=(()=>{class r extends xp{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}constructor(e,s,l){super(e,s,l)}static \u0275fac=function(s){return new(s||r)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(t.kD9))};static \u0275dir=t.Sc5({type:r,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(s,l){2&s&&(t.e48("role",l.role)("tabindex",l.tabindex)("aria-orientation",l.ariaOrientation)("aria-label",l.ariaLabel)("aria-labelledby",l.ariaLabelledBy)("aria-valuenow",l.ariaValueNow)("aria-valuetext",l.ariaValueText)("aria-valuemin",l.ariaValueMin)("aria-valuemax",l.ariaValueMax),t.eAK("ngx-slider-active",l.active))},features:[t.eg9]})}return r})(),Gm=(()=>{class r extends xp{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(e,s,l,f){super(e,s,l),this.allowUnsafeHtmlInSlider=f}setValue(e){let s=!1;!this.alwaysHide&&(cn.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&0===this.dimension)&&(s=!0),this._value=e,!1===this.allowUnsafeHtmlInSlider?this.elemRef.nativeElement.innerText=e:this.elemRef.nativeElement.innerHTML=e,s&&this.calculateDimension()}static \u0275fac=function(s){return new(s||r)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(t.kD9),t.GI1(g1,8))};static \u0275dir=t.Sc5({type:r,selectors:[["","ngxSliderLabel",""]],features:[t.eg9]})}return r})(),b2=(()=>{class r{template;tooltip;placement;content;static \u0275fac=function(s){return new(s||r)};static \u0275cmp=t.In1({type:r,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(s,l){1&s&&t.yuY(0,JT,2,6,"ng-container",0)(1,QT,3,3,"ng-container",0),2&s&&(t.E7m("ngIf",l.template),t.yG2(),t.E7m("ngIf",!l.template))},dependencies:[Ge.u_,Ge.XV],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return r})();class x2{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null}class y1{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0}class gy{value;highValue;static compare(i,e){return!(cn.isNullOrUndefined(i)&&cn.isNullOrUndefined(e)||cn.isNullOrUndefined(i)!==cn.isNullOrUndefined(e))&&i.value===e.value&&i.highValue===e.highValue}}class b1 extends gy{forceChange;static compare(i,e){return!(cn.isNullOrUndefined(i)&&cn.isNullOrUndefined(e)||cn.isNullOrUndefined(i)!==cn.isNullOrUndefined(e))&&i.value===e.value&&i.highValue===e.highValue&&i.forceChange===e.forceChange}}const w2={provide:V.Y6,useExisting:(0,t.wd)(()=>C2),multi:!0};let C2=(()=>{class r{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;value=null;valueChange=new t._w7;highValue=null;highValueChange=new t._w7;options=new my;userChangeStart=new t._w7;userChange=new t._w7;userChangeEnd=new t._w7;manualRefreshSubscription;set manualRefresh(e){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(e){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(s=>{this.focusPointer(s)})}get range(){return!cn.isNullOrUndefined(this.value)&&!cn.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new x.E;inputModelChangeSubscription=null;outputModelChangeSubject=new x.E;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new my;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new y1;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(e,s,l,f,w){this.renderer=e,this.elementRef=s,this.changeDetectionRef=l,this.zone=f,this.allowUnsafeHtmlInSlider=w,this.eventListenerHelper=new _1(this.renderer)}ngOnInit(){this.viewOptions=new my,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(e){!cn.isNullOrUndefined(e.options)&&JSON.stringify(e.options.previousValue)!==JSON.stringify(e.options.currentValue)&&this.onChangeOptions(),(!cn.isNullOrUndefined(e.value)||!cn.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.viewOptions.disabled=e,this.updateDisabledState()}setAriaLabel(e){this.viewOptions.ariaLabel=e,this.updateAriaLabel()}onResize(e){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,a1.a)(b1.compare),(0,l1.I)(e=>!e.forceChange&&!e.internalChange)).subscribe(e=>this.applyInputModelChange(e))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,a1.a)(b1.compare)).subscribe(e=>this.publishOutputModelChange(e))}subscribeResizeObserver(){bp.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){bp.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){cn.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){cn.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){cn.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){cn.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){cn.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){cn.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(e){return e===Kn.Min?this.minHandleElement:e===Kn.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===Kn.Min?this.viewLowValue:this.currentTrackingPointer===Kn.Max?this.viewHighValue:null}modelValueToViewValue(e){return cn.isNullOrUndefined(e)?NaN:cn.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+e:cn.findStepIndex(+e,this.viewOptions.stepsArray)}viewValueToModelValue(e){return cn.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?e:this.getStepValue(e)}getStepValue(e){const s=this.viewOptions.stepsArray[e];return cn.isNullOrUndefined(s)?NaN:s.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(e){const s=this.normaliseModelValues(e),l=!gy.compare(e,s);l&&(this.value=s.value,this.highValue=s.highValue),this.viewLowValue=this.modelValueToViewValue(s.value),this.viewHighValue=this.range?this.modelValueToViewValue(s.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:s.value,highValue:s.highValue,forceChange:l,userEventInitiated:!1})}publishOutputModelChange(e){const s=()=>{this.valueChange.emit(e.value),this.range&&this.highValueChange.emit(e.highValue),cn.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[e.value,e.highValue]:e.value),cn.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[e.value,e.highValue]:e.value)};e.userEventInitiated?(s(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{s()})}normaliseModelValues(e){const s=new gy;if(s.value=e.value,s.highValue=e.highValue,!cn.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const l=cn.findStepIndex(s.value,this.viewOptions.stepsArray);if(s.value=this.viewOptions.stepsArray[l].value,this.range){const f=cn.findStepIndex(s.highValue,this.viewOptions.stepsArray);s.highValue=this.viewOptions.stepsArray[f].value}}return s}if(this.viewOptions.enforceStep&&(s.value=this.roundStep(s.value),this.range&&(s.highValue=this.roundStep(s.highValue))),this.viewOptions.enforceRange&&(s.value=ya.clampToRange(s.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(s.highValue=ya.clampToRange(s.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue))if(this.viewOptions.noSwitching)s.value=s.highValue;else{const l=e.value;s.value=e.highValue,s.highValue=l}return s}renormaliseModelValues(){const e={value:this.value,highValue:this.highValue},s=this.normaliseModelValues(e);gy.compare(s,e)||(this.value=s.value,this.highValue=s.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const e=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const s=this.getOptionsInfluencingEventBindings(this.viewOptions),l=!cn.areArraysEqual(e,s);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(l)}applyOptions(){if(this.viewOptions=new my,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!cn.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!cn.isNullOrUndefined(this.viewOptions.tickStep)||!cn.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),cn.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),cn.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(e,s)=>e+" - "+s),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,cn.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(e):e))}applyFloorCeilOptions(){if(cn.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),cn.isNullOrUndefined(this.viewOptions.ceil)||cn.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,cn.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(e))}resetSlider(e=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),e&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions()}focusPointer(e){e!==Kn.Min&&e!==Kn.Max&&(e=Kn.Min),e===Kn.Min?this.minHandleElement.focus():this.range&&e===Kn.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){cn.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const e=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(e||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const e of this.getAllSliderElements())cn.isNullOrUndefined(e)||e.setVertical(this.viewOptions.vertical)}updateScale(){for(const e of this.getAllSliderElements())e.setScale(this.viewOptions.scale)}updateRotate(){for(const e of this.getAllSliderElements())e.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",cn.isNullOrUndefined(this.viewOptions.ariaLabel)?cn.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",cn.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?cn.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Hd.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Hd.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){cn.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,cn.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const e=cn.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,s=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&e.reverse();const l=cn.isNullOrUndefined(this.viewOptions.tickValueStep)?cn.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let f=!1;const w=e.map(z=>{let W=this.valueToPosition(z);this.viewOptions.vertical&&(W=this.maxHandlePosition-W);const ie=s+"("+Math.round(W)+"px)",oe=new x2;oe.selected=this.isTickSelected(z),oe.style={"-webkit-transform":ie,"-moz-transform":ie,"-o-transform":ie,"-ms-transform":ie,transform:ie},oe.selected&&!cn.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(oe.style["background-color"]=this.getSelectionBarColor()),!oe.selected&&!cn.isNullOrUndefined(this.viewOptions.getTickColor)&&(oe.style["background-color"]=this.getTickColor(z)),cn.isNullOrUndefined(this.viewOptions.ticksTooltip)||(oe.tooltip=this.viewOptions.ticksTooltip(z),oe.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!cn.isNullOrUndefined(l)&&ya.isModuloWithinPrecisionLimit(z,l,this.viewOptions.precisionLimit)&&(oe.value=this.getDisplayValue(z,Hd.TickValue),cn.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(oe.valueTooltip=this.viewOptions.ticksValuesTooltip(z),oe.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let Re=null;if(cn.isNullOrUndefined(this.viewOptions.stepsArray))cn.isNullOrUndefined(this.viewOptions.getLegend)||(Re=this.viewOptions.getLegend(z));else{const je=this.viewOptions.stepsArray[z];cn.isNullOrUndefined(this.viewOptions.getStepLegend)?cn.isNullOrUndefined(je)||(Re=je.legend):Re=this.viewOptions.getStepLegend(je)}return cn.isNullOrUndefined(Re)||(oe.legend=Re,f=!0),oe});if(this.sliderElementWithLegendClass!==f&&setTimeout(()=>{this.sliderElementWithLegendClass=f}),cn.isNullOrUndefined(this.ticks)||this.ticks.length!==w.length)this.ticks=w,this.isRefDestroyed()||this.changeDetectionRef.detectChanges();else for(let z=0;z<w.length;++z)Object.assign(this.ticks[z],w[z])}getTicksArray(){const e=cn.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,s=[],l=1+Math.floor(ya.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/e,this.viewOptions.precisionLimit));for(let f=0;f<l;++f)s.push(ya.roundToPrecisionLimit(this.viewOptions.floor+e*f,this.viewOptions.precisionLimit));return s}isTickSelected(e){if(!this.range)if(cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{const s=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>s&&e>=s&&e<=this.viewLowValue)return!0;if(this.viewLowValue<s&&e<=s&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Hd.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Hd.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(e,s){e===Kn.Min?this.updateLowHandle(s):e===Kn.Max&&this.updateHighHandle(s),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(e,s){const l=e===Kn.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,f=s-l/2+this.handleHalfDimension,w=this.fullBarElement.dimension-l;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===Kn.Min||!this.viewOptions.rightToLeft&&e===Kn.Max?Math.min(f,w):Math.min(Math.max(f,0),w):f}updateLowHandle(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Hd.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(Kn.Min,e)),cn.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(Kn.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Hd.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(Kn.Max,e)),cn.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(Kn.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let e=!1,s=!1;const l=this.isLabelBelowFloorLabel(this.minHandleLabelElement),f=this.isLabelAboveCeilLabel(this.minHandleLabelElement),w=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),z=this.isLabelBelowFloorLabel(this.combinedLabelElement),W=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(l?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),f?(s=!0,this.ceilLabelElement.hide()):(s=!1,this.ceilLabelElement.show()),this.range){const ie=this.combinedLabelElement.isVisible()?W:w,oe=this.combinedLabelElement.isVisible()?z:l;ie?this.ceilLabelElement.hide():s||this.ceilLabelElement.show(),oe?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}isLabelBelowFloorLabel(e){const s=e.position,f=this.floorLabelElement.position;return this.viewOptions.rightToLeft?s+e.dimension>=f-2:s<=f+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(e){const s=e.position,f=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?s<=f+this.ceilLabelElement.dimension+2:s+e.dimension>=f-2}updateSelectionBar(){let e=0,s=0;const l=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,f=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)s=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=f;else if(cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))l?(s=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(s=this.minHandleElement.position+this.handleHalfDimension,e=0);else{const w=this.viewOptions.showSelectionBarFromValue,z=this.valueToPosition(w);(this.viewOptions.rightToLeft?this.viewLowValue<=w:this.viewLowValue>w)?(s=this.minHandleElement.position-z,e=z+this.handleHalfDimension):(s=z-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(s),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+s)),this.leftOuterSelectionBarElement.setPosition(e+s)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+s)),this.rightOuterSelectionBarElement.setPosition(e+s))),cn.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!cn.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const w=cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),z=w-e>0&&!l||w-e<=0&&l;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?z?"bottom":"top":z?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(w+s+e+(z?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=w-e+(z?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const w=this.getSelectionBarColor();this.barStyle={backgroundColor:w}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(e){return this.viewOptions.getPointerColor(e===Kn.Max?this.highValue:this.value,e)}getTickColor(e){return this.viewOptions.getTickColor(e)}updateCombinedLabel(){let e=null;if(e=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,e){const s=this.getDisplayValue(this.viewLowValue,Hd.Low),l=this.getDisplayValue(this.viewHighValue,Hd.High),f=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(l,s):this.viewOptions.combineLabels(s,l);this.combinedLabelElement.setValue(f);const w=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(w),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(e,s){return!cn.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,s)}roundStep(e,s){const l=cn.isNullOrUndefined(s)?this.viewOptions.step:s;let f=ya.roundToPrecisionLimit((e-this.viewOptions.floor)/l,this.viewOptions.precisionLimit);return f=Math.round(f)*l,ya.roundToPrecisionLimit(this.viewOptions.floor+f,this.viewOptions.precisionLimit)}valueToPosition(e){let s=cn.linearValueToPosition;cn.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(s=cn.logValueToPosition):s=this.viewOptions.customValueToPosition;let l=s(e=ya.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return cn.isNullOrUndefined(l)&&(l=0),this.viewOptions.rightToLeft&&(l=1-l),l*this.maxHandlePosition}positionToValue(e){let s=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(s=1-s);let l=cn.linearPositionToValue;cn.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(l=cn.logPositionToValue):l=this.viewOptions.customPositionToValue;const f=l(s,this.viewOptions.floor,this.viewOptions.ceil);return cn.isNullOrUndefined(f)?0:f}getEventXY(e,s){if(e instanceof MouseEvent)return this.viewOptions.vertical||0!==this.viewOptions.rotate?e.clientY:e.clientX;let l=0;const f=e.touches;if(!cn.isNullOrUndefined(s))for(let w=0;w<f.length;w++)if(f[w].identifier===s){l=w;break}return this.viewOptions.vertical||0!==this.viewOptions.rotate?f[l].clientY:f[l].clientX}getEventPosition(e,s){const l=this.elementRef.nativeElement.getBoundingClientRect(),f=this.viewOptions.vertical||0!==this.viewOptions.rotate?l.bottom:l.left;let w=0;return w=this.viewOptions.vertical||0!==this.viewOptions.rotate?-this.getEventXY(e,s)+f:this.getEventXY(e,s)-f,w*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(e){if(!this.range)return Kn.Min;const s=this.getEventPosition(e),l=Math.abs(s-this.minHandleElement.position),f=Math.abs(s-this.maxHandleElement.position);return l<f?Kn.Min:l>f?Kn.Max:this.viewOptions.rightToLeft?s>this.minHandleElement.position?Kn.Min:Kn.Max:s<this.minHandleElement.position?Kn.Min:Kn.Max}bindEvents(){const e=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",s=>this.onBarStart(null,e,s,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",s=>this.onBarStart(Kn.Min,e,s,!0,!0)),this.maxHandleElement.on("mousedown",s=>this.onBarStart(Kn.Max,e,s,!0,!0))):(this.minHandleElement.on("mousedown",s=>this.onStart(Kn.Min,s,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",s=>this.onStart(Kn.Max,s,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",s=>this.onStart(null,s,!0,!0,!0)),this.ticksElement.on("mousedown",s=>this.onStart(null,s,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",s=>this.onBarStart(null,e,s,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",s=>this.onBarStart(Kn.Min,e,s,!0,!0)),this.maxHandleElement.onPassive("touchstart",s=>this.onBarStart(Kn.Max,e,s,!0,!0))):(this.minHandleElement.onPassive("touchstart",s=>this.onStart(Kn.Min,s,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",s=>this.onStart(Kn.Max,s,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",s=>this.onStart(null,s,!0,!0,!0)),this.ticksElement.onPassive("touchstart",s=>this.onStart(null,s,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(Kn.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(Kn.Max)))}getOptionsInfluencingEventBindings(e){return[e.disabled,e.readOnly,e.draggableRange,e.draggableRangeOnly,e.onlyBindHandles,e.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const e of this.getAllSliderElements())cn.isNullOrUndefined(e)||e.off()}onBarStart(e,s,l,f,w,z,W){s?this.onDragStart(e,l,f,w):this.onStart(e,l,f,w,z,W)}onStart(e,s,l,f,w,z){s.stopPropagation(),!bp.isTouchEvent(s)&&!d1&&s.preventDefault(),this.moving=!1,this.calculateViewDimensions(),cn.isNullOrUndefined(e)&&(e=this.getNearestHandle(s)),this.currentTrackingPointer=e;const W=this.getPointerElement(e);if(W.active=!0,this.viewOptions.keyboardSupport&&W.focus(),l){this.unsubscribeOnMove();const ie=oe=>this.dragging.active?this.onDragMove(oe):this.onMove(oe);this.onMoveEventListener=bp.isTouchEvent(s)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",ie):this.eventListenerHelper.attachEventListener(document,"mousemove",ie)}if(f){this.unsubscribeOnEnd();const ie=oe=>this.onEnd(oe);this.onEndEventListener=bp.isTouchEvent(s)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",ie):this.eventListenerHelper.attachEventListener(document,"mouseup",ie)}this.userChangeStart.emit(this.getChangeContext()),bp.isTouchEvent(s)&&!cn.isNullOrUndefined(s.changedTouches)&&cn.isNullOrUndefined(this.touchId)&&(this.touchId=s.changedTouches[0].identifier),w&&this.onMove(s,!0),z&&this.onEnd(s)}onMove(e,s){let l=null;if(bp.isTouchEvent(e)){const ie=e.changedTouches;for(let oe=0;oe<ie.length;oe++)if(ie[oe].identifier===this.touchId){l=ie[oe];break}if(cn.isNullOrUndefined(l))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const f=cn.isNullOrUndefined(l)?this.getEventPosition(e):this.getEventPosition(e,l.identifier);let w;f<=0?w=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:f>=this.maxHandlePosition?w=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(w=this.positionToValue(f),w=s&&!cn.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(w,this.viewOptions.tickStep):this.roundStep(w)),this.positionTrackingHandle(w)}onEnd(e){bp.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(e){const s=this.getPointerElement(e);s.on("blur",()=>this.onPointerBlur(s)),s.on("keydown",l=>this.onKeyboardEvent(l)),s.on("keyup",()=>this.onKeyUp()),s.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,cn.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(e){const s=this.viewOptions.ceil-this.viewOptions.floor;let l=e+this.viewOptions.step,f=e-this.viewOptions.step,w=e+s/10,z=e-s/10;this.viewOptions.reversedControls&&(l=e-this.viewOptions.step,f=e+this.viewOptions.step,w=e-s/10,z=e+s/10);const W={UP:l,DOWN:f,LEFT:f,RIGHT:l,PAGEUP:w,PAGEDOWN:z,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(W.LEFT=l,W.RIGHT=f,(this.viewOptions.vertical||0!==this.viewOptions.rotate)&&(W.UP=f,W.DOWN=l)),W}onKeyboardEvent(e){const s=this.getCurrentTrackingValue(),l=cn.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,W=this.getKeyActions(s)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[l]];if(cn.isNullOrUndefined(W)||cn.isNullOrUndefined(this.currentTrackingPointer))return;e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const ie=ya.clampToRange(W,this.viewOptions.floor,this.viewOptions.ceil),oe=this.roundStep(ie);if(this.viewOptions.draggableRangeOnly){const Re=this.viewHighValue-this.viewLowValue;let je,Ye;this.currentTrackingPointer===Kn.Min?(je=oe,Ye=oe+Re,Ye>this.viewOptions.ceil&&(Ye=this.viewOptions.ceil,je=Ye-Re)):this.currentTrackingPointer===Kn.Max&&(Ye=oe,je=oe-Re,je<this.viewOptions.floor&&(je=this.viewOptions.floor,Ye=je+Re)),this.positionTrackingBar(je,Ye)}else this.positionTrackingHandle(oe)}onDragStart(e,s,l,f){const w=this.getEventPosition(s);this.dragging=new y1,this.dragging.active=!0,this.dragging.value=this.positionToValue(w),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-w:w-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?w-this.maxHandleElement.position:this.maxHandleElement.position-w,this.onStart(e,s,l,f)}getMinValue(e,s,l){const f=this.viewOptions.rightToLeft;let w=null;return w=s?l?f?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:f?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(f?e+this.dragging.lowLimit:e-this.dragging.lowLimit),this.roundStep(w)}getMaxValue(e,s,l){const f=this.viewOptions.rightToLeft;let w=null;return w=s?l?f?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:f?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:f?this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(w)}onDragMove(e){const s=this.getEventPosition(e);let l,f,w,z;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(l=this.dragging.lowLimit,f=this.dragging.highLimit,w=this.maxHandleElement,z=this.minHandleElement):(l=this.dragging.highLimit,f=this.dragging.lowLimit,w=this.minHandleElement,z=this.maxHandleElement);const ie=s>=this.maxHandlePosition-l;let oe,Re;if(s<=f){if(0===w.position)return;oe=this.getMinValue(s,!0,!1),Re=this.getMaxValue(s,!0,!1)}else if(ie){if(z.position===this.maxHandlePosition)return;Re=this.getMaxValue(s,!0,!0),oe=this.getMinValue(s,!0,!0)}else oe=this.getMinValue(s,!1,!1),Re=this.getMaxValue(s,!1,!1);this.positionTrackingBar(oe,Re)}positionTrackingBar(e,s){!cn.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(s=ya.roundToPrecisionLimit((e=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!cn.isNullOrUndefined(this.viewOptions.maxLimit)&&s>this.viewOptions.maxLimit&&(e=ya.roundToPrecisionLimit((s=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=s,this.applyViewChange(),this.updateHandles(Kn.Min,this.valueToPosition(e)),this.updateHandles(Kn.Max,this.valueToPosition(s))}positionTrackingHandle(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===Kn.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===Kn.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===Kn.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(Kn.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Kn.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===Kn.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(Kn.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Kn.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===Kn.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===Kn.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}applyMinMaxLimit(e){return!cn.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!cn.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}applyMinMaxRange(e){const l=Math.abs(e-(this.currentTrackingPointer===Kn.Min?this.viewHighValue:this.viewLowValue));if(!cn.isNullOrUndefined(this.viewOptions.minRange)&&l<this.viewOptions.minRange){if(this.currentTrackingPointer===Kn.Min)return ya.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Kn.Max)return ya.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!cn.isNullOrUndefined(this.viewOptions.maxRange)&&l>this.viewOptions.maxRange){if(this.currentTrackingPointer===Kn.Min)return ya.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Kn.Max)return ya.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}applyPushRange(e){const s=this.currentTrackingPointer===Kn.Min?this.viewHighValue-e:e-this.viewLowValue,l=cn.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,f=this.viewOptions.maxRange;return s<l?(this.currentTrackingPointer===Kn.Min?(this.viewHighValue=ya.roundToPrecisionLimit(Math.min(e+l,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=ya.roundToPrecisionLimit(this.viewHighValue-l,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Kn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Kn.Max&&(this.viewLowValue=ya.roundToPrecisionLimit(Math.max(e-l,this.viewOptions.floor),this.viewOptions.precisionLimit),e=ya.roundToPrecisionLimit(this.viewLowValue+l,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Kn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!cn.isNullOrUndefined(f)&&s>f&&(this.currentTrackingPointer===Kn.Min?(this.viewHighValue=ya.roundToPrecisionLimit(e+f,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Kn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Kn.Max&&(this.viewLowValue=ya.roundToPrecisionLimit(e-f,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Kn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}getChangeContext(){const e=new y2;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}static \u0275fac=function(s){return new(s||r)(t.GI1(t.q87),t.GI1(t.GMv),t.GI1(t.kD9),t.GI1(t.WW2),t.GI1(g1,8))};static \u0275cmp=t.In1({type:r,selectors:[["ngx-slider"]],contentQueries:function(s,l,f){if(1&s&&t.szK(f,e2,5),2&s){let w;t.wto(w=t.Gqi())&&(l.tooltipTemplate=w.first)}},viewQuery:function(s,l){if(1&s&&(t.CC$(t2,5,xp),t.CC$(n2,5,xp),t.CC$(r2,5,xp),t.CC$(s2,5,xp),t.CC$(o2,5,X0),t.CC$(a2,5,X0),t.CC$(l2,5,Gm),t.CC$(c2,5,Gm),t.CC$(u2,5,Gm),t.CC$(d2,5,Gm),t.CC$(h2,5,Gm),t.CC$(p2,5,xp)),2&s){let f;t.wto(f=t.Gqi())&&(l.leftOuterSelectionBarElement=f.first),t.wto(f=t.Gqi())&&(l.rightOuterSelectionBarElement=f.first),t.wto(f=t.Gqi())&&(l.fullBarElement=f.first),t.wto(f=t.Gqi())&&(l.selectionBarElement=f.first),t.wto(f=t.Gqi())&&(l.minHandleElement=f.first),t.wto(f=t.Gqi())&&(l.maxHandleElement=f.first),t.wto(f=t.Gqi())&&(l.floorLabelElement=f.first),t.wto(f=t.Gqi())&&(l.ceilLabelElement=f.first),t.wto(f=t.Gqi())&&(l.minHandleLabelElement=f.first),t.wto(f=t.Gqi())&&(l.maxHandleLabelElement=f.first),t.wto(f=t.Gqi())&&(l.combinedLabelElement=f.first),t.wto(f=t.Gqi())&&(l.ticksElement=f.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(s,l){1&s&&t.qCj("resize",function(w){return l.onResize(w)},!1,t.MbM),2&s&&(t.e48("disabled",l.sliderElementDisabledAttr)("aria-label",l.sliderElementAriaLabel),t.eAK("vertical",l.sliderElementVerticalClass)("animate",l.sliderElementAnimateClass)("with-legend",l.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[t.M5G([w2]),t.SYr],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(s,l){1&s&&(t.I0R(0,"span",0,1),t.wR5(2,"span",2),t.C$Y(),t.I0R(3,"span",3,4),t.wR5(5,"span",2),t.C$Y(),t.I0R(6,"span",5,6),t.wR5(8,"span",2),t.C$Y(),t.I0R(9,"span",7,8),t.wR5(11,"span",9),t.C$Y(),t.wR5(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),t.I0R(26,"span",24,25),t.yuY(28,_2,5,10,"span",26),t.C$Y()),2&s&&(t.yG2(6),t.eAK("ngx-slider-transparent",l.fullBarTransparentClass),t.yG2(3),t.eAK("ngx-slider-draggable",l.selectionBarDraggableClass),t.yG2(2),t.E7m("ngStyle",l.barStyle),t.yG2(),t.E7m("ngStyle",l.minPointerStyle),t.yG2(2),t.m4B("display",l.range?"inherit":"none"),t.E7m("ngStyle",l.maxPointerStyle),t.yG2(12),t.eAK("ngx-slider-ticks-values-under",l.ticksUnderValuesClass),t.E7m("hidden",!l.showTicks),t.yG2(2),t.E7m("ngForOf",l.ticks))},dependencies:[Ge.QF,Ge.ay,Ge.u_,Ge.Qt,xp,X0,Gm,b2],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}'],changeDetection:0})}return r})(),E2=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=t.a4G({type:r});static \u0275inj=t.s3X({imports:[Ge.MD]})}return r})(),S2=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=t.a4G({type:r});static \u0275inj=t.s3X({imports:[Ge.MD]})}return r})();Rt(9400);var Mf=Rt(6764),jm=Rt(2780);const C1=function A2(r,i){return function(e){return r(i(e))}};C1(Object.getPrototypeOf,Object),Function.prototype.toString.call(Object);const T1=function H2(r,i){return r===i||r!=r&&i!=i},vy=function V2(r,i){for(var e=r.length;e--;)if(T1(r[e][0],i))return e;return-1};var j2=Array.prototype.splice;function Um(r){var i=-1,e=null==r?0:r.length;for(this.clear();++i<e;){var s=r[i];this.set(s[0],s[1])}}Um.prototype.clear=function N2(){this.__data__=[],this.size=0},Um.prototype.delete=function U2(r){var i=this.__data__,e=vy(i,r);return!(e<0||(e==i.length-1?i.pop():j2.call(i,e,1),--this.size,0))},Um.prototype.get=function $2(r){var i=this.__data__,e=vy(i,r);return e<0?void 0:i[e][1]},Um.prototype.has=function Z2(r){return vy(this.__data__,r)>-1},Um.prototype.set=function K2(r,i){var e=this.__data__,s=vy(e,r);return s<0?(++this.size,e.push([r,i])):e[s][1]=i,this};const _y=Um;var bv=Rt(4556);var r,Ih=Rt(7616),hk=Ih.c["__core-js_shared__"],M1=(r=/[^.]+$/.exec(hk&&hk.keys&&hk.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var gk=Function.prototype.toString;const Af=function vk(r){if(null!=r){try{return gk.call(r)}catch{}try{return r+""}catch{}}return""};var yk=/^\[object .+?Constructor\]$/,Ek=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Tk=function Sk(r){return!(!(0,bv.c)(r)||function pk(r){return!!M1&&M1 in r}(r))&&(function dk(r){if(!(0,bv.c)(r))return!1;var i=(0,jm.c)(r);return"[object Function]"==i||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}(r)?Ek:yk).test(Af(r))},Df=function Ak(r,i){var e=function kk(r,i){return r?.[i]}(r,i);return Tk(e)?e:void 0},xv=Df(Ih.c,"Map"),wv=Df(Object,"create");var Bk=Object.prototype.hasOwnProperty;var Vk=Object.prototype.hasOwnProperty;function Wm(r){var i=-1,e=null==r?0:r.length;for(this.clear();++i<e;){var s=r[i];this.set(s[0],s[1])}}Wm.prototype.clear=function Lk(){this.__data__=wv?wv(null):{},this.size=0},Wm.prototype.delete=function Pk(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i},Wm.prototype.get=function Nk(r){var i=this.__data__;if(wv){var e=i[r];return"__lodash_hash_undefined__"===e?void 0:e}return Bk.call(i,r)?i[r]:void 0},Wm.prototype.has=function Gk(r){var i=this.__data__;return wv?void 0!==i[r]:Vk.call(i,r)},Wm.prototype.set=function Wk(r,i){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=wv&&void 0===i?"__lodash_hash_undefined__":i,this};const A1=Wm,yy=function Jk(r,i){var e=r.__data__;return function qk(r){var i=typeof r;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r}(i)?e["string"==typeof i?"string":"hash"]:e.map};function $m(r){var i=-1,e=null==r?0:r.length;for(this.clear();++i<e;){var s=r[i];this.set(s[0],s[1])}}$m.prototype.clear=function Xk(){this.size=0,this.__data__={hash:new A1,map:new(xv||_y),string:new A1}},$m.prototype.delete=function Qk(r){var i=yy(this,r).delete(r);return this.size-=i?1:0,i},$m.prototype.get=function tM(r){return yy(this,r).get(r)},$m.prototype.has=function nM(r){return yy(this,r).has(r)},$m.prototype.set=function sM(r,i){var e=yy(this,r),s=e.size;return e.set(r,i),this.size+=e.size==s?0:1,this};const aM=$m;function Xm(r){var i=this.__data__=new _y(r);this.size=i.size}Xm.prototype.clear=function Q2(){this.__data__=new _y,this.size=0},Xm.prototype.delete=function tk(r){var i=this.__data__,e=i.delete(r);return this.size=i.size,e},Xm.prototype.get=function nk(r){return this.__data__.get(r)},Xm.prototype.has=function sk(r){return this.__data__.has(r)},Xm.prototype.set=function cM(r,i){var e=this.__data__;if(e instanceof _y){var s=e.__data__;if(!xv||s.length<199)return s.push([r,i]),this.size=++e.size,this;e=this.__data__=new aM(s)}return e.set(r,i),this.size=e.size,this},function(){try{var r=Df(Object,"defineProperty");return r({},"",{}),r}catch{}}();!function CM(r){(0,Mf.c)(r)&&(0,jm.c)(r)}(function(){return arguments}()),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;var yo={};yo["[object Float32Array]"]=yo["[object Float64Array]"]=yo["[object Int8Array]"]=yo["[object Int16Array]"]=yo["[object Int32Array]"]=yo["[object Uint8Array]"]=yo["[object Uint8ClampedArray]"]=yo["[object Uint16Array]"]=yo["[object Uint32Array]"]=!0,yo["[object Arguments]"]=yo["[object Array]"]=yo["[object ArrayBuffer]"]=yo["[object Boolean]"]=yo["[object DataView]"]=yo["[object Date]"]=yo["[object Error]"]=yo["[object Function]"]=yo["[object Map]"]=yo["[object Number]"]=yo["[object Object]"]=yo["[object RegExp]"]=yo["[object Set]"]=yo["[object String]"]=yo["[object WeakMap]"]=!1;const Q0=function hA(r){return function(i){return r(i)}};var pA=Rt(8616),Y1="object"==typeof exports&&exports&&!exports.nodeType&&exports,Cv=Y1&&"object"==typeof module&&module&&!module.nodeType&&module,eb=Cv&&Cv.exports===Y1&&pA.c.process;const Zm=function(){try{return Cv&&Cv.require&&Cv.require("util").types||eb&&eb.binding&&eb.binding("util")}catch{}}();var H1=Zm&&Zm.isTypedArray;H1&&Q0(H1),C1(Object.keys,Object),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;const sb=Df(Ih.c,"DataView"),ob=Df(Ih.c,"Promise"),ab=Df(Ih.c,"Set"),lb=Df(Ih.c,"WeakMap");var Q1="[object Map]",ew="[object Promise]",tw="[object Set]",iw="[object WeakMap]",nw="[object DataView]",gD=Af(sb),vD=Af(xv),_D=Af(ob),yD=Af(ab),bD=Af(lb),If=jm.c;(sb&&If(new sb(new ArrayBuffer(1)))!=nw||xv&&If(new xv)!=Q1||ob&&If(ob.resolve())!=ew||ab&&If(new ab)!=tw||lb&&If(new lb)!=iw)&&(If=function(r){var i=(0,jm.c)(r),e="[object Object]"==i?r.constructor:void 0,s=e?Af(e):"";if(s)switch(s){case gD:return nw;case vD:return Q1;case _D:return ew;case yD:return tw;case bD:return iw}return i});Rt(312);var cw=Zm&&Zm.isMap;cw&&Q0(cw);var uw=Zm&&Zm.isSet;uw&&Q0(uw);var so={};so["[object Arguments]"]=so["[object Array]"]=so["[object ArrayBuffer]"]=so["[object DataView]"]=so["[object Boolean]"]=so["[object Date]"]=so["[object Float32Array]"]=so["[object Float64Array]"]=so["[object Int8Array]"]=so["[object Int16Array]"]=so["[object Int32Array]"]=so["[object Map]"]=so["[object Number]"]=so["[object Object]"]=so["[object RegExp]"]=so["[object Set]"]=so["[object String]"]=so["[object Symbol]"]=so["[object Uint8Array]"]=so["[object Uint8ClampedArray]"]=so["[object Uint16Array]"]=so["[object Uint32Array]"]=!0,so["[object Error]"]=so["[object Function]"]=so["[object WeakMap]"]=!1,Symbol("MainQueueId"),new Array(256).fill(0).map((r,i)=>("0"+i.toString(16)).slice(-2));let KI=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.a4G({type:r}),r.\u0275inj=t.s3X({imports:[[V.y,Ge.MD]]}),r})();Rt(1472);var mw=Rt(2164);window.ApexCharts=mw;let tL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.a4G({type:r}),r.\u0275inj=t.s3X({}),r})();Rt(9216);let iL=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=t.a4G({type:r});static#i=this.\u0275inj=t.s3X({})}return r})();var gw=Rt(800),vw=Rt(3616),nL=Rt(5084),rL=Rt(4704),sL=Rt(6700),oL=Rt(7368),aL=Rt(8716);const wy=()=>{const r=typeof window<"u"?window:void 0;return r&&r.tinymce?r.tinymce:null};let lL=(()=>{class r{onBeforePaste=new t._w7;onBlur=new t._w7;onClick=new t._w7;onCompositionEnd=new t._w7;onCompositionStart=new t._w7;onCompositionUpdate=new t._w7;onContextMenu=new t._w7;onCopy=new t._w7;onCut=new t._w7;onDblclick=new t._w7;onDrag=new t._w7;onDragDrop=new t._w7;onDragEnd=new t._w7;onDragGesture=new t._w7;onDragOver=new t._w7;onDrop=new t._w7;onFocus=new t._w7;onFocusIn=new t._w7;onFocusOut=new t._w7;onKeyDown=new t._w7;onKeyPress=new t._w7;onKeyUp=new t._w7;onMouseDown=new t._w7;onMouseEnter=new t._w7;onMouseLeave=new t._w7;onMouseMove=new t._w7;onMouseOut=new t._w7;onMouseOver=new t._w7;onMouseUp=new t._w7;onPaste=new t._w7;onSelectionChange=new t._w7;onActivate=new t._w7;onAddUndo=new t._w7;onBeforeAddUndo=new t._w7;onBeforeExecCommand=new t._w7;onBeforeGetContent=new t._w7;onBeforeRenderUI=new t._w7;onBeforeSetContent=new t._w7;onChange=new t._w7;onClearUndos=new t._w7;onDeactivate=new t._w7;onDirty=new t._w7;onExecCommand=new t._w7;onGetContent=new t._w7;onHide=new t._w7;onInit=new t._w7;onInput=new t._w7;onInitNgModel=new t._w7;onLoadContent=new t._w7;onNodeChange=new t._w7;onPostProcess=new t._w7;onPostRender=new t._w7;onPreInit=new t._w7;onPreProcess=new t._w7;onProgressState=new t._w7;onRedo=new t._w7;onRemove=new t._w7;onReset=new t._w7;onResizeEditor=new t._w7;onSaveContent=new t._w7;onSetAttrib=new t._w7;onObjectResizeStart=new t._w7;onObjectResized=new t._w7;onObjectSelected=new t._w7;onSetContent=new t._w7;onShow=new t._w7;onSubmit=new t._w7;onUndo=new t._w7;onVisualAid=new t._w7;static \u0275fac=function(s){return new(s||r)};static \u0275dir=t.Sc5({type:r,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInput:"onInput",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}})}return r})();const _w=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Cy=(r,i,e)=>(0,gw.w)(r,i).pipe((0,vw.a)(e)),yw=(r,i)=>"string"==typeof r?r.split(",").map(e=>e.trim()):Array.isArray(r)?r:i;let bw=0;const xw=r=>typeof r<"u"&&"textarea"===r.tagName.toLowerCase(),ww=r=>typeof r>"u"||""===r?[]:Array.isArray(r)?r:r.split(" "),hL=(r,i)=>ww(r).concat(ww(i)),pL=()=>{},Cw=r=>null==r,gL=(()=>{const r=new sL.g(null),i=r.pipe((0,l1.I)(Boolean),(0,oL.G)(([e,s])=>{const l=e.createElement("script");return l.referrerPolicy="origin",l.type="application/javascript",l.src=s,e.head.appendChild(l),(0,gw.w)(l,"load").pipe(r=>r.pipe((0,nL.K)(),(0,rL.k)(()=>{})))}),(0,aL.C)({bufferSize:1,refCount:!0}));return{load:(...e)=>(r.getValue()||r.next(e),i),reinitialize:()=>{r.next(null)}}})(),vL=new t.UbH("TINYMCE_SCRIPT_SRC"),_L={provide:V.Y6,useExisting:(0,t.wd)(()=>Ew),multi:!0};let Ew=(()=>{class r extends lL{cdRef;platformId;tinymceScriptSrc;cloudChannel="7";apiKey="no-api-key";licenseKey;init;id="";initialValue;outputFormat;inline;tagName;plugins;toolbar;modelEvents="change input undo redo";allowedEvents;ignoreEvents;set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}ngZone;_elementRef;_element;_disabled;_editor;onTouchedCallback=pL;onChangeCallback;destroy$=new x.E;constructor(e,s,l,f,w){super(),this.cdRef=l,this.platformId=f,this.tinymceScriptSrc=w,this._elementRef=e,this.ngZone=s}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(Cw(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,Ge.c0)(this.platformId)&&(this.id=this.id||(r=>{const e=(new Date).getTime(),s=Math.floor(1e9*Math.random());return bw++,"tiny-angular_"+s+bw+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==wy()?this.initialise():this._element&&this._element.ownerDocument&&gL.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,vw.a)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==wy()&&wy().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,xw(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise=()=>{const e={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,license_key:this.licenseKey,plugins:hL(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:s=>{this._editor=s,Cy(s,"init",this.destroy$).subscribe(()=>{this.initEditor(s)}),((r,i,e)=>{(r=>{const i=yw(r.ignoreEvents,[]);return yw(r.allowedEvents,_w).filter(s=>_w.includes(s)&&!i.includes(s))})(r).forEach(l=>{const f=r[l];Cy(i,l.substring(2),e).subscribe(w=>{(r=>r.observed||r.observers?.length>0)(f)&&r.ngZone.run(()=>f.emit({event:w,editor:i}))})})})(this,s,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(s)}};xw(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{wy().init(e)})};getScriptSrc(){return Cw(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){Cy(e,"blur",this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.onTouchedCallback())}),Cy(e,this.modelEvents,this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}static \u0275fac=function(s){return new(s||r)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(t.kD9),t.GI1(t.AHE),t.GI1(vL,8))};static \u0275cmp=t.In1({type:r,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",licenseKey:"licenseKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[t.M5G([_L]),t.eg9,t.UHJ],decls:0,vars:0,template:function(s,l){},dependencies:[Ge.MD,V.y],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return r})(),yL=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=t.a4G({type:r});static \u0275inj=t.s3X({imports:[Ew]})}return r})();var bL=Rt(2728);let wL=(()=>{class r{static forRoot(){return{ngModule:r,providers:[]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=t.a4G({type:r});static#i=this.\u0275inj=t.s3X({imports:[Ge.MD]})}return r})();var CL=Rt(8987);function EL(r,i){1&r&&t.OEk(0),2&r&&t.cNF(i.index<i.value?"\u2605":"\u2606")}function SL(r,i){}const TL=(r,i)=>({index:r,value:i});function kL(r,i){if(1&r){const e=t.KQA();t.I0R(0,"span",3),t.OEk(1),t.C$Y(),t.I0R(2,"span",4),t.qCj("mouseenter",function(){const f=t.usT(e).index,w=t.GaO();return t.CGJ(w.enter(f+1))})("click",function(){const f=t.usT(e).index,w=t.GaO();return t.CGJ(w.rate(f+1))}),t.yuY(3,SL,0,0,"ng-template",5),t.C$Y()}if(2&r){const e=i.$implicit,s=i.index,l=t.GaO(),f=t.Gew(2);t.yG2(),t.oRS("(",s<l.value?"*":" ",")"),t.yG2(),t.m4B("cursor",l.readonly?"default":"pointer"),t.eAK("active",s<l.value),t.E7m("title",e.title),t.yG2(),t.E7m("ngTemplateOutlet",l.customTemplate||f)("ngTemplateOutletContext",t.IBC(8,TL,s,l.value))}}let ML=(()=>{class r{constructor(){this.ariaLabel="rating"}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=t.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const AL={provide:V.Y6,useExisting:(0,t.wd)(()=>DL),multi:!0};let DL=(()=>{class r{constructor(e,s){this.changeDetection=e,this.max=5,this.readonly=!1,this.titles=[],this.onHover=new t._w7,this.onLeave=new t._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.ariaLabel="rating",this.range=[],this.value=0,Object.assign(this,s)}onKeydown(e){-1!==[37,38,39,40].indexOf(e.which)&&(e.preventDefault(),e.stopPropagation(),this.rate(this.value+(38===e.which||39===e.which?1:-1)))}ngOnInit(){this.max=this.max||5,this.titles=typeof this.titles<"u"&&this.titles.length>0?this.titles:[],this.range=this.buildTemplateObjects(this.max)}writeValue(e){if(e%1!==e)return this.value=Math.round(e),this.preValue=e,void this.changeDetection.markForCheck();this.preValue=e,this.value=e,this.changeDetection.markForCheck()}enter(e){this.readonly||(this.value=e,this.changeDetection.markForCheck(),this.onHover.emit(e))}reset(){"number"==typeof this.preValue&&(this.value=Math.round(this.preValue),this.changeDetection.markForCheck(),this.onLeave.emit(this.value))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}rate(e){!this.readonly&&this.range&&e>=0&&e<=this.range.length&&(this.writeValue(e),this.onChange(e))}buildTemplateObjects(e){const s=[];for(let l=0;l<e;l++)s.push({index:l,title:this.titles[l]||l+1});return s}static#e=this.\u0275fac=function(s){return new(s||r)(t.GI1(t.kD9),t.GI1(ML))};static#t=this.\u0275cmp=t.In1({type:r,selectors:[["rating"]],hostBindings:function(s,l){1&s&&t.qCj("keydown",function(w){return l.onKeydown(w)})},inputs:{max:"max",readonly:"readonly",titles:"titles",customTemplate:"customTemplate"},outputs:{onHover:"onHover",onLeave:"onLeave"},features:[t.M5G([AL])],decls:4,vars:4,consts:[["tabindex","0","role","slider","aria-valuemin","0",3,"mouseleave","keydown"],["star",""],["ngFor","",3,"ngForOf"],[1,"sr-only","visually-hidden"],[1,"bs-rating-star",3,"title","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,l){1&s&&(t.I0R(0,"span",0),t.qCj("mouseleave",function(){return l.reset()})("keydown",function(w){return l.onKeydown(w)}),t.yuY(1,EL,1,1,"ng-template",null,1,t.gJz)(3,kL,4,11,"ng-template",2),t.C$Y()),2&s&&(t.e48("aria-label",l.ariaLabel)("aria-valuemax",l.range.length)("aria-valuenow",l.value),t.yG2(3),t.E7m("ngForOf",l.range))},dependencies:[Ge.ay,Ge.XV],encapsulation:2,changeDetection:0})}return r})(),IL=(()=>{class r{static forRoot(){return{ngModule:r,providers:[]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=t.a4G({type:r});static#i=this.\u0275inj=t.s3X({imports:[Ge.MD]})}return r})();var pb=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],qm={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(r){return typeof console<"u"&&console.warn(r)},getWeek:function(r){var i=new Date(r.getTime());i.setHours(0,0,0,0),i.setDate(i.getDate()+3-(i.getDay()+6)%7);var e=new Date(i.getFullYear(),0,4);return 1+Math.round(((i.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},fb={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(r){var i=r%100;if(i>3&&i<21)return"th";switch(i%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const mb=fb;var Bc=function(r,i){return void 0===i&&(i=2),("000"+r).slice(-1*i)},$u=function(r){return!0===r?1:0};function Sw(r,i){var e;return function(){var s=this,l=arguments;clearTimeout(e),e=setTimeout(function(){return r.apply(s,l)},i)}}var gb=function(r){return r instanceof Array?r:[r]};function vc(r,i,e){if(!0===e)return r.classList.add(i);r.classList.remove(i)}function Fs(r,i,e){var s=window.document.createElement(r);return e=e||"",s.className=i=i||"",void 0!==e&&(s.textContent=e),s}function Ey(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Tw(r,i){return i(r)?r:r.parentNode?Tw(r.parentNode,i):void 0}function Sy(r,i){var e=Fs("div","numInputWrapper"),s=Fs("input","numInput "+r),l=Fs("span","arrowUp"),f=Fs("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?s.type="number":(s.type="text",s.pattern="\\d*"),void 0!==i)for(var w in i)s.setAttribute(w,i[w]);return e.appendChild(s),e.appendChild(l),e.appendChild(f),e}function pu(r){try{return"function"==typeof r.composedPath?r.composedPath()[0]:r.target}catch{return r.target}}var vb=function(){},Ty=function(r,i,e){return e.months[i?"shorthand":"longhand"][r]},LL={D:vb,F:function(r,i,e){r.setMonth(e.months.longhand.indexOf(i))},G:function(r,i){r.setHours((r.getHours()>=12?12:0)+parseFloat(i))},H:function(r,i){r.setHours(parseFloat(i))},J:function(r,i){r.setDate(parseFloat(i))},K:function(r,i,e){r.setHours(r.getHours()%12+12*$u(new RegExp(e.amPM[1],"i").test(i)))},M:function(r,i,e){r.setMonth(e.months.shorthand.indexOf(i))},S:function(r,i){r.setSeconds(parseFloat(i))},U:function(r,i){return new Date(1e3*parseFloat(i))},W:function(r,i,e){var s=parseInt(i),l=new Date(r.getFullYear(),0,2+7*(s-1),0,0,0,0);return l.setDate(l.getDate()-l.getDay()+e.firstDayOfWeek),l},Y:function(r,i){r.setFullYear(parseFloat(i))},Z:function(r,i){return new Date(i)},d:function(r,i){r.setDate(parseFloat(i))},h:function(r,i){r.setHours((r.getHours()>=12?12:0)+parseFloat(i))},i:function(r,i){r.setMinutes(parseFloat(i))},j:function(r,i){r.setDate(parseFloat(i))},l:vb,m:function(r,i){r.setMonth(parseFloat(i)-1)},n:function(r,i){r.setMonth(parseFloat(i)-1)},s:function(r,i){r.setSeconds(parseFloat(i))},u:function(r,i){return new Date(parseFloat(i))},w:vb,y:function(r,i){r.setFullYear(2e3+parseFloat(i))}},Lf={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Sv={Z:function(r){return r.toISOString()},D:function(r,i,e){return i.weekdays.shorthand[Sv.w(r,i,e)]},F:function(r,i,e){return Ty(Sv.n(r,i,e)-1,!1,i)},G:function(r,i,e){return Bc(Sv.h(r,i,e))},H:function(r){return Bc(r.getHours())},J:function(r,i){return void 0!==i.ordinal?r.getDate()+i.ordinal(r.getDate()):r.getDate()},K:function(r,i){return i.amPM[$u(r.getHours()>11)]},M:function(r,i){return Ty(r.getMonth(),!0,i)},S:function(r){return Bc(r.getSeconds())},U:function(r){return r.getTime()/1e3},W:function(r,i,e){return e.getWeek(r)},Y:function(r){return Bc(r.getFullYear(),4)},d:function(r){return Bc(r.getDate())},h:function(r){return r.getHours()%12?r.getHours()%12:12},i:function(r){return Bc(r.getMinutes())},j:function(r){return r.getDate()},l:function(r,i){return i.weekdays.longhand[r.getDay()]},m:function(r){return Bc(r.getMonth()+1)},n:function(r){return r.getMonth()+1},s:function(r){return r.getSeconds()},u:function(r){return r.getTime()},w:function(r){return r.getDay()},y:function(r){return String(r.getFullYear()).substring(2)}},kw=function(r){var i=r.config,e=void 0===i?qm:i,s=r.l10n,l=void 0===s?fb:s,f=r.isMobile,w=void 0!==f&&f;return function(z,W,ie){var oe=ie||l;return void 0===e.formatDate||w?W.split("").map(function(Re,je,Ye){return Sv[Re]&&"\\"!==Ye[je-1]?Sv[Re](z,oe,e):"\\"!==Re?Re:""}).join(""):e.formatDate(z,W,oe)}},_b=function(r){var i=r.config,e=void 0===i?qm:i,s=r.l10n,l=void 0===s?fb:s;return function(f,w,z,W){if(0===f||f){var oe,ie=W||l,Re=f;if(f instanceof Date)oe=new Date(f.getTime());else if("string"!=typeof f&&void 0!==f.toFixed)oe=new Date(f);else if("string"==typeof f){var je=w||(e||qm).dateFormat,Ye=String(f).trim();if("today"===Ye)oe=new Date,z=!0;else if(e&&e.parseDate)oe=e.parseDate(f,je);else if(/Z$/.test(Ye)||/GMT$/.test(Ye))oe=new Date(f);else{for(var Wt=void 0,$t=[],ci=0,zi=0,kn="";ci<je.length;ci++){var xr=je[ci],Tr="\\"===xr;if(Lf[xr]&&"\\"!==je[ci-1]&&!Tr){kn+=Lf[xr];var rs=new RegExp(kn).exec(f);rs&&(Wt=!0)&&$t["Y"!==xr?"push":"unshift"]({fn:LL[xr],val:rs[++zi]})}else Tr||(kn+=".")}oe=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),$t.forEach(function(Bs){return oe=(0,Bs.fn)(oe,Bs.val,ie)||oe}),oe=Wt?oe:void 0}}return oe instanceof Date&&!isNaN(oe.getTime())?(!0===z&&oe.setHours(0,0,0,0),oe):void e.errorHandler(new Error("Invalid date provided: "+Re))}}};function fu(r,i,e){return void 0===e&&(e=!0),!1!==e?new Date(r.getTime()).setHours(0,0,0,0)-new Date(i.getTime()).setHours(0,0,0,0):r.getTime()-i.getTime()}var OL=function(r,i,e){return r>Math.min(i,e)&&r<Math.max(i,e)},yb=function(r,i,e){return 3600*r+60*i+e},PL=function(r){var i=Math.floor(r/3600),e=(r-3600*i)/60;return[i,e,r-3600*i-60*e]},RL={DAY:864e5};function bb(r){var i=r.defaultHour,e=r.defaultMinute,s=r.defaultSeconds;if(void 0!==r.minDate){var l=r.minDate.getHours(),f=r.minDate.getMinutes(),w=r.minDate.getSeconds();i<l&&(i=l),i===l&&e<f&&(e=f),i===l&&e===f&&s<w&&(s=r.minDate.getSeconds())}if(void 0!==r.maxDate){var z=r.maxDate.getHours(),W=r.maxDate.getMinutes();(i=Math.min(i,z))===z&&(e=Math.min(W,e)),i===z&&e===W&&(s=r.maxDate.getSeconds())}return{hours:i,minutes:e,seconds:s}}Rt(6900);var nc=function(){return nc=Object.assign||function(r){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l]);return r},nc.apply(this,arguments)},Mw=function(){for(var r=0,i=0,e=arguments.length;i<e;i++)r+=arguments[i].length;var s=Array(r),l=0;for(i=0;i<e;i++)for(var f=arguments[i],w=0,z=f.length;w<z;w++,l++)s[l]=f[w];return s},zL=300;function FL(r,i){var e={config:nc(nc({},qm),La.defaultConfig),l10n:mb};function f(){var _t;return(null===(_t=e.calendarContainer)||void 0===_t?void 0:_t.getRootNode()).activeElement||document.activeElement}function w(_t){return _t.bind(e)}function z(){var _t=e.config;!1===_t.weekNumbers&&1===_t.showMonths||!0!==_t.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==e.calendarContainer&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),void 0!==e.daysContainer){var Dt=(e.days.offsetWidth+1)*_t.showMonths;e.daysContainer.style.width=Dt+"px",e.calendarContainer.style.width=Dt+(void 0!==e.weekWrapper?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function W(_t){if(0===e.selectedDates.length){var Dt=void 0===e.config.minDate||fu(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),fi=bb(e.config);Dt.setHours(fi.hours,fi.minutes,fi.seconds,Dt.getMilliseconds()),e.selectedDates=[Dt],e.latestSelectedDateObj=Dt}void 0!==_t&&"blur"!==_t.type&&function dO(_t){_t.preventDefault();var Dt="keydown"===_t.type,fi=pu(_t),Wi=fi;void 0!==e.amPM&&fi===e.amPM&&(e.amPM.textContent=e.l10n.amPM[$u(e.amPM.textContent===e.l10n.amPM[0])]);var Mn=parseFloat(Wi.getAttribute("min")),Un=parseFloat(Wi.getAttribute("max")),ts=parseFloat(Wi.getAttribute("step")),cr=parseInt(Wi.value,10),rr=cr+ts*(_t.delta||(Dt?38===_t.which?1:-1:0));if(typeof Wi.value<"u"&&2===Wi.value.length){var Nr=Wi===e.hourElement,to=Wi===e.minuteElement;rr<Mn?(rr=Un+rr+$u(!Nr)+($u(Nr)&&$u(!e.amPM)),to&&Tr(void 0,-1,e.hourElement)):rr>Un&&(rr=Wi===e.hourElement?rr-Un-$u(!e.amPM):Mn,to&&Tr(void 0,1,e.hourElement)),e.amPM&&Nr&&(1===ts?rr+cr===23:Math.abs(rr-cr)>ts)&&(e.amPM.textContent=e.l10n.amPM[$u(e.amPM.textContent===e.l10n.amPM[0])]),Wi.value=Bc(rr)}}(_t);var Wi=e._input.value;Re(),Lh(),e._input.value!==Wi&&e._debouncedChange()}function Re(){if(void 0!==e.hourElement&&void 0!==e.minuteElement){var _t=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,Dt=(parseInt(e.minuteElement.value,10)||0)%60,fi=void 0!==e.secondElement?(parseInt(e.secondElement.value,10)||0)%60:0;void 0!==e.amPM&&(_t=function ie(_t,Dt){return _t%12+12*$u(Dt===e.l10n.amPM[1])}(_t,e.amPM.textContent));var Wi=void 0!==e.config.minTime||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&0===fu(e.latestSelectedDateObj,e.config.minDate,!0),Mn=void 0!==e.config.maxTime||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&0===fu(e.latestSelectedDateObj,e.config.maxDate,!0);if(void 0!==e.config.maxTime&&void 0!==e.config.minTime&&e.config.minTime>e.config.maxTime){var Un=yb(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),ts=yb(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),cr=yb(_t,Dt,fi);if(cr>ts&&cr<Un){var ds=PL(Un);_t=ds[0],Dt=ds[1],fi=ds[2]}}else{if(Mn){var rr=void 0!==e.config.maxTime?e.config.maxTime:e.config.maxDate;(_t=Math.min(_t,rr.getHours()))===rr.getHours()&&(Dt=Math.min(Dt,rr.getMinutes())),Dt===rr.getMinutes()&&(fi=Math.min(fi,rr.getSeconds()))}if(Wi){var Nr=void 0!==e.config.minTime?e.config.minTime:e.config.minDate;(_t=Math.max(_t,Nr.getHours()))===Nr.getHours()&&Dt<Nr.getMinutes()&&(Dt=Nr.getMinutes()),Dt===Nr.getMinutes()&&(fi=Math.max(fi,Nr.getSeconds()))}}Ye(_t,Dt,fi)}}function je(_t){var Dt=_t||e.latestSelectedDateObj;Dt&&Dt instanceof Date&&Ye(Dt.getHours(),Dt.getMinutes(),Dt.getSeconds())}function Ye(_t,Dt,fi){void 0!==e.latestSelectedDateObj&&e.latestSelectedDateObj.setHours(_t%24,Dt,fi||0,0),e.hourElement&&e.minuteElement&&!e.isMobile&&(e.hourElement.value=Bc(e.config.time_24hr?_t:(12+_t)%12+12*$u(_t%12==0)),e.minuteElement.value=Bc(Dt),void 0!==e.amPM&&(e.amPM.textContent=e.l10n.amPM[$u(_t>=12)]),void 0!==e.secondElement&&(e.secondElement.value=Bc(fi)))}function Wt(_t){var Dt=pu(_t),fi=parseInt(Dt.value)+(_t.delta||0);(fi/1e3>1||"Enter"===_t.key&&!/[^\d]/.test(fi.toString()))&&ky(fi)}function $t(_t,Dt,fi,Wi){return Dt instanceof Array?Dt.forEach(function(Mn){return $t(_t,Mn,fi,Wi)}):_t instanceof Array?_t.forEach(function(Mn){return $t(Mn,Dt,fi,Wi)}):(_t.addEventListener(Dt,fi,Wi),void e._handlers.push({remove:function(){return _t.removeEventListener(Dt,fi,Wi)}}))}function ci(){No("onChange")}function kn(_t,Dt){var fi=void 0!==_t?e.parseDate(_t):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),Wi=e.currentYear,Mn=e.currentMonth;try{void 0!==fi&&(e.currentYear=fi.getFullYear(),e.currentMonth=fi.getMonth())}catch(Un){Un.message="Invalid date supplied: "+fi,e.config.errorHandler(Un)}Dt&&e.currentYear!==Wi&&(No("onYearChange"),Qm()),Dt&&(e.currentYear!==Wi||e.currentMonth!==Mn)&&No("onMonthChange"),e.redraw()}function xr(_t){var Dt=pu(_t);~Dt.className.indexOf("arrow")&&Tr(_t,Dt.classList.contains("arrowUp")?1:-1)}function Tr(_t,Dt,fi){var Wi=_t&&pu(_t),Mn=fi||Wi&&Wi.parentNode&&Wi.parentNode.firstChild,Un=Tb("increment");Un.delta=Dt,Mn&&Mn.dispatchEvent(Un)}function rs(_t,Dt,fi,Wi){var Mn=Of(Dt,!0),Un=Fs("span",_t,Dt.getDate().toString());return Un.dateObj=Dt,Un.$i=Wi,Un.setAttribute("aria-label",e.formatDate(Dt,e.config.ariaDateFormat)),-1===_t.indexOf("hidden")&&0===fu(Dt,e.now)&&(e.todayDateElem=Un,Un.classList.add("today"),Un.setAttribute("aria-current","date")),Mn?(Un.tabIndex=-1,kb(Dt)&&(Un.classList.add("selected"),e.selectedDateElem=Un,"range"===e.config.mode&&(vc(Un,"startRange",e.selectedDates[0]&&0===fu(Dt,e.selectedDates[0],!0)),vc(Un,"endRange",e.selectedDates[1]&&0===fu(Dt,e.selectedDates[1],!0)),"nextMonthDay"===_t&&Un.classList.add("inRange")))):Un.classList.add("flatpickr-disabled"),"range"===e.config.mode&&function cO(_t){return!("range"!==e.config.mode||e.selectedDates.length<2)&&fu(_t,e.selectedDates[0])>=0&&fu(_t,e.selectedDates[1])<=0}(Dt)&&!kb(Dt)&&Un.classList.add("inRange"),e.weekNumbers&&1===e.config.showMonths&&"prevMonthDay"!==_t&&Wi%7==6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(Dt)+"</span>"),No("onDayCreate",Un),Un}function Bs(_t){_t.focus(),"range"===e.config.mode&&Ay(_t)}function es(_t){for(var fi=_t>0?e.config.showMonths:-1,Wi=_t>0?0:e.config.showMonths-1;Wi!=fi;Wi+=_t)for(var Mn=e.daysContainer.children[Wi],ts=_t>0?Mn.children.length:-1,cr=_t>0?0:Mn.children.length-1;cr!=ts;cr+=_t){var ds=Mn.children[cr];if(-1===ds.className.indexOf("hidden")&&Of(ds.dateObj))return ds}}function gd(_t,Dt){var fi=f(),Wi=My(fi||document.body),Mn=void 0!==_t?_t:Wi?fi:void 0!==e.selectedDateElem&&My(e.selectedDateElem)?e.selectedDateElem:void 0!==e.todayDateElem&&My(e.todayDateElem)?e.todayDateElem:es(Dt>0?1:-1);void 0===Mn?e._input.focus():Wi?function Xu(_t,Dt){for(var fi=-1===_t.className.indexOf("Month")?_t.dateObj.getMonth():e.currentMonth,Wi=Dt>0?e.config.showMonths:-1,Mn=Dt>0?1:-1,Un=fi-e.currentMonth;Un!=Wi;Un+=Mn)for(var ts=e.daysContainer.children[Un],ds=ts.children.length,rr=fi-e.currentMonth===Un?_t.$i+Dt:Dt<0?ts.children.length-1:0;rr>=0&&rr<ds&&rr!=(Dt>0?ds:-1);rr+=Mn){var Nr=ts.children[rr];if(-1===Nr.className.indexOf("hidden")&&Of(Nr.dateObj)&&Math.abs(_t.$i-rr)>=Math.abs(Dt))return Bs(Nr)}e.changeMonth(Mn),gd(es(Mn),0)}(Mn,Dt):Bs(Mn)}function wb(_t,Dt){for(var fi=(new Date(_t,Dt,1).getDay()-e.l10n.firstDayOfWeek+7)%7,Wi=e.utils.getDaysInMonth((Dt-1+12)%12,_t),Mn=e.utils.getDaysInMonth(Dt,_t),Un=window.document.createDocumentFragment(),ts=e.config.showMonths>1,cr=ts?"prevMonthDay hidden":"prevMonthDay",ds=ts?"nextMonthDay hidden":"nextMonthDay",rr=Wi+1-fi,Nr=0;rr<=Wi;rr++,Nr++)Un.appendChild(rs("flatpickr-day "+cr,new Date(_t,Dt-1,rr),0,Nr));for(rr=1;rr<=Mn;rr++,Nr++)Un.appendChild(rs("flatpickr-day",new Date(_t,Dt,rr),0,Nr));for(var to=Mn+1;to<=42-fi&&(1===e.config.showMonths||Nr%7!=0);to++,Nr++)Un.appendChild(rs("flatpickr-day "+ds,new Date(_t,Dt+1,to%Mn),0,Nr));var Vd=Fs("div","dayContainer");return Vd.appendChild(Un),Vd}function Jm(){if(void 0!==e.daysContainer){Ey(e.daysContainer),e.weekNumbers&&Ey(e.weekNumbers);for(var _t=document.createDocumentFragment(),Dt=0;Dt<e.config.showMonths;Dt++){var fi=new Date(e.currentYear,e.currentMonth,1);fi.setMonth(e.currentMonth+Dt),_t.appendChild(wb(fi.getFullYear(),fi.getMonth()))}e.daysContainer.appendChild(_t),e.days=e.daysContainer.firstChild,"range"===e.config.mode&&1===e.selectedDates.length&&Ay()}}function Qm(){if(!(e.config.showMonths>1||"dropdown"!==e.config.monthSelectorType)){e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var Dt=0;Dt<12;Dt++)if(Wi=Dt,!(void 0!==e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&Wi<e.config.minDate.getMonth()||void 0!==e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()&&Wi>e.config.maxDate.getMonth())){var fi=Fs("option","flatpickr-monthDropdown-month");fi.value=new Date(e.currentYear,Dt).getMonth().toString(),fi.textContent=Ty(Dt,e.config.shorthandCurrentMonth,e.l10n),fi.tabIndex=-1,e.currentMonth===Dt&&(fi.selected=!0),e.monthsDropdownContainer.appendChild(fi)}}var Wi}function jL(){var fi,_t=Fs("div","flatpickr-month"),Dt=window.document.createDocumentFragment();e.config.showMonths>1||"static"===e.config.monthSelectorType?fi=Fs("span","cur-month"):(e.monthsDropdownContainer=Fs("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),$t(e.monthsDropdownContainer,"change",function(ts){var cr=pu(ts),ds=parseInt(cr.value,10);e.changeMonth(ds-e.currentMonth),No("onMonthChange")}),Qm(),fi=e.monthsDropdownContainer);var Wi=Sy("cur-year",{tabindex:"-1"}),Mn=Wi.getElementsByTagName("input")[0];Mn.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&Mn.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(Mn.setAttribute("max",e.config.maxDate.getFullYear().toString()),Mn.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var Un=Fs("div","flatpickr-current-month");return Un.appendChild(fi),Un.appendChild(Wi),Dt.appendChild(Un),_t.appendChild(Dt),{container:_t,yearElement:Mn,monthElement:fi}}function Dw(){Ey(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var _t=e.config.showMonths;_t--;){var Dt=jL();e.yearElements.push(Dt.yearElement),e.monthElements.push(Dt.monthElement),e.monthNav.appendChild(Dt.container)}e.monthNav.appendChild(e.nextMonthNav)}function Iw(){e.weekdayContainer?Ey(e.weekdayContainer):e.weekdayContainer=Fs("div","flatpickr-weekdays");for(var _t=e.config.showMonths;_t--;){var Dt=Fs("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(Dt)}return Lw(),e.weekdayContainer}function Lw(){if(e.weekdayContainer){var _t=e.l10n.firstDayOfWeek,Dt=Mw(e.l10n.weekdays.shorthand);_t>0&&_t<Dt.length&&(Dt=Mw(Dt.splice(_t,Dt.length),Dt.splice(0,_t)));for(var fi=e.config.showMonths;fi--;)e.weekdayContainer.children[fi].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+Dt.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function Cb(_t,Dt){void 0===Dt&&(Dt=!0);var fi=Dt?_t:_t-e.currentMonth;fi<0&&!0===e._hidePrevMonthArrow||fi>0&&!0===e._hideNextMonthArrow||(e.currentMonth+=fi,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,No("onYearChange"),Qm()),Jm(),No("onMonthChange"),Ly())}function Tv(_t){return e.calendarContainer.contains(_t)}function Eb(_t){if(e.isOpen&&!e.config.inline){var Dt=pu(_t),fi=Tv(Dt),Mn=!(Dt===e.input||Dt===e.altInput||e.element.contains(Dt)||_t.path&&_t.path.indexOf&&(~_t.path.indexOf(e.input)||~_t.path.indexOf(e.altInput))||fi||Tv(_t.relatedTarget)),Un=!e.config.ignoredFocusElements.some(function(ts){return ts.contains(Dt)});Mn&&Un&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement&&""!==e.input.value&&void 0!==e.input.value&&W(),e.close(),e.config&&"range"===e.config.mode&&1===e.selectedDates.length&&e.clear(!1))}}function ky(_t){if(!(!_t||e.config.minDate&&_t<e.config.minDate.getFullYear()||e.config.maxDate&&_t>e.config.maxDate.getFullYear())){var fi=e.currentYear!==_t;e.currentYear=_t||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),fi&&(e.redraw(),No("onYearChange"),Qm())}}function Of(_t,Dt){var fi;void 0===Dt&&(Dt=!0);var Wi=e.parseDate(_t,void 0,Dt);if(e.config.minDate&&Wi&&fu(Wi,e.config.minDate,void 0!==Dt?Dt:!e.minDateHasTime)<0||e.config.maxDate&&Wi&&fu(Wi,e.config.maxDate,void 0!==Dt?Dt:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&0===e.config.disable.length)return!0;if(void 0===Wi)return!1;for(var Mn=!!e.config.enable,Un=null!==(fi=e.config.enable)&&void 0!==fi?fi:e.config.disable,ts=0,cr=void 0;ts<Un.length;ts++){if("function"==typeof(cr=Un[ts])&&cr(Wi))return Mn;if(cr instanceof Date&&void 0!==Wi&&cr.getTime()===Wi.getTime())return Mn;if("string"==typeof cr){var ds=e.parseDate(cr,void 0,!0);return ds&&ds.getTime()===Wi.getTime()?Mn:!Mn}if("object"==typeof cr&&void 0!==Wi&&cr.from&&cr.to&&Wi.getTime()>=cr.from.getTime()&&Wi.getTime()<=cr.to.getTime())return Mn}return!Mn}function My(_t){return void 0!==e.daysContainer&&-1===_t.className.indexOf("hidden")&&-1===_t.className.indexOf("flatpickr-disabled")&&e.daysContainer.contains(_t)}function KL(_t){var Dt=_t.target===e._input,fi=e._input.value.trimEnd()!==Mb();Dt&&fi&&(!_t.relatedTarget||!Tv(_t.relatedTarget))&&e.setDate(e._input.value,!0,_t.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Ow(_t){var Dt=pu(_t),fi=e.config.wrap?r.contains(Dt):Dt===e._input,Wi=e.config.allowInput,Mn=e.isOpen&&(!Wi||!fi),Un=e.config.inline&&fi&&!Wi;if(13===_t.keyCode&&fi){if(Wi)return e.setDate(e._input.value,!0,Dt===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),Dt.blur();e.open()}else if(Tv(Dt)||Mn||Un){var ts=!!e.timeContainer&&e.timeContainer.contains(Dt);switch(_t.keyCode){case 13:ts?(_t.preventDefault(),W(),Sb()):Bw(_t);break;case 27:_t.preventDefault(),Sb();break;case 8:case 46:fi&&!e.config.allowInput&&(_t.preventDefault(),e.clear());break;case 37:case 39:if(ts||fi)e.hourElement&&e.hourElement.focus();else{_t.preventDefault();var cr=f();if(void 0!==e.daysContainer&&(!1===Wi||cr&&My(cr))){var ds=39===_t.keyCode?1:-1;_t.ctrlKey?(_t.stopPropagation(),Cb(ds),gd(es(1),0)):gd(void 0,ds)}}break;case 38:case 40:_t.preventDefault();var rr=40===_t.keyCode?1:-1;e.daysContainer&&void 0!==Dt.$i||Dt===e.input||Dt===e.altInput?_t.ctrlKey?(_t.stopPropagation(),ky(e.currentYear-rr),gd(es(1),0)):ts||gd(void 0,7*rr):Dt===e.currentYearElement?ky(e.currentYear-rr):e.config.enableTime&&(!ts&&e.hourElement&&e.hourElement.focus(),W(_t),e._debouncedChange());break;case 9:if(ts){var Nr=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(mu){return mu}),to=Nr.indexOf(Dt);if(-1!==to){var Vd=Nr[to+(_t.shiftKey?-1:1)];_t.preventDefault(),(Vd||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(Dt)&&_t.shiftKey&&(_t.preventDefault(),e._input.focus())}}if(void 0!==e.amPM&&Dt===e.amPM)switch(_t.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],Re(),Lh();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],Re(),Lh()}(fi||Tv(Dt))&&No("onKeyDown",_t)}function Ay(_t,Dt){if(void 0===Dt&&(Dt="flatpickr-day"),1===e.selectedDates.length&&(!_t||_t.classList.contains(Dt)&&!_t.classList.contains("flatpickr-disabled"))){for(var fi=_t?_t.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),Wi=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),Mn=Math.min(fi,e.selectedDates[0].getTime()),Un=Math.max(fi,e.selectedDates[0].getTime()),ts=!1,cr=0,ds=0,rr=Mn;rr<Un;rr+=RL.DAY)Of(new Date(rr),!0)||(ts=ts||rr>Mn&&rr<Un,rr<Wi&&(!cr||rr>cr)?cr=rr:rr>Wi&&(!ds||rr<ds)&&(ds=rr));Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+Dt)).forEach(function(to){var mu=to.dateObj.getTime(),kv=cr>0&&mu<cr||ds>0&&mu>ds;if(kv)return to.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(eg){to.classList.remove(eg)});ts&&!kv||(["startRange","inRange","endRange","notAllowed"].forEach(function(eg){to.classList.remove(eg)}),void 0!==_t&&(_t.classList.add(fi<=e.selectedDates[0].getTime()?"startRange":"endRange"),Wi<fi&&mu===Wi?to.classList.add("startRange"):Wi>fi&&mu===Wi&&to.classList.add("endRange"),mu>=cr&&(0===ds||mu<=ds)&&OL(mu,Wi,fi)&&to.classList.add("inRange")))})}}function JL(){e.isOpen&&!e.config.static&&!e.config.inline&&Dy()}function Pw(_t){return function(Dt){var fi=e.config["_"+_t+"Date"]=e.parseDate(Dt,e.config.dateFormat),Wi=e.config["_"+("min"===_t?"max":"min")+"Date"];void 0!==fi&&(e["min"===_t?"minDateHasTime":"maxDateHasTime"]=fi.getHours()>0||fi.getMinutes()>0||fi.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(Mn){return Of(Mn)}),!e.selectedDates.length&&"min"===_t&&je(fi),Lh()),e.daysContainer&&(Fw(),void 0!==fi?e.currentYearElement[_t]=fi.getFullYear().toString():e.currentYearElement.removeAttribute(_t),e.currentYearElement.disabled=!!Wi&&void 0!==fi&&Wi.getFullYear()===fi.getFullYear())}}function Rw(){return e.config.wrap?r.querySelector("[data-input]"):r}function zw(){"object"!=typeof e.config.locale&&typeof La.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=nc(nc({},La.l10ns.default),"object"==typeof e.config.locale?e.config.locale:"default"!==e.config.locale?La.l10ns[e.config.locale]:void 0),Lf.D="("+e.l10n.weekdays.shorthand.join("|")+")",Lf.l="("+e.l10n.weekdays.longhand.join("|")+")",Lf.M="("+e.l10n.months.shorthand.join("|")+")",Lf.F="("+e.l10n.months.longhand.join("|")+")",Lf.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")",void 0===nc(nc({},i),JSON.parse(JSON.stringify(r.dataset||{}))).time_24hr&&void 0===La.defaultConfig.time_24hr&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=kw(e),e.parseDate=_b({config:e.config,l10n:e.l10n})}function Dy(_t){if("function"!=typeof e.config.position){if(void 0!==e.calendarContainer){No("onPreCalendarPosition");var Dt=_t||e._positionElement,fi=Array.prototype.reduce.call(e.calendarContainer.children,function(yO,bO){return yO+bO.offsetHeight},0),Wi=e.calendarContainer.offsetWidth,Mn=e.config.position.split(" "),Un=Mn[0],ts=Mn.length>1?Mn[1]:null,cr=Dt.getBoundingClientRect(),ds=window.innerHeight-cr.bottom,rr="above"===Un||"below"!==Un&&ds<fi&&cr.top>fi,Nr=window.pageYOffset+cr.top+(rr?-fi-2:Dt.offsetHeight+2);if(vc(e.calendarContainer,"arrowTop",!rr),vc(e.calendarContainer,"arrowBottom",rr),!e.config.inline){var to=window.pageXOffset+cr.left,Vd=!1,mu=!1;"center"===ts?(to-=(Wi-cr.width)/2,Vd=!0):"right"===ts&&(to-=Wi-cr.width,mu=!0),vc(e.calendarContainer,"arrowLeft",!Vd&&!mu),vc(e.calendarContainer,"arrowCenter",Vd),vc(e.calendarContainer,"arrowRight",mu);var kv=window.document.body.offsetWidth-(window.pageXOffset+cr.right),eg=to+Wi>window.document.body.offsetWidth,hO=kv+Wi>window.document.body.offsetWidth;if(vc(e.calendarContainer,"rightMost",eg),!e.config.static)if(e.calendarContainer.style.top=Nr+"px",eg)if(hO){var Ab=function tO(){for(var _t=null,Dt=0;Dt<document.styleSheets.length;Dt++){var fi=document.styleSheets[Dt];if(fi.cssRules){_t=fi;break}}return _t??function iO(){var _t=document.createElement("style");return document.head.appendChild(_t),_t.sheet}()}();if(void 0===Ab)return;var pO=window.document.body.offsetWidth,fO=Math.max(0,pO/2-Wi/2),vO=Ab.cssRules.length,_O="{left:"+cr.left+"px;right:auto;}";vc(e.calendarContainer,"rightMost",!1),vc(e.calendarContainer,"centerMost",!0),Ab.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+_O,vO),e.calendarContainer.style.left=fO+"px",e.calendarContainer.style.right="auto"}else e.calendarContainer.style.left="auto",e.calendarContainer.style.right=kv+"px";else e.calendarContainer.style.left=to+"px",e.calendarContainer.style.right="auto"}}}else e.config.position(e,_t)}function Fw(){e.config.noCalendar||e.isMobile||(Qm(),Ly(),Jm())}function Sb(){e._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(e.close,0):e.close()}function Bw(_t){_t.preventDefault(),_t.stopPropagation();var fi=Tw(pu(_t),function(Nr){return Nr.classList&&Nr.classList.contains("flatpickr-day")&&!Nr.classList.contains("flatpickr-disabled")&&!Nr.classList.contains("notAllowed")});if(void 0!==fi){var Wi=fi,Mn=e.latestSelectedDateObj=new Date(Wi.dateObj.getTime()),Un=(Mn.getMonth()<e.currentMonth||Mn.getMonth()>e.currentMonth+e.config.showMonths-1)&&"range"!==e.config.mode;if(e.selectedDateElem=Wi,"single"===e.config.mode)e.selectedDates=[Mn];else if("multiple"===e.config.mode){var ts=kb(Mn);ts?e.selectedDates.splice(parseInt(ts),1):e.selectedDates.push(Mn)}else"range"===e.config.mode&&(2===e.selectedDates.length&&e.clear(!1,!1),e.latestSelectedDateObj=Mn,e.selectedDates.push(Mn),0!==fu(Mn,e.selectedDates[0],!0)&&e.selectedDates.sort(function(Nr,to){return Nr.getTime()-to.getTime()}));if(Re(),Un){var cr=e.currentYear!==Mn.getFullYear();e.currentYear=Mn.getFullYear(),e.currentMonth=Mn.getMonth(),cr&&(No("onYearChange"),Qm()),No("onMonthChange")}Ly(),Jm(),Lh(),Un||"range"===e.config.mode||1!==e.config.showMonths?void 0!==e.selectedDateElem&&void 0===e.hourElement&&e.selectedDateElem&&e.selectedDateElem.focus():Bs(Wi),void 0!==e.hourElement&&void 0!==e.hourElement&&e.hourElement.focus(),e.config.closeOnSelect&&("single"===e.config.mode&&!e.config.enableTime||"range"===e.config.mode&&2===e.selectedDates.length&&!e.config.enableTime)&&Sb(),ci()}}e.parseDate=_b({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=$t,e._setHoursFromDate=je,e._positionCalendar=Dy,e.changeMonth=Cb,e.changeYear=ky,e.clear=function XL(_t,Dt){if(void 0===_t&&(_t=!0),void 0===Dt&&(Dt=!0),e.input.value="",void 0!==e.altInput&&(e.altInput.value=""),void 0!==e.mobileInput&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,!0===Dt&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),!0===e.config.enableTime){var fi=bb(e.config);Ye(fi.hours,fi.minutes,fi.seconds)}e.redraw(),_t&&No("onChange")},e.close=function ZL(){e.isOpen=!1,e.isMobile||(void 0!==e.calendarContainer&&e.calendarContainer.classList.remove("open"),void 0!==e._input&&e._input.classList.remove("active")),No("onClose")},e.onMouseOver=Ay,e._createElement=Fs,e.createDay=rs,e.destroy=function qL(){void 0!==e.config&&No("onDestroy");for(var _t=e._handlers.length;_t--;)e._handlers[_t].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var Dt=e.calendarContainer.parentNode;if(Dt.lastChild&&Dt.removeChild(Dt.lastChild),Dt.parentNode){for(;Dt.firstChild;)Dt.parentNode.insertBefore(Dt.firstChild,Dt);Dt.parentNode.removeChild(Dt)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(fi){try{delete e[fi]}catch{}})},e.isEnabled=Of,e.jumpToDate=kn,e.updateValue=Lh,e.open=function QL(_t,Dt){if(void 0===Dt&&(Dt=e._positionElement),!0===e.isMobile){if(_t){_t.preventDefault();var fi=pu(_t);fi&&fi.blur()}return void 0!==e.mobileInput&&(e.mobileInput.focus(),e.mobileInput.click()),void No("onOpen")}if(!e._input.disabled&&!e.config.inline){var Wi=e.isOpen;e.isOpen=!0,Wi||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),No("onOpen"),Dy(Dt)),!0===e.config.enableTime&&!0===e.config.noCalendar&&!1===e.config.allowInput&&(void 0===_t||!e.timeContainer.contains(_t.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}},e.redraw=Fw,e.set=function nO(_t,Dt){if(null!==_t&&"object"==typeof _t)for(var fi in Object.assign(e.config,_t),_t)void 0!==Iy[fi]&&Iy[fi].forEach(function(Wi){return Wi()});else e.config[_t]=Dt,void 0!==Iy[_t]?Iy[_t].forEach(function(Wi){return Wi()}):pb.indexOf(_t)>-1&&(e.config[_t]=gb(Dt));e.redraw(),Lh(!0)},e.setDate=function rO(_t,Dt,fi){if(void 0===Dt&&(Dt=!1),void 0===fi&&(fi=e.config.dateFormat),0!==_t&&!_t||_t instanceof Array&&0===_t.length)return e.clear(Dt);Nw(_t,fi),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),kn(void 0,Dt),je(),0===e.selectedDates.length&&e.clear(!1),Lh(Dt),Dt&&No("onChange")},e.toggle=function lO(_t){if(!0===e.isOpen)return e.close();e.open(_t)};var Iy={locale:[zw,Lw],showMonths:[Dw,z,Iw],minDate:[kn],maxDate:[kn],positionElement:[Hw],clickOpens:[function(){!0===e.config.clickOpens?($t(e._input,"focus",e.open),$t(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Nw(_t,Dt){var fi=[];if(_t instanceof Array)fi=_t.map(function(Wi){return e.parseDate(Wi,Dt)});else if(_t instanceof Date||"number"==typeof _t)fi=[e.parseDate(_t,Dt)];else if("string"==typeof _t)switch(e.config.mode){case"single":case"time":fi=[e.parseDate(_t,Dt)];break;case"multiple":fi=_t.split(e.config.conjunction).map(function(Wi){return e.parseDate(Wi,Dt)});break;case"range":fi=_t.split(e.l10n.rangeSeparator).map(function(Wi){return e.parseDate(Wi,Dt)})}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(_t)));e.selectedDates=e.config.allowInvalidPreload?fi:fi.filter(function(Wi){return Wi instanceof Date&&Of(Wi,!1)}),"range"===e.config.mode&&e.selectedDates.sort(function(Wi,Mn){return Wi.getTime()-Mn.getTime()})}function Yw(_t){return _t.slice().map(function(Dt){return"string"==typeof Dt||"number"==typeof Dt||Dt instanceof Date?e.parseDate(Dt,void 0,!0):Dt&&"object"==typeof Dt&&Dt.from&&Dt.to?{from:e.parseDate(Dt.from,void 0),to:e.parseDate(Dt.to,void 0)}:Dt}).filter(function(Dt){return Dt})}function Hw(){e._positionElement=e.config.positionElement||e._input}function No(_t,Dt){if(void 0!==e.config){var fi=e.config[_t];if(void 0!==fi&&fi.length>0)for(var Wi=0;fi[Wi]&&Wi<fi.length;Wi++)fi[Wi](e.selectedDates,e.input.value,e,Dt);"onChange"===_t&&(e.input.dispatchEvent(Tb("change")),e.input.dispatchEvent(Tb("input")))}}function Tb(_t){var Dt=document.createEvent("Event");return Dt.initEvent(_t,!0,!0),Dt}function kb(_t){for(var Dt=0;Dt<e.selectedDates.length;Dt++){var fi=e.selectedDates[Dt];if(fi instanceof Date&&0===fu(fi,_t))return""+Dt}return!1}function Ly(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(_t,Dt){var fi=new Date(e.currentYear,e.currentMonth,1);fi.setMonth(e.currentMonth+Dt),e.config.showMonths>1||"static"===e.config.monthSelectorType?e.monthElements[Dt].textContent=Ty(fi.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=fi.getMonth().toString(),_t.value=fi.getFullYear().toString()}),e._hidePrevMonthArrow=void 0!==e.config.minDate&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=void 0!==e.config.maxDate&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Mb(_t){var Dt=_t||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(fi){return e.formatDate(fi,Dt)}).filter(function(fi,Wi,Mn){return"range"!==e.config.mode||e.config.enableTime||Mn.indexOf(fi)===Wi}).join("range"!==e.config.mode?e.config.conjunction:e.l10n.rangeSeparator)}function Lh(_t){void 0===_t&&(_t=!0),void 0!==e.mobileInput&&e.mobileFormatStr&&(e.mobileInput.value=void 0!==e.latestSelectedDateObj?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Mb(e.config.dateFormat),void 0!==e.altInput&&(e.altInput.value=Mb(e.config.altFormat)),!1!==_t&&No("onValueUpdate")}function uO(_t){var Dt=pu(_t),fi=e.prevMonthNav.contains(Dt),Wi=e.nextMonthNav.contains(Dt);fi||Wi?Cb(fi?-1:1):e.yearElements.indexOf(Dt)>=0?Dt.select():Dt.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):Dt.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}return function l(){e.element=e.input=r,e.isOpen=!1,function eO(){var _t=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Dt=nc(nc({},JSON.parse(JSON.stringify(r.dataset||{}))),i),fi={};e.config.parseDate=Dt.parseDate,e.config.formatDate=Dt.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(Nr){e.config._enable=Yw(Nr)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(Nr){e.config._disable=Yw(Nr)}});var Wi="time"===Dt.mode;Dt.dateFormat||!Dt.enableTime&&!Wi||(fi.dateFormat=Dt.noCalendar||Wi?"H:i"+(Dt.enableSeconds?":S":""):(La.defaultConfig.dateFormat||qm.dateFormat)+" H:i"+(Dt.enableSeconds?":S":"")),Dt.altInput&&(Dt.enableTime||Wi)&&!Dt.altFormat&&(fi.altFormat=Dt.noCalendar||Wi?"h:i"+(Dt.enableSeconds?":S K":" K"):(La.defaultConfig.altFormat||qm.altFormat)+" h:i"+(Dt.enableSeconds?":S":"")+" K"),Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Pw("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Pw("max")});var ts=function(Nr){return function(to){e.config["min"===Nr?"_minTime":"_maxTime"]=e.parseDate(to,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:ts("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:ts("max")}),"time"===Dt.mode&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,fi,Dt);for(var cr=0;cr<_t.length;cr++)e.config[_t[cr]]=!0===e.config[_t[cr]]||"true"===e.config[_t[cr]];for(pb.filter(function(Nr){return void 0!==e.config[Nr]}).forEach(function(Nr){e.config[Nr]=gb(e.config[Nr]||[]).map(w)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&"single"===e.config.mode&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),cr=0;cr<e.config.plugins.length;cr++){var ds=e.config.plugins[cr](e)||{};for(var rr in ds)pb.indexOf(rr)>-1?e.config[rr]=gb(ds[rr]).map(w).concat(e.config[rr]):typeof Dt[rr]>"u"&&(e.config[rr]=ds[rr])}Dt.altInputClass||(e.config.altInputClass=Rw().className+" "+e.config.altInputClass),No("onParseConfig")}(),zw(),function oO(){e.input=Rw(),e.input?(e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Fs(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Hw()):e.config.errorHandler(new Error("Invalid input element specified"))}(),function sO(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var _t=e.config.defaultDate||("INPUT"!==e.input.nodeName&&"TEXTAREA"!==e.input.nodeName||!e.input.placeholder||e.input.value!==e.input.placeholder?e.input.value:null);_t&&Nw(_t,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),void 0!==e.config.minTime&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),void 0!==e.config.maxTime&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}(),function s(){e.utils={getDaysInMonth:function(_t,Dt){return void 0===_t&&(_t=e.currentMonth),void 0===Dt&&(Dt=e.currentYear),1===_t&&(Dt%4==0&&Dt%100!=0||Dt%400==0)?29:e.l10n.daysInMonth[_t]}}}(),e.isMobile||function eo(){var _t=window.document.createDocumentFragment();if(e.calendarContainer=Fs("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(_t.appendChild(function UL(){return e.monthNav=Fs("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Fs("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Fs("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Dw(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(_t){e.__hidePrevMonthArrow!==_t&&(vc(e.prevMonthNav,"flatpickr-disabled",_t),e.__hidePrevMonthArrow=_t)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(_t){e.__hideNextMonthArrow!==_t&&(vc(e.nextMonthNav,"flatpickr-disabled",_t),e.__hideNextMonthArrow=_t)}}),e.currentYearElement=e.yearElements[0],Ly(),e.monthNav}()),e.innerContainer=Fs("div","flatpickr-innerContainer"),e.config.weekNumbers){var Dt=function $L(){e.calendarContainer.classList.add("hasWeeks");var _t=Fs("div","flatpickr-weekwrapper");_t.appendChild(Fs("span","flatpickr-weekday",e.l10n.weekAbbreviation));var Dt=Fs("div","flatpickr-weeks");return _t.appendChild(Dt),{weekWrapper:_t,weekNumbers:Dt}}(),fi=Dt.weekWrapper,Wi=Dt.weekNumbers;e.innerContainer.appendChild(fi),e.weekNumbers=Wi,e.weekWrapper=fi}e.rContainer=Fs("div","flatpickr-rContainer"),e.rContainer.appendChild(Iw()),e.daysContainer||(e.daysContainer=Fs("div","flatpickr-days"),e.daysContainer.tabIndex=-1),Jm(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),_t.appendChild(e.innerContainer)}e.config.enableTime&&_t.appendChild(function WL(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var _t=bb(e.config);e.timeContainer=Fs("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var Dt=Fs("span","flatpickr-time-separator",":"),fi=Sy("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=fi.getElementsByTagName("input")[0];var Wi=Sy("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=Wi.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Bc(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?_t.hours:function oe(_t){switch(_t%24){case 0:case 12:return 12;default:return _t%12}}(_t.hours)),e.minuteElement.value=Bc(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():_t.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(fi),e.timeContainer.appendChild(Dt),e.timeContainer.appendChild(Wi),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var Mn=Sy("flatpickr-second");e.secondElement=Mn.getElementsByTagName("input")[0],e.secondElement.value=Bc(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():_t.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Fs("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(Mn)}return e.config.time_24hr||(e.amPM=Fs("span","flatpickr-am-pm",e.l10n.amPM[$u((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}()),vc(e.calendarContainer,"rangeMode","range"===e.config.mode),vc(e.calendarContainer,"animate",!0===e.config.animate),vc(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(_t);var Mn=void 0!==e.config.appendTo&&void 0!==e.config.appendTo.nodeType;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!Mn&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):void 0!==e.config.appendTo&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var Un=Fs("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(Un,e.element),Un.appendChild(e.element),e.altInput&&Un.appendChild(e.altInput),Un.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(void 0!==e.config.appendTo?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}(),function zi(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(fi){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+fi+"]"),function(Wi){return $t(Wi,"click",e[fi])})}),e.isMobile)!function aO(){var _t=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Fs("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=_t,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr="datetime-local"===_t?"Y-m-d\\TH:i:S":"date"===_t?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",void 0!==e.altInput&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}$t(e.mobileInput,"change",function(Dt){e.setDate(pu(Dt).value,!1,e.mobileFormatStr),No("onChange"),No("onClose")})}();else{var _t=Sw(JL,50);if(e._debouncedChange=Sw(ci,zL),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&$t(e.daysContainer,"mouseover",function(fi){"range"===e.config.mode&&Ay(pu(fi))}),$t(e._input,"keydown",Ow),void 0!==e.calendarContainer&&$t(e.calendarContainer,"keydown",Ow),!e.config.inline&&!e.config.static&&$t(window,"resize",_t),void 0!==window.ontouchstart?$t(window.document,"touchstart",Eb):$t(window.document,"mousedown",Eb),$t(window.document,"focus",Eb,{capture:!0}),!0===e.config.clickOpens&&($t(e._input,"focus",e.open),$t(e._input,"click",e.open)),void 0!==e.daysContainer&&($t(e.monthNav,"click",uO),$t(e.monthNav,["keyup","increment"],Wt),$t(e.daysContainer,"click",Bw)),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement){$t(e.timeContainer,["increment"],W),$t(e.timeContainer,"blur",W,{capture:!0}),$t(e.timeContainer,"click",xr),$t([e.hourElement,e.minuteElement],["focus","click"],function(fi){return pu(fi).select()}),void 0!==e.secondElement&&$t(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),void 0!==e.amPM&&$t(e.amPM,"click",function(fi){W(fi)})}e.config.allowInput&&$t(e._input,"blur",KL)}}(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&je(e.config.noCalendar?e.latestSelectedDateObj:void 0),Lh(!1)),z();var _t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&_t&&Dy(),No("onReady")}(),e}function Km(r,i){for(var e=Array.prototype.slice.call(r).filter(function(w){return w instanceof HTMLElement}),s=[],l=0;l<e.length;l++){var f=e[l];try{if(null!==f.getAttribute("data-fp-omit"))continue;void 0!==f._flatpickr&&(f._flatpickr.destroy(),f._flatpickr=void 0),f._flatpickr=FL(f,i||{}),s.push(f._flatpickr)}catch(w){console.error(w)}}return 1===s.length?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(r){return Km(this,r)},HTMLElement.prototype.flatpickr=function(r){return Km([this],r)});var La=function(r,i){return"string"==typeof r?Km(window.document.querySelectorAll(r),i):r instanceof Node?Km([r],i):Km(r,i)};La.defaultConfig={},La.l10ns={en:nc({},mb),default:nc({},mb)},La.localize=function(r){La.l10ns.default=nc(nc({},La.l10ns.default),r)},La.setDefaults=function(r){La.defaultConfig=nc(nc({},La.defaultConfig),r)},La.parseDate=_b({}),La.formatDate=kw({}),La.compareDates=fu,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(r){return Km(this,r)}),Date.prototype.fp_incr=function(r){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof r?parseInt(r,10):r))},typeof window<"u"&&(window.flatpickr=La);const BL=La;let xb=(()=>{class r{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.wxM({token:r,factory:r.\u0275fac}),r})();const NL={provide:V.Y6,useExisting:(0,t.wd)(()=>YL),multi:!0};let YL=(()=>{class r{constructor(e,s,l){this.elm=e,this.defaults=s,this.renderer=l,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new t._w7,this.flatpickrChange=new t._w7,this.flatpickrValueUpdate=new t._w7,this.flatpickrOpen=new t._w7,this.flatpickrClose=new t._w7,this.flatpickrMonthChange=new t._w7,this.flatpickrYearChange=new t._w7,this.flatpickrDayCreate=new t._w7,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const e={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(s,l,f)=>{this.flatpickrChange.emit({selectedDates:s,dateString:l,instance:f})},onOpen:(s,l,f)=>{this.flatpickrOpen.emit({selectedDates:s,dateString:l,instance:f})},onClose:(s,l,f)=>{this.flatpickrClose.emit({selectedDates:s,dateString:l,instance:f})},onMonthChange:(s,l,f)=>{this.flatpickrMonthChange.emit({selectedDates:s,dateString:l,instance:f})},onYearChange:(s,l,f)=>{this.flatpickrYearChange.emit({selectedDates:s,dateString:l,instance:f})},onReady:(s,l,f)=>{this.flatpickrReady.emit({selectedDates:s,dateString:l,instance:f})},onValueUpdate:(s,l,f)=>{this.flatpickrValueUpdate.emit({selectedDates:s,dateString:l,instance:f})},onDayCreate:(s,l,f,w)=>{this.flatpickrDayCreate.emit({selectedDates:s,dateString:l,instance:f,dayElement:w})}};Object.keys(e).forEach(s=>{typeof e[s]>"u"&&(e[s]=typeof this.options[s]<"u"?this.options[s]:this.defaults[s])}),e.time_24hr=e.time24hr,e.altInputClass=(e.altInputClass||"")+" "+this.elm.nativeElement.className,e.enable||delete e.enable,this.instance=BL(this.elm.nativeElement,e),this.setDisabledState(this.isDisabled)}ngOnChanges(e){this.instance&&Object.keys(e).forEach(s=>{this.instance.set(s,this[s])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(e){let s=e;this.convertModelValue&&"range"===this.mode&&e&&(s=[e.from,e.to]),this.instance?this.instance.setDate(s):this.initialValue=s}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const e=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof e)switch(this.mode){case"multiple":const s=e.split("; ").map(w=>this.instance.parseDate(w,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(s);break;case"range":const[l,f]=e.split(this.instance.l10n.rangeSeparator).map(w=>this.instance.parseDate(w,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:l,to:f});break;default:this.onChangeFn(this.instance.parseDate(e,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(e)}}return r.\u0275fac=function(e){return new(e||r)(t.GI1(t.GMv),t.GI1(xb),t.GI1(t.q87))},r.\u0275dir=t.Sc5({type:r,selectors:[["","mwlFlatpickr",""]],hostBindings:function(e,s){1&e&&t.qCj("blur",function(){return s.onTouchedFn()})("input",function(){return s.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[t.M5G([NL]),t.SYr]}),r})();const Aw=new t.UbH("flatpickr defaults");function HL(r){const i=new xb;return Object.assign(i,r),i}let VL=(()=>{class r{static forRoot(e={}){return{ngModule:r,providers:[{provide:Aw,useValue:e},{provide:xb,useFactory:HL,deps:[Aw]}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.a4G({type:r}),r.\u0275inj=t.s3X({}),r})(),GL=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=t.a4G({type:r});static#i=this.\u0275inj=t.s3X({imports:[Ge.MD,zT.k,tC,en.Uf.forRoot(),V.y,V.sl,nt.rO.forRoot(),_n.f8.forRoot(),bL.C.forRoot(),S2,BT.S,pr.as.forRoot(),tL,Ml,wL.forRoot(),_c.gb,E2,KI,xT,yL,I.SO.forRoot(),CL.iU.forRoot(),iL,IL.forRoot(),FT,VL.forRoot(),Qw]})}return r})()},968:(oo,Yr,Rt)=>{"use strict";Rt.r(Yr),Rt.d(Yr,{PagesModule:()=>De});var k=Rt(1368),pn=Rt(2308),Fe=Rt(4496);const t=[{path:"",loadChildren:()=>Promise.resolve().then(Rt.bind(Rt,7674)).then(Be=>Be.CustomPagesModule)},{path:"pages",loadChildren:()=>Rt.e(228).then(Rt.bind(Rt,4848)).then(Be=>Be.ExtrapagesModule)}];let V=(()=>{class Be{static#e=this.\u0275fac=function(nt){return new(nt||Be)};static#t=this.\u0275mod=Fe.a4G({type:Be});static#i=this.\u0275inj=Fe.s3X({imports:[pn.qQ.forChild(t),pn.qQ]})}return Be})();var Oe=Rt(9280),Me=Rt(7674);let De=(()=>{class Be{static#e=this.\u0275fac=function(nt){return new(nt||Be)};static#t=this.\u0275mod=Fe.a4G({type:Be});static#i=this.\u0275inj=Fe.s3X({imports:[k.MD,V,Oe.k,Me.CustomPagesModule]})}return Be})()},6708:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{O:()=>Fe});var k=Rt(4496);function pn(t,V){if(1&t&&(k.I0R(0,"li",6),k.OEk(1),k.C$Y()),2&t){const Oe=V.$implicit;k.yG2(),k.cNF(Oe.label)}}let Fe=(()=>{class t{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(Me){return new(Me||t)};static#t=this.\u0275cmp=k.In1({type:t,selectors:[["app-breadcrumbs"]],inputs:{title:"title",breadcrumbItems:"breadcrumbItems"},decls:9,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item","active"],["class","breadcrumb-item active"]],template:function(Me,De){1&Me&&(k.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),k.OEk(4),k.C$Y(),k.I0R(5,"div",4)(6,"ol",5),k.c53(7,pn,2,1,"li",7,k.wJt),k.C$Y()()()()()),2&Me&&(k.yG2(4),k.cNF(De.title),k.yG2(3),k.oho(De.breadcrumbItems))}})}return t})()},9280:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{k:()=>Fe});var k=Rt(1368),pn=Rt(4496);let Fe=(()=>{class t{static#e=this.\u0275fac=function(Me){return new(Me||t)};static#t=this.\u0275mod=pn.a4G({type:t});static#i=this.\u0275inj=pn.s3X({imports:[k.MD]})}return t})()},2164:(oo,Yr,Rt)=>{"use strict";var k;function pn(le,o){var c=Object.keys(le);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(le);o&&(h=h.filter(function(_){return Object.getOwnPropertyDescriptor(le,_).enumerable})),c.push.apply(c,h)}return c}function Fe(le){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?pn(Object(c),!0).forEach(function(h){De(le,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(c)):pn(Object(c)).forEach(function(h){Object.defineProperty(le,h,Object.getOwnPropertyDescriptor(c,h))})}return le}function t(le){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(le)}function V(le,o){if(!(le instanceof o))throw new TypeError("Cannot call a class as a function")}function Oe(le,o){for(var c=0;c<o.length;c++){var h=o[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(le,h.key,h)}}function Me(le,o,c){return o&&Oe(le.prototype,o),c&&Oe(le,c),le}function De(le,o,c){return o in le?Object.defineProperty(le,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):le[o]=c,le}function Be(le,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(o&&o.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),o&&Je(le,o)}function Ge(le){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(le)}function Je(le,o){return(Je=Object.setPrototypeOf||function(c,h){return c.__proto__=h,c})(le,o)}function nt(le){if(void 0===le)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function mt(le){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var c,h=Ge(le);if(o){var _=Ge(this).constructor;c=Reflect.construct(h,arguments,_)}else c=h.apply(this,arguments);return function(b,x){if(x&&("object"==typeof x||"function"==typeof x))return x;if(void 0!==x)throw new TypeError("Derived constructors may only return object or undefined");return nt(b)}(this,c)}}function Pt(le,o){return function(c){if(Array.isArray(c))return c}(le)||function(c,h){var _=null==c?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(null!=_){var b,x,M=[],I=!0,F=!1;try{for(_=_.call(c);!(I=(b=_.next()).done)&&(M.push(b.value),!h||M.length!==h);I=!0);}catch(U){F=!0,x=U}finally{try{I||null==_.return||_.return()}finally{if(F)throw x}}return M}}(le,o)||vt(le,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(le){return function(o){if(Array.isArray(o))return wt(o)}(le)||function(o){if(typeof Symbol<"u"&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(le)||vt(le)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(le,o){if(le){if("string"==typeof le)return wt(le,o);var c=Object.prototype.toString.call(le).slice(8,-1);return"Object"===c&&le.constructor&&(c=le.constructor.name),"Map"===c||"Set"===c?Array.from(le):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?wt(le,o):void 0}}function wt(le,o){(null==o||o>le.length)&&(o=le.length);for(var c=0,h=new Array(o);c<o;c++)h[c]=le[c];return h}function ai(le,o){var c=typeof Symbol<"u"&&le[Symbol.iterator]||le["@@iterator"];if(!c){if(Array.isArray(le)||(c=vt(le))||o&&le&&"number"==typeof le.length){c&&(le=c);var h=0,_=function(){};return{s:_,n:function(){return h>=le.length?{done:!0}:{done:!1,value:le[h++]}},e:function(I){throw I},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b,x=!0,M=!1;return{s:function(){c=c.call(le)},n:function(){var I=c.next();return x=I.done,I},e:function(I){M=!0,b=I},f:function(){try{x||null==c.return||c.return()}finally{if(M)throw b}}}}var We=function(){function le(){V(this,le)}return Me(le,[{key:"shadeRGBColor",value:function(o,c){var h=c.split(","),_=o<0?0:255,b=o<0?-1*o:o,x=parseInt(h[0].slice(4),10),M=parseInt(h[1],10),I=parseInt(h[2],10);return"rgb("+(Math.round((_-x)*b)+x)+","+(Math.round((_-M)*b)+M)+","+(Math.round((_-I)*b)+I)+")"}},{key:"shadeHexColor",value:function(o,c){var h=parseInt(c.slice(1),16),_=o<0?0:255,b=o<0?-1*o:o,x=h>>16,M=h>>8&255,I=255&h;return"#"+(16777216+65536*(Math.round((_-x)*b)+x)+256*(Math.round((_-M)*b)+M)+(Math.round((_-I)*b)+I)).toString(16).slice(1)}},{key:"shadeColor",value:function(o,c){return le.isColorHex(c)?this.shadeHexColor(o,c):this.shadeRGBColor(o,c)}}],[{key:"bind",value:function(o,c){return function(){return o.apply(c,arguments)}}},{key:"isObject",value:function(o){return o&&"object"===t(o)&&!Array.isArray(o)&&null!=o}},{key:"is",value:function(o,c){return Object.prototype.toString.call(c)==="[object "+o+"]"}},{key:"listToArray",value:function(o){var c,h=[];for(c=0;c<o.length;c++)h[c]=o[c];return h}},{key:"extend",value:function(o,c){var h=this;"function"!=typeof Object.assign&&(Object.assign=function(b){if(null==b)throw new TypeError("Cannot convert undefined or null to object");for(var x=Object(b),M=1;M<arguments.length;M++){var I=arguments[M];if(null!=I)for(var F in I)I.hasOwnProperty(F)&&(x[F]=I[F])}return x});var _=Object.assign({},o);return this.isObject(o)&&this.isObject(c)&&Object.keys(c).forEach(function(b){h.isObject(c[b])&&b in o?_[b]=h.extend(o[b],c[b]):Object.assign(_,De({},b,c[b]))}),_}},{key:"extendArray",value:function(o,c){var h=[];return o.map(function(_){h.push(le.extend(c,_))}),h}},{key:"monthMod",value:function(o){return o%12}},{key:"clone",value:function(o){if(le.is("Array",o)){for(var c=[],h=0;h<o.length;h++)c[h]=this.clone(o[h]);return c}if(le.is("Null",o))return null;if(le.is("Date",o))return o;if("object"===t(o)){var _={};for(var b in o)o.hasOwnProperty(b)&&(_[b]=this.clone(o[b]));return _}return o}},{key:"log10",value:function(o){return Math.log(o)/Math.LN10}},{key:"roundToBase10",value:function(o){return Math.pow(10,Math.floor(Math.log10(o)))}},{key:"roundToBase",value:function(o,c){return Math.pow(c,Math.floor(Math.log(o)/Math.log(c)))}},{key:"parseNumber",value:function(o){return null===o?o:parseFloat(o)}},{key:"stripNumber",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(o)?o:parseFloat(o.toPrecision(c))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(o){var c=String(o).split(/[eE]/);if(1===c.length)return c[0];var h="",_=o<0?"-":"",b=c[0].replace(".",""),x=Number(c[1])+1;if(x<0){for(h=_+"0.";x++;)h+="0";return h+b.replace(/^-/,"")}for(x-=b.length;x--;)h+="0";return b+h}},{key:"getDimensions",value:function(o){var c=getComputedStyle(o,null),h=o.clientHeight,_=o.clientWidth;return h-=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),[_-=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),h]}},{key:"getBoundingClientRect",value:function(o){var c=o.getBoundingClientRect();return{top:c.top,right:c.right,bottom:c.bottom,left:c.left,width:o.clientWidth,height:o.clientHeight,x:c.left,y:c.top}}},{key:"getLargestStringFromArr",value:function(o){return o.reduce(function(c,h){return Array.isArray(h)&&(h=h.reduce(function(_,b){return _.length>b.length?_:b})),c.length>h.length?c:h},0)}},{key:"hexToRgba",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==o.substring(0,1)&&(o="#999999");var h=o.replace("#","");h=h.match(new RegExp("(.{"+h.length/3+"})","g"));for(var _=0;_<h.length;_++)h[_]=parseInt(1===h[_].length?h[_]+h[_]:h[_],16);return void 0!==c&&h.push(c),"rgba("+h.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(o){return parseFloat(o.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(o){return(o=o.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===o.length?"#"+("0"+parseInt(o[1],10).toString(16)).slice(-2)+("0"+parseInt(o[2],10).toString(16)).slice(-2)+("0"+parseInt(o[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(o){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(o)}},{key:"getPolygonPos",value:function(o,c){for(var h=[],_=2*Math.PI/c,b=0;b<c;b++){var x={};x.x=o*Math.sin(b*_),x.y=-o*Math.cos(b*_),h.push(x)}return h}},{key:"polarToCartesian",value:function(o,c,h,_){var b=(_-90)*Math.PI/180;return{x:o+h*Math.cos(b),y:c+h*Math.sin(b)}}},{key:"escapeString",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return o.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,c)}},{key:"negToZero",value:function(o){return o<0?0:o}},{key:"moveIndexInArray",value:function(o,c,h){if(h>=o.length)for(var _=h-o.length+1;_--;)o.push(void 0);return o.splice(h,0,o.splice(c,1)[0]),o}},{key:"extractNumber",value:function(o){return parseFloat(o.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(o,c){for(;(o=o.parentElement)&&!o.classList.contains(c););return o}},{key:"setELstyles",value:function(o,c){for(var h in c)c.hasOwnProperty(h)&&(o.style.key=c[h])}},{key:"isNumber",value:function(o){return!isNaN(o)&&parseFloat(Number(o))===o&&!isNaN(parseInt(o,10))}},{key:"isFloat",value:function(o){return Number(o)===o&&o%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var o=window.navigator.userAgent,c=o.indexOf("MSIE ");if(c>0)return parseInt(o.substring(c+5,o.indexOf(".",c)),10);if(o.indexOf("Trident/")>0){var h=o.indexOf("rv:");return parseInt(o.substring(h+3,o.indexOf(".",h)),10)}var _=o.indexOf("Edge/");return _>0&&parseInt(o.substring(_+5,o.indexOf(".",_)),10)}},{key:"getGCD",value:function(o,c){var _=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(o,c))));for(o=Math.round(Math.abs(o)*_),c=Math.round(Math.abs(c)*_);c;){var b=c;c=o%c,o=b}return o/_}},{key:"getPrimeFactors",value:function(o){for(var c=[],h=2;o>=2;)o%h==0?(c.push(h),o/=h):h++;return c}},{key:"mod",value:function(o,c){var _=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(o,c))));return(o=Math.round(Math.abs(o)*_))%(c=Math.round(Math.abs(c)*_))/_}}]),le}(),ni=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.setEasingFunctions()}return Me(le,[{key:"setEasingFunctions",value:function(){var o;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":o="-";break;case"easein":o="<";break;case"easeout":o=">";break;case"easeinout":default:o="<>";break;case"swing":o=function(c){var h=1.70158;return(c-=1)*c*((h+1)*c+h)+1};break;case"bounce":o=function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375};break;case"elastic":o=function(c){return c===!!c?c:Math.pow(2,-10*c)*Math.sin((c-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=o}}},{key:"animateLine",value:function(o,c,h,_){o.attr(c).animate(_).attr(h)}},{key:"animateMarker",value:function(o,c,h,_,b,x){c||(c=0),o.attr({r:c,width:c,height:c}).animate(_,b).attr({r:h,width:h.width,height:h.height}).afterAll(function(){x()})}},{key:"animateCircle",value:function(o,c,h,_,b){o.attr({r:c.r,cx:c.cx,cy:c.cy}).animate(_,b).attr({r:h.r,cx:h.cx,cy:h.cy})}},{key:"animateRect",value:function(o,c,h,_,b){o.attr(c).animate(_).attr(h).afterAll(function(){return b()})}},{key:"animatePathsGradually",value:function(o){var U=this.w,$=0;U.config.chart.animations.animateGradually.enabled&&($=U.config.chart.animations.animateGradually.delay),U.config.chart.animations.dynamicAnimation.enabled&&U.globals.dataChanged&&"bar"!==U.config.chart.type&&($=0),this.morphSVG(o.el,o.realIndex,o.j,"line"!==U.config.chart.type||U.globals.comboCharts?o.fill:"stroke",o.pathFrom,o.pathTo,o.speed,o.delay*$)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(o){var c=o.el;c.classList.remove("apexcharts-element-hidden"),c.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(o){var c=this.w;c.globals.animationEnded||(c.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof c.config.chart.events.animationEnd&&c.config.chart.events.animationEnd(this.ctx,{el:o,w:c}))}},{key:"morphSVG",value:function(o,c,h,_,b,x,M,I){var F=this,U=this.w;b||(b=o.attr("pathFrom")),x||(x=o.attr("pathTo"));var $=function(q){return"radar"===U.config.chart.type&&(M=1),"M 0 ".concat(U.globals.gridHeight)};(!b||b.indexOf("undefined")>-1||b.indexOf("NaN")>-1)&&(b=$()),(!x||x.indexOf("undefined")>-1||x.indexOf("NaN")>-1)&&(x=$()),U.globals.shouldAnimate||(M=1),o.plot(b).animate(1,U.globals.easing,I).plot(b).animate(M,U.globals.easing,I).plot(x).afterAll(function(){We.isNumber(h)?h===U.globals.series[U.globals.maxValsInArrayIndex].length-2&&U.globals.shouldAnimate&&F.animationCompleted(o):"none"!==_&&U.globals.shouldAnimate&&(!U.globals.comboCharts&&c===U.globals.series.length-1||U.globals.comboCharts)&&F.animationCompleted(o),F.showDelayedElements()})}}]),le}(),li=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"getDefaultFilter",value:function(o,c){var h=this.w;o.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==h.config.states.normal.filter?this.applyFilter(o,c,h.config.states.normal.filter.type,h.config.states.normal.filter.value):h.config.chart.dropShadow.enabled&&this.dropShadow(o,h.config.chart.dropShadow,c)}},{key:"addNormalFilter",value:function(o,c){var h=this.w;h.config.chart.dropShadow.enabled&&!o.node.classList.contains("apexcharts-marker")&&this.dropShadow(o,h.config.chart.dropShadow,c)}},{key:"addLightenFilter",value:function(o,c,h){var _=this,b=this.w,x=h.intensity;o.unfilter(!0),new window.SVG.Filter,o.filter(function(M){var I=b.config.chart.dropShadow;(I.enabled?_.addShadow(M,c,I):M).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:x}})}),o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)}},{key:"addDarkenFilter",value:function(o,c,h){var _=this,b=this.w,x=h.intensity;o.unfilter(!0),new window.SVG.Filter,o.filter(function(M){var I=b.config.chart.dropShadow;(I.enabled?_.addShadow(M,c,I):M).componentTransfer({rgb:{type:"linear",slope:x}})}),o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)}},{key:"applyFilter",value:function(o,c,h){var _=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(h){case"none":this.addNormalFilter(o,c);break;case"lighten":this.addLightenFilter(o,c,{intensity:_});break;case"darken":this.addDarkenFilter(o,c,{intensity:_})}}},{key:"addShadow",value:function(o,c,h){var _,b=this.w,x=h.blur,M=h.top,I=h.left,F=h.color,U=h.opacity;if((null===(_=b.config.chart.dropShadow.enabledOnSeries)||void 0===_?void 0:_.length)>0&&-1===b.config.chart.dropShadow.enabledOnSeries.indexOf(c))return o;var $=o.flood(Array.isArray(F)?F[c]:F,U).composite(o.sourceAlpha,"in").offset(I,M).gaussianBlur(x).merge(o.source);return o.blend(o.source,$)}},{key:"dropShadow",value:function(o,c){var h,_,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=c.top,M=c.left,I=c.blur,F=c.color,U=c.opacity,$=c.noUserSpaceOnUse,q=this.w;return o.unfilter(!0),We.isIE()&&"radialBar"===q.config.chart.type||(null===(h=q.config.chart.dropShadow.enabledOnSeries)||void 0===h?void 0:h.length)>0&&-1===(null===(_=q.config.chart.dropShadow.enabledOnSeries)||void 0===_?void 0:_.indexOf(b))||(F=Array.isArray(F)?F[b]:F,o.filter(function(ne){var de;de=We.isSafari()||We.isFirefox()||We.isIE()?ne.flood(F,U).composite(ne.sourceAlpha,"in").offset(M,x).gaussianBlur(I):ne.flood(F,U).composite(ne.sourceAlpha,"in").offset(M,x).gaussianBlur(I).merge(ne.source),ne.blend(ne.source,de)}),$||o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)),o}},{key:"setSelectionFilter",value:function(o,c,h){var _=this.w;if(void 0!==_.globals.selectedDataPoints[c]&&_.globals.selectedDataPoints[c].indexOf(h)>-1){o.node.setAttribute("selected",!0);var b=_.config.states.active.filter;"none"!==b&&this.applyFilter(o,c,b.type,b.value)}}},{key:"_scaleFilterSize",value:function(o){!function(c){for(var h in c)c.hasOwnProperty(h)&&o.setAttribute(h,c[h])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),le}(),at=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"roundPathCorners",value:function(o,c){function h(Ze,kt,It){var ii=kt.x-Ze.x,wi=kt.y-Ze.y,Mi=Math.sqrt(ii*ii+wi*wi);return _(Ze,kt,Math.min(1,It/Mi))}function _(Ze,kt,It){return{x:Ze.x+(kt.x-Ze.x)*It,y:Ze.y+(kt.y-Ze.y)*It}}function b(Ze,kt){Ze.length>2&&(Ze[Ze.length-2]=kt.x,Ze[Ze.length-1]=kt.y)}function x(Ze){return{x:parseFloat(Ze[Ze.length-2]),y:parseFloat(Ze[Ze.length-1])}}o.indexOf("NaN")>-1&&(o="");var M=o.split(/[,\s]/).reduce(function(Ze,kt){var It=kt.match("([a-zA-Z])(.+)");return It?(Ze.push(It[1]),Ze.push(It[2])):Ze.push(kt),Ze},[]).reduce(function(Ze,kt){return parseFloat(kt)==kt&&Ze.length?Ze[Ze.length-1].push(kt):Ze.push([kt]),Ze},[]),I=[];if(M.length>1){var F=x(M[0]),U=null;"Z"==M[M.length-1][0]&&M[0].length>2&&(M[M.length-1]=U=["L",F.x,F.y]),I.push(M[0]);for(var $=1;$<M.length;$++){var q=I[I.length-1],ne=M[$],de=ne==U?M[1]:M[$+1];if(de&&q&&q.length>2&&"L"==ne[0]&&de.length>2&&"L"==de[0]){var ge,we,me=x(q),Se=x(ne),N=x(de);ge=h(Se,me,c),we=h(Se,N,c),b(ne,ge),ne.origPoint=Se,I.push(ne);var Q=_(ge,Se,.5),pe=_(Se,we,.5),xe=["C",Q.x,Q.y,pe.x,pe.y,we.x,we.y];xe.origPoint=Se,I.push(xe)}else I.push(ne)}if(U){var Le=x(I[I.length-1]);I.push(["Z"]),b(I[0],Le)}}else I=M;return I.reduce(function(Ze,kt){return Ze+kt.join(" ")+" "},"")}},{key:"drawLine",value:function(o,c,h,_){var b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:o,y1:c,x2:h,y2:_,stroke:b,"stroke-dasharray":x,"stroke-width":M,"stroke-linecap":I})}},{key:"drawRect",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,F=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,U=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,$=this.w.globals.dom.Paper.rect();return $.attr({x:o,y:c,width:h>0?h:0,height:_>0?_:0,rx:b,ry:b,opacity:M,"stroke-width":null!==I?I:0,stroke:null!==F?F:"none","stroke-dasharray":U}),$.node.setAttribute("fill",x),$}},{key:"drawPolygon",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(o).attr({fill:_,stroke:c,"stroke-width":h})}},{key:"drawCircle",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o<0&&(o=0);var h=this.w.globals.dom.Paper.circle(2*o);return null!==c&&h.attr(c),h}},{key:"drawPath",value:function(o){var c=o.d,h=void 0===c?"":c,_=o.stroke,b=void 0===_?"#a8a8a8":_,x=o.strokeWidth,M=void 0===x?1:x,I=o.fill,F=o.fillOpacity,U=void 0===F?1:F,$=o.strokeOpacity,q=void 0===$?1:$,ne=o.classes,de=o.strokeLinecap,ge=void 0===de?null:de,we=o.strokeDashArray,me=void 0===we?0:we,Se=this.w;return null===ge&&(ge=Se.config.stroke.lineCap),(h.indexOf("undefined")>-1||h.indexOf("NaN")>-1)&&(h="M 0 ".concat(Se.globals.gridHeight)),Se.globals.dom.Paper.path(h).attr({fill:I,"fill-opacity":U,stroke:b,"stroke-opacity":q,"stroke-linecap":ge,"stroke-width":M,"stroke-dasharray":me,class:ne})}},{key:"group",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=this.w.globals.dom.Paper.group();return null!==o&&c.attr(o),c}},{key:"move",value:function(o,c){return["M",o,c].join(" ")}},{key:"line",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=null;return null===h?_=[" L",o,c].join(" "):"H"===h?_=[" H",o].join(" "):"V"===h&&(_=[" V",c].join(" ")),_}},{key:"curve",value:function(o,c,h,_,b,x){return["C",o,c,h,_,b,x].join(" ")}},{key:"quadraticCurve",value:function(o,c,h,_){return["Q",o,c,h,_].join(" ")}},{key:"arc",value:function(o,c,h,_,b,x,M){var I="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(I="a"),[I,o,c,h,_,b,x,M].join(" ")}},{key:"renderPaths",value:function(o){var c,h=o.j,_=o.realIndex,b=o.pathFrom,x=o.pathTo,M=o.stroke,I=o.strokeWidth,F=o.strokeLinecap,U=o.fill,$=o.animationDelay,q=o.initialSpeed,ne=o.dataChangeSpeed,de=o.className,ge=o.shouldClipToGrid,we=void 0===ge||ge,me=o.bindEventsOnPaths,Se=void 0===me||me,N=o.drawShadow,Q=void 0===N||N,pe=this.w,xe=new li(this.ctx),Le=new ni(this.ctx),Ze=this.w.config.chart.animations.enabled,kt=Ze&&this.w.config.chart.animations.dynamicAnimation.enabled,It=!!(Ze&&!pe.globals.resized||kt&&pe.globals.dataChanged&&pe.globals.shouldAnimate);It?c=b:(c=x,pe.globals.animationEnded=!0);var wi,ii=pe.config.stroke.dashArray;wi=Array.isArray(ii)?ii[_]:pe.config.stroke.dashArray;var Mi=this.drawPath({d:c,stroke:M,strokeWidth:I,fill:U,fillOpacity:1,classes:de,strokeLinecap:F,strokeDashArray:wi});Mi.attr("index",_),we&&Mi.attr({"clip-path":"url(#gridRectMask".concat(pe.globals.cuid,")")}),"none"!==pe.config.states.normal.filter.type?xe.getDefaultFilter(Mi,_):pe.config.chart.dropShadow.enabled&&Q&&xe.dropShadow(Mi,pe.config.chart.dropShadow,_),Se&&(Mi.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,Mi)),Mi.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,Mi)),Mi.node.addEventListener("mousedown",this.pathMouseDown.bind(this,Mi))),Mi.attr({pathTo:x,pathFrom:b});var En={el:Mi,j:h,realIndex:_,pathFrom:b,pathTo:x,fill:U,strokeWidth:I,delay:$};return!Ze||pe.globals.resized||pe.globals.dataChanged?!pe.globals.resized&&pe.globals.dataChanged||Le.showDelayedElements():Le.animatePathsGradually(Fe(Fe({},En),{},{speed:q})),pe.globals.dataChanged&&kt&&It&&Le.animatePathsGradually(Fe(Fe({},En),{},{speed:ne})),Mi}},{key:"drawPattern",value:function(o,c,h){var _=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(c,h,function(x){"horizontalLines"===o?x.line(0,0,h,0).stroke({color:_,width:b+1}):"verticalLines"===o?x.line(0,0,0,c).stroke({color:_,width:b+1}):"slantedLines"===o?x.line(0,0,c,h).stroke({color:_,width:b}):"squares"===o?x.rect(c,h).fill("none").stroke({color:_,width:b}):"circles"===o&&x.circle(c).fill("none").stroke({color:_,width:b})})}},{key:"drawGradient",value:function(o,c,h,_,b){var x,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,F=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,U=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,$=this.w;c.length<9&&0===c.indexOf("#")&&(c=We.hexToRgba(c,_)),h.length<9&&0===h.indexOf("#")&&(h=We.hexToRgba(h,b));var q=0,ne=1,de=1,ge=null;null!==I&&(q=void 0!==I[0]?I[0]/100:0,ne=void 0!==I[1]?I[1]/100:1,de=void 0!==I[2]?I[2]/100:1,ge=void 0!==I[3]?I[3]/100:null);var we=!("donut"!==$.config.chart.type&&"pie"!==$.config.chart.type&&"polarArea"!==$.config.chart.type&&"bubble"!==$.config.chart.type);return x=$.globals.dom.Paper.gradient(we?"radial":"linear",null===F||0===F.length?function(N){N.at(q,c,_),N.at(ne,h,b),N.at(de,h,b),null!==ge&&N.at(ge,c,_)}:function(N){(Array.isArray(F[U])?F[U]:F).forEach(function(Q){N.at(Q.offset/100,Q.color,Q.opacity)})}),we?x.attr("bubble"!==$.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:$.globals.gridWidth/2,cy:$.globals.gridHeight/2,r:M}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===o?x.from(0,0).to(0,1):"diagonal"===o?x.from(0,0).to(1,1):"horizontal"===o?x.from(0,1).to(1,1):"diagonal2"===o&&x.from(1,0).to(0,1),x}},{key:"getTextBasedOnMaxWidth",value:function(o){var c=o.text,h=o.maxWidth,x=this.getTextRects(c,o.fontSize,o.fontFamily),I=Math.floor(h/(x.width/c.length));return h<x.width?c.slice(0,I-3)+"...":c}},{key:"drawText",value:function(o){var c=this,h=o.x,_=o.y,b=o.text,x=o.textAnchor,M=o.fontSize,I=o.fontFamily,F=o.fontWeight,U=o.foreColor,$=o.opacity,q=o.maxWidth,ne=o.cssClass,de=void 0===ne?"":ne,ge=o.isPlainText,we=void 0===ge||ge,me=o.dominantBaseline,Se=void 0===me?"auto":me,N=this.w;void 0===b&&(b="");var Q=b;x||(x="start"),U&&U.length||(U=N.config.chart.foreColor),F=F||"regular";var pe,xe={maxWidth:q,fontSize:M=M||"11px",fontFamily:I=I||N.config.chart.fontFamily};return Array.isArray(b)?pe=N.globals.dom.Paper.text(function(Le){for(var Ze=0;Ze<b.length;Ze++)Q=b[Ze],q&&(Q=c.getTextBasedOnMaxWidth(Fe({text:b[Ze]},xe))),0===Ze?Le.tspan(Q):Le.tspan(Q).newLine()}):(q&&(Q=this.getTextBasedOnMaxWidth(Fe({text:b},xe))),pe=we?N.globals.dom.Paper.plain(b):N.globals.dom.Paper.text(function(Le){return Le.tspan(Q)})),pe.attr({x:h,y:_,"text-anchor":x,"dominant-baseline":Se,"font-size":M,"font-family":I,"font-weight":F,fill:U,class:"apexcharts-text "+de}),pe.node.style.fontFamily=I,pe.node.style.opacity=$,pe}},{key:"createGroupWithAttributes",value:function(o,c,h,_){var b=this.group();return h.forEach(function(x){return b.add(x)}),b.attr({class:_.class?_.class:"",cy:c,cx:o}),b}},{key:"drawPlus",value:function(o,c,h,_){var b=h/2,x=this.drawLine(o,c-b,o,c+b,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap),M=this.drawLine(o-b,c,o+b,c,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap);return this.createGroupWithAttributes(o,c,[x,M],_)}},{key:"drawX",value:function(o,c,h,_){var b=h/2,x=this.drawLine(o-b,c-b,o+b,c+b,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap),M=this.drawLine(o-b,c+b,o+b,c-b,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap);return this.createGroupWithAttributes(o,c,[x,M],_)}},{key:"drawMarker",value:function(o,c,h){o=o||0;var _=h.pSize||0,b=null;if("X"===h?.shape||"x"===h?.shape)b=this.drawX(o,c,_,h);else if("plus"===h?.shape||"+"===h?.shape)b=this.drawPlus(o,c,_,h);else if("square"===h.shape||"rect"===h.shape){var x=void 0===h.pRadius?_/2:h.pRadius;null!==c&&_||(_=0,x=0);var M=1.2*_+x,I=this.drawRect(M,M,M,M,x);I.attr({x:o-M/2,y:c-M/2,cx:o,cy:c,class:h.class?h.class:"",fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,stroke:h.pointStrokeColor,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}),b=I}else"circle"!==h.shape&&h.shape||(We.isNumber(c)||(_=0,c=0),b=this.drawCircle(_,{cx:o,cy:c,class:h.class?h.class:"",stroke:h.pointStrokeColor,fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}));return b}},{key:"pathMouseEnter",value:function(o,c){var h=this.w,_=new li(this.ctx),b=parseInt(o.node.getAttribute("index"),10),x=parseInt(o.node.getAttribute("j"),10);if("function"==typeof h.config.chart.events.dataPointMouseEnter&&h.config.chart.events.dataPointMouseEnter(c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}),this.ctx.events.fireEvent("dataPointMouseEnter",[c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}]),("none"===h.config.states.active.filter.type||"true"!==o.node.getAttribute("selected"))&&"none"!==h.config.states.hover.filter.type&&!h.globals.isTouchDevice){var M=h.config.states.hover.filter;_.applyFilter(o,b,M.type,M.value)}}},{key:"pathMouseLeave",value:function(o,c){var h=this.w,_=new li(this.ctx),b=parseInt(o.node.getAttribute("index"),10),x=parseInt(o.node.getAttribute("j"),10);"function"==typeof h.config.chart.events.dataPointMouseLeave&&h.config.chart.events.dataPointMouseLeave(c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}),this.ctx.events.fireEvent("dataPointMouseLeave",[c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}]),"none"!==h.config.states.active.filter.type&&"true"===o.node.getAttribute("selected")||"none"!==h.config.states.hover.filter.type&&_.getDefaultFilter(o,b)}},{key:"pathMouseDown",value:function(o,c){var h=this.w,_=new li(this.ctx),b=parseInt(o.node.getAttribute("index"),10),x=parseInt(o.node.getAttribute("j"),10),M="false";if("true"===o.node.getAttribute("selected")){if(o.node.setAttribute("selected","false"),h.globals.selectedDataPoints[b].indexOf(x)>-1){var I=h.globals.selectedDataPoints[b].indexOf(x);h.globals.selectedDataPoints[b].splice(I,1)}}else{if(!h.config.states.active.allowMultipleDataPointsSelection&&h.globals.selectedDataPoints.length>0){h.globals.selectedDataPoints=[];var F=h.globals.dom.Paper.select(".apexcharts-series path").members,U=h.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,$=function(de){Array.prototype.forEach.call(de,function(ge){ge.node.setAttribute("selected","false"),_.getDefaultFilter(ge,b)})};$(F),$(U)}o.node.setAttribute("selected","true"),M="true",void 0===h.globals.selectedDataPoints[b]&&(h.globals.selectedDataPoints[b]=[]),h.globals.selectedDataPoints[b].push(x)}if("true"===M){var q=h.config.states.active.filter;if("none"!==q)_.applyFilter(o,b,q.type,q.value);else if("none"!==h.config.states.hover.filter&&!h.globals.isTouchDevice){var ne=h.config.states.hover.filter;_.applyFilter(o,b,ne.type,ne.value)}}else"none"!==h.config.states.active.filter.type&&("none"===h.config.states.hover.filter.type||h.globals.isTouchDevice?_.getDefaultFilter(o,b):_.applyFilter(o,b,(ne=h.config.states.hover.filter).type,ne.value));"function"==typeof h.config.chart.events.dataPointSelection&&h.config.chart.events.dataPointSelection(c,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:b,dataPointIndex:x,w:h}),c&&this.ctx.events.fireEvent("dataPointSelection",[c,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:b,dataPointIndex:x,w:h}])}},{key:"rotateAroundCenter",value:function(o){var c={};return o&&"function"==typeof o.getBBox&&(c=o.getBBox()),{x:c.x+c.width/2,y:c.y+c.height/2}}},{key:"getTextRects",value:function(o,c,h,_){var b=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],x=this.w,M=this.drawText({x:-200,y:-200,text:o,textAnchor:"start",fontSize:c,fontFamily:h,foreColor:"#fff",opacity:0});_&&M.attr("transform",_),x.globals.dom.Paper.add(M);var I=M.bbox();return b||(I=M.node.getBoundingClientRect()),M.remove(),{width:I.width,height:I.height}}},{key:"placeTextWithEllipsis",value:function(o,c,h){if("function"==typeof o.getComputedTextLength&&(o.textContent=c,c.length>0&&o.getComputedTextLength()>=h/1.1)){for(var _=c.length-3;_>0;_-=3)if(o.getSubStringLength(0,_)<=h/1.1)return void(o.textContent=c.substring(0,_)+"...");o.textContent="."}}}],[{key:"setAttrs",value:function(o,c){for(var h in c)c.hasOwnProperty(h)&&o.setAttribute(h,c[h])}}]),le}(),si=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"getStackedSeriesTotals",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=this.w,h=[];if(0===c.globals.series.length)return h;for(var _=0;_<c.globals.series[c.globals.maxValsInArrayIndex].length;_++){for(var b=0,x=0;x<c.globals.series.length;x++)void 0!==c.globals.series[x][_]&&-1===o.indexOf(x)&&(b+=c.globals.series[x][_]);h.push(b)}return h}},{key:"getSeriesTotalByIndex",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===o?this.w.config.series.reduce(function(c,h){return c+h},0):this.w.globals.series[o].reduce(function(c,h){return c+h},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var o=this,c=this.w,h=[];return c.globals.seriesGroups.forEach(function(_){var b=[];c.config.series.forEach(function(M,I){_.indexOf(M.name)>-1&&b.push(I)});var x=c.globals.series.map(function(M,I){return-1===b.indexOf(I)?I:-1}).filter(function(M){return-1!==M});h.push(o.getStackedSeriesTotals(x))}),h}},{key:"isSeriesNull",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===o?this.w.config.series.filter(function(c){return null!==c}):this.w.config.series[o].data.filter(function(c){return null!==c})).length}},{key:"seriesHaveSameValues",value:function(o){return this.w.globals.series[o].every(function(c,h,_){return c===_[0]})}},{key:"getCategoryLabels",value:function(o){var c=this.w,h=o.slice();return c.config.xaxis.convertedCatToNumeric&&(h=o.map(function(_,b){return c.config.xaxis.labels.formatter(_-c.globals.minX+1)})),h}},{key:"getLargestSeries",value:function(){var o=this.w;o.globals.maxValsInArrayIndex=o.globals.series.map(function(c){return c.length}).indexOf(Math.max.apply(Math,o.globals.series.map(function(c){return c.length})))}},{key:"getLargestMarkerSize",value:function(){var o=this.w,c=0;return o.globals.markers.size.forEach(function(h){c=Math.max(c,h)}),o.config.markers.discrete&&o.config.markers.discrete.length&&o.config.markers.discrete.forEach(function(h){c=Math.max(c,h.size)}),c>0&&(c+=o.config.markers.hover.sizeOffset+1),o.globals.markers.largestSize=c,c}},{key:"getSeriesTotals",value:function(){var o=this.w;o.globals.seriesTotals=o.globals.series.map(function(c,h){var _=0;if(Array.isArray(c))for(var b=0;b<c.length;b++)_+=c[b];else _+=c;return _})}},{key:"getSeriesTotalsXRange",value:function(o,c){var h=this.w;return h.globals.series.map(function(_,b){for(var x=0,M=0;M<_.length;M++)h.globals.seriesX[b][M]>o&&h.globals.seriesX[b][M]<c&&(x+=_[M]);return x})}},{key:"getPercentSeries",value:function(){var o=this.w;o.globals.seriesPercent=o.globals.series.map(function(c,h){var _=[];if(Array.isArray(c))for(var b=0;b<c.length;b++){var x=o.globals.stackedSeriesTotals[b],M=0;x&&(M=100*c[b]/x),_.push(M)}else{var I=100*c/o.globals.seriesTotals.reduce(function(F,U){return F+U},0);_.push(I)}return _})}},{key:"getCalculatedRatios",value:function(){var o,c,h,_=this.w.globals,b=[],x=0,M=[],I=.1,F=0;if(_.yRange=[],_.isMultipleYAxis)for(var U=0;U<_.minYArr.length;U++)_.yRange.push(Math.abs(_.minYArr[U]-_.maxYArr[U])),M.push(0);else _.yRange.push(Math.abs(_.minY-_.maxY));_.xRange=Math.abs(_.maxX-_.minX),_.zRange=Math.abs(_.maxZ-_.minZ);for(var $=0;$<_.yRange.length;$++)b.push(_.yRange[$]/_.gridHeight);if(c=_.xRange/_.gridWidth,o=_.yRange/_.gridWidth,h=_.xRange/_.gridHeight,(x=_.zRange/_.gridHeight*16)||(x=1),_.minY!==Number.MIN_VALUE&&0!==Math.abs(_.minY)&&(_.hasNegs=!0),_.isMultipleYAxis){M=[];for(var q=0;q<b.length;q++)M.push(-_.minYArr[q]/b[q])}else M.push(-_.minY/b[0]),_.minY!==Number.MIN_VALUE&&0!==Math.abs(_.minY)&&(I=-_.minY/o,F=_.minX/c);return{yRatio:b,invertedYRatio:o,zRatio:x,xRatio:c,invertedXRatio:h,baseLineInvertedY:I,baseLineY:M,baseLineX:F}}},{key:"getLogSeries",value:function(o){var c=this,h=this.w;return h.globals.seriesLog=o.map(function(_,b){return h.config.yaxis[b]&&h.config.yaxis[b].logarithmic?_.map(function(x){return null===x?null:c.getLogVal(h.config.yaxis[b].logBase,x,b)}):_}),h.globals.invalidLogScale?o:h.globals.seriesLog}},{key:"getBaseLog",value:function(o,c){return Math.log(c)/Math.log(o)}},{key:"getLogVal",value:function(o,c,h){if(0===c)return 0;var _=this.w,b=0===_.globals.minYArr[h]?-1:this.getBaseLog(o,_.globals.minYArr[h]),x=(0===_.globals.maxYArr[h]?0:this.getBaseLog(o,_.globals.maxYArr[h]))-b;return c<1?c/x:(this.getBaseLog(o,c)-b)/x}},{key:"getLogYRatios",value:function(o){var c=this,h=this.w,_=this.w.globals;return _.yLogRatio=o.slice(),_.logYRange=_.yRange.map(function(b,x){if(h.config.yaxis[x]&&c.w.config.yaxis[x].logarithmic){var M,I=-Number.MAX_VALUE,F=Number.MIN_VALUE;return _.seriesLog.forEach(function(U,$){U.forEach(function(q){h.config.yaxis[$]&&h.config.yaxis[$].logarithmic&&(I=Math.max(q,I),F=Math.min(q,F))})}),M=Math.pow(_.yRange[x],Math.abs(F-I)/_.yRange[x]),_.yLogRatio[x]=M/_.gridHeight,M}}),_.invalidLogScale?o.slice():_.yLogRatio}}],[{key:"checkComboSeries",value:function(o){var c=!1,h=0,_=0;return o.length&&void 0!==o[0].type&&o.forEach(function(b){"bar"!==b.type&&"column"!==b.type&&"candlestick"!==b.type&&"boxPlot"!==b.type||h++,void 0!==b.type&&_++}),_>0&&(c=!0),{comboBarCount:h,comboCharts:c}}},{key:"extendArrayProps",value:function(o,c,h){var _,b,x,M,I,F;return null!==(_=c)&&void 0!==_&&_.yaxis&&(c=o.extendYAxis(c,h)),null!==(b=c)&&void 0!==b&&b.annotations&&(c.annotations.yaxis&&(c=o.extendYAxisAnnotations(c)),null!==(x=c)&&void 0!==x&&null!==(M=x.annotations)&&void 0!==M&&M.xaxis&&(c=o.extendXAxisAnnotations(c)),null!==(I=c)&&void 0!==I&&null!==(F=I.annotations)&&void 0!==F&&F.points&&(c=o.extendPointAnnotations(c))),c}}]),le}(),Xt=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o}return Me(le,[{key:"setOrientations",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===o.label.orientation){var b=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==c?c:0,"']"));if(null!==b){var x=b.getBoundingClientRect();b.setAttribute("x",parseFloat(b.getAttribute("x"))-x.height+4),b.setAttribute("y","top"===o.label.position?parseFloat(b.getAttribute("y"))+x.width:parseFloat(b.getAttribute("y"))-x.width);var M=this.annoCtx.graphics.rotateAroundCenter(b),F=M.y;b.setAttribute("transform","rotate(-90 ".concat(M.x," ").concat(F,")"))}}}},{key:"addBackgroundToAnno",value:function(o,c){var h=this.w;if(!o||void 0===c.label.text||void 0!==c.label.text&&!String(c.label.text).trim())return null;var _=h.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),b=o.getBoundingClientRect(),x=c.label.style.padding.left,M=c.label.style.padding.right,I=c.label.style.padding.top,F=c.label.style.padding.bottom;"vertical"===c.label.orientation&&(I=c.label.style.padding.left,F=c.label.style.padding.right,x=c.label.style.padding.top,M=c.label.style.padding.bottom);var q=this.annoCtx.graphics.drawRect(b.left-_.left-x-h.globals.barPadForNumericAxis,b.top-_.top-I,b.width+x+M,b.height+I+F,c.label.borderRadius,c.label.style.background,1,c.label.borderWidth,c.label.borderColor,0);return c.id&&q.node.classList.add(c.id),q}},{key:"annotationsBackground",value:function(){var o=this,c=this.w,h=function(_,b,x){var M=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(x,"-annotations .apexcharts-").concat(x,"-annotation-label[rel='").concat(b,"']"));if(M){var I=M.parentNode,F=o.addBackgroundToAnno(M,_);F&&(I.insertBefore(F.node,M),_.label.mouseEnter&&F.node.addEventListener("mouseenter",_.label.mouseEnter.bind(o,_)),_.label.mouseLeave&&F.node.addEventListener("mouseleave",_.label.mouseLeave.bind(o,_)),_.label.click&&F.node.addEventListener("click",_.label.click.bind(o,_)))}};c.config.annotations.xaxis.map(function(_,b){h(_,b,"xaxis")}),c.config.annotations.yaxis.map(function(_,b){h(_,b,"yaxis")}),c.config.annotations.points.map(function(_,b){h(_,b,"point")})}},{key:"getY1Y2",value:function(o,c){var h,_="y1"===o?c.y:c.y2,b=this.w;if(this.annoCtx.invertAxis){var x=b.globals.labels;b.config.xaxis.convertedCatToNumeric&&(x=b.globals.categoryLabels);var M=x.indexOf(_),I=b.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(M+1)+")");h=I?parseFloat(I.getAttribute("y")):(b.globals.gridHeight/x.length-1)*(M+1)-b.globals.barHeight,void 0!==c.seriesIndex&&b.globals.barHeight&&(h=h-b.globals.barHeight/2*(b.globals.series.length-1)+b.globals.barHeight*c.seriesIndex)}else{var F;F=b.config.yaxis[c.yAxisIndex].logarithmic?(_=new si(this.annoCtx.ctx).getLogVal(_,c.yAxisIndex))/b.globals.yLogRatio[c.yAxisIndex]:(_-b.globals.minYArr[c.yAxisIndex])/(b.globals.yRange[c.yAxisIndex]/b.globals.gridHeight),h=b.globals.gridHeight-F,!c.marker||null!=c.y||(h=0),b.config.yaxis[c.yAxisIndex]&&b.config.yaxis[c.yAxisIndex].reversed&&(h=F)}return"string"==typeof _&&_.indexOf("px")>-1&&(h=parseFloat(_)),h}},{key:"getX1X2",value:function(o,c){var h=this.w,_=this.annoCtx.invertAxis?h.globals.minY:h.globals.minX,b=this.annoCtx.invertAxis?h.globals.maxY:h.globals.maxX,x=this.annoCtx.invertAxis?h.globals.yRange[0]:h.globals.xRange,M=(c.x-_)/(x/h.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(M=(b-c.x)/(x/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(M=this.getStringX(c.x));var I=(c.x2-_)/(x/h.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(I=(b-c.x2)/(x/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(I=this.getStringX(c.x2)),null!=c.x||!c.marker||(M=h.globals.gridWidth),"x1"===o&&"string"==typeof c.x&&c.x.indexOf("px")>-1&&(M=parseFloat(c.x)),"x2"===o&&"string"==typeof c.x2&&c.x2.indexOf("px")>-1&&(I=parseFloat(c.x2)),void 0!==c.seriesIndex&&h.globals.barWidth&&!this.annoCtx.invertAxis&&(M=M-h.globals.barWidth/2*(h.globals.series.length-1)+h.globals.barWidth*c.seriesIndex),"x1"===o?M:I}},{key:"getStringX",value:function(o){var c=this.w,h=o;c.config.xaxis.convertedCatToNumeric&&c.globals.categoryLabels.length&&(o=c.globals.categoryLabels.indexOf(o)+1);var _=c.globals.labels.indexOf(o),b=c.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(_+1)+")");return b&&(h=parseFloat(b.getAttribute("x"))),h}}]),le}(),jt=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Xt(this.annoCtx)}return Me(le,[{key:"addXaxisAnnotation",value:function(o,c,h){var _,b=this.w,x=this.helpers.getX1X2("x1",o),M=o.label.text,I=o.strokeDashArray;if(We.isNumber(x)){if(null==o.x2){var F=this.annoCtx.graphics.drawLine(x+o.offsetX,0+o.offsetY,x+o.offsetX,b.globals.gridHeight+o.offsetY,o.borderColor,I,o.borderWidth);c.appendChild(F.node),o.id&&F.node.classList.add(o.id)}else{if((_=this.helpers.getX1X2("x2",o))<x){var U=x;x=_,_=U}var $=this.annoCtx.graphics.drawRect(x+o.offsetX,0+o.offsetY,_-x,b.globals.gridHeight+o.offsetY,0,o.fillColor,o.opacity,1,o.borderColor,I);$.node.classList.add("apexcharts-annotation-rect"),$.attr("clip-path","url(#gridRectMask".concat(b.globals.cuid,")")),c.appendChild($.node),o.id&&$.node.classList.add(o.id)}var q=this.annoCtx.graphics.getTextRects(M,parseFloat(o.label.style.fontSize)),de=this.annoCtx.graphics.drawText({x:x+o.label.offsetX,y:("top"===o.label.position?4:"center"===o.label.position?b.globals.gridHeight/2+("vertical"===o.label.orientation?q.width/2:0):b.globals.gridHeight)+o.label.offsetY-("vertical"===o.label.orientation?"top"===o.label.position?q.width/2-12:-q.width/2:0),text:M,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});de.attr({rel:h}),c.appendChild(de.node),this.annoCtx.helpers.setOrientations(o,h)}}},{key:"drawXAxisAnnotations",value:function(){var o=this,c=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return c.config.annotations.xaxis.map(function(_,b){o.addXaxisAnnotation(_,h.node,b)}),h}}]),le}(),ht=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o,this.helpers=new Xt(this.annoCtx)}return Me(le,[{key:"addYaxisAnnotation",value:function(o,c,h){var _,b=this.w,x=o.strokeDashArray,M=this.helpers.getY1Y2("y1",o),I=o.label.text;if(null==o.y2){var F=this.annoCtx.graphics.drawLine(0+o.offsetX,M+o.offsetY,this._getYAxisAnnotationWidth(o),M+o.offsetY,o.borderColor,x,o.borderWidth);c.appendChild(F.node),o.id&&F.node.classList.add(o.id)}else{if((_=this.helpers.getY1Y2("y2",o))>M){var U=M;M=_,_=U}var $=this.annoCtx.graphics.drawRect(0+o.offsetX,_+o.offsetY,this._getYAxisAnnotationWidth(o),M-_,0,o.fillColor,o.opacity,1,o.borderColor,x);$.node.classList.add("apexcharts-annotation-rect"),$.attr("clip-path","url(#gridRectMask".concat(b.globals.cuid,")")),c.appendChild($.node),o.id&&$.node.classList.add(o.id)}var ne=this.annoCtx.graphics.drawText({x:("right"===o.label.position?b.globals.gridWidth:"center"===o.label.position?b.globals.gridWidth/2:0)+o.label.offsetX,y:(_??M)+o.label.offsetY-3,text:I,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});ne.attr({rel:h}),c.appendChild(ne.node)}},{key:"_getYAxisAnnotationWidth",value:function(o){var c=this.w;return(o.width.indexOf("%")>-1?c.globals.gridWidth*parseInt(o.width,10)/100:parseInt(o.width,10))+o.offsetX}},{key:"drawYAxisAnnotations",value:function(){var o=this,c=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return c.config.annotations.yaxis.map(function(_,b){o.addYaxisAnnotation(_,h.node,b)}),h}}]),le}(),qt=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o,this.helpers=new Xt(this.annoCtx)}return Me(le,[{key:"addPointAnnotation",value:function(o,c,h){var _=this.helpers.getX1X2("x1",o),b=this.helpers.getY1Y2("y1",o);if(We.isNumber(_)){var x={pSize:o.marker.size,pointStrokeWidth:o.marker.strokeWidth,pointFillColor:o.marker.fillColor,pointStrokeColor:o.marker.strokeColor,shape:o.marker.shape,pRadius:o.marker.radius,class:"apexcharts-point-annotation-marker ".concat(o.marker.cssClass," ").concat(o.id?o.id:"")},M=this.annoCtx.graphics.drawMarker(_+o.marker.offsetX,b+o.marker.offsetY,x);c.appendChild(M.node);var I=o.label.text?o.label.text:"",F=this.annoCtx.graphics.drawText({x:_+o.label.offsetX,y:b+o.label.offsetY-o.marker.size-parseFloat(o.label.style.fontSize)/1.6,text:I,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});if(F.attr({rel:h}),c.appendChild(F.node),o.customSVG.SVG){var U=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+o.customSVG.cssClass});U.attr({transform:"translate(".concat(_+o.customSVG.offsetX,", ").concat(b+o.customSVG.offsetY,")")}),U.node.innerHTML=o.customSVG.SVG,c.appendChild(U.node)}if(o.image.path){var $=o.image.width?o.image.width:20,q=o.image.height?o.image.height:20;M=this.annoCtx.addImage({x:_+o.image.offsetX-$/2,y:b+o.image.offsetY-q/2,width:$,height:q,path:o.image.path,appendTo:".apexcharts-point-annotations"})}o.mouseEnter&&M.node.addEventListener("mouseenter",o.mouseEnter.bind(this,o)),o.mouseLeave&&M.node.addEventListener("mouseleave",o.mouseLeave.bind(this,o)),o.click&&M.node.addEventListener("click",o.click.bind(this,o))}}},{key:"drawPointAnnotations",value:function(){var o=this,c=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return c.config.annotations.points.map(function(_,b){o.addPointAnnotation(_,h.node,b)}),h}}]),le}(),ri={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},mi=function(){function le(){V(this,le),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Me(le,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[ri],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(o){return new Date(o).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(o){return o}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(o){return o+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(c,h){return c+h},0)/o.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(o){return o},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(o){return o}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(o){return o}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(c,h){return c+h},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(o){return null!==o?o:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(o){return o?o+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),le}(),Vi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.graphics=new at(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Xt(this),this.xAxisAnnotations=new jt(this),this.yAxisAnnotations=new ht(this),this.pointsAnnotations=new qt(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Me(le,[{key:"drawAxesAnnotations",value:function(){var o=this.w;if(o.globals.axisCharts){for(var c=this.yAxisAnnotations.drawYAxisAnnotations(),h=this.xAxisAnnotations.drawXAxisAnnotations(),_=this.pointsAnnotations.drawPointAnnotations(),b=o.config.chart.animations.enabled,x=[c,h,_],M=[h.node,c.node,_.node],I=0;I<3;I++)o.globals.dom.elGraphical.add(x[I]),!b||o.globals.resized||o.globals.dataChanged||"scatter"!==o.config.chart.type&&"bubble"!==o.config.chart.type&&o.globals.dataPoints>1&&M[I].classList.add("apexcharts-element-hidden"),o.globals.delayedElements.push({el:M[I],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var o=this;this.w.config.annotations.images.map(function(c,h){o.addImage(c,h)})}},{key:"drawTextAnnos",value:function(){var o=this;this.w.config.annotations.texts.map(function(c,h){o.addText(c,h)})}},{key:"addXaxisAnnotation",value:function(o,c,h){this.xAxisAnnotations.addXaxisAnnotation(o,c,h)}},{key:"addYaxisAnnotation",value:function(o,c,h){this.yAxisAnnotations.addYaxisAnnotation(o,c,h)}},{key:"addPointAnnotation",value:function(o,c,h){this.pointsAnnotations.addPointAnnotation(o,c,h)}},{key:"addText",value:function(o,c){var b=o.text,q=o.backgroundColor,ne=o.borderWidth,de=o.strokeDashArray,ge=o.borderRadius,we=o.borderColor,me=o.appendTo,Se=void 0===me?".apexcharts-svg":me,N=o.paddingLeft,Q=void 0===N?4:N,pe=o.paddingRight,xe=void 0===pe?4:pe,Le=o.paddingBottom,Ze=void 0===Le?2:Le,kt=o.paddingTop,It=void 0===kt?2:kt,ii=this.w,wi=this.graphics.drawText({x:o.x,y:o.y,text:b,textAnchor:o.textAnchor||"start",fontSize:o.fontSize||"12px",fontWeight:o.fontWeight||"regular",fontFamily:o.fontFamily||ii.config.chart.fontFamily,foreColor:o.foreColor||ii.config.chart.foreColor,cssClass:o.cssClass}),Mi=ii.globals.dom.baseEl.querySelector(Se);Mi&&Mi.appendChild(wi.node);var dn=wi.bbox();if(b){var En=this.graphics.drawRect(dn.x-Q,dn.y-It,dn.width+Q+xe,dn.height+Ze+It,ge,q||"transparent",1,ne,we,de);Mi.insertBefore(En.node,wi.node)}}},{key:"addImage",value:function(o,c){var h=this.w,b=o.x,x=void 0===b?0:b,M=o.y,I=void 0===M?0:M,F=o.width,U=void 0===F?20:F,$=o.height,q=void 0===$?20:$,ne=o.appendTo,de=void 0===ne?".apexcharts-svg":ne,ge=h.globals.dom.Paper.image(o.path);ge.size(U,q).move(x,I);var we=h.globals.dom.baseEl.querySelector(de);return we&&we.appendChild(ge.node),ge}},{key:"addXaxisAnnotationExternal",value:function(o,c,h){return this.addAnnotationExternal({params:o,pushToMemory:c,context:h,type:"xaxis",contextMethod:h.addXaxisAnnotation}),h}},{key:"addYaxisAnnotationExternal",value:function(o,c,h){return this.addAnnotationExternal({params:o,pushToMemory:c,context:h,type:"yaxis",contextMethod:h.addYaxisAnnotation}),h}},{key:"addPointAnnotationExternal",value:function(o,c,h){return void 0===this.invertAxis&&(this.invertAxis=h.w.globals.isBarHorizontal),this.addAnnotationExternal({params:o,pushToMemory:c,context:h,type:"point",contextMethod:h.addPointAnnotation}),h}},{key:"addAnnotationExternal",value:function(o){var c=o.params,h=o.pushToMemory,_=o.context,b=o.type,x=o.contextMethod,M=_,I=M.w,F=I.globals.dom.baseEl.querySelector(".apexcharts-".concat(b,"-annotations")),U=F.childNodes.length+1,$=new mi,q=Object.assign({},"xaxis"===b?$.xAxisAnnotation:"yaxis"===b?$.yAxisAnnotation:$.pointAnnotation),ne=We.extend(q,c);switch(b){case"xaxis":this.addXaxisAnnotation(ne,F,U);break;case"yaxis":this.addYaxisAnnotation(ne,F,U);break;case"point":this.addPointAnnotation(ne,F,U)}var de=I.globals.dom.baseEl.querySelector(".apexcharts-".concat(b,"-annotations .apexcharts-").concat(b,"-annotation-label[rel='").concat(U,"']")),ge=this.helpers.addBackgroundToAnno(de,ne);return ge&&F.insertBefore(ge.node,de),h&&I.globals.memory.methodsToExec.push({context:M,id:ne.id?ne.id:We.randomId(),method:x,label:"addAnnotation",params:c}),_}},{key:"clearAnnotations",value:function(o){var c=o.w,h=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");c.globals.memory.methodsToExec.map(function(_,b){"addText"!==_.label&&"addAnnotation"!==_.label||c.globals.memory.methodsToExec.splice(b,1)}),h=We.listToArray(h),Array.prototype.forEach.call(h,function(_){for(;_.firstChild;)_.removeChild(_.firstChild)})}},{key:"removeAnnotation",value:function(o,c){var h=o.w,_=h.globals.dom.baseEl.querySelectorAll(".".concat(c));_&&(h.globals.memory.methodsToExec.map(function(b,x){b.id===c&&h.globals.memory.methodsToExec.splice(x,1)}),Array.prototype.forEach.call(_,function(b){b.parentElement.removeChild(b)}))}}]),le}(),_i=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Me(le,[{key:"isValidDate",value:function(o){return"number"!=typeof o&&!isNaN(this.parseDate(o))}},{key:"getTimeStamp",value:function(o){return Date.parse(o)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toISOString().substr(0,25)).getTime():new Date(o).getTime():o}},{key:"getDate",value:function(o){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toUTCString()):new Date(o)}},{key:"parseDate",value:function(o){var c=Date.parse(o);if(!isNaN(c))return this.getTimeStamp(o);var h=Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(h)}},{key:"parseDateWithTimezone",value:function(o){return Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(o,c){var h=this.w.globals.locale,_=this.w.config.xaxis.labels.datetimeUTC,b=["\0"].concat(ot(h.months)),x=["\x01"].concat(ot(h.shortMonths)),M=["\x02"].concat(ot(h.days)),I=["\x03"].concat(ot(h.shortDays));function F(Ze,kt){var It=Ze+"";for(kt=kt||2;It.length<kt;)It="0"+It;return It}var U=_?o.getUTCFullYear():o.getFullYear();c=(c=(c=c.replace(/(^|[^\\])yyyy+/g,"$1"+U)).replace(/(^|[^\\])yy/g,"$1"+U.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+U);var $=(_?o.getUTCMonth():o.getMonth())+1;c=(c=(c=(c=c.replace(/(^|[^\\])MMMM+/g,"$1"+b[0])).replace(/(^|[^\\])MMM/g,"$1"+x[0])).replace(/(^|[^\\])MM/g,"$1"+F($))).replace(/(^|[^\\])M/g,"$1"+$);var q=_?o.getUTCDate():o.getDate();c=(c=(c=(c=c.replace(/(^|[^\\])dddd+/g,"$1"+M[0])).replace(/(^|[^\\])ddd/g,"$1"+I[0])).replace(/(^|[^\\])dd/g,"$1"+F(q))).replace(/(^|[^\\])d/g,"$1"+q);var ne=_?o.getUTCHours():o.getHours(),de=ne>12?ne-12:0===ne?12:ne;c=(c=(c=(c=c.replace(/(^|[^\\])HH+/g,"$1"+F(ne))).replace(/(^|[^\\])H/g,"$1"+ne)).replace(/(^|[^\\])hh+/g,"$1"+F(de))).replace(/(^|[^\\])h/g,"$1"+de);var ge=_?o.getUTCMinutes():o.getMinutes();c=(c=c.replace(/(^|[^\\])mm+/g,"$1"+F(ge))).replace(/(^|[^\\])m/g,"$1"+ge);var we=_?o.getUTCSeconds():o.getSeconds();c=(c=c.replace(/(^|[^\\])ss+/g,"$1"+F(we))).replace(/(^|[^\\])s/g,"$1"+we);var me=_?o.getUTCMilliseconds():o.getMilliseconds();c=c.replace(/(^|[^\\])fff+/g,"$1"+F(me,3)),me=Math.round(me/10),c=c.replace(/(^|[^\\])ff/g,"$1"+F(me)),me=Math.round(me/10);var Se=ne<12?"AM":"PM";c=(c=(c=c.replace(/(^|[^\\])f/g,"$1"+me)).replace(/(^|[^\\])TT+/g,"$1"+Se)).replace(/(^|[^\\])T/g,"$1"+Se.charAt(0));var N=Se.toLowerCase();c=(c=c.replace(/(^|[^\\])tt+/g,"$1"+N)).replace(/(^|[^\\])t/g,"$1"+N.charAt(0));var Q=-o.getTimezoneOffset(),pe=_||!Q?"Z":Q>0?"+":"-";if(!_){var xe=(Q=Math.abs(Q))%60;pe+=F(Math.floor(Q/60))+":"+F(xe)}c=c.replace(/(^|[^\\])K/g,"$1"+pe);var Le=(_?o.getUTCDay():o.getDay())+1;return(c=(c=(c=(c=c.replace(new RegExp(M[0],"g"),M[Le])).replace(new RegExp(I[0],"g"),I[Le])).replace(new RegExp(b[0],"g"),b[$])).replace(new RegExp(x[0],"g"),x[$])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(o,c,h){var _=this.w;void 0!==_.config.xaxis.min&&(o=_.config.xaxis.min),void 0!==_.config.xaxis.max&&(c=_.config.xaxis.max);var b=this.getDate(o),x=this.getDate(c),M=this.formatDate(b,"yyyy MM dd HH mm ss fff").split(" "),I=this.formatDate(x,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(M[6],10),maxMillisecond:parseInt(I[6],10),minSecond:parseInt(M[5],10),maxSecond:parseInt(I[5],10),minMinute:parseInt(M[4],10),maxMinute:parseInt(I[4],10),minHour:parseInt(M[3],10),maxHour:parseInt(I[3],10),minDate:parseInt(M[2],10),maxDate:parseInt(I[2],10),minMonth:parseInt(M[1],10)-1,maxMonth:parseInt(I[1],10)-1,minYear:parseInt(M[0],10),maxYear:parseInt(I[0],10)}}},{key:"isLeapYear",value:function(o){return o%4==0&&o%100!=0||o%400==0}},{key:"calculcateLastDaysOfMonth",value:function(o,c,h){return this.determineDaysOfMonths(o,c)-h}},{key:"determineDaysOfYear",value:function(o){var c=365;return this.isLeapYear(o)&&(c=366),c}},{key:"determineRemainingDaysOfYear",value:function(o,c,h){var _=this.daysCntOfYear[c]+h;return c>1&&this.isLeapYear()&&_++,_}},{key:"determineDaysOfMonths",value:function(o,c){var h=30;switch(o=We.monthMod(o),!0){case this.months30.indexOf(o)>-1:2===o&&(h=this.isLeapYear(c)?29:28);break;case this.months31.indexOf(o)>-1:default:h=31}return h}}]),le}(),Ci=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.tooltipKeyFormat="dd MMM"}return Me(le,[{key:"xLabelFormat",value:function(o,c,h,_){var b=this.w;if("datetime"===b.config.xaxis.type&&void 0===b.config.xaxis.labels.formatter&&void 0===b.config.tooltip.x.formatter){var x=new _i(this.ctx);return x.formatDate(x.getDate(c),b.config.tooltip.x.format)}return o(c,h,_)}},{key:"defaultGeneralFormatter",value:function(o){return Array.isArray(o)?o.map(function(c){return c}):o}},{key:"defaultYFormatter",value:function(o,c,h){var _=this.w;return We.isNumber(o)&&(o=o.toFixed(0!==_.globals.yValueDecimal?void 0!==c.decimalsInFloat?c.decimalsInFloat:_.globals.yValueDecimal:_.globals.maxYArr[h]-_.globals.minYArr[h]<5?1:0)),o}},{key:"setLabelFormatters",value:function(){var o=this,c=this.w;return c.globals.xaxisTooltipFormatter=function(h){return o.defaultGeneralFormatter(h)},c.globals.ttKeyFormatter=function(h){return o.defaultGeneralFormatter(h)},c.globals.ttZFormatter=function(h){return h},c.globals.legendFormatter=function(h){return o.defaultGeneralFormatter(h)},c.globals.xLabelFormatter=void 0!==c.config.xaxis.labels.formatter?c.config.xaxis.labels.formatter:function(h){if(We.isNumber(h)){if(!c.config.xaxis.convertedCatToNumeric&&"numeric"===c.config.xaxis.type){if(We.isNumber(c.config.xaxis.decimalsInFloat))return h.toFixed(c.config.xaxis.decimalsInFloat);var _=c.globals.maxX-c.globals.minX;return h.toFixed(_>0&&_<100?1:0)}return h.toFixed(c.globals.isBarHorizontal&&c.globals.maxY-c.globals.minYArr<4?1:0)}return h},c.globals.ttKeyFormatter="function"==typeof c.config.tooltip.x.formatter?c.config.tooltip.x.formatter:c.globals.xLabelFormatter,"function"==typeof c.config.xaxis.tooltip.formatter&&(c.globals.xaxisTooltipFormatter=c.config.xaxis.tooltip.formatter),(Array.isArray(c.config.tooltip.y)||void 0!==c.config.tooltip.y.formatter)&&(c.globals.ttVal=c.config.tooltip.y),void 0!==c.config.tooltip.z.formatter&&(c.globals.ttZFormatter=c.config.tooltip.z.formatter),void 0!==c.config.legend.formatter&&(c.globals.legendFormatter=c.config.legend.formatter),c.config.yaxis.forEach(function(h,_){c.globals.yLabelFormatters[_]=void 0!==h.labels.formatter?h.labels.formatter:function(b){return c.globals.xyCharts?Array.isArray(b)?b.map(function(x){return o.defaultYFormatter(x,h,_)}):o.defaultYFormatter(b,h,_):b}}),c.globals}},{key:"heatmapLabelFormatters",value:function(){var o=this.w;if("heatmap"===o.config.chart.type){o.globals.yAxisScale[0].result=o.globals.seriesNames.slice();var c=o.globals.seriesNames.reduce(function(h,_){return h.length>_.length?h:_},0);o.globals.yAxisScale[0].niceMax=c,o.globals.yAxisScale[0].niceMin=c}}}]),le}(),Fi=function(le){var o,c=le.isTimeline,h=le.ctx,_=le.seriesIndex,b=le.dataPointIndex,x=le.y1,M=le.y2,I=le.w,F=I.globals.seriesRangeStart[_][b],U=I.globals.seriesRangeEnd[_][b],$=I.globals.labels[b],q=I.config.series[_].name?I.config.series[_].name:"",ne=I.globals.ttKeyFormatter,de=I.config.tooltip.y.title.formatter,ge={w:I,seriesIndex:_,dataPointIndex:b,start:F,end:U};"function"==typeof de&&(q=de(q,ge)),null!==(o=I.config.series[_].data[b])&&void 0!==o&&o.x&&($=I.config.series[_].data[b].x),c||"datetime"===I.config.xaxis.type&&($=new Ci(h).xLabelFormat(I.globals.ttKeyFormatter,$,$,{i:void 0,dateFormatter:new _i(h).formatDate,w:I})),"function"==typeof ne&&($=ne($,ge)),Number.isFinite(x)&&Number.isFinite(M)&&(F=x,U=M);var we="",me="",Se=I.globals.colors[_];if(void 0===I.config.tooltip.x.formatter)if("datetime"===I.config.xaxis.type){var N=new _i(h);we=N.formatDate(N.getDate(F),I.config.tooltip.x.format),me=N.formatDate(N.getDate(U),I.config.tooltip.x.format)}else we=F,me=U;else we=I.config.tooltip.x.formatter(F),me=I.config.tooltip.x.formatter(U);return{start:F,end:U,startVal:we,endVal:me,ylabel:$,color:Se,seriesName:q}},qi=function(le){var o=le.color,c=le.seriesName,h=le.ylabel,_=le.start,b=le.end,x=le.seriesIndex,M=le.dataPointIndex,I=le.ctx.tooltip.tooltipLabels.getFormatters(x);_=I.yLbFormatter(_),b=I.yLbFormatter(b);var F=I.yLbFormatter(le.w.globals.series[x][M]),U='<span class="value start-value">\n  '.concat(_,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(b,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+o+'">'+(c||"")+'</span></div><div> <span class="category">'+h+": </span> "+(le.w.globals.comboCharts?"rangeArea"===le.w.config.series[x].type||"rangeBar"===le.w.config.series[x].type?U:"<span>".concat(F,"</span>"):U)+" </div></div>"},xn=function(){function le(o){V(this,le),this.opts=o}return Me(le,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(o){return this.hideYAxis(),We.extend(o,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Fe(Fe({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var o=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(c){return o._getBoxTooltip(c.w,c.seriesIndex,c.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var o=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(c){return o._getBoxTooltip(c.w,c.seriesIndex,c.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(o,c){var h=c.seriesIndex,_=c.dataPointIndex,b=c.w,x=function(){return b.globals.seriesRangeEnd[h][_]-b.globals.seriesRangeStart[h][_]};return b.globals.comboCharts?"rangeBar"===b.config.series[h].type||"rangeArea"===b.config.series[h].type?x():o:x()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(o){return o.w.config.plotOptions&&o.w.config.plotOptions.bar&&o.w.config.plotOptions.bar.horizontal?(_=(h=Fi(Fe(Fe({},c=o),{},{isTimeline:!0}))).color,b=h.seriesName,x=h.ylabel,M=h.startVal,I=h.endVal,qi(Fe(Fe({},c),{},{color:_,seriesName:b,ylabel:x,start:M,end:I}))):function(c){var h=Fi(c),_=h.color,b=h.seriesName,x=h.ylabel,M=h.start,I=h.end;return qi(Fe(Fe({},c),{},{color:_,seriesName:b,ylabel:x,start:M,end:I}))}(o);var c,h,_,b,x,M,I}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(o){var c,h;return null!==(c=o.plotOptions.bar)&&void 0!==c&&c.barHeight||(o.plotOptions.bar.barHeight=2),null!==(h=o.plotOptions.bar)&&void 0!==h&&h.columnWidth||(o.plotOptions.bar.columnWidth=2),o}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(o){return _=(h=Fi(c=o)).color,b=h.seriesName,x=h.ylabel,M=h.start,I=h.end,qi(Fe(Fe({},c),{},{color:_,seriesName:b,ylabel:x,start:M,end:I}));var c,h,_,b,x,M,I}}}}},{key:"brush",value:function(o){return We.extend(o,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(o){o.dataLabels=o.dataLabels||{},o.dataLabels.formatter=o.dataLabels.formatter||void 0;var c=o.dataLabels.formatter;return o.yaxis.forEach(function(h,_){o.yaxis[_].min=0,o.yaxis[_].max=100}),"bar"===o.chart.type&&(o.dataLabels.formatter=c||function(h){return"number"==typeof h&&h?h.toFixed(0)+"%":h}),o}},{key:"stackedBars",value:function(){var o=this.bar();return Fe(Fe({},o),{},{plotOptions:Fe(Fe({},o.plotOptions),{},{bar:Fe(Fe({},o.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(o){return o.xaxis.convertedCatToNumeric=!0,o}},{key:"convertCatToNumericXaxis",value:function(o,c,h){o.xaxis.type="numeric",o.xaxis.labels=o.xaxis.labels||{},o.xaxis.labels.formatter=o.xaxis.labels.formatter||function(x){return We.isNumber(x)?Math.floor(x):x};var _=o.xaxis.labels.formatter,b=o.xaxis.categories&&o.xaxis.categories.length?o.xaxis.categories:o.labels;return h&&h.length&&(b=h.map(function(x){return Array.isArray(x)?x:String(x)})),b&&b.length&&(o.xaxis.labels.formatter=function(x){return We.isNumber(x)?_(b[Math.floor(x)-1]):_(x)}),o.xaxis.categories=[],o.labels=[],o.xaxis.tickAmount=o.xaxis.tickAmount||"dataPoints",o}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(o){return o},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(o,c,h,_,b){var x=o.globals.seriesCandleO[c][h],M=o.globals.seriesCandleH[c][h],I=o.globals.seriesCandleM[c][h],F=o.globals.seriesCandleL[c][h],U=o.globals.seriesCandleC[c][h];return o.config.series[c].type&&o.config.series[c].type!==b?'<div class="apexcharts-custom-tooltip">\n          '.concat(o.config.series[c].name?o.config.series[c].name:"series-"+(c+1),": <strong>").concat(o.globals.series[c][h],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(o.config.chart.type,'">')+"<div>".concat(_[0],': <span class="value">')+x+"</span></div>"+"<div>".concat(_[1],': <span class="value">')+M+"</span></div>"+(I?"<div>".concat(_[2],': <span class="value">')+I+"</span></div>":"")+"<div>".concat(_[3],': <span class="value">')+F+"</span></div>"+"<div>".concat(_[4],': <span class="value">')+U+"</span></div></div>"}}]),le}(),mn=function(){function le(o){V(this,le),this.opts=o}return Me(le,[{key:"init",value:function(o){var c=o.responsiveOverride,h=this.opts,_=new mi,b=new xn(h);this.chartType=h.chart.type,h=this.extendYAxis(h),h=this.extendAnnotations(h);var x=_.init(),M={};if(h&&"object"===t(h)){var I,F,U,$,q,ne,de,ge,we={};we=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(h.chart.type)?b[h.chart.type]():b.line(),null!==(I=h.plotOptions)&&void 0!==I&&null!==(F=I.bar)&&void 0!==F&&F.isFunnel&&(we=b.funnel()),h.chart.stacked&&"bar"===h.chart.type&&(we=b.stackedBars()),null!==(U=h.chart.brush)&&void 0!==U&&U.enabled&&(we=b.brush(we)),h.chart.stacked&&"100%"===h.chart.stackType&&(h=b.stacked100(h)),null!==($=h.plotOptions)&&void 0!==$&&null!==(q=$.bar)&&void 0!==q&&q.isDumbbell&&(h=b.dumbbell(h)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(h),h.xaxis=h.xaxis||window.Apex.xaxis||{},c||(h.xaxis.convertedCatToNumeric=!1),(null!==(ne=(h=this.checkForCatToNumericXAxis(this.chartType,we,h)).chart.sparkline)&&void 0!==ne&&ne.enabled||null!==(de=window.Apex.chart)&&void 0!==de&&null!==(ge=de.sparkline)&&void 0!==ge&&ge.enabled)&&(we=b.sparkline(we)),M=We.extend(x,we)}var me=We.extend(M,window.Apex);return x=We.extend(me,h),this.handleUserInputErrors(x)}},{key:"checkForCatToNumericXAxis",value:function(o,c,h){var _,b,x=new xn(h);return("bar"===o||"boxPlot"===o)&&(null===(_=h.plotOptions)||void 0===_||null===(b=_.bar)||void 0===b?void 0:b.horizontal)||"pie"===o||"polarArea"===o||"donut"===o||"radar"===o||"radialBar"===o||"heatmap"===o||!("datetime"!==h.xaxis.type&&"numeric"!==h.xaxis.type)||"between"===(h.xaxis.tickPlacement?h.xaxis.tickPlacement:c.xaxis&&c.xaxis.tickPlacement)||(h=x.convertCatToNumeric(h)),h}},{key:"extendYAxis",value:function(o,c){var h=new mi;(void 0===o.yaxis||!o.yaxis||Array.isArray(o.yaxis)&&0===o.yaxis.length)&&(o.yaxis={}),o.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(o.yaxis=We.extend(o.yaxis,window.Apex.yaxis)),o.yaxis=o.yaxis.constructor!==Array?[We.extend(h.yAxis,o.yaxis)]:We.extendArray(o.yaxis,h.yAxis);var _=!1;o.yaxis.forEach(function(x){x.logarithmic&&(_=!0)});var b=o.series;return c&&!b&&(b=c.config.series),_&&b.length!==o.yaxis.length&&b.length&&(o.yaxis=b.map(function(x,M){if(x.name||(b[M].name="series-".concat(M+1)),o.yaxis[M])return o.yaxis[M].seriesName=b[M].name,o.yaxis[M];var I=We.extend(h.yAxis,o.yaxis[0]);return I.show=!1,I})),_&&b.length>1&&b.length!==o.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),o}},{key:"extendAnnotations",value:function(o){return void 0===o.annotations&&(o.annotations={},o.annotations.yaxis=[],o.annotations.xaxis=[],o.annotations.points=[]),o=this.extendYAxisAnnotations(o),o=this.extendXAxisAnnotations(o),this.extendPointAnnotations(o)}},{key:"extendYAxisAnnotations",value:function(o){var c=new mi;return o.annotations.yaxis=We.extendArray(void 0!==o.annotations.yaxis?o.annotations.yaxis:[],c.yAxisAnnotation),o}},{key:"extendXAxisAnnotations",value:function(o){var c=new mi;return o.annotations.xaxis=We.extendArray(void 0!==o.annotations.xaxis?o.annotations.xaxis:[],c.xAxisAnnotation),o}},{key:"extendPointAnnotations",value:function(o){var c=new mi;return o.annotations.points=We.extendArray(void 0!==o.annotations.points?o.annotations.points:[],c.pointAnnotation),o}},{key:"checkForDarkTheme",value:function(o){o.theme&&"dark"===o.theme.mode&&(o.tooltip||(o.tooltip={}),"light"!==o.tooltip.theme&&(o.tooltip.theme="dark"),o.chart.foreColor||(o.chart.foreColor="#f6f7f8"),o.chart.background||(o.chart.background="#424242"),o.theme.palette||(o.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(o){var c=o;if(c.tooltip.shared&&c.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===c.chart.type&&c.plotOptions.bar.horizontal){if(c.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");c.yaxis[0].reversed&&(c.yaxis[0].opposite=!0),c.xaxis.tooltip.enabled=!1,c.yaxis[0].tooltip.enabled=!1,c.chart.zoom.enabled=!1}return"bar"!==c.chart.type&&"rangeBar"!==c.chart.type||c.tooltip.shared&&"barWidth"===c.xaxis.crosshairs.width&&c.series.length>1&&(c.xaxis.crosshairs.width="tickWidth"),"candlestick"!==c.chart.type&&"boxPlot"!==c.chart.type||c.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(c.chart.type," chart is not supported.")),c.yaxis[0].reversed=!1),c}}]),le}(),Vn=function(){function le(){V(this,le)}return Me(le,[{key:"initGlobalVars",value:function(o){o.series=[],o.seriesCandleO=[],o.seriesCandleH=[],o.seriesCandleM=[],o.seriesCandleL=[],o.seriesCandleC=[],o.seriesRangeStart=[],o.seriesRangeEnd=[],o.seriesRange=[],o.seriesPercent=[],o.seriesGoals=[],o.seriesX=[],o.seriesZ=[],o.seriesNames=[],o.seriesTotals=[],o.seriesLog=[],o.seriesColors=[],o.stackedSeriesTotals=[],o.seriesXvalues=[],o.seriesYvalues=[],o.labels=[],o.hasXaxisGroups=!1,o.groups=[],o.hasSeriesGroups=!1,o.seriesGroups=[],o.categoryLabels=[],o.timescaleLabels=[],o.noLabelsProvided=!1,o.resizeTimer=null,o.selectionResizeTimer=null,o.delayedElements=[],o.pointsArray=[],o.dataLabelsRects=[],o.isXNumeric=!1,o.skipLastTimelinelabel=!1,o.skipFirstTimelinelabel=!1,o.isDataXYZ=!1,o.isMultiLineX=!1,o.isMultipleYAxis=!1,o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE,o.minYArr=[],o.maxYArr=[],o.maxX=-Number.MAX_VALUE,o.minX=Number.MAX_VALUE,o.initialMaxX=-Number.MAX_VALUE,o.initialMinX=Number.MAX_VALUE,o.maxDate=0,o.minDate=Number.MAX_VALUE,o.minZ=Number.MAX_VALUE,o.maxZ=-Number.MAX_VALUE,o.minXDiff=Number.MAX_VALUE,o.yAxisScale=[],o.xAxisScale=null,o.xAxisTicksPositions=[],o.yLabelsCoords=[],o.yTitleCoords=[],o.barPadForNumericAxis=0,o.padHorizontal=0,o.xRange=0,o.yRange=[],o.zRange=0,o.dataPoints=0,o.xTickAmount=0,o.multiAxisTickAmount=0}},{key:"globalVars",value:function(o){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:o.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===o.chart.toolbar.autoSelected&&o.chart.toolbar.tools.zoom&&o.chart.zoom.enabled,panEnabled:"pan"===o.chart.toolbar.autoSelected&&o.chart.toolbar.tools.pan,selectionEnabled:"selection"===o.chart.toolbar.autoSelected&&o.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(o){var c=this.globalVars(o);return this.initGlobalVars(c),c.initialConfig=We.extend({},o),c.initialSeries=We.clone(o.series),c.lastXAxis=We.clone(c.initialConfig.xaxis),c.lastYAxis=We.clone(c.initialConfig.yaxis),c}}]),le}(),ei=function(){function le(o){V(this,le),this.opts=o}return Me(le,[{key:"init",value:function(){var o=new mn(this.opts).init({responsiveOverride:!1});return{config:o,globals:(new Vn).init(o)}}}]),le}(),Bi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.opts=null,this.seriesIndex=0}return Me(le,[{key:"clippedImgArea",value:function(o){var c=this.w,h=c.config,_=parseInt(c.globals.gridWidth,10),b=parseInt(c.globals.gridHeight,10),x=_>b?_:b,M=o.image,I=0,F=0;void 0===o.width&&void 0===o.height?void 0!==h.fill.image.width&&void 0!==h.fill.image.height?(I=h.fill.image.width+1,F=h.fill.image.height):(I=x+1,F=x):(I=o.width,F=o.height);var U=document.createElementNS(c.globals.SVGNS,"pattern");at.setAttrs(U,{id:o.patternID,patternUnits:o.patternUnits?o.patternUnits:"userSpaceOnUse",width:I+"px",height:F+"px"});var $=document.createElementNS(c.globals.SVGNS,"image");U.appendChild($),$.setAttributeNS(window.SVG.xlink,"href",M),at.setAttrs($,{x:0,y:0,preserveAspectRatio:"none",width:I+"px",height:F+"px"}),$.style.opacity=o.opacity,c.globals.dom.elDefs.node.appendChild(U)}},{key:"getSeriesIndex",value:function(o){var c=this.w,h=c.config.chart.type;return this.seriesIndex=("bar"===h||"rangeBar"===h)&&c.config.plotOptions.bar.distributed||"heatmap"===h||"treemap"===h?o.seriesNumber:o.seriesNumber%c.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(o){var c=this.w;this.opts=o;var h,_,b,x=this.w.config;this.seriesIndex=this.getSeriesIndex(o);var M=this.getFillColors()[this.seriesIndex];void 0!==c.globals.seriesColors[this.seriesIndex]&&(M=c.globals.seriesColors[this.seriesIndex]),"function"==typeof M&&(M=M({seriesIndex:this.seriesIndex,dataPointIndex:o.dataPointIndex,value:o.value,w:c}));var I=o.fillType?o.fillType:this.getFillType(this.seriesIndex),F=Array.isArray(x.fill.opacity)?x.fill.opacity[this.seriesIndex]:x.fill.opacity;o.color&&(M=o.color),M||(M="#fff",console.warn("undefined color - ApexCharts"));var U=M;if(-1===M.indexOf("rgb")?M.length<9&&(U=We.hexToRgba(M,F)):M.indexOf("rgba")>-1&&(F=We.getOpacityFromRGBA(M)),o.opacity&&(F=o.opacity),"pattern"===I&&(_=this.handlePatternFill({fillConfig:o.fillConfig,patternFill:_,fillColor:M,fillOpacity:F,defaultColor:U})),"gradient"===I&&(b=this.handleGradientFill({fillConfig:o.fillConfig,fillColor:M,fillOpacity:F,i:this.seriesIndex})),"image"===I){var $=x.fill.image.src,q=o.patternID?o.patternID:"";this.clippedImgArea({opacity:F,image:Array.isArray($)?o.seriesNumber<$.length?$[o.seriesNumber]:$[0]:$,width:o.width?o.width:void 0,height:o.height?o.height:void 0,patternUnits:o.patternUnits,patternID:"pattern".concat(c.globals.cuid).concat(o.seriesNumber+1).concat(q)}),h="url(#pattern".concat(c.globals.cuid).concat(o.seriesNumber+1).concat(q,")")}else h="gradient"===I?b:"pattern"===I?_:U;return o.solid&&(h=U),h}},{key:"getFillType",value:function(o){var c=this.w;return Array.isArray(c.config.fill.type)?c.config.fill.type[o]:c.config.fill.type}},{key:"getFillColors",value:function(){var o=this.w,c=o.config,h=this.opts,_=[];return o.globals.comboCharts?"line"===o.config.series[this.seriesIndex].type?Array.isArray(o.globals.stroke.colors)?_=o.globals.stroke.colors:_.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?_=o.globals.fill.colors:_.push(o.globals.fill.colors):"line"===c.chart.type?Array.isArray(o.globals.stroke.colors)?_=o.globals.stroke.colors:_.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?_=o.globals.fill.colors:_.push(o.globals.fill.colors),void 0!==h.fillColors&&(_=[],Array.isArray(h.fillColors)?_=h.fillColors.slice():_.push(h.fillColors)),_}},{key:"handlePatternFill",value:function(o){var c=o.fillConfig,_=o.fillColor,b=o.fillOpacity,x=o.defaultColor,M=this.w.config.fill;c&&(M=c);var I=this.opts,F=new at(this.ctx),U=Array.isArray(M.pattern.strokeWidth)?M.pattern.strokeWidth[this.seriesIndex]:M.pattern.strokeWidth,$=_;return Array.isArray(M.pattern.style)?void 0!==M.pattern.style[I.seriesNumber]?F.drawPattern(M.pattern.style[I.seriesNumber],M.pattern.width,M.pattern.height,$,U,b):x:F.drawPattern(M.pattern.style,M.pattern.width,M.pattern.height,$,U,b)}},{key:"handleGradientFill",value:function(o){var c=o.fillColor,h=o.fillOpacity,_=o.fillConfig,b=o.i,x=this.w.config.fill;_&&(x=Fe(Fe({},x),_));var M,I=this.opts,F=new at(this.ctx),U=new We,$=x.gradient.type,q=c,ne=void 0===x.gradient.opacityFrom?h:Array.isArray(x.gradient.opacityFrom)?x.gradient.opacityFrom[b]:x.gradient.opacityFrom;q.indexOf("rgba")>-1&&(ne=We.getOpacityFromRGBA(q));var de=void 0===x.gradient.opacityTo?h:Array.isArray(x.gradient.opacityTo)?x.gradient.opacityTo[b]:x.gradient.opacityTo;if(void 0===x.gradient.gradientToColors||0===x.gradient.gradientToColors.length)M=U.shadeColor("dark"===x.gradient.shade?-1*parseFloat(x.gradient.shadeIntensity):parseFloat(x.gradient.shadeIntensity),c.indexOf("rgb")>-1?We.rgb2hex(c):c);else if(x.gradient.gradientToColors[I.seriesNumber]){var ge=x.gradient.gradientToColors[I.seriesNumber];M=ge,ge.indexOf("rgba")>-1&&(de=We.getOpacityFromRGBA(ge))}else M=c;if(x.gradient.gradientFrom&&(q=x.gradient.gradientFrom),x.gradient.gradientTo&&(M=x.gradient.gradientTo),x.gradient.inverseColors){var we=q;q=M,M=we}return q.indexOf("rgb")>-1&&(q=We.rgb2hex(q)),M.indexOf("rgb")>-1&&(M=We.rgb2hex(M)),F.drawGradient($,q,M,ne,de,I.size,x.gradient.stops,x.gradient.colorStops,b)}}]),le}(),on=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"setGlobalMarkerSize",value:function(){var o=this.w;if(o.globals.markers.size=Array.isArray(o.config.markers.size)?o.config.markers.size:[o.config.markers.size],o.globals.markers.size.length>0){if(o.globals.markers.size.length<o.globals.series.length+1)for(var c=0;c<=o.globals.series.length;c++)void 0===o.globals.markers.size[c]&&o.globals.markers.size.push(o.globals.markers.size[0])}else o.globals.markers.size=o.config.series.map(function(h){return o.config.markers.size})}},{key:"plotChartMarkers",value:function(o,c,h,_){var b,x=arguments.length>4&&void 0!==arguments[4]&&arguments[4],M=this.w,I=c,F=o,U=null,$=new at(this.ctx),q=M.config.markers.discrete&&M.config.markers.discrete.length;if((M.globals.markers.size[c]>0||x||q)&&(U=$.group({class:x||q?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(M.globals.cuid,")")),Array.isArray(F.x))for(var ne=0;ne<F.x.length;ne++){var de=h;1===h&&0===ne&&(de=0),1===h&&1===ne&&(de=1);var ge="apexcharts-marker";if("line"!==M.config.chart.type&&"area"!==M.config.chart.type||M.globals.comboCharts||M.config.tooltip.intersect||(ge+=" no-pointer-events"),(Array.isArray(M.config.markers.size)?M.globals.markers.size[c]>0:M.config.markers.size>0)||x||q){We.isNumber(F.y[ne])?ge+=" w".concat(We.randomId()):ge="apexcharts-nullpoint";var we=this.getMarkerConfig({cssClass:ge,seriesIndex:c,dataPointIndex:de});M.config.series[I].data[de]&&(M.config.series[I].data[de].fillColor&&(we.pointFillColor=M.config.series[I].data[de].fillColor),M.config.series[I].data[de].strokeColor&&(we.pointStrokeColor=M.config.series[I].data[de].strokeColor)),_&&(we.pSize=_),(F.x[ne]<0||F.x[ne]>M.globals.gridWidth||F.y[ne]<-M.globals.markers.largestSize||F.y[ne]>M.globals.gridHeight+M.globals.markers.largestSize)&&(we.pSize=0),(b=$.drawMarker(F.x[ne],F.y[ne],we)).attr("rel",de),b.attr("j",de),b.attr("index",c),b.node.setAttribute("default-marker-size",we.pSize),new li(this.ctx).setSelectionFilter(b,c,de),this.addEvents(b),U&&U.add(b)}else void 0===M.globals.pointsArray[c]&&(M.globals.pointsArray[c]=[]),M.globals.pointsArray[c].push([F.x[ne],F.y[ne]])}return U}},{key:"getMarkerConfig",value:function(o){var c=o.cssClass,h=o.seriesIndex,_=o.dataPointIndex,b=void 0===_?null:_,x=o.finishRadius,M=void 0===x?null:x,I=this.w,F=this.getMarkerStyle(h),U=I.globals.markers.size[h],$=I.config.markers;return null!==b&&$.discrete.length&&$.discrete.map(function(q){q.seriesIndex===h&&q.dataPointIndex===b&&(F.pointStrokeColor=q.strokeColor,F.pointFillColor=q.fillColor,U=q.size,F.pointShape=q.shape)}),{pSize:null===M?U:M,pRadius:$.radius,width:Array.isArray($.width)?$.width[h]:$.width,height:Array.isArray($.height)?$.height[h]:$.height,pointStrokeWidth:Array.isArray($.strokeWidth)?$.strokeWidth[h]:$.strokeWidth,pointStrokeColor:F.pointStrokeColor,pointFillColor:F.pointFillColor,shape:F.pointShape||(Array.isArray($.shape)?$.shape[h]:$.shape),class:c,pointStrokeOpacity:Array.isArray($.strokeOpacity)?$.strokeOpacity[h]:$.strokeOpacity,pointStrokeDashArray:Array.isArray($.strokeDashArray)?$.strokeDashArray[h]:$.strokeDashArray,pointFillOpacity:Array.isArray($.fillOpacity)?$.fillOpacity[h]:$.fillOpacity,seriesIndex:h}}},{key:"addEvents",value:function(o){var c=this.w,h=new at(this.ctx);o.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this.ctx,o)),o.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this.ctx,o)),o.node.addEventListener("mousedown",h.pathMouseDown.bind(this.ctx,o)),o.node.addEventListener("click",c.config.markers.onClick),o.node.addEventListener("dblclick",c.config.markers.onDblClick),o.node.addEventListener("touchstart",h.pathMouseDown.bind(this.ctx,o),{passive:!0})}},{key:"getMarkerStyle",value:function(o){var c=this.w,h=c.globals.markers.colors,_=c.config.markers.strokeColor||c.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(_)?_[o]:_,pointFillColor:Array.isArray(h)?h[o]:h}}}]),le}(),Wn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return Me(le,[{key:"draw",value:function(o,c,h){var _=this.w,b=new at(this.ctx),x=h.realIndex,M=h.pointsPos,I=h.zRatio,F=h.elParent,U=b.group({class:"apexcharts-series-markers apexcharts-series-".concat(_.config.chart.type)});if(U.attr("clip-path","url(#gridRectMarkerMask".concat(_.globals.cuid,")")),Array.isArray(M.x))for(var $=0;$<M.x.length;$++){var q=c+1,ne=!0;0===c&&0===$&&(q=0),0===c&&1===$&&(q=1);var de=0,ge=_.globals.markers.size[x];if(I!==1/0){var we=_.config.plotOptions.bubble;ge=_.globals.seriesZ[x][q],we.zScaling&&(ge/=I),we.minBubbleRadius&&ge<we.minBubbleRadius&&(ge=we.minBubbleRadius),we.maxBubbleRadius&&ge>we.maxBubbleRadius&&(ge=we.maxBubbleRadius)}_.config.chart.animations.enabled||(de=ge);var Se=M.y[$];if(de=de||0,null!==Se&&void 0!==_.globals.series[x][q]||(ne=!1),ne){var N=this.drawPoint(M.x[$],Se,de,ge,x,q,c);U.add(N)}F.add(U)}}},{key:"drawPoint",value:function(o,c,h,_,b,x,M){var I=this.w,F=b,U=new ni(this.ctx),$=new li(this.ctx),q=new Bi(this.ctx),ne=new on(this.ctx),de=new at(this.ctx),ge=ne.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:F,dataPointIndex:x,finishRadius:"bubble"===I.config.chart.type||I.globals.comboCharts&&I.config.series[b]&&"bubble"===I.config.series[b].type?_:null});_=ge.pSize;var we,me=q.fillPath({seriesNumber:b,dataPointIndex:x,color:ge.pointFillColor,patternUnits:"objectBoundingBox",value:I.globals.series[b][M]});if("circle"===ge.shape?we=de.drawCircle(h):"square"!==ge.shape&&"rect"!==ge.shape||(we=de.drawRect(0,0,ge.width-ge.pointStrokeWidth/2,ge.height-ge.pointStrokeWidth/2,ge.pRadius)),I.config.series[F].data[x]&&I.config.series[F].data[x].fillColor&&(me=I.config.series[F].data[x].fillColor),we.attr({x:o-ge.width/2-ge.pointStrokeWidth/2,y:c-ge.height/2-ge.pointStrokeWidth/2,cx:o,cy:c,fill:me,"fill-opacity":ge.pointFillOpacity,stroke:ge.pointStrokeColor,r:_,"stroke-width":ge.pointStrokeWidth,"stroke-dasharray":ge.pointStrokeDashArray,"stroke-opacity":ge.pointStrokeOpacity}),I.config.chart.dropShadow.enabled&&$.dropShadow(we,I.config.chart.dropShadow,b),!this.initialAnim||I.globals.dataChanged||I.globals.resized?I.globals.animationEnded=!0:U.animateMarker(we,0,"circle"===ge.shape?_:{width:ge.width,height:ge.height},I.config.chart.animations.speed,I.globals.easing,function(){window.setTimeout(function(){U.animationCompleted(we)},100)}),I.globals.dataChanged&&"circle"===ge.shape)if(this.dynamicAnim){var Q,pe,xe,Le,Ze=I.config.chart.animations.dynamicAnimation.speed;null!=(Le=I.globals.previousPaths[b]&&I.globals.previousPaths[b][M])&&(Q=Le.x,pe=Le.y,xe=void 0!==Le.r?Le.r:_);for(var kt=0;kt<I.globals.collapsedSeries.length;kt++)I.globals.collapsedSeries[kt].index===b&&(Ze=1,_=0);0===o&&0===c&&(_=0),U.animateCircle(we,{cx:Q,cy:pe,r:xe},{cx:o,cy:c,r:_},Ze,I.globals.easing)}else we.attr({r:_});return we.attr({rel:x,j:x,index:b,"default-marker-size":_}),$.setSelectionFilter(we,b,x),ne.addEvents(we),we.node.classList.add("apexcharts-marker"),we}},{key:"centerTextInBubble",value:function(o){return{y:o+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),le}(),Nn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"dataLabelsCorrection",value:function(o,c,h,_,b,x,M){var I=this.w,F=!1,U=new at(this.ctx).getTextRects(h,M),$=U.width,q=U.height;if(c<0&&(c=0),c>I.globals.gridHeight+q&&(c=I.globals.gridHeight+q/2),void 0===I.globals.dataLabelsRects[_]&&(I.globals.dataLabelsRects[_]=[]),I.globals.dataLabelsRects[_].push({x:o,y:c,width:$,height:q}),void 0!==I.globals.dataLabelsRects[_][I.globals.dataLabelsRects[_].length-2]){var ge=I.globals.dataLabelsRects[_][void 0!==I.globals.lastDrawnDataLabelsIndexes[_]?I.globals.lastDrawnDataLabelsIndexes[_][I.globals.lastDrawnDataLabelsIndexes[_].length-1]:0];(o>ge.x+ge.width||c>ge.y+ge.height||c+q<ge.y||o+$<ge.x)&&(F=!0)}return(0===b||x)&&(F=!0),{x:o,y:c,textRects:U,drawnextLabel:F}}},{key:"drawDataLabel",value:function(o){var c=this,h=o.type,_=o.pos,b=o.i,x=o.j,M=o.isRangeStart,I=o.strokeWidth,F=void 0===I?2:I,U=this.w,$=new at(this.ctx),q=U.config.dataLabels,ne=0,de=0,ge=x,we=null;if(-1!==U.globals.collapsedSeriesIndices.indexOf(b)||!q.enabled||!Array.isArray(_.x))return we;we=$.group({class:"apexcharts-data-labels"});for(var me=0;me<_.x.length;me++)if(ne=_.x[me]+q.offsetX,de=_.y[me]+q.offsetY+F,!isNaN(ne)){1===x&&0===me&&(ge=0),1===x&&1===me&&(ge=1);var Se=U.globals.series[b][ge];"rangeArea"===h&&(Se=M?U.globals.seriesRangeStart[b][ge]:U.globals.seriesRangeEnd[b][ge]);var N="",Q=function(pe){return U.config.dataLabels.formatter(pe,{ctx:c.ctx,seriesIndex:b,dataPointIndex:ge,w:U})};"bubble"===U.config.chart.type?(N=Q(Se=U.globals.seriesZ[b][ge]),de=_.y[me],de=new Wn(this.ctx).centerTextInBubble(de,b,ge).y):void 0!==Se&&(N=Q(Se)),this.plotDataLabelsText({x:ne,y:de,text:N,i:b,j:ge,parent:we,offsetCorrection:!0,dataLabelsConfig:U.config.dataLabels})}return we}},{key:"plotDataLabelsText",value:function(o){var c=this.w,h=new at(this.ctx),_=o.x,b=o.y,x=o.i,M=o.j,I=o.text,F=o.textAnchor,U=o.fontSize,$=o.parent,q=o.dataLabelsConfig,ne=o.color,de=o.alwaysDrawDataLabel,ge=o.offsetCorrection;if(!(Array.isArray(c.config.dataLabels.enabledOnSeries)&&c.config.dataLabels.enabledOnSeries.indexOf(x)<0)){var we={x:_,y:b,drawnextLabel:!0,textRects:null};ge&&(we=this.dataLabelsCorrection(_,b,I,x,M,de,parseInt(q.style.fontSize,10))),c.globals.zoomed||(_=we.x,b=we.y),we.textRects&&(_<-20-we.textRects.width||_>c.globals.gridWidth+we.textRects.width+30)&&(I="");var me=c.globals.dataLabels.style.colors[x];(("bar"===c.config.chart.type||"rangeBar"===c.config.chart.type)&&c.config.plotOptions.bar.distributed||c.config.dataLabels.distributed)&&(me=c.globals.dataLabels.style.colors[M]),"function"==typeof me&&(me=me({series:c.globals.series,seriesIndex:x,dataPointIndex:M,w:c})),ne&&(me=ne);var Se=q.offsetX,N=q.offsetY;if("bar"!==c.config.chart.type&&"rangeBar"!==c.config.chart.type||(Se=0,N=0),we.drawnextLabel){var Q=h.drawText({width:100,height:parseInt(q.style.fontSize,10),x:_+Se,y:b+N,foreColor:me,textAnchor:F||q.textAnchor,text:I,fontSize:U||q.style.fontSize,fontFamily:q.style.fontFamily,fontWeight:q.style.fontWeight||"normal"});if(Q.attr({class:"apexcharts-datalabel",cx:_,cy:b}),q.dropShadow.enabled){var pe=q.dropShadow;new li(this.ctx).dropShadow(Q,pe)}$.add(Q),void 0===c.globals.lastDrawnDataLabelsIndexes[x]&&(c.globals.lastDrawnDataLabelsIndexes[x]=[]),c.globals.lastDrawnDataLabelsIndexes[x].push(M)}}}},{key:"addBackgroundToDataLabel",value:function(o,c){var h=this.w,_=h.config.dataLabels.background,b=_.padding,x=_.padding/2,M=c.width,I=c.height,F=new at(this.ctx).drawRect(c.x-b,c.y-x/2,M+2*b,I+x,_.borderRadius,"transparent"===h.config.chart.background?"#fff":h.config.chart.background,_.opacity,_.borderWidth,_.borderColor);return _.dropShadow.enabled&&new li(this.ctx).dropShadow(F,_.dropShadow),F}},{key:"dataLabelsBackground",value:function(){var o=this.w;if("bubble"!==o.config.chart.type)for(var c=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),h=0;h<c.length;h++){var _=c[h],b=_.getBBox(),x=null;if(b.width&&b.height&&(x=this.addBackgroundToDataLabel(_,b)),x){_.parentNode.insertBefore(x.node,_);var M=_.getAttribute("fill");!o.config.chart.animations.enabled||o.globals.resized||o.globals.dataChanged?x.attr({fill:M}):x.animate().attr({fill:M}),_.setAttribute("fill",o.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var o=this.w,c=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),h=o.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),_=0;_<c.length;_++)h&&h.insertBefore(c[_],h.nextSibling)}}]),le}(),An=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.legendInactiveClass="legend-mouseover-inactive"}return Me(le,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(o){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(We.escapeString(o),"']"))}},{key:"isSeriesHidden",value:function(o){var c=this.getSeriesByName(o),h=parseInt(c.getAttribute("data:realIndex"),10);return{isHidden:c.classList.contains("apexcharts-series-collapsed"),realIndex:h}}},{key:"addCollapsedClassToSeries",value:function(o,c){var h=this.w;function _(b){for(var x=0;x<b.length;x++)b[x].index===c&&o.node.classList.add("apexcharts-series-collapsed")}_(h.globals.collapsedSeries),_(h.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(o){var c=this.isSeriesHidden(o);return this.ctx.legend.legendHelpers.toggleDataSeries(c.realIndex,c.isHidden),c.isHidden}},{key:"showSeries",value:function(o){var c=this.isSeriesHidden(o);c.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(c.realIndex,!0)}},{key:"hideSeries",value:function(o){var c=this.isSeriesHidden(o);c.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(c.realIndex,!1)}},{key:"resetSeries",value:function(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_=this.w,b=We.clone(_.globals.initialSeries);_.globals.previousPaths=[],h?(_.globals.collapsedSeries=[],_.globals.ancillaryCollapsedSeries=[],_.globals.collapsedSeriesIndices=[],_.globals.ancillaryCollapsedSeriesIndices=[]):b=this.emptyCollapsedSeries(b),_.config.series=b,o&&(c&&(_.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(b,_.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(o){for(var c=this.w,h=0;h<o.length;h++)c.globals.collapsedSeriesIndices.indexOf(h)>-1&&(o[h].data=[]);return o}},{key:"toggleSeriesOnHover",value:function(o,c){var h=this.w;c||(c=o.target);var _=h.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===o.type){var b=parseInt(c.getAttribute("rel"),10)-1,x=null,M=null;h.globals.axisCharts||"radialBar"===h.config.chart.type?h.globals.axisCharts?(x=h.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(b,"']")),M=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(b,"']"))):x=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(b+1,"']")):x=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(b+1,"'] path"));for(var I=0;I<_.length;I++)_[I].classList.add(this.legendInactiveClass);null!==x&&(h.globals.axisCharts||x.parentNode.classList.remove(this.legendInactiveClass),x.classList.remove(this.legendInactiveClass),null!==M&&M.classList.remove(this.legendInactiveClass))}else if("mouseout"===o.type)for(var F=0;F<_.length;F++)_[F].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(o,c){var h=this,_=this.w,b=_.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),x=function(I){for(var F=0;F<b.length;F++)b[F].classList[I](h.legendInactiveClass)};if("mousemove"===o.type){var M=parseInt(c.getAttribute("rel"),10)-1;x("add"),function(I){for(var F=0;F<b.length;F++){var U=parseInt(b[F].getAttribute("val"),10);U>=I.from&&U<=I.to&&b[F].classList.remove(h.legendInactiveClass)}}(_.config.plotOptions.heatmap.colorScale.ranges[M])}else"mouseout"===o.type&&x("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],h=this.w,_=0;if(h.config.series.length>1)for(var b=h.config.series.map(function(M,I){return M.data&&M.data.length>0&&-1===h.globals.collapsedSeriesIndices.indexOf(I)&&(!h.globals.comboCharts||0===c.length||c.length&&c.indexOf(h.config.series[I].type)>-1)?I:-1}),x="asc"===o?0:b.length-1;"asc"===o?x<b.length:x>=0;"asc"===o?x++:x--)if(-1!==b[x]){_=b[x];break}return _}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(o,c){return"bar"===o.type||"column"===o.type?c:-1}).filter(function(o){return-1!==o}):this.w.config.series.map(function(o,c){return c})}},{key:"getPreviousPaths",value:function(){var o=this.w;function c(x,M,I){for(var F=x[M].childNodes,U={type:I,paths:[],realIndex:x[M].getAttribute("data:realIndex")},$=0;$<F.length;$++)if(F[$].hasAttribute("pathTo")){var q=F[$].getAttribute("pathTo");U.paths.push({d:q})}o.globals.previousPaths.push(U)}o.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(x){for(var I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(x,"-series .apexcharts-series")),F=0;F<I.length;F++)c(I,F,x)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var h=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series"));if(h.length>0)for(var _=function(x){for(var M=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(x,"'] rect")),I=[],F=function($){var q=function(de){return M[$].getAttribute(de)},ne={x:parseFloat(q("x")),y:parseFloat(q("y")),width:parseFloat(q("width")),height:parseFloat(q("height"))};I.push({rect:ne,color:M[$].getAttribute("color")})},U=0;U<M.length;U++)F(U);o.globals.previousPaths.push(I)},b=0;b<h.length;b++)_(b);o.globals.axisCharts||(o.globals.previousPaths=o.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(o){var c=this.w,h=c.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o,"-series .apexcharts-series"));if(h.length>0)for(var _=0;_<h.length;_++){for(var b=c.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o,"-series .apexcharts-series[data\\:realIndex='").concat(_,"'] circle")),x=[],M=0;M<b.length;M++)x.push({x:b[M].getAttribute("cx"),y:b[M].getAttribute("cy"),r:b[M].getAttribute("r")});c.globals.previousPaths.push(x)}}},{key:"clearPreviousPaths",value:function(){var o=this.w;o.globals.previousPaths=[],o.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var o=this.w,c=o.config.noData,h=new at(this.ctx),_=o.globals.svgWidth/2,b=o.globals.svgHeight/2,x="middle";if(o.globals.noData=!0,o.globals.animationEnded=!0,"left"===c.align?(_=10,x="start"):"right"===c.align&&(_=o.globals.svgWidth-10,x="end"),"top"===c.verticalAlign?b=50:"bottom"===c.verticalAlign&&(b=o.globals.svgHeight-50),_+=c.offsetX,b=b+parseInt(c.style.fontSize,10)+2+c.offsetY,void 0!==c.text&&""!==c.text){var M=h.drawText({x:_,y:b,text:c.text,textAnchor:x,fontSize:c.style.fontSize,fontFamily:c.style.fontFamily,foreColor:c.style.color,opacity:1,class:"apexcharts-text-nodata"});o.globals.dom.Paper.add(M)}}},{key:"setNullSeriesToZeroValues",value:function(o){for(var c=this.w,h=0;h<o.length;h++)if(0===o[h].length)for(var _=0;_<o[c.globals.maxValsInArrayIndex].length;_++)o[h].push(0);return o}},{key:"hasAllSeriesEqualX",value:function(){for(var o=!0,c=this.w,h=this.filteredSeriesX(),_=0;_<h.length-1;_++)if(h[_][0]!==h[_+1][0]){o=!1;break}return c.globals.allSeriesHasEqualX=o,o}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(c){return c.length>0?c:[]})}}]),le}(),Gi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new si(this.ctx)}return Me(le,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var o=this.w.config.series.slice(),c=new An(this.ctx);if(this.activeSeriesIndex=c.getActiveConfigSeriesIndex(),void 0!==o[this.activeSeriesIndex].data&&o[this.activeSeriesIndex].data.length>0&&null!==o[this.activeSeriesIndex].data[0]&&void 0!==o[this.activeSeriesIndex].data[0].x&&null!==o[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var o=this.w.config.series.slice(),c=new An(this.ctx);if(this.activeSeriesIndex=c.getActiveConfigSeriesIndex(),void 0!==o[this.activeSeriesIndex].data&&o[this.activeSeriesIndex].data.length>0&&null!=o[this.activeSeriesIndex].data[0]&&o[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(o,c){for(var h=this.w.config,_=this.w.globals,b="boxPlot"===h.chart.type||"boxPlot"===h.series[c].type,x=0;x<o[c].data.length;x++)if(void 0!==o[c].data[x][1]&&(Array.isArray(o[c].data[x][1])&&4===o[c].data[x][1].length&&!b?this.twoDSeries.push(We.parseNumber(o[c].data[x][1][3])):this.twoDSeries.push(We.parseNumber(o[c].data[x].length>=5?o[c].data[x][4]:o[c].data[x][1])),_.dataFormatXNumeric=!0),"datetime"===h.xaxis.type){var M=new Date(o[c].data[x][0]);M=new Date(M).getTime(),this.twoDSeriesX.push(M)}else this.twoDSeriesX.push(o[c].data[x][0]);for(var I=0;I<o[c].data.length;I++)void 0!==o[c].data[I][2]&&(this.threeDSeries.push(o[c].data[I][2]),_.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(o,c){var h=this.w.config,_=this.w.globals,b=new _i(this.ctx),x=c;_.collapsedSeriesIndices.indexOf(c)>-1&&(x=this.activeSeriesIndex);for(var M=0;M<o[c].data.length;M++)void 0!==o[c].data[M].y&&(Array.isArray(o[c].data[M].y)?this.twoDSeries.push(We.parseNumber(o[c].data[M].y[o[c].data[M].y.length-1])):this.twoDSeries.push(We.parseNumber(o[c].data[M].y))),void 0!==o[c].data[M].goals&&Array.isArray(o[c].data[M].goals)?(void 0===this.seriesGoals[c]&&(this.seriesGoals[c]=[]),this.seriesGoals[c].push(o[c].data[M].goals)):(void 0===this.seriesGoals[c]&&(this.seriesGoals[c]=[]),this.seriesGoals[c].push(null));for(var I=0;I<o[x].data.length;I++){var F="string"==typeof o[x].data[I].x,U=Array.isArray(o[x].data[I].x),$=!U&&!!b.isValidDate(o[x].data[I].x);F||$?F||h.xaxis.convertedCatToNumeric?"datetime"!==h.xaxis.type||_.isBarHorizontal&&_.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[x].data[I].x),isNaN(o[x].data[I].x)||"category"===this.w.config.xaxis.type||"string"==typeof o[x].data[I].x||(_.isXNumeric=!0)):this.twoDSeriesX.push(b.parseDate(o[x].data[I].x)):"datetime"===h.xaxis.type?this.twoDSeriesX.push(b.parseDate(o[x].data[I].x.toString())):(_.dataFormatXNumeric=!0,_.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(o[x].data[I].x))):U?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[x].data[I].x)):(_.isXNumeric=!0,_.dataFormatXNumeric=!0,this.twoDSeriesX.push(o[x].data[I].x))}if(o[c].data[0]&&void 0!==o[c].data[0].z){for(var ne=0;ne<o[c].data.length;ne++)this.threeDSeries.push(o[c].data[ne].z);_.isDataXYZ=!0}}},{key:"handleRangeData",value:function(o,c){var h=this.w.globals,_={};return this.isFormat2DArray()?_=this.handleRangeDataFormat("array",o,c):this.isFormatXY()&&(_=this.handleRangeDataFormat("xy",o,c)),h.seriesRangeStart.push(void 0===_.start?[]:_.start),h.seriesRangeEnd.push(void 0===_.end?[]:_.end),h.seriesRange.push(_.rangeUniques),h.seriesRange.forEach(function(b,x){b&&b.forEach(function(M,I){M.y.forEach(function(F,U){for(var $=0;$<M.y.length;$++)U!==$&&F.y1<=M.y[$].y2&&M.y[$].y1<=F.y2&&(M.overlaps.indexOf(F.rangeName)<0&&M.overlaps.push(F.rangeName),M.overlaps.indexOf(M.y[$].rangeName)<0&&M.overlaps.push(M.y[$].rangeName))})})}),_}},{key:"handleCandleStickBoxData",value:function(o,c){var h=this.w.globals,_={};return this.isFormat2DArray()?_=this.handleCandleStickBoxDataFormat("array",o,c):this.isFormatXY()&&(_=this.handleCandleStickBoxDataFormat("xy",o,c)),h.seriesCandleO[c]=_.o,h.seriesCandleH[c]=_.h,h.seriesCandleM[c]=_.m,h.seriesCandleL[c]=_.l,h.seriesCandleC[c]=_.c,_}},{key:"handleRangeDataFormat",value:function(o,c,h){var _=[],b=[],x=c[h].data.filter(function(U,$,q){return $===q.findIndex(function(ne){return ne.x===U.x})}).map(function(U,$){return{x:U.x,overlaps:[],y:[]}});if("array"===o)for(var M=0;M<c[h].data.length;M++)Array.isArray(c[h].data[M])?(_.push(c[h].data[M][1][0]),b.push(c[h].data[M][1][1])):(_.push(c[h].data[M]),b.push(c[h].data[M]));else if("xy"===o)for(var I=function(U){var $=Array.isArray(c[h].data[U].y),q=We.randomId(),ne=c[h].data[U].x,de={y1:$?c[h].data[U].y[0]:c[h].data[U].y,y2:$?c[h].data[U].y[1]:c[h].data[U].y,rangeName:q};c[h].data[U].rangeName=q;var ge=x.findIndex(function(we){return we.x===ne});x[ge].y.push(de),_.push(de.y1),b.push(de.y2)},F=0;F<c[h].data.length;F++)I(F);return{start:_,end:b,rangeUniques:x}}},{key:"handleCandleStickBoxDataFormat",value:function(o,c,h){var _=this.w,b="boxPlot"===_.config.chart.type||"boxPlot"===_.config.series[h].type,x=[],M=[],I=[],F=[],U=[];if("array"===o)if(b&&6===c[h].data[0].length||!b&&5===c[h].data[0].length)for(var $=0;$<c[h].data.length;$++)x.push(c[h].data[$][1]),M.push(c[h].data[$][2]),b?(I.push(c[h].data[$][3]),F.push(c[h].data[$][4]),U.push(c[h].data[$][5])):(F.push(c[h].data[$][3]),U.push(c[h].data[$][4]));else for(var q=0;q<c[h].data.length;q++)Array.isArray(c[h].data[q][1])&&(x.push(c[h].data[q][1][0]),M.push(c[h].data[q][1][1]),b?(I.push(c[h].data[q][1][2]),F.push(c[h].data[q][1][3]),U.push(c[h].data[q][1][4])):(F.push(c[h].data[q][1][2]),U.push(c[h].data[q][1][3])));else if("xy"===o)for(var ne=0;ne<c[h].data.length;ne++)Array.isArray(c[h].data[ne].y)&&(x.push(c[h].data[ne].y[0]),M.push(c[h].data[ne].y[1]),b?(I.push(c[h].data[ne].y[2]),F.push(c[h].data[ne].y[3]),U.push(c[h].data[ne].y[4])):(F.push(c[h].data[ne].y[2]),U.push(c[h].data[ne].y[3])));return{o:x,h:M,m:I,l:F,c:U}}},{key:"parseDataAxisCharts",value:function(o){var c,h=this,b=this.w.config,x=this.w.globals,M=new _i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),I=b.labels.length>0?b.labels.slice():b.xaxis.categories.slice();if(x.isRangeBar="rangeBar"===b.chart.type&&x.isBarHorizontal,x.hasXaxisGroups="category"===b.xaxis.type&&b.xaxis.group.groups.length>0,x.hasXaxisGroups&&(x.groups=b.xaxis.group.groups),x.hasSeriesGroups=null===(c=o[0])||void 0===c?void 0:c.group,x.hasSeriesGroups){var F=[],U=ot(new Set(o.map(function(de){return de.group})));o.forEach(function(de,ge){var we=U.indexOf(de.group);F[we]||(F[we]=[]),F[we].push(de.name)}),x.seriesGroups=F}for(var $=function(){for(var de=0;de<I.length;de++)if("string"==typeof I[de]){if(!M.isValidDate(I[de]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");h.twoDSeriesX.push(M.parseDate(I[de]))}else h.twoDSeriesX.push(I[de])},q=0;q<o.length;q++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===o[q].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==b.chart.type&&"rangeArea"!==b.chart.type&&"rangeBar"!==o[q].type&&"rangeArea"!==o[q].type||(x.isRangeData=!0,"rangeBar"!==b.chart.type&&"rangeArea"!==b.chart.type||this.handleRangeData(o,q)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(o,q):this.isFormatXY()&&this.handleFormatXY(o,q),"candlestick"!==b.chart.type&&"candlestick"!==o[q].type&&"boxPlot"!==b.chart.type&&"boxPlot"!==o[q].type||this.handleCandleStickBoxData(o,q),x.series.push(this.twoDSeries),x.labels.push(this.twoDSeriesX),x.seriesX.push(this.twoDSeriesX),x.seriesGoals=this.seriesGoals,q!==this.activeSeriesIndex||this.fallbackToCategory||(x.isXNumeric=!0);else{"datetime"===b.xaxis.type?(x.isXNumeric=!0,$(),x.seriesX.push(this.twoDSeriesX)):"numeric"===b.xaxis.type&&(x.isXNumeric=!0,I.length>0&&(this.twoDSeriesX=I,x.seriesX.push(this.twoDSeriesX))),x.labels.push(this.twoDSeriesX);var ne=o[q].data.map(function(de){return We.parseNumber(de)});x.series.push(ne)}x.seriesZ.push(this.threeDSeries),x.seriesNames.push(void 0!==o[q].name?o[q].name:"series-"+parseInt(q+1,10)),x.seriesColors.push(void 0!==o[q].color?o[q].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(o){var c=this.w.globals,h=this.w.config;c.series=o.slice(),c.seriesNames=h.labels.slice();for(var _=0;_<c.series.length;_++)void 0===c.seriesNames[_]&&c.seriesNames.push("series-"+(_+1));return this.w}},{key:"handleExternalLabelsData",value:function(o){var c=this.w.config,h=this.w.globals;c.xaxis.categories.length>0?h.labels=c.xaxis.categories:c.labels.length>0?h.labels=c.labels.slice():this.fallbackToCategory?(h.labels=h.labels[0],h.seriesRange.length&&(h.seriesRange.map(function(_){_.forEach(function(b){h.labels.indexOf(b.x)<0&&b.x&&h.labels.push(b.x)})}),h.labels=Array.from(new Set(h.labels.map(JSON.stringify)),JSON.parse)),c.xaxis.convertedCatToNumeric&&(new xn(c).convertCatToNumericXaxis(c,this.ctx,h.seriesX[0]),this._generateExternalLabels(o))):this._generateExternalLabels(o)}},{key:"_generateExternalLabels",value:function(o){var c=this.w.globals,h=this.w.config,_=[];if(c.axisCharts){if(c.series.length>0)if(this.isFormatXY())for(var b=h.series.map(function($,q){return $.data.filter(function(ne,de,ge){return ge.findIndex(function(we){return we.x===ne.x})===de})}),x=b.reduce(function($,q,ne,de){return de[$].length>q.length?$:ne},0),M=0;M<b[x].length;M++)_.push(M+1);else for(var I=0;I<c.series[c.maxValsInArrayIndex].length;I++)_.push(I+1);c.seriesX=[];for(var F=0;F<o.length;F++)c.seriesX.push(_);this.w.globals.isBarHorizontal||(c.isXNumeric=!0)}if(0===_.length){_=c.axisCharts?[]:c.series.map(function($,q){return q+1});for(var U=0;U<o.length;U++)c.seriesX.push(_)}c.labels=_,h.xaxis.convertedCatToNumeric&&(c.categoryLabels=_.map(function($){return h.xaxis.labels.formatter($)})),c.noLabelsProvided=!0}},{key:"parseData",value:function(o){var c=this.w,h=c.config,_=c.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),_.axisCharts?(this.parseDataAxisCharts(o),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(o),h.chart.stacked){var b=new An(this.ctx);_.series=b.setNullSeriesToZeroValues(_.series)}this.coreUtils.getSeriesTotals(),_.axisCharts&&(_.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),_.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),_.dataFormatXNumeric||_.isXNumeric&&("numeric"!==h.xaxis.type||0!==h.labels.length||0!==h.xaxis.categories.length)||this.handleExternalLabelsData(o);for(var x=this.coreUtils.getCategoryLabels(_.labels),M=0;M<x.length;M++)if(Array.isArray(x[M])){_.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var o=this.w,c=[];o.globals.seriesYAxisMap.forEach(function(h,_){var b=0;h.forEach(function(x){-1!==o.globals.collapsedSeriesIndices.indexOf(x)&&b++}),b>0&&b==h.length&&c.push(_)}),o.globals.ignoreYAxisIndexes=c.map(function(h){return h})}}]),le}(),kr=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"getLabel",value:function(o,c,h,_){var we,me,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",M=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],I=this.w,F=void 0===o[_]?"":o[_],U=F,$=I.globals.xLabelFormatter,q=I.config.xaxis.labels.formatter,ne=!1,de=new Ci(this.ctx);M&&(U=de.xLabelFormat($,F,F,{i:_,dateFormatter:new _i(this.ctx).formatDate,w:I}),void 0!==q&&(U=q(F,o[_],{i:_,dateFormatter:new _i(this.ctx).formatDate,w:I}))),c.length>0?(we=c[_].unit,me=null,c.forEach(function(pe){"month"===pe.unit?me="year":"day"===pe.unit?me="month":"hour"===pe.unit?me="day":"minute"===pe.unit&&(me="hour")}),ne=me===we,h=c[_].position,U=c[_].value):"datetime"===I.config.xaxis.type&&void 0===q&&(U=""),void 0===U&&(U=""),U=Array.isArray(U)?U:U.toString();var N,Se=new at(this.ctx);N=I.globals.rotateXLabels&&M?Se.getTextRects(U,parseInt(x,10),null,"rotate(".concat(I.config.xaxis.labels.rotate," 0 0)"),!1):Se.getTextRects(U,parseInt(x,10));var Q=!I.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(U)&&("NaN"===String(U)||b.indexOf(U)>=0&&Q)&&(U=""),{x:h,text:U,textRect:N,isBold:ne}}},{key:"checkLabelBasedOnTickamount",value:function(o,c,h){var _=this.w,b=_.config.xaxis.tickAmount;return"dataPoints"===b&&(b=Math.round(_.globals.gridWidth/120)),b>h||o%Math.round(h/(b+1))==0||(c.text=""),c}},{key:"checkForOverflowingLabels",value:function(o,c,h,_,b){var x=this.w;if(0===o&&x.globals.skipFirstTimelinelabel&&(c.text=""),o===h-1&&x.globals.skipLastTimelinelabel&&(c.text=""),x.config.xaxis.labels.hideOverlappingLabels&&_.length>0){var M=b[b.length-1];c.x<M.textRect.width/(x.globals.rotateXLabels?Math.abs(x.config.xaxis.labels.rotate)/12:1.01)+M.x&&(c.text="")}return c}},{key:"checkForReversedLabels",value:function(o,c){var h=this.w;return h.config.yaxis[o]&&h.config.yaxis[o].reversed&&c.reverse(),c}},{key:"isYAxisHidden",value:function(o){var c=this.w,h=new si(this.ctx),_=!c.globals.seriesYAxisMap[o].some(function(b){return-1===c.globals.collapsedSeriesIndices.indexOf(b)});return!c.config.yaxis[o].show||!c.config.yaxis[o].showForNullSeries&&h.isSeriesNull(o)&&_}},{key:"getYAxisForeColor",value:function(o,c){var h=this.w;return Array.isArray(o)&&h.globals.yAxisScale[c]&&this.ctx.theme.pushExtraColors(o,h.globals.yAxisScale[c].result.length,!1),o}},{key:"drawYAxisTicks",value:function(o,c,h,_,b,x,M){var I=this.w,F=new at(this.ctx),U=I.globals.translateY;if(_.show&&c>0){!0===I.config.yaxis[b].opposite&&(o+=_.width);for(var $=c;$>=0;$--){var q=U+c/10+I.config.yaxis[b].labels.offsetY-1;I.globals.isBarHorizontal&&(q=x*$),"heatmap"===I.config.chart.type&&(q+=x/2);var ne=F.drawLine(o+h.offsetX-_.width+_.offsetX,q+_.offsetY,o+h.offsetX+_.offsetX,q+_.offsetY,_.color);M.add(ne),U+=x}}}}]),le}(),sr=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"scaleSvgNode",value:function(o,c){var h=parseFloat(o.getAttributeNS(null,"width")),_=parseFloat(o.getAttributeNS(null,"height"));o.setAttributeNS(null,"width",h*c),o.setAttributeNS(null,"height",_*c),o.setAttributeNS(null,"viewBox","0 0 "+h+" "+_)}},{key:"fixSvgStringForIe11",value:function(o){if(!We.isIE11())return o.replace(/&nbsp;/g,"&#160;");var c=0,h=o.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(_){return 2==++c?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':_});return(h=h.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(o){null==o&&(o=1);var c=this.w.globals.dom.Paper.svg();if(1!==o){var h=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(h,o),c=(new XMLSerializer).serializeToString(h)}return this.fixSvgStringForIe11(c)}},{key:"cleanup",value:function(){var o=this.w,c=o.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),h=o.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),_=o.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(_,function(b){b.setAttribute("width",0)}),c&&c[0]&&(c[0].setAttribute("x",-500),c[0].setAttribute("x1",-500),c[0].setAttribute("x2",-500)),h&&h[0]&&(h[0].setAttribute("y",-100),h[0].setAttribute("y1",-100),h[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var o=this.getSvgString(),c=new Blob([o],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(c)}},{key:"dataURI",value:function(o){var c=this;return new Promise(function(h){var _=c.w,b=o?o.scale||o.width/_.globals.svgWidth:1;c.cleanup();var x=document.createElement("canvas");x.width=_.globals.svgWidth*b,x.height=parseInt(_.globals.dom.elWrap.style.height,10)*b;var M="transparent"===_.config.chart.background?"#fff":_.config.chart.background,I=x.getContext("2d");I.fillStyle=M,I.fillRect(0,0,x.width*b,x.height*b);var F=c.getSvgString(b);if(window.canvg&&We.isIE11()){var U=window.canvg.Canvg.fromString(I,F,{ignoreClear:!0,ignoreDimensions:!0});U.start();var $=x.msToBlob();U.stop(),h({blob:$})}else{var q="data:image/svg+xml,"+encodeURIComponent(F),ne=new Image;ne.crossOrigin="anonymous",ne.onload=function(){if(I.drawImage(ne,0,0),x.msToBlob){var de=x.msToBlob();h({blob:de})}else{var ge=x.toDataURL("image/png");h({imgURI:ge})}},ne.src=q}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var o=this;this.dataURI().then(function(c){var h=c.imgURI,_=c.blob;_?navigator.msSaveOrOpenBlob(_,o.w.globals.chartID+".png"):o.triggerDownload(h,o.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(o){var c=this,h=o.series,_=o.fileName,b=o.columnDelimiter,x=void 0===b?",":b,M=o.lineDelimiter,I=void 0===M?"\n":M,F=this.w;h||(h=F.config.series);var U,$,q=[],ne=[],de="",ge=F.globals.series.map(function(xe,Le){return-1===F.globals.collapsedSeriesIndices.indexOf(Le)?xe:[]}),we=function(xe){return"datetime"===F.config.xaxis.type&&String(xe).length>=10},me=Math.max.apply(Math,ot(h.map(function(xe){return xe.data?xe.data.length:0}))),Se=new Gi(this.ctx),N=new kr(this.ctx),Q=function(xe){var Le="";if(F.globals.axisCharts){if("category"===F.config.xaxis.type||F.config.xaxis.convertedCatToNumeric)if(F.globals.isBarHorizontal){var Ze=F.globals.yLabelFormatters[0],kt=new An(c.ctx).getActiveConfigSeriesIndex();Le=Ze(F.globals.labels[xe],{seriesIndex:kt,dataPointIndex:xe,w:F})}else Le=N.getLabel(F.globals.labels,F.globals.timescaleLabels,0,xe).text;"datetime"===F.config.xaxis.type&&(F.config.xaxis.categories.length?Le=F.config.xaxis.categories[xe]:F.config.labels.length&&(Le=F.config.labels[xe]))}else Le=F.config.labels[xe];return Array.isArray(Le)&&(Le=Le.join(" ")),We.isNumber(Le)?Le:Le.split(x).join("")};q.push(F.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===F.config.chart.type?(q.push("minimum"),q.push("q1"),q.push("median"),q.push("q3"),q.push("maximum")):"candlestick"===F.config.chart.type?(q.push("open"),q.push("high"),q.push("low"),q.push("close")):"rangeBar"===F.config.chart.type?(q.push("minimum"),q.push("maximum")):h.map(function(xe,Le){var Ze=(xe.name?xe.name:"series-".concat(Le))+"";F.globals.axisCharts&&q.push(Ze.split(x).join("")?Ze.split(x).join(""):"series-".concat(Le))}),F.globals.axisCharts||(q.push(F.config.chart.toolbar.export.csv.headerValue),ne.push(q.join(x))),F.globals.allSeriesHasEqualX||!F.globals.axisCharts||F.config.xaxis.categories.length||F.config.labels.length?h.map(function(xe,Le){F.globals.axisCharts?function(xe,Le){if(q.length&&0===Le&&ne.push(q.join(x)),xe.data){xe.data=xe.data.length&&xe.data||ot(Array(me)).map(function(){return""});for(var Ze=0;Ze<xe.data.length;Ze++){q=[];var kt=Q(Ze);if(kt||(Se.isFormatXY()?kt=h[Le].data[Ze].x:Se.isFormat2DArray()&&(kt=h[Le].data[Ze]?h[Le].data[Ze][0]:"")),0===Le){q.push(we(kt)?F.config.chart.toolbar.export.csv.dateFormatter(kt):We.isNumber(kt)?kt:kt.split(x).join(""));for(var It=0;It<F.globals.series.length;It++){var ii;Se.isFormatXY()?q.push(null===(ii=h[It].data[Ze])||void 0===ii?void 0:ii.y):q.push(ge[It][Ze])}}("candlestick"===F.config.chart.type||xe.type&&"candlestick"===xe.type)&&(q.pop(),q.push(F.globals.seriesCandleO[Le][Ze]),q.push(F.globals.seriesCandleH[Le][Ze]),q.push(F.globals.seriesCandleL[Le][Ze]),q.push(F.globals.seriesCandleC[Le][Ze])),("boxPlot"===F.config.chart.type||xe.type&&"boxPlot"===xe.type)&&(q.pop(),q.push(F.globals.seriesCandleO[Le][Ze]),q.push(F.globals.seriesCandleH[Le][Ze]),q.push(F.globals.seriesCandleM[Le][Ze]),q.push(F.globals.seriesCandleL[Le][Ze]),q.push(F.globals.seriesCandleC[Le][Ze])),"rangeBar"===F.config.chart.type&&(q.pop(),q.push(F.globals.seriesRangeStart[Le][Ze]),q.push(F.globals.seriesRangeEnd[Le][Ze])),q.length&&ne.push(q.join(x))}}}(xe,Le):((q=[]).push(F.globals.labels[Le].split(x).join("")),q.push(ge[Le]),ne.push(q.join(x)))}):(U=new Set,$={},h.forEach(function(xe,Le){xe?.data.forEach(function(Ze){var kt,It;if(Se.isFormatXY())kt=Ze.x,It=Ze.y;else{if(!Se.isFormat2DArray())return;kt=Ze[0],It=Ze[1]}$[kt]||($[kt]=Array(h.length).fill("")),$[kt][Le]=It,U.add(kt)})}),q.length&&ne.push(q.join(x)),Array.from(U).sort().forEach(function(xe){ne.push([we(xe)&&"datetime"===F.config.xaxis.type?F.config.chart.toolbar.export.csv.dateFormatter(xe):We.isNumber(xe)?xe:xe.split(x).join(""),$[xe].join(x)])})),de+=ne.join(I),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+de),_||F.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(o,c,h){var _=document.createElement("a");_.href=o,_.download=(c||this.w.globals.chartID)+h,document.body.appendChild(_),_.click(),document.body.removeChild(_)}}]),le}(),fr=function(){function le(o,c){V(this,le),this.ctx=o,this.elgrid=c,this.w=o.w;var h=this.w;this.axesUtils=new kr(o),this.xaxisLabels=h.globals.labels.slice(),h.globals.timescaleLabels.length>0&&!h.globals.isBarHorizontal&&(this.xaxisLabels=h.globals.timescaleLabels.slice()),h.config.xaxis.overwriteCategories&&(this.xaxisLabels=h.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===h.config.xaxis.position?0:h.globals.gridHeight+1,this.offY=this.offY+h.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.xaxisBorderWidth=h.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=h.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?h.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=h.config.xaxis.axisBorder.height,this.yaxis=h.config.yaxis[0]}return Me(le,[{key:"drawXaxis",value:function(){var o=this.w,c=new at(this.ctx),h=c.group({class:"apexcharts-xaxis",transform:"translate(".concat(o.config.xaxis.offsetX,", ").concat(o.config.xaxis.offsetY,")")}),_=c.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(o.globals.translateXAxisX,", ").concat(o.globals.translateXAxisY,")")});h.add(_);for(var b=[],x=0;x<this.xaxisLabels.length;x++)b.push(this.xaxisLabels[x]);if(this.drawXAxisLabelAndGroup(!0,c,_,b,o.globals.isXNumeric,function(de,ge){return ge}),o.globals.hasXaxisGroups){var M=o.globals.groups;b=[];for(var I=0;I<M.length;I++)b.push(M[I].title);var F={};o.config.xaxis.group.style&&(F.xaxisFontSize=o.config.xaxis.group.style.fontSize,F.xaxisFontFamily=o.config.xaxis.group.style.fontFamily,F.xaxisForeColors=o.config.xaxis.group.style.colors,F.fontWeight=o.config.xaxis.group.style.fontWeight,F.cssClass=o.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,c,_,b,!1,function(de,ge){return M[de].cols*ge},F)}if(void 0!==o.config.xaxis.title.text){var U=c.group({class:"apexcharts-xaxis-title"}),$=c.drawText({x:o.globals.gridWidth/2+o.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===o.config.xaxis.position?o.globals.xAxisLabelsHeight:-o.globals.xAxisLabelsHeight-10)+o.config.xaxis.title.offsetY,text:o.config.xaxis.title.text,textAnchor:"middle",fontSize:o.config.xaxis.title.style.fontSize,fontFamily:o.config.xaxis.title.style.fontFamily,fontWeight:o.config.xaxis.title.style.fontWeight,foreColor:o.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+o.config.xaxis.title.style.cssClass});U.add($),h.add(U)}if(o.config.xaxis.axisBorder.show){var q=o.globals.barPadForNumericAxis,ne=c.drawLine(o.globals.padHorizontal+o.config.xaxis.axisBorder.offsetX-q,this.offY,this.xaxisBorderWidth+q,this.offY,o.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&o.config.grid.show?this.elgrid.elGridBorders.add(ne):h.add(ne)}return h}},{key:"drawXAxisLabelAndGroup",value:function(o,c,h,_,b,x){var M,I=this,F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},U=[],$=[],q=this.w,ne=F.xaxisFontSize||this.xaxisFontSize,de=F.xaxisFontFamily||this.xaxisFontFamily,ge=F.xaxisForeColors||this.xaxisForeColors,we=F.fontWeight||q.config.xaxis.labels.style.fontWeight,me=F.cssClass||q.config.xaxis.labels.style.cssClass,Se=q.globals.padHorizontal,N=_.length,Q="category"===q.config.xaxis.type?q.globals.dataPoints:N;0===Q&&N>Q&&(Q=N),b?(M=q.globals.gridWidth/Math.min(Q>1?Q-1:Q,N-1),Se=Se+x(0,M)/2+q.config.xaxis.labels.offsetX):Se=Se+x(0,M=q.globals.gridWidth/Q)+q.config.xaxis.labels.offsetX;for(var xe=function(Ze){var kt=Se-x(Ze,M)/2+q.config.xaxis.labels.offsetX;0===Ze&&1===N&&M/2===Se&&1===Q&&(kt=q.globals.gridWidth/2);var It=I.axesUtils.getLabel(_,q.globals.timescaleLabels,kt,Ze,U,ne,o),ii=28;if(q.globals.rotateXLabels&&o&&(ii=22),q.config.xaxis.title.text&&"top"===q.config.xaxis.position&&(ii+=parseFloat(q.config.xaxis.title.style.fontSize)+2),o||(ii=ii+parseFloat(ne)+(q.globals.xAxisLabelsHeight-q.globals.xAxisGroupLabelsHeight)+(q.globals.rotateXLabels?10:0)),It=void 0!==q.config.xaxis.tickAmount&&"dataPoints"!==q.config.xaxis.tickAmount&&"datetime"!==q.config.xaxis.type?I.axesUtils.checkLabelBasedOnTickamount(Ze,It,N):I.axesUtils.checkForOverflowingLabels(Ze,It,N,U,$),q.config.xaxis.labels.show){var wi=c.drawText({x:It.x,y:I.offY+q.config.xaxis.labels.offsetY+ii-("top"===q.config.xaxis.position?q.globals.xAxisHeight+q.config.xaxis.axisTicks.height-2:0),text:It.text,textAnchor:"middle",fontWeight:It.isBold?600:we,fontSize:ne,fontFamily:de,foreColor:Array.isArray(ge)?o&&q.config.xaxis.convertedCatToNumeric?ge[q.globals.minX+Ze-1]:ge[Ze]:ge,isPlainText:!1,cssClass:(o?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+me});if(h.add(wi),wi.on("click",function(dn){if("function"==typeof q.config.chart.events.xAxisLabelClick){var En=Object.assign({},q,{labelIndex:Ze});q.config.chart.events.xAxisLabelClick(dn,I.ctx,En)}}),o){var Mi=document.createElementNS(q.globals.SVGNS,"title");Mi.textContent=Array.isArray(It.text)?It.text.join(" "):It.text,wi.node.appendChild(Mi),""!==It.text&&(U.push(It.text),$.push(It))}}Ze<N-1&&(Se+=x(Ze+1,M))},Le=0;Le<=N-1;Le++)xe(Le)}},{key:"drawXaxisInversed",value:function(o){var c,h,_=this,b=this.w,x=new at(this.ctx),M=b.config.yaxis[0].opposite?b.globals.translateYAxisX[o]:0,I=x.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:o}),F=x.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+M+", 0)"});I.add(F);var U=[];if(b.config.yaxis[o].show)for(var $=0;$<this.xaxisLabels.length;$++)U.push(this.xaxisLabels[$]);h=-(c=b.globals.gridHeight/U.length)/2.2;var q=b.globals.yLabelFormatters[0],ne=b.config.yaxis[0].labels;if(ne.show)for(var de=function(pe){var xe=void 0===U[pe]?"":U[pe];xe=q(xe,{seriesIndex:o,dataPointIndex:pe,w:b});var Le=_.axesUtils.getYAxisForeColor(ne.style.colors,o),Ze=0;Array.isArray(xe)&&(Ze=xe.length/2*parseInt(ne.style.fontSize,10));var kt=ne.offsetX-15,It="end";_.yaxis.opposite&&(It="start"),"left"===b.config.yaxis[0].labels.align?(kt=ne.offsetX,It="start"):"center"===b.config.yaxis[0].labels.align?(kt=ne.offsetX,It="middle"):"right"===b.config.yaxis[0].labels.align&&(It="end");var ii=x.drawText({x:kt,y:h+c+ne.offsetY-Ze,text:xe,textAnchor:It,foreColor:Array.isArray(Le)?Le[pe]:Le,fontSize:ne.style.fontSize,fontFamily:ne.style.fontFamily,fontWeight:ne.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+ne.style.cssClass,maxWidth:ne.maxWidth});F.add(ii),ii.on("click",function(dn){if("function"==typeof b.config.chart.events.xAxisLabelClick){var En=Object.assign({},b,{labelIndex:pe});b.config.chart.events.xAxisLabelClick(dn,_.ctx,En)}});var wi=document.createElementNS(b.globals.SVGNS,"title");if(wi.textContent=Array.isArray(xe)?xe.join(" "):xe,ii.node.appendChild(wi),0!==b.config.yaxis[o].labels.rotate){var Mi=x.rotateAroundCenter(ii.node);ii.node.setAttribute("transform","rotate(".concat(b.config.yaxis[o].labels.rotate," 0 ").concat(Mi.y,")"))}h+=c},ge=0;ge<=U.length-1;ge++)de(ge);if(void 0!==b.config.yaxis[0].title.text){var we=x.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+M+", 0)"}),me=x.drawText({x:b.config.yaxis[0].title.offsetX,y:b.globals.gridHeight/2+b.config.yaxis[0].title.offsetY,text:b.config.yaxis[0].title.text,textAnchor:"middle",foreColor:b.config.yaxis[0].title.style.color,fontSize:b.config.yaxis[0].title.style.fontSize,fontWeight:b.config.yaxis[0].title.style.fontWeight,fontFamily:b.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+b.config.yaxis[0].title.style.cssClass});we.add(me),I.add(we)}var Se=0;this.isCategoryBarHorizontal&&b.config.yaxis[0].opposite&&(Se=b.globals.gridWidth);var N=b.config.xaxis.axisBorder;if(N.show){var Q=x.drawLine(b.globals.padHorizontal+N.offsetX+Se,1+N.offsetY,b.globals.padHorizontal+N.offsetX+Se,b.globals.gridHeight+N.offsetY,N.color,0);this.elgrid&&this.elgrid.elGridBorders&&b.config.grid.show?this.elgrid.elGridBorders.add(Q):I.add(Q)}return b.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(Se,U.length,b.config.yaxis[0].axisBorder,b.config.yaxis[0].axisTicks,0,c,I),I}},{key:"drawXaxisTicks",value:function(o,c,h){var _=this.w,b=o;if(!(o<0||o-2>_.globals.gridWidth)){var x=this.offY+_.config.xaxis.axisTicks.offsetY;if(c=c+x+_.config.xaxis.axisTicks.height,"top"===_.config.xaxis.position&&(c=x-_.config.xaxis.axisTicks.height),_.config.xaxis.axisTicks.show){var M=new at(this.ctx).drawLine(o+_.config.xaxis.axisTicks.offsetX,x+_.config.xaxis.offsetY,b+_.config.xaxis.axisTicks.offsetX,c+_.config.xaxis.offsetY,_.config.xaxis.axisTicks.color);h.add(M),M.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var o=this.w,c=[],h=this.xaxisLabels.length,_=o.globals.padHorizontal;if(o.globals.timescaleLabels.length>0)for(var b=0;b<h;b++)c.push(_=this.xaxisLabels[b].position);else for(var x=h,M=0;M<x;M++){var I=x;o.globals.isXNumeric&&"bar"!==o.config.chart.type&&(I-=1),c.push(_+=o.globals.gridWidth/I)}return c}},{key:"xAxisLabelCorrections",value:function(){var o=this.w,c=new at(this.ctx),h=o.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),_=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),b=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),x=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(o.globals.rotateXLabels||o.config.xaxis.labels.rotateAlways)for(var M=0;M<_.length;M++){var I=c.rotateAroundCenter(_[M]);I.y=I.y-1,I.x=I.x+1,_[M].setAttribute("transform","rotate(".concat(o.config.xaxis.labels.rotate," ").concat(I.x," ").concat(I.y,")")),_[M].setAttribute("text-anchor","end"),h.setAttribute("transform","translate(0, ".concat(-10,")")),o.config.xaxis.labels.trim&&Array.prototype.forEach.call(_[M].childNodes,function(ne){c.placeTextWithEllipsis(ne,ne.textContent,o.globals.xAxisLabelsHeight-("bottom"===o.config.legend.position?20:10))})}else!function(){for(var ne=o.globals.gridWidth/(o.globals.labels.length+1),de=0;de<_.length;de++)o.config.xaxis.labels.trim&&"datetime"!==o.config.xaxis.type&&Array.prototype.forEach.call(_[de].childNodes,function(we){c.placeTextWithEllipsis(we,we.textContent,ne)})}();if(b.length>0){var U=b[b.length-1].getBBox(),$=b[0].getBBox();U.x<-20&&b[b.length-1].parentNode.removeChild(b[b.length-1]),$.x+$.width>o.globals.gridWidth&&!o.globals.isBarHorizontal&&b[0].parentNode.removeChild(b[0]);for(var q=0;q<x.length;q++)c.placeTextWithEllipsis(x[q],x[q].textContent,o.config.yaxis[0].labels.maxWidth-(o.config.yaxis[0].title.text?2*parseFloat(o.config.yaxis[0].title.style.fontSize):0)-15)}}}]),le}(),wn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.xaxisLabels=c.globals.labels.slice(),this.axesUtils=new kr(o),this.isRangeBar=c.globals.seriesRange.length&&c.globals.isBarHorizontal,c.globals.timescaleLabels.length>0&&(this.xaxisLabels=c.globals.timescaleLabels.slice())}return Me(le,[{key:"drawGridArea",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=this.w,h=new at(this.ctx);null===o&&(o=h.group({class:"apexcharts-grid"}));var _=h.drawLine(c.globals.padHorizontal,1,c.globals.padHorizontal,c.globals.gridHeight,"transparent"),b=h.drawLine(c.globals.padHorizontal,c.globals.gridHeight,c.globals.gridWidth,c.globals.gridHeight,"transparent");return o.add(b),o.add(_),o}},{key:"drawGrid",value:function(){var o=null;return this.w.globals.axisCharts&&(o=this.renderGrid(),this.drawGridArea(o.el)),o}},{key:"createGridMask",value:function(){var o=this.w,c=o.globals,h=new at(this.ctx),_=Array.isArray(o.config.stroke.width)?0:o.config.stroke.width;if(Array.isArray(o.config.stroke.width)){var b=0;o.config.stroke.width.forEach(function($){b=Math.max(b,$)}),_=b}c.dom.elGridRectMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(c.cuid)),c.dom.elGridRectMarkerMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(c.cuid)),c.dom.elForecastMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elForecastMask.setAttribute("id","forecastMask".concat(c.cuid)),c.dom.elNonForecastMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(c.cuid));var x=o.config.chart.type,M=0,I=0;("bar"===x||"rangeBar"===x||"candlestick"===x||"boxPlot"===x||o.globals.comboBarCount>0)&&o.globals.isXNumeric&&!o.globals.isBarHorizontal&&(I=o.config.grid.padding.right,c.barPadForNumericAxis>(M=o.config.grid.padding.left)&&(M=c.barPadForNumericAxis,I=c.barPadForNumericAxis)),c.dom.elGridRect=h.drawRect(-_-M-2,2*-_-2,c.gridWidth+_+I+M+4,c.gridHeight+4*_+4,0,"#fff");var F=o.globals.markers.largestSize+1;c.dom.elGridRectMarker=h.drawRect(2*-F,2*-F,c.gridWidth+4*F,c.gridHeight+4*F,0,"#fff"),c.dom.elGridRectMask.appendChild(c.dom.elGridRect.node),c.dom.elGridRectMarkerMask.appendChild(c.dom.elGridRectMarker.node);var U=c.dom.baseEl.querySelector("defs");U.appendChild(c.dom.elGridRectMask),U.appendChild(c.dom.elForecastMask),U.appendChild(c.dom.elNonForecastMask),U.appendChild(c.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(o){var c=o.i,h=o.x1,M=o.xCount,F=this.w;if(!(0===c&&F.globals.skipFirstTimelinelabel||c===M-1&&F.globals.skipLastTimelinelabel&&!F.config.xaxis.labels.formatter||"radar"===F.config.chart.type)){F.config.grid.xaxis.lines.show&&this._drawGridLine({i:c,x1:h,y1:o.y1,x2:o.x2,y2:o.y2,xCount:M,parent:o.parent});var U=0;if(F.globals.hasXaxisGroups&&"between"===F.config.xaxis.tickPlacement){var $=F.globals.groups;if($){for(var q=0,ne=0;q<c&&ne<$.length;ne++)q+=$[ne].cols;q===c&&(U=.6*F.globals.xAxisLabelsHeight)}}new fr(this.ctx).drawXaxisTicks(h,U,F.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(o){var c=o.i,h=o.x1,_=o.y1,b=o.x2,x=o.y2,M=o.xCount,I=o.parent,F=this.w,U=!1,$=I.node.classList.contains("apexcharts-gridlines-horizontal"),q=F.config.grid.strokeDashArray,ne=F.globals.barPadForNumericAxis;(0===_&&0===x||0===h&&0===b)&&(U=!0),_===F.globals.gridHeight&&x===F.globals.gridHeight&&(U=!0),!F.globals.isBarHorizontal||0!==c&&c!==M-1||(U=!0);var de=new at(this).drawLine(h-($?ne:0),_,b+($?ne:0),x,F.config.grid.borderColor,q);de.node.classList.add("apexcharts-gridline"),U&&F.config.grid.show?this.elGridBorders.add(de):I.add(de)}},{key:"_drawGridBandRect",value:function(o){var c=o.c,h=o.x1,_=o.y1,b=o.x2,x=o.y2,M=o.type,I=this.w,F=new at(this.ctx),U=I.globals.barPadForNumericAxis;if("column"!==M||"datetime"!==I.config.xaxis.type){var q=F.drawRect(h-("row"===M?U:0),_,b+("row"===M?2*U:0),x,0,I.config.grid[M].colors[c],I.config.grid[M].opacity);this.elg.add(q),q.attr("clip-path","url(#gridRectMask".concat(I.globals.cuid,")")),q.node.classList.add("apexcharts-grid-".concat(M))}}},{key:"_drawXYLines",value:function(o){var c=this,h=o.xCount,_=o.tickAmount,b=this.w;if(b.config.grid.xaxis.lines.show||b.config.xaxis.axisTicks.show){var x,M=b.globals.padHorizontal,I=b.globals.gridHeight;b.globals.timescaleLabels.length?function(de){for(var ge=de.xC,me=de.y1,N=de.y2,Q=0;Q<ge;Q++)c._drawGridLines({i:Q,x1:c.xaxisLabels[Q].position,y1:me,x2:c.xaxisLabels[Q].position,y2:N,xCount:h,parent:c.elgridLinesV})}({xC:h,x1:M,y1:0,x2:x,y2:I}):(b.globals.isXNumeric&&(h=b.globals.xAxisScale.result.length),function(de){for(var ge=de.xC,we=de.x1,me=de.y1,Se=de.x2,N=de.y2,Q=0;Q<ge+(b.globals.isXNumeric?0:1);Q++)0===Q&&1===ge&&1===b.globals.dataPoints&&(Se=we=b.globals.gridWidth/2),c._drawGridLines({i:Q,x1:we,y1:me,x2:Se,y2:N,xCount:h,parent:c.elgridLinesV}),Se=we+=b.globals.gridWidth/(b.globals.isXNumeric?ge-1:ge)}({xC:h,x1:M,y1:0,x2:x,y2:I}))}if(b.config.grid.yaxis.lines.show){var F=0,U=0,$=b.globals.gridWidth,q=_+1;this.isRangeBar&&(q=b.globals.labels.length);for(var ne=0;ne<q+(this.isRangeBar?1:0);ne++)this._drawGridLine({i:ne,xCount:q+(this.isRangeBar?1:0),x1:0,y1:F,x2:$,y2:U,parent:this.elgridLinesH}),U=F+=b.globals.gridHeight/(this.isRangeBar?q:_)}}},{key:"_drawInvertedXYLines",value:function(o){var c=o.xCount,h=this.w;if(h.config.grid.xaxis.lines.show||h.config.xaxis.axisTicks.show)for(var _,b=h.globals.padHorizontal,x=h.globals.gridHeight,M=0;M<c+1;M++)h.config.grid.xaxis.lines.show&&this._drawGridLine({i:M,xCount:c+1,x1:b,y1:0,x2:_,y2:x,parent:this.elgridLinesV}),new fr(this.ctx).drawXaxisTicks(b,0,h.globals.dom.elGraphical),_=b=b+h.globals.gridWidth/c+.3;if(h.config.grid.yaxis.lines.show)for(var I=0,F=0,U=h.globals.gridWidth,$=0;$<h.globals.dataPoints+1;$++)this._drawGridLine({i:$,xCount:h.globals.dataPoints+1,x1:0,y1:I,x2:U,y2:F,parent:this.elgridLinesH}),F=I+=h.globals.gridHeight/h.globals.dataPoints}},{key:"renderGrid",value:function(){var o=this.w,c=new at(this.ctx);this.elg=c.group({class:"apexcharts-grid"}),this.elgridLinesH=c.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=c.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=c.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),o.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var h=0;h<o.globals.seriesYAxisMap.length&&-1!==o.globals.ignoreYAxisIndexes.indexOf(h);)h++;h===o.globals.seriesYAxisMap.length&&(h=0);var _,x,M,I,b=o.globals.yAxisScale[h].result.length-1;return!o.globals.isBarHorizontal||this.isRangeBar?(_=this.xaxisLabels.length,this.isRangeBar&&(_--,b=o.globals.labels.length,o.config.xaxis.tickAmount&&o.config.xaxis.labels.formatter&&(_=o.config.xaxis.tickAmount),(null===(x=o.globals.yAxisScale)||void 0===x||null===(M=x[h])||void 0===M||null===(I=M.result)||void 0===I?void 0:I.length)>0&&"datetime"!==o.config.xaxis.type&&(_=o.globals.yAxisScale[h].result.length-1)),this._drawXYLines({xCount:_,tickAmount:b})):this._drawInvertedXYLines({xCount:_=b,tickAmount:b=o.globals.xTickAmount}),this.drawGridBands(_,b),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:o.globals.gridWidth/_}}},{key:"drawGridBands",value:function(o,c){var h=this.w;if(void 0!==h.config.grid.row.colors&&h.config.grid.row.colors.length>0)for(var _=0,b=h.globals.gridHeight/c,x=h.globals.gridWidth,M=0,I=0;M<c;M++,I++)I>=h.config.grid.row.colors.length&&(I=0),this._drawGridBandRect({c:I,x1:0,y1:_,x2:x,y2:b,type:"row"}),_+=h.globals.gridHeight/c;if(void 0!==h.config.grid.column.colors&&h.config.grid.column.colors.length>0)for(var F=h.globals.isBarHorizontal||"on"!==h.config.xaxis.tickPlacement||"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric?o:o-1,U=h.globals.padHorizontal,$=h.globals.padHorizontal+h.globals.gridWidth/F,q=h.globals.gridHeight,ne=0,de=0;ne<o;ne++,de++)de>=h.config.grid.column.colors.length&&(de=0),this._drawGridBandRect({c:de,x1:U,y1:0,x2:$,y2:q,type:"column"}),U+=h.globals.gridWidth/F}}]),le}(),en=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"niceScale",value:function(o,c){var h,_,b,x,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,I=1e-11,F=this.w,U=F.globals;U.isBarHorizontal?(h=F.config.xaxis,_=Math.max((U.svgWidth-100)/25,2)):(h=F.config.yaxis[M],_=Math.max((U.svgHeight-100)/15,2)),b=null!=h.min,x=void 0!==h.max&&null!==h.min;var $=null!=h.stepSize,q=null!=h.tickAmount,ne=q?h.tickAmount:h.forceNiceScale?U.niceScaleDefaultTicks[Math.min(Math.round(_/2),U.niceScaleDefaultTicks.length-1)]:10;if(U.isMultipleYAxis&&!q&&U.multiAxisTickAmount>0&&(ne=U.multiAxisTickAmount,q=!0),ne="dataPoints"===ne?U.dataPoints-1:Math.abs(Math.round(ne)),(o===Number.MIN_VALUE&&0===c||!We.isNumber(o)&&!We.isNumber(c)||o===Number.MIN_VALUE&&c===-Number.MAX_VALUE)&&(o=0,c=ne,U.allSeriesCollapsed=!1),o>c){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var de=c;c=o,o=de}else o===c&&(o=0===o?0:o-1,c=0===c?2:c+1);var ge=[];ne<1&&(ne=1);var we=ne,me=Math.abs(c-o);h.forceNiceScale&&(!b&&o>0&&o/me<.15&&(o=0,b=!0),!x&&c<0&&-c/me<.15&&(c=0,x=!0),me=Math.abs(c-o));var Se=me/we,N=Se,Q=Math.floor(Math.log10(N)),pe=Math.pow(10,Q),xe=Math.ceil(N/pe);if(Se=N=(xe=U.niceScaleAllowedMagMsd[0===U.yValueDecimal?0:1][xe])*pe,U.isBarHorizontal&&h.stepSize&&"datetime"!==h.type?(Se=h.stepSize,$=!0):$&&(Se=h.stepSize),$&&h.forceNiceScale){var Le=Math.floor(Math.log10(Se));Se*=Math.pow(10,Q-Le)}if(b&&x){var Ze=me/we;if(q)if($)if(0!=We.mod(me,Se)){var kt=We.getGCD(Se,Ze);Se=Ze/kt<10?kt:Ze}else 0==We.mod(Se,Ze)?Se=Ze:(Ze=Se,q=!1);else Se=Ze;else if($)0==We.mod(me,Se)?Ze=Se:Se=Ze;else if(0==We.mod(me,Se))Ze=Se;else{Ze=me/(we=Math.ceil(me/Se));var It=We.getGCD(me,Se);me/It<_&&(Ze=It),Se=Ze}we=Math.round(me/Se)}else{if(b||x)if(x)if(q)o=c-Se*we;else{var ii=o;o=Se*Math.floor(o/Se),Math.abs(c-o)/We.getGCD(me,Se)>_&&(o=c-Se*ne,o+=Se*Math.floor((ii-o)/Se))}else b&&(c=q?o+Se*we:Se*Math.ceil(c/Se));else if(q){var wi=Se/(c-o>c?1:2),Mi=wi*Math.floor(o/wi);Math.abs(Mi-o)<=wi/2?c=(o=Mi)+Se*we:o=(c=wi*Math.ceil(c/wi))-Se*we}else o=Se*Math.floor(o/Se),c=Se*Math.ceil(c/Se);me=Math.abs(c-o),Se=We.getGCD(me,Se),we=Math.round(me/Se)}if(q||b||x||(we=Math.ceil((me-I)/(Se+I)))>16&&We.getPrimeFactors(we).length<2&&we++,U.isMultipleYAxis&&0==U.multiAxisTickAmount&&(U.multiAxisTickAmount=we),we>_&&(!q&&!$||h.forceNiceScale)){var dn=We.getPrimeFactors(we),En=dn.length-1,Fn=we;e:for(var Jn=0;Jn<En;Jn++)for(var ar=0;ar<=En-Jn;ar++){for(var lr=Math.min(ar+Jn,En),Lr=Fn,Hr=1,Wr=ar;Wr<=lr;Wr++)Hr*=dn[Wr];if((Lr/=Hr)<_){Fn=Lr;break e}}Se=Fn===we?me:me/Fn}var Mr=o-Se,qn=Se*I;do{ge.push(We.stripNumber(Mr+=Se,7))}while(c-Mr>qn);return{result:ge,niceMin:ge[0],niceMax:ge[ge.length-1]}}},{key:"linearScale",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,x=Math.abs(c-o);"dataPoints"===(h=this._adjustTicksForSmallRange(h,_,x))&&(h=this.w.globals.dataPoints-1),b||(b=x/h),h===Number.MAX_VALUE&&(h=5,b=1);for(var M=[],I=o;h>=0;)M.push(I),I+=b,h-=1;return{result:M,niceMin:M[0],niceMax:M[M.length-1]}}},{key:"logarithmicScaleNice",value:function(o,c,h){c<=0&&(c=Math.max(o,h)),o<=0&&(o=Math.min(c,h));for(var _=[],b=Math.ceil(Math.log(c)/Math.log(h)+1),x=Math.floor(Math.log(o)/Math.log(h));x<b;x++)_.push(Math.pow(h,x));return{result:_,niceMin:_[0],niceMax:_[_.length-1]}}},{key:"logarithmicScale",value:function(o,c,h){c<=0&&(c=Math.max(o,h)),o<=0&&(o=Math.min(c,h));for(var _=[],b=Math.log(c)/Math.log(h),x=Math.log(o)/Math.log(h),M=b-x,I=Math.round(M),F=M/I,U=0,$=x;U<I;U++,$+=F)_.push(Math.pow(h,$));return _.push(Math.pow(h,b)),{result:_,niceMin:o,niceMax:c}}},{key:"_adjustTicksForSmallRange",value:function(o,c,h){var _=o;if(void 0!==c&&this.w.config.yaxis[c].labels.formatter&&void 0===this.w.config.yaxis[c].tickAmount){var b=Number(this.w.config.yaxis[c].labels.formatter(1));We.isNumber(b)&&0===this.w.globals.yValueDecimal&&(_=Math.ceil(h))}return _<o?_:o}},{key:"setYScaleForIndex",value:function(o,c,h){var _=this.w.globals,b=this.w.config,x=_.isBarHorizontal?b.xaxis:b.yaxis[o];void 0===_.yAxisScale[o]&&(_.yAxisScale[o]=[]);var M=Math.abs(h-c);x.logarithmic&&M<=5&&(_.invalidLogScale=!0),x.logarithmic&&M>5?(_.allSeriesCollapsed=!1,_.yAxisScale[o]=x.forceNiceScale?this.logarithmicScaleNice(c,h,x.logBase):this.logarithmicScale(c,h,x.logBase)):h!==-Number.MAX_VALUE&&We.isNumber(h)?(_.allSeriesCollapsed=!1,_.yAxisScale[o]=this.niceScale(c,h,o)):_.yAxisScale[o]=this.linearScale(0,10,10,o,b.yaxis[o].stepSize)}},{key:"setXScale",value:function(o,c){var h=this.w,_=h.globals,b=Math.abs(c-o);return _.xAxisScale=c!==-Number.MAX_VALUE&&We.isNumber(c)?this.linearScale(o,c,h.config.xaxis.tickAmount?h.config.xaxis.tickAmount:b<10&&b>1?b+1:10,0,h.config.xaxis.stepSize):this.linearScale(0,10,10),_.xAxisScale}},{key:"setMultipleYScales",value:function(){var o=this.w.globals,c=this.w.config,h=o.minYArr,_=o.maxYArr,b=[],x=[],M=[];c.series.forEach(function(q,ne){M.push(ne),x.push(null)});var I,F=[];c.yaxis.forEach(function(q,ne){if(q.seriesName){var de=[];Array.isArray(q.seriesName)?de=q.seriesName:de.push(q.seriesName),b[ne]=[],de.forEach(function(ge){c.series.forEach(function(we,me){if(we.name===ge){b[ne].push(me),x[me]=ne;var Se=M.indexOf(me);M.splice(Se,1)}})})}else F.push(ne)});for(var U=0;U<F.length&&(b[I=F[U]]=[],M);U++){var $=M[0];M.shift(),b[I].push($),x[$]=I}I&&M.forEach(function(q){b[I].push(q),x[q]=I}),o.seriesYAxisMap=b.map(function(q){return q}),o.seriesYAxisReverseMap=x.map(function(q){return q}),this.sameScaleInMultipleAxes(h,_,b)}},{key:"sameScaleInMultipleAxes",value:function(o,c,h){var _=this,b=this.w.config,x=this.w.globals,M=[];h.forEach(function(F,U){for(var $=U+1;$<h.length;$++){var q,ne=ai(F.values());try{for(ne.s();!(q=ne.n()).done;){var ge=h[$].indexOf(q.value);-1!==ge&&(F.push($),h[$].splice(ge,1))}}catch(we){ne.e(we)}finally{ne.f()}h[$].length<1&&-1===M.indexOf($)&&M.push($)}});for(var I=M.length-1;I>=0;I--)h.splice(M[I],1);h.forEach(function(F,U){var $=Number.MAX_VALUE,q=-Number.MAX_VALUE;if(b.chart.stacked){for(var ne=x.seriesX[F[0]].map(function(Le){return Number.MIN_VALUE}),de=x.seriesX[F[0]].map(function(Le){return Number.MIN_VALUE}),ge=x.seriesX[F[0]].map(function(Le){return Number.MIN_VALUE}),we=b.series[F[0]].type,me=0;me<F.length;me++){var Se=F[me];if(-1===x.collapsedSeriesIndices.indexOf(Se))for(var N=0;N<x.series[Se].length;N++){var Q=x.series[Se][N];Q>=0?de[N]+=Q:ge[N]+=Q,ne[N]+=Q}}"bar"===we?($=Math.min.apply(null,ge),q=Math.max.apply(null,de)):($=Math.min.apply(null,ne),q=Math.max.apply(null,ne))}else{for(var pe=0;pe<F.length;pe++)$=Math.min($,o[F[pe]]);for(var xe=0;xe<F.length;xe++)q=Math.max(q,c[F[xe]])}void 0!==b.yaxis[U].min&&($="function"==typeof b.yaxis[U].min?b.yaxis[U].min($):b.yaxis[U].min),void 0!==b.yaxis[U].max&&(q="function"==typeof b.yaxis[U].max?b.yaxis[U].max(q):b.yaxis[U].max),_.setYScaleForIndex(U,$,q),F.forEach(function(Le){o[Le]=x.yAxisScale[U].niceMin,c[Le]=x.yAxisScale[U].niceMax})})}}]),le}(),_n=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.scales=new en(o)}return Me(le,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=this.w.config,x=this.w.globals,M=-Number.MAX_VALUE,I=Number.MIN_VALUE;null===_&&(_=o+1);var F=0,U=0,$=void 0;if(x.seriesX.length>=_){var q,ne;F=0,U=($=ot(new Set((q=[]).concat.apply(q,ot(x.seriesX.slice(o,_)))))).length-1;var de=null===(ne=x.brushSource)||void 0===ne?void 0:ne.w.config.chart.brush;if(b.chart.zoom.enabled&&b.chart.zoom.autoScaleYaxis||null!=de&&de.enabled&&null!=de&&de.autoScaleYaxis){if(b.xaxis.min)for(F=0;F<U&&$[F]<=b.xaxis.min;F++);if(b.xaxis.max)for(;U>F&&$[U]>=b.xaxis.max;U--);}}var ge=x.series,we=ge,me=ge;"candlestick"===b.chart.type?(we=x.seriesCandleL,me=x.seriesCandleH):"boxPlot"===b.chart.type?(we=x.seriesCandleO,me=x.seriesCandleC):x.isRangeData&&(we=x.seriesRangeStart,me=x.seriesRangeEnd);for(var Se=o;Se<_;Se++){x.dataPoints=Math.max(x.dataPoints,ge[Se].length);var N=b.series[Se].type;x.categoryLabels.length&&(x.dataPoints=x.categoryLabels.filter(function(xe){return void 0!==xe}).length),x.labels.length&&"datetime"!==b.xaxis.type&&0!==x.series.reduce(function(xe,Le){return xe+Le.length},0)&&(x.dataPoints=Math.max(x.dataPoints,x.labels.length)),$||(F=0,U=x.series[Se].length);for(var Q=F;Q<=U&&Q<x.series[Se].length;Q++){var pe=ge[Se][Q];if(null!==pe&&We.isNumber(pe)){switch(void 0!==me[Se][Q]&&(M=Math.max(M,me[Se][Q]),c=Math.min(c,me[Se][Q])),void 0!==we[Se][Q]&&(c=Math.min(c,we[Se][Q]),h=Math.max(h,we[Se][Q])),N){case"candlestick":void 0!==x.seriesCandleC[Se][Q]&&(M=Math.max(M,x.seriesCandleH[Se][Q]),c=Math.min(c,x.seriesCandleL[Se][Q]));case"boxPlot":void 0!==x.seriesCandleC[Se][Q]&&(M=Math.max(M,x.seriesCandleC[Se][Q]),c=Math.min(c,x.seriesCandleO[Se][Q]))}N&&"candlestick"!==N&&"boxPlot"!==N&&"rangeArea"!==N&&"rangeBar"!==N&&(M=Math.max(M,x.series[Se][Q]),c=Math.min(c,x.series[Se][Q])),h=M,x.seriesGoals[Se]&&x.seriesGoals[Se][Q]&&Array.isArray(x.seriesGoals[Se][Q])&&x.seriesGoals[Se][Q].forEach(function(xe){I!==Number.MIN_VALUE&&(I=Math.min(I,xe.value),c=I),M=Math.max(M,xe.value),h=M}),We.isFloat(pe)&&(pe=We.noExponents(pe),x.yValueDecimal=Math.max(x.yValueDecimal,pe.toString().split(".")[1].length)),I>we[Se][Q]&&we[Se][Q]<0&&(I=we[Se][Q])}else x.hasNullValues=!0}"bar"!==N&&"column"!==N||(I<0&&M<0&&(M=0,h=Math.max(h,0)),I===Number.MIN_VALUE&&(I=0,c=Math.min(c,0)))}return"rangeBar"===b.chart.type&&x.seriesRangeStart.length&&x.isBarHorizontal&&(I=c),"bar"===b.chart.type&&(I<0&&M<0&&(M=0),I===Number.MIN_VALUE&&(I=0)),{minY:I,maxY:M,lowestY:c,highestY:h}}},{key:"setYRange",value:function(){var o=this.w.globals,c=this.w.config;o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE;var h,_=Number.MAX_VALUE;if(o.isMultipleYAxis){_=Number.MAX_VALUE;for(var b=0;b<o.series.length;b++)h=this.getMinYMaxY(b),o.minYArr[b]=h.lowestY,o.maxYArr[b]=h.highestY,_=Math.min(_,h.lowestY)}return h=this.getMinYMaxY(0,_,null,o.series.length),"bar"===c.chart.type?(o.minY=h.minY,o.maxY=h.maxY):(o.minY=h.lowestY,o.maxY=h.highestY),_=h.lowestY,c.chart.stacked&&this._setStackedMinMax(),"line"===c.chart.type||"area"===c.chart.type||"scatter"===c.chart.type||"candlestick"===c.chart.type||"boxPlot"===c.chart.type||"rangeBar"===c.chart.type&&!o.isBarHorizontal?o.minY===Number.MIN_VALUE&&_!==-Number.MAX_VALUE&&_!==o.maxY&&(o.minY=_):o.minY=h.minY,c.yaxis.forEach(function(x,M){void 0!==x.max&&("number"==typeof x.max?o.maxYArr[M]=x.max:"function"==typeof x.max&&(o.maxYArr[M]=x.max(o.isMultipleYAxis?o.maxYArr[M]:o.maxY)),o.maxY=o.maxYArr[M]),void 0!==x.min&&("number"==typeof x.min?o.minYArr[M]=x.min:"function"==typeof x.min&&(o.minYArr[M]=x.min(o.isMultipleYAxis?o.minYArr[M]===Number.MIN_VALUE?0:o.minYArr[M]:o.minY)),o.minY=o.minYArr[M])}),o.isBarHorizontal&&["min","max"].forEach(function(x){void 0!==c.xaxis[x]&&"number"==typeof c.xaxis[x]&&("min"===x?o.minY=c.xaxis[x]:o.maxY=c.xaxis[x])}),o.isMultipleYAxis?(this.scales.setMultipleYScales(),o.minY=_):(this.scales.setYScaleForIndex(0,o.minY,o.maxY),o.minY=o.yAxisScale[0].niceMin,o.maxY=o.yAxisScale[0].niceMax,o.minYArr[0]=o.yAxisScale[0].niceMin,o.maxYArr[0]=o.yAxisScale[0].niceMax,o.seriesYAxisMap=[o.series.map(function(x,M){return M})],o.seriesYAxisReverseMap=o.series.map(function(x,M){return 0})),{minY:o.minY,maxY:o.maxY,minYArr:o.minYArr,maxYArr:o.maxYArr,yAxisScale:o.yAxisScale}}},{key:"setXRange",value:function(){var o=this.w.globals,c=this.w.config,h="numeric"===c.xaxis.type||"datetime"===c.xaxis.type||"category"===c.xaxis.type&&!o.noLabelsProvided||o.noLabelsProvided||o.isXNumeric;if(o.isXNumeric&&function(){for(var M=0;M<o.series.length;M++)if(o.labels[M])for(var I=0;I<o.labels[M].length;I++)null!==o.labels[M][I]&&We.isNumber(o.labels[M][I])&&(o.maxX=Math.max(o.maxX,o.labels[M][I]),o.initialMaxX=Math.max(o.maxX,o.labels[M][I]),o.minX=Math.min(o.minX,o.labels[M][I]),o.initialMinX=Math.min(o.minX,o.labels[M][I]))}(),o.noLabelsProvided&&0===c.xaxis.categories.length&&(o.maxX=o.labels[o.labels.length-1],o.initialMaxX=o.labels[o.labels.length-1],o.minX=1,o.initialMinX=1),o.isXNumeric||o.noLabelsProvided||o.dataFormatXNumeric){var _;if(void 0===c.xaxis.tickAmount?(_=Math.round(o.svgWidth/150),"numeric"===c.xaxis.type&&o.dataPoints<30&&(_=o.dataPoints-1),_>o.dataPoints&&0!==o.dataPoints&&(_=o.dataPoints-1)):"dataPoints"===c.xaxis.tickAmount?(o.series.length>1&&(_=o.series[o.maxValsInArrayIndex].length-1),o.isXNumeric&&(_=o.maxX-o.minX-1)):_=c.xaxis.tickAmount,o.xTickAmount=_,void 0!==c.xaxis.max&&"number"==typeof c.xaxis.max&&(o.maxX=c.xaxis.max),void 0!==c.xaxis.min&&"number"==typeof c.xaxis.min&&(o.minX=c.xaxis.min),void 0!==c.xaxis.range&&(o.minX=o.maxX-c.xaxis.range),o.minX!==Number.MAX_VALUE&&o.maxX!==-Number.MAX_VALUE)if(c.xaxis.convertedCatToNumeric&&!o.dataFormatXNumeric){for(var b=[],x=o.minX-1;x<o.maxX;x++)b.push(x+1);o.xAxisScale={result:b,niceMin:b[0],niceMax:b[b.length-1]}}else o.xAxisScale=this.scales.setXScale(o.minX,o.maxX);else o.xAxisScale=this.scales.linearScale(0,_,_,0,c.xaxis.stepSize),o.noLabelsProvided&&o.labels.length>0&&(o.xAxisScale=this.scales.linearScale(1,o.labels.length,_-1,0,c.xaxis.stepSize),o.seriesX=o.labels.slice());h&&(o.labels=o.xAxisScale.result.slice())}return o.isBarHorizontal&&o.labels.length&&(o.xTickAmount=o.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:o.minX,maxX:o.maxX}}},{key:"setZRange",value:function(){var o=this.w.globals;if(o.isDataXYZ)for(var c=0;c<o.series.length;c++)if(void 0!==o.seriesZ[c])for(var h=0;h<o.seriesZ[c].length;h++)null!==o.seriesZ[c][h]&&We.isNumber(o.seriesZ[c][h])&&(o.maxZ=Math.max(o.maxZ,o.seriesZ[c][h]),o.minZ=Math.min(o.minZ,o.seriesZ[c][h]))}},{key:"_handleSingleDataPoint",value:function(){var o=this.w.globals,c=this.w.config;if(o.minX===o.maxX){var h=new _i(this.ctx);if("datetime"===c.xaxis.type){var _=h.getDate(o.minX);c.xaxis.labels.datetimeUTC?_.setUTCDate(_.getUTCDate()-2):_.setDate(_.getDate()-2),o.minX=new Date(_).getTime();var b=h.getDate(o.maxX);c.xaxis.labels.datetimeUTC?b.setUTCDate(b.getUTCDate()+2):b.setDate(b.getDate()+2),o.maxX=new Date(b).getTime()}else("numeric"===c.xaxis.type||"category"===c.xaxis.type&&!o.noLabelsProvided)&&(o.minX=o.minX-2,o.initialMinX=o.minX,o.maxX=o.maxX+2,o.initialMaxX=o.maxX)}}},{key:"_getMinXDiff",value:function(){var o=this.w.globals;o.isXNumeric&&o.seriesX.forEach(function(c,h){1===c.length&&c.push(o.seriesX[o.maxValsInArrayIndex][o.seriesX[o.maxValsInArrayIndex].length-1]);var _=c.slice();_.sort(function(b,x){return b-x}),_.forEach(function(b,x){if(x>0){var M=b-_[x-1];M>0&&(o.minXDiff=Math.min(M,o.minXDiff))}}),1!==o.dataPoints&&o.minXDiff!==Number.MAX_VALUE||(o.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var o=this,c=this.w.globals;if(c.series.length){var h=c.seriesGroups;h.length||(h=[this.w.config.series.map(function(x){return x.name})]);var _={},b={};h.forEach(function(x){_[x]=[],b[x]=[],o.w.config.series.map(function(M,I){return x.indexOf(M.name)>-1?I:null}).filter(function(M){return null!==M}).forEach(function(M){for(var I=0;I<c.series[c.maxValsInArrayIndex].length;I++){var F,U;void 0===_[x][I]&&(_[x][I]=0,b[x][I]=0),(o.w.config.chart.stacked&&!c.comboCharts||o.w.config.chart.stacked&&c.comboCharts&&(!o.w.config.chart.stackOnlyBar||"bar"===(null===(F=o.w.config.series)||void 0===F||null===(U=F[M])||void 0===U?void 0:U.type)))&&null!==c.series[M][I]&&We.isNumber(c.series[M][I])&&(c.series[M][I]>0?_[x][I]+=parseFloat(c.series[M][I])+1e-4:b[x][I]+=parseFloat(c.series[M][I]))}})}),Object.entries(_).forEach(function(x){var M=Pt(x,1)[0];_[M].forEach(function(I,F){c.maxY=Math.max(c.maxY,_[M][F]),c.minY=Math.min(c.minY,b[M][F])})})}}}]),le}(),Xi=function(){function le(o,c){V(this,le),this.ctx=o,this.elgrid=c,this.w=o.w;var h=this.w;this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.axisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===h.config.xaxis.position&&(this.xAxisoffX=h.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new kr(o)}return Me(le,[{key:"drawYaxis",value:function(o){var c=this,h=this.w,_=new at(this.ctx),b=h.config.yaxis[o].labels.style,x=b.fontSize,M=b.fontFamily,I=b.fontWeight,F=_.group({class:"apexcharts-yaxis",rel:o,transform:"translate("+h.globals.translateYAxisX[o]+", 0)"});if(this.axesUtils.isYAxisHidden(o))return F;var U=_.group({class:"apexcharts-yaxis-texts-g"});F.add(U);var $=h.globals.yAxisScale[o].result.length-1,q=h.globals.gridHeight/$,ne=h.globals.translateY,de=h.globals.yLabelFormatters[o],ge=h.globals.yAxisScale[o].result.slice();ge=this.axesUtils.checkForReversedLabels(o,ge);var we="";if(h.config.yaxis[o].labels.show)for(var me=function(kt){var It=ge[kt];It=de(It,kt,h);var ii=h.config.yaxis[o].labels.padding;h.config.yaxis[o].opposite&&0!==h.config.yaxis.length&&(ii*=-1);var wi="end";h.config.yaxis[o].opposite&&(wi="start"),"left"===h.config.yaxis[o].labels.align?wi="start":"center"===h.config.yaxis[o].labels.align?wi="middle":"right"===h.config.yaxis[o].labels.align&&(wi="end");var Mi=c.axesUtils.getYAxisForeColor(b.colors,o),dn=h.config.yaxis[o].labels.offsetY;"heatmap"===h.config.chart.type&&(dn-=(h.globals.gridHeight/h.globals.series.length-1)/2);var En=_.drawText({x:ii,y:ne+$/10+dn+1,text:It,textAnchor:wi,fontSize:x,fontFamily:M,fontWeight:I,maxWidth:h.config.yaxis[o].labels.maxWidth,foreColor:Array.isArray(Mi)?Mi[kt]:Mi,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+b.cssClass});kt===$&&(we=En),U.add(En);var Fn=document.createElementNS(h.globals.SVGNS,"title");if(Fn.textContent=Array.isArray(It)?It.join(" "):It,En.node.appendChild(Fn),0!==h.config.yaxis[o].labels.rotate){var Jn=_.rotateAroundCenter(we.node),ar=_.rotateAroundCenter(En.node);En.node.setAttribute("transform","rotate(".concat(h.config.yaxis[o].labels.rotate," ").concat(Jn.x," ").concat(ar.y,")"))}ne+=q},Se=$;Se>=0;Se--)me(Se);if(void 0!==h.config.yaxis[o].title.text){var N=_.group({class:"apexcharts-yaxis-title"}),Q=0;h.config.yaxis[o].opposite&&(Q=h.globals.translateYAxisX[o]);var pe=_.drawText({x:Q,y:h.globals.gridHeight/2+h.globals.translateY+h.config.yaxis[o].title.offsetY,text:h.config.yaxis[o].title.text,textAnchor:"end",foreColor:h.config.yaxis[o].title.style.color,fontSize:h.config.yaxis[o].title.style.fontSize,fontWeight:h.config.yaxis[o].title.style.fontWeight,fontFamily:h.config.yaxis[o].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+h.config.yaxis[o].title.style.cssClass});N.add(pe),F.add(N)}var xe=h.config.yaxis[o].axisBorder,Le=31+xe.offsetX;if(h.config.yaxis[o].opposite&&(Le=-31-xe.offsetX),xe.show){var Ze=_.drawLine(Le,h.globals.translateY+xe.offsetY-2,Le,h.globals.gridHeight+h.globals.translateY+xe.offsetY+2,xe.color,0,xe.width);F.add(Ze)}return h.config.yaxis[o].axisTicks.show&&this.axesUtils.drawYAxisTicks(Le,$,xe,h.config.yaxis[o].axisTicks,o,q,F),F}},{key:"drawYaxisInversed",value:function(o){var c=this.w,h=new at(this.ctx),_=h.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),b=h.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(c.globals.translateXAxisX,", ").concat(c.globals.translateXAxisY,")")});_.add(b);var x=c.globals.yAxisScale[o].result.length-1,M=c.globals.gridWidth/x+.1,I=M+c.config.xaxis.labels.offsetX,F=c.globals.xLabelFormatter,U=c.globals.yAxisScale[o].result.slice(),$=c.globals.timescaleLabels;$.length>0&&(this.xaxisLabels=$.slice(),x=(U=$.slice()).length),U=this.axesUtils.checkForReversedLabels(o,U);var q=$.length;if(c.config.xaxis.labels.show)for(var ne=q?0:x;q?ne<q:ne>=0;q?ne++:ne--){var de=U[ne];de=F(de,ne,c);var ge=c.globals.gridWidth+c.globals.padHorizontal-(I-M+c.config.xaxis.labels.offsetX);if($.length){var we=this.axesUtils.getLabel(U,$,ge,ne,this.drawnLabels,this.xaxisFontSize);ge=we.x,de=we.text,this.drawnLabels.push(we.text),0===ne&&c.globals.skipFirstTimelinelabel&&(de=""),ne===U.length-1&&c.globals.skipLastTimelinelabel&&(de="")}var me=h.drawText({x:ge,y:this.xAxisoffX+c.config.xaxis.labels.offsetY+30-("top"===c.config.xaxis.position?c.globals.xAxisHeight+c.config.xaxis.axisTicks.height-2:0),text:de,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[o]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:c.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+c.config.xaxis.labels.style.cssClass});b.add(me),me.tspan(de);var Se=document.createElementNS(c.globals.SVGNS,"title");Se.textContent=de,me.node.appendChild(Se),I+=M}return this.inversedYAxisTitleText(_),this.inversedYAxisBorder(_),_}},{key:"inversedYAxisBorder",value:function(o){var c=this.w,h=new at(this.ctx),_=c.config.xaxis.axisBorder;if(_.show){var b=0;"bar"===c.config.chart.type&&c.globals.isXNumeric&&(b-=15);var x=h.drawLine(c.globals.padHorizontal+b+_.offsetX,this.xAxisoffX,c.globals.gridWidth,this.xAxisoffX,_.color,0,_.height);this.elgrid&&this.elgrid.elGridBorders&&c.config.grid.show?this.elgrid.elGridBorders.add(x):o.add(x)}}},{key:"inversedYAxisTitleText",value:function(o){var c=this.w,h=new at(this.ctx);if(void 0!==c.config.xaxis.title.text){var _=h.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),b=h.drawText({x:c.globals.gridWidth/2+c.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(c.config.xaxis.title.style.fontSize)+c.config.xaxis.title.offsetY+20,text:c.config.xaxis.title.text,textAnchor:"middle",fontSize:c.config.xaxis.title.style.fontSize,fontFamily:c.config.xaxis.title.style.fontFamily,fontWeight:c.config.xaxis.title.style.fontWeight,foreColor:c.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+c.config.xaxis.title.style.cssClass});_.add(b),o.add(_)}}},{key:"yAxisTitleRotate",value:function(o,c){var h=this.w,_=new at(this.ctx),b={width:0,height:0},x={width:0,height:0},M=h.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-texts-g"));null!==M&&(b=M.getBoundingClientRect());var I=h.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-title text"));if(null!==I&&(x=I.getBoundingClientRect()),null!==I){var F=this.xPaddingForYAxisTitle(o,b,x,c);I.setAttribute("x",F.xPos-(c?10:0))}if(null!==I){var U=_.rotateAroundCenter(I);I.setAttribute("transform","rotate(".concat(c?-1*h.config.yaxis[o].title.rotate:h.config.yaxis[o].title.rotate," ").concat(U.x," ").concat(U.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(o,c,h,_){var b=this.w,x=0,M=0,I=10;return void 0===b.config.yaxis[o].title.text||o<0?{xPos:M,padd:0}:(_?(M=c.width+b.config.yaxis[o].title.offsetX+h.width/2+I/2,0===(x+=1)&&(M-=I/2)):(M=-1*c.width+b.config.yaxis[o].title.offsetX+I/2+h.width/2,b.globals.isBarHorizontal&&(M=-1*c.width-b.config.yaxis[o].title.offsetX-(I=25))),{xPos:M,padd:I})}},{key:"setYAxisXPosition",value:function(o,c){var h=this.w,_=0,b=0,x=18,M=1;h.config.yaxis.length>1&&(this.multipleYs=!0),h.config.yaxis.map(function(I,F){var U=h.globals.ignoreYAxisIndexes.indexOf(F)>-1||!I.show||I.floating||0===o[F].width,$=o[F].width+c[F].width;I.opposite?h.globals.isBarHorizontal?h.globals.translateYAxisX[F]=(b=h.globals.gridWidth+h.globals.translateX-1)-I.labels.offsetX:(b=h.globals.gridWidth+h.globals.translateX+M,U||(M=M+$+20),h.globals.translateYAxisX[F]=b-I.labels.offsetX+20):(_=h.globals.translateX-x,U||(x=x+$+20),h.globals.translateYAxisX[F]=_+I.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var o=this.w,c=o.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(c=We.listToArray(c)).forEach(function(h,_){var b=o.config.yaxis[_];if(b&&!b.floating&&void 0!==b.labels.align){var x=o.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(_,"'] .apexcharts-yaxis-texts-g")),M=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(_,"'] .apexcharts-yaxis-label"));M=We.listToArray(M);var I=x.getBoundingClientRect();"left"===b.labels.align?(M.forEach(function(F,U){F.setAttribute("text-anchor","start")}),b.opposite||x.setAttribute("transform","translate(-".concat(I.width,", 0)"))):"center"===b.labels.align?(M.forEach(function(F,U){F.setAttribute("text-anchor","middle")}),x.setAttribute("transform","translate(".concat(I.width/2*(b.opposite?1:-1),", 0)"))):"right"===b.labels.align&&(M.forEach(function(F,U){F.setAttribute("text-anchor","end")}),b.opposite&&x.setAttribute("transform","translate(".concat(I.width,", 0)")))}})}}]),le}(),ji=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.documentEvent=We.bind(this.documentEvent,this)}return Me(le,[{key:"addEventListener",value:function(o,c){var h=this.w;h.globals.events.hasOwnProperty(o)?h.globals.events[o].push(c):h.globals.events[o]=[c]}},{key:"removeEventListener",value:function(o,c){var h=this.w;if(h.globals.events.hasOwnProperty(o)){var _=h.globals.events[o].indexOf(c);-1!==_&&h.globals.events[o].splice(_,1)}}},{key:"fireEvent",value:function(o,c){var h=this.w;if(h.globals.events.hasOwnProperty(o)){c&&c.length||(c=[]);for(var _=h.globals.events[o],b=_.length,x=0;x<b;x++)_[x].apply(null,c)}}},{key:"setupEventHandlers",value:function(){var o=this,c=this.w,h=this.ctx,_=c.globals.dom.baseEl.querySelector(c.globals.chartClass);this.ctx.eventList.forEach(function(b){_.addEventListener(b,function(x){var M=Object.assign({},c,{seriesIndex:c.globals.capturedSeriesIndex,dataPointIndex:c.globals.capturedDataPointIndex});"mousemove"===x.type||"touchmove"===x.type?"function"==typeof c.config.chart.events.mouseMove&&c.config.chart.events.mouseMove(x,h,M):"mouseleave"===x.type||"touchleave"===x.type?"function"==typeof c.config.chart.events.mouseLeave&&c.config.chart.events.mouseLeave(x,h,M):("mouseup"===x.type&&1===x.which||"touchend"===x.type)&&("function"==typeof c.config.chart.events.click&&c.config.chart.events.click(x,h,M),h.ctx.events.fireEvent("click",[x,h,M]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(b){c.globals.dom.baseEl.addEventListener(b,o.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(o){var c=this.w,h=o.target.className;if("click"===o.type){var _=c.globals.dom.baseEl.querySelector(".apexcharts-menu");_&&_.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==h&&_.classList.remove("apexcharts-menu-open")}c.globals.clientX="touchmove"===o.type?o.touches[0].clientX:o.clientX,c.globals.clientY="touchmove"===o.type?o.touches[0].clientY:o.clientY}}]),le}(),Gn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"setCurrentLocaleValues",value:function(o){var c=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(c=this.w.config.chart.locales.concat(window.Apex.chart.locales));var h=c.filter(function(b){return b.name===o})[0];if(!h)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var _=We.extend(ri,h);this.w.globals.locale=_.options}}]),le}(),tn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"drawAxis",value:function(o,c){var h,_,b=this,x=this.w.globals,M=this.w.config,I=new fr(this.ctx,c),F=new Xi(this.ctx,c);x.axisCharts&&"radar"!==o&&(x.isBarHorizontal?(_=F.drawYaxisInversed(0),h=I.drawXaxisInversed(0),x.dom.elGraphical.add(h),x.dom.elGraphical.add(_)):(h=I.drawXaxis(),x.dom.elGraphical.add(h),M.yaxis.map(function(U,$){if(-1===x.ignoreYAxisIndexes.indexOf($)&&(_=F.drawYaxis($),x.dom.Paper.add(_),"back"===b.w.config.grid.position)){var q=x.dom.Paper.children()[1];q.remove(),x.dom.Paper.add(q)}})))}}]),le}(),Ti=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"drawXCrosshairs",value:function(){var o=this.w,c=new at(this.ctx),h=new li(this.ctx),_=o.config.xaxis.crosshairs.fill.gradient,b=o.config.xaxis.crosshairs.dropShadow,q=b.enabled,ne=b.left,de=b.top,ge=b.blur,we=b.color,me=b.opacity,Se=o.config.xaxis.crosshairs.fill.color;if(o.config.xaxis.crosshairs.show){"gradient"===o.config.xaxis.crosshairs.fill.type&&(Se=c.drawGradient("vertical",_.colorFrom,_.colorTo,_.opacityFrom,_.opacityTo,null,_.stops,null));var N=c.drawRect();1===o.config.xaxis.crosshairs.width&&(N=c.drawLine());var Q=o.globals.gridHeight;(!We.isNumber(Q)||Q<0)&&(Q=0);var pe=o.config.xaxis.crosshairs.width;(!We.isNumber(pe)||pe<0)&&(pe=0),N.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:Q,width:pe,height:Q,fill:Se,filter:"none","fill-opacity":o.config.xaxis.crosshairs.opacity,stroke:o.config.xaxis.crosshairs.stroke.color,"stroke-width":o.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":o.config.xaxis.crosshairs.stroke.dashArray}),q&&(N=h.dropShadow(N,{left:ne,top:de,blur:ge,color:we,opacity:me})),o.globals.dom.elGraphical.add(N)}}},{key:"drawYCrosshairs",value:function(){var o=this.w,c=new at(this.ctx),h=o.config.yaxis[0].crosshairs,_=o.globals.barPadForNumericAxis;if(o.config.yaxis[0].crosshairs.show){var b=c.drawLine(-_,0,o.globals.gridWidth+_,0,h.stroke.color,h.stroke.dashArray,h.stroke.width);b.attr({class:"apexcharts-ycrosshairs"}),o.globals.dom.elGraphical.add(b)}var x=c.drawLine(-_,0,o.globals.gridWidth+_,0,h.stroke.color,0,0);x.attr({class:"apexcharts-ycrosshairs-hidden"}),o.globals.dom.elGraphical.add(x)}}]),le}(),gn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"checkResponsiveConfig",value:function(o){var c=this,h=this.w,_=h.config;if(0!==_.responsive.length){var b=_.responsive.slice();b.sort(function(F,U){return F.breakpoint>U.breakpoint?1:U.breakpoint>F.breakpoint?-1:0}).reverse();var x=new mn({}),M=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},$=window.innerWidth>0?window.innerWidth:screen.width;if($>b[0].breakpoint){var q=si.extendArrayProps(x,h.globals.initialConfig,h);F=We.extend(q,F),F=We.extend(h.config,F),c.overrideResponsiveOptions(F)}else for(var ne=0;ne<b.length;ne++)$<b[ne].breakpoint&&(F=si.extendArrayProps(x,b[ne].options,h),F=We.extend(h.config,F),c.overrideResponsiveOptions(F))};if(o){var I=si.extendArrayProps(x,o,h);I=We.extend(h.config,I),M(I=We.extend(I,o))}else M({})}}},{key:"overrideResponsiveOptions",value:function(o){var c=new mn(o).init({responsiveOverride:!0});this.w.config=c}}]),le}(),Pn=function(){function le(o){V(this,le),this.ctx=o,this.colors=[],this.w=o.w;var c=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===c.config.chart.type&&c.config.plotOptions.treemap.distributed||"heatmap"===c.config.chart.type&&c.config.plotOptions.heatmap.distributed,this.isBarDistributed=c.config.plotOptions.bar.distributed&&("bar"===c.config.chart.type||"rangeBar"===c.config.chart.type)}return Me(le,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var o,c=this,h=this.w,_=new We;if(h.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(h.config.theme.mode)),void 0===h.config.colors||0===(null===(o=h.config.colors)||void 0===o?void 0:o.length)?h.globals.colors=this.predefined():(h.globals.colors=h.config.colors,Array.isArray(h.config.colors)&&h.config.colors.length>0&&"function"==typeof h.config.colors[0]&&(h.globals.colors=h.config.series.map(function(de,ge){var we=h.config.colors[ge];return we||(we=h.config.colors[0]),"function"==typeof we?(c.isColorFn=!0,we({value:h.globals.axisCharts?h.globals.series[ge][0]?h.globals.series[ge][0]:0:h.globals.series[ge],seriesIndex:ge,dataPointIndex:ge,w:h})):we}))),h.globals.seriesColors.map(function(de,ge){de&&(h.globals.colors[ge]=de)}),h.config.theme.monochrome.enabled){var b=[],x=h.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(x=h.globals.series[0].length*h.globals.series.length);for(var M=h.config.theme.monochrome.color,I=1/(x/h.config.theme.monochrome.shadeIntensity),F=h.config.theme.monochrome.shadeTo,U=0,$=0;$<x;$++){var q=void 0;"dark"===F?(q=_.shadeColor(-1*U,M),U+=I):(q=_.shadeColor(U,M),U+=I),b.push(q)}h.globals.colors=b.slice()}var ne=h.globals.colors.slice();this.pushExtraColors(h.globals.colors),["fill","stroke"].forEach(function(de){h.globals[de].colors=void 0===h.config[de].colors?c.isColorFn?h.config.colors:ne:h.config[de].colors.slice(),c.pushExtraColors(h.globals[de].colors)}),h.globals.dataLabels.style.colors=void 0===h.config.dataLabels.style.colors?ne:h.config.dataLabels.style.colors.slice(),this.pushExtraColors(h.globals.dataLabels.style.colors,50),h.globals.radarPolygons.fill.colors=void 0===h.config.plotOptions.radar.polygons.fill.colors?["dark"===h.config.theme.mode?"#424242":"none"]:h.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(h.globals.radarPolygons.fill.colors,20),h.globals.markers.colors=void 0===h.config.markers.colors?ne:h.config.markers.colors.slice(),this.pushExtraColors(h.globals.markers.colors)}},{key:"pushExtraColors",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=this.w,b=c||_.globals.series.length;if(null===h&&(h=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===_.config.chart.type&&_.config.plotOptions.heatmap.colorScale.inverse),h&&_.globals.series.length&&(b=_.globals.series[_.globals.maxValsInArrayIndex].length*_.globals.series.length),o.length<b)for(var x=b-o.length,M=0;M<x;M++)o.push(o[M])}},{key:"updateThemeOptions",value:function(o){o.chart=o.chart||{},o.tooltip=o.tooltip||{};var c=o.theme.mode||"light",h=o.theme.palette?o.theme.palette:"dark"===c?"palette4":"palette1",_=o.chart.foreColor?o.chart.foreColor:"dark"===c?"#f6f7f8":"#373d3f";return o.tooltip.theme=c,o.chart.foreColor=_,o.theme.palette=h,o}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),le}(),Dr=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(o){var c=this.w,h="title"===o?c.config.title:c.config.subtitle,_=c.globals.svgWidth/2,b=h.offsetY,x="middle";if("left"===h.align?(_=10,x="start"):"right"===h.align&&(_=c.globals.svgWidth-10,x="end"),_+=h.offsetX,b=b+parseInt(h.style.fontSize,10)+h.margin/2,void 0!==h.text){var M=new at(this.ctx).drawText({x:_,y:b,text:h.text,textAnchor:x,fontSize:h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight,foreColor:h.style.color,opacity:1});M.node.setAttribute("class","apexcharts-".concat(o,"-text")),c.globals.dom.Paper.add(M)}}}]),le}(),Ir=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Me(le,[{key:"getTitleSubtitleCoords",value:function(o){var c=this.w,h=0,_=0,b="title"===o?c.config.title.floating:c.config.subtitle.floating,x=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-text"));if(null!==x&&!b){var M=x.getBoundingClientRect();h=M.width,_=c.globals.axisCharts?M.height+5:M.height}return{width:h,height:_}}},{key:"getLegendsRect",value:function(){var o=this.w,c=o.globals.dom.elLegendWrap;o.config.legend.height||"top"!==o.config.legend.position&&"bottom"!==o.config.legend.position||(c.style.maxHeight=o.globals.svgHeight/2+"px");var h=Object.assign({},We.getBoundingClientRect(c));return this.dCtx.lgRect=null!==c&&!o.config.legend.floating&&o.config.legend.show?{x:h.x,y:h.y,height:h.height,width:0===h.height?0:h.width}:{x:0,y:0,height:0,width:0},"left"!==o.config.legend.position&&"right"!==o.config.legend.position||1.5*this.dCtx.lgRect.width>o.globals.svgWidth&&(this.dCtx.lgRect.width=o.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(o,c){var h=o;if(this.w.globals.isMultiLineX){var _=c.map(function(x,M){return Array.isArray(x)?x.length:1}),b=Math.max.apply(Math,ot(_));h=c[_.indexOf(b)]}return h}}]),le}(),wr=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Me(le,[{key:"getxAxisLabelsCoords",value:function(){var o,c=this.w,h=c.globals.labels.slice();if(c.config.xaxis.convertedCatToNumeric&&0===h.length&&(h=c.globals.categoryLabels),c.globals.timescaleLabels.length>0){var _=this.getxAxisTimeScaleLabelsCoords();o={width:_.width,height:_.height},c.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==c.config.legend.position&&"right"!==c.config.legend.position||c.config.legend.floating?0:this.dCtx.lgRect.width;var b=c.globals.xLabelFormatter,x=We.getLargestStringFromArr(h),M=this.dCtx.dimHelpers.getLargestStringFromMultiArr(x,h);c.globals.isBarHorizontal&&(M=x=c.globals.yAxisScale[0].result.reduce(function(de,ge){return de.length>ge.length?de:ge},0));var I=new Ci(this.dCtx.ctx),F=x;x=I.xLabelFormat(b,x,F,{i:void 0,dateFormatter:new _i(this.dCtx.ctx).formatDate,w:c}),M=I.xLabelFormat(b,M,F,{i:void 0,dateFormatter:new _i(this.dCtx.ctx).formatDate,w:c}),(c.config.xaxis.convertedCatToNumeric&&void 0===x||""===String(x).trim())&&(M=x="1");var U=new at(this.dCtx.ctx),$=U.getTextRects(x,c.config.xaxis.labels.style.fontSize),q=$;if(x!==M&&(q=U.getTextRects(M,c.config.xaxis.labels.style.fontSize)),(o={width:$.width>=q.width?$.width:q.width,height:$.height>=q.height?$.height:q.height}).width*h.length>c.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==c.config.xaxis.labels.rotate||c.config.xaxis.labels.rotateAlways){if(!c.globals.isBarHorizontal){c.globals.rotateXLabels=!0;var ne=function(de){return U.getTextRects(de,c.config.xaxis.labels.style.fontSize,c.config.xaxis.labels.style.fontFamily,"rotate(".concat(c.config.xaxis.labels.rotate," 0 0)"),!1)};$=ne(x),x!==M&&(q=ne(M)),o.height=($.height>q.height?$.height:q.height)/1.5,o.width=$.width>q.width?$.width:q.width}}else c.globals.rotateXLabels=!1}return c.config.xaxis.labels.show||(o={width:0,height:0}),{width:o.width,height:o.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var o,c=this.w;if(!c.globals.hasXaxisGroups)return{width:0,height:0};var h,_=(null===(o=c.config.xaxis.group.style)||void 0===o?void 0:o.fontSize)||c.config.xaxis.labels.style.fontSize,b=c.globals.groups.map(function($){return $.title}),x=We.getLargestStringFromArr(b),M=this.dCtx.dimHelpers.getLargestStringFromMultiArr(x,b),I=new at(this.dCtx.ctx),F=I.getTextRects(x,_),U=F;return x!==M&&(U=I.getTextRects(M,_)),h={width:F.width>=U.width?F.width:U.width,height:F.height>=U.height?F.height:U.height},c.config.xaxis.labels.show||(h={width:0,height:0}),{width:h.width,height:h.height}}},{key:"getxAxisTitleCoords",value:function(){var o=this.w,c=0,h=0;if(void 0!==o.config.xaxis.title.text){var _=new at(this.dCtx.ctx).getTextRects(o.config.xaxis.title.text,o.config.xaxis.title.style.fontSize);c=_.width,h=_.height}return{width:c,height:h}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var o,c=this.w;this.dCtx.timescaleLabels=c.globals.timescaleLabels.slice();var h=this.dCtx.timescaleLabels.map(function(b){return b.value}),_=h.reduce(function(b,x){return void 0===b?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):b.length>x.length?b:x},0);return 1.05*(o=new at(this.dCtx.ctx).getTextRects(_,c.config.xaxis.labels.style.fontSize)).width*h.length>c.globals.gridWidth&&0!==c.config.xaxis.labels.rotate&&(c.globals.overlappingXLabels=!0),o}},{key:"additionalPaddingXLabels",value:function(o){var c=this,h=this.w,_=h.globals,b=h.config,x=b.xaxis.type,M=o.width;_.skipLastTimelinelabel=!1,_.skipFirstTimelinelabel=!1;var I=h.config.yaxis[0].opposite&&h.globals.isBarHorizontal;b.yaxis.forEach(function(U,$){I?(c.dCtx.gridPad.left<M&&(c.dCtx.xPadLeft=M/2+1),c.dCtx.xPadRight=M/2+1):function(U,$){b.yaxis.length>1&&-1!==_.collapsedSeriesIndices.indexOf($)||function(q){if(c.dCtx.timescaleLabels&&c.dCtx.timescaleLabels.length){var ge=c.dCtx.timescaleLabels[0].position-M/1.75+c.dCtx.yAxisWidthLeft;c.dCtx.timescaleLabels[c.dCtx.timescaleLabels.length-1].position+M/1.75-c.dCtx.yAxisWidthRight>_.svgWidth-_.translateX-("right"===h.config.legend.position&&c.dCtx.lgRect.width>0?c.dCtx.lgRect.width:0)&&(_.skipLastTimelinelabel=!0),ge<-(q.show&&!q.floating||"bar"!==b.chart.type&&"candlestick"!==b.chart.type&&"rangeBar"!==b.chart.type&&"boxPlot"!==b.chart.type?10:M/1.75)&&(_.skipFirstTimelinelabel=!0)}else"datetime"===x?c.dCtx.gridPad.right<M&&!_.rotateXLabels&&(_.skipLastTimelinelabel=!0):"datetime"!==x&&c.dCtx.gridPad.right<M/2-c.dCtx.yAxisWidthRight&&!_.rotateXLabels&&!h.config.xaxis.labels.trim&&("between"!==h.config.xaxis.tickPlacement||h.globals.isBarHorizontal)&&(c.dCtx.xPadRight=M/2+1)}(U)}(U,$)})}}]),le}(),pr=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Me(le,[{key:"getyAxisLabelsCoords",value:function(){var o=this,c=this.w,h=[],_=10,b=new kr(this.dCtx.ctx);return c.config.yaxis.map(function(x,M){var I={seriesIndex:M,dataPointIndex:-1,w:c},F=c.globals.yAxisScale[M],U=0;if(!b.isYAxisHidden(M)&&x.labels.show&&void 0!==x.labels.minWidth&&(U=x.labels.minWidth),!b.isYAxisHidden(M)&&x.labels.show&&F.result.length){var $=c.globals.yLabelFormatters[M],ne=F.result.reduce(function(Q,pe){var xe,Le;return(null===(xe=String($(Q,I)))||void 0===xe?void 0:xe.length)>(null===(Le=String($(pe,I)))||void 0===Le?void 0:Le.length)?Q:pe},F.niceMin===Number.MIN_VALUE?0:F.niceMin),de=ne=$(ne,I);if(void 0!==ne&&0!==ne.length||(ne=F.niceMax),c.globals.isBarHorizontal){_=0;var ge=c.globals.labels.slice();ne=We.getLargestStringFromArr(ge),ne=$(ne,{seriesIndex:M,dataPointIndex:-1,w:c}),de=o.dCtx.dimHelpers.getLargestStringFromMultiArr(ne,ge)}var we=new at(o.dCtx.ctx),me="rotate(".concat(x.labels.rotate," 0 0)"),Se=we.getTextRects(ne,x.labels.style.fontSize,x.labels.style.fontFamily,me,!1),N=Se;ne!==de&&(N=we.getTextRects(de,x.labels.style.fontSize,x.labels.style.fontFamily,me,!1)),h.push({width:(U>N.width||U>Se.width?U:N.width>Se.width?N.width:Se.width)+_,height:N.height>Se.height?N.height:Se.height})}else h.push({width:0,height:0})}),h}},{key:"getyAxisTitleCoords",value:function(){var o=this,h=[];return this.w.config.yaxis.map(function(_,b){if(_.show&&void 0!==_.title.text){var x=new at(o.dCtx.ctx),M="rotate(".concat(_.title.rotate," 0 0)"),I=x.getTextRects(_.title.text,_.title.style.fontSize,_.title.style.fontFamily,M,!1);h.push({width:I.width,height:I.height})}else h.push({width:0,height:0})}),h}},{key:"getTotalYAxisWidth",value:function(){var o=this.w,c=0,h=0,_=0,b=o.globals.yAxisScale.length>1?10:0,x=new kr(this.dCtx.ctx),M=function(I,F){var U=o.config.yaxis[F].floating,$=0;I.width>0&&!U?($=I.width+b,o.globals.ignoreYAxisIndexes.indexOf(F)>-1&&($=$-I.width-b)):$=U||x.isYAxisHidden(F)?0:5,o.config.yaxis[F].opposite?_+=$:h+=$,c+=$};return o.globals.yLabelsCoords.map(function(I,F){M(I,F)}),o.globals.yTitleCoords.map(function(I,F){M(I,F)}),o.globals.isBarHorizontal&&!o.config.yaxis[0].floating&&(c=o.globals.yLabelsCoords[0].width+o.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=h,this.dCtx.yAxisWidthRight=_,c}}]),le}(),or=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Me(le,[{key:"gridPadForColumnsInNumericAxis",value:function(o){var c=this.w;if(c.globals.noData||c.globals.allSeriesCollapsed)return 0;var h=function(U){return"bar"===U||"rangeBar"===U||"candlestick"===U||"boxPlot"===U},_=c.config.chart.type,b=0,x=h(_)?c.config.series.length:1;if(c.globals.comboBarCount>0&&(x=c.globals.comboBarCount),c.globals.collapsedSeries.forEach(function(U){h(U.type)&&(x-=1)}),c.config.chart.stacked&&(x=1),(h(_)||c.globals.comboBarCount>0)&&c.globals.isXNumeric&&!c.globals.isBarHorizontal&&x>0){var M,I,F=Math.abs(c.globals.initialMaxX-c.globals.initialMinX);F<=3&&(F=c.globals.dataPoints),M=F/o,c.globals.minXDiff&&c.globals.minXDiff/M>0&&(I=c.globals.minXDiff/M),I>o/2&&(I/=2),(b=I*parseInt(c.config.plotOptions.bar.columnWidth,10)/100)<1&&(b=1),c.globals.barPadForNumericAxis=b}return b}},{key:"gridPadFortitleSubtitle",value:function(){var o=this,c=this.w,h=c.globals,_=this.dCtx.isSparkline||!c.globals.axisCharts?0:10;["title","subtitle"].forEach(function(M){_+=void 0!==c.config[M].text?c.config[M].margin:o.dCtx.isSparkline||!c.globals.axisCharts?0:5}),!c.config.legend.show||"bottom"!==c.config.legend.position||c.config.legend.floating||c.globals.axisCharts||(_+=10);var b=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),x=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");h.gridHeight=h.gridHeight-b.height-x.height-_,h.translateY=h.translateY+b.height+x.height+_}},{key:"setGridXPosForDualYAxis",value:function(o,c){var h=this.w,_=new kr(this.dCtx.ctx);h.config.yaxis.map(function(b,x){-1!==h.globals.ignoreYAxisIndexes.indexOf(x)||b.floating||_.isYAxisHidden(x)||(b.opposite&&(h.globals.translateX=h.globals.translateX-(c[x].width+o[x].width)-parseInt(h.config.yaxis[x].labels.style.fontSize,10)/1.2-12),h.globals.translateX<2&&(h.globals.translateX=2))})}}]),le}(),Tn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Ir(this),this.dimYAxis=new pr(this),this.dimXAxis=new wr(this),this.dimGrid=new or(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Me(le,[{key:"plotCoords",value:function(){var o=this,c=this.w,h=c.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((c.config.markers.discrete.length>0||c.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(b){var x=Pt(b,2);o.gridPad[x[0]]=Math.max(x[1],o.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(c.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(c.config.stroke.width/2,this.gridPad.bottom)),h.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),h.gridHeight=h.gridHeight-this.gridPad.top-this.gridPad.bottom,h.gridWidth=h.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var _=this.dimGrid.gridPadForColumnsInNumericAxis(h.gridWidth);h.gridWidth=h.gridWidth-2*_,h.translateX=h.translateX+this.gridPad.left+this.xPadLeft+(_>0?_+4:0),h.translateY=h.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var o=this,c=this.w,h=c.globals,_=this.dimYAxis.getyAxisLabelsCoords(),b=this.dimYAxis.getyAxisTitleCoords();c.globals.yLabelsCoords=[],c.globals.yTitleCoords=[],c.config.yaxis.map(function(ne,de){c.globals.yLabelsCoords.push({width:_[de].width,index:de}),c.globals.yTitleCoords.push({width:b[de].width,index:de})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var x=this.dimXAxis.getxAxisLabelsCoords(),M=this.dimXAxis.getxAxisGroupLabelsCoords(),I=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(x,I,M),h.translateXAxisY=c.globals.rotateXLabels?this.xAxisHeight/8:-4,h.translateXAxisX=c.globals.rotateXLabels&&c.globals.isXNumeric&&c.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,c.globals.isBarHorizontal&&(h.rotateXLabels=!1,h.translateXAxisY=parseInt(c.config.xaxis.labels.style.fontSize,10)/1.5*-1),h.translateXAxisY=h.translateXAxisY+c.config.xaxis.labels.offsetY,h.translateXAxisX=h.translateXAxisX+c.config.xaxis.labels.offsetX;var F=this.yAxisWidth,U=this.xAxisHeight;h.xAxisLabelsHeight=this.xAxisHeight-I.height,h.xAxisGroupLabelsHeight=h.xAxisLabelsHeight-x.height,h.xAxisLabelsWidth=this.xAxisWidth,h.xAxisHeight=this.xAxisHeight;var $=10;("radar"===c.config.chart.type||this.isSparkline)&&(F=0,U=h.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===c.config.chart.type)&&(F=0,U=0,$=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(x);var q=function(){h.translateX=F,h.gridHeight=h.svgHeight-o.lgRect.height-U-(o.isSparkline||"treemap"===c.config.chart.type?0:c.globals.rotateXLabels?10:15),h.gridWidth=h.svgWidth-F};switch("top"===c.config.xaxis.position&&($=h.xAxisHeight-c.config.xaxis.axisTicks.height-5),c.config.legend.position){case"bottom":h.translateY=$,q();break;case"top":h.translateY=this.lgRect.height+$,q();break;case"left":h.translateY=$,h.translateX=this.lgRect.width+F,h.gridHeight=h.svgHeight-U-12,h.gridWidth=h.svgWidth-this.lgRect.width-F;break;case"right":h.translateY=$,h.translateX=F,h.gridHeight=h.svgHeight-U-12,h.gridWidth=h.svgWidth-this.lgRect.width-F-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(b,_),new Xi(this.ctx).setYAxisXPosition(_,b)}},{key:"setDimensionsForNonAxisCharts",value:function(){var o=this.w,c=o.globals,h=o.config,_=0;o.config.legend.show&&!o.config.legend.floating&&(_=20);var b="pie"===h.chart.type||"polarArea"===h.chart.type||"donut"===h.chart.type?"pie":"radialBar",x=h.plotOptions[b].offsetY,M=h.plotOptions[b].offsetX;if(!h.legend.show||h.legend.floating)return c.gridHeight=c.svgHeight-h.grid.padding.left+h.grid.padding.right,c.gridWidth=c.gridHeight,c.translateY=x,void(c.translateX=M+(c.svgWidth-c.gridWidth)/2);switch(h.legend.position){case"bottom":c.gridHeight=c.svgHeight-this.lgRect.height-c.goldenPadding,c.gridWidth=c.svgWidth,c.translateY=x-10,c.translateX=M+(c.svgWidth-c.gridWidth)/2;break;case"top":c.gridHeight=c.svgHeight-this.lgRect.height-c.goldenPadding,c.gridWidth=c.svgWidth,c.translateY=this.lgRect.height+x+10,c.translateX=M+(c.svgWidth-c.gridWidth)/2;break;case"left":c.gridWidth=c.svgWidth-this.lgRect.width-_,c.gridHeight="auto"!==h.chart.height?c.svgHeight:c.gridWidth,c.translateY=x,c.translateX=M+this.lgRect.width+_;break;case"right":c.gridWidth=c.svgWidth-this.lgRect.width-_-5,c.gridHeight="auto"!==h.chart.height?c.svgHeight:c.gridWidth,c.translateY=x,c.translateX=M+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(o,c,h){var _=this.w;this.xAxisHeight=(h.height+o.height+c.height)*(_.globals.isMultiLineX?1.2:_.globals.LINE_HEIGHT_RATIO)+(_.globals.hasXaxisGroups?2:1)*(_.globals.rotateXLabels?22:10)+(_.globals.rotateXLabels&&"bottom"===_.config.legend.position?10:0),this.xAxisWidth=o.width,this.xAxisHeight-c.height>_.config.xaxis.labels.maxHeight&&(this.xAxisHeight=_.config.xaxis.labels.maxHeight),_.config.xaxis.labels.minHeight&&this.xAxisHeight<_.config.xaxis.labels.minHeight&&(this.xAxisHeight=_.config.xaxis.labels.minHeight),_.config.xaxis.floating&&(this.xAxisHeight=0);var U=0,$=0;_.config.yaxis.forEach(function(q){U+=q.labels.minWidth,$+=q.labels.maxWidth}),this.yAxisWidth<U&&(this.yAxisWidth=U),this.yAxisWidth>$&&(this.yAxisWidth=$)}}]),le}(),ur=function(){function le(o){V(this,le),this.w=o.w,this.lgCtx=o}return Me(le,[{key:"getLegendStyles",value:function(){var o,c,h,_=document.createElement("style");_.setAttribute("type","text/css");var b=(null===(o=this.lgCtx.ctx)||void 0===o||null===(c=o.opts)||void 0===c||null===(h=c.chart)||void 0===h?void 0:h.nonce)||this.w.config.chart.nonce;b&&_.setAttribute("nonce",b);var x=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return _.appendChild(x),_}},{key:"getLegendBBox",value:function(){var o=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:o.height,clww:o.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(o,c){var h=this,_=this.w;if(_.globals.axisCharts||"radialBar"===_.config.chart.type){_.globals.resized=!0;var b=null,x=null;_.globals.risingSeries=[],_.globals.axisCharts?(b=_.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(o,"']")),x=parseInt(b.getAttribute("data:realIndex"),10)):(b=_.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(o+1,"']")),x=parseInt(b.getAttribute("rel"),10)-1),c?[{cs:_.globals.collapsedSeries,csi:_.globals.collapsedSeriesIndices},{cs:_.globals.ancillaryCollapsedSeries,csi:_.globals.ancillaryCollapsedSeriesIndices}].forEach(function(U){h.riseCollapsedSeries(U.cs,U.csi,x)}):this.hideSeries({seriesEl:b,realIndex:x})}else{var M=_.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(o+1,"'] path")),I=_.config.chart.type;if("pie"===I||"polarArea"===I||"donut"===I){var F=_.config.plotOptions.pie.donut.labels;new at(this.lgCtx.ctx).pathMouseDown(M.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(M.members[0].node,F)}M.fire("click")}}},{key:"hideSeries",value:function(o){var c=o.seriesEl,h=o.realIndex,_=this.w,b=We.clone(_.config.series);if(_.globals.axisCharts){var x=_.config.yaxis[_.globals.seriesYAxisReverseMap[h]];if(x&&x.show&&x.showAlways)_.globals.ancillaryCollapsedSeriesIndices.indexOf(h)<0&&(_.globals.ancillaryCollapsedSeries.push({index:h,data:b[h].data.slice(),type:c.parentNode.className.baseVal.split("-")[1]}),_.globals.ancillaryCollapsedSeriesIndices.push(h));else if(_.globals.collapsedSeriesIndices.indexOf(h)<0){_.globals.collapsedSeries.push({index:h,data:b[h].data.slice(),type:c.parentNode.className.baseVal.split("-")[1]}),_.globals.collapsedSeriesIndices.push(h);var M=_.globals.risingSeries.indexOf(h);_.globals.risingSeries.splice(M,1)}}else _.globals.collapsedSeries.push({index:h,data:b[h]}),_.globals.collapsedSeriesIndices.push(h);for(var I=c.childNodes,F=0;F<I.length;F++)I[F].classList.contains("apexcharts-series-markers-wrap")&&(I[F].classList.contains("apexcharts-hide")?I[F].classList.remove("apexcharts-hide"):I[F].classList.add("apexcharts-hide"));_.globals.allSeriesCollapsed=_.globals.collapsedSeries.length===_.config.series.length,b=this._getSeriesBasedOnCollapsedState(b),this.lgCtx.ctx.updateHelpers._updateSeries(b,_.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(o,c,h){var _=this.w,b=We.clone(_.config.series);if(o.length>0){for(var x=0;x<o.length;x++)o[x].index===h&&(_.globals.axisCharts?(b[h].data=o[x].data.slice(),o.splice(x,1),c.splice(x,1),_.globals.risingSeries.push(h)):(b[h]=o[x].data,o.splice(x,1),c.splice(x,1),_.globals.risingSeries.push(h)));b=this._getSeriesBasedOnCollapsedState(b),this.lgCtx.ctx.updateHelpers._updateSeries(b,_.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(o){var c=this.w;return o.forEach(c.globals.axisCharts?function(h,_){c.globals.collapsedSeriesIndices.indexOf(_)>-1&&(o[_].data=[])}:function(h,_){c.globals.collapsedSeriesIndices.indexOf(_)>-1&&(o[_]=0)}),o}}]),le}(),Rr=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new ur(this)}return Me(le,[{key:"init",value:function(){var o=this.w,c=o.globals,h=o.config;if((h.legend.showForSingleSeries&&1===c.series.length||this.isBarsDistributed||c.series.length>1||!c.axisCharts)&&h.legend.show){for(;c.dom.elLegendWrap.firstChild;)c.dom.elLegendWrap.removeChild(c.dom.elLegendWrap.firstChild);this.drawLegends(),We.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===h.legend.position||"top"===h.legend.position?this.legendAlignHorizontal():"right"!==h.legend.position&&"left"!==h.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var o=this,c=this.w,h=c.config.legend.fontFamily,_=c.globals.seriesNames,b=c.globals.colors.slice();if("heatmap"===c.config.chart.type){var x=c.config.plotOptions.heatmap.colorScale.ranges;_=x.map(function(Mi){return Mi.name?Mi.name:Mi.from+" - "+Mi.to}),b=x.map(function(Mi){return Mi.color})}else this.isBarsDistributed&&(_=c.globals.labels.slice());c.config.legend.customLegendItems.length&&(_=c.config.legend.customLegendItems);for(var M=c.globals.legendFormatter,I=c.config.legend.inverseOrder,F=I?_.length-1:0;I?F>=0:F<=_.length-1;I?F--:F++){var U,$=M(_[F],{seriesIndex:F,w:c}),q=!1,ne=!1;if(c.globals.collapsedSeries.length>0)for(var de=0;de<c.globals.collapsedSeries.length;de++)c.globals.collapsedSeries[de].index===F&&(q=!0);if(c.globals.ancillaryCollapsedSeriesIndices.length>0)for(var ge=0;ge<c.globals.ancillaryCollapsedSeriesIndices.length;ge++)c.globals.ancillaryCollapsedSeriesIndices[ge]===F&&(ne=!0);var we=document.createElement("span");we.classList.add("apexcharts-legend-marker");var me=c.config.legend.markers.offsetX,Se=c.config.legend.markers.offsetY,N=c.config.legend.markers.height,Q=c.config.legend.markers.width,pe=c.config.legend.markers.strokeWidth,xe=c.config.legend.markers.strokeColor,Le=c.config.legend.markers.radius,Ze=we.style;Ze.background=b[F],Ze.color=b[F],Ze.setProperty("background",b[F],"important"),c.config.legend.markers.fillColors&&c.config.legend.markers.fillColors[F]&&(Ze.background=c.config.legend.markers.fillColors[F]),void 0!==c.globals.seriesColors[F]&&(Ze.background=c.globals.seriesColors[F],Ze.color=c.globals.seriesColors[F]),Ze.height=Array.isArray(N)?parseFloat(N[F])+"px":parseFloat(N)+"px",Ze.width=Array.isArray(Q)?parseFloat(Q[F])+"px":parseFloat(Q)+"px",Ze.left=(Array.isArray(me)?parseFloat(me[F]):parseFloat(me))+"px",Ze.top=(Array.isArray(Se)?parseFloat(Se[F]):parseFloat(Se))+"px",Ze.borderWidth=Array.isArray(pe)?pe[F]:pe,Ze.borderColor=Array.isArray(xe)?xe[F]:xe,Ze.borderRadius=Array.isArray(Le)?parseFloat(Le[F])+"px":parseFloat(Le)+"px",c.config.legend.markers.customHTML&&(Array.isArray(c.config.legend.markers.customHTML)?c.config.legend.markers.customHTML[F]&&(we.innerHTML=c.config.legend.markers.customHTML[F]()):we.innerHTML=c.config.legend.markers.customHTML()),at.setAttrs(we,{rel:F+1,"data:collapsed":q||ne}),(q||ne)&&we.classList.add("apexcharts-inactive-legend");var kt=document.createElement("div"),It=document.createElement("span");It.classList.add("apexcharts-legend-text"),It.innerHTML=Array.isArray($)?$.join(" "):$;var ii=c.config.legend.labels.useSeriesColors?c.globals.colors[F]:Array.isArray(c.config.legend.labels.colors)?null===(U=c.config.legend.labels.colors)||void 0===U?void 0:U[F]:c.config.legend.labels.colors;ii||(ii=c.config.chart.foreColor),It.style.color=ii,It.style.fontSize=parseFloat(c.config.legend.fontSize)+"px",It.style.fontWeight=c.config.legend.fontWeight,It.style.fontFamily=h||c.config.chart.fontFamily,at.setAttrs(It,{rel:F+1,i:F,"data:default-text":encodeURIComponent($),"data:collapsed":q||ne}),kt.appendChild(we),kt.appendChild(It);var wi=new si(this.ctx);c.config.legend.showForZeroSeries||0===wi.getSeriesTotalByIndex(F)&&wi.seriesHaveSameValues(F)&&!wi.isSeriesNull(F)&&-1===c.globals.collapsedSeriesIndices.indexOf(F)&&-1===c.globals.ancillaryCollapsedSeriesIndices.indexOf(F)&&kt.classList.add("apexcharts-hidden-zero-series"),c.config.legend.showForNullSeries||wi.isSeriesNull(F)&&-1===c.globals.collapsedSeriesIndices.indexOf(F)&&-1===c.globals.ancillaryCollapsedSeriesIndices.indexOf(F)&&kt.classList.add("apexcharts-hidden-null-series"),c.globals.dom.elLegendWrap.appendChild(kt),c.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(c.config.legend.horizontalAlign)),c.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+c.config.legend.position),kt.classList.add("apexcharts-legend-series"),kt.style.margin="".concat(c.config.legend.itemMargin.vertical,"px ").concat(c.config.legend.itemMargin.horizontal,"px"),c.globals.dom.elLegendWrap.style.width=c.config.legend.width?c.config.legend.width+"px":"",c.globals.dom.elLegendWrap.style.height=c.config.legend.height?c.config.legend.height+"px":"",at.setAttrs(kt,{rel:F+1,seriesName:We.escapeString(_[F]),"data:collapsed":q||ne}),(q||ne)&&kt.classList.add("apexcharts-inactive-legend"),c.config.legend.onItemClick.toggleDataSeries||kt.classList.add("apexcharts-no-click")}c.globals.dom.elWrap.addEventListener("click",o.onLegendClick,!0),c.config.legend.onItemHover.highlightDataSeries&&0===c.config.legend.customLegendItems.length&&(c.globals.dom.elWrap.addEventListener("mousemove",o.onLegendHovered,!0),c.globals.dom.elWrap.addEventListener("mouseout",o.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(o,c){var h=this.w,_=h.globals.dom.elLegendWrap,b=_.getBoundingClientRect(),x=0,M=0;if("bottom"===h.config.legend.position)M+=h.globals.svgHeight-b.height/2;else if("top"===h.config.legend.position){var I=new Tn(this.ctx),F=I.dimHelpers.getTitleSubtitleCoords("title").height,U=I.dimHelpers.getTitleSubtitleCoords("subtitle").height;M=M+(F>0?F-10:0)+(U>0?U-10:0)}_.style.position="absolute",M=M+c+h.config.legend.offsetY,_.style.left=(x=x+o+h.config.legend.offsetX)+"px",_.style.top=M+"px","bottom"===h.config.legend.position?(_.style.top="auto",_.style.bottom=5-h.config.legend.offsetY+"px"):"right"===h.config.legend.position&&(_.style.left="auto",_.style.right=25+h.config.legend.offsetX+"px"),["width","height"].forEach(function($){_.style[$]&&(_.style[$]=parseInt(h.config.legend[$],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var o=this.w;o.globals.dom.elLegendWrap.style.right=0;var c=this.legendHelpers.getLegendBBox(),h=new Tn(this.ctx),_=h.dimHelpers.getTitleSubtitleCoords("title"),b=h.dimHelpers.getTitleSubtitleCoords("subtitle"),x=0;"bottom"===o.config.legend.position?x=-c.clwh/1.8:"top"===o.config.legend.position&&(x=_.height+b.height+o.config.title.margin+o.config.subtitle.margin-10),this.setLegendWrapXY(20,x)}},{key:"legendAlignVertical",value:function(){var o=this.w,c=this.legendHelpers.getLegendBBox(),h=0;"left"===o.config.legend.position&&(h=20),"right"===o.config.legend.position&&(h=o.globals.svgWidth-c.clww-10),this.setLegendWrapXY(h,20)}},{key:"onLegendHovered",value:function(o){var c=this.w,h=o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker");if("heatmap"===c.config.chart.type||this.isBarsDistributed){if(h){var _=parseInt(o.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,_,this.w]),new An(this.ctx).highlightRangeInSeries(o,o.target)}}else!o.target.classList.contains("apexcharts-inactive-legend")&&h&&new An(this.ctx).toggleSeriesOnHover(o,o.target)}},{key:"onLegendClick",value:function(o){var c=this.w;if(!c.config.legend.customLegendItems.length&&(o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker"))){var h=parseInt(o.target.getAttribute("rel"),10)-1,_="true"===o.target.getAttribute("data:collapsed"),b=this.w.config.chart.events.legendClick;"function"==typeof b&&b(this.ctx,h,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,h,this.w]);var x=this.w.config.legend.markers.onClick;"function"==typeof x&&o.target.classList.contains("apexcharts-legend-marker")&&(x(this.ctx,h,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,h,this.w])),"treemap"!==c.config.chart.type&&"heatmap"!==c.config.chart.type&&!this.isBarsDistributed&&c.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(h,_)}}}]),le}(),ks=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=c.globals.minX,this.maxX=c.globals.maxX}return Me(le,[{key:"createToolbar",value:function(){var o=this,c=this.w,h=function(){return document.createElement("div")},_=h();if(_.setAttribute("class","apexcharts-toolbar"),_.style.top=c.config.chart.toolbar.offsetY+"px",_.style.right=3-c.config.chart.toolbar.offsetX+"px",c.globals.dom.elWrap.appendChild(_),this.elZoom=h(),this.elZoomIn=h(),this.elZoomOut=h(),this.elPan=h(),this.elSelection=h(),this.elZoomReset=h(),this.elMenuIcon=h(),this.elMenu=h(),this.elCustomIcons=[],this.t=c.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var b=0;b<this.t.customIcons.length;b++)this.elCustomIcons.push(h());var x=[],M=function($,q,ne){var de=$.toLowerCase();o.t[de]&&c.config.chart.zoom.enabled&&x.push({el:q,icon:"string"==typeof o.t[de]?o.t[de]:ne,title:o.localeValues[$],class:"apexcharts-".concat(de,"-icon")})};M("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),M("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var I=function($){o.t[$]&&c.config.chart[$].enabled&&x.push({el:"zoom"===$?o.elZoom:o.elSelection,icon:"string"==typeof o.t[$]?o.t[$]:"zoom"===$?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:o.localeValues["zoom"===$?"selectionZoom":"selection"],class:c.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat($,"-icon")})};I("zoom"),I("selection"),this.t.pan&&c.config.chart.zoom.enabled&&x.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:c.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),M("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&x.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var F=0;F<this.elCustomIcons.length;F++)x.push({el:this.elCustomIcons[F],icon:this.t.customIcons[F].icon,title:this.t.customIcons[F].title,index:this.t.customIcons[F].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[F].class});x.forEach(function($,q){$.index&&We.moveIndexInArray(x,q,$.index)});for(var U=0;U<x.length;U++)at.setAttrs(x[U].el,{class:x[U].class,title:x[U].title}),x[U].el.innerHTML=x[U].icon,_.appendChild(x[U].el);this._createHamburgerMenu(_),c.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):c.globals.panEnabled?this.elPan.classList.add(this.selectedClass):c.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(o){this.elMenuItems=[],o.appendChild(this.elMenu),at.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var c=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],h=0;h<c.length;h++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[h].innerHTML=c[h].title,at.setAttrs(this.elMenuItems[h],{class:"apexcharts-menu-item ".concat(c[h].name),title:c[h].title}),this.elMenu.appendChild(this.elMenuItems[h])}},{key:"addToolbarEventListeners",value:function(){var o=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(h){h.classList.contains("exportSVG")?h.addEventListener("click",o.handleDownload.bind(o,"svg")):h.classList.contains("exportPNG")?h.addEventListener("click",o.handleDownload.bind(o,"png")):h.classList.contains("exportCSV")&&h.addEventListener("click",o.handleDownload.bind(o,"csv"))});for(var c=0;c<this.t.customIcons.length;c++)this.elCustomIcons[c].addEventListener("click",this.t.customIcons[c].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(o){this.ctx.getSyncedCharts().forEach(function(c){c.ctx.toolbar.toggleOtherControls();var h="selection"===o?c.ctx.toolbar.elSelection:c.ctx.toolbar.elZoom,_="selection"===o?"selectionEnabled":"zoomEnabled";c.w.globals[_]=!c.w.globals[_],h.classList.contains(c.ctx.toolbar.selectedClass)?h.classList.remove(c.ctx.toolbar.selectedClass):h.classList.add(c.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var o=this.w;this.elZoom||(this.elZoom=o.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=o.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=o.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(o){this.toggleOtherControls(),"pan"===o?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var c="pan"===o?this.elPan:this.elZoom,h="pan"===o?this.elZoom:this.elPan;c&&c.classList.add(this.selectedClass),h&&h.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(o){o.ctx.toolbar.toggleOtherControls(),o.w.globals.panEnabled=!o.w.globals.panEnabled,o.ctx.toolbar.elPan.classList.contains(o.ctx.toolbar.selectedClass)?o.ctx.toolbar.elPan.classList.remove(o.ctx.toolbar.selectedClass):o.ctx.toolbar.elPan.classList.add(o.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var o=this,c=this.w;c.globals.panEnabled=!1,c.globals.zoomEnabled=!1,c.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(h){h&&h.classList.remove(o.selectedClass)})}},{key:"handleZoomIn",value:function(){var o=this.w;o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY);var c=(this.minX+this.maxX)/2,b=this._getNewMinXMaxX((this.minX+c)/2,(this.maxX+c)/2);o.globals.disableZoomIn||this.zoomUpdateOptions(b.minX,b.maxX)}},{key:"handleZoomOut",value:function(){var o=this.w;if(o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY),!("datetime"===o.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var c=(this.minX+this.maxX)/2,b=this._getNewMinXMaxX(this.minX-(c-this.minX),this.maxX-(c-this.maxX));o.globals.disableZoomOut||this.zoomUpdateOptions(b.minX,b.maxX)}}},{key:"_getNewMinXMaxX",value:function(o,c){var h=this.w.config.xaxis.convertedCatToNumeric;return{minX:h?Math.floor(o):o,maxX:h?Math.floor(c):c}}},{key:"zoomUpdateOptions",value:function(o,c){var h=this.w;if(void 0!==o||void 0!==c){if(!(h.config.xaxis.convertedCatToNumeric&&(o<1&&(o=1,c=h.globals.dataPoints),c-o<2))){var _={min:o,max:c},b=this.getBeforeZoomRange(_);b&&(_=b.xaxis);var x={xaxis:_},M=We.clone(h.globals.initialConfig.yaxis);h.config.chart.group||(x.yaxis=M),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(x,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(_,M)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(o,c){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:o,yaxis:c})}},{key:"getBeforeZoomRange",value:function(o,c){var h=null;return"function"==typeof this.ev.beforeZoom&&(h=this.ev.beforeZoom(this,{xaxis:o,yaxis:c})),h}},{key:"toggleMenu",value:function(){var o=this;window.setTimeout(function(){o.elMenu.classList.contains("apexcharts-menu-open")?o.elMenu.classList.remove("apexcharts-menu-open"):o.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(o){var c=this.w,h=new sr(this.ctx);switch(o){case"svg":h.exportToSVG(this.ctx);break;case"png":h.exportToPng(this.ctx);break;case"csv":h.exportToCSV({series:c.config.series,columnDelimiter:c.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(o){this.ctx.getSyncedCharts().forEach(function(c){var h=c.w;if(h.globals.lastXAxis.min=h.globals.initialConfig.xaxis.min,h.globals.lastXAxis.max=h.globals.initialConfig.xaxis.max,c.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof h.config.chart.events.beforeResetZoom){var _=h.config.chart.events.beforeResetZoom(c,h);_&&c.updateHelpers.revertDefaultAxisMinMax(_)}"function"==typeof h.config.chart.events.zoomed&&c.ctx.toolbar.zoomCallback({min:h.config.xaxis.min,max:h.config.xaxis.max}),h.globals.zoomed=!1;var b=c.ctx.series.emptyCollapsedSeries(We.clone(h.globals.initialSeries));c.updateHelpers._updateSeries(b,h.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),le}(),er=function(le){Be(c,ks);var o=mt(c);function c(h){var _;return V(this,c),(_=o.call(this,h)).ctx=h,_.w=h.w,_.dragged=!1,_.graphics=new at(_.ctx),_.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],_.clientX=0,_.clientY=0,_.startX=0,_.endX=0,_.dragX=0,_.startY=0,_.endY=0,_.dragY=0,_.moveDirection="none",_}return Me(c,[{key:"init",value:function(h){var _=this,b=h.xyRatios,x=this.w,M=this;this.xyRatios=b,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=x.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),x.globals.dom.elGraphical.add(this.zoomRect),x.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===x.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:x.globals.gridWidth,maxY:x.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===x.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:x.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=x.globals.dom.baseEl.querySelector("".concat(x.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(I){_.hoverArea.addEventListener(I,M.svgMouseEvents.bind(M,b),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(h,_){var b=this.w,x=this,M=this.ctx.toolbar,I=b.globals.zoomEnabled?b.config.chart.zoom.type:b.config.chart.selection.type,F=b.config.chart.toolbar.autoSelected;if(_.shiftKey?(this.shiftWasPressed=!0,M.enableZoomPanFromToolbar("pan"===F?"zoom":"pan")):this.shiftWasPressed&&(M.enableZoomPanFromToolbar(F),this.shiftWasPressed=!1),_.target){var U,$=_.target.classList;if(_.target.parentNode&&null!==_.target.parentNode&&(U=_.target.parentNode.classList),!($.contains("apexcharts-selection-rect")||$.contains("apexcharts-legend-marker")||$.contains("apexcharts-legend-text")||U&&U.contains("apexcharts-toolbar"))){if(x.clientX="touchmove"===_.type||"touchstart"===_.type?_.touches[0].clientX:"touchend"===_.type?_.changedTouches[0].clientX:_.clientX,x.clientY="touchmove"===_.type||"touchstart"===_.type?_.touches[0].clientY:"touchend"===_.type?_.changedTouches[0].clientY:_.clientY,("mousedown"===_.type||"touchmove"===_.type)&&1===_.which){var q=x.gridRect.getBoundingClientRect();x.startX=x.clientX-q.left,x.startY=x.clientY-q.top,x.dragged=!1,x.w.globals.mousedown=!0}if("mousemove"===_.type&&1===_.which||"touchmove"===_.type)if(x.dragged=!0,b.globals.panEnabled){if(b.globals.selection=null,x.w.globals.mousedown||"touchmove"===_.type){if("touchmove"===_.type&&!x.w.globals.mousedown){console.warn("me.w.globals.mousedown ",x.w.globals.mousedown);var ne=x.gridRect.getBoundingClientRect();x.startX=x.clientX-ne.left,x.startY=x.clientY-ne.top,x.w.globals.mousedown=!0}x.panDragging({context:x,zoomtype:I,xyRatios:h})}}else{if("touchmove"===_.type){if(!x.w.globals.mousedown){var de=x.gridRect.getBoundingClientRect();x.startX=x.clientX-de.left,x.startY=x.clientY-de.top}x.w.globals.mousedown=!0}(x.w.globals.mousedown&&b.globals.zoomEnabled||x.w.globals.mousedown&&b.globals.selectionEnabled)&&(x.selection=x.selectionDrawing({context:x,zoomtype:I}))}if("mouseup"===_.type||"touchend"===_.type||"mouseleave"===_.type){var ge=x.gridRect.getBoundingClientRect();x.w.globals.mousedown&&(x.endX=x.clientX-ge.left,x.endY=x.clientY-ge.top,x.dragX=Math.abs(x.endX-x.startX),x.dragY=Math.abs(x.endY-x.startY),(b.globals.zoomEnabled||b.globals.selectionEnabled)&&x.selectionDrawn({context:x,zoomtype:I}),b.globals.panEnabled&&b.config.xaxis.convertedCatToNumeric&&x.delayedPanScrolled()),b.globals.zoomEnabled&&x.hideSelectionRect(this.selectionRect),x.dragged=!1,x.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var h=this.w;if(this.selectionRect){var _=this.selectionRect.node.getBoundingClientRect();_.width>0&&_.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:h.globals.gridWidth,maxY:h.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var h=this.w,_=this.xyRatios;if(!h.globals.zoomEnabled)if(null!=h.globals.selection)this.drawSelectionRect(h.globals.selection);else if(void 0!==h.config.chart.selection.xaxis.min&&void 0!==h.config.chart.selection.xaxis.max){var b=(h.config.chart.selection.xaxis.min-h.globals.minX)/_.xRatio,x=h.globals.gridWidth-(h.globals.maxX-h.config.chart.selection.xaxis.max)/_.xRatio-b;h.globals.isRangeBar&&(b=(h.config.chart.selection.xaxis.min-h.globals.yAxisScale[0].niceMin)/_.invertedYRatio,x=(h.config.chart.selection.xaxis.max-h.config.chart.selection.xaxis.min)/_.invertedYRatio),this.drawSelectionRect({x:b,y:0,width:x,height:h.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof h.config.chart.events.selection&&h.config.chart.events.selection(this.ctx,{xaxis:{min:h.config.chart.selection.xaxis.min,max:h.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(h){var _=h.x,b=h.y,x=h.width,M=h.height,I=h.translateX,U=h.translateY,q=this.w,ne=this.zoomRect,de=this.selectionRect;if(this.dragged||null!==q.globals.selection){var ge={transform:"translate("+(void 0===I?0:I)+", "+(void 0===U?0:U)+")"};q.globals.zoomEnabled&&this.dragged&&(x<0&&(x=1),ne.attr({x:_,y:b,width:x,height:M,fill:q.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":q.config.chart.zoom.zoomedArea.fill.opacity,stroke:q.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":q.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":q.config.chart.zoom.zoomedArea.stroke.opacity}),at.setAttrs(ne.node,ge)),q.globals.selectionEnabled&&(de.attr({x:_,y:b,width:x>0?x:0,height:M>0?M:0,fill:q.config.chart.selection.fill.color,"fill-opacity":q.config.chart.selection.fill.opacity,stroke:q.config.chart.selection.stroke.color,"stroke-width":q.config.chart.selection.stroke.width,"stroke-dasharray":q.config.chart.selection.stroke.dashArray,"stroke-opacity":q.config.chart.selection.stroke.opacity}),at.setAttrs(de.node,ge))}}},{key:"hideSelectionRect",value:function(h){h&&h.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(h){var ge,b=h.zoomtype,x=this.w,M=h.context,I=this.gridRect.getBoundingClientRect(),F=M.startX-1,U=M.startY,$=!1,q=!1,ne=M.clientX-I.left-F,de=M.clientY-I.top-U;return Math.abs(ne+F)>x.globals.gridWidth?ne=x.globals.gridWidth-F:M.clientX-I.left<0&&(ne=F),F>M.clientX-I.left&&($=!0,ne=Math.abs(ne)),U>M.clientY-I.top&&(q=!0,de=Math.abs(de)),M.drawSelectionRect(ge="x"===b?{x:$?F-ne:F,y:0,width:ne,height:x.globals.gridHeight}:"y"===b?{x:0,y:q?U-de:U,width:x.globals.gridWidth,height:de}:{x:$?F-ne:F,y:q?U-de:U,width:ne,height:de}),M.selectionDragging("resizing"),ge}},{key:"selectionDragging",value:function(h,_){var b=this,x=this.w,M=this.xyRatios,I=this.selectionRect,F=0;"resizing"===h&&(F=30);var U=function(q){return parseFloat(I.node.getAttribute(q))},$={x:U("x"),y:U("y"),width:U("width"),height:U("height")};x.globals.selection=$,"function"==typeof x.config.chart.events.selection&&x.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var q,ne,de,ge,we=b.gridRect.getBoundingClientRect(),me=I.node.getBoundingClientRect();x.globals.isRangeBar?(q=x.globals.yAxisScale[0].niceMin+(me.left-we.left)*M.invertedYRatio,ne=x.globals.yAxisScale[0].niceMin+(me.right-we.left)*M.invertedYRatio,de=0,ge=1):(q=x.globals.xAxisScale.niceMin+(me.left-we.left)*M.xRatio,ne=x.globals.xAxisScale.niceMin+(me.right-we.left)*M.xRatio,de=x.globals.yAxisScale[0].niceMin+(we.bottom-me.bottom)*M.yRatio[0],ge=x.globals.yAxisScale[0].niceMax-(me.top-we.top)*M.yRatio[0]);var Se={xaxis:{min:q,max:ne},yaxis:{min:de,max:ge}};x.config.chart.events.selection(b.ctx,Se),x.config.chart.brush.enabled&&void 0!==x.config.chart.events.brushScrolled&&x.config.chart.events.brushScrolled(b.ctx,Se)},F))}},{key:"selectionDrawn",value:function(h){var b=h.zoomtype,x=this.w,M=h.context,I=this.xyRatios,F=this.ctx.toolbar;if(M.startX>M.endX){var U=M.startX;M.startX=M.endX,M.endX=U}if(M.startY>M.endY){var $=M.startY;M.startY=M.endY,M.endY=$}var q=void 0,ne=void 0;x.globals.isRangeBar?(q=x.globals.yAxisScale[0].niceMin+M.startX*I.invertedYRatio,ne=x.globals.yAxisScale[0].niceMin+M.endX*I.invertedYRatio):(q=x.globals.xAxisScale.niceMin+M.startX*I.xRatio,ne=x.globals.xAxisScale.niceMin+M.endX*I.xRatio);var de=[],ge=[];if(x.config.yaxis.forEach(function(xe,Le){de.push(x.globals.yAxisScale[Le].niceMax-I.yRatio[Le]*M.startY),ge.push(x.globals.yAxisScale[Le].niceMax-I.yRatio[Le]*M.endY)}),M.dragged&&(M.dragX>10||M.dragY>10)&&q!==ne)if(x.globals.zoomEnabled){var we=We.clone(x.globals.initialConfig.yaxis),me=We.clone(x.globals.initialConfig.xaxis);if(x.globals.zoomed=!0,x.config.xaxis.convertedCatToNumeric&&(q=Math.floor(q),ne=Math.floor(ne),q<1&&(q=1,ne=x.globals.dataPoints),ne-q<2&&(ne=q+1)),"xy"!==b&&"x"!==b||(me={min:q,max:ne}),"xy"!==b&&"y"!==b||we.forEach(function(xe,Le){we[Le].min=ge[Le],we[Le].max=de[Le]}),F){var Se=F.getBeforeZoomRange(me,we);Se&&(me=Se.xaxis?Se.xaxis:me,we=Se.yaxis?Se.yaxis:we)}var N={xaxis:me};x.config.chart.group||(N.yaxis=we),M.ctx.updateHelpers._updateOptions(N,!1,M.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof x.config.chart.events.zoomed&&F.zoomCallback(me,we)}else if(x.globals.selectionEnabled){var Q,pe=null;Q={min:q,max:ne},"xy"!==b&&"y"!==b||(pe=We.clone(x.config.yaxis)).forEach(function(xe,Le){pe[Le].min=ge[Le],pe[Le].max=de[Le]}),x.globals.selection=M.selection,"function"==typeof x.config.chart.events.selection&&x.config.chart.events.selection(M.ctx,{xaxis:Q,yaxis:pe})}}},{key:"panDragging",value:function(h){var b=this.w,x=h.context;if(void 0!==b.globals.lastClientPosition.x){var M=b.globals.lastClientPosition.x-x.clientX,I=b.globals.lastClientPosition.y-x.clientY;Math.abs(M)>Math.abs(I)&&M>0?this.moveDirection="left":Math.abs(M)>Math.abs(I)&&M<0?this.moveDirection="right":Math.abs(I)>Math.abs(M)&&I>0?this.moveDirection="up":Math.abs(I)>Math.abs(M)&&I<0&&(this.moveDirection="down")}b.globals.lastClientPosition={x:x.clientX,y:x.clientY},b.config.xaxis.convertedCatToNumeric||x.panScrolled(b.globals.isRangeBar?b.globals.minY:b.globals.minX,b.globals.isRangeBar?b.globals.maxY:b.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var h=this.w,_=h.globals.minX,b=h.globals.maxX,x=(h.globals.maxX-h.globals.minX)/2;"left"===this.moveDirection?(_=h.globals.minX+x,b=h.globals.maxX+x):"right"===this.moveDirection&&(_=h.globals.minX-x,b=h.globals.maxX-x),_=Math.floor(_),b=Math.floor(b),this.updateScrolledChart({xaxis:{min:_,max:b}},_,b)}},{key:"panScrolled",value:function(h,_){var b=this.w,x=this.xyRatios,M=We.clone(b.globals.initialConfig.yaxis),I=x.xRatio,F=b.globals.minX,U=b.globals.maxX;b.globals.isRangeBar&&(I=x.invertedYRatio,F=b.globals.minY,U=b.globals.maxY),"left"===this.moveDirection?(h=F+b.globals.gridWidth/15*I,_=U+b.globals.gridWidth/15*I):"right"===this.moveDirection&&(h=F-b.globals.gridWidth/15*I,_=U-b.globals.gridWidth/15*I),b.globals.isRangeBar||(h<b.globals.initialMinX||_>b.globals.initialMaxX)&&(h=F,_=U);var $={xaxis:{min:h,max:_}};b.config.chart.group||($.yaxis=M),this.updateScrolledChart($,h,_)}},{key:"updateScrolledChart",value:function(h,_,b){var x=this.w;this.ctx.updateHelpers._updateOptions(h,!1,!1),"function"==typeof x.config.chart.events.scrolled&&x.config.chart.events.scrolled(this.ctx,{xaxis:{min:_,max:b}})}}]),c}(),gr=function(){function le(o){V(this,le),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx}return Me(le,[{key:"getNearestValues",value:function(o){var c=o.hoverArea,_=o.clientX,b=o.clientY,x=this.w,M=o.elGrid.getBoundingClientRect(),I=M.width,F=M.height,U=I/(x.globals.dataPoints-1),$=F/x.globals.dataPoints,q=this.hasBars();!x.globals.comboCharts&&!q||x.config.xaxis.convertedCatToNumeric||(U=I/x.globals.dataPoints);var ne=_-M.left-x.globals.barPadForNumericAxis,de=b-M.top;ne<0||de<0||ne>I||de>F?(c.classList.remove("hovering-zoom"),c.classList.remove("hovering-pan")):x.globals.zoomEnabled?(c.classList.remove("hovering-pan"),c.classList.add("hovering-zoom")):x.globals.panEnabled&&(c.classList.remove("hovering-zoom"),c.classList.add("hovering-pan"));var ge=Math.round(ne/U),we=Math.floor(de/$);q&&!x.config.xaxis.convertedCatToNumeric&&(ge=Math.ceil(ne/U),ge-=1);var me=null,Se=null,N=x.globals.seriesXvalues.map(function(Ze){return Ze.filter(function(kt){return We.isNumber(kt)})}),Q=x.globals.seriesYvalues.map(function(Ze){return Ze.filter(function(kt){return We.isNumber(kt)})});if(x.globals.isXNumeric){var pe=this.ttCtx.getElGrid().getBoundingClientRect(),xe=ne*(pe.width/I);me=(Se=this.closestInMultiArray(xe,de*(pe.height/F),N,Q)).index,ge=Se.j,null!==me&&(ge=(Se=this.closestInArray(xe,N=x.globals.seriesXvalues[me])).index)}return x.globals.capturedSeriesIndex=null===me?-1:me,(!ge||ge<1)&&(ge=0),x.globals.capturedDataPointIndex=x.globals.isBarHorizontal?we:ge,{capturedSeries:me,j:x.globals.isBarHorizontal?we:ge,hoverX:ne,hoverY:de}}},{key:"closestInMultiArray",value:function(o,c,h,_){var x=0,M=null,I=-1;this.w.globals.series.length>1?x=this.getFirstActiveXArray(h):M=0;var U=Math.abs(o-h[x][0]);if(h.forEach(function(ne){ne.forEach(function(de,ge){var we=Math.abs(o-de);we<=U&&(U=we,I=ge)})}),-1!==I){var q=Math.abs(c-_[x][I]);M=x,_.forEach(function(ne,de){var ge=Math.abs(c-ne[I]);ge<=q&&(q=ge,M=de)})}return{index:M,j:I}}},{key:"getFirstActiveXArray",value:function(o){for(var c=this.w,h=0,_=o.map(function(x,M){return x.length>0?M:-1}),b=0;b<_.length;b++)if(-1!==_[b]&&-1===c.globals.collapsedSeriesIndices.indexOf(b)&&-1===c.globals.ancillaryCollapsedSeriesIndices.indexOf(b)){h=_[b];break}return h}},{key:"closestInArray",value:function(o,c){for(var _=null,b=Math.abs(o-c[0]),x=0;x<c.length;x++){var M=Math.abs(o-c[x]);M<b&&(b=M,_=x)}return{index:_}}},{key:"isXoverlap",value:function(o){var c=[],h=this.w.globals.seriesX.filter(function(b){return void 0!==b[0]});if(h.length>0)for(var _=0;_<h.length-1;_++)void 0!==h[_][o]&&void 0!==h[_+1][o]&&h[_][o]!==h[_+1][o]&&c.push("unEqual");return 0===c.length}},{key:"isInitialSeriesSameLen",value:function(){for(var o=!0,c=this.w.globals.initialSeries,h=0;h<c.length-1;h++)if(c[h].data.length!==c[h+1].data.length){o=!1;break}return o}},{key:"getBarsHeight",value:function(o){return ot(o).reduce(function(c,h){return c+h.getBBox().height},0)}},{key:"getElMarkers",value:function(o){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof o?".apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(o=ot(o)).sort(function(h,_){var b=Number(h.getAttribute("data:realIndex")),x=Number(_.getAttribute("data:realIndex"));return x<b?1:x>b?-1:0});var c=[];return o.forEach(function(h){c.push(h.querySelector(".apexcharts-marker"))}),c}},{key:"hasMarkers",value:function(o){return this.getElMarkers(o).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(o){var c=this.w,h=c.config.markers.hover.size;return void 0===h&&(h=c.globals.markers.size[o]+c.config.markers.hover.sizeOffset),h}},{key:"toggleAllTooltipSeriesGroups",value:function(o){var c=this.w,h=this.ttCtx;0===h.allTooltipSeriesGroups.length&&(h.allTooltipSeriesGroups=c.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var _=h.allTooltipSeriesGroups,b=0;b<_.length;b++)"enable"===o?(_[b].classList.add("apexcharts-active"),_[b].style.display=c.config.tooltip.items.display):(_[b].classList.remove("apexcharts-active"),_[b].style.display="none")}}]),le}(),hr=function(){function le(o){V(this,le),this.w=o.w,this.ctx=o.ctx,this.ttCtx=o,this.tooltipUtil=new gr(o)}return Me(le,[{key:"drawSeriesTexts",value:function(o){var c=o.shared,h=void 0===c||c,_=o.ttItems,b=o.i,x=void 0===b?0:b,M=o.j,I=void 0===M?null:M,$=o.e,q=this.w;void 0!==q.config.tooltip.custom?this.handleCustomTooltip({i:x,j:I,y1:o.y1,y2:o.y2,w:q}):this.toggleActiveInactiveSeries(h);var ne=this.getValuesToPrint({i:x,j:I});this.printLabels({i:x,j:I,values:ne,ttItems:_,shared:h,e:$});var de=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=de.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=de.getBoundingClientRect().height}},{key:"printLabels",value:function(o){var c,h=this,_=o.i,b=o.j,x=o.values,M=o.ttItems,I=o.shared,F=o.e,U=this.w,$=[],q=function(pe){return U.globals.seriesGoals[pe]&&U.globals.seriesGoals[pe][b]&&Array.isArray(U.globals.seriesGoals[pe][b])},ne=x.xVal,de=x.zVal,ge=x.xAxisTTVal,we="",me=U.globals.colors[_];null!==b&&U.config.plotOptions.bar.distributed&&(me=U.globals.colors[b]);for(var Se=function(pe,xe){var Le=h.getFormatters(_);we=h.getSeriesName({fn:Le.yLbTitleFormatter,index:_,seriesIndex:_,j:b}),"treemap"===U.config.chart.type&&(we=Le.yLbTitleFormatter(String(U.config.series[_].data[b].x),{series:U.globals.series,seriesIndex:_,dataPointIndex:b,w:U}));var Ze=U.config.tooltip.inverseOrder?xe:pe;if(U.globals.axisCharts){var kt=function(wi){var Mi,dn,En,Fn;return U.globals.isRangeData?Le.yLbFormatter(null===(Mi=U.globals.seriesRangeStart)||void 0===Mi||null===(dn=Mi[wi])||void 0===dn?void 0:dn[b],{series:U.globals.seriesRangeStart,seriesIndex:wi,dataPointIndex:b,w:U})+" - "+Le.yLbFormatter(null===(En=U.globals.seriesRangeEnd)||void 0===En||null===(Fn=En[wi])||void 0===Fn?void 0:Fn[b],{series:U.globals.seriesRangeEnd,seriesIndex:wi,dataPointIndex:b,w:U}):Le.yLbFormatter(U.globals.series[wi][b],{series:U.globals.series,seriesIndex:wi,dataPointIndex:b,w:U})};if(I)Le=h.getFormatters(Ze),we=h.getSeriesName({fn:Le.yLbTitleFormatter,index:Ze,seriesIndex:_,j:b}),me=U.globals.colors[Ze],c=kt(Ze),q(Ze)&&($=U.globals.seriesGoals[Ze][b].map(function(wi){return{attrs:wi,val:Le.yLbFormatter(wi.value,{seriesIndex:Ze,dataPointIndex:b,w:U})}}));else{var It,ii=null==F||null===(It=F.target)||void 0===It?void 0:It.getAttribute("fill");ii&&(me=-1!==ii.indexOf("url")?document.querySelector(ii.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):ii),c=kt(_),q(_)&&Array.isArray(U.globals.seriesGoals[_][b])&&($=U.globals.seriesGoals[_][b].map(function(wi){return{attrs:wi,val:Le.yLbFormatter(wi.value,{seriesIndex:_,dataPointIndex:b,w:U})}}))}}null===b&&(c=Le.yLbFormatter(U.globals.series[_],Fe(Fe({},U),{},{seriesIndex:_,dataPointIndex:_}))),h.DOMHandling({i:_,t:Ze,j:b,ttItems:M,values:{val:c,goalVals:$,xVal:ne,xAxisTTVal:ge,zVal:de},seriesName:we,shared:I,pColor:me})},N=0,Q=U.globals.series.length-1;N<U.globals.series.length;N++,Q--)Se(N,Q)}},{key:"getFormatters",value:function(o){var c,h=this.w,_=h.globals.yLabelFormatters[o];return void 0!==h.globals.ttVal?Array.isArray(h.globals.ttVal)?(_=h.globals.ttVal[o]&&h.globals.ttVal[o].formatter,c=h.globals.ttVal[o]&&h.globals.ttVal[o].title&&h.globals.ttVal[o].title.formatter):(_=h.globals.ttVal.formatter,"function"==typeof h.globals.ttVal.title.formatter&&(c=h.globals.ttVal.title.formatter)):c=h.config.tooltip.y.title.formatter,"function"!=typeof _&&(_=h.globals.yLabelFormatters[0]?h.globals.yLabelFormatters[0]:function(b){return b}),"function"!=typeof c&&(c=function(b){return b}),{yLbFormatter:_,yLbTitleFormatter:c}}},{key:"getSeriesName",value:function(o){var _=o.seriesIndex,b=o.j,x=this.w;return(0,o.fn)(String(x.globals.seriesNames[o.index]),{series:x.globals.series,seriesIndex:_,dataPointIndex:b,w:x})}},{key:"DOMHandling",value:function(o){var c=o.t,h=o.j,_=o.ttItems,b=o.values,x=o.seriesName,M=o.shared,I=o.pColor,F=this.w,U=this.ttCtx,$=b.val,q=b.goalVals,ne=b.xVal,de=b.xAxisTTVal,ge=b.zVal,we=null;we=_[c].children,F.config.tooltip.fillSeriesColor&&(_[c].style.backgroundColor=I,we[0].style.display="none"),U.showTooltipTitle&&(null===U.tooltipTitle&&(U.tooltipTitle=F.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),U.tooltipTitle.innerHTML=ne),U.isXAxisTooltipEnabled&&(U.xaxisTooltipText.innerHTML=""!==de?de:ne);var me=_[c].querySelector(".apexcharts-tooltip-text-y-label");me&&(me.innerHTML=x||"");var Se=_[c].querySelector(".apexcharts-tooltip-text-y-value");Se&&(Se.innerHTML=void 0!==$?$:""),we[0]&&we[0].classList.contains("apexcharts-tooltip-marker")&&(F.config.tooltip.marker.fillColors&&Array.isArray(F.config.tooltip.marker.fillColors)&&(I=F.config.tooltip.marker.fillColors[c]),we[0].style.backgroundColor=I),F.config.tooltip.marker.show||(we[0].style.display="none");var N=_[c].querySelector(".apexcharts-tooltip-text-goals-label"),Q=_[c].querySelector(".apexcharts-tooltip-text-goals-value");if(q.length&&F.globals.seriesGoals[c]){var pe=function(){var Ze="<div >",kt="<div>";q.forEach(function(It,ii){Ze+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(It.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(It.attrs.name,"</div>"),kt+="<div>".concat(It.val,"</div>")}),N.innerHTML=Ze+"</div>",Q.innerHTML=kt+"</div>"};M?F.globals.seriesGoals[c][h]&&Array.isArray(F.globals.seriesGoals[c][h])?pe():(N.innerHTML="",Q.innerHTML=""):pe()}else N.innerHTML="",Q.innerHTML="";if(null!==ge&&(_[c].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=F.config.tooltip.z.title,_[c].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==ge?ge:""),M&&we[0]){if(F.config.tooltip.hideEmptySeries){var xe=_[c].querySelector(".apexcharts-tooltip-marker"),Le=_[c].querySelector(".apexcharts-tooltip-text");0==parseFloat($)?(xe.style.display="none",Le.style.display="none"):(xe.style.display="block",Le.style.display="block")}we[0].parentNode.style.display=null==$||F.globals.ancillaryCollapsedSeriesIndices.indexOf(c)>-1||F.globals.collapsedSeriesIndices.indexOf(c)>-1?"none":F.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(o){var c=this.w;if(o)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var h=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");h&&(h.classList.add("apexcharts-active"),h.style.display=c.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(o){var c=o.i,h=o.j,_=this.w,b=this.ctx.series.filteredSeriesX(),x="",M="",I=null,F=null,U={series:_.globals.series,seriesIndex:c,dataPointIndex:h,w:_},$=_.globals.ttZFormatter;null===h?F=_.globals.series[c]:_.globals.isXNumeric&&"treemap"!==_.config.chart.type?(x=b[c][h],0===b[c].length&&(x=b[this.tooltipUtil.getFirstActiveXArray(b)][h])):x=void 0!==_.globals.labels[h]?_.globals.labels[h]:"";var q=x;return x=_.globals.isXNumeric&&"datetime"===_.config.xaxis.type?new Ci(this.ctx).xLabelFormat(_.globals.ttKeyFormatter,q,q,{i:void 0,dateFormatter:new _i(this.ctx).formatDate,w:this.w}):_.globals.isBarHorizontal?_.globals.yLabelFormatters[0](q,U):_.globals.xLabelFormatter(q,U),void 0!==_.config.tooltip.x.formatter&&(x=_.globals.ttKeyFormatter(q,U)),_.globals.seriesZ.length>0&&_.globals.seriesZ[c].length>0&&(I=$(_.globals.seriesZ[c][h],_)),M="function"==typeof _.config.xaxis.tooltip.formatter?_.globals.xaxisTooltipFormatter(q,U):x,{val:Array.isArray(F)?F.join(" "):F,xVal:Array.isArray(x)?x.join(" "):x,xAxisTTVal:Array.isArray(M)?M.join(" "):M,zVal:I}}},{key:"handleCustomTooltip",value:function(o){var c=o.i,h=o.j,_=o.y1,b=o.y2,x=o.w,M=this.ttCtx.getElTooltip(),I=x.config.tooltip.custom;Array.isArray(I)&&I[c]&&(I=I[c]),M.innerHTML=I({ctx:this.ctx,series:x.globals.series,seriesIndex:c,dataPointIndex:h,y1:_,y2:b,w:x})}}]),le}(),Cr=function(){function le(o){V(this,le),this.ttCtx=o,this.ctx=o.ctx,this.w=o.w}return Me(le,[{key:"moveXCrosshairs",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=this.ttCtx,_=this.w,b=h.getElXCrosshairs(),x=o-h.xcrosshairsWidth/2,M=_.globals.labels.slice().length;if(null!==c&&(x=_.globals.gridWidth/M*c),null===b||_.globals.isBarHorizontal||(b.setAttribute("x",x),b.setAttribute("x1",x),b.setAttribute("x2",x),b.setAttribute("y2",_.globals.gridHeight),b.classList.add("apexcharts-active")),x<0&&(x=0),x>_.globals.gridWidth&&(x=_.globals.gridWidth),h.isXAxisTooltipEnabled){var I=x;"tickWidth"!==_.config.xaxis.crosshairs.width&&"barWidth"!==_.config.xaxis.crosshairs.width||(I=x+h.xcrosshairsWidth/2),this.moveXAxisTooltip(I)}}},{key:"moveYCrosshairs",value:function(o){var c=this.ttCtx;null!==c.ycrosshairs&&at.setAttrs(c.ycrosshairs,{y1:o,y2:o}),null!==c.ycrosshairsHidden&&at.setAttrs(c.ycrosshairsHidden,{y1:o,y2:o})}},{key:"moveXAxisTooltip",value:function(o){var c=this.w,h=this.ttCtx;if(null!==h.xaxisTooltip&&0!==h.xcrosshairsWidth){h.xaxisTooltip.classList.add("apexcharts-active");var b,_=h.xaxisOffY+c.config.xaxis.tooltip.offsetY+c.globals.translateY+1+c.config.xaxis.offsetY;o-=h.xaxisTooltip.getBoundingClientRect().width/2,isNaN(o)||(o+=c.globals.translateX,b=new at(this.ctx).getTextRects(h.xaxisTooltipText.innerHTML),h.xaxisTooltipText.style.minWidth=b.width+"px",h.xaxisTooltip.style.left=o+"px",h.xaxisTooltip.style.top=_+"px")}}},{key:"moveYAxisTooltip",value:function(o){var c=this.w,h=this.ttCtx;null===h.yaxisTTEls&&(h.yaxisTTEls=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var _=parseInt(h.ycrosshairsHidden.getAttribute("y1"),10),b=c.globals.translateY+_,x=h.yaxisTTEls[o].getBoundingClientRect().height,M=c.globals.translateYAxisX[o]-2;c.config.yaxis[o].opposite&&(M-=26),b-=x/2,-1===c.globals.ignoreYAxisIndexes.indexOf(o)?(h.yaxisTTEls[o].classList.add("apexcharts-active"),h.yaxisTTEls[o].style.top=b+"px",h.yaxisTTEls[o].style.left=M+c.config.yaxis[o].tooltip.offsetX+"px"):h.yaxisTTEls[o].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=this.w,b=this.ttCtx,x=b.getElTooltip(),M=b.tooltipRect,I=null!==h?parseFloat(h):1,F=parseFloat(o)+I+5,U=parseFloat(c)+I/2;if(F>_.globals.gridWidth/2&&(F=F-M.ttWidth-I-10),F>_.globals.gridWidth-M.ttWidth-10&&(F=_.globals.gridWidth-M.ttWidth),F<-20&&(F=-20),_.config.tooltip.followCursor){var $=b.getElGrid().getBoundingClientRect();(F=b.e.clientX-$.left)>_.globals.gridWidth/2&&(F-=b.tooltipRect.ttWidth),(U=b.e.clientY+_.globals.translateY-$.top)>_.globals.gridHeight/2&&(U-=b.tooltipRect.ttHeight)}else _.globals.isBarHorizontal||M.ttHeight/2+U>_.globals.gridHeight&&(U=_.globals.gridHeight-M.ttHeight+_.globals.translateY);isNaN(F)||(x.style.left=(F+=_.globals.translateX)+"px",x.style.top=U+"px")}},{key:"moveMarkers",value:function(o,c){var h=this.w,_=this.ttCtx;if(h.globals.markers.size[o]>0)for(var b=h.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-marker")),x=0;x<b.length;x++)parseInt(b[x].getAttribute("rel"),10)===c&&(_.marker.resetPointsSize(),_.marker.enlargeCurrentPoint(c,b[x]));else _.marker.resetPointsSize(),this.moveDynamicPointOnHover(c,o)}},{key:"moveDynamicPointOnHover",value:function(o,c){var h,_,b=this.w,x=this.ttCtx,M=b.globals.pointsArray,I=x.tooltipUtil.getHoverMarkerSize(c),F=b.config.series[c].type;if(!F||"column"!==F&&"candlestick"!==F&&"boxPlot"!==F){h=M[c][o][0],_=M[c][o][1]?M[c][o][1]:0;var U=b.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(c,"'] .apexcharts-series-markers circle"));U&&_<b.globals.gridHeight&&_>0&&(U.setAttribute("r",I),U.setAttribute("cx",h),U.setAttribute("cy",_)),this.moveXCrosshairs(h),x.fixedTooltip||this.moveTooltip(h,_,I)}}},{key:"moveDynamicPointsOnHover",value:function(o){var c,h=this.ttCtx,_=h.w,b=0,x=0,M=_.globals.pointsArray;c=new An(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var I=h.tooltipUtil.getHoverMarkerSize(c);M[c]&&(b=M[c][o][0],x=M[c][o][1]);var F=h.tooltipUtil.getAllMarkers();if(null!==F)for(var U=0;U<_.globals.series.length;U++){var $=M[U];if(_.globals.comboCharts&&void 0===$&&F.splice(U,0,null),$&&$.length){var q=M[U][o][1];F[U].setAttribute("cx",b),"rangeArea"!==_.config.chart.type||_.globals.comboCharts||(q-=Math.abs(q-M[U][o+_.globals.series[U].length][1])/2),null!==q&&!isNaN(q)&&q<_.globals.gridHeight+I&&q+I>0?(F[U]&&F[U].setAttribute("r",I),F[U]&&F[U].setAttribute("cy",q)):F[U]&&F[U].setAttribute("r",0)}}this.moveXCrosshairs(b),h.fixedTooltip||this.moveTooltip(b,x||_.globals.gridHeight,I)}},{key:"moveStickyTooltipOverBars",value:function(o,c){var h=this.w,_=this.ttCtx,b=h.globals.columnSeries?h.globals.columnSeries.length:h.globals.series.length,x=b>=2&&b%2==0?Math.floor(b/2):Math.floor(b/2)+1;h.globals.isBarHorizontal&&(x=new An(this.ctx).getActiveConfigSeriesIndex("desc")+1);var M=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(x,"'] path[j='").concat(o,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(o,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(o,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(o,"']"));M||"number"!=typeof c||(M=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(c,"'] path[j='").concat(o,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(c,"'] path[j='").concat(o,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(c,"'] path[j='").concat(o,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(c,"'] path[j='").concat(o,"']")));var I=M?parseFloat(M.getAttribute("cx")):0,F=M?parseFloat(M.getAttribute("cy")):0,U=M?parseFloat(M.getAttribute("barWidth")):0,$=_.getElGrid().getBoundingClientRect(),q=M&&(M.classList.contains("apexcharts-candlestick-area")||M.classList.contains("apexcharts-boxPlot-area"));h.globals.isXNumeric?(M&&!q&&(I-=b%2!=0?U/2:0),M&&q&&h.globals.comboCharts&&(I-=U/2)):h.globals.isBarHorizontal||(I=_.xAxisTicksPositions[o-1]+_.dataPointsDividedWidth/2,isNaN(I)&&(I=_.xAxisTicksPositions[o]-_.dataPointsDividedWidth/2)),h.globals.isBarHorizontal?F-=_.tooltipRect.ttHeight:h.config.tooltip.followCursor?F=_.e.clientY-$.top-_.tooltipRect.ttHeight/2:F+_.tooltipRect.ttHeight+15>h.globals.gridHeight&&(F=h.globals.gridHeight),h.globals.isBarHorizontal||this.moveXCrosshairs(I),_.fixedTooltip||this.moveTooltip(I,F||h.globals.gridHeight)}}]),le}(),$r=function(){function le(o){V(this,le),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx,this.tooltipPosition=new Cr(o)}return Me(le,[{key:"drawDynamicPoints",value:function(){var o=this.w,c=new at(this.ctx),h=new on(this.ctx),_=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");_=ot(_),o.config.chart.stacked&&_.sort(function($,q){return parseFloat($.getAttribute("data:realIndex"))-parseFloat(q.getAttribute("data:realIndex"))});for(var b=0;b<_.length;b++){var x=_[b].querySelector(".apexcharts-series-markers-wrap");if(null!==x){var M=void 0,I="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(I+=" no-pointer-events");var F=h.getMarkerConfig({cssClass:I,seriesIndex:Number(x.getAttribute("data:realIndex"))});(M=c.drawMarker(0,0,F)).node.setAttribute("default-marker-size",0);var U=document.createElementNS(o.globals.SVGNS,"g");U.classList.add("apexcharts-series-markers"),U.appendChild(M.node),x.appendChild(U)}}}},{key:"enlargeCurrentPoint",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=this.w;"bubble"!==b.config.chart.type&&this.newPointSize(o,c);var x=c.getAttribute("cx"),M=c.getAttribute("cy");if(null!==h&&null!==_&&(x=h,M=_),this.tooltipPosition.moveXCrosshairs(x),!this.fixedTooltip){if("radar"===b.config.chart.type){var I=this.ttCtx.getElGrid().getBoundingClientRect();x=this.ttCtx.e.clientX-I.left}this.tooltipPosition.moveTooltip(x,M,b.config.markers.hover.size)}}},{key:"enlargePoints",value:function(o){for(var c=this.w,h=this,_=this.ttCtx,b=o,x=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),M=c.config.markers.hover.size,I=0;I<x.length;I++){var F=x[I].getAttribute("rel"),U=x[I].getAttribute("index");if(void 0===M&&(M=c.globals.markers.size[U]+c.config.markers.hover.sizeOffset),b===parseInt(F,10)){h.newPointSize(b,x[I]);var $=x[I].getAttribute("cx"),q=x[I].getAttribute("cy");h.tooltipPosition.moveXCrosshairs($),_.fixedTooltip||h.tooltipPosition.moveTooltip($,q,M)}else h.oldPointSize(x[I])}}},{key:"newPointSize",value:function(o,c){var h=this.w,_=h.config.markers.hover.size,b=0===o?c.parentNode.firstChild:c.parentNode.lastChild;if("0"!==b.getAttribute("default-marker-size")){var x=parseInt(b.getAttribute("index"),10);void 0===_&&(_=h.globals.markers.size[x]+h.config.markers.hover.sizeOffset),_<0&&(_=0),b.setAttribute("r",_)}}},{key:"oldPointSize",value:function(o){var c=parseFloat(o.getAttribute("default-marker-size"));o.setAttribute("r",c)}},{key:"resetPointsSize",value:function(){for(var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),c=0;c<o.length;c++){var h=parseFloat(o[c].getAttribute("default-marker-size"));We.isNumber(h)&&h>=0?o[c].setAttribute("r",h):o[c].setAttribute("r",0)}}}]),le}(),Ct=function(){function le(o){V(this,le),this.w=o.w;var c=this.w;this.ttCtx=o,this.isVerticalGroupedRangeBar=!c.globals.isBarHorizontal&&"rangeBar"===c.config.chart.type&&c.config.plotOptions.bar.rangeBarGroupRows}return Me(le,[{key:"getAttr",value:function(o,c){return parseFloat(o.target.getAttribute(c))}},{key:"handleHeatTreeTooltip",value:function(o){var c=o.e,h=o.opt,_=o.x,b=o.y,M=this.ttCtx,I=this.w;if(c.target.classList.contains("apexcharts-".concat(o.type,"-rect"))){var F=this.getAttr(c,"i"),U=this.getAttr(c,"j"),$=this.getAttr(c,"cx"),q=this.getAttr(c,"cy"),ne=this.getAttr(c,"width"),de=this.getAttr(c,"height");if(M.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:F,j:U,shared:!1,e:c}),I.globals.capturedSeriesIndex=F,I.globals.capturedDataPointIndex=U,_=$+M.tooltipRect.ttWidth/2+ne,b=q+M.tooltipRect.ttHeight/2-de/2,M.tooltipPosition.moveXCrosshairs($+ne/2),_>I.globals.gridWidth/2&&(_=$-M.tooltipRect.ttWidth/2+ne),M.w.config.tooltip.followCursor){var ge=I.globals.dom.elWrap.getBoundingClientRect();_=I.globals.clientX-ge.left-(_>I.globals.gridWidth/2?M.tooltipRect.ttWidth:0),b=I.globals.clientY-ge.top-(b>I.globals.gridHeight/2?M.tooltipRect.ttHeight:0)}}return{x:_,y:b}}},{key:"handleMarkerTooltip",value:function(o){var c,h,_=o.e,b=o.opt,x=o.x,M=o.y,I=this.w,F=this.ttCtx;if(_.target.classList.contains("apexcharts-marker")){var U=parseInt(b.paths.getAttribute("cx"),10),$=parseInt(b.paths.getAttribute("cy"),10),q=parseFloat(b.paths.getAttribute("val"));if(h=parseInt(b.paths.getAttribute("rel"),10),c=parseInt(b.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,F.intersect){var ne=We.findAncestor(b.paths,"apexcharts-series");ne&&(c=parseInt(ne.getAttribute("data:realIndex"),10))}if(F.tooltipLabels.drawSeriesTexts({ttItems:b.ttItems,i:c,j:h,shared:!F.showOnIntersect&&I.config.tooltip.shared,e:_}),"mouseup"===_.type&&F.markerClick(_,c,h),I.globals.capturedSeriesIndex=c,I.globals.capturedDataPointIndex=h,x=U,M=$+I.globals.translateY-1.4*F.tooltipRect.ttHeight,F.w.config.tooltip.followCursor){var de=F.getElGrid().getBoundingClientRect();M=F.e.clientY+I.globals.translateY-de.top}q<0&&(M=$),F.marker.enlargeCurrentPoint(h,b.paths,x,M)}return{x,y:M}}},{key:"handleBarTooltip",value:function(o){var c,h,_=o.e,b=o.opt,x=this.w,M=this.ttCtx,I=M.getElTooltip(),F=0,U=0,$=0,q=this.getBarTooltipXY({e:_,opt:b}),ne=q.barHeight,de=q.j;x.globals.capturedSeriesIndex=c=q.i,x.globals.capturedDataPointIndex=de,x.globals.isBarHorizontal&&M.tooltipUtil.hasBars()||!x.config.tooltip.shared?(U=q.x,$=q.y,h=Array.isArray(x.config.stroke.width)?x.config.stroke.width[c]:x.config.stroke.width,F=U):x.globals.comboCharts||x.config.tooltip.shared||(F/=2),isNaN($)&&($=x.globals.svgHeight-M.tooltipRect.ttHeight);var ge=parseInt(b.paths.parentNode.getAttribute("data:realIndex"),10),we=x.globals.isMultipleYAxis?x.config.yaxis[ge]&&x.config.yaxis[ge].reversed:x.config.yaxis[0].reversed;if(U+M.tooltipRect.ttWidth>x.globals.gridWidth&&!we?U-=M.tooltipRect.ttWidth:U<0&&(U=0),M.w.config.tooltip.followCursor){var me=M.getElGrid().getBoundingClientRect();$=M.e.clientY-me.top}null===M.tooltip&&(M.tooltip=x.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),x.config.tooltip.shared||M.tooltipPosition.moveXCrosshairs(x.globals.comboBarCount>0?F+h/2:F),!M.fixedTooltip&&(!x.config.tooltip.shared||x.globals.isBarHorizontal&&M.tooltipUtil.hasBars())&&(we&&(U-=M.tooltipRect.ttWidth)<0&&(U=0),!we||x.globals.isBarHorizontal&&M.tooltipUtil.hasBars()||($=$+ne-2*(x.globals.series[c][de]<0?ne:0)),$=$+x.globals.translateY-M.tooltipRect.ttHeight/2,I.style.left=U+x.globals.translateX+"px",I.style.top=$+"px")}},{key:"getBarTooltipXY",value:function(o){var c=this,h=o.e,_=o.opt,b=this.w,x=null,M=this.ttCtx,I=0,F=0,U=0,$=0,q=0,ne=h.target.classList;if(ne.contains("apexcharts-bar-area")||ne.contains("apexcharts-candlestick-area")||ne.contains("apexcharts-boxPlot-area")||ne.contains("apexcharts-rangebar-area")){var de=h.target,ge=de.getBoundingClientRect(),we=_.elGrid.getBoundingClientRect(),me=ge.height;q=ge.height;var Se=ge.width,N=parseInt(de.getAttribute("cx"),10),Q=parseInt(de.getAttribute("cy"),10);$=parseFloat(de.getAttribute("barWidth"));var pe="touchmove"===h.type?h.touches[0].clientX:h.clientX;x=parseInt(de.getAttribute("j"),10),I=parseInt(de.parentNode.getAttribute("rel"),10)-1;var xe=de.getAttribute("data-range-y1"),Le=de.getAttribute("data-range-y2");b.globals.comboCharts&&(I=parseInt(de.parentNode.getAttribute("data:realIndex"),10));var Ze=function(It){return b.globals.isXNumeric?N-Se/2:c.isVerticalGroupedRangeBar?N+Se/2:N-M.dataPointsDividedWidth+Se/2},kt=function(){return Q-M.dataPointsDividedHeight+me/2-M.tooltipRect.ttHeight/2};M.tooltipLabels.drawSeriesTexts({ttItems:_.ttItems,i:I,j:x,y1:xe?parseInt(xe,10):null,y2:Le?parseInt(Le,10):null,shared:!M.showOnIntersect&&b.config.tooltip.shared,e:h}),b.config.tooltip.followCursor?b.globals.isBarHorizontal?(F=pe-we.left+15,U=kt()):(F=Ze(),U=h.clientY-we.top-M.tooltipRect.ttHeight/2-15):b.globals.isBarHorizontal?((F=N)<M.xyRatios.baseLineInvertedY&&(F=N-M.tooltipRect.ttWidth),U=kt()):(F=Ze(),U=Q)}return{x:F,y:U,barHeight:q,barWidth:$,i:I,j:x}}}]),le}(),Ie=function(){function le(o){V(this,le),this.w=o.w,this.ttCtx=o}return Me(le,[{key:"drawXaxisTooltip",value:function(){var o=this.w,c=this.ttCtx,h="bottom"===o.config.xaxis.position;c.xaxisOffY=h?o.globals.gridHeight+1:-o.globals.xAxisHeight-o.config.xaxis.axisTicks.height+3;var _=h?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",b=o.globals.dom.elWrap;c.isXAxisTooltipEnabled&&null===o.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(c.xaxisTooltip=document.createElement("div"),c.xaxisTooltip.setAttribute("class",_+" apexcharts-theme-"+o.config.tooltip.theme),b.appendChild(c.xaxisTooltip),c.xaxisTooltipText=document.createElement("div"),c.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),c.xaxisTooltipText.style.fontFamily=o.config.xaxis.tooltip.style.fontFamily||o.config.chart.fontFamily,c.xaxisTooltipText.style.fontSize=o.config.xaxis.tooltip.style.fontSize,c.xaxisTooltip.appendChild(c.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var o=this.w,c=this.ttCtx,h=0;h<o.config.yaxis.length;h++){var _=o.config.yaxis[h].opposite||o.config.yaxis[h].crosshairs.opposite;c.yaxisOffX=_?o.globals.gridWidth+1:1;var b="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h,_?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),x=o.globals.dom.elWrap;null===o.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h))&&(c.yaxisTooltip=document.createElement("div"),c.yaxisTooltip.setAttribute("class",b+" apexcharts-theme-"+o.config.tooltip.theme),x.appendChild(c.yaxisTooltip),0===h&&(c.yaxisTooltipText=[]),c.yaxisTooltipText[h]=document.createElement("div"),c.yaxisTooltipText[h].classList.add("apexcharts-yaxistooltip-text"),c.yaxisTooltip.appendChild(c.yaxisTooltipText[h]))}}},{key:"setXCrosshairWidth",value:function(){var o=this.w,c=this.ttCtx,h=c.getElXCrosshairs();if(c.xcrosshairsWidth=parseInt(o.config.xaxis.crosshairs.width,10),o.globals.comboCharts){var _=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==_&&"barWidth"===o.config.xaxis.crosshairs.width){var b=parseFloat(_.getAttribute("barWidth"));c.xcrosshairsWidth=b}else"tickWidth"===o.config.xaxis.crosshairs.width&&(c.xcrosshairsWidth=o.globals.gridWidth/o.globals.labels.length)}else if("tickWidth"===o.config.xaxis.crosshairs.width)c.xcrosshairsWidth=o.globals.gridWidth/o.globals.labels.length;else if("barWidth"===o.config.xaxis.crosshairs.width){var I=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==I){var F=parseFloat(I.getAttribute("barWidth"));c.xcrosshairsWidth=F}else c.xcrosshairsWidth=1}o.globals.isBarHorizontal&&(c.xcrosshairsWidth=0),null!==h&&c.xcrosshairsWidth>0&&h.setAttribute("width",c.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var o=this.w,c=this.ttCtx;c.ycrosshairs=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),c.ycrosshairsHidden=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(o,c,h){var _=this.ttCtx,b=this.w,x=b.globals.yLabelFormatters[o];if(_.yaxisTooltips[o]){var M=_.getElGrid().getBoundingClientRect(),U=b.globals.minYArr[o]+(b.globals.maxYArr[o]-b.globals.minYArr[o]-(c-M.top)*h.yRatio[o]);_.tooltipPosition.moveYCrosshairs(c-M.top),_.yaxisTooltipText[o].innerHTML=x(U),_.tooltipPosition.moveYAxisTooltip(o)}}}]),le}(),Ne=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.tConfig=c.config.tooltip,this.tooltipUtil=new gr(this),this.tooltipLabels=new hr(this),this.tooltipPosition=new Cr(this),this.marker=new $r(this),this.intersect=new Ct(this),this.axesTooltip=new Ie(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!c.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Me(le,[{key:"getElTooltip",value:function(o){return o||(o=this),o.w.globals.dom.baseEl?o.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(o){var c=this.w;this.xyRatios=o,this.isXAxisTooltipEnabled=c.config.xaxis.tooltip.enabled&&c.globals.axisCharts,this.yaxisTooltips=c.config.yaxis.map(function(x,M){return!!(x.show&&x.tooltip.enabled&&c.globals.axisCharts)}),this.allTooltipSeriesGroups=[],c.globals.axisCharts||(this.showTooltipTitle=!1);var h=document.createElement("div");if(h.classList.add("apexcharts-tooltip"),c.config.tooltip.cssClass&&h.classList.add(c.config.tooltip.cssClass),h.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),c.globals.dom.elWrap.appendChild(h),c.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var _=new fr(this.ctx);this.xAxisTicksPositions=_.getXAxisTicksPositions()}if(!c.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==c.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==c.config.markers.size&&0!==c.globals.markers.largestSize||this.marker.drawDynamicPoints(this),c.globals.collapsedSeries.length!==c.globals.series.length){this.dataPointsDividedHeight=c.globals.gridHeight/c.globals.dataPoints,this.dataPointsDividedWidth=c.globals.gridWidth/c.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||c.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,h.appendChild(this.tooltipTitle));var b=c.globals.series.length;(c.globals.xyCharts||c.globals.comboCharts)&&this.tConfig.shared&&(b=this.showOnIntersect?1:c.globals.series.length),this.legendLabels=c.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(b),this.addSVGEvents()}}},{key:"createTTElements",value:function(o){for(var c=this,h=this.w,_=[],b=this.getElTooltip(),x=function(I){var F=document.createElement("div");F.classList.add("apexcharts-tooltip-series-group"),F.style.order=h.config.tooltip.inverseOrder?o-I:I+1,c.tConfig.shared&&c.tConfig.enabledOnSeries&&Array.isArray(c.tConfig.enabledOnSeries)&&c.tConfig.enabledOnSeries.indexOf(I)<0&&F.classList.add("apexcharts-tooltip-series-group-hidden");var U=document.createElement("span");U.classList.add("apexcharts-tooltip-marker"),U.style.backgroundColor=h.globals.colors[I],F.appendChild(U);var $=document.createElement("div");$.classList.add("apexcharts-tooltip-text"),$.style.fontFamily=c.tConfig.style.fontFamily||h.config.chart.fontFamily,$.style.fontSize=c.tConfig.style.fontSize,["y","goals","z"].forEach(function(q){var ne=document.createElement("div");ne.classList.add("apexcharts-tooltip-".concat(q,"-group"));var de=document.createElement("span");de.classList.add("apexcharts-tooltip-text-".concat(q,"-label")),ne.appendChild(de);var ge=document.createElement("span");ge.classList.add("apexcharts-tooltip-text-".concat(q,"-value")),ne.appendChild(ge),$.appendChild(ne)}),F.appendChild($),b.appendChild(F),_.push(F)},M=0;M<o;M++)x(M);return _}},{key:"addSVGEvents",value:function(){var o=this.w,c=o.config.chart.type,h=this.getElTooltip(),_=!("bar"!==c&&"candlestick"!==c&&"boxPlot"!==c&&"rangeBar"!==c),b="area"===c||"line"===c||"scatter"===c||"bubble"===c||"radar"===c,x=o.globals.dom.Paper.node,M=this.getElGrid();M&&(this.seriesBound=M.getBoundingClientRect());var I,F=[],U=[],$={hoverArea:x,elGrid:M,tooltipEl:h,tooltipY:F,tooltipX:U,ttItems:this.ttItems};if(o.globals.axisCharts&&(b?I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):_?I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==c&&"treemap"!==c||(I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),I&&I.length))for(var q=0;q<I.length;q++)F.push(I[q].getAttribute("cy")),U.push(I[q].getAttribute("cx"));if(o.globals.xyCharts&&!this.showOnIntersect||o.globals.comboCharts&&!this.showOnIntersect||_&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([x],$);else if(_&&!o.globals.comboCharts||b&&this.showOnIntersect)this.addDatapointEventsListeners($);else if(!o.globals.axisCharts||"heatmap"===c||"treemap"===c){var ne=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(ne,$)}if(this.showOnIntersect){var de=o.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");de.length>0&&this.addPathsEventListeners(de,$),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners($)}}},{key:"drawFixedTooltipRect",value:function(){var o=this.w,c=this.getElTooltip(),h=c.getBoundingClientRect(),_=h.width+10,b=h.height+10,x=this.tConfig.fixed.offsetX,M=this.tConfig.fixed.offsetY,I=this.tConfig.fixed.position.toLowerCase();return I.indexOf("right")>-1&&(x=x+o.globals.svgWidth-_+10),I.indexOf("bottom")>-1&&(M=M+o.globals.svgHeight-b-10),c.style.left=x+"px",c.style.top=M+"px",{x,y:M,ttWidth:_,ttHeight:b}}},{key:"addDatapointEventsListeners",value:function(o){var c=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(c,o)}},{key:"addPathsEventListeners",value:function(o,c){for(var h=this,_=function(x){var M={paths:o[x],tooltipEl:c.tooltipEl,tooltipY:c.tooltipY,tooltipX:c.tooltipX,elGrid:c.elGrid,hoverArea:c.hoverArea,ttItems:c.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(I){return o[x].addEventListener(I,h.onSeriesHover.bind(h,M),{capture:!1,passive:!0})})},b=0;b<o.length;b++)_(b)}},{key:"onSeriesHover",value:function(o,c){var h=this,_=Date.now()-this.lastHoverTime;_>=100?this.seriesHover(o,c):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){h.seriesHover(o,c)},100-_))}},{key:"seriesHover",value:function(o,c){var h=this;this.lastHoverTime=Date.now();var _=[],b=this.w;b.config.chart.group&&(_=this.ctx.getGroupedCharts()),b.globals.axisCharts&&(b.globals.minX===-1/0&&b.globals.maxX===1/0||0===b.globals.dataPoints)||(_.length?_.forEach(function(x){var M=h.getElTooltip(x);x.w.globals.minX===h.w.globals.minX&&x.w.globals.maxX===h.w.globals.maxX&&x.w.globals.tooltip.seriesHoverByContext({chartCtx:x,ttCtx:x.w.globals.tooltip,opt:{paths:o.paths,tooltipEl:M,tooltipY:o.tooltipY,tooltipX:o.tooltipX,elGrid:o.elGrid,hoverArea:o.hoverArea,ttItems:x.w.globals.tooltip.ttItems},e:c})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:o,e:c}))}},{key:"seriesHoverByContext",value:function(o){var c=o.chartCtx,h=o.ttCtx,_=o.opt,b=o.e,x=c.w,M=this.getElTooltip();M&&(h.tooltipRect={x:0,y:0,ttWidth:M.getBoundingClientRect().width,ttHeight:M.getBoundingClientRect().height},h.e=b,h.tooltipUtil.hasBars()&&!x.globals.comboCharts&&!h.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new An(c).toggleSeriesOnHover(b,b.target.parentNode),h.fixedTooltip&&h.drawFixedTooltipRect(),x.globals.axisCharts?h.axisChartsTooltips({e:b,opt:_,tooltipRect:h.tooltipRect}):h.nonAxisChartsTooltips({e:b,opt:_,tooltipRect:h.tooltipRect}))}},{key:"axisChartsTooltips",value:function(o){var c,h,_=o.e,b=o.opt,x=this.w,M=b.elGrid.getBoundingClientRect(),I="touchmove"===_.type?_.touches[0].clientX:_.clientX,F="touchmove"===_.type?_.touches[0].clientY:_.clientY;if(this.clientY=F,this.clientX=I,x.globals.capturedSeriesIndex=-1,x.globals.capturedDataPointIndex=-1,F<M.top||F>M.top+M.height)this.handleMouseOut(b);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!x.config.tooltip.shared){var U=parseInt(b.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(U)<0)return void this.handleMouseOut(b)}var $=this.getElTooltip(),q=this.getElXCrosshairs(),ne=x.globals.xyCharts||"bar"===x.config.chart.type&&!x.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||x.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===_.type||"touchmove"===_.type||"mouseup"===_.type){if(x.globals.collapsedSeries.length+x.globals.ancillaryCollapsedSeries.length===x.globals.series.length)return;null!==q&&q.classList.add("apexcharts-active");var de=this.yaxisTooltips.filter(function(me){return!0===me});if(null!==this.ycrosshairs&&de.length&&this.ycrosshairs.classList.add("apexcharts-active"),ne&&!this.showOnIntersect)this.handleStickyTooltip(_,I,F,b);else if("heatmap"===x.config.chart.type||"treemap"===x.config.chart.type){var ge=this.intersect.handleHeatTreeTooltip({e:_,opt:b,x:c,y:h,type:x.config.chart.type});h=ge.y,$.style.left=(c=ge.x)+"px",$.style.top=h+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:_,opt:b}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:_,opt:b,x:c,y:h});if(this.yaxisTooltips.length)for(var we=0;we<x.config.yaxis.length;we++)this.axesTooltip.drawYaxisTooltipText(we,F,this.xyRatios);b.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==_.type&&"touchend"!==_.type||this.handleMouseOut(b)}}},{key:"nonAxisChartsTooltips",value:function(o){var c=o.e,h=o.opt,_=o.tooltipRect,b=this.w,x=h.paths.getAttribute("rel"),M=this.getElTooltip(),I=b.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===c.type||"touchmove"===c.type){M.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:parseInt(x,10)-1,shared:!1});var U=b.globals.clientY-I.top-_.ttHeight-10;if(M.style.left=b.globals.clientX-I.left-_.ttWidth/2+"px",M.style.top=U+"px",b.config.legend.tooltipHoverFormatter){var $=x-1,q=(0,b.config.legend.tooltipHoverFormatter)(this.legendLabels[$].getAttribute("data:default-text"),{seriesIndex:$,dataPointIndex:$,w:b});this.legendLabels[$].innerHTML=q}}else"mouseout"!==c.type&&"touchend"!==c.type||(M.classList.remove("apexcharts-active"),b.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(ne){var de=ne.getAttribute("data:default-text");ne.innerHTML=decodeURIComponent(de)}))}},{key:"handleStickyTooltip",value:function(o,c,h,_){var b=this.w,x=this.tooltipUtil.getNearestValues({context:this,hoverArea:_.hoverArea,elGrid:_.elGrid,clientX:c,clientY:h}),M=x.j,I=x.capturedSeries;b.globals.collapsedSeriesIndices.includes(I)&&(I=null);var F=_.elGrid.getBoundingClientRect();if(x.hoverX<0||x.hoverX>F.width)this.handleMouseOut(_);else if(null!==I)this.handleStickyCapturedSeries(o,I,_,M);else if(this.tooltipUtil.isXoverlap(M)||b.globals.isBarHorizontal){var U=b.globals.series.findIndex(function($,q){return!b.globals.collapsedSeriesIndices.includes(q)});this.create(o,this,U,M,_.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(o,c,h,_){var b=this.w;if(this.tConfig.shared||null!==b.globals.series[c][_]){if(void 0!==b.globals.series[c][_])this.tConfig.shared&&this.tooltipUtil.isXoverlap(_)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(o,this,c,_,h.ttItems):this.create(o,this,c,_,h.ttItems,!1);else if(this.tooltipUtil.isXoverlap(_)){var x=b.globals.series.findIndex(function(M,I){return!b.globals.collapsedSeriesIndices.includes(I)});this.create(o,this,x,_,h.ttItems)}}else this.handleMouseOut(h)}},{key:"deactivateHoverFilter",value:function(){for(var o=this.w,c=new at(this.ctx),h=o.globals.dom.Paper.select(".apexcharts-bar-area"),_=0;_<h.length;_++)c.pathMouseLeave(h[_])}},{key:"handleMouseOut",value:function(o){var c=this.w,h=this.getElXCrosshairs();if(o.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==c.config.chart.type&&this.marker.resetPointsSize(),null!==h&&h.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var _=0;_<this.yaxisTTEls.length;_++)this.yaxisTTEls[_].classList.remove("apexcharts-active")}c.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(b){var x=b.getAttribute("data:default-text");b.innerHTML=decodeURIComponent(x)})}},{key:"markerClick",value:function(o,c,h){var _=this.w;"function"==typeof _.config.chart.events.markerClick&&_.config.chart.events.markerClick(o,this.ctx,{seriesIndex:c,dataPointIndex:h,w:_}),this.ctx.events.fireEvent("markerClick",[o,this.ctx,{seriesIndex:c,dataPointIndex:h,w:_}])}},{key:"create",value:function(o,c,h,_,b){var x,M,I,F,U,$,q,ne,de,ge,we,me,Se,N,Q,pe,xe=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,Le=this.w,Ze=c;"mouseup"===o.type&&this.markerClick(o,h,_),null===xe&&(xe=this.tConfig.shared);var kt=this.tooltipUtil.hasMarkers(h),It=this.tooltipUtil.getElBars();if(Le.config.legend.tooltipHoverFormatter){var ii=Le.config.legend.tooltipHoverFormatter,wi=Array.from(this.legendLabels);wi.forEach(function(Wr){var Mr=Wr.getAttribute("data:default-text");Wr.innerHTML=decodeURIComponent(Mr)});for(var Mi=0;Mi<wi.length;Mi++){var dn=wi[Mi],En=parseInt(dn.getAttribute("i"),10),Fn=decodeURIComponent(dn.getAttribute("data:default-text")),Jn=ii(Fn,{seriesIndex:xe?En:h,dataPointIndex:_,w:Le});if(xe)dn.innerHTML=Le.globals.collapsedSeriesIndices.indexOf(En)<0?Jn:Fn;else if(dn.innerHTML=En===h?Jn:Fn,h===En)break}}var ar=Fe(Fe({ttItems:b,i:h,j:_},void 0!==(null===(x=Le.globals.seriesRange)||void 0===x||null===(M=x[h])||void 0===M||null===(I=M[_])||void 0===I||null===(F=I.y[0])||void 0===F?void 0:F.y1)&&{y1:null===(U=Le.globals.seriesRange)||void 0===U||null===($=U[h])||void 0===$||null===(q=$[_])||void 0===q||null===(ne=q.y[0])||void 0===ne?void 0:ne.y1}),void 0!==(null===(de=Le.globals.seriesRange)||void 0===de||null===(ge=de[h])||void 0===ge||null===(we=ge[_])||void 0===we||null===(me=we.y[0])||void 0===me?void 0:me.y2)&&{y2:null===(Se=Le.globals.seriesRange)||void 0===Se||null===(N=Se[h])||void 0===N||null===(Q=N[_])||void 0===Q||null===(pe=Q.y[0])||void 0===pe?void 0:pe.y2});if(xe){if(Ze.tooltipLabels.drawSeriesTexts(Fe(Fe({},ar),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),kt)Le.globals.markers.largestSize>0?Ze.marker.enlargePoints(_):Ze.tooltipPosition.moveDynamicPointsOnHover(_);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(It),this.barSeriesHeight>0)){var lr=new at(this.ctx),Lr=Le.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(_,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(_,h);for(var Hr=0;Hr<Lr.length;Hr++)lr.pathMouseEnter(Lr[Hr])}}else Ze.tooltipLabels.drawSeriesTexts(Fe({shared:!1},ar)),this.tooltipUtil.hasBars()&&Ze.tooltipPosition.moveStickyTooltipOverBars(_,h),kt&&Ze.tooltipPosition.moveMarkers(h,_)}}]),le}(),ut=function(){function le(o){V(this,le),this.w=o.w,this.barCtx=o,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Me(le,[{key:"handleBarDataLabels",value:function(o){var c=o.x,h=o.y,_=o.y1,b=o.y2,x=o.i,M=o.j,I=o.realIndex,F=o.groupIndex,U=o.series,$=o.barHeight,q=o.barWidth,ne=o.barXPosition,de=o.barYPosition,ge=o.visibleSeries,we=o.renderedPath,me=this.w,Se=new at(this.barCtx.ctx),N=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[I]:this.barCtx.strokeWidth,Q=c+parseFloat(q*ge),pe=h+parseFloat($*ge);me.globals.isXNumeric&&!me.globals.isBarHorizontal&&(Q=c+parseFloat(q*(ge+1)),pe=h+parseFloat($*(ge+1))-N);var xe,It,Le=null,Ze=c,kt=h,ii=me.config.dataLabels,wi=this.barCtx.barOptions.dataLabels,Mi=this.barCtx.barOptions.dataLabels.total;void 0!==de&&this.barCtx.isRangeBar&&(pe=de,kt=de),void 0!==ne&&this.barCtx.isVerticalGroupedRangeBar&&(Q=ne,Ze=ne);var dn=ii.offsetX,En=ii.offsetY,Fn={width:0,height:0};me.config.dataLabels.enabled&&(Fn=Se.getTextRects(me.globals.yLabelFormatters[0](this.barCtx.series[x][M]),parseFloat(ii.style.fontSize)));var ar={x:c,y:h,i:x,j:M,realIndex:I,groupIndex:F||-1,renderedPath:we,bcx:Q,bcy:pe,barHeight:$,barWidth:q,textRects:Fn,strokeWidth:N,dataLabelsX:Ze,dataLabelsY:kt,dataLabelsConfig:ii,barDataLabelsConfig:wi,barTotalDataLabelsConfig:Mi,offX:dn,offY:En};return It=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(ar):this.calculateColumnsDataLabelsPosition(ar),we.attr({cy:It.bcy,cx:It.bcx,j:M,val:U[x][M],barHeight:$,barWidth:q}),xe=this.drawCalculatedDataLabels({x:It.dataLabelsX,y:It.dataLabelsY,val:this.barCtx.isRangeBar?[_,b]:U[x][M],i:I,j:M,barWidth:q,barHeight:$,textRects:Fn,dataLabelsConfig:ii}),me.config.chart.stacked&&Mi.enabled&&(Le=this.drawTotalDataLabels({x:It.totalDataLabelsX,y:It.totalDataLabelsY,barWidth:q,barHeight:$,realIndex:I,textAnchor:It.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:I,j:M}),dataLabelsConfig:ii,barTotalDataLabelsConfig:Mi})),{dataLabels:xe,totalDataLabels:Le}}},{key:"getStackedTotalDataLabel",value:function(o){var c=o.realIndex,h=o.j,_=this.w,b=this.barCtx.stackedSeriesTotals[h];return this.totalFormatter&&(b=this.totalFormatter(b,Fe(Fe({},_),{},{seriesIndex:c,dataPointIndex:h,w:_}))),b}},{key:"calculateColumnsDataLabelsPosition",value:function(o){var c,h,_=this.w,b=o.i,x=o.j,M=o.realIndex,I=o.groupIndex,F=o.y,U=o.bcx,$=o.barWidth,q=o.barHeight,ne=o.textRects,de=o.dataLabelsX,ge=o.dataLabelsY,we=o.dataLabelsConfig,me=o.barDataLabelsConfig,Se=o.barTotalDataLabelsConfig,N=o.strokeWidth,Q=o.offX,pe=o.offY;q=Math.abs(q);var xe="vertical"===_.config.plotOptions.bar.dataLabels.orientation,Le=this.barCtx.barHelpers.getZeroValueEncounters({i:b,j:x}).zeroEncounters;U=U-N/2+(-1!==I?I*$:0),this.barCtx.isVerticalGroupedRangeBar?de+=$/2:(de=_.globals.isXNumeric?U-$/2+Q:U-_.globals.gridWidth/_.globals.dataPoints+$/2+Q,Le>0&&_.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(de-=$*Le)),xe&&(de=de+ne.height/2-N/2-2);var kt=this.barCtx.series[b][x]<0,It=F;switch(this.barCtx.isReversed&&(It=F-q+(kt?2*q:0),F-=q),me.position){case"center":ge=xe?kt?It-q/2+pe:It+q/2-pe:kt?It-q/2+ne.height/2+pe:It+q/2+ne.height/2-pe;break;case"bottom":ge=xe?kt?It-q+pe:It+q-pe:kt?It-q+ne.height+N+pe:It+q-ne.height/2+N-pe;break;case"top":ge=xe?kt?It+pe:It-pe:kt?It-ne.height/2-pe:It+ne.height+pe}if(this.barCtx.lastActiveBarSerieIndex===M&&Se.enabled){var ii=new at(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:M,j:x}),we.fontSize);c=kt?It-ii.height/2-pe-Se.offsetY+18:It+ii.height+pe+Se.offsetY-18,h=de+Se.offsetX}return _.config.chart.stacked||(ge<0?ge=0+N:ge+ne.height/3>_.globals.gridHeight&&(ge=_.globals.gridHeight-N)),{bcx:U,bcy:F,dataLabelsX:de,dataLabelsY:ge,totalDataLabelsX:h,totalDataLabelsY:c,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(o){var c=this.w,h=o.x,_=o.i,b=o.j,x=o.realIndex,M=o.groupIndex,I=o.bcy,F=o.barHeight,U=o.barWidth,$=o.textRects,q=o.dataLabelsX,ne=o.strokeWidth,de=o.dataLabelsConfig,ge=o.barDataLabelsConfig,we=o.barTotalDataLabelsConfig,me=o.offX,Se=o.offY,N=c.globals.gridHeight/c.globals.dataPoints;U=Math.abs(U);var Q,pe,xe=(I+=-1!==M?M*F:0)-(this.barCtx.isRangeBar?0:N)+F/2+$.height/2+Se-3,Le="start",Ze=this.barCtx.series[_][b]<0,kt=h;switch(this.barCtx.isReversed&&(kt=h+U-(Ze?2*U:0),h=c.globals.gridWidth-U),ge.position){case"center":q=Ze?kt+U/2-me:Math.max($.width/2,kt-U/2)+me;break;case"bottom":q=Ze?kt+U-ne-Math.round($.width/2)-me:kt-U+ne+Math.round($.width/2)+me;break;case"top":q=Ze?kt-ne+Math.round($.width/2)-me:kt-ne-Math.round($.width/2)+me}if(this.barCtx.lastActiveBarSerieIndex===x&&we.enabled){var It=new at(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:x,j:b}),de.fontSize);Ze?(Q=kt-ne+Math.round(It.width/2)-me-we.offsetX-15,Le="end"):Q=kt-ne-Math.round(It.width/2)+me+we.offsetX+15,pe=xe+we.offsetY}return c.config.chart.stacked||(q<0?q=q+$.width+ne:q+$.width/2>c.globals.gridWidth&&(q=c.globals.gridWidth-$.width-ne)),{bcx:h,bcy:I,dataLabelsX:q,dataLabelsY:xe,totalDataLabelsX:Q,totalDataLabelsY:pe,totalDataLabelsAnchor:Le}}},{key:"drawCalculatedDataLabels",value:function(o){var c=o.x,h=o.y,_=o.val,b=o.i,x=o.j,M=o.textRects,I=o.barHeight,F=o.barWidth,U=o.dataLabelsConfig,$=this.w,q="rotate(0)";"vertical"===$.config.plotOptions.bar.dataLabels.orientation&&(q="rotate(-90, ".concat(c,", ").concat(h,")"));var ne=new Nn(this.barCtx.ctx),de=new at(this.barCtx.ctx),ge=U.formatter,we=null,me=$.globals.collapsedSeriesIndices.indexOf(b)>-1;if(U.enabled&&!me){we=de.group({class:"apexcharts-data-labels",transform:q});var Se="";void 0!==_&&(Se=ge(_,Fe(Fe({},$),{},{seriesIndex:b,dataPointIndex:x,w:$}))),!_&&$.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(Se="");var N=$.globals.series[b][x]<0,Q=$.config.plotOptions.bar.dataLabels.position;"vertical"===$.config.plotOptions.bar.dataLabels.orientation&&("top"===Q&&(U.textAnchor=N?"end":"start"),"center"===Q&&(U.textAnchor="middle"),"bottom"===Q&&(U.textAnchor=N?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&F<de.getTextRects(Se,parseFloat(U.style.fontSize)).width&&(Se=""),$.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?M.width/1.6>Math.abs(F)&&(Se=""):M.height/1.6>Math.abs(I)&&(Se=""));var pe=Fe({},U);this.barCtx.isHorizontal&&_<0&&("start"===U.textAnchor?pe.textAnchor="end":"end"===U.textAnchor&&(pe.textAnchor="start")),ne.plotDataLabelsText({x:c,y:h,text:Se,i:b,j:x,parent:we,dataLabelsConfig:pe,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return we}},{key:"drawTotalDataLabels",value:function(o){var c,h=o.x,_=o.y,b=o.val,x=o.barWidth,M=o.barHeight,I=o.realIndex,F=o.textAnchor,U=o.barTotalDataLabelsConfig,$=this.w,q=new at(this.barCtx.ctx);return U.enabled&&void 0!==h&&void 0!==_&&this.barCtx.lastActiveBarSerieIndex===I&&(c=q.drawText({x:h-(!$.globals.isBarHorizontal&&$.globals.seriesGroups.length?x/$.globals.seriesGroups.length:0),y:_-($.globals.isBarHorizontal&&$.globals.seriesGroups.length?M/$.globals.seriesGroups.length:0),foreColor:U.style.color,text:b,textAnchor:F,fontFamily:U.style.fontFamily,fontSize:U.style.fontSize,fontWeight:U.style.fontWeight})),c}}]),le}(),lt=function(){function le(o){V(this,le),this.w=o.w,this.barCtx=o}return Me(le,[{key:"initVariables",value:function(o){var c=this.w;this.barCtx.series=o,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var h=0;h<o.length;h++)if(o[h].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=o[h].length),c.globals.isXNumeric)for(var _=0;_<o[h].length;_++)c.globals.seriesX[h][_]>c.globals.minX&&c.globals.seriesX[h][_]<c.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=c.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],c.globals.comboCharts||this.checkZeroSeries({series:o})}},{key:"initialPositions",value:function(){var o,c,h,_,b,x,M,I,F=this.w,U=F.globals.dataPoints;this.barCtx.isRangeBar&&(U=F.globals.labels.length);var $=this.barCtx.seriesLen;if(F.config.plotOptions.bar.rangeBarGroupRows&&($=1),this.barCtx.isHorizontal)b=(h=F.globals.gridHeight/U)/$,F.globals.isXNumeric&&(b=(h=F.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),b=b*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(b=parseInt(this.barCtx.barOptions.barHeight,10)),I=this.barCtx.baseLineInvertedY+F.globals.padHorizontal+(this.barCtx.isReversed?F.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(I=F.globals.gridWidth/2),c=(h-b*this.barCtx.seriesLen)/2;else{if(_=F.globals.gridWidth/this.barCtx.visibleItems,F.config.xaxis.convertedCatToNumeric&&(_=F.globals.gridWidth/F.globals.dataPoints),x=_/$*parseInt(this.barCtx.barOptions.columnWidth,10)/100,F.globals.isXNumeric){var q=this.barCtx.xRatio;F.globals.minXDiff&&.5!==F.globals.minXDiff&&F.globals.minXDiff/q>0&&(_=F.globals.minXDiff/q),(x=_/$*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(x=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(x=parseInt(this.barCtx.barOptions.columnWidth,10)),M=F.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?F.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),o=F.globals.padHorizontal+(_-x*this.barCtx.seriesLen)/2}return F.globals.barHeight=b,F.globals.barWidth=x,{x:o,y:c,yDivision:h,xDivision:_,barHeight:b,barWidth:x,zeroH:M,zeroW:I}}},{key:"initializeStackedPrevVars",value:function(o){var c=o.w;c.globals.hasSeriesGroups?c.globals.seriesGroups.forEach(function(h){o[h]||(o[h]={}),o[h].prevY=[],o[h].prevX=[],o[h].prevYF=[],o[h].prevXF=[],o[h].prevYVal=[],o[h].prevXVal=[]}):(o.prevY=[],o.prevX=[],o.prevYF=[],o.prevXF=[],o.prevYVal=[],o.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(o){var c=o.w;c.globals.hasSeriesGroups?c.globals.seriesGroups.forEach(function(h){o[h]||(o[h]={}),o[h].xArrj=[],o[h].xArrjF=[],o[h].xArrjVal=[],o[h].yArrj=[],o[h].yArrjF=[],o[h].yArrjVal=[]}):(o.xArrj=[],o.xArrjF=[],o.xArrjVal=[],o.yArrj=[],o.yArrjF=[],o.yArrjVal=[])}},{key:"getPathFillColor",value:function(o,c,h,_){var b,x,M,I,F=this.w,U=new Bi(this.barCtx.ctx),$=null,q=this.barCtx.barOptions.distributed?h:c;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(ne){o[c][h]>=ne.from&&o[c][h]<=ne.to&&($=ne.color)}),F.config.series[c].data[h]&&F.config.series[c].data[h].fillColor&&($=F.config.series[c].data[h].fillColor),U.fillPath({seriesNumber:this.barCtx.barOptions.distributed?q:_,dataPointIndex:h,color:$,value:o[c][h],fillConfig:null===(b=F.config.series[c].data[h])||void 0===b?void 0:b.fill,fillType:null!==(x=F.config.series[c].data[h])&&void 0!==x&&null!==(M=x.fill)&&void 0!==M&&M.type?null===(I=F.config.series[c].data[h])||void 0===I?void 0:I.fill.type:Array.isArray(F.config.fill.type)?F.config.fill.type[c]:F.config.fill.type})}},{key:"getStrokeWidth",value:function(o,c,h){var _=0,b=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[o][c],b.config.stroke.show&&(this.barCtx.isNullValue||(_=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth)),_}},{key:"shouldApplyRadius",value:function(o){var c=this.w,h=!1;return c.config.plotOptions.bar.borderRadius>0&&(c.config.chart.stacked&&"last"===c.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===o&&(h=!0):h=!0),h}},{key:"barBackground",value:function(o){var c=o.j,h=o.i,_=o.x1,b=o.x2,x=o.y1,M=o.y2,I=o.elSeries,F=this.w,U=new at(this.barCtx.ctx),$=new An(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&$===h){c>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(c%=this.barCtx.barOptions.colors.backgroundBarColors.length);var ne=U.drawRect(void 0!==_?_:0,void 0!==x?x:0,void 0!==b?b:F.globals.gridWidth,void 0!==M?M:F.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[c],this.barCtx.barOptions.colors.backgroundBarOpacity);I.add(ne),ne.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(o){var c,h=o.barWidth,_=o.barXPosition,b=o.y1,x=o.y2,M=o.strokeWidth,I=o.seriesGroup,F=o.realIndex,U=o.i,$=o.j,q=o.w,ne=new at(this.barCtx.ctx);(M=Array.isArray(M)?M[F]:M)||(M=0);var de=h,ge=_;null!==(c=q.config.series[F].data[$])&&void 0!==c&&c.columnWidthOffset&&(ge=_-q.config.series[F].data[$].columnWidthOffset/2,de=h+q.config.series[F].data[$].columnWidthOffset);var we=ge,me=ge+de;x+=.001;var Se=ne.move(we,b+=.001),N=ne.move(we,b),Q=ne.line(me-M,b);if(q.globals.previousPaths.length>0&&(N=this.barCtx.getPreviousPath(F,$,!1)),Se=Se+ne.line(we,x)+ne.line(me-M,x)+ne.line(me-M,b)+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),N=N+ne.line(we,b)+Q+Q+Q+Q+Q+ne.line(we,b)+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(F)&&(Se=ne.roundPathCorners(Se,q.config.plotOptions.bar.borderRadius)),q.config.chart.stacked){var pe=this.barCtx;q.globals.hasSeriesGroups&&I&&(pe=this.barCtx[I]),pe.yArrj.push(x),pe.yArrjF.push(Math.abs(b-x)),pe.yArrjVal.push(this.barCtx.series[U][$])}return{pathTo:Se,pathFrom:N}}},{key:"getBarpaths",value:function(o){var c,h=o.barYPosition,_=o.barHeight,b=o.x1,x=o.x2,M=o.strokeWidth,I=o.seriesGroup,F=o.realIndex,U=o.i,$=o.j,q=o.w,ne=new at(this.barCtx.ctx);(M=Array.isArray(M)?M[F]:M)||(M=0);var de=h,ge=_;null!==(c=q.config.series[F].data[$])&&void 0!==c&&c.barHeightOffset&&(de=h-q.config.series[F].data[$].barHeightOffset/2,ge=_+q.config.series[F].data[$].barHeightOffset);var we=de,me=de+ge;x+=.001;var Se=ne.move(b+=.001,we),N=ne.move(b,we);q.globals.previousPaths.length>0&&(N=this.barCtx.getPreviousPath(F,$,!1));var Q=ne.line(b,me-M);if(Se=Se+ne.line(x,we)+ne.line(x,me-M)+Q+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),N=N+ne.line(b,we)+Q+Q+Q+Q+Q+ne.line(b,we)+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(F)&&(Se=ne.roundPathCorners(Se,q.config.plotOptions.bar.borderRadius)),q.config.chart.stacked){var pe=this.barCtx;q.globals.hasSeriesGroups&&I&&(pe=this.barCtx[I]),pe.xArrj.push(x),pe.xArrjF.push(Math.abs(b-x)),pe.xArrjVal.push(this.barCtx.series[U][$])}return{pathTo:Se,pathFrom:N}}},{key:"checkZeroSeries",value:function(o){for(var c=o.series,h=this.w,_=0;_<c.length;_++){for(var b=0,x=0;x<c[h.globals.maxValsInArrayIndex].length;x++)b+=c[_][x];0===b&&this.barCtx.zeroSerieses.push(_)}}},{key:"getXForValue",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:c;return null!=o&&(h=c+o/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?o/this.barCtx.invertedYRatio:0)),h}},{key:"getYForValue",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:c;return null!=o&&(h=c-o/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?o/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),h}},{key:"getGoalValues",value:function(o,c,h,_,b){var x=this,M=this.w,I=[],F=function(q,ne){var de;I.push((De(de={},o,"x"===o?x.getXForValue(q,c,!1):x.getYForValue(q,h,!1)),De(de,"attrs",ne),de))};if(M.globals.seriesGoals[_]&&M.globals.seriesGoals[_][b]&&Array.isArray(M.globals.seriesGoals[_][b])&&M.globals.seriesGoals[_][b].forEach(function(q){F(q.value,q)}),this.barCtx.barOptions.isDumbbell&&M.globals.seriesRange.length){var U=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:M.globals.colors,$={strokeHeight:"x"===o?0:M.globals.markers.size[_],strokeWidth:"x"===o?M.globals.markers.size[_]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(U[_])?U[_][0]:U[_]};F(M.globals.seriesRangeStart[_][b],$),F(M.globals.seriesRangeEnd[_][b],Fe(Fe({},$),{},{strokeColor:Array.isArray(U[_])?U[_][1]:U[_]}))}return I}},{key:"drawGoalLine",value:function(o){var c=o.barXPosition,h=o.barYPosition,_=o.goalX,b=o.goalY,x=o.barWidth,M=o.barHeight,I=new at(this.barCtx.ctx),F=I.group({className:"apexcharts-bar-goals-groups"});F.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:F.node}),F.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var U=null;return this.barCtx.isHorizontal?Array.isArray(_)&&_.forEach(function($){var q=void 0!==$.attrs.strokeHeight?$.attrs.strokeHeight:M/2,ne=h+q+M/2;U=I.drawLine($.x,ne-2*q,$.x,ne,$.attrs.strokeColor?$.attrs.strokeColor:void 0,$.attrs.strokeDashArray,$.attrs.strokeWidth?$.attrs.strokeWidth:2,$.attrs.strokeLineCap),F.add(U)}):Array.isArray(b)&&b.forEach(function($){var q=void 0!==$.attrs.strokeWidth?$.attrs.strokeWidth:x/2,ne=c+q+x/2;U=I.drawLine(ne-2*q,$.y,ne,$.y,$.attrs.strokeColor?$.attrs.strokeColor:void 0,$.attrs.strokeDashArray,$.attrs.strokeHeight?$.attrs.strokeHeight:2,$.attrs.strokeLineCap),F.add(U)}),F}},{key:"drawBarShadow",value:function(o){var c=o.prevPaths,h=o.currPaths,_=o.color,b=this.w,x=c.x,M=c.x1,F=h.x,U=h.x1,$=h.barYPosition,q=c.barYPosition+h.barHeight,ne=new at(this.barCtx.ctx),de=new We,ge=ne.move(M,q)+ne.line(x,q)+ne.line(F,$)+ne.line(U,$)+ne.line(M,q)+("around"===b.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return ne.drawPath({d:ge,fill:de.shadeColor(.5,We.rgb2hex(_)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(o){var c=o.i,h=o.j,b=0,x=0;return this.w.globals.seriesPercent.forEach(function(M,I){M[h]&&b++,I<c&&0===M[h]&&x++}),{nonZeroColumns:b,zeroEncounters:x}}}]),le}(),zt=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w;var h=this.w;this.barOptions=h.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=h.config.stroke.width,this.isNullValue=!1,this.isRangeBar=h.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!h.globals.isBarHorizontal&&h.globals.seriesRange.length&&h.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=c,null!==this.xyRatios&&(this.xRatio=c.xRatio,this.yRatio=c.yRatio,this.invertedXRatio=c.invertedXRatio,this.invertedYRatio=c.invertedYRatio,this.baseLineY=c.baseLineY,this.baseLineInvertedY=c.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var _=new An(this.ctx);this.lastActiveBarSerieIndex=_.getActiveConfigSeriesIndex("desc",["bar","column"]);var b=_.getBarSeriesIndices(),x=new si(this.ctx);this.stackedSeriesTotals=x.getStackedSeriesTotals(this.w.config.series.map(function(M,I){return-1===b.indexOf(I)?I:-1}).filter(function(M){return-1!==M})),this.barHelpers=new lt(this)}return Me(le,[{key:"draw",value:function(o,c){var h=this.w,_=new at(this.ctx),b=new si(this.ctx,h);o=b.getLogSeries(o),this.series=o,this.yRatio=b.getLogYRatios(this.yRatio),this.barHelpers.initVariables(o);var x=_.group({class:"apexcharts-bar-series apexcharts-plot-series"});h.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var M=0,I=0;M<o.length;M++,I++){var F,U,$,q,ne=void 0,de=void 0,ge=[],we=[],me=h.globals.comboCharts?c[M]:M,Se=_.group({class:"apexcharts-series",rel:M+1,seriesName:We.escapeString(h.globals.seriesNames[me]),"data:realIndex":me});this.ctx.series.addCollapsedClassToSeries(Se,me),o[M].length>0&&(this.visibleI=this.visibleI+1);var N=0,Q=0;this.yRatio.length>1&&(this.yaxisIndex=me),this.isReversed=h.config.yaxis[this.yaxisIndex]&&h.config.yaxis[this.yaxisIndex].reversed;var pe=this.barHelpers.initialPositions();de=pe.y,N=pe.barHeight,U=pe.yDivision,q=pe.zeroW,ne=pe.x,Q=pe.barWidth,F=pe.xDivision,$=pe.zeroH,this.horizontal||we.push(ne+Q/2);var xe=_.group({class:"apexcharts-datalabels","data:realIndex":me});h.globals.delayedElements.push({el:xe.node}),xe.node.classList.add("apexcharts-element-hidden");var Le=_.group({class:"apexcharts-bar-goals-markers"}),Ze=_.group({class:"apexcharts-bar-shadows"});h.globals.delayedElements.push({el:Ze.node}),Ze.node.classList.add("apexcharts-element-hidden");for(var kt=0;kt<o[M].length;kt++){var It=this.barHelpers.getStrokeWidth(M,kt,me),ii=null,wi={indexes:{i:M,j:kt,realIndex:me,bc:I},x:ne,y:de,strokeWidth:It,elSeries:Se};this.isHorizontal?(ii=this.drawBarPaths(Fe(Fe({},wi),{},{barHeight:N,zeroW:q,yDivision:U})),Q=this.series[M][kt]/this.invertedYRatio):(ii=this.drawColumnPaths(Fe(Fe({},wi),{},{xDivision:F,barWidth:Q,zeroH:$})),N=this.series[M][kt]/this.yRatio[this.yaxisIndex]);var Mi=this.barHelpers.getPathFillColor(o,M,kt,me);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&kt>0){var dn=this.barHelpers.drawBarShadow({color:"string"==typeof Mi&&-1===Mi?.indexOf("url")?Mi:We.hexToRgba(h.globals.colors[M]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:ii});dn&&Ze.add(dn)}this.pathArr.push(ii);var En=this.barHelpers.drawGoalLine({barXPosition:ii.barXPosition,barYPosition:ii.barYPosition,goalX:ii.goalX,goalY:ii.goalY,barHeight:N,barWidth:Q});En&&Le.add(En),de=ii.y,ne=ii.x,kt>0&&we.push(ne+Q/2),ge.push(de),this.renderSeries({realIndex:me,pathFill:Mi,j:kt,i:M,pathFrom:ii.pathFrom,pathTo:ii.pathTo,strokeWidth:It,elSeries:Se,x:ne,y:de,series:o,barHeight:ii.barHeight?ii.barHeight:N,barWidth:ii.barWidth?ii.barWidth:Q,elDataLabelsWrap:xe,elGoalsMarkers:Le,elBarShadows:Ze,visibleSeries:this.visibleI,type:"bar"})}h.globals.seriesXvalues[me]=we,h.globals.seriesYvalues[me]=ge,x.add(Se)}return x}},{key:"renderSeries",value:function(o){var c=o.realIndex,h=o.pathFill,_=o.lineFill,b=o.j,x=o.i,M=o.groupIndex,I=o.pathFrom,F=o.pathTo,U=o.strokeWidth,$=o.elSeries,q=o.x,ne=o.y,de=o.y1,ge=o.y2,we=o.series,me=o.barHeight,Se=o.barWidth,N=o.barXPosition,Q=o.barYPosition,pe=o.elDataLabelsWrap,xe=o.elGoalsMarkers,Le=o.elBarShadows,Ze=o.visibleSeries,kt=o.type,It=this.w,ii=new at(this.ctx);_||(_=this.barOptions.distributed?It.globals.stroke.colors[b]:It.globals.stroke.colors[c]),It.config.series[x].data[b]&&It.config.series[x].data[b].strokeColor&&(_=It.config.series[x].data[b].strokeColor),this.isNullValue&&(h="none");var Mi=ii.renderPaths({i:x,j:b,realIndex:c,pathFrom:I,pathTo:F,stroke:_,strokeWidth:U,strokeLineCap:It.config.stroke.lineCap,fill:h,animationDelay:b/It.config.chart.animations.animateGradually.delay*(It.config.chart.animations.speed/It.globals.dataPoints)/2.4,initialSpeed:It.config.chart.animations.speed,dataChangeSpeed:It.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(kt,"-area")});Mi.attr("clip-path","url(#gridRectMask".concat(It.globals.cuid,")"));var dn=It.config.forecastDataPoints;dn.count>0&&b>=It.globals.dataPoints-dn.count&&(Mi.node.setAttribute("stroke-dasharray",dn.dashArray),Mi.node.setAttribute("stroke-width",dn.strokeWidth),Mi.node.setAttribute("fill-opacity",dn.fillOpacity)),void 0!==de&&void 0!==ge&&(Mi.attr("data-range-y1",de),Mi.attr("data-range-y2",ge)),new li(this.ctx).setSelectionFilter(Mi,c,b),$.add(Mi);var En=new ut(this).handleBarDataLabels({x:q,y:ne,y1:de,y2:ge,i:x,j:b,series:we,realIndex:c,groupIndex:M,barHeight:me,barWidth:Se,barXPosition:N,barYPosition:Q,renderedPath:Mi,visibleSeries:Ze});return null!==En.dataLabels&&pe.add(En.dataLabels),En.totalDataLabels&&pe.add(En.totalDataLabels),$.add(pe),xe&&$.add(xe),Le&&$.add(Le),$}},{key:"drawBarPaths",value:function(o){var c,M,h=o.indexes,_=o.barHeight,b=o.strokeWidth,x=o.zeroW,I=o.y,F=o.yDivision,U=o.elSeries,$=this.w,q=h.i,ne=h.j;if($.globals.isXNumeric)c=(I=($.globals.seriesX[q][ne]-$.globals.minX)/this.invertedXRatio-_)+_*this.visibleI;else if($.config.plotOptions.bar.hideZeroBarsWhenGrouped){var de=0,ge=0;$.globals.seriesPercent.forEach(function(me,Se){me[ne]&&de++,Se<q&&0===me[ne]&&ge++}),de>0&&(_=this.seriesLen*_/de),c=I+_*this.visibleI,c-=_*ge}else c=I+_*this.visibleI;this.isFunnel&&(x-=(this.barHelpers.getXForValue(this.series[q][ne],x)-x)/2),M=this.barHelpers.getXForValue(this.series[q][ne],x);var we=this.barHelpers.getBarpaths({barYPosition:c,barHeight:_,x1:x,x2:M,strokeWidth:b,series:this.series,realIndex:h.realIndex,i:q,j:ne,w:$});return $.globals.isXNumeric||(I+=F),this.barHelpers.barBackground({j:ne,i:q,y1:c-_*this.visibleI,y2:_*this.seriesLen,elSeries:U}),{pathTo:we.pathTo,pathFrom:we.pathFrom,x1:x,x:M,y:I,goalX:this.barHelpers.getGoalValues("x",x,null,q,ne),barYPosition:c,barHeight:_}}},{key:"drawColumnPaths",value:function(o){var c,b,h=o.indexes,_=o.x,x=o.xDivision,M=o.barWidth,I=o.zeroH,F=o.strokeWidth,U=o.elSeries,$=this.w,ne=h.i,de=h.j,ge=h.bc;if($.globals.isXNumeric){var we=this.getBarXForNumericXAxis({x:_,j:de,realIndex:h.realIndex,barWidth:M});_=we.x,c=we.barXPosition}else if($.config.plotOptions.bar.hideZeroBarsWhenGrouped){var me=this.barHelpers.getZeroValueEncounters({i:ne,j:de}),Se=me.nonZeroColumns;Se>0&&(M=this.seriesLen*M/Se),c=_+M*this.visibleI,c-=M*me.zeroEncounters}else c=_+M*this.visibleI;b=this.barHelpers.getYForValue(this.series[ne][de],I);var Q=this.barHelpers.getColumnPaths({barXPosition:c,barWidth:M,y1:I,y2:b,strokeWidth:F,series:this.series,realIndex:h.realIndex,i:ne,j:de,w:$});return $.globals.isXNumeric||(_+=x),this.barHelpers.barBackground({bc:ge,j:de,i:ne,x1:c-F/2-M*this.visibleI,x2:M*this.seriesLen+F/2,elSeries:U}),{pathTo:Q.pathTo,pathFrom:Q.pathFrom,x:_,y:b,goalY:this.barHelpers.getGoalValues("y",null,I,ne,de),barXPosition:c,barWidth:M}}},{key:"getBarXForNumericXAxis",value:function(o){var c=o.x,h=o.barWidth,_=o.realIndex,b=o.j,x=this.w,M=_;return x.globals.seriesX[_].length||(M=x.globals.maxValsInArrayIndex),x.globals.seriesX[M][b]&&(c=(x.globals.seriesX[M][b]-x.globals.minX)/this.xRatio-h*this.seriesLen/2),{barXPosition:c+h*this.visibleI,x:c}}},{key:"getPreviousPath",value:function(o,c){for(var h,_=this.w,b=0;b<_.globals.previousPaths.length;b++){var x=_.globals.previousPaths[b];x.paths&&x.paths.length>0&&parseInt(x.realIndex,10)===parseInt(o,10)&&void 0!==_.globals.previousPaths[b].paths[c]&&(h=_.globals.previousPaths[b].paths[c].d)}return h}}]),le}(),Kt=function(le){Be(c,zt);var o=mt(c);function c(){return V(this,c),o.apply(this,arguments)}return Me(c,[{key:"draw",value:function(h,_){var b=this,x=this.w;this.graphics=new at(this.ctx),this.bar=new zt(this.ctx,this.xyRatios);var M=new si(this.ctx,x);h=M.getLogSeries(h),this.yRatio=M.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h),"100%"===x.config.chart.stackType&&(h=x.globals.seriesPercent.slice()),this.series=h,this.barHelpers.initializeStackedPrevVars(this);for(var I=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),F=0,U=0,$=function(de,ge){var we=void 0,me=void 0,Se=void 0,N=void 0,Q=-1;b.groupCtx=b,x.globals.seriesGroups.forEach(function(Lr,Hr){Lr.indexOf(x.config.series[de].name)>-1&&(Q=Hr)}),-1!==Q&&(b.groupCtx=b[x.globals.seriesGroups[Q]]);var pe=[],xe=[],Le=x.globals.comboCharts?_[de]:de;b.yRatio.length>1&&(b.yaxisIndex=Le),b.isReversed=x.config.yaxis[b.yaxisIndex]&&x.config.yaxis[b.yaxisIndex].reversed;var Ze=b.graphics.group({class:"apexcharts-series",seriesName:We.escapeString(x.globals.seriesNames[Le]),rel:de+1,"data:realIndex":Le});b.ctx.series.addCollapsedClassToSeries(Ze,Le);var kt=b.graphics.group({class:"apexcharts-datalabels","data:realIndex":Le}),It=b.graphics.group({class:"apexcharts-bar-goals-markers"}),ii=0,wi=0,Mi=b.initialPositions(F,U,we,me,Se,N);U=Mi.y,me=Mi.yDivision,N=Mi.zeroW,F=Mi.x,wi=Mi.barWidth,we=Mi.xDivision,Se=Mi.zeroH,x.globals.barHeight=ii=Mi.barHeight,x.globals.barWidth=wi,b.barHelpers.initializeStackedXYVars(b),1===b.groupCtx.prevY.length&&b.groupCtx.prevY[0].every(function(Lr){return isNaN(Lr)})&&(b.groupCtx.prevY[0]=b.groupCtx.prevY[0].map(function(Lr){return Se}),b.groupCtx.prevYF[0]=b.groupCtx.prevYF[0].map(function(Lr){return 0}));for(var dn=0;dn<x.globals.dataPoints;dn++){var En=b.barHelpers.getStrokeWidth(de,dn,Le),Fn={indexes:{i:de,j:dn,realIndex:Le,bc:ge},strokeWidth:En,x:F,y:U,elSeries:Ze,groupIndex:Q,seriesGroup:x.globals.seriesGroups[Q]},Jn=null;b.isHorizontal?(Jn=b.drawStackedBarPaths(Fe(Fe({},Fn),{},{zeroW:N,barHeight:ii,yDivision:me})),wi=b.series[de][dn]/b.invertedYRatio):(Jn=b.drawStackedColumnPaths(Fe(Fe({},Fn),{},{xDivision:we,barWidth:wi,zeroH:Se})),ii=b.series[de][dn]/b.yRatio[b.yaxisIndex]);var ar=b.barHelpers.drawGoalLine({barXPosition:Jn.barXPosition,barYPosition:Jn.barYPosition,goalX:Jn.goalX,goalY:Jn.goalY,barHeight:ii,barWidth:wi});ar&&It.add(ar),U=Jn.y,pe.push(F=Jn.x),xe.push(U);var lr=b.barHelpers.getPathFillColor(h,de,dn,Le);Ze=b.renderSeries({realIndex:Le,pathFill:lr,j:dn,i:de,groupIndex:Q,pathFrom:Jn.pathFrom,pathTo:Jn.pathTo,strokeWidth:En,elSeries:Ze,x:F,y:U,series:h,barHeight:ii,barWidth:wi,elDataLabelsWrap:kt,elGoalsMarkers:It,type:"bar",visibleSeries:0})}x.globals.seriesXvalues[Le]=pe,x.globals.seriesYvalues[Le]=xe,b.groupCtx.prevY.push(b.groupCtx.yArrj),b.groupCtx.prevYF.push(b.groupCtx.yArrjF),b.groupCtx.prevYVal.push(b.groupCtx.yArrjVal),b.groupCtx.prevX.push(b.groupCtx.xArrj),b.groupCtx.prevXF.push(b.groupCtx.xArrjF),b.groupCtx.prevXVal.push(b.groupCtx.xArrjVal),I.add(Ze)},q=0,ne=0;q<h.length;q++,ne++)$(q,ne);return I}},{key:"initialPositions",value:function(h,_,b,x,M,I){var F,U,$,q,ne=this.w;return this.isHorizontal?($=($=x=ne.globals.gridHeight/ne.globals.dataPoints)*parseInt(ne.config.plotOptions.bar.barHeight,10)/100,-1===String(ne.config.plotOptions.bar.barHeight).indexOf("%")&&($=parseInt(ne.config.plotOptions.bar.barHeight,10)),I=this.baseLineInvertedY+ne.globals.padHorizontal+(this.isReversed?ne.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),_=(x-$)/2):(q=b=ne.globals.gridWidth/ne.globals.dataPoints,q=ne.globals.isXNumeric&&ne.globals.dataPoints>1?(b=ne.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:q*parseInt(ne.config.plotOptions.bar.columnWidth,10)/100,-1===String(ne.config.plotOptions.bar.columnWidth).indexOf("%")&&(q=parseInt(ne.config.plotOptions.bar.columnWidth,10)),M=ne.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?ne.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),h=ne.globals.padHorizontal+(b-q)/2),{x:h,y:_,yDivision:x,xDivision:b,barHeight:null!==(F=ne.globals.seriesGroups)&&void 0!==F&&F.length?$/ne.globals.seriesGroups.length:$,barWidth:null!==(U=ne.globals.seriesGroups)&&void 0!==U&&U.length?q/ne.globals.seriesGroups.length:q,zeroH:M,zeroW:I}}},{key:"drawStackedBarPaths",value:function(h){for(var _,F,b=h.indexes,x=h.barHeight,M=h.strokeWidth,I=h.zeroW,U=h.y,$=h.groupIndex,q=h.seriesGroup,ne=h.yDivision,de=h.elSeries,ge=this.w,we=U+(-1!==$?$*x:0),me=b.i,Se=b.j,N=0,Q=0;Q<this.groupCtx.prevXF.length;Q++)N+=this.groupCtx.prevXF[Q][Se];var pe=me;if(q&&(pe=q.indexOf(ge.config.series[me].name)),pe>0){var xe=I;this.groupCtx.prevXVal[pe-1][Se]<0?xe=this.series[me][Se]>=0?this.groupCtx.prevX[pe-1][Se]+N-2*(this.isReversed?N:0):this.groupCtx.prevX[pe-1][Se]:this.groupCtx.prevXVal[pe-1][Se]>=0&&(xe=this.series[me][Se]>=0?this.groupCtx.prevX[pe-1][Se]:this.groupCtx.prevX[pe-1][Se]-N+2*(this.isReversed?N:0)),_=xe}else _=I;var Le=this.barHelpers.getBarpaths({barYPosition:we,barHeight:x,x1:_,x2:F=null===this.series[me][Se]?_:_+this.series[me][Se]/this.invertedYRatio-2*(this.isReversed?this.series[me][Se]/this.invertedYRatio:0),strokeWidth:M,series:this.series,realIndex:b.realIndex,seriesGroup:q,i:me,j:Se,w:ge});return this.barHelpers.barBackground({j:Se,i:me,y1:we,y2:x,elSeries:de}),U+=ne,{pathTo:Le.pathTo,pathFrom:Le.pathFrom,goalX:this.barHelpers.getGoalValues("x",I,null,me,Se),barYPosition:we,x:F,y:U}}},{key:"drawStackedColumnPaths",value:function(h){var x,_=h.indexes,b=h.x,M=h.xDivision,I=h.barWidth,F=h.zeroH,U=h.groupIndex,$=h.seriesGroup,q=h.elSeries,ne=this.w,de=_.i,ge=_.j,we=_.bc;if(ne.globals.isXNumeric){var me=ne.globals.seriesX[de][ge];me||(me=0),b=(me-ne.globals.minX)/this.xRatio-I/2,ne.globals.seriesGroups.length&&(b=(me-ne.globals.minX)/this.xRatio-I/2*ne.globals.seriesGroups.length)}for(var Se,N=b+(-1!==U?U*I:0),Q=0,pe=0;pe<this.groupCtx.prevYF.length;pe++)Q+=isNaN(this.groupCtx.prevYF[pe][ge])?0:this.groupCtx.prevYF[pe][ge];var xe=de;if($&&(xe=$.indexOf(ne.config.series[de].name)),xe>0&&!ne.globals.isXNumeric||xe>0&&ne.globals.isXNumeric&&ne.globals.seriesX[de-1][ge]===ne.globals.seriesX[de][ge]){var Le,Ze,kt,It=Math.min(this.yRatio.length+1,de+1);if(void 0!==this.groupCtx.prevY[xe-1]&&this.groupCtx.prevY[xe-1].length)for(var ii=1;ii<It;ii++){var wi;if(!isNaN(null===(wi=this.groupCtx.prevY[xe-ii])||void 0===wi?void 0:wi[ge])){kt=this.groupCtx.prevY[xe-ii][ge];break}}for(var Mi=1;Mi<It;Mi++){var dn,En;if((null===(dn=this.groupCtx.prevYVal[xe-Mi])||void 0===dn?void 0:dn[ge])<0){Ze=this.series[de][ge]>=0?kt-Q+2*(this.isReversed?Q:0):kt;break}if((null===(En=this.groupCtx.prevYVal[xe-Mi])||void 0===En?void 0:En[ge])>=0){Ze=this.series[de][ge]>=0?kt:kt+Q-2*(this.isReversed?Q:0);break}}void 0===Ze&&(Ze=ne.globals.gridHeight),Se=null!==(Le=this.groupCtx.prevYF[0])&&void 0!==Le&&Le.every(function(Jn){return 0===Jn})&&this.groupCtx.prevYF.slice(1,xe).every(function(Jn){return Jn.every(function(ar){return isNaN(ar)})})?F:Ze}else Se=F;var Fn=this.barHelpers.getColumnPaths({barXPosition:N,barWidth:I,y1:Se,y2:x=this.series[de][ge]?Se-this.series[de][ge]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[de][ge]/this.yRatio[this.yaxisIndex]:0):Se,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:$,realIndex:_.realIndex,i:de,j:ge,w:ne});return this.barHelpers.barBackground({bc:we,j:ge,i:de,x1:N,x2:I,elSeries:q}),b+=M,{pathTo:Fn.pathTo,pathFrom:Fn.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,F,de,ge),barXPosition:N,x:ne.globals.isXNumeric?b-M:b,y:x}}}]),c}(),Jt=function(le){Be(c,zt);var o=mt(c);function c(){return V(this,c),o.apply(this,arguments)}return Me(c,[{key:"draw",value:function(h,_,b){var x=this,M=this.w,I=new at(this.ctx),F=M.globals.comboCharts?_:M.config.chart.type,U=new Bi(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=M.config.plotOptions.bar.horizontal;var $=new si(this.ctx,M);h=$.getLogSeries(h),this.series=h,this.yRatio=$.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h);for(var q=I.group({class:"apexcharts-".concat(F,"-series apexcharts-plot-series")}),ne=function(ge){x.isBoxPlot="boxPlot"===M.config.chart.type||"boxPlot"===M.config.series[ge].type;var we,me,Se,N,It,ii,Q=void 0,pe=void 0,xe=[],Le=[],Ze=M.globals.comboCharts?b[ge]:ge,kt=I.group({class:"apexcharts-series",seriesName:We.escapeString(M.globals.seriesNames[Ze]),rel:ge+1,"data:realIndex":Ze});x.ctx.series.addCollapsedClassToSeries(kt,Ze),h[ge].length>0&&(x.visibleI=x.visibleI+1),x.yRatio.length>1&&(x.yaxisIndex=Ze);var wi=x.barHelpers.initialPositions();pe=wi.y,It=wi.barHeight,me=wi.yDivision,N=wi.zeroW,we=wi.xDivision,Se=wi.zeroH,Le.push((Q=wi.x)+(ii=wi.barWidth)/2);for(var Mi=I.group({class:"apexcharts-datalabels","data:realIndex":Ze}),dn=function(Fn){var Jn=x.barHelpers.getStrokeWidth(ge,Fn,Ze),ar=null,lr={indexes:{i:ge,j:Fn,realIndex:Ze},x:Q,y:pe,strokeWidth:Jn,elSeries:kt};ar=x.isHorizontal?x.drawHorizontalBoxPaths(Fe(Fe({},lr),{},{yDivision:me,barHeight:It,zeroW:N})):x.drawVerticalBoxPaths(Fe(Fe({},lr),{},{xDivision:we,barWidth:ii,zeroH:Se})),pe=ar.y,Q=ar.x,Fn>0&&Le.push(Q+ii/2),xe.push(pe),ar.pathTo.forEach(function(Lr,Hr){var Wr=!x.isBoxPlot&&x.candlestickOptions.wick.useFillColor?ar.color[Hr]:M.globals.stroke.colors[ge],Mr=U.fillPath({seriesNumber:Ze,dataPointIndex:Fn,color:ar.color[Hr],value:h[ge][Fn]});x.renderSeries({realIndex:Ze,pathFill:Mr,lineFill:Wr,j:Fn,i:ge,pathFrom:ar.pathFrom,pathTo:Lr,strokeWidth:Jn,elSeries:kt,x:Q,y:pe,series:h,barHeight:It,barWidth:ii,elDataLabelsWrap:Mi,visibleSeries:x.visibleI,type:M.config.chart.type})})},En=0;En<M.globals.dataPoints;En++)dn(En);M.globals.seriesXvalues[Ze]=Le,M.globals.seriesYvalues[Ze]=xe,q.add(kt)},de=0;de<h.length;de++)ne(de);return q}},{key:"drawVerticalBoxPaths",value:function(h){var _=h.indexes,b=h.x,x=h.xDivision,M=h.barWidth,I=h.zeroH,F=h.strokeWidth,U=this.w,$=new at(this.ctx),q=_.i,ne=_.j,de=!0,ge=U.config.plotOptions.candlestick.colors.upward,we=U.config.plotOptions.candlestick.colors.downward,me="";this.isBoxPlot&&(me=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var Se=this.yRatio[this.yaxisIndex],N=_.realIndex,Q=this.getOHLCValue(N,ne),pe=I,xe=I;Q.o>Q.c&&(de=!1);var Le=Math.min(Q.o,Q.c),Ze=Math.max(Q.o,Q.c),kt=Q.m;U.globals.isXNumeric&&(b=(U.globals.seriesX[N][ne]-U.globals.minX)/this.xRatio-M/2);var It=b+M*this.visibleI;null==this.series[q][ne]?(Le=I,Ze=I):(Le=I-Le/Se,Ze=I-Ze/Se,pe=I-Q.h/Se,xe=I-Q.l/Se,kt=I-Q.m/Se);var ii=$.move(It,I),wi=$.move(It+M/2,Le);return U.globals.previousPaths.length>0&&(wi=this.getPreviousPath(N,ne,!0)),ii=this.isBoxPlot?[$.move(It,Le)+$.line(It+M/2,Le)+$.line(It+M/2,pe)+$.line(It+M/4,pe)+$.line(It+M-M/4,pe)+$.line(It+M/2,pe)+$.line(It+M/2,Le)+$.line(It+M,Le)+$.line(It+M,kt)+$.line(It,kt)+$.line(It,Le+F/2),$.move(It,kt)+$.line(It+M,kt)+$.line(It+M,Ze)+$.line(It+M/2,Ze)+$.line(It+M/2,xe)+$.line(It+M-M/4,xe)+$.line(It+M/4,xe)+$.line(It+M/2,xe)+$.line(It+M/2,Ze)+$.line(It,Ze)+$.line(It,kt)+"z"]:[$.move(It,Ze)+$.line(It+M/2,Ze)+$.line(It+M/2,pe)+$.line(It+M/2,Ze)+$.line(It+M,Ze)+$.line(It+M,Le)+$.line(It+M/2,Le)+$.line(It+M/2,xe)+$.line(It+M/2,Le)+$.line(It,Le)+$.line(It,Ze-F/2)],wi+=$.move(It,Le),U.globals.isXNumeric||(b+=x),{pathTo:ii,pathFrom:wi,x:b,y:Ze,barXPosition:It,color:this.isBoxPlot?me:de?[ge]:[we]}}},{key:"drawHorizontalBoxPaths",value:function(h){var _=h.indexes,b=h.y,x=h.yDivision,M=h.barHeight,I=h.zeroW,F=h.strokeWidth,U=this.w,$=new at(this.ctx),q=_.i,ne=_.j,de=this.boxOptions.colors.lower;this.isBoxPlot&&(de=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var ge=this.invertedYRatio,we=_.realIndex,me=this.getOHLCValue(we,ne),Se=I,N=I,Q=Math.min(me.o,me.c),pe=Math.max(me.o,me.c),xe=me.m;U.globals.isXNumeric&&(b=(U.globals.seriesX[we][ne]-U.globals.minX)/this.invertedXRatio-M/2);var Le=b+M*this.visibleI;null==this.series[q][ne]?(Q=I,pe=I):(Q=I+Q/ge,pe=I+pe/ge,Se=I+me.h/ge,N=I+me.l/ge,xe=I+me.m/ge);var Ze=$.move(I,Le),kt=$.move(Q,Le+M/2);return U.globals.previousPaths.length>0&&(kt=this.getPreviousPath(we,ne,!0)),Ze=[$.move(Q,Le)+$.line(Q,Le+M/2)+$.line(Se,Le+M/2)+$.line(Se,Le+M/2-M/4)+$.line(Se,Le+M/2+M/4)+$.line(Se,Le+M/2)+$.line(Q,Le+M/2)+$.line(Q,Le+M)+$.line(xe,Le+M)+$.line(xe,Le)+$.line(Q+F/2,Le),$.move(xe,Le)+$.line(xe,Le+M)+$.line(pe,Le+M)+$.line(pe,Le+M/2)+$.line(N,Le+M/2)+$.line(N,Le+M-M/4)+$.line(N,Le+M/4)+$.line(N,Le+M/2)+$.line(pe,Le+M/2)+$.line(pe,Le)+$.line(xe,Le)+"z"],kt+=$.move(Q,Le),U.globals.isXNumeric||(b+=x),{pathTo:Ze,pathFrom:kt,x:pe,y:b,barYPosition:Le,color:de}}},{key:"getOHLCValue",value:function(h,_){var b=this.w;return{o:this.isBoxPlot?b.globals.seriesCandleH[h][_]:b.globals.seriesCandleO[h][_],h:this.isBoxPlot?b.globals.seriesCandleO[h][_]:b.globals.seriesCandleH[h][_],m:b.globals.seriesCandleM[h][_],l:this.isBoxPlot?b.globals.seriesCandleC[h][_]:b.globals.seriesCandleL[h][_],c:this.isBoxPlot?b.globals.seriesCandleL[h][_]:b.globals.seriesCandleC[h][_]}}}]),c}(),pt=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"checkColorRange",value:function(){var o=this.w,c=!1,h=o.config.plotOptions[o.config.chart.type];return h.colorScale.ranges.length>0&&h.colorScale.ranges.map(function(_,b){_.from<=0&&(c=!0)}),c}},{key:"getShadeColor",value:function(o,c,h,_){var b=this.w,x=1,M=b.config.plotOptions[o].shadeIntensity,I=this.determineColor(o,c,h);b.globals.hasNegs||_?x=b.config.plotOptions[o].reverseNegativeShade?I.percent<0?I.percent/100*(1.25*M):1.25*M*(1-I.percent/100):I.percent<=0?1-(1+I.percent/100)*M:(1-I.percent/100)*M:(x=1-I.percent/100,"treemap"===o&&(x=1.25*M*(1-I.percent/100)));var F=I.color,U=new We;return b.config.plotOptions[o].enableShades&&(F=We.hexToRgba(U.shadeColor("dark"===this.w.config.theme.mode?-1*x:x,I.color),b.config.fill.opacity)),{color:F,colorProps:I}}},{key:"determineColor",value:function(o,c,h){var _=this.w,b=_.globals.series[c][h],x=_.config.plotOptions[o],M=x.colorScale.inverse?h:c;x.distributed&&"treemap"===_.config.chart.type&&(M=h);var I=_.globals.colors[M],F=null,U=Math.min.apply(Math,ot(_.globals.series[c])),$=Math.max.apply(Math,ot(_.globals.series[c]));x.distributed||"heatmap"!==o||(U=_.globals.minY,$=_.globals.maxY),void 0!==x.colorScale.min&&(U=x.colorScale.min<_.globals.minY?x.colorScale.min:_.globals.minY,$=x.colorScale.max>_.globals.maxY?x.colorScale.max:_.globals.maxY);var q=Math.abs($)+Math.abs(U),ne=100*b/(0===q?q-1e-6:q);return x.colorScale.ranges.length>0&&x.colorScale.ranges.map(function(de,ge){if(b>=de.from&&b<=de.to){I=de.color,F=de.foreColor?de.foreColor:null,U=de.from,$=de.to;var we=Math.abs($)+Math.abs(U);ne=100*b/(0===we?we-1e-6:we)}}),{color:I,foreColor:F,percent:ne}}},{key:"calculateDataLabels",value:function(o){var c=o.text,h=o.x,_=o.y,b=o.i,x=o.j,M=o.colorProps,I=o.fontSize,F=this.w.config.dataLabels,U=new at(this.ctx),$=new Nn(this.ctx),q=null;if(F.enabled){q=U.group({class:"apexcharts-data-labels"});var de=F.offsetY,ge=h+F.offsetX,we=_+parseFloat(F.style.fontSize)/3+de;$.plotDataLabelsText({x:ge,y:we,text:c,i:b,j:x,color:M.foreColor,parent:q,fontSize:I,dataLabelsConfig:F})}return q}},{key:"addListeners",value:function(o){var c=new at(this.ctx);o.node.addEventListener("mouseenter",c.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",c.pathMouseLeave.bind(this,o)),o.node.addEventListener("mousedown",c.pathMouseDown.bind(this,o))}}]),le}(),ui=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w,this.xRatio=c.xRatio,this.yRatio=c.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new pt(o),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Me(le,[{key:"draw",value:function(o){var c=this.w,h=new at(this.ctx),_=h.group({class:"apexcharts-heatmap"});_.attr("clip-path","url(#gridRectMask".concat(c.globals.cuid,")"));var b=c.globals.gridWidth/c.globals.dataPoints,x=c.globals.gridHeight/c.globals.series.length,M=0,I=!1;this.negRange=this.helpers.checkColorRange();var F=o.slice();c.config.yaxis[0].reversed&&(I=!0,F.reverse());for(var U=I?0:F.length-1;I?U<F.length:U>=0;I?U++:U--){var $=h.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:We.escapeString(c.globals.seriesNames[U]),rel:U+1,"data:realIndex":U});if(this.ctx.series.addCollapsedClassToSeries($,U),c.config.chart.dropShadow.enabled){var q=c.config.chart.dropShadow;new li(this.ctx).dropShadow($,q,U)}for(var ne=0,de=c.config.plotOptions.heatmap.shadeIntensity,ge=0;ge<F[U].length;ge++){var we=this.helpers.getShadeColor(c.config.chart.type,U,ge,this.negRange),me=we.color,Se=we.colorProps;"image"===c.config.fill.type&&(me=new Bi(this.ctx).fillPath({seriesNumber:U,dataPointIndex:ge,opacity:c.globals.hasNegs?Se.percent<0?1-(1+Se.percent/100):de+Se.percent/100:Se.percent/100,patternID:We.randomId(),width:c.config.fill.image.width?c.config.fill.image.width:b,height:c.config.fill.image.height?c.config.fill.image.height:x}));var Q=h.drawRect(ne,M,b,x,this.rectRadius);if(Q.attr({cx:ne,cy:M}),Q.node.classList.add("apexcharts-heatmap-rect"),$.add(Q),Q.attr({fill:me,i:U,index:U,j:ge,val:o[U][ge],"stroke-width":this.strokeWidth,stroke:c.config.plotOptions.heatmap.useFillColorAsStroke?me:c.globals.stroke.colors[0],color:me}),this.helpers.addListeners(Q),c.config.chart.animations.enabled&&!c.globals.dataChanged){var pe=1;c.globals.resized||(pe=c.config.chart.animations.speed),this.animateHeatMap(Q,ne,M,b,x,pe)}if(c.globals.dataChanged){var xe=1;if(this.dynamicAnim.enabled&&c.globals.shouldAnimate){xe=this.dynamicAnim.speed;var Le=c.globals.previousPaths[U]&&c.globals.previousPaths[U][ge]&&c.globals.previousPaths[U][ge].color;Le||(Le="rgba(255, 255, 255, 0)"),this.animateHeatColor(Q,We.isColorHex(Le)?Le:We.rgb2hex(Le),We.isColorHex(me)?me:We.rgb2hex(me),xe)}}var Ze=(0,c.config.dataLabels.formatter)(c.globals.series[U][ge],{value:c.globals.series[U][ge],seriesIndex:U,dataPointIndex:ge,w:c}),kt=this.helpers.calculateDataLabels({text:Ze,x:ne+b/2,y:M+x/2,i:U,j:ge,colorProps:Se,series:F});null!==kt&&$.add(kt),ne+=b}M+=x,_.add($)}var It=c.globals.yAxisScale[0].result.slice();return c.config.yaxis[0].reversed?It.unshift(""):It.push(""),c.globals.yAxisScale[0].result=It,_}},{key:"animateHeatMap",value:function(o,c,h,_,b,x){var M=new ni(this.ctx);M.animateRect(o,{x:c+_/2,y:h+b/2,width:0,height:0},{x:c,y:h,width:_,height:b},x,function(){M.animationCompleted(o)})}},{key:"animateHeatColor",value:function(o,c,h,_){o.attr({fill:c}).animate(_).attr({fill:h})}}]),le}(),Hi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"drawYAxisTexts",value:function(o,c,h,_){var b=this.w,x=b.config.yaxis[0],M=b.globals.yLabelFormatters[0];return new at(this.ctx).drawText({x:o+x.labels.offsetX,y:c+x.labels.offsetY,text:M(_,h),textAnchor:"middle",fontSize:x.labels.style.fontSize,fontFamily:x.labels.style.fontFamily,foreColor:Array.isArray(x.labels.style.colors)?x.labels.style.colors[h]:x.labels.style.colors})}}]),le}(),Ui=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==c.globals.stroke.colors?c.globals.stroke.colors:c.globals.colors,this.defaultSize=Math.min(c.globals.gridWidth,c.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=c.globals.gridWidth/2,this.fullAngle="radialBar"===c.config.chart.type?360:Math.abs(c.config.plotOptions.pie.endAngle-c.config.plotOptions.pie.startAngle),this.initialAngle=c.config.plotOptions.pie.startAngle%this.fullAngle,c.globals.radialSize=this.defaultSize/2.05-c.config.stroke.width-(c.config.chart.sparkline.enabled?0:c.config.chart.dropShadow.blur),this.donutSize=c.globals.radialSize*parseInt(c.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Me(le,[{key:"draw",value:function(o){var c=this,h=this.w,_=new at(this.ctx);if(this.ret=_.group({class:"apexcharts-pie"}),h.globals.noData)return this.ret;for(var b=0,x=0;x<o.length;x++)b+=We.negToZero(o[x]);var M=[],I=_.group();0===b&&(b=1e-5),o.forEach(function(Le){c.maxY=Math.max(c.maxY,Le)}),h.config.yaxis[0].max&&(this.maxY=h.config.yaxis[0].max),"back"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var F=0;F<o.length;F++){var U=this.fullAngle*We.negToZero(o[F])/b;M.push(U),"polarArea"===this.chartType?(M[F]=this.fullAngle/o.length,this.sliceSizes.push(h.globals.radialSize*o[F]/this.maxY)):this.sliceSizes.push(h.globals.radialSize)}if(h.globals.dataChanged){for(var $,q=0,ne=0;ne<h.globals.previousPaths.length;ne++)q+=We.negToZero(h.globals.previousPaths[ne]);for(var de=0;de<h.globals.previousPaths.length;de++)$=this.fullAngle*We.negToZero(h.globals.previousPaths[de])/q,this.prevSectorAngleArr.push($)}this.donutSize<0&&(this.donutSize=0);var ge=h.config.plotOptions.pie.customScale,Se=h.globals.gridWidth/2-h.globals.gridWidth/2*ge,N=h.globals.gridHeight/2-h.globals.gridHeight/2*ge;if("donut"===this.chartType){var Q=_.drawCircle(this.donutSize);Q.attr({cx:this.centerX,cy:this.centerY,fill:h.config.plotOptions.pie.donut.background?h.config.plotOptions.pie.donut.background:"transparent"}),I.add(Q)}var pe=this.drawArcs(M,o);if(this.sliceLabels.forEach(function(Le){pe.add(Le)}),I.attr({transform:"translate(".concat(Se,", ").concat(N,") scale(").concat(ge,")")}),I.add(pe),this.ret.add(I),this.donutDataLabels.show){var xe=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:Se,translateY:N});this.ret.add(xe)}return"front"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(o,c){var h=this.w,_=new li(this.ctx),b=new at(this.ctx),x=new Bi(this.ctx),M=b.group({class:"apexcharts-slices"}),I=this.initialAngle,F=this.initialAngle,U=this.initialAngle,$=this.initialAngle;this.strokeWidth=h.config.stroke.show?h.config.stroke.width:0;for(var q=0;q<o.length;q++){var ne=b.group({class:"apexcharts-series apexcharts-pie-series",seriesName:We.escapeString(h.globals.seriesNames[q]),rel:q+1,"data:realIndex":q});M.add(ne),U=(I=U)+o[q],$=(F=$)+this.prevSectorAngleArr[q];var de=U<I?this.fullAngle+U-I:U-I,ge=x.fillPath({seriesNumber:q,size:this.sliceSizes[q],value:c[q]}),we=this.getChangedPath(F,$),me=b.drawPath({d:we,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[q]:this.lineColorArr,strokeWidth:0,fill:ge,fillOpacity:h.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(q)});me.attr({index:0,j:q}),_.setSelectionFilter(me,0,q),h.config.chart.dropShadow.enabled&&_.dropShadow(me,h.config.chart.dropShadow,q),this.addListeners(me,this.donutDataLabels),at.setAttrs(me.node,{"data:angle":de,"data:startAngle":I,"data:strokeWidth":this.strokeWidth,"data:value":c[q]});var N={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?N=We.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize/1.25+h.config.plotOptions.pie.dataLabels.offset,(I+de/2)%this.fullAngle):"donut"===this.chartType&&(N=We.polarToCartesian(this.centerX,this.centerY,(h.globals.radialSize+this.donutSize)/2+h.config.plotOptions.pie.dataLabels.offset,(I+de/2)%this.fullAngle)),ne.add(me);var Q=0;if(!this.initialAnim||h.globals.resized||h.globals.dataChanged?this.animBeginArr.push(0):(0==(Q=de/this.fullAngle*h.config.chart.animations.speed)&&(Q=1),this.animDur=Q+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(me,this.dynamicAnim&&h.globals.dataChanged?{size:this.sliceSizes[q],endAngle:U,startAngle:I,prevStartAngle:F,prevEndAngle:$,animateStartingPos:!0,i:q,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:h.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[q],endAngle:U,startAngle:I,i:q,totalItems:o.length-1,animBeginArr:this.animBeginArr,dur:Q}),h.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&me.click(this.pieClicked.bind(this,q)),void 0!==h.globals.selectedDataPoints[0]&&h.globals.selectedDataPoints[0].indexOf(q)>-1&&this.pieClicked(q),h.config.dataLabels.enabled){var pe=N.x,xe=N.y,Le=100*de/this.fullAngle+"%";if(0!==de&&h.config.plotOptions.pie.dataLabels.minAngleToShowLabel<o[q]){var Ze=h.config.dataLabels.formatter;void 0!==Ze&&(Le=Ze(h.globals.seriesPercent[q][0],{seriesIndex:q,w:h}));var kt=h.globals.dataLabels.style.colors[q],It=b.group({class:"apexcharts-datalabels"}),ii=b.drawText({x:pe,y:xe,text:Le,textAnchor:"middle",fontSize:h.config.dataLabels.style.fontSize,fontFamily:h.config.dataLabels.style.fontFamily,fontWeight:h.config.dataLabels.style.fontWeight,foreColor:kt});It.add(ii),h.config.dataLabels.dropShadow.enabled&&_.dropShadow(ii,h.config.dataLabels.dropShadow),ii.node.classList.add("apexcharts-pie-label"),h.config.chart.animations.animate&&!1===h.globals.resized&&(ii.node.classList.add("apexcharts-pie-label-delay"),ii.node.style.animationDelay=h.config.chart.animations.speed/940+"s"),this.sliceLabels.push(It)}}}return M}},{key:"addListeners",value:function(o,c){var h=new at(this.ctx);o.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this,o)),o.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,o.node,c)),o.node.addEventListener("mousedown",h.pathMouseDown.bind(this,o)),this.donutDataLabels.total.showAlways||(o.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,o.node,c)),o.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,o.node,c)))}},{key:"animatePaths",value:function(o,c){var _=c.endAngle<c.startAngle?this.fullAngle+c.endAngle-c.startAngle:c.endAngle-c.startAngle,b=_,x=c.startAngle,M=c.startAngle;void 0!==c.prevStartAngle&&void 0!==c.prevEndAngle&&(x=c.prevEndAngle,b=c.prevEndAngle<c.prevStartAngle?this.fullAngle+c.prevEndAngle-c.prevStartAngle:c.prevEndAngle-c.prevStartAngle),c.i===this.w.config.series.length-1&&(_+M>this.fullAngle?c.endAngle=c.endAngle-(_+M):_+M<this.fullAngle&&(c.endAngle=c.endAngle+(this.fullAngle-(_+M)))),_===this.fullAngle&&(_=this.fullAngle-.01),this.animateArc(o,x,M,_,b,c)}},{key:"animateArc",value:function(o,c,h,_,b,x){var M,I=this,F=this.w,U=new ni(this.ctx),$=x.size;(isNaN(c)||isNaN(b))&&(c=h,b=_,x.dur=0);var q=_,ne=h,de=c<h?this.fullAngle+c-h:c-h;F.globals.dataChanged&&x.shouldSetPrevPaths&&x.prevEndAngle&&(M=I.getPiePath({me:I,startAngle:x.prevStartAngle,angle:x.prevEndAngle<x.prevStartAngle?this.fullAngle+x.prevEndAngle-x.prevStartAngle:x.prevEndAngle-x.prevStartAngle,size:$}),o.attr({d:M})),0!==x.dur?o.animate(x.dur,F.globals.easing,x.animBeginArr[x.i]).afterAll(function(){"pie"!==I.chartType&&"donut"!==I.chartType&&"polarArea"!==I.chartType||this.animate(F.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":I.strokeWidth}),x.i===F.config.series.length-1&&U.animationCompleted(o)}).during(function(ge){q=de+(_-de)*ge,x.animateStartingPos&&(q=b+(_-b)*ge,ne=c-b+(h-(c-b))*ge),M=I.getPiePath({me:I,startAngle:ne,angle:q,size:$}),o.node.setAttribute("data:pathOrig",M),o.attr({d:M})}):(M=I.getPiePath({me:I,startAngle:ne,angle:_,size:$}),x.isTrack||(F.globals.animationEnded=!0),o.node.setAttribute("data:pathOrig",M),o.attr({d:M,"stroke-width":I.strokeWidth}))}},{key:"pieClicked",value:function(o){var c,h=this.w,_=this,b=_.sliceSizes[o]+(h.config.plotOptions.pie.expandOnClick?4:0),x=h.globals.dom.Paper.select(".apexcharts-".concat(_.chartType.toLowerCase(),"-slice-").concat(o)).members[0];if("true"!==x.attr("data:pieClicked")){var M=h.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(M,function($){$.setAttribute("data:pieClicked","false");var q=$.getAttribute("data:pathOrig");q&&$.setAttribute("d",q)}),x.attr("data:pieClicked","true");var I=parseInt(x.attr("data:startAngle"),10),F=parseInt(x.attr("data:angle"),10);c=_.getPiePath({me:_,startAngle:I,angle:F,size:b}),360!==F&&x.plot(c)}else{x.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(x.node,this.donutDataLabels);var U=x.attr("data:pathOrig");x.attr({d:U})}}},{key:"getChangedPath",value:function(o,c){var h="";return this.dynamicAnim&&this.w.globals.dataChanged&&(h=this.getPiePath({me:this,startAngle:o,angle:c-o,size:this.size})),h}},{key:"getPiePath",value:function(o){var c,h=o.me,_=o.startAngle,b=o.angle,x=o.size,M=new at(this.ctx),I=_,F=Math.PI*(I-90)/180,U=b+_;Math.ceil(U)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(U=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(U)>this.fullAngle&&(U-=this.fullAngle);var $=Math.PI*(U-90)/180,q=h.centerX+x*Math.cos(F),ne=h.centerY+x*Math.sin(F),de=h.centerX+x*Math.cos($),ge=h.centerY+x*Math.sin($),we=We.polarToCartesian(h.centerX,h.centerY,h.donutSize,U),me=We.polarToCartesian(h.centerX,h.centerY,h.donutSize,I),Se=b>180?1:0,N=["M",q,ne,"A",x,x,0,Se,1,de,ge];return c="donut"===h.chartType?[].concat(N,["L",we.x,we.y,"A",h.donutSize,h.donutSize,0,Se,0,me.x,me.y,"L",q,ne,"z"]).join(" "):"pie"===h.chartType||"polarArea"===h.chartType?[].concat(N,["L",h.centerX,h.centerY,"L",q,ne]).join(" "):[].concat(N).join(" "),M.roundPathCorners(c,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(o){var c=this.w,h=new en(this.ctx),_=new at(this.ctx),b=new Hi(this.ctx),x=_.group(),M=_.group(),I=h.niceScale(0,Math.ceil(this.maxY),0),F=I.result.reverse(),U=I.result.length;this.maxY=I.niceMax;for(var $=c.globals.radialSize,q=$/(U-1),ne=0;ne<U-1;ne++){var de=_.drawCircle($);if(de.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":c.config.plotOptions.polarArea.rings.strokeWidth,stroke:c.config.plotOptions.polarArea.rings.strokeColor}),c.config.yaxis[0].show){var ge=b.drawYAxisTexts(this.centerX,this.centerY-$+parseInt(c.config.yaxis[0].labels.style.fontSize,10)/2,ne,F[ne]);M.add(ge)}x.add(de),$-=q}this.drawSpokes(o),o.add(x),o.add(M)}},{key:"renderInnerDataLabels",value:function(o,c){var h=this.w,_=new at(this.ctx),b=_.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(c.translateX?c.translateX:0,", ").concat(c.translateY?c.translateY:0,") scale(").concat(h.config.plotOptions.pie.customScale,")")}),x=o.total.show;b.node.style.opacity=c.opacity;var M,I,F=c.centerX,U=c.centerY;M=void 0===o.name.color?h.globals.colors[0]:o.name.color;var $=o.name.fontSize,q=o.name.fontFamily,ne=o.name.fontWeight;I=void 0===o.value.color?h.config.chart.foreColor:o.value.color;var de=o.value.formatter,ge="",we="";if(x?(M=o.total.color,$=o.total.fontSize,q=o.total.fontFamily,ne=o.total.fontWeight,we=o.total.label,ge=o.total.formatter(h)):1===h.globals.series.length&&(ge=de(h.globals.series[0],h),we=h.globals.seriesNames[0]),we&&(we=o.name.formatter(we,o.total.show,h)),o.name.show){var me=_.drawText({x:F,y:U+parseFloat(o.name.offsetY),text:we,textAnchor:"middle",foreColor:M,fontSize:$,fontWeight:ne,fontFamily:q});me.node.classList.add("apexcharts-datalabel-label"),b.add(me)}if(o.value.show){var Se=o.name.show?parseFloat(o.value.offsetY)+16:o.value.offsetY,N=_.drawText({x:F,y:U+Se,text:ge,textAnchor:"middle",foreColor:I,fontWeight:o.value.fontWeight,fontSize:o.value.fontSize,fontFamily:o.value.fontFamily});N.node.classList.add("apexcharts-datalabel-value"),b.add(N)}return b}},{key:"printInnerLabels",value:function(o,c,h,_){var b,x=this.w;_?b=void 0===o.name.color?x.globals.colors[parseInt(_.parentNode.getAttribute("rel"),10)-1]:o.name.color:x.globals.series.length>1&&o.total.show&&(b=o.total.color);var M=x.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),I=x.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");h=(0,o.value.formatter)(h,x),_||"function"!=typeof o.total.formatter||(h=o.total.formatter(x)),c=o.name.formatter(c,c===o.total.label,x),null!==M&&(M.textContent=c),null!==I&&(I.textContent=h),null!==M&&(M.style.fill=b)}},{key:"printDataLabelsInner",value:function(o,c){var h=this.w,_=o.getAttribute("data:value"),b=h.globals.seriesNames[parseInt(o.parentNode.getAttribute("rel"),10)-1];h.globals.series.length>1&&this.printInnerLabels(c,b,_,o);var x=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==x&&(x.style.opacity=1)}},{key:"drawSpokes",value:function(o){var c=this,h=this.w,_=new at(this.ctx),b=h.config.plotOptions.polarArea.spokes;if(0!==b.strokeWidth){for(var x=[],M=360/h.globals.series.length,I=0;I<h.globals.series.length;I++)x.push(We.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize,h.config.plotOptions.pie.startAngle+M*I));x.forEach(function(F,U){var $=_.drawLine(F.x,F.y,c.centerX,c.centerY,Array.isArray(b.connectorColors)?b.connectorColors[U]:b.connectorColors);o.add($)})}}},{key:"revertDataLabelsInner",value:function(o,c,h){var _=this,b=this.w,x=b.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),M=!1,I=b.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),F=function(q){var ne=q.makeSliceOut,de=q.printLabel;Array.prototype.forEach.call(I,function(ge){"true"===ge.getAttribute("data:pieClicked")&&(ne&&(M=!0),de&&_.printDataLabelsInner(ge,c))})};if(F({makeSliceOut:!0,printLabel:!1}),c.total.show&&b.globals.series.length>1)M&&!c.total.showAlways?F({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(c,c.total.label,c.total.formatter(b));else if(F({makeSliceOut:!1,printLabel:!0}),!M)if(b.globals.selectedDataPoints.length&&b.globals.series.length>1)if(b.globals.selectedDataPoints[0].length>0){var U=b.globals.selectedDataPoints[0],$=b.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(U));this.printDataLabelsInner($,c)}else x&&b.globals.selectedDataPoints.length&&0===b.globals.selectedDataPoints[0].length&&(x.style.opacity=0);else x&&b.globals.series.length>1&&(x.style.opacity=0)}}]),le}(),di=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var c=this.w;this.graphics=new at(this.ctx),this.lineColorArr=void 0!==c.globals.stroke.colors?c.globals.stroke.colors:c.globals.colors,this.defaultSize=c.globals.svgHeight<c.globals.svgWidth?c.globals.gridHeight+1.5*c.globals.goldenPadding:c.globals.gridWidth,this.isLog=c.config.yaxis[0].logarithmic,this.coreUtils=new si(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(c.globals.maxY,0):c.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):c.globals.minY,this.polygons=c.config.plotOptions.radar.polygons,this.strokeWidth=c.config.stroke.show?c.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-c.config.chart.dropShadow.blur,c.config.xaxis.labels.show&&(this.size=this.size-c.globals.xAxisLabelsWidth/1.75),void 0!==c.config.plotOptions.radar.size&&(this.size=c.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Me(le,[{key:"draw",value:function(o){var c=this,h=this.w,_=new Bi(this.ctx),b=[],x=new Nn(this.ctx);o.length&&(this.dataPointsLen=o[h.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var U=h.globals.gridHeight/2+h.config.plotOptions.radar.offsetY,$=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(h.globals.gridWidth/2+h.config.plotOptions.radar.offsetX||0,", ").concat(U||0,")")}),q=[],ne=null,de=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),o.forEach(function(we,me){var Se=we.length===h.globals.dataPoints,N=c.graphics.group().attr({class:"apexcharts-series","data:longestSeries":Se,seriesName:We.escapeString(h.globals.seriesNames[me]),rel:me+1,"data:realIndex":me});c.dataRadiusOfPercent[me]=[],c.dataRadius[me]=[],c.angleArr[me]=[],we.forEach(function(Mi,dn){var En=Math.abs(c.maxValue-c.minValue);Mi+=Math.abs(c.minValue),c.isLog&&(Mi=c.coreUtils.getLogVal(Mi,0)),c.dataRadiusOfPercent[me][dn]=Mi/En,c.dataRadius[me][dn]=c.dataRadiusOfPercent[me][dn]*c.size,c.angleArr[me][dn]=dn*c.disAngle}),q=c.getDataPointsPos(c.dataRadius[me],c.angleArr[me]);var Q=c.createPaths(q,{x:0,y:0});ne=c.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),de=c.graphics.group({class:"apexcharts-datalabels","data:realIndex":me}),h.globals.delayedElements.push({el:ne.node,index:me});var pe={i:me,realIndex:me,animationDelay:me,initialSpeed:h.config.chart.animations.speed,dataChangeSpeed:h.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:h.globals.stroke.colors[me],strokeLineCap:h.config.stroke.lineCap},xe=null;h.globals.previousPaths.length>0&&(xe=c.getPreviousPath(me));for(var Le=0;Le<Q.linePathsTo.length;Le++){var Ze=c.graphics.renderPaths(Fe(Fe({},pe),{},{pathFrom:null===xe?Q.linePathsFrom[Le]:xe,pathTo:Q.linePathsTo[Le],strokeWidth:Array.isArray(c.strokeWidth)?c.strokeWidth[me]:c.strokeWidth,fill:"none",drawShadow:!1}));N.add(Ze);var kt=_.fillPath({seriesNumber:me}),It=c.graphics.renderPaths(Fe(Fe({},pe),{},{pathFrom:null===xe?Q.areaPathsFrom[Le]:xe,pathTo:Q.areaPathsTo[Le],strokeWidth:0,fill:kt,drawShadow:!1}));h.config.chart.dropShadow.enabled&&new li(c.ctx).dropShadow(It,Object.assign({},h.config.chart.dropShadow,{noUserSpaceOnUse:!0}),me),N.add(It)}we.forEach(function(Mi,dn){var En=new on(c.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:me,dataPointIndex:dn}),Fn=c.graphics.drawMarker(q[dn].x,q[dn].y,En);Fn.attr("rel",dn),Fn.attr("j",dn),Fn.attr("index",me),Fn.node.setAttribute("default-marker-size",En.pSize);var Jn=c.graphics.group({class:"apexcharts-series-markers"});Jn&&Jn.add(Fn),ne.add(Jn),N.add(ne);var ar=h.config.dataLabels;if(ar.enabled){var lr=ar.formatter(h.globals.series[me][dn],{seriesIndex:me,dataPointIndex:dn,w:h});x.plotDataLabelsText({x:q[dn].x,y:q[dn].y,text:lr,textAnchor:"middle",i:me,j:me,parent:de,offsetCorrection:!1,dataLabelsConfig:Fe({},ar)})}N.add(de)}),b.push(N)}),this.drawPolygons({parent:$}),h.config.xaxis.labels.show){var ge=this.drawXAxisTexts();$.add(ge)}return b.forEach(function(we){$.add(we)}),$.add(this.yaxisLabels),$}},{key:"drawPolygons",value:function(o){for(var c=this,h=this.w,_=o.parent,b=new Hi(this.ctx),x=h.globals.yAxisScale[0].result.reverse(),M=x.length,I=[],F=this.size/(M-1),U=0;U<M;U++)I[U]=F*U;I.reverse();var $=[],q=[];I.forEach(function(ne,de){var ge=We.getPolygonPos(ne,c.dataPointsLen),we="";ge.forEach(function(me,Se){if(0===de){var N=c.graphics.drawLine(me.x,me.y,0,0,Array.isArray(c.polygons.connectorColors)?c.polygons.connectorColors[Se]:c.polygons.connectorColors);q.push(N)}0===Se&&c.yaxisLabelsTextsPos.push({x:me.x,y:me.y}),we+=me.x+","+me.y+" "}),$.push(we)}),$.forEach(function(ne,de){var ge=c.polygons.strokeColors,we=c.polygons.strokeWidth,me=c.graphics.drawPolygon(ne,Array.isArray(ge)?ge[de]:ge,Array.isArray(we)?we[de]:we,h.globals.radarPolygons.fill.colors[de]);_.add(me)}),q.forEach(function(ne){_.add(ne)}),h.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(ne,de){var ge=b.drawYAxisTexts(ne.x,ne.y,de,x[de]);c.yaxisLabels.add(ge)})}},{key:"drawXAxisTexts",value:function(){var o=this,c=this.w,h=c.config.xaxis.labels,_=this.graphics.group({class:"apexcharts-xaxis"}),b=We.getPolygonPos(this.size,this.dataPointsLen);return c.globals.labels.forEach(function(x,M){var I=c.config.xaxis.labels.formatter,F=new Nn(o.ctx);if(b[M]){var U=o.getTextPos(b[M],o.size),$=I(x,{seriesIndex:-1,dataPointIndex:M,w:c});F.plotDataLabelsText({x:U.newX,y:U.newY,text:$,textAnchor:U.textAnchor,i:M,j:M,parent:_,color:Array.isArray(h.style.colors)&&h.style.colors[M]?h.style.colors[M]:"#a8a8a8",dataLabelsConfig:Fe({textAnchor:U.textAnchor,dropShadow:{enabled:!1}},h),offsetCorrection:!1})}}),_}},{key:"createPaths",value:function(o,c){var h=this,_=[],b=[],x=[],M=[];if(o.length){b=[this.graphics.move(c.x,c.y)],M=[this.graphics.move(c.x,c.y)];var I=this.graphics.move(o[0].x,o[0].y),F=this.graphics.move(o[0].x,o[0].y);o.forEach(function(U,$){I+=h.graphics.line(U.x,U.y),F+=h.graphics.line(U.x,U.y),$===o.length-1&&(I+="Z",F+="Z")}),_.push(I),x.push(F)}return{linePathsFrom:b,linePathsTo:_,areaPathsFrom:M,areaPathsTo:x}}},{key:"getTextPos",value:function(o,c){var h="middle",_=o.x,b=o.y;return Math.abs(o.x)>=10?o.x>0?(h="start",_+=10):o.x<0&&(h="end",_-=10):h="middle",Math.abs(o.y)>=c-10&&(o.y<0?b-=10:o.y>0&&(b+=10)),{textAnchor:h,newX:_,newY:b}}},{key:"getPreviousPath",value:function(o){for(var c=this.w,h=null,_=0;_<c.globals.previousPaths.length;_++){var b=c.globals.previousPaths[_];b.paths.length>0&&parseInt(b.realIndex,10)===parseInt(o,10)&&void 0!==c.globals.previousPaths[_].paths[0]&&(h=c.globals.previousPaths[_].paths[0].d)}return h}},{key:"getDataPointsPos",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;o=o||[],c=c||[];for(var _=[],b=0;b<h;b++){var x={};x.x=o[b]*Math.sin(c[b]),x.y=-o[b]*Math.cos(c[b]),_.push(x)}return _}}]),le}(),un=function(le){Be(c,Ui);var o=mt(c);function c(h){var _;V(this,c),(_=o.call(this,h)).ctx=h,_.w=h.w,_.animBeginArr=[0],_.animDur=0;var b=_.w;return _.startAngle=b.config.plotOptions.radialBar.startAngle,_.endAngle=b.config.plotOptions.radialBar.endAngle,_.totalAngle=Math.abs(b.config.plotOptions.radialBar.endAngle-b.config.plotOptions.radialBar.startAngle),_.trackStartAngle=b.config.plotOptions.radialBar.track.startAngle,_.trackEndAngle=b.config.plotOptions.radialBar.track.endAngle,_.barLabels=_.w.config.plotOptions.radialBar.barLabels,_.donutDataLabels=_.w.config.plotOptions.radialBar.dataLabels,_.radialDataLabels=_.donutDataLabels,_.trackStartAngle||(_.trackStartAngle=_.startAngle),_.trackEndAngle||(_.trackEndAngle=_.endAngle),360===_.endAngle&&(_.endAngle=359.99),_.margin=parseInt(b.config.plotOptions.radialBar.track.margin,10),_.onBarLabelClick=_.onBarLabelClick.bind(nt(_)),_}return Me(c,[{key:"draw",value:function(h){var _=this.w,b=new at(this.ctx),x=b.group({class:"apexcharts-radialbar"});if(_.globals.noData)return x;var M=b.group(),I=this.defaultSize/2,F=_.globals.gridWidth/2,U=this.defaultSize/2.05;_.config.chart.sparkline.enabled||(U=U-_.config.stroke.width-_.config.chart.dropShadow.blur);var $=_.globals.fill.colors;if(_.config.plotOptions.radialBar.track.show){var q=this.drawTracks({size:U,centerX:F,centerY:I,colorArr:$,series:h});M.add(q)}var ne=this.drawArcs({size:U,centerX:F,centerY:I,colorArr:$,series:h}),de=360;_.config.plotOptions.radialBar.startAngle<0&&(de=this.totalAngle);var ge=(360-de)/360;if(_.globals.radialSize=U-U*ge,this.radialDataLabels.value.show){var we=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);_.globals.radialSize+=we*ge}return M.add(ne.g),"front"===_.config.plotOptions.radialBar.hollow.position&&(ne.g.add(ne.elHollow),ne.dataLabels&&ne.g.add(ne.dataLabels)),x.add(M),x}},{key:"drawTracks",value:function(h){var _=this.w,b=new at(this.ctx),x=b.group({class:"apexcharts-tracks"}),M=new li(this.ctx),I=new Bi(this.ctx),F=this.getStrokeWidth(h);h.size=h.size-F/2;for(var U=0;U<h.series.length;U++){var $=b.group({class:"apexcharts-radialbar-track apexcharts-track"});x.add($),$.attr({rel:U+1}),h.size=h.size-F-this.margin;var q=_.config.plotOptions.radialBar.track,ne=I.fillPath({seriesNumber:0,size:h.size,fillColors:Array.isArray(q.background)?q.background[U]:q.background,solid:!0}),de=this.trackStartAngle,ge=this.trackEndAngle;Math.abs(ge)+Math.abs(de)>=360&&(ge=360-Math.abs(this.startAngle)-.1);var we=b.drawPath({d:"",stroke:ne,strokeWidth:F*parseInt(q.strokeWidth,10)/100,fill:"none",strokeOpacity:q.opacity,classes:"apexcharts-radialbar-area"});q.dropShadow.enabled&&M.dropShadow(we,q.dropShadow),$.add(we),we.attr("id","apexcharts-radialbarTrack-"+U),this.animatePaths(we,{centerX:h.centerX,centerY:h.centerY,endAngle:ge,startAngle:de,size:h.size,i:U,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:_.globals.easing})}return x}},{key:"drawArcs",value:function(h){var _=this.w,b=new at(this.ctx),x=new Bi(this.ctx),M=new li(this.ctx),I=b.group(),F=this.getStrokeWidth(h);h.size=h.size-F/2;var U=_.config.plotOptions.radialBar.hollow.background,$=h.size-F*h.series.length-this.margin*h.series.length-F*parseInt(_.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,q=$-_.config.plotOptions.radialBar.hollow.margin;void 0!==_.config.plotOptions.radialBar.hollow.image&&(U=this.drawHollowImage(h,I,$,U));var ne=this.drawHollow({size:q,centerX:h.centerX,centerY:h.centerY,fill:U||"transparent"});_.config.plotOptions.radialBar.hollow.dropShadow.enabled&&M.dropShadow(ne,_.config.plotOptions.radialBar.hollow.dropShadow);var ge=1;!this.radialDataLabels.total.show&&_.globals.series.length>1&&(ge=0);var we=null;this.radialDataLabels.show&&(we=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:$,centerX:h.centerX,centerY:h.centerY,opacity:ge})),"back"===_.config.plotOptions.radialBar.hollow.position&&(I.add(ne),we&&I.add(we));var me=!1;_.config.plotOptions.radialBar.inverseOrder&&(me=!0);for(var Se=me?h.series.length-1:0;me?Se>=0:Se<h.series.length;me?Se--:Se++){var N=b.group({class:"apexcharts-series apexcharts-radial-series",seriesName:We.escapeString(_.globals.seriesNames[Se])});I.add(N),N.attr({rel:Se+1,"data:realIndex":Se}),this.ctx.series.addCollapsedClassToSeries(N,Se),h.size=h.size-F-this.margin;var Q=x.fillPath({seriesNumber:Se,size:h.size,value:h.series[Se]}),pe=this.startAngle,xe=void 0,Le=We.negToZero(h.series[Se]>100?100:h.series[Se])/100,Ze=Math.round(this.totalAngle*Le)+this.startAngle,kt=void 0;_.globals.dataChanged&&(xe=this.startAngle,kt=Math.round(this.totalAngle*We.negToZero(_.globals.previousPaths[Se])/100)+xe),Math.abs(Ze)+Math.abs(pe)>=360&&(Ze-=.01),Math.abs(kt)+Math.abs(xe)>=360&&(kt-=.01);var It=Ze-pe,ii=Array.isArray(_.config.stroke.dashArray)?_.config.stroke.dashArray[Se]:_.config.stroke.dashArray,wi=b.drawPath({d:"",stroke:Q,strokeWidth:F,fill:"none",fillOpacity:_.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+Se,strokeDashArray:ii});if(at.setAttrs(wi.node,{"data:angle":It,"data:value":h.series[Se]}),_.config.chart.dropShadow.enabled&&M.dropShadow(wi,_.config.chart.dropShadow,Se),M.setSelectionFilter(wi,0,Se),this.addListeners(wi,this.radialDataLabels),N.add(wi),wi.attr({index:0,j:Se}),this.barLabels.enabled){var dn=We.polarToCartesian(h.centerX,h.centerY,h.size,pe),En=this.barLabels.formatter(_.globals.seriesNames[Se],{seriesIndex:Se,w:_}),Fn=["apexcharts-radialbar-label"];this.barLabels.onClick||Fn.push("apexcharts-no-click");var Jn=this.barLabels.useSeriesColors?_.globals.colors[Se]:_.config.chart.foreColor;Jn||(Jn=_.config.chart.foreColor);var ar=dn.x-this.barLabels.margin,lr=dn.y,Lr=b.drawText({x:ar,y:lr,text:En,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:Jn,cssClass:Fn.join(" ")});Lr.on("click",this.onBarLabelClick),Lr.attr({rel:Se+1}),0!==pe&&Lr.attr({"transform-origin":"".concat(ar," ").concat(lr),transform:"rotate(".concat(pe," 0 0)")}),N.add(Lr)}var Hr=0;!this.initialAnim||_.globals.resized||_.globals.dataChanged||(Hr=_.config.chart.animations.speed),_.globals.dataChanged&&(Hr=_.config.chart.animations.dynamicAnimation.speed),this.animDur=Hr/(1.2*h.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(wi,{centerX:h.centerX,centerY:h.centerY,endAngle:Ze,startAngle:pe,prevEndAngle:kt,prevStartAngle:xe,size:h.size,i:Se,totalItems:2,animBeginArr:this.animBeginArr,dur:Hr,shouldSetPrevPaths:!0,easing:_.globals.easing})}return{g:I,elHollow:ne,dataLabels:we}}},{key:"drawHollow",value:function(h){var _=new at(this.ctx).drawCircle(2*h.size);return _.attr({class:"apexcharts-radialbar-hollow",cx:h.centerX,cy:h.centerY,r:h.size,fill:h.fill}),_}},{key:"drawHollowImage",value:function(h,_,b,x){var M=this.w,I=new Bi(this.ctx),F=We.randomId(),U=M.config.plotOptions.radialBar.hollow.image;if(M.config.plotOptions.radialBar.hollow.imageClipped)I.clippedImgArea({width:b,height:b,image:U,patternID:"pattern".concat(M.globals.cuid).concat(F)}),x="url(#pattern".concat(M.globals.cuid).concat(F,")");else{var $=M.config.plotOptions.radialBar.hollow.imageWidth,q=M.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===$&&void 0===q){var ne=M.globals.dom.Paper.image(U).loaded(function(ge){this.move(h.centerX-ge.width/2+M.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-ge.height/2+M.config.plotOptions.radialBar.hollow.imageOffsetY)});_.add(ne)}else{var de=M.globals.dom.Paper.image(U).loaded(function(ge){this.move(h.centerX-$/2+M.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-q/2+M.config.plotOptions.radialBar.hollow.imageOffsetY),this.size($,q)});_.add(de)}}return x}},{key:"getStrokeWidth",value:function(h){return h.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(h.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(h){var _=parseInt(h.target.getAttribute("rel"),10)-1,b=this.barLabels.onClick,x=this.w;b&&b(x.globals.seriesNames[_],{w:x,seriesIndex:_})}}]),c}(),Et=function(le){Be(c,zt);var o=mt(c);function c(){return V(this,c),o.apply(this,arguments)}return Me(c,[{key:"draw",value:function(h,_){var b=this.w,x=new at(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=h,this.seriesRangeStart=b.globals.seriesRangeStart,this.seriesRangeEnd=b.globals.seriesRangeEnd,this.barHelpers.initVariables(h);for(var M=x.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),I=0;I<h.length;I++){var F,U,$,q,ne=void 0,de=void 0,ge=b.globals.comboCharts?_[I]:I,we=x.group({class:"apexcharts-series",seriesName:We.escapeString(b.globals.seriesNames[ge]),rel:I+1,"data:realIndex":ge});this.ctx.series.addCollapsedClassToSeries(we,ge),h[I].length>0&&(this.visibleI=this.visibleI+1);var me=0,Se=0;this.yRatio.length>1&&(this.yaxisIndex=ge);var N=this.barHelpers.initialPositions();de=N.y,q=N.zeroW,ne=N.x,Se=N.barWidth,me=N.barHeight,F=N.xDivision,U=N.yDivision,$=N.zeroH;for(var Q=x.group({class:"apexcharts-datalabels","data:realIndex":ge}),pe=x.group({class:"apexcharts-rangebar-goals-markers"}),xe=0;xe<b.globals.dataPoints;xe++){var Le,Ze=this.barHelpers.getStrokeWidth(I,xe,ge),kt=this.seriesRangeStart[I][xe],It=this.seriesRangeEnd[I][xe],ii=null,wi=null,Mi=null,dn={x:ne,y:de,strokeWidth:Ze,elSeries:we},En=this.seriesLen;if(b.config.plotOptions.bar.rangeBarGroupRows&&(En=1),void 0===b.config.series[I].data[xe])break;if(this.isHorizontal){if(Mi=de+me*this.visibleI,b.config.series[I].data[xe].x){var Jn=this.detectOverlappingBars({i:I,j:xe,barYPosition:Mi,srty:(U-me*En)/2,barHeight:me,yDivision:U,initPositions:N});me=Jn.barHeight,Mi=Jn.barYPosition}Se=(ii=this.drawRangeBarPaths(Fe({indexes:{i:I,j:xe,realIndex:ge},barHeight:me,barYPosition:Mi,zeroW:q,yDivision:U,y1:kt,y2:It},dn))).barWidth}else{if(b.globals.isXNumeric&&(ne=(b.globals.seriesX[I][xe]-b.globals.minX)/this.xRatio-Se/2),wi=ne+Se*this.visibleI,b.config.series[I].data[xe].x){var lr=this.detectOverlappingBars({i:I,j:xe,barXPosition:wi,srtx:(F-Se*En)/2,barWidth:Se,xDivision:F,initPositions:N});Se=lr.barWidth,wi=lr.barXPosition}me=(ii=this.drawRangeColumnPaths(Fe({indexes:{i:I,j:xe,realIndex:ge},barWidth:Se,barXPosition:wi,zeroH:$,xDivision:F},dn))).barHeight}var Lr=this.barHelpers.drawGoalLine({barXPosition:ii.barXPosition,barYPosition:Mi,goalX:ii.goalX,goalY:ii.goalY,barHeight:me,barWidth:Se});Lr&&pe.add(Lr),de=ii.y,ne=ii.x;var Hr=this.barHelpers.getPathFillColor(h,I,xe,ge);this.renderSeries((De(Le={realIndex:ge,pathFill:Hr,lineFill:b.globals.stroke.colors[ge],j:xe,i:I,x:ne,y:de,y1:kt,y2:It,pathFrom:ii.pathFrom,pathTo:ii.pathTo,strokeWidth:Ze,elSeries:we,series:h,barHeight:me,barWidth:Se,barXPosition:wi,barYPosition:Mi},"barWidth",Se),De(Le,"elDataLabelsWrap",Q),De(Le,"elGoalsMarkers",pe),De(Le,"visibleSeries",this.visibleI),De(Le,"type","rangebar"),Le))}M.add(we)}return M}},{key:"detectOverlappingBars",value:function(h){var _=h.i,b=h.j,x=h.barYPosition,M=h.barXPosition,I=h.srty,F=h.srtx,U=h.barHeight,$=h.barWidth,q=h.yDivision,ne=h.xDivision,de=h.initPositions,ge=this.w,we=[],me=ge.config.series[_].data[b].rangeName,Se=ge.config.series[_].data[b].x,N=Array.isArray(Se)?Se.join(" "):Se,Q=ge.globals.labels.map(function(xe){return Array.isArray(xe)?xe.join(" "):xe}).indexOf(N),pe=ge.globals.seriesRange[_].findIndex(function(xe){return xe.x===N&&xe.overlaps.length>0});return this.isHorizontal?(x=ge.config.plotOptions.bar.rangeBarGroupRows?I+q*Q:I+U*this.visibleI+q*Q,pe>-1&&!ge.config.plotOptions.bar.rangeBarOverlap&&(we=ge.globals.seriesRange[_][pe].overlaps).indexOf(me)>-1&&(x=(U=de.barHeight/we.length)*this.visibleI+q*(100-parseInt(this.barOptions.barHeight,10))/100/2+U*(this.visibleI+we.indexOf(me))+q*Q)):(Q>-1&&(M=ge.config.plotOptions.bar.rangeBarGroupRows?F+ne*Q:F+$*this.visibleI+ne*Q),pe>-1&&!ge.config.plotOptions.bar.rangeBarOverlap&&(we=ge.globals.seriesRange[_][pe].overlaps).indexOf(me)>-1&&(M=($=de.barWidth/we.length)*this.visibleI+ne*(100-parseInt(this.barOptions.barWidth,10))/100/2+$*(this.visibleI+we.indexOf(me))+ne*Q)),{barYPosition:x,barXPosition:M,barHeight:U,barWidth:$}}},{key:"drawRangeColumnPaths",value:function(h){var _=h.indexes,b=h.x,x=h.xDivision,M=h.barWidth,I=h.barXPosition,F=h.zeroH,U=this.w,$=_.i,q=_.j,ne=this.yRatio[this.yaxisIndex],de=_.realIndex,ge=this.getRangeValue(de,q),we=Math.min(ge.start,ge.end),me=Math.max(ge.start,ge.end);null==this.series[$][q]?we=F:(we=F-we/ne,me=F-me/ne);var Se=Math.abs(me-we),N=this.barHelpers.getColumnPaths({barXPosition:I,barWidth:M,y1:we,y2:me,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:_.realIndex,i:de,j:q,w:U});if(U.globals.isXNumeric){var Q=this.getBarXForNumericXAxis({x:b,j:q,realIndex:de,barWidth:M});b=Q.x,I=Q.barXPosition}else b+=x;return{pathTo:N.pathTo,pathFrom:N.pathFrom,barHeight:Se,x:b,y:me,goalY:this.barHelpers.getGoalValues("y",null,F,$,q),barXPosition:I}}},{key:"drawRangeBarPaths",value:function(h){var _=h.indexes,b=h.y,I=h.yDivision,F=h.barHeight,U=h.barYPosition,$=h.zeroW,q=this.w,ne=$+h.y1/this.invertedYRatio,de=$+h.y2/this.invertedYRatio,ge=Math.abs(de-ne),we=this.barHelpers.getBarpaths({barYPosition:U,barHeight:F,x1:ne,x2:de,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:_.realIndex,realIndex:_.realIndex,j:_.j,w:q});return q.globals.isXNumeric||(b+=I),{pathTo:we.pathTo,pathFrom:we.pathFrom,barWidth:ge,x:de,goalX:this.barHelpers.getGoalValues("x",$,null,_.realIndex,_.j),y:b}}},{key:"getRangeValue",value:function(h,_){var b=this.w;return{start:b.globals.seriesRangeStart[h][_],end:b.globals.seriesRangeEnd[h][_]}}}]),c}(),St=function(){function le(o){V(this,le),this.w=o.w,this.lineCtx=o}return Me(le,[{key:"sameValueSeriesFix",value:function(o,c){var h=this.w;if(("gradient"===h.config.fill.type||"gradient"===h.config.fill.type[o])&&new si(this.lineCtx.ctx,h).seriesHaveSameValues(o)){var _=c[o].slice();_[_.length-1]=_[_.length-1]+1e-6,c[o]=_}return c}},{key:"calculatePoints",value:function(o){var c=o.series,_=o.x,b=o.y,x=o.i,M=o.j,I=o.prevY,F=this.w,U=[],$=[];if(0===M){var q=this.lineCtx.categoryAxisCorrection+F.config.markers.offsetX;F.globals.isXNumeric&&(q=(F.globals.seriesX[o.realIndex][0]-F.globals.minX)/this.lineCtx.xRatio+F.config.markers.offsetX),U.push(q),$.push(We.isNumber(c[x][0])?I+F.config.markers.offsetY:null),U.push(_+F.config.markers.offsetX),$.push(We.isNumber(c[x][M+1])?b+F.config.markers.offsetY:null)}else U.push(_+F.config.markers.offsetX),$.push(We.isNumber(c[x][M+1])?b+F.config.markers.offsetY:null);return{x:U,y:$}}},{key:"checkPreviousPaths",value:function(o){for(var c=o.pathFromLine,h=o.pathFromArea,_=o.realIndex,b=this.w,x=0;x<b.globals.previousPaths.length;x++){var M=b.globals.previousPaths[x];("line"===M.type||"area"===M.type)&&M.paths.length>0&&parseInt(M.realIndex,10)===parseInt(_,10)&&("line"===M.type?(this.lineCtx.appendPathFrom=!1,c=b.globals.previousPaths[x].paths[0].d):"area"===M.type&&(this.lineCtx.appendPathFrom=!1,h=b.globals.previousPaths[x].paths[0].d,b.config.stroke.show&&b.globals.previousPaths[x].paths[1]&&(c=b.globals.previousPaths[x].paths[1].d)))}return{pathFromLine:c,pathFromArea:h}}},{key:"determineFirstPrevY",value:function(o){var c,h,_=o.i,b=o.series,x=o.prevY,M=o.lineYPosition,I=this.w,F=I.config.chart.stacked&&!I.globals.comboCharts||I.config.chart.stacked&&I.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(c=this.w.config.series[_])||void 0===c?void 0:c.type));if(void 0!==(null===(h=b[_])||void 0===h?void 0:h[0]))x=(M=F&&_>0?this.lineCtx.prevSeriesY[_-1][0]:this.lineCtx.zeroY)-b[_][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?b[_][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(F&&_>0&&void 0===b[_][0])for(var U=_-1;U>=0;U--)if(null!=b[U][0]){x=M=this.lineCtx.prevSeriesY[U][0];break}return{prevY:x,lineYPosition:M}}}]),le}(),Xe=function(le){for(var o="",c=0;c<le.length;c++){var h=le[c],_=h.length;_>4?(o+="C".concat(h[0],", ").concat(h[1]),o+=", ".concat(h[2],", ").concat(h[3]),o+=", ".concat(h[4],", ").concat(h[5])):_>2&&(o+="S".concat(h[0],", ").concat(h[1]),o+=", ".concat(h[2],", ").concat(h[3]))}return o},ze=function(le){var o=function(le){for(var o,c,h,_,b=function(U){for(var $=[],q=U[0],ne=U[1],de=$[0]=He(q,ne),ge=1,we=U.length-1;ge<we;ge++)$[ge]=.5*(de+(de=He(q=ne,ne=U[ge+1])));return $[ge]=de,$}(le),x=le.length-1,M=[],I=0;I<x;I++)h=He(le[I],le[I+1]),Math.abs(h)<1e-6?b[I]=b[I+1]=0:(_=(o=b[I]/h)*o+(c=b[I+1]/h)*c)>9&&(_=3*h/Math.sqrt(_),b[I]=_*o,b[I+1]=_*c);for(var F=0;F<=x;F++)_=(le[Math.min(x,F+1)][0]-le[Math.max(0,F-1)][0])/(6*(1+b[F]*b[F])),M.push([_||0,b[F]*_||0]);return M}(le),c=le[1],h=le[0],_=[],b=o[1],x=o[0];_.push(h,[h[0]+x[0],h[1]+x[1],c[0]-b[0],c[1]-b[1],c[0],c[1]]);for(var M=2,I=o.length;M<I;M++){var F=le[M],U=o[M];_.push([F[0]-U[0],F[1]-U[1],F[0],F[1]])}return _};function He(le,o){return(o[1]-le[1])/(o[0]-le[0])}var ft=function(){function le(o,c,h){V(this,le),this.ctx=o,this.w=o.w,this.xyRatios=c,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||h,this.scatter=new Wn(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new St(this),this.markers=new on(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Me(le,[{key:"draw",value:function(o,c,h,_){var b,x=this.w,M=new at(this.ctx),I=x.globals.comboCharts?c:x.config.chart.type,F=M.group({class:"apexcharts-".concat(I,"-series apexcharts-plot-series")}),U=new si(this.ctx,x);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,o=U.getLogSeries(o),this.yRatio=U.getLogYRatios(this.yRatio);for(var $=[],q=0;q<o.length;q++){o=this.lineHelpers.sameValueSeriesFix(q,o);var ne=x.globals.comboCharts?h[q]:q;this._initSerieVariables(o,q,ne);var de=[],ge=[],we=[],me=x.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,ne),x.globals.isXNumeric&&x.globals.seriesX.length>0&&(me=(x.globals.seriesX[ne][0]-x.globals.minX)/this.xRatio),we.push(me);var Se,N=me,Q=void 0,pe=N,xe=this.zeroY,Le=this.zeroY;xe=this.lineHelpers.determineFirstPrevY({i:q,series:o,prevY:xe,lineYPosition:0}).prevY,de.push("monotonCubic"===x.config.stroke.curve&&null===o[q][0]?null:xe),Se=xe,"rangeArea"===I&&(Q=Le=this.lineHelpers.determineFirstPrevY({i:q,series:_,prevY:Le,lineYPosition:0}).prevY,ge.push(Le));var Ze={type:I,series:o,realIndex:ne,i:q,x:me,y:1,pX:N,pY:Se,pathsFrom:this._calculatePathsFrom({type:I,series:o,i:q,realIndex:ne,prevX:pe,prevY:xe,prevY2:Le}),linePaths:[],areaPaths:[],seriesIndex:h,lineYPosition:0,xArrj:we,yArrj:de,y2Arrj:ge,seriesRangeEnd:_},kt=this._iterateOverDataPoints(Fe(Fe({},Ze),{},{iterations:"rangeArea"===I?o[q].length-1:void 0,isRangeStart:!0}));if("rangeArea"===I){var It=this._calculatePathsFrom({series:_,i:q,realIndex:ne,prevX:pe,prevY:Le}),ii=this._iterateOverDataPoints(Fe(Fe({},Ze),{},{series:_,pY:Q,pathsFrom:It,iterations:_[q].length-1,isRangeStart:!1}));kt.linePaths[0]=ii.linePath+kt.linePath,kt.pathFromLine=ii.pathFromLine+kt.pathFromLine}this._handlePaths({type:I,realIndex:ne,i:q,paths:kt}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),$.push(this.elSeries)}if(void 0!==(null===(b=x.config.series[0])||void 0===b?void 0:b.zIndex)&&$.sort(function(dn,En){return Number(dn.node.getAttribute("zIndex"))-Number(En.node.getAttribute("zIndex"))}),x.config.chart.stacked)for(var wi=$.length;wi>0;wi--)F.add($[wi-1]);else for(var Mi=0;Mi<$.length;Mi++)F.add($[Mi]);return F}},{key:"_initSerieVariables",value:function(o,c,h){var _=this.w,b=new at(this.ctx);this.xDivision=_.globals.gridWidth/(_.globals.dataPoints-("on"===_.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(_.config.stroke.width)?_.config.stroke.width[h]:_.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=h),this.isReversed=_.config.yaxis[this.yaxisIndex]&&_.config.yaxis[this.yaxisIndex].reversed,this.zeroY=_.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?_.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>_.globals.gridHeight||"end"===_.config.plotOptions.area.fillTo)&&(this.areaBottomY=_.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=b.group({class:"apexcharts-series",zIndex:void 0!==_.config.series[h].zIndex?_.config.series[h].zIndex:h,seriesName:We.escapeString(_.globals.seriesNames[h])}),this.elPointsMain=b.group({class:"apexcharts-series-markers-wrap","data:realIndex":h}),this.elDataLabelsWrap=b.group({class:"apexcharts-datalabels","data:realIndex":h}),this.elSeries.attr({"data:longestSeries":o[c].length===_.globals.dataPoints,rel:c+1,"data:realIndex":h}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(o){var c,h,_,b,x=o.type,M=o.series,I=o.i,F=o.realIndex,U=o.prevX,$=o.prevY,q=o.prevY2,ne=this.w,de=new at(this.ctx);if(null===M[I][0]){for(var ge=0;ge<M[I].length;ge++)if(null!==M[I][ge]){c=de.move(U=this.xDivision*ge,$=this.zeroY-M[I][ge]/this.yRatio[this.yaxisIndex]),h=de.move(U,this.areaBottomY);break}}else c=de.move(U,$),"rangeArea"===x&&(c=de.move(U,q)+de.line(U,$)),h=de.move(U,this.areaBottomY)+de.line(U,$);if(_=de.move(-1,this.zeroY)+de.line(-1,this.zeroY),b=de.move(-1,this.zeroY)+de.line(-1,this.zeroY),ne.globals.previousPaths.length>0){var we=this.lineHelpers.checkPreviousPaths({pathFromLine:_,pathFromArea:b,realIndex:F});_=we.pathFromLine,b=we.pathFromArea}return{prevX:U,prevY:$,linePath:c,areaPath:h,pathFromLine:_,pathFromArea:b}}},{key:"_handlePaths",value:function(o){var c=o.type,h=o.realIndex,_=o.i,b=o.paths,x=this.w,M=new at(this.ctx),I=new Bi(this.ctx);this.prevSeriesY.push(b.yArrj),x.globals.seriesXvalues[h]=b.xArrj,x.globals.seriesYvalues[h]=b.yArrj;var F=x.config.forecastDataPoints;if(F.count>0&&"rangeArea"!==c){var U=x.globals.seriesXvalues[h][x.globals.seriesXvalues[h].length-F.count-1],$=M.drawRect(U,0,x.globals.gridWidth,x.globals.gridHeight,0);x.globals.dom.elForecastMask.appendChild($.node);var q=M.drawRect(0,0,U,x.globals.gridHeight,0);x.globals.dom.elNonForecastMask.appendChild(q.node)}this.pointsChart||x.globals.delayedElements.push({el:this.elPointsMain.node,index:h});var ne={i:_,realIndex:h,animationDelay:_,initialSpeed:x.config.chart.animations.speed,dataChangeSpeed:x.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(c)};if("area"===c)for(var de=I.fillPath({seriesNumber:h}),ge=0;ge<b.areaPaths.length;ge++){var we=M.renderPaths(Fe(Fe({},ne),{},{pathFrom:b.pathFromArea,pathTo:b.areaPaths[ge],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:de}));this.elSeries.add(we)}if(x.config.stroke.show&&!this.pointsChart){var me=null;if("line"===c)me=I.fillPath({seriesNumber:h,i:_});else if("solid"===x.config.stroke.fill.type)me=x.globals.stroke.colors[h];else{var Se=x.config.fill;x.config.fill=x.config.stroke.fill,me=I.fillPath({seriesNumber:h,i:_}),x.config.fill=Se}for(var N=0;N<b.linePaths.length;N++){var Q=me;"rangeArea"===c&&(Q=I.fillPath({seriesNumber:h}));var pe=Fe(Fe({},ne),{},{pathFrom:b.pathFromLine,pathTo:b.linePaths[N],stroke:me,strokeWidth:this.strokeWidth,strokeLineCap:x.config.stroke.lineCap,fill:"rangeArea"===c?Q:"none"}),xe=M.renderPaths(pe);if(this.elSeries.add(xe),xe.attr("fill-rule","evenodd"),F.count>0&&"rangeArea"!==c){var Le=M.renderPaths(pe);Le.node.setAttribute("stroke-dasharray",F.dashArray),F.strokeWidth&&Le.node.setAttribute("stroke-width",F.strokeWidth),this.elSeries.add(Le),Le.attr("clip-path","url(#forecastMask".concat(x.globals.cuid,")")),xe.attr("clip-path","url(#nonForecastMask".concat(x.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(o){var c,h=this,_=o.type,b=o.series,x=o.iterations,M=o.realIndex,I=o.i,F=o.x,U=o.y,$=o.pX,q=o.pY,ne=o.pathsFrom,de=o.linePaths,ge=o.areaPaths,we=o.seriesIndex,me=o.lineYPosition,Se=o.xArrj,N=o.yArrj,Q=o.y2Arrj,pe=o.isRangeStart,xe=o.seriesRangeEnd,Le=this.w,Ze=new at(this.ctx),kt=this.yRatio,It=ne.prevY,ii=ne.linePath,wi=ne.areaPath,Mi=ne.pathFromLine,dn=ne.pathFromArea,En=We.isNumber(Le.globals.minYArr[M])?Le.globals.minYArr[M]:Le.globals.minY;x||(x=Le.globals.dataPoints>1?Le.globals.dataPoints-1:Le.globals.dataPoints);for(var Fn=function(qn,as){return as-qn/kt[h.yaxisIndex]+2*(h.isReversed?qn/kt[h.yaxisIndex]:0)},Jn=U,ar=Le.config.chart.stacked&&!Le.globals.comboCharts||Le.config.chart.stacked&&Le.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(c=this.w.config.series[M])||void 0===c?void 0:c.type)),lr=0;lr<x;lr++){var Lr=null==b[I][lr+1];if(Le.globals.isXNumeric){var Hr=Le.globals.seriesX[M][lr+1];void 0===Le.globals.seriesX[M][lr+1]&&(Hr=Le.globals.seriesX[M][x-1]),F=(Hr-Le.globals.minX)/this.xRatio}else F+=this.xDivision;me=ar&&I>0&&Le.globals.collapsedSeries.length<Le.config.series.length-1?this.prevSeriesY[function(qn){for(var as=qn,$n=0;$n<Le.globals.series.length;$n++)if(Le.globals.collapsedSeriesIndices.indexOf(qn)>-1){as--;break}return as>=0?as:0}(I-1)][lr+1]:this.zeroY,Lr?U=Fn(En,me):(U=Fn(b[I][lr+1],me),"rangeArea"===_&&(Jn=Fn(xe[I][lr+1],me))),Se.push(F),N.push(Lr&&"smooth"===Le.config.stroke.curve?null:U),Q.push(Jn);var Wr=this.lineHelpers.calculatePoints({series:b,x:F,y:U,realIndex:M,i:I,j:lr,prevY:It}),Mr=this._createPaths({type:_,series:b,i:I,realIndex:M,j:lr,x:F,y:U,y2:Jn,xArrj:Se,yArrj:N,y2Arrj:Q,pX:$,pY:q,linePath:ii,areaPath:wi,linePaths:de,areaPaths:ge,seriesIndex:we,isRangeStart:pe});ge=Mr.areaPaths,de=Mr.linePaths,$=Mr.pX,q=Mr.pY,wi=Mr.areaPath,ii=Mr.linePath,!this.appendPathFrom||"monotoneCubic"===Le.config.stroke.curve&&"rangeArea"===_||(Mi+=Ze.line(F,this.zeroY),dn+=Ze.line(F,this.zeroY)),this.handleNullDataPoints(b,Wr,I,lr,M),this._handleMarkersAndLabels({type:_,pointsPos:Wr,i:I,j:lr,realIndex:M,isRangeStart:pe})}return{yArrj:N,xArrj:Se,pathFromArea:dn,areaPaths:ge,pathFromLine:Mi,linePaths:de,linePath:ii,areaPath:wi}}},{key:"_handleMarkersAndLabels",value:function(o){var c=o.type,h=o.pointsPos,_=o.isRangeStart,b=o.i,x=o.j,M=o.realIndex,I=this.w,F=new Nn(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,x,{realIndex:M,pointsPos:h,zRatio:this.zRatio,elParent:this.elPointsMain});else{I.globals.series[b].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var U=this.markers.plotChartMarkers(h,M,x+1);null!==U&&this.elPointsMain.add(U)}var $=F.drawDataLabel({type:c,isRangeStart:_,pos:h,i:M,j:x+1});null!==$&&this.elDataLabelsWrap.add($)}},{key:"_createPaths",value:function(o){var c=o.type,h=o.series,_=o.i,b=o.realIndex,x=o.j,M=o.x,I=o.y,F=o.xArrj,U=o.yArrj,$=o.y2,q=o.y2Arrj,ne=o.pX,de=o.pY,ge=o.linePath,we=o.areaPath,me=o.linePaths,Se=o.areaPaths,N=o.seriesIndex,Q=o.isRangeStart,pe=this.w,xe=new at(this.ctx),Le=pe.config.stroke.curve,Ze=this.areaBottomY;if(Array.isArray(pe.config.stroke.curve)&&(Le=Array.isArray(N)?pe.config.stroke.curve[N[_]]:pe.config.stroke.curve[_]),"rangeArea"===c&&(pe.globals.hasNullValues||pe.config.forecastDataPoints.count>0)&&"monotoneCubic"===Le&&(Le="straight"),"monotoneCubic"===Le){var kt="rangeArea"===c?F.length===pe.globals.dataPoints:x===h[_].length-2,It=F.map(function(ar,lr){return[F[lr],U[lr]]}).filter(function(ar){return null!==ar[1]});if(kt&&It.length>1){var ii=ze(It);if(ge+=Xe(ii),null===h[_][0]?we=ge:we+=Xe(ii),"rangeArea"===c&&Q){ge+=xe.line(F[F.length-1],q[q.length-1]);var wi=F.slice().reverse(),Mi=q.slice().reverse(),dn=wi.map(function(ar,lr){return[wi[lr],Mi[lr]]}),En=ze(dn);we=ge+=Xe(En)}else we+=xe.line(It[It.length-1][0],Ze)+xe.line(It[0][0],Ze)+xe.move(It[0][0],It[0][1])+"z";me.push(ge),Se.push(we)}}else if("smooth"===Le){var Fn=.35*(M-ne);pe.globals.hasNullValues?(null!==h[_][x]&&(null!==h[_][x+1]?(ge=xe.move(ne,de)+xe.curve(ne+Fn,de,M-Fn,I,M+1,I),we=xe.move(ne+1,de)+xe.curve(ne+Fn,de,M-Fn,I,M+1,I)+xe.line(M,Ze)+xe.line(ne,Ze)+"z"):(ge=xe.move(ne,de),we=xe.move(ne,de)+"z")),me.push(ge),Se.push(we)):(ge+=xe.curve(ne+Fn,de,M-Fn,I,M,I),we+=xe.curve(ne+Fn,de,M-Fn,I,M,I)),ne=M,de=I,x===h[_].length-2&&(we=we+xe.curve(ne,de,M,I,M,Ze)+xe.move(M,I)+"z","rangeArea"===c&&Q?ge=ge+xe.curve(ne,de,M,I,M,$)+xe.move(M,$)+"z":pe.globals.hasNullValues||(me.push(ge),Se.push(we)))}else null===h[_][x+1]&&(ge+=xe.move(M,I),we=we+xe.line(pe.globals.isXNumeric?(pe.globals.seriesX[b][x]-pe.globals.minX)/this.xRatio:M-this.xDivision,Ze)+xe.move(M,I)+"z"),null===h[_][x]&&(ge+=xe.move(M,I),we+=xe.move(M,Ze)),"stepline"===Le?(ge=ge+xe.line(M,null,"H")+xe.line(null,I,"V"),we=we+xe.line(M,null,"H")+xe.line(null,I,"V")):"straight"===Le&&(ge+=xe.line(M,I),we+=xe.line(M,I)),x===h[_].length-2&&(we=we+xe.line(M,Ze)+xe.move(M,I)+"z","rangeArea"===c&&Q?ge=ge+xe.line(M,$)+xe.move(M,$)+"z":(me.push(ge),Se.push(we)));return{linePaths:me,areaPaths:Se,pX:ne,pY:de,linePath:ge,areaPath:we}}},{key:"handleNullDataPoints",value:function(o,c,h,_,b){var x=this.w;if(null===o[h][_]&&x.config.markers.showNullDataPoints||1===o[h].length){var M=this.markers.plotChartMarkers(c,b,_+1,this.strokeWidth-x.config.markers.strokeWidth/2,!0);null!==M&&this.elPointsMain.add(M)}}}]),le}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function le(M,I,F,U){this.xoffset=M,this.yoffset=I,this.height=U,this.width=F,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function($){var q,ne=[],de=this.xoffset,ge=this.yoffset,we=b($)/this.height,me=b($)/this.width;if(this.width>=this.height)for(q=0;q<$.length;q++)ne.push([de,ge,de+we,ge+$[q]/we]),ge+=$[q]/we;else for(q=0;q<$.length;q++)ne.push([de,ge,de+$[q]/me,ge+me]),de+=$[q]/me;return ne},this.cutArea=function($){var q;if(this.width>=this.height){var ne=$/this.height;q=new le(this.xoffset+ne,this.yoffset,this.width-ne,this.height)}else{var ge=$/this.width;q=new le(this.xoffset,this.yoffset+ge,this.width,this.height-ge)}return q}}function o(M,I,F,U,$){return U=void 0===U?0:U,$=void 0===$?0:$,function(ne){var de,ge,we=[];for(de=0;de<ne.length;de++)for(ge=0;ge<ne[de].length;ge++)we.push(ne[de][ge]);return we}(c(function(ne,de){var ge,we=[],me=de/b(ne);for(ge=0;ge<ne.length;ge++)we[ge]=ne[ge]*me;return we}(M,I*F),[],new le(U,$,I,F),[]))}function c(M,I,F,U){var $,q,ne,de,ge,we,me;if(0!==M.length)return $=F.shortestEdge(),ge=q=M[0],we=$,0===(de=I).length||((me=de.slice()).push(ge),h(de,we)>=h(me,we))?(I.push(q),c(M.slice(1),I,F,U)):(ne=F.cutArea(b(I),U),U.push(F.getCoordinates(I)),c(M,[],ne,U)),U;U.push(F.getCoordinates(I))}function h(M,I){var F=Math.min.apply(Math,M),U=Math.max.apply(Math,M),$=b(M);return Math.max(Math.pow(I,2)*U/Math.pow($,2),Math.pow($,2)/(Math.pow(I,2)*F))}function _(M){return M&&M.constructor===Array}function b(M){var I,F=0;for(I=0;I<M.length;I++)F+=M[I];return F}function x(M){var I,F=0;if(_(M[0]))for(I=0;I<M.length;I++)F+=x(M[I]);else F=b(M);return F}return function M(I,F,U,$,q){$=void 0===$?0:$,q=void 0===q?0:q;var ne,de,ge=[],we=[];if(_(I[0])){for(de=0;de<I.length;de++)ge[de]=x(I[de]);for(ne=o(ge,F,U,$,q),de=0;de<I.length;de++)we.push(M(I[de],ne[de][2]-ne[de][0],ne[de][3]-ne[de][1],ne[de][0],ne[de][1]))}else we=o(I,F,U,$,q);return we}}();var Yt,xi,pi=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new pt(o),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Me(le,[{key:"draw",value:function(o){var c=this,h=this.w,_=new at(this.ctx),b=new Bi(this.ctx),x=_.group({class:"apexcharts-treemap"});if(h.globals.noData)return x;var M=[];return o.forEach(function(I){var F=I.map(function(U){return Math.abs(U)});M.push(F)}),this.negRange=this.helpers.checkColorRange(),h.config.series.forEach(function(I,F){I.data.forEach(function(U){Array.isArray(c.labels[F])||(c.labels[F]=[]),c.labels[F].push(U.x)})}),window.TreemapSquared.generate(M,h.globals.gridWidth,h.globals.gridHeight).forEach(function(I,F){var U=_.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:We.escapeString(h.globals.seriesNames[F]),rel:F+1,"data:realIndex":F});if(h.config.chart.dropShadow.enabled){var $=h.config.chart.dropShadow;new li(c.ctx).dropShadow(x,$,F)}var q=_.group({class:"apexcharts-data-labels"});I.forEach(function(ne,de){var ge=ne[0],we=ne[1],me=ne[2],Se=ne[3],N=_.drawRect(ge,we,me-ge,Se-we,h.config.plotOptions.treemap.borderRadius,"#fff",1,c.strokeWidth,h.config.plotOptions.treemap.useFillColorAsStroke?pe:h.globals.stroke.colors[F]);N.attr({cx:ge,cy:we,index:F,i:F,j:de,width:me-ge,height:Se-we});var Q=c.helpers.getShadeColor(h.config.chart.type,F,de,c.negRange),pe=Q.color;void 0!==h.config.series[F].data[de]&&h.config.series[F].data[de].fillColor&&(pe=h.config.series[F].data[de].fillColor);var xe=b.fillPath({color:pe,seriesNumber:F,dataPointIndex:de});N.node.classList.add("apexcharts-treemap-rect"),N.attr({fill:xe}),c.helpers.addListeners(N);var Le={x:ge+(me-ge)/2,y:we+(Se-we)/2,width:0,height:0},Ze={x:ge,y:we,width:me-ge,height:Se-we};if(h.config.chart.animations.enabled&&!h.globals.dataChanged){var kt=1;h.globals.resized||(kt=h.config.chart.animations.speed),c.animateTreemap(N,Le,Ze,kt)}h.globals.dataChanged&&c.dynamicAnim.enabled&&h.globals.shouldAnimate&&(h.globals.previousPaths[F]&&h.globals.previousPaths[F][de]&&h.globals.previousPaths[F][de].rect&&(Le=h.globals.previousPaths[F][de].rect),c.animateTreemap(N,Le,Ze,c.dynamicAnim.speed));var ii=c.getFontSize(ne),wi=h.config.dataLabels.formatter(c.labels[F][de],{value:h.globals.series[F][de],seriesIndex:F,dataPointIndex:de,w:h});"truncate"===h.config.plotOptions.treemap.dataLabels.format&&(ii=parseInt(h.config.dataLabels.style.fontSize,10),wi=c.truncateLabels(wi,ii,ge,we,me,Se));var Mi=c.helpers.calculateDataLabels({text:wi,x:(ge+me)/2,y:(we+Se)/2+c.strokeWidth/2+ii/3,i:F,j:de,colorProps:Q,fontSize:ii,series:o});h.config.dataLabels.enabled&&Mi&&c.rotateToFitLabel(Mi,ii,wi,ge,we,me,Se),U.add(N),null!==Mi&&U.add(Mi)}),U.add(q),x.add(U)}),x}},{key:"getFontSize",value:function(o){var x,c=this.w,M=function I(F){var U,$=0;if(Array.isArray(F[0]))for(U=0;U<F.length;U++)$+=I(F[U]);else for(U=0;U<F.length;U++)$+=F[U].length;return $}(this.labels)/function I(F){var U,$=0;if(Array.isArray(F[0]))for(U=0;U<F.length;U++)$+=I(F[U]);else for(U=0;U<F.length;U++)$+=1;return $}(this.labels);return x=Math.pow((o[2]-o[0])*(o[3]-o[1]),.5),Math.min(x/M,parseInt(c.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(o,c,h,_,b,x,M){var I=new at(this.ctx),F=I.getTextRects(h,c);if(F.width+this.w.config.stroke.width+5>x-_&&F.width<=M-b){var U=I.rotateAroundCenter(o.node);o.node.setAttribute("transform","rotate(-90 ".concat(U.x," ").concat(U.y,") translate(").concat(F.height/3,")"))}}},{key:"truncateLabels",value:function(o,c,h,_,b,x){var M=new at(this.ctx),I=M.getTextRects(o,c).width+this.w.config.stroke.width+5>b-h&&x-_>b-h?x-_:b-h,F=M.getTextBasedOnMaxWidth({text:o,maxWidth:I,fontSize:c});return o.length!==F.length&&I/c<5?"":F}},{key:"animateTreemap",value:function(o,c,h,_){var b=new ni(this.ctx);b.animateRect(o,{x:c.x,y:c.y,width:c.width,height:c.height},{x:h.x,y:h.y,width:h.width,height:h.height},_,function(){b.animationCompleted(o)})}}]),le}(),rt=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Me(le,[{key:"calculateTimeScaleTicks",value:function(o,c){var h=this,_=this.w;if(_.globals.allSeriesCollapsed)return _.globals.labels=[],_.globals.timescaleLabels=[],[];var b=new _i(this.ctx),x=(c-o)/864e5;this.determineInterval(x),_.globals.disableZoomIn=!1,_.globals.disableZoomOut=!1,x<.00011574074074074075?_.globals.disableZoomIn=!0:x>5e4&&(_.globals.disableZoomOut=!0);var M=b.getTimeUnitsfromTimestamp(o,c,this.utc),I=_.globals.gridWidth/x,F=I/24,U=F/60,$=U/60,q=Math.floor(24*x),ne=Math.floor(1440*x),de=Math.floor(86400*x),ge=Math.floor(x),we=Math.floor(x/30),me=Math.floor(x/365),Se={minMillisecond:M.minMillisecond,minSecond:M.minSecond,minMinute:M.minMinute,minHour:M.minHour,minDate:M.minDate,minMonth:M.minMonth,minYear:M.minYear},N={firstVal:Se,currentMillisecond:Se.minMillisecond,currentSecond:Se.minSecond,currentMinute:Se.minMinute,currentHour:Se.minHour,currentMonthDate:Se.minDate,currentDate:Se.minDate,currentMonth:Se.minMonth,currentYear:Se.minYear,daysWidthOnXAxis:I,hoursWidthOnXAxis:F,minutesWidthOnXAxis:U,secondsWidthOnXAxis:$,numberOfSeconds:de,numberOfMinutes:ne,numberOfHours:q,numberOfDays:ge,numberOfMonths:we,numberOfYears:me};switch(this.tickInterval){case"years":this.generateYearScale(N);break;case"months":case"half_year":this.generateMonthScale(N);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(N);break;case"hours":this.generateHourScale(N);break;case"minutes_fives":case"minutes":this.generateMinuteScale(N);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(N)}var Q=this.timeScaleArray.map(function(pe){var xe={position:pe.position,unit:pe.unit,year:pe.year,day:pe.day?pe.day:1,hour:pe.hour?pe.hour:0,month:pe.month+1};return"month"===pe.unit?Fe(Fe({},xe),{},{day:1,value:pe.value+1}):"day"===pe.unit||"hour"===pe.unit?Fe(Fe({},xe),{},{value:pe.value}):"minute"===pe.unit?Fe(Fe({},xe),{},{value:pe.value,minute:pe.value}):"second"===pe.unit?Fe(Fe({},xe),{},{value:pe.value,minute:pe.minute,second:pe.second}):pe});return Q.filter(function(pe){var xe=1,Le=Math.ceil(_.globals.gridWidth/120),Ze=pe.value;void 0!==_.config.xaxis.tickAmount&&(Le=_.config.xaxis.tickAmount),Q.length>Le&&(xe=Math.floor(Q.length/Le));var kt=!1,It=!1;switch(h.tickInterval){case"years":"year"===pe.unit&&(kt=!0);break;case"half_year":xe=7,"year"===pe.unit&&(kt=!0);break;case"months":xe=1,"year"===pe.unit&&(kt=!0);break;case"months_fortnight":xe=15,"year"!==pe.unit&&"month"!==pe.unit||(kt=!0),30===Ze&&(It=!0);break;case"months_days":xe=10,"month"===pe.unit&&(kt=!0),30===Ze&&(It=!0);break;case"week_days":xe=8,"month"===pe.unit&&(kt=!0);break;case"days":xe=1,"month"===pe.unit&&(kt=!0);break;case"hours":"day"===pe.unit&&(kt=!0);break;case"minutes_fives":case"seconds_fives":Ze%5!=0&&(It=!0);break;case"seconds_tens":Ze%10!=0&&(It=!0)}if("hours"===h.tickInterval||"minutes_fives"===h.tickInterval||"seconds_tens"===h.tickInterval||"seconds_fives"===h.tickInterval){if(!It)return!0}else if((Ze%xe==0||kt)&&!It)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(o,c){var h=this.w,_=this.formatDates(o),b=this.removeOverlappingTS(_);h.globals.timescaleLabels=b.slice(),new Tn(this.ctx).plotCoords()}},{key:"determineInterval",value:function(o){var c=24*o,h=60*c;switch(!0){case o/365>5:this.tickInterval="years";break;case o>800:this.tickInterval="half_year";break;case o>180:this.tickInterval="months";break;case o>90:this.tickInterval="months_fortnight";break;case o>60:this.tickInterval="months_days";break;case o>30:this.tickInterval="week_days";break;case o>2:this.tickInterval="days";break;case c>2.4:this.tickInterval="hours";break;case h>15:this.tickInterval="minutes_fives";break;case h>5:this.tickInterval="minutes";break;case h>1:this.tickInterval="seconds_tens";break;case 60*h>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(o){var c=o.firstVal,h=o.currentMonth,_=o.currentYear,b=o.daysWidthOnXAxis,x=o.numberOfYears,M=c.minYear,I=0,F=new _i(this.ctx),U="year";if(c.minDate>1||c.minMonth>0){var $=F.determineRemainingDaysOfYear(c.minYear,c.minMonth,c.minDate);I=(F.determineDaysOfYear(c.minYear)-$+1)*b,this.timeScaleArray.push({position:I,value:M=c.minYear+1,unit:U,year:M,month:We.monthMod(h+1)})}else 1===c.minDate&&0===c.minMonth&&this.timeScaleArray.push({position:I,value:M,unit:U,year:_,month:We.monthMod(h+1)});for(var q=M,ne=I,de=0;de<x;de++)q++,ne=F.determineDaysOfYear(q-1)*b+ne,this.timeScaleArray.push({position:ne,value:q,unit:U,year:q,month:1})}},{key:"generateMonthScale",value:function(o){var c=o.firstVal,h=o.currentMonthDate,_=o.currentMonth,b=o.currentYear,x=o.daysWidthOnXAxis,M=o.numberOfMonths,I=_,F=0,U=new _i(this.ctx),$="month",q=0;if(c.minDate>1){F=(U.determineDaysOfMonths(_+1,c.minYear)-h+1)*x,I=We.monthMod(_+1);var ne=b+q,de=We.monthMod(I),ge=I;0===I&&($="year",ge=ne,de=1,ne+=q+=1),this.timeScaleArray.push({position:F,value:ge,unit:$,year:ne,month:de})}else this.timeScaleArray.push({position:F,value:I,unit:$,year:b,month:We.monthMod(_)});for(var we=I+1,me=F,Se=0,N=1;Se<M;Se++,N++){0===(we=We.monthMod(we))?($="year",q+=1):$="month";var Q=this._getYear(b,we,q);me=U.determineDaysOfMonths(we,Q)*x+me,this.timeScaleArray.push({position:me,value:0===we?Q:we,unit:$,year:Q,month:0===we?1:we}),we++}}},{key:"generateDayScale",value:function(o){var c=o.firstVal,h=o.currentMonth,_=o.currentYear,b=o.hoursWidthOnXAxis,x=o.numberOfDays,M=new _i(this.ctx),I="day",F=c.minDate+1,U=F,$=function(N,Q,pe){return N>M.determineDaysOfMonths(Q+1,pe)&&(U=1,I="month",ne=Q+=1),Q},q=(24-c.minHour)*b,ne=F,de=$(U,h,_);0===c.minHour&&1===c.minDate?(q=0,ne=We.monthMod(c.minMonth),I="month",U=c.minDate):1!==c.minDate&&0===c.minHour&&0===c.minMinute&&(q=0,ne=F=c.minDate,de=$(U=F,h,_)),this.timeScaleArray.push({position:q,value:ne,unit:I,year:this._getYear(_,de,0),month:We.monthMod(de),day:U});for(var ge=q,we=0;we<x;we++){I="day",de=$(U+=1,de,this._getYear(_,de,0));var me=this._getYear(_,de,0);ge=24*b+ge;var Se=1===U?We.monthMod(de):U;this.timeScaleArray.push({position:ge,value:Se,unit:I,year:me,month:We.monthMod(de),day:Se})}}},{key:"generateHourScale",value:function(o){var c=o.firstVal,h=o.currentDate,_=o.currentMonth,b=o.currentYear,x=o.minutesWidthOnXAxis,M=o.numberOfHours,I=new _i(this.ctx),F="hour",U=function(xe,Le){return xe>I.determineDaysOfMonths(Le+1,b)&&(we=1,Le+=1),{month:Le,date:we}},$=function(xe,Le){return xe>I.determineDaysOfMonths(Le+1,b)?Le+=1:Le},q=60-(c.minMinute+c.minSecond/60),ne=q*x,de=c.minHour+1,ge=de;60===q&&(ne=0,ge=de=c.minHour);var we=h;ge>=24&&(ge=0,we+=1,F="day");var me=U(we,_).month;me=$(we,me),this.timeScaleArray.push({position:ne,value:de,unit:F,day:we,hour:ge,year:b,month:We.monthMod(me)}),ge++;for(var Se=ne,N=0;N<M;N++){F="hour",ge>=24&&(ge=0,F="day",me=U(we+=1,me).month,me=$(we,me));var Q=this._getYear(b,me,0);this.timeScaleArray.push({position:Se=60*x+Se,value:0===ge?we:ge,unit:F,hour:ge,day:we,year:Q,month:We.monthMod(me)}),ge++}}},{key:"generateMinuteScale",value:function(o){for(var F=o.minutesWidthOnXAxis,$=o.numberOfMinutes,q=o.currentMinute+1,ne=o.currentDate,de=o.currentMonth,ge=o.currentYear,we=o.currentHour,me=(60-o.currentSecond-o.currentMillisecond/1e3)*o.secondsWidthOnXAxis,Se=0;Se<$;Se++)q>=60&&(q=0,24===(we+=1)&&(we=0)),this.timeScaleArray.push({position:me,value:q,unit:"minute",hour:we,minute:q,day:ne,year:this._getYear(ge,de,0),month:We.monthMod(de)}),me+=F,q++}},{key:"generateSecondScale",value:function(o){for(var F=o.secondsWidthOnXAxis,U=o.numberOfSeconds,$=o.currentSecond+1,q=o.currentMinute,ne=o.currentDate,de=o.currentMonth,ge=o.currentYear,we=o.currentHour,me=(1e3-o.currentMillisecond)/1e3*F,Se=0;Se<U;Se++)$>=60&&($=0,++q>=60&&(q=0,24==++we&&(we=0))),this.timeScaleArray.push({position:me,value:$,unit:"second",hour:we,minute:q,second:$,day:ne,year:this._getYear(ge,de,0),month:We.monthMod(de)}),me+=F,$++}},{key:"createRawDateString",value:function(o,c){var h=o.year;return 0===o.month&&(o.month=1),h+="-"+("0"+o.month.toString()).slice(-2),h+="day"===o.unit?"day"===o.unit?"-"+("0"+c).slice(-2):"-01":"-"+("0"+(o.day?o.day:"1")).slice(-2),h+="hour"===o.unit?"hour"===o.unit?"T"+("0"+c).slice(-2):"T00":"T"+("0"+(o.hour?o.hour:"0")).slice(-2),h+="minute"===o.unit?":"+("0"+c).slice(-2):":"+(o.minute?("0"+o.minute).slice(-2):"00"),h+="second"===o.unit?":"+("0"+c).slice(-2):":00",this.utc&&(h+=".000Z"),h}},{key:"formatDates",value:function(o){var c=this,h=this.w;return o.map(function(_){var b=_.value.toString(),x=new _i(c.ctx),M=c.createRawDateString(_,b),I=x.getDate(x.parseDate(M));if(c.utc||(I=x.getDate(x.parseDateWithTimezone(M))),void 0===h.config.xaxis.labels.format){var F="dd MMM",U=h.config.xaxis.labels.datetimeFormatter;"year"===_.unit&&(F=U.year),"month"===_.unit&&(F=U.month),"day"===_.unit&&(F=U.day),"hour"===_.unit&&(F=U.hour),"minute"===_.unit&&(F=U.minute),"second"===_.unit&&(F=U.second),b=x.formatDate(I,F)}else b=x.formatDate(I,h.config.xaxis.labels.format);return{dateString:M,position:_.position,value:b,unit:_.unit,year:_.year,month:_.month}})}},{key:"removeOverlappingTS",value:function(o){var c,h=this,_=new at(this.ctx),b=!1;o.length>0&&o[0].value&&o.every(function(I){return I.value.length===o[0].value.length})&&(b=!0,c=_.getTextRects(o[0].value).width);var x=0;return o.map(function(I,F){if(F>0&&h.w.config.xaxis.labels.hideOverlappingLabels){var U=b?c:_.getTextRects(o[x].value).width;return I.position>o[x].position+U+10?(x=F,I):null}return I}).filter(function(I){return null!==I})}},{key:"_getYear",value:function(o,c,h){return o+Math.floor(c/12)+h}}]),le}(),yt=function(){function le(o,c){V(this,le),this.ctx=c,this.w=c.w,this.el=o}return Me(le,[{key:"setupElements",value:function(){var o=this.w.globals,c=this.w.config,h=c.chart.type;o.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(h)>-1,o.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(h)>-1,o.isBarHorizontal=("bar"===c.chart.type||"rangeBar"===c.chart.type||"boxPlot"===c.chart.type)&&c.plotOptions.bar.horizontal,o.chartClass=".apexcharts"+o.chartID,o.dom.baseEl=this.el,o.dom.elWrap=document.createElement("div"),at.setAttrs(o.dom.elWrap,{id:o.chartClass.substring(1),class:"apexcharts-canvas "+o.chartClass.substring(1)}),this.el.appendChild(o.dom.elWrap),o.dom.Paper=new window.SVG.Doc(o.dom.elWrap),o.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(c.chart.offsetX,", ").concat(c.chart.offsetY,")")}),o.dom.Paper.node.style.background="dark"!==c.theme.mode||c.chart.background?c.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),o.dom.elLegendForeign=document.createElementNS(o.SVGNS,"foreignObject"),at.setAttrs(o.dom.elLegendForeign,{x:0,y:0,width:o.svgWidth,height:o.svgHeight}),o.dom.elLegendWrap=document.createElement("div"),o.dom.elLegendWrap.classList.add("apexcharts-legend"),o.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),o.dom.elLegendForeign.appendChild(o.dom.elLegendWrap),o.dom.Paper.node.appendChild(o.dom.elLegendForeign),o.dom.elGraphical=o.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),o.dom.elDefs=o.dom.Paper.defs(),o.dom.Paper.add(o.dom.elGraphical),o.dom.elGraphical.add(o.dom.elDefs)}},{key:"plotChartType",value:function(o,c){var h=this.w,_=h.config,b=h.globals,x={series:[],i:[]},M={series:[],i:[]},I={series:[],i:[]},F={series:[],i:[]},U={series:[],i:[]},$={series:[],i:[]},q={series:[],i:[]},ne={series:[],i:[]},de={series:[],seriesRangeEnd:[],i:[]};b.series.map(function(Le,Ze){var kt=0;void 0!==o[Ze].type?("column"===o[Ze].type||"bar"===o[Ze].type?(b.series.length>1&&_.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),U.series.push(Le),U.i.push(Ze),kt++,h.globals.columnSeries=U.series):"area"===o[Ze].type?(M.series.push(Le),M.i.push(Ze),kt++):"line"===o[Ze].type?(x.series.push(Le),x.i.push(Ze),kt++):"scatter"===o[Ze].type?(I.series.push(Le),I.i.push(Ze)):"bubble"===o[Ze].type?(F.series.push(Le),F.i.push(Ze),kt++):"candlestick"===o[Ze].type?($.series.push(Le),$.i.push(Ze),kt++):"boxPlot"===o[Ze].type?(q.series.push(Le),q.i.push(Ze),kt++):"rangeBar"===o[Ze].type?(ne.series.push(Le),ne.i.push(Ze),kt++):"rangeArea"===o[Ze].type?(de.series.push(b.seriesRangeStart[Ze]),de.seriesRangeEnd.push(b.seriesRangeEnd[Ze]),de.i.push(Ze),kt++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),kt>1&&(b.comboCharts=!0)):(x.series.push(Le),x.i.push(Ze))});var ge=new ft(this.ctx,c),we=new Jt(this.ctx,c);this.ctx.pie=new Ui(this.ctx);var me=new un(this.ctx);this.ctx.rangeBar=new Et(this.ctx,c);var Se=new di(this.ctx),N=[];if(b.comboCharts){if(M.series.length>0&&N.push(ge.draw(M.series,"area",M.i)),U.series.length>0)if(h.config.chart.stacked){var Q=new Kt(this.ctx,c);N.push(Q.draw(U.series,U.i))}else this.ctx.bar=new zt(this.ctx,c),N.push(this.ctx.bar.draw(U.series,U.i));if(de.series.length>0&&N.push(ge.draw(de.series,"rangeArea",de.i,de.seriesRangeEnd)),x.series.length>0&&N.push(ge.draw(x.series,"line",x.i)),$.series.length>0&&N.push(we.draw($.series,"candlestick",$.i)),q.series.length>0&&N.push(we.draw(q.series,"boxPlot",q.i)),ne.series.length>0&&N.push(this.ctx.rangeBar.draw(ne.series,ne.i)),I.series.length>0){var pe=new ft(this.ctx,c,!0);N.push(pe.draw(I.series,"scatter",I.i))}if(F.series.length>0){var xe=new ft(this.ctx,c,!0);N.push(xe.draw(F.series,"bubble",F.i))}}else switch(_.chart.type){case"line":N=ge.draw(b.series,"line");break;case"area":N=ge.draw(b.series,"area");break;case"bar":_.chart.stacked?N=new Kt(this.ctx,c).draw(b.series):(this.ctx.bar=new zt(this.ctx,c),N=this.ctx.bar.draw(b.series));break;case"candlestick":N=new Jt(this.ctx,c).draw(b.series,"candlestick");break;case"boxPlot":N=new Jt(this.ctx,c).draw(b.series,_.chart.type);break;case"rangeBar":N=this.ctx.rangeBar.draw(b.series);break;case"rangeArea":N=ge.draw(b.seriesRangeStart,"rangeArea",void 0,b.seriesRangeEnd);break;case"heatmap":N=new ui(this.ctx,c).draw(b.series);break;case"treemap":N=new pi(this.ctx,c).draw(b.series);break;case"pie":case"donut":case"polarArea":N=this.ctx.pie.draw(b.series);break;case"radialBar":N=me.draw(b.series);break;case"radar":N=Se.draw(b.series);break;default:N=ge.draw(b.series)}return N}},{key:"setSVGDimensions",value:function(){var o=this.w.globals,c=this.w.config;o.svgWidth=c.chart.width,o.svgHeight=c.chart.height;var h=We.getDimensions(this.el),_=c.chart.width.toString().split(/[0-9]+/g).pop();"%"===_?We.isNumber(h[0])&&(0===h[0].width&&(h=We.getDimensions(this.el.parentNode)),o.svgWidth=h[0]*parseInt(c.chart.width,10)/100):"px"!==_&&""!==_||(o.svgWidth=parseInt(c.chart.width,10));var b=c.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==o.svgHeight&&""!==o.svgHeight)if("%"===b){var x=We.getDimensions(this.el.parentNode);o.svgHeight=x[1]*parseInt(c.chart.height,10)/100}else o.svgHeight=parseInt(c.chart.height,10);else o.svgHeight=o.axisCharts?o.svgWidth/1.61:o.svgWidth/1.2;o.svgWidth<0&&(o.svgWidth=0),o.svgHeight<0&&(o.svgHeight=0),at.setAttrs(o.dom.Paper.node,{width:o.svgWidth,height:o.svgHeight}),"%"!==b&&(o.dom.Paper.node.parentNode.parentNode.style.minHeight=o.svgHeight+(c.chart.sparkline.enabled?0:o.axisCharts?c.chart.parentHeightOffset:0)+"px"),o.dom.elWrap.style.width=o.svgWidth+"px",o.dom.elWrap.style.height=o.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var o=this.w.globals;at.setAttrs(o.dom.elGraphical.node,{transform:"translate("+o.translateX+", "+o.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var o=this.w,c=o.globals,h=0,_=o.config.chart.sparkline.enabled?1:15;_+=o.config.grid.padding.bottom,"top"!==o.config.legend.position&&"bottom"!==o.config.legend.position||!o.config.legend.show||o.config.legend.floating||(h=new Rr(this.ctx).legendHelpers.getLegendBBox().clwh+10);var b=o.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),x=2.05*o.globals.radialSize;if(b&&!o.config.chart.sparkline.enabled&&0!==o.config.plotOptions.radialBar.startAngle){var M=We.getBoundingClientRect(b);x=M.bottom,x=Math.max(2.05*o.globals.radialSize,M.bottom-M.top)}var F=x+c.translateY+h+_;c.dom.elLegendForeign&&c.dom.elLegendForeign.setAttribute("height",F),o.config.chart.height&&String(o.config.chart.height).indexOf("%")>0||(c.dom.elWrap.style.height=F+"px",at.setAttrs(c.dom.Paper.node,{height:F}),c.dom.Paper.node.parentNode.parentNode.style.minHeight=F+"px")}},{key:"coreCalculations",value:function(){new _n(this.ctx).init()}},{key:"resetGlobals",value:function(){var o=this,c=function(){return o.w.config.series.map(function(b){return[]})},h=new Vn,_=this.w.globals;h.initGlobalVars(_),_.seriesXvalues=c(),_.seriesYvalues=c()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var o=null,c=this.w;if(c.globals.axisCharts){if("back"===c.config.xaxis.crosshairs.position&&new Ti(this.ctx).drawXCrosshairs(),"back"===c.config.yaxis[0].crosshairs.position&&new Ti(this.ctx).drawYCrosshairs(),"datetime"===c.config.xaxis.type&&void 0===c.config.xaxis.labels.formatter){this.ctx.timeScale=new rt(this.ctx);var h=[];isFinite(c.globals.minX)&&isFinite(c.globals.maxX)&&!c.globals.isBarHorizontal?h=this.ctx.timeScale.calculateTimeScaleTicks(c.globals.minX,c.globals.maxX):c.globals.isBarHorizontal&&(h=this.ctx.timeScale.calculateTimeScaleTicks(c.globals.minY,c.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(h)}o=new si(this.ctx).getCalculatedRatios()}return o}},{key:"updateSourceChart",value:function(o){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:o.w.globals.minX,max:o.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var o=this,c=this.w;if(c.config.chart.brush.enabled&&"function"!=typeof c.config.chart.events.selection){var h=Array.isArray(c.config.chart.brush.targets)?c.config.chart.brush.targets:[c.config.chart.brush.target];h.forEach(function(_){var b=ApexCharts.getChartByID(_);b.w.globals.brushSource=o.ctx,"function"!=typeof b.w.config.chart.events.zoomed&&(b.w.config.chart.events.zoomed=function(){o.updateSourceChart(b)}),"function"!=typeof b.w.config.chart.events.scrolled&&(b.w.config.chart.events.scrolled=function(){o.updateSourceChart(b)})}),c.config.chart.events.selection=function(_,b){h.forEach(function(x){ApexCharts.getChartByID(x).ctx.updateHelpers._updateOptions({xaxis:{min:b.xaxis.min,max:b.xaxis.max}},!1,!1,!1,!1)})}}}}]),le}(),fe=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"_updateOptions",value:function(o){var c=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],b=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],x=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(M){var I=[c.ctx];b&&(I=c.ctx.getSyncedCharts()),c.ctx.w.globals.isExecCalled&&(I=[c.ctx],c.ctx.w.globals.isExecCalled=!1),I.forEach(function(F,U){var $=F.w;if($.globals.shouldAnimate=_,h||($.globals.resized=!0,$.globals.dataChanged=!0,_&&F.series.getPreviousPaths()),o&&"object"===t(o)&&(F.config=new mn(o),o=si.extendArrayProps(F.config,o,$),F.w.globals.chartID!==c.ctx.w.globals.chartID&&delete o.series,$.config=We.extend($.config,o),x&&($.globals.lastXAxis=o.xaxis?We.clone(o.xaxis):[],$.globals.lastYAxis=o.yaxis?We.clone(o.yaxis):[],$.globals.initialConfig=We.extend({},$.config),$.globals.initialSeries=We.clone($.config.series),o.series))){for(var q=0;q<$.globals.collapsedSeriesIndices.length;q++){var ne=$.config.series[$.globals.collapsedSeriesIndices[q]];$.globals.collapsedSeries[q].data=$.globals.axisCharts?ne.data.slice():ne}for(var de=0;de<$.globals.ancillaryCollapsedSeriesIndices.length;de++){var ge=$.config.series[$.globals.ancillaryCollapsedSeriesIndices[de]];$.globals.ancillaryCollapsedSeries[de].data=$.globals.axisCharts?ge.data.slice():ge}F.series.emptyCollapsedSeries($.config.series)}return F.update(o).then(function(){U===I.length-1&&M(F)})})})}},{key:"_updateSeries",value:function(o,c){var h=this,_=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(b){var x,M=h.w;return M.globals.shouldAnimate=c,M.globals.dataChanged=!0,c&&h.ctx.series.getPreviousPaths(),M.globals.axisCharts?(0===(x=o.map(function(I,F){return h._extendSeries(I,F)})).length&&(x=[{data:[]}]),M.config.series=x):M.config.series=o.slice(),_&&(M.globals.initialConfig.series=We.clone(M.config.series),M.globals.initialSeries=We.clone(M.config.series)),h.ctx.update().then(function(){b(h.ctx)})})}},{key:"_extendSeries",value:function(o,c){var h=this.w,_=h.config.series[c];return Fe(Fe({},h.config.series[c]),{},{name:o.name?o.name:_?.name,color:o.color?o.color:_?.color,type:o.type?o.type:_?.type,group:o.group?o.group:_?.group,data:o.data?o.data:_?.data,zIndex:void 0!==o.zIndex?o.zIndex:c})}},{key:"toggleDataPointSelection",value:function(o,c){var h=this.w,_=null,b=".apexcharts-series[data\\:realIndex='".concat(o,"']");return h.globals.axisCharts?_=h.globals.dom.Paper.select("".concat(b," path[j='").concat(c,"'], ").concat(b," circle[j='").concat(c,"'], ").concat(b," rect[j='").concat(c,"']")).members[0]:void 0===c&&(_=h.globals.dom.Paper.select("".concat(b," path[j='").concat(o,"']")).members[0],"pie"!==h.config.chart.type&&"polarArea"!==h.config.chart.type&&"donut"!==h.config.chart.type||this.ctx.pie.pieClicked(o)),_?(new at(this.ctx).pathMouseDown(_,null),_.node?_.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(o){var c=this.w;if(["min","max"].forEach(function(_){void 0!==o.xaxis[_]&&(c.config.xaxis[_]=o.xaxis[_],c.globals.lastXAxis[_]=o.xaxis[_])}),o.xaxis.categories&&o.xaxis.categories.length&&(c.config.xaxis.categories=o.xaxis.categories),c.config.xaxis.convertedCatToNumeric){var h=new xn(o);o=h.convertCatToNumericXaxis(o,this.ctx)}return o}},{key:"forceYAxisUpdate",value:function(o){return o.chart&&o.chart.stacked&&"100%"===o.chart.stackType&&(Array.isArray(o.yaxis)?o.yaxis.forEach(function(c,h){o.yaxis[h].min=0,o.yaxis[h].max=100}):(o.yaxis.min=0,o.yaxis.max=100)),o}},{key:"revertDefaultAxisMinMax",value:function(o){var c=this,h=this.w,_=h.globals.lastXAxis,b=h.globals.lastYAxis;o&&o.xaxis&&(_=o.xaxis),o&&o.yaxis&&(b=o.yaxis),h.config.xaxis.min=_.min,h.config.xaxis.max=_.max,h.config.yaxis.map(function(M,I){h.globals.zoomed||void 0!==b[I]?function(M){void 0!==b[M]&&(h.config.yaxis[M].min=b[M].min,h.config.yaxis[M].max=b[M].max)}(I):void 0!==c.ctx.opts.yaxis[I]&&(M.min=c.ctx.opts.yaxis[I].min,M.max=c.ctx.opts.yaxis[I].max)})}}]),le}();Yt=typeof window<"u"?window:void 0,xi=function(le,o){var c=(void 0!==this?this:le).SVG=function(N){if(c.supported)return N=new c.Doc(N),c.parser.draw||c.prepare(),N};if(c.ns="http://www.w3.org/2000/svg",c.xmlns="http://www.w3.org/2000/xmlns/",c.xlink="http://www.w3.org/1999/xlink",c.svgjs="http://svgjs.dev",c.supported=!0,!c.supported)return!1;c.did=1e3,c.eid=function(N){return"Svgjs"+U(N)+c.did++},c.create=function(N){var Q=o.createElementNS(this.ns,N);return Q.setAttribute("id",this.eid(N)),Q},c.extend=function(){var N,Q;Q=(N=[].slice.call(arguments)).pop();for(var pe=N.length-1;pe>=0;pe--)if(N[pe])for(var xe in Q)N[pe].prototype[xe]=Q[xe];c.Set&&c.Set.inherit&&c.Set.inherit()},c.invent=function(N){var Q="function"==typeof N.create?N.create:function(){this.constructor.call(this,c.create(N.create))};return N.inherit&&(Q.prototype=new N.inherit),N.extend&&c.extend(Q,N.extend),N.construct&&c.extend(N.parent||c.Container,N.construct),Q},c.adopt=function(N){return N?N.instance?N.instance:((Q="svg"==N.nodeName?N.parentNode instanceof le.SVGElement?new c.Nested:new c.Doc:"linearGradient"==N.nodeName?new c.Gradient("linear"):"radialGradient"==N.nodeName?new c.Gradient("radial"):c[U(N.nodeName)]?new(c[U(N.nodeName)]):new c.Element(N)).type=N.nodeName,Q.node=N,N.instance=Q,Q instanceof c.Doc&&Q.namespace().defs(),Q.setData(JSON.parse(N.getAttribute("svgjs:data"))||{}),Q):null;var Q},c.prepare=function(){var N=o.getElementsByTagName("body")[0],Q=(N?new c.Doc(N):c.adopt(o.documentElement).nested()).size(2,0);c.parser={body:N||o.documentElement,draw:Q.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:Q.polyline().node,path:Q.path().node,native:c.create("svg")}},c.parser={native:c.create("svg")},o.addEventListener("DOMContentLoaded",function(){c.parser.draw||c.prepare()},!1),c.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},c.utils={map:function(N,Q){for(var pe=N.length,xe=[],Le=0;Le<pe;Le++)xe.push(Q(N[Le]));return xe},filter:function(N,Q){for(var pe=N.length,xe=[],Le=0;Le<pe;Le++)Q(N[Le])&&xe.push(N[Le]);return xe},filterSVGElements:function(N){return this.filter(N,function(Q){return Q instanceof le.SVGElement})}},c.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},c.Color=function(N){var Q,pe;this.r=0,this.g=0,this.b=0,N&&("string"==typeof N?c.regex.isRgb.test(N)?(Q=c.regex.rgb.exec(N.replace(c.regex.whitespace,"")),this.r=parseInt(Q[1]),this.g=parseInt(Q[2]),this.b=parseInt(Q[3])):c.regex.isHex.test(N)&&(Q=c.regex.hex.exec(4==(pe=N).length?["#",pe.substring(1,2),pe.substring(1,2),pe.substring(2,3),pe.substring(2,3),pe.substring(3,4),pe.substring(3,4)].join(""):pe),this.r=parseInt(Q[1],16),this.g=parseInt(Q[2],16),this.b=parseInt(Q[3],16)):"object"===t(N)&&(this.r=N.r,this.g=N.g,this.b=N.b))},c.extend(c.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+$(this.r)+$(this.g)+$(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(N){return this.destination=new c.Color(N),this},at:function(N){return this.destination?new c.Color({r:~~(this.r+(this.destination.r-this.r)*(N=N<0?0:N>1?1:N)),g:~~(this.g+(this.destination.g-this.g)*N),b:~~(this.b+(this.destination.b-this.b)*N)}):this}}),c.Color.test=function(N){return c.regex.isHex.test(N+="")||c.regex.isRgb.test(N)},c.Color.isRgb=function(N){return N&&"number"==typeof N.r&&"number"==typeof N.g&&"number"==typeof N.b},c.Color.isColor=function(N){return c.Color.isRgb(N)||c.Color.test(N)},c.Array=function(N,Q){0==(N=(N||[]).valueOf()).length&&Q&&(N=Q.valueOf()),this.value=this.parse(N)},c.extend(c.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(N){return N=N.valueOf(),Array.isArray(N)?N:this.split(N)}}),c.PointArray=function(N,Q){c.Array.call(this,N,Q||[[0,0]])},c.PointArray.prototype=new c.Array,c.PointArray.prototype.constructor=c.PointArray;for(var h={M:function(N,Q,pe){return Q.x=pe.x=N[0],Q.y=pe.y=N[1],["M",Q.x,Q.y]},L:function(N,Q){return Q.x=N[0],Q.y=N[1],["L",N[0],N[1]]},H:function(N,Q){return Q.x=N[0],["H",N[0]]},V:function(N,Q){return Q.y=N[0],["V",N[0]]},C:function(N,Q){return Q.x=N[4],Q.y=N[5],["C",N[0],N[1],N[2],N[3],N[4],N[5]]},Q:function(N,Q){return Q.x=N[2],Q.y=N[3],["Q",N[0],N[1],N[2],N[3]]},S:function(N,Q){return Q.x=N[2],Q.y=N[3],["S",N[0],N[1],N[2],N[3]]},Z:function(N,Q,pe){return Q.x=pe.x,Q.y=pe.y,["Z"]}},_="mlhvqtcsaz".split(""),b=0,x=_.length;b<x;++b)h[_[b]]=function(N){return function(Q,pe,xe){if("H"==N)Q[0]=Q[0]+pe.x;else if("V"==N)Q[0]=Q[0]+pe.y;else if("A"==N)Q[5]=Q[5]+pe.x,Q[6]=Q[6]+pe.y;else for(var Le=0,Ze=Q.length;Le<Ze;++Le)Q[Le]=Q[Le]+(Le%2?pe.y:pe.x);if(h&&"function"==typeof h[N])return h[N](Q,pe,xe)}}(_[b].toUpperCase());c.PathArray=function(N,Q){c.Array.call(this,N,Q||[["M",0,0]])},c.PathArray.prototype=new c.Array,c.PathArray.prototype.constructor=c.PathArray,c.extend(c.PathArray,{toString:function(){return function(N){for(var Q=0,pe=N.length,xe="";Q<pe;Q++)xe+=N[Q][0],null!=N[Q][1]&&(xe+=N[Q][1],null!=N[Q][2]&&(xe+=" ",xe+=N[Q][2],null!=N[Q][3]&&(xe+=" ",xe+=N[Q][3],xe+=" ",xe+=N[Q][4],null!=N[Q][5]&&(xe+=" ",xe+=N[Q][5],xe+=" ",xe+=N[Q][6],null!=N[Q][7]&&(xe+=" ",xe+=N[Q][7])))));return xe+" "}(this.value)},move:function(N,Q){return this.bbox(),this},at:function(N){if(!this.destination)return this;for(var Q=this.value,pe=this.destination.value,xe=[],Le=new c.PathArray,Ze=0,kt=Q.length;Ze<kt;Ze++){xe[Ze]=[Q[Ze][0]];for(var It=1,ii=Q[Ze].length;It<ii;It++)xe[Ze][It]=Q[Ze][It]+(pe[Ze][It]-Q[Ze][It])*N;"A"===xe[Ze][0]&&(xe[Ze][4]=+(0!=xe[Ze][4]),xe[Ze][5]=+(0!=xe[Ze][5]))}return Le.value=xe,Le},parse:function(N){if(N instanceof c.PathArray)return N.valueOf();var Q,pe={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};N="string"==typeof N?N.replace(c.regex.numbersWithDots,I).replace(c.regex.pathLetters," $& ").replace(c.regex.hyphen,"$1 -").trim().split(c.regex.delimiter):N.reduce(function(ii,wi){return[].concat.call(ii,wi)},[]);var xe=[],Le=new c.Point,Ze=new c.Point,kt=0,It=N.length;do{c.regex.isPathLetter.test(N[kt])?(Q=N[kt],++kt):"M"==Q?Q="L":"m"==Q&&(Q="l"),xe.push(h[Q].call(null,N.slice(kt,kt+=pe[Q.toUpperCase()]).map(parseFloat),Le,Ze))}while(It>kt);return xe},bbox:function(){return c.parser.draw||c.prepare(),c.parser.path.setAttribute("d",this.toString()),c.parser.path.getBBox()}}),c.Number=c.invent({create:function(N,Q){this.value=0,this.unit=Q||"","number"==typeof N?this.value=isNaN(N)?0:isFinite(N)?N:N<0?-34e37:34e37:"string"==typeof N?(Q=N.match(c.regex.numberAndUnit))&&(this.value=parseFloat(Q[1]),"%"==Q[5]?this.value/=100:"s"==Q[5]&&(this.value*=1e3),this.unit=Q[5]):N instanceof c.Number&&(this.value=N.valueOf(),this.unit=N.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(N){return N=new c.Number(N),new c.Number(this+N,this.unit||N.unit)},minus:function(N){return N=new c.Number(N),new c.Number(this-N,this.unit||N.unit)},times:function(N){return N=new c.Number(N),new c.Number(this*N,this.unit||N.unit)},divide:function(N){return N=new c.Number(N),new c.Number(this/N,this.unit||N.unit)},to:function(N){var Q=new c.Number(this);return"string"==typeof N&&(Q.unit=N),Q},morph:function(N){return this.destination=new c.Number(N),N.relative&&(this.destination.value+=this.value),this},at:function(N){return this.destination?new c.Number(this.destination).minus(this).times(N).plus(this):this}}}),c.Element=c.invent({create:function(N){this._stroke=c.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=N)&&(this.type=N.nodeName,this.node.instance=this,this._stroke=N.getAttribute("stroke")||this._stroke)},extend:{x:function(N){return this.attr("x",N)},y:function(N){return this.attr("y",N)},cx:function(N){return null==N?this.x()+this.width()/2:this.x(N-this.width()/2)},cy:function(N){return null==N?this.y()+this.height()/2:this.y(N-this.height()/2)},move:function(N,Q){return this.x(N).y(Q)},center:function(N,Q){return this.cx(N).cy(Q)},width:function(N){return this.attr("width",N)},height:function(N){return this.attr("height",N)},size:function(N,Q){var pe=q(this,N,Q);return this.width(new c.Number(pe.width)).height(new c.Number(pe.height))},clone:function(N){this.writeDataToDom();var Q=ge(this.node.cloneNode(!0));return N?N.add(Q):this.after(Q),Q},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(N){return this.after(N).remove(),N},addTo:function(N){return N.put(this)},putIn:function(N){return N.add(this)},id:function(N){return this.attr("id",N)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var N=this.attr("class");return null==N?[]:N.trim().split(c.regex.delimiter)},hasClass:function(N){return-1!=this.classes().indexOf(N)},addClass:function(N){if(!this.hasClass(N)){var Q=this.classes();Q.push(N),this.attr("class",Q.join(" "))}return this},removeClass:function(N){return this.hasClass(N)&&this.attr("class",this.classes().filter(function(Q){return Q!=N}).join(" ")),this},toggleClass:function(N){return this.hasClass(N)?this.removeClass(N):this.addClass(N)},reference:function(N){return c.get(this.attr(N))},parent:function(N){var Q=this;if(!Q.node.parentNode)return null;if(Q=c.adopt(Q.node.parentNode),!N)return Q;for(;Q&&Q.node instanceof le.SVGElement;){if("string"==typeof N?Q.matches(N):Q instanceof N)return Q;if(!Q.node.parentNode||"#document"==Q.node.parentNode.nodeName)return null;Q=c.adopt(Q.node.parentNode)}},doc:function(){return this instanceof c.Doc?this:this.parent(c.Doc)},parents:function(N){var Q=[],pe=this;do{if(!(pe=pe.parent(N))||!pe.node)break;Q.push(pe)}while(pe.parent);return Q},matches:function(N){return((Q=this.node).matches||Q.matchesSelector||Q.msMatchesSelector||Q.mozMatchesSelector||Q.webkitMatchesSelector||Q.oMatchesSelector).call(Q,N);var Q},native:function(){return this.node},svg:function(N){var Q=o.createElement("svg");if(!(N&&this instanceof c.Parent))return Q.appendChild(N=o.createElement("svg")),this.writeDataToDom(),N.appendChild(this.node.cloneNode(!0)),Q.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");Q.innerHTML="<svg>"+N.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var pe=0,xe=Q.firstChild.childNodes.length;pe<xe;pe++)this.node.appendChild(Q.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(N){return this.dom=N,this},is:function(N){return this instanceof N}}}),c.easing={"-":function(N){return N},"<>":function(N){return-Math.cos(N*Math.PI)/2+.5},">":function(N){return Math.sin(N*Math.PI/2)},"<":function(N){return 1-Math.cos(N*Math.PI/2)}},c.morph=function(N){return function(Q,pe){return new c.MorphObj(Q,pe).at(N)}},c.Situation=c.invent({create:function(N){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new c.Number(N.duration).valueOf(),this.delay=new c.Number(N.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=N.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),c.FX=c.invent({create:function(N){this._target=N,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(N,Q,pe){"object"===t(N)&&(Q=N.ease,pe=N.delay,N=N.duration);var xe=new c.Situation({duration:N||1e3,delay:pe||0,ease:c.easing[Q||"-"]||Q});return this.queue(xe),this},target:function(N){return N&&N instanceof c.Element?(this._target=N,this):this._target},timeToAbsPos:function(N){return(N-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(N){return this.situation.duration/this._speed*N+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=le.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){le.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(N){return("function"==typeof N||N instanceof c.Situation)&&this.situations.push(N),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof c.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var N,Q=this.situation;if(Q.init)return this;for(var pe in Q.animations){N=this.target()[pe](),Array.isArray(N)||(N=[N]),Array.isArray(Q.animations[pe])||(Q.animations[pe]=[Q.animations[pe]]);for(var xe=N.length;xe--;)Q.animations[pe][xe]instanceof c.Number&&(N[xe]=new c.Number(N[xe])),Q.animations[pe][xe]=N[xe].morph(Q.animations[pe][xe])}for(var pe in Q.attrs)Q.attrs[pe]=new c.MorphObj(this.target().attr(pe),Q.attrs[pe]);for(var pe in Q.styles)Q.styles[pe]=new c.MorphObj(this.target().style(pe),Q.styles[pe]);return Q.initialTransformation=this.target().matrixify(),Q.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(N,Q){var pe=this.active;return this.active=!1,Q&&this.clearQueue(),N&&this.situation&&(!pe&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(N){var Q=this.last();return this.target().on("finished.fx",function pe(xe){xe.detail.situation==Q&&(N.call(this,Q),this.off("finished.fx",pe))}),this._callStart()},during:function(N){var Q=this.last(),pe=function(xe){xe.detail.situation==Q&&N.call(this,xe.detail.pos,c.morph(xe.detail.pos),xe.detail.eased,Q)};return this.target().off("during.fx",pe).on("during.fx",pe),this.after(function(){this.off("during.fx",pe)}),this._callStart()},afterAll:function(N){var Q=function pe(xe){N.call(this),this.off("allfinished.fx",pe)};return this.target().off("allfinished.fx",Q).on("allfinished.fx",Q),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(N,Q,pe){return this.last()[pe||"animations"][N]=Q,this._callStart()},step:function(N){var Q,pe,xe;N||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(Q=Math.max(this.absPos,0),pe=Math.floor(Q),!0===this.situation.loops||pe<this.situation.loops?(this.pos=Q-pe,xe=this.situation.loop,this.situation.loop=pe):(this.absPos=this.situation.loops,this.pos=1,xe=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-xe)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Le=this.situation.ease(this.pos);for(var Ze in this.situation.once)Ze>this.lastPos&&Ze<=Le&&(this.situation.once[Ze].call(this.target(),this.pos,Le),delete this.situation.once[Ze]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Le,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Le,this):this},eachAt:function(){var N,Q=this,pe=this.target(),xe=this.situation;for(var Le in xe.animations)N=[].concat(xe.animations[Le]).map(function(It){return"string"!=typeof It&&It.at?It.at(xe.ease(Q.pos),Q.pos):It}),pe[Le].apply(pe,N);for(var Le in xe.attrs)N=[Le].concat(xe.attrs[Le]).map(function(ii){return"string"!=typeof ii&&ii.at?ii.at(xe.ease(Q.pos),Q.pos):ii}),pe.attr.apply(pe,N);for(var Le in xe.styles)N=[Le].concat(xe.styles[Le]).map(function(ii){return"string"!=typeof ii&&ii.at?ii.at(xe.ease(Q.pos),Q.pos):ii}),pe.style.apply(pe,N);if(xe.transforms.length){N=xe.initialTransformation,Le=0;for(var Ze=xe.transforms.length;Le<Ze;Le++){var kt=xe.transforms[Le];kt instanceof c.Matrix?N=kt.relative?N.multiply((new c.Matrix).morph(kt).at(xe.ease(this.pos))):N.morph(kt).at(xe.ease(this.pos)):(kt.relative||kt.undo(N.extract()),N=N.multiply(kt.at(xe.ease(this.pos))))}pe.matrix(N)}return this},once:function(N,Q,pe){var xe=this.last();return pe||(N=xe.ease(N)),xe.once[N]=Q,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:c.Element,construct:{animate:function(N,Q,pe){return(this.fx||(this.fx=new c.FX(this))).animate(N,Q,pe)},delay:function(N){return(this.fx||(this.fx=new c.FX(this))).delay(N)},stop:function(N,Q){return this.fx&&this.fx.stop(N,Q),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),c.MorphObj=c.invent({create:function(N,Q){return c.Color.isColor(Q)?new c.Color(N).morph(Q):c.regex.delimiter.test(N)?c.regex.pathLetters.test(N)?new c.PathArray(N).morph(Q):new c.Array(N).morph(Q):c.regex.numberAndUnit.test(Q)?new c.Number(N).morph(Q):(this.value=N,void(this.destination=Q))},extend:{at:function(N,Q){return Q<1?this.value:this.destination},valueOf:function(){return this.value}}}),c.extend(c.FX,{attr:function(N,Q,pe){if("object"===t(N))for(var xe in N)this.attr(xe,N[xe]);else this.add(N,Q,"attrs");return this},plot:function(N,Q,pe,xe){return 4==arguments.length?this.plot([N,Q,pe,xe]):this.add("plot",new(this.target().morphArray)(N))}}),c.Box=c.invent({create:function(N,Q,pe,xe){if(!("object"!==t(N)||N instanceof c.Element))return c.Box.call(this,null!=N.left?N.left:N.x,null!=N.top?N.top:N.y,N.width,N.height);var Le;4==arguments.length&&(this.x=N,this.y=Q,this.width=pe,this.height=xe),null==(Le=this).x&&(Le.x=0,Le.y=0,Le.width=0,Le.height=0),Le.w=Le.width,Le.h=Le.height,Le.x2=Le.x+Le.width,Le.y2=Le.y+Le.height,Le.cx=Le.x+Le.width/2,Le.cy=Le.y+Le.height/2}}),c.BBox=c.invent({create:function(N){if(c.Box.apply(this,[].slice.call(arguments)),N instanceof c.Element){var Q;try{if(!o.documentElement.contains){for(var pe=N.node;pe.parentNode;)pe=pe.parentNode;if(pe!=o)throw new Error("Element not in the dom")}Q=N.node.getBBox()}catch{if(N instanceof c.Shape){c.parser.draw||c.prepare();var xe=N.clone(c.parser.draw.instance).show();xe&&xe.node&&"function"==typeof xe.node.getBBox&&(Q=xe.node.getBBox()),xe&&"function"==typeof xe.remove&&xe.remove()}else Q={x:N.node.clientLeft,y:N.node.clientTop,width:N.node.clientWidth,height:N.node.clientHeight}}c.Box.call(this,Q)}},inherit:c.Box,parent:c.Element,construct:{bbox:function(){return new c.BBox(this)}}}),c.BBox.prototype.constructor=c.BBox,c.Matrix=c.invent({create:function(N){var Q=de([1,0,0,1,0,0]);N=null===N?Q:N instanceof c.Element?N.matrixify():"string"==typeof N?de(N.split(c.regex.delimiter).map(parseFloat)):6==arguments.length?de([].slice.call(arguments)):Array.isArray(N)?de(N):N&&"object"===t(N)?N:Q;for(var pe=me.length-1;pe>=0;--pe)this[me[pe]]=null!=N[me[pe]]?N[me[pe]]:Q[me[pe]]},extend:{extract:function(){var N=ne(this,0,1);ne(this,1,0);var Q=180/Math.PI*Math.atan2(N.y,N.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(Q*Math.PI/180)+this.f*Math.sin(Q*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(Q*Math.PI/180)+this.e*Math.sin(-Q*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:Q,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new c.Matrix(this)}},clone:function(){return new c.Matrix(this)},morph:function(N){return this.destination=new c.Matrix(N),this},multiply:function(N){return new c.Matrix(this.native().multiply((Q=N,Q instanceof c.Matrix||(Q=new c.Matrix(Q)),Q).native()));var Q},inverse:function(){return new c.Matrix(this.native().inverse())},translate:function(N,Q){return new c.Matrix(this.native().translate(N||0,Q||0))},native:function(){for(var N=c.parser.native.createSVGMatrix(),Q=me.length-1;Q>=0;Q--)N[me[Q]]=this[me[Q]];return N},toString:function(){return"matrix("+we(this.a)+","+we(this.b)+","+we(this.c)+","+we(this.d)+","+we(this.e)+","+we(this.f)+")"}},parent:c.Element,construct:{ctm:function(){return new c.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof c.Nested){var N=this.rect(1,1),Q=N.node.getScreenCTM();return N.remove(),new c.Matrix(Q)}return new c.Matrix(this.node.getScreenCTM())}}}),c.Point=c.invent({create:function(N,Q){var pe;pe=Array.isArray(N)?{x:N[0],y:N[1]}:"object"===t(N)?{x:N.x,y:N.y}:null!=N?{x:N,y:Q??N}:{x:0,y:0},this.x=pe.x,this.y=pe.y},extend:{clone:function(){return new c.Point(this)},morph:function(N,Q){return this.destination=new c.Point(N,Q),this}}}),c.extend(c.Element,{point:function(N,Q){return new c.Point(N,Q).transform(this.screenCTM().inverse())}}),c.extend(c.Element,{attr:function(N,Q,pe){if(null==N){for(N={},pe=(Q=this.node.attributes).length-1;pe>=0;pe--)N[Q[pe].nodeName]=c.regex.isNumber.test(Q[pe].nodeValue)?parseFloat(Q[pe].nodeValue):Q[pe].nodeValue;return N}if("object"===t(N))for(var xe in N)this.attr(xe,N[xe]);else if(null===Q)this.node.removeAttribute(N);else{if(null==Q)return null==(Q=this.node.getAttribute(N))?c.defaults.attrs[N]:c.regex.isNumber.test(Q)?parseFloat(Q):Q;"stroke-width"==N?this.attr("stroke",parseFloat(Q)>0?this._stroke:null):"stroke"==N&&(this._stroke=Q),"fill"!=N&&"stroke"!=N||(c.regex.isImage.test(Q)&&(Q=this.doc().defs().image(Q,0,0)),Q instanceof c.Image&&(Q=this.doc().defs().pattern(0,0,function(){this.add(Q)}))),"number"==typeof Q?Q=new c.Number(Q):c.Color.isColor(Q)?Q=new c.Color(Q):Array.isArray(Q)&&(Q=new c.Array(Q)),"leading"==N?this.leading&&this.leading(Q):"string"==typeof pe?this.node.setAttributeNS(pe,N,Q.toString()):this.node.setAttribute(N,Q.toString()),!this.rebuild||"font-size"!=N&&"x"!=N||this.rebuild(N,Q)}return this}}),c.extend(c.Element,{transform:function(N,Q){var pe;return"object"!==t(N)?(pe=new c.Matrix(this).extract(),"string"==typeof N?pe[N]:pe):(pe=new c.Matrix(this),Q=!!Q||!!N.relative,null!=N.a&&(pe=Q?pe.multiply(new c.Matrix(N)):new c.Matrix(N)),this.attr("transform",pe))}}),c.extend(c.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(c.regex.transforms).slice(0,-1).map(function(N){var Q=N.trim().split("(");return[Q[0],Q[1].split(c.regex.delimiter).map(function(pe){return parseFloat(pe)})]}).reduce(function(N,Q){return"matrix"==Q[0]?N.multiply(de(Q[1])):N[Q[0]].apply(N,Q[1])},new c.Matrix)},toParent:function(N){if(this==N)return this;var Q=this.screenCTM(),pe=N.screenCTM().inverse();return this.addTo(N).untransform().transform(pe.multiply(Q)),this},toDoc:function(){return this.toParent(this.doc())}}),c.Transformation=c.invent({create:function(N,Q){if(arguments.length>1&&"boolean"!=typeof Q)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(N))for(var pe=0,xe=this.arguments.length;pe<xe;++pe)this[this.arguments[pe]]=N[pe];else if(N&&"object"===t(N))for(pe=0,xe=this.arguments.length;pe<xe;++pe)this[this.arguments[pe]]=N[this.arguments[pe]];this.inversed=!1,!0===Q&&(this.inversed=!0)}}),c.Translate=c.invent({parent:c.Matrix,inherit:c.Transformation,create:function(N,Q){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),c.extend(c.Element,{style:function(N,Q){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===t(N))for(var pe in N)this.style(pe,N[pe]);else{if(!c.regex.isCss.test(N))return this.node.style[F(N)];for(N=N.split(/\s*;\s*/).filter(function(xe){return!!xe}).map(function(xe){return xe.split(/\s*:\s*/)});Q=N.pop();)this.style(Q[0],Q[1])}else this.node.style[F(N)]=null===Q||c.regex.isBlank.test(Q)?"":Q;return this}}),c.Parent=c.invent({create:function(N){this.constructor.call(this,N)},inherit:c.Element,extend:{children:function(){return c.utils.map(c.utils.filterSVGElements(this.node.childNodes),function(N){return c.adopt(N)})},add:function(N,Q){return null==Q?this.node.appendChild(N.node):N.node!=this.node.childNodes[Q]&&this.node.insertBefore(N.node,this.node.childNodes[Q]),this},put:function(N,Q){return this.add(N,Q),N},has:function(N){return this.index(N)>=0},index:function(N){return[].slice.call(this.node.childNodes).indexOf(N.node)},get:function(N){return c.adopt(this.node.childNodes[N])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(N,Q){for(var pe=this.children(),xe=0,Le=pe.length;xe<Le;xe++)pe[xe]instanceof c.Element&&N.apply(pe[xe],[xe,pe]),Q&&pe[xe]instanceof c.Container&&pe[xe].each(N,Q);return this},removeElement:function(N){return this.node.removeChild(N.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),c.extend(c.Parent,{ungroup:function(N,Q){return 0===Q||this instanceof c.Defs||this.node==c.parser.draw||(N=N||(this instanceof c.Doc?this:this.parent(c.Parent)),Q=Q||1/0,this.each(function(){return this instanceof c.Defs?this:this instanceof c.Parent?this.ungroup(N,Q-1):this.toParent(N)}),this.node.firstChild||this.remove()),this},flatten:function(N,Q){return this.ungroup(N,Q)}}),c.Container=c.invent({create:function(N){this.constructor.call(this,N)},inherit:c.Parent}),c.ViewBox=c.invent({parent:c.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(N){c.Element.prototype[N]=function(Q){return c.on(this.node,N,Q),this}}),c.listeners=[],c.handlerMap=[],c.listenerId=0,c.on=function(N,Q,pe,xe,Le){var Ze=pe.bind(xe||N.instance||N),kt=(c.handlerMap.indexOf(N)+1||c.handlerMap.push(N))-1,It=Q.split(".")[0],ii=Q.split(".")[1]||"*";c.listeners[kt]=c.listeners[kt]||{},c.listeners[kt][It]=c.listeners[kt][It]||{},c.listeners[kt][It][ii]=c.listeners[kt][It][ii]||{},pe._svgjsListenerId||(pe._svgjsListenerId=++c.listenerId),c.listeners[kt][It][ii][pe._svgjsListenerId]=Ze,N.addEventListener(It,Ze,Le||{passive:!1})},c.off=function(N,Q,pe){var xe=c.handlerMap.indexOf(N),Le=Q&&Q.split(".")[0],Ze=Q&&Q.split(".")[1],kt="";if(-1!=xe)if(pe){if("function"==typeof pe&&(pe=pe._svgjsListenerId),!pe)return;c.listeners[xe][Le]&&c.listeners[xe][Le][Ze||"*"]&&(N.removeEventListener(Le,c.listeners[xe][Le][Ze||"*"][pe],!1),delete c.listeners[xe][Le][Ze||"*"][pe])}else if(Ze&&Le){if(c.listeners[xe][Le]&&c.listeners[xe][Le][Ze]){for(var It in c.listeners[xe][Le][Ze])c.off(N,[Le,Ze].join("."),It);delete c.listeners[xe][Le][Ze]}}else if(Ze)for(var ii in c.listeners[xe])for(var kt in c.listeners[xe][ii])Ze===kt&&c.off(N,[ii,Ze].join("."));else if(Le){if(c.listeners[xe][Le]){for(var kt in c.listeners[xe][Le])c.off(N,[Le,kt].join("."));delete c.listeners[xe][Le]}}else{for(var ii in c.listeners[xe])c.off(N,ii);delete c.listeners[xe],delete c.handlerMap[xe]}},c.extend(c.Element,{on:function(N,Q,pe,xe){return c.on(this.node,N,Q,pe,xe),this},off:function(N,Q){return c.off(this.node,N,Q),this},fire:function(N,Q){return this.node.dispatchEvent(N instanceof le.Event?N:N=new c.CustomEvent(N,{detail:Q,cancelable:!0})),this._event=N,this},event:function(){return this._event}}),c.Defs=c.invent({create:"defs",inherit:c.Container}),c.G=c.invent({create:"g",inherit:c.Container,extend:{x:function(N){return null==N?this.transform("x"):this.transform({x:N-this.x()},!0)}},construct:{group:function(){return this.put(new c.G)}}}),c.Doc=c.invent({create:function(N){N&&("svg"==(N="string"==typeof N?o.getElementById(N):N).nodeName?this.constructor.call(this,N):(this.constructor.call(this,c.create("svg")),N.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:c.Container,extend:{namespace:function(){return this.attr({xmlns:c.ns,version:"1.1"}).attr("xmlns:xlink",c.xlink,c.xmlns).attr("xmlns:svgjs",c.svgjs,c.xmlns)},defs:function(){var N;return this._defs||(this._defs=(N=this.node.getElementsByTagName("defs")[0])?c.adopt(N):new c.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,c.parser.draw&&!c.parser.draw.parentNode&&this.node.appendChild(c.parser.draw),this},clone:function(N){this.writeDataToDom();var Q=this.node,pe=ge(Q.cloneNode(!0));return N?(N.node||N).appendChild(pe.node):Q.parentNode.insertBefore(pe.node,Q.nextSibling),pe}}}),c.extend(c.Element,{}),c.Gradient=c.invent({create:function(N){this.constructor.call(this,c.create(N+"Gradient")),this.type=N},inherit:c.Container,extend:{at:function(N,Q,pe){return this.put(new c.Stop).update(N,Q,pe)},update:function(N){return this.clear(),"function"==typeof N&&N.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(N,Q,pe){return"transform"==N&&(N="gradientTransform"),c.Container.prototype.attr.call(this,N,Q,pe)}},construct:{gradient:function(N,Q){return this.defs().gradient(N,Q)}}}),c.extend(c.Gradient,c.FX,{from:function(N,Q){return this.attr("radial"==(this._target||this).type?{fx:new c.Number(N),fy:new c.Number(Q)}:{x1:new c.Number(N),y1:new c.Number(Q)})},to:function(N,Q){return this.attr("radial"==(this._target||this).type?{cx:new c.Number(N),cy:new c.Number(Q)}:{x2:new c.Number(N),y2:new c.Number(Q)})}}),c.extend(c.Defs,{gradient:function(N,Q){return this.put(new c.Gradient(N)).update(Q)}}),c.Stop=c.invent({create:"stop",inherit:c.Element,extend:{update:function(N){return("number"==typeof N||N instanceof c.Number)&&(N={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=N.opacity&&this.attr("stop-opacity",N.opacity),null!=N.color&&this.attr("stop-color",N.color),null!=N.offset&&this.attr("offset",new c.Number(N.offset)),this}}}),c.Pattern=c.invent({create:"pattern",inherit:c.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(N){return this.clear(),"function"==typeof N&&N.call(this,this),this},toString:function(){return this.fill()},attr:function(N,Q,pe){return"transform"==N&&(N="patternTransform"),c.Container.prototype.attr.call(this,N,Q,pe)}},construct:{pattern:function(N,Q,pe){return this.defs().pattern(N,Q,pe)}}}),c.extend(c.Defs,{pattern:function(N,Q,pe){return this.put(new c.Pattern).update(pe).attr({x:0,y:0,width:N,height:Q,patternUnits:"userSpaceOnUse"})}}),c.Shape=c.invent({create:function(N){this.constructor.call(this,N)},inherit:c.Element}),c.Symbol=c.invent({create:"symbol",inherit:c.Container,construct:{symbol:function(){return this.put(new c.Symbol)}}}),c.Use=c.invent({create:"use",inherit:c.Shape,extend:{element:function(N,Q){return this.attr("href",(Q||"")+"#"+N,c.xlink)}},construct:{use:function(N,Q){return this.put(new c.Use).element(N,Q)}}}),c.Rect=c.invent({create:"rect",inherit:c.Shape,construct:{rect:function(N,Q){return this.put(new c.Rect).size(N,Q)}}}),c.Circle=c.invent({create:"circle",inherit:c.Shape,construct:{circle:function(N){return this.put(new c.Circle).rx(new c.Number(N).divide(2)).move(0,0)}}}),c.extend(c.Circle,c.FX,{rx:function(N){return this.attr("r",N)},ry:function(N){return this.rx(N)}}),c.Ellipse=c.invent({create:"ellipse",inherit:c.Shape,construct:{ellipse:function(N,Q){return this.put(new c.Ellipse).size(N,Q).move(0,0)}}}),c.extend(c.Ellipse,c.Rect,c.FX,{rx:function(N){return this.attr("rx",N)},ry:function(N){return this.attr("ry",N)}}),c.extend(c.Circle,c.Ellipse,{x:function(N){return null==N?this.cx()-this.rx():this.cx(N+this.rx())},y:function(N){return null==N?this.cy()-this.ry():this.cy(N+this.ry())},cx:function(N){return null==N?this.attr("cx"):this.attr("cx",N)},cy:function(N){return null==N?this.attr("cy"):this.attr("cy",N)},width:function(N){return null==N?2*this.rx():this.rx(new c.Number(N).divide(2))},height:function(N){return null==N?2*this.ry():this.ry(new c.Number(N).divide(2))},size:function(N,Q){var pe=q(this,N,Q);return this.rx(new c.Number(pe.width).divide(2)).ry(new c.Number(pe.height).divide(2))}}),c.Line=c.invent({create:"line",inherit:c.Shape,extend:{array:function(){return new c.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(N,Q,pe,xe){return null==N?this.array():(N=void 0!==Q?{x1:N,y1:Q,x2:pe,y2:xe}:new c.PointArray(N).toLine(),this.attr(N))},move:function(N,Q){return this.attr(this.array().move(N,Q).toLine())},size:function(N,Q){var pe=q(this,N,Q);return this.attr(this.array().size(pe.width,pe.height).toLine())}},construct:{line:function(N,Q,pe,xe){return c.Line.prototype.plot.apply(this.put(new c.Line),null!=N?[N,Q,pe,xe]:[0,0,0,0])}}}),c.Polyline=c.invent({create:"polyline",inherit:c.Shape,construct:{polyline:function(N){return this.put(new c.Polyline).plot(N||new c.PointArray)}}}),c.Polygon=c.invent({create:"polygon",inherit:c.Shape,construct:{polygon:function(N){return this.put(new c.Polygon).plot(N||new c.PointArray)}}}),c.extend(c.Polyline,c.Polygon,{array:function(){return this._array||(this._array=new c.PointArray(this.attr("points")))},plot:function(N){return null==N?this.array():this.clear().attr("points","string"==typeof N?N:this._array=new c.PointArray(N))},clear:function(){return delete this._array,this},move:function(N,Q){return this.attr("points",this.array().move(N,Q))},size:function(N,Q){var pe=q(this,N,Q);return this.attr("points",this.array().size(pe.width,pe.height))}}),c.extend(c.Line,c.Polyline,c.Polygon,{morphArray:c.PointArray,x:function(N){return null==N?this.bbox().x:this.move(N,this.bbox().y)},y:function(N){return null==N?this.bbox().y:this.move(this.bbox().x,N)},width:function(N){var Q=this.bbox();return null==N?Q.width:this.size(N,Q.height)},height:function(N){var Q=this.bbox();return null==N?Q.height:this.size(Q.width,N)}}),c.Path=c.invent({create:"path",inherit:c.Shape,extend:{morphArray:c.PathArray,array:function(){return this._array||(this._array=new c.PathArray(this.attr("d")))},plot:function(N){return null==N?this.array():this.clear().attr("d","string"==typeof N?N:this._array=new c.PathArray(N))},clear:function(){return delete this._array,this}},construct:{path:function(N){return this.put(new c.Path).plot(N||new c.PathArray)}}}),c.Image=c.invent({create:"image",inherit:c.Shape,extend:{load:function(N){if(!N)return this;var Q=this,pe=new le.Image;return c.on(pe,"load",function(){c.off(pe);var xe=Q.parent(c.Pattern);null!==xe&&(0==Q.width()&&0==Q.height()&&Q.size(pe.width,pe.height),xe&&0==xe.width()&&0==xe.height()&&xe.size(Q.width(),Q.height()),"function"==typeof Q._loaded&&Q._loaded.call(Q,{width:pe.width,height:pe.height,ratio:pe.width/pe.height,url:N}))}),c.on(pe,"error",function(xe){c.off(pe),"function"==typeof Q._error&&Q._error.call(Q,xe)}),this.attr("href",pe.src=this.src=N,c.xlink)},loaded:function(N){return this._loaded=N,this},error:function(N){return this._error=N,this}},construct:{image:function(N,Q,pe){return this.put(new c.Image).load(N).size(Q||0,pe||Q||0)}}}),c.Text=c.invent({create:function(){this.constructor.call(this,c.create("text")),this.dom.leading=new c.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",c.defaults.attrs["font-family"])},inherit:c.Shape,extend:{x:function(N){return null==N?this.attr("x"):this.attr("x",N)},text:function(N){if(void 0===N){N="";for(var Q=this.node.childNodes,pe=0,xe=Q.length;pe<xe;++pe)0!=pe&&3!=Q[pe].nodeType&&1==c.adopt(Q[pe]).dom.newLined&&(N+="\n"),N+=Q[pe].textContent;return N}if(this.clear().build(!0),"function"==typeof N)N.call(this,this);else{pe=0;for(var Le=(N=N.split("\n")).length;pe<Le;pe++)this.tspan(N[pe]).newLine()}return this.build(!1).rebuild()},size:function(N){return this.attr("font-size",N).rebuild()},leading:function(N){return null==N?this.dom.leading:(this.dom.leading=new c.Number(N),this.rebuild())},lines:function(){var N=(this.textPath&&this.textPath()||this).node,Q=c.utils.map(c.utils.filterSVGElements(N.childNodes),function(pe){return c.adopt(pe)});return new c.Set(Q)},rebuild:function(N){if("boolean"==typeof N&&(this._rebuild=N),this._rebuild){var Q=this,pe=0,xe=this.dom.leading*new c.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(Q.textPath()||this.attr("x",Q.attr("x")),"\n"==this.text()?pe+=xe:(this.attr("dy",xe+pe),pe=0))}),this.fire("rebuild")}return this},build:function(N){return this._build=!!N,this},setData:function(N){return this.dom=N,this.dom.leading=new c.Number(N.leading||1.3),this}},construct:{text:function(N){return this.put(new c.Text).text(N)},plain:function(N){return this.put(new c.Text).plain(N)}}}),c.Tspan=c.invent({create:"tspan",inherit:c.Shape,extend:{text:function(N){return null==N?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof N?N.call(this,this):this.plain(N),this)},dx:function(N){return this.attr("dx",N)},dy:function(N){return this.attr("dy",N)},newLine:function(){var N=this.parent(c.Text);return this.dom.newLined=!0,this.dy(N.dom.leading*N.attr("font-size")).attr("x",N.x())}}}),c.extend(c.Text,c.Tspan,{plain:function(N){return!1===this._build&&this.clear(),this.node.appendChild(o.createTextNode(N)),this},tspan:function(N){var Q=(this.textPath&&this.textPath()||this).node,pe=new c.Tspan;return!1===this._build&&this.clear(),Q.appendChild(pe.node),pe.text(N)},clear:function(){for(var N=(this.textPath&&this.textPath()||this).node;N.hasChildNodes();)N.removeChild(N.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),c.TextPath=c.invent({create:"textPath",inherit:c.Parent,parent:c.Text,construct:{morphArray:c.PathArray,array:function(){var N=this.track();return N?N.array():null},plot:function(N){var Q=this.track(),pe=null;return Q&&(pe=Q.plot(N)),null==N?pe:this},track:function(){var N=this.textPath();if(N)return N.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return c.adopt(this.node.firstChild)}}}),c.Nested=c.invent({create:function(){this.constructor.call(this,c.create("svg")),this.style("overflow","visible")},inherit:c.Container,construct:{nested:function(){return this.put(new c.Nested)}}});var M={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(N,Q){return"color"==Q?N:N+"-"+Q}};function I(N,Q,pe,xe){return pe+xe.replace(c.regex.dots," .")}function F(N){return N.toLowerCase().replace(/-(.)/g,function(Q,pe){return pe.toUpperCase()})}function U(N){return N.charAt(0).toUpperCase()+N.slice(1)}function $(N){var Q=N.toString(16);return 1==Q.length?"0"+Q:Q}function q(N,Q,pe){if(null==Q||null==pe){var xe=N.bbox();null==Q?Q=xe.width/xe.height*pe:null==pe&&(pe=xe.height/xe.width*Q)}return{width:Q,height:pe}}function ne(N,Q,pe){return{x:Q*N.a+pe*N.c+0,y:Q*N.b+pe*N.d+0}}function de(N){return{a:N[0],b:N[1],c:N[2],d:N[3],e:N[4],f:N[5]}}function ge(N){for(var Q=N.childNodes.length-1;Q>=0;Q--)N.childNodes[Q]instanceof le.SVGElement&&ge(N.childNodes[Q]);return c.adopt(N).id(c.eid(N.nodeName))}function we(N){return Math.abs(N)>1e-37?N:0}["fill","stroke"].forEach(function(N){var Q={};Q[N]=function(pe){if(void 0===pe)return this;if("string"==typeof pe||c.Color.isRgb(pe)||pe&&"function"==typeof pe.fill)this.attr(N,pe);else for(var xe=M[N].length-1;xe>=0;xe--)null!=pe[M[N][xe]]&&this.attr(M.prefix(N,M[N][xe]),pe[M[N][xe]]);return this},c.extend(c.Element,c.FX,Q)}),c.extend(c.Element,c.FX,{translate:function(N,Q){return this.transform({x:N,y:Q})},matrix:function(N){return this.attr("transform",new c.Matrix(6==arguments.length?[].slice.call(arguments):N))},opacity:function(N){return this.attr("opacity",N)},dx:function(N){return this.x(new c.Number(N).plus(this instanceof c.FX?0:this.x()),!0)},dy:function(N){return this.y(new c.Number(N).plus(this instanceof c.FX?0:this.y()),!0)}}),c.extend(c.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(N){return this.node.getPointAtLength(N)}}),c.Set=c.invent({create:function(N){Array.isArray(N)?this.members=N:this.clear()},extend:{add:function(){for(var N=[].slice.call(arguments),Q=0,pe=N.length;Q<pe;Q++)this.members.push(N[Q]);return this},remove:function(N){var Q=this.index(N);return Q>-1&&this.members.splice(Q,1),this},each:function(N){for(var Q=0,pe=this.members.length;Q<pe;Q++)N.apply(this.members[Q],[Q,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(N){return this.index(N)>=0},index:function(N){return this.members.indexOf(N)},get:function(N){return this.members[N]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(N){return new c.Set(N)}}}),c.FX.Set=c.invent({create:function(N){this.set=N}}),c.Set.inherit=function(){var N=[];for(var Q in c.Shape.prototype)"function"==typeof c.Shape.prototype[Q]&&"function"!=typeof c.Set.prototype[Q]&&N.push(Q);for(var Q in N.forEach(function(xe){c.Set.prototype[xe]=function(){for(var Le=0,Ze=this.members.length;Le<Ze;Le++)this.members[Le]&&"function"==typeof this.members[Le][xe]&&this.members[Le][xe].apply(this.members[Le],arguments);return"animate"==xe?this.fx||(this.fx=new c.FX.Set(this)):this}}),N=[],c.FX.prototype)"function"==typeof c.FX.prototype[Q]&&"function"!=typeof c.FX.Set.prototype[Q]&&N.push(Q);N.forEach(function(pe){c.FX.Set.prototype[pe]=function(){for(var xe=0,Le=this.set.members.length;xe<Le;xe++)this.set.members[xe].fx[pe].apply(this.set.members[xe].fx,arguments);return this}})},c.extend(c.Element,{}),c.extend(c.Element,{remember:function(N,Q){if("object"===t(arguments[0]))for(var pe in N)this.remember(pe,N[pe]);else{if(1==arguments.length)return this.memory()[N];this.memory()[N]=Q}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var N=arguments.length-1;N>=0;N--)delete this.memory()[arguments[N]];return this},memory:function(){return this._memory||(this._memory={})}}),c.get=function(N){var Q=o.getElementById(function(pe){var xe=(pe||"").toString().match(c.regex.reference);if(xe)return xe[1]}(N)||N);return c.adopt(Q)},c.select=function(N,Q){return new c.Set(c.utils.map((Q||o).querySelectorAll(N),function(pe){return c.adopt(pe)}))},c.extend(c.Parent,{select:function(N){return c.select(N,this.node)}});var me="abcdef".split("");if("function"!=typeof le.CustomEvent){var Se=function(N,Q){Q=Q||{bubbles:!1,cancelable:!1,detail:void 0};var pe=o.createEvent("CustomEvent");return pe.initCustomEvent(N,Q.bubbles,Q.cancelable,Q.detail),pe};Se.prototype=le.Event.prototype,c.CustomEvent=Se}else c.CustomEvent=le.CustomEvent;return c},void 0!==(k=function(){return xi(Yt,Yt.document)}.call(Yr,Rt,Yr,oo))&&(oo.exports=k),
/*! svg.filter.js - v2.0.2 - 2016-02-24
      * https://github.com/wout/svg.filter.js
      * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(x,M){return this.add(x,M),!x.attr("in")&&this.autoSetIn&&x.attr("in",this.source),x.attr("result")||x.attr("result",x),x},blend:function(x,M,I){return this.put(new SVG.BlendEffect(x,M,I))},colorMatrix:function(x,M){return this.put(new SVG.ColorMatrixEffect(x,M))},convolveMatrix:function(x){return this.put(new SVG.ConvolveMatrixEffect(x))},componentTransfer:function(x){return this.put(new SVG.ComponentTransferEffect(x))},composite:function(x,M,I){return this.put(new SVG.CompositeEffect(x,M,I))},flood:function(x,M){return this.put(new SVG.FloodEffect(x,M))},offset:function(x,M){return this.put(new SVG.OffsetEffect(x,M))},image:function(x){return this.put(new SVG.ImageEffect(x))},merge:function(){var x=[void 0];for(var M in arguments)x.push(arguments[M]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,x)))},gaussianBlur:function(x,M){return this.put(new SVG.GaussianBlurEffect(x,M))},morphology:function(x,M){return this.put(new SVG.MorphologyEffect(x,M))},diffuseLighting:function(x,M,I){return this.put(new SVG.DiffuseLightingEffect(x,M,I))},displacementMap:function(x,M,I,F,U){return this.put(new SVG.DisplacementMapEffect(x,M,I,F,U))},specularLighting:function(x,M,I,F){return this.put(new SVG.SpecularLightingEffect(x,M,I,F))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(x,M,I,F,U){return this.put(new SVG.TurbulenceEffect(x,M,I,F,U))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(x){var M=this.put(new SVG.Filter);return"function"==typeof x&&x.call(M,M),M}}),SVG.extend(SVG.Container,{filter:function(x){return this.defs().filter(x)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(x){return this.filterer=x instanceof SVG.Element?x:this.doc().filter(x),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(x){return this.filterer&&!0===x&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",x)},result:function(x){return null==x?this.attr("result"):this.attr("result",x)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",x)},result:function(x){return null==x?this.attr("result"):this.attr("result",x)},toString:function(){return this.result()}}});var le={blend:function(x,M){return this.parent()&&this.parent().blend(this,x,M)},colorMatrix:function(x,M){return this.parent()&&this.parent().colorMatrix(x,M).in(this)},convolveMatrix:function(x){return this.parent()&&this.parent().convolveMatrix(x).in(this)},componentTransfer:function(x){return this.parent()&&this.parent().componentTransfer(x).in(this)},composite:function(x,M){return this.parent()&&this.parent().composite(this,x,M)},flood:function(x,M){return this.parent()&&this.parent().flood(x,M)},offset:function(x,M){return this.parent()&&this.parent().offset(x,M).in(this)},image:function(x){return this.parent()&&this.parent().image(x)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(x,M){return this.parent()&&this.parent().gaussianBlur(x,M).in(this)},morphology:function(x,M){return this.parent()&&this.parent().morphology(x,M).in(this)},diffuseLighting:function(x,M,I){return this.parent()&&this.parent().diffuseLighting(x,M,I).in(this)},displacementMap:function(x,M,I,F){return this.parent()&&this.parent().displacementMap(this,x,M,I,F)},specularLighting:function(x,M,I,F){return this.parent()&&this.parent().specularLighting(x,M,I,F).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(x,M,I,F,U){return this.parent()&&this.parent().turbulence(x,M,I,F,U).in(this)}};SVG.extend(SVG.Effect,le),SVG.extend(SVG.ParentEffect,le),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(x){this.attr("in",x)}}});var o={blend:function(x,M,I){this.attr({in:x,in2:M,mode:I||"normal"})},colorMatrix:function(x,M){"matrix"==x&&(M=_(M)),this.attr({type:x,values:void 0===M?null:M})},convolveMatrix:function(x){x=_(x),this.attr({order:Math.sqrt(x.split(" ").length),kernelMatrix:x})},composite:function(x,M,I){this.attr({in:x,in2:M,operator:I})},flood:function(x,M){this.attr("flood-color",x),null!=M&&this.attr("flood-opacity",M)},offset:function(x,M){this.attr({dx:x,dy:M})},image:function(x){this.attr("href",x,SVG.xlink)},displacementMap:function(x,M,I,F,U){this.attr({in:x,in2:M,scale:I,xChannelSelector:F,yChannelSelector:U})},gaussianBlur:function(x,M){this.attr("stdDeviation",null!=x||null!=M?function(I){if(!Array.isArray(I))return I;for(var F=0,U=I.length,$=[];F<U;F++)$.push(I[F]);return $.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(x,M){this.attr({operator:x,radius:M})},tile:function(){},turbulence:function(x,M,I,F,U){this.attr({numOctaves:M,seed:I,stitchTiles:F,baseFrequency:x,type:U})}},c={merge:function(){var x;if(arguments[0]instanceof SVG.Set){var M=this;arguments[0].each(function(F){this instanceof SVG.MergeNode?M.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&M.put(new SVG.MergeNode(this))})}else{x=Array.isArray(arguments[0])?arguments[0]:arguments;for(var I=0;I<x.length;I++)x[I]instanceof SVG.MergeNode?this.put(x[I]):this.put(new SVG.MergeNode(x[I]))}},componentTransfer:function(x){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(I){this[I]=new(SVG["Func"+I.toUpperCase()])("identity"),this.rgb.add(this[I]),this.node.appendChild(this[I].node)}.bind(this)),x)for(var M in x.rgb&&(["r","g","b"].forEach(function(I){this[I].attr(x.rgb)}.bind(this)),delete x.rgb),x)this[M].attr(x[M])},diffuseLighting:function(x,M,I){this.attr({surfaceScale:x,diffuseConstant:M,kernelUnitLength:I})},specularLighting:function(x,M,I,F){this.attr({surfaceScale:x,diffuseConstant:M,specularExponent:I,kernelUnitLength:F})}},h={distantLight:function(x,M){this.attr({azimuth:x,elevation:M})},pointLight:function(x,M,I){this.attr({x,y:M,z:I})},spotLight:function(x,M,I,F,U,$){this.attr({x,y:M,z:I,pointsAtX:F,pointsAtY:U,pointsAtZ:$})},mergeNode:function(x){this.attr("in",x)}};function _(x){return Array.isArray(x)&&(x=new SVG.Array(x)),x.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function b(){var x=function(){};for(var M in"function"==typeof arguments[arguments.length-1]&&(x=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var I in arguments[M])x(arguments[M][I],I,arguments[M])}["r","g","b","a"].forEach(function(x){h["Func"+x.toUpperCase()]=function(M){switch(this.attr("type",M),M){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),b(o,function(x,M){var I=M.charAt(0).toUpperCase()+M.slice(1);SVG[I+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+I)),x.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),b(c,function(x,M){var I=M.charAt(0).toUpperCase()+M.slice(1);SVG[I+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+I)),x.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),b(h,function(x,M){var I=M.charAt(0).toUpperCase()+M.slice(1);SVG[I]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+I)),x.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(x){return x instanceof SVG.MergeNode?this.add(x,0):this.add(new SVG.MergeNode(x),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",x)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function le(b,x,M,I,F,U,$){for(var q=b.slice(x,M||$),ne=I.slice(F,U||$),de=0,ge={pos:[0,0],start:[0,0]},we={pos:[0,0],start:[0,0]};q[de]=o.call(ge,q[de]),ne[de]=o.call(we,ne[de]),q[de][0]!=ne[de][0]||"M"==q[de][0]||"A"==q[de][0]&&(q[de][4]!=ne[de][4]||q[de][5]!=ne[de][5])?(Array.prototype.splice.apply(q,[de,1].concat(h.call(ge,q[de]))),Array.prototype.splice.apply(ne,[de,1].concat(h.call(we,ne[de])))):(q[de]=c.call(ge,q[de]),ne[de]=c.call(we,ne[de])),++de!=q.length||de!=ne.length;)de==q.length&&q.push(["C",ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1]]),de==ne.length&&ne.push(["C",we.pos[0],we.pos[1],we.pos[0],we.pos[1],we.pos[0],we.pos[1]]);return{start:q,dest:ne}}function o(b){switch(b[0]){case"z":case"Z":b[0]="L",b[1]=this.start[0],b[2]=this.start[1];break;case"H":b[0]="L",b[2]=this.pos[1];break;case"V":b[0]="L",b[2]=b[1],b[1]=this.pos[0];break;case"T":b[0]="Q",b[3]=b[1],b[4]=b[2],b[1]=this.reflection[1],b[2]=this.reflection[0];break;case"S":b[0]="C",b[6]=b[4],b[5]=b[3],b[4]=b[2],b[3]=b[1],b[2]=this.reflection[1],b[1]=this.reflection[0]}return b}function c(b){var x=b.length;return this.pos=[b[x-2],b[x-1]],-1!="SCQT".indexOf(b[0])&&(this.reflection=[2*this.pos[0]-b[x-4],2*this.pos[1]-b[x-3]]),b}function h(b){var x=[b];switch(b[0]){case"M":return this.pos=this.start=[b[1],b[2]],x;case"L":b[5]=b[3]=b[1],b[6]=b[4]=b[2],b[1]=this.pos[0],b[2]=this.pos[1];break;case"Q":b[6]=b[4],b[5]=b[3],b[4]=1*b[4]/3+2*b[2]/3,b[3]=1*b[3]/3+2*b[1]/3,b[2]=1*this.pos[1]/3+2*b[2]/3,b[1]=1*this.pos[0]/3+2*b[1]/3;break;case"A":b=(x=function(M,I){var F,U,$,q,ne,de,ge,we,me,Se,N,Q,pe,xe,Le,Ze,kt,It,ii,wi,Mi,dn,En,Fn,Jn,ar,lr=Math.abs(I[1]),Lr=Math.abs(I[2]),Hr=I[3]%360,Wr=I[4],Mr=I[5],qn=I[6],as=I[7],$n=new SVG.Point(M),Xr=new SVG.Point(qn,as),ul=[];if(0===lr||0===Lr||$n.x===Xr.x&&$n.y===Xr.y)return[["C",$n.x,$n.y,Xr.x,Xr.y,Xr.x,Xr.y]];for((U=(F=new SVG.Point(($n.x-Xr.x)/2,($n.y-Xr.y)/2).transform((new SVG.Matrix).rotate(Hr))).x*F.x/(lr*lr)+F.y*F.y/(Lr*Lr))>1&&(lr*=U=Math.sqrt(U),Lr*=U),$=(new SVG.Matrix).rotate(Hr).scale(1/lr,1/Lr).rotate(-Hr),$n=$n.transform($),de=(q=[(Xr=Xr.transform($)).x-$n.x,Xr.y-$n.y])[0]*q[0]+q[1]*q[1],ne=Math.sqrt(de),q[0]/=ne,q[1]/=ne,ge=de<4?Math.sqrt(1-de/4):0,Wr===Mr&&(ge*=-1),we=new SVG.Point((Xr.x+$n.x)/2+ge*-q[1],(Xr.y+$n.y)/2+ge*q[0]),me=new SVG.Point($n.x-we.x,$n.y-we.y),Se=new SVG.Point(Xr.x-we.x,Xr.y-we.y),N=Math.acos(me.x/Math.sqrt(me.x*me.x+me.y*me.y)),me.y<0&&(N*=-1),Q=Math.acos(Se.x/Math.sqrt(Se.x*Se.x+Se.y*Se.y)),Se.y<0&&(Q*=-1),Mr&&N>Q&&(Q+=2*Math.PI),!Mr&&N<Q&&(Q-=2*Math.PI),Ze=[],kt=N,pe=(Q-N)/(xe=Math.ceil(2*Math.abs(N-Q)/Math.PI)),Le=4*Math.tan(pe/4)/3,Mi=0;Mi<=xe;Mi++)ii=Math.cos(kt),It=Math.sin(kt),wi=new SVG.Point(we.x+ii,we.y+It),Ze[Mi]=[new SVG.Point(wi.x+Le*It,wi.y-Le*ii),wi,new SVG.Point(wi.x-Le*It,wi.y+Le*ii)],kt+=pe;for(Ze[0][0]=Ze[0][1].clone(),Ze[Ze.length-1][2]=Ze[Ze.length-1][1].clone(),$=(new SVG.Matrix).rotate(Hr).scale(lr,Lr).rotate(-Hr),Mi=0,dn=Ze.length;Mi<dn;Mi++)Ze[Mi][0]=Ze[Mi][0].transform($),Ze[Mi][1]=Ze[Mi][1].transform($),Ze[Mi][2]=Ze[Mi][2].transform($);for(Mi=1,dn=Ze.length;Mi<dn;Mi++)En=(wi=Ze[Mi-1][2]).x,Fn=wi.y,Jn=(wi=Ze[Mi][0]).x,ar=wi.y,qn=(wi=Ze[Mi][1]).x,ul.push(["C",En,Fn,Jn,ar,qn,as=wi.y]);return ul}(this.pos,b))[0]}return b[0]="C",this.pos=[b[5],b[6]],this.reflection=[2*b[5]-b[3],2*b[6]-b[4]],x}function _(b,x){if(!1===x)return!1;for(var M=x,I=b.length;M<I;++M)if("M"==b[M][0])return M;return!1}SVG.extend(SVG.PathArray,{morph:function(b){for(var x=this.value,M=this.parse(b),I=0,F=0,U=!1,$=!1;!1!==I||!1!==F;){var q;U=_(x,!1!==I&&I+1),$=_(M,!1!==F&&F+1),!1===I&&(I=0==(q=new SVG.PathArray(ne.start).bbox()).height||0==q.width?x.push(x[0])-1:x.push(["M",q.x+q.width/2,q.y+q.height/2])-1),!1===F&&(F=0==(q=new SVG.PathArray(ne.dest).bbox()).height||0==q.width?M.push(M[0])-1:M.push(["M",q.x+q.width/2,q.y+q.height/2])-1);var ne=le(x,I,U,M,F,$);x=x.slice(0,I).concat(ne.start,!1===U?[]:x.slice(U)),M=M.slice(0,F).concat(ne.dest,!1===$?[]:M.slice($)),I=!1!==U&&I+ne.start.length,F=!1!==$&&F+ne.dest.length}return this.value=x,this.destination=new SVG.PathArray,this.destination.value=M,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
      * https://github.com/svgdotjs/svg.draggable.js
      * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function le(o){o.remember("_draggable",this),this.el=o}le.prototype.init=function(o,c){var h=this;this.constraint=o,this.value=c,this.el.on("mousedown.drag",function(_){h.start(_)}),this.el.on("touchstart.drag",function(_){h.start(_)})},le.prototype.transformPoint=function(o,c){var h=(o=o||window.event).changedTouches&&o.changedTouches[0]||o;return this.p.x=h.clientX-(c||0),this.p.y=h.clientY,this.p.matrixTransform(this.m)},le.prototype.getBBox=function(){var o=this.el.bbox();return this.el instanceof SVG.Nested&&(o=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(o.x=this.el.x(),o.y=this.el.y()),o},le.prototype.start=function(o){if("click"!=o.type&&"mousedown"!=o.type&&"mousemove"!=o.type||1==(o.which||o.buttons)){var c=this;if(this.el.fire("beforedrag",{event:o,handler:this}),!this.el.event().defaultPrevented){o.preventDefault(),o.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var h,_=this.getBBox();if(this.el instanceof SVG.Text)switch(h=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":h/=2;break;case"start":h=0}this.startPoints={point:this.transformPoint(o,h),box:_,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(b){c.drag(b)}),SVG.on(window,"touchmove.drag",function(b){c.drag(b)}),SVG.on(window,"mouseup.drag",function(b){c.end(b)}),SVG.on(window,"touchend.drag",function(b){c.end(b)}),this.el.fire("dragstart",{event:o,p:this.startPoints.point,m:this.m,handler:this})}}},le.prototype.drag=function(o){var c=this.getBBox(),h=this.transformPoint(o),_=this.startPoints.box.x+h.x-this.startPoints.point.x,b=this.startPoints.box.y+h.y-this.startPoints.point.y,x=this.constraint,M=h.x-this.startPoints.point.x,I=h.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:o,p:h,m:this.m,handler:this}),this.el.event().defaultPrevented)return h;if("function"==typeof x){var F=x.call(this.el,_,b,this.m);"boolean"==typeof F&&(F={x:F,y:F}),!0===F.x?this.el.x(_):!1!==F.x&&this.el.x(F.x),!0===F.y?this.el.y(b):!1!==F.y&&this.el.y(F.y)}else"object"==typeof x&&(null!=x.minX&&_<x.minX?M=(_=x.minX)-this.startPoints.box.x:null!=x.maxX&&_>x.maxX-c.width&&(M=(_=x.maxX-c.width)-this.startPoints.box.x),null!=x.minY&&b<x.minY?I=(b=x.minY)-this.startPoints.box.y:null!=x.maxY&&b>x.maxY-c.height&&(I=(b=x.maxY-c.height)-this.startPoints.box.y),null!=x.snapToGrid&&(_-=_%x.snapToGrid,b-=b%x.snapToGrid,M-=M%x.snapToGrid,I-=I%x.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:M,y:I},!0):this.el.move(_,b));return h},le.prototype.end=function(o){var c=this.drag(o);this.el.fire("dragend",{event:o,p:c,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(o,c){"function"!=typeof o&&"object"!=typeof o||(c=o,o=!0);var h=this.remember("_draggable")||new le(this);return(o=void 0===o||o)?h.init(c||{},o):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function le(o){this.el=o,o.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(c,h,_){var b="string"!=typeof c?c:h[c];return _?b/2:b},this.pointCoords=function(c,h){var _=this.pointsList[c];return{x:this.pointCoord(_[0],h,"t"===c||"b"===c),y:this.pointCoord(_[1],h,"r"===c||"l"===c)}}}le.prototype.init=function(o,c){var h=this.el.bbox();this.options={};var _=this.el.selectize.defaults.points;for(var b in this.el.selectize.defaults)this.options[b]=this.el.selectize.defaults[b],void 0!==c[b]&&(this.options[b]=c[b]);var x=["points","pointsExclude"];for(var b in x){var M=this.options[x[b]];"string"==typeof M?M=M.length>0?M.split(/\s*,\s*/i):[]:"boolean"==typeof M&&"points"===x[b]&&(M=M?_:[]),this.options[x[b]]=M}this.options.points=[_,this.options.points].reduce(function(I,F){return I.filter(function(U){return F.indexOf(U)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(I,F){return I.filter(function(U){return F.indexOf(U)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(h.x,h.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(o):this.selectRect(o),this.observe(),this.cleanup()},le.prototype.selectPoints=function(o){return this.pointSelection.isSelected=o,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},le.prototype.getPointArray=function(){var o=this.el.bbox();return this.el.array().valueOf().map(function(c){return[c[0]-o.x,c[1]-o.y]})},le.prototype.drawPoints=function(){for(var o=this,c=this.getPointArray(),h=0,_=c.length;h<_;++h){var b=function(M){return function(I){(I=I||window.event).preventDefault?I.preventDefault():I.returnValue=!1,I.stopPropagation(),o.el.fire("point",{x:I.pageX||I.touches[0].pageX,y:I.pageY||I.touches[0].pageY,i:M,event:I})}}(h),x=this.drawPoint(c[h][0],c[h][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",b).on("mousedown",b);this.pointSelection.set.add(x)}},le.prototype.drawPoint=function(o,c){var h=this.options.pointType;switch(h){case"circle":return this.drawCircle(o,c);case"rect":return this.drawRect(o,c);default:if("function"==typeof h)return h.call(this,o,c);throw new Error("Unknown "+h+" point type!")}},le.prototype.drawCircle=function(o,c){return this.nested.circle(this.options.pointSize).center(o,c)},le.prototype.drawRect=function(o,c){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(o,c)},le.prototype.updatePointSelection=function(){var o=this.getPointArray();this.pointSelection.set.each(function(c){this.cx()===o[c][0]&&this.cy()===o[c][1]||this.center(o[c][0],o[c][1])})},le.prototype.updateRectSelection=function(){var o=this,c=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:c.width,height:c.height}),this.options.points.length&&this.options.points.map(function(_,b){var x=o.pointCoords(_,c);o.rectSelection.set.get(b+1).center(x.x,x.y)}),this.options.rotationPoint){var h=this.rectSelection.set.length();this.rectSelection.set.get(h-1).center(c.width/2,20)}},le.prototype.selectRect=function(o){var c=this,h=this.el.bbox();function _(M){return function(I){(I=I||window.event).preventDefault?I.preventDefault():I.returnValue=!1,I.stopPropagation(),c.el.fire(M,{x:I.pageX||I.touches[0].pageX,y:I.pageY||I.touches[0].pageY,event:I})}}if(this.rectSelection.isSelected=o,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(h.width,h.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(M,I){var F=c.pointCoords(M,h),U=c.drawPoint(F.x,F.y).attr("class",c.options.classPoints+"_"+M).on("mousedown",_(M)).on("touchstart",_(M));c.rectSelection.set.add(U)}),this.rectSelection.set.each(function(){this.addClass(c.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var b=function(M){(M=M||window.event).preventDefault?M.preventDefault():M.returnValue=!1,M.stopPropagation(),c.el.fire("rot",{x:M.pageX||M.touches[0].pageX,y:M.pageY||M.touches[0].pageY,event:M})},x=this.drawPoint(h.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",b).on("mousedown",b);this.rectSelection.set.add(x)}},le.prototype.handler=function(){var o=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(o.x,o.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},le.prototype.observe=function(){var o=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){o.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){o.handler()})},le.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(o,c){return"object"==typeof o&&(c=o,o=!0),(this.remember("_selectHandler")||new le(this)).init(void 0===o||o,c||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function le(o){o.remember("_resizeHandler",this),this.el=o,this.parameters={},this.lastUpdateCall=null,this.p=o.doc().node.createSVGPoint()}le.prototype.transformPoint=function(o,c,h){return this.p.x=o-(this.offset.x-window.pageXOffset),this.p.y=c-(this.offset.y-window.pageYOffset),this.p.matrixTransform(h||this.m)},le.prototype._extractPosition=function(o){return{x:null!=o.clientX?o.clientX:o.touches[0].clientX,y:null!=o.clientY?o.clientY:o.touches[0].clientY}},le.prototype.init=function(o){var c=this;if(this.stop(),"stop"!==o){for(var h in this.options={},this.el.resize.defaults)this.options[h]=this.el.resize.defaults[h],void 0!==o[h]&&(this.options[h]=o[h]);this.el.on("lt.resize",function(_){c.resize(_||window.event)}),this.el.on("rt.resize",function(_){c.resize(_||window.event)}),this.el.on("rb.resize",function(_){c.resize(_||window.event)}),this.el.on("lb.resize",function(_){c.resize(_||window.event)}),this.el.on("t.resize",function(_){c.resize(_||window.event)}),this.el.on("r.resize",function(_){c.resize(_||window.event)}),this.el.on("b.resize",function(_){c.resize(_||window.event)}),this.el.on("l.resize",function(_){c.resize(_||window.event)}),this.el.on("rot.resize",function(_){c.resize(_||window.event)}),this.el.on("point.resize",function(_){c.resize(_||window.event)}),this.update()}},le.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},le.prototype.resize=function(o){var c=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var h=this._extractPosition(o.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(h.x,h.y),x:o.detail.x,y:o.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==o.detail.i){var _=this.el.array().valueOf();this.parameters.i=o.detail.i,this.parameters.pointCoords=[_[o.detail.i][0],_[o.detail.i][1]]}switch(o.type){case"lt":this.calc=function(b,x){var M=this.snapToGrid(b,x);if(this.parameters.box.width-M[0]>0&&this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-M[0]);M=this.checkAspectRatio(M),this.el.move(this.parameters.box.x+M[0],this.parameters.box.y+M[1]).size(this.parameters.box.width-M[0],this.parameters.box.height-M[1])}};break;case"rt":this.calc=function(b,x){var M=this.snapToGrid(b,x,2);if(this.parameters.box.width+M[0]>0&&this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+M[0]);M=this.checkAspectRatio(M,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+M[1]).size(this.parameters.box.width+M[0],this.parameters.box.height-M[1])}};break;case"rb":this.calc=function(b,x){var M=this.snapToGrid(b,x,0);if(this.parameters.box.width+M[0]>0&&this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+M[0]);M=this.checkAspectRatio(M),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+M[0],this.parameters.box.height+M[1])}};break;case"lb":this.calc=function(b,x){var M=this.snapToGrid(b,x,1);if(this.parameters.box.width-M[0]>0&&this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-M[0]);M=this.checkAspectRatio(M,!0),this.el.move(this.parameters.box.x+M[0],this.parameters.box.y).size(this.parameters.box.width-M[0],this.parameters.box.height+M[1])}};break;case"t":this.calc=function(b,x){var M=this.snapToGrid(b,x,2);if(this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+M[1]).height(this.parameters.box.height-M[1])}};break;case"r":this.calc=function(b,x){var M=this.snapToGrid(b,x,0);if(this.parameters.box.width+M[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+M[0])}};break;case"b":this.calc=function(b,x){var M=this.snapToGrid(b,x,0);if(this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+M[1])}};break;case"l":this.calc=function(b,x){var M=this.snapToGrid(b,x,1);if(this.parameters.box.width-M[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+M[0],this.parameters.box.y).width(this.parameters.box.width-M[0])}};break;case"rot":this.calc=function(b,x){var M=b+this.parameters.p.x,I=x+this.parameters.p.y,F=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),U=Math.atan2(I-this.parameters.box.y-this.parameters.box.height/2,M-this.parameters.box.x-this.parameters.box.width/2),$=this.parameters.rotation+180*(U-F)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate($-$%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(b,x){var M=this.snapToGrid(b,x,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),I=this.el.array().valueOf();I[this.parameters.i][0]=this.parameters.pointCoords[0]+M[0],I[this.parameters.i][1]=this.parameters.pointCoords[1]+M[1],this.el.plot(I)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:o}),SVG.on(window,"touchmove.resize",function(b){c.update(b||window.event)}),SVG.on(window,"touchend.resize",function(){c.done()}),SVG.on(window,"mousemove.resize",function(b){c.update(b||window.event)}),SVG.on(window,"mouseup.resize",function(){c.done()})},le.prototype.update=function(o){if(o){var c=this._extractPosition(o),h=this.transformPoint(c.x,c.y),_=h.x-this.parameters.p.x,b=h.y-this.parameters.p.y;this.lastUpdateCall=[_,b],this.calc(_,b),this.el.fire("resizing",{dx:_,dy:b,event:o})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},le.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},le.prototype.snapToGrid=function(o,c,h,_){var b;return b=void 0!==_?[(h+o)%this.options.snapToGrid,(_+c)%this.options.snapToGrid]:[(this.parameters.box.x+o+(1&(h=h??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+c+(2&h?0:this.parameters.box.height))%this.options.snapToGrid],o<0&&(b[0]-=this.options.snapToGrid),c<0&&(b[1]-=this.options.snapToGrid),o-=Math.abs(b[0])<this.options.snapToGrid/2?b[0]:b[0]-(o<0?-this.options.snapToGrid:this.options.snapToGrid),c-=Math.abs(b[1])<this.options.snapToGrid/2?b[1]:b[1]-(c<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(o,c,h,_)},le.prototype.constraintToBox=function(o,c,h,_){var b,x,M=this.options.constraint||{};return void 0!==_?(b=h,x=_):(b=this.parameters.box.x+(1&h?0:this.parameters.box.width),x=this.parameters.box.y+(2&h?0:this.parameters.box.height)),void 0!==M.minX&&b+o<M.minX&&(o=M.minX-b),void 0!==M.maxX&&b+o>M.maxX&&(o=M.maxX-b),void 0!==M.minY&&x+c<M.minY&&(c=M.minY-x),void 0!==M.maxY&&x+c>M.maxY&&(c=M.maxY-x),[o,c]},le.prototype.checkAspectRatio=function(o,c){if(!this.options.saveAspectRatio)return o;var h=o.slice(),_=this.parameters.box.width/this.parameters.box.height,b=this.parameters.box.width+o[0],x=this.parameters.box.height-o[1],M=b/x;return M<_?(h[1]=b/_-this.parameters.box.height,c&&(h[1]=-h[1])):M>_&&(h[0]=this.parameters.box.width-x*_,c&&(h[0]=-h[0])),h},SVG.extend(SVG.Element,{resize:function(o){return(this.remember("_resizeHandler")||new le(this)).init(o||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var it=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new ni(this.ctx),this.ctx.axes=new tn(this.ctx),this.ctx.core=new yt(this.ctx.el,this.ctx),this.ctx.config=new mn({}),this.ctx.data=new Gi(this.ctx),this.ctx.grid=new wn(this.ctx),this.ctx.graphics=new at(this.ctx),this.ctx.coreUtils=new si(this.ctx),this.ctx.crosshairs=new Ti(this.ctx),this.ctx.events=new ji(this.ctx),this.ctx.exports=new sr(this.ctx),this.ctx.localization=new Gn(this.ctx),this.ctx.options=new mi,this.ctx.responsive=new gn(this.ctx),this.ctx.series=new An(this.ctx),this.ctx.theme=new Pn(this.ctx),this.ctx.formatters=new Ci(this.ctx),this.ctx.titleSubtitle=new Dr(this.ctx),this.ctx.legend=new Rr(this.ctx),this.ctx.toolbar=new ks(this.ctx),this.ctx.tooltip=new Ne(this.ctx),this.ctx.dimensions=new Tn(this.ctx),this.ctx.updateHelpers=new fe(this.ctx),this.ctx.zoomPanSelection=new er(this.ctx),this.ctx.w.globals.tooltip=new Ne(this.ctx)}}]),le}(),Tt=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Me(le,[{key:"clear",value:function(o){var c=o.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:c})}},{key:"killSVG",value:function(o){o.each(function(c,h){this.removeClass("*"),this.off(),this.stop()},!0),o.ungroup(),o.clear()}},{key:"clearDomElements",value:function(o){var c=this,_=this.w.globals.dom.Paper.node;_.parentNode&&_.parentNode.parentNode&&!o.isUpdating&&(_.parentNode.parentNode.style.minHeight="unset");var b=this.w.globals.dom.baseEl;b&&this.ctx.eventList.forEach(function(M){b.removeEventListener(M,c.ctx.events.documentEvent)});var x=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(x.Paper),x.Paper.remove(),x.elWrap=null,x.elGraphical=null,x.elLegendWrap=null,x.elLegendForeign=null,x.baseEl=null,x.elGridRect=null,x.elGridRectMask=null,x.elGridRectMarkerMask=null,x.elForecastMask=null,x.elNonForecastMask=null,x.elDefs=null}}]),le}(),Pe=new WeakMap,Lt=function(){function le(o,c){V(this,le),this.opts=c,this.ctx=this,this.w=new ei(c).init(),this.el=o,this.w.globals.cuid=We.randomId(),this.w.globals.chartID=this.w.config.chart.id?We.escapeString(this.w.config.chart.id):this.w.globals.cuid,new it(this).initModules(),this.create=We.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Me(le,[{key:"render",value:function(){var o=this;return new Promise(function(c,h){if(null!==o.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),o.w.config.chart.id&&Apex._chartInstances.push({id:o.w.globals.chartID,group:o.w.config.chart.group,chart:o}),o.setLocale(o.w.config.chart.defaultLocale);var _=o.w.config.chart.events.beforeMount;if("function"==typeof _&&_(o,o.w),o.events.fireEvent("beforeMount",[o,o.w]),window.addEventListener("resize",o.windowResizeHandler),function(q,ne){var de=!1;if(q.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var ge=q.getBoundingClientRect();"none"!==q.style.display&&0!==ge.width||(de=!0)}var we=new ResizeObserver(function(me){de&&ne.call(q,me),de=!0});q.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(q.children).forEach(function(me){return we.observe(me)}):we.observe(q),Pe.set(ne,we)}(o.el.parentNode,o.parentResizeHandler),!o.css){var b=o.el.getRootNode&&o.el.getRootNode(),x=We.is("ShadowRoot",b),M=o.el.ownerDocument,I=M.getElementById("apexcharts-css");if(x||!I){var F;o.css=document.createElement("style"),o.css.id="apexcharts-css",o.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var U=(null===(F=o.opts.chart)||void 0===F?void 0:F.nonce)||o.w.config.chart.nonce;U&&o.css.setAttribute("nonce",U),x?b.prepend(o.css):M.head.appendChild(o.css)}}var $=o.create(o.w.config.series,{});if(!$)return c(o);o.mount($).then(function(){"function"==typeof o.w.config.chart.events.mounted&&o.w.config.chart.events.mounted(o,o.w),o.events.fireEvent("mounted",[o,o.w]),c($)}).catch(function(q){h(q)})}else h(new Error("Element not found"))})}},{key:"create",value:function(o,c){var h=this.w;new it(this).initModules();var _=this.w.globals;if(_.noData=!1,_.animationEnded=!1,this.responsive.checkResponsiveConfig(c),h.config.xaxis.convertedCatToNumeric&&new xn(h.config).convertCatToNumericXaxis(h.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===h.config.chart.type&&(h.config.grid.show=!1,h.config.yaxis[0].show=!1),0===_.svgWidth))return _.animationEnded=!0,null;var b=si.checkComboSeries(o);_.comboCharts=b.comboCharts,_.comboBarCount=b.comboBarCount;var x=o.every(function(U){return U.data&&0===U.data.length});(0===o.length||x)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new on(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),_.noData&&_.collapsedSeries.length!==_.series.length&&!h.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),_.axisCharts&&(this.core.coreCalculations(),"category"!==h.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=h.globals.minX,this.ctx.toolbar.maxX=h.globals.maxX),this.formatters.heatmapLabelFormatters(),new si(this).getLargestMarkerSize(),this.dimensions.plotCoords();var M=this.core.xySettings();this.grid.createGridMask();var I=this.core.plotChartType(o,M),F=new Nn(this);return F.bringForward(),h.config.dataLabels.background.enabled&&F.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:I,xyRatios:M,dimensions:{plot:{left:h.globals.translateX,top:h.globals.translateY,width:h.globals.gridWidth,height:h.globals.gridHeight}}}}},{key:"mount",value:function(){var o=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=this,_=h.w;return new Promise(function(b,x){if(null===h.el)return x(new Error("Not enough data to display or target element not found"));(null===c||_.globals.allSeriesCollapsed)&&h.series.handleNoData(),h.grid=new wn(h);var M,I,F=h.grid.drawGrid();if(h.annotations=new Vi(h),h.annotations.drawImageAnnos(),h.annotations.drawTextAnnos(),"back"===_.config.grid.position&&(F&&_.globals.dom.elGraphical.add(F.el),null!=F&&null!==(M=F.elGridBorders)&&void 0!==M&&M.node&&_.globals.dom.elGraphical.add(F.elGridBorders)),Array.isArray(c.elGraph))for(var U=0;U<c.elGraph.length;U++)_.globals.dom.elGraphical.add(c.elGraph[U]);else _.globals.dom.elGraphical.add(c.elGraph);"front"===_.config.grid.position&&(F&&_.globals.dom.elGraphical.add(F.el),null!=F&&null!==(I=F.elGridBorders)&&void 0!==I&&I.node&&_.globals.dom.elGraphical.add(F.elGridBorders)),"front"===_.config.xaxis.crosshairs.position&&h.crosshairs.drawXCrosshairs(),"front"===_.config.yaxis[0].crosshairs.position&&h.crosshairs.drawYCrosshairs(),"treemap"!==_.config.chart.type&&h.axes.drawAxis(_.config.chart.type,F);var $=new fr(o.ctx,F),q=new Xi(o.ctx,F);if(null!==F&&($.xAxisLabelCorrections(F.xAxisTickWidth),q.setYAxisTextAlignments(),_.config.yaxis.map(function(de,ge){-1===_.globals.ignoreYAxisIndexes.indexOf(ge)&&q.yAxisTitleRotate(ge,de.opposite)})),h.annotations.drawAxesAnnotations(),!_.globals.noData){if(_.config.tooltip.enabled&&!_.globals.noData&&h.w.globals.tooltip.drawTooltip(c.xyRatios),_.globals.axisCharts&&(_.globals.isXNumeric||_.config.xaxis.convertedCatToNumeric||_.globals.isRangeBar))(_.config.chart.zoom.enabled||_.config.chart.selection&&_.config.chart.selection.enabled||_.config.chart.pan&&_.config.chart.pan.enabled)&&h.zoomPanSelection.init({xyRatios:c.xyRatios});else{var ne=_.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(de){ne[de]=!1})}_.config.chart.toolbar.show&&!_.globals.allSeriesCollapsed&&h.toolbar.createToolbar()}_.globals.memory.methodsToExec.length>0&&_.globals.memory.methodsToExec.forEach(function(de){de.method(de.params,!1,de.context)}),_.globals.axisCharts||_.globals.noData||h.core.resizeNonAxisCharts(),b(h)})}},{key:"destroy",value:function(){var o,c;window.removeEventListener("resize",this.windowResizeHandler),(c=Pe.get(o=this.parentResizeHandler))&&(c.disconnect(),Pe.delete(o));var h=this.w.config.chart.id;h&&Apex._chartInstances.forEach(function(_,b){_.id===We.escapeString(h)&&Apex._chartInstances.splice(b,1)}),new Tt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(o){var c=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],b=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],x=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],M=this.w;return M.globals.selection=void 0,o.series&&(this.series.resetSeries(!1,!0,!1),o.series.length&&o.series[0].data&&(o.series=o.series.map(function(I,F){return c.updateHelpers._extendSeries(I,F)})),this.updateHelpers.revertDefaultAxisMinMax()),o.xaxis&&(o=this.updateHelpers.forceXAxisUpdate(o)),o.yaxis&&(o=this.updateHelpers.forceYAxisUpdate(o)),M.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),o.theme&&(o=this.theme.updateThemeOptions(o)),this.updateHelpers._updateOptions(o,h,_,b,x)}},{key:"updateSeries",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(o,c,h)}},{key:"appendSeries",value:function(o){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_=this.w.config.series.slice();return _.push(o),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(_,c,h)}},{key:"appendData",value:function(o){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this;h.w.globals.dataChanged=!0,h.series.getPreviousPaths();for(var _=h.w.config.series.slice(),b=0;b<_.length;b++)if(null!=o[b])for(var x=0;x<o[b].data.length;x++)_[b].data.push(o[b].data[x]);return h.w.config.series=_,c&&(h.w.globals.initialSeries=We.clone(h.w.config.series)),this.update()}},{key:"update",value:function(o){var c=this;return new Promise(function(h,_){new Tt(c.ctx).clear({isUpdating:!0});var b=c.create(c.w.config.series,o);if(!b)return h(c);c.mount(b).then(function(){"function"==typeof c.w.config.chart.events.updated&&c.w.config.chart.events.updated(c,c.w),c.events.fireEvent("updated",[c,c.w]),c.w.globals.isDirty=!0,h(c)}).catch(function(x){_(x)})})}},{key:"getSyncedCharts",value:function(){var o=this.getGroupedCharts(),c=[this];return o.length&&(c=[],o.forEach(function(h){c.push(h)})),c}},{key:"getGroupedCharts",value:function(){var o=this;return Apex._chartInstances.filter(function(c){if(c.group)return!0}).map(function(c){return o.w.config.chart.group===c.group?c.chart:o})}},{key:"toggleSeries",value:function(o){return this.series.toggleSeries(o)}},{key:"highlightSeriesOnLegendHover",value:function(o,c){return this.series.toggleSeriesOnHover(o,c)}},{key:"showSeries",value:function(o){this.series.showSeries(o)}},{key:"hideSeries",value:function(o){this.series.hideSeries(o)}},{key:"isSeriesHidden",value:function(o){this.series.isSeriesHidden(o)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(o,c){this.events.addEventListener(o,c)}},{key:"removeEventListener",value:function(o,c){this.events.removeEventListener(o,c)}},{key:"addXaxisAnnotation",value:function(o){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_=this;h&&(_=h),_.annotations.addXaxisAnnotationExternal(o,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_)}},{key:"addYaxisAnnotation",value:function(o){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_=this;h&&(_=h),_.annotations.addYaxisAnnotationExternal(o,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_)}},{key:"addPointAnnotation",value:function(o){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_=this;h&&(_=h),_.annotations.addPointAnnotationExternal(o,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_)}},{key:"clearAnnotations",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,c=this;o&&(c=o),c.annotations.clearAnnotations(c)}},{key:"removeAnnotation",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,h=this;c&&(h=c),h.annotations.removeAnnotation(h,o)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(o,c){return this.coreUtils.getSeriesTotalsXRange(o,c)}},{key:"getHighestValueInSeries",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new _n(this.ctx).getMinYMaxY(o).highestY}},{key:"getLowestValueInSeries",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new _n(this.ctx).getMinYMaxY(o).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(o,c){return this.updateHelpers.toggleDataPointSelection(o,c)}},{key:"zoomX",value:function(o,c){this.ctx.toolbar.zoomUpdateOptions(o,c)}},{key:"setLocale",value:function(o){this.localization.setCurrentLocaleValues(o)}},{key:"dataURI",value:function(o){return new sr(this.ctx).dataURI(o)}},{key:"exportToCSV",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sr(this.ctx).exportToCSV(o)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var o=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){o.w.globals.resized=!0,o.w.globals.dataChanged=!1,o.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var o=this.w.config.chart.redrawOnWindowResize;"function"==typeof o&&(o=o()),o&&this._windowResize()}}],[{key:"getChartByID",value:function(o){var c=We.escapeString(o);if(Apex._chartInstances){var h=Apex._chartInstances.filter(function(_){return _.id===c})[0];return h&&h.chart}}},{key:"initOnLoad",value:function(){for(var o=document.querySelectorAll("[data-apexcharts]"),c=0;c<o.length;c++)new le(o[c],JSON.parse(o[c].getAttribute("data-options"))).render()}},{key:"exec",value:function(o,c){var h=this.getChartByID(o);if(h){h.w.globals.isExecCalled=!0;var _=null;if(-1!==h.publicMethods.indexOf(c)){for(var b=arguments.length,x=new Array(b>2?b-2:0),M=2;M<b;M++)x[M-2]=arguments[M];_=h[c].apply(h,x)}return _}}},{key:"merge",value:function(o,c){return We.extend(o,c)}}]),le}();oo.exports=Lt},1176:oo=>{self,oo.exports=function(){var Yr={3099:function(Fe){Fe.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},6077:function(Fe,t,V){var Oe=V(111);Fe.exports=function(Me){if(!Oe(Me)&&null!==Me)throw TypeError("Can't set "+String(Me)+" as a prototype");return Me}},1223:function(Fe,t,V){var Oe=V(5112),Me=V(30),De=V(3070),Be=Oe("unscopables"),Ge=Array.prototype;null==Ge[Be]&&De.f(Ge,Be,{configurable:!0,value:Me(null)}),Fe.exports=function(Je){Ge[Be][Je]=!0}},1530:function(Fe,t,V){"use strict";var Oe=V(8710).charAt;Fe.exports=function(Me,De,Be){return De+(Be?Oe(Me,De).length:1)}},5787:function(Fe){Fe.exports=function(t,V,Oe){if(!(t instanceof V))throw TypeError("Incorrect "+(Oe?Oe+" ":"")+"invocation");return t}},9670:function(Fe,t,V){var Oe=V(111);Fe.exports=function(Me){if(!Oe(Me))throw TypeError(String(Me)+" is not an object");return Me}},4019:function(Fe){Fe.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(Fe,t,V){"use strict";var _i,Oe=V(4019),Me=V(9781),De=V(7854),Be=V(111),Ge=V(6656),Je=V(648),nt=V(8880),mt=V(1320),Pt=V(3070).f,ot=V(9518),vt=V(7674),wt=V(5112),ai=V(9711),We=De.Int8Array,ni=We&&We.prototype,li=De.Uint8ClampedArray,at=li&&li.prototype,si=We&&ot(We),Xt=ni&&ot(ni),jt=Object.prototype,ht=jt.isPrototypeOf,qt=wt("toStringTag"),ri=ai("TYPED_ARRAY_TAG"),mi=Oe&&!!vt&&"Opera"!==Je(De.opera),Vi=!1,Ci={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Fi={BigInt64Array:8,BigUint64Array:8},xn=function(on){if(!Be(on))return!1;var Wn=Je(on);return Ge(Ci,Wn)||Ge(Fi,Wn)};for(_i in Ci)De[_i]||(mi=!1);if((!mi||"function"!=typeof si||si===Function.prototype)&&(si=function(){throw TypeError("Incorrect invocation")},mi))for(_i in Ci)De[_i]&&vt(De[_i],si);if((!mi||!Xt||Xt===jt)&&(Xt=si.prototype,mi))for(_i in Ci)De[_i]&&vt(De[_i].prototype,Xt);if(mi&&ot(at)!==Xt&&vt(at,Xt),Me&&!Ge(Xt,qt))for(_i in Vi=!0,Pt(Xt,qt,{get:function(){return Be(this)?this[ri]:void 0}}),Ci)De[_i]&&nt(De[_i],ri,_i);Fe.exports={NATIVE_ARRAY_BUFFER_VIEWS:mi,TYPED_ARRAY_TAG:Vi&&ri,aTypedArray:function(on){if(xn(on))return on;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(on){if(vt){if(ht.call(si,on))return on}else for(var Wn in Ci)if(Ge(Ci,_i)){var Nn=De[Wn];if(Nn&&(on===Nn||ht.call(Nn,on)))return on}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(on,Wn,Nn){if(Me){if(Nn)for(var An in Ci){var Gi=De[An];Gi&&Ge(Gi.prototype,on)&&delete Gi.prototype[on]}(!Xt[on]||Nn)&&mt(Xt,on,Nn?Wn:mi&&ni[on]||Wn)}},exportTypedArrayStaticMethod:function(on,Wn,Nn){var An,Gi;if(Me){if(vt){if(Nn)for(An in Ci)(Gi=De[An])&&Ge(Gi,on)&&delete Gi[on];if(si[on]&&!Nn)return;try{return mt(si,on,Nn?Wn:mi&&We[on]||Wn)}catch{}}for(An in Ci)(Gi=De[An])&&(!Gi[on]||Nn)&&mt(Gi,on,Wn)}},isView:function(Wn){if(!Be(Wn))return!1;var Nn=Je(Wn);return"DataView"===Nn||Ge(Ci,Nn)||Ge(Fi,Nn)},isTypedArray:xn,TypedArray:si,TypedArrayPrototype:Xt}},3331:function(Fe,t,V){"use strict";var Oe=V(7854),Me=V(9781),De=V(4019),Be=V(8880),Ge=V(2248),Je=V(7293),nt=V(5787),mt=V(9958),Pt=V(7466),ot=V(7067),vt=V(1179),wt=V(9518),ai=V(7674),We=V(8006).f,ni=V(3070).f,li=V(1285),at=V(8003),si=V(9909),Xt=si.get,jt=si.set,ht="ArrayBuffer",qt="DataView",ri="prototype",Vi="Wrong index",_i=Oe[ht],Ci=_i,Fi=Oe[qt],qi=Fi&&Fi[ri],xn=Object.prototype,mn=Oe.RangeError,Vn=vt.pack,ei=vt.unpack,Bi=function(tn){return[255&tn]},on=function(tn){return[255&tn,tn>>8&255]},Wn=function(tn){return[255&tn,tn>>8&255,tn>>16&255,tn>>24&255]},Nn=function(tn){return tn[3]<<24|tn[2]<<16|tn[1]<<8|tn[0]},An=function(tn){return Vn(tn,23,4)},Gi=function(tn){return Vn(tn,52,8)},kr=function(tn,Ti){ni(tn[ri],Ti,{get:function(){return Xt(this)[Ti]}})},sr=function(tn,Ti,gn,Pn){var Dr=ot(gn),Ir=Xt(tn);if(Dr+Ti>Ir.byteLength)throw mn(Vi);var wr=Xt(Ir.buffer).bytes,pr=Dr+Ir.byteOffset,or=wr.slice(pr,pr+Ti);return Pn?or:or.reverse()},fr=function(tn,Ti,gn,Pn,Dr,Ir){var wr=ot(gn),pr=Xt(tn);if(wr+Ti>pr.byteLength)throw mn(Vi);for(var or=Xt(pr.buffer).bytes,Tn=wr+pr.byteOffset,ur=Pn(+Dr),Rr=0;Rr<Ti;Rr++)or[Tn+Rr]=ur[Ir?Rr:Ti-Rr-1]};if(De){if(!Je(function(){_i(1)})||!Je(function(){new _i(-1)})||Je(function(){return new _i,new _i(1.5),new _i(NaN),_i.name!=ht})){for(var Xi,wn=(Ci=function(Ti){return nt(this,Ci),new _i(ot(Ti))})[ri]=_i[ri],en=We(_i),_n=0;en.length>_n;)(Xi=en[_n++])in Ci||Be(Ci,Xi,_i[Xi]);wn.constructor=Ci}ai&&wt(qi)!==xn&&ai(qi,xn);var ji=new Fi(new Ci(2)),Gn=qi.setInt8;ji.setInt8(0,2147483648),ji.setInt8(1,2147483649),(ji.getInt8(0)||!ji.getInt8(1))&&Ge(qi,{setInt8:function(Ti,gn){Gn.call(this,Ti,gn<<24>>24)},setUint8:function(Ti,gn){Gn.call(this,Ti,gn<<24>>24)}},{unsafe:!0})}else Ci=function(Ti){nt(this,Ci,ht);var gn=ot(Ti);jt(this,{bytes:li.call(new Array(gn),0),byteLength:gn}),Me||(this.byteLength=gn)},Fi=function(Ti,gn,Pn){nt(this,Fi,qt),nt(Ti,Ci,qt);var Dr=Xt(Ti).byteLength,Ir=mt(gn);if(Ir<0||Ir>Dr)throw mn("Wrong offset");if(Ir+(Pn=void 0===Pn?Dr-Ir:Pt(Pn))>Dr)throw mn("Wrong length");jt(this,{buffer:Ti,byteLength:Pn,byteOffset:Ir}),Me||(this.buffer=Ti,this.byteLength=Pn,this.byteOffset=Ir)},Me&&(kr(Ci,"byteLength"),kr(Fi,"buffer"),kr(Fi,"byteLength"),kr(Fi,"byteOffset")),Ge(Fi[ri],{getInt8:function(Ti){return sr(this,1,Ti)[0]<<24>>24},getUint8:function(Ti){return sr(this,1,Ti)[0]},getInt16:function(Ti){var gn=sr(this,2,Ti,arguments.length>1?arguments[1]:void 0);return(gn[1]<<8|gn[0])<<16>>16},getUint16:function(Ti){var gn=sr(this,2,Ti,arguments.length>1?arguments[1]:void 0);return gn[1]<<8|gn[0]},getInt32:function(Ti){return Nn(sr(this,4,Ti,arguments.length>1?arguments[1]:void 0))},getUint32:function(Ti){return Nn(sr(this,4,Ti,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(Ti){return ei(sr(this,4,Ti,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(Ti){return ei(sr(this,8,Ti,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(Ti,gn){fr(this,1,Ti,Bi,gn)},setUint8:function(Ti,gn){fr(this,1,Ti,Bi,gn)},setInt16:function(Ti,gn){fr(this,2,Ti,on,gn,arguments.length>2?arguments[2]:void 0)},setUint16:function(Ti,gn){fr(this,2,Ti,on,gn,arguments.length>2?arguments[2]:void 0)},setInt32:function(Ti,gn){fr(this,4,Ti,Wn,gn,arguments.length>2?arguments[2]:void 0)},setUint32:function(Ti,gn){fr(this,4,Ti,Wn,gn,arguments.length>2?arguments[2]:void 0)},setFloat32:function(Ti,gn){fr(this,4,Ti,An,gn,arguments.length>2?arguments[2]:void 0)},setFloat64:function(Ti,gn){fr(this,8,Ti,Gi,gn,arguments.length>2?arguments[2]:void 0)}});at(Ci,ht),at(Fi,qt),Fe.exports={ArrayBuffer:Ci,DataView:Fi}},1048:function(Fe,t,V){"use strict";var Oe=V(7908),Me=V(1400),De=V(7466),Be=Math.min;Fe.exports=[].copyWithin||function(Je,nt){var mt=Oe(this),Pt=De(mt.length),ot=Me(Je,Pt),vt=Me(nt,Pt),wt=arguments.length>2?arguments[2]:void 0,ai=Be((void 0===wt?Pt:Me(wt,Pt))-vt,Pt-ot),We=1;for(vt<ot&&ot<vt+ai&&(We=-1,vt+=ai-1,ot+=ai-1);ai-- >0;)vt in mt?mt[ot]=mt[vt]:delete mt[ot],ot+=We,vt+=We;return mt}},1285:function(Fe,t,V){"use strict";var Oe=V(7908),Me=V(1400),De=V(7466);Fe.exports=function(Ge){for(var Je=Oe(this),nt=De(Je.length),mt=arguments.length,Pt=Me(mt>1?arguments[1]:void 0,nt),ot=mt>2?arguments[2]:void 0,vt=void 0===ot?nt:Me(ot,nt);vt>Pt;)Je[Pt++]=Ge;return Je}},8533:function(Fe,t,V){"use strict";var Oe=V(2092).forEach,De=V(9341)("forEach");Fe.exports=De?[].forEach:function(Ge){return Oe(this,Ge,arguments.length>1?arguments[1]:void 0)}},8457:function(Fe,t,V){"use strict";var Oe=V(9974),Me=V(7908),De=V(3411),Be=V(7659),Ge=V(7466),Je=V(6135),nt=V(1246);Fe.exports=function(Pt){var at,si,Xt,jt,ht,qt,ot=Me(Pt),vt="function"==typeof this?this:Array,wt=arguments.length,ai=wt>1?arguments[1]:void 0,We=void 0!==ai,ni=nt(ot),li=0;if(We&&(ai=Oe(ai,wt>2?arguments[2]:void 0,2)),null==ni||vt==Array&&Be(ni))for(si=new vt(at=Ge(ot.length));at>li;li++)qt=We?ai(ot[li],li):ot[li],Je(si,li,qt);else for(ht=(jt=ni.call(ot)).next,si=new vt;!(Xt=ht.call(jt)).done;li++)qt=We?De(jt,ai,[Xt.value,li],!0):Xt.value,Je(si,li,qt);return si.length=li,si}},1318:function(Fe,t,V){var Oe=V(5656),Me=V(7466),De=V(1400),Be=function(Ge){return function(Je,nt,mt){var wt,Pt=Oe(Je),ot=Me(Pt.length),vt=De(mt,ot);if(Ge&&nt!=nt){for(;ot>vt;)if((wt=Pt[vt++])!=wt)return!0}else for(;ot>vt;vt++)if((Ge||vt in Pt)&&Pt[vt]===nt)return Ge||vt||0;return!Ge&&-1}};Fe.exports={includes:Be(!0),indexOf:Be(!1)}},2092:function(Fe,t,V){var Oe=V(9974),Me=V(8361),De=V(7908),Be=V(7466),Ge=V(5417),Je=[].push,nt=function(mt){var Pt=1==mt,ot=2==mt,vt=3==mt,wt=4==mt,ai=6==mt,We=7==mt,ni=5==mt||ai;return function(li,at,si,Xt){for(var Ci,Fi,jt=De(li),ht=Me(jt),qt=Oe(at,si,3),ri=Be(ht.length),mi=0,Vi=Xt||Ge,_i=Pt?Vi(li,ri):ot||We?Vi(li,0):void 0;ri>mi;mi++)if((ni||mi in ht)&&(Fi=qt(Ci=ht[mi],mi,jt),mt))if(Pt)_i[mi]=Fi;else if(Fi)switch(mt){case 3:return!0;case 5:return Ci;case 6:return mi;case 2:Je.call(_i,Ci)}else switch(mt){case 4:return!1;case 7:Je.call(_i,Ci)}return ai?-1:vt||wt?wt:_i}};Fe.exports={forEach:nt(0),map:nt(1),filter:nt(2),some:nt(3),every:nt(4),find:nt(5),findIndex:nt(6),filterOut:nt(7)}},6583:function(Fe,t,V){"use strict";var Oe=V(5656),Me=V(9958),De=V(7466),Be=V(9341),Ge=Math.min,Je=[].lastIndexOf,nt=!!Je&&1/[1].lastIndexOf(1,-0)<0,mt=Be("lastIndexOf");Fe.exports=nt||!mt?function(vt){if(nt)return Je.apply(this,arguments)||0;var wt=Oe(this),ai=De(wt.length),We=ai-1;for(arguments.length>1&&(We=Ge(We,Me(arguments[1]))),We<0&&(We=ai+We);We>=0;We--)if(We in wt&&wt[We]===vt)return We||0;return-1}:Je},1194:function(Fe,t,V){var Oe=V(7293),Me=V(5112),De=V(7392),Be=Me("species");Fe.exports=function(Ge){return De>=51||!Oe(function(){var Je=[];return(Je.constructor={})[Be]=function(){return{foo:1}},1!==Je[Ge](Boolean).foo})}},9341:function(Fe,t,V){"use strict";var Oe=V(7293);Fe.exports=function(Me,De){var Be=[][Me];return!!Be&&Oe(function(){Be.call(null,De||function(){throw 1},1)})}},3671:function(Fe,t,V){var Oe=V(3099),Me=V(7908),De=V(8361),Be=V(7466),Ge=function(Je){return function(nt,mt,Pt,ot){Oe(mt);var vt=Me(nt),wt=De(vt),ai=Be(vt.length),We=Je?ai-1:0,ni=Je?-1:1;if(Pt<2)for(;;){if(We in wt){ot=wt[We],We+=ni;break}if(We+=ni,Je?We<0:ai<=We)throw TypeError("Reduce of empty array with no initial value")}for(;Je?We>=0:ai>We;We+=ni)We in wt&&(ot=mt(ot,wt[We],We,vt));return ot}};Fe.exports={left:Ge(!1),right:Ge(!0)}},5417:function(Fe,t,V){var Oe=V(111),Me=V(3157),Be=V(5112)("species");Fe.exports=function(Ge,Je){var nt;return Me(Ge)&&("function"!=typeof(nt=Ge.constructor)||nt!==Array&&!Me(nt.prototype)?Oe(nt)&&null===(nt=nt[Be])&&(nt=void 0):nt=void 0),new(void 0===nt?Array:nt)(0===Je?0:Je)}},3411:function(Fe,t,V){var Oe=V(9670),Me=V(9212);Fe.exports=function(De,Be,Ge,Je){try{return Je?Be(Oe(Ge)[0],Ge[1]):Be(Ge)}catch(nt){throw Me(De),nt}}},7072:function(Fe,t,V){var Me=V(5112)("iterator"),De=!1;try{var Be=0,Ge={next:function(){return{done:!!Be++}},return:function(){De=!0}};Ge[Me]=function(){return this},Array.from(Ge,function(){throw 2})}catch{}Fe.exports=function(Je,nt){if(!nt&&!De)return!1;var mt=!1;try{var Pt={};Pt[Me]=function(){return{next:function(){return{done:mt=!0}}}},Je(Pt)}catch{}return mt}},4326:function(Fe){var t={}.toString;Fe.exports=function(V){return t.call(V).slice(8,-1)}},648:function(Fe,t,V){var Oe=V(1694),Me=V(4326),Be=V(5112)("toStringTag"),Ge="Arguments"==Me(function(){return arguments}());Fe.exports=Oe?Me:function(nt){var mt,Pt,ot;return void 0===nt?"Undefined":null===nt?"Null":"string"==typeof(Pt=function(nt,mt){try{return nt[mt]}catch{}}(mt=Object(nt),Be))?Pt:Ge?Me(mt):"Object"==(ot=Me(mt))&&"function"==typeof mt.callee?"Arguments":ot}},9920:function(Fe,t,V){var Oe=V(6656),Me=V(3887),De=V(1236),Be=V(3070);Fe.exports=function(Ge,Je){for(var nt=Me(Je),mt=Be.f,Pt=De.f,ot=0;ot<nt.length;ot++){var vt=nt[ot];Oe(Ge,vt)||mt(Ge,vt,Pt(Je,vt))}}},8544:function(Fe,t,V){var Oe=V(7293);Fe.exports=!Oe(function(){function Me(){}return Me.prototype.constructor=null,Object.getPrototypeOf(new Me)!==Me.prototype})},4994:function(Fe,t,V){"use strict";var Oe=V(3383).IteratorPrototype,Me=V(30),De=V(9114),Be=V(8003),Ge=V(7497),Je=function(){return this};Fe.exports=function(nt,mt,Pt){var ot=mt+" Iterator";return nt.prototype=Me(Oe,{next:De(1,Pt)}),Be(nt,ot,!1,!0),Ge[ot]=Je,nt}},8880:function(Fe,t,V){var Oe=V(9781),Me=V(3070),De=V(9114);Fe.exports=Oe?function(Be,Ge,Je){return Me.f(Be,Ge,De(1,Je))}:function(Be,Ge,Je){return Be[Ge]=Je,Be}},9114:function(Fe){Fe.exports=function(t,V){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:V}}},6135:function(Fe,t,V){"use strict";var Oe=V(7593),Me=V(3070),De=V(9114);Fe.exports=function(Be,Ge,Je){var nt=Oe(Ge);nt in Be?Me.f(Be,nt,De(0,Je)):Be[nt]=Je}},654:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(4994),De=V(9518),Be=V(7674),Ge=V(8003),Je=V(8880),nt=V(1320),mt=V(5112),Pt=V(1913),ot=V(7497),vt=V(3383),wt=vt.IteratorPrototype,ai=vt.BUGGY_SAFARI_ITERATORS,We=mt("iterator"),li="values",at="entries",si=function(){return this};Fe.exports=function(Xt,jt,ht,qt,ri,mi,Vi){Me(ht,jt,qt);var ei,Bi,on,_i=function(Wn){if(Wn===ri&&mn)return mn;if(!ai&&Wn in qi)return qi[Wn];switch(Wn){case"keys":case li:case at:return function(){return new ht(this,Wn)}}return function(){return new ht(this)}},Ci=jt+" Iterator",Fi=!1,qi=Xt.prototype,xn=qi[We]||qi["@@iterator"]||ri&&qi[ri],mn=!ai&&xn||_i(ri),Vn="Array"==jt&&qi.entries||xn;if(Vn&&(ei=De(Vn.call(new Xt)),wt!==Object.prototype&&ei.next&&(!Pt&&De(ei)!==wt&&(Be?Be(ei,wt):"function"!=typeof ei[We]&&Je(ei,We,si)),Ge(ei,Ci,!0,!0),Pt&&(ot[Ci]=si))),ri==li&&xn&&xn.name!==li&&(Fi=!0,mn=function(){return xn.call(this)}),(!Pt||Vi)&&qi[We]!==mn&&Je(qi,We,mn),ot[jt]=mn,ri)if(Bi={values:_i(li),keys:mi?mn:_i("keys"),entries:_i(at)},Vi)for(on in Bi)(ai||Fi||!(on in qi))&&nt(qi,on,Bi[on]);else Oe({target:jt,proto:!0,forced:ai||Fi},Bi);return Bi}},9781:function(Fe,t,V){var Oe=V(7293);Fe.exports=!Oe(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(Fe,t,V){var Oe=V(7854),Me=V(111),De=Oe.document,Be=Me(De)&&Me(De.createElement);Fe.exports=function(Ge){return Be?De.createElement(Ge):{}}},8324:function(Fe){Fe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(Fe,t,V){var Oe=V(5005);Fe.exports=Oe("navigator","userAgent")||""},7392:function(Fe,t,V){var Je,nt,Oe=V(7854),Me=V(8113),De=Oe.process,Be=De&&De.versions,Ge=Be&&Be.v8;Ge?nt=(Je=Ge.split("."))[0]+Je[1]:Me&&(!(Je=Me.match(/Edge\/(\d+)/))||Je[1]>=74)&&(Je=Me.match(/Chrome\/(\d+)/))&&(nt=Je[1]),Fe.exports=nt&&+nt},748:function(Fe){Fe.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(Fe,t,V){var Oe=V(7854),Me=V(1236).f,De=V(8880),Be=V(1320),Ge=V(3505),Je=V(9920),nt=V(4705);Fe.exports=function(mt,Pt){var We,ni,li,at,si,ot=mt.target,vt=mt.global,wt=mt.stat;if(We=vt?Oe:wt?Oe[ot]||Ge(ot,{}):(Oe[ot]||{}).prototype)for(ni in Pt){if(at=Pt[ni],li=mt.noTargetGet?(si=Me(We,ni))&&si.value:We[ni],!nt(vt?ni:ot+(wt?".":"#")+ni,mt.forced)&&void 0!==li){if(typeof at==typeof li)continue;Je(at,li)}(mt.sham||li&&li.sham)&&De(at,"sham",!0),Be(We,ni,at,mt)}}},7293:function(Fe){Fe.exports=function(t){try{return!!t()}catch{return!0}}},7007:function(Fe,t,V){"use strict";V(4916);var Oe=V(1320),Me=V(7293),De=V(5112),Be=V(2261),Ge=V(8880),Je=De("species"),nt=!Me(function(){var wt=/./;return wt.exec=function(){var ai=[];return ai.groups={a:"7"},ai},"7"!=="".replace(wt,"$<a>")}),mt="$0"==="a".replace(/./,"$0"),Pt=De("replace"),ot=!!/./[Pt]&&""===/./[Pt]("a","$0"),vt=!Me(function(){var wt=/(?:)/,ai=wt.exec;wt.exec=function(){return ai.apply(this,arguments)};var We="ab".split(wt);return 2!==We.length||"a"!==We[0]||"b"!==We[1]});Fe.exports=function(wt,ai,We,ni){var li=De(wt),at=!Me(function(){var ri={};return ri[li]=function(){return 7},7!=""[wt](ri)}),si=at&&!Me(function(){var ri=!1,mi=/a/;return"split"===wt&&((mi={}).constructor={},mi.constructor[Je]=function(){return mi},mi.flags="",mi[li]=/./[li]),mi.exec=function(){return ri=!0,null},mi[li](""),!ri});if(!at||!si||"replace"===wt&&(!nt||!mt||ot)||"split"===wt&&!vt){var Xt=/./[li],jt=We(li,""[wt],function(ri,mi,Vi,_i,Ci){return mi.exec===Be?at&&!Ci?{done:!0,value:Xt.call(mi,Vi,_i)}:{done:!0,value:ri.call(Vi,mi,_i)}:{done:!1}},{REPLACE_KEEPS_$0:mt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ot}),qt=jt[1];Oe(String.prototype,wt,jt[0]),Oe(RegExp.prototype,li,2==ai?function(ri,mi){return qt.call(ri,this,mi)}:function(ri){return qt.call(ri,this)})}ni&&Ge(RegExp.prototype[li],"sham",!0)}},9974:function(Fe,t,V){var Oe=V(3099);Fe.exports=function(Me,De,Be){if(Oe(Me),void 0===De)return Me;switch(Be){case 0:return function(){return Me.call(De)};case 1:return function(Ge){return Me.call(De,Ge)};case 2:return function(Ge,Je){return Me.call(De,Ge,Je)};case 3:return function(Ge,Je,nt){return Me.call(De,Ge,Je,nt)}}return function(){return Me.apply(De,arguments)}}},5005:function(Fe,t,V){var Oe=V(857),Me=V(7854),De=function(Be){return"function"==typeof Be?Be:void 0};Fe.exports=function(Be,Ge){return arguments.length<2?De(Oe[Be])||De(Me[Be]):Oe[Be]&&Oe[Be][Ge]||Me[Be]&&Me[Be][Ge]}},1246:function(Fe,t,V){var Oe=V(648),Me=V(7497),Be=V(5112)("iterator");Fe.exports=function(Ge){if(null!=Ge)return Ge[Be]||Ge["@@iterator"]||Me[Oe(Ge)]}},8554:function(Fe,t,V){var Oe=V(9670),Me=V(1246);Fe.exports=function(De){var Be=Me(De);if("function"!=typeof Be)throw TypeError(String(De)+" is not iterable");return Oe(Be.call(De))}},647:function(Fe,t,V){var Oe=V(7908),Me=Math.floor,De="".replace,Be=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ge=/\$([$&'`]|\d\d?)/g;Fe.exports=function(Je,nt,mt,Pt,ot,vt){var wt=mt+Je.length,ai=Pt.length,We=Ge;return void 0!==ot&&(ot=Oe(ot),We=Be),De.call(vt,We,function(ni,li){var at;switch(li.charAt(0)){case"$":return"$";case"&":return Je;case"`":return nt.slice(0,mt);case"'":return nt.slice(wt);case"<":at=ot[li.slice(1,-1)];break;default:var si=+li;if(0===si)return ni;if(si>ai){var Xt=Me(si/10);return 0===Xt?ni:Xt<=ai?void 0===Pt[Xt-1]?li.charAt(1):Pt[Xt-1]+li.charAt(1):ni}at=Pt[si-1]}return void 0===at?"":at})}},7854:function(Fe,t,V){var Oe=function(Me){return Me&&Me.Math==Math&&Me};Fe.exports=Oe("object"==typeof globalThis&&globalThis)||Oe("object"==typeof window&&window)||Oe("object"==typeof self&&self)||Oe("object"==typeof V.g&&V.g)||function(){return this}()||Function("return this")()},6656:function(Fe){var t={}.hasOwnProperty;Fe.exports=function(V,Oe){return t.call(V,Oe)}},3501:function(Fe){Fe.exports={}},490:function(Fe,t,V){var Oe=V(5005);Fe.exports=Oe("document","documentElement")},4664:function(Fe,t,V){var Oe=V(9781),Me=V(7293),De=V(317);Fe.exports=!Oe&&!Me(function(){return 7!=Object.defineProperty(De("div"),"a",{get:function(){return 7}}).a})},1179:function(Fe){var t=Math.abs,V=Math.pow,Oe=Math.floor,Me=Math.log,De=Math.LN2;Fe.exports={pack:function(Je,nt,mt){var li,at,si,Pt=new Array(mt),ot=8*mt-nt-1,vt=(1<<ot)-1,wt=vt>>1,ai=23===nt?V(2,-24)-V(2,-77):0,We=Je<0||0===Je&&1/Je<0?1:0,ni=0;for((Je=t(Je))!=Je||Je===1/0?(at=Je!=Je?1:0,li=vt):(li=Oe(Me(Je)/De),Je*(si=V(2,-li))<1&&(li--,si*=2),(Je+=li+wt>=1?ai/si:ai*V(2,1-wt))*si>=2&&(li++,si/=2),li+wt>=vt?(at=0,li=vt):li+wt>=1?(at=(Je*si-1)*V(2,nt),li+=wt):(at=Je*V(2,wt-1)*V(2,nt),li=0));nt>=8;Pt[ni++]=255&at,at/=256,nt-=8);for(li=li<<nt|at,ot+=nt;ot>0;Pt[ni++]=255&li,li/=256,ot-=8);return Pt[--ni]|=128*We,Pt},unpack:function(Je,nt){var li,mt=Je.length,Pt=8*mt-nt-1,ot=(1<<Pt)-1,vt=ot>>1,wt=Pt-7,ai=mt-1,We=Je[ai--],ni=127&We;for(We>>=7;wt>0;ni=256*ni+Je[ai],ai--,wt-=8);for(li=ni&(1<<-wt)-1,ni>>=-wt,wt+=nt;wt>0;li=256*li+Je[ai],ai--,wt-=8);if(0===ni)ni=1-vt;else{if(ni===ot)return li?NaN:We?-1/0:1/0;li+=V(2,nt),ni-=vt}return(We?-1:1)*li*V(2,ni-nt)}}},8361:function(Fe,t,V){var Oe=V(7293),Me=V(4326),De="".split;Fe.exports=Oe(function(){return!Object("z").propertyIsEnumerable(0)})?function(Be){return"String"==Me(Be)?De.call(Be,""):Object(Be)}:Object},9587:function(Fe,t,V){var Oe=V(111),Me=V(7674);Fe.exports=function(De,Be,Ge){var Je,nt;return Me&&"function"==typeof(Je=Be.constructor)&&Je!==Ge&&Oe(nt=Je.prototype)&&nt!==Ge.prototype&&Me(De,nt),De}},2788:function(Fe,t,V){var Oe=V(5465),Me=Function.toString;"function"!=typeof Oe.inspectSource&&(Oe.inspectSource=function(De){return Me.call(De)}),Fe.exports=Oe.inspectSource},9909:function(Fe,t,V){var ot,vt,wt,Oe=V(8536),Me=V(7854),De=V(111),Be=V(8880),Ge=V(6656),Je=V(5465),nt=V(6200),mt=V(3501);if(Oe){var ni=Je.state||(Je.state=new(0,Me.WeakMap)),li=ni.get,at=ni.has,si=ni.set;ot=function(jt,ht){return ht.facade=jt,si.call(ni,jt,ht),ht},vt=function(jt){return li.call(ni,jt)||{}},wt=function(jt){return at.call(ni,jt)}}else{var Xt=nt("state");mt[Xt]=!0,ot=function(jt,ht){return ht.facade=jt,Be(jt,Xt,ht),ht},vt=function(jt){return Ge(jt,Xt)?jt[Xt]:{}},wt=function(jt){return Ge(jt,Xt)}}Fe.exports={set:ot,get:vt,has:wt,enforce:function(jt){return wt(jt)?vt(jt):ot(jt,{})},getterFor:function(jt){return function(ht){var qt;if(!De(ht)||(qt=vt(ht)).type!==jt)throw TypeError("Incompatible receiver, "+jt+" required");return qt}}}},7659:function(Fe,t,V){var Oe=V(5112),Me=V(7497),De=Oe("iterator"),Be=Array.prototype;Fe.exports=function(Ge){return void 0!==Ge&&(Me.Array===Ge||Be[De]===Ge)}},3157:function(Fe,t,V){var Oe=V(4326);Fe.exports=Array.isArray||function(De){return"Array"==Oe(De)}},4705:function(Fe,t,V){var Oe=V(7293),Me=/#|\.prototype\./,De=function(mt,Pt){var ot=Ge[Be(mt)];return ot==nt||ot!=Je&&("function"==typeof Pt?Oe(Pt):!!Pt)},Be=De.normalize=function(mt){return String(mt).replace(Me,".").toLowerCase()},Ge=De.data={},Je=De.NATIVE="N",nt=De.POLYFILL="P";Fe.exports=De},111:function(Fe){Fe.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:function(Fe){Fe.exports=!1},7850:function(Fe,t,V){var Oe=V(111),Me=V(4326),Be=V(5112)("match");Fe.exports=function(Ge){var Je;return Oe(Ge)&&(void 0!==(Je=Ge[Be])?!!Je:"RegExp"==Me(Ge))}},9212:function(Fe,t,V){var Oe=V(9670);Fe.exports=function(Me){var De=Me.return;if(void 0!==De)return Oe(De.call(Me)).value}},3383:function(Fe,t,V){"use strict";var ot,vt,wt,Oe=V(7293),Me=V(9518),De=V(8880),Be=V(6656),Ge=V(5112),Je=V(1913),nt=Ge("iterator"),mt=!1;[].keys&&("next"in(wt=[].keys())?(vt=Me(Me(wt)))!==Object.prototype&&(ot=vt):mt=!0);var ai=null==ot||Oe(function(){var We={};return ot[nt].call(We)!==We});ai&&(ot={}),(!Je||ai)&&!Be(ot,nt)&&De(ot,nt,function(){return this}),Fe.exports={IteratorPrototype:ot,BUGGY_SAFARI_ITERATORS:mt}},7497:function(Fe){Fe.exports={}},133:function(Fe,t,V){var Oe=V(7293);Fe.exports=!!Object.getOwnPropertySymbols&&!Oe(function(){return!String(Symbol())})},590:function(Fe,t,V){var Oe=V(7293),Me=V(5112),De=V(1913),Be=Me("iterator");Fe.exports=!Oe(function(){var Ge=new URL("b?a=1&b=2&c=3","http://a"),Je=Ge.searchParams,nt="";return Ge.pathname="c%20d",Je.forEach(function(mt,Pt){Je.delete("b"),nt+=Pt+mt}),De&&!Ge.toJSON||!Je.sort||"http://a/c%20d?a=1&c=3"!==Ge.href||"3"!==Je.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!Je[Be]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==nt||"x"!==new URL("http://x",void 0).host})},8536:function(Fe,t,V){var Oe=V(7854),Me=V(2788),De=Oe.WeakMap;Fe.exports="function"==typeof De&&/native code/.test(Me(De))},1574:function(Fe,t,V){"use strict";var Oe=V(9781),Me=V(7293),De=V(1956),Be=V(5181),Ge=V(5296),Je=V(7908),nt=V(8361),mt=Object.assign,Pt=Object.defineProperty;Fe.exports=!mt||Me(function(){if(Oe&&1!==mt({b:1},mt(Pt({},"a",{enumerable:!0,get:function(){Pt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var ot={},vt={},wt=Symbol(),ai="abcdefghijklmnopqrst";return ot[wt]=7,ai.split("").forEach(function(We){vt[We]=We}),7!=mt({},ot)[wt]||De(mt({},vt)).join("")!=ai})?function(vt,wt){for(var ai=Je(vt),We=arguments.length,ni=1,li=Be.f,at=Ge.f;We>ni;)for(var qt,si=nt(arguments[ni++]),Xt=li?De(si).concat(li(si)):De(si),jt=Xt.length,ht=0;jt>ht;)qt=Xt[ht++],(!Oe||at.call(si,qt))&&(ai[qt]=si[qt]);return ai}:mt},30:function(Fe,t,V){var at,Oe=V(9670),Me=V(6048),De=V(748),Be=V(3501),Ge=V(490),Je=V(317),nt=V(6200),ot="prototype",vt="script",wt=nt("IE_PROTO"),ai=function(){},We=function(Xt){return"<script>"+Xt+"</"+vt+">"},si=function(){try{at=document.domain&&new ActiveXObject("htmlfile")}catch{}si=at?function(Xt){Xt.write(We("")),Xt.close();var jt=Xt.parentWindow.Object;return Xt=null,jt}(at):function(){var ht,Xt=Je("iframe");return Xt.style.display="none",Ge.appendChild(Xt),Xt.src=String("javascript:"),(ht=Xt.contentWindow.document).open(),ht.write(We("document.F=Object")),ht.close(),ht.F}();for(var Xt=De.length;Xt--;)delete si[ot][De[Xt]];return si()};Be[wt]=!0,Fe.exports=Object.create||function(jt,ht){var qt;return null!==jt?(ai[ot]=Oe(jt),qt=new ai,ai[ot]=null,qt[wt]=jt):qt=si(),void 0===ht?qt:Me(qt,ht)}},6048:function(Fe,t,V){var Oe=V(9781),Me=V(3070),De=V(9670),Be=V(1956);Fe.exports=Oe?Object.defineProperties:function(Je,nt){De(Je);for(var vt,mt=Be(nt),Pt=mt.length,ot=0;Pt>ot;)Me.f(Je,vt=mt[ot++],nt[vt]);return Je}},3070:function(Fe,t,V){var Oe=V(9781),Me=V(4664),De=V(9670),Be=V(7593),Ge=Object.defineProperty;t.f=Oe?Ge:function(nt,mt,Pt){if(De(nt),mt=Be(mt,!0),De(Pt),Me)try{return Ge(nt,mt,Pt)}catch{}if("get"in Pt||"set"in Pt)throw TypeError("Accessors not supported");return"value"in Pt&&(nt[mt]=Pt.value),nt}},1236:function(Fe,t,V){var Oe=V(9781),Me=V(5296),De=V(9114),Be=V(5656),Ge=V(7593),Je=V(6656),nt=V(4664),mt=Object.getOwnPropertyDescriptor;t.f=Oe?mt:function(ot,vt){if(ot=Be(ot),vt=Ge(vt,!0),nt)try{return mt(ot,vt)}catch{}if(Je(ot,vt))return De(!Me.f.call(ot,vt),ot[vt])}},8006:function(Fe,t,V){var Oe=V(6324),De=V(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(Ge){return Oe(Ge,De)}},5181:function(Fe,t){t.f=Object.getOwnPropertySymbols},9518:function(Fe,t,V){var Oe=V(6656),Me=V(7908),De=V(6200),Be=V(8544),Ge=De("IE_PROTO"),Je=Object.prototype;Fe.exports=Be?Object.getPrototypeOf:function(nt){return nt=Me(nt),Oe(nt,Ge)?nt[Ge]:"function"==typeof nt.constructor&&nt instanceof nt.constructor?nt.constructor.prototype:nt instanceof Object?Je:null}},6324:function(Fe,t,V){var Oe=V(6656),Me=V(5656),De=V(1318).indexOf,Be=V(3501);Fe.exports=function(Ge,Je){var ot,nt=Me(Ge),mt=0,Pt=[];for(ot in nt)!Oe(Be,ot)&&Oe(nt,ot)&&Pt.push(ot);for(;Je.length>mt;)Oe(nt,ot=Je[mt++])&&(~De(Pt,ot)||Pt.push(ot));return Pt}},1956:function(Fe,t,V){var Oe=V(6324),Me=V(748);Fe.exports=Object.keys||function(Be){return Oe(Be,Me)}},5296:function(Fe,t){"use strict";var V={}.propertyIsEnumerable,Oe=Object.getOwnPropertyDescriptor,Me=Oe&&!V.call({1:2},1);t.f=Me?function(Be){var Ge=Oe(this,Be);return!!Ge&&Ge.enumerable}:V},7674:function(Fe,t,V){var Oe=V(9670),Me=V(6077);Fe.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var Ge,De=!1,Be={};try{(Ge=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(Be,[]),De=Be instanceof Array}catch{}return function(nt,mt){return Oe(nt),Me(mt),De?Ge.call(nt,mt):nt.__proto__=mt,nt}}():void 0)},288:function(Fe,t,V){"use strict";var Oe=V(1694),Me=V(648);Fe.exports=Oe?{}.toString:function(){return"[object "+Me(this)+"]"}},3887:function(Fe,t,V){var Oe=V(5005),Me=V(8006),De=V(5181),Be=V(9670);Fe.exports=Oe("Reflect","ownKeys")||function(Je){var nt=Me.f(Be(Je)),mt=De.f;return mt?nt.concat(mt(Je)):nt}},857:function(Fe,t,V){var Oe=V(7854);Fe.exports=Oe},2248:function(Fe,t,V){var Oe=V(1320);Fe.exports=function(Me,De,Be){for(var Ge in De)Oe(Me,Ge,De[Ge],Be);return Me}},1320:function(Fe,t,V){var Oe=V(7854),Me=V(8880),De=V(6656),Be=V(3505),Ge=V(2788),Je=V(9909),nt=Je.get,mt=Je.enforce,Pt=String(String).split("String");(Fe.exports=function(ot,vt,wt,ai){var at,We=!!ai&&!!ai.unsafe,ni=!!ai&&!!ai.enumerable,li=!!ai&&!!ai.noTargetGet;"function"==typeof wt&&("string"==typeof vt&&!De(wt,"name")&&Me(wt,"name",vt),(at=mt(wt)).source||(at.source=Pt.join("string"==typeof vt?vt:""))),ot!==Oe?(We?!li&&ot[vt]&&(ni=!0):delete ot[vt],ni?ot[vt]=wt:Me(ot,vt,wt)):ni?ot[vt]=wt:Be(vt,wt)})(Function.prototype,"toString",function(){return"function"==typeof this&&nt(this).source||Ge(this)})},7651:function(Fe,t,V){var Oe=V(4326),Me=V(2261);Fe.exports=function(De,Be){var Ge=De.exec;if("function"==typeof Ge){var Je=Ge.call(De,Be);if("object"!=typeof Je)throw TypeError("RegExp exec method returned something other than an Object or null");return Je}if("RegExp"!==Oe(De))throw TypeError("RegExp#exec called on incompatible receiver");return Me.call(De,Be)}},2261:function(Fe,t,V){"use strict";var ot,vt,Oe=V(7066),Me=V(2999),De=RegExp.prototype.exec,Be=String.prototype.replace,Ge=De,Je=(vt=/b*/g,De.call(ot=/a/,"a"),De.call(vt,"a"),0!==ot.lastIndex||0!==vt.lastIndex),nt=Me.UNSUPPORTED_Y||Me.BROKEN_CARET,mt=void 0!==/()??/.exec("")[1];(Je||mt||nt)&&(Ge=function(vt){var ai,We,ni,li,wt=this,at=nt&&wt.sticky,si=Oe.call(wt),Xt=wt.source,jt=0,ht=vt;return at&&(-1===(si=si.replace("y","")).indexOf("g")&&(si+="g"),ht=String(vt).slice(wt.lastIndex),wt.lastIndex>0&&(!wt.multiline||wt.multiline&&"\n"!==vt[wt.lastIndex-1])&&(Xt="(?: "+Xt+")",ht=" "+ht,jt++),We=new RegExp("^(?:"+Xt+")",si)),mt&&(We=new RegExp("^"+Xt+"$(?!\\s)",si)),Je&&(ai=wt.lastIndex),ni=De.call(at?We:wt,ht),at?ni?(ni.input=ni.input.slice(jt),ni[0]=ni[0].slice(jt),ni.index=wt.lastIndex,wt.lastIndex+=ni[0].length):wt.lastIndex=0:Je&&ni&&(wt.lastIndex=wt.global?ni.index+ni[0].length:ai),mt&&ni&&ni.length>1&&Be.call(ni[0],We,function(){for(li=1;li<arguments.length-2;li++)void 0===arguments[li]&&(ni[li]=void 0)}),ni}),Fe.exports=Ge},7066:function(Fe,t,V){"use strict";var Oe=V(9670);Fe.exports=function(){var Me=Oe(this),De="";return Me.global&&(De+="g"),Me.ignoreCase&&(De+="i"),Me.multiline&&(De+="m"),Me.dotAll&&(De+="s"),Me.unicode&&(De+="u"),Me.sticky&&(De+="y"),De}},2999:function(Fe,t,V){"use strict";var Oe=V(7293);function Me(De,Be){return RegExp(De,Be)}t.UNSUPPORTED_Y=Oe(function(){var De=Me("a","y");return De.lastIndex=2,null!=De.exec("abcd")}),t.BROKEN_CARET=Oe(function(){var De=Me("^r","gy");return De.lastIndex=2,null!=De.exec("str")})},4488:function(Fe){Fe.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:function(Fe,t,V){var Oe=V(7854),Me=V(8880);Fe.exports=function(De,Be){try{Me(Oe,De,Be)}catch{Oe[De]=Be}return Be}},6340:function(Fe,t,V){"use strict";var Oe=V(5005),Me=V(3070),De=V(5112),Be=V(9781),Ge=De("species");Fe.exports=function(Je){var nt=Oe(Je);Be&&nt&&!nt[Ge]&&(0,Me.f)(nt,Ge,{configurable:!0,get:function(){return this}})}},8003:function(Fe,t,V){var Oe=V(3070).f,Me=V(6656),Be=V(5112)("toStringTag");Fe.exports=function(Ge,Je,nt){Ge&&!Me(Ge=nt?Ge:Ge.prototype,Be)&&Oe(Ge,Be,{configurable:!0,value:Je})}},6200:function(Fe,t,V){var Oe=V(2309),Me=V(9711),De=Oe("keys");Fe.exports=function(Be){return De[Be]||(De[Be]=Me(Be))}},5465:function(Fe,t,V){var Oe=V(7854),Me=V(3505),De="__core-js_shared__",Be=Oe[De]||Me(De,{});Fe.exports=Be},2309:function(Fe,t,V){var Oe=V(1913),Me=V(5465);(Fe.exports=function(De,Be){return Me[De]||(Me[De]=void 0!==Be?Be:{})})("versions",[]).push({version:"3.9.0",mode:Oe?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(Fe,t,V){var Oe=V(9670),Me=V(3099),Be=V(5112)("species");Fe.exports=function(Ge,Je){var mt,nt=Oe(Ge).constructor;return void 0===nt||null==(mt=Oe(nt)[Be])?Je:Me(mt)}},8710:function(Fe,t,V){var Oe=V(9958),Me=V(4488),De=function(Be){return function(Ge,Je){var ot,vt,nt=String(Me(Ge)),mt=Oe(Je),Pt=nt.length;return mt<0||mt>=Pt?Be?"":void 0:(ot=nt.charCodeAt(mt))<55296||ot>56319||mt+1===Pt||(vt=nt.charCodeAt(mt+1))<56320||vt>57343?Be?nt.charAt(mt):ot:Be?nt.slice(mt,mt+2):vt-56320+(ot-55296<<10)+65536}};Fe.exports={codeAt:De(!1),charAt:De(!0)}},3197:function(Fe){"use strict";var t=2147483647,mt=/[^\0-\u007E]/,Pt=/[.\u3002\uFF0E\uFF61]/g,ot="Overflow: input needs wider integers to process",wt=Math.floor,ai=String.fromCharCode,ni=function(si){return si+22+75*(si<26)},li=function(si,Xt,jt){var ht=0;for(si=jt?wt(si/700):si>>1,si+=wt(si/Xt);si>455;ht+=36)si=wt(si/35);return wt(ht+36*si/(si+38))},at=function(si){var mi,Vi,Xt=[],jt=(si=function(si){for(var Xt=[],jt=0,ht=si.length;jt<ht;){var qt=si.charCodeAt(jt++);if(qt>=55296&&qt<=56319&&jt<ht){var ri=si.charCodeAt(jt++);56320==(64512&ri)?Xt.push(((1023&qt)<<10)+(1023&ri)+65536):(Xt.push(qt),jt--)}else Xt.push(qt)}return Xt}(si)).length,ht=128,qt=0,ri=72;for(mi=0;mi<si.length;mi++)(Vi=si[mi])<128&&Xt.push(ai(Vi));var _i=Xt.length,Ci=_i;for(_i&&Xt.push("-");Ci<jt;){var Fi=t;for(mi=0;mi<si.length;mi++)(Vi=si[mi])>=ht&&Vi<Fi&&(Fi=Vi);var qi=Ci+1;if(Fi-ht>wt((t-qt)/qi))throw RangeError(ot);for(qt+=(Fi-ht)*qi,ht=Fi,mi=0;mi<si.length;mi++){if((Vi=si[mi])<ht&&++qt>t)throw RangeError(ot);if(Vi==ht){for(var xn=qt,mn=36;;mn+=36){var Vn=mn<=ri?1:mn>=ri+26?26:mn-ri;if(xn<Vn)break;var ei=xn-Vn,Bi=36-Vn;Xt.push(ai(ni(Vn+ei%Bi))),xn=wt(ei/Bi)}Xt.push(ai(ni(xn))),ri=li(qt,qi,Ci==_i),qt=0,++Ci}}++qt,++ht}return Xt.join("")};Fe.exports=function(si){var ht,qt,Xt=[],jt=si.toLowerCase().replace(Pt,".").split(".");for(ht=0;ht<jt.length;ht++)Xt.push(mt.test(qt=jt[ht])?"xn--"+at(qt):qt);return Xt.join(".")}},6091:function(Fe,t,V){var Oe=V(7293),Me=V(1361);Fe.exports=function(Be){return Oe(function(){return!!Me[Be]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[Be]()||Me[Be].name!==Be})}},3111:function(Fe,t,V){var Oe=V(4488),De="["+V(1361)+"]",Be=RegExp("^"+De+De+"*"),Ge=RegExp(De+De+"*$"),Je=function(nt){return function(mt){var Pt=String(Oe(mt));return 1&nt&&(Pt=Pt.replace(Be,"")),2&nt&&(Pt=Pt.replace(Ge,"")),Pt}};Fe.exports={start:Je(1),end:Je(2),trim:Je(3)}},1400:function(Fe,t,V){var Oe=V(9958),Me=Math.max,De=Math.min;Fe.exports=function(Be,Ge){var Je=Oe(Be);return Je<0?Me(Je+Ge,0):De(Je,Ge)}},7067:function(Fe,t,V){var Oe=V(9958),Me=V(7466);Fe.exports=function(De){if(void 0===De)return 0;var Be=Oe(De),Ge=Me(Be);if(Be!==Ge)throw RangeError("Wrong length or index");return Ge}},5656:function(Fe,t,V){var Oe=V(8361),Me=V(4488);Fe.exports=function(De){return Oe(Me(De))}},9958:function(Fe){var t=Math.ceil,V=Math.floor;Fe.exports=function(Oe){return isNaN(Oe=+Oe)?0:(Oe>0?V:t)(Oe)}},7466:function(Fe,t,V){var Oe=V(9958),Me=Math.min;Fe.exports=function(De){return De>0?Me(Oe(De),9007199254740991):0}},7908:function(Fe,t,V){var Oe=V(4488);Fe.exports=function(Me){return Object(Oe(Me))}},4590:function(Fe,t,V){var Oe=V(3002);Fe.exports=function(Me,De){var Be=Oe(Me);if(Be%De)throw RangeError("Wrong offset");return Be}},3002:function(Fe,t,V){var Oe=V(9958);Fe.exports=function(Me){var De=Oe(Me);if(De<0)throw RangeError("The argument can't be less than 0");return De}},7593:function(Fe,t,V){var Oe=V(111);Fe.exports=function(Me,De){if(!Oe(Me))return Me;var Be,Ge;if(De&&"function"==typeof(Be=Me.toString)&&!Oe(Ge=Be.call(Me))||"function"==typeof(Be=Me.valueOf)&&!Oe(Ge=Be.call(Me))||!De&&"function"==typeof(Be=Me.toString)&&!Oe(Ge=Be.call(Me)))return Ge;throw TypeError("Can't convert object to primitive value")}},1694:function(Fe,t,V){var De={};De[V(5112)("toStringTag")]="z",Fe.exports="[object z]"===String(De)},9843:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(7854),De=V(9781),Be=V(3832),Ge=V(260),Je=V(3331),nt=V(5787),mt=V(9114),Pt=V(8880),ot=V(7466),vt=V(7067),wt=V(4590),ai=V(7593),We=V(6656),ni=V(648),li=V(111),at=V(30),si=V(7674),Xt=V(8006).f,jt=V(7321),ht=V(2092).forEach,qt=V(6340),ri=V(3070),mi=V(1236),Vi=V(9909),_i=V(9587),Ci=Vi.get,Fi=Vi.set,qi=ri.f,xn=mi.f,mn=Math.round,Vn=Me.RangeError,ei=Je.ArrayBuffer,Bi=Je.DataView,on=Ge.NATIVE_ARRAY_BUFFER_VIEWS,Wn=Ge.TYPED_ARRAY_TAG,Nn=Ge.TypedArray,An=Ge.TypedArrayPrototype,Gi=Ge.aTypedArrayConstructor,kr=Ge.isTypedArray,sr="BYTES_PER_ELEMENT",fr="Wrong length",wn=function(tn,Ti){for(var gn=0,Pn=Ti.length,Dr=new(Gi(tn))(Pn);Pn>gn;)Dr[gn]=Ti[gn++];return Dr},en=function(tn,Ti){qi(tn,Ti,{get:function(){return Ci(this)[Ti]}})},_n=function(tn){var Ti;return tn instanceof ei||"ArrayBuffer"==(Ti=ni(tn))||"SharedArrayBuffer"==Ti},Xi=function(tn,Ti){return kr(tn)&&"symbol"!=typeof Ti&&Ti in tn&&String(+Ti)==String(Ti)},ji=function(Ti,gn){return Xi(Ti,gn=ai(gn,!0))?mt(2,Ti[gn]):xn(Ti,gn)},Gn=function(Ti,gn,Pn){return!(Xi(Ti,gn=ai(gn,!0))&&li(Pn)&&We(Pn,"value"))||We(Pn,"get")||We(Pn,"set")||Pn.configurable||We(Pn,"writable")&&!Pn.writable||We(Pn,"enumerable")&&!Pn.enumerable?qi(Ti,gn,Pn):(Ti[gn]=Pn.value,Ti)};De?(on||(mi.f=ji,ri.f=Gn,en(An,"buffer"),en(An,"byteOffset"),en(An,"byteLength"),en(An,"length")),Oe({target:"Object",stat:!0,forced:!on},{getOwnPropertyDescriptor:ji,defineProperty:Gn}),Fe.exports=function(tn,Ti,gn){var Pn=tn.match(/\d+$/)[0]/8,Dr=tn+(gn?"Clamped":"")+"Array",Ir="get"+tn,wr="set"+tn,pr=Me[Dr],or=pr,Tn=or&&or.prototype,ur={},er=function(gr,hr){qi(gr,hr,{get:function(){return function(gr,hr){var Cr=Ci(gr);return Cr.view[Ir](hr*Pn+Cr.byteOffset,!0)}(this,hr)},set:function(Cr){return function(gr,hr,Cr){var $r=Ci(gr);gn&&(Cr=(Cr=mn(Cr))<0?0:Cr>255?255:255&Cr),$r.view[wr](hr*Pn+$r.byteOffset,Cr,!0)}(this,hr,Cr)},enumerable:!0})};on?Be&&(or=Ti(function(gr,hr,Cr,$r){return nt(gr,or,Dr),_i(li(hr)?_n(hr)?void 0!==$r?new pr(hr,wt(Cr,Pn),$r):void 0!==Cr?new pr(hr,wt(Cr,Pn)):new pr(hr):kr(hr)?wn(or,hr):jt.call(or,hr):new pr(vt(hr)),gr,or)}),si&&si(or,Nn),ht(Xt(pr),function(gr){gr in or||Pt(or,gr,pr[gr])}),or.prototype=Tn):(or=Ti(function(gr,hr,Cr,$r){nt(gr,or,Dr);var Ne,ut,lt,Ct=0,Ie=0;if(li(hr)){if(!_n(hr))return kr(hr)?wn(or,hr):jt.call(or,hr);Ne=hr,Ie=wt(Cr,Pn);var zt=hr.byteLength;if(void 0===$r){if(zt%Pn||(ut=zt-Ie)<0)throw Vn(fr)}else if((ut=ot($r)*Pn)+Ie>zt)throw Vn(fr);lt=ut/Pn}else lt=vt(hr),Ne=new ei(ut=lt*Pn);for(Fi(gr,{buffer:Ne,byteOffset:Ie,byteLength:ut,length:lt,view:new Bi(Ne)});Ct<lt;)er(gr,Ct++)}),si&&si(or,Nn),Tn=or.prototype=at(An)),Tn.constructor!==or&&Pt(Tn,"constructor",or),Wn&&Pt(Tn,Wn,Dr),ur[Dr]=or,Oe({global:!0,forced:or!=pr,sham:!on},ur),sr in or||Pt(or,sr,Pn),sr in Tn||Pt(Tn,sr,Pn),qt(Dr)}):Fe.exports=function(){}},3832:function(Fe,t,V){var Oe=V(7854),Me=V(7293),De=V(7072),Be=V(260).NATIVE_ARRAY_BUFFER_VIEWS,Ge=Oe.ArrayBuffer,Je=Oe.Int8Array;Fe.exports=!Be||!Me(function(){Je(1)})||!Me(function(){new Je(-1)})||!De(function(nt){new Je,new Je(null),new Je(1.5),new Je(nt)},!0)||Me(function(){return 1!==new Je(new Ge(2),1,void 0).length})},3074:function(Fe,t,V){var Oe=V(260).aTypedArrayConstructor,Me=V(6707);Fe.exports=function(De,Be){for(var Ge=Me(De,De.constructor),Je=0,nt=Be.length,mt=new(Oe(Ge))(nt);nt>Je;)mt[Je]=Be[Je++];return mt}},7321:function(Fe,t,V){var Oe=V(7908),Me=V(7466),De=V(1246),Be=V(7659),Ge=V(9974),Je=V(260).aTypedArrayConstructor;Fe.exports=function(mt){var We,ni,li,at,si,Xt,Pt=Oe(mt),ot=arguments.length,vt=ot>1?arguments[1]:void 0,wt=void 0!==vt,ai=De(Pt);if(null!=ai&&!Be(ai))for(Xt=(si=ai.call(Pt)).next,Pt=[];!(at=Xt.call(si)).done;)Pt.push(at.value);for(wt&&ot>2&&(vt=Ge(vt,arguments[2],2)),ni=Me(Pt.length),li=new(Je(this))(ni),We=0;ni>We;We++)li[We]=wt?vt(Pt[We],We):Pt[We];return li}},9711:function(Fe){var t=0,V=Math.random();Fe.exports=function(Oe){return"Symbol("+String(void 0===Oe?"":Oe)+")_"+(++t+V).toString(36)}},3307:function(Fe,t,V){var Oe=V(133);Fe.exports=Oe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(Fe,t,V){var Oe=V(7854),Me=V(2309),De=V(6656),Be=V(9711),Ge=V(133),Je=V(3307),nt=Me("wks"),mt=Oe.Symbol,Pt=Je?mt:mt&&mt.withoutSetter||Be;Fe.exports=function(ot){return De(nt,ot)||(nt[ot]=Ge&&De(mt,ot)?mt[ot]:Pt("Symbol."+ot)),nt[ot]}},1361:function(Fe){Fe.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(7854),De=V(3331),Be=V(6340),Ge="ArrayBuffer",Je=De[Ge];Oe({global:!0,forced:Me[Ge]!==Je},{ArrayBuffer:Je}),Be(Ge)},2222:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(7293),De=V(3157),Be=V(111),Ge=V(7908),Je=V(7466),nt=V(6135),mt=V(5417),Pt=V(1194),ot=V(5112),vt=V(7392),wt=ot("isConcatSpreadable"),ai=9007199254740991,We="Maximum allowed index exceeded",ni=vt>=51||!Me(function(){var Xt=[];return Xt[wt]=!1,Xt.concat()[0]!==Xt}),li=Pt("concat"),at=function(Xt){if(!Be(Xt))return!1;var jt=Xt[wt];return void 0!==jt?!!jt:De(Xt)};Oe({target:"Array",proto:!0,forced:!ni||!li},{concat:function(jt){var mi,Vi,_i,Ci,Fi,ht=Ge(this),qt=mt(ht,0),ri=0;for(mi=-1,_i=arguments.length;mi<_i;mi++)if(at(Fi=-1===mi?ht:arguments[mi])){if(ri+(Ci=Je(Fi.length))>ai)throw TypeError(We);for(Vi=0;Vi<Ci;Vi++,ri++)Vi in Fi&&nt(qt,ri,Fi[Vi])}else{if(ri>=ai)throw TypeError(We);nt(qt,ri++,Fi)}return qt.length=ri,qt}})},7327:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(2092).filter;Oe({target:"Array",proto:!0,forced:!V(1194)("filter")},{filter:function(Je){return Me(this,Je,arguments.length>1?arguments[1]:void 0)}})},2772:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(1318).indexOf,De=V(9341),Be=[].indexOf,Ge=!!Be&&1/[1].indexOf(1,-0)<0,Je=De("indexOf");Oe({target:"Array",proto:!0,forced:Ge||!Je},{indexOf:function(mt){return Ge?Be.apply(this,arguments)||0:Me(this,mt,arguments.length>1?arguments[1]:void 0)}})},6992:function(Fe,t,V){"use strict";var Oe=V(5656),Me=V(1223),De=V(7497),Be=V(9909),Ge=V(654),Je="Array Iterator",nt=Be.set,mt=Be.getterFor(Je);Fe.exports=Ge(Array,"Array",function(Pt,ot){nt(this,{type:Je,target:Oe(Pt),index:0,kind:ot})},function(){var Pt=mt(this),ot=Pt.target,vt=Pt.kind,wt=Pt.index++;return!ot||wt>=ot.length?(Pt.target=void 0,{value:void 0,done:!0}):"keys"==vt?{value:wt,done:!1}:"values"==vt?{value:ot[wt],done:!1}:{value:[wt,ot[wt]],done:!1}},"values"),De.Arguments=De.Array,Me("keys"),Me("values"),Me("entries")},1249:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(2092).map;Oe({target:"Array",proto:!0,forced:!V(1194)("map")},{map:function(Je){return Me(this,Je,arguments.length>1?arguments[1]:void 0)}})},7042:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(111),De=V(3157),Be=V(1400),Ge=V(7466),Je=V(5656),nt=V(6135),mt=V(5112),ot=V(1194)("slice"),vt=mt("species"),wt=[].slice,ai=Math.max;Oe({target:"Array",proto:!0,forced:!ot},{slice:function(ni,li){var ht,qt,ri,at=Je(this),si=Ge(at.length),Xt=Be(ni,si),jt=Be(void 0===li?si:li,si);if(De(at)&&("function"!=typeof(ht=at.constructor)||ht!==Array&&!De(ht.prototype)?Me(ht)&&null===(ht=ht[vt])&&(ht=void 0):ht=void 0,ht===Array||void 0===ht))return wt.call(at,Xt,jt);for(qt=new(void 0===ht?Array:ht)(ai(jt-Xt,0)),ri=0;Xt<jt;Xt++,ri++)Xt in at&&nt(qt,ri,at[Xt]);return qt.length=ri,qt}})},561:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(1400),De=V(9958),Be=V(7466),Ge=V(7908),Je=V(5417),nt=V(6135),Pt=V(1194)("splice"),ot=Math.max,vt=Math.min;Oe({target:"Array",proto:!0,forced:!Pt},{splice:function(ni,li){var ht,qt,ri,mi,Vi,_i,at=Ge(this),si=Be(at.length),Xt=Me(ni,si),jt=arguments.length;if(0===jt?ht=qt=0:1===jt?(ht=0,qt=si-Xt):(ht=jt-2,qt=vt(ot(De(li),0),si-Xt)),si+ht-qt>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(ri=Je(at,qt),mi=0;mi<qt;mi++)(Vi=Xt+mi)in at&&nt(ri,mi,at[Vi]);if(ri.length=qt,ht<qt){for(mi=Xt;mi<si-qt;mi++)_i=mi+ht,(Vi=mi+qt)in at?at[_i]=at[Vi]:delete at[_i];for(mi=si;mi>si-qt+ht;mi--)delete at[mi-1]}else if(ht>qt)for(mi=si-qt;mi>Xt;mi--)_i=mi+ht-1,(Vi=mi+qt-1)in at?at[_i]=at[Vi]:delete at[_i];for(mi=0;mi<ht;mi++)at[mi+Xt]=arguments[mi+2];return at.length=si-qt+ht,ri}})},8309:function(Fe,t,V){var Oe=V(9781),Me=V(3070).f,De=Function.prototype,Be=De.toString,Ge=/^\s*function ([^ (]*)/;Oe&&!("name"in De)&&Me(De,"name",{configurable:!0,get:function(){try{return Be.call(this).match(Ge)[1]}catch{return""}}})},489:function(Fe,t,V){var Oe=V(2109),Me=V(7293),De=V(7908),Be=V(9518),Ge=V(8544);Oe({target:"Object",stat:!0,forced:Me(function(){Be(1)}),sham:!Ge},{getPrototypeOf:function(mt){return Be(De(mt))}})},1539:function(Fe,t,V){var Oe=V(1694),Me=V(1320),De=V(288);Oe||Me(Object.prototype,"toString",De,{unsafe:!0})},4916:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(2261);Oe({target:"RegExp",proto:!0,forced:/./.exec!==Me},{exec:Me})},9714:function(Fe,t,V){"use strict";var Oe=V(1320),Me=V(9670),De=V(7293),Be=V(7066),Ge="toString",Je=RegExp.prototype,nt=Je[Ge];(De(function(){return"/a/b"!=nt.call({source:"a",flags:"b"})})||nt.name!=Ge)&&Oe(RegExp.prototype,Ge,function(){var vt=Me(this),wt=String(vt.source),ai=vt.flags;return"/"+wt+"/"+String(void 0===ai&&vt instanceof RegExp&&!("flags"in Je)?Be.call(vt):ai)},{unsafe:!0})},8783:function(Fe,t,V){"use strict";var Oe=V(8710).charAt,Me=V(9909),De=V(654),Be="String Iterator",Ge=Me.set,Je=Me.getterFor(Be);De(String,"String",function(nt){Ge(this,{type:Be,string:String(nt),index:0})},function(){var vt,mt=Je(this),Pt=mt.string,ot=mt.index;return ot>=Pt.length?{value:void 0,done:!0}:(vt=Oe(Pt,ot),mt.index+=vt.length,{value:vt,done:!1})})},4723:function(Fe,t,V){"use strict";var Oe=V(7007),Me=V(9670),De=V(7466),Be=V(4488),Ge=V(1530),Je=V(7651);Oe("match",1,function(nt,mt,Pt){return[function(vt){var wt=Be(this),ai=vt?.[nt];return void 0!==ai?ai.call(vt,wt):new RegExp(vt)[nt](String(wt))},function(ot){var vt=Pt(mt,ot,this);if(vt.done)return vt.value;var wt=Me(ot),ai=String(this);if(!wt.global)return Je(wt,ai);var We=wt.unicode;wt.lastIndex=0;for(var at,ni=[],li=0;null!==(at=Je(wt,ai));){var si=String(at[0]);ni[li]=si,""===si&&(wt.lastIndex=Ge(ai,De(wt.lastIndex),We)),li++}return 0===li?null:ni}]})},5306:function(Fe,t,V){"use strict";var Oe=V(7007),Me=V(9670),De=V(7466),Be=V(9958),Ge=V(4488),Je=V(1530),nt=V(647),mt=V(7651),Pt=Math.max,ot=Math.min,vt=function(wt){return void 0===wt?wt:String(wt)};Oe("replace",2,function(wt,ai,We,ni){var li=ni.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,at=ni.REPLACE_KEEPS_$0,si=li?"$":"$0";return[function(jt,ht){var qt=Ge(this),ri=jt?.[wt];return void 0!==ri?ri.call(jt,qt,ht):ai.call(String(qt),jt,ht)},function(Xt,jt){if(!li&&at||"string"==typeof jt&&-1===jt.indexOf(si)){var ht=We(ai,Xt,this,jt);if(ht.done)return ht.value}var qt=Me(Xt),ri=String(this),mi="function"==typeof jt;mi||(jt=String(jt));var Vi=qt.global;if(Vi){var _i=qt.unicode;qt.lastIndex=0}for(var Ci=[];;){var Fi=mt(qt,ri);if(null===Fi||(Ci.push(Fi),!Vi))break;""===String(Fi[0])&&(qt.lastIndex=Je(ri,De(qt.lastIndex),_i))}for(var xn="",mn=0,Vn=0;Vn<Ci.length;Vn++){Fi=Ci[Vn];for(var ei=String(Fi[0]),Bi=Pt(ot(Be(Fi.index),ri.length),0),on=[],Wn=1;Wn<Fi.length;Wn++)on.push(vt(Fi[Wn]));var Nn=Fi.groups;if(mi){var An=[ei].concat(on,Bi,ri);void 0!==Nn&&An.push(Nn);var Gi=String(jt.apply(void 0,An))}else Gi=nt(ei,ri,Bi,on,Nn,jt);Bi>=mn&&(xn+=ri.slice(mn,Bi)+Gi,mn=Bi+ei.length)}return xn+ri.slice(mn)}]})},3123:function(Fe,t,V){"use strict";var Oe=V(7007),Me=V(7850),De=V(9670),Be=V(4488),Ge=V(6707),Je=V(1530),nt=V(7466),mt=V(7651),Pt=V(2261),ot=V(7293),vt=[].push,wt=Math.min,ai=4294967295,We=!ot(function(){return!RegExp(ai,"y")});Oe("split",2,function(ni,li,at){var si;return si="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Xt,jt){var ht=String(Be(this)),qt=void 0===jt?ai:jt>>>0;if(0===qt)return[];if(void 0===Xt)return[ht];if(!Me(Xt))return li.call(ht,Xt,qt);for(var Ci,Fi,qi,ri=[],Vi=0,_i=new RegExp(Xt.source,(Xt.ignoreCase?"i":"")+(Xt.multiline?"m":"")+(Xt.unicode?"u":"")+(Xt.sticky?"y":"")+"g");(Ci=Pt.call(_i,ht))&&!((Fi=_i.lastIndex)>Vi&&(ri.push(ht.slice(Vi,Ci.index)),Ci.length>1&&Ci.index<ht.length&&vt.apply(ri,Ci.slice(1)),qi=Ci[0].length,Vi=Fi,ri.length>=qt));)_i.lastIndex===Ci.index&&_i.lastIndex++;return Vi===ht.length?(qi||!_i.test(""))&&ri.push(""):ri.push(ht.slice(Vi)),ri.length>qt?ri.slice(0,qt):ri}:"0".split(void 0,0).length?function(Xt,jt){return void 0===Xt&&0===jt?[]:li.call(this,Xt,jt)}:li,[function(jt,ht){var qt=Be(this),ri=jt?.[ni];return void 0!==ri?ri.call(jt,qt,ht):si.call(String(qt),jt,ht)},function(Xt,jt){var ht=at(si,Xt,this,jt,si!==li);if(ht.done)return ht.value;var qt=De(Xt),ri=String(this),mi=Ge(qt,RegExp),Vi=qt.unicode,Ci=new mi(We?qt:"^(?:"+qt.source+")",(qt.ignoreCase?"i":"")+(qt.multiline?"m":"")+(qt.unicode?"u":"")+(We?"y":"g")),Fi=void 0===jt?ai:jt>>>0;if(0===Fi)return[];if(0===ri.length)return null===mt(Ci,ri)?[ri]:[];for(var qi=0,xn=0,mn=[];xn<ri.length;){Ci.lastIndex=We?xn:0;var ei,Vn=mt(Ci,We?ri:ri.slice(xn));if(null===Vn||(ei=wt(nt(Ci.lastIndex+(We?0:xn)),ri.length))===qi)xn=Je(ri,xn,Vi);else{if(mn.push(ri.slice(qi,xn)),mn.length===Fi)return mn;for(var Bi=1;Bi<=Vn.length-1;Bi++)if(mn.push(Vn[Bi]),mn.length===Fi)return mn;xn=qi=ei}}return mn.push(ri.slice(qi)),mn}]},!We)},3210:function(Fe,t,V){"use strict";var Oe=V(2109),Me=V(3111).trim;Oe({target:"String",proto:!0,forced:V(6091)("trim")},{trim:function(){return Me(this)}})},2990:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(1048),De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("copyWithin",function(Je,nt){return Me.call(De(this),Je,nt,arguments.length>2?arguments[2]:void 0)})},8927:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(2092).every,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("every",function(Je){return Me(De(this),Je,arguments.length>1?arguments[1]:void 0)})},3105:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(1285),De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("fill",function(Je){return Me.apply(De(this),arguments)})},5035:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(2092).filter,De=V(3074),Be=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("filter",function(nt){var mt=Me(Be(this),nt,arguments.length>1?arguments[1]:void 0);return De(this,mt)})},7174:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(2092).findIndex,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("findIndex",function(Je){return Me(De(this),Je,arguments.length>1?arguments[1]:void 0)})},4345:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(2092).find,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("find",function(Je){return Me(De(this),Je,arguments.length>1?arguments[1]:void 0)})},2846:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(2092).forEach,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("forEach",function(Je){Me(De(this),Je,arguments.length>1?arguments[1]:void 0)})},4731:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(1318).includes,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("includes",function(Je){return Me(De(this),Je,arguments.length>1?arguments[1]:void 0)})},7209:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(1318).indexOf,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("indexOf",function(Je){return Me(De(this),Je,arguments.length>1?arguments[1]:void 0)})},6319:function(Fe,t,V){"use strict";var Oe=V(7854),Me=V(260),De=V(6992),Ge=V(5112)("iterator"),Je=Oe.Uint8Array,nt=De.values,mt=De.keys,Pt=De.entries,ot=Me.aTypedArray,vt=Me.exportTypedArrayMethod,wt=Je&&Je.prototype[Ge],ai=!!wt&&("values"==wt.name||null==wt.name),We=function(){return nt.call(ot(this))};vt("entries",function(){return Pt.call(ot(this))}),vt("keys",function(){return mt.call(ot(this))}),vt("values",We,!ai),vt(Ge,We,!ai)},8867:function(Fe,t,V){"use strict";var Oe=V(260),Me=Oe.aTypedArray,Be=[].join;(0,Oe.exportTypedArrayMethod)("join",function(Je){return Be.apply(Me(this),arguments)})},7789:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(6583),De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("lastIndexOf",function(Je){return Me.apply(De(this),arguments)})},3739:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(2092).map,De=V(6707),Be=Oe.aTypedArray,Ge=Oe.aTypedArrayConstructor;(0,Oe.exportTypedArrayMethod)("map",function(mt){return Me(Be(this),mt,arguments.length>1?arguments[1]:void 0,function(Pt,ot){return new(Ge(De(Pt,Pt.constructor)))(ot)})})},4483:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(3671).right,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("reduceRight",function(Je){return Me(De(this),Je,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(3671).left,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("reduce",function(Je){return Me(De(this),Je,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(Fe,t,V){"use strict";var Oe=V(260),Me=Oe.aTypedArray,Be=Math.floor;(0,Oe.exportTypedArrayMethod)("reverse",function(){for(var ot,Je=this,nt=Me(Je).length,mt=Be(nt/2),Pt=0;Pt<mt;)ot=Je[Pt],Je[Pt++]=Je[--nt],Je[nt]=ot;return Je})},3462:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(7466),De=V(4590),Be=V(7908),Ge=V(7293),Je=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("set",function(ot){Je(this);var vt=De(arguments.length>1?arguments[1]:void 0,1),wt=this.length,ai=Be(ot),We=Me(ai.length),ni=0;if(We+vt>wt)throw RangeError("Wrong length");for(;ni<We;)this[vt+ni]=ai[ni++]},Ge(function(){new Int8Array(1).set({})}))},678:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(6707),De=V(7293),Be=Oe.aTypedArray,Ge=Oe.aTypedArrayConstructor,nt=[].slice;(0,Oe.exportTypedArrayMethod)("slice",function(ot,vt){for(var wt=nt.call(Be(this),ot,vt),ai=Me(this,this.constructor),We=0,ni=wt.length,li=new(Ge(ai))(ni);ni>We;)li[We]=wt[We++];return li},De(function(){new Int8Array(1).slice()}))},7462:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(2092).some,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("some",function(Je){return Me(De(this),Je,arguments.length>1?arguments[1]:void 0)})},3824:function(Fe,t,V){"use strict";var Oe=V(260),Me=Oe.aTypedArray,Be=[].sort;(0,Oe.exportTypedArrayMethod)("sort",function(Je){return Be.call(Me(this),Je)})},5021:function(Fe,t,V){"use strict";var Oe=V(260),Me=V(7466),De=V(1400),Be=V(6707),Ge=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("subarray",function(mt,Pt){var ot=Ge(this),vt=ot.length,wt=De(mt,vt);return new(Be(ot,ot.constructor))(ot.buffer,ot.byteOffset+wt*ot.BYTES_PER_ELEMENT,Me((void 0===Pt?vt:De(Pt,vt))-wt))})},2974:function(Fe,t,V){"use strict";var Oe=V(7854),Me=V(260),De=V(7293),Be=Oe.Int8Array,Ge=Me.aTypedArray,Je=Me.exportTypedArrayMethod,nt=[].toLocaleString,mt=[].slice,Pt=!!Be&&De(function(){nt.call(new Be(1))});Je("toLocaleString",function(){return nt.apply(Pt?mt.call(Ge(this)):Ge(this),arguments)},De(function(){return[1,2].toLocaleString()!=new Be([1,2]).toLocaleString()})||!De(function(){Be.prototype.toLocaleString.call([1,2])}))},5016:function(Fe,t,V){"use strict";var Oe=V(260).exportTypedArrayMethod,Me=V(7293),Be=V(7854).Uint8Array,Ge=Be&&Be.prototype||{},Je=[].toString,nt=[].join;Me(function(){Je.call({})})&&(Je=function(){return nt.call(this)}),Oe("toString",Je,Ge.toString!=Je)},2472:function(Fe,t,V){V(9843)("Uint8",function(Me){return function(Be,Ge,Je){return Me(this,Be,Ge,Je)}})},4747:function(Fe,t,V){var Oe=V(7854),Me=V(8324),De=V(8533),Be=V(8880);for(var Ge in Me){var Je=Oe[Ge],nt=Je&&Je.prototype;if(nt&&nt.forEach!==De)try{Be(nt,"forEach",De)}catch{nt.forEach=De}}},3948:function(Fe,t,V){var Oe=V(7854),Me=V(8324),De=V(6992),Be=V(8880),Ge=V(5112),Je=Ge("iterator"),nt=Ge("toStringTag"),mt=De.values;for(var Pt in Me){var ot=Oe[Pt],vt=ot&&ot.prototype;if(vt){if(vt[Je]!==mt)try{Be(vt,Je,mt)}catch{vt[Je]=mt}if(vt[nt]||Be(vt,nt,Pt),Me[Pt])for(var wt in De)if(vt[wt]!==De[wt])try{Be(vt,wt,De[wt])}catch{vt[wt]=De[wt]}}}},1637:function(Fe,t,V){"use strict";V(6992);var Oe=V(2109),Me=V(5005),De=V(590),Be=V(1320),Ge=V(2248),Je=V(8003),nt=V(4994),mt=V(9909),Pt=V(5787),ot=V(6656),vt=V(9974),wt=V(648),ai=V(9670),We=V(111),ni=V(30),li=V(9114),at=V(8554),si=V(1246),Xt=V(5112),jt=Me("fetch"),ht=Me("Headers"),qt=Xt("iterator"),ri="URLSearchParams",mi=ri+"Iterator",Vi=mt.set,_i=mt.getterFor(ri),Ci=mt.getterFor(mi),Fi=/\+/g,qi=Array(4),xn=function(wn){return qi[wn-1]||(qi[wn-1]=RegExp("((?:%[\\da-f]{2}){"+wn+"})","gi"))},mn=function(wn){try{return decodeURIComponent(wn)}catch{return wn}},Vn=function(wn){var en=wn.replace(Fi," "),_n=4;try{return decodeURIComponent(en)}catch{for(;_n;)en=en.replace(xn(_n--),mn);return en}},ei=/[!'()~]|%20/g,Bi={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},on=function(wn){return Bi[wn]},Wn=function(wn){return encodeURIComponent(wn).replace(ei,on)},Nn=function(wn,en){if(en)for(var ji,Gn,_n=en.split("&"),Xi=0;Xi<_n.length;)(ji=_n[Xi++]).length&&(Gn=ji.split("="),wn.push({key:Vn(Gn.shift()),value:Vn(Gn.join("="))}))},An=function(wn){this.entries.length=0,Nn(this.entries,wn)},Gi=function(wn,en){if(wn<en)throw TypeError("Not enough arguments")},kr=nt(function(en,_n){Vi(this,{type:mi,iterator:at(_i(en).entries),kind:_n})},"Iterator",function(){var en=Ci(this),_n=en.kind,Xi=en.iterator.next(),ji=Xi.value;return Xi.done||(Xi.value="keys"===_n?ji.key:"values"===_n?ji.value:[ji.key,ji.value]),Xi}),sr=function(){Pt(this,sr,ri);var ji,Gn,tn,Ti,gn,Pn,Dr,Ir,wr,en=arguments.length>0?arguments[0]:void 0,Xi=[];if(Vi(this,{type:ri,entries:Xi,updateURL:function(){},updateSearchParams:An}),void 0!==en)if(We(en))if("function"==typeof(ji=si(en)))for(tn=(Gn=ji.call(en)).next;!(Ti=tn.call(Gn)).done;){if((Dr=(Pn=(gn=at(ai(Ti.value))).next).call(gn)).done||(Ir=Pn.call(gn)).done||!Pn.call(gn).done)throw TypeError("Expected sequence with length 2");Xi.push({key:Dr.value+"",value:Ir.value+""})}else for(wr in en)ot(en,wr)&&Xi.push({key:wr,value:en[wr]+""});else Nn(Xi,"string"==typeof en?"?"===en.charAt(0)?en.slice(1):en:en+"")},fr=sr.prototype;Ge(fr,{append:function(en,_n){Gi(arguments.length,2);var Xi=_i(this);Xi.entries.push({key:en+"",value:_n+""}),Xi.updateURL()},delete:function(wn){Gi(arguments.length,1);for(var en=_i(this),_n=en.entries,Xi=wn+"",ji=0;ji<_n.length;)_n[ji].key===Xi?_n.splice(ji,1):ji++;en.updateURL()},get:function(en){Gi(arguments.length,1);for(var _n=_i(this).entries,Xi=en+"",ji=0;ji<_n.length;ji++)if(_n[ji].key===Xi)return _n[ji].value;return null},getAll:function(en){Gi(arguments.length,1);for(var _n=_i(this).entries,Xi=en+"",ji=[],Gn=0;Gn<_n.length;Gn++)_n[Gn].key===Xi&&ji.push(_n[Gn].value);return ji},has:function(en){Gi(arguments.length,1);for(var _n=_i(this).entries,Xi=en+"",ji=0;ji<_n.length;)if(_n[ji++].key===Xi)return!0;return!1},set:function(en,_n){Gi(arguments.length,1);for(var Pn,Xi=_i(this),ji=Xi.entries,Gn=!1,tn=en+"",Ti=_n+"",gn=0;gn<ji.length;gn++)(Pn=ji[gn]).key===tn&&(Gn?ji.splice(gn--,1):(Gn=!0,Pn.value=Ti));Gn||ji.push({key:tn,value:Ti}),Xi.updateURL()},sort:function(){var ji,Gn,tn,en=_i(this),_n=en.entries,Xi=_n.slice();for(_n.length=0,tn=0;tn<Xi.length;tn++){for(ji=Xi[tn],Gn=0;Gn<tn;Gn++)if(_n[Gn].key>ji.key){_n.splice(Gn,0,ji);break}Gn===tn&&_n.push(ji)}en.updateURL()},forEach:function(en){for(var Gn,_n=_i(this).entries,Xi=vt(en,arguments.length>1?arguments[1]:void 0,3),ji=0;ji<_n.length;)Xi((Gn=_n[ji++]).value,Gn.key,this)},keys:function(){return new kr(this,"keys")},values:function(){return new kr(this,"values")},entries:function(){return new kr(this,"entries")}},{enumerable:!0}),Be(fr,qt,fr.entries),Be(fr,"toString",function(){for(var ji,en=_i(this).entries,_n=[],Xi=0;Xi<en.length;)ji=en[Xi++],_n.push(Wn(ji.key)+"="+Wn(ji.value));return _n.join("&")},{enumerable:!0}),Je(sr,ri),Oe({global:!0,forced:!De},{URLSearchParams:sr}),!De&&"function"==typeof jt&&"function"==typeof ht&&Oe({global:!0,enumerable:!0,forced:!0},{fetch:function(en){var Xi,ji,Gn,_n=[en];return arguments.length>1&&(We(Xi=arguments[1])&&wt(ji=Xi.body)===ri&&((Gn=Xi.headers?new ht(Xi.headers):new ht).has("content-type")||Gn.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Xi=ni(Xi,{body:li(0,String(ji)),headers:li(0,Gn)})),_n.push(Xi)),jt.apply(this,_n)}}),Fe.exports={URLSearchParams:sr,getState:_i}},285:function(Fe,t,V){"use strict";V(8783);var An,Oe=V(2109),Me=V(9781),De=V(590),Be=V(7854),Ge=V(6048),Je=V(1320),nt=V(5787),mt=V(6656),Pt=V(1574),ot=V(8457),vt=V(8710).codeAt,wt=V(3197),ai=V(8003),We=V(1637),ni=V(9909),li=Be.URL,at=We.URLSearchParams,si=We.getState,Xt=ni.set,jt=ni.getterFor("URL"),ht=Math.floor,qt=Math.pow,mi="Invalid scheme",Vi="Invalid host",_i="Invalid port",Ci=/[A-Za-z]/,Fi=/[\d+-.A-Za-z]/,qi=/\d/,xn=/^(0x|0X)/,mn=/^[0-7]+$/,Vn=/^\d+$/,ei=/^[\dA-Fa-f]+$/,Bi=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,on=/[\u0000\t\u000A\u000D #/:?@[\\]]/,Wn=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Nn=/[\t\u000A\u000D]/g,Gi=function(Pe,Lt){var le,o,c;if("["==Lt.charAt(0)){if("]"!=Lt.charAt(Lt.length-1)||!(le=sr(Lt.slice(1,-1))))return Vi;Pe.host=le}else if(Ti(Pe)){if(Lt=wt(Lt),Bi.test(Lt)||null===(le=kr(Lt)))return Vi;Pe.host=le}else{if(on.test(Lt))return Vi;for(le="",o=ot(Lt),c=0;c<o.length;c++)le+=Gn(o[c],en);Pe.host=le}},kr=function(Pe){var le,o,c,h,_,b,x,Lt=Pe.split(".");if(Lt.length&&""==Lt[Lt.length-1]&&Lt.pop(),(le=Lt.length)>4)return Pe;for(o=[],c=0;c<le;c++){if(""==(h=Lt[c]))return Pe;if(_=10,h.length>1&&"0"==h.charAt(0)&&(_=xn.test(h)?16:8,h=h.slice(8==_?1:2)),""===h)b=0;else{if(!(10==_?Vn:8==_?mn:ei).test(h))return Pe;b=parseInt(h,_)}o.push(b)}for(c=0;c<le;c++)if(b=o[c],c==le-1){if(b>=qt(256,5-le))return null}else if(b>255)return null;for(x=o.pop(),c=0;c<o.length;c++)x+=o[c]*qt(256,3-c);return x},sr=function(Pe){var h,_,b,x,M,I,F,Lt=[0,0,0,0,0,0,0,0],le=0,o=null,c=0,U=function(){return Pe.charAt(c)};if(":"==U()){if(":"!=Pe.charAt(1))return;c+=2,o=++le}for(;U();){if(8==le)return;if(":"!=U()){for(h=_=0;_<4&&ei.test(U());)h=16*h+parseInt(U(),16),c++,_++;if("."==U()){if(0==_||(c-=_,le>6))return;for(b=0;U();){if(x=null,b>0){if(!("."==U()&&b<4))return;c++}if(!qi.test(U()))return;for(;qi.test(U());){if(M=parseInt(U(),10),null===x)x=M;else{if(0==x)return;x=10*x+M}if(x>255)return;c++}Lt[le]=256*Lt[le]+x,(2==++b||4==b)&&le++}if(4!=b)return;break}if(":"==U()){if(c++,!U())return}else if(U())return;Lt[le++]=h}else{if(null!==o)return;c++,o=++le}}if(null!==o)for(I=le-o,le=7;0!=le&&I>0;)F=Lt[le],Lt[le--]=Lt[o+I-1],Lt[o+--I]=F;else if(8!=le)return;return Lt},wn=function(Pe){var Lt,le,o,c;if("number"==typeof Pe){for(Lt=[],le=0;le<4;le++)Lt.unshift(Pe%256),Pe=ht(Pe/256);return Lt.join(".")}if("object"==typeof Pe){for(Lt="",o=function(Pe){for(var Lt=null,le=1,o=null,c=0,h=0;h<8;h++)0!==Pe[h]?(c>le&&(Lt=o,le=c),o=null,c=0):(null===o&&(o=h),++c);return c>le&&(Lt=o,le=c),Lt}(Pe),le=0;le<8;le++)c&&0===Pe[le]||(c&&(c=!1),o===le?(Lt+=le?":":"::",c=!0):(Lt+=Pe[le].toString(16),le<7&&(Lt+=":")));return"["+Lt+"]"}return Pe},en={},_n=Pt({},en,{" ":1,'"':1,"<":1,">":1,"`":1}),Xi=Pt({},_n,{"#":1,"?":1,"{":1,"}":1}),ji=Pt({},Xi,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Gn=function(Pe,Lt){var le=vt(Pe,0);return le>32&&le<127&&!mt(Lt,Pe)?Pe:encodeURIComponent(Pe)},tn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ti=function(Pe){return mt(tn,Pe.scheme)},gn=function(Pe){return""!=Pe.username||""!=Pe.password},Pn=function(Pe){return!Pe.host||Pe.cannotBeABaseURL||"file"==Pe.scheme},Dr=function(Pe,Lt){var le;return 2==Pe.length&&Ci.test(Pe.charAt(0))&&(":"==(le=Pe.charAt(1))||!Lt&&"|"==le)},Ir=function(Pe){var Lt;return Pe.length>1&&Dr(Pe.slice(0,2))&&(2==Pe.length||"/"===(Lt=Pe.charAt(2))||"\\"===Lt||"?"===Lt||"#"===Lt)},wr=function(Pe){var Lt=Pe.path,le=Lt.length;le&&("file"!=Pe.scheme||1!=le||!Dr(Lt[0],!0))&&Lt.pop()},pr=function(Pe){return"."===Pe||"%2e"===Pe.toLowerCase()},or=function(Pe){return".."===(Pe=Pe.toLowerCase())||"%2e."===Pe||".%2e"===Pe||"%2e%2e"===Pe},Tn={},ur={},Rr={},ks={},er={},gr={},hr={},Cr={},$r={},Ct={},Ie={},Ne={},ut={},lt={},zt={},Kt={},Jt={},pt={},ui={},Hi={},Ui={},di=function(Pe,Lt,le,o){var I,F,U,$,c=le||Tn,h=0,_="",b=!1,x=!1,M=!1;for(le||(Pe.scheme="",Pe.username="",Pe.password="",Pe.host=null,Pe.port=null,Pe.path=[],Pe.query=null,Pe.fragment=null,Pe.cannotBeABaseURL=!1,Lt=Lt.replace(Wn,"")),Lt=Lt.replace(Nn,""),I=ot(Lt);h<=I.length;){switch(F=I[h],c){case Tn:if(!F||!Ci.test(F)){if(le)return mi;c=Rr;continue}_+=F.toLowerCase(),c=ur;break;case ur:if(F&&(Fi.test(F)||"+"==F||"-"==F||"."==F))_+=F.toLowerCase();else{if(":"!=F){if(le)return mi;_="",c=Rr,h=0;continue}if(le&&(Ti(Pe)!=mt(tn,_)||"file"==_&&(gn(Pe)||null!==Pe.port)||"file"==Pe.scheme&&!Pe.host))return;if(Pe.scheme=_,le)return void(Ti(Pe)&&tn[Pe.scheme]==Pe.port&&(Pe.port=null));_="","file"==Pe.scheme?c=lt:Ti(Pe)&&o&&o.scheme==Pe.scheme?c=ks:Ti(Pe)?c=Cr:"/"==I[h+1]?(c=er,h++):(Pe.cannotBeABaseURL=!0,Pe.path.push(""),c=ui)}break;case Rr:if(!o||o.cannotBeABaseURL&&"#"!=F)return mi;if(o.cannotBeABaseURL&&"#"==F){Pe.scheme=o.scheme,Pe.path=o.path.slice(),Pe.query=o.query,Pe.fragment="",Pe.cannotBeABaseURL=!0,c=Ui;break}c="file"==o.scheme?lt:gr;continue;case ks:if("/"!=F||"/"!=I[h+1]){c=gr;continue}c=$r,h++;break;case er:if("/"==F){c=Ct;break}c=pt;continue;case gr:if(Pe.scheme=o.scheme,F==An)Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.query=o.query;else if("/"==F||"\\"==F&&Ti(Pe))c=hr;else if("?"==F)Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.query="",c=Hi;else{if("#"!=F){Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.path.pop(),c=pt;continue}Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.query=o.query,Pe.fragment="",c=Ui}break;case hr:if(!Ti(Pe)||"/"!=F&&"\\"!=F){if("/"!=F){Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,c=pt;continue}c=Ct}else c=$r;break;case Cr:if(c=$r,"/"!=F||"/"!=_.charAt(h+1))continue;h++;break;case $r:if("/"!=F&&"\\"!=F){c=Ct;continue}break;case Ct:if("@"==F){b&&(_="%40"+_),b=!0,U=ot(_);for(var q=0;q<U.length;q++){var ne=U[q];if(":"!=ne||M){var de=Gn(ne,ji);M?Pe.password+=de:Pe.username+=de}else M=!0}_=""}else if(F==An||"/"==F||"?"==F||"#"==F||"\\"==F&&Ti(Pe)){if(b&&""==_)return"Invalid authority";h-=ot(_).length+1,_="",c=Ie}else _+=F;break;case Ie:case Ne:if(le&&"file"==Pe.scheme){c=Kt;continue}if(":"!=F||x){if(F==An||"/"==F||"?"==F||"#"==F||"\\"==F&&Ti(Pe)){if(Ti(Pe)&&""==_)return Vi;if(le&&""==_&&(gn(Pe)||null!==Pe.port))return;if($=Gi(Pe,_))return $;if(_="",c=Jt,le)return;continue}"["==F?x=!0:"]"==F&&(x=!1),_+=F}else{if(""==_)return Vi;if($=Gi(Pe,_))return $;if(_="",c=ut,le==Ne)return}break;case ut:if(!qi.test(F)){if(F==An||"/"==F||"?"==F||"#"==F||"\\"==F&&Ti(Pe)||le){if(""!=_){var ge=parseInt(_,10);if(ge>65535)return _i;Pe.port=Ti(Pe)&&ge===tn[Pe.scheme]?null:ge,_=""}if(le)return;c=Jt;continue}return _i}_+=F;break;case lt:if(Pe.scheme="file","/"==F||"\\"==F)c=zt;else{if(!o||"file"!=o.scheme){c=pt;continue}if(F==An)Pe.host=o.host,Pe.path=o.path.slice(),Pe.query=o.query;else if("?"==F)Pe.host=o.host,Pe.path=o.path.slice(),Pe.query="",c=Hi;else{if("#"!=F){Ir(I.slice(h).join(""))||(Pe.host=o.host,Pe.path=o.path.slice(),wr(Pe)),c=pt;continue}Pe.host=o.host,Pe.path=o.path.slice(),Pe.query=o.query,Pe.fragment="",c=Ui}}break;case zt:if("/"==F||"\\"==F){c=Kt;break}o&&"file"==o.scheme&&!Ir(I.slice(h).join(""))&&(Dr(o.path[0],!0)?Pe.path.push(o.path[0]):Pe.host=o.host),c=pt;continue;case Kt:if(F==An||"/"==F||"\\"==F||"?"==F||"#"==F){if(!le&&Dr(_))c=pt;else if(""==_){if(Pe.host="",le)return;c=Jt}else{if($=Gi(Pe,_))return $;if("localhost"==Pe.host&&(Pe.host=""),le)return;_="",c=Jt}continue}_+=F;break;case Jt:if(Ti(Pe)){if(c=pt,"/"!=F&&"\\"!=F)continue}else if(le||"?"!=F)if(le||"#"!=F){if(F!=An&&(c=pt,"/"!=F))continue}else Pe.fragment="",c=Ui;else Pe.query="",c=Hi;break;case pt:if(F==An||"/"==F||"\\"==F&&Ti(Pe)||!le&&("?"==F||"#"==F)){if(or(_)?(wr(Pe),"/"!=F&&!("\\"==F&&Ti(Pe))&&Pe.path.push("")):pr(_)?"/"!=F&&!("\\"==F&&Ti(Pe))&&Pe.path.push(""):("file"==Pe.scheme&&!Pe.path.length&&Dr(_)&&(Pe.host&&(Pe.host=""),_=_.charAt(0)+":"),Pe.path.push(_)),_="","file"==Pe.scheme&&(F==An||"?"==F||"#"==F))for(;Pe.path.length>1&&""===Pe.path[0];)Pe.path.shift();"?"==F?(Pe.query="",c=Hi):"#"==F&&(Pe.fragment="",c=Ui)}else _+=Gn(F,Xi);break;case ui:"?"==F?(Pe.query="",c=Hi):"#"==F?(Pe.fragment="",c=Ui):F!=An&&(Pe.path[0]+=Gn(F,en));break;case Hi:le||"#"!=F?F!=An&&("'"==F&&Ti(Pe)?Pe.query+="%27":Pe.query+="#"==F?"%23":Gn(F,en)):(Pe.fragment="",c=Ui);break;case Ui:F!=An&&(Pe.fragment+=Gn(F,_n))}h++}},un=function(Lt){var _,b,le=nt(this,un,"URL"),o=arguments.length>1?arguments[1]:void 0,c=String(Lt),h=Xt(le,{type:"URL"});if(void 0!==o)if(o instanceof un)_=jt(o);else if(b=di(_={},String(o)))throw TypeError(b);if(b=di(h,c,null,_))throw TypeError(b);var x=h.searchParams=new at,M=si(x);M.updateSearchParams(h.query),M.updateURL=function(){h.query=String(x)||null},Me||(le.href=St.call(le),le.origin=qe.call(le),le.protocol=Xe.call(le),le.username=ze.call(le),le.password=He.call(le),le.host=ft.call(le),le.hostname=Yt.call(le),le.port=xi.call(le),le.pathname=pi.call(le),le.search=Pi.call(le),le.searchParams=rt.call(le),le.hash=yt.call(le))},Et=un.prototype,St=function(){var Pe=jt(this),Lt=Pe.scheme,le=Pe.username,o=Pe.password,c=Pe.host,h=Pe.port,_=Pe.path,b=Pe.query,x=Pe.fragment,M=Lt+":";return null!==c?(M+="//",gn(Pe)&&(M+=le+(o?":"+o:"")+"@"),M+=wn(c),null!==h&&(M+=":"+h)):"file"==Lt&&(M+="//"),M+=Pe.cannotBeABaseURL?_[0]:_.length?"/"+_.join("/"):"",null!==b&&(M+="?"+b),null!==x&&(M+="#"+x),M},qe=function(){var Pe=jt(this),Lt=Pe.scheme,le=Pe.port;if("blob"==Lt)try{return new URL(Lt.path[0]).origin}catch{return"null"}return"file"!=Lt&&Ti(Pe)?Lt+"://"+wn(Pe.host)+(null!==le?":"+le:""):"null"},Xe=function(){return jt(this).scheme+":"},ze=function(){return jt(this).username},He=function(){return jt(this).password},ft=function(){var Pe=jt(this),Lt=Pe.host,le=Pe.port;return null===Lt?"":null===le?wn(Lt):wn(Lt)+":"+le},Yt=function(){var Pe=jt(this).host;return null===Pe?"":wn(Pe)},xi=function(){var Pe=jt(this).port;return null===Pe?"":String(Pe)},pi=function(){var Pe=jt(this),Lt=Pe.path;return Pe.cannotBeABaseURL?Lt[0]:Lt.length?"/"+Lt.join("/"):""},Pi=function(){var Pe=jt(this).query;return Pe?"?"+Pe:""},rt=function(){return jt(this).searchParams},yt=function(){var Pe=jt(this).fragment;return Pe?"#"+Pe:""},fe=function(Pe,Lt){return{get:Pe,set:Lt,configurable:!0,enumerable:!0}};if(Me&&Ge(Et,{href:fe(St,function(Pe){var Lt=jt(this),le=String(Pe),o=di(Lt,le);if(o)throw TypeError(o);si(Lt.searchParams).updateSearchParams(Lt.query)}),origin:fe(qe),protocol:fe(Xe,function(Pe){var Lt=jt(this);di(Lt,String(Pe)+":",Tn)}),username:fe(ze,function(Pe){var Lt=jt(this),le=ot(String(Pe));if(!Pn(Lt)){Lt.username="";for(var o=0;o<le.length;o++)Lt.username+=Gn(le[o],ji)}}),password:fe(He,function(Pe){var Lt=jt(this),le=ot(String(Pe));if(!Pn(Lt)){Lt.password="";for(var o=0;o<le.length;o++)Lt.password+=Gn(le[o],ji)}}),host:fe(ft,function(Pe){var Lt=jt(this);Lt.cannotBeABaseURL||di(Lt,String(Pe),Ie)}),hostname:fe(Yt,function(Pe){var Lt=jt(this);Lt.cannotBeABaseURL||di(Lt,String(Pe),Ne)}),port:fe(xi,function(Pe){var Lt=jt(this);Pn(Lt)||(""==(Pe=String(Pe))?Lt.port=null:di(Lt,Pe,ut))}),pathname:fe(pi,function(Pe){var Lt=jt(this);Lt.cannotBeABaseURL||(Lt.path=[],di(Lt,Pe+"",Jt))}),search:fe(Pi,function(Pe){var Lt=jt(this);""==(Pe=String(Pe))?Lt.query=null:("?"==Pe.charAt(0)&&(Pe=Pe.slice(1)),Lt.query="",di(Lt,Pe,Hi)),si(Lt.searchParams).updateSearchParams(Lt.query)}),searchParams:fe(rt),hash:fe(yt,function(Pe){var Lt=jt(this);""!=(Pe=String(Pe))?("#"==Pe.charAt(0)&&(Pe=Pe.slice(1)),Lt.fragment="",di(Lt,Pe,Ui)):Lt.fragment=null})}),Je(Et,"toJSON",function(){return St.call(this)},{enumerable:!0}),Je(Et,"toString",function(){return St.call(this)},{enumerable:!0}),li){var it=li.createObjectURL,Tt=li.revokeObjectURL;it&&Je(un,"createObjectURL",function(Lt){return it.apply(li,arguments)}),Tt&&Je(un,"revokeObjectURL",function(Lt){return Tt.apply(li,arguments)})}ai(un,"URL"),Oe({global:!0,forced:!De,sham:!Me},{URL:un})}},Rt={};function k(Fe){if(Rt[Fe])return Rt[Fe].exports;var t=Rt[Fe]={exports:{}};return Yr[Fe](t,t.exports,k),t.exports}k.d=function(Fe,t){for(var V in t)k.o(t,V)&&!k.o(Fe,V)&&Object.defineProperty(Fe,V,{enumerable:!0,get:t[V]})},k.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),k.o=function(Fe,t){return Object.prototype.hasOwnProperty.call(Fe,t)},k.r=function(Fe){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Fe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Fe,"__esModule",{value:!0})};var pn={};return function(){"use strict";function wn(Et,St){var qe;if(typeof Symbol>"u"||null==Et[Symbol.iterator]){if(Array.isArray(Et)||(qe=function en(Et,St){if(Et){if("string"==typeof Et)return _n(Et,St);var qe=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===qe&&Et.constructor&&(qe=Et.constructor.name),"Map"===qe||"Set"===qe)return Array.from(Et);if("Arguments"===qe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qe))return _n(Et,St)}}(Et))||St&&Et&&"number"==typeof Et.length){qe&&(Et=qe);var Xe=0,ze=function(){};return{s:ze,n:function(){return Xe>=Et.length?{done:!0}:{done:!1,value:Et[Xe++]}},e:function(pi){throw pi},f:ze}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Yt,He=!0,ft=!1;return{s:function(){qe=Et[Symbol.iterator]()},n:function(){var pi=qe.next();return He=pi.done,pi},e:function(pi){ft=!0,Yt=pi},f:function(){try{!He&&null!=qe.return&&qe.return()}finally{if(ft)throw Yt}}}}function _n(Et,St){(null==St||St>Et.length)&&(St=Et.length);for(var qe=0,Xe=new Array(St);qe<St;qe++)Xe[qe]=Et[qe];return Xe}function ji(Et,St){for(var qe=0;qe<St.length;qe++){var Xe=St[qe];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Et,Xe.key,Xe)}}k.r(pn),k.d(pn,{Dropzone:function(){return lt},default:function(){return un}}),k(2222),k(7327),k(2772),k(6992),k(1249),k(7042),k(561),k(8264),k(8309),k(489),k(1539),k(4916),k(9714),k(8783),k(4723),k(5306),k(3123),k(3210),k(2472),k(2990),k(8927),k(3105),k(5035),k(4345),k(7174),k(2846),k(4731),k(7209),k(6319),k(8867),k(7789),k(3739),k(9368),k(4483),k(2056),k(3462),k(678),k(7462),k(3824),k(5021),k(2974),k(5016),k(4747),k(3948),k(285);var tn=function(){function Et(){!function Xi(Et,St){if(!(Et instanceof St))throw new TypeError("Cannot call a class as a function")}(this,Et)}return function Gn(Et,St,qe){return St&&ji(Et.prototype,St),qe&&ji(Et,qe),Et}(Et,[{key:"on",value:function(qe,Xe){return this._callbacks=this._callbacks||{},this._callbacks[qe]||(this._callbacks[qe]=[]),this._callbacks[qe].push(Xe),this}},{key:"emit",value:function(qe){this._callbacks=this._callbacks||{};for(var Xe=this._callbacks[qe],ze=arguments.length,He=new Array(ze>1?ze-1:0),ft=1;ft<ze;ft++)He[ft-1]=arguments[ft];if(Xe){var xi,Yt=wn(Xe,!0);try{for(Yt.s();!(xi=Yt.n()).done;)xi.value.apply(this,He)}catch(Pi){Yt.e(Pi)}finally{Yt.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+qe,{args:He})),this}},{key:"makeEvent",value:function(qe,Xe){var ze={bubbles:!0,cancelable:!0,detail:Xe};if("function"==typeof window.CustomEvent)return new CustomEvent(qe,ze);var He=document.createEvent("CustomEvent");return He.initCustomEvent(qe,ze.bubbles,ze.cancelable,ze.detail),He}},{key:"off",value:function(qe,Xe){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var ze=this._callbacks[qe];if(!ze)return this;if(1===arguments.length)return delete this._callbacks[qe],this;for(var He=0;He<ze.length;He++)if(ze[He]===Xe){ze.splice(He,1);break}return this}}]),Et}();function Pn(Et,St){var qe;if(typeof Symbol>"u"||null==Et[Symbol.iterator]){if(Array.isArray(Et)||(qe=function Dr(Et,St){if(Et){if("string"==typeof Et)return Ir(Et,St);var qe=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===qe&&Et.constructor&&(qe=Et.constructor.name),"Map"===qe||"Set"===qe)return Array.from(Et);if("Arguments"===qe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qe))return Ir(Et,St)}}(Et))||St&&Et&&"number"==typeof Et.length){qe&&(Et=qe);var Xe=0,ze=function(){};return{s:ze,n:function(){return Xe>=Et.length?{done:!0}:{done:!1,value:Et[Xe++]}},e:function(pi){throw pi},f:ze}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Yt,He=!0,ft=!1;return{s:function(){qe=Et[Symbol.iterator]()},n:function(){var pi=qe.next();return He=pi.done,pi},e:function(pi){ft=!0,Yt=pi},f:function(){try{!He&&null!=qe.return&&qe.return()}finally{if(ft)throw Yt}}}}function Ir(Et,St){(null==St||St>Et.length)&&(St=Et.length);for(var qe=0,Xe=new Array(St);qe<St;qe++)Xe[qe]=Et[qe];return Xe}var pr={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(St,qe,Xe){if(Xe)return{dzuuid:Xe.file.upload.uuid,dzchunkindex:Xe.index,dztotalfilesize:Xe.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:Xe.file.upload.totalChunkCount,dzchunkbyteoffset:Xe.index*this.options.chunkSize}},accept:function(St,qe){return qe()},chunksUploaded:function(St,qe){qe()},fallback:function(){var St;this.element.className="".concat(this.element.className," dz-browser-not-supported");var Xe,qe=Pn(this.element.getElementsByTagName("div"),!0);try{for(qe.s();!(Xe=qe.n()).done;){var ze=Xe.value;if(/(^| )dz-message($| )/.test(ze.className)){St=ze,ze.className="dz-message";break}}}catch(ft){qe.e(ft)}finally{qe.f()}St||(St=lt.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(St));var He=St.getElementsByTagName("span")[0];return He&&(null!=He.textContent?He.textContent=this.options.dictFallbackMessage:null!=He.innerText&&(He.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(St,qe,Xe,ze){var He={srcX:0,srcY:0,srcWidth:St.width,srcHeight:St.height},ft=St.width/St.height;null==qe&&null==Xe?(qe=He.srcWidth,Xe=He.srcHeight):null==qe?qe=Xe*ft:null==Xe&&(Xe=qe/ft);var Yt=(qe=Math.min(qe,He.srcWidth))/(Xe=Math.min(Xe,He.srcHeight));if(He.srcWidth>qe||He.srcHeight>Xe)if("crop"===ze)ft>Yt?(He.srcHeight=St.height,He.srcWidth=He.srcHeight*Yt):(He.srcWidth=St.width,He.srcHeight=He.srcWidth/Yt);else{if("contain"!==ze)throw new Error("Unknown resizeMethod '".concat(ze,"'"));ft>Yt?Xe=qe/ft:qe=Xe*ft}return He.srcX=(St.width-He.srcWidth)/2,He.srcY=(St.height-He.srcHeight)/2,He.trgWidth=qe,He.trgHeight=Xe,He},transformFile:function(St,qe){return(this.options.resizeWidth||this.options.resizeHeight)&&St.type.match(/image.*/)?this.resizeImage(St,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,qe):qe(St)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(St){return this.element.classList.remove("dz-drag-hover")},dragstart:function(St){},dragend:function(St){return this.element.classList.remove("dz-drag-hover")},dragenter:function(St){return this.element.classList.add("dz-drag-hover")},dragover:function(St){return this.element.classList.add("dz-drag-hover")},dragleave:function(St){return this.element.classList.remove("dz-drag-hover")},paste:function(St){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(St){var qe=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){St.previewElement=lt.createElement(this.options.previewTemplate.trim()),St.previewTemplate=St.previewElement,this.previewsContainer.appendChild(St.previewElement);var ze,Xe=Pn(St.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(Xe.s();!(ze=Xe.n()).done;){var He=ze.value;He.textContent=St.name}}catch(yt){Xe.e(yt)}finally{Xe.f()}var Yt,ft=Pn(St.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(ft.s();!(Yt=ft.n()).done;)(He=Yt.value).innerHTML=this.filesize(St.size)}catch(yt){ft.e(yt)}finally{ft.f()}this.options.addRemoveLinks&&(St._removeLink=lt.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),St.previewElement.appendChild(St._removeLink));var Pi,xi=function(fe){return fe.preventDefault(),fe.stopPropagation(),St.status===lt.UPLOADING?lt.confirm(qe.options.dictCancelUploadConfirmation,function(){return qe.removeFile(St)}):qe.options.dictRemoveFileConfirmation?lt.confirm(qe.options.dictRemoveFileConfirmation,function(){return qe.removeFile(St)}):qe.removeFile(St)},pi=Pn(St.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(pi.s();!(Pi=pi.n()).done;)Pi.value.addEventListener("click",xi)}catch(yt){pi.e(yt)}finally{pi.f()}}},removedfile:function(St){return null!=St.previewElement&&null!=St.previewElement.parentNode&&St.previewElement.parentNode.removeChild(St.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(St,qe){if(St.previewElement){St.previewElement.classList.remove("dz-file-preview");var ze,Xe=Pn(St.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(Xe.s();!(ze=Xe.n()).done;){var He=ze.value;He.alt=St.name,He.src=qe}}catch(ft){Xe.e(ft)}finally{Xe.f()}return setTimeout(function(){return St.previewElement.classList.add("dz-image-preview")},1)}},error:function(St,qe){if(St.previewElement){St.previewElement.classList.add("dz-error"),"string"!=typeof qe&&qe.error&&(qe=qe.error);var ze,Xe=Pn(St.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(Xe.s();!(ze=Xe.n()).done;)ze.value.textContent=qe}catch(ft){Xe.e(ft)}finally{Xe.f()}}},errormultiple:function(){},processing:function(St){if(St.previewElement&&(St.previewElement.classList.add("dz-processing"),St._removeLink))return St._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(St,qe,Xe){if(St.previewElement){var He,ze=Pn(St.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(ze.s();!(He=ze.n()).done;){var ft=He.value;"PROGRESS"===ft.nodeName?ft.value=qe:ft.style.width="".concat(qe,"%")}}catch(Yt){ze.e(Yt)}finally{ze.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(St){if(St.previewElement)return St.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(St){return this.emit("error",St,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(St){if(St._removeLink&&(St._removeLink.innerHTML=this.options.dictRemoveFile),St.previewElement)return St.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function or(Et){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(qe){return typeof qe}:function(qe){return qe&&"function"==typeof Symbol&&qe.constructor===Symbol&&qe!==Symbol.prototype?"symbol":typeof qe})(Et)}function Tn(Et,St){var qe;if(typeof Symbol>"u"||null==Et[Symbol.iterator]){if(Array.isArray(Et)||(qe=function ur(Et,St){if(Et){if("string"==typeof Et)return Rr(Et,St);var qe=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===qe&&Et.constructor&&(qe=Et.constructor.name),"Map"===qe||"Set"===qe)return Array.from(Et);if("Arguments"===qe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qe))return Rr(Et,St)}}(Et))||St&&Et&&"number"==typeof Et.length){qe&&(Et=qe);var Xe=0,ze=function(){};return{s:ze,n:function(){return Xe>=Et.length?{done:!0}:{done:!1,value:Et[Xe++]}},e:function(pi){throw pi},f:ze}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Yt,He=!0,ft=!1;return{s:function(){qe=Et[Symbol.iterator]()},n:function(){var pi=qe.next();return He=pi.done,pi},e:function(pi){ft=!0,Yt=pi},f:function(){try{!He&&null!=qe.return&&qe.return()}finally{if(ft)throw Yt}}}}function Rr(Et,St){(null==St||St>Et.length)&&(St=Et.length);for(var qe=0,Xe=new Array(St);qe<St;qe++)Xe[qe]=Et[qe];return Xe}function ks(Et,St){if(!(Et instanceof St))throw new TypeError("Cannot call a class as a function")}function er(Et,St){for(var qe=0;qe<St.length;qe++){var Xe=St[qe];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Et,Xe.key,Xe)}}function gr(Et,St,qe){return St&&er(Et.prototype,St),qe&&er(Et,qe),Et}function hr(Et,St){if("function"!=typeof St&&null!==St)throw new TypeError("Super expression must either be null or a function");Et.prototype=Object.create(St&&St.prototype,{constructor:{value:Et,writable:!0,configurable:!0}}),St&&Cr(Et,St)}function Cr(Et,St){return(Cr=Object.setPrototypeOf||function(Xe,ze){return Xe.__proto__=ze,Xe})(Et,St)}function $r(Et){var St=function Ne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var ze,Xe=ut(Et);if(St){var He=ut(this).constructor;ze=Reflect.construct(Xe,arguments,He)}else ze=Xe.apply(this,arguments);return Ct(this,ze)}}function Ct(Et,St){return!St||"object"!==or(St)&&"function"!=typeof St?Ie(Et):St}function Ie(Et){if(void 0===Et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}function ut(Et){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(qe){return qe.__proto__||Object.getPrototypeOf(qe)})(Et)}var lt=function(Et){hr(qe,Et);var St=$r(qe);function qe(Xe,ze){var He,ft,Yt;if(ks(this,qe),(He=St.call(this)).element=Xe,He.version=qe.version,He.clickableElements=[],He.listeners=[],He.files=[],"string"==typeof He.element&&(He.element=document.querySelector(He.element)),!He.element||null==He.element.nodeType)throw new Error("Invalid dropzone element.");if(He.element.dropzone)throw new Error("Dropzone already attached.");qe.instances.push(Ie(He)),He.element.dropzone=Ie(He);var xi=null!=(Yt=qe.optionsForElement(He.element))?Yt:{};if(He.options=qe.extend({},pr,xi,ze??{}),He.options.previewTemplate=He.options.previewTemplate.replace(/\n*/g,""),He.options.forceFallback||!qe.isBrowserSupported())return Ct(He,He.options.fallback.call(Ie(He)));if(null==He.options.url&&(He.options.url=He.element.getAttribute("action")),!He.options.url)throw new Error("No URL provided.");if(He.options.acceptedFiles&&He.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(He.options.uploadMultiple&&He.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return He.options.acceptedMimeTypes&&(He.options.acceptedFiles=He.options.acceptedMimeTypes,delete He.options.acceptedMimeTypes),null!=He.options.renameFilename&&(He.options.renameFile=function(pi){return He.options.renameFilename.call(Ie(He),pi.name,pi)}),"string"==typeof He.options.method&&(He.options.method=He.options.method.toUpperCase()),(ft=He.getExistingFallback())&&ft.parentNode&&ft.parentNode.removeChild(ft),!1!==He.options.previewsContainer&&(He.previewsContainer=He.options.previewsContainer?qe.getElement(He.options.previewsContainer,"previewsContainer"):He.element),He.options.clickable&&(He.clickableElements=!0===He.options.clickable?[He.element]:qe.getElements(He.options.clickable,"clickable")),He.init(),He}return gr(qe,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(ze){return ze.accepted}).map(function(ze){return ze})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(ze){return!ze.accepted}).map(function(ze){return ze})}},{key:"getFilesWithStatus",value:function(ze){return this.files.filter(function(He){return He.status===ze}).map(function(He){return He})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(qe.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(qe.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(qe.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(ze){return ze.status===qe.UPLOADING||ze.status===qe.QUEUED}).map(function(ze){return ze})}},{key:"init",value:function(){var ze=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(qe.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function rt(){ze.hiddenFileInput&&ze.hiddenFileInput.parentNode.removeChild(ze.hiddenFileInput),ze.hiddenFileInput=document.createElement("input"),ze.hiddenFileInput.setAttribute("type","file"),(null===ze.options.maxFiles||ze.options.maxFiles>1)&&ze.hiddenFileInput.setAttribute("multiple","multiple"),ze.hiddenFileInput.className="dz-hidden-input",null!==ze.options.acceptedFiles&&ze.hiddenFileInput.setAttribute("accept",ze.options.acceptedFiles),null!==ze.options.capture&&ze.hiddenFileInput.setAttribute("capture",ze.options.capture),ze.hiddenFileInput.setAttribute("tabindex","-1"),ze.hiddenFileInput.style.visibility="hidden",ze.hiddenFileInput.style.position="absolute",ze.hiddenFileInput.style.top="0",ze.hiddenFileInput.style.left="0",ze.hiddenFileInput.style.height="0",ze.hiddenFileInput.style.width="0",qe.getElement(ze.options.hiddenInputContainer,"hiddenInputContainer").appendChild(ze.hiddenFileInput),ze.hiddenFileInput.addEventListener("change",function(){var yt=ze.hiddenFileInput.files;if(yt.length){var it,fe=Tn(yt,!0);try{for(fe.s();!(it=fe.n()).done;)ze.addFile(it.value)}catch(Pe){fe.e(Pe)}finally{fe.f()}}ze.emit("addedfiles",yt),rt()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var Yt,ft=Tn(this.events,!0);try{for(ft.s();!(Yt=ft.n()).done;){var xi=Yt.value;this.on(xi,this.options[xi])}}catch(rt){ft.e(rt)}finally{ft.f()}this.on("uploadprogress",function(){return ze.updateTotalUploadProgress()}),this.on("removedfile",function(){return ze.updateTotalUploadProgress()}),this.on("canceled",function(rt){return ze.emit("complete",rt)}),this.on("complete",function(rt){if(0===ze.getAddedFiles().length&&0===ze.getUploadingFiles().length&&0===ze.getQueuedFiles().length)return setTimeout(function(){return ze.emit("queuecomplete")},0)});var Pi=function(yt){if(function(yt){if(yt.dataTransfer.types)for(var fe=0;fe<yt.dataTransfer.types.length;fe++)if("Files"===yt.dataTransfer.types[fe])return!0;return!1}(yt))return yt.stopPropagation(),yt.preventDefault?yt.preventDefault():yt.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(yt){return ze.emit("dragstart",yt)},dragenter:function(yt){return Pi(yt),ze.emit("dragenter",yt)},dragover:function(yt){var fe;try{fe=yt.dataTransfer.effectAllowed}catch{}return yt.dataTransfer.dropEffect="move"===fe||"linkMove"===fe?"move":"copy",Pi(yt),ze.emit("dragover",yt)},dragleave:function(yt){return ze.emit("dragleave",yt)},drop:function(yt){return Pi(yt),ze.drop(yt)},dragend:function(yt){return ze.emit("dragend",yt)}}}],this.clickableElements.forEach(function(rt){return ze.listeners.push({element:rt,events:{click:function(fe){return(rt!==ze.element||fe.target===ze.element||qe.elementInside(fe.target,ze.element.querySelector(".dz-message")))&&ze.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,qe.instances.splice(qe.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var ze,He=0,ft=0;if(this.getActiveFiles().length){var pi,xi=Tn(this.getActiveFiles(),!0);try{for(xi.s();!(pi=xi.n()).done;){var Pi=pi.value;He+=Pi.upload.bytesSent,ft+=Pi.upload.total}}catch(rt){xi.e(rt)}finally{xi.f()}ze=100*He/ft}else ze=100;return this.emit("totaluploadprogress",ze,ft,He)}},{key:"_getParamName",value:function(ze){return"function"==typeof this.options.paramName?this.options.paramName(ze):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(ze,"]"):"")}},{key:"_renameFile",value:function(ze){return"function"!=typeof this.options.renameFile?ze.name:this.options.renameFile(ze)}},{key:"getFallbackForm",value:function(){var ze,He;if(ze=this.getExistingFallback())return ze;var ft='<div class="dz-fallback">';this.options.dictFallbackText&&(ft+="<p>".concat(this.options.dictFallbackText,"</p>")),ft+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var Yt=qe.createElement(ft);return"FORM"!==this.element.tagName?(He=qe.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(Yt):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),He??Yt}},{key:"getExistingFallback",value:function(){for(var ze=function(Pi){var yt,rt=Tn(Pi,!0);try{for(rt.s();!(yt=rt.n()).done;){var fe=yt.value;if(/(^| )fallback($| )/.test(fe.className))return fe}}catch(it){rt.e(it)}finally{rt.f()}},He=0,ft=["div","form"];He<ft.length;He++){var xi;if(xi=ze(this.element.getElementsByTagName(ft[He])))return xi}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(ze){return function(){var He=[];for(var ft in ze.events)He.push(ze.element.addEventListener(ft,ze.events[ft],!1));return He}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(ze){return function(){var He=[];for(var ft in ze.events)He.push(ze.element.removeEventListener(ft,ze.events[ft],!1));return He}()})}},{key:"disable",value:function(){var ze=this;return this.clickableElements.forEach(function(He){return He.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(He){return ze.cancelUpload(He)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(ze){return ze.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(ze){var He=0,ft="b";if(ze>0){for(var Yt=["tb","gb","mb","kb","b"],xi=0;xi<Yt.length;xi++){var pi=Yt[xi];if(ze>=Math.pow(this.options.filesizeBase,4-xi)/10){He=ze/Math.pow(this.options.filesizeBase,4-xi),ft=pi;break}}He=Math.round(10*He)/10}return"<strong>".concat(He,"</strong> ").concat(this.options.dictFileSizeUnits[ft])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(ze){if(ze.dataTransfer){this.emit("drop",ze);for(var He=[],ft=0;ft<ze.dataTransfer.files.length;ft++)He[ft]=ze.dataTransfer.files[ft];if(He.length){var Yt=ze.dataTransfer.items;Yt&&Yt.length&&null!=Yt[0].webkitGetAsEntry?this._addFilesFromItems(Yt):this.handleFiles(He)}this.emit("addedfiles",He)}}},{key:"paste",value:function(ze){if(null!=function Ui(Et,St){return typeof Et<"u"&&null!==Et?St(Et):void 0}(ze?.clipboardData,function(ft){return ft.items})){this.emit("paste",ze);var He=ze.clipboardData.items;if(He.length)return this._addFilesFromItems(He)}}},{key:"handleFiles",value:function(ze){var ft,He=Tn(ze,!0);try{for(He.s();!(ft=He.n()).done;)this.addFile(ft.value)}catch(xi){He.e(xi)}finally{He.f()}}},{key:"_addFilesFromItems",value:function(ze){var He=this;return function(){var xi,ft=[],Yt=Tn(ze,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var Pi,pi=xi.value;null!=pi.webkitGetAsEntry&&(Pi=pi.webkitGetAsEntry())?ft.push(Pi.isFile?He.addFile(pi.getAsFile()):Pi.isDirectory?He._addFilesFromDirectory(Pi,Pi.name):void 0):ft.push(null==pi.getAsFile||null!=pi.kind&&"file"!==pi.kind?void 0:He.addFile(pi.getAsFile()))}}catch(rt){Yt.e(rt)}finally{Yt.f()}return ft}()}},{key:"_addFilesFromDirectory",value:function(ze,He){var ft=this,Yt=ze.createReader(),xi=function(rt){return function di(Et,St,qe){if(typeof Et<"u"&&null!==Et&&"function"==typeof Et[St])return qe(Et,St)}(console,"log",function(yt){return yt.log(rt)})};return function Pi(){return Yt.readEntries(function(rt){if(rt.length>0){var fe,yt=Tn(rt,!0);try{for(yt.s();!(fe=yt.n()).done;){var it=fe.value;it.isFile?it.file(function(Tt){if(!ft.options.ignoreHiddenFiles||"."!==Tt.name.substring(0,1))return Tt.fullPath="".concat(He,"/").concat(Tt.name),ft.addFile(Tt)}):it.isDirectory&&ft._addFilesFromDirectory(it,"".concat(He,"/").concat(it.name))}}catch(Tt){yt.e(Tt)}finally{yt.f()}Pi()}return null},xi)}()}},{key:"accept",value:function(ze,He){this.options.maxFilesize&&ze.size>1024*this.options.maxFilesize*1024?He(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(ze.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):qe.isValidFile(ze,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(He(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",ze)):this.options.accept.call(this,ze,He):He(this.options.dictInvalidFileType)}},{key:"addFile",value:function(ze){var He=this;ze.upload={uuid:qe.uuidv4(),progress:0,total:ze.size,bytesSent:0,filename:this._renameFile(ze)},this.files.push(ze),ze.status=qe.ADDED,this.emit("addedfile",ze),this._enqueueThumbnail(ze),this.accept(ze,function(ft){ft?(ze.accepted=!1,He._errorProcessing([ze],ft)):(ze.accepted=!0,He.options.autoQueue&&He.enqueueFile(ze)),He._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(ze){var ft,He=Tn(ze,!0);try{for(He.s();!(ft=He.n()).done;)this.enqueueFile(ft.value)}catch(xi){He.e(xi)}finally{He.f()}return null}},{key:"enqueueFile",value:function(ze){var He=this;if(ze.status!==qe.ADDED||!0!==ze.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(ze.status=qe.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return He.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(ze){var He=this;if(this.options.createImageThumbnails&&ze.type.match(/image.*/)&&ze.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(ze),setTimeout(function(){return He._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var ze=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var He=this._thumbnailQueue.shift();return this.createThumbnail(He,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(ft){return ze.emit("thumbnail",He,ft),ze._processingThumbnail=!1,ze._processThumbnailQueue()})}}},{key:"removeFile",value:function(ze){if(ze.status===qe.UPLOADING&&this.cancelUpload(ze),this.files=zt(this.files,ze),this.emit("removedfile",ze),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(ze){null==ze&&(ze=!1);var ft,He=Tn(this.files.slice(),!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value;(Yt.status!==qe.UPLOADING||ze)&&this.removeFile(Yt)}}catch(xi){He.e(xi)}finally{He.f()}return null}},{key:"resizeImage",value:function(ze,He,ft,Yt,xi){var pi=this;return this.createThumbnail(ze,He,ft,Yt,!0,function(Pi,rt){if(null==rt)return xi(ze);var yt=pi.options.resizeMimeType;null==yt&&(yt=ze.type);var fe=rt.toDataURL(yt,pi.options.resizeQuality);return("image/jpeg"===yt||"image/jpg"===yt)&&(fe=ui.restore(ze.dataURL,fe)),xi(qe.dataURItoBlob(fe))})}},{key:"createThumbnail",value:function(ze,He,ft,Yt,xi,pi){var Pi=this,rt=new FileReader;rt.onload=function(){ze.dataURL=rt.result,"image/svg+xml"!==ze.type?Pi.createThumbnailFromUrl(ze,He,ft,Yt,xi,pi):pi?.(rt.result)},rt.readAsDataURL(ze)}},{key:"displayExistingFile",value:function(ze,He,ft,Yt){var xi=this,pi=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",ze),this.emit("complete",ze),pi){ze.dataURL=He,this.createThumbnailFromUrl(ze,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(yt){xi.emit("thumbnail",ze,yt),ft&&ft()},Yt)}else this.emit("thumbnail",ze,He),ft&&ft()}},{key:"createThumbnailFromUrl",value:function(ze,He,ft,Yt,xi,pi,Pi){var rt=this,yt=document.createElement("img");return Pi&&(yt.crossOrigin=Pi),xi="from-image"!=getComputedStyle(document.body).imageOrientation&&xi,yt.onload=function(){var fe=function(Tt){return Tt(1)};return typeof EXIF<"u"&&null!==EXIF&&xi&&(fe=function(Tt){return EXIF.getData(yt,function(){return Tt(EXIF.getTag(this,"Orientation"))})}),fe(function(it){ze.width=yt.width,ze.height=yt.height;var Tt=rt.options.resize.call(rt,ze,He,ft,Yt),Pe=document.createElement("canvas"),Lt=Pe.getContext("2d");switch(Pe.width=Tt.trgWidth,Pe.height=Tt.trgHeight,it>4&&(Pe.width=Tt.trgHeight,Pe.height=Tt.trgWidth),it){case 2:Lt.translate(Pe.width,0),Lt.scale(-1,1);break;case 3:Lt.translate(Pe.width,Pe.height),Lt.rotate(Math.PI);break;case 4:Lt.translate(0,Pe.height),Lt.scale(1,-1);break;case 5:Lt.rotate(.5*Math.PI),Lt.scale(1,-1);break;case 6:Lt.rotate(.5*Math.PI),Lt.translate(0,-Pe.width);break;case 7:Lt.rotate(.5*Math.PI),Lt.translate(Pe.height,-Pe.width),Lt.scale(-1,1);break;case 8:Lt.rotate(-.5*Math.PI),Lt.translate(-Pe.height,0)}pt(Lt,yt,null!=Tt.srcX?Tt.srcX:0,null!=Tt.srcY?Tt.srcY:0,Tt.srcWidth,Tt.srcHeight,null!=Tt.trgX?Tt.trgX:0,null!=Tt.trgY?Tt.trgY:0,Tt.trgWidth,Tt.trgHeight);var le=Pe.toDataURL("image/png");if(null!=pi)return pi(le,Pe)})},null!=pi&&(yt.onerror=pi),yt.src=ze.dataURL}},{key:"processQueue",value:function(){var ze=this.options.parallelUploads,He=this.getUploadingFiles().length,ft=He;if(!(He>=ze)){var Yt=this.getQueuedFiles();if(Yt.length>0){if(this.options.uploadMultiple)return this.processFiles(Yt.slice(0,ze-He));for(;ft<ze;){if(!Yt.length)return;this.processFile(Yt.shift()),ft++}}}}},{key:"processFile",value:function(ze){return this.processFiles([ze])}},{key:"processFiles",value:function(ze){var ft,He=Tn(ze,!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value;Yt.processing=!0,Yt.status=qe.UPLOADING,this.emit("processing",Yt)}}catch(xi){He.e(xi)}finally{He.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",ze),this.uploadFiles(ze)}},{key:"_getFilesWithXhr",value:function(ze){return this.files.filter(function(ft){return ft.xhr===ze}).map(function(ft){return ft})}},{key:"cancelUpload",value:function(ze){if(ze.status===qe.UPLOADING){var Yt,He=this._getFilesWithXhr(ze.xhr),ft=Tn(He,!0);try{for(ft.s();!(Yt=ft.n()).done;)Yt.value.status=qe.CANCELED}catch(yt){ft.e(yt)}finally{ft.f()}typeof ze.xhr<"u"&&ze.xhr.abort();var Pi,pi=Tn(He,!0);try{for(pi.s();!(Pi=pi.n()).done;)this.emit("canceled",Pi.value)}catch(yt){pi.e(yt)}finally{pi.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",He)}else(ze.status===qe.ADDED||ze.status===qe.QUEUED)&&(ze.status=qe.CANCELED,this.emit("canceled",ze),this.options.uploadMultiple&&this.emit("canceledmultiple",[ze]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(ze){if("function"==typeof ze){for(var He=arguments.length,ft=new Array(He>1?He-1:0),Yt=1;Yt<He;Yt++)ft[Yt-1]=arguments[Yt];return ze.apply(this,ft)}return ze}},{key:"uploadFile",value:function(ze){return this.uploadFiles([ze])}},{key:"uploadFiles",value:function(ze){var He=this;this._transformFiles(ze,function(ft){if(He.options.chunking){var Yt=ft[0];ze[0].upload.chunked=He.options.chunking&&(He.options.forceChunking||Yt.size>He.options.chunkSize),ze[0].upload.totalChunkCount=Math.ceil(Yt.size/He.options.chunkSize)}if(ze[0].upload.chunked){var xi=ze[0],pi=ft[0];xi.upload.chunks=[];var rt=function(){for(var Pe=0;void 0!==xi.upload.chunks[Pe];)Pe++;if(!(Pe>=xi.upload.totalChunkCount)){var Lt=Pe*He.options.chunkSize,le=Math.min(Lt+He.options.chunkSize,pi.size),o={name:He._getParamName(0),data:pi.webkitSlice?pi.webkitSlice(Lt,le):pi.slice(Lt,le),filename:xi.upload.filename,chunkIndex:Pe};xi.upload.chunks[Pe]={file:xi,index:Pe,dataBlock:o,status:qe.UPLOADING,progress:0,retries:0},He._uploadData(ze,[o])}};if(xi.upload.finishedChunkUpload=function(Tt,Pe){var Lt=!0;Tt.status=qe.SUCCESS,Tt.dataBlock=null,Tt.xhr=null;for(var le=0;le<xi.upload.totalChunkCount;le++){if(void 0===xi.upload.chunks[le])return rt();xi.upload.chunks[le].status!==qe.SUCCESS&&(Lt=!1)}Lt&&He.options.chunksUploaded(xi,function(){He._finished(ze,Pe,null)})},He.options.parallelChunkUploads)for(var yt=0;yt<xi.upload.totalChunkCount;yt++)rt();else rt()}else{for(var fe=[],it=0;it<ze.length;it++)fe[it]={name:He._getParamName(it),data:ft[it],filename:ze[it].upload.filename};He._uploadData(ze,fe)}})}},{key:"_getChunk",value:function(ze,He){for(var ft=0;ft<ze.upload.totalChunkCount;ft++)if(void 0!==ze.upload.chunks[ft]&&ze.upload.chunks[ft].xhr===He)return ze.upload.chunks[ft]}},{key:"_uploadData",value:function(ze,He){var pi,ft=this,Yt=new XMLHttpRequest,xi=Tn(ze,!0);try{for(xi.s();!(pi=xi.n()).done;)pi.value.xhr=Yt}catch(U){xi.e(U)}finally{xi.f()}ze[0].upload.chunked&&(ze[0].upload.chunks[He[0].chunkIndex].xhr=Yt);var rt=this.resolveOption(this.options.method,ze),yt=this.resolveOption(this.options.url,ze);Yt.open(rt,yt,!0),this.resolveOption(this.options.timeout,ze)&&(Yt.timeout=this.resolveOption(this.options.timeout,ze)),Yt.withCredentials=!!this.options.withCredentials,Yt.onload=function(U){ft._finishedUploading(ze,Yt,U)},Yt.ontimeout=function(){ft._handleUploadError(ze,Yt,"Request timedout after ".concat(ft.options.timeout/1e3," seconds"))},Yt.onerror=function(){ft._handleUploadError(ze,Yt)},(null!=Yt.upload?Yt.upload:Yt).onprogress=function(U){return ft._updateFilesUploadProgress(ze,Yt,U)};var Tt={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var Pe in this.options.headers&&qe.extend(Tt,this.options.headers),Tt){var Lt=Tt[Pe];Lt&&Yt.setRequestHeader(Pe,Lt)}var le=new FormData;if(this.options.params){var o=this.options.params;for(var c in"function"==typeof o&&(o=o.call(this,ze,Yt,ze[0].upload.chunked?this._getChunk(ze[0],Yt):null)),o){var h=o[c];if(Array.isArray(h))for(var _=0;_<h.length;_++)le.append(c,h[_]);else le.append(c,h)}}var x,b=Tn(ze,!0);try{for(b.s();!(x=b.n()).done;)this.emit("sending",x.value,Yt,le)}catch(U){b.e(U)}finally{b.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",ze,Yt,le),this._addFormElementData(le);for(var I=0;I<He.length;I++){var F=He[I];le.append(F.name,F.data,F.filename)}this.submitRequest(Yt,le,ze)}},{key:"_transformFiles",value:function(ze,He){for(var ft=this,Yt=[],xi=0,pi=function(yt){ft.options.transformFile.call(ft,ze[yt],function(fe){Yt[yt]=fe,++xi===ze.length&&He(Yt)})},Pi=0;Pi<ze.length;Pi++)pi(Pi)}},{key:"_addFormElementData",value:function(ze){if("FORM"===this.element.tagName){var ft,He=Tn(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value,xi=Yt.getAttribute("name"),pi=Yt.getAttribute("type");if(pi&&(pi=pi.toLowerCase()),!(typeof xi>"u"||null===xi))if("SELECT"===Yt.tagName&&Yt.hasAttribute("multiple")){var rt,Pi=Tn(Yt.options,!0);try{for(Pi.s();!(rt=Pi.n()).done;){var yt=rt.value;yt.selected&&ze.append(xi,yt.value)}}catch(fe){Pi.e(fe)}finally{Pi.f()}}else(!pi||"checkbox"!==pi&&"radio"!==pi||Yt.checked)&&ze.append(xi,Yt.value)}}catch(fe){He.e(fe)}finally{He.f()}}}},{key:"_updateFilesUploadProgress",value:function(ze,He,ft){if(ze[0].upload.chunked){var Pi=ze[0],rt=this._getChunk(Pi,He);ft?(rt.progress=100*ft.loaded/ft.total,rt.total=ft.total,rt.bytesSent=ft.loaded):(rt.progress=100,rt.bytesSent=rt.total),Pi.upload.progress=0,Pi.upload.total=0,Pi.upload.bytesSent=0;for(var yt=0;yt<Pi.upload.totalChunkCount;yt++)Pi.upload.chunks[yt]&&typeof Pi.upload.chunks[yt].progress<"u"&&(Pi.upload.progress+=Pi.upload.chunks[yt].progress,Pi.upload.total+=Pi.upload.chunks[yt].total,Pi.upload.bytesSent+=Pi.upload.chunks[yt].bytesSent);Pi.upload.progress=Pi.upload.progress/Pi.upload.totalChunkCount,this.emit("uploadprogress",Pi,Pi.upload.progress,Pi.upload.bytesSent)}else{var xi,Yt=Tn(ze,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var pi=xi.value;pi.upload.total&&pi.upload.bytesSent&&pi.upload.bytesSent==pi.upload.total||(ft?(pi.upload.progress=100*ft.loaded/ft.total,pi.upload.total=ft.total,pi.upload.bytesSent=ft.loaded):(pi.upload.progress=100,pi.upload.bytesSent=pi.upload.total),this.emit("uploadprogress",pi,pi.upload.progress,pi.upload.bytesSent))}}catch(fe){Yt.e(fe)}finally{Yt.f()}}}},{key:"_finishedUploading",value:function(ze,He,ft){var Yt;if(ze[0].status!==qe.CANCELED&&4===He.readyState){if("arraybuffer"!==He.responseType&&"blob"!==He.responseType&&(Yt=He.responseText,He.getResponseHeader("content-type")&&~He.getResponseHeader("content-type").indexOf("application/json")))try{Yt=JSON.parse(Yt)}catch(xi){ft=xi,Yt="Invalid JSON response from server."}this._updateFilesUploadProgress(ze,He),200<=He.status&&He.status<300?ze[0].upload.chunked?ze[0].upload.finishedChunkUpload(this._getChunk(ze[0],He),Yt):this._finished(ze,Yt,ft):this._handleUploadError(ze,He,Yt)}}},{key:"_handleUploadError",value:function(ze,He,ft){if(ze[0].status!==qe.CANCELED){if(ze[0].upload.chunked&&this.options.retryChunks){var Yt=this._getChunk(ze[0],He);if(Yt.retries++<this.options.retryChunksLimit)return void this._uploadData(ze,[Yt.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(ze,ft||this.options.dictResponseError.replace("{{statusCode}}",He.status),He)}}},{key:"submitRequest",value:function(ze,He,ft){1==ze.readyState?ze.send(He):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(ze,He,ft){var xi,Yt=Tn(ze,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var pi=xi.value;pi.status=qe.SUCCESS,this.emit("success",pi,He,ft),this.emit("complete",pi)}}catch(Pi){Yt.e(Pi)}finally{Yt.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",ze,He,ft),this.emit("completemultiple",ze)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(ze,He,ft){var xi,Yt=Tn(ze,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var pi=xi.value;pi.status=qe.ERROR,this.emit("error",pi,He,ft),this.emit("complete",pi)}}catch(Pi){Yt.e(Pi)}finally{Yt.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",ze,He,ft),this.emit("completemultiple",ze)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=tn,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(ze){for(var He=arguments.length,ft=new Array(He>1?He-1:0),Yt=1;Yt<He;Yt++)ft[Yt-1]=arguments[Yt];for(var xi=0,pi=ft;xi<pi.length;xi++){var Pi=pi[xi];for(var rt in Pi)ze[rt]=Pi[rt]}return ze}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ze){var He=16*Math.random()|0;return("x"===ze?He:3&He|8).toString(16)})}}]),qe}(tn);lt.initClass(),lt.version="5.9.3",lt.options={},lt.optionsForElement=function(Et){if(Et.getAttribute("id"))return lt.options[Kt(Et.getAttribute("id"))]},lt.instances=[],lt.forElement=function(Et){if("string"==typeof Et&&(Et=document.querySelector(Et)),null==Et?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return Et.dropzone},lt.autoDiscover=!0,lt.discover=function(){var Et;if(document.querySelectorAll)Et=document.querySelectorAll(".dropzone");else{Et=[];var St=function(Xe){return function(){var ft,ze=[],He=Tn(Xe,!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value;/(^| )dropzone($| )/.test(Yt.className)?ze.push(Et.push(Yt)):ze.push(void 0)}}catch(xi){He.e(xi)}finally{He.f()}return ze}()};St(document.getElementsByTagName("div")),St(document.getElementsByTagName("form"))}return function(){var ze,qe=[],Xe=Tn(Et,!0);try{for(Xe.s();!(ze=Xe.n()).done;){var He=ze.value;!1!==lt.optionsForElement(He)?qe.push(new lt(He)):qe.push(void 0)}}catch(ft){Xe.e(ft)}finally{Xe.f()}return qe}()},lt.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],lt.isBrowserSupported=function(){var Et=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==lt.blacklistedBrowsers&&(lt.blockedBrowsers=lt.blacklistedBrowsers);var qe,St=Tn(lt.blockedBrowsers,!0);try{for(St.s();!(qe=St.n()).done;)qe.value.test(navigator.userAgent)&&(Et=!1)}catch(ze){St.e(ze)}finally{St.f()}}else Et=!1;else Et=!1;return Et},lt.dataURItoBlob=function(Et){for(var St=atob(Et.split(",")[1]),qe=Et.split(",")[0].split(":")[1].split(";")[0],Xe=new ArrayBuffer(St.length),ze=new Uint8Array(Xe),He=0,ft=St.length,Yt=0<=ft;Yt?He<=ft:He>=ft;Yt?He++:He--)ze[He]=St.charCodeAt(He);return new Blob([Xe],{type:qe})};var zt=function(St,qe){return St.filter(function(Xe){return Xe!==qe}).map(function(Xe){return Xe})},Kt=function(St){return St.replace(/[\-_](\w)/g,function(qe){return qe.charAt(1).toUpperCase()})};lt.createElement=function(Et){var St=document.createElement("div");return St.innerHTML=Et,St.childNodes[0]},lt.elementInside=function(Et,St){if(Et===St)return!0;for(;Et=Et.parentNode;)if(Et===St)return!0;return!1},lt.getElement=function(Et,St){var qe;if("string"==typeof Et?qe=document.querySelector(Et):null!=Et.nodeType&&(qe=Et),null==qe)throw new Error("Invalid `".concat(St,"` option provided. Please provide a CSS selector or a plain HTML element."));return qe},lt.getElements=function(Et,St){var Xe;if(Et instanceof Array){Xe=[];try{var He,ze=Tn(Et,!0);try{for(ze.s();!(He=ze.n()).done;)Xe.push(this.getElement(He.value,St))}catch(xi){ze.e(xi)}finally{ze.f()}}catch{Xe=null}}else if("string"==typeof Et){Xe=[];var Yt,ft=Tn(document.querySelectorAll(Et),!0);try{for(ft.s();!(Yt=ft.n()).done;)Xe.push(Yt.value)}catch(xi){ft.e(xi)}finally{ft.f()}}else null!=Et.nodeType&&(Xe=[Et]);if(null==Xe||!Xe.length)throw new Error("Invalid `".concat(St,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return Xe},lt.confirm=function(Et,St,qe){return window.confirm(Et)?St():null!=qe?qe():void 0},lt.isValidFile=function(Et,St){if(!St)return!0;St=St.split(",");var He,qe=Et.type,Xe=qe.replace(/\/.*$/,""),ze=Tn(St,!0);try{for(ze.s();!(He=ze.n()).done;){var ft=He.value;if("."===(ft=ft.trim()).charAt(0)){if(-1!==Et.name.toLowerCase().indexOf(ft.toLowerCase(),Et.name.length-ft.length))return!0}else if(/\/\*$/.test(ft)){if(Xe===ft.replace(/\/.*$/,""))return!0}else if(qe===ft)return!0}}catch(Yt){ze.e(Yt)}finally{ze.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(Et){return this.each(function(){return new lt(this,Et)})}),lt.ADDED="added",lt.QUEUED="queued",lt.ACCEPTED=lt.QUEUED,lt.UPLOADING="uploading",lt.PROCESSING=lt.UPLOADING,lt.CANCELED="canceled",lt.ERROR="error",lt.SUCCESS="success";var pt=function(St,qe,Xe,ze,He,ft,Yt,xi,pi,Pi){var rt=function(St){var Xe=St.naturalHeight,ze=document.createElement("canvas");ze.width=1,ze.height=Xe;var He=ze.getContext("2d");He.drawImage(St,0,0);for(var Yt=He.getImageData(1,0,1,Xe).data,xi=0,pi=Xe,Pi=Xe;Pi>xi;)0===Yt[4*(Pi-1)+3]?pi=Pi:xi=Pi,Pi=pi+xi>>1;var yt=Pi/Xe;return 0===yt?1:yt}(qe);return St.drawImage(qe,Xe,ze,He,ft,Yt,xi,pi,Pi/rt)},ui=function(){function Et(){ks(this,Et)}return gr(Et,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(qe){for(var Xe="",ze=void 0,He=void 0,ft="",Yt=void 0,xi=void 0,pi=void 0,Pi="",rt=0;Yt=(ze=qe[rt++])>>2,xi=(3&ze)<<4|(He=qe[rt++])>>4,pi=(15&He)<<2|(ft=qe[rt++])>>6,Pi=63&ft,isNaN(He)?pi=Pi=64:isNaN(ft)&&(Pi=64),Xe=Xe+this.KEY_STR.charAt(Yt)+this.KEY_STR.charAt(xi)+this.KEY_STR.charAt(pi)+this.KEY_STR.charAt(Pi),ze=He=ft="",Yt=xi=pi=Pi="",rt<qe.length;);return Xe}},{key:"restore",value:function(qe,Xe){if(!qe.match("data:image/jpeg;base64,"))return Xe;var ze=this.decode64(qe.replace("data:image/jpeg;base64,","")),He=this.slice2Segments(ze),ft=this.exifManipulation(Xe,He);return"data:image/jpeg;base64,".concat(this.encode64(ft))}},{key:"exifManipulation",value:function(qe,Xe){var ze=this.getExifArray(Xe),He=this.insertExif(qe,ze);return new Uint8Array(He)}},{key:"getExifArray",value:function(qe){for(var Xe=void 0,ze=0;ze<qe.length;){if(255===(Xe=qe[ze])[0]&225===Xe[1])return Xe;ze++}return[]}},{key:"insertExif",value:function(qe,Xe){var ze=qe.replace("data:image/jpeg;base64,",""),He=this.decode64(ze),ft=He.indexOf(255,3),Yt=He.slice(0,ft),xi=He.slice(ft),pi=Yt;return(pi=pi.concat(Xe)).concat(xi)}},{key:"slice2Segments",value:function(qe){for(var Xe=0,ze=[];!(255===qe[Xe]&218===qe[Xe+1]);){if(255===qe[Xe]&216===qe[Xe+1])Xe+=2;else{var ft=Xe+(256*qe[Xe+2]+qe[Xe+3])+2,Yt=qe.slice(Xe,ft);ze.push(Yt),Xe=ft}if(Xe>qe.length)break}return ze}},{key:"decode64",value:function(qe){var He=void 0,ft="",Yt=void 0,xi=void 0,pi=void 0,Pi="",rt=0,yt=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(qe)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),qe=qe.replace(/[^A-Za-z0-9\+\/\=]/g,"");Yt=this.KEY_STR.indexOf(qe.charAt(rt++)),He=(15&(xi=this.KEY_STR.indexOf(qe.charAt(rt++))))<<4|(pi=this.KEY_STR.indexOf(qe.charAt(rt++)))>>2,ft=(3&pi)<<6|(Pi=this.KEY_STR.indexOf(qe.charAt(rt++))),yt.push(Yt<<2|xi>>4),64!==pi&&yt.push(He),64!==Pi&&yt.push(ft),He=ft="",Yt=xi=pi=Pi="",rt<qe.length;);return yt}}]),Et}();ui.initClass();lt._autoDiscoverFunction=function(){if(lt.autoDiscover)return lt.discover()},function(St,qe){var Xe=!1,ze=!0,He=St.document,ft=He.documentElement,Yt=He.addEventListener?"addEventListener":"attachEvent",xi=He.addEventListener?"removeEventListener":"detachEvent",pi=He.addEventListener?"":"on",Pi=function yt(fe){if(("readystatechange"!==fe.type||"complete"===He.readyState)&&(("load"===fe.type?St:He)[xi](pi+fe.type,yt,!1),!Xe&&(Xe=!0)))return qe.call(St,fe.type||fe)};if("complete"!==He.readyState){if(He.createEventObject&&ft.doScroll){try{ze=!St.frameElement}catch{}ze&&function yt(){try{ft.doScroll("left")}catch{return void setTimeout(yt,50)}return Pi("poll")}()}He[Yt](pi+"DOMContentLoaded",Pi,!1),He[Yt](pi+"readystatechange",Pi,!1),St[Yt](pi+"load",Pi,!1)}}(window,lt._autoDiscoverFunction),window.Dropzone=lt;var un=lt}(),pn}()},6900:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(oo){for(var Yr=[],Rt=1;Rt<arguments.length;Rt++)Yr[Rt-1]=arguments[Rt];if(!oo)throw TypeError("Cannot convert undefined or null to object");for(var k=function(V){V&&Object.keys(V).forEach(function(Oe){return oo[Oe]=V[Oe]})},pn=0,Fe=Yr;pn<Fe.length;pn++)k(Fe[pn]);return oo})},9216:function(oo,Yr){!function(Rt){"use strict";function pn(m){var D,G,re,_e;for(G=1,re=arguments.length;G<re;G++)for(D in _e=arguments[G])m[D]=_e[D];return m}var Fe=Object.create||function(){function m(){}return function(D){return m.prototype=D,new m}}();function t(m,D){var G=Array.prototype.slice;if(m.bind)return m.bind.apply(m,G.call(arguments,1));var re=G.call(arguments,2);return function(){return m.apply(D,re.length?re.concat(G.call(arguments)):arguments)}}var V=0;function Oe(m){return"_leaflet_id"in m||(m._leaflet_id=++V),m._leaflet_id}function Me(m,D,G){var re,_e,Ue,Vt;return Vt=function(){re=!1,_e&&(Ue.apply(G,_e),_e=!1)},Ue=function(){re?_e=arguments:(m.apply(G,arguments),setTimeout(Vt,D),re=!0)},Ue}function De(m,D,G){var re=D[1],_e=D[0],Ue=re-_e;return m===re&&G?m:((m-_e)%Ue+Ue)%Ue+_e}function Be(){return!1}function Ge(m,D){if(!1===D)return m;var G=Math.pow(10,void 0===D?6:D);return Math.round(m*G)/G}function Je(m){return m.trim?m.trim():m.replace(/^\s+|\s+$/g,"")}function nt(m){return Je(m).split(/\s+/)}function mt(m,D){for(var G in Object.prototype.hasOwnProperty.call(m,"options")||(m.options=m.options?Fe(m.options):{}),D)m.options[G]=D[G];return m.options}function Pt(m,D,G){var re=[];for(var _e in m)re.push(encodeURIComponent(G?_e.toUpperCase():_e)+"="+encodeURIComponent(m[_e]));return(D&&-1!==D.indexOf("?")?"&":"?")+re.join("&")}var ot=/\{ *([\w_ -]+) *\}/g;function vt(m,D){return m.replace(ot,function(G,re){var _e=D[re];if(void 0===_e)throw new Error("No value provided for variable "+G);return"function"==typeof _e&&(_e=_e(D)),_e})}var wt=Array.isArray||function(m){return"[object Array]"===Object.prototype.toString.call(m)};function ai(m,D){for(var G=0;G<m.length;G++)if(m[G]===D)return G;return-1}var We="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ni(m){return window["webkit"+m]||window["moz"+m]||window["ms"+m]}var li=0;function at(m){var D=+new Date,G=Math.max(0,16-(D-li));return li=D+G,window.setTimeout(m,G)}var si=window.requestAnimationFrame||ni("RequestAnimationFrame")||at,Xt=window.cancelAnimationFrame||ni("CancelAnimationFrame")||ni("CancelRequestAnimationFrame")||function(m){window.clearTimeout(m)};function jt(m,D,G){if(!G||si!==at)return si.call(window,t(m,D));m.call(D)}function ht(m){m&&Xt.call(window,m)}var qt={__proto__:null,extend:pn,create:Fe,bind:t,get lastId(){return V},stamp:Oe,throttle:Me,wrapNum:De,falseFn:Be,formatNum:Ge,trim:Je,splitWords:nt,setOptions:mt,getParamString:Pt,template:vt,isArray:wt,indexOf:ai,emptyImageUrl:We,requestFn:si,cancelFn:Xt,requestAnimFrame:jt,cancelAnimFrame:ht};function ri(){}ri.extend=function(m){var D=function(){mt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},G=D.__super__=this.prototype,re=Fe(G);for(var _e in re.constructor=D,D.prototype=re,this)Object.prototype.hasOwnProperty.call(this,_e)&&"prototype"!==_e&&"__super__"!==_e&&(D[_e]=this[_e]);return m.statics&&pn(D,m.statics),m.includes&&(function mi(m){if(!(typeof L>"u")&&L&&L.Mixin){m=wt(m)?m:[m];for(var D=0;D<m.length;D++)m[D]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(m.includes),pn.apply(null,[re].concat(m.includes))),pn(re,m),delete re.statics,delete re.includes,re.options&&(re.options=G.options?Fe(G.options):{},pn(re.options,m.options)),re._initHooks=[],re.callInitHooks=function(){if(!this._initHooksCalled){G.callInitHooks&&G.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ue=0,Vt=re._initHooks.length;Ue<Vt;Ue++)re._initHooks[Ue].call(this)}},D},ri.include=function(m){var D=this.prototype.options;return pn(this.prototype,m),m.options&&(this.prototype.options=D,this.mergeOptions(m.options)),this},ri.mergeOptions=function(m){return pn(this.prototype.options,m),this},ri.addInitHook=function(m){var D=Array.prototype.slice.call(arguments,1),G="function"==typeof m?m:function(){this[m].apply(this,D)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(G),this};var Vi={on:function(m,D,G){if("object"==typeof m)for(var re in m)this._on(re,m[re],D);else for(var _e=0,Ue=(m=nt(m)).length;_e<Ue;_e++)this._on(m[_e],D,G);return this},off:function(m,D,G){if(arguments.length)if("object"==typeof m)for(var re in m)this._off(re,m[re],D);else{m=nt(m);for(var _e=1===arguments.length,Ue=0,Vt=m.length;Ue<Vt;Ue++)_e?this._off(m[Ue]):this._off(m[Ue],D,G)}else delete this._events;return this},_on:function(m,D,G,re){if("function"==typeof D){if(!1===this._listens(m,D,G)){G===this&&(G=void 0);var _e={fn:D,ctx:G};re&&(_e.once=!0),this._events=this._events||{},this._events[m]=this._events[m]||[],this._events[m].push(_e)}}else console.warn("wrong listener type: "+typeof D)},_off:function(m,D,G){var re,_e,Ue;if(this._events&&(re=this._events[m])){if(1===arguments.length){if(this._firingCount)for(_e=0,Ue=re.length;_e<Ue;_e++)re[_e].fn=Be;return void delete this._events[m]}if("function"!=typeof D)return void console.warn("wrong listener type: "+typeof D);var Vt=this._listens(m,D,G);!1!==Vt&&(this._firingCount&&(re[Vt].fn=Be,this._events[m]=re=re.slice()),re.splice(Vt,1))}},fire:function(m,D,G){if(!this.listens(m,G))return this;var re=pn({},D,{type:m,target:this,sourceTarget:D&&D.sourceTarget||this});if(this._events){var _e=this._events[m];if(_e){this._firingCount=this._firingCount+1||1;for(var Ue=0,Vt=_e.length;Ue<Vt;Ue++){var oi=_e[Ue],ki=oi.fn;oi.once&&this.off(m,ki,oi.ctx),ki.call(oi.ctx||this,re)}this._firingCount--}}return G&&this._propagateEvent(re),this},listens:function(m,D,G,re){"string"!=typeof m&&console.warn('"string" type argument expected');var _e=D;"function"!=typeof D&&(re=!!D,_e=void 0,G=void 0);var Ue=this._events&&this._events[m];if(Ue&&Ue.length&&!1!==this._listens(m,_e,G))return!0;if(re)for(var Vt in this._eventParents)if(this._eventParents[Vt].listens(m,D,G,re))return!0;return!1},_listens:function(m,D,G){if(!this._events)return!1;var re=this._events[m]||[];if(!D)return!!re.length;G===this&&(G=void 0);for(var _e=0,Ue=re.length;_e<Ue;_e++)if(re[_e].fn===D&&re[_e].ctx===G)return _e;return!1},once:function(m,D,G){if("object"==typeof m)for(var re in m)this._on(re,m[re],D,!0);else for(var _e=0,Ue=(m=nt(m)).length;_e<Ue;_e++)this._on(m[_e],D,G,!0);return this},addEventParent:function(m){return this._eventParents=this._eventParents||{},this._eventParents[Oe(m)]=m,this},removeEventParent:function(m){return this._eventParents&&delete this._eventParents[Oe(m)],this},_propagateEvent:function(m){for(var D in this._eventParents)this._eventParents[D].fire(m.type,pn({layer:m.target,propagatedFrom:m.target},m),!0)}};Vi.addEventListener=Vi.on,Vi.removeEventListener=Vi.clearAllEventListeners=Vi.off,Vi.addOneTimeEventListener=Vi.once,Vi.fireEvent=Vi.fire,Vi.hasEventListeners=Vi.listens;var _i=ri.extend(Vi);function Ci(m,D,G){this.x=G?Math.round(m):m,this.y=G?Math.round(D):D}var Fi=Math.trunc||function(m){return m>0?Math.floor(m):Math.ceil(m)};function qi(m,D,G){return m instanceof Ci?m:wt(m)?new Ci(m[0],m[1]):null==m?m:"object"==typeof m&&"x"in m&&"y"in m?new Ci(m.x,m.y):new Ci(m,D,G)}function xn(m,D){if(m)for(var G=D?[m,D]:m,re=0,_e=G.length;re<_e;re++)this.extend(G[re])}function mn(m,D){return!m||m instanceof xn?m:new xn(m,D)}function Vn(m,D){if(m)for(var G=D?[m,D]:m,re=0,_e=G.length;re<_e;re++)this.extend(G[re])}function ei(m,D){return m instanceof Vn?m:new Vn(m,D)}function Bi(m,D,G){if(isNaN(m)||isNaN(D))throw new Error("Invalid LatLng object: ("+m+", "+D+")");this.lat=+m,this.lng=+D,void 0!==G&&(this.alt=+G)}function on(m,D,G){return m instanceof Bi?m:wt(m)&&"object"!=typeof m[0]?3===m.length?new Bi(m[0],m[1],m[2]):2===m.length?new Bi(m[0],m[1]):null:null==m?m:"object"==typeof m&&"lat"in m?new Bi(m.lat,"lng"in m?m.lng:m.lon,m.alt):void 0===D?null:new Bi(m,D,G)}Ci.prototype={clone:function(){return new Ci(this.x,this.y)},add:function(m){return this.clone()._add(qi(m))},_add:function(m){return this.x+=m.x,this.y+=m.y,this},subtract:function(m){return this.clone()._subtract(qi(m))},_subtract:function(m){return this.x-=m.x,this.y-=m.y,this},divideBy:function(m){return this.clone()._divideBy(m)},_divideBy:function(m){return this.x/=m,this.y/=m,this},multiplyBy:function(m){return this.clone()._multiplyBy(m)},_multiplyBy:function(m){return this.x*=m,this.y*=m,this},scaleBy:function(m){return new Ci(this.x*m.x,this.y*m.y)},unscaleBy:function(m){return new Ci(this.x/m.x,this.y/m.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fi(this.x),this.y=Fi(this.y),this},distanceTo:function(m){var D=(m=qi(m)).x-this.x,G=m.y-this.y;return Math.sqrt(D*D+G*G)},equals:function(m){return(m=qi(m)).x===this.x&&m.y===this.y},contains:function(m){return m=qi(m),Math.abs(m.x)<=Math.abs(this.x)&&Math.abs(m.y)<=Math.abs(this.y)},toString:function(){return"Point("+Ge(this.x)+", "+Ge(this.y)+")"}},xn.prototype={extend:function(m){var D,G;if(!m)return this;if(m instanceof Ci||"number"==typeof m[0]||"x"in m)D=G=qi(m);else if(G=(m=mn(m)).max,!(D=m.min)||!G)return this;return this.min||this.max?(this.min.x=Math.min(D.x,this.min.x),this.max.x=Math.max(G.x,this.max.x),this.min.y=Math.min(D.y,this.min.y),this.max.y=Math.max(G.y,this.max.y)):(this.min=D.clone(),this.max=G.clone()),this},getCenter:function(m){return qi((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,m)},getBottomLeft:function(){return qi(this.min.x,this.max.y)},getTopRight:function(){return qi(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(m){var D,G;return(m="number"==typeof m[0]||m instanceof Ci?qi(m):mn(m))instanceof xn?(D=m.min,G=m.max):D=G=m,D.x>=this.min.x&&G.x<=this.max.x&&D.y>=this.min.y&&G.y<=this.max.y},intersects:function(m){m=mn(m);var D=this.min,G=this.max,re=m.min,_e=m.max;return _e.x>=D.x&&re.x<=G.x&&_e.y>=D.y&&re.y<=G.y},overlaps:function(m){m=mn(m);var D=this.min,G=this.max,re=m.min,_e=m.max;return _e.x>D.x&&re.x<G.x&&_e.y>D.y&&re.y<G.y},isValid:function(){return!(!this.min||!this.max)},pad:function(m){var D=this.min,G=this.max,re=Math.abs(D.x-G.x)*m,_e=Math.abs(D.y-G.y)*m;return mn(qi(D.x-re,D.y-_e),qi(G.x+re,G.y+_e))},equals:function(m){return!!m&&(m=mn(m),this.min.equals(m.getTopLeft())&&this.max.equals(m.getBottomRight()))}},Vn.prototype={extend:function(m){var re,_e,D=this._southWest,G=this._northEast;if(m instanceof Bi)re=m,_e=m;else{if(!(m instanceof Vn))return m?this.extend(on(m)||ei(m)):this;if(_e=m._northEast,!(re=m._southWest)||!_e)return this}return D||G?(D.lat=Math.min(re.lat,D.lat),D.lng=Math.min(re.lng,D.lng),G.lat=Math.max(_e.lat,G.lat),G.lng=Math.max(_e.lng,G.lng)):(this._southWest=new Bi(re.lat,re.lng),this._northEast=new Bi(_e.lat,_e.lng)),this},pad:function(m){var D=this._southWest,G=this._northEast,re=Math.abs(D.lat-G.lat)*m,_e=Math.abs(D.lng-G.lng)*m;return new Vn(new Bi(D.lat-re,D.lng-_e),new Bi(G.lat+re,G.lng+_e))},getCenter:function(){return new Bi((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Bi(this.getNorth(),this.getWest())},getSouthEast:function(){return new Bi(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(m){m="number"==typeof m[0]||m instanceof Bi||"lat"in m?on(m):ei(m);var re,_e,D=this._southWest,G=this._northEast;return m instanceof Vn?(re=m.getSouthWest(),_e=m.getNorthEast()):re=_e=m,re.lat>=D.lat&&_e.lat<=G.lat&&re.lng>=D.lng&&_e.lng<=G.lng},intersects:function(m){m=ei(m);var D=this._southWest,G=this._northEast,re=m.getSouthWest(),_e=m.getNorthEast();return _e.lat>=D.lat&&re.lat<=G.lat&&_e.lng>=D.lng&&re.lng<=G.lng},overlaps:function(m){m=ei(m);var D=this._southWest,G=this._northEast,re=m.getSouthWest(),_e=m.getNorthEast();return _e.lat>D.lat&&re.lat<G.lat&&_e.lng>D.lng&&re.lng<G.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(m,D){return!!m&&(m=ei(m),this._southWest.equals(m.getSouthWest(),D)&&this._northEast.equals(m.getNorthEast(),D))},isValid:function(){return!(!this._southWest||!this._northEast)}},Bi.prototype={equals:function(m,D){return!!m&&(m=on(m),Math.max(Math.abs(this.lat-m.lat),Math.abs(this.lng-m.lng))<=(void 0===D?1e-9:D))},toString:function(m){return"LatLng("+Ge(this.lat,m)+", "+Ge(this.lng,m)+")"},distanceTo:function(m){return Nn.distance(this,on(m))},wrap:function(){return Nn.wrapLatLng(this)},toBounds:function(m){var D=180*m/40075017,G=D/Math.cos(Math.PI/180*this.lat);return ei([this.lat-D,this.lng-G],[this.lat+D,this.lng+G])},clone:function(){return new Bi(this.lat,this.lng,this.alt)}};var m,Wn={latLngToPoint:function(m,D){var G=this.projection.project(m),re=this.scale(D);return this.transformation._transform(G,re)},pointToLatLng:function(m,D){var G=this.scale(D),re=this.transformation.untransform(m,G);return this.projection.unproject(re)},project:function(m){return this.projection.project(m)},unproject:function(m){return this.projection.unproject(m)},scale:function(m){return 256*Math.pow(2,m)},zoom:function(m){return Math.log(m/256)/Math.LN2},getProjectedBounds:function(m){if(this.infinite)return null;var D=this.projection.bounds,G=this.scale(m);return new xn(this.transformation.transform(D.min,G),this.transformation.transform(D.max,G))},infinite:!1,wrapLatLng:function(m){var D=this.wrapLng?De(m.lng,this.wrapLng,!0):m.lng;return new Bi(this.wrapLat?De(m.lat,this.wrapLat,!0):m.lat,D,m.alt)},wrapLatLngBounds:function(m){var D=m.getCenter(),G=this.wrapLatLng(D),re=D.lat-G.lat,_e=D.lng-G.lng;if(0===re&&0===_e)return m;var Ue=m.getSouthWest(),Vt=m.getNorthEast();return new Vn(new Bi(Ue.lat-re,Ue.lng-_e),new Bi(Vt.lat-re,Vt.lng-_e))}},Nn=pn({},Wn,{wrapLng:[-180,180],R:6371e3,distance:function(m,D){var G=Math.PI/180,re=m.lat*G,_e=D.lat*G,Ue=Math.sin((D.lat-m.lat)*G/2),Vt=Math.sin((D.lng-m.lng)*G/2),oi=Ue*Ue+Math.cos(re)*Math.cos(_e)*Vt*Vt,ki=2*Math.atan2(Math.sqrt(oi),Math.sqrt(1-oi));return this.R*ki}}),Gi={R:6378137,MAX_LATITUDE:85.0511287798,project:function(m){var D=Math.PI/180,G=this.MAX_LATITUDE,re=Math.max(Math.min(G,m.lat),-G),_e=Math.sin(re*D);return new Ci(this.R*m.lng*D,this.R*Math.log((1+_e)/(1-_e))/2)},unproject:function(m){var D=180/Math.PI;return new Bi((2*Math.atan(Math.exp(m.y/this.R))-Math.PI/2)*D,m.x*D/this.R)},bounds:(m=6378137*Math.PI,new xn([-m,-m],[m,m]))};function kr(m,D,G,re){if(wt(m))return this._a=m[0],this._b=m[1],this._c=m[2],void(this._d=m[3]);this._a=m,this._b=D,this._c=G,this._d=re}function sr(m,D,G,re){return new kr(m,D,G,re)}kr.prototype={transform:function(m,D){return this._transform(m.clone(),D)},_transform:function(m,D){return m.x=(D=D||1)*(this._a*m.x+this._b),m.y=D*(this._c*m.y+this._d),m},untransform:function(m,D){return new Ci((m.x/(D=D||1)-this._b)/this._a,(m.y/D-this._d)/this._c)}};var fr=pn({},Nn,{code:"EPSG:3857",projection:Gi,transformation:function(){var m=.5/(Math.PI*Gi.R);return sr(m,.5,-m,.5)}()}),wn=pn({},fr,{code:"EPSG:900913"});function en(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function _n(m,D){var re,_e,Ue,Vt,oi,ki,G="";for(re=0,Ue=m.length;re<Ue;re++){for(_e=0,Vt=(oi=m[re]).length;_e<Vt;_e++)G+=(_e?"L":"M")+(ki=oi[_e]).x+" "+ki.y;G+=D?Xe.svg?"z":"x":""}return G||"M0 0"}var Xi=document.documentElement.style,ji="ActiveXObject"in window,Gn=ji&&!document.addEventListener,tn="msLaunchUri"in navigator&&!("documentMode"in document),Ti=qe("webkit"),gn=qe("android"),Pn=qe("android 2")||qe("android 3"),Dr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ir=gn&&qe("Google")&&Dr<537&&!("AudioNode"in window),wr=!!window.opera,pr=!tn&&qe("chrome"),or=qe("gecko")&&!Ti&&!wr&&!ji,Tn=!pr&&qe("safari"),ur=qe("phantom"),Rr="OTransition"in Xi,ks=0===navigator.platform.indexOf("Win"),er=ji&&"transition"in Xi,gr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pn,hr="MozPerspective"in Xi,Cr=!window.L_DISABLE_3D&&(er||gr||hr)&&!Rr&&!ur,$r=typeof orientation<"u"||qe("mobile"),Ct=$r&&Ti,Ie=$r&&gr,Ne=!window.PointerEvent&&window.MSPointerEvent,ut=!(!window.PointerEvent&&!Ne),lt="ontouchstart"in window||!!window.TouchEvent,zt=!window.L_NO_TOUCH&&(lt||ut),Kt=$r&&wr,Jt=$r&&or,pt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ui=function(){var m=!1;try{var D=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("testPassiveEventSupport",Be,D),window.removeEventListener("testPassiveEventSupport",Be,D)}catch{}return m}(),Hi=!!document.createElement("canvas").getContext,Ui=!(!document.createElementNS||!en("svg").createSVGRect),di=!!Ui&&function(){var m=document.createElement("div");return m.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(m.firstChild&&m.firstChild.namespaceURI)}(),un=!Ui&&function(){try{var m=document.createElement("div");m.innerHTML='<v:shape adj="1"/>';var D=m.firstChild;return D.style.behavior="url(#default#VML)",D&&"object"==typeof D.adj}catch{return!1}}();function qe(m){return navigator.userAgent.toLowerCase().indexOf(m)>=0}var Xe={ie:ji,ielt9:Gn,edge:tn,webkit:Ti,android:gn,android23:Pn,androidStock:Ir,opera:wr,chrome:pr,gecko:or,safari:Tn,phantom:ur,opera12:Rr,win:ks,ie3d:er,webkit3d:gr,gecko3d:hr,any3d:Cr,mobile:$r,mobileWebkit:Ct,mobileWebkit3d:Ie,msPointer:Ne,pointer:ut,touch:zt,touchNative:lt,mobileOpera:Kt,mobileGecko:Jt,retina:pt,passiveEvents:ui,canvas:Hi,svg:Ui,vml:un,inlineSvg:di,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},ze=Xe.msPointer?"MSPointerDown":"pointerdown",He=Xe.msPointer?"MSPointerMove":"pointermove",ft=Xe.msPointer?"MSPointerUp":"pointerup",Yt=Xe.msPointer?"MSPointerCancel":"pointercancel",xi={touchstart:ze,touchmove:He,touchend:ft,touchcancel:Yt},pi={touchstart:function o(m,D){D.MSPOINTER_TYPE_TOUCH&&D.pointerType===D.MSPOINTER_TYPE_TOUCH&&Zr(D),le(m,D)},touchmove:le,touchend:le,touchcancel:le},Pi={},rt=!1;function yt(m,D,G){return"touchstart"===D&&function Lt(){rt||(document.addEventListener(ze,it,!0),document.addEventListener(He,Tt,!0),document.addEventListener(ft,Pe,!0),document.addEventListener(Yt,Pe,!0),rt=!0)}(),pi[D]?(G=pi[D].bind(this,G),m.addEventListener(xi[D],G,!1),G):(console.warn("wrong event specified:",D),Be)}function it(m){Pi[m.pointerId]=m}function Tt(m){Pi[m.pointerId]&&(Pi[m.pointerId]=m)}function Pe(m){delete Pi[m.pointerId]}function le(m,D){if(D.pointerType!==(D.MSPOINTER_TYPE_MOUSE||"mouse")){for(var G in D.touches=[],Pi)D.touches.push(Pi[G]);D.changedTouches=[D],m(D)}}var h=200;var ii,wi,Mi,Jn,ar,x=Le(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),M=Le(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),I="webkitTransition"===M||"OTransition"===M?M+"End":"transitionend";function F(m){return"string"==typeof m?document.getElementById(m):m}function U(m,D){var G=m.style[D]||m.currentStyle&&m.currentStyle[D];if((!G||"auto"===G)&&document.defaultView){var re=document.defaultView.getComputedStyle(m,null);G=re?re[D]:null}return"auto"===G?null:G}function $(m,D,G){var re=document.createElement(m);return re.className=D||"",G&&G.appendChild(re),re}function q(m){var D=m.parentNode;D&&D.removeChild(m)}function ne(m){for(;m.firstChild;)m.removeChild(m.firstChild)}function de(m){var D=m.parentNode;D&&D.lastChild!==m&&D.appendChild(m)}function ge(m){var D=m.parentNode;D&&D.firstChild!==m&&D.insertBefore(m,D.firstChild)}function we(m,D){if(void 0!==m.classList)return m.classList.contains(D);var G=Q(m);return G.length>0&&new RegExp("(^|\\s)"+D+"(\\s|$)").test(G)}function me(m,D){if(void 0!==m.classList)for(var G=nt(D),re=0,_e=G.length;re<_e;re++)m.classList.add(G[re]);else if(!we(m,D)){var Ue=Q(m);N(m,(Ue?Ue+" ":"")+D)}}function Se(m,D){void 0!==m.classList?m.classList.remove(D):N(m,Je((" "+Q(m)+" ").replace(" "+D+" "," ")))}function N(m,D){void 0===m.className.baseVal?m.className=D:m.className.baseVal=D}function Q(m){return m.correspondingElement&&(m=m.correspondingElement),void 0===m.className.baseVal?m.className:m.className.baseVal}function pe(m,D){"opacity"in m.style?m.style.opacity=D:"filter"in m.style&&function xe(m,D){var G=!1,re="DXImageTransform.Microsoft.Alpha";try{G=m.filters.item(re)}catch{if(1===D)return}D=Math.round(100*D),G?(G.Enabled=100!==D,G.Opacity=D):m.style.filter+=" progid:"+re+"(opacity="+D+")"}(m,D)}function Le(m){for(var D=document.documentElement.style,G=0;G<m.length;G++)if(m[G]in D)return m[G];return!1}function Ze(m,D,G){var re=D||new Ci(0,0);m.style[x]=(Xe.ie3d?"translate("+re.x+"px,"+re.y+"px)":"translate3d("+re.x+"px,"+re.y+"px,0)")+(G?" scale("+G+")":"")}function kt(m,D){m._leaflet_pos=D,Xe.any3d?Ze(m,D):(m.style.left=D.x+"px",m.style.top=D.y+"px")}function It(m){return m._leaflet_pos||new Ci(0,0)}if("onselectstart"in document)ii=function(){qn(window,"selectstart",Zr)},wi=function(){$n(window,"selectstart",Zr)};else{var dn=Le(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ii=function(){if(dn){var m=document.documentElement.style;Mi=m[dn],m[dn]="none"}},wi=function(){dn&&(document.documentElement.style[dn]=Mi,Mi=void 0)}}function En(){qn(window,"dragstart",Zr)}function Fn(){$n(window,"dragstart",Zr)}function lr(m){for(;-1===m.tabIndex;)m=m.parentNode;m.style&&(Lr(),Jn=m,ar=m.style.outlineStyle,m.style.outlineStyle="none",qn(window,"keydown",Lr))}function Lr(){Jn&&(Jn.style.outlineStyle=ar,Jn=void 0,ar=void 0,$n(window,"keydown",Lr))}function Hr(m){do{m=m.parentNode}while(!(m.offsetWidth&&m.offsetHeight||m===document.body));return m}function Wr(m){var D=m.getBoundingClientRect();return{x:D.width/m.offsetWidth||1,y:D.height/m.offsetHeight||1,boundingClientRect:D}}var Mr={__proto__:null,TRANSFORM:x,TRANSITION:M,TRANSITION_END:I,get:F,getStyle:U,create:$,remove:q,empty:ne,toFront:de,toBack:ge,hasClass:we,addClass:me,removeClass:Se,setClass:N,getClass:Q,setOpacity:pe,testProp:Le,setTransform:Ze,setPosition:kt,getPosition:It,get disableTextSelection(){return ii},get enableTextSelection(){return wi},disableImageDrag:En,enableImageDrag:Fn,preventOutline:lr,restoreOutline:Lr,getSizedParentNode:Hr,getScale:Wr};function qn(m,D,G,re){if(D&&"object"==typeof D)for(var _e in D)ba(m,_e,D[_e],G);else for(var Ue=0,Vt=(D=nt(D)).length;Ue<Vt;Ue++)ba(m,D[Ue],G,re);return this}var as="_leaflet_events";function $n(m,D,G,re){if(1===arguments.length)Xr(m),delete m[as];else if(D&&"object"==typeof D)for(var _e in D)hs(m,_e,D[_e],G);else if(D=nt(D),2===arguments.length)Xr(m,function(oi){return-1!==ai(D,oi)});else for(var Ue=0,Vt=D.length;Ue<Vt;Ue++)hs(m,D[Ue],G,re);return this}function Xr(m,D){for(var G in m[as]){var re=G.split(/\d/)[0];(!D||D(re))&&hs(m,re,null,null,G)}}var ul={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ba(m,D,G,re){var _e=D+Oe(G)+(re?"_"+Oe(re):"");if(m[as]&&m[as][_e])return this;var Ue=function(oi){return G.call(re||m,oi||window.event)},Vt=Ue;!Xe.touchNative&&Xe.pointer&&0===D.indexOf("touch")?Ue=yt(m,D,Ue):Xe.touch&&"dblclick"===D?Ue=function _(m,D){m.addEventListener("dblclick",D);var re,G=0;function _e(Ue){if(1===Ue.detail){if("mouse"!==Ue.pointerType&&(!Ue.sourceCapabilities||Ue.sourceCapabilities.firesTouchEvents)){var Vt=dl(Ue);if(!Vt.some(function(ki){return ki instanceof HTMLLabelElement&&ki.attributes.for})||Vt.some(function(ki){return ki instanceof HTMLInputElement||ki instanceof HTMLSelectElement})){var oi=Date.now();oi-G<=h?2==++re&&D(function c(m){var G,re,D={};for(re in m)D[re]=(G=m[re])&&G.bind?G.bind(m):G;return m=D,D.type="dblclick",D.detail=2,D.isTrusted=!1,D._simulated=!0,D}(Ue)):re=1,G=oi}}}else re=Ue.detail}return m.addEventListener("click",_e),{dblclick:D,simDblclick:_e}}(m,Ue):"addEventListener"in m?"touchstart"===D||"touchmove"===D||"wheel"===D||"mousewheel"===D?m.addEventListener(ul[D]||D,Ue,!!Xe.passiveEvents&&{passive:!1}):"mouseenter"===D||"mouseleave"===D?m.addEventListener(ul[D],Ue=function(oi){oi=oi||window.event,_c(m,oi)&&Vt(oi)},!1):m.addEventListener(D,Vt,!1):m.attachEvent("on"+D,Ue),m[as]=m[as]||{},m[as][_e]=Ue}function hs(m,D,G,re,_e){_e=_e||D+Oe(G)+(re?"_"+Oe(re):"");var Ue=m[as]&&m[as][_e];if(!Ue)return this;!Xe.touchNative&&Xe.pointer&&0===D.indexOf("touch")?function fe(m,D,G){xi[D]?m.removeEventListener(xi[D],G,!1):console.warn("wrong event specified:",D)}(m,D,Ue):Xe.touch&&"dblclick"===D?function b(m,D){m.removeEventListener("dblclick",D.dblclick),m.removeEventListener("click",D.simDblclick)}(m,Ue):"removeEventListener"in m?m.removeEventListener(ul[D]||D,Ue,!1):m.detachEvent("on"+D,Ue),m[as][_e]=null}function Yo(m){return m.stopPropagation?m.stopPropagation():m.originalEvent?m.originalEvent._stopped=!0:m.cancelBubble=!0,this}function rc(m){return ba(m,"wheel",Yo),this}function Io(m){return qn(m,"mousedown touchstart dblclick contextmenu",Yo),m._leaflet_disable_click=!0,this}function Zr(m){return m.preventDefault?m.preventDefault():m.returnValue=!1,this}function ao(m){return Zr(m),Yo(m),this}function dl(m){if(m.composedPath)return m.composedPath();for(var D=[],G=m.target;G;)D.push(G),G=G.parentNode;return D}function Oa(m,D){if(!D)return new Ci(m.clientX,m.clientY);var G=Wr(D),re=G.boundingClientRect;return new Ci((m.clientX-re.left)/G.x-D.clientLeft,(m.clientY-re.top)/G.y-D.clientTop)}var ia=Xe.linux&&Xe.chrome?window.devicePixelRatio:Xe.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ml(m){return Xe.edge?m.wheelDeltaY/2:m.deltaY&&0===m.deltaMode?-m.deltaY/ia:m.deltaY&&1===m.deltaMode?20*-m.deltaY:m.deltaY&&2===m.deltaMode?60*-m.deltaY:m.deltaX||m.deltaZ?0:m.wheelDelta?(m.wheelDeltaY||m.wheelDelta)/2:m.detail&&Math.abs(m.detail)<32765?20*-m.detail:m.detail?m.detail/-32765*60:0}function _c(m,D){var G=D.relatedTarget;if(!G)return!0;try{for(;G&&G!==m;)G=G.parentNode}catch{return!1}return G!==m}var gu={__proto__:null,on:qn,off:$n,stopPropagation:Yo,disableScrollPropagation:rc,disableClickPropagation:Io,preventDefault:Zr,stop:ao,getPropagationPath:dl,getMousePosition:Oa,getWheelDelta:Ml,isExternalTarget:_c,addListener:qn,removeListener:$n},Al=_i.extend({run:function(m,D,G,re){this.stop(),this._el=m,this._inProgress=!0,this._duration=G||.25,this._easeOutPower=1/Math.max(re||.5,.2),this._startPos=It(m),this._offset=D.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=jt(this._animate,this),this._step()},_step:function(m){var D=+new Date-this._startTime,G=1e3*this._duration;D<G?this._runFrame(this._easeOut(D/G),m):(this._runFrame(1),this._complete())},_runFrame:function(m,D){var G=this._startPos.add(this._offset.multiplyBy(m));D&&G._round(),kt(this._el,G),this.fire("step")},_complete:function(){ht(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(m){return 1-Math.pow(1-m,this._easeOutPower)}}),vr=_i.extend({options:{crs:fr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(m,D){D=mt(this,D),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(m),this._initLayout(),this._onResize=t(this._onResize,this),this._initEvents(),D.maxBounds&&this.setMaxBounds(D.maxBounds),void 0!==D.zoom&&(this._zoom=this._limitZoom(D.zoom)),D.center&&void 0!==D.zoom&&this.setView(on(D.center),D.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=M&&Xe.any3d&&!Xe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),qn(this._proxy,I,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(m,D,G){return D=void 0===D?this._zoom:this._limitZoom(D),m=this._limitCenter(on(m),D,this.options.maxBounds),G=G||{},this._stop(),this._loaded&&!G.reset&&!0!==G&&(void 0!==G.animate&&(G.zoom=pn({animate:G.animate},G.zoom),G.pan=pn({animate:G.animate,duration:G.duration},G.pan)),this._zoom!==D?this._tryAnimatedZoom&&this._tryAnimatedZoom(m,D,G.zoom):this._tryAnimatedPan(m,G.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(m,D,G.pan&&G.pan.noMoveStart),this)},setZoom:function(m,D){return this._loaded?this.setView(this.getCenter(),m,{zoom:D}):(this._zoom=m,this)},zoomIn:function(m,D){return this.setZoom(this._zoom+(m=m||(Xe.any3d?this.options.zoomDelta:1)),D)},zoomOut:function(m,D){return this.setZoom(this._zoom-(m=m||(Xe.any3d?this.options.zoomDelta:1)),D)},setZoomAround:function(m,D,G){var re=this.getZoomScale(D),_e=this.getSize().divideBy(2),Vt=(m instanceof Ci?m:this.latLngToContainerPoint(m)).subtract(_e).multiplyBy(1-1/re),oi=this.containerPointToLatLng(_e.add(Vt));return this.setView(oi,D,{zoom:G})},_getBoundsCenterZoom:function(m,D){D=D||{},m=m.getBounds?m.getBounds():ei(m);var G=qi(D.paddingTopLeft||D.padding||[0,0]),re=qi(D.paddingBottomRight||D.padding||[0,0]),_e=this.getBoundsZoom(m,!1,G.add(re));if((_e="number"==typeof D.maxZoom?Math.min(D.maxZoom,_e):_e)===1/0)return{center:m.getCenter(),zoom:_e};var Ue=re.subtract(G).divideBy(2),Vt=this.project(m.getSouthWest(),_e),oi=this.project(m.getNorthEast(),_e);return{center:this.unproject(Vt.add(oi).divideBy(2).add(Ue),_e),zoom:_e}},fitBounds:function(m,D){if(!(m=ei(m)).isValid())throw new Error("Bounds are not valid.");var G=this._getBoundsCenterZoom(m,D);return this.setView(G.center,G.zoom,D)},fitWorld:function(m){return this.fitBounds([[-90,-180],[90,180]],m)},panTo:function(m,D){return this.setView(m,this._zoom,{pan:D})},panBy:function(m,D){if(D=D||{},!(m=qi(m).round()).x&&!m.y)return this.fire("moveend");if(!0!==D.animate&&!this.getSize().contains(m))return this._resetView(this.unproject(this.project(this.getCenter()).add(m)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Al,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),D.noMoveStart||this.fire("movestart"),!1!==D.animate){me(this._mapPane,"leaflet-pan-anim");var G=this._getMapPanePos().subtract(m).round();this._panAnim.run(this._mapPane,G,D.duration||.25,D.easeLinearity)}else this._rawPanBy(m),this.fire("move").fire("moveend");return this},flyTo:function(m,D,G){if(!1===(G=G||{}).animate||!Xe.any3d)return this.setView(m,D,G);this._stop();var re=this.project(this.getCenter()),_e=this.project(m),Ue=this.getSize(),Vt=this._zoom;m=on(m),D=void 0===D?Vt:D;var oi=Math.max(Ue.x,Ue.y),ki=oi*this.getZoomScale(Vt,D),sn=_e.distanceTo(re)||1,Dn=1.42,Bn=Dn*Dn;function mr(Ee){var Ri=(ki*ki-oi*oi+(Ee?-1:1)*Bn*Bn*sn*sn)/(2*(Ee?ki:oi)*Bn*sn),In=Math.sqrt(Ri*Ri+1)-Ri;return In<1e-9?-18:Math.log(In)}function Br(Ee){return(Math.exp(Ee)-Math.exp(-Ee))/2}function Ys(Ee){return(Math.exp(Ee)+Math.exp(-Ee))/2}var $s=mr(0);function Ha(Ee){return oi*(Ys($s)*function io(Ee){return Br(Ee)/Ys(Ee)}($s+Dn*Ee)-Br($s))/Bn}var kc=Date.now(),Bl=(mr(1)-$s)/Dn,Zo=G.duration?1e3*G.duration:1e3*Bl*.8;return this._moveStart(!0,G.noMoveStart),function Nl(){var Ee=(Date.now()-kc)/Zo,J=function po(Ee){return 1-Math.pow(1-Ee,1.5)}(Ee)*Bl;Ee<=1?(this._flyToFrame=jt(Nl,this),this._move(this.unproject(re.add(_e.subtract(re).multiplyBy(Ha(J)/sn)),Vt),this.getScaleZoom(oi/function Ta(Ee){return oi*(Ys($s)/Ys($s+Dn*Ee))}(J),Vt),{flyTo:!0})):this._move(m,D)._moveEnd(!0)}.call(this),this},flyToBounds:function(m,D){var G=this._getBoundsCenterZoom(m,D);return this.flyTo(G.center,G.zoom,D)},setMaxBounds:function(m){return m=ei(m),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),m.isValid()?(this.options.maxBounds=m,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(m){var D=this.options.minZoom;return this.options.minZoom=m,this._loaded&&D!==m&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(m):this},setMaxZoom:function(m){var D=this.options.maxZoom;return this.options.maxZoom=m,this._loaded&&D!==m&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(m):this},panInsideBounds:function(m,D){this._enforcingBounds=!0;var G=this.getCenter(),re=this._limitCenter(G,this._zoom,ei(m));return G.equals(re)||this.panTo(re,D),this._enforcingBounds=!1,this},panInside:function(m,D){var G=qi((D=D||{}).paddingTopLeft||D.padding||[0,0]),re=qi(D.paddingBottomRight||D.padding||[0,0]),_e=this.project(this.getCenter()),Ue=this.project(m),Vt=this.getPixelBounds(),oi=mn([Vt.min.add(G),Vt.max.subtract(re)]),ki=oi.getSize();if(!oi.contains(Ue)){this._enforcingBounds=!0;var sn=Ue.subtract(oi.getCenter()),Dn=oi.extend(Ue).getSize().subtract(ki);_e.x+=sn.x<0?-Dn.x:Dn.x,_e.y+=sn.y<0?-Dn.y:Dn.y,this.panTo(this.unproject(_e),D),this._enforcingBounds=!1}return this},invalidateSize:function(m){if(!this._loaded)return this;m=pn({animate:!1,pan:!0},!0===m?{animate:!0}:m);var D=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var G=this.getSize(),re=D.divideBy(2).round(),_e=G.divideBy(2).round(),Ue=re.subtract(_e);return Ue.x||Ue.y?(m.animate&&m.pan?this.panBy(Ue):(m.pan&&this._rawPanBy(Ue),this.fire("move"),m.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(t(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:D,newSize:G})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(m){if(m=this._locateOptions=pn({timeout:1e4,watch:!1},m),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var D=t(this._handleGeolocationResponse,this),G=t(this._handleGeolocationError,this);return m.watch?this._locationWatchId=navigator.geolocation.watchPosition(D,G,m):navigator.geolocation.getCurrentPosition(D,G,m),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(m){if(this._container._leaflet_id){var D=m.code,G=m.message||(1===D?"permission denied":2===D?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:D,message:"Geolocation error: "+G+"."})}},_handleGeolocationResponse:function(m){if(this._container._leaflet_id){var re=new Bi(m.coords.latitude,m.coords.longitude),_e=re.toBounds(2*m.coords.accuracy),Ue=this._locateOptions;if(Ue.setView){var Vt=this.getBoundsZoom(_e);this.setView(re,Ue.maxZoom?Math.min(Vt,Ue.maxZoom):Vt)}var oi={latlng:re,bounds:_e,timestamp:m.timestamp};for(var ki in m.coords)"number"==typeof m.coords[ki]&&(oi[ki]=m.coords[ki]);this.fire("locationfound",oi)}},addHandler:function(m,D){if(!D)return this;var G=this[m]=new D(this);return this._handlers.push(G),this.options[m]&&G.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var m;for(m in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ht(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[m].remove();for(m in this._panes)q(this._panes[m]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(m,D){var re=$("div","leaflet-pane"+(m?" leaflet-"+m.replace("Pane","")+"-pane":""),D||this._mapPane);return m&&(this._panes[m]=re),re},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var m=this.getPixelBounds();return new Vn(this.unproject(m.getBottomLeft()),this.unproject(m.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(m,D,G){m=ei(m),G=qi(G||[0,0]);var re=this.getZoom()||0,_e=this.getMinZoom(),Ue=this.getMaxZoom(),Vt=m.getNorthWest(),oi=m.getSouthEast(),ki=this.getSize().subtract(G),sn=mn(this.project(oi,re),this.project(Vt,re)).getSize(),Dn=Xe.any3d?this.options.zoomSnap:1,Bn=ki.x/sn.x,mr=ki.y/sn.y,Br=D?Math.max(Bn,mr):Math.min(Bn,mr);return re=this.getScaleZoom(Br,re),Dn&&(re=Math.round(re/(Dn/100))*(Dn/100),re=D?Math.ceil(re/Dn)*Dn:Math.floor(re/Dn)*Dn),Math.max(_e,Math.min(Ue,re))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ci(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(m,D){var G=this._getTopLeftPoint(m,D);return new xn(G,G.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(m){return this.options.crs.getProjectedBounds(void 0===m?this.getZoom():m)},getPane:function(m){return"string"==typeof m?this._panes[m]:m},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(m,D){var G=this.options.crs;return D=void 0===D?this._zoom:D,G.scale(m)/G.scale(D)},getScaleZoom:function(m,D){var G=this.options.crs,re=G.zoom(m*G.scale(D=void 0===D?this._zoom:D));return isNaN(re)?1/0:re},project:function(m,D){return D=void 0===D?this._zoom:D,this.options.crs.latLngToPoint(on(m),D)},unproject:function(m,D){return D=void 0===D?this._zoom:D,this.options.crs.pointToLatLng(qi(m),D)},layerPointToLatLng:function(m){var D=qi(m).add(this.getPixelOrigin());return this.unproject(D)},latLngToLayerPoint:function(m){return this.project(on(m))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(m){return this.options.crs.wrapLatLng(on(m))},wrapLatLngBounds:function(m){return this.options.crs.wrapLatLngBounds(ei(m))},distance:function(m,D){return this.options.crs.distance(on(m),on(D))},containerPointToLayerPoint:function(m){return qi(m).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(m){return qi(m).add(this._getMapPanePos())},containerPointToLatLng:function(m){var D=this.containerPointToLayerPoint(qi(m));return this.layerPointToLatLng(D)},latLngToContainerPoint:function(m){return this.layerPointToContainerPoint(this.latLngToLayerPoint(on(m)))},mouseEventToContainerPoint:function(m){return Oa(m,this._container)},mouseEventToLayerPoint:function(m){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(m))},mouseEventToLatLng:function(m){return this.layerPointToLatLng(this.mouseEventToLayerPoint(m))},_initContainer:function(m){var D=this._container=F(m);if(!D)throw new Error("Map container not found.");if(D._leaflet_id)throw new Error("Map container is already initialized.");qn(D,"scroll",this._onScroll,this),this._containerId=Oe(D)},_initLayout:function(){var m=this._container;this._fadeAnimated=this.options.fadeAnimation&&Xe.any3d,me(m,"leaflet-container"+(Xe.touch?" leaflet-touch":"")+(Xe.retina?" leaflet-retina":"")+(Xe.ielt9?" leaflet-oldie":"")+(Xe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var D=U(m,"position");"absolute"!==D&&"relative"!==D&&"fixed"!==D&&"sticky"!==D&&(m.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var m=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kt(this._mapPane,new Ci(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(m.markerPane,"leaflet-zoom-hide"),me(m.shadowPane,"leaflet-zoom-hide"))},_resetView:function(m,D,G){kt(this._mapPane,new Ci(0,0));var re=!this._loaded;this._loaded=!0,D=this._limitZoom(D),this.fire("viewprereset");var _e=this._zoom!==D;this._moveStart(_e,G)._move(m,D)._moveEnd(_e),this.fire("viewreset"),re&&this.fire("load")},_moveStart:function(m,D){return m&&this.fire("zoomstart"),D||this.fire("movestart"),this},_move:function(m,D,G,re){void 0===D&&(D=this._zoom);var _e=this._zoom!==D;return this._zoom=D,this._lastCenter=m,this._pixelOrigin=this._getNewPixelOrigin(m),re?G&&G.pinch&&this.fire("zoom",G):((_e||G&&G.pinch)&&this.fire("zoom",G),this.fire("move",G)),this},_moveEnd:function(m){return m&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ht(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(m){kt(this._mapPane,this._getMapPanePos().subtract(m))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(m){this._targets={},this._targets[Oe(this._container)]=this;var D=m?$n:qn;D(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&D(window,"resize",this._onResize,this),Xe.any3d&&this.options.transform3DLimit&&(m?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ht(this._resizeRequest),this._resizeRequest=jt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var m=this._getMapPanePos();Math.max(Math.abs(m.x),Math.abs(m.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(m,D){for(var re,G=[],_e="mouseout"===D||"mouseover"===D,Ue=m.target||m.srcElement,Vt=!1;Ue;){if((re=this._targets[Oe(Ue)])&&("click"===D||"preclick"===D)&&this._draggableMoved(re)){Vt=!0;break}if(re&&re.listens(D,!0)&&(_e&&!_c(Ue,m)||(G.push(re),_e))||Ue===this._container)break;Ue=Ue.parentNode}return!G.length&&!Vt&&!_e&&this.listens(D,!0)&&(G=[this]),G},_isClickDisabled:function(m){for(;m&&m!==this._container;){if(m._leaflet_disable_click)return!0;m=m.parentNode}},_handleDOMEvent:function(m){var D=m.target||m.srcElement;if(!(!this._loaded||D._leaflet_disable_events||"click"===m.type&&this._isClickDisabled(D))){var G=m.type;"mousedown"===G&&lr(D),this._fireDOMEvent(m,G)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(m,D,G){if("click"===m.type){var re=pn({},m);re.type="preclick",this._fireDOMEvent(re,re.type,G)}var _e=this._findEventTargets(m,D);if(G){for(var Ue=[],Vt=0;Vt<G.length;Vt++)G[Vt].listens(D,!0)&&Ue.push(G[Vt]);_e=Ue.concat(_e)}if(_e.length){"contextmenu"===D&&Zr(m);var oi=_e[0],ki={originalEvent:m};if("keypress"!==m.type&&"keydown"!==m.type&&"keyup"!==m.type){var sn=oi.getLatLng&&(!oi._radius||oi._radius<=10);ki.containerPoint=sn?this.latLngToContainerPoint(oi.getLatLng()):this.mouseEventToContainerPoint(m),ki.layerPoint=this.containerPointToLayerPoint(ki.containerPoint),ki.latlng=sn?oi.getLatLng():this.layerPointToLatLng(ki.layerPoint)}for(Vt=0;Vt<_e.length;Vt++)if(_e[Vt].fire(D,ki,!0),ki.originalEvent._stopped||!1===_e[Vt].options.bubblingMouseEvents&&-1!==ai(this._mouseEvents,D))return}},_draggableMoved:function(m){return(m=m.dragging&&m.dragging.enabled()?m:this).dragging&&m.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var m=0,D=this._handlers.length;m<D;m++)this._handlers[m].disable()},whenReady:function(m,D){return this._loaded?m.call(D||this,{target:this}):this.on("load",m,D),this},_getMapPanePos:function(){return It(this._mapPane)||new Ci(0,0)},_moved:function(){var m=this._getMapPanePos();return m&&!m.equals([0,0])},_getTopLeftPoint:function(m,D){return(m&&void 0!==D?this._getNewPixelOrigin(m,D):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(m,D){var G=this.getSize()._divideBy(2);return this.project(m,D)._subtract(G)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(m,D,G){var re=this._getNewPixelOrigin(G,D);return this.project(m,D)._subtract(re)},_latLngBoundsToNewLayerBounds:function(m,D,G){var re=this._getNewPixelOrigin(G,D);return mn([this.project(m.getSouthWest(),D)._subtract(re),this.project(m.getNorthWest(),D)._subtract(re),this.project(m.getSouthEast(),D)._subtract(re),this.project(m.getNorthEast(),D)._subtract(re)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(m){return this.latLngToLayerPoint(m).subtract(this._getCenterLayerPoint())},_limitCenter:function(m,D,G){if(!G)return m;var re=this.project(m,D),_e=this.getSize().divideBy(2),Ue=new xn(re.subtract(_e),re.add(_e)),Vt=this._getBoundsOffset(Ue,G,D);return Math.abs(Vt.x)<=1&&Math.abs(Vt.y)<=1?m:this.unproject(re.add(Vt),D)},_limitOffset:function(m,D){if(!D)return m;var G=this.getPixelBounds(),re=new xn(G.min.add(m),G.max.add(m));return m.add(this._getBoundsOffset(re,D))},_getBoundsOffset:function(m,D,G){var re=mn(this.project(D.getNorthEast(),G),this.project(D.getSouthWest(),G)),_e=re.min.subtract(m.min),Ue=re.max.subtract(m.max);return new Ci(this._rebound(_e.x,-Ue.x),this._rebound(_e.y,-Ue.y))},_rebound:function(m,D){return m+D>0?Math.round(m-D)/2:Math.max(0,Math.ceil(m))-Math.max(0,Math.floor(D))},_limitZoom:function(m){var D=this.getMinZoom(),G=this.getMaxZoom(),re=Xe.any3d?this.options.zoomSnap:1;return re&&(m=Math.round(m/re)*re),Math.max(D,Math.min(G,m))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(m,D){var G=this._getCenterOffset(m)._trunc();return!(!0!==(D&&D.animate)&&!this.getSize().contains(G)||(this.panBy(G,D),0))},_createAnimProxy:function(){var m=this._proxy=$("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(m),this.on("zoomanim",function(D){var G=x,re=this._proxy.style[G];Ze(this._proxy,this.project(D.center,D.zoom),this.getZoomScale(D.zoom,1)),re===this._proxy.style[G]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){q(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var m=this.getCenter(),D=this.getZoom();Ze(this._proxy,this.project(m,D),this.getZoomScale(D,1))},_catchTransitionEnd:function(m){this._animatingZoom&&m.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(m,D,G){if(this._animatingZoom)return!0;if(G=G||{},!this._zoomAnimated||!1===G.animate||this._nothingToAnimate()||Math.abs(D-this._zoom)>this.options.zoomAnimationThreshold)return!1;var re=this.getZoomScale(D),_e=this._getCenterOffset(m)._divideBy(1-1/re);return!(!0!==G.animate&&!this.getSize().contains(_e)||(jt(function(){this._moveStart(!0,G.noMoveStart||!1)._animateZoom(m,D,!0)},this),0))},_animateZoom:function(m,D,G,re){this._mapPane&&(G&&(this._animatingZoom=!0,this._animateToCenter=m,this._animateToZoom=D,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:m,zoom:D,noUpdate:re}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(t(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Ks=ri.extend({options:{position:"topright"},initialize:function(m){mt(this,m)},getPosition:function(){return this.options.position},setPosition:function(m){var D=this._map;return D&&D.removeControl(this),this.options.position=m,D&&D.addControl(this),this},getContainer:function(){return this._container},addTo:function(m){this.remove(),this._map=m;var D=this._container=this.onAdd(m),G=this.getPosition(),re=m._controlCorners[G];return me(D,"leaflet-control"),-1!==G.indexOf("bottom")?re.insertBefore(D,re.firstChild):re.appendChild(D),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(q(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(m){this._map&&m&&m.screenX>0&&m.screenY>0&&this._map.getContainer().focus()}}),js=function(m){return new Ks(m)};vr.include({addControl:function(m){return m.addTo(this),this},removeControl:function(m){return m.remove(),this},_initControlPos:function(){var m=this._controlCorners={},D="leaflet-",G=this._controlContainer=$("div",D+"control-container",this._container);function re(_e,Ue){m[_e+Ue]=$("div",D+_e+" "+D+Ue,G)}re("top","left"),re("top","right"),re("bottom","left"),re("bottom","right")},_clearControlPos:function(){for(var m in this._controlCorners)q(this._controlCorners[m]);q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sc=Ks.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(m,D,G,re){return G<re?-1:re<G?1:0}},initialize:function(m,D,G){for(var re in mt(this,G),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,m)this._addLayer(m[re],re);for(re in D)this._addLayer(D[re],re,!0)},onAdd:function(m){this._initLayout(),this._update(),this._map=m,m.on("zoomend",this._checkDisabledLayers,this);for(var D=0;D<this._layers.length;D++)this._layers[D].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(m){return Ks.prototype.addTo.call(this,m),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(m,D){return this._addLayer(m,D),this._map?this._update():this},addOverlay:function(m,D){return this._addLayer(m,D,!0),this._map?this._update():this},removeLayer:function(m){m.off("add remove",this._onLayerChange,this);var D=this._getLayer(Oe(m));return D&&this._layers.splice(this._layers.indexOf(D),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var m=this._map.getSize().y-(this._container.offsetTop+50);return m<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=m+"px"):Se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var m="leaflet-control-layers",D=this._container=$("div",m),G=this.options.collapsed;D.setAttribute("aria-haspopup",!0),Io(D),rc(D);var re=this._section=$("section",m+"-list");G&&(this._map.on("click",this.collapse,this),qn(D,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _e=this._layersLink=$("a",m+"-toggle",D);_e.href="#",_e.title="Layers",_e.setAttribute("role","button"),qn(_e,{keydown:function(Ue){13===Ue.keyCode&&this._expandSafely()},click:function(Ue){Zr(Ue),this._expandSafely()}},this),G||this.expand(),this._baseLayersList=$("div",m+"-base",re),this._separator=$("div",m+"-separator",re),this._overlaysList=$("div",m+"-overlays",re),D.appendChild(re)},_getLayer:function(m){for(var D=0;D<this._layers.length;D++)if(this._layers[D]&&Oe(this._layers[D].layer)===m)return this._layers[D]},_addLayer:function(m,D,G){this._map&&m.on("add remove",this._onLayerChange,this),this._layers.push({layer:m,name:D,overlay:G}),this.options.sortLayers&&this._layers.sort(t(function(re,_e){return this.options.sortFunction(re.layer,_e.layer,re.name,_e.name)},this)),this.options.autoZIndex&&m.setZIndex&&(this._lastZIndex++,m.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ne(this._baseLayersList),ne(this._overlaysList),this._layerControlInputs=[];var m,D,G,re,_e=0;for(G=0;G<this._layers.length;G++)this._addItem(re=this._layers[G]),D=D||re.overlay,m=m||!re.overlay,_e+=re.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(m=m&&_e>1)?"":"none"),this._separator.style.display=D&&m?"":"none",this},_onLayerChange:function(m){this._handlingClick||this._update();var D=this._getLayer(Oe(m.target)),G=D.overlay?"add"===m.type?"overlayadd":"overlayremove":"add"===m.type?"baselayerchange":null;G&&this._map.fire(G,D)},_createRadioElement:function(m,D){var G='<input type="radio" class="leaflet-control-layers-selector" name="'+m+'"'+(D?' checked="checked"':"")+"/>",re=document.createElement("div");return re.innerHTML=G,re.firstChild},_addItem:function(m){var re,D=document.createElement("label"),G=this._map.hasLayer(m.layer);m.overlay?((re=document.createElement("input")).type="checkbox",re.className="leaflet-control-layers-selector",re.defaultChecked=G):re=this._createRadioElement("leaflet-base-layers_"+Oe(this),G),this._layerControlInputs.push(re),re.layerId=Oe(m.layer),qn(re,"click",this._onInputClick,this);var _e=document.createElement("span");_e.innerHTML=" "+m.name;var Ue=document.createElement("span");return D.appendChild(Ue),Ue.appendChild(re),Ue.appendChild(_e),(m.overlay?this._overlaysList:this._baseLayersList).appendChild(D),this._checkDisabledLayers(),D},_onInputClick:function(){if(!this._preventClick){var D,G,m=this._layerControlInputs,re=[],_e=[];this._handlingClick=!0;for(var Ue=m.length-1;Ue>=0;Ue--)G=this._getLayer((D=m[Ue]).layerId).layer,D.checked?re.push(G):D.checked||_e.push(G);for(Ue=0;Ue<_e.length;Ue++)this._map.hasLayer(_e[Ue])&&this._map.removeLayer(_e[Ue]);for(Ue=0;Ue<re.length;Ue++)this._map.hasLayer(re[Ue])||this._map.addLayer(re[Ue]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var D,G,m=this._layerControlInputs,re=this._map.getZoom(),_e=m.length-1;_e>=0;_e--)G=this._getLayer((D=m[_e]).layerId).layer,D.disabled=void 0!==G.options.minZoom&&re<G.options.minZoom||void 0!==G.options.maxZoom&&re>G.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var m=this._section;this._preventClick=!0,qn(m,"click",Zr),this.expand();var D=this;setTimeout(function(){$n(m,"click",Zr),D._preventClick=!1})}}),hl=Ks.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(m){var D="leaflet-control-zoom",G=$("div",D+" leaflet-bar"),re=this.options;return this._zoomInButton=this._createButton(re.zoomInText,re.zoomInTitle,D+"-in",G,this._zoomIn),this._zoomOutButton=this._createButton(re.zoomOutText,re.zoomOutTitle,D+"-out",G,this._zoomOut),this._updateDisabled(),m.on("zoomend zoomlevelschange",this._updateDisabled,this),G},onRemove:function(m){m.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(m){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(m.shiftKey?3:1))},_zoomOut:function(m){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(m.shiftKey?3:1))},_createButton:function(m,D,G,re,_e){var Ue=$("a",G,re);return Ue.innerHTML=m,Ue.href="#",Ue.title=D,Ue.setAttribute("role","button"),Ue.setAttribute("aria-label",D),Io(Ue),qn(Ue,"click",ao),qn(Ue,"click",_e,this),qn(Ue,"click",this._refocusOnMap,this),Ue},_updateDisabled:function(){var m=this._map,D="leaflet-disabled";Se(this._zoomInButton,D),Se(this._zoomOutButton,D),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||m._zoom===m.getMinZoom())&&(me(this._zoomOutButton,D),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||m._zoom===m.getMaxZoom())&&(me(this._zoomInButton,D),this._zoomInButton.setAttribute("aria-disabled","true"))}});vr.mergeOptions({zoomControl:!0}),vr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hl,this.addControl(this.zoomControl))});var $a=Ks.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(m){var D="leaflet-control-scale",G=$("div",D),re=this.options;return this._addScales(re,D+"-line",G),m.on(re.updateWhenIdle?"moveend":"move",this._update,this),m.whenReady(this._update,this),G},onRemove:function(m){m.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(m,D,G){m.metric&&(this._mScale=$("div",D,G)),m.imperial&&(this._iScale=$("div",D,G))},_update:function(){var m=this._map,D=m.getSize().y/2,G=m.distance(m.containerPointToLatLng([0,D]),m.containerPointToLatLng([this.options.maxWidth,D]));this._updateScales(G)},_updateScales:function(m){this.options.metric&&m&&this._updateMetric(m),this.options.imperial&&m&&this._updateImperial(m)},_updateMetric:function(m){var D=this._getRoundNum(m);this._updateScale(this._mScale,D<1e3?D+" m":D/1e3+" km",D/m)},_updateImperial:function(m){var G,re,_e,D=3.2808399*m;D>5280?(re=this._getRoundNum(G=D/5280),this._updateScale(this._iScale,re+" mi",re/G)):(_e=this._getRoundNum(D),this._updateScale(this._iScale,_e+" ft",_e/D))},_updateScale:function(m,D,G){m.style.width=Math.round(this.options.maxWidth*G)+"px",m.innerHTML=D},_getRoundNum:function(m){var D=Math.pow(10,(Math.floor(m)+"").length-1),G=m/D;return D*(G>=10?10:G>=5?5:G>=3?3:G>=2?2:1)}}),ra=Ks.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Xe.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(m){mt(this,m),this._attributions={}},onAdd:function(m){for(var D in m.attributionControl=this,this._container=$("div","leaflet-control-attribution"),Io(this._container),m._layers)m._layers[D].getAttribution&&this.addAttribution(m._layers[D].getAttribution());return this._update(),m.on("layeradd",this._addAttribution,this),this._container},onRemove:function(m){m.off("layeradd",this._addAttribution,this)},_addAttribution:function(m){m.layer.getAttribution&&(this.addAttribution(m.layer.getAttribution()),m.layer.once("remove",function(){this.removeAttribution(m.layer.getAttribution())},this))},setPrefix:function(m){return this.options.prefix=m,this._update(),this},addAttribution:function(m){return m?(this._attributions[m]||(this._attributions[m]=0),this._attributions[m]++,this._update(),this):this},removeAttribution:function(m){return m?(this._attributions[m]&&(this._attributions[m]--,this._update()),this):this},_update:function(){if(this._map){var m=[];for(var D in this._attributions)this._attributions[D]&&m.push(D);var G=[];this.options.prefix&&G.push(this.options.prefix),m.length&&G.push(m.join(", ")),this._container.innerHTML=G.join(' <span aria-hidden="true">|</span> ')}}});vr.mergeOptions({attributionControl:!0}),vr.addInitHook(function(){this.options.attributionControl&&(new ra).addTo(this)});Ks.Layers=sc,Ks.Zoom=hl,Ks.Scale=$a,Ks.Attribution=ra,js.layers=function(m,D,G){return new sc(m,D,G)},js.zoom=function(m){return new hl(m)},js.scale=function(m){return new $a(m)},js.attribution=function(m){return new ra(m)};var bo=ri.extend({initialize:function(m){this._map=m},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bo.addTo=function(m,D){return m.addHandler(D,this),this};var zr={Events:Vi},Zu=Xe.touch?"touchstart mousedown":"mousedown",Pa=_i.extend({options:{clickTolerance:3},initialize:function(m,D,G,re){mt(this,re),this._element=m,this._dragStartTarget=D||m,this._preventOutline=G},enable:function(){this._enabled||(qn(this._dragStartTarget,Zu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Pa._dragging===this&&this.finishDrag(!0),$n(this._dragStartTarget,Zu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(m){if(this._enabled&&(this._moved=!1,!we(this._element,"leaflet-zoom-anim"))){if(m.touches&&1!==m.touches.length)return void(Pa._dragging===this&&this.finishDrag());if(!(Pa._dragging||m.shiftKey||1!==m.which&&1!==m.button&&!m.touches||(Pa._dragging=this,this._preventOutline&&lr(this._element),En(),ii(),this._moving))){this.fire("down");var D=m.touches?m.touches[0]:m,G=Hr(this._element);this._startPoint=new Ci(D.clientX,D.clientY),this._startPos=It(this._element),this._parentScale=Wr(G);var re="mousedown"===m.type;qn(document,re?"mousemove":"touchmove",this._onMove,this),qn(document,re?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(m){if(this._enabled){if(m.touches&&m.touches.length>1)return void(this._moved=!0);var D=m.touches&&1===m.touches.length?m.touches[0]:m,G=new Ci(D.clientX,D.clientY)._subtract(this._startPoint);!G.x&&!G.y||Math.abs(G.x)+Math.abs(G.y)<this.options.clickTolerance||(G.x/=this._parentScale.x,G.y/=this._parentScale.y,Zr(m),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=m.target||m.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(G),this._moving=!0,this._lastEvent=m,this._updatePosition())}},_updatePosition:function(){var m={originalEvent:this._lastEvent};this.fire("predrag",m),kt(this._element,this._newPos),this.fire("drag",m)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(m){Se(document.body,"leaflet-dragging"),this._lastTarget&&(Se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$n(document,"mousemove touchmove",this._onMove,this),$n(document,"mouseup touchend touchcancel",this._onUp,this),Fn(),wi();var D=this._moved&&this._moving;this._moving=!1,Pa._dragging=!1,D&&this.fire("dragend",{noInertia:m,distance:this._newPos.distanceTo(this._startPos)})}});function yc(m,D,G){var re,Ue,Vt,oi,ki,sn,Dn,Bn,mr,_e=[1,4,2,8];for(Ue=0,Dn=m.length;Ue<Dn;Ue++)m[Ue]._code=ls(m[Ue],D);for(oi=0;oi<4;oi++){for(Bn=_e[oi],re=[],Ue=0,Vt=(Dn=m.length)-1;Ue<Dn;Vt=Ue++)sn=m[Vt],(ki=m[Ue])._code&Bn?sn._code&Bn||((mr=Ol(sn,ki,Bn,D,G))._code=ls(mr,D),re.push(mr)):(sn._code&Bn&&((mr=Ol(sn,ki,Bn,D,G))._code=ls(mr,D),re.push(mr)),re.push(ki));m=re}return m}function bc(m,D){var G,re,_e,Ue,Vt,oi,ki,sn;if(!m||0===m.length)throw new Error("latlngs not passed");Hs(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var Bn=on([0,0]),mr=ei(m);mr.getNorthWest().distanceTo(mr.getSouthWest())*mr.getNorthEast().distanceTo(mr.getNorthWest())<1700&&(Bn=sa(m));var Ys=m.length,io=[];for(G=0;G<Ys;G++){var $s=on(m[G]);io.push(D.project(on([$s.lat-Bn.lat,$s.lng-Bn.lng])))}for(oi=ki=sn=0,G=0,re=Ys-1;G<Ys;re=G++)ki+=((_e=io[G]).x+(Ue=io[re]).x)*(Vt=_e.y*Ue.x-Ue.y*_e.x),sn+=(_e.y+Ue.y)*Vt,oi+=3*Vt;var Ta=D.unproject(qi(0===oi?io[0]:[ki/oi,sn/oi]));return on([Ta.lat+Bn.lat,Ta.lng+Bn.lng])}function sa(m){for(var D=0,G=0,re=0,_e=0;_e<m.length;_e++){var Ue=on(m[_e]);D+=Ue.lat,G+=Ue.lng,re++}return on([D/re,G/re])}var xo,Ns={__proto__:null,clipPolygon:yc,polygonCenter:bc,centroid:sa};function Ho(m,D){if(!D||!m.length)return m.slice();var G=D*D;return function Ra(m,D){var G=m.length,_e=new(typeof Uint8Array<"u"?Uint8Array:Array)(G);_e[0]=_e[G-1]=1,xa(m,_e,D,0,G-1);var Ue,Vt=[];for(Ue=0;Ue<G;Ue++)_e[Ue]&&Vt.push(m[Ue]);return Vt}(m=function Ll(m,D){for(var G=[m[0]],re=1,_e=0,Ue=m.length;re<Ue;re++)Xa(m[re],m[_e])>D&&(G.push(m[re]),_e=re);return _e<Ue-1&&G.push(m[Ue-1]),G}(m,G),G)}function Lo(m,D,G){return Math.sqrt(wo(m,D,G,!0))}function xa(m,D,G,re,_e){var Vt,oi,ki,Ue=0;for(oi=re+1;oi<=_e-1;oi++)(ki=wo(m[oi],m[re],m[_e],!0))>Ue&&(Vt=oi,Ue=ki);Ue>G&&(D[Vt]=1,xa(m,D,G,re,Vt),xa(m,D,G,Vt,_e))}function Yn(m,D,G,re,_e){var oi,ki,sn,Ue=re?xo:ls(m,G),Vt=ls(D,G);for(xo=Vt;;){if(!(Ue|Vt))return[m,D];if(Ue&Vt)return!1;sn=ls(ki=Ol(m,D,oi=Ue||Vt,G,_e),G),oi===Ue?(m=ki,Ue=sn):(D=ki,Vt=sn)}}function Ol(m,D,G,re,_e){var sn,Dn,Ue=D.x-m.x,Vt=D.y-m.y,oi=re.min,ki=re.max;return 8&G?(sn=m.x+Ue*(ki.y-m.y)/Vt,Dn=ki.y):4&G?(sn=m.x+Ue*(oi.y-m.y)/Vt,Dn=oi.y):2&G?(sn=ki.x,Dn=m.y+Vt*(ki.x-m.x)/Ue):1&G&&(sn=oi.x,Dn=m.y+Vt*(oi.x-m.x)/Ue),new Ci(sn,Dn,_e)}function ls(m,D){var G=0;return m.x<D.min.x?G|=1:m.x>D.max.x&&(G|=2),m.y<D.min.y?G|=4:m.y>D.max.y&&(G|=8),G}function Xa(m,D){var G=D.x-m.x,re=D.y-m.y;return G*G+re*re}function wo(m,D,G,re){var sn,_e=D.x,Ue=D.y,Vt=G.x-_e,oi=G.y-Ue,ki=Vt*Vt+oi*oi;return ki>0&&((sn=((m.x-_e)*Vt+(m.y-Ue)*oi)/ki)>1?(_e=G.x,Ue=G.y):sn>0&&(_e+=Vt*sn,Ue+=oi*sn)),Vt=m.x-_e,oi=m.y-Ue,re?Vt*Vt+oi*oi:new Ci(_e,Ue)}function Hs(m){return!wt(m[0])||"object"!=typeof m[0][0]&&typeof m[0][0]<"u"}function Or(m){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Hs(m)}function fl(m,D){var G,re,_e,Ue,Vt,oi,ki,sn;if(!m||0===m.length)throw new Error("latlngs not passed");Hs(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var Dn=on([0,0]),Bn=ei(m);Bn.getNorthWest().distanceTo(Bn.getSouthWest())*Bn.getNorthEast().distanceTo(Bn.getNorthWest())<1700&&(Dn=sa(m));var Br=m.length,Ys=[];for(G=0;G<Br;G++){var io=on(m[G]);Ys.push(D.project(on([io.lat-Dn.lat,io.lng-Dn.lng])))}for(G=0,re=0;G<Br-1;G++)re+=Ys[G].distanceTo(Ys[G+1])/2;if(0===re)sn=Ys[0];else for(G=0,Ue=0;G<Br-1;G++)if((Ue+=_e=(Vt=Ys[G]).distanceTo(oi=Ys[G+1]))>re){sn=[oi.x-(ki=(Ue-re)/_e)*(oi.x-Vt.x),oi.y-ki*(oi.y-Vt.y)];break}var $s=D.unproject(qi(sn));return on([$s.lat+Dn.lat,$s.lng+Dn.lng])}var Pl={__proto__:null,simplify:Ho,pointToSegmentDistance:Lo,closestPointOnSegment:function pl(m,D,G){return wo(m,D,G)},clipSegment:Yn,_getEdgeIntersection:Ol,_getBitCode:ls,_sqClosestPointOnSegment:wo,isFlat:Hs,_flat:Or,polylineCenter:fl},Rl={project:function(m){return new Ci(m.lng,m.lat)},unproject:function(m){return new Bi(m.y,m.x)},bounds:new xn([-180,-90],[180,90])},zl={R:6378137,R_MINOR:6356752.314245179,bounds:new xn([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(m){var D=Math.PI/180,G=this.R,re=m.lat*D,_e=this.R_MINOR/G,Ue=Math.sqrt(1-_e*_e),Vt=Ue*Math.sin(re),oi=Math.tan(Math.PI/4-re/2)/Math.pow((1-Vt)/(1+Vt),Ue/2);return re=-G*Math.log(Math.max(oi,1e-10)),new Ci(m.lng*D*G,re)},unproject:function(m){for(var sn,D=180/Math.PI,G=this.R,re=this.R_MINOR/G,_e=Math.sqrt(1-re*re),Ue=Math.exp(-m.y/G),Vt=Math.PI/2-2*Math.atan(Ue),oi=0,ki=.1;oi<15&&Math.abs(ki)>1e-7;oi++)sn=_e*Math.sin(Vt),sn=Math.pow((1-sn)/(1+sn),_e/2),Vt+=ki=Math.PI/2-2*Math.atan(Ue*sn)-Vt;return new Bi(Vt*D,m.x*D/G)}},Us={__proto__:null,LonLat:Rl,Mercator:zl,SphericalMercator:Gi},Co=pn({},Nn,{code:"EPSG:3395",projection:zl,transformation:function(){var m=.5/(Math.PI*zl.R);return sr(m,.5,-m,.5)}()}),Mt=pn({},Nn,{code:"EPSG:4326",projection:Rl,transformation:sr(1/180,1,-1/180,.5)}),ac=pn({},Wn,{projection:Rl,transformation:sr(1,0,-1,0),scale:function(m){return Math.pow(2,m)},zoom:function(m){return Math.log(m)/Math.LN2},distance:function(m,D){var G=D.lng-m.lng,re=D.lat-m.lat;return Math.sqrt(G*G+re*re)},infinite:!0});Wn.Earth=Nn,Wn.EPSG3395=Co,Wn.EPSG3857=fr,Wn.EPSG900913=wn,Wn.EPSG4326=Mt,Wn.Simple=ac;var ps=_i.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(m){return m.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(m){return m&&m.removeLayer(this),this},getPane:function(m){return this._map.getPane(m?this.options[m]||m:this.options.pane)},addInteractiveTarget:function(m){return this._map._targets[Oe(m)]=this,this},removeInteractiveTarget:function(m){return delete this._map._targets[Oe(m)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(m){var D=m.target;if(D.hasLayer(this)){if(this._map=D,this._zoomAnimated=D._zoomAnimated,this.getEvents){var G=this.getEvents();D.on(G,this),this.once("remove",function(){D.off(G,this)},this)}this.onAdd(D),this.fire("add"),D.fire("layeradd",{layer:this})}}});vr.include({addLayer:function(m){if(!m._layerAdd)throw new Error("The provided object is not a Layer.");var D=Oe(m);return this._layers[D]||(this._layers[D]=m,m._mapToAdd=this,m.beforeAdd&&m.beforeAdd(this),this.whenReady(m._layerAdd,m)),this},removeLayer:function(m){var D=Oe(m);return this._layers[D]?(this._loaded&&m.onRemove(this),delete this._layers[D],this._loaded&&(this.fire("layerremove",{layer:m}),m.fire("remove")),m._map=m._mapToAdd=null,this):this},hasLayer:function(m){return Oe(m)in this._layers},eachLayer:function(m,D){for(var G in this._layers)m.call(D,this._layers[G]);return this},_addLayers:function(m){for(var D=0,G=(m=m?wt(m)?m:[m]:[]).length;D<G;D++)this.addLayer(m[D])},_addZoomLimit:function(m){(!isNaN(m.options.maxZoom)||!isNaN(m.options.minZoom))&&(this._zoomBoundLayers[Oe(m)]=m,this._updateZoomLevels())},_removeZoomLimit:function(m){var D=Oe(m);this._zoomBoundLayers[D]&&(delete this._zoomBoundLayers[D],this._updateZoomLevels())},_updateZoomLevels:function(){var m=1/0,D=-1/0,G=this._getZoomSpan();for(var re in this._zoomBoundLayers){var _e=this._zoomBoundLayers[re].options;m=void 0===_e.minZoom?m:Math.min(m,_e.minZoom),D=void 0===_e.maxZoom?D:Math.max(D,_e.maxZoom)}this._layersMaxZoom=D===-1/0?void 0:D,this._layersMinZoom=m===1/0?void 0:m,G!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vr=ps.extend({initialize:function(m,D){var G,re;if(mt(this,D),this._layers={},m)for(G=0,re=m.length;G<re;G++)this.addLayer(m[G])},addLayer:function(m){var D=this.getLayerId(m);return this._layers[D]=m,this._map&&this._map.addLayer(m),this},removeLayer:function(m){var D=m in this._layers?m:this.getLayerId(m);return this._map&&this._layers[D]&&this._map.removeLayer(this._layers[D]),delete this._layers[D],this},hasLayer:function(m){return("number"==typeof m?m:this.getLayerId(m))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(m){var G,re,D=Array.prototype.slice.call(arguments,1);for(G in this._layers)(re=this._layers[G])[m]&&re[m].apply(re,D);return this},onAdd:function(m){this.eachLayer(m.addLayer,m)},onRemove:function(m){this.eachLayer(m.removeLayer,m)},eachLayer:function(m,D){for(var G in this._layers)m.call(D,this._layers[G]);return this},getLayer:function(m){return this._layers[m]},getLayers:function(){var m=[];return this.eachLayer(m.push,m),m},setZIndex:function(m){return this.invoke("setZIndex",m)},getLayerId:function(m){return Oe(m)}}),lo=Vr.extend({addLayer:function(m){return this.hasLayer(m)?this:(m.addEventParent(this),Vr.prototype.addLayer.call(this,m),this.fire("layeradd",{layer:m}))},removeLayer:function(m){return this.hasLayer(m)?(m in this._layers&&(m=this._layers[m]),m.removeEventParent(this),Vr.prototype.removeLayer.call(this,m),this.fire("layerremove",{layer:m})):this},setStyle:function(m){return this.invoke("setStyle",m)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var m=new Vn;for(var D in this._layers){var G=this._layers[D];m.extend(G.getBounds?G.getBounds():G.getLatLng())}return m}}),oa=ri.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(m){mt(this,m)},createIcon:function(m){return this._createIcon("icon",m)},createShadow:function(m){return this._createIcon("shadow",m)},_createIcon:function(m,D){var G=this._getIconUrl(m);if(!G){if("icon"===m)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var re=this._createImg(G,D&&"IMG"===D.tagName?D:null);return this._setIconStyles(re,m),(this.options.crossOrigin||""===this.options.crossOrigin)&&(re.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),re},_setIconStyles:function(m,D){var G=this.options,re=G[D+"Size"];"number"==typeof re&&(re=[re,re]);var _e=qi(re),Ue=qi("shadow"===D&&G.shadowAnchor||G.iconAnchor||_e&&_e.divideBy(2,!0));m.className="leaflet-marker-"+D+" "+(G.className||""),Ue&&(m.style.marginLeft=-Ue.x+"px",m.style.marginTop=-Ue.y+"px"),_e&&(m.style.width=_e.x+"px",m.style.height=_e.y+"px")},_createImg:function(m,D){return(D=D||document.createElement("img")).src=m,D},_getIconUrl:function(m){return Xe.retina&&this.options[m+"RetinaUrl"]||this.options[m+"Url"]}});var zs=oa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(m){return"string"!=typeof zs.imagePath&&(zs.imagePath=this._detectIconPath()),(this.options.imagePath||zs.imagePath)+oa.prototype._getIconUrl.call(this,m)},_stripUrl:function(m){var D=function(G,re,_e){var Ue=re.exec(G);return Ue&&Ue[_e]};return(m=D(m,/^url\((['"])?(.+)\1\)$/,2))&&D(m,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var m=$("div","leaflet-default-icon-path",document.body),D=U(m,"background-image")||U(m,"backgroundImage");if(document.body.removeChild(m),D=this._stripUrl(D))return D;var G=document.querySelector('link[href$="leaflet.css"]');return G?G.href.substring(0,G.href.length-11-1):""}}),wa=bo.extend({initialize:function(m){this._marker=m},addHooks:function(){var m=this._marker._icon;this._draggable||(this._draggable=new Pa(m,m,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(m,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(m){var D=this._marker,G=D._map,re=this._marker.options.autoPanSpeed,_e=this._marker.options.autoPanPadding,Ue=It(D._icon),Vt=G.getPixelBounds(),oi=G.getPixelOrigin(),ki=mn(Vt.min._subtract(oi).add(_e),Vt.max._subtract(oi).subtract(_e));if(!ki.contains(Ue)){var sn=qi((Math.max(ki.max.x,Ue.x)-ki.max.x)/(Vt.max.x-ki.max.x)-(Math.min(ki.min.x,Ue.x)-ki.min.x)/(Vt.min.x-ki.min.x),(Math.max(ki.max.y,Ue.y)-ki.max.y)/(Vt.max.y-ki.max.y)-(Math.min(ki.min.y,Ue.y)-ki.min.y)/(Vt.min.y-ki.min.y)).multiplyBy(re);G.panBy(sn,{animate:!1}),this._draggable._newPos._add(sn),this._draggable._startPos._add(sn),kt(D._icon,this._draggable._newPos),this._onDrag(m),this._panRequest=jt(this._adjustPan.bind(this,m))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(m){this._marker.options.autoPan&&(ht(this._panRequest),this._panRequest=jt(this._adjustPan.bind(this,m)))},_onDrag:function(m){var D=this._marker,G=D._shadow,re=It(D._icon),_e=D._map.layerPointToLatLng(re);G&&kt(G,re),D._latlng=_e,m.latlng=_e,m.oldLatLng=this._oldLatLng,D.fire("move",m).fire("drag",m)},_onDragEnd:function(m){ht(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",m)}}),aa=ps.extend({options:{icon:new zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(m,D){mt(this,D),this._latlng=on(m)},onAdd:function(m){this._zoomAnimated=this._zoomAnimated&&m.options.markerZoomAnimation,this._zoomAnimated&&m.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(m){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&m.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(m){var D=this._latlng;return this._latlng=on(m),this.update(),this.fire("move",{oldLatLng:D,latlng:this._latlng})},setZIndexOffset:function(m){return this.options.zIndexOffset=m,this.update()},getIcon:function(){return this.options.icon},setIcon:function(m){return this.options.icon=m,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var m=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(m)}return this},_initIcon:function(){var m=this.options,D="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),G=m.icon.createIcon(this._icon),re=!1;G!==this._icon&&(this._icon&&this._removeIcon(),re=!0,m.title&&(G.title=m.title),"IMG"===G.tagName&&(G.alt=m.alt||"")),me(G,D),m.keyboard&&(G.tabIndex="0",G.setAttribute("role","button")),this._icon=G,m.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qn(G,"focus",this._panOnFocus,this);var _e=m.icon.createShadow(this._shadow),Ue=!1;_e!==this._shadow&&(this._removeShadow(),Ue=!0),_e&&(me(_e,D),_e.alt=""),this._shadow=_e,m.opacity<1&&this._updateOpacity(),re&&this.getPane().appendChild(this._icon),this._initInteraction(),_e&&Ue&&this.getPane(m.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$n(this._icon,"focus",this._panOnFocus,this),q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&q(this._shadow),this._shadow=null},_setPos:function(m){this._icon&&kt(this._icon,m),this._shadow&&kt(this._shadow,m),this._zIndex=m.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(m){this._icon&&(this._icon.style.zIndex=this._zIndex+m)},_animateZoom:function(m){var D=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center).round();this._setPos(D)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wa)){var m=this.options.draggable;this.dragging&&(m=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wa(this),m&&this.dragging.enable()}},setOpacity:function(m){return this.options.opacity=m,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var m=this.options.opacity;this._icon&&pe(this._icon,m),this._shadow&&pe(this._shadow,m)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var m=this._map;if(m){var D=this.options.icon.options,G=D.iconSize?qi(D.iconSize):qi(0,0),re=D.iconAnchor?qi(D.iconAnchor):qi(0,0);m.panInside(this._latlng,{paddingTopLeft:re,paddingBottomRight:G.subtract(re)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Ws=ps.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(m){this._renderer=m.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(m){return mt(this,m),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&m&&Object.prototype.hasOwnProperty.call(m,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vo=Ws.extend({options:{fill:!0,radius:10},initialize:function(m,D){mt(this,D),this._latlng=on(m),this._radius=this.options.radius},setLatLng:function(m){var D=this._latlng;return this._latlng=on(m),this.redraw(),this.fire("move",{oldLatLng:D,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(m){return this.options.radius=this._radius=m,this.redraw()},getRadius:function(){return this._radius},setStyle:function(m){var D=m&&m.radius||this._radius;return Ws.prototype.setStyle.call(this,m),this.setRadius(D),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var m=this._radius,D=this._radiusY||m,G=this._clickTolerance(),re=[m+G,D+G];this._pxBounds=new xn(this._point.subtract(re),this._point.add(re))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(m){return m.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ka=Vo.extend({initialize:function(m,D,G){if("number"==typeof D&&(D=pn({},G,{radius:D})),mt(this,D),this._latlng=on(m),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(m){return this._mRadius=m,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var m=[this._radius,this._radiusY||this._radius];return new Vn(this._map.layerPointToLatLng(this._point.subtract(m)),this._map.layerPointToLatLng(this._point.add(m)))},setStyle:Ws.prototype.setStyle,_project:function(){var m=this._latlng.lng,D=this._latlng.lat,G=this._map,re=G.options.crs;if(re.distance===Nn.distance){var _e=Math.PI/180,Ue=this._mRadius/Nn.R/_e,Vt=G.project([D+Ue,m]),oi=G.project([D-Ue,m]),ki=Vt.add(oi).divideBy(2),sn=G.unproject(ki).lat,Dn=Math.acos((Math.cos(Ue*_e)-Math.sin(D*_e)*Math.sin(sn*_e))/(Math.cos(D*_e)*Math.cos(sn*_e)))/_e;(isNaN(Dn)||0===Dn)&&(Dn=Ue/Math.cos(Math.PI/180*D)),this._point=ki.subtract(G.getPixelOrigin()),this._radius=isNaN(Dn)?0:ki.x-G.project([sn,m-Dn]).x,this._radiusY=ki.y-Vt.y}else{var Bn=re.unproject(re.project(this._latlng).subtract([this._mRadius,0]));this._point=G.latLngToLayerPoint(this._latlng),this._radius=this._point.x-G.latLngToLayerPoint(Bn).x}this._updateBounds()}});var co=Ws.extend({options:{smoothFactor:1,noClip:!1},initialize:function(m,D){mt(this,D),this._setLatLngs(m)},getLatLngs:function(){return this._latlngs},setLatLngs:function(m){return this._setLatLngs(m),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(m){for(var _e,Ue,D=1/0,G=null,re=wo,Vt=0,oi=this._parts.length;Vt<oi;Vt++)for(var ki=this._parts[Vt],sn=1,Dn=ki.length;sn<Dn;sn++){var Bn=re(m,_e=ki[sn-1],Ue=ki[sn],!0);Bn<D&&(D=Bn,G=re(m,_e,Ue))}return G&&(G.distance=Math.sqrt(D)),G},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(m,D){return D=D||this._defaultShape(),m=on(m),D.push(m),this._bounds.extend(m),this.redraw()},_setLatLngs:function(m){this._bounds=new Vn,this._latlngs=this._convertLatLngs(m)},_defaultShape:function(){return Hs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(m){for(var D=[],G=Hs(m),re=0,_e=m.length;re<_e;re++)G?(D[re]=on(m[re]),this._bounds.extend(D[re])):D[re]=this._convertLatLngs(m[re]);return D},_project:function(){var m=new xn;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,m),this._bounds.isValid()&&m.isValid()&&(this._rawPxBounds=m,this._updateBounds())},_updateBounds:function(){var m=this._clickTolerance(),D=new Ci(m,m);this._rawPxBounds&&(this._pxBounds=new xn([this._rawPxBounds.min.subtract(D),this._rawPxBounds.max.add(D)]))},_projectLatlngs:function(m,D,G){var Ue,Vt,_e=m.length;if(m[0]instanceof Bi){for(Vt=[],Ue=0;Ue<_e;Ue++)Vt[Ue]=this._map.latLngToLayerPoint(m[Ue]),G.extend(Vt[Ue]);D.push(Vt)}else for(Ue=0;Ue<_e;Ue++)this._projectLatlngs(m[Ue],D,G)},_clipPoints:function(){var m=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(m)){if(this.options.noClip)return void(this._parts=this._rings);var G,re,_e,Ue,Vt,oi,ki,D=this._parts;for(G=0,_e=0,Ue=this._rings.length;G<Ue;G++)for(re=0,Vt=(ki=this._rings[G]).length;re<Vt-1;re++)(oi=Yn(ki[re],ki[re+1],m,re,!0))&&(D[_e]=D[_e]||[],D[_e].push(oi[0]),(oi[1]!==ki[re+1]||re===Vt-2)&&(D[_e].push(oi[1]),_e++))}},_simplifyPoints:function(){for(var m=this._parts,D=this.options.smoothFactor,G=0,re=m.length;G<re;G++)m[G]=Ho(m[G],D)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(m,D){var G,re,_e,Ue,Vt,oi,ki=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(G=0,Ue=this._parts.length;G<Ue;G++)for(re=0,_e=(Vt=(oi=this._parts[G]).length)-1;re<Vt;_e=re++)if((D||0!==re)&&Lo(m,oi[_e],oi[re])<=ki)return!0;return!1}});co._flat=Or;var uo=co.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(m){var D=co.prototype._convertLatLngs.call(this,m),G=D.length;return G>=2&&D[0]instanceof Bi&&D[0].equals(D[G-1])&&D.pop(),D},_setLatLngs:function(m){co.prototype._setLatLngs.call(this,m),Hs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Hs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var m=this._renderer._bounds,D=this.options.weight,G=new Ci(D,D);if(m=new xn(m.min.subtract(G),m.max.add(G)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(m)){if(this.options.noClip)return void(this._parts=this._rings);for(var Ue,re=0,_e=this._rings.length;re<_e;re++)(Ue=yc(this._rings[re],m,!0)).length&&this._parts.push(Ue)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(m){var G,re,_e,Ue,Vt,oi,ki,sn,D=!1;if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(Ue=0,ki=this._parts.length;Ue<ki;Ue++)for(Vt=0,oi=(sn=(G=this._parts[Ue]).length)-1;Vt<sn;oi=Vt++)(re=G[Vt]).y>m.y!=(_e=G[oi]).y>m.y&&m.x<(_e.x-re.x)*(m.y-re.y)/(_e.y-re.y)+re.x&&(D=!D);return D||co.prototype._containsPoint.call(this,m,!0)}});var la=lo.extend({initialize:function(m,D){mt(this,D),this._layers={},m&&this.addData(m)},addData:function(m){var G,re,_e,D=wt(m)?m:m.features;if(D){for(G=0,re=D.length;G<re;G++)((_e=D[G]).geometries||_e.geometry||_e.features||_e.coordinates)&&this.addData(_e);return this}var Ue=this.options;if(Ue.filter&&!Ue.filter(m))return this;var Vt=Ja(m,Ue);return Vt?(Vt.feature=ho(m),Vt.defaultOptions=Vt.options,this.resetStyle(Vt),Ue.onEachFeature&&Ue.onEachFeature(m,Vt),this.addLayer(Vt)):this},resetStyle:function(m){return void 0===m?this.eachLayer(this.resetStyle,this):(m.options=pn({},m.defaultOptions),this._setLayerStyle(m,this.options.style),this)},setStyle:function(m){return this.eachLayer(function(D){this._setLayerStyle(D,m)},this)},_setLayerStyle:function(m,D){m.setStyle&&("function"==typeof D&&(D=D(m.feature)),m.setStyle(D))}});function Ja(m,D){var oi,ki,sn,Dn,G="Feature"===m.type?m.geometry:m,re=G?G.coordinates:null,_e=[],Ue=D&&D.pointToLayer,Vt=D&&D.coordsToLatLng||lc;if(!re&&!G)return null;switch(G.type){case"Point":return za(Ue,m,oi=Vt(re),D);case"MultiPoint":for(sn=0,Dn=re.length;sn<Dn;sn++)oi=Vt(re[sn]),_e.push(za(Ue,m,oi,D));return new lo(_e);case"LineString":case"MultiLineString":return ki=ys(re,"LineString"===G.type?0:1,Vt),new co(ki,D);case"Polygon":case"MultiPolygon":return ki=ys(re,"Polygon"===G.type?1:2,Vt),new uo(ki,D);case"GeometryCollection":for(sn=0,Dn=G.geometries.length;sn<Dn;sn++){var Bn=Ja({geometry:G.geometries[sn],type:"Feature",properties:m.properties},D);Bn&&_e.push(Bn)}return new lo(_e);case"FeatureCollection":for(sn=0,Dn=G.features.length;sn<Dn;sn++){var mr=Ja(G.features[sn],D);mr&&_e.push(mr)}return new lo(_e);default:throw new Error("Invalid GeoJSON object.")}}function za(m,D,G,re){return m?m(D,G):new aa(G,re&&re.markersInheritOptions&&re)}function lc(m){return new Bi(m[1],m[0],m[2])}function ys(m,D,G){for(var Vt,re=[],_e=0,Ue=m.length;_e<Ue;_e++)Vt=D?ys(m[_e],D-1,G):(G||lc)(m[_e]),re.push(Vt);return re}function Cc(m,D){return void 0!==(m=on(m)).alt?[Ge(m.lng,D),Ge(m.lat,D),Ge(m.alt,D)]:[Ge(m.lng,D),Ge(m.lat,D)]}function ml(m,D,G,re){for(var _e=[],Ue=0,Vt=m.length;Ue<Vt;Ue++)_e.push(D?ml(m[Ue],Hs(m[Ue])?0:D-1,G,re):Cc(m[Ue],re));return!D&&G&&_e.length>0&&_e.push(_e[0].slice()),_e}function Oo(m,D){return m.feature?pn({},m.feature,{geometry:D}):ho(D)}function ho(m){return"Feature"===m.type||"FeatureCollection"===m.type?m:{type:"Feature",properties:{},geometry:m}}var Kr={toGeoJSON:function(m){return Oo(this,{type:"Point",coordinates:Cc(this.getLatLng(),m)})}};function gl(m,D){return new la(m,D)}aa.include(Kr),Ka.include(Kr),Vo.include(Kr),co.include({toGeoJSON:function(m){var D=!Hs(this._latlngs);return Oo(this,{type:(D?"Multi":"")+"LineString",coordinates:ml(this._latlngs,D?1:0,!1,m)})}}),uo.include({toGeoJSON:function(m){var D=!Hs(this._latlngs),G=D&&!Hs(this._latlngs[0]),re=ml(this._latlngs,G?2:D?1:0,!0,m);return D||(re=[re]),Oo(this,{type:(G?"Multi":"")+"Polygon",coordinates:re})}}),Vr.include({toMultiPoint:function(m){var D=[];return this.eachLayer(function(G){D.push(G.toGeoJSON(m).geometry.coordinates)}),Oo(this,{type:"MultiPoint",coordinates:D})},toGeoJSON:function(m){var D=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===D)return this.toMultiPoint(m);var G="GeometryCollection"===D,re=[];return this.eachLayer(function(_e){if(_e.toGeoJSON){var Ue=_e.toGeoJSON(m);if(G)re.push(Ue.geometry);else{var Vt=ho(Ue);"FeatureCollection"===Vt.type?re.push.apply(re,Vt.features):re.push(Vt)}}}),G?Oo(this,{geometries:re,type:"GeometryCollection"}):{type:"FeatureCollection",features:re}}});var cc=gl,Eo=ps.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(m,D,G){this._url=m,this._bounds=ei(D),mt(this,G)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(m){return this.options.opacity=m,this._image&&this._updateOpacity(),this},setStyle:function(m){return m.opacity&&this.setOpacity(m.opacity),this},bringToFront:function(){return this._map&&de(this._image),this},bringToBack:function(){return this._map&&ge(this._image),this},setUrl:function(m){return this._url=m,this._image&&(this._image.src=m),this},setBounds:function(m){return this._bounds=ei(m),this._map&&this._reset(),this},getEvents:function(){var m={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var m="IMG"===this._url.tagName,D=this._image=m?this._url:$("img");me(D,"leaflet-image-layer"),this._zoomAnimated&&me(D,"leaflet-zoom-animated"),this.options.className&&me(D,this.options.className),D.onselectstart=Be,D.onmousemove=Be,D.onload=t(this.fire,this,"load"),D.onerror=t(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(D.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),m?this._url=D.src:(D.src=this._url,D.alt=this.options.alt)},_animateZoom:function(m){var D=this._map.getZoomScale(m.zoom),G=this._map._latLngBoundsToNewLayerBounds(this._bounds,m.zoom,m.center).min;Ze(this._image,G,D)},_reset:function(){var m=this._image,D=new xn(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),G=D.getSize();kt(m,D.min),m.style.width=G.x+"px",m.style.height=G.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var m=this.options.errorOverlayUrl;m&&this._url!==m&&(this._url=m,this._image.src=m)},getCenter:function(){return this._bounds.getCenter()}}),Fa=Eo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var m="VIDEO"===this._url.tagName,D=this._image=m?this._url:$("video");if(me(D,"leaflet-image-layer"),this._zoomAnimated&&me(D,"leaflet-zoom-animated"),this.options.className&&me(D,this.options.className),D.onselectstart=Be,D.onmousemove=Be,D.onloadeddata=t(this.fire,this,"load"),m){for(var G=D.getElementsByTagName("source"),re=[],_e=0;_e<G.length;_e++)re.push(G[_e].src);this._url=G.length>0?re:[D.src]}else{wt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(D.style,"objectFit")&&(D.style.objectFit="fill"),D.autoplay=!!this.options.autoplay,D.loop=!!this.options.loop,D.muted=!!this.options.muted,D.playsInline=!!this.options.playsInline;for(var Ue=0;Ue<this._url.length;Ue++){var Vt=$("source");Vt.src=this._url[Ue],D.appendChild(Vt)}}}});var Hc=Eo.extend({_initImage:function(){var m=this._image=this._url;me(m,"leaflet-image-layer"),this._zoomAnimated&&me(m,"leaflet-zoom-animated"),this.options.className&&me(m,this.options.className),m.onselectstart=Be,m.onmousemove=Be}});var Uo=ps.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(m,D){m&&(m instanceof Bi||wt(m))?(this._latlng=on(m),mt(this,D)):(mt(this,m),this._source=D),this.options.content&&(this._content=this.options.content)},openOn:function(m){return(m=arguments.length?m:this._source._map).hasLayer(this)||m.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(m){return this._map?this.close():(arguments.length?this._source=m:m=this._source,this._prepareOpen(),this.openOn(m._map)),this},onAdd:function(m){this._zoomAnimated=m._zoomAnimated,this._container||this._initLayout(),m._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),m._fadeAnimated&&pe(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(m){m._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(t(q,void 0,this._container),200)):q(this._container),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(m){return this._latlng=on(m),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(m){return this._content=m,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var m={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&de(this._container),this},bringToBack:function(){return this._map&&ge(this._container),this},_prepareOpen:function(m){var D=this._source;if(!D._map)return!1;if(D instanceof lo){D=null;var G=this._source._layers;for(var re in G)if(G[re]._map){D=G[re];break}if(!D)return!1;this._source=D}if(!m)if(D.getCenter)m=D.getCenter();else if(D.getLatLng)m=D.getLatLng();else{if(!D.getBounds)throw new Error("Unable to get source layer LatLng.");m=D.getBounds().getCenter()}return this.setLatLng(m),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var m=this._contentNode,D="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof D)m.innerHTML=D;else{for(;m.hasChildNodes();)m.removeChild(m.firstChild);m.appendChild(D)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var m=this._map.latLngToLayerPoint(this._latlng),D=qi(this.options.offset),G=this._getAnchor();this._zoomAnimated?kt(this._container,m.add(G)):D=D.add(m).add(G);var re=this._containerBottom=-D.y,_e=this._containerLeft=-Math.round(this._containerWidth/2)+D.x;this._container.style.bottom=re+"px",this._container.style.left=_e+"px"}},_getAnchor:function(){return[0,0]}});vr.include({_initOverlay:function(m,D,G,re){var _e=D;return _e instanceof m||(_e=new m(re).setContent(D)),G&&_e.setLatLng(G),_e}}),ps.include({_initOverlay:function(m,D,G,re){var _e=G;return _e instanceof m?(mt(_e,re),_e._source=this):(_e=D&&!re?D:new m(re,this)).setContent(G),_e}});var ca=Uo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(m){return!(m=arguments.length?m:this._source._map).hasLayer(this)&&m._popup&&m._popup.options.autoClose&&m.removeLayer(m._popup),m._popup=this,Uo.prototype.openOn.call(this,m)},onAdd:function(m){Uo.prototype.onAdd.call(this,m),m.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ws||this._source.on("preclick",Yo))},onRemove:function(m){Uo.prototype.onRemove.call(this,m),m.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ws||this._source.off("preclick",Yo))},getEvents:function(){var m=Uo.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(m.preclick=this.close),this.options.keepInView&&(m.moveend=this._adjustPan),m},_initLayout:function(){var m="leaflet-popup",D=this._container=$("div",m+" "+(this.options.className||"")+" leaflet-zoom-animated"),G=this._wrapper=$("div",m+"-content-wrapper",D);if(this._contentNode=$("div",m+"-content",G),Io(D),rc(this._contentNode),qn(D,"contextmenu",Yo),this._tipContainer=$("div",m+"-tip-container",D),this._tip=$("div",m+"-tip",this._tipContainer),this.options.closeButton){var re=this._closeButton=$("a",m+"-close-button",D);re.setAttribute("role","button"),re.setAttribute("aria-label","Close popup"),re.href="#close",re.innerHTML='<span aria-hidden="true">&#215;</span>',qn(re,"click",function(_e){Zr(_e),this.close()},this)}},_updateLayout:function(){var m=this._contentNode,D=m.style;D.width="",D.whiteSpace="nowrap";var G=m.offsetWidth;G=Math.min(G,this.options.maxWidth),G=Math.max(G,this.options.minWidth),D.width=G+1+"px",D.whiteSpace="",D.height="";var _e=this.options.maxHeight,Ue="leaflet-popup-scrolled";_e&&m.offsetHeight>_e?(D.height=_e+"px",me(m,Ue)):Se(m,Ue),this._containerWidth=this._container.offsetWidth},_animateZoom:function(m){var D=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center),G=this._getAnchor();kt(this._container,D.add(G))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var m=this._map,D=parseInt(U(this._container,"marginBottom"),10)||0,G=this._container.offsetHeight+D,re=this._containerWidth,_e=new Ci(this._containerLeft,-G-this._containerBottom);_e._add(It(this._container));var Ue=m.layerPointToContainerPoint(_e),Vt=qi(this.options.autoPanPadding),oi=qi(this.options.autoPanPaddingTopLeft||Vt),ki=qi(this.options.autoPanPaddingBottomRight||Vt),sn=m.getSize(),Dn=0,Bn=0;Ue.x+re+ki.x>sn.x&&(Dn=Ue.x+re-sn.x+ki.x),Ue.x-Dn-oi.x<0&&(Dn=Ue.x-oi.x),Ue.y+G+ki.y>sn.y&&(Bn=Ue.y+G-sn.y+ki.y),Ue.y-Bn-oi.y<0&&(Bn=Ue.y-oi.y),(Dn||Bn)&&(this.options.keepInView&&(this._autopanning=!0),m.fire("autopanstart").panBy([Dn,Bn]))}},_getAnchor:function(){return qi(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});vr.mergeOptions({closePopupOnClick:!0}),vr.include({openPopup:function(m,D,G){return this._initOverlay(ca,m,D,G).openOn(this),this},closePopup:function(m){return(m=arguments.length?m:this._popup)&&m.close(),this}}),ps.include({bindPopup:function(m,D){return this._popup=this._initOverlay(ca,this._popup,m,D),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(m){return this._popup&&(this instanceof lo||(this._popup._source=this),this._popup._prepareOpen(m||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(m){return this._popup&&this._popup.setContent(m),this},getPopup:function(){return this._popup},_openPopup:function(m){if(this._popup&&this._map){ao(m);var D=m.layer||m.target;if(this._popup._source===D&&!(D instanceof Ws))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(m.latlng));this._popup._source=D,this.openPopup(m.latlng)}},_movePopup:function(m){this._popup.setLatLng(m.latlng)},_onKeyPress:function(m){13===m.originalEvent.keyCode&&this._openPopup(m)}});var vl=Uo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(m){Uo.prototype.onAdd.call(this,m),this.setOpacity(this.options.opacity),m.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(m){Uo.prototype.onRemove.call(this,m),m.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var m=Uo.prototype.getEvents.call(this);return this.options.permanent||(m.preclick=this.close),m},_initLayout:function(){this._contentNode=this._container=$("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Oe(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(m){var D,G,re=this._map,_e=this._container,Ue=re.latLngToContainerPoint(re.getCenter()),Vt=re.layerPointToContainerPoint(m),oi=this.options.direction,ki=_e.offsetWidth,sn=_e.offsetHeight,Dn=qi(this.options.offset),Bn=this._getAnchor();"top"===oi?(D=ki/2,G=sn):"bottom"===oi?(D=ki/2,G=0):"center"===oi?(D=ki/2,G=sn/2):"right"===oi?(D=0,G=sn/2):"left"===oi?(D=ki,G=sn/2):Vt.x<Ue.x?(oi="right",D=0,G=sn/2):(oi="left",D=ki+2*(Dn.x+Bn.x),G=sn/2),m=m.subtract(qi(D,G,!0)).add(Dn).add(Bn),Se(_e,"leaflet-tooltip-right"),Se(_e,"leaflet-tooltip-left"),Se(_e,"leaflet-tooltip-top"),Se(_e,"leaflet-tooltip-bottom"),me(_e,"leaflet-tooltip-"+oi),kt(_e,m)},_updatePosition:function(){var m=this._map.latLngToLayerPoint(this._latlng);this._setPosition(m)},setOpacity:function(m){this.options.opacity=m,this._container&&pe(this._container,m)},_animateZoom:function(m){var D=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center);this._setPosition(D)},_getAnchor:function(){return qi(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});vr.include({openTooltip:function(m,D,G){return this._initOverlay(vl,m,D,G).openOn(this),this},closeTooltip:function(m){return m.close(),this}}),ps.include({bindTooltip:function(m,D){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vl,this._tooltip,m,D),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(m){if(m||!this._tooltipHandlersAdded){var D=m?"off":"on",G={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?G.add=this._openTooltip:(G.mouseover=this._openTooltip,G.mouseout=this.closeTooltip,G.click=this._openTooltip,this._map?this._addFocusListeners():G.add=this._addFocusListeners),this._tooltip.options.sticky&&(G.mousemove=this._moveTooltip),this[D](G),this._tooltipHandlersAdded=!m}},openTooltip:function(m){return this._tooltip&&(this instanceof lo||(this._tooltip._source=this),this._tooltip._prepareOpen(m)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(m){return this._tooltip&&this._tooltip.setContent(m),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(m){var D="function"==typeof m.getElement&&m.getElement();D&&(qn(D,"focus",function(){this._tooltip._source=m,this.openTooltip()},this),qn(D,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(m){var D="function"==typeof m.getElement&&m.getElement();D&&D.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(m){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var D=this;return void this._map.once("moveend",function(){D._openOnceFlag=!1,D._openTooltip(m)})}this._tooltip._source=m.layer||m.target,this.openTooltip(this._tooltip.options.sticky?m.latlng:void 0)}},_moveTooltip:function(m){var G,re,D=m.latlng;this._tooltip.options.sticky&&m.originalEvent&&(G=this._map.mouseEventToContainerPoint(m.originalEvent),re=this._map.containerPointToLayerPoint(G),D=this._map.layerPointToLatLng(re)),this._tooltip.setLatLng(D)}});var $o=oa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(m){var D=m&&"DIV"===m.tagName?m:document.createElement("div"),G=this.options;if(G.html instanceof Element?(ne(D),D.appendChild(G.html)):D.innerHTML=!1!==G.html?G.html:"",G.bgPos){var re=qi(G.bgPos);D.style.backgroundPosition=-re.x+"px "+-re.y+"px"}return this._setIconStyles(D,"icon"),D},createShadow:function(){return null}});oa.Default=zs;var fs=ps.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Xe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(m){mt(this,m)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(m){m._addZoomLimit(this)},onRemove:function(m){this._removeAllTiles(),q(this._container),m._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(de(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ge(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(m){return this.options.opacity=m,this._updateOpacity(),this},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var m=this._clampZoom(this._map.getZoom());m!==this._tileZoom&&(this._tileZoom=m,this._updateLevels()),this._update()}return this},getEvents:function(){var m={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Me(this._onMoveEnd,this.options.updateInterval,this)),m.move=this._onMove),this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},createTile:function(){return document.createElement("div")},getTileSize:function(){var m=this.options.tileSize;return m instanceof Ci?m:new Ci(m,m)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(m){for(var Ue,D=this.getPane().children,G=-m(-1/0,1/0),re=0,_e=D.length;re<_e;re++)Ue=D[re].style.zIndex,D[re]!==this._container&&Ue&&(G=m(G,+Ue));isFinite(G)&&(this.options.zIndex=G+m(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Xe.ielt9){pe(this._container,this.options.opacity);var m=+new Date,D=!1,G=!1;for(var re in this._tiles){var _e=this._tiles[re];if(_e.current&&_e.loaded){var Ue=Math.min(1,(m-_e.loaded)/200);pe(_e.el,Ue),Ue<1?D=!0:(_e.active?G=!0:this._onOpaqueTile(_e),_e.active=!0)}}G&&!this._noPrune&&this._pruneTiles(),D&&(ht(this._fadeFrame),this._fadeFrame=jt(this._updateOpacity,this))}},_onOpaqueTile:Be,_initContainer:function(){this._container||(this._container=$("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var m=this._tileZoom,D=this.options.maxZoom;if(void 0!==m){for(var G in this._levels)G=Number(G),this._levels[G].el.children.length||G===m?(this._levels[G].el.style.zIndex=D-Math.abs(m-G),this._onUpdateLevel(G)):(q(this._levels[G].el),this._removeTilesAtZoom(G),this._onRemoveLevel(G),delete this._levels[G]);var re=this._levels[m],_e=this._map;return re||((re=this._levels[m]={}).el=$("div","leaflet-tile-container leaflet-zoom-animated",this._container),re.el.style.zIndex=D,re.origin=_e.project(_e.unproject(_e.getPixelOrigin()),m).round(),re.zoom=m,this._setZoomTransform(re,_e.getCenter(),_e.getZoom()),this._onCreateLevel(re)),this._level=re,re}},_onUpdateLevel:Be,_onRemoveLevel:Be,_onCreateLevel:Be,_pruneTiles:function(){if(this._map){var m,D,G=this._map.getZoom();if(G>this.options.maxZoom||G<this.options.minZoom)return void this._removeAllTiles();for(m in this._tiles)(D=this._tiles[m]).retain=D.current;for(m in this._tiles)if((D=this._tiles[m]).current&&!D.active){var re=D.coords;this._retainParent(re.x,re.y,re.z,re.z-5)||this._retainChildren(re.x,re.y,re.z,re.z+2)}for(m in this._tiles)this._tiles[m].retain||this._removeTile(m)}},_removeTilesAtZoom:function(m){for(var D in this._tiles)this._tiles[D].coords.z===m&&this._removeTile(D)},_removeAllTiles:function(){for(var m in this._tiles)this._removeTile(m)},_invalidateAll:function(){for(var m in this._levels)q(this._levels[m].el),this._onRemoveLevel(Number(m)),delete this._levels[m];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(m,D,G,re){var _e=Math.floor(m/2),Ue=Math.floor(D/2),Vt=G-1,oi=new Ci(+_e,+Ue);oi.z=+Vt;var ki=this._tileCoordsToKey(oi),sn=this._tiles[ki];return sn&&sn.active?(sn.retain=!0,!0):(sn&&sn.loaded&&(sn.retain=!0),Vt>re&&this._retainParent(_e,Ue,Vt,re))},_retainChildren:function(m,D,G,re){for(var _e=2*m;_e<2*m+2;_e++)for(var Ue=2*D;Ue<2*D+2;Ue++){var Vt=new Ci(_e,Ue);Vt.z=G+1;var oi=this._tileCoordsToKey(Vt),ki=this._tiles[oi];ki&&ki.active?ki.retain=!0:(ki&&ki.loaded&&(ki.retain=!0),G+1<re&&this._retainChildren(_e,Ue,G+1,re))}},_resetView:function(m){var D=m&&(m.pinch||m.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),D,D)},_animateZoom:function(m){this._setView(m.center,m.zoom,!0,m.noUpdate)},_clampZoom:function(m){var D=this.options;return void 0!==D.minNativeZoom&&m<D.minNativeZoom?D.minNativeZoom:void 0!==D.maxNativeZoom&&D.maxNativeZoom<m?D.maxNativeZoom:m},_setView:function(m,D,G,re){var _e=Math.round(D);_e=void 0!==this.options.maxZoom&&_e>this.options.maxZoom||void 0!==this.options.minZoom&&_e<this.options.minZoom?void 0:this._clampZoom(_e),(!re||this.options.updateWhenZooming&&_e!==this._tileZoom)&&(this._tileZoom=_e,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==_e&&this._update(m),G||this._pruneTiles(),this._noPrune=!!G),this._setZoomTransforms(m,D)},_setZoomTransforms:function(m,D){for(var G in this._levels)this._setZoomTransform(this._levels[G],m,D)},_setZoomTransform:function(m,D,G){var re=this._map.getZoomScale(G,m.zoom),_e=m.origin.multiplyBy(re).subtract(this._map._getNewPixelOrigin(D,G)).round();Xe.any3d?Ze(m.el,_e,re):kt(m.el,_e)},_resetGrid:function(){var m=this._map,D=m.options.crs,G=this._tileSize=this.getTileSize(),re=this._tileZoom,_e=this._map.getPixelWorldBounds(this._tileZoom);_e&&(this._globalTileRange=this._pxBoundsToTileRange(_e)),this._wrapX=D.wrapLng&&!this.options.noWrap&&[Math.floor(m.project([0,D.wrapLng[0]],re).x/G.x),Math.ceil(m.project([0,D.wrapLng[1]],re).x/G.y)],this._wrapY=D.wrapLat&&!this.options.noWrap&&[Math.floor(m.project([D.wrapLat[0],0],re).y/G.x),Math.ceil(m.project([D.wrapLat[1],0],re).y/G.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(m){var D=this._map,G=D._animatingZoom?Math.max(D._animateToZoom,D.getZoom()):D.getZoom(),re=D.getZoomScale(G,this._tileZoom),_e=D.project(m,this._tileZoom).floor(),Ue=D.getSize().divideBy(2*re);return new xn(_e.subtract(Ue),_e.add(Ue))},_update:function(m){var D=this._map;if(D){var G=this._clampZoom(D.getZoom());if(void 0===m&&(m=D.getCenter()),void 0!==this._tileZoom){var re=this._getTiledPixelBounds(m),_e=this._pxBoundsToTileRange(re),Ue=_e.getCenter(),Vt=[],oi=this.options.keepBuffer,ki=new xn(_e.getBottomLeft().subtract([oi,-oi]),_e.getTopRight().add([oi,-oi]));if(!(isFinite(_e.min.x)&&isFinite(_e.min.y)&&isFinite(_e.max.x)&&isFinite(_e.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var sn in this._tiles){var Dn=this._tiles[sn].coords;(Dn.z!==this._tileZoom||!ki.contains(new Ci(Dn.x,Dn.y)))&&(this._tiles[sn].current=!1)}if(Math.abs(G-this._tileZoom)>1)return void this._setView(m,G);for(var Bn=_e.min.y;Bn<=_e.max.y;Bn++)for(var mr=_e.min.x;mr<=_e.max.x;mr++){var Br=new Ci(mr,Bn);if(Br.z=this._tileZoom,this._isValidTile(Br)){var Ys=this._tiles[this._tileCoordsToKey(Br)];Ys?Ys.current=!0:Vt.push(Br)}}if(Vt.sort(function($s,Ta){return $s.distanceTo(Ue)-Ta.distanceTo(Ue)}),0!==Vt.length){this._loading||(this._loading=!0,this.fire("loading"));var io=document.createDocumentFragment();for(mr=0;mr<Vt.length;mr++)this._addTile(Vt[mr],io);this._level.el.appendChild(io)}}}},_isValidTile:function(m){var D=this._map.options.crs;if(!D.infinite){var G=this._globalTileRange;if(!D.wrapLng&&(m.x<G.min.x||m.x>G.max.x)||!D.wrapLat&&(m.y<G.min.y||m.y>G.max.y))return!1}if(!this.options.bounds)return!0;var re=this._tileCoordsToBounds(m);return ei(this.options.bounds).overlaps(re)},_keyToBounds:function(m){return this._tileCoordsToBounds(this._keyToTileCoords(m))},_tileCoordsToNwSe:function(m){var D=this._map,G=this.getTileSize(),re=m.scaleBy(G),_e=re.add(G);return[D.unproject(re,m.z),D.unproject(_e,m.z)]},_tileCoordsToBounds:function(m){var D=this._tileCoordsToNwSe(m),G=new Vn(D[0],D[1]);return this.options.noWrap||(G=this._map.wrapLatLngBounds(G)),G},_tileCoordsToKey:function(m){return m.x+":"+m.y+":"+m.z},_keyToTileCoords:function(m){var D=m.split(":"),G=new Ci(+D[0],+D[1]);return G.z=+D[2],G},_removeTile:function(m){var D=this._tiles[m];D&&(q(D.el),delete this._tiles[m],this.fire("tileunload",{tile:D.el,coords:this._keyToTileCoords(m)}))},_initTile:function(m){me(m,"leaflet-tile");var D=this.getTileSize();m.style.width=D.x+"px",m.style.height=D.y+"px",m.onselectstart=Be,m.onmousemove=Be,Xe.ielt9&&this.options.opacity<1&&pe(m,this.options.opacity)},_addTile:function(m,D){var G=this._getTilePos(m),re=this._tileCoordsToKey(m),_e=this.createTile(this._wrapCoords(m),t(this._tileReady,this,m));this._initTile(_e),this.createTile.length<2&&jt(t(this._tileReady,this,m,null,_e)),kt(_e,G),this._tiles[re]={el:_e,coords:m,current:!0},D.appendChild(_e),this.fire("tileloadstart",{tile:_e,coords:m})},_tileReady:function(m,D,G){D&&this.fire("tileerror",{error:D,tile:G,coords:m});var re=this._tileCoordsToKey(m);(G=this._tiles[re])&&(G.loaded=+new Date,this._map._fadeAnimated?(pe(G.el,0),ht(this._fadeFrame),this._fadeFrame=jt(this._updateOpacity,this)):(G.active=!0,this._pruneTiles()),D||(me(G.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:G.el,coords:m})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Xe.ielt9||!this._map._fadeAnimated?jt(this._pruneTiles,this):setTimeout(t(this._pruneTiles,this),250)))},_getTilePos:function(m){return m.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(m){var D=new Ci(this._wrapX?De(m.x,this._wrapX):m.x,this._wrapY?De(m.y,this._wrapY):m.y);return D.z=m.z,D},_pxBoundsToTileRange:function(m){var D=this.getTileSize();return new xn(m.min.unscaleBy(D).floor(),m.max.unscaleBy(D).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var m in this._tiles)if(!this._tiles[m].loaded)return!1;return!0}});var Ba=fs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(m,D){this._url=m,(D=mt(this,D)).detectRetina&&Xe.retina&&D.maxZoom>0?(D.tileSize=Math.floor(D.tileSize/2),D.zoomReverse?(D.zoomOffset--,D.minZoom=Math.min(D.maxZoom,D.minZoom+1)):(D.zoomOffset++,D.maxZoom=Math.max(D.minZoom,D.maxZoom-1)),D.minZoom=Math.max(0,D.minZoom)):D.zoomReverse?D.minZoom=Math.min(D.maxZoom,D.minZoom):D.maxZoom=Math.max(D.minZoom,D.maxZoom),"string"==typeof D.subdomains&&(D.subdomains=D.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(m,D){return this._url===m&&void 0===D&&(D=!0),this._url=m,D||this.redraw(),this},createTile:function(m,D){var G=document.createElement("img");return qn(G,"load",t(this._tileOnLoad,this,D,G)),qn(G,"error",t(this._tileOnError,this,D,G)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(G.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(G.referrerPolicy=this.options.referrerPolicy),G.alt="",G.src=this.getTileUrl(m),G},getTileUrl:function(m){var D={r:Xe.retina?"@2x":"",s:this._getSubdomain(m),x:m.x,y:m.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var G=this._globalTileRange.max.y-m.y;this.options.tms&&(D.y=G),D["-y"]=G}return vt(this._url,pn(D,this.options))},_tileOnLoad:function(m,D){Xe.ielt9?setTimeout(t(m,this,null,D),0):m(null,D)},_tileOnError:function(m,D,G){var re=this.options.errorTileUrl;re&&D.getAttribute("src")!==re&&(D.src=re),m(G,D)},_onTileRemove:function(m){m.tile.onload=null},_getZoomForUrl:function(){var m=this._tileZoom;return this.options.zoomReverse&&(m=this.options.maxZoom-m),m+this.options.zoomOffset},_getSubdomain:function(m){var D=Math.abs(m.x+m.y)%this.options.subdomains.length;return this.options.subdomains[D]},_abortLoading:function(){var m,D;for(m in this._tiles)if(this._tiles[m].coords.z!==this._tileZoom&&((D=this._tiles[m].el).onload=Be,D.onerror=Be,!D.complete)){D.src=We;var G=this._tiles[m].coords;q(D),delete this._tiles[m],this.fire("tileabort",{tile:D,coords:G})}},_removeTile:function(m){var D=this._tiles[m];if(D)return D.el.setAttribute("src",We),fs.prototype._removeTile.call(this,m)},_tileReady:function(m,D,G){if(this._map&&(!G||G.getAttribute("src")!==We))return fs.prototype._tileReady.call(this,m,D,G)}});function yl(m,D){return new Ba(m,D)}var Po=Ba.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(m,D){this._url=m;var G=pn({},this.defaultWmsParams);for(var re in D)re in this.options||(G[re]=D[re]);var _e=(D=mt(this,D)).detectRetina&&Xe.retina?2:1,Ue=this.getTileSize();G.width=Ue.x*_e,G.height=Ue.y*_e,this.wmsParams=G},onAdd:function(m){this._crs=this.options.crs||m.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,Ba.prototype.onAdd.call(this,m)},getTileUrl:function(m){var D=this._tileCoordsToNwSe(m),G=this._crs,re=mn(G.project(D[0]),G.project(D[1])),_e=re.min,Ue=re.max,Vt=(this._wmsVersion>=1.3&&this._crs===Mt?[_e.y,_e.x,Ue.y,Ue.x]:[_e.x,_e.y,Ue.x,Ue.y]).join(","),oi=Ba.prototype.getTileUrl.call(this,m);return oi+Pt(this.wmsParams,oi,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Vt},setParams:function(m,D){return pn(this.wmsParams,m),D||this.redraw(),this}});Ba.WMS=Po,yl.wms=function Ec(m,D){return new Po(m,D)};var Ea=ps.extend({options:{padding:.1},initialize:function(m){mt(this,m),Oe(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var m={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(m.zoomanim=this._onAnimZoom),m},_onAnimZoom:function(m){this._updateTransform(m.center,m.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(m,D){var G=this._map.getZoomScale(D,this._zoom),re=this._map.getSize().multiplyBy(.5+this.options.padding),_e=this._map.project(this._center,D),Ue=re.multiplyBy(-G).add(_e).subtract(this._map._getNewPixelOrigin(m,D));Xe.any3d?Ze(this._container,Ue,G):kt(this._container,Ue)},_reset:function(){for(var m in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[m]._reset()},_onZoomEnd:function(){for(var m in this._layers)this._layers[m]._project()},_updatePaths:function(){for(var m in this._layers)this._layers[m]._update()},_update:function(){var m=this.options.padding,D=this._map.getSize(),G=this._map.containerPointToLayerPoint(D.multiplyBy(-m)).round();this._bounds=new xn(G,G.add(D.multiplyBy(1+2*m)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gr=Ea.extend({options:{tolerance:0},getEvents:function(){var m=Ea.prototype.getEvents.call(this);return m.viewprereset=this._onViewPreReset,m},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ea.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var m=this._container=document.createElement("canvas");qn(m,"mousemove",this._onMouseMove,this),qn(m,"click dblclick mousedown mouseup contextmenu",this._onClick,this),qn(m,"mouseout",this._handleMouseOut,this),m._leaflet_disable_events=!0,this._ctx=m.getContext("2d")},_destroyContainer:function(){ht(this._redrawRequest),delete this._ctx,q(this._container),$n(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var D in this._redrawBounds=null,this._layers)this._layers[D]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ea.prototype._update.call(this);var m=this._bounds,D=this._container,G=m.getSize(),re=Xe.retina?2:1;kt(D,m.min),D.width=re*G.x,D.height=re*G.y,D.style.width=G.x+"px",D.style.height=G.y+"px",Xe.retina&&this._ctx.scale(2,2),this._ctx.translate(-m.min.x,-m.min.y),this.fire("update")}},_reset:function(){Ea.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(m){this._updateDashArray(m),this._layers[Oe(m)]=m;var D=m._order={layer:m,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=D),this._drawLast=D,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(m){this._requestRedraw(m)},_removePath:function(m){var D=m._order,G=D.next,re=D.prev;G?G.prev=re:this._drawLast=re,re?re.next=G:this._drawFirst=G,delete m._order,delete this._layers[Oe(m)],this._requestRedraw(m)},_updatePath:function(m){this._extendRedrawBounds(m),m._project(),m._update(),this._requestRedraw(m)},_updateStyle:function(m){this._updateDashArray(m),this._requestRedraw(m)},_updateDashArray:function(m){if("string"==typeof m.options.dashArray){var re,_e,D=m.options.dashArray.split(/[, ]+/),G=[];for(_e=0;_e<D.length;_e++){if(re=Number(D[_e]),isNaN(re))return;G.push(re)}m.options._dashArray=G}else m.options._dashArray=m.options.dashArray},_requestRedraw:function(m){this._map&&(this._extendRedrawBounds(m),this._redrawRequest=this._redrawRequest||jt(this._redraw,this))},_extendRedrawBounds:function(m){if(m._pxBounds){var D=(m.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xn,this._redrawBounds.extend(m._pxBounds.min.subtract([D,D])),this._redrawBounds.extend(m._pxBounds.max.add([D,D]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var m=this._redrawBounds;if(m){var D=m.getSize();this._ctx.clearRect(m.min.x,m.min.y,D.x,D.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var m,D=this._redrawBounds;if(this._ctx.save(),D){var G=D.getSize();this._ctx.beginPath(),this._ctx.rect(D.min.x,D.min.y,G.x,G.y),this._ctx.clip()}this._drawing=!0;for(var re=this._drawFirst;re;re=re.next)m=re.layer,(!D||m._pxBounds&&m._pxBounds.intersects(D))&&m._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(m,D){if(this._drawing){var G,re,_e,Ue,Vt=m._parts,oi=Vt.length,ki=this._ctx;if(oi){for(ki.beginPath(),G=0;G<oi;G++){for(re=0,_e=Vt[G].length;re<_e;re++)ki[re?"lineTo":"moveTo"]((Ue=Vt[G][re]).x,Ue.y);D&&ki.closePath()}this._fillStroke(ki,m)}}},_updateCircle:function(m){if(this._drawing&&!m._empty()){var D=m._point,G=this._ctx,re=Math.max(Math.round(m._radius),1),_e=(Math.max(Math.round(m._radiusY),1)||re)/re;1!==_e&&(G.save(),G.scale(1,_e)),G.beginPath(),G.arc(D.x,D.y/_e,re,0,2*Math.PI,!1),1!==_e&&G.restore(),this._fillStroke(G,m)}},_fillStroke:function(m,D){var G=D.options;G.fill&&(m.globalAlpha=G.fillOpacity,m.fillStyle=G.fillColor||G.color,m.fill(G.fillRule||"evenodd")),G.stroke&&0!==G.weight&&(m.setLineDash&&m.setLineDash(D.options&&D.options._dashArray||[]),m.globalAlpha=G.opacity,m.lineWidth=G.weight,m.strokeStyle=G.color,m.lineCap=G.lineCap,m.lineJoin=G.lineJoin,m.stroke())},_onClick:function(m){for(var G,re,D=this._map.mouseEventToLayerPoint(m),_e=this._drawFirst;_e;_e=_e.next)(G=_e.layer).options.interactive&&G._containsPoint(D)&&("click"!==m.type&&"preclick"!==m.type||!this._map._draggableMoved(G))&&(re=G);this._fireEvent(!!re&&[re],m)},_onMouseMove:function(m){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var D=this._map.mouseEventToLayerPoint(m);this._handleMouseHover(m,D)}},_handleMouseOut:function(m){var D=this._hoveredLayer;D&&(Se(this._container,"leaflet-interactive"),this._fireEvent([D],m,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(m,D){if(!this._mouseHoverThrottled){for(var G,re,_e=this._drawFirst;_e;_e=_e.next)(G=_e.layer).options.interactive&&G._containsPoint(D)&&(re=G);re!==this._hoveredLayer&&(this._handleMouseOut(m),re&&(me(this._container,"leaflet-interactive"),this._fireEvent([re],m,"mouseover"),this._hoveredLayer=re)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],m),this._mouseHoverThrottled=!0,setTimeout(t(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(m,D,G){this._map._fireDOMEvent(D,G||D.type,m)},_bringToFront:function(m){var D=m._order;if(D){var G=D.next,re=D.prev;if(!G)return;G.prev=re,re?re.next=G:G&&(this._drawFirst=G),D.prev=this._drawLast,this._drawLast.next=D,D.next=null,this._drawLast=D,this._requestRedraw(m)}},_bringToBack:function(m){var D=m._order;if(D){var G=D.next,re=D.prev;if(!re)return;re.next=G,G?G.prev=re:re&&(this._drawLast=re),D.prev=null,D.next=this._drawFirst,this._drawFirst.prev=D,this._drawFirst=D,this._requestRedraw(m)}}});function Fl(m){return Xe.canvas?new Gr(m):null}var Qa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(m){return document.createElement("<lvml:"+m+' class="lvml">')}}catch{}return function(m){return document.createElement("<"+m+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),el={_initContainer:function(){this._container=$("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ea.prototype._update.call(this),this.fire("update"))},_initPath:function(m){var D=m._container=Qa("shape");me(D,"leaflet-vml-shape "+(this.options.className||"")),D.coordsize="1 1",m._path=Qa("path"),D.appendChild(m._path),this._updateStyle(m),this._layers[Oe(m)]=m},_addPath:function(m){var D=m._container;this._container.appendChild(D),m.options.interactive&&m.addInteractiveTarget(D)},_removePath:function(m){var D=m._container;q(D),m.removeInteractiveTarget(D),delete this._layers[Oe(m)]},_updateStyle:function(m){var D=m._stroke,G=m._fill,re=m.options,_e=m._container;_e.stroked=!!re.stroke,_e.filled=!!re.fill,re.stroke?(D||(D=m._stroke=Qa("stroke")),_e.appendChild(D),D.weight=re.weight+"px",D.color=re.color,D.opacity=re.opacity,D.dashStyle=re.dashArray?wt(re.dashArray)?re.dashArray.join(" "):re.dashArray.replace(/( *, *)/g," "):"",D.endcap=re.lineCap.replace("butt","flat"),D.joinstyle=re.lineJoin):D&&(_e.removeChild(D),m._stroke=null),re.fill?(G||(G=m._fill=Qa("fill")),_e.appendChild(G),G.color=re.fillColor||re.color,G.opacity=re.fillOpacity):G&&(_e.removeChild(G),m._fill=null)},_updateCircle:function(m){var D=m._point.round(),G=Math.round(m._radius),re=Math.round(m._radiusY||G);this._setPath(m,m._empty()?"M0 0":"AL "+D.x+","+D.y+" "+G+","+re+" 0,23592600")},_setPath:function(m,D){m._path.v=D},_bringToFront:function(m){de(m._container)},_bringToBack:function(m){ge(m._container)}},Xo=Xe.vml?Qa:en,To=Ea.extend({_initContainer:function(){this._container=Xo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){q(this._container),$n(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ea.prototype._update.call(this);var m=this._bounds,D=m.getSize(),G=this._container;(!this._svgSize||!this._svgSize.equals(D))&&(this._svgSize=D,G.setAttribute("width",D.x),G.setAttribute("height",D.y)),kt(G,m.min),G.setAttribute("viewBox",[m.min.x,m.min.y,D.x,D.y].join(" ")),this.fire("update")}},_initPath:function(m){var D=m._path=Xo("path");m.options.className&&me(D,m.options.className),m.options.interactive&&me(D,"leaflet-interactive"),this._updateStyle(m),this._layers[Oe(m)]=m},_addPath:function(m){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(m._path),m.addInteractiveTarget(m._path)},_removePath:function(m){q(m._path),m.removeInteractiveTarget(m._path),delete this._layers[Oe(m)]},_updatePath:function(m){m._project(),m._update()},_updateStyle:function(m){var D=m._path,G=m.options;D&&(G.stroke?(D.setAttribute("stroke",G.color),D.setAttribute("stroke-opacity",G.opacity),D.setAttribute("stroke-width",G.weight),D.setAttribute("stroke-linecap",G.lineCap),D.setAttribute("stroke-linejoin",G.lineJoin),G.dashArray?D.setAttribute("stroke-dasharray",G.dashArray):D.removeAttribute("stroke-dasharray"),G.dashOffset?D.setAttribute("stroke-dashoffset",G.dashOffset):D.removeAttribute("stroke-dashoffset")):D.setAttribute("stroke","none"),G.fill?(D.setAttribute("fill",G.fillColor||G.color),D.setAttribute("fill-opacity",G.fillOpacity),D.setAttribute("fill-rule",G.fillRule||"evenodd")):D.setAttribute("fill","none"))},_updatePoly:function(m,D){this._setPath(m,_n(m._parts,D))},_updateCircle:function(m){var D=m._point,G=Math.max(Math.round(m._radius),1),_e="a"+G+","+(Math.max(Math.round(m._radiusY),1)||G)+" 0 1,0 ",Ue=m._empty()?"M0 0":"M"+(D.x-G)+","+D.y+_e+2*G+",0 "+_e+2*-G+",0 ";this._setPath(m,Ue)},_setPath:function(m,D){m._path.setAttribute("d",D)},_bringToFront:function(m){de(m._path)},_bringToBack:function(m){ge(m._path)}});function tl(m){return Xe.svg||Xe.vml?new To(m):null}Xe.vml&&To.include(el),vr.include({getRenderer:function(m){var D=m.options.renderer||this._getPaneRenderer(m.options.pane)||this.options.renderer||this._renderer;return D||(D=this._renderer=this._createRenderer()),this.hasLayer(D)||this.addLayer(D),D},_getPaneRenderer:function(m){if("overlayPane"===m||void 0===m)return!1;var D=this._paneRenderers[m];return void 0===D&&(D=this._createRenderer({pane:m}),this._paneRenderers[m]=D),D},_createRenderer:function(m){return this.options.preferCanvas&&Fl(m)||tl(m)}});var ua=uo.extend({initialize:function(m,D){uo.prototype.initialize.call(this,this._boundsToLatLngs(m),D)},setBounds:function(m){return this.setLatLngs(this._boundsToLatLngs(m))},_boundsToLatLngs:function(m){return[(m=ei(m)).getSouthWest(),m.getNorthWest(),m.getNorthEast(),m.getSouthEast()]}});To.create=Xo,To.pointsToPath=_n,la.geometryToLayer=Ja,la.coordsToLatLng=lc,la.coordsToLatLngs=ys,la.latLngToCoords=Cc,la.latLngsToCoords=ml,la.getFeature=Oo,la.asFeature=ho,vr.mergeOptions({boxZoom:!0});var bl=bo.extend({initialize:function(m){this._map=m,this._container=m._container,this._pane=m._panes.overlayPane,this._resetStateTimeout=0,m.on("unload",this._destroy,this)},addHooks:function(){qn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$n(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(m){if(!m.shiftKey||1!==m.which&&1!==m.button)return!1;this._clearDeferredResetState(),this._resetState(),ii(),En(),this._startPoint=this._map.mouseEventToContainerPoint(m),qn(document,{contextmenu:ao,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(m){this._moved||(this._moved=!0,this._box=$("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(m);var D=new xn(this._point,this._startPoint),G=D.getSize();kt(this._box,D.min),this._box.style.width=G.x+"px",this._box.style.height=G.y+"px"},_finish:function(){this._moved&&(q(this._box),Se(this._container,"leaflet-crosshair")),wi(),Fn(),$n(document,{contextmenu:ao,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(m){if((1===m.which||1===m.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(t(this._resetState,this),0);var D=new Vn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(D).fire("boxzoomend",{boxZoomBounds:D})}},_onKeyDown:function(m){27===m.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vr.addInitHook("addHandler","boxZoom",bl),vr.mergeOptions({doubleClickZoom:!0});var Sa=bo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(m){var D=this._map,G=D.getZoom(),re=D.options.zoomDelta,_e=m.originalEvent.shiftKey?G-re:G+re;"center"===D.options.doubleClickZoom?D.setZoom(_e):D.setZoomAround(m.containerPoint,_e)}});vr.addInitHook("addHandler","doubleClickZoom",Sa),vr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Na=bo.extend({addHooks:function(){if(!this._draggable){var m=this._map;this._draggable=new Pa(m._mapPane,m._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),m.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),m.on("zoomend",this._onZoomEnd,this),m.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Se(this._map._container,"leaflet-grab"),Se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var m=this._map;if(m._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var D=ei(this._map.options.maxBounds);this._offsetLimit=mn(this._map.latLngToContainerPoint(D.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(D.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;m.fire("movestart").fire("dragstart"),m.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(m){if(this._map.options.inertia){var D=this._lastTime=+new Date,G=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(G),this._times.push(D),this._prunePositions(D)}this._map.fire("move",m).fire("drag",m)},_prunePositions:function(m){for(;this._positions.length>1&&m-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var m=this._map.getSize().divideBy(2),D=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=D.subtract(m).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(m,D){return m-(m-D)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var m=this._draggable._newPos.subtract(this._draggable._startPos),D=this._offsetLimit;m.x<D.min.x&&(m.x=this._viscousLimit(m.x,D.min.x)),m.y<D.min.y&&(m.y=this._viscousLimit(m.y,D.min.y)),m.x>D.max.x&&(m.x=this._viscousLimit(m.x,D.max.x)),m.y>D.max.y&&(m.y=this._viscousLimit(m.y,D.max.y)),this._draggable._newPos=this._draggable._startPos.add(m)}},_onPreDragWrap:function(){var m=this._worldWidth,D=Math.round(m/2),G=this._initialWorldOffset,re=this._draggable._newPos.x,_e=(re-D+G)%m+D-G,Ue=(re+D+G)%m-D-G,Vt=Math.abs(_e+G)<Math.abs(Ue+G)?_e:Ue;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Vt},_onDragEnd:function(m){var D=this._map,G=D.options,re=!G.inertia||m.noInertia||this._times.length<2;if(D.fire("dragend",m),re)D.fire("moveend");else{this._prunePositions(+new Date);var _e=this._lastPos.subtract(this._positions[0]),Vt=G.easeLinearity,oi=_e.multiplyBy(Vt/((this._lastTime-this._times[0])/1e3)),ki=oi.distanceTo([0,0]),sn=Math.min(G.inertiaMaxSpeed,ki),Dn=oi.multiplyBy(sn/ki),Bn=sn/(G.inertiaDeceleration*Vt),mr=Dn.multiplyBy(-Bn/2).round();mr.x||mr.y?(mr=D._limitOffset(mr,D.options.maxBounds),jt(function(){D.panBy(mr,{duration:Bn,easeLinearity:Vt,noMoveStart:!0,animate:!0})})):D.fire("moveend")}}});vr.addInitHook("addHandler","dragging",Na),vr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Sc=bo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(m){this._map=m,this._setPanDelta(m.options.keyboardPanDelta),this._setZoomDelta(m.options.zoomDelta)},addHooks:function(){var m=this._map._container;m.tabIndex<=0&&(m.tabIndex="0"),qn(m,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$n(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var m=document.body,D=document.documentElement,G=m.scrollTop||D.scrollTop,re=m.scrollLeft||D.scrollLeft;this._map._container.focus(),window.scrollTo(re,G)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(m){var re,_e,D=this._panKeys={},G=this.keyCodes;for(re=0,_e=G.left.length;re<_e;re++)D[G.left[re]]=[-1*m,0];for(re=0,_e=G.right.length;re<_e;re++)D[G.right[re]]=[m,0];for(re=0,_e=G.down.length;re<_e;re++)D[G.down[re]]=[0,m];for(re=0,_e=G.up.length;re<_e;re++)D[G.up[re]]=[0,-1*m]},_setZoomDelta:function(m){var re,_e,D=this._zoomKeys={},G=this.keyCodes;for(re=0,_e=G.zoomIn.length;re<_e;re++)D[G.zoomIn[re]]=m;for(re=0,_e=G.zoomOut.length;re<_e;re++)D[G.zoomOut[re]]=-m},_addHooks:function(){qn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$n(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(m){if(!(m.altKey||m.ctrlKey||m.metaKey)){var re,D=m.keyCode,G=this._map;if(D in this._panKeys){if(!G._panAnim||!G._panAnim._inProgress)if(re=this._panKeys[D],m.shiftKey&&(re=qi(re).multiplyBy(3)),G.options.maxBounds&&(re=G._limitOffset(qi(re),G.options.maxBounds)),G.options.worldCopyJump){var _e=G.wrapLatLng(G.unproject(G.project(G.getCenter()).add(re)));G.panTo(_e)}else G.panBy(re)}else if(D in this._zoomKeys)G.setZoom(G.getZoom()+(m.shiftKey?3:1)*this._zoomKeys[D]);else{if(27!==D||!G._popup||!G._popup.options.closeOnEscapeKey)return;G.closePopup()}ao(m)}}});vr.addInitHook("addHandler","keyboard",Sc),vr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xl=bo.extend({addHooks:function(){qn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$n(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(m){var D=Ml(m),G=this._map.options.wheelDebounceTime;this._delta+=D,this._lastMousePos=this._map.mouseEventToContainerPoint(m),this._startTime||(this._startTime=+new Date);var re=Math.max(G-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(t(this._performZoom,this),re),ao(m)},_performZoom:function(){var m=this._map,D=m.getZoom(),G=this._map.options.zoomSnap||0;m._stop();var _e=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,Ue=G?Math.ceil(_e/G)*G:_e,Vt=m._limitZoom(D+(this._delta>0?Ue:-Ue))-D;this._delta=0,this._startTime=null,Vt&&("center"===m.options.scrollWheelZoom?m.setZoom(D+Vt):m.setZoomAround(this._lastMousePos,D+Vt))}});vr.addInitHook("addHandler","scrollWheelZoom",xl);vr.mergeOptions({tapHold:Xe.touchNative&&Xe.safari&&Xe.mobile,tapTolerance:15});var Ya=bo.extend({addHooks:function(){qn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$n(this._map._container,"touchstart",this._onDown,this)},_onDown:function(m){if(clearTimeout(this._holdTimeout),1===m.touches.length){var D=m.touches[0];this._startPos=this._newPos=new Ci(D.clientX,D.clientY),this._holdTimeout=setTimeout(t(function(){this._cancel(),this._isTapValid()&&(qn(document,"touchend",Zr),qn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",D))},this),600),qn(document,"touchend touchcancel contextmenu",this._cancel,this),qn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function m(){$n(document,"touchend",Zr),$n(document,"touchend touchcancel",m)},_cancel:function(){clearTimeout(this._holdTimeout),$n(document,"touchend touchcancel contextmenu",this._cancel,this),$n(document,"touchmove",this._onMove,this)},_onMove:function(m){var D=m.touches[0];this._newPos=new Ci(D.clientX,D.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(m,D){var G=new MouseEvent(m,{bubbles:!0,cancelable:!0,view:window,screenX:D.screenX,screenY:D.screenY,clientX:D.clientX,clientY:D.clientY});G._simulated=!0,D.target.dispatchEvent(G)}});vr.addInitHook("addHandler","tapHold",Ya),vr.mergeOptions({touchZoom:Xe.touch,bounceAtZoomLimits:!0});var bs=bo.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),qn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),$n(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(m){var D=this._map;if(m.touches&&2===m.touches.length&&!D._animatingZoom&&!this._zooming){var G=D.mouseEventToContainerPoint(m.touches[0]),re=D.mouseEventToContainerPoint(m.touches[1]);this._centerPoint=D.getSize()._divideBy(2),this._startLatLng=D.containerPointToLatLng(this._centerPoint),"center"!==D.options.touchZoom&&(this._pinchStartLatLng=D.containerPointToLatLng(G.add(re)._divideBy(2))),this._startDist=G.distanceTo(re),this._startZoom=D.getZoom(),this._moved=!1,this._zooming=!0,D._stop(),qn(document,"touchmove",this._onTouchMove,this),qn(document,"touchend touchcancel",this._onTouchEnd,this),Zr(m)}},_onTouchMove:function(m){if(m.touches&&2===m.touches.length&&this._zooming){var D=this._map,G=D.mouseEventToContainerPoint(m.touches[0]),re=D.mouseEventToContainerPoint(m.touches[1]),_e=G.distanceTo(re)/this._startDist;if(this._zoom=D.getScaleZoom(_e,this._startZoom),!D.options.bounceAtZoomLimits&&(this._zoom<D.getMinZoom()&&_e<1||this._zoom>D.getMaxZoom()&&_e>1)&&(this._zoom=D._limitZoom(this._zoom)),"center"===D.options.touchZoom){if(this._center=this._startLatLng,1===_e)return}else{var Ue=G._add(re)._divideBy(2)._subtract(this._centerPoint);if(1===_e&&0===Ue.x&&0===Ue.y)return;this._center=D.unproject(D.project(this._pinchStartLatLng,this._zoom).subtract(Ue),this._zoom)}this._moved||(D._moveStart(!0,!1),this._moved=!0),ht(this._animRequest);var Vt=t(D._move,D,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=jt(Vt,this,!0),Zr(m)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,ht(this._animRequest),$n(document,"touchmove",this._onTouchMove,this),$n(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});vr.addInitHook("addHandler","touchZoom",bs),vr.BoxZoom=bl,vr.DoubleClickZoom=Sa,vr.Drag=Na,vr.Keyboard=Sc,vr.ScrollWheelZoom=xl,vr.TapHold=Ya,vr.TouchZoom=bs,Rt.Bounds=xn,Rt.Browser=Xe,Rt.CRS=Wn,Rt.Canvas=Gr,Rt.Circle=Ka,Rt.CircleMarker=Vo,Rt.Class=ri,Rt.Control=Ks,Rt.DivIcon=$o,Rt.DivOverlay=Uo,Rt.DomEvent=gu,Rt.DomUtil=Mr,Rt.Draggable=Pa,Rt.Evented=_i,Rt.FeatureGroup=lo,Rt.GeoJSON=la,Rt.GridLayer=fs,Rt.Handler=bo,Rt.Icon=oa,Rt.ImageOverlay=Eo,Rt.LatLng=Bi,Rt.LatLngBounds=Vn,Rt.Layer=ps,Rt.LayerGroup=Vr,Rt.LineUtil=Pl,Rt.Map=vr,Rt.Marker=aa,Rt.Mixin=zr,Rt.Path=Ws,Rt.Point=Ci,Rt.PolyUtil=Ns,Rt.Polygon=uo,Rt.Polyline=co,Rt.Popup=ca,Rt.PosAnimation=Al,Rt.Projection=Us,Rt.Rectangle=ua,Rt.Renderer=Ea,Rt.SVG=To,Rt.SVGOverlay=Hc,Rt.TileLayer=Ba,Rt.Tooltip=vl,Rt.Transformation=kr,Rt.Util=qt,Rt.VideoOverlay=Fa,Rt.bind=t,Rt.bounds=mn,Rt.canvas=Fl,Rt.circle=function jo(m,D,G){return new Ka(m,D,G)},Rt.circleMarker=function Go(m,D){return new Vo(m,D)},Rt.control=js,Rt.divIcon=function Ca(m){return new $o(m)},Rt.extend=pn,Rt.featureGroup=function(m,D){return new lo(m,D)},Rt.geoJSON=gl,Rt.geoJson=cc,Rt.gridLayer=function So(m){return new fs(m)},Rt.icon=function qa(m){return new oa(m)},Rt.imageOverlay=function(m,D,G){return new Eo(m,D,G)},Rt.latLng=on,Rt.latLngBounds=ei,Rt.layerGroup=function(m,D){return new Vr(m,D)},Rt.map=function Nc(m,D){return new vr(m,D)},Rt.marker=function xc(m,D){return new aa(m,D)},Rt.point=qi,Rt.polygon=function yu(m,D){return new uo(m,D)},Rt.polyline=function wc(m,D){return new co(m,D)},Rt.popup=function(m,D){return new ca(m,D)},Rt.rectangle=function Ro(m,D){return new ua(m,D)},Rt.setOptions=mt,Rt.stamp=Oe,Rt.svg=tl,Rt.svgOverlay=function xu(m,D,G){return new Hc(m,D,G)},Rt.tileLayer=yl,Rt.tooltip=function(m,D){return new vl(m,D)},Rt.transformation=sr,Rt.version="1.9.4",Rt.videoOverlay=function bu(m,D,G){return new Fa(m,D,G)};var vn=window.L;Rt.noConflict=function(){return window.L=vn,this},window.L=Rt}(Yr)},4448:function(oo){oo.exports=function(){"use strict";var Yr,Rt,k;function pn(t,V){if(Yr)if(Rt){var Oe="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Yr+")(sharedChunk); ("+Rt+")(sharedChunk); self.onerror = null;",Me={};Yr(Me),k=V(Me),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(k.workerUrl=window.URL.createObjectURL(new Blob([Oe],{type:"text/javascript"})))}else Rt=V;else Yr=V}return pn(0,function(t){var V=typeof self<"u"?self:{},Oe="2.15.0";let Me;const De={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Me){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Me=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):a}catch{Me=a}}return Me},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!De.API_URL)return null;try{const a=new URL(De.API_URL);return"api.mapbox.cn"===a.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===a.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Be={supported:!1,testSupport:function(a){!nt&&Je&&(mt?Pt(a):Ge=a)}};let Ge,Je,nt=!1,mt=!1;function Pt(a){const n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,Je),a.isContextLost())return;Be.supported=!0}catch{}a.deleteTexture(n),nt=!0}V.document&&(Je=V.document.createElement("img"),Je.onload=function(){Ge&&Pt(Ge),Ge=null,mt=!0},Je.onerror=function(){nt=!0,Ge=null},Je.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ot="01";function vt(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wt=ai;function ai(a,n,u,p){this.cx=3*a,this.bx=3*(u-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(p-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=u,this.p2y=p}ai.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(void 0===n&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var u=a,p=0;p<8;p++){var v=this.sampleCurveX(u)-a;if(Math.abs(v)<n)return u;var E=this.sampleCurveDerivativeX(u);if(Math.abs(E)<1e-6)break;u-=v/E}var A=0,R=1;for(u=a,p=0;p<20&&(v=this.sampleCurveX(u),!(Math.abs(v-a)<n));p++)a>v?A=u:R=u,u=.5*(R-A)+A;return u},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var We=vt(wt),ni=li;function li(a,n){this.x=a,this.y=n}li.prototype={clone:function(){return new li(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,u=a.y-this.y;return n*n+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),u=Math.sin(a),p=u*this.x+n*this.y;return this.x=n*this.x-u*this.y,this.y=p,this},_rotateAround:function(a,n){var u=Math.cos(a),p=Math.sin(a),v=n.y+p*(this.x-n.x)+u*(this.y-n.y);return this.x=n.x+u*(this.x-n.x)-p*(this.y-n.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},li.convert=function(a){return a instanceof li?a:Array.isArray(a)?new li(a[0],a[1]):a};var at=vt(ni);const si=Math.PI/180,Xt=180/Math.PI;function jt(a){return a*si}function ht(a){return a*Xt}const qt=[[0,0],[1,0],[1,1],[0,1]];function ri(a){if(a<=0)return 0;if(a>=1)return 1;const n=a*a,u=n*a;return 4*(a<.5?u:3*(a-n)+u-.75)}function mi(a,n,u,p){const v=new We(a,n,u,p);return function(E){return v.solve(E)}}const Vi=mi(.25,.1,.25,1);function _i(a,n,u){return Math.min(u,Math.max(n,a))}function Ci(a,n,u){return(u=_i((u-a)/(n-a),0,1))*u*(3-2*u)}function Fi(a,n,u){const p=u-n,v=((a-n)%p+p)%p+n;return v===n?u:v}function qi(a,n,u){if(!a.length)return u(null,[]);let p=a.length;const v=new Array(a.length);let E=null;a.forEach((A,R)=>{n(A,(H,j)=>{H&&(E=H),v[R]=j,0==--p&&u(E,v)})})}function xn(a){const n=[];for(const u in a)n.push(a[u]);return n}function mn(a,...n){for(const u of n)for(const p in u)a[p]=u[p];return a}let Vn=1;function ei(){return Vn++}function Bi(){return function a(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function on(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Wn(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Nn(a,n){a.forEach(u=>{n[u]&&(n[u]=n[u].bind(n))})}function An(a,n){return-1!==a.indexOf(n,a.length-n.length)}function Gi(a,n,u){const p={};for(const v in a)p[v]=n.call(u||this,a[v],v,a);return p}function kr(a,n,u){const p={};for(const v in a)n.call(u||this,a[v],v,a)&&(p[v]=a[v]);return p}function sr(a){return Array.isArray(a)?a.map(sr):"object"==typeof a&&a?Gi(a,sr):a}const fr={};function wn(a){fr[a]||(typeof console<"u"&&console.warn(a),fr[a]=!0)}function en(a,n,u){return(u.y-a.y)*(n.x-a.x)>(n.y-a.y)*(u.x-a.x)}function _n(a){let n=0;for(let u,p,v=0,E=a.length,A=E-1;v<E;A=v++)u=a[v],p=a[A],n+=(p.x-u.x)*(u.y+p.y);return n}function Xi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ji(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,v,E)=>{const A=v||E;return n[p]=!A||A.toLowerCase(),""}),n["max-age"]){const u=parseInt(n["max-age"],10);isNaN(u)?delete n["max-age"]:n["max-age"]=u}return n}let Gn=null;function tn(a){if(null==Gn){const n=a.navigator?a.navigator.userAgent:null;Gn=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Gn}function Ti(a){try{const n=V[a];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function gn(a,n){return[a[4*n],a[4*n+1],a[4*n+2],a[4*n+3]]}const Pn="mapbox-tiles";let wr,pr,Dr=500,Ir=50;function or(){try{return V.caches}catch{}}function Tn(){or()&&!wr&&(wr=V.caches.open(Pn))}function ur(a){const n=a.indexOf("?");if(n<0)return a;const p=function(v){const E=v.indexOf("?");return E>0?v.slice(E+1).split("&"):[]}(a).filter(v=>{const E=v.split("=");return"language"===E[0]||"worldview"===E[0]});return p.length?`${a.slice(0,n)}?${p.join("&")}`:a.slice(0,n)}let Rr=1/0;const ks={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ks);class er extends Error{constructor(n,u,p){401===u&&Kt(p)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=u,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const gr=Xi()?()=>self.worker&&self.worker.referrer:()=>("blob:"===V.location.protocol?V.parent:V).location.href,hr=function(a,n){if(!(/^file:/.test(u=a.url)||/^file:/.test(gr())&&!/^\w+:/.test(u))){if(V.fetch&&V.Request&&V.AbortController&&V.Request.prototype.hasOwnProperty("signal"))return function(p,v){const E=new V.AbortController,A=new V.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:gr(),referrerPolicy:p.referrerPolicy,signal:E.signal});let R=!1,H=!1;const j=(ee=A.url).indexOf("sku=")>0&&Kt(ee);var ee;"json"===p.type&&A.headers.set("Accept","application/json");const se=(ve,be,Ae)=>{if(H)return;if(ve&&"SecurityError"!==ve.message&&wn(ve.toString()),be&&Ae)return ce(be);const $e=Date.now();V.fetch(A).then(dt=>{if(dt.ok){const Ot=j?dt.clone():null;return ce(dt,Ot,$e)}return v(new er(dt.statusText,dt.status,p.url))}).catch(dt=>{"AbortError"!==dt.name&&v(new Error(`${dt.message} ${p.url}`))})},ce=(ve,be,Ae)=>{("arrayBuffer"===p.type?ve.arrayBuffer():"json"===p.type?ve.json():ve.text()).then($e=>{H||(be&&Ae&&function(dt,Ot,ct){if(Tn(),!wr)return;const At={status:Ot.status,statusText:Ot.statusText,headers:new V.Headers};Ot.headers.forEach((bi,hi)=>At.headers.set(hi,bi));const Nt=ji(Ot.headers.get("Cache-Control")||"");if(Nt["no-store"])return;Nt["max-age"]&&At.headers.set("Expires",new Date(ct+1e3*Nt["max-age"]).toUTCString());const Bt=At.headers.get("Expires");Bt&&(new Date(Bt).getTime()-ct<42e4||function(bi,hi){if(void 0===pr)try{new Response(new ReadableStream),pr=!0}catch{pr=!1}pr?hi(bi.body):bi.blob().then(hi)}(Ot,bi=>{const hi=new V.Response(bi,At);Tn(),wr&&wr.then(Li=>Li.put(ur(dt.url),hi)).catch(Li=>wn(Li.message))}))}(A,be,Ae),R=!0,v(null,$e,ve.headers.get("Cache-Control"),ve.headers.get("Expires")))}).catch($e=>{H||v(new Error($e.message))})};return j?function(ve,be){if(Tn(),!wr)return be(null);const Ae=ur(ve.url);wr.then($e=>{$e.match(Ae).then(dt=>{const Ot=function(ct){if(!ct)return!1;const At=new Date(ct.headers.get("Expires")||0),Nt=ji(ct.headers.get("Cache-Control")||"");return At>Date.now()&&!Nt["no-cache"]}(dt);$e.delete(Ae),Ot&&$e.put(Ae,dt.clone()),be(null,dt,Ot)}).catch(be)}).catch(be)}(A,se):se(null,null),{cancel:()=>{H=!0,R||E.abort()}}}(a,n);if(Xi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var u;return function(p,v){const E=new V.XMLHttpRequest;E.open(p.method||"GET",p.url,!0),"arrayBuffer"===p.type&&(E.responseType="arraybuffer");for(const A in p.headers)E.setRequestHeader(A,p.headers[A]);return"json"===p.type&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials="include"===p.credentials,E.onerror=()=>{v(new Error(E.statusText))},E.onload=()=>{if((E.status>=200&&E.status<300||0===E.status)&&null!==E.response){let A=E.response;if("json"===p.type)try{A=JSON.parse(E.response)}catch(R){return v(R)}v(null,A,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else v(new er(E.statusText,E.status,p.url))},E.send(p.body),{cancel:()=>E.abort()}}(a,n)},Cr=function(a,n){return hr(mn(a,{type:"arrayBuffer"}),n)};function $r(a){const n=V.document.createElement("a");return n.href=a,n.protocol===V.document.location.protocol&&n.host===V.document.location.host}const Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Ne;Ie=[],Ne=0;const ut=function(a,n){if(Be.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Ne>=De.MAX_PARALLEL_IMAGE_REQUESTS){const E={requestParameters:a,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(E),E}Ne++;let u=!1;const p=()=>{if(!u)for(u=!0,Ne--;Ie.length&&Ne<De.MAX_PARALLEL_IMAGE_REQUESTS;){const E=Ie.shift(),{requestParameters:A,callback:R,cancelled:H}=E;H||(E.cancel=ut(A,R).cancel)}},v=Cr(a,(E,A,R,H)=>{p(),E?n(E):A&&(V.createImageBitmap?function(j,ee){const se=new V.Blob([new Uint8Array(j)],{type:"image/png"});V.createImageBitmap(se).then(ce=>{ee(null,ce)}).catch(ce=>{ee(new Error(`Could not load image because of ${ce.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(A,(j,ee)=>n(j,ee,R,H)):function(j,ee){const se=new V.Image,ce=V.URL;se.onload=()=>{ee(null,se),ce.revokeObjectURL(se.src),se.onload=null,V.requestAnimationFrame(()=>{se.src=Ct})},se.onerror=()=>ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ve=new V.Blob([new Uint8Array(j)],{type:"image/png"});se.src=j.byteLength?ce.createObjectURL(ve):Ct}(A,(j,ee)=>n(j,ee,R,H)))});return{cancel:()=>{v.cancel(),p()}}},lt="NO_ACCESS_TOKEN";function zt(a){return 0===a.indexOf("mapbox:")}function Kt(a){return De.API_URL_REGEX.test(a)}function Jt(a){return De.API_CDN_URL_REGEX.test(a)}function pt(a){return De.API_STYLE_REGEX.test(a)&&!ui(a)}function ui(a){return De.API_SPRITE_REGEX.test(a)}const Hi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ui(a){const n=a.match(Hi);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function di(a){const n=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${n}`}const un="mapbox.eventData";function Et(a){if(!a)return null;const n=a.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(V.atob(n[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class St{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const u=Et(De.ACCESS_TOKEN);let p="";return p=u&&u.u?V.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(v,E)=>String.fromCharCode(+("0x"+E)))):De.ACCESS_TOKEN||"",n?`${un}.${n}:${p}`:`${un}:${p}`}fetchEventData(){const n=Ti("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(n)try{const v=V.localStorage.getItem(u);v&&(this.eventData=JSON.parse(v));const E=V.localStorage.getItem(p);E&&(this.anonId=E)}catch{wn("Unable to read from LocalStorage")}}saveEventData(){const n=Ti("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(n)try{V.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&V.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{wn("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,u,p,v){if(!De.EVENTS_URL)return;const E=Ui(De.EVENTS_URL);E.params.push(`access_token=${v||De.ACCESS_TOKEN||""}`);const A={event:this.type,created:new Date(n).toISOString()},R=u?mn(A,u):A,H={url:di(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};var ee;this.pendingRequest=(ee=j=>{this.pendingRequest=null,p(j),this.saveEventData(),this.processRequests(v)},hr(mn(H,{method:"POST"}),ee))}queueRequest(n,u){this.queue.push(n),this.processRequests(u)}}const qe=new class extends St{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,n){De.EVENTS_URL&&De.ACCESS_TOKEN&&Array.isArray(a)&&a.some(u=>zt(u)||Kt(u))&&this.queueRequest(Date.now(),n)}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Et(De.ACCESS_TOKEN),u=n?n.u:De.ACCESS_TOKEN;let p=u!==this.eventData.tokenU;Wn(this.anonId)||(this.anonId=Bi(),p=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const E=new Date(this.eventData.lastSuccess),A=new Date(v),R=(v-this.eventData.lastSuccess)/864e5;p=p||R>=1||R<-1||E.getDate()!==A.getDate()}else p=!0;p?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Oe,skuId:ot,"enabled.telemetry":!1,userId:this.anonId},E=>{E||(this.eventData.lastSuccess=v,this.eventData.tokenU=u)},a):this.processRequests()}},Xe=qe.postTurnstileEvent.bind(qe),ze=new class extends St{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,n,u,p){this.skuToken=n,this.errorCb=p,De.EVENTS_URL&&(u||De.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},u):this.errorCb(new Error(lt)))}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{id:n,timestamp:u}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),Wn(this.anonId)||(this.anonId=Bi()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Oe,skuId:ot,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):n&&(this.success[n]=!0)},a))}},He=ze.postMapLoadEvent.bind(ze),ft=new class extends St{constructor(){super("gljs.performance")}postPerformanceEvent(a,n){De.EVENTS_URL&&(a||De.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},a)}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:u}=this.queue.shift(),p=function(v){const E=V.performance.getEntriesByType("resource"),A=V.performance.getEntriesByType("mark"),R=function(ce){const ve={};if(ce)for(const be in ce)if("other"!==be)for(const Ae of ce[be]){const $e=`${be}ResolveRangeMin`,dt=`${be}ResolveRangeMax`,Ot=`${be}RequestCount`,ct=`${be}RequestCachedCount`;ve[$e]=Math.min(ve[$e]||1/0,Ae.startTime),ve[dt]=Math.max(ve[dt]||-1/0,Ae.responseEnd);const At=Nt=>{void 0===ve[Nt]&&(ve[Nt]=0),++ve[Nt]};void 0!==Ae.transferSize&&0===Ae.transferSize&&At(ct),At(Ot)}return ve}(function(ce,ve){const be={};if(ce)for(const Ae of ce){const $e=ve(Ae);void 0===be[$e]&&(be[$e]=[]),be[$e].push(Ae)}return be}(E,fe)),H=V.devicePixelRatio,j=V.navigator.connection||V.navigator.mozConnection||V.navigator.webkitConnection,ee={counters:[],metadata:[],attributes:[]},se=(ce,ve,be)=>{null!=be&&ce.push({name:ve,value:be.toString()})};for(const ce in R)se(ee.counters,ce,R[ce]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(se(ee.counters,"interactionRangeMin",v.interactionRange[0]),se(ee.counters,"interactionRangeMax",v.interactionRange[1])),A)for(const ce of Object.keys(rt)){const ve=rt[ce],be=A.find(Ae=>Ae.name===ve);be&&se(ee.counters,ve,be.startTime)}return se(ee.counters,"visibilityHidden",v.visibilityHidden),se(ee.attributes,"style",function(ce){if(ce)for(const ve of ce){const be=ve.name.split("?")[0];if(pt(be)){const Ae=be.split("/").slice(-2);if(2===Ae.length)return`mapbox://styles/${Ae[0]}/${Ae[1]}`}}}(E)),se(ee.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),se(ee.attributes,"fogEnabled",v.fogEnabled?"true":"false"),se(ee.attributes,"projection",v.projection),se(ee.attributes,"zoom",v.zoom),se(ee.metadata,"devicePixelRatio",H),se(ee.metadata,"connectionEffectiveType",j?j.effectiveType:void 0),se(ee.metadata,"navigatorUserAgent",V.navigator.userAgent),se(ee.metadata,"screenWidth",V.screen.width),se(ee.metadata,"screenHeight",V.screen.height),se(ee.metadata,"windowWidth",V.innerWidth),se(ee.metadata,"windowHeight",V.innerHeight),se(ee.metadata,"mapWidth",v.width/H),se(ee.metadata,"mapHeight",v.height/H),se(ee.metadata,"webglRenderer",v.renderer),se(ee.metadata,"webglVendor",v.vendor),se(ee.metadata,"sdkVersion",Oe),se(ee.metadata,"sdkIdentifier","mapbox-gl-js"),ee}(u);for(const v of p.metadata);for(const v of p.counters);for(const v of p.attributes);this.postEvent(n,p,()=>{},a)}},Yt=ft.postPerformanceEvent.bind(ft),xi=new class extends St{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,n,u,p){if(!De.API_URL||!De.SESSION_PATH)return;const v=Ui(De.API_URL+De.SESSION_PATH);v.params.push(`sku=${n||""}`),v.params.push(`access_token=${p||De.ACCESS_TOKEN||""}`);const E={url:di(v),headers:{"Content-Type":"text/plain"}};var R;this.pendingRequest=(R=A=>{this.pendingRequest=null,u(A),this.saveEventData(),this.processRequests(p)},hr(mn(E,{method:"GET"}),R))}getSessionAPI(a,n,u,p){this.skuToken=n,this.errorCb=p,De.SESSION_PATH&&De.API_URL&&(u||De.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},u):this.errorCb(new Error(lt)))}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{id:n,timestamp:u}=this.queue.shift();n&&this.success[n]||this.getSession(u,this.skuToken,p=>{p?this.errorCb(p):n&&(this.success[n]=!0)},a)}},pi=xi.getSessionAPI.bind(xi),Pi=new Set,rt={create:"create",load:"load",fullLoad:"fullLoad"},yt={mark(a){V.performance.mark(a)},measure(a,n,u){V.performance.measure(a,n,u)}};function fe(a){const n=a.name.split("?")[0];return Jt(n)&&n.includes("mapbox-gl.js")?"javascript":Jt(n)&&n.includes("mapbox-gl.css")?"css":De.API_FONTS_REGEX.test(n)?"fontRange":ui(n)?"sprite":pt(n)?"style":De.API_TILEJSON_REGEX.test(n)?"tilejson":"other"}const it=V.performance;function Tt(a){const n=a?a.url.toString():void 0;return it.getEntriesByName(n)}let Pe,Lt,le,o;const c={now:()=>void 0!==le?le:V.performance.now(),setNow(a){le=a},restoreNow(){le=void 0},frame(a){const n=V.requestAnimationFrame(a);return{cancel:()=>V.cancelAnimationFrame(n)}},getImageData(a,n=0){const{width:u,height:p}=a;o||(o=V.document.createElement("canvas"));const v=o.getContext("2d",{willReadFrequently:!0});if(!v)throw new Error("failed to create canvas 2d context");return(u>o.width||p>o.height)&&(o.width=u,o.height=p),v.clearRect(-n,-n,u+2*n,p+2*n),v.drawImage(a,0,0,u,p),v.getImageData(-n,-n,u+2*n,p+2*n)},resolveURL:a=>(Pe||(Pe=V.document.createElement("a")),Pe.href=a,Pe.href),get devicePixelRatio(){return V.devicePixelRatio},get prefersReducedMotion(){return!!V.matchMedia&&(null==Lt&&(Lt=V.matchMedia("(prefers-reduced-motion: reduce)")),Lt.matches)}};function h(a,n,u){u[a]&&-1!==u[a].indexOf(n)||(u[a]=u[a]||[],u[a].push(n))}function _(a,n,u){if(u&&u[a]){const p=u[a].indexOf(n);-1!==p&&u[a].splice(p,1)}}class b{constructor(n,u={}){mn(this,u),this.type=n}}class x extends b{constructor(n,u={}){super("error",mn({error:n},u))}}class M{on(n,u){return this._listeners=this._listeners||{},h(n,u,this._listeners),this}off(n,u){return _(n,u,this._listeners),_(n,u,this._oneTimeListeners),this}once(n,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},h(n,u,this._oneTimeListeners),this):new Promise(p=>this.once(n,p))}fire(n,u){"string"==typeof n&&(n=new b(n,u||{}));const p=n.type;if(this.listens(p)){n.target=this;const v=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const R of v)R.call(this,n);const E=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const R of E)_(p,R,this._oneTimeListeners),R.call(this,n);const A=this._eventedParent;A&&(mn(n,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),A.fire(n))}else n instanceof x&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,u){return this._eventedParent=n,this._eventedParentData=u,this}}var I=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function F(a,...n){for(const u of n)for(const p in u)a[p]=u[p];return a}function U(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function $(a){if(Array.isArray(a))return a.map($);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const u in a)n[u]=$(a[u]);return n}return U(a)}class q extends Error{constructor(n,u){super(u),this.message=u,this.key=n}}var ne=q;class de{constructor(n,u=[]){this.parent=n,this.bindings={};for(const[p,v]of u)this.bindings[p]=v}concat(n){return new de(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var ge=de;const we={kind:"null"},me={kind:"number"},Se={kind:"string"},N={kind:"boolean"},Q={kind:"color"},pe={kind:"object"},xe={kind:"value"},Le={kind:"collator"},Ze={kind:"formatted"},kt={kind:"resolvedImage"};function It(a,n){return{kind:"array",itemType:a,N:n}}function ii(a){if("array"===a.kind){const n=ii(a.itemType);return"number"==typeof a.N?`array<${n}, ${a.N}>`:"value"===a.itemType.kind?"array":`array<${n}>`}return a.kind}const wi=[we,me,Se,N,Q,Ze,pe,It(xe),kt];function Mi(a,n){if("error"===n.kind)return null;if("array"===a.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!Mi(a.itemType,n.itemType))&&("number"!=typeof a.N||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if("value"===a.kind)for(const u of wi)if(!Mi(u,n))return null}return`Expected ${ii(a)} but found ${ii(n)} instead.`}function dn(a,n){return n.some(u=>u.kind===a.kind)}function En(a,n){return n.some(u=>"null"===u?null===a:"array"===u?Array.isArray(a):"object"===u?a&&!Array.isArray(a)&&"object"==typeof a:u===typeof a)}var Fn,Jn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ar(a){return(a=Math.round(a))<0?0:a>255?255:a}function lr(a){return ar("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function Lr(a){return(n="%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a))<0?0:n>1?1:n;var n}function Hr(a,n,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?a+(n-a)*u*6:2*u<1?n:3*u<2?a+(n-a)*(2/3-u)*6:a}try{Fn={}.parseCSSColor=function(a){var n,u=a.replace(/ /g,"").toLowerCase();if(u in Jn)return Jn[u].slice();if("#"===u[0])return 4===u.length?(n=parseInt(u.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===u.length&&(n=parseInt(u.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var p=u.indexOf("("),v=u.indexOf(")");if(-1!==p&&v+1===u.length){var E=u.substr(0,p),A=u.substr(p+1,v-(p+1)).split(","),R=1;switch(E){case"rgba":if(4!==A.length)return null;R=Lr(A.pop());case"rgb":return 3!==A.length?null:[lr(A[0]),lr(A[1]),lr(A[2]),R];case"hsla":if(4!==A.length)return null;R=Lr(A.pop());case"hsl":if(3!==A.length)return null;var H=(parseFloat(A[0])%360+360)%360/360,j=Lr(A[1]),ee=Lr(A[2]),se=ee<=.5?ee*(j+1):ee+j-ee*j,ce=2*ee-se;return[ar(255*Hr(ce,se,H+1/3)),ar(255*Hr(ce,se,H)),ar(255*Hr(ce,se,H-1/3)),R];default:return null}}return null}}catch{}class Wr{constructor(n,u,p,v=1){this.r=n,this.g=u,this.b=p,this.a=v}static parse(n){if(!n)return;if(n instanceof Wr)return n;if("string"!=typeof n)return;const u=Fn(n);return u?new Wr(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[n,u,p,v]=this.toArray();return`rgba(${Math.round(n)},${Math.round(u)},${Math.round(p)},${v})`}toArray(){const{r:n,g:u,b:p,a:v}=this;return 0===v?[0,0,0,0]:[255*n/v,255*u/v,255*p/v,v]}toArray01(){const{r:n,g:u,b:p,a:v}=this;return 0===v?[0,0,0,0]:[n/v,u/v,p/v,v]}toArray01PremultipliedAlpha(){const{r:n,g:u,b:p,a:v}=this;return[n,u,p,v]}}Wr.black=new Wr(0,0,0,1),Wr.white=new Wr(1,1,1,1),Wr.transparent=new Wr(0,0,0,0),Wr.red=new Wr(1,0,0,1),Wr.blue=new Wr(0,0,1,1);var Mr=Wr;class qn{constructor(n,u,p){this.sensitivity=n?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,u){return this.collator.compare(n,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class as{constructor(n,u,p,v,E){this.text=n.normalize?n.normalize():n,this.image=u,this.scale=p,this.fontStack=v,this.textColor=E}}class $n{constructor(n){this.sections=n}static fromString(n){return new $n([new as(n,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(n=>0!==n.text.length||n.image&&0!==n.image.name.length)}static factory(n){return n instanceof $n?n:$n.fromString(n)}toString(){return 0===this.sections.length?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const u of this.sections){if(u.image){n.push(["image",u.image.name]);continue}n.push(u.text);const p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toArray())),n.push(p)}return n}}class Xr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Xr({name:n,available:!1}):null}serialize(){return["image",this.name]}}function ul(a,n,u,p){return"number"==typeof a&&a>=0&&a<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof u&&u>=0&&u<=255?void 0===p||"number"==typeof p&&p>=0&&p<=1?null:`Invalid rgba value [${[a,n,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof p?[a,n,u,p]:[a,n,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ba(a){if(null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a||a instanceof Mr||a instanceof qn||a instanceof $n||a instanceof Xr)return!0;if(Array.isArray(a)){for(const n of a)if(!ba(n))return!1;return!0}if("object"==typeof a){for(const n in a)if(!ba(a[n]))return!1;return!0}return!1}function hs(a){if(null===a)return we;if("string"==typeof a)return Se;if("boolean"==typeof a)return N;if("number"==typeof a)return me;if(a instanceof Mr)return Q;if(a instanceof qn)return Le;if(a instanceof $n)return Ze;if(a instanceof Xr)return kt;if(Array.isArray(a)){const n=a.length;let u;for(const p of a){const v=hs(p);if(u){if(u===v)continue;u=xe;break}u=v}return It(u||xe,n)}return pe}function Yo(a){const n=typeof a;return null===a?"":"string"===n||"number"===n||"boolean"===n?String(a):a instanceof Mr||a instanceof $n||a instanceof Xr?a.toString():JSON.stringify(a)}class rc{constructor(n,u){this.type=n,this.value=u}static parse(n,u){if(2!==n.length)return u.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ba(n[1]))return u.error("invalid value");const p=n[1];let v=hs(p);const E=u.expectedType;return"array"!==v.kind||0!==v.N||!E||"array"!==E.kind||"number"==typeof E.N&&0!==E.N||(v=E),new rc(v,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Mr?["rgba"].concat(this.value.toArray()):this.value instanceof $n?this.value.serialize():this.value}}var Io=rc,Zr=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const ao={string:Se,number:me,boolean:N,object:pe};class dl{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");let p,v=1;const E=n[0];if("array"===E){let R,H;if(n.length>2){const j=n[1];if("string"!=typeof j||!(j in ao)||"object"===j)return u.error('The item type argument of "array" must be one of string, number, boolean',1);R=ao[j],v++}else R=xe;if(n.length>3){if(null!==n[2]&&("number"!=typeof n[2]||n[2]<0||n[2]!==Math.floor(n[2])))return u.error('The length argument to "array" must be a positive integer literal',2);H=n[2],v++}p=It(R,H)}else p=ao[E];const A=[];for(;v<n.length;v++){const R=u.parse(n[v],v,xe);if(!R)return null;A.push(R)}return new dl(p,A)}evaluate(n){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(n);if(!Mi(this.type,hs(p)))return p;if(u===this.args.length-1)throw new Zr(`Expected value to be of type ${ii(this.type)}, but found ${ii(hs(p))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,u=[n.kind];if("array"===n.kind){const p=n.itemType;if("string"===p.kind||"number"===p.kind||"boolean"===p.kind){u.push(p.kind);const v=n.N;("number"==typeof v||this.args.length>1)&&u.push(v)}}return u.concat(this.args.map(p=>p.serialize()))}}var Oa=dl;class ia{constructor(n){this.type=Ze,this.sections=n}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const p=n[1];if(!Array.isArray(p)&&"object"==typeof p)return u.error("First argument must be an image or text section.");const v=[];let E=!1;for(let A=1;A<=n.length-1;++A){const R=n[A];if(E&&"object"==typeof R&&!Array.isArray(R)){E=!1;let H=null;if(R["font-scale"]&&(H=u.parse(R["font-scale"],1,me),!H))return null;let j=null;if(R["text-font"]&&(j=u.parse(R["text-font"],1,It(Se)),!j))return null;let ee=null;if(R["text-color"]&&(ee=u.parse(R["text-color"],1,Q),!ee))return null;const se=v[v.length-1];se.scale=H,se.font=j,se.textColor=ee}else{const H=u.parse(n[A],1,xe);if(!H)return null;const j=H.type.kind;if("string"!==j&&"value"!==j&&"null"!==j&&"resolvedImage"!==j)return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,v.push({content:H,scale:null,font:null,textColor:null})}}return new ia(v)}evaluate(n){return new $n(this.sections.map(u=>{const p=u.content.evaluate(n);return hs(p)===kt?new as("",p,null,null,null):new as(Yo(p),null,u.scale?u.scale.evaluate(n):null,u.font?u.font.evaluate(n).join(","):null,u.textColor?u.textColor.evaluate(n):null)}))}eachChild(n){for(const u of this.sections)n(u.content),u.scale&&n(u.scale),u.font&&n(u.font),u.textColor&&n(u.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const u of this.sections){n.push(u.content.serialize());const p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),n.push(p)}return n}}class Ml{constructor(n){this.type=kt,this.input=n}static parse(n,u){if(2!==n.length)return u.error("Expected two arguments.");const p=u.parse(n[1],1,Se);return p?new Ml(p):u.error("No image name provided.")}evaluate(n){const u=this.input.evaluate(n),p=Xr.fromString(u);return p&&n.availableImages&&(p.available=n.availableImages.indexOf(u)>-1),p}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const _c={"to-boolean":N,"to-color":Q,"to-number":me,"to-string":Se};class gu{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const p=n[0];if(("to-boolean"===p||"to-string"===p)&&2!==n.length)return u.error("Expected one argument.");const v=_c[p],E=[];for(let A=1;A<n.length;A++){const R=u.parse(n[A],A,xe);if(!R)return null;E.push(R)}return new gu(v,E)}evaluate(n){if("boolean"===this.type.kind)return!!this.args[0].evaluate(n);if("color"===this.type.kind){let u,p;for(const v of this.args){if(u=v.evaluate(n),p=null,u instanceof Mr)return u;if("string"==typeof u){const E=n.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ul(u[0],u[1],u[2],u[3]),!p))return new Mr(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Zr(p||`Could not parse color from value '${"string"==typeof u?u:String(JSON.stringify(u))}'`)}if("number"===this.type.kind){let u=null;for(const p of this.args){if(u=p.evaluate(n),null===u)return 0;const v=Number(u);if(!isNaN(v))return v}throw new Zr(`Could not convert ${JSON.stringify(u)} to number.`)}return"formatted"===this.type.kind?$n.fromString(Yo(this.args[0].evaluate(n))):"resolvedImage"===this.type.kind?Xr.fromString(Yo(this.args[0].evaluate(n))):Yo(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if("formatted"===this.type.kind)return new ia([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ml(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(u=>{n.push(u.serialize())}),n}}var Al=gu;const vr=["Unknown","Point","LineString","Polygon"];var Nc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?vr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:u,y:p}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*n-a[0])+this.featureDistanceData.bearing[1]*(p*n-a[1])}return 0}parseColor(a){let n=this._parseColorCache[a];return n||(n=this._parseColorCache[a]=Mr.parse(a)),n}};class Ks{constructor(n,u,p,v){this.name=n,this.type=u,this._evaluate=p,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,u){const p=n[0],v=Ks.definitions[p];if(!v)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(v)?v[0]:v.type,A=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,R=A.filter(([j])=>!Array.isArray(j)||j.length===n.length-1);let H=null;for(const[j,ee]of R){H=new Ol(u.registry,u.path,null,u.scope);const se=[];let ce=!1;for(let ve=1;ve<n.length;ve++){const be=n[ve],Ae=Array.isArray(j)?j[ve-1]:j.type,$e=H.parse(be,1+se.length,Ae);if(!$e){ce=!0;break}se.push($e)}if(!ce)if(Array.isArray(j)&&j.length!==se.length)H.error(`Expected ${j.length} arguments, but found ${se.length} instead.`);else{for(let ve=0;ve<se.length;ve++){const be=Array.isArray(j)?j[ve]:j.type,Ae=se[ve];H.concat(ve+1).checkSubtype(be,Ae.type)}if(0===H.errors.length)return new Ks(p,E,ee,se)}}if(1===R.length)u.errors.push(...H.errors);else{const j=(R.length?R:A).map(([se])=>{return ce=se,Array.isArray(ce)?`(${ce.map(ii).join(", ")})`:`(${ii(ce.type)}...)`;var ce}).join(" | "),ee=[];for(let se=1;se<n.length;se++){const ce=u.parse(n[se],1+ee.length);if(!ce)return null;ee.push(ii(ce.type))}u.error(`Expected arguments of type ${j}, but found (${ee.join(", ")}) instead.`)}return null}static register(n,u){Ks.definitions=u;for(const p in u)n[p]=Ks}}var js=Ks;class sc{constructor(n,u,p){this.type=Le,this.locale=p,this.caseSensitive=n,this.diacriticSensitive=u}static parse(n,u){if(2!==n.length)return u.error("Expected one argument.");const p=n[1];if("object"!=typeof p||Array.isArray(p))return u.error("Collator options argument must be an object.");const v=u.parse(void 0!==p["case-sensitive"]&&p["case-sensitive"],1,N);if(!v)return null;const E=u.parse(void 0!==p["diacritic-sensitive"]&&p["diacritic-sensitive"],1,N);if(!E)return null;let A=null;return p.locale&&(A=u.parse(p.locale,1,Se),!A)?null:new sc(v,E,A)}evaluate(n){return new qn(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const na=8192;function hl(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Dl(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function $a(a,n){const u=(180+a[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(u*v*na),Math.round(p*v*na)]}function vu(a,n,u){const p=a[0]-n[0],v=a[1]-n[1],E=a[0]-u[0],A=a[1]-u[1];return p*A-E*v==0&&p*E<=0&&v*A<=0}function oc(a,n){let u=!1;for(let A=0,R=n.length;A<R;A++){const H=n[A];for(let j=0,ee=H.length;j<ee-1;j++){if(vu(a,H[j],H[j+1]))return!1;(v=H[j])[1]>(p=a)[1]!=(E=H[j+1])[1]>p[1]&&p[0]<(E[0]-v[0])*(p[1]-v[1])/(E[1]-v[1])+v[0]&&(u=!u)}}var p,v,E;return u}function ra(a,n){for(let u=0;u<n.length;u++)if(oc(a,n[u]))return!0;return!1}function Il(a,n,u,p){const v=p[0]-u[0],E=p[1]-u[1],A=(a[0]-u[0])*E-v*(a[1]-u[1]),R=(n[0]-u[0])*E-v*(n[1]-u[1]);return A>0&&R<0||A<0&&R>0}function bo(a,n,u){for(const j of u)for(let ee=0;ee<j.length-1;++ee)if((R=[(A=j[ee+1])[0]-(E=j[ee])[0],A[1]-E[1]])[0]*(H=[(v=n)[0]-(p=a)[0],v[1]-p[1]])[1]-R[1]*H[0]!=0&&Il(p,v,E,A)&&Il(E,A,p,v))return!0;var p,v,E,A,R,H;return!1}function zr(a,n){for(let u=0;u<a.length;++u)if(!oc(a[u],n))return!1;for(let u=0;u<a.length-1;++u)if(bo(a[u],a[u+1],n))return!1;return!0}function Zu(a,n){for(let u=0;u<n.length;u++)if(zr(a,n[u]))return!0;return!1}function Pa(a,n,u){const p=[];for(let v=0;v<a.length;v++){const E=[];for(let A=0;A<a[v].length;A++){const R=$a(a[v][A],u);hl(n,R),E.push(R)}p.push(E)}return p}function yc(a,n,u){const p=[];for(let v=0;v<a.length;v++){const E=Pa(a[v],n,u);p.push(E)}return p}function bc(a,n,u,p){if(a[0]<u[0]||a[0]>u[2]){const v=.5*p;let E=a[0]-u[0]>v?-p:u[0]-a[0]>v?p:0;0===E&&(E=a[0]-u[2]>v?-p:u[2]-a[0]>v?p:0),a[0]+=E}hl(n,a)}function sa(a,n,u,p){const v=Math.pow(2,p.z)*na,E=[p.x*na,p.y*na],A=[];if(!a)return A;for(const R of a)for(const H of R){const j=[H.x+E[0],H.y+E[1]];bc(j,n,u,v),A.push(j)}return A}function Ns(a,n,u,p){const v=Math.pow(2,p.z)*na,E=[p.x*na,p.y*na],A=[];if(!a)return A;for(const H of a){const j=[];for(const ee of H){const se=[ee.x+E[0],ee.y+E[1]];hl(n,se),j.push(se)}A.push(j)}if(n[2]-n[0]<=v/2){(R=n)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const H of A)for(const j of H)bc(j,n,u,v)}var R;return A}class Ho{constructor(n,u){this.type=N,this.geojson=n,this.geometries=u}static parse(n,u){if(2!==n.length)return u.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ba(n[1])){const p=n[1];if("FeatureCollection"===p.type)for(let v=0;v<p.features.length;++v){const E=p.features[v].geometry.type;if("Polygon"===E||"MultiPolygon"===E)return new Ho(p,p.features[v].geometry)}else if("Feature"===p.type){const v=p.geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new Ho(p,p.geometry)}else if("Polygon"===p.type||"MultiPolygon"===p.type)return new Ho(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(null!=n.geometry()&&null!=n.canonicalID()){if("Point"===n.geometryType())return function(u,p){const v=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],A=u.canonicalID();if(!A)return!1;if("Polygon"===p.type){const R=Pa(p.coordinates,E,A),H=sa(u.geometry(),v,E,A);if(!Dl(v,E))return!1;for(const j of H)if(!oc(j,R))return!1}if("MultiPolygon"===p.type){const R=yc(p.coordinates,E,A),H=sa(u.geometry(),v,E,A);if(!Dl(v,E))return!1;for(const j of H)if(!ra(j,R))return!1}return!0}(n,this.geometries);if("LineString"===n.geometryType())return function(u,p){const v=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],A=u.canonicalID();if(!A)return!1;if("Polygon"===p.type){const R=Pa(p.coordinates,E,A),H=Ns(u.geometry(),v,E,A);if(!Dl(v,E))return!1;for(const j of H)if(!zr(j,R))return!1}if("MultiPolygon"===p.type){const R=yc(p.coordinates,E,A),H=Ns(u.geometry(),v,E,A);if(!Dl(v,E))return!1;for(const j of H)if(!Zu(j,R))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Lo=Ho;function pl(a){if(a instanceof js&&("get"===a.name&&1===a.args.length||"feature-state"===a.name||"has"===a.name&&1===a.args.length||"properties"===a.name||"geometry-type"===a.name||"id"===a.name||/^filter-/.test(a.name))||a instanceof Lo)return!1;let n=!0;return a.eachChild(u=>{n&&!pl(u)&&(n=!1)}),n}function Ra(a){if(a instanceof js&&"feature-state"===a.name)return!1;let n=!0;return a.eachChild(u=>{n&&!Ra(u)&&(n=!1)}),n}function xa(a,n){if(a instanceof js&&n.indexOf(a.name)>=0)return!1;let u=!0;return a.eachChild(p=>{u&&!xa(p,n)&&(u=!1)}),u}class Ll{constructor(n,u){this.type=u.type,this.name=n,this.boundExpression=u}static parse(n,u){if(2!==n.length||"string"!=typeof n[1])return u.error("'var' expression requires exactly one string literal argument.");const p=n[1];return u.scope.has(p)?new Ll(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var xo=Ll;class Yn{constructor(n,u=[],p,v=new ge,E=[]){this.registry=n,this.path=u,this.key=u.map(A=>`[${A}]`).join(""),this.scope=v,this.errors=E,this.expectedType=p}parse(n,u,p,v,E={}){return u?this.concat(u,p,v)._parse(n,E):this._parse(n,E)}_parse(n,u){function p(v,E,A){return"assert"===A?new Oa(E,[v]):"coerce"===A?new Al(E,[v]):v}if(null!==n&&"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n||(n=["literal",n]),Array.isArray(n)){if(0===n.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if("string"!=typeof v)return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[v];if(E){let A=E.parse(n,this);if(!A)return null;if(this.expectedType){const R=this.expectedType,H=A.type;if("string"!==R.kind&&"number"!==R.kind&&"boolean"!==R.kind&&"object"!==R.kind&&"array"!==R.kind||"value"!==H.kind)if("color"!==R.kind&&"formatted"!==R.kind&&"resolvedImage"!==R.kind||"value"!==H.kind&&"string"!==H.kind){if(this.checkSubtype(R,H))return null}else A=p(A,R,u.typeAnnotation||"coerce");else A=p(A,R,u.typeAnnotation||"assert")}if(!(A instanceof Io)&&"resolvedImage"!==A.type.kind&&ls(A)){const R=new Nc;try{A=new Io(A.type,A.evaluate(R))}catch(H){return this.error(H.message),null}}return A}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===n?"'undefined' value invalid. Use null instead.":"object"==typeof n?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,u,p){const v="number"==typeof n?this.path.concat(n):this.path,E=p?this.scope.concat(p):this.scope;return new Yn(this.registry,v,u||null,E,this.errors)}error(n,...u){const p=`${this.key}${u.map(v=>`[${v}]`).join("")}`;this.errors.push(new ne(p,n))}checkSubtype(n,u){const p=Mi(n,u);return p&&this.error(p),p}}var Ol=Yn;function ls(a){if(a instanceof xo)return ls(a.boundExpression);if(a instanceof js&&"error"===a.name||a instanceof sc||a instanceof Lo)return!1;const n=a instanceof Al||a instanceof Oa;let u=!0;return a.eachChild(p=>{u=n?u&&ls(p):u&&p instanceof Io}),!!u&&pl(a)&&xa(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Xa(a,n){const u=a.length-1;let p,v,E=0,A=u,R=0;for(;E<=A;)if(R=Math.floor((E+A)/2),p=a[R],v=a[R+1],p<=n){if(R===u||n<v)return R;E=R+1}else{if(!(p>n))throw new Zr("Input is not a number.");A=R-1}return 0}class wo{constructor(n,u,p){this.type=n,this.input=u,this.labels=[],this.outputs=[];for(const[v,E]of p)this.labels.push(v),this.outputs.push(E)}static parse(n,u){if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(n[1],1,me);if(!p)return null;const v=[];let E=null;u.expectedType&&"value"!==u.expectedType.kind&&(E=u.expectedType);for(let A=1;A<n.length;A+=2){const R=1===A?-1/0:n[A],H=n[A+1],j=A,ee=A+1;if("number"!=typeof R)return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(v.length&&v[v.length-1][0]>=R)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const se=u.parse(H,ee,E);if(!se)return null;E=E||se.type,v.push([R,se])}return new wo(E,p,v)}evaluate(n){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(n);const v=this.input.evaluate(n);if(v<=u[0])return p[0].evaluate(n);const E=u.length;return v>=u[E-1]?p[E-1].evaluate(n):p[Xa(u,v)].evaluate(n)}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&n.push(this.labels[u]),n.push(this.outputs[u].serialize());return n}}var Hs=wo;function Or(a,n,u){return a*(1-u)+n*u}var fl=Object.freeze({__proto__:null,array:function(a,n,u){return a.map((p,v)=>Or(p,n[v],u))},color:function(a,n,u){return new Mr(Or(a.r,n.r,u),Or(a.g,n.g,u),Or(a.b,n.b,u),Or(a.a,n.a,u))},number:Or});const zl=4/29,Us=6/29,Co=3*Us*Us,Mt=Us*Us*Us,ac=Math.PI/180,ps=180/Math.PI;function Vr(a){return a>Mt?Math.pow(a,1/3):a/Co+zl}function _u(a){return a>Us?a*a*a:Co*(a-zl)}function lo(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Za(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function oa(a){const n=Za(a.r),u=Za(a.g),p=Za(a.b),v=Vr((.4124564*n+.3575761*u+.1804375*p)/.95047),E=Vr((.2126729*n+.7151522*u+.072175*p)/1);return{l:116*E-16,a:500*(v-E),b:200*(E-Vr((.0193339*n+.119192*u+.9503041*p)/1.08883)),alpha:a.a}}function qa(a){let n=(a.l+16)/116,u=isNaN(a.a)?n:n+a.a/500,p=isNaN(a.b)?n:n-a.b/200;return n=1*_u(n),u=.95047*_u(u),p=1.08883*_u(p),new Mr(lo(3.2404542*u-1.5371385*n-.4985314*p),lo(-.969266*u+1.8760108*n+.041556*p),lo(.0556434*u-.2040259*n+1.0572252*p),a.alpha)}function zs(a,n,u){const p=n-a;return a+u*(p>180||p<-180?p-360*Math.round(p/360):p)}const wa={forward:oa,reverse:qa,interpolate:function(a,n,u){return{l:Or(a.l,n.l,u),a:Or(a.a,n.a,u),b:Or(a.b,n.b,u),alpha:Or(a.alpha,n.alpha,u)}}},aa={forward:function(a){const{l:n,a:u,b:p}=oa(a),v=Math.atan2(p,u)*ps;return{h:v<0?v+360:v,c:Math.sqrt(u*u+p*p),l:n,alpha:a.a}},reverse:function(a){const n=a.h*ac,u=a.c;return qa({l:a.l,a:Math.cos(n)*u,b:Math.sin(n)*u,alpha:a.alpha})},interpolate:function(a,n,u){return{h:zs(a.h,n.h,u),c:Or(a.c,n.c,u),l:Or(a.l,n.l,u),alpha:Or(a.alpha,n.alpha,u)}}};var xc=Object.freeze({__proto__:null,hcl:aa,lab:wa});class Ws{constructor(n,u,p,v,E){this.type=n,this.operator=u,this.interpolation=p,this.input=v,this.labels=[],this.outputs=[];for(const[A,R]of E)this.labels.push(A),this.outputs.push(R)}static interpolationFactor(n,u,p,v){let E=0;if("exponential"===n.name)E=Vo(u,n.base,p,v);else if("linear"===n.name)E=Vo(u,1,p,v);else if("cubic-bezier"===n.name){const A=n.controlPoints;E=new We(A[0],A[1],A[2],A[3]).solve(Vo(u,1,p,v))}return E}static parse(n,u){let[p,v,E,...A]=n;if(!Array.isArray(v)||0===v.length)return u.error("Expected an interpolation type expression.",1);if("linear"===v[0])v={name:"linear"};else if("exponential"===v[0]){const j=v[1];if("number"!=typeof j)return u.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:j}}else{if("cubic-bezier"!==v[0])return u.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const j=v.slice(1);if(4!==j.length||j.some(ee=>"number"!=typeof ee||ee<0||ee>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:j}}}if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,me),!E)return null;const R=[];let H=null;"interpolate-hcl"===p||"interpolate-lab"===p?H=Q:u.expectedType&&"value"!==u.expectedType.kind&&(H=u.expectedType);for(let j=0;j<A.length;j+=2){const ee=A[j],se=A[j+1],ce=j+3,ve=j+4;if("number"!=typeof ee)return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ce);if(R.length&&R[R.length-1][0]>=ee)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ce);const be=u.parse(se,ve,H);if(!be)return null;H=H||be.type,R.push([ee,be])}return"number"===H.kind||"color"===H.kind||"array"===H.kind&&"number"===H.itemType.kind&&"number"==typeof H.N?new Ws(H,p,v,E,R):u.error(`Type ${ii(H)} is not interpolatable.`)}evaluate(n){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(n);const v=this.input.evaluate(n);if(v<=u[0])return p[0].evaluate(n);const E=u.length;if(v>=u[E-1])return p[E-1].evaluate(n);const A=Xa(u,v),R=Ws.interpolationFactor(this.interpolation,v,u[A],u[A+1]),H=p[A].evaluate(n),j=p[A+1].evaluate(n);return"interpolate"===this.operator?fl[this.type.kind.toLowerCase()](H,j,R):"interpolate-hcl"===this.operator?aa.reverse(aa.interpolate(aa.forward(H),aa.forward(j),R)):wa.reverse(wa.interpolate(wa.forward(H),wa.forward(j),R))}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,n,this.input.serialize()];for(let p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u}}function Vo(a,n,u,p){const v=p-u,E=a-u;return 0===v?0:1===n?E/v:(Math.pow(n,E)-1)/(Math.pow(n,v)-1)}var Go=Ws;class Ka{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expectected at least one argument.");let p=null;const v=u.expectedType;v&&"value"!==v.kind&&(p=v);const E=[];for(const R of n.slice(1)){const H=u.parse(R,1+E.length,p,void 0,{typeAnnotation:"omit"});if(!H)return null;p=p||H.type,E.push(H)}const A=v&&E.some(R=>Mi(v,R.type));return new Ka(A?xe:p,E)}evaluate(n){let u,p=null,v=0;for(const E of this.args){if(v++,p=E.evaluate(n),p&&p instanceof Xr&&!p.available&&(u||(u=p),p=null,v===this.args.length))return u;if(null!==p)break}return p}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(u=>{n.push(u.serialize())}),n}}var jo=Ka;class co{constructor(n,u){this.type=u.type,this.bindings=[].concat(n),this.result=u}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const u of this.bindings)n(u[1]);n(this.result)}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const p=[];for(let E=1;E<n.length-1;E+=2){const A=n[E];if("string"!=typeof A)return u.error(`Expected string, but found ${typeof A} instead.`,E);if(/[^a-zA-Z0-9_]/.test(A))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const R=u.parse(n[E+1],E+1);if(!R)return null;p.push([A,R])}const v=u.parse(n[n.length-1],n.length-1,u.expectedType,p);return v?new co(p,v):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[u,p]of this.bindings)n.push(u,p.serialize());return n.push(this.result.serialize()),n}}var wc=co;class uo{constructor(n,u,p){this.type=n,this.index=u,this.input=p}static parse(n,u){if(3!==n.length)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,me),v=u.parse(n[2],2,It(u.expectedType||xe));return p&&v?new uo(v.type.itemType,p,v):null}evaluate(n){const u=this.index.evaluate(n),p=this.input.evaluate(n);if(u<0)throw new Zr(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new Zr(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new Zr(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var yu=uo;class la{constructor(n,u){this.type=N,this.needle=n,this.haystack=u}static parse(n,u){if(3!==n.length)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,xe),v=u.parse(n[2],2,xe);return p&&v?dn(p.type,[N,Se,me,we,xe])?new la(p,v):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ii(p.type)} instead`):null}evaluate(n){const u=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(null==p)return!1;if(!En(u,["boolean","string","number","null"]))throw new Zr(`Expected first argument to be of type boolean, string, number or null, but found ${ii(hs(u))} instead.`);if(!En(p,["string","array"]))throw new Zr(`Expected second argument to be of type array or string, but found ${ii(hs(p))} instead.`);return p.indexOf(u)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Ja=la;class za{constructor(n,u,p){this.type=me,this.needle=n,this.haystack=u,this.fromIndex=p}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,xe),v=u.parse(n[2],2,xe);if(!p||!v)return null;if(!dn(p.type,[N,Se,me,we,xe]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ii(p.type)} instead`);if(4===n.length){const E=u.parse(n[3],3,me);return E?new za(p,v,E):null}return new za(p,v)}evaluate(n){const u=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(!En(u,["boolean","string","number","null"]))throw new Zr(`Expected first argument to be of type boolean, string, number or null, but found ${ii(hs(u))} instead.`);if(!En(p,["string","array"]))throw new Zr(`Expected second argument to be of type array or string, but found ${ii(hs(p))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(n);return p.indexOf(u,v)}return p.indexOf(u)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var lc=za;class ys{constructor(n,u,p,v,E,A){this.inputType=n,this.type=u,this.input=p,this.cases=v,this.outputs=E,this.otherwise=A}static parse(n,u){if(n.length<5)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return u.error("Expected an even number of arguments.");let p,v;u.expectedType&&"value"!==u.expectedType.kind&&(v=u.expectedType);const E={},A=[];for(let j=2;j<n.length-1;j+=2){let ee=n[j];const se=n[j+1];Array.isArray(ee)||(ee=[ee]);const ce=u.concat(j);if(0===ee.length)return ce.error("Expected at least one branch label.");for(const be of ee){if("number"!=typeof be&&"string"!=typeof be)return ce.error("Branch labels must be numbers or strings.");if("number"==typeof be&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return ce.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof be&&Math.floor(be)!==be)return ce.error("Numeric branch labels must be integer values.");if(p){if(ce.checkSubtype(p,hs(be)))return null}else p=hs(be);if(void 0!==E[String(be)])return ce.error("Branch labels must be unique.");E[String(be)]=A.length}const ve=u.parse(se,j,v);if(!ve)return null;v=v||ve.type,A.push(ve)}const R=u.parse(n[1],1,xe);if(!R)return null;const H=u.parse(n[n.length-1],n.length-1,v);return H?"value"!==R.type.kind&&u.concat(1).checkSubtype(p,R.type)?null:new ys(p,v,R,E,A,H):null}evaluate(n){const u=this.input.evaluate(n);return(hs(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),p=[],v={};for(const A of u){const R=v[this.cases[A]];void 0===R?(v[this.cases[A]]=p.length,p.push([this.cases[A],[A]])):p[R][1].push(A)}const E=A=>"number"===this.inputType.kind?Number(A):A;for(const[A,R]of p)n.push(1===R.length?E(R[0]):R.map(E)),n.push(this.outputs[A].serialize());return n.push(this.otherwise.serialize()),n}}var Cc=ys;class ml{constructor(n,u,p){this.type=n,this.branches=u,this.otherwise=p}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&"value"!==u.expectedType.kind&&(p=u.expectedType);const v=[];for(let A=1;A<n.length-1;A+=2){const R=u.parse(n[A],A,N);if(!R)return null;const H=u.parse(n[A+1],A+1,p);if(!H)return null;v.push([R,H]),p=p||H.type}const E=u.parse(n[n.length-1],n.length-1,p);return E?new ml(p,v,E):null}evaluate(n){for(const[u,p]of this.branches)if(u.evaluate(n))return p.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[u,p]of this.branches)n(u),n(p);n(this.otherwise)}outputDefined(){return this.branches.every(([n,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(u=>{n.push(u.serialize())}),n}}var Oo=ml;class ho{constructor(n,u,p,v){this.type=n,this.input=u,this.beginIndex=p,this.endIndex=v}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,xe),v=u.parse(n[2],2,me);if(!p||!v)return null;if(!dn(p.type,[It(xe),Se,xe]))return u.error(`Expected first argument to be of type array or string, but found ${ii(p.type)} instead`);if(4===n.length){const E=u.parse(n[3],3,me);return E?new ho(p.type,p,v,E):null}return new ho(p.type,p,v)}evaluate(n){const u=this.input.evaluate(n),p=this.beginIndex.evaluate(n);if(!En(u,["string","array"]))throw new Zr(`Expected first argument to be of type array or string, but found ${ii(hs(u))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(n);return u.slice(p,v)}return u.slice(p)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Kr=ho;function gl(a,n){return"=="===a||"!="===a?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function cc(a,n,u,p){return 0===p.compare(n,u)}function Eo(a,n,u){const p="=="!==a&&"!="!==a;return class Vw{constructor(E,A,R){this.type=N,this.lhs=E,this.rhs=A,this.collator=R,this.hasUntypedArgument="value"===E.type.kind||"value"===A.type.kind}static parse(E,A){if(3!==E.length&&4!==E.length)return A.error("Expected two or three arguments.");const R=E[0];let H=A.parse(E[1],1,xe);if(!H)return null;if(!gl(R,H.type))return A.concat(1).error(`"${R}" comparisons are not supported for type '${ii(H.type)}'.`);let j=A.parse(E[2],2,xe);if(!j)return null;if(!gl(R,j.type))return A.concat(2).error(`"${R}" comparisons are not supported for type '${ii(j.type)}'.`);if(H.type.kind!==j.type.kind&&"value"!==H.type.kind&&"value"!==j.type.kind)return A.error(`Cannot compare types '${ii(H.type)}' and '${ii(j.type)}'.`);p&&("value"===H.type.kind&&"value"!==j.type.kind?H=new Oa(j.type,[H]):"value"!==H.type.kind&&"value"===j.type.kind&&(j=new Oa(H.type,[j])));let ee=null;if(4===E.length){if("string"!==H.type.kind&&"string"!==j.type.kind&&"value"!==H.type.kind&&"value"!==j.type.kind)return A.error("Cannot use collator to compare non-string types.");if(ee=A.parse(E[3],3,Le),!ee)return null}return new Vw(H,j,ee)}evaluate(E){const A=this.lhs.evaluate(E),R=this.rhs.evaluate(E);if(p&&this.hasUntypedArgument){const H=hs(A),j=hs(R);if(H.kind!==j.kind||"string"!==H.kind&&"number"!==H.kind)throw new Zr(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${H.kind}, ${j.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const H=hs(A),j=hs(R);if("string"!==H.kind||"string"!==j.kind)return n(E,A,R)}return this.collator?u(E,A,R,this.collator.evaluate(E)):n(E,A,R)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}serialize(){const E=[a];return this.eachChild(A=>{E.push(A.serialize())}),E}}}const Yc=Eo("==",function(a,n,u){return n===u},cc),Fa=Eo("!=",function(a,n,u){return n!==u},function(a,n,u,p){return!cc(0,n,u,p)}),bu=Eo("<",function(a,n,u){return n<u},function(a,n,u,p){return p.compare(n,u)<0}),Hc=Eo(">",function(a,n,u){return n>u},function(a,n,u,p){return p.compare(n,u)>0}),xu=Eo("<=",function(a,n,u){return n<=u},function(a,n,u,p){return p.compare(n,u)<=0}),Uo=Eo(">=",function(a,n,u){return n>=u},function(a,n,u,p){return p.compare(n,u)>=0});class ca{constructor(n,u,p,v,E,A){this.type=Se,this.number=n,this.locale=u,this.currency=p,this.unit=v,this.minFractionDigits=E,this.maxFractionDigits=A}static parse(n,u){if(3!==n.length)return u.error("Expected two arguments.");const p=u.parse(n[1],1,me);if(!p)return null;const v=n[2];if("object"!=typeof v||Array.isArray(v))return u.error("NumberFormat options argument must be an object.");let E=null;if(v.locale&&(E=u.parse(v.locale,1,Se),!E))return null;let A=null;if(v.currency&&(A=u.parse(v.currency,1,Se),!A))return null;let R=null;if(v.unit&&(R=u.parse(v.unit,1,Se),!R))return null;let H=null;if(v["min-fraction-digits"]&&(H=u.parse(v["min-fraction-digits"],1,me),!H))return null;let j=null;return v["max-fraction-digits"]&&(j=u.parse(v["max-fraction-digits"],1,me),!j)?null:new ca(p,E,A,R,H,j)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Wo{constructor(n){this.type=me,this.input=n}static parse(n,u){if(2!==n.length)return u.error(`Expected 1 argument, but found ${n.length-1} instead.`);const p=u.parse(n[1],1);return p?"array"!==p.type.kind&&"string"!==p.type.kind&&"value"!==p.type.kind?u.error(`Expected argument of type string or array, but found ${ii(p.type)} instead.`):new Wo(p):null}evaluate(n){const u=this.input.evaluate(n);if("string"==typeof u||Array.isArray(u))return u.length;throw new Zr(`Expected value to be of type string or array, but found ${ii(hs(u))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(u=>{n.push(u.serialize())}),n}}const vl={"==":Yc,"!=":Fa,">":Hc,"<":bu,">=":Uo,"<=":xu,array:Oa,at:yu,boolean:Oa,case:Oo,coalesce:jo,collator:sc,format:ia,image:Ml,in:Ja,"index-of":lc,interpolate:Go,"interpolate-hcl":Go,"interpolate-lab":Go,length:Wo,let:wc,literal:Io,match:Cc,number:Oa,"number-format":ca,object:Oa,slice:Kr,step:Hs,string:Oa,"to-boolean":Al,"to-color":Al,"to-number":Al,"to-string":Al,var:xo,within:Lo};function _l(a,[n,u,p,v]){n=n.evaluate(a),u=u.evaluate(a),p=p.evaluate(a);const E=v?v.evaluate(a):1,A=ul(n,u,p,E);if(A)throw new Zr(A);return new Mr(n/255*E,u/255*E,p/255*E,E)}function $o(a,n){return a in n}function Ca(a,n){const u=n[a];return void 0===u?null:u}function fs(a){return{type:a}}js.register(vl,{error:[{kind:"error"},[Se],(a,[n])=>{throw new Zr(n.evaluate(a))}],typeof:[Se,[xe],(a,[n])=>ii(hs(n.evaluate(a)))],"to-rgba":[It(me,4),[Q],(a,[n])=>n.evaluate(a).toArray()],rgb:[Q,[me,me,me],_l],rgba:[Q,[me,me,me,me],_l],has:{type:N,overloads:[[[Se],(a,[n])=>$o(n.evaluate(a),a.properties())],[[Se,pe],(a,[n,u])=>$o(n.evaluate(a),u.evaluate(a))]]},get:{type:xe,overloads:[[[Se],(a,[n])=>Ca(n.evaluate(a),a.properties())],[[Se,pe],(a,[n,u])=>Ca(n.evaluate(a),u.evaluate(a))]]},"feature-state":[xe,[Se],(a,[n])=>Ca(n.evaluate(a),a.featureState||{})],properties:[pe,[],a=>a.properties()],"geometry-type":[Se,[],a=>a.geometryType()],id:[xe,[],a=>a.id()],zoom:[me,[],a=>a.globals.zoom],pitch:[me,[],a=>a.globals.pitch||0],"distance-from-center":[me,[],a=>a.distanceFromCenter()],"heatmap-density":[me,[],a=>a.globals.heatmapDensity||0],"line-progress":[me,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[me,[],a=>a.globals.skyRadialProgress||0],accumulated:[xe,[],a=>void 0===a.globals.accumulated?null:a.globals.accumulated],"+":[me,fs(me),(a,n)=>{let u=0;for(const p of n)u+=p.evaluate(a);return u}],"*":[me,fs(me),(a,n)=>{let u=1;for(const p of n)u*=p.evaluate(a);return u}],"-":{type:me,overloads:[[[me,me],(a,[n,u])=>n.evaluate(a)-u.evaluate(a)],[[me],(a,[n])=>-n.evaluate(a)]]},"/":[me,[me,me],(a,[n,u])=>n.evaluate(a)/u.evaluate(a)],"%":[me,[me,me],(a,[n,u])=>n.evaluate(a)%u.evaluate(a)],ln2:[me,[],()=>Math.LN2],pi:[me,[],()=>Math.PI],e:[me,[],()=>Math.E],"^":[me,[me,me],(a,[n,u])=>Math.pow(n.evaluate(a),u.evaluate(a))],sqrt:[me,[me],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[me,[me],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[me,[me],(a,[n])=>Math.log(n.evaluate(a))],log2:[me,[me],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[me,[me],(a,[n])=>Math.sin(n.evaluate(a))],cos:[me,[me],(a,[n])=>Math.cos(n.evaluate(a))],tan:[me,[me],(a,[n])=>Math.tan(n.evaluate(a))],asin:[me,[me],(a,[n])=>Math.asin(n.evaluate(a))],acos:[me,[me],(a,[n])=>Math.acos(n.evaluate(a))],atan:[me,[me],(a,[n])=>Math.atan(n.evaluate(a))],min:[me,fs(me),(a,n)=>Math.min(...n.map(u=>u.evaluate(a)))],max:[me,fs(me),(a,n)=>Math.max(...n.map(u=>u.evaluate(a)))],abs:[me,[me],(a,[n])=>Math.abs(n.evaluate(a))],round:[me,[me],(a,[n])=>{const u=n.evaluate(a);return u<0?-Math.round(-u):Math.round(u)}],floor:[me,[me],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[me,[me],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[N,[Se,xe],(a,[n,u])=>a.properties()[n.value]===u.value],"filter-id-==":[N,[xe],(a,[n])=>a.id()===n.value],"filter-type-==":[N,[Se],(a,[n])=>a.geometryType()===n.value],"filter-<":[N,[Se,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p<v}],"filter-id-<":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u<p}],"filter->":[N,[Se,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p>v}],"filter-id->":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u>p}],"filter-<=":[N,[Se,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p<=v}],"filter-id-<=":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u<=p}],"filter->=":[N,[Se,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p>=v}],"filter-id->=":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u>=p}],"filter-has":[N,[xe],(a,[n])=>n.value in a.properties()],"filter-has-id":[N,[],a=>null!==a.id()&&void 0!==a.id()],"filter-type-in":[N,[It(Se)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[N,[It(xe)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[N,[Se,It(xe)],(a,[n,u])=>u.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[N,[Se,It(xe)],(a,[n,u])=>function(p,v,E,A){for(;E<=A;){const R=E+A>>1;if(v[R]===p)return!0;v[R]>p?A=R-1:E=R+1}return!1}(a.properties()[n.value],u.value,0,u.value.length-1)],all:{type:N,overloads:[[[N,N],(a,[n,u])=>n.evaluate(a)&&u.evaluate(a)],[fs(N),(a,n)=>{for(const u of n)if(!u.evaluate(a))return!1;return!0}]]},any:{type:N,overloads:[[[N,N],(a,[n,u])=>n.evaluate(a)||u.evaluate(a)],[fs(N),(a,n)=>{for(const u of n)if(u.evaluate(a))return!0;return!1}]]},"!":[N,[N],(a,[n])=>!n.evaluate(a)],"is-supported-script":[N,[Se],(a,[n])=>{const u=a.globals&&a.globals.isSupportedScript;return!u||u(n.evaluate(a))}],upcase:[Se,[Se],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Se,[Se],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Se,fs(xe),(a,n)=>n.map(u=>Yo(u.evaluate(a))).join("")],"resolved-locale":[Se,[Le],(a,[n])=>n.evaluate(a).resolvedLocale()]});var So=vl;function Ba(a){return{result:"success",value:a}}function yl(a){return{result:"error",value:a}}function Po(a){return"data-driven"===a["property-type"]}function Ec(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Ea(a){return!!a.expression&&a.expression.interpolated}function Gr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}function Fl(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}function Qa(a){return a}function el(a,n){const u="color"===n.type,p=a.stops&&"object"==typeof a.stops[0][0],v=p||!(p||void 0!==a.property),E=a.type||(Ea(n)?"exponential":"interval");if(u&&((a=F({},a)).stops&&(a.stops=a.stops.map(j=>[j[0],Mr.parse(j[1])])),a.default=Mr.parse(a.default?a.default:n.default)),a.colorSpace&&"rgb"!==a.colorSpace&&!xc[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let A,R,H;if("exponential"===E)A=ua;else if("interval"===E)A=tl;else if("categorical"===E){A=To,R=Object.create(null);for(const j of a.stops)R[j[0]]=j[1];H=typeof a.stops[0][0]}else{if("identity"!==E)throw new Error(`Unknown function type "${E}"`);A=Ro}if(p){const j={},ee=[];for(let ve=0;ve<a.stops.length;ve++){const be=a.stops[ve],Ae=be[0].zoom;void 0===j[Ae]&&(j[Ae]={zoom:Ae,type:a.type,property:a.property,default:a.default,stops:[]},ee.push(Ae)),j[Ae].stops.push([be[0].value,be[1]])}const se=[];for(const ve of ee)se.push([j[ve].zoom,el(j[ve],n)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:Go.interpolationFactor.bind(void 0,ce),zoomStops:se.map(ve=>ve[0]),evaluate:({zoom:ve},be)=>ua({stops:se,base:a.base},n,ve).evaluate(ve,be)}}if(v){const j="exponential"===E?{name:"exponential",base:void 0!==a.base?a.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:Go.interpolationFactor.bind(void 0,j),zoomStops:a.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>A(a,n,ee,R,H)}}return{kind:"source",evaluate(j,ee){const se=ee&&ee.properties?ee.properties[a.property]:void 0;return void 0===se?Xo(a.default,n.default):A(a,n,se,R,H)}}}function Xo(a,n,u){return void 0!==a?a:void 0!==n?n:void 0!==u?u:void 0}function To(a,n,u,p,v){return Xo(typeof u===v?p[u]:void 0,a.default,n.default)}function tl(a,n,u){if("number"!==Gr(u))return Xo(a.default,n.default);const p=a.stops.length;if(1===p||u<=a.stops[0][0])return a.stops[0][1];if(u>=a.stops[p-1][0])return a.stops[p-1][1];const v=Xa(a.stops.map(E=>E[0]),u);return a.stops[v][1]}function ua(a,n,u){const p=void 0!==a.base?a.base:1;if("number"!==Gr(u))return Xo(a.default,n.default);const v=a.stops.length;if(1===v||u<=a.stops[0][0])return a.stops[0][1];if(u>=a.stops[v-1][0])return a.stops[v-1][1];const E=Xa(a.stops.map(ee=>ee[0]),u),A=function(ee,se,ce,ve){const be=ve-ce,Ae=ee-ce;return 0===be?0:1===se?Ae/be:(Math.pow(se,Ae)-1)/(Math.pow(se,be)-1)}(u,p,a.stops[E][0],a.stops[E+1][0]),R=a.stops[E][1],H=a.stops[E+1][1];let j=fl[n.type]||Qa;if(a.colorSpace&&"rgb"!==a.colorSpace){const ee=xc[a.colorSpace];j=(se,ce)=>ee.reverse(ee.interpolate(ee.forward(se),ee.forward(ce),A))}return"function"==typeof R.evaluate?{evaluate(...ee){const se=R.evaluate.apply(void 0,ee),ce=H.evaluate.apply(void 0,ee);if(void 0!==se&&void 0!==ce)return j(se,ce,A)}}:j(R,H,A)}function Ro(a,n,u){return"color"===n.type?u=Mr.parse(u):"formatted"===n.type?u=$n.fromString(u.toString()):"resolvedImage"===n.type?u=Xr.fromString(u.toString()):Gr(u)===n.type||"enum"===n.type&&n.values[u]||(u=void 0),Xo(u,a.default,n.default)}class bl{constructor(n,u){var p;this.expression=n,this._warningHistory={},this._evaluator=new Nc,this._defaultValue=u?"color"===(p=u).type&&(Fl(p.default)||Array.isArray(p.default))?new Mr(0,0,0,0):"color"===p.type?Mr.parse(p.default)||null:void 0===p.default?null:p.default:null,this._enumValues=u&&"enum"===u.type?u.values:null}evaluateWithoutErrorHandling(n,u,p,v,E,A,R,H){return this._evaluator.globals=n,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=v||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=A,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=H||null,this.expression.evaluate(this._evaluator)}evaluate(n,u,p,v,E,A,R,H){this._evaluator.globals=n,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=v||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=A||null,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=H||null;try{const j=this.expression.evaluate(this._evaluator);if(null==j||"number"==typeof j&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Zr(`Expected value to be one of ${Object.keys(this._enumValues).map(ee=>JSON.stringify(ee)).join(", ")}, but found ${JSON.stringify(j)} instead.`);return j}catch(j){return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"&&console.warn(j.message)),this._defaultValue}}}function Sa(a){return Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in So}function Na(a,n){const u=new Ol(So,[],n?function(v){const E={color:Q,string:Se,number:me,enum:Se,boolean:N,formatted:Ze,resolvedImage:kt};return"array"===v.type?It(E[v.value]||xe,v.length):E[v.type]}(n):void 0),p=u.parse(a,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return p?Ba(new bl(p,n)):yl(u.errors)}class Sc{constructor(n,u){this.kind=n,this._styleExpression=u,this.isStateDependent="constant"!==n&&!Ra(u.expression)}evaluateWithoutErrorHandling(n,u,p,v,E,A){return this._styleExpression.evaluateWithoutErrorHandling(n,u,p,v,E,A)}evaluate(n,u,p,v,E,A){return this._styleExpression.evaluate(n,u,p,v,E,A)}}class xl{constructor(n,u,p,v){this.kind=n,this.zoomStops=p,this._styleExpression=u,this.isStateDependent="camera"!==n&&!Ra(u.expression),this.interpolationType=v}evaluateWithoutErrorHandling(n,u,p,v,E,A){return this._styleExpression.evaluateWithoutErrorHandling(n,u,p,v,E,A)}evaluate(n,u,p,v,E,A){return this._styleExpression.evaluate(n,u,p,v,E,A)}interpolationFactor(n,u,p){return this.interpolationType?Go.interpolationFactor(this.interpolationType,n,u,p):0}}function Tc(a,n){if("error"===(a=Na(a,n)).result)return a;const u=a.value.expression,p=pl(u);if(!p&&!Po(n))return yl([new ne("","data expressions not supported")]);const v=xa(u,["zoom","pitch","distance-from-center"]);if(!v&&!Ec(n))return yl([new ne("","zoom expressions not supported")]);const E=bs(u);return E||v?E instanceof ne?yl([E]):E instanceof Go&&!Ea(n)?yl([new ne("",'"interpolate" expressions cannot be used with this property')]):Ba(E?new xl(p?"camera":"composite",a.value,E.labels,E instanceof Go?E.interpolation:void 0):new Sc(p?"constant":"source",a.value)):yl([new ne("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ya{constructor(n,u){this._parameters=n,this._specification=u,F(this,el(this._parameters,this._specification))}static deserialize(n){return new Ya(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function bs(a){let n=null;if(a instanceof wc)n=bs(a.result);else if(a instanceof jo){for(const u of a.args)if(n=bs(u),n)break}else(a instanceof Hs||a instanceof Go)&&a.input instanceof js&&"zoom"===a.input.name&&(n=a);return n instanceof ne||a.eachChild(u=>{const p=bs(u);p instanceof ne?n=p:!n&&p?n=new ne("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&p&&n!==p&&(n=new ne("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class vn{constructor(n,u,p,v){this.message=(n?`${n}: `:"")+p,v&&(this.identifier=v),null!=u&&u.__line__&&(this.line=u.__line__)}}function m(a){const n=a.key,u=a.value,p=a.valueSpec||{},v=a.objectElementValidators||{},E=a.style,A=a.styleSpec;let R=[];const H=Gr(u);if("object"!==H)return[new vn(n,u,`object expected, ${H} found`)];for(const j in u){const ee=j.split(".")[0];let se;v[ee]?se=v[ee]:p[ee]?se=Js:v["*"]?se=v["*"]:p["*"]&&(se=Js),se?R=R.concat(se({key:(n&&`${n}.`)+j,value:u[j],valueSpec:p[ee]||p["*"],style:E,styleSpec:A,object:u,objectKey:j},u)):R.push(new vn(n,u[j],`unknown property "${j}"`))}for(const j in p)v[j]||p[j].required&&void 0===p[j].default&&void 0===u[j]&&R.push(new vn(n,u,`missing required property "${j}"`));return R}function D(a){const n=a.value,u=a.valueSpec,p=a.style,v=a.styleSpec,E=a.key,A=a.arrayElementValidator||Js;if("array"!==Gr(n))return[new vn(E,n,`array expected, ${Gr(n)} found`)];if(u.length&&n.length!==u.length)return[new vn(E,n,`array length ${u.length} expected, length ${n.length} found`)];if(u["min-length"]&&n.length<u["min-length"])return[new vn(E,n,`array length at least ${u["min-length"]} expected, length ${n.length} found`)];let R={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};v.$version<7&&(R.function=u.function),"object"===Gr(u.value)&&(R=u.value);let H=[];for(let j=0;j<n.length;j++)H=H.concat(A({array:n,arrayIndex:j,value:n[j],valueSpec:R,style:p,styleSpec:v,key:`${E}[${j}]`}));return H}function G(a){const n=a.key,u=a.value,p=a.valueSpec;let v=Gr(u);if("number"===v&&u!=u&&(v="NaN"),"number"!==v)return[new vn(n,u,`number expected, ${v} found`)];if("minimum"in p){let E=p.minimum;if("array"===Gr(p.minimum)&&(E=p.minimum[a.arrayIndex]),u<E)return[new vn(n,u,`${u} is less than the minimum value ${E}`)]}if("maximum"in p){let E=p.maximum;if("array"===Gr(p.maximum)&&(E=p.maximum[a.arrayIndex]),u>E)return[new vn(n,u,`${u} is greater than the maximum value ${E}`)]}return[]}function re(a){const n=a.valueSpec,u=U(a.value.type);let p,v,E,A={};const R="categorical"!==u&&void 0===a.value.property,H=!R,j="array"===Gr(a.value.stops)&&"array"===Gr(a.value.stops[0])&&"object"===Gr(a.value.stops[0][0]),ee=m({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(ve){if("identity"===u)return[new vn(ve.key,ve.value,'identity function may not have a "stops" property')];let be=[];const Ae=ve.value;return be=be.concat(D({key:ve.key,value:Ae,valueSpec:ve.valueSpec,style:ve.style,styleSpec:ve.styleSpec,arrayElementValidator:se})),"array"===Gr(Ae)&&0===Ae.length&&be.push(new vn(ve.key,Ae,"array must have at least one stop")),be},default:function(ve){return Js({key:ve.key,value:ve.value,valueSpec:n,style:ve.style,styleSpec:ve.styleSpec})}}});return"identity"===u&&R&&ee.push(new vn(a.key,a.value,'missing required property "property"')),"identity"===u||a.value.stops||ee.push(new vn(a.key,a.value,'missing required property "stops"')),"exponential"===u&&a.valueSpec.expression&&!Ea(a.valueSpec)&&ee.push(new vn(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(H&&!Po(a.valueSpec)?ee.push(new vn(a.key,a.value,"property functions not supported")):R&&!Ec(a.valueSpec)&&ee.push(new vn(a.key,a.value,"zoom functions not supported"))),"categorical"!==u&&!j||void 0!==a.value.property||ee.push(new vn(a.key,a.value,'"property" property is required')),ee;function se(ve){let be=[];const Ae=ve.value,$e=ve.key;if("array"!==Gr(Ae))return[new vn($e,Ae,`array expected, ${Gr(Ae)} found`)];if(2!==Ae.length)return[new vn($e,Ae,`array length 2 expected, length ${Ae.length} found`)];if(j){if("object"!==Gr(Ae[0]))return[new vn($e,Ae,`object expected, ${Gr(Ae[0])} found`)];if(void 0===Ae[0].zoom)return[new vn($e,Ae,"object stop key must have zoom")];if(void 0===Ae[0].value)return[new vn($e,Ae,"object stop key must have value")];const dt=U(Ae[0].zoom);if("number"!=typeof dt)return[new vn($e,Ae[0].zoom,"stop zoom values must be numbers")];if(E&&E>dt)return[new vn($e,Ae[0].zoom,"stop zoom values must appear in ascending order")];dt!==E&&(E=dt,v=void 0,A={}),be=be.concat(m({key:`${$e}[0]`,value:Ae[0],valueSpec:{zoom:{}},style:ve.style,styleSpec:ve.styleSpec,objectElementValidators:{zoom:G,value:ce}}))}else be=be.concat(ce({key:`${$e}[0]`,value:Ae[0],valueSpec:{},style:ve.style,styleSpec:ve.styleSpec},Ae));return Sa($(Ae[1]))?be.concat([new vn(`${$e}[1]`,Ae[1],"expressions are not allowed in function stops.")]):be.concat(Js({key:`${$e}[1]`,value:Ae[1],valueSpec:n,style:ve.style,styleSpec:ve.styleSpec}))}function ce(ve,be){const Ae=Gr(ve.value),$e=U(ve.value),dt=null!==ve.value?ve.value:be;if(p){if(Ae!==p)return[new vn(ve.key,dt,`${Ae} stop domain type must match previous stop domain type ${p}`)]}else p=Ae;if("number"!==Ae&&"string"!==Ae&&"boolean"!==Ae&&"number"!=typeof $e&&"string"!=typeof $e&&"boolean"!=typeof $e)return[new vn(ve.key,dt,"stop domain value must be a number, string, or boolean")];if("number"!==Ae&&"categorical"!==u){let Ot=`number expected, ${Ae} found`;return Po(n)&&void 0===u&&(Ot+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vn(ve.key,dt,Ot)]}return"categorical"!==u||"number"!==Ae||"number"==typeof $e&&isFinite($e)&&Math.floor($e)===$e?"categorical"!==u&&"number"===Ae&&"number"==typeof $e&&"number"==typeof v&&void 0!==v&&$e<v?[new vn(ve.key,dt,"stop domain values must appear in ascending order")]:(v=$e,"categorical"===u&&$e in A?[new vn(ve.key,dt,"stop domain values must be unique")]:(A[$e]=!0,[])):[new vn(ve.key,dt,`integer expected, found ${String($e)}`)]}}function _e(a){const n=("property"===a.expressionContext?Tc:Na)($(a.value),a.valueSpec);if("error"===n.result)return n.value.map(p=>new vn(`${a.key}${p.key}`,a.value,p.message));const u=n.value.expression||n.value._styleExpression.expression;if("property"===a.expressionContext&&"text-font"===a.propertyKey&&!u.outputDefined())return[new vn(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===a.expressionContext&&"layout"===a.propertyType&&!Ra(u))return[new vn(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===a.expressionContext)return Ue(u,a);if(a.expressionContext&&0===a.expressionContext.indexOf("cluster")){if(!xa(u,["zoom","feature-state"]))return[new vn(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===a.expressionContext&&!pl(u))return[new vn(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ue(a,n){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const v of n.valueSpec.expression.parameters)u.delete(v);if(0===u.size)return[];const p=[];return a instanceof js&&u.has(a.name)?[new vn(n.key,n.value,`["${a.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(a.eachChild(v=>{p.push(...Ue(v,n))}),p)}function Vt(a){const n=a.key,u=a.value,p=a.valueSpec,v=[];return Array.isArray(p.values)?-1===p.values.indexOf(U(u))&&v.push(new vn(n,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):-1===Object.keys(p.values).indexOf(U(u))&&v.push(new vn(n,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),v}function oi(a){if(!0===a||!1===a)return!0;if(!Array.isArray(a)||0===a.length)return!1;switch(a[0]){case"has":return a.length>=2&&"$id"!==a[1]&&"$type"!==a[1];case"in":return a.length>=3&&("string"!=typeof a[1]||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==a.length||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!oi(n)&&"boolean"!=typeof n)return!1;return!0;default:return!0}}function ki(a,n="fill"){if(null==a)return{filter:()=>!0,needGeometry:!1,needFeature:!1};oi(a)||(a=io(a));const u=a;let p=!0;try{p=function(j){if(!Bn(j))return j;let ee=$(j);return Dn(ee),ee=sn(ee),ee}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(u,null,2)}\n        `)}const v=I[`filter_${n}`],E=Na(p,v);let A=null;if("error"===E.result)throw new Error(E.value.map(j=>`${j.key}: ${j.message}`).join(", "));A=(j,ee,se)=>E.value.evaluate(j,ee,{},se);let R=null,H=null;if(p!==u){const j=Na(u,v);if("error"===j.result)throw new Error(j.value.map(ee=>`${ee.key}: ${ee.message}`).join(", "));R=(ee,se,ce,ve,be)=>j.value.evaluate(ee,se,{},ce,void 0,void 0,ve,be),H=!pl(j.value.expression)}return{filter:A,dynamicFilter:R||void 0,needGeometry:Ys(p),needFeature:!!H}}function sn(a){if(!Array.isArray(a))return a;const n=function(u){if(mr.has(u[0]))for(let p=1;p<u.length;p++)if(Bn(u[p]))return!0;return u}(a);return!0===n?n:n.map(u=>sn(u))}function Dn(a){let n=!1;const u=[];if("case"===a[0]){for(let p=1;p<a.length-1;p+=2)n=n||Bn(a[p]),u.push(a[p+1]);u.push(a[a.length-1])}else if("match"===a[0]){n=n||Bn(a[1]);for(let p=2;p<a.length-1;p+=2)u.push(a[p+1]);u.push(a[a.length-1])}else if("step"===a[0]){n=n||Bn(a[1]);for(let p=1;p<a.length-1;p+=2)u.push(a[p+1])}n&&(a.length=0,a.push("any",...u));for(let p=1;p<a.length;p++)Dn(a[p])}function Bn(a){if(!Array.isArray(a))return!1;if("pitch"===(n=a[0])||"distance-from-center"===n)return!0;var n;for(let u=1;u<a.length;u++)if(Bn(a[u]))return!0;return!1}const mr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Br(a,n){return a<n?-1:a>n?1:0}function Ys(a){if(!Array.isArray(a))return!1;if("within"===a[0])return!0;for(let n=1;n<a.length;n++)if(Ys(a[n]))return!0;return!1}function io(a){if(!a)return!0;const n=a[0];return a.length<=1?"any"!==n:"=="===n?$s(a[1],a[2],"=="):"!="===n?po($s(a[1],a[2],"==")):"<"===n||">"===n||"<="===n||">="===n?$s(a[1],a[2],n):"any"===n?(u=a.slice(1),["any"].concat(u.map(io))):"all"===n?["all"].concat(a.slice(1).map(io)):"none"===n?["all"].concat(a.slice(1).map(io).map(po)):"in"===n?Ta(a[1],a.slice(2)):"!in"===n?po(Ta(a[1],a.slice(2))):"has"===n?Ha(a[1]):"!has"===n?po(Ha(a[1])):"within"!==n||a;var u}function $s(a,n,u){switch(a){case"$type":return[`filter-type-${u}`,n];case"$id":return[`filter-id-${u}`,n];default:return[`filter-${u}`,a,n]}}function Ta(a,n){if(0===n.length)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(u=>typeof u!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Br)]]:["filter-in-small",a,["literal",n]]}}function Ha(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function po(a){return["!",a]}function kc(a){return oi($(a.value))?_e(F({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):Bl(a)}function Bl(a){const n=a.value,u=a.key;if("array"!==Gr(n))return[new vn(u,n,`array expected, ${Gr(n)} found`)];const p=a.styleSpec;let v,E=[];if(n.length<1)return[new vn(u,n,"filter array must have at least 1 element")];switch(E=E.concat(Vt({key:`${u}[0]`,value:n[0],valueSpec:p.filter_operator,style:a.style,styleSpec:a.styleSpec})),U(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===U(n[1])&&E.push(new vn(u,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":3!==n.length&&E.push(new vn(u,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=Gr(n[1]),"string"!==v&&E.push(new vn(`${u}[1]`,n[1],`string expected, ${v} found`)));for(let A=2;A<n.length;A++)v=Gr(n[A]),"$type"===U(n[1])?E=E.concat(Vt({key:`${u}[${A}]`,value:n[A],valueSpec:p.geometry_type,style:a.style,styleSpec:a.styleSpec})):"string"!==v&&"number"!==v&&"boolean"!==v&&E.push(new vn(`${u}[${A}]`,n[A],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let A=1;A<n.length;A++)E=E.concat(Bl({key:`${u}[${A}]`,value:n[A],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":v=Gr(n[1]),2!==n.length?E.push(new vn(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):"string"!==v&&E.push(new vn(`${u}[1]`,n[1],`string expected, ${v} found`));break;case"within":v=Gr(n[1]),2!==n.length?E.push(new vn(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):"object"!==v&&E.push(new vn(`${u}[1]`,n[1],`object expected, ${v} found`))}return E}function Zo(a,n){const u=a.key,p=a.style,v=a.styleSpec,E=a.value,A=a.objectKey,R=v[`${n}_${a.layerType}`];if(!R)return[];const H=A.match(/^(.*)-transition$/);if("paint"===n&&H&&R[H[1]]&&R[H[1]].transition)return Js({key:u,value:E,valueSpec:v.transition,style:p,styleSpec:v});const j=a.valueSpec||R[A];if(!j)return[new vn(u,E,`unknown property "${A}"`)];let ee;if("string"===Gr(E)&&Po(j)&&!j.tokens&&(ee=/^{([^}]+)}$/.exec(E))){const ce=`\`{ "type": "identity", "property": ${ee?JSON.stringify(ee[1]):'"_"'} }\``;return[new vn(u,E,`"${A}" does not support interpolation syntax\nUse an identity property function instead: ${ce}.`)]}const se=[];return"symbol"===a.layerType&&("text-field"===A&&p&&!p.glyphs&&se.push(new vn(u,E,'use of "text-field" requires a style "glyphs" property')),"text-font"===A&&Fl($(E))&&"identity"===U(E.type)&&se.push(new vn(u,E,'"text-font" does not support identity functions'))),se.concat(Js({key:a.key,value:E,valueSpec:j,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:A}))}function Nl(a){return Zo(a,"paint")}function Ee(a){return Zo(a,"layout")}function J(a){let n=[];const u=a.value,p=a.key,v=a.style,E=a.styleSpec;u.type||u.ref||n.push(new vn(p,u,'either "type" or "ref" is required'));let A=U(u.type);const R=U(u.ref);if(u.id){const H=U(u.id);for(let j=0;j<a.arrayIndex;j++){const ee=v.layers[j];U(ee.id)===H&&n.push(new vn(p,u.id,`duplicate layer id "${u.id}", previously used at line ${ee.id.__line__}`))}}if("ref"in u){let H;["type","source","source-layer","filter","layout"].forEach(j=>{j in u&&n.push(new vn(p,u[j],`"${j}" is prohibited for ref layers`))}),v.layers.forEach(j=>{U(j.id)===R&&(H=j)}),H?H.ref?n.push(new vn(p,u.ref,"ref cannot reference another ref layer")):A=U(H.type):"string"==typeof R&&n.push(new vn(p,u.ref,`ref layer "${R}" not found`))}else if("background"!==A&&"sky"!==A)if(u.source){const H=v.sources&&v.sources[u.source],j=H&&U(H.type);H?"vector"===j&&"raster"===A?n.push(new vn(p,u.source,`layer "${u.id}" requires a raster source`)):"raster"===j&&"raster"!==A?n.push(new vn(p,u.source,`layer "${u.id}" requires a vector source`)):"vector"!==j||u["source-layer"]?"raster-dem"===j&&"hillshade"!==A?n.push(new vn(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==A||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||"geojson"===j&&H.lineMetrics||n.push(new vn(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new vn(p,u,`layer "${u.id}" must specify a "source-layer"`)):n.push(new vn(p,u.source,`source "${u.source}" not found`))}else n.push(new vn(p,u,'missing required property "source"'));return n=n.concat(m({key:p,value:u,valueSpec:E.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Js({key:`${p}.type`,value:u.type,valueSpec:E.layer.type,style:a.style,styleSpec:a.styleSpec,object:u,objectKey:"type"}),filter:H=>kc(F({layerType:A},H)),layout:H=>m({layer:u,key:H.key,value:H.value,valueSpec:{},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":j=>Ee(F({layerType:A},j))}}),paint:H=>m({layer:u,key:H.key,value:H.value,valueSpec:{},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":j=>Nl(F({layerType:A},j))}})}})),n}function ae(a){const n=a.value,u=a.key,p=Gr(n);return"string"!==p?[new vn(u,n,`string expected, ${p} found`)]:[]}const ke={promoteId:function({key:a,value:n}){if("string"===Gr(n))return ae({key:a,value:n});{const u=[];for(const p in n)u.push(...ae({key:`${a}.${p}`,value:n[p]}));return u}}};function Ft(a){const n=a.value,u=a.key,p=a.styleSpec,v=a.style;if(!n.type)return[new vn(u,n,'"type" is required')];const E=U(n.type);let A;switch(E){case"vector":case"raster":case"raster-dem":return A=m({key:u,value:n,valueSpec:p[`source_${E.replace("-","_")}`],style:a.style,styleSpec:p,objectElementValidators:ke}),A;case"geojson":if(A=m({key:u,value:n,valueSpec:p.source_geojson,style:v,styleSpec:p,objectElementValidators:ke}),n.cluster)for(const R in n.clusterProperties){const[H,j]=n.clusterProperties[R],ee="string"==typeof H?[H,["accumulated"],["get",R]]:H;A.push(..._e({key:`${u}.${R}.map`,value:j,expressionContext:"cluster-map"})),A.push(..._e({key:`${u}.${R}.reduce`,value:ee,expressionContext:"cluster-reduce"}))}return A;case"video":return m({key:u,value:n,valueSpec:p.source_video,style:v,styleSpec:p});case"image":return m({key:u,value:n,valueSpec:p.source_image,style:v,styleSpec:p});case"canvas":return[new vn(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vt({key:`${u}.type`,value:n.type,valueSpec:{values:Ri(p)},style:v,styleSpec:p})}}function Ri(a){return a.source.reduce((n,u)=>{const p=a[u];return"enum"===p.type.type&&(n=n.concat(Object.keys(p.type.values))),n},[])}function In(a){const n=a.value,u=a.styleSpec,p=u.light,v=a.style;let E=[];const A=Gr(n);if(void 0===n)return E;if("object"!==A)return E=E.concat([new vn("light",n,`object expected, ${A} found`)]),E;for(const R in n){const H=R.match(/^(.*)-transition$/);E=E.concat(H&&p[H[1]]&&p[H[1]].transition?Js({key:R,value:n[R],valueSpec:u.transition,style:v,styleSpec:u}):p[R]?Js({key:R,value:n[R],valueSpec:p[R],style:v,styleSpec:u}):[new vn(R,n[R],`unknown property "${R}"`)])}return E}function Ar(a){const n=a.value,u=a.key,p=a.style,v=a.styleSpec,E=v.terrain;let A=[];const R=Gr(n);if(void 0===n)return A;if("object"!==R)return A=A.concat([new vn("terrain",n,`object expected, ${R} found`)]),A;for(const H in n){const j=H.match(/^(.*)-transition$/);A=A.concat(j&&E[j[1]]&&E[j[1]].transition?Js({key:H,value:n[H],valueSpec:v.transition,style:p,styleSpec:v}):E[H]?Js({key:H,value:n[H],valueSpec:E[H],style:p,styleSpec:v}):[new vn(H,n[H],`unknown property "${H}"`)])}if(n.source){const H=p.sources&&p.sources[n.source],j=H&&U(H.type);H?"raster-dem"!==j&&A.push(new vn(u,n.source,`terrain cannot be used with a source of type ${String(j)}, it only be used with a "raster-dem" source type`)):A.push(new vn(u,n.source,`source "${n.source}" not found`))}else A.push(new vn(u,n,'terrain is missing required property "source"'));return A}function Fr(a){const n=a.value,u=a.style,p=a.styleSpec,v=p.fog;let E=[];const A=Gr(n);if(void 0===n)return E;if("object"!==A)return E=E.concat([new vn("fog",n,`object expected, ${A} found`)]),E;for(const R in n){const H=R.match(/^(.*)-transition$/);E=E.concat(H&&v[H[1]]&&v[H[1]].transition?Js({key:R,value:n[R],valueSpec:p.transition,style:u,styleSpec:p}):v[R]?Js({key:R,value:n[R],valueSpec:v[R],style:u,styleSpec:p}):[new vn(R,n[R],`unknown property "${R}"`)])}return E}const Is={"*":()=>[],array:D,boolean:function(a){const n=a.value,u=a.key,p=Gr(n);return"boolean"!==p?[new vn(u,n,`boolean expected, ${p} found`)]:[]},number:G,color:function(a){const n=a.key,u=a.value,p=Gr(u);return"string"!==p?[new vn(n,u,`color expected, ${p} found`)]:null===Fn(u)?[new vn(n,u,`color expected, "${u}" found`)]:[]},enum:Vt,filter:kc,function:re,layer:J,object:m,source:Ft,light:In,terrain:Ar,fog:Fr,string:ae,formatted:function(a){return 0===ae(a).length?[]:_e(a)},resolvedImage:function(a){return 0===ae(a).length?[]:_e(a)},projection:function(a){const n=a.value,u=a.styleSpec,p=u.projection,v=a.style;let E=[];const A=Gr(n);if("object"===A)for(const R in n)E=E.concat(Js({key:R,value:n[R],valueSpec:p[R],style:v,styleSpec:u}));else"string"!==A&&(E=E.concat([new vn("projection",n,`object or string expected, ${A} found`)]));return E}};function Js(a){const n=a.value,u=a.valueSpec,p=a.styleSpec;return u.expression&&Fl(U(n))?re(a):u.expression&&Sa($(n))?_e(a):u.type&&Is[u.type]?Is[u.type](a):m(F({},a,{valueSpec:u.type?p[u.type]:u}))}function Oh(a){const n=a.value,u=a.key,p=ae(a);return p.length||(-1===n.indexOf("{fontstack}")&&p.push(new vn(u,n,'"glyphs" url must include a "{fontstack}" token')),-1===n.indexOf("{range}")&&p.push(new vn(u,n,'"glyphs" url must include a "{range}" token'))),p}function Gd(a,n=I){return il(Js({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,objectElementValidators:{glyphs:Oh,"*":()=>[]}}))}const Pf=a=>il(Nl(a)),Ph=a=>il(Ee(a));function il(a){return a.slice().sort((n,u)=>n.line&&u.line?n.line-u.line:0)}function wp(a,n){let u=!1;if(n&&n.length)for(const p of n)a.fire(new x(new Error(p.message))),u=!0;return u}var Yl=da,wl=3;function da(a,n,u){var p=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var v=new Int32Array(this.arrayBuffer);a=v[0],this.d=(n=v[1])+2*(u=v[2]);for(var E=0;E<this.d*this.d;E++){var A=v[wl+E],R=v[wl+E+1];p.push(A===R?null:v.subarray(A,R))}var H=v[wl+p.length+1];this.keys=v.subarray(v[wl+p.length],H),this.bboxes=v.subarray(H),this.insert=this._insertReadonly}else{this.d=n+2*u;for(var j=0;j<this.d*this.d;j++)p.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=a,this.padding=u,this.scale=n/a,this.uid=0;var ee=u/n*a;this.min=-ee,this.max=a+ee}da.prototype.insert=function(a,n,u,p,v){this._forEachCell(n,u,p,v,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(v)},da.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},da.prototype._insertCell=function(a,n,u,p,v,E){this.cells[v].push(E)},da.prototype.query=function(a,n,u,p,v){var E=this.min,A=this.max;if(a<=E&&n<=E&&A<=u&&A<=p&&!v)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(a,n,u,p,this._queryCell,R,{},v),R},da.prototype._queryCell=function(a,n,u,p,v,E,A,R){var H=this.cells[v];if(null!==H)for(var j=this.keys,ee=this.bboxes,se=0;se<H.length;se++){var ce=H[se];if(void 0===A[ce]){var ve=4*ce;(R?R(ee[ve+0],ee[ve+1],ee[ve+2],ee[ve+3]):a<=ee[ve+2]&&n<=ee[ve+3]&&u>=ee[ve+0]&&p>=ee[ve+1])?(A[ce]=!0,E.push(j[ce])):A[ce]=!1}}},da.prototype._forEachCell=function(a,n,u,p,v,E,A,R){for(var H=this._convertToCellCoord(a),j=this._convertToCellCoord(n),ee=this._convertToCellCoord(u),se=this._convertToCellCoord(p),ce=H;ce<=ee;ce++)for(var ve=j;ve<=se;ve++){var be=this.d*ve+ce;if((!R||R(this._convertFromCellCoord(ce),this._convertFromCellCoord(ve),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(ve+1)))&&v.call(this,a,n,u,p,be,E,A,R))return}},da.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},da.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},da.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,n=wl+this.cells.length+1+1,u=0,p=0;p<this.cells.length;p++)u+=this.cells[p].length;var v=new Int32Array(n+u+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var E=n,A=0;A<a.length;A++){var R=a[A];v[wl+A]=E,v.set(R,E),E+=R.length}return v[wl+a.length]=E,v.set(this.keys,E),v[wl+a.length+1]=E+=this.keys.length,v.set(this.bboxes,E),E+=this.bboxes.length,v.buffer};var Hl=vt(Yl);const ha={};function Sn(a,n,u={}){Object.defineProperty(a,"_classRegistryKey",{value:n,writeable:!1}),ha[n]={klass:a,omit:u.omit||[]}}Sn(Object,"Object"),Hl.serialize=function(a,n){const u=a.toArrayBuffer();return n&&n.push(u),{buffer:u}},Hl.deserialize=function(a){return new Hl(a.buffer)},Object.defineProperty(Hl,"name",{value:"Grid"}),Sn(Hl,"Grid"),Sn(Mr,"Color"),Sn(Error,"Error"),Sn(er,"AJAXError"),Sn(Xr,"ResolvedImage"),Sn(Ya,"StylePropertyFunction"),Sn(bl,"StyleExpression",{omit:["_evaluator"]}),Sn(xl,"ZoomDependentExpression"),Sn(Sc,"ZoomConstantExpression"),Sn(js,"CompoundExpression",{omit:["_evaluate"]});for(const a in So)ha[So[a]._classRegistryKey]||Sn(So[a],`Expression${a}`);function Rh(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&"ArrayBuffer"===a.constructor.name)}function jd(a){return V.ImageBitmap&&a instanceof V.ImageBitmap}function uc(a,n){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Rh(a)||jd(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const u=a;return n&&n.push(u.buffer),u}if(a instanceof V.ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const u=[];for(const p of a)u.push(uc(p,n));return u}if("object"==typeof a){const u=a.constructor,p=u._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${p}`);const v=u.serialize?u.serialize(a,n):{};if(!u.serialize){for(const E in a)a.hasOwnProperty(E)&&(ha[p].omit.indexOf(E)>=0||(v[E]=uc(a[E],n)));a instanceof Error&&(v.message=a.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==p&&(v.$name=p),v}throw new Error("can't serialize object of type "+typeof a)}function Vc(a){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Rh(a)||jd(a)||ArrayBuffer.isView(a)||a instanceof V.ImageData)return a;if(Array.isArray(a))return a.map(Vc);if("object"==typeof a){const n=a.$name||"Object",{klass:u}=ha[n];if(!u)throw new Error(`can't deserialize unregistered class ${n}`);if(u.deserialize)return u.deserialize(a);const p=Object.create(u.prototype);for(const v of Object.keys(a))"$name"!==v&&(p[v]=Vc(a[v]));return p}throw new Error("can't deserialize object of type "+typeof a)}const yn={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function vd(a){for(const n of a)if(ko(n.charCodeAt(0)))return!0;return!1}function zh(a){for(const n of a)if(!Ud(n.charCodeAt(0)))return!1;return!0}function Ud(a){return!(yn.Arabic(a)||yn["Arabic Supplement"](a)||yn["Arabic Extended-A"](a)||yn["Arabic Presentation Forms-A"](a)||yn["Arabic Presentation Forms-B"](a))}function ko(a){return!(746!==a&&747!==a&&(a<4352||!(yn["Bopomofo Extended"](a)||yn.Bopomofo(a)||yn["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||yn["CJK Compatibility Ideographs"](a)||yn["CJK Compatibility"](a)||yn["CJK Radicals Supplement"](a)||yn["CJK Strokes"](a)||!(!yn["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||12336===a)||yn["CJK Unified Ideographs Extension A"](a)||yn["CJK Unified Ideographs"](a)||yn["Enclosed CJK Letters and Months"](a)||yn["Hangul Compatibility Jamo"](a)||yn["Hangul Jamo Extended-A"](a)||yn["Hangul Jamo Extended-B"](a)||yn["Hangul Jamo"](a)||yn["Hangul Syllables"](a)||yn.Hiragana(a)||yn["Ideographic Description Characters"](a)||yn.Kanbun(a)||yn["Kangxi Radicals"](a)||yn["Katakana Phonetic Extensions"](a)||yn.Katakana(a)&&12540!==a||!(!yn["Halfwidth and Fullwidth Forms"](a)||65288===a||65289===a||65293===a||a>=65306&&a<=65310||65339===a||65341===a||65343===a||a>=65371&&a<=65503||65507===a||a>=65512&&a<=65519)||!(!yn["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||yn["Unified Canadian Aboriginal Syllabics"](a)||yn["Unified Canadian Aboriginal Syllabics Extended"](a)||yn["Vertical Forms"](a)||yn["Yijing Hexagram Symbols"](a)||yn["Yi Syllables"](a)||yn["Yi Radicals"](a))))}function Wd(a){return!(ko(a)||(n=a,yn["Latin-1 Supplement"](n)&&(167===n||169===n||174===n||177===n||188===n||189===n||190===n||215===n||247===n)||yn["General Punctuation"](n)&&(8214===n||8224===n||8225===n||8240===n||8241===n||8251===n||8252===n||8258===n||8263===n||8264===n||8265===n||8273===n)||yn["Letterlike Symbols"](n)||yn["Number Forms"](n)||yn["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||9003===n||n>=9085&&n<=9114||n>=9150&&n<=9165||9167===n||n>=9169&&n<=9179||n>=9186&&n<=9215)||yn["Control Pictures"](n)&&9251!==n||yn["Optical Character Recognition"](n)||yn["Enclosed Alphanumerics"](n)||yn["Geometric Shapes"](n)||yn["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||yn["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||yn["CJK Symbols and Punctuation"](n)||yn.Katakana(n)||yn["Private Use Area"](n)||yn["CJK Compatibility Forms"](n)||yn["Small Form Variants"](n)||yn["Halfwidth and Fullwidth Forms"](n)||8734===n||8756===n||8757===n||n>=9984&&n<=10087||n>=10102&&n<=10131||65532===n||65533===n));var n}function Cp(a){return a>=1424&&a<=2303||yn["Arabic Presentation Forms-A"](a)||yn["Arabic Presentation Forms-B"](a)}function Rf(a,n){return!(!n&&Cp(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||yn.Khmer(a))}function nl(a){for(const n of a)if(Cp(n.charCodeAt(0)))return!0;return!1}const Mc="deferred",$d="loading",Xd="loaded";let wu=null,C="unavailable",d=null;const g=function(a){a&&"string"==typeof a&&a.indexOf("NetworkError")>-1&&(C="error"),wu&&wu(a)};function T(){P.fire(new b("pluginStateChange",{pluginStatus:C,pluginURL:d}))}const P=new M,B=function(){return C},X=function(){if(C!==Mc||!d)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");C=$d,T(),d&&Cr({url:d},a=>{a?g(a):(C=Xd,T())})},K={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>C===Xd||null!=K.applyArabicShaping,isLoading:()=>C===$d,setState(a){C=a.pluginStatus,d=a.pluginURL},isParsed:()=>null!=K.applyArabicShaping&&null!=K.processBidirectionalText&&null!=K.processStyledBidirectionalText,getPluginURL:()=>d};class te{constructor(n,u){this.zoom=n,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(u,p){for(const v of u)if(!Rf(v.charCodeAt(0),p))return!1;return!0}(n,K.isLoaded())}}class he{constructor(n,u){this.property=n,this.value=u,this.expression=function(p,v){if(Fl(p))return new Ya(p,v);if(Sa(p)){const E=Tc(p,v);if("error"===E.result)throw new Error(E.value.map(A=>`${A.key}: ${A.message}`).join(", "));return E.value}{let E=p;return"string"==typeof p&&"color"===v.type&&(E=Mr.parse(p)),{kind:"constant",evaluate:()=>E}}}(void 0===u?n.specification.default:u,n.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(n,u,p){return this.property.possiblyEvaluate(this,n,u,p)}}class ue{constructor(n){this.property=n,this.value=new he(n,void 0)}transitioned(n,u){return new Ve(this.property,this.value,u,mn({},n.transition,this.transition),n.now)}untransitioned(){return new Ve(this.property,this.value,null,{},0)}}class Ce{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return sr(this._values[n].value.value)}setValue(n,u){this._values.hasOwnProperty(n)||(this._values[n]=new ue(this._values[n].property)),this._values[n].value=new he(this._values[n].property,null===u?void 0:sr(u))}getTransition(n){return sr(this._values[n].transition)}setTransition(n,u){this._values.hasOwnProperty(n)||(this._values[n]=new ue(this._values[n].property)),this._values[n].transition=sr(u)||void 0}serialize(){const n={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(n[u]=p);const v=this.getTransition(u);void 0!==v&&(n[`${u}-transition`]=v)}return n}transitioned(n,u){const p=new Qe(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].transitioned(n,u._values[v]);return p}untransitioned(){const n=new Qe(this._properties);for(const u of Object.keys(this._values))n._values[u]=this._values[u].untransitioned();return n}}class Ve{constructor(n,u,p,v,E){const A=v.delay||0,R=v.duration||0;E=E||0,this.property=n,this.value=u,this.begin=E+A,this.end=this.begin+R,n.specification.transition&&(v.delay||v.duration)&&(this.prior=p)}possiblyEvaluate(n,u,p){const v=n.now||0,E=this.value.possiblyEvaluate(n,u,p),A=this.prior;if(A){if(v>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(v<this.begin)return A.possiblyEvaluate(n,u,p);{const R=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(n,u,p),E,ri(R))}}return E}}class Qe{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,u,p){const v=new st(this._properties);for(const E of Object.keys(this._values))v._values[E]=this._values[E].possiblyEvaluate(n,u,p);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class et{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return sr(this._values[n].value)}setValue(n,u){this._values[n]=new he(this._values[n].property,null===u?void 0:sr(u))}serialize(){const n={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(n[u]=p)}return n}possiblyEvaluate(n,u,p){const v=new st(this._properties);for(const E of Object.keys(this._values))v._values[E]=this._values[E].possiblyEvaluate(n,u,p);return v}}class tt{constructor(n,u,p){this.property=n,this.value=u,this.parameters=p}isConstant(){return"constant"===this.value.kind}constantOr(n){return"constant"===this.value.kind?this.value.value:n}evaluate(n,u,p,v){return this.property.evaluate(this.value,this.parameters,n,u,p,v)}}class st{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Te{constructor(n){this.specification=n}possiblyEvaluate(n,u){return n.expression.evaluate(u)}interpolate(n,u,p){const v=fl[this.specification.type];return v?v(n,u,p):n}}class Ke{constructor(n,u){this.specification=n,this.overrides=u}possiblyEvaluate(n,u,p,v){return new tt(this,"constant"===n.expression.kind||"camera"===n.expression.kind?{kind:"constant",value:n.expression.evaluate(u,null,{},p,v)}:n.expression,u)}interpolate(n,u,p){if("constant"!==n.value.kind||"constant"!==u.value.kind)return n;if(void 0===n.value.value||void 0===u.value.value)return new tt(this,{kind:"constant",value:void 0},n.parameters);const v=fl[this.specification.type];return v?new tt(this,{kind:"constant",value:v(n.value.value,u.value.value,p)},n.parameters):n}evaluate(n,u,p,v,E,A){return"constant"===n.kind?n.value:n.evaluate(u,p,v,E,A)}}class bt{constructor(n){this.specification=n}possiblyEvaluate(n,u,p,v){return!!n.expression.evaluate(u,null,{},p,v)}interpolate(){return!1}}class xt{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new te(0,{});for(const p in n){const v=n[p];v.specification.overridable&&this.overridableProperties.push(p);const E=this.defaultPropertyValues[p]=new he(v,void 0),A=this.defaultTransitionablePropertyValues[p]=new ue(v);this.defaultTransitioningPropertyValues[p]=A.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=E.possiblyEvaluate(u)}}}function Ht(a,n){return 256*(a=_i(Math.floor(a),0,255))+_i(Math.floor(n),0,255)}Sn(Ke,"DataDrivenProperty"),Sn(Te,"DataConstantProperty"),Sn(bt,"ColorRampProperty");const Gt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ut{constructor(n,u){this._structArray=n,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ti{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,u){return n._trim(),u&&(n.isTransferred=!0,u.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const u=Object.create(this.prototype);return u.arrayBuffer=n.arrayBuffer,u.length=n.length,u.capacity=n.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Qt(a,n=1){let u=0,p=0;return{members:a.map(v=>{const E=Gt[v.type].BYTES_PER_ELEMENT,A=u=gi(u,Math.max(n,E)),R=v.components||1;return p=Math.max(p,E),u+=E*R,{name:v.name,type:v.type,components:R,offset:A}}),size:gi(u,Math.max(p,n)),alignment:n}}function gi(a,n){return Math.ceil(a/n)*n}class Ji extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u){const p=this.length;return this.resize(p+1),this.emplace(p,n,u)}emplace(n,u,p){const v=2*n;return this.int16[v+0]=u,this.int16[v+1]=p,n}}Ji.prototype.bytesPerElement=4,Sn(Ji,"StructArrayLayout2i4");class Zt extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,u,p)}emplace(n,u,p,v){const E=3*n;return this.int16[E+0]=u,this.int16[E+1]=p,this.int16[E+2]=v,n}}Zt.prototype.bytesPerElement=6,Sn(Zt,"StructArrayLayout3i6");class Oi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const A=4*n;return this.int16[A+0]=u,this.int16[A+1]=p,this.int16[A+2]=v,this.int16[A+3]=E,n}}Oi.prototype.bytesPerElement=8,Sn(Oi,"StructArrayLayout4i8");class yi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A,R){const H=this.length;return this.resize(H+1),this.emplace(H,n,u,p,v,E,A,R)}emplace(n,u,p,v,E,A,R,H){const j=6*n,ee=12*n,se=3*n;return this.int16[j+0]=u,this.int16[j+1]=p,this.uint8[ee+4]=v,this.uint8[ee+5]=E,this.uint8[ee+6]=A,this.uint8[ee+7]=R,this.float32[se+2]=H,n}}yi.prototype.bytesPerElement=12,Sn(yi,"StructArrayLayout2i4ub1f12");class Qi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const A=4*n;return this.float32[A+0]=u,this.float32[A+1]=p,this.float32[A+2]=v,this.float32[A+3]=E,n}}Qi.prototype.bytesPerElement=16,Sn(Qi,"StructArrayLayout4f16");class vi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E){const A=this.length;return this.resize(A+1),this.emplace(A,n,u,p,v,E)}emplace(n,u,p,v,E,A){const R=6*n,H=3*n;return this.uint16[R+0]=u,this.uint16[R+1]=p,this.uint16[R+2]=v,this.uint16[R+3]=E,this.float32[H+2]=A,n}}vi.prototype.bytesPerElement=12,Sn(vi,"StructArrayLayout4ui1f12");class Ii extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const A=4*n;return this.uint16[A+0]=u,this.uint16[A+1]=p,this.uint16[A+2]=v,this.uint16[A+3]=E,n}}Ii.prototype.bytesPerElement=8,Sn(Ii,"StructArrayLayout4ui8");class nn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A){const R=this.length;return this.resize(R+1),this.emplace(R,n,u,p,v,E,A)}emplace(n,u,p,v,E,A,R){const H=6*n;return this.int16[H+0]=u,this.int16[H+1]=p,this.int16[H+2]=v,this.int16[H+3]=E,this.int16[H+4]=A,this.int16[H+5]=R,n}}nn.prototype.bytesPerElement=12,Sn(nn,"StructArrayLayout6i12");class $i extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A,R,H,j,ee,se,ce){const ve=this.length;return this.resize(ve+1),this.emplace(ve,n,u,p,v,E,A,R,H,j,ee,se,ce)}emplace(n,u,p,v,E,A,R,H,j,ee,se,ce,ve){const be=12*n;return this.int16[be+0]=u,this.int16[be+1]=p,this.int16[be+2]=v,this.int16[be+3]=E,this.uint16[be+4]=A,this.uint16[be+5]=R,this.uint16[be+6]=H,this.uint16[be+7]=j,this.int16[be+8]=ee,this.int16[be+9]=se,this.int16[be+10]=ce,this.int16[be+11]=ve,n}}$i.prototype.bytesPerElement=24,Sn($i,"StructArrayLayout4i4ui4i24");class Ki extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A){const R=this.length;return this.resize(R+1),this.emplace(R,n,u,p,v,E,A)}emplace(n,u,p,v,E,A,R){const H=10*n,j=5*n;return this.int16[H+0]=u,this.int16[H+1]=p,this.int16[H+2]=v,this.float32[j+2]=E,this.float32[j+3]=A,this.float32[j+4]=R,n}}Ki.prototype.bytesPerElement=20,Sn(Ki,"StructArrayLayout3i3f20");class Hn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint32[1*n+0]=u,n}}Hn.prototype.bytesPerElement=4,Sn(Hn,"StructArrayLayout1ul4");class nr extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A,R,H,j,ee,se,ce,ve){const be=this.length;return this.resize(be+1),this.emplace(be,n,u,p,v,E,A,R,H,j,ee,se,ce,ve)}emplace(n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be){const Ae=20*n,$e=10*n;return this.int16[Ae+0]=u,this.int16[Ae+1]=p,this.int16[Ae+2]=v,this.int16[Ae+3]=E,this.int16[Ae+4]=A,this.float32[$e+3]=R,this.float32[$e+4]=H,this.float32[$e+5]=j,this.float32[$e+6]=ee,this.int16[Ae+14]=se,this.uint32[$e+8]=ce,this.uint16[Ae+18]=ve,this.uint16[Ae+19]=be,n}}nr.prototype.bytesPerElement=40,Sn(nr,"StructArrayLayout5i4f1i1ul2ui40");class Ln extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A,R){const H=this.length;return this.resize(H+1),this.emplace(H,n,u,p,v,E,A,R)}emplace(n,u,p,v,E,A,R,H){const j=8*n;return this.int16[j+0]=u,this.int16[j+1]=p,this.int16[j+2]=v,this.int16[j+4]=E,this.int16[j+5]=A,this.int16[j+6]=R,this.int16[j+7]=H,n}}Ln.prototype.bytesPerElement=16,Sn(Ln,"StructArrayLayout3i2i2i16");class Xn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E){const A=this.length;return this.resize(A+1),this.emplace(A,n,u,p,v,E)}emplace(n,u,p,v,E,A){const R=4*n,H=8*n;return this.float32[R+0]=u,this.float32[R+1]=p,this.float32[R+2]=v,this.int16[H+6]=E,this.int16[H+7]=A,n}}Xn.prototype.bytesPerElement=16,Sn(Xn,"StructArrayLayout2f1f2i16");class Zn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const A=12*n,R=3*n;return this.uint8[A+0]=u,this.uint8[A+1]=p,this.float32[R+1]=v,this.float32[R+2]=E,n}}Zn.prototype.bytesPerElement=12,Sn(Zn,"StructArrayLayout2ub2f12");class tr extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,u,p)}emplace(n,u,p,v){const E=3*n;return this.float32[E+0]=u,this.float32[E+1]=p,this.float32[E+2]=v,n}}tr.prototype.bytesPerElement=12,Sn(tr,"StructArrayLayout3f12");class zn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,u,p)}emplace(n,u,p,v){const E=3*n;return this.uint16[E+0]=u,this.uint16[E+1]=p,this.uint16[E+2]=v,n}}zn.prototype.bytesPerElement=6,Sn(zn,"StructArrayLayout3ui6");class Pr extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae,$e,dt,Ot,ct,At,Nt){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae,$e,dt,Ot,ct,At,Nt)}emplace(n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae,$e,dt,Ot,ct,At,Nt,Bt){const bi=30*n,hi=15*n,Li=60*n;return this.int16[bi+0]=u,this.int16[bi+1]=p,this.int16[bi+2]=v,this.float32[hi+2]=E,this.float32[hi+3]=A,this.uint16[bi+8]=R,this.uint16[bi+9]=H,this.uint32[hi+5]=j,this.uint32[hi+6]=ee,this.uint32[hi+7]=se,this.uint16[bi+16]=ce,this.uint16[bi+17]=ve,this.uint16[bi+18]=be,this.float32[hi+10]=Ae,this.float32[hi+11]=$e,this.uint8[Li+48]=dt,this.uint8[Li+49]=Ot,this.uint8[Li+50]=ct,this.uint32[hi+13]=At,this.int16[bi+28]=Nt,this.uint8[Li+58]=Bt,n}}Pr.prototype.bytesPerElement=60,Sn(Pr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ur extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae,$e,dt,Ot,ct,At,Nt,Bt,bi,hi,Li,rn,Si,Ni,Yi,Zi){const an=this.length;return this.resize(an+1),this.emplace(an,n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae,$e,dt,Ot,ct,At,Nt,Bt,bi,hi,Li,rn,Si,Ni,Yi,Zi)}emplace(n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae,$e,dt,Ot,ct,At,Nt,Bt,bi,hi,Li,rn,Si,Ni,Yi,Zi,an){const Di=38*n,bn=19*n;return this.int16[Di+0]=u,this.int16[Di+1]=p,this.int16[Di+2]=v,this.float32[bn+2]=E,this.float32[bn+3]=A,this.int16[Di+8]=R,this.int16[Di+9]=H,this.int16[Di+10]=j,this.int16[Di+11]=ee,this.int16[Di+12]=se,this.int16[Di+13]=ce,this.uint16[Di+14]=ve,this.uint16[Di+15]=be,this.uint16[Di+16]=Ae,this.uint16[Di+17]=$e,this.uint16[Di+18]=dt,this.uint16[Di+19]=Ot,this.uint16[Di+20]=ct,this.uint16[Di+21]=At,this.uint16[Di+22]=Nt,this.uint16[Di+23]=Bt,this.uint16[Di+24]=bi,this.uint16[Di+25]=hi,this.uint16[Di+26]=Li,this.uint16[Di+27]=rn,this.uint16[Di+28]=Si,this.uint32[bn+15]=Ni,this.float32[bn+16]=Yi,this.float32[bn+17]=Zi,this.float32[bn+18]=an,n}}Ur.prototype.bytesPerElement=76,Sn(Ur,"StructArrayLayout3i2f6i15ui1ul3f76");class ms extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.float32[1*n+0]=u,n}}ms.prototype.bytesPerElement=4,Sn(ms,"StructArrayLayout1f4");class gs extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E){const A=this.length;return this.resize(A+1),this.emplace(A,n,u,p,v,E)}emplace(n,u,p,v,E,A){const R=5*n;return this.float32[R+0]=u,this.float32[R+1]=p,this.float32[R+2]=v,this.float32[R+3]=E,this.float32[R+4]=A,n}}gs.prototype.bytesPerElement=20,Sn(gs,"StructArrayLayout5f20");class cs extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const A=6*n;return this.uint32[3*n+0]=u,this.uint16[A+2]=p,this.uint16[A+3]=v,this.uint16[A+4]=E,n}}cs.prototype.bytesPerElement=12,Sn(cs,"StructArrayLayout1ul3ui12");class Ls extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u){const p=this.length;return this.resize(p+1),this.emplace(p,n,u)}emplace(n,u,p){const v=2*n;return this.uint16[v+0]=u,this.uint16[v+1]=p,n}}Ls.prototype.bytesPerElement=4,Sn(Ls,"StructArrayLayout2ui4");class ka extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint16[1*n+0]=u,n}}ka.prototype.bytesPerElement=2,Sn(ka,"StructArrayLayout1ui2");class qo extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u){const p=this.length;return this.resize(p+1),this.emplace(p,n,u)}emplace(n,u,p){const v=2*n;return this.float32[v+0]=u,this.float32[v+1]=p,n}}qo.prototype.bytesPerElement=8,Sn(qo,"StructArrayLayout2f8");class Os extends Ut{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Os.prototype.size=40;class qr extends nr{get(n){return new Os(this,n)}}Sn(qr,"CollisionBoxArray");class Jr extends Ut{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}Jr.prototype.size=60;class Ps extends Pr{get(n){return new Jr(this,n)}}Sn(Ps,"PlacedSymbolArray");class Ma extends Ut{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ma.prototype.size=76;class xs extends Ur{get(n){return new Ma(this,n)}}Sn(xs,"SymbolInstanceArray");class jr extends ms{getoffsetX(n){return this.float32[1*n+0]}}Sn(jr,"GlyphOffsetArray");class Cu extends Ji{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Sn(Cu,"SymbolLineVertexArray");class Cl extends Ut{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Cl.prototype.size=12;class Vl extends cs{get(n){return new Cl(this,n)}}Sn(Vl,"FeatureIndexArray");class dc extends Ls{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Sn(dc,"FillExtrusionCentroidArray");const El=Qt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Gc=Qt([{name:"a_dash",components:4,type:"Uint16"}]);var qu={exports:{}},Ep=function(a,n){var u,p,v,E,A,R,H,j;for(p=a.length-(u=3&a.length),v=n,A=3432918353,R=461845907,j=0;j<p;)H=255&a.charCodeAt(j)|(255&a.charCodeAt(++j))<<8|(255&a.charCodeAt(++j))<<16|(255&a.charCodeAt(++j))<<24,++j,v=27492+(65535&(E=5*(65535&(v=(v^=H=(65535&(H=(H=(65535&H)*A+(((H>>>16)*A&65535)<<16)&4294967295)<<15|H>>>17))*R+(((H>>>16)*R&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(H=0,u){case 3:H^=(255&a.charCodeAt(j+2))<<16;case 2:H^=(255&a.charCodeAt(j+1))<<8;case 1:v^=H=(65535&(H=(H=(65535&(H^=255&a.charCodeAt(j)))*A+(((H>>>16)*A&65535)<<16)&4294967295)<<15|H>>>17))*R+(((H>>>16)*R&65535)<<16)&4294967295}return v^=a.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0},Eu=function(a,n){for(var u,p=a.length,v=n^p,E=0;p>=4;)u=1540483477*(65535&(u=255&a.charCodeAt(E)|(255&a.charCodeAt(++E))<<8|(255&a.charCodeAt(++E))<<16|(255&a.charCodeAt(++E))<<24))+((1540483477*(u>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++E;switch(p){case 3:v^=(255&a.charCodeAt(E+2))<<16;case 2:v^=(255&a.charCodeAt(E+1))<<8;case 1:v=1540483477*(65535&(v^=255&a.charCodeAt(E)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};qu.exports=Ep,qu.exports.murmur3=Ep,qu.exports.murmur2=Eu;var Fh=vt(qu.exports);class Su{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,u,p,v){this.ids.push(zf(n)),this.positions.push(u,p,v)}getPositions(n){const u=zf(n);let p=0,v=this.ids.length-1;for(;p<v;){const A=p+v>>1;this.ids[A]>=u?v=A:p=A+1}const E=[];for(;this.ids[p]===u;)E.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return E}static serialize(n,u){const p=new Float64Array(n.ids),v=new Uint32Array(n.positions);return Sp(p,v,0,p.length-1),u&&u.push(p.buffer,v.buffer),{ids:p,positions:v}}static deserialize(n){const u=new Su;return u.ids=n.ids,u.positions=n.positions,u.indexed=!0,u}}function zf(a){const n=+a;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:Fh(String(a))}function Sp(a,n,u,p){for(;u<p;){const v=a[u+p>>1];let E=u-1,A=p+1;for(;;){do{E++}while(a[E]<v);do{A--}while(a[A]>v);if(E>=A)break;_d(a,E,A),_d(n,3*E,3*A),_d(n,3*E+1,3*A+1),_d(n,3*E+2,3*A+2)}A-u<p-A?(Sp(a,n,u,A),u=A+1):(Sp(a,n,A+1,p),p=A)}}function _d(a,n,u){const p=a[n];a[n]=a[u],a[u]=p}Sn(Su,"FeaturePositionMap");class Qn{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,u),this.initialized=!0),!!this.location}}class Ku extends Qn{constructor(n){super(n),this.current=0}set(n,u,p){this.fetchUniformLocation(n,u)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class tg extends Qn{constructor(n){super(n),this.current=[0,0,0,0]}set(n,u,p){this.fetchUniformLocation(n,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class ig extends Qn{constructor(n){super(n),this.current=Mr.transparent}set(n,u,p){this.fetchUniformLocation(n,u)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const Ff=new Float32Array(16),Bh=new Float32Array(9),Nh=new Float32Array(4);function Tp(a){return[Ht(255*a.r,255*a.g),Ht(255*a.b,255*a.a)]}class Zd{constructor(n,u,p){this.value=n,this.uniformNames=u.map(v=>`u_${v}`),this.type=p}setUniform(n,u,p,v,E){u.set(n,E,v.constantOr(this.value))}getBinding(n,u){return"color"===this.type?new ig(n):new Ku(n)}}class yd{constructor(n,u){this.uniformNames=u.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,u,p,v,E){const A="u_pattern"===E||"u_dash"===E?this.pattern:"u_pixel_ratio"===E?this.pixelRatio:null;A&&u.set(n,E,A)}getBinding(n,u){return"u_pattern"===u||"u_dash"===u?new tg(n):new Ku(n)}}class Uc{constructor(n,u,p,v){this.expression=n,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===p?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,u,p,v,E,A){const R=this.paintVertexArray.length,H=this.expression.evaluate(new te(0),u,{},E,v,A);this.paintVertexArray.resize(n),this._setPaintValue(R,n,H)}updatePaintArray(n,u,p,v,E){const A=this.expression.evaluate({zoom:0},p,v,void 0,E);this._setPaintValue(n,u,A)}_setPaintValue(n,u,p){if("color"===this.type){const v=Tp(p);for(let E=n;E<u;E++)this.paintVertexArray.emplace(E,v[0],v[1])}else{for(let v=n;v<u;v++)this.paintVertexArray.emplace(v,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zo{constructor(n,u,p,v,E,A){this.expression=n,this.uniformNames=u.map(R=>`u_${R}_t`),this.type=p,this.useIntegerZoom=v,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(R=>({name:`a_${R}`,type:"Float32",components:"color"===p?4:2,offset:0})),this.paintVertexArray=new A}populatePaintArray(n,u,p,v,E,A){const R=this.expression.evaluate(new te(this.zoom),u,{},E,v,A),H=this.expression.evaluate(new te(this.zoom+1),u,{},E,v,A),j=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(j,n,R,H)}updatePaintArray(n,u,p,v,E){const A=this.expression.evaluate({zoom:this.zoom},p,v,void 0,E),R=this.expression.evaluate({zoom:this.zoom+1},p,v,void 0,E);this._setPaintValue(n,u,A,R)}_setPaintValue(n,u,p,v){if("color"===this.type){const E=Tp(p),A=Tp(v);for(let R=n;R<u;R++)this.paintVertexArray.emplace(R,E[0],E[1],A[0],A[1])}else{for(let E=n;E<u;E++)this.paintVertexArray.emplace(E,p,v);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,u,p,v,E){const A=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,R=_i(this.expression.interpolationFactor(A,this.zoom,this.zoom+1),0,1);u.set(n,E,R)}getBinding(n,u){return new Ku(n)}}class Wc{constructor(n,u,p,v,E){this.expression=n,this.layerId=E,this.paintVertexAttributes=("array"===p?Gc:El).members;for(let A=0;A<u.length;++A);this.paintVertexArray=new v}populatePaintArray(n,u,p){const v=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(v,n,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(n,u,p,v,E,A){this._setPaintValues(n,u,p.patterns&&p.patterns[this.layerId],A)}_setPaintValues(n,u,p,v){if(!v||!p)return;const E=v[p];if(!E)return;const{tl:A,br:R,pixelRatio:H}=E;for(let j=n;j<u;j++)this.paintVertexArray.emplace(j,A[0],A[1],R[0],R[1],H)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Tu{constructor(n,u,p=(()=>!0)){this.binders={},this._buffers=[];const v=[];for(const E in n.paint._values){if(!p(E))continue;const A=n.paint.get(E);if(!(A instanceof tt&&Po(A.property.specification)))continue;const R=rg(E,n.type),H=A.value,j=A.property.specification.type,ee=!!A.property.useIntegerZoom,se="line-dasharray"===E||E.endsWith("pattern"),ce="line-dasharray"===E&&"constant"!==n.layout.get("line-cap").value.kind;if("constant"!==H.kind||ce)if("source"===H.kind||ce||se){const ve=Mu(E,j,"source");this.binders[E]=se?new Wc(H,R,j,ve,n.id):new Uc(H,R,j,ve),v.push(`/a_${E}`)}else{const ve=Mu(E,j,"composite");this.binders[E]=new zo(H,R,j,ee,u,ve),v.push(`/z_${E}`)}else this.binders[E]=se?new yd(H.value,R):new Zd(H.value,R,j),v.push(`/u_${E}`)}this.cacheKey=v.sort().join("")}getMaxValue(n){const u=this.binders[n];return u instanceof Uc||u instanceof zo?u.maxValue:0}populatePaintArrays(n,u,p,v,E,A){for(const R in this.binders){const H=this.binders[R];(H instanceof Uc||H instanceof zo||H instanceof Wc)&&H.populatePaintArray(n,u,p,v,E,A)}}setConstantPatternPositions(n){for(const u in this.binders){const p=this.binders[u];p instanceof yd&&p.setConstantPatternPositions(n)}}updatePaintArrays(n,u,p,v,E,A){let R=!1;for(const H in n){const j=u.getPositions(H);for(const ee of j){const se=p.feature(ee.index);for(const ce in this.binders){const ve=this.binders[ce];if((ve instanceof Uc||ve instanceof zo||ve instanceof Wc)&&!0===ve.expression.isStateDependent){const be=v.paint.get(ce);ve.expression=be.value,ve.updatePaintArray(ee.start,ee.end,se,n[H],E,A),R=!0}}}}return R}defines(){const n=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Zd||p instanceof yd)&&n.push(...p.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return n}getBinderAttributes(){const n=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Uc||p instanceof zo||p instanceof Wc)for(let v=0;v<p.paintVertexAttributes.length;v++)n.push(p.paintVertexAttributes[v].name)}return n}getBinderUniforms(){const n=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Zd||p instanceof yd||p instanceof zo)for(const v of p.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const u=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Zd||v instanceof yd||v instanceof zo)for(const E of v.uniformNames)u.push({name:E,property:p,binding:v.getBinding(n,E)})}return u}setUniforms(n,u,p,v,E){for(const{name:A,property:R,binding:H}of p)this.binders[R].setUniform(n,H,E,v.get(R),A)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const u=this.binders[n];(u instanceof Uc||u instanceof zo||u instanceof Wc)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(n){for(const u in this.binders){const p=this.binders[u];(p instanceof Uc||p instanceof zo||p instanceof Wc)&&p.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const u=this.binders[n];(u instanceof Uc||u instanceof zo||u instanceof Wc)&&u.destroy()}}}class ku{constructor(n,u,p=(()=>!0)){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Tu(v,u,p);this.needsUpload=!1,this._featureMap=new Su,this._bufferOffset=0}populatePaintArrays(n,u,p,v,E,A,R){for(const H in this.programConfigurations)this.programConfigurations[H].populatePaintArrays(n,u,v,E,A,R);void 0!==u.id&&this._featureMap.add(u.id,p,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,u,p,v,E){for(const A of p)this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(n,this._featureMap,u,A,v,E)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const ng={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function rg(a,n){return ng[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}const kp={"line-pattern":{source:vi,composite:vi},"fill-pattern":{source:vi,composite:vi},"fill-extrusion-pattern":{source:vi,composite:vi},"line-dasharray":{source:Ii,composite:Ii}},Mp={color:{source:qo,composite:Qi},number:{source:ms,composite:qo}};function Mu(a,n,u){const p=kp[a];return p&&p[u]||Mp[n][u]}Sn(Zd,"ConstantBinder"),Sn(yd,"PatternConstantBinder"),Sn(Uc,"SourceExpressionBinder"),Sn(Wc,"PatternCompositeBinder"),Sn(zo,"CompositeExpressionBinder"),Sn(Tu,"ProgramConfiguration",{omit:["_buffers"]}),Sn(ku,"ProgramConfigurationSet");const sg="-transition";class Sl extends M{constructor(n,u){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==n.type&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,"background"!==n.type&&"sky"!==n.type&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),u.layout&&(this._unevaluatedLayout=new et(u.layout)),u.paint)){this._transitionablePaint=new Ce(u.paint);for(const p in n.paint)this.setPaintProperty(p,n.paint[p],{validate:!1});for(const p in n.layout)this.setLayoutProperty(p,n.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new st(u.paint)}}getLayoutProperty(n){return"visibility"===n?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,u,p={}){null!=u&&this._validate(Ph,`layers.${this.id}.layout.${n}`,n,u,p)||("visibility"!==n?this._unevaluatedLayout.setValue(n,u):this.visibility=u)}getPaintProperty(n){return An(n,sg)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,u,p={}){if(null!=u&&this._validate(Pf,`layers.${this.id}.paint.${n}`,n,u,p))return!1;if(An(n,sg))return this._transitionablePaint.setTransition(n.slice(0,-11),u||void 0),!1;{const v=this._transitionablePaint._values[n],E=v.value.isDataDriven(),A=v.value;this._transitionablePaint.setValue(n,u),this._handleSpecialPaintPropertyUpdate(n);const R=this._transitionablePaint._values[n].value,H=R.isDataDriven(),j=An(n,"pattern")||"line-dasharray"===n;return H||E||j||this._handleOverridablePaintPropertyUpdate(n,A,R)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,u,p){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||"none"===this.visibility}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,u)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),kr(n,(u,p)=>!(void 0===u||"layout"===p&&!Object.keys(u).length||"paint"===p&&!Object.keys(u).length))}_validate(n,u,p,v,E={}){return(!E||!1!==E.validate)&&wp(this,n.call(Gd,{key:u,layerType:this.type,objectKey:p,value:v,styleSpec:I,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const u=this.paint.get(n);if(u instanceof tt&&Po(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ki(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const qd=Qt([{name:"a_pos",components:2,type:"Int16"}],4),Bf=Qt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Xs{constructor(n=[]){this.segments=n}prepareSegment(n,u,p,v){let E=this.segments[this.segments.length-1];return n>Xs.MAX_VERTEX_ARRAY_LENGTH&&wn(`Max vertices per segment is ${Xs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!E||E.vertexLength+n>Xs.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==v)&&(E={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},void 0!==v&&(E.sortKey=v),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const n of this.segments)for(const u in n.vaos)n.vaos[u].destroy()}static simpleSegment(n,u,p,v){return new Xs([{vertexOffset:n,primitiveOffset:u,vertexLength:p,primitiveLength:v,vaos:{},sortKey:0}])}}Xs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sn(Xs,"SegmentVector");var hn=8192;class Ac{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):4===n.length?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof us?new us(n.lng,n.lat):us.convert(n),this}setSouthWest(n){return this._sw=n instanceof us?new us(n.lng,n.lat):us.convert(n),this}extend(n){const u=this._sw,p=this._ne;let v,E;if(n instanceof us)v=n,E=n;else{if(!(n instanceof Ac))return Array.isArray(n)?4===n.length||n.every(Array.isArray)?this.extend(Ac.convert(n)):this.extend(us.convert(n)):"object"==typeof n&&null!==n&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(us.convert(n)):this;if(v=n._sw,E=n._ne,!v||!E)return this}return u||p?(u.lng=Math.min(v.lng,u.lng),u.lat=Math.min(v.lat,u.lat),p.lng=Math.max(E.lng,p.lng),p.lat=Math.max(E.lat,p.lat)):(this._sw=new us(v.lng,v.lat),this._ne=new us(E.lng,E.lat)),this}getCenter(){return new us((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new us(this.getWest(),this.getNorth())}getSouthEast(){return new us(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:p}=us.convert(n);let v=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&v}static convert(n){return!n||n instanceof Ac?n:new Ac(n)}}var hc=1e-6,pa=typeof Float32Array<"u"?Float32Array:Array;function Yh(){var a=new pa(9);return pa!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function $c(a,n,u){var p=n[0],v=n[1],E=n[2],A=n[3],R=n[4],H=n[5],j=n[6],ee=n[7],se=n[8],ce=u[0],ve=u[1],be=u[2],Ae=u[3],$e=u[4],dt=u[5],Ot=u[6],ct=u[7],At=u[8];return a[0]=ce*p+ve*A+be*j,a[1]=ce*v+ve*R+be*ee,a[2]=ce*E+ve*H+be*se,a[3]=Ae*p+$e*A+dt*j,a[4]=Ae*v+$e*R+dt*ee,a[5]=Ae*E+$e*H+dt*se,a[6]=Ot*p+ct*A+At*j,a[7]=Ot*v+ct*R+At*ee,a[8]=Ot*E+ct*H+At*se,a}function Ko(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function bd(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],A=n[4],R=n[5],H=n[6],j=n[7],ee=n[8],se=n[9],ce=n[10],ve=n[11],be=n[12],Ae=n[13],$e=n[14],dt=n[15],Ot=u*R-p*A,ct=u*H-v*A,At=u*j-E*A,Nt=p*H-v*R,Bt=p*j-E*R,bi=v*j-E*H,hi=ee*Ae-se*be,Li=ee*$e-ce*be,rn=ee*dt-ve*be,Si=se*$e-ce*Ae,Ni=se*dt-ve*Ae,Yi=ce*dt-ve*$e,Zi=Ot*Yi-ct*Ni+At*Si+Nt*rn-Bt*Li+bi*hi;return Zi?(a[0]=(R*Yi-H*Ni+j*Si)*(Zi=1/Zi),a[1]=(v*Ni-p*Yi-E*Si)*Zi,a[2]=(Ae*bi-$e*Bt+dt*Nt)*Zi,a[3]=(ce*Bt-se*bi-ve*Nt)*Zi,a[4]=(H*rn-A*Yi-j*Li)*Zi,a[5]=(u*Yi-v*rn+E*Li)*Zi,a[6]=($e*At-be*bi-dt*ct)*Zi,a[7]=(ee*bi-ce*At+ve*ct)*Zi,a[8]=(A*Ni-R*rn+j*hi)*Zi,a[9]=(p*rn-u*Ni-E*hi)*Zi,a[10]=(be*Bt-Ae*At+dt*Ot)*Zi,a[11]=(se*At-ee*Bt-ve*Ot)*Zi,a[12]=(R*Li-A*Si-H*hi)*Zi,a[13]=(u*Si-p*Li+v*hi)*Zi,a[14]=(Ae*ct-be*Nt-$e*Ot)*Zi,a[15]=(ee*Nt-se*ct+ce*Ot)*Zi,a):null}function Ju(a,n,u){var p=n[0],v=n[1],E=n[2],A=n[3],R=n[4],H=n[5],j=n[6],ee=n[7],se=n[8],ce=n[9],ve=n[10],be=n[11],Ae=n[12],$e=n[13],dt=n[14],Ot=n[15],ct=u[0],At=u[1],Nt=u[2],Bt=u[3];return a[0]=ct*p+At*R+Nt*se+Bt*Ae,a[1]=ct*v+At*H+Nt*ce+Bt*$e,a[2]=ct*E+At*j+Nt*ve+Bt*dt,a[3]=ct*A+At*ee+Nt*be+Bt*Ot,a[4]=(ct=u[4])*p+(At=u[5])*R+(Nt=u[6])*se+(Bt=u[7])*Ae,a[5]=ct*v+At*H+Nt*ce+Bt*$e,a[6]=ct*E+At*j+Nt*ve+Bt*dt,a[7]=ct*A+At*ee+Nt*be+Bt*Ot,a[8]=(ct=u[8])*p+(At=u[9])*R+(Nt=u[10])*se+(Bt=u[11])*Ae,a[9]=ct*v+At*H+Nt*ce+Bt*$e,a[10]=ct*E+At*j+Nt*ve+Bt*dt,a[11]=ct*A+At*ee+Nt*be+Bt*Ot,a[12]=(ct=u[12])*p+(At=u[13])*R+(Nt=u[14])*se+(Bt=u[15])*Ae,a[13]=ct*v+At*H+Nt*ce+Bt*$e,a[14]=ct*E+At*j+Nt*ve+Bt*dt,a[15]=ct*A+At*ee+Nt*be+Bt*Ot,a}function Au(a,n,u){var p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae=u[0],$e=u[1],dt=u[2];return n===a?(a[12]=n[0]*Ae+n[4]*$e+n[8]*dt+n[12],a[13]=n[1]*Ae+n[5]*$e+n[9]*dt+n[13],a[14]=n[2]*Ae+n[6]*$e+n[10]*dt+n[14],a[15]=n[3]*Ae+n[7]*$e+n[11]*dt+n[15]):(v=n[1],E=n[2],A=n[3],R=n[4],H=n[5],j=n[6],ee=n[7],se=n[8],ce=n[9],ve=n[10],be=n[11],a[0]=p=n[0],a[1]=v,a[2]=E,a[3]=A,a[4]=R,a[5]=H,a[6]=j,a[7]=ee,a[8]=se,a[9]=ce,a[10]=ve,a[11]=be,a[12]=p*Ae+R*$e+se*dt+n[12],a[13]=v*Ae+H*$e+ce*dt+n[13],a[14]=E*Ae+j*$e+ve*dt+n[14],a[15]=A*Ae+ee*$e+be*dt+n[15]),a}function Tl(a,n,u){var p=u[0],v=u[1],E=u[2];return a[0]=n[0]*p,a[1]=n[1]*p,a[2]=n[2]*p,a[3]=n[3]*p,a[4]=n[4]*v,a[5]=n[5]*v,a[6]=n[6]*v,a[7]=n[7]*v,a[8]=n[8]*E,a[9]=n[9]*E,a[10]=n[10]*E,a[11]=n[11]*E,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}function Ai(a,n,u){var p=Math.sin(u),v=Math.cos(u),E=n[4],A=n[5],R=n[6],H=n[7],j=n[8],ee=n[9],se=n[10],ce=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=E*v+j*p,a[5]=A*v+ee*p,a[6]=R*v+se*p,a[7]=H*v+ce*p,a[8]=j*v-E*p,a[9]=ee*v-A*p,a[10]=se*v-R*p,a[11]=ce*v-H*p,a}function Qu(a,n,u){var p=Math.sin(u),v=Math.cos(u),E=n[0],A=n[1],R=n[2],H=n[3],j=n[8],ee=n[9],se=n[10],ce=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=E*v-j*p,a[1]=A*v-ee*p,a[2]=R*v-se*p,a[3]=H*v-ce*p,a[8]=E*p+j*v,a[9]=A*p+ee*v,a[10]=R*p+se*v,a[11]=H*p+ce*v,a}function Hh(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Xc(a,n,u){var p,v,E,A=u[0],R=u[1],H=u[2],j=Math.hypot(A,R,H);return j<hc?null:(A*=j=1/j,R*=j,H*=j,p=Math.sin(n),v=Math.cos(n),a[0]=A*A*(E=1-v)+v,a[1]=R*A*E+H*p,a[2]=H*A*E-R*p,a[3]=0,a[4]=A*R*E-H*p,a[5]=R*R*E+v,a[6]=H*R*E+A*p,a[7]=0,a[8]=A*H*E+R*p,a[9]=R*H*E-A*p,a[10]=H*H*E+v,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var Zc=Ju;function Kd(){var a=new pa(3);return pa!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Jd(a){var n=new pa(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}function Ga(a){return Math.hypot(a[0],a[1],a[2])}function qc(a,n,u){var p=new pa(3);return p[0]=a,p[1]=n,p[2]=u,p}function Kc(a,n,u){return a[0]=n[0]+u[0],a[1]=n[1]+u[1],a[2]=n[2]+u[2],a}function ed(a,n,u){return a[0]=n[0]-u[0],a[1]=n[1]-u[1],a[2]=n[2]-u[2],a}function Vh(a,n,u){return a[0]=n[0]*u[0],a[1]=n[1]*u[1],a[2]=n[2]*u[2],a}function fa(a,n,u){return a[0]=Math.min(n[0],u[0]),a[1]=Math.min(n[1],u[1]),a[2]=Math.min(n[2],u[2]),a}function Du(a,n,u){return a[0]=Math.max(n[0],u[0]),a[1]=Math.max(n[1],u[1]),a[2]=Math.max(n[2],u[2]),a}function rl(a,n,u){return a[0]=n[0]*u,a[1]=n[1]*u,a[2]=n[2]*u,a}function Jc(a,n,u,p){return a[0]=n[0]+u[0]*p,a[1]=n[1]+u[1]*p,a[2]=n[2]+u[2]*p,a}function ma(a,n){var u=n[0],p=n[1],v=n[2],E=u*u+p*p+v*v;return E>0&&(E=1/Math.sqrt(E)),a[0]=n[0]*E,a[1]=n[1]*E,a[2]=n[2]*E,a}function sl(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}function Ap(a,n,u){var p=n[0],v=n[1],E=n[2],A=u[0],R=u[1],H=u[2];return a[0]=v*H-E*R,a[1]=E*A-p*H,a[2]=p*R-v*A,a}function Zs(a,n,u){var p=n[0],v=n[1],E=n[2],A=u[3]*p+u[7]*v+u[11]*E+u[15];return a[0]=(u[0]*p+u[4]*v+u[8]*E+u[12])/(A=A||1),a[1]=(u[1]*p+u[5]*v+u[9]*E+u[13])/A,a[2]=(u[2]*p+u[6]*v+u[10]*E+u[14])/A,a}function Nf(a,n,u){var p=u[0],v=u[1],E=u[2],A=n[0],R=n[1],H=n[2],j=v*H-E*R,ee=E*A-p*H,se=p*R-v*A,ce=v*se-E*ee,ve=E*j-p*se,be=p*ee-v*j,Ae=2*u[3];return ee*=Ae,se*=Ae,ve*=2,be*=2,a[0]=A+(j*=Ae)+(ce*=2),a[1]=R+ee+ve,a[2]=H+se+be,a}var Qc,ol=ed,og=Vh,Yf=Ga;function Hf(a,n,u){return a[0]=n[0]*u,a[1]=n[1]*u,a[2]=n[2]*u,a[3]=n[3]*u,a}function Dc(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],A=u*u+p*p+v*v+E*E;return A>0&&(A=1/Math.sqrt(A)),a[0]=u*A,a[1]=p*A,a[2]=v*A,a[3]=E*A,a}function td(a,n,u){var p=n[0],v=n[1],E=n[2],A=n[3];return a[0]=u[0]*p+u[4]*v+u[8]*E+u[12]*A,a[1]=u[1]*p+u[5]*v+u[9]*E+u[13]*A,a[2]=u[2]*p+u[6]*v+u[10]*E+u[14]*A,a[3]=u[3]*p+u[7]*v+u[11]*E+u[15]*A,a}function Qd(){var a=new pa(4);return pa!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function vs(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function Vf(a,n,u){u*=.5;var p=n[0],v=n[1],E=n[2],A=n[3],R=Math.sin(u),H=Math.cos(u);return a[0]=p*H+A*R,a[1]=v*H+E*R,a[2]=E*H-v*R,a[3]=A*H-p*R,a}function Gf(a,n,u){u*=.5;var p=n[0],v=n[1],E=n[2],A=n[3],R=Math.sin(u),H=Math.cos(u);return a[0]=p*H-E*R,a[1]=v*H+A*R,a[2]=E*H+p*R,a[3]=A*H-v*R,a}Kd(),Qc=new pa(4),pa!=Float32Array&&(Qc[0]=0,Qc[1]=0,Qc[2]=0,Qc[3]=0);var eu=Dc;Kd(),qc(1,0,0),qc(0,1,0),Qd(),Qd(),Yh();const Dp=Qt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Gh}=Dp,Ip=Qt([{name:"a_pos_3",components:3,type:"Int16"}]);var eh=Qt([{name:"a_pos",type:"Int16",components:2}]);class jh{constructor(n,u){this.pos=n,this.dir=u}intersectsPlane(n,u,p){const v=sl(u,this.dir);if(Math.abs(v)<1e-6)return!1;const E=((n[0]-this.pos[0])*u[0]+(n[1]-this.pos[1])*u[1]+(n[2]-this.pos[2])*u[2])/v;return p[0]=this.pos[0]+this.dir[0]*E,p[1]=this.pos[1]+this.dir[1]*E,p[2]=this.pos[2]+this.dir[2]*E,!0}closestPointOnSphere(n,u,p){if(Ae=(ve=this.pos)[0],$e=ve[1],dt=ve[2],Ot=(be=n)[0],ct=be[1],At=be[2],Math.abs(Ae-Ot)<=hc*Math.max(1,Math.abs(Ae),Math.abs(Ot))&&Math.abs($e-ct)<=hc*Math.max(1,Math.abs($e),Math.abs(ct))&&Math.abs(dt-At)<=hc*Math.max(1,Math.abs(dt),Math.abs(At))||0===u)return p[0]=p[1]=p[2]=0,!1;var ve,be,Ae,$e,dt,Ot,ct,At;const[v,E,A]=this.dir,R=this.pos[0]-n[0],H=this.pos[1]-n[1],j=this.pos[2]-n[2],ee=v*v+E*E+A*A,se=2*(R*v+H*E+j*A),ce=se*se-4*ee*(R*R+H*H+j*j-u*u);if(ce<0){const ve=Math.max(-se/2,0),be=R+v*ve,Ae=H+E*ve,$e=j+A*ve,dt=Math.hypot(be,Ae,$e);return p[0]=be*u/dt,p[1]=Ae*u/dt,p[2]=$e*u/dt,!1}{const ve=(-se-Math.sqrt(ce))/(2*ee);if(ve<0){const be=Math.hypot(R,H,j);return p[0]=R*u/be,p[1]=H*u/be,p[2]=j*u/be,!1}return p[0]=R+v*ve,p[1]=H+E*ve,p[2]=j+A*ve,!0}}}class ga{constructor(n,u,p,v,E){this.TL=n,this.TR=u,this.BR=p,this.BL=v,this.horizon=E}static fromInvProjectionMatrix(n,u,p){const v=[-1,1,1],E=[1,1,1],A=[1,-1,1],R=[-1,-1,1],H=Zs(v,v,n),j=Zs(E,E,n),ee=Zs(A,A,n),se=Zs(R,R,n);return new ga(H,j,ee,se,u/p)}}class Uh{constructor(n,u){this.points=n,this.planes=u}static fromInvProjectionMatrix(n,u,p,v){const E=Math.pow(2,p),A=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>{const j=td([],H,n),ee=1/j[3]/u*E;return(se=j)[0]=(ce=j)[0]*(ve=[ee,ee,v?1/j[3]:ee,ee])[0],se[1]=ce[1]*ve[1],se[2]=ce[2]*ve[2],se[3]=ce[3]*ve[3],se;var se,ce,ve}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(H=>{const j=ma([],Ap([],ol([],A[H[0]],A[H[1]]),ol([],A[H[2]],A[H[1]]))),ee=-sl(j,A[H[1]]);return j.concat(ee)});return new Uh(A,R)}}class Aa{static fromPoints(n){const u=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const v of n)fa(u,u,v),Du(p,p,v);return new Aa(u,p)}static applyTransform(n,u){const p=n.getCorners();for(let v=0;v<p.length;++v)Zs(p[v],p[v],u);return Aa.fromPoints(p)}constructor(n,u){this.min=n,this.max=u,this.center=rl([],Kc([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],p=Jd(this.min),v=Jd(this.max);for(let E=0;E<u.length;E++)p[E]=u[E]?this.min[E]:this.center[E],v[E]=u[E]?this.center[E]:this.max[E];return v[2]=this.max[2],new Aa(p,v)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,u=this.max;return[[n[0],n[1],n[2]],[u[0],n[1],n[2]],[u[0],u[1],n[2]],[n[0],u[1],n[2]],[n[0],n[1],u[2]],[u[0],n[1],u[2]],[u[0],u[1],u[2]],[n[0],u[1],u[2]]]}intersects(n){const u=this.getCorners();let p=!0;for(let v=0;v<n.planes.length;v++){const E=n.planes[v];let A=0;for(let R=0;R<u.length;R++)A+=sl(E,u[R])+E[3]>=0;if(0===A)return 0;A!==u.length&&(p=!1)}if(p)return 2;for(let v=0;v<3;v++){let E=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let R=0;R<n.points.length;R++){const H=n.points[R][v]-this.min[v];E=Math.min(E,H),A=Math.max(A,H)}if(A<0||E>this.max[v]-this.min[v])return 0}return 1}}const id=5,Lp=6,Ic=hn/Math.PI/2,jf=16383,Gl=[64,32,16],jl=-Ic,al=Ic,Wh=[new Aa([jl,jl,jl],[al,al,al]),new Aa([jl,jl,jl],[0,0,al]),new Aa([0,jl,jl],[al,0,al]),new Aa([jl,0,jl],[0,al,al]),new Aa([0,0,jl],[al,al,al])];function Ul(a){return a*Ic/sd}function Uf(a,n,u,p=!0){const v=rl([],a._camera.position,a.worldSize),E=[n,u,1,1];td(E,E,a.pixelMatrixInverse),Hf(E,E,1/E[3]);const A=ma([],ol([],E,v)),R=a.globeMatrix,H=[R[12],R[13],R[14]],j=ol([],H,v),ee=Ga(j),se=ma([],j),ce=a.worldSize/(2*Math.PI),ve=sl(se,A),be=Math.asin(ce/ee);if(be<Math.acos(ve)){if(!p)return null;const rn=[],Si=[];rl(rn,A,ee/ve),ma(Si,ol(Si,rn,j)),ma(A,Kc(A,j,rl(A,Si,Math.tan(be)*ee)))}const Ae=[];new jh(v,A).closestPointOnSphere(H,ce,Ae);const $e=ma([],gn(R,0)),dt=ma([],gn(R,1)),Ot=ma([],gn(R,2)),ct=sl($e,Ae),At=sl(dt,Ae),Nt=sl(Ot,Ae),Bt=ht(Math.asin(-At/ce));let bi=ht(Math.atan2(ct,Nt));bi=a.center.lng+function(rn,Si){const Ni=(Si-rn+180)%360-180;return Ni<-180?Ni+360:Ni}(a.center.lng,bi);const hi=Oc(bi),Li=_i(Pc(Bt),0,1);return new Cd(hi,Li)}class Wf{constructor(n,u,p){this.a=ol([],n,p),this.b=ol([],u,p),this.center=p;const v=ma([],this.a),E=ma([],this.b);this.angle=Math.acos(sl(v,E))}}function th(a,n){if(0===a.angle)return null;let u;return u=0===a.a[n]?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[n]/a.a[n]/Math.sin(a.angle)-1/Math.tan(a.angle)),u<0||u>1?null:function(p,v,E,A){const R=Math.sin(E);return p*(Math.sin((1-A)*E)/R)+v*(Math.sin(A*E)/R)}(a.a[n],a.b[n],a.angle,_i(u,0,1))+a.center[n]}function Lc(a){if(a.z<=1)return Wh[a.z+2*a.y+a.x];const n=rh(nh(a));return Aa.fromPoints(n)}function Wl(a,n,u){return rl(a,a,1-u),Jc(a,a,n,u)}function $f(a,n){const u=Iu(n.zoom);if(0===u)return Lc(a);const p=nh(a),v=rh(p),E=Oc(p.getWest())*n.worldSize,A=Oc(p.getEast())*n.worldSize,R=Pc(p.getNorth())*n.worldSize,H=Pc(p.getSouth())*n.worldSize,j=[E,R,0],ee=[A,R,0],se=[E,H,0],ce=[A,H,0],ve=bd([],n.globeMatrix);return Zs(j,j,ve),Zs(ee,ee,ve),Zs(se,se,ve),Zs(ce,ce,ve),v[0]=Wl(v[0],se,u),v[1]=Wl(v[1],ce,u),v[2]=Wl(v[2],ee,u),v[3]=Wl(v[3],j,u),Aa.fromPoints(v)}function Xf(a,n,u){for(const p of a)Zs(p,p,n),rl(p,p,u)}function nh({x:a,y:n,z:u}){const p=1/(1<<u),v=new us(Da(a*p),Jo((n+1)*p)),E=new us(Da((a+1)*p),Jo(n*p));return new Ac(v,E)}function rh(a){const n=jt(a.getNorth()),u=jt(a.getSouth()),p=Math.cos(n),v=Math.cos(u),E=Math.sin(n),A=Math.sin(u),R=a.getWest(),H=a.getEast();return[xd(v,A,R),xd(v,A,H),xd(p,E,H),xd(p,E,R)]}function xd(a,n,u,p=Ic){return u=jt(u),[a*Math.sin(u)*p,-n*p,a*Math.cos(u)*p]}function $l(a,n,u){return xd(Math.cos(jt(a)),Math.sin(jt(a)),n,u)}function sh(a,n,u,p){const v=1<<u.z,E=(a/hn+u.x)/v;return $l(Jo((n/hn+u.y)/v),Da(E),p)}function rd({min:a,max:n}){return jf/Math.max(n[0]-a[0],n[1]-a[1],n[2]-a[2])}const Op=new Float64Array(16);function oh(a){const n=rd(a),u=Hh(Op,[n,n,n]);return Au(u,u,((p=[])[0]=-(v=a.min)[0],p[1]=-v[1],p[2]=-v[2],p));var p,v}function Pp(a){const n=(p=a.min,(u=Op)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=p[0],u[13]=p[1],u[14]=p[2],u[15]=1,u);var u,p;const v=1/rd(a);return Tl(n,n,[v,v,v])}function Rp(a,n,u,p,v){const E=function(H){const j=hn/(2*Math.PI);return H/(2*Math.PI)/j}(u),A=[a,n,-u/(2*Math.PI)],R=Ko(new Float64Array(16));return Au(R,R,A),Tl(R,R,[E,E,E]),Ai(R,R,jt(-v)),Qu(R,R,jt(-p)),R}function Iu(a){return Ci(id,Lp,a)}function $h(a,n){const u=$l(n.lat,n.lng);return A=(v=ed([],function(be){const Ae=$l(be._center.lat,be._center.lng);let $e=Ap([],qc(0,1,0),Ae);const dt=Xc([],-be.angle,Ae);$e=Zs($e,$e,dt),Xc(dt,-be._pitch,$e);const Ot=ma([],Ae);return rl(Ot,Ot,Ul(be.cameraToCenterDistance/be.pixelsPerMeter)),Zs(Ot,Ot,dt),Kc([],Ae,Ot)}(a),u))[0],R=v[1],H=v[2],j=(E=u)[0],ee=E[1],se=E[2],ve=(ce=Math.sqrt(A*A+R*R+H*H)*Math.sqrt(j*j+ee*ee+se*se))&&sl(v,E)/ce,Math.acos(Math.min(Math.max(ve,-1),1));var v,E,A,R,H,j,ee,se,ce,ve}function zp(a,n){return $h(a,n)>Math.PI/2*1.01}const Zf=jt(85),ah=Math.cos(Zf),Fp=Math.sin(Zf),sd=6371008.8,qf=2*Math.PI*sd;class Mo{constructor(n,u){if(isNaN(n)||isNaN(u))throw new Error(`Invalid LngLat object: (${n}, ${u})`);if(this.lng=+n,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Mo(Fi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const u=Math.PI/180,p=this.lat*u,v=n.lat*u,E=Math.sin(p)*Math.sin(v)+Math.cos(p)*Math.cos(v)*Math.cos((n.lng-this.lng)*u);return sd*Math.acos(Math.min(E,1))}toBounds(n=0){const u=360*n/40075017,p=u/Math.cos(Math.PI/180*this.lat);return new Ac(new Mo(this.lng-p,this.lat-u),new Mo(this.lng+p,this.lat+u))}toEcef(n){const u=Ul(n);return $l(this.lat,this.lng,Ic+u)}static convert(n){if(n instanceof Mo)return n;if(Array.isArray(n)&&(2===n.length||3===n.length))return new Mo(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&"object"==typeof n&&null!==n)return new Mo(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var us=Mo;function wd(a){return qf*Math.cos(a*Math.PI/180)}function Oc(a){return(180+a)/360}function Pc(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Xl(a,n){return a/wd(n)}function Da(a){return 360*a-180}function Jo(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function lh(a,n){return a*wd(Jo(n))}const Fo=85.051129;function Kf(a){return 1/Math.cos(a*Math.PI/180)}class Cd{constructor(n,u,p=0){this.x=+n,this.y=+u,this.z=+p}static fromLngLat(n,u=0){const p=us.convert(n);return new Cd(Oc(p.lng),Pc(p.lat),Xl(u,p.lat))}toLngLat(){return new us(Da(this.x),Jo(this.y))}toAltitude(){return lh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/qf*Kf(Jo(this.y))}}function Xh(a,n,u,p,v,E,A,R,H){const j=(n+p)/2,ee=(u+v)/2,se=new at(j,ee);R(se),function(ce,ve,be,Ae,$e,dt){const Ot=be-$e,ct=Ae-dt;return Math.abs((Ae-ve)*Ot-(be-ce)*ct)/Math.hypot(Ot,ct)}(se.x,se.y,E.x,E.y,A.x,A.y)>=H?(Xh(a,n,u,j,ee,E,se,R,H),Xh(a,j,ee,p,v,se,A,R,H)):a.push(A)}function Bp(a,n,u){let p=a[0],v=p.x,E=p.y;n(p);const A=[p];for(let R=1;R<a.length;R++){const H=a[R],{x:j,y:ee}=H;n(H),Xh(A,v,E,j,ee,p,H,n,u),v=j,E=ee,p=H}return A}function Np(a,n,u,p){if(p(n,u)){const v=n.add(u)._mult(.5);Np(a,n,v,p),Np(a,v,u,p)}else a.push(u)}function ag(a,n){let u=a[0];const p=[u];for(let v=1;v<a.length;v++){const E=a[v];Np(p,u,E,n),u=E}return p}const Yp=Math.pow(2,14)-1,Jf=-Yp-1;function Qf(a,n){const u=Math.round(a.x*n),p=Math.round(a.y*n);return a.x=_i(u,Jf,Yp),a.y=_i(p,Jf,Yp),(u<a.x||u>a.x+1||p<a.y||p>a.y+1)&&wn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function tu(a,n,u){const p=a.loadGeometry(),v=a.extent,E=hn/v;if(n&&u&&u.projection.isReprojectedInTileSpace){const A=1<<n.z,{scale:R,x:H,y:j,projection:ee}=u,se=ce=>{const ve=Da((n.x+ce.x/v)/A),be=Jo((n.y+ce.y/v)/A),Ae=ee.project(ve,be);ce.x=(Ae.x*R-H)*v,ce.y=(Ae.y*R-j)*v};for(let ce=0;ce<p.length;ce++)if(1!==a.type)p[ce]=Bp(p[ce],se,1);else{const ve=[];for(const be of p[ce])be.x<0||be.x>=v||be.y<0||be.y>=v||(se(be),ve.push(be));p[ce]=ve}}for(const A of p)for(const R of A)Qf(R,E);return p}function ja(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?tu(a):[]}}function Ed(a,n,u,p,v){a.emplaceBack(2*n+(p+1)/2,2*u+(v+1)/2)}function Sd(a,n,u){a.emplaceBack(n.x,n.y,n.z,16384*u[0],16384*u[1],16384*u[2])}class Zh{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new Ji,this.indexArray=new zn,this.segments=new Xs,this.programConfigurations=new ku(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,p,v){const E=this.layers[0],A=[];let R=null;"circle"===E.type&&(R=E.layout.get("circle-sort-key"));for(const{feature:j,id:ee,index:se,sourceLayerIndex:ce}of n){const ve=this.layers[0]._featureFilter.needGeometry,be=ja(j,ve);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),be,p))continue;const Ae=R?R.evaluate(be,{},p):void 0,$e={id:ee,properties:j.properties,type:j.type,sourceLayerIndex:ce,index:se,geometry:ve?be.geometry:tu(j,p,v),patterns:{},sortKey:Ae};A.push($e)}R&&A.sort((j,ee)=>j.sortKey-ee.sortKey);let H=null;"globe"===v.projection.name&&(this.globeExtVertexArray=new nn,H=v.projection);for(const j of A){const{geometry:ee,index:se,sourceLayerIndex:ce}=j,ve=n[se].feature;this.addFeature(j,ee,se,u.availableImages,p,H),u.featureIndex.insert(ve,ee,se,ce,this.index)}}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qd.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Bf.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,u,p,v,E,A){for(const R of u)for(const H of R){const j=H.x,ee=H.y;if(j<0||j>=hn||ee<0||ee>=hn)continue;if(A){const ve=A.projectTilePoint(j,ee,E),be=A.upVector(E,j,ee),Ae=this.globeExtVertexArray;Sd(Ae,ve,be),Sd(Ae,ve,be),Sd(Ae,ve,be),Sd(Ae,ve,be)}const se=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),ce=se.vertexLength;Ed(this.layoutVertexArray,j,ee,-1,-1),Ed(this.layoutVertexArray,j,ee,1,-1),Ed(this.layoutVertexArray,j,ee,1,1),Ed(this.layoutVertexArray,j,ee,-1,1),this.indexArray.emplaceBack(ce,ce+1,ce+2),this.indexArray.emplaceBack(ce,ce+2,ce+3),se.vertexLength+=4,se.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,{},v,E)}}function fo(a,n){for(let u=0;u<a.length;u++)if(iu(n,a[u]))return!0;for(let u=0;u<n.length;u++)if(iu(a,n[u]))return!0;return!!Hp(a,n)}function od(a,n,u){return!!iu(a,n)||!!Vp(n,a,u)}function Td(a,n){if(1===a.length)return em(n,a[0]);for(let u=0;u<n.length;u++){const p=n[u];for(let v=0;v<p.length;v++)if(iu(a,p[v]))return!0}for(let u=0;u<a.length;u++)if(em(n,a[u]))return!0;for(let u=0;u<n.length;u++)if(Hp(a,n[u]))return!0;return!1}function lg(a,n,u){if(a.length>1){if(Hp(a,n))return!0;for(let p=0;p<n.length;p++)if(Vp(n[p],a,u))return!0}for(let p=0;p<a.length;p++)if(Vp(a[p],n,u))return!0;return!1}function Hp(a,n){if(0===a.length||0===n.length)return!1;for(let u=0;u<a.length-1;u++){const p=a[u],v=a[u+1];for(let E=0;E<n.length-1;E++)if(Mv(p,v,n[E],n[E+1]))return!0}return!1}function Mv(a,n,u,p){return en(a,u,p)!==en(n,u,p)&&en(a,n,u)!==en(a,n,p)}function Vp(a,n,u){const p=u*u;if(1===n.length)return a.distSqr(n[0])<p;for(let v=1;v<n.length;v++)if(qh(a,n[v-1],n[v])<p)return!0;return!1}function qh(a,n,u){const p=n.distSqr(u);if(0===p)return a.distSqr(n);const v=((a.x-n.x)*(u.x-n.x)+(a.y-n.y)*(u.y-n.y))/p;return a.distSqr(v<0?n:v>1?u:u.sub(n)._mult(v)._add(n))}function em(a,n){let u,p,v,E=!1;for(let A=0;A<a.length;A++){u=a[A];for(let R=0,H=u.length-1;R<u.length;H=R++)p=u[R],v=u[H],p.y>n.y!=v.y>n.y&&n.x<(v.x-p.x)*(n.y-p.y)/(v.y-p.y)+p.x&&(E=!E)}return E}function iu(a,n){let u=!1;for(let p=0,v=a.length-1;p<a.length;v=p++){const E=a[p],A=a[v];E.y>n.y!=A.y>n.y&&n.x<(A.x-E.x)*(n.y-E.y)/(A.y-E.y)+E.x&&(u=!u)}return u}function ch(a,n,u,p,v){for(const A of a)if(n<=A.x&&u<=A.y&&p>=A.x&&v>=A.y)return!0;const E=[new at(n,u),new at(n,v),new at(p,v),new at(p,u)];if(a.length>2)for(const A of E)if(iu(a,A))return!0;for(let A=0;A<a.length-1;A++)if(ad(a[A],a[A+1],E))return!0;return!1}function ad(a,n,u){const p=u[0],v=u[2];if(a.x<p.x&&n.x<p.x||a.x>v.x&&n.x>v.x||a.y<p.y&&n.y<p.y||a.y>v.y&&n.y>v.y)return!1;const E=en(a,n,u[0]);return E!==en(a,n,u[1])||E!==en(a,n,u[2])||E!==en(a,n,u[3])}function Lu(a,n,u){const p=n.paint.get(a).value;return"constant"===p.kind?p.value:u.programConfigurations.get(n.id).getMaxValue(a)}function kd(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Ou(a,n,u,p,v){if(!n[0]&&!n[1])return a;const E=at.convert(n)._mult(v);"viewport"===u&&E._rotate(-p);const A=[];for(let R=0;R<a.length;R++)A.push(a[R].sub(E));return A}function Vs(a,n,u,p){const v=at.convert(a)._mult(p);return"viewport"===n&&v._rotate(-u),v}Sn(Zh,"CircleBucket",{omit:["layers"]});const Gp=new xt({"circle-sort-key":new Ke(I.layout_circle["circle-sort-key"])});var Pu={paint:new xt({"circle-radius":new Ke(I.paint_circle["circle-radius"]),"circle-color":new Ke(I.paint_circle["circle-color"]),"circle-blur":new Ke(I.paint_circle["circle-blur"]),"circle-opacity":new Ke(I.paint_circle["circle-opacity"]),"circle-translate":new Te(I.paint_circle["circle-translate"]),"circle-translate-anchor":new Te(I.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Te(I.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Te(I.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ke(I.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ke(I.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ke(I.paint_circle["circle-stroke-opacity"])}),layout:Gp};function uh(a,n,u,p,v,E,A,R,H){if(E&&a.queryGeometry.isAboveHorizon)return!1;E&&(H*=a.pixelToTileUnitsFactor);const j=a.tileID.canonical,ee=u.projection.upVectorScale(j,u.center.lat,u.worldSize).metersToTile;for(const se of n)for(const ce of se){const ve=ce.add(R),be=v&&u.elevation?u.elevation.exaggeration()*v.getElevationAt(ve.x,ve.y,!0):0,Ae=u.projection.projectTilePoint(ve.x,ve.y,j);if(be>0){const ct=u.projection.upVector(j,ve.x,ve.y);Ae.x+=ct[0]*ee*be,Ae.y+=ct[1]*ee*be,Ae.z+=ct[2]*ee*be}const $e=E?ve:tm(Ae.x,Ae.y,Ae.z,p),dt=E?a.tilespaceRays.map(ct=>Md(ct,be)):a.queryGeometry.screenGeometry,Ot=td([],[Ae.x,Ae.y,Ae.z,1],p);if(!A&&E?H*=Ot[3]/u.cameraToCenterDistance:A&&!E&&(H*=u.cameraToCenterDistance/Ot[3]),E){const ct=Jo((ce.y/hn+j.y)/(1<<j.z));H/=u.projection.pixelsPerMeter(ct,1)/Xl(1,ct)}if(od(dt,$e,H))return!0}return!1}function tm(a,n,u,p){const v=td([],[a,n,u,1],p);return new at(v[0]/v[3],v[1]/v[3])}const Kh=qc(0,0,0),Ru=qc(0,0,1);function Md(a,n){const u=Kd();return Kh[2]=n,a.intersectsPlane(Kh,Ru,u),new at(u[0],u[1])}class jp extends Zh{}function Jh(a,{width:n,height:u},p,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*u*p)throw new RangeError("mismatched image size")}else v=new Uint8Array(n*u*p);return a.width=n,a.height=u,a.data=v,a}function im(a,n,u){const{width:p,height:v}=n;p===a.width&&v===a.height||(Up(a,n,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,p),height:Math.min(a.height,v)},u),a.width=p,a.height=v,a.data=n.data)}function Up(a,n,u,p,v,E){if(0===v.width||0===v.height)return n;if(v.width>a.width||v.height>a.height||u.x>a.width-v.width||u.y>a.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||p.x>n.width-v.width||p.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const A=a.data,R=n.data;for(let H=0;H<v.height;H++){const j=((u.y+H)*a.width+u.x)*E,ee=((p.y+H)*n.width+p.x)*E;for(let se=0;se<v.width*E;se++)R[ee+se]=A[j+se]}return n}Sn(jp,"HeatmapBucket",{omit:["layers"]});class nu{constructor(n,u){Jh(this,n,1,u)}resize(n){im(this,new nu(n),1)}clone(){return new nu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,p,v,E){Up(n,u,p,v,E,1)}}class Ua{constructor(n,u){Jh(this,n,4,u)}resize(n){im(this,new Ua(n),4)}replace(n,u){u?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ua({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,p,v,E){Up(n,u,p,v,E,4)}}Sn(nu,"AlphaImage"),Sn(Ua,"RGBAImage");var dh={paint:new xt({"heatmap-radius":new Ke(I.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ke(I.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Te(I.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bt(I.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Te(I.paint_heatmap["heatmap-opacity"])})};function pc(a){const n={},u=a.resolution||256,p=a.clips?a.clips.length:1,v=a.image||new Ua({width:u,height:p}),E=(A,R,H)=>{n[a.evaluationKey]=H;const j=a.expression.evaluate(n);v.data[A+R+0]=Math.floor(255*j.r/j.a),v.data[A+R+1]=Math.floor(255*j.g/j.a),v.data[A+R+2]=Math.floor(255*j.b/j.a),v.data[A+R+3]=Math.floor(255*j.a)};if(a.clips)for(let A=0,R=0;A<p;++A,R+=4*u)for(let H=0,j=0;H<u;H++,j+=4){const ee=H/(u-1),{start:se,end:ce}=a.clips[A];E(R,j,se*(1-ee)+ce*ee)}else for(let A=0,R=0;A<u;A++,R+=4)E(0,R,A/(u-1));return v}var cg={paint:new xt({"hillshade-illumination-direction":new Te(I.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Te(I.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Te(I.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Te(I.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Te(I.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Te(I.paint_hillshade["hillshade-accent-color"])})};const Wp=Qt([{name:"a_pos",components:2,type:"Int16"}],4),{members:$p}=Wp;var hh={exports:{}};function Ad(a,n,u){u=u||2;var p,v,E,A,R,H,j,ee=n&&n.length,se=ee?n[0]*u:a.length,ce=ph(a,0,se,u,!0),ve=[];if(!ce||ce.next===ce.prev)return ve;if(ee&&(ce=function(Ae,$e,dt,Ot){var ct,At,Nt,Bt=[];for(ct=0,At=$e.length;ct<At;ct++)(Nt=ph(Ae,$e[ct]*Ot,ct<At-1?$e[ct+1]*Ot:Ae.length,Ot,!1))===Nt.next&&(Nt.steiner=!0),Bt.push(om(Nt));for(Bt.sort(Xp),ct=0;ct<Bt.length;ct++)dt=Zp(Bt[ct],dt);return dt}(a,n,ce,u)),a.length>80*u){p=E=a[0],v=A=a[1];for(var be=u;be<se;be+=u)(R=a[be])<p&&(p=R),(H=a[be+1])<v&&(v=H),R>E&&(E=R),H>A&&(A=H);j=0!==(j=Math.max(E-p,A-v))?32767/j:0}return fh(ce,ve,u,p,v,j,0),ve}function ph(a,n,u,p,v){var E,A;if(v===_h(a,n,u,p)>0)for(E=n;E<u;E+=p)A=pg(E,a[E],a[E+1],A);else for(E=u-p;E>=n;E-=p)A=pg(E,a[E],a[E+1],A);return A&&Id(A,A.next)&&(ld(A),A=A.next),A}function zu(a,n){if(!a)return a;n||(n=a);var u,p=a;do{if(u=!1,p.steiner||!Id(p,p.next)&&0!==_s(p.prev,p,p.next))p=p.next;else{if(ld(p),(p=n=p.prev)===p.next)break;u=!0}}while(u||p!==n);return n}function fh(a,n,u,p,v,E,A){if(a){!A&&E&&function(ee,se,ce,ve){var be=ee;do{0===be.z&&(be.z=mh(be.x,be.y,se,ce,ve)),be.prevZ=be.prev,be.nextZ=be.next,be=be.next}while(be!==ee);be.prevZ.nextZ=null,be.prevZ=null,function(Ae){var $e,dt,Ot,ct,At,Nt,Bt,bi,hi=1;do{for(dt=Ae,Ae=null,At=null,Nt=0;dt;){for(Nt++,Ot=dt,Bt=0,$e=0;$e<hi&&(Bt++,Ot=Ot.nextZ);$e++);for(bi=hi;Bt>0||bi>0&&Ot;)0!==Bt&&(0===bi||!Ot||dt.z<=Ot.z)?(ct=dt,dt=dt.nextZ,Bt--):(ct=Ot,Ot=Ot.nextZ,bi--),At?At.nextZ=ct:Ae=ct,ct.prevZ=At,At=ct;dt=Ot}At.nextZ=null,hi*=2}while(Nt>1)}(be)}(a,p,v,E);for(var R,H,j=a;a.prev!==a.next;)if(R=a.prev,H=a.next,E?rm(a,p,v,E):nm(a))n.push(R.i/u|0),n.push(a.i/u|0),n.push(H.i/u|0),ld(a),a=H.next,j=H.next;else if((a=H)===j){A?1===A?fh(a=sm(zu(a),n,u),n,u,p,v,E,2):2===A&&ug(a,n,u,p,v,E):fh(zu(a),n,u,p,v,E,1);break}}}function nm(a){var n=a.prev,u=a,p=a.next;if(_s(n,u,p)>=0)return!1;for(var v=n.x,E=u.x,A=p.x,R=n.y,H=u.y,j=p.y,ee=v<E?v<A?v:A:E<A?E:A,se=R<H?R<j?R:j:H<j?H:j,ce=v>E?v>A?v:A:E>A?E:A,ve=R>H?R>j?R:j:H>j?H:j,be=p.next;be!==n;){if(be.x>=ee&&be.x<=ce&&be.y>=se&&be.y<=ve&&Dd(v,R,E,H,A,j,be.x,be.y)&&_s(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function rm(a,n,u,p){var v=a.prev,E=a,A=a.next;if(_s(v,E,A)>=0)return!1;for(var R=v.x,H=E.x,j=A.x,ee=v.y,se=E.y,ce=A.y,ve=R<H?R<j?R:j:H<j?H:j,be=ee<se?ee<ce?ee:ce:se<ce?se:ce,Ae=R>H?R>j?R:j:H>j?H:j,$e=ee>se?ee>ce?ee:ce:se>ce?se:ce,dt=mh(ve,be,n,u,p),Ot=mh(Ae,$e,n,u,p),ct=a.prevZ,At=a.nextZ;ct&&ct.z>=dt&&At&&At.z<=Ot;){if(ct.x>=ve&&ct.x<=Ae&&ct.y>=be&&ct.y<=$e&&ct!==v&&ct!==A&&Dd(R,ee,H,se,j,ce,ct.x,ct.y)&&_s(ct.prev,ct,ct.next)>=0||(ct=ct.prevZ,At.x>=ve&&At.x<=Ae&&At.y>=be&&At.y<=$e&&At!==v&&At!==A&&Dd(R,ee,H,se,j,ce,At.x,At.y)&&_s(At.prev,At,At.next)>=0))return!1;At=At.nextZ}for(;ct&&ct.z>=dt;){if(ct.x>=ve&&ct.x<=Ae&&ct.y>=be&&ct.y<=$e&&ct!==v&&ct!==A&&Dd(R,ee,H,se,j,ce,ct.x,ct.y)&&_s(ct.prev,ct,ct.next)>=0)return!1;ct=ct.prevZ}for(;At&&At.z<=Ot;){if(At.x>=ve&&At.x<=Ae&&At.y>=be&&At.y<=$e&&At!==v&&At!==A&&Dd(R,ee,H,se,j,ce,At.x,At.y)&&_s(At.prev,At,At.next)>=0)return!1;At=At.nextZ}return!0}function sm(a,n,u){var p=a;do{var v=p.prev,E=p.next.next;!Id(v,E)&&gh(v,p,p.next,E)&&zc(v,E)&&zc(E,v)&&(n.push(v.i/u|0),n.push(p.i/u|0),n.push(E.i/u|0),ld(p),ld(p.next),p=a=E),p=p.next}while(p!==a);return zu(p)}function ug(a,n,u,p,v,E){var A=a;do{for(var R=A.next.next;R!==A.prev;){if(A.i!==R.i&&hg(A,R)){var H=qp(A,R);return A=zu(A,A.next),H=zu(H,H.next),fh(A,n,u,p,v,E,0),void fh(H,n,u,p,v,E,0)}R=R.next}A=A.next}while(A!==a)}function Xp(a,n){return a.x-n.x}function Zp(a,n){var u=function(v,E){var A,R=E,H=v.x,j=v.y,ee=-1/0;do{if(j<=R.y&&j>=R.next.y&&R.next.y!==R.y){var se=R.x+(j-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(se<=H&&se>ee&&(ee=se,A=R.x<R.next.x?R:R.next,se===H))return A}R=R.next}while(R!==E);if(!A)return null;var ce,ve=A,be=A.x,Ae=A.y,$e=1/0;R=A;do{H>=R.x&&R.x>=be&&H!==R.x&&Dd(j<Ae?H:ee,j,be,Ae,j<Ae?ee:H,j,R.x,R.y)&&(ce=Math.abs(j-R.y)/(H-R.x),zc(R,v)&&(ce<$e||ce===$e&&(R.x>A.x||R.x===A.x&&dg(A,R)))&&(A=R,$e=ce)),R=R.next}while(R!==ve);return A}(a,n);if(!u)return n;var p=qp(u,a);return zu(p,p.next),zu(u,u.next)}function dg(a,n){return _s(a.prev,a,n.prev)<0&&_s(n.next,a,a.next)<0}function mh(a,n,u,p,v){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-u)*v|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-p)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function om(a){var n=a,u=a;do{(n.x<u.x||n.x===u.x&&n.y<u.y)&&(u=n),n=n.next}while(n!==a);return u}function Dd(a,n,u,p,v,E,A,R){return(v-A)*(n-R)>=(a-A)*(E-R)&&(a-A)*(p-R)>=(u-A)*(n-R)&&(u-A)*(E-R)>=(v-A)*(p-R)}function hg(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(u,p){var v=u;do{if(v.i!==u.i&&v.next.i!==u.i&&v.i!==p.i&&v.next.i!==p.i&&gh(v,v.next,u,p))return!0;v=v.next}while(v!==u);return!1}(a,n)&&(zc(a,n)&&zc(n,a)&&function(u,p){var v=u,E=!1,A=(u.x+p.x)/2,R=(u.y+p.y)/2;do{v.y>R!=v.next.y>R&&v.next.y!==v.y&&A<(v.next.x-v.x)*(R-v.y)/(v.next.y-v.y)+v.x&&(E=!E),v=v.next}while(v!==u);return E}(a,n)&&(_s(a.prev,a,n.prev)||_s(a,n.prev,n))||Id(a,n)&&_s(a.prev,a,a.next)>0&&_s(n.prev,n,n.next)>0)}function _s(a,n,u){return(n.y-a.y)*(u.x-n.x)-(n.x-a.x)*(u.y-n.y)}function Id(a,n){return a.x===n.x&&a.y===n.y}function gh(a,n,u,p){var v=vh(_s(a,n,u)),E=vh(_s(a,n,p)),A=vh(_s(u,p,a)),R=vh(_s(u,p,n));return v!==E&&A!==R||!(0!==v||!Rc(a,u,n))||!(0!==E||!Rc(a,p,n))||!(0!==A||!Rc(u,a,p))||!(0!==R||!Rc(u,n,p))}function Rc(a,n,u){return n.x<=Math.max(a.x,u.x)&&n.x>=Math.min(a.x,u.x)&&n.y<=Math.max(a.y,u.y)&&n.y>=Math.min(a.y,u.y)}function vh(a){return a>0?1:a<0?-1:0}function zc(a,n){return _s(a.prev,a,a.next)<0?_s(a,n,a.next)>=0&&_s(a,a.prev,n)>=0:_s(a,n,a.prev)<0||_s(a,a.next,n)<0}function qp(a,n){var u=new Kp(a.i,a.x,a.y),p=new Kp(n.i,n.x,n.y),v=a.next,E=n.prev;return a.next=n,n.prev=a,u.next=v,v.prev=u,p.next=u,u.prev=p,E.next=p,p.prev=E,p}function pg(a,n,u,p){var v=new Kp(a,n,u);return p?(v.next=p.next,v.prev=p,p.next.prev=v,p.next=v):(v.prev=v,v.next=v),v}function ld(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Kp(a,n,u){this.i=a,this.x=n,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _h(a,n,u,p){for(var v=0,E=n,A=u-p;E<u;E+=p)v+=(a[A]-a[E])*(a[E+1]+a[A+1]),A=E;return v}hh.exports=Ad,hh.exports.default=Ad,Ad.deviation=function(a,n,u,p){var v=n&&n.length,E=Math.abs(_h(a,0,v?n[0]*u:a.length,u));if(v)for(var A=0,R=n.length;A<R;A++)E-=Math.abs(_h(a,n[A]*u,A<R-1?n[A+1]*u:a.length,u));var H=0;for(A=0;A<p.length;A+=3){var j=p[A]*u,ee=p[A+1]*u,se=p[A+2]*u;H+=Math.abs((a[j]-a[se])*(a[ee+1]-a[j+1])-(a[j]-a[ee])*(a[se+1]-a[j+1]))}return 0===E&&0===H?0:Math.abs((H-E)/E)},Ad.flatten=function(a){for(var n=a[0][0].length,u={vertices:[],holes:[],dimensions:n},p=0,v=0;v<a.length;v++){for(var E=0;E<a[v].length;E++)for(var A=0;A<n;A++)u.vertices.push(a[v][E][A]);v>0&&u.holes.push(p+=a[v-1].length)}return u};var Ld=vt(hh.exports);function am(a,n,u,p,v){Jp(a,n,u||0,p||a.length-1,v||ru)}function Jp(a,n,u,p,v){for(;p>u;){if(p-u>600){var E=p-u+1,A=n-u+1,R=Math.log(E),H=.5*Math.exp(2*R/3),j=.5*Math.sqrt(R*H*(E-H)/E)*(A-E/2<0?-1:1);Jp(a,n,Math.max(u,Math.floor(n-A*H/E+j)),Math.min(p,Math.floor(n+(E-A)*H/E+j)),v)}var ee=a[n],se=u,ce=p;for(cd(a,u,n),v(a[p],ee)>0&&cd(a,u,p);se<ce;){for(cd(a,se,ce),se++,ce--;v(a[se],ee)<0;)se++;for(;v(a[ce],ee)>0;)ce--}0===v(a[u],ee)?cd(a,u,ce):cd(a,++ce,p),ce<=n&&(u=ce+1),n<=ce&&(p=ce-1)}}function cd(a,n,u){var p=a[n];a[n]=a[u],a[u]=p}function ru(a,n){return a<n?-1:a>n?1:0}function Qp(a,n){const u=a.length;if(u<=1)return[a];const p=[];let v,E;for(let A=0;A<u;A++){const R=_n(a[A]);0!==R&&(a[A].area=Math.abs(R),void 0===E&&(E=R<0),E===R<0?(v&&p.push(v),v=[a[A]]):v.push(a[A]))}if(v&&p.push(v),n>1)for(let A=0;A<p.length;A++)p[A].length<=n||(am(p[A],n,1,p[A].length-1,Av),p[A]=p[A].slice(0,n));return p}function Av(a,n){return n.area-a.area}function lm(a,n,u){const p=u.patternDependencies;let v=!1;for(const E of n){const A=E.paint.get(`${a}-pattern`);A.isConstant()||(v=!0);const R=A.constantOr(null);R&&(v=!0,p[R]=!0)}return v}function ud(a,n,u,p,v){const E=v.patternDependencies;for(const A of n){const R=A.paint.get(`${a}-pattern`).value;if("constant"!==R.kind){let H=R.evaluate({zoom:p},u,{},v.availableImages);H=H&&H.name?H.name:H,E[H]=!0,u.patterns[A.id]=H}}return u}class yh{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ji,this.indexArray=new zn,this.indexArray2=new Ls,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Xs,this.segments2=new Xs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=n.projection}populate(n,u,p,v){this.hasPattern=lm("fill",this.layers,u);const E=this.layers[0].layout.get("fill-sort-key"),A=[];for(const{feature:R,id:H,index:j,sourceLayerIndex:ee}of n){const se=this.layers[0]._featureFilter.needGeometry,ce=ja(R,se);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),ce,p))continue;const ve=E?E.evaluate(ce,{},p,u.availableImages):void 0,be={id:H,properties:R.properties,type:R.type,sourceLayerIndex:ee,index:j,geometry:se?ce.geometry:tu(R,p,v),patterns:{},sortKey:ve};A.push(be)}E&&A.sort((R,H)=>R.sortKey-H.sortKey);for(const R of A){const{geometry:H,index:j,sourceLayerIndex:ee}=R;if(this.hasPattern){const se=ud("fill",this.layers,R,this.zoom,u);this.patternFeatures.push(se)}else this.addFeature(R,H,j,p,{},u.availableImages);u.featureIndex.insert(n[j].feature,H,j,ee,this.index)}}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}addFeatures(n,u,p,v,E){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,u,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$p),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,u,p,v,E,A=[]){for(const R of Qp(u,500)){let H=0;for(const be of R)H+=be.length;const j=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray),ee=j.vertexLength,se=[],ce=[];for(const be of R){if(0===be.length)continue;be!==R[0]&&ce.push(se.length/2);const Ae=this.segments2.prepareSegment(be.length,this.layoutVertexArray,this.indexArray2),$e=Ae.vertexLength;this.layoutVertexArray.emplaceBack(be[0].x,be[0].y),this.indexArray2.emplaceBack($e+be.length-1,$e),se.push(be[0].x),se.push(be[0].y);for(let dt=1;dt<be.length;dt++)this.layoutVertexArray.emplaceBack(be[dt].x,be[dt].y),this.indexArray2.emplaceBack($e+dt-1,$e+dt),se.push(be[dt].x),se.push(be[dt].y);Ae.vertexLength+=be.length,Ae.primitiveLength+=be.length}const ve=Ld(se,ce);for(let be=0;be<ve.length;be+=3)this.indexArray.emplaceBack(ee+ve[be],ee+ve[be+1],ee+ve[be+2]);j.vertexLength+=H,j.primitiveLength+=ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,E,A,v)}}Sn(yh,"FillBucket",{omit:["layers","patternFeatures"]});const fg=new xt({"fill-sort-key":new Ke(I.layout_fill["fill-sort-key"])});var Dv={paint:new xt({"fill-antialias":new Te(I.paint_fill["fill-antialias"]),"fill-opacity":new Ke(I.paint_fill["fill-opacity"]),"fill-color":new Ke(I.paint_fill["fill-color"]),"fill-outline-color":new Ke(I.paint_fill["fill-outline-color"]),"fill-translate":new Te(I.paint_fill["fill-translate"]),"fill-translate-anchor":new Te(I.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ke(I.paint_fill["fill-pattern"])}),layout:fg};const cm=Qt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),mg=Qt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),gg=Qt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Qh}=cm;var ep={},Fu=ni,tp=Od;function Od(a,n,u,p,v){this.properties={},this.extent=u,this.type=0,this._pbf=a,this._geometry=-1,this._keys=p,this._values=v,a.readFields(um,this,n)}function um(a,n,u){1==a?n.id=u.readVarint():2==a?function(p,v){for(var E=p.readVarint()+p.pos;p.pos<E;){var A=v._keys[p.readVarint()],R=v._values[p.readVarint()];v.properties[A]=R}}(u,n):3==a?n.type=u.readVarint():4==a&&(n._geometry=u.pos)}function dd(a){for(var n,u,p=0,v=0,E=a.length,A=E-1;v<E;A=v++)p+=((u=a[A]).x-(n=a[v]).x)*(n.y+u.y);return p}Od.types=["Unknown","Point","LineString","Polygon"],Od.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,u=a.readVarint()+a.pos,p=1,v=0,E=0,A=0,R=[];a.pos<u;){if(v<=0){var H=a.readVarint();p=7&H,v=H>>3}if(v--,1===p||2===p)E+=a.readSVarint(),A+=a.readSVarint(),1===p&&(n&&R.push(n),n=[]),n.push(new Fu(E,A));else{if(7!==p)throw new Error("unknown command "+p);n&&n.push(n[0].clone())}}return n&&R.push(n),R},Od.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,u=1,p=0,v=0,E=0,A=1/0,R=-1/0,H=1/0,j=-1/0;a.pos<n;){if(p<=0){var ee=a.readVarint();u=7&ee,p=ee>>3}if(p--,1===u||2===u)(v+=a.readSVarint())<A&&(A=v),v>R&&(R=v),(E+=a.readSVarint())<H&&(H=E),E>j&&(j=E);else if(7!==u)throw new Error("unknown command "+u)}return[A,H,R,j]},Od.prototype.toGeoJSON=function(a,n,u){var p,v,E=this.extent*Math.pow(2,u),A=this.extent*a,R=this.extent*n,H=this.loadGeometry(),j=Od.types[this.type];function ee(ve){for(var be=0;be<ve.length;be++){var Ae=ve[be];ve[be]=[360*(Ae.x+A)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ae.y+R)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var se=[];for(p=0;p<H.length;p++)se[p]=H[p][0];ee(H=se);break;case 2:for(p=0;p<H.length;p++)ee(H[p]);break;case 3:for(H=function(ve){var be=ve.length;if(be<=1)return[ve];for(var Ae,$e,dt=[],Ot=0;Ot<be;Ot++){var ct=dd(ve[Ot]);0!==ct&&(void 0===$e&&($e=ct<0),$e===ct<0?(Ae&&dt.push(Ae),Ae=[ve[Ot]]):Ae.push(ve[Ot]))}return Ae&&dt.push(Ae),dt}(H),p=0;p<H.length;p++)for(v=0;v<H[p].length;v++)ee(H[p][v])}1===H.length?H=H[0]:j="Multi"+j;var ce={type:"Feature",geometry:{type:j,coordinates:H},properties:this.properties};return"id"in this&&(ce.id=this.id),ce};var ip=tp,y=O;function O(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(S,this,n),this.length=this._features.length}function S(a,n,u){15===a?n.version=u.readVarint():1===a?n.name=u.readString():5===a?n.extent=u.readVarint():2===a?n._features.push(u.pos):3===a?n._keys.push(u.readString()):4===a&&n._values.push(function(p){for(var v=null,E=p.readVarint()+p.pos;p.pos<E;){var A=p.readVarint()>>3;v=1===A?p.readString():2===A?p.readFloat():3===A?p.readDouble():4===A?p.readVarint64():5===A?p.readVarint():6===A?p.readSVarint():7===A?p.readBoolean():null}return v}(u))}O.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new ip(this._pbf,n,this.extent,this._keys,this._values)};var Y=y;function Z(a,n,u){if(3===a){var p=new Y(u,u.readVarint()+u.pos);p.length&&(n[p.name]=p)}}var ye=ep.VectorTile=function(a,n){this.layers=a.readFields(Z,{},n)},gt=ep.VectorTileFeature=tp;function Ei(a,n,u,p){const v=[],E=0===p?(A,R,H,j,ee,se)=>{A.push(new at(se,H+(se-R)/(j-R)*(ee-H)))}:(A,R,H,j,ee,se)=>{A.push(new at(R+(se-H)/(ee-H)*(j-R),se))};for(const A of a){const R=[];for(const H of A){if(H.length<=2)continue;const j=[];for(let ce=0;ce<H.length-1;ce++){const ve=H[ce].x,be=H[ce].y,Ae=H[ce+1].x,$e=H[ce+1].y,dt=0===p?ve:be,Ot=0===p?Ae:$e;dt<n?Ot>n&&E(j,ve,be,Ae,$e,n):dt>u?Ot<u&&E(j,ve,be,Ae,$e,u):j.push(H[ce]),Ot<n&&dt>=n&&E(j,ve,be,Ae,$e,n),Ot>u&&dt<=u&&E(j,ve,be,Ae,$e,u)}let ee=H[H.length-1];const se=0===p?ee.x:ee.y;se>=n&&se<=u&&j.push(ee),j.length&&(ee=j[j.length-1],j[0].x===ee.x&&j[0].y===ee.y||j.push(j[0]),R.push(j))}R.length&&v.push(R)}return v}ep.VectorTileLayer=y;const fn=gt.types,Qr=Math.pow(2,13);function ws(a,n,u,p,v,E,A,R){a.emplaceBack((n<<1)+A,(u<<1)+E,(Math.floor(p*Qr)<<1)+v,Math.round(R))}function no(a,n,u){a.emplaceBack(n.x,n.y,n.z,16384*u[0],16384*u[1],16384*u[2])}class Qo{constructor(){this.acc=new at(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new at(n.x,n.y),this.max=new at(n.x,n.y))}append(n,u){this.currentPolyCount.edges++,this.acc._add(n);const p=this.min,v=this.max;n.x<p.x?p.x=n.x:n.x>v.x&&(v.x=n.x),n.y<p.y?p.y=n.y:n.y>v.y&&(v.y=n.y),((0===n.x||n.x===hn)&&n.x===u.x)!=((0===n.y||n.y===hn)&&n.y===u.y)&&this.processBorderOverlap(n,u),u.x<0!=n.x<0&&this.addBorderIntersection(0,Or(u.y,n.y,(0-u.x)/(n.x-u.x))),u.x>hn!=n.x>hn&&this.addBorderIntersection(1,Or(u.y,n.y,(hn-u.x)/(n.x-u.x))),u.y<0!=n.y<0&&this.addBorderIntersection(2,Or(u.x,n.x,(0-u.y)/(n.y-u.y))),u.y>hn!=n.y>hn&&this.addBorderIntersection(3,Or(u.x,n.x,(hn-u.y)/(n.y-u.y)))}addBorderIntersection(n,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[n];u<p[0]&&(p[0]=u),u>p[1]&&(p[1]=u)}processBorderOverlap(n,u){if(n.x===u.x){if(n.y===u.y)return;const p=0===n.x?0:1;this.addBorderIntersection(p,u.y),this.addBorderIntersection(p,n.y)}else{const p=0===n.y?2:3;this.addBorderIntersection(p,u.x),this.addBorderIntersection(p,n.x)}}centroid(){const n=this.polyCount.reduce((u,p)=>u+p.edges,0);return 0!==n?this.acc.div(n)._round():new at(0,0)}span(){return new at(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,u)=>n+ +(u[0]!==Number.MAX_VALUE),0)}}class Bu{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new Oi,this.centroidVertexArray=new dc,this.indexArray=new zn,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Xs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=n.enableTerrain}populate(n,u,p,v){this.features=[],this.hasPattern=lm("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(E){const A=Math.exp(Math.PI*(1-E.y/(1<<E.z)*2));return 80150034*A/(A*A+1)/hn/(1<<E.z)}(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:E,id:A,index:R,sourceLayerIndex:H}of n){const j=this.layers[0]._featureFilter.needGeometry,ee=ja(E,j);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),ee,p))continue;const se={id:A,sourceLayerIndex:H,index:R,geometry:j?ee.geometry:tu(E,p,v),properties:E.properties,type:E.type,patterns:{}},ce=this.layoutVertexArray.length;this.hasPattern?this.features.push(ud("fill-extrusion",this.layers,se,this.zoom,u)):this.addFeature(se,se.geometry,R,p,{},u.availableImages,v),u.featureIndex.insert(E,se.geometry,R,H,this.index,ce)}this.sortBorders()}addFeatures(n,u,p,v,E){for(const A of this.features){const{geometry:R}=A;this.addFeature(A,R,A.index,u,p,v,E)}this.sortBorders()}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Qh),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,gg.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,mg.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,u,p,v,E,A,R){const H=[new at(0,0),new at(hn,hn)],j=R.projection,ee="globe"===j.name,se=this.enableTerrain&&!ee?new Qo:null,ce="Polygon"===fn[n.type];ee&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new nn);const ve=Qp(u,500);for(let dt=ve.length-1;dt>=0;dt--){const Ot=ve[dt];(0===Ot.length||(be=Ot[0]).every(ct=>ct.x<=0)||be.every(ct=>ct.x>=hn)||be.every(ct=>ct.y<=0)||be.every(ct=>ct.y>=hn))&&ve.splice(dt,1)}var be;let Ae;if(ee)Ae=Lv(ve,H,v);else{Ae=[];for(const dt of ve)Ae.push({polygon:dt,bounds:H})}const $e=ce?this.edgeRadius:0;for(const{polygon:dt,bounds:Ot}of Ae){let ct=0,At=0;for(const Bt of dt)ce&&!Bt[0].equals(Bt[Bt.length-1])&&Bt.push(Bt[0]),At+=ce?Bt.length-1:Bt.length;const Nt=this.segments.prepareSegment((ce?5:4)*At,this.layoutVertexArray,this.indexArray);if(ce){const Bt=[],bi=[];ct=Nt.vertexLength;for(const Li of dt){let rn,Si;Li.length&&Li!==dt[0]&&bi.push(Bt.length/2),rn=Li[1].sub(Li[0])._perp()._unit();for(let Ni=1;Ni<Li.length;Ni++){const Yi=Li[Ni],Zi=Li[Ni===Li.length-1?1:Ni+1];let{x:an,y:Di}=Yi;if($e){Si=Zi.sub(Yi)._perp()._unit();const bn=rn.add(Si)._unit(),On=$e*Math.min(4,1/(rn.x*bn.x+rn.y*bn.y));an+=On*bn.x,Di+=On*bn.y,rn=Si}ws(this.layoutVertexArray,an,Di,0,0,1,1,0),Nt.vertexLength++,Bt.push(Yi.x,Yi.y),ee&&no(this.layoutVertexExtArray,j.projectTilePoint(an,Di,v),j.upVector(v,an,Di))}}const hi=Ld(Bt,bi);for(let Li=0;Li<hi.length;Li+=3)this.indexArray.emplaceBack(ct+hi[Li],ct+hi[Li+2],ct+hi[Li+1]),Nt.primitiveLength++}for(const Bt of dt){se&&Bt.length&&se.startRing(Bt[0]);let bi,hi,Li,rn=Bt.length>4&&bh(Bt[Bt.length-2],Bt[0],Bt[1]),Si=$e?vg(Bt[Bt.length-2],Bt[0],Bt[1],$e):0;hi=Bt[1].sub(Bt[0])._perp()._unit();let Ni=!0;for(let Yi=1,Zi=0;Yi<Bt.length;Yi++){let an=Bt[Yi-1],Di=Bt[Yi];const bn=Bt[Yi===Bt.length-1?1:Yi+1];if(se&&ce&&se.currentPolyCount.top++,fc(Di,an,Ot)){$e&&(hi=bn.sub(Di)._perp()._unit(),Ni=!Ni);continue}se&&se.append(Di,an);const On=Di.sub(an)._perp(),Cn=On.x/(Math.abs(On.x)+Math.abs(On.y)),_r=On.y>0?1:0,ln=an.dist(Di);if(Zi+ln>32768&&(Zi=0),$e){Li=bn.sub(Di)._perp()._unit();let br=Fc(an,Di,bn,np(hi,Li),$e);isNaN(br)&&(br=0);const ir=Di.sub(an)._unit();an=an.add(ir.mult(Si))._round(),Di=Di.add(ir.mult(-br))._round(),Si=br,hi=Li}const jn=Nt.vertexLength,yr=Bt.length>4&&bh(an,Di,bn);let ns=_g(Zi,rn,Ni);if(ws(this.layoutVertexArray,an.x,an.y,Cn,_r,0,0,ns),ws(this.layoutVertexArray,an.x,an.y,Cn,_r,0,1,ns),Zi+=ln,ns=_g(Zi,yr,!Ni),rn=yr,ws(this.layoutVertexArray,Di.x,Di.y,Cn,_r,0,0,ns),ws(this.layoutVertexArray,Di.x,Di.y,Cn,_r,0,1,ns),Nt.vertexLength+=4,this.indexArray.emplaceBack(jn+0,jn+1,jn+2),this.indexArray.emplaceBack(jn+1,jn+3,jn+2),Nt.primitiveLength+=2,$e){const br=ct+(1===Yi?Bt.length-2:Yi-2),ir=1===Yi?ct:br+1;if(this.indexArray.emplaceBack(jn+1,br,jn+3),this.indexArray.emplaceBack(br,ir,jn+3),Nt.primitiveLength+=2,void 0===bi&&(bi=jn),!fc(bn,Bt[Yi],Ot)){const Rs=Yi===Bt.length-1?bi:Nt.vertexLength;this.indexArray.emplaceBack(jn+2,jn+3,Rs),this.indexArray.emplaceBack(jn+3,Rs+1,Rs),this.indexArray.emplaceBack(jn+3,ir,Rs+1),Nt.primitiveLength+=3}Ni=!Ni}if(ee){const br=this.layoutVertexExtArray,ir=j.projectTilePoint(an.x,an.y,v),Rs=j.projectTilePoint(Di.x,Di.y,v),Er=j.upVector(v,an.x,an.y),Sr=j.upVector(v,Di.x,Di.y);no(br,ir,Er),no(br,ir,Er),no(br,Rs,Sr),no(br,Rs,Sr)}}ce&&(ct+=Bt.length-1)}}if(se&&se.polyCount.length>0){if(se.borders){se.vertexArrayOffset=this.centroidVertexArray.length;const dt=se.borders,Ot=this.featuresOnBorder.push(se)-1;for(let ct=0;ct<4;ct++)dt[ct][0]!==Number.MAX_VALUE&&this.borders[ct].push(Ot)}this.encodeCentroid(se.borders?void 0:se.centroid(),se)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,E,A,v)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((u,p)=>this.featuresOnBorder[u].borders[n][0]-this.featuresOnBorder[p].borders[n][0])}encodeCentroid(n,u,p=!0){let v,E;if(n)if(0!==n.y){const R=u.span()._mult(this.tileToMeter);v=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(R.x/10)),E=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(R.y/10))}else v=Math.ceil(7*(n.x+450)),E=0;else v=0,E=+p;let A=p?this.centroidVertexArray.length:u.vertexArrayOffset;for(const R of u.polyCount){p&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*R.edges+R.top);for(let H=0;H<R.top;H++)this.centroidVertexArray.emplace(A++,v,E);for(let H=0;H<2*R.edges;H++)this.centroidVertexArray.emplace(A++,0,E),this.centroidVertexArray.emplace(A++,v,E)}}}function np(a,n){const u=a.add(n)._unit();return a.x*u.x+a.y*u.y}function vg(a,n,u,p){const v=n.sub(a)._perp()._unit(),E=u.sub(n)._perp()._unit();return Fc(a,n,u,np(v,E),p)}function Fc(a,n,u,p,v){const E=Math.sqrt(1-p*p);return Math.min(a.dist(n)/3,n.dist(u)/3,v*E/p)}function fc(a,n,u){return a.x<u[0].x&&n.x<u[0].x||a.x>u[1].x&&n.x>u[1].x||a.y<u[0].y&&n.y<u[0].y||a.y>u[1].y&&n.y>u[1].y}function bh(a,n,u){if(a.x<0||a.x>=hn||n.x<0||n.x>=hn||u.x<0||u.x>=hn)return!1;const p=u.sub(n),v=p.perp(),E=a.sub(n);return(p.x*E.x+p.y*E.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(E.x*E.x+E.y*E.y))>-.866&&v.x*E.x+v.y*E.y<0}function _g(a,n,u){const p=n?2|a:-3&a;return u?1|p:-2&p}function Iv(){const a=Math.PI/32,n=Math.tan(a),u=sd;return u*Math.sqrt(1+2*n*n)-u}function Lv(a,n,u){const p=1<<u.z,v=Da(u.x/p),E=Da((u.x+1)/p),A=Jo(u.y/p),R=Jo((u.y+1)/p);return function(H,j,ee,se,ce=0,ve){const be=[];if(!H.length||!ee||!se)return be;const Ae=(Bt,bi)=>{for(const hi of Bt)be.push({polygon:hi,bounds:bi})},$e=Math.ceil(Math.log2(ee)),dt=Math.ceil(Math.log2(se)),Ot=$e-dt,ct=[];for(let Bt=0;Bt<Math.abs(Ot);Bt++)ct.push(Ot>0?0:1);for(let Bt=0;Bt<Math.min($e,dt);Bt++)ct.push(0),ct.push(1);let At=H;if(At=Ei(At,j[0].y-ce,j[1].y+ce,1),At=Ei(At,j[0].x-ce,j[1].x+ce,0),!At.length)return be;const Nt=[];for(ct.length?Nt.push({polygons:At,bounds:j,depth:0}):Ae(At,j);Nt.length;){const Bt=Nt.pop(),bi=Bt.depth,hi=ct[bi],Li=Bt.bounds[0],rn=Bt.bounds[1],Si=0===hi?Li.x:Li.y,Ni=0===hi?rn.x:rn.y,Yi=ve?ve(hi,Si,Ni):.5*(Si+Ni),Zi=Ei(Bt.polygons,Si-ce,Yi+ce,hi),an=Ei(Bt.polygons,Yi-ce,Ni+ce,hi);if(Zi.length){const Di=[Li,new at(0===hi?Yi:rn.x,1===hi?Yi:rn.y)];ct.length>bi+1?Nt.push({polygons:Zi,bounds:Di,depth:bi+1}):Ae(Zi,Di)}if(an.length){const Di=[new at(0===hi?Yi:Li.x,1===hi?Yi:Li.y),rn];ct.length>bi+1?Nt.push({polygons:an,bounds:Di,depth:bi+1}):Ae(an,Di)}}return be}(a,n,Math.ceil((E-v)/11.25),Math.ceil((A-R)/11.25),1,(H,j,ee)=>{if(0===H)return.5*(j+ee);{const se=Jo((u.y+j/hn)/p);return(Pc(.5*(Jo((u.y+ee/hn)/p)+se))*p-u.y)*hn}})}Sn(Bu,"FillExtrusionBucket",{omit:["layers","features"]}),Sn(Qo,"PartMetadata");const Oy=new xt({"fill-extrusion-edge-radius":new Te(I["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ef={paint:new xt({"fill-extrusion-opacity":new Te(I["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ke(I["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Te(I["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Te(I["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ke(I["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ke(I["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ke(I["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Te(I["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Te(I["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Te(I["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Te(I["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Oy};function yg(a,n,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[a*p-2*Math.PI*6378137/2,n*p-2*Math.PI*6378137/2]}class tf{constructor(n,u,p){this.z=n,this.x=u,this.y=p,this.key=rp(0,n,n,u,p)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,u){const p=(A=this.y,R=this.z,H=yg(256*(E=this.x),256*(A=Math.pow(2,R)-A-1),R),j=yg(256*(E+1),256*(A+1),R),H[0]+","+H[1]+","+j[0]+","+j[1]),v=function(E,A,R){let H,j="";for(let ee=E;ee>0;ee--)H=1<<ee-1,j+=(A&H?1:0)+(R&H?2:0);return j}(this.z,this.x,this.y);var E,A,R,H,j;return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===u?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",v).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ov{constructor(n,u){this.wrap=n,this.canonical=u,this.key=rp(n,u.z,u.z,u.x,u.y)}}class Wa{constructor(n,u,p,v,E){this.overscaledZ=n,this.wrap=u,this.canonical=new tf(p,+v,+E),this.key=0===u&&n===p?this.canonical.key:rp(u,n,p,v,E)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const u=this.canonical.z-n;return n>this.canonical.z?new Wa(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wa(n,this.wrap,n,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(n,u=!0){if(this.overscaledZ===n&&u)return this.key;if(n>this.canonical.z)return rp(this.wrap*+u,n,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-n;return rp(this.wrap*+u,n,n,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const u=this.canonical.z-n.canonical.z;return 0===n.overscaledZ||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>u&&n.canonical.y===this.canonical.y>>u}children(n){if(this.overscaledZ>=n)return[new Wa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,v=2*this.canonical.y;return[new Wa(u,this.wrap,u,p,v),new Wa(u,this.wrap,u,p+1,v),new Wa(u,this.wrap,u,p,v+1),new Wa(u,this.wrap,u,p+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Wa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Wa(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ov(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function rp(a,n,u,p,v){const E=1<<Math.min(u,22);let A=E*(v%E)+p%E;return a&&u<22&&(A+=E*E*((a<0?-2*a-1:2*a)%(1<<2*(22-u)))),16*(32*A+u)+(n-u)}Sn(tf,"CanonicalTileID"),Sn(Wa,"OverscaledTileID",{omit:["projMatrix"]});class xh extends at{constructor(n,u,p){super(n,u),this.z=p}}function Pd(a,n){return a.x*n.x+a.y*n.y}function bg(a,n){if(1===a.length){let u=0;const p=n[u++];let v;for(;!v||p.equals(v);)if(v=n[u++],!v)return 1/0;for(;u<n.length;u++){const E=n[u],A=a[0],R=v.sub(p),H=E.sub(p),j=A.sub(p),ee=Pd(R,R),se=Pd(R,H),ce=Pd(H,H),ve=Pd(j,R),be=Pd(j,H),Ae=ee*ce-se*se,$e=(ce*ve-se*be)/Ae,dt=(ee*be-se*ve)/Ae,Ot=p.z*(1-$e-dt)+v.z*$e+E.z*dt;if(isFinite(Ot))return Ot}return 1/0}{let u=1/0;for(const p of n)u=Math.min(u,p.z);return u}}function Pv(a,n,u,p,v,E,A,R){const H=A*v.getElevationAt(a,n,!0,!0),j=0!==E[0],ee=j?0===E[1]?A*(E[0]/7-450):A*function(se,ce,ve){const be=Math.floor(ce[0]/8),Ae=Math.floor(ce[1]/8),$e=10*(ce[0]-8*be),dt=10*(ce[1]-8*Ae),Ot=se.getElevationAt(be,Ae,!0,!0),ct=se.getMeterToDEM(ve),At=Math.floor(.5*($e*ct-1)),Nt=Math.floor(.5*(dt*ct-1)),Bt=se.tileCoordToPixel(be,Ae),bi=2*At+1,hi=2*Nt+1,Li=(On=bi,Cn=hi,[(an=se).getElevationAtPixel(Di=Bt.x-At,bn=Bt.y-Nt,!0),an.getElevationAtPixel(Di+Cn,bn,!0),an.getElevationAtPixel(Di,bn+Cn,!0),an.getElevationAtPixel(Di+On,bn+Cn,!0)]),rn=Math.abs(Li[0]-Li[1]),Si=Math.abs(Li[2]-Li[3]),Ni=Math.abs(Li[0]-Li[2])+Math.abs(Li[1]-Li[3]),Yi=Math.min(.25,.5*ct*(rn+Si)/bi),Zi=Math.min(.25,.5*ct*Ni/hi);var an,Di,bn,On,Cn;return Ot+Math.max(Yi*$e,Zi*dt)}(v,E,R):H;return{base:H+(0===u)?-1:u,top:j?Math.max(ee+p,H+u+2):H+p}}const Rv=Qt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Py}=Rv,Ry=Qt([{name:"a_packed",components:4,type:"Float32"}]),{members:zy}=Ry,zv=gt.types,Fy=Math.cos(Math.PI/180*37.5);class sp{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new yi,this.layoutVertexArray2=new Qi,this.indexArray=new zn,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Xs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,p,v){this.hasPattern=lm("line",this.layers,u);const E=this.layers[0].layout.get("line-sort-key"),A=[];for(const{feature:ee,id:se,index:ce,sourceLayerIndex:ve}of n){const be=this.layers[0]._featureFilter.needGeometry,Ae=ja(ee,be);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),Ae,p))continue;const $e=E?E.evaluate(Ae,{},p):void 0,dt={id:se,properties:ee.properties,type:ee.type,sourceLayerIndex:ve,index:ce,geometry:be?Ae.geometry:tu(ee,p,v),patterns:{},sortKey:$e};A.push(dt)}E&&A.sort((ee,se)=>ee.sortKey-se.sortKey);const{lineAtlas:R,featureIndex:H}=u,j=this.addConstantDashes(R);for(const ee of A){const{geometry:se,index:ce,sourceLayerIndex:ve}=ee;if(j&&this.addFeatureDashes(ee,R),this.hasPattern){const be=ud("line",this.layers,ee,this.zoom,u);this.patternFeatures.push(be)}else this.addFeature(ee,se,ce,p,R.positions,u.availableImages);H.insert(n[ce].feature,se,ce,ve,this.index)}}addConstantDashes(n){let u=!1;for(const p of this.layers){const v=p.paint.get("line-dasharray").value,E=p.layout.get("line-cap").value;if("constant"!==v.kind||"constant"!==E.kind)u=!0;else{const A=E.value,R=v.value;if(!R)continue;n.addDash(R,A)}}return u}addFeatureDashes(n,u){const p=this.zoom;for(const v of this.layers){const E=v.paint.get("line-dasharray").value,A=v.layout.get("line-cap").value;if("constant"===E.kind&&"constant"===A.kind)continue;let R,H;if("constant"===E.kind){if(R=E.value,!R)continue}else R=E.evaluate({zoom:p},n);H="constant"===A.kind?A.value:A.evaluate({zoom:p},n),u.addDash(R,H),n.patterns[v.id]=u.getKey(R,H)}}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}addFeatures(n,u,p,v,E){for(const A of this.patternFeatures)this.addFeature(A,A.geometry,A.index,u,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,zy)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Py),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,u,p,v,E,A){const R=this.layers[0].layout,H=R.get("line-join").evaluate(n,{}),j=R.get("line-cap").evaluate(n,{}),ee=R.get("line-miter-limit"),se=R.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ce of u)this.addLine(ce,n,H,j,ee,se);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,E,A,v)}addLine(n,u,p,v,E,A){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let dt=0;dt<n.length-1;dt++)this.totalDistance+=n[dt].dist(n[dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R="Polygon"===zv[u.type];let H=n.length;for(;H>=2&&n[H-1].equals(n[H-2]);)H--;let j=0;for(;j<H-1&&n[j].equals(n[j+1]);)j++;if(H<(R?3:2))return;"bevel"===p&&(E=1.05);const ee=this.overscaling<=16?15*hn/(512*this.overscaling):0,se=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let ce,ve,be,Ae,$e;this.e1=this.e2=-1,R&&(ce=n[H-2],$e=n[j].sub(ce)._unit()._perp());for(let dt=j;dt<H;dt++){if(be=dt===H-1?R?n[j+1]:void 0:n[dt+1],be&&n[dt].equals(be))continue;$e&&(Ae=$e),ce&&(ve=ce),ce=n[dt],$e=be?be.sub(ce)._unit()._perp():Ae,Ae=Ae||$e;let Ot=Ae.add($e);0===Ot.x&&0===Ot.y||Ot._unit();const ct=Ae.x*$e.x+Ae.y*$e.y,At=Ot.x*$e.x+Ot.y*$e.y,Nt=0!==At?1/At:1/0,Bt=2*Math.sqrt(2-2*At),bi=At<Fy&&ve&&be,hi=Ae.x*$e.y-Ae.y*$e.x>0;if(bi&&dt>j){const Si=ce.dist(ve);if(Si>2*ee){const Ni=ce.sub(ce.sub(ve)._mult(ee/Si)._round());this.updateDistance(ve,Ni),this.addCurrentVertex(Ni,Ae,0,0,se),ve=Ni}}const Li=ve&&be;let rn=Li?p:R?"butt":v;if(Li&&"round"===rn&&(Nt<A?rn="miter":Nt<=2&&(rn="fakeround")),"miter"===rn&&Nt>E&&(rn="bevel"),"bevel"===rn&&(Nt>2&&(rn="flipbevel"),Nt<E&&(rn="miter")),ve&&this.updateDistance(ve,ce),"miter"===rn)Ot._mult(Nt),this.addCurrentVertex(ce,Ot,0,0,se);else if("flipbevel"===rn){if(Nt>100)Ot=$e.mult(-1);else{const Si=Nt*Ae.add($e).mag()/Ae.sub($e).mag();Ot._perp()._mult(Si*(hi?-1:1))}this.addCurrentVertex(ce,Ot,0,0,se),this.addCurrentVertex(ce,Ot.mult(-1),0,0,se)}else if("bevel"===rn||"fakeround"===rn){const Si=-Math.sqrt(Nt*Nt-1),Ni=hi?Si:0,Yi=hi?0:Si;if(ve&&this.addCurrentVertex(ce,Ae,Ni,Yi,se),"fakeround"===rn){const Zi=Math.round(180*Bt/Math.PI/20);for(let an=1;an<Zi;an++){let Di=an/Zi;if(.5!==Di){const On=Di-.5;Di+=Di*On*(Di-1)*((1.0904+ct*(ct*(3.55645-1.43519*ct)-3.2452))*On*On+(.848013+ct*(.215638*ct-1.06021)))}const bn=$e.sub(Ae)._mult(Di)._add(Ae)._unit()._mult(hi?-1:1);this.addHalfVertex(ce,bn.x,bn.y,!1,hi,0,se)}}be&&this.addCurrentVertex(ce,$e,-Ni,-Yi,se)}else if("butt"===rn)this.addCurrentVertex(ce,Ot,0,0,se);else if("square"===rn){const Si=ve?1:-1;ve||this.addCurrentVertex(ce,Ot,Si,Si,se),this.addCurrentVertex(ce,Ot,0,0,se),ve&&this.addCurrentVertex(ce,Ot,Si,Si,se)}else"round"===rn&&(ve&&(this.addCurrentVertex(ce,Ae,0,0,se),this.addCurrentVertex(ce,Ae,1,1,se,!0)),be&&(this.addCurrentVertex(ce,$e,-1,-1,se,!0),this.addCurrentVertex(ce,$e,0,0,se)));if(bi&&dt<H-1){const Si=ce.dist(be);if(Si>2*ee){const Ni=ce.add(be.sub(ce)._mult(ee/Si)._round());this.updateDistance(ce,Ni),this.addCurrentVertex(Ni,$e,0,0,se),ce=Ni}}}}addCurrentVertex(n,u,p,v,E,A=!1){const R=u.y*v-u.x,H=-u.y-u.x*v;this.addHalfVertex(n,u.x+u.y*p,u.y-u.x*p,A,!1,p,E),this.addHalfVertex(n,R,H,A,!0,-v,E)}addHalfVertex({x:n,y:u},p,v,E,A,R,H){this.layoutVertexArray.emplaceBack((n<<1)+(E?1:0),(u<<1)+(A?1:0),Math.round(63*p)+128,Math.round(63*v)+128,1+(0===R?0:R<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const j=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,j),H.primitiveLength++),A?this.e2=j:this.e1=j}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,u){this.distance+=n.dist(u),this.updateScaledDistance()}}Sn(sp,"LineBucket",{omit:["layers","patternFeatures"]});const By=new xt({"line-cap":new Ke(I.layout_line["line-cap"]),"line-join":new Ke(I.layout_line["line-join"]),"line-miter-limit":new Te(I.layout_line["line-miter-limit"]),"line-round-limit":new Te(I.layout_line["line-round-limit"]),"line-sort-key":new Ke(I.layout_line["line-sort-key"])});var nf={paint:new xt({"line-opacity":new Ke(I.paint_line["line-opacity"]),"line-color":new Ke(I.paint_line["line-color"]),"line-translate":new Te(I.paint_line["line-translate"]),"line-translate-anchor":new Te(I.paint_line["line-translate-anchor"]),"line-width":new Ke(I.paint_line["line-width"]),"line-gap-width":new Ke(I.paint_line["line-gap-width"]),"line-offset":new Ke(I.paint_line["line-offset"]),"line-blur":new Ke(I.paint_line["line-blur"]),"line-dasharray":new Ke(I.paint_line["line-dasharray"]),"line-pattern":new Ke(I.paint_line["line-pattern"]),"line-gradient":new bt(I.paint_line["line-gradient"]),"line-trim-offset":new Te(I.paint_line["line-trim-offset"])}),layout:By};const xg=new class extends Ke{possiblyEvaluate(a,n){return n=new te(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(a,n)}evaluate(a,n,u,p){return n=mn({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(a,n,u,p)}}(nf.paint.properties["line-width"].specification);function Nu(a,n){return n>0?n+2*a:a}xg.useIntegerZoom=!0;const Ny=Qt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fv=Qt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Yy=Qt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Qt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hy=Qt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Vy=Qt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Qt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bv=Qt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gy=Qt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Qt([{name:"triangle",components:3,type:"Uint16"}]),Qt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Qt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qt([{type:"Float32",name:"offsetX"}]),Qt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var va=24;const su=128;function wg(a,n){const{expression:u}=n;if("constant"===u.kind)return{kind:"constant",layoutSize:u.evaluate(new te(a+1))};if("source"===u.kind)return{kind:"source"};{const{zoomStops:p,interpolationType:v}=u;let E=0;for(;E<p.length&&p[E]<=a;)E++;E=Math.max(0,E-1);let A=E;for(;A<p.length&&p[A]<a+1;)A++;A=Math.min(p.length-1,A);const R=p[E],H=p[A];return"composite"===u.kind?{kind:"composite",minZoom:R,maxZoom:H,interpolationType:v}:{kind:"camera",minZoom:R,maxZoom:H,minSize:u.evaluate(new te(R)),maxSize:u.evaluate(new te(H)),interpolationType:v}}}function op(a,{uSize:n,uSizeT:u},{lowerSize:p,upperSize:v}){return"source"===a.kind?p/su:"composite"===a.kind?Or(p/su,v/su,u):n}function hd(a,n){let u=0,p=0;if("constant"===a.kind)p=a.layoutSize;else if("source"!==a.kind){const{interpolationType:v,minZoom:E,maxZoom:A}=a,R=v?_i(Go.interpolationFactor(v,n,E,A),0,1):0;"camera"===a.kind?p=Or(a.minSize,a.maxSize,R):u=R}return{uSizeT:u,uSize:p}}var Nv=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:su,evaluateSizeForFeature:op,evaluateSizeForZoom:hd,getSizeData:wg});function Cg(a,n,u){return a.sections.forEach(p=>{p.text=function(v,E,A){const R=E.layout.get("text-transform").evaluate(A,{});return"uppercase"===R?v=v.toLocaleUpperCase():"lowercase"===R&&(v=v.toLocaleLowerCase()),K.applyArabicShaping&&(v=K.applyArabicShaping(v)),v}(p.text,n,u)}),a}const rf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function dm(a){return"\ufe36"===a||"\ufe48"===a||"\ufe38"===a||"\ufe44"===a||"\ufe42"===a||"\ufe3e"===a||"\ufe3c"===a||"\ufe3a"===a||"\ufe18"===a||"\ufe40"===a||"\ufe10"===a||"\ufe13"===a||"\ufe14"===a||"\uff40"===a||"\uffe3"===a||"\ufe11"===a||"\ufe12"===a}function Yv(a){return"\ufe35"===a||"\ufe47"===a||"\ufe37"===a||"\ufe43"===a||"\ufe41"===a||"\ufe3d"===a||"\ufe3b"===a||"\ufe39"===a||"\ufe17"===a||"\ufe3f"===a}var Hv=Cs,hm=function(a,n,u,p,v){var E,A,R=8*v-p-1,H=(1<<R)-1,j=H>>1,ee=-7,se=u?v-1:0,ce=u?-1:1,ve=a[n+se];for(se+=ce,E=ve&(1<<-ee)-1,ve>>=-ee,ee+=R;ee>0;E=256*E+a[n+se],se+=ce,ee-=8);for(A=E&(1<<-ee)-1,E>>=-ee,ee+=p;ee>0;A=256*A+a[n+se],se+=ce,ee-=8);if(0===E)E=1-j;else{if(E===H)return A?NaN:1/0*(ve?-1:1);A+=Math.pow(2,p),E-=j}return(ve?-1:1)*A*Math.pow(2,E-p)},Vv=function(a,n,u,p,v,E){var A,R,H,j=8*E-v-1,ee=(1<<j)-1,se=ee>>1,ce=23===v?Math.pow(2,-24)-Math.pow(2,-77):0,ve=p?0:E-1,be=p?1:-1,Ae=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(R=isNaN(n)?1:0,A=ee):(A=Math.floor(Math.log(n)/Math.LN2),n*(H=Math.pow(2,-A))<1&&(A--,H*=2),(n+=A+se>=1?ce/H:ce*Math.pow(2,1-se))*H>=2&&(A++,H/=2),A+se>=ee?(R=0,A=ee):A+se>=1?(R=(n*H-1)*Math.pow(2,v),A+=se):(R=n*Math.pow(2,se-1)*Math.pow(2,v),A=0));v>=8;a[u+ve]=255&R,ve+=be,R/=256,v-=8);for(A=A<<v|R,j+=v;j>0;a[u+ve]=255&A,ve+=be,A/=256,j-=8);a[u+ve-be]|=128*Ae};function Cs(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Cs.Varint=0,Cs.Fixed64=1,Cs.Bytes=2,Cs.Fixed32=5;var sf=4294967296,Gv=1/sf,Eg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function pd(a){return a.type===Cs.Bytes?a.readVarint()+a.pos:a.pos+1}function Sg(a,n,u){var p=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));u.realloc(p);for(var v=u.pos-1;v>=a;v--)u.buf[v+p]=u.buf[v]}function jy(a,n){for(var u=0;u<a.length;u++)n.writeVarint(a[u])}function Tg(a,n){for(var u=0;u<a.length;u++)n.writeSVarint(a[u])}function Uy(a,n){for(var u=0;u<a.length;u++)n.writeFloat(a[u])}function Wy(a,n){for(var u=0;u<a.length;u++)n.writeDouble(a[u])}function jv(a,n){for(var u=0;u<a.length;u++)n.writeBoolean(a[u])}function $y(a,n){for(var u=0;u<a.length;u++)n.writeFixed32(a[u])}function Uv(a,n){for(var u=0;u<a.length;u++)n.writeSFixed32(a[u])}function Wv(a,n){for(var u=0;u<a.length;u++)n.writeFixed64(a[u])}function Xy(a,n){for(var u=0;u<a.length;u++)n.writeSFixed64(a[u])}function pm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function ap(a,n,u){a[u]=n,a[u+1]=n>>>8,a[u+2]=n>>>16,a[u+3]=n>>>24}function $v(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Cs.prototype={destroy:function(){this.buf=null},readFields:function(a,n,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),v=p>>3,E=this.pos;this.type=7&p,a(v,n,this),this.pos===E&&this.skip(p)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=pm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=$v(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=pm(this.buf,this.pos)+pm(this.buf,this.pos+4)*sf;return this.pos+=8,a},readSFixed64:function(){var a=pm(this.buf,this.pos)+$v(this.buf,this.pos+4)*sf;return this.pos+=8,a},readFloat:function(){var a=hm(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=hm(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,u,p=this.buf;return n=127&(u=p[this.pos++]),u<128?n:(n|=(127&(u=p[this.pos++]))<<7,u<128?n:(n|=(127&(u=p[this.pos++]))<<14,u<128?n:(n|=(127&(u=p[this.pos++]))<<21,u<128?n:function(v,E,A){var R,H,j=A.buf;if(R=(112&(H=j[A.pos++]))>>4,H<128||(R|=(127&(H=j[A.pos++]))<<3,H<128)||(R|=(127&(H=j[A.pos++]))<<10,H<128)||(R|=(127&(H=j[A.pos++]))<<17,H<128)||(R|=(127&(H=j[A.pos++]))<<24,H<128)||(R|=(1&(H=j[A.pos++]))<<31,H<128))return function wh(a,n,u){return u?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}(v,R,E);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(u=p[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&Eg?Eg.decode(this.buf.subarray(n,a)):function(u,p,v){for(var E="",A=p;A<v;){var R,H,j,ee=u[A],se=null,ce=ee>239?4:ee>223?3:ee>191?2:1;if(A+ce>v)break;1===ce?ee<128&&(se=ee):2===ce?128==(192&(R=u[A+1]))&&(se=(31&ee)<<6|63&R)<=127&&(se=null):3===ce?(H=u[A+2],128==(192&(R=u[A+1]))&&128==(192&H)&&((se=(15&ee)<<12|(63&R)<<6|63&H)<=2047||se>=55296&&se<=57343)&&(se=null)):4===ce&&(H=u[A+2],j=u[A+3],128==(192&(R=u[A+1]))&&128==(192&H)&&128==(192&j)&&((se=(15&ee)<<18|(63&R)<<12|(63&H)<<6|63&j)<=65535||se>=1114112)&&(se=null)),null===se?(se=65533,ce=1):se>65535&&(se-=65536,E+=String.fromCharCode(se>>>10&1023|55296),se=56320|1023&se),E+=String.fromCharCode(se),A+=ce}return E}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Cs.Bytes)return a.push(this.readVarint(n));var u=pd(this);for(a=a||[];this.pos<u;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Cs.Bytes)return a.push(this.readSVarint());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Cs.Bytes)return a.push(this.readBoolean());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Cs.Bytes)return a.push(this.readFloat());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Cs.Bytes)return a.push(this.readDouble());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Cs.Bytes)return a.push(this.readFixed32());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Cs.Bytes)return a.push(this.readSFixed32());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Cs.Bytes)return a.push(this.readFixed64());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Cs.Bytes)return a.push(this.readSFixed64());var n=pd(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Cs.Varint)for(;this.buf[this.pos++]>127;);else if(n===Cs.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Cs.Fixed32)this.pos+=4;else{if(n!==Cs.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var u=new Uint8Array(n);u.set(this.buf),this.buf=u,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),ap(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),ap(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),ap(this.buf,-1&a,this.pos),ap(this.buf,Math.floor(a*Gv),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),ap(this.buf,-1&a,this.pos),ap(this.buf,Math.floor(a*Gv),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,u){var p,v,E,R;if(n>=0?(p=n%4294967296|0,v=n/4294967296|0):(v=~(-n/4294967296),4294967295^(p=~(-n%4294967296))?p=p+1|0:(p=0,v=v+1|0)),n>=0x10000000000000000||n<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),E=p,(R=u).buf[R.pos++]=127&E|128,E>>>=7,R.buf[R.pos++]=127&E|128,E>>>=7,R.buf[R.pos++]=127&E|128,E>>>=7,R.buf[R.pos++]=127&E|128,R.buf[R.pos]=127&(E>>>=7),function(E,A){var R=(7&E)<<4;A.buf[A.pos++]|=R|((E>>>=3)?128:0),E&&(A.buf[A.pos++]=127&E|((E>>>=7)?128:0),E&&(A.buf[A.pos++]=127&E|((E>>>=7)?128:0),E&&(A.buf[A.pos++]=127&E|((E>>>=7)?128:0),E&&(A.buf[A.pos++]=127&E|((E>>>=7)?128:0),E&&(A.buf[A.pos++]=127&E)))))}(v,u)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(p,v,E){for(var A,R,H=0;H<v.length;H++){if((A=v.charCodeAt(H))>55295&&A<57344){if(!R){A>56319||H+1===v.length?(p[E++]=239,p[E++]=191,p[E++]=189):R=A;continue}if(A<56320){p[E++]=239,p[E++]=191,p[E++]=189,R=A;continue}A=R-55296<<10|A-56320|65536,R=null}else R&&(p[E++]=239,p[E++]=191,p[E++]=189,R=null);A<128?p[E++]=A:(A<2048?p[E++]=A>>6|192:(A<65536?p[E++]=A>>12|224:(p[E++]=A>>18|240,p[E++]=A>>12&63|128),p[E++]=A>>6&63|128),p[E++]=63&A|128)}return E}(this.buf,a,this.pos);var u=this.pos-n;u>=128&&Sg(n,u,this),this.pos=n-1,this.writeVarint(u),this.pos+=u},writeFloat:function(a){this.realloc(4),Vv(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),Vv(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var u=0;u<n;u++)this.buf[this.pos++]=a[u]},writeRawMessage:function(a,n){this.pos++;var u=this.pos;a(n,this);var p=this.pos-u;p>=128&&Sg(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(a,n,u){this.writeTag(a,Cs.Bytes),this.writeRawMessage(n,u)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,jy,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,Tg,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,jv,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,Uy,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,Wy,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,$y,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,Uv,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,Wv,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,Xy,n)},writeBytesField:function(a,n){this.writeTag(a,Cs.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Cs.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Cs.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Cs.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Cs.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Cs.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Cs.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Cs.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Cs.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Cs.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var fm=vt(Hv);const kg=3;function Xv(a,n,u){n.glyphs=[],1===a&&u.readMessage(Zv,n)}function Zv(a,n,u){if(3===a){const{id:p,bitmap:v,width:E,height:A,left:R,top:H,advance:j}=u.readMessage(qv,{});n.glyphs.push({id:p,bitmap:new nu({width:E+2*kg,height:A+2*kg},v),metrics:{width:E,height:A,left:R,top:H,advance:j}})}else 4===a?n.ascender=u.readSVarint():5===a&&(n.descender=u.readSVarint())}function qv(a,n,u){1===a?n.id=u.readVarint():2===a?n.bitmap=u.readBytes():3===a?n.width=u.readVarint():4===a?n.height=u.readVarint():5===a?n.left=u.readSVarint():6===a?n.top=u.readSVarint():7===a&&(n.advance=u.readVarint())}const mm=kg;function Mg(a){let n=0,u=0;for(const A of a)n+=A.w*A.h,u=Math.max(u,A.w);a.sort((A,R)=>R.h-A.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),u),h:1/0}];let v=0,E=0;for(const A of a)for(let R=p.length-1;R>=0;R--){const H=p[R];if(!(A.w>H.w||A.h>H.h)){if(A.x=H.x,A.y=H.y,E=Math.max(E,A.y+A.h),v=Math.max(v,A.x+A.w),A.w===H.w&&A.h===H.h){const j=p.pop();R<p.length&&(p[R]=j)}else A.h===H.h?(H.x+=A.w,H.w-=A.w):A.w===H.w?(H.y+=A.h,H.h-=A.h):(p.push({x:H.x+A.w,y:H.y,w:H.w-A.w,h:A.h}),H.y+=A.h,H.h-=A.h);break}}return{w:v,h:E,fill:n/(v*E)||0}}const kl=1;class gm{constructor(n,{pixelRatio:u,version:p,stretchX:v,stretchY:E,content:A}){this.paddedRect=n,this.pixelRatio=u,this.stretchX=v,this.stretchY=E,this.content=A,this.version=p}get tl(){return[this.paddedRect.x+kl,this.paddedRect.y+kl]}get br(){return[this.paddedRect.x+this.paddedRect.w-kl,this.paddedRect.y+this.paddedRect.h-kl]}get displaySize(){return[(this.paddedRect.w-2*kl)/this.pixelRatio,(this.paddedRect.h-2*kl)/this.pixelRatio]}}class ou{constructor(n,u){const p={},v={};this.haveRenderCallbacks=[];const E=[];this.addImages(n,p,E),this.addImages(u,v,E);const{w:A,h:R}=Mg(E),H=new Ua({width:A||1,height:R||1});for(const j in n){const ee=n[j],se=p[j].paddedRect;Ua.copy(ee.data,H,{x:0,y:0},{x:se.x+kl,y:se.y+kl},ee.data)}for(const j in u){const ee=u[j],se=v[j].paddedRect,ce=se.x+kl,ve=se.y+kl,be=ee.data.width,Ae=ee.data.height;Ua.copy(ee.data,H,{x:0,y:0},{x:ce,y:ve},ee.data),Ua.copy(ee.data,H,{x:0,y:Ae-1},{x:ce,y:ve-1},{width:be,height:1}),Ua.copy(ee.data,H,{x:0,y:0},{x:ce,y:ve+Ae},{width:be,height:1}),Ua.copy(ee.data,H,{x:be-1,y:0},{x:ce-1,y:ve},{width:1,height:Ae}),Ua.copy(ee.data,H,{x:0,y:0},{x:ce+be,y:ve},{width:1,height:Ae})}this.image=H,this.iconPositions=p,this.patternPositions=v}addImages(n,u,p){for(const v in n){const E=n[v],A={x:0,y:0,w:E.data.width+2*kl,h:E.data.height+2*kl};p.push(A),u[v]=new gm(A,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>n.hasImage(p)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in n.updatedImages)this.patchUpdatedImage(this.iconPositions[p],n.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],n.getImage(p),u)}patchUpdatedImage(n,u,p){if(!n||!u||n.version===u.version)return;n.version=u.version;const[v,E]=n.tl;p.update(u.data,void 0,{x:v,y:E})}}Sn(gm,"ImagePosition"),Sn(ou,"ImageAtlas");const mc={horizontal:1,vertical:2,horizontalOnly:3},Kv=-17;class of{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,u){const p=new of;return p.scale=n||1,p.fontStack=u,p}static forImage(n){const u=new of;return u.imageName=n,u}}class lp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,u){const p=new lp;for(let v=0;v<n.sections.length;v++){const E=n.sections[v];E.image?p.addImageSection(E):p.addTextSection(E,u)}return p}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(u,p){let v="";for(let E=0;E<u.length;E++){const A=u.charCodeAt(E+1)||null,R=u.charCodeAt(E-1)||null;v+=!p&&(A&&Wd(A)&&!rf[u[E+1]]||R&&Wd(R)&&!rf[u[E-1]])||!rf[u[E]]?u[E]:rf[u[E]]}return v}(this.text,n)}trim(){let n=0;for(let p=0;p<this.text.length&&vm[this.text.charCodeAt(p)];p++)n++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=n&&vm[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(n,u),this.sectionIndex=this.sectionIndex.slice(n,u)}substring(n,u){const p=new lp;return p.text=this.text.substring(n,u),p.sectionIndex=this.sectionIndex.slice(n,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,u)=>Math.max(n,this.sections[u].scale),0)}addTextSection(n,u){this.text+=n.text,this.sections.push(of.forText(n.scale,n.fontStack||u));const p=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(p)}addImageSection(n){const u=n.image?n.image.name:"";if(0===u.length)return void wn("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(of.forImage(u)),this.sectionIndex.push(this.sections.length-1)):wn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Yu(a,n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be){const Ae=lp.fromFeature(a,v);se===mc.vertical&&Ae.verticalizePunctuation(ce);let $e=[];const dt=function(Bt,bi,hi,Li,rn,Si){if(!Bt)return[];const Ni=[],Yi=function(bn,On,Cn,_r,ln,jn){let yr=0;for(let ns=0;ns<bn.length();ns++){const br=bn.getSection(ns);yr+=Jv(bn.getCharCode(ns),br,_r,ln,On,jn)}return yr/Math.max(1,Math.ceil(yr/Cn))}(Bt,bi,hi,Li,rn,Si),Zi=Bt.text.indexOf("\u200b")>=0;let an=0;for(let bn=0;bn<Bt.length();bn++){const On=Bt.getSection(bn),Cn=Bt.getCharCode(bn);if(vm[Cn]||(an+=Jv(Cn,On,Li,rn,bi,Si)),bn<Bt.length()-1){const _r=!((Di=Cn)<11904||!(yn["Bopomofo Extended"](Di)||yn.Bopomofo(Di)||yn["CJK Compatibility Forms"](Di)||yn["CJK Compatibility Ideographs"](Di)||yn["CJK Compatibility"](Di)||yn["CJK Radicals Supplement"](Di)||yn["CJK Strokes"](Di)||yn["CJK Symbols and Punctuation"](Di)||yn["CJK Unified Ideographs Extension A"](Di)||yn["CJK Unified Ideographs"](Di)||yn["Enclosed CJK Letters and Months"](Di)||yn["Halfwidth and Fullwidth Forms"](Di)||yn.Hiragana(Di)||yn["Ideographic Description Characters"](Di)||yn["Kangxi Radicals"](Di)||yn["Katakana Phonetic Extensions"](Di)||yn.Katakana(Di)||yn["Vertical Forms"](Di)||yn["Yi Radicals"](Di)||yn["Yi Syllables"](Di)));(Ag[Cn]||_r||On.imageName)&&Ni.push(Ig(bn+1,an,Yi,Ni,Zy(Cn,Bt.getCharCode(bn+1),_r&&Zi),!1))}}var Di;return Qv(Ig(Bt.length(),an,Yi,Ni,0,!0))}(Ae,j,E,n,p,ve),{processBidirectionalText:Ot,processStyledBidirectionalText:ct}=K;if(Ot&&1===Ae.sections.length){const Bt=Ot(Ae.toString(),dt);for(const bi of Bt){const hi=new lp;hi.text=bi,hi.sections=Ae.sections;for(let Li=0;Li<bi.length;Li++)hi.sectionIndex.push(0);$e.push(hi)}}else if(ct){const Bt=ct(Ae.text,Ae.sectionIndex,dt);for(const bi of Bt){const hi=new lp;hi.text=bi[0],hi.sectionIndex=bi[1],hi.sections=Ae.sections,$e.push(hi)}}else $e=function(Bt,bi){const hi=[],Li=Bt.text;let rn=0;for(const Si of bi)hi.push(Bt.substring(rn,Si)),rn=Si;return rn<Li.length&&hi.push(Bt.substring(rn,Li.length)),hi}(Ae,dt);const At=[],Nt={positionedLines:At,text:Ae.toString(),top:ee[1],bottom:ee[1],left:ee[0],right:ee[0],writingMode:se,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Bt,bi,hi,Li,rn,Si,Ni,Yi,Zi,an,Di,bn){let On=0,Cn=0,_r=0;const ln="right"===Yi?1:"left"===Yi?0:.5;let jn=!1;for(const Er of rn){const Sr=Er.getSections();for(const Es of Sr){if(Es.imageName)continue;const Ss=bi[Es.fontStack];if(Ss&&(jn=void 0!==Ss.ascender&&void 0!==Ss.descender,!jn))break}if(!jn)break}let yr=0;for(const Er of rn){Er.trim();const Sr=Er.getMaxScale(),Es=(Sr-1)*va,Ss={positionedGlyphs:[],lineOffset:0};Bt.positionedLines[yr]=Ss;const Ms=Ss.positionedGlyphs;let Ts=0;if(!Er.length()){Cn+=Si,++yr;continue}let Gs=0,Qs=0;for(let As=0;As<Er.length();As++){const Ao=Er.getSection(As),go=Er.getSectionIndex(As),qs=Er.getCharCode(As);let ss=Ao.scale,vo=null,Ds=null,ll=null,_o=va,_a=0;const ea=!(Zi===mc.horizontal||!Di&&!ko(qs)||Di&&(vm[qs]||(ns=qs,yn.Arabic(ns)||yn["Arabic Supplement"](ns)||yn["Arabic Extended-A"](ns)||yn["Arabic Presentation Forms-A"](ns)||yn["Arabic Presentation Forms-B"](ns))));if(Ao.imageName){const cl=Li[Ao.imageName];if(!cl)continue;ll=Ao.imageName,Bt.iconsInText=Bt.iconsInText||!0,Ds=cl.paddedRect;const ta=cl.displaySize;ss=ss*va/bn,vo={width:ta[0],height:ta[1],left:kl,top:-mm,advance:ea?ta[1]:ta[0],localGlyph:!1},_a=jn?-vo.height*ss:Kv+Sr*va-ta[1]*ss,_o=vo.advance;const uu=(ea?ta[0]:ta[1])*ss-va*Sr;uu>0&&uu>Ts&&(Ts=uu)}else{const cl=hi[Ao.fontStack];if(!cl)continue;cl[qs]&&(Ds=cl[qs]);const ta=bi[Ao.fontStack];if(!ta)continue;const uu=ta.glyphs[qs];if(!uu)continue;if(vo=uu.metrics,_o=8203!==qs?va:0,jn){const mp=void 0!==ta.ascender?Math.abs(ta.ascender):0,gp=void 0!==ta.descender?Math.abs(ta.descender):0,wf=(mp+gp)*ss;Gs<wf&&(Gs=wf,Qs=(mp-gp)/2*ss),_a=-mp*ss}else _a=Kv+(Sr-ss)*va}ea?(Bt.verticalizable=!0,Ms.push({glyph:qs,imageName:ll,x:On,y:Cn+_a,vertical:ea,scale:ss,localGlyph:vo.localGlyph,fontStack:Ao.fontStack,sectionIndex:go,metrics:vo,rect:Ds}),On+=_o*ss+an):(Ms.push({glyph:qs,imageName:ll,x:On,y:Cn+_a,vertical:ea,scale:ss,localGlyph:vo.localGlyph,fontStack:Ao.fontStack,sectionIndex:go,metrics:vo,rect:Ds}),On+=vo.advance*ss+an)}0!==Ms.length&&(_r=Math.max(On-an,_r),jn?Og(Ms,ln,Ts,Qs,Si*Sr/2):Og(Ms,ln,Ts,0,Si/2)),On=0;const mo=Si*Sr+Ts;Ss.lineOffset=Math.max(Ts,Es),Cn+=mo,++yr}var ns;const br=Cn,{horizontalAlign:ir,verticalAlign:Rs}=Lg(Ni);(function(Er,Sr,Es,Ss,Ms,Ts){const Gs=(Sr-Es)*Ms,Qs=-Ts*Ss;for(const mo of Er)for(const As of mo.positionedGlyphs)As.x+=Gs,As.y+=Qs})(Bt.positionedLines,ln,ir,Rs,_r,br),Bt.top+=-Rs*br,Bt.bottom=Bt.top+br,Bt.left+=-ir*_r,Bt.right=Bt.left+_r,Bt.hasBaseline=jn}(Nt,n,u,p,$e,A,R,H,se,j,ce,be),!function(Bt){for(const bi of Bt)if(0!==bi.positionedGlyphs.length)return!1;return!0}(At)&&Nt}const vm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ag={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Jv(a,n,u,p,v,E){if(n.imageName){const A=p[n.imageName];return A?A.displaySize[0]*n.scale*va/E+v:0}{const A=u[n.fontStack],R=A&&A.glyphs[a];return R?R.metrics.advance*n.scale+v:0}}function Dg(a,n,u,p){const v=Math.pow(a-n,2);return p?a<n?v/2:2*v:v+Math.abs(u)*u}function Zy(a,n,u){let p=0;return 10===a&&(p-=1e4),u&&(p+=150),40!==a&&65288!==a||(p+=50),41!==n&&65289!==n||(p+=50),p}function Ig(a,n,u,p,v,E){let A=null,R=Dg(n,u,v,E);for(const H of p){const j=Dg(n-H.x,u,v,E)+H.badness;j<=R&&(A=H,R=j)}return{index:a,x:n,priorBreak:A,badness:R}}function Qv(a){return a?Qv(a.priorBreak).concat(a.index):[]}function Lg(a){let n=.5,u=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:n,verticalAlign:u}}function Og(a,n,u,p,v){if(!(n||u||p||v))return;const E=a.length-1,A=a[E],R=(A.x+A.metrics.advance*A.scale)*n;for(let H=0;H<=E;H++)a[H].x-=R,a[H].y+=u+p+v}function qy(a,n,u){const{horizontalAlign:p,verticalAlign:v}=Lg(u),E=n[0]-a.displaySize[0]*p,A=n[1]-a.displaySize[1]*v;return{image:a,top:A,bottom:A+a.displaySize[1],left:E,right:E+a.displaySize[0]}}function e_(a,n,u,p,v,E){const A=a.image;let R;if(A.content){const $e=A.content,dt=A.pixelRatio||1;R=[$e[0]/dt,$e[1]/dt,A.displaySize[0]-$e[2]/dt,A.displaySize[1]-$e[3]/dt]}const H=n.left*E,j=n.right*E;let ee,se,ce,ve;"width"===u||"both"===u?(ve=v[0]+H-p[3],se=v[0]+j+p[1]):(ve=v[0]+(H+j-A.displaySize[0])/2,se=ve+A.displaySize[0]);const be=n.top*E,Ae=n.bottom*E;return"height"===u||"both"===u?(ee=v[1]+be-p[0],ce=v[1]+Ae+p[2]):(ee=v[1]+(be+Ae-A.displaySize[1])/2,ce=ee+A.displaySize[1]),{image:A,top:ee,right:se,bottom:ce,left:ve,collisionPadding:R}}class fd extends at{constructor(n,u,p,v,E){super(n,u),this.angle=v,this.z=p,void 0!==E&&(this.segment=E)}clone(){return new fd(this.x,this.y,this.z,this.angle,this.segment)}}function t_(a,n,u,p,v){if(void 0===n.segment)return!0;let E=n,A=n.segment+1,R=0;for(;R>-u/2;){if(A--,A<0)return!1;R-=a[A].dist(E),E=a[A]}R+=a[A].dist(a[A+1]),A++;const H=[];let j=0;for(;R<u/2;){const ee=a[A],se=a[A+1];if(!se)return!1;let ce=a[A-1].angleTo(ee)-ee.angleTo(se);for(ce=Math.abs((ce+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:R,angleDelta:ce}),j+=ce;R-H[0].distance>p;)j-=H.shift().angleDelta;if(j>v)return!1;A++,R+=ee.dist(se)}return!0}function i_(a){let n=0;for(let u=0;u<a.length-1;u++)n+=a[u].dist(a[u+1]);return n}function n_(a,n,u){return a?.6*n*u:0}function r_(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function s_(a,n,u,p,v,E){const A=n_(u,v,E),R=r_(u,p)*E;let H=0;const j=i_(a)/2;for(let ee=0;ee<a.length-1;ee++){const se=a[ee],ce=a[ee+1],ve=se.dist(ce);if(H+ve>j){const be=(j-H)/ve,Ae=Or(se.x,ce.x,be),$e=Or(se.y,ce.y,be),dt=new fd(Ae,$e,0,ce.angleTo(se),ee);return!A||t_(a,dt,R,A,n)?dt:void 0}H+=ve}}function o_(a,n,u,p,v,E,A,R,H){const j=n_(p,E,A),ee=r_(p,v),se=ee*A,ce=0===a[0].x||a[0].x===H||0===a[0].y||a[0].y===H;return n-se<n/4&&(n=se+n/4),a_(a,ce?n/2*R%n:(ee/2+2*E)*A*R%n,n,j,u,se,ce,!1,H)}function a_(a,n,u,p,v,E,A,R,H){const j=E/2,ee=i_(a);let se=0,ce=n-u,ve=[];for(let be=0;be<a.length-1;be++){const Ae=a[be],$e=a[be+1],dt=Ae.dist($e),Ot=$e.angleTo(Ae);for(;ce+u<se+dt;){ce+=u;const ct=(ce-se)/dt,At=Or(Ae.x,$e.x,ct),Nt=Or(Ae.y,$e.y,ct);if(At>=0&&At<H&&Nt>=0&&Nt<H&&ce-j>=0&&ce+j<=ee){const Bt=new fd(At,Nt,0,Ot,be);Bt._round(),p&&!t_(a,Bt,E,p,v)||ve.push(Bt)}}se+=dt}return R||ve.length||A||(ve=a_(a,se/2,u,p,v,E,A,!0,H)),ve}function Pg(a,n,u,p,v){const E=[];for(let A=0;A<a.length;A++){const R=a[A];let H;for(let j=0;j<R.length-1;j++){let ee=R[j],se=R[j+1];ee.x<n&&se.x<n||(ee.x<n?ee=new at(n,ee.y+(n-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round():se.x<n&&(se=new at(n,ee.y+(n-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round()),ee.y<u&&se.y<u||(ee.y<u?ee=new at(ee.x+(u-ee.y)/(se.y-ee.y)*(se.x-ee.x),u)._round():se.y<u&&(se=new at(ee.x+(u-ee.y)/(se.y-ee.y)*(se.x-ee.x),u)._round()),ee.x>=p&&se.x>=p||(ee.x>=p?ee=new at(p,ee.y+(p-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round():se.x>=p&&(se=new at(p,ee.y+(p-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round()),ee.y>=v&&se.y>=v||(ee.y>=v?ee=new at(ee.x+(v-ee.y)/(se.y-ee.y)*(se.x-ee.x),v)._round():se.y>=v&&(se=new at(ee.x+(v-ee.y)/(se.y-ee.y)*(se.x-ee.x),v)._round()),H&&ee.equals(H[H.length-1])||(H=[ee],E.push(H)),H.push(se)))))}}return E}Sn(fd,"Anchor");const af=1e20;function _m(a,n,u,p,v,E,A,R,H){for(let j=n;j<n+p;j++)l_(a,u*E+j,E,v,A,R,H);for(let j=u;j<u+v;j++)l_(a,j*E+n,1,p,A,R,H)}function l_(a,n,u,p,v,E,A){E[0]=0,A[0]=-af,A[1]=af,v[0]=a[n];for(let R=1,H=0,j=0;R<p;R++){v[R]=a[n+R*u];const ee=R*R;do{const se=E[H];j=(v[R]-v[se]+ee-se*se)/(R-se)/2}while(j<=A[H]&&--H>-1);H++,E[H]=R,A[H]=j,A[H+1]=af}for(let R=0,H=0;R<p;R++){for(;A[H+1]<R;)H++;const j=E[H],ee=R-j;a[n+R*u]=v[j]+ee*ee}}const au=2,ym={none:0,ideographs:1,all:2};class cp{constructor(n,u,p){this.requestManager=n,this.localGlyphMode=u,this.localFontFamily=p,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,u){const p=[];for(const v in n)for(const E of n[v])p.push({stack:v,id:E});qi(p,({stack:v,id:E},A)=>{let R=this.entries[v];R||(R=this.entries[v]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let H=R.glyphs[E];if(void 0!==H)return void A(null,{stack:v,id:E,glyph:H});if(H=this._tinySDF(R,v,E),H)return R.glyphs[E]=H,void A(null,{stack:v,id:E,glyph:H});const j=Math.floor(E/256);if(256*j>65535)return void A(new Error("glyphs > 65535 not supported"));if(R.ranges[j])return void A(null,{stack:v,id:E,glyph:H});let ee=R.requests[j];ee||(ee=R.requests[j]=[],cp.loadGlyphRange(v,j,this.url,this.requestManager,(se,ce)=>{if(ce){R.ascender=ce.ascender,R.descender=ce.descender;for(const ve in ce.glyphs)this._doesCharSupportLocalGlyph(+ve)||(R.glyphs[+ve]=ce.glyphs[+ve]);R.ranges[j]=!0}for(const ve of ee)ve(se,ce);delete R.requests[j]})),ee.push((se,ce)=>{se?A(se):ce&&A(null,{stack:v,id:E,glyph:ce.glyphs[E]||null})})},(v,E)=>{if(v)u(v);else if(E){const A={};for(const{stack:R,id:H,glyph:j}of E)void 0===A[R]&&(A[R]={}),void 0===A[R].glyphs&&(A[R].glyphs={}),A[R].glyphs[H]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics},A[R].ascender=this.entries[R].ascender,A[R].descender=this.entries[R].descender;u(null,A)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==ym.none&&(this.localGlyphMode===ym.all?!!this.localFontFamily:!!this.localFontFamily&&(yn["CJK Unified Ideographs"](n)||yn["Hangul Syllables"](n)||yn.Hiragana(n)||yn.Katakana(n)||yn["CJK Symbols and Punctuation"](n)))}_tinySDF(n,u,p){const v=this.localFontFamily;if(!v||!this._doesCharSupportLocalGlyph(p))return;let E=n.tinySDF;if(!E){let Ae="400";/bold/i.test(u)?Ae="900":/medium/i.test(u)?Ae="500":/light/i.test(u)&&(Ae="200"),E=n.tinySDF=new cp.TinySDF({fontFamily:v,fontWeight:Ae,fontSize:24*au,buffer:3*au,radius:8*au}),E.fontWeight=Ae}if(this.localGlyphs[E.fontWeight][p])return this.localGlyphs[E.fontWeight][p];const A=String.fromCharCode(p),{data:R,width:H,height:j,glyphWidth:ee,glyphHeight:se,glyphLeft:ce,glyphTop:ve,glyphAdvance:be}=E.draw(A);return this.localGlyphs[E.fontWeight][p]={id:p,bitmap:new nu({width:H,height:j},R),metrics:{width:ee/au,height:se/au,left:ce/au,top:ve/au-27,advance:be/au,localGlyph:!0}}}}cp.loadGlyphRange=function(a,n,u,p,v){const E=256*n,A=E+255,R=p.transformRequest(p.normalizeGlyphsURL(u).replace("{fontstack}",a).replace("{range}",`${E}-${A}`),ks.Glyphs);Cr(R,(H,j)=>{if(H)v(H);else if(j){const ee={},se=new fm(j).readFields(Xv,{});for(const ce of se.glyphs)ee[ce.id]=ce;v(null,{glyphs:ee,ascender:se.ascender,descender:se.descender})}})},cp.TinySDF=class{constructor({fontSize:a=24,buffer:n=3,radius:u=8,cutoff:p=.25,fontFamily:v="sans-serif",fontWeight:E="normal",fontStyle:A="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=u;const R=this.size=a+4*n,H=this._createCanvas(R),j=this.ctx=H.getContext("2d",{willReadFrequently:!0});j.font=`${A} ${E} ${a}px ${v}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(a){const n=document.createElement("canvas");return n.width=n.height=a,n}draw(a){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:v,actualBoundingBoxRight:E}=this.ctx.measureText(a),A=Math.ceil(u),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-v))),H=Math.min(this.size-this.buffer,A+Math.ceil(p)),j=R+2*this.buffer,ee=H+2*this.buffer,se=Math.max(j*ee,0),ce=new Uint8ClampedArray(se),ve={data:ce,width:j,height:ee,glyphWidth:R,glyphHeight:H,glyphTop:A,glyphLeft:0,glyphAdvance:n};if(0===R||0===H)return ve;const{ctx:be,buffer:Ae,gridInner:$e,gridOuter:dt}=this;be.clearRect(Ae,Ae,R,H),be.fillText(a,Ae,Ae+A);const Ot=be.getImageData(Ae,Ae,R,H);dt.fill(af,0,se),$e.fill(0,0,se);for(let ct=0;ct<H;ct++)for(let At=0;At<R;At++){const Nt=Ot.data[4*(ct*R+At)+3]/255;if(0===Nt)continue;const Bt=(ct+Ae)*j+At+Ae;if(1===Nt)dt[Bt]=0,$e[Bt]=af;else{const bi=.5-Nt;dt[Bt]=bi>0?bi*bi:0,$e[Bt]=bi<0?bi*bi:0}}_m(dt,0,0,j,ee,j,this.f,this.v,this.z),_m($e,Ae,Ae,R,H,j,this.f,this.v,this.z);for(let ct=0;ct<se;ct++){const At=Math.sqrt(dt[ct])-Math.sqrt($e[ct]);ce[ct]=Math.round(255-255*(At/this.radius+this.cutoff))}return ve}};const Ch=kl;function c_(a,n,u,p){const v=[],E=a.image,A=E.pixelRatio,R=E.paddedRect.w-2*Ch,H=E.paddedRect.h-2*Ch,j=a.right-a.left,ee=a.bottom-a.top,se=E.stretchX||[[0,R]],ce=E.stretchY||[[0,H]],ve=(Si,Ni)=>Si+Ni[1]-Ni[0],be=se.reduce(ve,0),Ae=ce.reduce(ve,0),$e=R-be,dt=H-Ae;let Ot=0,ct=be,At=0,Nt=Ae,Bt=0,bi=$e,hi=0,Li=dt;if(E.content&&p){const Si=E.content;Ot=bm(se,0,Si[0]),At=bm(ce,0,Si[1]),ct=bm(se,Si[0],Si[2]),Nt=bm(ce,Si[1],Si[3]),Bt=Si[0]-Ot,hi=Si[1]-At,bi=Si[2]-Si[0]-ct,Li=Si[3]-Si[1]-Nt}const rn=(Si,Ni,Yi,Zi)=>{const an=xm(Si.stretch-Ot,ct,j,a.left),Di=wm(Si.fixed-Bt,bi,Si.stretch,be),bn=xm(Ni.stretch-At,Nt,ee,a.top),On=wm(Ni.fixed-hi,Li,Ni.stretch,Ae),Cn=xm(Yi.stretch-Ot,ct,j,a.left),_r=wm(Yi.fixed-Bt,bi,Yi.stretch,be),ln=xm(Zi.stretch-At,Nt,ee,a.top),jn=wm(Zi.fixed-hi,Li,Zi.stretch,Ae),yr=new at(an,bn),ns=new at(Cn,bn),br=new at(Cn,ln),ir=new at(an,ln),Rs=new at(Di/A,On/A),Er=new at(_r/A,jn/A),Sr=n*Math.PI/180;if(Sr){const Ms=Math.sin(Sr),Ts=Math.cos(Sr),Gs=[Ts,-Ms,Ms,Ts];yr._matMult(Gs),ns._matMult(Gs),ir._matMult(Gs),br._matMult(Gs)}const Es=Si.stretch+Si.fixed,Ss=Ni.stretch+Ni.fixed;return{tl:yr,tr:ns,bl:ir,br,tex:{x:E.paddedRect.x+Ch+Es,y:E.paddedRect.y+Ch+Ss,w:Yi.stretch+Yi.fixed-Es,h:Zi.stretch+Zi.fixed-Ss},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rs,pixelOffsetBR:Er,minFontScaleX:bi/A/j,minFontScaleY:Li/A/ee,isSDF:u}};if(p&&(E.stretchX||E.stretchY)){const Si=u_(se,$e,be),Ni=u_(ce,dt,Ae);for(let Yi=0;Yi<Si.length-1;Yi++){const Zi=Si[Yi],an=Si[Yi+1];for(let Di=0;Di<Ni.length-1;Di++)v.push(rn(Zi,Ni[Di],an,Ni[Di+1]))}}else v.push(rn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:H+1}));return v}function bm(a,n,u){let p=0;for(const v of a)p+=Math.max(n,Math.min(u,v[1]))-Math.max(n,Math.min(u,v[0]));return p}function u_(a,n,u){const p=[{fixed:-Ch,stretch:0}];for(const[v,E]of a){const A=p[p.length-1];p.push({fixed:v-A.stretch,stretch:A.stretch}),p.push({fixed:v-A.stretch,stretch:A.stretch+(E-v)})}return p.push({fixed:n+Ch,stretch:u}),p}function xm(a,n,u,p){return a/n*u+p}function wm(a,n,u,p){return a-n*u/p}function d_(a,n,u,p){const v=n+a.positionedLines[p].lineOffset;return 0===p?u+v/2:u+(v+(n+a.positionedLines[p-1].lineOffset))/2}class Ky{constructor(n=[],u=Jy){if(this.data=n,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const n=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:u,compare:p}=this,v=u[n];for(;n>0;){const E=n-1>>1,A=u[E];if(p(v,A)>=0)break;u[n]=A,n=E}u[n]=v}_down(n){const{data:u,compare:p}=this,v=this.length>>1,E=u[n];for(;n<v;){let A=1+(n<<1),R=u[A];const H=A+1;if(H<this.length&&p(u[H],R)<0&&(A=H,R=u[H]),p(R,E)>=0)break;u[n]=R,n=A}u[n]=E}}function Jy(a,n){return a<n?-1:a>n?1:0}function Db(a,n=1,u=!1){let p=1/0,v=1/0,E=-1/0,A=-1/0;const R=a[0];for(let ve=0;ve<R.length;ve++){const be=R[ve];(!ve||be.x<p)&&(p=be.x),(!ve||be.y<v)&&(v=be.y),(!ve||be.x>E)&&(E=be.x),(!ve||be.y>A)&&(A=be.y)}const H=Math.min(E-p,A-v);let j=H/2;const ee=new Ky([],Qy);if(0===H)return new at(p,v);for(let ve=p;ve<E;ve+=H)for(let be=v;be<A;be+=H)ee.push(new lf(ve+j,be+j,j,a));let se=function(ve){let be=0,Ae=0,$e=0;const dt=ve[0];for(let Ot=0,ct=dt.length,At=ct-1;Ot<ct;At=Ot++){const Nt=dt[Ot],Bt=dt[At],bi=Nt.x*Bt.y-Bt.x*Nt.y;Ae+=(Nt.x+Bt.x)*bi,$e+=(Nt.y+Bt.y)*bi,be+=3*bi}return new lf(Ae/be,$e/be,0,ve)}(a),ce=ee.length;for(;ee.length;){const ve=ee.pop();(ve.d>se.d||!se.d)&&(se=ve,u&&console.log("found best %d after %d probes",Math.round(1e4*ve.d)/1e4,ce)),ve.max-se.d<=n||(j=ve.h/2,ee.push(new lf(ve.p.x-j,ve.p.y-j,j,a)),ee.push(new lf(ve.p.x+j,ve.p.y-j,j,a)),ee.push(new lf(ve.p.x-j,ve.p.y+j,j,a)),ee.push(new lf(ve.p.x+j,ve.p.y+j,j,a)),ce+=4)}return u&&(console.log(`num probes: ${ce}`),console.log(`best distance: ${se.d}`)),se.p}function Qy(a,n){return n.max-a.max}class lf{constructor(n,u,p,v){this.p=new at(n,u),this.h=p,this.d=function(E,A){let R=!1,H=1/0;for(let j=0;j<A.length;j++){const ee=A[j];for(let se=0,ce=ee.length,ve=ce-1;se<ce;ve=se++){const be=ee[se],Ae=ee[ve];be.y>E.y!=Ae.y>E.y&&E.x<(Ae.x-be.x)*(E.y-be.y)/(Ae.y-be.y)+be.x&&(R=!R),H=Math.min(H,qh(E,be,Ae))}}return(R?1:-1)*Math.sqrt(H)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}}const up=7,h_=Number.POSITIVE_INFINITY,Ib=Math.sqrt(2);function p_(a,[n,u]){let p=0,v=0;if(u===h_){n<0&&(n=0);const E=n/Ib;switch(a){case"top-right":case"top-left":v=E-up;break;case"bottom-right":case"bottom-left":v=-E+up;break;case"bottom":v=-n+up;break;case"top":v=n-up}switch(a){case"top-right":case"bottom-right":p=-E;break;case"top-left":case"bottom-left":p=E;break;case"left":p=n;break;case"right":p=-n}}else{switch(n=Math.abs(n),u=Math.abs(u),a){case"top-right":case"top-left":case"top":v=u-up;break;case"bottom-right":case"bottom-left":case"bottom":v=-u+up}switch(a){case"top-right":case"bottom-right":case"right":p=-n;break;case"top-left":case"bottom-left":case"left":p=n}}return[p,v]}function e0(a,n,u,p,v,E,A,R,H,j){a.createArrays(),a.tilePixelRatio=hn/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const ee=a.layers[0].layout,se=a.layers[0]._unevaluatedLayout._values,ce={};if("composite"===a.textSizeData.kind){const{minZoom:Ae,maxZoom:$e}=a.textSizeData;ce.compositeTextSizes=[se["text-size"].possiblyEvaluate(new te(Ae),R),se["text-size"].possiblyEvaluate(new te($e),R)]}if("composite"===a.iconSizeData.kind){const{minZoom:Ae,maxZoom:$e}=a.iconSizeData;ce.compositeIconSizes=[se["icon-size"].possiblyEvaluate(new te(Ae),R),se["icon-size"].possiblyEvaluate(new te($e),R)]}ce.layoutTextSize=se["text-size"].possiblyEvaluate(new te(H+1),R),ce.layoutIconSize=se["icon-size"].possiblyEvaluate(new te(H+1),R),ce.textMaxSize=se["text-size"].possiblyEvaluate(new te(18),R);const ve="map"===ee.get("text-rotation-alignment")&&"point"!==ee.get("symbol-placement"),be=ee.get("text-size");for(const Ae of a.features){const $e=ee.get("text-font").evaluate(Ae,{},R).join(","),dt=be.evaluate(Ae,{},R),Ot=ce.layoutTextSize.evaluate(Ae,{},R),ct=(ce.layoutIconSize.evaluate(Ae,{},R),{horizontal:{},vertical:void 0}),At=Ae.text;let Nt,Bt=[0,0];if(At){const Li=At.toString(),rn=ee.get("text-letter-spacing").evaluate(Ae,{},R)*va,Si=ee.get("text-line-height").evaluate(Ae,{},R)*va,Ni=zh(Li)?rn:0,Yi=ee.get("text-anchor").evaluate(Ae,{},R),Zi=ee.get("text-variable-anchor");if(!Zi){const Cn=ee.get("text-radial-offset").evaluate(Ae,{},R);Bt=Cn?p_(Yi,[Cn*va,h_]):ee.get("text-offset").evaluate(Ae,{},R).map(_r=>_r*va)}let an=ve?"center":ee.get("text-justify").evaluate(Ae,{},R);const Di="point"===ee.get("symbol-placement"),bn=Di?ee.get("text-max-width").evaluate(Ae,{},R)*va:1/0,On=Cn=>{a.allowVerticalPlacement&&vd(Li)&&(ct.vertical=Yu(At,n,u,v,$e,bn,Si,Yi,Cn,Ni,Bt,mc.vertical,!0,Ot,dt))};if(!ve&&Zi){const Cn="auto"===an?Zi.map(ln=>f_(ln)):[an];let _r=!1;for(let ln=0;ln<Cn.length;ln++){const jn=Cn[ln];if(!ct.horizontal[jn])if(_r)ct.horizontal[jn]=ct.horizontal[0];else{const yr=Yu(At,n,u,v,$e,bn,Si,"center",jn,Ni,Bt,mc.horizontal,!1,Ot,dt);yr&&(ct.horizontal[jn]=yr,_r=1===yr.positionedLines.length)}}On("left")}else{if("auto"===an&&(an=f_(Yi)),Di||ee.get("text-writing-mode").indexOf("horizontal")>=0||!vd(Li)){const Cn=Yu(At,n,u,v,$e,bn,Si,Yi,an,Ni,Bt,mc.horizontal,!1,Ot,dt);Cn&&(ct.horizontal[an]=Cn)}On(Di?"left":an)}}let bi=!1;if(Ae.icon&&Ae.icon.name){const Li=p[Ae.icon.name];Li&&(Nt=qy(v[Ae.icon.name],ee.get("icon-offset").evaluate(Ae,{},R),ee.get("icon-anchor").evaluate(Ae,{},R)),bi=Li.sdf,void 0===a.sdfIcons?a.sdfIcons=Li.sdf:a.sdfIcons!==Li.sdf&&wn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Li.pixelRatio!==a.pixelRatio||0!==ee.get("icon-rotate").constantOr(1))&&(a.iconsNeedLinear=!0))}const hi=Rg(ct.horizontal)||ct.vertical;a.iconsInText||(a.iconsInText=!!hi&&hi.iconsInText),(hi||Nt)&&Lb(a,Ae,ct,Nt,p,ce,Ot,0,Bt,bi,A,R,j)}E&&a.generateCollisionDebugBuffers(H,a.collisionBoxArray)}function f_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lb(a,n,u,p,v,E,A,R,H,j,ee,se,ce){let ve=E.textMaxSize.evaluate(n,{},se);void 0===ve&&(ve=A);const be=a.layers[0].layout,Ae=be.get("icon-offset").evaluate(n,{},se),$e=Rg(u.horizontal)||u.vertical,dt="globe"===ce.name,Ot=va,ct=A/Ot,At=a.tilePixelRatio*ve/Ot,Nt=(Yi=a.overscaling,a.zoom>18&&Yi>2&&(Yi>>=1),Math.max(hn/(512*Yi),1)*be.get("symbol-spacing")),Bt=be.get("text-padding")*a.tilePixelRatio,bi=be.get("icon-padding")*a.tilePixelRatio,hi=jt(be.get("text-max-angle")),Li="map"===be.get("text-rotation-alignment")&&"point"!==be.get("symbol-placement"),rn="map"===be.get("icon-rotation-alignment")&&"point"!==be.get("symbol-placement"),Si=be.get("symbol-placement"),Ni=Nt/2;var Yi;const Zi=be.get("icon-text-fit");let an;p&&"none"!==Zi&&(a.allowVerticalPlacement&&u.vertical&&(an=e_(p,u.vertical,Zi,be.get("icon-text-fit-padding"),Ae,ct)),$e&&(p=e_(p,$e,Zi,be.get("icon-text-fit-padding"),Ae,ct)));const Di=(bn,On,Cn)=>{if(On.x<0||On.x>=hn||On.y<0||On.y>=hn)return;let _r=null;if(dt){const{x:ln,y:jn,z:yr}=ce.projectTilePoint(On.x,On.y,Cn);_r={anchor:new fd(ln,jn,yr,0,void 0),up:ce.upVector(Cn,On.x,On.y)}}!function(ln,jn,yr,ns,br,ir,Rs,Er,Sr,Es,Ss,Ms,Ts,Gs,Qs,mo,As,Ao,go,qs,ss,vo,Ds,ll,_o){const _a=ln.addToLineVertexArray(jn,ns);let ea,cl,ta,uu,mp,gp,wf,W_=0,$_=0,kh=0,X_=0,ev=-1,tv=-1;const ju={};let Z_=Fh("");const Mh=yr?yr.anchor:jn;let iv=0,nv=0;if(void 0===Sr._unevaluatedLayout.getValue("text-radial-offset")?[iv,nv]=Sr.layout.get("text-offset").evaluate(ss,{},_o).map(ql=>ql*va):(iv=Sr.layout.get("text-radial-offset").evaluate(ss,{},_o)*va,nv=h_),ln.allowVerticalPlacement&&br.vertical){const ql=br.vertical;if(Qs)gp=zg(ql),Er&&(wf=zg(Er));else{const Kl=Sr.layout.get("text-rotate").evaluate(ss,{},_o)+90;ta=Cm(Es,Mh,jn,Ss,Ms,Ts,ql,Gs,Kl,mo),Er&&(uu=Cm(Es,Mh,jn,Ss,Ms,Ts,Er,Ao,Kl))}}if(ir){const ql=Sr.layout.get("icon-rotate").evaluate(ss,{},_o),Kl="none"!==Sr.layout.get("icon-text-fit"),Cf=c_(ir,ql,Ds,Kl),sv=Er?c_(Er,ql,Ds,Kl):void 0;cl=Cm(Es,Mh,jn,Ss,Ms,Ts,ir,Ao,ql),W_=4*Cf.length;const q_=ln.iconSizeData;let Ah=null;"source"===q_.kind?(Ah=[su*Sr.layout.get("icon-size").evaluate(ss,{},_o)],Ah[0]>Rd&&wn(`${ln.layerIds[0]}: Value for "icon-size" is >= ${cf}. Reduce your "icon-size".`)):"composite"===q_.kind&&(Ah=[su*vo.compositeIconSizes[0].evaluate(ss,{},_o),su*vo.compositeIconSizes[1].evaluate(ss,{},_o)],(Ah[0]>Rd||Ah[1]>Rd)&&wn(`${ln.layerIds[0]}: Value for "icon-size" is >= ${cf}. Reduce your "icon-size".`)),ln.addSymbols(ln.icon,Cf,Ah,qs,go,ss,!1,yr,jn,_a.lineStartIndex,_a.lineLength,-1,ll,_o),ev=ln.icon.placedSymbolArray.length-1,sv&&($_=4*sv.length,ln.addSymbols(ln.icon,sv,Ah,qs,go,ss,mc.vertical,yr,jn,_a.lineStartIndex,_a.lineLength,-1,ll,_o),tv=ln.icon.placedSymbolArray.length-1)}for(const ql in br.horizontal){const Kl=br.horizontal[ql];ea||(Z_=Fh(Kl.text),Qs?mp=zg(Kl):ea=Cm(Es,Mh,jn,Ss,Ms,Ts,Kl,Gs,Sr.layout.get("text-rotate").evaluate(ss,{},_o),mo));const Cf=1===Kl.positionedLines.length;if(kh+=m_(ln,yr,jn,Kl,Rs,Sr,Qs,ss,mo,_a,br.vertical?mc.horizontal:mc.horizontalOnly,Cf?Object.keys(br.horizontal):[ql],ju,ev,vo,ll,_o),Cf)break}br.vertical&&(X_+=m_(ln,yr,jn,br.vertical,Rs,Sr,Qs,ss,mo,_a,mc.vertical,["vertical"],ju,tv,vo,ll,_o));let Nd=-1;const rv=(ql,Kl)=>ql?Math.max(ql,Kl):Kl;Nd=rv(mp,Nd),Nd=rv(gp,Nd),Nd=rv(wf,Nd);const m0=Nd>-1?1:0;ln.glyphOffsetArray.length>=Hu.MAX_GLYPHS&&wn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ss.sortKey&&ln.addToSortKeyRanges(ln.symbolInstances.length,ss.sortKey),ln.symbolInstances.emplaceBack(Mh.x,Mh.y,Mh.z,jn.x,jn.y,ju.right>=0?ju.right:-1,ju.center>=0?ju.center:-1,ju.left>=0?ju.left:-1,ju.vertical>=0?ju.vertical:-1,ev,tv,Z_,void 0!==ea?ea:ln.collisionBoxArray.length,void 0!==ea?ea+1:ln.collisionBoxArray.length,void 0!==ta?ta:ln.collisionBoxArray.length,void 0!==ta?ta+1:ln.collisionBoxArray.length,void 0!==cl?cl:ln.collisionBoxArray.length,void 0!==cl?cl+1:ln.collisionBoxArray.length,uu||ln.collisionBoxArray.length,uu?uu+1:ln.collisionBoxArray.length,Ss,kh,X_,W_,$_,m0,0,iv,nv,Nd)}(a,On,_r,bn,u,p,v,an,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,Bt,Li,H,0,bi,rn,Ae,n,E,j,ee,se)};if("line"===Si)for(const bn of Pg(n.geometry,0,0,hn,hn)){const On=o_(bn,Nt,hi,u.vertical||$e,p,Ot,At,a.overscaling,hn);for(const Cn of On)$e&&t0(a,$e.text,Ni,Cn)||Di(bn,Cn,se)}else if("line-center"===Si){for(const bn of n.geometry)if(bn.length>1){const On=s_(bn,hi,u.vertical||$e,p,Ot,At);On&&Di(bn,On,se)}}else if("Polygon"===n.type)for(const bn of Qp(n.geometry,0)){const On=Db(bn,16);Di(bn[0],new fd(On.x,On.y,0,0,void 0),se)}else if("LineString"===n.type)for(const bn of n.geometry)Di(bn,new fd(bn[0].x,bn[0].y,0,0,void 0),se);else if("Point"===n.type)for(const bn of n.geometry)for(const On of bn)Di([On],new fd(On.x,On.y,0,0,void 0),se)}const cf=255,Rd=cf*su;function m_(a,n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be,Ae,$e){const dt=function(At,Nt,Bt,bi,hi,Li,rn,Si){const Ni=[];if(0===Nt.positionedLines.length)return Ni;const Yi=bi.layout.get("text-rotate").evaluate(Li,{})*Math.PI/180,Zi=function(Cn){const _r=Cn[0],ln=Cn[1],jn=_r*ln;return jn>0?[_r,-ln]:jn<0?[-_r,ln]:0===_r?[ln,_r]:[ln,-_r]}(Bt);let an=Math.abs(Nt.top-Nt.bottom);for(const Cn of Nt.positionedLines)an-=Cn.lineOffset;const Di=Nt.positionedLines.length,bn=an/Di;let On=Nt.top-Bt[1];for(let Cn=0;Cn<Di;++Cn){const _r=Nt.positionedLines[Cn];On=d_(Nt,bn,On,Cn);for(const ln of _r.positionedGlyphs){if(!ln.rect)continue;const jn=ln.rect||{};let yr=mm+1,ns=!0,br=1,ir=0;if(ln.imageName){const Ds=rn[ln.imageName];if(!Ds)continue;if(Ds.sdf){wn("SDF images are not supported in formatted text and will be ignored.");continue}ns=!1,br=Ds.pixelRatio,yr=kl/br}const Rs=(hi||Si)&&ln.vertical,Er=ln.metrics.advance*ln.scale/2,Sr=ln.metrics,Es=ln.rect;if(null===Es)continue;Si&&Nt.verticalizable&&(ir=ln.imageName?Er-ln.metrics.width*ln.scale/2:0);const Ss=hi?[ln.x+Er,ln.y]:[0,0];let Ms=[0,0],Ts=[0,0],Gs=!1;hi||(Rs?(Ts=[ln.x+Er+Zi[0],ln.y+Zi[1]-ir],Gs=!0):Ms=[ln.x+Er+Bt[0],ln.y+Bt[1]-ir]);const Qs=Es.w*ln.scale/(br*(ln.localGlyph?au:1)),mo=Es.h*ln.scale/(br*(ln.localGlyph?au:1));let As,Ao,go,qs;if(Rs){const Ds=ln.y-On,ll=new at(-Er,Er-Ds),_o=-Math.PI/2,_a=new at(...Ts);As=new at(-Er+Ms[0],Ms[1]),As._rotateAround(_o,ll)._add(_a),As.x+=-Ds+Er,As.y-=(Sr.left-yr)*ln.scale;const ea=ln.imageName?Sr.advance*ln.scale:va*ln.scale,cl=String.fromCharCode(ln.glyph);dm(cl)?As.x+=(1-yr)*ln.scale:Yv(cl)?As.x+=ea-Sr.height*ln.scale+(-yr-1)*ln.scale:As.x+=ln.imageName||Sr.width+2*yr===Es.w&&Sr.height+2*yr===Es.h?(ea-mo)/2:(ea-(Sr.height+2*yr)*ln.scale)/2,Ao=new at(As.x,As.y-Qs),go=new at(As.x+mo,As.y),qs=new at(As.x+mo,As.y-Qs)}else{const Ds=(Sr.left-yr)*ln.scale-Er+Ms[0],ll=(-Sr.top-yr)*ln.scale+Ms[1],_o=Ds+Qs,_a=ll+mo;As=new at(Ds,ll),Ao=new at(_o,ll),go=new at(Ds,_a),qs=new at(_o,_a)}if(Yi){let Ds;Ds=hi?new at(0,0):Gs?new at(Zi[0],Zi[1]):new at(Bt[0],Bt[1]),As._rotateAround(Yi,Ds),Ao._rotateAround(Yi,Ds),go._rotateAround(Yi,Ds),qs._rotateAround(Yi,Ds)}const ss=new at(0,0),vo=new at(0,0);Ni.push({tl:As,tr:Ao,bl:go,br:qs,tex:jn,writingMode:Nt.writingMode,glyphOffset:Ss,sectionIndex:ln.sectionIndex,isSDF:ns,pixelOffsetTL:ss,pixelOffsetBR:vo,minFontScaleX:0,minFontScaleY:0})}}return Ni}(0,p,H,E,A,R,v,a.allowVerticalPlacement),Ot=a.textSizeData;let ct=null;"source"===Ot.kind?(ct=[su*E.layout.get("text-size").evaluate(R,{},$e)],ct[0]>Rd&&wn(`${a.layerIds[0]}: Value for "text-size" is >= ${cf}. Reduce your "text-size".`)):"composite"===Ot.kind&&(ct=[su*be.compositeTextSizes[0].evaluate(R,{},$e),su*be.compositeTextSizes[1].evaluate(R,{},$e)],(ct[0]>Rd||ct[1]>Rd)&&wn(`${a.layerIds[0]}: Value for "text-size" is >= ${cf}. Reduce your "text-size".`)),a.addSymbols(a.text,dt,ct,H,A,R,ee,n,u,j.lineStartIndex,j.lineLength,ve,Ae,$e);for(const At of se)ce[At]=a.text.placedSymbolArray.length-1;return 4*dt.length}function Rg(a){for(const n in a)return a[n];return null}function Cm(a,n,u,p,v,E,A,R,H,j){let ee=A.top,se=A.bottom,ce=A.left,ve=A.right;const be=A.collisionPadding;if(be&&(ce-=be[0],ee-=be[1],ve+=be[2],se+=be[3]),H){const Ae=new at(ce,ee),$e=new at(ve,ee),dt=new at(ce,se),Ot=new at(ve,se),ct=jt(H);let At=new at(0,0);j&&(At=new at(j[0],j[1])),Ae._rotateAround(ct,At),$e._rotateAround(ct,At),dt._rotateAround(ct,At),Ot._rotateAround(ct,At),ce=Math.min(Ae.x,$e.x,dt.x,Ot.x),ve=Math.max(Ae.x,$e.x,dt.x,Ot.x),ee=Math.min(Ae.y,$e.y,dt.y,Ot.y),se=Math.max(Ae.y,$e.y,dt.y,Ot.y)}return a.emplaceBack(n.x,n.y,n.z,u.x,u.y,ce,ee,ve,se,R,p,v,E),a.length-1}function zg(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const n=a.bottom-a.top;return n>0?Math.max(10,n):null}function t0(a,n,u,p){const v=a.compareText;if(n in v){const E=v[n];for(let A=E.length-1;A>=0;A--)if(p.dist(E[A])<u)return!0}else v[n]=[];return v[n].push(p),!1}function g_(a,n){const u=a.fovAboveCenter,p=a.elevation?a.elevation.getMinElevationBelowMSL()*n:0,v=(a._camera.position[2]*a.worldSize-p)/Math.cos(a._pitch),E=Math.sin(u)*v/Math.sin(Math.max(Math.PI/2-a._pitch-u,.01)),A=Math.sin(a._pitch)*E+v;return Math.min(1.01*A,v*(1/a._horizonShift))}function Eh(a,n){if(!n.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:n};const u=Math.pow(2,-a.z),p=a.x*u,v=(a.x+1)*u,E=a.y*u,A=(a.y+1)*u,R=Da(p),H=Da(v),j=Jo(E),ee=Jo(A),se=n.project(R,j),ce=n.project(H,j),ve=n.project(H,ee),be=n.project(R,ee);let Ae=Math.min(se.x,ce.x,ve.x,be.x),$e=Math.min(se.y,ce.y,ve.y,be.y),dt=Math.max(se.x,ce.x,ve.x,be.x),Ot=Math.max(se.y,ce.y,ve.y,be.y);const ct=u/16;function At(Bt,bi,hi,Li,rn,Si){const Ni=(hi+rn)/2,Yi=(Li+Si)/2,Zi=n.project(Da(Ni),Jo(Yi)),an=Math.max(0,Ae-Zi.x,$e-Zi.y,Zi.x-dt,Zi.y-Ot);Ae=Math.min(Ae,Zi.x),dt=Math.max(dt,Zi.x),$e=Math.min($e,Zi.y),Ot=Math.max(Ot,Zi.y),an>ct&&(At(Bt,Zi,hi,Li,Ni,Yi),At(Zi,bi,Ni,Yi,rn,Si))}At(se,ce,p,E,v,E),At(ce,ve,v,E,v,A),At(ve,be,v,A,p,A),At(be,se,p,A,p,E),Ae-=ct,$e-=ct,dt+=ct,Ot+=ct;const Nt=1/Math.max(dt-Ae,Ot-$e);return{scale:Nt,x:Ae*Nt,y:$e*Nt,x2:dt*Nt,y2:Ot*Nt,projection:n}}const n0=Ko(new Float32Array(16));class zd{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,u){return{x:0,y:0,z:0}}unproject(n,u){return new us(0,0)}projectTilePoint(n,u,p){return{x:n,y:u,z:0}}locationPoint(n,u,p=!0){return n._coordinatePoint(n.locationCoordinate(u),p)}pixelsPerMeter(n,u){return Xl(1,n)*u}pixelSpaceConversion(n,u,p){return 1}farthestPixelDistance(n){return g_(n,n.pixelsPerMeter)}pointCoordinate(n,u,p,v){const E=n.horizonLineFromTop(!1),A=new at(u,Math.max(E,p));return n.rayIntersectionCoordinate(n.pointRayIntersection(A,v))}pointCoordinate3D(n,u,p){const v=new at(u,p);if(n.elevation)return n.elevation.pointCoordinate(v);{const E=this.pointCoordinate(n,v.x,v.y,0);return[E.x,E.y,E.z]}}isPointAboveHorizon(n,u){if(n.elevation)return!this.pointCoordinate3D(n,u.x,u.y);const p=n.horizonLineFromTop();return u.y<p}createInversionMatrix(n,u){return n0}createTileMatrix(n,u,p){let v,E,A;const R=p.canonical,H=Ko(new Float64Array(16));if(this.isReprojectedInTileSpace){const j=Eh(R,this);v=1,E=j.x+p.wrap*j.scale,A=j.y,Tl(H,H,[v/j.scale,v/j.scale,n.pixelsPerMeter/u])}else v=u/n.zoomScale(R.z),E=(R.x+Math.pow(2,R.z)*p.wrap)*v,A=R.y*v;return Au(H,H,[E,A,0]),Tl(H,H,[v/hn,v/hn,1]),H}upVector(n,u,p){return[0,0,1]}upVectorScale(n,u,p){return{metersToTile:1}}}class r0 extends zd{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[u,p]=this.parallels=n.parallels||[29.5,45.5],v=Math.sin(jt(u));this.n=(v+Math.sin(jt(p)))/2,this.c=1+v*(2*this.n-v),this.r0=Math.sqrt(this.c)/this.n}project(n,u){const{n:p,c:v,r0:E}=this,A=jt(n-this.center[0]),R=jt(u),H=Math.sqrt(v-2*p*Math.sin(R))/p;return{x:H*Math.sin(A*p),y:H*Math.cos(A*p)-E,z:0}}unproject(n,u){const{n:p,c:v,r0:E}=this,A=E+u;let R=Math.atan2(n,Math.abs(A))*Math.sign(A);A*p<0&&(R-=Math.PI*Math.sign(n)*Math.sign(A));const H=jt(this.center[0])*p;R=Fi(R,-Math.PI-H,Math.PI-H);const j=_i(ht(R/p)+this.center[0],-180,180),ee=Math.asin(_i((v-(n*n+A*A)*p*p)/(2*p),-1,1)),se=_i(ht(ee),-Fo,Fo);return new us(j,se)}}const uf=1.340264,df=-.081106,hf=893e-6,pf=.003796,Em=Math.sqrt(3)/2;class s0 extends zd{project(n,u){u=u/180*Math.PI,n=n/180*Math.PI;const p=Math.asin(Em*Math.sin(u)),v=p*p,E=v*v*v;return{x:.5*(n*Math.cos(p)/(Em*(uf+3*df*v+E*(7*hf+9*pf*v)))/Math.PI+.5),y:1-.5*(p*(uf+df*v+E*(hf+pf*v))/Math.PI+1),z:0}}unproject(n,u){n=(2*n-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,v=p*p,E=v*v*v;for(let ee,se,ce,ve=0;ve<12&&(se=p*(uf+df*v+E*(hf+pf*v))-u,ce=uf+3*df*v+E*(7*hf+9*pf*v),ee=se/ce,p=_i(p-ee,-Math.PI/3,Math.PI/3),v=p*p,E=v*v*v,!(Math.abs(ee)<1e-12));++ve);const A=Em*n*(uf+3*df*v+E*(7*hf+9*pf*v))/Math.cos(p),R=Math.asin(Math.sin(p)/Em),H=_i(180*A/Math.PI,-180,180),j=_i(180*R/Math.PI,-Fo,Fo);return new us(H,j)}}class Fg extends zd{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,u){return{x:.5+n/360,y:.5-u/360,z:0}}unproject(n,u){const p=360*(n-.5),v=_i(360*(.5-u),-Fo,Fo);return new us(p,v)}}const dp=Math.PI/2;function ff(a){return Math.tan((dp+a)/2)}class o0 extends zd{constructor(n){super(n),this.center=n.center||[0,30];const[u,p]=this.parallels=n.parallels||[30,30];let v=jt(u),E=jt(p);this.southernCenter=v+E<0,this.southernCenter&&(v=-v,E=-E);const A=Math.cos(v),R=ff(v);this.n=v===E?Math.sin(v):Math.log(A/Math.cos(E))/Math.log(ff(E)/R),this.f=A*Math.pow(ff(v),this.n)/this.n}project(n,u){u=jt(u),this.southernCenter&&(u=-u),n=jt(n-this.center[0]);const p=1e-6,{n:v,f:E}=this;E>0?u<-dp+p&&(u=-dp+p):u>dp-p&&(u=dp-p);const A=E/Math.pow(ff(u),v);let R=A*Math.sin(v*n),H=E-A*Math.cos(v*n);return R=.5*(R/Math.PI+.5),H=.5*(H/Math.PI+.5),{x:R,y:this.southernCenter?H:1-H,z:0}}unproject(n,u){n=(2*n-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:p,f:v}=this,E=v-u,A=Math.sign(E),R=Math.sign(p)*Math.sqrt(n*n+E*E);let H=Math.atan2(n,Math.abs(E))*A;E*p<0&&(H-=Math.PI*Math.sign(n)*A);const j=_i(ht(H/p)+this.center[0],-180,180),ee=_i(ht(2*Math.atan(Math.pow(v/R,1/p))-dp),-Fo,Fo);return new us(j,this.southernCenter?-ee:ee)}}class Bg extends zd{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,u){return{x:Oc(n),y:Pc(u),z:0}}unproject(n,u){const p=Da(n),v=Jo(u);return new us(p,v)}}const v_=jt(Fo);class a0 extends zd{project(n,u){const p=(u=jt(u))*u,v=p*p;return{x:.5*((n=jt(n))*(.8707-.131979*p+v*(v*(.003971*p-.001529*v)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+p*(.015085+v*(.028874*p-.044475-.005916*v)))/Math.PI+1),z:0}}unproject(n,u){n=(2*n-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,v=25,E=0,A=p*p;do{A=p*p;const j=A*A;E=(p*(1.007226+A*(.015085+j*(.028874*A-.044475-.005916*j)))-u)/(1.007226+A*(.045255+j*(.259866*A-.311325-.005916*11*j))),p=_i(p-E,-v_,v_)}while(Math.abs(E)>1e-6&&--v>0);A=p*p;const R=_i(ht(n/(.8707+A*(A*(A*A*A*(.003971-.001529*A)-.013791)-.131979))),-180,180),H=ht(p);return new us(R,H)}}const __=jt(Fo);class l0 extends zd{project(n,u){u=jt(u),n=jt(n);const p=Math.cos(u),v=2/Math.PI,E=Math.acos(p*Math.cos(n/2)),A=Math.sin(E)/E,R=.5*(n*v+2*p*Math.sin(n/2)/A)||0,H=.5*(u+Math.sin(u)/A)||0;return{x:.5*(R/Math.PI+.5),y:1-.5*(H/Math.PI+1),z:0}}unproject(n,u){let p=n=(2*n-.5)*Math.PI,v=u=(2*(1-u)-1)*Math.PI,E=25;const A=1e-6;let R=0,H=0;do{const j=Math.cos(v),ee=Math.sin(v),se=2*ee*j,ce=ee*ee,ve=j*j,be=Math.cos(p/2),Ae=Math.sin(p/2),$e=2*be*Ae,dt=Ae*Ae,Ot=1-ve*be*be,ct=Ot?1/Ot:0,At=Ot?Math.acos(j*be)*Math.sqrt(1/Ot):0,Nt=.5*(2*At*j*Ae+2*p/Math.PI)-n,Bt=.5*(At*ee+v)-u,bi=.5*ct*(ve*dt+At*j*be*ce)+1/Math.PI,hi=ct*($e*se/4-At*ee*Ae),Li=.125*ct*(se*Ae-At*ee*ve*$e),rn=.5*ct*(ce*be+At*dt*j)+.5,Si=hi*Li-rn*bi;R=(Bt*hi-Nt*rn)/Si,H=(Nt*Li-Bt*bi)/Si,p=_i(p-R,-Math.PI,Math.PI),v=_i(v-H,-__,__)}while((Math.abs(R)>A||Math.abs(H)>A)&&--E>0);return new us(ht(p),ht(v))}}class y_ extends zd{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(jt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,u){const{scale:p,cosPhi:v}=this;return{x:jt(n)*v*p+.5,y:-Math.sin(jt(u))/v*p+.5,z:0}}unproject(n,u){const{scale:p,cosPhi:v}=this,E=-(u-.5)/p,A=_i(ht((n-.5)/p)/v,-180,180),R=Math.asin(_i(E*v,-1,1)),H=_i(ht(R),-Fo,Fo);return new us(A,H)}}class c0 extends Bg{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,u,p){const v=sh(n,u,p);return Zs(v,v,oh(Lc(p))),{x:v[0],y:v[1],z:v[2]}}locationPoint(n,u){const p=$l(u.lat,u.lng),v=ma([],p),E=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(u),n._centerAltitude):n._centerAltitude;Jc(p,p,v,Xl(1,0)*hn*E);const A=Ko(new Float64Array(16));return Ju(A,n.pixelMatrix,n.globeMatrix),Zs(p,p,A),new at(p[0],p[1])}pixelsPerMeter(n,u){return Xl(1,0)*u}pixelSpaceConversion(n,u,p){const v=Xl(1,n)*u,E=Or(Xl(1,45)*u,v,p);return this.pixelsPerMeter(n,u)/E}createTileMatrix(n,u,p){const v=Pp(Lc(p.canonical));return Ju(new Float64Array(16),n.globeMatrix,v)}createInversionMatrix(n,u){const{center:p}=n,v=oh(Lc(u));return Qu(v,v,jt(p.lng)),Ai(v,v,jt(p.lat)),Tl(v,v,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(v)}pointCoordinate(n,u,p,v){return Uf(n,u,p,!0)||new Cd(0,0)}pointCoordinate3D(n,u,p){const v=this.pointCoordinate(n,u,p,0);return[v.x,v.y,v.z]}isPointAboveHorizon(n,u){return!Uf(n,u.x,u.y,!1)}farthestPixelDistance(n){const u=function(v,E){const A=v.cameraToCenterDistance,R=v._centerAltitude*E,H=v._camera,j=v._camera.forward(),ee=Kc([],rl([],j,-A),[0,0,R]),se=v.worldSize/(2*Math.PI),ce=[0,0,-se],ve=v.width/v.height,be=Math.tan(v.fovAboveCenter),Ae=rl([],H.up(),be),$e=rl([],H.right(),be*ve),dt=ma([],Kc([],Kc([],j,Ae),$e)),Ot=[];let ct;if(new jh(ee,dt).closestPointOnSphere(ce,se,Ot)){const At=Kc([],Ot,ce),Nt=ol([],At,ee);ct=Math.cos(v.fovAboveCenter)*Ga(Nt)}else{const At=ol([],ee,ce),Nt=ol([],ce,ee);ma(Nt,Nt);const Bt=Ga(At)-se;ct=Math.sqrt(Bt*(Bt+2*se));const bi=Math.acos(ct/(se+Bt))-Math.acos(sl(j,Nt));ct*=Math.cos(bi)}return 1.01*ct}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),p=Iu(n.zoom);if(p>0){const v=g_(n,Xl(1,n.center.lat)*n.worldSize),E=n.worldSize/(2*Math.PI),A=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Or(u,v+E*(1-Math.cos(A)),Math.pow(p,10))}return u}upVector(n,u,p){return sh(u,p,n,1)}upVectorScale(n){return{metersToTile:Ul(rd(Lc(n)))}}}function b_(a){const n=a.parallels,u=!!n&&Math.abs(n[0]+n[1])<.01;switch(a.name){case"mercator":return new Bg(a);case"equirectangular":return new Fg(a);case"naturalEarth":return new a0(a);case"equalEarth":return new s0(a);case"winkelTripel":return new l0(a);case"albers":return u?new y_(a):new r0(a);case"lambertConformalConic":return u?new y_(a):new o0(a);case"globe":return new c0(a)}throw new Error(`Invalid projection name: ${a.name}`)}const Ob=gt.types,Pb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mf(a,n,u,p,v,E,A,R,H,j,ee,se,ce){const ve=R?Math.min(Rd,Math.round(R[0])):0,be=R?Math.min(Rd,Math.round(R[1])):0;a.emplaceBack(n,u,Math.round(32*p),Math.round(32*v),E,A,(ve<<1)+(H?1:0),be,16*j,16*ee,256*se,256*ce)}function Ng(a,n,u,p,v,E,A){a.emplaceBack(n,u,p,v,E,A)}function Yg(a,n,u,p,v){a.emplaceBack(n,u,p,v),a.emplaceBack(n,u,p,v),a.emplaceBack(n,u,p,v),a.emplaceBack(n,u,p,v)}function Hg(a){for(const n of a.sections)if(nl(n.text))return!0;return!1}class hp{constructor(n){this.layoutVertexArray=new $i,this.indexArray=new zn,this.programConfigurations=n,this.segments=new Xs,this.dynamicLayoutVertexArray=new Qi,this.opacityVertexArray=new Hn,this.placedSymbolArray=new Ps,this.globeExtVertexArray=new Ki}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(n,u,p,v){this.isEmpty()||(p&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ny.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Yy.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Pb,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Fv.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Sn(hp,"SymbolBuffers");class gf{constructor(n,u,p){this.layoutVertexArray=new n,this.layoutAttributes=u,this.indexArray=new p,this.segments=new Xs,this.collisionVertexArray=new Zn,this.collisionVertexArrayExt=new tr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Hy.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,Vy.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Sn(gf,"CollisionBuffers");class Hu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ko([]),this.placementViewportMatrix=Ko([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wg(this.zoom,u["text-size"]),this.iconSizeData=wg(this.zoom,u["icon-size"]);const p=this.layers[0].layout,v=p.get("symbol-sort-key"),E=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==E&&void 0!==v.constantOr(1),this.sortFeaturesByY=("viewport-y"===E||"auto"===E&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(A=>mc[A]),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new hp(new ku(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new hp(new ku(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new jr,this.lineVertexArray=new Cu,this.symbolInstances=new xs}calculateGlyphDependencies(n,u,p,v,E){for(let A=0;A<n.length;A++)if(u[n.charCodeAt(A)]=!0,v&&E){const R=rf[n.charAt(A)];R&&(u[R.charCodeAt(0)]=!0)}}populate(n,u,p,v){const E=this.layers[0],A=E.layout,R="globe"===this.projection.name,H=A.get("text-font"),j=A.get("text-field"),ee=A.get("icon-image"),se=("constant"!==j.value.kind||j.value.value instanceof $n&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&("constant"!==H.value.kind||H.value.value.length>0),ce="constant"!==ee.value.kind||!!ee.value.value||Object.keys(ee.parameters).length>0,ve=A.get("symbol-sort-key");if(this.features=[],!se&&!ce)return;const be=u.iconDependencies,Ae=u.glyphDependencies,$e=u.availableImages,dt=new te(this.zoom);for(const{feature:Ot,id:ct,index:At,sourceLayerIndex:Nt}of n){const Bt=E._featureFilter.needGeometry,bi=ja(Ot,Bt);if(!E._featureFilter.filter(dt,bi,p))continue;if(Bt||(bi.geometry=tu(Ot,p,v)),R&&1!==Ot.type&&p.z<=5){const Si=bi.geometry,Ni=.98078528056,Yi=(Zi,an)=>sl(sh(Zi.x,Zi.y,p,1),sh(an.x,an.y,p,1))<Ni;for(let Zi=0;Zi<Si.length;Zi++)Si[Zi]=ag(Si[Zi],Yi)}let hi,Li;if(se){const Si=E.getValueAndResolveTokens("text-field",bi,p,$e),Ni=$n.factory(Si);Hg(Ni)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===B()||this.hasRTLText&&K.isParsed())&&(hi=Cg(Ni,E,bi))}if(ce){const Si=E.getValueAndResolveTokens("icon-image",bi,p,$e);Li=Si instanceof Xr?Si:Xr.fromString(Si)}if(!hi&&!Li)continue;const rn=this.sortFeaturesByKey?ve.evaluate(bi,{},p):void 0;if(this.features.push({id:ct,text:hi,icon:Li,index:At,sourceLayerIndex:Nt,geometry:bi.geometry,properties:Ot.properties,type:Ob[Ot.type],sortKey:rn}),Li&&(be[Li.name]=!0),hi){const Si=H.evaluate(bi,{},p).join(","),Ni="map"===A.get("text-rotation-alignment")&&"point"!==A.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(mc.vertical)>=0;for(const Yi of hi.sections)if(Yi.image)be[Yi.image.name]=!0;else{const Zi=vd(hi.toString()),an=Yi.fontStack||Si,Di=Ae[an]=Ae[an]||{};this.calculateGlyphDependencies(Yi.text,Di,Ni,this.allowVerticalPlacement,Zi)}}}"line"===A.get("symbol-placement")&&(this.features=function(Ot){const ct={},At={},Nt=[];let Bt=0;function bi(Si){Nt.push(Ot[Si]),Bt++}function hi(Si,Ni,Yi){const Zi=At[Si];return delete At[Si],At[Ni]=Zi,Nt[Zi].geometry[0].pop(),Nt[Zi].geometry[0]=Nt[Zi].geometry[0].concat(Yi[0]),Zi}function Li(Si,Ni,Yi){const Zi=ct[Ni];return delete ct[Ni],ct[Si]=Zi,Nt[Zi].geometry[0].shift(),Nt[Zi].geometry[0]=Yi[0].concat(Nt[Zi].geometry[0]),Zi}function rn(Si,Ni,Yi){const Zi=Yi?Ni[0][Ni[0].length-1]:Ni[0][0];return`${Si}:${Zi.x}:${Zi.y}`}for(let Si=0;Si<Ot.length;Si++){const Ni=Ot[Si],Yi=Ni.geometry,Zi=Ni.text?Ni.text.toString():null;if(!Zi){bi(Si);continue}const an=rn(Zi,Yi),Di=rn(Zi,Yi,!0);if(an in At&&Di in ct&&At[an]!==ct[Di]){const bn=Li(an,Di,Yi),On=hi(an,Di,Nt[bn].geometry);delete ct[an],delete At[Di],At[rn(Zi,Nt[On].geometry,!0)]=On,Nt[bn].geometry=null}else an in At?hi(an,Di,Yi):Di in ct?Li(an,Di,Yi):(bi(Si),ct[an]=Bt-1,At[Di]=Bt-1)}return Nt.filter(Si=>Si.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ot,ct)=>Ot.sortKey-ct.sortKey)}update(n,u,p,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,u,this.layers,p,v),this.icon.programConfigurations.updatePaintArrays(n,u,this.layers,p,v))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=b_(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,u){const p=this.lineVertexArray.length;if(void 0!==n.segment)for(const{x:v,y:E}of u)this.lineVertexArray.emplaceBack(v,E);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(n,u,p,v,E,A,R,H,j,ee,se,ce,ve,be){const Ae=n.indexArray,$e=n.layoutVertexArray,dt=n.globeExtVertexArray,Ot=n.segments.prepareSegment(4*u.length,$e,Ae,this.canOverlap?A.sortKey:void 0),ct=this.glyphOffsetArray.length,At=Ot.vertexLength,Nt=this.allowVerticalPlacement&&R===mc.vertical?Math.PI/2:0,Bt=A.text&&A.text.sections;for(let hi=0;hi<u.length;hi++){const{tl:Li,tr:rn,bl:Si,br:Ni,tex:Yi,pixelOffsetTL:Zi,pixelOffsetBR:an,minFontScaleX:Di,minFontScaleY:bn,glyphOffset:On,isSDF:Cn,sectionIndex:_r}=u[hi],ln=Ot.vertexLength,jn=On[1];if(mf($e,j.x,j.y,Li.x,jn+Li.y,Yi.x,Yi.y,p,Cn,Zi.x,Zi.y,Di,bn),mf($e,j.x,j.y,rn.x,jn+rn.y,Yi.x+Yi.w,Yi.y,p,Cn,an.x,Zi.y,Di,bn),mf($e,j.x,j.y,Si.x,jn+Si.y,Yi.x,Yi.y+Yi.h,p,Cn,Zi.x,an.y,Di,bn),mf($e,j.x,j.y,Ni.x,jn+Ni.y,Yi.x+Yi.w,Yi.y+Yi.h,p,Cn,an.x,an.y,Di,bn),H){const{x:yr,y:ns,z:br}=H.anchor,[ir,Rs,Er]=H.up;Ng(dt,yr,ns,br,ir,Rs,Er),Ng(dt,yr,ns,br,ir,Rs,Er),Ng(dt,yr,ns,br,ir,Rs,Er),Ng(dt,yr,ns,br,ir,Rs,Er),Yg(n.dynamicLayoutVertexArray,yr,ns,br,Nt)}else Yg(n.dynamicLayoutVertexArray,j.x,j.y,j.z,Nt);Ae.emplaceBack(ln,ln+1,ln+2),Ae.emplaceBack(ln+1,ln+2,ln+3),Ot.vertexLength+=4,Ot.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(On[0]),hi!==u.length-1&&_r===u[hi+1].sectionIndex||n.programConfigurations.populatePaintArrays($e.length,A,A.index,{},ve,be,Bt&&Bt[_r])}const bi=H?H.anchor:j;n.placedSymbolArray.emplaceBack(bi.x,bi.y,bi.z,j.x,j.y,ct,this.glyphOffsetArray.length-ct,At,ee,se,j.segment,p?p[0]:0,p?p[1]:0,v[0],v[1],R,0,!1,0,ce,0)}_commitLayoutVertex(n,u,p,v,E,A,R){n.emplaceBack(u,p,v,E,A,Math.round(R.x),Math.round(R.y))}_addCollisionDebugVertices(n,u,p,v,E,A,R){const H=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),j=H.vertexLength,ee=R.tileAnchorX,se=R.tileAnchorY;for(let ve=0;ve<4;ve++)p.collisionVertexArray.emplaceBack(0,0,0,0);p.collisionVertexArrayExt.emplaceBack(u,-n.padding,-n.padding),p.collisionVertexArrayExt.emplaceBack(u,n.padding,-n.padding),p.collisionVertexArrayExt.emplaceBack(u,n.padding,n.padding),p.collisionVertexArrayExt.emplaceBack(u,-n.padding,n.padding),this._commitLayoutVertex(p.layoutVertexArray,v,E,A,ee,se,new at(n.x1,n.y1)),this._commitLayoutVertex(p.layoutVertexArray,v,E,A,ee,se,new at(n.x2,n.y1)),this._commitLayoutVertex(p.layoutVertexArray,v,E,A,ee,se,new at(n.x2,n.y2)),this._commitLayoutVertex(p.layoutVertexArray,v,E,A,ee,se,new at(n.x1,n.y2)),H.vertexLength+=4;const ce=p.indexArray;ce.emplaceBack(j,j+1),ce.emplaceBack(j+1,j+2),ce.emplaceBack(j+2,j+3),ce.emplaceBack(j+3,j),H.primitiveLength+=4}_addTextDebugCollisionBoxes(n,u,p,v,E,A){for(let R=v;R<E;R++){const H=p.get(R),j=this.getSymbolInstanceTextSize(n,A,u,R);this._addCollisionDebugVertices(H,j,this.textCollisionBox,H.projectedAnchorX,H.projectedAnchorY,H.projectedAnchorZ,A)}}_addIconDebugCollisionBoxes(n,u,p,v,E,A){for(let R=v;R<E;R++){const H=p.get(R),j=this.getSymbolInstanceIconSize(n,u,A.placedIconSymbolIndex);this._addCollisionDebugVertices(H,j,this.iconCollisionBox,H.projectedAnchorX,H.projectedAnchorY,H.projectedAnchorZ,A)}}generateCollisionDebugBuffers(n,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gf(Ln,Bv.members,Ls),this.iconCollisionBox=new gf(Ln,Bv.members,Ls);const p=hd(this.iconSizeData,n),v=hd(this.textSizeData,n);for(let E=0;E<this.symbolInstances.length;E++){const A=this.symbolInstances.get(E);this._addTextDebugCollisionBoxes(v,n,u,A.textBoxStartIndex,A.textBoxEndIndex,A),this._addTextDebugCollisionBoxes(v,n,u,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A),this._addIconDebugCollisionBoxes(p,n,u,A.iconBoxStartIndex,A.iconBoxEndIndex,A),this._addIconDebugCollisionBoxes(p,n,u,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A)}}getSymbolInstanceTextSize(n,u,p,v){const E=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:v),A=op(this.textSizeData,n,E)/va;return this.tilePixelRatio*A}getSymbolInstanceIconSize(n,u,p){const v=this.icon.placedSymbolArray.get(p),E=op(this.iconSizeData,n,v);return this.tilePixelRatio*E}_commitDebugCollisionVertexUpdate(n,u,p){n.emplaceBack(u,-p,-p),n.emplaceBack(u,p,-p),n.emplaceBack(u,p,p),n.emplaceBack(u,-p,p)}_updateTextDebugCollisionBoxes(n,u,p,v,E,A){for(let R=v;R<E;R++){const H=p.get(R),j=this.getSymbolInstanceTextSize(n,A,u,R);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,j,H.padding)}}_updateIconDebugCollisionBoxes(n,u,p,v,E,A){for(let R=v;R<E;R++){const H=p.get(R),j=this.getSymbolInstanceIconSize(n,u,A);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,j,H.padding)}}updateCollisionDebugBuffers(n,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const p=hd(this.iconSizeData,n),v=hd(this.textSizeData,n);for(let E=0;E<this.symbolInstances.length;E++){const A=this.symbolInstances.get(E);this._updateTextDebugCollisionBoxes(v,n,u,A.textBoxStartIndex,A.textBoxEndIndex,A),this._updateTextDebugCollisionBoxes(v,n,u,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A),this._updateIconDebugCollisionBoxes(p,n,u,A.iconBoxStartIndex,A.iconBoxEndIndex,A.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(p,n,u,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,u,p,v,E,A,R,H,j){const ee={};if(u<p){const{x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At,featureIndex:Nt}=n.get(u);ee.textBox={x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At},ee.textFeatureIndex=Nt}if(v<E){const{x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At,featureIndex:Nt}=n.get(v);ee.verticalTextBox={x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At},ee.verticalTextFeatureIndex=Nt}if(A<R){const{x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At,featureIndex:Nt}=n.get(A);ee.iconBox={x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At},ee.iconFeatureIndex=Nt}if(H<j){const{x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At,featureIndex:Nt}=n.get(H);ee.verticalIconBox={x1:se,y1:ce,x2:ve,y2:be,padding:Ae,projectedAnchorX:$e,projectedAnchorY:dt,projectedAnchorZ:Ot,tileAnchorX:ct,tileAnchorY:At},ee.verticalIconFeatureIndex=Nt}return ee}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,u){const p=n.placedSymbolArray.get(u),v=p.vertexStartIndex+4*p.numGlyphs;for(let E=p.vertexStartIndex;E<v;E+=4)n.indexArray.emplaceBack(E,E+1,E+2),n.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const u=Math.sin(n),p=Math.cos(n),v=[],E=[],A=[];for(let R=0;R<this.symbolInstances.length;++R){A.push(R);const H=this.symbolInstances.get(R);v.push(0|Math.round(u*H.tileAnchorX+p*H.tileAnchorY)),E.push(H.featureIndex)}return A.sort((R,H)=>v[R]-v[H]||E[H]-E[R]),A}addToSortKeyRanges(n,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:v,centerJustifiedTextSymbolIndex:E,leftJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:R,placedIconSymbolIndex:H,verticalPlacedIconSymbolIndex:j}=p;v>=0&&this.addIndicesForPlacedSymbol(this.text,v),E>=0&&E!==v&&this.addIndicesForPlacedSymbol(this.text,E),A>=0&&A!==E&&A!==v&&this.addIndicesForPlacedSymbol(this.text,A),R>=0&&this.addIndicesForPlacedSymbol(this.text,R),H>=0&&this.addIndicesForPlacedSymbol(this.icon,H),j>=0&&this.addIndicesForPlacedSymbol(this.icon,j)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Sn(Hu,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Hu.MAX_GLYPHS=65535,Hu.addDynamicAttributes=Yg;const u0=new xt({"symbol-placement":new Te(I.layout_symbol["symbol-placement"]),"symbol-spacing":new Te(I.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Te(I.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ke(I.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Te(I.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Te(I.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Te(I.layout_symbol["icon-ignore-placement"]),"icon-optional":new Te(I.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Te(I.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ke(I.layout_symbol["icon-size"]),"icon-text-fit":new Te(I.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Te(I.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ke(I.layout_symbol["icon-image"]),"icon-rotate":new Ke(I.layout_symbol["icon-rotate"]),"icon-padding":new Te(I.layout_symbol["icon-padding"]),"icon-keep-upright":new Te(I.layout_symbol["icon-keep-upright"]),"icon-offset":new Ke(I.layout_symbol["icon-offset"]),"icon-anchor":new Ke(I.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Te(I.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Te(I.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Te(I.layout_symbol["text-rotation-alignment"]),"text-field":new Ke(I.layout_symbol["text-field"]),"text-font":new Ke(I.layout_symbol["text-font"]),"text-size":new Ke(I.layout_symbol["text-size"]),"text-max-width":new Ke(I.layout_symbol["text-max-width"]),"text-line-height":new Ke(I.layout_symbol["text-line-height"]),"text-letter-spacing":new Ke(I.layout_symbol["text-letter-spacing"]),"text-justify":new Ke(I.layout_symbol["text-justify"]),"text-radial-offset":new Ke(I.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Te(I.layout_symbol["text-variable-anchor"]),"text-anchor":new Ke(I.layout_symbol["text-anchor"]),"text-max-angle":new Te(I.layout_symbol["text-max-angle"]),"text-writing-mode":new Te(I.layout_symbol["text-writing-mode"]),"text-rotate":new Ke(I.layout_symbol["text-rotate"]),"text-padding":new Te(I.layout_symbol["text-padding"]),"text-keep-upright":new Te(I.layout_symbol["text-keep-upright"]),"text-transform":new Ke(I.layout_symbol["text-transform"]),"text-offset":new Ke(I.layout_symbol["text-offset"]),"text-allow-overlap":new Te(I.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Te(I.layout_symbol["text-ignore-placement"]),"text-optional":new Te(I.layout_symbol["text-optional"])});var Vg={paint:new xt({"icon-opacity":new Ke(I.paint_symbol["icon-opacity"]),"icon-color":new Ke(I.paint_symbol["icon-color"]),"icon-halo-color":new Ke(I.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ke(I.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ke(I.paint_symbol["icon-halo-blur"]),"icon-translate":new Te(I.paint_symbol["icon-translate"]),"icon-translate-anchor":new Te(I.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ke(I.paint_symbol["text-opacity"]),"text-color":new Ke(I.paint_symbol["text-color"],{runtimeType:Q,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Ke(I.paint_symbol["text-halo-color"]),"text-halo-width":new Ke(I.paint_symbol["text-halo-width"]),"text-halo-blur":new Ke(I.paint_symbol["text-halo-blur"]),"text-translate":new Te(I.paint_symbol["text-translate"]),"text-translate-anchor":new Te(I.paint_symbol["text-translate-anchor"])}),layout:u0};class x_{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:we,this.defaultValue=n}evaluate(n){if(n.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(n.formattedSection))return u.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Sn(x_,"FormatSectionOverride",{omit:["defaultValue"]});class Sm extends Sl{constructor(n){super(n,Vg)}recalculate(n,u){super.recalculate(n,u),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const v=[];for(const E of p)v.indexOf(E)<0&&v.push(E);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,u,p,v){const E=this.layout.get(n).evaluate(u,{},p,v),A=this._unevaluatedLayout._values[n];return A.isDataDriven()||Sa(A.value)||!E?E:(R=u.properties,E.replace(/{([^{}]+)}/g,(j,ee)=>ee in R?String(R[ee]):""));var R}createBucket(n){return new Hu(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of Vg.paint.overridableProperties){if(!Sm.hasPaintOverride(this.layout,n))continue;const u=this.paint.get(n),p=new x_(u),v=new bl(p,u.property.specification);let E=null;E="constant"===u.value.kind||"source"===u.value.kind?new Sc("source",v):new xl("composite",v,u.value.zoomStops,u.value._interpolationType),this.paint._values[n]=new tt(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(n,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&Sm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,u){const p=n.get("text-field"),v=Vg.paint.properties[u];let E=!1;const A=R=>{for(const H of R)if(v.overrides&&v.overrides.hasOverride(H))return void(E=!0)};if("constant"===p.value.kind&&p.value.value instanceof $n)A(p.value.value.sections);else if("source"===p.value.kind){const R=j=>{E||(j instanceof Io&&hs(j.value)===Ze?A(j.value.sections):j instanceof ia?A(j.sections):j.eachChild(R))},H=p.value;H._styleExpression&&R(H._styleExpression.expression)}return E}getProgramConfiguration(n){return new Tu(this,n)}}var w_={paint:new xt({"background-color":new Te(I.paint_background["background-color"]),"background-pattern":new Te(I.paint_background["background-pattern"]),"background-opacity":new Te(I.paint_background["background-opacity"])})},d0={paint:new xt({"raster-opacity":new Te(I.paint_raster["raster-opacity"]),"raster-hue-rotate":new Te(I.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Te(I.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Te(I.paint_raster["raster-brightness-max"]),"raster-saturation":new Te(I.paint_raster["raster-saturation"]),"raster-contrast":new Te(I.paint_raster["raster-contrast"]),"raster-resampling":new Te(I.paint_raster["raster-resampling"]),"raster-fade-duration":new Te(I.paint_raster["raster-fade-duration"])})};class C_ extends Sl{constructor(n){super(n,{}),this.implementation=n}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var E_={paint:new xt({"sky-type":new Te(I.paint_sky["sky-type"]),"sky-atmosphere-sun":new Te(I.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Te(I.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Te(I.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Te(I.paint_sky["sky-gradient-radius"]),"sky-gradient":new bt(I.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Te(I.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Te(I.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Te(I.paint_sky["sky-opacity"])})};function Gg(a,n,u){const p=[0,0,1],v=vs([]);return Gf(v,v,u?-jt(a)+Math.PI:jt(a)),Vf(v,v,-jt(n)),Nf(p,p,v),ma(p,p)}const S_={circle:class extends Sl{constructor(a){super(a,Pu)}createBucket(a){return new Zh(a)}queryRadius(a){const n=a;return Lu("circle-radius",this,n)+Lu("circle-stroke-width",this,n)+kd(this.paint.get("circle-translate"))}queryIntersectsFeature(a,n,u,p,v,E,A,R){const H=Vs(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),j=this.paint.get("circle-radius").evaluate(n,u)+this.paint.get("circle-stroke-width").evaluate(n,u);return uh(a,p,E,A,R,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),H,j)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new Tu(this,a)}},heatmap:class extends Sl{createBucket(a){return new jp(a)}constructor(a){super(a,dh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){"heatmap-color"===a&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return Lu("heatmap-radius",this,a)}queryIntersectsFeature(a,n,u,p,v,E,A,R){const H=this.paint.get("heatmap-radius").evaluate(n,u);return uh(a,p,E,A,R,!0,!0,new at(0,0),H)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new Tu(this,a)}},hillshade:class extends Sl{constructor(a){super(a,cg)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Sl{constructor(a){super(a,Dv)}getProgramIds(){const a=this.paint.get("fill-pattern"),n=a&&a.constantOr(1),u=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(a){return new Tu(this,a)}recalculate(a,n){super.recalculate(a,n);const u=this.paint._values["fill-outline-color"];"constant"===u.value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new yh(a)}queryRadius(){return kd(this.paint.get("fill-translate"))}queryIntersectsFeature(a,n,u,p,v,E){return!a.queryGeometry.isAboveHorizon&&Td(Ou(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}},"fill-extrusion":class extends Sl{constructor(a){super(a,ef)}createBucket(a){return new Bu(a)}queryRadius(){return kd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new Tu(this,a)}queryIntersectsFeature(a,n,u,p,v,E,A,R,H){const j=Vs(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),ee=this.paint.get("fill-extrusion-height").evaluate(n,u),se=this.paint.get("fill-extrusion-base").evaluate(n,u),ce=[0,0],ve=R&&E.elevation,be=E.elevation?E.elevation.exaggeration():1,Ae=a.tile.getBucket(this);if(ve&&Ae instanceof Bu){const At=Ae.centroidVertexArray,Nt=H+1;Nt<At.length&&(ce[0]=At.geta_centroid_pos0(Nt),ce[1]=At.geta_centroid_pos1(Nt))}if(0===ce[0]&&1===ce[1])return!1;"globe"===E.projection.name&&(p=Lv([p],[new at(0,0),new at(hn,hn)],a.tileID.canonical).map(At=>At.polygon).flat());const $e=ve?R:null,[dt,Ot]=(Nt=p,Bt=se,bi=ee,hi=j,Li=A,rn=$e,Si=ce,Ni=be,Yi=E.center.lat,"globe"===(At=E).projection.name?function(an,Di,bn,On,Cn,_r,ln,jn,yr,ns,br){const ir=[],Rs=[],Er=an.projection.upVectorScale(br,an.center.lat,an.worldSize).metersToTile,Sr=[0,0,0,1],Es=[0,0,0,1],Ss=(Ts,Gs,Qs,mo)=>{Ts[0]=Gs,Ts[1]=Qs,Ts[2]=mo,Ts[3]=1},Ms=Iv();bn>0&&(bn+=Ms),On+=Ms;for(const Ts of Di){const Gs=[],Qs=[];for(const mo of Ts){const As=mo.x+Cn.x,Ao=mo.y+Cn.y,go=an.projection.projectTilePoint(As,Ao,br),qs=an.projection.upVector(br,mo.x,mo.y);let ss=bn,vo=On;if(ln){const Ds=Pv(As,Ao,bn,On,ln,jn,yr,ns);ss+=Ds.base,vo+=Ds.top}0!==bn?Ss(Sr,go.x+qs[0]*Er*ss,go.y+qs[1]*Er*ss,go.z+qs[2]*Er*ss):Ss(Sr,go.x,go.y,go.z),Ss(Es,go.x+qs[0]*Er*vo,go.y+qs[1]*Er*vo,go.z+qs[2]*Er*vo),Zs(Sr,Sr,_r),Zs(Es,Es,_r),Gs.push(new xh(Sr[0],Sr[1],Sr[2])),Qs.push(new xh(Es[0],Es[1],Es[2]))}ir.push(Gs),Rs.push(Qs)}return[ir,Rs]}(At,Nt,Bt,bi,hi,Li,rn,Si,Ni,Yi,a.tileID.canonical):rn?function(an,Di,bn,On,Cn,_r,ln,jn,yr){const ns=[],br=[],ir=[0,0,0,1];for(const Rs of an){const Er=[],Sr=[];for(const Es of Rs){const Ss=Es.x+On.x,Ms=Es.y+On.y,Ts=Pv(Ss,Ms,Di,bn,_r,ln,jn,yr);ir[0]=Ss,ir[1]=Ms,ir[2]=Ts.base,ir[3]=1,td(ir,ir,Cn),ir[3]=Math.max(ir[3],1e-5);const Gs=new xh(ir[0]/ir[3],ir[1]/ir[3],ir[2]/ir[3]);ir[0]=Ss,ir[1]=Ms,ir[2]=Ts.top,ir[3]=1,td(ir,ir,Cn),ir[3]=Math.max(ir[3],1e-5);const Qs=new xh(ir[0]/ir[3],ir[1]/ir[3],ir[2]/ir[3]);Er.push(Gs),Sr.push(Qs)}ns.push(Er),br.push(Sr)}return[ns,br]}(Nt,Bt,bi,hi,Li,rn,Si,Ni,Yi):function(an,Di,bn,On,Cn){const _r=[],ln=[],jn=Cn[8]*Di,yr=Cn[9]*Di,ns=Cn[10]*Di,br=Cn[11]*Di,ir=Cn[8]*bn,Rs=Cn[9]*bn,Er=Cn[10]*bn,Sr=Cn[11]*bn;for(const Es of an){const Ss=[],Ms=[];for(const Ts of Es){const Gs=Ts.x+On.x,Qs=Ts.y+On.y,mo=Cn[0]*Gs+Cn[4]*Qs+Cn[12],As=Cn[1]*Gs+Cn[5]*Qs+Cn[13],Ao=Cn[2]*Gs+Cn[6]*Qs+Cn[14],go=Cn[3]*Gs+Cn[7]*Qs+Cn[15],qs=mo+jn,ss=As+yr,vo=Ao+ns,Ds=Math.max(go+br,1e-5),ll=mo+ir,_o=As+Rs,_a=Ao+Er,ea=Math.max(go+Sr,1e-5);Ss.push(new xh(qs/Ds,ss/Ds,vo/Ds)),Ms.push(new xh(ll/ea,_o/ea,_a/ea))}_r.push(Ss),ln.push(Ms)}return[_r,ln]}(Nt,Bt,bi,hi,Li)),ct=a.queryGeometry;var At,Nt,Bt,bi,hi,Li,rn,Si,Ni,Yi;return function(At,Nt,Bt){let bi=1/0;Td(Bt,Nt)&&(bi=bg(Bt,Nt[0]));for(let hi=0;hi<Nt.length;hi++){const Li=Nt[hi],rn=At[hi];for(let Si=0;Si<Li.length-1;Si++){const Ni=Li[Si],Yi=[Ni,Li[Si+1],rn[Si+1],rn[Si],Ni];fo(Bt,Yi)&&(bi=Math.min(bi,bg(Bt,Yi)))}}return bi!==1/0&&bi}(dt,Ot,ct.isPointQuery()?ct.screenBounds:ct.screenGeometry)}},line:class extends Sl{constructor(a){super(a,nf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if("line-gradient"===a){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Hs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,n){super.recalculate(a,n),this.paint._values["line-floorwidth"]=xg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new sp(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new Tu(this,a)}queryRadius(a){const n=a,u=Nu(Lu("line-width",this,n),Lu("line-gap-width",this,n)),p=Lu("line-offset",this,n);return u/2+Math.abs(p)+kd(this.paint.get("line-translate"))}queryIntersectsFeature(a,n,u,p,v,E){if(a.queryGeometry.isAboveHorizon)return!1;const A=Ou(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),R=a.pixelToTileUnitsFactor/2*Nu(this.paint.get("line-width").evaluate(n,u),this.paint.get("line-gap-width").evaluate(n,u)),H=this.paint.get("line-offset").evaluate(n,u);return H&&(p=function(j,ee){const se=[],ce=new at(0,0);for(let ve=0;ve<j.length;ve++){const be=j[ve],Ae=[];for(let $e=0;$e<be.length;$e++){const dt=be[$e],Ot=be[$e+1],ct=0===$e?ce:dt.sub(be[$e-1])._unit()._perp(),At=$e===be.length-1?ce:Ot.sub(dt)._unit()._perp(),Nt=ct._add(At)._unit();Nt._mult(1/(Nt.x*At.x+Nt.y*At.y)),Ae.push(Nt._mult(ee)._add(dt))}se.push(Ae)}return se}(p,H*a.pixelToTileUnitsFactor)),function(j,ee,se){for(let ce=0;ce<ee.length;ce++){const ve=ee[ce];if(j.length>=3)for(let be=0;be<ve.length;be++)if(iu(j,ve[be]))return!0;if(lg(j,ve,se))return!0}return!1}(A,p,R)}isTileClipped(){return!0}},symbol:Sm,background:class extends Sl{constructor(a){super(a,w_)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Sl{constructor(a){super(a,d0)}getProgramIds(){return["raster"]}},sky:class extends Sl{constructor(a){super(a,E_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){"sky-gradient"===a?this._updateColorRamp():"sky-atmosphere-sun"!==a&&"sky-atmosphere-halo-color"!==a&&"sky-atmosphere-color"!==a&&"sky-atmosphere-sun-intensity"!==a||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=pc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(a,n){if("atmosphere"===this.paint.get("sky-type")){const p=this.paint.get("sky-atmosphere-sun"),v=!p,E=a.style.light,A=E.properties.get("position");return v&&"viewport"===E.properties.get("anchor")&&wn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),v?Gg(A.azimuthal,90-A.polar,n):Gg(p[0],90-p[1],n)}const u=this.paint.get("sky-gradient-center");return Gg(u[0],90-u[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return"atmosphere"===a?["skyboxCapture","skybox"]:"gradient"===a?["skyboxGradient"]:null}}};class vf{constructor(n,u,p,v){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(u,v)}update(n,u,p){const{width:v,height:E}=n,{context:A}=this,{gl:R}=A,{HTMLImageElement:H,HTMLCanvasElement:j,HTMLVideoElement:ee,ImageData:se,ImageBitmap:ce}=V;if(R.bindTexture(R.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!u||!1!==u.premultiply)),p||this.size&&this.size[0]===v&&this.size[1]===E){const{x:ve,y:be}=p||{x:0,y:0};n instanceof H||n instanceof j||n instanceof ee||n instanceof se||ce&&n instanceof ce?R.texSubImage2D(R.TEXTURE_2D,0,ve,be,R.RGBA,R.UNSIGNED_BYTE,n):R.texSubImage2D(R.TEXTURE_2D,0,ve,be,v,E,R.RGBA,R.UNSIGNED_BYTE,n.data)}else this.size=[v,E],n instanceof H||n instanceof j||n instanceof ee||n instanceof se||ce&&n instanceof ce?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,n):R.texImage2D(R.TEXTURE_2D,0,this.format,v,E,0,this.format,R.UNSIGNED_BYTE,n.data);this.useMipmap=!!(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&R.generateMipmap(R.TEXTURE_2D)}bind(n,u){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),n!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,n),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.useMipmap?n===v.NEAREST?v.NEAREST_MIPMAP_NEAREST:v.LINEAR_MIPMAP_NEAREST:n),this.filter=n),u!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,u),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class pp{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class h0{constructor(){this.tasks={},this.taskQueue=[],Nn(["process"],this),this.invoker=new pp(this.process),this.nextId=0}add(n,u){const p=this.nextId++,v=function({type:E,isSymbolTile:A,zoom:R}){return R=R||0,"message"===E?0:"maybePrepare"!==E||A?"parseTile"!==E||A?"parseTile"===E&&A?300-R:"maybePrepare"===E&&A?400-R:500:200-R:100-R}(u);if(0===v){Xi();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[p]={fn:n,metadata:u,priority:v,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){Xi();try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const n=this.pick();if(null===n)return;const u=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let n=null,u=1/0;for(let v=0;v<this.taskQueue.length;v++){const E=this.tasks[this.taskQueue[v]];E.priority<u&&(u=E.priority,n=v)}if(null===n)return null;const p=this.taskQueue[n];return this.taskQueue.splice(n,1),p}remove(){this.invoker.remove()}}class T_{constructor(n){this._stringToNumber={},this._numberToString=[];for(let u=0;u<n.length;u++){const p=n[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const _f=["tile","layer","source","sourceLayer","state"];class yf{constructor(n,u,p,v,E){this.type="Feature",this._vectorTileFeature=n,this._z=u,this._x=p,this._y=v,this.properties=n.properties,this.id=E}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(n.id=this.id);for(const u of _f)void 0!==this[u]&&(n[u]=this[u]);return n}}const Fd=new Uint16Array(8184);for(let a=0;a<2046;a++){let n=a+2,u=0,p=0,v=0,E=0,A=0,R=0;for(1&n?v=E=A=32:u=p=R=32;(n>>=1)>1;){const j=u+v>>1,ee=p+E>>1;1&n?(v=u,E=p,u=A,p=R):(u=v,p=E,v=A,E=R),A=j,R=ee}const H=4*a;Fd[H+0]=u,Fd[H+1]=p,Fd[H+2]=v,Fd[H+3]=E}const Gu=new Uint16Array(2178),Bd=new Uint8Array(1089),Tm=new Uint16Array(1089);function jg(a){return 0===a?-.03125:32===a?.03125:0}var k_=Qt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const M_={type:2,extent:hn,loadGeometry:()=>[[new at(0,0),new at(hn+1,0),new at(hn+1,hn+1),new at(0,hn+1),new at(0,0)]]};class Ug{constructor(n,u,p,v,E){this.tileID=n,this.uid=ei(),this.uses=0,this.tileSize=u,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=E,this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(n){const u=n+this.timeAdded;u<c.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Eh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,u,p){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(v,E){const A={};if(!E)return A;for(const R of v){const H=R.layerIds.map(j=>E.getLayer(j)).filter(Boolean);if(0!==H.length){R.layers=H,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(j=>H.filter(ee=>ee.id===j)[0]));for(const j of H)A[j.id]=R}}return A}(n.buckets,u.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const E=this.buckets[v];if(E instanceof Hu){if(this.hasSymbolBuckets=!0,!p)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const E=this.buckets[v];if(E instanceof Hu&&E.hasRTLText){this.hasRTLText=!0,K.isLoading()||K.isLoaded()||"deferred"!==B()||X();break}}this.queryPadding=0;for(const v in this.buckets){const E=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(E))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new qr}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const v=this.buckets[p];v.uploadPending()&&v.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vf(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vf(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vf(n,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,p,v,E,A,R,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:v,pixelPosMatrix:R,transform:A,params:E,tileTransform:this.tileTransform},n,u,p):{}}querySourceFeatures(n,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const v=p.loadVTLayers(),E=u?u.sourceLayer:"",A=v._geojsonTileLayer||v[E];if(!A)return;const R=ki(u&&u.filter),{z:H,x:j,y:ee}=this.tileID.canonical,se={z:H,x:j,y:ee};for(let ce=0;ce<A.length;ce++){const ve=A.feature(ce);if(R.needGeometry){const $e=ja(ve,!0);if(!R.filter(new te(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!R.filter(new te(this.tileID.overscaledZ),ve))continue;const be=p.getId(ve,E),Ae=new yf(ve,H,j,ee,be);Ae.tile=se,n.push(Ae)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const p=ji(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let v=!1;if(this.expirationTime>p)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const E=this.expirationTime-u;E?this.expirationTime=p+Math.max(E,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(n).length||!u)return;const p=this.latestFeatureIndex.loadVTLayers(),v=u.style.listImages();for(const E in this.buckets){if(!u.style.hasLayer(E))continue;const A=this.buckets[E],R=A.layers[0].sourceLayer||"_geojsonTileLayer",H=p[R],j=n[R];if(!H||!j||0===Object.keys(j).length)continue;if(A.update(j,H,v,this.imageAtlas&&this.imageAtlas.patternPositions||{}),A instanceof sp||A instanceof yh){const se=u.style._getSourceCache(A.layers[0].source);u._terrain&&u._terrain.enabled&&se&&A.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(se.id,this.tileID)}const ee=u&&u.style&&u.style.getLayer(E);ee&&(this.queryPadding=Math.max(this.queryPadding,ee.queryRadius(A)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=c.now()+n}setTexture(n,u){const p=u.context,v=p.gl;this.texture=this.texture||u.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new vf(p,n,v.RGBA,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(n,u){const p={};for(const v of u)p[v]=!0;this.dependencies[n]=p}hasDependency(n,u){for(const p of n){const v=this.dependencies[p];if(v)for(const E of u)if(v[E])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,u){if(!u||"mercator"===u.name||this._tileDebugBuffer)return;const p=tu(M_,this.tileID.canonical,this.tileTransform)[0],v=new Ji,E=new ka;for(let A=0;A<p.length;A++){const{x:R,y:H}=p[A];v.emplaceBack(R,H),E.emplaceBack(A)}E.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(E),this._tileDebugBuffer=n.createVertexBuffer(v,eh.members),this._tileDebugSegments=Xs.simpleSegment(0,0,v.length,E.length)}_makeTileBoundsBuffers(n,u){if(this._tileBoundsBuffer||!u||"mercator"===u.name)return;const p=tu(M_,this.tileID.canonical,this.tileTransform)[0];let v,E;if(this.isRaster){const A=function(R,H){const j=Eh(R,H),ee=Math.pow(2,R.z);for(let $e=0;$e<33;$e++)for(let dt=0;dt<33;dt++){const Ot=Da((R.x+(dt+jg(dt))/32)/ee),ct=Jo((R.y+($e+jg($e))/32)/ee),At=H.project(Ot,ct),Nt=33*$e+dt;Gu[2*Nt+0]=Math.round((At.x*j.scale-j.x)*hn),Gu[2*Nt+1]=Math.round((At.y*j.scale-j.y)*hn)}Bd.fill(0),Tm.fill(0);for(let $e=2045;$e>=0;$e--){const dt=4*$e,Ot=Fd[dt+0],ct=Fd[dt+1],At=Fd[dt+2],Nt=Fd[dt+3],Bt=Ot+At>>1,bi=ct+Nt>>1,hi=Bt+bi-ct,Li=bi+Ot-Bt,rn=33*ct+Ot,Si=33*Nt+At,Ni=33*bi+Bt,Yi=Math.hypot((Gu[2*rn+0]+Gu[2*Si+0])/2-Gu[2*Ni+0],(Gu[2*rn+1]+Gu[2*Si+1])/2-Gu[2*Ni+1])>=16;Bd[Ni]=Bd[Ni]||(Yi?1:0),$e<1022&&(Bd[Ni]=Bd[Ni]||Bd[33*(ct+Li>>1)+(Ot+hi>>1)]||Bd[33*(Nt+Li>>1)+(At+hi>>1)])}const se=new Oi,ce=new zn;let ve=0;function be($e,dt){const Ot=33*dt+$e;return 0===Tm[Ot]&&(se.emplaceBack(Gu[2*Ot+0],Gu[2*Ot+1],$e*hn/32,dt*hn/32),Tm[Ot]=++ve),Tm[Ot]-1}function Ae($e,dt,Ot,ct,At,Nt){const Bt=$e+Ot>>1,bi=dt+ct>>1;if(Math.abs($e-At)+Math.abs(dt-Nt)>1&&Bd[33*bi+Bt])Ae(At,Nt,$e,dt,Bt,bi),Ae(Ot,ct,At,Nt,Bt,bi);else{const hi=be($e,dt),Li=be(Ot,ct),rn=be(At,Nt);ce.emplaceBack(hi,Li,rn)}}return Ae(0,0,32,32,32,0),Ae(32,32,0,0,0,32),{vertices:se,indices:ce}}(this.tileID.canonical,u);v=A.vertices,E=A.indices}else{v=new Oi,E=new zn;for(const{x:R,y:H}of p)v.emplaceBack(R,H,0,0);const A=Ld(v.int16,void 0,4);for(let R=0;R<A.length;R+=3)E.emplaceBack(A[R],A[R+1],A[R+2])}this._tileBoundsBuffer=n.createVertexBuffer(v,k_.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(E),this._tileBoundsSegments=Xs.simpleSegment(0,0,v.length,E.length)}_makeGlobeTileDebugBuffers(n,u){const p=u.projection;if(!p||"globe"!==p.name||u.freezeTileCoverage)return;const v=this.tileID.canonical,E=oh($f(v,u)),A=Iu(u.zoom);let R;A>0&&(R=bd(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,v,u,E,R,A),this._makeGlobeTileDebugTextBuffer(n,v,u,E,R,A)}_globePoint(n,u,p,v,E,A,R){let H=sh(n,u,p);if(A){const j=1<<p.z,ee=Oc(v.center.lng),se=Pc(v.center.lat),ce=(p.x+.5)/j-ee;let ve=0;ce>.5?ve=-1:ce<-.5&&(ve=1);let be=(n/hn+p.x)/j+ve,Ae=(u/hn+p.y)/j;be=(be-ee)*v._pixelsPerMercatorPixel+ee,Ae=(Ae-se)*v._pixelsPerMercatorPixel+se;const $e=[be*v.worldSize,Ae*v.worldSize,0];Zs($e,$e,A),H=Wl(H,$e,R)}return Zs(H,H,E)}_makeGlobeTileDebugBorderBuffer(n,u,p,v,E,A){const R=new Ji,H=new ka,j=new Zt,ee=(ce,ve,be,Ae,$e)=>{const dt=(be-ce)/($e-1),Ot=(Ae-ve)/($e-1),ct=R.length;for(let At=0;At<$e;At++){const Nt=ce+At*dt,Bt=ve+At*Ot;R.emplaceBack(Nt,Bt);const bi=this._globePoint(Nt,Bt,u,p,v,E,A);j.emplaceBack(bi[0],bi[1],bi[2]),H.emplaceBack(ct+At)}},se=hn;ee(0,0,se,0,16),ee(se,0,se,se,16),ee(se,se,0,se,16),ee(0,se,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(H),this._tileDebugBuffer=n.createVertexBuffer(R,eh.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(j,Ip.members),this._tileDebugSegments=Xs.simpleSegment(0,0,R.length,H.length)}_makeGlobeTileDebugTextBuffer(n,u,p,v,E,A){const R=hn/4,H=new Ji,j=new zn,ee=new Zt;j.reserve(32),H.reserve(25),ee.reserve(25);const ce=(ve,be)=>25*ve+be;for(let ve=0;ve<25;ve++){const be=ve*R;for(let Ae=0;Ae<25;Ae++){const $e=Ae*R;H.emplaceBack($e,be);const dt=this._globePoint($e,be,u,p,v,E,A);ee.emplaceBack(dt[0],dt[1],dt[2])}}for(let ve=0;ve<4;ve++)for(let be=0;be<4;be++){const Ae=ce(ve,be),$e=ce(ve,be+1),dt=ce(ve+1,be),Ot=ce(ve+1,be+1);j.emplaceBack(Ae,$e,dt),j.emplaceBack(dt,$e,Ot)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(j),this._tileDebugTextBuffer=n.createVertexBuffer(H,eh.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(ee,Ip.members),this._tileDebugTextSegments=Xs.simpleSegment(0,0,25,32)}}class p0{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,u,p){const v=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][v]=this.stateChanges[n][v]||{},mn(this.stateChanges[n][v],p),null===this.deletedStates[n]){this.deletedStates[n]={};for(const E in this.state[n])E!==v&&(this.deletedStates[n][E]=null)}else if(this.deletedStates[n]&&null===this.deletedStates[n][v]){this.deletedStates[n][v]={};for(const E in this.state[n][v])p[E]||(this.deletedStates[n][v][E]=null)}else for(const E in p)this.deletedStates[n]&&this.deletedStates[n][v]&&null===this.deletedStates[n][v][E]&&delete this.deletedStates[n][v][E]}removeFeatureState(n,u,p){if(null===this.deletedStates[n])return;const v=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&void 0!==u)null!==this.deletedStates[n][v]&&(this.deletedStates[n][v]=this.deletedStates[n][v]||{},this.deletedStates[n][v][p]=null);else if(void 0!==u)if(this.stateChanges[n]&&this.stateChanges[n][v])for(p in this.deletedStates[n][v]={},this.stateChanges[n][v])this.deletedStates[n][v][p]=null;else this.deletedStates[n][v]=null;else this.deletedStates[n]=null}getState(n,u){const p=String(u),v=mn({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(null===this.deletedStates[n])return{};if(this.deletedStates[n]){const E=this.deletedStates[n][u];if(null===E)return{};for(const A in E)delete v[A]}return v}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const p={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const E={};for(const A in this.stateChanges[v])this.state[v][A]||(this.state[v][A]={}),mn(this.state[v][A],this.stateChanges[v][A]),E[A]=this.state[v][A];p[v]=E}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const E={};if(null===this.deletedStates[v])for(const A in this.state[v])E[A]={},this.state[v][A]={};else for(const A in this.deletedStates[v]){if(null===this.deletedStates[v][A])this.state[v][A]={};else if(this.state[v][A])for(const R of Object.keys(this.deletedStates[v][A]))delete this.state[v][A][R];E[A]=this.state[v][A]}p[v]=p[v]||{},mn(p[v],E)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const v in n)n[v].setFeatureState(p,u)}}class A_{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,u){const p=this.toIdx(n,u);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(n,u){return this.leaves[this.toIdx(n,u)]}toIdx(n,u){return u*this.size+n}}function D_(a,n,u,p){let v=0,E=Number.MAX_VALUE;for(let A=0;A<3;A++)if(Math.abs(p[A])<1e-15){if(u[A]<a[A]||u[A]>n[A])return null}else{const R=1/p[A];let H=(a[A]-u[A])*R,j=(n[A]-u[A])*R;if(H>j){const ee=H;H=j,j=ee}if(H>v&&(v=H),j<E&&(E=j),v>E)return null}return v}function I_(a,n,u,p,v,E,A,R,H,j,ee){const se=p-a,ce=v-n,ve=E-u,be=A-a,Ae=R-n,$e=H-u,dt=ee[1]*$e-ee[2]*Ae,Ot=ee[2]*be-ee[0]*$e,ct=ee[0]*Ae-ee[1]*be,At=se*dt+ce*Ot+ve*ct;if(Math.abs(At)<1e-15)return null;const Nt=1/At,Bt=j[0]-a,bi=j[1]-n,hi=j[2]-u,Li=(Bt*dt+bi*Ot+hi*ct)*Nt;if(Li<0||Li>1)return null;const rn=bi*ve-hi*ce,Si=hi*se-Bt*ve,Ni=Bt*ce-bi*se,Yi=(ee[0]*rn+ee[1]*Si+ee[2]*Ni)*Nt;return Yi<0||Li+Yi>1?null:(be*rn+Ae*Si+$e*Ni)*Nt}function Wg(a,n,u){return(a-n)/(u-n)}function L_(a,n,u,p,v,E,A,R,H){const j=1<<u,ee=E-p,se=A-v,ce=(a+1)/j*ee+p,ve=(n+0)/j*se+v,be=(n+1)/j*se+v;R[0]=(a+0)/j*ee+p,R[1]=ve,H[0]=ce,H[1]=be}class O_{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(E){const A=Math.ceil(Math.log2(E.dim/8)),R=[];let H=Math.ceil(Math.pow(2,A));const j=1/H,ee=(ve,be,Ae,$e,dt)=>{const Ot=$e?1:0,ct=(ve+1)*Ae-Ot,At=be*Ae,Nt=(be+1)*Ae-Ot;dt[0]=ve*Ae,dt[1]=At,dt[2]=ct,dt[3]=Nt};let se=new A_(H);const ce=[];for(let ve=0;ve<H*H;ve++){ee(ve%H,Math.floor(ve/H),j,!1,ce);const be=Sh(ce[0],ce[1],E),Ae=Sh(ce[2],ce[1],E),$e=Sh(ce[2],ce[3],E),dt=Sh(ce[0],ce[3],E);se.minimums.push(Math.min(be,Ae,$e,dt)),se.maximums.push(Math.max(be,Ae,$e,dt)),se.leaves.push(1)}for(R.push(se),H/=2;H>=1;H/=2){const ve=R[R.length-1];se=new A_(H);for(let be=0;be<H*H;be++){ee(be%H,Math.floor(be/H),2,!0,ce);const Ae=ve.getElevation(ce[0],ce[1]),$e=ve.getElevation(ce[2],ce[1]),dt=ve.getElevation(ce[2],ce[3]),Ot=ve.getElevation(ce[0],ce[3]),ct=ve.isLeaf(ce[0],ce[1]),At=ve.isLeaf(ce[2],ce[1]),Nt=ve.isLeaf(ce[2],ce[3]),Bt=ve.isLeaf(ce[0],ce[3]),bi=Math.min(Ae.min,$e.min,dt.min,Ot.min),hi=Math.max(Ae.max,$e.max,dt.max,Ot.max),Li=ct&&At&&Nt&&Bt;se.maximums.push(hi),se.minimums.push(bi),se.leaves.push(hi-bi<=5&&Li?1:0)}R.push(se)}return R}(this.dem),p=u.length-1,v=u[p];this._addNode(v.minimums[0],v.maximums[0],v.leaves[0]),this._construct(u,0,0,p,0)}raycastRoot(n,u,p,v,E,A,R=1){return D_([n,u,-100],[p,v,this.maximums[0]*R],E,A)}raycast(n,u,p,v,E,A,R=1){if(!this.nodeCount)return null;const H=this.raycastRoot(n,u,p,v,E,A,R);if(null==H)return null;const j=[],ee=[],se=[],ce=[],ve=[{idx:0,t:H,nodex:0,nodey:0,depth:0}];for(;ve.length>0;){const{idx:be,t:Ae,nodex:$e,nodey:dt,depth:Ot}=ve.pop();if(this.leaves[be]){L_($e,dt,Ot,n,u,p,v,se,ce);const At=1<<Ot,Nt=($e+0)/At,Bt=($e+1)/At,bi=(dt+0)/At,hi=(dt+1)/At,Li=Sh(Nt,bi,this.dem)*R,rn=Sh(Bt,bi,this.dem)*R,Si=Sh(Bt,hi,this.dem)*R,Ni=Sh(Nt,hi,this.dem)*R,Yi=I_(se[0],se[1],Li,ce[0],se[1],rn,ce[0],ce[1],Si,E,A),Zi=I_(ce[0],ce[1],Si,se[0],ce[1],Ni,se[0],se[1],Li,E,A),an=Math.min(null!==Yi?Yi:Number.MAX_VALUE,null!==Zi?Zi:Number.MAX_VALUE);if(an!==Number.MAX_VALUE)return an;{const Di=Jc([],E,A,Ae);if(P_(Li,rn,Ni,Si,Wg(Di[0],se[0],ce[0]),Wg(Di[1],se[1],ce[1]))>=Di[2])return Ae}continue}let ct=0;for(let At=0;At<this._siblingOffset.length;At++){L_(($e<<1)+this._siblingOffset[At][0],(dt<<1)+this._siblingOffset[At][1],Ot+1,n,u,p,v,se,ce),se[2]=-100,ce[2]=this.maximums[this.childOffsets[be]+At]*R;const Nt=D_(se,ce,E,A);if(null!=Nt){const Bt=Nt;j[At]=Bt;let bi=!1;for(let hi=0;hi<ct&&!bi;hi++)Bt>=j[ee[hi]]&&(ee.splice(hi,0,At),bi=!0);bi||(ee[ct]=At),ct++}}for(let At=0;At<ct;At++){const Nt=ee[At];ve.push({idx:this.childOffsets[be]+Nt,t:j[Nt],nodex:($e<<1)+this._siblingOffset[Nt][0],nodey:(dt<<1)+this._siblingOffset[Nt][1],depth:Ot+1})}}return null}_addNode(n,u,p){return this.minimums.push(n),this.maximums.push(u),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(n,u,p,v,E){if(1===n[v].isLeaf(u,p))return;this.childOffsets[E]||(this.childOffsets[E]=this.nodeCount);const A=v-1,R=n[A];let H=0,j=0;for(let ee=0;ee<this._siblingOffset.length;ee++){const se=2*u+this._siblingOffset[ee][0],ce=2*p+this._siblingOffset[ee][1],ve=R.getElevation(se,ce),be=R.isLeaf(se,ce),Ae=this._addNode(ve.min,ve.max,be);be&&(H|=1<<ee),j||(j=Ae)}for(let ee=0;ee<this._siblingOffset.length;ee++)H&1<<ee||this._construct(n,2*u+this._siblingOffset[ee][0],2*p+this._siblingOffset[ee][1],A,j+ee)}}function P_(a,n,u,p,v,E){return Or(Or(a,u,E),Or(n,p,E),v)}function Sh(a,n,u){const p=u.dim,v=_i(a*p-.5,0,p-1),E=_i(n*p-.5,0,p-1),A=Math.floor(v),R=Math.floor(E),H=Math.min(A+1,p-1),j=Math.min(R+1,p-1);return P_(u.get(A,R),u.get(H,R),u.get(A,j),u.get(H,j),v-A,E-R)}const R_={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Rb(a,n,u){return(256*a*256+256*n+u)/10-1e4}function f0(a,n,u){return 256*a+n+u/256-32768}class km{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,u,p,v=!1,E=!1){if(this.uid=n,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&"mapbox"!==p&&"terrarium"!==p)return wn(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const A=this.dim=u.height-2,R=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=p||"mapbox",this.borderReady=v,!v){for(let H=0;H<A;H++)R[this._idx(-1,H)]=R[this._idx(0,H)],R[this._idx(A,H)]=R[this._idx(A-1,H)],R[this._idx(H,-1)]=R[this._idx(H,0)],R[this._idx(H,A)]=R[this._idx(H,A-1)];R[this._idx(-1,-1)]=R[this._idx(0,0)],R[this._idx(A,-1)]=R[this._idx(A-1,0)],R[this._idx(-1,A)]=R[this._idx(0,A-1)],R[this._idx(A,A)]=R[this._idx(A-1,A-1)],E&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new O_(this)}get(n,u,p=!1){p&&(n=_i(n,-1,this.dim),u=_i(u,-1,this.dim));const v=4*this._idx(n,u);return("terrarium"===this.encoding?f0:Rb)(this.pixels[v],this.pixels[v+1],this.pixels[v+2])}static getUnpackVector(n){return R_[n]}get unpackVector(){return R_[this.encoding]}_idx(n,u){if(n<-1||n>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(n+1)}static pack(n,u){const p=[0,0,0,0],v=km.getUnpackVector(u);let E=Math.floor((n+v[3])/v[2]);return p[2]=E%256,E=Math.floor(E/256),p[1]=E%256,E=Math.floor(E/256),p[0]=E,p}getPixels(){return new Ua({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,u,p){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=u*this.dim,E=u*this.dim+this.dim,A=p*this.dim,R=p*this.dim+this.dim;switch(u){case-1:v=E-1;break;case 1:E=v+1}switch(p){case-1:A=R-1;break;case 1:R=A+1}const H=-u*this.dim,j=-p*this.dim;for(let ee=A;ee<R;ee++)for(let se=v;se<E;se++){const ce=4*this._idx(se,ee),ve=4*this._idx(se+H,ee+j);this.pixels[ce+0]=n.pixels[ve+0],this.pixels[ce+1]=n.pixels[ve+1],this.pixels[ce+2]=n.pixels[ve+2],this.pixels[ce+3]=n.pixels[ve+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Sn(km,"DEMData"),Sn(O_,"DemMinMaxQuadTree",{omit:["dem"]});class Mm{constructor(n,u){this.max=n,this.onRemove=u,this.reset()}reset(){for(const n in this.data)for(const u of this.data[n])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(n,u,p){const v=n.wrapped().key;void 0===this.data[v]&&(this.data[v]=[]);const E={value:u,timeout:void 0};if(void 0!==p&&(E.timeout=setTimeout(()=>{this.remove(n,E)},p)),this.data[v].push(E),this.order.push(v),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const u=this.data[n].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[n].length&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),u.value}getByKey(n){const u=this.data[n];return u?u[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,u){if(!this.has(n))return this;const p=n.wrapped().key,v=void 0===u?0:this.data[p].indexOf(u),E=this.data[p][v];return this.data[p].splice(v,1),E.timeout&&clearTimeout(E.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(E.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(n){const u=[];for(const p in this.data)for(const v of this.data[p])n(v.value)||u.push(v);for(const p of u)this.remove(p.value.tileID,p)}}class md{constructor(n,u,p){this.func=n,this.mask=u,this.range=p}}md.ReadOnly=!1,md.ReadWrite=!0,md.disabled=new md(519,md.ReadOnly,[0,1]);class Dm{constructor(n,u,p,v,E,A){this.test=n,this.ref=u,this.mask=p,this.fail=v,this.depthFail=E,this.pass=A}}Dm.disabled=new Dm({func:519,mask:0},0,0,7680,7680,7680);class lu{constructor(n,u,p){this.blendFunction=n,this.blendColor=u,this.mask=p}}lu.Replace=[1,0],lu.disabled=new lu(lu.Replace,Mr.transparent,[!1,!1,!1,!1]),lu.unblended=new lu(lu.Replace,Mr.transparent,[!0,!0,!0,!0]),lu.alphaBlended=new lu([1,771],Mr.transparent,[!0,!0,!0,!0]);class cu{constructor(n,u,p){this.enable=n,this.mode=u,this.frontFace=p}}cu.disabled=new cu(!1,1029,2305),cu.backCCW=new cu(!0,1029,2305),cu.backCW=new cu(!0,1029,2304),cu.frontCW=new cu(!0,1028,2304),cu.frontCCW=new cu(!0,1028,2305);class Th extends M{constructor(n,u,p){super(),this.id=n,this._onlySymbols=p,u.on("data",v=>{"source"===v.dataType&&"metadata"===v.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===v.dataType&&"content"===v.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new Mm(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new p0,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(n){this.map=n,this._minTileCacheSize=void 0===this._minTileCacheSize&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const u=this._tiles[n];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,u){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,u)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return xn(this._tiles).map(n=>n.tileID).sort(z_).map(n=>n.key)}getRenderableIds(n){const u=[];for(const p in this._tiles)this._isIdRenderable(+p,n)&&u.push(this._tiles[p]);return n?u.sort((p,v)=>{const E=p.tileID,A=v.tileID,R=new at(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),H=new at(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-A.overscaledZ||H.y-R.y||H.x-R.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(z_).map(p=>p.key)}hasRenderableParent(n){const u=this.findLoadedParent(n,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(n,u){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(u||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)"errored"!==this._tiles[n].state&&this._reloadTile(+n,"reloading")}}_reloadTile(n,u){const p=this._tiles[n];p&&("loading"!==p.state&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,n,u)))}_tileLoaded(n,u,p,v){if(v)if(n.state="errored",404!==v.status)this._source.fire(new x(v,{tile:n}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const E=this.map.painter.terrain;this.update(this.transform,E.getScaledDemTileSize(),!0),E.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=c.now(),"expired"===p&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new b("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const u=this.getRenderableIds();for(let v=0;v<u.length;v++){const E=u[v];if(n.neighboringTiles&&n.neighboringTiles[E]){const A=this.getTileByID(E);p(n,A),p(A,n)}}function p(v,E){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let A=E.tileID.canonical.x-v.tileID.canonical.x;const R=E.tileID.canonical.y-v.tileID.canonical.y,H=Math.pow(2,v.tileID.canonical.z),j=E.tileID.key;0===A&&0===R||Math.abs(R)>1||(Math.abs(A)>1&&(1===Math.abs(A+H)?A+=H:1===Math.abs(A-H)&&(A-=H)),E.dem&&v.dem&&(v.dem.backfillBorder(E.dem,A,R),v.neighboringTiles&&v.neighboringTiles[j]&&(v.neighboringTiles[j].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,u,p,v){for(const E in this._tiles){let A=this._tiles[E];if(v[E]||!A.hasData()||A.tileID.overscaledZ<=u||A.tileID.overscaledZ>p)continue;let R=A.tileID;for(;A&&A.tileID.overscaledZ>u+1;){const j=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[j.key],A&&A.hasData()&&(R=j)}let H=R;for(;H.overscaledZ>u;)if(H=H.scaledTo(H.overscaledZ-1),n[H.key]){v[R.key]=R;break}}}findLoadedParent(n,u){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=n.overscaledZ-1;p>=u;p--){const v=n.scaledTo(p),E=this._getLoadedTile(v);if(E)return E}}_getLoadedTile(n){const u=this._tiles[n.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,u){u=u||this._source.tileSize;const p=Math.ceil(n.width/u)+1,v=Math.ceil(n.height/u)+1,E=Math.floor(p*v*5),A="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,E):E,R="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,A):A;this._cache.setMaxSize(R)}handleWrapJump(n){const u=Math.round((n-(void 0===this._prevLng?n:this._prevLng))/360);if(this._prevLng=n,u){const p={};for(const v in this._tiles){const E=this._tiles[v];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),p[E.tileID.key]=E}this._tiles=p;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(n,u,p){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;let v;this.updateCacheSize(n,u),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new Wa(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(v=n.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(v=v.filter(R=>this._source.hasTile(R)))):v=[];const E=this._updateRetainedTiles(v);if(F_(this._source.type)&&0!==v.length){const R={},H={},j=Object.keys(E);for(const se of j){const ce=E[se],ve=this._tiles[se];if(!ve||ve.fadeEndTime&&ve.fadeEndTime<=c.now())continue;const be=this.findLoadedParent(ce,Math.max(ce.overscaledZ-Th.maxOverzooming,this._source.minzoom));be&&(this._addTile(be.tileID),R[be.tileID.key]=be.tileID),H[se]=ce}const ee=v[v.length-1].overscaledZ;for(const se in this._tiles){const ce=this._tiles[se];if(E[se]||!ce.hasData())continue;let ve=ce.tileID;for(;ve.overscaledZ>ee;){ve=ve.scaledTo(ve.overscaledZ-1);const be=this._tiles[ve.key];if(be&&be.hasData()&&H[ve.key]){E[se]=ce.tileID;break}}}for(const se in R)E[se]||(this._coveredTiles[se]=!0,E[se]=R[se])}for(const R in E)this._tiles[R].clearFadeHold();const A=function(R,H){const j=[];for(const ee in R)ee in H||j.push(ee);return j}(this._tiles,E);for(const R of A){const H=this._tiles[R];H.hasSymbolBuckets&&!H.holdingForFade()?H.setHoldDuration(this.map._fadeDuration):H.hasSymbolBuckets&&!H.symbolFadeFinished()||this._removeTile(+R)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const u={};if(0===n.length)return u;const p={},v=n.reduce((j,ee)=>Math.min(j,ee.overscaledZ),1/0),E=n[0].overscaledZ,A=Math.max(E-Th.maxOverzooming,this._source.minzoom),R=Math.max(E+Th.maxUnderzooming,this._source.minzoom),H={};for(const j of n){const ee=this._addTile(j);u[j.key]=j,ee.hasData()||v<this._source.maxzoom&&(H[j.key]=j)}this._retainLoadedChildren(H,v,R,u);for(const j of n){let ee=this._tiles[j.key];if(ee.hasData())continue;if(j.canonical.z>=this._source.maxzoom){const ce=j.children(this._source.maxzoom)[0],ve=this.getTile(ce);if(ve&&ve.hasData()){u[ce.key]=ce;continue}}else{const ce=j.children(this._source.maxzoom);if(u[ce[0].key]&&u[ce[1].key]&&u[ce[2].key]&&u[ce[3].key])continue}let se=ee.wasRequested();for(let ce=j.overscaledZ-1;ce>=A;--ce){const ve=j.scaledTo(ce);if(p[ve.key]||(p[ve.key]=!0,ee=this.getTile(ve),!ee&&se&&(ee=this._addTile(ve)),ee&&(u[ve.key]=ve,se=ee.wasRequested(),ee.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const u=[];let p,v=this._tiles[n].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){p=this._loadedParentTiles[v.key];break}u.push(v.key);const E=v.scaledTo(v.overscaledZ-1);if(p=this._getLoadedTile(E),p)break;v=E}for(const E of u)this._loadedParentTiles[E]=p}}_addTile(n){let u=this._tiles[n.key];if(u)return u;u=this._cache.getAndRemove(n),u&&(this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,u)));const p=!!u;if(!p){const v=this.map?this.map.painter:null;u=new Ug(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,v,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,n.key,u.state))}return u?(u.uses++,this._tiles[n.key]=u,p||this._source.fire(new b("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(n,u){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=u.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const u=this._tiles[n];u&&(u.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,u,p){const v=[],E=this.transform;if(!E)return v;const A="globe"===E.projection.name,R=Oc(E.center.lng);for(const H in this._tiles){const j=this._tiles[H];if(p&&j.clearQueryDebugViz(),j.holdingForFade())continue;let ee;if(A){const se=j.tileID.canonical;if(0===se.z){const ce=[Math.abs(_i(R,...bf(se,-1))-R),Math.abs(_i(R,...bf(se,1))-R)];ee=[0,2*ce.indexOf(Math.min(...ce))-1]}else{const ce=[Math.abs(_i(R,...bf(se,-1))-R),Math.abs(_i(R,...bf(se,0))-R),Math.abs(_i(R,...bf(se,1))-R)];ee=[ce.indexOf(Math.min(...ce))-1]}}else ee=[0];for(const se of ee){const ce=n.containsTile(j,E,u,se);ce&&v.push(ce)}}return v}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of u)p.projMatrix=this.transform.calculateProjMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(F_(this._source.type))for(const n in this._tiles){const u=this._tiles[n];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=c.now())return!0}return!1}setFeatureState(n,u,p){this._state.updateState(n=n||"_geojsonTileLayer",u,p)}removeFeatureState(n,u,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",u,p)}getFeatureState(n,u){return this._state.getState(n=n||"_geojsonTileLayer",u)}setDependencies(n,u,p){const v=this._tiles[n];v&&v.setDependencies(u,p)}reloadTilesForDependencies(n,u){for(const p in this._tiles)this._tiles[p].hasDependency(n,u)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(n,u))}_preloadTiles(n,u){if(!this._sourceLoaded){const R=()=>{this._sourceLoaded&&(this._source.off("data",R),this._preloadTiles(n,u))};return void this._source.on("data",R)}const p=new Map,v=Array.isArray(n)?n:[n],E=this.map.painter.terrain,A=this.usedForTerrain&&E?E.getScaledDemTileSize():this._source.tileSize;for(const R of v){const H=R.coveringTiles({tileSize:A,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const j of H)p.set(j.key,j);this.usedForTerrain&&R.updateElevation(!1)}qi(Array.from(p.values()),(R,H)=>{const j=new Ug(R,this._source.tileSize*R.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(j,ee=>{"raster-dem"===this._source.type&&j.dem&&this._backfillDEM(j),H(ee,j)})},u)}}function z_(a,n){const u=Math.abs(2*a.wrap)-+(a.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return a.overscaledZ-n.overscaledZ||p-u||n.canonical.y-a.canonical.y||n.canonical.x-a.canonical.x}function F_(a){return"raster"===a||"image"===a||"video"===a||"custom"===a}function bf(a,n){const u=1<<a.z;return[a.x/u+n,(a.x+1)/u+n]}Th.maxOverzooming=10,Th.maxUnderzooming=3;class Om{constructor(n,u,p){this._demTile=n,this._dem=this._demTile.dem,this._scale=u,this._offset=p}static create(n,u,p){const v=p||n.findDEMTileFor(u);if(!v||!v.dem)return;const E=v.dem,A=v.tileID,R=1<<u.canonical.z-A.canonical.z;return new Om(v,v.tileSize/hn/R,[(u.canonical.x/R-A.canonical.x)*E.dim,(u.canonical.y/R-A.canonical.y)*E.dim])}tileCoordToPixel(n,u){const p=u*this._scale+this._offset[1],v=Math.floor(n*this._scale+this._offset[0]),E=Math.floor(p);return new at(v,E)}getElevationAt(n,u,p,v){const E=n*this._scale+this._offset[0],A=u*this._scale+this._offset[1],R=Math.floor(E),H=Math.floor(A),j=this._dem;return v=!!v,p?Or(Or(j.get(R,H,v),j.get(R,H+1,v),A-H),Or(j.get(R+1,H,v),j.get(R+1,H+1,v),A-H),E-R):j.get(R,H,v)}getElevationAtPixel(n,u,p){return this._dem.get(n,u,!!p)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Xl(1,n)*this._dem.stride}}class B_{constructor(n,u){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Hl(hn,16,0),this.featureIndexArray=new Vl,this.promoteId=u}insert(n,u,p,v,E,A=0){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,v,E,A);const H=this.grid;for(let j=0;j<u.length;j++){const ee=u[j],se=[1/0,1/0,-1/0,-1/0];for(let ce=0;ce<ee.length;ce++){const ve=ee[ce];se[0]=Math.min(se[0],ve.x),se[1]=Math.min(se[1],ve.y),se[2]=Math.max(se[2],ve.x),se[3]=Math.max(se[3],ve.y)}se[0]<hn&&se[1]<hn&&se[2]>=0&&se[3]>=0&&H.insert(R,se[0],se[1],se[2],se[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ye(new fm(this.rawTileData)).layers,this.sourceLayerCoder=new T_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,u,p,v){this.loadVTLayers();const E=n.params||{},A=ki(E.filter),R=n.tileResult,H=n.transform,j=R.bufferedTilespaceBounds,ee=this.grid.query(j.min.x,j.min.y,j.max.x,j.max.y,(be,Ae,$e,dt)=>ch(R.bufferedTilespaceGeometry,be,Ae,$e,dt));ee.sort(N_);let se=null;H.elevation&&ee.length>0&&(se=Om.create(H.elevation,this.tileID));const ce={};let ve;for(let be=0;be<ee.length;be++){const Ae=ee[be];if(Ae===ve)continue;ve=Ae;const $e=this.featureIndexArray.get(Ae);let dt=null;this.loadMatchingFeature(ce,$e,A,E.layers,E.availableImages,u,p,v,(Ot,ct,At,Nt=0)=>(dt||(dt=tu(Ot,this.tileID.canonical,n.tileTransform)),ct.queryIntersectsFeature(R,Ot,At,dt,this.z,n.transform,n.pixelPosMatrix,se,Nt)))}return ce}loadMatchingFeature(n,u,p,v,E,A,R,H,j){const{featureIndex:ee,bucketIndex:se,sourceLayerIndex:ce,layoutVertexArrayOffset:ve}=u,be=this.bucketLayerIDs[se];if(v&&!function(Ot,ct){for(let At=0;At<Ot.length;At++)if(ct.indexOf(Ot[At])>=0)return!0;return!1}(v,be))return;const Ae=this.sourceLayerCoder.decode(ce),$e=this.vtLayers[Ae].feature(ee);if(p.needGeometry){const Ot=ja($e,!0);if(!p.filter(new te(this.tileID.overscaledZ),Ot,this.tileID.canonical))return}else if(!p.filter(new te(this.tileID.overscaledZ),$e))return;const dt=this.getId($e,Ae);for(let Ot=0;Ot<be.length;Ot++){const ct=be[Ot];if(v&&v.indexOf(ct)<0)continue;const At=A[ct];if(!At)continue;let Nt={};void 0!==dt&&H&&(Nt=H.getState(At.sourceLayer||"_geojsonTileLayer",dt));const Bt=mn({},R[ct]);Bt.paint=$g(Bt.paint,At.paint,$e,Nt,E),Bt.layout=$g(Bt.layout,At.layout,$e,Nt,E);const bi=!j||j($e,At,Nt,ve);if(!bi)continue;const hi=new yf($e,this.z,this.x,this.y,dt);hi.layer=Bt;let Li=n[ct];void 0===Li&&(Li=n[ct]=[]),Li.push({featureIndex:ee,feature:hi,intersectionZ:bi})}}lookupSymbolFeatures(n,u,p,v,E,A,R,H){const j={};this.loadVTLayers();const ee=ki(E);for(const se of n)this.loadMatchingFeature(j,{bucketIndex:p,sourceLayerIndex:v,featureIndex:se,layoutVertexArrayOffset:0},ee,A,R,H,u);return j}loadFeature(n){const{featureIndex:u,sourceLayerIndex:p}=n;this.loadVTLayers();const v=this.sourceLayerCoder.decode(p),E=this.vtFeatures[v];if(E[u])return E[u];const A=this.vtLayers[v].feature(u);return E[u]=A,A}hasLayer(n){for(const u of this.bucketLayerIDs)for(const p of u)if(n===p)return!0;return!1}getId(n,u){let p=n.id;if(this.promoteId){const v="string"==typeof this.promoteId?this.promoteId:this.promoteId[u];null!=v&&(p=n.properties[v]),"boolean"==typeof p&&(p=Number(p))}return p}}function $g(a,n,u,p,v){return Gi(a,(E,A)=>{const R=n instanceof st?n.get(A):null;return R&&R.evaluate?R.evaluate(u,p,v):R})}function N_(a,n){return n-a}Sn(B_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Y_{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.image=new nu({width:n,height:u}),this.positions={},this.uploaded=!1}getDash(n,u){const p=this.getKey(n,u);return this.positions[p]}trim(){const n=this.width,u=this.height=on(this.nextRow);this.image.resize({width:n,height:u})}getKey(n,u){return n.join(",")+u}getDashRanges(n,u,p){const v=[];let E=n.length%2==1?-n[n.length-1]*p:0,A=n[0]*p,R=!0;v.push({left:E,right:A,isDash:R,zeroLength:0===n[0]});let H=n[0];for(let j=1;j<n.length;j++){R=!R;const ee=n[j];E=H*p,H+=ee,A=H*p,v.push({left:E,right:A,isDash:R,zeroLength:0===ee})}return v}addRoundDash(n,u,p){const v=u/2;for(let E=-p;E<=p;E++){const A=this.width*(this.nextRow+p+E);let R=0,H=n[R];for(let j=0;j<this.width;j++){j/H.right>1&&(H=n[++R]);const ee=Math.abs(j-H.left),se=Math.abs(j-H.right),ce=Math.min(ee,se);let ve;const be=E/p*(v+1);if(H.isDash){const Ae=v-Math.abs(be);ve=Math.sqrt(ce*ce+Ae*Ae)}else ve=v-Math.sqrt(ce*ce+be*be);this.image.data[A+j]=Math.max(0,Math.min(255,ve+128))}}}addRegularDash(n,u){for(let H=n.length-1;H>=0;--H){const j=n[H],ee=n[H+1];j.zeroLength?n.splice(H,1):ee&&ee.isDash===j.isDash&&(ee.left=j.left,n.splice(H,1))}const p=n[0],v=n[n.length-1];p.isDash===v.isDash&&(p.left=v.left-this.width,v.right=p.right+this.width);const E=this.width*this.nextRow;let A=0,R=n[A];for(let H=0;H<this.width;H++){H/R.right>1&&(R=n[++A]);const j=Math.abs(H-R.left),ee=Math.abs(H-R.right),se=Math.min(j,ee);this.image.data[E+H]=Math.max(0,Math.min(255,(R.isDash?se:-se)+u+128))}}addDash(n,u){const p=this.getKey(n,u);if(this.positions[p])return this.positions[p];const v="round"===u,E=v?7:0,A=2*E+1;if(this.nextRow+A>this.height)return wn("LineAtlas out of space"),null;0===n.length&&n.push(1);let R=0;for(let ee=0;ee<n.length;ee++)n[ee]<0&&(wn("Negative value is found in line dasharray, replacing values with 0"),n[ee]=0),R+=n[ee];if(0!==R){const ee=this.width/R,se=this.getDashRanges(n,this.width,ee);v?this.addRoundDash(se,ee,E):this.addRegularDash(se,"square"===u?.5*ee:0)}const H=this.nextRow+E;this.nextRow+=A;const j={tl:[H,E],br:[R,0]};return this.positions[p]=j,j}}Sn(Y_,"LineAtlas");const H_=1*au;class V_{constructor(n){const u={},p=[];for(const R in n){const H=n[R],j=u[R]={};for(const ee in H.glyphs){const se=H.glyphs[+ee];if(!se||0===se.bitmap.width||0===se.bitmap.height)continue;const ce=se.metrics.localGlyph?H_:1,ve={x:0,y:0,w:se.bitmap.width+2*ce,h:se.bitmap.height+2*ce};p.push(ve),j[ee]=ve}}const{w:v,h:E}=Mg(p),A=new nu({width:v||1,height:E||1});for(const R in n){const H=n[R];for(const j in H.glyphs){const ee=H.glyphs[+j];if(!ee||0===ee.bitmap.width||0===ee.bitmap.height)continue;const se=u[R][j],ce=ee.metrics.localGlyph?H_:1;nu.copy(ee.bitmap,A,{x:0,y:0},{x:se.x+ce,y:se.y+ce},ee.bitmap)}}this.image=A,this.positions=u}}Sn(V_,"GlyphAtlas");class fp{constructor(n){this.tileID=new Wa(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Eh(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,u,p,v,E){this.status="parsing",this.data=n,this.collisionBoxArray=new qr;const A=new T_(Object.keys(n.layers).sort()),R=new B_(this.tileID,this.promoteId);R.bucketLayerIDs=[];const H={},j=new Y_(256,256),ee={featureIndex:R,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:j,availableImages:p},se=u.familiesBySource[this.source];for(const Nt in se){const Bt=n.layers[Nt];if(!Bt)continue;let bi=!1,hi=!1;for(const Si of se[Nt])"symbol"===Si[0].type?bi=!0:hi=!0;if(!0===this.isSymbolTile&&!bi||!1===this.isSymbolTile&&!hi)continue;1===Bt.version&&wn(`Vector tile source "${this.source}" layer "${Nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Li=A.encode(Nt),rn=[];for(let Si=0;Si<Bt.length;Si++){const Ni=Bt.feature(Si),Yi=R.getId(Ni,Nt);rn.push({feature:Ni,id:Yi,index:Si,sourceLayerIndex:Li})}for(const Si of se[Nt]){const Ni=Si[0];void 0!==this.isSymbolTile&&"symbol"===Ni.type!==this.isSymbolTile||Ni.minzoom&&this.zoom<Math.floor(Ni.minzoom)||Ni.maxzoom&&this.zoom>=Ni.maxzoom||"none"!==Ni.visibility&&(Xg(Si,this.zoom,p),(H[Ni.id]=Ni.createBucket({index:R.bucketLayerIDs.length,layers:Si,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Li,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:p})).populate(rn,ee,this.tileID.canonical,this.tileTransform),R.bucketLayerIDs.push(Si.map(Yi=>Yi.id)))}}let ce,ve,be,Ae;j.trim();const $e={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},dt=()=>{if(ce)return E(ce);if(ve&&be&&Ae){const Nt=new V_(ve),Bt=new ou(be,Ae);for(const bi in H){const hi=H[bi];hi instanceof Hu?(Xg(hi.layers,this.zoom,p),e0(hi,ve,Nt.positions,be,Bt.iconPositions,this.showCollisionBoxes,p,this.tileID.canonical,this.tileZoom,this.projection)):hi.hasPattern&&(hi instanceof sp||hi instanceof yh||hi instanceof Bu)&&(Xg(hi.layers,this.zoom,p),hi.addFeatures(ee,this.tileID.canonical,Bt.patternPositions,p,this.tileTransform))}this.status="done",E(null,{buckets:xn(H).filter(bi=>!bi.isEmpty()),featureIndex:R,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nt.image,lineAtlas:j,imageAtlas:Bt,glyphMap:this.returnDependencies?ve:null,iconMap:this.returnDependencies?be:null,glyphPositions:this.returnDependencies?Nt.positions:null})}},Ot=Gi(ee.glyphDependencies,Nt=>Object.keys(Nt).map(Number));Object.keys(Ot).length?v.send("getGlyphs",{uid:this.uid,stacks:Ot},(Nt,Bt)=>{ce||(ce=Nt,ve=Bt,dt())},void 0,!1,$e):ve={};const ct=Object.keys(ee.iconDependencies);ct.length?v.send("getImages",{icons:ct,source:this.source,tileID:this.tileID,type:"icons"},(Nt,Bt)=>{ce||(ce=Nt,be=Bt,dt())},void 0,!1,$e):be={};const At=Object.keys(ee.patternDependencies);At.length?v.send("getImages",{icons:At,source:this.source,tileID:this.tileID,type:"patterns"},(Nt,Bt)=>{ce||(ce=Nt,Ae=Bt,dt())},void 0,!1,$e):Ae={},dt()}}function Xg(a,n,u){const p=new te(n);for(const v of a)v.recalculate(p,u)}class Zg{constructor(n){this.entries={},this.scheduler=n}request(n,u,p,v){const E=this.entries[n]=this.entries[n]||{callbacks:[]};if(E.result){const[A,R]=E.result;return this.scheduler?this.scheduler.add(()=>{v(A,R)},u):v(A,R),()=>{}}return E.callbacks.push(v),E.cancel||(E.cancel=p((A,R)=>{E.result=[A,R];for(const H of E.callbacks)this.scheduler?this.scheduler.add(()=>{H(A,R)},u):H(A,R);setTimeout(()=>delete this.entries[n],3e3)})),()=>{E.result||(E.callbacks=E.callbacks.filter(A=>A!==v),E.callbacks.length||(E.cancel(),delete this.entries[n]))}}}function G_(a,n,u){const p=JSON.stringify(a.request);return a.data&&(this.deduped.entries[p]={result:[null,a.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},v=>{const E=Cr(a.request,(A,R,H,j)=>{A?v(A):R&&v(null,{vectorTile:u?void 0:new ye(new fm(R)),rawData:R,cacheControl:H,expires:j})});return()=>{E.cancel(),v()}},n)}const j_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class qg{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(n,0,2);if(219!==u)throw new Error("Data does not appear to be in a KDBush format.");const v=p>>4;if(1!==v)throw new Error(`Got v${v} data when expected v1.`);const E=j_[15&p];if(!E)throw new Error("Unrecognized array type.");const[A]=new Uint16Array(n,2,1),[R]=new Uint32Array(n,4,1);return new qg(R,A,E,n)}constructor(n,u=64,p=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const E=j_.indexOf(this.ArrayType),A=2*n*this.ArrayType.BYTES_PER_ELEMENT,R=n*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-R%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${p}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+R+H,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+A+R+H),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+R+H,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=n)}add(n,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=n,this.coords[this._pos++]=u,p}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Kg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,u,p,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:A,nodeSize:R}=this,H=[0,E.length-1,0],j=[];for(;H.length;){const ee=H.pop()||0,se=H.pop()||0,ce=H.pop()||0;if(se-ce<=R){for(let $e=ce;$e<=se;$e++){const dt=A[2*$e],Ot=A[2*$e+1];dt>=n&&dt<=p&&Ot>=u&&Ot<=v&&j.push(E[$e])}continue}const ve=ce+se>>1,be=A[2*ve],Ae=A[2*ve+1];be>=n&&be<=p&&Ae>=u&&Ae<=v&&j.push(E[ve]),(0===ee?n<=be:u<=Ae)&&(H.push(ce),H.push(ve-1),H.push(1-ee)),(0===ee?p>=be:v>=Ae)&&(H.push(ve+1),H.push(se),H.push(1-ee))}return j}within(n,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:E,nodeSize:A}=this,R=[0,v.length-1,0],H=[],j=p*p;for(;R.length;){const ee=R.pop()||0,se=R.pop()||0,ce=R.pop()||0;if(se-ce<=A){for(let $e=ce;$e<=se;$e++)Qg(E[2*$e],E[2*$e+1],n,u)<=j&&H.push(v[$e]);continue}const ve=ce+se>>1,be=E[2*ve],Ae=E[2*ve+1];Qg(be,Ae,n,u)<=j&&H.push(v[ve]),(0===ee?n-p<=be:u-p<=Ae)&&(R.push(ce),R.push(ve-1),R.push(1-ee)),(0===ee?n+p>=be:u+p>=Ae)&&(R.push(ve+1),R.push(se),R.push(1-ee))}return H}}function Kg(a,n,u,p,v,E){if(v-p<=u)return;const A=p+v>>1;U_(a,n,A,p,v,E),Kg(a,n,u,p,A-1,1-E),Kg(a,n,u,A+1,v,1-E)}function U_(a,n,u,p,v,E){for(;v>p;){if(v-p>600){const j=v-p+1,ee=u-p+1,se=Math.log(j),ce=.5*Math.exp(2*se/3),ve=.5*Math.sqrt(se*ce*(j-ce)/j)*(ee-j/2<0?-1:1);U_(a,n,u,Math.max(p,Math.floor(u-ee*ce/j+ve)),Math.min(v,Math.floor(u+(j-ee)*ce/j+ve)),E)}const A=n[2*u+E];let R=p,H=v;for(xf(a,n,p,u),n[2*v+E]>A&&xf(a,n,p,v);R<H;){for(xf(a,n,R,H),R++,H--;n[2*R+E]<A;)R++;for(;n[2*H+E]>A;)H--}n[2*p+E]===A?xf(a,n,p,H):(H++,xf(a,n,H,v)),H<=u&&(p=H+1),u<=H&&(v=H-1)}}function xf(a,n,u,p){Jg(a,u,p),Jg(n,2*u,2*p),Jg(n,2*u+1,2*p+1)}function Jg(a,n,u){const p=a[n];a[n]=a[u],a[u]=p}function Qg(a,n,u,p){const v=a-u,E=n-p;return v*v+E*E}t.ARRAY_TYPE=pa,t.AUTH_ERR_MSG=lt,t.Aabb=Aa,t.Actor=class{constructor(a,n,u){this.target=a,this.parent=n,this.mapId=u,this.callbacks={},this.cancelCallbacks={},Nn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Xi()?a:V,this.scheduler=new h0}send(a,n,u,p,v=!1,E){const A=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=E,this.callbacks[A]=u);const R=tn(this.globalScope)?void 0:[];return this.target.postMessage({id:A,type:a,hasCallback:!!u,targetMapId:p,mustQueue:v,sourceMapId:this.mapId,data:uc(n,R)},R),{cancel:()=>{u&&delete this.callbacks[A],this.target.postMessage({id:A,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(a){const n=a.data,u=n.id;if(u&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){const p=this.cancelCallbacks[u];delete this.cancelCallbacks[u],p&&p.cancel()}else if(n.mustQueue||Xi()){const p=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,n),p&&p.metadata||{type:"message"})}else this.processTask(u,n)}processTask(a,n){if("<response>"===n.type){const u=this.callbacks[a];delete this.callbacks[a],u&&(n.error?u(Vc(n.error)):u(null,Vc(n.data)))}else{const u=tn(this.globalScope)?void 0:[],p=n.hasCallback?(E,A)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:E?uc(E):null,data:uc(A,u)},u)}:E=>{},v=Vc(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,v,p);else if(this.parent.getWorkerSource){const E=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,E[0],v.source)[E[1]](v,p)}else p(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=tf,t.Color=Mr,t.ColorMode=lu,t.CullFaceMode=cu,t.DEMData=km,t.DataConstantProperty=Te,t.DedupedRequest=Zg,t.DepthMode=md,t.EXTENT=hn,t.Elevation=class{isDataAvailableAtPoint(a){const n=this._source();if(this.isUsingMockSource()||!n||a.y<0||a.y>1)return!1;const u=n.getSource().maxzoom,p=1<<u,v=Math.floor(a.x),E=Math.floor((a.x-v)*p),A=Math.floor(a.y*p),R=this.findDEMTileFor(new Wa(u,v,u,E,A));return!(!R||!R.dem)}getAtPointOrZero(a,n=0){return this.getAtPoint(a,n)||0}getAtPoint(a,n,u=!0){if(this.isUsingMockSource())return null;null==n&&(n=null);const p=this._source();if(!p||a.y<0||a.y>1)return n;const v=p.getSource().maxzoom,E=1<<v,A=Math.floor(a.x),R=a.x-A,H=new Wa(v,A,v,Math.floor(R*E),Math.floor(a.y*E)),j=this.findDEMTileFor(H);if(!j||!j.dem)return n;const ee=j.dem,se=1<<j.tileID.canonical.z,ce=(R*se-j.tileID.canonical.x)*ee.dim,ve=(a.y*se-j.tileID.canonical.y)*ee.dim,be=Math.floor(ce),Ae=Math.floor(ve);return(u?this.exaggeration():1)*Or(Or(ee.get(be,Ae),ee.get(be,Ae+1),ve-Ae),Or(ee.get(be+1,Ae),ee.get(be+1,Ae+1),ve-Ae),ce-be)}getAtTileOffset(a,n,u){const p=1<<a.canonical.z;return this.getAtPointOrZero(new Cd(a.wrap+(a.canonical.x+n/hn)/p,(a.canonical.y+u/hn)/p))}getAtTileOffsetFunc(a,n,u,p){return v=>{const E=this.getAtTileOffset(a,v.x,v.y),A=p.upVector(a.canonical,v.x,v.y);return rl(A,A,E*p.upVectorScale(a.canonical,n,u).metersToTile),A}}getForTilePoints(a,n,u,p){if(this.isUsingMockSource())return!1;const v=Om.create(this,a,p);return!!v&&(n.forEach(E=>{E[2]=this.exaggeration()*v.getElevationAt(E[0],E[1],u)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(a);if(!n||!n.dem)return null;const u=n.dem.tree,p=n.tileID,v=1<<a.canonical.z-p.canonical.z;let E=a.canonical.x/v-p.canonical.x,A=a.canonical.y/v-p.canonical.y,R=0;for(let H=0;H<a.canonical.z-p.canonical.z&&!u.leaves[R];H++){E*=2,A*=2;const j=2*Math.floor(A)+Math.floor(E);R=u.childOffsets[R]+j,E%=1,A%=1}return{min:this.exaggeration()*u.minimums[R],max:this.exaggeration()*u.maximums[R]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,n,u){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=x,t.EvaluationParameters=te,t.Event=b,t.Evented=M,t.FillExtrusionBucket=Bu,t.Frustum=Uh,t.FrustumCorners=ga,t.GLOBE_RADIUS=Ic,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=Lp,t.GLOBE_ZOOM_THRESHOLD_MIN=id,t.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,n){const u=new Ji,p=new zn,v=[],E=a+1+2,A=n[0]+1,R=n[0]+1+(1+n.length),H=(j,ee,se)=>{let ce=j===E-1?j-2:0===j?j:j-1;return ce+=se?24575:0,[ce,ee]};for(let j=0;j<E;++j)u.emplaceBack(...H(j,0,!0));for(let j=0;j<A;++j)for(let ee=0;ee<E;++ee)u.emplaceBack(...H(ee,j,(0===ee||ee===E-1)&&!0));for(let j=0;j<n.length;++j){const ee=n[j];for(let se=0;se<E;++se)u.emplaceBack(...H(se,ee,!0))}for(let j=0;j<n.length;++j){const ee=p.length,se=n[j]+1+2,ce=new zn;for(let Ae=0;Ae<se-1;Ae++){const $e=Ae===se-2,dt=$e?E*(R-n.length+j-Ae):E;for(let Ot=0;Ot<E-1;Ot++){const ct=Ae*E+Ot;0===Ae||$e||0===Ot||Ot===E-2?(ce.emplaceBack(ct+1,ct,ct+dt),ce.emplaceBack(ct+dt,ct+dt+1,ct+1)):(p.emplaceBack(ct+1,ct,ct+dt),p.emplaceBack(ct+dt,ct+dt+1,ct+1))}}const ve=Xs.simpleSegment(0,ee,u.length,p.length-ee);for(let Ae=0;Ae<ce.uint16.length;Ae+=3)p.emplaceBack(ce.uint16[Ae],ce.uint16[Ae+1],ce.uint16[Ae+2]);const be=Xs.simpleSegment(0,ee,u.length,p.length-ee);v.push({withoutSkirts:ve,withSkirts:be})}return{vertices:u,indices:p,segments:v}}_createGrid(a){const n=this._fillGridMeshWithLods(64,Gl);this._gridSegments=n.segments,this._gridBuffer=a.createVertexBuffer(n.vertices,eh.members),this._gridIndexBuffer=a.createIndexBuffer(n.indices,!0)}_createPoles(a){const n=new zn;for(let v=0;v<=64;v++)n.emplaceBack(0,v+1,v+2);this._poleIndexBuffer=a.createIndexBuffer(n,!0);const u=new gs,p=new gs;this._poleSegments=[];for(let v=0,E=0;v<id;v++){const A=360/(1<<v);u.emplaceBack(0,-Ic,0,.5,0),p.emplaceBack(0,-Ic,0,.5,1);for(let R=0;R<=64;R++){const H=R/64,j=Or(0,A,H),[ee,se,ce]=xd(ah,Fp,j,Ic);u.emplaceBack(ee,se,ce,H,0),p.emplaceBack(ee,se,ce,H,1)}this._poleSegments.push(Xs.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(u,Gh,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(p,Gh,!1)}getGridBuffers(a,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,n){if(!this._wireframeSegments){const u=new Ls,p=64,v=p+1+2,E=1;this._wireframeSegments=[];for(let A=0,R=0;A<Gl.length;A++){const H=Gl[A];for(let ee=E;ee<H+E;ee++)for(let se=E;se<p+E;se++){const ce=ee*v+se;u.emplaceBack(ce,ce+1),u.emplaceBack(ce,ce+v),u.emplaceBack(ce,ce+v+1)}const j=H*p*3;this._wireframeSegments.push(Xs.simpleSegment(0,R,(H+1)*v,j)),R+=j}this._wireframeIndexBuffer=a.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},t.GlyphManager=cp,t.ImagePosition=gm,t.KDBush=qg,t.LivePerformanceUtils=yt,t.LngLat=us,t.LngLatBounds=Ac,t.LocalGlyphMode=ym,t.MAX_MERCATOR_LATITUDE=Fo,t.MercatorCoordinate=Cd,t.ONE_EM=va,t.OverscaledTileID=Wa,t.PerformanceMarkers=rt,t.Point=at,t.Properties=xt,t.RGBAImage=Ua,t.Ray=jh,t.RequestManager=class{constructor(a,n,u){this._transformRequestFn=a,this._customAccessToken=n,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const a=function(){let n="";for(let u=0;u<10;u++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ot,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,n){return this._transformRequestFn&&this._transformRequestFn(a,n)||{url:a}}normalizeStyleURL(a,n){if(!zt(a))return a;const u=Ui(a);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||n)}normalizeGlyphsURL(a,n){if(!zt(a))return a;const u=Ui(a);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||n)}normalizeSourceURL(a,n,u,p){if(!zt(a))return a;const v=Ui(a);return v.path=`/v4/${v.authority}.json`,v.params.push("secure"),u&&v.params.push(`language=${u}`),p&&v.params.push(`worldview=${p}`),this._makeAPIURL(v,this._customAccessToken||n)}normalizeSpriteURL(a,n,u,p){const v=Ui(a);return zt(a)?(v.path=`/styles/v1${v.path}/sprite${n}${u}`,this._makeAPIURL(v,this._customAccessToken||p)):(v.path+=`${n}${u}`,di(v))}normalizeTileURL(a,n,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!zt(a))return a;const p=Ui(a);p.path=p.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||u&&"raster"!==p.authority&&512===u?"@2x":""}${Be.supported?".webp":"$1"}`),"raster"===p.authority?p.path=`/${De.RASTER_URL_PREFIX}${p.path}`:(p.path=p.path.replace(/^.+\/v4\//,"/"),p.path=`/${De.TILE_URL_VERSION}${p.path}`);const v=this._customAccessToken||function(E){for(const A of E){const R=A.match(/^access_token=(.*)$/);if(R)return R[1]}return null}(p.params)||De.ACCESS_TOKEN;return De.REQUIRE_ACCESS_TOKEN&&v&&this._skuToken&&p.params.push(`sku=${this._skuToken}`),this._makeAPIURL(p,v)}canonicalizeTileURL(a,n){const u=Ui(a);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return a;let p="mapbox://";u.path.match(/^\/raster\/v1\//)?p+=`raster/${u.path.replace(`/${De.RASTER_URL_PREFIX}/`,"")}`:p+=`tiles/${u.path.replace(`/${De.TILE_URL_VERSION}/`,"")}`;let v=u.params;return n&&(v=v.filter(E=>!E.match(/^access_token=/))),v.length&&(p+=`?${v.join("&")}`),p}canonicalizeTileset(a,n){const u=!!n&&zt(n),p=[];for(const v of a.tiles||[])Kt(v)?p.push(this.canonicalizeTileURL(v,u)):p.push(v);return p}_makeAPIURL(a,n){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",p=Ui(De.API_URL);if(a.protocol=p.protocol,a.authority=p.authority,"http"===a.protocol){const v=a.params.indexOf("secure");v>=0&&a.params.splice(v,1)}if("/"!==p.path&&(a.path=`${p.path}${a.path}`),!De.REQUIRE_ACCESS_TOKEN)return di(a);if(n=n||De.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if("s"===n[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return a.params=a.params.filter(v=>-1===v.indexOf("access_token")),a.params.push(`access_token=${n||""}`),di(a)}},t.ResourceType=ks,t.SegmentVector=Xs,t.SourceCache=Th,t.StencilMode=Dm,t.StructArrayLayout1ui2=ka,t.StructArrayLayout2f1f2i16=Xn,t.StructArrayLayout2i4=Ji,t.StructArrayLayout2ui4=Ls,t.StructArrayLayout3f12=tr,t.StructArrayLayout3ui6=zn,t.StructArrayLayout4i8=Oi,t.StructArrayLayout5f20=gs,t.Texture=vf,t.Tile=Ug,t.Transitionable=Ce,t.Uniform1f=Ku,t.Uniform1i=class extends Qn{constructor(a){super(a),this.current=0}set(a,n,u){this.fetchUniformLocation(a,n)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},t.Uniform2f=class extends Qn{constructor(a){super(a),this.current=[0,0]}set(a,n,u){this.fetchUniformLocation(a,n)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},t.Uniform3f=class extends Qn{constructor(a){super(a),this.current=[0,0,0]}set(a,n,u){this.fetchUniformLocation(a,n)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},t.Uniform4f=tg,t.UniformColor=ig,t.UniformMatrix2f=class extends Qn{constructor(a){super(a),this.current=Nh}set(a,n,u){if(this.fetchUniformLocation(a,n))for(let p=0;p<4;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}},t.UniformMatrix3f=class extends Qn{constructor(a){super(a),this.current=Bh}set(a,n,u){if(this.fetchUniformLocation(a,n))for(let p=0;p<9;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}},t.UniformMatrix4f=class extends Qn{constructor(a){super(a),this.current=Ff}set(a,n,u){if(this.fetchUniformLocation(a,n)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let p=1;p<16;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},t.UnwrappedTileID=Ov,t.ValidationError=vn,t.VectorTileFeature=gt,t.VectorTileWorkerSource=class extends M{constructor(a,n,u,p,v){super(),this.actor=a,this.layerIndex=n,this.availableImages=u,this.loadVectorData=v||G_,this.loading={},this.loaded={},this.deduped=new Zg(a.scheduler),this.isSpriteLoaded=p,this.scheduler=a.scheduler}loadTile(a,n){const u=a.uid,p=a&&a.request,v=p&&p.collectResourceTiming,E=this.loading[u]=new fp(a);E.abort=this.loadVectorData(a,(A,R)=>{const H=!this.loading[u];if(delete this.loading[u],H||A||!R)return E.status="done",H||(this.loaded[u]=E),n(A);const j=R.rawData,ee={};R.expires&&(ee.expires=R.expires),R.cacheControl&&(ee.cacheControl=R.cacheControl),E.vectorTile=R.vectorTile||new ye(new fm(j));const se=()=>{E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,(ce,ve)=>{if(ce||!ve)return n(ce);const be={};if(v){const Ae=Tt(p);Ae.length>0&&(be.resourceTiming=JSON.parse(JSON.stringify(Ae)))}n(null,mn({rawTileData:j.slice(0)},ve,ee,be))})};this.isSpriteLoaded?se():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(se,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):se()}),this.loaded=this.loaded||{},this.loaded[u]=E})}reloadTile(a,n){const u=this.loaded,p=a.uid,v=this;if(u&&u[p]){const E=u[p];E.showCollisionBoxes=a.showCollisionBoxes,E.enableTerrain=!!a.enableTerrain,E.projection=a.projection,E.tileTransform=Eh(a.tileID.canonical,a.projection);const A=(R,H)=>{const j=E.reloadCallback;j&&(delete E.reloadCallback,E.parse(E.vectorTile,v.layerIndex,this.availableImages,v.actor,j)),n(R,H)};"parsing"===E.status?E.reloadCallback=A:"done"===E.status&&(E.vectorTile?E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,A):A())}}abortTile(a,n){const u=a.uid,p=this.loading[u];p&&(p.abort&&p.abort(),delete this.loading[u]),n()}removeTile(a,n){const u=this.loaded,p=a.uid;u&&u[p]&&delete u[p],n()}},t.WritingMode=mc,t.ZoomDependentExpression=xl,t.add=Kc,t.addDynamicAttributes=Yg,t.adjoint=function(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],A=n[4],R=n[5],H=n[6],j=n[7],ee=n[8];return a[0]=A*ee-R*j,a[1]=v*j-p*ee,a[2]=p*R-v*A,a[3]=R*H-E*ee,a[4]=u*ee-v*H,a[5]=v*E-u*R,a[6]=E*j-A*H,a[7]=p*H-u*j,a[8]=u*A-p*E,a},t.asyncAll=qi,t.bezier=mi,t.bindAll=Nn,t.boundsAttributes=k_,t.bufferConvexPolygon=function(a,n){const u=[];for(let p=0;p<a.length;p++){const v=Fi(p-1,-1,a.length-1),E=Fi(p+1,-1,a.length-1),A=a[p],R=a[E],H=a[v].sub(A).unit(),j=R.sub(A).unit(),ee=j.angleWithSep(H.x,H.y),se=H.add(j).unit().mult(-1*n/Math.sin(ee/2));u.push(A.add(se))}return u},t.cacheEntryPossiblyAdded=function(a){Rr++,Rr>Ir&&(a.getActor().send("enforceCacheSizeLimit",Dr),Rr=0)},t.calculateGlobeLabelMatrix=function(a,n){const{x:u,y:p}=a.point,v=Rp(u,p,a.worldSize/a._pixelsPerMercatorPixel,0,0);return Ju(v,v,Pp(Lc(n)))},t.calculateGlobeMatrix=function(a){const{x:n,y:u}=a.point,{lng:p,lat:v}=a._center;return Rp(n,u,a.worldSize,p,v)},t.calculateGlobeMercatorMatrix=function(a){const n=a.pixelsPerMeter,u=n/Xl(1,a.center.lat),p=Ko(new Float64Array(16));return Au(p,p,[a.point.x,a.point.y,0]),Tl(p,p,[u,u,n]),Float32Array.from(p)},t.circumferenceAtLatitude=wd,t.clamp=_i,t.clearTileCache=function(a){if(!or())return;const n=V.caches.delete(Pn);a&&n.catch(a).then(()=>a())},t.clipLine=Pg,t.clone=function(a){var n=new pa(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},t.clone$1=sr,t.collisionCircleLayout=Gy,t.config=De,t.conjugate=function(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=n[3],a},t.create=function(){var a=new pa(16);return pa!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},t.create$1=Yh,t.createExpression=Na,t.createLayout=Qt,t.createStyleLayer=function(a){return"custom"===a.type?new C_(a):new S_[a.type](a)},t.cross=Ap,t.degToRad=jt,t.distance=function(a,n){return Math.hypot(n[0]-a[0],n[1]-a[1],n[2]-a[2])},t.div=function(a,n,u){return a[0]=n[0]/u[0],a[1]=n[1]/u[1],a[2]=n[2]/u[2],a},t.dot=sl,t.earthRadius=sd,t.ease=Vi,t.easeCubicInOut=ri,t.ecefToLatLng=function([a,n,u]){const p=Math.hypot(a,n,u),v=Math.atan2(a,u),E=.5*Math.PI-Math.acos(-n/p);return new us(ht(v),ht(E))},t.emitValidationErrors=wp,t.endsWith=An,t.enforceCacheSizeLimit=function(a){Tn(),wr&&wr.then(n=>{n.keys().then(u=>{for(let p=0;p<u.length-a;p++)n.delete(u[p])})})},t.evaluateSizeForFeature=op,t.evaluateSizeForZoom=hd,t.evaluateVariableOffset=p_,t.evented=P,t.exactEquals=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3]===n[3]},t.exactEquals$1=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]},t.exported=c,t.exported$1=Be,t.extend=mn,t.extend$1=F,t.fillExtrusionHeightLift=Iv,t.filterObject=kr,t.fromMat4=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[4],a[4]=n[5],a[5]=n[6],a[6]=n[8],a[7]=n[9],a[8]=n[10],a},t.fromQuat=function(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],A=u+u,R=p+p,H=v+v,j=u*A,ee=p*A,se=p*R,ce=v*A,ve=v*R,be=v*H,Ae=E*A,$e=E*R,dt=E*H;return a[0]=1-se-be,a[1]=ee+dt,a[2]=ce-$e,a[3]=0,a[4]=ee-dt,a[5]=1-j-be,a[6]=ve+Ae,a[7]=0,a[8]=ce+$e,a[9]=ve-Ae,a[10]=1-j-se,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},t.fromRotation=function(a,n){var u=Math.sin(n),p=Math.cos(n);return a[0]=p,a[1]=u,a[2]=0,a[3]=-u,a[4]=p,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},t.fromScaling=Hh,t.furthestTileCorner=function(a){const n=Math.round((a+45+360)%360/90)%4;return qt[n]},t.getAABBPointSquareDist=function(a,n,u){let p=0;for(let v=0;v<2;++v){const E=u?u[v]:0;a[v]>E&&(p+=(a[v]-E)*(a[v]-E)),n[v]<E&&(p+=(E-n[v])*(E-n[v]))}return p},t.getAnchorAlignment=Lg,t.getAnchorJustification=f_,t.getBounds=function(a){let n=1/0,u=1/0,p=-1/0,v=-1/0;for(const E of a)n=Math.min(n,E.x),u=Math.min(u,E.y),p=Math.max(p,E.x),v=Math.max(v,E.y);return{min:new at(n,u),max:new at(p,v)}},t.getColumn=gn,t.getDefaultExportFromCjs=vt,t.getGridMatrix=function(a,n,u,p){const v=n.getNorth(),E=n.getSouth(),A=n.getWest(),R=n.getEast(),H=1<<a.z,j=R-A,ee=v-E,se=j/64,ce=-ee/Gl[u],ve=[0,se,0,ce,0,0,v,A,0];if(a.z>0){const be=180/p;$c(ve,ve,[be/j+1,0,0,0,be/ee+1,0,-.5*be/se,.5*be/ce,1])}return ve[2]=H,ve[5]=a.x,ve[8]=a.y,ve},t.getImage=ut,t.getJSON=function(a,n){return hr(mn(a,{type:"json"}),n)},t.getLatitudinalLod=function(a){const n=Fo-5;a=_i(a,-n,n)/n*90;const u=Math.pow(Math.abs(Math.sin(jt(a))),3);return Math.round(u*(Gl.length-1))},t.getMapSessionAPI=pi,t.getPerformanceMeasurement=Tt,t.getProjection=b_,t.getRTLTextPluginStatus=B,t.getReferrer=gr,t.getTilePoint=function(a,{x:n,y:u},p=0){return new at(((n-p)*a.scale-a.x)*hn,(u*a.scale-a.y)*hn)},t.getTileVec3=function(a,n,u=0){return qc(((n.x-u)*a.scale-a.x)*hn,(n.y*a.scale-a.y)*hn,lh(n.z,n.y))},t.getVideo=function(a,n){const u=V.document.createElement("video");u.muted=!0,u.onloadstart=function(){n(null,u)};for(let p=0;p<a.length;p++){const v=V.document.createElement("source");$r(a[p])||(u.crossOrigin="Anonymous"),v.src=a[p],u.appendChild(v)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(a){const n=[0,0,0],u=Ko(new Float64Array(16));return Ju(u,a.pixelMatrix,a.globeMatrix),Zs(n,n,u),new at(n[0],n[1])},t.globeDenormalizeECEF=Pp,t.globeECEFOrigin=function(a,n){const u=[0,0,0];return Zs(u,u,oh(Lc(n.canonical))),Zs(u,u,a),u},t.globeMetersToEcef=Ul,t.globeNormalizeECEF=oh,t.globePixelsToTileUnits=function(a,n){return hn/(512*Math.pow(2,a))*rd(Lc(n))},t.globePoleMatrixForTile=function(a,n,u){const p=Ko(new Float64Array(16)),v=(n/(1<<a)-.5)*Math.PI*2;return Qu(p,u.globeMatrix,v),Float32Array.from(p)},t.globeTileBounds=Lc,t.globeTiltAtLngLat=$h,t.globeToMercatorTransition=Iu,t.globeUseCustomAntiAliasing=function(a,n,u){const p=Iu(u.zoom),v=a.style.map._antialias,E=!!n.extStandardDerivatives,A=n.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return 0===p&&!v&&!A&&E},t.identity=Ko,t.identity$1=vs,t.invert=bd,t.isFullscreen=function(){return!!V.document.fullscreenElement||!!V.document.webkitFullscreenElement},t.isLngLatBehindGlobe=zp,t.isMapAuthenticated=function(a){return Pi.has(a)},t.isMapboxURL=zt,t.isSafariWithAntialiasingBug=function(a){const n=a.navigator?a.navigator.userAgent:null;return!!tn(a)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Jo,t.latLngToECEF=$l,t.len=Yf,t.length=Ga,t.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},t.lngFromMercatorX=Da,t.loadVectorTile=G_,t.makeRequest=hr,t.mapValue=function(a,n,u,p,v){return _i((a-n)/(u-n)*(v-p)+p,p,v)},t.mercatorScale=Kf,t.mercatorXfromLng=Oc,t.mercatorYfromLat=Pc,t.mercatorZfromAltitude=Xl,t.mul=Zc,t.mul$1=og,t.multiply=Ju,t.multiply$1=$c,t.multiply$2=Vh,t.nextPowerOfTwo=on,t.normalize=ma,t.normalize$1=eu,t.normalize$2=Dc,t.number=Or,t.ortho=function(a,n,u,p,v,E,A){var R=1/(n-u),H=1/(p-v),j=1/(E-A);return a[0]=-2*R,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*H,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(n+u)*R,a[13]=(v+p)*H,a[14]=(A+E)*j,a[15]=1,a},t.pbf=Hv,t.perspective=function(a,n,u,p,v){var E,A=1/Math.tan(n/2);return a[0]=A/u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=A,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,null!=v&&v!==1/0?(a[10]=(v+p)*(E=1/(p-v)),a[14]=2*v*p*E):(a[10]=-1,a[14]=-2*p),a},t.pick=function(a,n){const u={};for(let p=0;p<n.length;p++){const v=n[p];v in a&&(u[v]=a[v])}return u},t.plugin=K,t.pointGeometry=ni,t.polesInViewport=function(a){const n=Ko(new Float64Array(16));Ju(n,a.pixelMatrix,a.globeMatrix);const u=[0,jl,0],p=[0,al,0];return Zs(u,u,n),Zs(p,p,n),[u[0]>0&&u[0]<=a.width&&u[1]>0&&u[1]<=a.height&&!zp(a,new us(a.center.lat,90)),p[0]>0&&p[0]<=a.width&&p[1]>0&&p[1]<=a.height&&!zp(a,new us(a.center.lat,-90))]},t.polygonContainsPoint=iu,t.polygonIntersectsBox=ch,t.polygonIntersectsPolygon=fo,t.polygonizeBounds=function(a,n,u=0,p=!0){const v=new at(u,u),E=a.sub(v),A=n.add(v),R=[E,new at(A.x,E.y),A,new at(E.x,A.y)];return p&&R.push(E.clone()),R},t.posAttributes=eh,t.postMapLoadEvent=He,t.postPerformanceEvent=Yt,t.postTurnstileEvent=Xe,t.potpack=Mg,t.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},t.radToDeg=ht,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(a){return a({pluginStatus:C,pluginURL:d}),P.on("pluginStateChange",a),a},t.removeAuthState=function(a){Pi.delete(a)},t.renderColorRamp=pc,t.resample=Bp,t.rotateX=Ai,t.rotateX$1=Vf,t.rotateY=Qu,t.rotateY$1=Gf,t.rotateZ=function(a,n,u){var p=Math.sin(u),v=Math.cos(u),E=n[0],A=n[1],R=n[2],H=n[3],j=n[4],ee=n[5],se=n[6],ce=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=E*v+j*p,a[1]=A*v+ee*p,a[2]=R*v+se*p,a[3]=H*v+ce*p,a[4]=j*v-E*p,a[5]=ee*v-A*p,a[6]=se*v-R*p,a[7]=ce*v-H*p,a},t.rotateZ$1=function(a,n,u){u*=.5;var p=n[0],v=n[1],E=n[2],A=n[3],R=Math.sin(u),H=Math.cos(u);return a[0]=p*H+v*R,a[1]=v*H-p*R,a[2]=E*H+A*R,a[3]=A*H-E*R,a},t.scale=Tl,t.scale$1=Hf,t.scale$2=rl,t.scaleAndAdd=Jc,t.set=function(a,n,u,p){return a[0]=n,a[1]=u,a[2]=p,a},t.setCacheLimits=function(a,n){Dr=a,Ir=n},t.setColumn=function(a,n,u){a[4*n+0]=u[0],a[4*n+1]=u[1],a[4*n+2]=u[2],a[4*n+3]=u[3]},t.setRTLTextPlugin=function(a,n,u=!1){if(C===Mc||C===$d||C===Xd)throw new Error("setRTLTextPlugin cannot be called multiple times.");d=c.resolveURL(a),C=Mc,wu=n,T(),u||X()},t.smoothstep=Ci,t.spec=I,t.squaredLength=function(a){var n=a[0],u=a[1],p=a[2];return n*n+u*u+p*p},t.storeAuthState=function(a,n){n?Pi.add(a):Pi.delete(a)},t.sub=ol,t.subtract=ed,t.symbolSize=Nv,t.tileAABB=function(a,n,u,p,v,E,A,R,H){if("globe"===H.name)return function ih(a,n,u){const p=n/a.worldSize,v=a.globeMatrix;if(u.z<=1){const hi=Lc(u).getCorners();return Xf(hi,v,p),Aa.fromPoints(hi)}const E=nh(u),A=rh(E);Xf(A,v,p);const R=Number.MAX_VALUE,H=[-R,-R,-R],j=[R,R,R];if(E.contains(a.center)){for(const rn of A)fa(j,j,rn),Du(H,H,rn);H[2]=0;const hi=a.point,Li=[hi.x*p,hi.y*p,0];return fa(j,j,Li),Du(H,H,Li),new Aa(j,H)}const ee=[v[12]*p,v[13]*p,v[14]*p],se=E.getCenter(),ce=_i(a.center.lat,-Fo,Fo),ve=_i(se.lat,-Fo,Fo),be=Oc(a.center.lng),Ae=Pc(ce);let $e=be-Oc(se.lng);const dt=Ae-Pc(ve);$e>.5?$e-=1:$e<-.5&&($e+=1);let Ot=0;Math.abs($e)>Math.abs(dt)?Ot=$e>=0?1:3:(Ot=dt>=0?0:2,Jc(ee,ee,[v[4]*p,v[5]*p,v[6]*p],-Math.sin(jt(dt>=0?E.getSouth():E.getNorth()))*Ic));const ct=A[Ot],At=A[(Ot+1)%4],Nt=new Wf(ct,At,ee),Bt=[th(Nt,0)||ct[0],th(Nt,1)||ct[1],th(Nt,2)||ct[2]],bi=Iu(a.zoom);if(bi>0){const hi=function({x:rn,y:Si,z:Ni},Yi,Zi,an,Di){const bn=1/(1<<Ni);let On=rn*bn,Cn=On+bn,_r=Si*bn,ln=_r+bn,jn=0;const yr=(On+Cn)/2-an;return yr>.5?jn=-1:yr<-.5&&(jn=1),On=((On+jn)*Yi-(an*=Yi))*Zi+an,Cn=((Cn+jn)*Yi-an)*Zi+an,_r=(_r*Yi-(Di*=Yi))*Zi+Di,ln=(ln*Yi-Di)*Zi+Di,[[On,ln,0],[Cn,ln,0],[Cn,_r,0],[On,_r,0]]}(u,n,a._pixelsPerMercatorPixel,be,Ae);for(let rn=0;rn<A.length;rn++)Wl(A[rn],hi[rn],bi);const Li=Kc([],hi[Ot],hi[(Ot+1)%4]);rl(Li,Li,.5),Wl(Bt,Li,bi)}for(const hi of A)fa(j,j,hi),Du(H,H,hi);return j[2]=Math.min(ct[2],At[2]),fa(j,j,Bt),Du(H,H,Bt),new Aa(j,H)}(a,n,new tf(u,p,v));const j=Eh({z:u,x:p,y:v},H);return new Aa([(E+j.x/j.scale)*n,n*(j.y/j.scale),A],[(E+j.x2/j.scale)*n,n*(j.y2/j.scale),R])},t.tileCornersToBounds=nh,t.tileTransform=Eh,t.transformMat3=function(a,n,u){var p=n[0],v=n[1],E=n[2];return a[0]=p*u[0]+v*u[3]+E*u[6],a[1]=p*u[1]+v*u[4]+E*u[7],a[2]=p*u[2]+v*u[5]+E*u[8],a},t.transformMat4=Zs,t.transformMat4$1=td,t.transformQuat=Nf,t.transitionTileAABBinECEF=$f,t.translate=Au,t.transpose=function(a,n){if(a===n){var u=n[1],p=n[2],v=n[5];a[1]=n[3],a[2]=n[6],a[3]=u,a[5]=n[7],a[6]=p,a[7]=v}else a[0]=n[0],a[1]=n[3],a[2]=n[6],a[3]=n[1],a[4]=n[4],a[5]=n[7],a[6]=n[2],a[7]=n[5],a[8]=n[8];return a},t.triggerPluginCompletionEvent=g,t.uniqueId=ei,t.updateGlobeVertexNormal=function(a,n,u,p,v){const E=5*n+2;a.float32[E+0]=u,a.float32[E+1]=p,a.float32[E+2]=v},t.validateCustomStyleLayer=function(a){const n=[],u=a.id;return void 0===u&&n.push({message:`layers.${u}: missing required property "id"`}),void 0===a.render&&n.push({message:`layers.${u}: missing required method "render"`}),a.renderingMode&&"2d"!==a.renderingMode&&"3d"!==a.renderingMode&&n.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),n},t.validateFilter=a=>il(kc(a)),t.validateFog=a=>il(Fr(a)),t.validateLayer=a=>il(J(a)),t.validateLight=a=>il(In(a)),t.validateSource=a=>il(Ft(a)),t.validateStyle=Gd,t.validateTerrain=a=>il(Ar(a)),t.values=xn,t.vectorTile=ep,t.version=Oe,t.warnOnce=wn,t.window=V,t.wrap=Fi}),pn(0,function(t){function V(Ct){if("number"==typeof Ct||"boolean"==typeof Ct||"string"==typeof Ct||null==Ct)return JSON.stringify(Ct);if(Array.isArray(Ct)){let Ne="[";for(const ut of Ct)Ne+=`${V(ut)},`;return`${Ne}]`}let Ie="{";for(const Ne of Object.keys(Ct).sort())Ie+=`${Ne}:${V(Ct[Ne])},`;return`${Ie}}`}function Oe(Ct){let Ie="";for(const Ne of t.refProperties)Ie+=`/${V(Ct[Ne])}`;return Ie}class Me{constructor(Ie){this.keyCache={},Ie&&this.replace(Ie)}replace(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])}update(Ie,Ne){for(const lt of Ie)this._layerConfigs[lt.id]=lt,(this._layers[lt.id]=t.createStyleLayer(lt)).compileFilter(),this.keyCache[lt.id]&&delete this.keyCache[lt.id];for(const lt of Ne)delete this.keyCache[lt],delete this._layerConfigs[lt],delete this._layers[lt];this.familiesBySource={};const ut=function(lt,zt){const Kt={};for(let pt=0;pt<lt.length;pt++){const ui=zt&&zt[lt[pt].id]||Oe(lt[pt]);zt&&(zt[lt[pt].id]=ui);let Hi=Kt[ui];Hi||(Hi=Kt[ui]=[]),Hi.push(lt[pt])}const Jt=[];for(const pt in Kt)Jt.push(Kt[pt]);return Jt}(t.values(this._layerConfigs),this.keyCache);for(const lt of ut){const zt=lt.map(Ui=>this._layers[Ui.id]),Kt=zt[0];if("none"===Kt.visibility)continue;const Jt=Kt.source||"";let pt=this.familiesBySource[Jt];pt||(pt=this.familiesBySource[Jt]={});const ui=Kt.sourceLayer||"_geojsonTileLayer";let Hi=pt[ui];Hi||(Hi=pt[ui]=[]),Hi.push(zt)}}}class De{loadTile(Ie,Ne){const{uid:ut,encoding:lt,rawImageData:zt,padding:Kt,buildQuadTree:Jt}=Ie,pt=t.window.ImageBitmap&&zt instanceof t.window.ImageBitmap?this.getImageData(zt,Kt):zt;Ne(null,new t.DEMData(ut,pt,lt,Kt<1,Jt))}getImageData(Ie,Ne){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);const ut=this.offscreenCanvasContext.getImageData(-Ne,-Ne,Ie.width+2*Ne,Ie.height+2*Ne);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ut}}function Be(Ct,Ie){if(0!==Ct.length){Ge(Ct[0],Ie);for(var Ne=1;Ne<Ct.length;Ne++)Ge(Ct[Ne],!Ie)}}function Ge(Ct,Ie){for(var Ne=0,ut=0,lt=0,zt=Ct.length,Kt=zt-1;lt<zt;Kt=lt++){var Jt=(Ct[lt][0]-Ct[Kt][0])*(Ct[Kt][1]+Ct[lt][1]),pt=Ne+Jt;ut+=Math.abs(Ne)>=Math.abs(Jt)?Ne-pt+Jt:Jt-pt+Ne,Ne=pt}Ne+ut>=0!=!!Ie&&Ct.reverse()}var Je=t.getDefaultExportFromCjs(function Ct(Ie,Ne){var ut,lt=Ie&&Ie.type;if("FeatureCollection"===lt)for(ut=0;ut<Ie.features.length;ut++)Ct(Ie.features[ut],Ne);else if("GeometryCollection"===lt)for(ut=0;ut<Ie.geometries.length;ut++)Ct(Ie.geometries[ut],Ne);else if("Feature"===lt)Ct(Ie.geometry,Ne);else if("Polygon"===lt)Be(Ie.coordinates,Ne);else if("MultiPolygon"===lt)for(ut=0;ut<Ie.coordinates.length;ut++)Be(Ie.coordinates[ut],Ne);return Ie});const nt=t.VectorTileFeature.prototype.toGeoJSON;var mt={exports:{}},Pt=t.pointGeometry,ot=t.vectorTile.VectorTileFeature,vt=wt;function wt(Ct,Ie){this.options=Ie||{},this.features=Ct,this.length=Ct.length}function ai(Ct,Ie){this.id="number"==typeof Ct.id?Ct.id:void 0,this.type=Ct.type,this.rawGeometry=1===Ct.type?[Ct.geometry]:Ct.geometry,this.properties=Ct.tags,this.extent=Ie||4096}wt.prototype.feature=function(Ct){return new ai(this.features[Ct],this.options.extent)},ai.prototype.loadGeometry=function(){var Ct=this.rawGeometry;this.geometry=[];for(var Ie=0;Ie<Ct.length;Ie++){for(var Ne=Ct[Ie],ut=[],lt=0;lt<Ne.length;lt++)ut.push(new Pt(Ne[lt][0],Ne[lt][1]));this.geometry.push(ut)}return this.geometry},ai.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ct=this.geometry,Ie=1/0,Ne=-1/0,ut=1/0,lt=-1/0,zt=0;zt<Ct.length;zt++)for(var Kt=Ct[zt],Jt=0;Jt<Kt.length;Jt++){var pt=Kt[Jt];Ie=Math.min(Ie,pt.x),Ne=Math.max(Ne,pt.x),ut=Math.min(ut,pt.y),lt=Math.max(lt,pt.y)}return[Ie,ut,Ne,lt]},ai.prototype.toGeoJSON=ot.prototype.toGeoJSON;var We=t.pbf,ni=vt;function li(Ct){var Ie=new We;return function(Ne,ut){for(var lt in Ne.layers)ut.writeMessage(3,at,Ne.layers[lt])}(Ct,Ie),Ie.finish()}function at(Ct,Ie){var Ne;Ie.writeVarintField(15,Ct.version||1),Ie.writeStringField(1,Ct.name||""),Ie.writeVarintField(5,Ct.extent||4096);var ut={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<Ct.length;Ne++)ut.feature=Ct.feature(Ne),Ie.writeMessage(2,si,ut);var lt=ut.keys;for(Ne=0;Ne<lt.length;Ne++)Ie.writeStringField(3,lt[Ne]);var zt=ut.values;for(Ne=0;Ne<zt.length;Ne++)Ie.writeMessage(4,ri,zt[Ne])}function si(Ct,Ie){var Ne=Ct.feature;void 0!==Ne.id&&Ie.writeVarintField(1,Ne.id),Ie.writeMessage(2,Xt,Ct),Ie.writeVarintField(3,Ne.type),Ie.writeMessage(4,qt,Ne)}function Xt(Ct,Ie){var Ne=Ct.feature,ut=Ct.keys,lt=Ct.values,zt=Ct.keycache,Kt=Ct.valuecache;for(var Jt in Ne.properties){var pt=Ne.properties[Jt],ui=zt[Jt];if(null!==pt){void 0===ui&&(ut.push(Jt),zt[Jt]=ui=ut.length-1),Ie.writeVarint(ui);var Hi=typeof pt;"string"!==Hi&&"boolean"!==Hi&&"number"!==Hi&&(pt=JSON.stringify(pt));var Ui=Hi+":"+pt,di=Kt[Ui];void 0===di&&(lt.push(pt),Kt[Ui]=di=lt.length-1),Ie.writeVarint(di)}}}function jt(Ct,Ie){return(Ie<<3)+(7&Ct)}function ht(Ct){return Ct<<1^Ct>>31}function qt(Ct,Ie){for(var Ne=Ct.loadGeometry(),ut=Ct.type,lt=0,zt=0,Kt=Ne.length,Jt=0;Jt<Kt;Jt++){var pt=Ne[Jt],ui=1;1===ut&&(ui=pt.length),Ie.writeVarint(jt(1,ui));for(var Hi=3===ut?pt.length-1:pt.length,Ui=0;Ui<Hi;Ui++){1===Ui&&1!==ut&&Ie.writeVarint(jt(2,Hi-1));var di=pt[Ui].x-lt,un=pt[Ui].y-zt;Ie.writeVarint(ht(di)),Ie.writeVarint(ht(un)),lt+=di,zt+=un}3===ut&&Ie.writeVarint(jt(7,1))}}function ri(Ct,Ie){var Ne=typeof Ct;"string"===Ne?Ie.writeStringField(1,Ct):"boolean"===Ne?Ie.writeBooleanField(7,Ct):"number"===Ne&&(Ct%1!=0?Ie.writeDoubleField(3,Ct):Ct<0?Ie.writeSVarintField(6,Ct):Ie.writeVarintField(5,Ct))}mt.exports=li,mt.exports.fromVectorTileJs=li,mt.exports.fromGeojsonVt=function(Ct,Ie){Ie=Ie||{};var Ne={};for(var ut in Ct)Ne[ut]=new ni(Ct[ut].features,Ie),Ne[ut].name=ut,Ne[ut].version=Ie.version,Ne[ut].extent=Ie.extent;return li({layers:Ne})},mt.exports.GeoJSONWrapper=ni;var mi=t.getDefaultExportFromCjs(mt.exports);const Vi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ct=>Ct},_i=Math.fround||(Ci=new Float32Array(1),Ct=>(Ci[0]=+Ct,Ci[0]));var Ci;const Fi=3,qi=5,xn=6;class mn{constructor(Ie){this.options=Object.assign(Object.create(Vi),Ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ie){const{log:Ne,minZoom:ut,maxZoom:lt}=this.options;Ne&&console.time("total time");const zt=`prepare ${Ie.length} points`;Ne&&console.time(zt),this.points=Ie;const Kt=[];for(let pt=0;pt<Ie.length;pt++){const ui=Ie[pt];if(!ui.geometry)continue;const[Hi,Ui]=ui.geometry.coordinates,di=_i(Bi(Hi)),un=_i(on(Ui));Kt.push(di,un,1/0,pt,-1,1),this.options.reduce&&Kt.push(0)}let Jt=this.trees[lt+1]=this._createTree(Kt);Ne&&console.timeEnd(zt);for(let pt=lt;pt>=ut;pt--){const ui=+Date.now();Jt=this.trees[pt]=this._createTree(this._cluster(Jt,pt)),Ne&&console.log("z%d: %d clusters in %dms",pt,Jt.numItems,+Date.now()-ui)}return Ne&&console.timeEnd("total time"),this}getClusters(Ie,Ne){let ut=((Ie[0]+180)%360+360)%360-180;const lt=Math.max(-90,Math.min(90,Ie[1]));let zt=180===Ie[2]?180:((Ie[2]+180)%360+360)%360-180;const Kt=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)ut=-180,zt=180;else if(ut>zt){const Ui=this.getClusters([ut,lt,180,Kt],Ne),di=this.getClusters([-180,lt,zt,Kt],Ne);return Ui.concat(di)}const Jt=this.trees[this._limitZoom(Ne)],pt=Jt.range(Bi(ut),on(Kt),Bi(zt),on(lt)),ui=Jt.data,Hi=[];for(const Ui of pt){const di=this.stride*Ui;Hi.push(ui[di+qi]>1?Vn(ui,di,this.clusterProps):this.points[ui[di+Fi]])}return Hi}getChildren(Ie){const Ne=this._getOriginId(Ie),ut=this._getOriginZoom(Ie),lt="No cluster with the specified id.",zt=this.trees[ut];if(!zt)throw new Error(lt);const Kt=zt.data;if(Ne*this.stride>=Kt.length)throw new Error(lt);const Jt=this.options.radius/(this.options.extent*Math.pow(2,ut-1)),pt=zt.within(Kt[Ne*this.stride],Kt[Ne*this.stride+1],Jt),ui=[];for(const Hi of pt){const Ui=Hi*this.stride;Kt[Ui+4]===Ie&&ui.push(Kt[Ui+qi]>1?Vn(Kt,Ui,this.clusterProps):this.points[Kt[Ui+Fi]])}if(0===ui.length)throw new Error(lt);return ui}getLeaves(Ie,Ne,ut){const lt=[];return this._appendLeaves(lt,Ie,Ne=Ne||10,ut=ut||0,0),lt}getTile(Ie,Ne,ut){const lt=this.trees[this._limitZoom(Ie)],zt=Math.pow(2,Ie),{extent:Kt,radius:Jt}=this.options,pt=Jt/Kt,ui=(ut-pt)/zt,Hi=(ut+1+pt)/zt,Ui={features:[]};return this._addTileFeatures(lt.range((Ne-pt)/zt,ui,(Ne+1+pt)/zt,Hi),lt.data,Ne,ut,zt,Ui),0===Ne&&this._addTileFeatures(lt.range(1-pt/zt,ui,1,Hi),lt.data,zt,ut,zt,Ui),Ne===zt-1&&this._addTileFeatures(lt.range(0,ui,pt/zt,Hi),lt.data,-1,ut,zt,Ui),Ui.features.length?Ui:null}getClusterExpansionZoom(Ie){let Ne=this._getOriginZoom(Ie)-1;for(;Ne<=this.options.maxZoom;){const ut=this.getChildren(Ie);if(Ne++,1!==ut.length)break;Ie=ut[0].properties.cluster_id}return Ne}_appendLeaves(Ie,Ne,ut,lt,zt){const Kt=this.getChildren(Ne);for(const Jt of Kt){const pt=Jt.properties;if(pt&&pt.cluster?zt+pt.point_count<=lt?zt+=pt.point_count:zt=this._appendLeaves(Ie,pt.cluster_id,ut,lt,zt):zt<lt?zt++:Ie.push(Jt),Ie.length===ut)break}return zt}_createTree(Ie){const Ne=new t.KDBush(Ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ut=0;ut<Ie.length;ut+=this.stride)Ne.add(Ie[ut],Ie[ut+1]);return Ne.finish(),Ne.data=Ie,Ne}_addTileFeatures(Ie,Ne,ut,lt,zt,Kt){for(const Jt of Ie){const pt=Jt*this.stride,ui=Ne[pt+qi]>1;let Hi,Ui,di;if(ui)Hi=ei(Ne,pt,this.clusterProps),Ui=Ne[pt],di=Ne[pt+1];else{const St=this.points[Ne[pt+Fi]];Hi=St.properties;const[qe,Xe]=St.geometry.coordinates;Ui=Bi(qe),di=on(Xe)}const un={type:1,geometry:[[Math.round(this.options.extent*(Ui*zt-ut)),Math.round(this.options.extent*(di*zt-lt))]],tags:Hi};let Et;Et=ui||this.options.generateId?Ne[pt+Fi]:this.points[Ne[pt+Fi]].id,void 0!==Et&&(un.id=Et),Kt.features.push(un)}}_limitZoom(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))}_cluster(Ie,Ne){const{radius:ut,extent:lt,reduce:zt,minPoints:Kt}=this.options,Jt=ut/(lt*Math.pow(2,Ne)),pt=Ie.data,ui=[],Hi=this.stride;for(let Ui=0;Ui<pt.length;Ui+=Hi){if(pt[Ui+2]<=Ne)continue;pt[Ui+2]=Ne;const di=pt[Ui],un=pt[Ui+1],Et=Ie.within(pt[Ui],pt[Ui+1],Jt),St=pt[Ui+qi];let qe=St;for(const Xe of Et){const ze=Xe*Hi;pt[ze+2]>Ne&&(qe+=pt[ze+qi])}if(qe>St&&qe>=Kt){let Xe,ze=di*St,He=un*St,ft=-1;const Yt=((Ui/Hi|0)<<5)+(Ne+1)+this.points.length;for(const xi of Et){const pi=xi*Hi;if(pt[pi+2]<=Ne)continue;pt[pi+2]=Ne;const Pi=pt[pi+qi];ze+=pt[pi]*Pi,He+=pt[pi+1]*Pi,pt[pi+4]=Yt,zt&&(Xe||(Xe=this._map(pt,Ui,!0),ft=this.clusterProps.length,this.clusterProps.push(Xe)),zt(Xe,this._map(pt,pi)))}pt[Ui+4]=Yt,ui.push(ze/qe,He/qe,1/0,Yt,-1,qe),zt&&ui.push(ft)}else{for(let Xe=0;Xe<Hi;Xe++)ui.push(pt[Ui+Xe]);if(qe>1)for(const Xe of Et){const ze=Xe*Hi;if(!(pt[ze+2]<=Ne)){pt[ze+2]=Ne;for(let He=0;He<Hi;He++)ui.push(pt[ze+He])}}}}return ui}_getOriginId(Ie){return Ie-this.points.length>>5}_getOriginZoom(Ie){return(Ie-this.points.length)%32}_map(Ie,Ne,ut){if(Ie[Ne+qi]>1){const Kt=this.clusterProps[Ie[Ne+xn]];return ut?Object.assign({},Kt):Kt}const lt=this.points[Ie[Ne+Fi]].properties,zt=this.options.map(lt);return ut&&zt===lt?Object.assign({},zt):zt}}function Vn(Ct,Ie,Ne){return{type:"Feature",id:Ct[Ie+Fi],properties:ei(Ct,Ie,Ne),geometry:{type:"Point",coordinates:[(ut=Ct[Ie],360*(ut-.5)),Wn(Ct[Ie+1])]}};var ut}function ei(Ct,Ie,Ne){const ut=Ct[Ie+qi],lt=ut>=1e4?`${Math.round(ut/1e3)}k`:ut>=1e3?Math.round(ut/100)/10+"k":ut,zt=Ct[Ie+xn],Kt=-1===zt?{}:Object.assign({},Ne[zt]);return Object.assign(Kt,{cluster:!0,cluster_id:Ct[Ie+Fi],point_count:ut,point_count_abbreviated:lt})}function Bi(Ct){return Ct/360+.5}function on(Ct){const Ie=Math.sin(Ct*Math.PI/180),Ne=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function Wn(Ct){const Ie=(180-360*Ct)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function Nn(Ct,Ie,Ne,ut){for(var lt,zt=ut,Kt=Ne-Ie>>1,Jt=Ne-Ie,pt=Ct[Ie],ui=Ct[Ie+1],Hi=Ct[Ne],Ui=Ct[Ne+1],di=Ie+3;di<Ne;di+=3){var un=An(Ct[di],Ct[di+1],pt,ui,Hi,Ui);if(un>zt)lt=di,zt=un;else if(un===zt){var Et=Math.abs(di-Kt);Et<Jt&&(lt=di,Jt=Et)}}zt>ut&&(lt-Ie>3&&Nn(Ct,Ie,lt,ut),Ct[lt+2]=zt,Ne-lt>3&&Nn(Ct,lt,Ne,ut))}function An(Ct,Ie,Ne,ut,lt,zt){var Kt=lt-Ne,Jt=zt-ut;if(0!==Kt||0!==Jt){var pt=((Ct-Ne)*Kt+(Ie-ut)*Jt)/(Kt*Kt+Jt*Jt);pt>1?(Ne=lt,ut=zt):pt>0&&(Ne+=Kt*pt,ut+=Jt*pt)}return(Kt=Ct-Ne)*Kt+(Jt=Ie-ut)*Jt}function Gi(Ct,Ie,Ne,ut){var lt={id:void 0===Ct?null:Ct,type:Ie,geometry:Ne,tags:ut,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(zt){var Kt=zt.geometry,Jt=zt.type;if("Point"===Jt||"MultiPoint"===Jt||"LineString"===Jt)kr(zt,Kt);else if("Polygon"===Jt||"MultiLineString"===Jt)for(var pt=0;pt<Kt.length;pt++)kr(zt,Kt[pt]);else if("MultiPolygon"===Jt)for(pt=0;pt<Kt.length;pt++)for(var ui=0;ui<Kt[pt].length;ui++)kr(zt,Kt[pt][ui])}(lt),lt}function kr(Ct,Ie){for(var Ne=0;Ne<Ie.length;Ne+=3)Ct.minX=Math.min(Ct.minX,Ie[Ne]),Ct.minY=Math.min(Ct.minY,Ie[Ne+1]),Ct.maxX=Math.max(Ct.maxX,Ie[Ne]),Ct.maxY=Math.max(Ct.maxY,Ie[Ne+1])}function sr(Ct,Ie,Ne,ut){if(Ie.geometry){var lt=Ie.geometry.coordinates,zt=Ie.geometry.type,Kt=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),Jt=[],pt=Ie.id;if(Ne.promoteId?pt=Ie.properties[Ne.promoteId]:Ne.generateId&&(pt=ut||0),"Point"===zt)fr(lt,Jt);else if("MultiPoint"===zt)for(var ui=0;ui<lt.length;ui++)fr(lt[ui],Jt);else if("LineString"===zt)wn(lt,Jt,Kt,!1);else if("MultiLineString"===zt){if(Ne.lineMetrics){for(ui=0;ui<lt.length;ui++)wn(lt[ui],Jt=[],Kt,!1),Ct.push(Gi(pt,"LineString",Jt,Ie.properties));return}en(lt,Jt,Kt,!1)}else if("Polygon"===zt)en(lt,Jt,Kt,!0);else{if("MultiPolygon"!==zt){if("GeometryCollection"===zt){for(ui=0;ui<Ie.geometry.geometries.length;ui++)sr(Ct,{id:pt,geometry:Ie.geometry.geometries[ui],properties:Ie.properties},Ne,ut);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ui=0;ui<lt.length;ui++){var Hi=[];en(lt[ui],Hi,Kt,!0),Jt.push(Hi)}}Ct.push(Gi(pt,zt,Jt,Ie.properties))}}function fr(Ct,Ie){Ie.push(_n(Ct[0])),Ie.push(Xi(Ct[1])),Ie.push(0)}function wn(Ct,Ie,Ne,ut){for(var lt,zt,Kt=0,Jt=0;Jt<Ct.length;Jt++){var pt=_n(Ct[Jt][0]),ui=Xi(Ct[Jt][1]);Ie.push(pt),Ie.push(ui),Ie.push(0),Jt>0&&(Kt+=ut?(lt*ui-pt*zt)/2:Math.sqrt(Math.pow(pt-lt,2)+Math.pow(ui-zt,2))),lt=pt,zt=ui}var Hi=Ie.length-3;Ie[2]=1,Nn(Ie,0,Hi,Ne),Ie[Hi+2]=1,Ie.size=Math.abs(Kt),Ie.start=0,Ie.end=Ie.size}function en(Ct,Ie,Ne,ut){for(var lt=0;lt<Ct.length;lt++){var zt=[];wn(Ct[lt],zt,Ne,ut),Ie.push(zt)}}function _n(Ct){return Ct/360+.5}function Xi(Ct){var Ie=Math.sin(Ct*Math.PI/180),Ne=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function ji(Ct,Ie,Ne,ut,lt,zt,Kt,Jt){if(ut/=Ie,zt>=(Ne/=Ie)&&Kt<ut)return Ct;if(Kt<Ne||zt>=ut)return null;for(var pt=[],ui=0;ui<Ct.length;ui++){var Hi=Ct[ui],Ui=Hi.geometry,di=Hi.type,un=0===lt?Hi.minX:Hi.minY,Et=0===lt?Hi.maxX:Hi.maxY;if(un>=Ne&&Et<ut)pt.push(Hi);else if(!(Et<Ne||un>=ut)){var St=[];if("Point"===di||"MultiPoint"===di)Gn(Ui,St,Ne,ut,lt);else if("LineString"===di)tn(Ui,St,Ne,ut,lt,!1,Jt.lineMetrics);else if("MultiLineString"===di)gn(Ui,St,Ne,ut,lt,!1);else if("Polygon"===di)gn(Ui,St,Ne,ut,lt,!0);else if("MultiPolygon"===di)for(var qe=0;qe<Ui.length;qe++){var Xe=[];gn(Ui[qe],Xe,Ne,ut,lt,!0),Xe.length&&St.push(Xe)}if(St.length){if(Jt.lineMetrics&&"LineString"===di){for(qe=0;qe<St.length;qe++)pt.push(Gi(Hi.id,di,St[qe],Hi.tags));continue}"LineString"!==di&&"MultiLineString"!==di||(1===St.length?(di="LineString",St=St[0]):di="MultiLineString"),"Point"!==di&&"MultiPoint"!==di||(di=3===St.length?"Point":"MultiPoint"),pt.push(Gi(Hi.id,di,St,Hi.tags))}}}return pt.length?pt:null}function Gn(Ct,Ie,Ne,ut,lt){for(var zt=0;zt<Ct.length;zt+=3){var Kt=Ct[zt+lt];Kt>=Ne&&Kt<=ut&&(Ie.push(Ct[zt]),Ie.push(Ct[zt+1]),Ie.push(Ct[zt+2]))}}function tn(Ct,Ie,Ne,ut,lt,zt,Kt){for(var Jt,pt,ui=Ti(Ct),Hi=0===lt?Dr:Ir,Ui=Ct.start,di=0;di<Ct.length-3;di+=3){var un=Ct[di],Et=Ct[di+1],St=Ct[di+2],qe=Ct[di+3],Xe=Ct[di+4],ze=0===lt?un:Et,He=0===lt?qe:Xe,ft=!1;Kt&&(Jt=Math.sqrt(Math.pow(un-qe,2)+Math.pow(Et-Xe,2))),ze<Ne?He>Ne&&(pt=Hi(ui,un,Et,qe,Xe,Ne),Kt&&(ui.start=Ui+Jt*pt)):ze>ut?He<ut&&(pt=Hi(ui,un,Et,qe,Xe,ut),Kt&&(ui.start=Ui+Jt*pt)):Pn(ui,un,Et,St),He<Ne&&ze>=Ne&&(pt=Hi(ui,un,Et,qe,Xe,Ne),ft=!0),He>ut&&ze<=ut&&(pt=Hi(ui,un,Et,qe,Xe,ut),ft=!0),!zt&&ft&&(Kt&&(ui.end=Ui+Jt*pt),Ie.push(ui),ui=Ti(Ct)),Kt&&(Ui+=Jt)}var Yt=Ct.length-3;un=Ct[Yt],Et=Ct[Yt+1],St=Ct[Yt+2],(ze=0===lt?un:Et)>=Ne&&ze<=ut&&Pn(ui,un,Et,St),Yt=ui.length-3,zt&&Yt>=3&&(ui[Yt]!==ui[0]||ui[Yt+1]!==ui[1])&&Pn(ui,ui[0],ui[1],ui[2]),ui.length&&Ie.push(ui)}function Ti(Ct){var Ie=[];return Ie.size=Ct.size,Ie.start=Ct.start,Ie.end=Ct.end,Ie}function gn(Ct,Ie,Ne,ut,lt,zt){for(var Kt=0;Kt<Ct.length;Kt++)tn(Ct[Kt],Ie,Ne,ut,lt,zt,!1)}function Pn(Ct,Ie,Ne,ut){Ct.push(Ie),Ct.push(Ne),Ct.push(ut)}function Dr(Ct,Ie,Ne,ut,lt,zt){var Kt=(zt-Ie)/(ut-Ie);return Ct.push(zt),Ct.push(Ne+(lt-Ne)*Kt),Ct.push(1),Kt}function Ir(Ct,Ie,Ne,ut,lt,zt){var Kt=(zt-Ne)/(lt-Ne);return Ct.push(Ie+(ut-Ie)*Kt),Ct.push(zt),Ct.push(1),Kt}function wr(Ct,Ie){for(var Ne=[],ut=0;ut<Ct.length;ut++){var lt,zt=Ct[ut],Kt=zt.type;if("Point"===Kt||"MultiPoint"===Kt||"LineString"===Kt)lt=pr(zt.geometry,Ie);else if("MultiLineString"===Kt||"Polygon"===Kt){lt=[];for(var Jt=0;Jt<zt.geometry.length;Jt++)lt.push(pr(zt.geometry[Jt],Ie))}else if("MultiPolygon"===Kt)for(lt=[],Jt=0;Jt<zt.geometry.length;Jt++){for(var pt=[],ui=0;ui<zt.geometry[Jt].length;ui++)pt.push(pr(zt.geometry[Jt][ui],Ie));lt.push(pt)}Ne.push(Gi(zt.id,Kt,lt,zt.tags))}return Ne}function pr(Ct,Ie){var Ne=[];Ne.size=Ct.size,void 0!==Ct.start&&(Ne.start=Ct.start,Ne.end=Ct.end);for(var ut=0;ut<Ct.length;ut+=3)Ne.push(Ct[ut]+Ie,Ct[ut+1],Ct[ut+2]);return Ne}function or(Ct,Ie){if(Ct.transformed)return Ct;var Ne,ut,lt,zt=1<<Ct.z,Kt=Ct.x,Jt=Ct.y;for(Ne=0;Ne<Ct.features.length;Ne++){var pt=Ct.features[Ne],ui=pt.geometry,Hi=pt.type;if(pt.geometry=[],1===Hi)for(ut=0;ut<ui.length;ut+=2)pt.geometry.push(Tn(ui[ut],ui[ut+1],Ie,zt,Kt,Jt));else for(ut=0;ut<ui.length;ut++){var Ui=[];for(lt=0;lt<ui[ut].length;lt+=2)Ui.push(Tn(ui[ut][lt],ui[ut][lt+1],Ie,zt,Kt,Jt));pt.geometry.push(Ui)}}return Ct.transformed=!0,Ct}function Tn(Ct,Ie,Ne,ut,lt,zt){return[Math.round(Ne*(Ct*ut-lt)),Math.round(Ne*(Ie*ut-zt))]}function ur(Ct,Ie,Ne,ut,lt){for(var zt=Ie===lt.maxZoom?0:lt.tolerance/((1<<Ie)*lt.extent),Kt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:ut,z:Ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Jt=0;Jt<Ct.length;Jt++){Kt.numFeatures++,Rr(Kt,Ct[Jt],zt,lt);var pt=Ct[Jt].minX,ui=Ct[Jt].minY,Hi=Ct[Jt].maxX,Ui=Ct[Jt].maxY;pt<Kt.minX&&(Kt.minX=pt),ui<Kt.minY&&(Kt.minY=ui),Hi>Kt.maxX&&(Kt.maxX=Hi),Ui>Kt.maxY&&(Kt.maxY=Ui)}return Kt}function Rr(Ct,Ie,Ne,ut){var lt=Ie.geometry,zt=Ie.type,Kt=[];if("Point"===zt||"MultiPoint"===zt)for(var Jt=0;Jt<lt.length;Jt+=3)Kt.push(lt[Jt]),Kt.push(lt[Jt+1]),Ct.numPoints++,Ct.numSimplified++;else if("LineString"===zt)ks(Kt,lt,Ct,Ne,!1,!1);else if("MultiLineString"===zt||"Polygon"===zt)for(Jt=0;Jt<lt.length;Jt++)ks(Kt,lt[Jt],Ct,Ne,"Polygon"===zt,0===Jt);else if("MultiPolygon"===zt)for(var pt=0;pt<lt.length;pt++){var ui=lt[pt];for(Jt=0;Jt<ui.length;Jt++)ks(Kt,ui[Jt],Ct,Ne,!0,0===Jt)}if(Kt.length){var Hi=Ie.tags||null;if("LineString"===zt&&ut.lineMetrics){for(var Ui in Hi={},Ie.tags)Hi[Ui]=Ie.tags[Ui];Hi.mapbox_clip_start=lt.start/lt.size,Hi.mapbox_clip_end=lt.end/lt.size}var di={geometry:Kt,type:"Polygon"===zt||"MultiPolygon"===zt?3:"LineString"===zt||"MultiLineString"===zt?2:1,tags:Hi};null!==Ie.id&&(di.id=Ie.id),Ct.features.push(di)}}function ks(Ct,Ie,Ne,ut,lt,zt){var Kt=ut*ut;if(ut>0&&Ie.size<(lt?Kt:ut))Ne.numPoints+=Ie.length/3;else{for(var Jt=[],pt=0;pt<Ie.length;pt+=3)(0===ut||Ie[pt+2]>Kt)&&(Ne.numSimplified++,Jt.push(Ie[pt]),Jt.push(Ie[pt+1])),Ne.numPoints++;lt&&function(ui,Hi){for(var Ui=0,di=0,un=ui.length,Et=un-2;di<un;Et=di,di+=2)Ui+=(ui[di]-ui[Et])*(ui[di+1]+ui[Et+1]);if(Ui>0===Hi)for(di=0,un=ui.length;di<un/2;di+=2){var St=ui[di],qe=ui[di+1];ui[di]=ui[un-2-di],ui[di+1]=ui[un-1-di],ui[un-2-di]=St,ui[un-1-di]=qe}}(Jt,zt),Ct.push(Jt)}}function er(Ct,Ie){var Ne=(Ie=this.options=function(lt,zt){for(var Kt in zt)lt[Kt]=zt[Kt];return lt}(Object.create(this.options),Ie)).debug;if(Ne&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var lt,zt,Kt,Jt,pt,ui,ut=function(lt,zt){var Kt=[];if("FeatureCollection"===lt.type)for(var Jt=0;Jt<lt.features.length;Jt++)sr(Kt,lt.features[Jt],zt,Jt);else sr(Kt,"Feature"===lt.type?lt:{geometry:lt},zt);return Kt}(Ct,Ie);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Jt=lt=ut,pt=ji(lt,1,-1-(Kt=(zt=Ie).buffer/zt.extent),Kt,0,-1,2,zt),ui=ji(lt,1,1-Kt,2+Kt,0,-1,2,zt),(pt||ui)&&(Jt=ji(lt,1,-Kt,1+Kt,0,-1,2,zt)||[],pt&&(Jt=wr(pt,1).concat(Jt)),ui&&(Jt=Jt.concat(wr(ui,-1)))),(ut=Jt).length&&this.splitTile(ut,0,0,0),Ne&&(ut.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gr(Ct,Ie,Ne){return 32*((1<<Ct)*Ne+Ie)+Ct}function hr(Ct,Ie){const Ne=Ct.tileID.canonical;if(!this._geoJSONIndex)return Ie(null,null);const ut=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!ut)return Ie(null,null);const lt=new class{constructor(Kt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Kt.length,this._features=Kt}feature(Kt){return new class{constructor(Jt){this._feature=Jt,this.extent=t.EXTENT,this.type=Jt.type,this.properties=Jt.tags,"id"in Jt&&!isNaN(Jt.id)&&(this.id=parseInt(Jt.id,10))}loadGeometry(){if(1===this._feature.type){const Jt=[];for(const pt of this._feature.geometry)Jt.push([new t.Point(pt[0],pt[1])]);return Jt}{const Jt=[];for(const pt of this._feature.geometry){const ui=[];for(const Hi of pt)ui.push(new t.Point(Hi[0],Hi[1]));Jt.push(ui)}return Jt}}toGeoJSON(Jt,pt,ui){return nt.call(this,Jt,pt,ui)}}(this._features[Kt])}}(ut.features);let zt=mi(lt);0===zt.byteOffset&&zt.byteLength===zt.buffer.byteLength||(zt=new Uint8Array(zt)),Ie(null,{vectorTile:lt,rawData:zt.buffer})}er.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},er.prototype.splitTile=function(Ct,Ie,Ne,ut,lt,zt,Kt){for(var Jt=[Ct,Ie,Ne,ut],pt=this.options,ui=pt.debug;Jt.length;){ut=Jt.pop(),Ne=Jt.pop(),Ie=Jt.pop(),Ct=Jt.pop();var Hi=1<<Ie,Ui=gr(Ie,Ne,ut),di=this.tiles[Ui];if(!di&&(ui>1&&console.time("creation"),di=this.tiles[Ui]=ur(Ct,Ie,Ne,ut,pt),this.tileCoords.push({z:Ie,x:Ne,y:ut}),ui)){ui>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,Ne,ut,di.numFeatures,di.numPoints,di.numSimplified),console.timeEnd("creation"));var un="z"+Ie;this.stats[un]=(this.stats[un]||0)+1,this.total++}if(di.source=Ct,lt){if(Ie===pt.maxZoom||Ie===lt)continue;var Et=1<<lt-Ie;if(Ne!==Math.floor(zt/Et)||ut!==Math.floor(Kt/Et))continue}else if(Ie===pt.indexMaxZoom||di.numPoints<=pt.indexMaxPoints)continue;if(di.source=null,0!==Ct.length){ui>1&&console.time("clipping");var St,qe,Xe,ze,He,ft,Yt=.5*pt.buffer/pt.extent,xi=.5-Yt,pi=.5+Yt,Pi=1+Yt;St=qe=Xe=ze=null,He=ji(Ct,Hi,Ne-Yt,Ne+pi,0,di.minX,di.maxX,pt),ft=ji(Ct,Hi,Ne+xi,Ne+Pi,0,di.minX,di.maxX,pt),Ct=null,He&&(St=ji(He,Hi,ut-Yt,ut+pi,1,di.minY,di.maxY,pt),qe=ji(He,Hi,ut+xi,ut+Pi,1,di.minY,di.maxY,pt),He=null),ft&&(Xe=ji(ft,Hi,ut-Yt,ut+pi,1,di.minY,di.maxY,pt),ze=ji(ft,Hi,ut+xi,ut+Pi,1,di.minY,di.maxY,pt),ft=null),ui>1&&console.timeEnd("clipping"),Jt.push(St||[],Ie+1,2*Ne,2*ut),Jt.push(qe||[],Ie+1,2*Ne,2*ut+1),Jt.push(Xe||[],Ie+1,2*Ne+1,2*ut),Jt.push(ze||[],Ie+1,2*Ne+1,2*ut+1)}}},er.prototype.getTile=function(Ct,Ie,Ne){var ut=this.options,lt=ut.extent,zt=ut.debug;if(Ct<0||Ct>24)return null;var Kt=1<<Ct,Jt=gr(Ct,Ie=(Ie%Kt+Kt)%Kt,Ne);if(this.tiles[Jt])return or(this.tiles[Jt],lt);zt>1&&console.log("drilling down to z%d-%d-%d",Ct,Ie,Ne);for(var pt,ui=Ct,Hi=Ie,Ui=Ne;!pt&&ui>0;)ui--,Hi=Math.floor(Hi/2),Ui=Math.floor(Ui/2),pt=this.tiles[gr(ui,Hi,Ui)];return pt&&pt.source?(zt>1&&console.log("found parent tile z%d-%d-%d",ui,Hi,Ui),zt>1&&console.time("drilling down"),this.splitTile(pt.source,ui,Hi,Ui,Ct,Ie,Ne),zt>1&&console.timeEnd("drilling down"),this.tiles[Jt]?or(this.tiles[Jt],lt):null):null};class Cr extends t.VectorTileWorkerSource{constructor(Ie,Ne,ut,lt,zt){super(Ie,Ne,ut,lt,hr),zt&&(this.loadGeoJSON=zt)}loadData(Ie,Ne){const ut=Ie&&Ie.request,lt=ut&&ut.collectResourceTiming;this.loadGeoJSON(Ie,(zt,Kt)=>{if(zt||!Kt)return Ne(zt);if("object"!=typeof Kt)return Ne(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));{Je(Kt,!0);try{if(Ie.filter){const pt=t.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===pt.result)throw new Error(pt.value.map(Hi=>`${Hi.key}: ${Hi.message}`).join(", "));Kt={type:"FeatureCollection",features:Kt.features.filter(Hi=>pt.value.evaluate({zoom:0},Hi))}}this._geoJSONIndex=Ie.cluster?new mn(function({superclusterOptions:pt,clusterProperties:ui}){if(!ui||!pt)return pt;const Hi={},Ui={},di={accumulated:null,zoom:0},un={properties:null},Et=Object.keys(ui);for(const St of Et){const[qe,Xe]=ui[St],ze=t.createExpression(Xe),He=t.createExpression("string"==typeof qe?[qe,["accumulated"],["get",St]]:qe);Hi[St]=ze.value,Ui[St]=He.value}return pt.map=St=>{un.properties=St;const qe={};for(const Xe of Et)qe[Xe]=Hi[Xe].evaluate(di,un);return qe},pt.reduce=(St,qe)=>{un.properties=qe;for(const Xe of Et)di.accumulated=St[Xe],St[Xe]=Ui[Xe].evaluate(di,un)},pt}(Ie)).load(Kt.features):new er(pt=Kt,Ie.geojsonVtOptions)}catch(pt){return Ne(pt)}this.loaded={};const Jt={};if(lt){const pt=t.getPerformanceMeasurement(ut);pt&&(Jt.resourceTiming={},Jt.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(pt)))}Ne(null,Jt)}var pt})}reloadTile(Ie,Ne){const ut=this.loaded;return ut&&ut[Ie.uid]?super.reloadTile(Ie,Ne):this.loadTile(Ie,Ne)}loadGeoJSON(Ie,Ne){if(Ie.request)t.getJSON(Ie.request,Ne);else{if("string"!=typeof Ie.data)return Ne(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));try{return Ne(null,JSON.parse(Ie.data))}catch{return Ne(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ie,Ne){try{Ne(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(ut){Ne(ut)}}getClusterChildren(Ie,Ne){try{Ne(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(ut){Ne(ut)}}getClusterLeaves(Ie,Ne){try{Ne(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(ut){Ne(ut)}}}class $r{constructor(Ie){this.self=Ie,this.actor=new t.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:Cr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ne,ut)=>{if(this.workerSourceTypes[Ne])throw new Error(`Worker source with name "${Ne}" already registered.`);this.workerSourceTypes[Ne]=ut},this.self.registerRTLTextPlugin=Ne=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Ne.applyArabicShaping,t.plugin.processBidirectionalText=Ne.processBidirectionalText,t.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}}clearCaches(Ie,Ne,ut){delete this.layerIndexes[Ie],delete this.availableImages[Ie],delete this.workerSources[Ie],delete this.demWorkerSources[Ie],ut()}checkIfReady(Ie,Ne,ut){ut()}setReferrer(Ie,Ne){this.referrer=Ne}spriteLoaded(Ie,Ne){this.isSpriteLoaded[Ie]=Ne;for(const ut in this.workerSources[Ie]){const lt=this.workerSources[Ie][ut];for(const zt in lt)lt[zt]instanceof t.VectorTileWorkerSource&&(lt[zt].isSpriteLoaded=Ne,lt[zt].fire(new t.Event("isSpriteLoaded")))}}setImages(Ie,Ne,ut){this.availableImages[Ie]=Ne;for(const lt in this.workerSources[Ie]){const zt=this.workerSources[Ie][lt];for(const Kt in zt)zt[Kt].availableImages=Ne}ut()}enableTerrain(Ie,Ne,ut){this.terrain=Ne,ut()}setProjection(Ie,Ne){this.projections[Ie]=t.getProjection(Ne)}setLayers(Ie,Ne,ut){this.getLayerIndex(Ie).replace(Ne),ut()}updateLayers(Ie,Ne,ut){this.getLayerIndex(Ie).update(Ne.layers,Ne.removedIds),ut()}loadTile(Ie,Ne,ut){const lt=this.enableTerrain?t.extend({enableTerrain:this.terrain},Ne):Ne;lt.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Ne.type,Ne.source).loadTile(lt,ut)}loadDEMTile(Ie,Ne,ut){const lt=this.enableTerrain?t.extend({buildQuadTree:this.terrain},Ne):Ne;this.getDEMWorkerSource(Ie,Ne.source).loadTile(lt,ut)}reloadTile(Ie,Ne,ut){const lt=this.enableTerrain?t.extend({enableTerrain:this.terrain},Ne):Ne;lt.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Ne.type,Ne.source).reloadTile(lt,ut)}abortTile(Ie,Ne,ut){this.getWorkerSource(Ie,Ne.type,Ne.source).abortTile(Ne,ut)}removeTile(Ie,Ne,ut){this.getWorkerSource(Ie,Ne.type,Ne.source).removeTile(Ne,ut)}removeSource(Ie,Ne,ut){if(!this.workerSources[Ie]||!this.workerSources[Ie][Ne.type]||!this.workerSources[Ie][Ne.type][Ne.source])return;const lt=this.workerSources[Ie][Ne.type][Ne.source];delete this.workerSources[Ie][Ne.type][Ne.source],void 0!==lt.removeSource?lt.removeSource(Ne,ut):ut()}loadWorkerSource(Ie,Ne,ut){try{this.self.importScripts(Ne.url),ut()}catch(lt){ut(lt.toString())}}syncRTLPluginState(Ie,Ne,ut){try{t.plugin.setState(Ne);const lt=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=lt){this.self.importScripts(lt);const zt=t.plugin.isParsed();ut(zt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${lt}`),zt)}}catch(lt){ut(lt.toString())}}getAvailableImages(Ie){let Ne=this.availableImages[Ie];return Ne||(Ne=[]),Ne}getLayerIndex(Ie){let Ne=this.layerIndexes[Ie];return Ne||(Ne=this.layerIndexes[Ie]=new Me),Ne}getWorkerSource(Ie,Ne,ut){return this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][Ne]||(this.workerSources[Ie][Ne]={}),this.workerSources[Ie][Ne][ut]||(this.workerSources[Ie][Ne][ut]=new this.workerSourceTypes[Ne]({send:(zt,Kt,Jt,pt,ui,Hi)=>{this.actor.send(zt,Kt,Jt,Ie,ui,Hi)},scheduler:this.actor.scheduler},this.getLayerIndex(Ie),this.getAvailableImages(Ie),this.isSpriteLoaded[Ie])),this.workerSources[Ie][Ne][ut]}getDEMWorkerSource(Ie,Ne){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][Ne]||(this.demWorkerSources[Ie][Ne]=new De),this.demWorkerSources[Ie][Ne]}enforceCacheSizeLimit(Ie,Ne){t.enforceCacheSizeLimit(Ne)}getWorkerPerformanceMetrics(Ie,Ne,ut){ut(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new $r(self)),$r}),pn(0,function(t){function V(C,d){if(Array.isArray(C)){if(!Array.isArray(d)||C.length!==d.length)return!1;for(let g=0;g<C.length;g++)if(!V(C[g],d[g]))return!1;return!0}if("object"==typeof C&&null!==C&&null!==d){if("object"!=typeof d||Object.keys(C).length!==Object.keys(d).length)return!1;for(const g in C)if(!V(C[g],d[g]))return!1;return!0}return C===d}var Oe=Me;function Me(C){return d=C,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,P,B=new Blob([""],{type:"text/javascript"}),X=URL.createObjectURL(B);try{P=new Worker(X),T=!0}catch{T=!1}return P&&P.terminate(),URL.revokeObjectURL(X),T}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var T=document.createElement("canvas");T.width=T.height=1;var P=T.getContext("2d");if(!P)return!1;var B=P.getImageData(0,0,1,1);return B&&B.width===T.width}()||(void 0===De[g=d&&d.failIfMajorPerformanceCaveat]&&(De[g]=function(T){var P,X,K,te,B=(X=T,K=document.createElement("canvas"),(te=Object.create(Me.webGLContextAttributes)).failIfMajorPerformanceCaveat=X,K.getContext("webgl",te)||K.getContext("experimental-webgl",te));if(!B)return!1;try{P=B.createShader(B.VERTEX_SHADER)}catch{return!1}return!(!P||B.isContextLost())&&(B.shaderSource(P,"void main() {}"),B.compileShader(P),!0===B.getShaderParameter(P,B.COMPILE_STATUS))}(g)),!De[g]||document.documentMode));var d,g}var De={};function Be(C,d,g){const T=t.window.document.createElement(C);return void 0!==d&&(T.className=d),g&&g.appendChild(T),T}function Ge(C,d,g){const T=t.window.document.createElementNS("http://www.w3.org/2000/svg",C);for(const P of Object.keys(d))T.setAttributeNS(null,P,d[P]);return g&&g.appendChild(T),T}Me.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Je=t.window.document&&t.window.document.documentElement.style,nt=Je&&void 0!==Je.userSelect?"userSelect":"WebkitUserSelect";let mt;function Pt(){Je&&nt&&(mt=Je[nt],Je[nt]="none")}function ot(){Je&&nt&&(Je[nt]=mt)}function vt(C){C.preventDefault(),C.stopPropagation(),t.window.removeEventListener("click",vt,!0)}function wt(){t.window.addEventListener("click",vt,!0),t.window.setTimeout(()=>{t.window.removeEventListener("click",vt,!0)},0)}function ai(C,d){const g=C.getBoundingClientRect();return li(C,g,d)}function We(C,d){const g=C.getBoundingClientRect(),T=[];for(let P=0;P<d.length;P++)T.push(li(C,g,d[P]));return T}function ni(C){return void 0!==t.window.InstallTrigger&&2===C.button&&C.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:C.button}function li(C,d,g){const T=C.offsetWidth===d.width?1:C.offsetWidth/d.width;return new t.Point((g.clientX-d.left)*T,(g.clientY-d.top)*T)}function at(C,d){var g=d[0],T=d[1],P=d[2],B=d[3],X=g*B-P*T;return X?(C[0]=B*(X=1/X),C[1]=-T*X,C[2]=-P*X,C[3]=g*X,C):null}function si(C){const{userImage:d}=C;return!!(d&&d.render&&d.render())&&(C.data.replace(new Uint8Array(d.data.buffer)),!0)}class Xt extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:g,callback:T}of this.requestors)this._notify(g,T);this.requestors=[]}}hasImage(d){return!!this.getImage(d)}getImage(d){return this.images[d]}addImage(d,g){this._validate(d,g)&&(this.images[d]=g)}_validate(d,g){let T=!0;return this._validateStretch(g.stretchX,g.data&&g.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),T=!1),this._validateStretch(g.stretchY,g.data&&g.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),T=!1),this._validateContent(g.content,g)||(this.fire(new t.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),T=!1),T}_validateStretch(d,g){if(!d)return!0;let T=0;for(const P of d){if(P[0]<T||P[1]<P[0]||g<P[1])return!1;T=P[1]}return!0}_validateContent(d,g){return!(d&&(4!==d.length||d[0]<0||g.data.width<d[0]||d[1]<0||g.data.height<d[1]||d[2]<0||g.data.width<d[2]||d[3]<0||g.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,g){g.version=this.images[d].version+1,this.images[d]=g,this.updatedImages[d]=!0}removeImage(d){const g=this.images[d];delete this.images[d],delete this.patterns[d],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,g){let T=!0;if(!this.isLoaded())for(const P of d)this.images[P]||(T=!1);this.isLoaded()||T?this._notify(d,g):this.requestors.push({ids:d,callback:g})}_notify(d,g){const T={};for(const P of d){this.images[P]||this.fire(new t.Event("styleimagemissing",{id:P}));const B=this.images[P];B?T[P]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!(!B.userImage||!B.userImage.render)}:t.warnOnce(`Image "${P}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,T)}getPixelSize(){const{width:d,height:g}=this.atlasImage;return{width:d,height:g}}getPattern(d){const g=this.patterns[d],T=this.getImage(d);if(!T)return null;if(g&&g.position.version===T.version)return g.position;if(g)g.position.version=T.version;else{const P={w:T.data.width+2,h:T.data.height+2,x:0,y:0},B=new t.ImagePosition(P,T);this.patterns[d]={bin:P,position:B}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const g=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(d,this.atlasImage,g.RGBA),this.atlasTexture&&this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const B in this.patterns)d.push(this.patterns[B].bin);const{w:g,h:T}=t.potpack(d),P=this.atlasImage;P.resize({width:g||1,height:T||1});for(const B in this.patterns){const{bin:X}=this.patterns[B],K=X.x+1,te=X.y+1,he=this.images[B].data,ue=he.width,Ce=he.height;t.RGBAImage.copy(he,P,{x:0,y:0},{x:K,y:te},{width:ue,height:Ce}),t.RGBAImage.copy(he,P,{x:0,y:Ce-1},{x:K,y:te-1},{width:ue,height:1}),t.RGBAImage.copy(he,P,{x:0,y:0},{x:K,y:te+Ce},{width:ue,height:1}),t.RGBAImage.copy(he,P,{x:ue-1,y:0},{x:K-1,y:te},{width:1,height:Ce}),t.RGBAImage.copy(he,P,{x:0,y:0},{x:K+ue,y:te},{width:1,height:Ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const g of d){if(this.callbackDispatchedThisFrame[g])continue;this.callbackDispatchedThisFrame[g]=!0;const T=this.images[g];si(T)&&this.updateImage(g,T)}}}const jt=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(C,d){return function([g,T,P]){const B=t.degToRad(T+90),X=t.degToRad(P);return{x:g*Math.cos(B)*Math.sin(X),y:g*Math.sin(B)*Math.sin(X),z:g*Math.cos(X),azimuthal:T,polar:P}}(C.expression.evaluate(d))}interpolate(C,d,g){return{x:t.number(C.x,d.x,g),y:t.number(C.y,d.y,g),z:t.number(C.z,d.z,g),azimuthal:t.number(C.azimuthal,d.azimuthal,g),polar:t.number(C.polar,d.polar,g)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)});class ht extends t.Evented{constructor(d){super(),this._transitionable=new t.Transitionable(jt),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,g={}){if(!this._validate(t.validateLight,d,g))for(const T in d){const P=d[T];t.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),P):this._transitionable.setValue(T,P)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,g,T){return(!T||!1!==T.validate)&&t.emitValidationErrors(this,d.call(t.validateStyle,t.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const qt=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)});let ri=class extends t.Evented{constructor(C,d){super(),this._transitionable=new t.Transitionable(qt),this.set(C),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=d}get(){return this._transitionable.serialize()}set(C){for(const d in C){const g=C[d];t.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}updateTransitions(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(C){this.properties=this._transitioning.possiblyEvaluate(C)}};function mi(C,d,g,T){const P=t.smoothstep(45,65,g),[B,X]=Vi(C,T),K=t.length(d);let te=1-Math.min(1,Math.exp((K-B)/(X-B)*-6));return te*=te*te,te=Math.min(1,1.00747*te),te*P*C.alpha}function Vi(C,d){const g=.5/Math.tan(.5*d);return[C.range[0]+g,C.range[1]+g]}const _i=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])});class Ci extends t.Evented{constructor(d,g){super(),this._transitionable=new t.Transitionable(_i),this.set(d),this._transitioning=this._transitionable.untransitioned(),this._transform=g}get state(){const d=this._transform,g="globe"===d.projection.name,T=t.globeToMercatorTransition(d.zoom),P=this.properties.get("range"),B=[.5,3];return{range:g?[t.number(B[0],P[0],T),t.number(B[1],P[1],T)]:P,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(d,g={}){if(!this._validate(t.validateFog,d,g)){for(const T of Object.keys(t.spec.fog))d&&void 0===d[T]&&(d[T]=t.spec.fog[T].default);for(const T in d){const P=d[T];t.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),P):this._transitionable.setValue(T,P)}}}getOpacity(d){if(!this._transform.projection.supportsFog)return 0;const g=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,d))*g.a}getOpacityAtLatLng(d,g){return this._transform.projection.supportsFog?function(T,P,B){const X=t.MercatorCoordinate.fromLngLat(P),K=B.elevation?B.elevation.getAtPointOrZero(X):0,te=[X.x,X.y,K];return t.transformMat4(te,te,B.mercatorFogMatrix),mi(T,te,B.pitch,B._fov)}(this.state,d,g):0}getFovAdjustedRange(d){return this._transform.projection.supportsFog?Vi(this.state,d):[0,1]}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,g,T){return(!T||!1!==T.validate)&&t.emitValidationErrors(this,d.call(t.validateStyle,t.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class Fi{constructor(d,g){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const T=this.workerPool.acquire(this.id);for(let P=0;P<T.length;P++){const B=new Fi.Actor(T[P],g,this.id);B.name=`Worker ${P}`,this.actors.push(B)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(d,g,T){t.asyncAll(this.actors,(P,B)=>{P.send(d,g,B)},T=T||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function qi(C,d,g){return d*(t.EXTENT/(C.tileSize*Math.pow(2,g-C.tileID.overscaledZ)))}Fi.Actor=t.Actor;class xn{constructor(d,g,T,P){this.screenBounds=d,this.cameraPoint=g,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=T,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,P)}static createFromScreenPoints(d,g){let T,P;if(d instanceof t.Point||"number"==typeof d[0]){const B=t.Point.convert(d);T=[B],P=g.isPointAboveHorizon(B)}else{const B=t.Point.convert(d[0]),X=t.Point.convert(d[1]);T=[B,X],P=t.polygonizeBounds(B,X).every(K=>g.isPointAboveHorizon(K))}return new xn(T,g.getCameraPoint(),P,g)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(d){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],d)}bufferedCameraGeometry(d){const g=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],P=t.polygonizeBounds(g,T,0,!1);return this.cameraPoint.y>T.y&&(this.cameraPoint.x>g.x&&this.cameraPoint.x<T.x?P.splice(3,0,this.cameraPoint):this.cameraPoint.x>=T.x?P[2]=this.cameraPoint:this.cameraPoint.x<=g.x&&(P[3]=this.cameraPoint)),t.bufferConvexPolygon(P,d)}bufferedCameraGeometryGlobe(d){const g=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],P=t.polygonizeBounds(g,T,d),B=this.cameraPoint.clone();switch(3*((B.y>g.y)+(B.y>T.y))+((B.x>g.x)+(B.x>T.x))){case 0:P[0]=B,P[4]=B.clone();break;case 1:P.splice(1,0,B);break;case 2:P[1]=B;break;case 3:P.splice(4,0,B);break;case 5:P.splice(2,0,B);break;case 6:P[3]=B;break;case 7:P.splice(3,0,B);break;case 8:P[2]=B}return P}containsTile(d,g,T,P=0){const B=d.queryPadding/g._pixelsPerMercatorPixel+1,X=T?this._bufferedCameraMercator(B,g):this._bufferedScreenMercator(B,g);let K=d.tileID.wrap+(X.unwrapped?P:0);const te=X.polygon.map(st=>t.getTilePoint(d.tileTransform,st,K));if(!t.polygonIntersectsBox(te,0,0,t.EXTENT,t.EXTENT))return;K=d.tileID.wrap+(this.screenGeometryMercator.unwrapped?P:0);const he=this.screenGeometryMercator.polygon.map(st=>t.getTileVec3(d.tileTransform,st,K)),ue=he.map(st=>new t.Point(st[0],st[1])),Ce=g.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),Ve=t.getTileVec3(d.tileTransform,Ce,K),Qe=he.map(st=>{const Te=t.sub(st,st,Ve);return t.normalize(Te,Te),new t.Ray(Ve,Te)}),et=qi(d,1,g.zoom)*g._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:ue,tilespaceRays:Qe,bufferedTilespaceGeometry:te,bufferedTilespaceBounds:(tt=t.getBounds(te),tt.min.x=t.clamp(tt.min.x,0,t.EXTENT),tt.min.y=t.clamp(tt.min.y,0,t.EXTENT),tt.max.x=t.clamp(tt.max.x,0,t.EXTENT),tt.max.y=t.clamp(tt.max.y,0,t.EXTENT),tt),tile:d,tileID:d.tileID,pixelToTileUnitsFactor:et};var tt}_bufferedScreenMercator(d,g){const T=ei(d);if(this._screenRaycastCache[T])return this._screenRaycastCache[T];{let P;return P="globe"===g.projection.name?this._projectAndResample(this.bufferedScreenGeometry(d),g):{polygon:this.bufferedScreenGeometry(d).map(B=>g.pointCoordinate3D(B)),unwrapped:!0},this._screenRaycastCache[T]=P,P}}_bufferedCameraMercator(d,g){const T=ei(d);if(this._cameraRaycastCache[T])return this._cameraRaycastCache[T];{let P;return P="globe"===g.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(d),g):{polygon:this.bufferedCameraGeometry(d).map(B=>g.pointCoordinate3D(B)),unwrapped:!0},this._cameraRaycastCache[T]=P,P}}_projectAndResample(d,g){const T=function(B,X){const K=t.multiply([],X.pixelMatrix,X.globeMatrix),te=[0,-t.GLOBE_RADIUS,0,1],he=[0,t.GLOBE_RADIUS,0,1],ue=[0,0,0,1];t.transformMat4$1(te,te,K),t.transformMat4$1(he,he,K),t.transformMat4$1(ue,ue,K);const Ce=new t.Point(te[0]/te[3],te[1]/te[3]),Ve=new t.Point(he[0]/he[3],he[1]/he[3]),Qe=t.polygonContainsPoint(B,Ce)&&te[3]<ue[3],et=t.polygonContainsPoint(B,Ve)&&he[3]<ue[3];if(!Qe&&!et)return null;const tt=function(Ut,ti,Qt){for(let gi=1;gi<Ut.length;gi++){const Ji=Vn(ti.pointCoordinate3D(Ut[gi-1]).x),Zt=Vn(ti.pointCoordinate3D(Ut[gi]).x);if(Qt<0){if(Ji<Zt)return{idx:gi,t:-Ji/(Zt-1-Ji)}}else if(Zt<Ji)return{idx:gi,t:(1-Ji)/(Zt+1-Ji)}}return null}(B,X,Qe?-1:1);if(!tt)return null;const{idx:st,t:Te}=tt;let Ke=st>1?mn(B.slice(0,st),X):[],bt=st<B.length?mn(B.slice(st),X):[];Ke=Ke.map(Ut=>new t.Point(Vn(Ut.x),Ut.y)),bt=bt.map(Ut=>new t.Point(Vn(Ut.x),Ut.y));const xt=[...Ke];0===xt.length&&xt.push(bt[bt.length-1]);const Ht=t.number(xt[xt.length-1].y,(0===bt.length?Ke[0]:bt[0]).y,Te);let Gt;return Gt=Qe?[new t.Point(0,Ht),new t.Point(0,0),new t.Point(1,0),new t.Point(1,Ht)]:[new t.Point(1,Ht),new t.Point(1,1),new t.Point(0,1),new t.Point(0,Ht)],xt.push(...Gt),0===bt.length?xt.push(Ke[0]):xt.push(...bt),{polygon:xt.map(Ut=>new t.MercatorCoordinate(Ut.x,Ut.y)),unwrapped:!1}}(d,g);if(T)return T;const P=function(B,X){let K=!1,te=-1/0,he=0;for(let Ce=0;Ce<B.length-1;Ce++)B[Ce].x>te&&(te=B[Ce].x,he=Ce);for(let Ce=0;Ce<B.length-1;Ce++){const Ve=(he+Ce)%(B.length-1),Qe=B[Ve],et=B[Ve+1];Math.abs(Qe.x-et.x)>.5&&(Qe.x<et.x?(Qe.x+=1,0===Ve&&(B[B.length-1].x+=1)):(et.x+=1,Ve+1===B.length-1&&(B[0].x+=1)),K=!0)}const ue=t.mercatorXfromLng(X.center.lng);return K&&ue<Math.abs(ue-1)&&B.forEach(Ce=>{Ce.x-=1}),{polygon:B,unwrapped:K}}(mn(d,g).map(B=>new t.Point(Vn(B.x),B.y)),g);return{polygon:P.polygon.map(B=>new t.MercatorCoordinate(B.x,B.y)),unwrapped:P.unwrapped}}}function mn(C,d){return t.resample(C,g=>{const T=d.pointCoordinate3D(g);g.x=T.x,g.y=T.y},1/256)}function Vn(C){return C<0?1+C%1:C%1}function ei(C){return 100*C|0}function Bi(C,d,g,T,P){const B=function(X,K){if(X)return P(X);if(K){C.url&&K.tiles&&C.tiles&&delete C.tiles;const te=t.pick(t.extend(K,C),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);K.vector_layers&&(te.vectorLayers=K.vector_layers,te.vectorLayerIds=te.vectorLayers.map(he=>he.id)),te.tiles=d.canonicalizeTileset(te,C.url),P(null,te)}};return C.url?t.getJSON(d.transformRequest(d.normalizeSourceURL(C.url,null,g,T),t.ResourceType.Source),B):t.exported.frame(()=>B(null,C))}class on{constructor(d,g,T){this.bounds=t.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=g||0,this.maxzoom=T||24}validateBounds(d){return Array.isArray(d)&&4===d.length?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const g=Math.pow(2,d.z),T=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*g),P=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*g),B=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*g),X=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*g);return d.x>=T&&d.x<B&&d.y>=P&&d.y<X}}class Wn{constructor(d,g,T){this.context=d;const P=d.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const g=this.context.gl;this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class An{constructor(d,g,T,P){this.length=g.length,this.attributes=T,this.itemSize=g.bytesPerElement,this.dynamicDraw=P,this.context=d;const B=d.gl;this.buffer=B.createBuffer(),d.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){const g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,g){for(let T=0;T<this.attributes.length;T++){const P=g.attributes[this.attributes[T].name];void 0!==P&&d.enableVertexAttribArray(P)}}setVertexAttribPointers(d,g,T){for(let P=0;P<this.attributes.length;P++){const B=this.attributes[P],X=g.attributes[B.name];void 0!==X&&d.vertexAttribPointer(X,B.components,d[Nn[B.type]],!1,this.itemSize,B.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Gi{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class kr extends Gi{getDefault(){return t.Color.transparent}set(d){const g=this.current;(d.r!==g.r||d.g!==g.g||d.b!==g.b||d.a!==g.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class sr extends Gi{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class fr extends Gi{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class wn extends Gi{getDefault(){return[!0,!0,!0,!0]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||d[2]!==g[2]||d[3]!==g[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class en extends Gi{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class _n extends Gi{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class Xi extends Gi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const g=this.current;(d.func!==g.func||d.ref!==g.ref||d.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class ji extends Gi{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||d[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class Gn extends Gi{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=d,this.dirty=!1}}class tn extends Gi{getDefault(){return[0,1]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Ti extends Gi{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=d,this.dirty=!1}}class gn extends Gi{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Pn extends Gi{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.BLEND):g.disable(g.BLEND),this.current=d,this.dirty=!1}}class Dr extends Gi{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Ir extends Gi{getDefault(){return t.Color.transparent}set(d){const g=this.current;(d.r!==g.r||d.g!==g.g||d.b!==g.b||d.a!==g.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class wr extends Gi{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class pr extends Gi{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=d,this.dirty=!1}}class or extends Gi{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class Tn extends Gi{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}let ur,Rr=class extends Gi{getDefault(){return null}set(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)}};class ks extends Gi{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class er extends Gi{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||d[2]!==g[2]||d[3]!==g[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class gr extends Gi{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class hr extends Gi{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class Cr extends Gi{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindTexture(g.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class $r extends Gi{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Ct extends Gi{getDefault(){return null}set(d){const g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Ie extends Gi{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Ne extends Gi{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class ut extends Gi{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class lt extends Gi{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class zt extends Gi{constructor(d,g){super(d),this.context=d,this.parent=g}getDefault(){return null}}class Kt extends zt{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Jt extends zt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,this.attachment(),g.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class pt extends Jt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ui{constructor(d,g,T,P){this.context=d,this.width=g,this.height=T;const B=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new Kt(d,B),P&&(this.depthAttachment=new Jt(d,B))}destroy(){const d=this.context.gl,g=this.colorAttachment.get();if(g&&d.deleteTexture(g),this.depthAttachment){const T=this.depthAttachment.get();T&&d.deleteRenderbuffer(T)}d.deleteFramebuffer(this.framebuffer)}}class Hi{constructor(d,g=!1){if(this.gl=d,this.isWebGL2=g,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),g){const T=d;this.extVertexArrayObject={createVertexArrayOES:T.createVertexArray.bind(d),deleteVertexArrayOES:T.deleteVertexArray.bind(d),bindVertexArrayOES:T.bindVertexArray.bind(d)}}this.clearColor=new kr(this),this.clearDepth=new sr(this),this.clearStencil=new fr(this),this.colorMask=new wn(this),this.depthMask=new en(this),this.stencilMask=new _n(this),this.stencilFunc=new Xi(this),this.stencilOp=new ji(this),this.stencilTest=new Gn(this),this.depthRange=new tn(this),this.depthTest=new Ti(this),this.depthFunc=new gn(this),this.blend=new Pn(this),this.blendFunc=new Dr(this),this.blendColor=new Ir(this),this.blendEquation=new wr(this),this.cullFace=new pr(this),this.cullFaceSide=new or(this),this.frontFace=new Tn(this),this.program=new Rr(this),this.activeTexture=new ks(this),this.viewport=new er(this),this.bindFramebuffer=new gr(this),this.bindRenderbuffer=new hr(this),this.bindTexture=new Cr(this),this.bindVertexBuffer=new $r(this),this.bindElementBuffer=new Ct(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ie(this),this.pixelStoreUnpack=new Ne(this),this.pixelStoreUnpackPremultiplyAlpha=new ut(this),this.pixelStoreUnpackFlipY=new lt(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=d.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=d.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=d.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),g||(this.extTextureHalfFloat=d.getExtension("OES_texture_half_float")),(g||this.extTextureHalfFloat&&d.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=g||d.getExtension("OES_standard_derivatives"),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,g){return new Wn(this,d,g)}createVertexBuffer(d,g,T){return new An(this,d,g,T)}createRenderbuffer(d,g,T){const P=this.gl,B=P.createRenderbuffer();return this.bindRenderbuffer.set(B),P.renderbufferStorage(P.RENDERBUFFER,d,g,T),this.bindRenderbuffer.set(null),B}createFramebuffer(d,g,T){return new ui(this,d,g,T)}clear({color:d,depth:g,stencil:T}){const P=this.gl;let B=0;d&&(B|=P.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),void 0!==g&&(B|=P.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),void 0!==T&&(B|=P.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),P.clear(B)}setCullFace(d){!1===d.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){V(d.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ui extends t.Evented{constructor(d,g,T,P){if(super(),this.id=d,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(g,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(d){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const g=Array.isArray(this.map._language)?this.map._language.join():this.map._language,T=this.map._worldview;this._tileJSONRequest=Bi(this._options,this.map._requestManager,g,T,(P,B)=>{this._tileJSONRequest=null,this._loaded=!0,P?(g&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${g}`),T&&2!==T.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${T}`),this.fire(new t.ErrorEvent(P))):B&&(t.extend(this,B),B.bounds&&(this.tileBounds=new on(B.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(B.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(P)})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}loadTile(d,g){const T=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),P={request:this.map._requestManager.transformRequest(T,t.ResourceType.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:d.isSymbolTile};if(P.request.collectResourceTiming=this._collectResourceTiming,d.actor&&"expired"!==d.state)"loading"===d.state?d.reloadCallback=g:d.request=d.actor.send("reloadTile",P,B.bind(this));else if(d.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)d.request=d.actor.send("loadTile",P,B.bind(this),void 0,!0);else{const X=t.loadVectorTile.call({deduped:this._deduped},P,(K,te)=>{K||!te?B.call(this,K):(P.data={cacheControl:te.cacheControl,expires:te.expires,rawData:te.rawData.slice(0)},d.actor&&d.actor.send("loadTile",P,B.bind(this),void 0,!0))},!0);d.request={cancel:X}}function B(X,K){return delete d.request,d.aborted?g(null):X&&404!==X.status?g(X):(K&&K.resourceTiming&&(d.resourceTiming=K.resourceTiming),this.map._refreshExpiredTiles&&K&&d.setExpiryData(K),d.loadVectorData(K,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),g(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id})}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class di extends t.Evented{constructor(d,g,T,P){super(),this.id=d,this.dispatcher=T,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},g),t.extend(this,t.pick(g,["url","scheme","tileSize"]))}load(d){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Bi(this._options,this.map._requestManager,null,null,(g,T)=>{this._tileJSONRequest=null,this._loaded=!0,g?this.fire(new t.ErrorEvent(g)):T&&(t.extend(this,T),T.bounds&&(this.tileBounds=new on(T.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(T.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(g)})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,g){const T=t.exported.devicePixelRatio>=2,P=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),T,this.tileSize);d.request=t.getImage(this.map._requestManager.transformRequest(P,t.ResourceType.Tile),(B,X,K,te)=>(delete d.request,d.aborted?(d.state="unloaded",g(null)):B?(d.state="errored",g(B)):X?(this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:K,expires:te}),d.setTexture(X,this.map.painter),d.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void g(null)):g(null)))}static loadTileData(d,g,T){d.setTexture(g,T)}static unloadTileData(d,g){d.texture&&g.saveTileTexture(d.texture)}abortTile(d,g){d.request&&(d.request.cancel(),delete d.request),g()}unloadTile(d,g){d.texture&&this.map.painter.saveTileTexture(d.texture),g()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function un(C,d,g,T,P,B,X,K){const te=[C,g,P,d,T,B,1,1,1],he=[X,K,1],ue=t.adjoint([],te),[Ce,Ve,Qe]=t.transformMat3(he,he,t.transpose(ue,ue));return t.multiply$1(te,[Ce,0,0,0,Ve,0,0,0,Qe],te)}class Et extends t.Evented{constructor(d,g,T,P){super(),this.id=d,this.dispatcher=T,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=g,this._dirty=!1}load(d,g){this._loaded=g||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(T,P)=>{if(this._imageRequest=null,this._loaded=!0,T)this.fire(new t.ErrorEvent(T));else if(P){const{HTMLImageElement:B}=t.window;this.image=P instanceof B?t.exported.getImageData(P):P,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,d&&(this.coordinates=d),this._finishLoading()}})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this._imageRequest&&d.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=d.url,this.load(d.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(d){this.coordinates=d,this._boundsArray=void 0;const g=d.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(T){let P=1/0,B=1/0,X=-1/0,K=-1/0;for(const Ce of T)P=Math.min(P,Ce.x),B=Math.min(B,Ce.y),X=Math.max(X,Ce.x),K=Math.max(K,Ce.y);const te=Math.max(X-P,K-B),he=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),ue=Math.pow(2,he);return new t.CanonicalTileID(he,Math.floor((P+X)/2*ue),Math.floor((B+K)/2*ue))}(g),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(d){for(const te in this.tiles){const he=this.tiles[te];"loaded"!==he.state&&(he.state="loaded",he.texture=this.texture)}if(this._boundsArray)return;const g=t.tileTransform(this.tileID,this.map.transform.projection),[T,P,B,X]=this.coordinates.map(te=>{const he=g.projection.project(te[0],te[1]);return t.getTilePoint(g,he)._round()});this.perspectiveTransform=function(te,he,ue,Ce,Ve,Qe,et,tt,st,Te){const Ke=un(0,0,te,0,0,he,te,he),bt=un(ue,Ce,Ve,Qe,et,tt,st,Te);return t.multiply$1(bt,t.adjoint(Ke,Ke),bt),[bt[6]/bt[8]*te/t.EXTENT,bt[7]/bt[8]*he/t.EXTENT]}(this.width,this.height,T.x,T.y,P.x,P.y,X.x,X.y,B.x,B.y);const K=this._boundsArray=new t.StructArrayLayout4i8;K.emplaceBack(T.x,T.y,0,0),K.emplaceBack(P.x,P.y,t.EXTENT,0),K.emplaceBack(X.x,X.y,0,t.EXTENT),K.emplaceBack(B.x,B.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=d.createVertexBuffer(K,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const d=this.map.painter.context,g=d.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(d,this.image,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(d)}loadTile(d,g){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},g(null)):(d.state="errored",g(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const St={vector:Ui,raster:di,"raster-dem":class extends di{constructor(C,d,g,T){super(C,d,g,T),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}loadTile(C,d){const g=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function T(P,B){P&&(C.state="errored",d(P)),B&&(C.dem=B,C.dem.onDeserialize(),C.needsHillshadePrepare=!0,C.needsDEMTextureUpload=!0,C.state="loaded",d(null))}C.request=t.getImage(this.map._requestManager.transformRequest(g,t.ResourceType.Tile),function(P,B,X,K){if(delete C.request,C.aborted)C.state="unloaded",d(null);else if(P)C.state="errored",d(P);else if(B){this.map._refreshExpiredTiles&&C.setExpiryData({cacheControl:X,expires:K});const te=t.window.ImageBitmap&&B instanceof t.window.ImageBitmap&&(null==ur&&(ur=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),ur),he=1-(B.width-t.prevPowerOfTwo(B.width))/2;he<1||C.neighboringTiles||(C.neighboringTiles=this._getNeighboringTiles(C.tileID));const ue=te?B:t.exported.getImageData(B,he),Ce={uid:C.uid,coord:C.tileID,source:this.id,rawImageData:ue,encoding:this.encoding,padding:he};C.actor&&"expired"!==C.state||(C.actor=this.dispatcher.getActor(),C.actor.send("loadDEMTile",Ce,T.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(C){const d=C.canonical,g=Math.pow(2,d.z),T=(d.x-1+g)%g,P=0===d.x?C.wrap-1:C.wrap,B=(d.x+1+g)%g,X=d.x+1===g?C.wrap+1:C.wrap,K={};return K[new t.OverscaledTileID(C.overscaledZ,P,d.z,T,d.y).key]={backfilled:!1},K[new t.OverscaledTileID(C.overscaledZ,X,d.z,B,d.y).key]={backfilled:!1},d.y>0&&(K[new t.OverscaledTileID(C.overscaledZ,P,d.z,T,d.y-1).key]={backfilled:!1},K[new t.OverscaledTileID(C.overscaledZ,C.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},K[new t.OverscaledTileID(C.overscaledZ,X,d.z,B,d.y-1).key]={backfilled:!1}),d.y+1<g&&(K[new t.OverscaledTileID(C.overscaledZ,P,d.z,T,d.y+1).key]={backfilled:!1},K[new t.OverscaledTileID(C.overscaledZ,C.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},K[new t.OverscaledTileID(C.overscaledZ,X,d.z,B,d.y+1).key]={backfilled:!1}),K}unloadTile(C){C.demTexture&&this.map.painter.saveTileTexture(C.demTexture),C.fbo&&(C.fbo.destroy(),delete C.fbo),C.dem&&delete C.dem,delete C.neighboringTiles,C.state="unloaded"}},geojson:class extends t.Evented{constructor(C,d,g,T){super(),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(T),this._data=d.data,this._options=t.extend({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const P=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*P,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*P,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==d.clusterRadius?d.clusterRadius:50)*P,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}onAdd(C){this.map=C,this.setData(this._data)}setData(C){return this._data=C,this._updateWorkerData(),this}getClusterExpansionZoom(C,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id},d),this}getClusterChildren(C,d){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id},d),this}getClusterLeaves(C,d,g,T){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:C,limit:d,offset:g},T),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const C=t.extend({},this.workerOptions),d=this._data;"string"==typeof d?(C.request=this.map._requestManager.transformRequest(t.exported.resolveURL(d),t.ResourceType.Source),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,C,(g,T)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new t.ErrorEvent(g));else{const P={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(P.resourceTiming=T.resourceTiming[this.id]),this.fire(new t.Event("data",P)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(C,d){const g=C.actor?"reloadTile":"loadTile";C.actor=this.actor,C.request=this.actor.send(g,{type:this.type,uid:C.uid,tileID:C.tileID,tileZoom:C.tileZoom,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(T,P)=>(delete C.request,C.unloadVectorData(),C.aborted?d(null):T?d(T):(C.loadVectorData(P,this.map.painter,"reloadTile"===g),d(null))),void 0,"loadTile"===g)}abortTile(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0}unloadTile(C){C.unloadVectorData(),this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Et{constructor(C,d,g,T){super(C,d,g,T),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const C=this.options;this.urls=[];for(const d of C.urls)this.urls.push(this.map._requestManager.transformRequest(d,t.ResourceType.Source).url);t.getVideo(this.urls,(d,g)=>{this._loaded=!0,d?this.fire(new t.ErrorEvent(d)):g&&(this.video=g,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(C){if(this.video){const d=this.video.seekable;C<d.start(0)||C>d.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=C}}getVideo(){return this.video}onAdd(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const C=this.map.painter.context,d=C.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(C,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(C)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Et,canvas:class extends Et{constructor(C,d,g,T){super(C,d,g,T),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(P=>!Array.isArray(P)||2!==P.length||P.some(B=>"number"!=typeof B))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${C}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${C}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${C}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${C}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${C}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const d=this.map.painter.context;this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(d,this.canvas,d.gl.RGBA,{premultiply:!0}),this._prepareData(d)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const C of[this.canvas.width,this.canvas.height])if(isNaN(C)||C<=0)return!0;return!1}},custom:class extends t.Evented{constructor(C,d,g,T){super(),this.id=C,this.type="custom",this._dataType="raster",this._dispatcher=g,this._implementation=d,this.setEventedParent(T),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new on(this._implementation.bounds,this.minzoom,this.maxzoom)),d.update=this._update.bind(this),d.clearTiles=this._clearTiles.bind(this),d.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(d,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(C){this._map=C,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(C),this.load()}onRemove(C){this._implementation.onRemove&&this._implementation.onRemove(C)}hasTile(C){if(this._implementation.hasTile){const{x:d,y:g,z:T}=C.canonical;return this._implementation.hasTile({x:d,y:g,z:T})}return!this.tileBounds||this.tileBounds.contains(C.canonical)}loadTile(C,d){const{x:g,y:T,z:P}=C.tileID.canonical,B=new t.window.AbortController;C.request=Promise.resolve(this._implementation.loadTile({x:g,y:T,z:P},{signal:B.signal})).then(function(X){return delete C.request,C.aborted?(C.state="unloaded",d(null)):void 0===X?(C.state="errored",d(null)):null===X?(this.loadTileData(C,{width:this.tileSize,height:this.tileSize,data:null}),C.state="loaded",d(null)):(K=X)instanceof t.window.ImageData||K instanceof t.window.HTMLCanvasElement||K instanceof t.window.ImageBitmap||K instanceof t.window.HTMLImageElement?(this.loadTileData(C,X),C.state="loaded",void d(null)):(C.state="errored",d(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var K}.bind(this)).catch(X=>{20!==X.code&&(C.state="errored",d(X))}),C.request.cancel=()=>B.abort()}loadTileData(C,d){di.loadTileData(C,d,this._map.painter)}unloadTileData(C){di.unloadTileData(C,this._map.painter)}unloadTile(C,d){if(this.unloadTileData(C),this._implementation.unloadTile){const{x:g,y:T,z:P}=C.tileID.canonical;this._implementation.unloadTile({x:g,y:T,z:P})}d()}abortTile(C,d){C.request&&C.request.cancel&&(C.request.cancel(),delete C.request),d()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(C=>({x:C.canonical.x,y:C.canonical.y,z:C.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},qe=function(C,d,g,T){const P=new St[d.type](C,d,g,T);if(P.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${P.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],P),P};function Xe(C,d){const g=t.identity([]);return t.scale(g,g,[.5*C.width,.5*-C.height,1]),t.translate(g,g,[1,-1,0]),t.multiply(g,g,C.calculateProjMatrix(d.toUnwrapped())),Float32Array.from(g)}function ze(C,d,g,T,P,B,X,K=!1){const te=C.tilesIn(T,X,K);te.sort(ft);const he=[];for(const Ce of te)he.push({wrappedTileID:Ce.tile.tileID.wrapped().key,queryResults:Ce.tile.queryRenderedFeatures(d,g,C._state,Ce,P,B,Xe(C.transform,Ce.tile.tileID),K)});const ue=function(Ce){const Ve={},Qe={};for(const et of Ce){const tt=et.queryResults,st=et.wrappedTileID,Te=Qe[st]=Qe[st]||{};for(const Ke in tt){const bt=tt[Ke],xt=Te[Ke]=Te[Ke]||{},Ht=Ve[Ke]=Ve[Ke]||[];for(const Gt of bt)xt[Gt.featureIndex]||(xt[Gt.featureIndex]=!0,Ht.push(Gt))}}return Ve}(he);for(const Ce in ue)ue[Ce].forEach(Ve=>{const Qe=Ve.feature,et=Qe.layer;et&&"background"!==et.type&&"sky"!==et.type&&(Qe.source=et.source,et["source-layer"]&&(Qe.sourceLayer=et["source-layer"]),Qe.state=void 0!==Qe.id?C.getFeatureState(et["source-layer"],Qe.id):{})});return ue}function He(C,d){const g=C.getRenderableIds().map(B=>C.getTileByID(B)),T=[],P={};for(let B=0;B<g.length;B++){const X=g[B],K=X.tileID.canonical.key;P[K]||(P[K]=!0,X.querySourceFeatures(T,d))}return T}function ft(C,d){const g=C.tileID,T=d.tileID;return g.overscaledZ-T.overscaledZ||g.canonical.y-T.canonical.y||g.wrap-T.wrap||g.canonical.x-T.canonical.x}function Yt(){return null!=wu.workerClass?new wu.workerClass:new t.window.Worker(wu.workerUrl)}const xi="mapboxgl_preloaded_worker_pool";class pi{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<pi.workerCount;)this.workers.push(new Yt);return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],0===this.numActive()&&(this.workers.forEach(g=>{g.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xi]}numActive(){return Object.keys(this.active).length}}let Pi;function rt(){return Pi||(Pi=new pi),Pi}function yt(C,d){const g={};for(const T in C)"ref"!==T&&(g[T]=C[T]);return t.refProperties.forEach(T=>{T in d&&(g[T]=d[T])}),g}function fe(C){C=C.slice();const d=Object.create(null);for(let g=0;g<C.length;g++)d[C[g].id]=C[g];for(let g=0;g<C.length;g++)"ref"in C[g]&&(C[g]=yt(C[g],d[C[g].ref]));return C}pi.workerCount=2;const it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Tt(C,d,g){g.push({command:it.addSource,args:[C,d[C]]})}function Pe(C,d,g){d.push({command:it.removeSource,args:[C]}),g[C]=!0}function Lt(C,d,g,T){Pe(C,g,T),Tt(C,d,g)}function le(C,d,g){let T;for(T in C[g])if(C[g].hasOwnProperty(T)&&"data"!==T&&!V(C[g][T],d[g][T]))return!1;for(T in d[g])if(d[g].hasOwnProperty(T)&&"data"!==T&&!V(C[g][T],d[g][T]))return!1;return!0}function o(C,d,g,T,P,B){let X;for(X in d=d||{},C=C||{})C.hasOwnProperty(X)&&(V(C[X],d[X])||g.push({command:B,args:[T,X,d[X],P]}));for(X in d)d.hasOwnProperty(X)&&!C.hasOwnProperty(X)&&(V(C[X],d[X])||g.push({command:B,args:[T,X,d[X],P]}))}function c(C){return C.id}function h(C,d){return C[d.id]=d,C}class _{constructor(d,g){this.reset(d,g)}reset(d,g){this.points=d||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(1===this.points.length)return this.points[0];d=t.clamp(d,0,1);let g=1,T=this._distances[g];const P=d*this.paddedLength+this.padding;for(;T<P&&g<this._distances.length;)T=this._distances[++g];const B=g-1,X=this._distances[B],K=T-X,te=K>0?(P-X)/K:0;return this.points[B].mult(1-te).add(this.points[g].mult(te))}}class b{constructor(d,g,T){const P=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(d/T),this.yCellCount=Math.ceil(g/T);for(let X=0;X<this.xCellCount*this.yCellCount;X++)P.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=g,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,g,T,P,B){this._forEachCell(g,T,P,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(g),this.bboxes.push(T),this.bboxes.push(P),this.bboxes.push(B)}insertCircle(d,g,T,P){this._forEachCell(g-P,T-P,g+P,T+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(g),this.circles.push(T),this.circles.push(P)}_insertBoxCell(d,g,T,P,B,X){this.boxCells[B].push(X)}_insertCircleCell(d,g,T,P,B,X){this.circleCells[B].push(X)}_query(d,g,T,P,B,X){if(T<0||d>this.width||P<0||g>this.height)return!B&&[];const K=[];if(d<=0&&g<=0&&this.width<=T&&this.height<=P){if(B)return!0;for(let te=0;te<this.boxKeys.length;te++)K.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(let te=0;te<this.circleKeys.length;te++){const he=this.circles[3*te],ue=this.circles[3*te+1],Ce=this.circles[3*te+2];K.push({key:this.circleKeys[te],x1:he-Ce,y1:ue-Ce,x2:he+Ce,y2:ue+Ce})}return X?K.filter(X):K}return this._forEachCell(d,g,T,P,this._queryCell,K,{hitTest:B,seenUids:{box:{},circle:{}}},X),B?K.length>0:K}_queryCircle(d,g,T,P,B){const X=d-T,K=d+T,te=g-T,he=g+T;if(K<0||X>this.width||he<0||te>this.height)return!P&&[];const ue=[];return this._forEachCell(X,te,K,he,this._queryCellCircle,ue,{hitTest:P,circle:{x:d,y:g,radius:T},seenUids:{box:{},circle:{}}},B),P?ue.length>0:ue}query(d,g,T,P,B){return this._query(d,g,T,P,!1,B)}hitTest(d,g,T,P,B){return this._query(d,g,T,P,!0,B)}hitTestCircle(d,g,T,P){return this._queryCircle(d,g,T,!0,P)}_queryCell(d,g,T,P,B,X,K,te){const he=K.seenUids,ue=this.boxCells[B];if(null!==ue){const Ve=this.bboxes;for(const Qe of ue)if(!he.box[Qe]){he.box[Qe]=!0;const et=4*Qe;if(d<=Ve[et+2]&&g<=Ve[et+3]&&T>=Ve[et+0]&&P>=Ve[et+1]&&(!te||te(this.boxKeys[Qe]))){if(K.hitTest)return X.push(!0),!0;X.push({key:this.boxKeys[Qe],x1:Ve[et],y1:Ve[et+1],x2:Ve[et+2],y2:Ve[et+3]})}}}const Ce=this.circleCells[B];if(null!==Ce){const Ve=this.circles;for(const Qe of Ce)if(!he.circle[Qe]){he.circle[Qe]=!0;const et=3*Qe;if(this._circleAndRectCollide(Ve[et],Ve[et+1],Ve[et+2],d,g,T,P)&&(!te||te(this.circleKeys[Qe]))){if(K.hitTest)return X.push(!0),!0;{const tt=Ve[et],st=Ve[et+1],Te=Ve[et+2];X.push({key:this.circleKeys[Qe],x1:tt-Te,y1:st-Te,x2:tt+Te,y2:st+Te})}}}}}_queryCellCircle(d,g,T,P,B,X,K,te){const he=K.circle,ue=K.seenUids,Ce=this.boxCells[B];if(null!==Ce){const Qe=this.bboxes;for(const et of Ce)if(!ue.box[et]){ue.box[et]=!0;const tt=4*et;if(this._circleAndRectCollide(he.x,he.y,he.radius,Qe[tt+0],Qe[tt+1],Qe[tt+2],Qe[tt+3])&&(!te||te(this.boxKeys[et])))return X.push(!0),!0}}const Ve=this.circleCells[B];if(null!==Ve){const Qe=this.circles;for(const et of Ve)if(!ue.circle[et]){ue.circle[et]=!0;const tt=3*et;if(this._circlesCollide(Qe[tt],Qe[tt+1],Qe[tt+2],he.x,he.y,he.radius)&&(!te||te(this.circleKeys[et])))return X.push(!0),!0}}}_forEachCell(d,g,T,P,B,X,K,te){const he=this._convertToXCellCoord(d),ue=this._convertToYCellCoord(g),Ce=this._convertToXCellCoord(T),Ve=this._convertToYCellCoord(P);for(let Qe=he;Qe<=Ce;Qe++)for(let et=ue;et<=Ve;et++)if(B.call(this,d,g,T,P,this.xCellCount*et+Qe,X,K,te))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,g,T,P,B,X){const K=P-d,te=B-g,he=T+X;return he*he>K*K+te*te}_circleAndRectCollide(d,g,T,P,B,X,K){const te=(X-P)/2,he=Math.abs(d-(P+te));if(he>te+T)return!1;const ue=(K-B)/2,Ce=Math.abs(g-(B+ue));if(Ce>ue+T)return!1;if(he<=te||Ce<=ue)return!0;const Ve=he-te,Qe=Ce-ue;return Ve*Ve+Qe*Qe<=T*T}}const x={unknown:0,flipRequired:1,flipNotRequired:2},M=Math.tan(85*Math.PI/180);function I(C,d,g,T,P,B,X){const K=t.create();if(g)if("globe"===B.name){const te=t.calculateGlobeLabelMatrix(P,d);t.multiply(K,K,te)}else{const te=at([],X);K[0]=te[0],K[1]=te[1],K[4]=te[2],K[5]=te[3],T||t.rotateZ(K,K,P.angle)}else t.multiply(K,P.labelPlaneMatrix,C);return K}function F(C,d,g,T,P,B,X){const K=I(C,d,g,T,P,B,X);return"globe"===B.name&&g||(K[2]=K[6]=K[10]=K[14]=0),K}function U(C,d,g,T,P,B,X){if(g){if("globe"===B.name){const K=I(C,d,g,T,P,B,X);return t.invert(K,K),t.multiply(K,C,K),K}{const K=t.clone(C),te=t.identity([]);return te[0]=X[0],te[1]=X[1],te[4]=X[2],te[5]=X[3],t.multiply(K,K,te),T||t.rotateZ(K,K,-P.angle),K}}return P.glCoordMatrix}function $(C,d,g,T){const P=[C,d,g,1];g?t.transformMat4$1(P,P,T):xe(P,P,T);const B=P[3];return P[0]/=B,P[1]/=B,P[2]/=B,P}function q(C,d){return Math.min(.5+C/d*.5,1.5)}function ne(C,d){const g=C[0]/C[3],T=C[1]/C[3];return g>=-d[0]&&g<=d[0]&&T>=-d[1]&&T<=d[1]}function de(C,d,g,T,P,B,X,K,te,he){const ue=g.transform,Ce=T?C.textSizeData:C.iconSizeData,Ve=t.evaluateSizeForZoom(Ce,g.transform.zoom),Qe="globe"===ue.projection.name,et=[256/g.width*2+1,256/g.height*2+1],tt=T?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;tt.clear();let st=null;Qe&&(st=T?C.text.globeExtVertexArray:C.icon.globeExtVertexArray);const Te=C.lineVertexArray,Ke=T?C.text.placedSymbolArray:C.icon.placedSymbolArray,bt=g.transform.width/g.transform.height;let xt,Ht=!1;for(let Gt=0;Gt<Ke.length;Gt++){const Ut=Ke.get(Gt),{numGlyphs:ti,writingMode:Qt}=Ut;if(Qt!==t.WritingMode.vertical||Ht||xt===t.WritingMode.horizontal||(Ht=!0),xt=Qt,(Ut.hidden||Qt===t.WritingMode.vertical)&&!Ht){pe(ti,tt);continue}Ht=!1;const gi=new t.Point(Ut.tileAnchorX,Ut.tileAnchorY);let{x:Ji,y:Zt,z:Oi}=ue.projection.projectTilePoint(gi.x,gi.y,he.canonical);if(te){const[nr,Ln,Xn]=te(gi);Ji+=nr,Zt+=Ln,Oi+=Xn}const yi=[Ji,Zt,Oi,1];if(t.transformMat4$1(yi,yi,d),!ne(yi,et)){pe(ti,tt);continue}const Qi=q(g.transform.cameraToCenterDistance,yi[3]),vi=t.evaluateSizeForFeature(Ce,Ve,Ut),Ii=X?vi/Qi:vi*Qi,nn=$(Ji,Zt,Oi,P);if(nn[3]<=0){pe(ti,tt);continue}let $i={};const Ki=X?null:te,Hn=me(Ut,Ii,!1,K,d,P,B,C.glyphOffsetArray,Te,tt,st,nn,gi,$i,bt,Ki,ue.projection,he,X);Ht=Hn.useVertical,Ki&&Hn.needsFlipping&&($i={}),(Hn.notEnoughRoom||Ht||Hn.needsFlipping&&me(Ut,Ii,!0,K,d,P,B,C.glyphOffsetArray,Te,tt,st,nn,gi,$i,bt,Ki,ue.projection,he,X).notEnoughRoom)&&pe(ti,tt)}T?(C.text.dynamicLayoutVertexBuffer.updateData(tt),st&&C.text.globeExtVertexBuffer.updateData(st)):(C.icon.dynamicLayoutVertexBuffer.updateData(tt),st&&C.icon.globeExtVertexBuffer.updateData(st))}function ge(C,d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt){const{lineStartIndex:st,glyphStartIndex:Te,segment:Ke}=K,bt=Te+K.numGlyphs,xt=st+K.lineLength,Ht=d.getoffsetX(Te),Gt=d.getoffsetX(bt-1),Ut=Q(C*Ht,g,T,P,B,X,Ke,st,xt,te,he,ue,Ce,Ve,!0,Qe,et,tt);if(!Ut)return null;const ti=Q(C*Gt,g,T,P,B,X,Ke,st,xt,te,he,ue,Ce,Ve,!0,Qe,et,tt);return ti?{first:Ut,last:ti}:null}function we(C,d,g,T){return C===t.WritingMode.horizontal&&Math.abs(T)>Math.abs(g)?{useVertical:!0}:C===t.WritingMode.vertical?T>0?{needsFlipping:!0}:null:d!==x.unknown&&(0===(P=g)||Math.abs(T/P)>M)?d===x.flipRequired?{needsFlipping:!0}:null:g<0?{needsFlipping:!0}:null;var P}function me(C,d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt,st,Te,Ke){const bt=d/24,xt=C.lineOffsetX*bt,Ht=C.lineOffsetY*bt,{lineStartIndex:Gt,glyphStartIndex:Ut,numGlyphs:ti,segment:Qt,writingMode:gi,flipState:Ji}=C,Zt=Gt+C.lineLength,Oi=yi=>{if(ue){const[nn,$i,Ki]=yi.up,Hn=he.length;t.updateGlobeVertexNormal(ue,Hn+0,nn,$i,Ki),t.updateGlobeVertexNormal(ue,Hn+1,nn,$i,Ki),t.updateGlobeVertexNormal(ue,Hn+2,nn,$i,Ki),t.updateGlobeVertexNormal(ue,Hn+3,nn,$i,Ki)}const[Qi,vi,Ii]=yi.point;t.addDynamicAttributes(he,Qi,vi,Ii,yi.angle)};if(ti>1){const yi=ge(bt,K,xt,Ht,g,Ce,Ve,C,te,B,Qe,tt,!1,st,Te,Ke);if(!yi)return{notEnoughRoom:!0};if(T&&!g){let[Qi,vi,Ii]=yi.first.point,[nn,$i,Ki]=yi.last.point;[Qi,vi]=$(Qi,vi,Ii,X),[nn,$i]=$(nn,$i,Ki,X);const Hn=we(gi,Ji,(nn-Qi)*et,$i-vi);if(C.flipState=Hn&&Hn.needsFlipping?x.flipRequired:x.flipNotRequired,Hn)return Hn}Oi(yi.first);for(let Qi=Ut+1;Qi<Ut+ti-1;Qi++){const vi=Q(bt*K.getoffsetX(Qi),xt,Ht,g,Ce,Ve,Qt,Gt,Zt,te,B,Qe,tt,!1,!1,st,Te,Ke);if(!vi)return he.length-=4*(Qi-Ut),{notEnoughRoom:!0};Oi(vi)}Oi(yi.last)}else{if(T&&!g){const Qi=$(Ve.x,Ve.y,0,P),vi=Gt+Qt+1,Ii=new t.Point(te.getx(vi),te.gety(vi)),nn=$(Ii.x,Ii.y,0,P),$i=nn[3]>0?nn:N(Ve,Ii,Qi,1,P,void 0,st,Te.canonical),Ki=we(gi,Ji,($i[0]-Qi[0])*et,$i[1]-Qi[1]);if(C.flipState=Ki&&Ki.needsFlipping?x.flipRequired:x.flipNotRequired,Ki)return Ki}const yi=Q(bt*K.getoffsetX(Ut),xt,Ht,g,Ce,Ve,Qt,Gt,Zt,te,B,Qe,tt,!1,!1,st,Te,Ke);if(!yi)return{notEnoughRoom:!0};Oi(yi)}return{}}function Se(C,d,g,T,P){const{x:B,y:X,z:K}=T.projectTilePoint(C.x,C.y,d);if(!P)return $(B,X,K,g);const[te,he,ue]=P(C);return $(B+te,X+he,K+ue,g)}function N(C,d,g,T,P,B,X,K){const te=Se(C.sub(d)._unit()._add(C),K,P,X,B);return t.sub(te,g,te),t.normalize(te,te),t.scaleAndAdd(te,g,te,T)}function Q(C,d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt,st,Te){const Ke=T?C-d:C+d;let bt=Ke>0?1:-1,xt=0;T&&(bt*=-1,xt=Math.PI),bt<0&&(xt+=Math.PI);let Ht=K+X+(bt>0?0:1)|0,Gt=P,Ut=P,ti=0,Qt=0;const gi=Math.abs(Ke),Ji=[],Zt=[];let Oi=B,yi=Oi;const Qi=()=>N(yi,Oi,Ut,gi-ti+1,ue,Ve,tt,st.canonical);for(;ti+Qt<=gi;){if(Ht+=bt,Ht<K||Ht>=te)return null;if(Ut=Gt,yi=Oi,Ji.push(Ut),Qe&&Zt.push(yi),Oi=new t.Point(he.getx(Ht),he.gety(Ht)),Gt=Ce[Ht],!Gt){const Xn=Se(Oi,st.canonical,ue,tt,Ve);Gt=Xn[3]>0?Ce[Ht]=Xn:Qi()}ti+=Qt,Qt=t.distance(Ut,Gt)}et&&Ve&&(Ce[Ht]&&(Gt=Qi(),Qt=t.distance(Ut,Gt)),Ce[Ht]=Gt);const vi=(gi-ti)/Qt,Ii=Oi.sub(yi)._mult(vi)._add(yi),nn=t.sub([],Gt,Ut),$i=t.scaleAndAdd([],Ut,nn,vi);let Ki=[0,0,1],Hn=nn[0],nr=nn[1];if(Te&&(Ki=tt.upVector(st.canonical,Ii.x,Ii.y),0!==Ki[0]||0!==Ki[1]||1!==Ki[2])){const Xn=[Ki[2],0,-Ki[0]],Zn=t.cross([],Ki,Xn);t.normalize(Xn,Xn),t.normalize(Zn,Zn),Hn=t.dot(nn,Xn),nr=t.dot(nn,Zn)}if(g){const Xn=t.cross([],Ki,nn);t.normalize(Xn,Xn),t.scaleAndAdd($i,$i,Xn,g*bt)}const Ln=xt+Math.atan2(nr,Hn);return Ji.push($i),Qe&&Zt.push(Ii),{point:$i,angle:Ln,path:Ji,tilePath:Zt,up:Ki}}function pe(C,d){const g=d.length,T=g+4*C;d.resize(T),d.float32.fill(-1/0,4*g,4*T)}function xe(C,d,g){const T=d[0],P=d[1];return C[0]=g[0]*T+g[4]*P+g[12],C[1]=g[1]*T+g[5]*P+g[13],C[3]=g[3]*T+g[7]*P+g[15],C}const Le=100;class Ze{constructor(d,g,T=new b(d.width+200,d.height+200,25),P=new b(d.width+200,d.height+200,25)){this.transform=d,this.grid=T,this.ignoredGrid=P,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+Le,this.screenBottomBoundary=d.height+Le,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.fogState=g}placeCollisionBox(d,g,T,P,B,X,K,te){let he=T.projectedAnchorX,ue=T.projectedAnchorY,Ce=T.projectedAnchorZ;const Ve=T.elevation,Qe=T.tileID,et=d.getProjection();if(Ve&&Qe){const[Gt,Ut,ti]=et.upVector(Qe.canonical,T.tileAnchorX,T.tileAnchorY),Qt=et.upVectorScale(Qe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;he+=Gt*Ve*Qt,ue+=Ut*Ve*Qt,Ce+=ti*Ve*Qt}const tt=this.projectAndGetPerspectiveRatio(K,he,ue,Ce,T.tileID,"globe"===et.name||!!Ve||this.transform.pitch>0,et),st=X*tt.perspectiveRatio,Te=(T.x1*g+P.x-T.padding)*st+tt.point.x,Ke=(T.y1*g+P.y-T.padding)*st+tt.point.y,bt=(T.x2*g+P.x+T.padding)*st+tt.point.x,xt=(T.y2*g+P.y+T.padding)*st+tt.point.y,Ht=tt.perspectiveRatio<=.55||tt.occluded;return!this.isInsideGrid(Te,Ke,bt,xt)||!B&&this.grid.hitTest(Te,Ke,bt,xt,te)||Ht?{box:[],offscreen:!1,occluded:tt.occluded}:{box:[Te,Ke,bt,xt],offscreen:this.isOffscreen(Te,Ke,bt,xt),occluded:!1}}placeCollisionCircles(d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt){const st=[],Te=this.transform.elevation,Ke=d.getProjection(),bt=Te?Te.getAtTileOffsetFunc(tt,this.transform.center.lat,this.transform.worldSize,Ke):null,xt=new t.Point(T.tileAnchorX,T.tileAnchorY);let{x:Ht,y:Gt,z:Ut}=Ke.projectTilePoint(xt.x,xt.y,tt.canonical);if(bt){const[Ii,nn,$i]=bt(xt);Ht+=Ii,Gt+=nn,Ut+=$i}const ti="globe"===Ke.name,Qt=this.projectAndGetPerspectiveRatio(K,Ht,Gt,Ut,tt,ti||!!Te||this.transform.pitch>0,Ke),{perspectiveRatio:gi}=Qt,Ji=(Ce?X/gi:X*gi)/t.ONE_EM,Zt=$(Ht,Gt,Ut,te),Oi=Qt.signedDistanceFromCamera>0?ge(Ji,B,T.lineOffsetX*Ji,T.lineOffsetY*Ji,!1,Zt,xt,T,P,te,{},Te&&!Ce?bt:null,Ce&&!!Te,Ke,tt,Ce):null;let yi=!1,Qi=!1,vi=!0;if(Oi&&!Qt.occluded){const Ii=.5*Qe*gi+et,nn=new t.Point(-100,-100),$i=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Ki=new _,{first:Hn,last:nr}=Oi,Ln=Hn.path.length;let Xn=[];for(let zn=Ln-1;zn>=1;zn--)Xn.push(Hn.path[zn]);for(let zn=1;zn<nr.path.length;zn++)Xn.push(nr.path[zn]);const Zn=2.5*Ii;he&&(Xn=Xn.map(([zn,Pr,Ur],ms)=>(bt&&!ti&&(Ur=bt(ms<Ln-1?Hn.tilePath[Ln-1-ms]:nr.tilePath[ms-Ln+2])[2]),$(zn,Pr,Ur,he))),Xn.some(zn=>zn[3]<=0)&&(Xn=[]));let tr=[];if(Xn.length>0){let zn=1/0,Pr=-1/0,Ur=1/0,ms=-1/0;for(const gs of Xn)zn=Math.min(zn,gs[0]),Ur=Math.min(Ur,gs[1]),Pr=Math.max(Pr,gs[0]),ms=Math.max(ms,gs[1]);Pr>=nn.x&&zn<=$i.x&&ms>=nn.y&&Ur<=$i.y&&(tr=[Xn.map(gs=>new t.Point(gs[0],gs[1]))],(zn<nn.x||Pr>$i.x||Ur<nn.y||ms>$i.y)&&(tr=t.clipLine(tr,nn.x,nn.y,$i.x,$i.y)))}for(const zn of tr){Ki.reset(zn,.25*Ii);let Pr=0;Pr=Ki.length<=.5*Ii?1:Math.ceil(Ki.paddedLength/Zn)+1;for(let Ur=0;Ur<Pr;Ur++){const ms=Ur/Math.max(Pr-1,1),gs=Ki.lerp(ms),cs=gs.x+Le,Ls=gs.y+Le;st.push(cs,Ls,Ii,0);const ka=cs-Ii,qo=Ls-Ii,Os=cs+Ii,qr=Ls+Ii;if(vi=vi&&this.isOffscreen(ka,qo,Os,qr),Qi=Qi||this.isInsideGrid(ka,qo,Os,qr),!g&&this.grid.hitTestCircle(cs,Ls,Ii,Ve)&&(yi=!0,!ue))return{circles:[],offscreen:!1,collisionDetected:yi,occluded:!1}}}}return{circles:!ue&&yi||!Qi?[]:st,offscreen:vi,collisionDetected:yi,occluded:Qt.occluded}}queryRenderedSymbols(d){if(0===d.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const g=[];let T=1/0,P=1/0,B=-1/0,X=-1/0;for(const ue of d){const Ce=new t.Point(ue.x+Le,ue.y+Le);T=Math.min(T,Ce.x),P=Math.min(P,Ce.y),B=Math.max(B,Ce.x),X=Math.max(X,Ce.y),g.push(Ce)}const K=this.grid.query(T,P,B,X).concat(this.ignoredGrid.query(T,P,B,X)),te={},he={};for(const ue of K){const Ce=ue.key;if(void 0===te[Ce.bucketInstanceId]&&(te[Ce.bucketInstanceId]={}),te[Ce.bucketInstanceId][Ce.featureIndex])continue;const Ve=[new t.Point(ue.x1,ue.y1),new t.Point(ue.x2,ue.y1),new t.Point(ue.x2,ue.y2),new t.Point(ue.x1,ue.y2)];t.polygonIntersectsPolygon(g,Ve)&&(te[Ce.bucketInstanceId][Ce.featureIndex]=!0,void 0===he[Ce.bucketInstanceId]&&(he[Ce.bucketInstanceId]=[]),he[Ce.bucketInstanceId].push(Ce.featureIndex))}return he}insertCollisionBox(d,g,T,P,B){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:T,featureIndex:P,collisionGroupID:B},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,g,T,P,B){const X=g?this.ignoredGrid:this.grid,K={bucketInstanceId:T,featureIndex:P,collisionGroupID:B};for(let te=0;te<d.length;te+=4)X.insertCircle(K,d[te],d[te+1],d[te+2])}projectAndGetPerspectiveRatio(d,g,T,P,B,X,K){const te=[g,T,P,1];let he=!1;P||this.transform.pitch>0?(t.transformMat4$1(te,te,d),this.fogState&&B&&"globe"!==K.name&&(he=function(Ve,Qe,et,tt,st,Te){const Ke=Te.calculateFogTileMatrix(st),bt=[Qe,et,tt];return t.transformMat4(bt,bt,Ke),mi(Ve,bt,Te.pitch,Te._fov)}(this.fogState,g,T,P,B.toUnwrapped(),this.transform)>.9)):xe(te,te,d);const ue=te[3];return{point:new t.Point((te[0]/ue+1)/2*this.transform.width+Le,(-te[1]/ue+1)/2*this.transform.height+Le),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(K)/ue*.5,1.5),signedDistanceFromCamera:ue,occluded:X&&te[2]>ue||he}}isOffscreen(d,g,T,P){return T<Le||d>=this.screenRightBoundary||P<Le||g>this.screenBottomBoundary}isInsideGrid(d,g,T,P){return T>=0&&d<this.gridRightBoundary&&P>=0&&g<this.gridBottomBoundary}getViewportMatrix(){const d=t.identity([]);return t.translate(d,d,[-100,-100,0]),d}}function kt(C,d,g){const T=d.createTileMatrix(C,C.worldSize,g.toUnwrapped());return t.multiply(new Float32Array(16),C.projMatrix,T)}function It(C,d,g){if(d.projection.name===g.projection.name)return C.projMatrix;const T=g.clone();return T.setProjection(d.projection),kt(T,d.getProjection(),C)}function ii(C,d,g){return d.name===g.projection.name?C.projMatrix:kt(g,d,C)}class wi{constructor(d,g,T,P){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?g:-g))):P&&T?1:0,this.placed=T}isHidden(){return 0===this.opacity&&!this.placed}}class Mi{constructor(d,g,T,P,B,X=!1){this.text=new wi(d?d.text:null,g,T,B),this.icon=new wi(d?d.icon:null,g,P,B),this.clipped=X}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dn{constructor(d,g,T,P=!1){this.text=d,this.icon=g,this.skipFade=T,this.clipped=P}}class En{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Fn{constructor(d,g,T,P,B){this.bucketInstanceId=d,this.featureIndex=g,this.sourceLayerIndex=T,this.bucketIndex=P,this.tileID=B}}class Jn{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const g=++this.maxGroupID;this.collisionGroups[d]={ID:g,predicate:T=>T.collisionGroupID===g}}return this.collisionGroups[d]}}function ar(C,d,g,T,P){const{horizontalAlign:B,verticalAlign:X}=t.getAnchorAlignment(C),K=-(B-.5)*d,te=-(X-.5)*g,he=t.evaluateVariableOffset(C,T);return new t.Point(K+he[0]*P,te+he[1]*P)}function lr(C,d,g,T,P){const B=new t.Point(C,d);return g&&B._rotate(T?P:-P),B}class Lr{constructor(d,g,T,P,B){this.transform=d.clone(),this.projection=d.projection.name,this.collisionIndex=new Ze(this.transform,B),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Jn(T),this.collisionCircleArrays={},this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,g,T,P){const B=T.getBucket(g),X=T.latestFeatureIndex;if(!B||!X||g.id!==B.layerIds[0])return;const K=B.layers[0].layout,te=T.collisionBoxArray,he=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),ue=T.tileSize/t.EXTENT,Ce=T.tileID.toUnwrapped();this.transform.setProjection(B.projection);const Ve=(Qe=T.tileID,et=B.getProjection(),tt=this.transform,et.name===this.projection?tt.calculateProjMatrix(Qe.toUnwrapped()):kt(tt,et,Qe));var Qe,et,tt;const st="map"===K.get("text-pitch-alignment"),Te="map"===K.get("text-rotation-alignment");g.compileFilter();const Ke=g.dynamicFilter(),bt=g.dynamicFilterNeedsFeature(),xt=this.transform.calculatePixelsToTileUnitsMatrix(T),Ht=F(Ve,T.tileID.canonical,st,Te,this.transform,B.getProjection(),xt);let Gt=null;if(st){const Qt=U(Ve,T.tileID.canonical,st,Te,this.transform,B.getProjection(),xt);Gt=t.multiply([],this.transform.labelPlaneMatrix,Qt)}let Ut=null;Ke&&T.latestFeatureIndex&&(Ut={unwrappedTileID:Ce,dynamicFilter:Ke,dynamicFilterNeedsFeature:bt,featureIndex:T.latestFeatureIndex}),this.retainedQueryData[B.bucketInstanceId]=new Fn(B.bucketInstanceId,X,B.sourceLayerIndex,B.index,T.tileID);const ti={bucket:B,layout:K,posMatrix:Ve,textLabelPlaneMatrix:Ht,labelToScreenMatrix:Gt,clippingData:Ut,scale:he,textPixelRatio:ue,holdingForFade:T.holdingForFade(),collisionBoxArray:te,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(B.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(P)for(const Qt of B.sortKeyRanges){const{sortKey:gi,symbolInstanceStart:Ji,symbolInstanceEnd:Zt}=Qt;d.push({sortKey:gi,symbolInstanceStart:Ji,symbolInstanceEnd:Zt,parameters:ti})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:ti})}attemptAnchorPlacement(d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt,st,Te,Ke){const{textOffset0:bt,textOffset1:xt,crossTileID:Ht}=Ve,Gt=[bt,xt],Ut=ar(d,T,P,Gt,B),ti=this.collisionIndex.placeCollisionBox(et,B,g,lr(Ut.x,Ut.y,X,K,this.transform.angle),Ce,te,he,ue.predicate);if(st){const Qt=et.getSymbolInstanceIconSize(Ke,this.transform.zoom,Ve.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(et,Qt,st,lr(Ut.x,Ut.y,X,K,this.transform.angle),Ce,te,he,ue.predicate).box.length)return}if(ti.box.length>0){let Qt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ht]&&this.prevPlacement.placements[Ht]&&this.prevPlacement.placements[Ht].text&&(Qt=this.prevPlacement.variableOffsets[Ht].anchor),this.variableOffsets[Ht]={textOffset:Gt,width:T,height:P,anchor:d,textScale:B,prevAnchor:Qt},this.markUsedJustification(et,d,Ve,tt),et.allowVerticalPlacement&&(this.markUsedOrientation(et,tt,Ve),this.placedOrientations[Ht]=tt),{shift:Ut,placedGlyphBoxes:ti}}}placeLayerBucketPart(d,g,T,P){const{bucket:B,layout:X,posMatrix:K,textLabelPlaneMatrix:te,labelToScreenMatrix:he,clippingData:ue,textPixelRatio:Ce,holdingForFade:Ve,collisionBoxArray:Qe,partiallyEvaluatedTextSize:et,partiallyEvaluatedIconSize:tt,collisionGroup:st}=d.parameters,Te=X.get("text-optional"),Ke=X.get("icon-optional"),bt=X.get("text-allow-overlap"),xt=X.get("icon-allow-overlap"),Ht="map"===X.get("text-rotation-alignment"),Gt="map"===X.get("text-pitch-alignment"),Ut="none"!==X.get("icon-text-fit"),ti="viewport-y"===X.get("symbol-z-order");this.transform.setProjection(B.projection);let Qt=bt&&(xt||!B.hasIconData()||Ke),gi=xt&&(bt||!B.hasTextData()||Te);!B.collisionArrays&&Qe&&B.deserializeCollisionBoxes(Qe),T&&P&&B.updateCollisionDebugBuffers(this.transform.zoom,Qe);const Ji=(Zt,Oi,yi)=>{const{crossTileID:Qi,numVerticalGlyphVertices:vi}=Zt;if(ue){const Os={zoom:this.transform.zoom,pitch:this.transform.pitch};let qr=null;if(ue.dynamicFilterNeedsFeature){const Jr=this.retainedQueryData[B.bucketInstanceId];qr=ue.featureIndex.loadFeature({featureIndex:Zt.featureIndex,bucketIndex:Jr.bucketIndex,sourceLayerIndex:Jr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,ue.dynamicFilter)(Os,qr,this.retainedQueryData[B.bucketInstanceId].tileID.canonical,new t.Point(Zt.tileAnchorX,Zt.tileAnchorY),this.transform.calculateDistanceTileData(ue.unwrappedTileID)))return this.placements[Qi]=new dn(!1,!1,!1,!0),void g.add(Qi)}if(g.has(Qi))return;if(Ve)return void(this.placements[Qi]=new dn(!1,!1,!1));let Ii=!1,nn=!1,$i=!0,Ki=!1,Hn=!1,nr=null,Ln={box:null,offscreen:null,occluded:null},Xn={box:null,offscreen:null,occluded:null},Zn=null,tr=null,zn=null,Pr=0,Ur=0,ms=0;yi.textFeatureIndex?Pr=yi.textFeatureIndex:Zt.useRuntimeCollisionCircles&&(Pr=Zt.featureIndex),yi.verticalTextFeatureIndex&&(Ur=yi.verticalTextFeatureIndex);const gs=Os=>{Os.tileID=this.retainedQueryData[B.bucketInstanceId].tileID;const qr=this.transform.elevation;(qr||Os.elevation)&&(Os.elevation=qr?qr.getAtTileOffset(Os.tileID,Os.tileAnchorX,Os.tileAnchorY):0)},cs=yi.textBox;if(cs){gs(cs);const Os=Jr=>{let Ps=t.WritingMode.horizontal;if(B.allowVerticalPlacement&&!Jr&&this.prevPlacement){const Ma=this.prevPlacement.placedOrientations[Qi];Ma&&(this.placedOrientations[Qi]=Ma,Ps=Ma,this.markUsedOrientation(B,Ps,Zt))}return Ps},qr=(Jr,Ps)=>{if(B.allowVerticalPlacement&&vi>0&&yi.verticalTextBox){for(const Ma of B.writingModes)if(Ma===t.WritingMode.vertical?(Ln=Ps(),Xn=Ln):Ln=Jr(),Ln&&Ln.box&&Ln.box.length)break}else Ln=Jr()};if(X.get("text-variable-anchor")){let Jr=X.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Qi]){const xs=this.prevPlacement.variableOffsets[Qi];Jr.indexOf(xs.anchor)>0&&(Jr=Jr.filter(jr=>jr!==xs.anchor),Jr.unshift(xs.anchor))}const Ps=(xs,jr,Cu)=>{const Cl=B.getSymbolInstanceTextSize(et,Zt,this.transform.zoom,Oi),Vl=(xs.x2-xs.x1)*Cl+2*xs.padding,dc=(xs.y2-xs.y1)*Cl+2*xs.padding,El=Ut&&!xt?jr:null;El&&gs(El);let Gc={box:[],offscreen:!1,occluded:!1};const qu=bt?2*Jr.length:Jr.length;for(let jc=0;jc<qu;++jc){const Va=this.attemptAnchorPlacement(Jr[jc%Jr.length],xs,Vl,dc,Cl,Ht,Gt,Ce,K,st,jc>=Jr.length,Zt,Oi,B,Cu,El,et,tt);if(Va&&(Gc=Va.placedGlyphBoxes,Gc&&Gc.box&&Gc.box.length)){Ii=!0,nr=Va.shift;break}}return Gc};qr(()=>Ps(cs,yi.iconBox,t.WritingMode.horizontal),()=>{const xs=yi.verticalTextBox;return xs&&gs(xs),B.allowVerticalPlacement&&!(Ln&&Ln.box&&Ln.box.length)&&vi>0&&xs?Ps(xs,yi.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ln&&(Ii=Ln.box,$i=Ln.offscreen,Ki=Ln.occluded);const Ma=Os(!(!Ln||!Ln.box));if(!Ii&&this.prevPlacement){const xs=this.prevPlacement.variableOffsets[Qi];xs&&(this.variableOffsets[Qi]=xs,this.markUsedJustification(B,xs.anchor,Zt,Ma))}}else{const Jr=(Ps,Ma)=>{const xs=B.getSymbolInstanceTextSize(et,Zt,this.transform.zoom,Oi),jr=this.collisionIndex.placeCollisionBox(B,xs,Ps,new t.Point(0,0),bt,Ce,K,st.predicate);return jr&&jr.box&&jr.box.length&&(this.markUsedOrientation(B,Ma,Zt),this.placedOrientations[Qi]=Ma),jr};qr(()=>Jr(cs,t.WritingMode.horizontal),()=>{const Ps=yi.verticalTextBox;return B.allowVerticalPlacement&&vi>0&&Ps?(gs(Ps),Jr(Ps,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Os(!!(Ln&&Ln.box&&Ln.box.length))}}if(Zn=Ln,Ii=Zn&&Zn.box&&Zn.box.length>0,$i=Zn&&Zn.offscreen,Ki=Zn&&Zn.occluded,Zt.useRuntimeCollisionCircles){const Os=B.text.placedSymbolArray.get(Zt.centerJustifiedTextSymbolIndex>=0?Zt.centerJustifiedTextSymbolIndex:Zt.verticalPlacedTextSymbolIndex),qr=t.evaluateSizeForFeature(B.textSizeData,et,Os),Jr=X.get("text-padding");tr=this.collisionIndex.placeCollisionCircles(B,bt,Os,B.lineVertexArray,B.glyphOffsetArray,qr,K,te,he,T,Gt,st.predicate,Zt.collisionCircleDiameter*qr/t.ONE_EM,Jr,this.retainedQueryData[B.bucketInstanceId].tileID),Ii=bt||tr.circles.length>0&&!tr.collisionDetected,$i=$i&&tr.offscreen,Ki=tr.occluded}if(yi.iconFeatureIndex&&(ms=yi.iconFeatureIndex),yi.iconBox){const Os=qr=>{gs(qr);const Jr=Ut&&nr?lr(nr.x,nr.y,Ht,Gt,this.transform.angle):new t.Point(0,0),Ps=B.getSymbolInstanceIconSize(tt,this.transform.zoom,Zt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(B,Ps,qr,Jr,xt,Ce,K,st.predicate)};Xn&&Xn.box&&Xn.box.length&&yi.verticalIconBox?(zn=Os(yi.verticalIconBox),nn=zn.box.length>0):(zn=Os(yi.iconBox),nn=zn.box.length>0),$i=$i&&zn.offscreen,Hn=zn.occluded}const Ls=Te||0===Zt.numHorizontalGlyphVertices&&0===vi,ka=Ke||0===Zt.numIconVertices;if(Ls||ka?ka?Ls||(nn=nn&&Ii):Ii=nn&&Ii:nn=Ii=nn&&Ii,Ii&&Zn&&Zn.box&&this.collisionIndex.insertCollisionBox(Zn.box,X.get("text-ignore-placement"),B.bucketInstanceId,Xn&&Xn.box&&Ur?Ur:Pr,st.ID),nn&&zn&&this.collisionIndex.insertCollisionBox(zn.box,X.get("icon-ignore-placement"),B.bucketInstanceId,ms,st.ID),tr&&(Ii&&this.collisionIndex.insertCollisionCircles(tr.circles,X.get("text-ignore-placement"),B.bucketInstanceId,Pr,st.ID),T)){const Os=B.bucketInstanceId;let qr=this.collisionCircleArrays[Os];void 0===qr&&(qr=this.collisionCircleArrays[Os]=new En);for(let Jr=0;Jr<tr.circles.length;Jr+=4)qr.circles.push(tr.circles[Jr+0]),qr.circles.push(tr.circles[Jr+1]),qr.circles.push(tr.circles[Jr+2]),qr.circles.push(tr.collisionDetected?1:0)}const qo="globe"!==B.projection.name;Qt=Qt&&(qo||!Ki),gi=gi&&(qo||!Hn),this.placements[Qi]=new dn(Ii||Qt,nn||gi,$i||B.justReloaded),g.add(Qi)};if(ti){const Zt=B.getSortedSymbolIndexes(this.transform.angle);for(let Oi=Zt.length-1;Oi>=0;--Oi){const yi=Zt[Oi];Ji(B.symbolInstances.get(yi),yi,B.collisionArrays[yi])}}else for(let Zt=d.symbolInstanceStart;Zt<d.symbolInstanceEnd;Zt++)Ji(B.symbolInstances.get(Zt),Zt,B.collisionArrays[Zt]);if(T&&B.bucketInstanceId in this.collisionCircleArrays){const Zt=this.collisionCircleArrays[B.bucketInstanceId];t.invert(Zt.invProjMatrix,K),Zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}B.justReloaded=!1}markUsedJustification(d,g,T,P){const{leftJustifiedTextSymbolIndex:B,centerJustifiedTextSymbolIndex:X,rightJustifiedTextSymbolIndex:K,verticalPlacedTextSymbolIndex:te,crossTileID:he}=T,ue=t.getAnchorJustification(g),Ce=P===t.WritingMode.vertical?te:"left"===ue?B:"center"===ue?X:"right"===ue?K:-1;B>=0&&(d.text.placedSymbolArray.get(B).crossTileID=Ce>=0&&B!==Ce?0:he),X>=0&&(d.text.placedSymbolArray.get(X).crossTileID=Ce>=0&&X!==Ce?0:he),K>=0&&(d.text.placedSymbolArray.get(K).crossTileID=Ce>=0&&K!==Ce?0:he),te>=0&&(d.text.placedSymbolArray.get(te).crossTileID=Ce>=0&&te!==Ce?0:he)}markUsedOrientation(d,g,T){const P=g===t.WritingMode.horizontal||g===t.WritingMode.horizontalOnly?g:0,B=g===t.WritingMode.vertical?g:0,{leftJustifiedTextSymbolIndex:X,centerJustifiedTextSymbolIndex:K,rightJustifiedTextSymbolIndex:te,verticalPlacedTextSymbolIndex:he}=T,ue=d.text.placedSymbolArray;X>=0&&(ue.get(X).placedOrientation=P),K>=0&&(ue.get(K).placedOrientation=P),te>=0&&(ue.get(te).placedOrientation=P),he>=0&&(ue.get(he).placedOrientation=B)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const g=this.prevPlacement;let T=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;const P=g?g.symbolFadeChange(d):1,B=g?g.opacities:{},X=g?g.variableOffsets:{},K=g?g.placedOrientations:{};for(const te in this.placements){const he=this.placements[te],ue=B[te];ue?(this.opacities[te]=new Mi(ue,P,he.text,he.icon,null,he.clipped),T=T||he.text!==ue.text.placed||he.icon!==ue.icon.placed):(this.opacities[te]=new Mi(null,P,he.text,he.icon,he.skipFade,he.clipped),T=T||he.text||he.icon)}for(const te in B){const he=B[te];if(!this.opacities[te]){const ue=new Mi(he,P,!1,!1);ue.isHidden()||(this.opacities[te]=ue,T=T||he.text.placed||he.icon.placed)}}for(const te in X)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=X[te]);for(const te in K)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=K[te]);T?this.lastPlacementChangeTime=d:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:d)}updateLayerOpacities(d,g){const T=new Set;for(const P of g){const B=P.getBucket(d);B&&P.latestFeatureIndex&&d.id===B.layerIds[0]&&this.updateBucketOpacities(B,T,P.collisionBoxArray)}}updateBucketOpacities(d,g,T){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const P=d.layers[0].layout,B=!!d.layers[0].dynamicFilter(),X=new Mi(null,0,!1,!1,!0),K=P.get("text-allow-overlap"),te=P.get("icon-allow-overlap"),he=P.get("text-variable-anchor"),ue="map"===P.get("text-rotation-alignment"),Ce="map"===P.get("text-pitch-alignment"),Ve="none"!==P.get("icon-text-fit"),Qe=new Mi(null,0,K&&(te||!d.hasIconData()||P.get("icon-optional")),te&&(K||!d.hasTextData()||P.get("text-optional")),!0);!d.collisionArrays&&T&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(T);const et=(st,Te,Ke)=>{for(let bt=0;bt<Te/4;bt++)st.opacityVertexArray.emplaceBack(Ke)};let tt=0;for(let st=0;st<d.symbolInstances.length;st++){const Te=d.symbolInstances.get(st),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:bt,crossTileID:xt,numIconVertices:Ht}=Te,Gt=g.has(xt);let Ut=this.opacities[xt];Gt?Ut=X:Ut||(Ut=Qe,this.opacities[xt]=Ut),g.add(xt);const ti=Ke>0||bt>0,Qt=Ht>0,gi=this.placedOrientations[xt],Ji=gi===t.WritingMode.vertical,Zt=gi===t.WritingMode.horizontal||gi===t.WritingMode.horizontalOnly;if(!ti&&!Qt||Ut.isHidden()||tt++,ti){const Oi=ba(Ut.text);et(d.text,Ke,Ji?hs:Oi),et(d.text,bt,Zt?hs:Oi);const yi=Ut.text.isHidden(),{leftJustifiedTextSymbolIndex:Qi,centerJustifiedTextSymbolIndex:vi,rightJustifiedTextSymbolIndex:Ii,verticalPlacedTextSymbolIndex:nn}=Te,$i=d.text.placedSymbolArray,Ki=yi||Ji?1:0;Qi>=0&&($i.get(Qi).hidden=Ki),vi>=0&&($i.get(vi).hidden=Ki),Ii>=0&&($i.get(Ii).hidden=Ki),nn>=0&&($i.get(nn).hidden=yi||Zt?1:0);const Hn=this.variableOffsets[xt];Hn&&this.markUsedJustification(d,Hn.anchor,Te,gi);const nr=this.placedOrientations[xt];nr&&(this.markUsedJustification(d,"left",Te,nr),this.markUsedOrientation(d,nr,Te))}if(Qt){const Oi=ba(Ut.icon),{placedIconSymbolIndex:yi,verticalPlacedIconSymbolIndex:Qi}=Te,vi=d.icon.placedSymbolArray,Ii=Ut.icon.isHidden()?1:0;yi>=0&&(et(d.icon,Ht,Ji?hs:Oi),vi.get(yi).hidden=Ii),Qi>=0&&(et(d.icon,Te.numVerticalIconVertices,Zt?hs:Oi),vi.get(Qi).hidden=Ii)}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const Oi=d.collisionArrays[st];if(Oi){let yi=new t.Point(0,0),Qi=!0;if(Oi.textBox||Oi.verticalTextBox){if(he){const Ii=this.variableOffsets[xt];Ii?(yi=ar(Ii.anchor,Ii.width,Ii.height,Ii.textOffset,Ii.textScale),ue&&yi._rotate(Ce?this.transform.angle:-this.transform.angle)):Qi=!1}B&&(Qi=!Ut.clipped),Oi.textBox&&Hr(d.textCollisionBox.collisionVertexArray,Ut.text.placed,!Qi||Ji,yi.x,yi.y),Oi.verticalTextBox&&Hr(d.textCollisionBox.collisionVertexArray,Ut.text.placed,!Qi||Zt,yi.x,yi.y)}const vi=Qi&&!(Zt||!Oi.verticalIconBox);Oi.iconBox&&Hr(d.iconCollisionBox.collisionVertexArray,Ut.icon.placed,vi,Ve?yi.x:0,Ve?yi.y:0),Oi.verticalIconBox&&Hr(d.iconCollisionBox.collisionVertexArray,Ut.icon.placed,!vi,Ve?yi.x:0,Ve?yi.y:0)}}}if(d.fullyClipped=0===tt,d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){const st=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=st.invProjMatrix,d.placementViewportMatrix=st.viewportMatrix,d.collisionCircleArray=st.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return 0===this.fadeDuration?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,g){const T=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*T>d}setStale(){this.stale=!0}}function Hr(C,d,g,T,P){C.emplaceBack(d?1:0,g?1:0,T||0,P||0),C.emplaceBack(d?1:0,g?1:0,T||0,P||0),C.emplaceBack(d?1:0,g?1:0,T||0,P||0),C.emplaceBack(d?1:0,g?1:0,T||0,P||0)}const Wr=Math.pow(2,25),Mr=Math.pow(2,24),qn=Math.pow(2,17),as=Math.pow(2,16),$n=Math.pow(2,9),Xr=Math.pow(2,8),ul=Math.pow(2,1);function ba(C){if(0===C.opacity&&!C.placed)return 0;if(1===C.opacity&&C.placed)return 4294967295;const d=C.placed?1:0,g=Math.floor(127*C.opacity);return g*Wr+d*Mr+g*qn+d*as+g*$n+d*Xr+g*ul+d}const hs=0;class Yo{constructor(d){this._sortAcrossTiles="viewport-y"!==d.layout.get("symbol-z-order")&&void 0!==d.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(d,g,T,P,B){const X=this._bucketParts;for(;this._currentTileIndex<d.length;)if(g.getBucketParts(X,P,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,X.sort((K,te)=>K.sortKey-te.sortKey));this._currentPartIndex<X.length;){const K=X[this._currentPartIndex];if(g.placeLayerBucketPart(K,this._seenCrossTileIDs,T,0===K.symbolInstanceStart),this._currentPartIndex++,B())return!0}return!1}}class rc{constructor(d,g,T,P,B,X,K,te){this.placement=new Lr(d,B,X,K,te),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=T,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(d,g,T){const P=t.exported.now(),B=()=>{const X=t.exported.now()-P;return!this._forceFullPlacement&&X>2};for(;this._currentPlacementIndex>=0;){const X=g[d[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if("symbol"===X.type&&(!X.minzoom||X.minzoom<=K)&&(!X.maxzoom||X.maxzoom>K)){if(this._inProgressLayer||(this._inProgressLayer=new Yo(X)),this._inProgressLayer.continuePlacement(T[X.source],this.placement,this._showCollisionBoxes,X,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const Io=512/t.EXTENT/2;class Zr{constructor(d,g,T){this.tileID=d,this.bucketInstanceId=T,this.index=new t.KDBush(g.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const P=d.canonical.x*t.EXTENT,B=d.canonical.y*t.EXTENT;for(let X=0;X<g.length;X++){const{key:K,crossTileID:te,tileAnchorX:he,tileAnchorY:ue}=g.get(X),Ce=Math.floor((P+he)*Io),Ve=Math.floor((B+ue)*Io);this.index.add(Ce,Ve),this.keys.push(K),this.crossTileIDs.push(te)}this.index.finish()}findMatches(d,g,T){const P=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z),B=Io/Math.pow(2,g.canonical.z-this.tileID.canonical.z),X=g.canonical.x*t.EXTENT,K=g.canonical.y*t.EXTENT;for(let te=0;te<d.length;te++){const he=d.get(te);if(he.crossTileID)continue;const{key:ue,tileAnchorX:Ce,tileAnchorY:Ve}=he,Qe=Math.floor((X+Ce)*B),et=Math.floor((K+Ve)*B),tt=this.index.range(Qe-P,et-P,Qe+P,et+P);for(const st of tt){const Te=this.crossTileIDs[st];if(this.keys[st]===ue&&!T.has(Te)){T.add(Te),he.crossTileID=Te;break}}}}}class ao{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class dl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const g=Math.round((d-this.lng)/360);if(0!==g)for(const T in this.indexes){const P=this.indexes[T],B={};for(const X in P){const K=P[X];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+g),B[K.tileID.key]=K}this.indexes[T]=B}this.lng=d}addBucket(d,g,T){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let B=0;B<g.symbolInstances.length;B++)g.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]=new Set);const P=this.usedCrossTileIDs[d.overscaledZ];for(const B in this.indexes){const X=this.indexes[B];if(Number(B)>d.overscaledZ)for(const K in X){const te=X[K];te.tileID.isChildOf(d)&&te.findMatches(g.symbolInstances,d,P)}else{const K=X[d.scaledTo(Number(B)).key];K&&K.findMatches(g.symbolInstances,d,P)}}for(let B=0;B<g.symbolInstances.length;B++){const X=g.symbolInstances.get(B);X.crossTileID||(X.crossTileID=T.generate(),P.add(X.crossTileID))}return void 0===this.indexes[d.overscaledZ]&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Zr(d,g.symbolInstances,g.bucketInstanceId),!0}removeBucketCrossTileIDs(d,g){for(const T of g.crossTileIDs)this.usedCrossTileIDs[d].delete(T)}removeStaleBuckets(d){let g=!1;for(const T in this.indexes){const P=this.indexes[T];for(const B in P)d[P[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,P[B]),delete P[B],g=!0)}return g}}class Oa{constructor(){this.layerIndexes={},this.crossTileIDs=new ao,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,g,T,P){let B=this.layerIndexes[d.id];void 0===B&&(B=this.layerIndexes[d.id]=new dl);let X=!1;const K={};"globe"!==P.name&&B.handleWrapJump(T);for(const te of g){const he=te.getBucket(d);he&&d.id===he.layerIds[0]&&(he.bucketInstanceId||(he.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(te.tileID,he,this.crossTileIDs)&&(X=!0),K[he.bucketInstanceId]=!0)}return B.removeStaleBuckets(K)&&(X=!0),X}pruneUnusedLayers(d){const g={};d.forEach(T=>{g[T]=!0});for(const T in this.layerIndexes)g[T]||delete this.layerIndexes[T]}}const ia=(C,d)=>t.emitValidationErrors(C,d&&d.filter(g=>"source.canvas"!==g.identifier)),Ml=t.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),_c=t.pick(it,["setCenter","setZoom","setBearing","setPitch"]),gu={version:8,layers:[],sources:{}},Al={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class vr extends t.Evented{constructor(d,g={}){super(),this.map=d,this.dispatcher=new Fi(rt(),this),this.imageManager=new Xt,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(d._requestManager,g.localFontFamily?t.LocalGlyphMode.all:g.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,g.localFontFamily||g.localIdeographFontFamily),this.crossTileSymbolIndex=new Oa,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const T=this;this._rtlTextPluginCallback=vr.registerForPluginStateChange(P=>{T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:P.pluginStatus,pluginURL:P.pluginURL},(B,X)=>{if(t.triggerPluginCompletionEvent(B),X&&X.every(K=>K))for(const K in T._sourceCaches){const te=T._sourceCaches[K],he=te.getSource().type;"vector"!==he&&"geojson"!==he||te.reload()}})}),this.on("data",P=>{if("source"!==P.dataType||"metadata"!==P.sourceDataType)return;const B=this.getSource(P.sourceId);if(B&&B.vectorLayerIds)for(const X in this._layers){const K=this._layers[X];K.source===B.id&&this._validateLayer(K)}})}loadURL(d,g={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const T="boolean"==typeof g.validate?g.validate:!t.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,g.accessToken);const P=this.map._requestManager.transformRequest(d,t.ResourceType.Style);this._request=t.getJSON(P,(B,X)=>{this._request=null,B?this.fire(new t.ErrorEvent(B)):X&&this._load(X,T)})}loadJSON(d,g={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame(()=>{this._request=null,this._load(d,!1!==g.validate)})}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(gu,!1)}_updateLayerCount(d,g){const T=g?1:-1;d.is3D()&&(this._num3DLayers+=T),"circle"===d.type&&(this._numCircleLayers+=T),"symbol"===d.type&&(this._numSymbolLayers+=T)}_load(d,g){if(g&&ia(this,t.validateStyle(d)))return;this._loaded=!0,this.stylesheet=t.clone$1(d),this._updateMapProjection();for(const P in d.sources)this.addSource(P,d.sources[P],{validate:!1});this._changed=!1,d.sprite?this._loadSprite(d.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(d.glyphs);const T=fe(this.stylesheet.layers);this._order=T.map(P=>P.id),this._layers={},this._serializedLayers={};for(const P of T){const B=t.createStyleLayer(P);B.setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize(),this._updateLayerCount(B,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ht(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(d){d?this.stylesheet.projection=d:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(d){this._spriteRequest=function(g,T,P){let B,X,K;const te=t.exported.devicePixelRatio>1?"@2x":"";let he=t.getJSON(T.transformRequest(T.normalizeSpriteURL(g,te,".json"),t.ResourceType.SpriteJSON),(Ve,Qe)=>{he=null,K||(K=Ve,B=Qe,Ce())}),ue=t.getImage(T.transformRequest(T.normalizeSpriteURL(g,te,".png"),t.ResourceType.SpriteImage),(Ve,Qe)=>{ue=null,K||(K=Ve,X=Qe,Ce())});function Ce(){if(K)P(K);else if(B&&X){const Ve=t.exported.getImageData(X),Qe={};for(const et in B){const{width:tt,height:st,x:Te,y:Ke,sdf:bt,pixelRatio:xt,stretchX:Ht,stretchY:Gt,content:Ut}=B[et],ti=new t.RGBAImage({width:tt,height:st});t.RGBAImage.copy(Ve,ti,{x:Te,y:Ke},{x:0,y:0},{width:tt,height:st}),Qe[et]={data:ti,pixelRatio:xt,sdf:bt,stretchX:Ht,stretchY:Gt,content:Ut}}P(null,Qe)}}return{cancel(){he&&(he.cancel(),he=null),ue&&(ue.cancel(),ue=null)}}}(d,this.map._requestManager,(g,T)=>{if(this._spriteRequest=null,g)this.fire(new t.ErrorEvent(g));else if(T)for(const P in T)this.imageManager.addImage(P,T[P]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))})}_validateLayer(d){const g=this.getSource(d.source);if(!g)return;const T=d.sourceLayer;T&&("geojson"===g.type||g.vectorLayerIds&&-1===g.vectorLayerIds.indexOf(T))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${T}" does not exist on source "${g.id}" as specified by style layer "${d.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this._sourceCaches)if(!this._sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const g=[];for(const T of d){const P=this._layers[T];"custom"!==P.type&&g.push(P.serialize())}return g}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const d in this._sourceCaches)if(this._sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(d){return!!this.terrain&&("function"==typeof d.isLayerDraped?d.isLayerDraped():Al[d.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(d){if(!this._loaded)return;const g=this._changed;if(this._changed){const P=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(P.length||B.length)&&this._updateWorkerLayers(P,B);for(const X in this._updatedSources){const K=this._updatedSources[X];"reload"===K?this._reloadSource(X):"clear"===K&&this._clearSource(X)}this._updateTilesForChangedImages();for(const X in this._updatedPaintProps)this._layers[X].updateTransitions(d);this.light.updateTransitions(d),this.fog&&this.fog.updateTransitions(d),this._resetUpdates()}const T={};for(const P in this._sourceCaches){const B=this._sourceCaches[P];T[P]=B.used,B.used=!1}for(const P of this._order){const B=this._layers[P];if(B.recalculate(d,this._availableImages),!B.isHidden(d.zoom)){const K=this._getLayerSourceCache(B);K&&(K.used=!0)}const X=this.map.painter;if(X){const K=B.getProgramIds();if(!K)continue;const te=B.getProgramConfiguration(d.zoom);for(const he of K)X.useProgram(he,te)}}for(const P in T){const B=this._sourceCaches[P];T[P]!==B.used&&B.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:B.getSource().id}))}this.light.recalculate(d),this.terrain&&this.terrain.recalculate(d),this.fog&&this.fog.recalculate(d),this.z=d.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),g&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const g in this._sourceCaches)this._sourceCaches[g].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,g){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:g})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(d){if(this._checkLoaded(),ia(this,t.validateStyle(d)))return!1;(d=t.clone$1(d)).layers=fe(d.layers);const g=function(P,B){if(!P)return[{command:it.setStyle,args:[B]}];let X=[];try{if(!V(P.version,B.version))return[{command:it.setStyle,args:[B]}];V(P.center,B.center)||X.push({command:it.setCenter,args:[B.center]}),V(P.zoom,B.zoom)||X.push({command:it.setZoom,args:[B.zoom]}),V(P.bearing,B.bearing)||X.push({command:it.setBearing,args:[B.bearing]}),V(P.pitch,B.pitch)||X.push({command:it.setPitch,args:[B.pitch]}),V(P.sprite,B.sprite)||X.push({command:it.setSprite,args:[B.sprite]}),V(P.glyphs,B.glyphs)||X.push({command:it.setGlyphs,args:[B.glyphs]}),V(P.transition,B.transition)||X.push({command:it.setTransition,args:[B.transition]}),V(P.light,B.light)||X.push({command:it.setLight,args:[B.light]}),V(P.fog,B.fog)||X.push({command:it.setFog,args:[B.fog]}),V(P.projection,B.projection)||X.push({command:it.setProjection,args:[B.projection]});const K={},te=[];!function(Ce,Ve,Qe,et){let tt;for(tt in Ve=Ve||{},Ce=Ce||{})Ce.hasOwnProperty(tt)&&(Ve.hasOwnProperty(tt)||Pe(tt,Qe,et));for(tt in Ve){if(!Ve.hasOwnProperty(tt))continue;const st=Ve[tt];Ce.hasOwnProperty(tt)?V(Ce[tt],st)||("geojson"===Ce[tt].type&&"geojson"===st.type&&le(Ce,Ve,tt)?Qe.push({command:it.setGeoJSONSourceData,args:[tt,st.data]}):Lt(tt,Ve,Qe,et)):Tt(tt,Ve,Qe)}}(P.sources,B.sources,te,K);const he=[];P.layers&&P.layers.forEach(Ce=>{Ce.source&&K[Ce.source]?X.push({command:it.removeLayer,args:[Ce.id]}):he.push(Ce)});let ue=P.terrain;ue&&K[ue.source]&&(X.push({command:it.setTerrain,args:[void 0]}),ue=void 0),X=X.concat(te),V(ue,B.terrain)||X.push({command:it.setTerrain,args:[B.terrain]}),function(Ce,Ve,Qe){Ve=Ve||[];const et=(Ce=Ce||[]).map(c),tt=Ve.map(c),st=Ce.reduce(h,{}),Te=Ve.reduce(h,{}),Ke=et.slice(),bt=Object.create(null);let xt,Ht,Gt,Ut,ti,Qt,gi;for(xt=0,Ht=0;xt<et.length;xt++)Gt=et[xt],Te.hasOwnProperty(Gt)?Ht++:(Qe.push({command:it.removeLayer,args:[Gt]}),Ke.splice(Ke.indexOf(Gt,Ht),1));for(xt=0,Ht=0;xt<tt.length;xt++)Gt=tt[tt.length-1-xt],Ke[Ke.length-1-xt]!==Gt&&(st.hasOwnProperty(Gt)?(Qe.push({command:it.removeLayer,args:[Gt]}),Ke.splice(Ke.lastIndexOf(Gt,Ke.length-Ht),1)):Ht++,Qt=Ke[Ke.length-xt],Qe.push({command:it.addLayer,args:[Te[Gt],Qt]}),Ke.splice(Ke.length-xt,0,Gt),bt[Gt]=!0);for(xt=0;xt<tt.length;xt++)if(Gt=tt[xt],Ut=st[Gt],ti=Te[Gt],!bt[Gt]&&!V(Ut,ti))if(V(Ut.source,ti.source)&&V(Ut["source-layer"],ti["source-layer"])&&V(Ut.type,ti.type)){for(gi in o(Ut.layout,ti.layout,Qe,Gt,null,it.setLayoutProperty),o(Ut.paint,ti.paint,Qe,Gt,null,it.setPaintProperty),V(Ut.filter,ti.filter)||Qe.push({command:it.setFilter,args:[Gt,ti.filter]}),V(Ut.minzoom,ti.minzoom)&&V(Ut.maxzoom,ti.maxzoom)||Qe.push({command:it.setLayerZoomRange,args:[Gt,ti.minzoom,ti.maxzoom]}),Ut)Ut.hasOwnProperty(gi)&&"layout"!==gi&&"paint"!==gi&&"filter"!==gi&&"metadata"!==gi&&"minzoom"!==gi&&"maxzoom"!==gi&&(0===gi.indexOf("paint.")?o(Ut[gi],ti[gi],Qe,Gt,gi.slice(6),it.setPaintProperty):V(Ut[gi],ti[gi])||Qe.push({command:it.setLayerProperty,args:[Gt,gi,ti[gi]]}));for(gi in ti)ti.hasOwnProperty(gi)&&!Ut.hasOwnProperty(gi)&&"layout"!==gi&&"paint"!==gi&&"filter"!==gi&&"metadata"!==gi&&"minzoom"!==gi&&"maxzoom"!==gi&&(0===gi.indexOf("paint.")?o(Ut[gi],ti[gi],Qe,Gt,gi.slice(6),it.setPaintProperty):V(Ut[gi],ti[gi])||Qe.push({command:it.setLayerProperty,args:[Gt,gi,ti[gi]]}))}else Qe.push({command:it.removeLayer,args:[Gt]}),Qt=Ke[Ke.lastIndexOf(Gt)+1],Qe.push({command:it.addLayer,args:[ti,Qt]})}(he,B.layers,X)}catch(K){console.warn("Unable to compute style diff:",K),X=[{command:it.setStyle,args:[B]}]}return X}(this.serialize(),d).filter(P=>!(P.command in _c));if(0===g.length)return!1;const T=g.filter(P=>!(P.command in Ml));if(T.length>0)throw new Error(`Unimplemented: ${T.map(P=>P.command).join(", ")}.`);return g.forEach(P=>{"setTransition"!==P.command&&"setProjection"!==P.command&&this[P.command].apply(this,P.args)}),this.stylesheet=d,this._updateMapProjection(),!0}addImage(d,g){return this.getImage(d)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(d,g),this._afterImageUpdated(d),this)}updateImage(d,g){this.imageManager.updateImage(d,g)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){return this.getImage(d)?(this.imageManager.removeImage(d),this._afterImageUpdated(d),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(d,g,T={}){if(this._checkLoaded(),void 0!==this.getSource(d))throw new Error("There is already a source with this ID");if(!g.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(g).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(t.validateSource,`sources.${d}`,g,null,T))return;this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);const P=qe(d,g,this.dispatcher,this);P.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(d),source:P.serialize(),sourceId:d}));const B=X=>{const K=(X?"symbol:":"other:")+d,te=this._sourceCaches[K]=new t.SourceCache(K,P,X);(X?this._symbolSourceCaches:this._otherSourceCaches)[d]=te,te.style=this,te.onAdd(this.map)};B(!1),"vector"!==g.type&&"geojson"!==g.type||B(!0),P.onAdd&&P.onAdd(this.map),this._changed=!0}removeSource(d){this._checkLoaded();const g=this.getSource(d);if(!g)throw new Error("There is no source with this ID");for(const P in this._layers)if(this._layers[P].source===d)return this.fire(new t.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${P}" is using it.`)));if(this.terrain&&this.terrain.get().source===d)return this.fire(new t.ErrorEvent(new Error(`Source "${d}" cannot be removed while terrain is using it.`)));const T=this._getSourceCaches(d);for(const P of T)delete this._sourceCaches[P.id],delete this._updatedSources[P.id],P.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:P.getSource().id})),P.setEventedParent(null),P.clearTiles();return delete this._otherSourceCaches[d],delete this._symbolSourceCaches[d],g.setEventedParent(null),g.onRemove&&g.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(d,g){this._checkLoaded(),this.getSource(d).setData(g),this._changed=!0}getSource(d){const g=this._getSourceCache(d);return g&&g.getSource()}_getSources(){const d=[];for(const g in this._otherSourceCaches){const T=this._getSourceCache(g);T&&d.push(T.getSource())}return d}addLayer(d,g,T={}){this._checkLoaded();const P=d.id;if(this.getLayer(P))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${P}" already exists on this map`)));let B;if("custom"===d.type){if(ia(this,t.validateCustomStyleLayer(d)))return;B=t.createStyleLayer(d)}else{if("object"==typeof d.source&&(this.addSource(P,d.source),d=t.clone$1(d),d=t.extend(d,{source:P})),this._validate(t.validateLayer,`layers.${P}`,d,{arrayIndex:-1},T))return;B=t.createStyleLayer(d),this._validateLayer(B),B.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[B.id]=B.serialize(),this._updateLayerCount(B,!0)}const X=g?this._order.indexOf(g):this._order.length;if(g&&-1===X)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`)));this._order.splice(X,0,P),this._layerOrderChanged=!0,this._layers[P]=B;const K=this._getLayerSourceCache(B);if(this._removedLayers[P]&&B.source&&K&&"custom"!==B.type){const te=this._removedLayers[P];delete this._removedLayers[P],te.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",K.pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(d,g){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new t.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===g)return;const T=this._order.indexOf(d);this._order.splice(T,1);const P=g?this._order.indexOf(g):this._order.length;g&&-1===P?this.fire(new t.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`))):(this._order.splice(P,0,d),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(d){this._checkLoaded();const g=this._layers[d];if(!g)return void this.fire(new t.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be removed.`)));g.setEventedParent(null),this._updateLayerCount(g,!1);const T=this._order.indexOf(d);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=g,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],g.onRemove&&g.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}hasLayerType(d){for(const g in this._layers)if(this._layers[g].type===d)return!0;return!1}setLayerZoomRange(d,g,T){this._checkLoaded();const P=this.getLayer(d);P?P.minzoom===g&&P.maxzoom===T||(null!=g&&(P.minzoom=g),null!=T&&(P.maxzoom=T),this._updateLayer(P)):this.fire(new t.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(d,g,T={}){this._checkLoaded();const P=this.getLayer(d);if(P){if(!V(P.filter,g))return null==g?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(t.validateFilter,`layers.${P.id}.filter`,g,{layerType:P.type},T)||(P.filter=t.clone$1(g),this._updateLayer(P)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be filtered.`)))}getFilter(d){const g=this.getLayer(d);return g&&t.clone$1(g.filter)}setLayoutProperty(d,g,T,P={}){this._checkLoaded();const B=this.getLayer(d);B?V(B.getLayoutProperty(g),T)||(B.setLayoutProperty(g,T,P),this._updateLayer(B)):this.fire(new t.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(d,g){const T=this.getLayer(d);if(T)return T.getLayoutProperty(g);this.fire(new t.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style.`)))}setPaintProperty(d,g,T,P={}){this._checkLoaded();const B=this.getLayer(d);B?V(B.getPaintProperty(g),T)||(B.setPaintProperty(g,T,P)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(d,g){const T=this.getLayer(d);return T&&T.getPaintProperty(g)}setFeatureState(d,g){this._checkLoaded();const T=d.source,P=d.sourceLayer,B=this.getSource(T);if(!B)return void this.fire(new t.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const X=B.type;if("geojson"===X&&P)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===X&&!P)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===d.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const K=this._getSourceCaches(T);for(const te of K)te.setFeatureState(P,d.id,g)}removeFeatureState(d,g){this._checkLoaded();const T=d.source,P=this.getSource(T);if(!P)return void this.fire(new t.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const B=P.type,X="vector"===B?d.sourceLayer:void 0;if("vector"===B&&!X)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(g&&"string"!=typeof d.id&&"number"!=typeof d.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const K=this._getSourceCaches(T);for(const te of K)te.removeFeatureState(X,d.id,g)}getFeatureState(d){this._checkLoaded();const g=d.source,T=d.sourceLayer,P=this.getSource(g);if(P){if("vector"!==P.type||T)return void 0===d.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(g)[0].getFeatureState(T,d.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const d={};for(const g in this._sourceCaches){const T=this._sourceCaches[g].getSource();d[T.id]||(d[T.id]=T.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:d,layers:this._serializeLayers(this._order)},g=>void 0!==g)}_updateLayer(d){this._updatedLayers[d.id]=!0;const g=this._getLayerSourceCache(d);d.source&&!this._updatedSources[d.source]&&g&&"raster"!==g.getSource().type&&(this._updatedSources[d.source]="reload",g.pause()),this._changed=!0,d.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(d){const g=X=>"fill-extrusion"===this._layers[X].type,T={},P=[];for(let X=this._order.length-1;X>=0;X--){const K=this._order[X];if(g(K)){T[K]=X;for(const te of d){const he=te[K];if(he)for(const ue of he)P.push(ue)}}}P.sort((X,K)=>K.intersectionZ-X.intersectionZ);const B=[];for(let X=this._order.length-1;X>=0;X--){const K=this._order[X];if(g(K))for(let te=P.length-1;te>=0;te--){const he=P[te].feature;if(T[he.layer.id]<X)break;B.push(he),P.pop()}else for(const te of d){const he=te[K];if(he)for(const ue of he)B.push(ue.feature)}}return B}queryRenderedFeatures(d,g,T){g&&g.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",g.filter,null,g);const P={};if(g&&g.layers){if(!Array.isArray(g.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const te of g.layers){const he=this._layers[te];if(!he)return this.fire(new t.ErrorEvent(new Error(`The layer '${te}' does not exist in the map's style and cannot be queried for features.`))),[];P[he.source]=!0}}const B=[];g.availableImages=this._availableImages;const X=g&&g.layers?g.layers.some(te=>{const he=this.getLayer(te);return he&&he.is3D()}):this.has3DLayers(),K=xn.createFromScreenPoints(d,T);for(const te in this._sourceCaches){const he=this._sourceCaches[te].getSource().id;g.layers&&!P[he]||B.push(ze(this._sourceCaches[te],this._layers,this._serializedLayers,K,g,T,X,!!this.map._showQueryGeometry))}return this.placement&&B.push(function(te,he,ue,Ce,Ve,Qe,et){const tt={},st=Qe.queryRenderedSymbols(Ce),Te=[];for(const Ke of Object.keys(st).map(Number))Te.push(et[Ke]);Te.sort(ft);for(const Ke of Te){const bt=Ke.featureIndex.lookupSymbolFeatures(st[Ke.bucketInstanceId],he,Ke.bucketIndex,Ke.sourceLayerIndex,Ve.filter,Ve.layers,Ve.availableImages,te);for(const xt in bt){const Ht=tt[xt]=tt[xt]||[],Gt=bt[xt];Gt.sort((Ut,ti)=>{const Qt=Ke.featureSortOrder;if(Qt){const gi=Qt.indexOf(Ut.featureIndex);return Qt.indexOf(ti.featureIndex)-gi}return ti.featureIndex-Ut.featureIndex});for(const Ut of Gt)Ht.push(Ut)}}for(const Ke in tt)tt[Ke].forEach(bt=>{const xt=bt.feature,Ht=ue(te[Ke]);if(!Ht)return;const Gt=Ht.getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=Gt});return tt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),K.screenGeometry,g,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(d,g){g&&g.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",g.filter,null,g);const T=this._getSourceCaches(d);let P=[];for(const B of T)P=P.concat(He(B,g));return P}addSourceType(d,g,T){return vr.getSourceType(d)?T(new Error(`A source type called "${d}" already exists.`)):(vr.setSourceType(d,g),g.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:g.workerSourceURL},T):T(null,null))}getLight(){return this.light.getLight()}setLight(d,g={}){this._checkLoaded();const T=this.light.getLight();let P=!1;for(const X in d)if(!V(d[X],T[X])){P=!0;break}if(!P)return;const B=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(d,g),this.light.updateTransitions(B)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(d,g=1){if(this._checkLoaded(),!d)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let T=d;if(1===g){if("object"==typeof T.source){const P="terrain-dem-src";this.addSource(P,T.source),T=t.clone$1(T),T=t.extend(T,{source:P})}if(this._validate(t.validateTerrain,"terrain",T))return}if(!this.terrain||this.terrain&&g!==this.terrain.drapeRenderMode){if(!T)return;this._createTerrain(T,g)}else{const P=this.terrain,B=P.get();for(const X of Object.keys(t.spec.terrain))!T.hasOwnProperty(X)&&t.spec.terrain[X].default&&(T[X]=t.spec.terrain[X].default);for(const X in T)if(!V(T[X],B[X])){P.set(T),this.stylesheet.terrain=T;const K=this._setTransitionParameters({duration:0});P.updateTransitions(K);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(d){const g=this.fog=new Ci(d,this.map.transform);this.stylesheet.fog=d;const T=this._setTransitionParameters({duration:0});g.updateTransitions(T)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const d of this.map._markers)d._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(d){if(this._checkLoaded(),!d)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const g=this.fog,T=g.get();0===Object.keys(d).length&&g.set(d);for(const P in d)if(!V(d[P],T[P])){g.set(d),this.stylesheet.fog=d;const B=this._setTransitionParameters({duration:0});g.updateTransitions(B);break}}else this._createFog(d);this._markersNeedUpdate=!0}_setTransitionParameters(d){return{now:t.exported.now(),transition:t.extend(d,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const d=this._order.filter(T=>this.isLayerDraped(this._layers[T])),g=this._order.filter(T=>!this.isLayerDraped(this._layers[T]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...d),this._drapedFirstOrder.push(...g)}_createTerrain(d,g){const T=this.terrain=new ri(d,g);this.stylesheet.terrain=d,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const P=this._setTransitionParameters({duration:0});T.updateTransitions(P)}_force3DLayerUpdate(){for(const d in this._layers){const g=this._layers[d];"fill-extrusion"===g.type&&this._updateLayer(g)}}_forceSymbolLayerUpdate(){for(const d in this._layers){const g=this._layers[d];"symbol"===g.type&&this._updateLayer(g)}}_validate(d,g,T,P,B={}){return(!B||!1!==B.validate)&&ia(this,d.call(t.validateStyle,t.extend({key:g,style:this.serialize(),value:T,styleSpec:t.spec},P)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this._sourceCaches)this._sourceCaches[d].clearTiles(),this._sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){const g=this._getSourceCaches(d);for(const T of g)T.clearTiles()}_reloadSource(d){const g=this._getSourceCaches(d);for(const T of g)T.resume(),T.reload()}_reloadSources(){for(const d of this._getSources())d.reload&&d.reload()}_updateSources(d){for(const g in this._sourceCaches)this._sourceCaches[g].update(d)}_generateCollisionBoxes(){for(const d in this._sourceCaches){const g=this._sourceCaches[d];g.resume(),g.reload()}}_updatePlacement(d,g,T,P,B=!1){let X=!1,K=!1;const te={};for(const he of this._order){const ue=this._layers[he];if("symbol"!==ue.type)continue;if(!te[ue.source]){const Ve=this._getLayerSourceCache(ue);if(!Ve)continue;te[ue.source]=Ve.getRenderableIds(!0).map(Qe=>Ve.getTileByID(Qe)).sort((Qe,et)=>et.tileID.overscaledZ-Qe.tileID.overscaledZ||(Qe.tileID.isLessThan(et.tileID)?-1:1))}const Ce=this.crossTileSymbolIndex.addLayer(ue,te[ue.source],d.center.lng,d.projection);X=X||Ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),B=B||this._layerOrderChanged||0===T,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(B||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),d.zoom))&&(this.pauseablePlacement=new rc(d,this._order,B,g,T,P,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),K=!0),X&&this.pauseablePlacement.placement.setStale()),K||X)for(const he of this._order){const ue=this._layers[he];"symbol"===ue.type&&this.placement.updateLayerOpacities(ue,te[ue.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const d in this._sourceCaches)this._sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,g,T){this.imageManager.getImages(g.icons,T),this._updateTilesForChangedImages();const P=B=>{B&&B.setDependencies(g.tileID.key,g.type,g.icons)};P(this._otherSourceCaches[g.source]),P(this._symbolSourceCaches[g.source])}getGlyphs(d,g,T){this.glyphManager.getGlyphs(g.stacks,T)}getResource(d,g,T){return t.makeRequest(g,T)}_getSourceCache(d){return this._otherSourceCaches[d]}_getLayerSourceCache(d){return"symbol"===d.type?this._symbolSourceCaches[d.source]:this._otherSourceCaches[d.source]}_getSourceCaches(d){const g=[];return this._otherSourceCaches[d]&&g.push(this._otherSourceCaches[d]),this._symbolSourceCaches[d]&&g.push(this._symbolSourceCaches[d]),g}_isSourceCacheLoaded(d){const g=this._getSourceCaches(d);return 0===g.length?(this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${d}'`))),!1):g.every(T=>T.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}vr.getSourceType=function(C){return St[C]},vr.setSourceType=function(C,d){St[C]=d},vr.registerForPluginStateChange=t.registerForPluginStateChange;var Nc="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Ks="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",js="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",sc="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",na="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let hl={},Dl={};const $a=[];bo(Nc,$a),bo(js,$a),bo(sc,$a),bo(na,$a),hl=zr("",js),Dl=zr(na,sc);const vu=zr("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),oc=Nc,ra="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Il={background:zr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:zr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:zr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:zr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:zr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:zr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:zr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:zr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:zr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:zr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:zr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:zr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:zr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:zr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:zr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:zr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:zr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:zr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:zr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:zr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:zr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:zr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ks),skyboxGradient:zr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ks),skyboxCapture:zr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:zr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:zr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function bo(C,d){const g=C.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let T of g)if(T=T.trim(),"#"===T[0]&&T.includes("if")&&!T.includes("endif")){T=T.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const P=T.split(" ");for(const B of P)d.includes(B)||d.push(B)}}function zr(C,d){const g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=d.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),P={},B=[...$a];return bo(C,B),bo(d,B),{fragmentSource:C=C.replace(g,(X,K,te,he,ue)=>(P[ue]=!0,"define"===K?`\n#ifndef HAS_UNIFORM_u_${ue}\nvarying ${te} ${he} ${ue};\n#else\nuniform ${te} ${he} u_${ue};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${ue}\n    ${te} ${he} ${ue} = u_${ue};\n#endif\n`)),vertexSource:d=d.replace(g,(X,K,te,he,ue)=>{const Ce="float"===he?"vec2":"vec4",Ve=ue.match(/color/)?"color":Ce;return P[ue]?"define"===K?`\n#ifndef HAS_UNIFORM_u_${ue}\nuniform lowp float u_${ue}_t;\nattribute ${te} ${Ce} a_${ue};\nvarying ${te} ${he} ${ue};\n#else\nuniform ${te} ${he} u_${ue};\n#endif\n`:"vec4"===Ve?`\n#ifndef HAS_UNIFORM_u_${ue}\n    ${ue} = a_${ue};\n#else\n    ${te} ${he} ${ue} = u_${ue};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ue}\n    ${ue} = unpack_mix_${Ve}(a_${ue}, u_${ue}_t);\n#else\n    ${te} ${he} ${ue} = u_${ue};\n#endif\n`:"define"===K?`\n#ifndef HAS_UNIFORM_u_${ue}\nuniform lowp float u_${ue}_t;\nattribute ${te} ${Ce} a_${ue};\n#else\nuniform ${te} ${he} u_${ue};\n#endif\n`:"vec4"===Ve?`\n#ifndef HAS_UNIFORM_u_${ue}\n    ${te} ${he} ${ue} = a_${ue};\n#else\n    ${te} ${he} ${ue} = u_${ue};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ue}\n    ${te} ${he} ${ue} = unpack_mix_${Ve}(a_${ue}, u_${ue}_t);\n#else\n    ${te} ${he} ${ue} = u_${ue};\n#endif\n`}),staticAttributes:T,usedDefines:B}}class Zu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(d,g,T,P,B,X,K){this.context=d;let te=this.boundPaintVertexBuffers.length!==P.length;for(let ue=0;!te&&ue<P.length;ue++)this.boundPaintVertexBuffers[ue]!==P[ue]&&(te=!0);let he=this.boundDynamicVertexBuffers.length!==K.length;for(let ue=0;!he&&ue<K.length;ue++)this.boundDynamicVertexBuffers[ue]!==K[ue]&&(he=!0);if(!d.extVertexArrayObject||!this.vao||this.boundProgram!==g||this.boundLayoutVertexBuffer!==T||te||he||this.boundIndexBuffer!==B||this.boundVertexOffset!==X)this.freshBind(g,T,P,B,X,K);else{d.bindVertexArrayOES.set(this.vao);for(const ue of K)ue&&ue.bind();B&&B.dynamicDraw&&B.bind()}}freshBind(d,g,T,P,B,X){let K;const te=d.numAttributes,he=this.context,ue=he.gl;if(he.extVertexArrayObject)this.vao&&this.destroy(),this.vao=he.extVertexArrayObject.createVertexArrayOES(),he.bindVertexArrayOES.set(this.vao),K=0,this.boundProgram=d,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=P,this.boundVertexOffset=B,this.boundDynamicVertexBuffers=X;else{K=he.currentNumAttributes||0;for(let Ce=te;Ce<K;Ce++)ue.disableVertexAttribArray(Ce)}g.enableAttributes(ue,d),g.bind(),g.setVertexAttribPointers(ue,d,B);for(const Ce of T)Ce.enableAttributes(ue,d),Ce.bind(),Ce.setVertexAttribPointers(ue,d,B);for(const Ce of X)Ce&&(Ce.enableAttributes(ue,d),Ce.bind(),Ce.setVertexAttribPointers(ue,d,B));P&&P.bind(),he.currentNumAttributes=te}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Pa(C,d){const g=Math.pow(2,d.canonical.z),T=d.canonical.y;return[new t.MercatorCoordinate(0,T/g).toLngLat().lat,new t.MercatorCoordinate(0,(T+1)/g).toLngLat().lat]}function yc(C,d,g,T,P,B,X){const K=C.context,te=K.gl,he=g.fbo;if(!he)return;C.prepareDrawTile();const ue=C.useProgram("hillshade");K.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,he.colorAttachment.get());const Ce=((tt,st,Te,Ke)=>{const bt=Te.paint.get("hillshade-shadow-color"),xt=Te.paint.get("hillshade-highlight-color"),Ht=Te.paint.get("hillshade-accent-color");let Gt=Te.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Te.paint.get("hillshade-illumination-anchor")&&(Gt-=tt.transform.angle);const Ut=!tt.options.moving;return{u_matrix:Ke||tt.transform.calculateProjMatrix(st.tileID.toUnwrapped(),Ut),u_image:0,u_latrange:Pa(0,st.tileID),u_light:[Te.paint.get("hillshade-exaggeration"),Gt],u_shadow:bt,u_highlight:xt,u_accent:Ht}})(C,g,T,C.terrain?d.projMatrix:null);C.prepareDrawProgram(K,ue,d.toUnwrapped());const{tileBoundsBuffer:Ve,tileBoundsIndexBuffer:Qe,tileBoundsSegments:et}=C.getTileBoundsBuffers(g);ue.draw(K,te.TRIANGLES,P,B,X,t.CullFaceMode.disabled,Ce,T.id,Ve,Qe,et)}function bc(C,d,g){if(!d.needsDEMTextureUpload)return;const T=C.context,P=T.gl;T.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||C.getTileTexture(g.stride);const B=g.getPixels();d.demTexture?d.demTexture.update(B,{premultiply:!1}):d.demTexture=new t.Texture(T,B,P.RGBA,{premultiply:!1}),d.needsDEMTextureUpload=!1}function sa(C,d,g,T,P,B){const X=C.context,K=X.gl;if(!d.dem)return;const te=d.dem;if(X.activeTexture.set(K.TEXTURE1),bc(C,d,te),!d.demTexture)return;d.demTexture.bind(K.NEAREST,K.CLAMP_TO_EDGE);const he=te.dim;X.activeTexture.set(K.TEXTURE0);let ue=d.fbo;if(!ue){const et=new t.Texture(X,{width:he,height:he,data:null},K.RGBA);et.bind(K.LINEAR,K.CLAMP_TO_EDGE),ue=d.fbo=X.createFramebuffer(he,he,!0),ue.colorAttachment.set(et.texture)}X.bindFramebuffer.set(ue.framebuffer),X.viewport.set([0,0,he,he]);const{tileBoundsBuffer:Ce,tileBoundsIndexBuffer:Ve,tileBoundsSegments:Qe}=C.getMercatorTileBoundsBuffers();C.useProgram("hillshadePrepare").draw(X,K.TRIANGLES,T,P,B,t.CullFaceMode.disabled,((et,tt)=>{const st=tt.stride,Te=t.create();return t.ortho(Te,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(Te,Te,[0,-t.EXTENT,0]),{u_matrix:Te,u_image:1,u_dimension:[st,st],u_zoom:et.overscaledZ,u_unpack:tt.unpackVector}})(d.tileID,te),g.id,Ce,Ve,Qe),d.needsHillshadePrepare=!1}const Ns=C=>({u_matrix:new t.UniformMatrix4f(C),u_image0:new t.Uniform1i(C),u_skirt_height:new t.Uniform1f(C)}),Ho=(C,d)=>({u_matrix:C,u_image0:0,u_skirt_height:d}),Lo=(C,d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et)=>({u_proj_matrix:Float32Array.from(C),u_globe_matrix:d,u_normalize_matrix:Float32Array.from(T),u_merc_matrix:g,u_zoom_transition:P,u_merc_center:B,u_image0:0,u_frustum_tl:X,u_frustum_tr:K,u_frustum_br:te,u_frustum_bl:he,u_globe_pos:ue,u_globe_radius:Ce,u_viewport:Ve,u_grid_matrix:et?Float32Array.from(et):new Float32Array(9),u_skirt_height:Qe});function pl(C,d){return null!=C&&null!=d&&!(!C.hasData()||!d.hasData())&&null!=C.demTexture&&null!=d.demTexture&&C.tileID.key!==d.tileID.key}const Ra=new class{constructor(){this.operations={}}newMorphing(C,d,g,T,P){if(C in this.operations){const B=this.operations[C];B.to.tileID.key!==g.tileID.key&&(B.queued=g)}else this.operations[C]={startTime:T,phase:0,duration:P,from:d,to:g,queued:null}}getMorphValuesForProxy(C){if(!(C in this.operations))return null;const d=this.operations[C];return{from:d.from,to:d.to,phase:d.phase}}update(C){for(const d in this.operations){const g=this.operations[d];for(g.phase=(C-g.startTime)/g.duration;g.phase>=1||!this._validOp(g);)if(!this._nextOp(g,C)){delete this.operations[d];break}}}_nextOp(C,d){return!!C.queued&&(C.from=C.to,C.to=C.queued,C.queued=null,C.phase=0,C.startTime=d,!0)}_validOp(C){return C.from.hasData()&&C.to.hasData()}},xa={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ll(C){return 6*Math.pow(1.5,22-C)}function xo(C,d){const g=1<<C.z;return!d&&(0===C.x||C.x===g-1)||0===C.y||C.y===g-1}const Yn=C=>({u_matrix:C});function Ol(C,d,g,T,P){if(P>0){const B=t.exported.now(),X=(B-C.timeAdded)/P,K=d?(B-d.timeAdded)/P:-1,te=g.getSource(),he=T.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),ue=!d||Math.abs(d.tileID.overscaledZ-he)>Math.abs(C.tileID.overscaledZ-he),Ce=ue&&C.refreshedUponExpiration?1:t.clamp(ue?X:1-K,0,1);return C.refreshedUponExpiration&&X>=1&&(C.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Ce}:{opacity:Ce,mix:0}}return{opacity:1,mix:0}}class ls extends t.SourceCache{constructor(d){const g={type:"raster-dem",maxzoom:d.transform.maxZoom},T=new Fi(rt(),null),P=qe("mock-dem",g,T,d.style);super("mock-dem",P,!1),P.setEventedParent(this),this._sourceLoaded=!0}_loadTile(d,g){d.state="loaded",g(null)}}class Xa extends t.SourceCache{constructor(d){const g=qe("proxy",{type:"geojson",maxzoom:d.transform.maxZoom},new Fi(rt(),null),d.style);super("proxy",g,!1),g.setEventedParent(this),this.map=this.getSource().map=d,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(d,g,T){if(d.freezeTileCoverage)return;this.transform=d;const P=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((B,X)=>{if(B[X.key]="",!this._tiles[X.key]){const K=new t.Tile(X,this._source.tileSize*X.overscaleFactor(),d.tileZoom);K.state="loaded",this._tiles[X.key]=K}return B},{});for(const B in this._tiles)B in P||(this.freeFBO(B),this._tiles[B].unloadVectorData(),delete this._tiles[B])}freeFBO(d){const g=this.proxyCachedFBO[d];if(void 0!==g){const T=Object.values(g);this.renderCachePool.push(...T),delete this.proxyCachedFBO[d]}}deallocRenderCache(){this.renderCache.forEach(d=>d.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class wo extends t.OverscaledTileID{constructor(d,g,T){super(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y),this.proxyTileKey=g,this.projMatrix=T}}class Hs extends t.Elevation{constructor(d,g){super(),this.painter=d,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[T,P,B]=function(te){const he=new t.StructArrayLayout2i4,ue=new t.StructArrayLayout3ui6;he.reserve(17161),ue.reserve(33800);const Ve=t.EXTENT/128,Qe=t.EXTENT+Ve/2,et=Qe+Ve;for(let st=-Ve;st<et;st+=Ve)for(let Te=-Ve;Te<et;Te+=Ve){const Ke=Te<0||Te>Qe||st<0||st>Qe?24575:0,bt=t.clamp(Math.round(Te),0,t.EXTENT),xt=t.clamp(Math.round(st),0,t.EXTENT);he.emplaceBack(bt+Ke,xt)}const tt=(st,Te)=>{const Ke=131*Te+st;ue.emplaceBack(Ke+1,Ke,Ke+131),ue.emplaceBack(Ke+131,Ke+131+1,Ke+1)};for(let st=1;st<129;st++)for(let Te=1;Te<129;Te++)tt(Te,st);return[0,129].forEach(st=>{for(let Te=0;Te<130;Te++)tt(Te,st),tt(st,Te)}),[he,ue,32768]}(),X=d.context;this.gridBuffer=X.createVertexBuffer(T,t.posAttributes.members),this.gridIndexBuffer=X.createIndexBuffer(P),this.gridSegments=t.SegmentVector.simpleSegment(0,0,T.length,P.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,T.length,B),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Xa(g.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);const K=X.gl;this._overlapStencilMode=new t.StencilMode({func:K.GEQUAL,mask:255},0,255,K.KEEP,K.KEEP,K.REPLACE),this._previousZoom=d.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=g,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ls(g.map)}set style(d){d.on("data",this._onStyleDataEvent.bind(this)),d.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=d,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(d,g,T){if(d&&d.terrain){this._style!==d&&(this.style=d),this.enabled=!0;const P=d.terrain.properties;this.sourceCache=0===d.terrain.drapeRenderMode?this._mockSourceCache:d._getSourceCache(P.get("source")),this._exaggeration=P.get("exaggeration");const B=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const X=this.getScaledDemTileSize();this.sourceCache.update(g,X,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,B(),this._initializing=!0),B(),g.updateElevation(!0,T),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(g),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(d){this._findCoveringTileCache[d]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const d=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==d.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${d.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${d.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(d){d.coord&&"source"===d.dataType?this._clearRenderCacheForTile(d.sourceCacheId,d.coord):"style"===d.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const d in this._style._sourceCaches)this._style._sourceCaches[d].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(d=>d.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const d=2*this.proxySourceCache.getSource().tileSize;return[d,d]}set useVertexMorphing(d){this._useVertexMorphing=d}updateTileBinding(d){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const g=this.proxySourceCache,T=this.painter.transform;this._initializing&&(this._initializing=0===T._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(T.center),-1),this._emptyDEMTextureDirty=!this._initializing);const P=this.proxyCoords=g.getIds().map(te=>{const he=g.getTileByID(te).tileID;return he.projMatrix=T.calculateProjMatrix(he.toUnwrapped()),he});(function(te,he){const ue=he.transform.pointCoordinate(he.transform.getCameraPoint()),Ce=new t.Point(ue.x,ue.y);te.sort((Ve,Qe)=>{if(Qe.overscaledZ-Ve.overscaledZ)return Qe.overscaledZ-Ve.overscaledZ;const et=new t.Point(Ve.canonical.x+(1<<Ve.canonical.z)*Ve.wrap,Ve.canonical.y),tt=new t.Point(Qe.canonical.x+(1<<Qe.canonical.z)*Qe.wrap,Qe.canonical.y),st=Ce.mult(1<<Ve.canonical.z);return st.x-=.5,st.y-=.5,st.distSqr(et)-st.distSqr(tt)})})(P,this.painter),this._previousZoom=T.zoom;const B=this.proxyToSource||{};this.proxyToSource={},P.forEach(te=>{this.proxyToSource[te.key]={}}),this.terrainTileForTile={};const X=this._style._sourceCaches;for(const te in X){const he=X[te];if(!he.used||(he!==this.sourceCache&&this.resetTileLookupCache(he.id),this._setupProxiedCoordsForOrtho(he,d[te],B),he.usedForTerrain))continue;const ue=d[te];he.getSource().reparseOverscaled&&this._assignTerrainTiles(ue)}this.proxiedCoords[g.id]=P.map(te=>new wo(te,te.key,this.orthoMatrix)),this._assignTerrainTiles(P),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(B),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const K={};this._visibleDemTiles=[];for(const te of this.proxyCoords){const he=this.terrainTileForTile[te.key];if(!he)continue;const ue=he.tileID.key;ue in K||(this._visibleDemTiles.push(he),K[ue]=ue)}}_assignTerrainTiles(d){this._initializing||d.forEach(g=>{if(this.terrainTileForTile[g.key])return;const T=this._findTileCoveringTileID(g,this.sourceCache);T&&(this.terrainTileForTile[g.key]=T)})}_prepareDEMTextures(){const d=this.painter.context,g=d.gl;for(const T in this.terrainTileForTile){const P=this.terrainTileForTile[T],B=P.dem;!B||P.demTexture&&!P.needsDEMTextureUpload||(d.activeTexture.set(g.TEXTURE1),bc(this.painter,P,B))}}_prepareDemTileUniforms(d,g,T,P){if(!g||null==g.demTexture)return!1;const B=d.tileID.canonical,X=Math.pow(2,g.tileID.canonical.z-B.z),K=P||"";return T[`u_dem_tl${K}`]=[B.x*X%1,B.y*X%1],T[`u_dem_scale${K}`]=X,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const d=this.painter.context,g=d.gl;if(!this._emptyDepthBufferTexture){const T=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(d,T,g.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let d=0;const g=this._visibleDemTiles.reduce((T,P)=>{if(!P.dem)return T;const B=P.dem.tree.minimums[0];return B>0&&d++,T+B},0);return d?g/d:0}_updateEmptyDEMTexture(){const d=this.painter.context,g=d.gl;d.activeTexture.set(g.TEXTURE2);const T=this._getLoadedAreaMinimum(),P=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(T,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let B=this._emptyDEMTexture;return B?B.update(P,{premultiply:!1}):B=this._emptyDEMTexture=new t.Texture(d,P,g.RGBA,{premultiply:!1}),B}setupElevationDraw(d,g,T){const P=this.painter.context,B=P.gl,X=(K=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(K),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var K;X.u_dem_size=this.sourceCache.getSource().tileSize,X.u_exaggeration=this.exaggeration();let te=null,he=null,ue=1;if(T&&T.morphing&&this._useVertexMorphing){const Ce=T.morphing.srcDemTile,Ve=T.morphing.dstDemTile;ue=T.morphing.phase,Ce&&Ve&&(this._prepareDemTileUniforms(d,Ce,X,"_prev")&&(he=Ce),this._prepareDemTileUniforms(d,Ve,X)&&(te=Ve))}if(he&&te?(P.activeTexture.set(B.TEXTURE2),te.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),P.activeTexture.set(B.TEXTURE4),he.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),X.u_dem_lerp=ue):(te=this.terrainTileForTile[d.tileID.key],P.activeTexture.set(B.TEXTURE2),(this._prepareDemTileUniforms(d,te,X)?te.demTexture:this.emptyDEMTexture).bind(B.NEAREST,B.CLAMP_TO_EDGE)),P.activeTexture.set(B.TEXTURE3),T&&T.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),this._depthFBO&&(X.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),X.u_depth_size_inv=[1,1]),T&&T.useMeterToDem&&te){const Ce=(1<<te.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;X.u_meter_to_dem=Ce}if(T&&T.labelPlaneMatrixInv&&(X.u_label_plane_matrix_inv=T.labelPlaneMatrixInv),g.setTerrainUniformValues(P,X),"globe"===this.painter.transform.projection.name){const Ce=this.globeUniformValues(this.painter.transform,d.tileID.canonical,T&&T.useDenormalizedUpVectorScale);g.setGlobeUniformValues(P,Ce)}}globeUniformValues(d,g,T){const P=d.projection;return{u_tile_tl_up:P.upVector(g,0,0),u_tile_tr_up:P.upVector(g,t.EXTENT,0),u_tile_br_up:P.upVector(g,t.EXTENT,t.EXTENT),u_tile_bl_up:P.upVector(g,0,t.EXTENT),u_tile_up_scale:T?t.globeMetersToEcef(1):P.upVectorScale(g,d.center.lat,d.worldSize).metersToTile}}renderToBackBuffer(d){const g=this.painter,T=this.painter.context;0!==d.length&&(T.bindFramebuffer.set(null),T.viewport.set([0,0,g.width,g.height]),g.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(P,B,X,K,te){if("globe"===P.transform.projection.name)!function(he,ue,Ce,Ve,Qe){const et=he.context,tt=et.gl;let st,Te;const Ke=he.options.showTerrainWireframe?2:0,bt=he.transform,xt=t.globeUseCustomAntiAliasing(he,et,bt),Ht=(Qi,vi)=>{if(Te===Qi)return;const Ii=[xa[Qi],"PROJECTION_GLOBE_VIEW"];xt&&Ii.push("CUSTOM_ANTIALIASING"),vi&&Ii.push(xa[Ke]),st=he.useProgram("globeRaster",null,Ii),Te=Qi},Gt=he.colorModeForRenderPass(),Ut=new t.DepthMode(tt.LEQUAL,t.DepthMode.ReadWrite,he.depthRangeFor3D);Ra.update(Qe);const ti=t.calculateGlobeMercatorMatrix(bt),Qt=[t.mercatorXfromLng(bt.center.lng),t.mercatorYfromLat(bt.center.lat)],gi=Ke?[!1,!0]:[!1],Ji=he.globeSharedBuffers,Zt=[bt.width*t.exported.devicePixelRatio,bt.height*t.exported.devicePixelRatio],Oi=Float32Array.from(bt.globeMatrix),yi={useDenormalizedUpVectorScale:!0};if(gi.forEach(Qi=>{const vi=he.transform,Ii=Ll(vi.zoom)*ue.exaggeration();Te=-1;const nn=Qi?tt.LINES:tt.TRIANGLES;for(const $i of Ve){const Ki=Ce.getTile($i),Hn=t.StencilMode.disabled,nr=ue.prevTerrainTileForTile[$i.key],Ln=ue.terrainTileForTile[$i.key];pl(nr,Ln)&&Ra.newMorphing($i.key,nr,Ln,Qe,250),et.activeTexture.set(tt.TEXTURE0),Ki.texture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE);const Xn=Ra.getMorphValuesForProxy($i.key),Zn=Xn?1:0;Xn&&t.extend$1(yi,{morphing:{srcDemTile:Xn.from,dstDemTile:Xn.to,phase:t.easeCubicInOut(Xn.phase)}});const tr=t.tileCornersToBounds($i.canonical),zn=t.getLatitudinalLod(tr.getCenter().lat),Pr=t.getGridMatrix($i.canonical,tr,zn,vi.worldSize/vi._pixelsPerMercatorPixel),Ur=t.globeNormalizeECEF(t.globeTileBounds($i.canonical)),ms=Lo(vi.projMatrix,Oi,ti,Ur,t.globeToMercatorTransition(vi.zoom),Qt,vi.frustumCorners.TL,vi.frustumCorners.TR,vi.frustumCorners.BR,vi.frustumCorners.BL,vi.globeCenterInViewSpace,vi.globeRadius,Zt,Ii,Pr);if(Ht(Zn,Qi),ue.setupElevationDraw(Ki,st,yi),he.prepareDrawProgram(et,st,$i.toUnwrapped()),Ji){const[gs,cs,Ls]=Qi?Ji.getWirefameBuffers(he.context,zn):Ji.getGridBuffers(zn,0!==Ii);st.draw(et,nn,Ut,Hn,Gt,t.CullFaceMode.backCCW,ms,"globe_raster",gs,cs,Ls)}}}),Ji){const Qi=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];xt&&Qi.push("CUSTOM_ANTIALIASING"),st=he.useProgram("globeRaster",null,Qi);for(const vi of Ve){const{x:Ii,y:nn,z:$i}=vi.canonical,Ki=0===nn,Hn=nn===(1<<$i)-1,[nr,Ln,Xn,Zn]=Ji.getPoleBuffers($i);if(Zn&&(Ki||Hn)){const tr=Ce.getTile(vi);et.activeTexture.set(tt.TEXTURE0),tr.texture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE);let zn=t.globePoleMatrixForTile($i,Ii,bt);const Pr=t.globeNormalizeECEF(t.globeTileBounds(vi.canonical)),Ur=(ms,gs)=>ms.draw(et,tt.TRIANGLES,Ut,t.StencilMode.disabled,Gt,t.CullFaceMode.disabled,Lo(bt.projMatrix,zn,zn,Pr,0,Qt,bt.frustumCorners.TL,bt.frustumCorners.TR,bt.frustumCorners.BR,bt.frustumCorners.BL,bt.globeCenterInViewSpace,bt.globeRadius,Zt,0),"globe_pole_raster",gs,Xn,Zn);ue.setupElevationDraw(tr,st,yi),he.prepareDrawProgram(et,st,vi.toUnwrapped()),Ki&&Ur(st,nr),Hn&&(zn=t.scale(t.create(),zn,[1,-1,1]),Ur(st,Ln))}}}}(P,B,X,K,te);else{const he=P.context,ue=he.gl;let Ce,Ve;const Qe=P.options.showTerrainWireframe?2:0,et=(bt,xt)=>{if(Ve===bt)return;const Ht=[xa[bt]];xt&&Ht.push(xa[Qe]),Ce=P.useProgram("terrainRaster",null,Ht),Ve=bt},tt=P.colorModeForRenderPass(),st=new t.DepthMode(ue.LEQUAL,t.DepthMode.ReadWrite,P.depthRangeFor3D);Ra.update(te);const Te=P.transform,Ke=Ll(Te.zoom)*B.exaggeration();(Qe?[!1,!0]:[!1]).forEach(bt=>{Ve=-1;const xt=bt?ue.LINES:ue.TRIANGLES,[Ht,Gt]=bt?B.getWirefameBuffer():[B.gridIndexBuffer,B.gridSegments];for(const Ut of K){const ti=X.getTile(Ut),Qt=t.StencilMode.disabled,gi=B.prevTerrainTileForTile[Ut.key],Ji=B.terrainTileForTile[Ut.key];pl(gi,Ji)&&Ra.newMorphing(Ut.key,gi,Ji,te,250),he.activeTexture.set(ue.TEXTURE0),ti.texture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST);const Zt=Ra.getMorphValuesForProxy(Ut.key),Oi=Zt?1:0;let yi;Zt&&(yi={morphing:{srcDemTile:Zt.from,dstDemTile:Zt.to,phase:t.easeCubicInOut(Zt.phase)}});const Qi=Ho(Ut.projMatrix,xo(Ut.canonical,Te.renderWorldCopies)?Ke/10:Ke);et(Oi,bt),B.setupElevationDraw(ti,Ce,yi),P.prepareDrawProgram(he,Ce,Ut.toUnwrapped()),Ce.draw(he,xt,st,Qt,tt,t.CullFaceMode.backCCW,Qi,"terrain_raster",B.gridBuffer,Ht,Gt)}})}}(g,this,this.proxySourceCache,d,this._updateTimestamp),this.renderingToTexture=!0,g.gpuTimingDeferredRenderEnd(),d.splice(0,d.length))}renderBatch(d){if(0===this._drapedRenderBatches.length)return d+1;this.renderingToTexture=!0;const g=this.painter,T=this.painter.context,P=this.proxySourceCache,B=this.proxiedCoords[P.id],X=this._drapedRenderBatches.shift(),K=[],te=g.style.order;let he=0;for(const ue of B){const Ce=P.getTileByID(ue.proxyTileKey),Ve=P.proxyCachedFBO[ue.key]?P.proxyCachedFBO[ue.key][d]:void 0,Qe=void 0!==Ve?P.renderCache[Ve]:this.pool[he++],et=void 0!==Ve;if(Ce.texture=Qe.tex,et&&!Qe.dirty){K.push(Ce.tileID);continue}let tt;T.bindFramebuffer.set(Qe.fb.framebuffer),this.renderedToTile=!1,Qe.dirty&&(T.clear({color:t.Color.transparent,stencil:0}),Qe.dirty=!1);for(let st=X.start;st<=X.end;++st){const Te=g.style._layers[te[st]];if(Te.isHidden(g.transform.zoom))continue;const Ke=g.style._getLayerSourceCache(Te),bt=Ke?this.proxyToSource[ue.key][Ke.id]:[ue];if(!bt)continue;const xt=bt;T.viewport.set([0,0,Qe.fb.width,Qe.fb.height]),tt!==(Ke?Ke.id:null)&&(this._setupStencil(Qe,bt,Te,Ke),tt=Ke?Ke.id:null),g.renderLayer(g,Ke,Te,xt)}this.renderedToTile?(Qe.dirty=!0,K.push(Ce.tileID)):et||--he,5===he&&(he=0,this.renderToBackBuffer(K))}return this.renderToBackBuffer(K),this.renderingToTexture=!1,T.bindFramebuffer.set(null),T.viewport.set([0,0,g.width,g.height]),X.end+1}postRender(){}renderCacheEfficiency(d){const g=d.order.length;if(0===g)return{efficiency:100};let T,P=0,B=0,X=!1;for(let K=0;K<g;++K){const te=d._layers[d.order[K]];this._style.isLayerDraped(te)?(X&&++P,++B):X||(X=!0,T=te.id)}return 0===B?{efficiency:100}:{efficiency:100*(1-P/B),firstUndrapedLayer:T}}getMinElevationBelowMSL(){let d=0;return this._visibleDemTiles.filter(g=>g.dem).forEach(g=>{d=Math.min(d,g.dem.tree.minimums[0])}),0===d?d:(d-30)*this._exaggeration}raycast(d,g,T){if(!this._visibleDemTiles)return null;const P=this._visibleDemTiles.filter(B=>B.dem).map(B=>{const X=B.tileID,K=1<<X.overscaledZ,{x:te,y:he}=X.canonical,ue=te/K,Ce=(te+1)/K,Ve=he/K,Qe=(he+1)/K;return{minx:ue,miny:Ve,maxx:Ce,maxy:Qe,t:B.dem.tree.raycastRoot(ue,Ve,Ce,Qe,d,g,T),tile:B}});P.sort((B,X)=>(null!==B.t?B.t:Number.MAX_VALUE)-(null!==X.t?X.t:Number.MAX_VALUE));for(const B of P){if(null==B.t)return null;const X=B.tile.dem.tree.raycast(B.minx,B.miny,B.maxx,B.maxy,d,g,T);if(null!=X)return X}return null}_createFBO(){const d=this.painter.context,g=d.gl,T=this.drapeBufferSize;d.activeTexture.set(g.TEXTURE0);const P=new t.Texture(d,{width:T[0],height:T[1],data:null},g.RGBA);P.bind(g.LINEAR,g.CLAMP_TO_EDGE);const B=d.createFramebuffer(T[0],T[1],!1);return B.colorAttachment.set(P.texture),B.depthAttachment=new pt(d,B.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=d.createRenderbuffer(d.gl.DEPTH_STENCIL,T[0],T[1]),this._stencilRef=0,B.depthAttachment.set(this._sharedDepthStencil),d.clear({stencil:0})):B.depthAttachment.set(this._sharedDepthStencil),d.extTextureFilterAnisotropic&&!d.extTextureFilterAnisotropicForceOff&&g.texParameterf(g.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax),{fb:B,tex:P,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d].hasTransition())return!0;return this._style.order.some(d=>{const g=this._style._layers[d],T=g.isHidden(this.painter.transform.zoom);return"custom"===g.type?!T&&g.shouldRedrape():!T&&g.hasTransition()})}_clearLineLayersFromRenderCache(){let d=!1;for(const T of this._style._getSources())if(T instanceof Ui){d=!0;break}if(!d)return;const g={};for(let T=0;T<this._style.order.length;++T){const P=this._style._layers[this._style.order[T]],B=this._style._getLayerSourceCache(P);if(B&&!g[B.id]&&!P.isHidden(this.painter.transform.zoom)&&"line"===P.type&&P.widthExpression()instanceof t.ZoomDependentExpression){g[B.id]=!0;for(const X of this.proxyCoords){const K=this.proxyToSource[X.key][B.id];if(K)for(const te of K)this._clearRenderCacheForTile(B.id,te)}}}}_clearRasterLayersFromRenderCache(){let d=!1;for(const T in this._style._sourceCaches)if(this._style._sourceCaches[T]._source instanceof di){d=!0;break}if(!d)return;const g={};for(let T=0;T<this._style.order.length;++T){const P=this._style._layers[this._style.order[T]],B=this._style._getLayerSourceCache(P);if(!B||g[B.id]||P.isHidden(this.painter.transform.zoom)||"raster"!==P.type)continue;const X=P.paint.get("raster-fade-duration");for(const K of this.proxyCoords){const te=this.proxyToSource[K.key][B.id];if(te)for(const he of te){const ue=Ol(B.getTile(he),B.findLoadedParent(he,0),B,this.painter.transform,X);(1!==ue.opacity||0!==ue.mix)&&this._clearRenderCacheForTile(B.id,he)}}}}_setupDrapedRenderBatches(){const d=this._style.order,g=d.length;if(0===g)return;const T=[];let P,B=0,X=this._style._layers[d[B]];for(;!this._style.isLayerDraped(X)&&X.isHidden(this.painter.transform.zoom)&&++B<g;)X=this._style._layers[d[B]];for(;B<g;++B){const K=this._style._layers[d[B]];K.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(K)?void 0===P&&(P=B):void 0!==P&&(T.push({start:P,end:B-1}),P=void 0))}void 0!==P&&T.push({start:P,end:B-1}),this._drapedRenderBatches=T}_setupRenderCache(d){const g=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,g.renderCache.length>g.renderCachePool.length){const X=Object.values(g.proxyCachedFBO);g.proxyCachedFBO={};for(let K=0;K<X.length;++K){const te=Object.values(X[K]);g.renderCachePool.push(...te)}}return}this._clearRasterLayersFromRenderCache();const T=this.proxyCoords,P=this._tilesDirty;for(let X=T.length-1;X>=0;X--){const K=T[X];if(g.getTileByID(K.key),void 0!==g.proxyCachedFBO[K.key]){const te=d[K.key],he=this.proxyToSource[K.key];let ue=0;for(const Ce in he){const Ve=he[Ce],Qe=te[Ce];if(!Qe||Qe.length!==Ve.length||Ve.some((et,tt)=>et!==Qe[tt]||P[Ce]&&P[Ce].hasOwnProperty(et.key))){ue=-1;break}++ue}for(const Ce in g.proxyCachedFBO[K.key])g.renderCache[g.proxyCachedFBO[K.key][Ce]].dirty=ue<0||ue!==Object.values(te).length}}const B=[...this._drapedRenderBatches];B.sort((X,K)=>K.end-K.start-(X.end-X.start));for(const X of B)for(const K of T){if(g.proxyCachedFBO[K.key])continue;let te=g.renderCachePool.pop();void 0===te&&g.renderCache.length<50&&(te=g.renderCache.length,g.renderCache.push(this._createFBO())),void 0!==te&&(g.proxyCachedFBO[K.key]={},g.proxyCachedFBO[K.key][X.start]=te,g.renderCache[te].dirty=!0)}this._tilesDirty={}}_setupStencil(d,g,T,P){if(!P||!this._sourceTilesOverlap[P.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const B=this.painter.context,X=B.gl;if(g.length<=1)return void(this._overlapStencilType=!1);let K;if(T.isTileClipped())K=g.length,this._overlapStencilMode.test={func:X.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(g[0].overscaledZ>g[g.length-1].overscaledZ))return void(this._overlapStencilType=!1);K=1,this._overlapStencilMode.test={func:X.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+K>255&&(B.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=K,this._overlapStencilMode.ref=this._stencilRef,T.isTileClipped()&&this._renderTileClippingMasks(g,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(d){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[d.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(d,g){const T=this.painter,P=this.painter.context,B=P.gl;T._tileClippingMaskIDs={},P.setColorMode(t.ColorMode.disabled),P.setDepthMode(t.DepthMode.disabled);const X=T.useProgram("clippingMask");for(const K of d){const te=T._tileClippingMaskIDs[K.key]=--g;X.draw(P,B.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:B.ALWAYS,mask:0},te,255,B.KEEP,B.KEEP,B.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Yn(K.projMatrix),"$clipping",T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}}pointCoordinate(d){const g=this.painter.transform;if(d.x<0||d.x>g.width||d.y<0||d.y>g.height)return null;const T=[d.x,d.y,1,1];t.transformMat4$1(T,T,g.pixelMatrixInverse),t.scale$1(T,T,1/T[3]),T[0]/=g.worldSize,T[1]/=g.worldSize;const P=g._camera.position,B=t.mercatorZfromAltitude(1,g.center.lat),X=[P[0],P[1],P[2]/B,0],K=t.subtract([],T.slice(0,3),X);t.normalize(K,K);const te=this.raycast(X,K,this._exaggeration);return null!==te&&te?(t.scaleAndAdd(X,X,K,te),X[3]=X[2],X[2]*=B,X):null}drawDepth(){const d=this.painter,g=d.context,T=this.proxySourceCache,P=Math.ceil(d.width),B=Math.ceil(d.height);if(!this._depthFBO||this._depthFBO.width===P&&this._depthFBO.height===B||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const X=g.gl,K=g.createFramebuffer(P,B,!0);g.activeTexture.set(X.TEXTURE0);const te=new t.Texture(g,{width:P,height:B,data:null},X.RGBA);te.bind(X.NEAREST,X.CLAMP_TO_EDGE),K.colorAttachment.set(te.texture);const he=g.createRenderbuffer(g.gl.DEPTH_COMPONENT16,P,B);K.depthAttachment.set(he),this._depthFBO=K,this._depthTexture=te}g.bindFramebuffer.set(this._depthFBO.framebuffer),g.viewport.set([0,0,P,B]),function(X,K,te,he){if("globe"===X.transform.projection.name)return;const ue=X.context,Ce=ue.gl;ue.clear({depth:1});const Ve=X.useProgram("terrainDepth"),Qe=new t.DepthMode(Ce.LESS,t.DepthMode.ReadWrite,X.depthRangeFor3D);for(const et of he){const tt=te.getTile(et),st=Ho(et.projMatrix,0);K.setupElevationDraw(tt,Ve),Ve.draw(ue,Ce.TRIANGLES,Qe,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,st,"terrain_depth",K.gridBuffer,K.gridIndexBuffer,K.gridNoSkirtSegments)}}(d,this,T,this.proxyCoords)}_setupProxiedCoordsForOrtho(d,g,T){if(d.getSource()instanceof Et)return this._setupProxiedCoordsForImageSource(d,g,T);this._findCoveringTileCache[d.id]=this._findCoveringTileCache[d.id]||{};const P=this.proxiedCoords[d.id]=[],B=this.proxyCoords;for(let K=0;K<B.length;K++){const te=B[K],he=this._findTileCoveringTileID(te,d);if(he){const ue=this._createProxiedId(te,he,T[te.key]&&T[te.key][d.id]);P.push(ue),this.proxyToSource[te.key][d.id]=[ue]}}let X=!1;for(let K=0;K<g.length;K++){const te=d.getTile(g[K]);if(!te||!te.hasData())continue;const he=this._findTileCoveringTileID(te.tileID,this.proxySourceCache);if(he&&he.tileID.canonical.z!==te.tileID.canonical.z){const ue=this.proxyToSource[he.tileID.key][d.id],Ce=this._createProxiedId(he.tileID,te,T[he.tileID.key]&&T[he.tileID.key][d.id]);ue?ue.splice(ue.length-1,0,Ce):this.proxyToSource[he.tileID.key][d.id]=[Ce],P.push(Ce),X=!0}}this._sourceTilesOverlap[d.id]=X}_setupProxiedCoordsForImageSource(d,g,T){if(!d.getSource().loaded())return;const P=this.proxiedCoords[d.id]=[],B=this.proxyCoords,X=d.getSource(),K=new t.Point(X.tileID.x,X.tileID.y)._div(1<<X.tileID.z),te=X.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce((ue,Ce)=>(ue.min.x=Math.min(ue.min.x,Ce.x-K.x),ue.min.y=Math.min(ue.min.y,Ce.y-K.y),ue.max.x=Math.max(ue.max.x,Ce.x-K.x),ue.max.y=Math.max(ue.max.y,Ce.y-K.y),ue),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),he=(ue,Ce)=>{const Ve=ue.wrap+ue.canonical.x/(1<<ue.canonical.z),Qe=ue.canonical.y/(1<<ue.canonical.z),et=t.EXTENT/(1<<ue.canonical.z),tt=Ce.wrap+Ce.canonical.x/(1<<Ce.canonical.z),st=Ce.canonical.y/(1<<Ce.canonical.z);return Ve+et<tt+te.min.x||Ve>tt+te.max.x||Qe+et<st+te.min.y||Qe>st+te.max.y};for(let ue=0;ue<B.length;ue++){const Ce=B[ue];for(let Ve=0;Ve<g.length;Ve++){const Qe=d.getTile(g[Ve]);if(!Qe||!Qe.hasData()||he(Ce,Qe.tileID))continue;const et=this._createProxiedId(Ce,Qe,T[Ce.key]&&T[Ce.key][d.id]),tt=this.proxyToSource[Ce.key][d.id];tt?tt.push(et):this.proxyToSource[Ce.key][d.id]=[et],P.push(et)}}}_createProxiedId(d,g,T){let P=this.orthoMatrix;if(T){const B=T.find(X=>X.key===g.tileID.key);if(B)return B}if(g.tileID.key!==d.key){const B=d.canonical.z-g.tileID.canonical.z;let X,K,te;P=t.create();const he=g.tileID.wrap-d.wrap<<d.overscaledZ;B>0?(X=t.EXTENT>>B,K=X*((g.tileID.canonical.x<<B)-d.canonical.x+he),te=X*((g.tileID.canonical.y<<B)-d.canonical.y)):(X=t.EXTENT<<-B,K=t.EXTENT*(g.tileID.canonical.x-(d.canonical.x+he<<-B)),te=t.EXTENT*(g.tileID.canonical.y-(d.canonical.y<<-B))),t.ortho(P,0,X,0,X,0,1),t.translate(P,P,[K,te,0])}return new wo(g.tileID,d.key,P)}_findTileCoveringTileID(d,g){let T=g.getTile(d);if(T&&T.hasData())return T;const P=this._findCoveringTileCache[g.id],B=P[d.key];if(T=B?g.getTileByID(B):null,T&&T.hasData()||null===B)return T;let X=T?T.tileID:d,K=X.overscaledZ;const te=g.getSource().minzoom,he=[];if(!B){const Ce=g.getSource().maxzoom;if(d.canonical.z>=Ce){const Ve=d.canonical.z-Ce;g.getSource().reparseOverscaled?(K=Math.max(d.canonical.z+2,g.transform.tileZoom),X=new t.OverscaledTileID(K,d.wrap,Ce,d.canonical.x>>Ve,d.canonical.y>>Ve)):0!==Ve&&(K=Ce,X=new t.OverscaledTileID(K,d.wrap,Ce,d.canonical.x>>Ve,d.canonical.y>>Ve))}X.key!==d.key&&(he.push(X.key),T=g.getTile(X))}const ue=Ce=>{he.forEach(Ve=>{P[Ve]=Ce}),he.length=0};for(K-=1;K>=te&&(!T||!T.hasData());K--){T&&ue(T.tileID.key);const Ce=X.calculateScaledKey(K);if(T=g.getTileByID(Ce),T&&T.hasData())break;const Ve=P[Ce];if(null===Ve)break;void 0===Ve?he.push(Ce):T=g.getTileByID(Ve)}return ue(T?T.tileID.key:null),T&&T.hasData()?T:null}findDEMTileFor(d){return this.enabled?this._findTileCoveringTileID(d,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(d,g){let T=this._tilesDirty[d];T||(T=this._tilesDirty[d]={}),T[g.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const d=function(g){let T=0;const P=new t.StructArrayLayout2ui4,B=131;for(let X=1;X<129;X++){for(let K=1;K<129;K++)T=X*B+K,P.emplaceBack(T,T+1),P.emplaceBack(T,T+B),P.emplaceBack(T+1,T+B),128===X&&P.emplaceBack(T+B,T+B+1);P.emplaceBack(T+1,T+1+B)}return P}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(d),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,d.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Or{static cacheKey(d,g,T,P){let B=`${g}${P?P.cacheKey:""}`;for(const X of T)d.usedDefines.includes(X)&&(B+=`/${X}`);return B}constructor(d,g,T,P,B,X){const K=d.gl;this.program=K.createProgram();const te=function(Te){const Ke=[];for(let bt=0;bt<Te.length;bt++){if(null===Te[bt])continue;const xt=Te[bt].split(" ");Ke.push(xt.pop())}return Ke}(T.staticAttributes),he=P?P.getBinderAttributes():[],ue=te.concat(he);let Ce=P?P.defines():[];Ce=Ce.concat(X.map(Te=>`#define ${Te}`));const Ve=d.isWebGL2?"#version 300 es\n":"",Qe=Ve+Ce.concat(d.extStandardDerivatives&&0===Ve.length?"#extension GL_OES_standard_derivatives : enable\n".concat(ra):ra,ra,oc,vu.fragmentSource,Dl.fragmentSource,T.fragmentSource).join("\n"),et=Ve+Ce.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",oc,vu.vertexSource,Dl.vertexSource,hl.vertexSource,T.vertexSource).join("\n"),tt=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);K.shaderSource(tt,Qe),K.compileShader(tt),K.attachShader(this.program,tt);const st=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(st,et),K.compileShader(st),K.attachShader(this.program,st),this.attributes={},this.numAttributes=ue.length;for(let Te=0;Te<this.numAttributes;Te++)ue[Te]&&(K.bindAttribLocation(this.program,Te,ue[Te]),this.attributes[ue[Te]]=Te);K.linkProgram(this.program),K.deleteShader(st),K.deleteShader(tt),this.fixedUniforms=B(d),this.binderUniforms=P?P.getUniforms(d):[],X.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new t.Uniform1i(Te=d),u_dem_prev:new t.Uniform1i(Te),u_dem_unpack:new t.Uniform4f(Te),u_dem_tl:new t.Uniform2f(Te),u_dem_scale:new t.Uniform1f(Te),u_dem_tl_prev:new t.Uniform2f(Te),u_dem_scale_prev:new t.Uniform1f(Te),u_dem_size:new t.Uniform1f(Te),u_dem_lerp:new t.Uniform1f(Te),u_exaggeration:new t.Uniform1f(Te),u_depth:new t.Uniform1i(Te),u_depth_size_inv:new t.Uniform2f(Te),u_meter_to_dem:new t.Uniform1f(Te),u_label_plane_matrix_inv:new t.UniformMatrix4f(Te)}),X.includes("GLOBE")&&(this.globeUniforms=(Te=>({u_tile_tl_up:new t.Uniform3f(Te),u_tile_tr_up:new t.Uniform3f(Te),u_tile_br_up:new t.Uniform3f(Te),u_tile_bl_up:new t.Uniform3f(Te),u_tile_up_scale:new t.Uniform1f(Te)}))(d)),X.includes("FOG")&&(this.fogUniforms=(Te=>({u_fog_matrix:new t.UniformMatrix4f(Te),u_fog_range:new t.Uniform2f(Te),u_fog_color:new t.Uniform4f(Te),u_fog_horizon_blend:new t.Uniform1f(Te),u_fog_temporal_offset:new t.Uniform1f(Te),u_frustum_tl:new t.Uniform3f(Te),u_frustum_tr:new t.Uniform3f(Te),u_frustum_br:new t.Uniform3f(Te),u_frustum_bl:new t.Uniform3f(Te),u_globe_pos:new t.Uniform3f(Te),u_globe_radius:new t.Uniform1f(Te),u_globe_transition:new t.Uniform1f(Te),u_is_globe:new t.Uniform1i(Te),u_viewport:new t.Uniform2f(Te)}))(d))}var Te}setTerrainUniformValues(d,g){if(!this.terrainUniforms)return;const T=this.terrainUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const P in g)T[P]&&T[P].set(this.program,P,g[P])}}setGlobeUniformValues(d,g){if(!this.globeUniforms)return;const T=this.globeUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const P in g)T[P]&&T[P].set(this.program,P,g[P])}}setFogUniformValues(d,g){if(!this.fogUniforms)return;const T=this.fogUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const P in g)T[P].set(this.program,P,g[P])}}draw(d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt){const st=d.gl;if(this.failedToCreate)return;d.program.set(this.program),d.setDepthMode(T),d.setStencilMode(P),d.setColorMode(B),d.setCullFace(X);for(const Ke of Object.keys(this.fixedUniforms))this.fixedUniforms[Ke].set(this.program,Ke,K[Ke]);et&&et.setUniforms(this.program,d,this.binderUniforms,Ve,{zoom:Qe});const Te={[st.LINES]:2,[st.TRIANGLES]:3,[st.LINE_STRIP]:1}[g];for(const Ke of Ce.get()){const bt=Ke.vaos||(Ke.vaos={});(bt[te]||(bt[te]=new Zu)).bind(d,this,he,et?et.getPaintVertexBuffers():[],ue,Ke.vertexOffset,tt||[]),st.drawElements(g,Ke.primitiveLength*Te,st.UNSIGNED_SHORT,Ke.primitiveOffset*Te*2)}}}function fl(C,d){const g=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,C.transform.tileZoom)/g,P=T*(d.tileID.canonical.x+d.tileID.wrap*g),B=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_tile_units_to_pixels:1/qi(d,1,C.transform.tileZoom),u_pixel_coord_upper:[P>>16,B>>16],u_pixel_coord_lower:[65535&P,65535&B]}}const Pl=t.create(),Rl=(C,d,g,T,P,B,X,K,te,he,ue)=>{const Ce=d.style.light,Ve=Ce.properties.get("position"),Qe=[Ve.x,Ve.y,Ve.z],et=t.create$1();"viewport"===Ce.properties.get("anchor")&&(t.fromRotation(et,-d.transform.angle),t.transformMat3(Qe,Qe,et));const tt=Ce.properties.get("color"),st=d.transform,Te={u_matrix:C,u_lightpos:Qe,u_lightintensity:Ce.properties.get("intensity"),u_lightcolor:[tt.r,tt.g,tt.b],u_vertical_gradient:+g,u_opacity:T,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Pl,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:P,u_edge_radius:B};return"globe"===st.projection.name&&(Te.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],Te.u_zoom_transition=te,Te.u_inv_rot_matrix=ue,Te.u_merc_center=he,Te.u_up_dir=st.projection.upVector(new t.CanonicalTileID(0,0,0),he[0]*t.EXTENT,he[1]*t.EXTENT),Te.u_height_lift=K),Te},zl=(C,d,g,T,P,B,X,K,te,he,ue,Ce)=>{const Ve=Rl(C,d,g,T,P,B,X,te,he,ue,Ce),Qe={u_height_factor:-Math.pow(2,X.overscaledZ)/K.tileSize/8};return t.extend(Ve,fl(d,K),Qe)},Us=C=>({u_matrix:C}),Co=(C,d,g)=>t.extend(Us(C),fl(d,g)),Mt=(C,d)=>({u_matrix:C,u_world:d}),ac=(C,d,g,T)=>t.extend(Co(C,d,g),{u_world:T}),ps=t.create(),Vr=(C,d,g,T,P,B)=>{const X=C.transform,K="globe"===X.projection.name;let te;if("map"===B.paint.get("circle-pitch-alignment"))if(K){const ue=t.globePixelsToTileUnits(X.zoom,d.canonical)*X._pixelsPerMercatorPixel;te=Float32Array.from([ue,0,0,ue])}else te=X.calculatePixelsToTileUnitsMatrix(g);else te=new Float32Array([X.pixelsToGLUnits[0],0,0,X.pixelsToGLUnits[1]]);const he={u_camera_to_center_distance:X.cameraToCenterDistance,u_matrix:C.translatePosMatrix(d.projMatrix,g,B.paint.get("circle-translate"),B.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:te,u_inv_rot_matrix:ps,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(K){he.u_inv_rot_matrix=T,he.u_merc_center=P,he.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],he.u_zoom_transition=t.globeToMercatorTransition(X.zoom);const ue=P[0]*t.EXTENT,Ce=P[1]*t.EXTENT;he.u_up_dir=X.projection.upVector(new t.CanonicalTileID(0,0,0),ue,Ce)}return he},_u=C=>{const d=[];return"map"===C.paint.get("circle-pitch-alignment")&&d.push("PITCH_WITH_MAP"),"map"===C.paint.get("circle-pitch-scale")&&d.push("SCALE_WITH_MAP"),d},lo=(C,d,g,T)=>{const P=t.EXTENT/g.tileSize;return{u_matrix:C,u_camera_to_center_distance:d.getCameraToCenterDistance(T),u_extrude_scale:[d.pixelsToGLUnits[0]/P,d.pixelsToGLUnits[1]/P]}},Za=(C,d,g=1)=>({u_matrix:C,u_color:d,u_overlay:0,u_overlay_scale:g}),oa=t.create(),qa=(C,d,g,T,P,B,X)=>{const K=C.transform,te="globe"===K.projection.name,he=te?t.globePixelsToTileUnits(K.zoom,d.canonical)*K._pixelsPerMercatorPixel:qi(g,1,B),ue={u_matrix:d.projMatrix,u_extrude_scale:he,u_intensity:X,u_inv_rot_matrix:oa,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(te){ue.u_inv_rot_matrix=T,ue.u_merc_center=P,ue.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],ue.u_zoom_transition=t.globeToMercatorTransition(K.zoom);const Ce=P[0]*t.EXTENT,Ve=P[1]*t.EXTENT;ue.u_up_dir=K.projection.upVector(new t.CanonicalTileID(0,0,0),Ce,Ve)}return ue},zs=(C,d,g,T,P,B,X)=>{const K=C.transform,te=K.calculatePixelsToTileUnitsMatrix(d);return{u_matrix:xc(C,d,g,T),u_pixels_to_tile_units:te,u_device_pixel_ratio:B,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:P,u_texsize:Ws(g)?d.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:aa(d,C.transform),u_alpha_discard_threshold:0,u_trim_offset:X}},wa=(C,d,g,T,P)=>{const B=C.transform;return{u_matrix:xc(C,d,g,T),u_texsize:d.imageAtlasTexture.size,u_pixels_to_tile_units:B.calculatePixelsToTileUnitsMatrix(d),u_device_pixel_ratio:P,u_image:0,u_tile_units_to_pixels:aa(d,B),u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function aa(C,d){return 1/qi(C,1,d.tileZoom)}function xc(C,d,g,T){return C.translatePosMatrix(T||d.tileID.projMatrix,d,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}function Ws(C){const d=C.paint.get("line-dasharray").value;return d.value||"constant"!==d.kind}const Vo=(C,d,g,T,P,B)=>{return{u_matrix:C,u_tl_parent:d,u_scale_parent:g,u_fade_t:T.mix,u_opacity:T.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(K=P.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(X=P.paint.get("raster-contrast"),X>0?1/(1-X):1+X),u_spin_weights:Go(P.paint.get("raster-hue-rotate")),u_perspective_transform:B};var X,K};function Go(C){C*=Math.PI/180;const d=Math.sin(C),g=Math.cos(C);return[(2*g+1)/3,(-Math.sqrt(3)*d-g+1)/3,(Math.sqrt(3)*d-g+1)/3]}const Ka=t.create(),jo=(C,d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt)=>{const st=P.transform,Te={u_is_size_zoom_constant:+("constant"===C||"source"===C),u_is_size_feature_constant:+("constant"===C||"camera"===C),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:st.cameraToCenterDistance,u_rotate_symbol:+g,u_aspect_ratio:st.width/st.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:X,u_coord_matrix:K,u_is_text:+te,u_pitch_with_map:+T,u_texsize:he,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ka,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ka,u_up_vector:[0,-1,0]};return"globe"===tt.name&&(Te.u_tile_id=[ue.canonical.x,ue.canonical.y,1<<ue.canonical.z],Te.u_zoom_transition=Ce,Te.u_inv_rot_matrix=Qe,Te.u_merc_center=Ve,Te.u_camera_forward=st._camera.forward(),Te.u_ecef_origin=t.globeECEFOrigin(st.globeMatrix,ue.toUnwrapped()),Te.u_tile_matrix=Float32Array.from(st.globeMatrix),Te.u_up_vector=et),Te},co=(C,d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt,st)=>t.extend(jo(C,d,g,T,P,B,X,K,te,he,Ce,Ve,Qe,et,tt,st),{u_gamma_scale:T?P.transform.cameraToCenterDistance*Math.cos(P.terrain?0:P.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+ue}),wc=(C,d,g,T,P,B,X,K,te,he,ue,Ce,Ve,Qe,et,tt)=>t.extend(co(C,d,g,T,P,B,X,K,!0,te,!0,ue,Ce,Ve,Qe,et,tt),{u_texsize_icon:he,u_texture_icon:1}),uo=(C,d,g)=>({u_matrix:C,u_opacity:d,u_color:g}),yu=(C,d,g,T,P)=>t.extend(function(B,X,K){const te=X.imageManager.getPattern(B.toString()),{width:he,height:ue}=X.imageManager.getPixelSize(),Ce=Math.pow(2,K.tileID.overscaledZ),Ve=K.tileSize*Math.pow(2,X.transform.tileZoom)/Ce,Qe=Ve*(K.tileID.canonical.x+K.tileID.wrap*Ce),et=Ve*K.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[he,ue],u_pattern_size:te.displaySize,u_tile_units_to_pixels:1/qi(K,1,X.transform.tileZoom),u_pixel_coord_upper:[Qe>>16,et>>16],u_pixel_coord_lower:[65535&Qe,65535&et]}}(T,g,P),{u_matrix:C,u_opacity:d}),la={fillExtrusion:C=>({u_matrix:new t.UniformMatrix4f(C),u_lightpos:new t.Uniform3f(C),u_lightintensity:new t.Uniform1f(C),u_lightcolor:new t.Uniform3f(C),u_vertical_gradient:new t.Uniform1f(C),u_opacity:new t.Uniform1f(C),u_edge_radius:new t.Uniform1f(C),u_ao:new t.Uniform2f(C),u_tile_id:new t.Uniform3f(C),u_zoom_transition:new t.Uniform1f(C),u_inv_rot_matrix:new t.UniformMatrix4f(C),u_merc_center:new t.Uniform2f(C),u_up_dir:new t.Uniform3f(C),u_height_lift:new t.Uniform1f(C)}),fillExtrusionPattern:C=>({u_matrix:new t.UniformMatrix4f(C),u_lightpos:new t.Uniform3f(C),u_lightintensity:new t.Uniform1f(C),u_lightcolor:new t.Uniform3f(C),u_vertical_gradient:new t.Uniform1f(C),u_height_factor:new t.Uniform1f(C),u_edge_radius:new t.Uniform1f(C),u_ao:new t.Uniform2f(C),u_tile_id:new t.Uniform3f(C),u_zoom_transition:new t.Uniform1f(C),u_inv_rot_matrix:new t.UniformMatrix4f(C),u_merc_center:new t.Uniform2f(C),u_up_dir:new t.Uniform3f(C),u_height_lift:new t.Uniform1f(C),u_image:new t.Uniform1i(C),u_texsize:new t.Uniform2f(C),u_pixel_coord_upper:new t.Uniform2f(C),u_pixel_coord_lower:new t.Uniform2f(C),u_tile_units_to_pixels:new t.Uniform1f(C),u_opacity:new t.Uniform1f(C)}),fill:C=>({u_matrix:new t.UniformMatrix4f(C)}),fillPattern:C=>({u_matrix:new t.UniformMatrix4f(C),u_image:new t.Uniform1i(C),u_texsize:new t.Uniform2f(C),u_pixel_coord_upper:new t.Uniform2f(C),u_pixel_coord_lower:new t.Uniform2f(C),u_tile_units_to_pixels:new t.Uniform1f(C)}),fillOutline:C=>({u_matrix:new t.UniformMatrix4f(C),u_world:new t.Uniform2f(C)}),fillOutlinePattern:C=>({u_matrix:new t.UniformMatrix4f(C),u_world:new t.Uniform2f(C),u_image:new t.Uniform1i(C),u_texsize:new t.Uniform2f(C),u_pixel_coord_upper:new t.Uniform2f(C),u_pixel_coord_lower:new t.Uniform2f(C),u_tile_units_to_pixels:new t.Uniform1f(C)}),circle:C=>({u_camera_to_center_distance:new t.Uniform1f(C),u_extrude_scale:new t.UniformMatrix2f(C),u_device_pixel_ratio:new t.Uniform1f(C),u_matrix:new t.UniformMatrix4f(C),u_inv_rot_matrix:new t.UniformMatrix4f(C),u_merc_center:new t.Uniform2f(C),u_tile_id:new t.Uniform3f(C),u_zoom_transition:new t.Uniform1f(C),u_up_dir:new t.Uniform3f(C)}),collisionBox:C=>({u_matrix:new t.UniformMatrix4f(C),u_camera_to_center_distance:new t.Uniform1f(C),u_extrude_scale:new t.Uniform2f(C)}),collisionCircle:C=>({u_matrix:new t.UniformMatrix4f(C),u_inv_matrix:new t.UniformMatrix4f(C),u_camera_to_center_distance:new t.Uniform1f(C),u_viewport_size:new t.Uniform2f(C)}),debug:C=>({u_color:new t.UniformColor(C),u_matrix:new t.UniformMatrix4f(C),u_overlay:new t.Uniform1i(C),u_overlay_scale:new t.Uniform1f(C)}),clippingMask:C=>({u_matrix:new t.UniformMatrix4f(C)}),heatmap:C=>({u_extrude_scale:new t.Uniform1f(C),u_intensity:new t.Uniform1f(C),u_matrix:new t.UniformMatrix4f(C),u_inv_rot_matrix:new t.UniformMatrix4f(C),u_merc_center:new t.Uniform2f(C),u_tile_id:new t.Uniform3f(C),u_zoom_transition:new t.Uniform1f(C),u_up_dir:new t.Uniform3f(C)}),heatmapTexture:C=>({u_image:new t.Uniform1i(C),u_color_ramp:new t.Uniform1i(C),u_opacity:new t.Uniform1f(C)}),hillshade:C=>({u_matrix:new t.UniformMatrix4f(C),u_image:new t.Uniform1i(C),u_latrange:new t.Uniform2f(C),u_light:new t.Uniform2f(C),u_shadow:new t.UniformColor(C),u_highlight:new t.UniformColor(C),u_accent:new t.UniformColor(C)}),hillshadePrepare:C=>({u_matrix:new t.UniformMatrix4f(C),u_image:new t.Uniform1i(C),u_dimension:new t.Uniform2f(C),u_zoom:new t.Uniform1f(C),u_unpack:new t.Uniform4f(C)}),line:C=>({u_matrix:new t.UniformMatrix4f(C),u_pixels_to_tile_units:new t.UniformMatrix2f(C),u_device_pixel_ratio:new t.Uniform1f(C),u_units_to_pixels:new t.Uniform2f(C),u_dash_image:new t.Uniform1i(C),u_gradient_image:new t.Uniform1i(C),u_image_height:new t.Uniform1f(C),u_texsize:new t.Uniform2f(C),u_tile_units_to_pixels:new t.Uniform1f(C),u_alpha_discard_threshold:new t.Uniform1f(C),u_trim_offset:new t.Uniform2f(C)}),linePattern:C=>({u_matrix:new t.UniformMatrix4f(C),u_texsize:new t.Uniform2f(C),u_pixels_to_tile_units:new t.UniformMatrix2f(C),u_device_pixel_ratio:new t.Uniform1f(C),u_image:new t.Uniform1i(C),u_units_to_pixels:new t.Uniform2f(C),u_tile_units_to_pixels:new t.Uniform1f(C),u_alpha_discard_threshold:new t.Uniform1f(C)}),raster:C=>({u_matrix:new t.UniformMatrix4f(C),u_tl_parent:new t.Uniform2f(C),u_scale_parent:new t.Uniform1f(C),u_fade_t:new t.Uniform1f(C),u_opacity:new t.Uniform1f(C),u_image0:new t.Uniform1i(C),u_image1:new t.Uniform1i(C),u_brightness_low:new t.Uniform1f(C),u_brightness_high:new t.Uniform1f(C),u_saturation_factor:new t.Uniform1f(C),u_contrast_factor:new t.Uniform1f(C),u_spin_weights:new t.Uniform3f(C),u_perspective_transform:new t.Uniform2f(C)}),symbolIcon:C=>({u_is_size_zoom_constant:new t.Uniform1i(C),u_is_size_feature_constant:new t.Uniform1i(C),u_size_t:new t.Uniform1f(C),u_size:new t.Uniform1f(C),u_camera_to_center_distance:new t.Uniform1f(C),u_rotate_symbol:new t.Uniform1i(C),u_aspect_ratio:new t.Uniform1f(C),u_fade_change:new t.Uniform1f(C),u_matrix:new t.UniformMatrix4f(C),u_label_plane_matrix:new t.UniformMatrix4f(C),u_coord_matrix:new t.UniformMatrix4f(C),u_is_text:new t.Uniform1i(C),u_pitch_with_map:new t.Uniform1i(C),u_texsize:new t.Uniform2f(C),u_tile_id:new t.Uniform3f(C),u_zoom_transition:new t.Uniform1f(C),u_inv_rot_matrix:new t.UniformMatrix4f(C),u_merc_center:new t.Uniform2f(C),u_camera_forward:new t.Uniform3f(C),u_tile_matrix:new t.UniformMatrix4f(C),u_up_vector:new t.Uniform3f(C),u_ecef_origin:new t.Uniform3f(C),u_texture:new t.Uniform1i(C)}),symbolSDF:C=>({u_is_size_zoom_constant:new t.Uniform1i(C),u_is_size_feature_constant:new t.Uniform1i(C),u_size_t:new t.Uniform1f(C),u_size:new t.Uniform1f(C),u_camera_to_center_distance:new t.Uniform1f(C),u_rotate_symbol:new t.Uniform1i(C),u_aspect_ratio:new t.Uniform1f(C),u_fade_change:new t.Uniform1f(C),u_matrix:new t.UniformMatrix4f(C),u_label_plane_matrix:new t.UniformMatrix4f(C),u_coord_matrix:new t.UniformMatrix4f(C),u_is_text:new t.Uniform1i(C),u_pitch_with_map:new t.Uniform1i(C),u_texsize:new t.Uniform2f(C),u_texture:new t.Uniform1i(C),u_gamma_scale:new t.Uniform1f(C),u_device_pixel_ratio:new t.Uniform1f(C),u_tile_id:new t.Uniform3f(C),u_zoom_transition:new t.Uniform1f(C),u_inv_rot_matrix:new t.UniformMatrix4f(C),u_merc_center:new t.Uniform2f(C),u_camera_forward:new t.Uniform3f(C),u_tile_matrix:new t.UniformMatrix4f(C),u_up_vector:new t.Uniform3f(C),u_ecef_origin:new t.Uniform3f(C),u_is_halo:new t.Uniform1i(C)}),symbolTextAndIcon:C=>({u_is_size_zoom_constant:new t.Uniform1i(C),u_is_size_feature_constant:new t.Uniform1i(C),u_size_t:new t.Uniform1f(C),u_size:new t.Uniform1f(C),u_camera_to_center_distance:new t.Uniform1f(C),u_rotate_symbol:new t.Uniform1i(C),u_aspect_ratio:new t.Uniform1f(C),u_fade_change:new t.Uniform1f(C),u_matrix:new t.UniformMatrix4f(C),u_label_plane_matrix:new t.UniformMatrix4f(C),u_coord_matrix:new t.UniformMatrix4f(C),u_is_text:new t.Uniform1i(C),u_pitch_with_map:new t.Uniform1i(C),u_texsize:new t.Uniform2f(C),u_texsize_icon:new t.Uniform2f(C),u_texture:new t.Uniform1i(C),u_texture_icon:new t.Uniform1i(C),u_gamma_scale:new t.Uniform1f(C),u_device_pixel_ratio:new t.Uniform1f(C),u_is_halo:new t.Uniform1i(C)}),background:C=>({u_matrix:new t.UniformMatrix4f(C),u_opacity:new t.Uniform1f(C),u_color:new t.UniformColor(C)}),backgroundPattern:C=>({u_matrix:new t.UniformMatrix4f(C),u_opacity:new t.Uniform1f(C),u_image:new t.Uniform1i(C),u_pattern_tl:new t.Uniform2f(C),u_pattern_br:new t.Uniform2f(C),u_texsize:new t.Uniform2f(C),u_pattern_size:new t.Uniform2f(C),u_pixel_coord_upper:new t.Uniform2f(C),u_pixel_coord_lower:new t.Uniform2f(C),u_tile_units_to_pixels:new t.Uniform1f(C)}),terrainRaster:Ns,terrainDepth:Ns,skybox:C=>({u_matrix:new t.UniformMatrix4f(C),u_sun_direction:new t.Uniform3f(C),u_cubemap:new t.Uniform1i(C),u_opacity:new t.Uniform1f(C),u_temporal_offset:new t.Uniform1f(C)}),skyboxGradient:C=>({u_matrix:new t.UniformMatrix4f(C),u_color_ramp:new t.Uniform1i(C),u_center_direction:new t.Uniform3f(C),u_radius:new t.Uniform1f(C),u_opacity:new t.Uniform1f(C),u_temporal_offset:new t.Uniform1f(C)}),skyboxCapture:C=>({u_matrix_3f:new t.UniformMatrix3f(C),u_sun_direction:new t.Uniform3f(C),u_sun_intensity:new t.Uniform1f(C),u_color_tint_r:new t.Uniform4f(C),u_color_tint_m:new t.Uniform4f(C),u_luminance:new t.Uniform1f(C)}),globeRaster:C=>({u_proj_matrix:new t.UniformMatrix4f(C),u_globe_matrix:new t.UniformMatrix4f(C),u_normalize_matrix:new t.UniformMatrix4f(C),u_merc_matrix:new t.UniformMatrix4f(C),u_zoom_transition:new t.Uniform1f(C),u_merc_center:new t.Uniform2f(C),u_image0:new t.Uniform1i(C),u_grid_matrix:new t.UniformMatrix3f(C),u_skirt_height:new t.Uniform1f(C),u_frustum_tl:new t.Uniform3f(C),u_frustum_tr:new t.Uniform3f(C),u_frustum_br:new t.Uniform3f(C),u_frustum_bl:new t.Uniform3f(C),u_globe_pos:new t.Uniform3f(C),u_globe_radius:new t.Uniform1f(C),u_viewport:new t.Uniform2f(C)}),globeAtmosphere:C=>({u_frustum_tl:new t.Uniform3f(C),u_frustum_tr:new t.Uniform3f(C),u_frustum_br:new t.Uniform3f(C),u_frustum_bl:new t.Uniform3f(C),u_horizon:new t.Uniform1f(C),u_transition:new t.Uniform1f(C),u_fadeout_range:new t.Uniform1f(C),u_color:new t.Uniform4f(C),u_high_color:new t.Uniform4f(C),u_space_color:new t.Uniform4f(C),u_star_intensity:new t.Uniform1f(C),u_star_density:new t.Uniform1f(C),u_star_size:new t.Uniform1f(C),u_temporal_offset:new t.Uniform1f(C),u_horizon_angle:new t.Uniform1f(C),u_rotation_matrix:new t.UniformMatrix4f(C)})};let Ja;function za(C,d,g,T,P,B,X){const K=C.context,te=K.gl,he=C.transform,ue=C.useProgram("collisionBox"),Ce=[];let Ve=0,Qe=0;for(let xt=0;xt<T.length;xt++){const Ht=T[xt],Gt=d.getTile(Ht),Ut=Gt.getBucket(g);if(!Ut)continue;const ti=It(Ht,Ut,he);let Qt=ti;0===P[0]&&0===P[1]||(Qt=C.translatePosMatrix(ti,Gt,P,B));const gi=X?Ut.textCollisionBox:Ut.iconCollisionBox,Ji=Ut.collisionCircleArray;if(Ji.length>0){const Zt=t.create(),Oi=Qt;t.mul(Zt,Ut.placementInvProjMatrix,he.glCoordMatrix),t.mul(Zt,Zt,Ut.placementViewportMatrix),Ce.push({circleArray:Ji,circleOffset:Qe,transform:Oi,invTransform:Zt,projection:Ut.getProjection()}),Ve+=Ji.length/4,Qe=Ve}gi&&(C.terrain&&C.terrain.setupElevationDraw(Gt,ue),ue.draw(K,te.LINES,t.DepthMode.disabled,t.StencilMode.disabled,C.colorModeForRenderPass(),t.CullFaceMode.disabled,lo(Qt,he,Gt,Ut.getProjection()),g.id,gi.layoutVertexBuffer,gi.indexBuffer,gi.segments,null,he.zoom,null,[gi.collisionVertexBuffer,gi.collisionVertexBufferExt]))}if(!X||!Ce.length)return;const et=C.useProgram("collisionCircle"),tt=new t.StructArrayLayout2f1f2i16;tt.resize(4*Ve),tt._trim();let st=0;for(const xt of Ce)for(let Ht=0;Ht<xt.circleArray.length/4;Ht++){const Gt=4*Ht,Ut=xt.circleArray[Gt+0],ti=xt.circleArray[Gt+1],Qt=xt.circleArray[Gt+2],gi=xt.circleArray[Gt+3];tt.emplace(st++,Ut,ti,Qt,gi,0),tt.emplace(st++,Ut,ti,Qt,gi,1),tt.emplace(st++,Ut,ti,Qt,gi,2),tt.emplace(st++,Ut,ti,Qt,gi,3)}(!Ja||Ja.length<2*Ve)&&(Ja=function(xt){const Ht=2*xt,Gt=new t.StructArrayLayout3ui6;Gt.resize(Ht),Gt._trim();for(let Ut=0;Ut<Ht;Ut++){const ti=6*Ut;Gt.uint16[ti+0]=4*Ut+0,Gt.uint16[ti+1]=4*Ut+1,Gt.uint16[ti+2]=4*Ut+2,Gt.uint16[ti+3]=4*Ut+2,Gt.uint16[ti+4]=4*Ut+3,Gt.uint16[ti+5]=4*Ut+0}return Gt}(Ve));const Te=K.createIndexBuffer(Ja,!0),Ke=K.createVertexBuffer(tt,t.collisionCircleLayout.members,!0);for(const xt of Ce){const Ht={u_matrix:xt.transform,u_inv_matrix:xt.invTransform,u_camera_to_center_distance:(bt=he).getCameraToCenterDistance(xt.projection),u_viewport_size:[bt.width,bt.height]};et.draw(K,te.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,C.colorModeForRenderPass(),t.CullFaceMode.disabled,Ht,g.id,Ke,Te,t.SegmentVector.simpleSegment(0,2*xt.circleOffset,xt.circleArray.length,xt.circleArray.length/2),null,he.zoom)}var bt;Ke.destroy(),Te.destroy()}const lc=t.create();function ys({width:C,height:d,anchor:g,textOffset:T,textScale:P},B){const{horizontalAlign:X,verticalAlign:K}=t.getAnchorAlignment(g),te=-(X-.5)*C,he=-(K-.5)*d,ue=t.evaluateVariableOffset(g,T);return new t.Point((te/P+ue[0])*B,(he/P+ue[1])*B)}function Cc(C,d,g,T,P,B,X,K,te,he,ue){const Ce=C.text.placedSymbolArray,Ve=C.text.dynamicLayoutVertexArray,Qe=C.icon.dynamicLayoutVertexArray,et={},tt=C.getProjection(),st=ii(K,tt,B),Te=B.elevation,Ke=tt.upVectorScale(K.canonical,B.center.lat,B.worldSize).metersToTile;Ve.clear();for(let bt=0;bt<Ce.length;bt++){const xt=Ce.get(bt),{tileAnchorX:Ht,tileAnchorY:Gt,numGlyphs:Ut}=xt,ti=xt.hidden||!xt.crossTileID||C.allowVerticalPlacement&&!xt.placedOrientation?null:T[xt.crossTileID];if(ti){let Qt=0,gi=0,Ji=0;if(Te){const Ki=Te?Te.getAtTileOffset(K,Ht,Gt):0,[Hn,nr,Ln]=tt.upVector(K.canonical,Ht,Gt);Qt=Ki*Hn*Ke,gi=Ki*nr*Ke,Ji=Ki*Ln*Ke}let[Zt,Oi,yi,Qi]=$(xt.projectedAnchorX+Qt,xt.projectedAnchorY+gi,xt.projectedAnchorZ+Ji,g?st:X);const vi=q(B.getCameraToCenterDistance(tt),Qi);let Ii=P.evaluateSizeForFeature(C.textSizeData,he,xt)*vi/t.ONE_EM;g&&(Ii*=C.tilePixelRatio/te);const nn=ys(ti,Ii);g?(({x:Zt,y:Oi,z:yi}=tt.projectTilePoint(Ht+nn.x,Gt+nn.y,K.canonical)),[Zt,Oi,yi]=$(Zt+Qt,Oi+gi,yi+Ji,X)):(d&&nn._rotate(-B.angle),Zt+=nn.x,Oi+=nn.y,yi=0);const $i=C.allowVerticalPlacement&&xt.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let Ki=0;Ki<Ut;Ki++)t.addDynamicAttributes(Ve,Zt,Oi,yi,$i);ue&&xt.associatedIconIndex>=0&&(et[xt.associatedIconIndex]={x:Zt,y:Oi,z:yi,angle:$i})}else pe(Ut,Ve)}if(ue){Qe.clear();const bt=C.icon.placedSymbolArray;for(let xt=0;xt<bt.length;xt++){const Ht=bt.get(xt),{numGlyphs:Gt}=Ht,Ut=et[xt];if(Ht.hidden||!Ut)pe(Gt,Qe);else{const{x:ti,y:Qt,z:gi,angle:Ji}=Ut;for(let Zt=0;Zt<Gt;Zt++)t.addDynamicAttributes(Qe,ti,Qt,gi,Ji)}}C.icon.dynamicLayoutVertexBuffer.updateData(Qe)}C.text.dynamicLayoutVertexBuffer.updateData(Ve)}function ml(C,d,g){return g.iconsInText&&d?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Oo(C,d,g,T,P,B,X,K,te,he,ue,Ce){const Ve=C.context,Qe=Ve.gl,et=C.transform,tt="map"===K,st="map"===te,Te=tt&&"point"!==g.layout.get("symbol-placement"),Ke=tt&&!st&&!Te,bt=void 0!==g.layout.get("symbol-sort-key").constantOr(1);let xt=!1;const Ht=C.depthModeForSublayer(0,t.DepthMode.ReadOnly),Gt=[t.mercatorXfromLng(et.center.lng),t.mercatorYfromLat(et.center.lat)],Ut=g.layout.get("text-variable-anchor"),ti="globe"===et.projection.name,Qt=[],gi=[0,-1,0];let Ji=gi;!ti&&!et.mercatorFromTransition||tt||(Ji=function(Zt){const Oi=Zt._camera.getWorldToCamera(Zt.worldSize,1),yi=t.multiply([],Oi,Zt.globeMatrix);t.invert(yi,yi);const Qi=[0,0,0],vi=[0,1,0,0];return t.transformMat4$1(vi,vi,yi),Qi[0]=vi[0],Qi[1]=vi[1],Qi[2]=vi[2],t.normalize(Qi,Qi),Qi}(et));for(const Zt of T){const Oi=d.getTile(Zt),yi=Oi.getBucket(g);if(!yi||"mercator"===yi.projection.name&&ti)continue;const Qi=P?yi.text:yi.icon;if(!Qi||yi.fullyClipped||!Qi.segments.get().length)continue;const vi=Qi.programConfigurations.get(g.id),Ii=P||yi.sdfIcons,nn=P?yi.textSizeData:yi.iconSizeData,$i=st||0!==et.pitch,Ki=t.evaluateSizeForZoom(nn,et.zoom);let Hn,nr,Ln,Xn,Zn=[0,0],tr=null;if(P)nr=Oi.glyphAtlasTexture,Ln=Qe.LINEAR,Hn=Oi.glyphAtlasTexture.size,yi.iconsInText&&(Zn=Oi.imageAtlasTexture.size,tr=Oi.imageAtlasTexture,Xn=$i||C.options.rotating||C.options.zooming||"composite"===nn.kind||"camera"===nn.kind?Qe.LINEAR:Qe.NEAREST);else{const dc=1!==g.layout.get("icon-size").constantOr(0)||yi.iconsNeedLinear;nr=Oi.imageAtlasTexture,Ln=Ii||C.options.rotating||C.options.zooming||dc||$i?Qe.LINEAR:Qe.NEAREST,Hn=Oi.imageAtlasTexture.size}const zn="globe"===yi.projection.name,Pr=zn?Ji:gi,Ur=zn?t.globeToMercatorTransition(et.zoom):0,ms=ii(Zt,yi.getProjection(),et),gs=et.calculatePixelsToTileUnitsMatrix(Oi),cs=I(ms,Oi.tileID.canonical,st,tt,et,yi.getProjection(),gs),Ls=C.terrain&&st&&Te?t.invert(t.create(),cs):lc,ka=U(ms,Oi.tileID.canonical,st,tt,et,yi.getProjection(),gs),qo=Ut&&yi.hasTextData(),Os="none"!==g.layout.get("icon-text-fit")&&qo&&yi.hasIconData();if(Te){const dc=et.elevation,El=dc?dc.getAtTileOffsetFunc(Zt,et.center.lat,et.worldSize,yi.getProjection()):null,Gc=F(ms,Oi.tileID.canonical,st,tt,et,yi.getProjection(),gs);de(yi,ms,C,P,Gc,ka,st,he,El,Zt)}const qr=Te||P&&Ut||Os,Jr=C.translatePosMatrix(ms,Oi,B,X),Ps=qr?lc:cs,Ma=C.translatePosMatrix(ka,Oi,B,X,!0),xs=yi.getProjection().createInversionMatrix(et,Zt.canonical),jr=[];C.terrainRenderModeElevated()&&st&&jr.push("PITCH_WITH_MAP_TERRAIN"),zn&&jr.push("PROJECTION_GLOBE_VIEW"),qr&&jr.push("PROJECTED_POS_ON_VIEWPORT");const Cu=Ii&&0!==g.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1);let Cl;Cl=Ii?yi.iconsInText?wc(nn.kind,Ki,Ke,st,C,Jr,Ps,Ma,Hn,Zn,Zt,Ur,Gt,xs,Pr,yi.getProjection()):co(nn.kind,Ki,Ke,st,C,Jr,Ps,Ma,P,Hn,!0,Zt,Ur,Gt,xs,Pr,yi.getProjection()):jo(nn.kind,Ki,Ke,st,C,Jr,Ps,Ma,P,Hn,Zt,Ur,Gt,xs,Pr,yi.getProjection());const Vl={program:C.useProgram(ml(Ii,P,yi),vi,jr),buffers:Qi,uniformValues:Cl,atlasTexture:nr,atlasTextureIcon:tr,atlasInterpolation:Ln,atlasInterpolationIcon:Xn,isSDF:Ii,hasHalo:Cu,tile:Oi,labelPlaneMatrixInv:Ls};if(bt&&yi.canOverlap){xt=!0;const dc=Qi.segments.get();for(const El of dc)Qt.push({segments:new t.SegmentVector([El]),sortKey:El.sortKey,state:Vl})}else Qt.push({segments:Qi.segments,sortKey:0,state:Vl})}xt&&Qt.sort((Zt,Oi)=>Zt.sortKey-Oi.sortKey);for(const Zt of Qt){const Oi=Zt.state;if(C.terrain&&C.terrain.setupElevationDraw(Oi.tile,Oi.program,{useDepthForOcclusion:!ti,labelPlaneMatrixInv:Oi.labelPlaneMatrixInv}),Ve.activeTexture.set(Qe.TEXTURE0),Oi.atlasTexture.bind(Oi.atlasInterpolation,Qe.CLAMP_TO_EDGE),Oi.atlasTextureIcon&&(Ve.activeTexture.set(Qe.TEXTURE1),Oi.atlasTextureIcon&&Oi.atlasTextureIcon.bind(Oi.atlasInterpolationIcon,Qe.CLAMP_TO_EDGE)),Oi.isSDF){const yi=Oi.uniformValues;Oi.hasHalo&&(yi.u_is_halo=1,ho(Oi.buffers,Zt.segments,g,C,Oi.program,Ht,ue,Ce,yi)),yi.u_is_halo=0}ho(Oi.buffers,Zt.segments,g,C,Oi.program,Ht,ue,Ce,Oi.uniformValues)}}function ho(C,d,g,T,P,B,X,K,te){const he=T.context,ue=[C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer,C.globeExtVertexBuffer];P.draw(he,he.gl.TRIANGLES,B,X,K,t.CullFaceMode.disabled,te,g.id,C.layoutVertexBuffer,C.indexBuffer,d,g.paint,T.transform.zoom,C.programConfigurations.get(g.id),ue)}function Kr(C,d,g,T,P,B,X){const K=C.context.gl,te=g.paint.get("fill-pattern"),he=te&&te.constantOr(1);let ue,Ce,Ve,Qe,et;X?(Ce=he&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ue=K.LINES):(Ce=he?"fillPattern":"fill",ue=K.TRIANGLES);for(const tt of T){const st=d.getTile(tt);if(he&&!st.patternsLoaded())continue;const Te=st.getBucket(g);if(!Te)continue;C.prepareDrawTile();const Ke=Te.programConfigurations.get(g.id),bt=C.useProgram(Ce,Ke);he&&(C.context.activeTexture.set(K.TEXTURE0),st.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Ke.updatePaintBuffers());const xt=te.constantOr(null);if(xt&&st.imageAtlas){const Gt=st.imageAtlas.patternPositions[xt.toString()];Gt&&Ke.setConstantPatternPositions(Gt)}const Ht=C.translatePosMatrix(tt.projMatrix,st,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(X){Qe=Te.indexBuffer2,et=Te.segments2;const Gt=C.terrain&&C.terrain.renderingToTexture?C.terrain.drapeBufferSize:[K.drawingBufferWidth,K.drawingBufferHeight];Ve="fillOutlinePattern"===Ce&&he?ac(Ht,C,st,Gt):Mt(Ht,Gt)}else Qe=Te.indexBuffer,et=Te.segments,Ve=he?Co(Ht,C,st):Us(Ht);C.prepareDrawProgram(C.context,bt,tt.toUnwrapped()),bt.draw(C.context,ue,P,C.stencilModeForClipping(tt),B,t.CullFaceMode.disabled,Ve,g.id,Te.layoutVertexBuffer,Qe,et,g.paint,C.transform.zoom,Ke)}}function gl(C,d,g,T,P,B,X){const K=C.context,te=K.gl,he=C.transform,ue=g.paint.get("fill-extrusion-pattern"),Ce=ue.constantOr(1),Ve=g.paint.get("fill-extrusion-opacity"),Qe=[g.paint.get("fill-extrusion-ambient-occlusion-intensity"),g.paint.get("fill-extrusion-ambient-occlusion-radius")],et=g.layout.get("fill-extrusion-edge-radius"),tt=et>0&&!g.paint.get("fill-extrusion-rounded-roof"),st=tt?0:et,Te="globe"===he.projection.name?t.fillExtrusionHeightLift():0,Ke="globe"===he.projection.name,bt=Ke?t.globeToMercatorTransition(he.zoom):0,xt=[t.mercatorXfromLng(he.center.lng),t.mercatorYfromLat(he.center.lat)],Ht=[];Ke&&Ht.push("PROJECTION_GLOBE_VIEW"),Qe[0]>0&&Ht.push("FAUX_AO"),tt&&Ht.push("ZERO_ROOF_RADIUS");for(const Gt of T){const Ut=d.getTile(Gt),ti=Ut.getBucket(g);if(!ti||ti.projection.name!==he.projection.name)continue;const Qt=ti.programConfigurations.get(g.id),gi=C.useProgram(Ce?"fillExtrusionPattern":"fillExtrusion",Qt,Ht);if(C.terrain){const Ii=C.terrain;if(C.style.terrainSetForDrapingOnly())Ii.setupElevationDraw(Ut,gi,{useMeterToDem:!0});else{if(!ti.enableTerrain)continue;if(Ii.setupElevationDraw(Ut,gi,{useMeterToDem:!0}),cc(K,d,Gt,ti,g,Ii),!ti.centroidVertexBuffer){const nn=gi.attributes.a_centroid_pos;void 0!==nn&&te.vertexAttrib2f(nn,0,0)}}}Ce&&(C.context.activeTexture.set(te.TEXTURE0),Ut.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Qt.updatePaintBuffers());const Ji=ue.constantOr(null);if(Ji&&Ut.imageAtlas){const Ii=Ut.imageAtlas.patternPositions[Ji.toString()];Ii&&Qt.setConstantPatternPositions(Ii)}const Zt=C.translatePosMatrix(Gt.projMatrix,Ut,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),Oi=he.projection.createInversionMatrix(he,Gt.canonical),yi=g.paint.get("fill-extrusion-vertical-gradient"),Qi=Ce?zl(Zt,C,yi,Ve,Qe,st,Gt,Ut,Te,bt,xt,Oi):Rl(Zt,C,yi,Ve,Qe,st,Gt,Te,bt,xt,Oi);C.prepareDrawProgram(K,gi,Gt.toUnwrapped());const vi=[];C.terrain&&vi.push(ti.centroidVertexBuffer),Ke&&vi.push(ti.layoutVertexExtBuffer),gi.draw(K,K.gl.TRIANGLES,P,B,X,t.CullFaceMode.backCCW,Qi,g.id,ti.layoutVertexBuffer,ti.indexBuffer,ti.segments,g.paint,C.transform.zoom,Qt,vi)}}function cc(C,d,g,T,P,B){const X=[Te=>{let Ke=Te.canonical.x-1,bt=Te.wrap;return Ke<0&&(Ke=(1<<Te.canonical.z)-1,bt--),new t.OverscaledTileID(Te.overscaledZ,bt,Te.canonical.z,Ke,Te.canonical.y)},Te=>{let Ke=Te.canonical.x+1,bt=Te.wrap;return Ke===1<<Te.canonical.z&&(Ke=0,bt++),new t.OverscaledTileID(Te.overscaledZ,bt,Te.canonical.z,Ke,Te.canonical.y)},Te=>new t.OverscaledTileID(Te.overscaledZ,Te.wrap,Te.canonical.z,Te.canonical.x,(0===Te.canonical.y?1<<Te.canonical.z:Te.canonical.y)-1),Te=>new t.OverscaledTileID(Te.overscaledZ,Te.wrap,Te.canonical.z,Te.canonical.x,Te.canonical.y===(1<<Te.canonical.z)-1?0:Te.canonical.y+1)],K=Te=>{const Ke=d.getSource().minzoom,bt=Ht=>{const Gt=d.getTileByID(Ht);if(Gt&&Gt.hasData())return Gt.getBucket(P)},xt=[0,-1,1];for(const Ht of xt){if(Te.overscaledZ+Ht<Ke)continue;const Gt=bt(Te.calculateScaledKey(Te.overscaledZ+Ht));if(Gt)return Gt}},te=[0,0,0],he=(Te,Ke)=>(te[0]=Math.min(Te.min.y,Ke.min.y),te[1]=Math.max(Te.max.y,Ke.max.y),te[2]=t.EXTENT-Ke.min.x>Te.max.x?Ke.min.x-t.EXTENT:Te.max.x,te),ue=(Te,Ke)=>(te[0]=Math.min(Te.min.x,Ke.min.x),te[1]=Math.max(Te.max.x,Ke.max.x),te[2]=t.EXTENT-Ke.min.y>Te.max.y?Ke.min.y-t.EXTENT:Te.max.y,te),Ce=[(Te,Ke)=>he(Te,Ke),(Te,Ke)=>he(Ke,Te),(Te,Ke)=>ue(Te,Ke),(Te,Ke)=>ue(Ke,Te)],Ve=new t.Point(0,0);let Qe,et,tt;const st=(Te,Ke,bt,xt,Ht)=>{const Gt=[[xt?bt:Te,xt?Te:bt,0],[xt?bt:Ke,xt?Ke:bt,0]],Ut=Ht<0?t.EXTENT+Ht:Ht,ti=[xt?Ut:(Te+Ke)/2,xt?(Te+Ke)/2:Ut,0];return 0===bt&&Ht<0||0!==bt&&Ht>0?B.getForTilePoints(tt,[ti],!0,et):Gt.push(ti),B.getForTilePoints(g,Gt,!0,Qe),Math.max(Gt[0][2],Gt[1][2],ti[2])/B.exaggeration()};for(let Te=0;Te<4;Te++){const Ke=(Te<2?1:5)-Te,bt=T.borders[Te];if(0===bt.length)continue;const xt=tt=X[Te](g),Ht=K(xt);if(!(Ht&&Ht instanceof t.FillExtrusionBucket&&Ht.enableTerrain)||T.borderDoneWithNeighborZ[Te]===Ht.canonical.z&&Ht.borderDoneWithNeighborZ[Ke]===T.canonical.z||(et=B.findDEMTileFor(xt),!et||!et.dem))continue;if(!Qe){const Qt=B.findDEMTileFor(g);if(!Qt||!Qt.dem)return;Qe=Qt}const Gt=Ht.borders[Ke];let Ut=0;const ti=Ht.borderDoneWithNeighborZ[Ke]!==T.canonical.z;if(T.canonical.z===Ht.canonical.z){for(let Qt=0;Qt<bt.length;Qt++){const gi=T.featuresOnBorder[bt[Qt]],Ji=gi.borders[Te];let Zt;for(;Ut<Gt.length&&(Zt=Ht.featuresOnBorder[Gt[Ut]],!(Zt.borders[Ke][1]>Ji[0]+3));)ti&&Ht.encodeCentroid(void 0,Zt,!1),Ut++;if(Zt&&Ut<Gt.length){const Oi=Ut;let yi=0;for(;!(Zt.borders[Ke][0]>Ji[1]-3)&&(yi++,++Ut!==Gt.length);)Zt=Ht.featuresOnBorder[Gt[Ut]];if(Zt=Ht.featuresOnBorder[Gt[Oi]],gi.intersectsCount()>1||Zt.intersectsCount()>1||1!==yi){1!==yi&&(Ut=Oi),T.encodeCentroid(void 0,gi,!1),ti&&Ht.encodeCentroid(void 0,Zt,!1);continue}const Qi=Ce[Te](gi,Zt),vi=Te%2?t.EXTENT-1:0;Ve.x=st(Qi[0],Math.min(t.EXTENT-1,Qi[1]),vi,Te<2,Qi[2]),Ve.y=0,T.encodeCentroid(Ve,gi,!1),ti&&Ht.encodeCentroid(Ve,Zt,!1)}else T.encodeCentroid(void 0,gi,!1)}T.borderDoneWithNeighborZ[Te]=Ht.canonical.z,T.needsCentroidUpdate=!0,ti&&(Ht.borderDoneWithNeighborZ[Ke]=T.canonical.z,Ht.needsCentroidUpdate=!0)}else{for(const Qt of bt)T.encodeCentroid(void 0,T.featuresOnBorder[Qt],!1);if(ti){for(const Qt of Gt)Ht.encodeCentroid(void 0,Ht.featuresOnBorder[Qt],!1);Ht.borderDoneWithNeighborZ[Ke]=T.canonical.z,Ht.needsCentroidUpdate=!0}T.borderDoneWithNeighborZ[Te]=Ht.canonical.z,T.needsCentroidUpdate=!0}}(T.needsCentroidUpdate||!T.centroidVertexBuffer&&0!==T.centroidVertexArray.length)&&T.uploadCentroid(C)}const Eo=new t.Color(1,0,0,1),Yc=new t.Color(0,1,0,1),Fa=new t.Color(0,0,1,1),bu=new t.Color(1,0,1,1),Hc=new t.Color(0,1,1,1);function xu(C,d,g){const T=C.context,P=C.transform,B=T.gl,X="globe"===P.projection.name,K=X?["PROJECTION_GLOBE_VIEW"]:null;let te=g.projMatrix;if(X&&t.globeToMercatorTransition(P.zoom)>0){const gi=t.transitionTileAABBinECEF(g.canonical,P),Ji=t.globeDenormalizeECEF(gi);te=t.multiply(new Float32Array(16),P.globeMatrix,Ji),t.multiply(te,P.projMatrix,te)}const he=C.useProgram("debug",null,K),ue=d.getTileByID(g.key);C.terrain&&C.terrain.setupElevationDraw(ue,he);const Ce=t.DepthMode.disabled,Ve=t.StencilMode.disabled,Qe=C.colorModeForRenderPass();T.activeTexture.set(B.TEXTURE0),C.emptyTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),X?ue._makeGlobeTileDebugBuffers(C.context,P):ue._makeDebugTileBoundsBuffers(C.context,P.projection);const tt=ue._tileDebugBuffer||C.debugBuffer,st=ue._tileDebugIndexBuffer||C.debugIndexBuffer,Te=ue._tileDebugSegments||C.debugSegments;he.draw(T,B.LINE_STRIP,Ce,Ve,Qe,t.CullFaceMode.disabled,Za(te,t.Color.red),"$debug",tt,st,Te,null,null,null,[ue._globeTileDebugBorderBuffer]);const Ke=ue.latestRawTileData,bt=Math.floor((Ke&&Ke.byteLength||0)/1024),xt=d.getTile(g).tileSize,Ht=512/Math.min(xt,512)*(g.overscaledZ/P.zoom)*.5;let Gt=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Gt+=` => ${g.overscaledZ}`),Gt+=` ${bt}kb`,function(gi,Ji){gi.initDebugOverlayCanvas();const Zt=gi.debugOverlayCanvas,Oi=gi.context.gl,yi=gi.debugOverlayCanvas.getContext("2d");yi.clearRect(0,0,Zt.width,Zt.height),yi.shadowColor="white",yi.shadowBlur=2,yi.lineWidth=1.5,yi.strokeStyle="white",yi.textBaseline="top",yi.font="bold 36px Open Sans, sans-serif",yi.fillText(Ji,5,5),yi.strokeText(Ji,5,5),gi.debugOverlayTexture.update(Zt),gi.debugOverlayTexture.bind(Oi.LINEAR,Oi.CLAMP_TO_EDGE)}(C,Gt);const Ut=ue._tileDebugTextBuffer||C.debugBuffer,ti=ue._tileDebugTextIndexBuffer||C.quadTriangleIndexBuffer,Qt=ue._tileDebugTextSegments||C.debugSegments;he.draw(T,B.TRIANGLES,Ce,Ve,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Za(te,t.Color.transparent,Ht),"$debug",Ut,ti,Qt,null,null,null,[ue._globeTileDebugTextBuffer])}function Uo(C,d,g,T){Wo(C,0,d+g/2,C.transform.width,g,T)}function ca(C,d,g,T){Wo(C,d-g/2,0,g,C.transform.height,T)}function Wo(C,d,g,T,P,B){const X=C.context,K=X.gl;K.enable(K.SCISSOR_TEST),K.scissor(d*t.exported.devicePixelRatio,g*t.exported.devicePixelRatio,T*t.exported.devicePixelRatio,P*t.exported.devicePixelRatio),X.clear({color:B}),K.disable(K.SCISSOR_TEST)}const vl=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:_l}=vl;function $o(C,d,g,T){C.emplaceBack(d,g,T)}class Ca{constructor(d){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,$o(this.vertexArray,-1,-1,1),$o(this.vertexArray,1,-1,1),$o(this.vertexArray,-1,1,1),$o(this.vertexArray,1,1,1),$o(this.vertexArray,-1,-1,-1),$o(this.vertexArray,1,-1,-1),$o(this.vertexArray,-1,1,-1),$o(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=d.createVertexBuffer(this.vertexArray,_l),this.indexBuffer=d.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function fs(C,d,g,T,P,B){const X=C.gl,K=d.paint.get("sky-atmosphere-color"),te=d.paint.get("sky-atmosphere-halo-color"),he=d.paint.get("sky-atmosphere-sun-intensity"),ue={u_matrix_3f:t.fromMat4(t.create$1(),T),u_sun_direction:P,u_sun_intensity:he,u_color_tint_r:[(et=K).r,et.g,et.b,et.a],u_color_tint_m:[(tt=te).r,tt.g,tt.b,tt.a],u_luminance:5e-5};var et,tt;X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+B,d.skyboxTexture,0),g.draw(C,X.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,ue,"skyboxCapture",d.skyboxGeometry.vertexBuffer,d.skyboxGeometry.indexBuffer,d.skyboxGeometry.segment)}const So=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ba{constructor(d){const g=new t.StructArrayLayout5f20;g.emplaceBack(-1,1,1,0,0),g.emplaceBack(1,1,1,1,0),g.emplaceBack(1,-1,1,1,1),g.emplaceBack(-1,-1,1,0,1);const T=new t.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,3,0),this.vertexBuffer=d.createVertexBuffer(g,So.members),this.indexBuffer=d.createIndexBuffer(T),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const yl={symbol:function(C,d,g,T,P){if("translucent"!==C.renderPass)return;const B=t.StencilMode.disabled,X=C.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(K,te,he,ue,Ce,Ve,Qe){const et=te.transform,tt="map"===Ce,st="map"===Ve;for(const Te of K){const Ke=ue.getTile(Te),bt=Ke.getBucket(he);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const xt=t.evaluateSizeForZoom(bt.textSizeData,et.zoom),Ht=ii(Te,bt.getProjection(),et),Gt=et.calculatePixelsToTileUnitsMatrix(Ke),Ut=I(Ht,Ke.tileID.canonical,st,tt,et,bt.getProjection(),Gt),ti="none"!==he.layout.get("icon-text-fit")&&bt.hasIconData();if(xt){const Qt=Math.pow(2,et.zoom-Ke.tileID.overscaledZ);Cc(bt,tt,st,Qe,t.symbolSize,et,Ut,Te,Qt,xt,ti)}}}(T,C,g,d,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),P),0!==g.paint.get("icon-opacity").constantOr(1)&&Oo(C,d,g,T,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),B,X),0!==g.paint.get("text-opacity").constantOr(1)&&Oo(C,d,g,T,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),B,X),d.map.showCollisionBoxes&&(za(C,d,g,T,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),za(C,d,g,T,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))},circle:function(C,d,g,T){if("translucent"!==C.renderPass)return;const P=g.paint.get("circle-opacity"),B=g.paint.get("circle-stroke-width"),X=g.paint.get("circle-stroke-opacity"),K=void 0!==g.layout.get("circle-sort-key").constantOr(1);if(0===P.constantOr(1)&&(0===B.constantOr(1)||0===X.constantOr(1)))return;const te=C.context,he=te.gl,ue=C.transform,Ce=C.depthModeForSublayer(0,t.DepthMode.ReadOnly),Ve=t.StencilMode.disabled,Qe=C.colorModeForRenderPass(),et="globe"===ue.projection.name,tt=[t.mercatorXfromLng(ue.center.lng),t.mercatorYfromLat(ue.center.lat)],st=[];for(let Ke=0;Ke<T.length;Ke++){const bt=T[Ke],xt=d.getTile(bt),Ht=xt.getBucket(g);if(!Ht||Ht.projection.name!==ue.projection.name)continue;const Gt=Ht.programConfigurations.get(g.id),Ut=_u(g);et&&Ut.push("PROJECTION_GLOBE_VIEW");const ti=C.useProgram("circle",Gt,Ut),Qt=Ht.layoutVertexBuffer,gi=Ht.globeExtVertexBuffer,Ji=Ht.indexBuffer,Zt=ue.projection.createInversionMatrix(ue,bt.canonical),Oi={programConfiguration:Gt,program:ti,layoutVertexBuffer:Qt,globeExtVertexBuffer:gi,indexBuffer:Ji,uniformValues:Vr(C,bt,xt,Zt,tt,g),tile:xt};if(K){const yi=Ht.segments.get();for(const Qi of yi)st.push({segments:new t.SegmentVector([Qi]),sortKey:Qi.sortKey,state:Oi})}else st.push({segments:Ht.segments,sortKey:0,state:Oi})}K&&st.sort((Ke,bt)=>Ke.sortKey-bt.sortKey);const Te={useDepthForOcclusion:!et};for(const Ke of st){const{programConfiguration:bt,program:xt,layoutVertexBuffer:Ht,globeExtVertexBuffer:Gt,indexBuffer:Ut,uniformValues:ti,tile:Qt}=Ke.state,gi=Ke.segments;C.terrain&&C.terrain.setupElevationDraw(Qt,xt,Te),C.prepareDrawProgram(te,xt,Qt.tileID.toUnwrapped()),xt.draw(te,he.TRIANGLES,Ce,Ve,Qe,t.CullFaceMode.disabled,ti,g.id,Ht,Ut,gi,g.paint,ue.zoom,bt,[Gt])}},heatmap:function(C,d,g,T){if(0!==g.paint.get("heatmap-opacity"))if("offscreen"===C.renderPass){const P=C.context,B=P.gl,X=t.StencilMode.disabled,K=new t.ColorMode([B.ONE,B.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(Qe,et,tt,st){const Te=Qe.gl,Ke=et.width*st,bt=et.height*st;Qe.activeTexture.set(Te.TEXTURE1),Qe.viewport.set([0,0,Ke,bt]);let xt=tt.heatmapFbo;if(!xt||xt&&(xt.width!==Ke||xt.height!==bt)){xt&&xt.destroy();const Ht=Te.createTexture();Te.bindTexture(Te.TEXTURE_2D,Ht),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR),xt=tt.heatmapFbo=Qe.createFramebuffer(Ke,bt,!1),function(Gt,Ut,ti,Qt,gi,Ji){const Zt=Gt.gl;Zt.texImage2D(Zt.TEXTURE_2D,0,Gt.isWebGL2&&Gt.extRenderToTextureHalfFloat?Zt.RGBA16F:Zt.RGBA,gi,Ji,0,Zt.RGBA,Gt.extRenderToTextureHalfFloat?Gt.isWebGL2?Zt.HALF_FLOAT:Gt.extTextureHalfFloat.HALF_FLOAT_OES:Zt.UNSIGNED_BYTE,null),Qt.colorAttachment.set(ti)}(Qe,0,Ht,xt,Ke,bt)}else Te.bindTexture(Te.TEXTURE_2D,xt.colorAttachment.get()),Qe.bindFramebuffer.set(xt.framebuffer)})(P,C,g,"globe"===C.transform.projection.name?.5:.25),P.clear({color:t.Color.transparent});const te=C.transform,he="globe"===te.projection.name,ue=he?["PROJECTION_GLOBE_VIEW"]:null,Ce=he?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,Ve=[t.mercatorXfromLng(te.center.lng),t.mercatorYfromLat(te.center.lat)];for(let Qe=0;Qe<T.length;Qe++){const et=T[Qe];if(d.hasRenderableParent(et))continue;const tt=d.getTile(et),st=tt.getBucket(g);if(!st||st.projection.name!==te.projection.name)continue;const Te=st.programConfigurations.get(g.id),Ke=C.useProgram("heatmap",Te,ue),{zoom:bt}=C.transform;C.terrain&&C.terrain.setupElevationDraw(tt,Ke),C.prepareDrawProgram(P,Ke,et.toUnwrapped());const xt=te.projection.createInversionMatrix(te,et.canonical);Ke.draw(P,B.TRIANGLES,t.DepthMode.disabled,X,K,Ce,qa(C,et,tt,xt,Ve,bt,g.paint.get("heatmap-intensity")),g.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,g.paint,C.transform.zoom,Te,he?[st.globeExtVertexBuffer]:null)}P.viewport.set([0,0,C.width,C.height])}else"translucent"===C.renderPass&&(C.context.setColorMode(C.colorModeForRenderPass()),function(P,B){const X=P.context,K=X.gl,te=B.heatmapFbo;if(!te)return;X.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,te.colorAttachment.get()),X.activeTexture.set(K.TEXTURE1);let he=B.colorRampTexture;he||(he=B.colorRampTexture=new t.Texture(X,B.colorRamp,K.RGBA)),he.bind(K.LINEAR,K.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(X,K.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,P.colorModeForRenderPass(),t.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:B.paint.get("heatmap-opacity")},B.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,B.paint,P.transform.zoom)}(C,g))},line:function(C,d,g,T){if("translucent"!==C.renderPass)return;const P=g.paint.get("line-opacity"),B=g.paint.get("line-width");if(0===P.constantOr(1)||0===B.constantOr(1))return;const X=C.depthModeForSublayer(0,t.DepthMode.ReadOnly),K=C.colorModeForRenderPass(),te=C.terrain&&C.terrain.renderingToTexture?1:t.exported.devicePixelRatio,he=g.paint.get("line-dasharray"),ue=he.constantOr(1),Ce=g.layout.get("line-cap"),Ve=g.paint.get("line-pattern"),Qe=Ve.constantOr(1),et=g.paint.get("line-gradient"),tt=Qe?"linePattern":"line",st=C.context,Te=st.gl,Ke=(xt=>{const Ht=[];Ws(xt)&&Ht.push("RENDER_LINE_DASH"),xt.paint.get("line-gradient")&&Ht.push("RENDER_LINE_GRADIENT");const Gt=xt.paint.get("line-trim-offset");0===Gt[0]&&0===Gt[1]||Ht.push("RENDER_LINE_TRIM_OFFSET");const Ut=xt.paint.get("line-pattern").constantOr(1),ti=1!==xt.paint.get("line-opacity").constantOr(1);return!Ut&&ti&&Ht.push("RENDER_LINE_ALPHA_DISCARD"),Ht})(g);let bt=Ke.includes("RENDER_LINE_ALPHA_DISCARD");C.terrain&&C.terrain.clipOrMaskOverlapStencilType()&&(bt=!1);for(const xt of T){const Ht=d.getTile(xt);if(Qe&&!Ht.patternsLoaded())continue;const Gt=Ht.getBucket(g);if(!Gt)continue;C.prepareDrawTile();const Ut=Gt.programConfigurations.get(g.id),ti=C.useProgram(tt,Ut,Ke),Qt=Ve.constantOr(null);if(Qt&&Ht.imageAtlas){const Ii=Ht.imageAtlas.patternPositions[Qt.toString()];Ii&&Ut.setConstantPatternPositions(Ii)}const gi=he.constantOr(null),Ji=Ce.constantOr(null);if(!Qe&&gi&&Ji&&Ht.lineAtlas){const Ii=Ht.lineAtlas.getDash(gi,Ji);Ii&&Ut.setConstantPatternPositions(Ii)}let[Zt,Oi]=g.paint.get("line-trim-offset");("round"===Ji||"square"===Ji)&&Zt!==Oi&&(0===Zt&&(Zt-=1),1===Oi&&(Oi+=1));const yi=C.terrain?xt.projMatrix:null,Qi=Qe?wa(C,Ht,g,yi,te):zs(C,Ht,g,yi,Gt.lineClipsArray.length,te,[Zt,Oi]);if(et){const Ii=Gt.gradients[g.id];let nn=Ii.texture;if(g.gradientVersion!==Ii.version){let $i=256;if(g.stepInterpolant){const Ki=d.getSource().maxzoom,Hn=xt.canonical.z===Ki?Math.ceil(1<<C.transform.maxZoom-xt.canonical.z):1;$i=t.clamp(t.nextPowerOfTwo(Gt.maxLineLength/t.EXTENT*1024*Hn),256,st.maxTextureSize)}Ii.gradient=t.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:$i,image:Ii.gradient||void 0,clips:Gt.lineClipsArray}),Ii.texture?Ii.texture.update(Ii.gradient):Ii.texture=new t.Texture(st,Ii.gradient,Te.RGBA),Ii.version=g.gradientVersion,nn=Ii.texture}st.activeTexture.set(Te.TEXTURE1),nn.bind(g.stepInterpolant?Te.NEAREST:Te.LINEAR,Te.CLAMP_TO_EDGE)}ue&&(st.activeTexture.set(Te.TEXTURE0),Ht.lineAtlasTexture.bind(Te.LINEAR,Te.REPEAT),Ut.updatePaintBuffers()),Qe&&(st.activeTexture.set(Te.TEXTURE0),Ht.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),Ut.updatePaintBuffers()),C.prepareDrawProgram(st,ti,xt.toUnwrapped());const vi=Ii=>{ti.draw(st,Te.TRIANGLES,X,Ii,K,t.CullFaceMode.disabled,Qi,g.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,g.paint,C.transform.zoom,Ut,[Gt.layoutVertexBuffer2])};if(bt){const Ii=C.stencilModeForClipping(xt).ref;0===Ii&&C.terrain&&st.clear({stencil:0});const nn={func:Te.EQUAL,mask:255};Qi.u_alpha_discard_threshold=.8,vi(new t.StencilMode(nn,Ii,255,Te.KEEP,Te.KEEP,Te.INVERT)),Qi.u_alpha_discard_threshold=0,vi(new t.StencilMode(nn,Ii,255,Te.KEEP,Te.KEEP,Te.KEEP))}else vi(C.stencilModeForClipping(xt))}bt&&(C.resetStencilClippingMasks(),C.terrain&&st.clear({stencil:0}))},fill:function(C,d,g,T){const P=g.paint.get("fill-color"),B=g.paint.get("fill-opacity");if(0===B.constantOr(1))return;const X=C.colorModeForRenderPass(),K=g.paint.get("fill-pattern"),te=C.opaquePassEnabledForLayer()&&!K.constantOr(1)&&1===P.constantOr(t.Color.transparent).a&&1===B.constantOr(0)?"opaque":"translucent";if(C.renderPass===te){const he=C.depthModeForSublayer(1,"opaque"===C.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);Kr(C,d,g,T,he,X,!1)}if("translucent"===C.renderPass&&g.paint.get("fill-antialias")){const he=C.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);Kr(C,d,g,T,he,X,!0)}},"fill-extrusion":function(C,d,g,T){const P=g.paint.get("fill-extrusion-opacity");if(0!==P&&"translucent"===C.renderPass){const B=new t.DepthMode(C.context.gl.LEQUAL,t.DepthMode.ReadWrite,C.depthRangeFor3D);if(1!==P||g.paint.get("fill-extrusion-pattern").constantOr(1))gl(C,d,g,T,B,t.StencilMode.disabled,t.ColorMode.disabled),gl(C,d,g,T,B,C.stencilModeFor3D(),C.colorModeForRenderPass()),C.resetStencilClippingMasks();else{const X=C.colorModeForRenderPass();gl(C,d,g,T,B,t.StencilMode.disabled,X)}}},hillshade:function(C,d,g,T){if("offscreen"!==C.renderPass&&"translucent"!==C.renderPass)return;const P=C.context,B=C.depthModeForSublayer(0,t.DepthMode.ReadOnly),X=C.colorModeForRenderPass(),K=C.terrain&&C.terrain.renderingToTexture,[te,he]="translucent"!==C.renderPass||K?[{},T]:C.stencilConfigForOverlap(T);for(const ue of he){const Ce=d.getTile(ue);if(Ce.needsHillshadePrepare&&"offscreen"===C.renderPass)sa(C,Ce,g,B,t.StencilMode.disabled,X);else if("translucent"===C.renderPass){const Ve=K&&C.terrain?C.terrain.stencilModeForRTTOverlap(ue):te[ue.overscaledZ];yc(C,ue,Ce,g,B,Ve,X)}}P.viewport.set([0,0,C.width,C.height]),C.resetStencilClippingMasks()},raster:function(C,d,g,T,P,B){if("translucent"!==C.renderPass||0===g.paint.get("raster-opacity")||!T.length)return;const X=C.context,K=X.gl,te=d.getSource(),he=C.useProgram("raster"),ue=C.colorModeForRenderPass(),Ce=C.terrain&&C.terrain.renderingToTexture,[Ve,Qe]=te instanceof Et||Ce?[{},T]:C.stencilConfigForOverlap(T),et=Qe[Qe.length-1].overscaledZ,tt=!C.options.moving;for(const st of Qe){const Te=Ce?t.DepthMode.disabled:C.depthModeForSublayer(st.overscaledZ-et,1===g.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,K.LESS),Ke=st.toUnwrapped(),bt=d.getTile(st);if(Ce&&(!bt||!bt.hasData()))continue;const xt=Ce?st.projMatrix:C.transform.calculateProjMatrix(Ke,tt),Ht=C.terrain&&Ce?C.terrain.stencilModeForRTTOverlap(st):Ve[st.overscaledZ],Gt=B?0:g.paint.get("raster-fade-duration");bt.registerFadeDuration(Gt);const Ut=d.findLoadedParent(st,0),ti=Ol(bt,Ut,d,C.transform,Gt);let Qt,gi;C.terrain&&C.terrain.prepareDrawTile();const Ji="nearest"===g.paint.get("raster-resampling")?K.NEAREST:K.LINEAR;X.activeTexture.set(K.TEXTURE0),bt.texture.bind(Ji,K.CLAMP_TO_EDGE),X.activeTexture.set(K.TEXTURE1),Ut?(Ut.texture.bind(Ji,K.CLAMP_TO_EDGE),Qt=Math.pow(2,Ut.tileID.overscaledZ-bt.tileID.overscaledZ),gi=[bt.tileID.canonical.x*Qt%1,bt.tileID.canonical.y*Qt%1]):bt.texture.bind(Ji,K.CLAMP_TO_EDGE),bt.texture.useMipmap&&X.extTextureFilterAnisotropic&&C.transform.pitch>20&&K.texParameterf(K.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const Zt=Vo(xt,gi||[0,0],Qt||1,ti,g,te instanceof Et?te.perspectiveTransform:[0,0]);if(C.prepareDrawProgram(X,he,Ke),te instanceof Et)te.boundsBuffer&&te.boundsSegments&&he.draw(X,K.TRIANGLES,Te,t.StencilMode.disabled,ue,t.CullFaceMode.disabled,Zt,g.id,te.boundsBuffer,C.quadTriangleIndexBuffer,te.boundsSegments);else{const{tileBoundsBuffer:Oi,tileBoundsIndexBuffer:yi,tileBoundsSegments:Qi}=C.getTileBoundsBuffers(bt);he.draw(X,K.TRIANGLES,Te,Ht,ue,t.CullFaceMode.disabled,Zt,g.id,Oi,yi,Qi)}}C.resetStencilClippingMasks()},background:function(C,d,g,T){const P=g.paint.get("background-color"),B=g.paint.get("background-opacity");if(0===B)return;const X=C.context,K=X.gl,te=C.transform,he=te.tileSize,ue=g.paint.get("background-pattern");if(C.isPatternMissing(ue))return;const Ce=!ue&&1===P.a&&1===B&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Ce)return;const Ve=t.StencilMode.disabled,Qe=C.depthModeForSublayer(0,"opaque"===Ce?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),et=C.colorModeForRenderPass(),tt=C.useProgram(ue?"backgroundPattern":"background");let st,Te=T;Te||(st=C.getBackgroundTiles(),Te=Object.values(st).map(Ke=>Ke.tileID)),ue&&(X.activeTexture.set(K.TEXTURE0),C.imageManager.bind(C.context));for(const Ke of Te){const bt=Ke.toUnwrapped(),xt=T?Ke.projMatrix:C.transform.calculateProjMatrix(bt);C.prepareDrawTile();const Ht=d?d.getTile(Ke):st?st[Ke.key]:new t.Tile(Ke,he,te.zoom,C),Gt=ue?yu(xt,B,C,ue,{tileID:Ke,tileSize:he}):uo(xt,B,P);C.prepareDrawProgram(X,tt,bt);const{tileBoundsBuffer:Ut,tileBoundsIndexBuffer:ti,tileBoundsSegments:Qt}=C.getTileBoundsBuffers(Ht);tt.draw(X,K.TRIANGLES,Qe,Ve,et,t.CullFaceMode.disabled,Gt,g.id,Ut,ti,Qt)}},sky:function(C,d,g){const T=C.transform,P="mercator"===T.projection.name||"globe"===T.projection.name?1:t.smoothstep(7,8,T.zoom),B=g.paint.get("sky-opacity")*P;if(0===B)return;const X=C.context,K=g.paint.get("sky-type"),te=new t.DepthMode(X.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),he=C.frameCounter/1e3%1;"atmosphere"===K?"offscreen"===C.renderPass?g.needsSkyboxCapture(C)&&(function(ue,Ce,Ve,Qe){const et=ue.context,tt=et.gl;let st=Ce.skyboxFbo;if(!st){st=Ce.skyboxFbo=et.createFramebuffer(32,32,!1),Ce.skyboxGeometry=new Ca(et),Ce.skyboxTexture=et.gl.createTexture(),tt.bindTexture(tt.TEXTURE_CUBE_MAP,Ce.skyboxTexture),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_WRAP_S,tt.CLAMP_TO_EDGE),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_WRAP_T,tt.CLAMP_TO_EDGE),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_MIN_FILTER,tt.LINEAR),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_MAG_FILTER,tt.LINEAR);for(let xt=0;xt<6;++xt)tt.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,tt.RGBA,32,32,0,tt.RGBA,tt.UNSIGNED_BYTE,null)}et.bindFramebuffer.set(st.framebuffer),et.viewport.set([0,0,32,32]);const Te=Ce.getCenter(ue,!0),Ke=ue.useProgram("skyboxCapture"),bt=new Float64Array(16);t.identity(bt),t.rotateY(bt,bt,.5*-Math.PI),fs(et,Ce,Ke,bt,Te,0),t.identity(bt),t.rotateY(bt,bt,.5*Math.PI),fs(et,Ce,Ke,bt,Te,1),t.identity(bt),t.rotateX(bt,bt,.5*-Math.PI),fs(et,Ce,Ke,bt,Te,2),t.identity(bt),t.rotateX(bt,bt,.5*Math.PI),fs(et,Ce,Ke,bt,Te,3),t.identity(bt),fs(et,Ce,Ke,bt,Te,4),t.identity(bt),t.rotateY(bt,bt,Math.PI),fs(et,Ce,Ke,bt,Te,5),et.viewport.set([0,0,ue.width,ue.height])}(C,g),g.markSkyboxValid(C)):"sky"===C.renderPass&&function(ue,Ce,Ve,Qe,et){const tt=ue.context,st=tt.gl,Te=ue.transform,Ke=ue.useProgram("skybox");tt.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_CUBE_MAP,Ce.skyboxTexture);const bt=((xt,Ht,Gt,Ut,ti)=>({u_matrix:xt,u_sun_direction:Ht,u_cubemap:0,u_opacity:Ut,u_temporal_offset:ti}))(Te.skyboxMatrix,Ce.getCenter(ue,!1),0,Qe,et);ue.prepareDrawProgram(tt,Ke),Ke.draw(tt,st.TRIANGLES,Ve,t.StencilMode.disabled,ue.colorModeForRenderPass(),t.CullFaceMode.backCW,bt,"skybox",Ce.skyboxGeometry.vertexBuffer,Ce.skyboxGeometry.indexBuffer,Ce.skyboxGeometry.segment)}(C,g,te,B,he):"gradient"===K&&"sky"===C.renderPass&&function(ue,Ce,Ve,Qe,et){const tt=ue.context,st=tt.gl,Te=ue.transform,Ke=ue.useProgram("skyboxGradient");Ce.skyboxGeometry||(Ce.skyboxGeometry=new Ca(tt)),tt.activeTexture.set(st.TEXTURE0);let bt=Ce.colorRampTexture;bt||(bt=Ce.colorRampTexture=new t.Texture(tt,Ce.colorRamp,st.RGBA)),bt.bind(st.LINEAR,st.CLAMP_TO_EDGE);const xt=(Ht=Te.skyboxMatrix,Gt=Ce.getCenter(ue,!1),Ut=Ce.paint.get("sky-gradient-radius"),ti=Qe,Qt=et,{u_matrix:Ht,u_color_ramp:0,u_center_direction:Gt,u_radius:t.degToRad(Ut),u_opacity:ti,u_temporal_offset:Qt});var Ht,Gt,Ut,ti,Qt;ue.prepareDrawProgram(tt,Ke),Ke.draw(tt,st.TRIANGLES,Ve,t.StencilMode.disabled,ue.colorModeForRenderPass(),t.CullFaceMode.backCW,xt,"skyboxGradient",Ce.skyboxGeometry.vertexBuffer,Ce.skyboxGeometry.indexBuffer,Ce.skyboxGeometry.segment)}(C,g,te,B,he)},debug:function(C,d,g){for(let T=0;T<g.length;T++)xu(C,d,g[T])},custom:function(C,d,g,T){const P=C.context,B=g.implementation;if(!C.transform.projection.unsupportedLayers||!C.transform.projection.unsupportedLayers.includes("custom")||C.terrain&&(C.terrain.renderingToTexture||"offscreen"===C.renderPass)&&g.isLayerDraped()){if("offscreen"===C.renderPass){const X=B.prerender;if(X){if(C.setCustomLayerDefaults(),P.setColorMode(C.colorModeForRenderPass()),"globe"===C.transform.projection.name){const K=C.transform.pointMerc;X.call(B,P.gl,C.transform.customLayerMatrix(),C.transform.getProjection(),C.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(C.transform.zoom),[K.x,K.y],C.transform.pixelsPerMeterRatio)}else X.call(B,P.gl,C.transform.customLayerMatrix());P.setDirty(),C.setBaseState()}}else if("translucent"===C.renderPass){if(C.terrain&&C.terrain.renderingToTexture){const K=B.renderToTile;if(K){const te=T[0].canonical,he=new t.MercatorCoordinate(te.x+T[0].wrap*(1<<te.z),te.y,te.z);P.setDepthMode(t.DepthMode.disabled),P.setStencilMode(t.StencilMode.disabled),P.setColorMode(C.colorModeForRenderPass()),C.setCustomLayerDefaults(),K.call(B,P.gl,he),P.setDirty(),C.setBaseState()}return}C.setCustomLayerDefaults(),P.setColorMode(C.colorModeForRenderPass()),P.setStencilMode(t.StencilMode.disabled);const X="3d"===B.renderingMode?new t.DepthMode(C.context.gl.LEQUAL,t.DepthMode.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,t.DepthMode.ReadOnly);if(P.setDepthMode(X),"globe"===C.transform.projection.name){const K=C.transform.pointMerc;B.render(P.gl,C.transform.customLayerMatrix(),C.transform.getProjection(),C.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(C.transform.zoom),[K.x,K.y],C.transform.pixelsPerMeterRatio)}else B.render(P.gl,C.transform.customLayerMatrix());P.setDirty(),C.setBaseState(),P.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Po{constructor(d,g,T=!1){this.context=new Hi(d,T),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(d,g){const T=!!d&&!!d.terrain&&this.transform.projection.supportsTerrain;if(!(T||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Hs(this,d));const P=this._terrain;this.transform.elevation=T?P:null,P.update(d,this.transform,g)}_updateFog(d){const g=d.fog;if(!g||"globe"===this.transform.projection.name||g.getOpacity(this.transform.pitch)<1||g.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[T,P]=g.getFovAdjustedRange(this.transform._fov);if(T>P)return void(this.transform.fogCullDistSq=null);const B=T+.78*(P-T);this.transform.fogCullDistSq=B*B}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(d,g){if(this.width=d*t.exported.devicePixelRatio,this.height=g*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const T of this.style.order)this.style._layers[T].resize()}setup(){const d=this.context,g=new t.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(t.EXTENT,0),g.emplaceBack(0,t.EXTENT),g.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(g,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const T=new t.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(t.EXTENT,0),T.emplaceBack(0,t.EXTENT),T.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=d.createVertexBuffer(T,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const P=new t.StructArrayLayout2i4;P.emplaceBack(-1,-1),P.emplaceBack(1,-1),P.emplaceBack(-1,1),P.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(P,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const B=new t.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(t.EXTENT,0,t.EXTENT,0),B.emplaceBack(0,t.EXTENT,0,t.EXTENT),B.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=d.createVertexBuffer(B,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const X=new t.StructArrayLayout3ui6;X.emplaceBack(0,1,2),X.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(X);const K=new t.StructArrayLayout1ui2;for(const he of[0,1,3,2,0])K.emplaceBack(he);this.debugIndexBuffer=d.createIndexBuffer(K),this.emptyTexture=new t.Texture(d,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),d.gl.RGBA),this.identityMat=t.create();const te=this.context.gl;this.stencilClearMode=new t.StencilMode({func:te.ALWAYS,mask:0},0,255,te.ZERO,te.ZERO,te.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new Ba(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(d){return d._makeTileBoundsBuffers(this.context,this.transform.projection),d._tileBoundsBuffer?{tileBoundsBuffer:d._tileBoundsBuffer,tileBoundsIndexBuffer:d._tileBoundsIndexBuffer,tileBoundsSegments:d._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const d=this.context,g=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(d,g.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Yn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(d,g,T){if(!g||this.currentStencilSource===g.id||!d.isTileClipped()||!T||0===T.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let K=!1;for(const te of T)if(void 0===this._tileClippingMaskIDs[te.key]){K=!0;break}if(!K)return}this.currentStencilSource=g.id;const P=this.context,B=P.gl;this.nextStencilID+T.length>256&&this.clearStencil(),P.setColorMode(t.ColorMode.disabled),P.setDepthMode(t.DepthMode.disabled);const X=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const K of T){const te=g.getTile(K),he=this._tileClippingMaskIDs[K.key]=this.nextStencilID++,{tileBoundsBuffer:ue,tileBoundsIndexBuffer:Ce,tileBoundsSegments:Ve}=this.getTileBoundsBuffers(te);X.draw(P,B.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:B.ALWAYS,mask:0},he,255,B.KEEP,B.KEEP,B.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Yn(K.projMatrix),"$clipping",ue,Ce,Ve)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,g=this.context.gl;return new t.StencilMode({func:g.NOTEQUAL,mask:255},d,255,g.KEEP,g.KEEP,g.REPLACE)}stencilModeForClipping(d){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(d);const g=this.context.gl;return new t.StencilMode({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,g.KEEP,g.KEEP,g.REPLACE)}stencilConfigForOverlap(d){const g=this.context.gl,T=d.sort((X,K)=>K.overscaledZ-X.overscaledZ),P=T[T.length-1].overscaledZ,B=T[0].overscaledZ-P+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const X={};for(let K=0;K<B;K++)X[K+P]=new t.StencilMode({func:g.GEQUAL,mask:255},K+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=B,[X,T]}return[{[P]:t.StencilMode.disabled},T]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new t.ColorMode([d.CONSTANT_COLOR,d.ONE],new t.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(d,g,T){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new t.DepthMode(T||this.context.gl.LEQUAL,g,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,g){this.style=d,this.options=g,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const T=this.style.order,P=this.style._sourceCaches;for(const he in P){const ue=P[he];ue.used&&ue.prepare(this.context)}const B={},X={},K={};for(const he in P){const ue=P[he];B[he]=ue.getVisibleCoordinates(),X[he]=B[he].slice().reverse(),K[he]=ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let he=0;he<T.length;he++)if(this.style._layers[T[he]].is3D()){this.opaquePassCutoff=he;break}if(this.terrain&&(this.terrain.updateTileBinding(K),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const he of T){const ue=this.style._layers[he],Ce=d._getLayerSourceCache(ue);if(!ue.hasOffscreenPass()||ue.isHidden(this.transform.zoom))continue;const Ve=Ce?X[Ce.id]:void 0;("custom"===ue.type||ue.isSky()||Ve&&Ve.length)&&this.renderLayer(this,Ce,ue,Ve)}this.depthRangeFor3D=[0,1-(d.order.length+2)*this.numSublayers*this.depthEpsilon];const te=this.terrain;if(te&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&te.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:g.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const he=this.style._layers[T[this.currentLayer]],ue=d._getLayerSourceCache(he);if(he.isSky())continue;const Ce=ue?X[ue.id]:void 0;this._renderTileClippingMasks(he,ue,Ce),this.renderLayer(this,ue,he,Ce)}if(this.style.fog&&this.transform.projection.supportsFog&&function(he,ue){const Ce=he.context,Ve=Ce.gl,Qe=he.transform,et=new t.DepthMode(Ve.LEQUAL,t.DepthMode.ReadOnly,[0,1]),tt=he.useProgram("globeAtmosphere",null,"globe"===Qe.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),st=t.globeToMercatorTransition(Qe.zoom),Te=ue.properties.get("color").toArray01(),Ke=ue.properties.get("high-color").toArray01(),bt=ue.properties.get("space-color").toArray01PremultipliedAlpha(),xt=t.identity$1([]);t.rotateY$1(xt,xt,-t.degToRad(Qe._center.lng)),t.rotateX$1(xt,xt,t.degToRad(Qe._center.lat)),t.rotateZ$1(xt,xt,Qe.angle),t.rotateX$1(xt,xt,-Qe._pitch);const Ht=t.fromQuat(new Float32Array(16),xt),Gt=t.mapValue(ue.properties.get("star-intensity"),0,1,0,.25),ti=t.mapValue(ue.properties.get("horizon-blend"),0,1,5e-4,.25),Qt=t.globeUseCustomAntiAliasing(he,Ce,Qe)&&5e-4===ti?Qe.worldSize/(2*Math.PI*1.025)-1:Qe.globeRadius,gi=he.frameCounter/1e3%1,Ji=t.length(Qe.globeCenterInViewSpace),Zt=Math.sqrt(Math.pow(Ji,2)-Math.pow(Qt,2)),Oi=Math.acos(Zt/Ji),yi={u_frustum_tl:Qe.frustumCorners.TL,u_frustum_tr:Qe.frustumCorners.TR,u_frustum_br:Qe.frustumCorners.BR,u_frustum_bl:Qe.frustumCorners.BL,u_horizon:Qe.frustumCorners.horizon,u_transition:st,u_fadeout_range:ti,u_color:Te,u_high_color:Ke,u_space_color:bt,u_star_intensity:Gt,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:gi,u_horizon_angle:Oi,u_rotation_matrix:Ht};he.prepareDrawProgram(Ce,tt);const Qi=he.atmosphereBuffer;Qi&&tt.draw(Ce,Ve.TRIANGLES,et,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,yi,"skybox",Qi.vertexBuffer,Qi.indexBuffer,Qi.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const he=this.style._layers[T[this.currentLayer]],ue=d._getLayerSourceCache(he);he.isSky()&&this.renderLayer(this,ue,he,ue?X[ue.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;){const he=this.style._layers[T[this.currentLayer]],ue=d._getLayerSourceCache(he);if(he.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(he)){if(he.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Ce=ue?("symbol"===he.type?K:X)[ue.id]:void 0;this._renderTileClippingMasks(he,ue,ue?B[ue.id]:void 0),this.renderLayer(this,ue,he,Ce),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let he=null;t.values(this.style._layers).forEach(ue=>{const Ce=d._getLayerSourceCache(ue);Ce&&!ue.isHidden(this.transform.zoom)&&(!he||he.getSource().maxzoom<Ce.getSource().maxzoom)&&(he=Ce)}),he&&this.options.showTileBoundaries&&yl.debug(this,he,he.getVisibleCoordinates())}this.options.showPadding&&function(he){const ue=he.transform.padding;Uo(he,he.transform.height-(ue.top||0),3,Eo),Uo(he,ue.bottom||0,3,Yc),ca(he,ue.left||0,3,Fa),ca(he,he.transform.width-(ue.right||0),3,bu);const Ce=he.transform.centerPoint;var Ve,Qe,et,tt;Wo(Ve=he,(Qe=Ce.x)-1,(et=he.transform.height-Ce.y)-10,2,20,tt=Hc),Wo(Ve,Qe-10,et-1,20,2,tt)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(d,g,T,P){T.isHidden(this.transform.zoom)||("background"===T.type||"sky"===T.type||"custom"===T.type||P&&P.length)&&(this.id=T.id,this.gpuTimingStart(T),(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes(T.type)||d.terrain&&"custom"===T.type)&&yl[T.type](d,g,T,P,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const g=this.context.extTimerQuery;let T=this.gpuTimers[d.id];T||(T=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:g.createQueryEXT()}),T.calls++,g.beginQueryEXT(g.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const d=this.context.extTimerQuery,g=d.createQueryEXT();this.deferredRenderGpuTimeQueries.push(g),d.beginQueryEXT(d.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}collectDeferredRenderGpuQueries(){const d=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],d}queryGpuTimers(d){const g={};for(const T in d){const P=d[T],B=this.context.extTimerQuery,X=B.getQueryObjectEXT(P.query,B.QUERY_RESULT_EXT)/1e6;B.deleteQueryEXT(P.query),g[T]=X}return g}queryGpuTimeDeferredRender(d){if(!this.options.gpuTimingDeferredRender)return 0;const g=this.context.extTimerQuery;let T=0;for(const P of d)T+=g.getQueryObjectEXT(P,g.QUERY_RESULT_EXT)/1e6,g.deleteQueryEXT(P);return T}translatePosMatrix(d,g,T,P,B){if(!T[0]&&!T[1])return d;const X=B?"map"===P?this.transform.angle:0:"viewport"===P?-this.transform.angle:0;if(X){const he=Math.sin(X),ue=Math.cos(X);T=[T[0]*ue-T[1]*he,T[0]*he+T[1]*ue]}const K=[B?T[0]:qi(g,T[0],this.transform.zoom),B?T[1]:qi(g,T[1],this.transform.zoom),0],te=new Float32Array(16);return t.translate(te,d,K),te}saveTileTexture(d){const g=this._tileTextures[d.size[0]];g?g.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const g=this._tileTextures[d];return g&&g.length>0?g.pop():null}isPatternMissing(d){return null===d||void 0!==d&&!this.imageManager.getPattern(d.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const d=this.terrain&&this.terrain.renderingToTexture,g=this.terrain&&0===this.terrain.exaggeration(),T=this.style&&this.style.fog,P=[];return this.terrainRenderModeElevated()&&P.push("TERRAIN"),"globe"===this.transform.projection.name&&P.push("GLOBE"),g&&P.push("ZERO_EXAGGERATION"),T&&!d&&0!==T.getOpacity(this.transform.pitch)&&P.push("FOG"),d&&P.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&P.push("OVERDRAW_INSPECTOR"),P}useProgram(d,g,T){this.cache=this.cache||{};const P=T||[],B=this.currentGlobalDefines().concat(P),X=Or.cacheKey(Il[d],d,B,g);return this.cache[X]||(this.cache[X]=new Or(this.context,d,Il[d],g,la[d],B)),this.cache[X]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(d,g,T){if(this.terrain&&this.terrain.renderingToTexture)return;const P=this.style.fog;if(P){const B=P.getOpacity(this.transform.pitch),X=((K,te,he,ue,Ce,Ve,Qe,et,tt,st,Te)=>{const Ke=K.transform,bt=te.properties.get("color").toArray01();bt[3]=ue;const xt=K.frameCounter/1e3%1;return{u_fog_matrix:he?Ke.calculateFogTileMatrix(he):K.identityMat,u_fog_range:te.getFovAdjustedRange(Ke._fov),u_fog_color:bt,u_fog_horizon_blend:te.properties.get("horizon-blend"),u_fog_temporal_offset:xt,u_frustum_tl:Ce,u_frustum_tr:Ve,u_frustum_br:Qe,u_frustum_bl:et,u_globe_pos:tt,u_globe_radius:st,u_viewport:Te,u_globe_transition:t.globeToMercatorTransition(Ke.zoom),u_is_globe:+("globe"===Ke.projection.name)}})(this,P,T,B,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);g.setFogUniformValues(d,X)}}setTileLoadedFlag(d){this.tileLoaded=d}saveCanvasCopy(){const d=this.canvasCopy();d&&(this.frameCopies.push(d),this.tileLoaded=!1)}canvasCopy(){const d=this.context.gl,g=d.createTexture();return d.bindTexture(d.TEXTURE_2D,g),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,0,0,d.drawingBufferWidth,d.drawingBufferHeight,0),g}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const d=this.style&&this.style.fog;return!!d&&0!==d.getOpacity(this.transform.pitch)}getBackgroundTiles(){const d=this._backgroundTiles,g=this._backgroundTiles={},T=this.transform.coveringTiles({tileSize:512});for(const P of T)g[P.key]=d[P.key]||new t.Tile(P,512,this.transform.tileZoom,this);return g}clearBackgroundTiles(){this._backgroundTiles={}}}class Ec{constructor(d=0,g=0,T=0,P=0){if(isNaN(d)||d<0||isNaN(g)||g<0||isNaN(T)||T<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=g,this.left=T,this.right=P}interpolate(d,g,T){return null!=g.top&&null!=d.top&&(this.top=t.number(d.top,g.top,T)),null!=g.bottom&&null!=d.bottom&&(this.bottom=t.number(d.bottom,g.bottom,T)),null!=g.left&&null!=d.left&&(this.left=t.number(d.left,g.left,T)),null!=g.right&&null!=d.right&&(this.right=t.number(d.right,g.right,T)),this}getCenter(d,g){const T=t.clamp((this.left+d-this.right)/2,0,d),P=t.clamp((this.top+g-this.bottom)/2,0,g);return new t.Point(T,P)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new Ec(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ea(C,d){const g=t.getColumn(C,3);t.fromQuat(C,d),t.setColumn(C,3,g)}function Gr(C,d){const g=t.identity$1([]);return t.rotateZ$1(g,g,-d),t.rotateX$1(g,g,-C),g}function Fl(C,d){const g=[C[0],C[1],0],T=[d[0],d[1],0];if(t.length(g)>=1e-15){const X=t.normalize([],g);t.scale$2(T,X,t.dot(T,X)),d[0]=T[0],d[1]=T[1]}const P=t.cross([],d,C);if(t.len(P)<1e-15)return null;const B=Math.atan2(-P[1],P[0]);return Gr(Math.atan2(Math.sqrt(C[0]*C[0]+C[1]*C[1]),-C[2]),B)}class Qa{constructor(d,g){this.position=d,this.orientation=g}get position(){return this._position}set position(d){if(d){const g=d instanceof t.MercatorCoordinate?d:new t.MercatorCoordinate(d[0],d[1],d[2]);this._renderWorldCopies&&(g.x=t.wrap(g.x,0,1)),this._position=g}else this._position=null}lookAtPoint(d,g){if(this.orientation=null,!this.position)return;const T=this.position,P=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(d)):0,B=t.MercatorCoordinate.fromLngLat(d,P),X=[B.x-T.x,B.y-T.y,B.z-T.z];g||(g=[0,0,1]),g[2]=Math.abs(g[2]),this.orientation=Fl(X,g)}setPitchBearing(d,g){this.orientation=Gr(t.degToRad(d),t.degToRad(-g))}}class el{constructor(d,g){this._transform=t.identity([]),this.orientation=g,this.position=d}get mercatorPosition(){const d=this.position;return new t.MercatorCoordinate(d[0],d[1],d[2])}get position(){const d=t.getColumn(this._transform,3);return[d[0],d[1],d[2]]}set position(d){var g;d&&t.setColumn(this._transform,3,[(g=d)[0],g[1],g[2],1])}get orientation(){return this._orientation}set orientation(d){this._orientation=d||t.identity$1([]),d&&Ea(this._transform,this._orientation)}getPitchBearing(){const d=this.forward(),g=this.right();return{bearing:Math.atan2(-g[1],g[0]),pitch:Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2])}}setPitchBearing(d,g){this._orientation=Gr(d,g),Ea(this._transform,this._orientation)}forward(){const d=t.getColumn(this._transform,2);return[-d[0],-d[1],-d[2]]}up(){const d=t.getColumn(this._transform,1);return[-d[0],-d[1],-d[2]]}right(){const d=t.getColumn(this._transform,0);return[d[0],d[1],d[2]]}getCameraToWorld(d,g){const T=new Float64Array(16);return t.invert(T,this.getWorldToCamera(d,g)),T}getWorldToCameraPosition(d,g,T){const P=this.position;t.scale$2(P,P,-d);const B=new Float64Array(16);return t.fromScaling(B,[T,T,T]),t.translate(B,B,P),B[10]*=g,B}getWorldToCamera(d,g){const T=new Float64Array(16),P=new Float64Array(4),B=this.position;return t.conjugate(P,this._orientation),t.scale$2(B,B,-d),t.fromQuat(T,P),t.translate(T,T,B),T[1]*=-1,T[5]*=-1,T[9]*=-1,T[13]*=-1,T[8]*=g,T[9]*=g,T[10]*=g,T[11]*=g,T}getCameraToClipPerspective(d,g,T,P){const B=new Float64Array(16);return t.perspective(B,d,g,T,P),B}getDistanceToElevation(d,g=!1){const T=0===d?0:t.mercatorZfromAltitude(d,g?t.latFromMercatorY(this.position[1]):this.position[1]),P=this.forward();return(T-this.position[2])/P[2]}clone(){return new el([...this.position],[...this.orientation])}}function Xo(C,d){const g=tl(C.projection,C.zoom,C.width,C.height),T=function(B,X,K,te,he){const ue=new t.LngLat(K.lng-180*ua,K.lat),Ce=new t.LngLat(K.lng+180*ua,K.lat),Ve=B.project(ue.lng,ue.lat),Qe=B.project(Ce.lng,Ce.lat),et=-Math.atan2(Qe.y-Ve.y,Qe.x-Ve.x),tt=t.MercatorCoordinate.fromLngLat(K);tt.y=t.clamp(tt.y,-1+ua,1-ua);const st=tt.toLngLat(),Te=B.project(st.lng,st.lat),Ke=t.MercatorCoordinate.fromLngLat(st);Ke.x+=ua;const bt=Ke.toLngLat(),xt=B.project(bt.lng,bt.lat),Ht=bl(xt.x-Te.x,xt.y-Te.y,et),Gt=t.MercatorCoordinate.fromLngLat(st);Gt.y+=ua;const Ut=Gt.toLngLat(),ti=B.project(Ut.lng,Ut.lat),Qt=bl(ti.x-Te.x,ti.y-Te.y,et),gi=Math.abs(Ht.x)/Math.abs(Qt.y),Ji=t.identity([]);t.rotateZ(Ji,Ji,-et*(1-(he?0:te)));const Zt=t.identity([]);return t.scale(Zt,Zt,[1,1-(1-gi)*te,1]),Zt[4]=-Qt.x/Qt.y*te,t.rotateZ(Zt,Zt,et),t.multiply(Zt,Ji,Zt),Zt}(C.projection,0,C.center,g,d),P=To(C);return t.scale(T,T,[P,P,1]),T}function To(C){const d=C.projection,g=tl(C.projection,C.zoom,C.width,C.height),T=Ro(d,C.center),P=Ro(d,t.LngLat.convert(d.center));return Math.pow(2,T*g+(1-g)*P)}function tl(C,d,g,T,P=1/0){const B=C.range;if(!B)return 0;const X=Math.min(P,Math.max(g,T)),K=Math.log(X/1024)/Math.LN2;return t.smoothstep(B[0]+K,B[1]+K,d)}const ua=1/4e4;function Ro(C,d){const g=t.clamp(d.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),T=new t.LngLat(d.lng-180*ua,g),P=new t.LngLat(d.lng+180*ua,g),B=C.project(T.lng,g),X=C.project(P.lng,g),K=t.MercatorCoordinate.fromLngLat(T),te=t.MercatorCoordinate.fromLngLat(P),he=X.x-B.x,ue=X.y-B.y,Ce=te.x-K.x,Ve=te.y-K.y,Qe=Math.sqrt((Ce*Ce+Ve*Ve)/(he*he+ue*ue));return Math.log(Qe)/Math.LN2}function bl(C,d,g){const T=Math.cos(g),P=Math.sin(g);return{x:C*T-d*P,y:C*P+d*T}}class Sa{constructor(d,g,T,P,B,X,K){this.tileSize=512,this._renderWorldCopies=void 0===B||B,this._minZoom=d||0,this._maxZoom=g||22,this._minPitch=T??0,this._maxPitch=P??60,this.setProjection(X),this.setMaxBounds(K),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ec,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new el,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const d=new Sa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return d._elevation=this._elevation,d._centerAltitude=this._centerAltitude,d._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,d.tileSize=this.tileSize,d.mercatorFromTransition=this.mercatorFromTransition,d.width=this.width,d.height=this.height,d.cameraElevationReference=this.cameraElevationReference,d._center=this._center,d._setZoom(this.zoom),d._seaLevelZoom=this._seaLevelZoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._nearZ=this._nearZ,d._farZ=this._farZ,d._averageElevation=this._averageElevation,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._camera=this._camera.clone(),d._calcMatrices(),d.freezeTileCoverage=this.freezeTileCoverage,d.frustumCorners=this.frustumCorners,d}get elevation(){return this._elevation}set elevation(d){this._elevation!==d&&(this._elevation=d,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(d,g=!1){const T=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||T)&&this._updateCameraOnTerrain(),(d||T)&&this._constrainCamera(g),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(d){this.projectionOptions=d||{name:"mercator"};const g=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const T=!V(g,this.getProjection());return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setMercatorFromTransition(){const d=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const g=d!==this.projection.name;return g&&this._calcMatrices(),g}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(d){void 0===d?d=!0:null===d&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get cameraWorldSize(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(d){this.rotation=d}get rotation(){return-this.angle/Math.PI*180}set rotation(d){const g=-d*Math.PI/180;var T,P,B,X,K,te,he,ue,Ce,Ve;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=(T=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T),P=this.rotationMatrix,X=this.angle,K=(B=this.rotationMatrix)[0],te=B[1],he=B[2],ue=B[3],Ce=Math.sin(X),Ve=Math.cos(X),P[0]=K*Ve+he*Ce,P[1]=te*Ve+ue*Ce,P[2]=K*-Ce+he*Ve,P[3]=te*-Ce+ue*Ve)}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const g=t.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const d=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/d)}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=t.degToRad(d),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(d){this._averageElevation=d,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(d){const g=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._setZoom(g),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(d){this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const d=this._elevation;this._centerAltitude=d.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=d.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const d=this._elevation,g=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],T=this.horizonLineFromTop();let P=0,B=0;for(let X=0;X<g.length;X++){const K=new t.Point(g[X][0]*this.width,T+g[X][1]*(this.height-T)),te=d.pointCoordinate(K);if(!te)continue;const he=1/Math.hypot(te[0]-this._camera.position[0],te[1]-this._camera.position[1]);P+=te[3]*he,B+=he}return 0===B?NaN:P/B}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const d=this._seaLevelZoom,g=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),T=this.pixelsPerMeter/this.worldSize*g,P=this._mercatorZfromZoom(d),B=this._mercatorZfromZoom(this._maxZoom),X=Math.max(P-T,B);this._setZoom(this._zoomFromMercatorZ(X))}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}computeZoomRelativeTo(d){const g=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,d.toAltitude()));let T;T=d.z<this._camera.position[2]?[g.x,g.y,g.z]:[d.x,d.y,d.z];const P=t.length(t.sub([],this._camera.position,T));return t.clamp(this._zoomFromMercatorZ(P),this._minZoom,this._maxZoom)}setFreeCameraOptions(d){if(!this.height||!d.position&&!d.orientation)return;this._updateCameraState();let g=!1;if(d.orientation&&!t.exactEquals(d.orientation,this._camera.orientation)&&(g=this._setCameraOrientation(d.orientation)),d.position){const T=[d.position.x,d.position.y,d.position.z];t.exactEquals$1(T,this._camera.position)||(this._setCameraPosition(T),g=!0)}g&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const d=this._camera.position,g=new Qa;return g.position=new t.MercatorCoordinate(d[0],d[1],d[2]),g.orientation=this._camera.orientation,g._elevation=this.elevation,g._renderWorldCopies=this.renderWorldCopies,g}_setCameraOrientation(d){if(!t.length$1(d))return!1;t.normalize$1(d,d);const g=t.transformQuat([],[0,0,-1],d),T=t.transformQuat([],[0,-1,0],d);if(T[2]<0)return!1;const P=Fl(g,T);return!!P&&(this._camera.orientation=P,!0)}_setCameraPosition(d){const g=this.zoomScale(this.minZoom)*this.tileSize,T=this.zoomScale(this.maxZoom)*this.tileSize,P=this.cameraToCenterDistance;d[2]=t.clamp(d[2],P/T,P/g),this._camera.position=d}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,g,T){this._unmodified=!1,this._edgeInsets.interpolate(d,g,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const g=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,g)}getVisibleUnwrappedCoordinates(d){const g=[new t.UnwrappedTileID(0,d)];if(this.renderWorldCopies){const T=this.pointCoordinate(new t.Point(0,0)),P=this.pointCoordinate(new t.Point(this.width,0)),B=this.pointCoordinate(new t.Point(this.width,this.height)),X=this.pointCoordinate(new t.Point(0,this.height)),K=Math.floor(Math.min(T.x,P.x,B.x,X.x)),te=Math.floor(Math.max(T.x,P.x,B.x,X.x)),he=1;for(let ue=K-he;ue<=te+he;ue++)0!==ue&&g.push(new t.UnwrappedTileID(ue,d))}return g}coveringTiles(d){let g=this.coveringZoomLevel(d);const T=g,P=this.elevation&&!d.isTerrainDEM,B="mercator"===this.projection.name;if(void 0!==d.minzoom&&g<d.minzoom)return[];void 0!==d.maxzoom&&g>d.maxzoom&&(g=d.maxzoom);const X=this.locationCoordinate(this.center),K=this.center.lat,te=1<<g,he=[te*X.x,te*X.y,0],ue="globe"===this.projection.name,Ce=!ue,Ve=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g,Ce),Qe=ue?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),et=te*t.mercatorZfromAltitude(1,this.center.lat),tt=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),st=[te*Qe.x,te*Qe.y,tt*(Ce?1:et)],Te=this.cameraToCenterDistance/d.tileSize*(d.roundZoom?1:.502),Ke=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?g:0,bt=d.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,xt=d.isTerrainDEM?-bt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ht=this.projection.isReprojectedInTileSpace?To(this):1,Gt=vi=>{const nn=new t.MercatorCoordinate(vi.x+25e-6,vi.y,vi.z),$i=new t.MercatorCoordinate(vi.x,vi.y+25e-6,vi.z),Ki=vi.toLngLat(),Hn=nn.toLngLat(),nr=$i.toLngLat(),Ln=this.locationCoordinate(Ki),Xn=this.locationCoordinate(Hn),Zn=this.locationCoordinate(nr),tr=Math.hypot(Xn.x-Ln.x,Xn.y-Ln.y),zn=Math.hypot(Zn.x-Ln.x,Zn.y-Ln.y);return Math.sqrt(tr*zn)*Ht/25e-6},Ut=vi=>{const Ii=bt,nn=xt;return{aabb:t.tileAABB(this,te,0,0,0,vi,nn,Ii,this.projection),zoom:0,x:0,y:0,minZ:nn,maxZ:Ii,wrap:vi,fullyVisible:!1}},ti=[];let Qt=[];const gi=g,Ji=d.reparseOverscaled?T:g,Zt=vi=>vi*vi,Oi=Zt((tt-this._centerAltitude)*et),yi=vi=>{if(!this._elevation||!vi.tileID||!B)return;const Ii=this._elevation.getMinMaxForTile(vi.tileID),nn=vi.aabb;Ii?(nn.min[2]=Ii.min,nn.max[2]=Ii.max,nn.center[2]=(nn.min[2]+nn.max[2])/2):(vi.shouldSplit=Qi(vi),vi.shouldSplit||(nn.min[2]=nn.max[2]=nn.center[2]=this._centerAltitude))},Qi=vi=>{if(vi.zoom<Ke)return!0;if(vi.zoom===gi)return!1;if(null!=vi.shouldSplit)return vi.shouldSplit;const Ii=vi.aabb.distanceX(st),nn=vi.aabb.distanceY(st);let $i=Oi,Ki=1;if(ue){$i=Zt(vi.aabb.distanceZ(st));const Ln=Math.pow(2,vi.zoom),Xn=t.latFromMercatorY((vi.y+1)/Ln),Zn=t.latFromMercatorY(vi.y/Ln),tr=Math.min(Math.max(K,Xn),Zn),zn=t.circumferenceAtLatitude(tr)/t.circumferenceAtLatitude(K);if(Ki=tr===K?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,zn/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&vi.zoom===gi-1&&zn>=.9)return!0}else if(P&&($i=Zt(vi.aabb.distanceZ(st)*et)),this.projection.isReprojectedInTileSpace&&T<=5){const Ln=Math.pow(2,vi.zoom),Xn=Gt(new t.MercatorCoordinate((vi.x+.5)/Ln,(vi.y+.5)/Ln));Ki=Xn>.85?1:Xn}const Hn=Ii*Ii+nn*nn+$i;return Hn<Zt((1<<gi-vi.zoom)*Te*Ki*((Ln,Xn)=>{if(Xn*Zt(.707)<Ln)return 1;const Zn=Math.sqrt(Xn/Ln);return Zn/(1.4144271570014144+(Math.pow(1.1,Zn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max($i,Oi),Hn))};if(this.renderWorldCopies)for(let vi=1;vi<=3;vi++)ti.push(Ut(-vi)),ti.push(Ut(vi));for(ti.push(Ut(0));ti.length>0;){const vi=ti.pop(),Ii=vi.x,nn=vi.y;let $i=vi.fullyVisible;if(!$i){const Ki=vi.aabb.intersects(Ve);if(0===Ki)continue;$i=2===Ki}if(vi.zoom!==gi&&Qi(vi))for(let Ki=0;Ki<4;Ki++){const Hn=(Ii<<1)+Ki%2,nr=(nn<<1)+(Ki>>1),Ln={aabb:B?vi.aabb.quadrant(Ki):t.tileAABB(this,te,vi.zoom+1,Hn,nr,vi.wrap,vi.minZ,vi.maxZ,this.projection),zoom:vi.zoom+1,x:Hn,y:nr,wrap:vi.wrap,fullyVisible:$i,tileID:void 0,shouldSplit:void 0,minZ:vi.minZ,maxZ:vi.maxZ};P&&!ue&&(Ln.tileID=new t.OverscaledTileID(vi.zoom+1===gi?Ji:vi.zoom+1,vi.wrap,vi.zoom+1,Hn,nr),yi(Ln)),ti.push(Ln)}else{const Ki=vi.zoom===gi?Ji:vi.zoom;if(d.minzoom&&d.minzoom>Ki)continue;const Hn=he[0]-(.5+Ii+(vi.wrap<<vi.zoom))*(1<<g-vi.zoom),nr=he[1]-.5-nn,Ln=vi.tileID?vi.tileID:new t.OverscaledTileID(Ki,vi.wrap,vi.zoom,Ii,nn);Qt.push({tileID:Ln,distanceSq:Hn*Hn+nr*nr})}}if(this.fogCullDistSq){const vi=this.fogCullDistSq,Ii=this.horizonLineFromTop();Qt=Qt.filter(nn=>{const $i=[0,0,0,1],Ki=[t.EXTENT,t.EXTENT,0,1],Hn=this.calculateFogTileMatrix(nn.tileID.toUnwrapped());t.transformMat4$1($i,$i,Hn),t.transformMat4$1(Ki,Ki,Hn);const nr=t.getAABBPointSquareDist($i,Ki);if(0===nr)return!0;let Ln=!1;const Xn=this._elevation;if(Xn&&nr>vi&&0!==Ii){const Zn=this.calculateProjMatrix(nn.tileID.toUnwrapped());let tr;d.isTerrainDEM||(tr=Xn.getMinMaxForTile(nn.tileID)),tr||(tr={min:xt,max:bt});const zn=t.furthestTileCorner(this.rotation),Pr=[zn[0]*t.EXTENT,zn[1]*t.EXTENT,tr.max];t.transformMat4(Pr,Pr,Zn),Ln=(1-Pr[1])*this.height*.5<Ii}return nr<vi||Ln})}return Qt.sort((vi,Ii)=>vi.distanceSq-Ii.distanceSq).map(vi=>vi.tileID)}resize(d,g){this.width=d,this.height=g,this.pixelsToGLUnits=[2/d,-2/g],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const g=t.clamp(d.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),T=this.projection.project(d.lng,g);return new t.Point(T.x*this.worldSize,T.y*this.worldSize)}unproject(d){return this.projection.unproject(d.x/this.worldSize,d.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/t.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(d,g){let T,P;const B=this.centerPoint;if("globe"===this.projection.name){const K=this.worldSize;T=(g.x-B.x)/K,P=(g.y-B.y)/K}else{const K=this.pointCoordinate(g),te=this.pointCoordinate(B);T=K.x-te.x,P=K.y-te.y}const X=this.locationCoordinate(d);this.setLocation(new t.MercatorCoordinate(X.x-T,X.y-P))}setLocation(d){this.center=this.coordinateLocation(d),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(d){return this.projection.locationPoint(this,d)}locationPoint3D(d){return this.projection.locationPoint(this,d,!0)}pointLocation(d){return this.coordinateLocation(this.pointCoordinate(d))}pointLocation3D(d){return this.coordinateLocation(this.pointCoordinate3D(d))}locationCoordinate(d,g){const T=g?t.mercatorZfromAltitude(g,d.lat):void 0,P=this.projection.project(d.lng,d.lat);return new t.MercatorCoordinate(P.x,P.y,T)}coordinateLocation(d){return this.projection.unproject(d.x,d.y)}pointRayIntersection(d,g){const T=g??this._centerAltitude,P=[d.x,d.y,0,1],B=[d.x,d.y,1,1];t.transformMat4$1(P,P,this.pixelMatrixInverse),t.transformMat4$1(B,B,this.pixelMatrixInverse);const X=B[3];t.scale$1(P,P,1/P[3]),t.scale$1(B,B,1/X);const K=P[2],te=B[2];return{p0:P,p1:B,t:K===te?0:(T-K)/(te-K)}}screenPointToMercatorRay(d){const g=[d.x,d.y,0,1],T=[d.x,d.y,1,1];return t.transformMat4$1(g,g,this.pixelMatrixInverse),t.transformMat4$1(T,T,this.pixelMatrixInverse),t.scale$1(g,g,1/g[3]),t.scale$1(T,T,1/T[3]),g[2]=t.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,T[2]=t.mercatorZfromAltitude(T[2],this._center.lat)*this.worldSize,t.scale$1(g,g,1/this.worldSize),t.scale$1(T,T,1/this.worldSize),new t.Ray([g[0],g[1],g[2]],t.normalize([],t.sub([],T,g)))}rayIntersectionCoordinate(d){const{p0:g,p1:T,t:P}=d,B=t.mercatorZfromAltitude(g[2],this._center.lat),X=t.mercatorZfromAltitude(T[2],this._center.lat);return new t.MercatorCoordinate(t.number(g[0],T[0],P)/this.worldSize,t.number(g[1],T[1],P)/this.worldSize,t.number(B,X,P))}pointCoordinate(d,g=this._centerAltitude){return this.projection.pointCoordinate(this,d.x,d.y,g)}pointCoordinate3D(d){if(!this.elevation)return this.pointCoordinate(d);let g=this.projection.pointCoordinate3D(this,d.x,d.y);if(g)return new t.MercatorCoordinate(g[0],g[1],g[2]);let T=0,P=this.horizonLineFromTop();if(d.y>P)return this.pointCoordinate(d);const B=.02*P,X=d.clone();for(let K=0;K<10&&P-T>B;K++){X.y=t.number(T,P,.66);const te=this.projection.pointCoordinate3D(this,X.x,X.y);te?(P=X.y,g=te):T=X.y}return g?new t.MercatorCoordinate(g[0],g[1],g[2]):this.pointCoordinate(d)}isPointAboveHorizon(d){return this.projection.isPointAboveHorizon(this,d)}isPointOnSurface(d){if(d.y<0||d.y>this.height||d.x<0||d.x>this.width)return!1;if(this.elevation||this.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(d);const g=this.pointCoordinate(d);return g.y>=0&&g.y<=1}_coordinatePoint(d,g){const T=g&&this.elevation?this.elevation.getAtPointOrZero(d,this._centerAltitude):this._centerAltitude,P=[d.x*this.worldSize,d.y*this.worldSize,T+d.toAltitude(),1];return t.transformMat4$1(P,P,this.pixelMatrix),P[3]>0?new t.Point(P[0]/P[3],P[1]/P[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:d,left:g}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,B=this.pointLocation3D(new t.Point(g,d)),X=this.pointLocation3D(new t.Point(P,d)),K=this.pointLocation3D(new t.Point(P,T)),te=this.pointLocation3D(new t.Point(g,T));let he=Math.min(B.lng,X.lng,K.lng,te.lng),ue=Math.max(B.lng,X.lng,K.lng,te.lng),Ce=Math.min(B.lat,X.lat,K.lat,te.lat),Ve=Math.max(B.lat,X.lat,K.lat,te.lat);const Qe=Math.pow(2,-this.zoom)/16*270,et="globe"===this.projection.name?1:4,tt=(st,Te,Ke,bt,xt)=>{const Ht=(st+Ke)/2,Gt=(Te+bt)/2,Ut=new t.Point(Ht,Gt),{lng:ti,lat:Qt}=this.pointLocation3D(Ut),gi=Math.max(0,he-ti,Ce-Qt,ti-ue,Qt-Ve);he=Math.min(he,ti),ue=Math.max(ue,ti),Ce=Math.min(Ce,Qt),Ve=Math.max(Ve,Qt),(xt<et||gi>Qe)&&(tt(st,Te,Ht,Gt,xt+1),tt(Ht,Gt,Ke,bt,xt+1))};if(tt(g,d,P,d,1),tt(P,d,P,T,1),tt(P,T,g,T,1),tt(g,T,g,d,1),"globe"===this.projection.name){const[st,Te]=t.polesInViewport(this);st?(Ve=90,ue=180,he=-180):Te&&(Ce=-90,ue=180,he=-180)}return new t.LngLatBounds(new t.LngLat(he,Ce),new t.LngLat(ue,Ve))}_getBoundsRectangular(d,g){const{top:T,left:P}=this._edgeInsets,B=this.height-this._edgeInsets.bottom,X=this.width-this._edgeInsets.right,K=new t.Point(P,T),te=new t.Point(X,T),he=new t.Point(X,B),ue=new t.Point(P,B);let Ce=this.pointCoordinate(K,d),Ve=this.pointCoordinate(te,d);const Qe=this.pointCoordinate(he,g),et=this.pointCoordinate(ue,g),tt=(st,Te)=>(Te.y-st.y)/(Te.x-st.x);return Ce.y>1&&Ve.y>=0?Ce=new t.MercatorCoordinate((1-et.y)/tt(et,Ce)+et.x,1):Ce.y<0&&Ve.y<=1&&(Ce=new t.MercatorCoordinate(-et.y/tt(et,Ce)+et.x,0)),Ve.y>1&&Ce.y>=0?Ve=new t.MercatorCoordinate((1-Qe.y)/tt(Qe,Ve)+Qe.x,1):Ve.y<0&&Ce.y<=1&&(Ve=new t.MercatorCoordinate(-Qe.y/tt(Qe,Ve)+Qe.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(Ce)).extend(this.coordinateLocation(Ve)).extend(this.coordinateLocation(et)).extend(this.coordinateLocation(Qe))}_getBoundsRectangularTerrain(){const d=this.elevation;if(!d.visibleDemTiles.length||d.isUsingMockSource())return this._getBoundsRectangular(0,0);const g=d.visibleDemTiles.reduce((T,P)=>{if(P.dem){const B=P.dem.tree;T.min=Math.min(T.min,B.minimums[0]),T.max=Math.max(T.max,B.maximums[0])}return T},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(g.min*d.exaggeration(),g.max*d.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(d=!0){const g=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,T=this.height/2-g*(1-this._horizonShift);return d?Math.max(0,T):T}getMaxBounds(){return this.maxBounds}setMaxBounds(d){this.maxBounds=d,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,d&&(this.minLat=d.getSouth(),this.maxLat=d.getNorth(),this.minLng=d.getWest(),this.maxLng=d.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(d,g){return this.projection.createTileMatrix(this,g,d)}calculateDistanceTileData(d){const g=d.key,T=this._distanceTileDataCache;if(T[g])return T[g];const P=d.canonical,B=1/this.height,X=this.cameraWorldSize,K=X/this.zoomScale(P.z),te=(P.x+Math.pow(2,P.z)*d.wrap)*K,he=P.y*K,ue=this.point;ue.x*=X/this.worldSize,ue.y*=X/this.worldSize;const Ce=this.angle,Ve=Math.sin(-Ce),Qe=-Math.cos(-Ce);return T[g]={bearing:[Ve,Qe],center:[(ue.x-te)*B,(ue.y-he)*B],scale:K/t.EXTENT*B},T[g]}calculateFogTileMatrix(d){const g=d.key,T=this._fogTileMatrixCache;if(T[g])return T[g];const P=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,d);return t.multiply(P,this.worldToFogMatrix,P),T[g]=new Float32Array(P),T[g]}calculateProjMatrix(d,g=!1){const T=d.key,P=g?this._alignedProjMatrixCache:this._projMatrixCache;if(P[T])return P[T];const B=this.calculatePosMatrix(d,this.worldSize);return t.multiply(B,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.alignedProjMatrix:this.projMatrix,B),P[T]=new Float32Array(B),P[T]}calculatePixelsToTileUnitsMatrix(d){const g=d.tileID.key,T=this._pixelsToTileUnitsCache;if(T[g])return T[g];const P=function(B,X){const{scale:K}=B.tileTransform,te=K*t.EXTENT/(B.tileSize*Math.pow(2,X.zoom-B.tileID.overscaledZ+B.tileID.canonical.z));return he=new Float32Array(4),Ve=(ue=X.inverseAdjustmentMatrix)[1],Qe=ue[2],et=ue[3],st=(Ce=[te,te])[1],he[0]=ue[0]*(tt=Ce[0]),he[1]=Ve*tt,he[2]=Qe*st,he[3]=et*st,he;var he,ue,Ce,Ve,Qe,et,tt,st}(d,this);return T[g]=P,T[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const d=1/this.worldSize,g=t.fromScaling([],[d,d,d]);return t.multiply(g,g,this.globeMatrix),g}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const d=this._elevation;this._updateCameraState();const g=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(g),P=this._camera.forward(),B=t.mercatorZfromAltitude(1,this._center.lat);T[2]/=B,P[2]/=B,t.normalize(P,P);const X=d.raycast(T,P,d.exaggeration());if(X){const K=t.scaleAndAdd([],T,P,X),te=new t.MercatorCoordinate(K[0],K[1],t.mercatorZfromAltitude(K[2],t.latFromMercatorY(K[1]))),he=(te.z+t.length([te.x-T[0],te.y-T[1],te.z-T[2]*B]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(he),this._centerAltitude=te.toAltitude(),this._center=this.coordinateLocation(te),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(d=!1){if(!this._elevation)return;const g=this._elevation,T=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,P=this._computeCameraPosition(T),B=g.getAtPointOrZero(new t.MercatorCoordinate(...P)),X=this.pixelsPerMeter/this.worldSize*B,K=this._minimumHeightOverTerrain(),te=P[2]-X;if(te<=K)if(te<0||d){const he=this.locationCoordinate(this._center,this._centerAltitude),ue=[P[0],P[1],he.z-P[2]],Ce=t.length(ue);ue[2]-=(K-te)/this._pixelsPerMercatorPixel;const Ve=t.length(ue);if(0===Ve)return;t.scale$2(ue,ue,Ce/Ve*this._pixelsPerMercatorPixel),this._camera.position=[P[0],P[1],he.z*this._pixelsPerMercatorPixel-ue[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const d="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||d){const Ve=this.center;return Ve.lat=t.clamp(Ve.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!d)&&(Ve.lng=t.clamp(Ve.lng,this.minLng,this.maxLng)),this.center=Ve,void(this._constraining=!1)}const g=this._unmodified,{x:T,y:P}=this.point;let B=0,X=T,K=P;const te=this.width/2,he=this.height/2,ue=this.worldMinY*this.scale,Ce=this.worldMaxY*this.scale;if(P-he<ue&&(K=ue+he),P+he>Ce&&(K=Ce-he),Ce-ue<this.height&&(B=Math.max(B,this.height/(Ce-ue)),K=(Ce+ue)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Ve=this.worldMinX*this.scale,Qe=this.worldMaxX*this.scale,et=this.worldSize/2-(Ve+Qe)/2;X=(T+et+this.worldSize)%this.worldSize-et,X-te<Ve&&(X=Ve+te),X+te>Qe&&(X=Qe-te),Qe-Ve<this.width&&(B=Math.max(B,this.width/(Qe-Ve)),X=(Qe+Ve)/2)}X===T&&K===P||(this.center=this.unproject(new t.Point(X,K))),B&&(this.zoom+=this.scaleZoom(B)),this._constrainCamera(),this._unmodified=g,this._constraining=!1}_minZoomForBounds(){let d=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(d=Math.max(d,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),d}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,g=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const T=tl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const P="meters"===this.projection.zAxisUnit?g:1,B=this._camera.getWorldToCamera(this.worldSize,P),X=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);X[8]=2*-d.x/this.width,X[9]=2*d.y/this.height;let K=t.mul([],X,B);if(this.projection.isReprojectedInTileSpace){const Gt=this.locationCoordinate(this.center),Ut=t.identity([]);t.translate(Ut,Ut,[Gt.x*this.worldSize,Gt.y*this.worldSize,0]),t.multiply(Ut,Ut,Xo(this)),t.translate(Ut,Ut,[-Gt.x*this.worldSize,-Gt.y*this.worldSize,0]),t.multiply(K,K,Ut),this.inverseAdjustmentMatrix=function(ti){const Qt=Xo(ti,!0);return at([],[Qt[0],Qt[1],Qt[4],Qt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],K,[this.worldSize,this.worldSize,this.worldSize/P,1]),this.projMatrix=K,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const te=t.invert([],X);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height);const he=new Float32Array(16);t.identity(he),t.scale(he,he,[1,-1,1]),t.rotateX(he,he,this._pitch),t.rotateZ(he,he,this.angle);const ue=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Ce=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ue[8]=2*-d.x/this.width,ue[9]=2*(d.y+Ce)/this.height,this.skyboxMatrix=t.multiply(he,ue,he);const Ve=this.point,Qe=Ve.x,et=Ve.y,tt=this.width%2/2,st=this.height%2/2,Te=Math.cos(this.angle),Ke=Math.sin(this.angle),bt=Qe-Math.round(Qe)+Te*tt+Ke*st,xt=et-Math.round(et)+Te*st+Ke*tt,Ht=new Float64Array(K);if(t.translate(Ht,Ht,[bt>.5?bt-1:bt,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=Ht,K=t.create(),t.scale(K,K,[this.width/2,-this.height/2,1]),t.translate(K,K,[1,-1,0]),this.labelPlaneMatrix=K,K=t.create(),t.scale(K,K,[1,-1,1]),t.translate(K,K,[-1,-1,0]),t.scale(K,K,[2/this.width,2/this.height,1]),this.glCoordMatrix=K,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},K=t.invert(new Float64Array(16),this.pixelMatrix),!K)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=K,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const Gt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(Gt,Gt,B),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=K;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const d=this.cameraWorldSizeForFog,g=this.cameraPixelsPerMeter,T=this._camera.position,P=1/this.height/this._pixelsPerMercatorPixel,B=[d,d,g];t.scale$2(B,B,P),t.scale$2(T,T,-1),t.multiply$2(T,T,B);const X=t.create();t.translate(X,X,T),t.scale(X,X,B),this.mercatorFogMatrix=X,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(d,g,P)}_computeCameraPosition(d){const g=(d=d||this.pixelsPerMeter)/this.pixelsPerMeter,T=this._camera.forward(),P=this.point,B=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*g-d/this.worldSize*this._centerAltitude;return[P.x/this.worldSize-T[0]*B,P.y/this.worldSize-T[1]*B,d/this.worldSize*this._centerAltitude-T[2]*B]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(d){const g=this._maxCameraBoundsDistance()*Math.cos(this._pitch),T=this._camera.position[2],P=d[2];let B=1;this.projection.wrap&&(this.center=this.center.wrap()),P>0&&(B=Math.min((g-T)/P,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,d,B),this._updateStateFromCamera()}_updateStateFromCamera(){const d=this._camera.position,g=this._camera.forward(),{pitch:T,bearing:P}=this._camera.getPitchBearing(),B=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,X=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),K=Math.max((d[2]-B)/Math.cos(T),X),te=this._zoomFromMercatorZ(K);t.scaleAndAdd(d,d,g,K),this._pitch=t.clamp(T,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(P,-Math.PI,Math.PI),this._setZoom(t.clamp(te,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(d[0],d[1],d[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(d){return Math.pow(2,d)*this.tileSize}_mercatorZfromZoom(d){return this.cameraToCenterDistance/this._worldSizeFromZoom(d)}_minimumHeightOverTerrain(){const d=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(d)}_zoomFromMercatorZ(d){return this.scaleZoom(this.cameraToCenterDistance/(d*this.tileSize))}zoomFromMercatorZAdjusted(d){let g=0,T=t.GLOBE_ZOOM_THRESHOLD_MAX,P=0,B=1/0;for(;T-g>1e-6&&T>g;){const X=g+.5*(T-g),K=this.tileSize*Math.pow(2,X),te=this.getCameraToCenterDistance(this.projection,X,K),he=this.scaleZoom(te/(d*this.tileSize)),ue=Math.abs(X-he);ue<B&&(B=ue,P=X),X<he?g=X:T=X}return P}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(d,g){const T=Math.min(d.x,g.x),P=Math.max(d.x,g.x),B=Math.min(d.y,g.y),X=Math.max(d.y,g.y);if(B<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const K=[new t.Point(T,B),new t.Point(P,X),new t.Point(T,X),new t.Point(P,B)],te=this.renderWorldCopies?-3:0,he=this.renderWorldCopies?4:1;for(const ue of K){const Ce=this.pointRayIntersection(ue);if(Ce.t<0)return!0;const Ve=this.rayIntersectionCoordinate(Ce);if(Ve.x<te||Ve.y<0||Ve.x>he||Ve.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(d,g){const T=t.length(t.sub([],this._camera.position,d)),P=this._zoomFromMercatorZ(T)+g;return T-this._mercatorZfromZoom(P)}getCameraPoint(){if("globe"===this.projection.name){const d=function([g,T,P],B){const X=[g,T,P,1];t.transformMat4$1(X,X,B);const K=X[3]=Math.max(X[3],1e-6);return X[0]/=K,X[1]/=K,X[2]/=K,X}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.Point(d[0],d[1])}{const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,d))}}getCameraToCenterDistance(d,g=this.zoom,T=this.worldSize){const P=tl(d,g,this.width,this.height,1024),B=d.pixelSpaceConversion(this.center.lat,T,P);return.5/Math.tan(.5*this._fov)*this.height*B}getWorldToCameraMatrix(){const d=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(d,d,this.globeMatrix),d}}function Na(C,d){let g=!1,T=null;const P=()=>{T=null,g&&(C(),T=setTimeout(P,d),g=!1)};return()=>(g=!0,T||P(),T)}class Sc{constructor(d){this._hashName=d&&encodeURIComponent(d),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Na(this._updateHashUnthrottled.bind(this),300)}addTo(d){return this._map=d,t.window.addEventListener("hashchange",this._onHashChange,!1),d.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const d=this._map;if(!d)return"";const g=xl(d);if(this._hashName){const T=this._hashName;let P=!1;const B=t.window.location.hash.slice(1).split("&").map(X=>{const K=X.split("=")[0];return K===T?(P=!0,`${K}=${g}`):X}).filter(X=>X);return P||B.push(`${T}=${g}`),`#${B.join("&")}`}return`#${g}`}_getCurrentHash(){const d=t.window.location.hash.replace("#","");if(this._hashName){let g;return d.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(g=T)}),(g&&g[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._map;if(!d)return!1;const g=this._getCurrentHash();if(g.length>=3&&!g.some(T=>isNaN(T))){const T=d.dragRotate.isEnabled()&&d.touchZoomRotate.isEnabled()?+(g[3]||0):d.getBearing();return d.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:T,pitch:+(g[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,d)}}function xl(C,d){const g=C.getCenter(),T=Math.round(100*C.getZoom())/100,P=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,P),X=Math.round(g.lng*B)/B,K=Math.round(g.lat*B)/B,te=C.getBearing(),he=C.getPitch();let ue=d?`/${X}/${K}/${T}`:`${T}/${K}/${X}`;return(te||he)&&(ue+="/"+Math.round(10*te)/10),he&&(ue+=`/${Math.round(he)}`),ue}const Tc={linearity:.3,easing:t.bezier(0,0,.3,1)},Ya=t.extend({deceleration:2500,maxSpeed:1400},Tc),bs=t.extend({deceleration:20,maxSpeed:1400},Tc),vn=t.extend({deceleration:1e3,maxSpeed:360},Tc),m=t.extend({deceleration:1e3,maxSpeed:90},Tc);class D{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,g=t.exported.now();for(;d.length>0&&g-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const g={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)g.zoom+=B.zoomDelta||0,g.bearing+=B.bearingDelta||0,g.pitch+=B.pitchDelta||0,B.panDelta&&g.pan._add(B.panDelta),B.around&&(g.around=B.around),B.pinchAround&&(g.pinchAround=B.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(g.pan.mag()){const B=re(g.pan.mag(),T,t.extend({},Ya,d||{}));P.offset=g.pan.mult(B.amount/g.pan.mag()),P.center=this._map.transform.center,G(P,B)}if(g.zoom){const B=re(g.zoom,T,bs);P.zoom=this._map.transform.zoom+B.amount,G(P,B)}if(g.bearing){const B=re(g.bearing,T,vn);P.bearing=this._map.transform.bearing+t.clamp(B.amount,-179,179),G(P,B)}if(g.pitch){const B=re(g.pitch,T,m);P.pitch=this._map.transform.pitch+B.amount,G(P,B)}if(P.zoom||P.bearing){const B=void 0===g.pinchAround?g.around:g.pinchAround;P.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),P.noMoveStart=!0,P}}function G(C,d){(!C.duration||C.duration<d.duration)&&(C.duration=d.duration,C.easing=d.easing)}function re(C,d,g){const{maxSpeed:T,linearity:P,deceleration:B}=g,X=t.clamp(C*P/(d/1e3),-T,T),K=Math.abs(X)/(B*P);return{easing:g.easing,duration:1e3*K,amount:X*(K/2)}}class _e extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,g,T,P={}){const B=ai(g.getCanvasContainer(),T),X=g.unproject(B);super(d,t.extend({point:B,lngLat:X,originalEvent:T},P)),this._defaultPrevented=!1,this.target=g}}class Ue extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,g,T){const P="touchend"===d?T.changedTouches:T.touches,B=We(g.getCanvasContainer(),P),X=B.map(te=>g.unproject(te)),K=B.reduce((te,he,ue,Ce)=>te.add(he.div(Ce.length)),new t.Point(0,0));super(d,{points:B,point:K,lngLats:X,lngLat:g.unproject(K),originalEvent:T}),this._defaultPrevented=!1}}class Vt extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,g,T){super(d,{originalEvent:T}),this._defaultPrevented=!1}}class oi{constructor(d,g){this._map=d,this._clickTolerance=g.clickTolerance}reset(){this._mousedownPos=void 0}wheel(d){return this._firePreventable(new Vt(d.type,this._map,d))}mousedown(d,g){return this._mousedownPos=g,this._firePreventable(new _e(d.type,this._map,d))}mouseup(d){this._map.fire(new _e(d.type,this._map,d))}preclick(d){const g=t.extend({},d);g.type="preclick",this._map.fire(new _e(g.type,this._map,g))}click(d,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||(this.preclick(d),this._map.fire(new _e(d.type,this._map,d)))}dblclick(d){return this._firePreventable(new _e(d.type,this._map,d))}mouseover(d){this._map.fire(new _e(d.type,this._map,d))}mouseout(d){this._map.fire(new _e(d.type,this._map,d))}touchstart(d){return this._firePreventable(new Ue(d.type,this._map,d))}touchmove(d){this._map.fire(new Ue(d.type,this._map,d))}touchend(d){this._map.fire(new Ue(d.type,this._map,d))}touchcancel(d){this._map.fire(new Ue(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ki{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(d){this._map.fire(new _e(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _e("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new _e(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sn{constructor(d,g){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=g.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,g){this.isEnabled()&&d.shiftKey&&0===d.button&&(Pt(),this._startPos=this._lastPos=g,this._active=!0)}mousemoveWindow(d,g){if(!this._active)return;const T=g,P=this._startPos,B=this._lastPos;if(!P||!B||B.equals(T)||!this._box&&T.dist(P)<this._clickTolerance)return;this._lastPos=T,this._box||(this._box=Be("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const X=Math.min(P.x,T.x),K=Math.max(P.x,T.x),te=Math.min(P.y,T.y),he=Math.max(P.y,T.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${X}px,${te}px)`,this._box.style.width=K-X+"px",this._box.style.height=he-te+"px")})}mouseupWindow(d,g){if(!this._active)return;const T=this._startPos,P=g;if(T&&0===d.button){if(this.reset(),wt(),T.x!==P.x||T.y!==P.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:B=>B.fitScreenCoordinates(T,P,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",d)}}keydown(d){this._active&&27===d.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",d))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ot(),delete this._startPos,delete this._lastPos}_fireEvent(d,g){return this._map.fire(new t.Event(d,{originalEvent:g}))}}function Dn(C,d){const g={};for(let T=0;T<C.length;T++)g[C[T].identifier]=d[T];return g}class Bn{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(d,g,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=d.timeStamp),T.length===this.numTouches&&(this.centroid=function(P){const B=new t.Point(0,0);for(const X of P)B._add(X);return B.div(P.length)}(g),this.touches=Dn(T,g)))}touchmove(d,g,T){if(this.aborted||!this.centroid)return;const P=Dn(T,g);for(const B in this.touches){const X=P[B];(!X||X.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(d,g,T){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),0===T.length){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class mr{constructor(d){this.singleTap=new Bn(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(d,g,T){this.singleTap.touchstart(d,g,T)}touchmove(d,g,T){this.singleTap.touchmove(d,g,T)}touchend(d,g,T){const P=this.singleTap.touchend(d,g,T);if(P){const B=d.timeStamp-this.lastTime<500,X=!this.lastTap||this.lastTap.dist(P)<30;if(B&&X||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class Br{constructor(){this._zoomIn=new mr({numTouches:1,numTaps:2}),this._zoomOut=new mr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,g,T){this._zoomIn.touchstart(d,g,T),this._zoomOut.touchstart(d,g,T)}touchmove(d,g,T){this._zoomIn.touchmove(d,g,T),this._zoomOut.touchmove(d,g,T)}touchend(d,g,T){const P=this._zoomIn.touchend(d,g,T),B=this._zoomOut.touchend(d,g,T);return P?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:X.getZoom()+1,around:X.unproject(P)},{originalEvent:d})}):B?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:X.getZoom()-1,around:X.unproject(B)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ys={0:1,2:2};class io{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(d,g){return!1}_move(d,g){return{}}mousedown(d,g){if(this._lastPoint)return;const T=ni(d);this._correctButton(d,T)&&(this._lastPoint=g,this._eventButton=T)}mousemoveWindow(d,g){const T=this._lastPoint;if(T)if(d.preventDefault(),null!=this._eventButton&&function(P,B){const X=Ys[B];return void 0===P.buttons||(P.buttons&X)!==X}(d,this._eventButton))this.reset();else if(this._moved||!(g.dist(T)<this._clickTolerance))return this._moved=!0,this._lastPoint=g,this._move(T,g)}mouseupWindow(d){this._lastPoint&&ni(d)===this._eventButton&&(this._moved&&wt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $s extends io{mousedown(d,g){super.mousedown(d,g),this._lastPoint&&(this._active=!0)}_correctButton(d,g){return 0===g&&!d.ctrlKey}_move(d,g){return{around:g,panDelta:g.sub(d)}}}class Ta extends io{_correctButton(d,g){return 0===g&&d.ctrlKey||2===g}_move(d,g){const T=.8*(g.x-d.x);if(T)return this._active=!0,{bearingDelta:T}}contextmenu(d){d.preventDefault()}}class Ha extends io{_correctButton(d,g){return 0===g&&d.ctrlKey||2===g}_move(d,g){const T=-.5*(g.y-d.y);if(T)return this._active=!0,{pitchDelta:T}}contextmenu(d){d.preventDefault()}}class po{constructor(d,g){this._map=d,this._el=d.getCanvasContainer(),this._minTouches=1,this._clickTolerance=g.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(d,g,T){return this._calculateTransform(d,g,T)}touchmove(d,g,T){if(this._active&&!(T.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===T.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return d.cancelable&&d.preventDefault(),this._calculateTransform(d,g,T)}}touchend(d,g,T){this._calculateTransform(d,g,T),this._active&&T.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,g,T){T.length>0&&(this._active=!0);const P=Dn(T,g),B=new t.Point(0,0),X=new t.Point(0,0);let K=0;for(const he in P){const ue=P[he],Ce=this._touches[he];Ce&&(B._add(ue),X._add(ue.sub(Ce)),K++,P[he]=ue)}if(this._touches=P,K<this._minTouches||!X.mag())return;const te=X.div(K);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(K),panDelta:te}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Be("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class kc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(d){}_move(d,g,T){return{}}touchstart(d,g,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([g[0],g[1]]))}touchmove(d,g,T){const P=this._firstTwoTouches;if(!P)return;d.preventDefault();const[B,X]=P,K=Bl(T,g,B),te=Bl(T,g,X);if(!K||!te)return;const he=this._aroundCenter?null:K.add(te).div(2);return this._move([K,te],he,d)}touchend(d,g,T){if(!this._firstTwoTouches)return;const[P,B]=this._firstTwoTouches,X=Bl(T,g,P),K=Bl(T,g,B);X&&K||(this._active&&wt(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bl(C,d,g){for(let T=0;T<C.length;T++)if(C[T].identifier===g)return d[T]}function Zo(C,d){return Math.log(C/d)/Math.LN2}class Nl extends kc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,g){const T=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(Zo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zo(this._distance,T),pinchAround:g}}}function Ee(C,d){return 180*C.angleWith(d)/Math.PI}class J extends kc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,g){const T=this._vector;if(this._vector=d[0].sub(d[1]),T&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ee(this._vector,T),pinchAround:g}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const g=25/(Math.PI*this._minDiameter)*360,T=this._startVector;if(!T)return!1;const P=Ee(d,T);return Math.abs(P)<g}}function ae(C){return Math.abs(C.y)>Math.abs(C.x)}class ke extends kc{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(d){this._lastPoints=d,ae(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,g,T){const P=this._lastPoints;if(!P)return;const B=d[0].sub(P[0]),X=d[1].sub(P[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&T.touches.length<3||(this._valid=this.gestureBeginsVertically(B,X,T.timeStamp),!this._valid)?void 0:(this._lastPoints=d,this._active=!0,{pitchDelta:(B.y+X.y)/2*-.5})}gestureBeginsVertically(d,g,T){if(void 0!==this._valid)return this._valid;const P=d.mag()>=2,B=g.mag()>=2;if(!P&&!B)return;if(!P||!B)return null==this._firstMove&&(this._firstMove=T),T-this._firstMove<100&&void 0;const X=d.y>0==g.y>0;return ae(d)&&ae(g)&&X}}const Ft={panStep:100,bearingStep:15,pitchStep:10};class Ri{constructor(){const d=Ft;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let g=0,T=0,P=0,B=0,X=0;switch(d.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:d.shiftKey?T=-1:(d.preventDefault(),B=-1);break;case 39:d.shiftKey?T=1:(d.preventDefault(),B=1);break;case 38:d.shiftKey?P=1:(d.preventDefault(),X=-1);break;case 40:d.shiftKey?P=-1:(d.preventDefault(),X=1);break;default:return}return this._rotationDisabled&&(T=0,P=0),{cameraAnimation:K=>{const te=K.getZoom();K.easeTo({duration:300,easeId:"keyboardHandler",easing:In,zoom:g?Math.round(te)+g*(d.shiftKey?2:1):te,bearing:K.getBearing()+T*this._bearingStep,pitch:K.getPitch()+P*this._pitchStep,offset:[-B*this._panStep,-X*this._panStep],center:K.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function In(C){return C*(2-C)}const Ar=4.000244140625;class Fr{constructor(d,g){this._map=d,this._el=d.getCanvasContainer(),this._handler=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(d.ctrlKey||d.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let g=d.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const T=t.exported.now(),P=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,0!==g&&g%Ar==0?this._type="wheel":0!==g&&Math.abs(g)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(P*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),d.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=d,this._delta-=g,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const g=ai(this._el,d);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:g,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;"wheel"===this._type&&d.projection.wrap&&(d._center.lng>=180||d._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const g=()=>d._terrainEnabled()&&this._aroundCoord?d.computeZoomRelativeTo(this._aroundCoord):d.zoom;if(0!==this._delta){const te="wheel"===this._type&&Math.abs(this._delta)>Ar?this._wheelZoomRate:this._defaultZoomRate;let he=2/(1+Math.exp(-Math.abs(this._delta*te)));this._delta<0&&0!==he&&(he=1/he);const ue=g(),Ce=Math.pow(2,ue),Ve="number"==typeof this._targetZoom?d.zoomScale(this._targetZoom):Ce;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(Ve*he))),"wheel"===this._type&&(this._startZoom=ue,this._easing=this._smoothOutEasing(200)),this._delta=0}const T="number"==typeof this._targetZoom?this._targetZoom:g(),P=this._startZoom,B=this._easing;let X,K=!1;if("wheel"===this._type&&P&&B){const te=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),he=B(te);X=t.number(P,T,he),te<1?this._frameId||(this._frameId=!0):K=!0}else X=T,K=!0;return this._active=!0,K&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!K,zoomDelta:X-g(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let g=t.ease;if(this._prevEase){const T=this._prevEase,P=(t.exported.now()-T.start)/T.duration,B=T.easing(P+.01)-T.easing(P),X=.27/Math.sqrt(B*B+1e-4)*.01,K=Math.sqrt(.0729-X*X);g=t.bezier(X,K,.25,1)}return this._prevEase={start:t.exported.now(),duration:d,easing:g},g}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Be("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Is{constructor(d,g){this._clickZoom=d,this._tapZoom=g}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Js{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(d,g){return d.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:T.getZoom()+(d.shiftKey?-1:1),around:T.unproject(g)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oh{constructor(){this._tap=new mr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(d,g,T){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?T.length>0&&(this._swipePoint=g[0],this._swipeTouch=T[0].identifier):this._tap.touchstart(d,g,T))}touchmove(d,g,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const P=g[0],B=P.y-this._swipePoint.y;return this._swipePoint=P,d.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(d,g,T)}touchend(d,g,T){this._tapTime?this._swipePoint&&0===T.length&&this.reset():this._tap.touchend(d,g,T)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gd{constructor(d,g,T){this._el=d,this._mousePan=g,this._touchPan=T}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Pf{constructor(d,g,T){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=g,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ph{constructor(d,g,T,P){this._el=d,this._touchZoom=g,this._touchRotate=T,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const il=C=>C.zoom||C.drag||C.pitch||C.rotate;class wp extends t.Event{}class Yl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(d,g){const T=t.sub([],g,d);this.radius=t.length(T[2]<0?t.div([],T,this.constants):[T[0],T[1],0])}projectRay(d){t.div(d,d,this.constants),t.normalize(d,d),t.mul$1(d,d,this.constants);const g=t.scale$2([],d,this.radius);if(g[2]>0){const T=t.scale$2([],[0,0,1],t.dot(g,[0,0,1])),P=t.scale$2([],t.normalize([],[g[0],g[1],0]),this.radius),B=t.add([],g,t.scale$2([],t.sub([],t.add([],P,T),g),2));g[0]=B[0],g[1]=B[1]}return g}}function wl(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class da{constructor(d,g){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new D(d),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Yl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(g),t.bindAll(["handleEvent","handleWindowEvent"],this);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[P,B,X]of this._listeners)P.addEventListener(B,P===t.window.document?this.handleWindowEvent:this.handleEvent,X)}destroy(){for(const[d,g,T]of this._listeners)d.removeEventListener(g,d===t.window.document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(d){const g=this._map,T=g.getCanvasContainer();this._add("mapEvent",new oi(g,d));const P=g.boxZoom=new sn(g,d);this._add("boxZoom",P);const B=new Br,X=new Js;g.doubleClickZoom=new Is(X,B),this._add("tapZoom",B),this._add("clickZoom",X);const K=new Oh;this._add("tapDragZoom",K);const te=g.touchPitch=new ke(g);this._add("touchPitch",te);const he=new Ta(d),ue=new Ha(d);g.dragRotate=new Pf(d,he,ue),this._add("mouseRotate",he,["mousePitch"]),this._add("mousePitch",ue,["mouseRotate"]);const Ce=new $s(d),Ve=new po(g,d);g.dragPan=new Gd(T,Ce,Ve),this._add("mousePan",Ce),this._add("touchPan",Ve,["touchZoom","touchRotate"]);const Qe=new J,et=new Nl;g.touchZoomRotate=new Ph(T,et,Qe,K),this._add("touchRotate",Qe,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ki(g));const tt=g.scrollZoom=new Fr(g,this);this._add("scrollZoom",tt,["mousePan"]);const st=g.keyboard=new Ri;this._add("keyboard",st);for(const Te of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[Te]&&g[Te].enable(d[Te])}_add(d,g,T){this._handlers.push({handlerName:d,handler:g,allowed:T}),this._handlersById[d]=g}stop(d){if(!this._updatingCamera){for(const{handler:g}of this._handlers)g.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!il(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(d,g,T){for(const P in d)if(P!==T&&(!g||g.indexOf(P)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const g=[];for(const T of d)this._el.contains(T.target)&&g.push(T);return g}handleEvent(d,g){this._updatingCamera=!0;const T="renderFrame"===d.type,P=T?void 0:d,B={needsRenderFrame:!1},X={},K={},te=d.touches?this._getMapTouches(d.touches):void 0,he=te?We(this._el,te):T?void 0:ai(this._el,d);for(const{handlerName:Ve,handler:Qe,allowed:et}of this._handlers){if(!Qe.isEnabled())continue;let tt;this._blockedByActive(K,et,Ve)?Qe.reset():Qe[g||d.type]&&(tt=Qe[g||d.type](d,he,te),this.mergeHandlerResult(B,X,tt,Ve,P),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||Qe.isActive())&&(K[Ve]=Qe)}const ue={};for(const Ve in this._previousActiveHandlers)K[Ve]||(ue[Ve]=P);this._previousActiveHandlers=K,(Object.keys(ue).length||wl(B))&&(this._changes.push([B,X,ue]),this._triggerRenderFrame()),(Object.keys(K).length||wl(B))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ce}=B;Ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ce(this._map))}mergeHandlerResult(d,g,T,P,B){if(!T)return;t.extend(d,T);const X={handlerName:P,originalEvent:T.originalEvent||B};void 0!==T.zoomDelta&&(g.zoom=X),void 0!==T.panDelta&&(g.drag=X),void 0!==T.pitchDelta&&(g.pitch=X),void 0!==T.bearingDelta&&(g.rotate=X)}_applyChanges(){const d={},g={},T={};for(const[P,B,X]of this._changes)P.panDelta&&(d.panDelta=(d.panDelta||new t.Point(0,0))._add(P.panDelta)),P.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+P.pitchDelta),void 0!==P.around&&(d.around=P.around),void 0!==P.aroundCoord&&(d.aroundCoord=P.aroundCoord),void 0!==P.pinchAround&&(d.pinchAround=P.pinchAround),P.noInertia&&(d.noInertia=P.noInertia),t.extend(g,B),t.extend(T,X);this._updateMapTransform(d,g,T),this._changes=[]}_updateMapTransform(d,g,T){const P=this._map,B=P.transform,X=Ke=>[Ke.x,Ke.y,Ke.z];if((Ke=>{const bt=this._eventsInProgress.drag;return bt&&!this._handlersById[bt.handlerName].isActive()})()&&!wl(d)){const Ke=B.zoom;B.cameraElevationReference="sea",B.recenterOnTerrain(),B.cameraElevationReference="ground",Ke!==B.zoom&&this._map._update(!0)}if(B._isCameraConstrained&&P._stop(!0),!wl(d))return void this._fireEvents(g,T,!0);let{panDelta:K,zoomDelta:te,bearingDelta:he,pitchDelta:ue,around:Ce,aroundCoord:Ve,pinchAround:Qe}=d;B._isCameraConstrained&&(te>0&&(te=0),B._isCameraConstrained=!1),void 0!==Qe&&(Ce=Qe),(te||(Ke=>g.drag&&!this._eventsInProgress.drag)())&&Ce&&(this._dragOrigin=X(B.pointCoordinate3D(Ce)),this._trackingEllipsoid.setup(B._camera.position,this._dragOrigin)),B.cameraElevationReference="sea",P._stop(!0),Ce=Ce||P.transform.centerPoint,he&&(B.bearing+=he),ue&&(B.pitch+=ue),B._updateCameraState();const et=[0,0,0];if(K)if("mercator"===B.projection.name){const Ke=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Ce).dir),bt=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Ce.sub(K)).dir);et[0]=bt[0]-Ke[0],et[1]=bt[1]-Ke[1]}else{const Ke=B.pointCoordinate(Ce);if("globe"===B.projection.name){K=K.rotate(-B.angle);const bt=B._pixelsPerMercatorPixel/B.worldSize;et[0]=-K.x*t.mercatorScale(t.latFromMercatorY(Ke.y))*bt,et[1]=-K.y*t.mercatorScale(B.center.lat)*bt}else{const bt=B.pointCoordinate(Ce.sub(K));Ke&&bt&&(et[0]=bt.x-Ke.x,et[1]=bt.y-Ke.y)}}const tt=B.zoom,st=[0,0,0];if(te){const Ke=X(Ve||B.pointCoordinate3D(Ce)),bt={dir:t.normalize([],t.sub([],Ke,B._camera.position))};if(bt.dir[2]<0){const xt=B.zoomDeltaToMovement(Ke,te);t.scale$2(st,bt.dir,xt)}}const Te=t.add(et,et,st);B._translateCameraConstrained(Te),te&&Math.abs(B.zoom-tt)>1e-4&&B.recenterOnTerrain(),B.cameraElevationReference="ground",this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(g,T,!0)}_fireEvents(d,g,T){const P=il(this._eventsInProgress),B=il(d),X={};for(const ue in d){const{originalEvent:Ce}=d[ue];this._eventsInProgress[ue]||(X[`${ue}start`]=Ce),this._eventsInProgress[ue]=d[ue]}!P&&B&&this._fireEvent("movestart",B.originalEvent);for(const ue in X)this._fireEvent(ue,X[ue]);B&&this._fireEvent("move",B.originalEvent);for(const ue in d){const{originalEvent:Ce}=d[ue];this._fireEvent(ue,Ce)}const K={};let te;for(const ue in this._eventsInProgress){const{handlerName:Ce,originalEvent:Ve}=this._eventsInProgress[ue];this._handlersById[Ce].isActive()||(delete this._eventsInProgress[ue],te=g[Ce]||Ve,K[`${ue}end`]=te)}for(const ue in K)this._fireEvent(ue,K[ue]);const he=il(this._eventsInProgress);if(T&&(P||B)&&!he){this._updatingCamera=!0;const ue=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ce=Ve=>0!==Ve&&-this._bearingSnap<Ve&&Ve<this._bearingSnap;ue?(Ce(ue.bearing||this._map.getBearing())&&(ue.bearing=0),this._map.easeTo(ue,{originalEvent:te})):(this._map.fire(new t.Event("moveend",{originalEvent:te})),Ce(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,g){this._map.fire(new t.Event(d,g?{originalEvent:g}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{this._frameId=void 0,this.handleEvent(new wp("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Hl="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ha extends t.Evented{constructor(d,g){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=g.bearingSnap,this._respectPrefersReducedMotion=!1!==g.respectPrefersReducedMotion,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,g){return this.jumpTo({center:d},g)}panBy(d,g,T){return d=t.Point.convert(d).mult(-1),this.panTo(this.transform.center,t.extend({offset:d},g),T)}panTo(d,g,T){return this.easeTo(t.extend({center:d},g),T)}getZoom(){return this.transform.zoom}setZoom(d,g){return this.jumpTo({zoom:d},g),this}zoomTo(d,g,T){return this.easeTo(t.extend({zoom:d},g),T)}zoomIn(d,g){return this.zoomTo(this.getZoom()+1,d,g),this}zoomOut(d,g){return this.zoomTo(this.getZoom()-1,d,g),this}getBearing(){return this.transform.bearing}setBearing(d,g){return this.jumpTo({bearing:d},g),this}getPadding(){return this.transform.padding}setPadding(d,g){return this.jumpTo({padding:d},g),this}rotateTo(d,g,T){return this.easeTo(t.extend({bearing:d},g),T)}resetNorth(d,g){return this.rotateTo(0,t.extend({duration:1e3},d),g),this}resetNorthPitch(d,g){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},d),g),this}snapToNorth(d,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,g):this}getPitch(){return this.transform.pitch}setPitch(d,g){return this.jumpTo({pitch:d},g),this}cameraForBounds(d,g){d=t.LngLatBounds.convert(d);const T=g&&g.bearing||0,P=g&&g.pitch||0,B=d.getNorthWest(),X=d.getSouthEast();return this._cameraForBounds(this.transform,B,X,T,P,g)}_extendCameraOptions(d){const g={top:0,bottom:0,right:0,left:0};if("number"==typeof(d=t.extend({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding){const T=d.padding;d.padding={top:T,bottom:T,right:T,left:T}}return d.padding=t.extend(g,d.padding),d}_minimumAABBFrustumDistance(d,g){const T=g.max[0]-g.min[0],P=g.max[1]-g.min[1];return T/P>d.aspect?T/(2*Math.tan(.5*d.fovX)*d.aspect):P/(2*Math.tan(.5*d.fovY)*d.aspect)}_cameraForBoundsOnGlobe(d,g,T,P,B,X){const K=d.clone(),te=this._extendCameraOptions(X);K.bearing=P,K.pitch=B;const he=t.LngLat.convert(g),ue=t.LngLat.convert(T),Ce=.5*(he.lat+ue.lat),Ve=.5*(he.lng+ue.lng),Qe=t.latLngToECEF(Ce,Ve),et=t.normalize([],Qe),tt=t.normalize([],t.cross([],et,[0,1,0])),st=t.cross([],tt,et),Te=[tt[0],tt[1],tt[2],0,st[0],st[1],st[2],0,et[0],et[1],et[2],0,0,0,0,1],Ke=[Qe,t.latLngToECEF(he.lat,he.lng),t.latLngToECEF(ue.lat,he.lng),t.latLngToECEF(ue.lat,ue.lng),t.latLngToECEF(he.lat,ue.lng),t.latLngToECEF(Ce,he.lng),t.latLngToECEF(Ce,ue.lng),t.latLngToECEF(he.lat,Ve),t.latLngToECEF(ue.lat,Ve)];let bt=t.Aabb.fromPoints(Ke.map($i=>[t.dot(tt,$i),t.dot(st,$i),t.dot(et,$i)]));const xt=t.transformMat4([],bt.center,Te);0===t.squaredLength(xt)&&t.set(xt,0,0,1),t.normalize(xt,xt),t.scale$2(xt,xt,t.GLOBE_RADIUS),K.center=t.ecefToLatLng(xt);const Ht=K.getWorldToCameraMatrix(),Gt=t.invert(new Float64Array(16),Ht);bt=t.Aabb.applyTransform(bt,t.multiply([],Ht,Te)),t.transformMat4(xt,xt,Ht);const Ut=.5*(bt.max[2]-bt.min[2]),ti=this._minimumAABBFrustumDistance(K,bt),Qt=t.scale$2([],[0,0,1],Ut),gi=t.add(Qt,xt,Qt),Ji=ti+(0===K.pitch?0:t.distance(xt,gi)),Zt=K.globeCenterInViewSpace,Oi=t.sub([],xt,[Zt[0],Zt[1],Zt[2]]);t.normalize(Oi,Oi),t.scale$2(Oi,Oi,Ji);const yi=t.add([],xt,Oi);t.transformMat4(yi,yi,Gt);const Qi=t.earthRadius/t.GLOBE_RADIUS,vi=t.length(yi),Ii=t.mercatorZfromAltitude(Math.max(vi*Qi-t.earthRadius,Number.EPSILON),0),nn=Math.min(K.zoomFromMercatorZAdjusted(Ii),te.maxZoom);return nn>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(K.setProjection({name:"mercator"}),K.zoom=nn,this._cameraForBounds(K,g,T,P,B,X)):{center:K.center,zoom:nn,bearing:P,pitch:B}}queryTerrainElevation(d,g){const T=this.transform.elevation;return T?(g=t.extend({},{exaggerated:!0},g),T.getAtPoint(t.MercatorCoordinate.fromLngLat(d),null,g.exaggerated)):null}_cameraForBounds(d,g,T,P,B,X){if("globe"===d.projection.name)return this._cameraForBoundsOnGlobe(d,g,T,P,B,X);const K=d.clone(),te=this._extendCameraOptions(X),he=K.padding;K.bearing=P,K.pitch=B;const ue=t.LngLat.convert(g),Ce=t.LngLat.convert(T),Ve=new t.LngLat(ue.lng,Ce.lat),Qe=new t.LngLat(Ce.lng,ue.lat),et=K.project(ue),tt=K.project(Ce),st=this.queryTerrainElevation(ue),Te=this.queryTerrainElevation(Ce),Ke=this.queryTerrainElevation(Ve),bt=this.queryTerrainElevation(Qe),xt=[[et.x,et.y,Math.min(st||0,Te||0,Ke||0,bt||0)],[tt.x,tt.y,Math.max(st||0,Te||0,Ke||0,bt||0)]];let Ht=t.Aabb.fromPoints(xt);const Gt=K.getWorldToCameraMatrix(),Ut=t.invert(new Float64Array(16),Gt);Ht=t.Aabb.applyTransform(Ht,Gt);const ti=t.sub([],Ht.max,Ht.min),Qt=he.left||0,gi=he.right||0,Ji=he.bottom||0,Zt=he.top||0,{left:Oi,right:yi,top:Qi,bottom:vi}=te.padding,Ii=.5*(Qt+gi),nn=.5*(Zt+Ji),$i=Math.min(K.scaleZoom(K.scale*Math.min((K.width-(Qt+gi+Oi+yi))/ti[0],(K.height-(Ji+Zt+vi+Qi))/ti[1])),te.maxZoom),Ki=K.scale/K.zoomScale($i);Ht=new t.Aabb([Ht.min[0]-(Oi+Ii)*Ki,Ht.min[1]-(vi+nn)*Ki,Ht.min[2]],[Ht.max[0]+(yi+Ii)*Ki,Ht.max[1]+(Qi+nn)*Ki,Ht.max[2]]);const Hn=.5*ti[2],nr=this._minimumAABBFrustumDistance(K,Ht),Ln=[0,0,1,0];t.transformMat4$1(Ln,Ln,Gt),t.normalize$2(Ln,Ln);const Xn=t.scale$2([],Ln,nr+Hn),Zn=t.add([],Ht.center,Xn),tr=("number"==typeof te.offset.x&&"number"==typeof te.offset.y?new t.Point(te.offset.x,te.offset.y):t.Point.convert(te.offset)).rotate(-t.degToRad(P));Ht.center[0]-=tr.x*Ki,Ht.center[1]+=tr.y*Ki,t.transformMat4(Ht.center,Ht.center,Ut),t.transformMat4(Zn,Zn,Ut);const zn=[Ht.center[0],Ht.center[1],Zn[2]*K.pixelsPerMeter];t.scale$2(zn,zn,1/K.worldSize);const Pr=t.lngFromMercatorX(zn[0]),Ur=t.latFromMercatorY(zn[1]),ms=Math.min(K._zoomFromMercatorZ(zn[2]),te.maxZoom),gs=new t.LngLat(Pr,Ur);return K.mercatorFromTransition&&ms<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(K.setProjection({name:"globe"}),K.zoom=ms,this._cameraForBounds(K,g,T,P,B,X)):{center:gs,zoom:ms,bearing:P,pitch:B}}fitBounds(d,g,T){const P=this.cameraForBounds(d,g);return this._fitInternal(P,g,T)}fitScreenCoordinates(d,g,T,P,B){const X=t.Point.convert(d),K=t.Point.convert(g),te=new t.Point(Math.min(X.x,K.x),Math.min(X.y,K.y)),he=new t.Point(Math.max(X.x,K.x),Math.max(X.y,K.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(X,K))return this;const ue=this.transform.pointLocation3D(te),Ce=this.transform.pointLocation3D(he),Ve=this.transform.pointLocation3D(new t.Point(te.x,he.y)),Qe=this.transform.pointLocation3D(new t.Point(he.x,te.y)),et=[Math.min(ue.lng,Ce.lng,Ve.lng,Qe.lng),Math.min(ue.lat,Ce.lat,Ve.lat,Qe.lat)],tt=[Math.max(ue.lng,Ce.lng,Ve.lng,Qe.lng),Math.max(ue.lat,Ce.lat,Ve.lat,Qe.lat)],st=P&&P.pitch?P.pitch:this.getPitch(),Te=this._cameraForBounds(this.transform,et,tt,T,st,P);return this._fitInternal(Te,P,B)}_fitInternal(d,g,T){return d?(delete(g=t.extend(d,g)).padding,g.linear?this.easeTo(g,T):this.flyTo(g,T)):this}jumpTo(d,g){this.stop();const T=d.preloadOnly?this.transform.clone():this.transform;let P=!1,B=!1,X=!1;return"zoom"in d&&T.zoom!==+d.zoom&&(P=!0,T.zoom=+d.zoom),void 0!==d.center&&(T.center=t.LngLat.convert(d.center)),"bearing"in d&&T.bearing!==+d.bearing&&(B=!0,T.bearing=+d.bearing),"pitch"in d&&T.pitch!==+d.pitch&&(X=!0,T.pitch=+d.pitch),null==d.padding||T.isPaddingEqual(d.padding)||(T.padding=d.padding),d.preloadOnly?(this._preloadTiles(T),this):(this.fire(new t.Event("movestart",g)).fire(new t.Event("move",g)),P&&this.fire(new t.Event("zoomstart",g)).fire(new t.Event("zoom",g)).fire(new t.Event("zoomend",g)),B&&this.fire(new t.Event("rotatestart",g)).fire(new t.Event("rotate",g)).fire(new t.Event("rotateend",g)),X&&this.fire(new t.Event("pitchstart",g)).fire(new t.Event("pitch",g)).fire(new t.Event("pitchend",g)),this.fire(new t.Event("moveend",g)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(Hl),this.transform.getFreeCameraOptions()}setFreeCameraOptions(d,g){const T=this.transform;if(!T.projection.supportsFreeCamera)return t.warnOnce(Hl),this;this.stop();const P=T.zoom,B=T.pitch,X=T.bearing;T.setFreeCameraOptions(d);const K=P!==T.zoom,te=B!==T.pitch,he=X!==T.bearing;return this.fire(new t.Event("movestart",g)).fire(new t.Event("move",g)),K&&this.fire(new t.Event("zoomstart",g)).fire(new t.Event("zoom",g)).fire(new t.Event("zoomend",g)),he&&this.fire(new t.Event("rotatestart",g)).fire(new t.Event("rotate",g)).fire(new t.Event("rotateend",g)),te&&this.fire(new t.Event("pitchstart",g)).fire(new t.Event("pitch",g)).fire(new t.Event("pitchend",g)),this.fire(new t.Event("moveend",g)),this}easeTo(d,g){this._stop(!1,d.easeId),(!1===(d=t.extend({offset:[0,0],duration:500,easing:t.ease},d)).animate||this._prefersReducedMotion(d))&&(d.duration=0);const T=this.transform,P=this.getZoom(),B=this.getBearing(),X=this.getPitch(),K=this.getPadding(),te="zoom"in d?+d.zoom:P,he="bearing"in d?this._normalizeBearing(d.bearing,B):B,ue="pitch"in d?+d.pitch:X,Ce="padding"in d?d.padding:T.padding,Ve=t.Point.convert(d.offset);let Qe,et,tt;if("globe"===T.projection.name){const Qt=t.MercatorCoordinate.fromLngLat(T.center),gi=Ve.rotate(-T.angle);Qt.x+=gi.x/T.worldSize,Qt.y+=gi.y/T.worldSize;const Ji=Qt.toLngLat(),Zt=t.LngLat.convert(d.center||Ji);this._normalizeCenter(Zt),Qe=T.centerPoint.add(gi),et=new t.Point(Qt.x,Qt.y).mult(T.worldSize),tt=new t.Point(t.mercatorXfromLng(Zt.lng),t.mercatorYfromLat(Zt.lat)).mult(T.worldSize).sub(et)}else{Qe=T.centerPoint.add(Ve);const Qt=T.pointLocation(Qe),gi=t.LngLat.convert(d.center||Qt);this._normalizeCenter(gi),et=T.project(Qt),tt=T.project(gi).sub(et)}const st=T.zoomScale(te-P);let Te,Ke;d.around&&(Te=t.LngLat.convert(d.around),Ke=T.locationPoint(Te));const bt=this._zooming||te!==P,xt=this._rotating||B!==he,Ht=this._pitching||ue!==X,Gt=!T.isPaddingEqual(Ce),Ut=Qt=>gi=>{if(bt&&(Qt.zoom=t.number(P,te,gi)),xt&&(Qt.bearing=t.number(B,he,gi)),Ht&&(Qt.pitch=t.number(X,ue,gi)),Gt&&(Qt.interpolatePadding(K,Ce,gi),Qe=Qt.centerPoint.add(Ve)),Te)Qt.setLocationAtPoint(Te,Ke);else{const Ji=Qt.zoomScale(Qt.zoom-P),Zt=te>P?Math.min(2,st):Math.max(.5,st),Oi=Math.pow(Zt,1-gi),yi=Qt.unproject(et.add(tt.mult(gi*Oi)).mult(Ji));Qt.setLocationAtPoint(Qt.renderWorldCopies?yi.wrap():yi,Qe)}return d.preloadOnly||this._fireMoveEvents(g),Qt};if(d.preloadOnly){const Qt=this._emulate(Ut,d.duration,T);return this._preloadTiles(Qt),this}const ti={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=bt,this._rotating=xt,this._pitching=Ht,this._padding=Gt,this._easeId=d.easeId,this._prepareEase(g,d.noMoveStart,ti),this._ease(Ut(T),Qt=>{T.recenterOnTerrain(),this._afterEase(g,Qt)},d),this}_prepareEase(d,g,T={}){this._moving=!0,this.transform.cameraElevationReference="sea",g||T.moving||this.fire(new t.Event("movestart",d)),this._zooming&&!T.zooming&&this.fire(new t.Event("zoomstart",d)),this._rotating&&!T.rotating&&this.fire(new t.Event("rotatestart",d)),this._pitching&&!T.pitching&&this.fire(new t.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new t.Event("move",d)),this._zooming&&this.fire(new t.Event("zoom",d)),this._rotating&&this.fire(new t.Event("rotate",d)),this._pitching&&this.fire(new t.Event("pitch",d))}_afterEase(d,g){if(this._easeId&&g&&this._easeId===g)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const T=this._zooming,P=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new t.Event("zoomend",d)),P&&this.fire(new t.Event("rotateend",d)),B&&this.fire(new t.Event("pitchend",d)),this.fire(new t.Event("moveend",d))}flyTo(d,g){if(this._prefersReducedMotion(d)){const $i=t.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo($i,g)}this.stop(),d=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},d);const T=this.transform,P=this.getZoom(),B=this.getBearing(),X=this.getPitch(),K=this.getPadding(),te="zoom"in d?t.clamp(+d.zoom,T.minZoom,T.maxZoom):P,he="bearing"in d?this._normalizeBearing(d.bearing,B):B,ue="pitch"in d?+d.pitch:X,Ce="padding"in d?d.padding:T.padding,Ve=T.zoomScale(te-P),Qe=t.Point.convert(d.offset);let et=T.centerPoint.add(Qe);const tt=T.pointLocation(et),st=t.LngLat.convert(d.center||tt);this._normalizeCenter(st);const Te=T.project(tt),Ke=T.project(st).sub(Te);let bt=d.curve;const xt=Math.max(T.width,T.height),Ht=xt/Ve,Gt=Ke.mag();if("minZoom"in d){const $i=t.clamp(Math.min(d.minZoom,P,te),T.minZoom,T.maxZoom),Ki=xt/T.zoomScale($i-P);bt=Math.sqrt(Ki/Gt*2)}const Ut=bt*bt;function ti($i){const Ki=(Ht*Ht-xt*xt+($i?-1:1)*Ut*Ut*Gt*Gt)/(2*($i?Ht:xt)*Ut*Gt);return Math.log(Math.sqrt(Ki*Ki+1)-Ki)}function Qt($i){return(Math.exp($i)-Math.exp(-$i))/2}function gi($i){return(Math.exp($i)+Math.exp(-$i))/2}const Ji=ti(0);let Zt=function($i){return gi(Ji)/gi(Ji+bt*$i)},Oi=function($i){return xt*((gi(Ji)*(Qt(Ki=Ji+bt*$i)/gi(Ki))-Qt(Ji))/Ut)/Gt;var Ki},yi=(ti(1)-Ji)/bt;if(Math.abs(Gt)<1e-6||!isFinite(yi)){if(Math.abs(xt-Ht)<1e-6)return this.easeTo(d,g);const $i=Ht<xt?-1:1;yi=Math.abs(Math.log(Ht/xt))/bt,Oi=function(){return 0},Zt=function(Ki){return Math.exp($i*bt*Ki)}}d.duration="duration"in d?+d.duration:1e3*yi/("screenSpeed"in d?+d.screenSpeed/bt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0);const Qi=B!==he,vi=ue!==X,Ii=!T.isPaddingEqual(Ce),nn=$i=>Ki=>{const Hn=Ki*yi,nr=1/Zt(Hn);$i.zoom=1===Ki?te:P+$i.scaleZoom(nr),Qi&&($i.bearing=t.number(B,he,Ki)),vi&&($i.pitch=t.number(X,ue,Ki)),Ii&&($i.interpolatePadding(K,Ce,Ki),et=$i.centerPoint.add(Qe));const Ln=1===Ki?st:$i.unproject(Te.add(Ke.mult(Oi(Hn))).mult(nr));return $i.setLocationAtPoint($i.renderWorldCopies?Ln.wrap():Ln,et),$i._updateCameraOnTerrain(),d.preloadOnly||this._fireMoveEvents(g),$i};if(d.preloadOnly){const $i=this._emulate(nn,d.duration,T);return this._preloadTiles($i),this}return this._zooming=!0,this._rotating=Qi,this._pitching=vi,this._padding=Ii,this._prepareEase(g,!1),this._ease(nn(T),()=>this._afterEase(g),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,g){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const T=this._onEaseEnd;this._onEaseEnd=void 0,T.call(this,g)}if(!d){const T=this.handlers;T&&T.stop(!1)}return this}_ease(d,g,T){!1===T.animate||0===T.duration?(d(1),g()):(this._easeStart=t.exported.now(),this._easeOptions=T,this._onEaseFrame=d,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),g=this._onEaseFrame;g&&g(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,g){d=t.wrap(d,-180,180);const T=Math.abs(d-g);return Math.abs(d-360-g)<T&&(d-=360),Math.abs(d+360-g)<T&&(d+=360),d}_normalizeCenter(d){const g=this.transform;if(!g.renderWorldCopies||g.maxBounds)return;const T=d.lng-g.center.lng;d.lng+=T>180?-360:T<-180?360:0}_prefersReducedMotion(d){return this._respectPrefersReducedMotion&&t.exported.prefersReducedMotion&&!(d&&d.essential)}_emulate(d,g,T){const P=Math.ceil(15*g/1e3),B=[],X=d(T.clone());for(let K=0;K<=P;K++){const te=X(K/P);B.push(te.clone())}return B}}class Sn{constructor(d={}){this.options=d,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){const g=this.options&&this.options.compact;return this._map=d,this._container=Be("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Be("button","mapboxgl-ctrl-attrib-button",this._container),Be("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Be("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),g&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===g&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(d,g){const T=this._map._getUIString(`AttributionControl.${g}`);d.setAttribute("aria-label",T),d.removeAttribute("title"),d.firstElementChild&&d.firstElementChild.setAttribute("title",T)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));const g=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(d){const T=g.reduce((P,B,X)=>(B.value&&(P+=`${B.key}=${B.value}${X<g.length-1?"&":""}`),P),"?");d.href=`${t.config.FEEDBACK_URL}/${T}#${xl(this._map,!0)}`,d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}}_updateData(d){!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let d=[];if(this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const g=this._map.style._sourceCaches;for(const P in g){const B=g[P];if(B.used){const X=B.getSource();X.attribution&&d.indexOf(X.attribution)<0&&d.push(X.attribution)}}d.sort((P,B)=>P.length-B.length),d=d.filter((P,B)=>{for(let X=B+1;X<d.length;X++)if(d[X].indexOf(P)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=[...this.options.customAttribution,...d]:d.unshift(this.options.customAttribution));const T=d.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,d.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Rh{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(d){this._map=d,this._container=Be("div","mapboxgl-ctrl");const g=Be("a","mapboxgl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://www.mapbox.com/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(d){d&&"metadata"!==d.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const d=this._map.style._sourceCaches;if(0===Object.entries(d).length)return!0;for(const g in d){const T=d[g].getSource();if(T.hasOwnProperty("mapbox_logo")&&!T.mapbox_logo)return!1}return!0}_updateCompact(){const d=this._container.children;if(d.length){const g=d[0];this._map.getCanvasContainer().offsetWidth<250?g.classList.add("mapboxgl-compact"):g.classList.remove("mapboxgl-compact")}}}class jd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const g=++this._id;return this._queue.push({callback:d,id:g,cancelled:!1}),g}remove(d){const g=this._currentlyRunning,T=g?this._queue.concat(g):this._queue;for(const P of T)if(P.id===d)return void(P.cancelled=!0)}run(d=0){const g=this._currentlyRunning=this._queue;this._queue=[];for(const T of g)if(!T.cancelled&&(T.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function uc(C,d,g){if(C=new t.LngLat(C.lng,C.lat),d){const T=new t.LngLat(C.lng-360,C.lat),P=new t.LngLat(C.lng+360,C.lat),B=360*Math.ceil(Math.abs(C.lng-g.center.lng)/360),X=g.locationPoint(C).distSqr(d),K=d.x<0||d.y<0||d.x>g.width||d.y>g.height;g.locationPoint(T).distSqr(d)<X&&(K||Math.abs(T.lng-g.center.lng)<B)?C=T:g.locationPoint(P).distSqr(d)<X&&(K||Math.abs(P.lng-g.center.lng)<B)&&(C=P)}for(;Math.abs(C.lng-g.center.lng)>180;){const T=g.locationPoint(C);if(T.x>=0&&T.y>=0&&T.x<=g.width&&T.y<=g.height)break;C.lng>g.center.lng?C.lng-=360:C.lng+=360}return C}const Vc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class yn extends t.Evented{constructor(d,g){if(super(),(d instanceof t.window.HTMLElement||g)&&(d=t.extend({element:d},g)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=d&&d.occludedOpacity||.2,d&&d.element)this._element=d.element,this._offset=t.Point.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=Be("div");const P=41,B=27,X=Ge("svg",{display:"block",height:P*this._scale+"px",width:B*this._scale+"px",viewBox:`0 0 ${B} ${P}`},this._element),K=Ge("radialGradient",{id:"shadowGradient"},Ge("defs",{},X));Ge("stop",{offset:"10%","stop-opacity":.4},K),Ge("stop",{offset:"100%","stop-opacity":.05},K),Ge("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},X),Ge("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},X),Ge("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},X),Ge("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},X),this._offset=t.Point.convert(d&&d.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",P=>{P.preventDefault()}),this._element.addEventListener("mousedown",P=>{P.preventDefault()});const T=this._element.classList;for(const P in Vc)T.remove(`mapboxgl-marker-anchor-${P}`);T.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(d){return d===this._map||(this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._updateMoving),d.on("moveend",this._update),d.on("remove",this._clearFadeTimer),d._addMarker(this),this.setDraggable(this._draggable),this._update(),d.on("click",this._onMapClick)),this}remove(){const d=this._map;return d&&(d.off("click",this._onMapClick),d.off("move",this._updateMoving),d.off("moveend",this._update),d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler),d.off("mouseup",this._onUp),d.off("touchend",this._onUp),d.off("mousemove",this._onMove),d.off("touchmove",this._onMove),d.off("remove",this._clearFadeTimer),d._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=t.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const P=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(24.6+P)],"bottom-right":[-P,-1*(24.6+P)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=d,d._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(d){const g=d.code,T=d.charCode||d.keyCode;"Space"!==g&&"Enter"!==g&&32!==T&&13!==T||this.togglePopup()}_onMapClick(d){const g=d.originalEvent.target,T=this._element;this._popup&&(g===T||T.contains(g))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?(d.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(d.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const d=this._map,g=this._pos;if(!d||!g)return!1;const T=d.unproject(g),P=d.getFreeCameraOptions();if(!P.position)return!1;const B=P.position.toLngLat();return B.distanceTo(T)<.9*B.distanceTo(this._lngLat)}_evaluateOpacity(){const d=this._map;if(!d)return;const g=this._pos;if(!g||g.x<0||g.x>d.transform.width||g.y<0||g.y>d.transform.height)return void this._clearFadeTimer();const T=d.unproject(g);let P;d._showingGlobe()&&t.isLngLatBehindGlobe(d.transform,this._lngLat)?P=0:(P=1-d._queryFogOpacity(T),d.transform._terrainEnabled()&&d.getTerrain()&&this._behindTerrain()&&(P*=this._occludedOpacity)),this._element.style.opacity=`${P}`,this._element.style.pointerEvents=P>0?"auto":"none",this._popup&&this._popup._setOpacity(P),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const d=this._pos;if(!d||!this._map)return;const g=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${d.x}px,${d.y}px)\n            ${Vc[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${g.x}px,${g.y}px)\n        `}_calculateXYTransform(){const d=this._pos,g=this._map,T=this.getPitchAlignment();if(!g||!d||"map"!==T)return"";if(!g._showingGlobe()){const te=g.getPitch();return te?`rotateX(${te}deg)`:""}const P=t.radToDeg(t.globeTiltAtLngLat(g.transform,this._lngLat)),B=d.sub(t.globeCenterToScreenPoint(g.transform)),X=Math.abs(B.x)+Math.abs(B.y);if(0===X)return"";const K=P/X;return`rotateX(${-B.y*K}deg) rotateY(${B.x*K}deg)`}_calculateZTransform(){const d=this._pos,g=this._map;if(!g||!d)return"";let T=0;const P=this.getRotationAlignment();if("map"===P)if(g._showingGlobe()){const B=g.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),X=g.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(B);T=t.radToDeg(Math.atan2(X.y,X.x))-90}else T=-g.getBearing();else if("horizon"===P){const B=t.smoothstep(4,6,g.getZoom()),X=t.globeCenterToScreenPoint(g.transform);X.y+=B*g.transform.height;const K=d.sub(X),te=t.radToDeg(Math.atan2(K.y,K.x));T=(te>90?te-270:te+90)*(1-B)}return T+=this._rotation,T?`rotateZ(${T}deg)`:""}_update(d){t.window.cancelAnimationFrame(this._updateFrameId);const g=this._map;g&&(g.transform.renderWorldCopies&&(this._lngLat=uc(this._lngLat,this._pos,g.transform)),this._pos=g.project(this._lngLat),!0===d?this._updateFrameId=t.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),g._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(g._showingGlobe()||g.getTerrain()||g.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(d){return this._offset=t.Point.convert(d),this._update(),this}_onMove(d){const g=this._map;if(!g)return;const T=this._pointerdownPos,P=this._positionDelta;if(T&&P){if(!this._isDragging){const B=this._clickTolerance||g._clickTolerance;if(d.point.dist(T)<B)return;this._isDragging=!0}this._pos=d.point.sub(P),this._lngLat=g.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const d=this._map;d&&(d.off("mousemove",this._onMove),d.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(d){const g=this._map,T=this._pos;g&&T&&this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(T),this._pointerdownPos=d.point,this._state="pending",g.on("mousemove",this._onMove),g.on("touchmove",this._onMove),g.once("mouseup",this._onUp),g.once("touchend",this._onUp))}setDraggable(d){this._draggable=!!d;const g=this._map;return g&&(d?(g.on("mousedown",this._addDragHandler),g.on("touchstart",this._addDragHandler)):(g.off("mousedown",this._addDragHandler),g.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(d){return this._occludedOpacity=d||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const vd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ud(C=new t.Point(0,0),d="bottom"){if("number"==typeof C){const g=Math.round(Math.sqrt(.5*Math.pow(C,2)));switch(d){case"top":return new t.Point(0,C);case"top-left":return new t.Point(g,g);case"top-right":return new t.Point(-g,g);case"bottom":return new t.Point(0,-C);case"bottom-left":return new t.Point(g,-g);case"bottom-right":return new t.Point(-g,-g);case"left":return new t.Point(C,0);case"right":return new t.Point(-C,0)}return new t.Point(0,0)}return C instanceof t.Point||Array.isArray(C)?t.Point.convert(C):t.Point.convert(C[d]||[0,0])}class ko{constructor(d){this.jumpTo(d)}getValue(d){if(d<=this._startTime)return this._start;if(d>=this._endTime)return this._end;const g=t.easeCubicInOut((d-this._startTime)/(this._endTime-this._startTime));return this._start*(1-g)+this._end*g}isEasing(d){return d>=this._startTime&&d<=this._endTime}jumpTo(d){this._startTime=-1/0,this._endTime=-1/0,this._start=d,this._end=d}easeTo(d,g,T){this._start=this.getValue(g),this._end=d,this._startTime=g,this._endTime=g+T}}const Wd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Cp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Rf={showCompass:!0,showZoom:!0,visualizePitch:!1};class nl{constructor(d,g,T=!1){this._clickTolerance=10,this.element=g,this.mouseRotate=new Ta({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,T&&(this.mousePitch=new Ha({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener("mousedown",this.mousedown),g.addEventListener("touchstart",this.touchstart,{passive:!1}),g.addEventListener("touchmove",this.touchmove),g.addEventListener("touchend",this.touchend),g.addEventListener("touchcancel",this.reset)}down(d,g){this.mouseRotate.mousedown(d,g),this.mousePitch&&this.mousePitch.mousedown(d,g),Pt()}move(d,g){const T=this.map,P=this.mouseRotate.mousemoveWindow(d,g),B=P&&P.bearingDelta;if(B&&T.setBearing(T.getBearing()+B),this.mousePitch){const X=this.mousePitch.mousemoveWindow(d,g),K=X&&X.pitchDelta;K&&T.setPitch(T.getPitch()+K)}}off(){const d=this.element;d.removeEventListener("mousedown",this.mousedown),d.removeEventListener("touchstart",this.touchstart,{passive:!1}),d.removeEventListener("touchmove",this.touchmove),d.removeEventListener("touchend",this.touchend),d.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ot(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(d){this.down(t.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),ai(this.element,d)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(d){this.move(d,ai(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){1!==d.targetTouches.length?this.reset():(this._startPos=this._lastPos=We(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){1!==d.targetTouches.length?this.reset():(this._lastPos=We(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){0===d.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Mc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},$d={maxWidth:100,unit:"metric"},Xd={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},wu={version:t.version,supported:Oe,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends ha{constructor(C){if(t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(C=t.extend({},Cp,C)).minZoom&&null!=C.maxZoom&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=C.minPitch&&null!=C.maxPitch&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=C.minPitch&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=C.maxPitch&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(C.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(C.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Sa(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),C),this._interactive=C.interactive,this._minTileCacheSize=C.minTileCacheSize,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._useWebGL2=C.useWebGL2,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=C.crossSourceCollisions,this._collectResourceTiming=C.collectResourceTiming,this._optimizeForTerrain=C.optimizeForTerrain,this._language=this._parseLanguage(C.language),this._worldview=C.worldview,this._renderTaskQueue=new jd,this._domRenderTaskQueue=new jd,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Wd,C.locale),this._clickTolerance=C.clickTolerance,this._cooperativeGestures=C.cooperativeGestures,this._performanceMetricsCollection=C.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ko(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(C.transformRequest,C.accessToken,C.testMode),this._silenceAuthErrors=!!C.testMode,"string"==typeof C.container){if(this._container=t.window.document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),C.maxBounds&&this.setMaxBounds(C.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new da(this,C),this._localFontFamily=C.localFontFamily,this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),C.projection&&this.setProjection(C.projection),this._hash=C.hash&&new Sc("string"==typeof C.hash&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,t.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),C.attributionControl&&this.addControl(new Sn({customAttribution:C.customAttribution})),this._logoControl=new Rh,this.addControl(this._logoControl,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new t.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new t.Event(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(C,d){if(void 0===d&&(d=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const g=C.onAdd(this);this._controls.push(C);const T=this._controlPositions[d];return-1!==d.indexOf("bottom")?T.insertBefore(g,T.firstChild):T.appendChild(g),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(C);return d>-1&&this._controls.splice(d,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(C){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const d=!this._moving;return d&&this.fire(new t.Event("movestart",C)).fire(new t.Event("move",C)),this.fire(new t.Event("resize",C)),d&&this.fire(new t.Event("moveend",C)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(C){return this.transform.setMaxBounds(t.LngLatBounds.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C?this.setZoom(C):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C?this.setZoom(C):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C?this.setPitch(C):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C?this.setPitch(C):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(C){return"auto"===C?t.window.navigator.language:Array.isArray(C)?0===C.length?void 0:C.map(d=>"auto"===d?t.window.navigator.language:d):C}setLanguage(C){const d=this._parseLanguage(C);if(!this.style||d===this._language)return this;this._language=d,this.style._reloadSources();for(const g of this._controls)g._setLanguage&&g._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(C){return this.style&&C!==this._worldview?(this._worldview=C,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(C){return this._lazyInitEmptyStyle(),C?"string"==typeof C&&(C={name:C}):C=null,this._useExplicitProjection=!!C,this._prioritizeAndUpdateProjection(C,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const C=this.transform,d=C.projection.name;let g;"globe"===d&&C.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(C.setMercatorFromTransition(),g=!0):"mercator"===d&&C.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(C.setProjection({name:"globe"}),g=!0),g&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(C,d){return this._updateProjection(C||d||{name:"mercator"})}_updateProjection(C){let d;if(d="globe"===C.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(C),this.style.applyProjectionUpdate(),d){this.painter.clearBackgroundTiles();for(const g in this.style._sourceCaches)this.style._sourceCaches[g].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(C){return this.transform.locationPoint3D(t.LngLat.convert(C))}unproject(C){return this.transform.pointLocation3D(t.Point.convert(C))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(C,d,g){if("mouseenter"===C||"mouseover"===C){let T=!1;const P=X=>{const K=d.filter(he=>this.getLayer(he)),te=K.length?this.queryRenderedFeatures(X.point,{layers:K}):[];te.length?T||(T=!0,g.call(this,new _e(C,this,X.originalEvent,{features:te}))):T=!1},B=()=>{T=!1};return{layers:new Set(d),listener:g,delegates:{mousemove:P,mouseout:B}}}if("mouseleave"===C||"mouseout"===C){let T=!1;const P=X=>{const K=d.filter(te=>this.getLayer(te));(K.length?this.queryRenderedFeatures(X.point,{layers:K}):[]).length?T=!0:T&&(T=!1,g.call(this,new _e(C,this,X.originalEvent)))},B=X=>{T&&(T=!1,g.call(this,new _e(C,this,X.originalEvent)))};return{layers:new Set(d),listener:g,delegates:{mousemove:P,mouseout:B}}}{const T=P=>{const B=d.filter(K=>this.getLayer(K)),X=B.length?this.queryRenderedFeatures(P.point,{layers:B}):[];X.length&&(P.features=X,g.call(this,P),delete P.features)};return{layers:new Set(d),listener:g,delegates:{[C]:T}}}}on(C,d,g){if(void 0===g)return super.on(C,d);Array.isArray(d)||(d=[d]);const T=this._createDelegatedListener(C,d,g);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(T);for(const P in T.delegates)this.on(P,T.delegates[P]);return this}once(C,d,g){if(void 0===g)return super.once(C,d);Array.isArray(d)||(d=[d]);const T=this._createDelegatedListener(C,d,g);for(const P in T.delegates)this.once(P,T.delegates[P]);return this}off(C,d,g){if(void 0===g)return super.off(C,d);d=new Set(Array.isArray(d)?d:[d]);const T=(B,X)=>{if(B.size!==X.size)return!1;for(const K of B)if(!X.has(K))return!1;return!0},P=this._delegatedListeners?this._delegatedListeners[C]:void 0;return P&&(B=>{for(let X=0;X<B.length;X++){const K=B[X];if(K.listener===g&&T(K.layers,d)){for(const te in K.delegates)this.off(te,K.delegates[te]);return B.splice(X,1),this}}})(P),this}queryRenderedFeatures(C,d){return this.style?(void 0!==d||void 0===C||C instanceof t.Point||Array.isArray(C)||(d=C,C=void 0),this.style.queryRenderedFeatures(C=C||[[0,0],[this.transform.width,this.transform.height]],d=d||{},this.transform)):[]}querySourceFeatures(C,d){return this.style.querySourceFeatures(C,d)}isPointOnSurface(C){const{name:d}=this.transform.projection;return"globe"!==d&&"mercator"!==d&&t.warnOnce(`${d} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(t.Point.convert(C))}setStyle(C,d){return!1!==(d=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},d)).diff&&d.localIdeographFontFamily===this._localIdeographFontFamily&&d.localFontFamily===this._localFontFamily&&this.style&&C?(this._diffStyle(C,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._localFontFamily=d.localFontFamily,this._updateStyle(C,d))}_getUIString(C){const d=this._locale[C];if(null==d)throw new Error(`Missing UI string '${C}'`);return d}_updateStyle(C,d){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),C&&(this.style=new vr(this,d||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof C?this.style.loadURL(C):this.style.loadJSON(C)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new vr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,d){if("string"==typeof C){const g=this._requestManager.normalizeStyleURL(C),T=this._requestManager.transformRequest(g,t.ResourceType.Style);t.getJSON(T,(P,B)=>{P?this.fire(new t.ErrorEvent(P)):B&&this._updateDiff(B,d)})}else"object"==typeof C&&this._updateDiff(C,d)}_updateDiff(C,d){try{this.style.setState(C)&&this._update(!0)}catch(g){t.warnOnce(`Unable to perform style diff: ${g.message||g.error||g}.  Rebuilding the style from scratch.`),this._updateStyle(C,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(C,d){return this._lazyInitEmptyStyle(),this.style.addSource(C,d),this._update(!0)}isSourceLoaded(C){return!!this.style&&this.style._isSourceCacheLoaded(C)}areTilesLoaded(){const C=this.style&&this.style._sourceCaches;for(const d in C){const g=C[d]._tiles;for(const T in g){const P=g[T];if("loaded"!==P.state&&"errored"!==P.state)return!1}}return!0}addSourceType(C,d,g){this._lazyInitEmptyStyle(),this.style.addSourceType(C,d,g)}removeSource(C){return this.style.removeSource(C),this._updateTerrain(),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,d,{pixelRatio:g=1,sdf:T=!1,stretchX:P,stretchY:B,content:X}={}){if(this._lazyInitEmptyStyle(),d instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&d instanceof t.window.ImageBitmap){const{width:K,height:te,data:he}=t.exported.getImageData(d);this.style.addImage(C,{data:new t.RGBAImage({width:K,height:te},he),pixelRatio:g,stretchX:P,stretchY:B,content:X,sdf:T,version:0})}else if(void 0===d.width||void 0===d.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:K,height:te}=d,he=d;this.style.addImage(C,{data:new t.RGBAImage({width:K,height:te},new Uint8Array(he.data)),pixelRatio:g,stretchX:P,stretchY:B,content:X,sdf:T,version:0,userImage:he}),he.onAdd&&he.onAdd(this,C)}}updateImage(C,d){const g=this.style.getImage(C);if(!g)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=d instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&d instanceof t.window.ImageBitmap?t.exported.getImageData(d):d,{width:P,height:B}=T;void 0!==P&&void 0!==B?P===g.data.width&&B===g.data.height?(g.data.replace(T.data,!(d instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&d instanceof t.window.ImageBitmap)),this.style.updateImage(C,g)):this.fire(new t.ErrorEvent(new Error(`The width and height of the updated image (${P}, ${B})\n                must be that same as the previous version of the image\n                (${g.data.width}, ${g.data.height})`))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,d){t.getImage(this._requestManager.transformRequest(C,t.ResourceType.Image),(g,T)=>{d(g,T instanceof t.window.HTMLImageElement?t.exported.getImageData(T):T)})}listImages(){return this.style.listImages()}addLayer(C,d){return this._lazyInitEmptyStyle(),this.style.addLayer(C,d),this._update(!0)}moveLayer(C,d){return this.style.moveLayer(C,d),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}setLayerZoomRange(C,d,g){return this.style.setLayerZoomRange(C,d,g),this._update(!0)}setFilter(C,d,g={}){return this.style.setFilter(C,d,g),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,d,g,T={}){return this.style.setPaintProperty(C,d,g,T),this._update(!0)}getPaintProperty(C,d){return this.style.getPaintProperty(C,d)}setLayoutProperty(C,d,g,T={}){return this.style.setLayoutProperty(C,d,g,T),this._update(!0)}getLayoutProperty(C,d){return this.style.getLayoutProperty(C,d)}setLight(C,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,d),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(C){return this._lazyInitEmptyStyle(),!C&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(C),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(C){return this._lazyInitEmptyStyle(),this.style.setFog(C),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(C){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(C),this.transform):0}setFeatureState(C,d){return this.style.setFeatureState(C,d),this._update()}removeFeatureState(C,d){return this.style.removeFeatureState(C,d),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}_updateContainerDimensions(){if(!this._container)return;const C=this._container.getBoundingClientRect().width||400,d=this._container.getBoundingClientRect().height||300;let g,T,P,B=this._container;for(;B&&(!T||!P);){const X=t.window.getComputedStyle(B).transform;X&&"none"!==X&&(g=X.match(/matrix.*\((.+)\)/)[1].split(", "),g[0]&&"0"!==g[0]&&"1"!==g[0]&&(T=g[0]),g[3]&&"0"!==g[3]&&"1"!==g[3]&&(P=g[3])),B=B.parentElement}this._containerWidth=T?Math.abs(C/T):C,this._containerHeight=P?Math.abs(d/P):d}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const C=this._container;C.classList.add("mapboxgl-map"),(this._missingCSSCanary=Be("div","mapboxgl-canary",C)).style.visibility="hidden",this._detectMissingCSS();const d=this._canvasContainer=Be("div","mapboxgl-canvas-container",C);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=Be("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const g=this._controlContainer=Be("div","mapboxgl-control-container",C),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{T[P]=Be("div",`mapboxgl-ctrl-${P}`,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(C,d){const g=t.exported.devicePixelRatio||1;this._canvas.width=g*Math.ceil(C),this._canvas.height=g*Math.ceil(d),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${d}px`}_addMarker(C){this._markers.push(C)}_removeMarker(C){const d=this._markers.indexOf(C);-1!==d&&this._markers.splice(d,1)}_addPopup(C){this._popups.push(C)}_removePopup(C){const d=this._popups.indexOf(C);-1!==d&&this._popups.splice(d,1)}_setupPainter(){const C=t.extend({},Oe.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._useWebGL2&&this._canvas.getContext("webgl2",C),g=d||this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);g?(this._useWebGL2&&!d&&t.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),t.storeAuthState(g,!0),this.painter=new Po(g,this.transform,!!d),this.on("data",T=>{"source"===T.dataType&&this.painter.setTileLoadedFlag(!0)}),t.exported$1.testSupport(g)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:C}))}_contextRestored(C){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:C}))}_onMapScroll(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_requestDomTask(C){!this.loaded()||this.loaded()&&!this.isMoving()?C():this._domRenderTaskQueue.add(C)}_render(C){let d;const g=this.painter.context.extTimerQuery,T=t.exported.now();if(this.listens("gpu-timing-frame")&&(d=g.createQueryEXT(),g.beginQueryEXT(g.TIME_ELAPSED_EXT,d)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(C),this._domRenderTaskQueue.run(C),this._removed)return;this._updateProjectionTransition();const P=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,te=this.transform.pitch,he=t.exported.now(),ue=new t.EvaluationParameters(K,{now:he,fadeDuration:P,pitch:te,transition:this.style.getTransition()});this.style.update(ue)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let B=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),B=this._updateAverageElevation(T),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):B=this._updateAverageElevation(T),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,P,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:P,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),d){const K=t.exported.now()-T;g.endQueryEXT(g.TIME_ELAPSED_EXT,d),setTimeout(()=>{const te=g.getQueryObjectEXT(d,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(d),this.fire(new t.Event("gpu-timing-frame",{cpuTime:K,gpuTime:te})),t.window.performance.mark("frame-gpu",{startTime:T,detail:{gpuTime:te}})},50)}if(this.listens("gpu-timing-layer")){const K=this.painter.collectGpuTimers();setTimeout(()=>{const te=this.painter.queryGpuTimers(K);this.fire(new t.Event("gpu-timing-layer",{layerTimes:te}))},50)}if(this.listens("gpu-timing-deferred-render")){const K=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const te=this.painter.queryGpuTimeDeferredRender(K);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:te}))},50)}const X=this._sourcesDirty||this._styleDirty||this._placementDirty||B;if(X||this._repaint)this.triggerRepaint();else{const K=!this.isMoving()&&this.loaded();if(K&&(B=this._updateAverageElevation(T,!0)),B)this.triggerRepaint();else if(this._triggerFrame(!1),K&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const te=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:te})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||X||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(C){for(const d of this._markers)C&&!this.getRenderWorldCopies()&&(d._lngLat=d._lngLat.wrap()),d._update();for(const d of this._popups)!C||this.getRenderWorldCopies()||d._trackPointer||(d._lngLat=d._lngLat.wrap()),d._update()}_updateAverageElevation(C,d=!1){const g=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&g(0);if((d||C-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(C)){const T=this.transform.averageElevation;let P=this.transform.sampleAverageElevation(),B=!1;this.transform.elevation&&(B=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(P)?P=0:this._averageElevationLastSampledAt=C;const X=Math.abs(T-P);if(X>1){if(this._isInitialLoad||B)return this._averageElevation.jumpTo(P),g(P);this._averageElevation.easeTo(P,C,300)}else if(X>1e-4)return this._averageElevation.jumpTo(P),g(P)}return!!this._averageElevation.isEasing(C)&&g(this._averageElevation.getValue(C))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,C=>{if(C&&(C.message===t.AUTH_ERR_MSG||401===C.status)){const d=this.painter.context.gl;t.storeAuthState(d,!1),this._logoControl instanceof Rh&&this._logoControl._updateLogo(),d&&d.clear(d.DEPTH_BUFFER_BIT|d.COLOR_BUFFER_BIT|d.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const C=this._isDragging();this.painter.updateTerrain(this.style,C)}_calculateSpeedIndex(){const C=this.painter.canvasCopy(),d=this.painter.getCanvasCopiesAndTimestamps();d.timeStamps.push(performance.now());const g=this.painter.context.gl,T=g.createFramebuffer();function P(B){g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,B,0);const X=new Uint8Array(g.drawingBufferWidth*g.drawingBufferHeight*4);return g.readPixels(0,0,g.drawingBufferWidth,g.drawingBufferHeight,g.RGBA,g.UNSIGNED_BYTE,X),X}return g.bindFramebuffer(g.FRAMEBUFFER,T),this._canvasPixelComparison(P(C),d.canvasCopies.map(P),d.timeStamps)}_canvasPixelComparison(C,d,g){let T=g[1]-g[0];const P=C.length/4;for(let B=0;B<d.length;B++){const X=d[B];let K=0;for(let te=0;te<X.length;te+=4)X[te]===C[te]&&X[te+1]===C[te+1]&&X[te+2]===C[te+2]&&X[te+3]===C[te+3]&&(K+=1);T+=(g[B+2]-g[B+1])*(1-K/P)}return T}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const C=this.painter.context.gl.getExtension("WEBGL_lose_context");C&&C.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(C){this._renderNextFrame=this._renderNextFrame||C,this.style&&!this._frame&&(this._frame=t.exported.frame(d=>{const g=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,g&&this._render(d)}))}_preloadTiles(C){const d=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(d,(g,T)=>g._preloadTiles(C,T),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(C){this._trackResize&&this.resize({originalEvent:C})._update()}_onVisibilityChange(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(C){this._showTerrainWireframe!==C&&(this._showTerrainWireframe=C,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(C){this._speedIndexTiming!==C&&(this._speedIndexTiming=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(C){this._showTileAABBs!==C&&(this._showTileAABBs=C,C&&this._update())}_setCacheLimits(C,d){t.setCacheLimits(C,d)}get version(){return t.version}},NavigationControl:class{constructor(C){this.options=t.extend({},Rf,C),this._container=Be("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",d=>{this._map&&this._map.zoomIn({},{originalEvent:d})}),Be("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",d=>{this._map&&this._map.zoomOut({},{originalEvent:d})}),Be("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",d=>{const g=this._map;g&&(this.options.visualizePitch?g.resetNorthPitch({},{originalEvent:d}):g.resetNorth({},{originalEvent:d}))}),this._compassIcon=Be("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const C=this._map;if(!C)return;const d=C.getZoom(),g=d===C.getMaxZoom(),T=d===C.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())}_rotateCompassArrow(){const C=this._map;if(!C)return;const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(C.transform.pitch*(Math.PI/180)),.5)}) rotateX(${C.transform.pitch}deg) rotateZ(${C.transform.angle*(180/Math.PI)}deg)`:`rotate(${C.transform.angle*(180/Math.PI)}deg)`;C._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=d)})}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),C.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&C.on("pitch",this._rotateCompassArrow),C.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nl(C,this._compass,this.options.visualizePitch)),this._container}onRemove(){const C=this._map;C&&(this._container.remove(),this.options.showZoom&&C.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&C.off("pitch",this._rotateCompassArrow),C.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(C,d){const g=Be("button",C,this._container);return g.type="button",g.addEventListener("click",d),g}_setButtonTitle(C,d){if(!this._map)return;const g=this._map._getUIString(`NavigationControl.${d}`);C.setAttribute("aria-label",g),C.firstElementChild&&C.firstElementChild.setAttribute("title",g)}},GeolocateControl:class extends t.Evented{constructor(C){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},Mc,C),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Na(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(C){return this._map=C,this._container=Be("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(C){const d=(g=!!this.options.geolocation)=>{this._supportsGeolocation=g,C(g)};void 0!==this._supportsGeolocation?C(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(g=>d("denied"!==g.state)).catch(()=>d()):d()}_isOutOfMapMaxBounds(C){const d=this._map.getMaxBounds(),g=C.coords;return!!d&&(g.longitude<d.getWest()||g.longitude>d.getEast()||g.latitude<d.getSouth()||g.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(C),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",C)),this._finish()}}_updateCamera(C){const d=new t.LngLat(C.coords.longitude,C.coords.latitude),g=C.coords.accuracy,T=this._map.getBearing(),P=t.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(g),P,{geolocateSource:!0})}_updateMarker(C){if(C){const d=new t.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const C=this._map.transform,d=t.mercatorZfromAltitude(1,C._center.lat)*C.worldSize,g=Math.ceil(2*this._accuracy*d);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(C){if(this._map){if(this.options.trackUserLocation)if(1===C.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===C.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",C)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(C){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=Be("button","mapboxgl-ctrl-geolocate",this._container),Be("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===C){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Be("div","mapboxgl-user-location"),this._dotElement.appendChild(Be("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Be("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new yn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Be("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new yn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))})}}_onDeviceOrientation(C){this._userLocationDotMarker&&(C.webkitCompassHeading?this._heading=C.webkitCompassHeading:!0===C.absolute&&(this._heading=-1*C.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(C={maximumAge:6e5,timeout:0},this._noTimeout=!0):(C=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,C),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const C=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(d=>{"granted"===d&&C()}).catch(console.error):C()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Sn,ScaleControl:class{constructor(C){this.options=t.extend({},$d,C),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const C=this.options.maxWidth||100,d=this._map,g=d._containerHeight/2,T=d._containerWidth/2-C/2,P=d.unproject([T,g]),B=d.unproject([T+C,g]),X=P.distanceTo(B);if("imperial"===this.options.unit){const K=3.2808*X;K>5280?this._setScale(C,K/5280,"mile"):this._setScale(C,K,"foot")}else"nautical"===this.options.unit?this._setScale(C,X/1852,"nautical-mile"):X>=1e3?this._setScale(C,X/1e3,"kilometer"):this._setScale(C,X,"meter")}_setScale(C,d,g){this._map._requestDomTask(()=>{const T=function(B){const X=Math.pow(10,`${Math.floor(B)}`.length-1);let K=B/X;return K=K>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:function(te){const he=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*he)/he}(K),X*K}(d),P=T/d;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==g?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:g}).format(T):`${T}&nbsp;${Xd[g]}`,this._container.style.width=C*P+"px"})}onAdd(C){return this._map=C,this._language=C.getLanguage(),this._container=Be("div","mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(C){this._language=C,this._update()}setUnit(C){this.options.unit=C,this._update()}},FullscreenControl:class{constructor(C){this._fullscreen=!1,C&&C.container&&(C.container instanceof t.window.HTMLElement?this._container=C.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=Be("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const C=this._fullscreenButton=Be("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Be("span","mapboxgl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",C)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(C){super(),this.options=t.extend(Object.create(vd),C),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(C&&C.className?C.className.trim().split(/\s+/):[])}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&C.on("preclick",this._onClose),this.options.closeOnMove&&C.on("move",this._onClose),C.on("remove",this.remove),this._update(),C._addPopup(this),this._focusFirstElement(),this._trackPointer?(C.on("mousemove",this._onMouseEvent),C.on("mouseup",this._onMouseEvent),C._canvasContainer.classList.add("mapboxgl-track-pointer")):C.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const C=this._map;return C&&(C.off("move",this._update),C.off("move",this._onClose),C.off("preclick",this._onClose),C.off("click",this._onClose),C.off("remove",this.remove),C.off("mousemove",this._onMouseEvent),C.off("mouseup",this._onMouseEvent),C.off("drag",this._onMouseEvent),C._canvasContainer&&C._canvasContainer.classList.remove("mapboxgl-track-pointer"),C._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(C){this._lngLat=t.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update();const d=this._map;return d&&(d.on("move",this._update),d.off("mousemove",this._onMouseEvent),d._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const C=this._map;return C&&(C.off("move",this._update),C.on("mousemove",this._onMouseEvent),C.on("drag",this._onMouseEvent),C._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(t.window.document.createTextNode(C))}setHTML(C){const d=t.window.document.createDocumentFragment(),g=t.window.document.createElement("body");let T;for(g.innerHTML=C;T=g.firstChild,T;)d.appendChild(T);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){let d=this._content;if(d)for(;d.hasChildNodes();)d.firstChild&&d.removeChild(d.firstChild);else d=this._content=Be("div","mapboxgl-popup-content",this._container||void 0);if(d.appendChild(C),this.options.closeButton){const g=this._closeButton=Be("button","mapboxgl-popup-close-button",d);g.type="button",g.setAttribute("aria-label","Close popup"),g.setAttribute("aria-hidden","true"),g.innerHTML="&#215;",g.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(C){return this._classList.add(C),this._updateClassList(),this}removeClassName(C){return this._classList.delete(C),this._updateClassList(),this}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){let d;return this._classList.delete(C)?d=!1:(this._classList.add(C),d=!0),this._updateClassList(),d}_onMouseEvent(C){this._update(C.point)}_getAnchor(C){if(this.options.anchor)return this.options.anchor;const d=this._map,g=this._container,T=this._pos;if(!d||!g||!T)return"bottom";const P=g.offsetWidth,B=g.offsetHeight,X=T.x<P/2,K=T.x>d.transform.width-P/2;if(T.y+C<B)return X?"top-left":K?"top-right":"top";if(T.y>d.transform.height-B){if(X)return"bottom-left";if(K)return"bottom-right"}return X?"left":K?"right":"bottom"}_updateClassList(){const C=this._container;if(!C)return;const d=[...this._classList];d.push("mapboxgl-popup"),this._anchor&&d.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&d.push("mapboxgl-popup-track-pointer"),C.className=d.join(" ")}_update(C){const d=this._map,g=this._content;if(!d||!this._lngLat&&!this._trackPointer||!g)return;let T=this._container;if(T||(T=this._container=Be("div","mapboxgl-popup",d.getContainer()),this._tip=Be("div","mapboxgl-popup-tip",T),T.appendChild(g)),this.options.maxWidth&&T.style.maxWidth!==this.options.maxWidth&&(T.style.maxWidth=this.options.maxWidth),d.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=uc(this._lngLat,this._pos,d.transform)),!this._trackPointer||C){const P=this._pos=this._trackPointer&&C?C:d.project(this._lngLat),B=Ud(this.options.offset),X=this._anchor=this._getAnchor(B.y),K=Ud(this.options.offset,X),te=P.add(K).round();d._requestDomTask(()=>{this._container&&X&&(this._container.style.transform=`${Vc[X]} translate(${te.x}px,${te.y}px)`)})}if(!this._marker&&d._showingGlobe()){const P=t.isLngLatBehindGlobe(d.transform,this._lngLat)?0:1;this._setOpacity(P)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(zh);C&&C.focus()}_onClose(){this.remove()}_setOpacity(C){this._container&&(this._container.style.opacity=`${C}`),this._content&&(this._content.style.pointerEvents=C?"auto":"none")}},Marker:yn,Style:vr,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Qa,Evented:t.Evented,config:t.config,prewarm:function(){rt().acquire(xi)},clearPrewarmedResources:function(){const C=Pi;C&&(C.isPreloaded()&&1===C.numActive()?(C.release(xi),Pi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(C){t.config.ACCESS_TOKEN=C},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(C){t.config.API_URL=C},get workerCount(){return pi.workerCount},set workerCount(C){pi.workerCount=C},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){t.config.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage(C){t.clearTileCache(C)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return wu}),k}()},1472:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{u:()=>Pt});var k=Rt(1364);let Fe,pn=1;const t={};function V(vt){return vt in t&&(delete t[vt],!0)}const Oe={setImmediate(vt){const wt=pn++;return t[wt]=!0,Fe||(Fe=Promise.resolve()),Fe.then(()=>V(wt)&&vt()),wt},clearImmediate(vt){V(vt)}},{setImmediate:De,clearImmediate:Be}=Oe,Ge={setImmediate(...vt){const{delegate:wt}=Ge;return(wt?.setImmediate||De)(...vt)},clearImmediate(vt){const{delegate:wt}=Ge;return(wt?.clearImmediate||Be)(vt)},delegate:void 0};var nt=Rt(9816);const Pt=new class mt extends nt.k{flush(wt){this._active=!0;const ai=this._scheduled;this._scheduled=void 0;const{actions:We}=this;let ni;wt=wt||We.shift();do{if(ni=wt.execute(wt.state,wt.delay))break}while((wt=We[0])&&wt.id===ai&&We.shift());if(this._active=!1,ni){for(;(wt=We[0])&&wt.id===ai&&We.shift();)wt.unsubscribe();throw ni}}}(class Je extends k.m{constructor(wt,ai){super(wt,ai),this.scheduler=wt,this.work=ai}requestAsyncId(wt,ai,We=0){return null!==We&&We>0?super.requestAsyncId(wt,ai,We):(wt.actions.push(this),wt._scheduled||(wt._scheduled=Ge.setImmediate(wt.flush.bind(wt,void 0))))}recycleAsyncId(wt,ai,We=0){var ni;if(null!=We?We>0:this.delay>0)return super.recycleAsyncId(wt,ai,We);const{actions:li}=wt;null!=ai&&(null===(ni=li[li.length-1])||void 0===ni?void 0:ni.id)!==ai&&(Ge.clearImmediate(ai),wt._scheduled===ai&&(wt._scheduled=void 0))}})},3756:function(oo){oo.exports=function(){"use strict";function Yr(Ee,J,ae){return J=Ge(J),function mt(Ee,J){if(J&&("object"==typeof J||"function"==typeof J))return J;if(void 0!==J)throw new TypeError("Derived constructors may only return object or undefined");return function nt(Ee){if(void 0===Ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee}(Ee)}(Ee,k()?Reflect.construct(J,ae||[],Ge(Ee).constructor):J.apply(Ee,ae))}function k(){try{var Ee=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k=function(){return!!Ee})()}function t(Ee){var J=function Fe(Ee,J){if("object"!=typeof Ee||!Ee)return Ee;var ae=Ee[Symbol.toPrimitive];if(void 0!==ae){var ke=ae.call(Ee,J||"default");if("object"!=typeof ke)return ke;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===J?String:Number)(Ee)}(Ee,"string");return"symbol"==typeof J?J:String(J)}function V(Ee){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&"function"==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J})(Ee)}function Oe(Ee,J){if(!(Ee instanceof J))throw new TypeError("Cannot call a class as a function")}function Me(Ee,J){for(var ae=0;ae<J.length;ae++){var ke=J[ae];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(Ee,t(ke.key),ke)}}function De(Ee,J,ae){return J&&Me(Ee.prototype,J),ae&&Me(Ee,ae),Object.defineProperty(Ee,"prototype",{writable:!1}),Ee}function Ge(Ee){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ae){return ae.__proto__||Object.getPrototypeOf(ae)})(Ee)}function Je(Ee,J){return(Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ke,Ft){return ke.__proto__=Ft,ke})(Ee,J)}function ot(){return ot=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(J,ae,ke){var Ft=function Pt(Ee,J){for(;!Object.prototype.hasOwnProperty.call(Ee,J)&&null!==(Ee=Ge(Ee)););return Ee}(J,ae);if(Ft){var Ri=Object.getOwnPropertyDescriptor(Ft,ae);return Ri.get?Ri.get.call(arguments.length<3?J:ke):Ri.value}},ot.apply(this,arguments)}function vt(Ee,J){return function We(Ee){if(Array.isArray(Ee))return Ee}(Ee)||function pn(Ee,J){var ae=null==Ee?null:typeof Symbol<"u"&&Ee[Symbol.iterator]||Ee["@@iterator"];if(null!=ae){var ke,Ft,Ri,In,Ar=[],Fr=!0,Is=!1;try{if(Ri=(ae=ae.call(Ee)).next,0===J){if(Object(ae)!==ae)return;Fr=!1}else for(;!(Fr=(ke=Ri.call(ae)).done)&&(Ar.push(ke.value),Ar.length!==J);Fr=!0);}catch(Js){Is=!0,Ft=Js}finally{try{if(!Fr&&null!=ae.return&&(In=ae.return(),Object(In)!==In))return}finally{if(Is)throw Ft}}return Ar}}(Ee,J)||li(Ee,J)||function Xt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(Ee){return function ai(Ee){if(Array.isArray(Ee))return at(Ee)}(Ee)||function ni(Ee){if(typeof Symbol<"u"&&null!=Ee[Symbol.iterator]||null!=Ee["@@iterator"])return Array.from(Ee)}(Ee)||li(Ee)||function si(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(Ee,J){if(Ee){if("string"==typeof Ee)return at(Ee,J);var ae=Object.prototype.toString.call(Ee).slice(8,-1);if("Object"===ae&&Ee.constructor&&(ae=Ee.constructor.name),"Map"===ae||"Set"===ae)return Array.from(Ee);if("Arguments"===ae||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae))return at(Ee,J)}}function at(Ee,J){(null==J||J>Ee.length)&&(J=Ee.length);for(var ae=0,ke=new Array(J);ae<J;ae++)ke[ae]=Ee[ae];return ke}function jt(Ee,J){return function ri(Ee,J){return J.get?J.get.call(Ee):J.value}(Ee,qt(Ee,J,"get"))}function ht(Ee,J,ae){return function mi(Ee,J,ae){if(J.set)J.set.call(Ee,ae);else{if(!J.writable)throw new TypeError("attempted to set read only private field");J.value=ae}}(Ee,qt(Ee,J,"set"),ae),ae}function qt(Ee,J,ae){if(!J.has(Ee))throw new TypeError("attempted to "+ae+" private field on non-instance");return J.get(Ee)}function _i(Ee,J,ae){(function Vi(Ee,J){if(J.has(Ee))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Ee,J),J.set(Ee,ae)}var Fi={},xn=function(J){return new Promise(function(ae){if(!J)return ae();var ke=window.scrollX,Ft=window.scrollY;Fi.restoreFocusTimeout=setTimeout(function(){Fi.previousActiveElement instanceof HTMLElement?(Fi.previousActiveElement.focus(),Fi.previousActiveElement=null):document.body&&document.body.focus(),ae()},100),window.scrollTo(ke,Ft)})},ei=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(Ee,J){return Ee[J]="swal2-"+J,Ee},{}),on=["success","warning","info","question","error"].reduce(function(Ee,J){return Ee[J]="swal2-"+J,Ee},{}),Wn="SweetAlert2:",Nn=function(J){return J.charAt(0).toUpperCase()+J.slice(1)},An=function(J){console.warn("".concat(Wn," ").concat("object"===V(J)?J.join(" "):J))},Gi=function(J){console.error("".concat(Wn," ").concat(J))},kr=[],fr=function(J,ae){!function(J){kr.includes(J)||(kr.push(J),An(J))}('"'.concat(J,'" is deprecated and will be removed in the next major release. Please use "').concat(ae,'" instead.'))},wn=function(J){return"function"==typeof J?J():J},en=function(J){return J&&"function"==typeof J.toPromise},_n=function(J){return en(J)?J.toPromise():Promise.resolve(J)},Xi=function(J){return J&&Promise.resolve(J)===J},ji=function(){return document.body.querySelector(".".concat(ei.container))},Gn=function(J){var ae=ji();return ae?ae.querySelector(J):null},tn=function(J){return Gn(".".concat(J))},Ti=function(){return tn(ei.popup)},gn=function(){return tn(ei.icon)},Dr=function(){return tn(ei.title)},Ir=function(){return tn(ei["html-container"])},wr=function(){return tn(ei.image)},pr=function(){return tn(ei["progress-steps"])},or=function(){return tn(ei["validation-message"])},Tn=function(){return Gn(".".concat(ei.actions," .").concat(ei.confirm))},ur=function(){return Gn(".".concat(ei.actions," .").concat(ei.cancel))},Rr=function(){return Gn(".".concat(ei.actions," .").concat(ei.deny))},er=function(){return Gn(".".concat(ei.loader))},gr=function(){return tn(ei.actions)},hr=function(){return tn(ei.footer)},Cr=function(){return tn(ei["timer-progress-bar"])},$r=function(){return tn(ei.close)},Ie=function(){var J=Ti();if(!J)return[];var ae=J.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),ke=Array.from(ae).sort(function(In,Ar){var Fr=parseInt(In.getAttribute("tabindex")||"0"),Is=parseInt(Ar.getAttribute("tabindex")||"0");return Fr>Is?1:Fr<Is?-1:0}),Ft=J.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),Ri=Array.from(Ft).filter(function(In){return"-1"!==In.getAttribute("tabindex")});return wt(new Set(ke.concat(Ri))).filter(function(In){return Yt(In)})},Ne=function(){return Kt(document.body,ei.shown)&&!Kt(document.body,ei["toast-shown"])&&!Kt(document.body,ei["no-backdrop"])},ut=function(){var J=Ti();return!!J&&Kt(J,ei.toast)},zt=function(J,ae){if(J.textContent="",ae){var Ft=(new DOMParser).parseFromString(ae,"text/html"),Ri=Ft.querySelector("head");Ri&&Array.from(Ri.childNodes).forEach(function(Ar){J.appendChild(Ar)});var In=Ft.querySelector("body");In&&Array.from(In.childNodes).forEach(function(Ar){Ar instanceof HTMLVideoElement||Ar instanceof HTMLAudioElement?J.appendChild(Ar.cloneNode(!0)):J.appendChild(Ar)})}},Kt=function(J,ae){if(!ae)return!1;for(var ke=ae.split(/\s+/),Ft=0;Ft<ke.length;Ft++)if(!J.classList.contains(ke[Ft]))return!1;return!0},pt=function(J,ae,ke){if(function(J,ae){Array.from(J.classList).forEach(function(ke){!Object.values(ei).includes(ke)&&!Object.values(on).includes(ke)&&!Object.values(ae.showClass||{}).includes(ke)&&J.classList.remove(ke)})}(J,ae),ae.customClass&&ae.customClass[ke]){if("string"!=typeof ae.customClass[ke]&&!ae.customClass[ke].forEach)return void An("Invalid type of customClass.".concat(ke,'! Expected string or iterable object, got "').concat(V(ae.customClass[ke]),'"'));di(J,ae.customClass[ke])}},ui=function(J,ae){if(!ae)return null;switch(ae){case"select":case"textarea":case"file":return J.querySelector(".".concat(ei.popup," > .").concat(ei[ae]));case"checkbox":return J.querySelector(".".concat(ei.popup," > .").concat(ei.checkbox," input"));case"radio":return J.querySelector(".".concat(ei.popup," > .").concat(ei.radio," input:checked"))||J.querySelector(".".concat(ei.popup," > .").concat(ei.radio," input:first-child"));case"range":return J.querySelector(".".concat(ei.popup," > .").concat(ei.range," input"));default:return J.querySelector(".".concat(ei.popup," > .").concat(ei.input))}},Hi=function(J){if(J.focus(),"file"!==J.type){var ae=J.value;J.value="",J.value=ae}},Ui=function(J,ae,ke){!J||!ae||("string"==typeof ae&&(ae=ae.split(/\s+/).filter(Boolean)),ae.forEach(function(Ft){Array.isArray(J)?J.forEach(function(Ri){ke?Ri.classList.add(Ft):Ri.classList.remove(Ft)}):ke?J.classList.add(Ft):J.classList.remove(Ft)}))},di=function(J,ae){Ui(J,ae,!0)},un=function(J,ae){Ui(J,ae,!1)},Et=function(J,ae){for(var ke=Array.from(J.children),Ft=0;Ft<ke.length;Ft++){var Ri=ke[Ft];if(Ri instanceof HTMLElement&&Kt(Ri,ae))return Ri}},St=function(J,ae,ke){ke==="".concat(parseInt(ke))&&(ke=parseInt(ke)),ke||0===parseInt(ke)?J.style.setProperty(ae,"number"==typeof ke?"".concat(ke,"px"):ke):J.style.removeProperty(ae)},qe=function(J){J&&(J.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},Xe=function(J){J&&(J.style.display="none")},ze=function(J){var ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";J&&new MutationObserver(function(){ft(J,J.innerHTML,ae)}).observe(J,{childList:!0,subtree:!0})},He=function(J,ae,ke,Ft){var Ri=J.querySelector(ae);Ri&&Ri.style.setProperty(ke,Ft)},ft=function(J,ae){ae?qe(J,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Xe(J)},Yt=function(J){return!(!J||!(J.offsetWidth||J.offsetHeight||J.getClientRects().length))},pi=function(J){return J.scrollHeight>J.clientHeight},Pi=function(J){var ae=window.getComputedStyle(J),ke=parseFloat(ae.getPropertyValue("animation-duration")||"0"),Ft=parseFloat(ae.getPropertyValue("transition-duration")||"0");return ke>0||Ft>0},rt=function(J){var ae=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ke=Cr();ke&&Yt(ke)&&(ae&&(ke.style.transition="none",ke.style.width="100%"),setTimeout(function(){ke.style.transition="width ".concat(J/1e3,"s linear"),ke.style.width="0%"},10))},fe=function(){return typeof window>"u"||typeof document>"u"},it='\n <div aria-labelledby="'.concat(ei.title,'" aria-describedby="').concat(ei["html-container"],'" class="').concat(ei.popup,'" tabindex="-1">\n   <button type="button" class="').concat(ei.close,'"></button>\n   <ul class="').concat(ei["progress-steps"],'"></ul>\n   <div class="').concat(ei.icon,'"></div>\n   <img class="').concat(ei.image,'" />\n   <h2 class="').concat(ei.title,'" id="').concat(ei.title,'"></h2>\n   <div class="').concat(ei["html-container"],'" id="').concat(ei["html-container"],'"></div>\n   <input class="').concat(ei.input,'" id="').concat(ei.input,'" />\n   <input type="file" class="').concat(ei.file,'" />\n   <div class="').concat(ei.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(ei.select,'" id="').concat(ei.select,'"></select>\n   <div class="').concat(ei.radio,'"></div>\n   <label class="').concat(ei.checkbox,'">\n     <input type="checkbox" id="').concat(ei.checkbox,'" />\n     <span class="').concat(ei.label,'"></span>\n   </label>\n   <textarea class="').concat(ei.textarea,'" id="').concat(ei.textarea,'"></textarea>\n   <div class="').concat(ei["validation-message"],'" id="').concat(ei["validation-message"],'"></div>\n   <div class="').concat(ei.actions,'">\n     <div class="').concat(ei.loader,'"></div>\n     <button type="button" class="').concat(ei.confirm,'"></button>\n     <button type="button" class="').concat(ei.deny,'"></button>\n     <button type="button" class="').concat(ei.cancel,'"></button>\n   </div>\n   <div class="').concat(ei.footer,'"></div>\n   <div class="').concat(ei["timer-progress-bar-container"],'">\n     <div class="').concat(ei["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Pe=function(){Fi.currentInstance.resetValidationMessage()},h=function(J){var ae=function(){var J=ji();return!!J&&(J.remove(),un([document.documentElement,document.body],[ei["no-backdrop"],ei["toast-shown"],ei["has-column"]]),!0)}();if(fe())Gi("SweetAlert2 requires document to initialize");else{var ke=document.createElement("div");ke.className=ei.container,ae&&di(ke,ei["no-transition"]),zt(ke,it);var Ft=function(J){return"string"==typeof J?document.querySelector(J):J}(J.target);Ft.appendChild(ke),function(J){var ae=Ti();ae.setAttribute("role",J.toast?"alert":"dialog"),ae.setAttribute("aria-live",J.toast?"polite":"assertive"),J.toast||ae.setAttribute("aria-modal","true")}(J),function(J){"rtl"===window.getComputedStyle(J).direction&&di(ji(),ei.rtl)}(Ft),function(){var J=Ti(),ae=Et(J,ei.input),ke=Et(J,ei.file),Ft=J.querySelector(".".concat(ei.range," input")),Ri=J.querySelector(".".concat(ei.range," output")),In=Et(J,ei.select),Ar=J.querySelector(".".concat(ei.checkbox," input")),Fr=Et(J,ei.textarea);ae.oninput=Pe,ke.onchange=Pe,In.onchange=Pe,Ar.onchange=Pe,Fr.oninput=Pe,Ft.oninput=function(){Pe(),Ri.value=Ft.value},Ft.onchange=function(){Pe(),Ri.value=Ft.value}}()}},_=function(J,ae){J instanceof HTMLElement?ae.appendChild(J):"object"===V(J)?b(J,ae):J&&zt(ae,J)},b=function(J,ae){J.jquery?x(ae,J):zt(ae,J.toString())},x=function(J,ae){if(J.textContent="",0 in ae)for(var ke=0;ke in ae;ke++)J.appendChild(ae[ke].cloneNode(!0));else J.appendChild(ae.cloneNode(!0))},M=function(){if(fe())return!1;var Ee=document.createElement("div");return typeof Ee.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof Ee.style.animation<"u"&&"animationend"}(),I=function(J,ae){var ke=gr(),Ft=er();!ke||!Ft||(ae.showConfirmButton||ae.showDenyButton||ae.showCancelButton?qe(ke):Xe(ke),pt(ke,ae,"actions"),function F(Ee,J,ae){var ke=Tn(),Ft=Rr(),Ri=ur();!ke||!Ft||!Ri||($(ke,"confirm",ae),$(Ft,"deny",ae),$(Ri,"cancel",ae),function U(Ee,J,ae,ke){ke.buttonsStyling?(di([Ee,J,ae],ei.styled),ke.confirmButtonColor&&(Ee.style.backgroundColor=ke.confirmButtonColor,di(Ee,ei["default-outline"])),ke.denyButtonColor&&(J.style.backgroundColor=ke.denyButtonColor,di(J,ei["default-outline"])),ke.cancelButtonColor&&(ae.style.backgroundColor=ke.cancelButtonColor,di(ae,ei["default-outline"]))):un([Ee,J,ae],ei.styled)}(ke,Ft,Ri,ae),ae.reverseButtons&&(ae.toast?(Ee.insertBefore(Ri,ke),Ee.insertBefore(Ft,ke)):(Ee.insertBefore(Ri,J),Ee.insertBefore(Ft,J),Ee.insertBefore(ke,J))))}(ke,Ft,ae),zt(Ft,ae.loaderHtml||""),pt(Ft,ae,"loader"))};function $(Ee,J,ae){var ke=Nn(J);ft(Ee,ae["show".concat(ke,"Button")],"inline-block"),zt(Ee,ae["".concat(J,"ButtonText")]||""),Ee.setAttribute("aria-label",ae["".concat(J,"ButtonAriaLabel")]||""),Ee.className=ei[J],pt(Ee,ae,"".concat(J,"Button"))}var ne=function(J,ae){var ke=ji();ke&&(function de(Ee,J){"string"==typeof J?Ee.style.background=J:J||di([document.documentElement,document.body],ei["no-backdrop"])}(ke,ae.backdrop),function ge(Ee,J){J&&(J in ei?di(Ee,ei[J]):(An('The "position" parameter is not valid, defaulting to "center"'),di(Ee,ei.center)))}(ke,ae.position),function we(Ee,J){J&&di(Ee,ei["grow-".concat(J)])}(ke,ae.grow),pt(ke,ae,"container"))};var me={innerParams:new WeakMap,domCache:new WeakMap},Se=["input","file","range","select","radio","checkbox","textarea"],Q=function(J){if(J.input){if(!wi[J.input])return void Gi("Unexpected type of input! Expected ".concat(Object.keys(wi).join(" | "),', got "').concat(J.input,'"'));var ae=It(J.input),ke=wi[J.input](ae,J);qe(ae),J.inputAutoFocus&&setTimeout(function(){Hi(ke)})}},xe=function(J,ae){var ke=ui(Ti(),J);if(ke)for(var Ft in function(J){for(var ae=0;ae<J.attributes.length;ae++){var ke=J.attributes[ae].name;["id","type","value","style"].includes(ke)||J.removeAttribute(ke)}}(ke),ae)ke.setAttribute(Ft,ae[Ft])},Le=function(J){var ae=It(J.input);"object"===V(J.customClass)&&di(ae,J.customClass.input)},Ze=function(J,ae){(!J.placeholder||ae.inputPlaceholder)&&(J.placeholder=ae.inputPlaceholder)},kt=function(J,ae,ke){if(ke.inputLabel){var Ft=document.createElement("label"),Ri=ei["input-label"];Ft.setAttribute("for",J.id),Ft.className=Ri,"object"===V(ke.customClass)&&di(Ft,ke.customClass.inputLabel),Ft.innerText=ke.inputLabel,ae.insertAdjacentElement("beforebegin",Ft)}},It=function(J){return Et(Ti(),ei[J]||ei.input)},ii=function(J,ae){["string","number"].includes(V(ae))?J.value="".concat(ae):Xi(ae)||An('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(V(ae),'"'))},wi={};wi.text=wi.email=wi.password=wi.number=wi.tel=wi.url=wi.search=wi.date=wi["datetime-local"]=wi.time=wi.week=wi.month=function(Ee,J){return ii(Ee,J.inputValue),kt(Ee,Ee,J),Ze(Ee,J),Ee.type=J.input,Ee},wi.file=function(Ee,J){return kt(Ee,Ee,J),Ze(Ee,J),Ee},wi.range=function(Ee,J){var ae=Ee.querySelector("input"),ke=Ee.querySelector("output");return ii(ae,J.inputValue),ae.type=J.input,ii(ke,J.inputValue),kt(ae,Ee,J),Ee},wi.select=function(Ee,J){if(Ee.textContent="",J.inputPlaceholder){var ae=document.createElement("option");zt(ae,J.inputPlaceholder),ae.value="",ae.disabled=!0,ae.selected=!0,Ee.appendChild(ae)}return kt(Ee,Ee,J),Ee},wi.radio=function(Ee){return Ee.textContent="",Ee},wi.checkbox=function(Ee,J){var ae=ui(Ti(),"checkbox");ae.value="1",ae.checked=!!J.inputValue;var ke=Ee.querySelector("span");return zt(ke,J.inputPlaceholder),ae},wi.textarea=function(Ee,J){ii(Ee,J.inputValue),Ze(Ee,J),kt(Ee,Ee,J);return setTimeout(function(){if("MutationObserver"in window){var ke=parseInt(window.getComputedStyle(Ti()).width);new MutationObserver(function(){if(document.body.contains(Ee)){var In=Ee.offsetWidth+(Ft=Ee,parseInt(window.getComputedStyle(Ft).marginLeft)+parseInt(window.getComputedStyle(Ft).marginRight));In>ke?Ti().style.width="".concat(In,"px"):St(Ti(),"width",J.width)}var Ft}).observe(Ee,{attributes:!0,attributeFilter:["style"]})}}),Ee};var Mi=function(J,ae){var ke=Ir();ke&&(ze(ke),pt(ke,ae,"htmlContainer"),ae.html?(_(ae.html,ke),qe(ke,"block")):ae.text?(ke.textContent=ae.text,qe(ke,"block")):Xe(ke),function(J,ae){var ke=Ti();if(ke){var Ft=me.innerParams.get(J),Ri=!Ft||ae.input!==Ft.input;Se.forEach(function(In){var Ar=Et(ke,ei[In]);Ar&&(xe(In,ae.inputAttributes),Ar.className=ei[In],Ri&&Xe(Ar))}),ae.input&&(Ri&&Q(ae),Le(ae))}}(J,ae))},Fn=function(J,ae){for(var ke=0,Ft=Object.entries(on);ke<Ft.length;ke++){var Ri=vt(Ft[ke],2);ae.icon!==Ri[0]&&un(J,Ri[1])}di(J,ae.icon&&on[ae.icon]),Hr(J,ae),Jn(),pt(J,ae,"icon")},Jn=function(){var J=Ti();if(J)for(var ae=window.getComputedStyle(J).getPropertyValue("background-color"),ke=J.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Ft=0;Ft<ke.length;Ft++)ke[Ft].style.backgroundColor=ae},Lr=function(J,ae){if(ae.icon||ae.iconHtml){var ke=J.innerHTML,Ft="";ae.iconHtml?Ft=Wr(ae.iconHtml):"success"===ae.icon?(Ft='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',ke=ke.replace(/ style=".*?"/g,"")):"error"===ae.icon?Ft='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':ae.icon&&(Ft=Wr({question:"?",warning:"!",info:"i"}[ae.icon])),ke.trim()!==Ft.trim()&&zt(J,Ft)}},Hr=function(J,ae){if(ae.iconColor){J.style.color=ae.iconColor,J.style.borderColor=ae.iconColor;for(var ke=0,Ft=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];ke<Ft.length;ke++)He(J,Ft[ke],"background-color",ae.iconColor);He(J,".swal2-success-ring","border-color",ae.iconColor)}},Wr=function(J){return'<div class="'.concat(ei["icon-content"],'">').concat(J,"</div>")},as=function(J,ae){var ke=ae.showClass||{};J.className="".concat(ei.popup," ").concat(Yt(J)?ke.popup:""),ae.toast?(di([document.documentElement,document.body],ei["toast-shown"]),di(J,ei.toast)):di(J,ei.modal),pt(J,ae,"popup"),"string"==typeof ae.customClass&&di(J,ae.customClass),ae.icon&&di(J,ei["icon-".concat(ae.icon)])},Xr=function(J){var ae=document.createElement("li");return di(ae,ei["progress-step"]),zt(ae,J),ae},ul=function(J){var ae=document.createElement("li");return di(ae,ei["progress-step-line"]),J.progressStepsDistance&&St(ae,"width",J.progressStepsDistance),ae},hs=function(J,ae){(function(J,ae){var ke=ji(),Ft=Ti();if(ke&&Ft){if(ae.toast){St(ke,"width",ae.width),Ft.style.width="100%";var Ri=er();Ri&&Ft.insertBefore(Ri,gn())}else St(Ft,"width",ae.width);St(Ft,"padding",ae.padding),ae.color&&(Ft.style.color=ae.color),ae.background&&(Ft.style.background=ae.background),Xe(or()),as(Ft,ae)}})(0,ae),ne(0,ae),function(J,ae){var ke=pr();if(ke){var Ft=ae.progressSteps,Ri=ae.currentProgressStep;if(!Ft||0===Ft.length||void 0===Ri)return void Xe(ke);qe(ke),ke.textContent="",Ri>=Ft.length&&An("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Ft.forEach(function(In,Ar){var Fr=Xr(In);if(ke.appendChild(Fr),Ar===Ri&&di(Fr,ei["active-progress-step"]),Ar!==Ft.length-1){var Is=ul(ae);ke.appendChild(Is)}})}}(0,ae),function(J,ae){var ke=me.innerParams.get(J),Ft=gn();if(Ft){if(ke&&ae.icon===ke.icon)return Lr(Ft,ae),void Fn(Ft,ae);if(!ae.icon&&!ae.iconHtml)return void Xe(Ft);if(ae.icon&&-1===Object.keys(on).indexOf(ae.icon))return Gi('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(ae.icon,'"')),void Xe(Ft);qe(Ft),Lr(Ft,ae),Fn(Ft,ae),di(Ft,ae.showClass&&ae.showClass.icon)}}(J,ae),function(J,ae){var ke=wr();if(ke){if(!ae.imageUrl)return void Xe(ke);qe(ke,""),ke.setAttribute("src",ae.imageUrl),ke.setAttribute("alt",ae.imageAlt||""),St(ke,"width",ae.imageWidth),St(ke,"height",ae.imageHeight),ke.className=ei.image,pt(ke,ae,"image")}}(0,ae),function(J,ae){var ke=Dr();ke&&(ze(ke),ft(ke,ae.title||ae.titleText,"block"),ae.title&&_(ae.title,ke),ae.titleText&&(ke.innerText=ae.titleText),pt(ke,ae,"title"))}(0,ae),function(J,ae){var ke=$r();ke&&(zt(ke,ae.closeButtonHtml||""),pt(ke,ae,"closeButton"),ft(ke,ae.showCloseButton),ke.setAttribute("aria-label",ae.closeButtonAriaLabel||""))}(0,ae),Mi(J,ae),I(0,ae),function(J,ae){var ke=hr();ke&&(ze(ke),ft(ke,ae.footer,"block"),ae.footer&&_(ae.footer,ke),pt(ke,ae,"footer"))}(0,ae);var ke=Ti();"function"==typeof ae.didRender&&ke&&ae.didRender(ke)},rc=function(){var J;return null===(J=Tn())||void 0===J?void 0:J.click()},ao=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),dl=function(J){J.keydownTarget&&J.keydownHandlerAdded&&(J.keydownTarget.removeEventListener("keydown",J.keydownHandler,{capture:J.keydownListenerCapture}),J.keydownHandlerAdded=!1)},ia=function(J,ae){var ke,Ft=Ie();if(Ft.length)return(J+=ae)===Ft.length?J=0:-1===J&&(J=Ft.length-1),void Ft[J].focus();null===(ke=Ti())||void 0===ke||ke.focus()},Ml=["ArrowRight","ArrowDown"],_c=["ArrowLeft","ArrowUp"],gu=function(J,ae,ke){J&&(ae.isComposing||229===ae.keyCode||(J.stopKeydownPropagation&&ae.stopPropagation(),"Enter"===ae.key?Al(ae,J):"Tab"===ae.key?vr(ae):[].concat(Ml,_c).includes(ae.key)?Nc(ae.key):"Escape"===ae.key&&Ks(ae,J,ke)))},Al=function(J,ae){if(wn(ae.allowEnterKey)){var ke=ui(Ti(),ae.input);if(J.target&&ke&&J.target instanceof HTMLElement&&J.target.outerHTML===ke.outerHTML){if(["textarea","file"].includes(ae.input))return;rc(),J.preventDefault()}}},vr=function(J){for(var ae=J.target,ke=Ie(),Ft=-1,Ri=0;Ri<ke.length;Ri++)if(ae===ke[Ri]){Ft=Ri;break}ia(Ft,J.shiftKey?-1:1),J.stopPropagation(),J.preventDefault()},Nc=function(J){var ae=gr(),ke=Tn(),Ft=Rr(),Ri=ur();if(ae&&ke&&Ft&&Ri&&(!(document.activeElement instanceof HTMLElement)||[ke,Ft,Ri].includes(document.activeElement))){var Ar=Ml.includes(J)?"nextElementSibling":"previousElementSibling",Fr=document.activeElement;if(Fr){for(var Is=0;Is<ae.children.length;Is++){if(!(Fr=Fr[Ar]))return;if(Fr instanceof HTMLButtonElement&&Yt(Fr))break}Fr instanceof HTMLButtonElement&&Fr.focus()}}},Ks=function(J,ae,ke){wn(ae.allowEscapeKey)&&(J.preventDefault(),ke(ao.esc))},js={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},na=function(){Array.from(document.body.children).forEach(function(ae){ae.hasAttribute("data-previous-aria-hidden")?(ae.setAttribute("aria-hidden",ae.getAttribute("data-previous-aria-hidden")||""),ae.removeAttribute("data-previous-aria-hidden")):ae.removeAttribute("aria-hidden")})},hl=typeof window<"u"&&!!window.GestureEvent,$a=function(){var ae,J=ji();J&&(J.ontouchstart=function(ke){ae=vu(ke)},J.ontouchmove=function(ke){ae&&(ke.preventDefault(),ke.stopPropagation())})},vu=function(J){var ae=J.target,ke=ji(),Ft=Ir();return!(!ke||!Ft||oc(J)||ra(J)||ae!==ke&&(pi(ke)||!(ae instanceof HTMLElement)||"INPUT"===ae.tagName||"TEXTAREA"===ae.tagName||pi(Ft)&&Ft.contains(ae)))},oc=function(J){return J.touches&&J.touches.length&&"stylus"===J.touches[0].touchType},ra=function(J){return J.touches&&J.touches.length>1},zr=null,Zu=function(J){null===zr&&(document.body.scrollHeight>window.innerHeight||"scroll"===J)&&(zr=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(zr+function(){var J=document.createElement("div");J.className=ei["scrollbar-measure"],document.body.appendChild(J);var ae=J.getBoundingClientRect().width-J.clientWidth;return document.body.removeChild(J),ae}(),"px"))};function yc(Ee,J,ae,ke){ut()?Ll(Ee,ke):(xn(ae).then(function(){return Ll(Ee,ke)}),dl(Fi)),hl?(J.setAttribute("style","display:none !important"),J.removeAttribute("class"),J.innerHTML=""):J.remove(),Ne()&&(null!==zr&&(document.body.style.paddingRight="".concat(zr,"px"),zr=null),function(){if(Kt(document.body,ei.iosfix)){var J=parseInt(document.body.style.top,10);un(document.body,ei.iosfix),document.body.style.top="",document.body.scrollTop=-1*J}}(),na()),function bc(){un([document.documentElement,document.body],[ei.shown,ei["height-auto"],ei["no-backdrop"],ei["toast-shown"]])}()}function sa(Ee){Ee=pl(Ee);var J=js.swalPromiseResolve.get(this),ae=Ns(this);this.isAwaitingPromise?Ee.isDismissed||(Lo(this),J(Ee)):ae&&J(Ee)}var Ns=function(J){var ae=Ti();if(!ae)return!1;var ke=me.innerParams.get(J);if(!ke||Kt(ae,ke.hideClass.popup))return!1;un(ae,ke.showClass.popup),di(ae,ke.hideClass.popup);var Ft=ji();return un(Ft,ke.showClass.backdrop),di(Ft,ke.hideClass.backdrop),Ra(J,ae,ke),!0};function Ho(Ee){var J=js.swalPromiseReject.get(this);Lo(this),J&&J(Ee)}var Lo=function(J){J.isAwaitingPromise&&(delete J.isAwaitingPromise,me.innerParams.get(J)||J._destroy())},pl=function(J){return typeof J>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},J)},Ra=function(J,ae,ke){var Ft=ji(),Ri=M&&Pi(ae);"function"==typeof ke.willClose&&ke.willClose(ae),Ri?xa(J,ae,Ft,ke.returnFocus,ke.didClose):yc(J,Ft,ke.returnFocus,ke.didClose)},xa=function(J,ae,ke,Ft,Ri){M&&(Fi.swalCloseEventFinishedCallback=yc.bind(null,J,ke,Ft,Ri),ae.addEventListener(M,function(In){In.target===ae&&(Fi.swalCloseEventFinishedCallback(),delete Fi.swalCloseEventFinishedCallback)}))},Ll=function(J,ae){setTimeout(function(){"function"==typeof ae&&ae.bind(J.params)(),J._destroy&&J._destroy()})},xo=function(J){var ae=Ti();if(ae||new Nl,ae=Ti()){var ke=er();ut()?Xe(gn()):Yn(ae,J),qe(ke),ae.setAttribute("data-loading","true"),ae.setAttribute("aria-busy","true"),ae.focus()}},Yn=function(J,ae){var ke=gr(),Ft=er();!ke||!Ft||(!ae&&Yt(Tn())&&(ae=Tn()),qe(ke),ae&&(Xe(ae),Ft.setAttribute("data-button-to-replace",ae.className),ke.insertBefore(Ft,ae)),di([J,ke],ei.loading))},Xa=function(J){return J.checked?1:0},wo=function(J){return J.checked?J.value:null},Hs=function(J){return J.files&&J.files.length?null!==J.getAttribute("multiple")?J.files:J.files[0]:null},Or=function(J,ae){var ke=Ti();if(ke){var Ft=function(In){"select"===ae.input?function Pl(Ee,J,ae){var ke=Et(Ee,ei.select);if(ke){var Ft=function(In,Ar,Fr){var Is=document.createElement("option");Is.value=Fr,zt(Is,Ar),Is.selected=Us(Fr,ae.inputValue),In.appendChild(Is)};J.forEach(function(Ri){var In=Ri[0],Ar=Ri[1];if(Array.isArray(Ar)){var Fr=document.createElement("optgroup");Fr.label=In,Fr.disabled=!1,ke.appendChild(Fr),Ar.forEach(function(Is){return Ft(Fr,Is[1],Is[0])})}else Ft(ke,Ar,In)}),ke.focus()}}(ke,zl(In),ae):"radio"===ae.input&&function Rl(Ee,J,ae){var ke=Et(Ee,ei.radio);if(ke){J.forEach(function(Ri){var In=Ri[0],Ar=Ri[1],Fr=document.createElement("input"),Is=document.createElement("label");Fr.type="radio",Fr.name=ei.radio,Fr.value=In,Us(In,ae.inputValue)&&(Fr.checked=!0);var Js=document.createElement("span");zt(Js,Ar),Js.className=ei.label,Is.appendChild(Fr),Is.appendChild(Js),ke.appendChild(Is)});var Ft=ke.querySelectorAll("input");Ft.length&&Ft[0].focus()}}(ke,zl(In),ae)};en(ae.inputOptions)||Xi(ae.inputOptions)?(xo(Tn()),_n(ae.inputOptions).then(function(Ri){J.hideLoading(),Ft(Ri)})):"object"===V(ae.inputOptions)?Ft(ae.inputOptions):Gi("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(V(ae.inputOptions)))}},fl=function(J,ae){var ke=J.getInput();ke&&(Xe(ke),_n(ae.inputValue).then(function(Ft){ke.value="".concat("number"===ae.input?parseFloat(Ft)||0:Ft),qe(ke),ke.focus(),J.hideLoading()}).catch(function(Ft){Gi("Error in inputValue promise: ".concat(Ft)),ke.value="",qe(ke),ke.focus(),J.hideLoading()}))};var zl=function Ee(J){var ae=[];return J instanceof Map?J.forEach(function(ke,Ft){var Ri=ke;"object"===V(Ri)&&(Ri=Ee(Ri)),ae.push([Ft,Ri])}):Object.keys(J).forEach(function(ke){var Ft=J[ke];"object"===V(Ft)&&(Ft=Ee(Ft)),ae.push([ke,Ft])}),ae},Us=function(J,ae){return!!ae&&ae.toString()===J.toString()},Co=void 0,Vr=function(J,ae){var ke=me.innerParams.get(J);if(ke.input){var Ft=J.getInput(),Ri=function(J,ae){var ke=J.getInput();if(!ke)return null;switch(ae.input){case"checkbox":return Xa(ke);case"radio":return wo(ke);case"file":return Hs(ke);default:return ae.inputAutoTrim?ke.value.trim():ke.value}}(J,ke);ke.inputValidator?_u(J,Ri,ae):Ft&&!Ft.checkValidity()?(J.enableButtons(),J.showValidationMessage(ke.validationMessage||Ft.validationMessage)):"deny"===ae?lo(J,Ri):qa(J,Ri)}else Gi('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Nn(ae)))},_u=function(J,ae,ke){var Ft=me.innerParams.get(J);J.disableInput(),Promise.resolve().then(function(){return _n(Ft.inputValidator(ae,Ft.validationMessage))}).then(function(In){J.enableButtons(),J.enableInput(),In?J.showValidationMessage(In):"deny"===ke?lo(J,ae):qa(J,ae)})},lo=function(J,ae){var ke=me.innerParams.get(J||Co);ke.showLoaderOnDeny&&xo(Rr()),ke.preDeny?(J.isAwaitingPromise=!0,Promise.resolve().then(function(){return _n(ke.preDeny(ae,ke.validationMessage))}).then(function(Ri){!1===Ri?(J.hideLoading(),Lo(J)):J.close({isDenied:!0,value:typeof Ri>"u"?ae:Ri})}).catch(function(Ri){return oa(J||Co,Ri)})):J.close({isDenied:!0,value:ae})},Za=function(J,ae){J.close({isConfirmed:!0,value:ae})},oa=function(J,ae){J.rejectPromise(ae)},qa=function(J,ae){var ke=me.innerParams.get(J||Co);ke.showLoaderOnConfirm&&xo(),ke.preConfirm?(J.resetValidationMessage(),J.isAwaitingPromise=!0,Promise.resolve().then(function(){return _n(ke.preConfirm(ae,ke.validationMessage))}).then(function(Ri){Yt(or())||!1===Ri?(J.hideLoading(),Lo(J)):Za(J,typeof Ri>"u"?ae:Ri)}).catch(function(Ri){return oa(J||Co,Ri)})):Za(J,ae)};function zs(){var Ee=me.innerParams.get(this);if(Ee){var J=me.domCache.get(this);Xe(J.loader),ut()?Ee.icon&&qe(gn()):wa(J),un([J.popup,J.actions],ei.loading),J.popup.removeAttribute("aria-busy"),J.popup.removeAttribute("data-loading"),J.confirmButton.disabled=!1,J.denyButton.disabled=!1,J.cancelButton.disabled=!1}}var wa=function(J){var ae=J.popup.getElementsByClassName(J.loader.getAttribute("data-button-to-replace"));ae.length?qe(ae[0],"inline-block"):!Yt(Tn())&&!Yt(Rr())&&!Yt(ur())&&Xe(J.actions)};function aa(){var Ee=me.innerParams.get(this),J=me.domCache.get(this);return J?ui(J.popup,Ee.input):null}function xc(Ee,J,ae){var ke=me.domCache.get(Ee);J.forEach(function(Ft){ke[Ft].disabled=ae})}function Ws(Ee,J){var ae=Ti();if(ae&&Ee)if("radio"===Ee.type)for(var ke=ae.querySelectorAll('[name="'.concat(ei.radio,'"]')),Ft=0;Ft<ke.length;Ft++)ke[Ft].disabled=J;else Ee.disabled=J}function Vo(){xc(this,["confirmButton","denyButton","cancelButton"],!1)}function Go(){xc(this,["confirmButton","denyButton","cancelButton"],!0)}function Ka(){Ws(this.getInput(),!1)}function jo(){Ws(this.getInput(),!0)}function co(Ee){var J=me.domCache.get(this),ae=me.innerParams.get(this);zt(J.validationMessage,Ee),J.validationMessage.className=ei["validation-message"],ae.customClass&&ae.customClass.validationMessage&&di(J.validationMessage,ae.customClass.validationMessage),qe(J.validationMessage);var ke=this.getInput();ke&&(ke.setAttribute("aria-invalid","true"),ke.setAttribute("aria-describedby",ei["validation-message"]),Hi(ke),di(ke,ei.inputerror))}function wc(){var Ee=me.domCache.get(this);Ee.validationMessage&&Xe(Ee.validationMessage);var J=this.getInput();J&&(J.removeAttribute("aria-invalid"),J.removeAttribute("aria-describedby"),un(J,ei.inputerror))}var uo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},yu=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],la={},Ja=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],za=function(J){return Object.prototype.hasOwnProperty.call(uo,J)},lc=function(J){return-1!==yu.indexOf(J)},ys=function(J){return la[J]},Cc=function(J){za(J)||An('Unknown parameter "'.concat(J,'"'))},ml=function(J){Ja.includes(J)&&An('The parameter "'.concat(J,'" is incompatible with toasts'))},Oo=function(J){var ae=ys(J);ae&&fr(J,ae)};function Kr(Ee){var J=Ti(),ae=me.innerParams.get(this);if(J&&!Kt(J,ae.hideClass.popup)){var ke=gl(Ee),Ft=Object.assign({},ae,ke);hs(this,Ft),me.innerParams.set(this,Ft),Object.defineProperties(this,{params:{value:Object.assign({},this.params,Ee),writable:!1,enumerable:!0}})}else An("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var gl=function(J){var ae={};return Object.keys(J).forEach(function(ke){lc(ke)?ae[ke]=J[ke]:An("Invalid parameter to update: ".concat(ke))}),ae};function cc(){var Ee=me.domCache.get(this),J=me.innerParams.get(this);J?(Ee.popup&&Fi.swalCloseEventFinishedCallback&&(Fi.swalCloseEventFinishedCallback(),delete Fi.swalCloseEventFinishedCallback),"function"==typeof J.didDestroy&&J.didDestroy(),Eo(this)):Yc(this)}var Eo=function(J){Yc(J),delete J.params,delete Fi.keydownHandler,delete Fi.keydownTarget,delete Fi.currentInstance},Yc=function(J){J.isAwaitingPromise?(Fa(me,J),J.isAwaitingPromise=!0):(Fa(js,J),Fa(me,J),delete J.isAwaitingPromise,delete J.disableButtons,delete J.enableButtons,delete J.getInput,delete J.disableInput,delete J.enableInput,delete J.hideLoading,delete J.disableLoading,delete J.showValidationMessage,delete J.resetValidationMessage,delete J.close,delete J.closePopup,delete J.closeModal,delete J.closeToast,delete J.rejectPromise,delete J.update,delete J._destroy)},Fa=function(J,ae){for(var ke in J)J[ke].delete(ae)},bu=Object.freeze({__proto__:null,_destroy:cc,close:sa,closeModal:sa,closePopup:sa,closeToast:sa,disableButtons:Go,disableInput:jo,disableLoading:zs,enableButtons:Vo,enableInput:Ka,getInput:aa,handleAwaitingPromise:Lo,hideLoading:zs,rejectPromise:Ho,resetValidationMessage:wc,showValidationMessage:co,update:Kr}),xu=function(J,ae,ke){ae.popup.onclick=function(){J&&(Uo(J)||J.timer||J.input)||ke(ao.close)}},Uo=function(J){return!!(J.showConfirmButton||J.showDenyButton||J.showCancelButton||J.showCloseButton)},ca=!1,Wo=function(J){J.popup.onmousedown=function(){J.container.onmouseup=function(ae){J.container.onmouseup=function(){},ae.target===J.container&&(ca=!0)}}},vl=function(J){J.container.onmousedown=function(){J.popup.onmouseup=function(ae){J.popup.onmouseup=function(){},(ae.target===J.popup||ae.target instanceof HTMLElement&&J.popup.contains(ae.target))&&(ca=!0)}}},_l=function(J,ae,ke){ae.container.onclick=function(Ft){ca?ca=!1:Ft.target===ae.container&&wn(J.allowOutsideClick)&&ke(ao.backdrop)}},Ca=function(J){return J instanceof Element||function(J){return"object"===V(J)&&J.jquery}(J)};var Po=function(){if(Fi.timeout)return function(){var J=Cr();if(J){var ae=parseInt(window.getComputedStyle(J).width);J.style.removeProperty("transition"),J.style.width="100%";var ke=parseInt(window.getComputedStyle(J).width);J.style.width="".concat(ae/ke*100,"%")}}(),Fi.timeout.stop()},Ec=function(){if(Fi.timeout){var J=Fi.timeout.start();return rt(J),J}},Qa=!1,el={};var To=function(J){for(var ae=J.target;ae&&ae!==document;ae=ae.parentNode)for(var ke in el){var Ft=ae.getAttribute(ke);if(Ft)return void el[ke].fire({template:Ft})}},tl=Object.freeze({__proto__:null,argsToParams:function(J){var ae={};return"object"!==V(J[0])||Ca(J[0])?["title","html","icon"].forEach(function(ke,Ft){var Ri=J[Ft];"string"==typeof Ri||Ca(Ri)?ae[ke]=Ri:void 0!==Ri&&Gi("Unexpected type of ".concat(ke,'! Expected "string" or "Element", got ').concat(V(Ri)))}):Object.assign(ae,J[0]),ae},bindClickHandler:function Xo(){el[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Qa||(document.body.addEventListener("click",To),Qa=!0)},clickCancel:function(){var J;return null===(J=ur())||void 0===J?void 0:J.click()},clickConfirm:rc,clickDeny:function(){var J;return null===(J=Rr())||void 0===J?void 0:J.click()},enableLoading:xo,fire:function So(){for(var J=arguments.length,ae=new Array(J),ke=0;ke<J;ke++)ae[ke]=arguments[ke];return function Rt(Ee,J,ae){if(k())return Reflect.construct.apply(null,arguments);var ke=[null];ke.push.apply(ke,J);var Ft=new(Ee.bind.apply(Ee,ke));return ae&&Je(Ft,ae.prototype),Ft}(this,ae)},getActions:gr,getCancelButton:ur,getCloseButton:$r,getConfirmButton:Tn,getContainer:ji,getDenyButton:Rr,getFocusableElements:Ie,getFooter:hr,getHtmlContainer:Ir,getIcon:gn,getIconContent:function(){return tn(ei["icon-content"])},getImage:wr,getInputLabel:function(){return tn(ei["input-label"])},getLoader:er,getPopup:Ti,getProgressSteps:pr,getTimerLeft:function(){return Fi.timeout&&Fi.timeout.getTimerLeft()},getTimerProgressBar:Cr,getTitle:Dr,getValidationMessage:or,increaseTimer:function(J){if(Fi.timeout){var ae=Fi.timeout.increase(J);return rt(ae,!0),ae}},isDeprecatedParameter:ys,isLoading:function(){var J=Ti();return!!J&&J.hasAttribute("data-loading")},isTimerRunning:function(){return!(!Fi.timeout||!Fi.timeout.isRunning())},isUpdatableParameter:lc,isValidParameter:za,isVisible:function(){return Yt(Ti())},mixin:function Ba(Ee){var J=function(ae){function ke(){return Oe(this,ke),Yr(this,ke,arguments)}return function Be(Ee,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function");Ee.prototype=Object.create(J&&J.prototype,{constructor:{value:Ee,writable:!0,configurable:!0}}),Object.defineProperty(Ee,"prototype",{writable:!1}),J&&Je(Ee,J)}(ke,ae),De(ke,[{key:"_main",value:function(Ri,In){return ot(Ge(ke.prototype),"_main",this).call(this,Ri,Object.assign({},Ee,In))}}]),ke}(this);return J},resumeTimer:Ec,showLoading:xo,stopTimer:Po,toggleTimer:function(){var J=Fi.timeout;return J&&(J.running?Po():Ec())}}),ua=function(){function Ee(J,ae){Oe(this,Ee),this.callback=J,this.remaining=ae,this.running=!1,this.start()}return De(Ee,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(ae){var ke=this.running;return ke&&this.stop(),this.remaining+=ae,ke&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),Ee}(),Ro=["swal-title","swal-html","swal-footer"],Sa=function(J){var ae={};return Array.from(J.querySelectorAll("swal-param")).forEach(function(Ft){m(Ft,["name","value"]);var Ri=Ft.getAttribute("name"),In=Ft.getAttribute("value");ae[Ri]="boolean"==typeof uo[Ri]?"false"!==In:"object"===V(uo[Ri])?JSON.parse(In):In}),ae},Na=function(J){var ae={};return Array.from(J.querySelectorAll("swal-function-param")).forEach(function(Ft){var Ri=Ft.getAttribute("name"),In=Ft.getAttribute("value");ae[Ri]=new Function("return ".concat(In))()}),ae},Sc=function(J){var ae={};return Array.from(J.querySelectorAll("swal-button")).forEach(function(Ft){m(Ft,["type","color","aria-label"]);var Ri=Ft.getAttribute("type");ae["".concat(Ri,"ButtonText")]=Ft.innerHTML,ae["show".concat(Nn(Ri),"Button")]=!0,Ft.hasAttribute("color")&&(ae["".concat(Ri,"ButtonColor")]=Ft.getAttribute("color")),Ft.hasAttribute("aria-label")&&(ae["".concat(Ri,"ButtonAriaLabel")]=Ft.getAttribute("aria-label"))}),ae},xl=function(J){var ae={},ke=J.querySelector("swal-image");return ke&&(m(ke,["src","width","height","alt"]),ke.hasAttribute("src")&&(ae.imageUrl=ke.getAttribute("src")),ke.hasAttribute("width")&&(ae.imageWidth=ke.getAttribute("width")),ke.hasAttribute("height")&&(ae.imageHeight=ke.getAttribute("height")),ke.hasAttribute("alt")&&(ae.imageAlt=ke.getAttribute("alt"))),ae},Tc=function(J){var ae={},ke=J.querySelector("swal-icon");return ke&&(m(ke,["type","color"]),ke.hasAttribute("type")&&(ae.icon=ke.getAttribute("type")),ke.hasAttribute("color")&&(ae.iconColor=ke.getAttribute("color")),ae.iconHtml=ke.innerHTML),ae},Ya=function(J){var ae={},ke=J.querySelector("swal-input");ke&&(m(ke,["type","label","placeholder","value"]),ae.input=ke.getAttribute("type")||"text",ke.hasAttribute("label")&&(ae.inputLabel=ke.getAttribute("label")),ke.hasAttribute("placeholder")&&(ae.inputPlaceholder=ke.getAttribute("placeholder")),ke.hasAttribute("value")&&(ae.inputValue=ke.getAttribute("value")));var Ft=Array.from(J.querySelectorAll("swal-input-option"));return Ft.length&&(ae.inputOptions={},Ft.forEach(function(Ri){m(Ri,["value"]);var In=Ri.getAttribute("value");ae.inputOptions[In]=Ri.innerHTML})),ae},bs=function(J,ae){var ke={};for(var Ft in ae){var Ri=ae[Ft],In=J.querySelector(Ri);In&&(m(In,[]),ke[Ri.replace(/^swal-/,"")]=In.innerHTML.trim())}return ke},vn=function(J){var ae=Ro.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(J.children).forEach(function(ke){var Ft=ke.tagName.toLowerCase();ae.includes(Ft)||An("Unrecognized element <".concat(Ft,">"))})},m=function(J,ae){Array.from(J.attributes).forEach(function(ke){-1===ae.indexOf(ke.name)&&An(['Unrecognized attribute "'.concat(ke.name,'" on <').concat(J.tagName.toLowerCase(),">."),"".concat(ae.length?"Allowed attributes are: ".concat(ae.join(", ")):"To set the value, use HTML within the element.")])})},G=function(J){var ae=ji(),ke=Ti();"function"==typeof J.willOpen&&J.willOpen(ke);var Ri=window.getComputedStyle(document.body).overflowY;Vt(ae,ke,J),setTimeout(function(){_e(ae,ke)},10),Ne()&&(Ue(ae,J.scrollbarPadding,Ri),Array.from(document.body.children).forEach(function(ae){ae===ji()||ae.contains(ji())||(ae.hasAttribute("aria-hidden")&&ae.setAttribute("data-previous-aria-hidden",ae.getAttribute("aria-hidden")||""),ae.setAttribute("aria-hidden","true"))})),!ut()&&!Fi.previousActiveElement&&(Fi.previousActiveElement=document.activeElement),"function"==typeof J.didOpen&&setTimeout(function(){return J.didOpen(ke)}),un(ae,ei["no-transition"])},re=function Ee(J){var ae=Ti();if(J.target===ae&&M){var ke=ji();ae.removeEventListener(M,Ee),ke.style.overflowY="auto"}},_e=function(J,ae){M&&Pi(ae)?(J.style.overflowY="hidden",ae.addEventListener(M,re)):J.style.overflowY="auto"},Ue=function(J,ae,ke){(function(){if(hl&&!Kt(document.body,ei.iosfix)){var J=document.body.scrollTop;document.body.style.top="".concat(-1*J,"px"),di(document.body,ei.iosfix),$a()}})(),ae&&"hidden"!==ke&&Zu(ke),setTimeout(function(){J.scrollTop=0})},Vt=function(J,ae,ke){di(J,ke.showClass.backdrop),ke.animation?(ae.style.setProperty("opacity","0","important"),qe(ae,"grid"),setTimeout(function(){di(ae,ke.showClass.popup),ae.style.removeProperty("opacity")},10)):qe(ae,"grid"),di([document.documentElement,document.body],ei.shown),ke.heightAuto&&ke.backdrop&&!ke.toast&&di([document.documentElement,document.body],ei["height-auto"])},oi={email:function(J,ae){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(J)?Promise.resolve():Promise.resolve(ae||"Invalid email address")},url:function(J,ae){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(J)?Promise.resolve():Promise.resolve(ae||"Invalid URL")}};function Dn(Ee){(function ki(Ee){Ee.inputValidator||("email"===Ee.input&&(Ee.inputValidator=oi.email),"url"===Ee.input&&(Ee.inputValidator=oi.url))})(Ee),Ee.showLoaderOnConfirm&&!Ee.preConfirm&&An("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function sn(Ee){(!Ee.target||"string"==typeof Ee.target&&!document.querySelector(Ee.target)||"string"!=typeof Ee.target&&!Ee.target.appendChild)&&(An('Target parameter is not valid, defaulting to "body"'),Ee.target="body")}(Ee),"string"==typeof Ee.title&&(Ee.title=Ee.title.split("\n").join("<br />")),h(Ee)}var Bn,mr=new WeakMap,Br=function(){function Ee(){if(Oe(this,Ee),_i(this,mr,{writable:!0,value:void 0}),!(typeof window>"u")){Bn=this;for(var J=arguments.length,ae=new Array(J),ke=0;ke<J;ke++)ae[ke]=arguments[ke];var Ft=Object.freeze(this.constructor.argsToParams(ae));this.params=Ft,this.isAwaitingPromise=!1,ht(this,mr,this._main(Bn.params))}}return De(Ee,[{key:"_main",value:function(ae){var ke=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(J){for(var ae in!1===J.backdrop&&J.allowOutsideClick&&An('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),J)Cc(ae),J.toast&&ml(ae),Oo(ae)}(Object.assign({},ke,ae)),Fi.currentInstance){var Ft=js.swalPromiseResolve.get(Fi.currentInstance),Ri=Fi.currentInstance.isAwaitingPromise;Fi.currentInstance._destroy(),Ri||Ft({isDismissed:!0}),Ne()&&na()}Fi.currentInstance=Bn;var In=io(ae,ke);Dn(In),Object.freeze(In),Fi.timeout&&(Fi.timeout.stop(),delete Fi.timeout),clearTimeout(Fi.restoreFocusTimeout);var Ar=$s(Bn);return hs(Bn,In),me.innerParams.set(Bn,In),Ys(Bn,Ar,In)}},{key:"then",value:function(ae){return jt(this,mr).then(ae)}},{key:"finally",value:function(ae){return jt(this,mr).finally(ae)}}]),Ee}(),Ys=function(J,ae,ke){return new Promise(function(Ft,Ri){var In=function(Fr){J.close({isDismissed:!0,dismiss:Fr})};js.swalPromiseResolve.set(J,Ft),js.swalPromiseReject.set(J,Ri),ae.confirmButton.onclick=function(){!function(J){var ae=me.innerParams.get(J);J.disableButtons(),ae.input?Vr(J,"confirm"):qa(J,!0)}(J)},ae.denyButton.onclick=function(){!function(J){var ae=me.innerParams.get(J);J.disableButtons(),ae.returnInputValueOnDeny?Vr(J,"deny"):lo(J,!1)}(J)},ae.cancelButton.onclick=function(){!function(J,ae){J.disableButtons(),ae(ao.cancel)}(J,In)},ae.closeButton.onclick=function(){In(ao.close)},function(J,ae,ke){J.toast?xu(J,ae,ke):(Wo(ae),vl(ae),_l(J,ae,ke))}(ke,ae,In),function(J,ae,ke){dl(J),ae.toast||(J.keydownHandler=function(Ft){return gu(ae,Ft,ke)},J.keydownTarget=ae.keydownListenerCapture?window:Ti(),J.keydownListenerCapture=ae.keydownListenerCapture,J.keydownTarget.addEventListener("keydown",J.keydownHandler,{capture:J.keydownListenerCapture}),J.keydownHandlerAdded=!0)}(Fi,ke,In),function(J,ae){"select"===ae.input||"radio"===ae.input?Or(J,ae):["text","email","number","tel","textarea"].some(function(ke){return ke===ae.input})&&(en(ae.inputValue)||Xi(ae.inputValue))&&(xo(Tn()),fl(J,ae))}(J,ke),G(ke),Ta(Fi,ke,In),Ha(ae,ke),setTimeout(function(){ae.container.scrollTop=0})})},io=function(J,ae){var ke=function(J){var ae="string"==typeof J.template?document.querySelector(J.template):J.template;if(!ae)return{};var ke=ae.content;return vn(ke),Object.assign(Sa(ke),Na(ke),Sc(ke),xl(ke),Tc(ke),Ya(ke),bs(ke,Ro))}(J),Ft=Object.assign({},uo,ae,ke,J);return Ft.showClass=Object.assign({},uo.showClass,Ft.showClass),Ft.hideClass=Object.assign({},uo.hideClass,Ft.hideClass),!1===Ft.animation&&(Ft.showClass={backdrop:"swal2-noanimation"},Ft.hideClass={}),Ft},$s=function(J){var ae={popup:Ti(),container:ji(),actions:gr(),confirmButton:Tn(),denyButton:Rr(),cancelButton:ur(),loader:er(),closeButton:$r(),validationMessage:or(),progressSteps:pr()};return me.domCache.set(J,ae),ae},Ta=function(J,ae,ke){var Ft=Cr();Xe(Ft),ae.timer&&(J.timeout=new ua(function(){ke("timer"),delete J.timeout},ae.timer),ae.timerProgressBar&&(qe(Ft),pt(Ft,ae,"timerProgressBar"),setTimeout(function(){J.timeout&&J.timeout.running&&rt(ae.timer)})))},Ha=function(J,ae){if(!ae.toast){if(!wn(ae.allowEnterKey))return void kc();po(J,ae)||ia(-1,1)}},po=function(J,ae){return ae.focusDeny&&Yt(J.denyButton)?(J.denyButton.focus(),!0):ae.focusCancel&&Yt(J.cancelButton)?(J.cancelButton.focus(),!0):!(!ae.focusConfirm||!Yt(J.confirmButton)||(J.confirmButton.focus(),0))},kc=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Bl=new Date,Zo=localStorage.getItem("swal-initiation");Zo?(Bl.getTime()-Date.parse(Zo))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var Ee=document.createElement("audio");Ee.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",Ee.loop=!0,document.body.appendChild(Ee),setTimeout(function(){Ee.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Bl))}Br.prototype.disableButtons=Go,Br.prototype.enableButtons=Vo,Br.prototype.getInput=aa,Br.prototype.disableInput=jo,Br.prototype.enableInput=Ka,Br.prototype.hideLoading=zs,Br.prototype.disableLoading=zs,Br.prototype.showValidationMessage=co,Br.prototype.resetValidationMessage=wc,Br.prototype.close=sa,Br.prototype.closePopup=sa,Br.prototype.closeModal=sa,Br.prototype.closeToast=sa,Br.prototype.rejectPromise=Ho,Br.prototype.update=Kr,Br.prototype._destroy=cc,Object.assign(Br,tl),Object.keys(bu).forEach(function(Ee){Br[Ee]=function(){var J;return Bn&&Bn[Ee]?(J=Bn)[Ee].apply(J,arguments):null}}),Br.DismissReason=ao,Br.version="11.10.6";var Nl=Br;return Nl.default=Nl,Nl}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Yr,Rt){var k=Yr.createElement("style");if(Yr.getElementsByTagName("head")[0].appendChild(k),k.styleSheet)k.styleSheet.disabled||(k.styleSheet.cssText=Rt);else try{k.innerHTML=Rt}catch{k.innerText=Rt}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},4884:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{UT:()=>Yt,gb:()=>Pi});var k=Rt(4496),pn=Rt(6504),Fe=Rt(3616),t=Rt(112),V=Rt(5448),Oe=Rt(560),Me=Rt(7773),Be=Rt(3120);var Je=Rt(5568),nt=Rt(9212),mt=Rt(4680),Pt=Rt(6684),ot=Rt(4704),vt=Rt(4096),wt=Rt(1472),ai=Rt(5657),We=Rt(800),ni=Rt(3412),li=Rt(1368);const at=["content"],si=["scroll"],Xt=["padding"],jt=rt=>({searchTerm:rt});function ht(rt,yt){if(1&rt&&(k.I0R(0,"div",6),k.C_f(1,7),k.C$Y()),2&rt){const fe=k.GaO();k.yG2(),k.E7m("ngTemplateOutlet",fe.headerTemplate)("ngTemplateOutletContext",k.S45(2,jt,fe.filterValue))}}function qt(rt,yt){if(1&rt&&(k.I0R(0,"div",8),k.C_f(1,7),k.C$Y()),2&rt){const fe=k.GaO();k.yG2(),k.E7m("ngTemplateOutlet",fe.footerTemplate)("ngTemplateOutletContext",k.S45(2,jt,fe.filterValue))}}const ri=["*"],mi=["searchInput"],Vi=["clearButton"];function _i(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"span",15),k.qCj("click",function(){k.usT(fe);const Tt=k.GaO().$implicit,Pe=k.GaO(2);return k.CGJ(Pe.unselect(Tt))}),k.OEk(1,"\xd7"),k.C$Y(),k.wR5(2,"span",16)}if(2&rt){const fe=k.GaO().$implicit,it=k.GaO(2);k.yG2(2),k.E7m("ngItemLabel",fe.label)("escape",it.escapeHTML)}}function Ci(rt,yt){}const Fi=(rt,yt,fe)=>({item:rt,clear:yt,label:fe});function qi(rt,yt){if(1&rt&&(k.I0R(0,"div",12),k.yuY(1,_i,3,2,"ng-template",null,13,k.gJz)(3,Ci,0,0,"ng-template",14),k.C$Y()),2&rt){const fe=yt.$implicit,it=k.Gew(2),Tt=k.GaO(2);k.eAK("ng-value-disabled",fe.disabled),k.yG2(3),k.E7m("ngTemplateOutlet",Tt.labelTemplate||it)("ngTemplateOutletContext",k.uAc(4,Fi,fe.value,Tt.clearItem,fe.label))}}function xn(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,qi,4,8,"div",11),k.k70()),2&rt){const fe=k.GaO();k.yG2(),k.E7m("ngForOf",fe.selectedItems)("ngForTrackBy",fe.trackByOption)}}function mn(rt,yt){}const Vn=(rt,yt)=>({items:rt,clear:yt});function ei(rt,yt){if(1&rt&&k.yuY(0,mn,0,0,"ng-template",14),2&rt){const fe=k.GaO();k.E7m("ngTemplateOutlet",fe.multiLabelTemplate)("ngTemplateOutletContext",k.IBC(2,Vn,fe.selectedValues,fe.clearItem))}}function Bi(rt,yt){1&rt&&k.wR5(0,"div",19)}function on(rt,yt){}function Wn(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,Bi,1,0,"ng-template",null,17,k.gJz)(3,on,0,0,"ng-template",18),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO();k.yG2(3),k.E7m("ngTemplateOutlet",it.loadingSpinnerTemplate||fe)}}function Nn(rt,yt){if(1&rt&&(k.I0R(0,"span",20,21)(2,"span",22),k.OEk(3,"\xd7"),k.C$Y()()),2&rt){const fe=k.GaO();k._6D("title",fe.clearAllText)}}function An(rt,yt){if(1&rt&&k.wR5(0,"span",28),2&rt){const fe=k.GaO().$implicit,it=k.GaO(2);k.E7m("ngItemLabel",fe.label)("escape",it.escapeHTML)}}function Gi(rt,yt){}const kr=(rt,yt,fe,it)=>({item:rt,item$:yt,index:fe,searchTerm:it});function sr(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"div",26),k.qCj("click",function(){const Pe=k.usT(fe).$implicit,Lt=k.GaO(2);return k.CGJ(Lt.toggleItem(Pe))})("mouseover",function(){const Pe=k.usT(fe).$implicit,Lt=k.GaO(2);return k.CGJ(Lt.onItemHover(Pe))}),k.yuY(1,An,1,2,"ng-template",null,27,k.gJz)(3,Gi,0,0,"ng-template",14),k.C$Y()}if(2&rt){const fe=yt.$implicit,it=k.Gew(2),Tt=k.GaO(2);k.eAK("ng-option-disabled",fe.disabled)("ng-option-selected",fe.selected)("ng-optgroup",fe.children)("ng-option",!fe.children)("ng-option-child",!!fe.parent)("ng-option-marked",fe===Tt.itemsList.markedItem),k.e48("role",fe.children?"group":"option")("aria-selected",fe.selected)("id",null==fe?null:fe.htmlId),k.yG2(3),k.E7m("ngTemplateOutlet",fe.children?Tt.optgroupTemplate||it:Tt.optionTemplate||it)("ngTemplateOutletContext",k.WuN(17,kr,fe.value,fe,fe.index,Tt.searchTerm))}}function fr(rt,yt){if(1&rt&&(k.I0R(0,"span")(1,"span",31),k.OEk(2),k.C$Y(),k.OEk(3),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(2),k.cNF(fe.addTagText),k.yG2(),k.oRS('"',fe.searchTerm,'"')}}function wn(rt,yt){}function en(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"div",29),k.qCj("mouseover",function(){k.usT(fe);const Tt=k.GaO(2);return k.CGJ(Tt.itemsList.unmarkItem())})("click",function(){k.usT(fe);const Tt=k.GaO(2);return k.CGJ(Tt.selectTag())}),k.yuY(1,fr,4,2,"ng-template",null,30,k.gJz)(3,wn,0,0,"ng-template",14),k.C$Y()}if(2&rt){const fe=k.Gew(2),it=k.GaO(2);k.eAK("ng-option-marked",!it.itemsList.markedItem),k.yG2(3),k.E7m("ngTemplateOutlet",it.tagTemplate||fe)("ngTemplateOutletContext",k.S45(4,jt,it.searchTerm))}}function _n(rt,yt){if(1&rt&&(k.I0R(0,"div",33),k.OEk(1),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(),k.cNF(fe.notFoundText)}}function Xi(rt,yt){}function ji(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,_n,2,1,"ng-template",null,32,k.gJz)(3,Xi,0,0,"ng-template",14),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO(2);k.yG2(3),k.E7m("ngTemplateOutlet",it.notFoundTemplate||fe)("ngTemplateOutletContext",k.S45(2,jt,it.searchTerm))}}function Gn(rt,yt){if(1&rt&&(k.I0R(0,"div",33),k.OEk(1),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(),k.cNF(fe.typeToSearchText)}}function tn(rt,yt){}function Ti(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,Gn,2,1,"ng-template",null,34,k.gJz)(3,tn,0,0,"ng-template",18),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO(2);k.yG2(3),k.E7m("ngTemplateOutlet",it.typeToSearchTemplate||fe)}}function gn(rt,yt){if(1&rt&&(k.I0R(0,"div",33),k.OEk(1),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(),k.cNF(fe.loadingText)}}function Pn(rt,yt){}function Dr(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,gn,2,1,"ng-template",null,35,k.gJz)(3,Pn,0,0,"ng-template",14),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO(2);k.yG2(3),k.E7m("ngTemplateOutlet",it.loadingTextTemplate||fe)("ngTemplateOutletContext",k.S45(2,jt,it.searchTerm))}}function Ir(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"ng-dropdown-panel",23),k.qCj("update",function(Tt){k.usT(fe);const Pe=k.GaO();return k.CGJ(Pe.viewPortItems=Tt)})("scroll",function(Tt){k.usT(fe);const Pe=k.GaO();return k.CGJ(Pe.scroll.emit(Tt))})("scrollToEnd",function(Tt){k.usT(fe);const Pe=k.GaO();return k.CGJ(Pe.scrollToEnd.emit(Tt))})("outsideClick",function(){k.usT(fe);const Tt=k.GaO();return k.CGJ(Tt.close())}),k.SAx(1),k.yuY(2,sr,4,22,"div",24)(3,en,4,6,"div",25),k.k70(),k.yuY(4,ji,4,4,"ng-container",3)(5,Ti,4,1,"ng-container",3)(6,Dr,4,4,"ng-container",3),k.C$Y()}if(2&rt){const fe=k.GaO();k.eAK("ng-select-multiple",fe.multiple),k.E7m("virtualScroll",fe.virtualScroll)("bufferAmount",fe.bufferAmount)("appendTo",fe.appendTo)("position",fe.dropdownPosition)("headerTemplate",fe.headerTemplate)("footerTemplate",fe.footerTemplate)("filterValue",fe.searchTerm)("items",fe.itemsList.filteredItems)("markedItem",fe.itemsList.markedItem)("ngClass",fe.appendTo?fe.classes:null)("id",fe.dropdownId),k.yG2(2),k.E7m("ngForOf",fe.viewPortItems)("ngForTrackBy",fe.trackByOption),k.yG2(),k.E7m("ngIf",fe.showAddTag),k.yG2(),k.E7m("ngIf",fe.showNoItemsFound()),k.yG2(),k.E7m("ngIf",fe.showTypeToSearch()),k.yG2(),k.E7m("ngIf",fe.loading&&0===fe.itemsList.filteredItems.length)}}const wr=/[&<>"']/g,pr=RegExp(wr.source),or={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ur(rt){return null!=rt}function Rr(rt){return"object"==typeof rt&&ur(rt)}function er(rt){return rt instanceof Function}let gr=(()=>{class rt{constructor(fe){this.element=fe,this.escape=!0}ngOnChanges(fe){this.element.nativeElement.innerHTML=this.escape?function Tn(rt){return rt&&pr.test(rt)?rt.replace(wr,yt=>or[yt]):rt}(this.ngItemLabel):this.ngItemLabel}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.GMv))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[k.SYr]})}return rt})(),hr=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-option-tmp",""]]})}return rt})(),Cr=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-optgroup-tmp",""]]})}return rt})(),$r=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-label-tmp",""]]})}return rt})(),Ct=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-multi-label-tmp",""]]})}return rt})(),Ie=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-header-tmp",""]]})}return rt})(),Ne=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-footer-tmp",""]]})}return rt})(),ut=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-notfound-tmp",""]]})}return rt})(),lt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-typetosearch-tmp",""]]})}return rt})(),zt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-loadingtext-tmp",""]]})}return rt})(),Kt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-tag-tmp",""]]})}return rt})(),Jt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-loadingspinner-tmp",""]]})}return rt})();function pt(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const ui={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function Hi(rt){return rt.replace(/[^\u0000-\u007E]/g,fe=>ui[fe]||fe)}class Ui{constructor(yt,fe){this._ngSelect=yt,this._selectionModel=fe,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let yt=this.selectedItems.length-1;for(;yt>=0;yt--){const fe=this.selectedItems[yt];if(!fe.disabled)return fe}return null}setItems(yt){this._items=yt.map((fe,it)=>this.mapItem(fe,it)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(yt){if(yt.selected||this.maxItemsSelected)return;const fe=this._ngSelect.multiple;fe||this.clearSelected(),this._selectionModel.select(yt,fe,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(yt)}unselect(yt){yt.selected&&(this._selectionModel.unselect(yt,this._ngSelect.multiple),this._ngSelect.hideSelected&&ur(yt.index)&&this._ngSelect.multiple&&this._showSelected(yt))}findItem(yt){let fe;return fe=this._ngSelect.compareWith?it=>this._ngSelect.compareWith(it.value,yt):this._ngSelect.bindValue?it=>!it.children&&this.resolveNested(it.value,this._ngSelect.bindValue)===yt:it=>it.value===yt||!it.children&&it.label&&it.label===this.resolveNested(yt,this._ngSelect.bindLabel),this._items.find(it=>fe(it))}addItem(yt){const fe=this.mapItem(yt,this._items.length);return this._items.push(fe),this._filteredItems.push(fe),fe}clearSelected(yt=!1){this._selectionModel.clear(yt),this._items.forEach(fe=>{fe.selected=yt&&fe.selected&&fe.disabled,fe.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(yt){return yt=Hi(yt).toLocaleLowerCase(),this.filteredItems.find(fe=>Hi(fe.label).toLocaleLowerCase().substr(0,yt.length)===yt)}filter(yt){if(!yt)return void this.resetFilteredItems();this._filteredItems=[],yt=this._ngSelect.searchFn?yt:Hi(yt).toLocaleLowerCase();const fe=this._ngSelect.searchFn||this._defaultSearchFn,it=this._ngSelect.hideSelected;for(const Tt of Array.from(this._groups.keys())){const Pe=[];for(const Lt of this._groups.get(Tt))it&&(Lt.parent&&Lt.parent.selected||Lt.selected)||fe(yt,this._ngSelect.searchFn?Lt.value:Lt)&&Pe.push(Lt);if(Pe.length>0){const[Lt]=Pe.slice(-1);if(Lt.parent){const le=this._items.find(o=>o===Lt.parent);this._filteredItems.push(le)}this._filteredItems.push(...Pe)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(yt=>!yt.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(yt){this._markedIndex=this._filteredItems.indexOf(yt)}markSelectedOrDefault(yt){if(0===this._filteredItems.length)return;const fe=this._getLastMarkedIndex();this._markedIndex=fe>-1?fe:yt?this.filteredItems.findIndex(it=>!it.disabled):-1}resolveNested(yt,fe){if(!Rr(yt))return yt;if(-1===fe.indexOf("."))return yt[fe];{const it=fe.split(".");let Tt=yt;for(let Pe=0,Lt=it.length;Pe<Lt;++Pe){if(null==Tt)return null;Tt=Tt[it[Pe]]}return Tt}}mapItem(yt,fe){const it=ur(yt.$ngOptionLabel)?yt.$ngOptionLabel:this.resolveNested(yt,this._ngSelect.bindLabel),Tt=ur(yt.$ngOptionValue)?yt.$ngOptionValue:yt;return{index:fe,label:ur(it)?it.toString():"",value:Tt,disabled:yt.disabled,htmlId:`${this._ngSelect.dropdownId}-${fe}`}}mapSelectedItems(){const yt=this._ngSelect.multiple;for(const fe of this.selectedItems){const it=this._ngSelect.bindValue?this.resolveNested(fe.value,this._ngSelect.bindValue):fe.value,Tt=ur(it)?this.findItem(it):null;this._selectionModel.unselect(fe,yt),this._selectionModel.select(Tt||fe,yt,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(fe=>-1===this.selectedItems.indexOf(fe)))}_showSelected(yt){if(this._filteredItems.push(yt),yt.parent){const fe=yt.parent;this._filteredItems.find(Tt=>Tt===fe)||this._filteredItems.push(fe)}else if(yt.children)for(const fe of yt.children)fe.selected=!1,this._filteredItems.push(fe);this._filteredItems=[...this._filteredItems.sort((fe,it)=>fe.index-it.index)]}_hideSelected(yt){this._filteredItems=this._filteredItems.filter(fe=>fe!==yt),yt.parent?yt.parent.children.every(it=>it.selected)&&(this._filteredItems=this._filteredItems.filter(it=>it!==yt.parent)):yt.children&&(this._filteredItems=this.filteredItems.filter(fe=>fe.parent!==yt))}_defaultSearchFn(yt,fe){return Hi(fe.label).toLocaleLowerCase().indexOf(yt)>-1}_getNextItemIndex(yt){return yt>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(yt){0===this._filteredItems.length||this._filteredItems.every(fe=>fe.disabled)||(this._markedIndex=this._getNextItemIndex(yt),this.markedItem.disabled&&this._stepToItem(yt))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const yt=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&yt<0?-1:Math.max(this.markedIndex,yt)}_groupBy(yt,fe){const it=new Map;if(0===yt.length)return it;if(Array.isArray(yt[0].value[fe])){for(const Lt of yt){const le=(Lt.value[fe]||[]).map((o,c)=>this.mapItem(o,c));it.set(Lt,le)}return it}const Tt=er(this._ngSelect.groupBy),Pe=Lt=>{const le=Tt?fe(Lt.value):Lt.value[fe];return ur(le)?le:void 0};for(const Lt of yt){const le=Pe(Lt),o=it.get(le);o?o.push(Lt):it.set(le,[Lt])}return it}_flatten(yt){const fe=er(this._ngSelect.groupBy),it=[];for(const Tt of Array.from(yt.keys())){let Pe=it.length;if(void 0===Tt){const _=yt.get(void 0)||[];it.push(..._.map(b=>(b.index=Pe++,b)));continue}const Lt=Rr(Tt),le={label:Lt?"":String(Tt),children:void 0,parent:null,index:Pe++,disabled:!this._ngSelect.selectableGroup,htmlId:pt()},o=fe?this._ngSelect.bindLabel:this._ngSelect.groupBy,c=this._ngSelect.groupValue||(()=>Lt?Tt.value:{[o]:Tt}),h=yt.get(Tt).map(_=>(_.parent=le,_.children=void 0,_.index=Pe++,_));le.children=h,le.value=c(Tt,h.map(_=>_.value)),it.push(le),it.push(...h)}return it}}var di=function(rt){return rt[rt.Tab=9]="Tab",rt[rt.Enter=13]="Enter",rt[rt.Esc=27]="Esc",rt[rt.Space=32]="Space",rt[rt.ArrowUp=38]="ArrowUp",rt[rt.ArrowDown=40]="ArrowDown",rt[rt.Backspace=8]="Backspace",rt}(di||{});let un=(()=>{class rt{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(fe,it,Tt){const Pe=this._dimensions,Lt=Pe.itemHeight*it,o=Math.max(0,fe)/Lt*it;let c=Math.min(it,Math.ceil(o)+(Pe.itemsPerViewport+1));const _=Math.max(0,c-Pe.itemsPerViewport);let b=Math.min(_,Math.floor(o)),x=Pe.itemHeight*Math.ceil(b)-Pe.itemHeight*Math.min(b,Tt);return x=isNaN(x)?0:x,b=isNaN(b)?-1:b,c=isNaN(c)?-1:c,b-=Tt,b=Math.max(0,b),c+=Tt,c=Math.min(it,c),{topPadding:x,scrollHeight:Lt,start:b,end:c}}setDimensions(fe,it){const Tt=Math.max(1,Math.floor(it/fe));this._dimensions={itemHeight:fe,panelHeight:it,itemsPerViewport:Tt}}getScrollTo(fe,it,Tt){const{panelHeight:Pe}=this.dimensions,Lt=fe+it,o=Tt+Pe;return Pe>=Lt&&Tt===fe?null:Lt>o?Tt+Lt-o:fe<=Tt?fe:null}static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275prov=k.wxM({token:rt,factory:rt.\u0275fac})}return rt})();const Et=["top","right","bottom","left"],St=typeof requestAnimationFrame<"u"?vt.A:wt.u;let qe=(()=>{class rt{constructor(fe,it,Tt,Pe,Lt){this._renderer=fe,this._zone=it,this._panelService=Tt,this._document=Lt,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new k._w7,this.scroll=new k._w7,this.scrollToEnd=new k._w7,this.outsideClick=new k._w7,this._destroy$=new ai.E,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=Pe.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(fe){fe!==this._itemsLength&&(this._itemsLength=fe,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:fe,panelHeight:it}=this._panelService.dimensions,Tt=this.markedItem.index*fe;return it>Tt?0:Tt}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(fe){if(fe.items){const it=fe.items;this._onItemsChange(it.currentValue,it.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(fe,it=!1){if(!fe)return;const Tt=this.items.indexOf(fe);if(Tt<0||Tt>=this.itemsLength)return;let Pe;if(this.virtualScroll){const Lt=this._panelService.dimensions.itemHeight;Pe=this._panelService.getScrollTo(Tt*Lt,Lt,this._lastScrollPosition)}else{const Lt=this._dropdown.querySelector(`#${fe.htmlId}`);Pe=this._panelService.getScrollTo(Lt.offsetTop,Lt.clientHeight,it?Lt.offsetTop:this._lastScrollPosition)}ur(Pe)&&(this._scrollablePanel.scrollTop=Pe)}scrollToTag(){const fe=this._scrollablePanel;fe.scrollTop=fe.scrollHeight-fe.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),Et.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(fe){Et.forEach(Tt=>{const Pe=`ng-select-${Tt}`;this._renderer.removeClass(this._dropdown,Pe),this._renderer.removeClass(this._select,Pe)});const it=`ng-select-${fe}`;this._renderer.addClass(this._dropdown,it),this._renderer.addClass(this._select,it)}_handleScroll(){this._zone.runOutsideAngular(()=>{(0,We.w)(this.scrollElementRef.nativeElement,"scroll").pipe((0,Fe.a)(this._destroy$),function Ge(rt,yt=t.M){return function De(rt){return(0,V.i)((yt,fe)=>{let it=!1,Tt=null,Pe=null,Lt=!1;const le=()=>{if(Pe?.unsubscribe(),Pe=null,it){it=!1;const c=Tt;Tt=null,fe.next(c)}Lt&&fe.complete()},o=()=>{Pe=null,Lt&&fe.complete()};yt.subscribe((0,Me.e)(fe,c=>{it=!0,Tt=c,Pe||(0,Oe.Uv)(rt(c)).subscribe(Pe=(0,Me.e)(fe,le,o))},()=>{Lt=!0,(!it||!Pe||Pe.closed)&&fe.complete()}))})}(()=>(0,Be.k)(rt,yt))}(0,St)).subscribe(fe=>{const it=fe.path||fe.composedPath&&fe.composedPath();it&&(0!==it.length||fe.target)&&this._onContentScrolled(it&&0!==it.length?it[0].scrollTop:fe.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{(0,ni.U)((0,We.w)(this._document,"touchstart",{capture:!0}),(0,We.w)(this._document,"mousedown",{capture:!0})).pipe((0,Fe.a)(this._destroy$)).subscribe(fe=>this._checkToClose(fe))})}_checkToClose(fe){if(this._select.contains(fe.target)||this._dropdown.contains(fe.target))return;const it=fe.path||fe.composedPath&&fe.composedPath();fe.target&&fe.target.shadowRoot&&it&&it[0]&&this._select.contains(it[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(fe,it){this.items=fe||[],this._scrollToEndFired=!1,this.itemsLength=fe.length,this.virtualScroll?this._updateItemsRange(it):(this._setVirtualHeight(),this._updateItems(it))}_updateItems(fe){this.update.emit(this.items),!1!==fe&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,fe)})})}_updateItemsRange(fe){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{fe?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(fe){this.virtualScroll&&this._renderItemsRange(fe),this._lastScrollPosition=fe,this._fireScrollToEnd(fe)}_updateVirtualHeight(fe){this._updateScrollHeight&&(this._virtualPadding.style.height=`${fe}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(fe=null){if(fe&&this._lastScrollPosition===fe)return;const it=this._panelService.calculateItems(fe=fe||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(it.scrollHeight),this._contentPanel.style.transform=`translateY(${it.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(it.start,it.end)),this.scroll.emit({start:it.start,end:it.end})}),ur(fe)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=fe,this._lastScrollPosition=fe)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[fe]=this.items;return this.update.emit([fe]),Promise.resolve().then(()=>{const Tt=this._dropdown.querySelector(`#${fe.htmlId}`).clientHeight;return this._virtualPadding.style.height=Tt*this.itemsLength+"px",this._panelService.setDimensions(Tt,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(fe){this._scrollToEndFired||0===fe||fe+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(fe){if("auto"!==this.position)return this.position;const it=this._select.getBoundingClientRect(),Tt=document.documentElement.scrollTop||document.body.scrollTop;return it.top+window.pageYOffset+it.height+fe.getBoundingClientRect().height>Tt+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const fe=this._select.getBoundingClientRect(),it=this._parent.getBoundingClientRect();this._dropdown.style.left=fe.left-it.left+"px",this._dropdown.style.width=fe.width+"px",this._dropdown.style.minWidth=fe.width+"px"}_updateYPosition(){const fe=this._select.getBoundingClientRect(),it=this._parent.getBoundingClientRect(),Tt=fe.height;"top"===this._currentPosition?(this._dropdown.style.bottom=it.bottom-fe.bottom+Tt+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=fe.top-it.top+Tt+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{(0,We.w)(this._dropdown,"mousedown").pipe((0,Fe.a)(this._destroy$)).subscribe(fe=>{"INPUT"!==fe.target.tagName&&fe.preventDefault()})})}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.q87),k.GI1(k.WW2),k.GI1(un),k.GI1(k.GMv),k.GI1(li.Ud,8))};static#t=this.\u0275cmp=k.In1({type:rt,selectors:[["ng-dropdown-panel"]],viewQuery:function(it,Tt){if(1&it&&(k.CC$(at,7,k.GMv),k.CC$(si,7,k.GMv),k.CC$(Xt,7,k.GMv)),2&it){let Pe;k.wto(Pe=k.Gqi())&&(Tt.contentElementRef=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.scrollElementRef=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.paddingElementRef=Pe.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[k.SYr],ngContentSelectors:ri,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(it,Tt){1&it&&(k.kPM(),k.yuY(0,ht,2,4,"div",0),k.I0R(1,"div",1,2),k.wR5(3,"div",null,3),k.I0R(5,"div",null,4),k._Xx(7),k.C$Y()(),k.yuY(8,qt,2,4,"div",5)),2&it&&(k.E7m("ngIf",Tt.headerTemplate),k.yG2(3),k.eAK("total-padding",Tt.virtualScroll),k.yG2(2),k.eAK("scrollable-content",Tt.virtualScroll&&Tt.items.length),k.yG2(3),k.E7m("ngIf",Tt.footerTemplate))},dependencies:[li.u_,li.XV],encapsulation:2,changeDetection:0})}return rt})(),Xe=(()=>{class rt{get disabled(){return this._disabled}set disabled(fe){this._disabled=this._isDisabled(fe)}constructor(fe){this.elementRef=fe,this.stateChange$=new ai.E,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(fe){fe.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(fe){return null!=fe&&"false"!=`${fe}`}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.GMv))};static#t=this.\u0275cmp=k.In1({type:rt,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[k.SYr],ngContentSelectors:ri,decls:1,vars:0,template:function(it,Tt){1&it&&(k.kPM(),k._Xx(0))},encapsulation:2,changeDetection:0})}return rt})(),ze=(()=>{class rt{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275prov=k.wxM({token:rt,factory:rt.\u0275fac,providedIn:"root"})}return rt})(),He=(()=>{class rt{warn(fe){console.warn(fe)}static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275prov=k.wxM({token:rt,factory:rt.\u0275fac,providedIn:"root"})}return rt})();const ft=new k.UbH("ng-select-selection-model");let Yt=(()=>{class rt{get items(){return this._items}set items(fe){null===fe&&(fe=[]),this._itemsAreUsed=!0,this._items=fe}get compareWith(){return this._compareWith}set compareWith(fe){if(null!=fe&&!er(fe))throw Error("`compareWith` must be a function.");this._compareWith=fe}get clearSearchOnAdd(){return ur(this._clearSearchOnAdd)?this._clearSearchOnAdd:ur(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(fe){this._clearSearchOnAdd=fe}get deselectOnClick(){return ur(this._deselectOnClick)?this._deselectOnClick:ur(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(fe){this._deselectOnClick=fe}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(fe,it,Tt,Pe,Lt,le,o){this.classes=fe,this.autoFocus=it,this.config=Tt,this._cd=le,this._console=o,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=c=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new k._w7,this.focusEvent=new k._w7,this.changeEvent=new k._w7,this.openEvent=new k._w7,this.closeEvent=new k._w7,this.searchEvent=new k._w7,this.clearEvent=new k._w7,this.addEvent=new k._w7,this.removeEvent=new k._w7,this.scroll=new k._w7,this.scrollToEnd=new k._w7,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=pt(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new ai.E,this._keyPress$=new ai.E,this._onChange=c=>{},this._onTouched=()=>{},this.clearItem=c=>{const h=this.selectedItems.find(_=>_.value===c);this.unselect(h)},this.trackByOption=(c,h)=>this.trackByFn?this.trackByFn(h.value):h,this._mergeGlobalConfig(Tt),this.itemsList=new Ui(this,Pe()),this.element=Lt.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(fe=>fe.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(fe){fe.multiple&&this.itemsList.clearSelected(),fe.items&&this._setItems(fe.items.currentValue||[]),fe.isOpen&&(this._manualOpen=ur(fe.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),ur(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(fe){if(di[fe.which]){if(!1===this.keyDownFn(fe))return;this.handleKeyCode(fe)}else fe.key&&1===fe.key.length&&this._keyPress$.next(fe.key.toLocaleLowerCase())}handleKeyCode(fe){this.clearButton&&this.clearButton.nativeElement===fe.target?this.handleKeyCodeClear(fe):this.handleKeyCodeInput(fe)}handleKeyCodeInput(fe){switch(fe.which){case di.ArrowDown:this._handleArrowDown(fe);break;case di.ArrowUp:this._handleArrowUp(fe);break;case di.Space:this._handleSpace(fe);break;case di.Enter:this._handleEnter(fe);break;case di.Tab:this._handleTab(fe);break;case di.Esc:this.close(),fe.preventDefault();break;case di.Backspace:this._handleBackspace()}}handleKeyCodeClear(fe){fe.which===di.Enter&&(this.handleClearClick(),fe.preventDefault())}handleMousedown(fe){const it=fe.target;"INPUT"!==it.tagName&&fe.preventDefault(),it.classList.contains("ng-clear-wrapper")?this.handleClearClick():it.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():it.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(fe){this.itemsList.clearSelected(),this._handleWriteValue(fe),this._cd.markForCheck()}registerOnChange(fe){this._onChange=fe}registerOnTouched(fe){this._onTouched=fe}setDisabledState(fe){this._disabled=fe,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(fe){!fe||fe.disabled||this.disabled||(this.deselectOnClick&&fe.selected?this.unselect(fe):this.select(fe),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(fe){fe.selected||(this.itemsList.select(fe),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(fe.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(fe){fe&&(this.itemsList.unselect(fe),this.focus(),this._updateNgModel(),this.removeEvent.emit(fe.value))}selectTag(){let fe;fe=er(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const it=Tt=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(Tt,null):this.itemsList.addItem(Tt);!function ks(rt){return rt instanceof Promise}(fe)?fe&&this.select(it(fe)):fe.then(Tt=>this.select(it(Tt))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;const fe=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(it=>it.label.toLowerCase()===fe)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(it=>it.label.toLowerCase()===fe))&&!this.loading}showNoItemsFound(){const fe=0===this.itemsList.filteredItems.length;return(fe&&!this._isTypeahead&&!this.loading||fe&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(fe){this._isComposing=!1,!this.searchWhileComposing&&this.filter(fe)}filter(fe){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=fe,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(fe),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:fe,items:this.itemsList.filteredItems.map(it=>it.value)}),this.open())}onInputFocus(fe){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(fe),this.focused=!0)}onInputBlur(fe){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(fe),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(fe){fe.disabled||this.itemsList.markItem(fe)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const fe=this.selectedItems&&this.selectedItems[0];this.searchTerm=fe&&fe.label||null}_setItems(fe){const it=fe[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=ur(it)?!Rr(it):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(fe),fe.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&ur(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const fe=Tt=>{this.items=Tt.map(Pe=>({$ngOptionValue:Pe.value,$ngOptionLabel:Pe.elementRef.nativeElement.innerHTML,disabled:Pe.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},it=()=>{const Tt=(0,ni.U)(this.ngOptions.changes,this._destroy$);(0,ni.U)(...this.ngOptions.map(Pe=>Pe.stateChange$)).pipe((0,Fe.a)(Tt)).subscribe(Pe=>{const Lt=this.itemsList.findItem(Pe.value);Lt.disabled=Pe.disabled,Lt.label=Pe.label||Lt.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe((0,Je.W)(this.ngOptions),(0,Fe.a)(this._destroy$)).subscribe(Tt=>{this.bindLabel=this._defaultLabel,fe(Tt),it()})}_isValidWriteValue(fe){if(!ur(fe)||this.multiple&&""===fe||Array.isArray(fe)&&0===fe.length)return!1;const it=Tt=>!(!ur(this.compareWith)&&Rr(Tt)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(Tt)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(fe)?fe.every(Tt=>it(Tt)):(this._console.warn("Multiple select ngModel should be array."),!1):it(fe)}_handleWriteValue(fe){if(!this._isValidWriteValue(fe))return;const it=Tt=>{let Pe=this.itemsList.findItem(Tt);if(Pe)this.itemsList.select(Pe);else{const Lt=Rr(Tt);Lt||!Lt&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(Tt,null)):this.bindValue&&(Pe={[this.bindLabel]:null,[this.bindValue]:Tt},this.itemsList.select(this.itemsList.mapItem(Pe,null)))}};this.multiple?fe.forEach(Tt=>it(Tt)):it(fe)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe((0,Fe.a)(this._destroy$),(0,nt.y)(fe=>this._pressedKeys.push(fe)),(0,mt.o)(200),(0,Pt.I)(()=>this._pressedKeys.length>0),(0,ot.k)(()=>this._pressedKeys.join(""))).subscribe(fe=>{const it=this.itemsList.findByLabel(fe);it&&(this.isOpen?(this.itemsList.markItem(it),this._scrollToMarked(),this._cd.markForCheck()):this.select(it)),this._pressedKeys=[]})}_setInputAttributes(){const fe=this.searchInput.nativeElement,it={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const Tt of Object.keys(it))fe.setAttribute(Tt,it[Tt])}_updateNgModel(){const fe=[];for(const Tt of this.selectedItems)if(this.bindValue){let Pe=null;Pe=Tt.children?Tt.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(Tt.value,this.bindValue),fe.push(Pe)}else fe.push(Tt.value);const it=this.selectedItems.map(Tt=>Tt.value);this.multiple?(this._onChange(fe),this.changeEvent.emit(it)):(this._onChange(ur(fe[0])?fe[0]:null),this.changeEvent.emit(it[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(fe){this.searchTerm=fe,this._isTypeahead&&this.typeahead.next(fe)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(fe){if(!1===this.isOpen)if(this.showClear())this.focusOnClear(),fe.preventDefault();else if(!this.addTag)return;this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),fe.preventDefault()):this.showAddTag?(this.selectTag(),fe.preventDefault()):this.close():this.close()}_handleEnter(fe){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}fe.preventDefault()}_handleSpace(fe){this.isOpen||this._manualOpen||(this.open(),fe.preventDefault())}_handleArrowDown(fe){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),fe.preventDefault()}_handleArrowUp(fe){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),fe.preventDefault())}_nextItemIsTag(fe){const it=this.itemsList.markedIndex+fe;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(it<0||it===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const fe=this.searchTerm&&this.searchTerm.trim();return fe&&fe.length>=this.minTermLength}_mergeGlobalConfig(fe){this.placeholder=this.placeholder||fe.placeholder,this.notFoundText=this.notFoundText||fe.notFoundText,this.typeToSearchText=this.typeToSearchText||fe.typeToSearchText,this.addTagText=this.addTagText||fe.addTagText,this.loadingText=this.loadingText||fe.loadingText,this.clearAllText=this.clearAllText||fe.clearAllText,this.virtualScroll=ur(this.virtualScroll)?this.virtualScroll:!!ur(fe.disableVirtualScroll)&&!fe.disableVirtualScroll,this.openOnEnter=ur(this.openOnEnter)?this.openOnEnter:fe.openOnEnter,this.appendTo=this.appendTo||fe.appendTo,this.bindValue=this.bindValue||fe.bindValue,this.bindLabel=this.bindLabel||fe.bindLabel,this.appearance=this.appearance||fe.appearance}static#e=this.\u0275fac=function(it){return new(it||rt)(k.gJ8("class"),k.gJ8("autofocus"),k.GI1(ze),k.GI1(ft),k.GI1(k.GMv),k.GI1(k.kD9),k.GI1(He))};static#t=this.\u0275cmp=k.In1({type:rt,selectors:[["ng-select"]],contentQueries:function(it,Tt,Pe){if(1&it&&(k.szK(Pe,hr,5,k.Yw2),k.szK(Pe,Cr,5,k.Yw2),k.szK(Pe,$r,5,k.Yw2),k.szK(Pe,Ct,5,k.Yw2),k.szK(Pe,Ie,5,k.Yw2),k.szK(Pe,Ne,5,k.Yw2),k.szK(Pe,ut,5,k.Yw2),k.szK(Pe,lt,5,k.Yw2),k.szK(Pe,zt,5,k.Yw2),k.szK(Pe,Kt,5,k.Yw2),k.szK(Pe,Jt,5,k.Yw2),k.szK(Pe,Xe,5)),2&it){let Lt;k.wto(Lt=k.Gqi())&&(Tt.optionTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.optgroupTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.labelTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.multiLabelTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.headerTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.footerTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.notFoundTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.typeToSearchTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.loadingTextTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.tagTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.loadingSpinnerTemplate=Lt.first),k.wto(Lt=k.Gqi())&&(Tt.ngOptions=Lt)}},viewQuery:function(it,Tt){if(1&it&&(k.CC$(qe,5),k.CC$(mi,7),k.CC$(Vi,5)),2&it){let Pe;k.wto(Pe=k.Gqi())&&(Tt.dropdownPanel=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.searchInput=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.clearButton=Pe.first)}},hostVars:20,hostBindings:function(it,Tt){1&it&&k.qCj("keydown",function(Lt){return Tt.handleKeyDown(Lt)}),2&it&&k.eAK("ng-select-typeahead",Tt.typeahead)("ng-select-multiple",Tt.multiple)("ng-select-taggable",Tt.addTag)("ng-select-searchable",Tt.searchable)("ng-select-clearable",Tt.clearable)("ng-select-opened",Tt.isOpen)("ng-select",Tt.useDefaultClass)("ng-select-disabled",Tt.disabled)("ng-select-filtered",Tt.filtered)("ng-select-single",Tt.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[k.M5G([{provide:pn.Y6,useExisting:(0,k.wd)(()=>rt),multi:!0},un]),k.SYr],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper","tabindex","0",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],["clearButton",""],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(it,Tt){if(1&it){const Pe=k.KQA();k.I0R(0,"div",0),k.qCj("mousedown",function(le){return Tt.handleMousedown(le)}),k.I0R(1,"div",1)(2,"div",2),k.OEk(3),k.C$Y(),k.yuY(4,xn,2,2,"ng-container",3)(5,ei,1,5,null,3),k.I0R(6,"div",4)(7,"input",5,6),k.qCj("input",function(){k.usT(Pe);const le=k.Gew(8);return k.CGJ(Tt.filter(le.value))})("compositionstart",function(){return Tt.onCompositionStart()})("compositionend",function(){k.usT(Pe);const le=k.Gew(8);return k.CGJ(Tt.onCompositionEnd(le.value))})("focus",function(le){return Tt.onInputFocus(le)})("blur",function(le){return Tt.onInputBlur(le)})("change",function(le){return le.stopPropagation()}),k.C$Y()()(),k.yuY(9,Wn,4,1,"ng-container",3)(10,Nn,4,1,"span",7),k.I0R(11,"span",8),k.wR5(12,"span",9),k.C$Y()(),k.yuY(13,Ir,7,19,"ng-dropdown-panel",10)}2&it&&(k.eAK("ng-appearance-outline","outline"===Tt.appearance)("ng-has-value",Tt.hasValue),k.yG2(3),k.cNF(Tt.placeholder),k.yG2(),k.E7m("ngIf",(!Tt.multiLabelTemplate||!Tt.multiple)&&Tt.selectedItems.length>0),k.yG2(),k.E7m("ngIf",Tt.multiple&&Tt.multiLabelTemplate&&Tt.selectedValues.length>0),k.yG2(),k.e48("aria-expanded",Tt.isOpen)("aria-owns",Tt.isOpen?Tt.dropdownId:null),k.yG2(),k.E7m("readOnly",!Tt.searchable||Tt.itemsList.maxItemsSelected)("disabled",Tt.disabled)("value",Tt.searchTerm?Tt.searchTerm:""),k.e48("id",Tt.labelForId)("tabindex",Tt.tabIndex)("aria-activedescendant",Tt.isOpen?null==Tt.itemsList||null==Tt.itemsList.markedItem?null:Tt.itemsList.markedItem.htmlId:null)("aria-controls",Tt.isOpen?Tt.dropdownId:null),k.yG2(2),k.E7m("ngIf",Tt.loading),k.yG2(),k.E7m("ngIf",Tt.showClear()),k.yG2(3),k.E7m("ngIf",Tt.isOpen))},dependencies:[li.QF,li.ay,li.u_,li.XV,qe,gr],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0})}return rt})();function xi(){return new pi}class pi{constructor(){this._selected=[]}get value(){return this._selected}select(yt,fe,it){if(yt.selected=!0,(!yt.children||!fe&&it)&&this._selected.push(yt),fe)if(yt.parent){const Tt=yt.parent.children.length,Pe=yt.parent.children.filter(Lt=>Lt.selected).length;yt.parent.selected=Tt===Pe}else yt.children&&(this._setChildrenSelectedState(yt.children,!0),this._removeChildren(yt),this._selected=it&&this._activeChildren(yt)?[...this._selected.filter(Tt=>Tt.parent!==yt),yt]:[...this._selected,...yt.children.filter(Tt=>!Tt.disabled)])}unselect(yt,fe){if(this._selected=this._selected.filter(it=>it!==yt),yt.selected=!1,fe)if(yt.parent&&yt.parent.selected){const it=yt.parent.children;this._removeParent(yt.parent),this._removeChildren(yt.parent),this._selected.push(...it.filter(Tt=>Tt!==yt&&!Tt.disabled)),yt.parent.selected=!1}else yt.children&&(this._setChildrenSelectedState(yt.children,!1),this._removeChildren(yt))}clear(yt){this._selected=yt?this._selected.filter(fe=>fe.disabled):[]}_setChildrenSelectedState(yt,fe){for(const it of yt)it.disabled||(it.selected=fe)}_removeChildren(yt){this._selected=[...this._selected.filter(fe=>fe.parent!==yt),...yt.children.filter(fe=>fe.parent===yt&&fe.disabled&&fe.selected)]}_removeParent(yt){this._selected=this._selected.filter(fe=>fe!==yt)}_activeChildren(yt){return yt.children.every(fe=>!fe.disabled||fe.selected)}}let Pi=(()=>{class rt{static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275mod=k.a4G({type:rt});static#i=this.\u0275inj=k.s3X({providers:[{provide:ft,useValue:xi}],imports:[li.MD]})}return rt})()},2728:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{C:()=>nt,Wz:()=>Ge,gD:()=>Je});var k=Rt(4496),pn=Rt(1368),Fe=Rt(4984);const t=["*"],V=mt=>({"text-muted":mt});function Oe(mt,Pt){if(1&mt&&(k.I0R(0,"button",7),k.OEk(1),k.C$Y()),2&mt){const ot=k.GaO();k.E7m("ngClass",k.S45(2,V,ot.isDisabled)),k.yG2(),k.oRS(" ",ot.heading," ")}}const Me=[[["","accordion-heading",""]],"*"],De=["[accordion-heading]","*"];let Be=(()=>{class mt{constructor(){this.closeOthers=!1,this.isAnimated=!1}static#e=this.\u0275fac=function(vt){return new(vt||mt)};static#t=this.\u0275prov=k.wxM({token:mt,factory:mt.\u0275fac,providedIn:"root"})}return mt})(),Ge=(()=>{class mt{constructor(ot){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,ot)}closeOtherPanels(ot){this.closeOthers&&this.groups.forEach(vt=>{vt!==ot&&(vt.isOpen=!1)})}addGroup(ot){ot.isAnimated=this.isAnimated,this.groups.push(ot)}removeGroup(ot){const vt=this.groups.indexOf(ot);-1!==vt&&this.groups.splice(vt,1)}static#e=this.\u0275fac=function(vt){return new(vt||mt)(k.GI1(Be))};static#t=this.\u0275cmp=k.In1({type:mt,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(vt,wt){2&vt&&k.e48("aria-multiselectable",wt.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:t,decls:1,vars:0,template:function(vt,wt){1&vt&&(k.kPM(),k._Xx(0))},encapsulation:2})}return mt})(),Je=(()=>{class mt{get isOpen(){return this._isOpen}set isOpen(ot){ot!==this.isOpen&&(ot&&this.accordion.closeOtherPanels(this),this._isOpen=ot,Promise.resolve(null).then(()=>{this.isOpenChange.emit(ot)}))}constructor(ot){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new k._w7,this._isOpen=!1,this.accordion=ot}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static#e=this.\u0275fac=function(vt){return new(vt||mt)(k.GI1(Ge))};static#t=this.\u0275cmp=k.In1({type:mt,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(vt,wt){2&vt&&k.eAK("panel-open",wt.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:De,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"ngClass","click"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(vt,wt){1&vt&&(k.kPM(Me),k.I0R(0,"div",0)(1,"div",1),k.qCj("click",function(){return wt.toggleOpen()}),k.I0R(2,"div",2)(3,"div",3),k.yuY(4,Oe,2,4,"button",4),k._Xx(5),k.C$Y()()(),k.I0R(6,"div",5)(7,"div",6),k._Xx(8,1),k.C$Y()()()),2&vt&&(k.E7m("ngClass",wt.panelClass),k.yG2(),k.E7m("ngClass",wt.isDisabled?"panel-disabled":"panel-enabled"),k.yG2(2),k.e48("aria-expanded",wt.isOpen),k.yG2(),k.E7m("ngIf",wt.heading),k.yG2(2),k.E7m("collapse",!wt.isOpen)("isAnimated",wt.isAnimated))},dependencies:[pn.QF,pn.u_,Fe.m],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}return mt})(),nt=(()=>{class mt{static forRoot(){return{ngModule:mt,providers:[]}}static#e=this.\u0275fac=function(vt){return new(vt||mt)};static#t=this.\u0275mod=k.a4G({type:mt});static#i=this.\u0275inj=k.s3X({imports:[pn.MD,Fe.a]})}return mt})()},3304:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{em:()=>Qp,U5:()=>Qh,SO:()=>ip});var k=Rt(4496),pn=Rt(6684),Fe=Rt(4704),t=Rt(3992),V=Rt(3616),Oe=Rt(4e3);function De(y){return y<0?Math.ceil(y)||0:Math.floor(y)}function Be(y){return"string"==typeof y}function Ge(y){return y instanceof Date||"[object Date]"===Object.prototype.toString.call(y)}function nt(y){return y&&y.getTime&&!isNaN(y.getTime())}function mt(y){return y instanceof Function||"[object Function]"===Object.prototype.toString.call(y)}function Pt(y){return"number"==typeof y||"[object Number]"===Object.prototype.toString.call(y)}function ot(y){return y instanceof Array||"[object Array]"===Object.prototype.toString.call(y)}function vt(y,O){return Object.prototype.hasOwnProperty.call(y,O)}function wt(y){return null!=y&&"[object Object]"===Object.prototype.toString.call(y)}function We(y){return void 0===y}function ni(y){const O=+y;let S=0;return 0!==O&&isFinite(O)&&(S=De(O)),S}const li={},at={date:"day",hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function si(y,O){const S=y.toLowerCase();let Y=y;S in at&&(Y=at[S]),li[S]=li[`${S}s`]=li[O]=Y}function Xt(y){return Be(y)?li[y]||li[y.toLowerCase()]:void 0}const ht=0,qt=1,ri=2,mi=3,Vi=4,_i=5,Ci=6,Fi=7,qi=8;function xn(y,O,S){const Y=`${Math.abs(y)}`;return(y>=0?S?"+":"":"-")+Math.pow(10,Math.max(0,O-Y.length)).toString().substr(1)+Y}const mn={},Vn={},ei=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;function Bi(y,O,S,Y){y&&(Vn[y]=Y),O&&(Vn[O[0]]=function(){return xn(Y.apply(null,arguments),O[1],O[2])}),S&&(Vn[S]=function(Z,ye){return ye.locale.ordinal(Y.apply(null,arguments),y)})}function Wn(y){return y.match(/\[[\s\S]/)?y.replace(/^\[|\]$/g,""):y.replace(/\\/g,"")}function Nn(y,O,S){const Y=new Date(Date.UTC.apply(null,arguments));return y<100&&y>=0&&isFinite(Y.getUTCFullYear())&&Y.setUTCFullYear(y),Y}function An(y,O=0,S=1,Y=0,Z=0,ye=0,gt=0){const Ei=new Date(y,O,S,Y,Z,ye,gt);return y<100&&y>=0&&isFinite(Ei.getFullYear())&&Ei.setFullYear(y),Ei}function Gi(y,O=!1){return O?y.getUTCHours():y.getHours()}function kr(y,O=!1){return O?y.getUTCMinutes():y.getMinutes()}function sr(y,O=!1){return O?y.getUTCSeconds():y.getSeconds()}function fr(y,O=!1){return O?y.getUTCMilliseconds():y.getMilliseconds()}function en(y,O=!1){return O?y.getUTCDay():y.getDay()}function _n(y,O=!1){return O?y.getUTCDate():y.getDate()}function Xi(y,O=!1){return O?y.getUTCMonth():y.getMonth()}function ji(y,O=!1){return O?y.getUTCFullYear():y.getFullYear()}function Ir(y,O){return!(!y||!O)&&wr(y,O)&&Xi(y)===Xi(O)}function wr(y,O){return!(!y||!O)&&ji(y)===ji(O)}function pr(y,O){return!(!y||!O)&&wr(y,O)&&Ir(y,O)&&_n(y)===_n(O)}const or=/\d/,Tn=/\d\d/,ur=/\d{3}/,Rr=/\d{4}/,ks=/[+-]?\d{6}/,er=/\d\d?/,gr=/\d\d\d\d?/,hr=/\d\d\d\d\d\d?/,Cr=/\d{1,3}/,$r=/\d{1,4}/,Ct=/[+-]?\d{1,6}/,Ie=/\d+/,Ne=/[+-]?\d+/,lt=/Z|[+-]\d\d(?::?\d\d)?/gi,zt=/[+-]?\d+(\.\d{1,3})?/,Kt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Jt={};function pt(y,O,S){Jt[y]=mt(O)?O:function(Y,Z){return Y&&S?S:O}}function ui(y,O){return vt(Jt,y)?Jt[y](!1,O):new RegExp(function Hi(y){return Ui(y.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(O,S,Y,Z,ye)=>S||Y||Z||ye))}(y))}function Ui(y){return y.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const di={};function un(y,O){const S=Be(y)?[y]:y;let Y=O;if(Pt(O)&&(Y=function(Z,ye,gt){return ye[O]=ni(Z),gt}),ot(S)&&mt(Y)){let Z;for(Z=0;Z<S.length;Z++)di[S[Z]]=Y}}function Et(y,O){un(y,function(S,Y,Z,ye){return Z._w=Z._w||{},O(S,Z._w,Z,ye)})}function St(y,O,S){return null!=O&&vt(di,y)&&di[y](O,S._a,S,y),S}const qe={};function Xe(y,O){qe[y]=O}function ft(y){return null==y._pf&&(y._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),y._pf}function Yt(y,O){return O.locale.getFullYear?O.locale.getFullYear(y,O.isUTC).toString():ji(y,O.isUTC).toString()}function pi(y){return ni(y)+(ni(y)>68?1900:2e3)}function Pi(y){return rt(y)?366:365}function rt(y){return y%4==0&&y%100!=0||y%400==0}function yt(y,O){if(isNaN(y)||isNaN(O))return NaN;const S=function Me(y,O){return(y%O+O)%O}(O,12);return 1===S?rt(y+(O-S)/12)?29:28:31-S%7%2}const it={year:0,month:0,day:0,hour:0,minute:0,seconds:0};function Tt(y,O){const S=Object.assign({},it,O),Y=y.getFullYear()+(S.year||0),Z=y.getMonth()+(S.month||0);let ye=y.getDate()+(S.day||0);return S.month&&!S.day&&(ye=Math.min(ye,yt(Y,Z))),An(Y,Z,ye,y.getHours()+(S.hour||0),y.getMinutes()+(S.minute||0),y.getSeconds()+(S.seconds||0))}function Lt(y,O){return Pt(O)?O:y}function o(y,O,S){const Y=Math.min(_n(y),yt(ji(y),O));return S?y.setUTCMonth(O,Y):y.setMonth(O,Y),y}function M(y,O,S){return S?y.setUTCDate(O):y.setDate(O),y}function F(y){return new Date(y.getTime())}function U(y,O,S){const Y=F(y);switch(O){case"year":o(Y,0,S);case"quarter":case"month":M(Y,1,S);case"week":case"isoWeek":case"day":case"date":!function h(y,O,S){S?y.setUTCHours(O):y.setHours(O)}(Y,0,S);case"hours":!function _(y,O,S){S?y.setUTCMinutes(O):y.setMinutes(O)}(Y,0,S);case"minutes":!function b(y,O,S){S?y.setUTCSeconds(O):y.setSeconds(O)}(Y,0,S);case"seconds":!function x(y,O,S){S?y.setUTCMilliseconds(O):y.setMilliseconds(O)}(Y,0,S)}return"week"===O&&function m(y,O,S={}){Ro(y,O-vn(y,S.locale,S.isUTC),"day")}(Y,0,{isUTC:S}),"isoWeek"===O&&function G(y,O,S={}){const Y=function xl(y,O=ls()){return Be(y)?O.weekdaysParse(y)%7||7:Pt(y)&&isNaN(y)?null:y}(O,S.locale);Ya(y,function bs(y,O){return en(y,O)}(y)%7?Y:Y-7)}(Y,1),"quarter"===O&&o(Y,3*Math.floor(Xi(Y,S)/3),S),Y}function $(y,O,S){let Y=O;return"date"===Y&&(Y="day"),function bl(y,O,S,Y){return Sa(y,el(O,S),-1,Y)}(Ro(U(y,Y,S),1,"isoWeek"===Y?"week":Y,S),1,"milliseconds",S)}function ne(y,O){const S=+U(y,"day",O),Y=+U(y,"year",O);return Math.round((S-Y)/864e5)+1}function ge(y,O,S){const Y=O-S+7;return-(Nn(y,0,Y).getUTCDay()-O+7)%7+Y-1}function me(y,O,S,Y){const Z=ge(ji(y,Y),O,S),ye=Math.floor((ne(y,Y)-Z-1)/7)+1;let gt,Ei;return ye<1?(Ei=ji(y,Y)-1,gt=ye+Se(Ei,O,S)):ye>Se(ji(y,Y),O,S)?(gt=ye-Se(ji(y,Y),O,S),Ei=ji(y,Y)+1):(Ei=ji(y,Y),gt=ye),{week:gt,year:Ei}}function Se(y,O,S){const Y=ge(y,O,S),Z=ge(y+1,O,S);return(Pi(y)-Y+Z)/7}const N=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Q="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Le="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),kt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},wi=Kt,Mi=Kt;class dn{constructor(O){O&&this.set(O)}set(O){let S;for(S in O){if(!O.hasOwnProperty(S))continue;const Y=O[S];this[mt(Y)?S:`_${S}`]=Y}this._config=O}calendar(O,S,Y){const Z=this._calendar[O]||this._calendar.sameElse;return mt(Z)?Z.call(null,S,Y):Z}longDateFormat(O){const S=this._longDateFormat[O],Y=this._longDateFormat[O.toUpperCase()];return S||!Y?S:(this._longDateFormat[O]=Y.replace(/MMMM|MM|DD|dddd/g,function(Z){return Z.slice(1)}),this._longDateFormat[O])}get invalidDate(){return this._invalidDate}set invalidDate(O){this._invalidDate=O}ordinal(O,S){return this._ordinal.replace("%d",O.toString(10))}preparse(O,S){return O}getFullYear(O,S=!1){return ji(O,S)}postformat(O){return O}relativeTime(O,S,Y,Z){const ye=this._relativeTime[Y];return mt(ye)?ye(O,S,Y,Z):ye.replace(/%d/i,O.toString(10))}pastFuture(O,S){const Y=this._relativeTime[O>0?"future":"past"];return mt(Y)?Y(S):Y.replace(/%s/i,S)}months(O,S,Y=!1){if(!O)return ot(this._months)?this._months:this._months.standalone;if(ot(this._months))return this._months[Xi(O,Y)];const Z=(this._months.isFormat||N).test(S)?"format":"standalone";return this._months[Z][Xi(O,Y)]}monthsShort(O,S,Y=!1){if(!O)return ot(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;if(ot(this._monthsShort))return this._monthsShort[Xi(O,Y)];const Z=N.test(S)?"format":"standalone";return this._monthsShort[Z][Xi(O,Y)]}monthsParse(O,S,Y){let Z,ye,gt;if(this._monthsParseExact)return this.handleMonthStrictParse(O,S,Y);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),gt=0;gt<12;gt++){if(Z=new Date(Date.UTC(2e3,gt)),Y&&!this._longMonthsParse[gt]){const Ei=this.months(Z,"",!0).replace(".",""),fn=this.monthsShort(Z,"",!0).replace(".","");this._longMonthsParse[gt]=new RegExp(`^${Ei}$`,"i"),this._shortMonthsParse[gt]=new RegExp(`^${fn}$`,"i")}if(!Y&&!this._monthsParse[gt]&&(ye=`^${this.months(Z,"",!0)}|^${this.monthsShort(Z,"",!0)}`,this._monthsParse[gt]=new RegExp(ye.replace(".",""),"i")),Y&&"MMMM"===S&&this._longMonthsParse[gt].test(O)||Y&&"MMM"===S&&this._shortMonthsParse[gt].test(O)||!Y&&this._monthsParse[gt].test(O))return gt}}monthsRegex(O){return this._monthsParseExact?(vt(this,"_monthsRegex")||this.computeMonthsParse(),O?this._monthsStrictRegex:this._monthsRegex):(vt(this,"_monthsRegex")||(this._monthsRegex=Mi),this._monthsStrictRegex&&O?this._monthsStrictRegex:this._monthsRegex)}monthsShortRegex(O){return this._monthsParseExact?(vt(this,"_monthsRegex")||this.computeMonthsParse(),O?this._monthsShortStrictRegex:this._monthsShortRegex):(vt(this,"_monthsShortRegex")||(this._monthsShortRegex=wi),this._monthsShortStrictRegex&&O?this._monthsShortStrictRegex:this._monthsShortRegex)}week(O,S){return me(O,this._week.dow,this._week.doy,S).week}firstDayOfWeek(){return this._week.dow}firstDayOfYear(){return this._week.doy}weekdays(O,S,Y){if(!O)return ot(this._weekdays)?this._weekdays:this._weekdays.standalone;if(ot(this._weekdays))return this._weekdays[en(O,Y)];const Z=this._weekdays.isFormat.test(S)?"format":"standalone";return this._weekdays[Z][en(O,Y)]}weekdaysMin(O,S,Y){return O?this._weekdaysMin[en(O,Y)]:this._weekdaysMin}weekdaysShort(O,S,Y){return O?this._weekdaysShort[en(O,Y)]:this._weekdaysShort}weekdaysParse(O,S,Y){let Z,ye;if(this._weekdaysParseExact)return this.handleWeekStrictParse(O,S,Y);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),Z=0;Z<7;Z++){const gt=Ya(new Date(Date.UTC(2e3,1)),Z,null,!0);if(Y&&!this._fullWeekdaysParse[Z]&&(this._fullWeekdaysParse[Z]=new RegExp(`^${this.weekdays(gt,"",!0).replace(".",".?")}$`,"i"),this._shortWeekdaysParse[Z]=new RegExp(`^${this.weekdaysShort(gt,"",!0).replace(".",".?")}$`,"i"),this._minWeekdaysParse[Z]=new RegExp(`^${this.weekdaysMin(gt,"",!0).replace(".",".?")}$`,"i")),this._weekdaysParse[Z]||(ye=`^${this.weekdays(gt,"",!0)}|^${this.weekdaysShort(gt,"",!0)}|^${this.weekdaysMin(gt,"",!0)}`,this._weekdaysParse[Z]=new RegExp(ye.replace(".",""),"i")),!(ot(this._fullWeekdaysParse)&&ot(this._shortWeekdaysParse)&&ot(this._minWeekdaysParse)&&ot(this._weekdaysParse)))return;if(Y&&"dddd"===S&&this._fullWeekdaysParse[Z].test(O))return Z;if(Y&&"ddd"===S&&this._shortWeekdaysParse[Z].test(O))return Z;if(Y&&"dd"===S&&this._minWeekdaysParse[Z].test(O))return Z;if(!Y&&this._weekdaysParse[Z].test(O))return Z}}weekdaysRegex(O){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),O?this._weekdaysStrictRegex:this._weekdaysRegex):(vt(this,"_weekdaysRegex")||(this._weekdaysRegex=Kt),this._weekdaysStrictRegex&&O?this._weekdaysStrictRegex:this._weekdaysRegex)}weekdaysShortRegex(O){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),O?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(vt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Kt),this._weekdaysShortStrictRegex&&O?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}weekdaysMinRegex(O){return this._weekdaysParseExact?(vt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),O?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(vt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kt),this._weekdaysMinStrictRegex&&O?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}isPM(O){return"p"===O.toLowerCase().charAt(0)}meridiem(O,S,Y){return O>11?Y?"pm":"PM":Y?"am":"AM"}formatLongDate(O){this._longDateFormat=this._longDateFormat?this._longDateFormat:kt;const S=this._longDateFormat[O],Y=this._longDateFormat[O.toUpperCase()];return S||!Y?S:(this._longDateFormat[O]=Y.replace(/MMMM|MM|DD|dddd/g,Z=>Z.slice(1)),this._longDateFormat[O])}handleMonthStrictParse(O,S,Y){const Z=O.toLocaleLowerCase();let ye,gt,Ei;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],ye=0;ye<12;++ye)Ei=new Date(2e3,ye),this._shortMonthsParse[ye]=this.monthsShort(Ei,"").toLocaleLowerCase(),this._longMonthsParse[ye]=this.months(Ei,"").toLocaleLowerCase();return Y?"MMM"===S?(gt=this._shortMonthsParse.indexOf(Z),-1!==gt?gt:null):(gt=this._longMonthsParse.indexOf(Z),-1!==gt?gt:null):"MMM"===S?(gt=this._shortMonthsParse.indexOf(Z),-1!==gt?gt:(gt=this._longMonthsParse.indexOf(Z),-1!==gt?gt:null)):(gt=this._longMonthsParse.indexOf(Z),-1!==gt?gt:(gt=this._shortMonthsParse.indexOf(Z),-1!==gt?gt:null))}handleWeekStrictParse(O,S,Y){let Z;const ye=O.toLocaleLowerCase();if(!this._weekdaysParse){let gt;for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],gt=0;gt<7;++gt){const Ei=Ya(new Date(Date.UTC(2e3,1)),gt,null,!0);this._minWeekdaysParse[gt]=this.weekdaysMin(Ei).toLocaleLowerCase(),this._shortWeekdaysParse[gt]=this.weekdaysShort(Ei).toLocaleLowerCase(),this._weekdaysParse[gt]=this.weekdays(Ei,"").toLocaleLowerCase()}}if(ot(this._weekdaysParse)&&ot(this._shortWeekdaysParse)&&ot(this._minWeekdaysParse))return Y?"dddd"===S?(Z=this._weekdaysParse.indexOf(ye),-1!==Z?Z:null):"ddd"===S?(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z?Z:null):(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z?Z:null):"dddd"===S?(Z=this._weekdaysParse.indexOf(ye),-1!==Z||(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z)?Z:(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z?Z:null)):"ddd"===S?(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z||(Z=this._weekdaysParse.indexOf(ye),-1!==Z)?Z:(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z?Z:null)):(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z||(Z=this._weekdaysParse.indexOf(ye),-1!==Z)?Z:(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z?Z:null))}computeMonthsParse(){const O=[],S=[],Y=[];let Z,ye;for(ye=0;ye<12;ye++)Z=new Date(2e3,ye),O.push(this.monthsShort(Z,"")),S.push(this.months(Z,"")),Y.push(this.months(Z,"")),Y.push(this.monthsShort(Z,""));for(O.sort(En),S.sort(En),Y.sort(En),ye=0;ye<12;ye++)O[ye]=Ui(O[ye]),S[ye]=Ui(S[ye]);for(ye=0;ye<24;ye++)Y[ye]=Ui(Y[ye]);this._monthsRegex=new RegExp(`^(${Y.join("|")})`,"i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(`^(${S.join("|")})`,"i"),this._monthsShortStrictRegex=new RegExp(`^(${O.join("|")})`,"i")}computeWeekdaysParse(){const O=[],S=[],Y=[],Z=[];let ye;for(ye=0;ye<7;ye++){const gt=Ya(new Date(Date.UTC(2e3,1)),ye,null,!0),Ei=this.weekdaysMin(gt),fn=this.weekdaysShort(gt),Qr=this.weekdays(gt);O.push(Ei),S.push(fn),Y.push(Qr),Z.push(Ei),Z.push(fn),Z.push(Qr)}for(O.sort(En),S.sort(En),Y.sort(En),Z.sort(En),ye=0;ye<7;ye++)S[ye]=Ui(S[ye]),Y[ye]=Ui(Y[ye]),Z[ye]=Ui(Z[ye]);this._weekdaysRegex=new RegExp(`^(${Z.join("|")})`,"i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(`^(${Y.join("|")})`,"i"),this._weekdaysShortStrictRegex=new RegExp(`^(${S.join("|")})`,"i"),this._weekdaysMinStrictRegex=new RegExp(`^(${O.join("|")})`,"i")}}function En(y,O){return O.length-y.length}const Hr={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:kt,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Q,monthsShort:pe,week:{dow:0,doy:6},weekdays:xe,weekdaysMin:Ze,weekdaysShort:Le,meridiemParse:/[ap]\.?m?\.?/i};function Wr(y,O,S){const Y=Math.min(y.length,O.length),Z=Math.abs(y.length-O.length);let gt,ye=0;for(gt=0;gt<Y;gt++)(S&&y[gt]!==O[gt]||!S&&ni(y[gt])!==ni(O[gt]))&&ye++;return ye+Z}function ba(y,O){Bi(null,[y,y.length,!1],null,O)}function hs(y,O){return Io(y,O.locale).toString()}function Yo(y){return ao(y).toString()}function Io(y,O=ls(),S){return me(y,O.firstDayOfWeek(),O.firstDayOfYear(),S).year}function ao(y,O){return me(y,1,4,O).year}function na(y,O){Bi(y,null,null,function(S,Y){let Z=function ra(y,O={}){return O._isUTC?O._offset||0:function oc(y){return 15*-Math.round(y.getTimezoneOffset()/15)}(y)}(S,{_isUTC:Y.isUTC,_offset:Y.offset}),ye="+";return Z<0&&(Z=-Z,ye="-"),ye+xn(~~(Z/60),2)+O+xn(~~Z%60,2)})}const Dl=/([\+\-]|\d\d)/gi;const Ns={},Ho={};let Lo;function pl(y){return y&&y.toLowerCase().replace("_","-")}function Ll(y){return Ns[y]||console.error(`Khronos locale error: please load locale "${y}" before using it`),Ns[y]}function xo(y,O){let S;return y&&(We(O)?S=ls(y):Be(y)&&(S=Yn(y,O)),S&&(Lo=S)),Lo&&Lo._abbr}function Yn(y,O){if(null===O)return delete Ns[y],Lo=ls("en"),null;if(!O)return;let S=Hr;if(O.abbr=y,null!=O.parentLocale){if(null==Ns[O.parentLocale])return Ho[O.parentLocale]||(Ho[O.parentLocale]=[]),Ho[O.parentLocale].push({name:y,config:O}),null;S=Ns[O.parentLocale]._config}return Ns[y]=new dn(function xa(y,O){const S=Object.assign({},y);for(const Y in O)vt(O,Y)&&(wt(y[Y])&&wt(O[Y])?(S[Y]={},Object.assign(S[Y],y[Y]),Object.assign(S[Y],O[Y])):null!=O[Y]?S[Y]=O[Y]:delete S[Y]);for(const Y in y)vt(y,Y)&&!vt(O,Y)&&wt(y[Y])&&(S[Y]=Object.assign({},S[Y]));return S}(S,O)),Ho[y]&&Ho[y].forEach(function(Y){Yn(Y.name,Y.config)}),xo(y),Ns[y]}function ls(y){return function wo(){Ns.en||(xo("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal(y){const O=y%10;return y+(1===ni(y%100/10)?"th":1===O?"st":2===O?"nd":3===O?"rd":"th")}}),function Mr(){Bi("w",["ww",2,!1],"wo",function(y,O){return function as(y,O=ls(),S){return O.week(y,S)}(y,O.locale).toString(10)}),Bi("W",["WW",2,!1],"Wo",function(y){return function Xr(y,O){return me(y,1,4,O).week}(y).toString(10)}),si("week","w"),si("isoWeek","W"),Xe("week",5),Xe("isoWeek",5),pt("w",er),pt("ww",er,Tn),pt("W",er),pt("WW",er,Tn),Et(["w","ww","W","WW"],function(y,O,S,Y){return O[Y.substr(0,1)]=ni(y),S})}(),function ul(){Bi(null,["gg",2,!1],null,function(y,O){return(Io(y,O.locale)%100).toString()}),Bi(null,["GG",2,!1],null,function(y){return(ao(y)%100).toString()}),ba("gggg",hs),ba("ggggg",hs),ba("GGGG",Yo),ba("GGGGG",Yo),si("weekYear","gg"),si("isoWeekYear","GG"),Xe("weekYear",1),Xe("isoWeekYear",1),pt("G",Ne),pt("g",Ne),pt("GG",er,Tn),pt("gg",er,Tn),pt("GGGG",$r,Rr),pt("gggg",$r,Rr),pt("GGGGG",Ct,ks),pt("ggggg",Ct,ks),Et(["gggg","ggggg","GGGG","GGGGG"],function(y,O,S,Y){return O[Y.substr(0,2)]=ni(y),S}),Et(["gg","GG"],function(y,O,S,Y){return O[Y]=pi(y),S})}(),function xi(){Bi("Y",null,null,function(y,O){const S=ji(y,O.isUTC);return S<=9999?S.toString(10):`+${S}`}),Bi(null,["YY",2,!1],null,function(y,O){return(ji(y,O.isUTC)%100).toString(10)}),Bi(null,["YYYY",4,!1],null,Yt),Bi(null,["YYYYY",5,!1],null,Yt),Bi(null,["YYYYYY",6,!0],null,Yt),si("year","y"),Xe("year",1),pt("Y",Ne),pt("YY",er,Tn),pt("YYYY",$r,Rr),pt("YYYYY",Ct,ks),pt("YYYYYY",Ct,ks),un(["YYYYY","YYYYYY"],ht),un("YYYY",function(y,O,S){return O[ht]=2===y.length?pi(y):ni(y),S}),un("YY",function(y,O,S){return O[ht]=pi(y),S}),un("Y",function(y,O,S){return O[ht]=parseInt(y,10),S})}(),function _c(){Bi("z",null,null,function(y,O){return O.isUTC?"UTC":""}),Bi("zz",null,null,function(y,O){return O.isUTC?"Coordinated Universal Time":""})}(),function vr(){Bi("X",null,null,function(y){return function tn(y){return Math.floor(y.valueOf()/1e3)}(y).toString(10)}),Bi("x",null,null,function(y){return y.valueOf().toString(10)}),pt("x",Ne),pt("X",zt),un("X",function(y,O,S){return S._d=new Date(1e3*parseFloat(y)),S}),un("x",function(y,O,S){return S._d=new Date(ni(y)),S})}(),function Nc(){Bi("s",["ss",2,!1],null,function(y,O){return sr(y,O.isUTC).toString(10)}),si("second","s"),Xe("second",15),pt("s",er),pt("ss",er,Tn),un(["s","ss"],_i)}(),function Ks(){Bi("Q",null,"Qo",function(y,O){return function js(y,O=!1){return Math.ceil((Xi(y,O)+1)/3)}(y,O.isUTC).toString(10)}),si("quarter","Q"),Xe("quarter",7),pt("Q",or),un("Q",function(y,O,S){return O[qt]=3*(ni(y)-1),S})}(),function hl(){na("Z",":"),na("ZZ",""),pt("Z",lt),pt("ZZ",lt),un(["Z","ZZ"],function(y,O,S){return S._useUTC=!0,S._tzm=function $a(y,O){const S=(O||"").match(y);if(null===S)return null;const Z=S[S.length-1].match(Dl)||["-","0","0"],ye=60*parseInt(Z[1],10)+ni(Z[2]);return 0===ye?0:"+"===Z[0]?ye:-ye}(lt,y),S})}(),function fe(){Bi("M",["MM",2,!1],"Mo",function(y,O){return(Xi(y,O.isUTC)+1).toString(10)}),Bi("MMM",null,null,function(y,O){return O.locale.monthsShort(y,O.format,O.isUTC)}),Bi("MMMM",null,null,function(y,O){return O.locale.months(y,O.format,O.isUTC)}),si("month","M"),Xe("month",8),pt("M",er),pt("MM",er,Tn),pt("MMM",function(y,O){return O.monthsShortRegex(y)}),pt("MMMM",function(y,O){return O.monthsRegex(y)}),un(["M","MM"],function(y,O,S){return O[qt]=ni(y)-1,S}),un(["MMM","MMMM"],function(y,O,S,Y){const Z=S._locale.monthsParse(y,Y,S._strict);return null!=Z?O[qt]=Z:ft(S).invalidMonth=!!y,S})}(),function yc(){Bi("m",["mm",2,!1],null,function(y,O){return kr(y,O.isUTC).toString(10)}),si("minute","m"),Xe("minute",14),pt("m",er),pt("mm",er,Tn),un(["m","mm"],Vi)}(),function bc(){let y;for(Bi("S",null,null,function(S,Y){return(~~(fr(S,Y.isUTC)/100)).toString(10)}),Bi(null,["SS",2,!1],null,function(S,Y){return(~~(fr(S,Y.isUTC)/10)).toString(10)}),Bi(null,["SSS",3,!1],null,function(S,Y){return fr(S,Y.isUTC).toString(10)}),Bi(null,["SSSS",4,!1],null,function(S,Y){return(10*fr(S,Y.isUTC)).toString(10)}),Bi(null,["SSSSS",5,!1],null,function(S,Y){return(100*fr(S,Y.isUTC)).toString(10)}),Bi(null,["SSSSSS",6,!1],null,function(S,Y){return(1e3*fr(S,Y.isUTC)).toString(10)}),Bi(null,["SSSSSSS",7,!1],null,function(S,Y){return(1e4*fr(S,Y.isUTC)).toString(10)}),Bi(null,["SSSSSSSS",8,!1],null,function(S,Y){return(1e5*fr(S,Y.isUTC)).toString(10)}),Bi(null,["SSSSSSSSS",9,!1],null,function(S,Y){return(1e6*fr(S,Y.isUTC)).toString(10)}),si("millisecond","ms"),Xe("millisecond",16),pt("S",Cr,or),pt("SS",Cr,Tn),pt("SSS",Cr,ur),y="SSSS";y.length<=9;y+="S")pt(y,Ie);function O(S,Y,Z){return Y[Ci]=ni(1e3*parseFloat(`0.${S}`)),Z}for(y="S";y.length<=9;y+="S")un(y,O)}(),function sa(){function y(Z,ye){return Gi(Z,ye)%12||12}function S(Z,ye){Bi(Z,null,null,function(gt,Ei){return Ei.locale.meridiem(Gi(gt,Ei.isUTC),kr(gt,Ei.isUTC),ye)})}function Y(Z,ye){return ye._meridiemParse}Bi("H",["HH",2,!1],null,function(Z,ye){return Gi(Z,ye.isUTC).toString(10)}),Bi("h",["hh",2,!1],null,function(Z,ye){return y(Z,ye.isUTC).toString(10)}),Bi("k",["kk",2,!1],null,function(Z,ye){return function O(Z,ye){return Gi(Z,ye)||24}(Z,ye.isUTC).toString(10)}),Bi("hmm",null,null,function(Z,ye){return`${y(Z,ye.isUTC)}${xn(kr(Z,ye.isUTC),2)}`}),Bi("hmmss",null,null,function(Z,ye){return`${y(Z,ye.isUTC)}${xn(kr(Z,ye.isUTC),2)}${xn(sr(Z,ye.isUTC),2)}`}),Bi("Hmm",null,null,function(Z,ye){return`${Gi(Z,ye.isUTC)}${xn(kr(Z,ye.isUTC),2)}`}),Bi("Hmmss",null,null,function(Z,ye){return`${Gi(Z,ye.isUTC)}${xn(kr(Z,ye.isUTC),2)}${xn(sr(Z,ye.isUTC),2)}`}),S("a",!0),S("A",!1),si("hour","h"),Xe("hour",13),pt("a",Y),pt("A",Y),pt("H",er),pt("h",er),pt("k",er),pt("HH",er,Tn),pt("hh",er,Tn),pt("kk",er,Tn),pt("hmm",gr),pt("hmmss",hr),pt("Hmm",gr),pt("Hmmss",hr),un(["H","HH"],mi),un(["k","kk"],function(Z,ye,gt){const Ei=ni(Z);return ye[mi]=24===Ei?0:Ei,gt}),un(["a","A"],function(Z,ye,gt){return gt._isPm=gt._locale.isPM(Z),gt._meridiem=Z,gt}),un(["h","hh"],function(Z,ye,gt){return ye[mi]=ni(Z),ft(gt).bigHour=!0,gt}),un("hmm",function(Z,ye,gt){const Ei=Z.length-2;return ye[mi]=ni(Z.substr(0,Ei)),ye[Vi]=ni(Z.substr(Ei)),ft(gt).bigHour=!0,gt}),un("hmmss",function(Z,ye,gt){const Ei=Z.length-4,fn=Z.length-2;return ye[mi]=ni(Z.substr(0,Ei)),ye[Vi]=ni(Z.substr(Ei,2)),ye[_i]=ni(Z.substr(fn)),ft(gt).bigHour=!0,gt}),un("Hmm",function(Z,ye,gt){const Ei=Z.length-2;return ye[mi]=ni(Z.substr(0,Ei)),ye[Vi]=ni(Z.substr(Ei)),gt}),un("Hmmss",function(Z,ye,gt){const Ei=Z.length-4,fn=Z.length-2;return ye[mi]=ni(Z.substr(0,Ei)),ye[Vi]=ni(Z.substr(Ei,2)),ye[_i]=ni(Z.substr(fn)),gt})}(),function q(){Bi("DDD",["DDDD",3,!1],"DDDo",function(y){return ne(y).toString(10)}),si("dayOfYear","DDD"),Xe("dayOfYear",4),pt("DDD",Cr),pt("DDDD",ur),un(["DDD","DDDD"],function(y,O,S){return S._dayOfYear=ni(y),S})}(),function Na(){Bi("d",null,"do",function(y,O){return en(y,O.isUTC).toString(10)}),Bi("dd",null,null,function(y,O){return O.locale.weekdaysMin(y,O.format,O.isUTC)}),Bi("ddd",null,null,function(y,O){return O.locale.weekdaysShort(y,O.format,O.isUTC)}),Bi("dddd",null,null,function(y,O){return O.locale.weekdays(y,O.format,O.isUTC)}),Bi("e",null,null,function(y,O){return vn(y,O.locale,O.isUTC).toString(10)}),Bi("E",null,null,function(y,O){return function D(y,O){return en(y,O)||7}(y,O.isUTC).toString(10)}),si("day","d"),si("weekday","e"),si("isoWeekday","E"),Xe("day",11),Xe("weekday",11),Xe("isoWeekday",11),pt("d",er),pt("e",er),pt("E",er),pt("dd",function(y,O){return O.weekdaysMinRegex(y)}),pt("ddd",function(y,O){return O.weekdaysShortRegex(y)}),pt("dddd",function(y,O){return O.weekdaysRegex(y)}),Et(["dd","ddd","dddd"],function(y,O,S,Y){const Z=S._locale.weekdaysParse(y,Y,S._strict);return null!=Z?O.d=Z:ft(S).invalidWeekday=!!y,S}),Et(["d","e","E"],function(y,O,S,Y){return O[Y]=ni(y),S})}(),function ze(){Bi("D",["DD",2,!1],"Do",function(y,O){return _n(y,O.isUTC).toString(10)}),si("date","D"),Xe("date",9),pt("D",er),pt("DD",er,Tn),pt("Do",function(y,O){return O._dayOfMonthOrdinalParse||O._ordinalParse}),un(["D","DD"],ri),un("Do",function(y,O,S){return O[ri]=ni(y.match(er)[0]),S})}())}(),y?function Ra(y){let O,S,Y=0;for(;Y<y.length;){const Z=pl(y[Y]).split("-");let ye=Z.length;for(O=pl(y[Y+1]),O=O?O.split("-"):null;ye>0;){if(S=Ll(Z.slice(0,ye).join("-")),S)return S;if(O&&O.length>=ye&&Wr(Z,O,!0)>=ye-1)break;ye--}Y++}return null}(ot(y)?y:[y]):Lo}const Hs=["year","quarter","month","week","day","hours","minutes","seconds","milliseconds"],Or=Hs.reduce((y,O)=>(y[O]=!0,y),{});function Pl(y){return y<0?Math.floor(y):Math.ceil(y)}function zl(y){return 4800*y/146097}function Us(y){return 146097*y/4800}let Co=Math.round;const Mt_ss=44,Mt_s=45,Mt_m=45,Mt_h=22,Mt_d=26,Mt_M=11;function ac(y,O,S,Y,Z){return Z.relativeTime(O||1,!!S,y,Y)}class lo{constructor(O,S={}){this._data={},this._locale=ls(),this._locale=S&&S._locale||ls();const Z=O.year||0,ye=O.quarter||0,gt=O.month||0,Ei=O.week||0,fn=O.day||0,Qr=O.hours||0,ws=O.minutes||0,no=O.seconds||0,Qo=O.milliseconds||0;return this._isValid=function fl(y){if(Object.keys(y).some(Y=>Y in Or&&null===y[Y]||isNaN(y[Y])))return!1;let S=!1;for(let Y=0;Y<Hs.length;++Y)if(y[Hs[Y]]){if(S)return!1;y[Hs[Y]]!==ni(y[Hs[Y]])&&(S=!0)}return!0}(O),this._milliseconds=+Qo+1e3*no+60*ws*1e3+1e3*Qr*60*60,this._days=+fn+7*Ei,this._months=+gt+3*ye+12*Z,function Rl(y){let O=y._milliseconds,S=y._days,Y=y._months;const Z=y._data;O>=0&&S>=0&&Y>=0||O<=0&&S<=0&&Y<=0||(O+=864e5*Pl(Us(Y)+S),S=0,Y=0),Z.milliseconds=O%1e3;const ye=De(O/1e3);Z.seconds=ye%60;const gt=De(ye/60);Z.minutes=gt%60;const Ei=De(gt/60);Z.hours=Ei%24,S+=De(Ei/24);const fn=De(zl(S));Y+=fn,S-=Pl(Us(fn));const Qr=De(Y/12);return Y%=12,Z.day=S,Z.month=Y,Z.year=Qr,y}(this)}isValid(){return this._isValid}humanize(O){if(!this.isValid())return this.localeData().invalidDate;const S=this.localeData();let Y=function ps(y,O,S){const Y=el(y).abs(),Z=Co(Y.as("s")),ye=Co(Y.as("m")),gt=Co(Y.as("h")),Ei=Co(Y.as("d")),fn=Co(Y.as("M")),Qr=Co(Y.as("y")),ws=Z<=Mt_ss&&["s",Z]||Z<Mt_s&&["ss",Z]||ye<=1&&["m"]||ye<Mt_m&&["mm",ye]||gt<=1&&["h"]||gt<Mt_h&&["hh",gt]||Ei<=1&&["d"]||Ei<Mt_d&&["dd",Ei]||fn<=1&&["M"]||fn<Mt_M&&["MM",fn]||Qr<=1&&["y"]||["yy",Qr];return ac.apply(null,[ws[0],ws[1],O,+y>0,S])}(this,!O,S);return O&&(Y=S.pastFuture(+this,Y)),S.postformat(Y)}localeData(){return this._locale}locale(O){return O?(this._locale=ls(O)||this._locale,this):this._locale._abbr}abs(){const O=Math.abs,S=this._data;return this._milliseconds=O(this._milliseconds),this._days=O(this._days),this._months=O(this._months),S.milliseconds=O(S.milliseconds),S.seconds=O(S.seconds),S.minutes=O(S.minutes),S.hours=O(S.hours),S.month=O(S.month),S.year=O(S.year),this}as(O){if(!this.isValid())return NaN;let S,Y;const Z=this._milliseconds,ye=Xt(O);if("month"===ye||"year"===ye)return S=this._days+Z/864e5,Y=this._months+zl(S),"month"===ye?Y:Y/12;switch(S=this._days+Math.round(Us(this._months)),ye){case"week":return S/7+Z/6048e5;case"day":return S+Z/864e5;case"hours":return 24*S+Z/36e5;case"minutes":return 1440*S+Z/6e4;case"seconds":return 86400*S+Z/1e3;case"milliseconds":return Math.floor(864e5*S)+Z;default:throw new Error(`Unknown unit ${ye}`)}}valueOf(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ni(this._months/12):NaN}}function oa(y){if(null==y._isValid){const O=ft(y),S=Array.prototype.some.call(O.parsedDateParts,function(Z){return null!=Z});let Y=!isNaN(y._d&&y._d.getTime())&&O.overflow<0&&!O.empty&&!O.invalidMonth&&!O.invalidWeekday&&!O.weekdayMismatch&&!O.nullInput&&!O.invalidFormat&&!O.userInvalidated&&(!O.meridiem||O.meridiem&&S);if(y._strict&&(Y=Y&&0===O.charsLeftOver&&0===O.unusedTokens.length&&void 0===O.bigHour),null!=Object.isFrozen&&Object.isFrozen(y))return Y;y._isValid=Y}return y._isValid}function qa(y,O){return y._d=new Date(NaN),Object.assign(ft(y),O||{userInvalidated:!0}),y}const wa=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aa=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xc=/Z|[+-]\d\d(?::?\d\d)?/,Ws=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/,!0],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/,!0],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/,!0],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/,!0],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/,!0],["YYYYMMDD",/\d{8}/,!0],["GGGG[W]WWE",/\d{4}W\d{3}/,!0],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/,!0]],Vo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Go=/^\/?Date\((\-?\d+)/i,Ka={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},jo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function co(y){if(!Be(y._i))return y;const O=y._i,S=wa.exec(O)||aa.exec(O);let Y,Z,ye,gt,Ei,fn;if(!S)return y._isValid=!1,y;for(Ei=0,fn=Ws.length;Ei<fn;Ei++)if(Ws[Ei][1].exec(S[1])){Z=Ws[Ei][0],Y=!1!==Ws[Ei][2];break}if(null==Z)return y._isValid=!1,y;if(S[3]){for(Ei=0,fn=Vo.length;Ei<fn;Ei++)if(Vo[Ei][1].exec(S[3])){ye=(S[2]||" ")+Vo[Ei][0];break}if(null==ye)return y._isValid=!1,y}if(!Y&&null!=ye)return y._isValid=!1,y;if(S[4]){if(!xc.exec(S[4]))return y._isValid=!1,y;gt="Z"}return y._f=Z+(ye||"")+(gt||""),Fa(y)}function uo(y){const O=parseInt(y,10);return O<=49?O+2e3:O}function za(y){if(!Be(y._i))return y;const O=jo.exec(function yu(y){return y.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(y._i));if(!O)return function zs(y){return y._isValid=!1,y}(y);const S=function wc(y,O,S,Y,Z,ye){const gt=[uo(y),pe.indexOf(O),parseInt(S,10),parseInt(Y,10),parseInt(Z,10)];return ye&&gt.push(parseInt(ye,10)),gt}(O[4],O[3],O[2],O[5],O[6],O[7]);return function la(y,O,S){return!y||Le.indexOf(y)===new Date(O[0],O[1],O[2]).getDay()||(ft(S).weekdayMismatch=!0,S._isValid=!1,!1)}(O[1],S,y)&&(y._a=S,y._tzm=function Ja(y,O,S){if(y)return Ka[y];if(O)return 0;{const Y=parseInt(S,10),Z=Y%100;return(Y-Z)/100*60+Z}}(O[8],O[9],O[10]),y._d=Nn.apply(null,y._a),y._d.setUTCMinutes(y._d.getUTCMinutes()-y._tzm),ft(y).rfc2822=!0),y}function ys(y,O,S,Y,Z=0){const ye=ls(S||"en");if(!ye)throw new Error(`Locale "${S}" is not defined, please add it with "defineLocale(...)"`);const Ei=function Cc(y,O,S,Y,Z=0){if(!nt(y))return S.invalidDate;const ye=ml(O,S);return mn[ye]=mn[ye]||function on(y){const O=y.match(ei),S=O.length,Y=new Array(S);for(let Z=0;Z<S;Z++)Y[Z]=Vn[O[Z]]?Vn[O[Z]]:Wn(O[Z]);return function(Z,ye,gt,Ei=0){let fn="";for(let Qr=0;Qr<S;Qr++)fn+=mt(Y[Qr])?Y[Qr].call(null,Z,{format:y,locale:ye,isUTC:gt,offset:Ei}):Y[Qr];return fn}}(ye),mn[ye](y,S,Y,Z)}(y,O||(Y?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"),ye,Y,Z);return Ei&&ye.postformat(Ei)}function ml(y,O){let S=y,Y=5;const Z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ye=gt=>O.formatLongDate(gt)||gt;for(Z.lastIndex=0;Y>=0&&Z.test(S);)S=S.replace(Z,ye),Z.lastIndex=0,Y-=1;return S}function Oo(y,O,S){return y??O??S}function Kr(y){const O=[];let S,Y,Z;if(y._d)return y;const ye=function ho(y){const O=new Date;return y._useUTC?[O.getUTCFullYear(),O.getUTCMonth(),O.getUTCDate()]:[O.getFullYear(),O.getMonth(),O.getDate()]}(y);for(y._w&&null==y._a[ri]&&null==y._a[qt]&&function gl(y){let O,S,Y,Z,ye,gt,Ei;const fn=y._w;if(null!=fn.GG||null!=fn.W||null!=fn.E)Z=1,ye=4,O=Oo(fn.GG,y._a[ht],me(new Date,1,4).year),S=Oo(fn.W,1),Y=Oo(fn.E,1),(Y<1||Y>7)&&(Ei=!0);else{Z=y._locale._week.dow,ye=y._locale._week.doy;const Qr=me(new Date,Z,ye);O=Oo(fn.gg,y._a[ht],Qr.year),S=Oo(fn.w,Qr.week),null!=fn.d?(Y=fn.d,(Y<0||Y>6)&&(Ei=!0)):null!=fn.e?(Y=fn.e+Z,(fn.e<0||fn.e>6)&&(Ei=!0)):Y=Z}S<1||S>Se(O,Z,ye)?ft(y)._overflowWeeks=!0:null!=Ei?ft(y)._overflowWeekday=!0:(gt=function we(y,O,S,Y,Z){const Ei=1+7*(O-1)+(7+S-Y)%7+ge(y,Y,Z);let fn,Qr;return Ei<=0?(fn=y-1,Qr=Pi(fn)+Ei):Ei>Pi(y)?(fn=y+1,Qr=Ei-Pi(y)):(fn=y,Qr=Ei),{year:fn,dayOfYear:Qr}}(O,S,Y,Z,ye),y._a[ht]=gt.year,y._dayOfYear=gt.dayOfYear)}(y),null!=y._dayOfYear&&(Z=Oo(y._a[ht],ye[ht]),(y._dayOfYear>Pi(Z)||0===y._dayOfYear)&&(ft(y)._overflowDayOfYear=!0),Y=new Date(Date.UTC(Z,0,y._dayOfYear)),y._a[qt]=Y.getUTCMonth(),y._a[ri]=Y.getUTCDate()),S=0;S<3&&null==y._a[S];++S)y._a[S]=O[S]=ye[S];for(;S<7;S++)y._a[S]=O[S]=null==y._a[S]?2===S?1:0:y._a[S];24===y._a[mi]&&0===y._a[Vi]&&0===y._a[_i]&&0===y._a[Ci]&&(y._nextDay=!0,y._a[mi]=0),y._d=(y._useUTC?Nn:An).apply(null,O);const gt=y._useUTC?y._d.getUTCDay():y._d.getDay();return null!=y._tzm&&y._d.setUTCMinutes(y._d.getUTCMinutes()-y._tzm),y._nextDay&&(y._a[mi]=24),y._w&&typeof y._w.d<"u"&&y._w.d!==gt&&(ft(y).weekdayMismatch=!0),y}function cc(y){let O;const S=y._a;return S&&-2===ft(y).overflow&&(O=S[qt]<0||S[qt]>11?qt:S[ri]<1||S[ri]>yt(S[ht],S[qt])?ri:S[mi]<0||S[mi]>24||24===S[mi]&&(0!==S[Vi]||0!==S[_i]||0!==S[Ci])?mi:S[Vi]<0||S[Vi]>59?Vi:S[_i]<0||S[_i]>59?_i:S[Ci]<0||S[Ci]>999?Ci:-1,ft(y)._overflowDayOfYear&&(O<ht||O>ri)&&(O=ri),ft(y)._overflowWeeks&&-1===O&&(O=Fi),ft(y)._overflowWeekday&&-1===O&&(O=qi),ft(y).overflow=O),y}const Eo="ISO_8601",Yc="RFC_2822";function Fa(y){if(y._f===Eo)return co(y);if(y._f===Yc)return za(y);if(y._a=[],ft(y).empty=!0,ot(y._f)||!y._i&&0!==y._i)return y;let O=y._i.toString(),S=0;const Y=O.length,Z=ml(y._f,y._locale).match(ei)||[];let ye,gt,Ei,fn;for(ye=0;ye<Z.length;ye++)gt=Z[ye],Ei=(O.match(ui(gt,y._locale))||[])[0],Ei&&(fn=O.substr(0,O.indexOf(Ei)),fn.length>0&&ft(y).unusedInput.push(fn),O=O.slice(O.indexOf(Ei)+Ei.length),S+=Ei.length),Vn[gt]?(Ei?ft(y).empty=!1:ft(y).unusedTokens.push(gt),St(gt,Ei,y)):y._strict&&!Ei&&ft(y).unusedTokens.push(gt);return ft(y).charsLeftOver=Y-S,O.length>0&&ft(y).unusedInput.push(O),y._a[mi]<=12&&!0===ft(y).bigHour&&y._a[mi]>0&&(ft(y).bigHour=void 0),ft(y).parsedDateParts=y._a.slice(0),ft(y).meridiem=y._meridiem,y._a[mi]=function bu(y,O,S){let Y=O;if(null==S)return Y;if(null!=y.meridiemHour)return y.meridiemHour(Y,S);if(null==y.isPM)return Y;const Z=y.isPM(S);return Z&&Y<12&&(Y+=12),!Z&&12===Y&&(Y=0),Y}(y._locale,y._a[mi],y._meridiem),Kr(y),cc(y)}function Uo(y){const O=cc(function ca(y){let O=y._i;const S=y._f;return y._locale=y._locale||ls(y._l),null===O||void 0===S&&""===O?qa(y,{nullInput:!0}):(Be(O)&&(y._i=O=y._locale.preparse(O,S)),Ge(O)?(y._d=F(O),y):(ot(S)?function Hc(y){let O,S,Y,Z,ye;if(!y._f||0===y._f.length)return ft(y).invalidFormat=!0,qa(y);for(ye=0;ye<y._f.length;ye++)Z=0,O=Object.assign({},y),null!=y._useUTC&&(O._useUTC=y._useUTC),O._f=y._f[ye],Fa(O),oa(O)&&(Z+=ft(O).charsLeftOver,Z+=10*ft(O).unusedTokens.length,ft(O).score=Z,(null==Y||Z<Y)&&(Y=Z,S=O));Object.assign(y,S||O)}(y):S?Fa(y):function Wo(y){const O=y._i;if(We(O))y._d=new Date;else if(Ge(O))y._d=F(O);else if(Be(O))!function lc(y){if(!Be(y._i))return y;const O=Go.exec(y._i);null!==O?y._d=new Date(+O[1]):(co(y),!1!==y._isValid||(delete y._isValid,za(y),!1!==y._isValid||(delete y._isValid,qa(y))))}(y);else if(ot(O)&&O.length){const S=O.slice(0);y._a=S.map(Y=>Be(Y)?parseInt(Y,10):Y),Kr(y)}else if(wt(O))!function xu(y){if(y._d)return y;const O=y._i;if(wt(O)){const S=function jt(y){const O={};let S,Y;for(Y in y)vt(y,Y)&&(S=Xt(Y),S&&(O[S]=y[Y]));return O}(O);y._a=[S.year,S.month,S.day,S.hours,S.minutes,S.seconds,S.milliseconds].map(Y=>Be(Y)?parseInt(Y,10):Y)}return Kr(y)}(y);else{if(!Pt(O))return qa(y);y._d=new Date(O)}}(y),oa(y)||(y._d=null),y))}(y));return O._d=new Date(null!=O._d?O._d.getTime():NaN),oa(Object.assign({},O,{_isValid:null}))||(O._d=new Date(NaN)),O}function _l(y,O,S,Y,Z){return Ge(y)?y:function vl(y,O,S,Y,Z){const ye={};let gt=y;return(wt(gt)&&function ai(y){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(y).length;let O;for(O in y)if(y.hasOwnProperty(O))return!1;return!0}(gt)||ot(gt)&&0===gt.length)&&(gt=void 0),ye._useUTC=ye._isUTC=Z,ye._l=S,ye._i=gt,ye._f=O,ye._strict=Y,Uo(ye)}(y,O,S,Y,Z)._d}function $o(y){return y instanceof Date?new Date(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()):null}function Ca(y){return y<0?-1*Math.round(-1*y):Math.round(y)}function fs(y,O,S="milliseconds"){return!(!y||!O)&&("milliseconds"===S?y.valueOf()>O.valueOf():O.valueOf()<U(y,S).valueOf())}function So(y,O,S="milliseconds"){return!(!y||!O)&&("milliseconds"===S?y.valueOf()<O.valueOf():$(y,S).valueOf()<O.valueOf())}function Po(y,O,S="milliseconds"){if(!y||!O)return!1;if("milliseconds"===S)return y.valueOf()===O.valueOf();const Y=O.valueOf();return U(y,S).valueOf()<=Y&&Y<=$(y,S).valueOf()}const Fl=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Qa=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function el(y,O,S={}){const Y=function Xo(y,O){if(null==y)return{};if(function Za(y){return y instanceof lo}(y))return{milliseconds:y._milliseconds,day:y._days,month:y._months};if(Pt(y))return O?{[O]:y}:{milliseconds:y};if(Be(y)){let S=Fl.exec(y);if(S){const Y="-"===S[1]?-1:1;return{year:0,day:ni(S[ri])*Y,hours:ni(S[mi])*Y,minutes:ni(S[Vi])*Y,seconds:ni(S[_i])*Y,milliseconds:ni(Ca(1e3*ni(S[Ci])))*Y}}if(S=Qa.exec(y),S){const Y="-"===S[1]?-1:1;return{year:To(S[2],Y),month:To(S[3],Y),week:To(S[4],Y),day:To(S[5],Y),hours:To(S[6],Y),minutes:To(S[7],Y),seconds:To(S[8],Y)}}}if(wt(y)&&("from"in y||"to"in y)){const S=function ua(y,O){if(!nt(y)||!nt(O))return{milliseconds:0,months:0};let S;const Y=function vu(y,O,S={}){if(!S._isUTC)return y;const Y=F(O),Z=6e4*(S._offset||0),ye=y.valueOf()-Y.valueOf()+Z;return Y.setTime(Y.valueOf()+ye),Y}(O,y,{_offset:y.getTimezoneOffset()});return So(y,Y)?S=tl(y,Y):(S=tl(Y,y),S.milliseconds=-S.milliseconds,S.months=-S.months),S}(_l(y.from),_l(y.to));return{milliseconds:S.milliseconds,month:S.months}}return y}(y,O);return new lo(Y,S)}function To(y,O){const S=y&&parseFloat(y.replace(",","."));return(isNaN(S)?0:S)*O}function tl(y,O){const S={milliseconds:0,months:0};return S.months=Xi(O)-Xi(y)+12*(ji(O)-ji(y)),fs(Ro(F(y),S.months,"month"),O)&&--S.months,S.milliseconds=+O-+Ro(F(y),S.months,"month"),S}function Ro(y,O,S,Y){return Sa(y,el(O,S),1,Y)}function Sa(y,O,S,Y){const Z=O._milliseconds,ye=Ca(O._days),gt=Ca(O._months);return gt&&o(y,Xi(y,Y)+gt*S,Y),ye&&M(y,_n(y,Y)+ye*S,Y),Z&&function I(y,O){y.setTime(O)}(y,function wn(y){return y.getTime()}(y)+Z*S),F(y)}function Ya(y,O,S=ls(),Y){const Z=en(y,Y),ye=function Sc(y,O){if(!Be(y))return y;const S=parseInt(y,10);if(!isNaN(S))return S;const Y=O.weekdaysParse(y);return Pt(Y)?Y:null}(O,S);return Ro(y,ye-Z,"day")}function vn(y,O=ls(),S){return(en(y,S)+7-O.firstDayOfWeek())%7}const Ue=function(y){return 0===y?0:1===y?1:2===y?2:y%100>=3&&y%100<=10?3:y%100>=11?4:5},Vt={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},oi=function(y){return function(O,S){const Y=Ue(O);let Z=Vt[y][Ue(O)];return 2===Y&&(Z=Z[S?0:1]),Z.replace(/%d/i,O.toString())}};"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),oi("s"),oi("s"),oi("m"),oi("m"),oi("h"),oi("h"),oi("d"),oi("d"),oi("M"),oi("M"),oi("y"),oi("y"),"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"gen._feb._mar._abr._mai._jun._jul._ago._set._oct._nov._des.".split("_"),"ene_feb_mar_abr_mai_jun_jul_ago_set_oct_nov_des".split("_"),"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),"diu._dil._dim._dix._dij._div._dis.".split("_"),"dg_dl_dt_dc_dj_dv_ds".split("_");const $s="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),Ta="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");(function(y,O){let S,Y=[];for(S=0;S<12;S++)Y[S]=new RegExp("^"+y[S]+"$|^"+O[S]+"$","i")})($s,Ta),function(y){let O,S=[];for(O=0;O<12;O++)S[O]=new RegExp("^"+y[O]+"$","i")}(Ta),function(y){let O,S=[];for(O=0;O<12;O++)S[O]=new RegExp("^"+y[O]+"$","i")}($s),"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"Januar_Februar_Marts_April_Maj_Juni_Juli_August_September_Oktober_November_December".split("_"),"Jan_Feb_Mar_Apr_Maj_Jun_Jul_Aug_Sep_Okt_Nov_Dec".split("_"),"S\xf8ndag_Mandag_Tirsdag_Onsdag_Torsdag_Fredag_L\xf8rdag".split("_"),"S\xf8n_Man_Tir_Ons_Tor_Fre_L\xf8r".split("_"),"S\xf8_Ma_Ti_On_To_Fr_L\xf8".split("_"),"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),"P_E_T_K_N_R_L".split("_"),"P_E_T_K_N_R_L".split("_"),"nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),"xan_feb_mar_abr_mai_xu\xf1_xul_ago_set_out_nov_dec".split("_"),"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),"vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" "),"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),"v_h_k_sze_cs_p_szo".split("_"),"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),"Sij_Velj_O\u017eu_Tra_Svi_Lip_Srp_Kol_Ruj_Lis_Stu_Pro".split("_"),"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),"Ne_Po_Ut_Sr_\u010ce_Pe_Su".split("_"),"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),"dom_lun_mar_mer_gio_ven_sab".split("_"),"do_lu_ma_me_gi_ve_sa".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),"S_P_A_T_K_Pn_\u0160".split("_"),"Janv\u0101ris_Febru\u0101ris_Marts_Apr\u012blis_Maijs_J\u016bnijs_J\u016blijs_Augusts_Septembris_Oktobris_Novembris_Decembris".split("_"),"Jan_Feb_Mar_Apr_Mai_J\u016bn_J\u016bl_Aug_Sep_Okt_Nov_Dec".split("_"),"Sv\u0113tdiena_Pirmdiena_Otrdiena_Tre\u0161diena_Ceturtdiena_Piektdiena_Sestdiena".split("_"),"Sv\u0113td_Pirmd_Otrd_Tre\u0161d_Ceturtd_Piektd_Sestd".split("_"),"Sv_Pi_Ot_Tr_Ce_Pk_Se".split("_"),"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),"jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_"),"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),"ne_po_to_sr_\u010de_pe_so".split("_"),"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),"E Diel\xeb_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),"Di_He_Ma_Me_En_Pr_Sh".split("_"),"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_");const Ls={abbr:"th-be",months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:y=>"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===y,meridiem:(y,O,S)=>y<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07",calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},preparse(y,O){const S=Ls.longDateFormat[O]?Ls.longDateFormat[O]:O;return-1!==S.indexOf("YYYY",S.length-4)?y.substr(0,y.length-4)+(parseInt(y.substr(y.length-4),10)-543):y},getFullYear:(y,O=!1)=>543+(O?y.getUTCFullYear():y.getFullYear())};function Ps(y){return function(O){return y+"\u043e"+(11===Gi(O)?"\u0431":"")+"] LT"}}"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_"),"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),Ps("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),Ps("[\u0417\u0430\u0432\u0442\u0440\u0430 "),Ps("[\u0412\u0447\u043e\u0440\u0430 "),Ps("[\u0423] dddd ["),"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_");var Cu=Rt(140),Cl=Rt(6504),Vl=Rt(6700),dc=Rt(756),El=Rt(3252),Gc=Rt(3920),qu=Rt(208);class jc extends Vl.g{constructor(O,S,Y){super(O),S.pipe((0,Gc.y)(dc.M)).pipe((0,qu.K)((gt,Ei)=>Ei?Y(gt,Ei):gt,O)).subscribe(gt=>this.next(gt))}}class Va extends El._{constructor(O,S,Y){super(),this._dispatcher=O,this._reducer=S,this.source=Y}select(O){return(this.source?.pipe((0,Fe.k)(O))||(new El._).pipe((0,Fe.k)(O))).pipe((0,Oe.a)())}lift(O){const S=new Va(this._dispatcher,this._reducer,this);return S.operator=O,S}dispatch(O){this._dispatcher.next(O)}next(O){this._dispatcher.next(O)}error(O){this._dispatcher.error(O)}complete(){}}var is=Rt(1368);function Ep(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function Eu(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(Z.minuteStep))}),k.wR5(2,"span",2),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canIncrementMinutes||!S.isEditable)}}function Fh(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0"),k.C$Y())}function Su(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(Z.secondsStep))}),k.wR5(2,"span",2),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canIncrementSeconds||!S.isEditable)}}function zf(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function Sp(y,O){1&y&&k.wR5(0,"td")}function _d(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0:\xa0"),k.C$Y())}function Qn(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4)(1,"input",5),k.qCj("wheel",function(Z){k.usT(S);const ye=k.GaO();return ye.prevDef(Z),k.CGJ(ye.changeMinutes(ye.minuteStep*ye.wheelSign(Z),"wheel"))})("keydown.ArrowUp",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(Z.minuteStep,"key"))})("keydown.ArrowDown",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(-Z.minuteStep,"key"))})("change",function(Z){k.usT(S);const ye=k.GaO();return k.CGJ(ye.updateMinutes(Z.target))}),k.C$Y()()}if(2&y){const S=k.GaO();k.eAK("has-error",S.invalidMinutes),k.yG2(),k.eAK("is-invalid",S.invalidMinutes),k.E7m("placeholder",S.minutesPlaceholder)("readonly",S.readonlyInput)("disabled",S.disabled)("value",S.minutes),k.e48("aria-label",S.labelMinutes)}}function Ku(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0:\xa0"),k.C$Y())}function tg(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4)(1,"input",5),k.qCj("wheel",function(Z){k.usT(S);const ye=k.GaO();return ye.prevDef(Z),k.CGJ(ye.changeSeconds(ye.secondsStep*ye.wheelSign(Z),"wheel"))})("keydown.ArrowUp",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(Z.secondsStep,"key"))})("keydown.ArrowDown",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(-Z.secondsStep,"key"))})("change",function(Z){k.usT(S);const ye=k.GaO();return k.CGJ(ye.updateSeconds(Z.target))}),k.C$Y()()}if(2&y){const S=k.GaO();k.eAK("has-error",S.invalidSeconds),k.yG2(),k.eAK("is-invalid",S.invalidSeconds),k.E7m("placeholder",S.secondsPlaceholder)("readonly",S.readonlyInput)("disabled",S.disabled)("value",S.seconds),k.e48("aria-label",S.labelSeconds)}}function ig(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function Ff(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"button",8),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.toggleMeridian())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.isEditable||!S.canToggleMeridian),k.E7m("disabled",!S.isEditable||!S.canToggleMeridian),k.yG2(),k.oRS("",S.meridian," ")}}function Bh(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function Nh(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(-Z.minuteStep))}),k.wR5(2,"span",7),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canDecrementMinutes||!S.isEditable)}}function Tp(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0"),k.C$Y())}function Zd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(-Z.secondsStep))}),k.wR5(2,"span",7),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canDecrementSeconds||!S.isEditable)}}function yd(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function Uc(y,O){1&y&&k.wR5(0,"td")}let zo=(()=>{class y{static#e=this.WRITE_VALUE="[timepicker] write value from ng model";static#t=this.CHANGE_HOURS="[timepicker] change hours";static#i=this.CHANGE_MINUTES="[timepicker] change minutes";static#n=this.CHANGE_SECONDS="[timepicker] change seconds";static#r=this.SET_TIME_UNIT="[timepicker] set time unit";static#s=this.UPDATE_CONTROLS="[timepicker] update controls";writeValue(S){return{type:y.WRITE_VALUE,payload:S}}changeHours(S){return{type:y.CHANGE_HOURS,payload:S}}changeMinutes(S){return{type:y.CHANGE_MINUTES,payload:S}}changeSeconds(S){return{type:y.CHANGE_SECONDS,payload:S}}setTime(S){return{type:y.SET_TIME_UNIT,payload:S}}updateControls(S){return{type:y.UPDATE_CONTROLS,payload:S}}static#o=this.\u0275fac=function(Y){return new(Y||y)};static#a=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})();const Wc=10,Tu=24,ku=12,ng=60,rg=60;function kp(y){return!(!y||y instanceof Date&&isNaN(y.getHours()))&&("string"!=typeof y||kp(new Date(y)))}function Mp(y,O){return!(y.min&&O<y.min||y.max&&O>y.max)}function Mu(y){return typeof y>"u"?NaN:"number"==typeof y?y:parseInt(y,Wc)}function Sl(y,O=!1){const S=Mu(y);return isNaN(S)||S<0||S>(O?ku:Tu)?NaN:S}function qd(y){const O=Mu(y);return isNaN(O)||O<0||O>ng?NaN:O}function Bf(y){const O=Mu(y);return isNaN(O)||O<0||O>rg?NaN:O}function Xs(y){return"string"==typeof y?new Date(y):y}function hn(y,O){if(!y)return hn(hc(new Date,0,0,0),O);if(!O)return y;let S=y.getHours(),Y=y.getMinutes(),Z=y.getSeconds();return O.hour&&(S+=Mu(O.hour)),O.minute&&(Y+=Mu(O.minute)),O.seconds&&(Z+=Mu(O.seconds)),hc(y,S,Y,Z)}function Ac(y,O){let S=Sl(O.hour);const Y=qd(O.minute),Z=Bf(O.seconds)||0;return O.isPM&&12!==S&&(S+=ku),y?isNaN(S)||isNaN(Y)?y:hc(y,S,Y,Z):isNaN(S)||isNaN(Y)?y:hc(new Date,S,Y,Z)}function hc(y,O,S,Y){const Z=new Date(y.getFullYear(),y.getMonth(),y.getDate(),O,S,Y,y.getMilliseconds());return Z.setFullYear(y.getFullYear()),Z.setMonth(y.getMonth()),Z.setDate(y.getDate()),Z}function pa(y){const O=y.toString();return O.length>1?O:`0${O}`}function Yh(y,O){return!isNaN(Sl(y,O))}function $c(y){return!isNaN(qd(y))}function Ko(y){return!isNaN(Bf(y))}function Au(y,O="0",S="0",Y){return Yh(y,Y)&&$c(O)&&Ko(S)}function Tl(y,O){return!(y.readonlyInput||y.disabled||O&&("wheel"===O.source&&!y.mousewheel||"key"===O.source&&!y.arrowkeys))}function Xc(y){const{hourStep:O,minuteStep:S,secondsStep:Y,readonlyInput:Z,disabled:ye,mousewheel:gt,arrowkeys:Ei,showSpinners:fn,showMeridian:Qr,showSeconds:ws,meridians:no,min:Qo,max:Bu}=y;return{hourStep:O,minuteStep:S,secondsStep:Y,readonlyInput:Z,disabled:ye,mousewheel:gt,arrowkeys:Ei,showSpinners:fn,showMeridian:Qr,showSeconds:ws,meridians:no,min:Qo,max:Bu}}let Kd=(()=>{class y{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.allowEmptyTime=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const Jd={value:void 0,config:new Kd,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function Ga(y=Jd,O){switch(O.type){case zo.WRITE_VALUE:return Object.assign({},y,{value:O.payload});case zo.CHANGE_HOURS:{if(!Tl(y.config,O.payload)||!function Ai(y,O){return!(!y.step||y.step>0&&!O.canIncrementHours||y.step<0&&!O.canDecrementHours)}(O.payload,y.controls))return y;const S=hn(y.value,{hour:O.payload.step});return!y.config.max&&!y.config.min||Mp(y.config,S)?Object.assign({},y,{value:S}):y}case zo.CHANGE_MINUTES:{if(!Tl(y.config,O.payload)||!function Qu(y,O){return!(!y.step||y.step>0&&!O.canIncrementMinutes||y.step<0&&!O.canDecrementMinutes)}(O.payload,y.controls))return y;const S=hn(y.value,{minute:O.payload.step});return!y.config.max&&!y.config.min||Mp(y.config,S)?Object.assign({},y,{value:S}):y}case zo.CHANGE_SECONDS:{if(!Tl(y.config,O.payload)||!function Hh(y,O){return!(!y.step||y.step>0&&!O.canIncrementSeconds||y.step<0&&!O.canDecrementSeconds)}(O.payload,y.controls))return y;const S=hn(y.value,{seconds:O.payload.step});return!y.config.max&&!y.config.min||Mp(y.config,S)?Object.assign({},y,{value:S}):y}case zo.SET_TIME_UNIT:{if(!Tl(y.config))return y;const S=Ac(y.value,O.payload);return Object.assign({},y,{value:S})}case zo.UPDATE_CONTROLS:{const S=function Zc(y,O){const{min:Z,max:ye,hourStep:gt,minuteStep:Ei,secondsStep:fn,showSeconds:Qr}=O,ws={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!y)return ws;if(ye){const no=hn(y,{hour:gt});if(ws.canIncrementHours=ye>no&&y.getHours()+gt<24,!ws.canIncrementHours){const Qo=hn(y,{minute:Ei});ws.canIncrementMinutes=Qr?ye>Qo:ye>=Qo}if(!ws.canIncrementMinutes){const Qo=hn(y,{seconds:fn});ws.canIncrementSeconds=ye>=Qo}y.getHours()<12&&(ws.canToggleMeridian=hn(y,{hour:12})<ye)}if(Z){const no=hn(y,{hour:-gt});if(ws.canDecrementHours=Z<no,!ws.canDecrementHours){const Qo=hn(y,{minute:-Ei});ws.canDecrementMinutes=Qr?Z<Qo:Z<=Qo}if(!ws.canDecrementMinutes){const Qo=hn(y,{seconds:-fn});ws.canDecrementSeconds=Z<=Qo}y.getHours()>=12&&(ws.canToggleMeridian=hn(y,{hour:-12})>Z)}return ws}(y.value,O.payload),Y={value:y.value,config:O.payload,controls:S};return y.config.showMeridian!==Y.config.showMeridian&&y.value&&(Y.value=new Date(y.value)),Object.assign({},y,Y)}default:return y}}let qc=(()=>{class y extends Va{constructor(){const S=new Vl.g({type:"[mini-ngrx] dispatcher init"});super(S,Ga,new jc(Jd,S,Ga))}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})();const Kc={provide:Cl.Y6,useExisting:(0,k.wd)(()=>ed),multi:!0};let ed=(()=>{class y{constructor(S,Y,Z,ye){this._cd=Y,this._store=Z,this._timepickerActions=ye,this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showMeridian=!0,this.showMinutes=!0,this.showSeconds=!1,this.meridians=["AM","PM"],this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.isValid=new k._w7,this.meridianChange=new k._w7,this.hours="",this.minutes="",this.seconds="",this.meridian="",this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.labelHours="hours",this.labelMinutes="minutes",this.labelSeconds="seconds",this.canIncrementHours=!0,this.canIncrementMinutes=!0,this.canIncrementSeconds=!0,this.canDecrementHours=!0,this.canDecrementMinutes=!0,this.canDecrementSeconds=!0,this.canToggleMeridian=!0,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.config=S,Object.assign(this,this.config),this.timepickerSub=Z.select(gt=>gt.value).subscribe(gt=>{this._renderTime(gt),this.onChange(gt),this._store.dispatch(this._timepickerActions.updateControls(Xc(this)))}),Z.select(gt=>gt.controls).subscribe(gt=>{const Ei=Au(this.hours,this.minutes,this.seconds,this.isPM()),fn=this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||Ei;this.isValid.emit(fn),Object.assign(this,gt),Y.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(S){S.preventDefault()}wheelSign(S){return-1*Math.sign(S.deltaY||0)}ngOnChanges(){this._store.dispatch(this._timepickerActions.updateControls(Xc(this)))}changeHours(S,Y=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:S,source:Y}))}changeMinutes(S,Y=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:S,source:Y}))}changeSeconds(S,Y=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:S,source:Y}))}updateHours(S){this.resetValidation(),this.hours=S.value;const Y=Yh(this.hours,this.isPM())&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||Y))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(S){this.resetValidation(),this.minutes=S.value;const Y=$c(this.minutes)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||Y))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(S){this.resetValidation(),this.seconds=S.value;const Y=Ko(this.seconds)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||Y))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function bd(y,O,S){const Y=Ac(new Date,y);return!(!Y||O&&Y>O||S&&Y<S)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}isOneOfDatesIsEmpty(){return function Ju(y,O,S){return 0===y.length||0===O.length||0===S.length}(this.hours,this.minutes,this.seconds)}_updateTime(){const Z=Au(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM());if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||Z))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(S){kp(S)?(this.resetValidation(),this._store.dispatch(this._timepickerActions.writeValue(Xs(S)))):null==S&&this._store.dispatch(this._timepickerActions.writeValue())}registerOnChange(S){this.onChange=S}registerOnTouched(S){this.onTouched=S}setDisabledState(S){this.disabled=S,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub?.unsubscribe()}_renderTime(S){if(!S||!kp(S))return this.hours="",this.minutes="",this.seconds="",this.meridian=this.meridians[0],void this.meridianChange.emit(this.meridian);const Y=Xs(S);if(!Y)return;let ye=Y.getHours();this.showMeridian&&(this.meridian=this.meridians[ye>=12?1:0],this.meridianChange.emit(this.meridian),ye%=12,0===ye&&(ye=12)),this.hours=pa(ye),this.minutes=pa(Y.getMinutes()),this.seconds=pa(Y.getUTCSeconds())}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(Kd),k.GI1(k.kD9),k.GI1(qc),k.GI1(zo))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["timepicker"]],inputs:{hourStep:"hourStep",minuteStep:"minuteStep",secondsStep:"secondsStep",readonlyInput:"readonlyInput",disabled:"disabled",mousewheel:"mousewheel",arrowkeys:"arrowkeys",showSpinners:"showSpinners",showMeridian:"showMeridian",showMinutes:"showMinutes",showSeconds:"showSeconds",meridians:"meridians",min:"min",max:"max",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",secondsPlaceholder:"secondsPlaceholder"},outputs:{isValid:"isValid",meridianChange:"meridianChange"},features:[k.M5G([Kc,qc]),k.SYr],decls:31,vars:33,consts:[[1,"text-center",3,"hidden"],["href","javascript:void(0);",1,"btn","btn-link",3,"click"],[1,"bs-chevron","bs-chevron-up"],[4,"ngIf"],[1,"form-group","mb-3"],["type","text","maxlength","2",1,"form-control","text-center","bs-timepicker-field",3,"placeholder","readonly","disabled","value","wheel","keydown.ArrowUp","keydown.ArrowDown","change"],["class","form-group mb-3",3,"has-error",4,"ngIf"],[1,"bs-chevron","bs-chevron-down"],["type","button",1,"btn","btn-default","text-center",3,"disabled","click"]],template:function(Y,Z){1&Y&&(k.I0R(0,"table")(1,"tbody")(2,"tr",0)(3,"td")(4,"a",1),k.qCj("click",function(){return Z.changeHours(Z.hourStep)}),k.wR5(5,"span",2),k.C$Y()(),k.yuY(6,Ep,2,0,"td",3)(7,Eu,3,2,"td",3)(8,Fh,2,0,"td",3)(9,Su,3,2,"td",3)(10,zf,2,0,"td",3)(11,Sp,1,0,"td",3),k.C$Y(),k.I0R(12,"tr")(13,"td",4)(14,"input",5),k.qCj("wheel",function(gt){return Z.prevDef(gt),Z.changeHours(Z.hourStep*Z.wheelSign(gt),"wheel")})("keydown.ArrowUp",function(){return Z.changeHours(Z.hourStep,"key")})("keydown.ArrowDown",function(){return Z.changeHours(-Z.hourStep,"key")})("change",function(gt){return Z.updateHours(gt.target)}),k.C$Y()(),k.yuY(15,_d,2,0,"td",3)(16,Qn,2,9,"td",6)(17,Ku,2,0,"td",3)(18,tg,2,9,"td",6)(19,ig,2,0,"td",3)(20,Ff,3,4,"td",3),k.C$Y(),k.I0R(21,"tr",0)(22,"td")(23,"a",1),k.qCj("click",function(){return Z.changeHours(-Z.hourStep)}),k.wR5(24,"span",7),k.C$Y()(),k.yuY(25,Bh,2,0,"td",3)(26,Nh,3,2,"td",3)(27,Tp,2,0,"td",3)(28,Zd,3,2,"td",3)(29,yd,2,0,"td",3)(30,Uc,1,0,"td",3),k.C$Y()()()),2&Y&&(k.yG2(2),k.E7m("hidden",!Z.showSpinners),k.yG2(2),k.eAK("disabled",!Z.canIncrementHours||!Z.isEditable),k.yG2(2),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(2),k.eAK("has-error",Z.invalidHours),k.yG2(),k.eAK("is-invalid",Z.invalidHours),k.E7m("placeholder",Z.hoursPlaceholder)("readonly",Z.readonlyInput)("disabled",Z.disabled)("value",Z.hours),k.e48("aria-label",Z.labelHours),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("hidden",!Z.showSpinners),k.yG2(2),k.eAK("disabled",!Z.canDecrementHours||!Z.isEditable),k.yG2(2),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("ngIf",Z.showMeridian))},dependencies:[is.u_],styles:[".bs-chevron{border-style:solid;display:block;width:9px;height:9px;position:relative;border-width:3px 0px 0 3px}.bs-chevron-up{transform:rotate(45deg);top:2px}.bs-chevron-down{transform:rotate(-135deg);top:-2px}.bs-timepicker-field{width:65px;padding:.375rem .55rem}\n"],encapsulation:2,changeDetection:0})}return y})(),Vh=(()=>{class y{static forRoot(){return{ngModule:y,providers:[zo,qc]}}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275mod=k.a4G({type:y});static#i=this.\u0275inj=k.s3X({providers:[qc],imports:[is.MD]})}return y})();var fa=Rt(9684),Du=Rt(6928),rl=Rt(6040),Jc=Rt(5657),ma=Rt(7995),sl=Rt(6552);function Ap(y,O){if(1&y){const S=k.KQA();k.I0R(0,"button",2),k.qCj("click",function(){const ye=k.usT(S).$implicit,gt=k.GaO();return k.CGJ(gt.selectFromRanges(ye))}),k.OEk(1),k.C$Y()}if(2&y){const S=O.$implicit,Y=k.GaO();k.eAK("selected",S.value===Y.selectedRange),k.yG2(),k.oRS(" ",S.label," ")}}function Zs(y,O){1&y&&k.wR5(0,"bs-current-date",4)}function Nf(y,O){1&y&&k.wR5(0,"bs-timepicker")}const Qc=[[["bs-datepicker-navigation-view"]],"*"],ol=["bs-datepicker-navigation-view","*"],og=["bsDatepickerDayDecorator",""];function Yf(y,O){if(1&y){const S=k.KQA();k.SAx(0),k.OEk(1," \u200b "),k.I0R(2,"button",2),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.view("month"))}),k.I0R(3,"span"),k.OEk(4),k.C$Y()(),k.k70()}if(2&y){const S=k.GaO();k.yG2(2),k.E7m("disabled",S.isDisabled),k.yG2(2),k.cNF(S.calendar.monthTitle)}}function Hf(y,O){1&y&&k.wR5(0,"th")}function Dc(y,O){if(1&y&&(k.I0R(0,"th",5),k.OEk(1),k.C$Y()),2&y){const S=O.index,Y=k.GaO();k.yG2(),k.oRS("",Y.calendar.weekdays[S]," ")}}function td(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",11),k.qCj("click",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.selectWeek(Z))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO(2).index,Y=k.GaO();k.yG2(),k.cNF(Y.calendar.weekNumbers[S])}}function Qd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",12),k.qCj("click",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.selectWeek(Z))})("mouseenter",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.weekHoverHandler(Z,!0))})("mouseleave",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.weekHoverHandler(Z,!1))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO(2).index,Y=k.GaO();k.yG2(),k.cNF(Y.calendar.weekNumbers[S])}}function vs(y,O){if(1&y&&(k.I0R(0,"td",8),k.yuY(1,td,2,1,"span",9)(2,Qd,2,1,"span",10),k.C$Y()),2&y){const S=k.GaO(2);k.eAK("active-week",S.isWeekHovered),k.yG2(),k.E7m("ngIf",S.isiOS),k.yG2(),k.E7m("ngIf",!S.isiOS)}}function Vf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",17),k.qCj("click",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.selectDay(Z))})("mouseenter",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!0))})("mouseleave",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!1))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO().$implicit;k._6D("tooltip",S.tooltipText),k.E7m("day",S),k.yG2(),k.oRS("",S.label," 3")}}function Gf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",18),k.qCj("click",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.selectDay(Z))})("mouseenter",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!0))})("mouseleave",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!1))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO().$implicit;k.E7m("day",S),k.yG2(),k.oRS("",S.label," 2")}}function eu(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",19),k.qCj("click",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.selectDay(Z))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO().$implicit;k.E7m("day",S),k.yG2(),k.oRS("",S.label," 1")}}function Dp(y,O){if(1&y&&(k.I0R(0,"td",13),k.yuY(1,Vf,2,3,"span",14)(2,Gf,2,2,"span",15)(3,eu,2,2,"span",16),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngIf",!S.isiOS&&S.isShowTooltip),k.yG2(),k.E7m("ngIf",!S.isiOS&&!S.isShowTooltip),k.yG2(),k.E7m("ngIf",S.isiOS)}}function Gh(y,O){if(1&y&&(k.I0R(0,"tr"),k.yuY(1,vs,3,4,"td",6)(2,Dp,4,3,"td",7),k.C$Y()),2&y){const S=O.$implicit,Y=k.GaO();k.yG2(),k.E7m("ngIf",Y.options&&Y.options.showWeekNumbers),k.yG2(),k.E7m("ngForOf",S.days)}}function Ip(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4),k.qCj("click",function(){const ye=k.usT(S).$implicit,gt=k.GaO(2);return k.CGJ(gt.viewMonth(ye))})("mouseenter",function(){const ye=k.usT(S).$implicit,gt=k.GaO(2);return k.CGJ(gt.hoverMonth(ye,!0))})("mouseleave",function(){const ye=k.usT(S).$implicit,gt=k.GaO(2);return k.CGJ(gt.hoverMonth(ye,!1))}),k.I0R(1,"span"),k.OEk(2),k.C$Y()()}if(2&y){const S=O.$implicit;k.eAK("disabled",S.isDisabled)("is-highlighted",S.isHovered),k.yG2(),k.eAK("selected",S.isSelected),k.yG2(),k.cNF(S.label)}}function eh(y,O){if(1&y&&(k.I0R(0,"tr"),k.yuY(1,Ip,3,7,"td",3),k.C$Y()),2&y){const S=O.$implicit;k.yG2(),k.E7m("ngForOf",S)}}function jh(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4),k.qCj("click",function(){const ye=k.usT(S).$implicit,gt=k.GaO(2);return k.CGJ(gt.viewYear(ye))})("mouseenter",function(){const ye=k.usT(S).$implicit,gt=k.GaO(2);return k.CGJ(gt.hoverYear(ye,!0))})("mouseleave",function(){const ye=k.usT(S).$implicit,gt=k.GaO(2);return k.CGJ(gt.hoverYear(ye,!1))}),k.I0R(1,"span"),k.OEk(2),k.C$Y()()}if(2&y){const S=O.$implicit;k.eAK("disabled",S.isDisabled)("is-highlighted",S.isHovered),k.yG2(),k.eAK("selected",S.isSelected),k.yG2(),k.cNF(S.label)}}function ga(y,O){if(1&y&&(k.I0R(0,"tr"),k.yuY(1,jh,3,7,"td",3),k.C$Y()),2&y){const S=O.$implicit;k.yG2(),k.E7m("ngForOf",S)}}const Uh=["startTP"];function Aa(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-days-calendar-view",11),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.dayHoverHandler(Z))})("onHoverWeek",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.weekHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.daySelectHandler(Z))}),k.wVc(1,"async"),k.C$Y()}if(2&y){const S=O.$implicit,Y=k.GaO(3);k.eAK("bs-datepicker-multiple",Y.multipleCalendars),k.E7m("calendar",S)("isDisabled",Y.isDatePickerDisabled)("options",k.kDX(1,5,Y.options$))}}function id(y,O){if(1&y&&k.wR5(0,"timepicker",13,16),2&y){const S=k.GaO(4);k.E7m("disabled",S.isDatePickerDisabled)}}function Lp(y,O){if(1&y&&(k.I0R(0,"div",12),k.wR5(1,"timepicker",13,14),k.yuY(3,id,2,1,"timepicker",15),k.C$Y()),2&y){const S=k.GaO(3);k.yG2(),k.E7m("disabled",S.isDatePickerDisabled),k.yG2(2),k.E7m("ngIf",S.isRangePicker)}}function Ic(y,O){if(1&y&&(k.SAx(0),k.I0R(1,"div",8),k.yuY(2,Aa,2,7,"bs-days-calendar-view",9),k.wVc(3,"async"),k.C$Y(),k.yuY(4,Lp,4,2,"div",10),k.k70()),2&y){const S=k.GaO(2);k.yG2(2),k.E7m("ngForOf",k.kDX(3,2,S.daysCalendar$)),k.yG2(2),k.E7m("ngIf",S.withTimepicker)}}function jf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-month-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,Y=k.GaO(3);k.eAK("bs-datepicker-multiple",Y.multipleCalendars),k.E7m("calendar",S)}}function nd(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,jf,1,3,"bs-month-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.monthsCalendar))}}function Gl(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-years-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,Y=k.GaO(3);k.eAK("bs-datepicker-multiple",Y.multipleCalendars),k.E7m("calendar",S)}}function jl(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,Gl,1,3,"bs-years-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.yearsCalendar))}}function al(y,O){1&y&&(k.I0R(0,"div",19)(1,"button",20),k.OEk(2,"Apply"),k.C$Y(),k.I0R(3,"button",21),k.OEk(4,"Cancel"),k.C$Y()())}function Wh(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",24)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.setToday())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("today-left","left"===S.todayPos)("today-right","right"===S.todayPos)("today-center","center"===S.todayPos),k.yG2(2),k.cNF(S.todayBtnLbl)}}function Ul(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",26)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.clearDate())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("clear-left","left"===S.clearPos)("clear-right","right"===S.clearPos)("clear-center","center"===S.clearPos),k.yG2(2),k.cNF(S.clearBtnLbl)}}function Uf(y,O){if(1&y&&(k.I0R(0,"div",19),k.yuY(1,Wh,3,7,"div",22)(2,Ul,3,7,"div",23),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngIf",S.showTodayBtn),k.yG2(),k.E7m("ngIf",S.showClearBtn)}}function Wf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",27)(1,"bs-custom-date-view",28),k.qCj("onSelect",function(Z){k.usT(S);const ye=k.GaO(2);return k.CGJ(ye.setRangeOnCalendar(Z))}),k.C$Y()()}if(2&y){const S=k.GaO(2);k.yG2(),k.E7m("selectedRange",S.chosenRange)("ranges",S.customRanges)("customRangeLabel",S.customRangeBtnLbl)}}function th(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",1)(1,"div",2),k.qCj("@datepickerAnimation.done",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.positionServiceEnable())}),k.I0R(2,"div",3),k.wVc(3,"async"),k.yuY(4,Ic,5,4,"ng-container",4)(5,nd,3,3,"div",5)(6,jl,3,3,"div",5),k.C$Y(),k.yuY(7,al,5,0,"div",6)(8,Uf,3,2,"div",6),k.C$Y(),k.yuY(9,Wf,2,3,"div",7),k.C$Y()}if(2&y){const S=k.GaO();k.E7m("ngClass",S.containerClass),k.yG2(),k.E7m("@datepickerAnimation",S.animationState),k.yG2(),k.E7m("ngSwitch",k.kDX(3,9,S.viewMode)),k.yG2(2),k.E7m("ngSwitchCase","day"),k.yG2(),k.E7m("ngSwitchCase","month"),k.yG2(),k.E7m("ngSwitchCase","year"),k.yG2(),k.E7m("ngIf",!1),k.yG2(),k.E7m("ngIf",S.showTodayBtn||S.showClearBtn),k.yG2(),k.E7m("ngIf",S.customRanges&&S.customRanges.length>0)}}const Rp=["endTP"];function Iu(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-days-calendar-view",11),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.dayHoverHandler(Z))})("onHoverWeek",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.weekHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.daySelectHandler(Z))}),k.wVc(1,"async"),k.C$Y()}if(2&y){const S=O.$implicit,Y=k.GaO(3);k.eAK("bs-datepicker-multiple",Y.multipleCalendars),k.E7m("calendar",S)("isDisabled",Y.isDatePickerDisabled)("options",k.kDX(1,5,Y.options$))}}function $h(y,O){if(1&y&&k.wR5(0,"timepicker",13,16),2&y){const S=k.GaO(4);k.E7m("disabled",S.isDatePickerDisabled)}}function zp(y,O){if(1&y&&(k.I0R(0,"div",12),k.wR5(1,"timepicker",13,14),k.yuY(3,$h,2,1,"timepicker",15),k.C$Y()),2&y){const S=k.GaO(3);k.yG2(),k.E7m("disabled",S.isDatePickerDisabled),k.yG2(2),k.E7m("ngIf",S.isRangePicker)}}function Zf(y,O){if(1&y&&(k.SAx(0),k.I0R(1,"div",8),k.yuY(2,Iu,2,7,"bs-days-calendar-view",9),k.wVc(3,"async"),k.C$Y(),k.yuY(4,zp,4,2,"div",10),k.k70()),2&y){const S=k.GaO(2);k.yG2(2),k.E7m("ngForOf",k.kDX(3,2,S.daysCalendar$)),k.yG2(2),k.E7m("ngIf",S.withTimepicker)}}function ah(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-month-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,Y=k.GaO(3);k.eAK("bs-datepicker-multiple",Y.multipleCalendars),k.E7m("calendar",S)}}function Fp(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,ah,1,3,"bs-month-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.monthsCalendar))}}function sd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-years-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,Y=k.GaO(3);k.eAK("bs-datepicker-multiple",Y.multipleCalendars),k.E7m("calendar",S)}}function qf(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,sd,1,3,"bs-years-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.yearsCalendar))}}function Mo(y,O){1&y&&(k.I0R(0,"div",19)(1,"button",20),k.OEk(2,"Apply"),k.C$Y(),k.I0R(3,"button",21),k.OEk(4,"Cancel"),k.C$Y()())}function us(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",24)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.setToday())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("today-left","left"===S.todayPos)("today-right","right"===S.todayPos)("today-center","center"===S.todayPos),k.yG2(2),k.cNF(S.todayBtnLbl)}}function wd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",26)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.clearDate())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("clear-left","left"===S.clearPos)("clear-right","right"===S.clearPos)("clear-center","center"===S.clearPos),k.yG2(2),k.cNF(S.clearBtnLbl)}}function Oc(y,O){if(1&y&&(k.I0R(0,"div",19),k.yuY(1,us,3,7,"div",22)(2,wd,3,7,"div",23),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngIf",S.showTodayBtn),k.yG2(),k.E7m("ngIf",S.showClearBtn)}}function Pc(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",27)(1,"bs-custom-date-view",28),k.qCj("onSelect",function(Z){k.usT(S);const ye=k.GaO(2);return k.CGJ(ye.setRangeOnCalendar(Z))}),k.C$Y()()}if(2&y){const S=k.GaO(2);k.yG2(),k.E7m("selectedRange",S.chosenRange)("ranges",S.customRanges)("customRangeLabel",S.customRangeBtnLbl)}}function Xl(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",1)(1,"div",2),k.qCj("@datepickerAnimation.done",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.positionServiceEnable())}),k.I0R(2,"div",3),k.wVc(3,"async"),k.yuY(4,Zf,5,4,"ng-container",4)(5,Fp,3,3,"div",5)(6,qf,3,3,"div",5),k.C$Y(),k.yuY(7,Mo,5,0,"div",6)(8,Oc,3,2,"div",6),k.C$Y(),k.yuY(9,Pc,2,3,"div",7),k.C$Y()}if(2&y){const S=k.GaO();k.E7m("ngClass",S.containerClass),k.yG2(),k.E7m("@datepickerAnimation",S.animationState),k.yG2(),k.E7m("ngSwitch",k.kDX(3,9,S.viewMode)),k.yG2(2),k.E7m("ngSwitchCase","day"),k.yG2(),k.E7m("ngSwitchCase","month"),k.yG2(),k.E7m("ngSwitchCase","year"),k.yG2(),k.E7m("ngIf",!1),k.yG2(),k.E7m("ngIf",S.showTodayBtn||S.showClearBtn),k.yG2(),k.E7m("ngIf",S.customRanges&&S.customRanges.length>0)}}let ja=(()=>{class y{constructor(){this.adaptivePosition=!1,this.useUtc=!1,this.isAnimated=!1,this.startView="day",this.returnFocusToInput=!1,this.containerClass="theme-green",this.displayMonths=1,this.showWeekNumbers=!0,this.dateInputFormat="L",this.rangeSeparator=" - ",this.rangeInputFormat="L",this.monthTitle="MMMM",this.yearTitle="YYYY",this.dayLabel="D",this.monthLabel="MMMM",this.yearLabel="YYYY",this.weekNumbers="w",this.showTodayButton=!1,this.showClearButton=!1,this.todayPosition="center",this.clearPosition="right",this.todayButtonLabel="Today",this.clearButtonLabel="Clear",this.customRangeButtonLabel="Custom Range",this.withTimepicker=!1,this.allowedPositions=["top","bottom"],this.keepDatepickerOpened=!1,this.keepDatesOutOfRules=!1}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const Ed="220ms cubic-bezier(0, 0, 0.2, 1)",Sd=(0,fa.gV)("datepickerAnimation",[(0,fa.K2)("animated-down",(0,fa.wb)({height:"*",overflow:"hidden"})),(0,fa.aK)("* => animated-down",[(0,fa.wb)({height:0,overflow:"hidden"}),(0,fa.Cs)(Ed)]),(0,fa.K2)("animated-up",(0,fa.wb)({height:"*",overflow:"hidden"})),(0,fa.aK)("* => animated-up",[(0,fa.wb)({height:"*",overflow:"hidden"}),(0,fa.Cs)(Ed)]),(0,fa.aK)("* => unanimated",(0,fa.Cs)("0s"))]);class Zh{constructor(){this.containerClass="",this.customRanges=[],this.chosenRange=[],this._daysCalendarSub=new Du.wH,this.selectedTimeSub=new Du.wH}set minDate(O){this._effects?.setMinDate(O)}set maxDate(O){this._effects?.setMaxDate(O)}set daysDisabled(O){this._effects?.setDaysDisabled(O)}set datesDisabled(O){this._effects?.setDatesDisabled(O)}set datesEnabled(O){this._effects?.setDatesEnabled(O)}set isDisabled(O){this._effects?.setDisabled(O)}set dateCustomClasses(O){this._effects?.setDateCustomClasses(O)}set dateTooltipTexts(O){this._effects?.setDateTooltipTexts(O)}set daysCalendar$(O){this._daysCalendar$=O,this._daysCalendarSub.unsubscribe(),this._daysCalendarSub.add(this._daysCalendar$.subscribe(S=>{this.multipleCalendars=!!S&&S.length>1}))}get daysCalendar$(){return this._daysCalendar$}setViewMode(O){}navigateTo(O){}dayHoverHandler(O){}weekHoverHandler(O){}monthHoverHandler(O){}yearHoverHandler(O){}timeSelectHandler(O,S){}daySelectHandler(O){}monthSelectHandler(O){}yearSelectHandler(O){}setRangeOnCalendar(O){}setToday(){}clearDate(){}_stopPropagation(O){O.stopPropagation()}}let fo=(()=>{class y{static#e=this.CALCULATE="[datepicker] calculate dates matrix";static#t=this.FORMAT="[datepicker] format datepicker values";static#i=this.FLAG="[datepicker] set flags";static#n=this.SELECT="[datepicker] select date";static#r=this.NAVIGATE_OFFSET="[datepicker] shift view date";static#s=this.NAVIGATE_TO="[datepicker] change view date";static#o=this.SET_OPTIONS="[datepicker] update render options";static#a=this.HOVER="[datepicker] hover date";static#l=this.CHANGE_VIEWMODE="[datepicker] switch view mode";static#c=this.SET_MIN_DATE="[datepicker] set min date";static#u=this.SET_MAX_DATE="[datepicker] set max date";static#d=this.SET_DAYSDISABLED="[datepicker] set days disabled";static#h=this.SET_DATESDISABLED="[datepicker] set dates disabled";static#p=this.SET_DATESENABLED="[datepicker] set dates enabled";static#f=this.SET_IS_DISABLED="[datepicker] set is disabled";static#m=this.SET_DATE_CUSTOM_CLASSES="[datepicker] set date custom classes";static#g=this.SET_DATE_TOOLTIP_TEXTS="[datepicker] set date tooltip texts";static#v=this.SET_LOCALE="[datepicker] set datepicker locale";static#_=this.SELECT_TIME="[datepicker] select time";static#y=this.SELECT_RANGE="[daterangepicker] select dates range";calculate(){return{type:y.CALCULATE}}format(){return{type:y.FORMAT}}flag(){return{type:y.FLAG}}select(S){return{type:y.SELECT,payload:S}}selectTime(S,Y){return{type:y.SELECT_TIME,payload:{date:S,index:Y}}}changeViewMode(S){return{type:y.CHANGE_VIEWMODE,payload:S}}navigateTo(S){return{type:y.NAVIGATE_TO,payload:S}}navigateStep(S){return{type:y.NAVIGATE_OFFSET,payload:S}}setOptions(S){return{type:y.SET_OPTIONS,payload:S}}selectRange(S){return{type:y.SELECT_RANGE,payload:S}}hoverDay(S){return{type:y.HOVER,payload:S.isHovered?S.cell.date:null}}minDate(S){return{type:y.SET_MIN_DATE,payload:S}}maxDate(S){return{type:y.SET_MAX_DATE,payload:S}}daysDisabled(S){return{type:y.SET_DAYSDISABLED,payload:S}}datesDisabled(S){return{type:y.SET_DATESDISABLED,payload:S}}datesEnabled(S){return{type:y.SET_DATESENABLED,payload:S}}isDisabled(S){return{type:y.SET_IS_DISABLED,payload:S}}setDateCustomClasses(S){return{type:y.SET_DATE_CUSTOM_CLASSES,payload:S}}setDateTooltipTexts(S){return{type:y.SET_DATE_TOOLTIP_TEXTS,payload:S}}setLocale(S){return{type:y.SET_LOCALE,payload:S}}static#b=this.\u0275fac=function(Y){return new(Y||y)};static#x=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})(),od=(()=>{class y{constructor(){this._defaultLocale="en",this._locale=new Vl.g(this._defaultLocale),this._localeChange=this._locale.asObservable()}get locale(){return this._locale}get localeChange(){return this._localeChange}get currentLocale(){return this._locale.getValue()}use(S){S!==this.currentLocale&&this._locale.next(S)}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})(),Td=(()=>{class y{constructor(S,Y){this._actions=S,this._localeService=Y,this._subs=[]}init(S){return this._store=S,this}setValue(S){this._store?.dispatch(this._actions.select(S))}setRangeValue(S){this._store?.dispatch(this._actions.selectRange(S))}setMinDate(S){return this._store?.dispatch(this._actions.minDate(S)),this}setMaxDate(S){return this._store?.dispatch(this._actions.maxDate(S)),this}setDaysDisabled(S){return this._store?.dispatch(this._actions.daysDisabled(S)),this}setDatesDisabled(S){return this._store?.dispatch(this._actions.datesDisabled(S)),this}setDatesEnabled(S){return this._store?.dispatch(this._actions.datesEnabled(S)),this}setDisabled(S){return this._store?.dispatch(this._actions.isDisabled(S)),this}setDateCustomClasses(S){return this._store?.dispatch(this._actions.setDateCustomClasses(S)),this}setDateTooltipTexts(S){return this._store?.dispatch(this._actions.setDateTooltipTexts(S)),this}setOptions(S){const Y=Object.assign({locale:this._localeService.currentLocale},S);return this._store?.dispatch(this._actions.setOptions(Y)),this}setBindings(S){return this._store?(S.selectedTime=this._store.select(Y=>Y.selectedTime).pipe((0,pn.I)(Y=>!!Y)),S.daysCalendar$=this._store.select(Y=>Y.flaggedMonths).pipe((0,pn.I)(Y=>!!Y)),S.monthsCalendar=this._store.select(Y=>Y.flaggedMonthsCalendar).pipe((0,pn.I)(Y=>!!Y)),S.yearsCalendar=this._store.select(Y=>Y.yearsCalendarFlagged).pipe((0,pn.I)(Y=>!!Y)),S.viewMode=this._store.select(Y=>Y.view?.mode),S.options$=(0,rl.E)([this._store.select(Y=>Y.showWeekNumbers),this._store.select(Y=>Y.displayMonths)]).pipe((0,Fe.k)(Y=>({showWeekNumbers:Y[0],displayMonths:Y[1]}))),this):this}setEventHandlers(S){return S.setViewMode=Y=>{this._store?.dispatch(this._actions.changeViewMode(Y))},S.navigateTo=Y=>{this._store?.dispatch(this._actions.navigateStep(Y.step))},S.dayHoverHandler=Y=>{const Z=Y.cell;Z.isOtherMonth||Z.isDisabled||(this._store?.dispatch(this._actions.hoverDay(Y)),Z.isHovered=Y.isHovered)},S.monthHoverHandler=Y=>{Y.cell.isHovered=Y.isHovered},S.yearHoverHandler=Y=>{Y.cell.isHovered=Y.isHovered},this}registerDatepickerSideEffects(){return this._store?(this._subs.push(this._store.select(S=>S.view).subscribe(()=>{this._store?.dispatch(this._actions.calculate())})),this._subs.push(this._store.select(S=>S.monthsModel).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.format()))),this._subs.push(this._store.select(S=>S.formattedMonths).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.selectedDate).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.selectedRange).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.monthsCalendar).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.yearsCalendarModel).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.hoveredDate).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.dateCustomClasses).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.dateTooltipTexts).pipe((0,pn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._localeService.localeChange.subscribe(S=>this._store?.dispatch(this._actions.setLocale(S)))),this):this}destroy(){for(const S of this._subs)S.unsubscribe()}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.CoB(fo),k.CoB(od))};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})();const Vp={date:new Date,mode:"day"},qh=Object.assign(new ja,{locale:"en",view:Vp,selectedRange:[],selectedTime:[],monthViewOptions:{width:7,height:6}});function ch(y,O,S){const Y=O&&So($(y,"month"),O,"day"),Z=S&&fs(U(y,"month"),S,"day");return Y||Z||!1}function ad(y,O,S){const Y=O&&So($(y,"year"),O,"day"),Z=S&&fs(U(y,"year"),S,"day");return Y||Z||!1}function Lu(y,O,S){return!!(O&&ot(O)&&O.length)&&(S&&"year"===S&&!O[0].getDate()?O.some(Y=>Po(y,Y,"year")):O.some(Y=>Po(y,Y,"date")))}function kd(y,O,S){return!!(O&&ot(O)&&O.length)&&!O.some(Y=>Po(y,Y,S||"date"))}function Ou(y,O=0){const S=y&&y.yearsCalendarModel&&y.yearsCalendarModel[O];return S?.years[0]&&S.years[0][0]&&S.years[0][0].date}function Vs(y,O){return!y||!O||!y.length&&!y[0].value||y.forEach(S=>(!S||!S.value||S.value instanceof Date||!(S.value instanceof Array&&S.value.length)||(S.value=Pu(S.value,O)),y)),y}function Gp(y,O){return!y||!O||y instanceof Array&&!y.length||y instanceof Date?y:Pu(y,O)}function Pu(y,O){return y instanceof Array?y.map(Y=>Y&&(fs(Y,O,"date")&&(Y=O),Y)):y}function uh(y){return y&&Kh(y)}function tm(y){return y?.length&&y.map(O=>O&&Kh(O)),y}function Kh(y){const O=new Date;return y.setMilliseconds(O.getMilliseconds()),y.setSeconds(O.getSeconds()),y.setMinutes(O.getMinutes()),y.setHours(O.getHours()),y}function Ru(y,O){let S=y.initialDate;const Y=new Array(y.height);for(let Z=0;Z<y.height;Z++){Y[Z]=new Array(y.width);for(let ye=0;ye<y.width;ye++)Y[Z][ye]=O(S),S=Tt(S,y.shift)}return Y}function Md(y,O){const S=function Ti(y){return An(y.getFullYear(),y.getMonth(),1,y.getHours(),y.getMinutes(),y.getSeconds())}(y),Y=function em(y,O){if(function Dr(y,O){return y.getDay()===Number(O)}(y,O.firstDayOfWeek))return y;const Y=function iu(y,O){const S=Number(O);if(isNaN(S))return 0;if(0===S)return y;const Y=y-S%7;return Y<0?Y+7:Y}(en(y),O.firstDayOfWeek);return Tt(y,{day:-Y})}(S,O);return{daysMatrix:Ru({width:O.width||0,height:O.height||0,initialDate:Y,shift:{day:1}},gt=>gt),month:S}}function Jh(y,O,S){return y.map(Y=>Y[0]?ys(Y[0],O,S):"")}function im(y){const O=ls(y),S=O.weekdaysShort(),Y=O.firstDayOfWeek();return[...S.slice(Y),...S.slice(0,Y)]}function Ua(y,O){return!O||y>=O}const dh=4,pc=3,cg={month:1};function Wp(y,O){const S=U(y,"year");return{months:Ru({width:pc,height:dh,initialDate:S,shift:cg},ye=>({date:ye,label:ys(ye,O.monthLabel,O.locale)})),monthTitle:"",yearTitle:ys(y,O.yearTitle,O.locale),hideRightArrow:!1,hideLeftArrow:!1,disableRightArrow:!1,disableLeftArrow:!1}}const hh=4,Ad=4,ph=hh*Ad,zu=-1*(Math.floor(ph/2)-1),fh={year:1};function nm(y,O,S){const Y=function rm(y,O){return O&&y.getFullYear()>=O.getFullYear()&&y.getFullYear()<O.getFullYear()+ph?O:Tt(y,{year:zu})}(y,S),ye=Ru({width:Ad,height:hh,initialDate:Y,shift:fh},Ei=>({date:Ei,label:ys(Ei,O.yearLabel,O.locale)})),gt=function sm(y,O){return`${ys(y[0][0].date,O.yearTitle,O.locale)} - ${ys(y[hh-1][Ad-1].date,O.yearTitle,O.locale)}`}(ye,O);return{years:ye,monthTitle:"",yearTitle:gt,hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}function Xp(y,O){!y||!isNaN(y.getTime())||(y.setHours(O.getHours()),y.setMinutes(O.getMinutes()),y.setSeconds(O.getSeconds()),y.setMilliseconds(O.getMilliseconds()))}function Zp(y=qh,O){switch(O.type){case fo.CALCULATE:return function dg(y){if(!y.view)return y;let O;O=y.displayOneMonthRange&&gh(y.view.date,y.minDate,y.maxDate)?1:y.displayMonths||1;let S=y.view.date;if("day"===y.view.mode&&y.monthViewOptions){y.showPreviousMonth&&y.selectedRange&&0===y.selectedRange.length&&(S=Tt(S,{month:-1})),y.monthViewOptions.firstDayOfWeek=ls(y.locale).firstDayOfWeek();let Y=new Array(O);for(let Z=0;Z<O;Z++)Y[Z]=Md(S,y.monthViewOptions),S=Tt(S,{month:1});if(y.preventChangeToNextMonth&&y.flaggedMonths&&y.hoveredDate){const Z=Md(y.view.date,y.monthViewOptions);y.flaggedMonths.length&&y.flaggedMonths[1].month.getMonth()===Z.month.getMonth()&&(Y=y.flaggedMonths.map(ye=>y.monthViewOptions?Md(ye.month,y.monthViewOptions):null).filter(ye=>null!==ye))}return Object.assign({},y,{monthsModel:Y})}if("month"===y.view.mode){const Y=new Array(O);for(let Z=0;Z<O;Z++)Y[Z]=Wp(S,_s(y)),S=Tt(S,{year:1});return Object.assign({},y,{monthsCalendar:Y})}if("year"===y.view.mode){const Y=new Array(O);for(let Z=0;Z<O;Z++)Y[Z]=nm(S,_s(y),"year"===y.minMode?Ou(y,Z):void 0),S=Tt(S,{year:ph});return Object.assign({},y,{yearsCalendarModel:Y})}return y}(y);case fo.FORMAT:return function mh(y){if(!y.view)return y;if("day"===y.view.mode&&y.monthsModel){const Y=y.monthsModel.map((Z,ye)=>function jp(y,O,S){return{month:y.month,monthTitle:ys(y.month,O.monthTitle,O.locale),yearTitle:ys(y.month,O.yearTitle,O.locale),weekNumbers:Jh(y.daysMatrix,O.weekNumbers,O.locale),weekdays:im(O.locale),weeks:y.daysMatrix.map((Y,Z)=>({days:Y.map((ye,gt)=>({date:ye,label:ys(ye,O.dayLabel,O.locale),monthIndex:S,weekIndex:Z,dayIndex:gt}))})),hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}(Z,_s(y),ye));return Object.assign({},y,{formattedMonths:Y})}const O=y.displayMonths||1;let S=y.view.date;if("month"===y.view.mode){const Y=new Array(O);for(let Z=0;Z<O;Z++)Y[Z]=Wp(S,_s(y)),S=Tt(S,{year:1});return Object.assign({},y,{monthsCalendar:Y})}if("year"===y.view.mode){const Y=new Array(O);for(let Z=0;Z<O;Z++)Y[Z]=nm(S,_s(y)),S=Tt(S,{year:16});return Object.assign({},y,{yearsCalendarModel:Y})}return y}(y);case fo.FLAG:return function om(y){if(!y.view)return y;const O=gh(y.view.date,y.minDate,y.maxDate)?1:y.displayMonths;if(y.formattedMonths&&"day"===y.view.mode){const S=y.formattedMonths.map((Y,Z)=>function Up(y,O){return y.weeks.forEach(S=>{S.days.forEach((Y,Z)=>{const ye=!Ir(Y.date,y.month),gt=!ye&&pr(Y.date,O.hoveredDate),Ei=!ye&&O.selectedRange&&pr(Y.date,O.selectedRange[0]),fn=!ye&&O.selectedRange&&pr(Y.date,O.selectedRange[1]),Qr=!ye&&pr(Y.date,O.selectedDate)||Ei||fn,ws=!ye&&O.selectedRange&&function nu(y,O,S){return!!(y&&O&&O[0])&&(O[1]?y>O[0]&&y<=O[1]:!!S&&y>O[0]&&y<=S)}(Y.date,O.selectedRange,O.hoveredDate),no=O.isDisabled||So(Y.date,O.minDate,"day")||fs(Y.date,O.maxDate,"day")||function Ba(y,O){return!(typeof O>"u"||!O||!O.length)&&O.some(S=>S===y.getDay())}(Y.date,O.daysDisabled)||Lu(Y.date,O.datesDisabled)||kd(Y.date,O.datesEnabled),Bu=!ye&&pr(Y.date,new Date),np=O.dateCustomClasses&&O.dateCustomClasses.map(fc=>pr(Y.date,fc.date)?fc.classes:[]).reduce((fc,bh)=>fc.concat(bh),[]).join(" ")||"",vg=O.dateTooltipTexts&&O.dateTooltipTexts.map(fc=>pr(Y.date,fc.date)?fc.tooltipText:"").reduce((fc,bh)=>(fc.push(bh),fc),[]).join(" ")||"",Fc=Object.assign({},Y,{isOtherMonth:ye,isHovered:gt,isSelected:Qr,isSelectionStart:Ei,isSelectionEnd:fn,isInRange:ws,isDisabled:no,isToday:Bu,customClasses:np,tooltipText:vg});(Y.isOtherMonth!==Fc.isOtherMonth||Y.isHovered!==Fc.isHovered||Y.isSelected!==Fc.isSelected||Y.isSelectionStart!==Fc.isSelectionStart||Y.isSelectionEnd!==Fc.isSelectionEnd||Y.isDisabled!==Fc.isDisabled||Y.isInRange!==Fc.isInRange||Y.customClasses!==Fc.customClasses||Y.tooltipText!==Fc.tooltipText)&&(S.days[Z]=Fc)})}),y.hideLeftArrow=O.isDisabled||!!O.monthIndex&&O.monthIndex>0&&O.monthIndex!==O.displayMonths,y.hideRightArrow=O.isDisabled||(!!O.monthIndex||0===O.monthIndex)&&!!O.displayMonths&&O.monthIndex<O.displayMonths&&O.monthIndex+1!==O.displayMonths,y.disableLeftArrow=ch(Tt(y.month,{month:-1}),O.minDate,O.maxDate),y.disableRightArrow=ch(Tt(y.month,{month:1}),O.minDate,O.maxDate),y}(Y,{isDisabled:y.isDisabled,minDate:y.minDate,maxDate:y.maxDate,daysDisabled:y.daysDisabled,datesDisabled:y.datesDisabled,datesEnabled:y.datesEnabled,hoveredDate:y.hoveredDate,selectedDate:y.selectedDate,selectedRange:y.selectedRange,displayMonths:O,dateCustomClasses:y.dateCustomClasses,dateTooltipTexts:y.dateTooltipTexts,monthIndex:Z}));return Object.assign({},y,{flaggedMonths:S})}if("month"===y.view.mode&&y.monthsCalendar){const S=y.monthsCalendar.map((Y,Z)=>function $p(y,O){return y.months.forEach((S,Y)=>{S.forEach((Z,ye)=>{let gt;const Ei=Ir(Z.date,O.hoveredMonth),fn=O.isDisabled||Lu(Z.date,O.datesDisabled)||kd(Z.date,O.datesEnabled,"month")||ch(Z.date,O.minDate,O.maxDate);!O.selectedDate&&O.selectedRange?(gt=Ir(Z.date,O.selectedRange[0]),gt||(gt=Ir(Z.date,O.selectedRange[1]))):gt=Ir(Z.date,O.selectedDate);const Qr=Object.assign(Z,{isHovered:Ei,isDisabled:fn,isSelected:gt});(Z.isHovered!==Qr.isHovered||Z.isDisabled!==Qr.isDisabled||Z.isSelected!==Qr.isSelected)&&(y.months[Y][ye]=Qr)})}),y.hideLeftArrow=!!O.monthIndex&&O.monthIndex>0&&O.monthIndex!==O.displayMonths,y.hideRightArrow=(!!O.monthIndex||0===O.monthIndex)&&(!!O.displayMonths||0===O.displayMonths)&&O.monthIndex<O.displayMonths&&O.monthIndex+1!==O.displayMonths,y.disableLeftArrow=ad(Tt(y.months[0][0].date,{year:-1}),O.minDate,O.maxDate),y.disableRightArrow=ad(Tt(y.months[0][0].date,{year:1}),O.minDate,O.maxDate),y}(Y,{isDisabled:y.isDisabled,minDate:y.minDate,maxDate:y.maxDate,hoveredMonth:y.hoveredMonth,selectedDate:y.selectedDate,datesDisabled:y.datesDisabled,datesEnabled:y.datesEnabled,selectedRange:y.selectedRange,displayMonths:O,monthIndex:Z}));return Object.assign({},y,{flaggedMonthsCalendar:S})}if("year"===y.view.mode&&y.yearsCalendarModel){const S=y.yearsCalendarModel.map((Y,Z)=>function ug(y,O){y.years.forEach((Z,ye)=>{Z.forEach((gt,Ei)=>{let fn;const Qr=wr(gt.date,O.hoveredYear),ws=O.isDisabled||Lu(gt.date,O.datesDisabled,"year")||kd(gt.date,O.datesEnabled,"year")||ad(gt.date,O.minDate,O.maxDate);!O.selectedDate&&O.selectedRange?(fn=wr(gt.date,O.selectedRange[0]),fn||(fn=wr(gt.date,O.selectedRange[1]))):fn=wr(gt.date,O.selectedDate);const no=Object.assign(gt,{isHovered:Qr,isDisabled:ws,isSelected:fn});(gt.isHovered!==no.isHovered||gt.isDisabled!==no.isDisabled||gt.isSelected!==no.isSelected)&&(y.years[ye][Ei]=no)})}),y.hideLeftArrow=!!O.yearIndex&&O.yearIndex>0&&O.yearIndex!==O.displayMonths,y.hideRightArrow=!!O.yearIndex&&!!O.displayMonths&&O.yearIndex<O.displayMonths&&O.yearIndex+1!==O.displayMonths,y.disableLeftArrow=ad(Tt(y.years[0][0].date,{year:-1}),O.minDate,O.maxDate);const S=y.years.length-1;return y.disableRightArrow=ad(Tt(y.years[S][y.years[S].length-1].date,{year:1}),O.minDate,O.maxDate),y}(Y,{isDisabled:y.isDisabled,minDate:y.minDate,maxDate:y.maxDate,hoveredYear:y.hoveredYear,selectedDate:y.selectedDate,datesDisabled:y.datesDisabled,datesEnabled:y.datesEnabled,selectedRange:y.selectedRange,displayMonths:O,yearIndex:Z}));return Object.assign({},y,{yearsCalendarFlagged:S})}return y}(y);case fo.NAVIGATE_OFFSET:return function Dd(y,O){if(!y.view)return y;const S=function hg(y,O){if(y.view){if("year"===y.view.mode&&"year"===y.minMode){const S=Ou(y,0);if(S){const Y=Tt(S,{year:-zu});return Tt(Y,O.payload)}}return Tt(U(y.view.date,"month"),O.payload)}}(y,O);if(!S)return y;return Object.assign({},y,{view:{mode:y.view.mode,date:S}})}(y,O);case fo.NAVIGATE_TO:{const S=O.payload;if(!y.view||!S.unit)return y;const Y=function Pe(y,O){return An(Lt(y.getFullYear(),O.year),Lt(y.getMonth(),O.month),1,Lt(y.getHours(),O.hour),Lt(y.getMinutes(),O.minute),Lt(y.getSeconds(),O.seconds),Lt(y.getMilliseconds(),O.milliseconds))}(y.view.date,S.unit);let Z,ye;return Ua(S.viewMode,y.minMode)?(ye=S.viewMode,Z={view:{date:Y,mode:ye}}):(ye=y.view.mode,Z={selectedDate:Y,view:{date:Y,mode:ye}}),Object.assign({},y,Z)}case fo.CHANGE_VIEWMODE:return Ua(O.payload,y.minMode)&&y.view?Object.assign({},y,{view:{date:y.view.date,mode:O.payload}}):y;case fo.HOVER:return Object.assign({},y,{hoveredDate:O.payload});case fo.SELECT:{if(!y.view)return y;const S={selectedDate:O.payload,view:y.view};if(Array.isArray(y.selectedTime)){const gt=y.selectedTime[0];S.selectedDate&&gt&&Xp(S.selectedDate,gt)}const Y=y.view.mode,ye=Id(O.payload||y.view.date,y.minDate,y.maxDate);return S.view={mode:Y,date:ye},Object.assign({},y,S)}case fo.SELECT_TIME:{const{date:S,index:Y}=O.payload,Z=y.selectedTime?[...y.selectedTime]:[];return Z[Y]=S,Object.assign({},y,{selectedTime:Z})}case fo.SET_OPTIONS:{if(!y.view)return y;const S=O.payload,Y=S.minMode?S.minMode:y.view.mode,ye=Id(nt(S.value)&&S.value||ot(S.value)&&nt(S.value[0])&&S.value[0]||y.view.date,S.minDate,S.maxDate);return S.view={mode:Y,date:ye},S.value&&(ot(S.value)&&(S.selectedRange=S.value,S.selectedTime=S.value.map(gt=>gt)),S.value instanceof Date&&(S.selectedDate=S.value,S.selectedTime=[S.value])),Object.assign({},y,S)}case fo.SELECT_RANGE:{if(!y.view)return y;const S={selectedRange:O.payload,view:y.view};S.selectedRange?.forEach((gt,Ei)=>{if(Array.isArray(y.selectedTime)){const fn=y.selectedTime[Ei];fn&&Xp(gt,fn)}});const Y=y.view.mode,ye=Id(O.payload&&O.payload[0]||y.view.date,y.minDate,y.maxDate);return S.view={mode:Y,date:ye},Object.assign({},y,S)}case fo.SET_MIN_DATE:return Object.assign({},y,{minDate:O.payload});case fo.SET_MAX_DATE:return Object.assign({},y,{maxDate:O.payload});case fo.SET_IS_DISABLED:return Object.assign({},y,{isDisabled:O.payload});case fo.SET_DATE_CUSTOM_CLASSES:return Object.assign({},y,{dateCustomClasses:O.payload});case fo.SET_DATE_TOOLTIP_TEXTS:return Object.assign({},y,{dateTooltipTexts:O.payload});default:return y}}function _s(y){return{locale:y.locale,monthTitle:y.monthTitle,yearTitle:y.yearTitle,dayLabel:y.dayLabel,monthLabel:y.monthLabel,yearLabel:y.yearLabel,weekNumbers:y.weekNumbers}}function Id(y,O,S){const Y=Array.isArray(y)?y[0]:y;return O&&fs(O,Y,"day")?O:S&&So(S,Y,"day")?S:Y}function gh(y,O,S){return!(!S||!Po(S,y,"day"))||O&&S&&O.getMonth()===S.getMonth()}let Rc=(()=>{class y extends Va{constructor(){const S=new Vl.g({type:"[datepicker] dispatcher init"});super(S,Zp,new jc(qh,S,Zp))}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})(),vh=(()=>{class y{constructor(){this.onSelect=new k._w7}selectFromRanges(S){this.onSelect.emit(S)}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-custom-date-view"]],inputs:{ranges:"ranges",selectedRange:"selectedRange",customRangeLabel:"customRangeLabel"},outputs:{onSelect:"onSelect"},decls:2,vars:1,consts:[[1,"bs-datepicker-predefined-btns"],["type","button","class","btn",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"]],template:function(Y,Z){1&Y&&(k.I0R(0,"div",0),k.yuY(1,Ap,2,3,"button",1),k.C$Y()),2&Y&&(k.yG2(),k.E7m("ngForOf",Z.ranges))},dependencies:[is.ay],encapsulation:2,changeDetection:0})}return y})();var zc=function(y){return y[y.UP=0]="UP",y[y.DOWN=1]="DOWN",y}(zc||{});let ru,qp=(()=>{class y{static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-current-date"]],inputs:{title:"title"},decls:3,vars:1,consts:[[1,"current-timedate"]],template:function(Y,Z){1&Y&&(k.I0R(0,"div",0)(1,"span"),k.OEk(2),k.C$Y()()),2&Y&&(k.yG2(2),k.cNF(Z.title))},encapsulation:2})}return y})(),pg=(()=>{class y{constructor(){this.ampm="ok",this.hours=0,this.minutes=0}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-timepicker"]],decls:16,vars:3,consts:[[1,"bs-timepicker-container"],[1,"bs-timepicker-controls"],["type","button",1,"bs-decrease"],["type","text","placeholder","00",3,"value"],["type","button",1,"bs-increase"],["type","button",1,"switch-time-format"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==","alt",""]],template:function(Y,Z){1&Y&&(k.I0R(0,"div",0)(1,"div",1)(2,"button",2),k.OEk(3,"-"),k.C$Y(),k.wR5(4,"input",3),k.I0R(5,"button",4),k.OEk(6,"+"),k.C$Y()(),k.I0R(7,"div",1)(8,"button",2),k.OEk(9,"-"),k.C$Y(),k.wR5(10,"input",3),k.I0R(11,"button",4),k.OEk(12,"+"),k.C$Y()(),k.I0R(13,"button",5),k.OEk(14),k.wR5(15,"img",6),k.C$Y()()),2&Y&&(k.yG2(4),k.E7m("value",Z.hours),k.yG2(6),k.E7m("value",Z.minutes),k.yG2(4),k.oRS("",Z.ampm," "))},encapsulation:2})}return y})(),ld=(()=>{class y{static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-calendar-layout"]],ngContentSelectors:ol,decls:6,vars:2,consts:[["title","hey there",4,"ngIf"],[1,"bs-datepicker-head"],[1,"bs-datepicker-body"],[4,"ngIf"],["title","hey there"]],template:function(Y,Z){1&Y&&(k.kPM(Qc),k.yuY(0,Zs,1,0,"bs-current-date",0),k.I0R(1,"div",1),k._Xx(2),k.C$Y(),k.I0R(3,"div",2),k._Xx(4,1),k.C$Y(),k.yuY(5,Nf,1,0,"bs-timepicker",3)),2&Y&&(k.E7m("ngIf",!1),k.yG2(5),k.E7m("ngIf",!1))},dependencies:[is.u_,qp,pg],encapsulation:2})}return y})(),Kp=(()=>{class y{constructor(S,Y,Z){this._config=S,this._elRef=Y,this._renderer=Z,this.day={date:new Date,label:""}}ngOnInit(){this.day?.isToday&&this._config&&this._config.customTodayClass&&this._renderer.addClass(this._elRef.nativeElement,this._config.customTodayClass),"string"==typeof this.day?.customClasses&&this.day?.customClasses.split(" ").filter(S=>S).forEach(S=>{this._renderer.addClass(this._elRef.nativeElement,S)})}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(ja),k.GI1(k.GMv),k.GI1(k.q87))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["","bsDatepickerDayDecorator",""]],hostVars:16,hostBindings:function(Y,Z){2&Y&&k.eAK("disabled",Z.day.isDisabled)("is-highlighted",Z.day.isHovered)("is-other-month",Z.day.isOtherMonth)("is-active-other-month",Z.day.isOtherMonthHovered)("in-range",Z.day.isInRange)("select-start",Z.day.isSelectionStart)("select-end",Z.day.isSelectionEnd)("selected",Z.day.isSelected)},inputs:{day:"day"},attrs:og,decls:1,vars:1,template:function(Y,Z){1&Y&&k.OEk(0),2&Y&&k.cNF(Z.day&&Z.day.label||"")},encapsulation:2,changeDetection:0})}return y})(),_h=(()=>{class y{constructor(){this.isDisabled=!1,this.onNavigate=new k._w7,this.onViewMode=new k._w7}navTo(S){this.onNavigate.emit(S?zc.DOWN:zc.UP)}view(S){this.isDisabled||this.onViewMode.emit(S)}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-datepicker-navigation-view"]],inputs:{calendar:"calendar",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode"},decls:12,vars:9,consts:[["type","button",1,"previous",3,"disabled","click"],[4,"ngIf"],["type","button",1,"current",3,"disabled","click"],["type","button",1,"next",3,"disabled","click"]],template:function(Y,Z){1&Y&&(k.I0R(0,"button",0),k.qCj("click",function(){return Z.navTo(!0)}),k.I0R(1,"span"),k.OEk(2,"\u2039"),k.C$Y()(),k.yuY(3,Yf,5,2,"ng-container",1),k.OEk(4," \u200b "),k.I0R(5,"button",2),k.qCj("click",function(){return Z.view("year")}),k.I0R(6,"span"),k.OEk(7),k.C$Y()(),k.OEk(8," \u200b "),k.I0R(9,"button",3),k.qCj("click",function(){return Z.navTo(!1)}),k.I0R(10,"span"),k.OEk(11,"\u203a"),k.C$Y()()),2&Y&&(k.m4B("visibility",Z.calendar.hideLeftArrow?"hidden":"visible"),k.E7m("disabled",Z.calendar.disableLeftArrow),k.yG2(3),k.E7m("ngIf",Z.calendar&&Z.calendar.monthTitle),k.yG2(2),k.E7m("disabled",Z.isDisabled),k.yG2(2),k.cNF(Z.calendar.yearTitle),k.yG2(2),k.m4B("visibility",Z.calendar.hideRightArrow?"hidden":"visible"),k.E7m("disabled",Z.calendar.disableRightArrow))},dependencies:[is.u_],encapsulation:2,changeDetection:0})}return y})(),Ld=(()=>{class y{constructor(S){this._config=S,this.onNavigate=new k._w7,this.onViewMode=new k._w7,this.onSelect=new k._w7,this.onHover=new k._w7,this.onHoverWeek=new k._w7,this.isiOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._config.dateTooltipTexts&&this._config.dateTooltipTexts.length>0&&(this.isShowTooltip=!0)}navigateTo(S){this.onNavigate.emit({step:{month:zc.DOWN===S?-1:1}})}changeViewMode(S){this.onViewMode.emit(S)}selectDay(S){this.onSelect.emit(S)}selectWeek(S){if(!this._config.selectWeek&&!this._config.selectWeekDateRange||0===S.days.length)return;if(this._config.selectWeek&&S.days[0]&&!S.days[0].isDisabled&&this._config.selectFromOtherMonth)return void this.onSelect.emit(S.days[0]);const Y=S.days.find(Z=>(this._config.selectFromOtherMonth||!Z.isOtherMonth)&&!Z.isDisabled);if(this.onSelect.emit(Y),this._config.selectWeekDateRange){const ye=S.days.slice(0).reverse().find(gt=>(this._config.selectFromOtherMonth||!gt.isOtherMonth)&&!gt.isDisabled);this.onSelect.emit(ye)}}weekHoverHandler(S,Y){(this._config.selectWeek||this._config.selectWeekDateRange)&&S.days.find(ye=>(this._config.selectFromOtherMonth||!ye.isOtherMonth)&&!ye.isDisabled)&&(S.isHovered=Y,this.isWeekHovered=Y,this.onHoverWeek.emit(S))}hoverDay(S,Y){this._config.selectFromOtherMonth&&S.isOtherMonth&&(S.isOtherMonthHovered=Y),this._config.dateTooltipTexts&&(S.tooltipText="",this._config.dateTooltipTexts.forEach(Z=>{pr(Z.date,S.date)&&(S.tooltipText=Z.tooltipText)})),this.onHover.emit({cell:S,isHovered:Y})}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(ja))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-days-calendar-view"]],inputs:{calendar:"calendar",options:"options",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover",onHoverWeek:"onHoverWeek"},decls:9,vars:5,consts:[[3,"calendar","isDisabled","onNavigate","onViewMode"],["role","grid",1,"days","weeks"],[4,"ngIf"],["aria-label","weekday",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["aria-label","weekday"],["class","week",3,"active-week",4,"ngIf"],["role","gridcell",4,"ngFor","ngForOf"],[1,"week"],[3,"click",4,"ngIf"],[3,"click","mouseenter","mouseleave",4,"ngIf"],[3,"click"],[3,"click","mouseenter","mouseleave"],["role","gridcell"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click"]],template:function(Y,Z){1&Y&&(k.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),k.qCj("onNavigate",function(gt){return Z.navigateTo(gt)})("onViewMode",function(gt){return Z.changeViewMode(gt)}),k.C$Y(),k.I0R(2,"table",1)(3,"thead")(4,"tr"),k.yuY(5,Hf,1,0,"th",2)(6,Dc,2,1,"th",3),k.C$Y()(),k.I0R(7,"tbody"),k.yuY(8,Gh,3,2,"tr",4),k.C$Y()()()),2&Y&&(k.yG2(),k.E7m("calendar",Z.calendar)("isDisabled",!!Z.isDisabled),k.yG2(4),k.E7m("ngIf",Z.options&&Z.options.showWeekNumbers),k.yG2(),k.E7m("ngForOf",Z.calendar.weekdays),k.yG2(2),k.E7m("ngForOf",Z.calendar.weeks))},dependencies:[is.ay,is.u_,ma.uM,ld,Kp,_h],encapsulation:2})}return y})(),am=(()=>{class y{constructor(){this.onNavigate=new k._w7,this.onViewMode=new k._w7,this.onSelect=new k._w7,this.onHover=new k._w7}navigateTo(S){this.onNavigate.emit({step:{year:zc.DOWN===S?-1:1}})}viewMonth(S){this.onSelect.emit(S)}hoverMonth(S,Y){this.onHover.emit({cell:S,isHovered:Y})}changeViewMode(S){this.onViewMode.emit(S)}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-month-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"months"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(Y,Z){1&Y&&(k.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),k.qCj("onNavigate",function(gt){return Z.navigateTo(gt)})("onViewMode",function(gt){return Z.changeViewMode(gt)}),k.C$Y(),k.I0R(2,"table",1)(3,"tbody"),k.yuY(4,eh,2,1,"tr",2),k.C$Y()()()),2&Y&&(k.yG2(),k.E7m("calendar",Z.calendar),k.yG2(3),k.E7m("ngForOf",null==Z.calendar?null:Z.calendar.months))},dependencies:[is.ay,ld,_h],encapsulation:2})}return y})(),Jp=(()=>{class y{constructor(){this.onNavigate=new k._w7,this.onViewMode=new k._w7,this.onSelect=new k._w7,this.onHover=new k._w7}navigateTo(S){this.onNavigate.emit({step:{year:(zc.DOWN===S?-1:1)*ph}})}viewYear(S){this.onSelect.emit(S)}hoverYear(S,Y){this.onHover.emit({cell:S,isHovered:Y})}changeViewMode(S){this.onViewMode.emit(S)}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-years-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"years"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(Y,Z){1&Y&&(k.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),k.qCj("onNavigate",function(gt){return Z.navigateTo(gt)})("onViewMode",function(gt){return Z.changeViewMode(gt)}),k.C$Y(),k.I0R(2,"table",1)(3,"tbody"),k.yuY(4,ga,2,1,"tr",2),k.C$Y()()()),2&Y&&(k.yG2(),k.E7m("calendar",Z.calendar),k.yG2(3),k.E7m("ngForOf",null==Z.calendar?null:Z.calendar.years))},dependencies:[is.ay,ld,_h],encapsulation:2})}return y})(),cd=(()=>{class y extends Zh{set value(S){this._effects?.setValue(S)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(S,Y,Z,ye,gt,Ei,fn){super(),this._config=Y,this._store=Z,this._element=ye,this._actions=gt,this._positionService=fn,this.valueChange=new k._w7,this.animationState="void",this.isRangePicker=!1,this._subs=[],this._effects=Ei,S.setStyle(ye.nativeElement,"display","block"),S.setStyle(ye.nativeElement,"position","absolute")}ngOnInit(){let S;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,t.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.containerClass=this._config.containerClass,this.showTodayBtn=this._config.showTodayButton,this.todayBtnLbl=this._config.todayButtonLabel,this.todayPos=this._config.todayPosition,this.showClearBtn=this._config.showClearButton,this.clearBtnLbl=this._config.clearButtonLabel,this.clearPos=this._config.clearPosition,this.customRangeBtnLbl=this._config.customRangeButtonLabel,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(Y=>Y.selectedDate).subscribe(Y=>{S=Y,this.valueChange.emit(Y)})),this._subs.push(this._store.select(Y=>Y.selectedTime).subscribe(Y=>{!Y[0]||!(Y[0]instanceof Date)||Y[0]===S||this.valueChange.emit(Y[0])})),this._store.dispatch(this._actions.changeViewMode(this._config.startView))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(S=>{Array.isArray(S)&&S.length>=1&&this.startTimepicker?.writeValue(S[0])})),this.startTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,0)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(S,Y){this._store.dispatch(this._actions.selectTime(S,Y))}daySelectHandler(S){!S||(this.isOtherMonthsActive?S.isDisabled:S.isOtherMonth||S.isDisabled)||this._store.dispatch(this._actions.select(S.date))}monthSelectHandler(S){!S||S.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{month:Xi(S.date),year:ji(S.date)},viewMode:"day"}))}yearSelectHandler(S){!S||S.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{year:ji(S.date)},viewMode:"month"}))}setToday(){this._store.dispatch(this._actions.select(new Date))}clearDate(){this._store.dispatch(this._actions.select(void 0))}ngOnDestroy(){for(const S of this._subs)S.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(k.q87),k.GI1(ja),k.GI1(Rc),k.GI1(k.GMv),k.GI1(fo),k.GI1(Td),k.GI1(Cu.O4))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-datepicker-container"]],viewQuery:function(Y,Z){if(1&Y&&k.CC$(Uh,5),2&Y){let ye;k.wto(ye=k.Gqi())&&(Z.startTimepicker=ye.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(Y,Z){1&Y&&k.qCj("click",function(gt){return Z._stopPropagation(gt)}),2&Y&&k.e48("disabled",Z.isDatepickerDisabled)("readonly",Z.isDatepickerReadonly)},features:[k.M5G([Rc,Td]),k.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(Y,Z){1&Y&&(k.yuY(0,th,10,11,"div",0),k.wVc(1,"async")),2&Y&&k.E7m("ngIf",k.kDX(1,1,Z.viewMode))},dependencies:[is.QF,is.ay,is.u_,is.Ko,is.Wm,ed,vh,Ld,am,Jp,is.a],encapsulation:2,data:{animation:[Sd]}})}return y})(),Qp=(()=>{class y{get readonlyValue(){return this.isDisabled?"":null}constructor(S,Y,Z,ye,gt){this._config=S,this._elementRef=Y,this._renderer=Z,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Jc.E,this.isDisabled=!1,this.bsValueChange=new k._w7,this._subs=[],this._dateInputFormat$=new Jc.E,Object.assign(this,this._config),this._datepicker=gt.createLoader(Y,ye,Z),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new Vl.g(this.isOpen)}get isOpen(){return this._datepicker.isShown}set isOpen(S){this.isOpen$.next(S)}set bsValue(S){this._bsValue&&S&&this._bsValue.getTime()===S.getTime()||(!this._bsValue&&S&&!this._config.withTimepicker&&Xp(S,new Date),S&&this.bsConfig?.initCurrentTime&&(S=uh(S)),this.initPreviousValue(),this._bsValue=S,this.bsValueChange.emit(S))}get dateInputFormat$(){return this._dateInputFormat$}ngOnInit(){this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.setConfig(),this.initPreviousValue()}initPreviousValue(){ru=this._bsValue}ngOnChanges(S){S.bsConfig&&(S.bsConfig.currentValue?.initCurrentTime&&S.bsConfig.currentValue?.initCurrentTime!==S.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=uh(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._dateInputFormat$.next(this.bsConfig&&this.bsConfig.dateInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(S.minDate&&(this._datepickerRef.instance.minDate=this.minDate),S.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),S.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),S.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),S.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),S.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),S.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses),S.dateTooltipTexts&&(this._datepickerRef.instance.dateTooltipTexts=this.dateTooltipTexts))}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(S=>{this._datepickerRef&&(this._datepickerRef.instance.value=S)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.subscribe(S=>{this.initPreviousValue(),this.bsValue=S,!this.keepDatepickerModalOpened()&&this.hide()}))}keepDatepickerModalOpened(){return!!(ru&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return ru instanceof Date&&this._bsValue?.getDate()===ru?.getDate()&&this._bsValue?.getMonth()===ru?.getMonth()&&this._bsValue?.getFullYear()===ru?.getFullYear()}ngAfterViewInit(){this.isOpen$.pipe((0,pn.I)(S=>S!==this.isOpen),(0,V.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:ja,useValue:this._config}).attach(cd).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}hide(){this.isOpen&&this._datepicker.hide();for(const S of this._subs)S.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this._config.keepDatesOutOfRules?this._bsValue:Gp(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,dateTooltipTexts:this.dateTooltipTexts||this.bsConfig&&this.bsConfig.dateTooltipTexts,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,minMode:this.minMode||this.bsConfig&&this.bsConfig.minMode,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(S=>S.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(ja),k.GI1(k.GMv),k.GI1(k.q87),k.GI1(k.y8U),k.GI1(sl.Sy))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["","bsDatepicker",""]],hostVars:1,hostBindings:function(Y,Z){2&Y&&k.e48("readonly",Z.readonlyValue)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",minMode:"minMode",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled",dateCustomClasses:"dateCustomClasses",dateTooltipTexts:"dateTooltipTexts",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDatepicker"],features:[k.SYr]})}return y})(),fg=(()=>{class y extends Zh{set value(S){this._effects?.setRangeValue(S)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(S,Y,Z,ye,gt,Ei,fn){super(),this._config=Y,this._store=Z,this._element=ye,this._actions=gt,this._positionService=fn,this.valueChange=new k._w7,this.animationState="void",this._rangeStack=[],this.chosenRange=[],this._subs=[],this.isRangePicker=!0,this._effects=Ei,this.customRanges=this._config.ranges||[],this.customRangeBtnLbl=this._config.customRangeButtonLabel,S.setStyle(ye.nativeElement,"display","block"),S.setStyle(ye.nativeElement,"position","absolute")}ngOnInit(){let S;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,t.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.containerClass=this._config.containerClass,this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(Y=>Y.selectedRange).subscribe(Y=>{S=Y,this.valueChange.emit(Y),this.chosenRange=Y||[]})),this._subs.push(this._store.select(Y=>Y.selectedTime).subscribe(Y=>{!Y[0]||!Y[1]||!(Y[0]instanceof Date)||!(Y[1]instanceof Date)||S&&Y[0]===S[0]&&Y[1]===S[1]||(this.valueChange.emit(Y),this.chosenRange=Y||[])}))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(S=>{Array.isArray(S)&&S.length>=2&&(this.startTimepicker?.writeValue(S[0]),this.endTimepicker?.writeValue(S[1]))})),this.startTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,0)}),this.endTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,1)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(S,Y){this._store.dispatch(this._actions.selectTime(S,Y))}daySelectHandler(S){!S||(this.isOtherMonthsActive?S.isDisabled:S.isOtherMonth||S.isDisabled)||this.rangesProcessing(S)}monthSelectHandler(S){if(S&&!S.isDisabled){if(S.isSelected=!0,"month"!==this._config.minMode){if(S.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{month:Xi(S.date),year:ji(S.date)},viewMode:"day"}))}this.rangesProcessing(S)}}yearSelectHandler(S){if(S&&!S.isDisabled){if(S.isSelected=!0,"year"!==this._config.minMode){if(S.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{year:ji(S.date)},viewMode:"month"}))}this.rangesProcessing(S)}}rangesProcessing(S){1===this._rangeStack.length&&(this._rangeStack=S.date>=this._rangeStack[0]?[this._rangeStack[0],S.date]:[S.date]),this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(S.date),0===this._rangeStack.length&&(this._rangeStack=[S.date],this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(S.date)),this._store.dispatch(this._actions.selectRange(this._rangeStack)),2===this._rangeStack.length&&(this._rangeStack=[])}ngOnDestroy(){for(const S of this._subs)S.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}setRangeOnCalendar(S){S&&(this._rangeStack=S.value instanceof Date?[S.value]:S.value),this._store.dispatch(this._actions.selectRange(this._rangeStack))}setMaxDateRangeOnCalendar(S){let Y=new Date(S);if(this._config.maxDate){const Z=this._config.maxDate.getTime(),ye=S.getTime()+864e5*(this._config.maxDateRange||0);Y=ye>Z?new Date(this._config.maxDate):new Date(ye)}else Y.setDate(S.getDate()+(this._config.maxDateRange||0));this._effects?.setMaxDate(Y)}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(k.q87),k.GI1(ja),k.GI1(Rc),k.GI1(k.GMv),k.GI1(fo),k.GI1(Td),k.GI1(Cu.O4))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-daterangepicker-container"]],viewQuery:function(Y,Z){if(1&Y&&(k.CC$(Uh,5),k.CC$(Rp,5)),2&Y){let ye;k.wto(ye=k.Gqi())&&(Z.startTimepicker=ye.first),k.wto(ye=k.Gqi())&&(Z.endTimepicker=ye.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(Y,Z){1&Y&&k.qCj("click",function(gt){return Z._stopPropagation(gt)}),2&Y&&k.e48("disabled",Z.isDatepickerDisabled)("readonly",Z.isDatepickerReadonly)},features:[k.M5G([Rc,Td]),k.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(Y,Z){1&Y&&(k.yuY(0,Xl,10,11,"div",0),k.wVc(1,"async")),2&Y&&k.E7m("ngIf",k.kDX(1,1,Z.viewMode))},dependencies:[is.QF,is.ay,is.u_,is.Ko,is.Wm,ed,vh,Ld,am,Jp,is.a],encapsulation:2,data:{animation:[Sd]}})}return y})();const mg={provide:Cl.Y6,useExisting:(0,k.wd)(()=>Qh),multi:!0},gg={provide:Cl.WM,useExisting:(0,k.wd)(()=>Qh),multi:!0};let Fu,Qh=(()=>{class y{constructor(S,Y,Z,ye,gt){this._picker=S,this._localeService=Y,this._renderer=Z,this._elRef=ye,this.changeDetection=gt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Du.wH}ngOnInit(){const S=Y=>{this._setInputValue(Y),this._value!==Y&&(this._value=Y,this._onChange(Y),this._onTouched()),this.changeDetection.markForCheck()};this._picker._bsValue&&S(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(S)),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.dateInputFormat$.pipe((0,Oe.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(S){(13===S.keyCode||"Enter"===S.code)&&this.hide()}_setInputValue(S){const Y=S?ys(S,this._picker._config.dateInputFormat,this._localeService.currentLocale):"";this._renderer.setProperty(this._elRef.nativeElement,"value",Y)}onChange(S){this.writeValue(S.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(S){const Y=S.value;if(null==Y||""===Y)return null;if(Ge(Y)){if(!nt(Y))return{bsDate:{invalid:Y}};if(this._picker&&this._picker.minDate&&So(Y,this._picker.minDate,"date"))return this.writeValue(this._picker.minDate),{bsDate:{minDate:this._picker.minDate}};if(this._picker&&this._picker.maxDate&&fs(Y,this._picker.maxDate,"date"))return this.writeValue(this._picker.maxDate),{bsDate:{maxDate:this._picker.maxDate}}}return null}registerOnValidatorChange(S){this._validatorChange=S}writeValue(S){if(S){const Y=this._localeService.currentLocale;if(!ls(Y))throw new Error(`Locale "${Y}" is not defined, please add it with "defineLocale(...)"`);this._value=_l(S,this._picker._config.dateInputFormat,this._localeService.currentLocale),this._picker._config.useUtc&&(this._value=$o(this._value))}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(S){this._picker.isDisabled=S,S?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(S){this._onChange=S}registerOnTouched(S){this._onTouched=S}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(Qp,1),k.GI1(od),k.GI1(k.q87),k.GI1(k.GMv),k.GI1(k.kD9))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["input","bsDatepicker",""]],hostBindings:function(Y,Z){1&Y&&k.qCj("change",function(gt){return Z.onChange(gt)})("keyup.esc",function(){return Z.hide()})("keydown",function(gt){return Z.onKeydownEvent(gt)})("blur",function(){return Z.onBlur()})},features:[k.M5G([mg,gg])]})}return y})(),ep=(()=>{class y extends ja{constructor(){super(...arguments),this.displayMonths=2}static#e=this.\u0275fac=(()=>{let S;return function(Z){return(S||(S=k.otF(y)))(Z||y)}})();static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),tp=(()=>{class y{get isOpen(){return this._datepicker.isShown}set isOpen(S){this.isOpen$.next(S)}set bsValue(S){this._bsValue!==S&&(S&&this.bsConfig?.initCurrentTime&&(S=tm(S)),this.initPreviousValue(),this._bsValue=S,this.bsValueChange.emit(S))}get isDatepickerReadonly(){return this.isDisabled?"":null}get rangeInputFormat$(){return this._rangeInputFormat$}constructor(S,Y,Z,ye,gt){this._config=S,this._elementRef=Y,this._renderer=Z,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Jc.E,this.isDisabled=!1,this.bsValueChange=new k._w7,this._subs=[],this._rangeInputFormat$=new Jc.E,this._datepicker=gt.createLoader(Y,ye,Z),Object.assign(this,S),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new Vl.g(this.isOpen)}ngOnInit(){this.isDestroy$=new Jc.E,this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.initPreviousValue(),this.setConfig()}ngOnChanges(S){S.bsConfig&&(S.bsConfig.currentValue?.initCurrentTime&&S.bsConfig.currentValue?.initCurrentTime!==S.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=tm(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._rangeInputFormat$.next(S.bsConfig.currentValue&&S.bsConfig.currentValue.rangeInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(S.minDate&&(this._datepickerRef.instance.minDate=this.minDate),S.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),S.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),S.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),S.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),S.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),S.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses))}ngAfterViewInit(){this.isOpen$.pipe((0,pn.I)(S=>S!==this.isOpen),(0,V.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:ja,useValue:this._config}).attach(fg).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(S=>{this._datepickerRef&&(this._datepickerRef.instance.value=S)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.pipe((0,pn.I)(S=>S&&S[0]&&!!S[1])).subscribe(S=>{this.initPreviousValue(),this.bsValue=S,!this.keepDatepickerModalOpened()&&this.hide()}))}initPreviousValue(){Fu=this._bsValue}keepDatepickerModalOpened(){return!!(Fu&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return this._bsValue?.[0]?.getDate()===Fu?.[0]?.getDate()&&this._bsValue?.[0]?.getMonth()===Fu?.[0]?.getMonth()&&this._bsValue?.[0]?.getFullYear()===Fu?.[0]?.getFullYear()&&this._bsValue?.[1]?.getDate()===Fu?.[1]?.getDate()&&this._bsValue?.[1]?.getMonth()===Fu?.[1]?.getMonth()&&this._bsValue?.[1]?.getFullYear()===Fu?.[1]?.getFullYear()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this.bsConfig?.keepDatesOutOfRules?this._bsValue:Gp(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,ranges:Vs(this.bsConfig&&this.bsConfig.ranges,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),maxDateRange:this.bsConfig&&this.bsConfig.maxDateRange,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}hide(){this.isOpen&&this._datepicker.hide();for(const S of this._subs)S.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(S=>S.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(ep),k.GI1(k.GMv),k.GI1(k.q87),k.GI1(k.y8U),k.GI1(sl.Sy))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["","bsDaterangepicker",""]],hostVars:1,hostBindings:function(Y,Z){2&Y&&k.e48("readonly",Z.isDatepickerReadonly)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",dateCustomClasses:"dateCustomClasses",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDaterangepicker"],features:[k.SYr]})}return y})();const Od={provide:Cl.Y6,useExisting:(0,k.wd)(()=>dd),multi:!0},um={provide:Cl.WM,useExisting:(0,k.wd)(()=>dd),multi:!0};let dd=(()=>{class y{constructor(S,Y,Z,ye,gt){this._picker=S,this._localeService=Y,this._renderer=Z,this._elRef=ye,this.changeDetection=gt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Du.wH}ngOnInit(){this._picker._bsValue&&(Y=>{this._setInputValue(Y),this._value!==Y&&(this._value=Y,this._onChange(Y),this._onTouched()),this.changeDetection.markForCheck()})(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(Y=>{this._setInputValue(Y),this._value!==Y&&(this._value=Y,this._onChange(Y),this._onTouched()),this.changeDetection.markForCheck()})),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.rangeInputFormat$.pipe((0,Oe.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(S){(13===S.keyCode||"Enter"===S.code)&&this.hide()}_setInputValue(S){let Y="";if(S){const Z=S[0]?ys(S[0],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"",ye=S[1]?ys(S[1],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"";Y=Z&&ye?Z+this._picker._config.rangeSeparator+ye:""}this._renderer.setProperty(this._elRef.nativeElement,"value",Y)}onChange(S){this.writeValue(S.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(S){let Y=S.value;const Z=[];if(null==Y||!ot(Y))return null;Y=Y.slice().sort((Ei,fn)=>Ei.getTime()-fn.getTime());const ye=nt(Y[0]),gt=nt(Y[1]);return ye?gt?(this._picker&&this._picker.minDate&&So(Y[0],this._picker.minDate,"date")&&(Y[0]=this._picker.minDate,Z.push({bsDate:{minDate:this._picker.minDate}})),this._picker&&this._picker.maxDate&&fs(Y[1],this._picker.maxDate,"date")&&(Y[1]=this._picker.maxDate,Z.push({bsDate:{maxDate:this._picker.maxDate}})),Z.length>0?(this.writeValue(Y),Z):null):{bsDate:{invalid:Y[1]}}:{bsDate:{invalid:Y[0]}}}registerOnValidatorChange(S){this._validatorChange=S}writeValue(S){if(S){const Y=this._localeService.currentLocale;if(!ls(Y))throw new Error(`Locale "${Y}" is not defined, please add it with "defineLocale(...)"`);let ye=[];if("string"==typeof S){const gt=this._picker._config.rangeSeparator.trim();ye=S.replace(/[^-]/g,"").length>1?S.split(this._picker._config.rangeSeparator):S.split(gt.length>0?gt:this._picker._config.rangeSeparator).map(Ei=>Ei.trim())}Array.isArray(S)&&(ye=S),this._value=ye.map(gt=>this._picker._config.useUtc?$o(_l(gt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)):_l(gt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)).map(gt=>isNaN(gt.valueOf())?void 0:gt)}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(S){this._picker.isDisabled=S,S?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(S){this._onChange=S}registerOnTouched(S){this._onTouched=S}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(Y){return new(Y||y)(k.GI1(tp,1),k.GI1(od),k.GI1(k.q87),k.GI1(k.GMv),k.GI1(k.kD9))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["input","bsDaterangepicker",""]],hostBindings:function(Y,Z){1&Y&&k.qCj("change",function(gt){return Z.onChange(gt)})("keyup.esc",function(){return Z.hide()})("keydown",function(gt){return Z.onKeydownEvent(gt)})("blur",function(){return Z.onBlur()})},features:[k.M5G([Od,um])]})}return y})(),ip=(()=>{class y{static forRoot(){return{ngModule:y,providers:[sl.Sy,Cu.O4,Rc,fo,Td,od,zo]}}static#e=this.\u0275fac=function(Y){return new(Y||y)};static#t=this.\u0275mod=k.a4G({type:y});static#i=this.\u0275inj=k.s3X({imports:[is.MD,ma.as,Vh]})}return y})()},8216:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{im:()=>at,rO:()=>si});var k=Rt(4496),pn=Rt(6504),Fe=Rt(1368);const t=(Xt,jt)=>({"pull-left":Xt,"float-left":jt}),V=(Xt,jt)=>({"pull-right":Xt,"float-right":jt}),Oe=(Xt,jt)=>({disabled:Xt,currentPage:jt});function Me(Xt,jt){if(1&Xt){const ht=k.KQA();k.I0R(0,"li",11)(1,"a",12),k.qCj("click",function(ri){k.usT(ht);const mi=k.GaO();return k.CGJ(mi.selectPage(1,ri))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const ht=k.GaO(),qt=k.Gew(13);k.eAK("disabled",ht.noPrevious()||ht.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",ht.customFirstTemplate||qt)("ngTemplateOutletContext",k.IBC(4,Oe,ht.noPrevious()||ht.disabled,ht.page))}}function De(Xt,jt){if(1&Xt){const ht=k.KQA();k.I0R(0,"li",14)(1,"a",12),k.qCj("click",function(ri){k.usT(ht);const mi=k.GaO();return k.CGJ(mi.selectPage(mi.page-1,ri))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const ht=k.GaO(),qt=k.Gew(11);k.eAK("disabled",ht.noPrevious()||ht.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",ht.customPreviousTemplate||qt)("ngTemplateOutletContext",k.IBC(4,Oe,ht.noPrevious()||ht.disabled,ht.page))}}const Be=(Xt,jt,ht)=>({disabled:Xt,$implicit:jt,currentPage:ht});function Ge(Xt,jt){if(1&Xt){const ht=k.KQA();k.I0R(0,"li",15)(1,"a",12),k.qCj("click",function(ri){const Vi=k.usT(ht).$implicit,_i=k.GaO();return k.CGJ(_i.selectPage(Vi.number,ri))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const ht=jt.$implicit,qt=k.GaO(),ri=k.Gew(7);k.eAK("active",ht.active)("disabled",qt.disabled&&!ht.active),k.yG2(2),k.E7m("ngTemplateOutlet",qt.customPageTemplate||ri)("ngTemplateOutletContext",k.uAc(6,Be,qt.disabled,ht,qt.page))}}function Je(Xt,jt){if(1&Xt){const ht=k.KQA();k.I0R(0,"li",16)(1,"a",12),k.qCj("click",function(ri){k.usT(ht);const mi=k.GaO();return k.CGJ(mi.selectPage(mi.page+1,ri))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const ht=k.GaO(),qt=k.Gew(9);k.eAK("disabled",ht.noNext()||ht.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",ht.customNextTemplate||qt)("ngTemplateOutletContext",k.IBC(4,Oe,ht.noNext()||ht.disabled,ht.page))}}function nt(Xt,jt){if(1&Xt){const ht=k.KQA();k.I0R(0,"li",17)(1,"a",12),k.qCj("click",function(ri){k.usT(ht);const mi=k.GaO();return k.CGJ(mi.selectPage(mi.totalPages,ri))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const ht=k.GaO(),qt=k.Gew(15);k.eAK("disabled",ht.noNext()||ht.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",ht.customLastTemplate||qt)("ngTemplateOutletContext",k.IBC(4,Oe,ht.noNext()||ht.disabled,ht.page))}}function mt(Xt,jt){1&Xt&&k.OEk(0),2&Xt&&k.cNF(jt.$implicit.text)}function Pt(Xt,jt){if(1&Xt&&k.OEk(0),2&Xt){const ht=k.GaO();k.cNF(ht.getText("next"))}}function ot(Xt,jt){if(1&Xt&&k.OEk(0),2&Xt){const ht=k.GaO();k.cNF(ht.getText("previous"))}}function vt(Xt,jt){if(1&Xt&&k.OEk(0),2&Xt){const ht=k.GaO();k.cNF(ht.getText("first"))}}function wt(Xt,jt){if(1&Xt&&k.OEk(0),2&Xt){const ht=k.GaO();k.cNF(ht.getText("last"))}}let ai=(()=>{class Xt{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xab Previous",nextText:"Next \xbb",pageBtnClass:"",align:!0}}static#e=this.\u0275fac=function(qt){return new(qt||Xt)};static#t=this.\u0275prov=k.wxM({token:Xt,factory:Xt.\u0275fac,providedIn:"root"})}return Xt})();const We={provide:pn.Y6,useExisting:(0,k.wd)(()=>ni),multi:!0};let ni=(()=>{class Xt{constructor(ht,qt,ri){this.elementRef=ht,this.changeDetection=ri,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xab Previous",this.nextText="Next \xbb",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new k._w7,this.pageChanged=new k._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=ht,this.config||this.configureOptions(Object.assign({},qt.main,qt.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(ht){this._itemsPerPage=ht,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(ht){this._totalItems=ht,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(ht){this._totalPages=ht,this.numPages.emit(ht),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(ht){const qt=this._page;this._page=ht>this.totalPages?this.totalPages:ht||1,this.changeDetection.markForCheck(),!(qt===this._page||typeof qt>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(ht){this.config=Object.assign({},ht)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(ht){this.page=ht,this.pages=this.getPages(this.page,this.totalPages)}getText(ht){return this[`${ht}Text`]||this.config[`${ht}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(ht){this.onChange=ht}registerOnTouched(ht){this.onTouched=ht}selectPage(ht,qt){qt&&qt.preventDefault(),this.disabled||(qt&&qt.target&&qt.target.blur(),this.writeValue(ht),this.onChange(this.page))}makePage(ht,qt,ri){return{text:qt,number:ht,active:ri}}getPages(ht,qt){const ri=[];let mi=1,Vi=qt;const _i=typeof this.maxSize<"u"&&this.maxSize<qt;_i&&this.maxSize&&(this.rotate?(mi=Math.max(ht-Math.floor(this.maxSize/2),1),Vi=mi+this.maxSize-1,Vi>qt&&(Vi=qt,mi=Vi-this.maxSize+1)):(mi=(Math.ceil(ht/this.maxSize)-1)*this.maxSize+1,Vi=Math.min(mi+this.maxSize-1,qt)));for(let Ci=mi;Ci<=Vi;Ci++){const Fi=this.makePage(Ci,Ci.toString(),Ci===ht);ri.push(Fi)}if(_i&&!this.rotate){if(mi>1){const Ci=this.makePage(mi-1,"...",!1);ri.unshift(Ci)}if(Vi<qt){const Ci=this.makePage(Vi+1,"...",!1);ri.push(Ci)}}return ri}calculateTotalPages(){const ht=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(ht||0,1)}static#e=this.\u0275fac=function(qt){return new(qt||Xt)(k.GI1(k.GMv),k.GI1(ai),k.GI1(k.kD9))};static#t=this.\u0275cmp=k.In1({type:Xt,selectors:[["pager"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[k.M5G([We])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(qt,ri){1&qt&&(k.I0R(0,"ul",0)(1,"li",1)(2,"a",2),k.qCj("click",function(Vi){return ri.selectPage(ri.page-1,Vi)}),k.OEk(3),k.C$Y()(),k.I0R(4,"li",1)(5,"a",2),k.qCj("click",function(Vi){return ri.selectPage(ri.page+1,Vi)}),k.OEk(6),k.C$Y()()()),2&qt&&(k.yG2(),k.m8U(ri.pageBtnClass),k.eAK("disabled",ri.noPrevious())("previous",ri.align),k.E7m("ngClass",k.IBC(18,t,ri.align,ri.align)),k.yG2(2),k.cNF(ri.getText("previous")),k.yG2(),k.m8U(ri.pageBtnClass),k.eAK("disabled",ri.noNext())("next",ri.align),k.E7m("ngClass",k.IBC(21,V,ri.align,ri.align)),k.yG2(2),k.cNF(ri.getText("next")))},dependencies:[Fe.QF],encapsulation:2})}return Xt})();const li={provide:pn.Y6,useExisting:(0,k.wd)(()=>at),multi:!0};let at=(()=>{class Xt{constructor(ht,qt,ri){this.elementRef=ht,this.changeDetection=ri,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new k._w7,this.pageChanged=new k._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=ht,this.config||this.configureOptions(qt.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(ht){this._itemsPerPage=ht,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(ht){this._totalItems=ht,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(ht){this._totalPages=ht,this.numPages.emit(ht),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(ht){const qt=this._page;this._page=ht>this.totalPages?this.totalPages:ht||1,this.changeDetection.markForCheck(),!(qt===this._page||typeof qt>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(ht){this.config=Object.assign({},ht)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(ht){this.page=ht,this.pages=this.getPages(this.page,this.totalPages)}getText(ht){return this[`${ht}Text`]||this.config[`${ht}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(ht){this.onChange=ht}registerOnTouched(ht){this.onTouched=ht}selectPage(ht,qt){qt&&qt.preventDefault(),this.disabled||(qt&&qt.target&&qt.target.blur(),this.writeValue(ht),this.onChange(this.page))}makePage(ht,qt,ri){return{text:qt,number:ht,active:ri}}getPages(ht,qt){const ri=[];let mi=1,Vi=qt;const _i=typeof this.maxSize<"u"&&this.maxSize<qt;_i&&this.maxSize&&(this.rotate?(mi=Math.max(ht-Math.floor(this.maxSize/2),1),Vi=mi+this.maxSize-1,Vi>qt&&(Vi=qt,mi=Vi-this.maxSize+1)):(mi=(Math.ceil(ht/this.maxSize)-1)*this.maxSize+1,Vi=Math.min(mi+this.maxSize-1,qt)));for(let Ci=mi;Ci<=Vi;Ci++){const Fi=this.makePage(Ci,Ci.toString(),Ci===ht);ri.push(Fi)}if(_i&&!this.rotate){if(mi>1){const Ci=this.makePage(mi-1,"...",!1);ri.unshift(Ci)}if(Vi<qt){const Ci=this.makePage(Vi+1,"...",!1);ri.push(Ci)}}return ri}calculateTotalPages(){const ht=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(ht||0,1)}static#e=this.\u0275fac=function(qt){return new(qt||Xt)(k.GI1(k.GMv),k.GI1(ai),k.GI1(k.kD9))};static#t=this.\u0275cmp=k.In1({type:Xt,selectors:[["pagination"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[k.M5G([li])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(qt,ri){1&qt&&(k.I0R(0,"ul",0),k.yuY(1,Me,3,7,"li",1)(2,De,3,7,"li",2)(3,Ge,3,10,"li",3)(4,Je,3,7,"li",4)(5,nt,3,7,"li",5),k.C$Y(),k.yuY(6,mt,1,1,"ng-template",null,6,k.gJz)(8,Pt,1,1,"ng-template",null,7,k.gJz)(10,ot,1,1,"ng-template",null,8,k.gJz)(12,vt,1,1,"ng-template",null,9,k.gJz)(14,wt,1,1,"ng-template",null,10,k.gJz)),2&qt&&(k.E7m("ngClass",ri.classMap),k.yG2(),k.E7m("ngIf",ri.boundaryLinks),k.yG2(),k.E7m("ngIf",ri.directionLinks),k.yG2(),k.E7m("ngForOf",ri.pages),k.yG2(),k.E7m("ngIf",ri.directionLinks),k.yG2(),k.E7m("ngIf",ri.boundaryLinks))},dependencies:[Fe.QF,Fe.ay,Fe.u_,Fe.XV],encapsulation:2})}return Xt})(),si=(()=>{class Xt{static forRoot(){return{ngModule:Xt,providers:[]}}static#e=this.\u0275fac=function(qt){return new(qt||Xt)};static#t=this.\u0275mod=k.a4G({type:Xt});static#i=this.\u0275inj=k.s3X({imports:[Fe.MD]})}return Xt})()},8987:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{iU:()=>Je});var k=Rt(4496),pn=Rt(1368);let Je=(()=>{class nt{static forRoot(){return{ngModule:nt,providers:[]}}static#e=this.\u0275fac=function(ot){return new(ot||nt)};static#t=this.\u0275mod=k.a4G({type:nt});static#i=this.\u0275inj=k.s3X({imports:[pn.MD]})}return nt})()},7995:(oo,Yr,Rt)=>{"use strict";Rt.d(Yr,{as:()=>mt,uM:()=>nt});var k=Rt(4496),pn=Rt(3676),Fe=Rt(140),t=Rt(1316),V=Rt(6552),Oe=Rt(3120),Me=Rt(1368);const De=["*"];let Be=(()=>{class Pt{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}static#e=this.\u0275fac=function(wt){return new(wt||Pt)};static#t=this.\u0275prov=k.wxM({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}return Pt})(),Ge=(()=>{class Pt{get _bsVersions(){return(0,pn.w3)()}constructor(vt){Object.assign(this,vt)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=Fe.Ly[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}static#e=this.\u0275fac=function(wt){return new(wt||Pt)(k.GI1(Be))};static#t=this.\u0275cmp=k.In1({type:Pt,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(wt,ai){2&wt&&(k.e48("id",ai.id),k.m8U("show tooltip in tooltip-"+ai.placement+" bs-tooltip-"+ai.placement+" "+ai.placement+" "+ai.containerClass))},ngContentSelectors:De,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(wt,ai){1&wt&&(k.kPM(),k.wR5(0,"div",0),k.I0R(1,"div",1),k._Xx(2),k.C$Y())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0})}return Pt})(),Je=0,nt=(()=>{class Pt{get isOpen(){return this._tooltip.isShown}set isOpen(vt){vt?this.show():this.hide()}set htmlContent(vt){(0,pn.eG)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=vt}set _placement(vt){(0,pn.eG)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=vt}set _isOpen(vt){(0,pn.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=vt}get _isOpen(){return(0,pn.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(vt){(0,pn.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!vt}get _enable(){return(0,pn.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(vt){(0,pn.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=vt?"body":this.container}get _appendToBody(){return(0,pn.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container}set _popupClass(vt){(0,pn.eG)("tooltipClass deprecated")}set _tooltipContext(vt){(0,pn.eG)("tooltipContext deprecated")}set _tooltipPopupDelay(vt){(0,pn.eG)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=vt}get _tooltipTrigger(){return(0,pn.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(vt){(0,pn.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(vt||"").toString()}constructor(vt,wt,ai,We,ni,li){this._elementRef=We,this._renderer=ni,this._positionService=li,this.tooltipId=Je++,this.adaptivePosition=!0,this.tooltipChange=new k._w7,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new k._w7,this._tooltip=wt.createLoader(this._elementRef,vt,this._renderer).provide({provide:Be,useValue:ai}),Object.assign(this,ai),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(vt=>{vt||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const vt=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(Ge).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},wt=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,Oe.k)(this.delay).subscribe(()=>{vt(),wt()}),this.triggers&&(0,pn.GY)(this.triggers).forEach(ai=>{ai.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,ai.close,()=>{this._delaySubscription?.unsubscribe(),wt()}))})):vt()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}static#e=this.\u0275fac=function(wt){return new(wt||Pt)(k.GI1(k.y8U),k.GI1(V.Sy),k.GI1(Be),k.GI1(k.GMv),k.GI1(k.q87),k.GI1(Fe.O4))};static#t=this.\u0275dir=k.Sc5({type:Pt,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[k.Wk5.None,"tooltipHtml","htmlContent"],_placement:[k.Wk5.None,"tooltipPlacement","_placement"],_isOpen:[k.Wk5.None,"tooltipIsOpen","_isOpen"],_enable:[k.Wk5.None,"tooltipEnable","_enable"],_appendToBody:[k.Wk5.None,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[k.Wk5.None,"tooltipClass","_popupClass"],_tooltipContext:[k.Wk5.None,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[k.Wk5.None,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[k.Wk5.None,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]})}return(0,t.UN)([(0,pn.s9)(),(0,t.YR)("design:type",Object)],Pt.prototype,"tooltip",void 0),Pt})(),mt=(()=>{class Pt{static forRoot(){return{ngModule:Pt,providers:[V.Sy,Fe.O4]}}static#e=this.\u0275fac=function(wt){return new(wt||Pt)};static#t=this.\u0275mod=k.a4G({type:Pt});static#i=this.\u0275inj=k.s3X({imports:[Me.MD]})}return Pt})()}}]);