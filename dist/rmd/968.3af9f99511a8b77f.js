(self.webpackChunkSteex=self.webpackChunkSteex||[]).push([[968],{7517:(ao,Hs,Qt)=>{"use strict";Qt.r(Hs),Qt.d(Hs,{CustomPagesModule:()=>NX});var D=Qt(9072),mt=Qt(3756),Ze=Qt.n(mt),n=Qt(4496),j=Qt(6504),He=Qt(3364),Be=Qt(4400),Re=Qt(1368),$e=Qt(6708),it=Qt(8216);const nt=(i,t)=>({"bg-info-subtle text-info":i,"bg-danger-subtle text-danger":t});function _t(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr")(1,"td",38),n.OEk(2),n.C$Y(),n.wR5(3,"td",39)(4,"td",39),n.I0R(5,"td",40)(6,"div",41)(7,"input",42),n.qCj("change",function(s){const f=n.usT(e).$implicit,g=n.GaO();return n.CGJ(g.setStatus(f.id,s))}),n.C$Y(),n.I0R(8,"label",43)(9,"span",44),n.OEk(10),n.C$Y()()()(),n.I0R(11,"td",45)(12,"ul",46)(13,"li")(14,"a",47),n.wR5(15,"i",48),n.C$Y()(),n.I0R(16,"li")(17,"a",49),n.qCj("click",function(){const o=n.usT(e).$implicit,f=n.GaO();return n.CGJ(f.delete(o.id))}),n.wR5(18,"i",50),n.C$Y()()()()()}if(2&i){const e=t.$implicit,r=t.$index,s=n.GaO();n.yG2(2),n.oRS(" ",(s.currentPage-1)*s.itemsPerPage+r+1," "),n.yG2(),n.E7m("innerHtml",e.name,n.E3n),n.yG2(),n.E7m("innerHtml",e.cin_id,n.E3n),n.yG2(3),n.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),n.yG2(),n.E7m("for","customSwitchsizemd"+r),n.yG2(),n.E7m("ngClass",n.IBC(9,nt,"active"===e.status,"inactive"===e.status)),n.yG2(),n.oRS(" ",e.status," "),n.yG2(4),n.CI5("routerLink","/edit-company/",e.id,"")}}function gt(i,t){1&i&&(n.I0R(0,"div",37)(1,"div",51)(2,"span",52),n.OEk(3,"Loading..."),n.C$Y()()())}let Xt=(()=>{class i{constructor(e,r,s){this.formBuilder=e,this.api=r,this.toastService=s,this.spinnerStatus=!1,this.companyData=[],this.companyDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Company",active:!0},{label:"Company list",active:!0}],this.getCompanyData()}getCompanyData(){this.toggleSpinner(!0),this.api.getwithoutid("company").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.companyData=e.data||[],this.companyDataList=e.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,r){const o=r.target.checked?"active":"inactive",f=new FormData;f.append("status",o),this.toggleSpinner(!0),this.api.put("company",e,f).subscribe(g=>this.handleStatusChangeResponse(g),g=>this.handleError(g))}toggleSpinner(e){this.spinnerStatus=e}delete(e){e&&Ze().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&this.api.deleteWithId("company",e).subscribe(s=>this.handleStatusChangeResponse(s),s=>this.handleError(s))})}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getCompanyData()):(console.log(e),this.toastService.error(e.message))}handleError(e){this.toggleSpinner(!1)}filterdata(){this.companyData=this.term?this.companyDataList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.cin_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.companyDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.companyData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.companyDataList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.companyData=this.companyDataList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(j.im),n.GI1(He.W),n.GI1(Be.SA))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-company-list"]],decls:61,vars:7,consts:[["title","Company List",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/add-company",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){1&r&&(n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),n.wR5(12,"div",10),n.C$Y()(),n.I0R(13,"div",11)(14,"div",12)(15,"input",13),n.iHE("ngModelChange",function(f){return n.kNx(s.term,f)||(s.term=f),f}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(16,"i",14),n.C$Y()(),n.I0R(17,"div",15)(18,"div",16)(19,"div")(20,"a",17),n.wR5(21,"i",18),n.OEk(22,"Add"),n.C$Y()()()()()(),n.I0R(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),n.OEk(29,"S No."),n.C$Y(),n.I0R(30,"th",23),n.OEk(31,"Company Name"),n.C$Y(),n.I0R(32,"th",23),n.OEk(33,"CIN"),n.C$Y(),n.I0R(34,"th",23),n.OEk(35,"Status"),n.C$Y(),n.I0R(36,"th",24),n.OEk(37,"Action"),n.C$Y()()(),n.I0R(38,"tbody",25),n.c53(39,_t,19,12,"tr",null,n.wJt),n.C$Y()(),n.I0R(41,"div",26)(42,"div",27),n.wR5(43,"i",28),n.I0R(44,"h5",29),n.OEk(45,"Sorry! No Result Found"),n.C$Y(),n.I0R(46,"p",30),n.OEk(47," We did not find any Details for you search. "),n.C$Y()()()(),n.I0R(48,"div",31)(49,"div",32)(50,"div",33),n.OEk(51," Showing "),n.I0R(52,"span",34),n.OEk(53),n.C$Y(),n.OEk(54," of "),n.I0R(55,"span",34),n.OEk(56),n.C$Y(),n.OEk(57," Results "),n.C$Y()(),n.I0R(58,"div",35)(59,"pagination",36),n.qCj("pageChanged",function(f){return s.pageChanged(f)}),n.C$Y()()()()()()(),n.yuY(60,gt,4,0,"div",37),n.C$Y()()()()),2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(15),n.OKB("ngModel",s.term),n.yG2(24),n.oho(s.companyData),n.yG2(14),n.cNF(null==s.companyData?null:s.companyData.length),n.yG2(3),n.cNF(null==s.companyDataList?null:s.companyDataList.length),n.yG2(3),n.E7m("totalItems",null==s.companyDataList?null:s.companyDataList.length)("itemsPerPage",5),n.yG2(),n.C0Y(60,s.spinnerStatus?60:-1))},dependencies:[Re.QF,$e.O,D.ER,j.ot,j.ue,j._G,it.im]})}return i})();function Et(i,t){if(1&i&&(n.I0R(0,"div",9)(1,"div",91),n.wR5(2,"img",92),n.C$Y()()),2&i){const e=n.GaO(2);n.yG2(2),n.E7m("src",e.companyselectedImagePreview,n.K6U)}}function Tt(i,t){if(1&i&&n.yuY(0,Et,3,1,"div",90),2&i){const e=n.GaO();n.C0Y(0,e.companyselectedImagePreview?0:-1)}}function Nt(i,t){if(1&i&&(n.I0R(0,"div",9)(1,"div",91),n.wR5(2,"img",92),n.C$Y()()),2&i){const e=n.GaO();n.yG2(2),n.E7m("src",e.companyuploadedImage,n.K6U)}}function Pi(i,t){1&i&&(n.I0R(0,"div",9)(1,"div",91),n.wR5(2,"img",93),n.C$Y()())}function tt(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Logo is required."),n.C$Y())}function Ci(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Company name is required."),n.C$Y())}function Mi(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1," Company name must be at most 45 characters "),n.C$Y())}function kt(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Business type is required."),n.C$Y())}function Oi(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1," Business type must be at most 45 characters "),n.C$Y())}function vi(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"TIN is required."),n.C$Y())}function hi(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"CIN is required."),n.C$Y())}function Dt(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"No. of Employee is required."),n.C$Y())}function yi(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Website url is required."),n.C$Y())}function Ri(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Contact person is required."),n.C$Y())}function Xi(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Email is required."),n.C$Y())}function Tn(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1," Email must be a valid email address "),n.C$Y())}function qi(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Mobile is required."),n.C$Y())}function nn(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1," Please, Enter 10 digit Mobile Number. "),n.C$Y())}function _n(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"City is required."),n.C$Y())}function Fn(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"State is required."),n.C$Y())}function mr(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"zip_code is required."),n.C$Y())}function hr(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Address is required."),n.C$Y())}function Nr(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1," Address must be at most 100 characters "),n.C$Y())}function Si(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Password is required."),n.C$Y())}function kn(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1," password must be at minimum 5 characters "),n.C$Y())}function Jn(i,t){1&i&&(n.I0R(0,"div",94),n.OEk(1,"Status is required."),n.C$Y())}function ts(i,t){1&i&&(n.I0R(0,"button",95),n.OEk(1,"Save"),n.C$Y())}function Xr(i,t){1&i&&(n.I0R(0,"button",96),n.wR5(1,"span",97),n.OEk(2," Please wait "),n.C$Y())}function Fr(i,t){1&i&&(n.I0R(0,"div",89)(1,"div",98)(2,"span",99),n.OEk(3,"Loading..."),n.C$Y()()())}const En=i=>({"is-invalid":i}),Os=(i,t)=>({"mdi-eye-off-outline":i,"mdi-eye-outline":t});let Cs=(()=>{class i{constructor(e,r,s,o,f){this.route=e,this.formBuilder=r,this.api=s,this.router=o,this.toastService=f,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.companyselectedImage=null,this.companyselectedImagePreview=null,this.companyuploadedImage=null,this.mockLocationUpdates=[{lng:78.22045594790079,lat:26.230978491880894},{lng:78.22581623978483,lat:26.230717171669912},{lng:78.22831983563903,lat:26.229851080580822}]}ngOnInit(){this.breadCrumbItems=[{label:"Compay",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.initializeForm(),this.urlId&&this.getCompanyData()}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],address:["",[j.AQ.maxLength(100),j.AQ.required]],no_of_emp:["",[j.AQ.required]],logo:["",this.imageValidator()],cin_id:["",[j.AQ.required]],tax_no:["",[j.AQ.required]],website_url:["",[j.AQ.required]],email:["",[j.AQ.required,j.AQ.email,j.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[j.AQ.required,j.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],business_type:["",[j.AQ.maxLength(45),j.AQ.required]],password:["",[this.imageValidator(),j.AQ.minLength(5)]],status:["",[j.AQ.required]],city:["",[j.AQ.required]],state:["",[j.AQ.required]],zip_code:["",[j.AQ.required]],contact_person:["",[j.AQ.required]],check_out_time:["",[j.AQ.required]],check_in_time_start:["",[j.AQ.required]],check_in_time_end:["",[j.AQ.required]]})}imageValidator(){return e=>this.urlId?null:j.AQ.required(e)}get f(){return this.formGroup.controls}getCompanyData(){this.toggleSpinner(!0),this.api.get("company",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setCompanyDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setCompanyDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,no_of_emp:e.no_of_emp,cin_id:e.cin_id,tax_no:e.tax_no,email:e.email,password:e.password,status:e.status,mobile:e.mobile,business_type:e.business_type,city:e.city,state:e.state,zip_code:e.zip_code,contact_person:e.contact_person,website_url:e.website_url,check_in_time_start:e.check_in_time_start,check_in_time_end:e.check_in_time_end,check_out_time:e.check_out_time}),this.companyuploadedImage=e.logo||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData(),r=this.f.check_in_time_start.value,s=this.f.check_in_time_end.value,o=this.f.check_out_time.value;if(r>s)return void this.toastService.error("Check-in start time must be before the end time.");if(o<=s)return void this.toastService.error("Check-out time must be after the check-in end time.");if(o<=r)return void this.toastService.error("Check-out time must be after the check-in start time.");this.urlId?this.updateCompany(e):this.addCompany(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("name",this.f.name.value),e.append("address",this.f.address.value),e.append("no_of_emp",this.f.no_of_emp.value),e.append("cin_id",this.f.cin_id.value),e.append("email",this.f.email.value),e.append("password",this.f.password.value),e.append("status",this.f.status.value),e.append("mobile",this.f.mobile.value),e.append("business_type",this.f.business_type.value),e.append("tax_no",this.f.tax_no.value),e.append("city",this.f.city.value),e.append("state",this.f.state.value),e.append("zip_code",this.f.zip_code.value),e.append("contact_person",this.f.contact_person.value),e.append("website_url",this.f.website_url.value),e.append("check_out_time",this.f.check_out_time.value),e.append("check_in_time_start",this.f.check_in_time_start.value),e.append("check_in_time_end",this.f.check_in_time_end.value),this.companyselectedImage&&e.append("logo",this.companyselectedImage),e}addCompany(e){this.api.post("company",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}updateCompany(e){this.api.put("company",this.urlId,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["company"])):this.toastService.error(e.message)}resetForm(){this.companyselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}companyimageSelect(e){const r=e.target.files[0];r&&(this.companyselectedImage=r,this.companyselectedImagePreview=URL.createObjectURL(r))}companyremoveImage(){this.companyselectedImage=null,this.companyselectedImagePreview=null}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(D.gV),n.GI1(j.im),n.GI1(He.W),n.GI1(D.E5),n.GI1(Be.SA))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-add-company"]],decls:244,vars:59,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-4"],[1,"card","overflow-hidden"],[1,"ratio","ratio-16x9"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6509156.773725123!2d-123.79622260161696!3d37.19312212390098!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb9fe5f285e3d%3A0x8b5109a227086f55!2sCalifornia%2C%20USA!5e0!3m2!1sen!2sin!4v1678106410566!5m2!1sen!2sin","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[1,"card-body","pt-1"],["class","invalid-text"],[1,"avatar-lg","mt-n5","position-relative","mx-auto"],["type","file","id","companylogo","accept","image/*","formControlName","logo","hidden","",3,"change"],["companylogo",""],["for","companylogo",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","companylogo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"text-center","mt-4"],[1,"mb-2"],[1,"text-muted","mb-4","pb-2"],[1,"table-responsive","table-card"],[1,"table","align-middle","table-borderless","mb-0"],[1,"hstack","gap-2","justify-content-center","list-unstyled","mt-4","pt-2","mb-0"],["href","javascript:void(0);",1,"btn","btn-success","btn-sm"],[1,"bi","bi-whatsapp"],["href","javascript:void(0);",1,"btn","btn-primary","btn-sm"],[1,"bi","bi-facebook"],["href","javascript:void(0);",1,"btn","btn-info","btn-sm"],[1,"bi","bi-twitter"],["href","javascript:void(0);",1,"btn","btn-danger","btn-sm"],[1,"bi","bi-envelope"],[1,"col-xl-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter company name","value","name",1,"form-control",3,"ngClass"],["for","business_type",1,"form-label"],["type","text","id","business_type","formControlName","business_type","placeholder","Enter Business type","value","business_type",1,"form-control",3,"ngClass"],["for","tax_no",1,"form-label"],["type","text","id","tax_no","formControlName","tax_no","placeholder","Enter TIN","value","tax_no",1,"form-control",3,"ngClass"],["for","cin_id",1,"form-label"],["type","text","id","cin_id","formControlName","cin_id","placeholder","Enter CIN","value","cin_id",1,"form-control",3,"ngClass"],["for","no_of_emp",1,"form-label"],["type","number","id","no_of_emp","formControlName","no_of_emp","placeholder","Enter No. of employee","value","no_of_emp",1,"form-control",3,"ngClass"],["for","website_url",1,"form-label"],["type","text","id","website_url","formControlName","website_url","placeholder","Enter Website Url","value","website_url",1,"form-control",3,"ngClass"],["for","checkInTimeStart",1,"form-label"],[1,"row","g-2"],[1,"col-lg-5"],["type","time","id","checkInTimeStart","formControlName","check_in_time_start",1,"form-control"],[1,"col-auto","align-self-center"],["type","time","id","checkInTimeEnd","formControlName","check_in_time_end",1,"form-control"],["for","checkOutTime",1,"form-label"],["type","time","id","checkOutTime","formControlName","check_out_time",1,"form-control"],[1,"card","mt-3"],[1,"col-lg-4"],["for","contact_person",1,"form-label"],["type","text","id","contact_person","formControlName","contact_person","placeholder","Enter Contact person","value","contact_person",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter City","value","city",1,"form-control",3,"ngClass"],["for","State",1,"form-label"],["type","text","id","State","formControlName","state","placeholder","Enter state","value","state",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","text","id","zip_code","formControlName","zip_code","placeholder","Enter zip code","value","zip_code",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","5","formControlName","address",1,"form-control",3,"ngClass"],["for","password-input",1,"form-label"],[1,"position-relative","auth-pass-inputgroup","mb-3"],["formControlName","password","type","password","placeholder","Enter password","id","password-input",1,"form-control","pe-5","password-input",3,"type","ngClass"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon"],[1,"ri-eye-fill","align-middle",3,"ngClass","click"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["class","avatar-lg mt-n5 position-relative mx-auto"],[1,"avatar-title","bg-body-secondary","rounded","shadow"],["alt","",1,"avatar-sm",3,"src"],["src","assets/images/companies/img-1.png","alt","",1,"avatar-sm"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){1&r&&(n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"form",1),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),n.wR5(6,"iframe",6),n.C$Y(),n.I0R(7,"div",7),n.yuY(8,Tt,1,1)(9,Nt,3,1)(10,Pi,3,0)(11,tt,2,0,"div",8),n.I0R(12,"div",9)(13,"input",10,11),n.qCj("change",function(f){return s.companyimageSelect(f)}),n.C$Y(),n.I0R(15,"div",12)(16,"label",13)(17,"span",14),n.wR5(18,"i",15),n.C$Y()()()(),n.I0R(19,"div",16)(20,"h5",17),n.OEk(21),n.C$Y(),n.I0R(22,"p",18),n.OEk(23),n.C$Y()(),n.I0R(24,"div",19)(25,"table",20)(26,"tbody")(27,"tr")(28,"th"),n.OEk(29,"TIN"),n.C$Y(),n.I0R(30,"td"),n.OEk(31),n.C$Y()(),n.I0R(32,"tr")(33,"th"),n.OEk(34,"CIN"),n.C$Y(),n.I0R(35,"td"),n.OEk(36),n.C$Y()(),n.I0R(37,"tr")(38,"th"),n.OEk(39,"Location"),n.C$Y(),n.I0R(40,"td"),n.OEk(41),n.C$Y()(),n.I0R(42,"tr")(43,"th"),n.OEk(44,"Website"),n.C$Y(),n.I0R(45,"td"),n.OEk(46),n.C$Y()(),n.I0R(47,"tr")(48,"th"),n.OEk(49,"Phone Number"),n.C$Y(),n.I0R(50,"td")(51,"a"),n.OEk(52),n.C$Y()()()()()(),n.I0R(53,"ul",21)(54,"li")(55,"a",22),n.wR5(56,"i",23),n.C$Y()(),n.I0R(57,"li")(58,"a",24),n.wR5(59,"i",25),n.C$Y()(),n.I0R(60,"li")(61,"a",26),n.wR5(62,"i",27),n.C$Y()(),n.I0R(63,"li")(64,"a",28),n.wR5(65,"i",29),n.C$Y()()()()()(),n.I0R(66,"div",30)(67,"div",31)(68,"div",32)(69,"h6",33),n.OEk(70,"Company Information"),n.C$Y()(),n.I0R(71,"div",34)(72,"div",35)(73,"div",2)(74,"div",36)(75,"div",37)(76,"label",38),n.OEk(77,"Company name "),n.I0R(78,"span",39),n.OEk(79,"*"),n.C$Y()(),n.wR5(80,"input",40),n.yuY(81,Ci,2,0,"div",8)(82,Mi,2,0,"div",8),n.C$Y()(),n.I0R(83,"div",36)(84,"div",37)(85,"label",41),n.OEk(86,"Business type "),n.I0R(87,"span",39),n.OEk(88,"*"),n.C$Y()(),n.wR5(89,"input",42),n.yuY(90,kt,2,0,"div",8)(91,Oi,2,0,"div",8),n.C$Y()(),n.I0R(92,"div",36)(93,"div",37)(94,"label",43),n.OEk(95,"Tax Identification Number (TIN) "),n.I0R(96,"span",39),n.OEk(97,"*"),n.C$Y()(),n.wR5(98,"input",44),n.yuY(99,vi,2,0,"div",8),n.C$Y()(),n.I0R(100,"div",36)(101,"div",37)(102,"label",45),n.OEk(103,"Corporate Identification Number (CIN) "),n.I0R(104,"span",39),n.OEk(105,"*"),n.C$Y()(),n.wR5(106,"input",46),n.yuY(107,hi,2,0,"div",8),n.C$Y()(),n.I0R(108,"div",36)(109,"div",37)(110,"label",47),n.OEk(111,"No. of Employee "),n.I0R(112,"span",39),n.OEk(113,"*"),n.C$Y()(),n.wR5(114,"input",48),n.yuY(115,Dt,2,0,"div",8),n.C$Y()(),n.I0R(116,"div",36)(117,"div",37)(118,"label",49),n.OEk(119,"Website Url"),n.I0R(120,"span",39),n.OEk(121,"*"),n.C$Y()(),n.wR5(122,"input",50),n.yuY(123,yi,2,0,"div",8),n.C$Y()(),n.I0R(124,"div",36)(125,"div",37)(126,"label",51),n.OEk(127,"Check-In Time"),n.C$Y(),n.I0R(128,"div",52)(129,"div",53),n.wR5(130,"input",54),n.C$Y(),n.I0R(131,"div",55),n.OEk(132,"to"),n.C$Y(),n.I0R(133,"div",53),n.wR5(134,"input",56),n.C$Y()()()(),n.I0R(135,"div",36)(136,"div",37)(137,"label",57),n.OEk(138,"Check-Out Time"),n.C$Y(),n.wR5(139,"input",58),n.C$Y()()()()()(),n.I0R(140,"div",59)(141,"div",32)(142,"h6",33),n.OEk(143,"Contact Information"),n.C$Y()(),n.I0R(144,"div",34)(145,"div",35)(146,"div",2)(147,"div",60)(148,"div",37)(149,"label",61),n.OEk(150,"Contact person "),n.I0R(151,"span",39),n.OEk(152,"*"),n.C$Y()(),n.wR5(153,"input",62),n.yuY(154,Ri,2,0,"div",8),n.C$Y()(),n.I0R(155,"div",60)(156,"div",37)(157,"label",63),n.OEk(158,"Email "),n.I0R(159,"span",39),n.OEk(160,"*"),n.C$Y()(),n.wR5(161,"input",64),n.yuY(162,Xi,2,0,"div",8)(163,Tn,2,0,"div",8),n.C$Y()(),n.I0R(164,"div",60)(165,"div",37)(166,"label",65),n.OEk(167,"Contact Number "),n.I0R(168,"span",39),n.OEk(169,"*"),n.C$Y()(),n.wR5(170,"input",66),n.yuY(171,qi,2,0,"div",8)(172,nn,2,0,"div",8),n.C$Y()()()()()(),n.I0R(173,"div",59)(174,"div",32)(175,"h6",33),n.OEk(176,"Address Information"),n.C$Y()(),n.I0R(177,"div",34)(178,"div",35)(179,"div",2)(180,"div",60)(181,"div",37)(182,"label",67),n.OEk(183,"City "),n.I0R(184,"span",39),n.OEk(185,"*"),n.C$Y()(),n.wR5(186,"input",68),n.yuY(187,_n,2,0,"div",8),n.C$Y()(),n.I0R(188,"div",60)(189,"div",37)(190,"label",69),n.OEk(191,"State "),n.I0R(192,"span",39),n.OEk(193,"*"),n.C$Y()(),n.wR5(194,"input",70),n.yuY(195,Fn,2,0,"div",8),n.C$Y()(),n.I0R(196,"div",60)(197,"div",37)(198,"label",71),n.OEk(199,"Zip code "),n.I0R(200,"span",39),n.OEk(201,"*"),n.C$Y()(),n.wR5(202,"input",72),n.yuY(203,mr,2,0,"div",8),n.C$Y()(),n.I0R(204,"div",73)(205,"div",37)(206,"label",74),n.OEk(207," Address "),n.I0R(208,"span",39),n.OEk(209,"*"),n.C$Y()(),n.wR5(210,"textarea",75),n.yuY(211,hr,2,0,"div",8)(212,Nr,2,0,"div",8),n.C$Y()(),n.I0R(213,"div",60)(214,"div",37)(215,"label",76),n.OEk(216,"Password "),n.I0R(217,"span",39),n.OEk(218,"*"),n.C$Y()(),n.I0R(219,"div",77),n.wR5(220,"input",78),n.I0R(221,"button",79)(222,"i",80),n.qCj("click",function(){return s.toggleFieldTextType()}),n.C$Y()(),n.yuY(223,Si,2,0,"div",8)(224,kn,2,0,"div",8),n.C$Y()()(),n.I0R(225,"div",60)(226,"div",37)(227,"label",81),n.OEk(228,"Status "),n.I0R(229,"span",39),n.OEk(230,"*"),n.C$Y()(),n.I0R(231,"select",82)(232,"option",83),n.OEk(233,"Select Status"),n.C$Y(),n.I0R(234,"option",84),n.OEk(235,"Active"),n.C$Y(),n.I0R(236,"option",85),n.OEk(237,"Inactive"),n.C$Y()(),n.yuY(238,Jn,2,0,"div",8),n.C$Y()(),n.I0R(239,"div",86)(240,"div",87),n.yuY(241,ts,2,0,"button",88)(242,Xr,3,0),n.C$Y()()()()()()(),n.yuY(243,Fr,4,0,"div",89),n.C$Y()()),2&r&&(n.E7m("title",s.urlId?"Edit Company":"Add Company")("breadcrumbItems",s.breadCrumbItems),n.yG2(),n.E7m("formGroup",s.formGroup),n.yG2(7),n.C0Y(8,s.companyselectedImage?8:s.companyuploadedImage?9:10),n.yG2(3),n.C0Y(11,s.f.logo&&s.f.logo.hasError("required")&&s.f.logo.touched?11:-1),n.yG2(10),n.cNF(s.f.name.value),n.yG2(2),n.cNF(s.f.business_type.value),n.yG2(8),n.cNF(s.f.tax_no.value),n.yG2(5),n.cNF(s.f.cin_id.value),n.yG2(5),n.cNF(s.f.address.value),n.yG2(5),n.cNF(s.f.website_url.value),n.yG2(6),n.cNF(s.f.mobile.value),n.yG2(28),n.E7m("ngClass",s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?"is-invalid":""),n.yG2(),n.C0Y(81,s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?81:-1),n.yG2(),n.C0Y(82,s.f.name&&s.f.name.hasError("maxlength")&&s.f.name.touched?82:-1),n.yG2(7),n.E7m("ngClass",s.f.business_type&&s.f.business_type.hasError("required")&&s.f.business_type.touched?"is-invalid":""),n.yG2(),n.C0Y(90,s.f.business_type&&s.f.business_type.hasError("required")&&s.f.business_type.touched?90:-1),n.yG2(),n.C0Y(91,s.f.business_type&&s.f.business_type.hasError("maxlength")&&s.f.business_type.touched?91:-1),n.yG2(7),n.E7m("ngClass",s.f.tax_no&&s.f.tax_no.hasError("required")&&s.f.tax_no.touched?"is-invalid":""),n.yG2(),n.C0Y(99,s.f.tax_no&&s.f.tax_no.hasError("required")&&s.f.tax_no.touched?99:-1),n.yG2(7),n.E7m("ngClass",s.f.cin_id&&s.f.cin_id.hasError("required")&&s.f.cin_id.touched?"is-invalid":""),n.yG2(),n.C0Y(107,s.f.cin_id&&s.f.cin_id.hasError("required")&&s.f.cin_id.touched?107:-1),n.yG2(7),n.E7m("ngClass",s.f.no_of_emp&&s.f.no_of_emp.hasError("required")&&s.f.no_of_emp.touched?"is-invalid":""),n.yG2(),n.C0Y(115,s.f.no_of_emp&&s.f.no_of_emp.hasError("required")&&s.f.no_of_emp.touched?115:-1),n.yG2(7),n.E7m("ngClass",s.f.website_url&&s.f.website_url.hasError("required")&&s.f.website_url.touched?"is-invalid":""),n.yG2(),n.C0Y(123,s.f.website_url&&s.f.website_url.hasError("required")&&s.f.website_url.touched?123:-1),n.yG2(30),n.E7m("ngClass",s.f.contact_person&&s.f.contact_person.hasError("required")&&s.f.contact_person.touched?"is-invalid":""),n.yG2(),n.C0Y(154,s.f.contact_person&&s.f.contact_person.hasError("required")&&s.f.contact_person.touched?154:-1),n.yG2(7),n.E7m("ngClass",s.f.email&&s.f.email.hasError("required")&&s.f.email.touched?"is-invalid":""),n.yG2(),n.C0Y(162,s.f.email&&s.f.email.hasError("required")&&s.f.email.touched?162:-1),n.yG2(),n.C0Y(163,s.f.email.hasError("pattern")?163:-1),n.yG2(7),n.E7m("ngClass",s.f.mobile&&s.f.mobile.hasError("required")&&s.f.mobile.touched?"is-invalid":""),n.yG2(),n.C0Y(171,s.f.mobile&&s.f.mobile.hasError("required")&&s.f.mobile.touched?171:-1),n.yG2(),n.C0Y(172,s.f.mobile.hasError("pattern")?172:-1),n.yG2(14),n.E7m("ngClass",s.f.city&&s.f.city.hasError("required")&&s.f.city.touched?"is-invalid":""),n.yG2(),n.C0Y(187,s.f.city&&s.f.city.hasError("required")&&s.f.city.touched?187:-1),n.yG2(7),n.E7m("ngClass",s.f.state&&s.f.state.hasError("required")&&s.f.state.touched?"is-invalid":""),n.yG2(),n.C0Y(195,s.f.state&&s.f.state.hasError("required")&&s.f.state.touched?195:-1),n.yG2(7),n.E7m("ngClass",s.f.zip_code&&s.f.zip_code.hasError("required")&&s.f.zip_code.touched?"is-invalid":""),n.yG2(),n.C0Y(203,s.f.zip_code&&s.f.zip_code.hasError("required")&&s.f.zip_code.touched?203:-1),n.yG2(7),n.E7m("ngClass",n.S45(52,En,s.f.address&&s.f.address.errors&&s.f.address.touched)),n.yG2(),n.C0Y(211,s.f.address&&s.f.address.hasError("required")&&s.f.address.touched?211:-1),n.yG2(),n.C0Y(212,s.f.address&&s.f.address.hasError("maxlength")&&s.f.address.touched?212:-1),n.yG2(8),n.E7m("type",s.fieldTextType?"text":"password")("ngClass",n.S45(54,En,s.submitted&&s.f.password.errors)),n.yG2(2),n.E7m("ngClass",n.IBC(56,Os,!s.fieldTextType,s.fieldTextType)),n.yG2(),n.C0Y(223,s.f.password&&s.f.password.hasError("required")&&s.f.password.touched?223:-1),n.yG2(),n.C0Y(224,s.f.password&&s.f.password.hasError("minlength")&&s.f.password.touched?224:-1),n.yG2(7),n.E7m("ngClass",s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(238,s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?238:-1),n.yG2(3),n.C0Y(241,s.saveButtonActive?241:242),n.yG2(2),n.C0Y(243,s.spinnerStatus?243:-1))},dependencies:[Re.QF,$e.O,j.sz,j.wd,j.GO,j.ot,j.O4,j.GC,j.ue,j.u,j.uW,j.Wo],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.match-parent[_ngcontent-%COMP%]{width:100%;height:500px}.mt-n5[_ngcontent-%COMP%]{margin-top:-5rem!important}"]})}return i})();var Ts=Qt(4940),Zn=Qt(5140),Un=Qt(1768);const cr=["showModal"],zn=["deleteRecordModal"];function On(i,t){if(1&i&&n.wR5(0,"img",79),2&i){const e=n.GaO().$implicit;n._6D("src",e.image,n.K6U)}}function Vr(i,t){1&i&&n.wR5(0,"img",80)}const jn=()=>({tab:"personalDetails"});function an(i,t){if(1&i){const e=n.KQA();n.I0R(0,"ul",81)(1,"li")(2,"a",82),n.wR5(3,"i",83),n.OEk(4," View"),n.C$Y()(),n.I0R(5,"li")(6,"a",84),n.wR5(7,"i",85),n.OEk(8," Edit"),n.C$Y()(),n.I0R(9,"li")(10,"a",86),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.removeItem(s.id))}),n.wR5(11,"i",87),n.OEk(12," Remove"),n.C$Y()()()}if(2&i){const e=n.GaO().$implicit;n.yG2(2),n.CI5("routerLink","/employee-detail/",e.id,""),n.E7m("queryParams",n.q4q(3,jn)),n.yG2(4),n.CI5("routerLink","/edit-employee/",e.id,"")}}const ur=(i,t)=>({"bg-info-subtle text-info":i,"bg-danger-subtle text-danger":t});function xr(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr",58)(1,"td")(2,"div",23)(3,"input",59),n.iHE("ngModelChange",function(s){const f=n.usT(e).$implicit;return n.kNx(f.states,s)||(f.states=s),n.CGJ(s)}),n.qCj("change",function(s){n.usT(e);const o=n.GaO();return n.CGJ(o.onCheckboxChange(s))}),n.C$Y(),n.wR5(4,"label",60),n.C$Y()(),n.I0R(5,"td",61)(6,"a",62),n.OEk(7,"#TB01"),n.C$Y()(),n.I0R(8,"td",63)(9,"div",64)(10,"div",65),n.yuY(11,On,1,1,"img",66)(12,Vr,1,0),n.C$Y(),n.I0R(13,"div")(14,"h6",67)(15,"a",68),n.OEk(16),n.C$Y()()()()(),n.I0R(17,"td",69),n.OEk(18),n.C$Y(),n.I0R(19,"td",69),n.OEk(20),n.C$Y(),n.I0R(21,"td",69),n.OEk(22),n.C$Y(),n.I0R(23,"td",69),n.OEk(24),n.C$Y(),n.I0R(25,"td",70)(26,"div",71)(27,"input",72),n.qCj("change",function(s){const f=n.usT(e).$implicit,g=n.GaO();return n.CGJ(g.setStatus(f.id,s))}),n.C$Y(),n.I0R(28,"label",73)(29,"span",74),n.OEk(30),n.C$Y()()()(),n.I0R(31,"td")(32,"div",75)(33,"button",76),n.wR5(34,"i",77),n.C$Y(),n.yuY(35,an,13,4,"ul",78),n.C$Y()()()}if(2&i){const e=t.$implicit,r=t.$index;n.CI5("id","p_",e._id,""),n.yG2(3),n._6D("value",e._id),n.OKB("ngModel",e.states),n.yG2(8),n.C0Y(11,e.image?11:12),n.yG2(5),n.cNF(e.name),n.yG2(2),n.oRS(" ",e.mobile," "),n.yG2(2),n.oRS(" ",e.employee_id," "),n.yG2(2),n.oRS(" ",e.designation_name," "),n.yG2(2),n.oRS(" ",e.department_name," "),n.yG2(3),n.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),n.yG2(),n.E7m("for","customSwitchsizemd"+r),n.yG2(),n.E7m("ngClass",n.IBC(14,ur,"active"===e.status,"inactive"===e.status)),n.yG2(),n.oRS(" ",e.status," ")}}function zs(i,t){1&i&&(n.I0R(0,"div",28)(1,"div",88)(2,"span",89),n.OEk(3,"Loading..."),n.C$Y()()())}let Vs=(()=>{class i{constructor(e,r,s){this.formBuilder=e,this.api=r,this.toastService=s,this.spinnerStatus=!1,this.employeeData=[],this.employeeDataList=[],this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management",active:!0},{label:"Employees",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.getemployeeData()}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.employeeData=r.data||[],this.employeeDataList=r.data||[],this.employeeData=(0,Ts.cloneDeep)(this.employeeDataList.slice(0,10))):this.handleError("Unexpected response format")},r=>{this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const o=r.target.checked?"active":"inactive",f=new FormData;f.append("status",o),f.append("company_id",this.company_id),this.toggleSpinner(!0),this.api.put("employees",e,f).subscribe(g=>this.handleStatusChangeResponse(g),g=>this.handleError(g))}toggleSpinner(e){this.spinnerStatus=e}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getemployeeData()):this.toastService.error(e.message)}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("employees",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s));const r=this.checkedValGet;r&&r.length>0&&this.api.post("employees-delete-multiple",{ids:r}).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Employee Data Delete Successfully!!"),this.getemployeeData(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.employeeData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.employeeData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.employeeData=this.employeeDataList.slice(r,this.endItem)}filterdata(){this.employeeData=this.term?this.employeeDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())||e.mobile.toLowerCase().includes(this.term.toLowerCase())||e.email.toLowerCase().includes(this.term.toLowerCase())||e.designation.toLowerCase().includes(this.term.toLowerCase())||e.department.toLowerCase().includes(this.term.toLowerCase())||e.employee_id.toLowerCase().includes(this.term.toLowerCase())):this.employeeDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.employeeData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onCheckboxChange(e){for(var r=[],o=0;o<this.employeeData.length;o++)1==this.employeeData[o].states&&r.push(this.employeeData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.employeeData=this.employeeData.map(f=>({...f,states:e.target.checked}));for(var r=[],o=0;o<this.employeeData.length;o++)1==this.employeeData[o].states&&r.push(this.employeeData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(j.im),n.GI1(He.W),n.GI1(Be.SA))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-employee-list"]],viewQuery:function(r,s){if(1&r&&(n.CC$(cr,5),n.CC$(zn,5)),2&r){let o;n.wto(o=n.Gqi())&&(s.showModal=o.first),n.wto(o=n.Gqi())&&(s.deleteRecordModal=o.first)}},decls:90,vars:10,consts:[["title","Employees List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name, mobile,etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button","routerLink","/add-employee",1,"btn","btn-primary","add-btn"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"text-danger"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","","class","img-fluid d-block",3,"src"],[1,"mb-0"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"category"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ph-pencil","align-middle","me-1"],[1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Employeess "),n.I0R(9,"span",8),n.OEk(10),n.C$Y()()(),n.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(16,"i",14),n.C$Y()(),n.I0R(17,"button",15),n.qCj("click",function(){n.usT(o);const g=n.Gew(71);return n.CGJ(g.show())}),n.wR5(18,"i",16),n.C$Y(),n.I0R(19,"button",17),n.wR5(20,"i",18),n.OEk(21," Add Employee "),n.C$Y()()()(),n.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),n.iHE("ngModelChange",function(g){return n.kNx(s.masterSelected,g)||(s.masterSelected=g),g}),n.qCj("change",function(g){return s.checkUncheckAll(g)}),n.C$Y(),n.wR5(30,"label",25),n.C$Y()(),n.I0R(31,"th",26),n.qCj("click",function(){return s.onSort("name")}),n.OEk(32," Employee Name "),n.C$Y(),n.I0R(33,"th",26),n.qCj("click",function(){return s.onSort("mobile")}),n.OEk(34," Mobile "),n.C$Y(),n.I0R(35,"th",26),n.qCj("click",function(){return s.onSort("employee_id")}),n.OEk(36," Employee ID "),n.C$Y(),n.I0R(37,"th",26),n.qCj("click",function(){return s.onSort("designation")}),n.OEk(38," Designation "),n.C$Y(),n.I0R(39,"th",26),n.qCj("click",function(){return s.onSort("department")}),n.OEk(40," Department "),n.C$Y(),n.I0R(41,"th",26),n.qCj("click",function(){return s.onSort("status")}),n.OEk(42," Status "),n.C$Y(),n.I0R(43,"th"),n.OEk(44,"Action"),n.C$Y()()(),n.I0R(45,"tbody",27),n.c53(46,xr,36,17,"tr",58,n.wJt),n.C$Y(),n.yuY(48,zs,4,0,"div",28),n.C$Y()(),n.I0R(49,"div",29)(50,"div",30)(51,"div",31)(52,"div",32),n.wR5(53,"i",33),n.C$Y()(),n.I0R(54,"h5",34),n.OEk(55,"Sorry! No Result Found"),n.C$Y(),n.I0R(56,"p",35),n.OEk(57),n.C$Y()()(),n.I0R(58,"div",36)(59,"div",37)(60,"div",38),n.OEk(61," Showing "),n.I0R(62,"span",39),n.OEk(63),n.C$Y(),n.OEk(64," of "),n.I0R(65,"span",39),n.OEk(66),n.C$Y(),n.OEk(67," Results "),n.C$Y()(),n.I0R(68,"div",40)(69,"pagination",41),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(70,"div",42,43)(72,"div",44)(73,"div",45)(74,"div",46)(75,"button",47),n.qCj("click",function(){n.usT(o);const g=n.Gew(71);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(76,"div",48)(77,"div",49)(78,"div",50),n.wR5(79,"i",51),n.C$Y(),n.I0R(80,"div",52)(81,"h3",53),n.OEk(82,"Are you sure ?"),n.C$Y(),n.I0R(83,"p",54),n.OEk(84," Are you sure you want to remove this record ? "),n.C$Y()()(),n.I0R(85,"div",55)(86,"button",56),n.qCj("click",function(){n.usT(o);const g=n.Gew(71);return n.CGJ(g.hide())}),n.OEk(87," Close "),n.C$Y(),n.I0R(88,"button",57),n.qCj("click",function(){return s.deleteData(s.deleteId)}),n.OEk(89," Yes, Delete It! "),n.C$Y()()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(10),n.cNF(null==s.employeeDataList?null:s.employeeDataList.length),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(14),n.OKB("ngModel",s.masterSelected),n.yG2(17),n.oho(s.employeeData),n.yG2(2),n.C0Y(48,s.spinnerStatus?48:-1),n.yG2(9),n.oRS(" We've searched ",s.employeeDataList.length," Department We did not find any Department for you search. "),n.yG2(6),n.cNF(null==s.employeeData?null:s.employeeData.length),n.yG2(3),n.cNF(null==s.employeeDataList?null:s.employeeDataList.length),n.yG2(3),n.E7m("totalItems",null==s.employeeDataList?null:s.employeeDataList.length)("itemsPerPage",10))},dependencies:[Re.QF,$e.O,D.ER,Zn.uo,Zn.M3,Zn.mY,j.ot,j.SU,j.ue,j._G,it.im,Un.uK],styles:[".uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}"]})}return i})();var Fs=Qt(7995);const Ds=["showModal"],Es=["showModalDepartment"];function wr(i,t){if(1&i&&n.wR5(0,"img",98),2&i){const e=n.GaO(2);n.E7m("src",e.employeeselectedImagePreview,n.K6U)}}function us(i,t){if(1&i&&n.yuY(0,wr,1,1,"img",97),2&i){const e=n.GaO();n.C0Y(0,e.employeeselectedImagePreview?0:-1)}}function Ks(i,t){if(1&i&&n.wR5(0,"img",99),2&i){const e=n.GaO();n.E7m("src",e.employeeuploadedImage,n.K6U)}}function io(i,t){1&i&&n.wR5(0,"img",100)}function as(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Image is required."),n.C$Y())}function Rs(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Empolyee name is required."),n.C$Y())}function Ss(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Empolyee name must be at most 45 characters "),n.C$Y())}function Bs(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Employee Id is required."),n.C$Y())}function xa(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Email is required."),n.C$Y())}function Gt(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Email must be a valid email address "),n.C$Y())}function Ue(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Mobile is required."),n.C$Y())}function Je(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Please, Enter 10 digit Mobile Number. "),n.C$Y())}function At(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Date of Birth is required."),n.C$Y())}function St(i,t){if(1&i&&(n.I0R(0,"option",102),n.OEk(1),n.C$Y()),2&i){const e=t.$implicit;n._6D("value",e.id),n.yG2(),n.cNF(e.name)}}function si(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Designation is required."),n.C$Y())}function wi(i,t){if(1&i&&(n.I0R(0,"option",102),n.OEk(1),n.C$Y()),2&i){const e=t.$implicit;n._6D("value",e.id),n.yG2(),n.cNF(e.name)}}function ki(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Department is required."),n.C$Y())}function Mt(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Gender is required."),n.C$Y())}function zi(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Address is required."),n.C$Y())}function Sn(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Address must be at most 100 characters "),n.C$Y())}function Rn(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"City is required."),n.C$Y())}function Hi(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Zip code is required. "),n.C$Y())}function ar(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Invalid zip code. "),n.C$Y())}function Ht(i,t){if(1&i&&(n.I0R(0,"div"),n.yuY(1,Hi,2,0,"div",103)(2,ar,2,0,"div",103),n.C$Y()),2&i){const e=n.GaO();n.yG2(),n.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("required")),n.yG2(),n.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("maxlength"))}}function Vt(i,t){if(1&i&&(n.I0R(0,"option",102),n.OEk(1),n.C$Y()),2&i){const e=t.$implicit;n.E7m("value",e),n.yG2(),n.oRS(" ",e," ")}}function dt(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"State is required."),n.C$Y())}function ot(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Status is required."),n.C$Y())}function Xe(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Password is required. "),n.C$Y())}const Qe=i=>({"is-invalid":i}),Rt=(i,t)=>({"mdi-eye-off-outline":i,"mdi-eye-outline":t});function ui(i,t){if(1&i){const e=n.KQA();n.I0R(0,"div",56)(1,"div",104)(2,"label",105),n.OEk(3,"New Password*"),n.C$Y(),n.I0R(4,"div",106)(5,"input",107),n.qCj("input",function(){n.usT(e);const s=n.GaO();return n.CGJ(s.checkPasswordPattern())}),n.C$Y(),n.I0R(6,"button",108),n.qCj("click",function(){n.usT(e);const s=n.GaO();return n.CGJ(s.toggleFieldTextType1())}),n.wR5(7,"i",109),n.C$Y()(),n.yuY(8,Xe,2,0,"div",103),n.C$Y()()}if(2&i){const e=n.GaO();n.yG2(5),n.E7m("type",e.fieldTextType1?"text":"password")("ngClass",n.S45(4,Qe,e.f.password.hasError("required")&&e.f.password.touched)),n.yG2(2),n.E7m("ngClass",n.IBC(6,Rt,!e.fieldTextType1,e.fieldTextType1)),n.yG2(),n.E7m("ngIf",e.f.password.hasError("required")&&e.f.password.touched)}}function en(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Confirm Password is required. "),n.C$Y())}function ji(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Password and Confirm Password does not match. "),n.C$Y())}function bn(i,t){if(1&i){const e=n.KQA();n.I0R(0,"div",56)(1,"div",104)(2,"label",110),n.OEk(3,"Confirm Password*"),n.C$Y(),n.I0R(4,"div",106),n.wR5(5,"input",111),n.I0R(6,"button",108),n.qCj("click",function(){n.usT(e);const s=n.GaO();return n.CGJ(s.toggleFieldTextType2())}),n.wR5(7,"i",109),n.C$Y()(),n.yuY(8,en,2,0,"div",103)(9,ji,2,0,"div",103),n.C$Y()()}if(2&i){const e=n.GaO();n.yG2(5),n.E7m("type",e.fieldTextType2?"text":"password")("ngClass",n.S45(5,Qe,e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched)),n.yG2(2),n.E7m("ngClass",n.IBC(7,Rt,!e.fieldTextType2,e.fieldTextType2)),n.yG2(),n.E7m("ngIf",e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched),n.yG2(),n.E7m("ngIf",e.formGroup.hasError("mismatch")&&(null==e.f.confirmPassword?null:e.f.confirmPassword.value)&&(null==e.f.password?null:e.f.password.value))}}function bt(i,t){if(1&i&&(n.I0R(0,"div",112)(1,"div",113)(2,"div",20)(3,"div",114)(4,"h5",115),n.OEk(5,"Password must contain:"),n.C$Y()(),n.I0R(6,"div")(7,"p",116),n.OEk(8," Minimum "),n.I0R(9,"b"),n.OEk(10,"8 characters"),n.C$Y()(),n.I0R(11,"p",117),n.OEk(12," At least "),n.I0R(13,"b"),n.OEk(14,"one lowercase"),n.C$Y(),n.OEk(15," letter (a-z) "),n.C$Y(),n.I0R(16,"p",118),n.OEk(17," At least "),n.I0R(18,"b"),n.OEk(19,"one uppercase"),n.C$Y(),n.OEk(20," letter (A-Z) "),n.C$Y(),n.I0R(21,"p",119),n.OEk(22," At least "),n.I0R(23,"b"),n.OEk(24,"one number"),n.C$Y(),n.OEk(25," (0-9) "),n.C$Y(),n.I0R(26,"p",120),n.OEk(27," At least "),n.I0R(28,"b"),n.OEk(29,"one special character"),n.C$Y(),n.OEk(30," (!@#$!%*?&) "),n.C$Y()()()()()),2&i){const e=n.GaO();n.yG2(7),n.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),n.yG2(4),n.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),n.yG2(5),n.eAK("valid",e.passwordValidations.upper),n.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),n.yG2(5),n.E7m("ngClass",e.passwordValidations.number?"valid":"invalid"),n.yG2(5),n.E7m("ngClass",e.passwordValidations.special?"valid":"invalid")}}function Ft(i,t){1&i&&(n.I0R(0,"button",121),n.OEk(1,"Save"),n.C$Y())}function ke(i,t){1&i&&(n.I0R(0,"button",122),n.wR5(1,"span",123),n.OEk(2," Please wait "),n.C$Y())}function yt(i,t){1&i&&(n.I0R(0,"div",77)(1,"div",124)(2,"span",125),n.OEk(3,"Loading..."),n.C$Y()()())}function Wt(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Designation name is required."),n.C$Y())}function We(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Designation name must be at most 45 characters "),n.C$Y())}function Jt(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Status is required."),n.C$Y())}function ge(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Department name is required."),n.C$Y())}function l(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1," Department name must be at most 45 characters "),n.C$Y())}function u(i,t){1&i&&(n.I0R(0,"div",101),n.OEk(1,"Status is required."),n.C$Y())}let p=(()=>{class i{constructor(e,r,s,o,f){this.route=e,this.formBuilder=r,this.api=s,this.router=o,this.toastService=f,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeselectedImage=null,this.employeeselectedImagePreview=null,this.employeeuploadedImage=null,this.states=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep","Delhi","Puducherry","Ladakh","Jammu and Kashmir"],this.fieldTextType1=!1,this.fieldTextType2=!1,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1,special:!1},this.useDefaultPassword=!0,this.departments=[],this.designations=[]}ngOnInit(){this.breadCrumbItems=[{label:"Employee",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(r=>{this.urlId=r.id?Number(r.id):null}),this.initializeForm(),this.urlId&&(this.useDefaultPassword=!1,this.getemployeeData());const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.updateFormControls(),this.getDepartment(),this.getDesignation(),this.formGroupDesignation=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]}),this.formGroupDepartment=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],address:["",[j.AQ.maxLength(100),j.AQ.required]],dob:["",[j.AQ.required]],image:["",this.imageValidator()],emp_id:["",[j.AQ.required]],email:["",[j.AQ.required,j.AQ.email,j.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[j.AQ.required,j.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],status:["",[j.AQ.required]],gender:["",[j.AQ.required]],state:["",[j.AQ.required]],city:["",[j.AQ.required]],zip_code:["",[j.AQ.required,j.AQ.maxLength(6)]],designation:["",[j.AQ.required]],department:["",[j.AQ.required]],joining_date:[""],password:[this.urlId?"":"123456",this.urlId?[j.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]:[j.AQ.required,j.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]],confirmPassword:[this.urlId?"":"123456",this.urlId?[]:[j.AQ.required]]},{validator:this.passwordMatchValidator})}imageValidator(){}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}passwordMatchValidator(e){const r=e.get("password")?.value,s=e.get("confirmPassword")?.value;return r&&s?r===s?null:{mismatch:!0}:null}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e),this.passwordValidations.special=/[@$!%*?&]/.test(e)}onCheckboxChange(e){this.useDefaultPassword=e.target.checked,this.updateFormControls()}updateFormControls(){this.useDefaultPassword?(this.formGroup.get("password")?.setValue("123456"),this.formGroup.get("confirmPassword")?.setValue("123456"),this.formGroup.get("password")?.disable(),this.formGroup.get("confirmPassword")?.disable()):(this.formGroup.get("password")?.enable(),this.formGroup.get("confirmPassword")?.enable(),this.formGroup.get("password")?.setValue(""),this.formGroup.get("confirmPassword")?.setValue(""))}get f(){return this.formGroup.controls}get d(){return this.formGroupDesignation.controls}get de(){return this.formGroupDepartment.controls}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setemployeeDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setemployeeDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,dob:e.dob,emp_id:e.employee_id,email:e.email,password:e.password,status:e.status,mobile:e.mobile,joining_date:e.joining_date,gender:e.gender,designation:e.designation,department:e.department,state:e.state,city:e.city,zip_code:e.zip_code}),this.employeeuploadedImage=e.image||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.urlId?this.updateemployee(e):this.addemployee(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("company_id",this.company_id),e.append("name",this.f.name.value),e.append("mobile",this.f.mobile.value),e.append("email",this.f.email.value),e.append("address",this.f.address.value),e.append("dob",this.f.dob.value),e.append("employee_id",this.f.emp_id.value),e.append("status",this.f.status.value),e.append("joining_date",this.f.joining_date.value),e.append("gender",this.f.gender.value),e.append("designation",this.f.designation.value),e.append("department",this.f.department.value),e.append("state",this.f.state.value),e.append("city",this.f.city.value),e.append("zip_code",this.f.zip_code.value),this.f.password.value&&e.append("password",this.f.password.value),this.employeeselectedImage&&e.append("image",this.employeeselectedImage),e}addemployee(e){this.api.post("employees",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}updateemployee(e){this.api.put("employees",this.urlId,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["employee"])):this.toastService.error(e.message)}resetForm(){this.employeeselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}employeeimageSelect(e){const r=e.target.files[0];r&&(this.employeeselectedImage=r,this.employeeselectedImagePreview=URL.createObjectURL(r))}employeeremoveImage(){this.employeeselectedImage=null,this.employeeselectedImagePreview=null}onAdd(){this.resetFormDes(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDes(){this.formGroupDesignation.reset(),this.formGroupDesignation.patchValue({name:"",status:""})}onSubmitDes(){if(this.formGroupDesignation.valid){this.toggleSpinner(!0);const e=this.createFormDataDes();this.adddes(e)}else this.formGroupDesignation.markAllAsTouched()}createFormDataDes(){return{name:this.d.name.value,status:this.d.status.value}}adddes(e){this.api.post("designation",e).subscribe(r=>this.handleResponseDes(r),r=>this.handleError(r))}handleResponseDes(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDesignation.reset(),this.toastService.success("Designation Created Successfully!!"),this.getDesignation(),this.showModal?.hide()):this.toastService.error(e.message)}onAdddep(){this.resetFormDes(),this.showModalDepartment?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDep(){this.formGroupDepartment.reset(),this.formGroupDepartment.patchValue({name:"",status:""})}onSubmitDep(){if(this.formGroupDepartment.valid){this.toggleSpinner(!0);const e=this.createFormDataDep();this.adddep(e)}else this.formGroupDepartment.markAllAsTouched()}createFormDataDep(){return{name:this.de.name.value,status:this.de.status.value}}adddep(e){this.api.post("department",e).subscribe(r=>this.handleResponseDep(r),r=>this.handleError(r))}handleResponseDep(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDepartment.reset(),this.toastService.success("Department Created Successfully!!"),this.getDepartment(),this.showModalDepartment?.hide()):this.toastService.error(e.message)}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(D.gV),n.GI1(j.im),n.GI1(He.W),n.GI1(D.E5),n.GI1(Be.SA))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-add-employee"]],viewQuery:function(r,s){if(1&r&&(n.CC$(Ds,5),n.CC$(Es,5)),2&r){let o;n.wto(o=n.Gqi())&&(s.showModal=o.first),n.wto(o=n.Gqi())&&(s.showModalDepartment=o.first)}},decls:271,vars:52,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["class","invalid-text"],["type","file","id","empimage","accept","image/*","formControlName","image","hidden","",3,"change"],["empimage",""],["for","empimage",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","empimage","placement","right","tooltip","Select Employee Photo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"col-xl-9"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter Empolyee name","value","name",1,"form-control",3,"ngClass"],["for","emp_id",1,"form-label"],["type","text","id","emp_id","formControlName","emp_id","placeholder","Enter Employee Id","value","emp_id",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","dob",1,"form-label"],["type","date","id","dob","formControlName","dob","placeholder","Enter Date of Birth","value","dob",1,"form-control",3,"ngClass"],["for","JoiningdatInput",1,"form-label"],["formControlName","joining_date","type","date",1,"form-control"],[1,"d-flex"],[1,"flex-grow-1"],["for","designation",1,"form-label"],[1,"flex-shrink-0"],[1,"link-effect",3,"click"],[1,"bi","bi-arrow-right","align-baseline","ms-1"],["id","designation","formControlName","designation","placeholder","Enter Designation",1,"form-select"],["selected",""],["for","departments",1,"form-label"],["id","departments","formControlName","department","placeholder","Enter Department",1,"form-select"],["for","gender",1,"form-label"],["formControlName","gender","data-choices","","id","gender",1,"form-control",3,"ngClass"],["value",""],["value","Male"],["value","Female"],["value","Other"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","3","formControlName","address",1,"form-control",3,"ngClass"],[1,"col-lg-4"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter city","value","city",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","number","id","zip_code","formControlName","zip_code","placeholder","Enter zip code",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","state",1,"form-label"],["formControlName","state","data-choices","","id","state",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"col-lg-6","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","directMessage",1,"form-check-input",3,"checked","change"],["class","col-lg-4",4,"ngIf"],["class","col-lg-12 mt-4"],[1,"col-12"],[1,"hstack","gap-2","justify-content-end","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","product-title-input",1,"form-label"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["showModalDepartment","bs-modal"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image","alt","Dropzone-Image",3,"src"],["alt","Dropzone-Image",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["alt","Uploaded Thumbnail",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"invalid-text"],[3,"value"],["class","invalid-text",4,"ngIf"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","formControlName","password","placeholder","Enter new password",1,"form-control","password-input",3,"type","ngClass","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["for","confirm-password-input",1,"form-label"],["id","confirm-password-input","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","password-input",3,"type","ngClass"],[1,"col-lg-12","mt-4"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"form",1),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),n.wR5(6,"img",5),n.C$Y(),n.I0R(7,"div",6)(8,"div",7)(9,"div",8),n.yuY(10,us,1,1)(11,Ks,1,1)(12,io,1,0)(13,as,2,0,"div",9),n.I0R(14,"input",10,11),n.qCj("change",function(g){return s.employeeimageSelect(g)}),n.C$Y(),n.I0R(16,"div",12)(17,"label",13)(18,"span",14),n.wR5(19,"i",15),n.C$Y()()()()()()()(),n.I0R(20,"div",16)(21,"div",17)(22,"div",18)(23,"h6",19),n.OEk(24,"Personal Details"),n.C$Y()(),n.I0R(25,"div",20)(26,"div",21)(27,"div",2)(28,"div",22)(29,"div",23)(30,"label",24),n.OEk(31,"Empolyee Name "),n.I0R(32,"span",25),n.OEk(33,"*"),n.C$Y()(),n.wR5(34,"input",26),n.yuY(35,Rs,2,0,"div",9)(36,Ss,2,0,"div",9),n.C$Y()(),n.I0R(37,"div",22)(38,"div",23)(39,"label",27),n.OEk(40,"Employee Id "),n.I0R(41,"span",25),n.OEk(42,"*"),n.C$Y()(),n.wR5(43,"input",28),n.yuY(44,Bs,2,0,"div",9),n.C$Y()(),n.I0R(45,"div",22)(46,"div",23)(47,"label",29),n.OEk(48,"Email "),n.I0R(49,"span",25),n.OEk(50,"*"),n.C$Y()(),n.wR5(51,"input",30),n.yuY(52,xa,2,0,"div",9)(53,Gt,2,0,"div",9),n.C$Y()(),n.I0R(54,"div",22)(55,"div",23)(56,"label",31),n.OEk(57,"Contact Number "),n.I0R(58,"span",25),n.OEk(59,"*"),n.C$Y()(),n.wR5(60,"input",32),n.yuY(61,Ue,2,0,"div",9)(62,Je,2,0,"div",9),n.C$Y()(),n.I0R(63,"div",22)(64,"div",23)(65,"label",33),n.OEk(66,"Date of Birth "),n.I0R(67,"span",25),n.OEk(68,"*"),n.C$Y()(),n.wR5(69,"input",34),n.yuY(70,At,2,0,"div",9),n.C$Y()(),n.I0R(71,"div",22)(72,"div",23)(73,"label",35),n.OEk(74,"Joining Date"),n.C$Y(),n.wR5(75,"input",36),n.C$Y()(),n.I0R(76,"div",22)(77,"div",23)(78,"div",37)(79,"div",38)(80,"label",39),n.OEk(81,"Designation "),n.I0R(82,"span",25),n.OEk(83,"*"),n.C$Y()()(),n.I0R(84,"div",40)(85,"a",41),n.qCj("click",function(){return s.onAdd()}),n.OEk(86,"Create New "),n.wR5(87,"i",42),n.C$Y()()(),n.I0R(88,"select",43)(89,"option",44),n.OEk(90,"Select Designation"),n.C$Y(),n.c53(91,St,2,2,"option",102,n.wJt),n.C$Y(),n.yuY(93,si,2,0,"div",9),n.C$Y()(),n.I0R(94,"div",22)(95,"div",23)(96,"div",37)(97,"div",38)(98,"label",45),n.OEk(99,"Department "),n.I0R(100,"span",25),n.OEk(101,"*"),n.C$Y()()(),n.I0R(102,"div",40)(103,"a",41),n.qCj("click",function(){return s.onAdddep()}),n.OEk(104,"Create New "),n.wR5(105,"i",42),n.C$Y()()(),n.I0R(106,"select",46)(107,"option",44),n.OEk(108,"Select Department"),n.C$Y(),n.c53(109,wi,2,2,"option",102,n.wJt),n.C$Y(),n.yuY(111,ki,2,0,"div",9),n.C$Y()(),n.I0R(112,"div",22)(113,"div",23)(114,"label",47),n.OEk(115,"Gender "),n.I0R(116,"span",25),n.OEk(117,"*"),n.C$Y()(),n.I0R(118,"select",48)(119,"option",49),n.OEk(120,"Select Gender"),n.C$Y(),n.I0R(121,"option",50),n.OEk(122,"Male"),n.C$Y(),n.I0R(123,"option",51),n.OEk(124,"Female"),n.C$Y(),n.I0R(125,"option",52),n.OEk(126,"Other"),n.C$Y()(),n.yuY(127,Mt,2,0,"div",9),n.C$Y()(),n.I0R(128,"div",53)(129,"div",23)(130,"label",54),n.OEk(131," Address "),n.I0R(132,"span",25),n.OEk(133,"*"),n.C$Y()(),n.wR5(134,"textarea",55),n.yuY(135,zi,2,0,"div",9)(136,Sn,2,0,"div",9),n.C$Y()(),n.I0R(137,"div",56)(138,"div",23)(139,"label",57),n.OEk(140,"City "),n.I0R(141,"span",25),n.OEk(142,"*"),n.C$Y()(),n.wR5(143,"input",58),n.yuY(144,Rn,2,0,"div",9),n.C$Y()(),n.I0R(145,"div",56)(146,"div",23)(147,"label",59),n.OEk(148,"Zip code "),n.I0R(149,"span",25),n.OEk(150,"*"),n.C$Y()(),n.wR5(151,"input",60),n.yuY(152,Ht,3,2,"div",61),n.C$Y()(),n.I0R(153,"div",56)(154,"div",23)(155,"label",62),n.OEk(156,"State "),n.I0R(157,"span",25),n.OEk(158,"*"),n.C$Y()(),n.I0R(159,"select",63)(160,"option",49),n.OEk(161,"Select State"),n.C$Y(),n.yuY(162,Vt,2,2,"option",64),n.C$Y(),n.yuY(163,dt,2,0,"div",9),n.C$Y()(),n.I0R(164,"div",22)(165,"div",23)(166,"label",65),n.OEk(167,"Status "),n.I0R(168,"span",25),n.OEk(169,"*"),n.C$Y()(),n.I0R(170,"select",66)(171,"option",49),n.OEk(172,"Select Status"),n.C$Y(),n.I0R(173,"option",67),n.OEk(174,"Active"),n.C$Y(),n.I0R(175,"option",68),n.OEk(176,"Inactive"),n.C$Y()(),n.yuY(177,ot,2,0,"div",9),n.C$Y()(),n.I0R(178,"div",69)(179,"li",37)(180,"div",40)(181,"div",70)(182,"input",71),n.qCj("change",function(g){return s.onCheckboxChange(g)}),n.C$Y(),n.OEk(183," Use Default Password (Password : 123456) "),n.C$Y()()()(),n.yuY(184,ui,9,9,"div",72)(185,bn,10,10,"div",72)(186,bt,31,7,"div",73),n.C$Y(),n.I0R(187,"div",74)(188,"div",75),n.yuY(189,Ft,2,0,"button",76)(190,ke,3,0),n.C$Y()(),n.wR5(191,"div"),n.C$Y(),n.yuY(192,yt,4,0,"div",77),n.C$Y()()()()(),n.I0R(193,"div",78,79),n.qCj("hidden.bs.modal",function(){return s.resetFormDes()}),n.I0R(195,"div",80)(196,"div",81)(197,"div",82)(198,"h5",83),n.OEk(199,"Add Designation"),n.C$Y(),n.I0R(200,"button",84),n.qCj("click",function(){n.usT(o);const g=n.Gew(194);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(201,"form",85),n.qCj("ngSubmit",function(){return s.onSubmitDes()}),n.I0R(202,"div",86),n.wR5(203,"div",87),n.I0R(204,"div",23)(205,"label",88),n.OEk(206,"Designation Name "),n.I0R(207,"span",25),n.OEk(208,"*"),n.C$Y()(),n.wR5(209,"input",89),n.yuY(210,Wt,2,0,"div",9)(211,We,2,0,"div",9),n.C$Y(),n.I0R(212,"div",23)(213,"label",65),n.OEk(214,"Status "),n.I0R(215,"span",25),n.OEk(216,"*"),n.C$Y()(),n.I0R(217,"select",66)(218,"option",49),n.OEk(219,"Select Status"),n.C$Y(),n.I0R(220,"option",67),n.OEk(221,"Active"),n.C$Y(),n.I0R(222,"option",68),n.OEk(223,"Inactive"),n.C$Y()(),n.yuY(224,Jt,2,0,"div",9),n.C$Y()(),n.I0R(225,"div",90)(226,"div",91)(227,"button",92),n.qCj("click",function(){n.usT(o);const g=n.Gew(194);return n.CGJ(g.hide())}),n.wR5(228,"i",93),n.OEk(229," Close "),n.C$Y(),n.I0R(230,"button",94),n.OEk(231," Add "),n.C$Y()()()()()()(),n.I0R(232,"div",78,95),n.qCj("hidden.bs.modal",function(){return s.resetFormDep()}),n.I0R(234,"div",80)(235,"div",81)(236,"div",82)(237,"h5",83),n.OEk(238,"Add Department"),n.C$Y(),n.I0R(239,"button",84),n.qCj("click",function(){n.usT(o);const g=n.Gew(233);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(240,"form",85),n.qCj("ngSubmit",function(){return s.onSubmitDep()}),n.I0R(241,"div",86),n.wR5(242,"div",87),n.I0R(243,"div",23)(244,"label",88),n.OEk(245,"Department Name "),n.I0R(246,"span",25),n.OEk(247,"*"),n.C$Y()(),n.wR5(248,"input",96),n.yuY(249,ge,2,0,"div",9)(250,l,2,0,"div",9),n.C$Y(),n.I0R(251,"div",23)(252,"label",65),n.OEk(253,"Status "),n.I0R(254,"span",25),n.OEk(255,"*"),n.C$Y()(),n.I0R(256,"select",66)(257,"option",49),n.OEk(258,"Select Status"),n.C$Y(),n.I0R(259,"option",67),n.OEk(260,"Active"),n.C$Y(),n.I0R(261,"option",68),n.OEk(262,"Inactive"),n.C$Y()(),n.yuY(263,u,2,0,"div",9),n.C$Y()(),n.I0R(264,"div",90)(265,"div",91)(266,"button",92),n.qCj("click",function(){n.usT(o);const g=n.Gew(233);return n.CGJ(g.hide())}),n.wR5(267,"i",93),n.OEk(268," Close "),n.C$Y(),n.I0R(269,"button",94),n.OEk(270," Add "),n.C$Y()()()()()()()}2&r&&(n.E7m("title",s.urlId?"Edit Employee Detail":"Add Employee Detail")("breadcrumbItems",s.breadCrumbItems),n.yG2(),n.E7m("formGroup",s.formGroup),n.yG2(9),n.C0Y(10,s.employeeselectedImage?10:s.employeeuploadedImage?11:12),n.yG2(3),n.C0Y(13,s.f.image&&s.f.image.hasError("required")&&s.f.image.touched?13:-1),n.yG2(21),n.E7m("ngClass",s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?"is-invalid":""),n.yG2(),n.C0Y(35,s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?35:-1),n.yG2(),n.C0Y(36,s.f.name&&s.f.name.hasError("maxlength")&&s.f.name.touched?36:-1),n.yG2(7),n.E7m("ngClass",s.f.emp_id&&s.f.emp_id.hasError("required")&&s.f.emp_id.touched?"is-invalid":""),n.yG2(),n.C0Y(44,s.f.emp_id&&s.f.emp_id.hasError("required")&&s.f.emp_id.touched?44:-1),n.yG2(7),n.E7m("ngClass",s.f.email&&s.f.email.hasError("required")&&s.f.email.touched?"is-invalid":""),n.yG2(),n.C0Y(52,s.f.email&&s.f.email.hasError("required")&&s.f.email.touched?52:-1),n.yG2(),n.C0Y(53,s.f.email.hasError("pattern")?53:-1),n.yG2(7),n.E7m("ngClass",s.f.mobile&&s.f.mobile.hasError("required")&&s.f.mobile.touched?"is-invalid":""),n.yG2(),n.C0Y(61,s.f.mobile&&s.f.mobile.hasError("required")&&s.f.mobile.touched?61:-1),n.yG2(),n.C0Y(62,s.f.mobile.hasError("pattern")?62:-1),n.yG2(7),n.E7m("ngClass",s.f.dob&&s.f.dob.hasError("required")&&s.f.dob.touched?"is-invalid":""),n.yG2(),n.C0Y(70,s.f.dob&&s.f.dob.hasError("required")&&s.f.dob.touched?70:-1),n.yG2(21),n.oho(s.designations),n.yG2(2),n.C0Y(93,s.f.designation&&s.f.designation.hasError("required")&&s.f.designation.touched?93:-1),n.yG2(16),n.oho(s.departments),n.yG2(2),n.C0Y(111,s.f.department&&s.f.department.hasError("required")&&s.f.department.touched?111:-1),n.yG2(7),n.E7m("ngClass",s.f.gender&&s.f.gender.hasError("required")&&s.f.gender.touched?"is-invalid":""),n.yG2(9),n.C0Y(127,s.f.gender&&s.f.gender.hasError("required")&&s.f.gender.touched?127:-1),n.yG2(7),n.E7m("ngClass",n.S45(50,Qe,s.f.address&&s.f.address.errors&&s.f.address.touched)),n.yG2(),n.C0Y(135,s.f.address&&s.f.address.hasError("required")&&s.f.address.touched?135:-1),n.yG2(),n.C0Y(136,s.f.address&&s.f.address.hasError("maxlength")&&s.f.address.touched?136:-1),n.yG2(7),n.E7m("ngClass",s.f.city&&s.f.city.hasError("required")&&s.f.city.touched?"is-invalid":""),n.yG2(),n.C0Y(144,s.f.city&&s.f.city.hasError("required")&&s.f.city.touched?144:-1),n.yG2(7),n.E7m("ngClass",s.f.zip_code&&s.f.zip_code.hasError("required")&&s.f.zip_code.touched?"is-invalid":""),n.yG2(),n.E7m("ngIf",(null==s.f.zip_code?null:s.f.zip_code.touched)&&(null==s.f.zip_code?null:s.f.zip_code.errors)),n.yG2(7),n.E7m("ngClass",s.f.state&&s.f.state.hasError("required")&&s.f.state.touched?"is-invalid":""),n.yG2(3),n.E7m("ngForOf",s.states),n.yG2(),n.C0Y(163,s.f.state&&s.f.state.hasError("required")&&s.f.state.touched?163:-1),n.yG2(7),n.E7m("ngClass",s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(177,s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?177:-1),n.yG2(5),n.E7m("checked",s.useDefaultPassword),n.yG2(2),n.E7m("ngIf",!s.useDefaultPassword),n.yG2(),n.E7m("ngIf",!s.useDefaultPassword),n.yG2(),n.C0Y(186,s.f.password&&s.f.password.hasError("pattern")?186:-1),n.yG2(3),n.C0Y(189,s.saveButtonActive?189:190),n.yG2(3),n.C0Y(192,s.spinnerStatus?192:-1),n.yG2(9),n.E7m("formGroup",s.formGroupDesignation),n.yG2(9),n.C0Y(210,s.d.name&&s.d.name.hasError("required")&&s.d.name.touched?210:-1),n.yG2(),n.C0Y(211,s.d.name&&s.d.name.hasError("maxlength")&&s.d.name.touched?211:-1),n.yG2(6),n.E7m("ngClass",s.d.status&&s.d.status.hasError("required")&&s.d.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(224,s.d.status&&s.d.status.hasError("required")&&s.d.status.touched?224:-1),n.yG2(16),n.E7m("formGroup",s.formGroupDepartment),n.yG2(9),n.C0Y(249,s.de.name&&s.de.name.hasError("required")&&s.de.name.touched?249:-1),n.yG2(),n.C0Y(250,s.de.name&&s.de.name.hasError("maxlength")&&s.de.name.touched?250:-1),n.yG2(6),n.E7m("ngClass",s.de.status&&s.de.status.hasError("required")&&s.de.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(263,s.de.status&&s.de.status.hasError("required")&&s.de.status.touched?263:-1))},dependencies:[Re.QF,Re.ay,Re.u_,$e.O,j.sz,j.wd,j.GO,j.ot,j.O4,j.GC,j.ue,j.u,j.uW,j.Wo,Un.uK,Fs.uM],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}']})}return i})();var y=Qt(4448),w=Qt(5657),C=Qt(4680),M=Qt(3304);function B(i,t){if(1&i&&(n.I0R(0,"div",20)(1,"p",21),n.OEk(2,"Check-In At"),n.C$Y(),n.wR5(3,"h5",35),n.C$Y()),2&i){const e=n.GaO();n.yG2(3),n.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckInTime),n.E3n)}}function H(i,t){if(1&i&&(n.I0R(0,"div",20)(1,"p",21),n.OEk(2,"Check-out At"),n.C$Y(),n.I0R(3,"h5",22),n.wR5(4,"span",36),n.C$Y()()),2&i){const e=n.GaO();n.yG2(4),n.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckOutTime),n.E3n)}}function K(i,t){if(1&i&&(n.I0R(0,"div",20)(1,"p",21),n.OEk(2,"Total Time"),n.C$Y(),n.I0R(3,"h5",22)(4,"span",37),n.OEk(5),n.C$Y()()()),2&i){const e=n.GaO();n.yG2(5),n.cNF(null==e.checkIndetails?null:e.checkIndetails.totalDuration)}}function J(i,t){if(1&i&&(n.I0R(0,"div",20)(1,"p",21),n.OEk(2,"Total Distance"),n.C$Y(),n.I0R(3,"h5",22)(4,"span",37),n.OEk(5),n.C$Y()()()),2&i){const e=n.GaO();n.yG2(5),n.oRS("",e.totaldistanceToshow," km")}}const ne=i=>({"selected-item":i});function de(i,t){if(1&i){const e=n.KQA();n.I0R(0,"li",38),n.qCj("click",function(){const o=n.usT(e).$implicit,f=n.GaO();return n.CGJ(f.updateMarkerAndPath(o.end.longitude,o.end.latitude,o))}),n.I0R(1,"div",39)(2,"span",40),n.OEk(3),n.C$Y(),n.I0R(4,"button",41),n.wR5(5,"span",42),n.OEk(6),n.C$Y()(),n.I0R(7,"p",43),n.OEk(8),n.C$Y()()}if(2&i){const e=t.$implicit,r=n.GaO();n.E7m("ngClass",n.S45(5,ne,r.selectedItem===e)),n.yG2(3),n.cNF(e.end.formattedTime),n.yG2(),n.E7m("ngClass",r.getBatteryClass(e.end.battery_status.replace("%",""))),n.yG2(2),n.oRS(" ",e.end.battery_status," "),n.yG2(2),n.cNF(e.end.address)}}function xe(i,t){1&i&&(n.I0R(0,"div",44),n.wR5(1,"div",45),n.I0R(2,"button",46)(3,"span",47)(4,"span",48),n.OEk(5," Loading... "),n.C$Y(),n.I0R(6,"span",49)(7,"span",50),n.OEk(8,"Loading..."),n.C$Y()()()()())}const Se=i=>({rotate:i});let Pe=(()=>{class i{constructor(e,r,s){this.route=e,this.api=r,this.cdr=s,this.urlId=null,this.dateChangeSubject=new w.E,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeTimeline=[],this.selectedDate=new Date,this.markers=[],this.selectedItem=null,this.checkIndetails={},this.selectedInterval=15,this.intervalTimeCoordinates=[],this.isRotating=!1,this.uniqueCoordinates=[]}ngOnDestroy(){this.map&&this.map.remove()}ngOnInit(){this.cdr.detectChanges(),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(new Date)),this.bsConfig={dateInputFormat:"DD-MMM-YY",showWeekNumbers:!1},this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&(this.getemployeeTimeline(),this.getCheckInDetail()),this.dateChangeSubject.pipe((0,C.o)(300)).subscribe(e=>{this.handleDateChange(e)})}onIntervalChange(){this.initializeMap()}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getemployeeTimeline(),this.getCheckInDetail()}refreshTimeline(){this.isRotating=!0,this.getemployeeTimeline(),setTimeout(()=>{this.isRotating=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),e&&e.status?(this.checkIndetails=e.data[0],this.checkIndetails?.check_in_time&&this.checkIndetails?.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeTimeline(){this.toggleSpinner(!0),this.api.getwithoutid(`getCoordinates?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status&&e.data.length>0){if(this.employeeTimeline=e.data.map(r=>(r.formattedTime=this.formatTime(r.time),r)),this.employeeTimeline&&this.employeeTimeline.length>0){this.initializeMap();let r=0;for(let f=1;f<this.employeeTimeline.length;f++)r+=this.calculateDistance(this.employeeTimeline[f-1].latitude,this.employeeTimeline[f-1].longitude,this.employeeTimeline[f].latitude,this.employeeTimeline[f].longitude);this.calculateTimeSpent(),this.calculateRestPeriods(),this.totaldistanceToshow=r.toFixed(1)}}else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null},e=>{this.toggleSpinner(!1),this.employeeTimeline=[],this.initializeDefaultMap(),this.handleError(e.message||"An error occurred while fetching data")})}filterCoordinatesByInterval(e,r){const[s,o,f]=e.split(":").map(Number),A=[];let P=3600*s+60*o+f;const z=he=>{const[Ae,Ke,ct]=he.split(":").map(Number);return 3600*Ae+60*Ke+ct},se=z(this.employeeTimeline[this.employeeTimeline.length-1].time),oe=this.employeeTimeline[0];for(A.push({start:oe,end:oe});P<=se;){P+=60*r;const he=this.employeeTimeline.find(Ae=>z(Ae.time)>=P);if(!he)break;{const Ae=A[A.length-1];(!Ae||Ae.end.id!==he.id)&&A.push({start:A[A.length-1].end,end:he})}}const _e=this.employeeTimeline[this.employeeTimeline.length-1];return(0===A.length||A[A.length-1].end.id!==_e.id)&&A.push({start:A.length>0?A[A.length-1].end:_e,end:_e}),this.intervalTimeCoordinates=A,A}calculateDistance(e,r,s,o){const g=this.deg2rad(s-e),A=this.deg2rad(o-r),P=Math.sin(g/2)*Math.sin(g/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(s))*Math.sin(A/2)*Math.sin(A/2);return 2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P))*6371}deg2rad(e){return e*(Math.PI/180)}calculateTimeSpent(){const e={driving:0,cycling:0,walking:0,stationary:0};for(let s=1;s<this.employeeTimeline.length;s++){const o=this.employeeTimeline[s-1],f=this.employeeTimeline[s],g=new Date(`1970-01-01T${o.time}Z`),P=(new Date(`1970-01-01T${f.time}Z`).getTime()-g.getTime())/1e3/60,ie=this.calculateDistance(o.latitude,o.longitude,f.latitude,f.longitude)/(P/60);ie>25?e.driving+=P:ie>15?e.cycling+=P:ie>5?e.walking+=P:e.stationary+=P}const r=s=>`${Math.floor(s/60)} hours ${Math.round(s%60)} minutes`;return{driving:r(e.driving),cycling:r(e.cycling),walking:r(e.walking),stationary:r(e.stationary)}}geocodeCoordinates(e,r){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${r}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(o=>o.json()).then(o=>o.features[0].place_name).catch(o=>(console.error("Error fetching address:",o),""))}initializeMap(){this.map=new y.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),this.map.addControl(new y.NavigationControl),this.map.on("load",()=>{if(!this.employeeTimeline||0===this.employeeTimeline.length)return void console.error("Employee timeline data is empty or undefined.");this.map.resize();const e=this.filterCoordinatesByInterval(this.employeeTimeline[0].time,this.selectedInterval),r=this.employeeTimeline.map(s=>s.address?Promise.resolve():this.geocodeCoordinates(s.longitude,s.latitude).then(o=>{this.uniqueCoordinates.some(g=>g.longitude===s.longitude&&g.latitude===s.latitude)||this.uniqueCoordinates.push({longitude:s.longitude,latitude:s.latitude,address:o}),s.address=o}).catch(o=>{console.error("Error fetching address:",o)}));Promise.all(r).then(()=>{this.sendCoordinatesToAPI(this.uniqueCoordinates);const s=this.employeeTimeline[0],o=this.employeeTimeline[this.employeeTimeline.length-1],f=new y.Popup({offset:25}).setHTML(`<h6>${s.formattedTime}</h6>\n              <p>Battery Percentage: ${s.battery_status}%</p>\n              <p>Address: ${s.address}</p>`),g=new y.Marker({color:"green"}).setLngLat([s.longitude,s.latitude]).setPopup(f).addTo(this.map),A=new y.Popup({offset:25}).setHTML(`<h6>${o.formattedTime}</h6>\n              <p>Battery Percentage: ${o.battery_status}%</p>\n              <p>Address: ${o.address}</p>`),P=new y.Marker({color:"red"}).setLngLat([o.longitude,o.latitude]).setPopup(A).addTo(this.map);this.markers.push(g,P),this.calculateRestPeriods().forEach((se,oe)=>{const _e=new y.Popup({offset:25}).setHTML(`<h6>Rest Period ${oe+1}</h6>\n                  <p>Duration: ${se.duration}</p>\n                  <p>From: ${se.startTime}</p>\n                  <p>To: ${se.endTime}</p>\n                  <p>Address: ${se.address}</p>`),he=new y.Marker({color:"blue"}).setLngLat([se.start.longitude,se.start.latitude]).setPopup(_e).addTo(this.map);this.markers.push(he)}),e.forEach((se,oe)=>{if(!se.start||!se.end)return void console.error(`Segment at index ${oe} is missing start or end coordinates.`);const he=this.employeeTimeline.filter(Ke=>{const ct=this.getTimeInSeconds(Ke.time),pt=this.getTimeInSeconds(se.start.time),mi=this.getTimeInSeconds(se.end.time);return ct>=pt&&ct<=mi}).map(Ke=>[Ke.longitude,Ke.latitude,Ke.time]).filter((Ke,ct,pt)=>0===ct||Ke[0]!==pt[ct-1][0]||Ke[1]!==pt[ct-1][1]||Ke[2]!==pt[ct-1][2]).map(Ke=>[Ke[0],Ke[1]]);(he[0][0]!==se.start.longitude||he[0][1]!==se.start.latitude)&&he.unshift([se.start.longitude,se.start.latitude]),(he[he.length-1][0]!==se.end.longitude||he[he.length-1][1]!==se.end.latitude)&&he.push([se.end.longitude,se.end.latitude]);const Ae=`path-${oe}`;this.removeLayerIfExists(Ae),this.map.addLayer({id:Ae,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:he}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":4}})});const ie=new y.LngLatBounds;this.markers.forEach(se=>ie.extend(se.getLngLat())),this.map.fitBounds(ie,{padding:50})})})}calculateRestPeriods(){const e=[];let s=null;for(let o=1;o<this.employeeTimeline.length;o++){const f=this.employeeTimeline[o-1],g=this.employeeTimeline[o];if(this.calculateDistance(f.latitude,f.longitude,g.latitude,g.longitude)<=.02)s||(s=f);else if(s){const P=this.getTimeInSeconds(g.time)-this.getTimeInSeconds(s.time),z=P/60;z>=5&&e.push({...s,start:s,end:g,duration:this.formatDuration(P),durationInMinutes:z.toFixed(1),startTime:this.formatTime(s.time),endTime:this.formatTime(g.time)}),s=null}}return e}formatDuration(e){const r=Math.floor(e/3600),s=Math.floor(e%3600/60),o=Math.floor(e%60);return`${this.pad(r)}:${this.pad(s)}:${this.pad(o)}`}pad(e){return e.toString().padStart(2,"0")}getTimeInSeconds(e){const[r,s,o]=e.split(":").map(Number);return 3600*r+60*s+o}removeLayerIfExists(e){this.map.getLayer(e)&&this.map.removeLayer(e),this.map.getSource(e)&&this.map.removeSource(e)}initializeDefaultMap(){this.map=new y.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.9629,20.5937],zoom:13}),this.map.addControl(new y.NavigationControl)}formatTime(e){const[r,s,o]=e.split(":");return`${+r%12||12}:${s} ${+r>=12?"PM":"AM"}`}handleError(e){this.toggleSpinner(!1)}updateMarkerAndPath(e,r,s){this.marker&&this.marker.remove(),this.marker=new y.Marker({color:"#ffc703"}).setLngLat([e,r]).addTo(this.map);const o=new y.Popup({offset:25}).setHTML(`<h6>${s.end.formattedTime}</h6>\n        <p>Battery Percentage: ${s.end.battery_status}%</p>\n        <p>Address: ${s.end.address}</p>`);this.marker.setPopup(o),this.selectedItem=s}getBatteryClass(e){return e>=75?"battery-high":e>=35?"battery-mid":"battery-low"}calculateTotalTime(e,r){const[s,o]=e.split(":").map(Number),[f,g]=r.split(":").map(Number),A=new Date;A.setHours(s,o,0);const P=new Date;P.setHours(f,g,0);const z=P.getTime()-A.getTime(),ie=Math.floor(z/6e4);return`${Math.floor(ie/60)}h ${ie%60}m`}sendCoordinatesToAPI(e){this.api.post("address",e).subscribe(r=>{},r=>this.handleError(r))}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(D.gV),n.GI1(He.W),n.GI1(n.kD9))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-timeline"]],inputs:{companyId:"companyId"},decls:53,vars:18,consts:[[1,"card","py-3"],[1,"row"],[1,"col-lg-2"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","3"],["value","10"],["value","15"],["value","30"],["value","60"],[1,"col-8","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"p-3","user-chat-topbar","border-bottom","border-2"],[1,"row","align-items-center","flex-nowrap"],[1,"col-lg","col-3"],[1,"text-muted","mb-2","text-uppercase"],[1,"fs-md","mb-0"],["id","total-amount"],["class","col-lg col-3"],[1,"col-lg-4",3,"ngClass"],[1,"acitivity-timeline-2","list-unstyled","mb-0","mt-3","overflow"],[1,"col-lg-8",3,"ngClass"],["id","map",1,"match-parent","w-100","h-100"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"],["id","map",1,"match-parent"],[1,"fs-md","mb-0",3,"innerHTML"],["id","invoice-date",3,"innerHTML"],["id","invoice-due-date"],[1,"activity-item","pt-2",3,"ngClass","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-md","badge","bg-body-secondary","border","border-secondary","text-secondary"],["type","button","data-bs-toggle","tooltip","placement","top","tooltip","Battery Percentage",1,"btn","battery-status",3,"ngClass"],[1,"ri-battery-saver-line"],[1,"mb-0","mt-2"],[1,"mt-5","pt-5","text-center"],[1,"error-img","text-center","px-5","mt-5"],["type","button",1,"btn","btn-info","btn-load","mt-5"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","me-2"],["role","status",1,"spinner-grow","flex-shrink-0"],[1,"visually-hidden"],["class","activity-item pt-2",3,"ngClass"],["class","mt-5 pt-5 text-center"]],template:function(r,s){1&r&&(n.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),n.iHE("ngModelChange",function(f){return n.kNx(s.selectedDate,f)||(s.selectedDate=f),f}),n.qCj("bsValueChange",function(f){return s.onDateChange(f)}),n.C$Y(),n.I0R(5,"div",5)(6,"label",6),n.wR5(7,"i",7),n.C$Y()()()(),n.I0R(8,"div",2)(9,"select",8),n.iHE("ngModelChange",function(f){return n.kNx(s.selectedInterval,f)||(s.selectedInterval=f),f}),n.qCj("change",function(){return s.onIntervalChange()}),n.I0R(10,"option",9),n.OEk(11,"1 Minutes"),n.C$Y(),n.I0R(12,"option",10),n.OEk(13,"3 Minutes"),n.C$Y(),n.I0R(14,"option",11),n.OEk(15,"10 Minutes"),n.C$Y(),n.I0R(16,"option",12),n.OEk(17,"15 Minutes"),n.C$Y(),n.I0R(18,"option",13),n.OEk(19,"30 Minutes"),n.C$Y(),n.I0R(20,"option",14),n.OEk(21,"1 Hour"),n.C$Y()()(),n.I0R(22,"div",15)(23,"button",16),n.qCj("click",function(){return s.refreshTimeline()}),n.wR5(24,"i",17),n.C$Y()()()(),n.I0R(25,"div",18)(26,"div",19)(27,"div",20)(28,"p",21),n.OEk(29,"Date"),n.C$Y(),n.I0R(30,"h5",22)(31,"span",23),n.OEk(32),n.wVc(33,"date"),n.C$Y()()(),n.yuY(34,B,4,1,"div",24)(35,H,5,1,"div",24)(36,K,6,1,"div",24)(37,J,6,1,"div",24),n.C$Y()(),n.I0R(38,"div",1)(39,"div",25)(40,"ul",26),n.c53(41,de,9,7,"li",51,n.wJt,!1,xe,9,0,"div",52),n.C$Y()(),n.I0R(44,"div",27),n.wR5(45,"div",28),n.C$Y(),n.I0R(46,"div",29)(47,"div",30)(48,"div",31),n.wR5(49,"img",32),n.C$Y(),n.I0R(50,"h3",33),n.OEk(51,"Sorry! No Result Found"),n.C$Y()()()(),n.wR5(52,"div",34)),2&r&&(n.yG2(4),n.E7m("bsConfig",s.bsConfig),n.OKB("ngModel",s.selectedDate),n.yG2(5),n.OKB("ngModel",s.selectedInterval),n.yG2(14),n.E7m("ngClass",n.S45(16,Se,s.isRotating)),n.yG2(9),n.cNF(n.g7$(33,13,s.formattedDate,"dd/MMM/yyyy")),n.yG2(2),n.C0Y(34,null!=s.checkIndetails&&s.checkIndetails.latestCheckInTime?34:-1),n.yG2(),n.C0Y(35,null!=s.checkIndetails&&s.checkIndetails.latestCheckOutTime?35:-1),n.yG2(),n.C0Y(36,null!=s.checkIndetails&&s.checkIndetails.latestCheckInTime?36:-1),n.yG2(),n.C0Y(37,s.totaldistanceToshow?37:-1),n.yG2(2),n.E7m("ngClass",s.employeeTimeline&&s.employeeTimeline.length>0?"d-block":"d-none"),n.yG2(2),n.oho(s.intervalTimeCoordinates),n.yG2(3),n.E7m("ngClass",s.employeeTimeline&&0==s.employeeTimeline.length?"d-none":"d-block"),n.yG2(3),n.E7m("ngClass",s.employeeTimeline&&0===s.employeeTimeline.length?"d-block":"d-none"))},dependencies:[Re.QF,j.wd,j.GO,j.ot,j.GC,j.ue,j._G,Fs.uM,M.em,M.U5,Re.y],styles:[".activity-timeline-2[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.activity-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.selected-item[_ngcontent-%COMP%]{background-color:#d1ecf1}.battery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.battery-status[_ngcontent-%COMP%]   .ri-battery-saver-line[_ngcontent-%COMP%]{margin-right:5px}.battery-high[_ngcontent-%COMP%]{color:green}.battery-mid[_ngcontent-%COMP%]{color:orange}.battery-low[_ngcontent-%COMP%]{color:red}#noresult[_ngcontent-%COMP%]{text-align:center;padding:20px}#map[_ngcontent-%COMP%]{width:100%!important;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:500px}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return i})();function Te(i,t){1&i&&(n.I0R(0,"div",30),n.OEk(1,"Password is required."),n.C$Y())}function Ne(i,t){1&i&&(n.I0R(0,"div",30),n.OEk(1,"Confirm Password is required."),n.C$Y())}function U(i,t){1&i&&(n.I0R(0,"div",30),n.OEk(1," Password and Confirm Password does not match. "),n.C$Y())}function le(i,t){if(1&i&&(n.I0R(0,"div",18)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),n.OEk(5,"Password must contain:"),n.C$Y()(),n.I0R(6,"div")(7,"p",35),n.OEk(8," Minimum "),n.I0R(9,"b"),n.OEk(10,"8 characters"),n.C$Y()(),n.I0R(11,"p",36),n.OEk(12," At least "),n.I0R(13,"b"),n.OEk(14,"one lowercase"),n.C$Y(),n.OEk(15," letter (a-z) "),n.C$Y(),n.I0R(16,"p",37),n.OEk(17," At least "),n.I0R(18,"b"),n.OEk(19,"one uppercase"),n.C$Y(),n.OEk(20," letter (A-Z) "),n.C$Y(),n.I0R(21,"p",38),n.OEk(22," At least "),n.I0R(23,"b"),n.OEk(24,"one number"),n.C$Y(),n.OEk(25," (0-9) "),n.C$Y()()()()()),2&i){const e=n.GaO();n.yG2(7),n.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),n.yG2(4),n.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),n.yG2(5),n.eAK("valid",e.passwordValidations.upper),n.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),n.yG2(5),n.E7m("ngClass",e.passwordValidations.number?"valid":"invalid")}}function we(i,t){if(1&i&&(n.I0R(0,"tr")(1,"td"),n.wR5(2,"i",39),n.OEk(3),n.C$Y(),n.I0R(4,"td"),n.OEk(5),n.C$Y(),n.I0R(6,"td"),n.OEk(7),n.wVc(8,"date"),n.C$Y(),n.I0R(9,"td"),n.OEk(10),n.C$Y(),n.I0R(11,"td")(12,"a",40),n.OEk(13,"Logout "),n.wR5(14,"i",41),n.C$Y()()()),2&i){const e=t.$implicit;n.yG2(3),n.oRS(" ",e.device," "),n.yG2(2),n.cNF(e.ip_address),n.yG2(2),n.cNF(n.g7$(8,4,e.date,"dd MMM , yyyy")),n.yG2(3),n.cNF(e.address)}}const Le=(i,t)=>({"mdi-eye-off-outline":i,"mdi-eye-outline":t});let je=(()=>{class i{constructor(e,r,s,o){this.route=e,this.api=r,this.toastService=s,this.formBuilder=o,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.loginDetails=[],this.loginDetailsList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1}}ngOnInit(){this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&this.getemployeeLoginDetail(),this.initializeForm()}initializeForm(){this.formGroup=this.formBuilder.group({password:["",[j.AQ.required,j.AQ.pattern("(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}")]],confirmPassword:["",j.AQ.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){const r=e.get("password")?.value,s=e.get("confirmPassword")?.value;return r===s?null:{mismatch:!0}}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e)}get f(){return this.formGroup.controls}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeLoginDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLoginDetail?emp_id=${this.urlId}company_id=${this.companyId}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.loginDetails=r.data,this.loginDetails=r.data||[],this.loginDetailsList=r.data||[],this.updatePagination(),this.updateDisplayedItems()):this.loginDetails=[]},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.updateemployee(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("company_id",this.companyId),e.append("password",this.f.password.value),e}updateemployee(e){this.api.put("employees",this.urlId,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}filterdata(){this.loginDetails=this.term?this.loginDetailsList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.employee_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.loginDetailsList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.loginDetails.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.loginDetailsList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.loginDetails=this.loginDetailsList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(D.gV),n.GI1(He.W),n.GI1(Be.SA),n.GI1(j.im))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-password-change"]],inputs:{companyId:"companyId"},decls:60,vars:19,consts:[[3,"formGroup","ngSubmit"],[1,"row","g-2","align-items-center"],[1,"col-lg-4"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","onpaste","return false","placeholder","Enter new password","formControlName","password","required","",1,"form-control","password-input",3,"type","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["class","invalid-text"],["for","confirm-password-input",1,"form-label"],["onpaste","return false","id","confirm-password-input","placeholder","Confirm password","formControlName","confirmPassword","required","",1,"form-control","password-input",3,"type"],[1,"d-flex","align-items-center","justify-content-between"],["type","submit",1,"btn","btn-success"],["class","col-lg-12"],[1,"mt-4","mb-4","pb-3","border-bottom","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],[1,"ri-logout-box-r-line"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[1,"invalid-text"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"card-body"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"bi","bi-phone","align-baseline","me-1"],["href","javascript:void(0);",1,"icon-link","icon-link-hover"],[1,"bi","bi-box-arrow-right"]],template:function(r,s){1&r&&(n.I0R(0,"form",0),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),n.OEk(5,"New Password*"),n.C$Y(),n.I0R(6,"div",5)(7,"input",6),n.qCj("input",function(){return s.checkPasswordPattern()}),n.C$Y(),n.I0R(8,"button",7),n.qCj("click",function(){return s.toggleFieldTextType1()}),n.wR5(9,"i",8),n.C$Y()(),n.yuY(10,Te,2,0,"div",9),n.C$Y()(),n.I0R(11,"div",2)(12,"div",3)(13,"label",10),n.OEk(14,"Confirm Password*"),n.C$Y(),n.I0R(15,"div",5),n.wR5(16,"input",11),n.I0R(17,"button",7),n.qCj("click",function(){return s.toggleFieldTextType2()}),n.wR5(18,"i",8),n.C$Y()(),n.yuY(19,Ne,2,0,"div",9)(20,U,2,0,"div",9),n.C$Y()(),n.I0R(21,"div",12)(22,"div")(23,"button",13),n.OEk(24,"Change Password"),n.C$Y()()(),n.yuY(25,le,26,6,"div",14),n.C$Y()(),n.I0R(26,"div",15)(27,"h5",16),n.OEk(28,"Login History"),n.C$Y()(),n.I0R(29,"div",17)(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead",21)(34,"tr")(35,"th",22),n.OEk(36,"Mobile"),n.C$Y(),n.I0R(37,"th",22),n.OEk(38,"IP Address"),n.C$Y(),n.I0R(39,"th",22),n.OEk(40,"Date"),n.C$Y(),n.I0R(41,"th",22),n.OEk(42,"Address"),n.C$Y(),n.I0R(43,"th",22),n.wR5(44,"i",23),n.C$Y()()(),n.I0R(45,"tbody"),n.c53(46,we,15,7,"tr",null,n.wJt),n.C$Y()()(),n.I0R(48,"div",24)(49,"div",25)(50,"div",26),n.OEk(51," Showing "),n.I0R(52,"span",27),n.OEk(53),n.C$Y(),n.OEk(54," of "),n.I0R(55,"span",27),n.OEk(56),n.C$Y(),n.OEk(57," Results "),n.C$Y()(),n.I0R(58,"div",28)(59,"pagination",29),n.qCj("pageChanged",function(f){return s.pageChanged(f)}),n.C$Y()()()()()),2&r&&(n.E7m("formGroup",s.formGroup),n.yG2(7),n.E7m("type",s.fieldTextType1?"text":"password"),n.yG2(2),n.E7m("ngClass",n.IBC(13,Le,!s.fieldTextType1,s.fieldTextType1)),n.yG2(),n.C0Y(10,s.f.password&&s.f.password.hasError("required")&&s.f.password.touched?10:-1),n.yG2(6),n.E7m("type",s.fieldTextType2?"text":"password"),n.yG2(2),n.E7m("ngClass",n.IBC(16,Le,!s.fieldTextType2,s.fieldTextType2)),n.yG2(),n.C0Y(19,s.f.confirmPassword&&s.f.confirmPassword.hasError("required")&&s.f.confirmPassword.touched?19:-1),n.yG2(),n.C0Y(20,s.formGroup.hasError("mismatch")&&s.f.confirmPassword.value&&s.f.password.value?20:-1),n.yG2(5),n.C0Y(25,s.f.password&&s.f.password.hasError("pattern")?25:-1),n.yG2(21),n.oho(s.loginDetails),n.yG2(7),n.cNF(null==s.loginDetails?null:s.loginDetails.length),n.yG2(3),n.cNF(null==s.loginDetailsList?null:s.loginDetailsList.length),n.yG2(3),n.E7m("totalItems",null==s.loginDetailsList?null:s.loginDetailsList.length)("itemsPerPage",s.itemsPerPage))},dependencies:[Re.QF,j.sz,j.ot,j.ue,j.u,j.eJ,j.uW,j.Wo,it.im,Re.y],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}']})}return i})();var lt=Qt(1528);const jt=i=>({rotate:i});let qt=(()=>{class i{constructor(e,r){this.api=e,this.route=r,this.urlId=null,this.selectedDate=new Date,this.spinnerStatus=!1,this.isRotatinglive=!1,this.refreshInterval=3e4}ngOnDestroy(){this.livemap&&this.livemap.remove(),this.liveLocationTimeout&&clearTimeout(this.liveLocationTimeout)}ngOnInit(){this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.companyId&&this.scheduleNextUpdate(),this.initializeMap()}refreshTimeline(){this.isRotatinglive=!0,this.getLiveLocation(),setTimeout(()=>{this.isRotatinglive=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getLiveLocation(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLiveLocation?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.liveCoordinates=r.data,this.addMarkerToMap(this.liveCoordinates)):this.liveCoordinates=[],this.scheduleNextUpdate()},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data"),this.scheduleNextUpdate()})}scheduleNextUpdate(){this.liveLocationTimeout=setTimeout(()=>{this.getLiveLocation()},this.refreshInterval)}handleError(e){this.toggleSpinner(!1),console.error(e)}initializeMap(){y.accessToken="pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",this.livemap=new y.Map({container:"mapId",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),window.addEventListener("resize",()=>{this.livemap.resize()}),this.livemap.on("load",e=>{this.livemap.resize()}),this.livemap.addControl(new y.NavigationControl)}addMarkerToMap(e){var r=this;return(0,lt.c)(function*(){if(!e)return;const s=[e.longitude,e.latitude];try{const o=yield r.geocodeCoordinates(e.longitude,e.latitude),f=new y.Popup({offset:25}).setText(`Address: ${o}\nMotion: ${e.motion}`),g=document.createElement("div");g.className="custom-marker",g.style.backgroundImage=`url(${r.emp_image})`,g.style.width="42px",g.style.height="42px",g.style.backgroundSize="100%",g.style.borderRadius="50%",new y.Marker(g).setLngLat(s).setPopup(f).addTo(r.livemap).togglePopup(),r.livemap.flyTo({center:s,zoom:14})}catch(o){console.error("Error adding marker to map:",o)}})()}geocodeCoordinates(e,r){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${r}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(o=>o.json()).then(o=>o.features[0].place_name).catch(o=>(console.error("Error fetching address:",o),"Unknown location"))}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(D.gV))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-live-location"]],inputs:{companyId:"companyId",emp_image:"emp_image"},decls:13,vars:5,consts:[[1,"card"],[1,"row"],[1,"col-12","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"col-lg-12",3,"ngClass"],["id","mapId"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"]],template:function(r,s){1&r&&(n.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),n.qCj("click",function(){return s.refreshTimeline()}),n.wR5(4,"i",4),n.C$Y()(),n.I0R(5,"div",5),n.wR5(6,"div",6),n.C$Y(),n.I0R(7,"div",7)(8,"div",8)(9,"div",9),n.wR5(10,"img",10),n.C$Y(),n.I0R(11,"h3",11),n.OEk(12,"Sorry! No Result Found"),n.C$Y()()()()()),2&r&&(n.yG2(3),n.E7m("ngClass",n.S45(3,jt,s.isRotatinglive)),n.yG2(2),n.E7m("ngClass",s.liveCoordinates&&0==s.liveCoordinates.length?"d-none":"d-block"),n.yG2(3),n.E7m("ngClass",s.liveCoordinates&&0===s.liveCoordinates.length?"d-block":"d-none"))},dependencies:[Re.QF],styles:["[_nghost-%COMP%]     #mapId{width:100%!important;height:500px!important}.match-parent[_ngcontent-%COMP%]{height:100%}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return i})();function Di(i,t){if(1&i&&n.wR5(0,"img",45),2&i){const e=n.GaO();n._6D("src",null==e.employeeDetail?null:e.employeeDetail.image,n.K6U)}}function Qi(i,t){1&i&&n.wR5(0,"img",46)}function cn(i,t){if(1&i&&(n.I0R(0,"a",47)(1,"span",48),n.wR5(2,"i",49),n.C$Y()()),2&i){const e=n.GaO();n.CI5("href","tel:",null==e.employeeDetail?null:e.employeeDetail.mobile,"",n.K6U)}}function Qn(i,t){if(1&i&&(n.I0R(0,"a",47)(1,"span",50),n.wR5(2,"i",51),n.C$Y()()),2&i){const e=n.GaO();n.CI5("href","mailto:",null==e.employeeDetail?null:e.employeeDetail.email,"",n.K6U)}}function gr(i,t){if(1&i&&n.wR5(0,"div",52),2&i){const e=n.GaO();n.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckInTime),n.E3n)}}function Zr(i,t){1&i&&(n.I0R(0,"div",53),n.OEk(1,"Not Checked In Yet"),n.C$Y())}function hs(i,t){if(1&i&&n.wR5(0,"div",52),2&i){const e=n.GaO();n.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckOutTime),n.E3n)}}function vs(i,t){1&i&&(n.I0R(0,"div",53),n.OEk(1,"Not Checked Out Yet"),n.C$Y())}function _s(i,t){if(1&i&&(n.I0R(0,"div",54),n.OEk(1),n.C$Y()),2&i){const e=n.GaO();n.yG2(),n.oRS(" ",null==e.checkIndetails?null:e.checkIndetails.totalDuration," ")}}function Js(i,t){1&i&&n.OEk(0,"-")}function oa(i,t){if(1&i&&n.wR5(0,"app-password-change",41),2&i){const e=n.GaO();n.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function Ea(i,t){if(1&i&&n.wR5(0,"app-timeline",41),2&i){const e=n.GaO();n.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function Ws(i,t){if(1&i&&n.wR5(0,"app-live-location",44),2&i){const e=n.GaO();n.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)("emp_image",null==e.employeeDetail?null:e.employeeDetail.image)}}let ls=(()=>{class i{constructor(e,r,s){this.formBuilder=e,this.route=r,this.api=s,this.formGroups=[],this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.selectedDate=new Date,this.checkIndetails={},this.route.queryParams.subscribe(o=>{this.currentTab=o.tab||"personalDetails"})}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Profile Settings",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.getemployeeData()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0],this.getCheckInDetail()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.employeeDetail.company_id}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),e&&e.status?(this.checkIndetails=e.data[0],console.log(this.checkIndetails)):this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}changeTab(e){this.currentTab=e}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}addForm(){const e=this.formBuilder.group(this.educationForm.value);this.formGroups.push(e)}deleteForm(e){this.formGroups.splice(e,1)}calculateTimeDifference(e,r){const[s,o,f]=e.split(":").map(Number),[g,A,P]=r.split(":").map(Number),z=new Date;z.setHours(s,o,f);const ie=new Date;ie.setHours(g,A,P);const se=ie.getTime()-z.getTime();return Math.max(0,Math.floor(se/6e4))}calculateTotalTimeForAll(){if(!this.checkIndetails||0===this.checkIndetails.length)return"No check-in/check-out data available";let e=0;for(const o of this.checkIndetails)o.check_in_time&&o.check_out_time&&(e+=this.calculateTimeDifference(o.check_in_time,o.check_out_time));return`${Math.floor(e/60)}h ${e%60}m`}calculateTotalTime(e,r){const[s,o]=e.split(":").map(Number),[f,g]=r.split(":").map(Number),A=new Date;A.setHours(s,o,0);const P=new Date;P.setHours(f,g,0);const z=P.getTime()-A.getTime(),ie=Math.floor(z/6e4);return`${Math.floor(ie/60)}h ${ie%60}m`}formatTime(e){if(!e)return"Invalid time";const[r,s,o]=e.split(":");return`${+r%12||12}:${s} ${+r>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(j.im),n.GI1(D.gV),n.GI1(He.W))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-employee-detail"]],decls:162,vars:43,consts:[[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["alt","","id","user-img","class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"d-flex","justify-content-center","gap-2","mt-2"],["class","avatar-xs d-block",3,"href"],[1,"card","border-top"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"list-unstyled","vstack","gap-2","mb-0"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"ri-login-box-line","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted",3,"innerHTML"],[1,"ri-logout-box-line","align-middle","me-1","text-primary-emphasis"],[1,"ph","ph-timer","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","false","tabindex","-1",1,"nav-link",3,"click"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-secondary",3,"routerLink"],[1,"bi","bi-pencil-square","align-baseline","me-1"],[1,"card"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-body","p-4"],[1,""],[1,"table-responsive"],[1,"table","table-sm","table-borderless","align-middle","description-table","mb-0"],["id","changePassword","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId"],["id","timeline","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","liveLocation","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId","emp_image"],["alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"avatar-xs","d-block",3,"href"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-phone-line"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-mail-line"],[1,"flex-shrink-0","text-muted",3,"innerHTML"],[1,"flex-shrink-0","text-danger"],[1,"flex-shrink-0","text-muted"]],template:function(r,s){1&r&&(n.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),n.wR5(4,"img",3)(5,"div"),n.C$Y(),n.I0R(6,"div",4)(7,"div",5)(8,"div",6),n.yuY(9,Di,1,1,"img",7)(10,Qi,1,0),n.C$Y(),n.I0R(11,"div",8)(12,"h5"),n.OEk(13),n.C$Y(),n.I0R(14,"p",9),n.OEk(15),n.C$Y()(),n.I0R(16,"div",10),n.yuY(17,cn,3,1,"a",11)(18,Qn,3,1,"a",11),n.C$Y()()(),n.I0R(19,"div",12)(20,"div",13)(21,"h6",14),n.OEk(22,"Today Attendance"),n.C$Y()(),n.I0R(23,"div",15)(24,"ul",16)(25,"li")(26,"div",17)(27,"div",18),n.wR5(28,"i",19),n.OEk(29," Checkin Time "),n.C$Y(),n.yuY(30,gr,1,1,"div",20)(31,Zr,2,0),n.C$Y()(),n.I0R(32,"li")(33,"div",17)(34,"div",18),n.wR5(35,"i",21),n.OEk(36," Checkout Time "),n.C$Y(),n.yuY(37,hs,1,1,"div",20)(38,vs,2,0),n.C$Y()(),n.I0R(39,"li")(40,"div",17)(41,"div",18),n.wR5(42,"i",22),n.OEk(43," Total Time "),n.C$Y(),n.yuY(44,_s,2,1,"div",23)(45,Js,1,0),n.C$Y()()()()()()(),n.I0R(46,"div",24)(47,"div",25)(48,"ul",26)(49,"li",27)(50,"a",28),n.qCj("click",function(){return s.changeTab("timeline")}),n.OEk(51," Timeline "),n.C$Y()(),n.I0R(52,"li",27)(53,"a",29),n.qCj("click",function(){return s.changeTab("personalDetails")}),n.OEk(54," Personal Details "),n.C$Y()(),n.I0R(55,"li",27)(56,"a",28),n.qCj("click",function(){return s.changeTab("changePassword")}),n.OEk(57," Changes Password "),n.C$Y()(),n.I0R(58,"li",27)(59,"a",28),n.qCj("click",function(){return s.changeTab("liveLocation")}),n.OEk(60," Live Location "),n.C$Y()()(),n.I0R(61,"div",30)(62,"a",31),n.wR5(63,"i",32),n.OEk(64," Edit Profile"),n.C$Y()()(),n.I0R(65,"div",33)(66,"div",34)(67,"div",35)(68,"div",33)(69,"div",13)(70,"h6",14),n.OEk(71,"Personal Details"),n.C$Y()(),n.I0R(72,"div",36)(73,"div",37)(74,"div",38)(75,"table",39)(76,"tbody")(77,"tr")(78,"th"),n.OEk(79,"Name"),n.C$Y(),n.I0R(80,"td"),n.OEk(81),n.C$Y()(),n.I0R(82,"tr")(83,"th"),n.OEk(84,"Gender"),n.C$Y(),n.I0R(85,"td"),n.OEk(86),n.C$Y()(),n.I0R(87,"tr")(88,"th"),n.OEk(89,"Department"),n.C$Y(),n.I0R(90,"td"),n.OEk(91),n.C$Y()(),n.I0R(92,"tr")(93,"th"),n.OEk(94,"Designation"),n.C$Y(),n.I0R(95,"td"),n.OEk(96),n.C$Y()(),n.I0R(97,"tr")(98,"th"),n.OEk(99,"Employee id"),n.C$Y(),n.I0R(100,"td"),n.OEk(101),n.C$Y()(),n.I0R(102,"tr")(103,"th"),n.OEk(104,"Email"),n.C$Y(),n.I0R(105,"td"),n.OEk(106),n.C$Y()(),n.I0R(107,"tr")(108,"th"),n.OEk(109,"Mobile"),n.C$Y(),n.I0R(110,"td"),n.OEk(111),n.C$Y()(),n.I0R(112,"tr")(113,"th"),n.OEk(114,"Date of Birth"),n.C$Y(),n.I0R(115,"td"),n.OEk(116),n.wVc(117,"date"),n.C$Y()(),n.I0R(118,"tr")(119,"th"),n.OEk(120,"Joining date"),n.C$Y(),n.I0R(121,"td"),n.OEk(122),n.wVc(123,"date"),n.C$Y()(),n.I0R(124,"tr")(125,"th"),n.OEk(126,"Address"),n.C$Y(),n.I0R(127,"td"),n.OEk(128),n.C$Y()(),n.I0R(129,"tr")(130,"th"),n.OEk(131,"City"),n.C$Y(),n.I0R(132,"td"),n.OEk(133),n.C$Y()(),n.I0R(134,"tr")(135,"th"),n.OEk(136,"State"),n.C$Y(),n.I0R(137,"td"),n.OEk(138),n.C$Y()(),n.I0R(139,"tr")(140,"th"),n.OEk(141,"Zip code"),n.C$Y(),n.I0R(142,"td"),n.OEk(143),n.C$Y()()()()()()()()(),n.I0R(144,"div",40)(145,"div",13)(146,"h6",14),n.OEk(147,"Changes Password"),n.C$Y()(),n.I0R(148,"div",15),n.yuY(149,oa,1,1,"app-password-change",41),n.C$Y()(),n.I0R(150,"div",42)(151,"div",13)(152,"h6",14),n.OEk(153,"Timeline"),n.C$Y()(),n.I0R(154,"div",15),n.yuY(155,Ea,1,1,"app-timeline",41),n.C$Y()(),n.I0R(156,"div",43)(157,"div",13)(158,"h6",14),n.OEk(159,"Live Location"),n.C$Y()(),n.I0R(160,"div",15),n.yuY(161,Ws,1,2,"app-live-location",44),n.C$Y()()()()()()),2&r&&(n.yG2(9),n.C0Y(9,null!=s.employeeDetail&&s.employeeDetail.image?9:10),n.yG2(4),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.name," "),n.yG2(2),n.cNF(null==s.employeeDetail?null:s.employeeDetail.designation_name),n.yG2(2),n.C0Y(17,null!=s.employeeDetail&&s.employeeDetail.mobile?17:-1),n.yG2(),n.C0Y(18,null!=s.employeeDetail&&s.employeeDetail.email?18:-1),n.yG2(12),n.C0Y(30,null!=s.checkIndetails&&s.checkIndetails.latestCheckInTime?30:31),n.yG2(7),n.C0Y(37,null!=s.checkIndetails&&s.checkIndetails.latestCheckOutTime?37:38),n.yG2(7),n.C0Y(44,null!=s.checkIndetails&&s.checkIndetails.latestCheckInTime&&null!=s.checkIndetails&&s.checkIndetails.latestCheckOutTime?44:45),n.yG2(6),n.eAK("active","timeline"===s.currentTab),n.yG2(3),n.eAK("active","personalDetails"===s.currentTab),n.yG2(3),n.eAK("active","changePassword"===s.currentTab),n.yG2(3),n.eAK("active","liveLocation"===s.currentTab),n.yG2(3),n.CI5("routerLink","/edit-employee/",s.urlId,""),n.yG2(5),n.E7m("hidden","personalDetails"!==s.currentTab),n.yG2(14),n.cNF(null==s.employeeDetail?null:s.employeeDetail.name),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.gender),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.department_name),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.designation_name),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.employee_id),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.email),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.mobile),n.yG2(5),n.oRS(" ",n.g7$(117,37,null==s.employeeDetail?null:s.employeeDetail.dob,"dd/MMM/yyyy")," "),n.yG2(6),n.oRS(" ",n.g7$(123,40,null==s.employeeDetail?null:s.employeeDetail.joining_date,"dd/MMM/yyyy")," "),n.yG2(6),n.cNF(null==s.employeeDetail?null:s.employeeDetail.address),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.city),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.state),n.yG2(5),n.cNF(null==s.employeeDetail?null:s.employeeDetail.zip_code),n.yG2(),n.E7m("hidden","changePassword"!==s.currentTab),n.yG2(5),n.C0Y(149,s.employeeDetail?149:-1),n.yG2(),n.E7m("hidden","timeline"!==s.currentTab),n.yG2(5),n.C0Y(155,s.employeeDetail?155:-1),n.yG2(),n.E7m("hidden","liveLocation"!==s.currentTab),n.yG2(5),n.C0Y(161,s.employeeDetail?161:-1))},dependencies:[D.ER,Pe,je,qt,Re.y]})}return i})();var ka=function(){return ka=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++)for(var s in t=arguments[e])Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i},ka.apply(this,arguments)},ss=function(){function i(t,e,r){var s=this;this.endVal=e,this.options=r,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(o){s.startTime||(s.startTime=o);var f=o-s.startTime;s.remaining=s.duration-f,s.frameVal=s.useEasing?s.countDown?s.startVal-s.easingFn(f,0,s.startVal-s.endVal,s.duration):s.easingFn(f,s.startVal,s.endVal-s.startVal,s.duration):s.startVal+f/s.duration*(s.endVal-s.startVal),s.frameVal=(s.countDown?s.frameVal<s.endVal:s.frameVal>s.endVal)?s.endVal:s.frameVal,s.frameVal=Number(s.frameVal.toFixed(s.options.decimalPlaces)),s.printValue(s.frameVal),f<s.duration?s.rAF=requestAnimationFrame(s.count):null!==s.finalEndVal?s.update(s.finalEndVal):s.options.onCompleteCallback&&s.options.onCompleteCallback()},this.formatNumber=function(o){var f,g,A,P,z=o<0?"-":"";f=Math.abs(o).toFixed(s.options.decimalPlaces);var ie=(f+="").split(".");if(g=ie[0],A=ie.length>1?s.options.decimal+ie[1]:"",s.options.useGrouping){P="";for(var se=3,oe=0,_e=0,he=g.length;_e<he;++_e)s.options.useIndianSeparators&&4===_e&&(se=2,oe=1),0!==_e&&oe%se==0&&(P=s.options.separator+P),oe++,P=g[he-_e-1]+P;g=P}return s.options.numerals&&s.options.numerals.length&&(g=g.replace(/[0-9]/g,function(Ae){return s.options.numerals[+Ae]}),A=A.replace(/[0-9]/g,function(Ae){return s.options.numerals[+Ae]})),z+s.options.prefix+g+A+s.options.suffix},this.easeOutExpo=function(o,f,g,A){return g*(1-Math.pow(2,-10*o/A))*1024/1023+f},this.options=ka(ka({},this.defaults),r),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(e),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof t?document.getElementById(t):t,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,t):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return s.handleScroll(s)}),window.onscroll=function(){window.onScrollFns.forEach(function(o){return o()})},this.handleScroll(this)))}return i.prototype.handleScroll=function(t){if(t&&window&&!t.once){var e=window.innerHeight+window.scrollY,r=t.el.getBoundingClientRect(),s=r.top+window.pageYOffset,o=r.top+r.height+window.pageYOffset;o<e&&o>window.scrollY&&t.paused?(t.paused=!1,setTimeout(function(){return t.start()},t.options.scrollSpyDelay),t.options.scrollSpyOnce&&(t.once=!0)):(window.scrollY>o||s>e)&&!t.paused&&t.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var t=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>t,Math.abs(t-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=t,this.endVal=t+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=t,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},i.prototype.start=function(t){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),t&&(this.options.onCompleteCallback=t),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(t){var e;if(this.el){var r=this.formattingFn(t);null!==(e=this.options.plugin)&&void 0!==e&&e.render?this.options.plugin.render(this.el,r):"INPUT"===this.el.tagName?this.el.value=r:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=r:this.el.innerHTML=r}},i.prototype.ensureNumber=function(t){return"number"==typeof t&&!isNaN(t)},i.prototype.validateValue=function(t){var e=Number(t);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: ".concat(t),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i}();let Ta=(()=>{class i{constructor(e,r,s){this.el=e,this.zone=r,this.platformId=s,this.options={},this.reanimateOnClick=!0,this.complete=new n._w7}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(e){if(!(0,Re.c0)(this.platformId))return;const{options:r,endVal:s}=e;void 0!==s?.currentValue?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==r?.currentValue&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new ss(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return i.\u0275fac=function(e){return new(e||i)(n.GI1(n.GMv),n.GI1(n.WW2),n.GI1(n.AHE))},i.\u0275dir=n.Sc5({type:i,selectors:[["","countUp",""]],hostBindings:function(e,r){1&e&&n.qCj("click",function(){return r.onClick()})},inputs:{endVal:[n.Wk5.None,"countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[n.SYr]}),i})(),dh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.a4G({type:i}),i.\u0275inj=n.s3X({imports:[[]]}),i})();var Bc=Qt(4884);function za(i,t){if(1&i&&(n.I0R(0,"div",125),n.wR5(1,"img",126),n.C$Y()),2&i){const e=n.GaO().$implicit;n.yG2(),n._6D("src",e.image,n.K6U)}}function fc(i,t){1&i&&(n.I0R(0,"div",125),n.wR5(1,"img",127),n.C$Y())}function rd(i,t){if(1&i&&n.OEk(0),2&i){const e=n.GaO(2).$implicit;n.oRS(" by ",e.timeDifference," ")}}function Xl(i,t){if(1&i&&(n.I0R(0,"span",119),n.OEk(1),n.yuY(2,rd,1,1),n.C$Y()),2&i){const e=n.GaO().$implicit;n.E7m("ngClass","Early"==e.checkin_status?"bg-warning":"Late"==e.checkin_status?"bg-danger":"bg-success"),n.yG2(),n.oRS("",e.checkin_status," "),n.yG2(),n.C0Y(2,"On-Time"!=e.checkin_status&&"Leave"!=e.checkin_status?2:-1)}}function Sa(i,t){1&i&&n.OEk(0," -")}const vl=()=>({tab:"timeline"});function Va(i,t){if(1&i&&(n.I0R(0,"ul",128)(1,"li")(2,"a",129),n.wR5(3,"i",130),n.OEk(4," View Timeline"),n.C$Y()(),n.I0R(5,"li")(6,"a",131),n.wR5(7,"i",132),n.OEk(8,"Attendance Detail"),n.C$Y()()()),2&i){const e=n.GaO().$implicit,r=n.GaO();n.yG2(2),n.CI5("routerLink","/employee-detail/",e.id,""),n.E7m("queryParams",n.q4q(4,vl)),n.yG2(4),n.u6R("routerLink","/attendance-calender/",e.id,"/",r.company_id,"")}}function ba(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr",108),n.wR5(1,"td"),n.I0R(2,"td",109)(3,"a",110),n.OEk(4,"#TB01"),n.C$Y()(),n.I0R(5,"td",111)(6,"div",112),n.yuY(7,za,2,1,"div",113)(8,fc,2,0),n.I0R(9,"div")(10,"h6",14)(11,"a",114),n.OEk(12),n.C$Y()(),n.I0R(13,"p",13),n.OEk(14),n.C$Y()()()(),n.I0R(15,"td",115),n.OEk(16),n.C$Y(),n.I0R(17,"td",116),n.OEk(18),n.C$Y(),n.I0R(19,"td",116),n.OEk(20),n.wR5(21,"br"),n.I0R(22,"a",117),n.qCj("click",function(){const o=n.usT(e).$implicit,f=n.GaO();return n.Gew(146).show(),n.CGJ(f.updateCheckInDetal(o.checkIns,o.totalDuration))}),n.OEk(23,"Check Detail "),n.C$Y()(),n.I0R(24,"td",118)(25,"span",119),n.OEk(26),n.C$Y()(),n.I0R(27,"td",118),n.yuY(28,Xl,3,3,"span",120)(29,Sa,1,0),n.C$Y(),n.I0R(30,"td")(31,"div",121)(32,"button",122),n.wR5(33,"i",123),n.C$Y(),n.yuY(34,Va,9,5,"ul",124),n.C$Y()()()}if(2&i){const e=t.$implicit,r=n.GaO();n.CI5("id","p_",e._id,""),n.yG2(7),n.C0Y(7,e.image?7:8),n.yG2(5),n.cNF(e.name),n.yG2(2),n.cNF(e.designation),n.yG2(2),n.oRS(" ",r.formatTime(e.latestCheckInTime)," "),n.yG2(2),n.oRS(" ",r.formatTime(e.latestCheckOutTime)," "),n.yG2(2),n.oRS(" ",e.totalDuration,""),n.yG2(5),n.E7m("ngClass","Present"==e.attendance_status?"bg-success":"Absent"==e.attendance_status?"bg-danger":"bg-warning"),n.yG2(),n.cNF(e.attendance_status),n.yG2(2),n.C0Y(28,"Absent"!=e.checkin_status&&"Leave"!=e.checkin_status?28:29)}}function Nc(i,t){1&i&&(n.I0R(0,"div",53)(1,"div",133)(2,"span",134),n.OEk(3,"Loading..."),n.C$Y()()())}function Rh(i,t){if(1&i&&(n.I0R(0,"tr")(1,"th",84),n.OEk(2),n.C$Y(),n.I0R(3,"td"),n.OEk(4),n.C$Y(),n.I0R(5,"td"),n.OEk(6),n.C$Y(),n.I0R(7,"td",85),n.OEk(8),n.C$Y()()),2&i){const e=t.$implicit,r=t.$index,s=n.GaO();n.yG2(2),n.cNF(r+1),n.yG2(2),n.cNF(s.formatTime(e.check_in_time)),n.yG2(2),n.cNF(s.formatTime(e.check_out_time)),n.yG2(2),n.cNF(e.duration)}}const hf=()=>({standalone:!0});let Ff=(()=>{class i{constructor(e){this.api=e,this.dateChangeSubject=new w.E,this.spinnerStatus=!1,this.selectedDate=new Date,this.attendanceData=[],this.attendanceDataList=[],this.checkInDetails=[],this.selectValue=["Alaska","Hawaii","California","Nevada","Oregon","Washington","Arizona","Colorado","Idaho","Montana","Nebraska","New Mexico","North Dakota","Utah","Wyoming","Alabama","Arkansas","Illinois","Iowa"],this.departments=[],this.selectedDepartments=[],this.selectedDesignations=[],this.designations=[],this.selectedStatus="",this.direction="asc",this.bsConfig={maxDate:new Date,showWeekNumbers:!1,dateInputFormat:"DD/MM/YYYY"}}ngOnInit(){this.breadCrumbItems=[{label:"Attendance"},{label:"Employee",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate));const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.dateChangeSubject.pipe((0,C.o)(300)).subscribe(r=>{this.handleDateChange(r)}),this.company_id&&(this.getAttendance(),this.getDepartment(),this.getDesignation())}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getAttendance()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid(`getAttendence?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.attendanceData=r.data||[],this.attendanceDataList=r.data||[],this.attendanceCount=r.attendanceCount||[],this.attendanceData=(0,Ts.cloneDeep)(this.attendanceDataList.slice(0,10))):(this.attendanceData=[],this.attendanceDataList=[],this.attendanceCount=[],this.toggleSpinner(!1))},r=>{this.handleError(r.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}updateCheckInDetal(e,r){this.totalDuration=r,this.checkInDetails=e}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.attendanceData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.attendanceData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.attendanceData=this.attendanceDataList.slice(r,this.endItem)}filterdata(){let e=this.attendanceDataList;const r=this.selectedDesignations?this.selectedDesignations.map(o=>o.toLowerCase()):[];console.log(r);const s=this.selectedDepartments?this.selectedDepartments.map(o=>o.toLowerCase()):[];this.term&&(e=e.filter(o=>o.name.toLowerCase().includes(this.term.toLowerCase())||o.mobile.toLowerCase().includes(this.term.toLowerCase())||o.email.toLowerCase().includes(this.term.toLowerCase())||o.employee_id.toLowerCase().includes(this.term.toLowerCase()))),s.length>0&&(e=e.filter(o=>s.includes(o.department.toLowerCase()))),r.length>0&&(e=e.filter(o=>r.includes(o.designation.toLowerCase()))),this.selectedStatus&&(e=e.filter(o=>o.checkin_status===this.selectedStatus)),this.attendanceData=e,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.attendanceData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}formatTime(e){if(!e)return"-";const[r,s,o]=e.split(":");return`${+r%12||12}:${s}:${o} ${+r>=12?"PM":"AM"} `}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-attendance-list"]],decls:220,vars:34,consts:[["title","Employee Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-xl-10"],[1,"card"],[1,"card-body"],[1,"row","g-4"],[1,"col-lg-2","col-sm-6","border-end-sm","ng-star-inserted"],[1,"d-flex","align-items-center","gap-2","mb-4"],[1,"avatar-xs","flex-shrink-0"],[1,"avatar-title","bg-body-secondary","border","border-primary-subtle","rounded-circle","text-primary"],[1,"ri-user-line"],[1,"flex-grow-1"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"counter-value",3,"countUp"],[1,"avatar-title","bg-body-secondary","border","border-success-subtle","rounded-circle","text-success"],[1,"ri-user-follow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-danger"],[1,"ri-user-unfollow-line"],[1,"avatar-title","bg-body-secondary","border","border-warning-subtle","rounded-circle","text-warning"],[1,"mdi","mdi-account-alert-outline"],[1,"avatar-title","bg-body-secondary","border","border-secondary-subtle","rounded-circle","text-secondary"],[1,"bi","bi-clock-history"],[1,"counter-value"],[1,"col-lg-12"],[1,"card-header","d-lg-flex","align-items-center"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name, mobile etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-auto"],[1,"hstack","flex-wrap","gap-2"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","exampleModalPopovers",1,"modal","fade"],["tooltipmodal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table-responsive","mt-4"],[1,"table","table-borderless","text-center","table-nowrap","align-middle","mb-0"],[1,"table-light"],["scope","col",2,"width","50px"],["scope","col"],["scope","col",1,"text-end"],["id","products-list"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"border-top","border-top-dashed","fs-base"],["scope","row"],[1,"text-end"],[1,"bi","bi-clock","align-baseline","me-1"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-light",3,"click"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],["action","#!"],[1,"mb-3"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],["value","Present"],["value","Absent"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100"],[1,"bi","bi-x-lg","align-baseline","me-1"],[1,"btn","btn-secondary","w-100"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],["class","avatar-sm bg-light rounded p-1 me-2"],[1,"text-reset","products"],[1,"price"],[1,"orders"],[1,"text-decoration-underline","ng-star-inserted",3,"click"],[1,"published"],[1,"badge",3,"ngClass"],["class","badge",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);",1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ri-folder-reduce-line","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div")(9,"div",8)(10,"div",9)(11,"div",10),n.wR5(12,"i",11),n.C$Y()(),n.I0R(13,"div",12)(14,"p",13),n.OEk(15,"Total Employee"),n.C$Y()()(),n.I0R(16,"h3",14)(17,"span",15),n.OEk(18),n.C$Y()()()(),n.I0R(19,"div",7)(20,"div")(21,"div",8)(22,"div",9)(23,"div",16),n.wR5(24,"i",17),n.C$Y()(),n.I0R(25,"div",12)(26,"p",13),n.OEk(27,"Present"),n.C$Y()()(),n.I0R(28,"h3",14)(29,"span",15),n.OEk(30),n.C$Y()()()(),n.I0R(31,"div",7)(32,"div")(33,"div",8)(34,"div",9)(35,"div",18),n.wR5(36,"i",19),n.C$Y()(),n.I0R(37,"div",12)(38,"p",13),n.OEk(39,"Absent"),n.C$Y()()(),n.I0R(40,"h3",14)(41,"span",15),n.OEk(42),n.C$Y()()()(),n.I0R(43,"div",7)(44,"div")(45,"div",8)(46,"div",9)(47,"div",20),n.wR5(48,"i",21),n.C$Y()(),n.I0R(49,"div",12)(50,"p",13),n.OEk(51,"Leave"),n.C$Y()()(),n.I0R(52,"h3",14)(53,"span",15),n.OEk(54),n.C$Y()()()(),n.I0R(55,"div",7)(56,"div")(57,"div",8)(58,"div",9)(59,"div",22),n.wR5(60,"i",23),n.C$Y()(),n.I0R(61,"div",12)(62,"p",13),n.OEk(63,"Total Duration"),n.C$Y()()(),n.I0R(64,"h3",14)(65,"span",24),n.OEk(66),n.C$Y()()()()()()()()(),n.I0R(67,"div",2)(68,"div",25)(69,"div",4)(70,"div",26)(71,"div",12)(72,"h5",27),n.OEk(73," Employees "),n.I0R(74,"span",28),n.OEk(75),n.C$Y()(),n.I0R(76,"p",29),n.OEk(77," Showing Result of Date: "),n.I0R(78,"span",30),n.OEk(79),n.wVc(80,"date"),n.C$Y()()(),n.I0R(81,"div",31)(82,"div",32)(83,"div",33)(84,"div",34)(85,"input",35),n.iHE("ngModelChange",function(g){return n.kNx(s.selectedDate,g)||(s.selectedDate=g),g}),n.qCj("bsValueChange",function(g){return s.onDateChange(g)}),n.C$Y(),n.I0R(86,"div",36)(87,"label",37),n.wR5(88,"i",38),n.C$Y()()()(),n.I0R(89,"div",39)(90,"input",40),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(91,"i",41),n.C$Y(),n.I0R(92,"div",42)(93,"div",43)(94,"div")(95,"button",44),n.qCj("click",function(){return s.openEnd()}),n.wR5(96,"i",45),n.OEk(97," Filter "),n.C$Y()()()()()()(),n.I0R(98,"div",5)(99,"div",46)(100,"table",47)(101,"thead",48)(102,"tr")(103,"th")(104,"div",49),n.wR5(105,"label",50),n.C$Y()(),n.I0R(106,"th",51),n.qCj("click",function(){return s.onSort("name")}),n.OEk(107," Name "),n.C$Y(),n.I0R(108,"th",51),n.qCj("click",function(){return s.onSort("check_in_time")}),n.OEk(109," Check-in Time "),n.C$Y(),n.I0R(110,"th",51),n.qCj("click",function(){return s.onSort("check_out_time")}),n.OEk(111," Check-out Time "),n.C$Y(),n.I0R(112,"th",51),n.qCj("click",function(){return s.onSort("totalDuration")}),n.OEk(113," Work Hours "),n.C$Y(),n.I0R(114,"th",51),n.qCj("click",function(){return s.onSort("attendance_status")}),n.OEk(115," Attendance Status "),n.C$Y(),n.I0R(116,"th",51),n.qCj("click",function(){return s.onSort("checkin_statusv2")}),n.OEk(117," Check-in Status "),n.C$Y(),n.I0R(118,"th"),n.OEk(119,"Action"),n.C$Y()()(),n.I0R(120,"tbody",52),n.c53(121,ba,35,10,"tr",108,n.wJt),n.C$Y(),n.yuY(123,Nc,4,0,"div",53),n.C$Y()(),n.I0R(124,"div",54)(125,"div",55)(126,"div",56)(127,"div",57),n.wR5(128,"i",58),n.C$Y()(),n.I0R(129,"h5",59),n.OEk(130,"Sorry! No Result Found"),n.C$Y(),n.I0R(131,"p",13),n.OEk(132),n.C$Y()()(),n.I0R(133,"div",60)(134,"div",61)(135,"div",62),n.OEk(136," Showing "),n.I0R(137,"span",63),n.OEk(138),n.C$Y(),n.OEk(139," of "),n.I0R(140,"span",63),n.OEk(141),n.C$Y(),n.OEk(142," Results "),n.C$Y()(),n.I0R(143,"div",64)(144,"pagination",65),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(145,"div",66,67)(147,"div",68)(148,"div",69)(149,"div",70)(150,"h5",71),n.OEk(151,"Check-in Detail"),n.C$Y(),n.I0R(152,"button",72),n.qCj("click",function(){n.usT(o);const g=n.Gew(146);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(153,"div",73)(154,"div",74)(155,"table",75)(156,"thead")(157,"tr",76)(158,"th",77),n.OEk(159,"#"),n.C$Y(),n.I0R(160,"th",78),n.OEk(161,"Check-In Time"),n.C$Y(),n.I0R(162,"th",78),n.OEk(163,"Check-Out Time"),n.C$Y(),n.I0R(164,"th",79),n.OEk(165,"Duration"),n.C$Y()()(),n.I0R(166,"tbody",80),n.c53(167,Rh,9,4,"tr",null,n.wJt),n.C$Y()()(),n.I0R(169,"div",81)(170,"table",82)(171,"tbody")(172,"tr",83)(173,"th",84),n.OEk(174,"Total Duration"),n.C$Y(),n.I0R(175,"th",85),n.wR5(176,"i",86),n.OEk(177),n.C$Y()()()()()(),n.I0R(178,"div",87)(179,"div",25)(180,"div",88)(181,"button",89),n.qCj("click",function(){n.usT(o);const g=n.Gew(146);return n.CGJ(g.hide())}),n.OEk(182," Close "),n.C$Y()()()()()()(),n.I0R(183,"div",90)(184,"div",91)(185,"h5",92),n.OEk(186,"Attendance Filters"),n.C$Y(),n.I0R(187,"button",72),n.qCj("click",function(){return s.closeoffcanvas()}),n.C$Y()(),n.I0R(188,"div",93)(189,"form",94)(190,"div",2)(191,"div",25)(192,"div",95)(193,"p",96),n.OEk(194," Attendance Status "),n.C$Y(),n.I0R(195,"select",97),n.iHE("ngModelChange",function(g){return n.kNx(s.selectedStatus,g)||(s.selectedStatus=g),g}),n.qCj("change",function(){return s.filterdata()}),n.I0R(196,"option",98),n.OEk(197,"All"),n.C$Y(),n.I0R(198,"option",99),n.OEk(199,"Present"),n.C$Y(),n.I0R(200,"option",100),n.OEk(201,"Absent"),n.C$Y()()()(),n.I0R(202,"div",25)(203,"div",95)(204,"p",96),n.OEk(205,"Department"),n.C$Y(),n.I0R(206,"ng-select",101),n.qCj("change",function(){return s.filterdata()}),n.iHE("ngModelChange",function(g){return n.kNx(s.selectedDepartments,g)||(s.selectedDepartments=g),g}),n.C$Y()()(),n.I0R(207,"div",25)(208,"div",95)(209,"p",96),n.OEk(210,"Designation"),n.C$Y(),n.I0R(211,"ng-select",102),n.qCj("change",function(){return s.filterdata()}),n.iHE("ngModelChange",function(g){return n.kNx(s.selectedDesignations,g)||(s.selectedDesignations=g),g}),n.C$Y()()()()()(),n.I0R(212,"div",103)(213,"button",104),n.wR5(214,"i",105),n.OEk(215," Reset "),n.C$Y(),n.I0R(216,"button",106),n.wR5(217,"i",45),n.OEk(218," Filters "),n.C$Y()()(),n.I0R(219,"div",107),n.qCj("click",function(){return s.closeoffcanvas()}),n.C$Y()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(17),n.E7m("countUp",null==s.attendanceDataList?null:s.attendanceDataList.length),n.yG2(),n.cNF(null==s.attendanceDataList?null:s.attendanceDataList.length),n.yG2(11),n.E7m("countUp",null==s.attendanceCount?null:s.attendanceCount.totalPresent),n.yG2(),n.cNF(null==s.attendanceCount?null:s.attendanceCount.totalPresent),n.yG2(11),n.E7m("countUp",null==s.attendanceCount?null:s.attendanceCount.totalAbsent),n.yG2(),n.cNF(null==s.attendanceCount?null:s.attendanceCount.totalAbsent),n.yG2(11),n.E7m("countUp",null==s.attendanceCount?null:s.attendanceCount.totalLeave),n.yG2(),n.cNF(null==s.attendanceCount?null:s.attendanceCount.totalLeave),n.yG2(12),n.cNF(null==s.attendanceCount?null:s.attendanceCount.totalDuration),n.yG2(9),n.cNF(null==s.attendanceData?null:s.attendanceData.length),n.yG2(4),n.oRS(" ",n.g7$(80,30,s.formattedDate,"EEEE, dd MMM , yyyy"),""),n.yG2(6),n.E7m("bsConfig",s.bsConfig),n.OKB("ngModel",s.selectedDate),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(31),n.oho(s.attendanceData),n.yG2(2),n.C0Y(123,s.spinnerStatus?123:-1),n.yG2(9),n.oRS(" We've searched ",null==s.attendanceDataList?null:s.attendanceDataList.length," Employee Data. We did not find any Employee for you search. "),n.yG2(6),n.cNF(null==s.attendanceData?null:s.attendanceData.length),n.yG2(3),n.cNF(null==s.attendanceDataList?null:s.attendanceDataList.length),n.yG2(3),n.E7m("totalItems",null==s.attendanceDataList?null:s.attendanceDataList.length)("itemsPerPage",10),n.yG2(23),n.oho(s.checkInDetails),n.yG2(10),n.oRS(" ",s.totalDuration," "),n.yG2(18),n.OKB("ngModel",s.selectedStatus),n.E7m("ngModelOptions",n.q4q(33,hf)),n.yG2(11),n.E7m("items",s.departments)("multiple",!0),n.OKB("ngModel",s.selectedDepartments),n.yG2(5),n.E7m("items",s.designations)("multiple",!0),n.OKB("ngModel",s.selectedDesignations))},dependencies:[Re.QF,$e.O,D.ER,Zn.uo,Zn.M3,Zn.mY,j.sz,j.wd,j.GO,j.ot,j.GC,j.ue,j.u,j._G,j.SC,it.im,Un.uK,Ta,Bc.UT,M.em,M.U5,Re.y]})}return i})();const Lh=["showModal"],Ys=["deleteRecordModal"];function xd(i,t){if(1&i){const e=n.KQA();n.I0R(0,"ul",96)(1,"li")(2,"a",97),n.wR5(3,"i",98),n.OEk(4," View"),n.C$Y()(),n.I0R(5,"li")(6,"a",99),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.editList(s))}),n.wR5(7,"i",100),n.OEk(8," Edit"),n.C$Y()(),n.I0R(9,"li")(10,"a",101),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.removeItem(s.id))}),n.wR5(11,"i",102),n.OEk(12," Remove"),n.C$Y()()()}}const Ko=(i,t)=>({"bg-info-subtle text-info":i,"bg-danger-subtle text-danger":t});function wa(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),n.iHE("ngModelChange",function(s){const f=n.usT(e).$implicit;return n.kNx(f.states,s)||(f.states=s),n.CGJ(s)}),n.qCj("change",function(s){n.usT(e);const o=n.GaO();return n.CGJ(o.onCheckboxChange(s))}),n.C$Y(),n.wR5(4,"label",82),n.C$Y()(),n.I0R(5,"td",83)(6,"a",84),n.OEk(7,"#TB01"),n.C$Y()(),n.I0R(8,"td",85),n.OEk(9),n.C$Y(),n.I0R(10,"td",86)(11,"div",87)(12,"input",88),n.qCj("change",function(s){const f=n.usT(e).$implicit,g=n.GaO();return n.CGJ(g.setStatus(f,s))}),n.C$Y(),n.I0R(13,"label",89)(14,"span",90),n.OEk(15),n.C$Y()()()(),n.I0R(16,"td",91),n.OEk(17),n.wVc(18,"date"),n.C$Y(),n.I0R(19,"td")(20,"div",92)(21,"button",93),n.wR5(22,"i",94),n.C$Y(),n.yuY(23,xd,13,0,"ul",95),n.C$Y()()()}if(2&i){const e=t.$implicit,r=t.$index;n.CI5("id","p_",e._id,""),n.yG2(3),n._6D("value",e._id),n.OKB("ngModel",e.states),n.yG2(6),n.oRS(" ",e.name," "),n.yG2(3),n.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),n.yG2(),n.E7m("for","customSwitchsizemd"+r),n.yG2(),n.E7m("ngClass",n.IBC(13,Ko,"active"===e.status,"inactive"===e.status)),n.yG2(),n.oRS(" ",e.status," "),n.yG2(2),n.oRS(" ",n.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function Ph(i,t){1&i&&(n.I0R(0,"div",28)(1,"div",103)(2,"span",104),n.OEk(3,"Loading..."),n.C$Y()()())}function _l(i,t){1&i&&(n.I0R(0,"div",105),n.OEk(1,"Department name is required."),n.C$Y())}function Wu(i,t){1&i&&(n.I0R(0,"div",105),n.OEk(1," Department name must be at most 45 characters "),n.C$Y())}function $u(i,t){1&i&&(n.I0R(0,"div",105),n.OEk(1,"Status is required."),n.C$Y())}let No=(()=>{class i{constructor(e,r,s){this.api=e,this.toastService=r,this.formBuilder=s,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Department",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.departmentData=r.data||[],this.departmentDataList=r.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const f={name:e.name,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("department",e.id,f).subscribe(g=>this.handleResponse(g),g=>this.handleError(g))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("department",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("department",this.id,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Department",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Department",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("department",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s));const r=this.checkedValGet;r&&r.length>0&&this.api.post("department-delete-multiple",{ids:r}).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(f=>({...f,states:e.target.checked}));for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.departmentData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.departmentData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.departmentData=this.departmentDataList.slice(r,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(Be.SA),n.GI1(j.im))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-department-list"]],viewQuery:function(r,s){if(1&r&&(n.CC$(Lh,5),n.CC$(Ys,5)),2&r){let o;n.wto(o=n.Gqi())&&(s.showModal=o.first),n.wto(o=n.Gqi())&&(s.deleteRecordModal=o.first)}},decls:123,vars:15,consts:[["title","Department List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Departments "),n.I0R(9,"span",8),n.OEk(10),n.C$Y()()(),n.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(16,"i",14),n.C$Y()(),n.I0R(17,"button",15),n.qCj("click",function(){n.usT(o);const g=n.Gew(104);return n.CGJ(g.show())}),n.wR5(18,"i",16),n.C$Y(),n.I0R(19,"button",17),n.qCj("click",function(){return s.onAdd()}),n.wR5(20,"i",18),n.OEk(21," Add Department "),n.C$Y()()()(),n.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),n.iHE("ngModelChange",function(g){return n.kNx(s.masterSelected,g)||(s.masterSelected=g),g}),n.qCj("change",function(g){return s.checkUncheckAll(g)}),n.C$Y(),n.wR5(30,"label",25),n.C$Y()(),n.I0R(31,"th",26),n.qCj("click",function(){return s.onSort("name")}),n.OEk(32," Department Name "),n.C$Y(),n.I0R(33,"th",26),n.qCj("click",function(){return s.onSort("status")}),n.OEk(34," Status "),n.C$Y(),n.I0R(35,"th",26),n.qCj("click",function(){return s.onSort("created_at")}),n.OEk(36," Created At "),n.C$Y(),n.I0R(37,"th"),n.OEk(38,"Action"),n.C$Y()()(),n.I0R(39,"tbody",27),n.c53(40,wa,24,16,"tr",80,n.wJt),n.C$Y(),n.yuY(42,Ph,4,0,"div",28),n.C$Y()(),n.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),n.wR5(47,"i",33),n.C$Y()(),n.I0R(48,"h5",34),n.OEk(49,"Sorry! No Result Found"),n.C$Y(),n.I0R(50,"p",35),n.OEk(51),n.C$Y()()(),n.I0R(52,"div",36)(53,"div",37)(54,"div",38),n.OEk(55," Showing "),n.I0R(56,"span",39),n.OEk(57),n.C$Y(),n.OEk(58," of "),n.I0R(59,"span",39),n.OEk(60),n.C$Y(),n.OEk(61," Results "),n.C$Y()(),n.I0R(62,"div",40)(63,"pagination",41),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(64,"div",42,43),n.qCj("hidden.bs.modal",function(){return s.resetForm()}),n.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),n.OEk(70,"Add Department"),n.C$Y(),n.I0R(71,"button",48),n.qCj("click",function(){n.usT(o);const g=n.Gew(65);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(72,"form",49),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(73,"div",50),n.wR5(74,"div",51),n.I0R(75,"div",52)(76,"label",53),n.OEk(77,"Department Name "),n.I0R(78,"span",54),n.OEk(79,"*"),n.C$Y()(),n.wR5(80,"input",55),n.yuY(81,_l,2,0,"div",56)(82,Wu,2,0,"div",56),n.C$Y(),n.I0R(83,"div",52)(84,"label",57),n.OEk(85,"Status "),n.I0R(86,"span",54),n.OEk(87,"*"),n.C$Y()(),n.I0R(88,"select",58)(89,"option",59),n.OEk(90,"Select Status"),n.C$Y(),n.I0R(91,"option",60),n.OEk(92,"Active"),n.C$Y(),n.I0R(93,"option",61),n.OEk(94,"Inactive"),n.C$Y()(),n.yuY(95,$u,2,0,"div",56),n.C$Y()(),n.I0R(96,"div",62)(97,"div",63)(98,"button",64),n.qCj("click",function(){n.usT(o);const g=n.Gew(65);return n.CGJ(g.hide())}),n.wR5(99,"i",65),n.OEk(100," Close "),n.C$Y(),n.I0R(101,"button",66),n.OEk(102," Add "),n.C$Y()()()()()()(),n.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),n.qCj("click",function(){n.usT(o);const g=n.Gew(104);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(109,"div",71)(110,"div",72)(111,"div",54),n.wR5(112,"i",73),n.C$Y(),n.I0R(113,"div",74)(114,"h3",75),n.OEk(115,"Are you sure ?"),n.C$Y(),n.I0R(116,"p",76),n.OEk(117," Are you sure you want to remove this record ? "),n.C$Y()()(),n.I0R(118,"div",77)(119,"button",78),n.qCj("click",function(){n.usT(o);const g=n.Gew(104);return n.CGJ(g.hide())}),n.OEk(120," Close "),n.C$Y(),n.I0R(121,"button",79),n.qCj("click",function(){return s.deleteData(s.deleteId)}),n.OEk(122," Yes, Delete It! "),n.C$Y()()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(10),n.cNF(null==s.departmentData?null:s.departmentData.length),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(14),n.OKB("ngModel",s.masterSelected),n.yG2(11),n.oho(s.departmentData),n.yG2(2),n.C0Y(42,s.spinnerStatus?42:-1),n.yG2(9),n.oRS(" We've searched ",s.departmentDataList.length," Department We did not find any Department for you search. "),n.yG2(6),n.cNF(null==s.departmentData?null:s.departmentData.length),n.yG2(3),n.cNF(null==s.departmentDataList?null:s.departmentDataList.length),n.yG2(3),n.E7m("totalItems",null==s.departmentDataList?null:s.departmentDataList.length)("itemsPerPage",10),n.yG2(9),n.E7m("formGroup",s.formGroup),n.yG2(9),n.C0Y(81,s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?81:-1),n.yG2(),n.C0Y(82,s.f.name&&s.f.name.hasError("maxlength")&&s.f.name.touched?82:-1),n.yG2(6),n.E7m("ngClass",s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(95,s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?95:-1))},dependencies:[Re.QF,$e.O,D.ER,Zn.uo,Zn.M3,Zn.mY,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,it.im,Un.uK,Re.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}"]})}return i})();const df=["showModal"],Fh=["deleteRecordModal"];function pc(i,t){if(1&i){const e=n.KQA();n.I0R(0,"ul",96)(1,"li")(2,"a",97),n.wR5(3,"i",98),n.OEk(4," View"),n.C$Y()(),n.I0R(5,"li")(6,"a",99),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.editList(s))}),n.wR5(7,"i",100),n.OEk(8," Edit"),n.C$Y()(),n.I0R(9,"li")(10,"a",101),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.removeItem(s.id))}),n.wR5(11,"i",102),n.OEk(12," Remove"),n.C$Y()()()}}const fh=(i,t)=>({"bg-info-subtle text-info":i,"bg-danger-subtle text-danger":t});function yl(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),n.iHE("ngModelChange",function(s){const f=n.usT(e).$implicit;return n.kNx(f.states,s)||(f.states=s),n.CGJ(s)}),n.qCj("change",function(s){n.usT(e);const o=n.GaO();return n.CGJ(o.onCheckboxChange(s))}),n.C$Y(),n.wR5(4,"label",82),n.C$Y()(),n.I0R(5,"td",83)(6,"a",84),n.OEk(7,"#TB01"),n.C$Y()(),n.I0R(8,"td",85),n.OEk(9),n.C$Y(),n.I0R(10,"td",86)(11,"div",87)(12,"input",88),n.qCj("change",function(s){const f=n.usT(e).$implicit,g=n.GaO();return n.CGJ(g.setStatus(f,s))}),n.C$Y(),n.I0R(13,"label",89)(14,"span",90),n.OEk(15),n.C$Y()()()(),n.I0R(16,"td",91),n.OEk(17),n.wVc(18,"date"),n.C$Y(),n.I0R(19,"td")(20,"div",92)(21,"button",93),n.wR5(22,"i",94),n.C$Y(),n.yuY(23,pc,13,0,"ul",95),n.C$Y()()()}if(2&i){const e=t.$implicit,r=t.$index;n.CI5("id","p_",e._id,""),n.yG2(3),n._6D("value",e._id),n.OKB("ngModel",e.states),n.yG2(6),n.oRS(" ",e.name," "),n.yG2(3),n.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),n.yG2(),n.E7m("for","customSwitchsizemd"+r),n.yG2(),n.E7m("ngClass",n.IBC(13,fh,"active"===e.status,"inactive"===e.status)),n.yG2(),n.oRS(" ",e.status," "),n.yG2(2),n.oRS(" ",n.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function ia(i,t){1&i&&(n.I0R(0,"div",28)(1,"div",103)(2,"span",104),n.OEk(3,"Loading..."),n.C$Y()()())}function Zl(i,t){1&i&&(n.I0R(0,"div",105),n.OEk(1,"Designation name is required."),n.C$Y())}function xu(i,t){1&i&&(n.I0R(0,"div",105),n.OEk(1," Designation name must be at most 45 characters "),n.C$Y())}function xl(i,t){1&i&&(n.I0R(0,"div",105),n.OEk(1,"Status is required."),n.C$Y())}let bd=(()=>{class i{constructor(e,r,s){this.api=e,this.toastService=r,this.formBuilder=s,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Designation",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getDesignation(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.departmentData=r.data||[],this.departmentDataList=r.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const f={name:e.name,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("designation",e.id,f).subscribe(g=>this.handleResponse(g),g=>this.handleError(g))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("designation",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("designation",this.id,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Designation",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("designation",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s));const r=this.checkedValGet;r&&r.length>0&&this.api.post("designation-delete-multiple",{ids:r}).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDesignation(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(f=>({...f,states:e.target.checked}));for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.departmentData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.departmentData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.departmentData=this.departmentDataList.slice(r,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(Be.SA),n.GI1(j.im))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-designation-list"]],viewQuery:function(r,s){if(1&r&&(n.CC$(df,5),n.CC$(Fh,5)),2&r){let o;n.wto(o=n.Gqi())&&(s.showModal=o.first),n.wto(o=n.Gqi())&&(s.deleteRecordModal=o.first)}},decls:123,vars:15,consts:[["title","Designation List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Designation "),n.I0R(9,"span",8),n.OEk(10),n.C$Y()()(),n.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(16,"i",14),n.C$Y()(),n.I0R(17,"button",15),n.qCj("click",function(){n.usT(o);const g=n.Gew(104);return n.CGJ(g.show())}),n.wR5(18,"i",16),n.C$Y(),n.I0R(19,"button",17),n.qCj("click",function(){return s.onAdd()}),n.wR5(20,"i",18),n.OEk(21," Add Designation "),n.C$Y()()()(),n.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),n.iHE("ngModelChange",function(g){return n.kNx(s.masterSelected,g)||(s.masterSelected=g),g}),n.qCj("change",function(g){return s.checkUncheckAll(g)}),n.C$Y(),n.wR5(30,"label",25),n.C$Y()(),n.I0R(31,"th",26),n.qCj("click",function(){return s.onSort("name")}),n.OEk(32," Designation Name "),n.C$Y(),n.I0R(33,"th",26),n.qCj("click",function(){return s.onSort("status")}),n.OEk(34," Status "),n.C$Y(),n.I0R(35,"th",26),n.qCj("click",function(){return s.onSort("created_at")}),n.OEk(36," Created At "),n.C$Y(),n.I0R(37,"th"),n.OEk(38,"Action"),n.C$Y()()(),n.I0R(39,"tbody",27),n.c53(40,yl,24,16,"tr",80,n.wJt),n.C$Y(),n.yuY(42,ia,4,0,"div",28),n.C$Y()(),n.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),n.wR5(47,"i",33),n.C$Y()(),n.I0R(48,"h5",34),n.OEk(49,"Sorry! No Result Found"),n.C$Y(),n.I0R(50,"p",35),n.OEk(51),n.C$Y()()(),n.I0R(52,"div",36)(53,"div",37)(54,"div",38),n.OEk(55," Showing "),n.I0R(56,"span",39),n.OEk(57),n.C$Y(),n.OEk(58," of "),n.I0R(59,"span",39),n.OEk(60),n.C$Y(),n.OEk(61," Results "),n.C$Y()(),n.I0R(62,"div",40)(63,"pagination",41),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(64,"div",42,43),n.qCj("hidden.bs.modal",function(){return s.resetForm()}),n.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),n.OEk(70,"Add Designation"),n.C$Y(),n.I0R(71,"button",48),n.qCj("click",function(){n.usT(o);const g=n.Gew(65);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(72,"form",49),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(73,"div",50),n.wR5(74,"div",51),n.I0R(75,"div",52)(76,"label",53),n.OEk(77,"Designation Name "),n.I0R(78,"span",54),n.OEk(79,"*"),n.C$Y()(),n.wR5(80,"input",55),n.yuY(81,Zl,2,0,"div",56)(82,xu,2,0,"div",56),n.C$Y(),n.I0R(83,"div",52)(84,"label",57),n.OEk(85,"Status "),n.I0R(86,"span",54),n.OEk(87,"*"),n.C$Y()(),n.I0R(88,"select",58)(89,"option",59),n.OEk(90,"Select Status"),n.C$Y(),n.I0R(91,"option",60),n.OEk(92,"Active"),n.C$Y(),n.I0R(93,"option",61),n.OEk(94,"Inactive"),n.C$Y()(),n.yuY(95,xl,2,0,"div",56),n.C$Y()(),n.I0R(96,"div",62)(97,"div",63)(98,"button",64),n.qCj("click",function(){n.usT(o);const g=n.Gew(65);return n.CGJ(g.hide())}),n.wR5(99,"i",65),n.OEk(100," Close "),n.C$Y(),n.I0R(101,"button",66),n.OEk(102," Add "),n.C$Y()()()()()()(),n.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),n.qCj("click",function(){n.usT(o);const g=n.Gew(104);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(109,"div",71)(110,"div",72)(111,"div",54),n.wR5(112,"i",73),n.C$Y(),n.I0R(113,"div",74)(114,"h3",75),n.OEk(115,"Are you sure ?"),n.C$Y(),n.I0R(116,"p",76),n.OEk(117," Are you sure you want to remove this record ? "),n.C$Y()()(),n.I0R(118,"div",77)(119,"button",78),n.qCj("click",function(){n.usT(o);const g=n.Gew(104);return n.CGJ(g.hide())}),n.OEk(120," Close "),n.C$Y(),n.I0R(121,"button",79),n.qCj("click",function(){return s.deleteData(s.deleteId)}),n.OEk(122," Yes, Delete It! "),n.C$Y()()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(10),n.cNF(null==s.departmentData?null:s.departmentData.length),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(14),n.OKB("ngModel",s.masterSelected),n.yG2(11),n.oho(s.departmentData),n.yG2(2),n.C0Y(42,s.spinnerStatus?42:-1),n.yG2(9),n.oRS(" We've searched ",s.departmentDataList.length," Department We did not find any Department for you search. "),n.yG2(6),n.cNF(null==s.departmentData?null:s.departmentData.length),n.yG2(3),n.cNF(null==s.departmentDataList?null:s.departmentDataList.length),n.yG2(3),n.E7m("totalItems",null==s.departmentDataList?null:s.departmentDataList.length)("itemsPerPage",10),n.yG2(9),n.E7m("formGroup",s.formGroup),n.yG2(9),n.C0Y(81,s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?81:-1),n.yG2(),n.C0Y(82,s.f.name&&s.f.name.hasError("maxlength")&&s.f.name.touched?82:-1),n.yG2(6),n.E7m("ngClass",s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(95,s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?95:-1))},dependencies:[Re.QF,$e.O,D.ER,Zn.uo,Zn.M3,Zn.mY,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,it.im,Un.uK,Re.y]})}return i})();var sl,pr,al,ol,va,po,ql,ph,Kl,tu={},Bh=[],Xa=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function mc(i,t){for(var e in t)i[e]=t[e];return i}function gc(i){var t=i.parentNode;t&&t.removeChild(i)}function Ut(i,t,e){var r,s,o,f={};for(o in t)"key"==o?r=t[o]:"ref"==o?s=t[o]:f[o]=t[o];if(arguments.length>2&&(f.children=arguments.length>3?sl.call(arguments,2):e),"function"==typeof i&&null!=i.defaultProps)for(o in i.defaultProps)void 0===f[o]&&(f[o]=i.defaultProps[o]);return Us(i,f,r,s,null)}function Us(i,t,e,r,s){var o={type:i,props:t,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++al};return null==s&&null!=pr.vnode&&pr.vnode(o),o}function Aa(i){return i.children}function bu(i,t,e){"-"===t[0]?i.setProperty(t,e??""):i[t]=null==e?"":"number"!=typeof e||Xa.test(t)?e:e+"px"}function Ml(i,t,e,r,s){var o;e:if("style"===t)if("string"==typeof e)i.style.cssText=e;else{if("string"==typeof r&&(i.style.cssText=r=""),r)for(t in r)e&&t in e||bu(i.style,t,"");if(e)for(t in e)r&&e[t]===r[t]||bu(i.style,t,e[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in i?t.toLowerCase().slice(2):t.slice(2),i.l||(i.l={}),i.l[t+o]=e,e?r||i.addEventListener(t,o?Rl:Ol,o):i.removeEventListener(t,o?Rl:Ol,o);else if("dangerouslySetInnerHTML"!==t){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in i)try{i[t]=e??"";break e}catch{}"function"==typeof e||(null==e||!1===e&&-1==t.indexOf("-")?i.removeAttribute(t):i.setAttribute(t,e))}}function Ol(i){va=!0;try{return this.l[i.type+!1](pr.event?pr.event(i):i)}finally{va=!1}}function Rl(i){va=!0;try{return this.l[i.type+!0](pr.event?pr.event(i):i)}finally{va=!1}}function ll(i,t){this.props=i,this.context=t}function bl(i,t){if(null==t)return i.__?bl(i.__,i.__.__k.indexOf(i)+1):null;for(var e;t<i.__k.length;t++)if(null!=(e=i.__k[t])&&null!=e.__e)return e.__e;return"function"==typeof i.type?bl(i):null}function iu(i){var t,e;if(null!=(i=i.__)&&null!=i.__c){for(i.__e=i.__c.base=null,t=0;t<i.__k.length;t++)if(null!=(e=i.__k[t])&&null!=e.__e){i.__e=i.__c.base=e.__e;break}return iu(i)}}function Ll(i){va?setTimeout(i):ph(i)}function Ho(i){(!i.__d&&(i.__d=!0)&&po.push(i)&&!vc.__r++||ql!==pr.debounceRendering)&&((ql=pr.debounceRendering)||Ll)(vc)}function vc(){var i,t,e,r,s,o,f,g;for(po.sort(function(A,P){return A.__v.__b-P.__v.__b});i=po.shift();)i.__d&&(t=po.length,r=void 0,s=void 0,f=(o=(e=i).__v).__e,(g=e.__P)&&(r=[],(s=mc({},o)).__v=o.__v+1,Nh(g,o,s,e.__n,void 0!==g.ownerSVGElement,null!=o.__h?[f]:null,r,f??bl(o),o.__h),Jo(r,o),o.__e!=f&&iu(o)),po.length>t&&po.sort(function(A,P){return A.__v.__b-P.__v.__b}));vc.__r=0}function _c(i,t,e,r,s,o,f,g,A,P){var z,ie,se,oe,_e,he,Ae,Ke=r&&r.__k||Bh,ct=Ke.length;for(e.__k=[],z=0;z<t.length;z++)if(null!=(oe=e.__k[z]=null==(oe=t[z])||"boolean"==typeof oe?null:"string"==typeof oe||"number"==typeof oe||"bigint"==typeof oe?Us(null,oe,null,null,oe):Array.isArray(oe)?Us(Aa,{children:oe},null,null,null):oe.__b>0?Us(oe.type,oe.props,oe.key,oe.ref?oe.ref:null,oe.__v):oe)){if(oe.__=e,oe.__b=e.__b+1,null===(se=Ke[z])||se&&oe.key==se.key&&oe.type===se.type)Ke[z]=void 0;else for(ie=0;ie<ct;ie++){if((se=Ke[ie])&&oe.key==se.key&&oe.type===se.type){Ke[ie]=void 0;break}se=null}Nh(i,oe,se=se||tu,s,o,f,g,A,P),_e=oe.__e,(ie=oe.ref)&&se.ref!=ie&&(Ae||(Ae=[]),se.ref&&Ae.push(se.ref,null,oe),Ae.push(ie,oe.__c||_e,oe)),null!=_e?(null==he&&(he=_e),"function"==typeof oe.type&&oe.__k===se.__k?oe.__d=A=wu(oe,A,i):A=gh(i,oe,se,Ke,_e,A),"function"==typeof e.type&&(e.__d=A)):A&&se.__e==A&&A.parentNode!=i&&(A=bl(se))}for(e.__e=he,z=ct;z--;)null!=Ke[z]&&("function"==typeof e.type&&null!=Ke[z].__e&&Ke[z].__e==e.__d&&(e.__d=zc(r).nextSibling),Xu(Ke[z],Ke[z]));if(Ae)for(z=0;z<Ae.length;z++)yc(Ae[z],Ae[++z],Ae[++z])}function wu(i,t,e){for(var r,s=i.__k,o=0;s&&o<s.length;o++)(r=s[o])&&(r.__=i,t="function"==typeof r.type?wu(r,t,e):gh(e,r,r,s,r.__e,t));return t}function cl(i,t){return t=t||[],null==i||"boolean"==typeof i||(Array.isArray(i)?i.some(function(e){cl(e,t)}):t.push(i)),t}function gh(i,t,e,r,s,o){var f,g,A;if(void 0!==t.__d)f=t.__d,t.__d=void 0;else if(null==e||s!=o||null==s.parentNode)e:if(null==o||o.parentNode!==i)i.appendChild(s),f=null;else{for(g=o,A=0;(g=g.nextSibling)&&A<r.length;A+=1)if(g==s)break e;i.insertBefore(s,o),f=o}return void 0!==f?f:s.nextSibling}function zc(i){var t,e,r;if(null==i.type||"string"==typeof i.type)return i.__e;if(i.__k)for(t=i.__k.length-1;t>=0;t--)if((e=i.__k[t])&&(r=zc(e)))return r;return null}function Nh(i,t,e,r,s,o,f,g,A){var P,z,ie,se,oe,_e,he,Ae,Ke,ct,pt,mi,Fi,Ki,ni,Ti=t.type;if(void 0!==t.constructor)return null;null!=e.__h&&(A=e.__h,g=t.__e=e.__e,t.__h=null,o=[g]),(P=pr.__b)&&P(t);try{e:if("function"==typeof Ti){if(Ae=t.props,Ke=(P=Ti.contextType)&&r[P.__c],ct=P?Ke?Ke.props.value:P.__:r,e.__c?he=(z=t.__c=e.__c).__=z.__E:("prototype"in Ti&&Ti.prototype.render?t.__c=z=new Ti(Ae,ct):(t.__c=z=new ll(Ae,ct),z.constructor=Ti,z.render=zh),Ke&&Ke.sub(z),z.props=Ae,z.state||(z.state={}),z.context=ct,z.__n=r,ie=z.__d=!0,z.__h=[],z._sb=[]),null==z.__s&&(z.__s=z.state),null!=Ti.getDerivedStateFromProps&&(z.__s==z.state&&(z.__s=mc({},z.__s)),mc(z.__s,Ti.getDerivedStateFromProps(Ae,z.__s))),se=z.props,oe=z.state,z.__v=t,ie)null==Ti.getDerivedStateFromProps&&null!=z.componentWillMount&&z.componentWillMount(),null!=z.componentDidMount&&z.__h.push(z.componentDidMount);else{if(null==Ti.getDerivedStateFromProps&&Ae!==se&&null!=z.componentWillReceiveProps&&z.componentWillReceiveProps(Ae,ct),!z.__e&&null!=z.shouldComponentUpdate&&!1===z.shouldComponentUpdate(Ae,z.__s,ct)||t.__v===e.__v){for(t.__v!==e.__v&&(z.props=Ae,z.state=z.__s,z.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.forEach(function(Bi){Bi&&(Bi.__=t)}),pt=0;pt<z._sb.length;pt++)z.__h.push(z._sb[pt]);z._sb=[],z.__h.length&&f.push(z);break e}null!=z.componentWillUpdate&&z.componentWillUpdate(Ae,z.__s,ct),null!=z.componentDidUpdate&&z.__h.push(function(){z.componentDidUpdate(se,oe,_e)})}if(z.context=ct,z.props=Ae,z.__P=i,mi=pr.__r,Fi=0,"prototype"in Ti&&Ti.prototype.render){for(z.state=z.__s,z.__d=!1,mi&&mi(t),P=z.render(z.props,z.state,z.context),Ki=0;Ki<z._sb.length;Ki++)z.__h.push(z._sb[Ki]);z._sb=[]}else do{z.__d=!1,mi&&mi(t),P=z.render(z.props,z.state,z.context),z.state=z.__s}while(z.__d&&++Fi<25);z.state=z.__s,null!=z.getChildContext&&(r=mc(mc({},r),z.getChildContext())),ie||null==z.getSnapshotBeforeUpdate||(_e=z.getSnapshotBeforeUpdate(se,oe)),ni=null!=P&&P.type===Aa&&null==P.key?P.props.children:P,_c(i,Array.isArray(ni)?ni:[ni],t,e,r,s,o,f,g,A),z.base=t.__e,t.__h=null,z.__h.length&&f.push(z),he&&(z.__E=z.__=null),z.__e=!1}else null==o&&t.__v===e.__v?(t.__k=e.__k,t.__e=e.__e):t.__e=function Pl(i,t,e,r,s,o,f,g){var A,P,z,ie=e.props,se=t.props,oe=t.type,_e=0;if("svg"===oe&&(s=!0),null!=o)for(;_e<o.length;_e++)if((A=o[_e])&&"setAttribute"in A==!!oe&&(oe?A.localName===oe:3===A.nodeType)){i=A,o[_e]=null;break}if(null==i){if(null===oe)return document.createTextNode(se);i=s?document.createElementNS("http://www.w3.org/2000/svg",oe):document.createElement(oe,se.is&&se),o=null,g=!1}if(null===oe)ie===se||g&&i.data===se||(i.data=se);else{if(o=o&&sl.call(i.childNodes),P=(ie=e.props||tu).dangerouslySetInnerHTML,z=se.dangerouslySetInnerHTML,!g){if(null!=o)for(ie={},_e=0;_e<i.attributes.length;_e++)ie[i.attributes[_e].name]=i.attributes[_e].value;(z||P)&&(z&&(P&&z.__html==P.__html||z.__html===i.innerHTML)||(i.innerHTML=z&&z.__html||""))}if(function mh(i,t,e,r,s){var o;for(o in e)"children"===o||"key"===o||o in t||Ml(i,o,null,e[o],r);for(o in t)s&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||e[o]===t[o]||Ml(i,o,t[o],e[o],r)}(i,se,ie,s,g),z)t.__k=[];else if(_e=t.props.children,_c(i,Array.isArray(_e)?_e:[_e],t,e,r,s&&"foreignObject"!==oe,o,f,o?o[0]:e.__k&&bl(e,0),g),null!=o)for(_e=o.length;_e--;)null!=o[_e]&&gc(o[_e]);g||("value"in se&&void 0!==(_e=se.value)&&(_e!==i.value||"progress"===oe&&!_e||"option"===oe&&_e!==ie.value)&&Ml(i,"value",_e,ie.value,!1),"checked"in se&&void 0!==(_e=se.checked)&&_e!==i.checked&&Ml(i,"checked",_e,ie.checked,!1))}return i}(e.__e,t,e,r,s,o,f,A);(P=pr.diffed)&&P(t)}catch(Bi){t.__v=null,(A||null!=o)&&(t.__e=g,t.__h=!!A,o[o.indexOf(g)]=null),pr.__e(Bi,t,e)}}function Jo(i,t){pr.__c&&pr.__c(t,i),i.some(function(e){try{i=e.__h,e.__h=[],i.some(function(r){r.call(e)})}catch(r){pr.__e(r,e.__v)}})}function yc(i,t,e){try{"function"==typeof i?i(t):i.current=t}catch(r){pr.__e(r,e)}}function Xu(i,t,e){var r,s;if(pr.unmount&&pr.unmount(i),(r=i.ref)&&(r.current&&r.current!==i.__e||yc(r,null,t)),null!=(r=i.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){pr.__e(o,t)}r.base=r.__P=null,i.__c=void 0}if(r=i.__k)for(s=0;s<r.length;s++)r[s]&&Xu(r[s],t,e||"function"!=typeof i.type);e||null==i.__e||gc(i.__e),i.__=i.__e=i.__d=void 0}function zh(i,t,e){return this.constructor(i,e)}function go(i,t,e){var r,s,o;pr.__&&pr.__(i,t),s=(r="function"==typeof e)?null:e&&e.__k||t.__k,o=[],Nh(t,i=(!r&&e||t).__k=Ut(Aa,null,[i]),s||tu,tu,void 0!==t.ownerSVGElement,!r&&e?[e]:s?null:t.firstChild?sl.call(t.childNodes):null,o,!r&&e?e:s?s.__e:t.firstChild,r),Jo(o,i)}sl=Bh.slice,pr={__e:function(i,t,e,r){for(var s,o,f;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&null!=o.getDerivedStateFromError&&(s.setState(o.getDerivedStateFromError(i)),f=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(i,r||{}),f=s.__d),f)return s.__E=s}catch(g){i=g}throw i}},al=0,ol=function(i){return null!=i&&void 0===i.constructor},va=!1,ll.prototype.setState=function(i,t){var e;e=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=mc({},this.state),"function"==typeof i&&(i=i(mc({},e),this.props)),i&&mc(e,i),null!=i&&this.__v&&(t&&this._sb.push(t),Ho(this))},ll.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),Ho(this))},ll.prototype.render=Aa,po=[],ph="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,vc.__r=0,Kl=0;var Ma,wl,hl,wd=[],nu=[],Jl=pr.__b,Cu=pr.__r,Zu=pr.diffed,Eu=pr.__c,Li=pr.unmount;function Ya(){for(var i;i=wd.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(su),i.__H.__h.forEach(fl),i.__H.__h=[]}catch(t){i.__H.__h=[],pr.__e(t,i.__v)}}pr.__b=function(i){Ma=null,Jl&&Jl(i)},pr.__r=function(i){Cu&&Cu(i);var t=(Ma=i.__c).__H;t&&(wl===Ma?(t.__h=[],Ma.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=nu,e.__N=e.i=void 0})):(t.__h.forEach(su),t.__h.forEach(fl),t.__h=[])),wl=Ma},pr.diffed=function(i){Zu&&Zu(i);var t=i.__c;t&&t.__H&&(t.__H.__h.length&&(1!==wd.push(t)&&hl===pr.requestAnimationFrame||((hl=pr.requestAnimationFrame)||ya)(Ya)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==nu&&(e.__=e.__V),e.i=void 0,e.__V=nu})),wl=Ma=null},pr.__c=function(i,t){t.some(function(e){try{e.__h.forEach(su),e.__h=e.__h.filter(function(r){return!r.__||fl(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],pr.__e(r,e.__v)}}),Eu&&Eu(i,t)},pr.unmount=function(i){Li&&Li(i);var t,e=i.__c;e&&e.__H&&(e.__H.__.forEach(function(r){try{su(r)}catch(s){t=s}}),e.__H=void 0,t&&pr.__e(t,e.__v))};var Uo="function"==typeof requestAnimationFrame;function ya(i){var t,e=function(){clearTimeout(r),Uo&&cancelAnimationFrame(t),setTimeout(i)},r=setTimeout(e,100);Uo&&(t=requestAnimationFrame(e))}function su(i){var t=Ma,e=i.__c;"function"==typeof e&&(i.__c=void 0,e()),Ma=t}function fl(i){var t=Ma;i.__c=i.__(),Ma=t}function qu(i,t){for(var e in i)if("__source"!==e&&!(e in t))return!0;for(var r in t)if("__source"!==r&&i[r]!==t[r])return!0;return!1}function Qo(i){this.props=i}(Qo.prototype=new ll).isPureReactComponent=!0,Qo.prototype.shouldComponentUpdate=function(i,t){return qu(this.props,i)||qu(this.state,t)};var Bl=pr.__b;pr.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),Bl&&Bl(i)},typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref");var Au=pr.__e;pr.__e=function(i,t,e,r){if(i.then)for(var s,o=t;o=o.__;)if((s=o.__c)&&s.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),s.__c(i,t);Au(i,t,e,r)};var Ec=pr.unmount;function Hc(i,t,e){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(r){"function"==typeof r.__c&&r.__c()}),i.__c.__H=null),null!=(i=function ca(i,t){for(var e in t)i[e]=t[e];return i}({},i)).__c&&(i.__c.__P===e&&(i.__c.__P=t),i.__c=null),i.__k=i.__k&&i.__k.map(function(r){return Hc(r,t,e)})),i}function au(i,t,e){return i&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(r){return au(r,t,e)}),i.__c&&i.__c.__P===t&&(i.__e&&e.insertBefore(i.__e,i.__d),i.__c.__e=!0,i.__c.__P=e)),i}function vh(){this.__u=0,this.t=null,this.__b=null}function ou(i){var t=i.__.__c;return t&&t.__a&&t.__a(i)}function lr(){this.u=null,this.o=null}pr.unmount=function(i){var t=i.__c;t&&t.__R&&t.__R(),t&&!0===i.__h&&(i.type=null),Ec&&Ec(i)},(vh.prototype=new ll).__c=function(i,t){var e=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(e);var s=ou(r.__v),o=!1,f=function(){o||(o=!0,e.__R=null,s?s(g):g())};e.__R=f;var g=function(){if(! --r.__u){if(r.state.__a){var P=r.state.__a;r.__v.__k[0]=au(P,P.__c.__P,P.__c.__O)}var z;for(r.setState({__a:r.__b=null});z=r.t.pop();)z.forceUpdate()}},A=!0===t.__h;r.__u++||A||r.setState({__a:r.__b=r.__v.__k[0]}),i.then(f,f)},vh.prototype.componentWillUnmount=function(){this.t=[]},vh.prototype.render=function(i,t){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Hc(this.__b,e,r.__O=r.__P)}this.__b=null}var s=t.__a&&Ut(Aa,null,i.fallback);return s&&(s.__h=null),[Ut(Aa,null,t.__a?null:i.children),s]};var v=function(i,t,e){if(++e[1]===e[0]&&i.o.delete(t),i.props.revealOrder&&("t"!==i.props.revealOrder[0]||!i.o.size))for(e=i.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;i.u=e=e[2]}};function R(i){return this.getChildContext=function(){return i.context},i.children}function Z(i){var t=this,e=i.i;t.componentWillUnmount=function(){go(null,t.l),t.l=null,t.i=null},t.i&&t.i!==e&&t.componentWillUnmount(),i.__v?(t.l||(t.i=e,t.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,s){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),go(Ut(R,{context:t.context},i.__v),t.l)):t.l&&t.componentWillUnmount()}(lr.prototype=new ll).__a=function(i){var t=this,e=ou(t.__v),r=t.o.get(i);return r[0]++,function(s){var o=function(){t.props.revealOrder?(r.push(s),v(t,i,r)):s()};e?e(o):o()}},lr.prototype.render=function(i){this.u=null,this.o=new Map;var t=cl(i.children);i.revealOrder&&"b"===i.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return i.children},lr.prototype.componentDidUpdate=lr.prototype.componentDidMount=function(){var i=this;this.o.forEach(function(t,e){v(i,e,t)})};var Ie=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ri=typeof document<"u",Ai=function(i){return(typeof Symbol<"u"&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(i)};ll.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(ll.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(t){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:t})}})});var Dr=pr.event;function Qr(){}function Ps(){return this.cancelBubble}function $s(){return this.defaultPrevented}pr.event=function(i){return Dr&&(i=Dr(i)),i.persist=Qr,i.isPropagationStopped=Ps,i.isDefaultPrevented=$s,i.nativeEvent=i};var vo={configurable:!0,get:function(){return this.class}},ho=pr.vnode;pr.vnode=function(i){var t=i.type,e=i.props,r=e;if("string"==typeof t){var s=-1===t.indexOf("-");for(var o in r={},e){var f=e[o];ri&&"children"===o&&"noscript"===t||"value"===o&&"defaultValue"in e&&null==f||("defaultValue"===o&&"value"in e&&null==e.value?o="value":"download"===o&&!0===f?f="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!Ai(e.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():s&&rt.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===f&&(f=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o="oninputCapture")),r[o]=f)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=cl(e.children).forEach(function(g){g.props.selected=-1!=r.value.indexOf(g.props.value)})),"select"==t&&null!=r.defaultValue&&(r.value=cl(e.children).forEach(function(g){g.props.selected=r.multiple?-1!=r.defaultValue.indexOf(g.props.value):r.defaultValue==g.props.value})),i.props=r,e.class!=e.className&&(vo.enumerable="className"in e,null!=e.className&&(r.class=e.className),Object.defineProperty(r,"className",vo))}i.$$typeof=Ie,ho&&ho(i)};var Cl=pr.__r;pr.__r=function(i){Cl&&Cl(i)};const jo=[],Yp=new Map;function yh(i){jo.push(i),Yp.forEach(t=>{fg(t,i)})}function Sm(i){let t=Yp.get(i);if(!t||!t.isConnected){if(t=i.querySelector("style[data-fullcalendar]"),!t){t=document.createElement("style"),t.setAttribute("data-fullcalendar","");const e=function zl(){return void 0===Du&&(Du=function Iu(){const i=document.querySelector('meta[name="csp-nonce"]');if(i&&i.hasAttribute("content"))return i.getAttribute("content");const t=document.querySelector("script[nonce]");return t&&t.nonce||""}()),Du}();e&&(t.nonce=e);const r=i===document?document.head:i,s=i===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(t,s)}Yp.set(i,t),function Ju(i){for(const t of jo)fg(i,t)}(t)}}function fg(i,t){const{sheet:e}=i,r=e.cssRules.length;t.split("}").forEach((s,o)=>{(s=s.trim())&&e.insertRule(s+"}",r+o)})}let Du;typeof document<"u"&&Sm(document),yh(':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}');class Ql{constructor(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==t?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))}pause(t=""){let{pauseDepths:e}=this;e[t]=(e[t]||0)+1,this.clearTimeout()}resume(t="",e){let{pauseDepths:r}=this;t in r&&(e?delete r[t]:(r[t]-=1,r[t]<=0&&delete r[t]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function kr(i){i.parentNode&&i.parentNode.removeChild(i)}function ec(i,t){if(i.closest)return i.closest(t);if(!document.documentElement.contains(i))return null;do{if(xh(i,t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}function xh(i,t){return(i.matches||i.matchesSelector||i.msMatchesSelector).call(i,t)}const fr=/(top|left|right|bottom|width|height)$/i;function Ed(i,t){for(let e in t)r0(i,e,t[e])}function r0(i,t,e){i.style[t]=null==e?"":"number"==typeof e&&fr.test(t)?`${e}px`:e}function kd(i){var t,e;return null!==(e=null===(t=i.composedPath)||void 0===t?void 0:t.call(i)[0])&&void 0!==e?e:i.target}let Gp=0;function ad(){return Gp+=1,"fc-dom-"+Gp}function lu(i){i.preventDefault()}function Mu(i,t,e,r){let s=function s0(i,t){return e=>{let r=ec(e.target,i);r&&t.call(r,e,r)}}(e,r);return i.addEventListener(t,s),()=>{i.removeEventListener(t,s)}}const Am=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function mf(i){return Object.assign({onClick:i},k(i))}function k(i){return{tabIndex:0,onKeyDown(t){("Enter"===t.key||" "===t.key)&&(i(t),t.preventDefault())}}}let d=0;function _(){return d+=1,String(d)}function I(){document.body.classList.add("fc-not-allowed")}function Y(){document.body.classList.remove("fc-not-allowed")}function Fe(i,t,e){return e.func?e.func(i,t):function et(i,t){return i||t?null==t?-1:null==i?1:"string"==typeof i||"string"==typeof t?String(i).localeCompare(String(t)):i-t:0}(i[e.field],t[e.field])*(e.order||1)}function ut(i,t){let e=String(i);return"000".substr(0,t-e.length)+e}function ft(i,t,e){return"function"==typeof i?i(...t):"string"==typeof i?t.reduce((r,s,o)=>r.replace("$"+o,s||""),i):e}function vt(i,t){return i-t}function wt(i){return i%1==0}function Ye(i){let t=i.querySelector(".fc-scrollgrid-shrink-frame"),e=i.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!e)throw new Error("needs fc-scrollgrid-shrink-cushion className");return i.getBoundingClientRect().width-t.getBoundingClientRect().width+e.getBoundingClientRect().width}const ht=["years","months","days","milliseconds"],zt=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function xt(i,t){return"string"==typeof i?function fi(i){let t=zt.exec(i);if(t){let e=t[1]?-1:1;return{years:0,months:0,days:e*(t[2]?parseInt(t[2],10):0),milliseconds:e*(60*(t[3]?parseInt(t[3],10):0)*60*1e3+60*(t[4]?parseInt(t[4],10):0)*1e3+1e3*(t[5]?parseInt(t[5],10):0)+(t[6]?parseInt(t[6],10):0))}}return null}(i):"object"==typeof i&&i?pi(i):"number"==typeof i?pi({[t||"milliseconds"]:i}):null}function pi(i){let t={years:i.years||i.year||0,months:i.months||i.month||0,days:i.days||i.day||0,milliseconds:60*(i.hours||i.hour||0)*60*1e3+60*(i.minutes||i.minute||0)*1e3+1e3*(i.seconds||i.second||0)+(i.milliseconds||i.millisecond||i.ms||0)},e=i.weeks||i.week;return e&&(t.days+=7*e,t.specifiedWeeks=!0),t}function Ei(i,t){return{years:i.years+t.years,months:i.months+t.months,days:i.days+t.days,milliseconds:i.milliseconds+t.milliseconds}}function Vi(i){return on(i)/864e5}function on(i){return 31536e6*i.years+2592e6*i.months+864e5*i.days+i.milliseconds}function Wn(i,t){let e=null;for(let r=0;r<ht.length;r+=1){let s=ht[r];if(t[s]){let o=i[s]/t[s];if(!wt(o)||null!==e&&e!==o)return null;e=o}else if(i[s])return null}return e}function Ln(i){let t=i.milliseconds;if(t){if(t%1e3!=0)return{unit:"millisecond",value:t};if(t%6e4!=0)return{unit:"second",value:t/1e3};if(t%36e5!=0)return{unit:"minute",value:t/6e4};if(t)return{unit:"hour",value:t/36e5}}return i.days?i.specifiedWeeks&&i.days%7==0?{unit:"week",value:i.days/7}:{unit:"day",value:i.days}:i.months?{unit:"month",value:i.months}:i.years?{unit:"year",value:i.years}:{unit:"millisecond",value:0}}function Rr(i,t,e){if(i===t)return!0;let s,r=i.length;if(r!==t.length)return!1;for(s=0;s<r;s+=1)if(!(e?e(i[s],t[s]):i[s]===t[s]))return!1;return!0}const ms=["sun","mon","tue","wed","thu","fri","sat"];function Sr(i,t){let e=uu(i);return e[2]+=7*t,To(e)}function Ir(i,t){let e=uu(i);return e[2]+=t,To(e)}function xs(i,t){let e=uu(i);return e[6]+=t,To(e)}function zr(i,t){return(t.valueOf()-i.valueOf())/864e5}function Wo(i,t){return tc(i)===tc(t)?Math.round(zr(i,t)):null}function ua(i){return To([i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()])}function ro(i,t,e,r){let s=To([t,0,1+Wc(t,e,r)]),o=ua(i),f=Math.round(zr(s,o));return Math.floor(f/7)+1}function Wc(i,t,e){let r=7+t-e;return-(7+To([i,0,r]).getUTCDay()-t)%7+r-1}function to(i){return[i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()]}function cu(i){return new Date(i[0],i[1]||0,null==i[2]?1:i[2],i[3]||0,i[4]||0,i[5]||0)}function uu(i){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()]}function To(i){return 1===i.length&&(i=i.concat([0])),new Date(Date.UTC(...i))}function wh(i){return!isNaN(i.valueOf())}function tc(i){return 1e3*i.getUTCHours()*60*60+1e3*i.getUTCMinutes()*60+1e3*i.getUTCSeconds()+i.getUTCMilliseconds()}function Gh(i,t,e=!1){let r=i.toISOString();return r=r.replace(".000",""),e&&(r=r.replace("T00:00:00Z","")),r.length>10&&(null==t?r=r.replace("Z",""):0!==t&&(r=r.replace("Z",Sd(t,!0)))),r}function Ou(i){return i.toISOString().replace(/T.*$/,"")}function Td(i){return ut(i.getUTCHours(),2)+":"+ut(i.getUTCMinutes(),2)+":"+ut(i.getUTCSeconds(),2)}function Sd(i,t=!1){let e=i<0?"-":"+",r=Math.abs(i),s=Math.floor(r/60),o=Math.round(r%60);return t?`${e+ut(s,2)}:${ut(o,2)}`:`GMT${e}${s}${o?`:${ut(o,2)}`:""}`}function Ur(i,t,e){let r,s;return function(...o){if(r){if(!Rr(r,o)){e&&e(s);let f=i.apply(this,o);(!t||!t(f,s))&&(s=f)}}else s=i.apply(this,o);return r=o,s}}function ha(i,t,e){let r,s;return o=>{if(r){if(!$o(r,o)){e&&e(s);let f=i.call(this,o);(!t||!t(f,s))&&(s=f)}}else s=i.call(this,o);return r=o,s}}const gf={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},Vp={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Up=/\s*([ap])\.?m\.?/i,mg=/,/g,Yl=/\s+/g,gg=/\u200e/g,Dm=/UTC|GMT/;class vg{constructor(t){let e={},r={},s=0;for(let o in t)o in gf?(r[o]=t[o],s=Math.max(gf[o],s)):(e[o]=t[o],o in Vp&&(s=Math.max(Vp[o],s)));this.standardDateProps=e,this.extendedSettings=r,this.severity=s,this.buildFormattingFunc=Ur(a0)}format(t,e){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,e)(t)}formatRange(t,e,r,s){let{standardDateProps:o,extendedSettings:f}=this,g=function Hh(i,t,e){return e.getMarkerYear(i)!==e.getMarkerYear(t)?5:e.getMarkerMonth(i)!==e.getMarkerMonth(t)?4:e.getMarkerDay(i)!==e.getMarkerDay(t)?2:tc(i)!==tc(t)?1:0}(t.marker,e.marker,r.calendarSystem);if(!g)return this.format(t,r);let A=g;A>1&&("numeric"===o.year||"2-digit"===o.year)&&("numeric"===o.month||"2-digit"===o.month)&&("numeric"===o.day||"2-digit"===o.day)&&(A=1);let P=this.format(t,r),z=this.format(e,r);if(P===z)return P;let ie=function Gl(i,t){let e={};for(let r in i)(!(r in Vp)||Vp[r]<=t)&&(e[r]=i[r]);return e}(o,A),se=a0(ie,f,r),oe=se(t),_e=se(e),he=function Dd(i,t,e,r){let s=0;for(;s<i.length;){let o=i.indexOf(t,s);if(-1===o)break;let f=i.substr(0,o);s=o+t.length;let g=i.substr(s),A=0;for(;A<e.length;){let P=e.indexOf(r,A);if(-1===P)break;let z=e.substr(0,P);A=P+r.length;let ie=e.substr(A);if(f===z&&g===ie)return{before:f,after:g}}}return null}(P,oe,z,_e),Ae=f.separator||s||r.defaultSeparator||"";return he?he.before+oe+Ae+_e+he.after:P+Ae+z}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function a0(i,t,e){let r=Object.keys(i).length;return 1===r&&"short"===i.timeZoneName?s=>Sd(s.timeZoneOffset):0===r&&t.week?s=>function up(i,t,e,r,s){let o=[];return"long"===s?o.push(e):("short"===s||"narrow"===s)&&o.push(t),("long"===s||"short"===s)&&o.push(" "),o.push(r.simpleNumberFormat.format(i)),"rtl"===r.options.direction&&o.reverse(),o.join("")}(e.computeWeekNumber(s.marker),e.weekText,e.weekTextLong,e.locale,t.week):function xv(i,t,e){i=Object.assign({},i),t=Object.assign({},t),function Ch(i,t){i.timeZoneName&&(i.hour||(i.hour="2-digit"),i.minute||(i.minute="2-digit")),"long"===i.timeZoneName&&(i.timeZoneName="short"),t.omitZeroMinute&&(i.second||i.millisecond)&&delete t.omitZeroMinute}(i,t),i.timeZone="UTC";let s,r=new Intl.DateTimeFormat(e.locale.codes,i);if(t.omitZeroMinute){let o=Object.assign({},i);delete o.minute,s=new Intl.DateTimeFormat(e.locale.codes,o)}return o=>{let g,{marker:f}=o;return g=s&&!f.getUTCMinutes()?s:r,function Ad(i,t,e,r,s){return i=i.replace(gg,""),"short"===e.timeZoneName&&(i=function cp(i,t){let e=!1;return i=i.replace(Dm,()=>(e=!0,t)),e||(i+=` ${t}`),i}(i,"UTC"===s.timeZone||null==t.timeZoneOffset?"UTC":Sd(t.timeZoneOffset))),r.omitCommas&&(i=i.replace(mg,"").trim()),r.omitZeroMinute&&(i=i.replace(":00","")),!1===r.meridiem?i=i.replace(Up,"").trim():"narrow"===r.meridiem?i=i.replace(Up,(o,f)=>f.toLocaleLowerCase()):"short"===r.meridiem?i=i.replace(Up,(o,f)=>`${f.toLocaleLowerCase()}m`):"lowercase"===r.meridiem&&(i=i.replace(Up,o=>o.toLocaleLowerCase())),i=(i=i.replace(Yl," ")).trim()}(g.format(f),o,i,t,e)}}(i,t,e)}function Id(i,t){let e=t.markerToArray(i.marker);return{marker:i.marker,timeZoneOffset:i.timeZoneOffset,array:e,year:e[0],month:e[1],day:e[2],hour:e[3],minute:e[4],second:e[5],millisecond:e[6]}}function Eh(i,t,e,r){let s=Id(i,e.calendarSystem);return{date:s,start:s,end:t?Id(t,e.calendarSystem):null,timeZone:e.timeZone,localeCodes:e.locale.codes,defaultSeparator:r||e.defaultSeparator}}class o0{constructor(t){this.cmdStr=t}format(t,e,r){return e.cmdFormatter(this.cmdStr,Eh(t,null,e,r))}formatRange(t,e,r,s){return r.cmdFormatter(this.cmdStr,Eh(t,e,r,s))}}class zf{constructor(t){this.func=t}format(t,e,r){return this.func(Eh(t,null,e,r))}formatRange(t,e,r,s){return this.func(Eh(t,e,r,s))}}function So(i){return"object"==typeof i&&i?new vg(i):"string"==typeof i?new o0(i):"function"==typeof i?new zf(i):null}const od={navLinkDayClick:tn,navLinkWeekClick:tn,duration:xt,bootstrapFontAwesome:tn,buttonIcons:tn,customButtons:tn,defaultAllDayEventDuration:xt,defaultTimedEventDuration:xt,nextDayThreshold:xt,scrollTime:xt,scrollTimeReset:Boolean,slotMinTime:xt,slotMaxTime:xt,dayPopoverFormat:So,slotDuration:xt,snapDuration:xt,headerToolbar:tn,footerToolbar:tn,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:So,dayHeaderClassNames:tn,dayHeaderContent:tn,dayHeaderDidMount:tn,dayHeaderWillUnmount:tn,dayCellClassNames:tn,dayCellContent:tn,dayCellDidMount:tn,dayCellWillUnmount:tn,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:tn,weekNumbers:Boolean,weekNumberClassNames:tn,weekNumberContent:tn,weekNumberDidMount:tn,weekNumberWillUnmount:tn,editable:Boolean,viewClassNames:tn,viewDidMount:tn,viewWillUnmount:tn,nowIndicator:Boolean,nowIndicatorClassNames:tn,nowIndicatorContent:tn,nowIndicatorDidMount:tn,nowIndicatorWillUnmount:tn,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:tn,locale:tn,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:tn,eventOrder:function be(i){let r,s,t=[],e=[];for("string"==typeof i?e=i.split(/\s*,\s*/):"function"==typeof i?e=[i]:Array.isArray(i)&&(e=i),r=0;r<e.length;r+=1)s=e[r],"string"==typeof s?t.push("-"===s.charAt(0)?{field:s.substring(1),order:-1}:{field:s,order:1}):"function"==typeof s&&t.push({func:s});return t},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:tn,contentHeight:tn,direction:String,weekNumberFormat:So,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:tn,initialDate:tn,now:tn,eventDataTransform:tn,stickyHeaderDates:tn,stickyFooterScrollbar:tn,viewHeight:tn,defaultAllDay:Boolean,eventSourceFailure:tn,eventSourceSuccess:tn,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:tn,eventConstraint:tn,eventAllow:tn,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:tn,eventContent:tn,eventDidMount:tn,eventWillUnmount:tn,selectConstraint:tn,selectOverlap:tn,selectAllow:tn,droppable:Boolean,unselectCancel:String,slotLabelFormat:tn,slotLaneClassNames:tn,slotLaneContent:tn,slotLaneDidMount:tn,slotLaneWillUnmount:tn,slotLabelClassNames:tn,slotLabelContent:tn,slotLabelDidMount:tn,slotLabelWillUnmount:tn,dayMaxEvents:tn,dayMaxEventRows:tn,dayMinWidth:Number,slotLabelInterval:xt,allDayText:String,allDayClassNames:tn,allDayContent:tn,allDayDidMount:tn,allDayWillUnmount:tn,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:So,rerenderDelay:Number,moreLinkText:tn,moreLinkHint:tn,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:tn,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:xt,hiddenDays:tn,fixedWeekCount:Boolean,validRange:tn,visibleRange:tn,titleFormat:tn,eventInteractive:Boolean,noEventsText:String,viewHint:tn,navLinkHint:tn,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:tn,moreLinkClassNames:tn,moreLinkContent:tn,moreLinkDidMount:tn,moreLinkWillUnmount:tn,monthStartFormat:So,handleCustomRendering:tn,customRenderingMetaMap:tn,customRenderingReplaces:Boolean},kh={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},l0={datesSet:tn,eventsSet:tn,eventAdd:tn,eventChange:tn,eventRemove:tn,windowResize:tn,eventClick:tn,eventMouseEnter:tn,eventMouseLeave:tn,select:tn,unselect:tn,loading:tn,_unmount:tn,_beforeprint:tn,_afterprint:tn,_noEventDrop:tn,_noEventResize:tn,_resize:tn,_scrollRequest:tn},Ru={buttonText:tn,buttonHints:tn,views:tn,plugins:tn,initialEvents:tn,events:tn,eventSources:tn},Yf={headerToolbar:Gf,footerToolbar:Gf,buttonText:Gf,buttonHints:Gf,buttonIcons:Gf,dateIncrement:Gf,plugins:Ao,events:Ao,eventSources:Ao,resources:Ao};function Gf(i,t){return"object"==typeof i&&"object"==typeof t&&i&&t?$o(i,t):i===t}function Ao(i,t){return Array.isArray(i)&&Array.isArray(t)?Rr(i,t):i===t}const Yr={type:String,component:tn,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:tn,usesMinMaxTime:Boolean,classNames:tn,content:tn,didMount:tn,willUnmount:tn};function Vh(i){return kc(i,Yf)}function Md(i,t){let e={},r={};for(let s in t)s in i&&(e[s]=t[s](i[s]));for(let s in i)s in t||(r[s]=i[s]);return{refined:e,extra:r}}function tn(i){return i}const{hasOwnProperty:hp}=Object.prototype;function kc(i,t){let e={};if(t)for(let r in t)if(t[r]===Gf){let s=[];for(let o=i.length-1;o>=0;o-=1){let f=i[o][r];if("object"==typeof f&&f)s.unshift(f);else if(void 0!==f){e[r]=f;break}}s.length&&(e[r]=kc(s))}for(let r=i.length-1;r>=0;r-=1){let s=i[r];for(let o in s)o in e||(e[o]=s[o])}return e}function Do(i,t){let e={};for(let r in i)t(i[r],r)&&(e[r]=i[r]);return e}function ld(i,t){let e={};for(let r in i)e[r]=t(i[r],r);return e}function Hf(i){let t={};for(let e of i)t[e]=!0;return t}function cd(i){let t=[];for(let e in i)t.push(i[e]);return t}function $o(i,t){if(i===t)return!0;for(let e in i)if(hp.call(i,e)&&!(e in t))return!1;for(let e in t)if(hp.call(t,e)&&i[e]!==t[e])return!1;return!0}const _g=/^on[A-Z]/;function yg(i,t){let e=[];for(let r in i)hp.call(i,r)&&(r in t||e.push(r));for(let r in t)hp.call(t,r)&&i[r]!==t[r]&&e.push(r);return e}function jp(i,t,e={}){if(i===t)return!0;for(let r in t)if(!(r in i)||!Wp(i[r],t[r],e[r]))return!1;for(let r in i)if(!(r in t))return!1;return!0}function Wp(i,t,e){return i===t||!0===e||!!e&&e(i,t)}let xg={};!function dp(i,t){xg[i]=t}("gregory",class Uh{getMarkerYear(t){return t.getUTCFullYear()}getMarkerMonth(t){return t.getUTCMonth()}getMarkerDay(t){return t.getUTCDate()}arrayToMarker(t){return To(t)}markerToArray(t){return uu(t)}});const $p=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;class ic{constructor(t){let e=this.timeZone=t.timeZone,r="local"!==e&&"UTC"!==e;t.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(e)),this.canComputeOffset=!(r&&!this.namedTimeZoneImpl),this.calendarSystem=function Od(i){return new xg[i]}(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,"ISO"===t.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof t.firstDay&&(this.weekDow=t.firstDay),"function"==typeof t.weekNumberCalculation&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=null!=t.weekText?t.weekText:t.locale.options.weekText,this.weekTextLong=(null!=t.weekTextLong?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}createMarker(t){let e=this.createMarkerMeta(t);return null===e?null:e.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):To(to(new Date))}createMarkerMeta(t){if("string"==typeof t)return this.parse(t);let e=null;return"number"==typeof t?e=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(e=this.timestampToMarker(t))):Array.isArray(t)&&(e=To(t)),null!==e&&wh(e)?{marker:e,isTimeUnspecified:!1,forcedTzo:null}:null}parse(t){let e=function Mm(i){let t=$p.exec(i);if(t){let e=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?1e3*+`0.${t[12]}`:0));if(wh(e)){let r=null;return t[13]&&(r=("-"===t[15]?-1:1)*(60*Number(t[16]||0)+Number(t[18]||0))),{marker:e,isTimeUnspecified:!t[6],timeZoneOffset:r}}}return null}(t);if(null===e)return null;let{marker:r}=e,s=null;return null!==e.timeZoneOffset&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-60*e.timeZoneOffset*1e3):s=e.timeZoneOffset),{marker:r,isTimeUnspecified:e.isTimeUnspecified,forcedTzo:s}}getYear(t){return this.calendarSystem.getMarkerYear(t)}getMonth(t){return this.calendarSystem.getMarkerMonth(t)}getDay(t){return this.calendarSystem.getMarkerDay(t)}add(t,e){let r=this.calendarSystem.markerToArray(t);return r[0]+=e.years,r[1]+=e.months,r[2]+=e.days,r[6]+=e.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(t,e){let r=this.calendarSystem.markerToArray(t);return r[0]-=e.years,r[1]-=e.months,r[2]-=e.days,r[6]-=e.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(t,e){let r=this.calendarSystem.markerToArray(t);return r[0]+=e,this.calendarSystem.arrayToMarker(r)}addMonths(t,e){let r=this.calendarSystem.markerToArray(t);return r[1]+=e,this.calendarSystem.arrayToMarker(r)}diffWholeYears(t,e){let{calendarSystem:r}=this;return tc(t)===tc(e)&&r.getMarkerDay(t)===r.getMarkerDay(e)&&r.getMarkerMonth(t)===r.getMarkerMonth(e)?r.getMarkerYear(e)-r.getMarkerYear(t):null}diffWholeMonths(t,e){let{calendarSystem:r}=this;return tc(t)===tc(e)&&r.getMarkerDay(t)===r.getMarkerDay(e)?r.getMarkerMonth(e)-r.getMarkerMonth(t)+12*(r.getMarkerYear(e)-r.getMarkerYear(t)):null}greatestWholeUnit(t,e){let r=this.diffWholeYears(t,e);return null!==r?{unit:"year",value:r}:(r=this.diffWholeMonths(t,e),null!==r?{unit:"month",value:r}:(r=function jc(i,t){let e=Wo(i,t);return null!==e&&e%7==0?e/7:null}(t,e),null!==r?{unit:"week",value:r}:(r=Wo(t,e),null!==r?{unit:"day",value:r}:(r=function Qs(i,t){return(t.valueOf()-i.valueOf())/36e5}(t,e),wt(r)?{unit:"hour",value:r}:(r=function Za(i,t){return(t.valueOf()-i.valueOf())/6e4}(t,e),wt(r)?{unit:"minute",value:r}:(r=function eo(i,t){return(t.valueOf()-i.valueOf())/1e3}(t,e),wt(r)?{unit:"second",value:r}:{unit:"millisecond",value:e.valueOf()-t.valueOf()}))))))}countDurationsBetween(t,e,r){let s;return r.years&&(s=this.diffWholeYears(t,e),null!==s)?s/function Ni(i){return Vi(i)/365}(r):r.months&&(s=this.diffWholeMonths(t,e),null!==s)?s/function dn(i){return Vi(i)/30}(r):r.days&&(s=Wo(t,e),null!==s)?s/Vi(r):(e.valueOf()-t.valueOf())/on(r)}startOf(t,e){return"year"===e?this.startOfYear(t):"month"===e?this.startOfMonth(t):"week"===e?this.startOfWeek(t):"day"===e?ua(t):"hour"===e?function bh(i){return To([i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours()])}(t):"minute"===e?function _o(i){return To([i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes()])}(t):"second"===e?function Ca(i){return To([i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds()])}(t):null}startOfYear(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])}startOfMonth(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])}startOfWeek(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):function Da(i,t,e){let r=i.getUTCFullYear(),s=ro(i,r,t,e);if(s<1)return ro(i,r-1,t,e);let o=ro(i,r+1,t,e);return o>=1?Math.min(s,o):s}(t,this.weekDow,this.weekDoy)}format(t,e,r={}){return e.format({marker:t,timeZoneOffset:null!=r.forcedTzo?r.forcedTzo:this.offsetForMarker(t)},this)}formatRange(t,e,r,s={}){return s.isEndExclusive&&(e=xs(e,-1)),r.formatRange({marker:t,timeZoneOffset:null!=s.forcedStartTzo?s.forcedStartTzo:this.offsetForMarker(t)},{marker:e,timeZoneOffset:null!=s.forcedEndTzo?s.forcedEndTzo:this.offsetForMarker(e)},this,s.defaultSeparator)}formatIso(t,e={}){let r=null;return e.omitTimeZoneOffset||(r=null!=e.forcedTzo?e.forcedTzo:this.offsetForMarker(t)),Gh(t,r,e.omitTime)}timestampToMarker(t){return"local"===this.timeZone?To(to(new Date(t))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?To(this.namedTimeZoneImpl.timestampToArray(t)):new Date(t)}offsetForMarker(t){return"local"===this.timeZone?-cu(uu(t)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(uu(t)):null}toDate(t,e){return"local"===this.timeZone?cu(uu(t)):"UTC"===this.timeZone?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(uu(t))*60):new Date(t.valueOf()-(e||0))}}class Lu{constructor(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}setIconOverride(t){let e,r;if("object"==typeof t&&t){for(r in e=Object.assign({},this.iconClasses),t)e[r]=this.applyIconOverridePrefix(t[r]);this.iconClasses=e}else!1===t&&(this.iconClasses={})}applyIconOverridePrefix(t){let e=this.iconOverridePrefix;return e&&0!==t.indexOf(e)&&(t=e+t),t}getClass(t){return this.classes[t]||""}getIconClass(t,e){let r;return r=e&&this.rtlIconClasses&&this.rtlIconClasses[t]||this.iconClasses[t],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(t){let e;return this.iconOverrideCustomButtonOption&&(e=t[this.iconOverrideCustomButtonOption],e)?`${this.baseIconClass} ${this.applyIconOverridePrefix(e)}`:""}}function hu(i){i();let t=pr.debounceRendering,e=[];for(pr.debounceRendering=function r(s){e.push(s)},go(Ut(Rd,{}),document.createElement("div"));e.length;)e.shift()();pr.debounceRendering=t}Lu.prototype.classes={},Lu.prototype.iconClasses={},Lu.prototype.baseIconClass="",Lu.prototype.iconOverridePrefix="";class Rd extends ll{render(){return Ut("div",{})}componentDidMount(){this.setState({})}}function El(i){let t=function Bf(i,t){var e={__c:t="__cC"+Kl++,__:i,Consumer:function(r,s){return r.children(s)},Provider:function(r){var s,o;return this.getChildContext||(s=[],(o={})[t]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(f){this.props.value!==f.value&&s.some(function(g){g.__e=!0,Ho(g)})},this.sub=function(f){s.push(f);var g=f.componentWillUnmount;f.componentWillUnmount=function(){s.splice(s.indexOf(f),1),g&&g.call(f)}}),r.children}};return e.Provider.__=e.Consumer.contextType=e}(i),e=t.Provider;return t.Provider=function(){let r=!this.getChildContext,s=e.apply(this,arguments);if(r){let o=[];this.shouldComponentUpdate=f=>{this.props.value!==f.value&&o.forEach(g=>{g.context=f.value,g.forceUpdate()})},this.sub=f=>{o.push(f);let g=f.componentWillUnmount;f.componentWillUnmount=()=>{o.splice(o.indexOf(f),1),g&&g.call(f)}}}return s},t}class Pu{constructor(t,e,r,s){this.execFunc=t,this.emitter=e,this.scrollTime=r,this.scrollTimeReset=s,this.handleScrollRequest=o=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},o),this.drain()},e.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Th=El({});function Xo(i,t,e,r,s,o,f,g,A,P,z,ie,se){return{dateEnv:s,options:e,pluginHooks:f,emitter:P,dispatch:g,getCurrentData:A,calendarApi:z,viewSpec:i,viewApi:t,dateProfileGenerator:r,theme:o,isRtl:"rtl"===e.direction,addResizeHandler(oe){P.on("_resize",oe)},removeResizeHandler(oe){P.off("_resize",oe)},createScrollResponder:oe=>new Pu(oe,P,xt(e.scrollTime),e.scrollTimeReset),registerInteractiveComponent:ie,unregisterInteractiveComponent:se}}let Xp=(()=>{class i extends ll{shouldComponentUpdate(e,r){return this.debug&&console.log(yg(e,this.props),yg(r,this.state)),!jp(this.props,e,this.propEquality)||!jp(this.state,r,this.stateEquality)}safeSetState(e){jp(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}return i.addPropsEquality=jh,i.addStateEquality=bv,i.contextType=Th,i})();Xp.prototype.propEquality={},Xp.prototype.stateEquality={};let da=(()=>{class i extends Xp{}return i.contextType=Th,i})();function jh(i){let t=Object.create(this.prototype.propEquality);Object.assign(t,i),this.prototype.propEquality=t}function bv(i){let t=Object.create(this.prototype.stateEquality);Object.assign(t,i),this.prototype.stateEquality=t}function vf(i,t){"function"==typeof i?i(t):i&&(i.current=t)}class Om extends da{constructor(){super(...arguments),this.id=_(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=t=>{const{options:e}=this.context,{generatorName:r}=this.props;(!e.customRenderingReplaces||!bg(r,e))&&this.updateElRef(t)},this.updateElRef=t=>{this.props.elRef&&vf(this.props.elRef,t)}}render(){const{props:t,context:e}=this,{options:r}=e,{customGenerator:s,defaultGenerator:o,renderProps:f}=t,g=Uf(t,[],this.handleEl);let P,ie,A=!1,z=[];if(null!=s){const se="function"==typeof s?s(f,Ut):s;if(!0===se)A=!0;else{const oe=se&&"object"==typeof se;oe&&"html"in se?g.dangerouslySetInnerHTML={__html:se.html}:oe&&"domNodes"in se?z=Array.prototype.slice.call(se.domNodes):(oe?ol(se):"function"!=typeof se)?P=se:ie=se}}else A=!bg(t.generatorName,r);return A&&o&&(P=o(f)),this.queuedDomNodes=z,this.currentGeneratorMeta=ie,Ut(t.elTag,g,P)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(t){var e;const{props:r,context:s}=this,{handleCustomRendering:o,customRenderingMetaMap:f}=s.options;if(o){const g=null!==(e=this.currentGeneratorMeta)&&void 0!==e?e:f?.[r.generatorName];g&&o(Object.assign(Object.assign({id:this.id,isActive:t,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:g},r),{elClasses:(r.elClasses||[]).filter(Ld)}))}}applyQueueudDomNodes(){const{queuedDomNodes:t,currentDomNodes:e}=this,r=this.base;if(!Rr(t,e)){e.forEach(kr);for(let s of t)r.appendChild(s);this.currentDomNodes=t}}}function bg(i,t){var e;return!!(t.handleCustomRendering&&i&&null!==(e=t.customRenderingMetaMap)&&void 0!==e&&e[i])}function Uf(i,t,e){const r=Object.assign(Object.assign({},i.elAttrs),{ref:e});return(i.elClasses||t)&&(r.className=(i.elClasses||[]).concat(t||[]).concat(r.className||[]).filter(Boolean).join(" ")),i.elStyle&&(r.style=i.elStyle),r}function Ld(i){return!!i}Om.addPropsEquality({elClasses:Rr,elStyle:$o,elAttrs:function Im(i,t){const e=yg(i,t);for(let r of e)if(!_g.test(r))return!1;return!0},renderProps:$o});const Rm=El(0);let Tc=(()=>{class i extends ll{constructor(){super(...arguments),this.InnerContent=wg.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(vf(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,r=function Cg(i,t){const e="function"==typeof i?i(t):i||[];return"string"==typeof e?[e]:e}(e.classNameGenerator,e.renderProps);if(e.children){const s=Uf(e,r,this.handleEl),o=e.children(this.InnerContent,e.renderProps,s);return e.elTag?Ut(e.elTag,s,o):o}return Ut(Om,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(r),renderId:this.context}))}componentDidMount(){var e,r;this.el?null===(r=(e=this.props).didMount)||void 0===r||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,r;null===(r=(e=this.props).willUnmount)||void 0===r||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}return i.contextType=Rm,i})();function wg(i,t){const e=i.props;return Ut(Om,Object.assign({renderProps:e.renderProps,generatorName:e.generatorName,customGenerator:e.customGenerator,defaultGenerator:e.defaultGenerator,renderId:i.context},t))}class Pd extends da{render(){let{props:t,context:e}=this,{options:r}=e,s={view:e.viewApi};return Ut(Tc,Object.assign({},t,{elTag:t.elTag||"div",elClasses:[...As(t.viewSpec),...t.elClasses||[]],renderProps:s,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount}),()=>t.children)}}function As(i){return[`fc-${i.type}-view`,"fc-view"]}function jf(i,t){let s,o,e=[],{start:r}=t;for(i.sort(_f),s=0;s<i.length;s+=1)o=i[s],o.start>r&&e.push({start:r,end:o.start}),o.end>r&&(r=o.end);return r<t.end&&e.push({start:r,end:t.end}),e}function _f(i,t){return i.start.valueOf()-t.start.valueOf()}function Fd(i,t){let{start:e,end:r}=i,s=null;return null!==t.start&&(e=null===e?t.start:new Date(Math.max(e.valueOf(),t.start.valueOf()))),null!=t.end&&(r=null===r?t.end:new Date(Math.min(r.valueOf(),t.end.valueOf()))),(null===e||null===r||e<r)&&(s={start:e,end:r}),s}function nc(i,t){return(null===i.end||null===t.start||i.end>t.start)&&(null===i.start||null===t.end||i.start<t.end)}function kl(i,t){return(null===i.start||null!==t.start&&t.start>=i.start)&&(null===i.end||null!==t.end&&t.end<=i.end)}function Bd(i,t){return(null===i.start||t>=i.start)&&(null===i.end||t<i.end)}function c0(i){let t=Math.floor(zr(i.start,i.end))||1,e=ua(i.start);return{start:e,end:Ir(e,t)}}function yf(i,t=xt(0)){let e=null,r=null;if(i.end){r=ua(i.end);let s=i.end.valueOf()-r.valueOf();s&&s>=on(t)&&(r=Ir(r,1))}return i.start&&(e=ua(i.start),r&&r<=e&&(r=Ir(e,1))),{start:e,end:r}}function $c(i,t,e,r){return"year"===r?xt(e.diffWholeYears(i,t),"year"):"month"===r?xt(e.diffWholeMonths(i,t),"month"):function no(i,t){let e=ua(i),r=ua(t);return{years:0,months:0,days:Math.round(zr(e,r)),milliseconds:t.valueOf()-r.valueOf()-(i.valueOf()-e.valueOf())}}(i,t)}function du(i,t){return"function"==typeof i&&(i=i()),null==i?t.createNowMarker():t.createMarker(i)}class Xc{constructor(t){this.props=t,this.nowDate=du(t.nowInput,t.dateEnv),this.initHiddenDays()}buildPrev(t,e,r){let{dateEnv:s}=this.props,o=s.subtract(s.startOf(e,t.currentRangeUnit),t.dateIncrement);return this.build(o,-1,r)}buildNext(t,e,r){let{dateEnv:s}=this.props,o=s.add(s.startOf(e,t.currentRangeUnit),t.dateIncrement);return this.build(o,1,r)}build(t,e,r=!0){let o,f,g,A,P,z,{props:s}=this;return o=this.buildValidRange(),o=this.trimHiddenDays(o),r&&(t=function Nd(i,t){return null!=t.start&&i<t.start?t.start:null!=t.end&&i>=t.end?new Date(t.end.valueOf()-1):i}(t,o)),f=this.buildCurrentRangeInfo(t,e),g=/^(year|month|week|day)$/.test(f.unit),A=this.buildRenderRange(this.trimHiddenDays(f.range),f.unit,g),A=this.trimHiddenDays(A),P=A,s.showNonCurrentDates||(P=Fd(P,f.range)),P=this.adjustActiveRange(P),P=Fd(P,o),z=nc(f.range,o),Bd(A,t)||(t=A.start),{currentDate:t,validRange:o,currentRange:f.range,currentRangeUnit:f.unit,isRangeAllDay:g,activeRange:P,renderRange:A,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:z,dateIncrement:this.buildDateIncrement(f.duration)}}buildValidRange(){let t=this.props.validRangeInput,e="function"==typeof t?t.call(this.props.calendarApi,this.nowDate):t;return this.refineRange(e)||{start:null,end:null}}buildCurrentRangeInfo(t,e){let g,{props:r}=this,s=null,o=null,f=null;return r.duration?(s=r.duration,o=r.durationUnit,f=this.buildRangeFromDuration(t,e,s,o)):(g=this.props.dayCount)?(o="day",f=this.buildRangeFromDayCount(t,e,g)):(f=this.buildCustomVisibleRange(t))?o=r.dateEnv.greatestWholeUnit(f.start,f.end).unit:(s=this.getFallbackDuration(),o=Ln(s).unit,f=this.buildRangeFromDuration(t,e,s,o)),{duration:s,unit:o,range:f}}getFallbackDuration(){return xt({day:1})}adjustActiveRange(t){let{dateEnv:e,usesMinMaxTime:r,slotMinTime:s,slotMaxTime:o}=this.props,{start:f,end:g}=t;return r&&(Vi(s)<0&&(f=ua(f),f=e.add(f,s)),Vi(o)>1&&(g=ua(g),g=Ir(g,-1),g=e.add(g,o))),{start:f,end:g}}buildRangeFromDuration(t,e,r,s){let g,A,P,{dateEnv:o,dateAlignment:f}=this.props;if(!f){let{dateIncrement:ie}=this.props;f=ie&&on(ie)<on(r)?Ln(ie).unit:s}function z(){g=o.startOf(t,f),A=o.add(g,r),P={start:g,end:A}}return Vi(r)<=1&&this.isHiddenDay(g)&&(g=this.skipHiddenDays(g,e),g=ua(g)),z(),this.trimHiddenDays(P)||(t=this.skipHiddenDays(t,e),z()),P}buildRangeFromDayCount(t,e,r){let A,{dateEnv:s,dateAlignment:o}=this.props,f=0,g=t;o&&(g=s.startOf(g,o)),g=ua(g),g=this.skipHiddenDays(g,e),A=g;do{A=Ir(A,1),this.isHiddenDay(A)||(f+=1)}while(f<r);return{start:g,end:A}}buildCustomVisibleRange(t){let{props:e}=this,r=e.visibleRangeInput,s="function"==typeof r?r.call(e.calendarApi,e.dateEnv.toDate(t)):r,o=this.refineRange(s);return!o||null!=o.start&&null!=o.end?o:null}buildRenderRange(t,e,r){return t}buildDateIncrement(t){let r,{dateIncrement:e}=this.props;return e||((r=this.props.dateAlignment)?xt(1,r):t||xt({days:1}))}refineRange(t){if(t){let e=function Lm(i,t){let e=null,r=null;return i.start&&(e=t.createMarker(i.start)),i.end&&(r=t.createMarker(i.end)),!e&&!r||e&&r&&r<e?null:{start:e,end:r}}(t,this.props.dateEnv);return e&&(e=yf(e)),e}return null}initHiddenDays(){let s,t=this.props.hiddenDays||[],e=[],r=0;for(!1===this.props.weekends&&t.push(0,6),s=0;s<7;s+=1)(e[s]=-1!==t.indexOf(s))||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=e}trimHiddenDays(t){let{start:e,end:r}=t;return e&&(e=this.skipHiddenDays(e)),r&&(r=this.skipHiddenDays(r,-1,!0)),null==e||null==r||e<r?{start:e,end:r}:null}isHiddenDay(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]}skipHiddenDays(t,e=1,r=!1){for(;this.isHiddenDayHash[(t.getUTCDay()+(r?e:0)+7)%7];)t=Ir(t,e);return t}}function Pm(i,t,e,r){return{instanceId:_(),defId:i,range:t,forcedStartTzo:e??null,forcedEndTzo:r??null}}function Sc(i,t,e){let{dateEnv:r,pluginHooks:s,options:o}=e,{defs:f,instances:g}=i;g=Do(g,A=>!f[A.defId].recurringDef);for(let A in f){let P=f[A];if(P.recurringDef){let{duration:z}=P.recurringDef;z||(z=P.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);let ie=fp(P,z,t,r,s.recurringTypes);for(let se of ie){let oe=Pm(A,{start:se,end:r.add(se,z)});g[oe.instanceId]=oe}}}return{defs:f,instances:g}}function fp(i,t,e,r,s){let f=s[i.recurringDef.typeId].expand(i.recurringDef.typeData,{start:r.subtract(e.start,t),end:e.end},r);return i.allDay&&(f=f.map(ua)),f}const Fm={id:String,groupId:String,title:String,url:String,interactive:Boolean},pp={start:tn,end:tn,date:tn,allDay:Boolean},wv=Object.assign(Object.assign(Object.assign({},Fm),pp),{extendedProps:tn});function Kp(i,t,e,r,s=Wf(e),o,f){let{refined:g,extra:A}=Eg(i,e,s),P=function Nm(i,t){let e=null;return i&&(e=i.defaultAllDay),null==e&&(e=t.options.defaultAllDay),e}(t,e),z=function u0(i,t,e,r){for(let s=0;s<r.length;s+=1){let o=r[s].parse(i,e);if(o){let{allDay:f}=i;return null==f&&(f=t,null==f&&(f=o.allDayGuess,null==f&&(f=!1))),{allDay:f,duration:o.duration,typeData:o.typeData,typeId:s}}}return null}(g,P,e.dateEnv,e.pluginHooks.recurringTypes);if(z){let se=$f(g,A,t?t.sourceId:"",z.allDay,!!z.duration,e,o);return se.recurringDef={typeId:z.typeId,typeData:z.typeData,duration:z.duration},{def:se,instance:null}}let ie=function Bm(i,t,e,r){let o,A,{allDay:s}=i,f=null,g=!1,P=null;if(o=e.dateEnv.createMarkerMeta(null!=i.start?i.start:i.date),o)f=o.marker;else if(!r)return null;return null!=i.end&&(A=e.dateEnv.createMarkerMeta(i.end)),null==s&&(s=null!=t?t:(!o||o.isTimeUnspecified)&&(!A||A.isTimeUnspecified)),s&&f&&(f=ua(f)),A&&(P=A.marker,s&&(P=ua(P)),f&&P<=f&&(P=null)),P?g=!0:r||(g=e.options.forceEventDuration||!1,P=e.dateEnv.add(f,s?e.options.defaultAllDayEventDuration:e.options.defaultTimedEventDuration)),{allDay:s,hasEnd:g,range:{start:f,end:P},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:A?A.forcedTzo:null}}(g,P,e,r);if(ie){let se=$f(g,A,t?t.sourceId:"",ie.allDay,ie.hasEnd,e,o),oe=Pm(se.defId,ie.range,ie.forcedStartTzo,ie.forcedEndTzo);return f&&se.publicId&&f[se.publicId]&&(oe.instanceId=f[se.publicId]),{def:se,instance:oe}}return null}function Eg(i,t,e=Wf(t)){return Md(i,e)}function Wf(i){return Object.assign(Object.assign(Object.assign({},Zc),wv),i.pluginHooks.eventRefiners)}function $f(i,t,e,r,s,o,f){let g={title:i.title||"",groupId:i.groupId||"",publicId:i.id||"",url:i.url||"",recurringDef:null,defId:(f&&i.id?f[i.id]:"")||_(),sourceId:e,allDay:r,hasEnd:s,interactive:i.interactive,ui:ud(i,o),extendedProps:Object.assign(Object.assign({},i.extendedProps||{}),t)};for(let A of o.pluginHooks.eventDefMemberAdders)Object.assign(g,A(i));return Object.freeze(g.ui.classNames),Object.freeze(g.extendedProps),g}function mp(i,t,e,r,s,o){let f={defs:{},instances:{}},g=Wf(e);for(let A of i){let P=Kp(A,t,e,r,g,s,o);P&&gp(P,f)}return f}function gp(i,t={defs:{},instances:{}}){return t.defs[i.def.defId]=i.def,i.instance&&(t.instances[i.instance.instanceId]=i.instance),t}function Jp(i,t){let e=i.instances[t];if(e){let r=i.defs[e.defId],s=vp(i,o=>function h0(i,t){return!(!i.groupId||i.groupId!==t.groupId)}(r,o));return s.defs[r.defId]=r,s.instances[e.instanceId]=e,s}return{defs:{},instances:{}}}function Qp(i,t){return{defs:Object.assign(Object.assign({},i.defs),t.defs),instances:Object.assign(Object.assign({},i.instances),t.instances)}}function vp(i,t){let e=Do(i.defs,t),r=Do(i.instances,s=>e[s.defId]);return{defs:e,instances:r}}function f0(i){return Array.isArray(i)?i:"string"==typeof i?i.split(/\s+/):[]}const Zc={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:tn,overlap:tn,allow:tn,className:f0,classNames:f0,color:String,backgroundColor:String,borderColor:String,textColor:String},Xf={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function ud(i,t){let e=function kg(i,t){return Array.isArray(i)?mp(i,null,t,!0):"object"==typeof i&&i?mp([i],null,t,!0):null!=i?String(i):null}(i.constraint,t);return{display:i.display||null,startEditable:null!=i.startEditable?i.startEditable:i.editable,durationEditable:null!=i.durationEditable?i.durationEditable:i.editable,constraints:null!=e?[e]:[],overlap:null!=i.overlap?i.overlap:null,allows:null!=i.allow?[i.allow]:[],backgroundColor:i.backgroundColor||i.color||"",borderColor:i.borderColor||i.color||"",textColor:i.textColor||"",classNames:(i.className||[]).concat(i.classNames||[])}}function Ua(i){return i.reduce(p0,Xf)}function p0(i,t){return{display:null!=t.display?t.display:i.display,startEditable:null!=t.startEditable?t.startEditable:i.startEditable,durationEditable:null!=t.durationEditable?t.durationEditable:i.durationEditable,constraints:i.constraints.concat(t.constraints),overlap:"boolean"==typeof t.overlap?t.overlap:i.overlap,allows:i.allows.concat(t.allows),backgroundColor:t.backgroundColor||i.backgroundColor,borderColor:t.borderColor||i.borderColor,textColor:t.textColor||i.textColor,classNames:i.classNames.concat(t.classNames)}}const zd={id:String,defaultAllDay:Boolean,url:String,format:String,events:tn,eventDataTransform:tn,success:tn,failure:tn};function hd(i,t,e=$h(t)){let r;if("string"==typeof i?r={url:i}:"function"==typeof i||Array.isArray(i)?r={events:i}:"object"==typeof i&&i&&(r=i),r){let{refined:s,extra:o}=Md(r,e),f=function Sh(i,t){let e=t.pluginHooks.eventSourceDefs;for(let r=e.length-1;r>=0;r-=1){let o=e[r].parseMeta(i);if(o)return{sourceDefId:r,meta:o}}return null}(s,t);if(f)return{_raw:i,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:_(),sourceDefId:f.sourceDefId,meta:f.meta,ui:ud(s,t),extendedProps:o}}return null}function $h(i){return Object.assign(Object.assign(Object.assign({},Zc),zd),i.pluginHooks.eventSourceRefiners)}function m0(i,t,e){let r=e.options.eventDataTransform,s=t?t.eventDataTransform:null;return s&&(i=_p(i,s)),r&&(i=_p(i,r)),i}function _p(i,t){let e;if(t){e=[];for(let r of i){let s=t(r);s?e.push(s):null==s&&e.push(r)}}else e=i;return e}function Tg(i,t,e){let{defs:r}=i,s=ld(i.instances,o=>r[o.defId].allDay?o:Object.assign(Object.assign({},o),{range:{start:e.createMarker(t.toDate(o.range.start,o.forcedStartTzo)),end:e.createMarker(t.toDate(o.range.end,o.forcedEndTzo))},forcedStartTzo:e.canComputeOffset?null:o.forcedStartTzo,forcedEndTzo:e.canComputeOffset?null:o.forcedEndTzo}));return{defs:r,instances:s}}function zm(i,t){return vp(i,e=>e.sourceId!==t)}class Ym{constructor(){this.handlers={},this.thisContext=null}setThisContext(t){this.thisContext=t}setOptions(t){this.options=t}on(t,e){!function y_(i,t,e){(i[t]||(i[t]=[])).push(e)}(this.handlers,t,e)}off(t,e){!function xf(i,t,e){e?i[t]&&(i[t]=i[t].filter(r=>r!==e)):delete i[t]}(this.handlers,t,e)}trigger(t,...e){let o=[].concat(this.options&&this.options[t]||[],this.handlers[t]||[]);for(let f of o)f.apply(this.thisContext,e)}hasHandlers(t){return!!(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])}}const Fu={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Vm(i,t,e){e.emitter.trigger("select",Object.assign(Object.assign({},em(i,e)),{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view}))}function em(i,t){let e={};for(let r of t.pluginHooks.dateSpanTransforms)Object.assign(e,r(i,t));return Object.assign(e,function b_(i,t){return Object.assign(Object.assign({},S0(i.range,t,i.allDay)),{allDay:i.allDay})}(i,t.dateEnv)),e}function Ic(i,t,e){let{dateEnv:r,options:s}=e,o=t;return i?(o=ua(o),o=r.add(o,s.defaultAllDayEventDuration)):o=r.add(o,s.defaultTimedEventDuration),o}function _0(i,t,e,r){let s=im(i.defs,t),o={defs:{},instances:{}};for(let f in i.defs)o.defs[f]=y0(i.defs[f],s[f],e,r);for(let f in i.instances){let g=i.instances[f];o.instances[f]=ky(g,o.defs[g.defId],s[g.defId],e,r)}return o}function y0(i,t,e,r){let s=e.standardProps||{};null==s.hasEnd&&t.durationEditable&&(e.startDelta||e.endDelta)&&(s.hasEnd=!0);let o=Object.assign(Object.assign(Object.assign({},i),s),{ui:Object.assign(Object.assign({},i.ui),s.ui)});e.extendedProps&&(o.extendedProps=Object.assign(Object.assign({},o.extendedProps),e.extendedProps));for(let f of r.pluginHooks.eventDefMutationAppliers)f(o,e,r);return!o.hasEnd&&r.options.forceEventDuration&&(o.hasEnd=!0),o}function ky(i,t,e,r,s){let{dateEnv:o}=s,f=r.standardProps&&!0===r.standardProps.allDay,g=r.standardProps&&!1===r.standardProps.hasEnd,A=Object.assign({},i);return f&&(A.range=c0(A.range)),r.datesDelta&&e.startEditable&&(A.range={start:o.add(A.range.start,r.datesDelta),end:o.add(A.range.end,r.datesDelta)}),r.startDelta&&e.durationEditable&&(A.range={start:o.add(A.range.start,r.startDelta),end:A.range.end}),r.endDelta&&e.durationEditable&&(A.range={start:A.range.start,end:o.add(A.range.end,r.endDelta)}),g&&(A.range={start:A.range.start,end:Ic(t.allDay,A.range.start,s)}),t.allDay&&(A.range={start:ua(A.range.start),end:ua(A.range.end)}),A.range.end<A.range.start&&(A.range.end=Ic(t.allDay,A.range.start,s)),A}class bf{constructor(t,e){this.context=t,this.internalEventSource=e}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Lo{constructor(t,e,r){this._context=t,this._def=e,this._instance=r||null}setProp(t,e){if(t in pp)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===t)e=Fm[t](e),this.mutate({standardProps:{publicId:e}});else if(t in Fm)e=Fm[t](e),this.mutate({standardProps:{[t]:e}});else if(t in Zc){let r=Zc[t](e);r="color"===t?{backgroundColor:e,borderColor:e}:"editable"===t?{startEditable:e,durationEditable:e}:{[t]:e},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${t}'. Use setExtendedProp instead.`)}setExtendedProp(t,e){this.mutate({extendedProps:{[t]:e}})}setStart(t,e={}){let{dateEnv:r}=this._context,s=r.createMarker(t);if(s&&this._instance){let f=$c(this._instance.range.start,s,r,e.granularity);this.mutate(e.maintainDuration?{datesDelta:f}:{startDelta:f})}}setEnd(t,e={}){let s,{dateEnv:r}=this._context;if((null==t||(s=r.createMarker(t),s))&&this._instance)if(s){let o=$c(this._instance.range.end,s,r,e.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(t,e,r={}){let g,{dateEnv:s}=this._context,o={allDay:r.allDay},f=s.createMarker(t);if(f&&(null==e||(g=s.createMarker(e),g))&&this._instance){let A=this._instance.range;!0===r.allDay&&(A=c0(A));let P=$c(A.start,f,s,r.granularity);if(g){let z=$c(A.end,g,s,r.granularity);!function ai(i,t){return i.years===t.years&&i.months===t.months&&i.days===t.days&&i.milliseconds===t.milliseconds}(P,z)?this.mutate({startDelta:P,endDelta:z,standardProps:o}):this.mutate({datesDelta:P,standardProps:o})}else o.hasEnd=!1,this.mutate({datesDelta:P,standardProps:o})}}moveStart(t){let e=xt(t);e&&this.mutate({startDelta:e})}moveEnd(t){let e=xt(t);e&&this.mutate({endDelta:e})}moveDates(t){let e=xt(t);e&&this.mutate({datesDelta:e})}setAllDay(t,e={}){let r={allDay:t},{maintainDuration:s}=e;null==s&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(r.hasEnd=s),this.mutate({standardProps:r})}formatRange(t){let{dateEnv:e}=this._context,r=this._instance,s=So(t);return this._def.hasEnd?e.formatRange(r.range.start,r.range.end,s,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):e.format(r.range.start,s,{forcedTzo:r.forcedStartTzo})}mutate(t){let e=this._instance;if(e){let r=this._def,s=this._context,{eventStore:o}=s.getCurrentData(),f=Jp(o,e.instanceId);f=_0(f,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},t,s);let A=new Lo(s,r,e);this._def=f.defs[r.defId],this._instance=f.instances[e.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:f}),s.emitter.trigger("eventChange",{oldEvent:A,event:this,relatedEvents:Ah(f,s,e),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:o})}})}}remove(){let t=this._context,e=x0(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:e}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:e})}})}get source(){let{sourceId:t}=this._def;return t?new bf(this._context,this._context.getCurrentData().eventSources[t]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""}get endStr(){let t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(t={}){let e=this._def,{ui:r}=e,{startStr:s,endStr:o}=this,f={allDay:e.allDay};return e.title&&(f.title=e.title),s&&(f.start=s),o&&(f.end=o),e.publicId&&(f.id=e.publicId),e.groupId&&(f.groupId=e.groupId),e.url&&(f.url=e.url),r.display&&"auto"!==r.display&&(f.display=r.display),t.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?f.color=r.backgroundColor:(r.backgroundColor&&(f.backgroundColor=r.backgroundColor),r.borderColor&&(f.borderColor=r.borderColor)),r.textColor&&(f.textColor=r.textColor),r.classNames.length&&(f.classNames=r.classNames),Object.keys(e.extendedProps).length&&(t.collapseExtendedProps?Object.assign(f,e.extendedProps):f.extendedProps=e.extendedProps),f}toJSON(){return this.toPlainObject()}}function x0(i){let t=i._def,e=i._instance;return{defs:{[t.defId]:t},instances:e?{[e.instanceId]:e}:{}}}function Ah(i,t,e){let{defs:r,instances:s}=i,o=[],f=e?e.instanceId:"";for(let g in s){let A=s[g];A.instanceId!==f&&o.push(new Lo(t,r[A.defId],A))}return o}function tm(i,t,e,r){let s={},o={},f={},g=[],A=[],P=im(i.defs,t);for(let z in i.defs){let ie=i.defs[z];"inverse-background"===P[ie.defId].display&&(ie.groupId?(s[ie.groupId]=[],f[ie.groupId]||(f[ie.groupId]=ie)):o[z]=[])}for(let z in i.instances){let ie=i.instances[z],se=i.defs[ie.defId],oe=P[se.defId],_e=ie.range,he=!se.allDay&&r?yf(_e,r):_e,Ae=Fd(he,e);Ae&&("inverse-background"===oe.display?se.groupId?s[se.groupId].push(Ae):o[ie.defId].push(Ae):"none"!==oe.display&&("background"===oe.display?g:A).push({def:se,ui:oe,instance:ie,range:Ae,isStart:he.start&&he.start.valueOf()===Ae.start.valueOf(),isEnd:he.end&&he.end.valueOf()===Ae.end.valueOf()}))}for(let z in s){let se=jf(s[z],e);for(let oe of se){let _e=f[z];g.push({def:_e,ui:P[_e.defId],instance:null,range:oe,isStart:!1,isEnd:!1})}}for(let z in o){let se=jf(o[z],e);for(let oe of se)g.push({def:i.defs[z],ui:P[z],instance:null,range:oe,isStart:!1,isEnd:!1})}return{bg:g,fg:A}}function wf(i,t){i.fcSeg=t}function dd(i){return i.fcSeg||i.parentNode.fcSeg||null}function im(i,t){return ld(i,e=>b0(e,t))}function b0(i,t){let e=[];return t[""]&&e.push(t[""]),t[i.defId]&&e.push(t[i.defId]),e.push(i.ui),Ua(e)}function Sg(i,t){let e=i.map(kv);return e.sort((r,s)=>function ye(i,t,e){let r,s;for(r=0;r<e.length;r+=1)if(s=Fe(i,t,e[r]),s)return s;return 0}(r,s,t)),e.map(r=>r._seg)}function kv(i){let{eventRange:t}=i,e=t.def,r=t.instance?t.instance.range:t.range,s=r.start?r.start.valueOf():0,o=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},e.extendedProps),e),{id:e.publicId,start:s,end:o,duration:o-s,allDay:Number(e.allDay),_seg:i})}function w0(i,t){let{pluginHooks:e}=t,r=e.isDraggableTransformers,{def:s,ui:o}=i.eventRange,f=o.startEditable;for(let g of r)f=g(f,s,o,t);return f}function Tv(i,t){return i.isStart&&i.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function xp(i,t,e,r,s,o,f){let{dateEnv:g,options:A}=e,{displayEventTime:P,displayEventEnd:z}=A,ie=i.eventRange.def,se=i.eventRange.instance;null==P&&(P=!1!==r),null==z&&(z=!1!==s);let oe=se.range.start,_e=se.range.end,he=o||i.start||i.eventRange.range.start,Ae=f||i.end||i.eventRange.range.end,Ke=ua(oe).valueOf()===ua(he).valueOf(),ct=ua(xs(_e,-1)).valueOf()===ua(xs(Ae,-1)).valueOf();return P&&!ie.allDay&&(Ke||ct)?(he=Ke?oe:he,Ae=ct?_e:Ae,z&&ie.hasEnd?g.formatRange(he,Ae,t,{forcedStartTzo:o?null:se.forcedStartTzo,forcedEndTzo:f?null:se.forcedEndTzo}):g.format(he,t,{forcedTzo:o?null:se.forcedStartTzo})):""}function fd(i,t,e){let r=i.eventRange.range;return{isPast:r.end<=(e||t.start),isFuture:r.start>=(e||t.end),isToday:t&&Bd(t,r.start)}}function Sv(i){let t=["fc-event"];return i.isMirror&&t.push("fc-event-mirror"),i.isDraggable&&t.push("fc-event-draggable"),(i.isStartResizable||i.isEndResizable)&&t.push("fc-event-resizable"),i.isDragging&&t.push("fc-event-dragging"),i.isResizing&&t.push("fc-event-resizing"),i.isSelected&&t.push("fc-event-selected"),i.isStart&&t.push("fc-event-start"),i.isEnd&&t.push("fc-event-end"),i.isPast&&t.push("fc-event-past"),i.isToday&&t.push("fc-event-today"),i.isFuture&&t.push("fc-event-future"),t}function E0(i){return i.instance?i.instance.instanceId:`${i.def.defId}:${i.range.start.toISOString()}`}function Ag(i,t){let{def:e,instance:r}=i.eventRange,{url:s}=e;if(s)return{href:s};let{emitter:o,options:f}=t,{eventInteractive:g}=f;return null==g&&(g=e.interactive,null==g&&(g=!!o.hasHandlers("eventClick"))),g?k(A=>{o.trigger("eventClick",{el:A.target,event:new Lo(t,e,r),jsEvent:A,view:t.viewApi})}):{}}const k0={start:tn,end:tn,allDay:Boolean};function Um(i,t,e){return Object.assign(Object.assign({},S0(i,t,e)),{timeZone:t.timeZone})}function S0(i,t,e){return{start:t.toDate(i.start),end:t.toDate(i.end),startStr:t.formatIso(i.start,{omitTime:e}),endStr:t.formatIso(i.end,{omitTime:e})}}class rm extends Error{constructor(t,e){super(t),this.response=e}}let bp;function A0(){return null==bp&&(bp=function w_(){if(typeof document>"u")return!0;let i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.innerHTML="<table><tr><td><div></div></td></tr></table>",i.querySelector("table").style.height="100px",i.querySelector("div").style.height="100%",document.body.appendChild(i);let e=i.querySelector("div").offsetHeight>0;return document.body.removeChild(i),e}()),bp}class C_ extends da{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{hu(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{hu(()=>{this.setState({forPrint:!1})})}}render(){let{props:t}=this,{options:e}=t,{forPrint:r}=this.state,s=r||"auto"===e.height||"auto"===e.contentHeight,o=s||null==e.height?"":e.height,f=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${e.direction}`,t.theme.getClass("root")];return A0()||f.push("fc-liquid-hack"),t.children(f,o,s,r)}componentDidMount(){let{emitter:t}=this.props;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:t}=this.props;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)}}class wp{constructor(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}destroy(){}}function Cp(i){return{[i.component.uid]:i}}const I0={};class M0{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(t){this.currentDataManager.dispatch(t)}get view(){return this.getCurrentData().viewApi}batchRendering(t){t()}updateSize(){this.trigger("_resize",!0)}setOption(t,e){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:e})}getOption(t){return this.currentDataManager.currentCalendarOptionsInput[t]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(t,e){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[t]?r.emitter.on(t,e):console.warn(`Unknown listener name '${t}'`)}off(t,e){this.currentDataManager.emitter.off(t,e)}trigger(t,...e){this.currentDataManager.emitter.trigger(t,...e)}changeView(t,e){this.batchRendering(()=>{if(this.unselect(),e)if(e.start&&e.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:e});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:r.createMarker(e)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})}zoomTo(t,e){let s;s=this.getCurrentData().viewSpecs[e=e||"day"]||this.getUnitViewSpec(e),this.unselect(),this.dispatch(s?{type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:t}:{type:"CHANGE_DATE",dateMarker:t})}getUnitViewSpec(t){let o,f,{viewSpecs:e,toolbarConfig:r}=this.getCurrentData(),s=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]);for(let g in e)s.push(g);for(o=0;o<s.length;o+=1)if(f=e[s[o]],f&&f.singleUnit===t)return f;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})}nextYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})}today(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:du(t.calendarOptions.now,t.dateEnv)})}gotoDate(t){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.createMarker(t)})}incrementDate(t){let e=this.getCurrentData(),r=xt(t);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.add(e.currentDate,r)}))}getDate(){let t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)}formatDate(t,e){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(t),So(e))}formatRange(t,e,r){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(t),s.createMarker(e),So(r),r)}formatIso(t,e){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(t),{omitTime:e})}select(t,e){let r;r=null==e?null!=t.start?t:{start:t,end:null}:{start:t,end:e};let s=this.getCurrentData(),o=function Cf(i,t,e){let r=function Bu(i,t){let{refined:e,extra:r}=Md(i,k0),s=e.start?t.createMarkerMeta(e.start):null,o=e.end?t.createMarkerMeta(e.end):null,{allDay:f}=e;return null==f&&(f=s&&s.isTimeUnspecified&&(!o||o.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:o?o.marker:null},allDay:f},r)}(i,t),{range:s}=r;if(!s.start)return null;if(!s.end){if(null==e)return null;s.end=t.add(s.start,e)}return r}(r,s.dateEnv,xt({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),Vm(o,null,s))}unselect(t){let e=this.getCurrentData();e.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function Tl(i,t){t.emitter.trigger("unselect",{jsEvent:i?i.origEvent:null,view:t.viewApi||t.calendarApi.view})}(t,e))}addEvent(t,e){if(t instanceof Lo){let f=t._def,g=t._instance;return this.getCurrentData().eventStore.defs[f.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:gp({def:f,instance:g})}),this.triggerEventAdd(t)),t}let s,r=this.getCurrentData();if(e instanceof bf)s=e.internalEventSource;else if("boolean"==typeof e)e&&([s]=cd(r.eventSources));else if(null!=e){let f=this.getEventSourceById(e);if(!f)return console.warn(`Could not find an event source with ID "${e}"`),null;s=f.internalEventSource}let o=Kp(t,s,r,!1);if(o){let f=new Lo(r,o.def,o.def.recurringDef?null:o.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:gp(o)}),this.triggerEventAdd(f),f}return null}triggerEventAdd(t){let{emitter:e}=this.getCurrentData();e.trigger("eventAdd",{event:t,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:x0(t)})}})}getEventById(t){let e=this.getCurrentData(),{defs:r,instances:s}=e.eventStore;t=String(t);for(let o in r){let f=r[o];if(f.publicId===t){if(f.recurringDef)return new Lo(e,f,null);for(let g in s){let A=s[g];if(A.defId===f.defId)return new Lo(e,f,A)}}}return null}getEvents(){let t=this.getCurrentData();return Ah(t.eventStore,t)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let t=this.getCurrentData(),e=t.eventSources,r=[];for(let s in e)r.push(new bf(t,e[s]));return r}getEventSourceById(t){let e=this.getCurrentData(),r=e.eventSources;t=String(t);for(let s in r)if(r[s].publicId===t)return new bf(e,r[s]);return null}addEventSource(t){let e=this.getCurrentData();if(t instanceof bf)return e.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;let r=hd(t,e);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new bf(e,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(t){let e=xt(t);e&&this.trigger("_scrollRequest",{time:e})}}function E_(i,t){return i.left>=t.left&&i.left<t.right&&i.top>=t.top&&i.top<t.bottom}function Ep(i,t){let e={left:Math.max(i.left,t.left),right:Math.min(i.right,t.right),top:Math.max(i.top,t.top),bottom:Math.min(i.bottom,t.bottom)};return e.left<e.right&&e.top<e.bottom&&e}const Yd={defs:{},instances:{}};class Wm{constructor(){this.getKeysForEventDefs=Ur(this._getKeysForEventDefs),this.splitDateSelection=Ur(this._splitDateSpan),this.splitEventStore=Ur(this._splitEventStore),this.splitIndividualUi=Ur(this._splitIndividualUi),this.splitEventDrag=Ur(this._splitInteraction),this.splitEventResize=Ur(this._splitInteraction),this.eventUiBuilders={}}splitProps(t){let e=this.getKeyInfo(t),r=this.getKeysForEventDefs(t.eventStore),s=this.splitDateSelection(t.dateSelection),o=this.splitIndividualUi(t.eventUiBases,r),f=this.splitEventStore(t.eventStore,r),g=this.splitEventDrag(t.eventDrag),A=this.splitEventResize(t.eventResize),P={};this.eventUiBuilders=ld(e,(z,ie)=>this.eventUiBuilders[ie]||Ur(Gd));for(let z in e){let ie=e[z],se=f[z]||Yd;P[z]={businessHours:ie.businessHours||t.businessHours,dateSelection:s[z]||null,eventStore:se,eventUiBases:(0,this.eventUiBuilders[z])(t.eventUiBases[""],ie.ui,o[z]),eventSelection:se.instances[t.eventSelection]?t.eventSelection:"",eventDrag:g[z]||null,eventResize:A[z]||null}}return P}_splitDateSpan(t){let e={};if(t){let r=this.getKeysForDateSpan(t);for(let s of r)e[s]=t}return e}_getKeysForEventDefs(t){return ld(t.defs,e=>this.getKeysForEventDef(e))}_splitEventStore(t,e){let{defs:r,instances:s}=t,o={};for(let f in r)for(let g of e[f])o[g]||(o[g]={defs:{},instances:{}}),o[g].defs[f]=r[f];for(let f in s){let g=s[f];for(let A of e[g.defId])o[A]&&(o[A].instances[f]=g)}return o}_splitIndividualUi(t,e){let r={};for(let s in t)if(s)for(let o of e[s])r[o]||(r[o]={}),r[o][s]=t[s];return r}_splitInteraction(t){let e={};if(t){let r=this._splitEventStore(t.affectedEvents,this._getKeysForEventDefs(t.affectedEvents)),s=this._getKeysForEventDefs(t.mutatedEvents),o=this._splitEventStore(t.mutatedEvents,s),f=g=>{e[g]||(e[g]={affectedEvents:r[g]||Yd,mutatedEvents:o[g]||Yd,isEvent:t.isEvent})};for(let g in r)f(g);for(let g in o)f(g)}return e}}function Gd(i,t,e){let r=[];i&&r.push(i),t&&r.push(t);let s={"":Ua(r)};return e&&Object.assign(s,e),s}function Dg(i,t,e,r){return{dow:i.getUTCDay(),isDisabled:!(!r||Bd(r.activeRange,i)),isOther:!(!r||Bd(r.currentRange,i)),isToday:!(!t||!Bd(t,i)),isPast:!!(e?i<e:t&&i<t.start),isFuture:!!(e?i>e:t&&i>=t.end)}}function $m(i,t){let e=["fc-day",`fc-day-${ms[i.dow]}`];return i.isDisabled?e.push("fc-day-disabled"):(i.isToday&&(e.push("fc-day-today"),e.push(t.getClass("today"))),i.isPast&&e.push("fc-day-past"),i.isFuture&&e.push("fc-day-future"),i.isOther&&e.push("fc-day-other")),e}const R0=So({year:"numeric",month:"long",day:"numeric"}),Xm=So({week:"long"});function Hd(i,t,e="day",r=!0){const{dateEnv:s,options:o,calendarApi:f}=i;let g=s.format(t,"week"===e?Xm:R0);if(o.navLinks){let A=s.toDate(t);const P=z=>{let ie="day"===e?o.navLinkDayClick:"week"===e?o.navLinkWeekClick:null;"function"==typeof ie?ie.call(f,s.toDate(t),z):("string"==typeof ie&&(e=ie),f.zoomTo(t,e))};return Object.assign({title:ft(o.navLinkHint,[g,A],g),"data-navlink":""},r?mf(P):{onClick:P})}return{"aria-label":g}}let qf,Zm=null;function F0(i){return{x:i.offsetHeight-i.clientHeight,y:i.offsetWidth-i.clientWidth}}function B0(i,t=!1,e){let r=e?i.getBoundingClientRect():N0(i),s=function Av(i,t=!1){let e=window.getComputedStyle(i),r=parseInt(e.borderLeftWidth,10)||0,s=parseInt(e.borderRightWidth,10)||0,o=parseInt(e.borderTopWidth,10)||0,f=parseInt(e.borderBottomWidth,10)||0,g=F0(i),A=g.y-r-s,z={borderLeft:r,borderRight:s,borderTop:o,borderBottom:f,scrollbarBottom:g.x-o-f,scrollbarLeft:0,scrollbarRight:0};return function L0(){return null===Zm&&(Zm=function qm(){let i=document.createElement("div");Ed(i,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),i.innerHTML="<div></div>",document.body.appendChild(i);let e=i.firstChild.getBoundingClientRect().left>i.getBoundingClientRect().left;return kr(i),e}()),Zm}()&&"rtl"===e.direction?z.scrollbarLeft=A:z.scrollbarRight=A,t&&(z.paddingLeft=parseInt(e.paddingLeft,10)||0,z.paddingRight=parseInt(e.paddingRight,10)||0,z.paddingTop=parseInt(e.paddingTop,10)||0,z.paddingBottom=parseInt(e.paddingBottom,10)||0),z}(i,t),o={left:r.left+s.borderLeft+s.scrollbarLeft,right:r.right-s.borderRight-s.scrollbarRight,top:r.top+s.borderTop,bottom:r.bottom-s.borderBottom-s.scrollbarBottom};return t&&(o.left+=s.paddingLeft,o.right-=s.paddingRight,o.top+=s.paddingTop,o.bottom-=s.paddingBottom),o}function N0(i){let t=i.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset}}function k_(i){let t=[];for(;i instanceof HTMLElement;){let e=window.getComputedStyle(i);if("fixed"===e.position)break;/(auto|scroll)/.test(e.overflow+e.overflowY+e.overflowX)&&t.push(i),i=i.parentNode}return t}class om{constructor(t,e,r,s){this.els=e;let o=this.originClientRect=t.getBoundingClientRect();r&&this.buildElHorizontals(o.left),s&&this.buildElVerticals(o.top)}buildElHorizontals(t){let e=[],r=[];for(let s of this.els){let o=s.getBoundingClientRect();e.push(o.left-t),r.push(o.right-t)}this.lefts=e,this.rights=r}buildElVerticals(t){let e=[],r=[];for(let s of this.els){let o=s.getBoundingClientRect();e.push(o.top-t),r.push(o.bottom-t)}this.tops=e,this.bottoms=r}leftToIndex(t){let o,{lefts:e,rights:r}=this,s=e.length;for(o=0;o<s;o+=1)if(t>=e[o]&&t<r[o])return o}topToIndex(t){let o,{tops:e,bottoms:r}=this,s=e.length;for(o=0;o<s;o+=1)if(t>=e[o]&&t<r[o])return o}getWidth(t){return this.rights[t]-this.lefts[t]}getHeight(t){return this.bottoms[t]-this.tops[t]}similarTo(t){return Mg(this.tops||[],t.tops||[])&&Mg(this.bottoms||[],t.bottoms||[])&&Mg(this.lefts||[],t.lefts||[])&&Mg(this.rights||[],t.rights||[])}}function Mg(i,t){const e=i.length;if(e!==t.length)return!1;for(let r=0;r<e;r++)if(Math.round(i[r])!==Math.round(t[r]))return!1;return!0}class Km{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class Og extends Km{constructor(t){super(),this.el=t}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(t){this.el.scrollTop=t}setScrollLeft(t){this.el.scrollLeft=t}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Kf extends Km{getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}setScrollTop(t){window.scroll(window.pageXOffset,t)}setScrollLeft(t){window.scroll(t,window.pageYOffset)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Nu extends da{constructor(){super(...arguments),this.uid=_()}prepareHits(){}queryHit(t,e,r,s){return null}isValidSegDownEl(t){return!this.props.eventDrag&&!this.props.eventResize&&!ec(t,".fc-event-mirror")}isValidDateDownEl(t){return!(ec(t,".fc-event:not(.fc-bg-event)")||ec(t,".fc-more-link")||ec(t,"a[data-navlink]")||ec(t,".fc-popover"))}}class z0{constructor(t=(e=>e.thickness||1)){this.getEntryThickness=t,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(t){let e=[];for(let r of t)this.insertEntry(r,e);return e}insertEntry(t,e){let r=this.findInsertion(t);this.isInsertionValid(r,t)?this.insertEntryAt(t,r):this.handleInvalidInsertion(r,t,e)}isInsertionValid(t,e){return(-1===this.maxCoord||t.levelCoord+this.getEntryThickness(e)<=this.maxCoord)&&(-1===this.maxStackCnt||t.stackCnt<this.maxStackCnt)}handleInvalidInsertion(t,e,r){if(this.allowReslicing&&t.touchingEntry){const s=Object.assign(Object.assign({},e),{span:S(e.span,t.touchingEntry.span)});r.push(s),this.splitEntry(e,t.touchingEntry,r)}else r.push(e)}splitEntry(t,e,r){let s=t.span,o=e.span;s.start<o.start&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:s.start,end:o.start}},r),s.end>o.end&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:o.end,end:s.end}},r)}insertEntryAt(t,e){let{entriesByLevel:r,levelCoords:s}=this;-1===e.lateral?(X(s,e.level,e.levelCoord),X(r,e.level,[t])):X(r[e.level],e.lateral,t),this.stackCnts[Ef(t)]=e.stackCnt}findInsertion(t){let{levelCoords:e,entriesByLevel:r,strictOrder:s,stackCnts:o}=this,f=e.length,g=0,A=-1,P=-1,z=null,ie=0;for(let _e=0;_e<f;_e+=1){const he=e[_e];if(!s&&he>=g+this.getEntryThickness(t))break;let Ke,Ae=r[_e],ct=te(Ae,t.span.start,Qm),pt=ct[0]+ct[1];for(;(Ke=Ae[pt])&&Ke.span.start<t.span.end;){let mi=he+this.getEntryThickness(Ke);mi>g&&(g=mi,z=Ke,A=_e,P=pt),mi===g&&(ie=Math.max(ie,o[Ef(Ke)]+1)),pt+=1}}let se=0;if(z)for(se=A+1;se<f&&e[se]<g;)se+=1;let oe=-1;return se<f&&e[se]===g&&(oe=te(r[se],t.span.end,Qm)[0]),{touchingLevel:A,touchingLateral:P,touchingEntry:z,stackCnt:ie,levelCoord:g,level:se,lateral:oe}}toRects(){let{entriesByLevel:t,levelCoords:e}=this,r=t.length,s=[];for(let o=0;o<r;o+=1){let f=t[o],g=e[o];for(let A of f)s.push(Object.assign(Object.assign({},A),{thickness:this.getEntryThickness(A),levelCoord:g}))}return s}}function Qm(i){return i.span.end}function Ef(i){return i.index+":"+i.span.start}function N(i,t){return{start:Math.min(i.start,t.start),end:Math.max(i.end,t.end)}}function S(i,t){let e=Math.max(i.start,t.start),r=Math.min(i.end,t.end);return e<r?{start:e,end:r}:null}function X(i,t,e){i.splice(t,0,e)}function te(i,t,e){let r=0,s=i.length;if(!s||t<e(i[r]))return[0,0];if(t>e(i[s-1]))return[s,0];for(;r<s;){let o=Math.floor(r+(s-r)/2),f=e(i[o]);if(t<f)s=o;else{if(!(t>f))return[o,1];r=o+1}}return[r,0]}class Me{constructor(t,e){this.emitter=new Ym}destroy(){}setMirrorIsVisible(t){}setMirrorNeedsRevert(t){}setAutoScrollEnabled(t){}}const Lt={};Boolean;const co="fc-col-header-cell";function el(i){return i.text}class qc extends da{render(){let{dateEnv:t,options:e,theme:r,viewApi:s}=this.context,{props:o}=this,{date:f,dateProfile:g}=o,A=Dg(f,o.todayRange,null,g),P=[co].concat($m(A,r)),z=t.format(f,o.dayHeaderFormat),ie=!A.isDisabled&&o.colCnt>1?Hd(this.context,f):{},se=Object.assign(Object.assign(Object.assign({date:t.toDate(f),view:s},o.extraRenderProps),{text:z}),A);return Ut(Tc,{elTag:"th",elClasses:P,elAttrs:Object.assign({role:"columnheader",colSpan:o.colSpan,"data-date":A.isDisabled?void 0:Ou(f)},o.extraDataAttrs),renderProps:se,generatorName:"dayHeaderContent",customGenerator:e.dayHeaderContent,defaultGenerator:el,classNameGenerator:e.dayHeaderClassNames,didMount:e.dayHeaderDidMount,willUnmount:e.dayHeaderWillUnmount},oe=>Ut("div",{className:"fc-scrollgrid-sync-inner"},!A.isDisabled&&Ut(oe,{elTag:"a",elAttrs:ie,elClasses:["fc-col-header-cell-cushion",o.isSticky&&"fc-sticky"]})))}}const kp=So({weekday:"long"});class Dv extends da{render(){let{props:t}=this,{dateEnv:e,theme:r,viewApi:s,options:o}=this.context,f=Ir(new Date(2592e5),t.dow),g={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},A=e.format(f,t.dayHeaderFormat),P=Object.assign(Object.assign(Object.assign(Object.assign({date:f},g),{view:s}),t.extraRenderProps),{text:A});return Ut(Tc,{elTag:"th",elClasses:[co,...$m(g,r),...t.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:t.colSpan},t.extraDataAttrs),renderProps:P,generatorName:"dayHeaderContent",customGenerator:o.dayHeaderContent,defaultGenerator:el,classNameGenerator:o.dayHeaderClassNames,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},z=>Ut("div",{className:"fc-scrollgrid-sync-inner"},Ut(z,{elTag:"a",elClasses:["fc-col-header-cell-cushion",t.isSticky&&"fc-sticky"],elAttrs:{"aria-label":e.format(f,kp)}})))}}let eg=(()=>{class i extends ll{constructor(e,r){super(e,r),this.initialNowDate=du(r.options.now,r.dateEnv),this.initialNowQueriedMs=(new Date).valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:r}=this;return e.children(r.nowDate,r.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:r}=this,s=xs(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),o=r.dateEnv.startOf(s,e.unit),f=r.dateEnv.add(o,xt(1,e.unit)),g=f.valueOf()-s.valueOf();return g=Math.min(864e5,g),{currentState:{nowDate:o,todayRange:Xh(o)},nextState:{nowDate:f,todayRange:Xh(f)},waitMs:g}}setTimeout(){let{nextState:e,waitMs:r}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},r)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}return i.contextType=Th,i})();function Xh(i){let t=ua(i);return{start:t,end:Ir(t,1)}}class Zh extends da{constructor(){super(...arguments),this.createDayHeaderFormatter=Ur(Rg)}render(){let{context:t}=this,{dates:e,dateProfile:r,datesRepDistinctDays:s,renderIntro:o}=this.props,f=this.createDayHeaderFormatter(t.options.dayHeaderFormat,s,e.length);return Ut(eg,{unit:"day"},(g,A)=>Ut("tr",{role:"row"},o&&o("day"),e.map(P=>s?Ut(qc,{key:P.toISOString(),date:P,dateProfile:r,todayRange:A,colCnt:e.length,dayHeaderFormat:f}):Ut(Dv,{key:P.getUTCDay(),dow:P.getUTCDay(),dayHeaderFormat:f}))))}}function Rg(i,t,e){return i||function Oa(i,t){return So(!i||t>10?{weekday:"short"}:t>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(t,e)}class T_{constructor(t,e){let r=t.start,{end:s}=t,o=[],f=[],g=-1;for(;r<s;)e.isHiddenDay(r)?o.push(g+.5):(g+=1,o.push(g),f.push(r)),r=Ir(r,1);this.dates=f,this.indices=o,this.cnt=f.length}sliceRange(t){let e=this.getDateDayIndex(t.start),r=this.getDateDayIndex(Ir(t.end,-1)),s=Math.max(0,e),o=Math.min(this.cnt-1,r);return s=Math.ceil(s),o=Math.floor(o),s<=o?{firstIndex:s,lastIndex:o,isStart:e===s,isEnd:r===o}:null}getDateDayIndex(t){let{indices:e}=this,r=Math.floor(zr(this.dates[0],t));return r<0?e[0]-1:r>=e.length?e[e.length-1]+1:e[r]}}class S_{constructor(t,e){let s,o,f,{dates:r}=t;if(e){for(o=r[0].getUTCDay(),s=1;s<r.length&&r[s].getUTCDay()!==o;s+=1);f=Math.ceil(r.length/s)}else f=1,s=r.length;this.rowCnt=f,this.colCnt=s,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let t=[];for(let e=0;e<this.rowCnt;e+=1){let r=[];for(let s=0;s<this.colCnt;s+=1)r.push(this.buildCell(e,s));t.push(r)}return t}buildCell(t,e){let r=this.daySeries.dates[t*this.colCnt+e];return{key:r.toISOString(),date:r}}buildHeaderDates(){let t=[];for(let e=0;e<this.colCnt;e+=1)t.push(this.cells[0][e].date);return t}sliceRange(t){let{colCnt:e}=this,r=this.daySeries.sliceRange(t),s=[];if(r){let{firstIndex:o,lastIndex:f}=r,g=o;for(;g<=f;){let A=Math.floor(g/e),P=Math.min((A+1)*e,f+1);s.push({row:A,firstCol:g%e,lastCol:(P-1)%e,isStart:r.isStart&&g===o,isEnd:r.isEnd&&P-1===f}),g=P}}return s}}class A_{constructor(){this.sliceBusinessHours=Ur(this._sliceBusinessHours),this.sliceDateSelection=Ur(this._sliceDateSpan),this.sliceEventStore=Ur(this._sliceEventStore),this.sliceEventDrag=Ur(this._sliceInteraction),this.sliceEventResize=Ur(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(t,e,r,s,...o){let{eventUiBases:f}=t,g=this.sliceEventStore(t.eventStore,f,e,r,...o);return{dateSelectionSegs:this.sliceDateSelection(t.dateSelection,e,r,f,s,...o),businessHourSegs:this.sliceBusinessHours(t.businessHours,e,r,s,...o),fgEventSegs:g.fg,bgEventSegs:g.bg,eventDrag:this.sliceEventDrag(t.eventDrag,f,e,r,...o),eventResize:this.sliceEventResize(t.eventResize,f,e,r,...o),eventSelection:t.eventSelection}}sliceNowDate(t,e,r,s,...o){return this._sliceDateSpan({range:{start:t,end:xs(t,1)},allDay:!1},e,r,{},s,...o)}_sliceBusinessHours(t,e,r,s,...o){return t?this._sliceEventStore(Sc(t,Iv(e,!!r),s),{},e,r,...o).bg:[]}_sliceEventStore(t,e,r,s,...o){if(t){let f=tm(t,e,Iv(r,!!s),s);return{bg:this.sliceEventRanges(f.bg,o),fg:this.sliceEventRanges(f.fg,o)}}return{bg:[],fg:[]}}_sliceInteraction(t,e,r,s,...o){if(!t)return null;let f=tm(t.mutatedEvents,e,Iv(r,!!s),s);return{segs:this.sliceEventRanges(f.fg,o),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}}_sliceDateSpan(t,e,r,s,o,...f){if(!t)return[];let g=Iv(e,!!r),A=Fd(t.range,g);if(A){let P=function jm(i,t,e){let r=Eg({editable:!1},e),s=$f(r.refined,r.extra,"",i.allDay,!0,e);return{def:s,ui:b0(s,t),instance:Pm(s.defId,i.range),range:i.range,isStart:!0,isEnd:!0}}(t=Object.assign(Object.assign({},t),{range:A}),s,o),z=this.sliceRange(t.range,...f);for(let ie of z)ie.eventRange=P;return z}return[]}sliceEventRanges(t,e){let r=[];for(let s of t)r.push(...this.sliceEventRange(s,e));return r}sliceEventRange(t,e){let r=t.range;this.forceDayIfListItem&&"list-item"===t.ui.display&&(r={start:r.start,end:Ir(r.start,1)});let s=this.sliceRange(r,...e);for(let o of s)o.eventRange=t,o.isStart=t.isStart&&o.isStart,o.isEnd=t.isEnd&&o.isEnd;return s}}function Iv(i,t){let e=i.activeRange;return t?e:{start:xs(e.start,i.slotMinTime.milliseconds),end:xs(e.end,i.slotMaxTime.milliseconds-864e5)}}function Ay(i,t,e){let{instances:r}=i.mutatedEvents;for(let s in r)if(!kl(t.validRange,r[s].range))return!1;return Dh({eventDrag:i},e)}function Dh(i,t){let e=t.getCurrentData(),r=Object.assign({businessHours:e.businessHours,dateSelection:"",eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},i);return(t.pluginHooks.isPropsValid||Iy)(r,t)}function Iy(i,t,e={},r){return!(i.eventDrag&&!function Qu(i,t,e,r){let s=t.getCurrentData(),o=i.eventDrag,f=o.mutatedEvents,g=f.defs,A=f.instances,P=im(g,o.isEvent?i.eventUiBases:{"":s.selectionConfig});r&&(P=ld(P,r));let z=function Ev(i,t){return{defs:i.defs,instances:Do(i.instances,e=>!t[e.instanceId])}}(i.eventStore,o.affectedEvents.instances),ie=z.defs,se=z.instances,oe=im(ie,i.eventUiBases);for(let _e in A){let he=A[_e],Ae=he.range,Ke=P[he.defId],ct=g[he.defId];if(!Xs(Ke.constraints,Ae,z,i.businessHours,t))return!1;let{eventOverlap:pt}=t.options,mi="function"==typeof pt?pt:null;for(let Ki in se){let ni=se[Ki];if(nc(Ae,ni.range)&&(!1===oe[ni.defId].overlap&&o.isEvent||!1===Ke.overlap||mi&&!mi(new Lo(t,ie[ni.defId],ni),new Lo(t,ct,he))))return!1}let Fi=s.eventStore;for(let Ki of Ke.allows){let Cn,ni=Object.assign(Object.assign({},e),{range:he.range,allDay:ct.allDay}),Ti=Fi.defs[ct.defId];if(Cn=Ti?new Lo(t,Ti,Fi.instances[_e]):new Lo(t,ct),!Ki(em(ni,t),Cn))return!1}}return!0}(i,t,e,r)||i.dateSelection&&!function kf(i,t,e,r){let s=i.eventStore,o=s.defs,f=s.instances,g=i.dateSelection,A=g.range,{selectionConfig:P}=t.getCurrentData();if(r&&(P=r(P)),!Xs(P.constraints,A,s,i.businessHours,t))return!1;let{selectOverlap:z}=t.options,ie="function"==typeof z?z:null;for(let se in f){let oe=f[se];if(nc(A,oe.range)&&(!1===P.overlap||ie&&!ie(new Lo(t,o[oe.defId],oe),null)))return!1}for(let se of P.allows)if(!se(em(Object.assign(Object.assign({},e),g),t),null))return!1;return!0}(i,t,e,r))}function Xs(i,t,e,r,s){for(let o of i)if(!Hl(Y0(o,t,e,r,s),t))return!1;return!0}function Y0(i,t,e,r,s){return"businessHours"===i?zu(Sc(r,t,s)):"string"==typeof i?zu(vp(e,o=>o.groupId===i)):"object"==typeof i&&i?zu(Sc(i,t,s)):[]}function zu(i){let{instances:t}=i,e=[];for(let r in t)e.push(t[r].range);return e}function Hl(i,t){for(let e of i)if(kl(e,t))return!0;return!1}const Mv=/^(visible|hidden)$/;class Tp extends da{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,vf(this.props.elRef,t)}}render(){let{props:t}=this,{liquid:e,liquidIsAbsolute:r}=t,s=e&&r,o=["fc-scroller"];return e&&o.push(r?"fc-scroller-liquid-absolute":"fc-scroller-liquid"),Ut("div",{ref:this.handleEl,className:o.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:s&&-(t.overcomeLeft||0)||"",right:s&&-(t.overcomeRight||0)||"",bottom:s&&-(t.overcomeBottom||0)||"",marginLeft:!s&&-(t.overcomeLeft||0)||"",marginRight:!s&&-(t.overcomeRight||0)||"",marginBottom:!s&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)}needsXScrolling(){if(Mv.test(this.props.overflowX))return!1;let{el:t}=this,e=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=t;for(let s=0;s<r.length;s+=1)if(r[s].getBoundingClientRect().width>e)return!0;return!1}needsYScrolling(){if(Mv.test(this.props.overflowY))return!1;let{el:t}=this,e=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=t;for(let s=0;s<r.length;s+=1)if(r[s].getBoundingClientRect().height>e)return!0;return!1}getXScrollbarWidth(){return Mv.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Mv.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Sp{constructor(t){this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(e,r)=>{let{depths:s,currentMap:o}=this,f=!1,g=!1;null!==e?(f=r in o,o[r]=e,s[r]=(s[r]||0)+1,g=!0):(s[r]-=1,s[r]||(delete o[r],delete this.callbackMap[r],f=!0)),this.masterCallback&&(f&&this.masterCallback(null,String(r)),g&&this.masterCallback(e,String(r)))}}createRef(t){let e=this.callbackMap[t];return e||(e=this.callbackMap[t]=r=>{this.handleValue(r,String(t))}),e}collect(t,e,r){return function Vf(i,t=0,e,r=1){let s=[];null==e&&(e=Object.keys(i).length);for(let o=t;o<e;o+=r){let f=i[o];void 0!==f&&s.push(f)}return s}(this.currentMap,t,e,r)}getAll(){return cd(this.currentMap)}}function My(i,t){return i.liquid&&t.liquid}function D_(i,t){return Rr(i,t,$o)}function Oy(i,t){let e=[];for(let r of i){let s=r.span||1;for(let o=0;o<s;o+=1)e.push(Ut("col",{style:{width:"shrink"===r.width?Jf(t):r.width||"",minWidth:r.minWidth||""}}))}return Ut("colgroup",{},...e)}function Jf(i){return i??4}function Sl(i,t){let e=["fc-scrollgrid-section",`fc-scrollgrid-section-${i.type}`,i.className];return t&&i.liquid&&null==i.maxHeight&&e.push("fc-scrollgrid-section-liquid"),i.isSticky&&e.push("fc-scrollgrid-section-sticky"),e}function ml(i){return Ut("div",{className:"fc-scrollgrid-sticky-shim",style:{width:i.clientWidth,minWidth:i.tableMinWidth}})}function G0(i){let{stickyHeaderDates:t}=i;return(null==t||"auto"===t)&&(t="auto"===i.height||"auto"===i.viewHeight),t}function Ry(i){let{stickyFooterScrollbar:t}=i;return(null==t||"auto"===t)&&(t="auto"===i.height||"auto"===i.viewHeight),t}class Lv extends da{constructor(){super(...arguments),this.processCols=Ur(t=>t,D_),this.renderMicroColGroup=Ur(Oy),this.scrollerRefs=new Sp,this.scrollerElRefs=new Sp(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:t,state:e,context:r}=this,s=t.sections||[],o=this.processCols(t.cols),f=this.renderMicroColGroup(o,e.shrinkWidth),g=function Rv(i,t){let e=["fc-scrollgrid",t.theme.getClass("table")];return i&&e.push("fc-scrollgrid-liquid"),e}(t.liquid,r);t.collapsibleWidth&&g.push("fc-scrollgrid-collapsible");let z,A=s.length,P=0,ie=[],se=[],oe=[];for(;P<A&&"header"===(z=s[P]).type;)ie.push(this.renderSection(z,f,!0)),P+=1;for(;P<A&&"body"===(z=s[P]).type;)se.push(this.renderSection(z,f,!1)),P+=1;for(;P<A&&"footer"===(z=s[P]).type;)oe.push(this.renderSection(z,f,!0)),P+=1;let _e=!A0();const he={role:"rowgroup"};return Ut("table",{role:"grid",className:g.join(" "),style:{height:t.height}},!(_e||!ie.length)&&Ut("thead",he,...ie),!(_e||!se.length)&&Ut("tbody",he,...se),!(_e||!oe.length)&&Ut("tfoot",he,...oe),_e&&Ut("tbody",he,...ie,...se,...oe))}renderSection(t,e,r){return"outerContent"in t?Ut(Aa,{key:t.key},t.outerContent):Ut("tr",{key:t.key,role:"presentation",className:Sl(t,this.props.liquid).join(" ")},this.renderChunkTd(t,e,t.chunk,r))}renderChunkTd(t,e,r,s){if("outerContent"in r)return r.outerContent;let{props:o}=this,{forceYScrollbars:f,scrollerClientWidths:g,scrollerClientHeights:A}=this.state,P=function Q1(i,t){return null!=t.maxHeight||My(i,t)}(o,t),z=My(o,t),ie=o.liquid?f?"scroll":P?"auto":"hidden":"visible",se=t.key,oe=function Ov(i,t,e,r){let{expandRows:s}=e;return"function"==typeof t.content?t.content(e):Ut("table",{role:"presentation",className:[t.tableClassName,i.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:s?e.clientHeight:""}},e.tableColGroupNode,Ut(r?"thead":"tbody",{role:"presentation"},"function"==typeof t.rowContent?t.rowContent(e):t.rowContent))}(t,r,{tableColGroupNode:e,tableMinWidth:"",clientWidth:o.collapsibleWidth||void 0===g[se]?null:g[se],clientHeight:void 0!==A[se]?A[se]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return Ut(s?"th":"td",{ref:r.elRef,role:"presentation"},Ut("div",{className:"fc-scroller-harness"+(z?" fc-scroller-harness-liquid":"")},Ut(Tp,{ref:this.scrollerRefs.createRef(se),elRef:this.scrollerElRefs.createRef(se),overflowY:ie,overflowX:o.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:z,liquidIsAbsolute:!0},oe)))}_handleScrollerEl(t,e){let r=function ex(i,t){for(let e of i)if(e.key===t)return e;return null}(this.props.sections,e);r&&vf(r.chunk.scrollerElRef,t)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return function I_(i){for(let t of i)if("shrink"===t.width)return!0;return!1}(this.props.cols)?function J1(i){let t=function pf(i,t){let e=i instanceof HTMLElement?[i]:i,r=[];for(let s=0;s<e.length;s+=1){let o=e[s].querySelectorAll(t);for(let f=0;f<o.length;f+=1)r.push(o[f])}return r}(i,".fc-scrollgrid-shrink"),e=0;for(let r of t)e=Math.max(e,Ye(r));return Math.ceil(e)}(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let t=function Ig(){return qf||(qf=function P0(){let i=document.createElement("div");i.style.overflow="scroll",i.style.position="absolute",i.style.top="-9999px",i.style.left="-9999px",document.body.appendChild(i);let t=F0(i);return document.body.removeChild(i),t}()),qf}(),{scrollerRefs:e,scrollerElRefs:r}=this,s=!1,o={},f={};for(let g in e.currentMap){let A=e.currentMap[g];if(A&&A.needsYScrolling()){s=!0;break}}for(let g of this.props.sections){let A=g.key,P=r.currentMap[A];if(P){let z=P.parentNode;o[A]=Math.floor(z.getBoundingClientRect().width-(s?t.y:0)),f[A]=Math.floor(z.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:o,scrollerClientHeights:f}}}Lv.addStateEquality({scrollerClientWidths:$o,scrollerClientHeights:$o});class Vl extends da{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,t&&wf(t,this.props.seg)}}render(){const{props:t,context:e}=this,{options:r}=e,{seg:s}=t,{eventRange:o}=s,{ui:f}=o,g={event:new Lo(e,o.def,o.instance),view:e.viewApi,timeText:t.timeText,textColor:f.textColor,backgroundColor:f.backgroundColor,borderColor:f.borderColor,isDraggable:!t.disableDragging&&w0(s,e),isStartResizable:!t.disableResizing&&Tv(s,e),isEndResizable:!t.disableResizing&&(i=s,i.isEnd&&i.eventRange.ui.durationEditable),isMirror:!!(t.isDragging||t.isResizing||t.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!t.isPast,isFuture:!!t.isFuture,isToday:!!t.isToday,isSelected:!!t.isSelected,isDragging:!!t.isDragging,isResizing:!!t.isResizing};var i;return Ut(Tc,Object.assign({},t,{elRef:this.handleEl,elClasses:[...Sv(g),...s.eventRange.ui.classNames,...t.elClasses||[]],renderProps:g,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:t.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount}))}componentDidUpdate(t){this.el&&this.props.seg!==t.seg&&wf(this.el,this.props.seg)}}class Vd extends da{render(){let{props:t,context:e}=this,{options:r}=e,{seg:s}=t,{ui:o}=s.eventRange,g=xp(s,r.eventTimeFormat||t.defaultTimeFormat,e,t.defaultDisplayEventTime,t.defaultDisplayEventEnd);return Ut(Vl,Object.assign({},t,{elTag:"a",elStyle:{borderColor:o.borderColor,backgroundColor:o.backgroundColor},elAttrs:Ag(s,e),defaultGenerator:M_,timeText:g}),(A,P)=>Ut(Aa,null,Ut(A,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:P.textColor}}),!!P.isStartResizable&&Ut("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!P.isEndResizable&&Ut("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function M_(i){return Ut("div",{className:"fc-event-main-frame"},i.timeText&&Ut("div",{className:"fc-event-time"},i.timeText),Ut("div",{className:"fc-event-title-container"},Ut("div",{className:"fc-event-title fc-sticky"},i.event.title||Ut(Aa,null,"\xa0"))))}const tg=i=>Ut(Th.Consumer,null,t=>{let{options:e}=t,r={isAxis:i.isAxis,date:t.dateEnv.toDate(i.date),view:t.viewApi};return Ut(Tc,Object.assign({},i,{elTag:i.elTag||"div",renderProps:r,generatorName:"nowIndicatorContent",customGenerator:e.nowIndicatorContent,classNameGenerator:e.nowIndicatorClassNames,didMount:e.nowIndicatorDidMount,willUnmount:e.nowIndicatorWillUnmount}))}),Qf=So({day:"numeric"});class H0 extends da{constructor(){super(...arguments),this.refineRenderProps=ha(Lg)}render(){let{props:t,context:e}=this,{options:r}=e,s=this.refineRenderProps({date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,isMonthStart:t.isMonthStart||!1,showDayNumber:t.showDayNumber,extraRenderProps:t.extraRenderProps,viewApi:e.viewApi,dateEnv:e.dateEnv,monthStartFormat:r.monthStartFormat});return Ut(Tc,Object.assign({},t,{elClasses:[...$m(s,e.theme),...t.elClasses||[]],elAttrs:Object.assign(Object.assign({},t.elAttrs),s.isDisabled?{}:{"data-date":Ou(t.date)}),renderProps:s,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:t.defaultGenerator,classNameGenerator:s.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount}))}}function O_(i){return!(!i.dayCellContent&&!bg("dayCellContent",i))}function Lg(i){let{date:t,dateEnv:e,dateProfile:r,isMonthStart:s}=i,o=Dg(t,i.todayRange,null,r),f=i.showDayNumber?e.format(t,s?i.monthStartFormat:Qf):"";return Object.assign(Object.assign(Object.assign({date:e.toDate(t),view:i.viewApi},o),{isMonthStart:s,dayNumberText:f}),i.extraRenderProps)}class V0 extends da{render(){let{props:t}=this,{seg:e}=t;return Ut(Vl,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:e.eventRange.ui.backgroundColor},defaultGenerator:pd,seg:e,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:t.isPast,isFuture:t.isFuture,isToday:t.isToday,disableDragging:!0,disableResizing:!0})}}function pd(i){let{title:t}=i.event;return t&&Ut("div",{className:"fc-event-title"},i.event.title)}function lm(i){return Ut("div",{className:`fc-${i}`})}const R_=i=>Ut(Th.Consumer,null,t=>{let{dateEnv:e,options:r}=t,{date:s}=i,o=r.weekNumberFormat||i.defaultFormat,f=e.computeWeekNumber(s),g=e.format(s,o);return Ut(Tc,Object.assign({},i,{renderProps:{num:f,text:g,date:s},generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:Ly,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount}))});function Ly(i){return i.text}class L_ extends da{constructor(){super(...arguments),this.state={titleId:ad()},this.handleRootEl=t=>{this.rootEl=t,this.props.elRef&&vf(this.props.elRef,t)},this.handleDocumentMouseDown=t=>{const e=kd(t);this.rootEl.contains(e)||this.handleCloseClick()},this.handleDocumentKeyDown=t=>{"Escape"===t.key&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:t}=this.props;t&&t()}}render(){let{theme:t,options:e}=this.context,{props:r,state:s}=this,o=["fc-popover",t.getClass("popover")].concat(r.extraClassNames||[]);return function fe(i,t){var e=Ut(Z,{__v:i,i:t});return e.containerInfo=t,e}(Ut("div",Object.assign({},r.extraAttrs,{id:r.id,className:o.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),Ut("div",{className:"fc-popover-header "+t.getClass("popoverHeader")},Ut("span",{className:"fc-popover-title",id:s.titleId},r.title),Ut("span",{className:"fc-popover-close "+t.getIconClass("close"),title:e.closeHint,onClick:this.handleCloseClick})),Ut("div",{className:"fc-popover-body "+t.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:t}=this.context,{alignmentEl:e,alignGridTop:r}=this.props,{rootEl:s}=this,o=function Sy(i){let t=k_(i),e=i.getBoundingClientRect();for(let r of t){let s=Ep(e,r.getBoundingClientRect());if(!s)return null;e=s}return e}(e);if(o){let f=s.getBoundingClientRect(),g=r?ec(e,".fc-scrollgrid").getBoundingClientRect().top:o.top,A=t?o.right-f.width:o.left;g=Math.max(g,10),A=Math.min(A,document.documentElement.clientWidth-10-f.width),A=Math.max(A,10);let P=s.offsetParent.getBoundingClientRect();Ed(s,{top:g-P.top,left:A-P.left})}}}class Py extends Nu{constructor(){super(...arguments),this.handleRootEl=t=>{this.rootEl=t,t?this.context.registerInteractiveComponent(this,{el:t,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:t,dateEnv:e}=this.context,{props:r}=this,{startDate:s,todayRange:o,dateProfile:f}=r,g=e.format(s,t.dayPopoverFormat);return Ut(H0,{elRef:this.handleRootEl,date:s,dateProfile:f,todayRange:o},(A,P,z)=>Ut(L_,{elRef:z.ref,id:r.id,title:g,extraClassNames:["fc-more-popover"].concat(z.className||[]),extraAttrs:z,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},O_(t)&&Ut(A,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(t,e,r,s){let{rootEl:o,props:f}=this;return t>=0&&t<r&&e>=0&&e<s?{dateProfile:f.dateProfile,dateSpan:Object.assign({allDay:!f.forceTimed,range:{start:f.startDate,end:f.endDate}},f.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:r,bottom:s},layer:1}:null}}class Pv extends da{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:ad()},this.handleLinkEl=t=>{this.linkEl=t,this.props.elRef&&vf(this.props.elRef,t)},this.handleClick=t=>{let{props:e,context:r}=this,{moreLinkClick:s}=r.options,o=na(e).start;function f(g){let{def:A,instance:P,range:z}=g.eventRange;return{event:new Lo(r,A,P),start:r.dateEnv.toDate(z.start),end:r.dateEnv.toDate(z.end),isStart:g.isStart,isEnd:g.isEnd}}"function"==typeof s&&(s=s({date:o,allDay:!!e.allDayDate,allSegs:e.allSegs.map(f),hiddenSegs:e.hiddenSegs.map(f),jsEvent:t,view:r.viewApi})),s&&"popover"!==s?"string"==typeof s&&r.calendarApi.zoomTo(o,s):this.setState({isPopoverOpen:!0})},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:t,state:e}=this;return Ut(Th.Consumer,null,r=>{let{viewApi:s,options:o,calendarApi:f}=r,{moreLinkText:g}=o,{moreCnt:A}=t,P=na(t),z="function"==typeof g?g.call(f,A):`+${A} ${g}`,ie=ft(o.moreLinkHint,[A],z),se={num:A,shortText:`+${A}`,text:z,view:s};return Ut(Aa,null,!!t.moreCnt&&Ut(Tc,{elTag:t.elTag||"a",elRef:this.handleLinkEl,elClasses:[...t.elClasses||[],"fc-more-link"],elStyle:t.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},t.elAttrs),mf(this.handleClick)),{title:ie,"aria-expanded":e.isPopoverOpen,"aria-controls":e.isPopoverOpen?e.popoverId:""}),renderProps:se,generatorName:"moreLinkContent",customGenerator:o.moreLinkContent,defaultGenerator:t.defaultGenerator||Yu,classNameGenerator:o.moreLinkClassNames,didMount:o.moreLinkDidMount,willUnmount:o.moreLinkWillUnmount},t.children),e.isPopoverOpen&&Ut(Py,{id:e.popoverId,startDate:P.start,endDate:P.end,dateProfile:t.dateProfile,todayRange:t.todayRange,extraDateSpan:t.extraDateSpan,parentEl:this.parentEl,alignmentEl:t.alignmentElRef?t.alignmentElRef.current:this.linkEl,alignGridTop:t.alignGridTop,forceTimed:t.forceTimed,onClose:this.handlePopoverClose},t.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=ec(this.linkEl,".fc-view-harness"))}}function Yu(i){return i.text}function na(i){if(i.allDayDate)return{start:i.allDayDate,end:Ir(i.allDayDate,1)};let{hiddenSegs:t}=i;return{start:Fv(t),end:Fy(t)}}function Fv(i){return i.reduce(Ud).eventRange.range.start}function Ud(i,t){return i.eventRange.range.start<t.eventRange.range.start?i:t}function Fy(i){return i.reduce(tx).eventRange.range.end}function tx(i,t){return i.eventRange.range.end>t.eventRange.range.end?i:t}class yo{constructor(){this.handlers=[]}set(t){this.currentValue=t;for(let e of this.handlers)e(t)}subscribe(t){this.handlers.push(t),void 0!==this.currentValue&&t(this.currentValue)}}class ix extends yo{constructor(){super(...arguments),this.map=new Map}handle(t){const{map:e}=this;let r=!1;t.isActive?(e.set(t.id,t),r=!0):e.has(t.id)&&(e.delete(t.id),r=!0),r&&this.set(e)}}const By=[],U0={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},Ny=Object.assign(Object.assign({},U0),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(i,t)=>"day"===t?"Today":`This ${i}`},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:i=>`Show ${i} more event${1===i?"":"s"}`});function zy(i){let t=i.length>0?i[0].code:"en",e=By.concat(i),r={en:Ny};for(let s of e)r[s.code]=s;return{map:r,defaultCode:t}}function Pg(i,t){return"object"!=typeof i||Array.isArray(i)?function Fg(i,t){let e=[].concat(i||[]),r=function Yy(i,t){for(let e=0;e<i.length;e+=1){let r=i[e].toLocaleLowerCase().split("-");for(let s=r.length;s>0;s-=1){let o=r.slice(0,s).join("-");if(t[o])return t[o]}}return null}(e,t)||Ny;return j0(i,e,r)}(i,t):j0(i.code,[i.code],i)}function j0(i,t,e){let r=kc([U0,e],["buttonText"]);delete r.code;let{week:s}=r;return delete r.week,{codeArg:i,codes:t,week:s,simpleNumberFormat:new Intl.NumberFormat(i),options:r}}function jd(i){return{id:_(),name:i.name,premiumReleaseDate:i.premiumReleaseDate?new Date(i.premiumReleaseDate):void 0,deps:i.deps||[],reducers:i.reducers||[],isLoadingFuncs:i.isLoadingFuncs||[],contextInit:[].concat(i.contextInit||[]),eventRefiners:i.eventRefiners||{},eventDefMemberAdders:i.eventDefMemberAdders||[],eventSourceRefiners:i.eventSourceRefiners||{},isDraggableTransformers:i.isDraggableTransformers||[],eventDragMutationMassagers:i.eventDragMutationMassagers||[],eventDefMutationAppliers:i.eventDefMutationAppliers||[],dateSelectionTransformers:i.dateSelectionTransformers||[],datePointTransforms:i.datePointTransforms||[],dateSpanTransforms:i.dateSpanTransforms||[],views:i.views||{},viewPropsTransformers:i.viewPropsTransformers||[],isPropsValid:i.isPropsValid||null,externalDefTransforms:i.externalDefTransforms||[],viewContainerAppends:i.viewContainerAppends||[],eventDropTransformers:i.eventDropTransformers||[],componentInteractions:i.componentInteractions||[],calendarInteractions:i.calendarInteractions||[],themeClasses:i.themeClasses||{},eventSourceDefs:i.eventSourceDefs||[],cmdFormatter:i.cmdFormatter,recurringTypes:i.recurringTypes||[],namedTimeZonedImpl:i.namedTimeZonedImpl,initialView:i.initialView||"",elementDraggingImpl:i.elementDraggingImpl,optionChangeHandlers:i.optionChangeHandlers||{},scrollGridImpl:i.scrollGridImpl||null,listenerRefiners:i.listenerRefiners||{},optionRefiners:i.optionRefiners||{},propSetHandlers:i.propSetHandlers||{}}}function sx(i,t){return{premiumReleaseDate:Gy(i.premiumReleaseDate,t.premiumReleaseDate),reducers:i.reducers.concat(t.reducers),isLoadingFuncs:i.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:i.contextInit.concat(t.contextInit),eventRefiners:Object.assign(Object.assign({},i.eventRefiners),t.eventRefiners),eventDefMemberAdders:i.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},i.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:i.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:i.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:i.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:i.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:i.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:i.dateSpanTransforms.concat(t.dateSpanTransforms),views:Object.assign(Object.assign({},i.views),t.views),viewPropsTransformers:i.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||i.isPropsValid,externalDefTransforms:i.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:i.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:i.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:i.calendarInteractions.concat(t.calendarInteractions),componentInteractions:i.componentInteractions.concat(t.componentInteractions),themeClasses:Object.assign(Object.assign({},i.themeClasses),t.themeClasses),eventSourceDefs:i.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||i.cmdFormatter,recurringTypes:i.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||i.namedTimeZonedImpl,initialView:i.initialView||t.initialView,elementDraggingImpl:i.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},i.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||i.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},i.listenerRefiners),t.listenerRefiners),optionRefiners:Object.assign(Object.assign({},i.optionRefiners),t.optionRefiners),propSetHandlers:Object.assign(Object.assign({},i.propSetHandlers),t.propSetHandlers)}}function Gy(i,t){return void 0===i?t:void 0===t?i:new Date(Math.max(i.valueOf(),t.valueOf()))}class ep extends Lu{}function ig(i,t,e,r){if(t[i])return t[i];let s=function Hy(i,t,e,r){let s=e[i],o=r[i],f=z=>s&&null!==s[z]?s[z]:o&&null!==o[z]?o[z]:null,g=f("component"),A=f("superType"),P=null;if(A){if(A===i)throw new Error("Can't have a custom view type that references itself");P=ig(A,t,e,r)}return!g&&P&&(g=P.component),g?{type:i,component:g,defaults:Object.assign(Object.assign({},P?P.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},P?P.overrides:{}),o?o.rawOptions:{})}:null}(i,t,e,r);return s&&(t[i]=s),s}function eh(i){return ld(i,Vy)}function Vy(i){let t="function"==typeof i?{component:i}:i,{component:e}=t;return t.content?e=Bg(t):e&&!(e.prototype instanceof da)&&(e=Bg(Object.assign(Object.assign({},t),{content:e}))),{superType:t.type,component:e,rawOptions:t}}function Bg(i){return t=>Ut(Th.Consumer,null,e=>Ut(Tc,{elTag:"div",elClasses:As(e.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:e.options.nextDayThreshold}),generatorName:void 0,customGenerator:i.content,classNameGenerator:i.classNames,didMount:i.didMount,willUnmount:i.willUnmount}))}function Ng(i,t,e,r){let s=eh(i),o=eh(t.views),f=function Ih(i,t){let r,e={};for(r in i)ig(r,e,i,t);for(r in t)ig(r,e,i,t);return e}(s,o);return ld(f,g=>function Mc(i,t,e,r,s){let o=i.overrides.duration||i.defaults.duration||r.duration||e.duration,f=null,g="",A="",P={};if(o&&(f=function ax(i){let t=JSON.stringify(i),e=fu[t];return void 0===e&&(e=xt(i),fu[t]=e),e}(o),f)){let se=Ln(f);g=se.unit,1===se.value&&(A=g,P=t[g]?t[g].rawOptions:{})}let z=se=>{let oe=se.buttonText||{},_e=i.defaults.buttonTextKey;return null!=_e&&null!=oe[_e]?oe[_e]:null!=oe[i.type]?oe[i.type]:null!=oe[A]?oe[A]:null},ie=se=>{let oe=se.buttonHints||{},_e=i.defaults.buttonTextKey;return null!=_e&&null!=oe[_e]?oe[_e]:null!=oe[i.type]?oe[i.type]:null!=oe[A]?oe[A]:null};return{type:i.type,component:i.component,duration:f,durationUnit:g,singleUnit:A,optionDefaults:i.defaults,optionOverrides:Object.assign(Object.assign({},P),i.overrides),buttonTextOverride:z(r)||z(e)||i.overrides.buttonText,buttonTextDefault:z(s)||i.defaults.buttonText||z(kh)||i.type,buttonTitleOverride:ie(r)||ie(e)||i.overrides.buttonHint,buttonTitleDefault:ie(s)||i.defaults.buttonHint||ie(kh)}}(g,o,t,e,r))}ep.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},ep.prototype.baseIconClass="fc-icon",ep.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},ep.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},ep.prototype.iconOverrideOption="buttonIcons",ep.prototype.iconOverrideCustomButtonOption="icon",ep.prototype.iconOverridePrefix="fc-icon-";let fu={};function Bv(i){for(let t in i)if(i[t].isFetching)return!0;return!1}function Zy(i,t,e,r){let s={};for(let o of t)s[o.sourceId]=o;return e&&(s=tp(s,e,r)),Object.assign(Object.assign({},i),s)}function tp(i,t,e){return W0(i,Do(i,r=>function F_(i,t,e){return cm(i,e)?!e.options.lazyFetching||!i.fetchRange||i.isFetching||t.start<i.fetchRange.start||t.end>i.fetchRange.end:!i.latestFetchId}(r,t,e)),t,!1,e)}function W0(i,t,e,r,s){let o={};for(let f in i){let g=i[f];o[f]=t[f]?Ky(g,e,r,s):g}return o}function Ky(i,t,e,r){let{options:s,calendarApi:o}=r,f=r.pluginHooks.eventSourceDefs[i.sourceDefId],g=_();return f.fetch({eventSource:i,range:t,isRefetch:e,context:r},A=>{let{rawEvents:P}=A;s.eventSourceSuccess&&(P=s.eventSourceSuccess.call(o,P,A.response)||P),i.success&&(P=i.success.call(o,P,A.response)||P),r.dispatch({type:"RECEIVE_EVENTS",sourceId:i.sourceId,fetchId:g,fetchRange:t,rawEvents:P})},A=>{let P=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(o,A),P=!0),i.failure&&(i.failure(A),P=!0),P||console.warn(A.message,A),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:i.sourceId,fetchId:g,fetchRange:t,error:A})}),Object.assign(Object.assign({},i),{isFetching:!0,latestFetchId:g})}function Qy(i,t){return Do(i,e=>cm(e,t))}function cm(i,t){return!t.pluginHooks.eventSourceDefs[i.sourceDefId].ignoreRange}function e1(i,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return i}}function $0(i,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return i}}function t1(i,t){let e;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return e=t.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return i}}function n1(i,t){let e;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return e=t.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return i}}function Tf(i,t,e,r,s){return{header:i.headerToolbar?X0(i.headerToolbar,i,t,e,r,s):null,footer:i.footerToolbar?X0(i.footerToolbar,i,t,e,r,s):null}}function X0(i,t,e,r,s,o){let f={},g=[],A=!1;for(let P in i){let ie=ng(i[P],t,e,r,s,o);f[P]=ie.widgets,g.push(...ie.viewsWithButtons),A=A||ie.hasTitle}return{sectionWidgets:f,viewsWithButtons:g,hasTitle:A}}function ng(i,t,e,r,s,o){let f="rtl"===t.direction,g=t.customButtons||{},A=e.buttonText||{},P=t.buttonText||{},z=e.buttonHints||{},ie=t.buttonHints||{},se=i?i.split(" "):[],oe=[],_e=!1;return{widgets:se.map(Ae=>Ae.split(",").map(Ke=>{if("title"===Ke)return _e=!0,{buttonName:Ke};let ct,pt,mi,Fi,Ki,ni;if(ct=g[Ke])mi=Ti=>{ct.click&&ct.click.call(Ti.target,Ti,Ti.target)},(Fi=r.getCustomButtonIconClass(ct))||(Fi=r.getIconClass(Ke,f))||(Ki=ct.text),ni=ct.hint||ct.text;else if(pt=s[Ke]){oe.push(Ke),mi=()=>{o.changeView(Ke)},(Ki=pt.buttonTextOverride)||(Fi=r.getIconClass(Ke,f))||(Ki=pt.buttonTextDefault);let Ti=pt.buttonTextOverride||pt.buttonTextDefault;ni=ft(pt.buttonTitleOverride||pt.buttonTitleDefault||t.viewHint,[Ti,Ke],Ti)}else if(o[Ke])if(mi=()=>{o[Ke]()},(Ki=A[Ke])||(Fi=r.getIconClass(Ke,f))||(Ki=P[Ke]),"prevYear"===Ke||"nextYear"===Ke){let Ti="prevYear"===Ke?"prev":"next";ni=ft(z[Ti]||ie[Ti],[P.year||"year","year"],P[Ke])}else ni=Ti=>ft(z[Ke]||ie[Ke],[P[Ti]||Ti,Ti],P[Ke]);return{buttonName:Ke,buttonClick:mi,buttonIcon:Fi,buttonText:Ki,buttonHint:ni}})),viewsWithButtons:oe,hasTitle:_e}}class zg{constructor(t,e,r){this.type=t,this.getCurrentData=e,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(t){return this.getCurrentData().options[t]}}const Nv=jd({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:i=>Array.isArray(i.events)?i.events:null,fetch(i,t){t({rawEvents:i.eventSource.meta})}}]}),zv=jd({name:"func-event-source",eventSourceDefs:[{parseMeta:i=>"function"==typeof i.events?i.events:null,fetch(i,t,e){const{dateEnv:r}=i.context;!function nm(i,t,e){let r=!1,s=function(g){r||(r=!0,t(g))},o=function(g){r||(r=!0,e(g))},f=i(s,o);f&&"function"==typeof f.then&&f.then(s,o)}(i.eventSource.meta.bind(null,Um(i.range,r)),o=>t({rawEvents:o}),e)}}]}),ux=jd({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:tn,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:i=>!i.url||"json"!==i.format&&i.format?null:{url:i.url,format:"json",method:(i.method||"GET").toUpperCase(),extraParams:i.extraParams,startParam:i.startParam,endParam:i.endParam,timeZoneParam:i.timeZoneParam},fetch(i,t,e){const{meta:r}=i.eventSource,s=function hx(i,t,e){let o,f,g,A,{dateEnv:r,options:s}=e,P={};return o=i.startParam,null==o&&(o=s.startParam),f=i.endParam,null==f&&(f=s.endParam),g=i.timeZoneParam,null==g&&(g=s.timeZoneParam),A="function"==typeof i.extraParams?i.extraParams():i.extraParams||{},Object.assign(P,A),P[o]=r.formatIso(t.start),P[f]=r.formatIso(t.end),"local"!==r.timeZone&&(P[g]=r.timeZone),P}(r,i.range,i.context);(function Zf(i,t,e){const r={method:i=i.toUpperCase()};return"GET"===i?t+=(-1===t.indexOf("?")?"?":"&")+new URLSearchParams(e):(r.body=new URLSearchParams(e),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(t,r).then(s=>{if(s.ok)return s.json().then(o=>[o,s],()=>{throw new rm("Failure parsing JSON",s)});throw new rm("Request failed",s)})})(r.method,r.url,s).then(([o,f])=>{t({rawEvents:o,response:f})},e)}}]}),Yg=jd({name:"simple-recurring-event",recurringTypes:[{parse(i,t){if(i.daysOfWeek||i.startTime||i.endTime||i.startRecur||i.endRecur){let r,e={daysOfWeek:i.daysOfWeek||null,startTime:i.startTime||null,endTime:i.endTime||null,startRecur:i.startRecur?t.createMarker(i.startRecur):null,endRecur:i.endRecur?t.createMarker(i.endRecur):null};return i.duration&&(r=i.duration),!r&&i.startTime&&i.endTime&&(r=function Yi(i,t){return{years:i.years-t.years,months:i.months-t.months,days:i.days-t.days,milliseconds:i.milliseconds-t.milliseconds}}(i.endTime,i.startTime)),{allDayGuess:!i.startTime&&!i.endTime,duration:r,typeData:e}}return null},expand(i,t,e){let r=Fd(t,{start:i.startRecur,end:i.endRecur});return r?function Gg(i,t,e,r){let s=i?Hf(i):null,o=ua(e.start),f=e.end,g=[];for(;o<f;){let A;(!s||s[o.getUTCDay()])&&(A=t?r.add(o,t):o,g.push(A)),o=Ir(o,1)}return g}(i.daysOfWeek,i.startTime,r,e):[]}}],eventRefiners:{daysOfWeek:tn,startTime:xt,endTime:xt,duration:xt,startRecur:tn,endRecur:tn}}),N_=jd({name:"change-handler",optionChangeHandlers:{events(i,t){r1([i],t)},eventSources:r1}});function r1(i,t){let e=cd(t.getCurrentData().eventSources);if(1===e.length&&1===i.length&&Array.isArray(e[0]._raw)&&Array.isArray(i[0]))return void t.dispatch({type:"RESET_RAW_EVENTS",sourceId:e[0].sourceId,rawEvents:i[0]});let r=[];for(let s of i){let o=!1;for(let f=0;f<e.length;f+=1)if(e[f]._raw===s){e.splice(f,1),o=!0;break}o||r.push(s)}for(let s of e)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of r)t.calendarApi.addEventSource(s)}const z_=[Nv,zv,ux,Yg,N_,jd({name:"misc",isLoadingFuncs:[i=>Bv(i.eventSources)],propSetHandlers:{dateProfile:function s1(i,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},Um(i.activeRange,t.dateEnv)),{view:t.viewApi}))},eventStore:function dx(i,t){let{emitter:e}=t;e.hasHandlers("eventsSet")&&e.trigger("eventsSet",Ah(i,t))}}})];class fx{constructor(t,e){this.runTaskOption=t,this.drainedOption=e,this.queue=[],this.delayedRunner=new Ql(this.drain.bind(this))}request(t,e){this.queue.push(t),this.delayedRunner.request(e)}pause(t){this.delayedRunner.pause(t)}resume(t,e){this.delayedRunner.resume(t,e)}drain(){let{queue:t}=this;for(;t.length;){let r,e=[];for(;r=t.shift();)this.runTask(r),e.push(r);this.drained(e)}}runTask(t){this.runTaskOption&&this.runTaskOption(t)}drained(t){this.drainedOption&&this.drainedOption(t)}}function Z0(i,t,e){let r;return r=/^(year|month)$/.test(i.currentRangeUnit)?i.currentRange:i.activeRange,e.formatRange(r.start,r.end,So(t.titleFormat||function um(i){let{currentRangeUnit:t}=i;if("year"===t)return{year:"numeric"};if("month"===t)return{year:"numeric",month:"long"};let e=Wo(i.currentRange.start,i.currentRange.end);return null!==e&&e>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(i)),{isEndExclusive:i.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}class a1{constructor(t){this.computeCurrentViewData=Ur(this._computeCurrentViewData),this.organizeRawLocales=Ur(zy),this.buildLocale=Ur(Pg),this.buildPluginHooks=function rx(){let e,i=[],t=[];return(r,s)=>((!e||!Rr(r,i)||!Rr(s,t))&&(e=function nx(i,t){let e={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(o){for(let f of o){const g=f.name,A=e[g];void 0===A?(e[g]=f.id,s(f.deps),r=sx(r,f)):A!==f.id&&console.warn(`Duplicate plugin '${g}'`)}}return i&&s(i),s(t),r}(r,s)),i=r,t=s,e)}(),this.buildDateEnv=Ur(o1),this.buildTheme=Ur(Yv),this.parseToolbars=Ur(Tf),this.buildViewSpecs=Ur(Ng),this.buildDateProfileGenerator=ha(Y_),this.buildViewApi=Ur(G_),this.buildViewUiProps=ha(px),this.buildEventUiBySource=Ur(H_,$o),this.buildEventUiBases=Ur(hm),this.parseContextBusinessHours=ha(mx),this.buildTitle=Ur(Z0),this.emitter=new Ym,this.actionRunner=new fx(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=se=>{this.actionRunner.request(se)},this.props=t,this.actionRunner.pause();let e={},r=this.computeOptionsData(t.optionOverrides,e,t.calendarApi),s=r.calendarOptions.initialView||r.pluginHooks.initialView,o=this.computeCurrentViewData(s,r,t.optionOverrides,e);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(o.options);let f=function __(i,t){let e=i.initialDate;return null!=e?t.createMarker(e):du(i.now,t)}(r.calendarOptions,r.dateEnv),g=o.dateProfileGenerator.build(f);Bd(g.activeRange,f)||(f=g.currentRange.start);let A={dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let se of r.pluginHooks.contextInit)se(A);let P=function $y(i,t,e){let r=t?t.activeRange:null;return Zy({},function ox(i,t){let e=$h(t),r=[].concat(i.eventSources||[]),s=[];i.initialEvents&&r.unshift(i.initialEvents),i.events&&r.unshift(i.events);for(let o of r){let f=hd(o,t,e);f&&s.push(f)}return s}(i,e),r,e)}(r.calendarOptions,g,A),z={dynamicOptionOverrides:e,currentViewType:s,currentDate:f,dateProfile:g,businessHours:this.parseContextBusinessHours(A),eventSources:P,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(A).selectionConfig},ie=Object.assign(Object.assign({},A),z);for(let se of r.pluginHooks.reducers)Object.assign(z,se(null,null,ie));ip(z,A)&&this.emitter.trigger("loading",!0),this.state=z,this.updateData(),this.actionRunner.resume()}resetOptions(t,e){let{props:r}=this;void 0===e?r.optionOverrides=t:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),t),this.optionsForRefining.push(...e)),(void 0===e||e.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(t){let{props:e,state:r,emitter:s}=this,o=function jy(i,t){return"SET_OPTION"===t.type?Object.assign(Object.assign({},i),{[t.optionName]:t.rawOptionValue}):i}(r.dynamicOptionOverrides,t),f=this.computeOptionsData(e.optionOverrides,o,e.calendarApi),g=function Uy(i,t){return"CHANGE_VIEW_TYPE"===t.type&&(i=t.viewType),i}(r.currentViewType,t),A=this.computeCurrentViewData(g,f,e.optionOverrides,o);e.calendarApi.currentDataManager=this,s.setThisContext(e.calendarApi),s.setOptions(A.options);let P={dateEnv:f.dateEnv,options:f.calendarOptions,pluginHooks:f.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:z,dateProfile:ie}=r;this.data&&this.data.dateProfileGenerator!==A.dateProfileGenerator&&(ie=A.dateProfileGenerator.build(z)),z=function Wh(i,t){return"CHANGE_DATE"===t.type?t.dateMarker:i}(z,t),ie=function Wy(i,t,e,r){let s;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||e);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if(s=r.buildPrev(i,e),s.isValid)return s;break;case"NEXT":if(s=r.buildNext(i,e),s.isValid)return s}return i}(ie,t,z,A.dateProfileGenerator),("PREV"===t.type||"NEXT"===t.type||!Bd(ie.currentRange,z))&&(z=ie.currentRange.start);let se=function Xy(i,t,e,r){let s=e?e.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return Zy(i,t.sources,s,r);case"REMOVE_EVENT_SOURCE":return function qy(i,t){return Do(i,e=>e.sourceId!==t)}(i,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return e?tp(i,s,r):i;case"FETCH_EVENT_SOURCES":return W0(i,t.sourceIds?Hf(t.sourceIds):Qy(i,r),s,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function Jy(i,t,e,r){let s=i[t];return s&&e===s.latestFetchId?Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:r})}):i}(i,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return i}}(r.eventSources,t,ie,P),oe=function Ac(i,t,e,r,s){switch(t.type){case"RECEIVE_EVENTS":return function Cv(i,t,e,r,s,o){if(t&&e===t.latestFetchId){let f=mp(m0(s,t,o),t,o);return r&&(f=Sc(f,r,o)),Qp(zm(i,t.sourceId),f)}return i}(i,e[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,s);case"RESET_RAW_EVENTS":return function Dc(i,t,e,r,s){const{defIdMap:o,instanceIdMap:f}=function v0(i){const{defs:t,instances:e}=i,r={},s={};for(let o in t){const f=t[o],{publicId:g}=f;g&&(r[g]=o)}for(let o in e){const g=t[e[o].defId],{publicId:A}=g;A&&(s[A]=o)}return{defIdMap:r,instanceIdMap:s}}(i);return Sc(mp(m0(e,t,s),t,s,!1,o,f),r,s)}(i,e[t.sourceId],t.rawEvents,r.activeRange,s);case"ADD_EVENTS":return function g0(i,t,e,r){return e&&(t=Sc(t,e,r)),Qp(i,t)}(i,t.eventStore,r?r.activeRange:null,s);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return Qp(i,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?Sc(i,r.activeRange,s):i;case"REMOVE_EVENTS":return function d0(i,t){let{defs:e,instances:r}=i,s={},o={};for(let f in e)t.defs[f]||(s[f]=e[f]);for(let f in r)!t.instances[f]&&s[r[f].defId]&&(o[f]=r[f]);return{defs:s,instances:o}}(i,t.eventStore);case"REMOVE_EVENT_SOURCE":return zm(i,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return vp(i,o=>!o.sourceId);case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return i}}(r.eventStore,t,se,ie,P),he=Bv(se)&&!A.options.progressiveEventRendering&&r.renderableEventStore||oe,{eventUiSingleBase:Ae,selectionConfig:Ke}=this.buildViewUiProps(P),ct=this.buildEventUiBySource(se),mi={dynamicOptionOverrides:o,currentViewType:g,currentDate:z,dateProfile:ie,eventSources:se,eventStore:oe,renderableEventStore:he,selectionConfig:Ke,eventUiBases:this.buildEventUiBases(he.defs,Ae,ct),businessHours:this.parseContextBusinessHours(P),dateSelection:e1(r.dateSelection,t),eventSelection:$0(r.eventSelection,t),eventDrag:t1(r.eventDrag,t),eventResize:n1(r.eventResize,t)},Fi=Object.assign(Object.assign({},P),mi);for(let Ti of f.pluginHooks.reducers)Object.assign(mi,Ti(r,t,Fi));let Ki=ip(r,P),ni=ip(mi,P);!Ki&&ni?s.trigger("loading",!0):Ki&&!ni&&s.trigger("loading",!1),this.state=mi,e.onAction&&e.onAction(t)}updateData(){let{props:t,state:e}=this,r=this.data,s=this.computeOptionsData(t.optionOverrides,e.dynamicOptionOverrides,t.calendarApi),o=this.computeCurrentViewData(e.currentViewType,s,t.optionOverrides,e.dynamicOptionOverrides),f=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(e.dateProfile,o.options,s.dateEnv),calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),o),e),g=s.pluginHooks.optionChangeHandlers,A=r&&r.calendarOptions,P=s.calendarOptions;if(A&&A!==P){A.timeZone!==P.timeZone&&(e.eventSources=f.eventSources=function P_(i,t,e){let r=t?t.activeRange:null;return W0(i,Qy(i,e),r,!0,e)}(f.eventSources,e.dateProfile,f),e.eventStore=f.eventStore=Tg(f.eventStore,r.dateEnv,f.dateEnv),e.renderableEventStore=f.renderableEventStore=Tg(f.renderableEventStore,r.dateEnv,f.dateEnv));for(let z in g)(-1!==this.optionsForHandling.indexOf(z)||A[z]!==P[z])&&g[z](P[z],f)}this.optionsForHandling=[],t.onData&&t.onData(f)}computeOptionsData(t,e,r){if(!this.optionsForRefining.length&&t===this.stableOptionOverrides&&e===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:o,localeDefaults:f,availableLocaleData:g,extra:A}=this.processRawCalendarOptions(t,e);dm(A);let P=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,o,g,s.defaultRangeSeparator),z=this.buildViewSpecs(o.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,f),ie=this.buildTheme(s,o),se=this.parseToolbars(s,this.stableOptionOverrides,ie,z,r);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:o,dateEnv:P,viewSpecs:z,theme:ie,toolbarConfig:se,localeDefaults:f,availableRawLocales:g.map}}processRawCalendarOptions(t,e){let{locales:r,locale:s}=Vh([kh,t,e]),o=this.organizeRawLocales(r),g=this.buildLocale(s||o.defaultCode,o.map).options,A=this.buildPluginHooks(t.plugins||[],z_),P=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},od),l0),Ru),A.listenerRefiners),A.optionRefiners),z={},ie=Vh([kh,g,t,e]),se={},oe=this.currentCalendarOptionsInput,_e=this.currentCalendarOptionsRefined,he=!1;for(let Ae in ie)-1===this.optionsForRefining.indexOf(Ae)&&(ie[Ae]===oe[Ae]||Yf[Ae]&&Ae in oe&&Yf[Ae](oe[Ae],ie[Ae]))?se[Ae]=_e[Ae]:P[Ae]?(se[Ae]=P[Ae](ie[Ae]),he=!0):z[Ae]=oe[Ae];return he&&(this.currentCalendarOptionsInput=ie,this.currentCalendarOptionsRefined=se,this.stableOptionOverrides=t,this.stableDynamicOptionOverrides=e),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:A,availableLocaleData:o,localeDefaults:g,extra:z}}_computeCurrentViewData(t,e,r,s){let o=e.viewSpecs[t];if(!o)throw new Error(`viewType "${t}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:f,extra:g}=this.processRawViewOptions(o,e.pluginHooks,e.localeDefaults,r,s);return dm(g),{viewSpec:o,options:f,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:e.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:f.slotMinTime,slotMaxTime:f.slotMaxTime,showNonCurrentDates:f.showNonCurrentDates,dayCount:f.dayCount,dateAlignment:f.dateAlignment,dateIncrement:f.dateIncrement,hiddenDays:f.hiddenDays,weekends:f.weekends,nowInput:f.now,validRangeInput:f.validRange,visibleRangeInput:f.visibleRange,fixedWeekCount:f.fixedWeekCount}),viewApi:this.buildViewApi(t,this.getCurrentData,e.dateEnv)}}processRawViewOptions(t,e,r,s,o){let f=Vh([kh,t.optionDefaults,r,s,t.optionOverrides,o]),g=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},od),l0),Ru),Yr),e.listenerRefiners),e.optionRefiners),A={},P=this.currentViewOptionsInput,z=this.currentViewOptionsRefined,ie=!1,se={};for(let oe in f)f[oe]===P[oe]||Yf[oe]&&Yf[oe](f[oe],P[oe])?A[oe]=z[oe]:(f[oe]===this.currentCalendarOptionsInput[oe]||Yf[oe]&&Yf[oe](f[oe],this.currentCalendarOptionsInput[oe])?oe in this.currentCalendarOptionsRefined&&(A[oe]=this.currentCalendarOptionsRefined[oe]):g[oe]?A[oe]=g[oe](f[oe]):se[oe]=f[oe],ie=!0);return ie&&(this.currentViewOptionsInput=f,this.currentViewOptionsRefined=A),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:se}}}function o1(i,t,e,r,s,o,f,g){let A=Pg(t||f.defaultCode,f.map);return new ic({calendarSystem:"gregory",timeZone:i,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:A,weekNumberCalculation:e,firstDay:r,weekText:s,cmdFormatter:o.cmdFormatter,defaultSeparator:g})}function Yv(i,t){return new(t.themeClasses[i.themeSystem]||ep)(i)}function Y_(i){return new(i.dateProfileGeneratorClass||Xc)(i)}function G_(i,t,e){return new zg(i,t,e)}function H_(i){return ld(i,t=>t.ui)}function hm(i,t,e){let r={"":t};for(let s in i){let o=i[s];o.sourceId&&e[o.sourceId]&&(r[s]=e[o.sourceId])}return r}function px(i){let{options:t}=i;return{eventUiSingleBase:ud({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:"boolean"==typeof t.eventOverlap?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},i),selectionConfig:ud({constraint:t.selectConstraint,overlap:"boolean"==typeof t.selectOverlap?t.selectOverlap:void 0,allow:t.selectAllow},i)}}function ip(i,t){for(let e of t.pluginHooks.isLoadingFuncs)if(e(i))return!0;return!1}function mx(i){return function Gm(i,t){return mp(function Hm(i){let t;return t=!0===i?[{}]:Array.isArray(i)?i.filter(e=>e.daysOfWeek):"object"==typeof i&&i?[i]:[],t=t.map(e=>Object.assign(Object.assign({},Fu),e)),t}(i),null,t)}(i.options.businessHours,i)}function dm(i,t){for(let e in i)console.warn(`Unknown option '${e}'`+(t?` for view '${t}'`:""))}class q0 extends da{render(){return Ut("div",{className:"fc-toolbar-chunk"},...this.props.widgetGroups.map(e=>this.renderWidgetGroup(e)))}renderWidgetGroup(t){let{props:e}=this,{theme:r}=this.context,s=[],o=!0;for(let f of t){let{buttonName:g,buttonClick:A,buttonText:P,buttonIcon:z,buttonHint:ie}=f;if("title"===g)o=!1,s.push(Ut("h2",{className:"fc-toolbar-title",id:e.titleId},e.title));else{let se=g===e.activeButton,oe=!e.isTodayEnabled&&"today"===g||!e.isPrevEnabled&&"prev"===g||!e.isNextEnabled&&"next"===g,_e=[`fc-${g}-button`,r.getClass("button")];se&&_e.push(r.getClass("buttonActive")),s.push(Ut("button",{type:"button",title:"function"==typeof ie?ie(e.navUnit):ie,disabled:oe,"aria-pressed":se,className:_e.join(" "),onClick:A},P||(z?Ut("span",{className:z,role:"img"}):"")))}}return s.length>1?Ut("div",{className:o&&r.getClass("buttonGroup")||""},...s):s[0]}}class Hg extends da{render(){let s,o,{model:t,extraClassName:e}=this.props,r=!1,f=t.sectionWidgets,g=f.center;return f.left?(r=!0,s=f.left):s=f.start,f.right?(r=!0,o=f.right):o=f.end,Ut("div",{className:[e||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",g||[]),this.renderSection("end",o||[]))}renderSection(t,e){let{props:r}=this;return Ut(q0,{key:t,widgetGroups:e,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class K0 extends da{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=t=>{this.el=t,vf(this.props.elRef,t),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:t,state:e}=this,{aspectRatio:r}=t,o="",f="";return r?null!==e.availableWidth?o=e.availableWidth/r:f=1/r*100+"%":o=t.height||"",Ut("div",{"aria-labelledby":t.labeledById,ref:this.handleEl,className:["fc-view-harness",r||t.liquid||t.height?"fc-view-harness-active":"fc-view-harness-passive"].join(" "),style:{height:o,paddingBottom:f}},t.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class Gu extends wp{constructor(t){super(t),this.handleSegClick=(e,r)=>{let{component:s}=this,{context:o}=s,f=dd(r);if(f&&s.isValidSegDownEl(e.target)){let g=ec(e.target,".fc-event-forced-url"),A=g?g.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:r,event:new Lo(s.context,f.eventRange.def,f.eventRange.instance),jsEvent:e,view:o.viewApi}),A&&!e.defaultPrevented&&(window.location.href=A)}},this.destroy=Mu(t.el,"click",".fc-event",this.handleSegClick)}}class V_ extends wp{constructor(t){super(t),this.handleEventElRemove=e=>{e===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(e,r)=>{dd(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",e,r))},this.handleSegLeave=(e,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",e,r))},this.removeHoverListeners=function Hp(i,t,e,r){let s;return Mu(i,"mouseover",t,(o,f)=>{if(f!==s){s=f,e(o,f);let g=A=>{s=null,r(A,f),f.removeEventListener("mouseleave",g)};f.addEventListener("mouseleave",g)}})}(t.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(t,e,r){let{component:s}=this,{context:o}=s,f=dd(r);(!e||s.isValidSegDownEl(e.target))&&o.emitter.trigger(t,{el:r,event:new Lo(o,f.eventRange.def,f.eventRange.instance),jsEvent:e,view:o.viewApi})}}class gx extends Xp{constructor(){super(...arguments),this.buildViewContext=Ur(Xo),this.buildViewPropTransformers=Ur(Gv),this.buildToolbarProps=Ur(Vg),this.headerRef={current:null},this.footerRef={current:null},this.interactionsStore={},this.state={viewLabelId:ad()},this.registerInteractiveComponent=(t,e)=>{let r=function D0(i,t){return{component:i,el:t.el,useEventCenter:null==t.useEventCenter||t.useEventCenter,isHitComboAllowed:t.isHitComboAllowed||null}}(t,e),f=[Gu,V_].concat(this.props.pluginHooks.componentInteractions).map(g=>new g(r));this.interactionsStore[t.uid]=f,I0[t.uid]=r},this.unregisterInteractiveComponent=t=>{let e=this.interactionsStore[t.uid];if(e){for(let r of e)r.destroy();delete this.interactionsStore[t.uid]}delete I0[t.uid]},this.resizeRunner=new Ql(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=t=>{let{options:e}=this.props;e.handleWindowResize&&t.target===window&&this.resizeRunner.request(e.windowResizeDelay)}}render(){let g,{props:t}=this,{toolbarConfig:e,options:r}=t,s=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,du(t.options.now,t.dateEnv),t.viewTitle),o=!1,f="";t.isHeightAuto||t.forPrint?f="":null!=r.height?o=!0:null!=r.contentHeight?f=r.contentHeight:g=Math.max(r.aspectRatio,.5);let A=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),P=e.header&&e.header.hasTitle?this.state.viewLabelId:void 0;return Ut(Th.Provider,{value:A},e.header&&Ut(Hg,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:e.header,titleId:P},s)),Ut(K0,{liquid:o,height:f,aspectRatio:g,labeledById:P},this.renderView(t),this.buildAppendContent()),e.footer&&Ut(Hg,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:e.footer,titleId:""},s)))}componentDidMount(){let{props:t}=this;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(r=>new r(t)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:e}=t.pluginHooks;for(let r in e)e[r](t[r],t)}componentDidUpdate(t){let{props:e}=this,{propSetHandlers:r}=e.pluginHooks;for(let s in r)e[s]!==t[s]&&r[s](e[s],e)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let t of this.calendarInteractions)t.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:t}=this;return Ut(Aa,{},...t.pluginHooks.viewContainerAppends.map(r=>r(t)))}renderView(t){let{pluginHooks:e}=t,{viewSpec:r}=t,s={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},o=this.buildViewPropTransformers(e.viewPropsTransformers);for(let g of o)Object.assign(s,g.transform(s,t));return Ut(r.component,Object.assign({},s))}}function Vg(i,t,e,r,s,o){let f=e.build(s,void 0,!1),g=e.buildPrev(t,r,!1),A=e.buildNext(t,r,!1);return{title:o,activeButton:i.type,navUnit:i.singleUnit,isTodayEnabled:f.isValid&&!Bd(t.currentRange,s),isPrevEnabled:g.isValid,isNextEnabled:A.isValid}}function Gv(i){return i.map(t=>new t)}class vx extends M0{constructor(t,e={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;hu(()=>{go(Ut(C_,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(s,o,f,g)=>(this.setClassNames(s),this.setHeight(o),Ut(Rm.Provider,{value:this.customContentRenderId},Ut(gx,Object.assign({isHeightAuto:f,forPrint:g},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,go(null,this.el),this.setClassNames([]),this.setHeight(""))},function _v(i){i.isConnected&&i.getRootNode&&Sm(i.getRootNode())}(t),this.el=t,this.renderRunner=new Ql(this.handleRenderRequest),new a1({optionOverrides:e,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){hu(()=>{super.updateSize()})}batchRendering(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(t,e){this.currentDataManager.resetOptions(t,e)}setClassNames(t){if(!Rr(t,this.currentClassNames)){let{classList:e}=this.el;for(let r of this.currentClassNames)e.remove(r);for(let r of t)e.add(r);this.currentClassNames=t}}setHeight(t){r0(this.el,"height",t)}}Lt.touchMouseIgnoreWait=500;let Vv=0,Uv=0,J0=!1;class j_{constructor(t){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{if(!this.shouldIgnoreMouse()&&function xx(i){return 0===i.button&&!i.ctrlKey}(e)&&this.tryStart(e)){let r=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=e=>{let r=this.createEventFromMouse(e);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup()},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let r=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let s=e.target;this.shouldIgnoreMove||s.addEventListener("touchmove",this.handleTouchMove),s.addEventListener("touchend",this.handleTouchEnd),s.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=e=>{let r=this.createEventFromTouch(e);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=e=>{if(this.isDragging){let r=e.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,function jv(){Vv+=1,setTimeout(()=>{Vv-=1},Lt.touchMouseIgnoreWait)}()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let r=window.pageXOffset-this.prevScrollX+this.prevPageX,s=window.pageYOffset-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:s,deltaX:r-this.origPageX,deltaY:s-this.origPageY})}},this.containerEl=t,this.emitter=new Ym,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function Ug(){Uv+=1,1===Uv&&window.addEventListener("touchmove",l1,{passive:!1})}()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function jg(){Uv-=1,Uv||window.removeEventListener("touchmove",l1,{passive:!1})}()}tryStart(t){let e=this.querySubjectEl(t);return!(!e||this.handleSelector&&!ec(t.target,this.handleSelector)||(this.subjectEl=e,this.isDragging=!0,this.wasTouchScroll=!1,0))}cleanup(){J0=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(t){return this.selector?ec(t.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Vv||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(J0=!0)}initScrollWatch(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(t,e){let r=0,s=0;return e?(this.origPageX=t.pageX,this.origPageY=t.pageY):(r=t.pageX-this.origPageX,s=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:r,deltaY:s}}createEventFromTouch(t,e){let s,o,r=t.touches,f=0,g=0;return r&&r.length?(s=r[0].pageX,o=r[0].pageY):(s=t.pageX,o=t.pageY),e?(this.origPageX=s,this.origPageY=o):(f=s-this.origPageX,g=o-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:s,pageY:o,deltaX:f,deltaY:g}}}function l1(i){J0&&i.preventDefault()}class W_{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(t,e,r){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=e-window.pageXOffset,this.origScreenY=r-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(t,e){this.deltaX=t-window.pageXOffset-this.origScreenX,this.deltaY=e-window.pageYOffset-this.origScreenY,this.updateElPosition()}setIsVisible(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)}stop(t,e){let r=()=>{this.cleanup(),e()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(t,e){let r=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();r.style.transition="top "+e+"ms,left "+e+"ms",Ed(r,{left:s.left,top:s.top}),function pg(i,t){let e=r=>{t(r),Am.forEach(s=>{i.removeEventListener(s,e)})};Am.forEach(r=>{i.addEventListener(r,e)})}(r,()=>{r.style.transition="",t()})}cleanup(){this.mirrorEl&&(kr(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Ed(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let t=this.sourceElRect,e=this.mirrorEl;return e||(e=this.mirrorEl=this.sourceEl.cloneNode(!0),e.style.userSelect="none",e.style.webkitUserSelect="none",e.classList.add("fc-event-dragging"),Ed(e,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(e)),e}}class Wv extends Km{constructor(t,e){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=t,this.doesListening=e,this.scrollTop=this.origScrollTop=t.getScrollTop(),this.scrollLeft=this.origScrollLeft=t.getScrollLeft(),this.scrollWidth=t.getScrollWidth(),this.scrollHeight=t.getScrollHeight(),this.clientWidth=t.getClientWidth(),this.clientHeight=t.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Ap extends Wv{constructor(t,e){super(new Og(t),e)}getEventTarget(){return this.scrollController.el}computeClientRect(){return B0(this.scrollController.el)}}class bx extends Wv{constructor(t){super(new Kf,t)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const $v="function"==typeof performance?performance.now:Date.now;class c1{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let t=this.computeBestEdge(this.pointerScreenX+window.pageXOffset,this.pointerScreenY+window.pageYOffset);if(t){let e=$v();this.handleSide(t,(e-this.msSinceRequest)/1e3),this.requestAnimation(e)}else this.isAnimating=!1}}}start(t,e,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,e))}handleMove(t,e){if(this.isEnabled){let r=t-window.pageXOffset,s=e-window.pageYOffset,o=null===this.pointerScreenY?0:s-this.pointerScreenY,f=null===this.pointerScreenX?0:r-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),f<0?this.everMovedLeft=!0:f>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation($v()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let t of this.scrollCaches)t.destroy();this.scrollCaches=null}}requestAnimation(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)}handleSide(t,e){let{scrollCache:r}=t,{edgeThreshold:s}=this,o=s-t.distance,f=o*o/(s*s)*this.maxVelocity*e,g=1;switch(t.name){case"left":g=-1;case"right":r.setScrollLeft(r.getScrollLeft()+f*g);break;case"top":g=-1;case"bottom":r.setScrollTop(r.getScrollTop()+f*g)}}computeBestEdge(t,e){let{edgeThreshold:r}=this,s=null,o=this.scrollCaches||[];for(let f of o){let g=f.clientRect,A=t-g.left,P=g.right-t,z=e-g.top,ie=g.bottom-e;A>=0&&P>=0&&z>=0&&ie>=0&&(z<=r&&this.everMovedUp&&f.canScrollUp()&&(!s||s.distance>z)&&(s={scrollCache:f,name:"top",distance:z}),ie<=r&&this.everMovedDown&&f.canScrollDown()&&(!s||s.distance>ie)&&(s={scrollCache:f,name:"bottom",distance:ie}),A<=r&&this.everMovedLeft&&f.canScrollLeft()&&(!s||s.distance>A)&&(s={scrollCache:f,name:"left",distance:A}),P<=r&&this.everMovedRight&&f.canScrollRight()&&(!s||s.distance>P)&&(s={scrollCache:f,name:"right",distance:P}))}return s}buildCaches(t){return this.queryScrollEls(t).map(e=>e===window?new bx(!1):new Ap(e,!1))}queryScrollEls(t){let e=[];for(let r of this.scrollQuery)"object"==typeof r?e.push(r):e.push(...Array.prototype.slice.call(t.getRootNode().querySelectorAll(r)));return e}}class Dp extends Me{constructor(t,e){super(t),this.containerEl=t,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=s=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,function V(i){i.style.userSelect="none",i.style.webkitUserSelect="none",i.addEventListener("selectstart",lu)}(document.body),function re(i){i.addEventListener("contextmenu",lu)}(document.body),s.isTouch||s.origEvent.preventDefault(),this.emitter.trigger("pointerdown",s),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(s.subjectEl,s.pageX,s.pageY),this.startDelay(s),this.minDistance||this.handleDistanceSurpassed(s)))},this.onPointerMove=s=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",s),!this.isDistanceSurpassed){let f,o=this.minDistance,{deltaX:g,deltaY:A}=s;f=g*g+A*A,f>=o*o&&this.handleDistanceSurpassed(s)}this.isDragging&&("scroll"!==s.origEvent.type&&(this.mirror.handleMove(s.pageX,s.pageY),this.autoScroller.handleMove(s.pageX,s.pageY)),this.emitter.trigger("dragmove",s))}},this.onPointerUp=s=>{this.isInteracting&&(this.isInteracting=!1,function Q(i){i.style.userSelect="",i.style.webkitUserSelect="",i.removeEventListener("selectstart",lu)}(document.body),function ue(i){i.removeEventListener("contextmenu",lu)}(document.body),this.emitter.trigger("pointerup",s),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(s)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new j_(t);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),e&&(r.selector=e),this.mirror=new W_,this.autoScroller=new c1}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(t){"number"==typeof this.delay?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)}handleDelayEnd(t){this.isDelayEnded=!0,this.tryStartDrag(t)}handleDistanceSurpassed(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)}tryStartDrag(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())}tryStopDrag(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))}stopDrag(t){this.isDragging=!1,this.emitter.trigger("dragend",t)}setIgnoreMove(t){this.pointer.shouldIgnoreMove=t}setMirrorIsVisible(t){this.mirror.setIsVisible(t)}setMirrorNeedsRevert(t){this.mirrorNeedsRevert=t}setAutoScrollEnabled(t){this.autoScroller.isEnabled=t}}class wx{constructor(t){this.origRect=N0(t),this.scrollCaches=k_(t).map(e=>new Ap(e,!0))}destroy(){for(let t of this.scrollCaches)t.destroy()}computeLeft(){let t=this.origRect.left;for(let e of this.scrollCaches)t+=e.origScrollLeft-e.getScrollLeft();return t}computeTop(){let t=this.origRect.top;for(let e of this.scrollCaches)t+=e.origScrollTop-e.getScrollTop();return t}isWithinClipping(t,e){let r={left:t,top:e};for(let s of this.scrollCaches)if(!Cx(s.getEventTarget())&&!E_(r,s.clientRect))return!1;return!0}}function Cx(i){let t=i.tagName;return"HTML"===t||"BODY"===t}class Q0{constructor(t,e){this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:s}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(s.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):s.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=e,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new Ym}processFirstCoord(t){let o,e={left:t.pageX,top:t.pageY},r=e,s=t.subjectEl;s instanceof HTMLElement&&(o=N0(s),r=function Io(i,t){return{left:Math.min(Math.max(i.left,t.left),t.right),top:Math.min(Math.max(i.top,t.top),t.bottom)}}(r,o));let f=this.initialHit=this.queryHitForOffset(r.left,r.top);if(f){if(this.useSubjectCenter&&o){let g=Ep(o,f.rect);g&&(r=function sm(i){return{left:(i.left+i.right)/2,top:(i.top+i.bottom)/2}}(g))}this.coordAdjust=function O0(i,t){return{left:i.left-t.left,top:i.top-t.top}}(r,e)}else this.coordAdjust={left:0,top:0}}handleMove(t,e){let r=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(e||!Xv(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,t))}prepareHits(){this.offsetTrackers=ld(this.droppableStore,t=>(t.component.prepareHits(),new wx(t.el)))}releaseHits(){let{offsetTrackers:t}=this;for(let e in t)t[e].destroy();this.offsetTrackers={}}queryHitForOffset(t,e){let{droppableStore:r,offsetTrackers:s}=this,o=null;for(let f in r){let g=r[f].component,A=s[f];if(A&&A.isWithinClipping(t,e)){let P=A.computeLeft(),z=A.computeTop(),ie=t-P,se=e-z,{origRect:oe}=A,_e=oe.right-oe.left,he=oe.bottom-oe.top;if(ie>=0&&ie<_e&&se>=0&&se<he){let Ae=g.queryHit(ie,se,_e,he);Ae&&kl(Ae.dateProfile.activeRange,Ae.dateSpan.range)&&(!o||Ae.layer>o.layer)&&(Ae.componentId=f,Ae.context=g.context,Ae.rect.left+=P,Ae.rect.right+=P,Ae.rect.top+=z,Ae.rect.bottom+=z,o=Ae)}}}return o}}function Xv(i,t){return!i&&!t||!!i==!!t&&function x_(i,t){return function Zp(i,t){return(null===i.start?null:i.start.valueOf())===(null===t.start?null:t.start.valueOf())&&(null===i.end?null:i.end.valueOf())===(null===t.end?null:t.end.valueOf())}(i.range,t.range)&&i.allDay===t.allDay&&function T0(i,t){for(let e in t)if("range"!==e&&"allDay"!==e&&i[e]!==t[e])return!1;for(let e in i)if(!(e in t))return!1;return!0}(i,t)}(i.dateSpan,t.dateSpan)}function ev(i,t){let e={};for(let r of t.pluginHooks.datePointTransforms)Object.assign(e,r(i,t));return Object.assign(e,function Ex(i,t){return{date:t.toDate(i.range.start),dateStr:t.formatIso(i.range.start,{omitTime:i.allDay}),allDay:i.allDay}}(i,t.dateEnv)),e}let h1=(()=>{class i extends wp{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=g=>{let A=g.origEvent.target,{component:P,dragging:z}=this,{mirror:ie}=z,{options:se}=P.context,oe=P.context;this.subjectEl=g.subjectEl;let _e=this.subjectSeg=dd(g.subjectEl),Ae=(this.eventRange=_e.eventRange).instance.instanceId;this.relevantEvents=Jp(oe.getCurrentData().eventStore,Ae),z.minDistance=g.isTouch?0:se.eventDragMinDistance,z.delay=g.isTouch&&Ae!==P.props.eventSelection?function Wd(i){let{options:t}=i.context,e=t.eventLongPressDelay;return null==e&&(e=t.longPressDelay),e}(P):null,ie.parentNode=se.fixedMirrorParent?se.fixedMirrorParent:ec(A,".fc"),ie.revertDuration=se.dragRevertDuration;let Ke=P.isValidSegDownEl(A)&&!ec(A,".fc-event-resizer");z.setIgnoreMove(!Ke),this.isDragging=Ke&&g.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=g=>{let A=this.component.context,P=this.eventRange,z=P.instance.instanceId;g.isTouch?z!==this.component.props.eventSelection&&A.dispatch({type:"SELECT_EVENT",eventInstanceId:z}):A.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(A.calendarApi.unselect(g),A.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Lo(A,P.def,P.instance),jsEvent:g.origEvent,view:A.viewApi}))},this.handleHitUpdate=(g,A)=>{if(!this.isDragging)return;let P=this.relevantEvents,z=this.hitDragging.initialHit,ie=this.component.context,se=null,oe=null,_e=null,he=!1,Ae={affectedEvents:P,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(g){se=g.context;let Ke=se.options;ie===se||Ke.editable&&Ke.droppable?(oe=function d1(i,t,e){let r=i.dateSpan,s=t.dateSpan,o=r.range.start,f=s.range.start,g={};r.allDay!==s.allDay&&(g.allDay=s.allDay,g.hasEnd=t.context.options.allDayMaintainDuration,s.allDay&&(o=ua(o)));let A=$c(o,f,i.context.dateEnv,i.componentId===t.componentId?i.largeUnit:null);A.milliseconds&&(g.allDay=!1);let P={datesDelta:A,standardProps:g};for(let z of e)z(P,i,t);return P}(z,g,se.getCurrentData().pluginHooks.eventDragMutationMassagers),oe&&(_e=_0(P,se.getCurrentData().eventUiBases,oe,se),Ae.mutatedEvents=_e,Ay(Ae,g.dateProfile,se)||(he=!0,oe=null,_e=null,Ae.mutatedEvents={defs:{},instances:{}}))):se=null}this.displayDrag(se,Ae),he?I():Y(),A||(ie===se&&Xv(z,g)&&(oe=null),this.dragging.setMirrorNeedsRevert(!oe),this.dragging.setMirrorIsVisible(!g||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=se,this.validMutation=oe,this.mutatedRelevantEvents=_e)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=g=>{if(this.isDragging){let A=this.component.context,P=A.viewApi,{receivingContext:z,validMutation:ie}=this,se=this.eventRange.def,oe=this.eventRange.instance,_e=new Lo(A,se,oe),he=this.relevantEvents,Ae=this.mutatedRelevantEvents,{finalHit:Ke}=this.hitDragging;if(this.clearDrag(),A.emitter.trigger("eventDragStop",{el:this.subjectEl,event:_e,jsEvent:g.origEvent,view:P}),ie){if(z===A){let ct=new Lo(A,Ae.defs[se.defId],oe?Ae.instances[oe.instanceId]:null);A.dispatch({type:"MERGE_EVENTS",eventStore:Ae});let pt={oldEvent:_e,event:ct,relatedEvents:Ah(Ae,A,oe),revert(){A.dispatch({type:"MERGE_EVENTS",eventStore:he})}},mi={};for(let Fi of A.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(mi,Fi(ie,A));A.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},pt),mi),{el:g.subjectEl,delta:ie.datesDelta,jsEvent:g.origEvent,view:P})),A.emitter.trigger("eventChange",pt)}else if(z){let ct={event:_e,relatedEvents:Ah(he,A,oe),revert(){A.dispatch({type:"MERGE_EVENTS",eventStore:he})}};A.emitter.trigger("eventLeave",Object.assign(Object.assign({},ct),{draggedEl:g.subjectEl,view:P})),A.dispatch({type:"REMOVE_EVENTS",eventStore:he}),A.emitter.trigger("eventRemove",ct);let mi=Ae.instances[oe.instanceId],Fi=new Lo(z,Ae.defs[se.defId],mi);z.dispatch({type:"MERGE_EVENTS",eventStore:Ae});let Ki={event:Fi,relatedEvents:Ah(Ae,z,mi),revert(){z.dispatch({type:"REMOVE_EVENTS",eventStore:Ae})}};z.emitter.trigger("eventAdd",Ki),g.isTouch&&z.dispatch({type:"SELECT_EVENT",eventInstanceId:oe.instanceId}),z.emitter.trigger("drop",Object.assign(Object.assign({},ev(Ke.dateSpan,z)),{draggedEl:g.subjectEl,jsEvent:g.origEvent,view:Ke.context.viewApi})),z.emitter.trigger("eventReceive",Object.assign(Object.assign({},Ki),{draggedEl:g.subjectEl,view:Ke.context.viewApi}))}}else A.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:r}=this,{options:s}=r.context,o=this.dragging=new Dp(e.el);o.pointer.selector=i.SELECTOR,o.touchScrollAllowed=!1,o.autoScroller.isEnabled=s.dragScroll;let f=this.hitDragging=new Q0(this.dragging,I0);f.useSubjectCenter=e.useEventCenter,f.emitter.on("pointerdown",this.handlePointerDown),f.emitter.on("dragstart",this.handleDragStart),f.emitter.on("hitupdate",this.handleHitUpdate),f.emitter.on("pointerup",this.handlePointerUp),f.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,r){let o=this.receivingContext;o&&o!==e&&o.dispatch(o===this.component.context?{type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}:{type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:r})}clearDrag(){let e=this.component.context,{receivingContext:r}=this;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),e!==r&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return i.SELECTOR=".fc-event-draggable, .fc-event-resizable",i})();const Ce={fixedMirrorParent:tn},qe={dateClick:tn,eventDragStart:tn,eventDragStop:tn,eventDrop:tn,eventResizeStart:tn,eventResizeStop:tn,eventResize:tn,drop:tn,eventReceive:tn,eventLeave:tn};Lt.dataAttrPrefix="";var $r=jd({name:"@fullcalendar/interaction",componentInteractions:[class tv extends wp{constructor(t){super(t),this.handlePointerDown=r=>{let{dragging:s}=this;s.setIgnoreMove(!this.component.isValidDateDownEl(r.origEvent.target))},this.handleDragEnd=r=>{let{component:s}=this,{pointer:o}=this.dragging;if(!o.wasTouchScroll){let{initialHit:f,finalHit:g}=this.hitDragging;if(f&&g&&Xv(f,g)){let{context:A}=s,P=Object.assign(Object.assign({},ev(f.dateSpan,A)),{dayEl:f.dayEl,jsEvent:r.origEvent,view:A.viewApi||A.calendarApi.view});A.emitter.trigger("dateClick",P)}}},this.dragging=new Dp(t.el),this.dragging.autoScroller.isEnabled=!1;let e=this.hitDragging=new Q0(this.dragging,Cp(t));e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class kx extends wp{constructor(t){super(t),this.dragSelection=null,this.handlePointerDown=f=>{let{component:g,dragging:A}=this,{options:P}=g.context,z=P.selectable&&g.isValidDateDownEl(f.origEvent.target);A.setIgnoreMove(!z),A.delay=f.isTouch?function Tx(i){let{options:t}=i.context,e=t.selectLongPressDelay;return null==e&&(e=t.longPressDelay),e}(g):null},this.handleDragStart=f=>{this.component.context.calendarApi.unselect(f)},this.handleHitUpdate=(f,g)=>{let{context:A}=this.component,P=null,z=!1;if(f){let ie=this.hitDragging.initialHit;f.componentId===ie.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(ie,f)||(P=function u1(i,t,e){let r=i.dateSpan,s=t.dateSpan,o=[r.range.start,r.range.end,s.range.start,s.range.end];o.sort(vt);let f={};for(let g of e){let A=g(i,t);if(!1===A)return null;A&&Object.assign(f,A)}return f.range={start:o[0],end:o[3]},f.allDay=r.allDay,f}(ie,f,A.pluginHooks.dateSelectionTransformers)),(!P||!function Dy(i,t,e){return!!kl(t.validRange,i.range)&&Dh({dateSelection:i},e)}(P,f.dateProfile,A))&&(z=!0,P=null)}P?A.dispatch({type:"SELECT_DATES",selection:P}):g||A.dispatch({type:"UNSELECT_DATES"}),z?I():Y(),g||(this.dragSelection=P)},this.handlePointerUp=f=>{this.dragSelection&&(Vm(this.dragSelection,f,this.component.context),this.dragSelection=null)};let{component:e}=t,{options:r}=e.context,s=this.dragging=new Dp(t.el);s.touchScrollAllowed=!1,s.minDistance=r.selectMinDistance||0,s.autoScroller.isEnabled=r.dragScroll;let o=this.hitDragging=new Q0(this.dragging,Cp(t));o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},h1,class E extends wp{constructor(t){super(t),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let{component:f}=this,A=dd(this.querySegEl(o)),P=this.eventRange=A.eventRange;this.dragging.minDistance=f.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&this.component.props.eventSelection!==P.instance.instanceId)},this.handleDragStart=o=>{let{context:f}=this.component,g=this.eventRange;this.relevantEvents=Jp(f.getCurrentData().eventStore,this.eventRange.instance.instanceId);let A=this.querySegEl(o);this.draggingSegEl=A,this.draggingSeg=dd(A),f.calendarApi.unselect(),f.emitter.trigger("eventResizeStart",{el:A,event:new Lo(f,g.def,g.instance),jsEvent:o.origEvent,view:f.viewApi})},this.handleHitUpdate=(o,f,g)=>{let{context:A}=this.component,P=this.relevantEvents,z=this.hitDragging.initialHit,ie=this.eventRange.instance,se=null,oe=null,_e=!1,he={affectedEvents:P,mutatedEvents:{defs:{},instances:{}},isEvent:!0};o&&(o.componentId===z.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(z,o)||(se=function F(i,t,e,r){let s=i.context.dateEnv,g=$c(i.dateSpan.range.start,t.dateSpan.range.start,s,i.largeUnit);if(e){if(s.add(r.start,g)<r.end)return{startDelta:g}}else if(s.add(r.end,g)>r.start)return{endDelta:g};return null}(z,o,g.subjectEl.classList.contains("fc-event-resizer-start"),ie.range))),se&&(oe=_0(P,A.getCurrentData().eventUiBases,se,A),he.mutatedEvents=oe,Ay(he,o.dateProfile,A)||(_e=!0,se=null,oe=null,he.mutatedEvents=null)),A.dispatch(oe?{type:"SET_EVENT_RESIZE",state:he}:{type:"UNSET_EVENT_RESIZE"}),_e?I():Y(),f||(se&&Xv(z,o)&&(se=null),this.validMutation=se,this.mutatedRelevantEvents=oe)},this.handleDragEnd=o=>{let{context:f}=this.component,g=this.eventRange.def,A=this.eventRange.instance,P=new Lo(f,g,A),z=this.relevantEvents,ie=this.mutatedRelevantEvents;if(f.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:P,jsEvent:o.origEvent,view:f.viewApi}),this.validMutation){let se=new Lo(f,ie.defs[g.defId],A?ie.instances[A.instanceId]:null);f.dispatch({type:"MERGE_EVENTS",eventStore:ie});let oe={oldEvent:P,event:se,relatedEvents:Ah(ie,f,A),revert(){f.dispatch({type:"MERGE_EVENTS",eventStore:z})}};f.emitter.trigger("eventResize",Object.assign(Object.assign({},oe),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||xt(0),endDelta:this.validMutation.endDelta||xt(0),jsEvent:o.origEvent,view:f.viewApi})),f.emitter.trigger("eventChange",oe)}else f.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:e}=t,r=this.dragging=new Dp(t.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=e.context.options.dragScroll;let s=this.hitDragging=new Q0(this.dragging,Cp(t));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(t){return ec(t.subjectEl,".fc-event")}}],calendarInteractions:[class ee{constructor(t){this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let s=this.context.options.unselectCancel,o=kd(r.origEvent);this.matchesCancel=!!ec(o,s),this.matchesEvent=!!ec(o,h1.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:s}=this,{documentPointer:o}=this,f=s.getCurrentData();if(!o.wasTouchScroll){if(f.dateSelection&&!this.isRecentPointerDateSelect){let g=s.options.unselectAuto;g&&(!g||!this.matchesCancel)&&s.calendarApi.unselect(r)}f.eventSelection&&!this.matchesEvent&&s.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let e=this.documentPointer=new j_(document);e.shouldIgnoreMove=!0,e.shouldWatchScroll=!1,e.emitter.on("pointerdown",this.onDocumentPointerDown),e.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:Dp,optionRefiners:Ce,listenerRefiners:qe});class fs extends Nu{constructor(){super(...arguments),this.headerElRef={current:null}}renderSimpleLayout(t,e){let{props:r,context:s}=this,o=[],f=G0(s.options);return t&&o.push({type:"header",key:"header",isSticky:f,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:e}}),Ut(Pd,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},Ut(Lv,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:o}))}renderHScrollLayout(t,e,r,s){let o=this.context.pluginHooks.scrollGridImpl;if(!o)throw new Error("No ScrollGrid implementation");let{props:f,context:g}=this,A=!f.forPrint&&G0(g.options),P=!f.forPrint&&Ry(g.options),z=[];return t&&z.push({type:"header",key:"header",isSticky:A,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),z.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:e}]}),P&&z.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ml}]}),Ut(Pd,{elClasses:["fc-daygrid"],viewSpec:g.viewSpec},Ut(o,{liquid:!f.isHeightAuto&&!f.forPrint,forPrint:f.forPrint,collapsibleWidth:f.forPrint,colGroups:[{cols:[{span:r,minWidth:s}]}],sections:z}))}}function Is(i,t){let e=[];for(let r=0;r<t;r+=1)e[r]=[];for(let r of i)e[r.row].push(r);return e}function ma(i,t){let e=[];for(let r=0;r<t;r+=1)e[r]=[];for(let r of i)e[r.firstCol].push(r);return e}function Ns(i,t){let e=[];if(i){for(let r=0;r<t;r+=1)e[r]={affectedInstances:i.affectedInstances,isEvent:i.isEvent,segs:[]};for(let r of i.segs)e[r.row].segs.push(r)}else for(let r=0;r<t;r+=1)e[r]=null;return e}const fa=So({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function Ga(i){let{display:t}=i.eventRange.ui;return"list-item"===t||"auto"===t&&!i.eventRange.def.allDay&&i.firstCol===i.lastCol&&i.isStart&&i.isEnd}class qh extends da{render(){let{props:t}=this;return Ut(Vd,Object.assign({},t,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:fa,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))}}class th extends da{render(){let{props:t,context:e}=this,{options:r}=e,{seg:s}=t,f=xp(s,r.eventTimeFormat||fa,e,!0,t.defaultDisplayEventEnd);return Ut(Vl,Object.assign({},t,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Ag(t.seg,e),defaultGenerator:ih,timeText:f,isResizing:!1,isDateSelecting:!1}))}}function ih(i){return Ut(Aa,null,Ut("div",{className:"fc-daygrid-event-dot",style:{borderColor:i.borderColor||i.backgroundColor}}),i.timeText&&Ut("div",{className:"fc-event-time"},i.timeText),Ut("div",{className:"fc-event-title"},i.event.title||Ut(Aa,null,"\xa0")))}class rc extends da{constructor(){super(...arguments),this.compileSegs=Ur(nh)}render(){let{props:t}=this,{allSegs:e,invisibleSegs:r}=this.compileSegs(t.singlePlacements);return Ut(Pv,{elClasses:["fc-daygrid-more-link"],dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:e,hiddenSegs:r,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:()=>{let s=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return Ut(Aa,null,e.map(o=>{let f=o.eventRange.instance.instanceId;return Ut("div",{className:"fc-daygrid-event-harness",key:f,style:{visibility:s[f]?"hidden":""}},Ga(o)?Ut(th,Object.assign({seg:o,isDragging:!1,isSelected:f===t.eventSelection,defaultDisplayEventEnd:!1},fd(o,t.todayRange))):Ut(qh,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:f===t.eventSelection,defaultDisplayEventEnd:!1},fd(o,t.todayRange))))}))}})}}function nh(i){let t=[],e=[];for(let r of i)t.push(r.seg),r.isVisible||e.push(r.seg);return{allSegs:t,invisibleSegs:e}}const Sf=So({week:"narrow"});class Zv extends Nu{constructor(){super(...arguments),this.rootElRef={current:null},this.state={dayNumberId:ad()},this.handleRootEl=t=>{vf(this.rootElRef,t),vf(this.props.elRef,t)}}render(){let{context:t,props:e,state:r,rootElRef:s}=this,{options:o,dateEnv:f}=t,{date:g,dateProfile:A}=e;const P=e.showDayNumber&&function Sx(i,t,e){const{start:r,end:s}=t,o=xs(s,-1),f=e.getYear(r),g=e.getMonth(r),A=e.getYear(o),P=e.getMonth(o);return!(f===A&&g===P)&&(i.valueOf()===r.valueOf()||1===e.getDay(i)&&i.valueOf()<s.valueOf())}(g,A.currentRange,f);return Ut(H0,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...e.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},e.extraDataAttrs),e.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:fm,date:g,dateProfile:A,todayRange:e.todayRange,showDayNumber:e.showDayNumber,isMonthStart:P,extraRenderProps:e.extraRenderProps},(z,ie)=>Ut("div",{ref:e.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:e.minHeight}},e.showWeekNumber&&Ut(R_,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Hd(t,g,"week"),date:g,defaultFormat:Sf}),!ie.isDisabled&&(e.showDayNumber||O_(o)||e.forceDayTop)?Ut("div",{className:"fc-daygrid-day-top"},Ut(z,{elTag:"a",elClasses:["fc-daygrid-day-number",P&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Hd(t,g)),{id:r.dayNumberId})})):e.showDayNumber?Ut("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Ut("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,Ut("div",{className:"fc-daygrid-day-events",ref:e.fgContentElRef},e.fgContent,Ut("div",{className:"fc-daygrid-day-bottom",style:{marginTop:e.moreMarginTop}},Ut(rc,{allDayDate:g,singlePlacements:e.singlePlacements,moreCnt:e.moreCnt,alignmentElRef:s,alignGridTop:!e.showDayNumber,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange}))),Ut("div",{className:"fc-daygrid-day-bg"},e.bgContent)))}}function fm(i){return i.dayNumberText||Ut(Aa,null,"\xa0")}function f1(i){return i.eventRange.instance.instanceId+":"+i.firstCol}function np(i){return f1(i)+":"+i.lastCol}function pm(i,t,e,r){if(i.firstCol===t&&i.lastCol===e-1)return i;let s=i.eventRange,o=s.range,f=Fd(o,{start:r[t].date,end:Ir(r[e-1].date,1)});return Object.assign(Object.assign({},i),{firstCol:t,lastCol:e-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:f},isStart:i.isStart&&f.start.valueOf()===o.start.valueOf(),isEnd:i.isEnd&&f.end.valueOf()===o.end.valueOf()})}class p1 extends z0{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(t){const e=super.addSegs(t),{entriesByLevel:r}=this,s=o=>!this.forceHidden[Ef(o)];for(let o=0;o<r.length;o+=1)r[o]=r[o].filter(s);return e}handleInvalidInsertion(t,e,r){const{entriesByLevel:s,forceHidden:o}=this,{touchingEntry:f,touchingLevel:g,touchingLateral:A}=t;if(this.hiddenConsumes&&f){const P=Ef(f);if(!o[P])if(this.allowReslicing){const z=Object.assign(Object.assign({},f),{span:S(f.span,e.span)});o[Ef(z)]=!0,s[g][A]=z,r.push(z),this.splitEntry(f,e,r)}else o[P]=!0,r.push(f)}super.handleInvalidInsertion(t,e,r)}}class Ax extends Nu{constructor(){super(...arguments),this.cellElRefs=new Sp,this.frameElRefs=new Sp,this.fgElRefs=new Sp,this.segHarnessRefs=new Sp,this.rootElRef={current:null},this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=t=>{t&&this.updateSizing(!0)}}render(){let{props:t,state:e,context:r}=this,{options:s}=r,o=t.cells.length,f=ma(t.businessHourSegs,o),g=ma(t.bgEventSegs,o),A=ma(this.getHighlightSegs(),o),P=ma(this.getMirrorSegs(),o),{singleColPlacements:z,multiColPlacements:ie,moreCnts:se,moreMarginTops:oe}=function iv(i,t,e,r,s,o,f){let g=new p1(Ke=>s[i[Ke.index].eventRange.instance.instanceId+":"+Ke.span.start+":"+(Ke.span.end-1)]||1);g.allowReslicing=!0,g.strictOrder=r,!0===t||!0===e?(g.maxCoord=o,g.hiddenConsumes=!0):"number"==typeof t?g.maxStackCnt=t:"number"==typeof e&&(g.maxStackCnt=e,g.hiddenConsumes=!0);let A=[],P=[];for(let Ke=0;Ke<i.length;Ke+=1){let ct=i[Ke],pt=np(ct);null!=s[pt]?A.push({index:Ke,span:{start:ct.firstCol,end:ct.lastCol+1}}):P.push(ct)}let z=g.addSegs(A),ie=g.toRects(),{singleColPlacements:se,multiColPlacements:oe,leftoverMargins:_e}=function Vb(i,t,e){let r=function Ub(i,t){let e=[];for(let r=0;r<t;r+=1)e.push([]);for(let r of i)for(let s=r.span.start;s<r.span.end;s+=1)e[s].push(r);return e}(i,e.length),s=[],o=[],f=[];for(let g=0;g<e.length;g+=1){let A=r[g],P=[],z=0,ie=0;for(let oe of A)P.push({seg:pm(t[oe.index],g,g+1,e),isVisible:!0,isAbsolute:!1,absoluteTop:oe.levelCoord,marginTop:oe.levelCoord-z}),z=oe.levelCoord+oe.thickness;let se=[];z=0,ie=0;for(let oe of A){let _e=t[oe.index],Ae=oe.span.start===g;ie+=oe.levelCoord-z,z=oe.levelCoord+oe.thickness,oe.span.end-oe.span.start>1?(ie+=oe.thickness,Ae&&se.push({seg:pm(_e,oe.span.start,oe.span.end,e),isVisible:!0,isAbsolute:!0,absoluteTop:oe.levelCoord,marginTop:0})):Ae&&(se.push({seg:pm(_e,oe.span.start,oe.span.end,e),isVisible:!0,isAbsolute:!1,absoluteTop:oe.levelCoord,marginTop:ie}),ie=0)}s.push(P),o.push(se),f.push(ie)}return{singleColPlacements:s,multiColPlacements:o,leftoverMargins:f}}(ie,i,f),he=[],Ae=[];for(let Ke of P){oe[Ke.firstCol].push({seg:Ke,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let ct=Ke.firstCol;ct<=Ke.lastCol;ct+=1)se[ct].push({seg:pm(Ke,ct,ct+1,f),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let Ke=0;Ke<f.length;Ke+=1)he.push(0);for(let Ke of z){let ct=i[Ke.index],pt=Ke.span;oe[pt.start].push({seg:pm(ct,pt.start,pt.end,f),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let mi=pt.start;mi<pt.end;mi+=1)he[mi]+=1,se[mi].push({seg:pm(ct,mi,mi+1,f),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let Ke=0;Ke<f.length;Ke+=1)Ae.push(_e[Ke]);return{singleColPlacements:se,multiColPlacements:oe,moreCnts:he,moreMarginTops:Ae}}(Sg(t.fgEventSegs,s.eventOrder),t.dayMaxEvents,t.dayMaxEventRows,s.eventOrderStrict,e.segHeights,e.maxContentHeight,t.cells),_e=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{};return Ut("tr",{ref:this.rootElRef,role:"row"},t.renderIntro&&t.renderIntro(),t.cells.map((he,Ae)=>{let Ke=this.renderFgSegs(Ae,t.forPrint?z[Ae]:ie[Ae],t.todayRange,_e),ct=this.renderFgSegs(Ae,function jb(i,t){if(!i.length)return[];let e=function uC(i){let t={};for(let e of i)for(let r of e)t[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return t}(t);return i.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:e[r.eventRange.instance.instanceId],marginTop:0}))}(P[Ae],ie),t.todayRange,{},!!t.eventDrag,!!t.eventResize,!1);return Ut(Zv,{key:he.key,elRef:this.cellElRefs.createRef(he.key),innerElRef:this.frameElRefs.createRef(he.key),dateProfile:t.dateProfile,date:he.date,showDayNumber:t.showDayNumbers,showWeekNumber:t.showWeekNumbers&&0===Ae,forceDayTop:t.showWeekNumbers,todayRange:t.todayRange,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,extraRenderProps:he.extraRenderProps,extraDataAttrs:he.extraDataAttrs,extraClassNames:he.extraClassNames,extraDateSpan:he.extraDateSpan,moreCnt:se[Ae],moreMarginTop:oe[Ae],singlePlacements:z[Ae],fgContentElRef:this.fgElRefs.createRef(he.key),fgContent:Ut(Aa,null,Ut(Aa,null,Ke),Ut(Aa,null,ct)),bgContent:Ut(Aa,null,this.renderFillSegs(A[Ae],"highlight"),this.renderFillSegs(f[Ae],"non-business"),this.renderFillSegs(g[Ae],"bg-event")),minHeight:t.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(t,e){this.updateSizing(!$o(t,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:t}=this;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs}getMirrorSegs(){let{props:t}=this;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]}renderFgSegs(t,e,r,s,o,f,g){let{context:A}=this,{eventSelection:P}=this.props,{framePositions:z}=this.state,ie=1===this.props.cells.length,se=o||f||g,oe=[];if(z)for(let _e of e){let{seg:he}=_e,{instanceId:Ae}=he.eventRange.instance,Ke=_e.isVisible&&!s[Ae],ct=_e.isAbsolute,pt="",mi="";ct&&(A.isRtl?(mi=0,pt=z.lefts[he.lastCol]-z.lefts[he.firstCol]):(pt=0,mi=z.rights[he.firstCol]-z.rights[he.lastCol])),oe.push(Ut("div",{className:"fc-daygrid-event-harness"+(ct?" fc-daygrid-event-harness-abs":""),key:f1(he),ref:se?null:this.segHarnessRefs.createRef(np(he)),style:{visibility:Ke?"":"hidden",marginTop:ct?"":_e.marginTop,top:ct?_e.absoluteTop:"",left:pt,right:mi}},Ga(he)?Ut(th,Object.assign({seg:he,isDragging:o,isSelected:Ae===P,defaultDisplayEventEnd:ie},fd(he,r))):Ut(qh,Object.assign({seg:he,isDragging:o,isResizing:f,isDateSelecting:g,isSelected:Ae===P,defaultDisplayEventEnd:ie},fd(he,r)))))}return oe}renderFillSegs(t,e){let{isRtl:r}=this.context,{todayRange:s}=this.props,{framePositions:o}=this.state,f=[];if(o)for(let g of t){let A=r?{right:0,left:o.lefts[g.lastCol]-o.lefts[g.firstCol]}:{left:0,right:o.rights[g.firstCol]-o.rights[g.lastCol]};f.push(Ut("div",{key:E0(g.eventRange),className:"fc-daygrid-bg-harness",style:A},"bg-event"===e?Ut(V0,Object.assign({seg:g},fd(g,s))):lm(e)))}return Ut(Aa,{},...f)}updateSizing(t){let{props:e,state:r,frameElRefs:s}=this;if(!e.forPrint&&null!==e.clientWidth){if(t){let A=e.cells.map(P=>s.currentMap[P.key]);if(A.length){let P=this.rootElRef.current,z=new om(P,A,!0,!1);(!r.framePositions||!r.framePositions.similarTo(z))&&this.setState({framePositions:new om(P,A,!0,!1)})}}const o=this.state.segHeights,f=this.querySegHeights(),g=!0===e.dayMaxEvents||!0===e.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},o),f),maxContentHeight:g?this.computeMaxContentHeight():null})}}querySegHeights(){let t=this.segHarnessRefs.currentMap,e={};for(let r in t){let s=Math.round(t[r].getBoundingClientRect().height);e[r]=Math.max(e[r]||0,s)}return e}computeMaxContentHeight(){let t=this.props.cells[0].key,r=this.fgElRefs.currentMap[t];return this.cellElRefs.currentMap[t].getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let t=this.cellElRefs.currentMap;return this.props.cells.map(e=>t[e.key])}}Ax.addStateEquality({segHeights:$o});class Wb extends Nu{constructor(){super(...arguments),this.splitBusinessHourSegs=Ur(Is),this.splitBgEventSegs=Ur(Is),this.splitFgEventSegs=Ur(Is),this.splitDateSelectionSegs=Ur(Is),this.splitEventDrag=Ur(Ns),this.splitEventResize=Ur(Ns),this.rowRefs=new Sp}render(){let{props:t,context:e}=this,r=t.cells.length,s=this.splitBusinessHourSegs(t.businessHourSegs,r),o=this.splitBgEventSegs(t.bgEventSegs,r),f=this.splitFgEventSegs(t.fgEventSegs,r),g=this.splitDateSelectionSegs(t.dateSelectionSegs,r),A=this.splitEventDrag(t.eventDrag,r),P=this.splitEventResize(t.eventResize,r),z=r>=7&&t.clientWidth?t.clientWidth/e.options.aspectRatio/6:null;return Ut(eg,{unit:"day"},(ie,se)=>Ut(Aa,null,t.cells.map((oe,_e)=>Ut(Ax,{ref:this.rowRefs.createRef(_e),key:oe.length?oe[0].date.toISOString():_e,showDayNumbers:r>1,showWeekNumbers:t.showWeekNumbers,todayRange:se,dateProfile:t.dateProfile,cells:oe,renderIntro:t.renderRowIntro,businessHourSegs:s[_e],eventSelection:t.eventSelection,bgEventSegs:o[_e].filter($b),fgEventSegs:f[_e],dateSelectionSegs:g[_e],eventDrag:A[_e],eventResize:P[_e],dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,clientWidth:t.clientWidth,clientHeight:t.clientHeight,cellMinHeight:z,forPrint:t.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const t=this.rowRefs.currentMap[0].getCellEls()[0],e=t?t.closest(".fc-daygrid-body"):null;e&&(this.rootEl=e,this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new om(this.rootEl,this.rowRefs.collect().map(t=>t.getCellEls()[0]),!1,!0),this.colPositions=new om(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(t,e){let{colPositions:r,rowPositions:s}=this,o=r.leftToIndex(t),f=s.topToIndex(e);if(null!=f&&null!=o){let g=this.props.cells[f][o];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(f,o),allDay:!0},g.extraDateSpan),dayEl:this.getCellEl(f,o),rect:{left:r.lefts[o],right:r.rights[o],top:s.tops[f],bottom:s.bottoms[f]},layer:0}}return null}getCellEl(t,e){return this.rowRefs.currentMap[t].getCellEls()[e]}getCellRange(t,e){let r=this.props.cells[t][e].date;return{start:r,end:Ir(r,1)}}}function $b(i){return i.eventRange.def.allDay}class Xb extends Nu{constructor(){super(...arguments),this.elRef={current:null},this.needsScrollReset=!1}render(){let{props:t}=this,{dayMaxEventRows:e,dayMaxEvents:r,expandRows:s}=t,o=!0===r||!0===e;return o&&!s&&(o=!1,e=null,r=null),Ut("div",{ref:this.elRef,className:["fc-daygrid-body",o?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"].join(" "),style:{width:t.clientWidth,minWidth:t.tableMinWidth}},Ut("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:t.clientWidth,minWidth:t.tableMinWidth,height:s?t.clientHeight:""}},t.colGroupNode,Ut("tbody",{role:"presentation"},Ut(Wb,{dateProfile:t.dateProfile,cells:t.cells,renderRowIntro:t.renderRowIntro,showWeekNumbers:t.showWeekNumbers,clientWidth:t.clientWidth,clientHeight:t.clientHeight,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,dayMaxEvents:r,dayMaxEventRows:e,forPrint:t.forPrint,isHitComboAllowed:t.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(t){t.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const t=function hC(i,t){let e;return t.currentRangeUnit.match(/year|month/)&&(e=i.querySelector(`[data-date="${function lp(i){return i.toISOString().match(/^\d{4}-\d{2}/)[0]}(t.currentDate)}-01"]`)),e||(e=i.querySelector(`[data-date="${Ou(t.currentDate)}"]`)),e}(this.elRef.current,this.props.dateProfile);if(t){const e=t.closest(".fc-daygrid-body"),r=e.closest(".fc-scroller"),s=t.getBoundingClientRect().top-e.getBoundingClientRect().top;r.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}class Dx extends A_{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(t,e){return e.sliceRange(t)}}class Ix extends Nu{constructor(){super(...arguments),this.slicer=new Dx,this.tableRef={current:null}}render(){let{props:t,context:e}=this;return Ut(Xb,Object.assign({ref:this.tableRef},this.slicer.sliceProps(t,t.dateProfile,t.nextDayThreshold,e,t.dayTableModel),{dateProfile:t.dateProfile,cells:t.dayTableModel.cells,colGroupNode:t.colGroupNode,tableMinWidth:t.tableMinWidth,renderRowIntro:t.renderRowIntro,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.showWeekNumbers,expandRows:t.expandRows,headerAlignElRef:t.headerAlignElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:t.forPrint}))}}function qb(i,t){let e=new T_(i.renderRange,t);return new S_(e,/year|month|week/.test(i.currentRangeUnit))}yh(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var $_=jd({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class Zb extends fs{constructor(){super(...arguments),this.buildDayTableModel=Ur(qb),this.headerRef={current:null},this.tableRef={current:null}}render(){let{options:t,dateProfileGenerator:e}=this.context,{props:r}=this,s=this.buildDayTableModel(r.dateProfile,e),o=t.dayHeaders&&Ut(Zh,{ref:this.headerRef,dateProfile:r.dateProfile,dates:s.headerDates,datesRepDistinctDays:1===s.rowCnt}),f=g=>Ut(Ix,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:s,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:t.nextDayThreshold,colGroupNode:g.tableColGroupNode,tableMinWidth:g.tableMinWidth,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:g.clientWidth,clientHeight:g.clientHeight,forPrint:r.forPrint});return t.dayMinWidth?this.renderHScrollLayout(o,f,s.colCnt,t.dayMinWidth):this.renderSimpleLayout(o,f)}},dateProfileGeneratorClass:class Mx extends Xc{buildRenderRange(t,e,r){let s=super.buildRenderRange(t,e,r),{props:o}=this;return function Ox(i){let o,{dateEnv:t,currentRange:e}=i,{start:r,end:s}=e;if(i.snapToWeek&&(r=t.startOfWeek(r),o=t.startOfWeek(s),o.valueOf()!==s.valueOf()&&(s=Sr(o,1))),i.fixedWeekCount){let f=t.startOfWeek(t.startOfMonth(Ir(e.end,-1))),g=Math.ceil(function cs(i,t){return zr(i,t)/7}(f,s));s=Sr(s,6-g)}return{start:r,end:s}}({currentRange:s,snapToWeek:/^(year|month)$/.test(e),fixedWeekCount:o.fixedWeekCount,dateEnv:o.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class Rx extends Wm{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(t){return t.allDay?["allDay"]:["timed"]}getKeysForEventDef(t){return t.allDay?function yp(i){return"background"===i.ui.display||"inverse-background"===i.ui.display}(t)?["timed","allDay"]:["allDay"]:["timed"]}}const Jb=So({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function c(i){let t=["fc-timegrid-slot","fc-timegrid-slot-label",i.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return Ut(Th.Consumer,null,e=>{if(!i.isLabeled)return Ut("td",{className:t.join(" "),"data-time":i.isoTimeStr});let{dateEnv:r,options:s,viewApi:o}=e,f=null==s.slotLabelFormat?Jb:Array.isArray(s.slotLabelFormat)?So(s.slotLabelFormat[0]):So(s.slotLabelFormat),g={level:0,time:i.time,date:r.toDate(i.date),view:o,text:r.format(i.date,f)};return Ut(Tc,{elTag:"td",elClasses:t,elAttrs:{"data-time":i.isoTimeStr},renderProps:g,generatorName:"slotLabelContent",customGenerator:s.slotLabelContent,defaultGenerator:a,classNameGenerator:s.slotLabelClassNames,didMount:s.slotLabelDidMount,willUnmount:s.slotLabelWillUnmount},A=>Ut("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},Ut(A,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function a(i){return i.text}class h extends da{render(){return this.props.slatMetas.map(t=>Ut("tr",{key:t.key},Ut(c,Object.assign({},t))))}}const m=So({week:"short"});class T extends Nu{constructor(){super(...arguments),this.allDaySplitter=new Rx,this.headerElRef={current:null},this.rootElRef={current:null},this.scrollerElRef={current:null},this.state={slatCoords:null},this.handleScrollTopRequest=t=>{let e=this.scrollerElRef.current;e&&(e.scrollTop=t)},this.renderHeadAxis=(t,e="")=>{let{options:r}=this.context,{dateProfile:s}=this.props,o=s.renderRange,g=1===zr(o.start,o.end)?Hd(this.context,o.start,"week"):{};return r.weekNumbers&&"day"===t?Ut(R_,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:o.start,defaultFormat:m},A=>Ut("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:e}},Ut(A,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:g}))):Ut("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},Ut("div",{className:"fc-timegrid-axis-frame",style:{height:e}}))},this.renderTableRowAxis=t=>{let{options:e,viewApi:r}=this.context;return Ut(Tc,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:{text:e.allDayText,view:r},generatorName:"allDayContent",customGenerator:e.allDayContent,defaultGenerator:O,classNameGenerator:e.allDayClassNames,didMount:e.allDayDidMount,willUnmount:e.allDayWillUnmount},o=>Ut("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==t?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:t}},Ut(o,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=t=>{this.setState({slatCoords:t})}}renderSimpleLayout(t,e,r){let{context:s,props:o}=this,f=[],g=G0(s.options);return t&&f.push({type:"header",key:"header",isSticky:g,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),e&&(f.push({type:"body",key:"all-day",chunk:{content:e}}),f.push({type:"body",key:"all-day-divider",outerContent:Ut("tr",{role:"presentation",className:"fc-scrollgrid-section"},Ut("td",{className:"fc-timegrid-divider "+s.theme.getClass("tableCellShaded")}))})),f.push({type:"body",key:"body",liquid:!0,expandRows:!!s.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),Ut(Pd,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:s.viewSpec},Ut(Lv,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,cols:[{width:"shrink"}],sections:f}))}renderHScrollLayout(t,e,r,s,o,f,g){let A=this.context.pluginHooks.scrollGridImpl;if(!A)throw new Error("No ScrollGrid implementation");let{context:P,props:z}=this,ie=!z.forPrint&&G0(P.options),se=!z.forPrint&&Ry(P.options),oe=[];t&&oe.push({type:"header",key:"header",isSticky:ie,syncRowHeights:!0,chunks:[{key:"axis",rowContent:he=>Ut("tr",{role:"presentation"},this.renderHeadAxis("day",he.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),e&&(oe.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:he=>Ut("tr",{role:"presentation"},this.renderTableRowAxis(he.rowSyncHeights[0]))},{key:"cols",content:e}]}),oe.push({key:"all-day-divider",type:"body",outerContent:Ut("tr",{role:"presentation",className:"fc-scrollgrid-section"},Ut("td",{colSpan:2,className:"fc-timegrid-divider "+P.theme.getClass("tableCellShaded")}))}));let _e=P.options.nowIndicator;return oe.push({type:"body",key:"body",liquid:!0,expandRows:!!P.options.expandRows,chunks:[{key:"axis",content:he=>Ut("div",{className:"fc-timegrid-axis-chunk"},Ut("table",{"aria-hidden":!0,style:{height:he.expandRows?he.clientHeight:""}},he.tableColGroupNode,Ut("tbody",null,Ut(h,{slatMetas:f}))),Ut("div",{className:"fc-timegrid-now-indicator-container"},Ut(eg,{unit:_e?"minute":"day"},Ae=>{let Ke=_e&&g&&g.safeComputeTop(Ae);return"number"==typeof Ke?Ut(tg,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:Ke},isAxis:!0,date:Ae}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),se&&oe.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:ml},{key:"cols",content:ml}]}),Ut(Pd,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:P.viewSpec},Ut(A,{liquid:!z.isHeightAuto&&!z.forPrint,forPrint:z.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:s,minWidth:o}]}],sections:oe}))}getAllDayMaxEventProps(){let{dayMaxEvents:t,dayMaxEventRows:e}=this.context.options;return(!0===t||!0===e)&&(t=void 0,e=5),{dayMaxEvents:t,dayMaxEventRows:e}}}function O(i){return i.text}class G{constructor(t,e,r){this.positions=t,this.dateProfile=e,this.slotDuration=r}safeComputeTop(t){let{dateProfile:e}=this;if(Bd(e.currentRange,t)){let r=ua(t),s=t.valueOf()-r.valueOf();if(s>=on(e.slotMinTime)&&s<on(e.slotMaxTime))return this.computeTimeTop(xt(s))}return null}computeDateTop(t,e){return e||(e=ua(t)),this.computeTimeTop(xt(t.valueOf()-e.valueOf()))}computeTimeTop(t){let f,g,{positions:e,dateProfile:r}=this,s=e.els.length,o=(t.milliseconds-on(r.slotMinTime))/on(this.slotDuration);return o=Math.max(0,o),o=Math.min(s,o),f=Math.floor(o),f=Math.min(f,s-1),g=o-f,e.tops[f]+e.getHeight(f)*g}}class W extends da{render(){let{props:t,context:e}=this,{options:r}=e,{slatElRefs:s}=t;return Ut("tbody",null,t.slatMetas.map((o,f)=>{let g={time:o.time,date:e.dateEnv.toDate(o.date),view:e.viewApi};return Ut("tr",{key:o.key,ref:s.createRef(o.key)},t.axis&&Ut(c,Object.assign({},o)),Ut(Tc,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!o.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":o.isoTimeStr},renderProps:g,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class q extends da{constructor(){super(...arguments),this.rootElRef={current:null},this.slatElRefs=new Sp}render(){let{props:t,context:e}=this;return Ut("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},Ut("table",{"aria-hidden":!0,className:e.theme.getClass("table"),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:t.minHeight}},t.tableColGroupNode,Ut(W,{slatElRefs:this.slatElRefs,axis:t.axis,slatMetas:t.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:t,props:e}=this;e.onCoords&&null!==e.clientWidth&&this.rootElRef.current.offsetHeight&&e.onCoords(new G(new om(this.rootElRef.current,function ce(i,t){return t.map(e=>i[e.key])}(this.slatElRefs.currentMap,e.slatMetas),!1,!0),this.props.dateProfile,t.options.slotDuration))}}function pe(i,t){let r,e=[];for(r=0;r<t;r+=1)e.push([]);if(i)for(r=0;r<i.length;r+=1)e[i[r].col].push(i[r]);return e}function ve(i,t){let e=[];if(i){for(let r=0;r<t;r+=1)e[r]={affectedInstances:i.affectedInstances,isEvent:i.isEvent,segs:[]};for(let r of i.segs)e[r.col].segs.push(r)}else for(let r=0;r<t;r+=1)e[r]=null;return e}class De extends da{render(){let{props:t}=this;return Ut(Pv,{elClasses:["fc-timegrid-more-link"],elStyle:{top:t.top,bottom:t.bottom},allDayDate:null,moreCnt:t.hiddenSegs.length,allSegs:t.hiddenSegs,hiddenSegs:t.hiddenSegs,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,todayRange:t.todayRange,popoverContent:()=>An(t.hiddenSegs,t),defaultGenerator:Oe,forceTimed:!0},e=>Ut(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function Oe(i){return i.shortText}function It(i,t){if(!i)return[[],0];let{level:e,lateralStart:r,lateralEnd:s}=i,o=r,f=[];for(;o<s;)f.push(t(e,o)),o+=1;return f.sort(ii),[f.map(Ot),f[0][1]]}function ii(i,t){return t[1]-i[1]}function Ot(i){return i[0]}function li(i){let t=[];const e=Ji((s,o,f)=>Ef(s),(s,o,f)=>{let g=Object.assign(Object.assign({},s),{levelCoord:o,stackDepth:f,stackForward:0});return t.push(g),g.stackForward=r(s.nextLevelNodes,o+s.thickness,f+1)+1});function r(s,o,f){let g=0;for(let A of s)g=Math.max(e(A,o,f),g);return g}return r(i,0,0),t}function Ji(i,t){const e={};return(...r)=>{let s=i(...r);return s in e?e[s]:e[s]=t(...r)}}function Ui(i,t,e=null,r=0){let s=[];if(e)for(let o=0;o<i.length;o+=1){let f=i[o],g=e.computeDateTop(f.start,t),A=Math.max(g+(r||0),e.computeDateTop(f.end,t));s.push({start:Math.round(g),end:Math.round(A)})}return s}const Kn=So({hour:"numeric",minute:"2-digit",meridiem:!1});class rn extends da{render(){return Ut(Vd,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:Kn}))}}class In extends da{constructor(){super(...arguments),this.sortEventSegs=Ur(Sg)}render(){let{props:t,context:e}=this,{options:r}=e,s=r.selectMirror,o=t.eventDrag&&t.eventDrag.segs||t.eventResize&&t.eventResize.segs||s&&t.dateSelectionSegs||[],f=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{},g=this.sortEventSegs(t.fgEventSegs,r.eventOrder);return Ut(H0,{elTag:"td",elRef:t.elRef,elClasses:["fc-timegrid-col",...t.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},t.extraDataAttrs),date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,extraRenderProps:t.extraRenderProps},A=>Ut("div",{className:"fc-timegrid-col-frame"},Ut("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(t.businessHourSegs,"non-business"),this.renderFillSegs(t.bgEventSegs,"bg-event"),this.renderFillSegs(t.dateSelectionSegs,"highlight")),Ut("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(g,f,!1,!1,!1)),Ut("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(o,{},!!t.eventDrag,!!t.eventResize,!!s,"mirror")),Ut("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(t.nowIndicatorSegs)),O_(r)&&Ut(A,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(t,e,r,s,o,f){let{props:g}=this;return g.forPrint?An(t,g):this.renderPositionedFgSegs(t,e,r,s,o,f)}renderPositionedFgSegs(t,e,r,s,o,f){let{eventMaxStack:g,eventShortHeight:A,eventOrderStrict:P,eventMinHeight:z}=this.context.options,{date:ie,slatCoords:se,eventSelection:oe,todayRange:_e,nowDate:he}=this.props,Ae=r||s||o,Ke=Ui(t,ie,se,z),{segPlacements:ct,hiddenGroups:pt}=function wn(i,t,e,r){let s=[],o=[];for(let P=0;P<i.length;P+=1){let z=t[P];z?s.push({index:P,thickness:1,span:z}):o.push(i[P])}let{segRects:f,hiddenGroups:g}=function Ve(i,t,e){let r=new z0;null!=t&&(r.strictOrder=t),null!=e&&(r.maxStackCnt=e);let o=function b(i){let t=[];for(let e of i){let r=[],s={span:e.span,entries:[e]};for(let o of t)S(o.span,s.span)?s={entries:o.entries.concat(s.entries),span:N(o.span,s.span)}:r.push(o);r.push(s),t=r}return t}(r.addSegs(i)),f=function at(i){const{entriesByLevel:t}=i,e=Ji((r,s)=>r+":"+s,(r,s)=>{let o=function Kt(i,t,e){let{levelCoords:r,entriesByLevel:s}=i,o=s[t][e],f=r[t]+o.thickness,g=r.length,A=t;for(;A<g&&r[A]<f;A+=1);for(;A<g;A+=1){let z,P=s[A],ie=te(P,o.span.start,Qm),se=ie[0]+ie[1],oe=se;for(;(z=P[oe])&&z.span.start<o.span.end;)oe+=1;if(se<oe)return{level:A,lateralStart:se,lateralEnd:oe}}return null}(i,r,s),f=It(o,e),g=t[r][s];return[Object.assign(Object.assign({},g),{nextLevelNodes:f[0]}),g.thickness+f[1]]});return It(t.length?{level:0,lateralStart:0,lateralEnd:t[0].length}:null,e)[0]}(r);return f=function ci(i,t){const e=Ji((r,s,o)=>Ef(r),(r,s,o)=>{let z,{nextLevelNodes:f,thickness:g}=r,A=g+o,P=g/A,ie=[];if(f.length)for(let oe of f)if(void 0===z){let _e=e(oe,s,A);z=_e[0],ie.push(_e[1])}else{let _e=e(oe,z,0);ie.push(_e[1])}else z=t;let se=(z-s)*P;return[z-se,Object.assign(Object.assign({},r),{thickness:se,nextLevelNodes:ie})]});return i.map(r=>e(r,0,0)[1])}(f,1),{segRects:li(f),hiddenGroups:o}}(s,e,r),A=[];for(let P of f)A.push({seg:i[P.index],rect:P});for(let P of o)A.push({seg:P,rect:null});return{segPlacements:A,hiddenGroups:g}}(t,Ke,P,g);return Ut(Aa,null,this.renderHiddenGroups(pt,t),ct.map(mi=>{let{seg:Fi,rect:Ki}=mi,ni=Fi.eventRange.instance.instanceId,Ti=Ae||!(e[ni]||!Ki),Bi=Vn(Ki&&Ki.span),Cn=!Ae&&Ki?this.computeSegHStyle(Ki):{left:0,right:0},Zi=!!Ki&&Ki.span.end-Ki.span.start<A;return Ut("div",{className:"fc-timegrid-event-harness"+(Ki&&Ki.stackForward>0?" fc-timegrid-event-harness-inset":""),key:f||ni,style:Object.assign(Object.assign({visibility:Ti?"":"hidden"},Bi),Cn)},Ut(rn,Object.assign({seg:Fi,isDragging:r,isResizing:s,isDateSelecting:o,isSelected:ni===oe,isShort:Zi},fd(Fi,_e,he))))}))}renderHiddenGroups(t,e){let{extraDateSpan:r,dateProfile:s,todayRange:o,nowDate:f,eventSelection:g,eventDrag:A,eventResize:P}=this.props;return Ut(Aa,null,t.map(z=>{let ie=Vn(z.span),se=function er(i,t){return i.map(e=>t[e.index])}(z.entries,e);return Ut(De,{key:Gh(Fv(se)),hiddenSegs:se,top:ie.top,bottom:ie.bottom,extraDateSpan:r,dateProfile:s,todayRange:o,nowDate:f,eventSelection:g,eventDrag:A,eventResize:P})}))}renderFillSegs(t,e){let{props:r,context:s}=this,f=Ui(t,r.date,r.slatCoords,s.options.eventMinHeight).map((g,A)=>{let P=t[A];return Ut("div",{key:E0(P.eventRange),className:"fc-timegrid-bg-harness",style:Vn(g)},"bg-event"===e?Ut(V0,Object.assign({seg:P},fd(P,r.todayRange,r.nowDate))):lm(e))});return Ut(Aa,null,f)}renderNowIndicator(t){let{slatCoords:e,date:r}=this.props;return e?t.map((s,o)=>Ut(tg,{key:o,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:e.computeDateTop(s.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(t){let g,A,{isRtl:e,options:r}=this.context,s=r.slotEventOverlap,o=t.levelCoord,f=t.levelCoord+t.thickness;s&&(f=Math.min(1,o+2*(f-o))),e?(g=1-f,A=o):(g=o,A=1-f);let P={zIndex:t.stackDepth+1,left:100*g+"%",right:100*A+"%"};return s&&!t.stackForward&&(P[e?"marginLeft":"marginRight"]=20),P}}function An(i,{todayRange:t,nowDate:e,eventSelection:r,eventDrag:s,eventResize:o}){let f=(s?s.affectedInstances:null)||(o?o.affectedInstances:null)||{};return Ut(Aa,null,i.map(g=>{let A=g.eventRange.instance.instanceId;return Ut("div",{key:A,style:{visibility:f[A]?"hidden":""}},Ut(rn,Object.assign({seg:g,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:A===r,isShort:!1},fd(g,t,e))))}))}function Vn(i){return i?{top:i.start,bottom:-i.end}:{top:"",bottom:""}}class gn extends da{constructor(){super(...arguments),this.splitFgEventSegs=Ur(pe),this.splitBgEventSegs=Ur(pe),this.splitBusinessHourSegs=Ur(pe),this.splitNowIndicatorSegs=Ur(pe),this.splitDateSelectionSegs=Ur(pe),this.splitEventDrag=Ur(ve),this.splitEventResize=Ur(ve),this.rootElRef={current:null},this.cellElRefs=new Sp}render(){let{props:t,context:e}=this,r=e.options.nowIndicator&&t.slatCoords&&t.slatCoords.safeComputeTop(t.nowDate),s=t.cells.length,o=this.splitFgEventSegs(t.fgEventSegs,s),f=this.splitBgEventSegs(t.bgEventSegs,s),g=this.splitBusinessHourSegs(t.businessHourSegs,s),A=this.splitNowIndicatorSegs(t.nowIndicatorSegs,s),P=this.splitDateSelectionSegs(t.dateSelectionSegs,s),z=this.splitEventDrag(t.eventDrag,s),ie=this.splitEventResize(t.eventResize,s);return Ut("div",{className:"fc-timegrid-cols",ref:this.rootElRef},Ut("table",{role:"presentation",style:{minWidth:t.tableMinWidth,width:t.clientWidth}},t.tableColGroupNode,Ut("tbody",{role:"presentation"},Ut("tr",{role:"row"},t.axis&&Ut("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},Ut("div",{className:"fc-timegrid-col-frame"},Ut("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof r&&Ut(tg,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:t.nowDate})))),t.cells.map((se,oe)=>Ut(In,{key:se.key,elRef:this.cellElRefs.createRef(se.key),dateProfile:t.dateProfile,date:se.date,nowDate:t.nowDate,todayRange:t.todayRange,extraRenderProps:se.extraRenderProps,extraDataAttrs:se.extraDataAttrs,extraClassNames:se.extraClassNames,extraDateSpan:se.extraDateSpan,fgEventSegs:o[oe],bgEventSegs:f[oe],businessHourSegs:g[oe],nowIndicatorSegs:A[oe],dateSelectionSegs:P[oe],eventDrag:z[oe],eventResize:ie[oe],slatCoords:t.slatCoords,eventSelection:t.eventSelection,forPrint:t.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:t}=this;t.onColCoords&&null!==t.clientWidth&&t.onColCoords(new om(this.rootElRef.current,function _r(i,t){return t.map(e=>i[e.key])}(this.cellElRefs.currentMap,t.cells),!0,!1))}}class jr extends Nu{constructor(){super(...arguments),this.processSlotOptions=Ur(br),this.state={slatCoords:null},this.handleRootEl=t=>{t?this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=t=>{let{onScrollTopRequest:e}=this.props,{slatCoords:r}=this.state;if(e&&r){if(t.time){let s=r.computeTimeTop(t.time);s=Math.ceil(s),s&&(s+=1),e(s)}return!0}return!1},this.handleColCoords=t=>{this.colCoords=t},this.handleSlatCoords=t=>{this.setState({slatCoords:t}),this.props.onSlatCoords&&this.props.onSlatCoords(t)}}render(){let{props:t,state:e}=this;return Ut("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:t.clientWidth,minWidth:t.tableMinWidth}},Ut(q,{axis:t.axis,dateProfile:t.dateProfile,slatMetas:t.slatMetas,clientWidth:t.clientWidth,minHeight:t.expandRows?t.clientHeight:"",tableMinWidth:t.tableMinWidth,tableColGroupNode:t.axis?t.tableColGroupNode:null,onCoords:this.handleSlatCoords}),Ut(gn,{cells:t.cells,axis:t.axis,dateProfile:t.dateProfile,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange,nowDate:t.nowDate,nowIndicatorSegs:t.nowIndicatorSegs,clientWidth:t.clientWidth,tableMinWidth:t.tableMinWidth,tableColGroupNode:t.tableColGroupNode,slatCoords:e.slatCoords,onColCoords:this.handleColCoords,forPrint:t.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(t){this.scrollResponder.update(t.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(t,e){let{dateEnv:r,options:s}=this.context,{colCoords:o}=this,{dateProfile:f}=this.props,{slatCoords:g}=this.state,{snapDuration:A,snapsPerSlot:P}=this.processSlotOptions(this.props.slotDuration,s.snapDuration),z=o.leftToIndex(t),ie=g.positions.topToIndex(e);if(null!=z&&null!=ie){let se=this.props.cells[z],oe=g.positions.tops[ie],_e=g.positions.getHeight(ie),Ae=Math.floor((e-oe)/_e*P),ct=this.props.cells[z].date,pt=Ei(f.slotMinTime,function Gn(i,t){return{years:i.years*t,months:i.months*t,days:i.days*t,milliseconds:i.milliseconds*t}}(A,ie*P+Ae)),mi=r.add(ct,pt),Fi=r.add(mi,A);return{dateProfile:f,dateSpan:Object.assign({range:{start:mi,end:Fi},allDay:!1},se.extraDateSpan),dayEl:o.els[z],rect:{left:o.lefts[z],right:o.rights[z],top:oe,bottom:oe+_e},layer:0}}return null}}function br(i,t){let e=t||i,r=Wn(i,e);return null===r&&(e=i,r=1),{snapDuration:e,snapsPerSlot:r}}class Zs extends A_{sliceRange(t,e){let r=[];for(let s=0;s<e.length;s+=1){let o=Fd(t,e[s]);o&&r.push({start:o.start,end:o.end,isStart:o.start.valueOf()===t.start.valueOf(),isEnd:o.end.valueOf()===t.end.valueOf(),col:s})}return r}}class tr extends Nu{constructor(){super(...arguments),this.buildDayRanges=Ur(rs),this.slicer=new Zs,this.timeColsRef={current:null}}render(){let{props:t,context:e}=this,{dateProfile:r,dayTableModel:s}=t,{nowIndicator:o,nextDayThreshold:f}=e.options,g=this.buildDayRanges(s,r,e.dateEnv);return Ut(eg,{unit:o?"minute":"day"},(A,P)=>Ut(jr,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(t,r,null,e,g),{forPrint:t.forPrint,axis:t.axis,dateProfile:r,slatMetas:t.slatMetas,slotDuration:t.slotDuration,cells:s.cells[0],tableColGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,clientWidth:t.clientWidth,clientHeight:t.clientHeight,expandRows:t.expandRows,nowDate:A,nowIndicatorSegs:o&&this.slicer.sliceNowDate(A,r,f,e,g),todayRange:P,onScrollTopRequest:t.onScrollTopRequest,onSlatCoords:t.onSlatCoords})))}}function rs(i,t,e){let r=[];for(let s of i.headerDates)r.push({start:e.add(s,t.slotMinTime),end:e.add(s,t.slotMaxTime)});return r}const js=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function ja(i,t,e,r,s){let o=new Date(0),f=i,g=xt(0),A=e||function qs(i){let t,e,r;for(t=js.length-1;t>=0;t-=1)if(e=xt(js[t]),r=Wn(e,i),null!==r&&r>1)return e;return i}(r),P=[];for(;on(f)<on(t);){let z=s.add(o,f),ie=null!==Wn(g,A);P.push({date:z,time:f,key:z.toISOString(),isoTimeStr:Td(z),isLabeled:ie}),f=Ei(f,r),g=Ei(g,r)}return P}function Po(i,t){let e=new T_(i.renderRange,t);return new S_(e,!1)}yh('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');var xo=jd({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:{allDaySlot:Boolean},views:{timeGrid:{component:class bs extends T{constructor(){super(...arguments),this.buildTimeColsModel=Ur(Po),this.buildSlatMetas=Ur(ja)}render(){let{options:t,dateEnv:e,dateProfileGenerator:r}=this.context,{props:s}=this,{dateProfile:o}=s,f=this.buildTimeColsModel(o,r),g=this.allDaySplitter.splitProps(s),A=this.buildSlatMetas(o.slotMinTime,o.slotMaxTime,t.slotLabelInterval,t.slotDuration,e),{dayMinWidth:P}=t,z=!P,ie=P,se=t.dayHeaders&&Ut(Zh,{dates:f.headerDates,dateProfile:o,datesRepDistinctDays:!0,renderIntro:z?this.renderHeadAxis:null}),oe=!1!==t.allDaySlot&&(he=>Ut(Ix,Object.assign({},g.allDay,{dateProfile:o,dayTableModel:f,nextDayThreshold:t.nextDayThreshold,tableMinWidth:he.tableMinWidth,colGroupNode:he.tableColGroupNode,renderRowIntro:z?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:he.clientWidth,clientHeight:he.clientHeight,forPrint:s.forPrint},this.getAllDayMaxEventProps()))),_e=he=>Ut(tr,Object.assign({},g.timed,{dayTableModel:f,dateProfile:o,axis:z,slotDuration:t.slotDuration,slatMetas:A,forPrint:s.forPrint,tableColGroupNode:he.tableColGroupNode,tableMinWidth:he.tableMinWidth,clientWidth:he.clientWidth,clientHeight:he.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:he.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return ie?this.renderHScrollLayout(se,oe,_e,f.colCnt,P,A,this.state.slatCoords):this.renderSimpleLayout(se,oe,_e)}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class Mo extends da{constructor(){super(...arguments),this.state={textId:ad()}}render(){let{theme:t,dateEnv:e,options:r,viewApi:s}=this.context,{cellId:o,dayDate:f,todayRange:g}=this.props,{textId:A}=this.state,P=Dg(f,g),z=r.listDayFormat?e.format(f,r.listDayFormat):"",ie=r.listDaySideFormat?e.format(f,r.listDaySideFormat):"",se=Object.assign({date:e.toDate(f),view:s,textId:A,text:z,sideText:ie,navLinkAttrs:Hd(this.context,f),sideNavLinkAttrs:Hd(this.context,f,"day",!1)},P);return Ut(Tc,{elTag:"tr",elClasses:["fc-list-day",...$m(P,t)],elAttrs:{"data-date":Ou(f)},renderProps:se,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:Oo,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},oe=>Ut("th",{scope:"colgroup",colSpan:3,id:o,"aria-labelledby":A},Ut(oe,{elTag:"div",elClasses:["fc-list-day-cushion",t.getClass("tableCellShaded")]})))}}function Oo(i){return Ut(Aa,null,i.text&&Ut("a",Object.assign({id:i.textId,className:"fc-list-day-text"},i.navLinkAttrs),i.text),i.sideText&&Ut("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},i.sideNavLinkAttrs),i.sideText))}const bo=So({hour:"numeric",minute:"2-digit",meridiem:"short"});class tl extends da{render(){let{props:t,context:e}=this,{options:r}=e,{seg:s,timeHeaderId:o,eventHeaderId:f,dateHeaderId:g}=t,A=r.eventTimeFormat||bo;return Ut(Vl,Object.assign({},t,{elTag:"tr",elClasses:["fc-list-event",s.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>function Al(i,t){let e=Ag(i,t);return Ut("a",Object.assign({},e),i.eventRange.def.title)}(s,e),seg:s,timeText:"",disableDragging:!0,disableResizing:!0}),(P,z)=>Ut(Aa,null,function sc(i,t,e,r,s){let{options:o}=e;if(!1!==o.displayEventTime){let P,g=i.eventRange.instance,A=!1;return i.eventRange.def.allDay?A=!0:function qp(i){let t=yf(i);return zr(t.start,t.end)>1}(i.eventRange.range)?i.isStart?P=xp(i,t,e,null,null,g.range.start,i.end):i.isEnd?P=xp(i,t,e,null,null,i.start,g.range.end):A=!0:P=xp(i,t,e),A?Ut(Tc,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${r} ${s}`},renderProps:{text:e.options.allDayText,view:e.viewApi},generatorName:"allDayContent",customGenerator:o.allDayContent,defaultGenerator:wo,classNameGenerator:o.allDayClassNames,didMount:o.allDayDidMount,willUnmount:o.allDayWillUnmount}):Ut("td",{className:"fc-list-event-time"},P)}return null}(s,A,e,o,g),Ut("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},Ut("span",{className:"fc-list-event-dot",style:{borderColor:z.borderColor||z.backgroundColor}})),Ut(P,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${f} ${g}`}})))}}function wo(i){return i.text}function ac(i){return i.text}function gl(i){let t=ua(i.renderRange.start),e=i.renderRange.end,r=[],s=[];for(;t<e;)r.push(t),s.push({start:t,end:Ir(t,1)}),t=Ir(t,1);return{dayDates:r,dayRanges:s}}function Mh(i){return!1===i?null:So(i)}yh(':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}');var lc=jd({name:"@fullcalendar/list",optionRefiners:{listDayFormat:Mh,listDaySideFormat:Mh,noEventsClassNames:tn,noEventsContent:tn,noEventsDidMount:tn,noEventsWillUnmount:tn},views:{list:{component:class Oc extends Nu{constructor(){super(...arguments),this.computeDateVars=Ur(gl),this.eventStoreToSegs=Ur(this._eventStoreToSegs),this.state={timeHeaderId:ad(),eventHeaderId:ad(),dateHeaderIdRoot:ad()},this.setRootEl=t=>{t?this.context.registerInteractiveComponent(this,{el:t}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:t,context:e}=this,{dayDates:r,dayRanges:s}=this.computeDateVars(t.dateProfile),o=this.eventStoreToSegs(t.eventStore,t.eventUiBases,s);return Ut(Pd,{elRef:this.setRootEl,elClasses:["fc-list",e.theme.getClass("table"),!1!==e.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:e.viewSpec},Ut(Tp,{liquid:!t.isHeightAuto,overflowX:t.isHeightAuto?"visible":"hidden",overflowY:t.isHeightAuto?"visible":"auto"},o.length>0?this.renderSegList(o,r):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:t,viewApi:e}=this.context;return Ut(Tc,{elTag:"div",elClasses:["fc-list-empty"],renderProps:{text:t.noEventsText,view:e},generatorName:"noEventsContent",customGenerator:t.noEventsContent,defaultGenerator:ac,classNameGenerator:t.noEventsClassNames,didMount:t.noEventsDidMount,willUnmount:t.noEventsWillUnmount},s=>Ut(s,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(t,e){let{theme:r,options:s}=this.context,{timeHeaderId:o,eventHeaderId:f,dateHeaderIdRoot:g}=this.state,A=function qa(i){let e,r,t=[];for(e=0;e<i.length;e+=1)r=i[e],(t[r.dayIndex]||(t[r.dayIndex]=[])).push(r);return t}(t);return Ut(eg,{unit:"day"},(P,z)=>{let ie=[];for(let se=0;se<A.length;se+=1){let oe=A[se];if(oe){let _e=Ou(e[se]),he=g+"-"+_e;ie.push(Ut(Mo,{key:_e,cellId:he,dayDate:e[se],todayRange:z})),oe=Sg(oe,s.eventOrder);for(let Ae of oe)ie.push(Ut(tl,Object.assign({key:_e+":"+Ae.eventRange.instance.instanceId,seg:Ae,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:o,eventHeaderId:f,dateHeaderId:he},fd(Ae,z,P))))}}return Ut("table",{className:"fc-list-table "+r.getClass("table")},Ut("thead",null,Ut("tr",null,Ut("th",{scope:"col",id:o},s.timeHint),Ut("th",{scope:"col","aria-hidden":!0}),Ut("th",{scope:"col",id:f},s.eventHint))),Ut("tbody",null,ie))})}_eventStoreToSegs(t,e,r){return this.eventRangesToSegs(tm(t,e,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,r)}eventRangesToSegs(t,e){let r=[];for(let s of t)r.push(...this.eventRangeToSegs(s,e));return r}eventRangeToSegs(t,e){let g,A,P,{dateEnv:r}=this.context,{nextDayThreshold:s}=this.context.options,o=t.range,f=t.def.allDay,z=[];for(g=0;g<e.length;g+=1)if(A=Fd(o,e[g]),A&&(P={component:this,eventRange:t,start:A.start,end:A.end,isStart:t.isStart&&A.start.valueOf()===o.start.valueOf(),isEnd:t.isEnd&&A.end.valueOf()===o.end.valueOf(),dayIndex:g},z.push(P),!P.isEnd&&!f&&g+1<e.length&&o.end<r.add(e[g+1].start,s))){P.end=o.end,P.isEnd=!0;break}return z}},buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}}),Kc=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Dl={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(i){return typeof console<"u"&&console.warn(i)},getWeek:function(i){var t=new Date(i.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},rh={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(i){var t=i%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const Rc=rh;var Ul=function(i,t){return void 0===t&&(t=2),("000"+i).slice(-1*t)},Oh=function(i){return!0===i?1:0};function qv(i,t){var e;return function(){var r=this,s=arguments;clearTimeout(e),e=setTimeout(function(){return i.apply(r,s)},t)}}var nv=function(i){return i instanceof Array?i:[i]};function Kh(i,t,e){if(!0===e)return i.classList.add(t);i.classList.remove(t)}function Co(i,t,e){var r=window.document.createElement(i);return e=e||"",r.className=t=t||"",void 0!==e&&(r.textContent=e),r}function X_(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Lx(i,t){return t(i)?i:i.parentNode?Lx(i.parentNode,t):void 0}function Kv(i,t){var e=Co("div","numInputWrapper"),r=Co("input","numInput "+i),s=Co("span","arrowUp"),o=Co("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==t)for(var f in t)r.setAttribute(f,t[f]);return e.appendChild(r),e.appendChild(s),e.appendChild(o),e}function md(i){try{return"function"==typeof i.composedPath?i.composedPath()[0]:i.target}catch{return i.target}}var rp=function(){},Z_=function(i,t,e){return e.months[t?"shorthand":"longhand"][i]},rv={D:rp,F:function(i,t,e){i.setMonth(e.months.longhand.indexOf(t))},G:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},H:function(i,t){i.setHours(parseFloat(t))},J:function(i,t){i.setDate(parseFloat(t))},K:function(i,t,e){i.setHours(i.getHours()%12+12*Oh(new RegExp(e.amPM[1],"i").test(t)))},M:function(i,t,e){i.setMonth(e.months.shorthand.indexOf(t))},S:function(i,t){i.setSeconds(parseFloat(t))},U:function(i,t){return new Date(1e3*parseFloat(t))},W:function(i,t,e){var r=parseInt(t),s=new Date(i.getFullYear(),0,2+7*(r-1),0,0,0,0);return s.setDate(s.getDate()-s.getDay()+e.firstDayOfWeek),s},Y:function(i,t){i.setFullYear(parseFloat(t))},Z:function(i,t){return new Date(t)},d:function(i,t){i.setDate(parseFloat(t))},h:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},i:function(i,t){i.setMinutes(parseFloat(t))},j:function(i,t){i.setDate(parseFloat(t))},l:rp,m:function(i,t){i.setMonth(parseFloat(t)-1)},n:function(i,t){i.setMonth(parseFloat(t)-1)},s:function(i,t){i.setSeconds(parseFloat(t))},u:function(i,t){return new Date(parseFloat(t))},w:rp,y:function(i,t){i.setFullYear(2e3+parseFloat(t))}},rg={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},sv={Z:function(i){return i.toISOString()},D:function(i,t,e){return t.weekdays.shorthand[sv.w(i,t,e)]},F:function(i,t,e){return Z_(sv.n(i,t,e)-1,!1,t)},G:function(i,t,e){return Ul(sv.h(i,t,e))},H:function(i){return Ul(i.getHours())},J:function(i,t){return void 0!==t.ordinal?i.getDate()+t.ordinal(i.getDate()):i.getDate()},K:function(i,t){return t.amPM[Oh(i.getHours()>11)]},M:function(i,t){return Z_(i.getMonth(),!0,t)},S:function(i){return Ul(i.getSeconds())},U:function(i){return i.getTime()/1e3},W:function(i,t,e){return e.getWeek(i)},Y:function(i){return Ul(i.getFullYear(),4)},d:function(i){return Ul(i.getDate())},h:function(i){return i.getHours()%12?i.getHours()%12:12},i:function(i){return Ul(i.getMinutes())},j:function(i){return i.getDate()},l:function(i,t){return t.weekdays.longhand[i.getDay()]},m:function(i){return Ul(i.getMonth()+1)},n:function(i){return i.getMonth()+1},s:function(i){return i.getSeconds()},u:function(i){return i.getTime()},w:function(i){return i.getDay()},y:function(i){return String(i.getFullYear()).substring(2)}},sg=function(i){var t=i.config,e=void 0===t?Dl:t,r=i.l10n,s=void 0===r?rh:r,o=i.isMobile,f=void 0!==o&&o;return function(g,A,P){var z=P||s;return void 0===e.formatDate||f?A.split("").map(function(ie,se,oe){return sv[ie]&&"\\"!==oe[se-1]?sv[ie](g,z,e):"\\"!==ie?ie:""}).join(""):e.formatDate(g,A,z)}},q_=function(i){var t=i.config,e=void 0===t?Dl:t,r=i.l10n,s=void 0===r?rh:r;return function(o,f,g,A){if(0===o||o){var z,P=A||s,ie=o;if(o instanceof Date)z=new Date(o.getTime());else if("string"!=typeof o&&void 0!==o.toFixed)z=new Date(o);else if("string"==typeof o){var se=f||(e||Dl).dateFormat,oe=String(o).trim();if("today"===oe)z=new Date,g=!0;else if(e&&e.parseDate)z=e.parseDate(o,se);else if(/Z$/.test(oe)||/GMT$/.test(oe))z=new Date(o);else{for(var _e=void 0,he=[],Ae=0,Ke=0,ct="";Ae<se.length;Ae++){var pt=se[Ae],mi="\\"===pt;if(rg[pt]&&"\\"!==se[Ae-1]&&!mi){ct+=rg[pt];var Ki=new RegExp(ct).exec(o);Ki&&(_e=!0)&&he["Y"!==pt?"push":"unshift"]({fn:rv[pt],val:Ki[++Ke]})}else mi||(ct+=".")}z=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),he.forEach(function(ni){return z=(0,ni.fn)(z,ni.val,P)||z}),z=_e?z:void 0}}return z instanceof Date&&!isNaN(z.getTime())?(!0===g&&z.setHours(0,0,0,0),z):void e.errorHandler(new Error("Invalid date provided: "+ie))}}};function Af(i,t,e){return void 0===e&&(e=!0),!1!==e?new Date(i.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):i.getTime()-t.getTime()}var $d=function(i,t,e){return i>Math.min(t,e)&&i<Math.max(t,e)},av=function(i,t,e){return 3600*i+60*t+e},Px=function(i){var t=Math.floor(i/3600),e=(i-3600*t)/60;return[t,e,i-3600*t-60*e]},Qb={DAY:864e5};function ag(i){var t=i.defaultHour,e=i.defaultMinute,r=i.defaultSeconds;if(void 0!==i.minDate){var s=i.minDate.getHours(),o=i.minDate.getMinutes(),f=i.minDate.getSeconds();t<s&&(t=s),t===s&&e<o&&(e=o),t===s&&e===o&&r<f&&(r=i.minDate.getSeconds())}if(void 0!==i.maxDate){var g=i.maxDate.getHours(),A=i.maxDate.getMinutes();(t=Math.min(t,g))===g&&(e=Math.min(A,e)),t===g&&e===A&&(r=i.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:r}}Qt(9280);var Xd=function(){return Xd=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++)for(var s in t=arguments[e])Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i},Xd.apply(this,arguments)},IE=function(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;var r=Array(i),s=0;for(t=0;t<e;t++)for(var o=arguments[t],f=0,g=o.length;f<g;f++,s++)r[s]=o[f];return r},GI=300;function HI(i,t){var e={config:Xd(Xd({},Dl),sh.defaultConfig),l10n:Rc};function o(){var Bt;return(null===(Bt=e.calendarContainer)||void 0===Bt?void 0:Bt.getRootNode()).activeElement||document.activeElement}function f(Bt){return Bt.bind(e)}function g(){var Bt=e.config;!1===Bt.weekNumbers&&1===Bt.showMonths||!0!==Bt.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==e.calendarContainer&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),void 0!==e.daysContainer){var Zt=(e.days.offsetWidth+1)*Bt.showMonths;e.daysContainer.style.width=Zt+"px",e.calendarContainer.style.width=Zt+(void 0!==e.weekWrapper?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function A(Bt){if(0===e.selectedDates.length){var Zt=void 0===e.config.minDate||Af(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),$i=ag(e.config);Zt.setHours($i.hours,$i.minutes,$i.seconds,Zt.getMilliseconds()),e.selectedDates=[Zt],e.latestSelectedDateObj=Zt}void 0!==Bt&&"blur"!==Bt.type&&function K1(Bt){Bt.preventDefault();var Zt="keydown"===Bt.type,$i=md(Bt),Pn=$i;void 0!==e.amPM&&$i===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Oh(e.amPM.textContent===e.l10n.amPM[0])]);var Lr=parseFloat(Pn.getAttribute("min")),is=parseFloat(Pn.getAttribute("max")),Pa=parseFloat(Pn.getAttribute("step")),ks=parseInt(Pn.value,10),gs=ks+Pa*(Bt.delta||(Zt?38===Bt.which?1:-1:0));if(typeof Pn.value<"u"&&2===Pn.value.length){var pa=Pn===e.hourElement,rl=Pn===e.minuteElement;gs<Lr?(gs=is+gs+Oh(!pa)+(Oh(pa)&&Oh(!e.amPM)),rl&&mi(void 0,-1,e.hourElement)):gs>is&&(gs=Pn===e.hourElement?gs-is-Oh(!e.amPM):Lr,rl&&mi(void 0,1,e.hourElement)),e.amPM&&pa&&(1===Pa?gs+ks===23:Math.abs(gs-ks)>Pa)&&(e.amPM.textContent=e.l10n.amPM[Oh(e.amPM.textContent===e.l10n.amPM[0])]),Pn.value=Ul(gs)}}(Bt);var Pn=e._input.value;ie(),dg(),e._input.value!==Pn&&e._debouncedChange()}function ie(){if(void 0!==e.hourElement&&void 0!==e.minuteElement){var Bt=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,Zt=(parseInt(e.minuteElement.value,10)||0)%60,$i=void 0!==e.secondElement?(parseInt(e.secondElement.value,10)||0)%60:0;void 0!==e.amPM&&(Bt=function P(Bt,Zt){return Bt%12+12*Oh(Zt===e.l10n.amPM[1])}(Bt,e.amPM.textContent));var Pn=void 0!==e.config.minTime||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&0===Af(e.latestSelectedDateObj,e.config.minDate,!0),Lr=void 0!==e.config.maxTime||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&0===Af(e.latestSelectedDateObj,e.config.maxDate,!0);if(void 0!==e.config.maxTime&&void 0!==e.config.minTime&&e.config.minTime>e.config.maxTime){var is=av(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),Pa=av(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),ks=av(Bt,Zt,$i);if(ks>Pa&&ks<is){var Na=Px(is);Bt=Na[0],Zt=Na[1],$i=Na[2]}}else{if(Lr){var gs=void 0!==e.config.maxTime?e.config.maxTime:e.config.maxDate;(Bt=Math.min(Bt,gs.getHours()))===gs.getHours()&&(Zt=Math.min(Zt,gs.getMinutes())),Zt===gs.getMinutes()&&($i=Math.min($i,gs.getSeconds()))}if(Pn){var pa=void 0!==e.config.minTime?e.config.minTime:e.config.minDate;(Bt=Math.max(Bt,pa.getHours()))===pa.getHours()&&Zt<pa.getMinutes()&&(Zt=pa.getMinutes()),Zt===pa.getMinutes()&&($i=Math.max($i,pa.getSeconds()))}}oe(Bt,Zt,$i)}}function se(Bt){var Zt=Bt||e.latestSelectedDateObj;Zt&&Zt instanceof Date&&oe(Zt.getHours(),Zt.getMinutes(),Zt.getSeconds())}function oe(Bt,Zt,$i){void 0!==e.latestSelectedDateObj&&e.latestSelectedDateObj.setHours(Bt%24,Zt,$i||0,0),e.hourElement&&e.minuteElement&&!e.isMobile&&(e.hourElement.value=Ul(e.config.time_24hr?Bt:(12+Bt)%12+12*Oh(Bt%12==0)),e.minuteElement.value=Ul(Zt),void 0!==e.amPM&&(e.amPM.textContent=e.l10n.amPM[Oh(Bt>=12)]),void 0!==e.secondElement&&(e.secondElement.value=Ul($i)))}function _e(Bt){var Zt=md(Bt),$i=parseInt(Zt.value)+(Bt.delta||0);($i/1e3>1||"Enter"===Bt.key&&!/[^\d]/.test($i.toString()))&&Wr($i)}function he(Bt,Zt,$i,Pn){return Zt instanceof Array?Zt.forEach(function(Lr){return he(Bt,Lr,$i,Pn)}):Bt instanceof Array?Bt.forEach(function(Lr){return he(Lr,Zt,$i,Pn)}):(Bt.addEventListener(Zt,$i,Pn),void e._handlers.push({remove:function(){return Bt.removeEventListener(Zt,$i,Pn)}}))}function Ae(){$l("onChange")}function ct(Bt,Zt){var $i=void 0!==Bt?e.parseDate(Bt):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),Pn=e.currentYear,Lr=e.currentMonth;try{void 0!==$i&&(e.currentYear=$i.getFullYear(),e.currentMonth=$i.getMonth())}catch(is){is.message="Invalid date supplied: "+$i,e.config.errorHandler(is)}Zt&&e.currentYear!==Pn&&($l("onYearChange"),Cr()),Zt&&(e.currentYear!==Pn||e.currentMonth!==Lr)&&$l("onMonthChange"),e.redraw()}function pt(Bt){var Zt=md(Bt);~Zt.className.indexOf("arrow")&&mi(Bt,Zt.classList.contains("arrowUp")?1:-1)}function mi(Bt,Zt,$i){var Pn=Bt&&md(Bt),Lr=$i||Pn&&Pn.parentNode&&Pn.parentNode.firstChild,is=Pb("increment");is.delta=Zt,Lr&&Lr.dispatchEvent(is)}function Ki(Bt,Zt,$i,Pn){var Lr=yr(Zt,!0),is=Co("span",Bt,Zt.getDate().toString());return is.dateObj=Zt,is.$i=Pn,is.setAttribute("aria-label",e.formatDate(Zt,e.config.ariaDateFormat)),-1===Bt.indexOf("hidden")&&0===Af(Zt,e.now)&&(e.todayDateElem=is,is.classList.add("today"),is.setAttribute("aria-current","date")),Lr?(is.tabIndex=-1,Fb(Zt)&&(is.classList.add("selected"),e.selectedDateElem=is,"range"===e.config.mode&&(Kh(is,"startRange",e.selectedDates[0]&&0===Af(Zt,e.selectedDates[0],!0)),Kh(is,"endRange",e.selectedDates[1]&&0===Af(Zt,e.selectedDates[1],!0)),"nextMonthDay"===Bt&&is.classList.add("inRange")))):is.classList.add("flatpickr-disabled"),"range"===e.config.mode&&function cC(Bt){return!("range"!==e.config.mode||e.selectedDates.length<2)&&Af(Bt,e.selectedDates[0])>=0&&Af(Bt,e.selectedDates[1])<=0}(Zt)&&!Fb(Zt)&&is.classList.add("inRange"),e.weekNumbers&&1===e.config.showMonths&&"prevMonthDay"!==Bt&&Pn%7==6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(Zt)+"</span>"),$l("onDayCreate",is),is}function ni(Bt){Bt.focus(),"range"===e.config.mode&&di(Bt)}function Ti(Bt){for(var $i=Bt>0?e.config.showMonths:-1,Pn=Bt>0?0:e.config.showMonths-1;Pn!=$i;Pn+=Bt)for(var Lr=e.daysContainer.children[Pn],Pa=Bt>0?Lr.children.length:-1,ks=Bt>0?0:Lr.children.length-1;ks!=Pa;ks+=Bt){var Na=Lr.children[ks];if(-1===Na.className.indexOf("hidden")&&yr(Na.dateObj))return Na}}function Cn(Bt,Zt){var $i=o(),Pn=Er($i||document.body),Lr=void 0!==Bt?Bt:Pn?$i:void 0!==e.selectedDateElem&&Er(e.selectedDateElem)?e.selectedDateElem:void 0!==e.todayDateElem&&Er(e.todayDateElem)?e.todayDateElem:Ti(Zt>0?1:-1);void 0===Lr?e._input.focus():Pn?function Bi(Bt,Zt){for(var $i=-1===Bt.className.indexOf("Month")?Bt.dateObj.getMonth():e.currentMonth,Pn=Zt>0?e.config.showMonths:-1,Lr=Zt>0?1:-1,is=$i-e.currentMonth;is!=Pn;is+=Lr)for(var Pa=e.daysContainer.children[is],Na=Pa.children.length,gs=$i-e.currentMonth===is?Bt.$i+Zt:Zt<0?Pa.children.length-1:0;gs>=0&&gs<Na&&gs!=(Zt>0?Na:-1);gs+=Lr){var pa=Pa.children[gs];if(-1===pa.className.indexOf("hidden")&&yr(pa.dateObj)&&Math.abs(Bt.$i-gs)>=Math.abs(Zt))return ni(pa)}e.changeMonth(Lr),Cn(Ti(Lr),0)}(Lr,Zt):ni(Lr)}function Mn(Bt,Zt){for(var $i=(new Date(Bt,Zt,1).getDay()-e.l10n.firstDayOfWeek+7)%7,Pn=e.utils.getDaysInMonth((Zt-1+12)%12,Bt),Lr=e.utils.getDaysInMonth(Zt,Bt),is=window.document.createDocumentFragment(),Pa=e.config.showMonths>1,ks=Pa?"prevMonthDay hidden":"prevMonthDay",Na=Pa?"nextMonthDay hidden":"nextMonthDay",gs=Pn+1-$i,pa=0;gs<=Pn;gs++,pa++)is.appendChild(Ki("flatpickr-day "+ks,new Date(Bt,Zt-1,gs),0,pa));for(gs=1;gs<=Lr;gs++,pa++)is.appendChild(Ki("flatpickr-day",new Date(Bt,Zt,gs),0,pa));for(var rl=Lr+1;rl<=42-$i&&(1===e.config.showMonths||pa%7!=0);rl++,pa++)is.appendChild(Ki("flatpickr-day "+Na,new Date(Bt,Zt+1,rl%Lr),0,pa));var st=Co("div","dayContainer");return st.appendChild(is),st}function Zi(){if(void 0!==e.daysContainer){X_(e.daysContainer),e.weekNumbers&&X_(e.weekNumbers);for(var Bt=document.createDocumentFragment(),Zt=0;Zt<e.config.showMonths;Zt++){var $i=new Date(e.currentYear,e.currentMonth,1);$i.setMonth(e.currentMonth+Zt),Bt.appendChild(Mn($i.getFullYear(),$i.getMonth()))}e.daysContainer.appendChild(Bt),e.days=e.daysContainer.firstChild,"range"===e.config.mode&&1===e.selectedDates.length&&di()}}function Cr(){if(!(e.config.showMonths>1||"dropdown"!==e.config.monthSelectorType)){e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var Zt=0;Zt<12;Zt++)if(Pn=Zt,!(void 0!==e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&Pn<e.config.minDate.getMonth()||void 0!==e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()&&Pn>e.config.maxDate.getMonth())){var $i=Co("option","flatpickr-monthDropdown-month");$i.value=new Date(e.currentYear,Zt).getMonth().toString(),$i.textContent=Z_(Zt,e.config.shorthandCurrentMonth,e.l10n),$i.tabIndex=-1,e.currentMonth===Zt&&($i.selected=!0),e.monthsDropdownContainer.appendChild($i)}}var Pn}function ns(){var $i,Bt=Co("div","flatpickr-month"),Zt=window.document.createDocumentFragment();e.config.showMonths>1||"static"===e.config.monthSelectorType?$i=Co("span","cur-month"):(e.monthsDropdownContainer=Co("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),he(e.monthsDropdownContainer,"change",function(Pa){var ks=md(Pa),Na=parseInt(ks.value,10);e.changeMonth(Na-e.currentMonth),$l("onMonthChange")}),Cr(),$i=e.monthsDropdownContainer);var Pn=Kv("cur-year",{tabindex:"-1"}),Lr=Pn.getElementsByTagName("input")[0];Lr.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&Lr.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(Lr.setAttribute("max",e.config.maxDate.getFullYear().toString()),Lr.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var is=Co("div","flatpickr-current-month");return is.appendChild($i),is.appendChild(Pn),Zt.appendChild(is),Bt.appendChild(Zt),{container:Bt,yearElement:Lr,monthElement:$i}}function Gr(){X_(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var Bt=e.config.showMonths;Bt--;){var Zt=ns();e.yearElements.push(Zt.yearElement),e.monthElements.push(Zt.monthElement),e.monthNav.appendChild(Zt.container)}e.monthNav.appendChild(e.nextMonthNav)}function Wa(){e.weekdayContainer?X_(e.weekdayContainer):e.weekdayContainer=Co("div","flatpickr-weekdays");for(var Bt=e.config.showMonths;Bt--;){var Zt=Co("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(Zt)}return es(),e.weekdayContainer}function es(){if(e.weekdayContainer){var Bt=e.l10n.firstDayOfWeek,Zt=IE(e.l10n.weekdays.shorthand);Bt>0&&Bt<Zt.length&&(Zt=IE(Zt.splice(Bt,Zt.length),Zt.splice(0,Bt)));for(var $i=e.config.showMonths;$i--;)e.weekdayContainer.children[$i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+Zt.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function rr(Bt,Zt){void 0===Zt&&(Zt=!0);var $i=Zt?Bt:Bt-e.currentMonth;$i<0&&!0===e._hidePrevMonthArrow||$i>0&&!0===e._hideNextMonthArrow||(e.currentMonth+=$i,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,$l("onYearChange"),Cr()),Zi(),$l("onMonthChange"),wy())}function _i(Bt){return e.calendarContainer.contains(Bt)}function Yn(Bt){if(e.isOpen&&!e.config.inline){var Zt=md(Bt),$i=_i(Zt),Lr=!(Zt===e.input||Zt===e.altInput||e.element.contains(Zt)||Bt.path&&Bt.path.indexOf&&(~Bt.path.indexOf(e.input)||~Bt.path.indexOf(e.altInput))||$i||_i(Bt.relatedTarget)),is=!e.config.ignoredFocusElements.some(function(Pa){return Pa.contains(Zt)});Lr&&is&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement&&""!==e.input.value&&void 0!==e.input.value&&A(),e.close(),e.config&&"range"===e.config.mode&&1===e.selectedDates.length&&e.clear(!1))}}function Wr(Bt){if(!(!Bt||e.config.minDate&&Bt<e.config.minDate.getFullYear()||e.config.maxDate&&Bt>e.config.maxDate.getFullYear())){var $i=e.currentYear!==Bt;e.currentYear=Bt||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),$i&&(e.redraw(),$l("onYearChange"),Cr())}}function yr(Bt,Zt){var $i;void 0===Zt&&(Zt=!0);var Pn=e.parseDate(Bt,void 0,Zt);if(e.config.minDate&&Pn&&Af(Pn,e.config.minDate,void 0!==Zt?Zt:!e.minDateHasTime)<0||e.config.maxDate&&Pn&&Af(Pn,e.config.maxDate,void 0!==Zt?Zt:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&0===e.config.disable.length)return!0;if(void 0===Pn)return!1;for(var Lr=!!e.config.enable,is=null!==($i=e.config.enable)&&void 0!==$i?$i:e.config.disable,Pa=0,ks=void 0;Pa<is.length;Pa++){if("function"==typeof(ks=is[Pa])&&ks(Pn))return Lr;if(ks instanceof Date&&void 0!==Pn&&ks.getTime()===Pn.getTime())return Lr;if("string"==typeof ks){var Na=e.parseDate(ks,void 0,!0);return Na&&Na.getTime()===Pn.getTime()?Lr:!Lr}if("object"==typeof ks&&void 0!==Pn&&ks.from&&ks.to&&Pn.getTime()>=ks.from.getTime()&&Pn.getTime()<=ks.to.getTime())return Lr}return!Lr}function Er(Bt){return void 0!==e.daysContainer&&-1===Bt.className.indexOf("hidden")&&-1===Bt.className.indexOf("flatpickr-disabled")&&e.daysContainer.contains(Bt)}function sr(Bt){var Zt=Bt.target===e._input,$i=e._input.value.trimEnd()!==q1();Zt&&$i&&(!Bt.relatedTarget||!_i(Bt.relatedTarget))&&e.setDate(e._input.value,!0,Bt.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function La(Bt){var Zt=md(Bt),$i=e.config.wrap?i.contains(Zt):Zt===e._input,Pn=e.config.allowInput,Lr=e.isOpen&&(!Pn||!$i),is=e.config.inline&&$i&&!Pn;if(13===Bt.keyCode&&$i){if(Pn)return e.setDate(e._input.value,!0,Zt===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),Zt.blur();e.open()}else if(_i(Zt)||Lr||is){var Pa=!!e.timeContainer&&e.timeContainer.contains(Zt);switch(Bt.keyCode){case 13:Pa?(Bt.preventDefault(),A(),Tm()):uf(Bt);break;case 27:Bt.preventDefault(),Tm();break;case 8:case 46:$i&&!e.config.allowInput&&(Bt.preventDefault(),e.clear());break;case 37:case 39:if(Pa||$i)e.hourElement&&e.hourElement.focus();else{Bt.preventDefault();var ks=o();if(void 0!==e.daysContainer&&(!1===Pn||ks&&Er(ks))){var Na=39===Bt.keyCode?1:-1;Bt.ctrlKey?(Bt.stopPropagation(),rr(Na),Cn(Ti(1),0)):Cn(void 0,Na)}}break;case 38:case 40:Bt.preventDefault();var gs=40===Bt.keyCode?1:-1;e.daysContainer&&void 0!==Zt.$i||Zt===e.input||Zt===e.altInput?Bt.ctrlKey?(Bt.stopPropagation(),Wr(e.currentYear-gs),Cn(Ti(1),0)):Pa||Cn(void 0,7*gs):Zt===e.currentYearElement?Wr(e.currentYear-gs):e.config.enableTime&&(!Pa&&e.hourElement&&e.hourElement.focus(),A(Bt),e._debouncedChange());break;case 9:if(Pa){var pa=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function($t){return $t}),rl=pa.indexOf(Zt);if(-1!==rl){var st=pa[rl+(Bt.shiftKey?-1:1)];Bt.preventDefault(),(st||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(Zt)&&Bt.shiftKey&&(Bt.preventDefault(),e._input.focus())}}if(void 0!==e.amPM&&Zt===e.amPM)switch(Bt.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],ie(),dg();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],ie(),dg()}($i||_i(Zt))&&$l("onKeyDown",Bt)}function di(Bt,Zt){if(void 0===Zt&&(Zt="flatpickr-day"),1===e.selectedDates.length&&(!Bt||Bt.classList.contains(Zt)&&!Bt.classList.contains("flatpickr-disabled"))){for(var $i=Bt?Bt.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),Pn=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),Lr=Math.min($i,e.selectedDates[0].getTime()),is=Math.max($i,e.selectedDates[0].getTime()),Pa=!1,ks=0,Na=0,gs=Lr;gs<is;gs+=Qb.DAY)yr(new Date(gs),!0)||(Pa=Pa||gs>Lr&&gs<is,gs<Pn&&(!ks||gs>ks)?ks=gs:gs>Pn&&(!Na||gs<Na)&&(Na=gs));Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+Zt)).forEach(function(rl){var $t=rl.dateObj.getTime(),Pt=ks>0&&$t<ks||Na>0&&$t>Na;if(Pt)return rl.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(Yt){rl.classList.remove(Yt)});Pa&&!Pt||(["startRange","inRange","endRange","notAllowed"].forEach(function(Yt){rl.classList.remove(Yt)}),void 0!==Bt&&(Bt.classList.add($i<=e.selectedDates[0].getTime()?"startRange":"endRange"),Pn<$i&&$t===Pn?rl.classList.add("startRange"):Pn>$i&&$t===Pn&&rl.classList.add("endRange"),$t>=ks&&(0===Na||$t<=Na)&&$d($t,Pn,$i)&&rl.classList.add("inRange")))})}}function Go(){e.isOpen&&!e.config.static&&!e.config.inline&&_d()}function Bo(Bt){return function(Zt){var $i=e.config["_"+Bt+"Date"]=e.parseDate(Zt,e.config.dateFormat),Pn=e.config["_"+("min"===Bt?"max":"min")+"Date"];void 0!==$i&&(e["min"===Bt?"minDateHasTime":"maxDateHasTime"]=$i.getHours()>0||$i.getMinutes()>0||$i.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(Lr){return yr(Lr)}),!e.selectedDates.length&&"min"===Bt&&se($i),dg()),e.daysContainer&&(g_(),void 0!==$i?e.currentYearElement[Bt]=$i.getFullYear().toString():e.currentYearElement.removeAttribute(Bt),e.currentYearElement.disabled=!!Pn&&void 0!==$i&&Pn.getFullYear()===$i.getFullYear())}}function Jr(){return e.config.wrap?i.querySelector("[data-input]"):i}function Fc(){"object"!=typeof e.config.locale&&typeof sh.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Xd(Xd({},sh.l10ns.default),"object"==typeof e.config.locale?e.config.locale:"default"!==e.config.locale?sh.l10ns[e.config.locale]:void 0),rg.D="("+e.l10n.weekdays.shorthand.join("|")+")",rg.l="("+e.l10n.weekdays.longhand.join("|")+")",rg.M="("+e.l10n.months.shorthand.join("|")+")",rg.F="("+e.l10n.months.longhand.join("|")+")",rg.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")",void 0===Xd(Xd({},t),JSON.parse(JSON.stringify(i.dataset||{}))).time_24hr&&void 0===sh.defaultConfig.time_24hr&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=sg(e),e.parseDate=q_({config:e.config,l10n:e.l10n})}function _d(Bt){if("function"!=typeof e.config.position){if(void 0!==e.calendarContainer){$l("onPreCalendarPosition");var Zt=Bt||e._positionElement,$i=Array.prototype.reduce.call(e.calendarContainer.children,function(Pr,ds){return Pr+ds.offsetHeight},0),Pn=e.calendarContainer.offsetWidth,Lr=e.config.position.split(" "),is=Lr[0],Pa=Lr.length>1?Lr[1]:null,ks=Zt.getBoundingClientRect(),Na=window.innerHeight-ks.bottom,gs="above"===is||"below"!==is&&Na<$i&&ks.top>$i,pa=window.pageYOffset+ks.top+(gs?-$i-2:Zt.offsetHeight+2);if(Kh(e.calendarContainer,"arrowTop",!gs),Kh(e.calendarContainer,"arrowBottom",gs),!e.config.inline){var rl=window.pageXOffset+ks.left,st=!1,$t=!1;"center"===Pa?(rl-=(Pn-ks.width)/2,st=!0):"right"===Pa&&(rl-=Pn-ks.width,$t=!0),Kh(e.calendarContainer,"arrowLeft",!st&&!$t),Kh(e.calendarContainer,"arrowCenter",st),Kh(e.calendarContainer,"arrowRight",$t);var Pt=window.document.body.offsetWidth-(window.pageXOffset+ks.right),Yt=rl+Pn>window.document.body.offsetWidth,ei=Pt+Pn>window.document.body.offsetWidth;if(Kh(e.calendarContainer,"rightMost",Yt),!e.config.static)if(e.calendarContainer.style.top=pa+"px",Yt)if(ei){var ti=function km(){for(var Bt=null,Zt=0;Zt<document.styleSheets.length;Zt++){var $i=document.styleSheets[Zt];if($i.cssRules){Bt=$i;break}}return Bt??function hg(){var Bt=document.createElement("style");return document.head.appendChild(Bt),Bt.sheet}()}();if(void 0===ti)return;var hn=window.document.body.offsetWidth,Nn=Math.max(0,hn/2-Pn/2),xn=ti.cssRules.length,vr="{left:"+ks.left+"px;right:auto;}";Kh(e.calendarContainer,"rightMost",!1),Kh(e.calendarContainer,"centerMost",!0),ti.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+vr,xn),e.calendarContainer.style.left=Nn+"px",e.calendarContainer.style.right="auto"}else e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Pt+"px";else e.calendarContainer.style.left=rl+"px",e.calendarContainer.style.right="auto"}}}else e.config.position(e,Bt)}function g_(){e.config.noCalendar||e.isMobile||(Cr(),wy(),Zi())}function Tm(){e._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(e.close,0):e.close()}function uf(Bt){Bt.preventDefault(),Bt.stopPropagation();var $i=Lx(md(Bt),function(pa){return pa.classList&&pa.classList.contains("flatpickr-day")&&!pa.classList.contains("flatpickr-disabled")&&!pa.classList.contains("notAllowed")});if(void 0!==$i){var Pn=$i,Lr=e.latestSelectedDateObj=new Date(Pn.dateObj.getTime()),is=(Lr.getMonth()<e.currentMonth||Lr.getMonth()>e.currentMonth+e.config.showMonths-1)&&"range"!==e.config.mode;if(e.selectedDateElem=Pn,"single"===e.config.mode)e.selectedDates=[Lr];else if("multiple"===e.config.mode){var Pa=Fb(Lr);Pa?e.selectedDates.splice(parseInt(Pa),1):e.selectedDates.push(Lr)}else"range"===e.config.mode&&(2===e.selectedDates.length&&e.clear(!1,!1),e.latestSelectedDateObj=Lr,e.selectedDates.push(Lr),0!==Af(Lr,e.selectedDates[0],!0)&&e.selectedDates.sort(function(pa,rl){return pa.getTime()-rl.getTime()}));if(ie(),is){var ks=e.currentYear!==Lr.getFullYear();e.currentYear=Lr.getFullYear(),e.currentMonth=Lr.getMonth(),ks&&($l("onYearChange"),Cr()),$l("onMonthChange")}wy(),Zi(),dg(),is||"range"===e.config.mode||1!==e.config.showMonths?void 0!==e.selectedDateElem&&void 0===e.hourElement&&e.selectedDateElem&&e.selectedDateElem.focus():ni(Pn),void 0!==e.hourElement&&void 0!==e.hourElement&&e.hourElement.focus(),e.config.closeOnSelect&&("single"===e.config.mode&&!e.config.enableTime||"range"===e.config.mode&&2===e.selectedDates.length&&!e.config.enableTime)&&Tm(),Ae()}}e.parseDate=q_({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=he,e._setHoursFromDate=se,e._positionCalendar=_d,e.changeMonth=rr,e.changeYear=Wr,e.clear=function gi(Bt,Zt){if(void 0===Bt&&(Bt=!0),void 0===Zt&&(Zt=!0),e.input.value="",void 0!==e.altInput&&(e.altInput.value=""),void 0!==e.mobileInput&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,!0===Zt&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),!0===e.config.enableTime){var $i=ag(e.config);oe($i.hours,$i.minutes,$i.seconds)}e.redraw(),Bt&&$l("onChange")},e.close=function vn(){e.isOpen=!1,e.isMobile||(void 0!==e.calendarContainer&&e.calendarContainer.classList.remove("open"),void 0!==e._input&&e._input.classList.remove("active")),$l("onClose")},e.onMouseOver=di,e._createElement=Co,e.createDay=Ki,e.destroy=function bi(){void 0!==e.config&&$l("onDestroy");for(var Bt=e._handlers.length;Bt--;)e._handlers[Bt].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var Zt=e.calendarContainer.parentNode;if(Zt.lastChild&&Zt.removeChild(Zt.lastChild),Zt.parentNode){for(;Zt.firstChild;)Zt.parentNode.insertBefore(Zt.firstChild,Zt);Zt.parentNode.removeChild(Zt)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function($i){try{delete e[$i]}catch{}})},e.isEnabled=yr,e.jumpToDate=ct,e.updateValue=dg,e.open=function Ja(Bt,Zt){if(void 0===Zt&&(Zt=e._positionElement),!0===e.isMobile){if(Bt){Bt.preventDefault();var $i=md(Bt);$i&&$i.blur()}return void 0!==e.mobileInput&&(e.mobileInput.focus(),e.mobileInput.click()),void $l("onOpen")}if(!e._input.disabled&&!e.config.inline){var Pn=e.isOpen;e.isOpen=!0,Pn||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),$l("onOpen"),_d(Zt)),!0===e.config.enableTime&&!0===e.config.noCalendar&&!1===e.config.allowInput&&(void 0===Bt||!e.timeContainer.contains(Bt.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}},e.redraw=g_,e.set=function n0(Bt,Zt){if(null!==Bt&&"object"==typeof Bt)for(var $i in Object.assign(e.config,Bt),Bt)void 0!==ap[$i]&&ap[$i].forEach(function(Pn){return Pn()});else e.config[Bt]=Zt,void 0!==ap[Bt]?ap[Bt].forEach(function(Pn){return Pn()}):Kc.indexOf(Bt)>-1&&(e.config[Bt]=nv(Zt));e.redraw(),dg(!0)},e.setDate=function yd(Bt,Zt,$i){if(void 0===Zt&&(Zt=!1),void 0===$i&&($i=e.config.dateFormat),0!==Bt&&!Bt||Bt instanceof Array&&0===Bt.length)return e.clear(Zt);v_(Bt,$i),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),ct(void 0,Zt),se(),0===e.selectedDates.length&&e.clear(!1),dg(Zt),Zt&&$l("onChange")},e.toggle=function gv(Bt){if(!0===e.isOpen)return e.close();e.open(Bt)};var ap={locale:[Fc,es],showMonths:[Gr,g,Wa],minDate:[ct],maxDate:[ct],positionElement:[Pf],clickOpens:[function(){!0===e.config.clickOpens?(he(e._input,"focus",e.open),he(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function v_(Bt,Zt){var $i=[];if(Bt instanceof Array)$i=Bt.map(function(Pn){return e.parseDate(Pn,Zt)});else if(Bt instanceof Date||"number"==typeof Bt)$i=[e.parseDate(Bt,Zt)];else if("string"==typeof Bt)switch(e.config.mode){case"single":case"time":$i=[e.parseDate(Bt,Zt)];break;case"multiple":$i=Bt.split(e.config.conjunction).map(function(Pn){return e.parseDate(Pn,Zt)});break;case"range":$i=Bt.split(e.l10n.rangeSeparator).map(function(Pn){return e.parseDate(Pn,Zt)})}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(Bt)));e.selectedDates=e.config.allowInvalidPreload?$i:$i.filter(function(Pn){return Pn instanceof Date&&yr(Pn,!1)}),"range"===e.config.mode&&e.selectedDates.sort(function(Pn,Lr){return Pn.getTime()-Lr.getTime()})}function Np(Bt){return Bt.slice().map(function(Zt){return"string"==typeof Zt||"number"==typeof Zt||Zt instanceof Date?e.parseDate(Zt,void 0,!0):Zt&&"object"==typeof Zt&&Zt.from&&Zt.to?{from:e.parseDate(Zt.from,void 0),to:e.parseDate(Zt.to,void 0)}:Zt}).filter(function(Zt){return Zt})}function Pf(){e._positionElement=e.config.positionElement||e._input}function $l(Bt,Zt){if(void 0!==e.config){var $i=e.config[Bt];if(void 0!==$i&&$i.length>0)for(var Pn=0;$i[Pn]&&Pn<$i.length;Pn++)$i[Pn](e.selectedDates,e.input.value,e,Zt);"onChange"===Bt&&(e.input.dispatchEvent(Pb("change")),e.input.dispatchEvent(Pb("input")))}}function Pb(Bt){var Zt=document.createEvent("Event");return Zt.initEvent(Bt,!0,!0),Zt}function Fb(Bt){for(var Zt=0;Zt<e.selectedDates.length;Zt++){var $i=e.selectedDates[Zt];if($i instanceof Date&&0===Af($i,Bt))return""+Zt}return!1}function wy(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(Bt,Zt){var $i=new Date(e.currentYear,e.currentMonth,1);$i.setMonth(e.currentMonth+Zt),e.config.showMonths>1||"static"===e.config.monthSelectorType?e.monthElements[Zt].textContent=Z_($i.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=$i.getMonth().toString(),Bt.value=$i.getFullYear().toString()}),e._hidePrevMonthArrow=void 0!==e.config.minDate&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=void 0!==e.config.maxDate&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function q1(Bt){var Zt=Bt||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function($i){return e.formatDate($i,Zt)}).filter(function($i,Pn,Lr){return"range"!==e.config.mode||e.config.enableTime||Lr.indexOf($i)===Pn}).join("range"!==e.config.mode?e.config.conjunction:e.l10n.rangeSeparator)}function dg(Bt){void 0===Bt&&(Bt=!0),void 0!==e.mobileInput&&e.mobileFormatStr&&(e.mobileInput.value=void 0!==e.latestSelectedDateObj?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=q1(e.config.dateFormat),void 0!==e.altInput&&(e.altInput.value=q1(e.config.altFormat)),!1!==Bt&&$l("onValueUpdate")}function AE(Bt){var Zt=md(Bt),$i=e.prevMonthNav.contains(Zt),Pn=e.nextMonthNav.contains(Zt);$i||Pn?rr($i?-1:1):e.yearElements.indexOf(Zt)>=0?Zt.select():Zt.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):Zt.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}return function s(){e.element=e.input=i,e.isOpen=!1,function Qa(){var Bt=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Zt=Xd(Xd({},JSON.parse(JSON.stringify(i.dataset||{}))),t),$i={};e.config.parseDate=Zt.parseDate,e.config.formatDate=Zt.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(pa){e.config._enable=Np(pa)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(pa){e.config._disable=Np(pa)}});var Pn="time"===Zt.mode;Zt.dateFormat||!Zt.enableTime&&!Pn||($i.dateFormat=Zt.noCalendar||Pn?"H:i"+(Zt.enableSeconds?":S":""):(sh.defaultConfig.dateFormat||Dl.dateFormat)+" H:i"+(Zt.enableSeconds?":S":"")),Zt.altInput&&(Zt.enableTime||Pn)&&!Zt.altFormat&&($i.altFormat=Zt.noCalendar||Pn?"h:i"+(Zt.enableSeconds?":S K":" K"):(sh.defaultConfig.altFormat||Dl.altFormat)+" h:i"+(Zt.enableSeconds?":S":"")+" K"),Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Bo("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Bo("max")});var Pa=function(pa){return function(rl){e.config["min"===pa?"_minTime":"_maxTime"]=e.parseDate(rl,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:Pa("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:Pa("max")}),"time"===Zt.mode&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,$i,Zt);for(var ks=0;ks<Bt.length;ks++)e.config[Bt[ks]]=!0===e.config[Bt[ks]]||"true"===e.config[Bt[ks]];for(Kc.filter(function(pa){return void 0!==e.config[pa]}).forEach(function(pa){e.config[pa]=nv(e.config[pa]||[]).map(f)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&"single"===e.config.mode&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ks=0;ks<e.config.plugins.length;ks++){var Na=e.config.plugins[ks](e)||{};for(var gs in Na)Kc.indexOf(gs)>-1?e.config[gs]=nv(Na[gs]).map(f).concat(e.config[gs]):typeof Zt[gs]>"u"&&(e.config[gs]=Na[gs])}Zt.altInputClass||(e.config.altInputClass=Jr().className+" "+e.config.altInputClass),$l("onParseConfig")}(),Fc(),function eu(){e.input=Jr(),e.input?(e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Co(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Pf()):e.config.errorHandler(new Error("Invalid input element specified"))}(),function $a(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var Bt=e.config.defaultDate||("INPUT"!==e.input.nodeName&&"TEXTAREA"!==e.input.nodeName||!e.input.placeholder||e.input.value!==e.input.placeholder?e.input.value:null);Bt&&v_(Bt,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),void 0!==e.config.minTime&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),void 0!==e.config.maxTime&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}(),function r(){e.utils={getDaysInMonth:function(Bt,Zt){return void 0===Bt&&(Bt=e.currentMonth),void 0===Zt&&(Zt=e.currentYear),1===Bt&&(Zt%4==0&&Zt%100!=0||Zt%400==0)?29:e.l10n.daysInMonth[Bt]}}}(),e.isMobile||function Fi(){var Bt=window.document.createDocumentFragment();if(e.calendarContainer=Co("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(Bt.appendChild(function ta(){return e.monthNav=Co("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Co("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Co("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Gr(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(Bt){e.__hidePrevMonthArrow!==Bt&&(Kh(e.prevMonthNav,"flatpickr-disabled",Bt),e.__hidePrevMonthArrow=Bt)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(Bt){e.__hideNextMonthArrow!==Bt&&(Kh(e.nextMonthNav,"flatpickr-disabled",Bt),e.__hideNextMonthArrow=Bt)}}),e.currentYearElement=e.yearElements[0],wy(),e.monthNav}()),e.innerContainer=Co("div","flatpickr-innerContainer"),e.config.weekNumbers){var Zt=function aa(){e.calendarContainer.classList.add("hasWeeks");var Bt=Co("div","flatpickr-weekwrapper");Bt.appendChild(Co("span","flatpickr-weekday",e.l10n.weekAbbreviation));var Zt=Co("div","flatpickr-weeks");return Bt.appendChild(Zt),{weekWrapper:Bt,weekNumbers:Zt}}(),$i=Zt.weekWrapper,Pn=Zt.weekNumbers;e.innerContainer.appendChild($i),e.weekNumbers=Pn,e.weekWrapper=$i}e.rContainer=Co("div","flatpickr-rContainer"),e.rContainer.appendChild(Wa()),e.daysContainer||(e.daysContainer=Co("div","flatpickr-days"),e.daysContainer.tabIndex=-1),Zi(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),Bt.appendChild(e.innerContainer)}e.config.enableTime&&Bt.appendChild(function ws(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var Bt=ag(e.config);e.timeContainer=Co("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var Zt=Co("span","flatpickr-time-separator",":"),$i=Kv("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=$i.getElementsByTagName("input")[0];var Pn=Kv("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=Pn.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Ul(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?Bt.hours:function z(Bt){switch(Bt%24){case 0:case 12:return 12;default:return Bt%12}}(Bt.hours)),e.minuteElement.value=Ul(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():Bt.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild($i),e.timeContainer.appendChild(Zt),e.timeContainer.appendChild(Pn),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var Lr=Kv("flatpickr-second");e.secondElement=Lr.getElementsByTagName("input")[0],e.secondElement.value=Ul(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():Bt.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Co("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(Lr)}return e.config.time_24hr||(e.amPM=Co("span","flatpickr-am-pm",e.l10n.amPM[Oh((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}()),Kh(e.calendarContainer,"rangeMode","range"===e.config.mode),Kh(e.calendarContainer,"animate",!0===e.config.animate),Kh(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(Bt);var Lr=void 0!==e.config.appendTo&&void 0!==e.config.appendTo.nodeType;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!Lr&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):void 0!==e.config.appendTo&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var is=Co("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(is,e.element),is.appendChild(e.element),e.altInput&&is.appendChild(e.altInput),is.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(void 0!==e.config.appendTo?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}(),function Ke(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function($i){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+$i+"]"),function(Pn){return he(Pn,"click",e[$i])})}),e.isMobile)!function ju(){var Bt=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Co("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=Bt,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr="datetime-local"===Bt?"Y-m-d\\TH:i:S":"date"===Bt?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",void 0!==e.altInput&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}he(e.mobileInput,"change",function(Zt){e.setDate(md(Zt).value,!1,e.mobileFormatStr),$l("onChange"),$l("onClose")})}();else{var Bt=qv(Go,50);if(e._debouncedChange=qv(Ae,GI),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&he(e.daysContainer,"mouseover",function($i){"range"===e.config.mode&&di(md($i))}),he(e._input,"keydown",La),void 0!==e.calendarContainer&&he(e.calendarContainer,"keydown",La),!e.config.inline&&!e.config.static&&he(window,"resize",Bt),void 0!==window.ontouchstart?he(window.document,"touchstart",Yn):he(window.document,"mousedown",Yn),he(window.document,"focus",Yn,{capture:!0}),!0===e.config.clickOpens&&(he(e._input,"focus",e.open),he(e._input,"click",e.open)),void 0!==e.daysContainer&&(he(e.monthNav,"click",AE),he(e.monthNav,["keyup","increment"],_e),he(e.daysContainer,"click",uf)),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement){he(e.timeContainer,["increment"],A),he(e.timeContainer,"blur",A,{capture:!0}),he(e.timeContainer,"click",pt),he([e.hourElement,e.minuteElement],["focus","click"],function($i){return md($i).select()}),void 0!==e.secondElement&&he(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),void 0!==e.amPM&&he(e.amPM,"click",function($i){A($i)})}e.config.allowInput&&he(e._input,"blur",sr)}}(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&se(e.config.noCalendar?e.latestSelectedDateObj:void 0),dg(!1)),g();var Bt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&Bt&&_d(),$l("onReady")}(),e}function m1(i,t){for(var e=Array.prototype.slice.call(i).filter(function(f){return f instanceof HTMLElement}),r=[],s=0;s<e.length;s++){var o=e[s];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=HI(o,t||{}),r.push(o._flatpickr)}catch(f){console.error(f)}}return 1===r.length?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(i){return m1(this,i)},HTMLElement.prototype.flatpickr=function(i){return m1([this],i)});var sh=function(i,t){return"string"==typeof i?m1(window.document.querySelectorAll(i),t):i instanceof Node?m1([i],t):m1(i,t)};sh.defaultConfig={},sh.l10ns={en:Xd({},Rc),default:Xd({},Rc)},sh.localize=function(i){sh.l10ns.default=Xd(Xd({},sh.l10ns.default),i)},sh.setDefaults=function(i){sh.defaultConfig=Xd(Xd({},sh.defaultConfig),i)},sh.parseDate=q_({}),sh.formatDate=sg({}),sh.compareDates=Af,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(i){return m1(this,i)}),Date.prototype.fp_incr=function(i){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof i?parseInt(i,10):i))},typeof window<"u"&&(window.flatpickr=sh);const VI=sh;let dC=(()=>{class i{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n.wxM({token:i,factory:i.\u0275fac}),i})();const UI={provide:j.Y6,useExisting:(0,n.wd)(()=>ME),multi:!0};let ME=(()=>{class i{constructor(e,r,s){this.elm=e,this.defaults=r,this.renderer=s,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new n._w7,this.flatpickrChange=new n._w7,this.flatpickrValueUpdate=new n._w7,this.flatpickrOpen=new n._w7,this.flatpickrClose=new n._w7,this.flatpickrMonthChange=new n._w7,this.flatpickrYearChange=new n._w7,this.flatpickrDayCreate=new n._w7,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const e={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(r,s,o)=>{this.flatpickrChange.emit({selectedDates:r,dateString:s,instance:o})},onOpen:(r,s,o)=>{this.flatpickrOpen.emit({selectedDates:r,dateString:s,instance:o})},onClose:(r,s,o)=>{this.flatpickrClose.emit({selectedDates:r,dateString:s,instance:o})},onMonthChange:(r,s,o)=>{this.flatpickrMonthChange.emit({selectedDates:r,dateString:s,instance:o})},onYearChange:(r,s,o)=>{this.flatpickrYearChange.emit({selectedDates:r,dateString:s,instance:o})},onReady:(r,s,o)=>{this.flatpickrReady.emit({selectedDates:r,dateString:s,instance:o})},onValueUpdate:(r,s,o)=>{this.flatpickrValueUpdate.emit({selectedDates:r,dateString:s,instance:o})},onDayCreate:(r,s,o,f)=>{this.flatpickrDayCreate.emit({selectedDates:r,dateString:s,instance:o,dayElement:f})}};Object.keys(e).forEach(r=>{typeof e[r]>"u"&&(e[r]=typeof this.options[r]<"u"?this.options[r]:this.defaults[r])}),e.time_24hr=e.time24hr,e.altInputClass=(e.altInputClass||"")+" "+this.elm.nativeElement.className,e.enable||delete e.enable,this.instance=VI(this.elm.nativeElement,e),this.setDisabledState(this.isDisabled)}ngOnChanges(e){this.instance&&Object.keys(e).forEach(r=>{this.instance.set(r,this[r])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(e){let r=e;this.convertModelValue&&"range"===this.mode&&e&&(r=[e.from,e.to]),this.instance?this.instance.setDate(r):this.initialValue=r}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const e=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof e)switch(this.mode){case"multiple":const r=e.split("; ").map(f=>this.instance.parseDate(f,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(r);break;case"range":const[s,o]=e.split(this.instance.l10n.rangeSeparator).map(f=>this.instance.parseDate(f,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:s,to:o});break;default:this.onChangeFn(this.instance.parseDate(e,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(e)}}return i.\u0275fac=function(e){return new(e||i)(n.GI1(n.GMv),n.GI1(dC),n.GI1(n.q87))},i.\u0275dir=n.Sc5({type:i,selectors:[["","mwlFlatpickr",""]],hostBindings:function(e,r){1&e&&n.qCj("blur",function(){return r.onTouchedFn()})("input",function(){return r.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[n.M5G([UI]),n.SYr]}),i})();const OE=new n.UbH("flatpickr defaults");function jI(i){const t=new dC;return Object.assign(t,i),t}let WI=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[{provide:OE,useValue:e},{provide:dC,useFactory:jI,deps:[OE]}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.a4G({type:i}),i.\u0275inj=n.s3X({}),i})();const $I=["*"],XI=["rootEl"],g1=i=>({$implicit:i});function ZI(i,t){if(1&i&&(n.I0R(0,"div",1,2),n.C_f(2,3),n.C$Y()),2&i){const e=n.GaO();n.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),n.yG2(2),n.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.S45(4,g1,e.renderProps))}}function qI(i,t){if(1&i&&(n.I0R(0,"span",1,2),n.C_f(2,3),n.C$Y()),2&i){const e=n.GaO();n.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),n.yG2(2),n.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.S45(4,g1,e.renderProps))}}function KI(i,t){if(1&i&&(n.I0R(0,"a",1,2),n.C_f(2,3),n.C$Y()),2&i){const e=n.GaO();n.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),n.yG2(2),n.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.S45(4,g1,e.renderProps))}}function JI(i,t){if(1&i&&(n.I0R(0,"tr",1,2),n.C_f(2,3),n.C$Y()),2&i){const e=n.GaO();n.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),n.yG2(2),n.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.S45(4,g1,e.renderProps))}}function QI(i,t){if(1&i&&(n.I0R(0,"th",1,2),n.C_f(2,3),n.C$Y()),2&i){const e=n.GaO();n.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),n.yG2(2),n.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.S45(4,g1,e.renderProps))}}function eM(i,t){if(1&i&&(n.I0R(0,"td",1,2),n.C_f(2,3),n.C$Y()),2&i){const e=n.GaO();n.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),n.yG2(2),n.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.S45(4,g1,e.renderProps))}}const tM=["dayHeaderContent"],iM=["dayCellContent"],nM=["weekNumberContent"],rM=["nowIndicatorContent"],sM=["eventContent"],aM=["slotLaneContent"],oM=["slotLabelContent"],lM=["allDayContent"],cM=["moreLinkContent"],uM=["noEventsContent"],hM=["resourceAreaHeaderContent"],dM=["resourceGroupLabelContent"],fM=["resourceLabelContent"],pM=["resourceLaneContent"],mM=["resourceGroupLaneContent"];function gM(i,t){if(1&i&&n.wR5(0,"transport-container",1),2&i){const e=t.$implicit,r=n.GaO();n.E7m("inPlaceOf",e.containerEl)("reportEl",e.reportNewContainerEl)("elTag",e.elTag)("elClasses",e.elClasses)("elStyle",e.elStyle)("elAttrs",e.elAttrs)("template",r.templateMap[e.generatorName])("renderProps",e.renderProps)}}const RE={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},vM=["events","eventSources","resources"],_M=Object.prototype.hasOwnProperty;function ew(i){return Array.isArray(i)?i.map(ew):i instanceof Date?new Date(i.valueOf()):"object"==typeof i&&i?LE(i,ew):i}function LE(i,t){const e={};for(const r in i)_M.call(i,r)&&(e[r]=t(i[r],r));return e}function fC(i,t){if(i===t)return!0;if(i&&t&&"object"==typeof i&&"object"==typeof t){if(i.constructor!==t.constructor)return!1;var e,r,s;if(Array.isArray(i)){if((e=i.length)!=t.length)return!1;for(r=e;0!=r--;)if(!fC(i[r],t[r]))return!1;return!0}if(i.constructor===RegExp)return i.source===t.source&&i.flags===t.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===t.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===t.toString();if((e=(s=Object.keys(i)).length)!==Object.keys(t).length)return!1;for(r=e;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=e;0!=r--;){var o=s[r];if(!fC(i[o],t[o]))return!1}return!0}return i!=i&&t!=t}const tw=typeof document<"u"?document.createDocumentFragment():null;let yM=(()=>{class i{constructor(e){this.element=e}ngAfterViewInit(){tw&&tw.appendChild(this.element.nativeElement)}ngOnDestroy(){tw&&tw.removeChild(this.element.nativeElement)}}return i.\u0275fac=function(e){return new(e||i)(n.GI1(n.GMv))},i.\u0275cmp=n.In1({type:i,selectors:[["offscreen-fragment"]],ngContentSelectors:$I,decls:1,vars:0,template:function(e,r){1&e&&(n.kPM(),n._Xx(0))},encapsulation:2}),i})();const v1=typeof document<"u"?document.createDocumentFragment():null;let xM=(()=>{class i{ngAfterViewInit(){const e=this.rootElRef?.nativeElement;PE(e,this.inPlaceOf),pC(e,void 0,this.elAttrs),this.inPlaceOf.style.display="none",this.reportEl(e)}ngOnChanges(e){const r=this.rootElRef?.nativeElement;if(r)if(this.inPlaceOf.parentNode!==v1)PE(r,this.inPlaceOf),pC(r,void 0,this.elAttrs),this.reportEl(r);else{const s=e.elAttrs;s&&pC(r,s.previousValue,s.currentValue)}}ngOnDestroy(){this.inPlaceOf.parentNode===v1&&v1&&v1.removeChild(this.inPlaceOf),this.reportEl(null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=n.In1({type:i,selectors:[["transport-container"]],viewQuery:function(e,r){if(1&e&&n.CC$(XI,5),2&e){let s;n.wto(s=n.Gqi())&&(r.rootElRef=s.first)}},inputs:{inPlaceOf:"inPlaceOf",reportEl:"reportEl",elTag:"elTag",elClasses:"elClasses",elStyle:"elStyle",elAttrs:"elAttrs",template:"template",renderProps:"renderProps"},features:[n.SYr],decls:6,vars:6,consts:[[3,"ngIf"],[3,"ngClass","ngStyle"],["rootEl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,r){1&e&&n.yuY(0,ZI,3,6,"ng-template",0)(1,qI,3,6,"ng-template",0)(2,KI,3,6,"ng-template",0)(3,JI,3,6,"ng-template",0)(4,QI,3,6,"ng-template",0)(5,eM,3,6,"ng-template",0),2&e&&(n.E7m("ngIf","div"==r.elTag),n.yG2(),n.E7m("ngIf","span"==r.elTag),n.yG2(),n.E7m("ngIf","a"==r.elTag),n.yG2(),n.E7m("ngIf","tr"==r.elTag),n.yG2(),n.E7m("ngIf","th"==r.elTag),n.yG2(),n.E7m("ngIf","td"==r.elTag))},dependencies:[Re.u_,Re.QF,Re.Qt,Re.XV],encapsulation:2}),i})();function PE(i,t){t.parentNode?.insertBefore(i,t.nextSibling),v1&&v1.appendChild(t)}function pC(i,t={},e={}){for(const r in t)r in e||(i[r]=null);for(const r in e)i[r]=e[r]}let bM=(()=>{class i{constructor(e,r){this.element=e,this.calendar=null,this.optionSnapshot={},this.customRenderingMap=new Map,this.templateMap={};const s=new ix;s.subscribe(o=>{this.customRenderingMap=o,this.customRenderingArray=void 0,r.detectChanges()}),this.handleCustomRendering=s.handle.bind(s),this.templateMap=this}ngAfterViewInit(){const{deepChangeDetection:e}=this,r={...this.options,...this.buildInputOptions()};this.optionSnapshot=LE(r,(g,A)=>e&&RE[A]?ew(g):g);const s=this.element.nativeElement,o=this.calendar=new vx(s,{...r,...this.buildExtraOptions()}),f=s.closest("ion-content");f&&f.componentOnReady?f.componentOnReady().then(()=>{window.requestAnimationFrame(()=>{o.render()})}):o.render()}ngDoCheck(){if(this.calendar){const{deepChangeDetection:e,optionSnapshot:r}=this,s={...this.options,...this.buildInputOptions()},o={},f=[];for(const A in s)if(s.hasOwnProperty(A)){let P=s[A];e&&RE[A]?fC(r[A],P)||(r[A]=ew(P),f.push(A)):r[A]!==P&&(r[A]=P,f.push(A)),o[A]=P}const g=Object.keys(r);for(const A of g)A in s||(delete r[A],f.push(A));f.length&&(this.calendar.pauseRendering(),this.calendar.resetOptions({...o,...this.buildExtraOptions()},f))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}get customRenderings(){return this.customRenderingArray||(this.customRenderingArray=[...this.customRenderingMap.values()])}getApi(){return this.calendar}buildInputOptions(){const e={};for(const r of vM){const s=this[r];null!=s&&(e[r]=s)}return e}buildExtraOptions(){return{handleCustomRendering:this.handleCustomRendering,customRenderingMetaMap:this.templateMap,customRenderingReplaces:!0}}trackCustomRendering(e,r){return r.id}}return i.\u0275fac=function(e){return new(e||i)(n.GI1(n.GMv),n.GI1(n.kD9))},i.\u0275cmp=n.In1({type:i,selectors:[["full-calendar"]],contentQueries:function(e,r,s){if(1&e&&(n.szK(s,tM,7),n.szK(s,iM,7),n.szK(s,nM,7),n.szK(s,rM,7),n.szK(s,sM,7),n.szK(s,aM,7),n.szK(s,oM,7),n.szK(s,lM,7),n.szK(s,cM,7),n.szK(s,uM,7),n.szK(s,hM,7),n.szK(s,dM,7),n.szK(s,fM,7),n.szK(s,pM,7),n.szK(s,mM,7)),2&e){let o;n.wto(o=n.Gqi())&&(r.dayHeaderContent=o.first),n.wto(o=n.Gqi())&&(r.dayCellContent=o.first),n.wto(o=n.Gqi())&&(r.weekNumberContent=o.first),n.wto(o=n.Gqi())&&(r.nowIndicatorContent=o.first),n.wto(o=n.Gqi())&&(r.eventContent=o.first),n.wto(o=n.Gqi())&&(r.slotLaneContent=o.first),n.wto(o=n.Gqi())&&(r.slotLabelContent=o.first),n.wto(o=n.Gqi())&&(r.allDayContent=o.first),n.wto(o=n.Gqi())&&(r.moreLinkContent=o.first),n.wto(o=n.Gqi())&&(r.noEventsContent=o.first),n.wto(o=n.Gqi())&&(r.resourceAreaHeaderContent=o.first),n.wto(o=n.Gqi())&&(r.resourceGroupLabelContent=o.first),n.wto(o=n.Gqi())&&(r.resourceLabelContent=o.first),n.wto(o=n.Gqi())&&(r.resourceLaneContent=o.first),n.wto(o=n.Gqi())&&(r.resourceGroupLaneContent=o.first)}},inputs:{options:"options",deepChangeDetection:"deepChangeDetection",events:"events",eventSources:"eventSources",resources:"resources"},decls:2,vars:2,consts:[[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps",4,"ngFor","ngForOf","ngForTrackBy"],[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps"]],template:function(e,r){1&e&&(n.I0R(0,"offscreen-fragment"),n.yuY(1,gM,1,8,"transport-container",0),n.C$Y()),2&e&&(n.yG2(),n.E7m("ngForOf",r.customRenderings)("ngForTrackBy",r.trackCustomRendering))},dependencies:[yM,xM,Re.ay],encapsulation:2}),i})(),wM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.a4G({type:i}),i.\u0275inj=n.s3X({imports:[[Re.MD]]}),i})();const CM=["eventModal"];function EM(i,t){if(1&i){const e=n.KQA();n.I0R(0,"div",33)(1,"a",34),n.qCj("click",function(){n.usT(e);const s=n.GaO();return n.CGJ(s.showeditEvent())}),n.OEk(2,"Edit"),n.C$Y()()}}function kM(i,t){if(1&i&&(n.I0R(0,"div",43)(1,"h6",49),n.OEk(2),n.wVc(3,"date"),n.C$Y()()),2&i){const e=n.GaO(2);n.yG2(2),n.oRS(" ",n.g7$(3,1,e.editEvent.start,"dd MMMM,yyyy")," ")}}function TM(i,t){if(1&i&&(n.I0R(0,"h6",50),n.wR5(1,"span",51),n.OEk(2),n.wVc(3,"date"),n.wVc(4,"date"),n.wR5(5,"span",52),n.C$Y()),2&i){const e=n.GaO(2);n.yG2(2),n.CAO(" ",n.g7$(3,2,e.editEvent.start,"h:mm a")," - ",n.g7$(4,5,e.editEvent.end,"h:mm a")," ")}}function SM(i,t){1&i&&(n.I0R(0,"h6",50),n.wR5(1,"span",51),n.OEk(2," - "),n.wR5(3,"span",52),n.C$Y())}function AM(i,t){if(1&i&&(n.I0R(0,"h6",50)(1,"span",53),n.OEk(2),n.C$Y()()),2&i){const e=n.GaO(2);n.yG2(2),n.cNF(e.editEvent.extendedProps.totalDuration)}}function DM(i,t){if(1&i&&n.OEk(0),2&i){const e=n.GaO(2);n.oRS(" ",e.editEvent.extendedProps.checkin_status," ")}}function IM(i,t){if(1&i&&(n.I0R(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38),n.wR5(4,"i",39),n.C$Y(),n.yuY(5,kM,4,4,"div",40),n.C$Y()(),n.I0R(6,"div",41)(7,"div",38),n.wR5(8,"i",42),n.C$Y(),n.I0R(9,"div",43),n.yuY(10,TM,6,8,"h6",44)(11,SM,4,0),n.C$Y()(),n.I0R(12,"div",41)(13,"div",38),n.wR5(14,"i",45),n.C$Y(),n.I0R(15,"div",43),n.yuY(16,AM,3,1,"h6",44),n.C$Y()(),n.I0R(17,"div",46)(18,"div",38),n.wR5(19,"i",47),n.C$Y(),n.I0R(20,"div",43)(21,"p",48),n.yuY(22,DM,1,1),n.OEk(23),n.C$Y()()()()),2&i){const e=n.GaO();n.yG2(5),n.C0Y(5,e.editEvent.start?5:-1),n.yG2(5),n.C0Y(10,e.editEvent.start?10:11),n.yG2(6),n.C0Y(16,e.editEvent.extendedProps?16:-1),n.yG2(5),n.E7m("ngClass","Early"==e.editEvent.extendedProps.checkin_status?"text-warning":e.editEvent.extendedProps.checkin_status?"text-danger":"text-success"),n.yG2(),n.C0Y(22,e.editEvent.extendedProps.checkin_status?22:-1),n.yG2(),n.oRS(" ",e.editEvent.extendedProps.timeDifferencev2," ")}}let MM=(()=>{class i{constructor(e,r,s){this.api=e,this.route=r,this.formBuilder=s,this.spinnerStatus=!1,this.attendanceData=[],this.attendanceDataList=[],this.checkIndetails={},this.urlId=null,this.company_id=null,this.isEditMode=!1,this.submitted=!1,this.calendarOptions={plugins:[$_,lc,$r,xo],headerToolbar:{right:"dayGridMonth,dayGridWeek,dayGridDay,listWeek",center:"title",left:"prev,next today"},initialView:"dayGridMonth",themeSystem:"bootstrap",timeZone:"local",selectable:!0,navLinks:!0,eventResizableFromStart:!0,eventClick:this.handleEventClick.bind(this),events:[],eventContent:function(o){const{extendedProps:f}=o.event;return{html:`\n\n          <div >\n\n           <b>Check-in:</b> ${f.earliestCheckInTime} <br>\n            <b>Check-out:</b> ${f.latestCheckOutTime||"Ongoing"} <br>\n            <b>Total Duration:</b>   ${f.totalDuration}\n\n          </div>\n        `}}}}ngOnInit(){this.formGroup=this.formBuilder.group({check_in_time:["",[j.AQ.required]],check_out_time:["",[j.AQ.required]]}),this.route.params.subscribe(e=>{}),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null,this.company_id=e.company_id?Number(e.company_id):null}),this.urlId&&this.company_id&&this.getCheckInDetail()}toggleSpinner(e){this.spinnerStatus=e}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetailAllDate?emp_id=${this.urlId}&company_id=${this.company_id}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status){this.checkIndetails=e.data;const r=this.checkIndetails.checkInsByDate.flatMap(s=>({title:`${this.formatTime(s.earliestCheckInTime)} - ${this.formatTime(s.latestCheckOutTime)||"Ongoing"}`,start:`${s.date}T${s.earliestCheckInTime}`,end:s.latestCheckOutTime?`${s.date}T${s.latestCheckOutTime}`:null,extendedProps:{earliestCheckInTime:this.formatTime(s.earliestCheckInTime),latestCheckOutTime:this.formatTime(s.latestCheckOutTime),totalDuration:s.total_duration,checkin_status:s.checkin_status,timeDifferencev2:s.timeDifferencev2},className:"bg-warning-subtle"}));this.calendarOptions={...this.calendarOptions,events:r}}else this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}formatTime(e){if(!e)return"Invalid time";const[r,s,o]=e.split(":");return`${+r%12||12}:${s} ${+r>=12?"PM":"AM"}`}handleEventClick(e){console.log(e),this.isEditMode=!0,this.editEvent=e.event,console.log(this.editEvent),this.eventModal?.show(),setTimeout(()=>{document.querySelector(".event-details").style.display="block",document.querySelector(".event-form").style.display="none",document.getElementById("btn-delete-event")?.classList.remove("d-none"),document.querySelector("#edit-event-btn").innerHTML="edit",document.getElementById("btn-save-event").setAttribute("hidden","true")},100),this.formGroup=this.formBuilder.group({check_in_time:e.event.extendedProps.earliestCheckInTime,check_out_time:e.event.extendedProps.latestCheckOutTime})}showeditEvent(){"cancel"==document.querySelector("#edit-event-btn")?.innerHTML?this.eventModal?.hide():(document.querySelector(".event-details").style.display="none",document.querySelector(".event-form").style.display="block",document.getElementById("btn-save-event").removeAttribute("hidden"),document.querySelector("#btn-save-event").innerHTML="Update Event",document.querySelector("#edit-event-btn").innerHTML="cancel")}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(D.gV),n.GI1(j.im))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-atten-calender"]],viewQuery:function(r,s){if(1&r&&n.CC$(CM,5),2&r){let o;n.wto(o=n.Gqi())&&(s.eventModal=o.first)}},decls:44,vars:10,consts:[[1,"calendar-wrapper","d-lg-flex","gap-4"],[1,"w-100"],[1,"card","card-h-100"],[1,"d-flex","justify-content-end"],["href","javascript:window.print()",1,"btn","btn-success","me-3","mt-2"],[1,"ri-printer-line","align-bottom","me-1"],[1,""],["id","calendar"],[3,"options"],["bsModal","","id","event-modal","tabindex","-1",1,"modal","fade"],["eventModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],["id","modal-title",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4"],["name","event-form","id","form-event","novalidate","",1,"needs-validation",3,"formGroup"],["class","text-end"],["class","event-details"],[1,"row","event-form"],["id","event-time",1,"col-12"],[1,"row"],[1,"col-6"],[1,"mb-3"],[1,"form-label"],[1,"input-group"],["id","timepicker1","type","text","mwlFlatpickr","","formControlName","check_in_time","placeholder","Select start time","readonly","",1,"form-control","flatpickr","flatpickr-input",3,"noCalendar","enableTime","dateFormat"],[1,"input-group-text"],[1,"ri-time-line"],["id","timepicker2","type","text","mwlFlatpickr","","formControlName","check_out_time","placeholder","Select end time","readonly","",1,"form-control","flatpickr","flatpickr-input",3,"noCalendar","enableTime","dateFormat"],[1,"hstack","gap-2","justify-content-end"],["type","submit","id","btn-save-event",1,"btn","btn-success"],[1,"text-end"],["href","javascript:void(0);","id","edit-event-btn","role","button",1,"btn","btn-sm","btn-subtle-primary",3,"click"],[1,"event-details"],[1,"d-flex","mb-2"],[1,"flex-grow-1","d-flex","align-items-center"],[1,"flex-shrink-0","me-3"],[1,"ri-calendar-event-line","text-muted","fs-lg"],["class","flex-grow-1"],[1,"d-flex","align-items-center","mb-2"],[1,"ri-time-line","text-muted","fs-lg"],[1,"flex-grow-1"],["class","d-block fw-semibold mb-0"],[1,"mdi","mdi-timer-sand-complete","text-muted","fs-lg"],[1,"d-flex","mb-3"],[1,"ri-discuss-line","text-muted","fs-lg"],["id","event-description-tag",1,"d-block","mb-0",3,"ngClass"],["id","event-start-date-tag",1,"d-block","fw-semibold","mb-0"],[1,"d-block","fw-semibold","mb-0"],["id","event-timepicker1-tag"],["id","event-timepicker2-tag"],["id","event-location-tag"]],template:function(r,s){if(1&r){const o=n.KQA();n.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),n.wR5(5,"i",5),n.OEk(6," Print"),n.C$Y()(),n.I0R(7,"div",6)(8,"div",7),n.wR5(9,"full-calendar",8),n.C$Y()()()()(),n.I0R(10,"div",9,10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"h5",14),n.OEk(16,"Check In Deatils"),n.C$Y(),n.I0R(17,"button",15),n.qCj("click",function(){n.usT(o);const g=n.Gew(11);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(18,"div",16)(19,"form",17),n.yuY(20,EM,3,0,"div",18)(21,IM,24,6,"div",19),n.I0R(22,"div",20)(23,"div",21)(24,"div",22)(25,"div",23)(26,"div",24)(27,"label",25),n.OEk(28,"Start Time"),n.C$Y(),n.I0R(29,"div",26),n.wR5(30,"input",27),n.I0R(31,"span",28),n.wR5(32,"i",29),n.C$Y()()()(),n.I0R(33,"div",23)(34,"div",24)(35,"label",25),n.OEk(36,"End Time"),n.C$Y(),n.I0R(37,"div",26),n.wR5(38,"input",30),n.I0R(39,"span",28),n.wR5(40,"i",29),n.C$Y()()()()()()(),n.I0R(41,"div",31)(42,"button",32),n.OEk(43," Add Event "),n.C$Y()()()()()()()}2&r&&(n.yG2(9),n.E7m("options",s.calendarOptions),n.yG2(10),n.E7m("formGroup",s.formGroup),n.yG2(),n.C0Y(20,s.isEditMode?20:-1),n.yG2(),n.C0Y(21,s.editEvent?21:-1),n.yG2(9),n.E7m("noCalendar",!0)("enableTime",!0)("dateFormat","H:i"),n.yG2(8),n.E7m("noCalendar",!0)("enableTime",!0)("dateFormat","H:i"))},dependencies:[Re.QF,j.sz,j.ot,j.ue,j.u,j.uW,j.Wo,Un.uK,ME,bM,Re.y]})}return i})();var Fx={version:"0.18.5"},Ip=1200,K_=1252,OM=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],mC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},iw=function(i){-1!=OM.indexOf(i)&&(K_=mC[0]=i)},mm=function(i){Ip=i,iw(i)};var Eo,Bx=function(t){return String.fromCharCode(t)},gC=function(t){return String.fromCharCode(t)},pu=null,Jv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zx(i){for(var t="",e=0,r=0,s=0,o=0,f=0,g=0,A=0,P=0;P<i.length;)o=(e=i.charCodeAt(P++))>>2,f=(3&e)<<4|(r=i.charCodeAt(P++))>>4,g=(15&r)<<2|(s=i.charCodeAt(P++))>>6,A=63&s,isNaN(r)?g=A=64:isNaN(s)&&(A=64),t+=Jv.charAt(o)+Jv.charAt(f)+Jv.charAt(g)+Jv.charAt(A);return t}function Mp(i){var t="",o=0,f=0,g=0,A=0;i=i.replace(/[^\w\+\/\=]/g,"");for(var P=0;P<i.length;)o=Jv.indexOf(i.charAt(P++)),f=Jv.indexOf(i.charAt(P++)),t+=String.fromCharCode(o<<2|f>>4),64!==(g=Jv.indexOf(i.charAt(P++)))&&(t+=String.fromCharCode((15&f)<<4|g>>2)),64!==(A=Jv.indexOf(i.charAt(P++)))&&(t+=String.fromCharCode((3&g)<<6|A));return t}var Ka=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ov=function(){if(typeof Buffer<"u"){var i=!Buffer.from;if(!i)try{Buffer.from("foo","utf8")}catch{i=!0}return i?function(t,e){return e?new Buffer(t,e):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Qv(i){return Ka?Buffer.alloc?Buffer.alloc(i):new Buffer(i):typeof Uint8Array<"u"?new Uint8Array(i):new Array(i)}function BE(i){return Ka?Buffer.allocUnsafe?Buffer.allocUnsafe(i):new Buffer(i):typeof Uint8Array<"u"?new Uint8Array(i):new Array(i)}var Op=function(t){return Ka?ov(t,"binary"):t.split("").map(function(e){return 255&e.charCodeAt(0)})};function Yx(i){if(typeof ArrayBuffer>"u")return Op(i);for(var t=new ArrayBuffer(i.length),e=new Uint8Array(t),r=0;r!=i.length;++r)e[r]=255&i.charCodeAt(r);return t}function e_(i){if(Array.isArray(i))return i.map(function(r){return String.fromCharCode(r)}).join("");for(var t=[],e=0;e<i.length;++e)t[e]=String.fromCharCode(i[e]);return t.join("")}var Jh=Ka?function(i){return Buffer.concat(i.map(function(t){return Buffer.isBuffer(t)?t:ov(t)}))}:function(i){if(typeof Uint8Array<"u"){var t=0,e=0;for(t=0;t<i.length;++t)e+=i[t].length;var r=new Uint8Array(e),s=0;for(t=0,e=0;t<i.length;e+=s,++t)if(s=i[t].length,i[t]instanceof Uint8Array)r.set(i[t],e);else{if("string"==typeof i[t])throw"wtf";r.set(new Uint8Array(i[t]),e)}return r}return[].concat.apply([],i.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))},Zd=/\u0000/g,Gx=/[\u0001-\u0006]/g;function y1(i){for(var t="",e=i.length-1;e>=0;)t+=i.charAt(e--);return t}function og(i,t){var e=""+i;return e.length>=t?e:gu("0",t-e.length)+e}function _C(i,t){var e=""+i;return e.length>=t?e:gu(" ",t-e.length)+e}function sw(i,t){var e=""+i;return e.length>=t?e:e+gu(" ",t-e.length)}var NE=Math.pow(2,32);function x1(i,t){return i>NE||i<-NE?function BM(i,t){var e=""+Math.round(i);return e.length>=t?e:gu("0",t-e.length)+e}(i,t):function NM(i,t){var e=""+i;return e.length>=t?e:gu("0",t-e.length)+e}(Math.round(i),t)}function aw(i,t){return i.length>=7+(t=t||0)&&103==(32|i.charCodeAt(t))&&101==(32|i.charCodeAt(t+1))&&110==(32|i.charCodeAt(t+2))&&101==(32|i.charCodeAt(t+3))&&114==(32|i.charCodeAt(t+4))&&97==(32|i.charCodeAt(t+5))&&108==(32|i.charCodeAt(t+6))}var zE=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],yC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]],sa={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},YE={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},YM={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ow(i,t,e){for(var r=i<0?-1:1,s=i*r,o=0,f=1,g=0,A=1,P=0,z=0,ie=Math.floor(s);P<t&&(g=(ie=Math.floor(s))*f+o,z=ie*P+A,!(s-ie<5e-8));)s=1/(s-ie),o=f,f=g,A=P,P=z;if(z>t&&(P>t?(z=A,g=o):(z=P,g=f)),!e)return[0,r*g,z];var se=Math.floor(r*g/z);return[se,r*g-se*z,z]}function t_(i,t,e){if(i>2958465||i<0)return null;var r=0|i,s=Math.floor(86400*(i-r)),o=0,f=[],g={D:r,T:s,u:86400*(i-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(g.u)<1e-6&&(g.u=0),t&&t.date1904&&(r+=1462),g.u>.9999&&(g.u=0,86400==++s&&(g.T=s=0,++r,++g.D)),60===r)f=e?[1317,10,29]:[1900,2,29],o=3;else if(0===r)f=e?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var A=new Date(1900,0,1);A.setDate(A.getDate()+r-1),f=[A.getFullYear(),A.getMonth()+1,A.getDate()],o=A.getDay(),r<60&&(o=(o+6)%7),e&&(o=function WM(i,t){t[0]-=581;var e=i.getDay();return i<60&&(e=(e+6)%7),e}(A,f))}return g.y=f[0],g.m=f[1],g.d=f[2],g.S=s%60,s=Math.floor(s/60),g.M=s%60,s=Math.floor(s/60),g.H=s,g.q=o,g}var GE=new Date(1899,11,31,0,0,0),GM=GE.getTime(),HM=new Date(1900,2,1,0,0,0);function HE(i,t){var e=i.getTime();return t?e-=1262304e5:i>=HM&&(e+=864e5),(e-(GM+6e4*(i.getTimezoneOffset()-GE.getTimezoneOffset())))/864e5}function xC(i){return-1==i.indexOf(".")?i:i.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function J_(i,t){switch(typeof i){case"string":return i;case"boolean":return i?"TRUE":"FALSE";case"number":return(0|i)===i?i.toString(10):function Hx(i){var e,t=Math.floor(Math.log(Math.abs(i))*Math.LOG10E);return e=t>=-4&&t<=-1?i.toPrecision(10+t):Math.abs(t)<=9?function UM(i){var t=i<0?12:11,e=xC(i.toFixed(12));return e.length<=t||(e=i.toPrecision(10)).length<=t?e:i.toExponential(5)}(i):10===t?i.toFixed(10).substr(0,12):function jM(i){var t=xC(i.toFixed(11));return t.length>(i<0?12:11)||"0"===t||"-0"===t?i.toPrecision(6):t}(i),xC(function VM(i){return-1==i.indexOf("E")?i:i.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(e.toUpperCase()))}(i);case"undefined":return"";case"object":if(null==i)return"";if(i instanceof Date)return Rp(14,HE(i,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+i)}function $M(i,t,e,r){var A,s="",o=0,f=0,g=e.y,P=0;switch(i){case 98:g=e.y+543;case 121:switch(t.length){case 1:case 2:A=g%100,P=2;break;default:A=g%1e4,P=4}break;case 109:switch(t.length){case 1:case 2:A=e.m,P=t.length;break;case 3:return yC[e.m-1][1];case 5:return yC[e.m-1][0];default:return yC[e.m-1][2]}break;case 100:switch(t.length){case 1:case 2:A=e.d,P=t.length;break;case 3:return zE[e.q][0];default:return zE[e.q][1]}break;case 104:switch(t.length){case 1:case 2:A=1+(e.H+11)%12,P=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:A=e.H,P=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:A=e.M,P=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==e.u||"s"!=t&&"ss"!=t?(f=r>=2?3===r?1e3:100:1===r?10:1,(o=Math.round(f*(e.S+e.u)))>=60*f&&(o=0),"s"===t?0===o?"0":""+o/f:(s=og(o,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):og(e.S,t.length);case 90:switch(t){case"[h]":case"[hh]":A=24*e.D+e.H;break;case"[m]":case"[mm]":A=60*(24*e.D+e.H)+e.M;break;case"[s]":case"[ss]":A=60*(60*(24*e.D+e.H)+e.M)+Math.round(e.S+e.u);break;default:throw"bad abstime format: "+t}P=3===t.length?1:2;break;case 101:A=g,P=1}return P>0?og(A,P):""}function i_(i){if(i.length<=3)return i;for(var e=i.length%3,r=i.substr(0,e);e!=i.length;e+=3)r+=(r.length>0?",":"")+i.substr(e,3);return r}var VE=/%/g;function UE(i,t){var e,r=i.indexOf("E")-i.indexOf(".")-1;if(i.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+UE(i,-t);var s=i.indexOf(".");-1===s&&(s=i.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%s;if(o<0&&(o+=s),-1===(e=(t/Math.pow(10,o)).toPrecision(r+1+(s+o)%s)).indexOf("e")){var f=Math.floor(Math.log(t)*Math.LOG10E);for(-1===e.indexOf(".")?e=e.charAt(0)+"."+e.substr(1)+"E+"+(f-e.length+o):e+="E+"+(f-o);"0."===e.substr(0,2);)e=(e=e.charAt(0)+e.substr(2,s)+"."+e.substr(2+s)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(g,A,P,z){return A+P+z.substr(0,(s+o)%s)+"."+z.substr(o)+"E"})}else e=t.toExponential(r);return i.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),i.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}var jE=/# (\?+)( ?)\/( ?)(\d+)/,WE=/^#*0*\.([0#]+)/,$E=/\).*[0#]/,XE=/\(###\) ###\\?-####/;function If(i){for(var e,t="",r=0;r!=i.length;++r)switch(e=i.charCodeAt(r)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(e)}return t}function ZE(i,t){var e=Math.pow(10,t);return""+Math.round(i*e)/e}function qE(i,t){var e=i-Math.floor(i),r=Math.pow(10,t);return t<(""+Math.round(e*r)).length?0:Math.round(e*r)}function gm(i,t,e){if(40===i.charCodeAt(0)&&!t.match($E)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?gm("n",r,e):"("+gm("n",r,-e)+")"}if(44===t.charCodeAt(t.length-1))return function ZM(i,t,e){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return lv(i,t.substr(0,r),e/Math.pow(10,3*(t.length-r)))}(i,t,e);if(-1!==t.indexOf("%"))return function XM(i,t,e){var r=t.replace(VE,""),s=t.length-r.length;return lv(i,r,e*Math.pow(10,2*s))+gu("%",s)}(i,t,e);if(-1!==t.indexOf("E"))return UE(t,e);if(36===t.charCodeAt(0))return"$"+gm(i,t.substr(" "==t.charAt(1)?2:1),e);var s,o,f,g,A=Math.abs(e),P=e<0?"-":"";if(t.match(/^00+$/))return P+x1(A,t.length);if(t.match(/^[#?]+$/))return"0"===(s=x1(e,0))&&(s=""),s.length>t.length?s:If(t.substr(0,t.length-s.length))+s;if(o=t.match(jE))return function qM(i,t,e){var r=parseInt(i[4],10),s=Math.round(t*r),o=Math.floor(s/r),f=s-o*r,g=r;return e+(0===o?"":""+o)+" "+(0===f?gu(" ",i[1].length+1+i[4].length):_C(f,i[1].length)+i[2]+"/"+i[3]+og(g,i[4].length))}(o,A,P);if(t.match(/^#+0+$/))return P+x1(A,t.length-t.indexOf("0"));if(o=t.match(WE))return s=ZE(e,o[1].length).replace(/^([^\.]+)$/,"$1."+If(o[1])).replace(/\.$/,"."+If(o[1])).replace(/\.(\d*)$/,function(_e,he){return"."+he+gu("0",If(o[1]).length-he.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return P+ZE(A,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return P+i_(x1(A,0));if(o=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+gm(i,t,-e):i_(""+(Math.floor(e)+function JM(i,t){return t<(""+Math.round((i-Math.floor(i))*Math.pow(10,t))).length?1:0}(e,o[1].length)))+"."+og(qE(e,o[1].length),o[1].length);if(o=t.match(/^#,#*,#0/))return gm(i,t.replace(/^#,#*,/,""),e);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=y1(gm(i,t.replace(/[\\-]/g,""),e)),f=0,y1(y1(t.replace(/\\/g,"")).replace(/[0#]/g,function(_e){return f<s.length?s.charAt(f++):"0"===_e?"0":""}));if(t.match(XE))return"("+(s=gm(i,"##########",e)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var z="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(o[4].length,7),g=ow(A,Math.pow(10,f)-1,!1),s=""+P," "==(z=lv("n",o[1],g[1])).charAt(z.length-1)&&(z=z.substr(0,z.length-1)+"0"),s+=z+o[2]+"/"+o[3],(z=sw(g[2],f)).length<o[4].length&&(z=If(o[4].substr(o[4].length-z.length))+z),s+=z;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(o[1].length,o[4].length),7),P+((g=ow(A,Math.pow(10,f)-1,!0))[0]||(g[1]?"":"0"))+" "+(g[1]?_C(g[1],f)+o[2]+"/"+o[3]+sw(g[2],f):gu(" ",2*f+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return s=x1(e,0),t.length<=s.length?s:If(t.substr(0,t.length-s.length))+s;if(o=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+e.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),f=s.indexOf(".");var ie=t.indexOf(".")-f,se=t.length-s.length-ie;return If(t.substr(0,ie)+s+t.substr(t.length-se))}if(o=t.match(/^00,000\.([#0]*0)$/))return f=qE(e,o[1].length),e<0?"-"+gm(i,t,-e):i_(function QM(i){return i<2147483647&&i>-2147483648?""+(i>=0?0|i:i-1|0):""+Math.floor(i)}(e)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_e){return"00,"+(_e.length<3?og(0,3-_e.length):"")+_e})+"."+og(f,o[1].length);switch(t){case"###,##0.00":return gm(i,"#,##0.00",e);case"###,###":case"##,###":case"#,###":var oe=i_(x1(A,0));return"0"!==oe?P+oe:"";case"###,###.00":return gm(i,"###,##0.00",e).replace(/^0\./,".");case"#,###.00":return gm(i,"#,##0.00",e).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function KE(i,t){var e,r=i.indexOf("E")-i.indexOf(".")-1;if(i.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+KE(i,-t);var s=i.indexOf(".");-1===s&&(s=i.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%s;if(o<0&&(o+=s),!(e=(t/Math.pow(10,o)).toPrecision(r+1+(s+o)%s)).match(/[Ee]/)){var f=Math.floor(Math.log(t)*Math.LOG10E);-1===e.indexOf(".")?e=e.charAt(0)+"."+e.substr(1)+"E+"+(f-e.length+o):e+="E+"+(f-o),e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(g,A,P,z){return A+P+z.substr(0,(s+o)%s)+"."+z.substr(o)+"E"})}else e=t.toExponential(r);return i.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),i.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}function Wg(i,t,e){if(40===i.charCodeAt(0)&&!t.match($E)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?Wg("n",r,e):"("+Wg("n",r,-e)+")"}if(44===t.charCodeAt(t.length-1))return function eO(i,t,e){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return lv(i,t.substr(0,r),e/Math.pow(10,3*(t.length-r)))}(i,t,e);if(-1!==t.indexOf("%"))return function tO(i,t,e){var r=t.replace(VE,""),s=t.length-r.length;return lv(i,r,e*Math.pow(10,2*s))+gu("%",s)}(i,t,e);if(-1!==t.indexOf("E"))return KE(t,e);if(36===t.charCodeAt(0))return"$"+Wg(i,t.substr(" "==t.charAt(1)?2:1),e);var s,o,f,g,A=Math.abs(e),P=e<0?"-":"";if(t.match(/^00+$/))return P+og(A,t.length);if(t.match(/^[#?]+$/))return s=""+e,0===e&&(s=""),s.length>t.length?s:If(t.substr(0,t.length-s.length))+s;if(o=t.match(jE))return function KM(i,t,e){return e+(0===t?"":""+t)+gu(" ",i[1].length+2+i[4].length)}(o,A,P);if(t.match(/^#+0+$/))return P+og(A,t.length-t.indexOf("0"));if(o=t.match(WE))return s=(s=(""+e).replace(/^([^\.]+)$/,"$1."+If(o[1])).replace(/\.$/,"."+If(o[1]))).replace(/\.(\d*)$/,function(_e,he){return"."+he+gu("0",If(o[1]).length-he.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return P+(""+A).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return P+i_(""+A);if(o=t.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+Wg(i,t,-e):i_(""+e)+"."+gu("0",o[1].length);if(o=t.match(/^#,#*,#0/))return Wg(i,t.replace(/^#,#*,/,""),e);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=y1(Wg(i,t.replace(/[\\-]/g,""),e)),f=0,y1(y1(t.replace(/\\/g,"")).replace(/[0#]/g,function(_e){return f<s.length?s.charAt(f++):"0"===_e?"0":""}));if(t.match(XE))return"("+(s=Wg(i,"##########",e)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var z="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(o[4].length,7),g=ow(A,Math.pow(10,f)-1,!1),s=""+P," "==(z=lv("n",o[1],g[1])).charAt(z.length-1)&&(z=z.substr(0,z.length-1)+"0"),s+=z+o[2]+"/"+o[3],(z=sw(g[2],f)).length<o[4].length&&(z=If(o[4].substr(o[4].length-z.length))+z),s+=z;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(o[1].length,o[4].length),7),P+((g=ow(A,Math.pow(10,f)-1,!0))[0]||(g[1]?"":"0"))+" "+(g[1]?_C(g[1],f)+o[2]+"/"+o[3]+sw(g[2],f):gu(" ",2*f+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return t.length<=(s=""+e).length?s:If(t.substr(0,t.length-s.length))+s;if(o=t.match(/^([#0]+)\.([#0]+)$/)){s=""+e.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),f=s.indexOf(".");var ie=t.indexOf(".")-f,se=t.length-s.length-ie;return If(t.substr(0,ie)+s+t.substr(t.length-se))}if(o=t.match(/^00,000\.([#0]*0)$/))return e<0?"-"+Wg(i,t,-e):i_(""+e).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_e){return"00,"+(_e.length<3?og(0,3-_e.length):"")+_e})+"."+og(0,o[1].length);switch(t){case"###,###":case"##,###":case"#,###":var oe=i_(""+A);return"0"!==oe?P+oe:"";default:if(t.match(/\.[0#?]*$/))return Wg(i,t.slice(0,t.lastIndexOf(".")),e)+If(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function lv(i,t,e){return(0|e)===e?Wg(i,t,e):gm(i,t,e)}var JE=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function b1(i){for(var t=0,e="",r="";t<i.length;)switch(e=i.charAt(t)){case"G":aw(i,t)&&(t+=6),t++;break;case'"':for(;34!==i.charCodeAt(++t)&&t<i.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===i.charAt(t+1)||"2"===i.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===i.substr(t,3).toUpperCase()||"AM/PM"===i.substr(t,5).toUpperCase()||"\u4e0a\u5348/\u4e0b\u5348"===i.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=e;"]"!==i.charAt(t++)&&t<i.length;)r+=i.charAt(t);if(r.match(JE))return!0;break;case".":case"0":case"#":for(;t<i.length&&("0#?.,E+-%".indexOf(e=i.charAt(++t))>-1||"\\"==e&&"-"==i.charAt(t+1)&&"0#".indexOf(i.charAt(t+2))>-1););break;case"?":for(;i.charAt(++t)===e;);break;case"*":++t,(" "==i.charAt(t)||"*"==i.charAt(t))&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<i.length&&"0123456789".indexOf(i.charAt(++t))>-1;);break;default:++t}return!1}var QE=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function ek(i,t){if(null==t)return!1;var e=parseFloat(t[2]);switch(t[1]){case"=":if(i==e)return!0;break;case">":if(i>e)return!0;break;case"<":if(i<e)return!0;break;case"<>":if(i!=e)return!0;break;case">=":if(i>=e)return!0;break;case"<=":if(i<=e)return!0}return!1}function Rp(i,t,e){null==e&&(e={});var r="";switch(typeof i){case"string":r="m/d/yy"==i&&e.dateNF?e.dateNF:i;break;case"number":null==(r=14==i&&e.dateNF?e.dateNF:(null!=e.table?e.table:sa)[i])&&(r=e.table&&e.table[YE[i]]||sa[YE[i]]),null==r&&(r=YM[i]||"General")}if(aw(r,0))return J_(t,e);t instanceof Date&&(t=HE(t,e.date1904));var s=function rO(i,t){var e=function iO(i){for(var t=[],e=!1,r=0,s=0;r<i.length;++r)switch(i.charCodeAt(r)){case 34:e=!e;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=i.substr(s,r-s),s=r+1}if(t[t.length]=i.substr(s),!0===e)throw new Error("Format |"+i+"| unterminated string ");return t}(i),r=e.length,s=e[r-1].indexOf("@");if(r<4&&s>-1&&--r,e.length>4)throw new Error("cannot find right format for |"+e.join("|")+"|");if("number"!=typeof t)return[4,4===e.length||s>-1?e[e.length-1]:"@"];switch(e.length){case 1:e=s>-1?["General","General","General",e[0]]:[e[0],e[0],e[0],"@"];break;case 2:e=s>-1?[e[0],e[0],e[0],e[1]]:[e[0],e[1],e[0],"@"];break;case 3:e=s>-1?[e[0],e[1],e[0],e[2]]:[e[0],e[1],e[2],"@"]}var o=t>0?e[0]:t<0?e[1]:e[2];if(-1===e[0].indexOf("[")&&-1===e[1].indexOf("["))return[r,o];if(null!=e[0].match(/\[[=<>]/)||null!=e[1].match(/\[[=<>]/)){var f=e[0].match(QE),g=e[1].match(QE);return ek(t,f)?[r,e[0]]:ek(t,g)?[r,e[1]]:[r,e[null!=f&&null!=g?2:1]]}return[r,o]}(r,t);if(aw(s[1]))return J_(t,e);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function nO(i,t,e,r){for(var P,z,ie,s=[],o="",f=0,g="",A="t",se="H";f<i.length;)switch(g=i.charAt(f)){case"G":if(!aw(i,f))throw new Error("unrecognized character "+g+" in "+i);s[s.length]={t:"G",v:"General"},f+=7;break;case'"':for(o="";34!==(ie=i.charCodeAt(++f))&&f<i.length;)o+=String.fromCharCode(ie);s[s.length]={t:"t",v:o},++f;break;case"\\":var oe=i.charAt(++f);s[s.length]={t:"("===oe||")"===oe?oe:"t",v:oe},++f;break;case"_":s[s.length]={t:"t",v:" "},f+=2;break;case"@":s[s.length]={t:"T",v:t},++f;break;case"B":case"b":if("1"===i.charAt(f+1)||"2"===i.charAt(f+1)){if(null==P&&null==(P=t_(t,e,"2"===i.charAt(f+1))))return"";s[s.length]={t:"X",v:i.substr(f,2)},A=g,f+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":g=g.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||null==P&&null==(P=t_(t,e)))return"";for(o=g;++f<i.length&&i.charAt(f).toLowerCase()===g;)o+=g;"m"===g&&"h"===A.toLowerCase()&&(g="M"),"h"===g&&(g=se),s[s.length]={t:g,v:o},A=g;break;case"A":case"a":case"\u4e0a":var he={t:g,v:g};if(null==P&&(P=t_(t,e)),"A/P"===i.substr(f,3).toUpperCase()?(null!=P&&(he.v=P.H>=12?"P":"A"),he.t="T",se="h",f+=3):"AM/PM"===i.substr(f,5).toUpperCase()?(null!=P&&(he.v=P.H>=12?"PM":"AM"),he.t="T",f+=5,se="h"):"\u4e0a\u5348/\u4e0b\u5348"===i.substr(f,5).toUpperCase()?(null!=P&&(he.v=P.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),he.t="T",f+=5,se="h"):(he.t="t",++f),null==P&&"T"===he.t)return"";s[s.length]=he,A=g;break;case"[":for(o=g;"]"!==i.charAt(f++)&&f<i.length;)o+=i.charAt(f);if("]"!==o.slice(-1))throw'unterminated "[" block: |'+o+"|";if(o.match(JE)){if(null==P&&null==(P=t_(t,e)))return"";s[s.length]={t:"Z",v:o.toLowerCase()},A=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",b1(i)||(s[s.length]={t:"t",v:o}));break;case".":if(null!=P){for(o=g;++f<i.length&&"0"===(g=i.charAt(f));)o+=g;s[s.length]={t:"s",v:o};break}case"0":case"#":for(o=g;++f<i.length&&"0#?.,E+-%".indexOf(g=i.charAt(f))>-1;)o+=g;s[s.length]={t:"n",v:o};break;case"?":for(o=g;i.charAt(++f)===g;)o+=g;s[s.length]={t:g,v:o},A=g;break;case"*":++f,(" "==i.charAt(f)||"*"==i.charAt(f))&&++f;break;case"(":case")":s[s.length]={t:1===r?"t":g,v:g},++f;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=g;f<i.length&&"0123456789".indexOf(i.charAt(++f))>-1;)o+=i.charAt(f);s[s.length]={t:"D",v:o};break;case" ":s[s.length]={t:g,v:g},++f;break;case"$":s[s.length]={t:"t",v:"$"},++f;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(g))throw new Error("unrecognized character "+g+" in "+i);s[s.length]={t:"t",v:g},++f}var ct,Ae=0,Ke=0;for(f=s.length-1,A="t";f>=0;--f)switch(s[f].t){case"h":case"H":s[f].t=se,A="h",Ae<1&&(Ae=1);break;case"s":(ct=s[f].v.match(/\.0+$/))&&(Ke=Math.max(Ke,ct[0].length-1)),Ae<3&&(Ae=3);case"d":case"y":case"M":case"e":A=s[f].t;break;case"m":"s"===A&&(s[f].t="M",Ae<2&&(Ae=2));break;case"X":break;case"Z":Ae<1&&s[f].v.match(/[Hh]/)&&(Ae=1),Ae<2&&s[f].v.match(/[Mm]/)&&(Ae=2),Ae<3&&s[f].v.match(/[Ss]/)&&(Ae=3)}switch(Ae){case 0:break;case 1:P.u>=.5&&(P.u=0,++P.S),P.S>=60&&(P.S=0,++P.M),P.M>=60&&(P.M=0,++P.H);break;case 2:P.u>=.5&&(P.u=0,++P.S),P.S>=60&&(P.S=0,++P.M)}var mi,pt="";for(f=0;f<s.length;++f)switch(s[f].t){case"t":case"T":case" ":case"D":break;case"X":s[f].v="",s[f].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[f].v=$M(s[f].t.charCodeAt(0),s[f].v,P,Ke),s[f].t="t";break;case"n":case"?":for(mi=f+1;null!=s[mi]&&("?"===(g=s[mi].t)||"D"===g||(" "===g||"t"===g)&&null!=s[mi+1]&&("?"===s[mi+1].t||"t"===s[mi+1].t&&"/"===s[mi+1].v)||"("===s[f].t&&(" "===g||"n"===g||")"===g)||"t"===g&&("/"===s[mi].v||" "===s[mi].v&&null!=s[mi+1]&&"?"==s[mi+1].t));)s[f].v+=s[mi].v,s[mi]={v:"",t:";"},++mi;pt+=s[f].v,f=mi-1;break;case"G":s[f].t="t",s[f].v=J_(t,e)}var Ki,ni,Fi="";if(pt.length>0){40==pt.charCodeAt(0)?(Ki=t<0&&45===pt.charCodeAt(0)?-t:t,ni=lv("n",pt,Ki)):(ni=lv("n",pt,Ki=t<0&&r>1?-t:t),Ki<0&&s[0]&&"t"==s[0].t&&(ni=ni.substr(1),s[0].v="-"+s[0].v)),mi=ni.length-1;var Ti=s.length;for(f=0;f<s.length;++f)if(null!=s[f]&&"t"!=s[f].t&&s[f].v.indexOf(".")>-1){Ti=f;break}var Bi=s.length;if(Ti===s.length&&-1===ni.indexOf("E")){for(f=s.length-1;f>=0;--f)null==s[f]||-1==="n?".indexOf(s[f].t)||(mi>=s[f].v.length-1?s[f].v=ni.substr(1+(mi-=s[f].v.length),s[f].v.length):mi<0?s[f].v="":(s[f].v=ni.substr(0,mi+1),mi=-1),s[f].t="t",Bi=f);mi>=0&&Bi<s.length&&(s[Bi].v=ni.substr(0,mi+1)+s[Bi].v)}else if(Ti!==s.length&&-1===ni.indexOf("E")){for(mi=ni.indexOf(".")-1,f=Ti;f>=0;--f)if(null!=s[f]&&-1!=="n?".indexOf(s[f].t)){for(z=s[f].v.indexOf(".")>-1&&f===Ti?s[f].v.indexOf(".")-1:s[f].v.length-1,Fi=s[f].v.substr(z+1);z>=0;--z)mi>=0&&("0"===s[f].v.charAt(z)||"#"===s[f].v.charAt(z))&&(Fi=ni.charAt(mi--)+Fi);s[f].v=Fi,s[f].t="t",Bi=f}for(mi>=0&&Bi<s.length&&(s[Bi].v=ni.substr(0,mi+1)+s[Bi].v),mi=ni.indexOf(".")+1,f=Ti;f<s.length;++f)if(null!=s[f]&&(-1!=="n?(".indexOf(s[f].t)||f===Ti)){for(z=s[f].v.indexOf(".")>-1&&f===Ti?s[f].v.indexOf(".")+1:0,Fi=s[f].v.substr(0,z);z<s[f].v.length;++z)mi<ni.length&&(Fi+=ni.charAt(mi++));s[f].v=Fi,s[f].t="t",Bi=f}}}for(f=0;f<s.length;++f)null!=s[f]&&"n?".indexOf(s[f].t)>-1&&(s[f].v=lv(s[f].t,s[f].v,Ki=r>1&&t<0&&f>0&&"-"===s[f-1].v?-t:t),s[f].t="t");var Cn="";for(f=0;f!==s.length;++f)null!=s[f]&&(Cn+=s[f].v);return Cn}(s[1],t,e,s[0])}function $g(i,t){if("number"!=typeof t){t=+t||-1;for(var e=0;e<392;++e)if(null!=sa[e]){if(sa[e]==i){t=e;break}}else t<0&&(t=e);t<0&&(t=391)}return sa[t]=i,t}function Vx(i){for(var t=0;392!=t;++t)void 0!==i[t]&&$g(i[t],t)}function w1(){sa=function zM(i){return i||(i={}),i[0]="General",i[1]="0",i[2]="0.00",i[3]="#,##0",i[4]="#,##0.00",i[9]="0%",i[10]="0.00%",i[11]="0.00E+00",i[12]="# ?/?",i[13]="# ??/??",i[14]="m/d/yy",i[15]="d-mmm-yy",i[16]="d-mmm",i[17]="mmm-yy",i[18]="h:mm AM/PM",i[19]="h:mm:ss AM/PM",i[20]="h:mm",i[21]="h:mm:ss",i[22]="m/d/yy h:mm",i[37]="#,##0 ;(#,##0)",i[38]="#,##0 ;[Red](#,##0)",i[39]="#,##0.00;(#,##0.00)",i[40]="#,##0.00;[Red](#,##0.00)",i[45]="mm:ss",i[46]="[h]:mm:ss",i[47]="mmss.0",i[48]="##0.0E+0",i[49]="@",i[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',i}()}var tk=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g,cO=function(){var i={version:"1.2.0"},e=function t(){for(var ni=0,Ti=new Array(256),Bi=0;256!=Bi;++Bi)Ti[Bi]=ni=1&(ni=1&(ni=1&(ni=1&(ni=1&(ni=1&(ni=1&(ni=1&(ni=Bi)?-306674912^ni>>>1:ni>>>1)?-306674912^ni>>>1:ni>>>1)?-306674912^ni>>>1:ni>>>1)?-306674912^ni>>>1:ni>>>1)?-306674912^ni>>>1:ni>>>1)?-306674912^ni>>>1:ni>>>1)?-306674912^ni>>>1:ni>>>1)?-306674912^ni>>>1:ni>>>1;return typeof Int32Array<"u"?new Int32Array(Ti):Ti}(),s=function r(ni){var Ti=0,Bi=0,Cn=0,Mn=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Cn=0;256!=Cn;++Cn)Mn[Cn]=ni[Cn];for(Cn=0;256!=Cn;++Cn)for(Bi=ni[Cn],Ti=256+Cn;Ti<4096;Ti+=256)Bi=Mn[Ti]=Bi>>>8^ni[255&Bi];var Zi=[];for(Cn=1;16!=Cn;++Cn)Zi[Cn-1]=typeof Int32Array<"u"?Mn.subarray(256*Cn,256*Cn+256):Mn.slice(256*Cn,256*Cn+256);return Zi}(e),o=s[0],f=s[1],g=s[2],A=s[3],P=s[4],z=s[5],ie=s[6],se=s[7],oe=s[8],_e=s[9],he=s[10],Ae=s[11],Ke=s[12],ct=s[13],pt=s[14];return i.table=e,i.bstr=function mi(ni,Ti){for(var Bi=-1^Ti,Cn=0,Mn=ni.length;Cn<Mn;)Bi=Bi>>>8^e[255&(Bi^ni.charCodeAt(Cn++))];return~Bi},i.buf=function Fi(ni,Ti){for(var Bi=-1^Ti,Cn=ni.length-15,Mn=0;Mn<Cn;)Bi=pt[ni[Mn++]^255&Bi]^ct[ni[Mn++]^Bi>>8&255]^Ke[ni[Mn++]^Bi>>16&255]^Ae[ni[Mn++]^Bi>>>24]^he[ni[Mn++]]^_e[ni[Mn++]]^oe[ni[Mn++]]^se[ni[Mn++]]^ie[ni[Mn++]]^z[ni[Mn++]]^P[ni[Mn++]]^A[ni[Mn++]]^g[ni[Mn++]]^f[ni[Mn++]]^o[ni[Mn++]]^e[ni[Mn++]];for(Cn+=15;Mn<Cn;)Bi=Bi>>>8^e[255&(Bi^ni[Mn++])];return~Bi},i.str=function Ki(ni,Ti){for(var Bi=-1^Ti,Cn=0,Mn=ni.length,Zi=0,Cr=0;Cn<Mn;)(Zi=ni.charCodeAt(Cn++))<128?Bi=Bi>>>8^e[255&(Bi^Zi)]:Zi<2048?Bi=(Bi=Bi>>>8^e[255&(Bi^(192|Zi>>6&31))])>>>8^e[255&(Bi^(128|63&Zi))]:Zi>=55296&&Zi<57344?(Zi=64+(1023&Zi),Cr=1023&ni.charCodeAt(Cn++),Bi=(Bi=(Bi=(Bi=Bi>>>8^e[255&(Bi^(240|Zi>>8&7))])>>>8^e[255&(Bi^(128|Zi>>2&63))])>>>8^e[255&(Bi^(128|Cr>>6&15|(3&Zi)<<4))])>>>8^e[255&(Bi^(128|63&Cr))]):Bi=(Bi=(Bi=Bi>>>8^e[255&(Bi^(224|Zi>>12&15))])>>>8^e[255&(Bi^(128|Zi>>6&63))])>>>8^e[255&(Bi^(128|63&Zi))];return~Bi},i}(),Gs=function(){var A,t={};function r(st){if("/"==st.charAt(st.length-1))return-1===st.slice(0,-1).indexOf("/")?st:r(st.slice(0,-1));var $t=st.lastIndexOf("/");return-1===$t?st:st.slice(0,$t+1)}function s(st){if("/"==st.charAt(st.length-1))return s(st.slice(0,-1));var $t=st.lastIndexOf("/");return-1===$t?st:st.slice($t+1)}function o(st,$t){"string"==typeof $t&&($t=new Date($t));var Pt=$t.getHours();Pt=(Pt=Pt<<6|$t.getMinutes())<<5|$t.getSeconds()>>>1,st.write_shift(2,Pt);var Yt=$t.getFullYear()-1980;Yt=(Yt=Yt<<4|$t.getMonth()+1)<<5|$t.getDate(),st.write_shift(2,Yt)}function g(st){vd(st,0);for(var $t={},Pt=0;st.l<=st.length-4;){var Yt=st.read_shift(2),ei=st.read_shift(2),ti=st.l+ei,hn={};21589===Yt&&(1&(Pt=st.read_shift(1))&&(hn.mtime=st.read_shift(4)),ei>5&&(2&Pt&&(hn.atime=st.read_shift(4)),4&Pt&&(hn.ctime=st.read_shift(4))),hn.mtime&&(hn.mt=new Date(1e3*hn.mtime))),st.l=ti,$t[Yt]=hn}return $t}function P(){return A||(A={})}function z(st,$t){if(80==st[0]&&75==st[1])return q1(st,$t);if(109==(32|st[0])&&105==(32|st[1]))return function is(st,$t){if("mime-version:"!=es(st.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var Pt=$t&&$t.root||"",Yt=(Ka&&Buffer.isBuffer(st)?st.toString("binary"):es(st)).split("\r\n"),ei=0,ti="";for(ei=0;ei<Yt.length;++ei)if(/^Content-Location:/i.test(ti=Yt[ei])&&(ti=ti.slice(ti.indexOf("file")),Pt||(Pt=ti.slice(0,ti.lastIndexOf("/")+1)),ti.slice(0,Pt.length)!=Pt))for(;Pt.length>0&&(Pt=(Pt=Pt.slice(0,Pt.length-1)).slice(0,Pt.lastIndexOf("/")+1),ti.slice(0,Pt.length)!=Pt););var hn=(Yt[1]||"").match(/boundary="(.*?)"/);if(!hn)throw new Error("MAD cannot find boundary");var Nn="--"+(hn[1]||""),xn={FileIndex:[],FullPaths:[]};ni(xn);var vr,Pr=0;for(ei=0;ei<Yt.length;++ei){var ds=Yt[ei];ds!==Nn&&ds!==Nn+"--"||(Pr++&&Lr(xn,Yt.slice(vr,ei),Pt),vr=ei)}return xn}(st,$t);if(st.length<512)throw new Error("CFB file size "+st.length+" < 512");var Pt,ei,ti,hn,Nn,pn,Yt=512,fn=[],xn=st.slice(0,512);vd(xn,0);var vr=function ie(st){if(80==st[st.l]&&75==st[st.l+1])return[0,0];st.chk(ns,"Header Signature: "),st.l+=16;var $t=st.read_shift(2,"u");return[st.read_shift(2,"u"),$t]}(xn);switch(Pt=vr[0]){case 3:Yt=512;break;case 4:Yt=4096;break;case 0:if(0==vr[1])return q1(st,$t);default:throw new Error("Major Version: Expected 3 or 4 saw "+Pt)}512!==Yt&&vd(xn=st.slice(0,Yt),28);var Pr=st.slice(0,Yt);!function se(st,$t){var Pt;switch(st.l+=2,Pt=st.read_shift(2)){case 9:if(3!=$t)throw new Error("Sector Shift: Expected 9 saw "+Pt);break;case 12:if(4!=$t)throw new Error("Sector Shift: Expected 12 saw "+Pt);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Pt)}st.chk("0600","Mini Sector Shift: "),st.chk("000000000000","Reserved: ")}(xn,Pt);var ds=xn.read_shift(4,"i");if(3===Pt&&0!==ds)throw new Error("# Directory Sectors: Expected 0 saw "+ds);xn.l+=4,hn=xn.read_shift(4,"i"),xn.l+=4,xn.chk("00100000","Mini Stream Cutoff Size: "),Nn=xn.read_shift(4,"i"),ei=xn.read_shift(4,"i"),pn=xn.read_shift(4,"i"),ti=xn.read_shift(4,"i");for(var Hr=-1,Kr=0;Kr<109&&!((Hr=xn.read_shift(4,"i"))<0);++Kr)fn[Kr]=Hr;var Ia=function oe(st,$t){for(var Pt=Math.ceil(st.length/$t)-1,Yt=[],ei=1;ei<Pt;++ei)Yt[ei-1]=st.slice(ei*$t,(ei+1)*$t);return Yt[Pt-1]=st.slice(Pt*$t),Yt}(st,Yt);Ae(pn,ti,Ia,Yt,fn);var dc=function ct(st,$t,Pt,Yt){var ei=st.length,ti=[],hn=[],Nn=[],pn=[],fn=Yt-1,xn=0,vr=0,Pr=0,ds=0;for(xn=0;xn<ei;++xn)if(Nn=[],(Pr=xn+$t)>=ei&&(Pr-=ei),!hn[Pr]){pn=[];var Hr=[];for(vr=Pr;vr>=0;){Hr[vr]=!0,hn[vr]=!0,Nn[Nn.length]=vr,pn.push(st[vr]);var Kr=Pt[Math.floor(4*vr/Yt)];if(Yt<4+(ds=4*vr&fn))throw new Error("FAT boundary crossed: "+vr+" 4 "+Yt);if(!st[Kr]||Hr[vr=ey(st[Kr],ds)])break}ti[Pr]={nodes:Nn,data:Ck([pn])}}return ti}(Ia,hn,fn,Yt);dc[hn].name="!Directory",ei>0&&Nn!==Cr&&(dc[Nn].name="!MiniFAT"),dc[fn[0]].name="!FAT",dc.fat_addrs=fn,dc.ssz=Yt;var hh=[],zp=[],Bb=[];(function pt(st,$t,Pt,Yt,ei,ti,hn,Nn){for(var ds,pn=0,fn=Yt.length?2:0,xn=$t[st].data,vr=0,Pr=0;vr<xn.length;vr+=128){var Hr=xn.slice(vr,vr+128);vd(Hr,64),Pr=Hr.read_shift(2),ds=dw(Hr,0,Pr-fn),Yt.push(ds);var Kr={name:ds,type:Hr.read_shift(1),color:Hr.read_shift(1),L:Hr.read_shift(4,"i"),R:Hr.read_shift(4,"i"),C:Hr.read_shift(4,"i"),clsid:Hr.read_shift(16),state:Hr.read_shift(4,"i"),start:0,size:0};0!==Hr.read_shift(2)+Hr.read_shift(2)+Hr.read_shift(2)+Hr.read_shift(2)&&(Kr.ct=mi(Hr,Hr.l-8)),0!==Hr.read_shift(2)+Hr.read_shift(2)+Hr.read_shift(2)+Hr.read_shift(2)&&(Kr.mt=mi(Hr,Hr.l-8)),Kr.start=Hr.read_shift(4,"i"),Kr.size=Hr.read_shift(4,"i"),Kr.size<0&&Kr.start<0&&(Kr.size=Kr.type=0,Kr.start=Cr,Kr.name=""),5===Kr.type?(pn=Kr.start,ei>0&&pn!==Cr&&($t[pn].name="!StreamData")):Kr.size>=4096?(Kr.storage="fat",void 0===$t[Kr.start]&&($t[Kr.start]=Ke(Pt,Kr.start,$t.fat_addrs,$t.ssz)),$t[Kr.start].name=Kr.name,Kr.content=$t[Kr.start].data.slice(0,Kr.size)):(Kr.storage="minifat",Kr.size<0?Kr.size=0:pn!==Cr&&Kr.start!==Cr&&$t[pn]&&(Kr.content=he(Kr,$t[pn].data,($t[Nn]||{}).data))),Kr.content&&vd(Kr.content,0),ti[ds]=Kr,hn.push(Kr)}})(hn,dc,Ia,hh,ei,{},zp,Nn),function _e(st,$t,Pt){for(var Yt=0,ei=0,ti=0,hn=0,Nn=0,pn=Pt.length,fn=[],xn=[];Yt<pn;++Yt)fn[Yt]=xn[Yt]=Yt,$t[Yt]=Pt[Yt];for(;Nn<xn.length;++Nn)ei=st[Yt=xn[Nn]].L,ti=st[Yt].R,hn=st[Yt].C,fn[Yt]===Yt&&(-1!==ei&&fn[ei]!==ei&&(fn[Yt]=fn[ei]),-1!==ti&&fn[ti]!==ti&&(fn[Yt]=fn[ti])),-1!==hn&&(fn[hn]=Yt),-1!==ei&&Yt!=fn[Yt]&&(fn[ei]=fn[Yt],xn.lastIndexOf(ei)<Nn&&xn.push(ei)),-1!==ti&&Yt!=fn[Yt]&&(fn[ti]=fn[Yt],xn.lastIndexOf(ti)<Nn&&xn.push(ti));for(Yt=1;Yt<pn;++Yt)fn[Yt]===Yt&&(-1!==ti&&fn[ti]!==ti?fn[Yt]=fn[ti]:-1!==ei&&fn[ei]!==ei&&(fn[Yt]=fn[ei]));for(Yt=1;Yt<pn;++Yt)if(0!==st[Yt].type){if((Nn=Yt)!=fn[Nn])do{$t[Yt]=$t[Nn=fn[Nn]]+"/"+$t[Yt]}while(0!==Nn&&-1!==fn[Nn]&&Nn!=fn[Nn]);fn[Yt]=-1}for($t[0]+="/",Yt=1;Yt<pn;++Yt)2!==st[Yt].type&&($t[Yt]+="/")}(zp,Bb,hh),hh.shift();var Nb={FileIndex:zp,FullPaths:Bb};return $t&&$t.raw&&(Nb.raw={header:Pr,sectors:Ia}),Nb}function he(st,$t,Pt){for(var ei=st.size,ti=[],hn=st.start;Pt&&ei>0&&hn>=0;)ti.push($t.slice(hn*Zi,hn*Zi+Zi)),ei-=Zi,hn=ey(Pt,4*hn);return 0===ti.length?Bn(0):Jh(ti).slice(0,st.size)}function Ae(st,$t,Pt,Yt,ei){var ti=Cr;if(st===Cr){if(0!==$t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==st){var hn=Pt[st],Nn=(Yt>>>2)-1;if(!hn)return;for(var pn=0;pn<Nn&&(ti=ey(hn,4*pn))!==Cr;++pn)ei.push(ti);Ae(ey(hn,Yt-4),$t-1,Pt,Yt,ei)}}function Ke(st,$t,Pt,Yt,ei){var ti=[],hn=[];ei||(ei=[]);var Nn=Yt-1,pn=0,fn=0;for(pn=$t;pn>=0;){ei[pn]=!0,ti[ti.length]=pn,hn.push(st[pn]);var xn=Pt[Math.floor(4*pn/Yt)];if(Yt<4+(fn=4*pn&Nn))throw new Error("FAT boundary crossed: "+pn+" 4 "+Yt);if(!st[xn])break;pn=ey(st[xn],fn)}return{nodes:ti,data:Ck([hn])}}function mi(st,$t){return new Date(1e3*(ed(st,$t+4)/1e7*Math.pow(2,32)+ed(st,$t)/1e7-11644473600))}function ni(st,$t){var Pt=$t||{},Yt=Pt.root||"Root Entry";if(st.FullPaths||(st.FullPaths=[]),st.FileIndex||(st.FileIndex=[]),st.FullPaths.length!==st.FileIndex.length)throw new Error("inconsistent CFB structure");0===st.FullPaths.length&&(st.FullPaths[0]=Yt+"/",st.FileIndex[0]={name:Yt,type:5}),Pt.CLSID&&(st.FileIndex[0].clsid=Pt.CLSID),function Ti(st){var $t="\x01Sh33tJ5";if(!Gs.find(st,"/"+$t)){var Pt=Bn(4);Pt[0]=55,Pt[1]=Pt[3]=50,Pt[2]=54,st.FileIndex.push({name:$t,type:2,content:Pt,size:4,L:69,R:69,C:69}),st.FullPaths.push(st.FullPaths[0]+$t),Bi(st)}}(st)}function Bi(st,$t){ni(st);for(var Pt=!1,Yt=!1,ei=st.FullPaths.length-1;ei>=0;--ei){var ti=st.FileIndex[ei];switch(ti.type){case 0:Yt?Pt=!0:(st.FileIndex.pop(),st.FullPaths.pop());break;case 1:case 2:case 5:Yt=!0,isNaN(ti.R*ti.L*ti.C)&&(Pt=!0),ti.R>-1&&ti.L>-1&&ti.R==ti.L&&(Pt=!0);break;default:Pt=!0}}if(Pt||$t){var hn=new Date(1987,1,19),Nn=0,pn=Object.create?Object.create(null):{},fn=[];for(ei=0;ei<st.FullPaths.length;++ei)pn[st.FullPaths[ei]]=!0,0!==st.FileIndex[ei].type&&fn.push([st.FullPaths[ei],st.FileIndex[ei]]);for(ei=0;ei<fn.length;++ei){var xn=r(fn[ei][0]);(Yt=pn[xn])||(fn.push([xn,{name:s(xn).replace("/",""),type:1,clsid:ta,ct:hn,mt:hn,content:null}]),pn[xn]=!0)}for(fn.sort(function(ds,Hr){return function e(st,$t){for(var Pt=st.split("/"),Yt=$t.split("/"),ei=0,ti=0,hn=Math.min(Pt.length,Yt.length);ei<hn;++ei){if(ti=Pt[ei].length-Yt[ei].length)return ti;if(Pt[ei]!=Yt[ei])return Pt[ei]<Yt[ei]?-1:1}return Pt.length-Yt.length}(ds[0],Hr[0])}),st.FullPaths=[],st.FileIndex=[],ei=0;ei<fn.length;++ei)st.FullPaths[ei]=fn[ei][0],st.FileIndex[ei]=fn[ei][1];for(ei=0;ei<fn.length;++ei){var vr=st.FileIndex[ei],Pr=st.FullPaths[ei];if(vr.name=s(Pr).replace("/",""),vr.L=vr.R=vr.C=-(vr.color=1),vr.size=vr.content?vr.content.length:0,vr.start=0,vr.clsid=vr.clsid||ta,0===ei)vr.C=fn.length>1?1:-1,vr.size=0,vr.type=5;else if("/"==Pr.slice(-1)){for(Nn=ei+1;Nn<fn.length&&r(st.FullPaths[Nn])!=Pr;++Nn);for(vr.C=Nn>=fn.length?-1:Nn,Nn=ei+1;Nn<fn.length&&r(st.FullPaths[Nn])!=r(Pr);++Nn);vr.R=Nn>=fn.length?-1:Nn,vr.type=1}else r(st.FullPaths[ei+1]||"")==r(Pr)&&(vr.R=ei+1),vr.type=2}}}function Cn(st,$t){var Pt=$t||{};if("mad"==Pt.fileType)return function Pa(st,$t){for(var Pt=$t||{},Yt=Pt.boundary||"SheetJS",ei=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(Yt="------="+Yt).slice(2)+'"',"","",""],ti=st.FullPaths[0],hn=ti,Nn=st.FileIndex[0],pn=1;pn<st.FullPaths.length;++pn)if(hn=st.FullPaths[pn].slice(ti.length),(Nn=st.FileIndex[pn]).size&&Nn.content&&"\x01Sh33tJ5"!=hn){hn=hn.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ia){return"_x"+Ia.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ia){return"_u"+Ia.charCodeAt(0).toString(16)+"_"});for(var fn=Nn.content,xn=Ka&&Buffer.isBuffer(fn)?fn.toString("binary"):es(fn),vr=0,Pr=Math.min(1024,xn.length),ds=0,Hr=0;Hr<=Pr;++Hr)(ds=xn.charCodeAt(Hr))>=32&&ds<128&&++vr;var Kr=vr>=4*Pr/5;ei.push(Yt),ei.push("Content-Location: "+(Pt.root||"file:///C:/SheetJS/")+hn),ei.push("Content-Transfer-Encoding: "+(Kr?"quoted-printable":"base64")),ei.push("Content-Type: "+Bt(Nn,hn)),ei.push(""),ei.push(Kr?$i(xn):Zt(xn))}return ei.push(Yt+"--\r\n"),ei.join("\r\n")}(st,Pt);if("zip"===(Bi(st),Pt.fileType))return function AE(st,$t){var Pt=$t||{},Yt=[],ei=[],ti=Bn(1),hn=Pt.compression?8:0,Nn=0,fn=0,xn=0,vr=0,Pr=0,ds=st.FullPaths[0],Hr=ds,Kr=st.FileIndex[0],Ia=[],dc=0;for(fn=1;fn<st.FullPaths.length;++fn)if(Hr=st.FullPaths[fn].slice(ds.length),(Kr=st.FileIndex[fn]).size&&Kr.content&&"\x01Sh33tJ5"!=Hr){var op=vr,hh=Bn(Hr.length);for(xn=0;xn<Hr.length;++xn)hh.write_shift(1,127&Hr.charCodeAt(xn));hh=hh.slice(0,hh.l),Ia[Pr]=cO.buf(Kr.content,0);var zp=Kr.content;8==hn&&(zp=bi(zp)),(ti=Bn(30)).write_shift(4,67324752),ti.write_shift(2,20),ti.write_shift(2,Nn),ti.write_shift(2,hn),Kr.mt?o(ti,Kr.mt):ti.write_shift(4,0),ti.write_shift(-4,8&Nn?0:Ia[Pr]),ti.write_shift(4,8&Nn?0:zp.length),ti.write_shift(4,8&Nn?0:Kr.content.length),ti.write_shift(2,hh.length),ti.write_shift(2,0),vr+=ti.length,Yt.push(ti),vr+=hh.length,Yt.push(hh),vr+=zp.length,Yt.push(zp),8&Nn&&((ti=Bn(12)).write_shift(-4,Ia[Pr]),ti.write_shift(4,zp.length),ti.write_shift(4,Kr.content.length),vr+=ti.l,Yt.push(ti)),(ti=Bn(46)).write_shift(4,33639248),ti.write_shift(2,0),ti.write_shift(2,20),ti.write_shift(2,Nn),ti.write_shift(2,hn),ti.write_shift(4,0),ti.write_shift(-4,Ia[Pr]),ti.write_shift(4,zp.length),ti.write_shift(4,Kr.content.length),ti.write_shift(2,hh.length),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(4,0),ti.write_shift(4,op),dc+=ti.l,ei.push(ti),dc+=hh.length,ei.push(hh),++Pr}return(ti=Bn(22)).write_shift(4,101010256),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(2,Pr),ti.write_shift(2,Pr),ti.write_shift(4,dc),ti.write_shift(4,vr),ti.write_shift(2,0),Jh([Jh(Yt),Jh(ei),ti])}(st,Pt);var Yt=function(ds){for(var Hr=0,Kr=0,Ia=0;Ia<ds.FileIndex.length;++Ia){var dc=ds.FileIndex[Ia];if(dc.content){var op=dc.content.length;op>0&&(op<4096?Hr+=op+63>>6:Kr+=op+511>>9)}}for(var hh=ds.FullPaths.length+3>>2,Bb=Hr+127>>7,Nb=(Hr+7>>3)+Kr+hh+Bb,Cy=Nb+127>>7,DE=Cy<=109?0:Math.ceil((Cy-109)/127);Nb+Cy+DE+127>>7>Cy;)DE=++Cy<=109?0:Math.ceil((Cy-109)/127);var vv=[1,DE,Cy,Bb,hh,Kr,Hr,0];return ds.FileIndex[0].size=Hr<<6,vv[7]=(ds.FileIndex[0].start=vv[0]+vv[1]+vv[2]+vv[3]+vv[4]+vv[5])+(vv[6]+7>>3),vv}(st),ei=Bn(Yt[7]<<9),ti=0,hn=0;for(ti=0;ti<8;++ti)ei.write_shift(1,Gr[ti]);for(ti=0;ti<8;++ti)ei.write_shift(2,0);for(ei.write_shift(2,62),ei.write_shift(2,3),ei.write_shift(2,65534),ei.write_shift(2,9),ei.write_shift(2,6),ti=0;ti<3;++ti)ei.write_shift(2,0);for(ei.write_shift(4,0),ei.write_shift(4,Yt[2]),ei.write_shift(4,Yt[0]+Yt[1]+Yt[2]+Yt[3]-1),ei.write_shift(4,0),ei.write_shift(4,4096),ei.write_shift(4,Yt[3]?Yt[0]+Yt[1]+Yt[2]-1:Cr),ei.write_shift(4,Yt[3]),ei.write_shift(-4,Yt[1]?Yt[0]-1:Cr),ei.write_shift(4,Yt[1]),ti=0;ti<109;++ti)ei.write_shift(-4,ti<Yt[2]?Yt[1]+ti:-1);if(Yt[1])for(hn=0;hn<Yt[1];++hn){for(;ti<236+127*hn;++ti)ei.write_shift(-4,ti<Yt[2]?Yt[1]+ti:-1);ei.write_shift(-4,hn===Yt[1]-1?Cr:hn+1)}var Nn=function(ds){for(hn+=ds;ti<hn-1;++ti)ei.write_shift(-4,ti+1);ds&&(++ti,ei.write_shift(-4,Cr))};for(hn=ti=0,hn+=Yt[1];ti<hn;++ti)ei.write_shift(-4,ws.DIFSECT);for(hn+=Yt[2];ti<hn;++ti)ei.write_shift(-4,ws.FATSECT);Nn(Yt[3]),Nn(Yt[4]);for(var pn=0,fn=0,xn=st.FileIndex[0];pn<st.FileIndex.length;++pn)(xn=st.FileIndex[pn]).content&&!((fn=xn.content.length)<4096)&&(xn.start=hn,Nn(fn+511>>9));for(Nn(Yt[6]+7>>3);511&ei.l;)ei.write_shift(-4,ws.ENDOFCHAIN);for(hn=ti=0,pn=0;pn<st.FileIndex.length;++pn)(xn=st.FileIndex[pn]).content&&(fn=xn.content.length)&&!(fn>=4096)&&(xn.start=hn,Nn(fn+63>>6));for(;511&ei.l;)ei.write_shift(-4,ws.ENDOFCHAIN);for(ti=0;ti<Yt[4]<<2;++ti){var vr=st.FullPaths[ti];if(vr&&0!==vr.length){xn=st.FileIndex[ti],0===ti&&(xn.start=xn.size?xn.start-1:Cr);var Pr=0===ti&&Pt.root||xn.name;if(fn=2*(Pr.length+1),ei.write_shift(64,Pr,"utf16le"),ei.write_shift(2,fn),ei.write_shift(1,xn.type),ei.write_shift(1,xn.color),ei.write_shift(-4,xn.L),ei.write_shift(-4,xn.R),ei.write_shift(-4,xn.C),xn.clsid)ei.write_shift(16,xn.clsid,"hex");else for(pn=0;pn<4;++pn)ei.write_shift(4,0);ei.write_shift(4,xn.state||0),ei.write_shift(4,0),ei.write_shift(4,0),ei.write_shift(4,0),ei.write_shift(4,0),ei.write_shift(4,xn.start),ei.write_shift(4,xn.size),ei.write_shift(4,0)}else{for(pn=0;pn<17;++pn)ei.write_shift(4,0);for(pn=0;pn<3;++pn)ei.write_shift(4,-1);for(pn=0;pn<12;++pn)ei.write_shift(4,0)}}for(ti=1;ti<st.FileIndex.length;++ti)if((xn=st.FileIndex[ti]).size>=4096)if(ei.l=xn.start+1<<9,Ka&&Buffer.isBuffer(xn.content))xn.content.copy(ei,ei.l,0,xn.size),ei.l+=xn.size+511&-512;else{for(pn=0;pn<xn.size;++pn)ei.write_shift(1,xn.content[pn]);for(;511&pn;++pn)ei.write_shift(1,0)}for(ti=1;ti<st.FileIndex.length;++ti)if((xn=st.FileIndex[ti]).size>0&&xn.size<4096)if(Ka&&Buffer.isBuffer(xn.content))xn.content.copy(ei,ei.l,0,xn.size),ei.l+=xn.size+63&-64;else{for(pn=0;pn<xn.size;++pn)ei.write_shift(1,xn.content[pn]);for(;63&pn;++pn)ei.write_shift(1,0)}if(Ka)ei.l=ei.length;else for(;ei.l<ei.length;)ei.write_shift(1,0);return ei}t.version="1.2.1";var rr,Zi=64,Cr=-2,ns="d0cf11e0a1b11ae1",Gr=[208,207,17,224,161,177,26,225],ta="00000000000000000000000000000000",ws={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Cr,FREESECT:-1,HEADER_SIGNATURE:ns,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ta,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function es(st){for(var $t=new Array(st.length),Pt=0;Pt<st.length;++Pt)$t[Pt]=String.fromCharCode(st[Pt]);return $t.join("")}function bi(st){return rr?rr.deflateRawSync(st):$a(st)}for(var st,$t,_i=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Yn=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Wr=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Er=typeof Uint8Array<"u",sr=Er?new Uint8Array(256):[],La=0;La<256;++La)sr[La]=(void 0,255&(($t=139536&((st=La)<<1|st<<11)|558144&(st<<5|st<<15))>>16|$t>>8|$t));function di(st,$t){var Pt=sr[255&st];return $t<=8?Pt>>>8-$t:(Pt=Pt<<8|sr[st>>8&255],$t<=16?Pt>>>16-$t:(Pt=Pt<<8|sr[st>>16&255])>>>24-$t)}function Go(st,$t){var Pt=7&$t,Yt=$t>>>3;return(st[Yt]|(Pt<=6?0:st[Yt+1]<<8))>>>Pt&3}function Ja(st,$t){var Pt=7&$t,Yt=$t>>>3;return(st[Yt]|(Pt<=5?0:st[Yt+1]<<8))>>>Pt&7}function Qa(st,$t){var Pt=7&$t,Yt=$t>>>3;return(st[Yt]|(Pt<=3?0:st[Yt+1]<<8))>>>Pt&31}function Jr(st,$t){var Pt=7&$t,Yt=$t>>>3;return(st[Yt]|(Pt<=1?0:st[Yt+1]<<8))>>>Pt&127}function Fc(st,$t,Pt){var Yt=7&$t,ei=$t>>>3,hn=st[ei]>>>Yt;return Pt<8-Yt||(hn|=st[ei+1]<<8-Yt,Pt<16-Yt)||(hn|=st[ei+2]<<16-Yt,Pt<24-Yt)||(hn|=st[ei+3]<<24-Yt),hn&(1<<Pt)-1}function _d(st,$t,Pt){var Yt=7&$t,ei=$t>>>3;return Yt<=5?st[ei]|=(7&Pt)<<Yt:(st[ei]|=Pt<<Yt&255,st[ei+1]=(7&Pt)>>8-Yt),$t+3}function km(st,$t,Pt){return st[$t>>>3]|=Pt=(1&Pt)<<(7&$t),$t+1}function hg(st,$t,Pt){var ei=$t>>>3;return st[ei]|=255&(Pt<<=7&$t),st[ei+1]=Pt>>>=8,$t+8}function g_(st,$t,Pt){var ei=$t>>>3;return st[ei]|=255&(Pt<<=7&$t),st[ei+1]=255&(Pt>>>=8),st[ei+2]=Pt>>>8,$t+16}function Tm(st,$t){var Pt=st.length,Yt=2*Pt>$t?2*Pt:$t+5,ei=0;if(Pt>=$t)return st;if(Ka){var ti=BE(Yt);if(st.copy)st.copy(ti);else for(;ei<st.length;++ei)ti[ei]=st[ei];return ti}if(Er){var hn=new Uint8Array(Yt);if(hn.set)hn.set(st);else for(;ei<Pt;++ei)hn[ei]=st[ei];return hn}return st.length=Yt,st}function uf(st){for(var $t=new Array(st),Pt=0;Pt<st;++Pt)$t[Pt]=0;return $t}function ap(st,$t,Pt){var Yt=1,ei=0,ti=0,hn=0,Nn=0,pn=st.length,fn=Er?new Uint16Array(32):uf(32);for(ti=0;ti<32;++ti)fn[ti]=0;for(ti=pn;ti<Pt;++ti)st[ti]=0;pn=st.length;var xn=Er?new Uint16Array(pn):uf(pn);for(ti=0;ti<pn;++ti)fn[ei=st[ti]]++,Yt<ei&&(Yt=ei),xn[ti]=0;for(fn[0]=0,ti=1;ti<=Yt;++ti)fn[ti+16]=Nn=Nn+fn[ti-1]<<1;for(ti=0;ti<pn;++ti)0!=(Nn=st[ti])&&(xn[ti]=fn[Nn+16]++);var vr=0;for(ti=0;ti<pn;++ti)if(0!=(vr=st[ti]))for(Nn=di(xn[ti],Yt)>>Yt-vr,hn=(1<<Yt+4-vr)-1;hn>=0;--hn)$t[Nn|hn<<vr]=15&vr|ti<<4;return Yt}var n0=Er?new Uint16Array(512):uf(512),v_=Er?new Uint16Array(32):uf(32);if(!Er){for(var yd=0;yd<512;++yd)n0[yd]=0;for(yd=0;yd<32;++yd)v_[yd]=0}!function(){for(var st=[],$t=0;$t<32;$t++)st.push(5);ap(st,v_,32);var Pt=[];for($t=0;$t<=143;$t++)Pt.push(8);for(;$t<=255;$t++)Pt.push(9);for(;$t<=279;$t++)Pt.push(7);for(;$t<=287;$t++)Pt.push(8);ap(Pt,n0,288)}();var Np=function(){for(var $t=Er?new Uint8Array(32768):[],Pt=0,Yt=0;Pt<Wr.length-1;++Pt)for(;Yt<Wr[Pt+1];++Yt)$t[Yt]=Pt;for(;Yt<32768;++Yt)$t[Yt]=29;var ei=Er?new Uint8Array(259):[];for(Pt=0,Yt=0;Pt<Yn.length-1;++Pt)for(;Yt<Yn[Pt+1];++Yt)ei[Yt]=Pt;return function(pn,fn){return pn.length<8?function ti(Nn,pn){for(var fn=0;fn<Nn.length;){var xn=Math.min(65535,Nn.length-fn);for(pn.write_shift(1,+(fn+xn==Nn.length)),pn.write_shift(2,xn),pn.write_shift(2,65535&~xn);xn-- >0;)pn[pn.l++]=Nn[fn++]}return pn.l}(pn,fn):function hn(Nn,pn){for(var fn=0,xn=0,vr=Er?new Uint16Array(32768):[];xn<Nn.length;){var Pr=Math.min(65535,Nn.length-xn);if(Pr<10){for(7&(fn=_d(pn,fn,+(xn+Pr==Nn.length)))&&(fn+=8-(7&fn)),pn.l=fn/8|0,pn.write_shift(2,Pr),pn.write_shift(2,65535&~Pr);Pr-- >0;)pn[pn.l++]=Nn[xn++];fn=8*pn.l}else{fn=_d(pn,fn,+(xn+Pr==Nn.length)+2);for(var ds=0;Pr-- >0;){var Hr=Nn[xn],Kr=-1,Ia=0;if((Kr=vr[ds=32767&(ds<<5^Hr)])&&((Kr|=-32768&xn)>xn&&(Kr-=32768),Kr<xn))for(;Nn[Kr+Ia]==Nn[xn+Ia]&&Ia<250;)++Ia;if(Ia>2){(Hr=ei[Ia])<=22?fn=hg(pn,fn,sr[Hr+1]>>1)-1:(hg(pn,fn,3),hg(pn,fn+=5,sr[Hr-23]>>5),fn+=3);var dc=Hr<8?0:Hr-4>>2;dc>0&&(g_(pn,fn,Ia-Yn[Hr]),fn+=dc),fn=hg(pn,fn,sr[Hr=$t[xn-Kr]]>>3),fn-=3;var op=Hr<4?0:Hr-2>>1;op>0&&(g_(pn,fn,xn-Kr-Wr[Hr]),fn+=op);for(var hh=0;hh<Ia;++hh)vr[ds]=32767&xn,ds=32767&(ds<<5^Nn[xn]),++xn;Pr-=Ia-1}else Hr<=143?Hr+=48:fn=km(pn,fn,1),fn=hg(pn,fn,sr[Hr]),vr[ds]=32767&xn,++xn}fn=hg(pn,fn,0)-1}}return pn.l=(fn+7)/8|0,pn.l}(pn,fn)}}();function $a(st){var $t=Bn(50+Math.floor(1.1*st.length)),Pt=Np(st,$t);return $t.slice(0,Pt)}var eu=Er?new Uint16Array(32768):uf(32768),Pf=Er?new Uint16Array(32768):uf(32768),ju=Er?new Uint16Array(128):uf(128),gv=1,$l=1;function Pb(st,$t){var Pt=Qa(st,$t)+257,Yt=Qa(st,$t+=5)+1,ei=function Bo(st,$t){var Pt=7&$t,Yt=$t>>>3;return(st[Yt]|(Pt<=4?0:st[Yt+1]<<8))>>>Pt&15}(st,$t+=5)+4;$t+=4;for(var ti=0,hn=Er?new Uint8Array(19):uf(19),Nn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pn=1,fn=Er?new Uint8Array(8):uf(8),xn=Er?new Uint8Array(8):uf(8),vr=hn.length,Pr=0;Pr<ei;++Pr)hn[_i[Pr]]=ti=Ja(st,$t),pn<ti&&(pn=ti),fn[ti]++,$t+=3;var ds=0;for(fn[0]=0,Pr=1;Pr<=pn;++Pr)xn[Pr]=ds=ds+fn[Pr-1]<<1;for(Pr=0;Pr<vr;++Pr)0!=(ds=hn[Pr])&&(Nn[Pr]=xn[ds]++);var Hr=0;for(Pr=0;Pr<vr;++Pr)if(0!=(Hr=hn[Pr])){ds=sr[Nn[Pr]]>>8-Hr;for(var Kr=(1<<7-Hr)-1;Kr>=0;--Kr)ju[ds|Kr<<Hr]=7&Hr|Pr<<3}var Ia=[];for(pn=1;Ia.length<Pt+Yt;)switch(ds=ju[Jr(st,$t)],$t+=7&ds,ds>>>=3){case 16:for(ti=3+Go(st,$t),$t+=2,ds=Ia[Ia.length-1];ti-- >0;)Ia.push(ds);break;case 17:for(ti=3+Ja(st,$t),$t+=3;ti-- >0;)Ia.push(0);break;case 18:for(ti=11+Jr(st,$t),$t+=7;ti-- >0;)Ia.push(0);break;default:Ia.push(ds),pn<ds&&(pn=ds)}var dc=Ia.slice(0,Pt),op=Ia.slice(Pt);for(Pr=Pt;Pr<286;++Pr)dc[Pr]=0;for(Pr=Yt;Pr<30;++Pr)op[Pr]=0;return gv=ap(dc,eu,286),$l=ap(op,Pf,30),$t}function cC(st,$t){var Yt=function Fb(st,$t){if(3==st[0]&&!(3&st[1]))return[Qv($t),2];for(var Pt=0,Yt=0,ei=BE($t||1<<18),ti=0,hn=ei.length>>>0,Nn=0,pn=0;!(1&Yt);)if(Yt=Ja(st,Pt),Pt+=3,Yt>>>1)for(Yt>>1==1?(Nn=9,pn=5):(Pt=Pb(st,Pt),Nn=gv,pn=$l);;){!$t&&hn<ti+32767&&(hn=(ei=Tm(ei,ti+32767)).length);var xn=Fc(st,Pt,Nn),vr=Yt>>>1==1?n0[xn]:eu[xn];if(Pt+=15&vr,(vr>>>=4)>>>8&255){if(256==vr)break;var Pr=(vr-=257)<8?0:vr-4>>2;Pr>5&&(Pr=0);var ds=ti+Yn[vr];Pr>0&&(ds+=Fc(st,Pt,Pr),Pt+=Pr),xn=Fc(st,Pt,pn),Pt+=15&(vr=Yt>>>1==1?v_[xn]:Pf[xn]);var Hr=(vr>>>=4)<4?0:vr-2>>1,Kr=Wr[vr];for(Hr>0&&(Kr+=Fc(st,Pt,Hr),Pt+=Hr),!$t&&hn<ds&&(hn=(ei=Tm(ei,ds+100)).length);ti<ds;)ei[ti]=ei[ti-Kr],++ti}else ei[ti++]=vr}else{7&Pt&&(Pt+=8-(7&Pt));var fn=st[Pt>>>3]|st[1+(Pt>>>3)]<<8;if(Pt+=32,fn>0)for(!$t&&hn<ti+fn&&(hn=(ei=Tm(ei,ti+fn)).length);fn-- >0;)ei[ti++]=st[Pt>>>3],Pt+=8}return $t?[ei,Pt+7>>>3]:[ei.slice(0,ti),Pt+7>>>3]}(st.slice(st.l||0),$t);return st.l+=Yt[1],Yt[0]}function wy(st,$t){if(!st)throw new Error($t);typeof console<"u"&&console.error($t)}function q1(st,$t){var Pt=st;vd(Pt,0);var ti={FileIndex:[],FullPaths:[]};ni(ti,{root:$t.root});for(var hn=Pt.length-4;(80!=Pt[hn]||75!=Pt[hn+1]||5!=Pt[hn+2]||6!=Pt[hn+3])&&hn>=0;)--hn;Pt.l=hn+4,Pt.l+=4;var Nn=Pt.read_shift(2);Pt.l+=6;var pn=Pt.read_shift(4);for(Pt.l=pn,hn=0;hn<Nn;++hn){Pt.l+=20;var fn=Pt.read_shift(4),xn=Pt.read_shift(4),vr=Pt.read_shift(2),Pr=Pt.read_shift(2),ds=Pt.read_shift(2);Pt.l+=8;var Hr=Pt.read_shift(4),Kr=g(Pt.slice(Pt.l+vr,Pt.l+vr+Pr));Pt.l+=vr+Pr+ds;var Ia=Pt.l;Pt.l=Hr+4,dg(Pt,fn,xn,ti,Kr),Pt.l=Ia}return ti}function dg(st,$t,Pt,Yt,ei){st.l+=2;var ti=st.read_shift(2),hn=st.read_shift(2),Nn=function f(st){var $t=65535&st.read_shift(2),Pt=65535&st.read_shift(2),Yt=new Date,ei=31&Pt,ti=15&(Pt>>>=5);Pt>>>=4,Yt.setMilliseconds(0),Yt.setFullYear(Pt+1980),Yt.setMonth(ti-1),Yt.setDate(ei);var hn=31&$t,Nn=63&($t>>>=5);return Yt.setHours($t>>>=6),Yt.setMinutes(Nn),Yt.setSeconds(hn<<1),Yt}(st);if(8257&ti)throw new Error("Unsupported ZIP encryption");st.read_shift(4);for(var fn=st.read_shift(4),xn=st.read_shift(4),vr=st.read_shift(2),Pr=st.read_shift(2),ds="",Hr=0;Hr<vr;++Hr)ds+=String.fromCharCode(st[st.l++]);if(Pr){var Kr=g(st.slice(st.l,st.l+Pr));(Kr[21589]||{}).mt&&(Nn=Kr[21589].mt),((ei||{})[21589]||{}).mt&&(Nn=ei[21589].mt)}st.l+=Pr;var Ia=st.slice(st.l,st.l+fn);switch(hn){case 8:Ia=function vn(st,$t){if(!rr)return cC(st,$t);var Yt=new(0,rr.InflateRaw),ei=Yt._processChunk(st.slice(st.l),Yt._finishFlushFlag);return st.l+=Yt.bytesRead,ei}(st,xn);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+hn)}var dc=!1;8&ti&&(134695760==st.read_shift(4)&&(st.read_shift(4),dc=!0),fn=st.read_shift(4),xn=st.read_shift(4)),fn!=$t&&wy(dc,"Bad compressed size: "+$t+" != "+fn),xn!=Pt&&wy(dc,"Bad uncompressed size: "+Pt+" != "+xn),Na(Yt,ds,Ia,{unsafe:!0,mt:Nn})}var K1={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Bt(st,$t){if(st.ctype)return st.ctype;var Pt=st.name||"",Yt=Pt.match(/\.([^\.]+)$/);return Yt&&K1[Yt[1]]||$t&&(Yt=(Pt=$t).match(/[\.\\]([^\.\\])+$/))&&K1[Yt[1]]?K1[Yt[1]]:"application/octet-stream"}function Zt(st){for(var $t=zx(st),Pt=[],Yt=0;Yt<$t.length;Yt+=76)Pt.push($t.slice(Yt,Yt+76));return Pt.join("\r\n")+"\r\n"}function $i(st){var $t=st.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(fn){var xn=fn.charCodeAt(0).toString(16).toUpperCase();return"="+(1==xn.length?"0"+xn:xn)});"\n"==($t=$t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&($t="=0D"+$t.slice(1));for(var Pt=[],Yt=($t=$t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),ei=0;ei<Yt.length;++ei){var ti=Yt[ei];if(0!=ti.length)for(var hn=0;hn<ti.length;){var Nn=76,pn=ti.slice(hn,hn+Nn);"="==pn.charAt(Nn-1)?Nn--:"="==pn.charAt(Nn-2)?Nn-=2:"="==pn.charAt(Nn-3)&&(Nn-=3),pn=ti.slice(hn,hn+Nn),(hn+=Nn)<ti.length&&(pn+="="),Pt.push(pn)}else Pt.push("")}return Pt.join("\r\n")}function Lr(st,$t,Pt){for(var hn,Yt="",ei="",ti="",Nn=0;Nn<10;++Nn){var pn=$t[Nn];if(!pn||pn.match(/^\s*$/))break;var fn=pn.match(/^(.*?):\s*([^\s].*)$/);if(fn)switch(fn[1].toLowerCase()){case"content-location":Yt=fn[2].trim();break;case"content-type":ti=fn[2].trim();break;case"content-transfer-encoding":ei=fn[2].trim()}}switch(++Nn,ei.toLowerCase()){case"base64":hn=Op(Mp($t.slice(Nn).join("")));break;case"quoted-printable":hn=function Pn(st){for(var $t=[],Pt=0;Pt<st.length;++Pt){for(var Yt=st[Pt];Pt<=st.length&&"="==Yt.charAt(Yt.length-1);)Yt=Yt.slice(0,Yt.length-1)+st[++Pt];$t.push(Yt)}for(var ei=0;ei<$t.length;++ei)$t[ei]=$t[ei].replace(/[=][0-9A-Fa-f]{2}/g,function(ti){return String.fromCharCode(parseInt(ti.slice(1),16))});return Op($t.join("\r\n"))}($t.slice(Nn));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ei)}var xn=Na(st,Yt.slice(Pt.length),hn,{unsafe:!0});ti&&(xn.ctype=ti)}function Na(st,$t,Pt,Yt){var ei=Yt&&Yt.unsafe;ei||ni(st);var ti=!ei&&Gs.find(st,$t);if(!ti){var hn=st.FullPaths[0];$t.slice(0,hn.length)==hn?hn=$t:("/"!=hn.slice(-1)&&(hn+="/"),hn=(hn+$t).replace("//","/")),ti={name:s($t),type:2},st.FileIndex.push(ti),st.FullPaths.push(hn),ei||Gs.utils.cfb_gc(st)}return ti.content=Pt,ti.size=Pt?Pt.length:0,Yt&&(Yt.CLSID&&(ti.clsid=Yt.CLSID),Yt.mt&&(ti.mt=Yt.mt),Yt.ct&&(ti.ct=Yt.ct)),ti}return t.find=function Mn(st,$t){var Pt=st.FullPaths.map(function(pn){return pn.toUpperCase()}),Yt=Pt.map(function(pn){var fn=pn.split("/");return fn[fn.length-("/"==pn.slice(-1)?2:1)]}),ei=!1;47===$t.charCodeAt(0)?(ei=!0,$t=Pt[0].slice(0,-1)+$t):ei=-1!==$t.indexOf("/");var ti=$t.toUpperCase(),hn=!0===ei?Pt.indexOf(ti):Yt.indexOf(ti);if(-1!==hn)return st.FileIndex[hn];var Nn=!ti.match(Gx);for(ti=ti.replace(Zd,""),Nn&&(ti=ti.replace(Gx,"!")),hn=0;hn<Pt.length;++hn)if((Nn?Pt[hn].replace(Gx,"!"):Pt[hn]).replace(Zd,"")==ti||(Nn?Yt[hn].replace(Gx,"!"):Yt[hn]).replace(Zd,"")==ti)return st.FileIndex[hn];return null},t.read=function Ki(st,$t){var Pt=$t&&$t.type;switch(Pt||Ka&&Buffer.isBuffer(st)&&(Pt="buffer"),Pt||"base64"){case"file":return function Fi(st,$t){return P(),z(A.readFileSync(st),$t)}(st,$t);case"base64":return z(Op(Mp(st)),$t);case"binary":return z(Op(st),$t)}return z(st,$t)},t.parse=z,t.write=function aa(st,$t){var Pt=Cn(st,$t);switch($t&&$t.type||"buffer"){case"file":return P(),A.writeFileSync($t.filename,Pt),Pt;case"binary":return"string"==typeof Pt?Pt:es(Pt);case"base64":return zx("string"==typeof Pt?Pt:es(Pt));case"buffer":if(Ka)return Buffer.isBuffer(Pt)?Pt:ov(Pt);case"array":return"string"==typeof Pt?Op(Pt):Pt}return Pt},t.writeFile=function Wa(st,$t,Pt){P();var Yt=Cn(st,Pt);A.writeFileSync($t,Yt)},t.utils={cfb_new:function ks(st){var $t={};return ni($t,st),$t},cfb_add:Na,cfb_del:function gs(st,$t){ni(st);var Pt=Gs.find(st,$t);if(Pt)for(var Yt=0;Yt<st.FileIndex.length;++Yt)if(st.FileIndex[Yt]==Pt)return st.FileIndex.splice(Yt,1),st.FullPaths.splice(Yt,1),!0;return!1},cfb_mov:function pa(st,$t,Pt){ni(st);var Yt=Gs.find(st,$t);if(Yt)for(var ei=0;ei<st.FileIndex.length;++ei)if(st.FileIndex[ei]==Yt)return st.FileIndex[ei].name=s(Pt),st.FullPaths[ei]=Pt,!0;return!1},cfb_gc:function rl(st){Bi(st,!0)},ReadShift:Xx,CheckField:Pk,prep_blob:vd,bconcat:Jh,use_zlib:function gi(st){try{var Pt=new(0,st.InflateRaw);if(Pt._processChunk(new Uint8Array([3,0]),Pt._finishFlushFlag),!Pt.bytesRead)throw new Error("zlib does not expose bytesRead");rr=st}catch(Yt){console.error("cannot use native zlib: "+(Yt.message||Yt))}},_deflateRaw:$a,_inflateRaw:cC,consts:ws},t}();let n_;function uO(i){return"string"==typeof i?Yx(i):Array.isArray(i)?function PM(i){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(i)}(i):i}function Ux(i,t,e){if(typeof n_<"u"&&n_.writeFileSync)return e?n_.writeFileSync(i,t,e):n_.writeFileSync(i,t);if(typeof Deno<"u"){if(e&&"string"==typeof t)switch(e){case"utf8":t=new TextEncoder(e).encode(t);break;case"binary":t=Yx(t);break;default:throw new Error("Unsupported encoding "+e)}return Deno.writeFileSync(i,t)}var r="utf8"==e?Zg(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,i);if(typeof Blob<"u"){var s=new Blob([uO(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,i);if(typeof saveAs<"u")return saveAs(s,i);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(s);if("object"==typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:i,saveAs:!0});var f=document.createElement("a");if(null!=f.download)return f.download=i,f.href=o,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var g=File(i);return g.open("w"),g.encoding="binary",Array.isArray(t)&&(t=e_(t)),g.write(t),g.close(),t}catch(A){if(!A.message||!A.message.match(/onstruct/))throw A}throw new Error("cannot save file "+i)}function mu(i){for(var t=Object.keys(i),e=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(i,t[r])&&e.push(t[r]);return e}function ik(i,t){for(var e=[],r=mu(i),s=0;s!==r.length;++s)null==e[i[r[s]][t]]&&(e[i[r[s]][t]]=r[s]);return e}function lw(i){for(var t=[],e=mu(i),r=0;r!==e.length;++r)t[i[e[r]]]=e[r];return t}function cw(i){for(var t=[],e=mu(i),r=0;r!==e.length;++r)t[i[e[r]]]=parseInt(e[r],10);return t}var uw=new Date(1899,11,30,0,0,0);function Qh(i,t){var e=i.getTime();return t&&(e-=1263168e5),(e-(uw.getTime()+6e4*(i.getTimezoneOffset()-uw.getTimezoneOffset())))/864e5}var nk=new Date,fO=uw.getTime()+6e4*(nk.getTimezoneOffset()-uw.getTimezoneOffset()),rk=nk.getTimezoneOffset();function bC(i){var t=new Date;return t.setTime(24*i*60*60*1e3+fO),t.getTimezoneOffset()!==rk&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-rk)),t}var sk=new Date("2017-02-19T19:06:09.000Z"),ak=isNaN(sk.getFullYear())?new Date("2/19/17"):sk,mO=2017==ak.getFullYear();function Jc(i,t){var e=new Date(i);if(mO)return t>0?e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3):t<0&&e.setTime(e.getTime()-60*e.getTimezoneOffset()*1e3),e;if(i instanceof Date)return i;if(1917==ak.getFullYear()&&!isNaN(e.getFullYear())){var r=e.getFullYear();return i.indexOf(""+r)>-1||e.setFullYear(e.getFullYear()+100),e}var s=i.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return i.indexOf("Z")>-1&&(o=new Date(o.getTime()-60*o.getTimezoneOffset()*1e3)),o}function Q_(i,t){if(Ka&&Buffer.isBuffer(i)){if(t){if(255==i[0]&&254==i[1])return Zg(i.slice(2).toString("utf16le"));if(254==i[1]&&255==i[2])return Zg(function FE(i){for(var t=[],e=0;e<i.length>>1;++e)t[e]=String.fromCharCode(i.charCodeAt(2*e+1)+(i.charCodeAt(2*e)<<8));return t.join("")}(i.slice(2).toString("binary")))}return i.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(255==i[0]&&254==i[1])return Zg(new TextDecoder("utf-16le").decode(i.slice(2)));if(254==i[0]&&255==i[1])return Zg(new TextDecoder("utf-16be").decode(i.slice(2)))}var e={"\u20ac":"\x80","\u201a":"\x82",\u0192:"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87",\u02c6:"\x88","\u2030":"\x89",\u0160:"\x8a","\u2039":"\x8b",\u0152:"\x8c",\u017d:"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99",\u0161:"\x9a","\u203a":"\x9b",\u0153:"\x9c",\u017e:"\x9e",\u0178:"\x9f"};return Array.isArray(i)&&(i=new Uint8Array(i)),new TextDecoder("latin1").decode(i).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(o){return e[o]||o})}catch{}for(var r=[],s=0;s!=i.length;++s)r.push(String.fromCharCode(i[s]));return r.join("")}function Il(i){if(typeof JSON<"u"&&!Array.isArray(i))return JSON.parse(JSON.stringify(i));if("object"!=typeof i||null==i)return i;if(i instanceof Date)return new Date(i.getTime());var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=Il(i[e]));return t}function gu(i,t){for(var e="";e.length<t;)e+=i;return e}function lg(i){var t=Number(i);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(i))return t;var e=1,r=i.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return e*=100,""});return isNaN(t=Number(r))&&(r=r.replace(/[(](.*)[)]/,function(s,o){return e=-e,o}),isNaN(t=Number(r)))?t:t/e}var gO=["january","february","march","april","may","june","july","august","september","october","november","december"];function C1(i){var t=new Date(i),e=new Date(NaN),r=t.getYear(),s=t.getMonth(),o=t.getDate();if(isNaN(o))return e;var f=i.toLowerCase();if(f.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((f=f.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==gO.indexOf(f))return e}else if(f.match(/[a-z]/))return e;return r<0||r>8099?e:(s>0||o>1)&&101!=r?t:i.match(/[^-0-9:,\/\\]/)?e:t}function Ha(i,t,e){if(i.FullPaths){var r;if("string"==typeof e)return r=Ka?ov(e):function FM(i){for(var t=[],e=0,r=i.length+250,s=Qv(i.length+255),o=0;o<i.length;++o){var f=i.charCodeAt(o);if(f<128)s[e++]=f;else if(f<2048)s[e++]=192|f>>6&31,s[e++]=128|63&f;else if(f>=55296&&f<57344){f=64+(1023&f);var g=1023&i.charCodeAt(++o);s[e++]=240|f>>8&7,s[e++]=128|f>>2&63,s[e++]=128|g>>6&15|(3&f)<<4,s[e++]=128|63&g}else s[e++]=224|f>>12&15,s[e++]=128|f>>6&63,s[e++]=128|63&f;e>r&&(t.push(s.slice(0,e)),e=0,s=Qv(65535),r=65530)}return t.push(s.slice(0,e)),Jh(t)}(e),Gs.utils.cfb_add(i,t,r);Gs.utils.cfb_add(i,t,e)}else i.file(t,e)}function CC(){return Gs.utils.cfb_new()}var vu='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',EC=lw({"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"}),kC=/[&<>'"]/g,EO=/[\u0000-\u0008\u000b-\u001f]/g;function nl(i){return(i+"").replace(kC,function(e){return EC[e]}).replace(EO,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function fk(i){return nl(i).replace(/ /g,"_x0020_")}var pk=/[\u0000-\u001f]/g;function mk(i){return(i+"").replace(kC,function(e){return EC[e]}).replace(/\n/g,"<br/>").replace(pk,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function TC(i){for(var t="",e=0,r=0,s=0,o=0,f=0,g=0;e<i.length;)(r=i.charCodeAt(e++))<128?t+=String.fromCharCode(r):(s=i.charCodeAt(e++),r>191&&r<224?(f=(31&r)<<6,f|=63&s,t+=String.fromCharCode(f)):(o=i.charCodeAt(e++),r<240?t+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o):(g=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&(f=i.charCodeAt(e++)))-65536,t+=String.fromCharCode(55296+(g>>>10&1023)),t+=String.fromCharCode(56320+(1023&g)))));return t}function vk(i){var e,r,g,t=Qv(2*i.length),s=1,o=0,f=0;for(r=0;r<i.length;r+=s)s=1,(g=i.charCodeAt(r))<128?e=g:g<224?(e=64*(31&g)+(63&i.charCodeAt(r+1)),s=2):g<240?(e=4096*(15&g)+64*(63&i.charCodeAt(r+1))+(63&i.charCodeAt(r+2)),s=3):(s=4,e=262144*(7&g)+4096*(63&i.charCodeAt(r+1))+64*(63&i.charCodeAt(r+2))+(63&i.charCodeAt(r+3)),f=55296+((e-=65536)>>>10&1023),e=56320+(1023&e)),0!==f&&(t[o++]=255&f,t[o++]=f>>>8,f=0),t[o++]=e%256,t[o++]=e>>>8;return t.slice(0,o).toString("ucs2")}function _k(i){return ov(i,"binary").toString("utf8")}var hw="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",cc=Ka&&(_k(hw)==TC(hw)&&_k||vk(hw)==TC(hw)&&vk)||TC,Zg=Ka?function(i){return ov(i,"utf8").toString("binary")}:function(i){for(var t=[],e=0,r=0,s=0;e<i.length;)switch(r=i.charCodeAt(e++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,s=i.charCodeAt(e++)-56320+(r<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(63&s)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},yk=function(){var i=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(e){for(var r=e.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),s=0;s<i.length;++s)r=r.replace(i[s][0],i[s][1]);return r}}(),bk=/(^\s|\s$|\n)/;function gd(i,t){return"<"+i+(t.match(bk)?' xml:space="preserve"':"")+">"+t+"</"+i+">"}function Wx(i){return mu(i).map(function(t){return" "+t+'="'+i[t]+'"'}).join("")}function Ar(i,t,e){return"<"+i+(null!=e?Wx(e):"")+(null!=t?(t.match(bk)?' xml:space="preserve"':"")+">"+t+"</"+i:"/")+">"}function SC(i,t){try{return i.toISOString().replace(/\.\d*/,"")}catch(e){if(t)throw e}return""}var oh={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},r_=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Pp={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"},wk=function(i){for(var t=[],r=0;r<i[0].length;++r)if(i[0][r])for(var s=0,o=i[0][r].length;s<o;s+=10240)t.push.apply(t,i[0][r].slice(s,s+10240));return t},Ck=Ka?function(i){return i[0].length>0&&Buffer.isBuffer(i[0][0])?Buffer.concat(i[0].map(function(t){return Buffer.isBuffer(t)?t:ov(t)})):wk(i)}:wk,Ek=function(i,t,e){for(var r=[],s=t;s<e;s+=2)r.push(String.fromCharCode(cv(i,s)));return r.join("").replace(Zd,"")},dw=Ka?function(i,t,e){return Buffer.isBuffer(i)?i.toString("utf16le",t,e).replace(Zd,""):Ek(i,t,e)}:Ek,kk=function(i,t,e){for(var r=[],s=t;s<t+e;++s)r.push(("0"+i[s].toString(16)).slice(-2));return r.join("")},Tk=Ka?function(i,t,e){return Buffer.isBuffer(i)?i.toString("hex",t,t+e):kk(i,t,e)}:kk,Sk=function(i,t,e){for(var r=[],s=t;s<e;s++)r.push(String.fromCharCode(k1(i,s)));return r.join("")},E1=Ka?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf8",e,r):Sk(t,e,r)}:Sk,Ak=function(i,t){var e=ed(i,t);return e>0?E1(i,t+4,t+4+e-1):""},DC=Ak,Dk=function(i,t){var e=ed(i,t);return e>0?E1(i,t+4,t+4+e-1):""},IC=Dk,Ik=function(i,t){var e=2*ed(i,t);return e>0?E1(i,t+4,t+4+e-1):""},MC=Ik,Mk=function(t,e){var r=ed(t,e);return r>0?dw(t,e+4,e+4+r):""},OC=Mk,Ok=function(i,t){var e=ed(i,t);return e>0?E1(i,t+4,t+4+e):""},RC=Ok,Rk=function(i,t){return function OO(i,t){for(var e=1-2*(i[t+7]>>>7),r=((127&i[t+7])<<4)+(i[t+6]>>>4&15),s=15&i[t+6],o=5;o>=0;--o)s=256*s+i[t+o];return 2047==r?0==s?e*(1/0):NaN:(0==r?r=-1022:(r-=1023,s+=Math.pow(2,52)),e*Math.pow(2,r-52)*s)}(i,t)},fw=Rk,LC=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Ka&&(DC=function(t,e){if(!Buffer.isBuffer(t))return Ak(t,e);var r=t.readUInt32LE(e);return r>0?t.toString("utf8",e+4,e+4+r-1):""},IC=function(t,e){if(!Buffer.isBuffer(t))return Dk(t,e);var r=t.readUInt32LE(e);return r>0?t.toString("utf8",e+4,e+4+r-1):""},MC=function(t,e){if(!Buffer.isBuffer(t))return Ik(t,e);var r=2*t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+r-1)},OC=function(t,e){if(!Buffer.isBuffer(t))return Mk(t,e);var r=t.readUInt32LE(e);return t.toString("utf16le",e+4,e+4+r)},RC=function(t,e){if(!Buffer.isBuffer(t))return Ok(t,e);var r=t.readUInt32LE(e);return t.toString("utf8",e+4,e+4+r)},fw=function(t,e){return Buffer.isBuffer(t)?t.readDoubleLE(e):Rk(t,e)},LC=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array}),typeof Eo<"u"&&function Lk(){dw=function(i,t,e){return Eo.utils.decode(1200,i.slice(t,e)).replace(Zd,"")},E1=function(i,t,e){return Eo.utils.decode(65001,i.slice(t,e))},DC=function(i,t){var e=ed(i,t);return e>0?Eo.utils.decode(K_,i.slice(t+4,t+4+e-1)):""},IC=function(i,t){var e=ed(i,t);return e>0?Eo.utils.decode(Ip,i.slice(t+4,t+4+e-1)):""},MC=function(i,t){var e=2*ed(i,t);return e>0?Eo.utils.decode(1200,i.slice(t+4,t+4+e-1)):""},OC=function(i,t){var e=ed(i,t);return e>0?Eo.utils.decode(1200,i.slice(t+4,t+4+e)):""},RC=function(i,t){var e=ed(i,t);return e>0?Eo.utils.decode(65001,i.slice(t+4,t+4+e)):""}}();var k1=function(i,t){return i[t]},cv=function(i,t){return 256*i[t+1]+i[t]},LO=function(i,t){var e=256*i[t+1]+i[t];return e<32768?e:-1*(65535-e+1)},ed=function(i,t){return i[t+3]*(1<<24)+(i[t+2]<<16)+(i[t+1]<<8)+i[t]},ey=function(i,t){return i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t]},PO=function(i,t){return i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3]};function Xx(i,t){var r,s,f,g,A,P,e="",o=[];switch(t){case"dbcs":if(P=this.l,Ka&&Buffer.isBuffer(this))e=this.slice(this.l,this.l+2*i).toString("utf16le");else for(A=0;A<i;++A)e+=String.fromCharCode(cv(this,P)),P+=2;i*=2;break;case"utf8":e=E1(this,this.l,this.l+i);break;case"utf16le":e=dw(this,this.l,this.l+(i*=2));break;case"wstr":if(!(typeof Eo<"u"))return Xx.call(this,i,"dbcs");e=Eo.utils.decode(Ip,this.slice(this.l,this.l+2*i)),i*=2;break;case"lpstr-ansi":e=DC(this,this.l),i=4+ed(this,this.l);break;case"lpstr-cp":e=IC(this,this.l),i=4+ed(this,this.l);break;case"lpwstr":e=MC(this,this.l),i=4+2*ed(this,this.l);break;case"lpp4":i=4+ed(this,this.l),e=OC(this,this.l),2&i&&(i+=2);break;case"8lpp4":i=4+ed(this,this.l),e=RC(this,this.l),3&i&&(i+=4-(3&i));break;case"cstr":for(i=0,e="";0!==(f=k1(this,this.l+i++));)o.push(Bx(f));e=o.join("");break;case"_wstr":for(i=0,e="";0!==(f=cv(this,this.l+i));)o.push(Bx(f)),i+=2;i+=2,e=o.join("");break;case"dbcs-cont":for(e="",P=this.l,A=0;A<i;++A){if(this.lens&&-1!==this.lens.indexOf(P))return f=k1(this,P),this.l=P+1,g=Xx.call(this,i-A,f?"dbcs-cont":"sbcs-cont"),o.join("")+g;o.push(Bx(cv(this,P))),P+=2}e=o.join(""),i*=2;break;case"cpstr":if(typeof Eo<"u"){e=Eo.utils.decode(Ip,this.slice(this.l,this.l+i));break}case"sbcs-cont":for(e="",P=this.l,A=0;A!=i;++A){if(this.lens&&-1!==this.lens.indexOf(P))return f=k1(this,P),this.l=P+1,g=Xx.call(this,i-A,f?"dbcs-cont":"sbcs-cont"),o.join("")+g;o.push(Bx(k1(this,P))),P+=1}e=o.join("");break;default:switch(i){case 1:return r=k1(this,this.l),this.l++,r;case 2:return r=("i"===t?LO:cv)(this,this.l),this.l+=2,r;case 4:case-4:return"i"!==t&&128&this[this.l+3]?(s=ed(this,this.l),this.l+=4,s):(r=(i>0?ey:PO)(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return s=8==i?fw(this,this.l):fw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;i=8;case 16:e=Tk(this,this.l,i)}}return this.l+=i,e}var FO=function(i,t,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24&255},BO=function(i,t,e){i[e]=255&t,i[e+1]=t>>8&255,i[e+2]=t>>16&255,i[e+3]=t>>24&255},NO=function(i,t,e){i[e]=255&t,i[e+1]=t>>>8&255};function zO(i,t,e){var r=0,s=0;if("dbcs"===e){for(s=0;s!=t.length;++s)NO(this,t.charCodeAt(s),this.l+2*s);r=2*t.length}else if("sbcs"===e){if(typeof Eo<"u"&&874==K_)for(s=0;s!=t.length;++s){var o=Eo.utils.encode(K_,t.charAt(s));this[this.l+s]=o[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=255&t.charCodeAt(s);r=t.length}else{if("hex"===e){for(;s<i;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}if("utf16le"===e){var f=Math.min(this.l+i,this.length);for(s=0;s<Math.min(t.length,i);++s){var g=t.charCodeAt(s);this[this.l++]=255&g,this[this.l++]=g>>8}for(;this.l<f;)this[this.l++]=0;return this}switch(i){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,this[this.l+1]=255&(t>>>=8);break;case 3:r=3,this[this.l]=255&t,this[this.l+1]=255&(t>>>=8),this[this.l+2]=255&(t>>>=8);break;case 4:r=4,FO(this,t,this.l);break;case 8:if(r=8,"f"===e){!function RO(i,t,e){var r=(t<0||1/t==-1/0?1:0)<<7,s=0,o=0,f=r?-t:t;isFinite(f)?0==f?s=o=0:(s=Math.floor(Math.log(f)/Math.LN2),o=f*Math.pow(2,52-s),s<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?s=-1022:(o-=Math.pow(2,52),s+=1023)):(s=2047,o=isNaN(t)?26985:0);for(var g=0;g<=5;++g,o/=256)i[e+g]=255&o;i[e+6]=(15&s)<<4|15&o,i[e+7]=s>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,BO(this,t,this.l)}}return this.l+=r,this}function Pk(i,t){var e=Tk(this,this.l,i.length>>1);if(e!==i)throw new Error(t+"Expected "+i+" saw "+e);this.l+=i.length>>1}function vd(i,t){i.l=t,i.read_shift=Xx,i.chk=Pk,i.write_shift=zO}function Kd(i,t){i.l+=t}function Bn(i){var t=Qv(i);return vd(t,0),t}function Mf(){var i=[],t=Ka?256:2048,e=function(P){var z=Bn(P);return vd(z,0),z},r=e(t),s=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&i.push(r),r=null)},o=function(P){return r&&P<r.length-r.l?r:(s(),r=e(Math.max(P+1,t)))};return{next:o,push:function(P){s(),null==(r=P).l&&(r.l=r.length),o(t)},end:function(){return s(),Jh(i)},_bufs:i}}function ir(i,t,e,r){var o,s=+t;if(!isNaN(s)){r||(r=db[s].p||(e||[]).length||0),o=1+(s>=128?1:0)+1,r>=128&&++o,r>=16384&&++o,r>=2097152&&++o;var f=i.next(o);s<=127?f.write_shift(1,s):(f.write_shift(1,128+(127&s)),f.write_shift(1,s>>7));for(var g=0;4!=g;++g){if(!(r>=128)){f.write_shift(1,r);break}f.write_shift(1,128+(127&r)),r>>=7}r>0&&LC(e)&&i.push(e)}}function Zx(i,t,e){var r=Il(i);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!e||e.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Fk(i,t,e){var r=Il(i);return r.s=Zx(r.s,t.s,e),r.e=Zx(r.e,t.s,e),r}function qx(i,t){if(i.cRel&&i.c<0)for(i=Il(i);i.c<0;)i.c+=t>8?16384:256;if(i.rRel&&i.r<0)for(i=Il(i);i.r<0;)i.r+=t>8?1048576:t>5?65536:16384;var e=ga(i);return!i.cRel&&null!=i.cRel&&(e=function HO(i){return i.replace(/^([A-Z])/,"$$$1")}(e)),!i.rRel&&null!=i.rRel&&(e=function YO(i){return i.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(e)),e}function PC(i,t){return 0!=i.s.r||i.s.rRel||i.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||i.e.rRel?0!=i.s.c||i.s.cRel||i.e.c!=(t.biff>=12?16383:255)||i.e.cRel?qx(i.s,t.biff)+":"+qx(i.e,t.biff):(i.s.rRel?"":"$")+_u(i.s.r)+":"+(i.e.rRel?"":"$")+_u(i.e.r):(i.s.cRel?"":"$")+uc(i.s.c)+":"+(i.e.cRel?"":"$")+uc(i.e.c)}function FC(i){return parseInt(function GO(i){return i.replace(/\$(\d+)$/,"$1")}(i),10)-1}function _u(i){return""+(i+1)}function BC(i){for(var t=function VO(i){return i.replace(/^\$([A-Z])/,"$1")}(i),e=0,r=0;r!==t.length;++r)e=26*e+t.charCodeAt(r)-64;return e-1}function uc(i){if(i<0)throw new Error("invalid column "+i);var t="";for(++i;i;i=Math.floor((i-1)/26))t=String.fromCharCode((i-1)%26+65)+t;return t}function Hu(i){for(var t=0,e=0,r=0;r<i.length;++r){var s=i.charCodeAt(r);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(e=26*e+(s-64))}return{c:e-1,r:t-1}}function ga(i){for(var t=i.c+1,e="";t;t=(t-1)/26|0)e=String.fromCharCode((t-1)%26+65)+e;return e+(i.r+1)}function Of(i){var t=i.indexOf(":");return-1==t?{s:Hu(i),e:Hu(i)}:{s:Hu(i.slice(0,t)),e:Hu(i.slice(t+1))}}function Fa(i,t){return typeof t>"u"||"number"==typeof t?Fa(i.s,i.e):("string"!=typeof i&&(i=ga(i)),"string"!=typeof t&&(t=ga(t)),i==t?i:i+":"+t)}function fo(i){var t={s:{c:0,r:0},e:{c:0,r:0}},e=0,r=0,s=0,o=i.length;for(e=0;r<o&&!((s=i.charCodeAt(r)-64)<1||s>26);++r)e=26*e+s;for(t.s.c=--e,e=0;r<o&&!((s=i.charCodeAt(r)-48)<0||s>9);++r)e=10*e+s;if(t.s.r=--e,r===o||10!=s)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,e=0;r!=o&&!((s=i.charCodeAt(r)-64)<1||s>26);++r)e=26*e+s;for(t.e.c=--e,e=0;r!=o&&!((s=i.charCodeAt(r)-48)<0||s>9);++r)e=10*e+s;return t.e.r=--e,t}function qg(i,t,e){return null==i||null==i.t||"z"==i.t?"":void 0!==i.w?i.w:("d"==i.t&&!i.z&&e&&e.dateNF&&(i.z=e.dateNF),"e"==i.t?hv[i.v]||i.v:function Bk(i,t){var e="d"==i.t&&t instanceof Date;if(null!=i.z)try{return i.w=Rp(i.z,e?Qh(t):t)}catch{}try{return i.w=Rp((i.XF||{}).numFmtId||(e?14:0),e?Qh(t):t)}catch{return""+t}}(i,null==t?i.v:t))}function s_(i,t){var e=t&&t.sheet?t.sheet:"Sheet1",r={};return r[e]=i,{SheetNames:[e],Sheets:r}}function Nk(i,t,e){var r=e||{},s=i?Array.isArray(i):r.dense;null!=pu&&null==s&&(s=pu);var o=i||(s?[]:{}),f=0,g=0;if(o&&null!=r.origin){if("number"==typeof r.origin)f=r.origin;else{var A="string"==typeof r.origin?Hu(r.origin):r.origin;f=A.r,g=A.c}o["!ref"]||(o["!ref"]="A1:A1")}var P={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var z=fo(o["!ref"]);P.s.c=z.s.c,P.s.r=z.s.r,P.e.c=Math.max(P.e.c,z.e.c),P.e.r=Math.max(P.e.r,z.e.r),-1==f&&(P.e.r=f=z.e.r+1)}for(var ie=0;ie!=t.length;++ie)if(t[ie]){if(!Array.isArray(t[ie]))throw new Error("aoa_to_sheet expects an array of arrays");for(var se=0;se!=t[ie].length;++se)if(!(typeof t[ie][se]>"u")){var oe={v:t[ie][se]},_e=f+ie,he=g+se;if(P.s.r>_e&&(P.s.r=_e),P.s.c>he&&(P.s.c=he),P.e.r<_e&&(P.e.r=_e),P.e.c<he&&(P.e.c=he),!t[ie][se]||"object"!=typeof t[ie][se]||Array.isArray(t[ie][se])||t[ie][se]instanceof Date)if(Array.isArray(oe.v)&&(oe.f=t[ie][se][1],oe.v=oe.v[0]),null===oe.v)if(oe.f)oe.t="n";else if(r.nullError)oe.t="e",oe.v=0;else{if(!r.sheetStubs)continue;oe.t="z"}else"number"==typeof oe.v?oe.t="n":"boolean"==typeof oe.v?oe.t="b":oe.v instanceof Date?(oe.z=r.dateNF||sa[14],r.cellDates?(oe.t="d",oe.w=Rp(oe.z,Qh(oe.v))):(oe.t="n",oe.v=Qh(oe.v),oe.w=Rp(oe.z,oe.v))):oe.t="s";else oe=t[ie][se];if(s)o[_e]||(o[_e]=[]),o[_e][he]&&o[_e][he].z&&(oe.z=o[_e][he].z),o[_e][he]=oe;else{var Ae=ga({c:he,r:_e});o[Ae]&&o[Ae].z&&(oe.z=o[Ae].z),o[Ae]=oe}}}return P.s.c<1e7&&(o["!ref"]=Fa(P)),o}function T1(i,t){return Nk(null,i,t)}function cg(i,t){return t||(t=Bn(4)),t.write_shift(4,i),t}function Jd(i){var t=i.read_shift(4);return 0===t?"":i.read_shift(t,"dbcs")}function td(i,t){var e=!1;return null==t&&(e=!0,t=Bn(4+2*i.length)),t.write_shift(4,i.length),i.length>0&&t.write_shift(0,i,"dbcs"),e?t.slice(0,t.l):t}function WO(i){return{ich:i.read_shift(2),ifnt:i.read_shift(2)}}function NC(i,t){var e=i.l,r=i.read_shift(1),s=Jd(i),o=[],f={t:s,h:s};if(1&r){for(var g=i.read_shift(4),A=0;A!=g;++A)o.push(WO(i));f.r=o}else f.r=[{ich:0,ifnt:0}];return i.l=e+t,f}var ZO=NC;function _m(i){var t=i.read_shift(4),e=i.read_shift(2);return e+=i.read_shift(1)<<16,i.l++,{c:t,iStyleRef:e}}function ty(i,t){return null==t&&(t=Bn(8)),t.write_shift(-4,i.c),t.write_shift(3,i.iStyleRef||i.s),t.write_shift(1,0),t}function iy(i){var t=i.read_shift(2);return t+=i.read_shift(1)<<16,i.l++,{c:-1,iStyleRef:t}}function ny(i,t){return null==t&&(t=Bn(4)),t.write_shift(3,i.iStyleRef||i.s),t.write_shift(1,0),t}var KO=Jd,zk=td;function zC(i){var t=i.read_shift(4);return 0===t||4294967295===t?"":i.read_shift(t,"dbcs")}function pw(i,t){var e=!1;return null==t&&(e=!0,t=Bn(127)),t.write_shift(4,i.length>0?i.length:4294967295),i.length>0&&t.write_shift(0,i,"dbcs"),e?t.slice(0,t.l):t}var JO=Jd,YC=zC,GC=pw;function HC(i){var t=i.slice(i.l,i.l+4),e=1&t[0],r=2&t[0];i.l+=4;var s=0===r?fw([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):ey(t,0)>>2;return e?s/100:s}function Yk(i,t){null==t&&(t=Bn(4));var e=0,r=0,s=100*i;if(i==(0|i)&&i>=-(1<<29)&&i<1<<29?r=1:s==(0|s)&&s>=-(1<<29)&&s<1<<29&&(r=1,e=1),!r)throw new Error("unsupported RkNumber "+i);t.write_shift(-4,((e?s:i)<<2)+(e+2))}function Gk(i){var t={s:{},e:{}};return t.s.r=i.read_shift(4),t.e.r=i.read_shift(4),t.s.c=i.read_shift(4),t.e.c=i.read_shift(4),t}var ry=Gk,S1=function QO(i,t){return t||(t=Bn(16)),t.write_shift(4,i.s.r),t.write_shift(4,i.e.r),t.write_shift(4,i.s.c),t.write_shift(4,i.e.c),t};function Qd(i){if(i.length-i.l<8)throw"XLS Xnum Buffer underflow";return i.read_shift(8,"f")}function sy(i,t){return(t||Bn(8)).write_shift(8,i,"f")}function mw(i,t){if(t||(t=Bn(8)),!i||i.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=i.index?(t.write_shift(1,2),t.write_shift(1,i.index)):null!=i.theme?(t.write_shift(1,6),t.write_shift(1,i.theme)):(t.write_shift(1,5),t.write_shift(1,0));var e=i.tint||0;if(e>0?e*=32767:e<0&&(e*=32768),t.write_shift(2,e),i.rgb&&null==i.theme){var r=i.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var UC={1:{n:"CodePage",t:2},2:{n:"Category",t:80},3:{n:"PresentationFormat",t:80},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:80},15:{n:"Company",t:80},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:80},27:{n:"ContentStatus",t:80},28:{n:"Language",t:80},29:{n:"Version",t:80},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},jC={1:{n:"CodePage",t:2},2:{n:"Title",t:80},3:{n:"Subject",t:80},4:{n:"Author",t:80},5:{n:"Keywords",t:80},6:{n:"Comments",t:80},7:{n:"Template",t:80},8:{n:"LastAuthor",t:80},9:{n:"RevNumber",t:80},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:80},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function hR(i){return i.map(function(t){return[t>>16&255,t>>8&255,255&t]})}var ay=Il(hR([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),hv={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},WC={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},yw={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Wk(i,t){var s,e=function dO(i){for(var t=[],e=mu(i),r=0;r!==e.length;++r)null==t[i[e[r]]]&&(t[i[e[r]]]=[]),t[i[e[r]]].push(e[r]);return t}(WC),r=[];r[r.length]=vu,r[r.length]=Ar("Types",null,{xmlns:oh.CT,"xmlns:xsd":oh.xsd,"xmlns:xsi":oh.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(A){return Ar("Default",null,{Extension:A[0],ContentType:A[1]})}));var o=function(A){i[A]&&i[A].length>0&&(r[r.length]=Ar("Override",null,{PartName:("/"==(s=i[A][0])[0]?"":"/")+s,ContentType:yw[A][t.bookType]||yw[A].xlsx}))},f=function(A){(i[A]||[]).forEach(function(P){r[r.length]=Ar("Override",null,{PartName:("/"==P[0]?"":"/")+P,ContentType:yw[A][t.bookType]||yw[A].xlsx})})},g=function(A){(i[A]||[]).forEach(function(P){r[r.length]=Ar("Override",null,{PartName:("/"==P[0]?"":"/")+P,ContentType:e[A][0]})})};return o("workbooks"),f("sheets"),f("charts"),g("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(g),g("vba"),g("comments"),g("threadedcomments"),g("drawings"),f("metadata"),g("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Ba={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Kx(i){var t=i.lastIndexOf("/");return i.slice(0,t+1)+"_rels/"+i.slice(t+1)+".rels"}function A1(i){var t=[vu,Ar("Relationships",null,{xmlns:oh.RELS})];return mu(i["!id"]).forEach(function(e){t[t.length]=Ar("Relationship",null,i["!id"][e])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Zo(i,t,e,r,s,o){if(s||(s={}),i["!id"]||(i["!id"]={}),i["!idx"]||(i["!idx"]=1),t<0)for(t=i["!idx"];i["!id"]["rId"+t];++t);if(i["!idx"]=t+1,s.Id="rId"+t,s.Type=r,s.Target=e,o?s.TargetMode=o:[Ba.HLINK,Ba.XPATH,Ba.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),i["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return i["!id"][s.Id]=s,i[("/"+s.Target).replace("//","/")]=s,t}function $k(i,t,e){return['  <rdf:Description rdf:about="'+i+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(e||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function _R(i,t){return['  <rdf:Description rdf:about="'+i+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function Xk(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Fx.version+"</meta:generator></office:meta></office:document-meta>"}var dv=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function XC(i,t,e,r,s){null!=s[i]||null==t||""===t||(s[i]=t,t=nl(t),r[r.length]=e?Ar(i,t,e):gd(i,t))}function qk(i,t){var e=t||{},r=[vu,Ar("cp:coreProperties",null,{"xmlns:cp":oh.CORE_PROPS,"xmlns:dc":oh.dc,"xmlns:dcterms":oh.dcterms,"xmlns:dcmitype":oh.dcmitype,"xmlns:xsi":oh.xsi})],s={};if(!i&&!e.Props)return r.join("");i&&(null!=i.CreatedDate&&XC("dcterms:created","string"==typeof i.CreatedDate?i.CreatedDate:SC(i.CreatedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),null!=i.ModifiedDate&&XC("dcterms:modified","string"==typeof i.ModifiedDate?i.ModifiedDate:SC(i.ModifiedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var o=0;o!=dv.length;++o){var f=dv[o],g=e.Props&&null!=e.Props[f[1]]?e.Props[f[1]]:i?i[f[1]]:null;!0===g?g="1":!1===g?g="0":"number"==typeof g&&(g=String(g)),null!=g&&XC(f[0],g,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var oy=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Kk=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Qk(i){var t=[],e=Ar;return i||(i={}),i.Application="SheetJS",t[t.length]=vu,t[t.length]=Ar("Properties",null,{xmlns:oh.EXT_PROPS,"xmlns:vt":oh.vt}),oy.forEach(function(r){if(void 0!==i[r[1]]){var s;switch(r[2]){case"string":s=nl(String(i[r[1]]));break;case"bool":s=i[r[1]]?"true":"false"}void 0!==s&&(t[t.length]=e(r[0],s))}}),t[t.length]=e("HeadingPairs",e("vt:vector",e("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+e("vt:variant",e("vt:i4",String(i.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=e("TitlesOfParts",e("vt:vector",i.SheetNames.map(function(r){return"<vt:lpstr>"+nl(r)+"</vt:lpstr>"}).join(""),{size:i.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function eT(i){var t=[vu,Ar("Properties",null,{xmlns:oh.CUST_PROPS,"xmlns:vt":oh.vt})];if(!i)return t.join("");var e=1;return mu(i).forEach(function(s){++e,t[t.length]=Ar("property",function MO(i,t){switch(typeof i){case"string":var e=Ar("vt:lpwstr",nl(i));return t&&(e=e.replace(/&quot;/g,"_x0022_")),e;case"number":return Ar((0|i)==i?"vt:i4":"vt:r8",nl(String(i)));case"boolean":return Ar("vt:bool",i?"true":"false")}if(i instanceof Date)return Ar("vt:filetime",SC(i));throw new Error("Unable to serialize "+i)}(i[s],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e,name:nl(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ZC={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function aT(i,t){var e=Bn(4),r=Bn(4);switch(e.write_shift(4,80==i?31:i),i){case 3:r.write_shift(-4,t);break;case 5:(r=Bn(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function SR(i){var e=("string"==typeof i?new Date(Date.parse(i)):i).getTime()/1e3+11644473600,r=e%Math.pow(2,32),s=(e-r)/Math.pow(2,32);s*=1e7;var o=(r*=1e7)/Math.pow(2,32)|0;o>0&&(r%=Math.pow(2,32),s+=o);var f=Bn(8);return f.write_shift(4,r),f.write_shift(4,s),f}(t);break;case 31:case 80:for((r=Bn(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+i+" "+t)}return Jh([e,r])}var lT=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function LR(i){switch(typeof i){case"boolean":return 11;case"number":return(0|i)==i?3:5;case"string":return 31;case"object":if(i instanceof Date)return 64}return-1}function cT(i,t,e){var r=Bn(8),s=[],o=[],f=8,g=0,A=Bn(8),P=Bn(8);if(A.write_shift(4,2),A.write_shift(4,1200),P.write_shift(4,1),o.push(A),s.push(P),f+=8+A.length,!t){(P=Bn(8)).write_shift(4,0),s.unshift(P);var z=[Bn(4)];for(z[0].write_shift(4,i.length),g=0;g<i.length;++g){var ie=i[g][0];for((A=Bn(8+2*(ie.length+1)+(ie.length%2?0:2))).write_shift(4,g+2),A.write_shift(4,ie.length+1),A.write_shift(0,ie,"dbcs");A.l!=A.length;)A.write_shift(1,0);z.push(A)}A=Jh(z),o.unshift(A),f+=8+A.length}for(g=0;g<i.length;++g)if((!t||t[i[g][0]])&&!(lT.indexOf(i[g][0])>-1||Kk.indexOf(i[g][0])>-1)&&null!=i[g][1]){var se=i[g][1],oe=0;if(t){var _e=e[oe=+t[i[g][0]]];if("version"==_e.p&&"string"==typeof se){var he=se.split(".");se=(+he[0]<<16)+(+he[1]||0)}A=aT(_e.t,se)}else{var Ae=LR(se);-1==Ae&&(Ae=31,se=String(se)),A=aT(Ae,se)}o.push(A),(P=Bn(8)).write_shift(4,t?oe:2+g),s.push(P),f+=8+A.length}var Ke=8*(o.length+1);for(g=0;g<o.length;++g)s[g].write_shift(4,Ke),Ke+=o[g].length;return r.write_shift(4,f),r.write_shift(4,o.length),Jh([r].concat(s).concat(o))}function hT(i,t,e,r,s,o){var f=Bn(s?68:48),g=[f];f.write_shift(2,65534),f.write_shift(2,0),f.write_shift(4,842412599),f.write_shift(16,Gs.utils.consts.HEADER_CLSID,"hex"),f.write_shift(4,s?2:1),f.write_shift(16,t,"hex"),f.write_shift(4,s?68:48);var A=cT(i,e,r);if(g.push(A),s){var P=cT(s,null,null);f.write_shift(16,o,"hex"),f.write_shift(4,68+A.length),g.push(P)}return Jh(g)}function Rf(i,t){return t||(t=Bn(2)),t.write_shift(2,+!!i),t}function lh(i){return i.read_shift(2,"u")}function ym(i,t){return t||(t=Bn(2)),t.write_shift(2,i),t}function fT(i,t,e){return e||(e=Bn(2)),e.write_shift(1,"e"==t?+i:+!!i),e.write_shift(1,"e"==t?1:0),e}function Qx(i,t,e){var r=i.read_shift(e&&e.biff>=12?2:1),s="sbcs-cont",o=Ip;e&&e.biff>=8&&(Ip=1200),e&&8!=e.biff?12==e.biff&&(s="wstr"):i.read_shift(1)&&(s="dbcs-cont"),e.biff>=2&&e.biff<=5&&(s="cpstr");var g=r?i.read_shift(r,s):"";return Ip=o,g}function zR(i){var t=i.t||"",r=Bn(3);r.write_shift(2,t.length),r.write_shift(1,1);var s=Bn(2*t.length);return s.write_shift(2*t.length,t,"utf16le"),Jh([r,s])}function pT(i,t,e){return e||(e=Bn(3+2*i.length)),e.write_shift(2,i.length),e.write_shift(1,1),e.write_shift(31,i,"utf16le"),e}function mT(i,t){t||(t=Bn(6+2*i.length)),t.write_shift(4,1+i.length);for(var e=0;e<i.length;++e)t.write_shift(2,i.charCodeAt(e));return t.write_shift(2,0),t}function jR(i){var t=Bn(512),e=0,r=i.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var s=r.indexOf("#"),o=s>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3}t.write_shift(4,2),t.write_shift(4,o);var f=[8,6815827,6619237,4849780,83];for(e=0;e<f.length;++e)t.write_shift(4,f[e]);if(28==o)mT(r=r.slice(1),t);else if(2&o){for(f="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),e=0;e<f.length;++e)t.write_shift(1,parseInt(f[e],16));var g=s>-1?r.slice(0,s):r;for(t.write_shift(4,2*(g.length+1)),e=0;e<g.length;++e)t.write_shift(2,g.charCodeAt(e));t.write_shift(2,0),8&o&&mT(s>-1?r.slice(s+1):"",t)}else{for(f="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),e=0;e<f.length;++e)t.write_shift(1,parseInt(f[e],16));for(var A=0;"../"==r.slice(3*A,3*A+3)||"..\\"==r.slice(3*A,3*A+3);)++A;for(t.write_shift(2,A),t.write_shift(4,r.length-3*A+1),e=0;e<r.length-3*A;++e)t.write_shift(1,255&r.charCodeAt(e+3*A));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),e=0;e<6;++e)t.write_shift(4,0)}return t.slice(0,t.l)}function uy(i,t,e,r){return r||(r=Bn(6)),r.write_shift(2,i),r.write_shift(2,t),r.write_shift(2,e||0),r}function XR(i,t,e){var r=e.biff>8?4:2;return[i.read_shift(r),i.read_shift(r,"i"),i.read_shift(r,"i")]}function ww(i){var t=i.read_shift(2),e=i.read_shift(2);return{s:{c:i.read_shift(2),r:t},e:{c:i.read_shift(2),r:e}}}function yT(i,t){return t||(t=Bn(8)),t.write_shift(2,i.s.r),t.write_shift(2,i.e.r),t.write_shift(2,i.s.c),t.write_shift(2,i.e.c),t}function QC(i,t,e){var r=1536,s=16;switch(e.bookType){case"biff8":case"xla":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;default:throw new Error("unsupported BIFF version")}var o=Bn(s);return o.write_shift(2,r),o.write_shift(2,t),s>4&&o.write_shift(2,29282),s>6&&o.write_shift(2,1997),s>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function aL(i,t){var e=!t||t.biff>=8?2:1,r=Bn(8+e*i.name.length);r.write_shift(4,i.pos),r.write_shift(1,i.hs||0),r.write_shift(1,i.dt),r.write_shift(1,i.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(e*i.name.length,i.name,t.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function kL(i,t,e,r){var s=e&&5==e.biff;r||(r=Bn(s?3+t.length:5+2*t.length)),r.write_shift(2,i),r.write_shift(s?1:2,t.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return null==o.l&&(o.l=o.length),o}function ET(i,t,e,r){var s=e&&5==e.biff;r||(r=Bn(s?16:20)),r.write_shift(2,0),i.style?(r.write_shift(2,i.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,i.numFmtId||0),r.write_shift(2,t<<4));var o=0;return i.numFmtId>0&&s&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function QL(i){var t=Bn(24),e=Hu(i[0]);t.write_shift(2,e.r),t.write_shift(2,e.r),t.write_shift(2,e.c),t.write_shift(2,e.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(r[s],16));return Jh([t,jR(i[1])])}function tP(i){var t=i[1].Tooltip,e=Bn(10+2*(t.length+1));e.write_shift(2,2048);var r=Hu(i[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var s=0;s<t.length;++s)e.write_shift(2,t.charCodeAt(s));return e.write_shift(2,0),e}var e2=function(){var i={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=lw({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(g,A){var P=A||{};P.dateNF||(P.dateNF="yyyymmdd");var z=T1(function e(g,A){var P=[],z=Qv(1);switch(A.type){case"base64":z=Op(Mp(g));break;case"binary":z=Op(g);break;case"buffer":case"array":z=g}vd(z,0);var ie=z.read_shift(1),se=!!(136&ie),oe=!1,_e=!1;switch(ie){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:oe=!0,se=!0;break;case 140:_e=!0;break;default:throw new Error("DBF Unsupported Version: "+ie.toString(16))}var he=0,Ae=521;2==ie&&(he=z.read_shift(2)),z.l+=3,2!=ie&&(he=z.read_shift(4)),he>1048576&&(he=1e6),2!=ie&&(Ae=z.read_shift(2));var Ke=z.read_shift(2),ct=A.codepage||1252;2!=ie&&(z.l+=16,z.read_shift(1),0!==z[z.l]&&(ct=i[z[z.l]]),z.l+=1,z.l+=2),_e&&(z.l+=36);for(var pt=[],mi={},Fi=Math.min(z.length,2==ie?521:Ae-10-(oe?264:0)),Ki=_e?32:11;z.l<Fi&&13!=z[z.l];)switch(mi={},mi.name=Eo.utils.decode(ct,z.slice(z.l,z.l+Ki)).replace(/[\u0000\r\n].*$/g,""),z.l+=Ki,mi.type=String.fromCharCode(z.read_shift(1)),2!=ie&&!_e&&(mi.offset=z.read_shift(4)),mi.len=z.read_shift(1),2==ie&&(mi.offset=z.read_shift(2)),mi.dec=z.read_shift(1),mi.name.length&&pt.push(mi),2!=ie&&(z.l+=_e?13:14),mi.type){case"B":(!oe||8!=mi.len)&&A.WTF&&console.log("Skipping "+mi.name+":"+mi.type);break;case"G":case"P":A.WTF&&console.log("Skipping "+mi.name+":"+mi.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+mi.type)}if(13!==z[z.l]&&(z.l=Ae-1),13!==z.read_shift(1))throw new Error("DBF Terminator not found "+z.l+" "+z[z.l]);z.l=Ae;var ni=0,Ti=0;for(P[0]=[],Ti=0;Ti!=pt.length;++Ti)P[0][Ti]=pt[Ti].name;for(;he-- >0;)if(42!==z[z.l])for(++z.l,P[++ni]=[],Ti=0,Ti=0;Ti!=pt.length;++Ti){var Bi=z.slice(z.l,z.l+pt[Ti].len);z.l+=pt[Ti].len,vd(Bi,0);var Cn=Eo.utils.decode(ct,Bi);switch(pt[Ti].type){case"C":Cn.trim().length&&(P[ni][Ti]=Cn.replace(/\s+$/,""));break;case"D":P[ni][Ti]=8===Cn.length?new Date(+Cn.slice(0,4),+Cn.slice(4,6)-1,+Cn.slice(6,8)):Cn;break;case"F":P[ni][Ti]=parseFloat(Cn.trim());break;case"+":case"I":P[ni][Ti]=_e?2147483648^Bi.read_shift(-4,"i"):Bi.read_shift(4,"i");break;case"L":switch(Cn.trim().toUpperCase()){case"Y":case"T":P[ni][Ti]=!0;break;case"N":case"F":P[ni][Ti]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Cn+"|")}break;case"M":if(!se)throw new Error("DBF Unexpected MEMO for type "+ie.toString(16));P[ni][Ti]="##MEMO##"+(_e?parseInt(Cn.trim(),10):Bi.read_shift(4));break;case"N":(Cn=Cn.replace(/\u0000/g,"").trim())&&"."!=Cn&&(P[ni][Ti]=+Cn||0);break;case"@":P[ni][Ti]=new Date(Bi.read_shift(-8,"f")-621356832e5);break;case"T":P[ni][Ti]=new Date(864e5*(Bi.read_shift(4)-2440588)+Bi.read_shift(4));break;case"Y":P[ni][Ti]=Bi.read_shift(4,"i")/1e4+Bi.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":P[ni][Ti]=-Bi.read_shift(-8,"f");break;case"B":if(oe&&8==pt[Ti].len){P[ni][Ti]=Bi.read_shift(8,"f");break}case"G":case"P":Bi.l+=pt[Ti].len;break;case"0":if("_NullFlags"===pt[Ti].name)break;default:throw new Error("DBF Unsupported data type "+pt[Ti].type)}}else z.l+=Ke;if(2!=ie&&z.l<z.length&&26!=z[z.l++])throw new Error("DBF EOF Marker missing "+(z.l-1)+" of "+z.length+" "+z[z.l-1].toString(16));return A&&A.sheetRows&&(P=P.slice(0,A.sheetRows)),A.DBF=pt,P}(g,P),P);return z["!cols"]=P.DBF.map(function(ie){return{wch:ie.len,DBF:ie}}),delete P.DBF,z}var o={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function s(g,A){try{return s_(r(g,A),A)}catch(P){if(A&&A.WTF)throw P}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function f(g,A){var P=A||{};if(+P.codepage>=0&&mm(+P.codepage),"string"==P.type)throw new Error("Cannot write DBF to JS string");var z=Mf(),ie=Fw(g,{header:1,raw:!0,cellDates:!0}),se=ie[0],oe=ie.slice(1),_e=g["!cols"]||[],he=0,Ae=0,Ke=0,ct=1;for(he=0;he<se.length;++he)if(((_e[he]||{}).DBF||{}).name)se[he]=_e[he].DBF.name,++Ke;else if(null!=se[he]){if(++Ke,"number"==typeof se[he]&&(se[he]=se[he].toString(10)),"string"!=typeof se[he])throw new Error("DBF Invalid column name "+se[he]+" |"+typeof se[he]+"|");if(se.indexOf(se[he])!==he)for(Ae=0;Ae<1024;++Ae)if(-1==se.indexOf(se[he]+"_"+Ae)){se[he]+="_"+Ae;break}}var pt=fo(g["!ref"]),mi=[],Fi=[],Ki=[];for(he=0;he<=pt.e.c-pt.s.c;++he){var ni="",Ti="",Bi=0,Cn=[];for(Ae=0;Ae<oe.length;++Ae)null!=oe[Ae][he]&&Cn.push(oe[Ae][he]);if(0!=Cn.length&&null!=se[he]){for(Ae=0;Ae<Cn.length;++Ae){switch(typeof Cn[Ae]){case"number":Ti="B";break;case"string":default:Ti="C";break;case"boolean":Ti="L";break;case"object":Ti=Cn[Ae]instanceof Date?"D":"C"}Bi=Math.max(Bi,String(Cn[Ae]).length),ni=ni&&ni!=Ti?"C":Ti}Bi>250&&(Bi=250),"C"==(Ti=((_e[he]||{}).DBF||{}).type)&&_e[he].DBF.len>Bi&&(Bi=_e[he].DBF.len),"B"==ni&&"N"==Ti&&(ni="N",Ki[he]=_e[he].DBF.dec,Bi=_e[he].DBF.len),Fi[he]="C"==ni||"N"==Ti?Bi:o[ni]||0,ct+=Fi[he],mi[he]=ni}else mi[he]="?"}var Mn=z.next(32);for(Mn.write_shift(4,318902576),Mn.write_shift(4,oe.length),Mn.write_shift(2,296+32*Ke),Mn.write_shift(2,ct),he=0;he<4;++he)Mn.write_shift(4,0);for(Mn.write_shift(4,0|(+t[K_]||3)<<8),he=0,Ae=0;he<se.length;++he)if(null!=se[he]){var Zi=z.next(32),Cr=(se[he].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);Zi.write_shift(1,Cr,"sbcs"),Zi.write_shift(1,"?"==mi[he]?"C":mi[he],"sbcs"),Zi.write_shift(4,Ae),Zi.write_shift(1,Fi[he]||o[mi[he]]||0),Zi.write_shift(1,Ki[he]||0),Zi.write_shift(1,2),Zi.write_shift(4,0),Zi.write_shift(1,0),Zi.write_shift(4,0),Zi.write_shift(4,0),Ae+=Fi[he]||o[mi[he]]||0}var ns=z.next(264);for(ns.write_shift(4,13),he=0;he<65;++he)ns.write_shift(4,0);for(he=0;he<oe.length;++he){var Gr=z.next(ct);for(Gr.write_shift(1,0),Ae=0;Ae<se.length;++Ae)if(null!=se[Ae])switch(mi[Ae]){case"L":Gr.write_shift(1,null==oe[he][Ae]?63:oe[he][Ae]?84:70);break;case"B":Gr.write_shift(8,oe[he][Ae]||0,"f");break;case"N":var ta="0";for("number"==typeof oe[he][Ae]&&(ta=oe[he][Ae].toFixed(Ki[Ae]||0)),Ke=0;Ke<Fi[Ae]-ta.length;++Ke)Gr.write_shift(1,32);Gr.write_shift(1,ta,"sbcs");break;case"D":oe[he][Ae]?(Gr.write_shift(4,("0000"+oe[he][Ae].getFullYear()).slice(-4),"sbcs"),Gr.write_shift(2,("00"+(oe[he][Ae].getMonth()+1)).slice(-2),"sbcs"),Gr.write_shift(2,("00"+oe[he][Ae].getDate()).slice(-2),"sbcs")):Gr.write_shift(8,"00000000","sbcs");break;case"C":var ws=String(null!=oe[he][Ae]?oe[he][Ae]:"").slice(0,Fi[Ae]);for(Gr.write_shift(1,ws,"sbcs"),Ke=0;Ke<Fi[Ae]-ws.length;++Ke)Gr.write_shift(1,32)}}return z.next(1).write_shift(1,26),z.end()}}}(),OT=function(){var i={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+mu(i).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),e=function(se,oe){var _e=i[oe];return"number"==typeof _e?gC(_e):_e},r=function(se,oe,_e){var he=oe.charCodeAt(0)-32<<4|_e.charCodeAt(0)-48;return 59==he?se:gC(he)};function o(se,oe){var Mn,_e=se.split(/[\n\r]+/),he=-1,Ae=-1,Ke=0,ct=0,pt=[],mi=[],Fi=null,Ki={},ni=[],Ti=[],Bi=[],Cn=0;for(+oe.codepage>=0&&mm(+oe.codepage);Ke!==_e.length;++Ke){Cn=0;var Gr,Zi=_e[Ke].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,e),Cr=Zi.replace(/;;/g,"\0").split(";").map(function(_i){return _i.replace(/\u0000/g,";")});if(Zi.length>0)switch(Cr[0]){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==Cr[1].charAt(0)&&mi.push(Zi.slice(3).replace(/;;/g,";"));break;case"C":var ta=!1,ws=!1,Wa=!1,es=!1,aa=-1,rr=-1;for(ct=1;ct<Cr.length;++ct)switch(Cr[ct].charAt(0)){case"A":case"G":break;case"X":Ae=parseInt(Cr[ct].slice(1))-1,ws=!0;break;case"Y":for(he=parseInt(Cr[ct].slice(1))-1,ws||(Ae=0),Mn=pt.length;Mn<=he;++Mn)pt[Mn]=[];break;case"K":'"'===(Gr=Cr[ct].slice(1)).charAt(0)?Gr=Gr.slice(1,Gr.length-1):"TRUE"===Gr?Gr=!0:"FALSE"===Gr?Gr=!1:isNaN(lg(Gr))?isNaN(C1(Gr).getDate())||(Gr=Jc(Gr)):(Gr=lg(Gr),null!==Fi&&b1(Fi)&&(Gr=bC(Gr))),typeof Eo<"u"&&"string"==typeof Gr&&"string"!=(oe||{}).type&&(oe||{}).codepage&&(Gr=Eo.utils.decode(oe.codepage,Gr)),ta=!0;break;case"E":es=!0;var gi=M1(Cr[ct].slice(1),{r:he,c:Ae});pt[he][Ae]=[pt[he][Ae],gi];break;case"S":Wa=!0,pt[he][Ae]=[pt[he][Ae],"S5S"];break;case"R":aa=parseInt(Cr[ct].slice(1))-1;break;case"C":rr=parseInt(Cr[ct].slice(1))-1;break;default:if(oe&&oe.WTF)throw new Error("SYLK bad record "+Zi)}if(ta&&(pt[he][Ae]&&2==pt[he][Ae].length?pt[he][Ae][0]=Gr:pt[he][Ae]=Gr,Fi=null),Wa){if(es)throw new Error("SYLK shared formula cannot have own formula");var vn=aa>-1&&pt[aa][rr];if(!vn||!vn[1])throw new Error("SYLK shared formula cannot find base");pt[he][Ae][1]=QT(vn[1],{r:he-aa,c:Ae-rr})}break;case"F":var bi=0;for(ct=1;ct<Cr.length;++ct)switch(Cr[ct].charAt(0)){case"X":Ae=parseInt(Cr[ct].slice(1))-1,++bi;break;case"Y":for(he=parseInt(Cr[ct].slice(1))-1,Mn=pt.length;Mn<=he;++Mn)pt[Mn]=[];break;case"M":Cn=parseInt(Cr[ct].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":Fi=mi[parseInt(Cr[ct].slice(1))];break;case"W":for(Bi=Cr[ct].slice(1).split(" "),Mn=parseInt(Bi[0],10);Mn<=parseInt(Bi[1],10);++Mn)Cn=parseInt(Bi[2],10),Ti[Mn-1]=0===Cn?{hidden:!0}:{wch:Cn},o_(Ti[Mn-1]);break;case"C":Ti[Ae=parseInt(Cr[ct].slice(1))-1]||(Ti[Ae]={});break;case"R":ni[he=parseInt(Cr[ct].slice(1))-1]||(ni[he]={}),Cn>0?(ni[he].hpt=Cn,ni[he].hpx=Tw(Cn)):0===Cn&&(ni[he].hidden=!0);break;default:if(oe&&oe.WTF)throw new Error("SYLK bad record "+Zi)}bi<1&&(Fi=null);break;default:if(oe&&oe.WTF)throw new Error("SYLK bad record "+Zi)}}return ni.length>0&&(Ki["!rows"]=ni),Ti.length>0&&(Ki["!cols"]=Ti),oe&&oe.sheetRows&&(pt=pt.slice(0,oe.sheetRows)),[pt,Ki]}function f(se,oe){var _e=function s(se,oe){switch(oe.type){case"base64":return o(Mp(se),oe);case"binary":return o(se,oe);case"buffer":return o(Ka&&Buffer.isBuffer(se)?se.toString("binary"):e_(se),oe);case"array":return o(Q_(se),oe)}throw new Error("Unrecognized type "+oe.type)}(se,oe),Ae=_e[1],Ke=T1(_e[0],oe);return mu(Ae).forEach(function(ct){Ke[ct]=Ae[ct]}),Ke}function A(se,oe,_e,he){var Ae="C;Y"+(_e+1)+";X"+(he+1)+";K";switch(se.t){case"n":Ae+=se.v||0,se.f&&!se.F&&(Ae+=";E"+l2(se.f,{r:_e,c:he}));break;case"b":Ae+=se.v?"TRUE":"FALSE";break;case"e":Ae+=se.w||se.v;break;case"d":Ae+='"'+(se.w||se.v)+'"';break;case"s":Ae+='"'+se.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return Ae}return i["|"]=254,{to_workbook:function g(se,oe){return s_(f(se,oe),oe)},to_sheet:f,from_sheet:function ie(se,oe){var Ke,_e=["ID;PWXL;N;E"],he=[],Ae=fo(se["!ref"]),ct=Array.isArray(se),pt="\r\n";_e.push("P;PGeneral"),_e.push("F;P0;DG0G8;M255"),se["!cols"]&&function P(se,oe){oe.forEach(function(_e,he){var Ae="F;W"+(he+1)+" "+(he+1)+" ";_e.hidden?Ae+="0":("number"==typeof _e.width&&!_e.wpx&&(_e.wpx=ib(_e.width)),"number"==typeof _e.wpx&&!_e.wch&&(_e.wch=nb(_e.wpx)),"number"==typeof _e.wch&&(Ae+=Math.round(_e.wch)))," "!=Ae.charAt(Ae.length-1)&&se.push(Ae)})}(_e,se["!cols"]),se["!rows"]&&function z(se,oe){oe.forEach(function(_e,he){var Ae="F;";_e.hidden?Ae+="M0;":_e.hpt?Ae+="M"+20*_e.hpt+";":_e.hpx&&(Ae+="M"+20*rb(_e.hpx)+";"),Ae.length>2&&se.push(Ae+"R"+(he+1))})}(_e,se["!rows"]),_e.push("B;Y"+(Ae.e.r-Ae.s.r+1)+";X"+(Ae.e.c-Ae.s.c+1)+";D"+[Ae.s.c,Ae.s.r,Ae.e.c,Ae.e.r].join(" "));for(var mi=Ae.s.r;mi<=Ae.e.r;++mi)for(var Fi=Ae.s.c;Fi<=Ae.e.c;++Fi){var Ki=ga({r:mi,c:Fi});(Ke=ct?(se[mi]||[])[Fi]:se[Ki])&&(null!=Ke.v||Ke.f&&!Ke.F)&&he.push(A(Ke,0,mi,Fi))}return _e.join(pt)+pt+he.join(pt)+pt+"E"+pt}}}(),RT=function(){function t(o,f){for(var g=o.split("\n"),A=-1,P=-1,z=0,ie=[];z!==g.length;++z)if("BOT"!==g[z].trim()){if(!(A<0)){for(var se=g[z].trim().split(","),oe=se[0],_e=se[1],he=g[++z]||"";1&(he.match(/["]/g)||[]).length&&z<g.length-1;)he+="\n"+g[++z];switch(he=he.trim(),+oe){case-1:if("BOT"===he){ie[++A]=[],P=0;continue}if("EOD"!==he)throw new Error("Unrecognized DIF special command "+he);break;case 0:ie[A][P]="TRUE"===he||"FALSE"!==he&&(isNaN(lg(_e))?isNaN(C1(_e).getDate())?_e:Jc(_e):lg(_e)),++P;break;case 1:(he=(he=he.slice(1,he.length-1)).replace(/""/g,'"'))&&he.match(/^=".*"$/)&&(he=he.slice(2,-1)),ie[A][P++]=""!==he?he:null}if("EOD"===he)break}}else ie[++A]=[],P=0;return f&&f.sheetRows&&(ie=ie.slice(0,f.sheetRows)),ie}function e(o,f){return T1(function i(o,f){switch(f.type){case"base64":return t(Mp(o),f);case"binary":return t(o,f);case"buffer":return t(Ka&&Buffer.isBuffer(o)?o.toString("binary"):e_(o),f);case"array":return t(Q_(o),f)}throw new Error("Unrecognized type "+f.type)}(o,f),f)}return{to_workbook:function r(o,f){return s_(e(o,f),f)},to_sheet:e,from_sheet:function(){var o=function(A,P,z,ie,se){A.push(P),A.push(z+","+ie),A.push('"'+se.replace(/"/g,'""')+'"')},f=function(A,P,z,ie){A.push(P+","+z),A.push(1==P?'"'+ie.replace(/"/g,'""')+'"':ie)};return function(A){var ie,P=[],z=fo(A["!ref"]),se=Array.isArray(A);o(P,"TABLE",0,1,"sheetjs"),o(P,"VECTORS",0,z.e.r-z.s.r+1,""),o(P,"TUPLES",0,z.e.c-z.s.c+1,""),o(P,"DATA",0,0,"");for(var oe=z.s.r;oe<=z.e.r;++oe){f(P,-1,0,"BOT");for(var _e=z.s.c;_e<=z.e.c;++_e){var he=ga({r:oe,c:_e});if(ie=se?(A[oe]||[])[_e]:A[he])switch(ie.t){case"n":var Ae=ie.w;!Ae&&null!=ie.v&&(Ae=ie.v),null==Ae?f(P,1,0,ie.f&&!ie.F?"="+ie.f:""):f(P,0,Ae,"V");break;case"b":f(P,0,ie.v?1:0,ie.v?"TRUE":"FALSE");break;case"s":f(P,1,0,isNaN(ie.v)?ie.v:'="'+ie.v+'"');break;case"d":ie.w||(ie.w=Rp(ie.z||sa[14],Qh(Jc(ie.v)))),f(P,0,ie.w,"V");break;default:f(P,1,0,"")}else f(P,1,0,"")}}return f(P,-1,0,"EOD"),P.join("\r\n")}}()}}(),LT=function(){function i(ie){return ie.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(ie){return ie.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(ie,se){return T1(function e(ie,se){for(var oe=ie.split("\n"),_e=-1,he=-1,Ae=0,Ke=[];Ae!==oe.length;++Ae){var ct=oe[Ae].trim().split(":");if("cell"===ct[0]){var pt=Hu(ct[1]);if(Ke.length<=pt.r)for(_e=Ke.length;_e<=pt.r;++_e)Ke[_e]||(Ke[_e]=[]);switch(_e=pt.r,he=pt.c,ct[2]){case"t":Ke[_e][he]=i(ct[3]);break;case"v":Ke[_e][he]=+ct[3];break;case"vtf":var mi=ct[ct.length-1];case"vtc":Ke[_e][he]="nl"===ct[3]?!!+ct[4]:+ct[4],"vtf"==ct[2]&&(Ke[_e][he]=[Ke[_e][he],mi])}}}return se&&se.sheetRows&&(Ke=Ke.slice(0,se.sheetRows)),Ke}(ie,se),se)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),f=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",g=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),A="--SocialCalcSpreadsheetControlSave--";function P(ie){if(!ie||!ie["!ref"])return"";for(var _e,se=[],oe=[],he="",Ae=Of(ie["!ref"]),Ke=Array.isArray(ie),ct=Ae.s.r;ct<=Ae.e.r;++ct)for(var pt=Ae.s.c;pt<=Ae.e.c;++pt)if(he=ga({r:ct,c:pt}),(_e=Ke?(ie[ct]||[])[pt]:ie[he])&&null!=_e.v&&"z"!==_e.t){switch(oe=["cell",he,"t"],_e.t){case"s":case"str":oe.push(t(_e.v));break;case"n":_e.f?(oe[2]="vtf",oe[3]="n",oe[4]=_e.v,oe[5]=t(_e.f)):(oe[2]="v",oe[3]=_e.v);break;case"b":oe[2]="vt"+(_e.f?"f":"c"),oe[3]="nl",oe[4]=_e.v?"1":"0",oe[5]=t(_e.f||(_e.v?"TRUE":"FALSE"));break;case"d":var mi=Qh(Jc(_e.v));oe[2]="vtc",oe[3]="nd",oe[4]=""+mi,oe[5]=_e.w||Rp(_e.z||sa[14],mi);break;case"e":continue}se.push(oe.join(":"))}return se.push("sheet:c:"+(Ae.e.c-Ae.s.c+1)+":r:"+(Ae.e.r-Ae.s.r+1)+":tvf:1"),se.push("valueformat:1:text-wiki"),se.join("\n")}return{to_workbook:function s(ie,se){return s_(r(ie,se),se)},to_sheet:r,from_sheet:function z(ie){return[o,f,g,f,P(ie),A].join("\n")}}}(),D1=function(){function i(z,ie,se,oe,_e){_e.raw?ie[se][oe]=z:""===z||(ie[se][oe]="TRUE"===z||"FALSE"!==z&&(isNaN(lg(z))?isNaN(C1(z).getDate())?z:Jc(z):lg(z)))}var e={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(z){for(var ie={},se=!1,oe=0,_e=0;oe<z.length;++oe)34==(_e=z.charCodeAt(oe))?se=!se:!se&&_e in e&&(ie[_e]=(ie[_e]||0)+1);for(oe in _e=[],ie)Object.prototype.hasOwnProperty.call(ie,oe)&&_e.push([ie[oe],oe]);if(!_e.length)for(oe in ie=r)Object.prototype.hasOwnProperty.call(ie,oe)&&_e.push([ie[oe],oe]);return _e.sort(function(he,Ae){return he[0]-Ae[0]||r[he[1]]-r[Ae[1]]}),e[_e.pop()[1]]||44}function f(z,ie){return!ie||!ie.PRN||ie.FS||"sep="==z.slice(0,4)||z.indexOf("\t")>=0||z.indexOf(",")>=0||z.indexOf(";")>=0?function o(z,ie){var se=ie||{},oe="";null!=pu&&null==se.dense&&(se.dense=pu);var _e=se.dense?[]:{},he={s:{c:0,r:0},e:{c:0,r:0}};"sep="==z.slice(0,4)?13==z.charCodeAt(5)&&10==z.charCodeAt(6)?(oe=z.charAt(4),z=z.slice(7)):13==z.charCodeAt(5)||10==z.charCodeAt(5)?(oe=z.charAt(4),z=z.slice(6)):oe=s(z.slice(0,1024)):oe=se&&se.FS?se.FS:s(z.slice(0,1024));var Ae=0,Ke=0,ct=0,pt=0,mi=0,Fi=oe.charCodeAt(0),Ki=!1,ni=0,Ti=z.charCodeAt(0);z=z.replace(/\r\n/gm,"\n");var Bi=null!=se.dateNF?function oO(i){var t="number"==typeof i?sa[i]:i;return t=t.replace(tk,"(\\d+)"),new RegExp("^"+t+"$")}(se.dateNF):null;function Cn(){var Mn=z.slice(pt,mi),Zi={};if('"'==Mn.charAt(0)&&'"'==Mn.charAt(Mn.length-1)&&(Mn=Mn.slice(1,-1).replace(/""/g,'"')),0===Mn.length)Zi.t="z";else if(se.raw)Zi.t="s",Zi.v=Mn;else if(0===Mn.trim().length)Zi.t="s",Zi.v=Mn;else if(61==Mn.charCodeAt(0))34==Mn.charCodeAt(1)&&34==Mn.charCodeAt(Mn.length-1)?(Zi.t="s",Zi.v=Mn.slice(2,-1).replace(/""/g,'"')):function R4(i){return 1!=i.length}(Mn)?(Zi.t="n",Zi.f=Mn.slice(1)):(Zi.t="s",Zi.v=Mn);else if("TRUE"==Mn)Zi.t="b",Zi.v=!0;else if("FALSE"==Mn)Zi.t="b",Zi.v=!1;else if(isNaN(ct=lg(Mn)))if(!isNaN(C1(Mn).getDate())||Bi&&Mn.match(Bi)){Zi.z=se.dateNF||sa[14];var Cr=0;Bi&&Mn.match(Bi)&&(Mn=function lO(i,t,e){var r=-1,s=-1,o=-1,f=-1,g=-1,A=-1;(t.match(tk)||[]).forEach(function(ie,se){var oe=parseInt(e[se+1],10);switch(ie.toLowerCase().charAt(0)){case"y":r=oe;break;case"d":o=oe;break;case"h":f=oe;break;case"s":A=oe;break;case"m":f>=0?g=oe:s=oe}}),A>=0&&-1==g&&s>=0&&(g=s,s=-1);var P=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);7==P.length&&(P="0"+P),8==P.length&&(P="20"+P);var z=("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(g>=0?g:0)).slice(-2)+":"+("00"+(A>=0?A:0)).slice(-2);return-1==f&&-1==g&&-1==A?P:-1==r&&-1==s&&-1==o?z:P+"T"+z}(0,se.dateNF,Mn.match(Bi)||[]),Cr=1),se.cellDates?(Zi.t="d",Zi.v=Jc(Mn,Cr)):(Zi.t="n",Zi.v=Qh(Jc(Mn,Cr))),!1!==se.cellText&&(Zi.w=Rp(Zi.z,Zi.v instanceof Date?Qh(Zi.v):Zi.v)),se.cellNF||delete Zi.z}else Zi.t="s",Zi.v=Mn;else Zi.t="n",!1!==se.cellText&&(Zi.w=Mn),Zi.v=ct;if("z"==Zi.t||(se.dense?(_e[Ae]||(_e[Ae]=[]),_e[Ae][Ke]=Zi):_e[ga({c:Ke,r:Ae})]=Zi),Ti=z.charCodeAt(pt=mi+1),he.e.c<Ke&&(he.e.c=Ke),he.e.r<Ae&&(he.e.r=Ae),ni==Fi)++Ke;else if(Ke=0,++Ae,se.sheetRows&&se.sheetRows<=Ae)return!0}e:for(;mi<z.length;++mi)switch(ni=z.charCodeAt(mi)){case 34:34===Ti&&(Ki=!Ki);break;case Fi:case 10:case 13:if(!Ki&&Cn())break e}return mi-pt>0&&Cn(),_e["!ref"]=Fa(he),_e}(z,ie):T1(function t(z,ie){var se=ie||{},oe=[];if(!z||0===z.length)return oe;for(var _e=z.split(/[\r\n]/),he=_e.length-1;he>=0&&0===_e[he].length;)--he;for(var Ae=10,Ke=0,ct=0;ct<=he;++ct)-1==(Ke=_e[ct].indexOf(" "))?Ke=_e[ct].length:Ke++,Ae=Math.max(Ae,Ke);for(ct=0;ct<=he;++ct){oe[ct]=[];var pt=0;for(i(_e[ct].slice(0,Ae).trim(),oe,ct,pt,se),pt=1;pt<=(_e[ct].length-Ae)/10+1;++pt)i(_e[ct].slice(Ae+10*(pt-1),Ae+10*pt).trim(),oe,ct,pt,se)}return se.sheetRows&&(oe=oe.slice(0,se.sheetRows)),oe}(z,ie),ie)}function g(z,ie){var se="",oe="string"==ie.type?[0,0,0,0]:function k2(i,t){var e="";switch((t||{}).type||"base64"){case"buffer":case"array":return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]];case"base64":e=Mp(i.slice(0,12));break;case"binary":e=i;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3),e.charCodeAt(4),e.charCodeAt(5),e.charCodeAt(6),e.charCodeAt(7)]}(z,ie);switch(ie.type){case"base64":se=Mp(z);break;case"binary":case"string":se=z;break;case"buffer":se=65001==ie.codepage?z.toString("utf8"):ie.codepage&&typeof Eo<"u"?Eo.utils.decode(ie.codepage,z):Ka&&Buffer.isBuffer(z)?z.toString("binary"):e_(z);break;case"array":se=Q_(z);break;default:throw new Error("Unrecognized type "+ie.type)}return 239==oe[0]&&187==oe[1]&&191==oe[2]?se=cc(se.slice(3)):"string"!=ie.type&&"buffer"!=ie.type&&65001==ie.codepage?se=cc(se):"binary"==ie.type&&typeof Eo<"u"&&ie.codepage&&(se=Eo.utils.decode(ie.codepage,Eo.utils.encode(28591,se))),"socialcalc:version:"==se.slice(0,19)?LT.to_sheet("string"==ie.type?se:cc(se),ie):f(se,ie)}return{to_workbook:function A(z,ie){return s_(g(z,ie),ie)},to_sheet:g,from_sheet:function P(z){for(var oe,ie=[],se=fo(z["!ref"]),_e=Array.isArray(z),he=se.s.r;he<=se.e.r;++he){for(var Ae=[],Ke=se.s.c;Ke<=se.e.c;++Ke){var ct=ga({r:he,c:Ke});if((oe=_e?(z[he]||[])[Ke]:z[ct])&&null!=oe.v){for(var pt=(oe.w||(qg(oe),oe.w)||"").slice(0,10);pt.length<10;)pt+=" ";Ae.push(pt+(0===Ke?" ":""))}else Ae.push("          ")}ie.push(Ae.join(""))}return ie.join("\n")}}}(),hy=function(){function i(gi,vn,bi){if(gi){vd(gi,gi.l||0);for(var _i=bi.Enum||aa;gi.l<gi.length;){var Yn=gi.read_shift(2),Wr=_i[Yn]||_i[65535],yr=gi.read_shift(2),Er=gi.l+yr,sr=Wr.f&&Wr.f(gi,yr,bi);if(gi.l=Er,vn(sr,Wr,Yn))return}}}function e(gi,vn){if(!gi)return gi;var bi=vn||{};null!=pu&&null==bi.dense&&(bi.dense=pu);var _i=bi.dense?[]:{},Yn="Sheet1",Wr="",yr=0,Er={},sr=[],La=[],di={s:{r:0,c:0},e:{r:0,c:0}},Go=bi.sheetRows||0;if(0==gi[2]&&(8==gi[3]||9==gi[3])&&gi.length>=16&&5==gi[14]&&108===gi[15])throw new Error("Unsupported Works 3 for Mac file");if(2==gi[2])bi.Enum=aa,i(gi,function(Jr,Fc,_d){switch(_d){case 0:bi.vers=Jr,Jr>=4096&&(bi.qpro=!0);break;case 6:di=Jr;break;case 204:Jr&&(Wr=Jr);break;case 222:Wr=Jr;break;case 15:case 51:bi.qpro||(Jr[1].v=Jr[1].v.slice(1));case 13:case 14:case 16:14==_d&&112==(112&Jr[2])&&(15&Jr[2])>1&&(15&Jr[2])<15&&(Jr[1].z=bi.dateNF||sa[14],bi.cellDates&&(Jr[1].t="d",Jr[1].v=bC(Jr[1].v))),bi.qpro&&Jr[3]>yr&&(_i["!ref"]=Fa(di),Er[Yn]=_i,sr.push(Yn),_i=bi.dense?[]:{},di={s:{r:0,c:0},e:{r:0,c:0}},yr=Jr[3],Yn=Wr||"Sheet"+(yr+1),Wr="");var km=bi.dense?(_i[Jr[0].r]||[])[Jr[0].c]:_i[ga(Jr[0])];if(km){km.t=Jr[1].t,km.v=Jr[1].v,null!=Jr[1].z&&(km.z=Jr[1].z),null!=Jr[1].f&&(km.f=Jr[1].f);break}bi.dense?(_i[Jr[0].r]||(_i[Jr[0].r]=[]),_i[Jr[0].r][Jr[0].c]=Jr[1]):_i[ga(Jr[0])]=Jr[1]}},bi);else{if(26!=gi[2]&&14!=gi[2])throw new Error("Unrecognized LOTUS BOF "+gi[2]);bi.Enum=rr,14==gi[2]&&(bi.qpro=!0,gi.l=0),i(gi,function(Jr,Fc,_d){switch(_d){case 204:Yn=Jr;break;case 22:Jr[1].v=Jr[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Jr[3]>yr&&(_i["!ref"]=Fa(di),Er[Yn]=_i,sr.push(Yn),_i=bi.dense?[]:{},di={s:{r:0,c:0},e:{r:0,c:0}},Yn="Sheet"+((yr=Jr[3])+1)),Go>0&&Jr[0].r>=Go)break;bi.dense?(_i[Jr[0].r]||(_i[Jr[0].r]=[]),_i[Jr[0].r][Jr[0].c]=Jr[1]):_i[ga(Jr[0])]=Jr[1],di.e.c<Jr[0].c&&(di.e.c=Jr[0].c),di.e.r<Jr[0].r&&(di.e.r=Jr[0].r);break;case 27:Jr[14e3]&&(La[Jr[14e3][0]]=Jr[14e3][1]);break;case 1537:La[Jr[0]]=Jr[1],Jr[0]==yr&&(Yn=Jr[1])}},bi)}if(_i["!ref"]=Fa(di),Er[Wr||Yn]=_i,sr.push(Wr||Yn),!La.length)return{SheetNames:sr,Sheets:Er};for(var Ja={},Bo=[],Qa=0;Qa<La.length;++Qa)Er[sr[Qa]]?(Bo.push(La[Qa]||sr[Qa]),Ja[La[Qa]]=Er[La[Qa]]||Er[sr[Qa]]):(Bo.push(La[Qa]),Ja[La[Qa]]={"!ref":"A1"});return{SheetNames:Bo,Sheets:Ja}}function P(gi,vn,bi){var _i=[{c:0,r:0},{t:"n",v:0},0,0];return bi.qpro&&20768!=bi.vers?(_i[0].c=gi.read_shift(1),_i[3]=gi.read_shift(1),_i[0].r=gi.read_shift(2),gi.l+=2):(_i[2]=gi.read_shift(1),_i[0].c=gi.read_shift(2),_i[0].r=gi.read_shift(2)),_i}function z(gi,vn,bi){var _i=gi.l+vn,Yn=P(gi,0,bi);if(Yn[1].t="s",20768==bi.vers){gi.l++;var Wr=gi.read_shift(1);return Yn[1].v=gi.read_shift(Wr,"utf8"),Yn}return bi.qpro&&gi.l++,Yn[1].v=gi.read_shift(_i-gi.l,"cstr"),Yn}function ie(gi,vn,bi){var _i=Bn(7+bi.length);_i.write_shift(1,255),_i.write_shift(2,vn),_i.write_shift(2,gi),_i.write_shift(1,39);for(var Yn=0;Yn<_i.length;++Yn){var Wr=bi.charCodeAt(Yn);_i.write_shift(1,Wr>=128?95:Wr)}return _i.write_shift(1,0),_i}function oe(gi,vn,bi){var _i=Bn(7);return _i.write_shift(1,255),_i.write_shift(2,vn),_i.write_shift(2,gi),_i.write_shift(2,bi,"i"),_i}function he(gi,vn,bi){var _i=Bn(13);return _i.write_shift(1,255),_i.write_shift(2,vn),_i.write_shift(2,gi),_i.write_shift(8,bi,"f"),_i}function Ke(gi,vn,bi){var _i=32768&vn;return vn=(_i?gi:0)+((vn&=-32769)>=8192?vn-16384:vn),(_i?"":"$")+(bi?uc(vn):_u(vn))}var ct={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},pt=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function Fi(gi){var vn=[{c:0,r:0},{t:"n",v:0},0];return vn[0].r=gi.read_shift(2),vn[3]=gi[gi.l++],vn[0].c=gi[gi.l++],vn}function ni(gi,vn,bi,_i){var Yn=Bn(6+_i.length);Yn.write_shift(2,gi),Yn.write_shift(1,bi),Yn.write_shift(1,vn),Yn.write_shift(1,39);for(var Wr=0;Wr<_i.length;++Wr){var yr=_i.charCodeAt(Wr);Yn.write_shift(1,yr>=128?95:yr)}return Yn.write_shift(1,0),Yn}function Bi(gi,vn){var bi=Fi(gi),_i=gi.read_shift(4),Yn=gi.read_shift(4),Wr=gi.read_shift(2);if(65535==Wr)return 0===_i&&3221225472===Yn?(bi[1].t="e",bi[1].v=15):0===_i&&3489660928===Yn?(bi[1].t="e",bi[1].v=42):bi[1].v=0,bi;var yr=32768&Wr;return Wr=(32767&Wr)-16446,bi[1].v=(1-2*yr)*(Yn*Math.pow(2,Wr+32)+_i*Math.pow(2,Wr)),bi}function Cn(gi,vn,bi,_i){var Yn=Bn(14);if(Yn.write_shift(2,gi),Yn.write_shift(1,bi),Yn.write_shift(1,vn),0==_i)return Yn.write_shift(4,0),Yn.write_shift(4,0),Yn.write_shift(2,65535),Yn;var Wr=0,yr=0,sr=0;return _i<0&&(Wr=1,_i=-_i),yr=0|Math.log2(_i),2147483648&(sr=(_i/=Math.pow(2,yr-31))>>>0)||(++yr,sr=(_i/=2)>>>0),_i-=sr,sr|=2147483648,sr>>>=0,_i*=Math.pow(2,32),Yn.write_shift(4,_i>>>0),Yn.write_shift(4,sr),Yn.write_shift(2,yr+=16383+(Wr?32768:0)),Yn}function Cr(gi,vn){var bi=Fi(gi),_i=gi.read_shift(8,"f");return bi[1].v=_i,bi}function Gr(gi,vn){return 0==gi[gi.l+vn-1]?gi.read_shift(vn,"cstr"):""}function es(gi,vn){var bi=Bn(5+gi.length);bi.write_shift(2,14e3),bi.write_shift(2,vn);for(var _i=0;_i<gi.length;++_i){var Yn=gi.charCodeAt(_i);bi[bi.l++]=Yn>127?95:Yn}return bi[bi.l++]=0,bi}var aa={0:{n:"BOF",f:lh},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function g(gi,vn,bi){var _i={s:{c:0,r:0},e:{c:0,r:0}};return 8==vn&&bi.qpro?(_i.s.c=gi.read_shift(1),gi.l++,_i.s.r=gi.read_shift(2),_i.e.c=gi.read_shift(1),gi.l++,_i.e.r=gi.read_shift(2),_i):(_i.s.c=gi.read_shift(2),_i.s.r=gi.read_shift(2),12==vn&&bi.qpro&&(gi.l+=2),_i.e.c=gi.read_shift(2),_i.e.r=gi.read_shift(2),12==vn&&bi.qpro&&(gi.l+=2),65535==_i.s.c&&(_i.s.c=_i.e.c=_i.s.r=_i.e.r=0),_i)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function se(gi,vn,bi){var _i=P(gi,0,bi);return _i[1].v=gi.read_shift(2,"i"),_i}},14:{n:"NUMBER",f:function _e(gi,vn,bi){var _i=P(gi,0,bi);return _i[1].v=gi.read_shift(8,"f"),_i}},15:{n:"LABEL",f:z},16:{n:"FORMULA",f:function Ae(gi,vn,bi){var _i=gi.l+vn,Yn=P(gi,0,bi);if(Yn[1].v=gi.read_shift(8,"f"),bi.qpro)gi.l=_i;else{var Wr=gi.read_shift(2);(function mi(gi,vn){vd(gi,0);for(var bi=[],_i=0,Yn="",Wr="",yr="",Er="";gi.l<gi.length;){var sr=gi[gi.l++];switch(sr){case 0:bi.push(gi.read_shift(8,"f"));break;case 1:Wr=Ke(vn[0].c,gi.read_shift(2),!0),Yn=Ke(vn[0].r,gi.read_shift(2),!1),bi.push(Wr+Yn);break;case 2:var La=Ke(vn[0].c,gi.read_shift(2),!0),di=Ke(vn[0].r,gi.read_shift(2),!1);Wr=Ke(vn[0].c,gi.read_shift(2),!0),Yn=Ke(vn[0].r,gi.read_shift(2),!1),bi.push(La+di+":"+Wr+Yn);break;case 3:if(gi.l<gi.length)return void console.error("WK1 premature formula end");break;case 4:bi.push("("+bi.pop()+")");break;case 5:bi.push(gi.read_shift(2));break;case 6:for(var Go="";sr=gi[gi.l++];)Go+=String.fromCharCode(sr);bi.push('"'+Go.replace(/"/g,'""')+'"');break;case 8:bi.push("-"+bi.pop());break;case 23:bi.push("+"+bi.pop());break;case 22:bi.push("NOT("+bi.pop()+")");break;case 20:case 21:Er=bi.pop(),yr=bi.pop(),bi.push(["AND","OR"][sr-20]+"("+yr+","+Er+")");break;default:if(sr<32&&pt[sr])Er=bi.pop(),yr=bi.pop(),bi.push(yr+pt[sr]+Er);else{if(!ct[sr])return sr<=7?console.error("WK1 invalid opcode "+sr.toString(16)):sr<=24?console.error("WK1 unsupported op "+sr.toString(16)):sr<=30?console.error("WK1 invalid opcode "+sr.toString(16)):sr<=115?console.error("WK1 unsupported function opcode "+sr.toString(16)):console.error("WK1 unrecognized opcode "+sr.toString(16));if(69==(_i=ct[sr][1])&&(_i=gi[gi.l++]),_i>bi.length)return void console.error("WK1 bad formula parse 0x"+sr.toString(16)+":|"+bi.join("|")+"|");var Ja=bi.slice(-_i);bi.length-=_i,bi.push(ct[sr][0]+"("+Ja.join(",")+")")}}}1==bi.length?vn[1].f=""+bi[0]:console.error("WK1 bad formula parse |"+bi.join("|")+"|")})(gi.slice(gi.l,gi.l+Wr),Yn),gi.l+=Wr}return Yn}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:z},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Gr},222:{n:"SHEETNAMELP",f:function ta(gi,vn){var bi=gi[gi.l++];bi>vn-1&&(bi=vn-1);for(var _i="";_i.length<bi;)_i+=String.fromCharCode(gi[gi.l++]);return _i}},65535:{n:""}},rr={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function Ki(gi,vn){var bi=Fi(gi);return bi[1].t="s",bi[1].v=gi.read_shift(vn-4,"cstr"),bi}},23:{n:"NUMBER17",f:Bi},24:{n:"NUMBER18",f:function Ti(gi,vn){var bi=Fi(gi);bi[1].v=gi.read_shift(2);var _i=bi[1].v>>1;if(1&bi[1].v)switch(7&_i){case 0:_i=5e3*(_i>>3);break;case 1:_i=500*(_i>>3);break;case 2:_i=(_i>>3)/20;break;case 3:_i=(_i>>3)/200;break;case 4:_i=(_i>>3)/2e3;break;case 5:_i=(_i>>3)/2e4;break;case 6:_i=(_i>>3)/16;break;case 7:_i=(_i>>3)/64}return bi[1].v=_i,bi}},25:{n:"FORMULA19",f:function Mn(gi,vn){var bi=Bi(gi);return gi.l+=vn-14,bi}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function Wa(gi,vn){for(var bi={},_i=gi.l+vn;gi.l<_i;){var Yn=gi.read_shift(2);if(14e3==Yn){for(bi[Yn]=[0,""],bi[Yn][0]=gi.read_shift(2);gi[gi.l];)bi[Yn][1]+=String.fromCharCode(gi[gi.l]),gi.l++;gi.l++}}return bi}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function Zi(gi,vn){var bi=Fi(gi),_i=gi.read_shift(4);return bi[1].v=_i>>6,bi}},38:{n:"??"},39:{n:"NUMBER27",f:Cr},40:{n:"FORMULA28",f:function ns(gi,vn){var bi=Cr(gi);return gi.l+=vn-10,bi}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Gr},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function ws(gi,vn,bi){if(bi.qpro&&!(vn<21)){var _i=gi.read_shift(1);return gi.l+=17,gi.l+=1,gi.l+=2,[_i,gi.read_shift(vn-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function r(gi,vn){var bi=vn||{};if(+bi.codepage>=0&&mm(+bi.codepage),"string"==bi.type)throw new Error("Cannot write WK1 to JS string");var _i=Mf(),Yn=fo(gi["!ref"]),Wr=Array.isArray(gi),yr=[];Br(_i,0,function o(gi){var vn=Bn(2);return vn.write_shift(2,gi),vn}(1030)),Br(_i,6,function A(gi){var vn=Bn(8);return vn.write_shift(2,gi.s.c),vn.write_shift(2,gi.s.r),vn.write_shift(2,gi.e.c),vn.write_shift(2,gi.e.r),vn}(Yn));for(var Er=Math.min(Yn.e.r,8191),sr=Yn.s.r;sr<=Er;++sr)for(var La=_u(sr),di=Yn.s.c;di<=Yn.e.c;++di){sr===Yn.s.r&&(yr[di]=uc(di));var Ja=Wr?(gi[sr]||[])[di]:gi[yr[di]+La];Ja&&"z"!=Ja.t&&("n"==Ja.t?(0|Ja.v)==Ja.v&&Ja.v>=-32768&&Ja.v<=32767?Br(_i,13,oe(sr,di,Ja.v)):Br(_i,14,he(sr,di,Ja.v)):Br(_i,15,ie(sr,di,qg(Ja).slice(0,239))))}return Br(_i,1),_i.end()},book_to_wk3:function s(gi,vn){var bi=vn||{};if(+bi.codepage>=0&&mm(+bi.codepage),"string"==bi.type)throw new Error("Cannot write WK3 to JS string");var _i=Mf();Br(_i,0,function f(gi){var vn=Bn(26);vn.write_shift(2,4096),vn.write_shift(2,4),vn.write_shift(4,0);for(var bi=0,_i=0,Yn=0,Wr=0;Wr<gi.SheetNames.length;++Wr){var Er=gi.Sheets[gi.SheetNames[Wr]];if(Er&&Er["!ref"]){++Yn;var sr=Of(Er["!ref"]);bi<sr.e.r&&(bi=sr.e.r),_i<sr.e.c&&(_i=sr.e.c)}}return bi>8191&&(bi=8191),vn.write_shift(2,bi),vn.write_shift(1,Yn),vn.write_shift(1,_i),vn.write_shift(2,0),vn.write_shift(2,0),vn.write_shift(1,1),vn.write_shift(1,2),vn.write_shift(4,0),vn.write_shift(4,0),vn}(gi));for(var Yn=0,Wr=0;Yn<gi.SheetNames.length;++Yn)(gi.Sheets[gi.SheetNames[Yn]]||{})["!ref"]&&Br(_i,27,es(gi.SheetNames[Yn],Wr++));var yr=0;for(Yn=0;Yn<gi.SheetNames.length;++Yn){var Er=gi.Sheets[gi.SheetNames[Yn]];if(Er&&Er["!ref"]){for(var sr=fo(Er["!ref"]),La=Array.isArray(Er),di=[],Go=Math.min(sr.e.r,8191),Ja=sr.s.r;Ja<=Go;++Ja)for(var Bo=_u(Ja),Qa=sr.s.c;Qa<=sr.e.c;++Qa){Ja===sr.s.r&&(di[Qa]=uc(Qa));var Fc=La?(Er[Ja]||[])[Qa]:Er[di[Qa]+Bo];Fc&&"z"!=Fc.t&&("n"==Fc.t?Br(_i,23,Cn(Ja,Qa,yr,Fc.v)):Br(_i,22,ni(Ja,Qa,yr,qg(Fc).slice(0,239))))}++yr}}return Br(_i,1),_i.end()},to_workbook:function t(gi,vn){switch(vn.type){case"base64":return e(Op(Mp(gi)),vn);case"binary":return e(Op(gi),vn);case"buffer":case"array":return e(gi,vn)}throw"Unsupported type "+vn.type}}}(),LP=/^\s|\s$|[\t\n\r]/;function FT(i,t){if(!t.bookSST)return"";var e=[vu];e[e.length]=Ar("sst",null,{xmlns:r_[0],count:i.Count,uniqueCount:i.Unique});for(var r=0;r!=i.length;++r)if(null!=i[r]){var s=i[r],o="<si>";s.r?o+=s.r:(o+="<t",s.t||(s.t=""),s.t.match(LP)&&(o+=' xml:space="preserve"'),o+=">"+nl(s.t)+"</t>"),e[e.length]=o+="</si>"}return e.length>2&&(e[e.length]="</sst>",e[1]=e[1].replace("/>",">")),e.join("")}var NP=function XO(i,t){var e=!1;return null==t&&(e=!0,t=Bn(15+4*i.t.length)),t.write_shift(1,0),td(i.t,t),e?t.slice(0,t.l):t};function zP(i){var t=Mf();ir(t,159,function BP(i,t){return t||(t=Bn(8)),t.write_shift(4,i.Count),t.write_shift(4,i.Unique),t}(i));for(var e=0;e<i.length;++e)ir(t,19,NP(i[e]));return ir(t,160),t.end()}function t2(i){var e,o,t=0,r=function BT(i){if(typeof Eo<"u")return Eo.utils.encode(K_,i);for(var t=[],e=i.split(""),r=0;r<e.length;++r)t[r]=e[r].charCodeAt(0);return t}(i),s=r.length+1;for((e=Qv(s))[0]=r.length,o=1;o!=s;++o)e[o]=r[o-1];for(o=s-1;o>=0;--o)t=((16384&t?1:0)|t<<1&32767)^e[o];return 52811^t}var GT=function(){function i(s,o){switch(o.type){case"base64":return t(Mp(s),o);case"binary":return t(s,o);case"buffer":return t(Ka&&Buffer.isBuffer(s)?s.toString("binary"):e_(s),o);case"array":return t(Q_(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){var g=(o||{}).dense?[]:{},A=s.match(/\\trowd.*?\\row\b/g);if(!A.length)throw new Error("RTF missing table");var P={s:{c:0,r:0},e:{c:0,r:A.length-1}};return A.forEach(function(z,ie){Array.isArray(g)&&(g[ie]=[]);for(var _e,se=/\\\w+\b/g,oe=0,he=-1;_e=se.exec(z);){if("\\cell"===_e[0]){var Ae=z.slice(oe,se.lastIndex-_e[0].length);if(" "==Ae[0]&&(Ae=Ae.slice(1)),++he,Ae.length){var Ke={v:Ae,t:"s"};Array.isArray(g)?g[ie][he]=Ke:g[ga({r:ie,c:he})]=Ke}}oe=se.lastIndex}he>P.e.c&&(P.e.c=he)}),g["!ref"]=Fa(P),g}return{to_workbook:function e(s,o){return s_(i(s,o),o)},to_sheet:i,from_sheet:function r(s){for(var g,o=["{\\rtf1\\ansi"],f=fo(s["!ref"]),A=Array.isArray(s),P=f.s.r;P<=f.e.r;++P){o.push("\\trowd\\trautofit1");for(var z=f.s.c;z<=f.e.c;++z)o.push("\\cellx"+(z+1));for(o.push("\\pard\\intbl"),z=f.s.c;z<=f.e.c;++z){var ie=ga({r:P,c:z});(g=A?(s[P]||[])[z]:s[ie])&&(null!=g.v||g.f&&!g.F)&&(o.push(" "+(g.w||(qg(g),g.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}}}();function tb(i){for(var t=0,e=1;3!=t;++t)e=256*e+(i[t]>255?255:i[t]<0?0:i[t]);return e.toString(16).toUpperCase().slice(1)}var tf=6;function ib(i){return Math.floor((i+Math.round(128/tf)/256)*tf)}function nb(i){return Math.floor((i-5)/tf*100+.5)/100}function kw(i){return Math.round((i*tf+5)/tf*256)/256}function o_(i){i.width?(i.wpx=ib(i.width),i.wch=nb(i.wpx),i.MDW=tf):i.wpx?(i.wch=nb(i.wpx),i.width=kw(i.wch),i.MDW=tf):"number"==typeof i.wch&&(i.width=kw(i.wch),i.wpx=ib(i.width),i.MDW=tf),i.customWidth&&delete i.customWidth}var VT=96;function rb(i){return 96*i/VT}function Tw(i){return i*VT/96}function UT(i,t){var r,e=[vu,Ar("styleSheet",null,{xmlns:r_[0],"xmlns:vt":oh.vt})];return i.SSF&&null!=(r=function h3(i){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=i[r]&&(t[t.length]=Ar("numFmt",null,{numFmtId:r,formatCode:nl(i[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Ar("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(i.SSF))&&(e[e.length]=r),e[e.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',e[e.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',e[e.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',e[e.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function d3(i){var t=[];return t[t.length]=Ar("cellXfs",null),i.forEach(function(e){t[t.length]=Ar("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Ar("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(e[e.length]=r),e[e.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',e[e.length]='<dxfs count="0"/>',e[e.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',e.length>2&&(e[e.length]="</styleSheet>",e[1]=e[1].replace("/>",">")),e.join("")}function m3(i,t,e){e||(e=Bn(6+4*t.length)),e.write_shift(2,i),td(t,e);var r=e.length>e.l?e.slice(0,e.l):e;return null==e.l&&(e.l=e.length),r}var s2,_3=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],y3=Kd;function jT(i,t){t||(t=Bn(84)),s2||(s2=lw(_3));var e=s2[i.patternType];null==e&&(e=40),t.write_shift(4,e);var r=0;if(40!=e)for(mw({auto:1},t),mw({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function WT(i,t,e){return e||(e=Bn(16)),e.write_shift(2,t||0),e.write_shift(2,i.numFmtId||0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e}function sb(i,t){return t||(t=Bn(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var b3=Kd;function P3(i,t){var e=Mf();return ir(e,278),function T3(i,t){if(t){var e=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)null!=t[s]&&++e}),0!=e&&(ir(i,615,cg(e)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)null!=t[s]&&ir(i,44,m3(s,t[s]))}),ir(i,616))}}(e,i.SSF),function S3(i){ir(i,611,cg(1)),ir(i,43,function v3(i,t){t||(t=Bn(153)),t.write_shift(2,20*i.sz),function iR(i,t){t||(t=Bn(2)),t.write_shift(1,(i.italic?2:0)|(i.strike?8:0)|(i.outline?16:0)|(i.shadow?32:0)|(i.condense?64:0)|(i.extend?128:0)),t.write_shift(1,0)}(i,t),t.write_shift(2,i.bold?700:400);var e=0;"superscript"==i.vertAlign?e=1:"subscript"==i.vertAlign&&(e=2),t.write_shift(2,e),t.write_shift(1,i.underline||0),t.write_shift(1,i.family||0),t.write_shift(1,i.charset||0),t.write_shift(1,0),mw(i.color,t);var r=0;return"major"==i.scheme&&(r=1),"minor"==i.scheme&&(r=2),t.write_shift(1,r),td(i.name,t),t.length>t.l?t.slice(0,t.l):t}({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),ir(i,612)}(e),function A3(i){ir(i,603,cg(2)),ir(i,45,jT({patternType:"none"})),ir(i,45,jT({patternType:"gray125"})),ir(i,604)}(e),function D3(i){ir(i,613,cg(1)),ir(i,46,function w3(i,t){return t||(t=Bn(51)),t.write_shift(1,0),sb(0,t),sb(0,t),sb(0,t),sb(0,t),sb(0,t),t.length>t.l?t.slice(0,t.l):t}()),ir(i,614)}(e),function I3(i){ir(i,626,cg(1)),ir(i,47,WT({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),ir(i,627)}(e),function M3(i,t){ir(i,617,cg(t.length)),t.forEach(function(e){ir(i,47,WT(e,0))}),ir(i,618)}(e,t.cellXfs),function O3(i){ir(i,619,cg(1)),ir(i,48,function C3(i,t){return t||(t=Bn(52)),t.write_shift(4,i.xfId),t.write_shift(2,1),t.write_shift(1,+i.builtinId),t.write_shift(1,0),pw(i.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),ir(i,620)}(e),function R3(i){ir(i,505,cg(0)),ir(i,506)}(e),function L3(i){ir(i,508,function E3(i,t,e){var r=Bn(2052);return r.write_shift(4,i),pw(t,r),pw(e,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),ir(i,509)}(e),ir(e,279),e.end()}function a2(i,t){if(t&&t.themeXLSX)return t.themeXLSX;if(i&&"string"==typeof i.raw)return i.raw;var e=[vu];return e[e.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',e[e.length]="<a:themeElements>",e[e.length]='<a:clrScheme name="Office">',e[e.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',e[e.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',e[e.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',e[e.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',e[e.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',e[e.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',e[e.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',e[e.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',e[e.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',e[e.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',e[e.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',e[e.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',e[e.length]="</a:clrScheme>",e[e.length]='<a:fontScheme name="Office">',e[e.length]="<a:majorFont>",e[e.length]='<a:latin typeface="Cambria"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',e[e.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',e[e.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',e[e.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',e[e.length]='<a:font script="Arab" typeface="Times New Roman"/>',e[e.length]='<a:font script="Hebr" typeface="Times New Roman"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="MoolBoran"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Times New Roman"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:majorFont>",e[e.length]="<a:minorFont>",e[e.length]='<a:latin typeface="Calibri"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',e[e.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',e[e.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',e[e.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',e[e.length]='<a:font script="Arab" typeface="Arial"/>',e[e.length]='<a:font script="Hebr" typeface="Arial"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="DaunPenh"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Arial"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:minorFont>",e[e.length]="</a:fontScheme>",e[e.length]='<a:fmtScheme name="Office">',e[e.length]="<a:fillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="1"/>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="0"/>',e[e.length]="</a:gradFill>",e[e.length]="</a:fillStyleLst>",e[e.length]="<a:lnStyleLst>",e[e.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]="</a:lnStyleLst>",e[e.length]="<a:effectStyleLst>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',e[e.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',e[e.length]="</a:effectStyle>",e[e.length]="</a:effectStyleLst>",e[e.length]="<a:bgFillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]="</a:bgFillStyleLst>",e[e.length]="</a:fmtScheme>",e[e.length]="</a:themeElements>",e[e.length]="<a:objectDefaults>",e[e.length]="<a:spDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',e[e.length]="</a:spDef>",e[e.length]="<a:lnDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',e[e.length]="</a:lnDef>",e[e.length]="</a:objectDefaults>",e[e.length]="<a:extraClrSchemeLst/>",e[e.length]="</a:theme>",e.join("")}function l4(){var i=Mf();return ir(i,332),ir(i,334,cg(1)),ir(i,335,function e4(i){var t=Bn(12+2*i.name.length);return t.write_shift(4,i.flags),t.write_shift(4,i.version),td(i.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),ir(i,336),ir(i,339,function r4(i,t){var e=Bn(8+2*t.length);return e.write_shift(4,i),td(t,e),e.slice(0,e.l)}(1,"XLDAPR")),ir(i,52),ir(i,35,cg(514)),ir(i,4096,cg(0)),ir(i,4097,ym(1)),ir(i,36),ir(i,53),ir(i,340),ir(i,337,function a4(i,t){var e=Bn(8);return e.write_shift(4,i),e.write_shift(4,t?1:0),e}(1,!0)),ir(i,51,function n4(i){var t=Bn(4+8*i.length);t.write_shift(4,i.length);for(var e=0;e<i.length;++e)t.write_shift(4,i[e][0]),t.write_shift(4,i[e][1]);return t}([[1,0]])),ir(i,338),ir(i,333),i.end()}function XT(){var i=[vu];return i.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),i.join("")}var I1=1024;function ZT(i,t){for(var e=[21600,21600],r=["m0,0l0",e[1],e[0],e[1],e[0],"0xe"].join(","),s=[Ar("xml",null,{"xmlns:v":Pp.v,"xmlns:o":Pp.o,"xmlns:x":Pp.x,"xmlns:mv":Pp.mv}).replace(/\/>/,">"),Ar("o:shapelayout",Ar("o:idmap",null,{"v:ext":"edit",data:i}),{"v:ext":"edit"}),Ar("v:shapetype",[Ar("v:stroke",null,{joinstyle:"miter"}),Ar("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:e.join(","),path:r})];I1<1e3*i;)I1+=1e3;return t.forEach(function(o){var f=Hu(o[0]),g={color2:"#BEFF82",type:"gradient"};"gradient"==g.type&&(g.angle="-180");var A="gradient"==g.type?Ar("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,P=Ar("v:fill",A,g);++I1,s=s.concat(["<v:shape"+Wx({id:"_x0000_s"+I1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",P,Ar("v:shadow",null,{on:"t",obscured:"t"}),Ar("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",gd("x:Anchor",[f.c+1,0,f.r+1,0,f.c+3,20,f.r+5,20].join(",")),gd("x:AutoFill","False"),gd("x:Row",String(f.r)),gd("x:Column",String(f.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function KT(i){var t=[vu,Ar("comments",null,{xmlns:r_[0]})],e=[];return t.push("<authors>"),i.forEach(function(r){r[1].forEach(function(s){var o=nl(s.a);-1==e.indexOf(o)&&(e.push(o),t.push("<author>"+o+"</author>")),s.T&&s.ID&&-1==e.indexOf("tc="+s.ID)&&(e.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),0==e.length&&(e.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),i.forEach(function(r){var s=0,o=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=e.indexOf("tc="+r[1][0].ID):r[1].forEach(function(A){A.a&&(s=e.indexOf(nl(A.a))),o.push(A.t||"")}),t.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),o.length<=1)t.push(gd("t",nl(o[0]||"")));else{for(var f="Comment:\n    "+o[0]+"\n",g=1;g<o.length;++g)f+="Reply:\n    "+o[g]+"\n";t.push(gd("t",nl(f)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function v4(i,t,e){var r=[vu,Ar("ThreadedComments",null,{xmlns:oh.TCMNT}).replace(/[\/]>/,">")];return i.forEach(function(s){var o="";(s[1]||[]).forEach(function(f,g){if(f.T){f.a&&-1==t.indexOf(f.a)&&t.push(f.a);var A={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+e.tcid++).slice(-12)+"}"};0==g?o=A.id:A.parentId=o,f.ID=A.id,f.a&&(A.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(f.a)).slice(-12)+"}"),r.push(Ar("threadedComment",gd("text",f.t||""),A))}else delete f.ID})}),r.push("</ThreadedComments>"),r.join("")}var w4=Jd;function k4(i){var t=Mf(),e=[];return ir(t,628),ir(t,630),i.forEach(function(r){r[1].forEach(function(s){e.indexOf(s.a)>-1||(e.push(s.a.slice(0,54)),ir(t,632,function C4(i){return td(i.slice(0,54))}(s.a)))})}),ir(t,631),ir(t,633),i.forEach(function(r){r[1].forEach(function(s){s.iauthor=e.indexOf(s.a);var o={s:Hu(r[0]),e:Hu(r[0])};ir(t,635,function b4(i,t){return null==t&&(t=Bn(36)),t.write_shift(4,i[1].iauthor),S1(i[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([o,s])),s.t&&s.t.length>0&&ir(t,637,function qO(i,t){var e=!1;return null==t&&(e=!0,t=Bn(23+4*i.t.length)),t.write_shift(1,1),td(i.t,t),t.write_shift(4,1),function $O(i,t){t||(t=Bn(4)),t.write_shift(2,i.ich||0),t.write_shift(2,i.ifnt||0)}({ich:0,ifnt:0},t),e?t.slice(0,t.l):t}(s)),ir(t,636),delete s.iauthor})}),ir(t,634),ir(t,629),t.end()}var JT=["xlsb","xlsm","xlam","biff8","xla"],M1=function(){var i=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function e(r,s,o,f){var g=!1,A=!1;0==o.length?A=!0:"["==o.charAt(0)&&(A=!0,o=o.slice(1,-1)),0==f.length?g=!0:"["==f.charAt(0)&&(g=!0,f=f.slice(1,-1));var P=o.length>0?0|parseInt(o,10):0,z=f.length>0?0|parseInt(f,10):0;return g?z+=t.c:--z,A?P+=t.r:--P,s+(g?"":"$")+uc(z)+(A?"":"$")+_u(P)}return function(s,o){return t=o,s.replace(i,e)}}(),o2=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,l2=function(){return function(t,e){return t.replace(o2,function(r,s,o,f,g,A){var P=BC(f)-(o?0:e.c),z=FC(A)-(g?0:e.r);return s+"R"+(0==z?"":g?z+1:"["+z+"]")+"C"+(0==P?"":o?P+1:"["+P+"]")})}}();function QT(i,t){return i.replace(o2,function(e,r,s,o,f,g){return r+("$"==s?s+o:uc(BC(o)+t.c))+("$"==f?f+g:_u(FC(g)+t.r))})}function ch(i){i.l+=1}function l_(i,t){var e=i.read_shift(1==t?1:2);return[16383&e,e>>14&1,e>>15&1]}function eS(i,t,e){var r=2;if(e){if(e.biff>=2&&e.biff<=5)return tS(i);12==e.biff&&(r=4)}var s=i.read_shift(r),o=i.read_shift(r),f=l_(i,2),g=l_(i,2);return{s:{r:s,c:f[0],cRel:f[1],rRel:f[2]},e:{r:o,c:g[0],cRel:g[1],rRel:g[2]}}}function tS(i){var t=l_(i,2),e=l_(i,2),r=i.read_shift(1),s=i.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:e[0],c:s,cRel:e[1],rRel:e[2]}}}function iS(i,t,e){if(e&&e.biff>=2&&e.biff<=5)return function P4(i){var t=l_(i,2),e=i.read_shift(1);return{r:t[0],c:e,cRel:t[1],rRel:t[2]}}(i);var r=i.read_shift(e&&12==e.biff?4:2),s=l_(i,2);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function F4(i){var t=i.read_shift(2),e=i.read_shift(2);return{r:t,c:255&e,fQuoted:!!(16384&e),cRel:e>>15,rRel:e>>15}}function nS(i){var t=1&i[i.l+1];return i.l+=4,[t,1]}function rS(i){return[i.read_shift(1),i.read_shift(1)]}function hF(i,t){var e=[i.read_shift(1)];if(12==t)switch(e[0]){case 2:e[0]=4;break;case 4:e[0]=16;break;case 0:e[0]=1;break;case 1:e[0]=2}switch(e[0]){case 4:e[1]=function Vu(i,t){return 1===i.read_shift(t)}(i,1)?"TRUE":"FALSE",12!=t&&(i.l+=7);break;case 37:case 16:e[1]=hv[i[i.l]],i.l+=12==t?4:8;break;case 0:i.l+=8;break;case 1:e[1]=Qd(i);break;case 2:e[1]=function cy(i,t,e){if(e.biff>5)return function eb(i,t,e){var r=i.read_shift(e&&2==e.biff?1:2);return 0===r?(i.l++,""):function ly(i,t,e){if(e){if(e.biff>=2&&e.biff<=5)return i.read_shift(t,"cpstr");if(e.biff>=12)return i.read_shift(t,"dbcs-cont")}var s=i.read_shift(1);return i.read_shift(t,0===s?"sbcs-cont":"dbcs-cont")}(i,r,e)}(i,0,e);var r=i.read_shift(1);return 0===r?(i.l++,""):i.read_shift(r,e.biff<=4||!i.lens?"cpstr":"sbcs-cont")}(i,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+e[0])}return e}function dF(i,t,e){for(var r=i.read_shift(12==e.biff?4:2),s=[],o=0;o!=r;++o)s.push((12==e.biff?ry:ww)(i,8));return s}function fF(i,t,e){var r=0,s=0;12==e.biff?(r=i.read_shift(4),s=i.read_shift(4)):(s=1+i.read_shift(1),r=1+i.read_shift(2)),e.biff>=2&&e.biff<8&&(--r,0==--s&&(s=256));for(var o=0,f=[];o!=r&&(f[o]=[]);++o)for(var g=0;g!=s;++g)f[o][g]=hF(i,e.biff);return f}function ab(i,t,e){return i.l+=2,[F4(i)]}function c2(i){return i.l+=6,[]}function sS(i){return i.l+=2,[lh(i),1&i.read_shift(2)]}var RF=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"],aS={1:{n:"PtgExp",f:function sF(i,t,e){return i.l++,e&&12==e.biff?[i.read_shift(4,"i"),0]:[i.read_shift(2),i.read_shift(e&&2==e.biff?1:2)]}},2:{n:"PtgTbl",f:Kd},3:{n:"PtgAdd",f:ch},4:{n:"PtgSub",f:ch},5:{n:"PtgMul",f:ch},6:{n:"PtgDiv",f:ch},7:{n:"PtgPower",f:ch},8:{n:"PtgConcat",f:ch},9:{n:"PtgLt",f:ch},10:{n:"PtgLe",f:ch},11:{n:"PtgEq",f:ch},12:{n:"PtgGe",f:ch},13:{n:"PtgGt",f:ch},14:{n:"PtgNe",f:ch},15:{n:"PtgIsect",f:ch},16:{n:"PtgUnion",f:ch},17:{n:"PtgRange",f:ch},18:{n:"PtgUplus",f:ch},19:{n:"PtgUminus",f:ch},20:{n:"PtgPercent",f:ch},21:{n:"PtgParen",f:ch},22:{n:"PtgMissArg",f:ch},23:{n:"PtgStr",f:function uF(i,t,e){return i.l++,Qx(i,0,e)}},26:{n:"PtgSheet",f:function FF(i,t,e){return i.l+=5,i.l+=2,i.l+=2==e.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function BF(i,t,e){return i.l+=2==e.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function aF(i){return i.l++,hv[i.read_shift(1)]}},29:{n:"PtgBool",f:function lF(i){return i.l++,0!==i.read_shift(1)}},30:{n:"PtgInt",f:function oF(i){return i.l++,i.read_shift(2)}},31:{n:"PtgNum",f:function cF(i){return i.l++,Qd(i)}},32:{n:"PtgArray",f:function U4(i,t,e){var r=(96&i[i.l++])>>5;return i.l+=2==e.biff?6:12==e.biff?14:7,[r]}},33:{n:"PtgFunc",f:function tF(i,t,e){var r=(96&i[i.l])>>5;i.l+=1;var s=i.read_shift(e&&e.biff<=3?1:2);return[s5[s],cS[s],r]}},34:{n:"PtgFuncVar",f:function iF(i,t,e){var r=i[i.l++],s=i.read_shift(1),o=e&&e.biff<=3?[88==r?-1:0,i.read_shift(1)]:function nF(i){return[i[i.l+1]>>7,32767&i.read_shift(2)]}(i);return[s,(0===o[0]?cS:r5)[o[1]]]}},35:{n:"PtgName",f:function pF(i,t,e){var r=i.read_shift(1)>>>5&3,o=i.read_shift(!e||e.biff>=8?4:2);switch(e.biff){case 2:i.l+=5;break;case 3:case 4:i.l+=8;break;case 5:i.l+=12}return[r,0,o]}},36:{n:"PtgRef",f:function J4(i,t,e){var r=(96&i[i.l])>>5;return i.l+=1,[r,iS(i,0,e)]}},37:{n:"PtgArea",f:function z4(i,t,e){return[(96&i[i.l++])>>5,eS(i,0,e)]}},38:{n:"PtgMemArea",f:function vF(i,t,e){var r=i.read_shift(1)>>>5&3;return i.l+=e&&2==e.biff?3:4,[r,i.read_shift(e&&2==e.biff?1:2)]}},39:{n:"PtgMemErr",f:Kd},40:{n:"PtgMemNoMem",f:Kd},41:{n:"PtgMemFunc",f:function _F(i,t,e){return[i.read_shift(1)>>>5&3,i.read_shift(e&&2==e.biff?1:2)]}},42:{n:"PtgRefErr",f:function yF(i,t,e){var r=i.read_shift(1)>>>5&3;return i.l+=4,e.biff<8&&i.l--,12==e.biff&&(i.l+=2),[r]}},43:{n:"PtgAreaErr",f:function G4(i,t,e){var r=(96&i[i.l++])>>5;return i.l+=e&&e.biff>8?12:e.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function Q4(i,t,e){var r=(96&i[i.l])>>5;i.l+=1;var s=function B4(i,t,e){var r=e&&e.biff?e.biff:8;if(r>=2&&r<=5)return function N4(i){var t=i.read_shift(2),e=i.read_shift(1),r=(32768&t)>>15,s=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==s&&e>=128&&(e-=256),{r:t,c:e,cRel:s,rRel:r}}(i);var s=i.read_shift(r>=12?4:2),o=i.read_shift(2),f=(16384&o)>>14,g=(32768&o)>>15;if(o&=16383,1==g)for(;s>524287;)s-=1048576;if(1==f)for(;o>8191;)o-=16384;return{r:s,c:o,cRel:f,rRel:g}}(i,0,e);return[r,s]}},45:{n:"PtgAreaN",f:function V4(i,t,e){var r=(96&i[i.l++])>>5,s=function L4(i,t,e){if(e.biff<8)return tS(i);var r=i.read_shift(12==e.biff?4:2),s=i.read_shift(12==e.biff?4:2),o=l_(i,2),f=l_(i,2);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:f[0],cRel:f[1],rRel:f[2]}}}(i,0,e);return[r,s]}},46:{n:"PtgMemAreaN",f:function NF(i){return[i.read_shift(1)>>>5&3,i.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function zF(i){return[i.read_shift(1)>>>5&3,i.read_shift(2)]}},57:{n:"PtgNameX",f:function mF(i,t,e){return 5==e.biff?function gF(i){var t=i.read_shift(1)>>>5&3,e=i.read_shift(2,"i");i.l+=8;var r=i.read_shift(2);return i.l+=12,[t,e,r]}(i):[i.read_shift(1)>>>5&3,i.read_shift(2),i.read_shift(4)]}},58:{n:"PtgRef3d",f:function eF(i,t,e){var r=(96&i[i.l])>>5;i.l+=1;var s=i.read_shift(2);return e&&5==e.biff&&(i.l+=12),[r,s,iS(i,0,e)]}},59:{n:"PtgArea3d",f:function Y4(i,t,e){var r=(96&i[i.l++])>>5,s=i.read_shift(2,"i");if(e&&5===e.biff)i.l+=12;return[r,s,eS(i,0,e)]}},60:{n:"PtgRefErr3d",f:function xF(i,t,e){var r=(96&i[i.l++])>>5,s=i.read_shift(2),o=4;if(e)switch(e.biff){case 5:o=15;break;case 12:o=6}return i.l+=o,[r,s]}},61:{n:"PtgAreaErr3d",f:function H4(i,t,e){var r=(96&i[i.l++])>>5,s=i.read_shift(2),o=8;if(e)switch(e.biff){case 5:i.l+=12,o=6;break;case 12:o=12}return i.l+=o,[r,s]}},255:{}},GF={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},HF={1:{n:"PtgElfLel",f:sS},2:{n:"PtgElfRw",f:ab},3:{n:"PtgElfCol",f:ab},6:{n:"PtgElfRwV",f:ab},7:{n:"PtgElfColV",f:ab},10:{n:"PtgElfRadical",f:ab},11:{n:"PtgElfRadicalS",f:c2},13:{n:"PtgElfColS",f:c2},15:{n:"PtgElfColSV",f:c2},16:{n:"PtgElfRadicalLel",f:sS},25:{n:"PtgList",f:function LF(i){i.l+=2;var t=i.read_shift(2),e=i.read_shift(2),r=i.read_shift(4),s=i.read_shift(2),o=i.read_shift(2);return{ixti:t,coltype:3&e,rt:RF[e>>2&31],idx:r,c:s,C:o}}},29:{n:"PtgSxName",f:function PF(i){return i.l+=2,[i.read_shift(4)]}},255:{}},VF={0:{n:"PtgAttrNoop",f:function YF(i){return i.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function Z4(i,t,e){var r=255&i[i.l+1]?1:0;return i.l+=e&&2==e.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function $4(i,t,e){var r=255&i[i.l+1]?1:0;return i.l+=2,[r,i.read_shift(e&&2==e.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function j4(i,t,e){i.l+=2;for(var r=i.read_shift(e&&2==e.biff?1:2),s=[],o=0;o<=r;++o)s.push(i.read_shift(e&&2==e.biff?1:2));return s}},8:{n:"PtgAttrGoto",f:function W4(i,t,e){var r=255&i[i.l+1]?1:0;return i.l+=2,[r,i.read_shift(e&&2==e.biff?1:2)]}},16:{n:"PtgAttrSum",f:function rF(i,t,e){i.l+=e&&2==e.biff?3:4}},32:{n:"PtgAttrBaxcel",f:nS},33:{n:"PtgAttrBaxcel",f:nS},64:{n:"PtgAttrSpace",f:function q4(i){return i.read_shift(2),rS(i)}},65:{n:"PtgAttrSpaceSemi",f:function K4(i){return i.read_shift(2),rS(i)}},128:{n:"PtgAttrIfError",f:function X4(i){var t=255&i[i.l+1]?1:0;return i.l+=2,[t,i.read_shift(2)]}},255:{}};function ob(i,t,e,r){if(r.biff<8)return Kd(i,t);for(var s=i.l+t,o=[],f=0;f!==e.length;++f)switch(e[f][0]){case"PtgArray":e[f][1]=fF(i,0,r),o.push(e[f][1]);break;case"PtgMemArea":e[f][2]=dF(i,0,r),o.push(e[f][2]);break;case"PtgExp":r&&12==r.biff&&(e[f][1][1]=i.read_shift(4),o.push(e[f][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+e[f][0]}return 0!=(t=s-i.l)&&o.push(Kd(i,t)),o}function UF(i){for(var t=[],e=0;e<i.length;++e){for(var r=i[e],s=[],o=0;o<r.length;++o){var f=r[o];s.push(f?2===f[0]?'"'+f[1].replace(/"/g,'""')+'"':f[1]:"")}t.push(s.join(","))}return t.join(";")}var jF={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function oS(i,t,e){if(!i)return"SH33TJSERR0";if(e.biff>8&&(!i.XTI||!i.XTI[t]))return i.SheetNames[t];if(!i.XTI)return"SH33TJSERR6";var r=i.XTI[t];if(e.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":i.XTI[t-1];if(!r)return"SH33TJSERR1";var s="";if(e.biff>8)switch(i[r[0]][0]){case 357:return s=-1==r[1]?"#REF":i.SheetNames[r[1]],r[1]==r[2]?s:s+":"+i.SheetNames[r[2]];case 358:return null!=e.SID?i.SheetNames[e.SID]:"SH33TJSSAME"+i[r[0]][0];default:return"SH33TJSSRC"+i[r[0]][0]}switch(i[r[0]][0][0]){case 1025:return s=-1==r[1]?"#REF":i.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+i.SheetNames[r[2]];case 14849:return i[r[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return i[r[0]][0][3]?(s=-1==r[1]?"#REF":i[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+i[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function lS(i,t,e){var r=oS(i,t,e);return"#REF"==r?r:function WF(i,t){if(!(i||t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(i)?"'"+i+"'":i}(r,e)}function nf(i,t,e,r,s){var A,P,z,oe,o=s&&s.biff||8,f={s:{c:0,r:0},e:{c:0,r:0}},g=[],ie=0,se=0,_e="";if(!i[0]||!i[0][0])return"";for(var he=-1,Ae="",Ke=0,ct=i[0].length;Ke<ct;++Ke){var pt=i[0][Ke];switch(pt[0]){case"PtgUminus":g.push("-"+g.pop());break;case"PtgUplus":g.push("+"+g.pop());break;case"PtgPercent":g.push(g.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(A=g.pop(),P=g.pop(),he>=0){switch(i[0][he][1][0]){case 0:Ae=gu(" ",i[0][he][1][1]);break;case 1:Ae=gu("\r",i[0][he][1][1]);break;default:if(Ae="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+i[0][he][1][0])}P+=Ae,he=-1}g.push(P+jF[pt[0]]+A);break;case"PtgIsect":A=g.pop(),P=g.pop(),g.push(P+" "+A);break;case"PtgUnion":A=g.pop(),P=g.pop(),g.push(P+","+A);break;case"PtgRange":A=g.pop(),P=g.pop(),g.push(P+":"+A);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":z=Zx(pt[1][1],f,s),g.push(qx(z,o));break;case"PtgRefN":z=e?Zx(pt[1][1],e,s):pt[1][1],g.push(qx(z,o));break;case"PtgRef3d":ie=pt[1][1],z=Zx(pt[1][2],f,s),_e=lS(r,ie,s),g.push(_e+"!"+qx(z,o));break;case"PtgFunc":case"PtgFuncVar":var Fi=pt[1][0],Ki=pt[1][1];Fi||(Fi=0);var ni=0==(Fi&=127)?[]:g.slice(-Fi);g.length-=Fi,"User"===Ki&&(Ki=ni.shift()),g.push(Ki+"("+ni.join(",")+")");break;case"PtgBool":g.push(pt[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":g.push(pt[1]);break;case"PtgNum":g.push(String(pt[1]));break;case"PtgStr":g.push('"'+pt[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":oe=Fk(pt[1][1],e?{s:e}:f,s),g.push(PC(oe,s));break;case"PtgArea":oe=Fk(pt[1][1],f,s),g.push(PC(oe,s));break;case"PtgArea3d":oe=pt[1][2],_e=lS(r,ie=pt[1][1],s),g.push(_e+"!"+PC(oe,s));break;case"PtgAttrSum":g.push("SUM("+g.pop()+")");break;case"PtgName":var Ti=(r.names||[])[(se=pt[1][2])-1]||(r[0]||[])[se],Bi=Ti?Ti.Name:"SH33TJSNAME"+String(se);Bi&&"_xlfn."==Bi.slice(0,6)&&!s.xlfn&&(Bi=Bi.slice(6)),g.push(Bi);break;case"PtgNameX":var Mn,Cn=pt[1][1];if(se=pt[1][2],!(s.biff<=5)){var Zi="";if(14849==((r[Cn]||[])[0]||[])[0]||(1025==((r[Cn]||[])[0]||[])[0]?r[Cn][se]&&r[Cn][se].itab>0&&(Zi=r.SheetNames[r[Cn][se].itab-1]+"!"):Zi=r.SheetNames[se-1]+"!"),r[Cn]&&r[Cn][se])Zi+=r[Cn][se].Name;else if(r[0]&&r[0][se])Zi+=r[0][se].Name;else{var Cr=(oS(r,Cn,s)||"").split(";;");Cr[se-1]?Zi=Cr[se-1]:Zi+="SH33TJSERRX"}g.push(Zi);break}Cn<0&&(Cn=-Cn),r[Cn]&&(Mn=r[Cn][se]),Mn||(Mn={Name:"SH33TJSERRY"}),g.push(Mn.Name);break;case"PtgParen":var ns="(",Gr=")";if(he>=0){switch(Ae="",i[0][he][1][0]){case 2:ns=gu(" ",i[0][he][1][1])+ns;break;case 3:ns=gu("\r",i[0][he][1][1])+ns;break;case 4:Gr=gu(" ",i[0][he][1][1])+Gr;break;case 5:Gr=gu("\r",i[0][he][1][1])+Gr;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+i[0][he][1][0])}he=-1}g.push(ns+g.pop()+Gr);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":g.push("#REF!");break;case"PtgExp":var ta={c:e.c,r:e.r};if(r.sharedf[ga(z={c:pt[1][1],r:pt[1][0]})]){var ws=r.sharedf[ga(z)];g.push(nf(ws,0,ta,r,s))}else{var Wa=!1;for(A=0;A!=r.arrayf.length;++A)if(!(z.c<(P=r.arrayf[A])[0].s.c||z.c>P[0].e.c||z.r<P[0].s.r||z.r>P[0].e.r)){g.push(nf(P[1],0,ta,r,s)),Wa=!0;break}Wa||g.push(pt[1])}break;case"PtgArray":g.push("{"+UF(pt[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":he=Ke;break;case"PtgMissArg":g.push("");break;case"PtgList":g.push("Table"+pt[1].idx+"[#"+pt[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(pt))}if(3!=s.biff&&he>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(i[0][Ke][0])){var aa=!0;switch((pt=i[0][he])[1][0]){case 4:aa=!1;case 0:Ae=gu(" ",pt[1][1]);break;case 5:aa=!1;case 1:Ae=gu("\r",pt[1][1]);break;default:if(Ae="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+pt[1][0])}g.push((aa?Ae:"")+g.pop()+(aa?"":Ae)),he=-1}}if(g.length>1&&s.WTF)throw new Error("bad formula stack");return g[0]}function Dw(i,t,e){var r=i.read_shift(4),s=function lb(i,t,e){for(var s,o,r=i.l+t,f=[];r!=i.l;)t=r-i.l,s=aS[o=i[i.l]]||aS[GF[o]],(24===o||25===o)&&(s=(24===o?HF:VF)[i[i.l+1]]),s&&s.f?f.push([s.n,s.f(i,t,e)]):Kd(i,t);return f}(i,r,e),o=i.read_shift(4);return[s,o>0?ob(i,o,s,e):null]}var e5=Dw,Iw=Dw,t5=Dw,n5=Dw,r5={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},cS={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},s5={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function a5(i){return("of:="+i.replace(o2,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function o5(i){return i.replace(/\./,"!")}var cb=typeof Map<"u";function d2(i,t,e){var r=0,s=i.length;if(e){if(cb?e.has(t):Object.prototype.hasOwnProperty.call(e,t))for(var o=cb?e.get(t):e[t];r<o.length;++r)if(i[o[r]].t===t)return i.Count++,o[r]}else for(;r<s;++r)if(i[r].t===t)return i.Count++,r;return i[s]={t},i.Count++,i.Unique++,e&&(cb?(e.has(t)||e.set(t,[]),e.get(t).push(s)):(Object.prototype.hasOwnProperty.call(e,t)||(e[t]=[]),e[t].push(s))),s}function Ow(i,t){var e={min:i+1,max:i+1},r=-1;return t.MDW&&(tf=t.MDW),null!=t.width?e.customWidth=1:null!=t.wpx?r=nb(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(e.width=kw(r),e.customWidth=1):null!=t.width&&(e.width=t.width),t.hidden&&(e.hidden=!0),null!=t.level&&(e.outlineLevel=e.level=t.level),e}function dy(i,t){if(i){var e=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(e=[1,1,1,1,.5,.5]),null==i.left&&(i.left=e[0]),null==i.right&&(i.right=e[1]),null==i.top&&(i.top=e[2]),null==i.bottom&&(i.bottom=e[3]),null==i.header&&(i.header=e[4]),null==i.footer&&(i.footer=e[5])}}function c_(i,t,e){var r=e.revssf[null!=t.z?t.z:"General"],s=60,o=i.length;if(null==r&&e.ssf)for(;s<392;++s)if(null==e.ssf[s]){$g(t.z,s),e.ssf[s]=t.z,e.revssf[t.z]=r=s;break}for(s=0;s!=o;++s)if(i[s].numFmtId===r)return s;return i[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function c5(i,t,e){if(i&&i["!ref"]){var r=fo(i["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+e+"): "+i["!ref"])}}var E5=["objects","scenarios","selectLockedCells","selectUnlockedCells"],k5=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function B5(i,t,e,r){if(i.c&&e["!comments"].push([t,i.c]),void 0===i.v&&"string"!=typeof i.f||"z"===i.t&&!i.f)return"";var s="",o=i.t,f=i.v;if("z"!==i.t)switch(i.t){case"b":s=i.v?"1":"0";break;case"n":s=""+i.v;break;case"e":s=hv[i.v];break;case"d":r&&r.cellDates?s=Jc(i.v,-1).toISOString():((i=Il(i)).t="n",s=""+(i.v=Qh(Jc(i.v)))),typeof i.z>"u"&&(i.z=sa[14]);break;default:s=i.v}var g=gd("v",nl(s)),A={r:t},P=c_(r.cellXfs,i,r);switch(0!==P&&(A.s=P),i.t){case"n":case"z":break;case"d":A.t="d";break;case"b":A.t="b";break;case"e":A.t="e";break;default:if(null==i.v){delete i.t;break}if(i.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){g=gd("v",""+d2(r.Strings,i.v,r.revStrings)),A.t="s";break}A.t="str"}if(i.t!=o&&(i.t=o,i.v=f),"string"==typeof i.f&&i.f){var z=i.F&&i.F.slice(0,t.length)==t?{t:"array",ref:i.F}:null;g=Ar("f",nl(i.f),z)+(null!=i.v?g:"")}return i.l&&e["!links"].push([t,i.l]),i.D&&(A.cm=1),Ar("c",g,A)}function dS(i,t,e,r){var f,s=[vu,Ar("worksheet",null,{xmlns:r_[0],"xmlns:r":oh.r})],g="",A=e.Sheets[e.SheetNames[i]];null==A&&(A={});var P=A["!ref"]||"A1",z=fo(P);if(z.e.c>16383||z.e.r>1048575){if(t.WTF)throw new Error("Range "+P+" exceeds format limit A1:XFD1048576");z.e.c=Math.min(z.e.c,16383),z.e.r=Math.min(z.e.c,1048575),P=Fa(z)}r||(r={}),A["!comments"]=[];var ie=[];(function C5(i,t,e,r,s){var o=!1,f={},g=null;if("xlsx"!==r.bookType&&t.vbaraw){var A=t.SheetNames[e];try{t.Workbook&&(A=t.Workbook.Sheets[e].CodeName||A)}catch{}o=!0,f.codeName=Zg(nl(A))}if(i&&i["!outline"]){var P={summaryBelow:1,summaryRight:1};i["!outline"].above&&(P.summaryBelow=0),i["!outline"].left&&(P.summaryRight=0),g=(g||"")+Ar("outlinePr",null,P)}!o&&!g||(s[s.length]=Ar("sheetPr",g,f))})(A,e,i,t,s),s[s.length]=Ar("dimension",null,{ref:P}),s[s.length]=function F5(i,t,e,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Ar("sheetViews",Ar("sheetView",null,s),{})}(0,0,0,e),t.sheetFormat&&(s[s.length]=Ar("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=A["!cols"]&&A["!cols"].length>0&&(s[s.length]=function M5(i,t){for(var r,e=["<cols>"],s=0;s!=t.length;++s)(r=t[s])&&(e[e.length]=Ar("col",null,Ow(s,r)));return e[e.length]="</cols>",e.join("")}(0,A["!cols"])),s[f=s.length]="<sheetData/>",A["!links"]=[],null!=A["!ref"]&&(g=function z5(i,t,e,r){var A,Ae,s=[],o=[],f=fo(i["!ref"]),g="",P="",z=[],ie=0,se=0,oe=i["!rows"],_e=Array.isArray(i),he={r:P},Ke=-1;for(se=f.s.c;se<=f.e.c;++se)z[se]=uc(se);for(ie=f.s.r;ie<=f.e.r;++ie){for(o=[],P=_u(ie),se=f.s.c;se<=f.e.c;++se){A=z[se]+P;var ct=_e?(i[ie]||[])[se]:i[A];void 0!==ct&&null!=(g=B5(ct,A,i,t))&&o.push(g)}(o.length>0||oe&&oe[ie])&&(he={r:P},oe&&oe[ie]&&((Ae=oe[ie]).hidden&&(he.hidden=1),Ke=-1,Ae.hpx?Ke=rb(Ae.hpx):Ae.hpt&&(Ke=Ae.hpt),Ke>-1&&(he.ht=Ke,he.customHeight=1),Ae.level&&(he.outlineLevel=Ae.level)),s[s.length]=Ar("row",o.join(""),he))}if(oe)for(;ie<oe.length;++ie)oe&&oe[ie]&&(he={r:ie+1},(Ae=oe[ie]).hidden&&(he.hidden=1),Ke=-1,Ae.hpx?Ke=rb(Ae.hpx):Ae.hpt&&(Ke=Ae.hpt),Ke>-1&&(he.ht=Ke,he.customHeight=1),Ae.level&&(he.outlineLevel=Ae.level),s[s.length]=Ar("row","",he));return s.join("")}(A,t),g.length>0&&(s[s.length]=g)),s.length>f+1&&(s[s.length]="</sheetData>",s[f]=s[f].replace("/>",">")),A["!protect"]&&(s[s.length]=function T5(i){var t={sheet:1};return E5.forEach(function(e){null!=i[e]&&i[e]&&(t[e]="1")}),k5.forEach(function(e){null!=i[e]&&!i[e]&&(t[e]="0")}),i.password&&(t.password=t2(i.password).toString(16).toUpperCase()),Ar("sheetProtection",null,t)}(A["!protect"])),null!=A["!autofilter"]&&(s[s.length]=function R5(i,t,e,r){var s="string"==typeof i.ref?i.ref:Fa(i.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var o=e.Workbook.Names,f=Of(s);f.s.r==f.e.r&&(f.e.r=Of(t["!ref"]).e.r,s=Fa(f));for(var g=0;g<o.length;++g){var A=o[g];if("_xlnm._FilterDatabase"==A.Name&&A.Sheet==r){A.Ref="'"+e.SheetNames[r]+"'!"+s;break}}return g==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+e.SheetNames[r]+"'!"+s}),Ar("autoFilter",null,{ref:s})}(A["!autofilter"],A,e,i)),null!=A["!merges"]&&A["!merges"].length>0&&(s[s.length]=function b5(i){if(0===i.length)return"";for(var t='<mergeCells count="'+i.length+'">',e=0;e!=i.length;++e)t+='<mergeCell ref="'+Fa(i[e])+'"/>';return t+"</mergeCells>"}(A["!merges"]));var oe,se=-1,_e=-1;return A["!links"].length>0&&(s[s.length]="<hyperlinks>",A["!links"].forEach(function(he){he[1].Target&&(oe={ref:he[0]},"#"!=he[1].Target.charAt(0)&&(_e=Zo(r,-1,nl(he[1].Target).replace(/#.*$/,""),Ba.HLINK),oe["r:id"]="rId"+_e),(se=he[1].Target.indexOf("#"))>-1&&(oe.location=nl(he[1].Target.slice(se+1))),he[1].Tooltip&&(oe.tooltip=nl(he[1].Tooltip)),s[s.length]=Ar("hyperlink",null,oe))}),s[s.length]="</hyperlinks>"),delete A["!links"],null!=A["!margins"]&&(s[s.length]=function D5(i){return dy(i),Ar("pageMargins",null,i)}(A["!margins"])),(!t||t.ignoreEC||null==t.ignoreEC)&&(s[s.length]=gd("ignoredErrors",Ar("ignoredError",null,{numberStoredAsText:1,sqref:P}))),ie.length>0&&(_e=Zo(r,-1,"../drawings/drawing"+(i+1)+".xml",Ba.DRAW),s[s.length]=Ar("drawing",null,{"r:id":"rId"+_e}),A["!drawing"]=ie),A["!comments"].length>0&&(_e=Zo(r,-1,"../drawings/vmlDrawing"+(i+1)+".vml",Ba.VML),s[s.length]=Ar("legacyDrawing",null,{"r:id":"rId"+_e}),A["!legacy"]=_e),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function H5(i,t,e,r){var s=function G5(i,t,e){var r=Bn(145),s=(e["!rows"]||[])[i]||{};r.write_shift(4,i),r.write_shift(4,0);var o=320;s.hpx?o=20*rb(s.hpx):s.hpt&&(o=20*s.hpt),r.write_shift(2,o),r.write_shift(1,0);var f=0;s.level&&(f|=s.level),s.hidden&&(f|=16),(s.hpx||s.hpt)&&(f|=32),r.write_shift(1,f),r.write_shift(1,0);var g=0,A=r.l;r.l+=4;for(var P={r:i,c:0},z=0;z<16;++z)if(!(t.s.c>z+1<<10||t.e.c<z<<10)){for(var ie=-1,se=-1,oe=z<<10;oe<z+1<<10;++oe)P.c=oe,(Array.isArray(e)?(e[P.r]||[])[P.c]:e[ga(P)])&&(ie<0&&(ie=oe),se=oe);ie<0||(++g,r.write_shift(4,ie),r.write_shift(4,se))}var he=r.l;return r.l=A,r.write_shift(4,g),r.l=he,r.length>r.l?r.slice(0,r.l):r}(r,e,t);(s.length>17||(t["!rows"]||[])[r])&&ir(i,0,s)}var V5=ry,U5=S1;var TB=ry,SB=S1,pS=["left","right","top","bottom","header","footer"];function UB(i,t,e,r,s,o,f){if(void 0===t.v)return!1;var g="";switch(t.t){case"b":g=t.v?"1":"0";break;case"d":(t=Il(t)).z=t.z||sa[14],t.v=Qh(Jc(t.v)),t.t="n";break;case"n":case"e":g=""+t.v;break;default:g=t.v}var A={r:e,c:r};switch(A.s=c_(s.cellXfs,t,s),t.l&&o["!links"].push([ga(A),t.l]),t.c&&o["!comments"].push([ga(A),t.c]),t.t){case"s":case"str":return s.bookSST?(g=d2(s.Strings,t.v,s.revStrings),A.t="s",A.v=g,f?ir(i,18,function cB(i,t,e){return null==e&&(e=Bn(8)),ny(t,e),e.write_shift(4,t.v),e}(0,A)):ir(i,7,function oB(i,t,e){return null==e&&(e=Bn(12)),ty(t,e),e.write_shift(4,t.v),e}(0,A))):(A.t="str",f?ir(i,17,function bB(i,t,e){return null==e&&(e=Bn(8+4*i.v.length)),ny(t,e),td(i.v,e),e.length>e.l?e.slice(0,e.l):e}(t,A)):ir(i,6,function yB(i,t,e){return null==e&&(e=Bn(12+4*i.v.length)),ty(t,e),td(i.v,e),e.length>e.l?e.slice(0,e.l):e}(t,A))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?f?ir(i,13,function gB(i,t,e){return null==e&&(e=Bn(8)),ny(t,e),Yk(i.v,e),e}(t,A)):ir(i,2,function pB(i,t,e){return null==e&&(e=Bn(12)),ty(t,e),Yk(i.v,e),e}(t,A)):f?ir(i,16,function dB(i,t,e){return null==e&&(e=Bn(12)),ny(t,e),sy(i.v,e),e}(t,A)):ir(i,5,function hB(i,t,e){return null==e&&(e=Bn(16)),ty(t,e),sy(i.v,e),e}(t,A)),!0;case"b":return A.t="b",f?ir(i,15,function tB(i,t,e){return null==e&&(e=Bn(5)),ny(t,e),e.write_shift(1,i.v?1:0),e}(t,A)):ir(i,4,function Q5(i,t,e){return null==e&&(e=Bn(9)),ty(t,e),e.write_shift(1,i.v?1:0),e}(t,A)),!0;case"e":return A.t="e",f?ir(i,14,function sB(i,t,e){return null==e&&(e=Bn(8)),ny(t,e),e.write_shift(1,i.v),e.write_shift(2,0),e.write_shift(1,0),e}(t,A)):ir(i,3,function nB(i,t,e){return null==e&&(e=Bn(9)),ty(t,e),e.write_shift(1,i.v),e}(t,A)),!0}return f?ir(i,12,function K5(i,t,e){return null==e&&(e=Bn(4)),ny(t,e)}(0,A)):ir(i,1,function Z5(i,t,e){return null==e&&(e=Bn(8)),ty(t,e)}(0,A)),!0}function eN(i,t,e,r){var s=Mf(),o=e.SheetNames[i],f=e.Sheets[o]||{},g=o;try{e&&e.Workbook&&(g=e.Workbook.Sheets[i].CodeName||g)}catch{}var A=fo(f["!ref"]||"A1");if(A.e.c>16383||A.e.r>1048575){if(t.WTF)throw new Error("Range "+(f["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");A.e.c=Math.min(A.e.c,16383),A.e.r=Math.min(A.e.c,1048575)}return f["!links"]=[],f["!comments"]=[],ir(s,129),(e.vbaraw||f["!outline"])&&ir(s,147,function $5(i,t,e){null==e&&(e=Bn(84+4*i.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),e.write_shift(1,r);for(var s=1;s<3;++s)e.write_shift(1,0);return mw({auto:1},e),e.write_shift(-4,-1),e.write_shift(-4,-1),zk(i,e),e.slice(0,e.l)}(g,f["!outline"])),ir(s,148,U5(A)),function JB(i,t,e){ir(i,133),ir(i,137,function NB(i,t,e){null==e&&(e=Bn(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,100),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(4,0),e}(0,e)),ir(i,138),ir(i,134)}(s,0,e.Workbook),function $B(i,t){!t||!t["!cols"]||(ir(i,390),t["!cols"].forEach(function(e,r){e&&ir(i,60,function LB(i,t,e){null==e&&(e=Bn(18));var r=Ow(i,t);e.write_shift(-4,i),e.write_shift(-4,i),e.write_shift(4,256*(r.width||10)),e.write_shift(4,0);var s=0;return t.hidden&&(s|=1),"number"==typeof r.width&&(s|=2),t.level&&(s|=t.level<<8),e.write_shift(2,s),e}(r,e))}),ir(i,391))}(s,f),function jB(i,t,e,r){var s=fo(t["!ref"]||"A1"),f="",g=[];ir(i,145);var A=Array.isArray(t),P=s.e.r;t["!rows"]&&(P=Math.max(s.e.r,t["!rows"].length-1));for(var z=s.s.r;z<=P;++z){f=_u(z),H5(i,t,s,z);var ie=!1;if(z<=s.e.r)for(var se=s.s.c;se<=s.e.c;++se){z===s.s.r&&(g[se]=uc(se));var oe=A?(t[z]||[])[se]:t[g[se]+f];ie=!!oe&&UB(i,oe,z,se,r,t,ie)}}ir(i,146)}(s,f,0,t),function QB(i,t){t["!protect"]&&ir(i,535,function YB(i,t){return null==t&&(t=Bn(66)),t.write_shift(2,i.password?t2(i.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){t.write_shift(4,e[1]?null==i[e[0]]||i[e[0]]?0:1:null!=i[e[0]]&&i[e[0]]?0:1)}),t}(t["!protect"]))}(s,f),function KB(i,t,e,r){if(t["!autofilter"]){var s=t["!autofilter"],o="string"==typeof s.ref?s.ref:Fa(s.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var f=e.Workbook.Names,g=Of(o);g.s.r==g.e.r&&(g.e.r=Of(t["!ref"]).e.r,o=Fa(g));for(var A=0;A<f.length;++A){var P=f[A];if("_xlnm._FilterDatabase"==P.Name&&P.Sheet==r){P.Ref="'"+e.SheetNames[r]+"'!"+o;break}}A==f.length&&f.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+e.SheetNames[r]+"'!"+o}),ir(i,161,S1(fo(o))),ir(i,162)}}(s,f,e,i),function WB(i,t){!t||!t["!merges"]||(ir(i,177,function AB(i,t){return null==t&&(t=Bn(4)),t.write_shift(4,i),t}(t["!merges"].length)),t["!merges"].forEach(function(e){ir(i,176,SB(e))}),ir(i,178))}(s,f),function ZB(i,t,e){t["!links"].forEach(function(r){if(r[1].Target){var s=Zo(e,-1,r[1].Target.replace(/#.*$/,""),Ba.HLINK);ir(i,494,function IB(i,t){var e=Bn(50+4*(i[1].Target.length+(i[1].Tooltip||"").length));S1({s:Hu(i[0]),e:Hu(i[0])},e),GC("rId"+t,e);var r=i[1].Target.indexOf("#");return td((-1==r?"":i[1].Target.slice(r+1))||"",e),td(i[1].Tooltip||"",e),td("",e),e.slice(0,e.l)}(r,s))}}),delete t["!links"]}(s,f,r),f["!margins"]&&ir(s,476,function FB(i,t){return null==t&&(t=Bn(48)),dy(i),pS.forEach(function(e){sy(i[e],t)}),t}(f["!margins"])),(!t||t.ignoreEC||null==t.ignoreEC)&&function XB(i,t){!t||!t["!ref"]||(ir(i,648),ir(i,649,function zB(i){var t=Bn(24);return t.write_shift(4,4),t.write_shift(4,1),S1(i,t),t}(fo(t["!ref"]))),ir(i,650))}(s,f),function qB(i,t,e,r){if(t["!comments"].length>0){var s=Zo(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Ba.VML);ir(i,551,GC("rId"+s)),t["!legacy"]=s}}(s,f,i,r),ir(s,130),s.end()}var p2=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],dN="][*?/\\".split("");function _S(i,t){if(i.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var e=!0;return dN.forEach(function(r){if(-1!=i.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");e=!1}}),e}function xS(i){var t=[vu];t[t.length]=Ar("workbook",null,{xmlns:r_[0],"xmlns:r":oh.r});var e=i.Workbook&&(i.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};i.Workbook&&i.Workbook.WBProps&&(p2.forEach(function(g){null!=i.Workbook.WBProps[g[0]]&&i.Workbook.WBProps[g[0]]!=g[1]&&(r[g[0]]=i.Workbook.WBProps[g[0]])}),i.Workbook.WBProps.CodeName&&(r.codeName=i.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Ar("workbookPr",null,r);var s=i.Workbook&&i.Workbook.Sheets||[],o=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",o=0;o!=i.SheetNames.length&&s[o]&&s[o].Hidden;++o);o==i.SheetNames.length&&(o=0),t[t.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",o=0;o!=i.SheetNames.length;++o){var f={name:nl(i.SheetNames[o].slice(0,31))};if(f.sheetId=""+(o+1),f["r:id"]="rId"+(o+1),s[o])switch(s[o].Hidden){case 1:f.state="hidden";break;case 2:f.state="veryHidden"}t[t.length]=Ar("sheet",null,f)}return t[t.length]="</sheets>",e&&(t[t.length]="<definedNames>",i.Workbook&&i.Workbook.Names&&i.Workbook.Names.forEach(function(g){var A={name:g.Name};g.Comment&&(A.comment=g.Comment),null!=g.Sheet&&(A.localSheetId=""+g.Sheet),g.Hidden&&(A.hidden="1"),g.Ref&&(t[t.length]=Ar("definedName",nl(g.Ref),A))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function vN(i,t){return t||(t=Bn(127)),t.write_shift(4,i.Hidden),t.write_shift(4,i.iTabID),GC(i.strRelID,t),td(i.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function SN(i,t){var e=Mf();return ir(e,131),ir(e,128,function EN(i,t){t||(t=Bn(127));for(var e=0;4!=e;++e)t.write_shift(4,0);return td("SheetJS",t),td(Fx.version,t),td(Fx.version,t),td("7262",t),t.length>t.l?t.slice(0,t.l):t}()),ir(e,153,function yN(i,t){t||(t=Bn(72));var e=0;return i&&i.filterPrivacy&&(e|=8),t.write_shift(4,e),t.write_shift(4,0),zk(i&&i.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(i.Workbook&&i.Workbook.WBProps||null)),function TN(i,t){if(t.Workbook&&t.Workbook.Sheets){for(var e=t.Workbook.Sheets,r=0,s=-1,o=-1;r<e.length;++r)!e[r]||!e[r].Hidden&&-1==s?s=r:1==e[r].Hidden&&-1==o&&(o=r);o>s||(ir(i,135),ir(i,158,function kN(i,t){return t||(t=Bn(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,i),t.write_shift(4,i),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(s)),ir(i,136))}}(e,i),function CN(i,t){ir(i,143);for(var e=0;e!=t.SheetNames.length;++e)ir(i,156,vN({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[e]&&t.Workbook.Sheets[e].Hidden||0,iTabID:e+1,strRelID:"rId"+(e+1),name:t.SheetNames[e]}));ir(i,144)}(e,i),ir(e,132),e.end()}function GN(i,t,e,r,s){return(".bin"===t.slice(-4)?eN:dS)(i,e,r,s)}function UN(i,t,e){return(".bin"===t.slice(-4)?k4:KT)(i,e)}function CS(i){return Ar("NamedRange",null,{"ss:Name":i.Name,"ss:RefersTo":"="+l2(i.Ref,{r:0,c:0})})}function az(i,t,e,r,s,o,f){if(!i||null==i.v&&null==i.f)return"";var g={};if(i.f&&(g["ss:Formula"]="="+nl(l2(i.f,f))),i.F&&i.F.slice(0,t.length)==t){var A=Hu(i.F.slice(t.length+1));g["ss:ArrayRange"]="RC:R"+(A.r==f.r?"":"["+(A.r-f.r)+"]")+"C"+(A.c==f.c?"":"["+(A.c-f.c)+"]")}if(i.l&&i.l.Target&&(g["ss:HRef"]=nl(i.l.Target),i.l.Tooltip&&(g["x:HRefScreenTip"]=nl(i.l.Tooltip))),e["!merges"])for(var P=e["!merges"],z=0;z!=P.length;++z)P[z].s.c!=f.c||P[z].s.r!=f.r||(P[z].e.c>P[z].s.c&&(g["ss:MergeAcross"]=P[z].e.c-P[z].s.c),P[z].e.r>P[z].s.r&&(g["ss:MergeDown"]=P[z].e.r-P[z].s.r));var ie="",se="";switch(i.t){case"z":if(!r.sheetStubs)return"";break;case"n":ie="Number",se=String(i.v);break;case"b":ie="Boolean",se=i.v?"1":"0";break;case"e":ie="Error",se=hv[i.v];break;case"d":ie="DateTime",se=new Date(i.v).toISOString(),null==i.z&&(i.z=i.z||sa[14]);break;case"s":ie="String",se=function kO(i){return(i+"").replace(kC,function(e){return EC[e]}).replace(pk,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}(i.v||"")}var oe=c_(r.cellXfs,i,r);g["ss:StyleID"]="s"+(21+oe),g["ss:Index"]=f.c+1;var he="z"==i.t?"":'<Data ss:Type="'+ie+'">'+(null!=i.v?se:"")+"</Data>";return(i.c||[]).length>0&&(he+=function sz(i){return i.map(function(t){var e=function TO(i){return i.replace(/(\r\n|[\r\n])/g,"&#10;")}(t.t||""),r=Ar("ss:Data",e,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ar("Comment",r,{"ss:Author":t.a})}).join("")}(i.c)),Ar("Cell",he,g)}function oz(i,t){var e='<Row ss:Index="'+(i+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Tw(t.hpt)),t.hpx&&(e+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(e+=' ss:Hidden="1"')),e+">"}function cz(i,t,e){var r=[],o=e.Sheets[e.SheetNames[i]],f=o?function nz(i,t,e,r){if(!i||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,o=[],f=0;f<s.length;++f){var g=s[f];g.Sheet==e&&(g.Name.match(/^_xlfn\./)||o.push(CS(g)))}return o.join("")}(o,0,i,e):"";return f.length>0&&r.push("<Names>"+f+"</Names>"),f=o?function lz(i,t,e,r){if(!i["!ref"])return"";var s=fo(i["!ref"]),o=i["!merges"]||[],f=0,g=[];i["!cols"]&&i["!cols"].forEach(function(Ae,Ke){o_(Ae);var ct=!!Ae.width,pt=Ow(Ke,Ae),mi={"ss:Index":Ke+1};ct&&(mi["ss:Width"]=ib(pt.width)),Ae.hidden&&(mi["ss:Hidden"]="1"),g.push(Ar("Column",null,mi))});for(var A=Array.isArray(i),P=s.s.r;P<=s.e.r;++P){for(var z=[oz(P,(i["!rows"]||[])[P])],ie=s.s.c;ie<=s.e.c;++ie){var se=!1;for(f=0;f!=o.length;++f)if(!(o[f].s.c>ie||o[f].s.r>P||o[f].e.c<ie||o[f].e.r<P)){(o[f].s.c!=ie||o[f].s.r!=P)&&(se=!0);break}if(!se){var oe={r:P,c:ie},_e=ga(oe);z.push(az(A?(i[P]||[])[ie]:i[_e],_e,i,t,0,0,oe))}}z.push("</Row>"),z.length>2&&g.push(z.join(""))}return g.join("")}(o,t):"",f.length>0&&r.push("<Table>"+f+"</Table>"),r.push(function rz(i,t,e,r){if(!i)return"";var s=[];if(i["!margins"]&&(s.push("<PageSetup>"),i["!margins"].header&&s.push(Ar("Header",null,{"x:Margin":i["!margins"].header})),i["!margins"].footer&&s.push(Ar("Footer",null,{"x:Margin":i["!margins"].footer})),s.push(Ar("PageMargins",null,{"x:Bottom":i["!margins"].bottom||"0.75","x:Left":i["!margins"].left||"0.7","x:Right":i["!margins"].right||"0.7","x:Top":i["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[e])if(r.Workbook.Sheets[e].Hidden)s.push(Ar("Visible",1==r.Workbook.Sheets[e].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<e&&(!r.Workbook.Sheets[o]||r.Workbook.Sheets[o].Hidden);++o);o==e&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),i["!protect"]&&(s.push(gd("ProtectContents","True")),i["!protect"].objects&&s.push(gd("ProtectObjects","True")),i["!protect"].scenarios&&s.push(gd("ProtectScenarios","True")),null==i["!protect"].selectLockedCells||i["!protect"].selectLockedCells?null!=i["!protect"].selectUnlockedCells&&!i["!protect"].selectUnlockedCells&&s.push(gd("EnableSelection","UnlockedCells")):s.push(gd("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(f){i["!protect"][f[0]]&&s.push("<"+f[1]+"/>")})),0==s.length?"":Ar("WorksheetOptions",s.join(""),{xmlns:Pp.x})}(o,0,i,e)),r.join("")}function uz(i,t){t||(t={}),i.SSF||(i.SSF=Il(sa)),i.SSF&&(w1(),Vx(i.SSF),t.revssf=cw(i.SSF),t.revssf[i.SSF[65535]]=0,t.ssf=i.SSF,t.cellXfs=[],c_(t.cellXfs,{},{revssf:{General:0}}));var e=[];e.push(function QN(i,t){var e=[];return i.Props&&e.push(function kR(i,t){var e=[];return mu(ZC).map(function(r){for(var s=0;s<dv.length;++s)if(dv[s][1]==r)return dv[s];for(s=0;s<oy.length;++s)if(oy[s][1]==r)return oy[s];throw r}).forEach(function(r){if(null!=i[r[1]]){var s=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:i[r[1]];"date"===r[2]&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof s?s=String(s):!0===s||!1===s?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),e.push(gd(ZC[r[1]]||r[1],s))}}),Ar("DocumentProperties",e.join(""),{xmlns:Pp.o})}(i.Props,t)),i.Custprops&&e.push(function TR(i,t){var e=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return i&&mu(i).forEach(function(o){if(Object.prototype.hasOwnProperty.call(i,o)){for(var f=0;f<dv.length;++f)if(o==dv[f][1])return;for(f=0;f<oy.length;++f)if(o==oy[f][1])return;for(f=0;f<e.length;++f)if(o==e[f])return;var g=i[o],A="string";"number"==typeof g?(A="float",g=String(g)):!0===g||!1===g?(A="boolean",g=g?"1":"0"):g=String(g),s.push(Ar(fk(o),g,{"dt:dt":A}))}}),t&&mu(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)&&(!i||!Object.prototype.hasOwnProperty.call(i,o))){var f=t[o],g="string";"number"==typeof f?(g="float",f=String(f)):!0===f||!1===f?(g="boolean",f=f?"1":"0"):f instanceof Date?(g="dateTime.tz",f=f.toISOString()):f=String(f),s.push(Ar(fk(o),f,{"dt:dt":g}))}}),"<"+r+' xmlns="'+Pp.o+'">'+s.join("")+"</"+r+">"}(i.Props,i.Custprops)),e.join("")}(i,t)),e.push(""),e.push(""),e.push("");for(var r=0;r<i.SheetNames.length;++r)e.push(Ar("Worksheet",cz(r,t,i),{"ss:Name":nl(i.SheetNames[r])}));return e[2]=function tz(i,t){var e=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(r,s){var o=[];o.push(Ar("NumberFormat",null,{"ss:Format":nl(sa[r.numFmtId])}));var f={"ss:ID":"s"+(21+s)};e.push(Ar("Style",o.join(""),f))}),Ar("Styles",e.join(""))}(0,t),e[3]=function iz(i){if(!((i||{}).Workbook||{}).Names)return"";for(var t=i.Workbook.Names,e=[],r=0;r<t.length;++r){var s=t[r];null==s.Sheet&&(s.Name.match(/^_xlfn\./)||e.push(CS(s)))}return Ar("Names",e.join(""))}(i),vu+Ar("Workbook",e.join(""),{xmlns:Pp.ss,"xmlns:o":Pp.o,"xmlns:x":Pp.x,"xmlns:ss":Pp.ss,"xmlns:dt":Pp.dt,"xmlns:html":Pp.html})}var hb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};var db={0:{f:function Y5(i,t){var e={},r=i.l+t;e.r=i.read_shift(4),i.l+=4;var s=i.read_shift(2);i.l+=1;var o=i.read_shift(1);return i.l=r,7&o&&(e.level=7&o),16&o&&(e.hidden=!0),32&o&&(e.hpt=s/20),e}},1:{f:function X5(i){return[_m(i)]}},2:{f:function fB(i){return[_m(i),HC(i),"n"]}},3:{f:function iB(i){return[_m(i),i.read_shift(1),"e"]}},4:{f:function J5(i){return[_m(i),i.read_shift(1),"b"]}},5:{f:function uB(i){return[_m(i),Qd(i),"n"]}},6:{f:function _B(i){return[_m(i),Jd(i),"str"]}},7:{f:function aB(i){return[_m(i),i.read_shift(4),"s"]}},8:{f:function kB(i,t,e){var r=i.l+t,s=_m(i);s.r=e["!row"];var f=[s,Jd(i),"str"];if(e.cellFormula){i.l+=2;var g=Iw(i,r-i.l,e);f[3]=nf(g,0,s,e.supbooks,e)}else i.l=r;return f}},9:{f:function EB(i,t,e){var r=i.l+t,s=_m(i);s.r=e["!row"];var f=[s,Qd(i),"n"];if(e.cellFormula){i.l+=2;var g=Iw(i,r-i.l,e);f[3]=nf(g,0,s,e.supbooks,e)}else i.l=r;return f}},10:{f:function wB(i,t,e){var r=i.l+t,s=_m(i);s.r=e["!row"];var f=[s,i.read_shift(1),"b"];if(e.cellFormula){i.l+=2;var g=Iw(i,r-i.l,e);f[3]=nf(g,0,s,e.supbooks,e)}else i.l=r;return f}},11:{f:function CB(i,t,e){var r=i.l+t,s=_m(i);s.r=e["!row"];var f=[s,i.read_shift(1),"e"];if(e.cellFormula){i.l+=2;var g=Iw(i,r-i.l,e);f[3]=nf(g,0,s,e.supbooks,e)}else i.l=r;return f}},12:{f:function q5(i){return[iy(i)]}},13:{f:function mB(i){return[iy(i),HC(i),"n"]}},14:{f:function rB(i){return[iy(i),i.read_shift(1),"e"]}},15:{f:function eB(i){return[iy(i),i.read_shift(1),"b"]}},16:{f:function fS(i){return[iy(i),Qd(i),"n"]}},17:{f:function xB(i){return[iy(i),Jd(i),"str"]}},18:{f:function lB(i){return[iy(i),i.read_shift(4),"s"]}},19:{f:NC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function bN(i,t,e){var r=i.l+t;i.l+=4,i.l+=1;var s=i.read_shift(4),o=JO(i),f=t5(i,0,e),g=zC(i);i.l=r;var A={Name:o,Ptg:f};return s<268435455&&(A.Sheet=s),g&&(A.Comment=g),A}},40:{},42:{},43:{f:function g3(i,t,e){var r={};r.sz=i.read_shift(2)/20;var s=function tR(i){var t=i.read_shift(1);return i.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(i);switch(s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1),700===i.read_shift(2)&&(r.bold=1),i.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var f=i.read_shift(1);0!=f&&(r.underline=f);var g=i.read_shift(1);g>0&&(r.family=g);var A=i.read_shift(1);switch(A>0&&(r.charset=A),i.l++,r.color=function eR(i){var t={},r=i.read_shift(1)>>>1,s=i.read_shift(1),o=i.read_shift(2,"i"),f=i.read_shift(1),g=i.read_shift(1),A=i.read_shift(1);switch(i.l++,r){case 0:t.auto=1;break;case 1:t.index=s;var P=ay[s];P&&(t.rgb=tb(P));break;case 2:t.rgb=tb([f,g,A]);break;case 3:t.theme=s}return 0!=o&&(t.tint=o>0?o/32767:o/32768),t}(i),i.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=Jd(i),r}},44:{f:function p3(i,t){return[i.read_shift(2),Jd(i)]}},45:{f:y3},46:{f:b3},47:{f:function x3(i,t){var e=i.l+t,r=i.read_shift(2),s=i.read_shift(2);return i.l=e,{ixfe:r,numFmtId:s}}},48:{},49:{f:function jO(i){return i.read_shift(4,"i")}},50:{},51:{f:function t4(i){for(var t=[],e=i.read_shift(4);e-- >0;)t.push([i.read_shift(4),i.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:function MT(i,t,e){if(!e.cellStyles)return Kd(i,t);var r=e&&e.biff>=12?4:2,s=i.read_shift(r),o=i.read_shift(r),f=i.read_shift(r),g=i.read_shift(r),A=i.read_shift(2);2==r&&(i.l+=2);var P={s,e:o,w:f,ixfe:g,flags:A};return(e.biff>=5||!e.biff)&&(P.level=A>>8&7),P}},62:{f:function vB(i){return[_m(i),NC(i),"is"]}},63:{f:function h4(i){var t={};t.i=i.read_shift(4);var e={};e.r=i.read_shift(4),e.c=i.read_shift(4),t.r=ga(e);var r=i.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function GB(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Kd,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function BB(i){var t=i.read_shift(2);return i.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function W5(i,t){var e={},r=i[i.l];return++i.l,e.above=!(64&r),e.left=!(128&r),i.l+=18,e.name=KO(i,t-19),e}},148:{f:V5,p:16},151:{f:function MB(){}},152:{},153:{f:function _N(i,t){var e={},r=i.read_shift(4);e.defaultThemeVersion=i.read_shift(4);var s=t>8?Jd(i):"";return s.length>0&&(e.CodeName=s),e.autoCompressPictures=!!(65536&r),e.backupFile=!!(64&r),e.checkCompatibility=!!(4096&r),e.date1904=!!(1&r),e.filterPrivacy=!!(8&r),e.hidePivotFieldList=!!(1024&r),e.promptedSolutions=!!(16&r),e.publishItems=!!(2048&r),e.refreshAllConnections=!!(262144&r),e.saveExternalLinkValues=!!(128&r),e.showBorderUnselectedTables=!!(4&r),e.showInkAnnotation=!!(32&r),e.showObjects=["all","placeholders","none"][r>>13&3],e.showPivotChartFilter=!!(32768&r),e.updateLinks=["userSet","never","always"][r>>8&3],e}},154:{},155:{},156:{f:function gN(i,t){var e={};return e.Hidden=i.read_shift(4),e.iTabID=i.read_shift(4),e.strRelID=YC(i,t-8),e.name=Jd(i),e}},157:{},158:{},159:{T:1,f:function PP(i){return[i.read_shift(4),i.read_shift(4)]}},160:{T:-1},161:{T:1,f:ry},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:TB},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function Q3(i,t){return{flags:i.read_shift(4),version:i.read_shift(4),name:Jd(i)}}},336:{T:-1},337:{f:function s4(i){return i.l+=4,0!=i.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:YC},357:{},358:{},359:{},360:{T:1},361:{},362:{f:function DT(i,t,e){if(e.biff<8)return function YL(i,t,e){3==i[i.l+1]&&i[i.l]++;var r=Qx(i,0,e);return 3==r.charCodeAt(0)?r.slice(1):r}(i,0,e);for(var r=[],s=i.l+t,o=i.read_shift(e.biff>8?4:2);0!=o--;)r.push(XR(i,0,e));if(i.l!=s)throw new Error("Bad ExternSheet: "+i.l+" != "+s);return r}},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function OB(i,t,e){var r=i.l+t,s=Gk(i),o=i.read_shift(1),f=[s];if(f[2]=o,e.cellFormula){var g=e5(i,r-i.l,e);f[1]=g}else i.l=r;return f}},427:{f:function RB(i,t,e){var r=i.l+t,o=[ry(i,16)];if(e.cellFormula){var f=n5(i,r-i.l,e);o[1]=f,i.l=r}else i.l=r;return o}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function PB(i){var t={};return pS.forEach(function(e){t[e]=Qd(i)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function j5(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function DB(i,t){var e=i.l+t,r=ry(i,16),s=zC(i),o=Jd(i),f=Jd(i),g=Jd(i);i.l=e;var A={rfx:r,relId:s,loc:o,display:g};return f&&(A.Tooltip=f),A}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:YC},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:w4},633:{T:1},634:{T:-1},635:{T:1,f:function x4(i){var t={};t.iauthor=i.read_shift(4);var e=ry(i,16);return t.rfx=e.s,t.ref=ga(e.s),i.l+=16,t}},636:{T:-1},637:{f:ZO},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function sN(i,t){return i.l+=10,{name:Jd(i)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function HB(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Br(i,t,e,r){var s=t;if(!isNaN(s)){var o=r||(e||[]).length||0,f=i.next(4);f.write_shift(2,s),f.write_shift(2,o),o>0&&LC(e)&&i.push(e)}}function fb(i,t,e){return i||(i=Bn(7)),i.write_shift(2,t),i.write_shift(2,e),i.write_shift(2,0),i.write_shift(1,0),i}function bz(i,t,e,r){if(null!=t.v)switch(t.t){case"d":case"n":var s="d"==t.t?Qh(Jc(t.v)):t.v;return void(s==(0|s)&&s>=0&&s<65536?Br(i,2,function yP(i,t,e){var r=Bn(9);return fb(r,i,t),r.write_shift(2,e),r}(e,r,s)):Br(i,3,function vP(i,t,e){var r=Bn(15);return fb(r,i,t),r.write_shift(8,e,"f"),r}(e,r,s)));case"b":case"e":return void Br(i,5,function yz(i,t,e,r){var s=Bn(9);return fb(s,i,t),fT(e,r||"b",s),s}(e,r,t.v,t.t));case"s":case"str":return void Br(i,4,function xz(i,t,e){var r=Bn(8+2*e.length);return fb(r,i,t),r.write_shift(1,e.length),r.write_shift(e.length,e,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(e,r,(t.v||"").slice(0,255)))}Br(i,1,fb(null,e,r))}function Iz(i,t,e,r,s){var o=16+c_(s.cellXfs,t,s);if(null!=t.v||t.bf)if(t.bf)Br(i,6,function QF(i,t,e,r,s){var o=uy(t,e,s),f=function JF(i){if(null==i){var t=Bn(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return sy("number"==typeof i?i:0)}(i.v),g=Bn(6);g.write_shift(2,33),g.write_shift(4,0);for(var P=Bn(i.bf.length),z=0;z<i.bf.length;++z)P[z]=i.bf[z];return Jh([o,f,g,P])}(t,e,r,0,o));else switch(t.t){case"d":case"n":Br(i,515,function BL(i,t,e,r){var s=Bn(14);return uy(i,t,r,s),sy(e,s),s}(e,r,"d"==t.t?Qh(Jc(t.v)):t.v,o));break;case"b":case"e":Br(i,517,function PL(i,t,e,r,s,o){var f=Bn(8);return uy(i,t,r,f),fT(e,o,f),f}(e,r,t.v,o,0,t.t));break;case"s":case"str":s.bookSST?Br(i,253,function bL(i,t,e,r){var s=Bn(10);return uy(i,t,r,s),s.write_shift(4,e),s}(e,r,d2(s.Strings,t.v,s.revStrings),o)):Br(i,516,function CL(i,t,e,r,s){var o=!s||8==s.biff,f=Bn(+o+8+(1+o)*e.length);return uy(i,t,r,f),f.write_shift(2,e.length),o&&f.write_shift(1,1),f.write_shift((1+o)*e.length,e,o?"utf16le":"sbcs"),f}(e,r,(t.v||"").slice(0,255),o,s));break;default:Br(i,513,uy(e,r,o))}else Br(i,513,uy(e,r,o))}function Mz(i,t,e){var z,r=Mf(),s=e.SheetNames[i],o=e.Sheets[s]||{},f=(e||{}).Workbook||{},g=(f.Sheets||[])[i]||{},A=Array.isArray(o),P=8==t.biff,ie="",se=[],oe=fo(o["!ref"]||"A1"),_e=P?65536:16384;if(oe.e.c>255||oe.e.r>=_e){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");oe.e.c=Math.min(oe.e.c,255),oe.e.r=Math.min(oe.e.c,_e-1)}Br(r,2057,QC(0,16,t)),Br(r,13,ym(1)),Br(r,12,ym(100)),Br(r,15,Rf(!0)),Br(r,17,Rf(!1)),Br(r,16,sy(.001)),Br(r,95,Rf(!0)),Br(r,42,Rf(!1)),Br(r,43,Rf(!1)),Br(r,130,ym(1)),Br(r,128,function LL(i){var t=Bn(8);return t.write_shift(4,0),t.write_shift(2,i[0]?i[0]+1:0),t.write_shift(2,i[1]?i[1]+1:0),t}([0,0])),Br(r,131,Rf(!1)),Br(r,132,Rf(!1)),P&&function Dz(i,t){if(t){var e=0;t.forEach(function(r,s){++e<=256&&r&&Br(i,125,function oP(i,t){var e=Bn(12);e.write_shift(2,t),e.write_shift(2,t),e.write_shift(2,256*i.width),e.write_shift(2,0);var r=0;return i.hidden&&(r|=1),e.write_shift(1,r),e.write_shift(1,r=i.level||0),e.write_shift(2,0),e}(Ow(s,r),s))})}}(r,o["!cols"]),Br(r,512,function SL(i,t){var e=8!=t.biff&&t.biff?2:4,r=Bn(2*e+6);return r.write_shift(e,i.s.r),r.write_shift(e,i.e.r+1),r.write_shift(2,i.s.c),r.write_shift(2,i.e.c+1),r.write_shift(2,0),r}(oe,t)),P&&(o["!links"]=[]);for(var he=oe.s.r;he<=oe.e.r;++he){ie=_u(he);for(var Ae=oe.s.c;Ae<=oe.e.c;++Ae){he===oe.s.r&&(se[Ae]=uc(Ae)),z=se[Ae]+ie;var Ke=A?(o[he]||[])[Ae]:o[z];Ke&&(Iz(r,Ke,he,Ae,t),P&&Ke.l&&o["!links"].push([z,Ke.l]))}}var ct=g.CodeName||g.name||s;return P&&Br(r,574,function gL(i){var t=Bn(18),e=1718;return i&&i.RTL&&(e|=64),t.write_shift(2,e),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((f.Views||[])[0])),P&&(o["!merges"]||[]).length&&Br(r,229,function $L(i){var t=Bn(2+8*i.length);t.write_shift(2,i.length);for(var e=0;e<i.length;++e)yT(i[e],t);return t}(o["!merges"])),P&&function Az(i,t){for(var e=0;e<t["!links"].length;++e){var r=t["!links"][e];Br(i,440,QL(r)),r[1].Tooltip&&Br(i,2048,tP(r))}delete t["!links"]}(r,o),Br(r,442,pT(ct)),P&&function Tz(i,t){var e=Bn(19);e.write_shift(4,2151),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,1),e.write_shift(4,0),Br(i,2151,e),(e=Bn(39)).write_shift(4,2152),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(2,1),e.write_shift(4,4),e.write_shift(2,0),yT(fo(t["!ref"]||"A1"),e),e.write_shift(4,4),Br(i,2152,e)}(r,o),Br(r,10),r.end()}function Oz(i,t,e){var r=Mf(),s=(i||{}).Workbook||{},o=s.Sheets||[],f=s.WBProps||{},g=8==e.biff,A=5==e.biff;Br(r,2057,QC(0,5,e)),"xla"==e.bookType&&Br(r,135),Br(r,225,g?ym(1200):null),Br(r,193,function PR(i,t){t||(t=Bn(i));for(var e=0;e<i;++e)t.write_shift(1,0);return t}(2)),A&&Br(r,191),A&&Br(r,192),Br(r,226),Br(r,92,function nL(i,t){var e=!t||8==t.biff,r=Bn(e?112:54);for(r.write_shift(8==t.biff?2:1,7),e&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(e?0:536870912));r.l<r.length;)r.write_shift(1,e?0:32);return r}(0,e)),Br(r,66,ym(g?1200:1252)),g&&Br(r,353,ym(0)),g&&Br(r,448),Br(r,317,function uP(i){for(var t=Bn(2*i),e=0;e<i;++e)t.write_shift(2,e+1);return t}(i.SheetNames.length)),g&&i.vbaraw&&Br(r,211),g&&i.vbaraw&&Br(r,442,pT(f.CodeName||"ThisWorkbook")),Br(r,156,ym(17)),Br(r,25,Rf(!1)),Br(r,18,Rf(!1)),Br(r,19,ym(0)),g&&Br(r,431,Rf(!1)),g&&Br(r,444,ym(0)),Br(r,61,function pL(){var i=Bn(18);return i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,29280),i.write_shift(2,17600),i.write_shift(2,56),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,1),i.write_shift(2,500),i}()),Br(r,64,Rf(!1)),Br(r,141,ym(0)),Br(r,34,Rf("true"==function hN(i){return i.Workbook&&i.Workbook.WBProps&&function Lc(i){switch(i){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}(i.Workbook.WBProps.date1904)?"true":"false"}(i))),Br(r,14,Rf(!0)),g&&Br(r,439,Rf(!1)),Br(r,218,ym(0)),function Ez(i,t,e){Br(i,49,function yL(i,t){var e=i.name||"Arial",r=t&&5==t.biff,o=Bn(r?15+e.length:16+2*e.length);return o.write_shift(2,20*(i.sz||12)),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,e.length),r||o.write_shift(1,1),o.write_shift((r?1:2)*e.length,e,r?"sbcs":"utf16le"),o}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},e))}(r,0,e),function kz(i,t,e){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)null!=t[s]&&Br(i,1054,kL(s,t[s],e))})}(r,i.SSF,e),function Sz(i,t){for(var e=0;e<16;++e)Br(i,224,ET({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(r){Br(i,224,ET(r,0,t))})}(r,e),g&&Br(r,352,Rf(!1));var z=r.end(),ie=Mf();g&&Br(ie,140,function nP(i){return i||(i=Bn(4)),i.write_shift(2,1),i.write_shift(2,1),i}()),g&&e.Strings&&function _z(i,t,e,r){var s=r||(e||[]).length||0;if(s<=8224)return Br(i,t,e,s);var o=t;if(!isNaN(o)){for(var f=e.parts||[],g=0,A=0,P=0;P+(f[g]||8224)<=8224;)P+=f[g]||8224,g++;var z=i.next(4);for(z.write_shift(2,o),z.write_shift(2,P),i.push(e.slice(A,A+P)),A+=P;A<s;){for((z=i.next(4)).write_shift(2,60),P=0;P+(f[g]||8224)<=8224;)P+=f[g]||8224,g++;z.write_shift(2,P),i.push(e.slice(A,A+P)),A+=P}}}(ie,252,function lL(i,t){var e=Bn(8);e.write_shift(4,i.Count),e.write_shift(4,i.Unique);for(var r=[],s=0;s<i.length;++s)r[s]=zR(i[s]);var o=Jh([e].concat(r));return o.parts=[e.length].concat(r.map(function(f){return f.length})),o}(e.Strings)),Br(ie,10);var se=ie.end(),oe=Mf(),_e=0,he=0;for(he=0;he<i.SheetNames.length;++he)_e+=(g?12:11)+(g?2:1)*i.SheetNames[he].length;var Ae=z.length+_e+se.length;for(he=0;he<i.SheetNames.length;++he)Br(oe,133,aL({pos:Ae,hs:(o[he]||{}).Hidden||0,dt:0,name:i.SheetNames[he]},e)),Ae+=t[he].length;var ct=oe.end();if(_e!=ct.length)throw new Error("BS8 "+_e+" != "+ct.length);var pt=[];return z.length&&pt.push(z),ct.length&&pt.push(ct),se.length&&pt.push(se),Jh(pt)}function kS(i,t){for(var e=0;e<=i.SheetNames.length;++e){var r=i.Sheets[i.SheetNames[e]];r&&r["!ref"]&&Of(r["!ref"]).e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+i.SheetNames[e]+"' extends beyond column IV (255).  Data may be lost.")}var o=t||{};switch(o.biff||2){case 8:case 5:return function Rz(i,t){var e=t||{},r=[];i&&!i.SSF&&(i.SSF=Il(sa)),i&&i.SSF&&(w1(),Vx(i.SSF),e.revssf=cw(i.SSF),e.revssf[i.SSF[65535]]=0,e.ssf=i.SSF),e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,E2(e),e.cellXfs=[],c_(e.cellXfs,{},{revssf:{General:0}}),i.Props||(i.Props={});for(var s=0;s<i.SheetNames.length;++s)r[r.length]=Mz(s,e,i);return r.unshift(Oz(i,r,e)),Jh(r)}(i,t);case 4:case 3:case 2:return function Cz(i,t){var e=t||{};null!=pu&&null==e.dense&&(e.dense=pu);for(var r=Mf(),s=0,o=0;o<i.SheetNames.length;++o)i.SheetNames[o]==e.sheet&&(s=o);if(0==s&&e.sheet&&i.SheetNames[0]!=e.sheet)throw new Error("Sheet not found: "+e.sheet);return Br(r,4==e.biff?1033:3==e.biff?521:9,QC(0,16,e)),function wz(i,t,e,r){var f,s=Array.isArray(t),o=fo(t["!ref"]||"A1"),g="",A=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),f=Fa(o)}for(var P=o.s.r;P<=o.e.r;++P){g=_u(P);for(var z=o.s.c;z<=o.e.c;++z){P===o.s.r&&(A[z]=uc(z)),f=A[z]+g;var ie=s?(t[P]||[])[z]:t[f];ie&&bz(i,ie,P,z)}}}(r,i.Sheets[i.SheetNames[s]],0,e),Br(r,10),r.end()}(i,t)}throw new Error("invalid type "+o.bookType+" for BIFF")}function SS(i,t,e,r){for(var s=i["!merges"]||[],o=[],f=t.s.c;f<=t.e.c;++f){for(var g=0,A=0,P=0;P<s.length;++P)if(!(s[P].s.r>e||s[P].s.c>f||s[P].e.r<e||s[P].e.c<f)){if(s[P].s.r<e||s[P].s.c<f){g=-1;break}g=s[P].e.r-s[P].s.r+1,A=s[P].e.c-s[P].s.c+1;break}if(!(g<0)){var z=ga({r:e,c:f}),ie=r.dense?(i[e]||[])[f]:i[z],se=ie&&null!=ie.v&&(ie.h||mk(ie.w||(qg(ie),ie.w)||""))||"",oe={};g>1&&(oe.rowspan=g),A>1&&(oe.colspan=A),r.editable?se='<span contenteditable="true">'+se+"</span>":ie&&(oe["data-t"]=ie&&ie.t||"z",null!=ie.v&&(oe["data-v"]=ie.v),null!=ie.z&&(oe["data-z"]=ie.z),ie.l&&"#"!=(ie.l.Target||"#").charAt(0)&&(se='<a href="'+ie.l.Target+'">'+se+"</a>")),oe.id=(r.id||"sjs")+"-"+z,o.push(Ar("td",se,oe))}}return"<tr>"+o.join("")+"</tr>"}var AS='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',DS="</body></html>";function MS(i,t){var e=t||{},s=null!=e.footer?e.footer:DS,o=[null!=e.header?e.header:AS],f=Of(i["!ref"]);e.dense=Array.isArray(i),o.push(function IS(i,t,e){return[].join("")+"<table"+(e&&e.id?' id="'+e.id+'"':"")+">"}(0,0,e));for(var g=f.s.r;g<=f.e.r;++g)o.push(SS(i,f,g,e));return o.push("</table>"+s),o.join("")}function OS(i,t,e){var r=e||{};null!=pu&&(r.dense=pu);var s=0,o=0;if(null!=r.origin)if("number"==typeof r.origin)s=r.origin;else{var f="string"==typeof r.origin?Hu(r.origin):r.origin;s=f.r,o=f.c}var g=t.getElementsByTagName("tr"),A=Math.min(r.sheetRows||1e7,g.length),P={s:{r:0,c:0},e:{r:s,c:o}};if(i["!ref"]){var z=Of(i["!ref"]);P.s.r=Math.min(P.s.r,z.s.r),P.s.c=Math.min(P.s.c,z.s.c),P.e.r=Math.max(P.e.r,z.e.r),P.e.c=Math.max(P.e.c,z.e.c),-1==s&&(P.e.r=s=z.e.r+1)}var ie=[],se=0,oe=i["!rows"]||(i["!rows"]=[]),_e=0,he=0,Ae=0,Ke=0,ct=0,pt=0;for(i["!cols"]||(i["!cols"]=[]);_e<g.length&&he<A;++_e){var mi=g[_e];if(LS(mi)){if(r.display)continue;oe[he]={hidden:!0}}var Fi=mi.children;for(Ae=Ke=0;Ae<Fi.length;++Ae){var Ki=Fi[Ae];if(!r.display||!LS(Ki)){var ni=Ki.hasAttribute("data-v")?Ki.getAttribute("data-v"):Ki.hasAttribute("v")?Ki.getAttribute("v"):yk(Ki.innerHTML),Ti=Ki.getAttribute("data-z")||Ki.getAttribute("z");for(se=0;se<ie.length;++se){var Bi=ie[se];Bi.s.c==Ke+o&&Bi.s.r<he+s&&he+s<=Bi.e.r&&(Ke=Bi.e.c+1-o,se=-1)}pt=+Ki.getAttribute("colspan")||1,((ct=+Ki.getAttribute("rowspan")||1)>1||pt>1)&&ie.push({s:{r:he+s,c:Ke+o},e:{r:he+s+(ct||1)-1,c:Ke+o+(pt||1)-1}});var Cn={t:"s",v:ni},Mn=Ki.getAttribute("data-t")||Ki.getAttribute("t")||"";null!=ni&&(0==ni.length?Cn.t=Mn||"z":r.raw||0==ni.trim().length||"s"==Mn||("TRUE"===ni?Cn={t:"b",v:!0}:"FALSE"===ni?Cn={t:"b",v:!1}:isNaN(lg(ni))?isNaN(C1(ni).getDate())||(Cn={t:"d",v:Jc(ni)},r.cellDates||(Cn={t:"n",v:Qh(Cn.v)}),Cn.z=r.dateNF||sa[14]):Cn={t:"n",v:lg(ni)})),void 0===Cn.z&&null!=Ti&&(Cn.z=Ti);var Zi="",Cr=Ki.getElementsByTagName("A");if(Cr&&Cr.length)for(var ns=0;ns<Cr.length&&(!Cr[ns].hasAttribute("href")||"#"==(Zi=Cr[ns].getAttribute("href")).charAt(0));++ns);Zi&&"#"!=Zi.charAt(0)&&(Cn.l={Target:Zi}),r.dense?(i[he+s]||(i[he+s]=[]),i[he+s][Ke+o]=Cn):i[ga({c:Ke+o,r:he+s})]=Cn,P.e.c<Ke+o&&(P.e.c=Ke+o),Ke+=pt}}++he}return ie.length&&(i["!merges"]=(i["!merges"]||[]).concat(ie)),P.e.r=Math.max(P.e.r,he-1+s),i["!ref"]=Fa(P),he>=A&&(i["!fullref"]=Fa((P.e.r=g.length-_e+he-1+s,P))),i}function RS(i,t){return OS((t||{}).dense?[]:{},i,t)}function LS(i){var t="",e=function Fz(i){return i.ownerDocument.defaultView&&"function"==typeof i.ownerDocument.defaultView.getComputedStyle?i.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(i);return e&&(t=e(i).getPropertyValue("display")),t||(t=i.style&&i.style.display),"none"===t}var Nz=function(){var i=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Wx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+i+"</office:document-styles>";return function(){return vu+t}}(),zS=function(){var i=function(o){return nl(o).replace(/  +/g,function(f){return'<text:s text:c="'+f.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",r=function(o,f,g){var A=[];A.push('      <table:table table:name="'+nl(f.SheetNames[g])+'" table:style-name="ta1">\n');var P=0,z=0,ie=Of(o["!ref"]||"A1"),se=o["!merges"]||[],oe=0,_e=Array.isArray(o);if(o["!cols"])for(z=0;z<=ie.e.c;++z)A.push("        <table:table-column"+(o["!cols"][z]?' table:style-name="co'+o["!cols"][z].ods+'"':"")+"></table:table-column>\n");var Ae=o["!rows"]||[];for(P=0;P<ie.s.r;++P)A.push("        <table:table-row"+(Ae[P]?' table:style-name="ro'+Ae[P].ods+'"':"")+"></table:table-row>\n");for(;P<=ie.e.r;++P){for(A.push("        <table:table-row"+(Ae[P]?' table:style-name="ro'+Ae[P].ods+'"':"")+">\n"),z=0;z<ie.s.c;++z)A.push(t);for(;z<=ie.e.c;++z){var Ke=!1,ct={},pt="";for(oe=0;oe!=se.length;++oe)if(!(se[oe].s.c>z||se[oe].s.r>P||se[oe].e.c<z||se[oe].e.r<P)){(se[oe].s.c!=z||se[oe].s.r!=P)&&(Ke=!0),ct["table:number-columns-spanned"]=se[oe].e.c-se[oe].s.c+1,ct["table:number-rows-spanned"]=se[oe].e.r-se[oe].s.r+1;break}if(Ke)A.push("          <table:covered-table-cell/>\n");else{var mi=ga({r:P,c:z}),Fi=_e?(o[P]||[])[z]:o[mi];if(Fi&&Fi.f&&(ct["table:formula"]=nl(a5(Fi.f)),Fi.F&&Fi.F.slice(0,mi.length)==mi)){var Ki=Of(Fi.F);ct["table:number-matrix-columns-spanned"]=Ki.e.c-Ki.s.c+1,ct["table:number-matrix-rows-spanned"]=Ki.e.r-Ki.s.r+1}if(Fi){switch(Fi.t){case"b":pt=Fi.v?"TRUE":"FALSE",ct["office:value-type"]="boolean",ct["office:boolean-value"]=Fi.v?"true":"false";break;case"n":pt=Fi.w||String(Fi.v||0),ct["office:value-type"]="float",ct["office:value"]=Fi.v||0;break;case"s":case"str":pt=null==Fi.v?"":Fi.v,ct["office:value-type"]="string";break;case"d":pt=Fi.w||Jc(Fi.v).toISOString(),ct["office:value-type"]="date",ct["office:date-value"]=Jc(Fi.v).toISOString(),ct["table:style-name"]="ce1";break;default:A.push(t);continue}var ni=i(pt);if(Fi.l&&Fi.l.Target){var Ti=Fi.l.Target;"#"!=(Ti="#"==Ti.charAt(0)?"#"+o5(Ti.slice(1)):Ti).charAt(0)&&!Ti.match(/^\w+:/)&&(Ti="../"+Ti),ni=Ar("text:a",ni,{"xlink:href":Ti.replace(/&/g,"&amp;")})}A.push("          "+Ar("table:table-cell",Ar("text:p",ni,{}),ct)+"\n")}else A.push(t)}}A.push("        </table:table-row>\n")}return A.push("      </table:table>\n"),A.join("")};return function(f,g){var A=[vu],P=Wx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),z=Wx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==g.bookType?(A.push("<office:document"+P+z+">\n"),A.push(Xk().replace(/office:document-meta/g,"office:meta"))):A.push("<office:document-content"+P+">\n"),function(o,f){o.push(" <office:automatic-styles>\n"),o.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),o.push('   <number:month number:style="long"/>\n'),o.push("   <number:text>/</number:text>\n"),o.push('   <number:day number:style="long"/>\n'),o.push("   <number:text>/</number:text>\n"),o.push("   <number:year/>\n"),o.push("  </number:date-style>\n");var g=0;f.SheetNames.map(function(P){return f.Sheets[P]}).forEach(function(P){if(P&&P["!cols"])for(var z=0;z<P["!cols"].length;++z)if(P["!cols"][z]){var ie=P["!cols"][z];if(null==ie.width&&null==ie.wpx&&null==ie.wch)continue;o_(ie),ie.ods=g;var se=P["!cols"][z].wpx+"px";o.push('  <style:style style:name="co'+g+'" style:family="table-column">\n'),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+se+'"/>\n'),o.push("  </style:style>\n"),++g}});var A=0;f.SheetNames.map(function(P){return f.Sheets[P]}).forEach(function(P){if(P&&P["!rows"])for(var z=0;z<P["!rows"].length;++z)if(P["!rows"][z]){P["!rows"][z].ods=A;var ie=P["!rows"][z].hpx+"px";o.push('  <style:style style:name="ro'+A+'" style:family="table-row">\n'),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+ie+'"/>\n'),o.push("  </style:style>\n"),++A}}),o.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),o.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),o.push("  </style:style>\n"),o.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),o.push(" </office:automatic-styles>\n")}(A,f),A.push("  <office:body>\n"),A.push("    <office:spreadsheet>\n");for(var ie=0;ie!=f.SheetNames.length;++ie)A.push(r(f.Sheets[f.SheetNames[ie]],f,ie));return A.push("    </office:spreadsheet>\n"),A.push("  </office:body>\n"),A.push("fods"==g.bookType?"</office:document>":"</office:document-content>"),A.join("")}}();function YS(i,t){if("fods"==t.bookType)return zS(i,t);var e=CC(),r="",s=[],o=[];return Ha(e,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Ha(e,r="content.xml",zS(i,t)),s.push([r,"text/xml"]),o.push([r,"ContentFile"]),Ha(e,r="styles.xml",Nz(i,t)),s.push([r,"text/xml"]),o.push([r,"StylesFile"]),Ha(e,r="meta.xml",vu+Xk()),s.push([r,"text/xml"]),o.push([r,"MetadataFile"]),Ha(e,r="manifest.rdf",function yR(i){var t=[vu];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var e=0;e!=i.length;++e)t.push($k(i[e][0],i[e][1])),t.push(_R("",i[e][0]));return t.push($k("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(o)),s.push([r,"application/rdf+xml"]),Ha(e,r="META-INF/manifest.xml",function vR(i){var t=[vu];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var e=0;e<i.length;++e)t.push('  <manifest:file-entry manifest:full-path="'+i[e][0]+'" manifest:media-type="'+i[e][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(s)),e}function fy(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}function zz(i){return typeof TextEncoder<"u"?(new TextEncoder).encode(i):Op(Zg(i))}function u_(i){var t=i.reduce(function(s,o){return s+o.length},0),e=new Uint8Array(t),r=0;return i.forEach(function(s){e.set(s,r),r+=s.length}),e}function pb(i,t){var e=t?t[0]:0,r=127&i[e];e:if(i[e++]>=128&&(r|=(127&i[e])<<7,i[e++]<128||(r|=(127&i[e])<<14,i[e++]<128)||(r|=(127&i[e])<<21,i[e++]<128)||(r+=(127&i[e])*Math.pow(2,28),++e,i[e++]<128)||(r+=(127&i[e])*Math.pow(2,35),++e,i[e++]<128)||(r+=(127&i[e])*Math.pow(2,42),++e,i[e++]<128)))break e;return t&&(t[0]=e),r}function qo(i){var t=new Uint8Array(7);t[0]=127&i;var e=1;e:if(i>127){if(t[e-1]|=128,t[e]=i>>7&127,++e,i<=16383||(t[e-1]|=128,t[e]=i>>14&127,++e,i<=2097151)||(t[e-1]|=128,t[e]=i>>21&127,++e,i<=268435455)||(t[e-1]|=128,t[e]=i/256>>>21&127,++e,i<=34359738367)||(t[e-1]|=128,t[e]=i/65536>>>21&127,++e,i<=4398046511103))break e;t[e-1]|=128,t[e]=i/16777216>>>21&127,++e}return t.slice(0,e)}function yu(i){var t=0,e=127&i[t];e:if(i[t++]>=128){if(e|=(127&i[t])<<7,i[t++]<128||(e|=(127&i[t])<<14,i[t++]<128)||(e|=(127&i[t])<<21,i[t++]<128))break e;e|=(127&i[t])<<28}return e}function Fo(i){for(var t=[],e=[0];e[0]<i.length;){var g,r=e[0],s=pb(i,e),o=7&s,f=0;if(0==(s=Math.floor(s/8)))break;switch(o){case 0:for(var A=e[0];i[e[0]++]>=128;);g=i.slice(A,e[0]);break;case 5:g=i.slice(e[0],e[0]+(f=4)),e[0]+=f;break;case 1:g=i.slice(e[0],e[0]+(f=8)),e[0]+=f;break;case 2:f=pb(i,e),g=i.slice(e[0],e[0]+f),e[0]+=f;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(s," at offset ").concat(r))}var P={data:g,type:o};null==t[s]?t[s]=[P]:t[s].push(P)}return t}function nd(i){var t=[];return i.forEach(function(e,r){e.forEach(function(s){s.data&&(t.push(qo(8*r+s.type)),2==s.type&&t.push(qo(s.data.length)),t.push(s.data))})}),u_(t)}function xm(i){for(var t,e=[],r=[0];r[0]<i.length;){var s=pb(i,r),o=Fo(i.slice(r[0],r[0]+s));r[0]+=s;var f={id:yu(o[1][0].data),messages:[]};o[2].forEach(function(g){var A=Fo(g.data),P=yu(A[3][0].data);f.messages.push({meta:A,data:i.slice(r[0],r[0]+P)}),r[0]+=P}),null!=(t=o[3])&&t[0]&&(f.merge=yu(o[3][0].data)>>>0>0),e.push(f)}return e}function R1(i){var t=[];return i.forEach(function(e){var r=[];r[1]=[{data:qo(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:qo(+!!e.merge),type:0}]);var s=[];e.messages.forEach(function(f){s.push(f.data),f.meta[3]=[{type:0,data:qo(f.data.length)}],r[2].push({data:nd(f.meta),type:2})});var o=nd(r);t.push(qo(o.length)),t.push(o),s.forEach(function(f){return t.push(f)})}),u_(t)}function Vz(i,t){if(0!=i)throw new Error("Unexpected Snappy chunk type ".concat(i));for(var e=[0],r=pb(t,e),s=[];e[0]<t.length;){var o=3&t[e[0]];if(0!=o){var A=0,P=0;if(1==o?(P=4+(t[e[0]]>>2&7),A=(224&t[e[0]++])<<3,A|=t[e[0]++]):(P=1+(t[e[0]++]>>2),2==o?(A=t[e[0]]|t[e[0]+1]<<8,e[0]+=2):(A=(t[e[0]]|t[e[0]+1]<<8|t[e[0]+2]<<16|t[e[0]+3]<<24)>>>0,e[0]+=4)),s=[u_(s)],0==A)throw new Error("Invalid offset 0");if(A>s[0].length)throw new Error("Invalid offset beyond length");if(P>=A)for(s.push(s[0].slice(-A)),P-=A;P>=s[s.length-1].length;)s.push(s[s.length-1]),P-=s[s.length-1].length;s.push(s[0].slice(-A,-A+P))}else{var f=t[e[0]++]>>2;if(f<60)++f;else{var g=f-59;f=t[e[0]],g>1&&(f|=t[e[0]+1]<<8),g>2&&(f|=t[e[0]+2]<<16),g>3&&(f|=t[e[0]+3]<<24),f>>>=0,f++,e[0]+=g}s.push(t.slice(e[0],e[0]+f)),e[0]+=f}}var z=u_(s);if(z.length!=r)throw new Error("Unexpected length: ".concat(z.length," != ").concat(r));return z}function bm(i){for(var t=[],e=0;e<i.length;){var r=i[e++],s=i[e]|i[e+1]<<8|i[e+2]<<16;t.push(Vz(r,i.slice(e+=3,e+s))),e+=s}if(e!==i.length)throw new Error("data is not a valid framed stream!");return u_(t)}function L1(i){for(var t=[],e=0;e<i.length;){var r=Math.min(i.length-e,268435455),s=new Uint8Array(4);t.push(s);var o=qo(r),f=o.length;t.push(o),r<=60?(f++,t.push(new Uint8Array([r-1<<2]))):r<=256?(f+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(f+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(f+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(f+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(i.slice(e,e+r)),f+=r,s[0]=0,s[1]=255&f,s[2]=f>>8&255,s[3]=f>>16&255,e+=r}return u_(t)}function x2(i,t){var e=new Uint8Array(32),r=fy(e),s=12,o=0;switch(e[0]=5,i.t){case"n":e[1]=2,function Hz(i,t,e){var r=Math.floor(0==e?0:Math.LOG10E*Math.log(Math.abs(e)))+6176-20,s=e/Math.pow(10,r-6176);i[t+15]|=r>>7,i[t+14]|=(127&r)<<1;for(var o=0;s>=1;++o,s/=256)i[t+o]=255&s;i[t+15]|=e>=0?0:128}(e,s,i.v),o|=1,s+=16;break;case"b":e[1]=6,r.setFloat64(s,i.v?1:0,!0),o|=2,s+=8;break;case"s":if(-1==t.indexOf(i.v))throw new Error("Value ".concat(i.v," missing from SST!"));e[1]=3,r.setUint32(s,t.indexOf(i.v),!0),o|=8,s+=4;break;default:throw"unsupported cell type "+i.t}return r.setUint32(8,o,!0),e.slice(0,s)}function b2(i,t){var e=new Uint8Array(32),r=fy(e),s=12,o=0;switch(e[0]=3,i.t){case"n":e[2]=2,r.setFloat64(s,i.v,!0),o|=32,s+=8;break;case"b":e[2]=6,r.setFloat64(s,i.v?1:0,!0),o|=32,s+=8;break;case"s":if(-1==t.indexOf(i.v))throw new Error("Value ".concat(i.v," missing from SST!"));e[2]=3,r.setUint32(s,t.indexOf(i.v),!0),o|=16,s+=4;break;default:throw"unsupported cell type "+i.t}return r.setUint32(4,o,!0),e.slice(0,s)}function rf(i){return pb(Fo(i)[1][0].data)}function Qz(i,t,e){var r,s,o,f;if(null==(r=i[6])||!r[0]||null==(s=i[7])||!s[0])throw"Mutation only works on post-BNC storages!";if((null==(f=null==(o=i[8])?void 0:o[0])?void 0:f.data)&&yu(i[8][0].data)>0)throw"Math only works with normal offsets";for(var A=0,P=fy(i[7][0].data),z=0,ie=[],se=fy(i[4][0].data),oe=0,_e=[],he=0;he<t.length;++he)if(null!=t[he]){var Ae,Ke;switch(P.setUint16(2*he,z,!0),se.setUint16(2*he,oe,!0),typeof t[he]){case"string":Ae=x2({t:"s",v:t[he]},e),Ke=b2({t:"s",v:t[he]},e);break;case"number":Ae=x2({t:"n",v:t[he]},e),Ke=b2({t:"n",v:t[he]},e);break;case"boolean":Ae=x2({t:"b",v:t[he]},e),Ke=b2({t:"b",v:t[he]},e);break;default:throw new Error("Unsupported value "+t[he])}ie.push(Ae),z+=Ae.length,_e.push(Ke),oe+=Ke.length,++A}else P.setUint16(2*he,65535,!0),se.setUint16(2*he,65535);for(i[2][0].data=qo(A);he<i[7][0].data.length/2;++he)P.setUint16(2*he,65535,!0),se.setUint16(2*he,65535,!0);return i[6][0].data=u_(ie),i[3][0].data=u_(_e),A}function E2(i){!function VS(i){return function(e){for(var r=0;r!=i.length;++r){var s=i[r];void 0===e[s[0]]&&(e[s[0]]=s[1]),"n"===s[2]&&(e[s[0]]=Number(e[s[0]]))}}}([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(i)}function o6(i,t){return"ods"==t.bookType?YS(i,t):"numbers"==t.bookType?function e6(i,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var e=i.Sheets[i.SheetNames[0]];i.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Of(e["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Fa(r)));var o=Fw(e,{range:r,header:1}),f=["~Sh33tJ5~"];o.forEach(function(bi){return bi.forEach(function(_i){"string"==typeof _i&&f.push(_i)})});var g={},A=[],P=Gs.read(t.numbers,{type:"base64"});P.FileIndex.map(function(bi,_i){return[bi,P.FullPaths[_i]]}).forEach(function(bi){var _i=bi[0],Yn=bi[1];2==_i.type&&_i.name.match(/\.iwa/)&&xm(bm(_i.content)).forEach(function(sr){A.push(sr.id),g[sr.id]={deps:[],location:Yn,type:yu(sr.messages[0].meta[1][0].data)}})}),A.sort(function(bi,_i){return bi-_i});var z=A.filter(function(bi){return bi>1}).map(function(bi){return[bi,qo(bi)]});P.FileIndex.map(function(bi,_i){return[bi,P.FullPaths[_i]]}).forEach(function(bi){var _i=bi[0];_i.name.match(/\.iwa/)&&xm(bm(_i.content)).forEach(function(yr){yr.messages.forEach(function(Er){z.forEach(function(sr){yr.messages.some(function(La){return 11006!=yu(La.meta[1][0].data)&&function Yz(i,t){e:for(var e=0;e<=i.length-t.length;++e){for(var r=0;r<t.length;++r)if(i[e+r]!=t[r])continue e;return!0}return!1}(La.data,sr[1])})&&g[sr[0]].deps.push(yr.id)})})})});for(var _e,se=Gs.find(P,g[1].location),oe=xm(bm(se.content)),he=0;he<oe.length;++he){var Ae=oe[he];1==Ae.id&&(_e=Ae)}var Ke=rf(Fo(_e.messages[0].data)[1][0].data);for(oe=xm(bm((se=Gs.find(P,g[Ke].location)).content)),he=0;he<oe.length;++he)(Ae=oe[he]).id==Ke&&(_e=Ae);for(Ke=rf(Fo(_e.messages[0].data)[2][0].data),oe=xm(bm((se=Gs.find(P,g[Ke].location)).content)),he=0;he<oe.length;++he)(Ae=oe[he]).id==Ke&&(_e=Ae);for(Ke=rf(Fo(_e.messages[0].data)[2][0].data),oe=xm(bm((se=Gs.find(P,g[Ke].location)).content)),he=0;he<oe.length;++he)(Ae=oe[he]).id==Ke&&(_e=Ae);var ct=Fo(_e.messages[0].data);ct[6][0].data=qo(r.e.r+1),ct[7][0].data=qo(r.e.c+1);for(var pt=rf(ct[46][0].data),mi=Gs.find(P,g[pt].location),Fi=xm(bm(mi.content)),Ki=0;Ki<Fi.length&&Fi[Ki].id!=pt;++Ki);if(Fi[Ki].id!=pt)throw"Bad ColumnRowUIDMapArchive";var ni=Fo(Fi[Ki].messages[0].data);ni[1]=[],ni[2]=[],ni[3]=[];for(var Ti=0;Ti<=r.e.c;++Ti){var Bi=[];Bi[1]=Bi[2]=[{type:0,data:qo(Ti+420690)}],ni[1].push({type:2,data:nd(Bi)}),ni[2].push({type:0,data:qo(Ti)}),ni[3].push({type:0,data:qo(Ti)})}ni[4]=[],ni[5]=[],ni[6]=[];for(var Cn=0;Cn<=r.e.r;++Cn)(Bi=[])[1]=Bi[2]=[{type:0,data:qo(Cn+726270)}],ni[4].push({type:2,data:nd(Bi)}),ni[5].push({type:0,data:qo(Cn)}),ni[6].push({type:0,data:qo(Cn)});Fi[Ki].messages[0].data=nd(ni),mi.content=L1(R1(Fi)),mi.size=mi.content.length,delete ct[46];var Mn=Fo(ct[4][0].data);Mn[7][0].data=qo(r.e.r+1);var Cr=rf(Fo(Mn[1][0].data)[2][0].data);if((Fi=xm(bm((mi=Gs.find(P,g[Cr].location)).content)))[0].id!=Cr)throw"Bad HeaderStorageBucket";var ns=Fo(Fi[0].messages[0].data);for(Cn=0;Cn<o.length;++Cn){var Gr=Fo(ns[2][0].data);Gr[1][0].data=qo(Cn),Gr[4][0].data=qo(o[Cn].length),ns[2][Cn]={type:ns[2][0].type,data:nd(Gr)}}Fi[0].messages[0].data=nd(ns),mi.content=L1(R1(Fi)),mi.size=mi.content.length;var ta=rf(Mn[2][0].data);if((Fi=xm(bm((mi=Gs.find(P,g[ta].location)).content)))[0].id!=ta)throw"Bad HeaderStorageBucket";for(ns=Fo(Fi[0].messages[0].data),Ti=0;Ti<=r.e.c;++Ti)(Gr=Fo(ns[2][0].data))[1][0].data=qo(Ti),Gr[4][0].data=qo(r.e.r+1),ns[2][Ti]={type:ns[2][0].type,data:nd(Gr)};Fi[0].messages[0].data=nd(ns),mi.content=L1(R1(Fi)),mi.size=mi.content.length;var ws=rf(Mn[4][0].data);!function(){for(var Yn,bi=Gs.find(P,g[ws].location),_i=xm(bm(bi.content)),Wr=0;Wr<_i.length;++Wr){var yr=_i[Wr];yr.id==ws&&(Yn=yr)}var Er=Fo(Yn.messages[0].data);Er[3]=[];var sr=[];f.forEach(function(Go,Ja){sr[1]=[{type:0,data:qo(Ja)}],sr[2]=[{type:0,data:qo(1)}],sr[3]=[{type:2,data:zz(Go)}],Er[3].push({type:2,data:nd(sr)})}),Yn.messages[0].data=nd(Er);var di=L1(R1(_i));bi.content=di,bi.size=bi.content.length}();var Wa=Fo(Mn[3][0].data),es=Wa[1][0];delete Wa[2];var aa=Fo(es.data),rr=rf(aa[2][0].data);!function(){for(var Yn,bi=Gs.find(P,g[rr].location),_i=xm(bm(bi.content)),Wr=0;Wr<_i.length;++Wr){var yr=_i[Wr];yr.id==rr&&(Yn=yr)}var Er=Fo(Yn.messages[0].data);delete Er[6],delete Wa[7];var sr=new Uint8Array(Er[5][0].data);Er[5]=[];for(var La=0,di=0;di<=r.e.r;++di){var Go=Fo(sr);La+=Qz(Go,o[di],f),Go[1][0].data=qo(di),Er[5].push({data:nd(Go),type:2})}Er[1]=[{type:0,data:qo(r.e.c+1)}],Er[2]=[{type:0,data:qo(r.e.r+1)}],Er[3]=[{type:0,data:qo(La)}],Er[4]=[{type:0,data:qo(r.e.r+1)}],Yn.messages[0].data=nd(Er);var Bo=L1(R1(_i));bi.content=Bo,bi.size=bi.content.length}(),es.data=nd(aa),Mn[3][0].data=nd(Wa),ct[4][0].data=nd(Mn),_e.messages[0].data=nd(ct);var vn=L1(R1(oe));return se.content=vn,se.size=se.content.length,P}(i,t):"xlsb"==t.bookType?function l6(i,t){I1=1024,i&&!i.SSF&&(i.SSF=Il(sa)),i&&i.SSF&&(w1(),Vx(i.SSF),t.revssf=cw(i.SSF),t.revssf[i.SSF[65535]]=0,t.ssf=i.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e="xlsb"==t.bookType?"bin":"xml",r=JT.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};E2(t=t||{});var o=CC(),f="",g=0;if(t.cellXfs=[],c_(t.cellXfs,{},{revssf:{General:0}}),i.Props||(i.Props={}),Ha(o,f="docProps/core.xml",qk(i.Props,t)),s.coreprops.push(f),Zo(t.rels,2,f,Ba.CORE_PROPS),f="docProps/app.xml",!i.Props||!i.Props.SheetNames)if(i.Workbook&&i.Workbook.Sheets){for(var A=[],P=0;P<i.SheetNames.length;++P)2!=(i.Workbook.Sheets[P]||{}).Hidden&&A.push(i.SheetNames[P]);i.Props.SheetNames=A}else i.Props.SheetNames=i.SheetNames;for(i.Props.Worksheets=i.Props.SheetNames.length,Ha(o,f,Qk(i.Props)),s.extprops.push(f),Zo(t.rels,3,f,Ba.EXT_PROPS),i.Custprops!==i.Props&&mu(i.Custprops||{}).length>0&&(Ha(o,f="docProps/custom.xml",eT(i.Custprops)),s.custprops.push(f),Zo(t.rels,4,f,Ba.CUST_PROPS)),g=1;g<=i.SheetNames.length;++g){var z={"!id":{}},ie=i.Sheets[i.SheetNames[g-1]];if(Ha(o,f="xl/worksheets/sheet"+g+"."+e,GN(g-1,f,t,i,z)),s.sheets.push(f),Zo(t.wbrels,-1,"worksheets/sheet"+g+"."+e,Ba.WS[0]),ie){var oe=ie["!comments"],_e=!1,he="";oe&&oe.length>0&&(Ha(o,he="xl/comments"+g+"."+e,UN(oe,he,t)),s.comments.push(he),Zo(z,-1,"../comments"+g+"."+e,Ba.CMNT),_e=!0),ie["!legacy"]&&_e&&Ha(o,"xl/drawings/vmlDrawing"+g+".vml",ZT(g,ie["!comments"])),delete ie["!comments"],delete ie["!legacy"]}z["!id"].rId1&&Ha(o,Kx(f),A1(z))}return null!=t.Strings&&t.Strings.length>0&&(Ha(o,f="xl/sharedStrings."+e,function VN(i,t,e){return(".bin"===t.slice(-4)?zP:FT)(i,e)}(t.Strings,f,t)),s.strs.push(f),Zo(t.wbrels,-1,"sharedStrings."+e,Ba.SST)),Ha(o,f="xl/workbook."+e,function YN(i,t,e){return(".bin"===t.slice(-4)?SN:xS)(i,e)}(i,f,t)),s.workbooks.push(f),Zo(t.rels,1,f,Ba.WB),Ha(o,f="xl/theme/theme1.xml",a2(i.Themes,t)),s.themes.push(f),Zo(t.wbrels,-1,"theme/theme1.xml",Ba.THEME),Ha(o,f="xl/styles."+e,function HN(i,t,e){return(".bin"===t.slice(-4)?P3:UT)(i,e)}(i,f,t)),s.styles.push(f),Zo(t.wbrels,-1,"styles."+e,Ba.STY),i.vbaraw&&r&&(Ha(o,f="xl/vbaProject.bin",i.vbaraw),s.vba.push(f),Zo(t.wbrels,-1,"vbaProject.bin",Ba.VBA)),Ha(o,f="xl/metadata."+e,function jN(i){return(".bin"===i.slice(-4)?l4:XT)()}(f)),s.metadata.push(f),Zo(t.wbrels,-1,"metadata."+e,Ba.XLMETA),Ha(o,"[Content_Types].xml",Wk(s,t)),Ha(o,"_rels/.rels",A1(t.rels)),Ha(o,"xl/_rels/workbook."+e+".rels",A1(t.wbrels)),delete t.revssf,delete t.ssf,o}(i,t):function US(i,t){I1=1024,i&&!i.SSF&&(i.SSF=Il(sa)),i&&i.SSF&&(w1(),Vx(i.SSF),t.revssf=cw(i.SSF),t.revssf[i.SSF[65535]]=0,t.ssf=i.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var e="xml",r=JT.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};E2(t=t||{});var o=CC(),f="",g=0;if(t.cellXfs=[],c_(t.cellXfs,{},{revssf:{General:0}}),i.Props||(i.Props={}),Ha(o,f="docProps/core.xml",qk(i.Props,t)),s.coreprops.push(f),Zo(t.rels,2,f,Ba.CORE_PROPS),f="docProps/app.xml",!i.Props||!i.Props.SheetNames)if(i.Workbook&&i.Workbook.Sheets){for(var A=[],P=0;P<i.SheetNames.length;++P)2!=(i.Workbook.Sheets[P]||{}).Hidden&&A.push(i.SheetNames[P]);i.Props.SheetNames=A}else i.Props.SheetNames=i.SheetNames;i.Props.Worksheets=i.Props.SheetNames.length,Ha(o,f,Qk(i.Props)),s.extprops.push(f),Zo(t.rels,3,f,Ba.EXT_PROPS),i.Custprops!==i.Props&&mu(i.Custprops||{}).length>0&&(Ha(o,f="docProps/custom.xml",eT(i.Custprops)),s.custprops.push(f),Zo(t.rels,4,f,Ba.CUST_PROPS));var z=["SheetJ5"];for(t.tcid=0,g=1;g<=i.SheetNames.length;++g){var ie={"!id":{}},se=i.Sheets[i.SheetNames[g-1]];if(Ha(o,f="xl/worksheets/sheet"+g+"."+e,dS(g-1,t,i,ie)),s.sheets.push(f),Zo(t.wbrels,-1,"worksheets/sheet"+g+"."+e,Ba.WS[0]),se){var _e=se["!comments"],he=!1,Ae="";if(_e&&_e.length>0){var Ke=!1;_e.forEach(function(ct){ct[1].forEach(function(pt){1==pt.T&&(Ke=!0)})}),Ke&&(Ha(o,Ae="xl/threadedComments/threadedComment"+g+"."+e,v4(_e,z,t)),s.threadedcomments.push(Ae),Zo(ie,-1,"../threadedComments/threadedComment"+g+"."+e,Ba.TCMNT)),Ha(o,Ae="xl/comments"+g+"."+e,KT(_e)),s.comments.push(Ae),Zo(ie,-1,"../comments"+g+"."+e,Ba.CMNT),he=!0}se["!legacy"]&&he&&Ha(o,"xl/drawings/vmlDrawing"+g+".vml",ZT(g,se["!comments"])),delete se["!comments"],delete se["!legacy"]}ie["!id"].rId1&&Ha(o,Kx(f),A1(ie))}return null!=t.Strings&&t.Strings.length>0&&(Ha(o,f="xl/sharedStrings."+e,FT(t.Strings,t)),s.strs.push(f),Zo(t.wbrels,-1,"sharedStrings."+e,Ba.SST)),Ha(o,f="xl/workbook."+e,xS(i)),s.workbooks.push(f),Zo(t.rels,1,f,Ba.WB),Ha(o,f="xl/theme/theme1.xml",a2(i.Themes,t)),s.themes.push(f),Zo(t.wbrels,-1,"theme/theme1.xml",Ba.THEME),Ha(o,f="xl/styles."+e,UT(i,t)),s.styles.push(f),Zo(t.wbrels,-1,"styles."+e,Ba.STY),i.vbaraw&&r&&(Ha(o,f="xl/vbaProject.bin",i.vbaraw),s.vba.push(f),Zo(t.wbrels,-1,"vbaProject.bin",Ba.VBA)),Ha(o,f="xl/metadata."+e,XT()),s.metadata.push(f),Zo(t.wbrels,-1,"metadata."+e,Ba.XLMETA),z.length>1&&(Ha(o,f="xl/persons/person.xml",function y4(i){var t=[vu,Ar("personList",null,{xmlns:oh.TCMNT,"xmlns:x":r_[0]}).replace(/[\/]>/,">")];return i.forEach(function(e,r){t.push(Ar("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(z)),s.people.push(f),Zo(t.wbrels,-1,"persons/person.xml",Ba.PEOPLE)),Ha(o,"[Content_Types].xml",Wk(s,t)),Ha(o,"_rels/.rels",A1(t.rels)),Ha(o,"xl/_rels/workbook.xml.rels",A1(t.wbrels)),delete t.revssf,delete t.ssf,o}(i,t)}function WS(i,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Ux(t.file,Gs.write(i,{type:Ka?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Gs.write(i,t)}function Qg(i,t,e){e||(e="");var r=e+i;switch(t.type){case"base64":return zx(Zg(r));case"binary":return Zg(r);case"string":return i;case"file":return Ux(t.file,r,"utf8");case"buffer":return Ka?ov(r,"utf8"):typeof TextEncoder<"u"?(new TextEncoder).encode(r):Qg(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Lw(i,t){switch(t.type){case"string":case"base64":case"binary":for(var e="",r=0;r<i.length;++r)e+=String.fromCharCode(i[r]);return"base64"==t.type?zx(e):"string"==t.type?cc(e):e;case"file":return Ux(t.file,i);case"buffer":return i;default:throw new Error("Unrecognized type "+t.type)}}function Pw(i,t){(function nw(){mm(1200),function RM(){iw(1252)}()})(),function yS(i){if(!i||!i.SheetNames||!i.Sheets)throw new Error("Invalid Workbook");if(!i.SheetNames.length)throw new Error("Workbook is empty");!function fN(i,t,e){i.forEach(function(r,s){_S(r);for(var o=0;o<s;++o)if(r==i[o])throw new Error("Duplicate Sheet Name: "+r);if(e){var f=t&&t[s]&&t[s].CodeName||r;if(95==f.charCodeAt(0)&&f.length>22)throw new Error("Bad Code Name: Worksheet"+f)}})}(i.SheetNames,i.Workbook&&i.Workbook.Sheets||[],!!i.vbaraw);for(var e=0;e<i.SheetNames.length;++e)c5(i.Sheets[i.SheetNames[e]],0,e)}(i);var e=Il(t||{});if(e.cellStyles&&(e.cellNF=!0,e.sheetStubs=!0),"array"==e.type){e.type="binary";var r=Pw(i,e);return e.type="array",Yx(r)}var s=0;if(e.sheet&&(s="number"==typeof e.sheet?e.sheet:i.SheetNames.indexOf(e.sheet),!i.SheetNames[s]))throw new Error("Sheet not found: "+e.sheet+" : "+typeof e.sheet);switch(e.bookType||"xlsb"){case"xml":case"xlml":return Qg(uz(i,e),e);case"slk":case"sylk":return Qg(OT.from_sheet(i.Sheets[i.SheetNames[s]],e),e);case"htm":case"html":return Qg(MS(i.Sheets[i.SheetNames[s]],e),e);case"txt":return function v6(i,t){switch(t.type){case"base64":return zx(i);case"binary":case"string":return i;case"file":return Ux(t.file,i,"binary");case"buffer":return Ka?ov(i,"binary"):i.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(JS(i.Sheets[i.SheetNames[s]],e),e);case"csv":return Qg(D2(i.Sheets[i.SheetNames[s]],e),e,"\ufeff");case"dif":return Qg(RT.from_sheet(i.Sheets[i.SheetNames[s]],e),e);case"dbf":return Lw(e2.from_sheet(i.Sheets[i.SheetNames[s]],e),e);case"prn":return Qg(D1.from_sheet(i.Sheets[i.SheetNames[s]],e),e);case"rtf":return Qg(GT.from_sheet(i.Sheets[i.SheetNames[s]],e),e);case"eth":return Qg(LT.from_sheet(i.Sheets[i.SheetNames[s]],e),e);case"fods":return Qg(YS(i,e),e);case"wk1":return Lw(hy.sheet_to_wk1(i.Sheets[i.SheetNames[s]],e),e);case"wk3":return Lw(hy.book_to_wk3(i,e),e);case"biff2":e.biff||(e.biff=2);case"biff3":e.biff||(e.biff=3);case"biff4":return e.biff||(e.biff=4),Lw(kS(i,e),e);case"biff5":e.biff||(e.biff=5);case"biff8":case"xla":case"xls":return e.biff||(e.biff=8),function g6(i,t){var e=t||{};return WS(function vz(i,t){var e=t||{},r=Gs.utils.cfb_new({root:"R"}),s="/Workbook";switch(e.bookType||"xls"){case"xls":e.bookType="biff8";case"xla":e.bookType||(e.bookType="xla");case"biff8":s="/Workbook",e.biff=8;break;case"biff5":s="/Book",e.biff=5;break;default:throw new Error("invalid type "+e.bookType+" for XLS CFB")}return Gs.utils.cfb_add(r,s,kS(i,e)),8==e.biff&&(i.Props||i.Custprops)&&function gz(i,t){var f,e=[],r=[],s=[],o=0,g=ik(UC,"n"),A=ik(jC,"n");if(i.Props)for(f=mu(i.Props),o=0;o<f.length;++o)(Object.prototype.hasOwnProperty.call(g,f[o])?e:Object.prototype.hasOwnProperty.call(A,f[o])?r:s).push([f[o],i.Props[f[o]]]);if(i.Custprops)for(f=mu(i.Custprops),o=0;o<f.length;++o)Object.prototype.hasOwnProperty.call(i.Props||{},f[o])||(Object.prototype.hasOwnProperty.call(g,f[o])?e:Object.prototype.hasOwnProperty.call(A,f[o])?r:s).push([f[o],i.Custprops[f[o]]]);var P=[];for(o=0;o<s.length;++o)lT.indexOf(s[o][0])>-1||Kk.indexOf(s[o][0])>-1||null!=s[o][1]&&P.push(s[o]);r.length&&Gs.utils.cfb_add(t,"/\x05SummaryInformation",hT(r,hb.SI,A,jC)),(e.length||P.length)&&Gs.utils.cfb_add(t,"/\x05DocumentSummaryInformation",hT(e,hb.DSI,g,UC,P.length?P:null,hb.UDI))}(i,r),8==e.biff&&i.vbaraw&&function A4(i,t){t.FullPaths.forEach(function(e,r){if(0!=r){var s=e.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==s.slice(-1)&&Gs.utils.cfb_add(i,s,t.FileIndex[r].content)}})}(r,Gs.read(i.vbaraw,{type:"string"==typeof i.vbaraw?"binary":"buffer"})),r}(i,e),e)}(i,e);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function p6(i,t){var e=Il(t||{});return function $S(i,t){var e={},r=Ka?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(e.compression="DEFLATE"),t.password)e.type=r;else switch(t.type){case"base64":e.type="base64";break;case"binary":e.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":e.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var s=i.FullPaths?Gs.write(i,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[e.type]||e.type,compression:!!t.compression}):i.generate(e);if(typeof Deno<"u"&&"string"==typeof s){if("binary"==t.type||"base64"==t.type)return s;s=new Uint8Array(Yx(s))}return t.password&&typeof encrypt_agile<"u"?WS(encrypt_agile(s,t.password),t):"file"===t.type?Ux(t.file,s):"string"==t.type?cc(s):s}(o6(i,e),e)}(i,e);default:throw new Error("Unrecognized bookType |"+e.bookType+"|")}}function ZS(i,t,e,r,s,o,f,g){var A=_u(e),P=g.defval,z=g.raw||!Object.prototype.hasOwnProperty.call(g,"raw"),ie=!0,se=1===s?[]:{};if(1!==s)if(Object.defineProperty)try{Object.defineProperty(se,"__rowNum__",{value:e,enumerable:!1})}catch{se.__rowNum__=e}else se.__rowNum__=e;if(!f||i[e])for(var oe=t.s.c;oe<=t.e.c;++oe){var _e=f?i[e][oe]:i[r[oe]+A];if(void 0!==_e&&void 0!==_e.t){var he=_e.v;switch(_e.t){case"z":if(null==he)break;continue;case"e":he=0==he?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+_e.t)}if(null!=o[oe]){if(null==he)if("e"==_e.t&&null===he)se[o[oe]]=null;else if(void 0!==P)se[o[oe]]=P;else{if(!z||null!==he)continue;se[o[oe]]=null}else se[o[oe]]=z&&("n"!==_e.t||"n"===_e.t&&!1!==g.rawNumbers)?he:qg(_e,he,g);null!=he&&(ie=!1)}}else{if(void 0===P)continue;null!=o[oe]&&(se[o[oe]]=P)}}return{row:se,isempty:ie}}function Fw(i,t){if(null==i||null==i["!ref"])return[];var e={t:"n",v:0},r=0,s=1,o=[],f=0,g="",A={s:{r:0,c:0},e:{r:0,c:0}},P=t||{},z=null!=P.range?P.range:i["!ref"];switch(1===P.header?r=1:"A"===P.header?r=2:Array.isArray(P.header)?r=3:null==P.header&&(r=0),typeof z){case"string":A=fo(z);break;case"number":(A=fo(i["!ref"])).s.r=z;break;default:A=z}r>0&&(s=0);var ie=_u(A.s.r),se=[],oe=[],_e=0,he=0,Ae=Array.isArray(i),Ke=A.s.r,ct=0,pt={};Ae&&!i[Ke]&&(i[Ke]=[]);var mi=P.skipHidden&&i["!cols"]||[],Fi=P.skipHidden&&i["!rows"]||[];for(ct=A.s.c;ct<=A.e.c;++ct)if(!(mi[ct]||{}).hidden)switch(se[ct]=uc(ct),e=Ae?i[Ke][ct]:i[se[ct]+ie],r){case 1:o[ct]=ct-A.s.c;break;case 2:o[ct]=se[ct];break;case 3:o[ct]=P.header[ct-A.s.c];break;default:if(null==e&&(e={w:"__EMPTY",t:"s"}),g=f=qg(e,null,P),he=pt[f]||0){do{g=f+"_"+he++}while(pt[g]);pt[f]=he,pt[g]=1}else pt[f]=1;o[ct]=g}for(Ke=A.s.r+s;Ke<=A.e.r;++Ke)if(!(Fi[Ke]||{}).hidden){var Ki=ZS(i,A,Ke,se,r,o,Ae,P);(!1===Ki.isempty||(1===r?!1!==P.blankrows:P.blankrows))&&(oe[_e++]=Ki.row)}return oe.length=_e,oe}var qS=/"/g;function KS(i,t,e,r,s,o,f,g){for(var A=!0,P=[],z="",ie=_u(e),se=t.s.c;se<=t.e.c;++se)if(r[se]){var oe=g.dense?(i[e]||[])[se]:i[r[se]+ie];if(null==oe)z="";else if(null!=oe.v){A=!1,z=""+(g.rawNumbers&&"n"==oe.t?oe.v:qg(oe,null,g));for(var _e=0,he=0;_e!==z.length;++_e)if((he=z.charCodeAt(_e))===s||he===o||34===he||g.forceQuotes){z='"'+z.replace(qS,'""')+'"';break}"ID"==z&&(z='"ID"')}else null==oe.f||oe.F?z="":(A=!1,(z="="+oe.f).indexOf(",")>=0&&(z='"'+z.replace(qS,'""')+'"'));P.push(z)}return!1===g.blankrows&&A?null:P.join(f)}function D2(i,t){var e=[],r=t??{};if(null==i||null==i["!ref"])return"";var s=fo(i["!ref"]),o=void 0!==r.FS?r.FS:",",f=o.charCodeAt(0),g=void 0!==r.RS?r.RS:"\n",A=g.charCodeAt(0),P=new RegExp(("|"==o?"\\|":o)+"+$"),z="",ie=[];r.dense=Array.isArray(i);for(var se=r.skipHidden&&i["!cols"]||[],oe=r.skipHidden&&i["!rows"]||[],_e=s.s.c;_e<=s.e.c;++_e)(se[_e]||{}).hidden||(ie[_e]=uc(_e));for(var he=0,Ae=s.s.r;Ae<=s.e.r;++Ae)(oe[Ae]||{}).hidden||null!=(z=KS(i,s,Ae,ie,f,A,o,r))&&(r.strip&&(z=z.replace(P,"")),(z||!1!==r.blankrows)&&e.push((he++?g:"")+z));return delete r.dense,e.join("")}function JS(i,t){t||(t={}),t.FS="\t",t.RS="\n";var e=D2(i,t);return typeof Eo>"u"||"string"==t.type?e:"\xff\xfe"+Eo.utils.encode(1200,e,"str")}function QS(i,t,e){var r=e||{},s=+!r.skipHeader,o=i||{},f=0,g=0;if(o&&null!=r.origin)if("number"==typeof r.origin)f=r.origin;else{var A="string"==typeof r.origin?Hu(r.origin):r.origin;f=A.r,g=A.c}var P,z={s:{c:0,r:0},e:{c:g,r:f+t.length-1+s}};if(o["!ref"]){var ie=fo(o["!ref"]);z.e.c=Math.max(z.e.c,ie.e.c),z.e.r=Math.max(z.e.r,ie.e.r),-1==f&&(z.e.r=(f=ie.e.r+1)+t.length-1+s)}else-1==f&&(f=0,z.e.r=t.length-1+s);var se=r.header||[],oe=0;t.forEach(function(he,Ae){mu(he).forEach(function(Ke){-1==(oe=se.indexOf(Ke))&&(se[oe=se.length]=Ke);var ct=he[Ke],pt="z",mi="",Fi=ga({c:g+oe,r:f+Ae+s});P=mb(o,Fi),!ct||"object"!=typeof ct||ct instanceof Date?("number"==typeof ct?pt="n":"boolean"==typeof ct?pt="b":"string"==typeof ct?pt="s":ct instanceof Date?(pt="d",r.cellDates||(pt="n",ct=Qh(ct)),mi=r.dateNF||sa[14]):null===ct&&r.nullError&&(pt="e",ct=0),P?(P.t=pt,P.v=ct,delete P.w,delete P.R,mi&&(P.z=mi)):o[Fi]=P={t:pt,v:ct},mi&&(P.z=mi)):o[Fi]=ct})}),z.e.c=Math.max(z.e.c,g+se.length-1);var _e=_u(f);if(s)for(oe=0;oe<se.length;++oe)o[uc(oe+g)+_e]={t:"s",v:se[oe]};return o["!ref"]=Fa(z),o}function mb(i,t,e){if("string"==typeof t){if(Array.isArray(i)){var r=Hu(t);return i[r.r]||(i[r.r]=[]),i[r.r][r.c]||(i[r.r][r.c]={t:"z"})}return i[t]||(i[t]={t:"z"})}return mb(i,ga("number"!=typeof t?t:{r:t,c:e||0}))}function eA(i,t,e){return t?(i.l={Target:t},e&&(i.l.Tooltip=e)):delete i.l,i}var O2={encode_col:uc,encode_row:_u,encode_cell:ga,encode_range:Fa,decode_col:BC,decode_row:FC,split_cell:function UO(i){return i.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Hu,decode_range:Of,format_cell:qg,sheet_add_aoa:Nk,sheet_add_json:QS,sheet_add_dom:OS,aoa_to_sheet:T1,json_to_sheet:function x6(i,t){return QS(null,i,t)},table_to_sheet:RS,table_to_book:function Pz(i,t){return s_(RS(i,t),t)},sheet_to_csv:D2,sheet_to_txt:JS,sheet_to_json:Fw,sheet_to_html:MS,sheet_to_formulae:function y6(i){var e,t="",r="";if(null==i||null==i["!ref"])return[];var g,s=fo(i["!ref"]),o="",f=[],A=[],P=Array.isArray(i);for(g=s.s.c;g<=s.e.c;++g)f[g]=uc(g);for(var z=s.s.r;z<=s.e.r;++z)for(o=_u(z),g=s.s.c;g<=s.e.c;++g)if(t=f[g]+o,r="",void 0!==(e=P?(i[z]||[])[g]:i[t])){if(null!=e.F){if(t=e.F,!e.f)continue;r=e.f,-1==t.indexOf(":")&&(t=t+":"+t)}if(null!=e.f)r=e.f;else{if("z"==e.t)continue;if("n"==e.t&&null!=e.v)r=""+e.v;else if("b"==e.t)r=e.v?"TRUE":"FALSE";else if(void 0!==e.w)r="'"+e.w;else{if(void 0===e.v)continue;r="s"==e.t?"'"+e.v:""+e.v}}A[A.length]=t+"="+r}return A},sheet_to_row_object_array:Fw,sheet_get_cell:mb,book_new:function I2(){return{SheetNames:[],Sheets:{}}},book_append_sheet:function M2(i,t,e,r){var s=1;if(!e)for(;s<=65535&&-1!=i.SheetNames.indexOf(e="Sheet"+s);++s,e=void 0);if(!e||i.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&i.SheetNames.indexOf(e)>=0){var o=e.match(/(^.*?)(\d+)$/);s=o&&+o[2]||0;var f=o&&o[1]||e;for(++s;s<=65535&&-1!=i.SheetNames.indexOf(e=f+s);++s);}if(_S(e),i.SheetNames.indexOf(e)>=0)throw new Error("Worksheet with name |"+e+"| already exists!");return i.SheetNames.push(e),i.Sheets[e]=t,e},book_set_sheet_visibility:function w6(i,t,e){i.Workbook||(i.Workbook={}),i.Workbook.Sheets||(i.Workbook.Sheets=[]);var r=function b6(i,t){if("number"==typeof t){if(t>=0&&i.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var e=i.SheetNames.indexOf(t);if(e>-1)return e;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(i,t);switch(i.Workbook.Sheets[r]||(i.Workbook.Sheets[r]={}),e){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+e)}i.Workbook.Sheets[r].Hidden=e},cell_set_number_format:function C6(i,t){return i.z=t,i},cell_set_hyperlink:eA,cell_set_internal_link:function E6(i,t,e){return eA(i,"#"+t,e)},cell_add_comment:function k6(i,t,e){i.c||(i.c=[]),i.c.push({t,a:e||"SheetJS"})},sheet_set_array_formula:function T6(i,t,e,r){for(var s="string"!=typeof t?t:fo(t),o="string"==typeof t?t:Fa(t),f=s.s.r;f<=s.e.r;++f)for(var g=s.s.c;g<=s.e.c;++g){var A=mb(i,f,g);A.t="n",A.F=o,delete A.v,f==s.s.r&&g==s.s.c&&(A.f=e,r&&(A.D=!0))}return i},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},M6=Qt(2880);let O6=(()=>{class i{constructor(){}exportAsExcelFile(e,r){const f=Pw({Sheets:{data:O2.json_to_sheet(e)},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelFile(f,r)}saveAsExcelFile(e,r){const s=new Blob([e],{type:R6});(0,M6.saveAs)(s,`${r}_${(new Date).getTime()}${L6}`)}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275prov=n.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const R6="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",L6=".xlsx";function P6(i,t){if(1&i&&(n.I0R(0,"th",26),n.OEk(1),n.wR5(2,"br"),n.I0R(3,"small"),n.OEk(4),n.C$Y()()),2&i){const e=t.$implicit;n.yG2(),n.oRS(" ",e.date," "),n.yG2(3),n.cNF(e.day)}}function F6(i,t){if(1&i){const e=n.KQA();n.I0R(0,"td",58),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO(2);return n.Gew(69).show(),n.CGJ(o.setModalData(s))}),n.I0R(1,"span",59),n.OEk(2,"\u2714"),n.C$Y()()}}function B6(i,t){1&i&&(n.I0R(0,"td")(1,"span",60),n.OEk(2,"L"),n.C$Y()())}function N6(i,t){1&i&&(n.I0R(0,"td")(1,"span",61),n.OEk(2,"\u2717"),n.C$Y()())}function z6(i,t){if(1&i&&n.yuY(0,F6,3,0,"td",57)(1,B6,3,0)(2,N6,3,0),2&i){const e=t.$implicit;n.C0Y(0,"Present"==e.attendance_status?0:"Leave"==e.attendance_status?1:2)}}function Y6(i,t){if(1&i&&(n.I0R(0,"tr")(1,"td"),n.OEk(2),n.C$Y(),n.c53(3,z6,3,1,null,null,n.wJt),n.C$Y()),2&i){const e=t.$implicit;n.yG2(2),n.oRS(" ",e.name," "),n.yG2(),n.oho(e.attendance)}}function G6(i,t){1&i&&(n.I0R(0,"div",27)(1,"div",62)(2,"span",63),n.OEk(3,"Loading..."),n.C$Y()()())}function H6(i,t){if(1&i&&(n.I0R(0,"option",46),n.OEk(1),n.C$Y()),2&i){const e=t.$implicit;n.E7m("value",e),n.yG2(),n.oRS(" ",e," ")}}function V6(i,t){if(1&i&&n.OEk(0),2&i){const e=n.GaO(2);n.oRS(" by ",e.timeLineData.timeDifference," ")}}function U6(i,t){1&i&&n.OEk(0," Not Check-out Yet ")}function j6(i,t){if(1&i&&n.OEk(0),2&i){const e=n.GaO(2);n.oRS(" ",e.formatTime(e.timeLineData.last_check_out_time)," ")}}function W6(i,t){if(1&i&&(n.I0R(0,"li")(1,"h6",78),n.OEk(2),n.C$Y(),n.I0R(3,"p",79),n.wR5(4,"i",80),n.OEk(5),n.C$Y()()),2&i){const e=t.$implicit,r=n.GaO(3);n.yG2(2),n.cNF(e.action),n.yG2(3),n.oRS(" ",r.formatTime(e.time)," ")}}function $6(i,t){if(1&i&&n.c53(0,W6,6,2,"li",null,n.wJt),2&i){const e=n.GaO(2);n.oho(e.timeLineData.timeline)}}function X6(i,t){if(1&i&&(n.I0R(0,"div",2)(1,"div",64)(2,"div",4)(3,"div",65)(4,"h6",7),n.OEk(5,"Timesheet"),n.C$Y(),n.I0R(6,"span",66),n.OEk(7),n.wVc(8,"date"),n.C$Y(),n.I0R(9,"span",67),n.OEk(10),n.yuY(11,V6,1,1),n.C$Y()(),n.I0R(12,"div",22)(13,"div",68)(14,"div",69)(15,"div",70)(16,"div",71)(17,"div",72)(18,"p",73),n.OEk(19," Check In at "),n.C$Y(),n.I0R(20,"h6",74),n.OEk(21),n.C$Y()()()()(),n.I0R(22,"div",75)(23,"div",76)(24,"span"),n.OEk(25),n.C$Y()()(),n.I0R(26,"div",69)(27,"div",70)(28,"div",71)(29,"div",72)(30,"p",73),n.OEk(31," Check Out at "),n.C$Y(),n.I0R(32,"h6",74),n.yuY(33,U6,1,0)(34,j6,1,1),n.C$Y()()()()()()()()(),n.I0R(35,"div",64)(36,"div",4)(37,"div",65)(38,"h6",7),n.OEk(39,"Activity"),n.C$Y()(),n.I0R(40,"div",22)(41,"ul",77),n.yuY(42,$6,2,0),n.C$Y()()()()()),2&i){const e=n.GaO();n.yG2(7),n.cNF(n.g7$(8,8,e.timeLineData.date,"EEE, MMM d, y")),n.yG2(2),n.E7m("ngClass","Early"==e.timeLineData.checkin_status?"bg-warning":"Late"==e.timeLineData.checkin_status?"bg-danger":"bg-success"),n.yG2(),n.oRS("",e.timeLineData.checkin_status," "),n.yG2(),n.C0Y(11,"On-Time"!=e.timeLineData.checkin_status?11:-1),n.yG2(10),n.oRS(" ",e.formatTime(e.timeLineData.last_check_in_time)," "),n.yG2(4),n.oRS("",e.timeLineData.totalDuration," hrs"),n.yG2(8),n.C0Y(33,"-"==e.timeLineData.last_check_out_time?33:34),n.yG2(9),n.C0Y(42,e.timeLineData?42:-1)}}let Z6=(()=>{class i{constructor(e,r){this.api=e,this.excelService=r,this.dateChangeSubject=new w.E,this.spinnerStatus=!1,this.attendanceMonthyData=[],this.attendanceMonthyDataList=[],this.selectedDate=new Date,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.bsConfig={minMode:"month",dateInputFormat:"MMM , YYYY",showWeekNumbers:!1}}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Attendance",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate));const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.dateChangeSubject.pipe((0,C.o)(300)).subscribe(r=>{this.handleDateChange(r)}),this.company_id&&this.getMonthlyCalenderData()}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getMonthlyCalenderData()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getMonthlyCalenderData(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmployeeMonthlyAttendance?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.attendanceMonthyData=r.data||[],this.attendanceMonthyDataList=r.data||[],this.daysInMonth=r.daysInMonth,this.pageChanged({page:1,itemsPerPage:this.currentItemsPerPage})):(this.attendanceMonthyData=[],this.attendanceMonthyDataList=[],this.toggleSpinner(!1))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}filterdata(){this.attendanceMonthyData=this.term?this.attendanceMonthyDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())||e.employee_id.toLowerCase().includes(this.term.toLowerCase())):this.attendanceMonthyDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.attendanceMonthyData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.attendanceMonthyData=this.attendanceMonthyDataList.slice(r,this.endItem)}onItemsPerPageChange(e){this.currentItemsPerPage=+e.target.value,this.pageChanged({page:1,itemsPerPage:this.currentItemsPerPage})}exportTableToExcel(){const e=document.querySelector("table"),r=O2.table_to_sheet(e),s={Sheets:{Sheet1:r},SheetNames:["Sheet1"]},o=new Date(this.selectedDate),f=o.toLocaleString("default",{month:"long"}),g=o.getFullYear(),A=`Attendance Report - ${f} ${g}`;r.A1={v:A,t:"s"},O2.sheet_add_aoa(r,[[A]],{origin:"A1"}),function _6(i,t,e){var r=e||{};r.type="file",r.file=t,function A2(i){if(!i.bookType){var e=i.file.slice(i.file.lastIndexOf(".")).toLowerCase();e.match(/^\.[a-z]+$/)&&(i.bookType=e.slice(1)),i.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[i.bookType]||i.bookType}}(r),Pw(i,r)}(s,`Attendance_${f}_${g}.xlsx`)}setModalData(e){this.timeLineData=e}formatTime(e){const[r,s,o]=e.split(":");return`${+r%12||12}:${s} ${+r>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(O6))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-attendance-monthly"]],decls:78,vars:14,consts:[["title","Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-md-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name, Employee id etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["type","button","id","download-button",1,"btn","btn-primary",3,"click"],[1,"ri-download-2-line","align-bottom","me-1"],[1,"card-body"],[1,"table-responsive","table-card","mt-1","px-2"],[1,"table","table-nowrap","table-striped-columns","mb-0","table-fixed"],[1,"table-light"],["scope","col"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-5","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0","d-md-flex"],[1,"d-flex","me-3","mt-1","mb-3","justify-content-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","myModal","tabindex","-1","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",2,"display","none"],["template","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","myModalLabel",1,"modal-title","fs-lg"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["class","row"],["class","cursor-pointer"],[1,"cursor-pointer",3,"click"],[1,"text-success"],[1,"text-warning","fw-bold"],[1,"text-danger"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"col-lg-6"],[1,"card-header"],[1,"text-mute","me-2"],[1,"badge",3,"ngClass"],[1,"row","g-3"],[1,"col-md-12"],[1,"card","border","shadow-none","mb-0","check-bg"],[1,"card-body","p-2"],[1,"text-center"],[1,"text-muted","text-truncate","mb-2"],[1,"fs-lg"],[1,"punch-info"],[1,"punch-hours"],[1,"acitivity-timeline-2","list-unstyled","mb-0","scroll-timeline"],[1,"fs-sm"],[1,"text-mute"],[1,"bi","bi-clock","align-baseline","me-1"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Attendance "),n.wR5(9,"span",8),n.C$Y()(),n.I0R(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"input",13),n.iHE("ngModelChange",function(g){return n.kNx(s.selectedDate,g)||(s.selectedDate=g),g}),n.qCj("bsValueChange",function(g){return s.onDateChange(g)}),n.C$Y(),n.I0R(15,"div",14)(16,"label",15),n.wR5(17,"i",16),n.C$Y()()()(),n.I0R(18,"div",17)(19,"input",18),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(20,"i",19),n.C$Y(),n.I0R(21,"button",20),n.qCj("click",function(){return s.exportTableToExcel()}),n.wR5(22,"i",21),n.OEk(23," Download "),n.C$Y()()()(),n.I0R(24,"div",22)(25,"div",23)(26,"table",24)(27,"thead",25)(28,"tr")(29,"th",26),n.OEk(30,"Name"),n.C$Y(),n.c53(31,P6,5,2,"th",26,n.wJt),n.C$Y()(),n.I0R(33,"tbody"),n.c53(34,Y6,5,1,"tr",null,n.wJt),n.C$Y(),n.yuY(36,G6,4,0,"div",27),n.C$Y()(),n.I0R(37,"div",28)(38,"div",29)(39,"div",30)(40,"div",31),n.wR5(41,"i",32),n.C$Y()(),n.I0R(42,"h5",33),n.OEk(43,"Sorry! No Result Found"),n.C$Y(),n.I0R(44,"p",34),n.OEk(45),n.C$Y()()(),n.I0R(46,"div",35)(47,"div",36)(48,"div",37),n.OEk(49," Showing "),n.I0R(50,"span",38),n.OEk(51),n.C$Y(),n.OEk(52," of "),n.I0R(53,"span",38),n.OEk(54),n.C$Y(),n.OEk(55," Results "),n.C$Y()(),n.I0R(56,"div",39)(57,"div",40)(58,"div",41),n.OEk(59," Items per page : "),n.C$Y(),n.I0R(60,"div",42)(61,"div",43)(62,"select",44),n.iHE("ngModelChange",function(g){return n.kNx(s.currentItemsPerPage,g)||(s.currentItemsPerPage=g),g}),n.qCj("change",function(g){return s.onItemsPerPageChange(g)}),n.yuY(63,H6,2,2,"option",45),n.I0R(64,"option",46),n.OEk(65," Show All "),n.C$Y()()()()(),n.I0R(66,"pagination",47),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(67,"div")(68,"div",48,49)(70,"div",50)(71,"div",51)(72,"div",52)(73,"h5",53),n.OEk(74,"Attendance Info"),n.C$Y(),n.I0R(75,"button",54),n.qCj("click",function(){n.usT(o);const g=n.Gew(69);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(76,"div",55),n.yuY(77,X6,43,11,"div",56),n.C$Y()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(14),n.E7m("bsConfig",s.bsConfig),n.OKB("ngModel",s.selectedDate),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(12),n.oho(s.daysInMonth),n.yG2(3),n.oho(s.attendanceMonthyData),n.yG2(2),n.C0Y(36,s.spinnerStatus?36:-1),n.yG2(9),n.oRS(" We've searched ",null==s.attendanceMonthyDataList?null:s.attendanceMonthyDataList.length," Employee Data. We did not find any Employee for you search. "),n.yG2(6),n.cNF(null==s.attendanceMonthyData?null:s.attendanceMonthyData.length),n.yG2(3),n.cNF(null==s.attendanceMonthyDataList?null:s.attendanceMonthyDataList.length),n.yG2(8),n.OKB("ngModel",s.currentItemsPerPage),n.yG2(),n.E7m("ngForOf",s.itemsPerPageOptions),n.yG2(),n.E7m("value",null==s.attendanceMonthyDataList?null:s.attendanceMonthyDataList.length),n.yG2(2),n.E7m("totalItems",null==s.attendanceMonthyDataList?null:s.attendanceMonthyDataList.length)("itemsPerPage",10),n.yG2(11),n.C0Y(77,s.timeLineData?77:-1))},dependencies:[Re.QF,Re.ay,$e.O,j.wd,j.GO,j.ot,j.GC,j.ue,j._G,it.im,Un.uK,M.em,M.U5,Re.y],styles:[".scroll-timeline[_ngcontent-%COMP%]{max-height:400px;overflow:scroll}.punch-info[_ngcontent-%COMP%]{margin:20px 0}.punch-info[_ngcontent-%COMP%]   .punch-hours[_ngcontent-%COMP%]{background-color:#f9f9f9;border:5px solid #e2e4e6;font-size:18px;height:120px;width:120px;margin:0 auto;border-radius:50%;display:flex;align-items:center;-webkit-box-align:center;-ms-flex-align:center;justify-content:center;-webkit-justify-content:center;-ms-flex-pack:center}.check-bg[_ngcontent-%COMP%]{background-color:#f9f9f9}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();const q6=["showModal"],K6=["deleteRecordModal"];function J6(i,t){if(1&i){const e=n.KQA();n.I0R(0,"ul",105)(1,"li")(2,"a",106),n.wR5(3,"i",107),n.OEk(4," View"),n.C$Y()(),n.I0R(5,"li")(6,"a",108),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.editList(s))}),n.wR5(7,"i",109),n.OEk(8," Edit"),n.C$Y()(),n.I0R(9,"li")(10,"a",110),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.removeItem(s.id))}),n.wR5(11,"i",111),n.OEk(12," Remove"),n.C$Y()()()}}const Q6=(i,t)=>({"bg-info-subtle text-info":i,"bg-danger-subtle text-danger":t});function e8(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr",89)(1,"td")(2,"div",23)(3,"input",90),n.iHE("ngModelChange",function(s){const f=n.usT(e).$implicit;return n.kNx(f.states,s)||(f.states=s),n.CGJ(s)}),n.qCj("change",function(s){n.usT(e);const o=n.GaO();return n.CGJ(o.onCheckboxChange(s))}),n.C$Y(),n.wR5(4,"label",91),n.C$Y()(),n.I0R(5,"td",92)(6,"a",93),n.OEk(7,"#TB01"),n.C$Y()(),n.I0R(8,"td",94),n.OEk(9),n.C$Y(),n.I0R(10,"td",94),n.OEk(11),n.wVc(12,"date"),n.C$Y(),n.I0R(13,"td",95)(14,"div",96)(15,"input",97),n.qCj("change",function(s){const f=n.usT(e).$implicit,g=n.GaO();return n.CGJ(g.setStatus(f,s))}),n.C$Y(),n.I0R(16,"label",98)(17,"span",99),n.OEk(18),n.C$Y()()()(),n.I0R(19,"td",100),n.OEk(20),n.wVc(21,"date"),n.C$Y(),n.I0R(22,"td")(23,"div",101)(24,"button",102),n.wR5(25,"i",103),n.C$Y(),n.yuY(26,J6,13,0,"ul",104),n.C$Y()()()}if(2&i){const e=t.$implicit,r=t.$index;n.CI5("id","p_",e._id,""),n.yG2(3),n._6D("value",e._id),n.OKB("ngModel",e.states),n.yG2(6),n.oRS(" ",e.name," "),n.yG2(2),n.oRS(" ",n.g7$(12,11,e.date,"EEE, dd MMM , yyyy")," "),n.yG2(4),n.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),n.yG2(),n.E7m("for","customSwitchsizemd"+r),n.yG2(),n.E7m("ngClass",n.IBC(17,Q6,"active"===e.status,"inactive"===e.status)),n.yG2(),n.oRS(" ",e.status," "),n.yG2(2),n.oRS(" ",n.g7$(21,14,e.created_at,"dd MMM, YYYY")," ")}}function t8(i,t){1&i&&(n.I0R(0,"div",28)(1,"div",112)(2,"span",113),n.OEk(3,"Loading..."),n.C$Y()()())}function i8(i,t){if(1&i&&(n.I0R(0,"option",47),n.OEk(1),n.C$Y()),2&i){const e=t.$implicit;n.E7m("value",e),n.yG2(),n.oRS(" ",e," ")}}function n8(i,t){1&i&&(n.I0R(0,"div",114),n.OEk(1,"Holiday name is required."),n.C$Y())}function r8(i,t){1&i&&(n.I0R(0,"div",114),n.OEk(1," Holiday name must be at most 45 characters "),n.C$Y())}function s8(i,t){1&i&&(n.I0R(0,"div",114),n.OEk(1,"Date is required."),n.C$Y())}function a8(i,t){1&i&&(n.I0R(0,"div",114),n.OEk(1,"Status is required."),n.C$Y())}let o8=(()=>{class i{constructor(e,r,s){this.api=e,this.toastService=r,this.formBuilder=s,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.holidaysData=[],this.holidaysDataList=[],this.id=null,this.checkedValGet=[],this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Holiday",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getDepartment(),this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],date:["",[j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`holidays?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.holidaysData=r.data||[],this.holidaysDataList=r.data||[]):(this.holidaysData=[],this.holidaysDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const f={company_id:this.company_id,name:e.name,date:e.date,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("holidays",e.id,f).subscribe(g=>this.handleResponse(g),g=>this.handleError(g))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,date:this.f.date.value,status:this.f.status.value}}add(e){this.api.post("holidays",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("holidays",this.id,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add holidays",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",date:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit holidays",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,date:e.date,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("holidays",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s));const r=this.checkedValGet;r&&r.length>0&&this.api.post("holidays-delete-multiple",{ids:r}).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.holidaysData.length;o++)1==this.holidaysData[o].states&&r.push(this.holidaysData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.holidaysData=this.holidaysData.map(f=>({...f,states:e.target.checked}));for(var r=[],o=0;o<this.holidaysData.length;o++)1==this.holidaysData[o].states&&r.push(this.holidaysData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.holidaysData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.holidaysData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.holidaysData=this.holidaysDataList.slice(r,this.endItem)}filterdata(){this.holidaysData=this.term?this.holidaysDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.holidaysDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.holidaysData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onItemsPerPageChange(e){this.currentItemsPerPage=+e.target.value,this.pageChanged({page:1,itemsPerPage:this.currentItemsPerPage})}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(Be.SA),n.GI1(j.im))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-holidays-list"]],viewQuery:function(r,s){if(1&r&&(n.CC$(q6,5),n.CC$(K6,5)),2&r){let o;n.wto(o=n.Gqi())&&(s.showModal=o.first),n.wto(o=n.Gqi())&&(s.deleteRecordModal=o.first)}},decls:141,vars:20,consts:[["title","Holiday List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0","d-md-flex"],[1,"d-flex","me-3","mt-1","mb-3","justify-content-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Holiday Name",1,"form-control"],["class","invalid-text"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date","placeholder","Enter Date of Birth","value","date",1,"form-control",3,"ngClass"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Holidays "),n.I0R(9,"span",8),n.OEk(10),n.C$Y()()(),n.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(16,"i",14),n.C$Y()(),n.I0R(17,"button",15),n.qCj("click",function(){n.usT(o);const g=n.Gew(122);return n.CGJ(g.show())}),n.wR5(18,"i",16),n.C$Y(),n.I0R(19,"button",17),n.qCj("click",function(){return s.onAdd()}),n.wR5(20,"i",18),n.OEk(21," Add Holiday "),n.C$Y()()()(),n.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),n.iHE("ngModelChange",function(g){return n.kNx(s.masterSelected,g)||(s.masterSelected=g),g}),n.qCj("change",function(g){return s.checkUncheckAll(g)}),n.C$Y(),n.wR5(30,"label",25),n.C$Y()(),n.I0R(31,"th",26),n.qCj("click",function(){return s.onSort("name")}),n.OEk(32," Hoilday Name "),n.C$Y(),n.I0R(33,"th",26),n.qCj("click",function(){return s.onSort("date")}),n.OEk(34," Date "),n.C$Y(),n.I0R(35,"th",26),n.qCj("click",function(){return s.onSort("status")}),n.OEk(36," Status "),n.C$Y(),n.I0R(37,"th",26),n.qCj("click",function(){return s.onSort("created_at")}),n.OEk(38," Created At "),n.C$Y(),n.I0R(39,"th"),n.OEk(40,"Action"),n.C$Y()()(),n.I0R(41,"tbody",27),n.c53(42,e8,27,20,"tr",89,n.wJt),n.C$Y(),n.yuY(44,t8,4,0,"div",28),n.C$Y()(),n.I0R(45,"div",29)(46,"div",30)(47,"div",31)(48,"div",32),n.wR5(49,"i",33),n.C$Y()(),n.I0R(50,"h5",34),n.OEk(51,"Sorry! No Result Found"),n.C$Y(),n.I0R(52,"p",35),n.OEk(53),n.C$Y()()(),n.I0R(54,"div",36)(55,"div",37)(56,"div",38),n.OEk(57," Showing "),n.I0R(58,"span",39),n.OEk(59),n.C$Y(),n.OEk(60," of "),n.I0R(61,"span",39),n.OEk(62),n.C$Y(),n.OEk(63," Results "),n.C$Y()(),n.I0R(64,"div",40)(65,"div",41)(66,"div",42),n.OEk(67," Items per page : "),n.C$Y(),n.I0R(68,"div",43)(69,"div",44)(70,"select",45),n.iHE("ngModelChange",function(g){return n.kNx(s.currentItemsPerPage,g)||(s.currentItemsPerPage=g),g}),n.qCj("change",function(g){return s.onItemsPerPageChange(g)}),n.yuY(71,i8,2,2,"option",46),n.I0R(72,"option",47),n.OEk(73," Show All "),n.C$Y()()()()(),n.I0R(74,"pagination",48),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(75,"div",49,50),n.qCj("hidden.bs.modal",function(){return s.resetForm()}),n.I0R(77,"div",51)(78,"div",52)(79,"div",53)(80,"h5",54),n.OEk(81,"Add Holiday"),n.C$Y(),n.I0R(82,"button",55),n.qCj("click",function(){n.usT(o);const g=n.Gew(76);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(83,"form",56),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(84,"div",57),n.wR5(85,"div",58),n.I0R(86,"div",59)(87,"label",60),n.OEk(88,"Holiday Name "),n.I0R(89,"span",61),n.OEk(90,"*"),n.C$Y()(),n.wR5(91,"input",62),n.yuY(92,n8,2,0,"div",63)(93,r8,2,0,"div",63),n.C$Y(),n.I0R(94,"div",59)(95,"label",64),n.OEk(96,"Date"),n.I0R(97,"span",61),n.OEk(98,"*"),n.C$Y()(),n.wR5(99,"input",65),n.yuY(100,s8,2,0,"div",63),n.C$Y(),n.I0R(101,"div",59)(102,"label",66),n.OEk(103,"Status "),n.I0R(104,"span",61),n.OEk(105,"*"),n.C$Y()(),n.I0R(106,"select",67)(107,"option",68),n.OEk(108,"Select Status"),n.C$Y(),n.I0R(109,"option",69),n.OEk(110,"Active"),n.C$Y(),n.I0R(111,"option",70),n.OEk(112,"Inactive"),n.C$Y()(),n.yuY(113,a8,2,0,"div",63),n.C$Y()(),n.I0R(114,"div",71)(115,"div",72)(116,"button",73),n.qCj("click",function(){n.usT(o);const g=n.Gew(76);return n.CGJ(g.hide())}),n.wR5(117,"i",74),n.OEk(118," Close "),n.C$Y(),n.I0R(119,"button",75),n.OEk(120," Add "),n.C$Y()()()()()()(),n.I0R(121,"div",76,77)(123,"div",51)(124,"div",52)(125,"div",78)(126,"button",79),n.qCj("click",function(){n.usT(o);const g=n.Gew(122);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(127,"div",80)(128,"div",81)(129,"div",61),n.wR5(130,"i",82),n.C$Y(),n.I0R(131,"div",83)(132,"h3",84),n.OEk(133,"Are you sure ?"),n.C$Y(),n.I0R(134,"p",85),n.OEk(135," Are you sure you want to remove this record ? "),n.C$Y()()(),n.I0R(136,"div",86)(137,"button",87),n.qCj("click",function(){n.usT(o);const g=n.Gew(122);return n.CGJ(g.hide())}),n.OEk(138," Close "),n.C$Y(),n.I0R(139,"button",88),n.qCj("click",function(){return s.deleteData(s.deleteId)}),n.OEk(140," Yes, Delete It! "),n.C$Y()()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(10),n.cNF(null==s.holidaysData?null:s.holidaysData.length),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(14),n.OKB("ngModel",s.masterSelected),n.yG2(13),n.oho(s.holidaysData),n.yG2(2),n.C0Y(44,s.spinnerStatus?44:-1),n.yG2(9),n.oRS(" We've searched ",s.holidaysDataList.length," Hoildays We did not find any Holiday for you search. "),n.yG2(6),n.cNF(null==s.holidaysData?null:s.holidaysData.length),n.yG2(3),n.cNF(null==s.holidaysDataList?null:s.holidaysDataList.length),n.yG2(8),n.OKB("ngModel",s.currentItemsPerPage),n.yG2(),n.E7m("ngForOf",s.itemsPerPageOptions),n.yG2(),n.E7m("value",null==s.holidaysDataList?null:s.holidaysDataList.length),n.yG2(2),n.E7m("totalItems",null==s.holidaysDataList?null:s.holidaysDataList.length)("itemsPerPage",10),n.yG2(9),n.E7m("formGroup",s.formGroup),n.yG2(9),n.C0Y(92,s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?92:-1),n.yG2(),n.C0Y(93,s.f.name&&s.f.name.hasError("maxlength")&&s.f.name.touched?93:-1),n.yG2(6),n.E7m("ngClass",s.f.date&&s.f.date.hasError("required")&&s.f.date.touched?"is-invalid":""),n.yG2(),n.C0Y(100,s.f.date&&s.f.date.hasError("required")&&s.f.date.touched?100:-1),n.yG2(6),n.E7m("ngClass",s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(113,s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?113:-1))},dependencies:[Re.QF,Re.ay,$e.O,D.ER,Zn.uo,Zn.M3,Zn.mY,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,it.im,Un.uK,Re.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();const l8=["showModal"],c8=["deleteRecordModal"];function u8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1,"Total Leave Days is required."),n.C$Y())}function h8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1," Max Carry Forward Leave field is required. "),n.C$Y())}function d8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1," Max Carry Forward Leave cannot be larger than Total Leave Days. "),n.C$Y())}function f8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1,"Carry forward field is required."),n.C$Y())}function p8(i,t){if(1&i){const e=n.KQA();n.I0R(0,"ul",110)(1,"li")(2,"a",111),n.wR5(3,"i",112),n.OEk(4," View"),n.C$Y()(),n.I0R(5,"li")(6,"a",113),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.editList(s))}),n.wR5(7,"i",114),n.OEk(8," Edit"),n.C$Y()(),n.I0R(9,"li")(10,"a",115),n.qCj("click",function(){n.usT(e);const s=n.GaO().$implicit,o=n.GaO();return n.CGJ(o.removeItem(s.id))}),n.wR5(11,"i",116),n.OEk(12," Remove"),n.C$Y()()()}}function m8(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr",99)(1,"td")(2,"div",47)(3,"input",100),n.iHE("ngModelChange",function(s){const f=n.usT(e).$implicit;return n.kNx(f.states,s)||(f.states=s),n.CGJ(s)}),n.qCj("change",function(s){n.usT(e);const o=n.GaO();return n.CGJ(o.onCheckboxChange(s))}),n.C$Y(),n.wR5(4,"label",101),n.C$Y()(),n.I0R(5,"td",102)(6,"a",103),n.OEk(7,"#TB01"),n.C$Y()(),n.I0R(8,"td",104),n.OEk(9),n.C$Y(),n.I0R(10,"td",104),n.OEk(11),n.C$Y(),n.I0R(12,"td",105),n.OEk(13),n.wVc(14,"date"),n.C$Y(),n.I0R(15,"td")(16,"div",106)(17,"button",107),n.wR5(18,"i",108),n.C$Y(),n.yuY(19,p8,13,0,"ul",109),n.C$Y()()()}if(2&i){const e=t.$implicit;n.CI5("id","p_",e._id,""),n.yG2(3),n._6D("value",e._id),n.OKB("ngModel",e.states),n.yG2(6),n.oRS(" ",e.name," "),n.yG2(2),n.oRS(" ",e.total_leave_days," "),n.yG2(2),n.oRS(" ",n.g7$(14,6,e.created_at,"dd MMM, YYYY")," ")}}function g8(i,t){1&i&&(n.I0R(0,"div",52)(1,"div",117)(2,"span",118),n.OEk(3,"Loading..."),n.C$Y()()())}function v8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1,"Leave Type name is required."),n.C$Y())}function _8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1," Leave Type name must be at most 45 characters "),n.C$Y())}function y8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1,"Number of days is required."),n.C$Y())}function x8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1," Number of days must be at most 45 characters "),n.C$Y())}function b8(i,t){1&i&&(n.I0R(0,"div",98),n.OEk(1," Number of days cannot exceed remaining leave days. "),n.C$Y())}let w8=(()=>{class i{constructor(e,r,s){this.api=e,this.toastService=r,this.formBuilder=s,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.leaveData=[],this.leaveDataList=[],this.id=null,this.checkedValGet=[],this.isEditMode=!1,this.previousValue=null,this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Leave Type",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.formGroup=this.formBuilder.group({name:["",[j.AQ.required,j.AQ.maxLength(45)]],totalLeaveDays:["",[j.AQ.required]],status:[""]}),this.leaveForm=this.formBuilder.group({totalLeave:["",j.AQ.required],carryForward:[!1,j.AQ.required],maxCarryForward:[{value:"",disabled:!0}]}),this.leaveForm.get("carryForward").valueChanges.subscribe(r=>{const s=this.leaveForm.get("maxCarryForward");r?(s.enable(),s.setValidators([j.AQ.required,this.maxCarryForwardValidator()])):(s.disable(),s.clearValidators(),s.reset()),s.updateValueAndValidity()}),this.company_id&&(this.getLeaveType(),this.getLeaveSetting())}maxLeaveDaysValidator(e){return e.value&&e.value>this.fixedremaininggdays?{maxLeaveDaysExceeded:!0}:null}maxCarryForwardValidator(){return e=>{const r=this.leaveForm.get("totalLeave").value;return e.value>r?{maxCarryForwardExceeded:!0}:null}}get f(){return this.formGroup.controls}get l(){return this.leaveForm.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getLeaveType(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveType?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveData=r.data||[],this.leaveDataList=r.data||[]):(this.leaveData=[],this.leaveDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getLeaveSetting(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveSetting?company_id=${this.company_id}`).subscribe(r=>{if(this.toggleSpinner(!1),r&&r.status){const s=r.data[0];s?(this.remaining_leavedays=s.remaining_leavedays,this.fixedremaininggdays=s.remaining_leavedays,this.leaveForm.patchValue({totalLeave:s.totalannual_leavedays??"",carryForward:0!=s.carry_forword_status,maxCarryForward:s.carry_forword_leaves??""})):(this.leaveForm.patchValue({totalLeave:"",carryForward:!1,maxCarryForward:""}),this.handleError("No data found"))}else this.leaveForm.patchValue({totalLeave:"",carryForward:!1,maxCarryForward:""}),this.handleError("Unexpected response format")},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const f={name:e.name,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("leaveType",e.id,f).subscribe(g=>this.handleResponse(g),g=>this.handleError(g))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,total_leave_days:this.f.totalLeaveDays.value,status:"active"}}add(e){this.api.post("leaveType",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("leaveType",this.id,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}onSubmitLeaveSetting(){this.leaveForm.valid?(this.toggleSpinner(!0),this.api.post("leaveSetting",{company_id:this.company_id,totalannual_leavedays:this.l.totalLeave.value,carry_forword_status:this.l.carryForward.value,carry_forword_leaves:this.l.maxCarryForward.value}).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))):this.leaveForm.markAllAsTouched()}onAdd(){this.l.totalLeave.value?(this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Leave Type",document.getElementById("add-btn").innerHTML="Add",this.id=null):this.toastService.error("Leave Type cannot be created unless the Total Annual Leave is added.")}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",totalLeaveDays:"",status:""})}editList(e){this.isEditMode=!0,this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Leave Type",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,totalLeaveDays:e.total_leave_days,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("leaveType",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s));const r=this.checkedValGet;r&&r.length>0&&this.api.post("leaveType-delete-multiple",{ids:r}).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getLeaveType(),this.getLeaveSetting(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.leaveData.length;o++)1==this.leaveData[o].states&&r.push(this.leaveData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.leaveData=this.leaveData.map(f=>({...f,states:e.target.checked}));for(var r=[],o=0;o<this.leaveData.length;o++)1==this.leaveData[o].states&&r.push(this.leaveData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.leaveData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.leaveData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.leaveData=this.leaveDataList.slice(r,this.endItem)}filterdata(){this.leaveData=this.term?this.leaveDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.leaveDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.leaveData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(Be.SA),n.GI1(j.im))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-leave-type"]],viewQuery:function(r,s){if(1&r&&(n.CC$(l8,5),n.CC$(c8,5)),2&r){let o;n.wto(o=n.Gqi())&&(s.showModal=o.first),n.wto(o=n.Gqi())&&(s.deleteRecordModal=o.first)}},decls:164,vars:24,consts:[["title","Leave Type List",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-lg-4"],[1,"mb-3"],["for","totalLeave",1,"form-label"],[1,"text-danger"],["type","number","id","totalLeave","placeholder","Enter Total Leave Days","formControlName","totalLeave",1,"form-control"],["class","invalid-text"],[1,"col-lg-6"],[1,"row","mb-3"],["for","carryForward",1,"form-label"],[1,"col-2","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","id","carryForwardSwitch","formControlName","carryForward",1,"form-check-input"],["for","carryForwardSwitch",1,"form-check-label"],[1,"col-6"],["type","number","id","maxCarryForward","placeholder","Maximum Leave Days","formControlName","maxCarryForward",1,"form-control"],["class","invalid-text",4,"ngIf"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],[1,"btn","btn-primary","ng-star-inserted"],["id","productList"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","product-title-input",1,"form-label"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Leave Type Name",1,"form-control"],["type","number","id","product-title-input","formControlName","totalLeaveDays","placeholder","Enter Number of days",1,"form-control"],["type","text","id","product-title-input","disabled","",1,"form-control",3,"value"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[1,"invalid-text"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),n.OEk(6,"Leave Settings"),n.C$Y()(),n.I0R(7,"div",6)(8,"form",7),n.qCj("ngSubmit",function(){return s.onSubmitLeaveSetting()}),n.I0R(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),n.OEk(13," Total Annual Leave Days"),n.I0R(14,"span",12),n.OEk(15,"*"),n.C$Y()(),n.wR5(16,"input",13),n.yuY(17,u8,2,0,"div",14),n.C$Y()(),n.I0R(18,"div",15)(19,"div",16)(20,"label",17),n.OEk(21," Carry forward"),n.I0R(22,"span",12),n.OEk(23,"*"),n.C$Y()(),n.I0R(24,"div",18)(25,"div",19),n.wR5(26,"input",20),n.I0R(27,"label",21),n.OEk(28),n.C$Y()()(),n.I0R(29,"div",22),n.wR5(30,"input",23),n.yuY(31,h8,2,0,"div",14)(32,d8,2,0,"div",24),n.C$Y()(),n.yuY(33,f8,2,0,"div",14),n.C$Y(),n.I0R(34,"div",25)(35,"div",26)(36,"button",27),n.OEk(37,"Save"),n.C$Y()()()()()()()()(),n.I0R(38,"div",28)(39,"div",1)(40,"div",2)(41,"div",3)(42,"div",29)(43,"div",30)(44,"h5",5),n.OEk(45," Leave Type "),n.I0R(46,"span",31),n.OEk(47),n.C$Y()(),n.I0R(48,"p",32),n.OEk(49," Remaining Days : "),n.I0R(50,"span",33),n.OEk(51),n.C$Y()()(),n.I0R(52,"div",34)(53,"div",35)(54,"div",36)(55,"div",37)(56,"input",38),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(57,"i",39),n.C$Y()(),n.I0R(58,"button",40),n.qCj("click",function(){n.usT(o);const g=n.Gew(145);return n.CGJ(g.show())}),n.wR5(59,"i",41),n.C$Y(),n.I0R(60,"button",42),n.qCj("click",function(){return s.onAdd()}),n.wR5(61,"i",43),n.OEk(62," Add Leave Type "),n.C$Y()()()(),n.I0R(63,"div",6)(64,"div",44)(65,"table",45)(66,"thead",46)(67,"tr")(68,"th")(69,"div",47)(70,"input",48),n.iHE("ngModelChange",function(g){return n.kNx(s.masterSelected,g)||(s.masterSelected=g),g}),n.qCj("change",function(g){return s.checkUncheckAll(g)}),n.C$Y(),n.wR5(71,"label",49),n.C$Y()(),n.I0R(72,"th",50),n.qCj("click",function(){return s.onSort("name")}),n.OEk(73," Leave Type Name "),n.C$Y(),n.I0R(74,"th",50),n.qCj("click",function(){return s.onSort("total_leave_days")}),n.OEk(75," Total Days "),n.C$Y(),n.I0R(76,"th",50),n.qCj("click",function(){return s.onSort("created_at")}),n.OEk(77," Created At "),n.C$Y(),n.I0R(78,"th"),n.OEk(79,"Action"),n.C$Y()()(),n.I0R(80,"tbody",51),n.c53(81,m8,20,9,"tr",99,n.wJt),n.C$Y(),n.yuY(83,g8,4,0,"div",52),n.C$Y()(),n.I0R(84,"div",53)(85,"div",54)(86,"div",55)(87,"div",56),n.wR5(88,"i",57),n.C$Y()(),n.I0R(89,"h5",58),n.OEk(90,"Sorry! No Result Found"),n.C$Y(),n.I0R(91,"p",59),n.OEk(92),n.C$Y()()(),n.I0R(93,"div",60)(94,"div",61)(95,"div",62),n.OEk(96," Showing "),n.I0R(97,"span",63),n.OEk(98),n.C$Y(),n.OEk(99," of "),n.I0R(100,"span",63),n.OEk(101),n.C$Y(),n.OEk(102," Results "),n.C$Y()(),n.I0R(103,"div",64)(104,"pagination",65),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(105,"div",66,67),n.qCj("hidden.bs.modal",function(){return s.resetForm()}),n.I0R(107,"div",68)(108,"div",69)(109,"div",70)(110,"h5",71),n.OEk(111,"Add Leave Type"),n.C$Y(),n.I0R(112,"button",72),n.qCj("click",function(){return n.usT(o),n.Gew(106).hide(),n.CGJ(s.isEditMode=!s.isEditMode)}),n.C$Y()(),n.I0R(113,"form",73),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(114,"div",74),n.wR5(115,"div",75),n.I0R(116,"div",10)(117,"label",76),n.OEk(118,"Leave Type Name "),n.I0R(119,"span",12),n.OEk(120,"*"),n.C$Y()(),n.wR5(121,"input",77),n.yuY(122,v8,2,0,"div",14)(123,_8,2,0,"div",14),n.C$Y(),n.I0R(124,"div",10)(125,"label",76),n.OEk(126,"Number of days "),n.I0R(127,"span",12),n.OEk(128,"*"),n.C$Y()(),n.wR5(129,"input",78),n.yuY(130,y8,2,0,"div",14)(131,x8,2,0,"div",14)(132,b8,2,0,"div",24),n.C$Y(),n.I0R(133,"div",10)(134,"label",76),n.OEk(135,"Remaining days "),n.C$Y(),n.wR5(136,"input",79),n.C$Y()(),n.I0R(137,"div",80)(138,"div",81)(139,"button",82),n.qCj("click",function(){n.usT(o);const g=n.Gew(106);return n.CGJ(g.hide())}),n.wR5(140,"i",83),n.OEk(141," Close "),n.C$Y(),n.I0R(142,"button",84),n.OEk(143," Add "),n.C$Y()()()()()()(),n.I0R(144,"div",85,86)(146,"div",68)(147,"div",69)(148,"div",87)(149,"button",88),n.qCj("click",function(){n.usT(o);const g=n.Gew(145);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(150,"div",89)(151,"div",90)(152,"div",12),n.wR5(153,"i",91),n.C$Y(),n.I0R(154,"div",92)(155,"h3",93),n.OEk(156,"Are you sure ?"),n.C$Y(),n.I0R(157,"p",94),n.OEk(158," Are you sure you want to remove this record ? "),n.C$Y()()(),n.I0R(159,"div",95)(160,"button",96),n.qCj("click",function(){n.usT(o);const g=n.Gew(145);return n.CGJ(g.hide())}),n.OEk(161," Close "),n.C$Y(),n.I0R(162,"button",97),n.qCj("click",function(){return s.deleteData(s.deleteId)}),n.OEk(163," Yes, Delete It! "),n.C$Y()()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(8),n.E7m("formGroup",s.leaveForm),n.yG2(9),n.C0Y(17,s.l.totalLeave&&s.l.totalLeave.hasError("required")&&s.l.totalLeave.touched?17:-1),n.yG2(11),n.oRS(" ",s.leaveForm.get("carryForward").value?"Yes":"No"," "),n.yG2(3),n.C0Y(31,s.l.maxCarryForward&&s.l.maxCarryForward.hasError("required")&&s.l.maxCarryForward.touched?31:-1),n.yG2(),n.E7m("ngIf",s.leaveForm.get("maxCarryForward").hasError("maxCarryForwardExceeded")&&s.leaveForm.get("maxCarryForward").touched),n.yG2(),n.C0Y(33,s.l.carryForward&&s.l.carryForward.hasError("required")&&s.l.carryForward.touched?33:-1),n.yG2(14),n.cNF(null==s.leaveData?null:s.leaveData.length),n.yG2(4),n.oRS("",s.fixedremaininggdays," "),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(14),n.OKB("ngModel",s.masterSelected),n.yG2(11),n.oho(s.leaveData),n.yG2(2),n.C0Y(83,s.spinnerStatus?83:-1),n.yG2(9),n.oRS(" We've searched ",s.leaveDataList.length," Leave Type We did not find any Leave Type for you search. "),n.yG2(6),n.cNF(null==s.leaveData?null:s.leaveData.length),n.yG2(3),n.cNF(null==s.leaveDataList?null:s.leaveDataList.length),n.yG2(3),n.E7m("totalItems",null==s.leaveDataList?null:s.leaveDataList.length)("itemsPerPage",10),n.yG2(9),n.E7m("formGroup",s.formGroup),n.yG2(9),n.C0Y(122,s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?122:-1),n.yG2(),n.C0Y(123,s.f.name&&s.f.name.hasError("maxlength")&&s.f.name.touched?123:-1),n.yG2(7),n.C0Y(130,s.f.totalLeaveDays&&s.f.totalLeaveDays.hasError("required")&&s.f.totalLeaveDays.touched?130:-1),n.yG2(),n.C0Y(131,s.f.totalLeaveDays&&s.f.totalLeaveDays.hasError("maxlength")&&s.f.totalLeaveDays.touched?131:-1),n.yG2(),n.E7m("ngIf",null==s.f.totalLeaveDays.errors?null:s.f.totalLeaveDays.errors.maxLeaveDaysExceeded),n.yG2(4),n.E7m("value",s.remaining_leavedays))},dependencies:[Re.u_,$e.O,D.ER,Zn.uo,Zn.M3,Zn.mY,j.sz,j.ot,j.O4,j.SU,j.ue,j.u,j._G,j.uW,j.Wo,it.im,Un.uK,Re.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();const C8=["showModal"],E8=["deleteRecordModal"];function k8(i,t){if(1&i&&(n.I0R(0,"div",96),n.wR5(1,"img",97),n.C$Y()),2&i){const e=n.GaO().$implicit;n.yG2(),n._6D("src",e.image,n.K6U)}}function T8(i,t){1&i&&(n.I0R(0,"div",96),n.wR5(1,"img",98),n.C$Y())}function S8(i,t){if(1&i&&(n.I0R(0,"option",99),n.OEk(1),n.C$Y()),2&i){const e=t.$implicit,r=n.GaO().$implicit;n.E7m("value",e)("selected",e==r.status),n.yG2(),n.oRS(" ",e," ")}}const A8=()=>["Pending","Approved","Declined"];function D8(i,t){if(1&i){const e=n.KQA();n.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),n.iHE("ngModelChange",function(s){const f=n.usT(e).$implicit;return n.kNx(f.states,s)||(f.states=s),n.CGJ(s)}),n.qCj("change",function(s){n.usT(e);const o=n.GaO();return n.CGJ(o.onCheckboxChange(s))}),n.C$Y(),n.wR5(4,"label",82),n.C$Y()(),n.I0R(5,"td",83)(6,"a",84),n.OEk(7,"#TB01"),n.C$Y()(),n.I0R(8,"td",85)(9,"div",86),n.yuY(10,k8,2,1,"div",87)(11,T8,2,0),n.I0R(12,"div")(13,"h6",88)(14,"a",89),n.OEk(15),n.C$Y()(),n.I0R(16,"p",35),n.OEk(17),n.C$Y()()()(),n.I0R(18,"td",85),n.OEk(19),n.C$Y(),n.I0R(20,"td",85),n.OEk(21),n.wVc(22,"date"),n.wVc(23,"date"),n.C$Y(),n.I0R(24,"td",85),n.OEk(25),n.C$Y(),n.I0R(26,"td",85),n.OEk(27),n.C$Y(),n.I0R(28,"td",85)(29,"select",90),n.qCj("change",function(s){const f=n.usT(e).$implicit,g=n.GaO();return n.CGJ(g.setStatus(f,s))}),n.I0R(30,"option",59),n.OEk(31,"Select Status"),n.C$Y(),n.yuY(32,S8,2,3,"option",91),n.C$Y()(),n.I0R(33,"td",92),n.OEk(34),n.wVc(35,"date"),n.C$Y(),n.I0R(36,"td")(37,"ul",93)(38,"li")(39,"a",94),n.wR5(40,"i",95),n.C$Y()()()()()}if(2&i){const e=t.$implicit;n.CI5("id","p_",e._id,""),n.yG2(3),n._6D("value",e._id),n.OKB("ngModel",e.states),n.yG2(7),n.C0Y(10,e.image?10:11),n.yG2(5),n.cNF(e.name),n.yG2(2),n.cNF(e.designation),n.yG2(2),n.oRS(" ",e.leave_type," "),n.yG2(2),n.CAO(" ",n.g7$(22,16,e.from_date,"dd MMM, YYYY")," - ",n.g7$(23,19,e.to_date,"dd MMM, YYYY")," "),n.yG2(4),n.oRS(" ",e.no_of_days," "),n.yG2(2),n.CAO(" Remaing ",e.leave_type," leave ",e.total_leave_days-e.no_of_days>0?e.total_leave_days-e.no_of_days:0," "),n.yG2(5),n.E7m("ngForOf",n.q4q(25,A8)),n.yG2(2),n.oRS(" ",n.g7$(35,22,e.created_at,"dd MMM, YYYY")," "),n.yG2(5),n.u6R("routerLink","/leave-detail/",e.id,"/",e.emp_id,"")}}function I8(i,t){1&i&&(n.I0R(0,"div",28)(1,"div",100)(2,"span",101),n.OEk(3,"Loading..."),n.C$Y()()())}function M8(i,t){1&i&&(n.I0R(0,"div",102),n.OEk(1,"Leave Type name is required."),n.C$Y())}function O8(i,t){1&i&&(n.I0R(0,"div",102),n.OEk(1," Leave Type name must be at most 45 characters "),n.C$Y())}function R8(i,t){1&i&&(n.I0R(0,"div",102),n.OEk(1,"Status is required."),n.C$Y())}let L8=(()=>{class i{constructor(e,r,s){this.api=e,this.toastService=r,this.formBuilder=s,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.leaveRequestData=[],this.leaveRequestDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Leave Request",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getLeaveRequest(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getLeaveRequest(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveRequest?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveRequestData=r.data||[],this.leaveRequestDataList=r.data||[]):(this.leaveRequestData=[],this.leaveRequestDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const s=r.target.value,o={status:s};this.toggleSpinner(!0),this.api.put("updateleaveRequestStatus",e.id,o).subscribe(f=>this.handleStatusResponse(s),f=>this.handleError(f))}handleStatusResponse(e){this.toggleSpinner(!1),"Approved"==e?(this.toastService.success("Leave Request Approved Successfully!!"),this.getLeaveRequest()):this.toastService.error("The leave request has been declined.")}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("leave",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("leave",this.id,e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add leave",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit leave",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("leave",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s));const r=this.checkedValGet;r&&r.length>0&&this.api.post("leave-delete-multiple",{ids:r}).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getLeaveRequest(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.leaveRequestData.length;o++)1==this.leaveRequestData[o].states&&r.push(this.leaveRequestData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.leaveRequestData=this.leaveRequestData.map(f=>({...f,states:e.target.checked}));for(var r=[],o=0;o<this.leaveRequestData.length;o++)1==this.leaveRequestData[o].states&&r.push(this.leaveRequestData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.leaveRequestData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.leaveRequestData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.leaveRequestData=this.leaveRequestDataList.slice(r,this.endItem)}filterdata(){this.leaveRequestData=this.term?this.leaveRequestDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.leaveRequestDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.leaveRequestData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(Be.SA),n.GI1(j.im))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-leave-request"]],viewQuery:function(r,s){if(1&r&&(n.CC$(C8,5),n.CC$(E8,5)),2&r){let o;n.wto(o=n.Gqi())&&(s.showModal=o.first),n.wto(o=n.Gqi())&&(s.deleteRecordModal=o.first)}},decls:131,vars:15,consts:[["title","Leave Request List",3,"breadcrumbItems"],["id","leave-request"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Leave Type Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],["class","avatar-sm bg-light rounded p-1 me-2"],[1,"mb-0"],[1,"text-reset","products"],["data-choices","","id","statuss",1,"form-control",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"category"],[1,"d-flex","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"routerLink"],[1,"ph-eye"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[3,"value","selected"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Leave Request "),n.I0R(9,"span",8),n.OEk(10),n.C$Y()()(),n.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),n.iHE("ngModelChange",function(g){return n.kNx(s.term,g)||(s.term=g),g}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(16,"i",14),n.C$Y()(),n.I0R(17,"button",15),n.qCj("click",function(){n.usT(o);const g=n.Gew(112);return n.CGJ(g.show())}),n.wR5(18,"i",16),n.C$Y(),n.I0R(19,"button",17),n.qCj("click",function(){return s.onAdd()}),n.wR5(20,"i",18),n.OEk(21," Add Leave "),n.C$Y()()()(),n.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),n.iHE("ngModelChange",function(g){return n.kNx(s.masterSelected,g)||(s.masterSelected=g),g}),n.qCj("change",function(g){return s.checkUncheckAll(g)}),n.C$Y(),n.wR5(30,"label",25),n.C$Y()(),n.I0R(31,"th",26),n.qCj("click",function(){return s.onSort("name")}),n.OEk(32," Name "),n.C$Y(),n.I0R(33,"th",26),n.qCj("click",function(){return s.onSort("leave_type")}),n.OEk(34," Leave Type "),n.C$Y(),n.I0R(35,"th",26),n.qCj("click",function(){return s.onSort("from_date")}),n.OEk(36," From - To "),n.C$Y(),n.I0R(37,"th",26),n.qCj("click",function(){return s.onSort("no_of_days")}),n.OEk(38," Used Leave "),n.C$Y(),n.I0R(39,"th",26),n.qCj("click",function(){return s.onSort("no_of_days")}),n.OEk(40," Remaining Leave "),n.C$Y(),n.I0R(41,"th",26),n.qCj("click",function(){return s.onSort("status")}),n.OEk(42," Status "),n.C$Y(),n.I0R(43,"th",26),n.qCj("click",function(){return s.onSort("created_at")}),n.OEk(44," Created At "),n.C$Y(),n.I0R(45,"th"),n.OEk(46,"Action"),n.C$Y()()(),n.I0R(47,"tbody",27),n.c53(48,D8,41,26,"tr",80,n.wJt),n.C$Y(),n.yuY(50,I8,4,0,"div",28),n.C$Y()(),n.I0R(51,"div",29)(52,"div",30)(53,"div",31)(54,"div",32),n.wR5(55,"i",33),n.C$Y()(),n.I0R(56,"h5",34),n.OEk(57,"Sorry! No Result Found"),n.C$Y(),n.I0R(58,"p",35),n.OEk(59),n.C$Y()()(),n.I0R(60,"div",36)(61,"div",37)(62,"div",38),n.OEk(63," Showing "),n.I0R(64,"span",39),n.OEk(65),n.C$Y(),n.OEk(66," of "),n.I0R(67,"span",39),n.OEk(68),n.C$Y(),n.OEk(69," Results "),n.C$Y()(),n.I0R(70,"div",40)(71,"pagination",41),n.qCj("pageChanged",function(g){return s.pageChanged(g)}),n.C$Y()()()()()()()(),n.I0R(72,"div",42,43),n.qCj("hidden.bs.modal",function(){return s.resetForm()}),n.I0R(74,"div",44)(75,"div",45)(76,"div",46)(77,"h5",47),n.OEk(78,"Add Leave Type"),n.C$Y(),n.I0R(79,"button",48),n.qCj("click",function(){n.usT(o);const g=n.Gew(73);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(80,"form",49),n.qCj("ngSubmit",function(){return s.onSubmit()}),n.I0R(81,"div",50),n.wR5(82,"div",51),n.I0R(83,"div",52)(84,"label",53),n.OEk(85,"Leave Type Name "),n.I0R(86,"span",54),n.OEk(87,"*"),n.C$Y()(),n.wR5(88,"input",55),n.yuY(89,M8,2,0,"div",56)(90,O8,2,0,"div",56),n.C$Y(),n.I0R(91,"div",52)(92,"label",57),n.OEk(93,"Status "),n.I0R(94,"span",54),n.OEk(95,"*"),n.C$Y()(),n.I0R(96,"select",58)(97,"option",59),n.OEk(98,"Select Status"),n.C$Y(),n.I0R(99,"option",60),n.OEk(100,"Active"),n.C$Y(),n.I0R(101,"option",61),n.OEk(102,"Inactive"),n.C$Y()(),n.yuY(103,R8,2,0,"div",56),n.C$Y()(),n.I0R(104,"div",62)(105,"div",63)(106,"button",64),n.qCj("click",function(){n.usT(o);const g=n.Gew(73);return n.CGJ(g.hide())}),n.wR5(107,"i",65),n.OEk(108," Close "),n.C$Y(),n.I0R(109,"button",66),n.OEk(110," Add "),n.C$Y()()()()()()(),n.I0R(111,"div",67,68)(113,"div",44)(114,"div",45)(115,"div",69)(116,"button",70),n.qCj("click",function(){n.usT(o);const g=n.Gew(112);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(117,"div",71)(118,"div",72)(119,"div",54),n.wR5(120,"i",73),n.C$Y(),n.I0R(121,"div",74)(122,"h3",75),n.OEk(123,"Are you sure ?"),n.C$Y(),n.I0R(124,"p",76),n.OEk(125," Are you sure you want to remove this record ? "),n.C$Y()()(),n.I0R(126,"div",77)(127,"button",78),n.qCj("click",function(){n.usT(o);const g=n.Gew(112);return n.CGJ(g.hide())}),n.OEk(128," Close "),n.C$Y(),n.I0R(129,"button",79),n.qCj("click",function(){return s.deleteData(s.deleteId)}),n.OEk(130," Yes, Delete It! "),n.C$Y()()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(10),n.cNF(null==s.leaveRequestData?null:s.leaveRequestData.length),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(14),n.OKB("ngModel",s.masterSelected),n.yG2(19),n.oho(s.leaveRequestData),n.yG2(2),n.C0Y(50,s.spinnerStatus?50:-1),n.yG2(9),n.oRS(" We've searched ",s.leaveRequestDataList.length," Leave Request We did not find any Leave Request for you search. "),n.yG2(6),n.cNF(null==s.leaveRequestData?null:s.leaveRequestData.length),n.yG2(3),n.cNF(null==s.leaveRequestDataList?null:s.leaveRequestDataList.length),n.yG2(3),n.E7m("totalItems",null==s.leaveRequestDataList?null:s.leaveRequestDataList.length)("itemsPerPage",10),n.yG2(9),n.E7m("formGroup",s.formGroup),n.yG2(9),n.C0Y(89,s.f.name&&s.f.name.hasError("required")&&s.f.name.touched?89:-1),n.yG2(),n.C0Y(90,s.f.name&&s.f.name.hasError("maxlength")&&s.f.name.touched?90:-1),n.yG2(6),n.E7m("ngClass",s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?"is-invalid":""),n.yG2(7),n.C0Y(103,s.f.status&&s.f.status.hasError("required")&&s.f.status.touched?103:-1))},dependencies:[Re.QF,Re.ay,$e.O,D.ER,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,it.im,Un.uK,Re.y]})}return i})();function P8(i,t){if(1&i&&(n.OEk(0),n.wVc(1,"date"),n.I0R(2,"span",49),n.OEk(3),n.C$Y()),2&i){const e=n.GaO();n.oRS(" ",n.g7$(1,2,null==e.leaveDetailData?null:e.leaveDetailData.recent_leave_date,"EEE dd MMM, YYYY ")," "),n.yG2(3),n.oRS(" (",null==e.leaveDetailData?null:e.leaveDetailData.recent_leave,")")}}function F8(i,t){1&i&&n.OEk(0," - ")}function B8(i,t){if(1&i&&(n.OEk(0),n.wVc(1,"date"),n.I0R(2,"span",49),n.OEk(3),n.C$Y()),2&i){const e=n.GaO();n.oRS(" ",n.g7$(1,2,null==e.leaveDetailData?null:e.leaveDetailData.upcoming_leave_date,"EEE dd MMM, YYYY ")," "),n.yG2(3),n.oRS("(",null==e.leaveDetailData?null:e.leaveDetailData.upcoming_leave,")")}}function N8(i,t){1&i&&n.OEk(0," - ")}function z8(i,t){if(1&i&&(n.I0R(0,"tr",50)(1,"td"),n.OEk(2),n.C$Y(),n.I0R(3,"td")(4,"span",51),n.OEk(5),n.C$Y()(),n.I0R(6,"td"),n.OEk(7),n.C$Y(),n.I0R(8,"td",52)(9,"span",53),n.OEk(10),n.C$Y()()()),2&i){const e=t.$implicit;n.yG2(2),n.oRS(" ",e.name," "),n.yG2(3),n.cNF(e.no_of_days_taken),n.yG2(2),n.oRS(" ",e.remaining_leave," "),n.yG2(3),n.cNF(e.total_leave_days)}}let Y8=(()=>{class i{constructor(e,r,s,o){this.route=e,this.api=r,this.router=s,this.toastService=o,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.leaveTypesData=[],this.reason=""}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management",active:!0},{label:"Leave Detail",active:!0}],this.id=this.route.snapshot.paramMap.get("id"),this.emp_id=this.route.snapshot.paramMap.get("emp_id");const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&(this.leaveDetail(),this.getemployeeData())}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}leaveDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveDetail/${this.id}?company_id=${this.company_id}&emp_id=${this.emp_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveTypesData=r.data,this.leaveDetailData=r.leave_details):this.handleError("Unexpected response format")},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.emp_id).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0]):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}getTotal(e){return this.leaveTypesData.reduce((r,s)=>r+Number(s[e]),0)}updateLeaveStatus(e){const r={status:e,admin_reason:this.reason};this.toggleSpinner(!0),this.api.put("updateleaveRequestStatus",this.id,r).subscribe(s=>this.handleStatusResponse(e),s=>this.handleError(s))}handleStatusResponse(e){this.toggleSpinner(!1),"Approved"==e?this.toastService.success("Leave Request Approved Successfully!!"):this.toastService.error("The leave request has been declined."),this.router.navigate(["leave-requests"])}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(D.gV),n.GI1(He.W),n.GI1(D.E5),n.GI1(Be.SA))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-leave-request-deatil"]],decls:145,vars:27,consts:[["title","Leave Detail",3,"breadcrumbItems"],[1,"row"],[1,"col-xxl-12"],[1,"card"],[1,"row","g-0","product-list"],[1,"col-xl-4","border-end"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"d-flex","gap-2","align-items-center","mb-3"],[1,"flex-shrink-0"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"flex-grow-1"],[1,"fs-md"],[1,"text-muted","mb-0"],[1,"table-responsive","table-card","mt-1"],[1,"table","table-borderless","align-middle","mb-0"],["id","t-client"],["class","fw-bold"],[1,"text-danger"],["id","c-date"],[1,"text-end"],[1,"btn","btn-success","me-1",3,"click"],[1,"bx","bx-check","align-baseline","me-1"],[1,"btn","btn-danger","me-1",3,"click"],[1,"ri-close-line","align-baseline","me-1"],[1,"col-xxl-8"],[1,"card-header","d-flex","align-items-center","gap-2"],[1,"card-title","flex-grow-1","mb-0"],[1,"badge","bg-danger-subtle","text-danger"],[1,"table-responsive"],[1,"table","align-middle","table-nowrap","table-borderless","mb-0"],[1,"table-active"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],["bsModal","","id","myModal","tabindex","-1","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",2,"display","none"],["template","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","VertimeassageInput",1,"form-label"],["id","VertimeassageInput","rows","3","placeholder","Enter your message",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fw-bold"],[1,"product"],[1,"product-price"],[1,"fw-medium","text-end"],[1,"product-line-price"],["class","product"]],template:function(r,s){if(1&r){const o=n.KQA();n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h6",7),n.OEk(8,"Leave Details"),n.C$Y()(),n.I0R(9,"div",8)(10,"div",9)(11,"div",10),n.wR5(12,"img",11),n.C$Y(),n.I0R(13,"div",12)(14,"h6",13),n.OEk(15),n.C$Y(),n.I0R(16,"p",14),n.OEk(17),n.C$Y()()(),n.I0R(18,"div",15)(19,"table",16)(20,"tbody")(21,"tr")(22,"th"),n.OEk(23,"Leave Type :"),n.C$Y(),n.I0R(24,"td"),n.OEk(25),n.C$Y()(),n.I0R(26,"tr")(27,"th"),n.OEk(28,"From :"),n.C$Y(),n.I0R(29,"td",17),n.OEk(30),n.wVc(31,"date"),n.C$Y()(),n.I0R(32,"tr")(33,"th"),n.OEk(34,"To :"),n.C$Y(),n.I0R(35,"td"),n.OEk(36),n.wVc(37,"date"),n.C$Y()(),n.I0R(38,"tr")(39,"th"),n.OEk(40,"Last Leave On:"),n.C$Y(),n.I0R(41,"td"),n.yuY(42,P8,4,5,"span",18)(43,F8,1,0),n.C$Y()(),n.I0R(44,"tr")(45,"th"),n.OEk(46,"Upcoming Leave On:"),n.C$Y(),n.I0R(47,"td"),n.yuY(48,B8,4,5,"span",18)(49,N8,1,0),n.C$Y()(),n.I0R(50,"tr")(51,"th"),n.OEk(52," No of Days "),n.I0R(53,"span",19),n.OEk(54,"(Exclude Sundays and company holidays.)"),n.C$Y()(),n.I0R(55,"td"),n.OEk(56),n.C$Y()(),n.I0R(57,"tr")(58,"th"),n.OEk(59,"No. of Sunday included In Leaves :"),n.C$Y(),n.I0R(60,"td"),n.OEk(61),n.C$Y()(),n.I0R(62,"tr")(63,"th"),n.OEk(64,"No. of Company Hoilday included In Leaves :"),n.C$Y(),n.I0R(65,"td"),n.OEk(66),n.C$Y()(),n.I0R(67,"tr")(68,"th"),n.OEk(69,"Reason :"),n.C$Y(),n.I0R(70,"td"),n.OEk(71),n.C$Y()(),n.I0R(72,"tr")(73,"th"),n.OEk(74,"Applied On :"),n.C$Y(),n.I0R(75,"td",20),n.OEk(76),n.wVc(77,"date"),n.C$Y()(),n.I0R(78,"tr")(79,"div",21)(80,"button",22),n.qCj("click",function(){return s.updateLeaveStatus("Approved")}),n.wR5(81,"i",23),n.OEk(82," Approved "),n.C$Y(),n.I0R(83,"button",24),n.qCj("click",function(){n.usT(o);const g=n.Gew(128);return n.CGJ(g.show())}),n.wR5(84,"i",25),n.OEk(85," Declined "),n.C$Y()()()()()()()(),n.I0R(86,"div",26)(87,"div",27)(88,"h5",28),n.OEk(89,"Leave Type Detail"),n.C$Y(),n.I0R(90,"div",10),n.wR5(91,"span",29),n.C$Y()(),n.I0R(92,"div",8)(93,"div",30)(94,"table",31)(95,"thead",32)(96,"tr")(97,"th"),n.OEk(98,"Leave Type Name"),n.C$Y(),n.I0R(99,"th"),n.OEk(100,"No. Of Taken Leaves"),n.C$Y(),n.I0R(101,"th"),n.OEk(102,"Remaining Leaves"),n.C$Y(),n.I0R(103,"th",21),n.OEk(104,"Total Leaves"),n.C$Y()()(),n.I0R(105,"tbody"),n.c53(106,z8,11,4,"tr",54,n.wJt),n.C$Y()(),n.I0R(108,"div",33)(109,"table",34)(110,"tbody")(111,"tr")(112,"td"),n.OEk(113,"Total Leaves Taken"),n.C$Y(),n.I0R(114,"td",21),n.OEk(115),n.C$Y()(),n.I0R(116,"tr")(117,"td"),n.OEk(118,"Total Remaining Leaves"),n.C$Y(),n.I0R(119,"td",21),n.OEk(120),n.C$Y()(),n.I0R(121,"tr")(122,"td"),n.OEk(123,"Total Leaves"),n.C$Y(),n.I0R(124,"td",21),n.OEk(125),n.C$Y()()()()()()()()()()()(),n.I0R(126,"div")(127,"div",35,36)(129,"div",37)(130,"div",38)(131,"div",39)(132,"h5",40),n.OEk(133,"Decline Leave Request"),n.C$Y(),n.I0R(134,"button",41),n.qCj("click",function(){n.usT(o);const g=n.Gew(128);return n.CGJ(g.hide())}),n.C$Y()(),n.I0R(135,"div",42)(136,"div",43)(137,"label",44),n.OEk(138,"Reason"),n.C$Y(),n.I0R(139,"textarea",45),n.iHE("ngModelChange",function(g){return n.kNx(s.reason,g)||(s.reason=g),g}),n.C$Y()()(),n.I0R(140,"div",46)(141,"button",47),n.qCj("click",function(){n.usT(o);const g=n.Gew(128);return n.CGJ(g.hide())}),n.OEk(142," Close "),n.C$Y(),n.I0R(143,"button",48),n.qCj("click",function(){return s.updateLeaveStatus("Declined")}),n.OEk(144," Declined "),n.C$Y()()()()()()}2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(12),n._6D("src",null==s.employeeDetail?null:s.employeeDetail.image,n.K6U),n.yG2(3),n.cNF(null==s.employeeDetail?null:s.employeeDetail.name),n.yG2(2),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.department_name," "),n.yG2(8),n.cNF(null==s.leaveDetailData?null:s.leaveDetailData.leave_type),n.yG2(5),n.oRS(" ",n.g7$(31,18,null==s.leaveDetailData?null:s.leaveDetailData.from_date,"EEE dd MMM, YYYY")," "),n.yG2(6),n.oRS(" ",n.g7$(37,21,null==s.leaveDetailData?null:s.leaveDetailData.to_date,"EEE dd MMM, YYYY")," "),n.yG2(6),n.C0Y(42,null!=s.leaveDetailData&&s.leaveDetailData.recent_leave?42:43),n.yG2(6),n.C0Y(48,null!=s.leaveDetailData&&s.leaveDetailData.upcoming_leave?48:49),n.yG2(8),n.oRS(" ",null==s.leaveDetailData?null:s.leaveDetailData.no_of_days," "),n.yG2(5),n.oRS(" ",null==s.leaveDetailData?null:s.leaveDetailData.number_of_sundays," "),n.yG2(5),n.oRS(" ",null==s.leaveDetailData?null:s.leaveDetailData.number_of_holidays," "),n.yG2(5),n.oRS(" ",null==s.leaveDetailData?null:s.leaveDetailData.reason," "),n.yG2(5),n.oRS(" ",n.g7$(77,24,null==s.leaveDetailData?null:s.leaveDetailData.created_at,"EEE dd MMM, YYYY , h:mm a")," "),n.yG2(30),n.oho(s.leaveTypesData),n.yG2(9),n.oRS(" ",s.getTotal("no_of_days_taken")," "),n.yG2(5),n.oRS(" ",s.getTotal("remaining_leave")," "),n.yG2(5),n.oRS(" ",s.getTotal("total_leave_days")," "),n.yG2(14),n.OKB("ngModel",s.reason))},dependencies:[$e.O,j.ot,j.ue,j._G,Un.uK,Re.y]})}return i})();function G8(i,t){if(1&i&&(n.I0R(0,"tr",57),n.wR5(1,"td"),n.I0R(2,"td",58)(3,"a",59),n.OEk(4,"#TB01"),n.C$Y()(),n.I0R(5,"td",60),n.wR5(6,"i",61),n.OEk(7),n.C$Y(),n.I0R(8,"td",62),n.OEk(9),n.C$Y(),n.I0R(10,"td",63),n.OEk(11),n.wVc(12,"date"),n.C$Y(),n.I0R(13,"td")(14,"a",64),n.wR5(15,"i",65),n.C$Y()()()),2&i){const e=t.$implicit;n.CI5("id","p_",t.$index,""),n.yG2(7),n.oRS(" ",e.filename," "),n.yG2(2),n.oRS(" ",e.size," "),n.yG2(2),n.oRS(" ",n.g7$(12,5,e.createdAt,"dd MMM , yyyy, h:mm a")," "),n.yG2(3),n.E7m("href",e.downloadUrl,n.K6U)}}function H8(i,t){1&i&&(n.I0R(0,"div",43)(1,"div",66)(2,"span",67),n.OEk(3,"Loading..."),n.C$Y()()())}let V8=(()=>{class i{constructor(e){this.api=e,this.dateChangeSubject=new w.E,this.logsData=[],this.selectedDate=new Date,this.formattedDate="",this.spinnerStatus=!1,this.fileType="admin",this.logsFile="admin",this.direction="asc",this.bsConfig={maxDate:new Date,showWeekNumbers:!1,dateInputFormat:"DD/MM/YYYY"}}ngOnInit(){this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.dateChangeSubject.pipe((0,C.o)(300)).subscribe(e=>{this.handleDateChange(e)}),this.getLogs()}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getLogs()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}onDateChange(e){this.dateChangeSubject.next(e)}getLogs(){this.api.getwithoutid(`logs?date=${this.formattedDate}`).subscribe(e=>{this.logsAdminData=e.find(r=>"admin"===r.logType),this.logsFrontData=e.find(r=>"frontend"===r.logType),this.updateTableData()},e=>{console.error("Error fetching logs",e)})}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.logsData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.logsData=r}compare(e,r){return e<r?-1:e>r?1:0}setLogFile(e){this.fileType=e,this.updateTableData()}updateTableData(){"admin"===this.fileType?(this.logsData=this.logsAdminData?.logs||[],this.logDataList=this.logsAdminData?.logs||[]):"frontend"===this.fileType&&(this.logsData=this.logsFrontData?.logs||[],this.logDataList=this.logsFrontData?.logs||[])}filterdata(){this.logsData=this.term?this.logDataList.filter(e=>e.filename.toLowerCase().includes(this.term.toLowerCase())||e.createdAt.toLowerCase().includes(this.term.toLowerCase())):this.logDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.logsData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.logsData=this.logDataList.slice(r,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-logs"]],decls:111,vars:21,consts:[["title","Logs List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"col-lg-3","ng-star-inserted",3,"click"],[1,"card","border","shadow-none"],[1,"card-body","cursor-pointer",3,"ngClass"],[1,"d-flex","gap-3","mb-4"],[1,"avatar-xs"],[1,"avatar-title","bg-transparent","rounded","text-primary","fs-3"],[1,"bi","bi-folder2-open"],["dropdown","",1,"flex-shrink-0","dropdown"],["dropdowntoggle","","href","javascript:void(0);","aria-haspopup","true","aria-expanded","false",1,"text-reset","d-inline-block"],[1,"bi","bi-three-dots-vertical"],["href","javascript:void(0);"],[1,"fs-md","text-truncate"],[1,"list-unstyled","hstack","gap-2","text-muted","mb-0"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"bi","bi-file-earmark-text"],[1,"price"],[1,"orders"],["target","_blank",1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"href"],[1,"ph-eye","fs-5","fs-3"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){1&r&&(n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Logs "),n.I0R(9,"span",8),n.OEk(10),n.C$Y()(),n.I0R(11,"p",9),n.OEk(12," Showing Result of Date: "),n.I0R(13,"span",10),n.OEk(14),n.wVc(15,"date"),n.C$Y()()(),n.I0R(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"input",15),n.iHE("ngModelChange",function(f){return n.kNx(s.selectedDate,f)||(s.selectedDate=f),f}),n.qCj("bsValueChange",function(f){return s.onDateChange(f)}),n.C$Y(),n.I0R(21,"div",16)(22,"label",17),n.wR5(23,"i",18),n.C$Y()()()(),n.I0R(24,"div",19)(25,"input",20),n.iHE("ngModelChange",function(f){return n.kNx(s.term,f)||(s.term=f),f}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(26,"i",21),n.C$Y()()()(),n.I0R(27,"div",22)(28,"div",2)(29,"div",23),n.qCj("click",function(){return s.setLogFile("admin")}),n.I0R(30,"div",24)(31,"div",25)(32,"div",26)(33,"div",6)(34,"div",27)(35,"div",28),n.wR5(36,"i",29),n.C$Y()()(),n.I0R(37,"div",30)(38,"a",31),n.wR5(39,"i",32),n.C$Y()()(),n.I0R(40,"a",33)(41,"h6",34),n.OEk(42,"Dashboard Api"),n.C$Y()(),n.I0R(43,"ul",35)(44,"li")(45,"b"),n.OEk(46),n.C$Y()(),n.I0R(47,"li")(48,"b"),n.OEk(49),n.C$Y()()()()()(),n.I0R(50,"div",23),n.qCj("click",function(){return s.setLogFile("frontend")}),n.I0R(51,"div",24)(52,"div",25)(53,"div",26)(54,"div",6)(55,"div",27)(56,"div",28),n.wR5(57,"i",29),n.C$Y()()(),n.I0R(58,"div",30)(59,"a",31),n.wR5(60,"i",32),n.C$Y()()(),n.I0R(61,"a",33)(62,"h6",34),n.OEk(63,"Frontend Api"),n.C$Y()(),n.I0R(64,"ul",35)(65,"li")(66,"b"),n.OEk(67),n.C$Y()(),n.I0R(68,"li")(69,"b"),n.OEk(70),n.C$Y()()()()()()(),n.I0R(71,"div",36)(72,"table",37)(73,"thead",38)(74,"tr")(75,"th")(76,"div",39),n.wR5(77,"label",40),n.C$Y()(),n.I0R(78,"th",41),n.qCj("click",function(){return s.onSort("filename")}),n.OEk(79," File Name "),n.C$Y(),n.I0R(80,"th",41),n.qCj("click",function(){return s.onSort("size")}),n.OEk(81," Size "),n.C$Y(),n.I0R(82,"th",41),n.qCj("click",function(){return s.onSort("createdAt")}),n.OEk(83," Created At "),n.C$Y(),n.I0R(84,"th"),n.OEk(85,"Action"),n.C$Y()()(),n.I0R(86,"tbody",42),n.c53(87,G8,16,8,"tr",57,n.wJt),n.C$Y(),n.yuY(89,H8,4,0,"div",43),n.C$Y()(),n.I0R(90,"div",44)(91,"div",45)(92,"div",46)(93,"div",47),n.wR5(94,"i",48),n.C$Y()(),n.I0R(95,"h5",49),n.OEk(96,"Sorry! No Result Found"),n.C$Y(),n.I0R(97,"p",50),n.OEk(98),n.C$Y()()(),n.I0R(99,"div",51)(100,"div",52)(101,"div",53),n.OEk(102," Showing "),n.I0R(103,"span",54),n.OEk(104),n.C$Y(),n.OEk(105," of "),n.I0R(106,"span",54),n.OEk(107),n.C$Y(),n.OEk(108," Results "),n.C$Y()(),n.I0R(109,"div",55)(110,"pagination",56),n.qCj("pageChanged",function(f){return s.pageChanged(f)}),n.C$Y()()()()()()()()),2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(10),n.oRS(" ",s.logsData.length," "),n.yG2(4),n.oRS(" ",n.g7$(15,18,s.formattedDate,"EEEE, dd MMM , yyyy"),""),n.yG2(6),n.E7m("bsConfig",s.bsConfig),n.OKB("ngModel",s.selectedDate),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(6),n.E7m("ngClass","admin"===s.fileType?"card-bg-sel":""),n.yG2(15),n.oRS("",null==s.logsAdminData?null:s.logsAdminData.totalFiles," Files"),n.yG2(3),n.cNF(null==s.logsAdminData?null:s.logsAdminData.totalFileSize),n.yG2(3),n.E7m("ngClass","frontend"===s.fileType?"card-bg-sel":""),n.yG2(15),n.oRS("",null==s.logsFrontData?null:s.logsFrontData.totalFiles," Files"),n.yG2(3),n.cNF(null==s.logsFrontData?null:s.logsFrontData.totalFileSize),n.yG2(17),n.oho(s.logsData),n.yG2(2),n.C0Y(89,s.spinnerStatus?89:-1),n.yG2(9),n.oRS(" We've searched ",null==s.logDataList?null:s.logDataList.length," Log . We did not find any Log for you search. "),n.yG2(6),n.cNF(s.logsData.length),n.yG2(3),n.cNF(null==s.logDataList?null:s.logDataList.length),n.yG2(3),n.E7m("totalItems",null==s.logDataList?null:s.logDataList.length)("itemsPerPage",10))},dependencies:[Re.QF,$e.O,Zn.mY,j.ot,j.ue,j._G,it.im,M.em,M.U5,Re.y],styles:[".card-bg-sel[_ngcontent-%COMP%]{background-color:#dde1ef}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();function U8(i,t){if(1&i&&(n.I0R(0,"div",54),n.wR5(1,"img",55),n.C$Y()),2&i){const e=n.GaO().$implicit;n.yG2(),n._6D("src",e.image,n.K6U)}}function j8(i,t){1&i&&(n.I0R(0,"div",54),n.wR5(1,"img",56),n.C$Y())}function W8(i,t){if(1&i&&(n.OEk(0),n.wVc(1,"date"),n.I0R(2,"span",57),n.OEk(3),n.C$Y()),2&i){const e=n.GaO().$implicit;n.oRS(" ",n.g7$(1,2,e.recent_leaveDate,"dd MMM, YYYY")," "),n.yG2(3),n.oRS("(",e.recent_leave,") ")}}function $8(i,t){1&i&&n.OEk(0," - ")}function X8(i,t){if(1&i&&(n.OEk(0),n.wVc(1,"date"),n.I0R(2,"span",57),n.OEk(3),n.C$Y()),2&i){const e=n.GaO().$implicit;n.oRS(" ",n.g7$(1,2,e.upcoming_leaveDate,"dd MMM, YYYY")," "),n.yG2(3),n.oRS("(",e.upcoming_leave,") ")}}function Z8(i,t){1&i&&n.OEk(0," - ")}function q8(i,t){if(1&i&&(n.I0R(0,"tr",42)(1,"td",43)(2,"a",44),n.OEk(3,"#TB01"),n.C$Y()(),n.I0R(4,"td",45)(5,"div",46),n.yuY(6,U8,2,1,"div",47)(7,j8,2,0),n.I0R(8,"div")(9,"h6",48)(10,"a",49),n.OEk(11),n.C$Y()(),n.I0R(12,"p",28),n.OEk(13),n.C$Y()()()(),n.I0R(14,"td",45),n.yuY(15,W8,4,5,"span",50)(16,$8,1,0),n.C$Y(),n.I0R(17,"td",45),n.yuY(18,X8,4,5,"span",50)(19,Z8,1,0),n.C$Y(),n.I0R(20,"td",45),n.OEk(21),n.C$Y(),n.I0R(22,"td")(23,"ul",51)(24,"li")(25,"a",52),n.wR5(26,"i",53),n.C$Y()()()()()),2&i){const e=t.$implicit;n.CI5("id","p_",e._id,""),n.yG2(6),n.C0Y(6,e.image?6:7),n.yG2(5),n.cNF(e.name),n.yG2(2),n.cNF(e.designation),n.yG2(2),n.C0Y(15,e.recent_leaveDate?15:16),n.yG2(3),n.C0Y(18,e.upcoming_leaveDate?18:19),n.yG2(3),n.oRS(" ",e.total_leave_taken," "),n.yG2(4),n.CI5("routerLink","/employe-leave-record/",e.id,"")}}function K8(i,t){1&i&&(n.I0R(0,"div",21)(1,"div",58)(2,"span",59),n.OEk(3,"Loading..."),n.C$Y()()())}function J8(i,t){if(1&i&&(n.I0R(0,"option",40),n.OEk(1),n.C$Y()),2&i){const e=t.$implicit;n.E7m("value",e),n.yG2(),n.oRS(" ",e," ")}}let Q8=(()=>{class i{constructor(e){this.api=e,this.leaveRecordData=[],this.leaveRecordDataList=[],this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Leave Record",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getLeaveRecord()}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getLeaveRecord(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveRecord?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveRecordData=r.data||[],this.leaveRecordDataList=r.data||[],this.pageChanged({page:1,itemsPerPage:this.currentItemsPerPage})):(this.leaveRecordData=[],this.leaveRecordDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.leaveRecordData];r.sort((s,o)=>{const f=this.compare(s[e],o[e]);return"asc"===this.direction?f:-f}),this.leaveRecordData=r}compare(e,r){return e<r?-1:e>r?1:0}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.leaveRecordData=this.leaveRecordDataList.slice(r,this.endItem)}filterdata(){this.leaveRecordData=this.term?this.leaveRecordDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.leaveRecordDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.leaveRecordData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onItemsPerPageChange(e){this.currentItemsPerPage=+e.target.value,this.pageChanged({page:1,itemsPerPage:this.currentItemsPerPage})}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-leave-record"]],decls:66,vars:12,consts:[["title","Leave Record List",3,"breadcrumbItems"],["id","leave-record"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0","d-md-flex"],[1,"d-flex","me-3","mt-1","mb-3","justify-content-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],["class","avatar-sm bg-light rounded p-1 me-2"],[1,"mb-0"],[1,"text-reset","products"],["class","fw-bold"],[1,"d-flex","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"routerLink"],[1,"ph-eye"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"fw-bold"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,s){1&r&&(n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),n.OEk(8," Leave Record "),n.I0R(9,"span",8),n.OEk(10),n.C$Y()()(),n.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),n.iHE("ngModelChange",function(f){return n.kNx(s.term,f)||(s.term=f),f}),n.qCj("keyup",function(){return s.filterdata()}),n.C$Y(),n.wR5(16,"i",14),n.C$Y()()()()(),n.I0R(17,"div",15)(18,"div",16)(19,"table",17)(20,"thead",18)(21,"tr")(22,"th",19),n.qCj("click",function(){return s.onSort("name")}),n.OEk(23," Name "),n.C$Y(),n.I0R(24,"th",19),n.qCj("click",function(){return s.onSort("recent_leave")}),n.OEk(25," Recent Leave "),n.C$Y(),n.I0R(26,"th",19),n.qCj("click",function(){return s.onSort("upcoming_leave")}),n.OEk(27," Upcoming Leave "),n.C$Y(),n.I0R(28,"th",19),n.qCj("click",function(){return s.onSort("total_leave_taken")}),n.OEk(29," Total Leave Taken "),n.C$Y(),n.I0R(30,"th"),n.OEk(31,"Action"),n.C$Y()()(),n.I0R(32,"tbody",20),n.c53(33,q8,27,8,"tr",42,n.wJt),n.C$Y(),n.yuY(35,K8,4,0,"div",21),n.C$Y()(),n.I0R(36,"div",22)(37,"div",23)(38,"div",24)(39,"div",25),n.wR5(40,"i",26),n.C$Y()(),n.I0R(41,"h5",27),n.OEk(42,"Sorry! No Result Found"),n.C$Y(),n.I0R(43,"p",28),n.OEk(44),n.C$Y()()(),n.I0R(45,"div",29)(46,"div",30)(47,"div",31),n.OEk(48," Showing "),n.I0R(49,"span",32),n.OEk(50),n.C$Y(),n.OEk(51," of "),n.I0R(52,"span",32),n.OEk(53),n.C$Y(),n.OEk(54," Results "),n.C$Y()(),n.I0R(55,"div",33)(56,"div",34)(57,"div",35),n.OEk(58," Items per page : "),n.C$Y(),n.I0R(59,"div",36)(60,"div",37)(61,"select",38),n.iHE("ngModelChange",function(f){return n.kNx(s.currentItemsPerPage,f)||(s.currentItemsPerPage=f),f}),n.qCj("change",function(f){return s.onItemsPerPageChange(f)}),n.yuY(62,J8,2,2,"option",39),n.I0R(63,"option",40),n.OEk(64," Show All "),n.C$Y()()()()(),n.I0R(65,"pagination",41),n.qCj("pageChanged",function(f){return s.pageChanged(f)}),n.C$Y()()()()()()()()),2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(10),n.cNF(null==s.leaveRecordData?null:s.leaveRecordData.length),n.yG2(5),n.OKB("ngModel",s.term),n.yG2(18),n.oho(s.leaveRecordData),n.yG2(2),n.C0Y(35,s.spinnerStatus?35:-1),n.yG2(9),n.oRS(" We've searched ",s.leaveRecordDataList.length," Leave Record We did not find any Leave Record for you search. "),n.yG2(6),n.cNF(null==s.leaveRecordData?null:s.leaveRecordData.length),n.yG2(3),n.cNF(null==s.leaveRecordDataList?null:s.leaveRecordDataList.length),n.yG2(8),n.OKB("ngModel",s.currentItemsPerPage),n.yG2(),n.E7m("ngForOf",s.itemsPerPageOptions),n.yG2(),n.E7m("value",null==s.leaveRecordDataList?null:s.leaveRecordDataList.length),n.yG2(2),n.E7m("totalItems",null==s.leaveRecordDataList?null:s.leaveRecordDataList.length)("itemsPerPage",10))},dependencies:[Re.ay,$e.O,D.ER,j.wd,j.GO,j.ot,j.GC,j.ue,j._G,it.im,Re.y]})}return i})();function eY(i,t){if(1&i&&n.wR5(0,"img",64),2&i){const e=n.GaO();n._6D("src",e.empLeaveRecordData.image,n.K6U)}}function tY(i,t){1&i&&n.wR5(0,"img",65)}function iY(i,t){if(1&i&&(n.I0R(0,"tr",66)(1,"td"),n.OEk(2),n.C$Y(),n.I0R(3,"td")(4,"span",67),n.OEk(5),n.C$Y()(),n.I0R(6,"td"),n.OEk(7),n.C$Y(),n.I0R(8,"td",68)(9,"span",69),n.OEk(10),n.C$Y()()()),2&i){const e=t.$implicit;n.yG2(2),n.oRS(" ",e.name," "),n.yG2(3),n.cNF(e.no_of_days_taken),n.yG2(2),n.oRS(" ",e.remaining_leave," "),n.yG2(3),n.cNF(e.total_leave_days)}}const nY=[{path:"company",component:Xt},{path:"add-company",component:Cs},{path:"edit-company/:id",component:Cs},{path:"logs",component:V8},{path:"employee",component:Vs},{path:"add-employee",component:p},{path:"edit-employee/:id",component:p},{path:"employee-detail/:id",component:ls},{path:"attendance-list",component:Ff},{path:"department-list",component:No},{path:"designation-list",component:bd},{path:"attendance-calender/:id/:company_id",component:MM},{path:"attendance-monthly",component:Z6},{path:"holidays",component:o8},{path:"leave-types",component:w8},{path:"leave-requests",component:L8},{path:"leave-detail/:id/:emp_id",component:Y8},{path:"leave-record",component:Q8},{path:"employe-leave-record/:emp_id",component:(()=>{class i{constructor(e,r){this.api=e,this.route=r,this.currentTab="personalDetails",this.leaveTypesData=[],this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Employee Leave Detail",active:!0}];const e=localStorage.getItem("currentUser");if(this.id=this.route.snapshot.paramMap.get("emp_id"),e){const r=JSON.parse(e);this.company_id=r.id}this.id&&(this.getEmpRecord(),this.getemployeeData()),this.id&&this.company_id&&this.leaveDetail()}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getEmpRecord(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveRecord?emp_id=${this.id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.empLeaveRecordData=r.data[0]||[]):(this.empLeaveRecordData=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.id).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0]):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}leaveDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveDetail?company_id=${this.company_id}&emp_id=${this.id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveTypesData=r.data,console.log(this.leaveTypesData)):this.handleError("Unexpected response format")},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}changeTab(e){this.currentTab=e}getTotal(e){return this.leaveTypesData.reduce((r,s)=>r+Number(s[e]),0)}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(He.W),n.GI1(D.gV))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["app-emp-leave"]],decls:216,vars:28,consts:[["title","Leave Record",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-3"],[1,"card"],[1,"card-body"],[1,"text-center","border-bottom","border-dashed","pb-4"],["alt","","class","avatar-lg rounded-circle p-1 img-thumbnail",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"border-bottom","border-dashed","py-4"],[1,"card-title","mb-3"],[1,"table-responsive"],[1,"table","table-borderless","table-sm","align-middle","mb-0"],["scope","row",1,"ps-0"],[1,"text-muted","text-end"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-secondary",3,"routerLink"],[1,"bi","bi-pencil-square","align-baseline","me-1"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-header"],[1,"card-title","mb-0"],[1,"table","align-middle","table-nowrap","table-borderless","mb-0"],[1,"table-active"],[1,"text-end"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],["id","changePassword","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","education","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","securityPrivacy","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"mb-4","pb-2"],[1,"d-flex","flex-column","flex-sm-row","mb-4","mb-sm-0"],[1,"flex-grow-1"],[1,"fs-md","mb-1"],[1,"flex-shrink-0","ms-sm-3"],["href","javascript:void(0);",1,"btn","btn-sm","btn-primary"],[1,"d-flex","flex-column","flex-sm-row","mb-4","mb-sm-0","mt-2"],[1,"text-muted","mb-sm-0"],[1,"mb-3"],[1,"card-title","text-decoration-underline","mb-3"],[1,"list-unstyled","mb-0"],[1,"d-flex"],["for","directMessage",1,"form-check-label","fs-md"],[1,"flex-shrink-0"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","directMessage","checked","",1,"form-check-input"],[1,"d-flex","mt-2"],["for","desktopNotification",1,"form-check-label","fs-md","mb-1"],["type","checkbox","role","switch","id","desktopNotification","checked","",1,"form-check-input"],["for","emailNotification",1,"form-check-label","fs-md","mb-1"],["type","checkbox","role","switch","id","emailNotification",1,"form-check-input"],["for","chatNotification",1,"form-check-label","fs-md","mb-1"],["type","checkbox","role","switch","id","chatNotification",1,"form-check-input"],["for","purchaesNotification",1,"form-check-label","fs-md","mb-1"],["type","checkbox","role","switch","id","purchaesNotification",1,"form-check-input"],["type","password","id","passwordInput","placeholder","Enter your password","value","richard@321654987",1,"form-control",2,"max-width","265px"],[1,"hstack","gap-2","mt-3"],["href","javascript:void(0);",1,"btn","btn-subtle-danger"],["href","javascript:void(0);",1,"btn","btn-light"],["alt","",1,"avatar-lg","rounded-circle","p-1","img-thumbnail",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"product"],[1,"product-price"],[1,"fw-medium","text-end"],[1,"product-line-price"],["class","product"]],template:function(r,s){1&r&&(n.wR5(0,"app-breadcrumbs",0),n.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),n.yuY(6,eY,1,1,"img",6)(7,tY,1,0),n.I0R(8,"div",7)(9,"h5"),n.OEk(10),n.C$Y(),n.I0R(11,"p",8),n.OEk(12),n.C$Y()()(),n.I0R(13,"div",9)(14,"h5",10),n.OEk(15,"Information"),n.C$Y(),n.I0R(16,"div",11)(17,"table",12)(18,"tbody")(19,"tr")(20,"th",13),n.OEk(21,"Designation"),n.C$Y(),n.I0R(22,"td",14),n.OEk(23),n.C$Y()(),n.I0R(24,"tr")(25,"th",13),n.OEk(26,"Department"),n.C$Y(),n.I0R(27,"td",14),n.OEk(28),n.C$Y()(),n.I0R(29,"tr")(30,"th",13),n.OEk(31,"Phone No"),n.C$Y(),n.I0R(32,"td",14),n.OEk(33),n.C$Y()(),n.I0R(34,"tr")(35,"th",13),n.OEk(36,"Gender"),n.C$Y(),n.I0R(37,"td",14),n.OEk(38),n.C$Y()(),n.I0R(39,"tr")(40,"th",13),n.OEk(41,"Birth of Date"),n.C$Y(),n.I0R(42,"td",14),n.OEk(43),n.wVc(44,"date"),n.C$Y()(),n.I0R(45,"tr")(46,"th",13),n.OEk(47,"Email"),n.C$Y(),n.I0R(48,"td",14),n.OEk(49),n.C$Y()(),n.I0R(50,"tr")(51,"th",13),n.OEk(52,"Address"),n.C$Y(),n.I0R(53,"td",14),n.OEk(54),n.C$Y()(),n.I0R(55,"tr")(56,"th",13),n.OEk(57,"Joining Date"),n.C$Y(),n.I0R(58,"td",14),n.OEk(59),n.wVc(60,"date"),n.C$Y()()()()()()()()(),n.I0R(61,"div",15)(62,"div",16)(63,"ul",17)(64,"li",18)(65,"a",19),n.qCj("click",function(){return s.changeTab("personalDetails")}),n.OEk(66," Leave Details "),n.C$Y()()(),n.I0R(67,"div",20)(68,"a",21),n.wR5(69,"i",22),n.OEk(70," Edit Profile"),n.C$Y()()(),n.I0R(71,"div",3)(72,"div",23)(73,"div",24)(74,"div",3)(75,"div",25)(76,"h6",26),n.OEk(77,"Leave Type Detail"),n.C$Y()(),n.I0R(78,"div",4)(79,"div",11)(80,"table",27)(81,"thead",28)(82,"tr")(83,"th"),n.OEk(84,"Leave Type Name"),n.C$Y(),n.I0R(85,"th"),n.OEk(86,"No. Of Taken Leaves"),n.C$Y(),n.I0R(87,"th"),n.OEk(88,"Remaining Leaves"),n.C$Y(),n.I0R(89,"th",29),n.OEk(90,"Total Leaves"),n.C$Y()()(),n.I0R(91,"tbody"),n.c53(92,iY,11,4,"tr",70,n.wJt),n.C$Y()(),n.I0R(94,"div",30)(95,"table",31)(96,"tbody")(97,"tr")(98,"td"),n.OEk(99,"Total Leaves Taken"),n.C$Y(),n.I0R(100,"td",29),n.OEk(101),n.C$Y()(),n.I0R(102,"tr")(103,"td"),n.OEk(104,"Total Remaining Leaves"),n.C$Y(),n.I0R(105,"td",29),n.OEk(106),n.C$Y()(),n.I0R(107,"tr")(108,"td"),n.OEk(109,"Total Leaves"),n.C$Y(),n.I0R(110,"td",29),n.OEk(111),n.C$Y()()()()()()()()(),n.I0R(112,"div",32)(113,"div",25)(114,"h6",26),n.OEk(115,"Changes Password"),n.C$Y()(),n.wR5(116,"div",4),n.C$Y(),n.I0R(117,"div",33)(118,"div",25)(119,"h6",26),n.OEk(120,"Education"),n.C$Y()(),n.wR5(121,"div",4),n.C$Y(),n.I0R(122,"div",34)(123,"div",25)(124,"h6",26),n.OEk(125,"Security & Privacy"),n.C$Y()(),n.I0R(126,"div",4)(127,"div",35)(128,"div",36)(129,"div",37)(130,"h6",38),n.OEk(131,"Two-factor Authentication"),n.C$Y(),n.I0R(132,"p",8),n.OEk(133," Two-factor authentication is an enhanced security. Once enabled, you'll be required to give two types of identification when you log into Google Authentication and SMS are Supported. "),n.C$Y()(),n.I0R(134,"div",39)(135,"a",40),n.OEk(136,"Enable Two-factor Authentication"),n.C$Y()()(),n.I0R(137,"div",41)(138,"div",37)(139,"h6",38),n.OEk(140,"Secondary Verification"),n.C$Y(),n.I0R(141,"p",8),n.OEk(142," The first factor is a password and the second commonly includes a text with a code sent to your smartphone, or biometrics using your fingerprint, face, or retina. "),n.C$Y()(),n.I0R(143,"div",39)(144,"a",40),n.OEk(145,"Set up secondary method"),n.C$Y()()(),n.I0R(146,"div",41)(147,"div",37)(148,"h6",38),n.OEk(149,"Backup Codes"),n.C$Y(),n.I0R(150,"p",42),n.OEk(151," A backup code is automatically generated for you when you turn on two-factor authentication through your iOS or Android Twitter app. You can also generate a backup code on twitter.com. "),n.C$Y()(),n.I0R(152,"div",39)(153,"a",40),n.OEk(154,"Generate backup codes"),n.C$Y()()()(),n.I0R(155,"div",43)(156,"h5",44),n.OEk(157," Application Notifications: "),n.C$Y(),n.I0R(158,"ul",45)(159,"li",46)(160,"div",37)(161,"label",47),n.OEk(162,"Direct messages"),n.C$Y(),n.I0R(163,"p",8),n.OEk(164,"Messages from people you follow"),n.C$Y()(),n.I0R(165,"div",48)(166,"div",49),n.wR5(167,"input",50),n.C$Y()()(),n.I0R(168,"li",51)(169,"div",37)(170,"label",52),n.OEk(171," Show desktop notifications "),n.C$Y(),n.I0R(172,"p",8),n.OEk(173,' Choose the option you want as your default setting. Block a site: Next to "Not allowed to send notifications," click Add. '),n.C$Y()(),n.I0R(174,"div",48)(175,"div",49),n.wR5(176,"input",53),n.C$Y()()(),n.I0R(177,"li",51)(178,"div",37)(179,"label",54),n.OEk(180," Show email notifications "),n.C$Y(),n.I0R(181,"p",8),n.OEk(182," Under Settings, choose Notifications. Under Select an account, choose the account to enable notifications for. "),n.C$Y()(),n.I0R(183,"div",48)(184,"div",49),n.wR5(185,"input",55),n.C$Y()()(),n.I0R(186,"li",51)(187,"div",37)(188,"label",56),n.OEk(189," Show chat notifications "),n.C$Y(),n.I0R(190,"p",8),n.OEk(191," To prevent duplicate mobile notifications from the Gmail and Chat apps, in settings, turn off Chat notifications. "),n.C$Y()(),n.I0R(192,"div",48)(193,"div",49),n.wR5(194,"input",57),n.C$Y()()(),n.I0R(195,"li",51)(196,"div",37)(197,"label",58),n.OEk(198," Show purchase notifications "),n.C$Y(),n.I0R(199,"p",8),n.OEk(200," Get real-time purchase alerts to protect yourself from fraudulent charges. "),n.C$Y()(),n.I0R(201,"div",48)(202,"div",49),n.wR5(203,"input",59),n.C$Y()()()()(),n.I0R(204,"div")(205,"h5",44),n.OEk(206," Delete This Account: "),n.C$Y(),n.I0R(207,"p",8),n.OEk(208,' Go to the Data & Privacy section of your profile Account. Scroll to "Your data & privacy options." Delete your Profile Account. Follow the instructions to delete your account : '),n.C$Y(),n.I0R(209,"div"),n.wR5(210,"input",60),n.C$Y(),n.I0R(211,"div",61)(212,"a",62),n.OEk(213,"Close & Delete This Account"),n.C$Y(),n.I0R(214,"a",63),n.OEk(215,"Cancel"),n.C$Y()()()()()()()()()),2&r&&(n.E7m("breadcrumbItems",s.breadCrumbItems),n.yG2(6),n.C0Y(6,null!=s.empLeaveRecordData&&s.empLeaveRecordData.image?6:7),n.yG2(4),n.oRS(" ",null==s.empLeaveRecordData?null:s.empLeaveRecordData.name," "),n.yG2(2),n.cNF(null==s.empLeaveRecordData?null:s.empLeaveRecordData.designation),n.yG2(11),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.designation_name," "),n.yG2(5),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.department_name," "),n.yG2(5),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.mobile," "),n.yG2(5),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.gender," "),n.yG2(5),n.oRS(" ",n.g7$(44,22,null==s.employeeDetail?null:s.employeeDetail.dob,"dd MMM, YYYY")," "),n.yG2(6),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.email," "),n.yG2(5),n.oRS(" ",null==s.employeeDetail?null:s.employeeDetail.address," "),n.yG2(5),n.oRS(" ",n.g7$(60,25,null==s.employeeDetail?null:s.employeeDetail.joining_date,"dd MMM, YYYY")," "),n.yG2(6),n.eAK("active","personalDetails"===s.currentTab),n.yG2(3),n.CI5("routerLink","/edit-employee/",s.id,""),n.yG2(5),n.E7m("hidden","personalDetails"!==s.currentTab),n.yG2(19),n.oho(s.leaveTypesData),n.yG2(9),n.oRS(" ",s.getTotal("no_of_days_taken")," "),n.yG2(5),n.oRS(" ",s.getTotal("remaining_leave")," "),n.yG2(5),n.oRS(" ",s.getTotal("total_leave_days")," "),n.yG2(),n.E7m("hidden","changePassword"!==s.currentTab),n.yG2(5),n.E7m("hidden","education"!==s.currentTab),n.yG2(5),n.E7m("hidden","securityPrivacy"!==s.currentTab))},dependencies:[$e.O,D.ER,Re.y]})}return i})()}];let rY=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({imports:[D.qQ.forChild(nY),D.qQ]})}return i})();var sY=Qt(1116),tA=Qt(2700);function sf(i){this.content=i}sf.prototype={constructor:sf,find:function(i){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===i)return t;return-1},get:function(i){var t=this.find(i);return-1==t?void 0:this.content[t+1]},update:function(i,t,e){var r=e&&e!=i?this.remove(e):this,s=r.find(i),o=r.content.slice();return-1==s?o.push(e||i,t):(o[s+1]=t,e&&(o[s]=e)),new sf(o)},remove:function(i){var t=this.find(i);if(-1==t)return this;var e=this.content.slice();return e.splice(t,2),new sf(e)},addToStart:function(i,t){return new sf([i,t].concat(this.remove(i).content))},addToEnd:function(i,t){var e=this.remove(i).content.slice();return e.push(i,t),new sf(e)},addBefore:function(i,t,e){var r=this.remove(t),s=r.content.slice(),o=r.find(i);return s.splice(-1==o?s.length:o,0,t,e),new sf(s)},forEach:function(i){for(var t=0;t<this.content.length;t+=2)i(this.content[t],this.content[t+1])},prepend:function(i){return(i=sf.from(i)).size?new sf(i.content.concat(this.subtract(i).content)):this},append:function(i){return(i=sf.from(i)).size?new sf(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var t=this;i=sf.from(i);for(var e=0;e<i.content.length;e+=2)t=t.remove(i.content[e]);return t},toObject:function(){var i={};return this.forEach(function(t,e){i[t]=e}),i},get size(){return this.content.length>>1}},sf.from=function(i){if(i instanceof sf)return i;var t=[];if(i)for(var e in i)t.push(e,i[e]);return new sf(t)};const iA=sf;function nA(i,t,e){for(let r=0;;r++){if(r==i.childCount||r==t.childCount)return i.childCount==t.childCount?null:e;let s=i.child(r),o=t.child(r);if(s!=o){if(!s.sameMarkup(o))return e;if(s.isText&&s.text!=o.text){for(let f=0;s.text[f]==o.text[f];f++)e++;return e}if(s.content.size||o.content.size){let f=nA(s.content,o.content,e+1);if(null!=f)return f}e+=s.nodeSize}else e+=s.nodeSize}}function rA(i,t,e,r){for(let s=i.childCount,o=t.childCount;;){if(0==s||0==o)return s==o?null:{a:e,b:r};let f=i.child(--s),g=t.child(--o),A=f.nodeSize;if(f!=g){if(!f.sameMarkup(g))return{a:e,b:r};if(f.isText&&f.text!=g.text){let P=0,z=Math.min(f.text.length,g.text.length);for(;P<z&&f.text[f.text.length-P-1]==g.text[g.text.length-P-1];)P++,e--,r--;return{a:e,b:r}}if(f.content.size||g.content.size){let P=rA(f.content,g.content,e-1,r-1);if(P)return P}e-=A,r-=A}else e-=A,r-=A}}class qr{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,e,r,s=0,o){for(let f=0,g=0;g<e;f++){let A=this.content[f],P=g+A.nodeSize;if(P>t&&!1!==r(A,s+g,o||null,f)&&A.content.size){let z=g+1;A.nodesBetween(Math.max(0,t-z),Math.min(A.content.size,e-z),r,s+z)}g=P}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,r,s){let o="",f=!0;return this.nodesBetween(t,e,(g,A)=>{g.isText?(o+=g.text.slice(Math.max(t,A)-A,e-A),f=!r):g.isLeaf?(s?o+="function"==typeof s?s(g):s:g.type.spec.leafText&&(o+=g.type.spec.leafText(g)),f=!r):!f&&g.isBlock&&(o+=r,f=!0)},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,r=t.firstChild,s=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(r)&&(s[s.length-1]=e.withText(e.text+r.text),o=1);o<t.content.length;o++)s.push(t.content[o]);return new qr(s,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let r=[],s=0;if(e>t)for(let o=0,f=0;f<e;o++){let g=this.content[o],A=f+g.nodeSize;A>t&&((f<t||A>e)&&(g=g.isText?g.cut(Math.max(0,t-f),Math.min(g.text.length,e-f)):g.cut(Math.max(0,t-f-1),Math.min(g.content.size,e-f-1))),r.push(g),s+=g.nodeSize),f=A}return new qr(r,s)}cutByIndex(t,e){return t==e?qr.empty:0==t&&e==this.content.length?this:new qr(this.content.slice(t,e))}replaceChild(t,e){let r=this.content[t];if(r==e)return this;let s=this.content.slice(),o=this.size+e.nodeSize-r.nodeSize;return s[t]=e,new qr(s,o)}addToStart(t){return new qr([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new qr(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,r=0;e<this.content.length;e++){let s=this.content[e];t(s,r,e),r+=s.nodeSize}}findDiffStart(t,e=0){return nA(this,t,e)}findDiffEnd(t,e=this.size,r=t.size){return rA(this,t,e,r)}findIndex(t,e=-1){if(0==t)return Nw(0,t);if(t==this.size)return Nw(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,s=0;;r++){let f=s+this.child(r).nodeSize;if(f>=t)return f==t||e>0?Nw(r+1,f):Nw(r,s);s=f}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return qr.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new qr(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return qr.empty;let e,r=0;for(let s=0;s<t.length;s++){let o=t[s];r+=o.nodeSize,s&&o.isText&&t[s-1].sameMarkup(o)?(e||(e=t.slice(0,s)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new qr(e||t,r)}static from(t){if(!t)return qr.empty;if(t instanceof qr)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new qr([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}qr.empty=new qr([],0);const R2={index:0,offset:0};function Nw(i,t){return R2.index=i,R2.offset=t,R2}function zw(i,t){if(i===t)return!0;if(!i||"object"!=typeof i||!t||"object"!=typeof t)return!1;let e=Array.isArray(i);if(Array.isArray(t)!=e)return!1;if(e){if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(!zw(i[r],t[r]))return!1}else{for(let r in i)if(!(r in t)||!zw(i[r],t[r]))return!1;for(let r in t)if(!(r in i))return!1}return!0}let jl=(()=>{class i{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,s=!1;for(let o=0;o<e.length;o++){let f=e[o];if(this.eq(f))return e;if(this.type.excludes(f.type))r||(r=e.slice(0,o));else{if(f.type.excludes(this.type))return e;!s&&f.type.rank>this.type.rank&&(r||(r=e.slice(0,o)),r.push(this),s=!0),r&&r.push(f)}}return r||(r=e.slice()),s||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&zw(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[r.type];if(!s)throw new RangeError(`There is no mark type ${r.type} in this schema`);return s.create(r.attrs)}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(r[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return i.none;if(e instanceof i)return[e];let r=e.slice();return r.sort((s,o)=>s.type.rank-o.type.rank),r}}return i.none=[],i})();class Yw extends Error{}class Ms{constructor(t,e,r){this.content=t,this.openStart=e,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let r=aA(this.content,t+this.openStart,e);return r&&new Ms(r,this.openStart,this.openEnd)}removeBetween(t,e){return new Ms(sA(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return Ms.empty;let r=e.openStart||0,s=e.openEnd||0;if("number"!=typeof r||"number"!=typeof s)throw new RangeError("Invalid input for Slice.fromJSON");return new Ms(qr.fromJSON(t,e.content),r,s)}static maxOpen(t,e=!0){let r=0,s=0;for(let o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)s++;return new Ms(t,r,s)}}function sA(i,t,e){let{index:r,offset:s}=i.findIndex(t),o=i.maybeChild(r),{index:f,offset:g}=i.findIndex(e);if(s==t||o.isText){if(g!=e&&!i.child(f).isText)throw new RangeError("Removing non-flat range");return i.cut(0,t).append(i.cut(e))}if(r!=f)throw new RangeError("Removing non-flat range");return i.replaceChild(r,o.copy(sA(o.content,t-s-1,e-s-1)))}function aA(i,t,e,r){let{index:s,offset:o}=i.findIndex(t),f=i.maybeChild(s);if(o==t||f.isText)return r&&!r.canReplace(s,s,e)?null:i.cut(0,t).append(e).append(i.cut(t));let g=aA(f.content,t-o-1,e);return g&&i.replaceChild(s,f.copy(g))}function aY(i,t,e){if(e.openStart>i.depth)throw new Yw("Inserted content deeper than insertion position");if(i.depth-e.openStart!=t.depth-e.openEnd)throw new Yw("Inconsistent open depths");return oA(i,t,e,0)}function oA(i,t,e,r){let s=i.index(r),o=i.node(r);if(s==t.index(r)&&r<i.depth-e.openStart){let f=oA(i,t,e,r+1);return o.copy(o.content.replaceChild(s,f))}if(e.content.size){if(e.openStart||e.openEnd||i.depth!=r||t.depth!=r){let{start:f,end:g}=function oY(i,t){let e=t.depth-i.openStart,s=t.node(e).copy(i.content);for(let o=e-1;o>=0;o--)s=t.node(o).copy(qr.from(s));return{start:s.resolveNoCache(i.openStart+e),end:s.resolveNoCache(s.content.size-i.openEnd-e)}}(e,i);return my(o,cA(i,f,g,t,r))}{let f=i.parent,g=f.content;return my(f,g.cut(0,i.parentOffset).append(e.content).append(g.cut(t.parentOffset)))}}return my(o,Gw(i,t,r))}function lA(i,t){if(!t.type.compatibleContent(i.type))throw new Yw("Cannot join "+t.type.name+" onto "+i.type.name)}function L2(i,t,e){let r=i.node(e);return lA(r,t.node(e)),r}function py(i,t){let e=t.length-1;e>=0&&i.isText&&i.sameMarkup(t[e])?t[e]=i.withText(t[e].text+i.text):t.push(i)}function gb(i,t,e,r){let s=(t||i).node(e),o=0,f=t?t.index(e):s.childCount;i&&(o=i.index(e),i.depth>e?o++:i.textOffset&&(py(i.nodeAfter,r),o++));for(let g=o;g<f;g++)py(s.child(g),r);t&&t.depth==e&&t.textOffset&&py(t.nodeBefore,r)}function my(i,t){return i.type.checkContent(t),i.copy(t)}function cA(i,t,e,r,s){let o=i.depth>s&&L2(i,t,s+1),f=r.depth>s&&L2(e,r,s+1),g=[];return gb(null,i,s,g),o&&f&&t.index(s)==e.index(s)?(lA(o,f),py(my(o,cA(i,t,e,r,s+1)),g)):(o&&py(my(o,Gw(i,t,s+1)),g),gb(t,e,s,g),f&&py(my(f,Gw(e,r,s+1)),g)),gb(r,null,s,g),new qr(g)}function Gw(i,t,e){let r=[];return gb(null,i,e,r),i.depth>e&&py(my(L2(i,t,e+1),Gw(i,t,e+1)),r),gb(t,null,e,r),new qr(r)}Ms.empty=new Ms(qr.empty,0,0);class vb{constructor(t,e,r){this.pos=t,this.path=e,this.parentOffset=r,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=t.child(e);return r?t.child(e).cut(r):s}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let r=this.path[3*e],s=0==e?0:this.path[3*e-1]+1;for(let o=0;o<t;o++)s+=r.child(o).nodeSize;return s}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return jl.none;if(this.textOffset)return t.child(e).marks;let r=t.maybeChild(e-1),s=t.maybeChild(e);if(!r){let g=r;r=s,s=g}let o=r.marks;for(var f=0;f<o.length;f++)!1===o[f].type.spec.inclusive&&(!s||!o[f].isInSet(s.marks))&&(o=o[f--].removeFromSet(o));return o}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let r=e.marks,s=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)!1===r[o].type.spec.inclusive&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!e||e(this.node(r))))return new Hw(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let r=[],s=0,o=e;for(let f=t;;){let{index:g,offset:A}=f.content.findIndex(o),P=o-A;if(r.push(f,g,s+A),!P||(f=f.child(g),f.isText))break;o=P-1,s+=A+1}return new vb(e,r,o)}static resolveCached(t,e){for(let s=0;s<P2.length;s++){let o=P2[s];if(o.pos==e&&o.doc==t)return o}let r=P2[F2]=vb.resolve(t,e);return F2=(F2+1)%lY,r}}let P2=[],F2=0,lY=12;class Hw{constructor(t,e,r){this.$from=t,this.$to=e,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const cY=Object.create(null);class pv{constructor(t,e,r,s=jl.none){this.type=t,this.attrs=e,this.marks=s,this.content=r||qr.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,r,s=0){this.content.nodesBetween(t,e,r,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,r,s){return this.content.textBetween(t,e,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,r){return this.type==t&&zw(this.attrs,e||t.defaultAttrs||cY)&&jl.sameSet(this.marks,r||jl.none)}copy(t=null){return t==this.content?this:new pv(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new pv(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,r=!1){if(t==e)return Ms.empty;let s=this.resolve(t),o=this.resolve(e),f=r?0:s.sharedDepth(e),g=s.start(f),P=s.node(f).content.cut(s.pos-g,o.pos-g);return new Ms(P,s.depth-f,o.depth-f)}replace(t,e,r){return aY(this.resolve(t),this.resolve(e),r)}nodeAt(t){for(let e=this;;){let{index:r,offset:s}=e.content.findIndex(t);if(e=e.maybeChild(r),!e)return null;if(s==t||e.isText)return e;t-=s+1}}childAfter(t){let{index:e,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:r}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(e),index:e,offset:r};let s=this.content.child(e-1);return{node:s,index:e-1,offset:r-s.nodeSize}}resolve(t){return vb.resolveCached(this,t)}resolveNoCache(t){return vb.resolve(this,t)}rangeHasMark(t,e,r){let s=!1;return e>t&&this.nodesBetween(t,e,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),uA(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,r=qr.empty,s=0,o=r.childCount){let f=this.contentMatchAt(t).matchFragment(r,s,o),g=f&&f.matchFragment(this.content,e);if(!g||!g.validEnd)return!1;for(let A=s;A<o;A++)if(!this.type.allowsMarks(r.child(A).marks))return!1;return!0}canReplaceWith(t,e,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(t).matchType(r),f=o&&o.matchFragment(this.content,e);return!!f&&f.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=jl.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!jl.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,r)}let s=qr.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,s,r)}}pv.prototype.text=void 0;class Vw extends pv{constructor(t,e,r,s){if(super(t,e,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):uA(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Vw(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Vw(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function uA(i,t){for(let e=i.length-1;e>=0;e--)t=i[e].type.name+"("+t+")";return t}class gy{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let r=new uY(t,e);if(null==r.next)return gy.empty;let s=hA(r);r.next&&r.err("Unexpected trailing text");let o=function vY(i){let t=Object.create(null);return function e(r){let s=[];r.forEach(f=>{i[f].forEach(({term:g,to:A})=>{if(!g)return;let P;for(let z=0;z<s.length;z++)s[z][0]==g&&(P=s[z][1]);pA(i,A).forEach(z=>{P||s.push([g,P=[]]),-1==P.indexOf(z)&&P.push(z)})})});let o=t[r.join(",")]=new gy(r.indexOf(i.length-1)>-1);for(let f=0;f<s.length;f++){let g=s[f][1].sort(fA);o.next.push({type:s[f][0],next:t[g.join(",")]||e(g)})}return o}(pA(i,0))}(function gY(i){let t=[[]];return s(function o(f,g){if("choice"==f.type)return f.exprs.reduce((A,P)=>A.concat(o(P,g)),[]);if("seq"!=f.type){if("star"==f.type){let A=e();return r(g,A),s(o(f.expr,A),A),[r(A)]}if("plus"==f.type){let A=e();return s(o(f.expr,g),A),s(o(f.expr,A),A),[r(A)]}if("opt"==f.type)return[r(g)].concat(o(f.expr,g));if("range"==f.type){let A=g;for(let P=0;P<f.min;P++){let z=e();s(o(f.expr,A),z),A=z}if(-1==f.max)s(o(f.expr,A),A);else for(let P=f.min;P<f.max;P++){let z=e();r(A,z),s(o(f.expr,A),z),A=z}return[r(A)]}if("name"==f.type)return[r(g,void 0,f.value)];throw new Error("Unknown expr type")}for(let A=0;;A++){let P=o(f.exprs[A],g);if(A==f.exprs.length-1)return P;s(P,g=e())}}(i,0),e()),t;function e(){return t.push([])-1}function r(f,g,A){let P={term:A,to:g};return t[f].push(P),P}function s(f,g){f.forEach(A=>A.to=g)}}(s));return function _Y(i,t){for(let e=0,r=[i];e<r.length;e++){let s=r[e],o=!s.validEnd,f=[];for(let g=0;g<s.next.length;g++){let{type:A,next:P}=s.next[g];f.push(A.name),o&&!(A.isText||A.hasRequiredAttrs())&&(o=!1),-1==r.indexOf(P)&&r.push(P)}o&&t.err("Only non-generatable nodes ("+f.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,r),o}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,r=t.childCount){let s=this;for(let o=e;s&&o<r;o++)s=s.matchType(t.child(o).type);return s}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let r=0;r<t.next.length;r++)if(this.next[e].type==t.next[r].type)return!0;return!1}fillBefore(t,e=!1,r=0){let s=[this];return function o(f,g){let A=f.matchFragment(t,r);if(A&&(!e||A.validEnd))return qr.from(g.map(P=>P.createAndFill()));for(let P=0;P<f.next.length;P++){let{type:z,next:ie}=f.next[P];if(!z.isText&&!z.hasRequiredAttrs()&&-1==s.indexOf(ie)){s.push(ie);let se=o(ie,g.concat(z));if(se)return se}}return null}(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(t)){let f=[];for(let g=s;g.type;g=g.via)f.push(g.type);return f.reverse()}for(let f=0;f<o.next.length;f++){let{type:g,next:A}=o.next[f];!g.isLeaf&&!g.hasRequiredAttrs()&&!(g.name in e)&&(!s.type||A.validEnd)&&(r.push({match:g.contentMatch,type:g,via:s}),e[g.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(r){t.push(r);for(let s=0;s<r.next.length;s++)-1==t.indexOf(r.next[s].next)&&e(r.next[s].next)}(this),t.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let f=0;f<r.next.length;f++)o+=(f?", ":"")+r.next[f].type.name+"->"+t.indexOf(r.next[f].next);return o}).join("\n")}}gy.empty=new gy(!0);class uY{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function hA(i){let t=[];do{t.push(hY(i))}while(i.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function hY(i){let t=[];do{t.push(dY(i))}while(i.next&&")"!=i.next&&"|"!=i.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function dY(i){let t=function mY(i){if(i.eat("(")){let t=hA(i);return i.eat(")")||i.err("Missing closing paren"),t}if(!/\W/.test(i.next)){let t=function pY(i,t){let e=i.nodeTypes,r=e[t];if(r)return[r];let s=[];for(let o in e){let f=e[o];f.groups.indexOf(t)>-1&&s.push(f)}return 0==s.length&&i.err("No node type or group '"+t+"' found"),s}(i,i.next).map(e=>(null==i.inline?i.inline=e.isInline:i.inline!=e.isInline&&i.err("Mixing inline and block content"),{type:"name",value:e}));return i.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}i.err("Unexpected token '"+i.next+"'")}(i);for(;;)if(i.eat("+"))t={type:"plus",expr:t};else if(i.eat("*"))t={type:"star",expr:t};else if(i.eat("?"))t={type:"opt",expr:t};else{if(!i.eat("{"))break;t=fY(i,t)}return t}function dA(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let t=Number(i.next);return i.pos++,t}function fY(i,t){let e=dA(i),r=e;return i.eat(",")&&(r="}"!=i.next?dA(i):-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:e,max:r,expr:t}}function fA(i,t){return t-i}function pA(i,t){let e=[];return function r(s){let o=i[s];if(1==o.length&&!o[0].term)return r(o[0].to);e.push(s);for(let f=0;f<o.length;f++){let{term:g,to:A}=o[f];!g&&-1==e.indexOf(A)&&r(A)}}(t),e.sort(fA)}function mA(i){let t=Object.create(null);for(let e in i){let r=i[e];if(!r.hasDefault)return null;t[e]=r.default}return t}function gA(i,t){let e=Object.create(null);for(let r in i){let s=t&&t[r];if(void 0===s){let o=i[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);s=o.default}e[r]=s}return e}function vA(i){let t=Object.create(null);if(i)for(let e in i)t[e]=new yY(i[e]);return t}class Uw{constructor(t,e,r){this.name=t,this.schema=e,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=vA(r.attrs),this.defaultAttrs=mA(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==gy.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:gA(this.attrs,t)}create(t=null,e,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pv(this,this.computeAttrs(t),qr.from(e),jl.setFrom(r))}createChecked(t=null,e,r){return e=qr.from(e),this.checkContent(e),new pv(this,this.computeAttrs(t),e,jl.setFrom(r))}createAndFill(t=null,e,r){if(t=this.computeAttrs(t),(e=qr.from(e)).size){let f=this.contentMatch.fillBefore(e);if(!f)return null;e=f.append(e)}let s=this.contentMatch.matchFragment(e),o=s&&s.fillBefore(qr.empty,!0);return o?new pv(this,t,e.append(o),jl.setFrom(r)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?e&&e.push(t[r]):e||(e=t.slice(0,r));return e?e.length?e:jl.none:t}static compile(t,e){let r=Object.create(null);t.forEach((o,f)=>r[o]=new Uw(o,e,f));let s=e.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class yY{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class jw{constructor(t,e,r,s){this.name=t,this.rank=e,this.schema=r,this.spec=s,this.attrs=vA(s.attrs),this.excluded=null;let o=mA(this.attrs);this.instance=o?new jl(this,o):null}create(t=null){return!t&&this.instance?this.instance:new jl(this,gA(this.attrs,t))}static compile(t,e){let r=Object.create(null),s=0;return t.forEach((o,f)=>r[o]=new jw(o,s++,e,f)),r}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}function _A(i,t){let e=[];for(let r=0;r<t.length;r++){let s=t[r],o=i.marks[s],f=o;if(o)e.push(o);else for(let g in i.marks){let A=i.marks[g];("_"==s||A.spec.group&&A.spec.group.split(" ").indexOf(s)>-1)&&e.push(f=A)}if(!f)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return e}const TA=Math.pow(2,16);function SY(i,t){return i+t*TA}function SA(i){return 65535&i}class z2{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Fp{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&Fp.empty)return Fp.empty}recover(t){let e=0,r=SA(t);if(!this.inverted)for(let s=0;s<r;s++)e+=this.ranges[3*s+2]-this.ranges[3*s+1];return this.ranges[3*r]+e+function AY(i){return(i-(65535&i))/TA}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let s=0,o=this.inverted?2:1,f=this.inverted?1:2;for(let g=0;g<this.ranges.length;g+=3){let A=this.ranges[g]-(this.inverted?s:0);if(A>t)break;let P=this.ranges[g+o],z=this.ranges[g+f],ie=A+P;if(t<=ie){let oe=A+s+((P?t==A?-1:t==ie?1:e:e)<0?0:z);if(r)return oe;let _e=t==(e<0?A:ie)?null:SY(g/3,t-A),he=t==A?2:t==ie?1:4;return(e<0?t!=A:t!=ie)&&(he|=8),new z2(oe,he,_e)}s+=z-P}return r?t+s:new z2(t+s,0,null)}touches(t,e){let r=0,s=SA(e),o=this.inverted?2:1,f=this.inverted?1:2;for(let g=0;g<this.ranges.length;g+=3){let A=this.ranges[g]-(this.inverted?r:0);if(A>t)break;let P=this.ranges[g+o];if(t<=A+P&&g==3*s)return!0;r+=this.ranges[g+f]-P}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let f=this.ranges[s],g=f-(this.inverted?o:0),A=f+(this.inverted?0:o),P=this.ranges[s+e],z=this.ranges[s+r];t(g,g+P,A,A+z),o+=z-P}}invert(){return new Fp(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?Fp.empty:new Fp(t<0?[0,-t,0]:[0,0,t])}}Fp.empty=new Fp([]);const Y2=Object.create(null);class af{getMap(){return Fp.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Y2[e.stepType];if(!r)throw new RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in Y2)throw new RangeError("Duplicate use of step JSON ID "+t);return Y2[t]=e,e.prototype.jsonID=t,e}}class uh{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new uh(t,null)}static fail(t){return new uh(null,t)}static fromReplace(t,e,r,s){try{return uh.ok(t.replace(e,r,s))}catch(o){if(o instanceof Yw)return uh.fail(o.message);throw o}}}function G2(i,t,e){let r=[];for(let s=0;s<i.childCount;s++){let o=i.child(s);o.content.size&&(o=o.copy(G2(o.content,t,o))),o.isInline&&(o=t(o,e,s)),r.push(o)}return qr.fromArray(r)}class h_ extends af{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new Ms(G2(e.content,(f,g)=>f.isAtom&&g.type.allowsMarkType(this.mark.type)?f.mark(this.mark.addToSet(f.marks)):f,s),e.openStart,e.openEnd);return uh.fromReplace(t,this.from,this.to,o)}invert(){return new e0(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new h_(e.pos,r.pos,this.mark)}merge(t){return t instanceof h_&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new h_(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new h_(e.from,e.to,t.markFromJSON(e.mark))}}af.jsonID("addMark",h_);class e0 extends af{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new Ms(G2(e.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),e.openStart,e.openEnd);return uh.fromReplace(t,this.from,this.to,r)}invert(){return new h_(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new e0(e.pos,r.pos,this.mark)}merge(t){return t instanceof e0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e0(e.from,e.to,t.markFromJSON(e.mark))}}af.jsonID("removeMark",e0);class d_ extends af{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return uh.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return uh.fromReplace(t,this.pos,this.pos+1,new Ms(qr.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(let s=0;s<e.marks.length;s++)if(!e.marks[s].isInSet(r))return new d_(this.pos,e.marks[s]);return new d_(this.pos,this.mark)}}return new P1(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new d_(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new d_(e.pos,t.markFromJSON(e.mark))}}af.jsonID("addNodeMark",d_);class P1 extends af{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return uh.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return uh.fromReplace(t,this.pos,this.pos+1,new Ms(qr.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new d_(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new P1(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new P1(e.pos,t.markFromJSON(e.mark))}}af.jsonID("removeNodeMark",P1);class of extends af{constructor(t,e,r,s=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=s}apply(t){return this.structure&&H2(t,this.from,this.to)?uh.fail("Structure replace would overwrite content"):uh.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Fp([this.from,this.to-this.from,this.slice.size])}invert(t){return new of(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new of(e.pos,Math.max(e.pos,r.pos),this.slice)}merge(t){if(!(t instanceof of)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?Ms.empty:new Ms(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new of(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?Ms.empty:new Ms(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new of(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new of(e.from,e.to,Ms.fromJSON(t,e.slice),!!e.structure)}}af.jsonID("replace",of);class lf extends af{constructor(t,e,r,s,o,f,g=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=f,this.structure=g}apply(t){if(this.structure&&(H2(t,this.from,this.gapFrom)||H2(t,this.gapTo,this.to)))return uh.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return uh.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?uh.fromReplace(t,this.from,this.to,r):uh.fail("Content does not fit in gap")}getMap(){return new Fp([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new lf(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||s<e.pos||o>r.pos?null:new lf(e.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new lf(e.from,e.to,e.gapFrom,e.gapTo,Ms.fromJSON(t,e.slice),e.insert,!!e.structure)}}function H2(i,t,e){let r=i.resolve(t),s=e-t,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let f=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!f||f.isLeaf)return!0;f=f.firstChild,s--}}return!1}function OY(i,t,e){return(0==t||i.canReplace(t,i.childCount))&&(e==i.childCount||i.canReplace(0,e))}function bb(i){let e=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let r=i.depth;;--r){let s=i.$from.node(r),o=i.$from.index(r),f=i.$to.indexAfter(r);if(r<i.depth&&s.canReplace(o,f,e))return r;if(0==r||s.type.spec.isolating||!OY(s,o,f))break}return null}function MA(i,t,e=null,r=i){let s=function LY(i,t){let{parent:e,startIndex:r,endIndex:s}=i,o=e.contentMatchAt(r).findWrapping(t);return o&&e.canReplaceWith(r,s,o.length?o[0]:t)?o:null}(i,t),o=s&&function PY(i,t){let{parent:e,startIndex:r,endIndex:s}=i,o=e.child(r),f=t.contentMatch.findWrapping(o.type);if(!f)return null;let A=(f.length?f[f.length-1]:t).contentMatch;for(let P=r;A&&P<s;P++)A=A.matchType(e.child(P).type);return A&&A.validEnd?f:null}(r,t);return o?s.map(OA).concat({type:t,attrs:e}).concat(o.map(OA)):null}function OA(i){return{type:i,attrs:null}}function wb(i,t,e=1,r){let s=i.resolve(t),o=s.depth-e,f=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!f.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let P=s.depth-1,z=e-2;P>o;P--,z--){let ie=s.node(P),se=s.index(P);if(ie.type.spec.isolating)return!1;let oe=ie.content.cutByIndex(se,ie.childCount),_e=r&&r[z+1];_e&&(oe=oe.replaceChild(0,_e.type.create(_e.attrs)));let he=r&&r[z]||ie;if(!ie.canReplace(se+1,ie.childCount)||!he.type.validContent(oe))return!1}let g=s.indexAfter(o),A=r&&r[0];return s.node(o).canReplaceWith(g,g,A?A.type:s.node(o+1).type)}function V2(i,t){let e=i.resolve(t),r=e.index();return function RA(i,t){return!(!i||!t||i.isLeaf||!i.canAppend(t))}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(r,r+1)}function U2(i,t,e=t,r=Ms.empty){if(t==e&&!r.size)return null;let s=i.resolve(t),o=i.resolve(e);return function LA(i,t,e){return!e.openStart&&!e.openEnd&&i.start()==t.start()&&i.parent.canReplace(i.index(),t.index(),e.content)}(s,o,r)?new of(t,e,r):new VY(s,o,r).fit()}af.jsonID("replaceAround",lf);class VY{constructor(t,e,r){this.$from=t,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=qr.empty;for(let s=0;s<=t.depth;s++){let o=t.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=qr.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let P=this.findFittable();P?this.placeNodes(P):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(t<0?this.$to:r.doc.resolve(t));if(!s)return null;let o=this.placed,f=r.depth,g=s.depth;for(;f&&g&&1==o.childCount;)o=o.firstChild.content,f--,g--;let A=new Ms(o,f,g);return t>-1?new lf(r.pos,t,this.$to.pos,this.$to.end(),A,e):A.size||r.pos!=this.$to.pos?new of(r.pos,s.pos,A):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<t;r++){let o=e.firstChild;if(e.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){t=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=1==e?t:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=j2(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let f=s.firstChild;for(let g=this.depth;g>=0;g--){let z,{type:A,match:P}=this.frontier[g],ie=null;if(1==e&&(f?P.matchType(f.type)||(ie=P.fillBefore(qr.from(f),!1)):o&&A.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:g,parent:o,inject:ie};if(2==e&&f&&(z=P.findWrapping(f.type)))return{sliceDepth:r,frontierDepth:g,parent:o,wrap:z};if(o&&P.matchType(o.type))break}}}openMore(){let{content:t,openStart:e,openEnd:r}=this.unplaced,s=j2(t,e);return!(!s.childCount||s.firstChild.isLeaf||(this.unplaced=new Ms(t,e+1,Math.max(r,s.size+e>=t.size-r?e+1:0)),0))}dropNode(){let{content:t,openStart:e,openEnd:r}=this.unplaced,s=j2(t,e);if(s.childCount<=1&&e>0){let o=t.size-e<=e+s.size;this.unplaced=new Ms(Cb(t,e-1,1),e-1,o?e-1:r)}else this.unplaced=new Ms(Cb(t,e,1),e,r)}placeNodes({sliceDepth:t,frontierDepth:e,parent:r,inject:s,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let he=0;he<o.length;he++)this.openFrontierNode(o[he]);let f=this.unplaced,g=r?r.content:f.content,A=f.openStart-t,P=0,z=[],{match:ie,type:se}=this.frontier[e];if(s){for(let he=0;he<s.childCount;he++)z.push(s.child(he));ie=ie.matchFragment(s)}let oe=g.size+t-(f.content.size-f.openEnd);for(;P<g.childCount;){let he=g.child(P),Ae=ie.matchType(he.type);if(!Ae)break;P++,(P>1||0==A||he.content.size)&&(ie=Ae,z.push(PA(he.mark(se.allowedMarks(he.marks)),1==P?A:0,P==g.childCount?oe:-1)))}let _e=P==g.childCount;_e||(oe=-1),this.placed=Eb(this.placed,e,qr.from(z)),this.frontier[e].match=ie,_e&&oe<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let he=0,Ae=g;he<oe;he++){let Ke=Ae.lastChild;this.frontier.push({type:Ke.type,match:Ke.contentMatchAt(Ke.childCount)}),Ae=Ke.content}this.unplaced=_e?0==t?Ms.empty:new Ms(Cb(f.content,t-1,1),t-1,oe<0?f.openEnd:t-1):new Ms(Cb(f.content,t,P),f.openStart,f.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!W2(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:r,type:s}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),f=W2(t,e,s,r,o);if(f){for(let g=e-1;g>=0;g--){let{match:A,type:P}=this.frontier[g],z=W2(t,g,P,A,!0);if(!z||z.childCount)continue e}return{depth:e,fit:f,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Eb(this.placed,e.depth,e.fit)),t=e.move;for(let r=e.depth+1;r<=t.depth;r++){let s=t.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,t.index(r));this.openFrontierNode(s.type,s.attrs,o)}return t}openFrontierNode(t,e=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=Eb(this.placed,this.depth,qr.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(qr.empty,!0);e.childCount&&(this.placed=Eb(this.placed,this.frontier.length,e))}}function Cb(i,t,e){return 0==t?i.cutByIndex(e,i.childCount):i.replaceChild(0,i.firstChild.copy(Cb(i.firstChild.content,t-1,e)))}function Eb(i,t,e){return 0==t?i.append(e):i.replaceChild(i.childCount-1,i.lastChild.copy(Eb(i.lastChild.content,t-1,e)))}function j2(i,t){for(let e=0;e<t;e++)i=i.firstChild.content;return i}function PA(i,t,e){if(t<=0)return i;let r=i.content;return t>1&&(r=r.replaceChild(0,PA(r.firstChild,t-1,1==r.childCount?e-1:0))),t>0&&(r=i.type.contentMatch.fillBefore(r).append(r),e<=0&&(r=r.append(i.type.contentMatch.matchFragment(r).fillBefore(qr.empty,!0)))),i.copy(r)}function W2(i,t,e,r,s){let o=i.node(t),f=s?i.indexAfter(t):i.index(t);if(f==o.childCount&&!e.compatibleContent(o.type))return null;let g=r.fillBefore(o.content,!0,f);return g&&!function UY(i,t,e){for(let r=e;r<t.childCount;r++)if(!i.allowsMarks(t.child(r).marks))return!0;return!1}(e,o.content,f)?g:null}class F1 extends af{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return uh.fail("No node at attribute step's position");let r=Object.create(null);for(let o in e.attrs)r[o]=e.attrs[o];r[this.attr]=this.value;let s=e.type.create(r,null,e.marks);return uh.fromReplace(t,this.pos,this.pos+1,new Ms(qr.from(s),0,e.isLeaf?0:1))}getMap(){return Fp.empty}invert(t){return new F1(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new F1(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new F1(e.pos,e.attr,e.value)}}af.jsonID("attr",F1);class kb extends af{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let s in t.attrs)e[s]=t.attrs[s];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return uh.ok(r)}getMap(){return Fp.empty}invert(t){return new kb(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new kb(e.attr,e.value)}}af.jsonID("docAttr",kb);let B1=class extends Error{};B1=function i(t){let e=Error.call(this,t);return e.__proto__=i.prototype,e},(B1.prototype=Object.create(Error.prototype)).constructor=B1,B1.prototype.name="TransformError";const $2=Object.create(null);class Pc{constructor(t,e,r){this.$anchor=t,this.$head=e,this.ranges=r||[new qY(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=Ms.empty){let r=e.content.lastChild,s=null;for(let g=0;g<e.openEnd;g++)s=r,r=r.lastChild;let o=t.steps.length,f=this.ranges;for(let g=0;g<f.length;g++){let{$from:A,$to:P}=f[g],z=t.mapping.slice(o);t.replaceRange(z.map(A.pos),z.map(P.pos),g?Ms.empty:e),0==g&&YA(t,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,e){let r=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:f,$to:g}=s[o],A=t.mapping.slice(r),P=A.map(f.pos),z=A.map(g.pos);o?t.deleteRange(P,z):(t.replaceRangeWith(P,z,e),YA(t,r,e.isInline?-1:1))}}static findFrom(t,e,r=!1){let s=t.parent.inlineContent?new Lf(t):N1(t.node(0),t.parent,t.pos,t.index(),e,r);if(s)return s;for(let o=t.depth-1;o>=0;o--){let f=e<0?N1(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):N1(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(f)return f}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new Cm(t.node(0))}static atStart(t){return N1(t,t,0,0,1)||new Cm(t)}static atEnd(t){return N1(t,t,t.content.size,t.childCount,-1)||new Cm(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=$2[e.type];if(!r)throw new RangeError(`No selection type ${e.type} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in $2)throw new RangeError("Duplicate use of selection JSON ID "+t);return $2[t]=e,e.prototype.jsonID=t,e}getBookmark(){return Lf.between(this.$anchor,this.$head).getBookmark()}}Pc.prototype.visible=!0;class qY{constructor(t,e){this.$from=t,this.$to=e}}let NA=!1;function zA(i){!NA&&!i.parent.inlineContent&&(NA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}class Lf extends Pc{constructor(t,e=t){zA(t),zA(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return Pc.near(r);let s=t.resolve(e.map(this.anchor));return new Lf(s.parent.inlineContent?s:r,r)}replace(t,e=Ms.empty){if(super.replace(t,e),e==Ms.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Lf&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new qw(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Lf(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,r=e){let s=t.resolve(e);return new this(s,r==e?s:t.resolve(r))}static between(t,e,r){let s=t.pos-e.pos;if((!r||s)&&(r=s>=0?1:-1),!e.parent.inlineContent){let o=Pc.findFrom(e,r,!0)||Pc.findFrom(e,-r,!0);if(!o)return Pc.near(e,r);e=o.$head}return t.parent.inlineContent||(0==s||(t=(Pc.findFrom(t,-r,!0)||Pc.findFrom(t,r,!0)).$anchor).pos<e.pos!=s<0)&&(t=e),new Lf(t,e)}}Pc.jsonID("text",Lf);class qw{constructor(t,e){this.anchor=t,this.head=e}map(t){return new qw(t.map(this.anchor),t.map(this.head))}resolve(t){return Lf.between(t.resolve(this.anchor),t.resolve(this.head))}}class Qc extends Pc{constructor(t){let e=t.nodeAfter,r=t.node(0).resolve(t.pos+e.nodeSize);super(t,r),this.node=e}map(t,e){let{deleted:r,pos:s}=e.mapResult(this.anchor),o=t.resolve(s);return r?Pc.near(o):new Qc(o)}content(){return new Ms(qr.from(this.node),0,0)}eq(t){return t instanceof Qc&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new X2(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Qc(t.resolve(e.anchor))}static create(t,e){return new Qc(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}Qc.prototype.visible=!1,Pc.jsonID("node",Qc);class X2{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:r}=t.mapResult(this.anchor);return e?new qw(r,r):new X2(r)}resolve(t){let e=t.resolve(this.anchor),r=e.nodeAfter;return r&&Qc.isSelectable(r)?new Qc(e):Pc.near(e)}}class Cm extends Pc{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=Ms.empty){if(e==Ms.empty){t.delete(0,t.doc.content.size);let r=Pc.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new Cm(t)}map(t){return new Cm(t)}eq(t){return t instanceof Cm}getBookmark(){return KY}}Pc.jsonID("all",Cm);const KY={map(){return this},resolve:i=>new Cm(i)};function N1(i,t,e,r,s,o=!1){if(t.inlineContent)return Lf.create(i,e);for(let f=r-(s>0?0:1);s>0?f<t.childCount:f>=0;f+=s){let g=t.child(f);if(g.isAtom){if(!o&&Qc.isSelectable(g))return Qc.create(i,e-(s<0?g.nodeSize:0))}else{let A=N1(i,g,e+s,s<0?g.childCount:0,s,o);if(A)return A}e+=g.nodeSize*s}return null}function YA(i,t,e){let r=i.steps.length-1;if(r<t)return;let f,s=i.steps[r];(s instanceof of||s instanceof lf)&&(i.mapping.maps[r].forEach((g,A,P,z)=>{null==f&&(f=z)}),i.setSelection(Pc.near(i.doc.resolve(f),e)))}function VA(i,t){return t&&i?i.bind(t):i}class Tb{constructor(t,e,r){this.name=t,this.init=VA(e.init,r),this.apply=VA(e.apply,r)}}new Tb("doc",{init:i=>i.doc||i.schema.topNodeType.createAndFill(),apply:i=>i.doc}),new Tb("selection",{init:(i,t)=>i.selection||Pc.atStart(t.doc),apply:i=>i.selection}),new Tb("storedMarks",{init:i=>i.storedMarks||null,apply:(i,t,e,r)=>r.selection.$cursor?i.storedMarks:null}),new Tb("scrollToSelection",{init:()=>0,apply:(i,t)=>i.scrolledIntoView?t+1:t});const e7=["ol",0],t7=["ul",0],n7=["li",0],WA={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:i=>({order:i.hasAttribute("start")?+i.getAttribute("start"):1})}],toDOM:i=>1==i.attrs.order?e7:["ol",{start:i.attrs.order},0]};const ZA=i=>{const t=(i=>{const t={};return Object.keys(i).forEach(e=>{i[e]&&(t[e]=i[e])}),t})(i);return Object.entries(t).map(([e,r])=>`${(i=>i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`))(e)}:${r}`).join(";")};Error;const h7={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:i=>({href:i.getAttribute("href"),title:i.getAttribute("title"),target:i.getAttribute("target")})}],toDOM(i){const{href:t,title:e,target:r}=i.attrs;return["a",{href:t,title:e,target:r},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:i=>"normal"!==i.style.fontWeight&&null},{style:"font-weight",getAttrs:i=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(i)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:i=>({color:i})}],toDOM(i){const{color:t}=i.attrs;return["span",{style:`color:${t};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:i=>({backgroundColor:i})}],toDOM(i){const{backgroundColor:t}=i.attrs;return["span",{style:`background-color:${t};`},0]}}},p7={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(i){const{textAlign:t}=i.style;return{align:i.getAttribute("align")||t||null}}}],toDOM(i){const{align:t}=i.attrs;return["p",{style:ZA({textAlign:"left"!==t?t:null})||null},0]}},v7={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(i){const{textAlign:t}=i.style;return{level:1,align:i.getAttribute("align")||t||null}}},{tag:"h2",getAttrs(i){const{textAlign:t}=i.style;return{level:2,align:i.getAttribute("align")||t||null}}},{tag:"h3",getAttrs(i){const{textAlign:t}=i.style;return{level:3,align:i.getAttribute("align")||t||null}}},{tag:"h4",getAttrs(i){const{textAlign:t}=i.style;return{level:4,align:i.getAttribute("align")||t||null}}},{tag:"h5",getAttrs(i){const{textAlign:t}=i.style;return{level:5,align:i.getAttribute("align")||t||null}}},{tag:"h6",getAttrs(i){const{textAlign:t}=i.style;return{level:6,align:i.getAttribute("align")||t||null}}}],toDOM(i){const{level:t,align:e}=i.attrs;return[`h${t}`,{style:ZA({textAlign:"left"!==e?e:null})||null},0]}},x7={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:i=>({src:i.getAttribute("src"),title:i.getAttribute("title"),alt:i.getAttribute("alt"),width:i.getAttribute("width")})}],toDOM(i){const{src:t,alt:e,title:r,width:s}=i.attrs;return["img",{src:t,alt:e,title:r,width:s}]}},E7={doc:{content:"block+"},text:{group:"inline"},paragraph:p7,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:v7,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:x7,list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>n7,defining:!0},content:"paragraph block*"},ordered_list:{...WA,content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>t7},content:"list_item+",group:"block"}},qA=(new class xY{constructor(t){this.cached=Object.create(null);let e=this.spec={};for(let s in t)e[s]=t[s];e.nodes=iA.from(t.nodes),e.marks=iA.from(t.marks||{}),this.nodes=Uw.compile(this.spec.nodes,this),this.marks=jw.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],f=o.spec.content||"",g=o.spec.marks;o.contentMatch=r[f]||(r[f]=gy.parse(f,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==g?null:g?_A(this,g.split(" ")):""!=g&&o.inlineContent?null:[]}for(let s in this.marks){let o=this.marks[s],f=o.spec.excludes;o.excluded=null==f?[o]:""==f?[]:_A(this,f.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,r,s){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Uw))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,r,s)}text(t,e){let r=this.nodes.text;return new Vw(r,r.defaultAttrs,t,jl.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return pv.fromJSON(this,t)}markFromJSON(t){return jl.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}({marks:h7,nodes:E7}),(i,t)=>!i.selection.empty&&(t&&t(i.tr.deleteSelection().scrollIntoView()),!0));function z1(i,t,e=!1){for(let r=i;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(e&&1!=r.childCount)return!1}return!1}function J2(i){if(!i.parent.type.spec.isolating)for(let t=i.depth-1;t>=0;t--){if(i.index(t)>0)return i.doc.resolve(i.before(t+1));if(i.node(t).type.spec.isolating)break}return null}function Q2(i){if(!i.parent.type.spec.isolating)for(let t=i.depth-1;t>=0;t--){let e=i.node(t);if(i.index(t)+1<e.childCount)return i.doc.resolve(i.after(t+1));if(e.type.spec.isolating)break}return null}function eE(i){for(let t=0;t<i.edgeCount;t++){let{type:e}=i.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const eD=function P7(i){return(t,e)=>{let{$from:r,$to:s}=t.selection;if(t.selection instanceof Qc&&t.selection.node.isBlock)return!(!r.parentOffset||!wb(t.doc,r.pos)||(e&&e(t.tr.split(r.pos).scrollIntoView()),0));if(!r.parent.isBlock)return!1;if(e){let o=s.parentOffset==s.parent.content.size,f=t.tr;(t.selection instanceof Lf||t.selection instanceof Cm)&&f.deleteSelection();let g=0==r.depth?null:eE(r.node(-1).contentMatchAt(r.indexAfter(-1))),A=i&&i(s.parent,o),P=A?[A]:o&&g?[{type:g}]:void 0,z=wb(f.doc,f.mapping.map(r.pos),1,P);if(!P&&!z&&wb(f.doc,f.mapping.map(r.pos),1,g?[{type:g}]:void 0)&&(g&&(P=[{type:g}]),z=!0),z&&(f.split(f.mapping.map(r.pos),1,P),!o&&!r.parentOffset&&r.parent.type!=g)){let ie=f.mapping.map(r.before()),se=f.doc.resolve(ie);g&&r.node(-1).canReplaceWith(se.index(),se.index()+1,g)&&f.setNodeMarkup(f.mapping.map(r.before()),g)}e(f.scrollIntoView())}return!0}}();function tD(i,t,e){let o,f,r=t.nodeBefore,s=t.nodeAfter;if(r.type.spec.isolating||s.type.spec.isolating)return!1;if(function B7(i,t,e){let r=t.nodeBefore,s=t.nodeAfter,o=t.index();return!(!(r&&s&&r.type.compatibleContent(s.type))||(!r.content.size&&t.parent.canReplace(o-1,o)?(e&&e(i.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!s.isTextblock&&!V2(i.doc,t.pos)||(e&&e(i.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(i,t,e))return!0;let g=t.parent.canReplace(t.index(),t.index()+1);if(g&&(o=(f=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&f.matchType(o[0]||s.type).validEnd){if(e){let ie=t.pos+s.nodeSize,se=qr.empty;for(let he=o.length-1;he>=0;he--)se=qr.from(o[he].create(null,se));se=qr.from(r.copy(se));let oe=i.tr.step(new lf(t.pos-1,ie,t.pos,ie,new Ms(se,1,0),o.length,!0)),_e=ie+2*o.length;V2(oe.doc,_e)&&oe.join(_e),e(oe.scrollIntoView())}return!0}let A=Pc.findFrom(t,1),P=A&&A.$from.blockRange(A.$to),z=P&&bb(P);if(null!=z&&z>=t.depth)return e&&e(i.tr.lift(P,z).scrollIntoView()),!0;if(g&&z1(s,"start",!0)&&z1(r,"end")){let ie=r,se=[];for(;se.push(ie),!ie.isTextblock;)ie=ie.lastChild;let oe=s,_e=1;for(;!oe.isTextblock;oe=oe.firstChild)_e++;if(ie.canReplace(ie.childCount,ie.childCount,oe.content)){if(e){let he=qr.empty;for(let Ke=se.length-1;Ke>=0;Ke--)he=qr.from(se[Ke].copy(he));e(i.tr.step(new lf(t.pos-se.length,t.pos+s.nodeSize,t.pos+_e,t.pos+s.nodeSize-_e,new Ms(he,se.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function iD(i){return function(t,e){let r=t.selection,s=i<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return!!s.node(o).isTextblock&&(e&&e(t.tr.setSelection(Lf.create(t.doc,i<0?s.start(o):s.end(o)))),!0)}}const N7=iD(-1),z7=iD(1);function tE(i,t=null){return function(e,r){let s=!1;for(let o=0;o<e.selection.ranges.length&&!s;o++){let{$from:{pos:f},$to:{pos:g}}=e.selection.ranges[o];e.doc.nodesBetween(f,g,(A,P)=>{if(s)return!1;if(A.isTextblock&&!A.hasMarkup(i,t))if(A.type==i)s=!0;else{let z=e.doc.resolve(P),ie=z.index();s=z.parent.canReplaceWith(ie,ie+1,i)}})}if(!s)return!1;if(r){let o=e.tr;for(let f=0;f<e.selection.ranges.length;f++){let{$from:{pos:g},$to:{pos:A}}=e.selection.ranges[f];o.setBlockType(g,A,i,t)}r(o.scrollIntoView())}return!0}}function nD(i,t=null){return function(e,r){let{empty:s,$cursor:o,ranges:f}=e.selection;if(s&&!o||!function G7(i,t,e){for(let r=0;r<t.length;r++){let{$from:s,$to:o}=t[r],f=0==s.depth&&i.inlineContent&&i.type.allowsMarkType(e);if(i.nodesBetween(s.pos,o.pos,g=>{if(f)return!1;f=g.inlineContent&&g.type.allowsMarkType(e)}),f)return!0}return!1}(e.doc,f,i))return!1;if(r)if(o)i.isInSet(e.storedMarks||o.marks())?r(e.tr.removeStoredMark(i)):r(e.tr.addStoredMark(i.create(t)));else{let g=!1,A=e.tr;for(let P=0;!g&&P<f.length;P++){let{$from:z,$to:ie}=f[P];g=e.doc.rangeHasMark(z.pos,ie.pos,i)}for(let P=0;P<f.length;P++){let{$from:z,$to:ie}=f[P];if(g)A.removeMark(z.pos,ie.pos,i);else{let se=z.pos,oe=ie.pos,_e=z.nodeAfter,he=ie.nodeBefore,Ae=_e&&_e.isText?/^\s*/.exec(_e.text)[0].length:0,Ke=he&&he.isText?/\s*$/.exec(he.text)[0].length:0;se+Ae<oe&&(se+=Ae,oe-=Ke),A.addMark(se,oe,i.create(t))}}r(A.scrollIntoView())}return!0}}function iE(...i){return function(t,e,r){for(let s=0;s<i.length;s++)if(i[s](t,e,r))return!0;return!1}}let nE=iE(qA,(i,t,e)=>{let r=function KA(i,t){let{$cursor:e}=i.selection;return!e||(t?!t.endOfTextblock("backward",i):e.parentOffset>0)?null:e}(i,e);if(!r)return!1;let s=J2(r);if(!s){let f=r.blockRange(),g=f&&bb(f);return null!=g&&(t&&t(i.tr.lift(f,g).scrollIntoView()),!0)}let o=s.nodeBefore;if(!o.type.spec.isolating&&tD(i,s,t))return!0;if(0==r.parent.content.size&&(z1(o,"end")||Qc.isSelectable(o))){let f=U2(i.doc,r.before(),r.after(),Ms.empty);if(f&&f.slice.size<f.to-f.from){if(t){let g=i.tr.step(f);g.setSelection(z1(o,"end")?Pc.findFrom(g.doc.resolve(g.mapping.map(s.pos,-1)),-1):Qc.create(g.doc,s.pos-o.nodeSize)),t(g.scrollIntoView())}return!0}}return!(!o.isAtom||s.depth!=r.depth-1||(t&&t(i.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),0))},(i,t,e)=>{let{$head:r,empty:s}=i.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("backward",i):r.parentOffset>0)return!1;o=J2(r)}let f=o&&o.nodeBefore;return!(!f||!Qc.isSelectable(f)||(t&&t(i.tr.setSelection(Qc.create(i.doc,o.pos-f.nodeSize)).scrollIntoView()),0))}),rD=iE(qA,(i,t,e)=>{let r=function QA(i,t){let{$cursor:e}=i.selection;return!e||(t?!t.endOfTextblock("forward",i):e.parentOffset<e.parent.content.size)?null:e}(i,e);if(!r)return!1;let s=Q2(r);if(!s)return!1;let o=s.nodeAfter;if(tD(i,s,t))return!0;if(0==r.parent.content.size&&(z1(o,"start")||Qc.isSelectable(o))){let f=U2(i.doc,r.before(),r.after(),Ms.empty);if(f&&f.slice.size<f.to-f.from){if(t){let g=i.tr.step(f);g.setSelection(z1(o,"start")?Pc.findFrom(g.doc.resolve(g.mapping.map(s.pos)),1):Qc.create(g.doc,g.mapping.map(s.pos))),t(g.scrollIntoView())}return!0}}return!(!o.isAtom||s.depth!=r.depth-1||(t&&t(i.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),0))},(i,t,e)=>{let{$head:r,empty:s}=i.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("forward",i):r.parentOffset<r.parent.content.size)return!1;o=Q2(r)}let f=o&&o.nodeAfter;return!(!f||!Qc.isSelectable(f)||(t&&t(i.tr.setSelection(Qc.create(i.doc,o.pos)).scrollIntoView()),0))});const f_={Enter:iE((i,t)=>{let{$head:e,$anchor:r}=i.selection;return!(!e.parent.type.spec.code||!e.sameParent(r)||(t&&t(i.tr.insertText("\n").scrollIntoView()),0))},(i,t)=>{let e=i.selection,{$from:r,$to:s}=e;if(e instanceof Cm||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=eE(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let f=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,g=i.tr.insert(f,o.createAndFill());g.setSelection(Lf.create(g.doc,f+1)),t(g.scrollIntoView())}return!0},(i,t)=>{let{$cursor:e}=i.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let o=e.before();if(wb(i.doc,o))return t&&t(i.tr.split(o).scrollIntoView()),!0}let r=e.blockRange(),s=r&&bb(r);return null!=s&&(t&&t(i.tr.lift(r,s).scrollIntoView()),!0)},eD),"Mod-Enter":(i,t)=>{let{$head:e,$anchor:r}=i.selection;if(!e.parent.type.spec.code||!e.sameParent(r))return!1;let s=e.node(-1),o=e.indexAfter(-1),f=eE(s.contentMatchAt(o));if(!f||!s.canReplaceWith(o,o,f))return!1;if(t){let g=e.after(),A=i.tr.replaceWith(g,g,f.createAndFill());A.setSelection(Pc.near(A.doc.resolve(g),1)),t(A.scrollIntoView())}return!0},Backspace:nE,"Mod-Backspace":nE,"Shift-Backspace":nE,Delete:rD,"Mod-Delete":rD,"Mod-a":(i,t)=>(t&&t(i.tr.setSelection(new Cm(i.doc))),!0)},V7={"Ctrl-h":f_.Backspace,"Alt-Backspace":f_["Mod-Backspace"],"Ctrl-d":f_.Delete,"Ctrl-Alt-Backspace":f_["Mod-Delete"],"Alt-Delete":f_["Mod-Delete"],"Alt-d":f_["Mod-Delete"],"Ctrl-a":N7,"Ctrl-e":z7};for(let i in f_)V7[i]=f_[i];typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform();const rE=(i,t)=>{const{from:e,$from:r,to:s,empty:o}=i.selection;return o?!!t.isInSet(i.storedMarks||r.marks()):i.doc.rangeHasMark(e,s,t)},sD=(i,t,e={})=>{const{selection:r}=i,{$from:s,to:o}=r,f=((i,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===i)return t.node(e).type;return null})(t,s);return Object.entries(e).length&&f?o<=s.end()&&s.parent.hasMarkup(t,e):!!f},aD=i=>{const t=[],{selection:{from:e,to:r}}=i;return i.doc.nodesBetween(e,r,s=>{t.push(s)}),t},oD=(i,t,e)=>{for(const r of t){const{$from:s,$to:o}=r;let f=0===s.depth&&i.type.allowsMarkType(e);if(i.nodesBetween(s.pos,o.pos,g=>!f&&(f=g.inlineContent&&g.type.allowsMarkType(e),!0)),f)return!0}return!1},lD=(i,t={})=>(e,r)=>{const{tr:s,selection:o}=e,{empty:f,ranges:g,$from:A,$to:P}=o;if(f&&o instanceof Lf){const{$cursor:z}=o;if(!z||!oD(e.doc,g,i)||(s.addStoredMark(i.create(t)),!s.storedMarksSet))return!1;r?.(s)}else{if(s.addMark(A.pos,P.pos,i.create(t)),!s.docChanged)return!1;r?.(s.scrollIntoView())}return!0};var Z7=Qt(4476);class Y1{constructor(t){this.name=t}apply(){return(t,e)=>{const{schema:r}=t,s=r.marks[this.name];return!!s&&lD(s)(t,e)}}toggle(){return(t,e)=>{const{schema:r}=t,s=r.marks[this.name];return!!s&&nD(s)(t,e)}}isActive(t){const{schema:e}=t,r=e.marks[this.name];return!!r&&rE(t,r)}canExecute(t){return this.toggle()(t)}}class Jw{constructor(t=!1){this.isBulletList=!1,this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{const{schema:r}=t,s=this.getType(r);return!!s&&(this.isActive(t)?function a7(i){return function(t,e){let{$from:r,$to:s}=t.selection,o=r.blockRange(s,f=>f.childCount>0&&f.firstChild.type==i);return!!o&&(!e||(r.node(o.depth-1).type==i?function o7(i,t,e,r){let s=i.tr,o=r.end,f=r.$to.end(r.depth);o<f&&(s.step(new lf(o-1,f,o,f,new Ms(qr.from(e.create(null,r.parent.copy())),1,0),1,!0)),r=new Hw(s.doc.resolve(r.$from.pos),s.doc.resolve(f),r.depth));const g=bb(r);if(null==g)return!1;s.lift(r,g);let A=s.mapping.map(o,-1)-1;return V2(s.doc,A)&&s.join(A),t(s.scrollIntoView()),!0}(t,e,i,o):function l7(i,t,e){let r=i.tr,s=e.parent;for(let oe=e.end,_e=e.endIndex-1,he=e.startIndex;_e>he;_e--)oe-=s.child(_e).nodeSize,r.delete(oe-1,oe+1);let o=r.doc.resolve(e.start),f=o.nodeAfter;if(r.mapping.map(e.end)!=e.start+o.nodeAfter.nodeSize)return!1;let g=0==e.startIndex,A=e.endIndex==s.childCount,P=o.node(-1),z=o.index(-1);if(!P.canReplace(z+(g?0:1),z+1,f.content.append(A?qr.empty:qr.from(s))))return!1;let ie=o.pos,se=ie+f.nodeSize;return r.step(new lf(ie-(g?1:0),se+(A?1:0),ie+1,se-1,new Ms((g?qr.empty:qr.from(s.copy(qr.empty))).append(A?qr.empty:qr.from(s.copy(qr.empty))),g?0:1,A?0:1),g?0:1)),t(r.scrollIntoView()),!0}(t,e,o)))}}(r.nodes.list_item)(t,e):function r7(i,t=null){return function(e,r){let{$from:s,$to:o}=e.selection,f=s.blockRange(o),g=!1,A=f;if(!f)return!1;if(f.depth>=2&&s.node(f.depth-1).type.compatibleContent(i)&&0==f.startIndex){if(0==s.index(f.depth-1))return!1;let z=e.doc.resolve(f.start-2);A=new Hw(z,z,f.depth),f.endIndex<f.parent.childCount&&(f=new Hw(s,e.doc.resolve(o.end(f.depth)),f.depth)),g=!0}let P=MA(A,i,t,f);return!!P&&(r&&r(function s7(i,t,e,r,s){let o=qr.empty;for(let z=e.length-1;z>=0;z--)o=qr.from(e[z].type.create(e[z].attrs,o));i.step(new lf(t.start-(r?2:0),t.end,t.start,t.end,new Ms(o,0,0),e.length,!0));let f=0;for(let z=0;z<e.length;z++)e[z].type==s&&(f=z+1);let g=e.length-f,A=t.start+e.length-(r?2:0),P=t.parent;for(let z=t.startIndex,ie=t.endIndex,se=!0;z<ie;z++,se=!1)!se&&wb(i.doc,A,g)&&(i.split(A,g),A+=2*g),A+=P.child(z).nodeSize;return i}(e.tr,f,P,g,i).scrollIntoView()),!0)}}(s)(t,e))}}isActive(t){const{schema:e}=t,r=this.getType(e);return!!r&&sD(t,r)}canExecute(t){return this.toggle()(t)}}class vy{constructor(t){this.level=t}apply(){return(t,e)=>{const{schema:r}=t,s=r.nodes.heading;return!!s&&tE(s)(t,e)}}toggle(){return(t,e)=>{const{schema:r,selection:s,doc:o}=t,f=r.nodes.heading;if(!f)return!1;const g=s.$from.before(1),P=o.nodeAt(g)?.attrs??{};return this.isActive(t)?tE(r.nodes.paragraph,P)(t,e):tE(f,{...P,level:this.level})(t,e)}}isActive(t){const{schema:e}=t,r=aD(t),s=e.nodes.heading;if(!s)return!1;const o=[s,e.nodes.text,e.nodes.blockquote];return!!r.filter(A=>o.includes(A.type)).find(A=>A.attrs.level===this.level)}canExecute(t){return this.toggle()(t)}}class Db{constructor(t){this.align=t}toggle(){return(t,e)=>{const{doc:r,selection:s,tr:o,schema:f}=t,{from:g,to:A}=s;let P=!1;return r.nodesBetween(g,A,(z,ie)=>{const se=z.type;return[f.nodes.paragraph,f.nodes.heading].includes(se)&&(P=!0,o.setNodeMarkup(ie,se,{...z.attrs,align:this.align})),!0}),!!P&&(o.docChanged&&e?.(o),!0)}}isActive(t){return!!aD(t).find(s=>s.attrs.align===this.align)}canExecute(t){return this.toggle()(t)}}const DG={strict:!0};let G1=class{constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,r)=>{const{schema:s,selection:o,doc:f}=e,g=s.marks[this.name];if(!g)return!1;const{from:A,to:P,empty:z}=o;if(!z&&A+1===P){const ie=f.nodeAt(A);if(ie?.isAtom&&!ie.isText&&ie.isLeaf)return!1}return lD(g,t)(e,r)}}isActive(t){const{schema:e}=t,r=e.marks[this.name];return!!r&&rE(t,r)}getActiveColors(t){if(!this.isActive(t))return[];const{schema:e}=t;return(i=>{let t=[];const{selection:e,storedMarks:r}=i,{from:s,to:o,empty:f,$from:g}=e;return f?t=r||g.marks():i.doc.nodesBetween(s,o,A=>{t=[...t,...A.marks]}),t})(t).filter(o=>o.type===e.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{const{schema:r}=t,s=r.marks[this.name];return!!s&&(i=s,(t,e)=>{const{tr:r,selection:s,storedMarks:o,doc:f}=t,{empty:g,ranges:A}=s;if(g&&s instanceof Lf){const{$cursor:P}=s;if(!P||!oD(t.doc,A,i))return!1;if(i.isInSet(o||P.marks()))return r.removeStoredMark(i),e?.(r),!0}else{for(const P of A){const{$from:z,$to:ie}=P;f.rangeHasMark(z.pos,ie.pos,i)&&r.removeMark(z.pos,ie.pos,i)}if(!r.docChanged)return!1;e?.(r.scrollIntoView())}return!1})(t,e);var i}}canExecute(t){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(t)}};const IG=["link"];new Y1("strong"),new Y1("em"),new Y1("code"),new Y1("u"),new Y1("s"),new class SG{toggle(){return(t,e)=>{const{schema:r}=t,s=r.nodes.blockquote;return!!s&&(this.isActive(t)?((i,t)=>{let{$from:e,$to:r}=i.selection,s=e.blockRange(r),o=s&&bb(s);return null!=o&&(t&&t(i.tr.lift(s,o).scrollIntoView()),!0)})(t,e):function Y7(i,t=null){return function(e,r){let{$from:s,$to:o}=e.selection,f=s.blockRange(o),g=f&&MA(f,i,t);return!!g&&(r&&r(e.tr.wrap(f,g).scrollIntoView()),!0)}}(s)(t,e))}}isActive(t){const{schema:e}=t,r=e.nodes.blockquote;return!!r&&sD(t,r)}canExecute(t){return this.toggle()(t)}},new class AG{insert(){return(t,e)=>{const{schema:r,tr:s}=t,o=r.nodes.horizontal_rule;return!!o&&(e(s.replaceSelectionWith(o.create()).scrollIntoView()),!0)}}canExecute(t){return((i,t)=>{const{$from:e}=i.selection;for(let r=e.depth;r>=0;r-=1){const s=e.index(r);if(e.node(r).canReplaceWith(s,s,t))return!0}return!1})(t,t.schema.nodes.horizontal_rule)}},new class MG{insert(){return(t,e)=>{const{tr:r}=t,{ranges:s,empty:o}=r.selection;return o||(Object.entries(t.schema.marks).forEach(([f,g])=>{IG.includes(f)||s.forEach(A=>{r.removeMark(A.$from.pos,A.$to.pos,g)})}),e(r)),!0}}canExecute(){return!0}},new Jw(!0),new Jw(!1),new vy(1),new vy(2),new vy(3),new vy(4),new vy(5),new vy(6),new Db("left"),new Db("center"),new Db("right"),new Db("justify"),new class{update(t){return(e,r)=>{const{schema:s,selection:o}=e,f=s.marks.link;return!(!f||o.empty)&&nD(f,t)(e,r)}}insert(t,e){return(r,s)=>{const{schema:o,tr:f}=r;if(!o.marks.link)return!1;const P=o.text(t,[o.marks.link.create({href:e.href,title:e.title??t,target:e.target??"_blank"})]);return f.replaceSelectionWith(P,!1).scrollIntoView(),!!f.docChanged&&(s?.(f),!0)}}isActive(t,e=DG){if(e.strict)return!0;const{schema:r}=t,s=r.marks.link;return!!s&&rE(t,s)}remove(t,e){return((i,t)=>{const{doc:e,selection:r,tr:s}=i,{$head:{pos:o},from:f,to:g}=r;if(f===g){const A=e.resolve(o),P=o-A.textOffset,z=P+A.parent.child(A.index()).nodeSize;s.removeMark(P,z)}else s.removeMark(f,g);return!!s.docChanged&&(t?.(s),!0)})(t,e)}canExecute(t){const e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}},new class{insert(t,e){return(r,s)=>{const{schema:o,tr:f,selection:g}=r,A=o.nodes.image;if(!A)return!1;const P={width:null,src:t,...e};!P.width&&g instanceof Qc&&g.node.type===A&&(P.width=g.node.attrs.width),f.replaceSelectionWith(A.createAndFill(P));const z=f.doc.resolve(f.selection.anchor-f.selection.$anchor.nodeBefore.nodeSize);return f.setSelection(new Qc(z)).scrollIntoView(),!!f.docChanged&&(s?.(f),!0)}}isActive(t){const{selection:e}=t;return e instanceof Qc&&"image"===e.node.type.name}},new G1("text_color","color"),new G1("text_background_color","backgroundColor");const aE={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class JG{constructor(t={}){this.locals=aE,this.get=e=>{const r=this.locals[e];return r?(0,sY.X)(r)?r:(0,tA.of)(r):(0,tA.of)("")},this.locals={...aE,...t}}}const fD={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class bH{static get(t,e="currentColor"){const r=fD[t];return r&&(r.includes("<path")||r.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${e}\n          height=20\n          width=20\n        >\n          ${r}\n        </svg>\n      `:r}}let oE=(()=>{class i{constructor(){this.locals={},this.icons={}}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275prov=n.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wH=(()=>{class i{constructor(e){this.config=e}get locals(){return new JG(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:bH.get(e)}static#e=this.\u0275fac=function(r){return new(r||i)(n.CoB(oE,8))};static#t=this.\u0275prov=n.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const pD=i=>({locals:i.locals??{},icons:i.icons??{}});let CH=(()=>{class i{constructor(e){this.sanitizer=e}transform(e){return(i=>window.trustedTypes?.isHTML(i)??!1)(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(Z7.mI,16))};static#t=this.\u0275pipe=n.UTH({name:"sanitizeHtml",type:i,pure:!0})}return i})(),EH=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({providers:[CH],imports:[Re.MD,j.sl]})}return i})();const Qw=new n.UbH("NgxEditorConfig"),mD={locals:aE,icons:fD};let kH=(()=>{class i{static forRoot(e=mD){return{ngModule:i,providers:[{provide:Qw,useValue:e},{provide:oE,useFactory:pD,deps:[Qw]}]}}static forChild(e=mD){return{ngModule:i,providers:[{provide:Qw,useValue:e},{provide:oE,useFactory:pD,deps:[Qw]},wH]}}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({imports:[Re.MD,EH]})}return i})();typeof navigator<"u"&&/Mac/.test(navigator.platform);var YH=Qt(6900);Qt(1176),new n.UbH("DROPZONE_CONFIG");let GH=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=n.a4G({type:i});static \u0275inj=n.s3X({imports:[Re.MD,Re.MD]})}return i})();var HH=Qt(3768),VH=Qt(112),UH=Qt(5448),yD=Qt(7773),jH=Qt(560),$H=Qt(3120);function xD(i,t=VH.M,e){const r=(0,$H.k)(i,t);return function WH(i,t){return(0,UH.i)((e,r)=>{const{leading:s=!0,trailing:o=!1}=t??{};let f=!1,g=null,A=null,P=!1;const z=()=>{A?.unsubscribe(),A=null,o&&(oe(),P&&r.complete())},ie=()=>{A=null,P&&r.complete()},se=_e=>A=(0,jH.Uv)(i(_e)).subscribe((0,yD.e)(r,z,ie)),oe=()=>{if(f){f=!1;const _e=g;g=null,r.next(_e),!P&&se(_e)}};e.subscribe((0,yD.e)(r,_e=>{f=!0,g=_e,(!A||A.closed)&&(s?oe():se(_e))},()=>{P=!0,(!(o&&f&&A)||A.closed)&&r.complete()}))})}(()=>r,e)}var bD=Qt(9212),wD=Qt(4e3),CD=Qt(6684),Bp=typeof window<"u"?window:{screen:{},navigator:{}},H1=(Bp.matchMedia||function(){return{matches:!1}}).bind(Bp),ED=!1,kD=function(){};Bp.addEventListener&&Bp.addEventListener("p",kD,{get passive(){return ED=!0}}),Bp.removeEventListener&&Bp.removeEventListener("p",kD,!1);var TD=ED,lE="ontouchstart"in Bp,AD=(lE||"TouchEvent"in Bp&&H1("(any-pointer: coarse)"),Bp.navigator.userAgent||"");H1("(pointer: coarse)").matches&&/iPad|Macintosh/.test(AD)&&Math.min(Bp.screen.width||0,Bp.screen.height||0);function QH(i,t){}function eV(i,t){1&i&&n.yuY(0,QH,0,0,"ng-template")}(H1("(pointer: coarse)").matches||!H1("(pointer: fine)").matches&&lE)&&/Windows.*Firefox/.test(AD),H1("(any-pointer: fine)").matches||H1("(any-hover: hover)");const tV=(i,t,e)=>({tooltip:i,placement:t,content:e});function iV(i,t){if(1&i&&(n.SAx(0),n.yuY(1,eV,1,0,null,1),n.k70()),2&i){const e=n.GaO();n.yG2(),n.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.uAc(2,tV,e.tooltip,e.placement,e.content))}}function nV(i,t){if(1&i&&(n.SAx(0),n.I0R(1,"div",2),n.OEk(2),n.C$Y(),n.k70()),2&i){const e=n.GaO();n.yG2(),n.e48("title",e.tooltip)("data-tooltip-placement",e.placement),n.yG2(),n.oRS(" ",e.content," ")}}const rV=["tooltipTemplate"],sV=["leftOuterSelectionBar"],aV=["rightOuterSelectionBar"],oV=["fullBar"],lV=["selectionBar"],cV=["minHandle"],uV=["maxHandle"],hV=["floorLabel"],dV=["ceilLabel"],fV=["minHandleLabel"],pV=["maxHandleLabel"],mV=["combinedLabel"],gV=["ticksElement"];function vV(i,t){if(1&i&&n.wR5(0,"ngx-slider-tooltip-wrapper",32),2&i){const e=n.GaO().$implicit,r=n.GaO();n.E7m("template",r.tooltipTemplate)("tooltip",e.valueTooltip)("placement",e.valueTooltipPlacement)("content",e.value)}}function _V(i,t){if(1&i&&n.wR5(0,"span",33),2&i){const e=n.GaO().$implicit;n.E7m("innerText",e.legend)}}function yV(i,t){if(1&i&&n.wR5(0,"span",34),2&i){const e=n.GaO().$implicit;n.E7m("innerHTML",e.legend,n.E3n)}}const xV=i=>({"ngx-slider-selected":i});function bV(i,t){if(1&i&&(n.I0R(0,"span",27),n.wR5(1,"ngx-slider-tooltip-wrapper",28),n.yuY(2,vV,1,4,"ngx-slider-tooltip-wrapper",29)(3,_V,1,1,"span",30)(4,yV,1,1,"span",31),n.C$Y()),2&i){const e=t.$implicit,r=n.GaO();n.E7m("ngClass",n.S45(8,xV,e.selected))("ngStyle",e.style),n.yG2(),n.E7m("template",r.tooltipTemplate)("tooltip",e.tooltip)("placement",e.tooltipPlacement),n.yG2(),n.E7m("ngIf",null!=e.value),n.yG2(),n.E7m("ngIf",null!=e.legend&&!1===r.allowUnsafeHtmlInSlider),n.yG2(),n.E7m("ngIf",null!=e.legend&&(null==r.allowUnsafeHtmlInSlider||r.allowUnsafeHtmlInSlider))}}var t0=function(i){return i[i.Low=0]="Low",i[i.High=1]="High",i[i.Floor=2]="Floor",i[i.Ceil=3]="Ceil",i[i.TickValue=4]="TickValue",i}(t0||{});class eC{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1}const MD=new n.UbH("AllowUnsafeHtmlInSlider");var ps=function(i){return i[i.Min=0]="Min",i[i.Max=1]="Max",i}(ps||{});class wV{value;highValue;pointerType}class nr{static isNullOrUndefined(t){return null==t}static areArraysEqual(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}static linearValueToPosition(t,e,r){return(t-e)/(r-e)}static logValueToPosition(t,e,r){return((t=Math.log(t))-(e=Math.log(e)))/((r=Math.log(r))-e)}static linearPositionToValue(t,e,r){return t*(r-e)+e}static logPositionToValue(t,e,r){return e=Math.log(e),r=Math.log(r),Math.exp(t*(r-e)+e)}static findStepIndex(t,e){const r=e.map(o=>Math.abs(t-o.value));let s=0;for(let o=0;o<e.length;o++)r[o]!==r[s]&&r[o]<r[s]&&(s=o);return s}}class p_{static isTouchEvent(t){return void 0!==window.TouchEvent?t instanceof TouchEvent:void 0!==t.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class Uu{static roundToPrecisionLimit(t,e){return+t.toPrecision(e)}static isModuloWithinPrecisionLimit(t,e,r){const s=Math.pow(10,-r);return Math.abs(t%e)<=s||Math.abs(Math.abs(t%e)-e)<=s}static clampToRange(t,e,r){return Math.min(Math.max(t,e),r)}}class OD{eventName=null;events=null;eventsSubscription=null;teardownCallback=null}class RD{renderer;constructor(t){this.renderer=t}attachPassiveEventListener(t,e,r,s){if(!0!==TD)return this.attachEventListener(t,e,r,s);const o=new OD;o.eventName=e,o.events=new w.E;const f=g=>{o.events.next(g)};return t.addEventListener(e,f,{passive:!0,capture:!1}),o.teardownCallback=()=>{t.removeEventListener(e,f,{passive:!0,capture:!1})},o.eventsSubscription=o.events.pipe(nr.isNullOrUndefined(s)?(0,bD.y)(()=>{}):xD(s,void 0,{leading:!0,trailing:!0})).subscribe(g=>{r(g)}),o}detachEventListener(t){nr.isNullOrUndefined(t.eventsSubscription)||(t.eventsSubscription.unsubscribe(),t.eventsSubscription=null),nr.isNullOrUndefined(t.events)||(t.events.complete(),t.events=null),nr.isNullOrUndefined(t.teardownCallback)||(t.teardownCallback(),t.teardownCallback=null)}attachEventListener(t,e,r,s){const o=new OD;return o.eventName=e,o.events=new w.E,o.teardownCallback=this.renderer.listen(t,e,g=>{o.events.next(g)}),o.eventsSubscription=o.events.pipe(nr.isNullOrUndefined(s)?(0,bD.y)(()=>{}):xD(s,void 0,{leading:!0,trailing:!0})).subscribe(g=>{r(g)}),o}}let m_=(()=>{class i{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(e,r,s){this.elemRef=e,this.renderer=r,this.changeDetectionRef=s,this.eventListenerHelper=new RD(this.renderer)}setAlwaysHide(e){this._alwaysHide=e,this.visibility=e?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(e){this._scale=e}setRotate(e){this._rotate=e,this.transform="rotate("+e+"deg)"}getRotate(){return this._rotate}setPosition(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}calculateDimension(){const e=this.getBoundingClientRect();this._dimension=this.vertical?(e.bottom-e.top)*this.scale:(e.right-e.left)*this.scale}setDimension(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(e,r,s){const o=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,r,s);this.eventListeners.push(o)}onPassive(e,r,s){const o=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,r,s);this.eventListeners.push(o)}off(e){let r,s;nr.isNullOrUndefined(e)?(r=[],s=this.eventListeners):(r=this.eventListeners.filter(o=>o.eventName!==e),s=this.eventListeners.filter(o=>o.eventName===e));for(const o of s)this.eventListenerHelper.detachEventListener(o);this.eventListeners=r}isRefDestroyed(){return nr.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(r){return new(r||i)(n.GI1(n.GMv),n.GI1(n.q87),n.GI1(n.kD9))};static \u0275dir=n.Sc5({type:i,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(r,s){2&r&&n.m4B("opacity",s.opacity)("visibility",s.visibility)("left",s.left)("bottom",s.bottom)("height",s.height)("width",s.width)("transform",s.transform)}})}return i})(),cE=(()=>{class i extends m_{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}constructor(e,r,s){super(e,r,s)}static \u0275fac=function(r){return new(r||i)(n.GI1(n.GMv),n.GI1(n.q87),n.GI1(n.kD9))};static \u0275dir=n.Sc5({type:i,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(r,s){2&r&&(n.e48("role",s.role)("tabindex",s.tabindex)("aria-orientation",s.ariaOrientation)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledBy)("aria-valuenow",s.ariaValueNow)("aria-valuetext",s.ariaValueText)("aria-valuemin",s.ariaValueMin)("aria-valuemax",s.ariaValueMax),n.eAK("ngx-slider-active",s.active))},features:[n.eg9]})}return i})(),V1=(()=>{class i extends m_{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(e,r,s,o){super(e,r,s),this.allowUnsafeHtmlInSlider=o}setValue(e){let r=!1;!this.alwaysHide&&(nr.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&0===this.dimension)&&(r=!0),this._value=e,!1===this.allowUnsafeHtmlInSlider?this.elemRef.nativeElement.innerText=e:this.elemRef.nativeElement.innerHTML=e,r&&this.calculateDimension()}static \u0275fac=function(r){return new(r||i)(n.GI1(n.GMv),n.GI1(n.q87),n.GI1(n.kD9),n.GI1(MD,8))};static \u0275dir=n.Sc5({type:i,selectors:[["","ngxSliderLabel",""]],features:[n.eg9]})}return i})(),CV=(()=>{class i{template;tooltip;placement;content;static \u0275fac=function(r){return new(r||i)};static \u0275cmp=n.In1({type:i,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(r,s){1&r&&n.yuY(0,iV,2,6,"ng-container",0)(1,nV,3,3,"ng-container",0),2&r&&(n.E7m("ngIf",s.template),n.yG2(),n.E7m("ngIf",!s.template))},dependencies:[Re.u_,Re.XV],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return i})();class EV{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null}class LD{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0}class tC{value;highValue;static compare(t,e){return!(nr.isNullOrUndefined(t)&&nr.isNullOrUndefined(e)||nr.isNullOrUndefined(t)!==nr.isNullOrUndefined(e))&&t.value===e.value&&t.highValue===e.highValue}}class PD extends tC{forceChange;static compare(t,e){return!(nr.isNullOrUndefined(t)&&nr.isNullOrUndefined(e)||nr.isNullOrUndefined(t)!==nr.isNullOrUndefined(e))&&t.value===e.value&&t.highValue===e.highValue&&t.forceChange===e.forceChange}}const kV={provide:j.Y6,useExisting:(0,n.wd)(()=>TV),multi:!0};let TV=(()=>{class i{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;value=null;valueChange=new n._w7;highValue=null;highValueChange=new n._w7;options=new eC;userChangeStart=new n._w7;userChange=new n._w7;userChangeEnd=new n._w7;manualRefreshSubscription;set manualRefresh(e){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(e){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(r=>{this.focusPointer(r)})}get range(){return!nr.isNullOrUndefined(this.value)&&!nr.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new w.E;inputModelChangeSubscription=null;outputModelChangeSubject=new w.E;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new eC;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new LD;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(e,r,s,o,f){this.renderer=e,this.elementRef=r,this.changeDetectionRef=s,this.zone=o,this.allowUnsafeHtmlInSlider=f,this.eventListenerHelper=new RD(this.renderer)}ngOnInit(){this.viewOptions=new eC,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(e){!nr.isNullOrUndefined(e.options)&&JSON.stringify(e.options.previousValue)!==JSON.stringify(e.options.currentValue)&&this.onChangeOptions(),(!nr.isNullOrUndefined(e.value)||!nr.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.viewOptions.disabled=e,this.updateDisabledState()}setAriaLabel(e){this.viewOptions.ariaLabel=e,this.updateAriaLabel()}onResize(e){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,wD.a)(PD.compare),(0,CD.I)(e=>!e.forceChange&&!e.internalChange)).subscribe(e=>this.applyInputModelChange(e))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,wD.a)(PD.compare)).subscribe(e=>this.publishOutputModelChange(e))}subscribeResizeObserver(){p_.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){p_.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){nr.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){nr.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){nr.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){nr.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){nr.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){nr.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(e){return e===ps.Min?this.minHandleElement:e===ps.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===ps.Min?this.viewLowValue:this.currentTrackingPointer===ps.Max?this.viewHighValue:null}modelValueToViewValue(e){return nr.isNullOrUndefined(e)?NaN:nr.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+e:nr.findStepIndex(+e,this.viewOptions.stepsArray)}viewValueToModelValue(e){return nr.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?e:this.getStepValue(e)}getStepValue(e){const r=this.viewOptions.stepsArray[e];return nr.isNullOrUndefined(r)?NaN:r.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(e){const r=this.normaliseModelValues(e),s=!tC.compare(e,r);s&&(this.value=r.value,this.highValue=r.highValue),this.viewLowValue=this.modelValueToViewValue(r.value),this.viewHighValue=this.range?this.modelValueToViewValue(r.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:r.value,highValue:r.highValue,forceChange:s,userEventInitiated:!1})}publishOutputModelChange(e){const r=()=>{this.valueChange.emit(e.value),this.range&&this.highValueChange.emit(e.highValue),nr.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[e.value,e.highValue]:e.value),nr.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[e.value,e.highValue]:e.value)};e.userEventInitiated?(r(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{r()})}normaliseModelValues(e){const r=new tC;if(r.value=e.value,r.highValue=e.highValue,!nr.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const s=nr.findStepIndex(r.value,this.viewOptions.stepsArray);if(r.value=this.viewOptions.stepsArray[s].value,this.range){const o=nr.findStepIndex(r.highValue,this.viewOptions.stepsArray);r.highValue=this.viewOptions.stepsArray[o].value}}return r}if(this.viewOptions.enforceStep&&(r.value=this.roundStep(r.value),this.range&&(r.highValue=this.roundStep(r.highValue))),this.viewOptions.enforceRange&&(r.value=Uu.clampToRange(r.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(r.highValue=Uu.clampToRange(r.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue))if(this.viewOptions.noSwitching)r.value=r.highValue;else{const s=e.value;r.value=e.highValue,r.highValue=s}return r}renormaliseModelValues(){const e={value:this.value,highValue:this.highValue},r=this.normaliseModelValues(e);tC.compare(r,e)||(this.value=r.value,this.highValue=r.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const e=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const r=this.getOptionsInfluencingEventBindings(this.viewOptions),s=!nr.areArraysEqual(e,r);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(s)}applyOptions(){if(this.viewOptions=new eC,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!nr.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!nr.isNullOrUndefined(this.viewOptions.tickStep)||!nr.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),nr.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),nr.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(e,r)=>e+" - "+r),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,nr.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(e):e))}applyFloorCeilOptions(){if(nr.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),nr.isNullOrUndefined(this.viewOptions.ceil)||nr.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,nr.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(e))}resetSlider(e=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),e&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions()}focusPointer(e){e!==ps.Min&&e!==ps.Max&&(e=ps.Min),e===ps.Min?this.minHandleElement.focus():this.range&&e===ps.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){nr.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const e=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(e||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const e of this.getAllSliderElements())nr.isNullOrUndefined(e)||e.setVertical(this.viewOptions.vertical)}updateScale(){for(const e of this.getAllSliderElements())e.setScale(this.viewOptions.scale)}updateRotate(){for(const e of this.getAllSliderElements())e.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",nr.isNullOrUndefined(this.viewOptions.ariaLabel)?nr.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",nr.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?nr.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,t0.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,t0.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){nr.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,nr.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const e=nr.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,r=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&e.reverse();const s=nr.isNullOrUndefined(this.viewOptions.tickValueStep)?nr.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let o=!1;const f=e.map(g=>{let A=this.valueToPosition(g);this.viewOptions.vertical&&(A=this.maxHandlePosition-A);const P=r+"("+Math.round(A)+"px)",z=new EV;z.selected=this.isTickSelected(g),z.style={"-webkit-transform":P,"-moz-transform":P,"-o-transform":P,"-ms-transform":P,transform:P},z.selected&&!nr.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(z.style["background-color"]=this.getSelectionBarColor()),!z.selected&&!nr.isNullOrUndefined(this.viewOptions.getTickColor)&&(z.style["background-color"]=this.getTickColor(g)),nr.isNullOrUndefined(this.viewOptions.ticksTooltip)||(z.tooltip=this.viewOptions.ticksTooltip(g),z.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!nr.isNullOrUndefined(s)&&Uu.isModuloWithinPrecisionLimit(g,s,this.viewOptions.precisionLimit)&&(z.value=this.getDisplayValue(g,t0.TickValue),nr.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(z.valueTooltip=this.viewOptions.ticksValuesTooltip(g),z.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let ie=null;if(nr.isNullOrUndefined(this.viewOptions.stepsArray))nr.isNullOrUndefined(this.viewOptions.getLegend)||(ie=this.viewOptions.getLegend(g));else{const se=this.viewOptions.stepsArray[g];nr.isNullOrUndefined(this.viewOptions.getStepLegend)?nr.isNullOrUndefined(se)||(ie=se.legend):ie=this.viewOptions.getStepLegend(se)}return nr.isNullOrUndefined(ie)||(z.legend=ie,o=!0),z});if(this.sliderElementWithLegendClass!==o&&setTimeout(()=>{this.sliderElementWithLegendClass=o}),nr.isNullOrUndefined(this.ticks)||this.ticks.length!==f.length)this.ticks=f,this.isRefDestroyed()||this.changeDetectionRef.detectChanges();else for(let g=0;g<f.length;++g)Object.assign(this.ticks[g],f[g])}getTicksArray(){const e=nr.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,r=[],s=1+Math.floor(Uu.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/e,this.viewOptions.precisionLimit));for(let o=0;o<s;++o)r.push(Uu.roundToPrecisionLimit(this.viewOptions.floor+e*o,this.viewOptions.precisionLimit));return r}isTickSelected(e){if(!this.range)if(nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{const r=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>r&&e>=r&&e<=this.viewLowValue)return!0;if(this.viewLowValue<r&&e<=r&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,t0.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,t0.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(e,r){e===ps.Min?this.updateLowHandle(r):e===ps.Max&&this.updateHighHandle(r),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(e,r){const s=e===ps.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,o=r-s/2+this.handleHalfDimension,f=this.fullBarElement.dimension-s;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===ps.Min||!this.viewOptions.rightToLeft&&e===ps.Max?Math.min(o,f):Math.min(Math.max(o,0),f):o}updateLowHandle(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,t0.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(ps.Min,e)),nr.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(ps.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,t0.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(ps.Max,e)),nr.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(ps.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let e=!1,r=!1;const s=this.isLabelBelowFloorLabel(this.minHandleLabelElement),o=this.isLabelAboveCeilLabel(this.minHandleLabelElement),f=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),g=this.isLabelBelowFloorLabel(this.combinedLabelElement),A=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(s?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),o?(r=!0,this.ceilLabelElement.hide()):(r=!1,this.ceilLabelElement.show()),this.range){const P=this.combinedLabelElement.isVisible()?A:f,z=this.combinedLabelElement.isVisible()?g:s;P?this.ceilLabelElement.hide():r||this.ceilLabelElement.show(),z?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}isLabelBelowFloorLabel(e){const r=e.position,o=this.floorLabelElement.position;return this.viewOptions.rightToLeft?r+e.dimension>=o-2:r<=o+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(e){const r=e.position,o=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?r<=o+this.ceilLabelElement.dimension+2:r+e.dimension>=o-2}updateSelectionBar(){let e=0,r=0;const s=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,o=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)r=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=o;else if(nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))s?(r=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(r=this.minHandleElement.position+this.handleHalfDimension,e=0);else{const f=this.viewOptions.showSelectionBarFromValue,g=this.valueToPosition(f);(this.viewOptions.rightToLeft?this.viewLowValue<=f:this.viewLowValue>f)?(r=this.minHandleElement.position-g,e=g+this.handleHalfDimension):(r=g-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(r),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+r)),this.leftOuterSelectionBarElement.setPosition(e+r)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+r)),this.rightOuterSelectionBarElement.setPosition(e+r))),nr.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!nr.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const f=nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),g=f-e>0&&!s||f-e<=0&&s;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?g?"bottom":"top":g?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(f+r+e+(g?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=f-e+(g?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const f=this.getSelectionBarColor();this.barStyle={backgroundColor:f}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(e){return this.viewOptions.getPointerColor(e===ps.Max?this.highValue:this.value,e)}getTickColor(e){return this.viewOptions.getTickColor(e)}updateCombinedLabel(){let e=null;if(e=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,e){const r=this.getDisplayValue(this.viewLowValue,t0.Low),s=this.getDisplayValue(this.viewHighValue,t0.High),o=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(s,r):this.viewOptions.combineLabels(r,s);this.combinedLabelElement.setValue(o);const f=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(f),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(e,r){return!nr.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,r)}roundStep(e,r){const s=nr.isNullOrUndefined(r)?this.viewOptions.step:r;let o=Uu.roundToPrecisionLimit((e-this.viewOptions.floor)/s,this.viewOptions.precisionLimit);return o=Math.round(o)*s,Uu.roundToPrecisionLimit(this.viewOptions.floor+o,this.viewOptions.precisionLimit)}valueToPosition(e){let r=nr.linearValueToPosition;nr.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(r=nr.logValueToPosition):r=this.viewOptions.customValueToPosition;let s=r(e=Uu.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return nr.isNullOrUndefined(s)&&(s=0),this.viewOptions.rightToLeft&&(s=1-s),s*this.maxHandlePosition}positionToValue(e){let r=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(r=1-r);let s=nr.linearPositionToValue;nr.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(s=nr.logPositionToValue):s=this.viewOptions.customPositionToValue;const o=s(r,this.viewOptions.floor,this.viewOptions.ceil);return nr.isNullOrUndefined(o)?0:o}getEventXY(e,r){if(e instanceof MouseEvent)return this.viewOptions.vertical||0!==this.viewOptions.rotate?e.clientY:e.clientX;let s=0;const o=e.touches;if(!nr.isNullOrUndefined(r))for(let f=0;f<o.length;f++)if(o[f].identifier===r){s=f;break}return this.viewOptions.vertical||0!==this.viewOptions.rotate?o[s].clientY:o[s].clientX}getEventPosition(e,r){const s=this.elementRef.nativeElement.getBoundingClientRect(),o=this.viewOptions.vertical||0!==this.viewOptions.rotate?s.bottom:s.left;let f=0;return f=this.viewOptions.vertical||0!==this.viewOptions.rotate?-this.getEventXY(e,r)+o:this.getEventXY(e,r)-o,f*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(e){if(!this.range)return ps.Min;const r=this.getEventPosition(e),s=Math.abs(r-this.minHandleElement.position),o=Math.abs(r-this.maxHandleElement.position);return s<o?ps.Min:s>o?ps.Max:this.viewOptions.rightToLeft?r>this.minHandleElement.position?ps.Min:ps.Max:r<this.minHandleElement.position?ps.Min:ps.Max}bindEvents(){const e=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",r=>this.onBarStart(null,e,r,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",r=>this.onBarStart(ps.Min,e,r,!0,!0)),this.maxHandleElement.on("mousedown",r=>this.onBarStart(ps.Max,e,r,!0,!0))):(this.minHandleElement.on("mousedown",r=>this.onStart(ps.Min,r,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",r=>this.onStart(ps.Max,r,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",r=>this.onStart(null,r,!0,!0,!0)),this.ticksElement.on("mousedown",r=>this.onStart(null,r,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",r=>this.onBarStart(null,e,r,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",r=>this.onBarStart(ps.Min,e,r,!0,!0)),this.maxHandleElement.onPassive("touchstart",r=>this.onBarStart(ps.Max,e,r,!0,!0))):(this.minHandleElement.onPassive("touchstart",r=>this.onStart(ps.Min,r,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",r=>this.onStart(ps.Max,r,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",r=>this.onStart(null,r,!0,!0,!0)),this.ticksElement.onPassive("touchstart",r=>this.onStart(null,r,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(ps.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(ps.Max)))}getOptionsInfluencingEventBindings(e){return[e.disabled,e.readOnly,e.draggableRange,e.draggableRangeOnly,e.onlyBindHandles,e.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const e of this.getAllSliderElements())nr.isNullOrUndefined(e)||e.off()}onBarStart(e,r,s,o,f,g,A){r?this.onDragStart(e,s,o,f):this.onStart(e,s,o,f,g,A)}onStart(e,r,s,o,f,g){r.stopPropagation(),!p_.isTouchEvent(r)&&!TD&&r.preventDefault(),this.moving=!1,this.calculateViewDimensions(),nr.isNullOrUndefined(e)&&(e=this.getNearestHandle(r)),this.currentTrackingPointer=e;const A=this.getPointerElement(e);if(A.active=!0,this.viewOptions.keyboardSupport&&A.focus(),s){this.unsubscribeOnMove();const P=z=>this.dragging.active?this.onDragMove(z):this.onMove(z);this.onMoveEventListener=p_.isTouchEvent(r)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",P):this.eventListenerHelper.attachEventListener(document,"mousemove",P)}if(o){this.unsubscribeOnEnd();const P=z=>this.onEnd(z);this.onEndEventListener=p_.isTouchEvent(r)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",P):this.eventListenerHelper.attachEventListener(document,"mouseup",P)}this.userChangeStart.emit(this.getChangeContext()),p_.isTouchEvent(r)&&!nr.isNullOrUndefined(r.changedTouches)&&nr.isNullOrUndefined(this.touchId)&&(this.touchId=r.changedTouches[0].identifier),f&&this.onMove(r,!0),g&&this.onEnd(r)}onMove(e,r){let s=null;if(p_.isTouchEvent(e)){const P=e.changedTouches;for(let z=0;z<P.length;z++)if(P[z].identifier===this.touchId){s=P[z];break}if(nr.isNullOrUndefined(s))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const o=nr.isNullOrUndefined(s)?this.getEventPosition(e):this.getEventPosition(e,s.identifier);let f;o<=0?f=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:o>=this.maxHandlePosition?f=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(f=this.positionToValue(o),f=r&&!nr.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(f,this.viewOptions.tickStep):this.roundStep(f)),this.positionTrackingHandle(f)}onEnd(e){p_.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(e){const r=this.getPointerElement(e);r.on("blur",()=>this.onPointerBlur(r)),r.on("keydown",s=>this.onKeyboardEvent(s)),r.on("keyup",()=>this.onKeyUp()),r.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,nr.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(e){const r=this.viewOptions.ceil-this.viewOptions.floor;let s=e+this.viewOptions.step,o=e-this.viewOptions.step,f=e+r/10,g=e-r/10;this.viewOptions.reversedControls&&(s=e-this.viewOptions.step,o=e+this.viewOptions.step,f=e-r/10,g=e+r/10);const A={UP:s,DOWN:o,LEFT:o,RIGHT:s,PAGEUP:f,PAGEDOWN:g,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(A.LEFT=s,A.RIGHT=o,(this.viewOptions.vertical||0!==this.viewOptions.rotate)&&(A.UP=o,A.DOWN=s)),A}onKeyboardEvent(e){const r=this.getCurrentTrackingValue(),s=nr.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,A=this.getKeyActions(r)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[s]];if(nr.isNullOrUndefined(A)||nr.isNullOrUndefined(this.currentTrackingPointer))return;e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const P=Uu.clampToRange(A,this.viewOptions.floor,this.viewOptions.ceil),z=this.roundStep(P);if(this.viewOptions.draggableRangeOnly){const ie=this.viewHighValue-this.viewLowValue;let se,oe;this.currentTrackingPointer===ps.Min?(se=z,oe=z+ie,oe>this.viewOptions.ceil&&(oe=this.viewOptions.ceil,se=oe-ie)):this.currentTrackingPointer===ps.Max&&(oe=z,se=z-ie,se<this.viewOptions.floor&&(se=this.viewOptions.floor,oe=se+ie)),this.positionTrackingBar(se,oe)}else this.positionTrackingHandle(z)}onDragStart(e,r,s,o){const f=this.getEventPosition(r);this.dragging=new LD,this.dragging.active=!0,this.dragging.value=this.positionToValue(f),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-f:f-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?f-this.maxHandleElement.position:this.maxHandleElement.position-f,this.onStart(e,r,s,o)}getMinValue(e,r,s){const o=this.viewOptions.rightToLeft;let f=null;return f=r?s?o?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:o?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(o?e+this.dragging.lowLimit:e-this.dragging.lowLimit),this.roundStep(f)}getMaxValue(e,r,s){const o=this.viewOptions.rightToLeft;let f=null;return f=r?s?o?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:o?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:o?this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(f)}onDragMove(e){const r=this.getEventPosition(e);let s,o,f,g;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(s=this.dragging.lowLimit,o=this.dragging.highLimit,f=this.maxHandleElement,g=this.minHandleElement):(s=this.dragging.highLimit,o=this.dragging.lowLimit,f=this.minHandleElement,g=this.maxHandleElement);const P=r>=this.maxHandlePosition-s;let z,ie;if(r<=o){if(0===f.position)return;z=this.getMinValue(r,!0,!1),ie=this.getMaxValue(r,!0,!1)}else if(P){if(g.position===this.maxHandlePosition)return;ie=this.getMaxValue(r,!0,!0),z=this.getMinValue(r,!0,!0)}else z=this.getMinValue(r,!1,!1),ie=this.getMaxValue(r,!1,!1);this.positionTrackingBar(z,ie)}positionTrackingBar(e,r){!nr.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(r=Uu.roundToPrecisionLimit((e=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!nr.isNullOrUndefined(this.viewOptions.maxLimit)&&r>this.viewOptions.maxLimit&&(e=Uu.roundToPrecisionLimit((r=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=r,this.applyViewChange(),this.updateHandles(ps.Min,this.valueToPosition(e)),this.updateHandles(ps.Max,this.valueToPosition(r))}positionTrackingHandle(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===ps.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===ps.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===ps.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(ps.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=ps.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===ps.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(ps.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=ps.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===ps.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===ps.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}applyMinMaxLimit(e){return!nr.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!nr.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}applyMinMaxRange(e){const s=Math.abs(e-(this.currentTrackingPointer===ps.Min?this.viewHighValue:this.viewLowValue));if(!nr.isNullOrUndefined(this.viewOptions.minRange)&&s<this.viewOptions.minRange){if(this.currentTrackingPointer===ps.Min)return Uu.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===ps.Max)return Uu.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!nr.isNullOrUndefined(this.viewOptions.maxRange)&&s>this.viewOptions.maxRange){if(this.currentTrackingPointer===ps.Min)return Uu.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===ps.Max)return Uu.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}applyPushRange(e){const r=this.currentTrackingPointer===ps.Min?this.viewHighValue-e:e-this.viewLowValue,s=nr.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,o=this.viewOptions.maxRange;return r<s?(this.currentTrackingPointer===ps.Min?(this.viewHighValue=Uu.roundToPrecisionLimit(Math.min(e+s,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=Uu.roundToPrecisionLimit(this.viewHighValue-s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ps.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===ps.Max&&(this.viewLowValue=Uu.roundToPrecisionLimit(Math.max(e-s,this.viewOptions.floor),this.viewOptions.precisionLimit),e=Uu.roundToPrecisionLimit(this.viewLowValue+s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ps.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!nr.isNullOrUndefined(o)&&r>o&&(this.currentTrackingPointer===ps.Min?(this.viewHighValue=Uu.roundToPrecisionLimit(e+o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ps.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===ps.Max&&(this.viewLowValue=Uu.roundToPrecisionLimit(e-o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ps.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}getChangeContext(){const e=new wV;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}static \u0275fac=function(r){return new(r||i)(n.GI1(n.q87),n.GI1(n.GMv),n.GI1(n.kD9),n.GI1(n.WW2),n.GI1(MD,8))};static \u0275cmp=n.In1({type:i,selectors:[["ngx-slider"]],contentQueries:function(r,s,o){if(1&r&&n.szK(o,rV,5),2&r){let f;n.wto(f=n.Gqi())&&(s.tooltipTemplate=f.first)}},viewQuery:function(r,s){if(1&r&&(n.CC$(sV,5,m_),n.CC$(aV,5,m_),n.CC$(oV,5,m_),n.CC$(lV,5,m_),n.CC$(cV,5,cE),n.CC$(uV,5,cE),n.CC$(hV,5,V1),n.CC$(dV,5,V1),n.CC$(fV,5,V1),n.CC$(pV,5,V1),n.CC$(mV,5,V1),n.CC$(gV,5,m_)),2&r){let o;n.wto(o=n.Gqi())&&(s.leftOuterSelectionBarElement=o.first),n.wto(o=n.Gqi())&&(s.rightOuterSelectionBarElement=o.first),n.wto(o=n.Gqi())&&(s.fullBarElement=o.first),n.wto(o=n.Gqi())&&(s.selectionBarElement=o.first),n.wto(o=n.Gqi())&&(s.minHandleElement=o.first),n.wto(o=n.Gqi())&&(s.maxHandleElement=o.first),n.wto(o=n.Gqi())&&(s.floorLabelElement=o.first),n.wto(o=n.Gqi())&&(s.ceilLabelElement=o.first),n.wto(o=n.Gqi())&&(s.minHandleLabelElement=o.first),n.wto(o=n.Gqi())&&(s.maxHandleLabelElement=o.first),n.wto(o=n.Gqi())&&(s.combinedLabelElement=o.first),n.wto(o=n.Gqi())&&(s.ticksElement=o.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(r,s){1&r&&n.qCj("resize",function(f){return s.onResize(f)},!1,n.MbM),2&r&&(n.e48("disabled",s.sliderElementDisabledAttr)("aria-label",s.sliderElementAriaLabel),n.eAK("vertical",s.sliderElementVerticalClass)("animate",s.sliderElementAnimateClass)("with-legend",s.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[n.M5G([kV]),n.SYr],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(r,s){1&r&&(n.I0R(0,"span",0,1),n.wR5(2,"span",2),n.C$Y(),n.I0R(3,"span",3,4),n.wR5(5,"span",2),n.C$Y(),n.I0R(6,"span",5,6),n.wR5(8,"span",2),n.C$Y(),n.I0R(9,"span",7,8),n.wR5(11,"span",9),n.C$Y(),n.wR5(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),n.I0R(26,"span",24,25),n.yuY(28,bV,5,10,"span",26),n.C$Y()),2&r&&(n.yG2(6),n.eAK("ngx-slider-transparent",s.fullBarTransparentClass),n.yG2(3),n.eAK("ngx-slider-draggable",s.selectionBarDraggableClass),n.yG2(2),n.E7m("ngStyle",s.barStyle),n.yG2(),n.E7m("ngStyle",s.minPointerStyle),n.yG2(2),n.m4B("display",s.range?"inherit":"none"),n.E7m("ngStyle",s.maxPointerStyle),n.yG2(12),n.eAK("ngx-slider-ticks-values-under",s.ticksUnderValuesClass),n.E7m("hidden",!s.showTicks),n.yG2(2),n.E7m("ngForOf",s.ticks))},dependencies:[Re.QF,Re.ay,Re.u_,Re.Qt,m_,cE,V1,CV],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}'],changeDetection:0})}return i})(),SV=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=n.a4G({type:i});static \u0275inj=n.s3X({imports:[Re.MD]})}return i})(),AV=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=n.a4G({type:i});static \u0275inj=n.s3X({imports:[Re.MD]})}return i})();Qt(9400);var _y=Qt(6764),U1=Qt(2780);const ND=function OV(i,t){return function(e){return i(t(e))}};ND(Object.getPrototypeOf,Object),Function.prototype.toString.call(Object);const GD=function UV(i,t){return i===t||i!=i&&t!=t},iC=function jV(i,t){for(var e=i.length;e--;)if(GD(i[e][0],t))return e;return-1};var $V=Array.prototype.splice;function j1(i){var t=-1,e=null==i?0:i.length;for(this.clear();++t<e;){var r=i[t];this.set(r[0],r[1])}}j1.prototype.clear=function HV(){this.__data__=[],this.size=0},j1.prototype.delete=function XV(i){var t=this.__data__,e=iC(t,i);return!(e<0||(e==t.length-1?t.pop():$V.call(t,e,1),--this.size,0))},j1.prototype.get=function qV(i){var t=this.__data__,e=iC(t,i);return e<0?void 0:t[e][1]},j1.prototype.has=function JV(i){return iC(this.__data__,i)>-1},j1.prototype.set=function eU(i,t){var e=this.__data__,r=iC(e,i);return r<0?(++this.size,e.push([i,t])):e[r][1]=t,this};const nC=j1;var Ib=Qt(4556);var i,mv=Qt(7616),mU=mv.c["__core-js_shared__"],VD=(i=/[^.]+$/.exec(mU&&mU.keys&&mU.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";var yU=Function.prototype.toString;const yy=function xU(i){if(null!=i){try{return yU.call(i)}catch{}try{return i+""}catch{}}return""};var wU=/^\[object .+?Constructor\]$/,SU=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const DU=function AU(i){return!(!(0,Ib.c)(i)||function gU(i){return!!VD&&VD in i}(i))&&(function pU(i){if(!(0,Ib.c)(i))return!1;var t=(0,U1.c)(i);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(i)?SU:wU).test(yy(i))},xy=function OU(i,t){var e=function IU(i,t){return i?.[t]}(i,t);return DU(e)?e:void 0},Mb=xy(mv.c,"Map"),Ob=xy(Object,"create");var GU=Object.prototype.hasOwnProperty;var jU=Object.prototype.hasOwnProperty;function W1(i){var t=-1,e=null==i?0:i.length;for(this.clear();++t<e;){var r=i[t];this.set(r[0],r[1])}}W1.prototype.clear=function PU(){this.__data__=Ob?Ob(null):{},this.size=0},W1.prototype.delete=function BU(i){var t=this.has(i)&&delete this.__data__[i];return this.size-=t?1:0,t},W1.prototype.get=function HU(i){var t=this.__data__;if(Ob){var e=t[i];return"__lodash_hash_undefined__"===e?void 0:e}return GU.call(t,i)?t[i]:void 0},W1.prototype.has=function WU(i){var t=this.__data__;return Ob?void 0!==t[i]:jU.call(t,i)},W1.prototype.set=function ZU(i,t){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=Ob&&void 0===t?"__lodash_hash_undefined__":t,this};const UD=W1,rC=function t9(i,t){var e=i.__data__;return function QU(i){var t=typeof i;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==i:null===i}(t)?e["string"==typeof t?"string":"hash"]:e.map};function $1(i){var t=-1,e=null==i?0:i.length;for(this.clear();++t<e;){var r=i[t];this.set(r[0],r[1])}}$1.prototype.clear=function KU(){this.size=0,this.__data__={hash:new UD,map:new(Mb||nC),string:new UD}},$1.prototype.delete=function i9(i){var t=rC(this,i).delete(i);return this.size-=t?1:0,t},$1.prototype.get=function r9(i){return rC(this,i).get(i)},$1.prototype.has=function a9(i){return rC(this,i).has(i)},$1.prototype.set=function l9(i,t){var e=rC(this,i),r=e.size;return e.set(i,t),this.size+=e.size==r?0:1,this};const u9=$1;function X1(i){var t=this.__data__=new nC(i);this.size=t.size}X1.prototype.clear=function iU(){this.__data__=new nC,this.size=0},X1.prototype.delete=function rU(i){var t=this.__data__,e=t.delete(i);return this.size=t.size,e},X1.prototype.get=function aU(i){return this.__data__.get(i)},X1.prototype.has=function lU(i){return this.__data__.has(i)},X1.prototype.set=function d9(i,t){var e=this.__data__;if(e instanceof nC){var r=e.__data__;if(!Mb||r.length<199)return r.push([i,t]),this.size=++e.size,this;e=this.__data__=new u9(r)}return e.set(i,t),this.size=e.size,this},function(){try{var i=xy(Object,"defineProperty");return i({},"",{}),i}catch{}}();!function T9(i){(0,_y.c)(i)&&(0,U1.c)(i)}(function(){return arguments}()),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;var hc={};hc["[object Float32Array]"]=hc["[object Float64Array]"]=hc["[object Int8Array]"]=hc["[object Int16Array]"]=hc["[object Int32Array]"]=hc["[object Uint8Array]"]=hc["[object Uint8ClampedArray]"]=hc["[object Uint16Array]"]=hc["[object Uint32Array]"]=!0,hc["[object Arguments]"]=hc["[object Array]"]=hc["[object ArrayBuffer]"]=hc["[object Boolean]"]=hc["[object DataView]"]=hc["[object Date]"]=hc["[object Error]"]=hc["[object Function]"]=hc["[object Map]"]=hc["[object Number]"]=hc["[object Object]"]=hc["[object RegExp]"]=hc["[object Set]"]=hc["[object String]"]=hc["[object WeakMap]"]=!1;const pE=function mj(i){return function(t){return i(t)}};var gj=Qt(8616),tI="object"==typeof exports&&exports&&!exports.nodeType&&exports,Rb=tI&&"object"==typeof module&&module&&!module.nodeType&&module,mE=Rb&&Rb.exports===tI&&gj.c.process;const Z1=function(){try{return Rb&&Rb.require&&Rb.require("util").types||mE&&mE.binding&&mE.binding("util")}catch{}}();var iI=Z1&&Z1.isTypedArray;iI&&pE(iI),ND(Object.keys,Object),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;const xE=xy(mv.c,"DataView"),bE=xy(mv.c,"Promise"),wE=xy(mv.c,"Set"),CE=xy(mv.c,"WeakMap");var pI="[object Map]",mI="[object Promise]",gI="[object Set]",vI="[object WeakMap]",_I="[object DataView]",yW=yy(xE),xW=yy(Mb),bW=yy(bE),wW=yy(wE),CW=yy(CE),by=U1.c;(xE&&by(new xE(new ArrayBuffer(1)))!=_I||Mb&&by(new Mb)!=pI||bE&&by(bE.resolve())!=mI||wE&&by(new wE)!=gI||CE&&by(new CE)!=vI)&&(by=function(i){var t=(0,U1.c)(i),e="[object Object]"==t?i.constructor:void 0,r=e?yy(e):"";if(r)switch(r){case yW:return _I;case xW:return pI;case bW:return mI;case wW:return gI;case CW:return vI}return t});Qt(312);var EI=Z1&&Z1.isMap;EI&&pE(EI);var kI=Z1&&Z1.isSet;kI&&pE(kI);var Wl={};Wl["[object Arguments]"]=Wl["[object Array]"]=Wl["[object ArrayBuffer]"]=Wl["[object DataView]"]=Wl["[object Boolean]"]=Wl["[object Date]"]=Wl["[object Float32Array]"]=Wl["[object Float64Array]"]=Wl["[object Int8Array]"]=Wl["[object Int16Array]"]=Wl["[object Int32Array]"]=Wl["[object Map]"]=Wl["[object Number]"]=Wl["[object Object]"]=Wl["[object RegExp]"]=Wl["[object Set]"]=Wl["[object String]"]=Wl["[object Symbol]"]=Wl["[object Uint8Array]"]=Wl["[object Uint8ClampedArray]"]=Wl["[object Uint16Array]"]=Wl["[object Uint32Array]"]=!0,Wl["[object Error]"]=Wl["[object Function]"]=Wl["[object WeakMap]"]=!1,Symbol("MainQueueId"),new Array(256).fill(0).map((i,t)=>("0"+t.toString(16)).slice(-2));let eX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.a4G({type:i}),i.\u0275inj=n.s3X({imports:[[j.y,Re.MD]]}),i})();Qt(1472);var II=Qt(2164);window.ApexCharts=II;let rX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.a4G({type:i}),i.\u0275inj=n.s3X({}),i})();Qt(9216);let sX=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({})}return i})();var MI=Qt(800),OI=Qt(3616),aX=Qt(5084),oX=Qt(4704),lX=Qt(6700),cX=Qt(7368),uX=Qt(8716);const oC=()=>{const i=typeof window<"u"?window:void 0;return i&&i.tinymce?i.tinymce:null};let hX=(()=>{class i{onBeforePaste=new n._w7;onBlur=new n._w7;onClick=new n._w7;onCompositionEnd=new n._w7;onCompositionStart=new n._w7;onCompositionUpdate=new n._w7;onContextMenu=new n._w7;onCopy=new n._w7;onCut=new n._w7;onDblclick=new n._w7;onDrag=new n._w7;onDragDrop=new n._w7;onDragEnd=new n._w7;onDragGesture=new n._w7;onDragOver=new n._w7;onDrop=new n._w7;onFocus=new n._w7;onFocusIn=new n._w7;onFocusOut=new n._w7;onKeyDown=new n._w7;onKeyPress=new n._w7;onKeyUp=new n._w7;onMouseDown=new n._w7;onMouseEnter=new n._w7;onMouseLeave=new n._w7;onMouseMove=new n._w7;onMouseOut=new n._w7;onMouseOver=new n._w7;onMouseUp=new n._w7;onPaste=new n._w7;onSelectionChange=new n._w7;onActivate=new n._w7;onAddUndo=new n._w7;onBeforeAddUndo=new n._w7;onBeforeExecCommand=new n._w7;onBeforeGetContent=new n._w7;onBeforeRenderUI=new n._w7;onBeforeSetContent=new n._w7;onChange=new n._w7;onClearUndos=new n._w7;onDeactivate=new n._w7;onDirty=new n._w7;onExecCommand=new n._w7;onGetContent=new n._w7;onHide=new n._w7;onInit=new n._w7;onInput=new n._w7;onInitNgModel=new n._w7;onLoadContent=new n._w7;onNodeChange=new n._w7;onPostProcess=new n._w7;onPostRender=new n._w7;onPreInit=new n._w7;onPreProcess=new n._w7;onProgressState=new n._w7;onRedo=new n._w7;onRemove=new n._w7;onReset=new n._w7;onResizeEditor=new n._w7;onSaveContent=new n._w7;onSetAttrib=new n._w7;onObjectResizeStart=new n._w7;onObjectResized=new n._w7;onObjectSelected=new n._w7;onSetContent=new n._w7;onShow=new n._w7;onSubmit=new n._w7;onUndo=new n._w7;onVisualAid=new n._w7;static \u0275fac=function(r){return new(r||i)};static \u0275dir=n.Sc5({type:i,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInput:"onInput",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}})}return i})();const RI=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],lC=(i,t,e)=>(0,MI.w)(i,t).pipe((0,OI.a)(e)),LI=(i,t)=>"string"==typeof i?i.split(",").map(e=>e.trim()):Array.isArray(i)?i:t;let PI=0;const FI=i=>typeof i<"u"&&"textarea"===i.tagName.toLowerCase(),BI=i=>typeof i>"u"||""===i?[]:Array.isArray(i)?i:i.split(" "),mX=(i,t)=>BI(i).concat(BI(t)),gX=()=>{},NI=i=>null==i,yX=(()=>{const i=new lX.g(null),t=i.pipe((0,CD.I)(Boolean),(0,cX.G)(([e,r])=>{const s=e.createElement("script");return s.referrerPolicy="origin",s.type="application/javascript",s.src=r,e.head.appendChild(s),(0,MI.w)(s,"load").pipe(i=>i.pipe((0,aX.K)(),(0,oX.k)(()=>{})))}),(0,uX.C)({bufferSize:1,refCount:!0}));return{load:(...e)=>(i.getValue()||i.next(e),t),reinitialize:()=>{i.next(null)}}})(),xX=new n.UbH("TINYMCE_SCRIPT_SRC"),bX={provide:j.Y6,useExisting:(0,n.wd)(()=>zI),multi:!0};let zI=(()=>{class i extends hX{cdRef;platformId;tinymceScriptSrc;cloudChannel="7";apiKey="no-api-key";licenseKey;init;id="";initialValue;outputFormat;inline;tagName;plugins;toolbar;modelEvents="change input undo redo";allowedEvents;ignoreEvents;set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}ngZone;_elementRef;_element;_disabled;_editor;onTouchedCallback=gX;onChangeCallback;destroy$=new w.E;constructor(e,r,s,o,f){super(),this.cdRef=s,this.platformId=o,this.tinymceScriptSrc=f,this._elementRef=e,this.ngZone=r}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(NI(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,Re.c0)(this.platformId)&&(this.id=this.id||(i=>{const e=(new Date).getTime(),r=Math.floor(1e9*Math.random());return PI++,"tiny-angular_"+r+PI+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==oC()?this.initialise():this._element&&this._element.ownerDocument&&yX.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,OI.a)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==oC()&&oC().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,FI(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise=()=>{const e={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,license_key:this.licenseKey,plugins:mX(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:r=>{this._editor=r,lC(r,"init",this.destroy$).subscribe(()=>{this.initEditor(r)}),((i,t,e)=>{(i=>{const t=LI(i.ignoreEvents,[]);return LI(i.allowedEvents,RI).filter(r=>RI.includes(r)&&!t.includes(r))})(i).forEach(s=>{const o=i[s];lC(t,s.substring(2),e).subscribe(f=>{(i=>i.observed||i.observers?.length>0)(o)&&i.ngZone.run(()=>o.emit({event:f,editor:t}))})})})(this,r,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(r)}};FI(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{oC().init(e)})};getScriptSrc(){return NI(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){lC(e,"blur",this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.onTouchedCallback())}),lC(e,this.modelEvents,this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}static \u0275fac=function(r){return new(r||i)(n.GI1(n.GMv),n.GI1(n.WW2),n.GI1(n.kD9),n.GI1(n.AHE),n.GI1(xX,8))};static \u0275cmp=n.In1({type:i,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",licenseKey:"licenseKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[n.M5G([bX]),n.eg9,n.UHJ],decls:0,vars:0,template:function(r,s){},dependencies:[Re.MD,j.y],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return i})(),wX=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=n.a4G({type:i});static \u0275inj=n.s3X({imports:[zI]})}return i})();var CX=Qt(2728);let kX=(()=>{class i{static forRoot(){return{ngModule:i,providers:[]}}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({imports:[Re.MD]})}return i})();var TX=Qt(8987);function SX(i,t){1&i&&n.OEk(0),2&i&&n.cNF(t.index<t.value?"\u2605":"\u2606")}function AX(i,t){}const DX=(i,t)=>({index:i,value:t});function IX(i,t){if(1&i){const e=n.KQA();n.I0R(0,"span",3),n.OEk(1),n.C$Y(),n.I0R(2,"span",4),n.qCj("mouseenter",function(){const o=n.usT(e).index,f=n.GaO();return n.CGJ(f.enter(o+1))})("click",function(){const o=n.usT(e).index,f=n.GaO();return n.CGJ(f.rate(o+1))}),n.yuY(3,AX,0,0,"ng-template",5),n.C$Y()}if(2&i){const e=t.$implicit,r=t.index,s=n.GaO(),o=n.Gew(2);n.yG2(),n.oRS("(",r<s.value?"*":" ",")"),n.yG2(),n.m4B("cursor",s.readonly?"default":"pointer"),n.eAK("active",r<s.value),n.E7m("title",e.title),n.yG2(),n.E7m("ngTemplateOutlet",s.customTemplate||o)("ngTemplateOutletContext",n.IBC(8,DX,r,s.value))}}let MX=(()=>{class i{constructor(){this.ariaLabel="rating"}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275prov=n.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const OX={provide:j.Y6,useExisting:(0,n.wd)(()=>RX),multi:!0};let RX=(()=>{class i{constructor(e,r){this.changeDetection=e,this.max=5,this.readonly=!1,this.titles=[],this.onHover=new n._w7,this.onLeave=new n._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.ariaLabel="rating",this.range=[],this.value=0,Object.assign(this,r)}onKeydown(e){-1!==[37,38,39,40].indexOf(e.which)&&(e.preventDefault(),e.stopPropagation(),this.rate(this.value+(38===e.which||39===e.which?1:-1)))}ngOnInit(){this.max=this.max||5,this.titles=typeof this.titles<"u"&&this.titles.length>0?this.titles:[],this.range=this.buildTemplateObjects(this.max)}writeValue(e){if(e%1!==e)return this.value=Math.round(e),this.preValue=e,void this.changeDetection.markForCheck();this.preValue=e,this.value=e,this.changeDetection.markForCheck()}enter(e){this.readonly||(this.value=e,this.changeDetection.markForCheck(),this.onHover.emit(e))}reset(){"number"==typeof this.preValue&&(this.value=Math.round(this.preValue),this.changeDetection.markForCheck(),this.onLeave.emit(this.value))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}rate(e){!this.readonly&&this.range&&e>=0&&e<=this.range.length&&(this.writeValue(e),this.onChange(e))}buildTemplateObjects(e){const r=[];for(let s=0;s<e;s++)r.push({index:s,title:this.titles[s]||s+1});return r}static#e=this.\u0275fac=function(r){return new(r||i)(n.GI1(n.kD9),n.GI1(MX))};static#t=this.\u0275cmp=n.In1({type:i,selectors:[["rating"]],hostBindings:function(r,s){1&r&&n.qCj("keydown",function(f){return s.onKeydown(f)})},inputs:{max:"max",readonly:"readonly",titles:"titles",customTemplate:"customTemplate"},outputs:{onHover:"onHover",onLeave:"onLeave"},features:[n.M5G([OX])],decls:4,vars:4,consts:[["tabindex","0","role","slider","aria-valuemin","0",3,"mouseleave","keydown"],["star",""],["ngFor","",3,"ngForOf"],[1,"sr-only","visually-hidden"],[1,"bs-rating-star",3,"title","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,s){1&r&&(n.I0R(0,"span",0),n.qCj("mouseleave",function(){return s.reset()})("keydown",function(f){return s.onKeydown(f)}),n.yuY(1,SX,1,1,"ng-template",null,1,n.gJz)(3,IX,4,11,"ng-template",2),n.C$Y()),2&r&&(n.e48("aria-label",s.ariaLabel)("aria-valuemax",s.range.length)("aria-valuenow",s.value),n.yG2(3),n.E7m("ngForOf",s.range))},dependencies:[Re.ay,Re.XV],encapsulation:2,changeDetection:0})}return i})(),LX=(()=>{class i{static forRoot(){return{ngModule:i,providers:[]}}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({imports:[Re.MD]})}return i})();var PX=Qt(6552),FX=Qt(140);let BX=(()=>{class i{static forRoot(){return{ngModule:i,providers:[PX.Sy,FX.O4]}}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({imports:[Re.MD]})}return i})(),NX=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=n.a4G({type:i});static#i=this.\u0275inj=n.s3X({imports:[Re.MD,YH.k,rY,Zn.Uf.forRoot(),j.y,j.sl,it.rO.forRoot(),Un.f8.forRoot(),CX.C.forRoot(),AV,HH.S,Fs.as.forRoot(),rX,dh,kX.forRoot(),Bc.gb,SV,eX,kH,wX,M.SO.forRoot(),TX.iU.forRoot(),sX,LX.forRoot(),GH,WI.forRoot(),wM,BX]})}return i})()},968:(ao,Hs,Qt)=>{"use strict";Qt.r(Hs),Qt.d(Hs,{PagesModule:()=>Re});var D=Qt(1368),mt=Qt(9072),Ze=Qt(4496);const n=[{path:"",loadChildren:()=>Promise.resolve().then(Qt.bind(Qt,7517)).then($e=>$e.CustomPagesModule)},{path:"pages",loadChildren:()=>Qt.e(228).then(Qt.bind(Qt,4848)).then($e=>$e.ExtrapagesModule)}];let j=(()=>{class $e{static#e=this.\u0275fac=function(_t){return new(_t||$e)};static#t=this.\u0275mod=Ze.a4G({type:$e});static#i=this.\u0275inj=Ze.s3X({imports:[mt.qQ.forChild(n),mt.qQ]})}return $e})();var He=Qt(6900),Be=Qt(7517);let Re=(()=>{class $e{static#e=this.\u0275fac=function(_t){return new(_t||$e)};static#t=this.\u0275mod=Ze.a4G({type:$e});static#i=this.\u0275inj=Ze.s3X({imports:[D.MD,j,He.k,Be.CustomPagesModule]})}return $e})()},6708:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{O:()=>Ze});var D=Qt(4496);function mt(n,j){if(1&n&&(D.I0R(0,"li",6),D.OEk(1),D.C$Y()),2&n){const He=j.$implicit;D.yG2(),D.cNF(He.label)}}let Ze=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(Be){return new(Be||n)};static#t=this.\u0275cmp=D.In1({type:n,selectors:[["app-breadcrumbs"]],inputs:{title:"title",breadcrumbItems:"breadcrumbItems"},decls:9,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item","active"],["class","breadcrumb-item active"]],template:function(Be,Re){1&Be&&(D.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),D.OEk(4),D.C$Y(),D.I0R(5,"div",4)(6,"ol",5),D.c53(7,mt,2,1,"li",7,D.wJt),D.C$Y()()()()()),2&Be&&(D.yG2(4),D.cNF(Re.title),D.yG2(3),D.oho(Re.breadcrumbItems))}})}return n})()},6900:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{k:()=>Ze});var D=Qt(1368),mt=Qt(4496);let Ze=(()=>{class n{static#e=this.\u0275fac=function(Be){return new(Be||n)};static#t=this.\u0275mod=mt.a4G({type:n});static#i=this.\u0275inj=mt.s3X({imports:[D.MD]})}return n})()},2164:(ao,Hs,Qt)=>{"use strict";var D;function mt(ge,l){var u=Object.keys(ge);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(ge);l&&(p=p.filter(function(y){return Object.getOwnPropertyDescriptor(ge,y).enumerable})),u.push.apply(u,p)}return u}function Ze(ge){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?mt(Object(u),!0).forEach(function(p){Re(ge,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(u)):mt(Object(u)).forEach(function(p){Object.defineProperty(ge,p,Object.getOwnPropertyDescriptor(u,p))})}return ge}function n(ge){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(ge)}function j(ge,l){if(!(ge instanceof l))throw new TypeError("Cannot call a class as a function")}function He(ge,l){for(var u=0;u<l.length;u++){var p=l[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(ge,p.key,p)}}function Be(ge,l,u){return l&&He(ge.prototype,l),u&&He(ge,u),ge}function Re(ge,l,u){return l in ge?Object.defineProperty(ge,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):ge[l]=u,ge}function $e(ge,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");ge.prototype=Object.create(l&&l.prototype,{constructor:{value:ge,writable:!0,configurable:!0}}),l&&nt(ge,l)}function it(ge){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(ge)}function nt(ge,l){return(nt=Object.setPrototypeOf||function(u,p){return u.__proto__=p,u})(ge,l)}function _t(ge){if(void 0===ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}function gt(ge){var l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,p=it(ge);if(l){var y=it(this).constructor;u=Reflect.construct(p,arguments,y)}else u=p.apply(this,arguments);return function(w,C){if(C&&("object"==typeof C||"function"==typeof C))return C;if(void 0!==C)throw new TypeError("Derived constructors may only return object or undefined");return _t(w)}(this,u)}}function Xt(ge,l){return function(u){if(Array.isArray(u))return u}(ge)||function(u,p){var y=null==u?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(null!=y){var w,C,M=[],B=!0,H=!1;try{for(y=y.call(u);!(B=(w=y.next()).done)&&(M.push(w.value),!p||M.length!==p);B=!0);}catch(K){H=!0,C=K}finally{try{B||null==y.return||y.return()}finally{if(H)throw C}}return M}}(ge,l)||Tt(ge,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(ge){return function(l){if(Array.isArray(l))return Nt(l)}(ge)||function(l){if(typeof Symbol<"u"&&null!=l[Symbol.iterator]||null!=l["@@iterator"])return Array.from(l)}(ge)||Tt(ge)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(ge,l){if(ge){if("string"==typeof ge)return Nt(ge,l);var u=Object.prototype.toString.call(ge).slice(8,-1);return"Object"===u&&ge.constructor&&(u=ge.constructor.name),"Map"===u||"Set"===u?Array.from(ge):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Nt(ge,l):void 0}}function Nt(ge,l){(null==l||l>ge.length)&&(l=ge.length);for(var u=0,p=new Array(l);u<l;u++)p[u]=ge[u];return p}function Pi(ge,l){var u=typeof Symbol<"u"&&ge[Symbol.iterator]||ge["@@iterator"];if(!u){if(Array.isArray(ge)||(u=Tt(ge))||l&&ge&&"number"==typeof ge.length){u&&(ge=u);var p=0,y=function(){};return{s:y,n:function(){return p>=ge.length?{done:!0}:{done:!1,value:ge[p++]}},e:function(B){throw B},f:y}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var w,C=!0,M=!1;return{s:function(){u=u.call(ge)},n:function(){var B=u.next();return C=B.done,B},e:function(B){M=!0,w=B},f:function(){try{C||null==u.return||u.return()}finally{if(M)throw w}}}}var tt=function(){function ge(){j(this,ge)}return Be(ge,[{key:"shadeRGBColor",value:function(l,u){var p=u.split(","),y=l<0?0:255,w=l<0?-1*l:l,C=parseInt(p[0].slice(4),10),M=parseInt(p[1],10),B=parseInt(p[2],10);return"rgb("+(Math.round((y-C)*w)+C)+","+(Math.round((y-M)*w)+M)+","+(Math.round((y-B)*w)+B)+")"}},{key:"shadeHexColor",value:function(l,u){var p=parseInt(u.slice(1),16),y=l<0?0:255,w=l<0?-1*l:l,C=p>>16,M=p>>8&255,B=255&p;return"#"+(16777216+65536*(Math.round((y-C)*w)+C)+256*(Math.round((y-M)*w)+M)+(Math.round((y-B)*w)+B)).toString(16).slice(1)}},{key:"shadeColor",value:function(l,u){return ge.isColorHex(u)?this.shadeHexColor(l,u):this.shadeRGBColor(l,u)}}],[{key:"bind",value:function(l,u){return function(){return l.apply(u,arguments)}}},{key:"isObject",value:function(l){return l&&"object"===n(l)&&!Array.isArray(l)&&null!=l}},{key:"is",value:function(l,u){return Object.prototype.toString.call(u)==="[object "+l+"]"}},{key:"listToArray",value:function(l){var u,p=[];for(u=0;u<l.length;u++)p[u]=l[u];return p}},{key:"extend",value:function(l,u){var p=this;"function"!=typeof Object.assign&&(Object.assign=function(w){if(null==w)throw new TypeError("Cannot convert undefined or null to object");for(var C=Object(w),M=1;M<arguments.length;M++){var B=arguments[M];if(null!=B)for(var H in B)B.hasOwnProperty(H)&&(C[H]=B[H])}return C});var y=Object.assign({},l);return this.isObject(l)&&this.isObject(u)&&Object.keys(u).forEach(function(w){p.isObject(u[w])&&w in l?y[w]=p.extend(l[w],u[w]):Object.assign(y,Re({},w,u[w]))}),y}},{key:"extendArray",value:function(l,u){var p=[];return l.map(function(y){p.push(ge.extend(u,y))}),p}},{key:"monthMod",value:function(l){return l%12}},{key:"clone",value:function(l){if(ge.is("Array",l)){for(var u=[],p=0;p<l.length;p++)u[p]=this.clone(l[p]);return u}if(ge.is("Null",l))return null;if(ge.is("Date",l))return l;if("object"===n(l)){var y={};for(var w in l)l.hasOwnProperty(w)&&(y[w]=this.clone(l[w]));return y}return l}},{key:"log10",value:function(l){return Math.log(l)/Math.LN10}},{key:"roundToBase10",value:function(l){return Math.pow(10,Math.floor(Math.log10(l)))}},{key:"roundToBase",value:function(l,u){return Math.pow(u,Math.floor(Math.log(l)/Math.log(u)))}},{key:"parseNumber",value:function(l){return null===l?l:parseFloat(l)}},{key:"stripNumber",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(l)?l:parseFloat(l.toPrecision(u))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(l){var u=String(l).split(/[eE]/);if(1===u.length)return u[0];var p="",y=l<0?"-":"",w=u[0].replace(".",""),C=Number(u[1])+1;if(C<0){for(p=y+"0.";C++;)p+="0";return p+w.replace(/^-/,"")}for(C-=w.length;C--;)p+="0";return w+p}},{key:"getDimensions",value:function(l){var u=getComputedStyle(l,null),p=l.clientHeight,y=l.clientWidth;return p-=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),[y-=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),p]}},{key:"getBoundingClientRect",value:function(l){var u=l.getBoundingClientRect();return{top:u.top,right:u.right,bottom:u.bottom,left:u.left,width:l.clientWidth,height:l.clientHeight,x:u.left,y:u.top}}},{key:"getLargestStringFromArr",value:function(l){return l.reduce(function(u,p){return Array.isArray(p)&&(p=p.reduce(function(y,w){return y.length>w.length?y:w})),u.length>p.length?u:p},0)}},{key:"hexToRgba",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==l.substring(0,1)&&(l="#999999");var p=l.replace("#","");p=p.match(new RegExp("(.{"+p.length/3+"})","g"));for(var y=0;y<p.length;y++)p[y]=parseInt(1===p[y].length?p[y]+p[y]:p[y],16);return void 0!==u&&p.push(u),"rgba("+p.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(l){return parseFloat(l.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(l){return(l=l.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===l.length?"#"+("0"+parseInt(l[1],10).toString(16)).slice(-2)+("0"+parseInt(l[2],10).toString(16)).slice(-2)+("0"+parseInt(l[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(l){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(l)}},{key:"getPolygonPos",value:function(l,u){for(var p=[],y=2*Math.PI/u,w=0;w<u;w++){var C={};C.x=l*Math.sin(w*y),C.y=-l*Math.cos(w*y),p.push(C)}return p}},{key:"polarToCartesian",value:function(l,u,p,y){var w=(y-90)*Math.PI/180;return{x:l+p*Math.cos(w),y:u+p*Math.sin(w)}}},{key:"escapeString",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return l.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,u)}},{key:"negToZero",value:function(l){return l<0?0:l}},{key:"moveIndexInArray",value:function(l,u,p){if(p>=l.length)for(var y=p-l.length+1;y--;)l.push(void 0);return l.splice(p,0,l.splice(u,1)[0]),l}},{key:"extractNumber",value:function(l){return parseFloat(l.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(l,u){for(;(l=l.parentElement)&&!l.classList.contains(u););return l}},{key:"setELstyles",value:function(l,u){for(var p in u)u.hasOwnProperty(p)&&(l.style.key=u[p])}},{key:"isNumber",value:function(l){return!isNaN(l)&&parseFloat(Number(l))===l&&!isNaN(parseInt(l,10))}},{key:"isFloat",value:function(l){return Number(l)===l&&l%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var l=window.navigator.userAgent,u=l.indexOf("MSIE ");if(u>0)return parseInt(l.substring(u+5,l.indexOf(".",u)),10);if(l.indexOf("Trident/")>0){var p=l.indexOf("rv:");return parseInt(l.substring(p+3,l.indexOf(".",p)),10)}var y=l.indexOf("Edge/");return y>0&&parseInt(l.substring(y+5,l.indexOf(".",y)),10)}},{key:"getGCD",value:function(l,u){var y=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(l,u))));for(l=Math.round(Math.abs(l)*y),u=Math.round(Math.abs(u)*y);u;){var w=u;u=l%u,l=w}return l/y}},{key:"getPrimeFactors",value:function(l){for(var u=[],p=2;l>=2;)l%p==0?(u.push(p),l/=p):p++;return u}},{key:"mod",value:function(l,u){var y=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(l,u))));return(l=Math.round(Math.abs(l)*y))%(u=Math.round(Math.abs(u)*y))/y}}]),ge}(),Ci=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.setEasingFunctions()}return Be(ge,[{key:"setEasingFunctions",value:function(){var l;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":l="-";break;case"easein":l="<";break;case"easeout":l=">";break;case"easeinout":default:l="<>";break;case"swing":l=function(u){var p=1.70158;return(u-=1)*u*((p+1)*u+p)+1};break;case"bounce":l=function(u){return u<1/2.75?7.5625*u*u:u<2/2.75?7.5625*(u-=1.5/2.75)*u+.75:u<2.5/2.75?7.5625*(u-=2.25/2.75)*u+.9375:7.5625*(u-=2.625/2.75)*u+.984375};break;case"elastic":l=function(u){return u===!!u?u:Math.pow(2,-10*u)*Math.sin((u-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=l}}},{key:"animateLine",value:function(l,u,p,y){l.attr(u).animate(y).attr(p)}},{key:"animateMarker",value:function(l,u,p,y,w,C){u||(u=0),l.attr({r:u,width:u,height:u}).animate(y,w).attr({r:p,width:p.width,height:p.height}).afterAll(function(){C()})}},{key:"animateCircle",value:function(l,u,p,y,w){l.attr({r:u.r,cx:u.cx,cy:u.cy}).animate(y,w).attr({r:p.r,cx:p.cx,cy:p.cy})}},{key:"animateRect",value:function(l,u,p,y,w){l.attr(u).animate(y).attr(p).afterAll(function(){return w()})}},{key:"animatePathsGradually",value:function(l){var K=this.w,J=0;K.config.chart.animations.animateGradually.enabled&&(J=K.config.chart.animations.animateGradually.delay),K.config.chart.animations.dynamicAnimation.enabled&&K.globals.dataChanged&&"bar"!==K.config.chart.type&&(J=0),this.morphSVG(l.el,l.realIndex,l.j,"line"!==K.config.chart.type||K.globals.comboCharts?l.fill:"stroke",l.pathFrom,l.pathTo,l.speed,l.delay*J)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(l){var u=l.el;u.classList.remove("apexcharts-element-hidden"),u.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(l){var u=this.w;u.globals.animationEnded||(u.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof u.config.chart.events.animationEnd&&u.config.chart.events.animationEnd(this.ctx,{el:l,w:u}))}},{key:"morphSVG",value:function(l,u,p,y,w,C,M,B){var H=this,K=this.w;w||(w=l.attr("pathFrom")),C||(C=l.attr("pathTo"));var J=function(ne){return"radar"===K.config.chart.type&&(M=1),"M 0 ".concat(K.globals.gridHeight)};(!w||w.indexOf("undefined")>-1||w.indexOf("NaN")>-1)&&(w=J()),(!C||C.indexOf("undefined")>-1||C.indexOf("NaN")>-1)&&(C=J()),K.globals.shouldAnimate||(M=1),l.plot(w).animate(1,K.globals.easing,B).plot(w).animate(M,K.globals.easing,B).plot(C).afterAll(function(){tt.isNumber(p)?p===K.globals.series[K.globals.maxValsInArrayIndex].length-2&&K.globals.shouldAnimate&&H.animationCompleted(l):"none"!==y&&K.globals.shouldAnimate&&(!K.globals.comboCharts&&u===K.globals.series.length-1||K.globals.comboCharts)&&H.animationCompleted(l),H.showDelayedElements()})}}]),ge}(),Mi=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"getDefaultFilter",value:function(l,u){var p=this.w;l.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==p.config.states.normal.filter?this.applyFilter(l,u,p.config.states.normal.filter.type,p.config.states.normal.filter.value):p.config.chart.dropShadow.enabled&&this.dropShadow(l,p.config.chart.dropShadow,u)}},{key:"addNormalFilter",value:function(l,u){var p=this.w;p.config.chart.dropShadow.enabled&&!l.node.classList.contains("apexcharts-marker")&&this.dropShadow(l,p.config.chart.dropShadow,u)}},{key:"addLightenFilter",value:function(l,u,p){var y=this,w=this.w,C=p.intensity;l.unfilter(!0),new window.SVG.Filter,l.filter(function(M){var B=w.config.chart.dropShadow;(B.enabled?y.addShadow(M,u,B):M).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:C}})}),l.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(l.filterer.node)}},{key:"addDarkenFilter",value:function(l,u,p){var y=this,w=this.w,C=p.intensity;l.unfilter(!0),new window.SVG.Filter,l.filter(function(M){var B=w.config.chart.dropShadow;(B.enabled?y.addShadow(M,u,B):M).componentTransfer({rgb:{type:"linear",slope:C}})}),l.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(l.filterer.node)}},{key:"applyFilter",value:function(l,u,p){var y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(p){case"none":this.addNormalFilter(l,u);break;case"lighten":this.addLightenFilter(l,u,{intensity:y});break;case"darken":this.addDarkenFilter(l,u,{intensity:y})}}},{key:"addShadow",value:function(l,u,p){var y,w=this.w,C=p.blur,M=p.top,B=p.left,H=p.color,K=p.opacity;if((null===(y=w.config.chart.dropShadow.enabledOnSeries)||void 0===y?void 0:y.length)>0&&-1===w.config.chart.dropShadow.enabledOnSeries.indexOf(u))return l;var J=l.flood(Array.isArray(H)?H[u]:H,K).composite(l.sourceAlpha,"in").offset(B,M).gaussianBlur(C).merge(l.source);return l.blend(l.source,J)}},{key:"dropShadow",value:function(l,u){var p,y,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,C=u.top,M=u.left,B=u.blur,H=u.color,K=u.opacity,J=u.noUserSpaceOnUse,ne=this.w;return l.unfilter(!0),tt.isIE()&&"radialBar"===ne.config.chart.type||(null===(p=ne.config.chart.dropShadow.enabledOnSeries)||void 0===p?void 0:p.length)>0&&-1===(null===(y=ne.config.chart.dropShadow.enabledOnSeries)||void 0===y?void 0:y.indexOf(w))||(H=Array.isArray(H)?H[w]:H,l.filter(function(de){var xe;xe=tt.isSafari()||tt.isFirefox()||tt.isIE()?de.flood(H,K).composite(de.sourceAlpha,"in").offset(M,C).gaussianBlur(B):de.flood(H,K).composite(de.sourceAlpha,"in").offset(M,C).gaussianBlur(B).merge(de.source),de.blend(de.source,xe)}),J||l.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(l.filterer.node)),l}},{key:"setSelectionFilter",value:function(l,u,p){var y=this.w;if(void 0!==y.globals.selectedDataPoints[u]&&y.globals.selectedDataPoints[u].indexOf(p)>-1){l.node.setAttribute("selected",!0);var w=y.config.states.active.filter;"none"!==w&&this.applyFilter(l,u,w.type,w.value)}}},{key:"_scaleFilterSize",value:function(l){!function(u){for(var p in u)u.hasOwnProperty(p)&&l.setAttribute(p,u[p])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),ge}(),kt=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"roundPathCorners",value:function(l,u){function p(lt,jt,qt){var Di=jt.x-lt.x,Qi=jt.y-lt.y,cn=Math.sqrt(Di*Di+Qi*Qi);return y(lt,jt,Math.min(1,qt/cn))}function y(lt,jt,qt){return{x:lt.x+(jt.x-lt.x)*qt,y:lt.y+(jt.y-lt.y)*qt}}function w(lt,jt){lt.length>2&&(lt[lt.length-2]=jt.x,lt[lt.length-1]=jt.y)}function C(lt){return{x:parseFloat(lt[lt.length-2]),y:parseFloat(lt[lt.length-1])}}l.indexOf("NaN")>-1&&(l="");var M=l.split(/[,\s]/).reduce(function(lt,jt){var qt=jt.match("([a-zA-Z])(.+)");return qt?(lt.push(qt[1]),lt.push(qt[2])):lt.push(jt),lt},[]).reduce(function(lt,jt){return parseFloat(jt)==jt&&lt.length?lt[lt.length-1].push(jt):lt.push([jt]),lt},[]),B=[];if(M.length>1){var H=C(M[0]),K=null;"Z"==M[M.length-1][0]&&M[0].length>2&&(M[M.length-1]=K=["L",H.x,H.y]),B.push(M[0]);for(var J=1;J<M.length;J++){var ne=B[B.length-1],de=M[J],xe=de==K?M[1]:M[J+1];if(xe&&ne&&ne.length>2&&"L"==de[0]&&xe.length>2&&"L"==xe[0]){var Se,Pe,Te=C(ne),Ne=C(de),U=C(xe);Se=p(Ne,Te,u),Pe=p(Ne,U,u),w(de,Se),de.origPoint=Ne,B.push(de);var le=y(Se,Ne,.5),we=y(Ne,Pe,.5),Le=["C",le.x,le.y,we.x,we.y,Pe.x,Pe.y];Le.origPoint=Ne,B.push(Le)}else B.push(de)}if(K){var je=C(B[B.length-1]);B.push(["Z"]),w(B[0],je)}}else B=M;return B.reduce(function(lt,jt){return lt+jt.join(" ")+" "},"")}},{key:"drawLine",value:function(l,u,p,y){var w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,B=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:l,y1:u,x2:p,y2:y,stroke:w,"stroke-dasharray":C,"stroke-width":M,"stroke-linecap":B})}},{key:"drawRect",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,B=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,H=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,K=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,J=this.w.globals.dom.Paper.rect();return J.attr({x:l,y:u,width:p>0?p:0,height:y>0?y:0,rx:w,ry:w,opacity:M,"stroke-width":null!==B?B:0,stroke:null!==H?H:"none","stroke-dasharray":K}),J.node.setAttribute("fill",C),J}},{key:"drawPolygon",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(l).attr({fill:y,stroke:u,"stroke-width":p})}},{key:"drawCircle",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l<0&&(l=0);var p=this.w.globals.dom.Paper.circle(2*l);return null!==u&&p.attr(u),p}},{key:"drawPath",value:function(l){var u=l.d,p=void 0===u?"":u,y=l.stroke,w=void 0===y?"#a8a8a8":y,C=l.strokeWidth,M=void 0===C?1:C,B=l.fill,H=l.fillOpacity,K=void 0===H?1:H,J=l.strokeOpacity,ne=void 0===J?1:J,de=l.classes,xe=l.strokeLinecap,Se=void 0===xe?null:xe,Pe=l.strokeDashArray,Te=void 0===Pe?0:Pe,Ne=this.w;return null===Se&&(Se=Ne.config.stroke.lineCap),(p.indexOf("undefined")>-1||p.indexOf("NaN")>-1)&&(p="M 0 ".concat(Ne.globals.gridHeight)),Ne.globals.dom.Paper.path(p).attr({fill:B,"fill-opacity":K,stroke:w,"stroke-opacity":ne,"stroke-linecap":Se,"stroke-width":M,"stroke-dasharray":Te,class:de})}},{key:"group",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=this.w.globals.dom.Paper.group();return null!==l&&u.attr(l),u}},{key:"move",value:function(l,u){return["M",l,u].join(" ")}},{key:"line",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,y=null;return null===p?y=[" L",l,u].join(" "):"H"===p?y=[" H",l].join(" "):"V"===p&&(y=[" V",u].join(" ")),y}},{key:"curve",value:function(l,u,p,y,w,C){return["C",l,u,p,y,w,C].join(" ")}},{key:"quadraticCurve",value:function(l,u,p,y){return["Q",l,u,p,y].join(" ")}},{key:"arc",value:function(l,u,p,y,w,C,M){var B="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(B="a"),[B,l,u,p,y,w,C,M].join(" ")}},{key:"renderPaths",value:function(l){var u,p=l.j,y=l.realIndex,w=l.pathFrom,C=l.pathTo,M=l.stroke,B=l.strokeWidth,H=l.strokeLinecap,K=l.fill,J=l.animationDelay,ne=l.initialSpeed,de=l.dataChangeSpeed,xe=l.className,Se=l.shouldClipToGrid,Pe=void 0===Se||Se,Te=l.bindEventsOnPaths,Ne=void 0===Te||Te,U=l.drawShadow,le=void 0===U||U,we=this.w,Le=new Mi(this.ctx),je=new Ci(this.ctx),lt=this.w.config.chart.animations.enabled,jt=lt&&this.w.config.chart.animations.dynamicAnimation.enabled,qt=!!(lt&&!we.globals.resized||jt&&we.globals.dataChanged&&we.globals.shouldAnimate);qt?u=w:(u=C,we.globals.animationEnded=!0);var Qi,Di=we.config.stroke.dashArray;Qi=Array.isArray(Di)?Di[y]:we.config.stroke.dashArray;var cn=this.drawPath({d:u,stroke:M,strokeWidth:B,fill:K,fillOpacity:1,classes:xe,strokeLinecap:H,strokeDashArray:Qi});cn.attr("index",y),Pe&&cn.attr({"clip-path":"url(#gridRectMask".concat(we.globals.cuid,")")}),"none"!==we.config.states.normal.filter.type?Le.getDefaultFilter(cn,y):we.config.chart.dropShadow.enabled&&le&&Le.dropShadow(cn,we.config.chart.dropShadow,y),Ne&&(cn.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,cn)),cn.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,cn)),cn.node.addEventListener("mousedown",this.pathMouseDown.bind(this,cn))),cn.attr({pathTo:C,pathFrom:w});var gr={el:cn,j:p,realIndex:y,pathFrom:w,pathTo:C,fill:K,strokeWidth:B,delay:J};return!lt||we.globals.resized||we.globals.dataChanged?!we.globals.resized&&we.globals.dataChanged||je.showDelayedElements():je.animatePathsGradually(Ze(Ze({},gr),{},{speed:ne})),we.globals.dataChanged&&jt&&qt&&je.animatePathsGradually(Ze(Ze({},gr),{},{speed:de})),cn}},{key:"drawPattern",value:function(l,u,p){var y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(u,p,function(C){"horizontalLines"===l?C.line(0,0,p,0).stroke({color:y,width:w+1}):"verticalLines"===l?C.line(0,0,0,u).stroke({color:y,width:w+1}):"slantedLines"===l?C.line(0,0,u,p).stroke({color:y,width:w}):"squares"===l?C.rect(u,p).fill("none").stroke({color:y,width:w}):"circles"===l&&C.circle(u).fill("none").stroke({color:y,width:w})})}},{key:"drawGradient",value:function(l,u,p,y,w){var C,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,H=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,K=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,J=this.w;u.length<9&&0===u.indexOf("#")&&(u=tt.hexToRgba(u,y)),p.length<9&&0===p.indexOf("#")&&(p=tt.hexToRgba(p,w));var ne=0,de=1,xe=1,Se=null;null!==B&&(ne=void 0!==B[0]?B[0]/100:0,de=void 0!==B[1]?B[1]/100:1,xe=void 0!==B[2]?B[2]/100:1,Se=void 0!==B[3]?B[3]/100:null);var Pe=!("donut"!==J.config.chart.type&&"pie"!==J.config.chart.type&&"polarArea"!==J.config.chart.type&&"bubble"!==J.config.chart.type);return C=J.globals.dom.Paper.gradient(Pe?"radial":"linear",null===H||0===H.length?function(U){U.at(ne,u,y),U.at(de,p,w),U.at(xe,p,w),null!==Se&&U.at(Se,u,y)}:function(U){(Array.isArray(H[K])?H[K]:H).forEach(function(le){U.at(le.offset/100,le.color,le.opacity)})}),Pe?C.attr("bubble"!==J.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:J.globals.gridWidth/2,cy:J.globals.gridHeight/2,r:M}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===l?C.from(0,0).to(0,1):"diagonal"===l?C.from(0,0).to(1,1):"horizontal"===l?C.from(0,1).to(1,1):"diagonal2"===l&&C.from(1,0).to(0,1),C}},{key:"getTextBasedOnMaxWidth",value:function(l){var u=l.text,p=l.maxWidth,C=this.getTextRects(u,l.fontSize,l.fontFamily),B=Math.floor(p/(C.width/u.length));return p<C.width?u.slice(0,B-3)+"...":u}},{key:"drawText",value:function(l){var u=this,p=l.x,y=l.y,w=l.text,C=l.textAnchor,M=l.fontSize,B=l.fontFamily,H=l.fontWeight,K=l.foreColor,J=l.opacity,ne=l.maxWidth,de=l.cssClass,xe=void 0===de?"":de,Se=l.isPlainText,Pe=void 0===Se||Se,Te=l.dominantBaseline,Ne=void 0===Te?"auto":Te,U=this.w;void 0===w&&(w="");var le=w;C||(C="start"),K&&K.length||(K=U.config.chart.foreColor),H=H||"regular";var we,Le={maxWidth:ne,fontSize:M=M||"11px",fontFamily:B=B||U.config.chart.fontFamily};return Array.isArray(w)?we=U.globals.dom.Paper.text(function(je){for(var lt=0;lt<w.length;lt++)le=w[lt],ne&&(le=u.getTextBasedOnMaxWidth(Ze({text:w[lt]},Le))),0===lt?je.tspan(le):je.tspan(le).newLine()}):(ne&&(le=this.getTextBasedOnMaxWidth(Ze({text:w},Le))),we=Pe?U.globals.dom.Paper.plain(w):U.globals.dom.Paper.text(function(je){return je.tspan(le)})),we.attr({x:p,y,"text-anchor":C,"dominant-baseline":Ne,"font-size":M,"font-family":B,"font-weight":H,fill:K,class:"apexcharts-text "+xe}),we.node.style.fontFamily=B,we.node.style.opacity=J,we}},{key:"createGroupWithAttributes",value:function(l,u,p,y){var w=this.group();return p.forEach(function(C){return w.add(C)}),w.attr({class:y.class?y.class:"",cy:u,cx:l}),w}},{key:"drawPlus",value:function(l,u,p,y){var w=p/2,C=this.drawLine(l,u-w,l,u+w,y.pointStrokeColor,y.pointStrokeDashArray,y.pointStrokeWidth,y.pointStrokeLineCap),M=this.drawLine(l-w,u,l+w,u,y.pointStrokeColor,y.pointStrokeDashArray,y.pointStrokeWidth,y.pointStrokeLineCap);return this.createGroupWithAttributes(l,u,[C,M],y)}},{key:"drawX",value:function(l,u,p,y){var w=p/2,C=this.drawLine(l-w,u-w,l+w,u+w,y.pointStrokeColor,y.pointStrokeDashArray,y.pointStrokeWidth,y.pointStrokeLineCap),M=this.drawLine(l-w,u+w,l+w,u-w,y.pointStrokeColor,y.pointStrokeDashArray,y.pointStrokeWidth,y.pointStrokeLineCap);return this.createGroupWithAttributes(l,u,[C,M],y)}},{key:"drawMarker",value:function(l,u,p){l=l||0;var y=p.pSize||0,w=null;if("X"===p?.shape||"x"===p?.shape)w=this.drawX(l,u,y,p);else if("plus"===p?.shape||"+"===p?.shape)w=this.drawPlus(l,u,y,p);else if("square"===p.shape||"rect"===p.shape){var C=void 0===p.pRadius?y/2:p.pRadius;null!==u&&y||(y=0,C=0);var M=1.2*y+C,B=this.drawRect(M,M,M,M,C);B.attr({x:l-M/2,y:u-M/2,cx:l,cy:u,class:p.class?p.class:"",fill:p.pointFillColor,"fill-opacity":p.pointFillOpacity?p.pointFillOpacity:1,stroke:p.pointStrokeColor,"stroke-width":p.pointStrokeWidth?p.pointStrokeWidth:0,"stroke-opacity":p.pointStrokeOpacity?p.pointStrokeOpacity:1}),w=B}else"circle"!==p.shape&&p.shape||(tt.isNumber(u)||(y=0,u=0),w=this.drawCircle(y,{cx:l,cy:u,class:p.class?p.class:"",stroke:p.pointStrokeColor,fill:p.pointFillColor,"fill-opacity":p.pointFillOpacity?p.pointFillOpacity:1,"stroke-width":p.pointStrokeWidth?p.pointStrokeWidth:0,"stroke-opacity":p.pointStrokeOpacity?p.pointStrokeOpacity:1}));return w}},{key:"pathMouseEnter",value:function(l,u){var p=this.w,y=new Mi(this.ctx),w=parseInt(l.node.getAttribute("index"),10),C=parseInt(l.node.getAttribute("j"),10);if("function"==typeof p.config.chart.events.dataPointMouseEnter&&p.config.chart.events.dataPointMouseEnter(u,this.ctx,{seriesIndex:w,dataPointIndex:C,w:p}),this.ctx.events.fireEvent("dataPointMouseEnter",[u,this.ctx,{seriesIndex:w,dataPointIndex:C,w:p}]),("none"===p.config.states.active.filter.type||"true"!==l.node.getAttribute("selected"))&&"none"!==p.config.states.hover.filter.type&&!p.globals.isTouchDevice){var M=p.config.states.hover.filter;y.applyFilter(l,w,M.type,M.value)}}},{key:"pathMouseLeave",value:function(l,u){var p=this.w,y=new Mi(this.ctx),w=parseInt(l.node.getAttribute("index"),10),C=parseInt(l.node.getAttribute("j"),10);"function"==typeof p.config.chart.events.dataPointMouseLeave&&p.config.chart.events.dataPointMouseLeave(u,this.ctx,{seriesIndex:w,dataPointIndex:C,w:p}),this.ctx.events.fireEvent("dataPointMouseLeave",[u,this.ctx,{seriesIndex:w,dataPointIndex:C,w:p}]),"none"!==p.config.states.active.filter.type&&"true"===l.node.getAttribute("selected")||"none"!==p.config.states.hover.filter.type&&y.getDefaultFilter(l,w)}},{key:"pathMouseDown",value:function(l,u){var p=this.w,y=new Mi(this.ctx),w=parseInt(l.node.getAttribute("index"),10),C=parseInt(l.node.getAttribute("j"),10),M="false";if("true"===l.node.getAttribute("selected")){if(l.node.setAttribute("selected","false"),p.globals.selectedDataPoints[w].indexOf(C)>-1){var B=p.globals.selectedDataPoints[w].indexOf(C);p.globals.selectedDataPoints[w].splice(B,1)}}else{if(!p.config.states.active.allowMultipleDataPointsSelection&&p.globals.selectedDataPoints.length>0){p.globals.selectedDataPoints=[];var H=p.globals.dom.Paper.select(".apexcharts-series path").members,K=p.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,J=function(xe){Array.prototype.forEach.call(xe,function(Se){Se.node.setAttribute("selected","false"),y.getDefaultFilter(Se,w)})};J(H),J(K)}l.node.setAttribute("selected","true"),M="true",void 0===p.globals.selectedDataPoints[w]&&(p.globals.selectedDataPoints[w]=[]),p.globals.selectedDataPoints[w].push(C)}if("true"===M){var ne=p.config.states.active.filter;if("none"!==ne)y.applyFilter(l,w,ne.type,ne.value);else if("none"!==p.config.states.hover.filter&&!p.globals.isTouchDevice){var de=p.config.states.hover.filter;y.applyFilter(l,w,de.type,de.value)}}else"none"!==p.config.states.active.filter.type&&("none"===p.config.states.hover.filter.type||p.globals.isTouchDevice?y.getDefaultFilter(l,w):y.applyFilter(l,w,(de=p.config.states.hover.filter).type,de.value));"function"==typeof p.config.chart.events.dataPointSelection&&p.config.chart.events.dataPointSelection(u,this.ctx,{selectedDataPoints:p.globals.selectedDataPoints,seriesIndex:w,dataPointIndex:C,w:p}),u&&this.ctx.events.fireEvent("dataPointSelection",[u,this.ctx,{selectedDataPoints:p.globals.selectedDataPoints,seriesIndex:w,dataPointIndex:C,w:p}])}},{key:"rotateAroundCenter",value:function(l){var u={};return l&&"function"==typeof l.getBBox&&(u=l.getBBox()),{x:u.x+u.width/2,y:u.y+u.height/2}}},{key:"getTextRects",value:function(l,u,p,y){var w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=this.w,M=this.drawText({x:-200,y:-200,text:l,textAnchor:"start",fontSize:u,fontFamily:p,foreColor:"#fff",opacity:0});y&&M.attr("transform",y),C.globals.dom.Paper.add(M);var B=M.bbox();return w||(B=M.node.getBoundingClientRect()),M.remove(),{width:B.width,height:B.height}}},{key:"placeTextWithEllipsis",value:function(l,u,p){if("function"==typeof l.getComputedTextLength&&(l.textContent=u,u.length>0&&l.getComputedTextLength()>=p/1.1)){for(var y=u.length-3;y>0;y-=3)if(l.getSubStringLength(0,y)<=p/1.1)return void(l.textContent=u.substring(0,y)+"...");l.textContent="."}}}],[{key:"setAttrs",value:function(l,u){for(var p in u)u.hasOwnProperty(p)&&l.setAttribute(p,u[p])}}]),ge}(),Oi=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"getStackedSeriesTotals",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=this.w,p=[];if(0===u.globals.series.length)return p;for(var y=0;y<u.globals.series[u.globals.maxValsInArrayIndex].length;y++){for(var w=0,C=0;C<u.globals.series.length;C++)void 0!==u.globals.series[C][y]&&-1===l.indexOf(C)&&(w+=u.globals.series[C][y]);p.push(w)}return p}},{key:"getSeriesTotalByIndex",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===l?this.w.config.series.reduce(function(u,p){return u+p},0):this.w.globals.series[l].reduce(function(u,p){return u+p},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var l=this,u=this.w,p=[];return u.globals.seriesGroups.forEach(function(y){var w=[];u.config.series.forEach(function(M,B){y.indexOf(M.name)>-1&&w.push(B)});var C=u.globals.series.map(function(M,B){return-1===w.indexOf(B)?B:-1}).filter(function(M){return-1!==M});p.push(l.getStackedSeriesTotals(C))}),p}},{key:"isSeriesNull",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===l?this.w.config.series.filter(function(u){return null!==u}):this.w.config.series[l].data.filter(function(u){return null!==u})).length}},{key:"seriesHaveSameValues",value:function(l){return this.w.globals.series[l].every(function(u,p,y){return u===y[0]})}},{key:"getCategoryLabels",value:function(l){var u=this.w,p=l.slice();return u.config.xaxis.convertedCatToNumeric&&(p=l.map(function(y,w){return u.config.xaxis.labels.formatter(y-u.globals.minX+1)})),p}},{key:"getLargestSeries",value:function(){var l=this.w;l.globals.maxValsInArrayIndex=l.globals.series.map(function(u){return u.length}).indexOf(Math.max.apply(Math,l.globals.series.map(function(u){return u.length})))}},{key:"getLargestMarkerSize",value:function(){var l=this.w,u=0;return l.globals.markers.size.forEach(function(p){u=Math.max(u,p)}),l.config.markers.discrete&&l.config.markers.discrete.length&&l.config.markers.discrete.forEach(function(p){u=Math.max(u,p.size)}),u>0&&(u+=l.config.markers.hover.sizeOffset+1),l.globals.markers.largestSize=u,u}},{key:"getSeriesTotals",value:function(){var l=this.w;l.globals.seriesTotals=l.globals.series.map(function(u,p){var y=0;if(Array.isArray(u))for(var w=0;w<u.length;w++)y+=u[w];else y+=u;return y})}},{key:"getSeriesTotalsXRange",value:function(l,u){var p=this.w;return p.globals.series.map(function(y,w){for(var C=0,M=0;M<y.length;M++)p.globals.seriesX[w][M]>l&&p.globals.seriesX[w][M]<u&&(C+=y[M]);return C})}},{key:"getPercentSeries",value:function(){var l=this.w;l.globals.seriesPercent=l.globals.series.map(function(u,p){var y=[];if(Array.isArray(u))for(var w=0;w<u.length;w++){var C=l.globals.stackedSeriesTotals[w],M=0;C&&(M=100*u[w]/C),y.push(M)}else{var B=100*u/l.globals.seriesTotals.reduce(function(H,K){return H+K},0);y.push(B)}return y})}},{key:"getCalculatedRatios",value:function(){var l,u,p,y=this.w.globals,w=[],C=0,M=[],B=.1,H=0;if(y.yRange=[],y.isMultipleYAxis)for(var K=0;K<y.minYArr.length;K++)y.yRange.push(Math.abs(y.minYArr[K]-y.maxYArr[K])),M.push(0);else y.yRange.push(Math.abs(y.minY-y.maxY));y.xRange=Math.abs(y.maxX-y.minX),y.zRange=Math.abs(y.maxZ-y.minZ);for(var J=0;J<y.yRange.length;J++)w.push(y.yRange[J]/y.gridHeight);if(u=y.xRange/y.gridWidth,l=y.yRange/y.gridWidth,p=y.xRange/y.gridHeight,(C=y.zRange/y.gridHeight*16)||(C=1),y.minY!==Number.MIN_VALUE&&0!==Math.abs(y.minY)&&(y.hasNegs=!0),y.isMultipleYAxis){M=[];for(var ne=0;ne<w.length;ne++)M.push(-y.minYArr[ne]/w[ne])}else M.push(-y.minY/w[0]),y.minY!==Number.MIN_VALUE&&0!==Math.abs(y.minY)&&(B=-y.minY/l,H=y.minX/u);return{yRatio:w,invertedYRatio:l,zRatio:C,xRatio:u,invertedXRatio:p,baseLineInvertedY:B,baseLineY:M,baseLineX:H}}},{key:"getLogSeries",value:function(l){var u=this,p=this.w;return p.globals.seriesLog=l.map(function(y,w){return p.config.yaxis[w]&&p.config.yaxis[w].logarithmic?y.map(function(C){return null===C?null:u.getLogVal(p.config.yaxis[w].logBase,C,w)}):y}),p.globals.invalidLogScale?l:p.globals.seriesLog}},{key:"getBaseLog",value:function(l,u){return Math.log(u)/Math.log(l)}},{key:"getLogVal",value:function(l,u,p){if(0===u)return 0;var y=this.w,w=0===y.globals.minYArr[p]?-1:this.getBaseLog(l,y.globals.minYArr[p]),C=(0===y.globals.maxYArr[p]?0:this.getBaseLog(l,y.globals.maxYArr[p]))-w;return u<1?u/C:(this.getBaseLog(l,u)-w)/C}},{key:"getLogYRatios",value:function(l){var u=this,p=this.w,y=this.w.globals;return y.yLogRatio=l.slice(),y.logYRange=y.yRange.map(function(w,C){if(p.config.yaxis[C]&&u.w.config.yaxis[C].logarithmic){var M,B=-Number.MAX_VALUE,H=Number.MIN_VALUE;return y.seriesLog.forEach(function(K,J){K.forEach(function(ne){p.config.yaxis[J]&&p.config.yaxis[J].logarithmic&&(B=Math.max(ne,B),H=Math.min(ne,H))})}),M=Math.pow(y.yRange[C],Math.abs(H-B)/y.yRange[C]),y.yLogRatio[C]=M/y.gridHeight,M}}),y.invalidLogScale?l.slice():y.yLogRatio}}],[{key:"checkComboSeries",value:function(l){var u=!1,p=0,y=0;return l.length&&void 0!==l[0].type&&l.forEach(function(w){"bar"!==w.type&&"column"!==w.type&&"candlestick"!==w.type&&"boxPlot"!==w.type||p++,void 0!==w.type&&y++}),y>0&&(u=!0),{comboBarCount:p,comboCharts:u}}},{key:"extendArrayProps",value:function(l,u,p){var y,w,C,M,B,H;return null!==(y=u)&&void 0!==y&&y.yaxis&&(u=l.extendYAxis(u,p)),null!==(w=u)&&void 0!==w&&w.annotations&&(u.annotations.yaxis&&(u=l.extendYAxisAnnotations(u)),null!==(C=u)&&void 0!==C&&null!==(M=C.annotations)&&void 0!==M&&M.xaxis&&(u=l.extendXAxisAnnotations(u)),null!==(B=u)&&void 0!==B&&null!==(H=B.annotations)&&void 0!==H&&H.points&&(u=l.extendPointAnnotations(u))),u}}]),ge}(),vi=function(){function ge(l){j(this,ge),this.w=l.w,this.annoCtx=l}return Be(ge,[{key:"setOrientations",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===l.label.orientation){var w=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==u?u:0,"']"));if(null!==w){var C=w.getBoundingClientRect();w.setAttribute("x",parseFloat(w.getAttribute("x"))-C.height+4),w.setAttribute("y","top"===l.label.position?parseFloat(w.getAttribute("y"))+C.width:parseFloat(w.getAttribute("y"))-C.width);var M=this.annoCtx.graphics.rotateAroundCenter(w),H=M.y;w.setAttribute("transform","rotate(-90 ".concat(M.x," ").concat(H,")"))}}}},{key:"addBackgroundToAnno",value:function(l,u){var p=this.w;if(!l||void 0===u.label.text||void 0!==u.label.text&&!String(u.label.text).trim())return null;var y=p.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),w=l.getBoundingClientRect(),C=u.label.style.padding.left,M=u.label.style.padding.right,B=u.label.style.padding.top,H=u.label.style.padding.bottom;"vertical"===u.label.orientation&&(B=u.label.style.padding.left,H=u.label.style.padding.right,C=u.label.style.padding.top,M=u.label.style.padding.bottom);var ne=this.annoCtx.graphics.drawRect(w.left-y.left-C-p.globals.barPadForNumericAxis,w.top-y.top-B,w.width+C+M,w.height+B+H,u.label.borderRadius,u.label.style.background,1,u.label.borderWidth,u.label.borderColor,0);return u.id&&ne.node.classList.add(u.id),ne}},{key:"annotationsBackground",value:function(){var l=this,u=this.w,p=function(y,w,C){var M=u.globals.dom.baseEl.querySelector(".apexcharts-".concat(C,"-annotations .apexcharts-").concat(C,"-annotation-label[rel='").concat(w,"']"));if(M){var B=M.parentNode,H=l.addBackgroundToAnno(M,y);H&&(B.insertBefore(H.node,M),y.label.mouseEnter&&H.node.addEventListener("mouseenter",y.label.mouseEnter.bind(l,y)),y.label.mouseLeave&&H.node.addEventListener("mouseleave",y.label.mouseLeave.bind(l,y)),y.label.click&&H.node.addEventListener("click",y.label.click.bind(l,y)))}};u.config.annotations.xaxis.map(function(y,w){p(y,w,"xaxis")}),u.config.annotations.yaxis.map(function(y,w){p(y,w,"yaxis")}),u.config.annotations.points.map(function(y,w){p(y,w,"point")})}},{key:"getY1Y2",value:function(l,u){var p,y="y1"===l?u.y:u.y2,w=this.w;if(this.annoCtx.invertAxis){var C=w.globals.labels;w.config.xaxis.convertedCatToNumeric&&(C=w.globals.categoryLabels);var M=C.indexOf(y),B=w.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(M+1)+")");p=B?parseFloat(B.getAttribute("y")):(w.globals.gridHeight/C.length-1)*(M+1)-w.globals.barHeight,void 0!==u.seriesIndex&&w.globals.barHeight&&(p=p-w.globals.barHeight/2*(w.globals.series.length-1)+w.globals.barHeight*u.seriesIndex)}else{var H;H=w.config.yaxis[u.yAxisIndex].logarithmic?(y=new Oi(this.annoCtx.ctx).getLogVal(y,u.yAxisIndex))/w.globals.yLogRatio[u.yAxisIndex]:(y-w.globals.minYArr[u.yAxisIndex])/(w.globals.yRange[u.yAxisIndex]/w.globals.gridHeight),p=w.globals.gridHeight-H,!u.marker||null!=u.y||(p=0),w.config.yaxis[u.yAxisIndex]&&w.config.yaxis[u.yAxisIndex].reversed&&(p=H)}return"string"==typeof y&&y.indexOf("px")>-1&&(p=parseFloat(y)),p}},{key:"getX1X2",value:function(l,u){var p=this.w,y=this.annoCtx.invertAxis?p.globals.minY:p.globals.minX,w=this.annoCtx.invertAxis?p.globals.maxY:p.globals.maxX,C=this.annoCtx.invertAxis?p.globals.yRange[0]:p.globals.xRange,M=(u.x-y)/(C/p.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(M=(w-u.x)/(C/p.globals.gridWidth)),"category"!==p.config.xaxis.type&&!p.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||p.globals.dataFormatXNumeric||(M=this.getStringX(u.x));var B=(u.x2-y)/(C/p.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(B=(w-u.x2)/(C/p.globals.gridWidth)),"category"!==p.config.xaxis.type&&!p.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||p.globals.dataFormatXNumeric||(B=this.getStringX(u.x2)),null!=u.x||!u.marker||(M=p.globals.gridWidth),"x1"===l&&"string"==typeof u.x&&u.x.indexOf("px")>-1&&(M=parseFloat(u.x)),"x2"===l&&"string"==typeof u.x2&&u.x2.indexOf("px")>-1&&(B=parseFloat(u.x2)),void 0!==u.seriesIndex&&p.globals.barWidth&&!this.annoCtx.invertAxis&&(M=M-p.globals.barWidth/2*(p.globals.series.length-1)+p.globals.barWidth*u.seriesIndex),"x1"===l?M:B}},{key:"getStringX",value:function(l){var u=this.w,p=l;u.config.xaxis.convertedCatToNumeric&&u.globals.categoryLabels.length&&(l=u.globals.categoryLabels.indexOf(l)+1);var y=u.globals.labels.indexOf(l),w=u.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(y+1)+")");return w&&(p=parseFloat(w.getAttribute("x"))),p}}]),ge}(),hi=function(){function ge(l){j(this,ge),this.w=l.w,this.annoCtx=l,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new vi(this.annoCtx)}return Be(ge,[{key:"addXaxisAnnotation",value:function(l,u,p){var y,w=this.w,C=this.helpers.getX1X2("x1",l),M=l.label.text,B=l.strokeDashArray;if(tt.isNumber(C)){if(null==l.x2){var H=this.annoCtx.graphics.drawLine(C+l.offsetX,0+l.offsetY,C+l.offsetX,w.globals.gridHeight+l.offsetY,l.borderColor,B,l.borderWidth);u.appendChild(H.node),l.id&&H.node.classList.add(l.id)}else{if((y=this.helpers.getX1X2("x2",l))<C){var K=C;C=y,y=K}var J=this.annoCtx.graphics.drawRect(C+l.offsetX,0+l.offsetY,y-C,w.globals.gridHeight+l.offsetY,0,l.fillColor,l.opacity,1,l.borderColor,B);J.node.classList.add("apexcharts-annotation-rect"),J.attr("clip-path","url(#gridRectMask".concat(w.globals.cuid,")")),u.appendChild(J.node),l.id&&J.node.classList.add(l.id)}var ne=this.annoCtx.graphics.getTextRects(M,parseFloat(l.label.style.fontSize)),xe=this.annoCtx.graphics.drawText({x:C+l.label.offsetX,y:("top"===l.label.position?4:"center"===l.label.position?w.globals.gridHeight/2+("vertical"===l.label.orientation?ne.width/2:0):w.globals.gridHeight)+l.label.offsetY-("vertical"===l.label.orientation?"top"===l.label.position?ne.width/2-12:-ne.width/2:0),text:M,textAnchor:l.label.textAnchor,fontSize:l.label.style.fontSize,fontFamily:l.label.style.fontFamily,fontWeight:l.label.style.fontWeight,foreColor:l.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(l.label.style.cssClass," ").concat(l.id?l.id:"")});xe.attr({rel:p}),u.appendChild(xe.node),this.annoCtx.helpers.setOrientations(l,p)}}},{key:"drawXAxisAnnotations",value:function(){var l=this,u=this.w,p=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return u.config.annotations.xaxis.map(function(y,w){l.addXaxisAnnotation(y,p.node,w)}),p}}]),ge}(),Dt=function(){function ge(l){j(this,ge),this.w=l.w,this.annoCtx=l,this.helpers=new vi(this.annoCtx)}return Be(ge,[{key:"addYaxisAnnotation",value:function(l,u,p){var y,w=this.w,C=l.strokeDashArray,M=this.helpers.getY1Y2("y1",l),B=l.label.text;if(null==l.y2){var H=this.annoCtx.graphics.drawLine(0+l.offsetX,M+l.offsetY,this._getYAxisAnnotationWidth(l),M+l.offsetY,l.borderColor,C,l.borderWidth);u.appendChild(H.node),l.id&&H.node.classList.add(l.id)}else{if((y=this.helpers.getY1Y2("y2",l))>M){var K=M;M=y,y=K}var J=this.annoCtx.graphics.drawRect(0+l.offsetX,y+l.offsetY,this._getYAxisAnnotationWidth(l),M-y,0,l.fillColor,l.opacity,1,l.borderColor,C);J.node.classList.add("apexcharts-annotation-rect"),J.attr("clip-path","url(#gridRectMask".concat(w.globals.cuid,")")),u.appendChild(J.node),l.id&&J.node.classList.add(l.id)}var de=this.annoCtx.graphics.drawText({x:("right"===l.label.position?w.globals.gridWidth:"center"===l.label.position?w.globals.gridWidth/2:0)+l.label.offsetX,y:(y??M)+l.label.offsetY-3,text:B,textAnchor:l.label.textAnchor,fontSize:l.label.style.fontSize,fontFamily:l.label.style.fontFamily,fontWeight:l.label.style.fontWeight,foreColor:l.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(l.label.style.cssClass," ").concat(l.id?l.id:"")});de.attr({rel:p}),u.appendChild(de.node)}},{key:"_getYAxisAnnotationWidth",value:function(l){var u=this.w;return(l.width.indexOf("%")>-1?u.globals.gridWidth*parseInt(l.width,10)/100:parseInt(l.width,10))+l.offsetX}},{key:"drawYAxisAnnotations",value:function(){var l=this,u=this.w,p=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return u.config.annotations.yaxis.map(function(y,w){l.addYaxisAnnotation(y,p.node,w)}),p}}]),ge}(),yi=function(){function ge(l){j(this,ge),this.w=l.w,this.annoCtx=l,this.helpers=new vi(this.annoCtx)}return Be(ge,[{key:"addPointAnnotation",value:function(l,u,p){var y=this.helpers.getX1X2("x1",l),w=this.helpers.getY1Y2("y1",l);if(tt.isNumber(y)){var C={pSize:l.marker.size,pointStrokeWidth:l.marker.strokeWidth,pointFillColor:l.marker.fillColor,pointStrokeColor:l.marker.strokeColor,shape:l.marker.shape,pRadius:l.marker.radius,class:"apexcharts-point-annotation-marker ".concat(l.marker.cssClass," ").concat(l.id?l.id:"")},M=this.annoCtx.graphics.drawMarker(y+l.marker.offsetX,w+l.marker.offsetY,C);u.appendChild(M.node);var B=l.label.text?l.label.text:"",H=this.annoCtx.graphics.drawText({x:y+l.label.offsetX,y:w+l.label.offsetY-l.marker.size-parseFloat(l.label.style.fontSize)/1.6,text:B,textAnchor:l.label.textAnchor,fontSize:l.label.style.fontSize,fontFamily:l.label.style.fontFamily,fontWeight:l.label.style.fontWeight,foreColor:l.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(l.label.style.cssClass," ").concat(l.id?l.id:"")});if(H.attr({rel:p}),u.appendChild(H.node),l.customSVG.SVG){var K=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+l.customSVG.cssClass});K.attr({transform:"translate(".concat(y+l.customSVG.offsetX,", ").concat(w+l.customSVG.offsetY,")")}),K.node.innerHTML=l.customSVG.SVG,u.appendChild(K.node)}if(l.image.path){var J=l.image.width?l.image.width:20,ne=l.image.height?l.image.height:20;M=this.annoCtx.addImage({x:y+l.image.offsetX-J/2,y:w+l.image.offsetY-ne/2,width:J,height:ne,path:l.image.path,appendTo:".apexcharts-point-annotations"})}l.mouseEnter&&M.node.addEventListener("mouseenter",l.mouseEnter.bind(this,l)),l.mouseLeave&&M.node.addEventListener("mouseleave",l.mouseLeave.bind(this,l)),l.click&&M.node.addEventListener("click",l.click.bind(this,l))}}},{key:"drawPointAnnotations",value:function(){var l=this,u=this.w,p=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return u.config.annotations.points.map(function(y,w){l.addPointAnnotation(y,p.node,w)}),p}}]),ge}(),Ri={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Xi=function(){function ge(){j(this,ge),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Be(ge,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Ri],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(l){return new Date(l).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(l){return l}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(l){return l+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(l){return l.globals.seriesTotals.reduce(function(u,p){return u+p},0)/l.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(l){return l},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(l){return l}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(l){return l}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(l){return l.globals.seriesTotals.reduce(function(u,p){return u+p},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(l){return null!==l?l:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(l){return l?l+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),ge}(),Tn=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.graphics=new kt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new vi(this),this.xAxisAnnotations=new hi(this),this.yAxisAnnotations=new Dt(this),this.pointsAnnotations=new yi(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Be(ge,[{key:"drawAxesAnnotations",value:function(){var l=this.w;if(l.globals.axisCharts){for(var u=this.yAxisAnnotations.drawYAxisAnnotations(),p=this.xAxisAnnotations.drawXAxisAnnotations(),y=this.pointsAnnotations.drawPointAnnotations(),w=l.config.chart.animations.enabled,C=[u,p,y],M=[p.node,u.node,y.node],B=0;B<3;B++)l.globals.dom.elGraphical.add(C[B]),!w||l.globals.resized||l.globals.dataChanged||"scatter"!==l.config.chart.type&&"bubble"!==l.config.chart.type&&l.globals.dataPoints>1&&M[B].classList.add("apexcharts-element-hidden"),l.globals.delayedElements.push({el:M[B],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var l=this;this.w.config.annotations.images.map(function(u,p){l.addImage(u,p)})}},{key:"drawTextAnnos",value:function(){var l=this;this.w.config.annotations.texts.map(function(u,p){l.addText(u,p)})}},{key:"addXaxisAnnotation",value:function(l,u,p){this.xAxisAnnotations.addXaxisAnnotation(l,u,p)}},{key:"addYaxisAnnotation",value:function(l,u,p){this.yAxisAnnotations.addYaxisAnnotation(l,u,p)}},{key:"addPointAnnotation",value:function(l,u,p){this.pointsAnnotations.addPointAnnotation(l,u,p)}},{key:"addText",value:function(l,u){var w=l.text,ne=l.backgroundColor,de=l.borderWidth,xe=l.strokeDashArray,Se=l.borderRadius,Pe=l.borderColor,Te=l.appendTo,Ne=void 0===Te?".apexcharts-svg":Te,U=l.paddingLeft,le=void 0===U?4:U,we=l.paddingRight,Le=void 0===we?4:we,je=l.paddingBottom,lt=void 0===je?2:je,jt=l.paddingTop,qt=void 0===jt?2:jt,Di=this.w,Qi=this.graphics.drawText({x:l.x,y:l.y,text:w,textAnchor:l.textAnchor||"start",fontSize:l.fontSize||"12px",fontWeight:l.fontWeight||"regular",fontFamily:l.fontFamily||Di.config.chart.fontFamily,foreColor:l.foreColor||Di.config.chart.foreColor,cssClass:l.cssClass}),cn=Di.globals.dom.baseEl.querySelector(Ne);cn&&cn.appendChild(Qi.node);var Qn=Qi.bbox();if(w){var gr=this.graphics.drawRect(Qn.x-le,Qn.y-qt,Qn.width+le+Le,Qn.height+lt+qt,Se,ne||"transparent",1,de,Pe,xe);cn.insertBefore(gr.node,Qi.node)}}},{key:"addImage",value:function(l,u){var p=this.w,w=l.x,C=void 0===w?0:w,M=l.y,B=void 0===M?0:M,H=l.width,K=void 0===H?20:H,J=l.height,ne=void 0===J?20:J,de=l.appendTo,xe=void 0===de?".apexcharts-svg":de,Se=p.globals.dom.Paper.image(l.path);Se.size(K,ne).move(C,B);var Pe=p.globals.dom.baseEl.querySelector(xe);return Pe&&Pe.appendChild(Se.node),Se}},{key:"addXaxisAnnotationExternal",value:function(l,u,p){return this.addAnnotationExternal({params:l,pushToMemory:u,context:p,type:"xaxis",contextMethod:p.addXaxisAnnotation}),p}},{key:"addYaxisAnnotationExternal",value:function(l,u,p){return this.addAnnotationExternal({params:l,pushToMemory:u,context:p,type:"yaxis",contextMethod:p.addYaxisAnnotation}),p}},{key:"addPointAnnotationExternal",value:function(l,u,p){return void 0===this.invertAxis&&(this.invertAxis=p.w.globals.isBarHorizontal),this.addAnnotationExternal({params:l,pushToMemory:u,context:p,type:"point",contextMethod:p.addPointAnnotation}),p}},{key:"addAnnotationExternal",value:function(l){var u=l.params,p=l.pushToMemory,y=l.context,w=l.type,C=l.contextMethod,M=y,B=M.w,H=B.globals.dom.baseEl.querySelector(".apexcharts-".concat(w,"-annotations")),K=H.childNodes.length+1,J=new Xi,ne=Object.assign({},"xaxis"===w?J.xAxisAnnotation:"yaxis"===w?J.yAxisAnnotation:J.pointAnnotation),de=tt.extend(ne,u);switch(w){case"xaxis":this.addXaxisAnnotation(de,H,K);break;case"yaxis":this.addYaxisAnnotation(de,H,K);break;case"point":this.addPointAnnotation(de,H,K)}var xe=B.globals.dom.baseEl.querySelector(".apexcharts-".concat(w,"-annotations .apexcharts-").concat(w,"-annotation-label[rel='").concat(K,"']")),Se=this.helpers.addBackgroundToAnno(xe,de);return Se&&H.insertBefore(Se.node,xe),p&&B.globals.memory.methodsToExec.push({context:M,id:de.id?de.id:tt.randomId(),method:C,label:"addAnnotation",params:u}),y}},{key:"clearAnnotations",value:function(l){var u=l.w,p=u.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");u.globals.memory.methodsToExec.map(function(y,w){"addText"!==y.label&&"addAnnotation"!==y.label||u.globals.memory.methodsToExec.splice(w,1)}),p=tt.listToArray(p),Array.prototype.forEach.call(p,function(y){for(;y.firstChild;)y.removeChild(y.firstChild)})}},{key:"removeAnnotation",value:function(l,u){var p=l.w,y=p.globals.dom.baseEl.querySelectorAll(".".concat(u));y&&(p.globals.memory.methodsToExec.map(function(w,C){w.id===u&&p.globals.memory.methodsToExec.splice(C,1)}),Array.prototype.forEach.call(y,function(w){w.parentElement.removeChild(w)}))}}]),ge}(),qi=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Be(ge,[{key:"isValidDate",value:function(l){return"number"!=typeof l&&!isNaN(this.parseDate(l))}},{key:"getTimeStamp",value:function(l){return Date.parse(l)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(l).toISOString().substr(0,25)).getTime():new Date(l).getTime():l}},{key:"getDate",value:function(l){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(l).toUTCString()):new Date(l)}},{key:"parseDate",value:function(l){var u=Date.parse(l);if(!isNaN(u))return this.getTimeStamp(l);var p=Date.parse(l.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(p)}},{key:"parseDateWithTimezone",value:function(l){return Date.parse(l.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(l,u){var p=this.w.globals.locale,y=this.w.config.xaxis.labels.datetimeUTC,w=["\0"].concat(Et(p.months)),C=["\x01"].concat(Et(p.shortMonths)),M=["\x02"].concat(Et(p.days)),B=["\x03"].concat(Et(p.shortDays));function H(lt,jt){var qt=lt+"";for(jt=jt||2;qt.length<jt;)qt="0"+qt;return qt}var K=y?l.getUTCFullYear():l.getFullYear();u=(u=(u=u.replace(/(^|[^\\])yyyy+/g,"$1"+K)).replace(/(^|[^\\])yy/g,"$1"+K.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+K);var J=(y?l.getUTCMonth():l.getMonth())+1;u=(u=(u=(u=u.replace(/(^|[^\\])MMMM+/g,"$1"+w[0])).replace(/(^|[^\\])MMM/g,"$1"+C[0])).replace(/(^|[^\\])MM/g,"$1"+H(J))).replace(/(^|[^\\])M/g,"$1"+J);var ne=y?l.getUTCDate():l.getDate();u=(u=(u=(u=u.replace(/(^|[^\\])dddd+/g,"$1"+M[0])).replace(/(^|[^\\])ddd/g,"$1"+B[0])).replace(/(^|[^\\])dd/g,"$1"+H(ne))).replace(/(^|[^\\])d/g,"$1"+ne);var de=y?l.getUTCHours():l.getHours(),xe=de>12?de-12:0===de?12:de;u=(u=(u=(u=u.replace(/(^|[^\\])HH+/g,"$1"+H(de))).replace(/(^|[^\\])H/g,"$1"+de)).replace(/(^|[^\\])hh+/g,"$1"+H(xe))).replace(/(^|[^\\])h/g,"$1"+xe);var Se=y?l.getUTCMinutes():l.getMinutes();u=(u=u.replace(/(^|[^\\])mm+/g,"$1"+H(Se))).replace(/(^|[^\\])m/g,"$1"+Se);var Pe=y?l.getUTCSeconds():l.getSeconds();u=(u=u.replace(/(^|[^\\])ss+/g,"$1"+H(Pe))).replace(/(^|[^\\])s/g,"$1"+Pe);var Te=y?l.getUTCMilliseconds():l.getMilliseconds();u=u.replace(/(^|[^\\])fff+/g,"$1"+H(Te,3)),Te=Math.round(Te/10),u=u.replace(/(^|[^\\])ff/g,"$1"+H(Te)),Te=Math.round(Te/10);var Ne=de<12?"AM":"PM";u=(u=(u=u.replace(/(^|[^\\])f/g,"$1"+Te)).replace(/(^|[^\\])TT+/g,"$1"+Ne)).replace(/(^|[^\\])T/g,"$1"+Ne.charAt(0));var U=Ne.toLowerCase();u=(u=u.replace(/(^|[^\\])tt+/g,"$1"+U)).replace(/(^|[^\\])t/g,"$1"+U.charAt(0));var le=-l.getTimezoneOffset(),we=y||!le?"Z":le>0?"+":"-";if(!y){var Le=(le=Math.abs(le))%60;we+=H(Math.floor(le/60))+":"+H(Le)}u=u.replace(/(^|[^\\])K/g,"$1"+we);var je=(y?l.getUTCDay():l.getDay())+1;return(u=(u=(u=(u=u.replace(new RegExp(M[0],"g"),M[je])).replace(new RegExp(B[0],"g"),B[je])).replace(new RegExp(w[0],"g"),w[J])).replace(new RegExp(C[0],"g"),C[J])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(l,u,p){var y=this.w;void 0!==y.config.xaxis.min&&(l=y.config.xaxis.min),void 0!==y.config.xaxis.max&&(u=y.config.xaxis.max);var w=this.getDate(l),C=this.getDate(u),M=this.formatDate(w,"yyyy MM dd HH mm ss fff").split(" "),B=this.formatDate(C,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(M[6],10),maxMillisecond:parseInt(B[6],10),minSecond:parseInt(M[5],10),maxSecond:parseInt(B[5],10),minMinute:parseInt(M[4],10),maxMinute:parseInt(B[4],10),minHour:parseInt(M[3],10),maxHour:parseInt(B[3],10),minDate:parseInt(M[2],10),maxDate:parseInt(B[2],10),minMonth:parseInt(M[1],10)-1,maxMonth:parseInt(B[1],10)-1,minYear:parseInt(M[0],10),maxYear:parseInt(B[0],10)}}},{key:"isLeapYear",value:function(l){return l%4==0&&l%100!=0||l%400==0}},{key:"calculcateLastDaysOfMonth",value:function(l,u,p){return this.determineDaysOfMonths(l,u)-p}},{key:"determineDaysOfYear",value:function(l){var u=365;return this.isLeapYear(l)&&(u=366),u}},{key:"determineRemainingDaysOfYear",value:function(l,u,p){var y=this.daysCntOfYear[u]+p;return u>1&&this.isLeapYear()&&y++,y}},{key:"determineDaysOfMonths",value:function(l,u){var p=30;switch(l=tt.monthMod(l),!0){case this.months30.indexOf(l)>-1:2===l&&(p=this.isLeapYear(u)?29:28);break;case this.months31.indexOf(l)>-1:default:p=31}return p}}]),ge}(),nn=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.tooltipKeyFormat="dd MMM"}return Be(ge,[{key:"xLabelFormat",value:function(l,u,p,y){var w=this.w;if("datetime"===w.config.xaxis.type&&void 0===w.config.xaxis.labels.formatter&&void 0===w.config.tooltip.x.formatter){var C=new qi(this.ctx);return C.formatDate(C.getDate(u),w.config.tooltip.x.format)}return l(u,p,y)}},{key:"defaultGeneralFormatter",value:function(l){return Array.isArray(l)?l.map(function(u){return u}):l}},{key:"defaultYFormatter",value:function(l,u,p){var y=this.w;return tt.isNumber(l)&&(l=l.toFixed(0!==y.globals.yValueDecimal?void 0!==u.decimalsInFloat?u.decimalsInFloat:y.globals.yValueDecimal:y.globals.maxYArr[p]-y.globals.minYArr[p]<5?1:0)),l}},{key:"setLabelFormatters",value:function(){var l=this,u=this.w;return u.globals.xaxisTooltipFormatter=function(p){return l.defaultGeneralFormatter(p)},u.globals.ttKeyFormatter=function(p){return l.defaultGeneralFormatter(p)},u.globals.ttZFormatter=function(p){return p},u.globals.legendFormatter=function(p){return l.defaultGeneralFormatter(p)},u.globals.xLabelFormatter=void 0!==u.config.xaxis.labels.formatter?u.config.xaxis.labels.formatter:function(p){if(tt.isNumber(p)){if(!u.config.xaxis.convertedCatToNumeric&&"numeric"===u.config.xaxis.type){if(tt.isNumber(u.config.xaxis.decimalsInFloat))return p.toFixed(u.config.xaxis.decimalsInFloat);var y=u.globals.maxX-u.globals.minX;return p.toFixed(y>0&&y<100?1:0)}return p.toFixed(u.globals.isBarHorizontal&&u.globals.maxY-u.globals.minYArr<4?1:0)}return p},u.globals.ttKeyFormatter="function"==typeof u.config.tooltip.x.formatter?u.config.tooltip.x.formatter:u.globals.xLabelFormatter,"function"==typeof u.config.xaxis.tooltip.formatter&&(u.globals.xaxisTooltipFormatter=u.config.xaxis.tooltip.formatter),(Array.isArray(u.config.tooltip.y)||void 0!==u.config.tooltip.y.formatter)&&(u.globals.ttVal=u.config.tooltip.y),void 0!==u.config.tooltip.z.formatter&&(u.globals.ttZFormatter=u.config.tooltip.z.formatter),void 0!==u.config.legend.formatter&&(u.globals.legendFormatter=u.config.legend.formatter),u.config.yaxis.forEach(function(p,y){u.globals.yLabelFormatters[y]=void 0!==p.labels.formatter?p.labels.formatter:function(w){return u.globals.xyCharts?Array.isArray(w)?w.map(function(C){return l.defaultYFormatter(C,p,y)}):l.defaultYFormatter(w,p,y):w}}),u.globals}},{key:"heatmapLabelFormatters",value:function(){var l=this.w;if("heatmap"===l.config.chart.type){l.globals.yAxisScale[0].result=l.globals.seriesNames.slice();var u=l.globals.seriesNames.reduce(function(p,y){return p.length>y.length?p:y},0);l.globals.yAxisScale[0].niceMax=u,l.globals.yAxisScale[0].niceMin=u}}}]),ge}(),_n=function(ge){var l,u=ge.isTimeline,p=ge.ctx,y=ge.seriesIndex,w=ge.dataPointIndex,C=ge.y1,M=ge.y2,B=ge.w,H=B.globals.seriesRangeStart[y][w],K=B.globals.seriesRangeEnd[y][w],J=B.globals.labels[w],ne=B.config.series[y].name?B.config.series[y].name:"",de=B.globals.ttKeyFormatter,xe=B.config.tooltip.y.title.formatter,Se={w:B,seriesIndex:y,dataPointIndex:w,start:H,end:K};"function"==typeof xe&&(ne=xe(ne,Se)),null!==(l=B.config.series[y].data[w])&&void 0!==l&&l.x&&(J=B.config.series[y].data[w].x),u||"datetime"===B.config.xaxis.type&&(J=new nn(p).xLabelFormat(B.globals.ttKeyFormatter,J,J,{i:void 0,dateFormatter:new qi(p).formatDate,w:B})),"function"==typeof de&&(J=de(J,Se)),Number.isFinite(C)&&Number.isFinite(M)&&(H=C,K=M);var Pe="",Te="",Ne=B.globals.colors[y];if(void 0===B.config.tooltip.x.formatter)if("datetime"===B.config.xaxis.type){var U=new qi(p);Pe=U.formatDate(U.getDate(H),B.config.tooltip.x.format),Te=U.formatDate(U.getDate(K),B.config.tooltip.x.format)}else Pe=H,Te=K;else Pe=B.config.tooltip.x.formatter(H),Te=B.config.tooltip.x.formatter(K);return{start:H,end:K,startVal:Pe,endVal:Te,ylabel:J,color:Ne,seriesName:ne}},Fn=function(ge){var l=ge.color,u=ge.seriesName,p=ge.ylabel,y=ge.start,w=ge.end,C=ge.seriesIndex,M=ge.dataPointIndex,B=ge.ctx.tooltip.tooltipLabels.getFormatters(C);y=B.yLbFormatter(y),w=B.yLbFormatter(w);var H=B.yLbFormatter(ge.w.globals.series[C][M]),K='<span class="value start-value">\n  '.concat(y,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(w,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+l+'">'+(u||"")+'</span></div><div> <span class="category">'+p+": </span> "+(ge.w.globals.comboCharts?"rangeArea"===ge.w.config.series[C].type||"rangeBar"===ge.w.config.series[C].type?K:"<span>".concat(H,"</span>"):K)+" </div></div>"},mr=function(){function ge(l){j(this,ge),this.opts=l}return Be(ge,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(l){return this.hideYAxis(),tt.extend(l,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Ze(Ze({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var l=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(u){return l._getBoxTooltip(u.w,u.seriesIndex,u.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var l=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(u){return l._getBoxTooltip(u.w,u.seriesIndex,u.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(l,u){var p=u.seriesIndex,y=u.dataPointIndex,w=u.w,C=function(){return w.globals.seriesRangeEnd[p][y]-w.globals.seriesRangeStart[p][y]};return w.globals.comboCharts?"rangeBar"===w.config.series[p].type||"rangeArea"===w.config.series[p].type?C():l:C()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(l){return l.w.config.plotOptions&&l.w.config.plotOptions.bar&&l.w.config.plotOptions.bar.horizontal?(y=(p=_n(Ze(Ze({},u=l),{},{isTimeline:!0}))).color,w=p.seriesName,C=p.ylabel,M=p.startVal,B=p.endVal,Fn(Ze(Ze({},u),{},{color:y,seriesName:w,ylabel:C,start:M,end:B}))):function(u){var p=_n(u),y=p.color,w=p.seriesName,C=p.ylabel,M=p.start,B=p.end;return Fn(Ze(Ze({},u),{},{color:y,seriesName:w,ylabel:C,start:M,end:B}))}(l);var u,p,y,w,C,M,B}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(l){var u,p;return null!==(u=l.plotOptions.bar)&&void 0!==u&&u.barHeight||(l.plotOptions.bar.barHeight=2),null!==(p=l.plotOptions.bar)&&void 0!==p&&p.columnWidth||(l.plotOptions.bar.columnWidth=2),l}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(l){return y=(p=_n(u=l)).color,w=p.seriesName,C=p.ylabel,M=p.start,B=p.end,Fn(Ze(Ze({},u),{},{color:y,seriesName:w,ylabel:C,start:M,end:B}));var u,p,y,w,C,M,B}}}}},{key:"brush",value:function(l){return tt.extend(l,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(l){l.dataLabels=l.dataLabels||{},l.dataLabels.formatter=l.dataLabels.formatter||void 0;var u=l.dataLabels.formatter;return l.yaxis.forEach(function(p,y){l.yaxis[y].min=0,l.yaxis[y].max=100}),"bar"===l.chart.type&&(l.dataLabels.formatter=u||function(p){return"number"==typeof p&&p?p.toFixed(0)+"%":p}),l}},{key:"stackedBars",value:function(){var l=this.bar();return Ze(Ze({},l),{},{plotOptions:Ze(Ze({},l.plotOptions),{},{bar:Ze(Ze({},l.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(l){return l.xaxis.convertedCatToNumeric=!0,l}},{key:"convertCatToNumericXaxis",value:function(l,u,p){l.xaxis.type="numeric",l.xaxis.labels=l.xaxis.labels||{},l.xaxis.labels.formatter=l.xaxis.labels.formatter||function(C){return tt.isNumber(C)?Math.floor(C):C};var y=l.xaxis.labels.formatter,w=l.xaxis.categories&&l.xaxis.categories.length?l.xaxis.categories:l.labels;return p&&p.length&&(w=p.map(function(C){return Array.isArray(C)?C:String(C)})),w&&w.length&&(l.xaxis.labels.formatter=function(C){return tt.isNumber(C)?y(w[Math.floor(C)-1]):y(C)}),l.xaxis.categories=[],l.labels=[],l.xaxis.tickAmount=l.xaxis.tickAmount||"dataPoints",l}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(l){return l.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(l){return l.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(l){return l.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(l){return l},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(l,u,p,y,w){var C=l.globals.seriesCandleO[u][p],M=l.globals.seriesCandleH[u][p],B=l.globals.seriesCandleM[u][p],H=l.globals.seriesCandleL[u][p],K=l.globals.seriesCandleC[u][p];return l.config.series[u].type&&l.config.series[u].type!==w?'<div class="apexcharts-custom-tooltip">\n          '.concat(l.config.series[u].name?l.config.series[u].name:"series-"+(u+1),": <strong>").concat(l.globals.series[u][p],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(l.config.chart.type,'">')+"<div>".concat(y[0],': <span class="value">')+C+"</span></div>"+"<div>".concat(y[1],': <span class="value">')+M+"</span></div>"+(B?"<div>".concat(y[2],': <span class="value">')+B+"</span></div>":"")+"<div>".concat(y[3],': <span class="value">')+H+"</span></div>"+"<div>".concat(y[4],': <span class="value">')+K+"</span></div></div>"}}]),ge}(),hr=function(){function ge(l){j(this,ge),this.opts=l}return Be(ge,[{key:"init",value:function(l){var u=l.responsiveOverride,p=this.opts,y=new Xi,w=new mr(p);this.chartType=p.chart.type,p=this.extendYAxis(p),p=this.extendAnnotations(p);var C=y.init(),M={};if(p&&"object"===n(p)){var B,H,K,J,ne,de,xe,Se,Pe={};Pe=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(p.chart.type)?w[p.chart.type]():w.line(),null!==(B=p.plotOptions)&&void 0!==B&&null!==(H=B.bar)&&void 0!==H&&H.isFunnel&&(Pe=w.funnel()),p.chart.stacked&&"bar"===p.chart.type&&(Pe=w.stackedBars()),null!==(K=p.chart.brush)&&void 0!==K&&K.enabled&&(Pe=w.brush(Pe)),p.chart.stacked&&"100%"===p.chart.stackType&&(p=w.stacked100(p)),null!==(J=p.plotOptions)&&void 0!==J&&null!==(ne=J.bar)&&void 0!==ne&&ne.isDumbbell&&(p=w.dumbbell(p)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(p),p.xaxis=p.xaxis||window.Apex.xaxis||{},u||(p.xaxis.convertedCatToNumeric=!1),(null!==(de=(p=this.checkForCatToNumericXAxis(this.chartType,Pe,p)).chart.sparkline)&&void 0!==de&&de.enabled||null!==(xe=window.Apex.chart)&&void 0!==xe&&null!==(Se=xe.sparkline)&&void 0!==Se&&Se.enabled)&&(Pe=w.sparkline(Pe)),M=tt.extend(C,Pe)}var Te=tt.extend(M,window.Apex);return C=tt.extend(Te,p),this.handleUserInputErrors(C)}},{key:"checkForCatToNumericXAxis",value:function(l,u,p){var y,w,C=new mr(p);return("bar"===l||"boxPlot"===l)&&(null===(y=p.plotOptions)||void 0===y||null===(w=y.bar)||void 0===w?void 0:w.horizontal)||"pie"===l||"polarArea"===l||"donut"===l||"radar"===l||"radialBar"===l||"heatmap"===l||!("datetime"!==p.xaxis.type&&"numeric"!==p.xaxis.type)||"between"===(p.xaxis.tickPlacement?p.xaxis.tickPlacement:u.xaxis&&u.xaxis.tickPlacement)||(p=C.convertCatToNumeric(p)),p}},{key:"extendYAxis",value:function(l,u){var p=new Xi;(void 0===l.yaxis||!l.yaxis||Array.isArray(l.yaxis)&&0===l.yaxis.length)&&(l.yaxis={}),l.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(l.yaxis=tt.extend(l.yaxis,window.Apex.yaxis)),l.yaxis=l.yaxis.constructor!==Array?[tt.extend(p.yAxis,l.yaxis)]:tt.extendArray(l.yaxis,p.yAxis);var y=!1;l.yaxis.forEach(function(C){C.logarithmic&&(y=!0)});var w=l.series;return u&&!w&&(w=u.config.series),y&&w.length!==l.yaxis.length&&w.length&&(l.yaxis=w.map(function(C,M){if(C.name||(w[M].name="series-".concat(M+1)),l.yaxis[M])return l.yaxis[M].seriesName=w[M].name,l.yaxis[M];var B=tt.extend(p.yAxis,l.yaxis[0]);return B.show=!1,B})),y&&w.length>1&&w.length!==l.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),l}},{key:"extendAnnotations",value:function(l){return void 0===l.annotations&&(l.annotations={},l.annotations.yaxis=[],l.annotations.xaxis=[],l.annotations.points=[]),l=this.extendYAxisAnnotations(l),l=this.extendXAxisAnnotations(l),this.extendPointAnnotations(l)}},{key:"extendYAxisAnnotations",value:function(l){var u=new Xi;return l.annotations.yaxis=tt.extendArray(void 0!==l.annotations.yaxis?l.annotations.yaxis:[],u.yAxisAnnotation),l}},{key:"extendXAxisAnnotations",value:function(l){var u=new Xi;return l.annotations.xaxis=tt.extendArray(void 0!==l.annotations.xaxis?l.annotations.xaxis:[],u.xAxisAnnotation),l}},{key:"extendPointAnnotations",value:function(l){var u=new Xi;return l.annotations.points=tt.extendArray(void 0!==l.annotations.points?l.annotations.points:[],u.pointAnnotation),l}},{key:"checkForDarkTheme",value:function(l){l.theme&&"dark"===l.theme.mode&&(l.tooltip||(l.tooltip={}),"light"!==l.tooltip.theme&&(l.tooltip.theme="dark"),l.chart.foreColor||(l.chart.foreColor="#f6f7f8"),l.chart.background||(l.chart.background="#424242"),l.theme.palette||(l.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(l){var u=l;if(u.tooltip.shared&&u.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===u.chart.type&&u.plotOptions.bar.horizontal){if(u.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");u.yaxis[0].reversed&&(u.yaxis[0].opposite=!0),u.xaxis.tooltip.enabled=!1,u.yaxis[0].tooltip.enabled=!1,u.chart.zoom.enabled=!1}return"bar"!==u.chart.type&&"rangeBar"!==u.chart.type||u.tooltip.shared&&"barWidth"===u.xaxis.crosshairs.width&&u.series.length>1&&(u.xaxis.crosshairs.width="tickWidth"),"candlestick"!==u.chart.type&&"boxPlot"!==u.chart.type||u.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(u.chart.type," chart is not supported.")),u.yaxis[0].reversed=!1),u}}]),ge}(),Nr=function(){function ge(){j(this,ge)}return Be(ge,[{key:"initGlobalVars",value:function(l){l.series=[],l.seriesCandleO=[],l.seriesCandleH=[],l.seriesCandleM=[],l.seriesCandleL=[],l.seriesCandleC=[],l.seriesRangeStart=[],l.seriesRangeEnd=[],l.seriesRange=[],l.seriesPercent=[],l.seriesGoals=[],l.seriesX=[],l.seriesZ=[],l.seriesNames=[],l.seriesTotals=[],l.seriesLog=[],l.seriesColors=[],l.stackedSeriesTotals=[],l.seriesXvalues=[],l.seriesYvalues=[],l.labels=[],l.hasXaxisGroups=!1,l.groups=[],l.hasSeriesGroups=!1,l.seriesGroups=[],l.categoryLabels=[],l.timescaleLabels=[],l.noLabelsProvided=!1,l.resizeTimer=null,l.selectionResizeTimer=null,l.delayedElements=[],l.pointsArray=[],l.dataLabelsRects=[],l.isXNumeric=!1,l.skipLastTimelinelabel=!1,l.skipFirstTimelinelabel=!1,l.isDataXYZ=!1,l.isMultiLineX=!1,l.isMultipleYAxis=!1,l.maxY=-Number.MAX_VALUE,l.minY=Number.MIN_VALUE,l.minYArr=[],l.maxYArr=[],l.maxX=-Number.MAX_VALUE,l.minX=Number.MAX_VALUE,l.initialMaxX=-Number.MAX_VALUE,l.initialMinX=Number.MAX_VALUE,l.maxDate=0,l.minDate=Number.MAX_VALUE,l.minZ=Number.MAX_VALUE,l.maxZ=-Number.MAX_VALUE,l.minXDiff=Number.MAX_VALUE,l.yAxisScale=[],l.xAxisScale=null,l.xAxisTicksPositions=[],l.yLabelsCoords=[],l.yTitleCoords=[],l.barPadForNumericAxis=0,l.padHorizontal=0,l.xRange=0,l.yRange=[],l.zRange=0,l.dataPoints=0,l.xTickAmount=0,l.multiAxisTickAmount=0}},{key:"globalVars",value:function(l){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:l.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===l.chart.toolbar.autoSelected&&l.chart.toolbar.tools.zoom&&l.chart.zoom.enabled,panEnabled:"pan"===l.chart.toolbar.autoSelected&&l.chart.toolbar.tools.pan,selectionEnabled:"selection"===l.chart.toolbar.autoSelected&&l.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(l){var u=this.globalVars(l);return this.initGlobalVars(u),u.initialConfig=tt.extend({},l),u.initialSeries=tt.clone(l.series),u.lastXAxis=tt.clone(u.initialConfig.xaxis),u.lastYAxis=tt.clone(u.initialConfig.yaxis),u}}]),ge}(),Si=function(){function ge(l){j(this,ge),this.opts=l}return Be(ge,[{key:"init",value:function(){var l=new hr(this.opts).init({responsiveOverride:!1});return{config:l,globals:(new Nr).init(l)}}}]),ge}(),kn=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.opts=null,this.seriesIndex=0}return Be(ge,[{key:"clippedImgArea",value:function(l){var u=this.w,p=u.config,y=parseInt(u.globals.gridWidth,10),w=parseInt(u.globals.gridHeight,10),C=y>w?y:w,M=l.image,B=0,H=0;void 0===l.width&&void 0===l.height?void 0!==p.fill.image.width&&void 0!==p.fill.image.height?(B=p.fill.image.width+1,H=p.fill.image.height):(B=C+1,H=C):(B=l.width,H=l.height);var K=document.createElementNS(u.globals.SVGNS,"pattern");kt.setAttrs(K,{id:l.patternID,patternUnits:l.patternUnits?l.patternUnits:"userSpaceOnUse",width:B+"px",height:H+"px"});var J=document.createElementNS(u.globals.SVGNS,"image");K.appendChild(J),J.setAttributeNS(window.SVG.xlink,"href",M),kt.setAttrs(J,{x:0,y:0,preserveAspectRatio:"none",width:B+"px",height:H+"px"}),J.style.opacity=l.opacity,u.globals.dom.elDefs.node.appendChild(K)}},{key:"getSeriesIndex",value:function(l){var u=this.w,p=u.config.chart.type;return this.seriesIndex=("bar"===p||"rangeBar"===p)&&u.config.plotOptions.bar.distributed||"heatmap"===p||"treemap"===p?l.seriesNumber:l.seriesNumber%u.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(l){var u=this.w;this.opts=l;var p,y,w,C=this.w.config;this.seriesIndex=this.getSeriesIndex(l);var M=this.getFillColors()[this.seriesIndex];void 0!==u.globals.seriesColors[this.seriesIndex]&&(M=u.globals.seriesColors[this.seriesIndex]),"function"==typeof M&&(M=M({seriesIndex:this.seriesIndex,dataPointIndex:l.dataPointIndex,value:l.value,w:u}));var B=l.fillType?l.fillType:this.getFillType(this.seriesIndex),H=Array.isArray(C.fill.opacity)?C.fill.opacity[this.seriesIndex]:C.fill.opacity;l.color&&(M=l.color),M||(M="#fff",console.warn("undefined color - ApexCharts"));var K=M;if(-1===M.indexOf("rgb")?M.length<9&&(K=tt.hexToRgba(M,H)):M.indexOf("rgba")>-1&&(H=tt.getOpacityFromRGBA(M)),l.opacity&&(H=l.opacity),"pattern"===B&&(y=this.handlePatternFill({fillConfig:l.fillConfig,patternFill:y,fillColor:M,fillOpacity:H,defaultColor:K})),"gradient"===B&&(w=this.handleGradientFill({fillConfig:l.fillConfig,fillColor:M,fillOpacity:H,i:this.seriesIndex})),"image"===B){var J=C.fill.image.src,ne=l.patternID?l.patternID:"";this.clippedImgArea({opacity:H,image:Array.isArray(J)?l.seriesNumber<J.length?J[l.seriesNumber]:J[0]:J,width:l.width?l.width:void 0,height:l.height?l.height:void 0,patternUnits:l.patternUnits,patternID:"pattern".concat(u.globals.cuid).concat(l.seriesNumber+1).concat(ne)}),p="url(#pattern".concat(u.globals.cuid).concat(l.seriesNumber+1).concat(ne,")")}else p="gradient"===B?w:"pattern"===B?y:K;return l.solid&&(p=K),p}},{key:"getFillType",value:function(l){var u=this.w;return Array.isArray(u.config.fill.type)?u.config.fill.type[l]:u.config.fill.type}},{key:"getFillColors",value:function(){var l=this.w,u=l.config,p=this.opts,y=[];return l.globals.comboCharts?"line"===l.config.series[this.seriesIndex].type?Array.isArray(l.globals.stroke.colors)?y=l.globals.stroke.colors:y.push(l.globals.stroke.colors):Array.isArray(l.globals.fill.colors)?y=l.globals.fill.colors:y.push(l.globals.fill.colors):"line"===u.chart.type?Array.isArray(l.globals.stroke.colors)?y=l.globals.stroke.colors:y.push(l.globals.stroke.colors):Array.isArray(l.globals.fill.colors)?y=l.globals.fill.colors:y.push(l.globals.fill.colors),void 0!==p.fillColors&&(y=[],Array.isArray(p.fillColors)?y=p.fillColors.slice():y.push(p.fillColors)),y}},{key:"handlePatternFill",value:function(l){var u=l.fillConfig,y=l.fillColor,w=l.fillOpacity,C=l.defaultColor,M=this.w.config.fill;u&&(M=u);var B=this.opts,H=new kt(this.ctx),K=Array.isArray(M.pattern.strokeWidth)?M.pattern.strokeWidth[this.seriesIndex]:M.pattern.strokeWidth,J=y;return Array.isArray(M.pattern.style)?void 0!==M.pattern.style[B.seriesNumber]?H.drawPattern(M.pattern.style[B.seriesNumber],M.pattern.width,M.pattern.height,J,K,w):C:H.drawPattern(M.pattern.style,M.pattern.width,M.pattern.height,J,K,w)}},{key:"handleGradientFill",value:function(l){var u=l.fillColor,p=l.fillOpacity,y=l.fillConfig,w=l.i,C=this.w.config.fill;y&&(C=Ze(Ze({},C),y));var M,B=this.opts,H=new kt(this.ctx),K=new tt,J=C.gradient.type,ne=u,de=void 0===C.gradient.opacityFrom?p:Array.isArray(C.gradient.opacityFrom)?C.gradient.opacityFrom[w]:C.gradient.opacityFrom;ne.indexOf("rgba")>-1&&(de=tt.getOpacityFromRGBA(ne));var xe=void 0===C.gradient.opacityTo?p:Array.isArray(C.gradient.opacityTo)?C.gradient.opacityTo[w]:C.gradient.opacityTo;if(void 0===C.gradient.gradientToColors||0===C.gradient.gradientToColors.length)M=K.shadeColor("dark"===C.gradient.shade?-1*parseFloat(C.gradient.shadeIntensity):parseFloat(C.gradient.shadeIntensity),u.indexOf("rgb")>-1?tt.rgb2hex(u):u);else if(C.gradient.gradientToColors[B.seriesNumber]){var Se=C.gradient.gradientToColors[B.seriesNumber];M=Se,Se.indexOf("rgba")>-1&&(xe=tt.getOpacityFromRGBA(Se))}else M=u;if(C.gradient.gradientFrom&&(ne=C.gradient.gradientFrom),C.gradient.gradientTo&&(M=C.gradient.gradientTo),C.gradient.inverseColors){var Pe=ne;ne=M,M=Pe}return ne.indexOf("rgb")>-1&&(ne=tt.rgb2hex(ne)),M.indexOf("rgb")>-1&&(M=tt.rgb2hex(M)),H.drawGradient(J,ne,M,de,xe,B.size,C.gradient.stops,C.gradient.colorStops,w)}}]),ge}(),Jn=function(){function ge(l,u){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"setGlobalMarkerSize",value:function(){var l=this.w;if(l.globals.markers.size=Array.isArray(l.config.markers.size)?l.config.markers.size:[l.config.markers.size],l.globals.markers.size.length>0){if(l.globals.markers.size.length<l.globals.series.length+1)for(var u=0;u<=l.globals.series.length;u++)void 0===l.globals.markers.size[u]&&l.globals.markers.size.push(l.globals.markers.size[0])}else l.globals.markers.size=l.config.series.map(function(p){return l.config.markers.size})}},{key:"plotChartMarkers",value:function(l,u,p,y){var w,C=arguments.length>4&&void 0!==arguments[4]&&arguments[4],M=this.w,B=u,H=l,K=null,J=new kt(this.ctx),ne=M.config.markers.discrete&&M.config.markers.discrete.length;if((M.globals.markers.size[u]>0||C||ne)&&(K=J.group({class:C||ne?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(M.globals.cuid,")")),Array.isArray(H.x))for(var de=0;de<H.x.length;de++){var xe=p;1===p&&0===de&&(xe=0),1===p&&1===de&&(xe=1);var Se="apexcharts-marker";if("line"!==M.config.chart.type&&"area"!==M.config.chart.type||M.globals.comboCharts||M.config.tooltip.intersect||(Se+=" no-pointer-events"),(Array.isArray(M.config.markers.size)?M.globals.markers.size[u]>0:M.config.markers.size>0)||C||ne){tt.isNumber(H.y[de])?Se+=" w".concat(tt.randomId()):Se="apexcharts-nullpoint";var Pe=this.getMarkerConfig({cssClass:Se,seriesIndex:u,dataPointIndex:xe});M.config.series[B].data[xe]&&(M.config.series[B].data[xe].fillColor&&(Pe.pointFillColor=M.config.series[B].data[xe].fillColor),M.config.series[B].data[xe].strokeColor&&(Pe.pointStrokeColor=M.config.series[B].data[xe].strokeColor)),y&&(Pe.pSize=y),(H.x[de]<0||H.x[de]>M.globals.gridWidth||H.y[de]<-M.globals.markers.largestSize||H.y[de]>M.globals.gridHeight+M.globals.markers.largestSize)&&(Pe.pSize=0),(w=J.drawMarker(H.x[de],H.y[de],Pe)).attr("rel",xe),w.attr("j",xe),w.attr("index",u),w.node.setAttribute("default-marker-size",Pe.pSize),new Mi(this.ctx).setSelectionFilter(w,u,xe),this.addEvents(w),K&&K.add(w)}else void 0===M.globals.pointsArray[u]&&(M.globals.pointsArray[u]=[]),M.globals.pointsArray[u].push([H.x[de],H.y[de]])}return K}},{key:"getMarkerConfig",value:function(l){var u=l.cssClass,p=l.seriesIndex,y=l.dataPointIndex,w=void 0===y?null:y,C=l.finishRadius,M=void 0===C?null:C,B=this.w,H=this.getMarkerStyle(p),K=B.globals.markers.size[p],J=B.config.markers;return null!==w&&J.discrete.length&&J.discrete.map(function(ne){ne.seriesIndex===p&&ne.dataPointIndex===w&&(H.pointStrokeColor=ne.strokeColor,H.pointFillColor=ne.fillColor,K=ne.size,H.pointShape=ne.shape)}),{pSize:null===M?K:M,pRadius:J.radius,width:Array.isArray(J.width)?J.width[p]:J.width,height:Array.isArray(J.height)?J.height[p]:J.height,pointStrokeWidth:Array.isArray(J.strokeWidth)?J.strokeWidth[p]:J.strokeWidth,pointStrokeColor:H.pointStrokeColor,pointFillColor:H.pointFillColor,shape:H.pointShape||(Array.isArray(J.shape)?J.shape[p]:J.shape),class:u,pointStrokeOpacity:Array.isArray(J.strokeOpacity)?J.strokeOpacity[p]:J.strokeOpacity,pointStrokeDashArray:Array.isArray(J.strokeDashArray)?J.strokeDashArray[p]:J.strokeDashArray,pointFillOpacity:Array.isArray(J.fillOpacity)?J.fillOpacity[p]:J.fillOpacity,seriesIndex:p}}},{key:"addEvents",value:function(l){var u=this.w,p=new kt(this.ctx);l.node.addEventListener("mouseenter",p.pathMouseEnter.bind(this.ctx,l)),l.node.addEventListener("mouseleave",p.pathMouseLeave.bind(this.ctx,l)),l.node.addEventListener("mousedown",p.pathMouseDown.bind(this.ctx,l)),l.node.addEventListener("click",u.config.markers.onClick),l.node.addEventListener("dblclick",u.config.markers.onDblClick),l.node.addEventListener("touchstart",p.pathMouseDown.bind(this.ctx,l),{passive:!0})}},{key:"getMarkerStyle",value:function(l){var u=this.w,p=u.globals.markers.colors,y=u.config.markers.strokeColor||u.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(y)?y[l]:y,pointFillColor:Array.isArray(p)?p[l]:p}}}]),ge}(),ts=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return Be(ge,[{key:"draw",value:function(l,u,p){var y=this.w,w=new kt(this.ctx),C=p.realIndex,M=p.pointsPos,B=p.zRatio,H=p.elParent,K=w.group({class:"apexcharts-series-markers apexcharts-series-".concat(y.config.chart.type)});if(K.attr("clip-path","url(#gridRectMarkerMask".concat(y.globals.cuid,")")),Array.isArray(M.x))for(var J=0;J<M.x.length;J++){var ne=u+1,de=!0;0===u&&0===J&&(ne=0),0===u&&1===J&&(ne=1);var xe=0,Se=y.globals.markers.size[C];if(B!==1/0){var Pe=y.config.plotOptions.bubble;Se=y.globals.seriesZ[C][ne],Pe.zScaling&&(Se/=B),Pe.minBubbleRadius&&Se<Pe.minBubbleRadius&&(Se=Pe.minBubbleRadius),Pe.maxBubbleRadius&&Se>Pe.maxBubbleRadius&&(Se=Pe.maxBubbleRadius)}y.config.chart.animations.enabled||(xe=Se);var Ne=M.y[J];if(xe=xe||0,null!==Ne&&void 0!==y.globals.series[C][ne]||(de=!1),de){var U=this.drawPoint(M.x[J],Ne,xe,Se,C,ne,u);K.add(U)}H.add(K)}}},{key:"drawPoint",value:function(l,u,p,y,w,C,M){var B=this.w,H=w,K=new Ci(this.ctx),J=new Mi(this.ctx),ne=new kn(this.ctx),de=new Jn(this.ctx),xe=new kt(this.ctx),Se=de.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:H,dataPointIndex:C,finishRadius:"bubble"===B.config.chart.type||B.globals.comboCharts&&B.config.series[w]&&"bubble"===B.config.series[w].type?y:null});y=Se.pSize;var Pe,Te=ne.fillPath({seriesNumber:w,dataPointIndex:C,color:Se.pointFillColor,patternUnits:"objectBoundingBox",value:B.globals.series[w][M]});if("circle"===Se.shape?Pe=xe.drawCircle(p):"square"!==Se.shape&&"rect"!==Se.shape||(Pe=xe.drawRect(0,0,Se.width-Se.pointStrokeWidth/2,Se.height-Se.pointStrokeWidth/2,Se.pRadius)),B.config.series[H].data[C]&&B.config.series[H].data[C].fillColor&&(Te=B.config.series[H].data[C].fillColor),Pe.attr({x:l-Se.width/2-Se.pointStrokeWidth/2,y:u-Se.height/2-Se.pointStrokeWidth/2,cx:l,cy:u,fill:Te,"fill-opacity":Se.pointFillOpacity,stroke:Se.pointStrokeColor,r:y,"stroke-width":Se.pointStrokeWidth,"stroke-dasharray":Se.pointStrokeDashArray,"stroke-opacity":Se.pointStrokeOpacity}),B.config.chart.dropShadow.enabled&&J.dropShadow(Pe,B.config.chart.dropShadow,w),!this.initialAnim||B.globals.dataChanged||B.globals.resized?B.globals.animationEnded=!0:K.animateMarker(Pe,0,"circle"===Se.shape?y:{width:Se.width,height:Se.height},B.config.chart.animations.speed,B.globals.easing,function(){window.setTimeout(function(){K.animationCompleted(Pe)},100)}),B.globals.dataChanged&&"circle"===Se.shape)if(this.dynamicAnim){var le,we,Le,je,lt=B.config.chart.animations.dynamicAnimation.speed;null!=(je=B.globals.previousPaths[w]&&B.globals.previousPaths[w][M])&&(le=je.x,we=je.y,Le=void 0!==je.r?je.r:y);for(var jt=0;jt<B.globals.collapsedSeries.length;jt++)B.globals.collapsedSeries[jt].index===w&&(lt=1,y=0);0===l&&0===u&&(y=0),K.animateCircle(Pe,{cx:le,cy:we,r:Le},{cx:l,cy:u,r:y},lt,B.globals.easing)}else Pe.attr({r:y});return Pe.attr({rel:C,j:C,index:w,"default-marker-size":y}),J.setSelectionFilter(Pe,w,C),de.addEvents(Pe),Pe.node.classList.add("apexcharts-marker"),Pe}},{key:"centerTextInBubble",value:function(l){return{y:l+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),ge}(),Xr=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"dataLabelsCorrection",value:function(l,u,p,y,w,C,M){var B=this.w,H=!1,K=new kt(this.ctx).getTextRects(p,M),J=K.width,ne=K.height;if(u<0&&(u=0),u>B.globals.gridHeight+ne&&(u=B.globals.gridHeight+ne/2),void 0===B.globals.dataLabelsRects[y]&&(B.globals.dataLabelsRects[y]=[]),B.globals.dataLabelsRects[y].push({x:l,y:u,width:J,height:ne}),void 0!==B.globals.dataLabelsRects[y][B.globals.dataLabelsRects[y].length-2]){var Se=B.globals.dataLabelsRects[y][void 0!==B.globals.lastDrawnDataLabelsIndexes[y]?B.globals.lastDrawnDataLabelsIndexes[y][B.globals.lastDrawnDataLabelsIndexes[y].length-1]:0];(l>Se.x+Se.width||u>Se.y+Se.height||u+ne<Se.y||l+J<Se.x)&&(H=!0)}return(0===w||C)&&(H=!0),{x:l,y:u,textRects:K,drawnextLabel:H}}},{key:"drawDataLabel",value:function(l){var u=this,p=l.type,y=l.pos,w=l.i,C=l.j,M=l.isRangeStart,B=l.strokeWidth,H=void 0===B?2:B,K=this.w,J=new kt(this.ctx),ne=K.config.dataLabels,de=0,xe=0,Se=C,Pe=null;if(-1!==K.globals.collapsedSeriesIndices.indexOf(w)||!ne.enabled||!Array.isArray(y.x))return Pe;Pe=J.group({class:"apexcharts-data-labels"});for(var Te=0;Te<y.x.length;Te++)if(de=y.x[Te]+ne.offsetX,xe=y.y[Te]+ne.offsetY+H,!isNaN(de)){1===C&&0===Te&&(Se=0),1===C&&1===Te&&(Se=1);var Ne=K.globals.series[w][Se];"rangeArea"===p&&(Ne=M?K.globals.seriesRangeStart[w][Se]:K.globals.seriesRangeEnd[w][Se]);var U="",le=function(we){return K.config.dataLabels.formatter(we,{ctx:u.ctx,seriesIndex:w,dataPointIndex:Se,w:K})};"bubble"===K.config.chart.type?(U=le(Ne=K.globals.seriesZ[w][Se]),xe=y.y[Te],xe=new ts(this.ctx).centerTextInBubble(xe,w,Se).y):void 0!==Ne&&(U=le(Ne)),this.plotDataLabelsText({x:de,y:xe,text:U,i:w,j:Se,parent:Pe,offsetCorrection:!0,dataLabelsConfig:K.config.dataLabels})}return Pe}},{key:"plotDataLabelsText",value:function(l){var u=this.w,p=new kt(this.ctx),y=l.x,w=l.y,C=l.i,M=l.j,B=l.text,H=l.textAnchor,K=l.fontSize,J=l.parent,ne=l.dataLabelsConfig,de=l.color,xe=l.alwaysDrawDataLabel,Se=l.offsetCorrection;if(!(Array.isArray(u.config.dataLabels.enabledOnSeries)&&u.config.dataLabels.enabledOnSeries.indexOf(C)<0)){var Pe={x:y,y:w,drawnextLabel:!0,textRects:null};Se&&(Pe=this.dataLabelsCorrection(y,w,B,C,M,xe,parseInt(ne.style.fontSize,10))),u.globals.zoomed||(y=Pe.x,w=Pe.y),Pe.textRects&&(y<-20-Pe.textRects.width||y>u.globals.gridWidth+Pe.textRects.width+30)&&(B="");var Te=u.globals.dataLabels.style.colors[C];(("bar"===u.config.chart.type||"rangeBar"===u.config.chart.type)&&u.config.plotOptions.bar.distributed||u.config.dataLabels.distributed)&&(Te=u.globals.dataLabels.style.colors[M]),"function"==typeof Te&&(Te=Te({series:u.globals.series,seriesIndex:C,dataPointIndex:M,w:u})),de&&(Te=de);var Ne=ne.offsetX,U=ne.offsetY;if("bar"!==u.config.chart.type&&"rangeBar"!==u.config.chart.type||(Ne=0,U=0),Pe.drawnextLabel){var le=p.drawText({width:100,height:parseInt(ne.style.fontSize,10),x:y+Ne,y:w+U,foreColor:Te,textAnchor:H||ne.textAnchor,text:B,fontSize:K||ne.style.fontSize,fontFamily:ne.style.fontFamily,fontWeight:ne.style.fontWeight||"normal"});if(le.attr({class:"apexcharts-datalabel",cx:y,cy:w}),ne.dropShadow.enabled){var we=ne.dropShadow;new Mi(this.ctx).dropShadow(le,we)}J.add(le),void 0===u.globals.lastDrawnDataLabelsIndexes[C]&&(u.globals.lastDrawnDataLabelsIndexes[C]=[]),u.globals.lastDrawnDataLabelsIndexes[C].push(M)}}}},{key:"addBackgroundToDataLabel",value:function(l,u){var p=this.w,y=p.config.dataLabels.background,w=y.padding,C=y.padding/2,M=u.width,B=u.height,H=new kt(this.ctx).drawRect(u.x-w,u.y-C/2,M+2*w,B+C,y.borderRadius,"transparent"===p.config.chart.background?"#fff":p.config.chart.background,y.opacity,y.borderWidth,y.borderColor);return y.dropShadow.enabled&&new Mi(this.ctx).dropShadow(H,y.dropShadow),H}},{key:"dataLabelsBackground",value:function(){var l=this.w;if("bubble"!==l.config.chart.type)for(var u=l.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),p=0;p<u.length;p++){var y=u[p],w=y.getBBox(),C=null;if(w.width&&w.height&&(C=this.addBackgroundToDataLabel(y,w)),C){y.parentNode.insertBefore(C.node,y);var M=y.getAttribute("fill");!l.config.chart.animations.enabled||l.globals.resized||l.globals.dataChanged?C.attr({fill:M}):C.animate().attr({fill:M}),y.setAttribute("fill",l.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var l=this.w,u=l.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),p=l.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),y=0;y<u.length;y++)p&&p.insertBefore(u[y],p.nextSibling)}}]),ge}(),Fr=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.legendInactiveClass="legend-mouseover-inactive"}return Be(ge,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(l){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(tt.escapeString(l),"']"))}},{key:"isSeriesHidden",value:function(l){var u=this.getSeriesByName(l),p=parseInt(u.getAttribute("data:realIndex"),10);return{isHidden:u.classList.contains("apexcharts-series-collapsed"),realIndex:p}}},{key:"addCollapsedClassToSeries",value:function(l,u){var p=this.w;function y(w){for(var C=0;C<w.length;C++)w[C].index===u&&l.node.classList.add("apexcharts-series-collapsed")}y(p.globals.collapsedSeries),y(p.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(l){var u=this.isSeriesHidden(l);return this.ctx.legend.legendHelpers.toggleDataSeries(u.realIndex,u.isHidden),u.isHidden}},{key:"showSeries",value:function(l){var u=this.isSeriesHidden(l);u.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(u.realIndex,!0)}},{key:"hideSeries",value:function(l){var u=this.isSeriesHidden(l);u.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(u.realIndex,!1)}},{key:"resetSeries",value:function(){var l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],y=this.w,w=tt.clone(y.globals.initialSeries);y.globals.previousPaths=[],p?(y.globals.collapsedSeries=[],y.globals.ancillaryCollapsedSeries=[],y.globals.collapsedSeriesIndices=[],y.globals.ancillaryCollapsedSeriesIndices=[]):w=this.emptyCollapsedSeries(w),y.config.series=w,l&&(u&&(y.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(w,y.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(l){for(var u=this.w,p=0;p<l.length;p++)u.globals.collapsedSeriesIndices.indexOf(p)>-1&&(l[p].data=[]);return l}},{key:"toggleSeriesOnHover",value:function(l,u){var p=this.w;u||(u=l.target);var y=p.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===l.type){var w=parseInt(u.getAttribute("rel"),10)-1,C=null,M=null;p.globals.axisCharts||"radialBar"===p.config.chart.type?p.globals.axisCharts?(C=p.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(w,"']")),M=p.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(w,"']"))):C=p.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(w+1,"']")):C=p.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(w+1,"'] path"));for(var B=0;B<y.length;B++)y[B].classList.add(this.legendInactiveClass);null!==C&&(p.globals.axisCharts||C.parentNode.classList.remove(this.legendInactiveClass),C.classList.remove(this.legendInactiveClass),null!==M&&M.classList.remove(this.legendInactiveClass))}else if("mouseout"===l.type)for(var H=0;H<y.length;H++)y[H].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(l,u){var p=this,y=this.w,w=y.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),C=function(B){for(var H=0;H<w.length;H++)w[H].classList[B](p.legendInactiveClass)};if("mousemove"===l.type){var M=parseInt(u.getAttribute("rel"),10)-1;C("add"),function(B){for(var H=0;H<w.length;H++){var K=parseInt(w[H].getAttribute("val"),10);K>=B.from&&K<=B.to&&w[H].classList.remove(p.legendInactiveClass)}}(y.config.plotOptions.heatmap.colorScale.ranges[M])}else"mouseout"===l.type&&C("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],p=this.w,y=0;if(p.config.series.length>1)for(var w=p.config.series.map(function(M,B){return M.data&&M.data.length>0&&-1===p.globals.collapsedSeriesIndices.indexOf(B)&&(!p.globals.comboCharts||0===u.length||u.length&&u.indexOf(p.config.series[B].type)>-1)?B:-1}),C="asc"===l?0:w.length-1;"asc"===l?C<w.length:C>=0;"asc"===l?C++:C--)if(-1!==w[C]){y=w[C];break}return y}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(l,u){return"bar"===l.type||"column"===l.type?u:-1}).filter(function(l){return-1!==l}):this.w.config.series.map(function(l,u){return u})}},{key:"getPreviousPaths",value:function(){var l=this.w;function u(C,M,B){for(var H=C[M].childNodes,K={type:B,paths:[],realIndex:C[M].getAttribute("data:realIndex")},J=0;J<H.length;J++)if(H[J].hasAttribute("pathTo")){var ne=H[J].getAttribute("pathTo");K.paths.push({d:ne})}l.globals.previousPaths.push(K)}l.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(C){for(var B=l.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(C,"-series .apexcharts-series")),H=0;H<B.length;H++)u(B,H,C)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var p=l.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l.config.chart.type," .apexcharts-series"));if(p.length>0)for(var y=function(C){for(var M=l.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(C,"'] rect")),B=[],H=function(J){var ne=function(xe){return M[J].getAttribute(xe)},de={x:parseFloat(ne("x")),y:parseFloat(ne("y")),width:parseFloat(ne("width")),height:parseFloat(ne("height"))};B.push({rect:de,color:M[J].getAttribute("color")})},K=0;K<M.length;K++)H(K);l.globals.previousPaths.push(B)},w=0;w<p.length;w++)y(w);l.globals.axisCharts||(l.globals.previousPaths=l.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(l){var u=this.w,p=u.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l,"-series .apexcharts-series"));if(p.length>0)for(var y=0;y<p.length;y++){for(var w=u.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l,"-series .apexcharts-series[data\\:realIndex='").concat(y,"'] circle")),C=[],M=0;M<w.length;M++)C.push({x:w[M].getAttribute("cx"),y:w[M].getAttribute("cy"),r:w[M].getAttribute("r")});u.globals.previousPaths.push(C)}}},{key:"clearPreviousPaths",value:function(){var l=this.w;l.globals.previousPaths=[],l.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var l=this.w,u=l.config.noData,p=new kt(this.ctx),y=l.globals.svgWidth/2,w=l.globals.svgHeight/2,C="middle";if(l.globals.noData=!0,l.globals.animationEnded=!0,"left"===u.align?(y=10,C="start"):"right"===u.align&&(y=l.globals.svgWidth-10,C="end"),"top"===u.verticalAlign?w=50:"bottom"===u.verticalAlign&&(w=l.globals.svgHeight-50),y+=u.offsetX,w=w+parseInt(u.style.fontSize,10)+2+u.offsetY,void 0!==u.text&&""!==u.text){var M=p.drawText({x:y,y:w,text:u.text,textAnchor:C,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,foreColor:u.style.color,opacity:1,class:"apexcharts-text-nodata"});l.globals.dom.Paper.add(M)}}},{key:"setNullSeriesToZeroValues",value:function(l){for(var u=this.w,p=0;p<l.length;p++)if(0===l[p].length)for(var y=0;y<l[u.globals.maxValsInArrayIndex].length;y++)l[p].push(0);return l}},{key:"hasAllSeriesEqualX",value:function(){for(var l=!0,u=this.w,p=this.filteredSeriesX(),y=0;y<p.length-1;y++)if(p[y][0]!==p[y+1][0]){l=!1;break}return u.globals.allSeriesHasEqualX=l,l}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(u){return u.length>0?u:[]})}}]),ge}(),En=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Oi(this.ctx)}return Be(ge,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var l=this.w.config.series.slice(),u=new Fr(this.ctx);if(this.activeSeriesIndex=u.getActiveConfigSeriesIndex(),void 0!==l[this.activeSeriesIndex].data&&l[this.activeSeriesIndex].data.length>0&&null!==l[this.activeSeriesIndex].data[0]&&void 0!==l[this.activeSeriesIndex].data[0].x&&null!==l[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var l=this.w.config.series.slice(),u=new Fr(this.ctx);if(this.activeSeriesIndex=u.getActiveConfigSeriesIndex(),void 0!==l[this.activeSeriesIndex].data&&l[this.activeSeriesIndex].data.length>0&&null!=l[this.activeSeriesIndex].data[0]&&l[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(l,u){for(var p=this.w.config,y=this.w.globals,w="boxPlot"===p.chart.type||"boxPlot"===p.series[u].type,C=0;C<l[u].data.length;C++)if(void 0!==l[u].data[C][1]&&(Array.isArray(l[u].data[C][1])&&4===l[u].data[C][1].length&&!w?this.twoDSeries.push(tt.parseNumber(l[u].data[C][1][3])):this.twoDSeries.push(tt.parseNumber(l[u].data[C].length>=5?l[u].data[C][4]:l[u].data[C][1])),y.dataFormatXNumeric=!0),"datetime"===p.xaxis.type){var M=new Date(l[u].data[C][0]);M=new Date(M).getTime(),this.twoDSeriesX.push(M)}else this.twoDSeriesX.push(l[u].data[C][0]);for(var B=0;B<l[u].data.length;B++)void 0!==l[u].data[B][2]&&(this.threeDSeries.push(l[u].data[B][2]),y.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(l,u){var p=this.w.config,y=this.w.globals,w=new qi(this.ctx),C=u;y.collapsedSeriesIndices.indexOf(u)>-1&&(C=this.activeSeriesIndex);for(var M=0;M<l[u].data.length;M++)void 0!==l[u].data[M].y&&(Array.isArray(l[u].data[M].y)?this.twoDSeries.push(tt.parseNumber(l[u].data[M].y[l[u].data[M].y.length-1])):this.twoDSeries.push(tt.parseNumber(l[u].data[M].y))),void 0!==l[u].data[M].goals&&Array.isArray(l[u].data[M].goals)?(void 0===this.seriesGoals[u]&&(this.seriesGoals[u]=[]),this.seriesGoals[u].push(l[u].data[M].goals)):(void 0===this.seriesGoals[u]&&(this.seriesGoals[u]=[]),this.seriesGoals[u].push(null));for(var B=0;B<l[C].data.length;B++){var H="string"==typeof l[C].data[B].x,K=Array.isArray(l[C].data[B].x),J=!K&&!!w.isValidDate(l[C].data[B].x);H||J?H||p.xaxis.convertedCatToNumeric?"datetime"!==p.xaxis.type||y.isBarHorizontal&&y.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(l[C].data[B].x),isNaN(l[C].data[B].x)||"category"===this.w.config.xaxis.type||"string"==typeof l[C].data[B].x||(y.isXNumeric=!0)):this.twoDSeriesX.push(w.parseDate(l[C].data[B].x)):"datetime"===p.xaxis.type?this.twoDSeriesX.push(w.parseDate(l[C].data[B].x.toString())):(y.dataFormatXNumeric=!0,y.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(l[C].data[B].x))):K?(this.fallbackToCategory=!0,this.twoDSeriesX.push(l[C].data[B].x)):(y.isXNumeric=!0,y.dataFormatXNumeric=!0,this.twoDSeriesX.push(l[C].data[B].x))}if(l[u].data[0]&&void 0!==l[u].data[0].z){for(var de=0;de<l[u].data.length;de++)this.threeDSeries.push(l[u].data[de].z);y.isDataXYZ=!0}}},{key:"handleRangeData",value:function(l,u){var p=this.w.globals,y={};return this.isFormat2DArray()?y=this.handleRangeDataFormat("array",l,u):this.isFormatXY()&&(y=this.handleRangeDataFormat("xy",l,u)),p.seriesRangeStart.push(void 0===y.start?[]:y.start),p.seriesRangeEnd.push(void 0===y.end?[]:y.end),p.seriesRange.push(y.rangeUniques),p.seriesRange.forEach(function(w,C){w&&w.forEach(function(M,B){M.y.forEach(function(H,K){for(var J=0;J<M.y.length;J++)K!==J&&H.y1<=M.y[J].y2&&M.y[J].y1<=H.y2&&(M.overlaps.indexOf(H.rangeName)<0&&M.overlaps.push(H.rangeName),M.overlaps.indexOf(M.y[J].rangeName)<0&&M.overlaps.push(M.y[J].rangeName))})})}),y}},{key:"handleCandleStickBoxData",value:function(l,u){var p=this.w.globals,y={};return this.isFormat2DArray()?y=this.handleCandleStickBoxDataFormat("array",l,u):this.isFormatXY()&&(y=this.handleCandleStickBoxDataFormat("xy",l,u)),p.seriesCandleO[u]=y.o,p.seriesCandleH[u]=y.h,p.seriesCandleM[u]=y.m,p.seriesCandleL[u]=y.l,p.seriesCandleC[u]=y.c,y}},{key:"handleRangeDataFormat",value:function(l,u,p){var y=[],w=[],C=u[p].data.filter(function(K,J,ne){return J===ne.findIndex(function(de){return de.x===K.x})}).map(function(K,J){return{x:K.x,overlaps:[],y:[]}});if("array"===l)for(var M=0;M<u[p].data.length;M++)Array.isArray(u[p].data[M])?(y.push(u[p].data[M][1][0]),w.push(u[p].data[M][1][1])):(y.push(u[p].data[M]),w.push(u[p].data[M]));else if("xy"===l)for(var B=function(K){var J=Array.isArray(u[p].data[K].y),ne=tt.randomId(),de=u[p].data[K].x,xe={y1:J?u[p].data[K].y[0]:u[p].data[K].y,y2:J?u[p].data[K].y[1]:u[p].data[K].y,rangeName:ne};u[p].data[K].rangeName=ne;var Se=C.findIndex(function(Pe){return Pe.x===de});C[Se].y.push(xe),y.push(xe.y1),w.push(xe.y2)},H=0;H<u[p].data.length;H++)B(H);return{start:y,end:w,rangeUniques:C}}},{key:"handleCandleStickBoxDataFormat",value:function(l,u,p){var y=this.w,w="boxPlot"===y.config.chart.type||"boxPlot"===y.config.series[p].type,C=[],M=[],B=[],H=[],K=[];if("array"===l)if(w&&6===u[p].data[0].length||!w&&5===u[p].data[0].length)for(var J=0;J<u[p].data.length;J++)C.push(u[p].data[J][1]),M.push(u[p].data[J][2]),w?(B.push(u[p].data[J][3]),H.push(u[p].data[J][4]),K.push(u[p].data[J][5])):(H.push(u[p].data[J][3]),K.push(u[p].data[J][4]));else for(var ne=0;ne<u[p].data.length;ne++)Array.isArray(u[p].data[ne][1])&&(C.push(u[p].data[ne][1][0]),M.push(u[p].data[ne][1][1]),w?(B.push(u[p].data[ne][1][2]),H.push(u[p].data[ne][1][3]),K.push(u[p].data[ne][1][4])):(H.push(u[p].data[ne][1][2]),K.push(u[p].data[ne][1][3])));else if("xy"===l)for(var de=0;de<u[p].data.length;de++)Array.isArray(u[p].data[de].y)&&(C.push(u[p].data[de].y[0]),M.push(u[p].data[de].y[1]),w?(B.push(u[p].data[de].y[2]),H.push(u[p].data[de].y[3]),K.push(u[p].data[de].y[4])):(H.push(u[p].data[de].y[2]),K.push(u[p].data[de].y[3])));return{o:C,h:M,m:B,l:H,c:K}}},{key:"parseDataAxisCharts",value:function(l){var u,p=this,w=this.w.config,C=this.w.globals,M=new qi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),B=w.labels.length>0?w.labels.slice():w.xaxis.categories.slice();if(C.isRangeBar="rangeBar"===w.chart.type&&C.isBarHorizontal,C.hasXaxisGroups="category"===w.xaxis.type&&w.xaxis.group.groups.length>0,C.hasXaxisGroups&&(C.groups=w.xaxis.group.groups),C.hasSeriesGroups=null===(u=l[0])||void 0===u?void 0:u.group,C.hasSeriesGroups){var H=[],K=Et(new Set(l.map(function(xe){return xe.group})));l.forEach(function(xe,Se){var Pe=K.indexOf(xe.group);H[Pe]||(H[Pe]=[]),H[Pe].push(xe.name)}),C.seriesGroups=H}for(var J=function(){for(var xe=0;xe<B.length;xe++)if("string"==typeof B[xe]){if(!M.isValidDate(B[xe]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");p.twoDSeriesX.push(M.parseDate(B[xe]))}else p.twoDSeriesX.push(B[xe])},ne=0;ne<l.length;ne++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===l[ne].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==w.chart.type&&"rangeArea"!==w.chart.type&&"rangeBar"!==l[ne].type&&"rangeArea"!==l[ne].type||(C.isRangeData=!0,"rangeBar"!==w.chart.type&&"rangeArea"!==w.chart.type||this.handleRangeData(l,ne)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(l,ne):this.isFormatXY()&&this.handleFormatXY(l,ne),"candlestick"!==w.chart.type&&"candlestick"!==l[ne].type&&"boxPlot"!==w.chart.type&&"boxPlot"!==l[ne].type||this.handleCandleStickBoxData(l,ne),C.series.push(this.twoDSeries),C.labels.push(this.twoDSeriesX),C.seriesX.push(this.twoDSeriesX),C.seriesGoals=this.seriesGoals,ne!==this.activeSeriesIndex||this.fallbackToCategory||(C.isXNumeric=!0);else{"datetime"===w.xaxis.type?(C.isXNumeric=!0,J(),C.seriesX.push(this.twoDSeriesX)):"numeric"===w.xaxis.type&&(C.isXNumeric=!0,B.length>0&&(this.twoDSeriesX=B,C.seriesX.push(this.twoDSeriesX))),C.labels.push(this.twoDSeriesX);var de=l[ne].data.map(function(xe){return tt.parseNumber(xe)});C.series.push(de)}C.seriesZ.push(this.threeDSeries),C.seriesNames.push(void 0!==l[ne].name?l[ne].name:"series-"+parseInt(ne+1,10)),C.seriesColors.push(void 0!==l[ne].color?l[ne].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(l){var u=this.w.globals,p=this.w.config;u.series=l.slice(),u.seriesNames=p.labels.slice();for(var y=0;y<u.series.length;y++)void 0===u.seriesNames[y]&&u.seriesNames.push("series-"+(y+1));return this.w}},{key:"handleExternalLabelsData",value:function(l){var u=this.w.config,p=this.w.globals;u.xaxis.categories.length>0?p.labels=u.xaxis.categories:u.labels.length>0?p.labels=u.labels.slice():this.fallbackToCategory?(p.labels=p.labels[0],p.seriesRange.length&&(p.seriesRange.map(function(y){y.forEach(function(w){p.labels.indexOf(w.x)<0&&w.x&&p.labels.push(w.x)})}),p.labels=Array.from(new Set(p.labels.map(JSON.stringify)),JSON.parse)),u.xaxis.convertedCatToNumeric&&(new mr(u).convertCatToNumericXaxis(u,this.ctx,p.seriesX[0]),this._generateExternalLabels(l))):this._generateExternalLabels(l)}},{key:"_generateExternalLabels",value:function(l){var u=this.w.globals,p=this.w.config,y=[];if(u.axisCharts){if(u.series.length>0)if(this.isFormatXY())for(var w=p.series.map(function(J,ne){return J.data.filter(function(de,xe,Se){return Se.findIndex(function(Pe){return Pe.x===de.x})===xe})}),C=w.reduce(function(J,ne,de,xe){return xe[J].length>ne.length?J:de},0),M=0;M<w[C].length;M++)y.push(M+1);else for(var B=0;B<u.series[u.maxValsInArrayIndex].length;B++)y.push(B+1);u.seriesX=[];for(var H=0;H<l.length;H++)u.seriesX.push(y);this.w.globals.isBarHorizontal||(u.isXNumeric=!0)}if(0===y.length){y=u.axisCharts?[]:u.series.map(function(J,ne){return ne+1});for(var K=0;K<l.length;K++)u.seriesX.push(y)}u.labels=y,p.xaxis.convertedCatToNumeric&&(u.categoryLabels=y.map(function(J){return p.xaxis.labels.formatter(J)})),u.noLabelsProvided=!0}},{key:"parseData",value:function(l){var u=this.w,p=u.config,y=u.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),y.axisCharts?(this.parseDataAxisCharts(l),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(l),p.chart.stacked){var w=new Fr(this.ctx);y.series=w.setNullSeriesToZeroValues(y.series)}this.coreUtils.getSeriesTotals(),y.axisCharts&&(y.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),y.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),y.dataFormatXNumeric||y.isXNumeric&&("numeric"!==p.xaxis.type||0!==p.labels.length||0!==p.xaxis.categories.length)||this.handleExternalLabelsData(l);for(var C=this.coreUtils.getCategoryLabels(y.labels),M=0;M<C.length;M++)if(Array.isArray(C[M])){y.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var l=this.w,u=[];l.globals.seriesYAxisMap.forEach(function(p,y){var w=0;p.forEach(function(C){-1!==l.globals.collapsedSeriesIndices.indexOf(C)&&w++}),w>0&&w==p.length&&u.push(y)}),l.globals.ignoreYAxisIndexes=u.map(function(p){return p})}}]),ge}(),Os=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"getLabel",value:function(l,u,p,y){var Pe,Te,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",M=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],B=this.w,H=void 0===l[y]?"":l[y],K=H,J=B.globals.xLabelFormatter,ne=B.config.xaxis.labels.formatter,de=!1,xe=new nn(this.ctx);M&&(K=xe.xLabelFormat(J,H,H,{i:y,dateFormatter:new qi(this.ctx).formatDate,w:B}),void 0!==ne&&(K=ne(H,l[y],{i:y,dateFormatter:new qi(this.ctx).formatDate,w:B}))),u.length>0?(Pe=u[y].unit,Te=null,u.forEach(function(we){"month"===we.unit?Te="year":"day"===we.unit?Te="month":"hour"===we.unit?Te="day":"minute"===we.unit&&(Te="hour")}),de=Te===Pe,p=u[y].position,K=u[y].value):"datetime"===B.config.xaxis.type&&void 0===ne&&(K=""),void 0===K&&(K=""),K=Array.isArray(K)?K:K.toString();var U,Ne=new kt(this.ctx);U=B.globals.rotateXLabels&&M?Ne.getTextRects(K,parseInt(C,10),null,"rotate(".concat(B.config.xaxis.labels.rotate," 0 0)"),!1):Ne.getTextRects(K,parseInt(C,10));var le=!B.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(K)&&("NaN"===String(K)||w.indexOf(K)>=0&&le)&&(K=""),{x:p,text:K,textRect:U,isBold:de}}},{key:"checkLabelBasedOnTickamount",value:function(l,u,p){var y=this.w,w=y.config.xaxis.tickAmount;return"dataPoints"===w&&(w=Math.round(y.globals.gridWidth/120)),w>p||l%Math.round(p/(w+1))==0||(u.text=""),u}},{key:"checkForOverflowingLabels",value:function(l,u,p,y,w){var C=this.w;if(0===l&&C.globals.skipFirstTimelinelabel&&(u.text=""),l===p-1&&C.globals.skipLastTimelinelabel&&(u.text=""),C.config.xaxis.labels.hideOverlappingLabels&&y.length>0){var M=w[w.length-1];u.x<M.textRect.width/(C.globals.rotateXLabels?Math.abs(C.config.xaxis.labels.rotate)/12:1.01)+M.x&&(u.text="")}return u}},{key:"checkForReversedLabels",value:function(l,u){var p=this.w;return p.config.yaxis[l]&&p.config.yaxis[l].reversed&&u.reverse(),u}},{key:"isYAxisHidden",value:function(l){var u=this.w,p=new Oi(this.ctx),y=!u.globals.seriesYAxisMap[l].some(function(w){return-1===u.globals.collapsedSeriesIndices.indexOf(w)});return!u.config.yaxis[l].show||!u.config.yaxis[l].showForNullSeries&&p.isSeriesNull(l)&&y}},{key:"getYAxisForeColor",value:function(l,u){var p=this.w;return Array.isArray(l)&&p.globals.yAxisScale[u]&&this.ctx.theme.pushExtraColors(l,p.globals.yAxisScale[u].result.length,!1),l}},{key:"drawYAxisTicks",value:function(l,u,p,y,w,C,M){var B=this.w,H=new kt(this.ctx),K=B.globals.translateY;if(y.show&&u>0){!0===B.config.yaxis[w].opposite&&(l+=y.width);for(var J=u;J>=0;J--){var ne=K+u/10+B.config.yaxis[w].labels.offsetY-1;B.globals.isBarHorizontal&&(ne=C*J),"heatmap"===B.config.chart.type&&(ne+=C/2);var de=H.drawLine(l+p.offsetX-y.width+y.offsetX,ne+y.offsetY,l+p.offsetX+y.offsetX,ne+y.offsetY,y.color);M.add(de),K+=C}}}}]),ge}(),Cs=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"scaleSvgNode",value:function(l,u){var p=parseFloat(l.getAttributeNS(null,"width")),y=parseFloat(l.getAttributeNS(null,"height"));l.setAttributeNS(null,"width",p*u),l.setAttributeNS(null,"height",y*u),l.setAttributeNS(null,"viewBox","0 0 "+p+" "+y)}},{key:"fixSvgStringForIe11",value:function(l){if(!tt.isIE11())return l.replace(/&nbsp;/g,"&#160;");var u=0,p=l.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(y){return 2==++u?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':y});return(p=p.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(l){null==l&&(l=1);var u=this.w.globals.dom.Paper.svg();if(1!==l){var p=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(p,l),u=(new XMLSerializer).serializeToString(p)}return this.fixSvgStringForIe11(u)}},{key:"cleanup",value:function(){var l=this.w,u=l.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),p=l.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),y=l.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(y,function(w){w.setAttribute("width",0)}),u&&u[0]&&(u[0].setAttribute("x",-500),u[0].setAttribute("x1",-500),u[0].setAttribute("x2",-500)),p&&p[0]&&(p[0].setAttribute("y",-100),p[0].setAttribute("y1",-100),p[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var l=this.getSvgString(),u=new Blob([l],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(u)}},{key:"dataURI",value:function(l){var u=this;return new Promise(function(p){var y=u.w,w=l?l.scale||l.width/y.globals.svgWidth:1;u.cleanup();var C=document.createElement("canvas");C.width=y.globals.svgWidth*w,C.height=parseInt(y.globals.dom.elWrap.style.height,10)*w;var M="transparent"===y.config.chart.background?"#fff":y.config.chart.background,B=C.getContext("2d");B.fillStyle=M,B.fillRect(0,0,C.width*w,C.height*w);var H=u.getSvgString(w);if(window.canvg&&tt.isIE11()){var K=window.canvg.Canvg.fromString(B,H,{ignoreClear:!0,ignoreDimensions:!0});K.start();var J=C.msToBlob();K.stop(),p({blob:J})}else{var ne="data:image/svg+xml,"+encodeURIComponent(H),de=new Image;de.crossOrigin="anonymous",de.onload=function(){if(B.drawImage(de,0,0),C.msToBlob){var xe=C.msToBlob();p({blob:xe})}else{var Se=C.toDataURL("image/png");p({imgURI:Se})}},de.src=ne}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var l=this;this.dataURI().then(function(u){var p=u.imgURI,y=u.blob;y?navigator.msSaveOrOpenBlob(y,l.w.globals.chartID+".png"):l.triggerDownload(p,l.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(l){var u=this,p=l.series,y=l.fileName,w=l.columnDelimiter,C=void 0===w?",":w,M=l.lineDelimiter,B=void 0===M?"\n":M,H=this.w;p||(p=H.config.series);var K,J,ne=[],de=[],xe="",Se=H.globals.series.map(function(Le,je){return-1===H.globals.collapsedSeriesIndices.indexOf(je)?Le:[]}),Pe=function(Le){return"datetime"===H.config.xaxis.type&&String(Le).length>=10},Te=Math.max.apply(Math,Et(p.map(function(Le){return Le.data?Le.data.length:0}))),Ne=new En(this.ctx),U=new Os(this.ctx),le=function(Le){var je="";if(H.globals.axisCharts){if("category"===H.config.xaxis.type||H.config.xaxis.convertedCatToNumeric)if(H.globals.isBarHorizontal){var lt=H.globals.yLabelFormatters[0],jt=new Fr(u.ctx).getActiveConfigSeriesIndex();je=lt(H.globals.labels[Le],{seriesIndex:jt,dataPointIndex:Le,w:H})}else je=U.getLabel(H.globals.labels,H.globals.timescaleLabels,0,Le).text;"datetime"===H.config.xaxis.type&&(H.config.xaxis.categories.length?je=H.config.xaxis.categories[Le]:H.config.labels.length&&(je=H.config.labels[Le]))}else je=H.config.labels[Le];return Array.isArray(je)&&(je=je.join(" ")),tt.isNumber(je)?je:je.split(C).join("")};ne.push(H.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===H.config.chart.type?(ne.push("minimum"),ne.push("q1"),ne.push("median"),ne.push("q3"),ne.push("maximum")):"candlestick"===H.config.chart.type?(ne.push("open"),ne.push("high"),ne.push("low"),ne.push("close")):"rangeBar"===H.config.chart.type?(ne.push("minimum"),ne.push("maximum")):p.map(function(Le,je){var lt=(Le.name?Le.name:"series-".concat(je))+"";H.globals.axisCharts&&ne.push(lt.split(C).join("")?lt.split(C).join(""):"series-".concat(je))}),H.globals.axisCharts||(ne.push(H.config.chart.toolbar.export.csv.headerValue),de.push(ne.join(C))),H.globals.allSeriesHasEqualX||!H.globals.axisCharts||H.config.xaxis.categories.length||H.config.labels.length?p.map(function(Le,je){H.globals.axisCharts?function(Le,je){if(ne.length&&0===je&&de.push(ne.join(C)),Le.data){Le.data=Le.data.length&&Le.data||Et(Array(Te)).map(function(){return""});for(var lt=0;lt<Le.data.length;lt++){ne=[];var jt=le(lt);if(jt||(Ne.isFormatXY()?jt=p[je].data[lt].x:Ne.isFormat2DArray()&&(jt=p[je].data[lt]?p[je].data[lt][0]:"")),0===je){ne.push(Pe(jt)?H.config.chart.toolbar.export.csv.dateFormatter(jt):tt.isNumber(jt)?jt:jt.split(C).join(""));for(var qt=0;qt<H.globals.series.length;qt++){var Di;Ne.isFormatXY()?ne.push(null===(Di=p[qt].data[lt])||void 0===Di?void 0:Di.y):ne.push(Se[qt][lt])}}("candlestick"===H.config.chart.type||Le.type&&"candlestick"===Le.type)&&(ne.pop(),ne.push(H.globals.seriesCandleO[je][lt]),ne.push(H.globals.seriesCandleH[je][lt]),ne.push(H.globals.seriesCandleL[je][lt]),ne.push(H.globals.seriesCandleC[je][lt])),("boxPlot"===H.config.chart.type||Le.type&&"boxPlot"===Le.type)&&(ne.pop(),ne.push(H.globals.seriesCandleO[je][lt]),ne.push(H.globals.seriesCandleH[je][lt]),ne.push(H.globals.seriesCandleM[je][lt]),ne.push(H.globals.seriesCandleL[je][lt]),ne.push(H.globals.seriesCandleC[je][lt])),"rangeBar"===H.config.chart.type&&(ne.pop(),ne.push(H.globals.seriesRangeStart[je][lt]),ne.push(H.globals.seriesRangeEnd[je][lt])),ne.length&&de.push(ne.join(C))}}}(Le,je):((ne=[]).push(H.globals.labels[je].split(C).join("")),ne.push(Se[je]),de.push(ne.join(C)))}):(K=new Set,J={},p.forEach(function(Le,je){Le?.data.forEach(function(lt){var jt,qt;if(Ne.isFormatXY())jt=lt.x,qt=lt.y;else{if(!Ne.isFormat2DArray())return;jt=lt[0],qt=lt[1]}J[jt]||(J[jt]=Array(p.length).fill("")),J[jt][je]=qt,K.add(jt)})}),ne.length&&de.push(ne.join(C)),Array.from(K).sort().forEach(function(Le){de.push([Pe(Le)&&"datetime"===H.config.xaxis.type?H.config.chart.toolbar.export.csv.dateFormatter(Le):tt.isNumber(Le)?Le:Le.split(C).join(""),J[Le].join(C)])})),xe+=de.join(B),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+xe),y||H.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(l,u,p){var y=document.createElement("a");y.href=l,y.download=(u||this.w.globals.chartID)+p,document.body.appendChild(y),y.click(),document.body.removeChild(y)}}]),ge}(),Ts=function(){function ge(l,u){j(this,ge),this.ctx=l,this.elgrid=u,this.w=l.w;var p=this.w;this.axesUtils=new Os(l),this.xaxisLabels=p.globals.labels.slice(),p.globals.timescaleLabels.length>0&&!p.globals.isBarHorizontal&&(this.xaxisLabels=p.globals.timescaleLabels.slice()),p.config.xaxis.overwriteCategories&&(this.xaxisLabels=p.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===p.config.xaxis.position?0:p.globals.gridHeight+1,this.offY=this.offY+p.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===p.config.chart.type&&p.config.plotOptions.bar.horizontal,this.xaxisFontSize=p.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=p.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=p.config.xaxis.labels.style.colors,this.xaxisBorderWidth=p.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=p.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?p.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=p.config.xaxis.axisBorder.height,this.yaxis=p.config.yaxis[0]}return Be(ge,[{key:"drawXaxis",value:function(){var l=this.w,u=new kt(this.ctx),p=u.group({class:"apexcharts-xaxis",transform:"translate(".concat(l.config.xaxis.offsetX,", ").concat(l.config.xaxis.offsetY,")")}),y=u.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(l.globals.translateXAxisX,", ").concat(l.globals.translateXAxisY,")")});p.add(y);for(var w=[],C=0;C<this.xaxisLabels.length;C++)w.push(this.xaxisLabels[C]);if(this.drawXAxisLabelAndGroup(!0,u,y,w,l.globals.isXNumeric,function(xe,Se){return Se}),l.globals.hasXaxisGroups){var M=l.globals.groups;w=[];for(var B=0;B<M.length;B++)w.push(M[B].title);var H={};l.config.xaxis.group.style&&(H.xaxisFontSize=l.config.xaxis.group.style.fontSize,H.xaxisFontFamily=l.config.xaxis.group.style.fontFamily,H.xaxisForeColors=l.config.xaxis.group.style.colors,H.fontWeight=l.config.xaxis.group.style.fontWeight,H.cssClass=l.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,u,y,w,!1,function(xe,Se){return M[xe].cols*Se},H)}if(void 0!==l.config.xaxis.title.text){var K=u.group({class:"apexcharts-xaxis-title"}),J=u.drawText({x:l.globals.gridWidth/2+l.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===l.config.xaxis.position?l.globals.xAxisLabelsHeight:-l.globals.xAxisLabelsHeight-10)+l.config.xaxis.title.offsetY,text:l.config.xaxis.title.text,textAnchor:"middle",fontSize:l.config.xaxis.title.style.fontSize,fontFamily:l.config.xaxis.title.style.fontFamily,fontWeight:l.config.xaxis.title.style.fontWeight,foreColor:l.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+l.config.xaxis.title.style.cssClass});K.add(J),p.add(K)}if(l.config.xaxis.axisBorder.show){var ne=l.globals.barPadForNumericAxis,de=u.drawLine(l.globals.padHorizontal+l.config.xaxis.axisBorder.offsetX-ne,this.offY,this.xaxisBorderWidth+ne,this.offY,l.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&l.config.grid.show?this.elgrid.elGridBorders.add(de):p.add(de)}return p}},{key:"drawXAxisLabelAndGroup",value:function(l,u,p,y,w,C){var M,B=this,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},K=[],J=[],ne=this.w,de=H.xaxisFontSize||this.xaxisFontSize,xe=H.xaxisFontFamily||this.xaxisFontFamily,Se=H.xaxisForeColors||this.xaxisForeColors,Pe=H.fontWeight||ne.config.xaxis.labels.style.fontWeight,Te=H.cssClass||ne.config.xaxis.labels.style.cssClass,Ne=ne.globals.padHorizontal,U=y.length,le="category"===ne.config.xaxis.type?ne.globals.dataPoints:U;0===le&&U>le&&(le=U),w?(M=ne.globals.gridWidth/Math.min(le>1?le-1:le,U-1),Ne=Ne+C(0,M)/2+ne.config.xaxis.labels.offsetX):Ne=Ne+C(0,M=ne.globals.gridWidth/le)+ne.config.xaxis.labels.offsetX;for(var Le=function(lt){var jt=Ne-C(lt,M)/2+ne.config.xaxis.labels.offsetX;0===lt&&1===U&&M/2===Ne&&1===le&&(jt=ne.globals.gridWidth/2);var qt=B.axesUtils.getLabel(y,ne.globals.timescaleLabels,jt,lt,K,de,l),Di=28;if(ne.globals.rotateXLabels&&l&&(Di=22),ne.config.xaxis.title.text&&"top"===ne.config.xaxis.position&&(Di+=parseFloat(ne.config.xaxis.title.style.fontSize)+2),l||(Di=Di+parseFloat(de)+(ne.globals.xAxisLabelsHeight-ne.globals.xAxisGroupLabelsHeight)+(ne.globals.rotateXLabels?10:0)),qt=void 0!==ne.config.xaxis.tickAmount&&"dataPoints"!==ne.config.xaxis.tickAmount&&"datetime"!==ne.config.xaxis.type?B.axesUtils.checkLabelBasedOnTickamount(lt,qt,U):B.axesUtils.checkForOverflowingLabels(lt,qt,U,K,J),ne.config.xaxis.labels.show){var Qi=u.drawText({x:qt.x,y:B.offY+ne.config.xaxis.labels.offsetY+Di-("top"===ne.config.xaxis.position?ne.globals.xAxisHeight+ne.config.xaxis.axisTicks.height-2:0),text:qt.text,textAnchor:"middle",fontWeight:qt.isBold?600:Pe,fontSize:de,fontFamily:xe,foreColor:Array.isArray(Se)?l&&ne.config.xaxis.convertedCatToNumeric?Se[ne.globals.minX+lt-1]:Se[lt]:Se,isPlainText:!1,cssClass:(l?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+Te});if(p.add(Qi),Qi.on("click",function(Qn){if("function"==typeof ne.config.chart.events.xAxisLabelClick){var gr=Object.assign({},ne,{labelIndex:lt});ne.config.chart.events.xAxisLabelClick(Qn,B.ctx,gr)}}),l){var cn=document.createElementNS(ne.globals.SVGNS,"title");cn.textContent=Array.isArray(qt.text)?qt.text.join(" "):qt.text,Qi.node.appendChild(cn),""!==qt.text&&(K.push(qt.text),J.push(qt))}}lt<U-1&&(Ne+=C(lt+1,M))},je=0;je<=U-1;je++)Le(je)}},{key:"drawXaxisInversed",value:function(l){var u,p,y=this,w=this.w,C=new kt(this.ctx),M=w.config.yaxis[0].opposite?w.globals.translateYAxisX[l]:0,B=C.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:l}),H=C.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+M+", 0)"});B.add(H);var K=[];if(w.config.yaxis[l].show)for(var J=0;J<this.xaxisLabels.length;J++)K.push(this.xaxisLabels[J]);p=-(u=w.globals.gridHeight/K.length)/2.2;var ne=w.globals.yLabelFormatters[0],de=w.config.yaxis[0].labels;if(de.show)for(var xe=function(we){var Le=void 0===K[we]?"":K[we];Le=ne(Le,{seriesIndex:l,dataPointIndex:we,w});var je=y.axesUtils.getYAxisForeColor(de.style.colors,l),lt=0;Array.isArray(Le)&&(lt=Le.length/2*parseInt(de.style.fontSize,10));var jt=de.offsetX-15,qt="end";y.yaxis.opposite&&(qt="start"),"left"===w.config.yaxis[0].labels.align?(jt=de.offsetX,qt="start"):"center"===w.config.yaxis[0].labels.align?(jt=de.offsetX,qt="middle"):"right"===w.config.yaxis[0].labels.align&&(qt="end");var Di=C.drawText({x:jt,y:p+u+de.offsetY-lt,text:Le,textAnchor:qt,foreColor:Array.isArray(je)?je[we]:je,fontSize:de.style.fontSize,fontFamily:de.style.fontFamily,fontWeight:de.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+de.style.cssClass,maxWidth:de.maxWidth});H.add(Di),Di.on("click",function(Qn){if("function"==typeof w.config.chart.events.xAxisLabelClick){var gr=Object.assign({},w,{labelIndex:we});w.config.chart.events.xAxisLabelClick(Qn,y.ctx,gr)}});var Qi=document.createElementNS(w.globals.SVGNS,"title");if(Qi.textContent=Array.isArray(Le)?Le.join(" "):Le,Di.node.appendChild(Qi),0!==w.config.yaxis[l].labels.rotate){var cn=C.rotateAroundCenter(Di.node);Di.node.setAttribute("transform","rotate(".concat(w.config.yaxis[l].labels.rotate," 0 ").concat(cn.y,")"))}p+=u},Se=0;Se<=K.length-1;Se++)xe(Se);if(void 0!==w.config.yaxis[0].title.text){var Pe=C.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+M+", 0)"}),Te=C.drawText({x:w.config.yaxis[0].title.offsetX,y:w.globals.gridHeight/2+w.config.yaxis[0].title.offsetY,text:w.config.yaxis[0].title.text,textAnchor:"middle",foreColor:w.config.yaxis[0].title.style.color,fontSize:w.config.yaxis[0].title.style.fontSize,fontWeight:w.config.yaxis[0].title.style.fontWeight,fontFamily:w.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+w.config.yaxis[0].title.style.cssClass});Pe.add(Te),B.add(Pe)}var Ne=0;this.isCategoryBarHorizontal&&w.config.yaxis[0].opposite&&(Ne=w.globals.gridWidth);var U=w.config.xaxis.axisBorder;if(U.show){var le=C.drawLine(w.globals.padHorizontal+U.offsetX+Ne,1+U.offsetY,w.globals.padHorizontal+U.offsetX+Ne,w.globals.gridHeight+U.offsetY,U.color,0);this.elgrid&&this.elgrid.elGridBorders&&w.config.grid.show?this.elgrid.elGridBorders.add(le):B.add(le)}return w.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(Ne,K.length,w.config.yaxis[0].axisBorder,w.config.yaxis[0].axisTicks,0,u,B),B}},{key:"drawXaxisTicks",value:function(l,u,p){var y=this.w,w=l;if(!(l<0||l-2>y.globals.gridWidth)){var C=this.offY+y.config.xaxis.axisTicks.offsetY;if(u=u+C+y.config.xaxis.axisTicks.height,"top"===y.config.xaxis.position&&(u=C-y.config.xaxis.axisTicks.height),y.config.xaxis.axisTicks.show){var M=new kt(this.ctx).drawLine(l+y.config.xaxis.axisTicks.offsetX,C+y.config.xaxis.offsetY,w+y.config.xaxis.axisTicks.offsetX,u+y.config.xaxis.offsetY,y.config.xaxis.axisTicks.color);p.add(M),M.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var l=this.w,u=[],p=this.xaxisLabels.length,y=l.globals.padHorizontal;if(l.globals.timescaleLabels.length>0)for(var w=0;w<p;w++)u.push(y=this.xaxisLabels[w].position);else for(var C=p,M=0;M<C;M++){var B=C;l.globals.isXNumeric&&"bar"!==l.config.chart.type&&(B-=1),u.push(y+=l.globals.gridWidth/B)}return u}},{key:"xAxisLabelCorrections",value:function(){var l=this.w,u=new kt(this.ctx),p=l.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),y=l.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),w=l.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),C=l.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(l.globals.rotateXLabels||l.config.xaxis.labels.rotateAlways)for(var M=0;M<y.length;M++){var B=u.rotateAroundCenter(y[M]);B.y=B.y-1,B.x=B.x+1,y[M].setAttribute("transform","rotate(".concat(l.config.xaxis.labels.rotate," ").concat(B.x," ").concat(B.y,")")),y[M].setAttribute("text-anchor","end"),p.setAttribute("transform","translate(0, ".concat(-10,")")),l.config.xaxis.labels.trim&&Array.prototype.forEach.call(y[M].childNodes,function(de){u.placeTextWithEllipsis(de,de.textContent,l.globals.xAxisLabelsHeight-("bottom"===l.config.legend.position?20:10))})}else!function(){for(var de=l.globals.gridWidth/(l.globals.labels.length+1),xe=0;xe<y.length;xe++)l.config.xaxis.labels.trim&&"datetime"!==l.config.xaxis.type&&Array.prototype.forEach.call(y[xe].childNodes,function(Pe){u.placeTextWithEllipsis(Pe,Pe.textContent,de)})}();if(w.length>0){var K=w[w.length-1].getBBox(),J=w[0].getBBox();K.x<-20&&w[w.length-1].parentNode.removeChild(w[w.length-1]),J.x+J.width>l.globals.gridWidth&&!l.globals.isBarHorizontal&&w[0].parentNode.removeChild(w[0]);for(var ne=0;ne<C.length;ne++)u.placeTextWithEllipsis(C[ne],C[ne].textContent,l.config.yaxis[0].labels.maxWidth-(l.config.yaxis[0].title.text?2*parseFloat(l.config.yaxis[0].title.style.fontSize):0)-15)}}}]),ge}(),Zn=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w;var u=this.w;this.xaxisLabels=u.globals.labels.slice(),this.axesUtils=new Os(l),this.isRangeBar=u.globals.seriesRange.length&&u.globals.isBarHorizontal,u.globals.timescaleLabels.length>0&&(this.xaxisLabels=u.globals.timescaleLabels.slice())}return Be(ge,[{key:"drawGridArea",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=this.w,p=new kt(this.ctx);null===l&&(l=p.group({class:"apexcharts-grid"}));var y=p.drawLine(u.globals.padHorizontal,1,u.globals.padHorizontal,u.globals.gridHeight,"transparent"),w=p.drawLine(u.globals.padHorizontal,u.globals.gridHeight,u.globals.gridWidth,u.globals.gridHeight,"transparent");return l.add(w),l.add(y),l}},{key:"drawGrid",value:function(){var l=null;return this.w.globals.axisCharts&&(l=this.renderGrid(),this.drawGridArea(l.el)),l}},{key:"createGridMask",value:function(){var l=this.w,u=l.globals,p=new kt(this.ctx),y=Array.isArray(l.config.stroke.width)?0:l.config.stroke.width;if(Array.isArray(l.config.stroke.width)){var w=0;l.config.stroke.width.forEach(function(J){w=Math.max(w,J)}),y=w}u.dom.elGridRectMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(u.cuid)),u.dom.elGridRectMarkerMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(u.cuid)),u.dom.elForecastMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elForecastMask.setAttribute("id","forecastMask".concat(u.cuid)),u.dom.elNonForecastMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(u.cuid));var C=l.config.chart.type,M=0,B=0;("bar"===C||"rangeBar"===C||"candlestick"===C||"boxPlot"===C||l.globals.comboBarCount>0)&&l.globals.isXNumeric&&!l.globals.isBarHorizontal&&(B=l.config.grid.padding.right,u.barPadForNumericAxis>(M=l.config.grid.padding.left)&&(M=u.barPadForNumericAxis,B=u.barPadForNumericAxis)),u.dom.elGridRect=p.drawRect(-y-M-2,2*-y-2,u.gridWidth+y+B+M+4,u.gridHeight+4*y+4,0,"#fff");var H=l.globals.markers.largestSize+1;u.dom.elGridRectMarker=p.drawRect(2*-H,2*-H,u.gridWidth+4*H,u.gridHeight+4*H,0,"#fff"),u.dom.elGridRectMask.appendChild(u.dom.elGridRect.node),u.dom.elGridRectMarkerMask.appendChild(u.dom.elGridRectMarker.node);var K=u.dom.baseEl.querySelector("defs");K.appendChild(u.dom.elGridRectMask),K.appendChild(u.dom.elForecastMask),K.appendChild(u.dom.elNonForecastMask),K.appendChild(u.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(l){var u=l.i,p=l.x1,M=l.xCount,H=this.w;if(!(0===u&&H.globals.skipFirstTimelinelabel||u===M-1&&H.globals.skipLastTimelinelabel&&!H.config.xaxis.labels.formatter||"radar"===H.config.chart.type)){H.config.grid.xaxis.lines.show&&this._drawGridLine({i:u,x1:p,y1:l.y1,x2:l.x2,y2:l.y2,xCount:M,parent:l.parent});var K=0;if(H.globals.hasXaxisGroups&&"between"===H.config.xaxis.tickPlacement){var J=H.globals.groups;if(J){for(var ne=0,de=0;ne<u&&de<J.length;de++)ne+=J[de].cols;ne===u&&(K=.6*H.globals.xAxisLabelsHeight)}}new Ts(this.ctx).drawXaxisTicks(p,K,H.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(l){var u=l.i,p=l.x1,y=l.y1,w=l.x2,C=l.y2,M=l.xCount,B=l.parent,H=this.w,K=!1,J=B.node.classList.contains("apexcharts-gridlines-horizontal"),ne=H.config.grid.strokeDashArray,de=H.globals.barPadForNumericAxis;(0===y&&0===C||0===p&&0===w)&&(K=!0),y===H.globals.gridHeight&&C===H.globals.gridHeight&&(K=!0),!H.globals.isBarHorizontal||0!==u&&u!==M-1||(K=!0);var xe=new kt(this).drawLine(p-(J?de:0),y,w+(J?de:0),C,H.config.grid.borderColor,ne);xe.node.classList.add("apexcharts-gridline"),K&&H.config.grid.show?this.elGridBorders.add(xe):B.add(xe)}},{key:"_drawGridBandRect",value:function(l){var u=l.c,p=l.x1,y=l.y1,w=l.x2,C=l.y2,M=l.type,B=this.w,H=new kt(this.ctx),K=B.globals.barPadForNumericAxis;if("column"!==M||"datetime"!==B.config.xaxis.type){var ne=H.drawRect(p-("row"===M?K:0),y,w+("row"===M?2*K:0),C,0,B.config.grid[M].colors[u],B.config.grid[M].opacity);this.elg.add(ne),ne.attr("clip-path","url(#gridRectMask".concat(B.globals.cuid,")")),ne.node.classList.add("apexcharts-grid-".concat(M))}}},{key:"_drawXYLines",value:function(l){var u=this,p=l.xCount,y=l.tickAmount,w=this.w;if(w.config.grid.xaxis.lines.show||w.config.xaxis.axisTicks.show){var C,M=w.globals.padHorizontal,B=w.globals.gridHeight;w.globals.timescaleLabels.length?function(xe){for(var Se=xe.xC,Te=xe.y1,U=xe.y2,le=0;le<Se;le++)u._drawGridLines({i:le,x1:u.xaxisLabels[le].position,y1:Te,x2:u.xaxisLabels[le].position,y2:U,xCount:p,parent:u.elgridLinesV})}({xC:p,x1:M,y1:0,x2:C,y2:B}):(w.globals.isXNumeric&&(p=w.globals.xAxisScale.result.length),function(xe){for(var Se=xe.xC,Pe=xe.x1,Te=xe.y1,Ne=xe.x2,U=xe.y2,le=0;le<Se+(w.globals.isXNumeric?0:1);le++)0===le&&1===Se&&1===w.globals.dataPoints&&(Ne=Pe=w.globals.gridWidth/2),u._drawGridLines({i:le,x1:Pe,y1:Te,x2:Ne,y2:U,xCount:p,parent:u.elgridLinesV}),Ne=Pe+=w.globals.gridWidth/(w.globals.isXNumeric?Se-1:Se)}({xC:p,x1:M,y1:0,x2:C,y2:B}))}if(w.config.grid.yaxis.lines.show){var H=0,K=0,J=w.globals.gridWidth,ne=y+1;this.isRangeBar&&(ne=w.globals.labels.length);for(var de=0;de<ne+(this.isRangeBar?1:0);de++)this._drawGridLine({i:de,xCount:ne+(this.isRangeBar?1:0),x1:0,y1:H,x2:J,y2:K,parent:this.elgridLinesH}),K=H+=w.globals.gridHeight/(this.isRangeBar?ne:y)}}},{key:"_drawInvertedXYLines",value:function(l){var u=l.xCount,p=this.w;if(p.config.grid.xaxis.lines.show||p.config.xaxis.axisTicks.show)for(var y,w=p.globals.padHorizontal,C=p.globals.gridHeight,M=0;M<u+1;M++)p.config.grid.xaxis.lines.show&&this._drawGridLine({i:M,xCount:u+1,x1:w,y1:0,x2:y,y2:C,parent:this.elgridLinesV}),new Ts(this.ctx).drawXaxisTicks(w,0,p.globals.dom.elGraphical),y=w=w+p.globals.gridWidth/u+.3;if(p.config.grid.yaxis.lines.show)for(var B=0,H=0,K=p.globals.gridWidth,J=0;J<p.globals.dataPoints+1;J++)this._drawGridLine({i:J,xCount:p.globals.dataPoints+1,x1:0,y1:B,x2:K,y2:H,parent:this.elgridLinesH}),H=B+=p.globals.gridHeight/p.globals.dataPoints}},{key:"renderGrid",value:function(){var l=this.w,u=new kt(this.ctx);this.elg=u.group({class:"apexcharts-grid"}),this.elgridLinesH=u.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=u.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=u.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),l.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var p=0;p<l.globals.seriesYAxisMap.length&&-1!==l.globals.ignoreYAxisIndexes.indexOf(p);)p++;p===l.globals.seriesYAxisMap.length&&(p=0);var y,C,M,B,w=l.globals.yAxisScale[p].result.length-1;return!l.globals.isBarHorizontal||this.isRangeBar?(y=this.xaxisLabels.length,this.isRangeBar&&(y--,w=l.globals.labels.length,l.config.xaxis.tickAmount&&l.config.xaxis.labels.formatter&&(y=l.config.xaxis.tickAmount),(null===(C=l.globals.yAxisScale)||void 0===C||null===(M=C[p])||void 0===M||null===(B=M.result)||void 0===B?void 0:B.length)>0&&"datetime"!==l.config.xaxis.type&&(y=l.globals.yAxisScale[p].result.length-1)),this._drawXYLines({xCount:y,tickAmount:w})):this._drawInvertedXYLines({xCount:y=w,tickAmount:w=l.globals.xTickAmount}),this.drawGridBands(y,w),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:l.globals.gridWidth/y}}},{key:"drawGridBands",value:function(l,u){var p=this.w;if(void 0!==p.config.grid.row.colors&&p.config.grid.row.colors.length>0)for(var y=0,w=p.globals.gridHeight/u,C=p.globals.gridWidth,M=0,B=0;M<u;M++,B++)B>=p.config.grid.row.colors.length&&(B=0),this._drawGridBandRect({c:B,x1:0,y1:y,x2:C,y2:w,type:"row"}),y+=p.globals.gridHeight/u;if(void 0!==p.config.grid.column.colors&&p.config.grid.column.colors.length>0)for(var H=p.globals.isBarHorizontal||"on"!==p.config.xaxis.tickPlacement||"category"!==p.config.xaxis.type&&!p.config.xaxis.convertedCatToNumeric?l:l-1,K=p.globals.padHorizontal,J=p.globals.padHorizontal+p.globals.gridWidth/H,ne=p.globals.gridHeight,de=0,xe=0;de<l;de++,xe++)xe>=p.config.grid.column.colors.length&&(xe=0),this._drawGridBandRect({c:xe,x1:K,y1:0,x2:J,y2:ne,type:"column"}),K+=p.globals.gridWidth/H}}]),ge}(),Un=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"niceScale",value:function(l,u){var p,y,w,C,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,B=1e-11,H=this.w,K=H.globals;K.isBarHorizontal?(p=H.config.xaxis,y=Math.max((K.svgWidth-100)/25,2)):(p=H.config.yaxis[M],y=Math.max((K.svgHeight-100)/15,2)),w=null!=p.min,C=void 0!==p.max&&null!==p.min;var J=null!=p.stepSize,ne=null!=p.tickAmount,de=ne?p.tickAmount:p.forceNiceScale?K.niceScaleDefaultTicks[Math.min(Math.round(y/2),K.niceScaleDefaultTicks.length-1)]:10;if(K.isMultipleYAxis&&!ne&&K.multiAxisTickAmount>0&&(de=K.multiAxisTickAmount,ne=!0),de="dataPoints"===de?K.dataPoints-1:Math.abs(Math.round(de)),(l===Number.MIN_VALUE&&0===u||!tt.isNumber(l)&&!tt.isNumber(u)||l===Number.MIN_VALUE&&u===-Number.MAX_VALUE)&&(l=0,u=de,K.allSeriesCollapsed=!1),l>u){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var xe=u;u=l,l=xe}else l===u&&(l=0===l?0:l-1,u=0===u?2:u+1);var Se=[];de<1&&(de=1);var Pe=de,Te=Math.abs(u-l);p.forceNiceScale&&(!w&&l>0&&l/Te<.15&&(l=0,w=!0),!C&&u<0&&-u/Te<.15&&(u=0,C=!0),Te=Math.abs(u-l));var Ne=Te/Pe,U=Ne,le=Math.floor(Math.log10(U)),we=Math.pow(10,le),Le=Math.ceil(U/we);if(Ne=U=(Le=K.niceScaleAllowedMagMsd[0===K.yValueDecimal?0:1][Le])*we,K.isBarHorizontal&&p.stepSize&&"datetime"!==p.type?(Ne=p.stepSize,J=!0):J&&(Ne=p.stepSize),J&&p.forceNiceScale){var je=Math.floor(Math.log10(Ne));Ne*=Math.pow(10,le-je)}if(w&&C){var lt=Te/Pe;if(ne)if(J)if(0!=tt.mod(Te,Ne)){var jt=tt.getGCD(Ne,lt);Ne=lt/jt<10?jt:lt}else 0==tt.mod(Ne,lt)?Ne=lt:(lt=Ne,ne=!1);else Ne=lt;else if(J)0==tt.mod(Te,Ne)?lt=Ne:Ne=lt;else if(0==tt.mod(Te,Ne))lt=Ne;else{lt=Te/(Pe=Math.ceil(Te/Ne));var qt=tt.getGCD(Te,Ne);Te/qt<y&&(lt=qt),Ne=lt}Pe=Math.round(Te/Ne)}else{if(w||C)if(C)if(ne)l=u-Ne*Pe;else{var Di=l;l=Ne*Math.floor(l/Ne),Math.abs(u-l)/tt.getGCD(Te,Ne)>y&&(l=u-Ne*de,l+=Ne*Math.floor((Di-l)/Ne))}else w&&(u=ne?l+Ne*Pe:Ne*Math.ceil(u/Ne));else if(ne){var Qi=Ne/(u-l>u?1:2),cn=Qi*Math.floor(l/Qi);Math.abs(cn-l)<=Qi/2?u=(l=cn)+Ne*Pe:l=(u=Qi*Math.ceil(u/Qi))-Ne*Pe}else l=Ne*Math.floor(l/Ne),u=Ne*Math.ceil(u/Ne);Te=Math.abs(u-l),Ne=tt.getGCD(Te,Ne),Pe=Math.round(Te/Ne)}if(ne||w||C||(Pe=Math.ceil((Te-B)/(Ne+B)))>16&&tt.getPrimeFactors(Pe).length<2&&Pe++,K.isMultipleYAxis&&0==K.multiAxisTickAmount&&(K.multiAxisTickAmount=Pe),Pe>y&&(!ne&&!J||p.forceNiceScale)){var Qn=tt.getPrimeFactors(Pe),gr=Qn.length-1,Zr=Pe;e:for(var hs=0;hs<gr;hs++)for(var vs=0;vs<=gr-hs;vs++){for(var _s=Math.min(vs+hs,gr),Js=Zr,oa=1,Ea=vs;Ea<=_s;Ea++)oa*=Qn[Ea];if((Js/=oa)<y){Zr=Js;break e}}Ne=Zr===Pe?Te:Te/Zr}var Ws=l-Ne,ls=Ne*B;do{Se.push(tt.stripNumber(Ws+=Ne,7))}while(u-Ws>ls);return{result:Se,niceMin:Se[0],niceMax:Se[Se.length-1]}}},{key:"linearScale",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,C=Math.abs(u-l);"dataPoints"===(p=this._adjustTicksForSmallRange(p,y,C))&&(p=this.w.globals.dataPoints-1),w||(w=C/p),p===Number.MAX_VALUE&&(p=5,w=1);for(var M=[],B=l;p>=0;)M.push(B),B+=w,p-=1;return{result:M,niceMin:M[0],niceMax:M[M.length-1]}}},{key:"logarithmicScaleNice",value:function(l,u,p){u<=0&&(u=Math.max(l,p)),l<=0&&(l=Math.min(u,p));for(var y=[],w=Math.ceil(Math.log(u)/Math.log(p)+1),C=Math.floor(Math.log(l)/Math.log(p));C<w;C++)y.push(Math.pow(p,C));return{result:y,niceMin:y[0],niceMax:y[y.length-1]}}},{key:"logarithmicScale",value:function(l,u,p){u<=0&&(u=Math.max(l,p)),l<=0&&(l=Math.min(u,p));for(var y=[],w=Math.log(u)/Math.log(p),C=Math.log(l)/Math.log(p),M=w-C,B=Math.round(M),H=M/B,K=0,J=C;K<B;K++,J+=H)y.push(Math.pow(p,J));return y.push(Math.pow(p,w)),{result:y,niceMin:l,niceMax:u}}},{key:"_adjustTicksForSmallRange",value:function(l,u,p){var y=l;if(void 0!==u&&this.w.config.yaxis[u].labels.formatter&&void 0===this.w.config.yaxis[u].tickAmount){var w=Number(this.w.config.yaxis[u].labels.formatter(1));tt.isNumber(w)&&0===this.w.globals.yValueDecimal&&(y=Math.ceil(p))}return y<l?y:l}},{key:"setYScaleForIndex",value:function(l,u,p){var y=this.w.globals,w=this.w.config,C=y.isBarHorizontal?w.xaxis:w.yaxis[l];void 0===y.yAxisScale[l]&&(y.yAxisScale[l]=[]);var M=Math.abs(p-u);C.logarithmic&&M<=5&&(y.invalidLogScale=!0),C.logarithmic&&M>5?(y.allSeriesCollapsed=!1,y.yAxisScale[l]=C.forceNiceScale?this.logarithmicScaleNice(u,p,C.logBase):this.logarithmicScale(u,p,C.logBase)):p!==-Number.MAX_VALUE&&tt.isNumber(p)?(y.allSeriesCollapsed=!1,y.yAxisScale[l]=this.niceScale(u,p,l)):y.yAxisScale[l]=this.linearScale(0,10,10,l,w.yaxis[l].stepSize)}},{key:"setXScale",value:function(l,u){var p=this.w,y=p.globals,w=Math.abs(u-l);return y.xAxisScale=u!==-Number.MAX_VALUE&&tt.isNumber(u)?this.linearScale(l,u,p.config.xaxis.tickAmount?p.config.xaxis.tickAmount:w<10&&w>1?w+1:10,0,p.config.xaxis.stepSize):this.linearScale(0,10,10),y.xAxisScale}},{key:"setMultipleYScales",value:function(){var l=this.w.globals,u=this.w.config,p=l.minYArr,y=l.maxYArr,w=[],C=[],M=[];u.series.forEach(function(ne,de){M.push(de),C.push(null)});var B,H=[];u.yaxis.forEach(function(ne,de){if(ne.seriesName){var xe=[];Array.isArray(ne.seriesName)?xe=ne.seriesName:xe.push(ne.seriesName),w[de]=[],xe.forEach(function(Se){u.series.forEach(function(Pe,Te){if(Pe.name===Se){w[de].push(Te),C[Te]=de;var Ne=M.indexOf(Te);M.splice(Ne,1)}})})}else H.push(de)});for(var K=0;K<H.length&&(w[B=H[K]]=[],M);K++){var J=M[0];M.shift(),w[B].push(J),C[J]=B}B&&M.forEach(function(ne){w[B].push(ne),C[ne]=B}),l.seriesYAxisMap=w.map(function(ne){return ne}),l.seriesYAxisReverseMap=C.map(function(ne){return ne}),this.sameScaleInMultipleAxes(p,y,w)}},{key:"sameScaleInMultipleAxes",value:function(l,u,p){var y=this,w=this.w.config,C=this.w.globals,M=[];p.forEach(function(H,K){for(var J=K+1;J<p.length;J++){var ne,de=Pi(H.values());try{for(de.s();!(ne=de.n()).done;){var Se=p[J].indexOf(ne.value);-1!==Se&&(H.push(J),p[J].splice(Se,1))}}catch(Pe){de.e(Pe)}finally{de.f()}p[J].length<1&&-1===M.indexOf(J)&&M.push(J)}});for(var B=M.length-1;B>=0;B--)p.splice(M[B],1);p.forEach(function(H,K){var J=Number.MAX_VALUE,ne=-Number.MAX_VALUE;if(w.chart.stacked){for(var de=C.seriesX[H[0]].map(function(je){return Number.MIN_VALUE}),xe=C.seriesX[H[0]].map(function(je){return Number.MIN_VALUE}),Se=C.seriesX[H[0]].map(function(je){return Number.MIN_VALUE}),Pe=w.series[H[0]].type,Te=0;Te<H.length;Te++){var Ne=H[Te];if(-1===C.collapsedSeriesIndices.indexOf(Ne))for(var U=0;U<C.series[Ne].length;U++){var le=C.series[Ne][U];le>=0?xe[U]+=le:Se[U]+=le,de[U]+=le}}"bar"===Pe?(J=Math.min.apply(null,Se),ne=Math.max.apply(null,xe)):(J=Math.min.apply(null,de),ne=Math.max.apply(null,de))}else{for(var we=0;we<H.length;we++)J=Math.min(J,l[H[we]]);for(var Le=0;Le<H.length;Le++)ne=Math.max(ne,u[H[Le]])}void 0!==w.yaxis[K].min&&(J="function"==typeof w.yaxis[K].min?w.yaxis[K].min(J):w.yaxis[K].min),void 0!==w.yaxis[K].max&&(ne="function"==typeof w.yaxis[K].max?w.yaxis[K].max(ne):w.yaxis[K].max),y.setYScaleForIndex(K,J,ne),H.forEach(function(je){l[je]=C.yAxisScale[K].niceMin,u[je]=C.yAxisScale[K].niceMax})})}}]),ge}(),cr=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.scales=new Un(l)}return Be(ge,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,w=this.w.config,C=this.w.globals,M=-Number.MAX_VALUE,B=Number.MIN_VALUE;null===y&&(y=l+1);var H=0,K=0,J=void 0;if(C.seriesX.length>=y){var ne,de;H=0,K=(J=Et(new Set((ne=[]).concat.apply(ne,Et(C.seriesX.slice(l,y)))))).length-1;var xe=null===(de=C.brushSource)||void 0===de?void 0:de.w.config.chart.brush;if(w.chart.zoom.enabled&&w.chart.zoom.autoScaleYaxis||null!=xe&&xe.enabled&&null!=xe&&xe.autoScaleYaxis){if(w.xaxis.min)for(H=0;H<K&&J[H]<=w.xaxis.min;H++);if(w.xaxis.max)for(;K>H&&J[K]>=w.xaxis.max;K--);}}var Se=C.series,Pe=Se,Te=Se;"candlestick"===w.chart.type?(Pe=C.seriesCandleL,Te=C.seriesCandleH):"boxPlot"===w.chart.type?(Pe=C.seriesCandleO,Te=C.seriesCandleC):C.isRangeData&&(Pe=C.seriesRangeStart,Te=C.seriesRangeEnd);for(var Ne=l;Ne<y;Ne++){C.dataPoints=Math.max(C.dataPoints,Se[Ne].length);var U=w.series[Ne].type;C.categoryLabels.length&&(C.dataPoints=C.categoryLabels.filter(function(Le){return void 0!==Le}).length),C.labels.length&&"datetime"!==w.xaxis.type&&0!==C.series.reduce(function(Le,je){return Le+je.length},0)&&(C.dataPoints=Math.max(C.dataPoints,C.labels.length)),J||(H=0,K=C.series[Ne].length);for(var le=H;le<=K&&le<C.series[Ne].length;le++){var we=Se[Ne][le];if(null!==we&&tt.isNumber(we)){switch(void 0!==Te[Ne][le]&&(M=Math.max(M,Te[Ne][le]),u=Math.min(u,Te[Ne][le])),void 0!==Pe[Ne][le]&&(u=Math.min(u,Pe[Ne][le]),p=Math.max(p,Pe[Ne][le])),U){case"candlestick":void 0!==C.seriesCandleC[Ne][le]&&(M=Math.max(M,C.seriesCandleH[Ne][le]),u=Math.min(u,C.seriesCandleL[Ne][le]));case"boxPlot":void 0!==C.seriesCandleC[Ne][le]&&(M=Math.max(M,C.seriesCandleC[Ne][le]),u=Math.min(u,C.seriesCandleO[Ne][le]))}U&&"candlestick"!==U&&"boxPlot"!==U&&"rangeArea"!==U&&"rangeBar"!==U&&(M=Math.max(M,C.series[Ne][le]),u=Math.min(u,C.series[Ne][le])),p=M,C.seriesGoals[Ne]&&C.seriesGoals[Ne][le]&&Array.isArray(C.seriesGoals[Ne][le])&&C.seriesGoals[Ne][le].forEach(function(Le){B!==Number.MIN_VALUE&&(B=Math.min(B,Le.value),u=B),M=Math.max(M,Le.value),p=M}),tt.isFloat(we)&&(we=tt.noExponents(we),C.yValueDecimal=Math.max(C.yValueDecimal,we.toString().split(".")[1].length)),B>Pe[Ne][le]&&Pe[Ne][le]<0&&(B=Pe[Ne][le])}else C.hasNullValues=!0}"bar"!==U&&"column"!==U||(B<0&&M<0&&(M=0,p=Math.max(p,0)),B===Number.MIN_VALUE&&(B=0,u=Math.min(u,0)))}return"rangeBar"===w.chart.type&&C.seriesRangeStart.length&&C.isBarHorizontal&&(B=u),"bar"===w.chart.type&&(B<0&&M<0&&(M=0),B===Number.MIN_VALUE&&(B=0)),{minY:B,maxY:M,lowestY:u,highestY:p}}},{key:"setYRange",value:function(){var l=this.w.globals,u=this.w.config;l.maxY=-Number.MAX_VALUE,l.minY=Number.MIN_VALUE;var p,y=Number.MAX_VALUE;if(l.isMultipleYAxis){y=Number.MAX_VALUE;for(var w=0;w<l.series.length;w++)p=this.getMinYMaxY(w),l.minYArr[w]=p.lowestY,l.maxYArr[w]=p.highestY,y=Math.min(y,p.lowestY)}return p=this.getMinYMaxY(0,y,null,l.series.length),"bar"===u.chart.type?(l.minY=p.minY,l.maxY=p.maxY):(l.minY=p.lowestY,l.maxY=p.highestY),y=p.lowestY,u.chart.stacked&&this._setStackedMinMax(),"line"===u.chart.type||"area"===u.chart.type||"scatter"===u.chart.type||"candlestick"===u.chart.type||"boxPlot"===u.chart.type||"rangeBar"===u.chart.type&&!l.isBarHorizontal?l.minY===Number.MIN_VALUE&&y!==-Number.MAX_VALUE&&y!==l.maxY&&(l.minY=y):l.minY=p.minY,u.yaxis.forEach(function(C,M){void 0!==C.max&&("number"==typeof C.max?l.maxYArr[M]=C.max:"function"==typeof C.max&&(l.maxYArr[M]=C.max(l.isMultipleYAxis?l.maxYArr[M]:l.maxY)),l.maxY=l.maxYArr[M]),void 0!==C.min&&("number"==typeof C.min?l.minYArr[M]=C.min:"function"==typeof C.min&&(l.minYArr[M]=C.min(l.isMultipleYAxis?l.minYArr[M]===Number.MIN_VALUE?0:l.minYArr[M]:l.minY)),l.minY=l.minYArr[M])}),l.isBarHorizontal&&["min","max"].forEach(function(C){void 0!==u.xaxis[C]&&"number"==typeof u.xaxis[C]&&("min"===C?l.minY=u.xaxis[C]:l.maxY=u.xaxis[C])}),l.isMultipleYAxis?(this.scales.setMultipleYScales(),l.minY=y):(this.scales.setYScaleForIndex(0,l.minY,l.maxY),l.minY=l.yAxisScale[0].niceMin,l.maxY=l.yAxisScale[0].niceMax,l.minYArr[0]=l.yAxisScale[0].niceMin,l.maxYArr[0]=l.yAxisScale[0].niceMax,l.seriesYAxisMap=[l.series.map(function(C,M){return M})],l.seriesYAxisReverseMap=l.series.map(function(C,M){return 0})),{minY:l.minY,maxY:l.maxY,minYArr:l.minYArr,maxYArr:l.maxYArr,yAxisScale:l.yAxisScale}}},{key:"setXRange",value:function(){var l=this.w.globals,u=this.w.config,p="numeric"===u.xaxis.type||"datetime"===u.xaxis.type||"category"===u.xaxis.type&&!l.noLabelsProvided||l.noLabelsProvided||l.isXNumeric;if(l.isXNumeric&&function(){for(var M=0;M<l.series.length;M++)if(l.labels[M])for(var B=0;B<l.labels[M].length;B++)null!==l.labels[M][B]&&tt.isNumber(l.labels[M][B])&&(l.maxX=Math.max(l.maxX,l.labels[M][B]),l.initialMaxX=Math.max(l.maxX,l.labels[M][B]),l.minX=Math.min(l.minX,l.labels[M][B]),l.initialMinX=Math.min(l.minX,l.labels[M][B]))}(),l.noLabelsProvided&&0===u.xaxis.categories.length&&(l.maxX=l.labels[l.labels.length-1],l.initialMaxX=l.labels[l.labels.length-1],l.minX=1,l.initialMinX=1),l.isXNumeric||l.noLabelsProvided||l.dataFormatXNumeric){var y;if(void 0===u.xaxis.tickAmount?(y=Math.round(l.svgWidth/150),"numeric"===u.xaxis.type&&l.dataPoints<30&&(y=l.dataPoints-1),y>l.dataPoints&&0!==l.dataPoints&&(y=l.dataPoints-1)):"dataPoints"===u.xaxis.tickAmount?(l.series.length>1&&(y=l.series[l.maxValsInArrayIndex].length-1),l.isXNumeric&&(y=l.maxX-l.minX-1)):y=u.xaxis.tickAmount,l.xTickAmount=y,void 0!==u.xaxis.max&&"number"==typeof u.xaxis.max&&(l.maxX=u.xaxis.max),void 0!==u.xaxis.min&&"number"==typeof u.xaxis.min&&(l.minX=u.xaxis.min),void 0!==u.xaxis.range&&(l.minX=l.maxX-u.xaxis.range),l.minX!==Number.MAX_VALUE&&l.maxX!==-Number.MAX_VALUE)if(u.xaxis.convertedCatToNumeric&&!l.dataFormatXNumeric){for(var w=[],C=l.minX-1;C<l.maxX;C++)w.push(C+1);l.xAxisScale={result:w,niceMin:w[0],niceMax:w[w.length-1]}}else l.xAxisScale=this.scales.setXScale(l.minX,l.maxX);else l.xAxisScale=this.scales.linearScale(0,y,y,0,u.xaxis.stepSize),l.noLabelsProvided&&l.labels.length>0&&(l.xAxisScale=this.scales.linearScale(1,l.labels.length,y-1,0,u.xaxis.stepSize),l.seriesX=l.labels.slice());p&&(l.labels=l.xAxisScale.result.slice())}return l.isBarHorizontal&&l.labels.length&&(l.xTickAmount=l.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:l.minX,maxX:l.maxX}}},{key:"setZRange",value:function(){var l=this.w.globals;if(l.isDataXYZ)for(var u=0;u<l.series.length;u++)if(void 0!==l.seriesZ[u])for(var p=0;p<l.seriesZ[u].length;p++)null!==l.seriesZ[u][p]&&tt.isNumber(l.seriesZ[u][p])&&(l.maxZ=Math.max(l.maxZ,l.seriesZ[u][p]),l.minZ=Math.min(l.minZ,l.seriesZ[u][p]))}},{key:"_handleSingleDataPoint",value:function(){var l=this.w.globals,u=this.w.config;if(l.minX===l.maxX){var p=new qi(this.ctx);if("datetime"===u.xaxis.type){var y=p.getDate(l.minX);u.xaxis.labels.datetimeUTC?y.setUTCDate(y.getUTCDate()-2):y.setDate(y.getDate()-2),l.minX=new Date(y).getTime();var w=p.getDate(l.maxX);u.xaxis.labels.datetimeUTC?w.setUTCDate(w.getUTCDate()+2):w.setDate(w.getDate()+2),l.maxX=new Date(w).getTime()}else("numeric"===u.xaxis.type||"category"===u.xaxis.type&&!l.noLabelsProvided)&&(l.minX=l.minX-2,l.initialMinX=l.minX,l.maxX=l.maxX+2,l.initialMaxX=l.maxX)}}},{key:"_getMinXDiff",value:function(){var l=this.w.globals;l.isXNumeric&&l.seriesX.forEach(function(u,p){1===u.length&&u.push(l.seriesX[l.maxValsInArrayIndex][l.seriesX[l.maxValsInArrayIndex].length-1]);var y=u.slice();y.sort(function(w,C){return w-C}),y.forEach(function(w,C){if(C>0){var M=w-y[C-1];M>0&&(l.minXDiff=Math.min(M,l.minXDiff))}}),1!==l.dataPoints&&l.minXDiff!==Number.MAX_VALUE||(l.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var l=this,u=this.w.globals;if(u.series.length){var p=u.seriesGroups;p.length||(p=[this.w.config.series.map(function(C){return C.name})]);var y={},w={};p.forEach(function(C){y[C]=[],w[C]=[],l.w.config.series.map(function(M,B){return C.indexOf(M.name)>-1?B:null}).filter(function(M){return null!==M}).forEach(function(M){for(var B=0;B<u.series[u.maxValsInArrayIndex].length;B++){var H,K;void 0===y[C][B]&&(y[C][B]=0,w[C][B]=0),(l.w.config.chart.stacked&&!u.comboCharts||l.w.config.chart.stacked&&u.comboCharts&&(!l.w.config.chart.stackOnlyBar||"bar"===(null===(H=l.w.config.series)||void 0===H||null===(K=H[M])||void 0===K?void 0:K.type)))&&null!==u.series[M][B]&&tt.isNumber(u.series[M][B])&&(u.series[M][B]>0?y[C][B]+=parseFloat(u.series[M][B])+1e-4:w[C][B]+=parseFloat(u.series[M][B]))}})}),Object.entries(y).forEach(function(C){var M=Xt(C,1)[0];y[M].forEach(function(B,H){u.maxY=Math.max(u.maxY,y[M][H]),u.minY=Math.min(u.minY,w[M][H])})})}}}]),ge}(),zn=function(){function ge(l,u){j(this,ge),this.ctx=l,this.elgrid=u,this.w=l.w;var p=this.w;this.xaxisFontSize=p.config.xaxis.labels.style.fontSize,this.axisFontFamily=p.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=p.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===p.config.chart.type&&p.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===p.config.xaxis.position&&(this.xAxisoffX=p.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Os(l)}return Be(ge,[{key:"drawYaxis",value:function(l){var u=this,p=this.w,y=new kt(this.ctx),w=p.config.yaxis[l].labels.style,C=w.fontSize,M=w.fontFamily,B=w.fontWeight,H=y.group({class:"apexcharts-yaxis",rel:l,transform:"translate("+p.globals.translateYAxisX[l]+", 0)"});if(this.axesUtils.isYAxisHidden(l))return H;var K=y.group({class:"apexcharts-yaxis-texts-g"});H.add(K);var J=p.globals.yAxisScale[l].result.length-1,ne=p.globals.gridHeight/J,de=p.globals.translateY,xe=p.globals.yLabelFormatters[l],Se=p.globals.yAxisScale[l].result.slice();Se=this.axesUtils.checkForReversedLabels(l,Se);var Pe="";if(p.config.yaxis[l].labels.show)for(var Te=function(jt){var qt=Se[jt];qt=xe(qt,jt,p);var Di=p.config.yaxis[l].labels.padding;p.config.yaxis[l].opposite&&0!==p.config.yaxis.length&&(Di*=-1);var Qi="end";p.config.yaxis[l].opposite&&(Qi="start"),"left"===p.config.yaxis[l].labels.align?Qi="start":"center"===p.config.yaxis[l].labels.align?Qi="middle":"right"===p.config.yaxis[l].labels.align&&(Qi="end");var cn=u.axesUtils.getYAxisForeColor(w.colors,l),Qn=p.config.yaxis[l].labels.offsetY;"heatmap"===p.config.chart.type&&(Qn-=(p.globals.gridHeight/p.globals.series.length-1)/2);var gr=y.drawText({x:Di,y:de+J/10+Qn+1,text:qt,textAnchor:Qi,fontSize:C,fontFamily:M,fontWeight:B,maxWidth:p.config.yaxis[l].labels.maxWidth,foreColor:Array.isArray(cn)?cn[jt]:cn,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+w.cssClass});jt===J&&(Pe=gr),K.add(gr);var Zr=document.createElementNS(p.globals.SVGNS,"title");if(Zr.textContent=Array.isArray(qt)?qt.join(" "):qt,gr.node.appendChild(Zr),0!==p.config.yaxis[l].labels.rotate){var hs=y.rotateAroundCenter(Pe.node),vs=y.rotateAroundCenter(gr.node);gr.node.setAttribute("transform","rotate(".concat(p.config.yaxis[l].labels.rotate," ").concat(hs.x," ").concat(vs.y,")"))}de+=ne},Ne=J;Ne>=0;Ne--)Te(Ne);if(void 0!==p.config.yaxis[l].title.text){var U=y.group({class:"apexcharts-yaxis-title"}),le=0;p.config.yaxis[l].opposite&&(le=p.globals.translateYAxisX[l]);var we=y.drawText({x:le,y:p.globals.gridHeight/2+p.globals.translateY+p.config.yaxis[l].title.offsetY,text:p.config.yaxis[l].title.text,textAnchor:"end",foreColor:p.config.yaxis[l].title.style.color,fontSize:p.config.yaxis[l].title.style.fontSize,fontWeight:p.config.yaxis[l].title.style.fontWeight,fontFamily:p.config.yaxis[l].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+p.config.yaxis[l].title.style.cssClass});U.add(we),H.add(U)}var Le=p.config.yaxis[l].axisBorder,je=31+Le.offsetX;if(p.config.yaxis[l].opposite&&(je=-31-Le.offsetX),Le.show){var lt=y.drawLine(je,p.globals.translateY+Le.offsetY-2,je,p.globals.gridHeight+p.globals.translateY+Le.offsetY+2,Le.color,0,Le.width);H.add(lt)}return p.config.yaxis[l].axisTicks.show&&this.axesUtils.drawYAxisTicks(je,J,Le,p.config.yaxis[l].axisTicks,l,ne,H),H}},{key:"drawYaxisInversed",value:function(l){var u=this.w,p=new kt(this.ctx),y=p.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),w=p.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(u.globals.translateXAxisX,", ").concat(u.globals.translateXAxisY,")")});y.add(w);var C=u.globals.yAxisScale[l].result.length-1,M=u.globals.gridWidth/C+.1,B=M+u.config.xaxis.labels.offsetX,H=u.globals.xLabelFormatter,K=u.globals.yAxisScale[l].result.slice(),J=u.globals.timescaleLabels;J.length>0&&(this.xaxisLabels=J.slice(),C=(K=J.slice()).length),K=this.axesUtils.checkForReversedLabels(l,K);var ne=J.length;if(u.config.xaxis.labels.show)for(var de=ne?0:C;ne?de<ne:de>=0;ne?de++:de--){var xe=K[de];xe=H(xe,de,u);var Se=u.globals.gridWidth+u.globals.padHorizontal-(B-M+u.config.xaxis.labels.offsetX);if(J.length){var Pe=this.axesUtils.getLabel(K,J,Se,de,this.drawnLabels,this.xaxisFontSize);Se=Pe.x,xe=Pe.text,this.drawnLabels.push(Pe.text),0===de&&u.globals.skipFirstTimelinelabel&&(xe=""),de===K.length-1&&u.globals.skipLastTimelinelabel&&(xe="")}var Te=p.drawText({x:Se,y:this.xAxisoffX+u.config.xaxis.labels.offsetY+30-("top"===u.config.xaxis.position?u.globals.xAxisHeight+u.config.xaxis.axisTicks.height-2:0),text:xe,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[l]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:u.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+u.config.xaxis.labels.style.cssClass});w.add(Te),Te.tspan(xe);var Ne=document.createElementNS(u.globals.SVGNS,"title");Ne.textContent=xe,Te.node.appendChild(Ne),B+=M}return this.inversedYAxisTitleText(y),this.inversedYAxisBorder(y),y}},{key:"inversedYAxisBorder",value:function(l){var u=this.w,p=new kt(this.ctx),y=u.config.xaxis.axisBorder;if(y.show){var w=0;"bar"===u.config.chart.type&&u.globals.isXNumeric&&(w-=15);var C=p.drawLine(u.globals.padHorizontal+w+y.offsetX,this.xAxisoffX,u.globals.gridWidth,this.xAxisoffX,y.color,0,y.height);this.elgrid&&this.elgrid.elGridBorders&&u.config.grid.show?this.elgrid.elGridBorders.add(C):l.add(C)}}},{key:"inversedYAxisTitleText",value:function(l){var u=this.w,p=new kt(this.ctx);if(void 0!==u.config.xaxis.title.text){var y=p.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),w=p.drawText({x:u.globals.gridWidth/2+u.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(u.config.xaxis.title.style.fontSize)+u.config.xaxis.title.offsetY+20,text:u.config.xaxis.title.text,textAnchor:"middle",fontSize:u.config.xaxis.title.style.fontSize,fontFamily:u.config.xaxis.title.style.fontFamily,fontWeight:u.config.xaxis.title.style.fontWeight,foreColor:u.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+u.config.xaxis.title.style.cssClass});y.add(w),l.add(y)}}},{key:"yAxisTitleRotate",value:function(l,u){var p=this.w,y=new kt(this.ctx),w={width:0,height:0},C={width:0,height:0},M=p.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(l,"'] .apexcharts-yaxis-texts-g"));null!==M&&(w=M.getBoundingClientRect());var B=p.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(l,"'] .apexcharts-yaxis-title text"));if(null!==B&&(C=B.getBoundingClientRect()),null!==B){var H=this.xPaddingForYAxisTitle(l,w,C,u);B.setAttribute("x",H.xPos-(u?10:0))}if(null!==B){var K=y.rotateAroundCenter(B);B.setAttribute("transform","rotate(".concat(u?-1*p.config.yaxis[l].title.rotate:p.config.yaxis[l].title.rotate," ").concat(K.x," ").concat(K.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(l,u,p,y){var w=this.w,C=0,M=0,B=10;return void 0===w.config.yaxis[l].title.text||l<0?{xPos:M,padd:0}:(y?(M=u.width+w.config.yaxis[l].title.offsetX+p.width/2+B/2,0===(C+=1)&&(M-=B/2)):(M=-1*u.width+w.config.yaxis[l].title.offsetX+B/2+p.width/2,w.globals.isBarHorizontal&&(M=-1*u.width-w.config.yaxis[l].title.offsetX-(B=25))),{xPos:M,padd:B})}},{key:"setYAxisXPosition",value:function(l,u){var p=this.w,y=0,w=0,C=18,M=1;p.config.yaxis.length>1&&(this.multipleYs=!0),p.config.yaxis.map(function(B,H){var K=p.globals.ignoreYAxisIndexes.indexOf(H)>-1||!B.show||B.floating||0===l[H].width,J=l[H].width+u[H].width;B.opposite?p.globals.isBarHorizontal?p.globals.translateYAxisX[H]=(w=p.globals.gridWidth+p.globals.translateX-1)-B.labels.offsetX:(w=p.globals.gridWidth+p.globals.translateX+M,K||(M=M+J+20),p.globals.translateYAxisX[H]=w-B.labels.offsetX+20):(y=p.globals.translateX-C,K||(C=C+J+20),p.globals.translateYAxisX[H]=y+B.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var l=this.w,u=l.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(u=tt.listToArray(u)).forEach(function(p,y){var w=l.config.yaxis[y];if(w&&!w.floating&&void 0!==w.labels.align){var C=l.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(y,"'] .apexcharts-yaxis-texts-g")),M=l.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(y,"'] .apexcharts-yaxis-label"));M=tt.listToArray(M);var B=C.getBoundingClientRect();"left"===w.labels.align?(M.forEach(function(H,K){H.setAttribute("text-anchor","start")}),w.opposite||C.setAttribute("transform","translate(-".concat(B.width,", 0)"))):"center"===w.labels.align?(M.forEach(function(H,K){H.setAttribute("text-anchor","middle")}),C.setAttribute("transform","translate(".concat(B.width/2*(w.opposite?1:-1),", 0)"))):"right"===w.labels.align&&(M.forEach(function(H,K){H.setAttribute("text-anchor","end")}),w.opposite&&C.setAttribute("transform","translate(".concat(B.width,", 0)")))}})}}]),ge}(),On=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.documentEvent=tt.bind(this.documentEvent,this)}return Be(ge,[{key:"addEventListener",value:function(l,u){var p=this.w;p.globals.events.hasOwnProperty(l)?p.globals.events[l].push(u):p.globals.events[l]=[u]}},{key:"removeEventListener",value:function(l,u){var p=this.w;if(p.globals.events.hasOwnProperty(l)){var y=p.globals.events[l].indexOf(u);-1!==y&&p.globals.events[l].splice(y,1)}}},{key:"fireEvent",value:function(l,u){var p=this.w;if(p.globals.events.hasOwnProperty(l)){u&&u.length||(u=[]);for(var y=p.globals.events[l],w=y.length,C=0;C<w;C++)y[C].apply(null,u)}}},{key:"setupEventHandlers",value:function(){var l=this,u=this.w,p=this.ctx,y=u.globals.dom.baseEl.querySelector(u.globals.chartClass);this.ctx.eventList.forEach(function(w){y.addEventListener(w,function(C){var M=Object.assign({},u,{seriesIndex:u.globals.capturedSeriesIndex,dataPointIndex:u.globals.capturedDataPointIndex});"mousemove"===C.type||"touchmove"===C.type?"function"==typeof u.config.chart.events.mouseMove&&u.config.chart.events.mouseMove(C,p,M):"mouseleave"===C.type||"touchleave"===C.type?"function"==typeof u.config.chart.events.mouseLeave&&u.config.chart.events.mouseLeave(C,p,M):("mouseup"===C.type&&1===C.which||"touchend"===C.type)&&("function"==typeof u.config.chart.events.click&&u.config.chart.events.click(C,p,M),p.ctx.events.fireEvent("click",[C,p,M]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(w){u.globals.dom.baseEl.addEventListener(w,l.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(l){var u=this.w,p=l.target.className;if("click"===l.type){var y=u.globals.dom.baseEl.querySelector(".apexcharts-menu");y&&y.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==p&&y.classList.remove("apexcharts-menu-open")}u.globals.clientX="touchmove"===l.type?l.touches[0].clientX:l.clientX,u.globals.clientY="touchmove"===l.type?l.touches[0].clientY:l.clientY}}]),ge}(),Vr=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"setCurrentLocaleValues",value:function(l){var u=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(u=this.w.config.chart.locales.concat(window.Apex.chart.locales));var p=u.filter(function(w){return w.name===l})[0];if(!p)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var y=tt.extend(Ri,p);this.w.globals.locale=y.options}}]),ge}(),jn=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"drawAxis",value:function(l,u){var p,y,w=this,C=this.w.globals,M=this.w.config,B=new Ts(this.ctx,u),H=new zn(this.ctx,u);C.axisCharts&&"radar"!==l&&(C.isBarHorizontal?(y=H.drawYaxisInversed(0),p=B.drawXaxisInversed(0),C.dom.elGraphical.add(p),C.dom.elGraphical.add(y)):(p=B.drawXaxis(),C.dom.elGraphical.add(p),M.yaxis.map(function(K,J){if(-1===C.ignoreYAxisIndexes.indexOf(J)&&(y=H.drawYaxis(J),C.dom.Paper.add(y),"back"===w.w.config.grid.position)){var ne=C.dom.Paper.children()[1];ne.remove(),C.dom.Paper.add(ne)}})))}}]),ge}(),an=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"drawXCrosshairs",value:function(){var l=this.w,u=new kt(this.ctx),p=new Mi(this.ctx),y=l.config.xaxis.crosshairs.fill.gradient,w=l.config.xaxis.crosshairs.dropShadow,ne=w.enabled,de=w.left,xe=w.top,Se=w.blur,Pe=w.color,Te=w.opacity,Ne=l.config.xaxis.crosshairs.fill.color;if(l.config.xaxis.crosshairs.show){"gradient"===l.config.xaxis.crosshairs.fill.type&&(Ne=u.drawGradient("vertical",y.colorFrom,y.colorTo,y.opacityFrom,y.opacityTo,null,y.stops,null));var U=u.drawRect();1===l.config.xaxis.crosshairs.width&&(U=u.drawLine());var le=l.globals.gridHeight;(!tt.isNumber(le)||le<0)&&(le=0);var we=l.config.xaxis.crosshairs.width;(!tt.isNumber(we)||we<0)&&(we=0),U.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:le,width:we,height:le,fill:Ne,filter:"none","fill-opacity":l.config.xaxis.crosshairs.opacity,stroke:l.config.xaxis.crosshairs.stroke.color,"stroke-width":l.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":l.config.xaxis.crosshairs.stroke.dashArray}),ne&&(U=p.dropShadow(U,{left:de,top:xe,blur:Se,color:Pe,opacity:Te})),l.globals.dom.elGraphical.add(U)}}},{key:"drawYCrosshairs",value:function(){var l=this.w,u=new kt(this.ctx),p=l.config.yaxis[0].crosshairs,y=l.globals.barPadForNumericAxis;if(l.config.yaxis[0].crosshairs.show){var w=u.drawLine(-y,0,l.globals.gridWidth+y,0,p.stroke.color,p.stroke.dashArray,p.stroke.width);w.attr({class:"apexcharts-ycrosshairs"}),l.globals.dom.elGraphical.add(w)}var C=u.drawLine(-y,0,l.globals.gridWidth+y,0,p.stroke.color,0,0);C.attr({class:"apexcharts-ycrosshairs-hidden"}),l.globals.dom.elGraphical.add(C)}}]),ge}(),ur=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"checkResponsiveConfig",value:function(l){var u=this,p=this.w,y=p.config;if(0!==y.responsive.length){var w=y.responsive.slice();w.sort(function(H,K){return H.breakpoint>K.breakpoint?1:K.breakpoint>H.breakpoint?-1:0}).reverse();var C=new hr({}),M=function(){var H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},J=window.innerWidth>0?window.innerWidth:screen.width;if(J>w[0].breakpoint){var ne=Oi.extendArrayProps(C,p.globals.initialConfig,p);H=tt.extend(ne,H),H=tt.extend(p.config,H),u.overrideResponsiveOptions(H)}else for(var de=0;de<w.length;de++)J<w[de].breakpoint&&(H=Oi.extendArrayProps(C,w[de].options,p),H=tt.extend(p.config,H),u.overrideResponsiveOptions(H))};if(l){var B=Oi.extendArrayProps(C,l,p);B=tt.extend(p.config,B),M(B=tt.extend(B,l))}else M({})}}},{key:"overrideResponsiveOptions",value:function(l){var u=new hr(l).init({responsiveOverride:!0});this.w.config=u}}]),ge}(),xr=function(){function ge(l){j(this,ge),this.ctx=l,this.colors=[],this.w=l.w;var u=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===u.config.chart.type&&u.config.plotOptions.treemap.distributed||"heatmap"===u.config.chart.type&&u.config.plotOptions.heatmap.distributed,this.isBarDistributed=u.config.plotOptions.bar.distributed&&("bar"===u.config.chart.type||"rangeBar"===u.config.chart.type)}return Be(ge,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var l,u=this,p=this.w,y=new tt;if(p.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(p.config.theme.mode)),void 0===p.config.colors||0===(null===(l=p.config.colors)||void 0===l?void 0:l.length)?p.globals.colors=this.predefined():(p.globals.colors=p.config.colors,Array.isArray(p.config.colors)&&p.config.colors.length>0&&"function"==typeof p.config.colors[0]&&(p.globals.colors=p.config.series.map(function(xe,Se){var Pe=p.config.colors[Se];return Pe||(Pe=p.config.colors[0]),"function"==typeof Pe?(u.isColorFn=!0,Pe({value:p.globals.axisCharts?p.globals.series[Se][0]?p.globals.series[Se][0]:0:p.globals.series[Se],seriesIndex:Se,dataPointIndex:Se,w:p})):Pe}))),p.globals.seriesColors.map(function(xe,Se){xe&&(p.globals.colors[Se]=xe)}),p.config.theme.monochrome.enabled){var w=[],C=p.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(C=p.globals.series[0].length*p.globals.series.length);for(var M=p.config.theme.monochrome.color,B=1/(C/p.config.theme.monochrome.shadeIntensity),H=p.config.theme.monochrome.shadeTo,K=0,J=0;J<C;J++){var ne=void 0;"dark"===H?(ne=y.shadeColor(-1*K,M),K+=B):(ne=y.shadeColor(K,M),K+=B),w.push(ne)}p.globals.colors=w.slice()}var de=p.globals.colors.slice();this.pushExtraColors(p.globals.colors),["fill","stroke"].forEach(function(xe){p.globals[xe].colors=void 0===p.config[xe].colors?u.isColorFn?p.config.colors:de:p.config[xe].colors.slice(),u.pushExtraColors(p.globals[xe].colors)}),p.globals.dataLabels.style.colors=void 0===p.config.dataLabels.style.colors?de:p.config.dataLabels.style.colors.slice(),this.pushExtraColors(p.globals.dataLabels.style.colors,50),p.globals.radarPolygons.fill.colors=void 0===p.config.plotOptions.radar.polygons.fill.colors?["dark"===p.config.theme.mode?"#424242":"none"]:p.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(p.globals.radarPolygons.fill.colors,20),p.globals.markers.colors=void 0===p.config.markers.colors?de:p.config.markers.colors.slice(),this.pushExtraColors(p.globals.markers.colors)}},{key:"pushExtraColors",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,y=this.w,w=u||y.globals.series.length;if(null===p&&(p=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===y.config.chart.type&&y.config.plotOptions.heatmap.colorScale.inverse),p&&y.globals.series.length&&(w=y.globals.series[y.globals.maxValsInArrayIndex].length*y.globals.series.length),l.length<w)for(var C=w-l.length,M=0;M<C;M++)l.push(l[M])}},{key:"updateThemeOptions",value:function(l){l.chart=l.chart||{},l.tooltip=l.tooltip||{};var u=l.theme.mode||"light",p=l.theme.palette?l.theme.palette:"dark"===u?"palette4":"palette1",y=l.chart.foreColor?l.chart.foreColor:"dark"===u?"#f6f7f8":"#373d3f";return l.tooltip.theme=u,l.chart.foreColor=y,l.theme.palette=p,l}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),ge}(),zs=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(l){var u=this.w,p="title"===l?u.config.title:u.config.subtitle,y=u.globals.svgWidth/2,w=p.offsetY,C="middle";if("left"===p.align?(y=10,C="start"):"right"===p.align&&(y=u.globals.svgWidth-10,C="end"),y+=p.offsetX,w=w+parseInt(p.style.fontSize,10)+p.margin/2,void 0!==p.text){var M=new kt(this.ctx).drawText({x:y,y:w,text:p.text,textAnchor:C,fontSize:p.style.fontSize,fontFamily:p.style.fontFamily,fontWeight:p.style.fontWeight,foreColor:p.style.color,opacity:1});M.node.setAttribute("class","apexcharts-".concat(l,"-text")),u.globals.dom.Paper.add(M)}}}]),ge}(),Vs=function(){function ge(l){j(this,ge),this.w=l.w,this.dCtx=l}return Be(ge,[{key:"getTitleSubtitleCoords",value:function(l){var u=this.w,p=0,y=0,w="title"===l?u.config.title.floating:u.config.subtitle.floating,C=u.globals.dom.baseEl.querySelector(".apexcharts-".concat(l,"-text"));if(null!==C&&!w){var M=C.getBoundingClientRect();p=M.width,y=u.globals.axisCharts?M.height+5:M.height}return{width:p,height:y}}},{key:"getLegendsRect",value:function(){var l=this.w,u=l.globals.dom.elLegendWrap;l.config.legend.height||"top"!==l.config.legend.position&&"bottom"!==l.config.legend.position||(u.style.maxHeight=l.globals.svgHeight/2+"px");var p=Object.assign({},tt.getBoundingClientRect(u));return this.dCtx.lgRect=null!==u&&!l.config.legend.floating&&l.config.legend.show?{x:p.x,y:p.y,height:p.height,width:0===p.height?0:p.width}:{x:0,y:0,height:0,width:0},"left"!==l.config.legend.position&&"right"!==l.config.legend.position||1.5*this.dCtx.lgRect.width>l.globals.svgWidth&&(this.dCtx.lgRect.width=l.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(l,u){var p=l;if(this.w.globals.isMultiLineX){var y=u.map(function(C,M){return Array.isArray(C)?C.length:1}),w=Math.max.apply(Math,Et(y));p=u[y.indexOf(w)]}return p}}]),ge}(),Fs=function(){function ge(l){j(this,ge),this.w=l.w,this.dCtx=l}return Be(ge,[{key:"getxAxisLabelsCoords",value:function(){var l,u=this.w,p=u.globals.labels.slice();if(u.config.xaxis.convertedCatToNumeric&&0===p.length&&(p=u.globals.categoryLabels),u.globals.timescaleLabels.length>0){var y=this.getxAxisTimeScaleLabelsCoords();l={width:y.width,height:y.height},u.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==u.config.legend.position&&"right"!==u.config.legend.position||u.config.legend.floating?0:this.dCtx.lgRect.width;var w=u.globals.xLabelFormatter,C=tt.getLargestStringFromArr(p),M=this.dCtx.dimHelpers.getLargestStringFromMultiArr(C,p);u.globals.isBarHorizontal&&(M=C=u.globals.yAxisScale[0].result.reduce(function(xe,Se){return xe.length>Se.length?xe:Se},0));var B=new nn(this.dCtx.ctx),H=C;C=B.xLabelFormat(w,C,H,{i:void 0,dateFormatter:new qi(this.dCtx.ctx).formatDate,w:u}),M=B.xLabelFormat(w,M,H,{i:void 0,dateFormatter:new qi(this.dCtx.ctx).formatDate,w:u}),(u.config.xaxis.convertedCatToNumeric&&void 0===C||""===String(C).trim())&&(M=C="1");var K=new kt(this.dCtx.ctx),J=K.getTextRects(C,u.config.xaxis.labels.style.fontSize),ne=J;if(C!==M&&(ne=K.getTextRects(M,u.config.xaxis.labels.style.fontSize)),(l={width:J.width>=ne.width?J.width:ne.width,height:J.height>=ne.height?J.height:ne.height}).width*p.length>u.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==u.config.xaxis.labels.rotate||u.config.xaxis.labels.rotateAlways){if(!u.globals.isBarHorizontal){u.globals.rotateXLabels=!0;var de=function(xe){return K.getTextRects(xe,u.config.xaxis.labels.style.fontSize,u.config.xaxis.labels.style.fontFamily,"rotate(".concat(u.config.xaxis.labels.rotate," 0 0)"),!1)};J=de(C),C!==M&&(ne=de(M)),l.height=(J.height>ne.height?J.height:ne.height)/1.5,l.width=J.width>ne.width?J.width:ne.width}}else u.globals.rotateXLabels=!1}return u.config.xaxis.labels.show||(l={width:0,height:0}),{width:l.width,height:l.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var l,u=this.w;if(!u.globals.hasXaxisGroups)return{width:0,height:0};var p,y=(null===(l=u.config.xaxis.group.style)||void 0===l?void 0:l.fontSize)||u.config.xaxis.labels.style.fontSize,w=u.globals.groups.map(function(J){return J.title}),C=tt.getLargestStringFromArr(w),M=this.dCtx.dimHelpers.getLargestStringFromMultiArr(C,w),B=new kt(this.dCtx.ctx),H=B.getTextRects(C,y),K=H;return C!==M&&(K=B.getTextRects(M,y)),p={width:H.width>=K.width?H.width:K.width,height:H.height>=K.height?H.height:K.height},u.config.xaxis.labels.show||(p={width:0,height:0}),{width:p.width,height:p.height}}},{key:"getxAxisTitleCoords",value:function(){var l=this.w,u=0,p=0;if(void 0!==l.config.xaxis.title.text){var y=new kt(this.dCtx.ctx).getTextRects(l.config.xaxis.title.text,l.config.xaxis.title.style.fontSize);u=y.width,p=y.height}return{width:u,height:p}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var l,u=this.w;this.dCtx.timescaleLabels=u.globals.timescaleLabels.slice();var p=this.dCtx.timescaleLabels.map(function(w){return w.value}),y=p.reduce(function(w,C){return void 0===w?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):w.length>C.length?w:C},0);return 1.05*(l=new kt(this.dCtx.ctx).getTextRects(y,u.config.xaxis.labels.style.fontSize)).width*p.length>u.globals.gridWidth&&0!==u.config.xaxis.labels.rotate&&(u.globals.overlappingXLabels=!0),l}},{key:"additionalPaddingXLabels",value:function(l){var u=this,p=this.w,y=p.globals,w=p.config,C=w.xaxis.type,M=l.width;y.skipLastTimelinelabel=!1,y.skipFirstTimelinelabel=!1;var B=p.config.yaxis[0].opposite&&p.globals.isBarHorizontal;w.yaxis.forEach(function(K,J){B?(u.dCtx.gridPad.left<M&&(u.dCtx.xPadLeft=M/2+1),u.dCtx.xPadRight=M/2+1):function(K,J){w.yaxis.length>1&&-1!==y.collapsedSeriesIndices.indexOf(J)||function(ne){if(u.dCtx.timescaleLabels&&u.dCtx.timescaleLabels.length){var Se=u.dCtx.timescaleLabels[0].position-M/1.75+u.dCtx.yAxisWidthLeft;u.dCtx.timescaleLabels[u.dCtx.timescaleLabels.length-1].position+M/1.75-u.dCtx.yAxisWidthRight>y.svgWidth-y.translateX-("right"===p.config.legend.position&&u.dCtx.lgRect.width>0?u.dCtx.lgRect.width:0)&&(y.skipLastTimelinelabel=!0),Se<-(ne.show&&!ne.floating||"bar"!==w.chart.type&&"candlestick"!==w.chart.type&&"rangeBar"!==w.chart.type&&"boxPlot"!==w.chart.type?10:M/1.75)&&(y.skipFirstTimelinelabel=!0)}else"datetime"===C?u.dCtx.gridPad.right<M&&!y.rotateXLabels&&(y.skipLastTimelinelabel=!0):"datetime"!==C&&u.dCtx.gridPad.right<M/2-u.dCtx.yAxisWidthRight&&!y.rotateXLabels&&!p.config.xaxis.labels.trim&&("between"!==p.config.xaxis.tickPlacement||p.globals.isBarHorizontal)&&(u.dCtx.xPadRight=M/2+1)}(K)}(K,J)})}}]),ge}(),Ds=function(){function ge(l){j(this,ge),this.w=l.w,this.dCtx=l}return Be(ge,[{key:"getyAxisLabelsCoords",value:function(){var l=this,u=this.w,p=[],y=10,w=new Os(this.dCtx.ctx);return u.config.yaxis.map(function(C,M){var B={seriesIndex:M,dataPointIndex:-1,w:u},H=u.globals.yAxisScale[M],K=0;if(!w.isYAxisHidden(M)&&C.labels.show&&void 0!==C.labels.minWidth&&(K=C.labels.minWidth),!w.isYAxisHidden(M)&&C.labels.show&&H.result.length){var J=u.globals.yLabelFormatters[M],de=H.result.reduce(function(le,we){var Le,je;return(null===(Le=String(J(le,B)))||void 0===Le?void 0:Le.length)>(null===(je=String(J(we,B)))||void 0===je?void 0:je.length)?le:we},H.niceMin===Number.MIN_VALUE?0:H.niceMin),xe=de=J(de,B);if(void 0!==de&&0!==de.length||(de=H.niceMax),u.globals.isBarHorizontal){y=0;var Se=u.globals.labels.slice();de=tt.getLargestStringFromArr(Se),de=J(de,{seriesIndex:M,dataPointIndex:-1,w:u}),xe=l.dCtx.dimHelpers.getLargestStringFromMultiArr(de,Se)}var Pe=new kt(l.dCtx.ctx),Te="rotate(".concat(C.labels.rotate," 0 0)"),Ne=Pe.getTextRects(de,C.labels.style.fontSize,C.labels.style.fontFamily,Te,!1),U=Ne;de!==xe&&(U=Pe.getTextRects(xe,C.labels.style.fontSize,C.labels.style.fontFamily,Te,!1)),p.push({width:(K>U.width||K>Ne.width?K:U.width>Ne.width?U.width:Ne.width)+y,height:U.height>Ne.height?U.height:Ne.height})}else p.push({width:0,height:0})}),p}},{key:"getyAxisTitleCoords",value:function(){var l=this,p=[];return this.w.config.yaxis.map(function(y,w){if(y.show&&void 0!==y.title.text){var C=new kt(l.dCtx.ctx),M="rotate(".concat(y.title.rotate," 0 0)"),B=C.getTextRects(y.title.text,y.title.style.fontSize,y.title.style.fontFamily,M,!1);p.push({width:B.width,height:B.height})}else p.push({width:0,height:0})}),p}},{key:"getTotalYAxisWidth",value:function(){var l=this.w,u=0,p=0,y=0,w=l.globals.yAxisScale.length>1?10:0,C=new Os(this.dCtx.ctx),M=function(B,H){var K=l.config.yaxis[H].floating,J=0;B.width>0&&!K?(J=B.width+w,l.globals.ignoreYAxisIndexes.indexOf(H)>-1&&(J=J-B.width-w)):J=K||C.isYAxisHidden(H)?0:5,l.config.yaxis[H].opposite?y+=J:p+=J,u+=J};return l.globals.yLabelsCoords.map(function(B,H){M(B,H)}),l.globals.yTitleCoords.map(function(B,H){M(B,H)}),l.globals.isBarHorizontal&&!l.config.yaxis[0].floating&&(u=l.globals.yLabelsCoords[0].width+l.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=p,this.dCtx.yAxisWidthRight=y,u}}]),ge}(),Es=function(){function ge(l){j(this,ge),this.w=l.w,this.dCtx=l}return Be(ge,[{key:"gridPadForColumnsInNumericAxis",value:function(l){var u=this.w;if(u.globals.noData||u.globals.allSeriesCollapsed)return 0;var p=function(K){return"bar"===K||"rangeBar"===K||"candlestick"===K||"boxPlot"===K},y=u.config.chart.type,w=0,C=p(y)?u.config.series.length:1;if(u.globals.comboBarCount>0&&(C=u.globals.comboBarCount),u.globals.collapsedSeries.forEach(function(K){p(K.type)&&(C-=1)}),u.config.chart.stacked&&(C=1),(p(y)||u.globals.comboBarCount>0)&&u.globals.isXNumeric&&!u.globals.isBarHorizontal&&C>0){var M,B,H=Math.abs(u.globals.initialMaxX-u.globals.initialMinX);H<=3&&(H=u.globals.dataPoints),M=H/l,u.globals.minXDiff&&u.globals.minXDiff/M>0&&(B=u.globals.minXDiff/M),B>l/2&&(B/=2),(w=B*parseInt(u.config.plotOptions.bar.columnWidth,10)/100)<1&&(w=1),u.globals.barPadForNumericAxis=w}return w}},{key:"gridPadFortitleSubtitle",value:function(){var l=this,u=this.w,p=u.globals,y=this.dCtx.isSparkline||!u.globals.axisCharts?0:10;["title","subtitle"].forEach(function(M){y+=void 0!==u.config[M].text?u.config[M].margin:l.dCtx.isSparkline||!u.globals.axisCharts?0:5}),!u.config.legend.show||"bottom"!==u.config.legend.position||u.config.legend.floating||u.globals.axisCharts||(y+=10);var w=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),C=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");p.gridHeight=p.gridHeight-w.height-C.height-y,p.translateY=p.translateY+w.height+C.height+y}},{key:"setGridXPosForDualYAxis",value:function(l,u){var p=this.w,y=new Os(this.dCtx.ctx);p.config.yaxis.map(function(w,C){-1!==p.globals.ignoreYAxisIndexes.indexOf(C)||w.floating||y.isYAxisHidden(C)||(w.opposite&&(p.globals.translateX=p.globals.translateX-(u[C].width+l[C].width)-parseInt(p.config.yaxis[C].labels.style.fontSize,10)/1.2-12),p.globals.translateX<2&&(p.globals.translateX=2))})}}]),ge}(),wr=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Vs(this),this.dimYAxis=new Ds(this),this.dimXAxis=new Fs(this),this.dimGrid=new Es(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Be(ge,[{key:"plotCoords",value:function(){var l=this,u=this.w,p=u.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((u.config.markers.discrete.length>0||u.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(w){var C=Xt(w,2);l.gridPad[C[0]]=Math.max(C[1],l.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(u.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(u.config.stroke.width/2,this.gridPad.bottom)),p.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),p.gridHeight=p.gridHeight-this.gridPad.top-this.gridPad.bottom,p.gridWidth=p.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var y=this.dimGrid.gridPadForColumnsInNumericAxis(p.gridWidth);p.gridWidth=p.gridWidth-2*y,p.translateX=p.translateX+this.gridPad.left+this.xPadLeft+(y>0?y+4:0),p.translateY=p.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var l=this,u=this.w,p=u.globals,y=this.dimYAxis.getyAxisLabelsCoords(),w=this.dimYAxis.getyAxisTitleCoords();u.globals.yLabelsCoords=[],u.globals.yTitleCoords=[],u.config.yaxis.map(function(de,xe){u.globals.yLabelsCoords.push({width:y[xe].width,index:xe}),u.globals.yTitleCoords.push({width:w[xe].width,index:xe})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var C=this.dimXAxis.getxAxisLabelsCoords(),M=this.dimXAxis.getxAxisGroupLabelsCoords(),B=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(C,B,M),p.translateXAxisY=u.globals.rotateXLabels?this.xAxisHeight/8:-4,p.translateXAxisX=u.globals.rotateXLabels&&u.globals.isXNumeric&&u.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,u.globals.isBarHorizontal&&(p.rotateXLabels=!1,p.translateXAxisY=parseInt(u.config.xaxis.labels.style.fontSize,10)/1.5*-1),p.translateXAxisY=p.translateXAxisY+u.config.xaxis.labels.offsetY,p.translateXAxisX=p.translateXAxisX+u.config.xaxis.labels.offsetX;var H=this.yAxisWidth,K=this.xAxisHeight;p.xAxisLabelsHeight=this.xAxisHeight-B.height,p.xAxisGroupLabelsHeight=p.xAxisLabelsHeight-C.height,p.xAxisLabelsWidth=this.xAxisWidth,p.xAxisHeight=this.xAxisHeight;var J=10;("radar"===u.config.chart.type||this.isSparkline)&&(H=0,K=p.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===u.config.chart.type)&&(H=0,K=0,J=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(C);var ne=function(){p.translateX=H,p.gridHeight=p.svgHeight-l.lgRect.height-K-(l.isSparkline||"treemap"===u.config.chart.type?0:u.globals.rotateXLabels?10:15),p.gridWidth=p.svgWidth-H};switch("top"===u.config.xaxis.position&&(J=p.xAxisHeight-u.config.xaxis.axisTicks.height-5),u.config.legend.position){case"bottom":p.translateY=J,ne();break;case"top":p.translateY=this.lgRect.height+J,ne();break;case"left":p.translateY=J,p.translateX=this.lgRect.width+H,p.gridHeight=p.svgHeight-K-12,p.gridWidth=p.svgWidth-this.lgRect.width-H;break;case"right":p.translateY=J,p.translateX=H,p.gridHeight=p.svgHeight-K-12,p.gridWidth=p.svgWidth-this.lgRect.width-H-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(w,y),new zn(this.ctx).setYAxisXPosition(y,w)}},{key:"setDimensionsForNonAxisCharts",value:function(){var l=this.w,u=l.globals,p=l.config,y=0;l.config.legend.show&&!l.config.legend.floating&&(y=20);var w="pie"===p.chart.type||"polarArea"===p.chart.type||"donut"===p.chart.type?"pie":"radialBar",C=p.plotOptions[w].offsetY,M=p.plotOptions[w].offsetX;if(!p.legend.show||p.legend.floating)return u.gridHeight=u.svgHeight-p.grid.padding.left+p.grid.padding.right,u.gridWidth=u.gridHeight,u.translateY=C,void(u.translateX=M+(u.svgWidth-u.gridWidth)/2);switch(p.legend.position){case"bottom":u.gridHeight=u.svgHeight-this.lgRect.height-u.goldenPadding,u.gridWidth=u.svgWidth,u.translateY=C-10,u.translateX=M+(u.svgWidth-u.gridWidth)/2;break;case"top":u.gridHeight=u.svgHeight-this.lgRect.height-u.goldenPadding,u.gridWidth=u.svgWidth,u.translateY=this.lgRect.height+C+10,u.translateX=M+(u.svgWidth-u.gridWidth)/2;break;case"left":u.gridWidth=u.svgWidth-this.lgRect.width-y,u.gridHeight="auto"!==p.chart.height?u.svgHeight:u.gridWidth,u.translateY=C,u.translateX=M+this.lgRect.width+y;break;case"right":u.gridWidth=u.svgWidth-this.lgRect.width-y-5,u.gridHeight="auto"!==p.chart.height?u.svgHeight:u.gridWidth,u.translateY=C,u.translateX=M+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(l,u,p){var y=this.w;this.xAxisHeight=(p.height+l.height+u.height)*(y.globals.isMultiLineX?1.2:y.globals.LINE_HEIGHT_RATIO)+(y.globals.hasXaxisGroups?2:1)*(y.globals.rotateXLabels?22:10)+(y.globals.rotateXLabels&&"bottom"===y.config.legend.position?10:0),this.xAxisWidth=l.width,this.xAxisHeight-u.height>y.config.xaxis.labels.maxHeight&&(this.xAxisHeight=y.config.xaxis.labels.maxHeight),y.config.xaxis.labels.minHeight&&this.xAxisHeight<y.config.xaxis.labels.minHeight&&(this.xAxisHeight=y.config.xaxis.labels.minHeight),y.config.xaxis.floating&&(this.xAxisHeight=0);var K=0,J=0;y.config.yaxis.forEach(function(ne){K+=ne.labels.minWidth,J+=ne.labels.maxWidth}),this.yAxisWidth<K&&(this.yAxisWidth=K),this.yAxisWidth>J&&(this.yAxisWidth=J)}}]),ge}(),us=function(){function ge(l){j(this,ge),this.w=l.w,this.lgCtx=l}return Be(ge,[{key:"getLegendStyles",value:function(){var l,u,p,y=document.createElement("style");y.setAttribute("type","text/css");var w=(null===(l=this.lgCtx.ctx)||void 0===l||null===(u=l.opts)||void 0===u||null===(p=u.chart)||void 0===p?void 0:p.nonce)||this.w.config.chart.nonce;w&&y.setAttribute("nonce",w);var C=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return y.appendChild(C),y}},{key:"getLegendBBox",value:function(){var l=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:l.height,clww:l.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(l,u){var p=this,y=this.w;if(y.globals.axisCharts||"radialBar"===y.config.chart.type){y.globals.resized=!0;var w=null,C=null;y.globals.risingSeries=[],y.globals.axisCharts?(w=y.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(l,"']")),C=parseInt(w.getAttribute("data:realIndex"),10)):(w=y.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(l+1,"']")),C=parseInt(w.getAttribute("rel"),10)-1),u?[{cs:y.globals.collapsedSeries,csi:y.globals.collapsedSeriesIndices},{cs:y.globals.ancillaryCollapsedSeries,csi:y.globals.ancillaryCollapsedSeriesIndices}].forEach(function(K){p.riseCollapsedSeries(K.cs,K.csi,C)}):this.hideSeries({seriesEl:w,realIndex:C})}else{var M=y.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(l+1,"'] path")),B=y.config.chart.type;if("pie"===B||"polarArea"===B||"donut"===B){var H=y.config.plotOptions.pie.donut.labels;new kt(this.lgCtx.ctx).pathMouseDown(M.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(M.members[0].node,H)}M.fire("click")}}},{key:"hideSeries",value:function(l){var u=l.seriesEl,p=l.realIndex,y=this.w,w=tt.clone(y.config.series);if(y.globals.axisCharts){var C=y.config.yaxis[y.globals.seriesYAxisReverseMap[p]];if(C&&C.show&&C.showAlways)y.globals.ancillaryCollapsedSeriesIndices.indexOf(p)<0&&(y.globals.ancillaryCollapsedSeries.push({index:p,data:w[p].data.slice(),type:u.parentNode.className.baseVal.split("-")[1]}),y.globals.ancillaryCollapsedSeriesIndices.push(p));else if(y.globals.collapsedSeriesIndices.indexOf(p)<0){y.globals.collapsedSeries.push({index:p,data:w[p].data.slice(),type:u.parentNode.className.baseVal.split("-")[1]}),y.globals.collapsedSeriesIndices.push(p);var M=y.globals.risingSeries.indexOf(p);y.globals.risingSeries.splice(M,1)}}else y.globals.collapsedSeries.push({index:p,data:w[p]}),y.globals.collapsedSeriesIndices.push(p);for(var B=u.childNodes,H=0;H<B.length;H++)B[H].classList.contains("apexcharts-series-markers-wrap")&&(B[H].classList.contains("apexcharts-hide")?B[H].classList.remove("apexcharts-hide"):B[H].classList.add("apexcharts-hide"));y.globals.allSeriesCollapsed=y.globals.collapsedSeries.length===y.config.series.length,w=this._getSeriesBasedOnCollapsedState(w),this.lgCtx.ctx.updateHelpers._updateSeries(w,y.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(l,u,p){var y=this.w,w=tt.clone(y.config.series);if(l.length>0){for(var C=0;C<l.length;C++)l[C].index===p&&(y.globals.axisCharts?(w[p].data=l[C].data.slice(),l.splice(C,1),u.splice(C,1),y.globals.risingSeries.push(p)):(w[p]=l[C].data,l.splice(C,1),u.splice(C,1),y.globals.risingSeries.push(p)));w=this._getSeriesBasedOnCollapsedState(w),this.lgCtx.ctx.updateHelpers._updateSeries(w,y.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(l){var u=this.w;return l.forEach(u.globals.axisCharts?function(p,y){u.globals.collapsedSeriesIndices.indexOf(y)>-1&&(l[y].data=[])}:function(p,y){u.globals.collapsedSeriesIndices.indexOf(y)>-1&&(l[y]=0)}),l}}]),ge}(),Ks=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new us(this)}return Be(ge,[{key:"init",value:function(){var l=this.w,u=l.globals,p=l.config;if((p.legend.showForSingleSeries&&1===u.series.length||this.isBarsDistributed||u.series.length>1||!u.axisCharts)&&p.legend.show){for(;u.dom.elLegendWrap.firstChild;)u.dom.elLegendWrap.removeChild(u.dom.elLegendWrap.firstChild);this.drawLegends(),tt.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===p.legend.position||"top"===p.legend.position?this.legendAlignHorizontal():"right"!==p.legend.position&&"left"!==p.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var l=this,u=this.w,p=u.config.legend.fontFamily,y=u.globals.seriesNames,w=u.globals.colors.slice();if("heatmap"===u.config.chart.type){var C=u.config.plotOptions.heatmap.colorScale.ranges;y=C.map(function(cn){return cn.name?cn.name:cn.from+" - "+cn.to}),w=C.map(function(cn){return cn.color})}else this.isBarsDistributed&&(y=u.globals.labels.slice());u.config.legend.customLegendItems.length&&(y=u.config.legend.customLegendItems);for(var M=u.globals.legendFormatter,B=u.config.legend.inverseOrder,H=B?y.length-1:0;B?H>=0:H<=y.length-1;B?H--:H++){var K,J=M(y[H],{seriesIndex:H,w:u}),ne=!1,de=!1;if(u.globals.collapsedSeries.length>0)for(var xe=0;xe<u.globals.collapsedSeries.length;xe++)u.globals.collapsedSeries[xe].index===H&&(ne=!0);if(u.globals.ancillaryCollapsedSeriesIndices.length>0)for(var Se=0;Se<u.globals.ancillaryCollapsedSeriesIndices.length;Se++)u.globals.ancillaryCollapsedSeriesIndices[Se]===H&&(de=!0);var Pe=document.createElement("span");Pe.classList.add("apexcharts-legend-marker");var Te=u.config.legend.markers.offsetX,Ne=u.config.legend.markers.offsetY,U=u.config.legend.markers.height,le=u.config.legend.markers.width,we=u.config.legend.markers.strokeWidth,Le=u.config.legend.markers.strokeColor,je=u.config.legend.markers.radius,lt=Pe.style;lt.background=w[H],lt.color=w[H],lt.setProperty("background",w[H],"important"),u.config.legend.markers.fillColors&&u.config.legend.markers.fillColors[H]&&(lt.background=u.config.legend.markers.fillColors[H]),void 0!==u.globals.seriesColors[H]&&(lt.background=u.globals.seriesColors[H],lt.color=u.globals.seriesColors[H]),lt.height=Array.isArray(U)?parseFloat(U[H])+"px":parseFloat(U)+"px",lt.width=Array.isArray(le)?parseFloat(le[H])+"px":parseFloat(le)+"px",lt.left=(Array.isArray(Te)?parseFloat(Te[H]):parseFloat(Te))+"px",lt.top=(Array.isArray(Ne)?parseFloat(Ne[H]):parseFloat(Ne))+"px",lt.borderWidth=Array.isArray(we)?we[H]:we,lt.borderColor=Array.isArray(Le)?Le[H]:Le,lt.borderRadius=Array.isArray(je)?parseFloat(je[H])+"px":parseFloat(je)+"px",u.config.legend.markers.customHTML&&(Array.isArray(u.config.legend.markers.customHTML)?u.config.legend.markers.customHTML[H]&&(Pe.innerHTML=u.config.legend.markers.customHTML[H]()):Pe.innerHTML=u.config.legend.markers.customHTML()),kt.setAttrs(Pe,{rel:H+1,"data:collapsed":ne||de}),(ne||de)&&Pe.classList.add("apexcharts-inactive-legend");var jt=document.createElement("div"),qt=document.createElement("span");qt.classList.add("apexcharts-legend-text"),qt.innerHTML=Array.isArray(J)?J.join(" "):J;var Di=u.config.legend.labels.useSeriesColors?u.globals.colors[H]:Array.isArray(u.config.legend.labels.colors)?null===(K=u.config.legend.labels.colors)||void 0===K?void 0:K[H]:u.config.legend.labels.colors;Di||(Di=u.config.chart.foreColor),qt.style.color=Di,qt.style.fontSize=parseFloat(u.config.legend.fontSize)+"px",qt.style.fontWeight=u.config.legend.fontWeight,qt.style.fontFamily=p||u.config.chart.fontFamily,kt.setAttrs(qt,{rel:H+1,i:H,"data:default-text":encodeURIComponent(J),"data:collapsed":ne||de}),jt.appendChild(Pe),jt.appendChild(qt);var Qi=new Oi(this.ctx);u.config.legend.showForZeroSeries||0===Qi.getSeriesTotalByIndex(H)&&Qi.seriesHaveSameValues(H)&&!Qi.isSeriesNull(H)&&-1===u.globals.collapsedSeriesIndices.indexOf(H)&&-1===u.globals.ancillaryCollapsedSeriesIndices.indexOf(H)&&jt.classList.add("apexcharts-hidden-zero-series"),u.config.legend.showForNullSeries||Qi.isSeriesNull(H)&&-1===u.globals.collapsedSeriesIndices.indexOf(H)&&-1===u.globals.ancillaryCollapsedSeriesIndices.indexOf(H)&&jt.classList.add("apexcharts-hidden-null-series"),u.globals.dom.elLegendWrap.appendChild(jt),u.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(u.config.legend.horizontalAlign)),u.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+u.config.legend.position),jt.classList.add("apexcharts-legend-series"),jt.style.margin="".concat(u.config.legend.itemMargin.vertical,"px ").concat(u.config.legend.itemMargin.horizontal,"px"),u.globals.dom.elLegendWrap.style.width=u.config.legend.width?u.config.legend.width+"px":"",u.globals.dom.elLegendWrap.style.height=u.config.legend.height?u.config.legend.height+"px":"",kt.setAttrs(jt,{rel:H+1,seriesName:tt.escapeString(y[H]),"data:collapsed":ne||de}),(ne||de)&&jt.classList.add("apexcharts-inactive-legend"),u.config.legend.onItemClick.toggleDataSeries||jt.classList.add("apexcharts-no-click")}u.globals.dom.elWrap.addEventListener("click",l.onLegendClick,!0),u.config.legend.onItemHover.highlightDataSeries&&0===u.config.legend.customLegendItems.length&&(u.globals.dom.elWrap.addEventListener("mousemove",l.onLegendHovered,!0),u.globals.dom.elWrap.addEventListener("mouseout",l.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(l,u){var p=this.w,y=p.globals.dom.elLegendWrap,w=y.getBoundingClientRect(),C=0,M=0;if("bottom"===p.config.legend.position)M+=p.globals.svgHeight-w.height/2;else if("top"===p.config.legend.position){var B=new wr(this.ctx),H=B.dimHelpers.getTitleSubtitleCoords("title").height,K=B.dimHelpers.getTitleSubtitleCoords("subtitle").height;M=M+(H>0?H-10:0)+(K>0?K-10:0)}y.style.position="absolute",M=M+u+p.config.legend.offsetY,y.style.left=(C=C+l+p.config.legend.offsetX)+"px",y.style.top=M+"px","bottom"===p.config.legend.position?(y.style.top="auto",y.style.bottom=5-p.config.legend.offsetY+"px"):"right"===p.config.legend.position&&(y.style.left="auto",y.style.right=25+p.config.legend.offsetX+"px"),["width","height"].forEach(function(J){y.style[J]&&(y.style[J]=parseInt(p.config.legend[J],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var l=this.w;l.globals.dom.elLegendWrap.style.right=0;var u=this.legendHelpers.getLegendBBox(),p=new wr(this.ctx),y=p.dimHelpers.getTitleSubtitleCoords("title"),w=p.dimHelpers.getTitleSubtitleCoords("subtitle"),C=0;"bottom"===l.config.legend.position?C=-u.clwh/1.8:"top"===l.config.legend.position&&(C=y.height+w.height+l.config.title.margin+l.config.subtitle.margin-10),this.setLegendWrapXY(20,C)}},{key:"legendAlignVertical",value:function(){var l=this.w,u=this.legendHelpers.getLegendBBox(),p=0;"left"===l.config.legend.position&&(p=20),"right"===l.config.legend.position&&(p=l.globals.svgWidth-u.clww-10),this.setLegendWrapXY(p,20)}},{key:"onLegendHovered",value:function(l){var u=this.w,p=l.target.classList.contains("apexcharts-legend-series")||l.target.classList.contains("apexcharts-legend-text")||l.target.classList.contains("apexcharts-legend-marker");if("heatmap"===u.config.chart.type||this.isBarsDistributed){if(p){var y=parseInt(l.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,y,this.w]),new Fr(this.ctx).highlightRangeInSeries(l,l.target)}}else!l.target.classList.contains("apexcharts-inactive-legend")&&p&&new Fr(this.ctx).toggleSeriesOnHover(l,l.target)}},{key:"onLegendClick",value:function(l){var u=this.w;if(!u.config.legend.customLegendItems.length&&(l.target.classList.contains("apexcharts-legend-series")||l.target.classList.contains("apexcharts-legend-text")||l.target.classList.contains("apexcharts-legend-marker"))){var p=parseInt(l.target.getAttribute("rel"),10)-1,y="true"===l.target.getAttribute("data:collapsed"),w=this.w.config.chart.events.legendClick;"function"==typeof w&&w(this.ctx,p,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,p,this.w]);var C=this.w.config.legend.markers.onClick;"function"==typeof C&&l.target.classList.contains("apexcharts-legend-marker")&&(C(this.ctx,p,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,p,this.w])),"treemap"!==u.config.chart.type&&"heatmap"!==u.config.chart.type&&!this.isBarsDistributed&&u.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(p,y)}}}]),ge}(),io=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w;var u=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=u.globals.minX,this.maxX=u.globals.maxX}return Be(ge,[{key:"createToolbar",value:function(){var l=this,u=this.w,p=function(){return document.createElement("div")},y=p();if(y.setAttribute("class","apexcharts-toolbar"),y.style.top=u.config.chart.toolbar.offsetY+"px",y.style.right=3-u.config.chart.toolbar.offsetX+"px",u.globals.dom.elWrap.appendChild(y),this.elZoom=p(),this.elZoomIn=p(),this.elZoomOut=p(),this.elPan=p(),this.elSelection=p(),this.elZoomReset=p(),this.elMenuIcon=p(),this.elMenu=p(),this.elCustomIcons=[],this.t=u.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var w=0;w<this.t.customIcons.length;w++)this.elCustomIcons.push(p());var C=[],M=function(J,ne,de){var xe=J.toLowerCase();l.t[xe]&&u.config.chart.zoom.enabled&&C.push({el:ne,icon:"string"==typeof l.t[xe]?l.t[xe]:de,title:l.localeValues[J],class:"apexcharts-".concat(xe,"-icon")})};M("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),M("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var B=function(J){l.t[J]&&u.config.chart[J].enabled&&C.push({el:"zoom"===J?l.elZoom:l.elSelection,icon:"string"==typeof l.t[J]?l.t[J]:"zoom"===J?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:l.localeValues["zoom"===J?"selectionZoom":"selection"],class:u.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(J,"-icon")})};B("zoom"),B("selection"),this.t.pan&&u.config.chart.zoom.enabled&&C.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:u.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),M("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&C.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var H=0;H<this.elCustomIcons.length;H++)C.push({el:this.elCustomIcons[H],icon:this.t.customIcons[H].icon,title:this.t.customIcons[H].title,index:this.t.customIcons[H].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[H].class});C.forEach(function(J,ne){J.index&&tt.moveIndexInArray(C,ne,J.index)});for(var K=0;K<C.length;K++)kt.setAttrs(C[K].el,{class:C[K].class,title:C[K].title}),C[K].el.innerHTML=C[K].icon,y.appendChild(C[K].el);this._createHamburgerMenu(y),u.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):u.globals.panEnabled?this.elPan.classList.add(this.selectedClass):u.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(l){this.elMenuItems=[],l.appendChild(this.elMenu),kt.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var u=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],p=0;p<u.length;p++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[p].innerHTML=u[p].title,kt.setAttrs(this.elMenuItems[p],{class:"apexcharts-menu-item ".concat(u[p].name),title:u[p].title}),this.elMenu.appendChild(this.elMenuItems[p])}},{key:"addToolbarEventListeners",value:function(){var l=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(p){p.classList.contains("exportSVG")?p.addEventListener("click",l.handleDownload.bind(l,"svg")):p.classList.contains("exportPNG")?p.addEventListener("click",l.handleDownload.bind(l,"png")):p.classList.contains("exportCSV")&&p.addEventListener("click",l.handleDownload.bind(l,"csv"))});for(var u=0;u<this.t.customIcons.length;u++)this.elCustomIcons[u].addEventListener("click",this.t.customIcons[u].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(l){this.ctx.getSyncedCharts().forEach(function(u){u.ctx.toolbar.toggleOtherControls();var p="selection"===l?u.ctx.toolbar.elSelection:u.ctx.toolbar.elZoom,y="selection"===l?"selectionEnabled":"zoomEnabled";u.w.globals[y]=!u.w.globals[y],p.classList.contains(u.ctx.toolbar.selectedClass)?p.classList.remove(u.ctx.toolbar.selectedClass):p.classList.add(u.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var l=this.w;this.elZoom||(this.elZoom=l.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=l.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=l.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(l){this.toggleOtherControls(),"pan"===l?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var u="pan"===l?this.elPan:this.elZoom,p="pan"===l?this.elZoom:this.elPan;u&&u.classList.add(this.selectedClass),p&&p.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(l){l.ctx.toolbar.toggleOtherControls(),l.w.globals.panEnabled=!l.w.globals.panEnabled,l.ctx.toolbar.elPan.classList.contains(l.ctx.toolbar.selectedClass)?l.ctx.toolbar.elPan.classList.remove(l.ctx.toolbar.selectedClass):l.ctx.toolbar.elPan.classList.add(l.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var l=this,u=this.w;u.globals.panEnabled=!1,u.globals.zoomEnabled=!1,u.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(p){p&&p.classList.remove(l.selectedClass)})}},{key:"handleZoomIn",value:function(){var l=this.w;l.globals.isRangeBar&&(this.minX=l.globals.minY,this.maxX=l.globals.maxY);var u=(this.minX+this.maxX)/2,w=this._getNewMinXMaxX((this.minX+u)/2,(this.maxX+u)/2);l.globals.disableZoomIn||this.zoomUpdateOptions(w.minX,w.maxX)}},{key:"handleZoomOut",value:function(){var l=this.w;if(l.globals.isRangeBar&&(this.minX=l.globals.minY,this.maxX=l.globals.maxY),!("datetime"===l.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var u=(this.minX+this.maxX)/2,w=this._getNewMinXMaxX(this.minX-(u-this.minX),this.maxX-(u-this.maxX));l.globals.disableZoomOut||this.zoomUpdateOptions(w.minX,w.maxX)}}},{key:"_getNewMinXMaxX",value:function(l,u){var p=this.w.config.xaxis.convertedCatToNumeric;return{minX:p?Math.floor(l):l,maxX:p?Math.floor(u):u}}},{key:"zoomUpdateOptions",value:function(l,u){var p=this.w;if(void 0!==l||void 0!==u){if(!(p.config.xaxis.convertedCatToNumeric&&(l<1&&(l=1,u=p.globals.dataPoints),u-l<2))){var y={min:l,max:u},w=this.getBeforeZoomRange(y);w&&(y=w.xaxis);var C={xaxis:y},M=tt.clone(p.globals.initialConfig.yaxis);p.config.chart.group||(C.yaxis=M),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(C,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(y,M)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(l,u){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:l,yaxis:u})}},{key:"getBeforeZoomRange",value:function(l,u){var p=null;return"function"==typeof this.ev.beforeZoom&&(p=this.ev.beforeZoom(this,{xaxis:l,yaxis:u})),p}},{key:"toggleMenu",value:function(){var l=this;window.setTimeout(function(){l.elMenu.classList.contains("apexcharts-menu-open")?l.elMenu.classList.remove("apexcharts-menu-open"):l.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(l){var u=this.w,p=new Cs(this.ctx);switch(l){case"svg":p.exportToSVG(this.ctx);break;case"png":p.exportToPng(this.ctx);break;case"csv":p.exportToCSV({series:u.config.series,columnDelimiter:u.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(l){this.ctx.getSyncedCharts().forEach(function(u){var p=u.w;if(p.globals.lastXAxis.min=p.globals.initialConfig.xaxis.min,p.globals.lastXAxis.max=p.globals.initialConfig.xaxis.max,u.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof p.config.chart.events.beforeResetZoom){var y=p.config.chart.events.beforeResetZoom(u,p);y&&u.updateHelpers.revertDefaultAxisMinMax(y)}"function"==typeof p.config.chart.events.zoomed&&u.ctx.toolbar.zoomCallback({min:p.config.xaxis.min,max:p.config.xaxis.max}),p.globals.zoomed=!1;var w=u.ctx.series.emptyCollapsedSeries(tt.clone(p.globals.initialSeries));u.updateHelpers._updateSeries(w,p.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),ge}(),as=function(ge){$e(u,io);var l=gt(u);function u(p){var y;return j(this,u),(y=l.call(this,p)).ctx=p,y.w=p.w,y.dragged=!1,y.graphics=new kt(y.ctx),y.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],y.clientX=0,y.clientY=0,y.startX=0,y.endX=0,y.dragX=0,y.startY=0,y.endY=0,y.dragY=0,y.moveDirection="none",y}return Be(u,[{key:"init",value:function(p){var y=this,w=p.xyRatios,C=this.w,M=this;this.xyRatios=w,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=C.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),C.globals.dom.elGraphical.add(this.zoomRect),C.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===C.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:C.globals.gridWidth,maxY:C.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===C.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:C.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=C.globals.dom.baseEl.querySelector("".concat(C.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(B){y.hoverArea.addEventListener(B,M.svgMouseEvents.bind(M,w),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(p,y){var w=this.w,C=this,M=this.ctx.toolbar,B=w.globals.zoomEnabled?w.config.chart.zoom.type:w.config.chart.selection.type,H=w.config.chart.toolbar.autoSelected;if(y.shiftKey?(this.shiftWasPressed=!0,M.enableZoomPanFromToolbar("pan"===H?"zoom":"pan")):this.shiftWasPressed&&(M.enableZoomPanFromToolbar(H),this.shiftWasPressed=!1),y.target){var K,J=y.target.classList;if(y.target.parentNode&&null!==y.target.parentNode&&(K=y.target.parentNode.classList),!(J.contains("apexcharts-selection-rect")||J.contains("apexcharts-legend-marker")||J.contains("apexcharts-legend-text")||K&&K.contains("apexcharts-toolbar"))){if(C.clientX="touchmove"===y.type||"touchstart"===y.type?y.touches[0].clientX:"touchend"===y.type?y.changedTouches[0].clientX:y.clientX,C.clientY="touchmove"===y.type||"touchstart"===y.type?y.touches[0].clientY:"touchend"===y.type?y.changedTouches[0].clientY:y.clientY,("mousedown"===y.type||"touchmove"===y.type)&&1===y.which){var ne=C.gridRect.getBoundingClientRect();C.startX=C.clientX-ne.left,C.startY=C.clientY-ne.top,C.dragged=!1,C.w.globals.mousedown=!0}if("mousemove"===y.type&&1===y.which||"touchmove"===y.type)if(C.dragged=!0,w.globals.panEnabled){if(w.globals.selection=null,C.w.globals.mousedown||"touchmove"===y.type){if("touchmove"===y.type&&!C.w.globals.mousedown){console.warn("me.w.globals.mousedown ",C.w.globals.mousedown);var de=C.gridRect.getBoundingClientRect();C.startX=C.clientX-de.left,C.startY=C.clientY-de.top,C.w.globals.mousedown=!0}C.panDragging({context:C,zoomtype:B,xyRatios:p})}}else{if("touchmove"===y.type){if(!C.w.globals.mousedown){var xe=C.gridRect.getBoundingClientRect();C.startX=C.clientX-xe.left,C.startY=C.clientY-xe.top}C.w.globals.mousedown=!0}(C.w.globals.mousedown&&w.globals.zoomEnabled||C.w.globals.mousedown&&w.globals.selectionEnabled)&&(C.selection=C.selectionDrawing({context:C,zoomtype:B}))}if("mouseup"===y.type||"touchend"===y.type||"mouseleave"===y.type){var Se=C.gridRect.getBoundingClientRect();C.w.globals.mousedown&&(C.endX=C.clientX-Se.left,C.endY=C.clientY-Se.top,C.dragX=Math.abs(C.endX-C.startX),C.dragY=Math.abs(C.endY-C.startY),(w.globals.zoomEnabled||w.globals.selectionEnabled)&&C.selectionDrawn({context:C,zoomtype:B}),w.globals.panEnabled&&w.config.xaxis.convertedCatToNumeric&&C.delayedPanScrolled()),w.globals.zoomEnabled&&C.hideSelectionRect(this.selectionRect),C.dragged=!1,C.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var p=this.w;if(this.selectionRect){var y=this.selectionRect.node.getBoundingClientRect();y.width>0&&y.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:p.globals.gridWidth,maxY:p.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var p=this.w,y=this.xyRatios;if(!p.globals.zoomEnabled)if(null!=p.globals.selection)this.drawSelectionRect(p.globals.selection);else if(void 0!==p.config.chart.selection.xaxis.min&&void 0!==p.config.chart.selection.xaxis.max){var w=(p.config.chart.selection.xaxis.min-p.globals.minX)/y.xRatio,C=p.globals.gridWidth-(p.globals.maxX-p.config.chart.selection.xaxis.max)/y.xRatio-w;p.globals.isRangeBar&&(w=(p.config.chart.selection.xaxis.min-p.globals.yAxisScale[0].niceMin)/y.invertedYRatio,C=(p.config.chart.selection.xaxis.max-p.config.chart.selection.xaxis.min)/y.invertedYRatio),this.drawSelectionRect({x:w,y:0,width:C,height:p.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof p.config.chart.events.selection&&p.config.chart.events.selection(this.ctx,{xaxis:{min:p.config.chart.selection.xaxis.min,max:p.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(p){var y=p.x,w=p.y,C=p.width,M=p.height,B=p.translateX,K=p.translateY,ne=this.w,de=this.zoomRect,xe=this.selectionRect;if(this.dragged||null!==ne.globals.selection){var Se={transform:"translate("+(void 0===B?0:B)+", "+(void 0===K?0:K)+")"};ne.globals.zoomEnabled&&this.dragged&&(C<0&&(C=1),de.attr({x:y,y:w,width:C,height:M,fill:ne.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":ne.config.chart.zoom.zoomedArea.fill.opacity,stroke:ne.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":ne.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":ne.config.chart.zoom.zoomedArea.stroke.opacity}),kt.setAttrs(de.node,Se)),ne.globals.selectionEnabled&&(xe.attr({x:y,y:w,width:C>0?C:0,height:M>0?M:0,fill:ne.config.chart.selection.fill.color,"fill-opacity":ne.config.chart.selection.fill.opacity,stroke:ne.config.chart.selection.stroke.color,"stroke-width":ne.config.chart.selection.stroke.width,"stroke-dasharray":ne.config.chart.selection.stroke.dashArray,"stroke-opacity":ne.config.chart.selection.stroke.opacity}),kt.setAttrs(xe.node,Se))}}},{key:"hideSelectionRect",value:function(p){p&&p.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(p){var Se,w=p.zoomtype,C=this.w,M=p.context,B=this.gridRect.getBoundingClientRect(),H=M.startX-1,K=M.startY,J=!1,ne=!1,de=M.clientX-B.left-H,xe=M.clientY-B.top-K;return Math.abs(de+H)>C.globals.gridWidth?de=C.globals.gridWidth-H:M.clientX-B.left<0&&(de=H),H>M.clientX-B.left&&(J=!0,de=Math.abs(de)),K>M.clientY-B.top&&(ne=!0,xe=Math.abs(xe)),M.drawSelectionRect(Se="x"===w?{x:J?H-de:H,y:0,width:de,height:C.globals.gridHeight}:"y"===w?{x:0,y:ne?K-xe:K,width:C.globals.gridWidth,height:xe}:{x:J?H-de:H,y:ne?K-xe:K,width:de,height:xe}),M.selectionDragging("resizing"),Se}},{key:"selectionDragging",value:function(p,y){var w=this,C=this.w,M=this.xyRatios,B=this.selectionRect,H=0;"resizing"===p&&(H=30);var K=function(ne){return parseFloat(B.node.getAttribute(ne))},J={x:K("x"),y:K("y"),width:K("width"),height:K("height")};C.globals.selection=J,"function"==typeof C.config.chart.events.selection&&C.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var ne,de,xe,Se,Pe=w.gridRect.getBoundingClientRect(),Te=B.node.getBoundingClientRect();C.globals.isRangeBar?(ne=C.globals.yAxisScale[0].niceMin+(Te.left-Pe.left)*M.invertedYRatio,de=C.globals.yAxisScale[0].niceMin+(Te.right-Pe.left)*M.invertedYRatio,xe=0,Se=1):(ne=C.globals.xAxisScale.niceMin+(Te.left-Pe.left)*M.xRatio,de=C.globals.xAxisScale.niceMin+(Te.right-Pe.left)*M.xRatio,xe=C.globals.yAxisScale[0].niceMin+(Pe.bottom-Te.bottom)*M.yRatio[0],Se=C.globals.yAxisScale[0].niceMax-(Te.top-Pe.top)*M.yRatio[0]);var Ne={xaxis:{min:ne,max:de},yaxis:{min:xe,max:Se}};C.config.chart.events.selection(w.ctx,Ne),C.config.chart.brush.enabled&&void 0!==C.config.chart.events.brushScrolled&&C.config.chart.events.brushScrolled(w.ctx,Ne)},H))}},{key:"selectionDrawn",value:function(p){var w=p.zoomtype,C=this.w,M=p.context,B=this.xyRatios,H=this.ctx.toolbar;if(M.startX>M.endX){var K=M.startX;M.startX=M.endX,M.endX=K}if(M.startY>M.endY){var J=M.startY;M.startY=M.endY,M.endY=J}var ne=void 0,de=void 0;C.globals.isRangeBar?(ne=C.globals.yAxisScale[0].niceMin+M.startX*B.invertedYRatio,de=C.globals.yAxisScale[0].niceMin+M.endX*B.invertedYRatio):(ne=C.globals.xAxisScale.niceMin+M.startX*B.xRatio,de=C.globals.xAxisScale.niceMin+M.endX*B.xRatio);var xe=[],Se=[];if(C.config.yaxis.forEach(function(Le,je){xe.push(C.globals.yAxisScale[je].niceMax-B.yRatio[je]*M.startY),Se.push(C.globals.yAxisScale[je].niceMax-B.yRatio[je]*M.endY)}),M.dragged&&(M.dragX>10||M.dragY>10)&&ne!==de)if(C.globals.zoomEnabled){var Pe=tt.clone(C.globals.initialConfig.yaxis),Te=tt.clone(C.globals.initialConfig.xaxis);if(C.globals.zoomed=!0,C.config.xaxis.convertedCatToNumeric&&(ne=Math.floor(ne),de=Math.floor(de),ne<1&&(ne=1,de=C.globals.dataPoints),de-ne<2&&(de=ne+1)),"xy"!==w&&"x"!==w||(Te={min:ne,max:de}),"xy"!==w&&"y"!==w||Pe.forEach(function(Le,je){Pe[je].min=Se[je],Pe[je].max=xe[je]}),H){var Ne=H.getBeforeZoomRange(Te,Pe);Ne&&(Te=Ne.xaxis?Ne.xaxis:Te,Pe=Ne.yaxis?Ne.yaxis:Pe)}var U={xaxis:Te};C.config.chart.group||(U.yaxis=Pe),M.ctx.updateHelpers._updateOptions(U,!1,M.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof C.config.chart.events.zoomed&&H.zoomCallback(Te,Pe)}else if(C.globals.selectionEnabled){var le,we=null;le={min:ne,max:de},"xy"!==w&&"y"!==w||(we=tt.clone(C.config.yaxis)).forEach(function(Le,je){we[je].min=Se[je],we[je].max=xe[je]}),C.globals.selection=M.selection,"function"==typeof C.config.chart.events.selection&&C.config.chart.events.selection(M.ctx,{xaxis:le,yaxis:we})}}},{key:"panDragging",value:function(p){var w=this.w,C=p.context;if(void 0!==w.globals.lastClientPosition.x){var M=w.globals.lastClientPosition.x-C.clientX,B=w.globals.lastClientPosition.y-C.clientY;Math.abs(M)>Math.abs(B)&&M>0?this.moveDirection="left":Math.abs(M)>Math.abs(B)&&M<0?this.moveDirection="right":Math.abs(B)>Math.abs(M)&&B>0?this.moveDirection="up":Math.abs(B)>Math.abs(M)&&B<0&&(this.moveDirection="down")}w.globals.lastClientPosition={x:C.clientX,y:C.clientY},w.config.xaxis.convertedCatToNumeric||C.panScrolled(w.globals.isRangeBar?w.globals.minY:w.globals.minX,w.globals.isRangeBar?w.globals.maxY:w.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var p=this.w,y=p.globals.minX,w=p.globals.maxX,C=(p.globals.maxX-p.globals.minX)/2;"left"===this.moveDirection?(y=p.globals.minX+C,w=p.globals.maxX+C):"right"===this.moveDirection&&(y=p.globals.minX-C,w=p.globals.maxX-C),y=Math.floor(y),w=Math.floor(w),this.updateScrolledChart({xaxis:{min:y,max:w}},y,w)}},{key:"panScrolled",value:function(p,y){var w=this.w,C=this.xyRatios,M=tt.clone(w.globals.initialConfig.yaxis),B=C.xRatio,H=w.globals.minX,K=w.globals.maxX;w.globals.isRangeBar&&(B=C.invertedYRatio,H=w.globals.minY,K=w.globals.maxY),"left"===this.moveDirection?(p=H+w.globals.gridWidth/15*B,y=K+w.globals.gridWidth/15*B):"right"===this.moveDirection&&(p=H-w.globals.gridWidth/15*B,y=K-w.globals.gridWidth/15*B),w.globals.isRangeBar||(p<w.globals.initialMinX||y>w.globals.initialMaxX)&&(p=H,y=K);var J={xaxis:{min:p,max:y}};w.config.chart.group||(J.yaxis=M),this.updateScrolledChart(J,p,y)}},{key:"updateScrolledChart",value:function(p,y,w){var C=this.w;this.ctx.updateHelpers._updateOptions(p,!1,!1),"function"==typeof C.config.chart.events.scrolled&&C.config.chart.events.scrolled(this.ctx,{xaxis:{min:y,max:w}})}}]),u}(),Rs=function(){function ge(l){j(this,ge),this.w=l.w,this.ttCtx=l,this.ctx=l.ctx}return Be(ge,[{key:"getNearestValues",value:function(l){var u=l.hoverArea,y=l.clientX,w=l.clientY,C=this.w,M=l.elGrid.getBoundingClientRect(),B=M.width,H=M.height,K=B/(C.globals.dataPoints-1),J=H/C.globals.dataPoints,ne=this.hasBars();!C.globals.comboCharts&&!ne||C.config.xaxis.convertedCatToNumeric||(K=B/C.globals.dataPoints);var de=y-M.left-C.globals.barPadForNumericAxis,xe=w-M.top;de<0||xe<0||de>B||xe>H?(u.classList.remove("hovering-zoom"),u.classList.remove("hovering-pan")):C.globals.zoomEnabled?(u.classList.remove("hovering-pan"),u.classList.add("hovering-zoom")):C.globals.panEnabled&&(u.classList.remove("hovering-zoom"),u.classList.add("hovering-pan"));var Se=Math.round(de/K),Pe=Math.floor(xe/J);ne&&!C.config.xaxis.convertedCatToNumeric&&(Se=Math.ceil(de/K),Se-=1);var Te=null,Ne=null,U=C.globals.seriesXvalues.map(function(lt){return lt.filter(function(jt){return tt.isNumber(jt)})}),le=C.globals.seriesYvalues.map(function(lt){return lt.filter(function(jt){return tt.isNumber(jt)})});if(C.globals.isXNumeric){var we=this.ttCtx.getElGrid().getBoundingClientRect(),Le=de*(we.width/B);Te=(Ne=this.closestInMultiArray(Le,xe*(we.height/H),U,le)).index,Se=Ne.j,null!==Te&&(Se=(Ne=this.closestInArray(Le,U=C.globals.seriesXvalues[Te])).index)}return C.globals.capturedSeriesIndex=null===Te?-1:Te,(!Se||Se<1)&&(Se=0),C.globals.capturedDataPointIndex=C.globals.isBarHorizontal?Pe:Se,{capturedSeries:Te,j:C.globals.isBarHorizontal?Pe:Se,hoverX:de,hoverY:xe}}},{key:"closestInMultiArray",value:function(l,u,p,y){var C=0,M=null,B=-1;this.w.globals.series.length>1?C=this.getFirstActiveXArray(p):M=0;var K=Math.abs(l-p[C][0]);if(p.forEach(function(de){de.forEach(function(xe,Se){var Pe=Math.abs(l-xe);Pe<=K&&(K=Pe,B=Se)})}),-1!==B){var ne=Math.abs(u-y[C][B]);M=C,y.forEach(function(de,xe){var Se=Math.abs(u-de[B]);Se<=ne&&(ne=Se,M=xe)})}return{index:M,j:B}}},{key:"getFirstActiveXArray",value:function(l){for(var u=this.w,p=0,y=l.map(function(C,M){return C.length>0?M:-1}),w=0;w<y.length;w++)if(-1!==y[w]&&-1===u.globals.collapsedSeriesIndices.indexOf(w)&&-1===u.globals.ancillaryCollapsedSeriesIndices.indexOf(w)){p=y[w];break}return p}},{key:"closestInArray",value:function(l,u){for(var y=null,w=Math.abs(l-u[0]),C=0;C<u.length;C++){var M=Math.abs(l-u[C]);M<w&&(w=M,y=C)}return{index:y}}},{key:"isXoverlap",value:function(l){var u=[],p=this.w.globals.seriesX.filter(function(w){return void 0!==w[0]});if(p.length>0)for(var y=0;y<p.length-1;y++)void 0!==p[y][l]&&void 0!==p[y+1][l]&&p[y][l]!==p[y+1][l]&&u.push("unEqual");return 0===u.length}},{key:"isInitialSeriesSameLen",value:function(){for(var l=!0,u=this.w.globals.initialSeries,p=0;p<u.length-1;p++)if(u[p].data.length!==u[p+1].data.length){l=!1;break}return l}},{key:"getBarsHeight",value:function(l){return Et(l).reduce(function(u,p){return u+p.getBBox().height},0)}},{key:"getElMarkers",value:function(l){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof l?".apexcharts-series[data\\:realIndex='".concat(l,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var l=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(l=Et(l)).sort(function(p,y){var w=Number(p.getAttribute("data:realIndex")),C=Number(y.getAttribute("data:realIndex"));return C<w?1:C>w?-1:0});var u=[];return l.forEach(function(p){u.push(p.querySelector(".apexcharts-marker"))}),u}},{key:"hasMarkers",value:function(l){return this.getElMarkers(l).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(l){var u=this.w,p=u.config.markers.hover.size;return void 0===p&&(p=u.globals.markers.size[l]+u.config.markers.hover.sizeOffset),p}},{key:"toggleAllTooltipSeriesGroups",value:function(l){var u=this.w,p=this.ttCtx;0===p.allTooltipSeriesGroups.length&&(p.allTooltipSeriesGroups=u.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var y=p.allTooltipSeriesGroups,w=0;w<y.length;w++)"enable"===l?(y[w].classList.add("apexcharts-active"),y[w].style.display=u.config.tooltip.items.display):(y[w].classList.remove("apexcharts-active"),y[w].style.display="none")}}]),ge}(),Ss=function(){function ge(l){j(this,ge),this.w=l.w,this.ctx=l.ctx,this.ttCtx=l,this.tooltipUtil=new Rs(l)}return Be(ge,[{key:"drawSeriesTexts",value:function(l){var u=l.shared,p=void 0===u||u,y=l.ttItems,w=l.i,C=void 0===w?0:w,M=l.j,B=void 0===M?null:M,J=l.e,ne=this.w;void 0!==ne.config.tooltip.custom?this.handleCustomTooltip({i:C,j:B,y1:l.y1,y2:l.y2,w:ne}):this.toggleActiveInactiveSeries(p);var de=this.getValuesToPrint({i:C,j:B});this.printLabels({i:C,j:B,values:de,ttItems:y,shared:p,e:J});var xe=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=xe.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=xe.getBoundingClientRect().height}},{key:"printLabels",value:function(l){var u,p=this,y=l.i,w=l.j,C=l.values,M=l.ttItems,B=l.shared,H=l.e,K=this.w,J=[],ne=function(we){return K.globals.seriesGoals[we]&&K.globals.seriesGoals[we][w]&&Array.isArray(K.globals.seriesGoals[we][w])},de=C.xVal,xe=C.zVal,Se=C.xAxisTTVal,Pe="",Te=K.globals.colors[y];null!==w&&K.config.plotOptions.bar.distributed&&(Te=K.globals.colors[w]);for(var Ne=function(we,Le){var je=p.getFormatters(y);Pe=p.getSeriesName({fn:je.yLbTitleFormatter,index:y,seriesIndex:y,j:w}),"treemap"===K.config.chart.type&&(Pe=je.yLbTitleFormatter(String(K.config.series[y].data[w].x),{series:K.globals.series,seriesIndex:y,dataPointIndex:w,w:K}));var lt=K.config.tooltip.inverseOrder?Le:we;if(K.globals.axisCharts){var jt=function(Qi){var cn,Qn,gr,Zr;return K.globals.isRangeData?je.yLbFormatter(null===(cn=K.globals.seriesRangeStart)||void 0===cn||null===(Qn=cn[Qi])||void 0===Qn?void 0:Qn[w],{series:K.globals.seriesRangeStart,seriesIndex:Qi,dataPointIndex:w,w:K})+" - "+je.yLbFormatter(null===(gr=K.globals.seriesRangeEnd)||void 0===gr||null===(Zr=gr[Qi])||void 0===Zr?void 0:Zr[w],{series:K.globals.seriesRangeEnd,seriesIndex:Qi,dataPointIndex:w,w:K}):je.yLbFormatter(K.globals.series[Qi][w],{series:K.globals.series,seriesIndex:Qi,dataPointIndex:w,w:K})};if(B)je=p.getFormatters(lt),Pe=p.getSeriesName({fn:je.yLbTitleFormatter,index:lt,seriesIndex:y,j:w}),Te=K.globals.colors[lt],u=jt(lt),ne(lt)&&(J=K.globals.seriesGoals[lt][w].map(function(Qi){return{attrs:Qi,val:je.yLbFormatter(Qi.value,{seriesIndex:lt,dataPointIndex:w,w:K})}}));else{var qt,Di=null==H||null===(qt=H.target)||void 0===qt?void 0:qt.getAttribute("fill");Di&&(Te=-1!==Di.indexOf("url")?document.querySelector(Di.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):Di),u=jt(y),ne(y)&&Array.isArray(K.globals.seriesGoals[y][w])&&(J=K.globals.seriesGoals[y][w].map(function(Qi){return{attrs:Qi,val:je.yLbFormatter(Qi.value,{seriesIndex:y,dataPointIndex:w,w:K})}}))}}null===w&&(u=je.yLbFormatter(K.globals.series[y],Ze(Ze({},K),{},{seriesIndex:y,dataPointIndex:y}))),p.DOMHandling({i:y,t:lt,j:w,ttItems:M,values:{val:u,goalVals:J,xVal:de,xAxisTTVal:Se,zVal:xe},seriesName:Pe,shared:B,pColor:Te})},U=0,le=K.globals.series.length-1;U<K.globals.series.length;U++,le--)Ne(U,le)}},{key:"getFormatters",value:function(l){var u,p=this.w,y=p.globals.yLabelFormatters[l];return void 0!==p.globals.ttVal?Array.isArray(p.globals.ttVal)?(y=p.globals.ttVal[l]&&p.globals.ttVal[l].formatter,u=p.globals.ttVal[l]&&p.globals.ttVal[l].title&&p.globals.ttVal[l].title.formatter):(y=p.globals.ttVal.formatter,"function"==typeof p.globals.ttVal.title.formatter&&(u=p.globals.ttVal.title.formatter)):u=p.config.tooltip.y.title.formatter,"function"!=typeof y&&(y=p.globals.yLabelFormatters[0]?p.globals.yLabelFormatters[0]:function(w){return w}),"function"!=typeof u&&(u=function(w){return w}),{yLbFormatter:y,yLbTitleFormatter:u}}},{key:"getSeriesName",value:function(l){var y=l.seriesIndex,w=l.j,C=this.w;return(0,l.fn)(String(C.globals.seriesNames[l.index]),{series:C.globals.series,seriesIndex:y,dataPointIndex:w,w:C})}},{key:"DOMHandling",value:function(l){var u=l.t,p=l.j,y=l.ttItems,w=l.values,C=l.seriesName,M=l.shared,B=l.pColor,H=this.w,K=this.ttCtx,J=w.val,ne=w.goalVals,de=w.xVal,xe=w.xAxisTTVal,Se=w.zVal,Pe=null;Pe=y[u].children,H.config.tooltip.fillSeriesColor&&(y[u].style.backgroundColor=B,Pe[0].style.display="none"),K.showTooltipTitle&&(null===K.tooltipTitle&&(K.tooltipTitle=H.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),K.tooltipTitle.innerHTML=de),K.isXAxisTooltipEnabled&&(K.xaxisTooltipText.innerHTML=""!==xe?xe:de);var Te=y[u].querySelector(".apexcharts-tooltip-text-y-label");Te&&(Te.innerHTML=C||"");var Ne=y[u].querySelector(".apexcharts-tooltip-text-y-value");Ne&&(Ne.innerHTML=void 0!==J?J:""),Pe[0]&&Pe[0].classList.contains("apexcharts-tooltip-marker")&&(H.config.tooltip.marker.fillColors&&Array.isArray(H.config.tooltip.marker.fillColors)&&(B=H.config.tooltip.marker.fillColors[u]),Pe[0].style.backgroundColor=B),H.config.tooltip.marker.show||(Pe[0].style.display="none");var U=y[u].querySelector(".apexcharts-tooltip-text-goals-label"),le=y[u].querySelector(".apexcharts-tooltip-text-goals-value");if(ne.length&&H.globals.seriesGoals[u]){var we=function(){var lt="<div >",jt="<div>";ne.forEach(function(qt,Di){lt+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(qt.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(qt.attrs.name,"</div>"),jt+="<div>".concat(qt.val,"</div>")}),U.innerHTML=lt+"</div>",le.innerHTML=jt+"</div>"};M?H.globals.seriesGoals[u][p]&&Array.isArray(H.globals.seriesGoals[u][p])?we():(U.innerHTML="",le.innerHTML=""):we()}else U.innerHTML="",le.innerHTML="";if(null!==Se&&(y[u].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=H.config.tooltip.z.title,y[u].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==Se?Se:""),M&&Pe[0]){if(H.config.tooltip.hideEmptySeries){var Le=y[u].querySelector(".apexcharts-tooltip-marker"),je=y[u].querySelector(".apexcharts-tooltip-text");0==parseFloat(J)?(Le.style.display="none",je.style.display="none"):(Le.style.display="block",je.style.display="block")}Pe[0].parentNode.style.display=null==J||H.globals.ancillaryCollapsedSeriesIndices.indexOf(u)>-1||H.globals.collapsedSeriesIndices.indexOf(u)>-1?"none":H.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(l){var u=this.w;if(l)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var p=u.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");p&&(p.classList.add("apexcharts-active"),p.style.display=u.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(l){var u=l.i,p=l.j,y=this.w,w=this.ctx.series.filteredSeriesX(),C="",M="",B=null,H=null,K={series:y.globals.series,seriesIndex:u,dataPointIndex:p,w:y},J=y.globals.ttZFormatter;null===p?H=y.globals.series[u]:y.globals.isXNumeric&&"treemap"!==y.config.chart.type?(C=w[u][p],0===w[u].length&&(C=w[this.tooltipUtil.getFirstActiveXArray(w)][p])):C=void 0!==y.globals.labels[p]?y.globals.labels[p]:"";var ne=C;return C=y.globals.isXNumeric&&"datetime"===y.config.xaxis.type?new nn(this.ctx).xLabelFormat(y.globals.ttKeyFormatter,ne,ne,{i:void 0,dateFormatter:new qi(this.ctx).formatDate,w:this.w}):y.globals.isBarHorizontal?y.globals.yLabelFormatters[0](ne,K):y.globals.xLabelFormatter(ne,K),void 0!==y.config.tooltip.x.formatter&&(C=y.globals.ttKeyFormatter(ne,K)),y.globals.seriesZ.length>0&&y.globals.seriesZ[u].length>0&&(B=J(y.globals.seriesZ[u][p],y)),M="function"==typeof y.config.xaxis.tooltip.formatter?y.globals.xaxisTooltipFormatter(ne,K):C,{val:Array.isArray(H)?H.join(" "):H,xVal:Array.isArray(C)?C.join(" "):C,xAxisTTVal:Array.isArray(M)?M.join(" "):M,zVal:B}}},{key:"handleCustomTooltip",value:function(l){var u=l.i,p=l.j,y=l.y1,w=l.y2,C=l.w,M=this.ttCtx.getElTooltip(),B=C.config.tooltip.custom;Array.isArray(B)&&B[u]&&(B=B[u]),M.innerHTML=B({ctx:this.ctx,series:C.globals.series,seriesIndex:u,dataPointIndex:p,y1:y,y2:w,w:C})}}]),ge}(),Bs=function(){function ge(l){j(this,ge),this.ttCtx=l,this.ctx=l.ctx,this.w=l.w}return Be(ge,[{key:"moveXCrosshairs",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,p=this.ttCtx,y=this.w,w=p.getElXCrosshairs(),C=l-p.xcrosshairsWidth/2,M=y.globals.labels.slice().length;if(null!==u&&(C=y.globals.gridWidth/M*u),null===w||y.globals.isBarHorizontal||(w.setAttribute("x",C),w.setAttribute("x1",C),w.setAttribute("x2",C),w.setAttribute("y2",y.globals.gridHeight),w.classList.add("apexcharts-active")),C<0&&(C=0),C>y.globals.gridWidth&&(C=y.globals.gridWidth),p.isXAxisTooltipEnabled){var B=C;"tickWidth"!==y.config.xaxis.crosshairs.width&&"barWidth"!==y.config.xaxis.crosshairs.width||(B=C+p.xcrosshairsWidth/2),this.moveXAxisTooltip(B)}}},{key:"moveYCrosshairs",value:function(l){var u=this.ttCtx;null!==u.ycrosshairs&&kt.setAttrs(u.ycrosshairs,{y1:l,y2:l}),null!==u.ycrosshairsHidden&&kt.setAttrs(u.ycrosshairsHidden,{y1:l,y2:l})}},{key:"moveXAxisTooltip",value:function(l){var u=this.w,p=this.ttCtx;if(null!==p.xaxisTooltip&&0!==p.xcrosshairsWidth){p.xaxisTooltip.classList.add("apexcharts-active");var w,y=p.xaxisOffY+u.config.xaxis.tooltip.offsetY+u.globals.translateY+1+u.config.xaxis.offsetY;l-=p.xaxisTooltip.getBoundingClientRect().width/2,isNaN(l)||(l+=u.globals.translateX,w=new kt(this.ctx).getTextRects(p.xaxisTooltipText.innerHTML),p.xaxisTooltipText.style.minWidth=w.width+"px",p.xaxisTooltip.style.left=l+"px",p.xaxisTooltip.style.top=y+"px")}}},{key:"moveYAxisTooltip",value:function(l){var u=this.w,p=this.ttCtx;null===p.yaxisTTEls&&(p.yaxisTTEls=u.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var y=parseInt(p.ycrosshairsHidden.getAttribute("y1"),10),w=u.globals.translateY+y,C=p.yaxisTTEls[l].getBoundingClientRect().height,M=u.globals.translateYAxisX[l]-2;u.config.yaxis[l].opposite&&(M-=26),w-=C/2,-1===u.globals.ignoreYAxisIndexes.indexOf(l)?(p.yaxisTTEls[l].classList.add("apexcharts-active"),p.yaxisTTEls[l].style.top=w+"px",p.yaxisTTEls[l].style.left=M+u.config.yaxis[l].tooltip.offsetX+"px"):p.yaxisTTEls[l].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,y=this.w,w=this.ttCtx,C=w.getElTooltip(),M=w.tooltipRect,B=null!==p?parseFloat(p):1,H=parseFloat(l)+B+5,K=parseFloat(u)+B/2;if(H>y.globals.gridWidth/2&&(H=H-M.ttWidth-B-10),H>y.globals.gridWidth-M.ttWidth-10&&(H=y.globals.gridWidth-M.ttWidth),H<-20&&(H=-20),y.config.tooltip.followCursor){var J=w.getElGrid().getBoundingClientRect();(H=w.e.clientX-J.left)>y.globals.gridWidth/2&&(H-=w.tooltipRect.ttWidth),(K=w.e.clientY+y.globals.translateY-J.top)>y.globals.gridHeight/2&&(K-=w.tooltipRect.ttHeight)}else y.globals.isBarHorizontal||M.ttHeight/2+K>y.globals.gridHeight&&(K=y.globals.gridHeight-M.ttHeight+y.globals.translateY);isNaN(H)||(C.style.left=(H+=y.globals.translateX)+"px",C.style.top=K+"px")}},{key:"moveMarkers",value:function(l,u){var p=this.w,y=this.ttCtx;if(p.globals.markers.size[l]>0)for(var w=p.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(l,"'] .apexcharts-marker")),C=0;C<w.length;C++)parseInt(w[C].getAttribute("rel"),10)===u&&(y.marker.resetPointsSize(),y.marker.enlargeCurrentPoint(u,w[C]));else y.marker.resetPointsSize(),this.moveDynamicPointOnHover(u,l)}},{key:"moveDynamicPointOnHover",value:function(l,u){var p,y,w=this.w,C=this.ttCtx,M=w.globals.pointsArray,B=C.tooltipUtil.getHoverMarkerSize(u),H=w.config.series[u].type;if(!H||"column"!==H&&"candlestick"!==H&&"boxPlot"!==H){p=M[u][l][0],y=M[u][l][1]?M[u][l][1]:0;var K=w.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(u,"'] .apexcharts-series-markers circle"));K&&y<w.globals.gridHeight&&y>0&&(K.setAttribute("r",B),K.setAttribute("cx",p),K.setAttribute("cy",y)),this.moveXCrosshairs(p),C.fixedTooltip||this.moveTooltip(p,y,B)}}},{key:"moveDynamicPointsOnHover",value:function(l){var u,p=this.ttCtx,y=p.w,w=0,C=0,M=y.globals.pointsArray;u=new Fr(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var B=p.tooltipUtil.getHoverMarkerSize(u);M[u]&&(w=M[u][l][0],C=M[u][l][1]);var H=p.tooltipUtil.getAllMarkers();if(null!==H)for(var K=0;K<y.globals.series.length;K++){var J=M[K];if(y.globals.comboCharts&&void 0===J&&H.splice(K,0,null),J&&J.length){var ne=M[K][l][1];H[K].setAttribute("cx",w),"rangeArea"!==y.config.chart.type||y.globals.comboCharts||(ne-=Math.abs(ne-M[K][l+y.globals.series[K].length][1])/2),null!==ne&&!isNaN(ne)&&ne<y.globals.gridHeight+B&&ne+B>0?(H[K]&&H[K].setAttribute("r",B),H[K]&&H[K].setAttribute("cy",ne)):H[K]&&H[K].setAttribute("r",0)}}this.moveXCrosshairs(w),p.fixedTooltip||this.moveTooltip(w,C||y.globals.gridHeight,B)}},{key:"moveStickyTooltipOverBars",value:function(l,u){var p=this.w,y=this.ttCtx,w=p.globals.columnSeries?p.globals.columnSeries.length:p.globals.series.length,C=w>=2&&w%2==0?Math.floor(w/2):Math.floor(w/2)+1;p.globals.isBarHorizontal&&(C=new Fr(this.ctx).getActiveConfigSeriesIndex("desc")+1);var M=p.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(C,"'] path[j='").concat(l,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(C,"'] path[j='").concat(l,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(C,"'] path[j='").concat(l,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(C,"'] path[j='").concat(l,"']"));M||"number"!=typeof u||(M=p.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(u,"'] path[j='").concat(l,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(u,"'] path[j='").concat(l,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(u,"'] path[j='").concat(l,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(u,"'] path[j='").concat(l,"']")));var B=M?parseFloat(M.getAttribute("cx")):0,H=M?parseFloat(M.getAttribute("cy")):0,K=M?parseFloat(M.getAttribute("barWidth")):0,J=y.getElGrid().getBoundingClientRect(),ne=M&&(M.classList.contains("apexcharts-candlestick-area")||M.classList.contains("apexcharts-boxPlot-area"));p.globals.isXNumeric?(M&&!ne&&(B-=w%2!=0?K/2:0),M&&ne&&p.globals.comboCharts&&(B-=K/2)):p.globals.isBarHorizontal||(B=y.xAxisTicksPositions[l-1]+y.dataPointsDividedWidth/2,isNaN(B)&&(B=y.xAxisTicksPositions[l]-y.dataPointsDividedWidth/2)),p.globals.isBarHorizontal?H-=y.tooltipRect.ttHeight:p.config.tooltip.followCursor?H=y.e.clientY-J.top-y.tooltipRect.ttHeight/2:H+y.tooltipRect.ttHeight+15>p.globals.gridHeight&&(H=p.globals.gridHeight),p.globals.isBarHorizontal||this.moveXCrosshairs(B),y.fixedTooltip||this.moveTooltip(B,H||p.globals.gridHeight)}}]),ge}(),xa=function(){function ge(l){j(this,ge),this.w=l.w,this.ttCtx=l,this.ctx=l.ctx,this.tooltipPosition=new Bs(l)}return Be(ge,[{key:"drawDynamicPoints",value:function(){var l=this.w,u=new kt(this.ctx),p=new Jn(this.ctx),y=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series");y=Et(y),l.config.chart.stacked&&y.sort(function(J,ne){return parseFloat(J.getAttribute("data:realIndex"))-parseFloat(ne.getAttribute("data:realIndex"))});for(var w=0;w<y.length;w++){var C=y[w].querySelector(".apexcharts-series-markers-wrap");if(null!==C){var M=void 0,B="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==l.config.chart.type&&"area"!==l.config.chart.type||l.globals.comboCharts||l.config.tooltip.intersect||(B+=" no-pointer-events");var H=p.getMarkerConfig({cssClass:B,seriesIndex:Number(C.getAttribute("data:realIndex"))});(M=u.drawMarker(0,0,H)).node.setAttribute("default-marker-size",0);var K=document.createElementNS(l.globals.SVGNS,"g");K.classList.add("apexcharts-series-markers"),K.appendChild(M.node),C.appendChild(K)}}}},{key:"enlargeCurrentPoint",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,w=this.w;"bubble"!==w.config.chart.type&&this.newPointSize(l,u);var C=u.getAttribute("cx"),M=u.getAttribute("cy");if(null!==p&&null!==y&&(C=p,M=y),this.tooltipPosition.moveXCrosshairs(C),!this.fixedTooltip){if("radar"===w.config.chart.type){var B=this.ttCtx.getElGrid().getBoundingClientRect();C=this.ttCtx.e.clientX-B.left}this.tooltipPosition.moveTooltip(C,M,w.config.markers.hover.size)}}},{key:"enlargePoints",value:function(l){for(var u=this.w,p=this,y=this.ttCtx,w=l,C=u.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),M=u.config.markers.hover.size,B=0;B<C.length;B++){var H=C[B].getAttribute("rel"),K=C[B].getAttribute("index");if(void 0===M&&(M=u.globals.markers.size[K]+u.config.markers.hover.sizeOffset),w===parseInt(H,10)){p.newPointSize(w,C[B]);var J=C[B].getAttribute("cx"),ne=C[B].getAttribute("cy");p.tooltipPosition.moveXCrosshairs(J),y.fixedTooltip||p.tooltipPosition.moveTooltip(J,ne,M)}else p.oldPointSize(C[B])}}},{key:"newPointSize",value:function(l,u){var p=this.w,y=p.config.markers.hover.size,w=0===l?u.parentNode.firstChild:u.parentNode.lastChild;if("0"!==w.getAttribute("default-marker-size")){var C=parseInt(w.getAttribute("index"),10);void 0===y&&(y=p.globals.markers.size[C]+p.config.markers.hover.sizeOffset),y<0&&(y=0),w.setAttribute("r",y)}}},{key:"oldPointSize",value:function(l){var u=parseFloat(l.getAttribute("default-marker-size"));l.setAttribute("r",u)}},{key:"resetPointsSize",value:function(){for(var l=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),u=0;u<l.length;u++){var p=parseFloat(l[u].getAttribute("default-marker-size"));tt.isNumber(p)&&p>=0?l[u].setAttribute("r",p):l[u].setAttribute("r",0)}}}]),ge}(),Gt=function(){function ge(l){j(this,ge),this.w=l.w;var u=this.w;this.ttCtx=l,this.isVerticalGroupedRangeBar=!u.globals.isBarHorizontal&&"rangeBar"===u.config.chart.type&&u.config.plotOptions.bar.rangeBarGroupRows}return Be(ge,[{key:"getAttr",value:function(l,u){return parseFloat(l.target.getAttribute(u))}},{key:"handleHeatTreeTooltip",value:function(l){var u=l.e,p=l.opt,y=l.x,w=l.y,M=this.ttCtx,B=this.w;if(u.target.classList.contains("apexcharts-".concat(l.type,"-rect"))){var H=this.getAttr(u,"i"),K=this.getAttr(u,"j"),J=this.getAttr(u,"cx"),ne=this.getAttr(u,"cy"),de=this.getAttr(u,"width"),xe=this.getAttr(u,"height");if(M.tooltipLabels.drawSeriesTexts({ttItems:p.ttItems,i:H,j:K,shared:!1,e:u}),B.globals.capturedSeriesIndex=H,B.globals.capturedDataPointIndex=K,y=J+M.tooltipRect.ttWidth/2+de,w=ne+M.tooltipRect.ttHeight/2-xe/2,M.tooltipPosition.moveXCrosshairs(J+de/2),y>B.globals.gridWidth/2&&(y=J-M.tooltipRect.ttWidth/2+de),M.w.config.tooltip.followCursor){var Se=B.globals.dom.elWrap.getBoundingClientRect();y=B.globals.clientX-Se.left-(y>B.globals.gridWidth/2?M.tooltipRect.ttWidth:0),w=B.globals.clientY-Se.top-(w>B.globals.gridHeight/2?M.tooltipRect.ttHeight:0)}}return{x:y,y:w}}},{key:"handleMarkerTooltip",value:function(l){var u,p,y=l.e,w=l.opt,C=l.x,M=l.y,B=this.w,H=this.ttCtx;if(y.target.classList.contains("apexcharts-marker")){var K=parseInt(w.paths.getAttribute("cx"),10),J=parseInt(w.paths.getAttribute("cy"),10),ne=parseFloat(w.paths.getAttribute("val"));if(p=parseInt(w.paths.getAttribute("rel"),10),u=parseInt(w.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,H.intersect){var de=tt.findAncestor(w.paths,"apexcharts-series");de&&(u=parseInt(de.getAttribute("data:realIndex"),10))}if(H.tooltipLabels.drawSeriesTexts({ttItems:w.ttItems,i:u,j:p,shared:!H.showOnIntersect&&B.config.tooltip.shared,e:y}),"mouseup"===y.type&&H.markerClick(y,u,p),B.globals.capturedSeriesIndex=u,B.globals.capturedDataPointIndex=p,C=K,M=J+B.globals.translateY-1.4*H.tooltipRect.ttHeight,H.w.config.tooltip.followCursor){var xe=H.getElGrid().getBoundingClientRect();M=H.e.clientY+B.globals.translateY-xe.top}ne<0&&(M=J),H.marker.enlargeCurrentPoint(p,w.paths,C,M)}return{x:C,y:M}}},{key:"handleBarTooltip",value:function(l){var u,p,y=l.e,w=l.opt,C=this.w,M=this.ttCtx,B=M.getElTooltip(),H=0,K=0,J=0,ne=this.getBarTooltipXY({e:y,opt:w}),de=ne.barHeight,xe=ne.j;C.globals.capturedSeriesIndex=u=ne.i,C.globals.capturedDataPointIndex=xe,C.globals.isBarHorizontal&&M.tooltipUtil.hasBars()||!C.config.tooltip.shared?(K=ne.x,J=ne.y,p=Array.isArray(C.config.stroke.width)?C.config.stroke.width[u]:C.config.stroke.width,H=K):C.globals.comboCharts||C.config.tooltip.shared||(H/=2),isNaN(J)&&(J=C.globals.svgHeight-M.tooltipRect.ttHeight);var Se=parseInt(w.paths.parentNode.getAttribute("data:realIndex"),10),Pe=C.globals.isMultipleYAxis?C.config.yaxis[Se]&&C.config.yaxis[Se].reversed:C.config.yaxis[0].reversed;if(K+M.tooltipRect.ttWidth>C.globals.gridWidth&&!Pe?K-=M.tooltipRect.ttWidth:K<0&&(K=0),M.w.config.tooltip.followCursor){var Te=M.getElGrid().getBoundingClientRect();J=M.e.clientY-Te.top}null===M.tooltip&&(M.tooltip=C.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),C.config.tooltip.shared||M.tooltipPosition.moveXCrosshairs(C.globals.comboBarCount>0?H+p/2:H),!M.fixedTooltip&&(!C.config.tooltip.shared||C.globals.isBarHorizontal&&M.tooltipUtil.hasBars())&&(Pe&&(K-=M.tooltipRect.ttWidth)<0&&(K=0),!Pe||C.globals.isBarHorizontal&&M.tooltipUtil.hasBars()||(J=J+de-2*(C.globals.series[u][xe]<0?de:0)),J=J+C.globals.translateY-M.tooltipRect.ttHeight/2,B.style.left=K+C.globals.translateX+"px",B.style.top=J+"px")}},{key:"getBarTooltipXY",value:function(l){var u=this,p=l.e,y=l.opt,w=this.w,C=null,M=this.ttCtx,B=0,H=0,K=0,J=0,ne=0,de=p.target.classList;if(de.contains("apexcharts-bar-area")||de.contains("apexcharts-candlestick-area")||de.contains("apexcharts-boxPlot-area")||de.contains("apexcharts-rangebar-area")){var xe=p.target,Se=xe.getBoundingClientRect(),Pe=y.elGrid.getBoundingClientRect(),Te=Se.height;ne=Se.height;var Ne=Se.width,U=parseInt(xe.getAttribute("cx"),10),le=parseInt(xe.getAttribute("cy"),10);J=parseFloat(xe.getAttribute("barWidth"));var we="touchmove"===p.type?p.touches[0].clientX:p.clientX;C=parseInt(xe.getAttribute("j"),10),B=parseInt(xe.parentNode.getAttribute("rel"),10)-1;var Le=xe.getAttribute("data-range-y1"),je=xe.getAttribute("data-range-y2");w.globals.comboCharts&&(B=parseInt(xe.parentNode.getAttribute("data:realIndex"),10));var lt=function(qt){return w.globals.isXNumeric?U-Ne/2:u.isVerticalGroupedRangeBar?U+Ne/2:U-M.dataPointsDividedWidth+Ne/2},jt=function(){return le-M.dataPointsDividedHeight+Te/2-M.tooltipRect.ttHeight/2};M.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:B,j:C,y1:Le?parseInt(Le,10):null,y2:je?parseInt(je,10):null,shared:!M.showOnIntersect&&w.config.tooltip.shared,e:p}),w.config.tooltip.followCursor?w.globals.isBarHorizontal?(H=we-Pe.left+15,K=jt()):(H=lt(),K=p.clientY-Pe.top-M.tooltipRect.ttHeight/2-15):w.globals.isBarHorizontal?((H=U)<M.xyRatios.baseLineInvertedY&&(H=U-M.tooltipRect.ttWidth),K=jt()):(H=lt(),K=le)}return{x:H,y:K,barHeight:ne,barWidth:J,i:B,j:C}}}]),ge}(),Ue=function(){function ge(l){j(this,ge),this.w=l.w,this.ttCtx=l}return Be(ge,[{key:"drawXaxisTooltip",value:function(){var l=this.w,u=this.ttCtx,p="bottom"===l.config.xaxis.position;u.xaxisOffY=p?l.globals.gridHeight+1:-l.globals.xAxisHeight-l.config.xaxis.axisTicks.height+3;var y=p?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",w=l.globals.dom.elWrap;u.isXAxisTooltipEnabled&&null===l.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(u.xaxisTooltip=document.createElement("div"),u.xaxisTooltip.setAttribute("class",y+" apexcharts-theme-"+l.config.tooltip.theme),w.appendChild(u.xaxisTooltip),u.xaxisTooltipText=document.createElement("div"),u.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),u.xaxisTooltipText.style.fontFamily=l.config.xaxis.tooltip.style.fontFamily||l.config.chart.fontFamily,u.xaxisTooltipText.style.fontSize=l.config.xaxis.tooltip.style.fontSize,u.xaxisTooltip.appendChild(u.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var l=this.w,u=this.ttCtx,p=0;p<l.config.yaxis.length;p++){var y=l.config.yaxis[p].opposite||l.config.yaxis[p].crosshairs.opposite;u.yaxisOffX=y?l.globals.gridWidth+1:1;var w="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(p,y?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),C=l.globals.dom.elWrap;null===l.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(p))&&(u.yaxisTooltip=document.createElement("div"),u.yaxisTooltip.setAttribute("class",w+" apexcharts-theme-"+l.config.tooltip.theme),C.appendChild(u.yaxisTooltip),0===p&&(u.yaxisTooltipText=[]),u.yaxisTooltipText[p]=document.createElement("div"),u.yaxisTooltipText[p].classList.add("apexcharts-yaxistooltip-text"),u.yaxisTooltip.appendChild(u.yaxisTooltipText[p]))}}},{key:"setXCrosshairWidth",value:function(){var l=this.w,u=this.ttCtx,p=u.getElXCrosshairs();if(u.xcrosshairsWidth=parseInt(l.config.xaxis.crosshairs.width,10),l.globals.comboCharts){var y=l.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==y&&"barWidth"===l.config.xaxis.crosshairs.width){var w=parseFloat(y.getAttribute("barWidth"));u.xcrosshairsWidth=w}else"tickWidth"===l.config.xaxis.crosshairs.width&&(u.xcrosshairsWidth=l.globals.gridWidth/l.globals.labels.length)}else if("tickWidth"===l.config.xaxis.crosshairs.width)u.xcrosshairsWidth=l.globals.gridWidth/l.globals.labels.length;else if("barWidth"===l.config.xaxis.crosshairs.width){var B=l.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==B){var H=parseFloat(B.getAttribute("barWidth"));u.xcrosshairsWidth=H}else u.xcrosshairsWidth=1}l.globals.isBarHorizontal&&(u.xcrosshairsWidth=0),null!==p&&u.xcrosshairsWidth>0&&p.setAttribute("width",u.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var l=this.w,u=this.ttCtx;u.ycrosshairs=l.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),u.ycrosshairsHidden=l.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(l,u,p){var y=this.ttCtx,w=this.w,C=w.globals.yLabelFormatters[l];if(y.yaxisTooltips[l]){var M=y.getElGrid().getBoundingClientRect(),K=w.globals.minYArr[l]+(w.globals.maxYArr[l]-w.globals.minYArr[l]-(u-M.top)*p.yRatio[l]);y.tooltipPosition.moveYCrosshairs(u-M.top),y.yaxisTooltipText[l].innerHTML=C(K),y.tooltipPosition.moveYAxisTooltip(l)}}}]),ge}(),Je=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w;var u=this.w;this.tConfig=u.config.tooltip,this.tooltipUtil=new Rs(this),this.tooltipLabels=new Ss(this),this.tooltipPosition=new Bs(this),this.marker=new xa(this),this.intersect=new Gt(this),this.axesTooltip=new Ue(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!u.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Be(ge,[{key:"getElTooltip",value:function(l){return l||(l=this),l.w.globals.dom.baseEl?l.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(l){var u=this.w;this.xyRatios=l,this.isXAxisTooltipEnabled=u.config.xaxis.tooltip.enabled&&u.globals.axisCharts,this.yaxisTooltips=u.config.yaxis.map(function(C,M){return!!(C.show&&C.tooltip.enabled&&u.globals.axisCharts)}),this.allTooltipSeriesGroups=[],u.globals.axisCharts||(this.showTooltipTitle=!1);var p=document.createElement("div");if(p.classList.add("apexcharts-tooltip"),u.config.tooltip.cssClass&&p.classList.add(u.config.tooltip.cssClass),p.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),u.globals.dom.elWrap.appendChild(p),u.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var y=new Ts(this.ctx);this.xAxisTicksPositions=y.getXAxisTicksPositions()}if(!u.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==u.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==u.config.markers.size&&0!==u.globals.markers.largestSize||this.marker.drawDynamicPoints(this),u.globals.collapsedSeries.length!==u.globals.series.length){this.dataPointsDividedHeight=u.globals.gridHeight/u.globals.dataPoints,this.dataPointsDividedWidth=u.globals.gridWidth/u.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||u.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,p.appendChild(this.tooltipTitle));var w=u.globals.series.length;(u.globals.xyCharts||u.globals.comboCharts)&&this.tConfig.shared&&(w=this.showOnIntersect?1:u.globals.series.length),this.legendLabels=u.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(w),this.addSVGEvents()}}},{key:"createTTElements",value:function(l){for(var u=this,p=this.w,y=[],w=this.getElTooltip(),C=function(B){var H=document.createElement("div");H.classList.add("apexcharts-tooltip-series-group"),H.style.order=p.config.tooltip.inverseOrder?l-B:B+1,u.tConfig.shared&&u.tConfig.enabledOnSeries&&Array.isArray(u.tConfig.enabledOnSeries)&&u.tConfig.enabledOnSeries.indexOf(B)<0&&H.classList.add("apexcharts-tooltip-series-group-hidden");var K=document.createElement("span");K.classList.add("apexcharts-tooltip-marker"),K.style.backgroundColor=p.globals.colors[B],H.appendChild(K);var J=document.createElement("div");J.classList.add("apexcharts-tooltip-text"),J.style.fontFamily=u.tConfig.style.fontFamily||p.config.chart.fontFamily,J.style.fontSize=u.tConfig.style.fontSize,["y","goals","z"].forEach(function(ne){var de=document.createElement("div");de.classList.add("apexcharts-tooltip-".concat(ne,"-group"));var xe=document.createElement("span");xe.classList.add("apexcharts-tooltip-text-".concat(ne,"-label")),de.appendChild(xe);var Se=document.createElement("span");Se.classList.add("apexcharts-tooltip-text-".concat(ne,"-value")),de.appendChild(Se),J.appendChild(de)}),H.appendChild(J),w.appendChild(H),y.push(H)},M=0;M<l;M++)C(M);return y}},{key:"addSVGEvents",value:function(){var l=this.w,u=l.config.chart.type,p=this.getElTooltip(),y=!("bar"!==u&&"candlestick"!==u&&"boxPlot"!==u&&"rangeBar"!==u),w="area"===u||"line"===u||"scatter"===u||"bubble"===u||"radar"===u,C=l.globals.dom.Paper.node,M=this.getElGrid();M&&(this.seriesBound=M.getBoundingClientRect());var B,H=[],K=[],J={hoverArea:C,elGrid:M,tooltipEl:p,tooltipY:H,tooltipX:K,ttItems:this.ttItems};if(l.globals.axisCharts&&(w?B=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):y?B=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==u&&"treemap"!==u||(B=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),B&&B.length))for(var ne=0;ne<B.length;ne++)H.push(B[ne].getAttribute("cy")),K.push(B[ne].getAttribute("cx"));if(l.globals.xyCharts&&!this.showOnIntersect||l.globals.comboCharts&&!this.showOnIntersect||y&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([C],J);else if(y&&!l.globals.comboCharts||w&&this.showOnIntersect)this.addDatapointEventsListeners(J);else if(!l.globals.axisCharts||"heatmap"===u||"treemap"===u){var de=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(de,J)}if(this.showOnIntersect){var xe=l.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");xe.length>0&&this.addPathsEventListeners(xe,J),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(J)}}},{key:"drawFixedTooltipRect",value:function(){var l=this.w,u=this.getElTooltip(),p=u.getBoundingClientRect(),y=p.width+10,w=p.height+10,C=this.tConfig.fixed.offsetX,M=this.tConfig.fixed.offsetY,B=this.tConfig.fixed.position.toLowerCase();return B.indexOf("right")>-1&&(C=C+l.globals.svgWidth-y+10),B.indexOf("bottom")>-1&&(M=M+l.globals.svgHeight-w-10),u.style.left=C+"px",u.style.top=M+"px",{x:C,y:M,ttWidth:y,ttHeight:w}}},{key:"addDatapointEventsListeners",value:function(l){var u=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(u,l)}},{key:"addPathsEventListeners",value:function(l,u){for(var p=this,y=function(C){var M={paths:l[C],tooltipEl:u.tooltipEl,tooltipY:u.tooltipY,tooltipX:u.tooltipX,elGrid:u.elGrid,hoverArea:u.hoverArea,ttItems:u.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(B){return l[C].addEventListener(B,p.onSeriesHover.bind(p,M),{capture:!1,passive:!0})})},w=0;w<l.length;w++)y(w)}},{key:"onSeriesHover",value:function(l,u){var p=this,y=Date.now()-this.lastHoverTime;y>=100?this.seriesHover(l,u):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){p.seriesHover(l,u)},100-y))}},{key:"seriesHover",value:function(l,u){var p=this;this.lastHoverTime=Date.now();var y=[],w=this.w;w.config.chart.group&&(y=this.ctx.getGroupedCharts()),w.globals.axisCharts&&(w.globals.minX===-1/0&&w.globals.maxX===1/0||0===w.globals.dataPoints)||(y.length?y.forEach(function(C){var M=p.getElTooltip(C);C.w.globals.minX===p.w.globals.minX&&C.w.globals.maxX===p.w.globals.maxX&&C.w.globals.tooltip.seriesHoverByContext({chartCtx:C,ttCtx:C.w.globals.tooltip,opt:{paths:l.paths,tooltipEl:M,tooltipY:l.tooltipY,tooltipX:l.tooltipX,elGrid:l.elGrid,hoverArea:l.hoverArea,ttItems:C.w.globals.tooltip.ttItems},e:u})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:l,e:u}))}},{key:"seriesHoverByContext",value:function(l){var u=l.chartCtx,p=l.ttCtx,y=l.opt,w=l.e,C=u.w,M=this.getElTooltip();M&&(p.tooltipRect={x:0,y:0,ttWidth:M.getBoundingClientRect().width,ttHeight:M.getBoundingClientRect().height},p.e=w,p.tooltipUtil.hasBars()&&!C.globals.comboCharts&&!p.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Fr(u).toggleSeriesOnHover(w,w.target.parentNode),p.fixedTooltip&&p.drawFixedTooltipRect(),C.globals.axisCharts?p.axisChartsTooltips({e:w,opt:y,tooltipRect:p.tooltipRect}):p.nonAxisChartsTooltips({e:w,opt:y,tooltipRect:p.tooltipRect}))}},{key:"axisChartsTooltips",value:function(l){var u,p,y=l.e,w=l.opt,C=this.w,M=w.elGrid.getBoundingClientRect(),B="touchmove"===y.type?y.touches[0].clientX:y.clientX,H="touchmove"===y.type?y.touches[0].clientY:y.clientY;if(this.clientY=H,this.clientX=B,C.globals.capturedSeriesIndex=-1,C.globals.capturedDataPointIndex=-1,H<M.top||H>M.top+M.height)this.handleMouseOut(w);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!C.config.tooltip.shared){var K=parseInt(w.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(K)<0)return void this.handleMouseOut(w)}var J=this.getElTooltip(),ne=this.getElXCrosshairs(),de=C.globals.xyCharts||"bar"===C.config.chart.type&&!C.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||C.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===y.type||"touchmove"===y.type||"mouseup"===y.type){if(C.globals.collapsedSeries.length+C.globals.ancillaryCollapsedSeries.length===C.globals.series.length)return;null!==ne&&ne.classList.add("apexcharts-active");var xe=this.yaxisTooltips.filter(function(Te){return!0===Te});if(null!==this.ycrosshairs&&xe.length&&this.ycrosshairs.classList.add("apexcharts-active"),de&&!this.showOnIntersect)this.handleStickyTooltip(y,B,H,w);else if("heatmap"===C.config.chart.type||"treemap"===C.config.chart.type){var Se=this.intersect.handleHeatTreeTooltip({e:y,opt:w,x:u,y:p,type:C.config.chart.type});p=Se.y,J.style.left=(u=Se.x)+"px",J.style.top=p+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:y,opt:w}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:y,opt:w,x:u,y:p});if(this.yaxisTooltips.length)for(var Pe=0;Pe<C.config.yaxis.length;Pe++)this.axesTooltip.drawYaxisTooltipText(Pe,H,this.xyRatios);w.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==y.type&&"touchend"!==y.type||this.handleMouseOut(w)}}},{key:"nonAxisChartsTooltips",value:function(l){var u=l.e,p=l.opt,y=l.tooltipRect,w=this.w,C=p.paths.getAttribute("rel"),M=this.getElTooltip(),B=w.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===u.type||"touchmove"===u.type){M.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:p.ttItems,i:parseInt(C,10)-1,shared:!1});var K=w.globals.clientY-B.top-y.ttHeight-10;if(M.style.left=w.globals.clientX-B.left-y.ttWidth/2+"px",M.style.top=K+"px",w.config.legend.tooltipHoverFormatter){var J=C-1,ne=(0,w.config.legend.tooltipHoverFormatter)(this.legendLabels[J].getAttribute("data:default-text"),{seriesIndex:J,dataPointIndex:J,w});this.legendLabels[J].innerHTML=ne}}else"mouseout"!==u.type&&"touchend"!==u.type||(M.classList.remove("apexcharts-active"),w.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(de){var xe=de.getAttribute("data:default-text");de.innerHTML=decodeURIComponent(xe)}))}},{key:"handleStickyTooltip",value:function(l,u,p,y){var w=this.w,C=this.tooltipUtil.getNearestValues({context:this,hoverArea:y.hoverArea,elGrid:y.elGrid,clientX:u,clientY:p}),M=C.j,B=C.capturedSeries;w.globals.collapsedSeriesIndices.includes(B)&&(B=null);var H=y.elGrid.getBoundingClientRect();if(C.hoverX<0||C.hoverX>H.width)this.handleMouseOut(y);else if(null!==B)this.handleStickyCapturedSeries(l,B,y,M);else if(this.tooltipUtil.isXoverlap(M)||w.globals.isBarHorizontal){var K=w.globals.series.findIndex(function(J,ne){return!w.globals.collapsedSeriesIndices.includes(ne)});this.create(l,this,K,M,y.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(l,u,p,y){var w=this.w;if(this.tConfig.shared||null!==w.globals.series[u][y]){if(void 0!==w.globals.series[u][y])this.tConfig.shared&&this.tooltipUtil.isXoverlap(y)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(l,this,u,y,p.ttItems):this.create(l,this,u,y,p.ttItems,!1);else if(this.tooltipUtil.isXoverlap(y)){var C=w.globals.series.findIndex(function(M,B){return!w.globals.collapsedSeriesIndices.includes(B)});this.create(l,this,C,y,p.ttItems)}}else this.handleMouseOut(p)}},{key:"deactivateHoverFilter",value:function(){for(var l=this.w,u=new kt(this.ctx),p=l.globals.dom.Paper.select(".apexcharts-bar-area"),y=0;y<p.length;y++)u.pathMouseLeave(p[y])}},{key:"handleMouseOut",value:function(l){var u=this.w,p=this.getElXCrosshairs();if(l.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==u.config.chart.type&&this.marker.resetPointsSize(),null!==p&&p.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=u.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var y=0;y<this.yaxisTTEls.length;y++)this.yaxisTTEls[y].classList.remove("apexcharts-active")}u.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(w){var C=w.getAttribute("data:default-text");w.innerHTML=decodeURIComponent(C)})}},{key:"markerClick",value:function(l,u,p){var y=this.w;"function"==typeof y.config.chart.events.markerClick&&y.config.chart.events.markerClick(l,this.ctx,{seriesIndex:u,dataPointIndex:p,w:y}),this.ctx.events.fireEvent("markerClick",[l,this.ctx,{seriesIndex:u,dataPointIndex:p,w:y}])}},{key:"create",value:function(l,u,p,y,w){var C,M,B,H,K,J,ne,de,xe,Se,Pe,Te,Ne,U,le,we,Le=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,je=this.w,lt=u;"mouseup"===l.type&&this.markerClick(l,p,y),null===Le&&(Le=this.tConfig.shared);var jt=this.tooltipUtil.hasMarkers(p),qt=this.tooltipUtil.getElBars();if(je.config.legend.tooltipHoverFormatter){var Di=je.config.legend.tooltipHoverFormatter,Qi=Array.from(this.legendLabels);Qi.forEach(function(Ea){var Ws=Ea.getAttribute("data:default-text");Ea.innerHTML=decodeURIComponent(Ws)});for(var cn=0;cn<Qi.length;cn++){var Qn=Qi[cn],gr=parseInt(Qn.getAttribute("i"),10),Zr=decodeURIComponent(Qn.getAttribute("data:default-text")),hs=Di(Zr,{seriesIndex:Le?gr:p,dataPointIndex:y,w:je});if(Le)Qn.innerHTML=je.globals.collapsedSeriesIndices.indexOf(gr)<0?hs:Zr;else if(Qn.innerHTML=gr===p?hs:Zr,p===gr)break}}var vs=Ze(Ze({ttItems:w,i:p,j:y},void 0!==(null===(C=je.globals.seriesRange)||void 0===C||null===(M=C[p])||void 0===M||null===(B=M[y])||void 0===B||null===(H=B.y[0])||void 0===H?void 0:H.y1)&&{y1:null===(K=je.globals.seriesRange)||void 0===K||null===(J=K[p])||void 0===J||null===(ne=J[y])||void 0===ne||null===(de=ne.y[0])||void 0===de?void 0:de.y1}),void 0!==(null===(xe=je.globals.seriesRange)||void 0===xe||null===(Se=xe[p])||void 0===Se||null===(Pe=Se[y])||void 0===Pe||null===(Te=Pe.y[0])||void 0===Te?void 0:Te.y2)&&{y2:null===(Ne=je.globals.seriesRange)||void 0===Ne||null===(U=Ne[p])||void 0===U||null===(le=U[y])||void 0===le||null===(we=le.y[0])||void 0===we?void 0:we.y2});if(Le){if(lt.tooltipLabels.drawSeriesTexts(Ze(Ze({},vs),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),jt)je.globals.markers.largestSize>0?lt.marker.enlargePoints(y):lt.tooltipPosition.moveDynamicPointsOnHover(y);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(qt),this.barSeriesHeight>0)){var _s=new kt(this.ctx),Js=je.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(y,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(y,p);for(var oa=0;oa<Js.length;oa++)_s.pathMouseEnter(Js[oa])}}else lt.tooltipLabels.drawSeriesTexts(Ze({shared:!1},vs)),this.tooltipUtil.hasBars()&&lt.tooltipPosition.moveStickyTooltipOverBars(y,p),jt&&lt.tooltipPosition.moveMarkers(p,y)}}]),ge}(),At=function(){function ge(l){j(this,ge),this.w=l.w,this.barCtx=l,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Be(ge,[{key:"handleBarDataLabels",value:function(l){var u=l.x,p=l.y,y=l.y1,w=l.y2,C=l.i,M=l.j,B=l.realIndex,H=l.groupIndex,K=l.series,J=l.barHeight,ne=l.barWidth,de=l.barXPosition,xe=l.barYPosition,Se=l.visibleSeries,Pe=l.renderedPath,Te=this.w,Ne=new kt(this.barCtx.ctx),U=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[B]:this.barCtx.strokeWidth,le=u+parseFloat(ne*Se),we=p+parseFloat(J*Se);Te.globals.isXNumeric&&!Te.globals.isBarHorizontal&&(le=u+parseFloat(ne*(Se+1)),we=p+parseFloat(J*(Se+1))-U);var Le,qt,je=null,lt=u,jt=p,Di=Te.config.dataLabels,Qi=this.barCtx.barOptions.dataLabels,cn=this.barCtx.barOptions.dataLabels.total;void 0!==xe&&this.barCtx.isRangeBar&&(we=xe,jt=xe),void 0!==de&&this.barCtx.isVerticalGroupedRangeBar&&(le=de,lt=de);var Qn=Di.offsetX,gr=Di.offsetY,Zr={width:0,height:0};Te.config.dataLabels.enabled&&(Zr=Ne.getTextRects(Te.globals.yLabelFormatters[0](this.barCtx.series[C][M]),parseFloat(Di.style.fontSize)));var vs={x:u,y:p,i:C,j:M,realIndex:B,groupIndex:H||-1,renderedPath:Pe,bcx:le,bcy:we,barHeight:J,barWidth:ne,textRects:Zr,strokeWidth:U,dataLabelsX:lt,dataLabelsY:jt,dataLabelsConfig:Di,barDataLabelsConfig:Qi,barTotalDataLabelsConfig:cn,offX:Qn,offY:gr};return qt=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(vs):this.calculateColumnsDataLabelsPosition(vs),Pe.attr({cy:qt.bcy,cx:qt.bcx,j:M,val:K[C][M],barHeight:J,barWidth:ne}),Le=this.drawCalculatedDataLabels({x:qt.dataLabelsX,y:qt.dataLabelsY,val:this.barCtx.isRangeBar?[y,w]:K[C][M],i:B,j:M,barWidth:ne,barHeight:J,textRects:Zr,dataLabelsConfig:Di}),Te.config.chart.stacked&&cn.enabled&&(je=this.drawTotalDataLabels({x:qt.totalDataLabelsX,y:qt.totalDataLabelsY,barWidth:ne,barHeight:J,realIndex:B,textAnchor:qt.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:B,j:M}),dataLabelsConfig:Di,barTotalDataLabelsConfig:cn})),{dataLabels:Le,totalDataLabels:je}}},{key:"getStackedTotalDataLabel",value:function(l){var u=l.realIndex,p=l.j,y=this.w,w=this.barCtx.stackedSeriesTotals[p];return this.totalFormatter&&(w=this.totalFormatter(w,Ze(Ze({},y),{},{seriesIndex:u,dataPointIndex:p,w:y}))),w}},{key:"calculateColumnsDataLabelsPosition",value:function(l){var u,p,y=this.w,w=l.i,C=l.j,M=l.realIndex,B=l.groupIndex,H=l.y,K=l.bcx,J=l.barWidth,ne=l.barHeight,de=l.textRects,xe=l.dataLabelsX,Se=l.dataLabelsY,Pe=l.dataLabelsConfig,Te=l.barDataLabelsConfig,Ne=l.barTotalDataLabelsConfig,U=l.strokeWidth,le=l.offX,we=l.offY;ne=Math.abs(ne);var Le="vertical"===y.config.plotOptions.bar.dataLabels.orientation,je=this.barCtx.barHelpers.getZeroValueEncounters({i:w,j:C}).zeroEncounters;K=K-U/2+(-1!==B?B*J:0),this.barCtx.isVerticalGroupedRangeBar?xe+=J/2:(xe=y.globals.isXNumeric?K-J/2+le:K-y.globals.gridWidth/y.globals.dataPoints+J/2+le,je>0&&y.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(xe-=J*je)),Le&&(xe=xe+de.height/2-U/2-2);var jt=this.barCtx.series[w][C]<0,qt=H;switch(this.barCtx.isReversed&&(qt=H-ne+(jt?2*ne:0),H-=ne),Te.position){case"center":Se=Le?jt?qt-ne/2+we:qt+ne/2-we:jt?qt-ne/2+de.height/2+we:qt+ne/2+de.height/2-we;break;case"bottom":Se=Le?jt?qt-ne+we:qt+ne-we:jt?qt-ne+de.height+U+we:qt+ne-de.height/2+U-we;break;case"top":Se=Le?jt?qt+we:qt-we:jt?qt-de.height/2-we:qt+de.height+we}if(this.barCtx.lastActiveBarSerieIndex===M&&Ne.enabled){var Di=new kt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:M,j:C}),Pe.fontSize);u=jt?qt-Di.height/2-we-Ne.offsetY+18:qt+Di.height+we+Ne.offsetY-18,p=xe+Ne.offsetX}return y.config.chart.stacked||(Se<0?Se=0+U:Se+de.height/3>y.globals.gridHeight&&(Se=y.globals.gridHeight-U)),{bcx:K,bcy:H,dataLabelsX:xe,dataLabelsY:Se,totalDataLabelsX:p,totalDataLabelsY:u,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(l){var u=this.w,p=l.x,y=l.i,w=l.j,C=l.realIndex,M=l.groupIndex,B=l.bcy,H=l.barHeight,K=l.barWidth,J=l.textRects,ne=l.dataLabelsX,de=l.strokeWidth,xe=l.dataLabelsConfig,Se=l.barDataLabelsConfig,Pe=l.barTotalDataLabelsConfig,Te=l.offX,Ne=l.offY,U=u.globals.gridHeight/u.globals.dataPoints;K=Math.abs(K);var le,we,Le=(B+=-1!==M?M*H:0)-(this.barCtx.isRangeBar?0:U)+H/2+J.height/2+Ne-3,je="start",lt=this.barCtx.series[y][w]<0,jt=p;switch(this.barCtx.isReversed&&(jt=p+K-(lt?2*K:0),p=u.globals.gridWidth-K),Se.position){case"center":ne=lt?jt+K/2-Te:Math.max(J.width/2,jt-K/2)+Te;break;case"bottom":ne=lt?jt+K-de-Math.round(J.width/2)-Te:jt-K+de+Math.round(J.width/2)+Te;break;case"top":ne=lt?jt-de+Math.round(J.width/2)-Te:jt-de-Math.round(J.width/2)+Te}if(this.barCtx.lastActiveBarSerieIndex===C&&Pe.enabled){var qt=new kt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:C,j:w}),xe.fontSize);lt?(le=jt-de+Math.round(qt.width/2)-Te-Pe.offsetX-15,je="end"):le=jt-de-Math.round(qt.width/2)+Te+Pe.offsetX+15,we=Le+Pe.offsetY}return u.config.chart.stacked||(ne<0?ne=ne+J.width+de:ne+J.width/2>u.globals.gridWidth&&(ne=u.globals.gridWidth-J.width-de)),{bcx:p,bcy:B,dataLabelsX:ne,dataLabelsY:Le,totalDataLabelsX:le,totalDataLabelsY:we,totalDataLabelsAnchor:je}}},{key:"drawCalculatedDataLabels",value:function(l){var u=l.x,p=l.y,y=l.val,w=l.i,C=l.j,M=l.textRects,B=l.barHeight,H=l.barWidth,K=l.dataLabelsConfig,J=this.w,ne="rotate(0)";"vertical"===J.config.plotOptions.bar.dataLabels.orientation&&(ne="rotate(-90, ".concat(u,", ").concat(p,")"));var de=new Xr(this.barCtx.ctx),xe=new kt(this.barCtx.ctx),Se=K.formatter,Pe=null,Te=J.globals.collapsedSeriesIndices.indexOf(w)>-1;if(K.enabled&&!Te){Pe=xe.group({class:"apexcharts-data-labels",transform:ne});var Ne="";void 0!==y&&(Ne=Se(y,Ze(Ze({},J),{},{seriesIndex:w,dataPointIndex:C,w:J}))),!y&&J.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(Ne="");var U=J.globals.series[w][C]<0,le=J.config.plotOptions.bar.dataLabels.position;"vertical"===J.config.plotOptions.bar.dataLabels.orientation&&("top"===le&&(K.textAnchor=U?"end":"start"),"center"===le&&(K.textAnchor="middle"),"bottom"===le&&(K.textAnchor=U?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&H<xe.getTextRects(Ne,parseFloat(K.style.fontSize)).width&&(Ne=""),J.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?M.width/1.6>Math.abs(H)&&(Ne=""):M.height/1.6>Math.abs(B)&&(Ne=""));var we=Ze({},K);this.barCtx.isHorizontal&&y<0&&("start"===K.textAnchor?we.textAnchor="end":"end"===K.textAnchor&&(we.textAnchor="start")),de.plotDataLabelsText({x:u,y:p,text:Ne,i:w,j:C,parent:Pe,dataLabelsConfig:we,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return Pe}},{key:"drawTotalDataLabels",value:function(l){var u,p=l.x,y=l.y,w=l.val,C=l.barWidth,M=l.barHeight,B=l.realIndex,H=l.textAnchor,K=l.barTotalDataLabelsConfig,J=this.w,ne=new kt(this.barCtx.ctx);return K.enabled&&void 0!==p&&void 0!==y&&this.barCtx.lastActiveBarSerieIndex===B&&(u=ne.drawText({x:p-(!J.globals.isBarHorizontal&&J.globals.seriesGroups.length?C/J.globals.seriesGroups.length:0),y:y-(J.globals.isBarHorizontal&&J.globals.seriesGroups.length?M/J.globals.seriesGroups.length:0),foreColor:K.style.color,text:w,textAnchor:H,fontFamily:K.style.fontFamily,fontSize:K.style.fontSize,fontWeight:K.style.fontWeight})),u}}]),ge}(),St=function(){function ge(l){j(this,ge),this.w=l.w,this.barCtx=l}return Be(ge,[{key:"initVariables",value:function(l){var u=this.w;this.barCtx.series=l,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var p=0;p<l.length;p++)if(l[p].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=l[p].length),u.globals.isXNumeric)for(var y=0;y<l[p].length;y++)u.globals.seriesX[p][y]>u.globals.minX&&u.globals.seriesX[p][y]<u.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=u.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],u.globals.comboCharts||this.checkZeroSeries({series:l})}},{key:"initialPositions",value:function(){var l,u,p,y,w,C,M,B,H=this.w,K=H.globals.dataPoints;this.barCtx.isRangeBar&&(K=H.globals.labels.length);var J=this.barCtx.seriesLen;if(H.config.plotOptions.bar.rangeBarGroupRows&&(J=1),this.barCtx.isHorizontal)w=(p=H.globals.gridHeight/K)/J,H.globals.isXNumeric&&(w=(p=H.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),w=w*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(w=parseInt(this.barCtx.barOptions.barHeight,10)),B=this.barCtx.baseLineInvertedY+H.globals.padHorizontal+(this.barCtx.isReversed?H.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(B=H.globals.gridWidth/2),u=(p-w*this.barCtx.seriesLen)/2;else{if(y=H.globals.gridWidth/this.barCtx.visibleItems,H.config.xaxis.convertedCatToNumeric&&(y=H.globals.gridWidth/H.globals.dataPoints),C=y/J*parseInt(this.barCtx.barOptions.columnWidth,10)/100,H.globals.isXNumeric){var ne=this.barCtx.xRatio;H.globals.minXDiff&&.5!==H.globals.minXDiff&&H.globals.minXDiff/ne>0&&(y=H.globals.minXDiff/ne),(C=y/J*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(C=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(C=parseInt(this.barCtx.barOptions.columnWidth,10)),M=H.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?H.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),l=H.globals.padHorizontal+(y-C*this.barCtx.seriesLen)/2}return H.globals.barHeight=w,H.globals.barWidth=C,{x:l,y:u,yDivision:p,xDivision:y,barHeight:w,barWidth:C,zeroH:M,zeroW:B}}},{key:"initializeStackedPrevVars",value:function(l){var u=l.w;u.globals.hasSeriesGroups?u.globals.seriesGroups.forEach(function(p){l[p]||(l[p]={}),l[p].prevY=[],l[p].prevX=[],l[p].prevYF=[],l[p].prevXF=[],l[p].prevYVal=[],l[p].prevXVal=[]}):(l.prevY=[],l.prevX=[],l.prevYF=[],l.prevXF=[],l.prevYVal=[],l.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(l){var u=l.w;u.globals.hasSeriesGroups?u.globals.seriesGroups.forEach(function(p){l[p]||(l[p]={}),l[p].xArrj=[],l[p].xArrjF=[],l[p].xArrjVal=[],l[p].yArrj=[],l[p].yArrjF=[],l[p].yArrjVal=[]}):(l.xArrj=[],l.xArrjF=[],l.xArrjVal=[],l.yArrj=[],l.yArrjF=[],l.yArrjVal=[])}},{key:"getPathFillColor",value:function(l,u,p,y){var w,C,M,B,H=this.w,K=new kn(this.barCtx.ctx),J=null,ne=this.barCtx.barOptions.distributed?p:u;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(de){l[u][p]>=de.from&&l[u][p]<=de.to&&(J=de.color)}),H.config.series[u].data[p]&&H.config.series[u].data[p].fillColor&&(J=H.config.series[u].data[p].fillColor),K.fillPath({seriesNumber:this.barCtx.barOptions.distributed?ne:y,dataPointIndex:p,color:J,value:l[u][p],fillConfig:null===(w=H.config.series[u].data[p])||void 0===w?void 0:w.fill,fillType:null!==(C=H.config.series[u].data[p])&&void 0!==C&&null!==(M=C.fill)&&void 0!==M&&M.type?null===(B=H.config.series[u].data[p])||void 0===B?void 0:B.fill.type:Array.isArray(H.config.fill.type)?H.config.fill.type[u]:H.config.fill.type})}},{key:"getStrokeWidth",value:function(l,u,p){var y=0,w=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[l][u],w.config.stroke.show&&(this.barCtx.isNullValue||(y=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[p]:this.barCtx.strokeWidth)),y}},{key:"shouldApplyRadius",value:function(l){var u=this.w,p=!1;return u.config.plotOptions.bar.borderRadius>0&&(u.config.chart.stacked&&"last"===u.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===l&&(p=!0):p=!0),p}},{key:"barBackground",value:function(l){var u=l.j,p=l.i,y=l.x1,w=l.x2,C=l.y1,M=l.y2,B=l.elSeries,H=this.w,K=new kt(this.barCtx.ctx),J=new Fr(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&J===p){u>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(u%=this.barCtx.barOptions.colors.backgroundBarColors.length);var de=K.drawRect(void 0!==y?y:0,void 0!==C?C:0,void 0!==w?w:H.globals.gridWidth,void 0!==M?M:H.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[u],this.barCtx.barOptions.colors.backgroundBarOpacity);B.add(de),de.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(l){var u,p=l.barWidth,y=l.barXPosition,w=l.y1,C=l.y2,M=l.strokeWidth,B=l.seriesGroup,H=l.realIndex,K=l.i,J=l.j,ne=l.w,de=new kt(this.barCtx.ctx);(M=Array.isArray(M)?M[H]:M)||(M=0);var xe=p,Se=y;null!==(u=ne.config.series[H].data[J])&&void 0!==u&&u.columnWidthOffset&&(Se=y-ne.config.series[H].data[J].columnWidthOffset/2,xe=p+ne.config.series[H].data[J].columnWidthOffset);var Pe=Se,Te=Se+xe;C+=.001;var Ne=de.move(Pe,w+=.001),U=de.move(Pe,w),le=de.line(Te-M,w);if(ne.globals.previousPaths.length>0&&(U=this.barCtx.getPreviousPath(H,J,!1)),Ne=Ne+de.line(Pe,C)+de.line(Te-M,C)+de.line(Te-M,w)+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),U=U+de.line(Pe,w)+le+le+le+le+le+de.line(Pe,w)+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(H)&&(Ne=de.roundPathCorners(Ne,ne.config.plotOptions.bar.borderRadius)),ne.config.chart.stacked){var we=this.barCtx;ne.globals.hasSeriesGroups&&B&&(we=this.barCtx[B]),we.yArrj.push(C),we.yArrjF.push(Math.abs(w-C)),we.yArrjVal.push(this.barCtx.series[K][J])}return{pathTo:Ne,pathFrom:U}}},{key:"getBarpaths",value:function(l){var u,p=l.barYPosition,y=l.barHeight,w=l.x1,C=l.x2,M=l.strokeWidth,B=l.seriesGroup,H=l.realIndex,K=l.i,J=l.j,ne=l.w,de=new kt(this.barCtx.ctx);(M=Array.isArray(M)?M[H]:M)||(M=0);var xe=p,Se=y;null!==(u=ne.config.series[H].data[J])&&void 0!==u&&u.barHeightOffset&&(xe=p-ne.config.series[H].data[J].barHeightOffset/2,Se=y+ne.config.series[H].data[J].barHeightOffset);var Pe=xe,Te=xe+Se;C+=.001;var Ne=de.move(w+=.001,Pe),U=de.move(w,Pe);ne.globals.previousPaths.length>0&&(U=this.barCtx.getPreviousPath(H,J,!1));var le=de.line(w,Te-M);if(Ne=Ne+de.line(C,Pe)+de.line(C,Te-M)+le+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),U=U+de.line(w,Pe)+le+le+le+le+le+de.line(w,Pe)+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(H)&&(Ne=de.roundPathCorners(Ne,ne.config.plotOptions.bar.borderRadius)),ne.config.chart.stacked){var we=this.barCtx;ne.globals.hasSeriesGroups&&B&&(we=this.barCtx[B]),we.xArrj.push(C),we.xArrjF.push(Math.abs(w-C)),we.xArrjVal.push(this.barCtx.series[K][J])}return{pathTo:Ne,pathFrom:U}}},{key:"checkZeroSeries",value:function(l){for(var u=l.series,p=this.w,y=0;y<u.length;y++){for(var w=0,C=0;C<u[p.globals.maxValsInArrayIndex].length;C++)w+=u[y][C];0===w&&this.barCtx.zeroSerieses.push(y)}}},{key:"getXForValue",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:u;return null!=l&&(p=u+l/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?l/this.barCtx.invertedYRatio:0)),p}},{key:"getYForValue",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:u;return null!=l&&(p=u-l/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?l/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),p}},{key:"getGoalValues",value:function(l,u,p,y,w){var C=this,M=this.w,B=[],H=function(ne,de){var xe;B.push((Re(xe={},l,"x"===l?C.getXForValue(ne,u,!1):C.getYForValue(ne,p,!1)),Re(xe,"attrs",de),xe))};if(M.globals.seriesGoals[y]&&M.globals.seriesGoals[y][w]&&Array.isArray(M.globals.seriesGoals[y][w])&&M.globals.seriesGoals[y][w].forEach(function(ne){H(ne.value,ne)}),this.barCtx.barOptions.isDumbbell&&M.globals.seriesRange.length){var K=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:M.globals.colors,J={strokeHeight:"x"===l?0:M.globals.markers.size[y],strokeWidth:"x"===l?M.globals.markers.size[y]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(K[y])?K[y][0]:K[y]};H(M.globals.seriesRangeStart[y][w],J),H(M.globals.seriesRangeEnd[y][w],Ze(Ze({},J),{},{strokeColor:Array.isArray(K[y])?K[y][1]:K[y]}))}return B}},{key:"drawGoalLine",value:function(l){var u=l.barXPosition,p=l.barYPosition,y=l.goalX,w=l.goalY,C=l.barWidth,M=l.barHeight,B=new kt(this.barCtx.ctx),H=B.group({className:"apexcharts-bar-goals-groups"});H.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:H.node}),H.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var K=null;return this.barCtx.isHorizontal?Array.isArray(y)&&y.forEach(function(J){var ne=void 0!==J.attrs.strokeHeight?J.attrs.strokeHeight:M/2,de=p+ne+M/2;K=B.drawLine(J.x,de-2*ne,J.x,de,J.attrs.strokeColor?J.attrs.strokeColor:void 0,J.attrs.strokeDashArray,J.attrs.strokeWidth?J.attrs.strokeWidth:2,J.attrs.strokeLineCap),H.add(K)}):Array.isArray(w)&&w.forEach(function(J){var ne=void 0!==J.attrs.strokeWidth?J.attrs.strokeWidth:C/2,de=u+ne+C/2;K=B.drawLine(de-2*ne,J.y,de,J.y,J.attrs.strokeColor?J.attrs.strokeColor:void 0,J.attrs.strokeDashArray,J.attrs.strokeHeight?J.attrs.strokeHeight:2,J.attrs.strokeLineCap),H.add(K)}),H}},{key:"drawBarShadow",value:function(l){var u=l.prevPaths,p=l.currPaths,y=l.color,w=this.w,C=u.x,M=u.x1,H=p.x,K=p.x1,J=p.barYPosition,ne=u.barYPosition+p.barHeight,de=new kt(this.barCtx.ctx),xe=new tt,Se=de.move(M,ne)+de.line(C,ne)+de.line(H,J)+de.line(K,J)+de.line(M,ne)+("around"===w.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return de.drawPath({d:Se,fill:xe.shadeColor(.5,tt.rgb2hex(y)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(l){var u=l.i,p=l.j,w=0,C=0;return this.w.globals.seriesPercent.forEach(function(M,B){M[p]&&w++,B<u&&0===M[p]&&C++}),{nonZeroColumns:w,zeroEncounters:C}}}]),ge}(),si=function(){function ge(l,u){j(this,ge),this.ctx=l,this.w=l.w;var p=this.w;this.barOptions=p.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=p.config.stroke.width,this.isNullValue=!1,this.isRangeBar=p.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!p.globals.isBarHorizontal&&p.globals.seriesRange.length&&p.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=u,null!==this.xyRatios&&(this.xRatio=u.xRatio,this.yRatio=u.yRatio,this.invertedXRatio=u.invertedXRatio,this.invertedYRatio=u.invertedYRatio,this.baseLineY=u.baseLineY,this.baseLineInvertedY=u.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var y=new Fr(this.ctx);this.lastActiveBarSerieIndex=y.getActiveConfigSeriesIndex("desc",["bar","column"]);var w=y.getBarSeriesIndices(),C=new Oi(this.ctx);this.stackedSeriesTotals=C.getStackedSeriesTotals(this.w.config.series.map(function(M,B){return-1===w.indexOf(B)?B:-1}).filter(function(M){return-1!==M})),this.barHelpers=new St(this)}return Be(ge,[{key:"draw",value:function(l,u){var p=this.w,y=new kt(this.ctx),w=new Oi(this.ctx,p);l=w.getLogSeries(l),this.series=l,this.yRatio=w.getLogYRatios(this.yRatio),this.barHelpers.initVariables(l);var C=y.group({class:"apexcharts-bar-series apexcharts-plot-series"});p.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var M=0,B=0;M<l.length;M++,B++){var H,K,J,ne,de=void 0,xe=void 0,Se=[],Pe=[],Te=p.globals.comboCharts?u[M]:M,Ne=y.group({class:"apexcharts-series",rel:M+1,seriesName:tt.escapeString(p.globals.seriesNames[Te]),"data:realIndex":Te});this.ctx.series.addCollapsedClassToSeries(Ne,Te),l[M].length>0&&(this.visibleI=this.visibleI+1);var U=0,le=0;this.yRatio.length>1&&(this.yaxisIndex=Te),this.isReversed=p.config.yaxis[this.yaxisIndex]&&p.config.yaxis[this.yaxisIndex].reversed;var we=this.barHelpers.initialPositions();xe=we.y,U=we.barHeight,K=we.yDivision,ne=we.zeroW,de=we.x,le=we.barWidth,H=we.xDivision,J=we.zeroH,this.horizontal||Pe.push(de+le/2);var Le=y.group({class:"apexcharts-datalabels","data:realIndex":Te});p.globals.delayedElements.push({el:Le.node}),Le.node.classList.add("apexcharts-element-hidden");var je=y.group({class:"apexcharts-bar-goals-markers"}),lt=y.group({class:"apexcharts-bar-shadows"});p.globals.delayedElements.push({el:lt.node}),lt.node.classList.add("apexcharts-element-hidden");for(var jt=0;jt<l[M].length;jt++){var qt=this.barHelpers.getStrokeWidth(M,jt,Te),Di=null,Qi={indexes:{i:M,j:jt,realIndex:Te,bc:B},x:de,y:xe,strokeWidth:qt,elSeries:Ne};this.isHorizontal?(Di=this.drawBarPaths(Ze(Ze({},Qi),{},{barHeight:U,zeroW:ne,yDivision:K})),le=this.series[M][jt]/this.invertedYRatio):(Di=this.drawColumnPaths(Ze(Ze({},Qi),{},{xDivision:H,barWidth:le,zeroH:J})),U=this.series[M][jt]/this.yRatio[this.yaxisIndex]);var cn=this.barHelpers.getPathFillColor(l,M,jt,Te);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&jt>0){var Qn=this.barHelpers.drawBarShadow({color:"string"==typeof cn&&-1===cn?.indexOf("url")?cn:tt.hexToRgba(p.globals.colors[M]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:Di});Qn&&lt.add(Qn)}this.pathArr.push(Di);var gr=this.barHelpers.drawGoalLine({barXPosition:Di.barXPosition,barYPosition:Di.barYPosition,goalX:Di.goalX,goalY:Di.goalY,barHeight:U,barWidth:le});gr&&je.add(gr),xe=Di.y,de=Di.x,jt>0&&Pe.push(de+le/2),Se.push(xe),this.renderSeries({realIndex:Te,pathFill:cn,j:jt,i:M,pathFrom:Di.pathFrom,pathTo:Di.pathTo,strokeWidth:qt,elSeries:Ne,x:de,y:xe,series:l,barHeight:Di.barHeight?Di.barHeight:U,barWidth:Di.barWidth?Di.barWidth:le,elDataLabelsWrap:Le,elGoalsMarkers:je,elBarShadows:lt,visibleSeries:this.visibleI,type:"bar"})}p.globals.seriesXvalues[Te]=Pe,p.globals.seriesYvalues[Te]=Se,C.add(Ne)}return C}},{key:"renderSeries",value:function(l){var u=l.realIndex,p=l.pathFill,y=l.lineFill,w=l.j,C=l.i,M=l.groupIndex,B=l.pathFrom,H=l.pathTo,K=l.strokeWidth,J=l.elSeries,ne=l.x,de=l.y,xe=l.y1,Se=l.y2,Pe=l.series,Te=l.barHeight,Ne=l.barWidth,U=l.barXPosition,le=l.barYPosition,we=l.elDataLabelsWrap,Le=l.elGoalsMarkers,je=l.elBarShadows,lt=l.visibleSeries,jt=l.type,qt=this.w,Di=new kt(this.ctx);y||(y=this.barOptions.distributed?qt.globals.stroke.colors[w]:qt.globals.stroke.colors[u]),qt.config.series[C].data[w]&&qt.config.series[C].data[w].strokeColor&&(y=qt.config.series[C].data[w].strokeColor),this.isNullValue&&(p="none");var cn=Di.renderPaths({i:C,j:w,realIndex:u,pathFrom:B,pathTo:H,stroke:y,strokeWidth:K,strokeLineCap:qt.config.stroke.lineCap,fill:p,animationDelay:w/qt.config.chart.animations.animateGradually.delay*(qt.config.chart.animations.speed/qt.globals.dataPoints)/2.4,initialSpeed:qt.config.chart.animations.speed,dataChangeSpeed:qt.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(jt,"-area")});cn.attr("clip-path","url(#gridRectMask".concat(qt.globals.cuid,")"));var Qn=qt.config.forecastDataPoints;Qn.count>0&&w>=qt.globals.dataPoints-Qn.count&&(cn.node.setAttribute("stroke-dasharray",Qn.dashArray),cn.node.setAttribute("stroke-width",Qn.strokeWidth),cn.node.setAttribute("fill-opacity",Qn.fillOpacity)),void 0!==xe&&void 0!==Se&&(cn.attr("data-range-y1",xe),cn.attr("data-range-y2",Se)),new Mi(this.ctx).setSelectionFilter(cn,u,w),J.add(cn);var gr=new At(this).handleBarDataLabels({x:ne,y:de,y1:xe,y2:Se,i:C,j:w,series:Pe,realIndex:u,groupIndex:M,barHeight:Te,barWidth:Ne,barXPosition:U,barYPosition:le,renderedPath:cn,visibleSeries:lt});return null!==gr.dataLabels&&we.add(gr.dataLabels),gr.totalDataLabels&&we.add(gr.totalDataLabels),J.add(we),Le&&J.add(Le),je&&J.add(je),J}},{key:"drawBarPaths",value:function(l){var u,M,p=l.indexes,y=l.barHeight,w=l.strokeWidth,C=l.zeroW,B=l.y,H=l.yDivision,K=l.elSeries,J=this.w,ne=p.i,de=p.j;if(J.globals.isXNumeric)u=(B=(J.globals.seriesX[ne][de]-J.globals.minX)/this.invertedXRatio-y)+y*this.visibleI;else if(J.config.plotOptions.bar.hideZeroBarsWhenGrouped){var xe=0,Se=0;J.globals.seriesPercent.forEach(function(Te,Ne){Te[de]&&xe++,Ne<ne&&0===Te[de]&&Se++}),xe>0&&(y=this.seriesLen*y/xe),u=B+y*this.visibleI,u-=y*Se}else u=B+y*this.visibleI;this.isFunnel&&(C-=(this.barHelpers.getXForValue(this.series[ne][de],C)-C)/2),M=this.barHelpers.getXForValue(this.series[ne][de],C);var Pe=this.barHelpers.getBarpaths({barYPosition:u,barHeight:y,x1:C,x2:M,strokeWidth:w,series:this.series,realIndex:p.realIndex,i:ne,j:de,w:J});return J.globals.isXNumeric||(B+=H),this.barHelpers.barBackground({j:de,i:ne,y1:u-y*this.visibleI,y2:y*this.seriesLen,elSeries:K}),{pathTo:Pe.pathTo,pathFrom:Pe.pathFrom,x1:C,x:M,y:B,goalX:this.barHelpers.getGoalValues("x",C,null,ne,de),barYPosition:u,barHeight:y}}},{key:"drawColumnPaths",value:function(l){var u,w,p=l.indexes,y=l.x,C=l.xDivision,M=l.barWidth,B=l.zeroH,H=l.strokeWidth,K=l.elSeries,J=this.w,de=p.i,xe=p.j,Se=p.bc;if(J.globals.isXNumeric){var Pe=this.getBarXForNumericXAxis({x:y,j:xe,realIndex:p.realIndex,barWidth:M});y=Pe.x,u=Pe.barXPosition}else if(J.config.plotOptions.bar.hideZeroBarsWhenGrouped){var Te=this.barHelpers.getZeroValueEncounters({i:de,j:xe}),Ne=Te.nonZeroColumns;Ne>0&&(M=this.seriesLen*M/Ne),u=y+M*this.visibleI,u-=M*Te.zeroEncounters}else u=y+M*this.visibleI;w=this.barHelpers.getYForValue(this.series[de][xe],B);var le=this.barHelpers.getColumnPaths({barXPosition:u,barWidth:M,y1:B,y2:w,strokeWidth:H,series:this.series,realIndex:p.realIndex,i:de,j:xe,w:J});return J.globals.isXNumeric||(y+=C),this.barHelpers.barBackground({bc:Se,j:xe,i:de,x1:u-H/2-M*this.visibleI,x2:M*this.seriesLen+H/2,elSeries:K}),{pathTo:le.pathTo,pathFrom:le.pathFrom,x:y,y:w,goalY:this.barHelpers.getGoalValues("y",null,B,de,xe),barXPosition:u,barWidth:M}}},{key:"getBarXForNumericXAxis",value:function(l){var u=l.x,p=l.barWidth,y=l.realIndex,w=l.j,C=this.w,M=y;return C.globals.seriesX[y].length||(M=C.globals.maxValsInArrayIndex),C.globals.seriesX[M][w]&&(u=(C.globals.seriesX[M][w]-C.globals.minX)/this.xRatio-p*this.seriesLen/2),{barXPosition:u+p*this.visibleI,x:u}}},{key:"getPreviousPath",value:function(l,u){for(var p,y=this.w,w=0;w<y.globals.previousPaths.length;w++){var C=y.globals.previousPaths[w];C.paths&&C.paths.length>0&&parseInt(C.realIndex,10)===parseInt(l,10)&&void 0!==y.globals.previousPaths[w].paths[u]&&(p=y.globals.previousPaths[w].paths[u].d)}return p}}]),ge}(),wi=function(ge){$e(u,si);var l=gt(u);function u(){return j(this,u),l.apply(this,arguments)}return Be(u,[{key:"draw",value:function(p,y){var w=this,C=this.w;this.graphics=new kt(this.ctx),this.bar=new si(this.ctx,this.xyRatios);var M=new Oi(this.ctx,C);p=M.getLogSeries(p),this.yRatio=M.getLogYRatios(this.yRatio),this.barHelpers.initVariables(p),"100%"===C.config.chart.stackType&&(p=C.globals.seriesPercent.slice()),this.series=p,this.barHelpers.initializeStackedPrevVars(this);for(var B=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),H=0,K=0,J=function(xe,Se){var Pe=void 0,Te=void 0,Ne=void 0,U=void 0,le=-1;w.groupCtx=w,C.globals.seriesGroups.forEach(function(Js,oa){Js.indexOf(C.config.series[xe].name)>-1&&(le=oa)}),-1!==le&&(w.groupCtx=w[C.globals.seriesGroups[le]]);var we=[],Le=[],je=C.globals.comboCharts?y[xe]:xe;w.yRatio.length>1&&(w.yaxisIndex=je),w.isReversed=C.config.yaxis[w.yaxisIndex]&&C.config.yaxis[w.yaxisIndex].reversed;var lt=w.graphics.group({class:"apexcharts-series",seriesName:tt.escapeString(C.globals.seriesNames[je]),rel:xe+1,"data:realIndex":je});w.ctx.series.addCollapsedClassToSeries(lt,je);var jt=w.graphics.group({class:"apexcharts-datalabels","data:realIndex":je}),qt=w.graphics.group({class:"apexcharts-bar-goals-markers"}),Di=0,Qi=0,cn=w.initialPositions(H,K,Pe,Te,Ne,U);K=cn.y,Te=cn.yDivision,U=cn.zeroW,H=cn.x,Qi=cn.barWidth,Pe=cn.xDivision,Ne=cn.zeroH,C.globals.barHeight=Di=cn.barHeight,C.globals.barWidth=Qi,w.barHelpers.initializeStackedXYVars(w),1===w.groupCtx.prevY.length&&w.groupCtx.prevY[0].every(function(Js){return isNaN(Js)})&&(w.groupCtx.prevY[0]=w.groupCtx.prevY[0].map(function(Js){return Ne}),w.groupCtx.prevYF[0]=w.groupCtx.prevYF[0].map(function(Js){return 0}));for(var Qn=0;Qn<C.globals.dataPoints;Qn++){var gr=w.barHelpers.getStrokeWidth(xe,Qn,je),Zr={indexes:{i:xe,j:Qn,realIndex:je,bc:Se},strokeWidth:gr,x:H,y:K,elSeries:lt,groupIndex:le,seriesGroup:C.globals.seriesGroups[le]},hs=null;w.isHorizontal?(hs=w.drawStackedBarPaths(Ze(Ze({},Zr),{},{zeroW:U,barHeight:Di,yDivision:Te})),Qi=w.series[xe][Qn]/w.invertedYRatio):(hs=w.drawStackedColumnPaths(Ze(Ze({},Zr),{},{xDivision:Pe,barWidth:Qi,zeroH:Ne})),Di=w.series[xe][Qn]/w.yRatio[w.yaxisIndex]);var vs=w.barHelpers.drawGoalLine({barXPosition:hs.barXPosition,barYPosition:hs.barYPosition,goalX:hs.goalX,goalY:hs.goalY,barHeight:Di,barWidth:Qi});vs&&qt.add(vs),K=hs.y,we.push(H=hs.x),Le.push(K);var _s=w.barHelpers.getPathFillColor(p,xe,Qn,je);lt=w.renderSeries({realIndex:je,pathFill:_s,j:Qn,i:xe,groupIndex:le,pathFrom:hs.pathFrom,pathTo:hs.pathTo,strokeWidth:gr,elSeries:lt,x:H,y:K,series:p,barHeight:Di,barWidth:Qi,elDataLabelsWrap:jt,elGoalsMarkers:qt,type:"bar",visibleSeries:0})}C.globals.seriesXvalues[je]=we,C.globals.seriesYvalues[je]=Le,w.groupCtx.prevY.push(w.groupCtx.yArrj),w.groupCtx.prevYF.push(w.groupCtx.yArrjF),w.groupCtx.prevYVal.push(w.groupCtx.yArrjVal),w.groupCtx.prevX.push(w.groupCtx.xArrj),w.groupCtx.prevXF.push(w.groupCtx.xArrjF),w.groupCtx.prevXVal.push(w.groupCtx.xArrjVal),B.add(lt)},ne=0,de=0;ne<p.length;ne++,de++)J(ne,de);return B}},{key:"initialPositions",value:function(p,y,w,C,M,B){var H,K,J,ne,de=this.w;return this.isHorizontal?(J=(J=C=de.globals.gridHeight/de.globals.dataPoints)*parseInt(de.config.plotOptions.bar.barHeight,10)/100,-1===String(de.config.plotOptions.bar.barHeight).indexOf("%")&&(J=parseInt(de.config.plotOptions.bar.barHeight,10)),B=this.baseLineInvertedY+de.globals.padHorizontal+(this.isReversed?de.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),y=(C-J)/2):(ne=w=de.globals.gridWidth/de.globals.dataPoints,ne=de.globals.isXNumeric&&de.globals.dataPoints>1?(w=de.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:ne*parseInt(de.config.plotOptions.bar.columnWidth,10)/100,-1===String(de.config.plotOptions.bar.columnWidth).indexOf("%")&&(ne=parseInt(de.config.plotOptions.bar.columnWidth,10)),M=de.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?de.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),p=de.globals.padHorizontal+(w-ne)/2),{x:p,y,yDivision:C,xDivision:w,barHeight:null!==(H=de.globals.seriesGroups)&&void 0!==H&&H.length?J/de.globals.seriesGroups.length:J,barWidth:null!==(K=de.globals.seriesGroups)&&void 0!==K&&K.length?ne/de.globals.seriesGroups.length:ne,zeroH:M,zeroW:B}}},{key:"drawStackedBarPaths",value:function(p){for(var y,H,w=p.indexes,C=p.barHeight,M=p.strokeWidth,B=p.zeroW,K=p.y,J=p.groupIndex,ne=p.seriesGroup,de=p.yDivision,xe=p.elSeries,Se=this.w,Pe=K+(-1!==J?J*C:0),Te=w.i,Ne=w.j,U=0,le=0;le<this.groupCtx.prevXF.length;le++)U+=this.groupCtx.prevXF[le][Ne];var we=Te;if(ne&&(we=ne.indexOf(Se.config.series[Te].name)),we>0){var Le=B;this.groupCtx.prevXVal[we-1][Ne]<0?Le=this.series[Te][Ne]>=0?this.groupCtx.prevX[we-1][Ne]+U-2*(this.isReversed?U:0):this.groupCtx.prevX[we-1][Ne]:this.groupCtx.prevXVal[we-1][Ne]>=0&&(Le=this.series[Te][Ne]>=0?this.groupCtx.prevX[we-1][Ne]:this.groupCtx.prevX[we-1][Ne]-U+2*(this.isReversed?U:0)),y=Le}else y=B;var je=this.barHelpers.getBarpaths({barYPosition:Pe,barHeight:C,x1:y,x2:H=null===this.series[Te][Ne]?y:y+this.series[Te][Ne]/this.invertedYRatio-2*(this.isReversed?this.series[Te][Ne]/this.invertedYRatio:0),strokeWidth:M,series:this.series,realIndex:w.realIndex,seriesGroup:ne,i:Te,j:Ne,w:Se});return this.barHelpers.barBackground({j:Ne,i:Te,y1:Pe,y2:C,elSeries:xe}),K+=de,{pathTo:je.pathTo,pathFrom:je.pathFrom,goalX:this.barHelpers.getGoalValues("x",B,null,Te,Ne),barYPosition:Pe,x:H,y:K}}},{key:"drawStackedColumnPaths",value:function(p){var C,y=p.indexes,w=p.x,M=p.xDivision,B=p.barWidth,H=p.zeroH,K=p.groupIndex,J=p.seriesGroup,ne=p.elSeries,de=this.w,xe=y.i,Se=y.j,Pe=y.bc;if(de.globals.isXNumeric){var Te=de.globals.seriesX[xe][Se];Te||(Te=0),w=(Te-de.globals.minX)/this.xRatio-B/2,de.globals.seriesGroups.length&&(w=(Te-de.globals.minX)/this.xRatio-B/2*de.globals.seriesGroups.length)}for(var Ne,U=w+(-1!==K?K*B:0),le=0,we=0;we<this.groupCtx.prevYF.length;we++)le+=isNaN(this.groupCtx.prevYF[we][Se])?0:this.groupCtx.prevYF[we][Se];var Le=xe;if(J&&(Le=J.indexOf(de.config.series[xe].name)),Le>0&&!de.globals.isXNumeric||Le>0&&de.globals.isXNumeric&&de.globals.seriesX[xe-1][Se]===de.globals.seriesX[xe][Se]){var je,lt,jt,qt=Math.min(this.yRatio.length+1,xe+1);if(void 0!==this.groupCtx.prevY[Le-1]&&this.groupCtx.prevY[Le-1].length)for(var Di=1;Di<qt;Di++){var Qi;if(!isNaN(null===(Qi=this.groupCtx.prevY[Le-Di])||void 0===Qi?void 0:Qi[Se])){jt=this.groupCtx.prevY[Le-Di][Se];break}}for(var cn=1;cn<qt;cn++){var Qn,gr;if((null===(Qn=this.groupCtx.prevYVal[Le-cn])||void 0===Qn?void 0:Qn[Se])<0){lt=this.series[xe][Se]>=0?jt-le+2*(this.isReversed?le:0):jt;break}if((null===(gr=this.groupCtx.prevYVal[Le-cn])||void 0===gr?void 0:gr[Se])>=0){lt=this.series[xe][Se]>=0?jt:jt+le-2*(this.isReversed?le:0);break}}void 0===lt&&(lt=de.globals.gridHeight),Ne=null!==(je=this.groupCtx.prevYF[0])&&void 0!==je&&je.every(function(hs){return 0===hs})&&this.groupCtx.prevYF.slice(1,Le).every(function(hs){return hs.every(function(vs){return isNaN(vs)})})?H:lt}else Ne=H;var Zr=this.barHelpers.getColumnPaths({barXPosition:U,barWidth:B,y1:Ne,y2:C=this.series[xe][Se]?Ne-this.series[xe][Se]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[xe][Se]/this.yRatio[this.yaxisIndex]:0):Ne,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:J,realIndex:y.realIndex,i:xe,j:Se,w:de});return this.barHelpers.barBackground({bc:Pe,j:Se,i:xe,x1:U,x2:B,elSeries:ne}),w+=M,{pathTo:Zr.pathTo,pathFrom:Zr.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,H,xe,Se),barXPosition:U,x:de.globals.isXNumeric?w-M:w,y:C}}}]),u}(),ki=function(ge){$e(u,si);var l=gt(u);function u(){return j(this,u),l.apply(this,arguments)}return Be(u,[{key:"draw",value:function(p,y,w){var C=this,M=this.w,B=new kt(this.ctx),H=M.globals.comboCharts?y:M.config.chart.type,K=new kn(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=M.config.plotOptions.bar.horizontal;var J=new Oi(this.ctx,M);p=J.getLogSeries(p),this.series=p,this.yRatio=J.getLogYRatios(this.yRatio),this.barHelpers.initVariables(p);for(var ne=B.group({class:"apexcharts-".concat(H,"-series apexcharts-plot-series")}),de=function(Se){C.isBoxPlot="boxPlot"===M.config.chart.type||"boxPlot"===M.config.series[Se].type;var Pe,Te,Ne,U,qt,Di,le=void 0,we=void 0,Le=[],je=[],lt=M.globals.comboCharts?w[Se]:Se,jt=B.group({class:"apexcharts-series",seriesName:tt.escapeString(M.globals.seriesNames[lt]),rel:Se+1,"data:realIndex":lt});C.ctx.series.addCollapsedClassToSeries(jt,lt),p[Se].length>0&&(C.visibleI=C.visibleI+1),C.yRatio.length>1&&(C.yaxisIndex=lt);var Qi=C.barHelpers.initialPositions();we=Qi.y,qt=Qi.barHeight,Te=Qi.yDivision,U=Qi.zeroW,Pe=Qi.xDivision,Ne=Qi.zeroH,je.push((le=Qi.x)+(Di=Qi.barWidth)/2);for(var cn=B.group({class:"apexcharts-datalabels","data:realIndex":lt}),Qn=function(Zr){var hs=C.barHelpers.getStrokeWidth(Se,Zr,lt),vs=null,_s={indexes:{i:Se,j:Zr,realIndex:lt},x:le,y:we,strokeWidth:hs,elSeries:jt};vs=C.isHorizontal?C.drawHorizontalBoxPaths(Ze(Ze({},_s),{},{yDivision:Te,barHeight:qt,zeroW:U})):C.drawVerticalBoxPaths(Ze(Ze({},_s),{},{xDivision:Pe,barWidth:Di,zeroH:Ne})),we=vs.y,le=vs.x,Zr>0&&je.push(le+Di/2),Le.push(we),vs.pathTo.forEach(function(Js,oa){var Ea=!C.isBoxPlot&&C.candlestickOptions.wick.useFillColor?vs.color[oa]:M.globals.stroke.colors[Se],Ws=K.fillPath({seriesNumber:lt,dataPointIndex:Zr,color:vs.color[oa],value:p[Se][Zr]});C.renderSeries({realIndex:lt,pathFill:Ws,lineFill:Ea,j:Zr,i:Se,pathFrom:vs.pathFrom,pathTo:Js,strokeWidth:hs,elSeries:jt,x:le,y:we,series:p,barHeight:qt,barWidth:Di,elDataLabelsWrap:cn,visibleSeries:C.visibleI,type:M.config.chart.type})})},gr=0;gr<M.globals.dataPoints;gr++)Qn(gr);M.globals.seriesXvalues[lt]=je,M.globals.seriesYvalues[lt]=Le,ne.add(jt)},xe=0;xe<p.length;xe++)de(xe);return ne}},{key:"drawVerticalBoxPaths",value:function(p){var y=p.indexes,w=p.x,C=p.xDivision,M=p.barWidth,B=p.zeroH,H=p.strokeWidth,K=this.w,J=new kt(this.ctx),ne=y.i,de=y.j,xe=!0,Se=K.config.plotOptions.candlestick.colors.upward,Pe=K.config.plotOptions.candlestick.colors.downward,Te="";this.isBoxPlot&&(Te=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var Ne=this.yRatio[this.yaxisIndex],U=y.realIndex,le=this.getOHLCValue(U,de),we=B,Le=B;le.o>le.c&&(xe=!1);var je=Math.min(le.o,le.c),lt=Math.max(le.o,le.c),jt=le.m;K.globals.isXNumeric&&(w=(K.globals.seriesX[U][de]-K.globals.minX)/this.xRatio-M/2);var qt=w+M*this.visibleI;null==this.series[ne][de]?(je=B,lt=B):(je=B-je/Ne,lt=B-lt/Ne,we=B-le.h/Ne,Le=B-le.l/Ne,jt=B-le.m/Ne);var Di=J.move(qt,B),Qi=J.move(qt+M/2,je);return K.globals.previousPaths.length>0&&(Qi=this.getPreviousPath(U,de,!0)),Di=this.isBoxPlot?[J.move(qt,je)+J.line(qt+M/2,je)+J.line(qt+M/2,we)+J.line(qt+M/4,we)+J.line(qt+M-M/4,we)+J.line(qt+M/2,we)+J.line(qt+M/2,je)+J.line(qt+M,je)+J.line(qt+M,jt)+J.line(qt,jt)+J.line(qt,je+H/2),J.move(qt,jt)+J.line(qt+M,jt)+J.line(qt+M,lt)+J.line(qt+M/2,lt)+J.line(qt+M/2,Le)+J.line(qt+M-M/4,Le)+J.line(qt+M/4,Le)+J.line(qt+M/2,Le)+J.line(qt+M/2,lt)+J.line(qt,lt)+J.line(qt,jt)+"z"]:[J.move(qt,lt)+J.line(qt+M/2,lt)+J.line(qt+M/2,we)+J.line(qt+M/2,lt)+J.line(qt+M,lt)+J.line(qt+M,je)+J.line(qt+M/2,je)+J.line(qt+M/2,Le)+J.line(qt+M/2,je)+J.line(qt,je)+J.line(qt,lt-H/2)],Qi+=J.move(qt,je),K.globals.isXNumeric||(w+=C),{pathTo:Di,pathFrom:Qi,x:w,y:lt,barXPosition:qt,color:this.isBoxPlot?Te:xe?[Se]:[Pe]}}},{key:"drawHorizontalBoxPaths",value:function(p){var y=p.indexes,w=p.y,C=p.yDivision,M=p.barHeight,B=p.zeroW,H=p.strokeWidth,K=this.w,J=new kt(this.ctx),ne=y.i,de=y.j,xe=this.boxOptions.colors.lower;this.isBoxPlot&&(xe=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var Se=this.invertedYRatio,Pe=y.realIndex,Te=this.getOHLCValue(Pe,de),Ne=B,U=B,le=Math.min(Te.o,Te.c),we=Math.max(Te.o,Te.c),Le=Te.m;K.globals.isXNumeric&&(w=(K.globals.seriesX[Pe][de]-K.globals.minX)/this.invertedXRatio-M/2);var je=w+M*this.visibleI;null==this.series[ne][de]?(le=B,we=B):(le=B+le/Se,we=B+we/Se,Ne=B+Te.h/Se,U=B+Te.l/Se,Le=B+Te.m/Se);var lt=J.move(B,je),jt=J.move(le,je+M/2);return K.globals.previousPaths.length>0&&(jt=this.getPreviousPath(Pe,de,!0)),lt=[J.move(le,je)+J.line(le,je+M/2)+J.line(Ne,je+M/2)+J.line(Ne,je+M/2-M/4)+J.line(Ne,je+M/2+M/4)+J.line(Ne,je+M/2)+J.line(le,je+M/2)+J.line(le,je+M)+J.line(Le,je+M)+J.line(Le,je)+J.line(le+H/2,je),J.move(Le,je)+J.line(Le,je+M)+J.line(we,je+M)+J.line(we,je+M/2)+J.line(U,je+M/2)+J.line(U,je+M-M/4)+J.line(U,je+M/4)+J.line(U,je+M/2)+J.line(we,je+M/2)+J.line(we,je)+J.line(Le,je)+"z"],jt+=J.move(le,je),K.globals.isXNumeric||(w+=C),{pathTo:lt,pathFrom:jt,x:we,y:w,barYPosition:je,color:xe}}},{key:"getOHLCValue",value:function(p,y){var w=this.w;return{o:this.isBoxPlot?w.globals.seriesCandleH[p][y]:w.globals.seriesCandleO[p][y],h:this.isBoxPlot?w.globals.seriesCandleO[p][y]:w.globals.seriesCandleH[p][y],m:w.globals.seriesCandleM[p][y],l:this.isBoxPlot?w.globals.seriesCandleC[p][y]:w.globals.seriesCandleL[p][y],c:this.isBoxPlot?w.globals.seriesCandleL[p][y]:w.globals.seriesCandleC[p][y]}}}]),u}(),Mt=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"checkColorRange",value:function(){var l=this.w,u=!1,p=l.config.plotOptions[l.config.chart.type];return p.colorScale.ranges.length>0&&p.colorScale.ranges.map(function(y,w){y.from<=0&&(u=!0)}),u}},{key:"getShadeColor",value:function(l,u,p,y){var w=this.w,C=1,M=w.config.plotOptions[l].shadeIntensity,B=this.determineColor(l,u,p);w.globals.hasNegs||y?C=w.config.plotOptions[l].reverseNegativeShade?B.percent<0?B.percent/100*(1.25*M):1.25*M*(1-B.percent/100):B.percent<=0?1-(1+B.percent/100)*M:(1-B.percent/100)*M:(C=1-B.percent/100,"treemap"===l&&(C=1.25*M*(1-B.percent/100)));var H=B.color,K=new tt;return w.config.plotOptions[l].enableShades&&(H=tt.hexToRgba(K.shadeColor("dark"===this.w.config.theme.mode?-1*C:C,B.color),w.config.fill.opacity)),{color:H,colorProps:B}}},{key:"determineColor",value:function(l,u,p){var y=this.w,w=y.globals.series[u][p],C=y.config.plotOptions[l],M=C.colorScale.inverse?p:u;C.distributed&&"treemap"===y.config.chart.type&&(M=p);var B=y.globals.colors[M],H=null,K=Math.min.apply(Math,Et(y.globals.series[u])),J=Math.max.apply(Math,Et(y.globals.series[u]));C.distributed||"heatmap"!==l||(K=y.globals.minY,J=y.globals.maxY),void 0!==C.colorScale.min&&(K=C.colorScale.min<y.globals.minY?C.colorScale.min:y.globals.minY,J=C.colorScale.max>y.globals.maxY?C.colorScale.max:y.globals.maxY);var ne=Math.abs(J)+Math.abs(K),de=100*w/(0===ne?ne-1e-6:ne);return C.colorScale.ranges.length>0&&C.colorScale.ranges.map(function(xe,Se){if(w>=xe.from&&w<=xe.to){B=xe.color,H=xe.foreColor?xe.foreColor:null,K=xe.from,J=xe.to;var Pe=Math.abs(J)+Math.abs(K);de=100*w/(0===Pe?Pe-1e-6:Pe)}}),{color:B,foreColor:H,percent:de}}},{key:"calculateDataLabels",value:function(l){var u=l.text,p=l.x,y=l.y,w=l.i,C=l.j,M=l.colorProps,B=l.fontSize,H=this.w.config.dataLabels,K=new kt(this.ctx),J=new Xr(this.ctx),ne=null;if(H.enabled){ne=K.group({class:"apexcharts-data-labels"});var xe=H.offsetY,Se=p+H.offsetX,Pe=y+parseFloat(H.style.fontSize)/3+xe;J.plotDataLabelsText({x:Se,y:Pe,text:u,i:w,j:C,color:M.foreColor,parent:ne,fontSize:B,dataLabelsConfig:H})}return ne}},{key:"addListeners",value:function(l){var u=new kt(this.ctx);l.node.addEventListener("mouseenter",u.pathMouseEnter.bind(this,l)),l.node.addEventListener("mouseleave",u.pathMouseLeave.bind(this,l)),l.node.addEventListener("mousedown",u.pathMouseDown.bind(this,l))}}]),ge}(),zi=function(){function ge(l,u){j(this,ge),this.ctx=l,this.w=l.w,this.xRatio=u.xRatio,this.yRatio=u.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Mt(l),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Be(ge,[{key:"draw",value:function(l){var u=this.w,p=new kt(this.ctx),y=p.group({class:"apexcharts-heatmap"});y.attr("clip-path","url(#gridRectMask".concat(u.globals.cuid,")"));var w=u.globals.gridWidth/u.globals.dataPoints,C=u.globals.gridHeight/u.globals.series.length,M=0,B=!1;this.negRange=this.helpers.checkColorRange();var H=l.slice();u.config.yaxis[0].reversed&&(B=!0,H.reverse());for(var K=B?0:H.length-1;B?K<H.length:K>=0;B?K++:K--){var J=p.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:tt.escapeString(u.globals.seriesNames[K]),rel:K+1,"data:realIndex":K});if(this.ctx.series.addCollapsedClassToSeries(J,K),u.config.chart.dropShadow.enabled){var ne=u.config.chart.dropShadow;new Mi(this.ctx).dropShadow(J,ne,K)}for(var de=0,xe=u.config.plotOptions.heatmap.shadeIntensity,Se=0;Se<H[K].length;Se++){var Pe=this.helpers.getShadeColor(u.config.chart.type,K,Se,this.negRange),Te=Pe.color,Ne=Pe.colorProps;"image"===u.config.fill.type&&(Te=new kn(this.ctx).fillPath({seriesNumber:K,dataPointIndex:Se,opacity:u.globals.hasNegs?Ne.percent<0?1-(1+Ne.percent/100):xe+Ne.percent/100:Ne.percent/100,patternID:tt.randomId(),width:u.config.fill.image.width?u.config.fill.image.width:w,height:u.config.fill.image.height?u.config.fill.image.height:C}));var le=p.drawRect(de,M,w,C,this.rectRadius);if(le.attr({cx:de,cy:M}),le.node.classList.add("apexcharts-heatmap-rect"),J.add(le),le.attr({fill:Te,i:K,index:K,j:Se,val:l[K][Se],"stroke-width":this.strokeWidth,stroke:u.config.plotOptions.heatmap.useFillColorAsStroke?Te:u.globals.stroke.colors[0],color:Te}),this.helpers.addListeners(le),u.config.chart.animations.enabled&&!u.globals.dataChanged){var we=1;u.globals.resized||(we=u.config.chart.animations.speed),this.animateHeatMap(le,de,M,w,C,we)}if(u.globals.dataChanged){var Le=1;if(this.dynamicAnim.enabled&&u.globals.shouldAnimate){Le=this.dynamicAnim.speed;var je=u.globals.previousPaths[K]&&u.globals.previousPaths[K][Se]&&u.globals.previousPaths[K][Se].color;je||(je="rgba(255, 255, 255, 0)"),this.animateHeatColor(le,tt.isColorHex(je)?je:tt.rgb2hex(je),tt.isColorHex(Te)?Te:tt.rgb2hex(Te),Le)}}var lt=(0,u.config.dataLabels.formatter)(u.globals.series[K][Se],{value:u.globals.series[K][Se],seriesIndex:K,dataPointIndex:Se,w:u}),jt=this.helpers.calculateDataLabels({text:lt,x:de+w/2,y:M+C/2,i:K,j:Se,colorProps:Ne,series:H});null!==jt&&J.add(jt),de+=w}M+=C,y.add(J)}var qt=u.globals.yAxisScale[0].result.slice();return u.config.yaxis[0].reversed?qt.unshift(""):qt.push(""),u.globals.yAxisScale[0].result=qt,y}},{key:"animateHeatMap",value:function(l,u,p,y,w,C){var M=new Ci(this.ctx);M.animateRect(l,{x:u+y/2,y:p+w/2,width:0,height:0},{x:u,y:p,width:y,height:w},C,function(){M.animationCompleted(l)})}},{key:"animateHeatColor",value:function(l,u,p,y){l.attr({fill:u}).animate(y).attr({fill:p})}}]),ge}(),Sn=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"drawYAxisTexts",value:function(l,u,p,y){var w=this.w,C=w.config.yaxis[0],M=w.globals.yLabelFormatters[0];return new kt(this.ctx).drawText({x:l+C.labels.offsetX,y:u+C.labels.offsetY,text:M(y,p),textAnchor:"middle",fontSize:C.labels.style.fontSize,fontFamily:C.labels.style.fontFamily,foreColor:Array.isArray(C.labels.style.colors)?C.labels.style.colors[p]:C.labels.style.colors})}}]),ge}(),Rn=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w;var u=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==u.globals.stroke.colors?u.globals.stroke.colors:u.globals.colors,this.defaultSize=Math.min(u.globals.gridWidth,u.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=u.globals.gridWidth/2,this.fullAngle="radialBar"===u.config.chart.type?360:Math.abs(u.config.plotOptions.pie.endAngle-u.config.plotOptions.pie.startAngle),this.initialAngle=u.config.plotOptions.pie.startAngle%this.fullAngle,u.globals.radialSize=this.defaultSize/2.05-u.config.stroke.width-(u.config.chart.sparkline.enabled?0:u.config.chart.dropShadow.blur),this.donutSize=u.globals.radialSize*parseInt(u.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Be(ge,[{key:"draw",value:function(l){var u=this,p=this.w,y=new kt(this.ctx);if(this.ret=y.group({class:"apexcharts-pie"}),p.globals.noData)return this.ret;for(var w=0,C=0;C<l.length;C++)w+=tt.negToZero(l[C]);var M=[],B=y.group();0===w&&(w=1e-5),l.forEach(function(je){u.maxY=Math.max(u.maxY,je)}),p.config.yaxis[0].max&&(this.maxY=p.config.yaxis[0].max),"back"===p.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var H=0;H<l.length;H++){var K=this.fullAngle*tt.negToZero(l[H])/w;M.push(K),"polarArea"===this.chartType?(M[H]=this.fullAngle/l.length,this.sliceSizes.push(p.globals.radialSize*l[H]/this.maxY)):this.sliceSizes.push(p.globals.radialSize)}if(p.globals.dataChanged){for(var J,ne=0,de=0;de<p.globals.previousPaths.length;de++)ne+=tt.negToZero(p.globals.previousPaths[de]);for(var xe=0;xe<p.globals.previousPaths.length;xe++)J=this.fullAngle*tt.negToZero(p.globals.previousPaths[xe])/ne,this.prevSectorAngleArr.push(J)}this.donutSize<0&&(this.donutSize=0);var Se=p.config.plotOptions.pie.customScale,Ne=p.globals.gridWidth/2-p.globals.gridWidth/2*Se,U=p.globals.gridHeight/2-p.globals.gridHeight/2*Se;if("donut"===this.chartType){var le=y.drawCircle(this.donutSize);le.attr({cx:this.centerX,cy:this.centerY,fill:p.config.plotOptions.pie.donut.background?p.config.plotOptions.pie.donut.background:"transparent"}),B.add(le)}var we=this.drawArcs(M,l);if(this.sliceLabels.forEach(function(je){we.add(je)}),B.attr({transform:"translate(".concat(Ne,", ").concat(U,") scale(").concat(Se,")")}),B.add(we),this.ret.add(B),this.donutDataLabels.show){var Le=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:Ne,translateY:U});this.ret.add(Le)}return"front"===p.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(l,u){var p=this.w,y=new Mi(this.ctx),w=new kt(this.ctx),C=new kn(this.ctx),M=w.group({class:"apexcharts-slices"}),B=this.initialAngle,H=this.initialAngle,K=this.initialAngle,J=this.initialAngle;this.strokeWidth=p.config.stroke.show?p.config.stroke.width:0;for(var ne=0;ne<l.length;ne++){var de=w.group({class:"apexcharts-series apexcharts-pie-series",seriesName:tt.escapeString(p.globals.seriesNames[ne]),rel:ne+1,"data:realIndex":ne});M.add(de),K=(B=K)+l[ne],J=(H=J)+this.prevSectorAngleArr[ne];var xe=K<B?this.fullAngle+K-B:K-B,Se=C.fillPath({seriesNumber:ne,size:this.sliceSizes[ne],value:u[ne]}),Pe=this.getChangedPath(H,J),Te=w.drawPath({d:Pe,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[ne]:this.lineColorArr,strokeWidth:0,fill:Se,fillOpacity:p.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(ne)});Te.attr({index:0,j:ne}),y.setSelectionFilter(Te,0,ne),p.config.chart.dropShadow.enabled&&y.dropShadow(Te,p.config.chart.dropShadow,ne),this.addListeners(Te,this.donutDataLabels),kt.setAttrs(Te.node,{"data:angle":xe,"data:startAngle":B,"data:strokeWidth":this.strokeWidth,"data:value":u[ne]});var U={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?U=tt.polarToCartesian(this.centerX,this.centerY,p.globals.radialSize/1.25+p.config.plotOptions.pie.dataLabels.offset,(B+xe/2)%this.fullAngle):"donut"===this.chartType&&(U=tt.polarToCartesian(this.centerX,this.centerY,(p.globals.radialSize+this.donutSize)/2+p.config.plotOptions.pie.dataLabels.offset,(B+xe/2)%this.fullAngle)),de.add(Te);var le=0;if(!this.initialAnim||p.globals.resized||p.globals.dataChanged?this.animBeginArr.push(0):(0==(le=xe/this.fullAngle*p.config.chart.animations.speed)&&(le=1),this.animDur=le+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(Te,this.dynamicAnim&&p.globals.dataChanged?{size:this.sliceSizes[ne],endAngle:K,startAngle:B,prevStartAngle:H,prevEndAngle:J,animateStartingPos:!0,i:ne,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:p.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[ne],endAngle:K,startAngle:B,i:ne,totalItems:l.length-1,animBeginArr:this.animBeginArr,dur:le}),p.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&Te.click(this.pieClicked.bind(this,ne)),void 0!==p.globals.selectedDataPoints[0]&&p.globals.selectedDataPoints[0].indexOf(ne)>-1&&this.pieClicked(ne),p.config.dataLabels.enabled){var we=U.x,Le=U.y,je=100*xe/this.fullAngle+"%";if(0!==xe&&p.config.plotOptions.pie.dataLabels.minAngleToShowLabel<l[ne]){var lt=p.config.dataLabels.formatter;void 0!==lt&&(je=lt(p.globals.seriesPercent[ne][0],{seriesIndex:ne,w:p}));var jt=p.globals.dataLabels.style.colors[ne],qt=w.group({class:"apexcharts-datalabels"}),Di=w.drawText({x:we,y:Le,text:je,textAnchor:"middle",fontSize:p.config.dataLabels.style.fontSize,fontFamily:p.config.dataLabels.style.fontFamily,fontWeight:p.config.dataLabels.style.fontWeight,foreColor:jt});qt.add(Di),p.config.dataLabels.dropShadow.enabled&&y.dropShadow(Di,p.config.dataLabels.dropShadow),Di.node.classList.add("apexcharts-pie-label"),p.config.chart.animations.animate&&!1===p.globals.resized&&(Di.node.classList.add("apexcharts-pie-label-delay"),Di.node.style.animationDelay=p.config.chart.animations.speed/940+"s"),this.sliceLabels.push(qt)}}}return M}},{key:"addListeners",value:function(l,u){var p=new kt(this.ctx);l.node.addEventListener("mouseenter",p.pathMouseEnter.bind(this,l)),l.node.addEventListener("mouseleave",p.pathMouseLeave.bind(this,l)),l.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,l.node,u)),l.node.addEventListener("mousedown",p.pathMouseDown.bind(this,l)),this.donutDataLabels.total.showAlways||(l.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,l.node,u)),l.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,l.node,u)))}},{key:"animatePaths",value:function(l,u){var y=u.endAngle<u.startAngle?this.fullAngle+u.endAngle-u.startAngle:u.endAngle-u.startAngle,w=y,C=u.startAngle,M=u.startAngle;void 0!==u.prevStartAngle&&void 0!==u.prevEndAngle&&(C=u.prevEndAngle,w=u.prevEndAngle<u.prevStartAngle?this.fullAngle+u.prevEndAngle-u.prevStartAngle:u.prevEndAngle-u.prevStartAngle),u.i===this.w.config.series.length-1&&(y+M>this.fullAngle?u.endAngle=u.endAngle-(y+M):y+M<this.fullAngle&&(u.endAngle=u.endAngle+(this.fullAngle-(y+M)))),y===this.fullAngle&&(y=this.fullAngle-.01),this.animateArc(l,C,M,y,w,u)}},{key:"animateArc",value:function(l,u,p,y,w,C){var M,B=this,H=this.w,K=new Ci(this.ctx),J=C.size;(isNaN(u)||isNaN(w))&&(u=p,w=y,C.dur=0);var ne=y,de=p,xe=u<p?this.fullAngle+u-p:u-p;H.globals.dataChanged&&C.shouldSetPrevPaths&&C.prevEndAngle&&(M=B.getPiePath({me:B,startAngle:C.prevStartAngle,angle:C.prevEndAngle<C.prevStartAngle?this.fullAngle+C.prevEndAngle-C.prevStartAngle:C.prevEndAngle-C.prevStartAngle,size:J}),l.attr({d:M})),0!==C.dur?l.animate(C.dur,H.globals.easing,C.animBeginArr[C.i]).afterAll(function(){"pie"!==B.chartType&&"donut"!==B.chartType&&"polarArea"!==B.chartType||this.animate(H.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":B.strokeWidth}),C.i===H.config.series.length-1&&K.animationCompleted(l)}).during(function(Se){ne=xe+(y-xe)*Se,C.animateStartingPos&&(ne=w+(y-w)*Se,de=u-w+(p-(u-w))*Se),M=B.getPiePath({me:B,startAngle:de,angle:ne,size:J}),l.node.setAttribute("data:pathOrig",M),l.attr({d:M})}):(M=B.getPiePath({me:B,startAngle:de,angle:y,size:J}),C.isTrack||(H.globals.animationEnded=!0),l.node.setAttribute("data:pathOrig",M),l.attr({d:M,"stroke-width":B.strokeWidth}))}},{key:"pieClicked",value:function(l){var u,p=this.w,y=this,w=y.sliceSizes[l]+(p.config.plotOptions.pie.expandOnClick?4:0),C=p.globals.dom.Paper.select(".apexcharts-".concat(y.chartType.toLowerCase(),"-slice-").concat(l)).members[0];if("true"!==C.attr("data:pieClicked")){var M=p.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(M,function(J){J.setAttribute("data:pieClicked","false");var ne=J.getAttribute("data:pathOrig");ne&&J.setAttribute("d",ne)}),C.attr("data:pieClicked","true");var B=parseInt(C.attr("data:startAngle"),10),H=parseInt(C.attr("data:angle"),10);u=y.getPiePath({me:y,startAngle:B,angle:H,size:w}),360!==H&&C.plot(u)}else{C.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(C.node,this.donutDataLabels);var K=C.attr("data:pathOrig");C.attr({d:K})}}},{key:"getChangedPath",value:function(l,u){var p="";return this.dynamicAnim&&this.w.globals.dataChanged&&(p=this.getPiePath({me:this,startAngle:l,angle:u-l,size:this.size})),p}},{key:"getPiePath",value:function(l){var u,p=l.me,y=l.startAngle,w=l.angle,C=l.size,M=new kt(this.ctx),B=y,H=Math.PI*(B-90)/180,K=w+y;Math.ceil(K)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(K=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(K)>this.fullAngle&&(K-=this.fullAngle);var J=Math.PI*(K-90)/180,ne=p.centerX+C*Math.cos(H),de=p.centerY+C*Math.sin(H),xe=p.centerX+C*Math.cos(J),Se=p.centerY+C*Math.sin(J),Pe=tt.polarToCartesian(p.centerX,p.centerY,p.donutSize,K),Te=tt.polarToCartesian(p.centerX,p.centerY,p.donutSize,B),Ne=w>180?1:0,U=["M",ne,de,"A",C,C,0,Ne,1,xe,Se];return u="donut"===p.chartType?[].concat(U,["L",Pe.x,Pe.y,"A",p.donutSize,p.donutSize,0,Ne,0,Te.x,Te.y,"L",ne,de,"z"]).join(" "):"pie"===p.chartType||"polarArea"===p.chartType?[].concat(U,["L",p.centerX,p.centerY,"L",ne,de]).join(" "):[].concat(U).join(" "),M.roundPathCorners(u,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(l){var u=this.w,p=new Un(this.ctx),y=new kt(this.ctx),w=new Sn(this.ctx),C=y.group(),M=y.group(),B=p.niceScale(0,Math.ceil(this.maxY),0),H=B.result.reverse(),K=B.result.length;this.maxY=B.niceMax;for(var J=u.globals.radialSize,ne=J/(K-1),de=0;de<K-1;de++){var xe=y.drawCircle(J);if(xe.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":u.config.plotOptions.polarArea.rings.strokeWidth,stroke:u.config.plotOptions.polarArea.rings.strokeColor}),u.config.yaxis[0].show){var Se=w.drawYAxisTexts(this.centerX,this.centerY-J+parseInt(u.config.yaxis[0].labels.style.fontSize,10)/2,de,H[de]);M.add(Se)}C.add(xe),J-=ne}this.drawSpokes(l),l.add(C),l.add(M)}},{key:"renderInnerDataLabels",value:function(l,u){var p=this.w,y=new kt(this.ctx),w=y.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(u.translateX?u.translateX:0,", ").concat(u.translateY?u.translateY:0,") scale(").concat(p.config.plotOptions.pie.customScale,")")}),C=l.total.show;w.node.style.opacity=u.opacity;var M,B,H=u.centerX,K=u.centerY;M=void 0===l.name.color?p.globals.colors[0]:l.name.color;var J=l.name.fontSize,ne=l.name.fontFamily,de=l.name.fontWeight;B=void 0===l.value.color?p.config.chart.foreColor:l.value.color;var xe=l.value.formatter,Se="",Pe="";if(C?(M=l.total.color,J=l.total.fontSize,ne=l.total.fontFamily,de=l.total.fontWeight,Pe=l.total.label,Se=l.total.formatter(p)):1===p.globals.series.length&&(Se=xe(p.globals.series[0],p),Pe=p.globals.seriesNames[0]),Pe&&(Pe=l.name.formatter(Pe,l.total.show,p)),l.name.show){var Te=y.drawText({x:H,y:K+parseFloat(l.name.offsetY),text:Pe,textAnchor:"middle",foreColor:M,fontSize:J,fontWeight:de,fontFamily:ne});Te.node.classList.add("apexcharts-datalabel-label"),w.add(Te)}if(l.value.show){var Ne=l.name.show?parseFloat(l.value.offsetY)+16:l.value.offsetY,U=y.drawText({x:H,y:K+Ne,text:Se,textAnchor:"middle",foreColor:B,fontWeight:l.value.fontWeight,fontSize:l.value.fontSize,fontFamily:l.value.fontFamily});U.node.classList.add("apexcharts-datalabel-value"),w.add(U)}return w}},{key:"printInnerLabels",value:function(l,u,p,y){var w,C=this.w;y?w=void 0===l.name.color?C.globals.colors[parseInt(y.parentNode.getAttribute("rel"),10)-1]:l.name.color:C.globals.series.length>1&&l.total.show&&(w=l.total.color);var M=C.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),B=C.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");p=(0,l.value.formatter)(p,C),y||"function"!=typeof l.total.formatter||(p=l.total.formatter(C)),u=l.name.formatter(u,u===l.total.label,C),null!==M&&(M.textContent=u),null!==B&&(B.textContent=p),null!==M&&(M.style.fill=w)}},{key:"printDataLabelsInner",value:function(l,u){var p=this.w,y=l.getAttribute("data:value"),w=p.globals.seriesNames[parseInt(l.parentNode.getAttribute("rel"),10)-1];p.globals.series.length>1&&this.printInnerLabels(u,w,y,l);var C=p.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==C&&(C.style.opacity=1)}},{key:"drawSpokes",value:function(l){var u=this,p=this.w,y=new kt(this.ctx),w=p.config.plotOptions.polarArea.spokes;if(0!==w.strokeWidth){for(var C=[],M=360/p.globals.series.length,B=0;B<p.globals.series.length;B++)C.push(tt.polarToCartesian(this.centerX,this.centerY,p.globals.radialSize,p.config.plotOptions.pie.startAngle+M*B));C.forEach(function(H,K){var J=y.drawLine(H.x,H.y,u.centerX,u.centerY,Array.isArray(w.connectorColors)?w.connectorColors[K]:w.connectorColors);l.add(J)})}}},{key:"revertDataLabelsInner",value:function(l,u,p){var y=this,w=this.w,C=w.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),M=!1,B=w.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),H=function(ne){var de=ne.makeSliceOut,xe=ne.printLabel;Array.prototype.forEach.call(B,function(Se){"true"===Se.getAttribute("data:pieClicked")&&(de&&(M=!0),xe&&y.printDataLabelsInner(Se,u))})};if(H({makeSliceOut:!0,printLabel:!1}),u.total.show&&w.globals.series.length>1)M&&!u.total.showAlways?H({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(u,u.total.label,u.total.formatter(w));else if(H({makeSliceOut:!1,printLabel:!0}),!M)if(w.globals.selectedDataPoints.length&&w.globals.series.length>1)if(w.globals.selectedDataPoints[0].length>0){var K=w.globals.selectedDataPoints[0],J=w.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(K));this.printDataLabelsInner(J,u)}else C&&w.globals.selectedDataPoints.length&&0===w.globals.selectedDataPoints[0].length&&(C.style.opacity=0);else C&&w.globals.series.length>1&&(C.style.opacity=0)}}]),ge}(),Hi=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var u=this.w;this.graphics=new kt(this.ctx),this.lineColorArr=void 0!==u.globals.stroke.colors?u.globals.stroke.colors:u.globals.colors,this.defaultSize=u.globals.svgHeight<u.globals.svgWidth?u.globals.gridHeight+1.5*u.globals.goldenPadding:u.globals.gridWidth,this.isLog=u.config.yaxis[0].logarithmic,this.coreUtils=new Oi(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(u.globals.maxY,0):u.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):u.globals.minY,this.polygons=u.config.plotOptions.radar.polygons,this.strokeWidth=u.config.stroke.show?u.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-u.config.chart.dropShadow.blur,u.config.xaxis.labels.show&&(this.size=this.size-u.globals.xAxisLabelsWidth/1.75),void 0!==u.config.plotOptions.radar.size&&(this.size=u.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Be(ge,[{key:"draw",value:function(l){var u=this,p=this.w,y=new kn(this.ctx),w=[],C=new Xr(this.ctx);l.length&&(this.dataPointsLen=l[p.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var K=p.globals.gridHeight/2+p.config.plotOptions.radar.offsetY,J=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(p.globals.gridWidth/2+p.config.plotOptions.radar.offsetX||0,", ").concat(K||0,")")}),ne=[],de=null,xe=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),l.forEach(function(Pe,Te){var Ne=Pe.length===p.globals.dataPoints,U=u.graphics.group().attr({class:"apexcharts-series","data:longestSeries":Ne,seriesName:tt.escapeString(p.globals.seriesNames[Te]),rel:Te+1,"data:realIndex":Te});u.dataRadiusOfPercent[Te]=[],u.dataRadius[Te]=[],u.angleArr[Te]=[],Pe.forEach(function(cn,Qn){var gr=Math.abs(u.maxValue-u.minValue);cn+=Math.abs(u.minValue),u.isLog&&(cn=u.coreUtils.getLogVal(cn,0)),u.dataRadiusOfPercent[Te][Qn]=cn/gr,u.dataRadius[Te][Qn]=u.dataRadiusOfPercent[Te][Qn]*u.size,u.angleArr[Te][Qn]=Qn*u.disAngle}),ne=u.getDataPointsPos(u.dataRadius[Te],u.angleArr[Te]);var le=u.createPaths(ne,{x:0,y:0});de=u.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),xe=u.graphics.group({class:"apexcharts-datalabels","data:realIndex":Te}),p.globals.delayedElements.push({el:de.node,index:Te});var we={i:Te,realIndex:Te,animationDelay:Te,initialSpeed:p.config.chart.animations.speed,dataChangeSpeed:p.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:p.globals.stroke.colors[Te],strokeLineCap:p.config.stroke.lineCap},Le=null;p.globals.previousPaths.length>0&&(Le=u.getPreviousPath(Te));for(var je=0;je<le.linePathsTo.length;je++){var lt=u.graphics.renderPaths(Ze(Ze({},we),{},{pathFrom:null===Le?le.linePathsFrom[je]:Le,pathTo:le.linePathsTo[je],strokeWidth:Array.isArray(u.strokeWidth)?u.strokeWidth[Te]:u.strokeWidth,fill:"none",drawShadow:!1}));U.add(lt);var jt=y.fillPath({seriesNumber:Te}),qt=u.graphics.renderPaths(Ze(Ze({},we),{},{pathFrom:null===Le?le.areaPathsFrom[je]:Le,pathTo:le.areaPathsTo[je],strokeWidth:0,fill:jt,drawShadow:!1}));p.config.chart.dropShadow.enabled&&new Mi(u.ctx).dropShadow(qt,Object.assign({},p.config.chart.dropShadow,{noUserSpaceOnUse:!0}),Te),U.add(qt)}Pe.forEach(function(cn,Qn){var gr=new Jn(u.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:Te,dataPointIndex:Qn}),Zr=u.graphics.drawMarker(ne[Qn].x,ne[Qn].y,gr);Zr.attr("rel",Qn),Zr.attr("j",Qn),Zr.attr("index",Te),Zr.node.setAttribute("default-marker-size",gr.pSize);var hs=u.graphics.group({class:"apexcharts-series-markers"});hs&&hs.add(Zr),de.add(hs),U.add(de);var vs=p.config.dataLabels;if(vs.enabled){var _s=vs.formatter(p.globals.series[Te][Qn],{seriesIndex:Te,dataPointIndex:Qn,w:p});C.plotDataLabelsText({x:ne[Qn].x,y:ne[Qn].y,text:_s,textAnchor:"middle",i:Te,j:Te,parent:xe,offsetCorrection:!1,dataLabelsConfig:Ze({},vs)})}U.add(xe)}),w.push(U)}),this.drawPolygons({parent:J}),p.config.xaxis.labels.show){var Se=this.drawXAxisTexts();J.add(Se)}return w.forEach(function(Pe){J.add(Pe)}),J.add(this.yaxisLabels),J}},{key:"drawPolygons",value:function(l){for(var u=this,p=this.w,y=l.parent,w=new Sn(this.ctx),C=p.globals.yAxisScale[0].result.reverse(),M=C.length,B=[],H=this.size/(M-1),K=0;K<M;K++)B[K]=H*K;B.reverse();var J=[],ne=[];B.forEach(function(de,xe){var Se=tt.getPolygonPos(de,u.dataPointsLen),Pe="";Se.forEach(function(Te,Ne){if(0===xe){var U=u.graphics.drawLine(Te.x,Te.y,0,0,Array.isArray(u.polygons.connectorColors)?u.polygons.connectorColors[Ne]:u.polygons.connectorColors);ne.push(U)}0===Ne&&u.yaxisLabelsTextsPos.push({x:Te.x,y:Te.y}),Pe+=Te.x+","+Te.y+" "}),J.push(Pe)}),J.forEach(function(de,xe){var Se=u.polygons.strokeColors,Pe=u.polygons.strokeWidth,Te=u.graphics.drawPolygon(de,Array.isArray(Se)?Se[xe]:Se,Array.isArray(Pe)?Pe[xe]:Pe,p.globals.radarPolygons.fill.colors[xe]);y.add(Te)}),ne.forEach(function(de){y.add(de)}),p.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(de,xe){var Se=w.drawYAxisTexts(de.x,de.y,xe,C[xe]);u.yaxisLabels.add(Se)})}},{key:"drawXAxisTexts",value:function(){var l=this,u=this.w,p=u.config.xaxis.labels,y=this.graphics.group({class:"apexcharts-xaxis"}),w=tt.getPolygonPos(this.size,this.dataPointsLen);return u.globals.labels.forEach(function(C,M){var B=u.config.xaxis.labels.formatter,H=new Xr(l.ctx);if(w[M]){var K=l.getTextPos(w[M],l.size),J=B(C,{seriesIndex:-1,dataPointIndex:M,w:u});H.plotDataLabelsText({x:K.newX,y:K.newY,text:J,textAnchor:K.textAnchor,i:M,j:M,parent:y,color:Array.isArray(p.style.colors)&&p.style.colors[M]?p.style.colors[M]:"#a8a8a8",dataLabelsConfig:Ze({textAnchor:K.textAnchor,dropShadow:{enabled:!1}},p),offsetCorrection:!1})}}),y}},{key:"createPaths",value:function(l,u){var p=this,y=[],w=[],C=[],M=[];if(l.length){w=[this.graphics.move(u.x,u.y)],M=[this.graphics.move(u.x,u.y)];var B=this.graphics.move(l[0].x,l[0].y),H=this.graphics.move(l[0].x,l[0].y);l.forEach(function(K,J){B+=p.graphics.line(K.x,K.y),H+=p.graphics.line(K.x,K.y),J===l.length-1&&(B+="Z",H+="Z")}),y.push(B),C.push(H)}return{linePathsFrom:w,linePathsTo:y,areaPathsFrom:M,areaPathsTo:C}}},{key:"getTextPos",value:function(l,u){var p="middle",y=l.x,w=l.y;return Math.abs(l.x)>=10?l.x>0?(p="start",y+=10):l.x<0&&(p="end",y-=10):p="middle",Math.abs(l.y)>=u-10&&(l.y<0?w-=10:l.y>0&&(w+=10)),{textAnchor:p,newX:y,newY:w}}},{key:"getPreviousPath",value:function(l){for(var u=this.w,p=null,y=0;y<u.globals.previousPaths.length;y++){var w=u.globals.previousPaths[y];w.paths.length>0&&parseInt(w.realIndex,10)===parseInt(l,10)&&void 0!==u.globals.previousPaths[y].paths[0]&&(p=u.globals.previousPaths[y].paths[0].d)}return p}},{key:"getDataPointsPos",value:function(l,u){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;l=l||[],u=u||[];for(var y=[],w=0;w<p;w++){var C={};C.x=l[w]*Math.sin(u[w]),C.y=-l[w]*Math.cos(u[w]),y.push(C)}return y}}]),ge}(),ar=function(ge){$e(u,Rn);var l=gt(u);function u(p){var y;j(this,u),(y=l.call(this,p)).ctx=p,y.w=p.w,y.animBeginArr=[0],y.animDur=0;var w=y.w;return y.startAngle=w.config.plotOptions.radialBar.startAngle,y.endAngle=w.config.plotOptions.radialBar.endAngle,y.totalAngle=Math.abs(w.config.plotOptions.radialBar.endAngle-w.config.plotOptions.radialBar.startAngle),y.trackStartAngle=w.config.plotOptions.radialBar.track.startAngle,y.trackEndAngle=w.config.plotOptions.radialBar.track.endAngle,y.barLabels=y.w.config.plotOptions.radialBar.barLabels,y.donutDataLabels=y.w.config.plotOptions.radialBar.dataLabels,y.radialDataLabels=y.donutDataLabels,y.trackStartAngle||(y.trackStartAngle=y.startAngle),y.trackEndAngle||(y.trackEndAngle=y.endAngle),360===y.endAngle&&(y.endAngle=359.99),y.margin=parseInt(w.config.plotOptions.radialBar.track.margin,10),y.onBarLabelClick=y.onBarLabelClick.bind(_t(y)),y}return Be(u,[{key:"draw",value:function(p){var y=this.w,w=new kt(this.ctx),C=w.group({class:"apexcharts-radialbar"});if(y.globals.noData)return C;var M=w.group(),B=this.defaultSize/2,H=y.globals.gridWidth/2,K=this.defaultSize/2.05;y.config.chart.sparkline.enabled||(K=K-y.config.stroke.width-y.config.chart.dropShadow.blur);var J=y.globals.fill.colors;if(y.config.plotOptions.radialBar.track.show){var ne=this.drawTracks({size:K,centerX:H,centerY:B,colorArr:J,series:p});M.add(ne)}var de=this.drawArcs({size:K,centerX:H,centerY:B,colorArr:J,series:p}),xe=360;y.config.plotOptions.radialBar.startAngle<0&&(xe=this.totalAngle);var Se=(360-xe)/360;if(y.globals.radialSize=K-K*Se,this.radialDataLabels.value.show){var Pe=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);y.globals.radialSize+=Pe*Se}return M.add(de.g),"front"===y.config.plotOptions.radialBar.hollow.position&&(de.g.add(de.elHollow),de.dataLabels&&de.g.add(de.dataLabels)),C.add(M),C}},{key:"drawTracks",value:function(p){var y=this.w,w=new kt(this.ctx),C=w.group({class:"apexcharts-tracks"}),M=new Mi(this.ctx),B=new kn(this.ctx),H=this.getStrokeWidth(p);p.size=p.size-H/2;for(var K=0;K<p.series.length;K++){var J=w.group({class:"apexcharts-radialbar-track apexcharts-track"});C.add(J),J.attr({rel:K+1}),p.size=p.size-H-this.margin;var ne=y.config.plotOptions.radialBar.track,de=B.fillPath({seriesNumber:0,size:p.size,fillColors:Array.isArray(ne.background)?ne.background[K]:ne.background,solid:!0}),xe=this.trackStartAngle,Se=this.trackEndAngle;Math.abs(Se)+Math.abs(xe)>=360&&(Se=360-Math.abs(this.startAngle)-.1);var Pe=w.drawPath({d:"",stroke:de,strokeWidth:H*parseInt(ne.strokeWidth,10)/100,fill:"none",strokeOpacity:ne.opacity,classes:"apexcharts-radialbar-area"});ne.dropShadow.enabled&&M.dropShadow(Pe,ne.dropShadow),J.add(Pe),Pe.attr("id","apexcharts-radialbarTrack-"+K),this.animatePaths(Pe,{centerX:p.centerX,centerY:p.centerY,endAngle:Se,startAngle:xe,size:p.size,i:K,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:y.globals.easing})}return C}},{key:"drawArcs",value:function(p){var y=this.w,w=new kt(this.ctx),C=new kn(this.ctx),M=new Mi(this.ctx),B=w.group(),H=this.getStrokeWidth(p);p.size=p.size-H/2;var K=y.config.plotOptions.radialBar.hollow.background,J=p.size-H*p.series.length-this.margin*p.series.length-H*parseInt(y.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,ne=J-y.config.plotOptions.radialBar.hollow.margin;void 0!==y.config.plotOptions.radialBar.hollow.image&&(K=this.drawHollowImage(p,B,J,K));var de=this.drawHollow({size:ne,centerX:p.centerX,centerY:p.centerY,fill:K||"transparent"});y.config.plotOptions.radialBar.hollow.dropShadow.enabled&&M.dropShadow(de,y.config.plotOptions.radialBar.hollow.dropShadow);var Se=1;!this.radialDataLabels.total.show&&y.globals.series.length>1&&(Se=0);var Pe=null;this.radialDataLabels.show&&(Pe=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:J,centerX:p.centerX,centerY:p.centerY,opacity:Se})),"back"===y.config.plotOptions.radialBar.hollow.position&&(B.add(de),Pe&&B.add(Pe));var Te=!1;y.config.plotOptions.radialBar.inverseOrder&&(Te=!0);for(var Ne=Te?p.series.length-1:0;Te?Ne>=0:Ne<p.series.length;Te?Ne--:Ne++){var U=w.group({class:"apexcharts-series apexcharts-radial-series",seriesName:tt.escapeString(y.globals.seriesNames[Ne])});B.add(U),U.attr({rel:Ne+1,"data:realIndex":Ne}),this.ctx.series.addCollapsedClassToSeries(U,Ne),p.size=p.size-H-this.margin;var le=C.fillPath({seriesNumber:Ne,size:p.size,value:p.series[Ne]}),we=this.startAngle,Le=void 0,je=tt.negToZero(p.series[Ne]>100?100:p.series[Ne])/100,lt=Math.round(this.totalAngle*je)+this.startAngle,jt=void 0;y.globals.dataChanged&&(Le=this.startAngle,jt=Math.round(this.totalAngle*tt.negToZero(y.globals.previousPaths[Ne])/100)+Le),Math.abs(lt)+Math.abs(we)>=360&&(lt-=.01),Math.abs(jt)+Math.abs(Le)>=360&&(jt-=.01);var qt=lt-we,Di=Array.isArray(y.config.stroke.dashArray)?y.config.stroke.dashArray[Ne]:y.config.stroke.dashArray,Qi=w.drawPath({d:"",stroke:le,strokeWidth:H,fill:"none",fillOpacity:y.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+Ne,strokeDashArray:Di});if(kt.setAttrs(Qi.node,{"data:angle":qt,"data:value":p.series[Ne]}),y.config.chart.dropShadow.enabled&&M.dropShadow(Qi,y.config.chart.dropShadow,Ne),M.setSelectionFilter(Qi,0,Ne),this.addListeners(Qi,this.radialDataLabels),U.add(Qi),Qi.attr({index:0,j:Ne}),this.barLabels.enabled){var Qn=tt.polarToCartesian(p.centerX,p.centerY,p.size,we),gr=this.barLabels.formatter(y.globals.seriesNames[Ne],{seriesIndex:Ne,w:y}),Zr=["apexcharts-radialbar-label"];this.barLabels.onClick||Zr.push("apexcharts-no-click");var hs=this.barLabels.useSeriesColors?y.globals.colors[Ne]:y.config.chart.foreColor;hs||(hs=y.config.chart.foreColor);var vs=Qn.x-this.barLabels.margin,_s=Qn.y,Js=w.drawText({x:vs,y:_s,text:gr,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:hs,cssClass:Zr.join(" ")});Js.on("click",this.onBarLabelClick),Js.attr({rel:Ne+1}),0!==we&&Js.attr({"transform-origin":"".concat(vs," ").concat(_s),transform:"rotate(".concat(we," 0 0)")}),U.add(Js)}var oa=0;!this.initialAnim||y.globals.resized||y.globals.dataChanged||(oa=y.config.chart.animations.speed),y.globals.dataChanged&&(oa=y.config.chart.animations.dynamicAnimation.speed),this.animDur=oa/(1.2*p.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(Qi,{centerX:p.centerX,centerY:p.centerY,endAngle:lt,startAngle:we,prevEndAngle:jt,prevStartAngle:Le,size:p.size,i:Ne,totalItems:2,animBeginArr:this.animBeginArr,dur:oa,shouldSetPrevPaths:!0,easing:y.globals.easing})}return{g:B,elHollow:de,dataLabels:Pe}}},{key:"drawHollow",value:function(p){var y=new kt(this.ctx).drawCircle(2*p.size);return y.attr({class:"apexcharts-radialbar-hollow",cx:p.centerX,cy:p.centerY,r:p.size,fill:p.fill}),y}},{key:"drawHollowImage",value:function(p,y,w,C){var M=this.w,B=new kn(this.ctx),H=tt.randomId(),K=M.config.plotOptions.radialBar.hollow.image;if(M.config.plotOptions.radialBar.hollow.imageClipped)B.clippedImgArea({width:w,height:w,image:K,patternID:"pattern".concat(M.globals.cuid).concat(H)}),C="url(#pattern".concat(M.globals.cuid).concat(H,")");else{var J=M.config.plotOptions.radialBar.hollow.imageWidth,ne=M.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===J&&void 0===ne){var de=M.globals.dom.Paper.image(K).loaded(function(Se){this.move(p.centerX-Se.width/2+M.config.plotOptions.radialBar.hollow.imageOffsetX,p.centerY-Se.height/2+M.config.plotOptions.radialBar.hollow.imageOffsetY)});y.add(de)}else{var xe=M.globals.dom.Paper.image(K).loaded(function(Se){this.move(p.centerX-J/2+M.config.plotOptions.radialBar.hollow.imageOffsetX,p.centerY-ne/2+M.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(J,ne)});y.add(xe)}}return C}},{key:"getStrokeWidth",value:function(p){return p.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(p.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(p){var y=parseInt(p.target.getAttribute("rel"),10)-1,w=this.barLabels.onClick,C=this.w;w&&w(C.globals.seriesNames[y],{w:C,seriesIndex:y})}}]),u}(),Ht=function(ge){$e(u,si);var l=gt(u);function u(){return j(this,u),l.apply(this,arguments)}return Be(u,[{key:"draw",value:function(p,y){var w=this.w,C=new kt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=p,this.seriesRangeStart=w.globals.seriesRangeStart,this.seriesRangeEnd=w.globals.seriesRangeEnd,this.barHelpers.initVariables(p);for(var M=C.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),B=0;B<p.length;B++){var H,K,J,ne,de=void 0,xe=void 0,Se=w.globals.comboCharts?y[B]:B,Pe=C.group({class:"apexcharts-series",seriesName:tt.escapeString(w.globals.seriesNames[Se]),rel:B+1,"data:realIndex":Se});this.ctx.series.addCollapsedClassToSeries(Pe,Se),p[B].length>0&&(this.visibleI=this.visibleI+1);var Te=0,Ne=0;this.yRatio.length>1&&(this.yaxisIndex=Se);var U=this.barHelpers.initialPositions();xe=U.y,ne=U.zeroW,de=U.x,Ne=U.barWidth,Te=U.barHeight,H=U.xDivision,K=U.yDivision,J=U.zeroH;for(var le=C.group({class:"apexcharts-datalabels","data:realIndex":Se}),we=C.group({class:"apexcharts-rangebar-goals-markers"}),Le=0;Le<w.globals.dataPoints;Le++){var je,lt=this.barHelpers.getStrokeWidth(B,Le,Se),jt=this.seriesRangeStart[B][Le],qt=this.seriesRangeEnd[B][Le],Di=null,Qi=null,cn=null,Qn={x:de,y:xe,strokeWidth:lt,elSeries:Pe},gr=this.seriesLen;if(w.config.plotOptions.bar.rangeBarGroupRows&&(gr=1),void 0===w.config.series[B].data[Le])break;if(this.isHorizontal){if(cn=xe+Te*this.visibleI,w.config.series[B].data[Le].x){var hs=this.detectOverlappingBars({i:B,j:Le,barYPosition:cn,srty:(K-Te*gr)/2,barHeight:Te,yDivision:K,initPositions:U});Te=hs.barHeight,cn=hs.barYPosition}Ne=(Di=this.drawRangeBarPaths(Ze({indexes:{i:B,j:Le,realIndex:Se},barHeight:Te,barYPosition:cn,zeroW:ne,yDivision:K,y1:jt,y2:qt},Qn))).barWidth}else{if(w.globals.isXNumeric&&(de=(w.globals.seriesX[B][Le]-w.globals.minX)/this.xRatio-Ne/2),Qi=de+Ne*this.visibleI,w.config.series[B].data[Le].x){var _s=this.detectOverlappingBars({i:B,j:Le,barXPosition:Qi,srtx:(H-Ne*gr)/2,barWidth:Ne,xDivision:H,initPositions:U});Ne=_s.barWidth,Qi=_s.barXPosition}Te=(Di=this.drawRangeColumnPaths(Ze({indexes:{i:B,j:Le,realIndex:Se},barWidth:Ne,barXPosition:Qi,zeroH:J,xDivision:H},Qn))).barHeight}var Js=this.barHelpers.drawGoalLine({barXPosition:Di.barXPosition,barYPosition:cn,goalX:Di.goalX,goalY:Di.goalY,barHeight:Te,barWidth:Ne});Js&&we.add(Js),xe=Di.y,de=Di.x;var oa=this.barHelpers.getPathFillColor(p,B,Le,Se);this.renderSeries((Re(je={realIndex:Se,pathFill:oa,lineFill:w.globals.stroke.colors[Se],j:Le,i:B,x:de,y:xe,y1:jt,y2:qt,pathFrom:Di.pathFrom,pathTo:Di.pathTo,strokeWidth:lt,elSeries:Pe,series:p,barHeight:Te,barWidth:Ne,barXPosition:Qi,barYPosition:cn},"barWidth",Ne),Re(je,"elDataLabelsWrap",le),Re(je,"elGoalsMarkers",we),Re(je,"visibleSeries",this.visibleI),Re(je,"type","rangebar"),je))}M.add(Pe)}return M}},{key:"detectOverlappingBars",value:function(p){var y=p.i,w=p.j,C=p.barYPosition,M=p.barXPosition,B=p.srty,H=p.srtx,K=p.barHeight,J=p.barWidth,ne=p.yDivision,de=p.xDivision,xe=p.initPositions,Se=this.w,Pe=[],Te=Se.config.series[y].data[w].rangeName,Ne=Se.config.series[y].data[w].x,U=Array.isArray(Ne)?Ne.join(" "):Ne,le=Se.globals.labels.map(function(Le){return Array.isArray(Le)?Le.join(" "):Le}).indexOf(U),we=Se.globals.seriesRange[y].findIndex(function(Le){return Le.x===U&&Le.overlaps.length>0});return this.isHorizontal?(C=Se.config.plotOptions.bar.rangeBarGroupRows?B+ne*le:B+K*this.visibleI+ne*le,we>-1&&!Se.config.plotOptions.bar.rangeBarOverlap&&(Pe=Se.globals.seriesRange[y][we].overlaps).indexOf(Te)>-1&&(C=(K=xe.barHeight/Pe.length)*this.visibleI+ne*(100-parseInt(this.barOptions.barHeight,10))/100/2+K*(this.visibleI+Pe.indexOf(Te))+ne*le)):(le>-1&&(M=Se.config.plotOptions.bar.rangeBarGroupRows?H+de*le:H+J*this.visibleI+de*le),we>-1&&!Se.config.plotOptions.bar.rangeBarOverlap&&(Pe=Se.globals.seriesRange[y][we].overlaps).indexOf(Te)>-1&&(M=(J=xe.barWidth/Pe.length)*this.visibleI+de*(100-parseInt(this.barOptions.barWidth,10))/100/2+J*(this.visibleI+Pe.indexOf(Te))+de*le)),{barYPosition:C,barXPosition:M,barHeight:K,barWidth:J}}},{key:"drawRangeColumnPaths",value:function(p){var y=p.indexes,w=p.x,C=p.xDivision,M=p.barWidth,B=p.barXPosition,H=p.zeroH,K=this.w,J=y.i,ne=y.j,de=this.yRatio[this.yaxisIndex],xe=y.realIndex,Se=this.getRangeValue(xe,ne),Pe=Math.min(Se.start,Se.end),Te=Math.max(Se.start,Se.end);null==this.series[J][ne]?Pe=H:(Pe=H-Pe/de,Te=H-Te/de);var Ne=Math.abs(Te-Pe),U=this.barHelpers.getColumnPaths({barXPosition:B,barWidth:M,y1:Pe,y2:Te,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:y.realIndex,i:xe,j:ne,w:K});if(K.globals.isXNumeric){var le=this.getBarXForNumericXAxis({x:w,j:ne,realIndex:xe,barWidth:M});w=le.x,B=le.barXPosition}else w+=C;return{pathTo:U.pathTo,pathFrom:U.pathFrom,barHeight:Ne,x:w,y:Te,goalY:this.barHelpers.getGoalValues("y",null,H,J,ne),barXPosition:B}}},{key:"drawRangeBarPaths",value:function(p){var y=p.indexes,w=p.y,B=p.yDivision,H=p.barHeight,K=p.barYPosition,J=p.zeroW,ne=this.w,de=J+p.y1/this.invertedYRatio,xe=J+p.y2/this.invertedYRatio,Se=Math.abs(xe-de),Pe=this.barHelpers.getBarpaths({barYPosition:K,barHeight:H,x1:de,x2:xe,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:y.realIndex,realIndex:y.realIndex,j:y.j,w:ne});return ne.globals.isXNumeric||(w+=B),{pathTo:Pe.pathTo,pathFrom:Pe.pathFrom,barWidth:Se,x:xe,goalX:this.barHelpers.getGoalValues("x",J,null,y.realIndex,y.j),y:w}}},{key:"getRangeValue",value:function(p,y){var w=this.w;return{start:w.globals.seriesRangeStart[p][y],end:w.globals.seriesRangeEnd[p][y]}}}]),u}(),Vt=function(){function ge(l){j(this,ge),this.w=l.w,this.lineCtx=l}return Be(ge,[{key:"sameValueSeriesFix",value:function(l,u){var p=this.w;if(("gradient"===p.config.fill.type||"gradient"===p.config.fill.type[l])&&new Oi(this.lineCtx.ctx,p).seriesHaveSameValues(l)){var y=u[l].slice();y[y.length-1]=y[y.length-1]+1e-6,u[l]=y}return u}},{key:"calculatePoints",value:function(l){var u=l.series,y=l.x,w=l.y,C=l.i,M=l.j,B=l.prevY,H=this.w,K=[],J=[];if(0===M){var ne=this.lineCtx.categoryAxisCorrection+H.config.markers.offsetX;H.globals.isXNumeric&&(ne=(H.globals.seriesX[l.realIndex][0]-H.globals.minX)/this.lineCtx.xRatio+H.config.markers.offsetX),K.push(ne),J.push(tt.isNumber(u[C][0])?B+H.config.markers.offsetY:null),K.push(y+H.config.markers.offsetX),J.push(tt.isNumber(u[C][M+1])?w+H.config.markers.offsetY:null)}else K.push(y+H.config.markers.offsetX),J.push(tt.isNumber(u[C][M+1])?w+H.config.markers.offsetY:null);return{x:K,y:J}}},{key:"checkPreviousPaths",value:function(l){for(var u=l.pathFromLine,p=l.pathFromArea,y=l.realIndex,w=this.w,C=0;C<w.globals.previousPaths.length;C++){var M=w.globals.previousPaths[C];("line"===M.type||"area"===M.type)&&M.paths.length>0&&parseInt(M.realIndex,10)===parseInt(y,10)&&("line"===M.type?(this.lineCtx.appendPathFrom=!1,u=w.globals.previousPaths[C].paths[0].d):"area"===M.type&&(this.lineCtx.appendPathFrom=!1,p=w.globals.previousPaths[C].paths[0].d,w.config.stroke.show&&w.globals.previousPaths[C].paths[1]&&(u=w.globals.previousPaths[C].paths[1].d)))}return{pathFromLine:u,pathFromArea:p}}},{key:"determineFirstPrevY",value:function(l){var u,p,y=l.i,w=l.series,C=l.prevY,M=l.lineYPosition,B=this.w,H=B.config.chart.stacked&&!B.globals.comboCharts||B.config.chart.stacked&&B.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(u=this.w.config.series[y])||void 0===u?void 0:u.type));if(void 0!==(null===(p=w[y])||void 0===p?void 0:p[0]))C=(M=H&&y>0?this.lineCtx.prevSeriesY[y-1][0]:this.lineCtx.zeroY)-w[y][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?w[y][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(H&&y>0&&void 0===w[y][0])for(var K=y-1;K>=0;K--)if(null!=w[K][0]){C=M=this.lineCtx.prevSeriesY[K][0];break}return{prevY:C,lineYPosition:M}}}]),ge}(),ot=function(ge){for(var l="",u=0;u<ge.length;u++){var p=ge[u],y=p.length;y>4?(l+="C".concat(p[0],", ").concat(p[1]),l+=", ".concat(p[2],", ").concat(p[3]),l+=", ".concat(p[4],", ").concat(p[5])):y>2&&(l+="S".concat(p[0],", ").concat(p[1]),l+=", ".concat(p[2],", ").concat(p[3]))}return l},Xe=function(ge){var l=function(ge){for(var l,u,p,y,w=function(K){for(var J=[],ne=K[0],de=K[1],xe=J[0]=Qe(ne,de),Se=1,Pe=K.length-1;Se<Pe;Se++)J[Se]=.5*(xe+(xe=Qe(ne=de,de=K[Se+1])));return J[Se]=xe,J}(ge),C=ge.length-1,M=[],B=0;B<C;B++)p=Qe(ge[B],ge[B+1]),Math.abs(p)<1e-6?w[B]=w[B+1]=0:(y=(l=w[B]/p)*l+(u=w[B+1]/p)*u)>9&&(y=3*p/Math.sqrt(y),w[B]=y*l,w[B+1]=y*u);for(var H=0;H<=C;H++)y=(ge[Math.min(C,H+1)][0]-ge[Math.max(0,H-1)][0])/(6*(1+w[H]*w[H])),M.push([y||0,w[H]*y||0]);return M}(ge),u=ge[1],p=ge[0],y=[],w=l[1],C=l[0];y.push(p,[p[0]+C[0],p[1]+C[1],u[0]-w[0],u[1]-w[1],u[0],u[1]]);for(var M=2,B=l.length;M<B;M++){var H=ge[M],K=l[M];y.push([H[0]-K[0],H[1]-K[1],H[0],H[1]])}return y};function Qe(ge,l){return(l[1]-ge[1])/(l[0]-ge[0])}var Rt=function(){function ge(l,u,p){j(this,ge),this.ctx=l,this.w=l.w,this.xyRatios=u,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||p,this.scatter=new ts(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Vt(this),this.markers=new Jn(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Be(ge,[{key:"draw",value:function(l,u,p,y){var w,C=this.w,M=new kt(this.ctx),B=C.globals.comboCharts?u:C.config.chart.type,H=M.group({class:"apexcharts-".concat(B,"-series apexcharts-plot-series")}),K=new Oi(this.ctx,C);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,l=K.getLogSeries(l),this.yRatio=K.getLogYRatios(this.yRatio);for(var J=[],ne=0;ne<l.length;ne++){l=this.lineHelpers.sameValueSeriesFix(ne,l);var de=C.globals.comboCharts?p[ne]:ne;this._initSerieVariables(l,ne,de);var xe=[],Se=[],Pe=[],Te=C.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,de),C.globals.isXNumeric&&C.globals.seriesX.length>0&&(Te=(C.globals.seriesX[de][0]-C.globals.minX)/this.xRatio),Pe.push(Te);var Ne,U=Te,le=void 0,we=U,Le=this.zeroY,je=this.zeroY;Le=this.lineHelpers.determineFirstPrevY({i:ne,series:l,prevY:Le,lineYPosition:0}).prevY,xe.push("monotonCubic"===C.config.stroke.curve&&null===l[ne][0]?null:Le),Ne=Le,"rangeArea"===B&&(le=je=this.lineHelpers.determineFirstPrevY({i:ne,series:y,prevY:je,lineYPosition:0}).prevY,Se.push(je));var lt={type:B,series:l,realIndex:de,i:ne,x:Te,y:1,pX:U,pY:Ne,pathsFrom:this._calculatePathsFrom({type:B,series:l,i:ne,realIndex:de,prevX:we,prevY:Le,prevY2:je}),linePaths:[],areaPaths:[],seriesIndex:p,lineYPosition:0,xArrj:Pe,yArrj:xe,y2Arrj:Se,seriesRangeEnd:y},jt=this._iterateOverDataPoints(Ze(Ze({},lt),{},{iterations:"rangeArea"===B?l[ne].length-1:void 0,isRangeStart:!0}));if("rangeArea"===B){var qt=this._calculatePathsFrom({series:y,i:ne,realIndex:de,prevX:we,prevY:je}),Di=this._iterateOverDataPoints(Ze(Ze({},lt),{},{series:y,pY:le,pathsFrom:qt,iterations:y[ne].length-1,isRangeStart:!1}));jt.linePaths[0]=Di.linePath+jt.linePath,jt.pathFromLine=Di.pathFromLine+jt.pathFromLine}this._handlePaths({type:B,realIndex:de,i:ne,paths:jt}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),J.push(this.elSeries)}if(void 0!==(null===(w=C.config.series[0])||void 0===w?void 0:w.zIndex)&&J.sort(function(Qn,gr){return Number(Qn.node.getAttribute("zIndex"))-Number(gr.node.getAttribute("zIndex"))}),C.config.chart.stacked)for(var Qi=J.length;Qi>0;Qi--)H.add(J[Qi-1]);else for(var cn=0;cn<J.length;cn++)H.add(J[cn]);return H}},{key:"_initSerieVariables",value:function(l,u,p){var y=this.w,w=new kt(this.ctx);this.xDivision=y.globals.gridWidth/(y.globals.dataPoints-("on"===y.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(y.config.stroke.width)?y.config.stroke.width[p]:y.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=p),this.isReversed=y.config.yaxis[this.yaxisIndex]&&y.config.yaxis[this.yaxisIndex].reversed,this.zeroY=y.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?y.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>y.globals.gridHeight||"end"===y.config.plotOptions.area.fillTo)&&(this.areaBottomY=y.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=w.group({class:"apexcharts-series",zIndex:void 0!==y.config.series[p].zIndex?y.config.series[p].zIndex:p,seriesName:tt.escapeString(y.globals.seriesNames[p])}),this.elPointsMain=w.group({class:"apexcharts-series-markers-wrap","data:realIndex":p}),this.elDataLabelsWrap=w.group({class:"apexcharts-datalabels","data:realIndex":p}),this.elSeries.attr({"data:longestSeries":l[u].length===y.globals.dataPoints,rel:u+1,"data:realIndex":p}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(l){var u,p,y,w,C=l.type,M=l.series,B=l.i,H=l.realIndex,K=l.prevX,J=l.prevY,ne=l.prevY2,de=this.w,xe=new kt(this.ctx);if(null===M[B][0]){for(var Se=0;Se<M[B].length;Se++)if(null!==M[B][Se]){u=xe.move(K=this.xDivision*Se,J=this.zeroY-M[B][Se]/this.yRatio[this.yaxisIndex]),p=xe.move(K,this.areaBottomY);break}}else u=xe.move(K,J),"rangeArea"===C&&(u=xe.move(K,ne)+xe.line(K,J)),p=xe.move(K,this.areaBottomY)+xe.line(K,J);if(y=xe.move(-1,this.zeroY)+xe.line(-1,this.zeroY),w=xe.move(-1,this.zeroY)+xe.line(-1,this.zeroY),de.globals.previousPaths.length>0){var Pe=this.lineHelpers.checkPreviousPaths({pathFromLine:y,pathFromArea:w,realIndex:H});y=Pe.pathFromLine,w=Pe.pathFromArea}return{prevX:K,prevY:J,linePath:u,areaPath:p,pathFromLine:y,pathFromArea:w}}},{key:"_handlePaths",value:function(l){var u=l.type,p=l.realIndex,y=l.i,w=l.paths,C=this.w,M=new kt(this.ctx),B=new kn(this.ctx);this.prevSeriesY.push(w.yArrj),C.globals.seriesXvalues[p]=w.xArrj,C.globals.seriesYvalues[p]=w.yArrj;var H=C.config.forecastDataPoints;if(H.count>0&&"rangeArea"!==u){var K=C.globals.seriesXvalues[p][C.globals.seriesXvalues[p].length-H.count-1],J=M.drawRect(K,0,C.globals.gridWidth,C.globals.gridHeight,0);C.globals.dom.elForecastMask.appendChild(J.node);var ne=M.drawRect(0,0,K,C.globals.gridHeight,0);C.globals.dom.elNonForecastMask.appendChild(ne.node)}this.pointsChart||C.globals.delayedElements.push({el:this.elPointsMain.node,index:p});var de={i:y,realIndex:p,animationDelay:y,initialSpeed:C.config.chart.animations.speed,dataChangeSpeed:C.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(u)};if("area"===u)for(var xe=B.fillPath({seriesNumber:p}),Se=0;Se<w.areaPaths.length;Se++){var Pe=M.renderPaths(Ze(Ze({},de),{},{pathFrom:w.pathFromArea,pathTo:w.areaPaths[Se],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:xe}));this.elSeries.add(Pe)}if(C.config.stroke.show&&!this.pointsChart){var Te=null;if("line"===u)Te=B.fillPath({seriesNumber:p,i:y});else if("solid"===C.config.stroke.fill.type)Te=C.globals.stroke.colors[p];else{var Ne=C.config.fill;C.config.fill=C.config.stroke.fill,Te=B.fillPath({seriesNumber:p,i:y}),C.config.fill=Ne}for(var U=0;U<w.linePaths.length;U++){var le=Te;"rangeArea"===u&&(le=B.fillPath({seriesNumber:p}));var we=Ze(Ze({},de),{},{pathFrom:w.pathFromLine,pathTo:w.linePaths[U],stroke:Te,strokeWidth:this.strokeWidth,strokeLineCap:C.config.stroke.lineCap,fill:"rangeArea"===u?le:"none"}),Le=M.renderPaths(we);if(this.elSeries.add(Le),Le.attr("fill-rule","evenodd"),H.count>0&&"rangeArea"!==u){var je=M.renderPaths(we);je.node.setAttribute("stroke-dasharray",H.dashArray),H.strokeWidth&&je.node.setAttribute("stroke-width",H.strokeWidth),this.elSeries.add(je),je.attr("clip-path","url(#forecastMask".concat(C.globals.cuid,")")),Le.attr("clip-path","url(#nonForecastMask".concat(C.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(l){var u,p=this,y=l.type,w=l.series,C=l.iterations,M=l.realIndex,B=l.i,H=l.x,K=l.y,J=l.pX,ne=l.pY,de=l.pathsFrom,xe=l.linePaths,Se=l.areaPaths,Pe=l.seriesIndex,Te=l.lineYPosition,Ne=l.xArrj,U=l.yArrj,le=l.y2Arrj,we=l.isRangeStart,Le=l.seriesRangeEnd,je=this.w,lt=new kt(this.ctx),jt=this.yRatio,qt=de.prevY,Di=de.linePath,Qi=de.areaPath,cn=de.pathFromLine,Qn=de.pathFromArea,gr=tt.isNumber(je.globals.minYArr[M])?je.globals.minYArr[M]:je.globals.minY;C||(C=je.globals.dataPoints>1?je.globals.dataPoints-1:je.globals.dataPoints);for(var Zr=function(ls,ka){return ka-ls/jt[p.yaxisIndex]+2*(p.isReversed?ls/jt[p.yaxisIndex]:0)},hs=K,vs=je.config.chart.stacked&&!je.globals.comboCharts||je.config.chart.stacked&&je.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(u=this.w.config.series[M])||void 0===u?void 0:u.type)),_s=0;_s<C;_s++){var Js=null==w[B][_s+1];if(je.globals.isXNumeric){var oa=je.globals.seriesX[M][_s+1];void 0===je.globals.seriesX[M][_s+1]&&(oa=je.globals.seriesX[M][C-1]),H=(oa-je.globals.minX)/this.xRatio}else H+=this.xDivision;Te=vs&&B>0&&je.globals.collapsedSeries.length<je.config.series.length-1?this.prevSeriesY[function(ls){for(var ka=ls,ss=0;ss<je.globals.series.length;ss++)if(je.globals.collapsedSeriesIndices.indexOf(ls)>-1){ka--;break}return ka>=0?ka:0}(B-1)][_s+1]:this.zeroY,Js?K=Zr(gr,Te):(K=Zr(w[B][_s+1],Te),"rangeArea"===y&&(hs=Zr(Le[B][_s+1],Te))),Ne.push(H),U.push(Js&&"smooth"===je.config.stroke.curve?null:K),le.push(hs);var Ea=this.lineHelpers.calculatePoints({series:w,x:H,y:K,realIndex:M,i:B,j:_s,prevY:qt}),Ws=this._createPaths({type:y,series:w,i:B,realIndex:M,j:_s,x:H,y:K,y2:hs,xArrj:Ne,yArrj:U,y2Arrj:le,pX:J,pY:ne,linePath:Di,areaPath:Qi,linePaths:xe,areaPaths:Se,seriesIndex:Pe,isRangeStart:we});Se=Ws.areaPaths,xe=Ws.linePaths,J=Ws.pX,ne=Ws.pY,Qi=Ws.areaPath,Di=Ws.linePath,!this.appendPathFrom||"monotoneCubic"===je.config.stroke.curve&&"rangeArea"===y||(cn+=lt.line(H,this.zeroY),Qn+=lt.line(H,this.zeroY)),this.handleNullDataPoints(w,Ea,B,_s,M),this._handleMarkersAndLabels({type:y,pointsPos:Ea,i:B,j:_s,realIndex:M,isRangeStart:we})}return{yArrj:U,xArrj:Ne,pathFromArea:Qn,areaPaths:Se,pathFromLine:cn,linePaths:xe,linePath:Di,areaPath:Qi}}},{key:"_handleMarkersAndLabels",value:function(l){var u=l.type,p=l.pointsPos,y=l.isRangeStart,w=l.i,C=l.j,M=l.realIndex,B=this.w,H=new Xr(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,C,{realIndex:M,pointsPos:p,zRatio:this.zRatio,elParent:this.elPointsMain});else{B.globals.series[w].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var K=this.markers.plotChartMarkers(p,M,C+1);null!==K&&this.elPointsMain.add(K)}var J=H.drawDataLabel({type:u,isRangeStart:y,pos:p,i:M,j:C+1});null!==J&&this.elDataLabelsWrap.add(J)}},{key:"_createPaths",value:function(l){var u=l.type,p=l.series,y=l.i,w=l.realIndex,C=l.j,M=l.x,B=l.y,H=l.xArrj,K=l.yArrj,J=l.y2,ne=l.y2Arrj,de=l.pX,xe=l.pY,Se=l.linePath,Pe=l.areaPath,Te=l.linePaths,Ne=l.areaPaths,U=l.seriesIndex,le=l.isRangeStart,we=this.w,Le=new kt(this.ctx),je=we.config.stroke.curve,lt=this.areaBottomY;if(Array.isArray(we.config.stroke.curve)&&(je=Array.isArray(U)?we.config.stroke.curve[U[y]]:we.config.stroke.curve[y]),"rangeArea"===u&&(we.globals.hasNullValues||we.config.forecastDataPoints.count>0)&&"monotoneCubic"===je&&(je="straight"),"monotoneCubic"===je){var jt="rangeArea"===u?H.length===we.globals.dataPoints:C===p[y].length-2,qt=H.map(function(vs,_s){return[H[_s],K[_s]]}).filter(function(vs){return null!==vs[1]});if(jt&&qt.length>1){var Di=Xe(qt);if(Se+=ot(Di),null===p[y][0]?Pe=Se:Pe+=ot(Di),"rangeArea"===u&&le){Se+=Le.line(H[H.length-1],ne[ne.length-1]);var Qi=H.slice().reverse(),cn=ne.slice().reverse(),Qn=Qi.map(function(vs,_s){return[Qi[_s],cn[_s]]}),gr=Xe(Qn);Pe=Se+=ot(gr)}else Pe+=Le.line(qt[qt.length-1][0],lt)+Le.line(qt[0][0],lt)+Le.move(qt[0][0],qt[0][1])+"z";Te.push(Se),Ne.push(Pe)}}else if("smooth"===je){var Zr=.35*(M-de);we.globals.hasNullValues?(null!==p[y][C]&&(null!==p[y][C+1]?(Se=Le.move(de,xe)+Le.curve(de+Zr,xe,M-Zr,B,M+1,B),Pe=Le.move(de+1,xe)+Le.curve(de+Zr,xe,M-Zr,B,M+1,B)+Le.line(M,lt)+Le.line(de,lt)+"z"):(Se=Le.move(de,xe),Pe=Le.move(de,xe)+"z")),Te.push(Se),Ne.push(Pe)):(Se+=Le.curve(de+Zr,xe,M-Zr,B,M,B),Pe+=Le.curve(de+Zr,xe,M-Zr,B,M,B)),de=M,xe=B,C===p[y].length-2&&(Pe=Pe+Le.curve(de,xe,M,B,M,lt)+Le.move(M,B)+"z","rangeArea"===u&&le?Se=Se+Le.curve(de,xe,M,B,M,J)+Le.move(M,J)+"z":we.globals.hasNullValues||(Te.push(Se),Ne.push(Pe)))}else null===p[y][C+1]&&(Se+=Le.move(M,B),Pe=Pe+Le.line(we.globals.isXNumeric?(we.globals.seriesX[w][C]-we.globals.minX)/this.xRatio:M-this.xDivision,lt)+Le.move(M,B)+"z"),null===p[y][C]&&(Se+=Le.move(M,B),Pe+=Le.move(M,lt)),"stepline"===je?(Se=Se+Le.line(M,null,"H")+Le.line(null,B,"V"),Pe=Pe+Le.line(M,null,"H")+Le.line(null,B,"V")):"straight"===je&&(Se+=Le.line(M,B),Pe+=Le.line(M,B)),C===p[y].length-2&&(Pe=Pe+Le.line(M,lt)+Le.move(M,B)+"z","rangeArea"===u&&le?Se=Se+Le.line(M,J)+Le.move(M,J)+"z":(Te.push(Se),Ne.push(Pe)));return{linePaths:Te,areaPaths:Ne,pX:de,pY:xe,linePath:Se,areaPath:Pe}}},{key:"handleNullDataPoints",value:function(l,u,p,y,w){var C=this.w;if(null===l[p][y]&&C.config.markers.showNullDataPoints||1===l[p].length){var M=this.markers.plotChartMarkers(u,w,y+1,this.strokeWidth-C.config.markers.strokeWidth/2,!0);null!==M&&this.elPointsMain.add(M)}}}]),ge}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function ge(M,B,H,K){this.xoffset=M,this.yoffset=B,this.height=K,this.width=H,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(J){var ne,de=[],xe=this.xoffset,Se=this.yoffset,Pe=w(J)/this.height,Te=w(J)/this.width;if(this.width>=this.height)for(ne=0;ne<J.length;ne++)de.push([xe,Se,xe+Pe,Se+J[ne]/Pe]),Se+=J[ne]/Pe;else for(ne=0;ne<J.length;ne++)de.push([xe,Se,xe+J[ne]/Te,Se+Te]),xe+=J[ne]/Te;return de},this.cutArea=function(J){var ne;if(this.width>=this.height){var de=J/this.height;ne=new ge(this.xoffset+de,this.yoffset,this.width-de,this.height)}else{var Se=J/this.width;ne=new ge(this.xoffset,this.yoffset+Se,this.width,this.height-Se)}return ne}}function l(M,B,H,K,J){return K=void 0===K?0:K,J=void 0===J?0:J,function(de){var xe,Se,Pe=[];for(xe=0;xe<de.length;xe++)for(Se=0;Se<de[xe].length;Se++)Pe.push(de[xe][Se]);return Pe}(u(function(de,xe){var Se,Pe=[],Te=xe/w(de);for(Se=0;Se<de.length;Se++)Pe[Se]=de[Se]*Te;return Pe}(M,B*H),[],new ge(K,J,B,H),[]))}function u(M,B,H,K){var J,ne,de,xe,Se,Pe,Te;if(0!==M.length)return J=H.shortestEdge(),Se=ne=M[0],Pe=J,0===(xe=B).length||((Te=xe.slice()).push(Se),p(xe,Pe)>=p(Te,Pe))?(B.push(ne),u(M.slice(1),B,H,K)):(de=H.cutArea(w(B),K),K.push(H.getCoordinates(B)),u(M,[],de,K)),K;K.push(H.getCoordinates(B))}function p(M,B){var H=Math.min.apply(Math,M),K=Math.max.apply(Math,M),J=w(M);return Math.max(Math.pow(B,2)*K/Math.pow(J,2),Math.pow(J,2)/(Math.pow(B,2)*H))}function y(M){return M&&M.constructor===Array}function w(M){var B,H=0;for(B=0;B<M.length;B++)H+=M[B];return H}function C(M){var B,H=0;if(y(M[0]))for(B=0;B<M.length;B++)H+=C(M[B]);else H=w(M);return H}return function M(B,H,K,J,ne){J=void 0===J?0:J,ne=void 0===ne?0:ne;var de,xe,Se=[],Pe=[];if(y(B[0])){for(xe=0;xe<B.length;xe++)Se[xe]=C(B[xe]);for(de=l(Se,H,K,J,ne),xe=0;xe<B.length;xe++)Pe.push(M(B[xe],de[xe][2]-de[xe][0],de[xe][3]-de[xe][1],de[xe][0],de[xe][1]))}else Pe=l(B,H,K,J,ne);return Pe}}();var ui,en,ji=function(){function ge(l,u){j(this,ge),this.ctx=l,this.w=l.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Mt(l),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Be(ge,[{key:"draw",value:function(l){var u=this,p=this.w,y=new kt(this.ctx),w=new kn(this.ctx),C=y.group({class:"apexcharts-treemap"});if(p.globals.noData)return C;var M=[];return l.forEach(function(B){var H=B.map(function(K){return Math.abs(K)});M.push(H)}),this.negRange=this.helpers.checkColorRange(),p.config.series.forEach(function(B,H){B.data.forEach(function(K){Array.isArray(u.labels[H])||(u.labels[H]=[]),u.labels[H].push(K.x)})}),window.TreemapSquared.generate(M,p.globals.gridWidth,p.globals.gridHeight).forEach(function(B,H){var K=y.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:tt.escapeString(p.globals.seriesNames[H]),rel:H+1,"data:realIndex":H});if(p.config.chart.dropShadow.enabled){var J=p.config.chart.dropShadow;new Mi(u.ctx).dropShadow(C,J,H)}var ne=y.group({class:"apexcharts-data-labels"});B.forEach(function(de,xe){var Se=de[0],Pe=de[1],Te=de[2],Ne=de[3],U=y.drawRect(Se,Pe,Te-Se,Ne-Pe,p.config.plotOptions.treemap.borderRadius,"#fff",1,u.strokeWidth,p.config.plotOptions.treemap.useFillColorAsStroke?we:p.globals.stroke.colors[H]);U.attr({cx:Se,cy:Pe,index:H,i:H,j:xe,width:Te-Se,height:Ne-Pe});var le=u.helpers.getShadeColor(p.config.chart.type,H,xe,u.negRange),we=le.color;void 0!==p.config.series[H].data[xe]&&p.config.series[H].data[xe].fillColor&&(we=p.config.series[H].data[xe].fillColor);var Le=w.fillPath({color:we,seriesNumber:H,dataPointIndex:xe});U.node.classList.add("apexcharts-treemap-rect"),U.attr({fill:Le}),u.helpers.addListeners(U);var je={x:Se+(Te-Se)/2,y:Pe+(Ne-Pe)/2,width:0,height:0},lt={x:Se,y:Pe,width:Te-Se,height:Ne-Pe};if(p.config.chart.animations.enabled&&!p.globals.dataChanged){var jt=1;p.globals.resized||(jt=p.config.chart.animations.speed),u.animateTreemap(U,je,lt,jt)}p.globals.dataChanged&&u.dynamicAnim.enabled&&p.globals.shouldAnimate&&(p.globals.previousPaths[H]&&p.globals.previousPaths[H][xe]&&p.globals.previousPaths[H][xe].rect&&(je=p.globals.previousPaths[H][xe].rect),u.animateTreemap(U,je,lt,u.dynamicAnim.speed));var Di=u.getFontSize(de),Qi=p.config.dataLabels.formatter(u.labels[H][xe],{value:p.globals.series[H][xe],seriesIndex:H,dataPointIndex:xe,w:p});"truncate"===p.config.plotOptions.treemap.dataLabels.format&&(Di=parseInt(p.config.dataLabels.style.fontSize,10),Qi=u.truncateLabels(Qi,Di,Se,Pe,Te,Ne));var cn=u.helpers.calculateDataLabels({text:Qi,x:(Se+Te)/2,y:(Pe+Ne)/2+u.strokeWidth/2+Di/3,i:H,j:xe,colorProps:le,fontSize:Di,series:l});p.config.dataLabels.enabled&&cn&&u.rotateToFitLabel(cn,Di,Qi,Se,Pe,Te,Ne),K.add(U),null!==cn&&K.add(cn)}),K.add(ne),C.add(K)}),C}},{key:"getFontSize",value:function(l){var C,u=this.w,M=function B(H){var K,J=0;if(Array.isArray(H[0]))for(K=0;K<H.length;K++)J+=B(H[K]);else for(K=0;K<H.length;K++)J+=H[K].length;return J}(this.labels)/function B(H){var K,J=0;if(Array.isArray(H[0]))for(K=0;K<H.length;K++)J+=B(H[K]);else for(K=0;K<H.length;K++)J+=1;return J}(this.labels);return C=Math.pow((l[2]-l[0])*(l[3]-l[1]),.5),Math.min(C/M,parseInt(u.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(l,u,p,y,w,C,M){var B=new kt(this.ctx),H=B.getTextRects(p,u);if(H.width+this.w.config.stroke.width+5>C-y&&H.width<=M-w){var K=B.rotateAroundCenter(l.node);l.node.setAttribute("transform","rotate(-90 ".concat(K.x," ").concat(K.y,") translate(").concat(H.height/3,")"))}}},{key:"truncateLabels",value:function(l,u,p,y,w,C){var M=new kt(this.ctx),B=M.getTextRects(l,u).width+this.w.config.stroke.width+5>w-p&&C-y>w-p?C-y:w-p,H=M.getTextBasedOnMaxWidth({text:l,maxWidth:B,fontSize:u});return l.length!==H.length&&B/u<5?"":H}},{key:"animateTreemap",value:function(l,u,p,y){var w=new Ci(this.ctx);w.animateRect(l,{x:u.x,y:u.y,width:u.width,height:u.height},{x:p.x,y:p.y,width:p.width,height:p.height},y,function(){w.animationCompleted(l)})}}]),ge}(),bt=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Be(ge,[{key:"calculateTimeScaleTicks",value:function(l,u){var p=this,y=this.w;if(y.globals.allSeriesCollapsed)return y.globals.labels=[],y.globals.timescaleLabels=[],[];var w=new qi(this.ctx),C=(u-l)/864e5;this.determineInterval(C),y.globals.disableZoomIn=!1,y.globals.disableZoomOut=!1,C<.00011574074074074075?y.globals.disableZoomIn=!0:C>5e4&&(y.globals.disableZoomOut=!0);var M=w.getTimeUnitsfromTimestamp(l,u,this.utc),B=y.globals.gridWidth/C,H=B/24,K=H/60,J=K/60,ne=Math.floor(24*C),de=Math.floor(1440*C),xe=Math.floor(86400*C),Se=Math.floor(C),Pe=Math.floor(C/30),Te=Math.floor(C/365),Ne={minMillisecond:M.minMillisecond,minSecond:M.minSecond,minMinute:M.minMinute,minHour:M.minHour,minDate:M.minDate,minMonth:M.minMonth,minYear:M.minYear},U={firstVal:Ne,currentMillisecond:Ne.minMillisecond,currentSecond:Ne.minSecond,currentMinute:Ne.minMinute,currentHour:Ne.minHour,currentMonthDate:Ne.minDate,currentDate:Ne.minDate,currentMonth:Ne.minMonth,currentYear:Ne.minYear,daysWidthOnXAxis:B,hoursWidthOnXAxis:H,minutesWidthOnXAxis:K,secondsWidthOnXAxis:J,numberOfSeconds:xe,numberOfMinutes:de,numberOfHours:ne,numberOfDays:Se,numberOfMonths:Pe,numberOfYears:Te};switch(this.tickInterval){case"years":this.generateYearScale(U);break;case"months":case"half_year":this.generateMonthScale(U);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(U);break;case"hours":this.generateHourScale(U);break;case"minutes_fives":case"minutes":this.generateMinuteScale(U);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(U)}var le=this.timeScaleArray.map(function(we){var Le={position:we.position,unit:we.unit,year:we.year,day:we.day?we.day:1,hour:we.hour?we.hour:0,month:we.month+1};return"month"===we.unit?Ze(Ze({},Le),{},{day:1,value:we.value+1}):"day"===we.unit||"hour"===we.unit?Ze(Ze({},Le),{},{value:we.value}):"minute"===we.unit?Ze(Ze({},Le),{},{value:we.value,minute:we.value}):"second"===we.unit?Ze(Ze({},Le),{},{value:we.value,minute:we.minute,second:we.second}):we});return le.filter(function(we){var Le=1,je=Math.ceil(y.globals.gridWidth/120),lt=we.value;void 0!==y.config.xaxis.tickAmount&&(je=y.config.xaxis.tickAmount),le.length>je&&(Le=Math.floor(le.length/je));var jt=!1,qt=!1;switch(p.tickInterval){case"years":"year"===we.unit&&(jt=!0);break;case"half_year":Le=7,"year"===we.unit&&(jt=!0);break;case"months":Le=1,"year"===we.unit&&(jt=!0);break;case"months_fortnight":Le=15,"year"!==we.unit&&"month"!==we.unit||(jt=!0),30===lt&&(qt=!0);break;case"months_days":Le=10,"month"===we.unit&&(jt=!0),30===lt&&(qt=!0);break;case"week_days":Le=8,"month"===we.unit&&(jt=!0);break;case"days":Le=1,"month"===we.unit&&(jt=!0);break;case"hours":"day"===we.unit&&(jt=!0);break;case"minutes_fives":case"seconds_fives":lt%5!=0&&(qt=!0);break;case"seconds_tens":lt%10!=0&&(qt=!0)}if("hours"===p.tickInterval||"minutes_fives"===p.tickInterval||"seconds_tens"===p.tickInterval||"seconds_fives"===p.tickInterval){if(!qt)return!0}else if((lt%Le==0||jt)&&!qt)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(l,u){var p=this.w,y=this.formatDates(l),w=this.removeOverlappingTS(y);p.globals.timescaleLabels=w.slice(),new wr(this.ctx).plotCoords()}},{key:"determineInterval",value:function(l){var u=24*l,p=60*u;switch(!0){case l/365>5:this.tickInterval="years";break;case l>800:this.tickInterval="half_year";break;case l>180:this.tickInterval="months";break;case l>90:this.tickInterval="months_fortnight";break;case l>60:this.tickInterval="months_days";break;case l>30:this.tickInterval="week_days";break;case l>2:this.tickInterval="days";break;case u>2.4:this.tickInterval="hours";break;case p>15:this.tickInterval="minutes_fives";break;case p>5:this.tickInterval="minutes";break;case p>1:this.tickInterval="seconds_tens";break;case 60*p>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(l){var u=l.firstVal,p=l.currentMonth,y=l.currentYear,w=l.daysWidthOnXAxis,C=l.numberOfYears,M=u.minYear,B=0,H=new qi(this.ctx),K="year";if(u.minDate>1||u.minMonth>0){var J=H.determineRemainingDaysOfYear(u.minYear,u.minMonth,u.minDate);B=(H.determineDaysOfYear(u.minYear)-J+1)*w,this.timeScaleArray.push({position:B,value:M=u.minYear+1,unit:K,year:M,month:tt.monthMod(p+1)})}else 1===u.minDate&&0===u.minMonth&&this.timeScaleArray.push({position:B,value:M,unit:K,year:y,month:tt.monthMod(p+1)});for(var ne=M,de=B,xe=0;xe<C;xe++)ne++,de=H.determineDaysOfYear(ne-1)*w+de,this.timeScaleArray.push({position:de,value:ne,unit:K,year:ne,month:1})}},{key:"generateMonthScale",value:function(l){var u=l.firstVal,p=l.currentMonthDate,y=l.currentMonth,w=l.currentYear,C=l.daysWidthOnXAxis,M=l.numberOfMonths,B=y,H=0,K=new qi(this.ctx),J="month",ne=0;if(u.minDate>1){H=(K.determineDaysOfMonths(y+1,u.minYear)-p+1)*C,B=tt.monthMod(y+1);var de=w+ne,xe=tt.monthMod(B),Se=B;0===B&&(J="year",Se=de,xe=1,de+=ne+=1),this.timeScaleArray.push({position:H,value:Se,unit:J,year:de,month:xe})}else this.timeScaleArray.push({position:H,value:B,unit:J,year:w,month:tt.monthMod(y)});for(var Pe=B+1,Te=H,Ne=0,U=1;Ne<M;Ne++,U++){0===(Pe=tt.monthMod(Pe))?(J="year",ne+=1):J="month";var le=this._getYear(w,Pe,ne);Te=K.determineDaysOfMonths(Pe,le)*C+Te,this.timeScaleArray.push({position:Te,value:0===Pe?le:Pe,unit:J,year:le,month:0===Pe?1:Pe}),Pe++}}},{key:"generateDayScale",value:function(l){var u=l.firstVal,p=l.currentMonth,y=l.currentYear,w=l.hoursWidthOnXAxis,C=l.numberOfDays,M=new qi(this.ctx),B="day",H=u.minDate+1,K=H,J=function(U,le,we){return U>M.determineDaysOfMonths(le+1,we)&&(K=1,B="month",de=le+=1),le},ne=(24-u.minHour)*w,de=H,xe=J(K,p,y);0===u.minHour&&1===u.minDate?(ne=0,de=tt.monthMod(u.minMonth),B="month",K=u.minDate):1!==u.minDate&&0===u.minHour&&0===u.minMinute&&(ne=0,de=H=u.minDate,xe=J(K=H,p,y)),this.timeScaleArray.push({position:ne,value:de,unit:B,year:this._getYear(y,xe,0),month:tt.monthMod(xe),day:K});for(var Se=ne,Pe=0;Pe<C;Pe++){B="day",xe=J(K+=1,xe,this._getYear(y,xe,0));var Te=this._getYear(y,xe,0);Se=24*w+Se;var Ne=1===K?tt.monthMod(xe):K;this.timeScaleArray.push({position:Se,value:Ne,unit:B,year:Te,month:tt.monthMod(xe),day:Ne})}}},{key:"generateHourScale",value:function(l){var u=l.firstVal,p=l.currentDate,y=l.currentMonth,w=l.currentYear,C=l.minutesWidthOnXAxis,M=l.numberOfHours,B=new qi(this.ctx),H="hour",K=function(Le,je){return Le>B.determineDaysOfMonths(je+1,w)&&(Pe=1,je+=1),{month:je,date:Pe}},J=function(Le,je){return Le>B.determineDaysOfMonths(je+1,w)?je+=1:je},ne=60-(u.minMinute+u.minSecond/60),de=ne*C,xe=u.minHour+1,Se=xe;60===ne&&(de=0,Se=xe=u.minHour);var Pe=p;Se>=24&&(Se=0,Pe+=1,H="day");var Te=K(Pe,y).month;Te=J(Pe,Te),this.timeScaleArray.push({position:de,value:xe,unit:H,day:Pe,hour:Se,year:w,month:tt.monthMod(Te)}),Se++;for(var Ne=de,U=0;U<M;U++){H="hour",Se>=24&&(Se=0,H="day",Te=K(Pe+=1,Te).month,Te=J(Pe,Te));var le=this._getYear(w,Te,0);this.timeScaleArray.push({position:Ne=60*C+Ne,value:0===Se?Pe:Se,unit:H,hour:Se,day:Pe,year:le,month:tt.monthMod(Te)}),Se++}}},{key:"generateMinuteScale",value:function(l){for(var H=l.minutesWidthOnXAxis,J=l.numberOfMinutes,ne=l.currentMinute+1,de=l.currentDate,xe=l.currentMonth,Se=l.currentYear,Pe=l.currentHour,Te=(60-l.currentSecond-l.currentMillisecond/1e3)*l.secondsWidthOnXAxis,Ne=0;Ne<J;Ne++)ne>=60&&(ne=0,24===(Pe+=1)&&(Pe=0)),this.timeScaleArray.push({position:Te,value:ne,unit:"minute",hour:Pe,minute:ne,day:de,year:this._getYear(Se,xe,0),month:tt.monthMod(xe)}),Te+=H,ne++}},{key:"generateSecondScale",value:function(l){for(var H=l.secondsWidthOnXAxis,K=l.numberOfSeconds,J=l.currentSecond+1,ne=l.currentMinute,de=l.currentDate,xe=l.currentMonth,Se=l.currentYear,Pe=l.currentHour,Te=(1e3-l.currentMillisecond)/1e3*H,Ne=0;Ne<K;Ne++)J>=60&&(J=0,++ne>=60&&(ne=0,24==++Pe&&(Pe=0))),this.timeScaleArray.push({position:Te,value:J,unit:"second",hour:Pe,minute:ne,second:J,day:de,year:this._getYear(Se,xe,0),month:tt.monthMod(xe)}),Te+=H,J++}},{key:"createRawDateString",value:function(l,u){var p=l.year;return 0===l.month&&(l.month=1),p+="-"+("0"+l.month.toString()).slice(-2),p+="day"===l.unit?"day"===l.unit?"-"+("0"+u).slice(-2):"-01":"-"+("0"+(l.day?l.day:"1")).slice(-2),p+="hour"===l.unit?"hour"===l.unit?"T"+("0"+u).slice(-2):"T00":"T"+("0"+(l.hour?l.hour:"0")).slice(-2),p+="minute"===l.unit?":"+("0"+u).slice(-2):":"+(l.minute?("0"+l.minute).slice(-2):"00"),p+="second"===l.unit?":"+("0"+u).slice(-2):":00",this.utc&&(p+=".000Z"),p}},{key:"formatDates",value:function(l){var u=this,p=this.w;return l.map(function(y){var w=y.value.toString(),C=new qi(u.ctx),M=u.createRawDateString(y,w),B=C.getDate(C.parseDate(M));if(u.utc||(B=C.getDate(C.parseDateWithTimezone(M))),void 0===p.config.xaxis.labels.format){var H="dd MMM",K=p.config.xaxis.labels.datetimeFormatter;"year"===y.unit&&(H=K.year),"month"===y.unit&&(H=K.month),"day"===y.unit&&(H=K.day),"hour"===y.unit&&(H=K.hour),"minute"===y.unit&&(H=K.minute),"second"===y.unit&&(H=K.second),w=C.formatDate(B,H)}else w=C.formatDate(B,p.config.xaxis.labels.format);return{dateString:M,position:y.position,value:w,unit:y.unit,year:y.year,month:y.month}})}},{key:"removeOverlappingTS",value:function(l){var u,p=this,y=new kt(this.ctx),w=!1;l.length>0&&l[0].value&&l.every(function(B){return B.value.length===l[0].value.length})&&(w=!0,u=y.getTextRects(l[0].value).width);var C=0;return l.map(function(B,H){if(H>0&&p.w.config.xaxis.labels.hideOverlappingLabels){var K=w?u:y.getTextRects(l[C].value).width;return B.position>l[C].position+K+10?(C=H,B):null}return B}).filter(function(B){return null!==B})}},{key:"_getYear",value:function(l,u,p){return l+Math.floor(u/12)+p}}]),ge}(),Ft=function(){function ge(l,u){j(this,ge),this.ctx=u,this.w=u.w,this.el=l}return Be(ge,[{key:"setupElements",value:function(){var l=this.w.globals,u=this.w.config,p=u.chart.type;l.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(p)>-1,l.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(p)>-1,l.isBarHorizontal=("bar"===u.chart.type||"rangeBar"===u.chart.type||"boxPlot"===u.chart.type)&&u.plotOptions.bar.horizontal,l.chartClass=".apexcharts"+l.chartID,l.dom.baseEl=this.el,l.dom.elWrap=document.createElement("div"),kt.setAttrs(l.dom.elWrap,{id:l.chartClass.substring(1),class:"apexcharts-canvas "+l.chartClass.substring(1)}),this.el.appendChild(l.dom.elWrap),l.dom.Paper=new window.SVG.Doc(l.dom.elWrap),l.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(u.chart.offsetX,", ").concat(u.chart.offsetY,")")}),l.dom.Paper.node.style.background="dark"!==u.theme.mode||u.chart.background?u.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),l.dom.elLegendForeign=document.createElementNS(l.SVGNS,"foreignObject"),kt.setAttrs(l.dom.elLegendForeign,{x:0,y:0,width:l.svgWidth,height:l.svgHeight}),l.dom.elLegendWrap=document.createElement("div"),l.dom.elLegendWrap.classList.add("apexcharts-legend"),l.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),l.dom.elLegendForeign.appendChild(l.dom.elLegendWrap),l.dom.Paper.node.appendChild(l.dom.elLegendForeign),l.dom.elGraphical=l.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),l.dom.elDefs=l.dom.Paper.defs(),l.dom.Paper.add(l.dom.elGraphical),l.dom.elGraphical.add(l.dom.elDefs)}},{key:"plotChartType",value:function(l,u){var p=this.w,y=p.config,w=p.globals,C={series:[],i:[]},M={series:[],i:[]},B={series:[],i:[]},H={series:[],i:[]},K={series:[],i:[]},J={series:[],i:[]},ne={series:[],i:[]},de={series:[],i:[]},xe={series:[],seriesRangeEnd:[],i:[]};w.series.map(function(je,lt){var jt=0;void 0!==l[lt].type?("column"===l[lt].type||"bar"===l[lt].type?(w.series.length>1&&y.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),K.series.push(je),K.i.push(lt),jt++,p.globals.columnSeries=K.series):"area"===l[lt].type?(M.series.push(je),M.i.push(lt),jt++):"line"===l[lt].type?(C.series.push(je),C.i.push(lt),jt++):"scatter"===l[lt].type?(B.series.push(je),B.i.push(lt)):"bubble"===l[lt].type?(H.series.push(je),H.i.push(lt),jt++):"candlestick"===l[lt].type?(J.series.push(je),J.i.push(lt),jt++):"boxPlot"===l[lt].type?(ne.series.push(je),ne.i.push(lt),jt++):"rangeBar"===l[lt].type?(de.series.push(je),de.i.push(lt),jt++):"rangeArea"===l[lt].type?(xe.series.push(w.seriesRangeStart[lt]),xe.seriesRangeEnd.push(w.seriesRangeEnd[lt]),xe.i.push(lt),jt++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),jt>1&&(w.comboCharts=!0)):(C.series.push(je),C.i.push(lt))});var Se=new Rt(this.ctx,u),Pe=new ki(this.ctx,u);this.ctx.pie=new Rn(this.ctx);var Te=new ar(this.ctx);this.ctx.rangeBar=new Ht(this.ctx,u);var Ne=new Hi(this.ctx),U=[];if(w.comboCharts){if(M.series.length>0&&U.push(Se.draw(M.series,"area",M.i)),K.series.length>0)if(p.config.chart.stacked){var le=new wi(this.ctx,u);U.push(le.draw(K.series,K.i))}else this.ctx.bar=new si(this.ctx,u),U.push(this.ctx.bar.draw(K.series,K.i));if(xe.series.length>0&&U.push(Se.draw(xe.series,"rangeArea",xe.i,xe.seriesRangeEnd)),C.series.length>0&&U.push(Se.draw(C.series,"line",C.i)),J.series.length>0&&U.push(Pe.draw(J.series,"candlestick",J.i)),ne.series.length>0&&U.push(Pe.draw(ne.series,"boxPlot",ne.i)),de.series.length>0&&U.push(this.ctx.rangeBar.draw(de.series,de.i)),B.series.length>0){var we=new Rt(this.ctx,u,!0);U.push(we.draw(B.series,"scatter",B.i))}if(H.series.length>0){var Le=new Rt(this.ctx,u,!0);U.push(Le.draw(H.series,"bubble",H.i))}}else switch(y.chart.type){case"line":U=Se.draw(w.series,"line");break;case"area":U=Se.draw(w.series,"area");break;case"bar":y.chart.stacked?U=new wi(this.ctx,u).draw(w.series):(this.ctx.bar=new si(this.ctx,u),U=this.ctx.bar.draw(w.series));break;case"candlestick":U=new ki(this.ctx,u).draw(w.series,"candlestick");break;case"boxPlot":U=new ki(this.ctx,u).draw(w.series,y.chart.type);break;case"rangeBar":U=this.ctx.rangeBar.draw(w.series);break;case"rangeArea":U=Se.draw(w.seriesRangeStart,"rangeArea",void 0,w.seriesRangeEnd);break;case"heatmap":U=new zi(this.ctx,u).draw(w.series);break;case"treemap":U=new ji(this.ctx,u).draw(w.series);break;case"pie":case"donut":case"polarArea":U=this.ctx.pie.draw(w.series);break;case"radialBar":U=Te.draw(w.series);break;case"radar":U=Ne.draw(w.series);break;default:U=Se.draw(w.series)}return U}},{key:"setSVGDimensions",value:function(){var l=this.w.globals,u=this.w.config;l.svgWidth=u.chart.width,l.svgHeight=u.chart.height;var p=tt.getDimensions(this.el),y=u.chart.width.toString().split(/[0-9]+/g).pop();"%"===y?tt.isNumber(p[0])&&(0===p[0].width&&(p=tt.getDimensions(this.el.parentNode)),l.svgWidth=p[0]*parseInt(u.chart.width,10)/100):"px"!==y&&""!==y||(l.svgWidth=parseInt(u.chart.width,10));var w=u.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==l.svgHeight&&""!==l.svgHeight)if("%"===w){var C=tt.getDimensions(this.el.parentNode);l.svgHeight=C[1]*parseInt(u.chart.height,10)/100}else l.svgHeight=parseInt(u.chart.height,10);else l.svgHeight=l.axisCharts?l.svgWidth/1.61:l.svgWidth/1.2;l.svgWidth<0&&(l.svgWidth=0),l.svgHeight<0&&(l.svgHeight=0),kt.setAttrs(l.dom.Paper.node,{width:l.svgWidth,height:l.svgHeight}),"%"!==w&&(l.dom.Paper.node.parentNode.parentNode.style.minHeight=l.svgHeight+(u.chart.sparkline.enabled?0:l.axisCharts?u.chart.parentHeightOffset:0)+"px"),l.dom.elWrap.style.width=l.svgWidth+"px",l.dom.elWrap.style.height=l.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var l=this.w.globals;kt.setAttrs(l.dom.elGraphical.node,{transform:"translate("+l.translateX+", "+l.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var l=this.w,u=l.globals,p=0,y=l.config.chart.sparkline.enabled?1:15;y+=l.config.grid.padding.bottom,"top"!==l.config.legend.position&&"bottom"!==l.config.legend.position||!l.config.legend.show||l.config.legend.floating||(p=new Ks(this.ctx).legendHelpers.getLegendBBox().clwh+10);var w=l.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),C=2.05*l.globals.radialSize;if(w&&!l.config.chart.sparkline.enabled&&0!==l.config.plotOptions.radialBar.startAngle){var M=tt.getBoundingClientRect(w);C=M.bottom,C=Math.max(2.05*l.globals.radialSize,M.bottom-M.top)}var H=C+u.translateY+p+y;u.dom.elLegendForeign&&u.dom.elLegendForeign.setAttribute("height",H),l.config.chart.height&&String(l.config.chart.height).indexOf("%")>0||(u.dom.elWrap.style.height=H+"px",kt.setAttrs(u.dom.Paper.node,{height:H}),u.dom.Paper.node.parentNode.parentNode.style.minHeight=H+"px")}},{key:"coreCalculations",value:function(){new cr(this.ctx).init()}},{key:"resetGlobals",value:function(){var l=this,u=function(){return l.w.config.series.map(function(w){return[]})},p=new Nr,y=this.w.globals;p.initGlobalVars(y),y.seriesXvalues=u(),y.seriesYvalues=u()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var l=null,u=this.w;if(u.globals.axisCharts){if("back"===u.config.xaxis.crosshairs.position&&new an(this.ctx).drawXCrosshairs(),"back"===u.config.yaxis[0].crosshairs.position&&new an(this.ctx).drawYCrosshairs(),"datetime"===u.config.xaxis.type&&void 0===u.config.xaxis.labels.formatter){this.ctx.timeScale=new bt(this.ctx);var p=[];isFinite(u.globals.minX)&&isFinite(u.globals.maxX)&&!u.globals.isBarHorizontal?p=this.ctx.timeScale.calculateTimeScaleTicks(u.globals.minX,u.globals.maxX):u.globals.isBarHorizontal&&(p=this.ctx.timeScale.calculateTimeScaleTicks(u.globals.minY,u.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(p)}l=new Oi(this.ctx).getCalculatedRatios()}return l}},{key:"updateSourceChart",value:function(l){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:l.w.globals.minX,max:l.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var l=this,u=this.w;if(u.config.chart.brush.enabled&&"function"!=typeof u.config.chart.events.selection){var p=Array.isArray(u.config.chart.brush.targets)?u.config.chart.brush.targets:[u.config.chart.brush.target];p.forEach(function(y){var w=ApexCharts.getChartByID(y);w.w.globals.brushSource=l.ctx,"function"!=typeof w.w.config.chart.events.zoomed&&(w.w.config.chart.events.zoomed=function(){l.updateSourceChart(w)}),"function"!=typeof w.w.config.chart.events.scrolled&&(w.w.config.chart.events.scrolled=function(){l.updateSourceChart(w)})}),u.config.chart.events.selection=function(y,w){p.forEach(function(C){ApexCharts.getChartByID(C).ctx.updateHelpers._updateOptions({xaxis:{min:w.xaxis.min,max:w.xaxis.max}},!1,!1,!1,!1)})}}}}]),ge}(),ke=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"_updateOptions",value:function(l){var u=this,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],w=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(M){var B=[u.ctx];w&&(B=u.ctx.getSyncedCharts()),u.ctx.w.globals.isExecCalled&&(B=[u.ctx],u.ctx.w.globals.isExecCalled=!1),B.forEach(function(H,K){var J=H.w;if(J.globals.shouldAnimate=y,p||(J.globals.resized=!0,J.globals.dataChanged=!0,y&&H.series.getPreviousPaths()),l&&"object"===n(l)&&(H.config=new hr(l),l=Oi.extendArrayProps(H.config,l,J),H.w.globals.chartID!==u.ctx.w.globals.chartID&&delete l.series,J.config=tt.extend(J.config,l),C&&(J.globals.lastXAxis=l.xaxis?tt.clone(l.xaxis):[],J.globals.lastYAxis=l.yaxis?tt.clone(l.yaxis):[],J.globals.initialConfig=tt.extend({},J.config),J.globals.initialSeries=tt.clone(J.config.series),l.series))){for(var ne=0;ne<J.globals.collapsedSeriesIndices.length;ne++){var de=J.config.series[J.globals.collapsedSeriesIndices[ne]];J.globals.collapsedSeries[ne].data=J.globals.axisCharts?de.data.slice():de}for(var xe=0;xe<J.globals.ancillaryCollapsedSeriesIndices.length;xe++){var Se=J.config.series[J.globals.ancillaryCollapsedSeriesIndices[xe]];J.globals.ancillaryCollapsedSeries[xe].data=J.globals.axisCharts?Se.data.slice():Se}H.series.emptyCollapsedSeries(J.config.series)}return H.update(l).then(function(){K===B.length-1&&M(H)})})})}},{key:"_updateSeries",value:function(l,u){var p=this,y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(w){var C,M=p.w;return M.globals.shouldAnimate=u,M.globals.dataChanged=!0,u&&p.ctx.series.getPreviousPaths(),M.globals.axisCharts?(0===(C=l.map(function(B,H){return p._extendSeries(B,H)})).length&&(C=[{data:[]}]),M.config.series=C):M.config.series=l.slice(),y&&(M.globals.initialConfig.series=tt.clone(M.config.series),M.globals.initialSeries=tt.clone(M.config.series)),p.ctx.update().then(function(){w(p.ctx)})})}},{key:"_extendSeries",value:function(l,u){var p=this.w,y=p.config.series[u];return Ze(Ze({},p.config.series[u]),{},{name:l.name?l.name:y?.name,color:l.color?l.color:y?.color,type:l.type?l.type:y?.type,group:l.group?l.group:y?.group,data:l.data?l.data:y?.data,zIndex:void 0!==l.zIndex?l.zIndex:u})}},{key:"toggleDataPointSelection",value:function(l,u){var p=this.w,y=null,w=".apexcharts-series[data\\:realIndex='".concat(l,"']");return p.globals.axisCharts?y=p.globals.dom.Paper.select("".concat(w," path[j='").concat(u,"'], ").concat(w," circle[j='").concat(u,"'], ").concat(w," rect[j='").concat(u,"']")).members[0]:void 0===u&&(y=p.globals.dom.Paper.select("".concat(w," path[j='").concat(l,"']")).members[0],"pie"!==p.config.chart.type&&"polarArea"!==p.config.chart.type&&"donut"!==p.config.chart.type||this.ctx.pie.pieClicked(l)),y?(new kt(this.ctx).pathMouseDown(y,null),y.node?y.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(l){var u=this.w;if(["min","max"].forEach(function(y){void 0!==l.xaxis[y]&&(u.config.xaxis[y]=l.xaxis[y],u.globals.lastXAxis[y]=l.xaxis[y])}),l.xaxis.categories&&l.xaxis.categories.length&&(u.config.xaxis.categories=l.xaxis.categories),u.config.xaxis.convertedCatToNumeric){var p=new mr(l);l=p.convertCatToNumericXaxis(l,this.ctx)}return l}},{key:"forceYAxisUpdate",value:function(l){return l.chart&&l.chart.stacked&&"100%"===l.chart.stackType&&(Array.isArray(l.yaxis)?l.yaxis.forEach(function(u,p){l.yaxis[p].min=0,l.yaxis[p].max=100}):(l.yaxis.min=0,l.yaxis.max=100)),l}},{key:"revertDefaultAxisMinMax",value:function(l){var u=this,p=this.w,y=p.globals.lastXAxis,w=p.globals.lastYAxis;l&&l.xaxis&&(y=l.xaxis),l&&l.yaxis&&(w=l.yaxis),p.config.xaxis.min=y.min,p.config.xaxis.max=y.max,p.config.yaxis.map(function(M,B){p.globals.zoomed||void 0!==w[B]?function(M){void 0!==w[M]&&(p.config.yaxis[M].min=w[M].min,p.config.yaxis[M].max=w[M].max)}(B):void 0!==u.ctx.opts.yaxis[B]&&(M.min=u.ctx.opts.yaxis[B].min,M.max=u.ctx.opts.yaxis[B].max)})}}]),ge}();ui=typeof window<"u"?window:void 0,en=function(ge,l){var u=(void 0!==this?this:ge).SVG=function(U){if(u.supported)return U=new u.Doc(U),u.parser.draw||u.prepare(),U};if(u.ns="http://www.w3.org/2000/svg",u.xmlns="http://www.w3.org/2000/xmlns/",u.xlink="http://www.w3.org/1999/xlink",u.svgjs="http://svgjs.dev",u.supported=!0,!u.supported)return!1;u.did=1e3,u.eid=function(U){return"Svgjs"+K(U)+u.did++},u.create=function(U){var le=l.createElementNS(this.ns,U);return le.setAttribute("id",this.eid(U)),le},u.extend=function(){var U,le;le=(U=[].slice.call(arguments)).pop();for(var we=U.length-1;we>=0;we--)if(U[we])for(var Le in le)U[we].prototype[Le]=le[Le];u.Set&&u.Set.inherit&&u.Set.inherit()},u.invent=function(U){var le="function"==typeof U.create?U.create:function(){this.constructor.call(this,u.create(U.create))};return U.inherit&&(le.prototype=new U.inherit),U.extend&&u.extend(le,U.extend),U.construct&&u.extend(U.parent||u.Container,U.construct),le},u.adopt=function(U){return U?U.instance?U.instance:((le="svg"==U.nodeName?U.parentNode instanceof ge.SVGElement?new u.Nested:new u.Doc:"linearGradient"==U.nodeName?new u.Gradient("linear"):"radialGradient"==U.nodeName?new u.Gradient("radial"):u[K(U.nodeName)]?new(u[K(U.nodeName)]):new u.Element(U)).type=U.nodeName,le.node=U,U.instance=le,le instanceof u.Doc&&le.namespace().defs(),le.setData(JSON.parse(U.getAttribute("svgjs:data"))||{}),le):null;var le},u.prepare=function(){var U=l.getElementsByTagName("body")[0],le=(U?new u.Doc(U):u.adopt(l.documentElement).nested()).size(2,0);u.parser={body:U||l.documentElement,draw:le.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:le.polyline().node,path:le.path().node,native:u.create("svg")}},u.parser={native:u.create("svg")},l.addEventListener("DOMContentLoaded",function(){u.parser.draw||u.prepare()},!1),u.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},u.utils={map:function(U,le){for(var we=U.length,Le=[],je=0;je<we;je++)Le.push(le(U[je]));return Le},filter:function(U,le){for(var we=U.length,Le=[],je=0;je<we;je++)le(U[je])&&Le.push(U[je]);return Le},filterSVGElements:function(U){return this.filter(U,function(le){return le instanceof ge.SVGElement})}},u.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},u.Color=function(U){var le,we;this.r=0,this.g=0,this.b=0,U&&("string"==typeof U?u.regex.isRgb.test(U)?(le=u.regex.rgb.exec(U.replace(u.regex.whitespace,"")),this.r=parseInt(le[1]),this.g=parseInt(le[2]),this.b=parseInt(le[3])):u.regex.isHex.test(U)&&(le=u.regex.hex.exec(4==(we=U).length?["#",we.substring(1,2),we.substring(1,2),we.substring(2,3),we.substring(2,3),we.substring(3,4),we.substring(3,4)].join(""):we),this.r=parseInt(le[1],16),this.g=parseInt(le[2],16),this.b=parseInt(le[3],16)):"object"===n(U)&&(this.r=U.r,this.g=U.g,this.b=U.b))},u.extend(u.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+J(this.r)+J(this.g)+J(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(U){return this.destination=new u.Color(U),this},at:function(U){return this.destination?new u.Color({r:~~(this.r+(this.destination.r-this.r)*(U=U<0?0:U>1?1:U)),g:~~(this.g+(this.destination.g-this.g)*U),b:~~(this.b+(this.destination.b-this.b)*U)}):this}}),u.Color.test=function(U){return u.regex.isHex.test(U+="")||u.regex.isRgb.test(U)},u.Color.isRgb=function(U){return U&&"number"==typeof U.r&&"number"==typeof U.g&&"number"==typeof U.b},u.Color.isColor=function(U){return u.Color.isRgb(U)||u.Color.test(U)},u.Array=function(U,le){0==(U=(U||[]).valueOf()).length&&le&&(U=le.valueOf()),this.value=this.parse(U)},u.extend(u.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(U){return U=U.valueOf(),Array.isArray(U)?U:this.split(U)}}),u.PointArray=function(U,le){u.Array.call(this,U,le||[[0,0]])},u.PointArray.prototype=new u.Array,u.PointArray.prototype.constructor=u.PointArray;for(var p={M:function(U,le,we){return le.x=we.x=U[0],le.y=we.y=U[1],["M",le.x,le.y]},L:function(U,le){return le.x=U[0],le.y=U[1],["L",U[0],U[1]]},H:function(U,le){return le.x=U[0],["H",U[0]]},V:function(U,le){return le.y=U[0],["V",U[0]]},C:function(U,le){return le.x=U[4],le.y=U[5],["C",U[0],U[1],U[2],U[3],U[4],U[5]]},Q:function(U,le){return le.x=U[2],le.y=U[3],["Q",U[0],U[1],U[2],U[3]]},S:function(U,le){return le.x=U[2],le.y=U[3],["S",U[0],U[1],U[2],U[3]]},Z:function(U,le,we){return le.x=we.x,le.y=we.y,["Z"]}},y="mlhvqtcsaz".split(""),w=0,C=y.length;w<C;++w)p[y[w]]=function(U){return function(le,we,Le){if("H"==U)le[0]=le[0]+we.x;else if("V"==U)le[0]=le[0]+we.y;else if("A"==U)le[5]=le[5]+we.x,le[6]=le[6]+we.y;else for(var je=0,lt=le.length;je<lt;++je)le[je]=le[je]+(je%2?we.y:we.x);if(p&&"function"==typeof p[U])return p[U](le,we,Le)}}(y[w].toUpperCase());u.PathArray=function(U,le){u.Array.call(this,U,le||[["M",0,0]])},u.PathArray.prototype=new u.Array,u.PathArray.prototype.constructor=u.PathArray,u.extend(u.PathArray,{toString:function(){return function(U){for(var le=0,we=U.length,Le="";le<we;le++)Le+=U[le][0],null!=U[le][1]&&(Le+=U[le][1],null!=U[le][2]&&(Le+=" ",Le+=U[le][2],null!=U[le][3]&&(Le+=" ",Le+=U[le][3],Le+=" ",Le+=U[le][4],null!=U[le][5]&&(Le+=" ",Le+=U[le][5],Le+=" ",Le+=U[le][6],null!=U[le][7]&&(Le+=" ",Le+=U[le][7])))));return Le+" "}(this.value)},move:function(U,le){return this.bbox(),this},at:function(U){if(!this.destination)return this;for(var le=this.value,we=this.destination.value,Le=[],je=new u.PathArray,lt=0,jt=le.length;lt<jt;lt++){Le[lt]=[le[lt][0]];for(var qt=1,Di=le[lt].length;qt<Di;qt++)Le[lt][qt]=le[lt][qt]+(we[lt][qt]-le[lt][qt])*U;"A"===Le[lt][0]&&(Le[lt][4]=+(0!=Le[lt][4]),Le[lt][5]=+(0!=Le[lt][5]))}return je.value=Le,je},parse:function(U){if(U instanceof u.PathArray)return U.valueOf();var le,we={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};U="string"==typeof U?U.replace(u.regex.numbersWithDots,B).replace(u.regex.pathLetters," $& ").replace(u.regex.hyphen,"$1 -").trim().split(u.regex.delimiter):U.reduce(function(Di,Qi){return[].concat.call(Di,Qi)},[]);var Le=[],je=new u.Point,lt=new u.Point,jt=0,qt=U.length;do{u.regex.isPathLetter.test(U[jt])?(le=U[jt],++jt):"M"==le?le="L":"m"==le&&(le="l"),Le.push(p[le].call(null,U.slice(jt,jt+=we[le.toUpperCase()]).map(parseFloat),je,lt))}while(qt>jt);return Le},bbox:function(){return u.parser.draw||u.prepare(),u.parser.path.setAttribute("d",this.toString()),u.parser.path.getBBox()}}),u.Number=u.invent({create:function(U,le){this.value=0,this.unit=le||"","number"==typeof U?this.value=isNaN(U)?0:isFinite(U)?U:U<0?-34e37:34e37:"string"==typeof U?(le=U.match(u.regex.numberAndUnit))&&(this.value=parseFloat(le[1]),"%"==le[5]?this.value/=100:"s"==le[5]&&(this.value*=1e3),this.unit=le[5]):U instanceof u.Number&&(this.value=U.valueOf(),this.unit=U.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(U){return U=new u.Number(U),new u.Number(this+U,this.unit||U.unit)},minus:function(U){return U=new u.Number(U),new u.Number(this-U,this.unit||U.unit)},times:function(U){return U=new u.Number(U),new u.Number(this*U,this.unit||U.unit)},divide:function(U){return U=new u.Number(U),new u.Number(this/U,this.unit||U.unit)},to:function(U){var le=new u.Number(this);return"string"==typeof U&&(le.unit=U),le},morph:function(U){return this.destination=new u.Number(U),U.relative&&(this.destination.value+=this.value),this},at:function(U){return this.destination?new u.Number(this.destination).minus(this).times(U).plus(this):this}}}),u.Element=u.invent({create:function(U){this._stroke=u.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=U)&&(this.type=U.nodeName,this.node.instance=this,this._stroke=U.getAttribute("stroke")||this._stroke)},extend:{x:function(U){return this.attr("x",U)},y:function(U){return this.attr("y",U)},cx:function(U){return null==U?this.x()+this.width()/2:this.x(U-this.width()/2)},cy:function(U){return null==U?this.y()+this.height()/2:this.y(U-this.height()/2)},move:function(U,le){return this.x(U).y(le)},center:function(U,le){return this.cx(U).cy(le)},width:function(U){return this.attr("width",U)},height:function(U){return this.attr("height",U)},size:function(U,le){var we=ne(this,U,le);return this.width(new u.Number(we.width)).height(new u.Number(we.height))},clone:function(U){this.writeDataToDom();var le=Se(this.node.cloneNode(!0));return U?U.add(le):this.after(le),le},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(U){return this.after(U).remove(),U},addTo:function(U){return U.put(this)},putIn:function(U){return U.add(this)},id:function(U){return this.attr("id",U)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var U=this.attr("class");return null==U?[]:U.trim().split(u.regex.delimiter)},hasClass:function(U){return-1!=this.classes().indexOf(U)},addClass:function(U){if(!this.hasClass(U)){var le=this.classes();le.push(U),this.attr("class",le.join(" "))}return this},removeClass:function(U){return this.hasClass(U)&&this.attr("class",this.classes().filter(function(le){return le!=U}).join(" ")),this},toggleClass:function(U){return this.hasClass(U)?this.removeClass(U):this.addClass(U)},reference:function(U){return u.get(this.attr(U))},parent:function(U){var le=this;if(!le.node.parentNode)return null;if(le=u.adopt(le.node.parentNode),!U)return le;for(;le&&le.node instanceof ge.SVGElement;){if("string"==typeof U?le.matches(U):le instanceof U)return le;if(!le.node.parentNode||"#document"==le.node.parentNode.nodeName)return null;le=u.adopt(le.node.parentNode)}},doc:function(){return this instanceof u.Doc?this:this.parent(u.Doc)},parents:function(U){var le=[],we=this;do{if(!(we=we.parent(U))||!we.node)break;le.push(we)}while(we.parent);return le},matches:function(U){return((le=this.node).matches||le.matchesSelector||le.msMatchesSelector||le.mozMatchesSelector||le.webkitMatchesSelector||le.oMatchesSelector).call(le,U);var le},native:function(){return this.node},svg:function(U){var le=l.createElement("svg");if(!(U&&this instanceof u.Parent))return le.appendChild(U=l.createElement("svg")),this.writeDataToDom(),U.appendChild(this.node.cloneNode(!0)),le.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");le.innerHTML="<svg>"+U.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var we=0,Le=le.firstChild.childNodes.length;we<Le;we++)this.node.appendChild(le.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(U){return this.dom=U,this},is:function(U){return this instanceof U}}}),u.easing={"-":function(U){return U},"<>":function(U){return-Math.cos(U*Math.PI)/2+.5},">":function(U){return Math.sin(U*Math.PI/2)},"<":function(U){return 1-Math.cos(U*Math.PI/2)}},u.morph=function(U){return function(le,we){return new u.MorphObj(le,we).at(U)}},u.Situation=u.invent({create:function(U){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new u.Number(U.duration).valueOf(),this.delay=new u.Number(U.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=U.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),u.FX=u.invent({create:function(U){this._target=U,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(U,le,we){"object"===n(U)&&(le=U.ease,we=U.delay,U=U.duration);var Le=new u.Situation({duration:U||1e3,delay:we||0,ease:u.easing[le||"-"]||le});return this.queue(Le),this},target:function(U){return U&&U instanceof u.Element?(this._target=U,this):this._target},timeToAbsPos:function(U){return(U-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(U){return this.situation.duration/this._speed*U+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=ge.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){ge.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(U){return("function"==typeof U||U instanceof u.Situation)&&this.situations.push(U),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof u.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var U,le=this.situation;if(le.init)return this;for(var we in le.animations){U=this.target()[we](),Array.isArray(U)||(U=[U]),Array.isArray(le.animations[we])||(le.animations[we]=[le.animations[we]]);for(var Le=U.length;Le--;)le.animations[we][Le]instanceof u.Number&&(U[Le]=new u.Number(U[Le])),le.animations[we][Le]=U[Le].morph(le.animations[we][Le])}for(var we in le.attrs)le.attrs[we]=new u.MorphObj(this.target().attr(we),le.attrs[we]);for(var we in le.styles)le.styles[we]=new u.MorphObj(this.target().style(we),le.styles[we]);return le.initialTransformation=this.target().matrixify(),le.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(U,le){var we=this.active;return this.active=!1,le&&this.clearQueue(),U&&this.situation&&(!we&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(U){var le=this.last();return this.target().on("finished.fx",function we(Le){Le.detail.situation==le&&(U.call(this,le),this.off("finished.fx",we))}),this._callStart()},during:function(U){var le=this.last(),we=function(Le){Le.detail.situation==le&&U.call(this,Le.detail.pos,u.morph(Le.detail.pos),Le.detail.eased,le)};return this.target().off("during.fx",we).on("during.fx",we),this.after(function(){this.off("during.fx",we)}),this._callStart()},afterAll:function(U){var le=function we(Le){U.call(this),this.off("allfinished.fx",we)};return this.target().off("allfinished.fx",le).on("allfinished.fx",le),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(U,le,we){return this.last()[we||"animations"][U]=le,this._callStart()},step:function(U){var le,we,Le;U||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(le=Math.max(this.absPos,0),we=Math.floor(le),!0===this.situation.loops||we<this.situation.loops?(this.pos=le-we,Le=this.situation.loop,this.situation.loop=we):(this.absPos=this.situation.loops,this.pos=1,Le=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-Le)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var je=this.situation.ease(this.pos);for(var lt in this.situation.once)lt>this.lastPos&&lt<=je&&(this.situation.once[lt].call(this.target(),this.pos,je),delete this.situation.once[lt]);return this.active&&this.target().fire("during",{pos:this.pos,eased:je,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=je,this):this},eachAt:function(){var U,le=this,we=this.target(),Le=this.situation;for(var je in Le.animations)U=[].concat(Le.animations[je]).map(function(qt){return"string"!=typeof qt&&qt.at?qt.at(Le.ease(le.pos),le.pos):qt}),we[je].apply(we,U);for(var je in Le.attrs)U=[je].concat(Le.attrs[je]).map(function(Di){return"string"!=typeof Di&&Di.at?Di.at(Le.ease(le.pos),le.pos):Di}),we.attr.apply(we,U);for(var je in Le.styles)U=[je].concat(Le.styles[je]).map(function(Di){return"string"!=typeof Di&&Di.at?Di.at(Le.ease(le.pos),le.pos):Di}),we.style.apply(we,U);if(Le.transforms.length){U=Le.initialTransformation,je=0;for(var lt=Le.transforms.length;je<lt;je++){var jt=Le.transforms[je];jt instanceof u.Matrix?U=jt.relative?U.multiply((new u.Matrix).morph(jt).at(Le.ease(this.pos))):U.morph(jt).at(Le.ease(this.pos)):(jt.relative||jt.undo(U.extract()),U=U.multiply(jt.at(Le.ease(this.pos))))}we.matrix(U)}return this},once:function(U,le,we){var Le=this.last();return we||(U=Le.ease(U)),Le.once[U]=le,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:u.Element,construct:{animate:function(U,le,we){return(this.fx||(this.fx=new u.FX(this))).animate(U,le,we)},delay:function(U){return(this.fx||(this.fx=new u.FX(this))).delay(U)},stop:function(U,le){return this.fx&&this.fx.stop(U,le),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),u.MorphObj=u.invent({create:function(U,le){return u.Color.isColor(le)?new u.Color(U).morph(le):u.regex.delimiter.test(U)?u.regex.pathLetters.test(U)?new u.PathArray(U).morph(le):new u.Array(U).morph(le):u.regex.numberAndUnit.test(le)?new u.Number(U).morph(le):(this.value=U,void(this.destination=le))},extend:{at:function(U,le){return le<1?this.value:this.destination},valueOf:function(){return this.value}}}),u.extend(u.FX,{attr:function(U,le,we){if("object"===n(U))for(var Le in U)this.attr(Le,U[Le]);else this.add(U,le,"attrs");return this},plot:function(U,le,we,Le){return 4==arguments.length?this.plot([U,le,we,Le]):this.add("plot",new(this.target().morphArray)(U))}}),u.Box=u.invent({create:function(U,le,we,Le){if(!("object"!==n(U)||U instanceof u.Element))return u.Box.call(this,null!=U.left?U.left:U.x,null!=U.top?U.top:U.y,U.width,U.height);var je;4==arguments.length&&(this.x=U,this.y=le,this.width=we,this.height=Le),null==(je=this).x&&(je.x=0,je.y=0,je.width=0,je.height=0),je.w=je.width,je.h=je.height,je.x2=je.x+je.width,je.y2=je.y+je.height,je.cx=je.x+je.width/2,je.cy=je.y+je.height/2}}),u.BBox=u.invent({create:function(U){if(u.Box.apply(this,[].slice.call(arguments)),U instanceof u.Element){var le;try{if(!l.documentElement.contains){for(var we=U.node;we.parentNode;)we=we.parentNode;if(we!=l)throw new Error("Element not in the dom")}le=U.node.getBBox()}catch{if(U instanceof u.Shape){u.parser.draw||u.prepare();var Le=U.clone(u.parser.draw.instance).show();Le&&Le.node&&"function"==typeof Le.node.getBBox&&(le=Le.node.getBBox()),Le&&"function"==typeof Le.remove&&Le.remove()}else le={x:U.node.clientLeft,y:U.node.clientTop,width:U.node.clientWidth,height:U.node.clientHeight}}u.Box.call(this,le)}},inherit:u.Box,parent:u.Element,construct:{bbox:function(){return new u.BBox(this)}}}),u.BBox.prototype.constructor=u.BBox,u.Matrix=u.invent({create:function(U){var le=xe([1,0,0,1,0,0]);U=null===U?le:U instanceof u.Element?U.matrixify():"string"==typeof U?xe(U.split(u.regex.delimiter).map(parseFloat)):6==arguments.length?xe([].slice.call(arguments)):Array.isArray(U)?xe(U):U&&"object"===n(U)?U:le;for(var we=Te.length-1;we>=0;--we)this[Te[we]]=null!=U[Te[we]]?U[Te[we]]:le[Te[we]]},extend:{extract:function(){var U=de(this,0,1);de(this,1,0);var le=180/Math.PI*Math.atan2(U.y,U.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(le*Math.PI/180)+this.f*Math.sin(le*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(le*Math.PI/180)+this.e*Math.sin(-le*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:le,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new u.Matrix(this)}},clone:function(){return new u.Matrix(this)},morph:function(U){return this.destination=new u.Matrix(U),this},multiply:function(U){return new u.Matrix(this.native().multiply((le=U,le instanceof u.Matrix||(le=new u.Matrix(le)),le).native()));var le},inverse:function(){return new u.Matrix(this.native().inverse())},translate:function(U,le){return new u.Matrix(this.native().translate(U||0,le||0))},native:function(){for(var U=u.parser.native.createSVGMatrix(),le=Te.length-1;le>=0;le--)U[Te[le]]=this[Te[le]];return U},toString:function(){return"matrix("+Pe(this.a)+","+Pe(this.b)+","+Pe(this.c)+","+Pe(this.d)+","+Pe(this.e)+","+Pe(this.f)+")"}},parent:u.Element,construct:{ctm:function(){return new u.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof u.Nested){var U=this.rect(1,1),le=U.node.getScreenCTM();return U.remove(),new u.Matrix(le)}return new u.Matrix(this.node.getScreenCTM())}}}),u.Point=u.invent({create:function(U,le){var we;we=Array.isArray(U)?{x:U[0],y:U[1]}:"object"===n(U)?{x:U.x,y:U.y}:null!=U?{x:U,y:le??U}:{x:0,y:0},this.x=we.x,this.y=we.y},extend:{clone:function(){return new u.Point(this)},morph:function(U,le){return this.destination=new u.Point(U,le),this}}}),u.extend(u.Element,{point:function(U,le){return new u.Point(U,le).transform(this.screenCTM().inverse())}}),u.extend(u.Element,{attr:function(U,le,we){if(null==U){for(U={},we=(le=this.node.attributes).length-1;we>=0;we--)U[le[we].nodeName]=u.regex.isNumber.test(le[we].nodeValue)?parseFloat(le[we].nodeValue):le[we].nodeValue;return U}if("object"===n(U))for(var Le in U)this.attr(Le,U[Le]);else if(null===le)this.node.removeAttribute(U);else{if(null==le)return null==(le=this.node.getAttribute(U))?u.defaults.attrs[U]:u.regex.isNumber.test(le)?parseFloat(le):le;"stroke-width"==U?this.attr("stroke",parseFloat(le)>0?this._stroke:null):"stroke"==U&&(this._stroke=le),"fill"!=U&&"stroke"!=U||(u.regex.isImage.test(le)&&(le=this.doc().defs().image(le,0,0)),le instanceof u.Image&&(le=this.doc().defs().pattern(0,0,function(){this.add(le)}))),"number"==typeof le?le=new u.Number(le):u.Color.isColor(le)?le=new u.Color(le):Array.isArray(le)&&(le=new u.Array(le)),"leading"==U?this.leading&&this.leading(le):"string"==typeof we?this.node.setAttributeNS(we,U,le.toString()):this.node.setAttribute(U,le.toString()),!this.rebuild||"font-size"!=U&&"x"!=U||this.rebuild(U,le)}return this}}),u.extend(u.Element,{transform:function(U,le){var we;return"object"!==n(U)?(we=new u.Matrix(this).extract(),"string"==typeof U?we[U]:we):(we=new u.Matrix(this),le=!!le||!!U.relative,null!=U.a&&(we=le?we.multiply(new u.Matrix(U)):new u.Matrix(U)),this.attr("transform",we))}}),u.extend(u.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(u.regex.transforms).slice(0,-1).map(function(U){var le=U.trim().split("(");return[le[0],le[1].split(u.regex.delimiter).map(function(we){return parseFloat(we)})]}).reduce(function(U,le){return"matrix"==le[0]?U.multiply(xe(le[1])):U[le[0]].apply(U,le[1])},new u.Matrix)},toParent:function(U){if(this==U)return this;var le=this.screenCTM(),we=U.screenCTM().inverse();return this.addTo(U).untransform().transform(we.multiply(le)),this},toDoc:function(){return this.toParent(this.doc())}}),u.Transformation=u.invent({create:function(U,le){if(arguments.length>1&&"boolean"!=typeof le)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(U))for(var we=0,Le=this.arguments.length;we<Le;++we)this[this.arguments[we]]=U[we];else if(U&&"object"===n(U))for(we=0,Le=this.arguments.length;we<Le;++we)this[this.arguments[we]]=U[this.arguments[we]];this.inversed=!1,!0===le&&(this.inversed=!0)}}),u.Translate=u.invent({parent:u.Matrix,inherit:u.Transformation,create:function(U,le){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),u.extend(u.Element,{style:function(U,le){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===n(U))for(var we in U)this.style(we,U[we]);else{if(!u.regex.isCss.test(U))return this.node.style[H(U)];for(U=U.split(/\s*;\s*/).filter(function(Le){return!!Le}).map(function(Le){return Le.split(/\s*:\s*/)});le=U.pop();)this.style(le[0],le[1])}else this.node.style[H(U)]=null===le||u.regex.isBlank.test(le)?"":le;return this}}),u.Parent=u.invent({create:function(U){this.constructor.call(this,U)},inherit:u.Element,extend:{children:function(){return u.utils.map(u.utils.filterSVGElements(this.node.childNodes),function(U){return u.adopt(U)})},add:function(U,le){return null==le?this.node.appendChild(U.node):U.node!=this.node.childNodes[le]&&this.node.insertBefore(U.node,this.node.childNodes[le]),this},put:function(U,le){return this.add(U,le),U},has:function(U){return this.index(U)>=0},index:function(U){return[].slice.call(this.node.childNodes).indexOf(U.node)},get:function(U){return u.adopt(this.node.childNodes[U])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(U,le){for(var we=this.children(),Le=0,je=we.length;Le<je;Le++)we[Le]instanceof u.Element&&U.apply(we[Le],[Le,we]),le&&we[Le]instanceof u.Container&&we[Le].each(U,le);return this},removeElement:function(U){return this.node.removeChild(U.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),u.extend(u.Parent,{ungroup:function(U,le){return 0===le||this instanceof u.Defs||this.node==u.parser.draw||(U=U||(this instanceof u.Doc?this:this.parent(u.Parent)),le=le||1/0,this.each(function(){return this instanceof u.Defs?this:this instanceof u.Parent?this.ungroup(U,le-1):this.toParent(U)}),this.node.firstChild||this.remove()),this},flatten:function(U,le){return this.ungroup(U,le)}}),u.Container=u.invent({create:function(U){this.constructor.call(this,U)},inherit:u.Parent}),u.ViewBox=u.invent({parent:u.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(U){u.Element.prototype[U]=function(le){return u.on(this.node,U,le),this}}),u.listeners=[],u.handlerMap=[],u.listenerId=0,u.on=function(U,le,we,Le,je){var lt=we.bind(Le||U.instance||U),jt=(u.handlerMap.indexOf(U)+1||u.handlerMap.push(U))-1,qt=le.split(".")[0],Di=le.split(".")[1]||"*";u.listeners[jt]=u.listeners[jt]||{},u.listeners[jt][qt]=u.listeners[jt][qt]||{},u.listeners[jt][qt][Di]=u.listeners[jt][qt][Di]||{},we._svgjsListenerId||(we._svgjsListenerId=++u.listenerId),u.listeners[jt][qt][Di][we._svgjsListenerId]=lt,U.addEventListener(qt,lt,je||{passive:!1})},u.off=function(U,le,we){var Le=u.handlerMap.indexOf(U),je=le&&le.split(".")[0],lt=le&&le.split(".")[1],jt="";if(-1!=Le)if(we){if("function"==typeof we&&(we=we._svgjsListenerId),!we)return;u.listeners[Le][je]&&u.listeners[Le][je][lt||"*"]&&(U.removeEventListener(je,u.listeners[Le][je][lt||"*"][we],!1),delete u.listeners[Le][je][lt||"*"][we])}else if(lt&&je){if(u.listeners[Le][je]&&u.listeners[Le][je][lt]){for(var qt in u.listeners[Le][je][lt])u.off(U,[je,lt].join("."),qt);delete u.listeners[Le][je][lt]}}else if(lt)for(var Di in u.listeners[Le])for(var jt in u.listeners[Le][Di])lt===jt&&u.off(U,[Di,lt].join("."));else if(je){if(u.listeners[Le][je]){for(var jt in u.listeners[Le][je])u.off(U,[je,jt].join("."));delete u.listeners[Le][je]}}else{for(var Di in u.listeners[Le])u.off(U,Di);delete u.listeners[Le],delete u.handlerMap[Le]}},u.extend(u.Element,{on:function(U,le,we,Le){return u.on(this.node,U,le,we,Le),this},off:function(U,le){return u.off(this.node,U,le),this},fire:function(U,le){return this.node.dispatchEvent(U instanceof ge.Event?U:U=new u.CustomEvent(U,{detail:le,cancelable:!0})),this._event=U,this},event:function(){return this._event}}),u.Defs=u.invent({create:"defs",inherit:u.Container}),u.G=u.invent({create:"g",inherit:u.Container,extend:{x:function(U){return null==U?this.transform("x"):this.transform({x:U-this.x()},!0)}},construct:{group:function(){return this.put(new u.G)}}}),u.Doc=u.invent({create:function(U){U&&("svg"==(U="string"==typeof U?l.getElementById(U):U).nodeName?this.constructor.call(this,U):(this.constructor.call(this,u.create("svg")),U.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:u.Container,extend:{namespace:function(){return this.attr({xmlns:u.ns,version:"1.1"}).attr("xmlns:xlink",u.xlink,u.xmlns).attr("xmlns:svgjs",u.svgjs,u.xmlns)},defs:function(){var U;return this._defs||(this._defs=(U=this.node.getElementsByTagName("defs")[0])?u.adopt(U):new u.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,u.parser.draw&&!u.parser.draw.parentNode&&this.node.appendChild(u.parser.draw),this},clone:function(U){this.writeDataToDom();var le=this.node,we=Se(le.cloneNode(!0));return U?(U.node||U).appendChild(we.node):le.parentNode.insertBefore(we.node,le.nextSibling),we}}}),u.extend(u.Element,{}),u.Gradient=u.invent({create:function(U){this.constructor.call(this,u.create(U+"Gradient")),this.type=U},inherit:u.Container,extend:{at:function(U,le,we){return this.put(new u.Stop).update(U,le,we)},update:function(U){return this.clear(),"function"==typeof U&&U.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(U,le,we){return"transform"==U&&(U="gradientTransform"),u.Container.prototype.attr.call(this,U,le,we)}},construct:{gradient:function(U,le){return this.defs().gradient(U,le)}}}),u.extend(u.Gradient,u.FX,{from:function(U,le){return this.attr("radial"==(this._target||this).type?{fx:new u.Number(U),fy:new u.Number(le)}:{x1:new u.Number(U),y1:new u.Number(le)})},to:function(U,le){return this.attr("radial"==(this._target||this).type?{cx:new u.Number(U),cy:new u.Number(le)}:{x2:new u.Number(U),y2:new u.Number(le)})}}),u.extend(u.Defs,{gradient:function(U,le){return this.put(new u.Gradient(U)).update(le)}}),u.Stop=u.invent({create:"stop",inherit:u.Element,extend:{update:function(U){return("number"==typeof U||U instanceof u.Number)&&(U={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=U.opacity&&this.attr("stop-opacity",U.opacity),null!=U.color&&this.attr("stop-color",U.color),null!=U.offset&&this.attr("offset",new u.Number(U.offset)),this}}}),u.Pattern=u.invent({create:"pattern",inherit:u.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(U){return this.clear(),"function"==typeof U&&U.call(this,this),this},toString:function(){return this.fill()},attr:function(U,le,we){return"transform"==U&&(U="patternTransform"),u.Container.prototype.attr.call(this,U,le,we)}},construct:{pattern:function(U,le,we){return this.defs().pattern(U,le,we)}}}),u.extend(u.Defs,{pattern:function(U,le,we){return this.put(new u.Pattern).update(we).attr({x:0,y:0,width:U,height:le,patternUnits:"userSpaceOnUse"})}}),u.Shape=u.invent({create:function(U){this.constructor.call(this,U)},inherit:u.Element}),u.Symbol=u.invent({create:"symbol",inherit:u.Container,construct:{symbol:function(){return this.put(new u.Symbol)}}}),u.Use=u.invent({create:"use",inherit:u.Shape,extend:{element:function(U,le){return this.attr("href",(le||"")+"#"+U,u.xlink)}},construct:{use:function(U,le){return this.put(new u.Use).element(U,le)}}}),u.Rect=u.invent({create:"rect",inherit:u.Shape,construct:{rect:function(U,le){return this.put(new u.Rect).size(U,le)}}}),u.Circle=u.invent({create:"circle",inherit:u.Shape,construct:{circle:function(U){return this.put(new u.Circle).rx(new u.Number(U).divide(2)).move(0,0)}}}),u.extend(u.Circle,u.FX,{rx:function(U){return this.attr("r",U)},ry:function(U){return this.rx(U)}}),u.Ellipse=u.invent({create:"ellipse",inherit:u.Shape,construct:{ellipse:function(U,le){return this.put(new u.Ellipse).size(U,le).move(0,0)}}}),u.extend(u.Ellipse,u.Rect,u.FX,{rx:function(U){return this.attr("rx",U)},ry:function(U){return this.attr("ry",U)}}),u.extend(u.Circle,u.Ellipse,{x:function(U){return null==U?this.cx()-this.rx():this.cx(U+this.rx())},y:function(U){return null==U?this.cy()-this.ry():this.cy(U+this.ry())},cx:function(U){return null==U?this.attr("cx"):this.attr("cx",U)},cy:function(U){return null==U?this.attr("cy"):this.attr("cy",U)},width:function(U){return null==U?2*this.rx():this.rx(new u.Number(U).divide(2))},height:function(U){return null==U?2*this.ry():this.ry(new u.Number(U).divide(2))},size:function(U,le){var we=ne(this,U,le);return this.rx(new u.Number(we.width).divide(2)).ry(new u.Number(we.height).divide(2))}}),u.Line=u.invent({create:"line",inherit:u.Shape,extend:{array:function(){return new u.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(U,le,we,Le){return null==U?this.array():(U=void 0!==le?{x1:U,y1:le,x2:we,y2:Le}:new u.PointArray(U).toLine(),this.attr(U))},move:function(U,le){return this.attr(this.array().move(U,le).toLine())},size:function(U,le){var we=ne(this,U,le);return this.attr(this.array().size(we.width,we.height).toLine())}},construct:{line:function(U,le,we,Le){return u.Line.prototype.plot.apply(this.put(new u.Line),null!=U?[U,le,we,Le]:[0,0,0,0])}}}),u.Polyline=u.invent({create:"polyline",inherit:u.Shape,construct:{polyline:function(U){return this.put(new u.Polyline).plot(U||new u.PointArray)}}}),u.Polygon=u.invent({create:"polygon",inherit:u.Shape,construct:{polygon:function(U){return this.put(new u.Polygon).plot(U||new u.PointArray)}}}),u.extend(u.Polyline,u.Polygon,{array:function(){return this._array||(this._array=new u.PointArray(this.attr("points")))},plot:function(U){return null==U?this.array():this.clear().attr("points","string"==typeof U?U:this._array=new u.PointArray(U))},clear:function(){return delete this._array,this},move:function(U,le){return this.attr("points",this.array().move(U,le))},size:function(U,le){var we=ne(this,U,le);return this.attr("points",this.array().size(we.width,we.height))}}),u.extend(u.Line,u.Polyline,u.Polygon,{morphArray:u.PointArray,x:function(U){return null==U?this.bbox().x:this.move(U,this.bbox().y)},y:function(U){return null==U?this.bbox().y:this.move(this.bbox().x,U)},width:function(U){var le=this.bbox();return null==U?le.width:this.size(U,le.height)},height:function(U){var le=this.bbox();return null==U?le.height:this.size(le.width,U)}}),u.Path=u.invent({create:"path",inherit:u.Shape,extend:{morphArray:u.PathArray,array:function(){return this._array||(this._array=new u.PathArray(this.attr("d")))},plot:function(U){return null==U?this.array():this.clear().attr("d","string"==typeof U?U:this._array=new u.PathArray(U))},clear:function(){return delete this._array,this}},construct:{path:function(U){return this.put(new u.Path).plot(U||new u.PathArray)}}}),u.Image=u.invent({create:"image",inherit:u.Shape,extend:{load:function(U){if(!U)return this;var le=this,we=new ge.Image;return u.on(we,"load",function(){u.off(we);var Le=le.parent(u.Pattern);null!==Le&&(0==le.width()&&0==le.height()&&le.size(we.width,we.height),Le&&0==Le.width()&&0==Le.height()&&Le.size(le.width(),le.height()),"function"==typeof le._loaded&&le._loaded.call(le,{width:we.width,height:we.height,ratio:we.width/we.height,url:U}))}),u.on(we,"error",function(Le){u.off(we),"function"==typeof le._error&&le._error.call(le,Le)}),this.attr("href",we.src=this.src=U,u.xlink)},loaded:function(U){return this._loaded=U,this},error:function(U){return this._error=U,this}},construct:{image:function(U,le,we){return this.put(new u.Image).load(U).size(le||0,we||le||0)}}}),u.Text=u.invent({create:function(){this.constructor.call(this,u.create("text")),this.dom.leading=new u.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",u.defaults.attrs["font-family"])},inherit:u.Shape,extend:{x:function(U){return null==U?this.attr("x"):this.attr("x",U)},text:function(U){if(void 0===U){U="";for(var le=this.node.childNodes,we=0,Le=le.length;we<Le;++we)0!=we&&3!=le[we].nodeType&&1==u.adopt(le[we]).dom.newLined&&(U+="\n"),U+=le[we].textContent;return U}if(this.clear().build(!0),"function"==typeof U)U.call(this,this);else{we=0;for(var je=(U=U.split("\n")).length;we<je;we++)this.tspan(U[we]).newLine()}return this.build(!1).rebuild()},size:function(U){return this.attr("font-size",U).rebuild()},leading:function(U){return null==U?this.dom.leading:(this.dom.leading=new u.Number(U),this.rebuild())},lines:function(){var U=(this.textPath&&this.textPath()||this).node,le=u.utils.map(u.utils.filterSVGElements(U.childNodes),function(we){return u.adopt(we)});return new u.Set(le)},rebuild:function(U){if("boolean"==typeof U&&(this._rebuild=U),this._rebuild){var le=this,we=0,Le=this.dom.leading*new u.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(le.textPath()||this.attr("x",le.attr("x")),"\n"==this.text()?we+=Le:(this.attr("dy",Le+we),we=0))}),this.fire("rebuild")}return this},build:function(U){return this._build=!!U,this},setData:function(U){return this.dom=U,this.dom.leading=new u.Number(U.leading||1.3),this}},construct:{text:function(U){return this.put(new u.Text).text(U)},plain:function(U){return this.put(new u.Text).plain(U)}}}),u.Tspan=u.invent({create:"tspan",inherit:u.Shape,extend:{text:function(U){return null==U?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof U?U.call(this,this):this.plain(U),this)},dx:function(U){return this.attr("dx",U)},dy:function(U){return this.attr("dy",U)},newLine:function(){var U=this.parent(u.Text);return this.dom.newLined=!0,this.dy(U.dom.leading*U.attr("font-size")).attr("x",U.x())}}}),u.extend(u.Text,u.Tspan,{plain:function(U){return!1===this._build&&this.clear(),this.node.appendChild(l.createTextNode(U)),this},tspan:function(U){var le=(this.textPath&&this.textPath()||this).node,we=new u.Tspan;return!1===this._build&&this.clear(),le.appendChild(we.node),we.text(U)},clear:function(){for(var U=(this.textPath&&this.textPath()||this).node;U.hasChildNodes();)U.removeChild(U.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),u.TextPath=u.invent({create:"textPath",inherit:u.Parent,parent:u.Text,construct:{morphArray:u.PathArray,array:function(){var U=this.track();return U?U.array():null},plot:function(U){var le=this.track(),we=null;return le&&(we=le.plot(U)),null==U?we:this},track:function(){var U=this.textPath();if(U)return U.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return u.adopt(this.node.firstChild)}}}),u.Nested=u.invent({create:function(){this.constructor.call(this,u.create("svg")),this.style("overflow","visible")},inherit:u.Container,construct:{nested:function(){return this.put(new u.Nested)}}});var M={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(U,le){return"color"==le?U:U+"-"+le}};function B(U,le,we,Le){return we+Le.replace(u.regex.dots," .")}function H(U){return U.toLowerCase().replace(/-(.)/g,function(le,we){return we.toUpperCase()})}function K(U){return U.charAt(0).toUpperCase()+U.slice(1)}function J(U){var le=U.toString(16);return 1==le.length?"0"+le:le}function ne(U,le,we){if(null==le||null==we){var Le=U.bbox();null==le?le=Le.width/Le.height*we:null==we&&(we=Le.height/Le.width*le)}return{width:le,height:we}}function de(U,le,we){return{x:le*U.a+we*U.c+0,y:le*U.b+we*U.d+0}}function xe(U){return{a:U[0],b:U[1],c:U[2],d:U[3],e:U[4],f:U[5]}}function Se(U){for(var le=U.childNodes.length-1;le>=0;le--)U.childNodes[le]instanceof ge.SVGElement&&Se(U.childNodes[le]);return u.adopt(U).id(u.eid(U.nodeName))}function Pe(U){return Math.abs(U)>1e-37?U:0}["fill","stroke"].forEach(function(U){var le={};le[U]=function(we){if(void 0===we)return this;if("string"==typeof we||u.Color.isRgb(we)||we&&"function"==typeof we.fill)this.attr(U,we);else for(var Le=M[U].length-1;Le>=0;Le--)null!=we[M[U][Le]]&&this.attr(M.prefix(U,M[U][Le]),we[M[U][Le]]);return this},u.extend(u.Element,u.FX,le)}),u.extend(u.Element,u.FX,{translate:function(U,le){return this.transform({x:U,y:le})},matrix:function(U){return this.attr("transform",new u.Matrix(6==arguments.length?[].slice.call(arguments):U))},opacity:function(U){return this.attr("opacity",U)},dx:function(U){return this.x(new u.Number(U).plus(this instanceof u.FX?0:this.x()),!0)},dy:function(U){return this.y(new u.Number(U).plus(this instanceof u.FX?0:this.y()),!0)}}),u.extend(u.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(U){return this.node.getPointAtLength(U)}}),u.Set=u.invent({create:function(U){Array.isArray(U)?this.members=U:this.clear()},extend:{add:function(){for(var U=[].slice.call(arguments),le=0,we=U.length;le<we;le++)this.members.push(U[le]);return this},remove:function(U){var le=this.index(U);return le>-1&&this.members.splice(le,1),this},each:function(U){for(var le=0,we=this.members.length;le<we;le++)U.apply(this.members[le],[le,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(U){return this.index(U)>=0},index:function(U){return this.members.indexOf(U)},get:function(U){return this.members[U]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(U){return new u.Set(U)}}}),u.FX.Set=u.invent({create:function(U){this.set=U}}),u.Set.inherit=function(){var U=[];for(var le in u.Shape.prototype)"function"==typeof u.Shape.prototype[le]&&"function"!=typeof u.Set.prototype[le]&&U.push(le);for(var le in U.forEach(function(Le){u.Set.prototype[Le]=function(){for(var je=0,lt=this.members.length;je<lt;je++)this.members[je]&&"function"==typeof this.members[je][Le]&&this.members[je][Le].apply(this.members[je],arguments);return"animate"==Le?this.fx||(this.fx=new u.FX.Set(this)):this}}),U=[],u.FX.prototype)"function"==typeof u.FX.prototype[le]&&"function"!=typeof u.FX.Set.prototype[le]&&U.push(le);U.forEach(function(we){u.FX.Set.prototype[we]=function(){for(var Le=0,je=this.set.members.length;Le<je;Le++)this.set.members[Le].fx[we].apply(this.set.members[Le].fx,arguments);return this}})},u.extend(u.Element,{}),u.extend(u.Element,{remember:function(U,le){if("object"===n(arguments[0]))for(var we in U)this.remember(we,U[we]);else{if(1==arguments.length)return this.memory()[U];this.memory()[U]=le}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var U=arguments.length-1;U>=0;U--)delete this.memory()[arguments[U]];return this},memory:function(){return this._memory||(this._memory={})}}),u.get=function(U){var le=l.getElementById(function(we){var Le=(we||"").toString().match(u.regex.reference);if(Le)return Le[1]}(U)||U);return u.adopt(le)},u.select=function(U,le){return new u.Set(u.utils.map((le||l).querySelectorAll(U),function(we){return u.adopt(we)}))},u.extend(u.Parent,{select:function(U){return u.select(U,this.node)}});var Te="abcdef".split("");if("function"!=typeof ge.CustomEvent){var Ne=function(U,le){le=le||{bubbles:!1,cancelable:!1,detail:void 0};var we=l.createEvent("CustomEvent");return we.initCustomEvent(U,le.bubbles,le.cancelable,le.detail),we};Ne.prototype=ge.Event.prototype,u.CustomEvent=Ne}else u.CustomEvent=ge.CustomEvent;return u},void 0!==(D=function(){return en(ui,ui.document)}.call(Hs,Qt,Hs,ao))&&(ao.exports=D),
/*! svg.filter.js - v2.0.2 - 2016-02-24
      * https://github.com/wout/svg.filter.js
      * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(C,M){return this.add(C,M),!C.attr("in")&&this.autoSetIn&&C.attr("in",this.source),C.attr("result")||C.attr("result",C),C},blend:function(C,M,B){return this.put(new SVG.BlendEffect(C,M,B))},colorMatrix:function(C,M){return this.put(new SVG.ColorMatrixEffect(C,M))},convolveMatrix:function(C){return this.put(new SVG.ConvolveMatrixEffect(C))},componentTransfer:function(C){return this.put(new SVG.ComponentTransferEffect(C))},composite:function(C,M,B){return this.put(new SVG.CompositeEffect(C,M,B))},flood:function(C,M){return this.put(new SVG.FloodEffect(C,M))},offset:function(C,M){return this.put(new SVG.OffsetEffect(C,M))},image:function(C){return this.put(new SVG.ImageEffect(C))},merge:function(){var C=[void 0];for(var M in arguments)C.push(arguments[M]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,C)))},gaussianBlur:function(C,M){return this.put(new SVG.GaussianBlurEffect(C,M))},morphology:function(C,M){return this.put(new SVG.MorphologyEffect(C,M))},diffuseLighting:function(C,M,B){return this.put(new SVG.DiffuseLightingEffect(C,M,B))},displacementMap:function(C,M,B,H,K){return this.put(new SVG.DisplacementMapEffect(C,M,B,H,K))},specularLighting:function(C,M,B,H){return this.put(new SVG.SpecularLightingEffect(C,M,B,H))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(C,M,B,H,K){return this.put(new SVG.TurbulenceEffect(C,M,B,H,K))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(C){var M=this.put(new SVG.Filter);return"function"==typeof C&&C.call(M,M),M}}),SVG.extend(SVG.Container,{filter:function(C){return this.defs().filter(C)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(C){return this.filterer=C instanceof SVG.Element?C:this.doc().filter(C),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(C){return this.filterer&&!0===C&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(C){return null==C?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",C)},result:function(C){return null==C?this.attr("result"):this.attr("result",C)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(C){return null==C?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",C)},result:function(C){return null==C?this.attr("result"):this.attr("result",C)},toString:function(){return this.result()}}});var ge={blend:function(C,M){return this.parent()&&this.parent().blend(this,C,M)},colorMatrix:function(C,M){return this.parent()&&this.parent().colorMatrix(C,M).in(this)},convolveMatrix:function(C){return this.parent()&&this.parent().convolveMatrix(C).in(this)},componentTransfer:function(C){return this.parent()&&this.parent().componentTransfer(C).in(this)},composite:function(C,M){return this.parent()&&this.parent().composite(this,C,M)},flood:function(C,M){return this.parent()&&this.parent().flood(C,M)},offset:function(C,M){return this.parent()&&this.parent().offset(C,M).in(this)},image:function(C){return this.parent()&&this.parent().image(C)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(C,M){return this.parent()&&this.parent().gaussianBlur(C,M).in(this)},morphology:function(C,M){return this.parent()&&this.parent().morphology(C,M).in(this)},diffuseLighting:function(C,M,B){return this.parent()&&this.parent().diffuseLighting(C,M,B).in(this)},displacementMap:function(C,M,B,H){return this.parent()&&this.parent().displacementMap(this,C,M,B,H)},specularLighting:function(C,M,B,H){return this.parent()&&this.parent().specularLighting(C,M,B,H).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(C,M,B,H,K){return this.parent()&&this.parent().turbulence(C,M,B,H,K).in(this)}};SVG.extend(SVG.Effect,ge),SVG.extend(SVG.ParentEffect,ge),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(C){this.attr("in",C)}}});var l={blend:function(C,M,B){this.attr({in:C,in2:M,mode:B||"normal"})},colorMatrix:function(C,M){"matrix"==C&&(M=y(M)),this.attr({type:C,values:void 0===M?null:M})},convolveMatrix:function(C){C=y(C),this.attr({order:Math.sqrt(C.split(" ").length),kernelMatrix:C})},composite:function(C,M,B){this.attr({in:C,in2:M,operator:B})},flood:function(C,M){this.attr("flood-color",C),null!=M&&this.attr("flood-opacity",M)},offset:function(C,M){this.attr({dx:C,dy:M})},image:function(C){this.attr("href",C,SVG.xlink)},displacementMap:function(C,M,B,H,K){this.attr({in:C,in2:M,scale:B,xChannelSelector:H,yChannelSelector:K})},gaussianBlur:function(C,M){this.attr("stdDeviation",null!=C||null!=M?function(B){if(!Array.isArray(B))return B;for(var H=0,K=B.length,J=[];H<K;H++)J.push(B[H]);return J.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(C,M){this.attr({operator:C,radius:M})},tile:function(){},turbulence:function(C,M,B,H,K){this.attr({numOctaves:M,seed:B,stitchTiles:H,baseFrequency:C,type:K})}},u={merge:function(){var C;if(arguments[0]instanceof SVG.Set){var M=this;arguments[0].each(function(H){this instanceof SVG.MergeNode?M.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&M.put(new SVG.MergeNode(this))})}else{C=Array.isArray(arguments[0])?arguments[0]:arguments;for(var B=0;B<C.length;B++)C[B]instanceof SVG.MergeNode?this.put(C[B]):this.put(new SVG.MergeNode(C[B]))}},componentTransfer:function(C){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(B){this[B]=new(SVG["Func"+B.toUpperCase()])("identity"),this.rgb.add(this[B]),this.node.appendChild(this[B].node)}.bind(this)),C)for(var M in C.rgb&&(["r","g","b"].forEach(function(B){this[B].attr(C.rgb)}.bind(this)),delete C.rgb),C)this[M].attr(C[M])},diffuseLighting:function(C,M,B){this.attr({surfaceScale:C,diffuseConstant:M,kernelUnitLength:B})},specularLighting:function(C,M,B,H){this.attr({surfaceScale:C,diffuseConstant:M,specularExponent:B,kernelUnitLength:H})}},p={distantLight:function(C,M){this.attr({azimuth:C,elevation:M})},pointLight:function(C,M,B){this.attr({x:C,y:M,z:B})},spotLight:function(C,M,B,H,K,J){this.attr({x:C,y:M,z:B,pointsAtX:H,pointsAtY:K,pointsAtZ:J})},mergeNode:function(C){this.attr("in",C)}};function y(C){return Array.isArray(C)&&(C=new SVG.Array(C)),C.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function w(){var C=function(){};for(var M in"function"==typeof arguments[arguments.length-1]&&(C=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var B in arguments[M])C(arguments[M][B],B,arguments[M])}["r","g","b","a"].forEach(function(C){p["Func"+C.toUpperCase()]=function(M){switch(this.attr("type",M),M){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),w(l,function(C,M){var B=M.charAt(0).toUpperCase()+M.slice(1);SVG[B+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+B)),C.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),w(u,function(C,M){var B=M.charAt(0).toUpperCase()+M.slice(1);SVG[B+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+B)),C.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),w(p,function(C,M){var B=M.charAt(0).toUpperCase()+M.slice(1);SVG[B]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+B)),C.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(C){return C instanceof SVG.MergeNode?this.add(C,0):this.add(new SVG.MergeNode(C),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(C){return null==C?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",C)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function ge(w,C,M,B,H,K,J){for(var ne=w.slice(C,M||J),de=B.slice(H,K||J),xe=0,Se={pos:[0,0],start:[0,0]},Pe={pos:[0,0],start:[0,0]};ne[xe]=l.call(Se,ne[xe]),de[xe]=l.call(Pe,de[xe]),ne[xe][0]!=de[xe][0]||"M"==ne[xe][0]||"A"==ne[xe][0]&&(ne[xe][4]!=de[xe][4]||ne[xe][5]!=de[xe][5])?(Array.prototype.splice.apply(ne,[xe,1].concat(p.call(Se,ne[xe]))),Array.prototype.splice.apply(de,[xe,1].concat(p.call(Pe,de[xe])))):(ne[xe]=u.call(Se,ne[xe]),de[xe]=u.call(Pe,de[xe])),++xe!=ne.length||xe!=de.length;)xe==ne.length&&ne.push(["C",Se.pos[0],Se.pos[1],Se.pos[0],Se.pos[1],Se.pos[0],Se.pos[1]]),xe==de.length&&de.push(["C",Pe.pos[0],Pe.pos[1],Pe.pos[0],Pe.pos[1],Pe.pos[0],Pe.pos[1]]);return{start:ne,dest:de}}function l(w){switch(w[0]){case"z":case"Z":w[0]="L",w[1]=this.start[0],w[2]=this.start[1];break;case"H":w[0]="L",w[2]=this.pos[1];break;case"V":w[0]="L",w[2]=w[1],w[1]=this.pos[0];break;case"T":w[0]="Q",w[3]=w[1],w[4]=w[2],w[1]=this.reflection[1],w[2]=this.reflection[0];break;case"S":w[0]="C",w[6]=w[4],w[5]=w[3],w[4]=w[2],w[3]=w[1],w[2]=this.reflection[1],w[1]=this.reflection[0]}return w}function u(w){var C=w.length;return this.pos=[w[C-2],w[C-1]],-1!="SCQT".indexOf(w[0])&&(this.reflection=[2*this.pos[0]-w[C-4],2*this.pos[1]-w[C-3]]),w}function p(w){var C=[w];switch(w[0]){case"M":return this.pos=this.start=[w[1],w[2]],C;case"L":w[5]=w[3]=w[1],w[6]=w[4]=w[2],w[1]=this.pos[0],w[2]=this.pos[1];break;case"Q":w[6]=w[4],w[5]=w[3],w[4]=1*w[4]/3+2*w[2]/3,w[3]=1*w[3]/3+2*w[1]/3,w[2]=1*this.pos[1]/3+2*w[2]/3,w[1]=1*this.pos[0]/3+2*w[1]/3;break;case"A":w=(C=function(M,B){var H,K,J,ne,de,xe,Se,Pe,Te,Ne,U,le,we,Le,je,lt,jt,qt,Di,Qi,cn,Qn,gr,Zr,hs,vs,_s=Math.abs(B[1]),Js=Math.abs(B[2]),oa=B[3]%360,Ea=B[4],Ws=B[5],ls=B[6],ka=B[7],ss=new SVG.Point(M),Ta=new SVG.Point(ls,ka),dh=[];if(0===_s||0===Js||ss.x===Ta.x&&ss.y===Ta.y)return[["C",ss.x,ss.y,Ta.x,Ta.y,Ta.x,Ta.y]];for((K=(H=new SVG.Point((ss.x-Ta.x)/2,(ss.y-Ta.y)/2).transform((new SVG.Matrix).rotate(oa))).x*H.x/(_s*_s)+H.y*H.y/(Js*Js))>1&&(_s*=K=Math.sqrt(K),Js*=K),J=(new SVG.Matrix).rotate(oa).scale(1/_s,1/Js).rotate(-oa),ss=ss.transform(J),xe=(ne=[(Ta=Ta.transform(J)).x-ss.x,Ta.y-ss.y])[0]*ne[0]+ne[1]*ne[1],de=Math.sqrt(xe),ne[0]/=de,ne[1]/=de,Se=xe<4?Math.sqrt(1-xe/4):0,Ea===Ws&&(Se*=-1),Pe=new SVG.Point((Ta.x+ss.x)/2+Se*-ne[1],(Ta.y+ss.y)/2+Se*ne[0]),Te=new SVG.Point(ss.x-Pe.x,ss.y-Pe.y),Ne=new SVG.Point(Ta.x-Pe.x,Ta.y-Pe.y),U=Math.acos(Te.x/Math.sqrt(Te.x*Te.x+Te.y*Te.y)),Te.y<0&&(U*=-1),le=Math.acos(Ne.x/Math.sqrt(Ne.x*Ne.x+Ne.y*Ne.y)),Ne.y<0&&(le*=-1),Ws&&U>le&&(le+=2*Math.PI),!Ws&&U<le&&(le-=2*Math.PI),lt=[],jt=U,we=(le-U)/(Le=Math.ceil(2*Math.abs(U-le)/Math.PI)),je=4*Math.tan(we/4)/3,cn=0;cn<=Le;cn++)Di=Math.cos(jt),qt=Math.sin(jt),Qi=new SVG.Point(Pe.x+Di,Pe.y+qt),lt[cn]=[new SVG.Point(Qi.x+je*qt,Qi.y-je*Di),Qi,new SVG.Point(Qi.x-je*qt,Qi.y+je*Di)],jt+=we;for(lt[0][0]=lt[0][1].clone(),lt[lt.length-1][2]=lt[lt.length-1][1].clone(),J=(new SVG.Matrix).rotate(oa).scale(_s,Js).rotate(-oa),cn=0,Qn=lt.length;cn<Qn;cn++)lt[cn][0]=lt[cn][0].transform(J),lt[cn][1]=lt[cn][1].transform(J),lt[cn][2]=lt[cn][2].transform(J);for(cn=1,Qn=lt.length;cn<Qn;cn++)gr=(Qi=lt[cn-1][2]).x,Zr=Qi.y,hs=(Qi=lt[cn][0]).x,vs=Qi.y,ls=(Qi=lt[cn][1]).x,dh.push(["C",gr,Zr,hs,vs,ls,ka=Qi.y]);return dh}(this.pos,w))[0]}return w[0]="C",this.pos=[w[5],w[6]],this.reflection=[2*w[5]-w[3],2*w[6]-w[4]],C}function y(w,C){if(!1===C)return!1;for(var M=C,B=w.length;M<B;++M)if("M"==w[M][0])return M;return!1}SVG.extend(SVG.PathArray,{morph:function(w){for(var C=this.value,M=this.parse(w),B=0,H=0,K=!1,J=!1;!1!==B||!1!==H;){var ne;K=y(C,!1!==B&&B+1),J=y(M,!1!==H&&H+1),!1===B&&(B=0==(ne=new SVG.PathArray(de.start).bbox()).height||0==ne.width?C.push(C[0])-1:C.push(["M",ne.x+ne.width/2,ne.y+ne.height/2])-1),!1===H&&(H=0==(ne=new SVG.PathArray(de.dest).bbox()).height||0==ne.width?M.push(M[0])-1:M.push(["M",ne.x+ne.width/2,ne.y+ne.height/2])-1);var de=ge(C,B,K,M,H,J);C=C.slice(0,B).concat(de.start,!1===K?[]:C.slice(K)),M=M.slice(0,H).concat(de.dest,!1===J?[]:M.slice(J)),B=!1!==K&&B+de.start.length,H=!1!==J&&H+de.dest.length}return this.value=C,this.destination=new SVG.PathArray,this.destination.value=M,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
      * https://github.com/svgdotjs/svg.draggable.js
      * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function ge(l){l.remember("_draggable",this),this.el=l}ge.prototype.init=function(l,u){var p=this;this.constraint=l,this.value=u,this.el.on("mousedown.drag",function(y){p.start(y)}),this.el.on("touchstart.drag",function(y){p.start(y)})},ge.prototype.transformPoint=function(l,u){var p=(l=l||window.event).changedTouches&&l.changedTouches[0]||l;return this.p.x=p.clientX-(u||0),this.p.y=p.clientY,this.p.matrixTransform(this.m)},ge.prototype.getBBox=function(){var l=this.el.bbox();return this.el instanceof SVG.Nested&&(l=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(l.x=this.el.x(),l.y=this.el.y()),l},ge.prototype.start=function(l){if("click"!=l.type&&"mousedown"!=l.type&&"mousemove"!=l.type||1==(l.which||l.buttons)){var u=this;if(this.el.fire("beforedrag",{event:l,handler:this}),!this.el.event().defaultPrevented){l.preventDefault(),l.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var p,y=this.getBBox();if(this.el instanceof SVG.Text)switch(p=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":p/=2;break;case"start":p=0}this.startPoints={point:this.transformPoint(l,p),box:y,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(w){u.drag(w)}),SVG.on(window,"touchmove.drag",function(w){u.drag(w)}),SVG.on(window,"mouseup.drag",function(w){u.end(w)}),SVG.on(window,"touchend.drag",function(w){u.end(w)}),this.el.fire("dragstart",{event:l,p:this.startPoints.point,m:this.m,handler:this})}}},ge.prototype.drag=function(l){var u=this.getBBox(),p=this.transformPoint(l),y=this.startPoints.box.x+p.x-this.startPoints.point.x,w=this.startPoints.box.y+p.y-this.startPoints.point.y,C=this.constraint,M=p.x-this.startPoints.point.x,B=p.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:l,p,m:this.m,handler:this}),this.el.event().defaultPrevented)return p;if("function"==typeof C){var H=C.call(this.el,y,w,this.m);"boolean"==typeof H&&(H={x:H,y:H}),!0===H.x?this.el.x(y):!1!==H.x&&this.el.x(H.x),!0===H.y?this.el.y(w):!1!==H.y&&this.el.y(H.y)}else"object"==typeof C&&(null!=C.minX&&y<C.minX?M=(y=C.minX)-this.startPoints.box.x:null!=C.maxX&&y>C.maxX-u.width&&(M=(y=C.maxX-u.width)-this.startPoints.box.x),null!=C.minY&&w<C.minY?B=(w=C.minY)-this.startPoints.box.y:null!=C.maxY&&w>C.maxY-u.height&&(B=(w=C.maxY-u.height)-this.startPoints.box.y),null!=C.snapToGrid&&(y-=y%C.snapToGrid,w-=w%C.snapToGrid,M-=M%C.snapToGrid,B-=B%C.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:M,y:B},!0):this.el.move(y,w));return p},ge.prototype.end=function(l){var u=this.drag(l);this.el.fire("dragend",{event:l,p:u,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(l,u){"function"!=typeof l&&"object"!=typeof l||(u=l,l=!0);var p=this.remember("_draggable")||new ge(this);return(l=void 0===l||l)?p.init(u||{},l):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function ge(l){this.el=l,l.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(u,p,y){var w="string"!=typeof u?u:p[u];return y?w/2:w},this.pointCoords=function(u,p){var y=this.pointsList[u];return{x:this.pointCoord(y[0],p,"t"===u||"b"===u),y:this.pointCoord(y[1],p,"r"===u||"l"===u)}}}ge.prototype.init=function(l,u){var p=this.el.bbox();this.options={};var y=this.el.selectize.defaults.points;for(var w in this.el.selectize.defaults)this.options[w]=this.el.selectize.defaults[w],void 0!==u[w]&&(this.options[w]=u[w]);var C=["points","pointsExclude"];for(var w in C){var M=this.options[C[w]];"string"==typeof M?M=M.length>0?M.split(/\s*,\s*/i):[]:"boolean"==typeof M&&"points"===C[w]&&(M=M?y:[]),this.options[C[w]]=M}this.options.points=[y,this.options.points].reduce(function(B,H){return B.filter(function(K){return H.indexOf(K)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(B,H){return B.filter(function(K){return H.indexOf(K)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(p.x,p.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(l):this.selectRect(l),this.observe(),this.cleanup()},ge.prototype.selectPoints=function(l){return this.pointSelection.isSelected=l,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},ge.prototype.getPointArray=function(){var l=this.el.bbox();return this.el.array().valueOf().map(function(u){return[u[0]-l.x,u[1]-l.y]})},ge.prototype.drawPoints=function(){for(var l=this,u=this.getPointArray(),p=0,y=u.length;p<y;++p){var w=function(M){return function(B){(B=B||window.event).preventDefault?B.preventDefault():B.returnValue=!1,B.stopPropagation(),l.el.fire("point",{x:B.pageX||B.touches[0].pageX,y:B.pageY||B.touches[0].pageY,i:M,event:B})}}(p),C=this.drawPoint(u[p][0],u[p][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",w).on("mousedown",w);this.pointSelection.set.add(C)}},ge.prototype.drawPoint=function(l,u){var p=this.options.pointType;switch(p){case"circle":return this.drawCircle(l,u);case"rect":return this.drawRect(l,u);default:if("function"==typeof p)return p.call(this,l,u);throw new Error("Unknown "+p+" point type!")}},ge.prototype.drawCircle=function(l,u){return this.nested.circle(this.options.pointSize).center(l,u)},ge.prototype.drawRect=function(l,u){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(l,u)},ge.prototype.updatePointSelection=function(){var l=this.getPointArray();this.pointSelection.set.each(function(u){this.cx()===l[u][0]&&this.cy()===l[u][1]||this.center(l[u][0],l[u][1])})},ge.prototype.updateRectSelection=function(){var l=this,u=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:u.width,height:u.height}),this.options.points.length&&this.options.points.map(function(y,w){var C=l.pointCoords(y,u);l.rectSelection.set.get(w+1).center(C.x,C.y)}),this.options.rotationPoint){var p=this.rectSelection.set.length();this.rectSelection.set.get(p-1).center(u.width/2,20)}},ge.prototype.selectRect=function(l){var u=this,p=this.el.bbox();function y(M){return function(B){(B=B||window.event).preventDefault?B.preventDefault():B.returnValue=!1,B.stopPropagation(),u.el.fire(M,{x:B.pageX||B.touches[0].pageX,y:B.pageY||B.touches[0].pageY,event:B})}}if(this.rectSelection.isSelected=l,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(p.width,p.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(M,B){var H=u.pointCoords(M,p),K=u.drawPoint(H.x,H.y).attr("class",u.options.classPoints+"_"+M).on("mousedown",y(M)).on("touchstart",y(M));u.rectSelection.set.add(K)}),this.rectSelection.set.each(function(){this.addClass(u.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var w=function(M){(M=M||window.event).preventDefault?M.preventDefault():M.returnValue=!1,M.stopPropagation(),u.el.fire("rot",{x:M.pageX||M.touches[0].pageX,y:M.pageY||M.touches[0].pageY,event:M})},C=this.drawPoint(p.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",w).on("mousedown",w);this.rectSelection.set.add(C)}},ge.prototype.handler=function(){var l=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(l.x,l.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},ge.prototype.observe=function(){var l=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){l.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){l.handler()})},ge.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(l,u){return"object"==typeof l&&(u=l,l=!0),(this.remember("_selectHandler")||new ge(this)).init(void 0===l||l,u||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function ge(l){l.remember("_resizeHandler",this),this.el=l,this.parameters={},this.lastUpdateCall=null,this.p=l.doc().node.createSVGPoint()}ge.prototype.transformPoint=function(l,u,p){return this.p.x=l-(this.offset.x-window.pageXOffset),this.p.y=u-(this.offset.y-window.pageYOffset),this.p.matrixTransform(p||this.m)},ge.prototype._extractPosition=function(l){return{x:null!=l.clientX?l.clientX:l.touches[0].clientX,y:null!=l.clientY?l.clientY:l.touches[0].clientY}},ge.prototype.init=function(l){var u=this;if(this.stop(),"stop"!==l){for(var p in this.options={},this.el.resize.defaults)this.options[p]=this.el.resize.defaults[p],void 0!==l[p]&&(this.options[p]=l[p]);this.el.on("lt.resize",function(y){u.resize(y||window.event)}),this.el.on("rt.resize",function(y){u.resize(y||window.event)}),this.el.on("rb.resize",function(y){u.resize(y||window.event)}),this.el.on("lb.resize",function(y){u.resize(y||window.event)}),this.el.on("t.resize",function(y){u.resize(y||window.event)}),this.el.on("r.resize",function(y){u.resize(y||window.event)}),this.el.on("b.resize",function(y){u.resize(y||window.event)}),this.el.on("l.resize",function(y){u.resize(y||window.event)}),this.el.on("rot.resize",function(y){u.resize(y||window.event)}),this.el.on("point.resize",function(y){u.resize(y||window.event)}),this.update()}},ge.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},ge.prototype.resize=function(l){var u=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var p=this._extractPosition(l.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(p.x,p.y),x:l.detail.x,y:l.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==l.detail.i){var y=this.el.array().valueOf();this.parameters.i=l.detail.i,this.parameters.pointCoords=[y[l.detail.i][0],y[l.detail.i][1]]}switch(l.type){case"lt":this.calc=function(w,C){var M=this.snapToGrid(w,C);if(this.parameters.box.width-M[0]>0&&this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-M[0]);M=this.checkAspectRatio(M),this.el.move(this.parameters.box.x+M[0],this.parameters.box.y+M[1]).size(this.parameters.box.width-M[0],this.parameters.box.height-M[1])}};break;case"rt":this.calc=function(w,C){var M=this.snapToGrid(w,C,2);if(this.parameters.box.width+M[0]>0&&this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+M[0]);M=this.checkAspectRatio(M,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+M[1]).size(this.parameters.box.width+M[0],this.parameters.box.height-M[1])}};break;case"rb":this.calc=function(w,C){var M=this.snapToGrid(w,C,0);if(this.parameters.box.width+M[0]>0&&this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+M[0]);M=this.checkAspectRatio(M),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+M[0],this.parameters.box.height+M[1])}};break;case"lb":this.calc=function(w,C){var M=this.snapToGrid(w,C,1);if(this.parameters.box.width-M[0]>0&&this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-M[0]);M=this.checkAspectRatio(M,!0),this.el.move(this.parameters.box.x+M[0],this.parameters.box.y).size(this.parameters.box.width-M[0],this.parameters.box.height+M[1])}};break;case"t":this.calc=function(w,C){var M=this.snapToGrid(w,C,2);if(this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+M[1]).height(this.parameters.box.height-M[1])}};break;case"r":this.calc=function(w,C){var M=this.snapToGrid(w,C,0);if(this.parameters.box.width+M[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+M[0])}};break;case"b":this.calc=function(w,C){var M=this.snapToGrid(w,C,0);if(this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+M[1])}};break;case"l":this.calc=function(w,C){var M=this.snapToGrid(w,C,1);if(this.parameters.box.width-M[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+M[0],this.parameters.box.y).width(this.parameters.box.width-M[0])}};break;case"rot":this.calc=function(w,C){var M=w+this.parameters.p.x,B=C+this.parameters.p.y,H=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),K=Math.atan2(B-this.parameters.box.y-this.parameters.box.height/2,M-this.parameters.box.x-this.parameters.box.width/2),J=this.parameters.rotation+180*(K-H)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(J-J%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(w,C){var M=this.snapToGrid(w,C,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),B=this.el.array().valueOf();B[this.parameters.i][0]=this.parameters.pointCoords[0]+M[0],B[this.parameters.i][1]=this.parameters.pointCoords[1]+M[1],this.el.plot(B)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:l}),SVG.on(window,"touchmove.resize",function(w){u.update(w||window.event)}),SVG.on(window,"touchend.resize",function(){u.done()}),SVG.on(window,"mousemove.resize",function(w){u.update(w||window.event)}),SVG.on(window,"mouseup.resize",function(){u.done()})},ge.prototype.update=function(l){if(l){var u=this._extractPosition(l),p=this.transformPoint(u.x,u.y),y=p.x-this.parameters.p.x,w=p.y-this.parameters.p.y;this.lastUpdateCall=[y,w],this.calc(y,w),this.el.fire("resizing",{dx:y,dy:w,event:l})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},ge.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},ge.prototype.snapToGrid=function(l,u,p,y){var w;return w=void 0!==y?[(p+l)%this.options.snapToGrid,(y+u)%this.options.snapToGrid]:[(this.parameters.box.x+l+(1&(p=p??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+u+(2&p?0:this.parameters.box.height))%this.options.snapToGrid],l<0&&(w[0]-=this.options.snapToGrid),u<0&&(w[1]-=this.options.snapToGrid),l-=Math.abs(w[0])<this.options.snapToGrid/2?w[0]:w[0]-(l<0?-this.options.snapToGrid:this.options.snapToGrid),u-=Math.abs(w[1])<this.options.snapToGrid/2?w[1]:w[1]-(u<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(l,u,p,y)},ge.prototype.constraintToBox=function(l,u,p,y){var w,C,M=this.options.constraint||{};return void 0!==y?(w=p,C=y):(w=this.parameters.box.x+(1&p?0:this.parameters.box.width),C=this.parameters.box.y+(2&p?0:this.parameters.box.height)),void 0!==M.minX&&w+l<M.minX&&(l=M.minX-w),void 0!==M.maxX&&w+l>M.maxX&&(l=M.maxX-w),void 0!==M.minY&&C+u<M.minY&&(u=M.minY-C),void 0!==M.maxY&&C+u>M.maxY&&(u=M.maxY-C),[l,u]},ge.prototype.checkAspectRatio=function(l,u){if(!this.options.saveAspectRatio)return l;var p=l.slice(),y=this.parameters.box.width/this.parameters.box.height,w=this.parameters.box.width+l[0],C=this.parameters.box.height-l[1],M=w/C;return M<y?(p[1]=w/y-this.parameters.box.height,u&&(p[1]=-p[1])):M>y&&(p[0]=this.parameters.box.width-C*y,u&&(p[0]=-p[0])),p},SVG.extend(SVG.Element,{resize:function(l){return(this.remember("_resizeHandler")||new ge(this)).init(l||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var yt=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Ci(this.ctx),this.ctx.axes=new jn(this.ctx),this.ctx.core=new Ft(this.ctx.el,this.ctx),this.ctx.config=new hr({}),this.ctx.data=new En(this.ctx),this.ctx.grid=new Zn(this.ctx),this.ctx.graphics=new kt(this.ctx),this.ctx.coreUtils=new Oi(this.ctx),this.ctx.crosshairs=new an(this.ctx),this.ctx.events=new On(this.ctx),this.ctx.exports=new Cs(this.ctx),this.ctx.localization=new Vr(this.ctx),this.ctx.options=new Xi,this.ctx.responsive=new ur(this.ctx),this.ctx.series=new Fr(this.ctx),this.ctx.theme=new xr(this.ctx),this.ctx.formatters=new nn(this.ctx),this.ctx.titleSubtitle=new zs(this.ctx),this.ctx.legend=new Ks(this.ctx),this.ctx.toolbar=new io(this.ctx),this.ctx.tooltip=new Je(this.ctx),this.ctx.dimensions=new wr(this.ctx),this.ctx.updateHelpers=new ke(this.ctx),this.ctx.zoomPanSelection=new as(this.ctx),this.ctx.w.globals.tooltip=new Je(this.ctx)}}]),ge}(),Wt=function(){function ge(l){j(this,ge),this.ctx=l,this.w=l.w}return Be(ge,[{key:"clear",value:function(l){var u=l.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:u})}},{key:"killSVG",value:function(l){l.each(function(u,p){this.removeClass("*"),this.off(),this.stop()},!0),l.ungroup(),l.clear()}},{key:"clearDomElements",value:function(l){var u=this,y=this.w.globals.dom.Paper.node;y.parentNode&&y.parentNode.parentNode&&!l.isUpdating&&(y.parentNode.parentNode.style.minHeight="unset");var w=this.w.globals.dom.baseEl;w&&this.ctx.eventList.forEach(function(M){w.removeEventListener(M,u.ctx.events.documentEvent)});var C=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(C.Paper),C.Paper.remove(),C.elWrap=null,C.elGraphical=null,C.elLegendWrap=null,C.elLegendForeign=null,C.baseEl=null,C.elGridRect=null,C.elGridRectMask=null,C.elGridRectMarkerMask=null,C.elForecastMask=null,C.elNonForecastMask=null,C.elDefs=null}}]),ge}(),We=new WeakMap,Jt=function(){function ge(l,u){j(this,ge),this.opts=u,this.ctx=this,this.w=new Si(u).init(),this.el=l,this.w.globals.cuid=tt.randomId(),this.w.globals.chartID=this.w.config.chart.id?tt.escapeString(this.w.config.chart.id):this.w.globals.cuid,new yt(this).initModules(),this.create=tt.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Be(ge,[{key:"render",value:function(){var l=this;return new Promise(function(u,p){if(null!==l.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),l.w.config.chart.id&&Apex._chartInstances.push({id:l.w.globals.chartID,group:l.w.config.chart.group,chart:l}),l.setLocale(l.w.config.chart.defaultLocale);var y=l.w.config.chart.events.beforeMount;if("function"==typeof y&&y(l,l.w),l.events.fireEvent("beforeMount",[l,l.w]),window.addEventListener("resize",l.windowResizeHandler),function(ne,de){var xe=!1;if(ne.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var Se=ne.getBoundingClientRect();"none"!==ne.style.display&&0!==Se.width||(xe=!0)}var Pe=new ResizeObserver(function(Te){xe&&de.call(ne,Te),xe=!0});ne.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(ne.children).forEach(function(Te){return Pe.observe(Te)}):Pe.observe(ne),We.set(de,Pe)}(l.el.parentNode,l.parentResizeHandler),!l.css){var w=l.el.getRootNode&&l.el.getRootNode(),C=tt.is("ShadowRoot",w),M=l.el.ownerDocument,B=M.getElementById("apexcharts-css");if(C||!B){var H;l.css=document.createElement("style"),l.css.id="apexcharts-css",l.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var K=(null===(H=l.opts.chart)||void 0===H?void 0:H.nonce)||l.w.config.chart.nonce;K&&l.css.setAttribute("nonce",K),C?w.prepend(l.css):M.head.appendChild(l.css)}}var J=l.create(l.w.config.series,{});if(!J)return u(l);l.mount(J).then(function(){"function"==typeof l.w.config.chart.events.mounted&&l.w.config.chart.events.mounted(l,l.w),l.events.fireEvent("mounted",[l,l.w]),u(J)}).catch(function(ne){p(ne)})}else p(new Error("Element not found"))})}},{key:"create",value:function(l,u){var p=this.w;new yt(this).initModules();var y=this.w.globals;if(y.noData=!1,y.animationEnded=!1,this.responsive.checkResponsiveConfig(u),p.config.xaxis.convertedCatToNumeric&&new mr(p.config).convertCatToNumericXaxis(p.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===p.config.chart.type&&(p.config.grid.show=!1,p.config.yaxis[0].show=!1),0===y.svgWidth))return y.animationEnded=!0,null;var w=Oi.checkComboSeries(l);y.comboCharts=w.comboCharts,y.comboBarCount=w.comboBarCount;var C=l.every(function(K){return K.data&&0===K.data.length});(0===l.length||C)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(l),this.theme.init(),new Jn(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),y.noData&&y.collapsedSeries.length!==y.series.length&&!p.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),y.axisCharts&&(this.core.coreCalculations(),"category"!==p.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=p.globals.minX,this.ctx.toolbar.maxX=p.globals.maxX),this.formatters.heatmapLabelFormatters(),new Oi(this).getLargestMarkerSize(),this.dimensions.plotCoords();var M=this.core.xySettings();this.grid.createGridMask();var B=this.core.plotChartType(l,M),H=new Xr(this);return H.bringForward(),p.config.dataLabels.background.enabled&&H.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:B,xyRatios:M,dimensions:{plot:{left:p.globals.translateX,top:p.globals.translateY,width:p.globals.gridWidth,height:p.globals.gridHeight}}}}},{key:"mount",value:function(){var l=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,p=this,y=p.w;return new Promise(function(w,C){if(null===p.el)return C(new Error("Not enough data to display or target element not found"));(null===u||y.globals.allSeriesCollapsed)&&p.series.handleNoData(),p.grid=new Zn(p);var M,B,H=p.grid.drawGrid();if(p.annotations=new Tn(p),p.annotations.drawImageAnnos(),p.annotations.drawTextAnnos(),"back"===y.config.grid.position&&(H&&y.globals.dom.elGraphical.add(H.el),null!=H&&null!==(M=H.elGridBorders)&&void 0!==M&&M.node&&y.globals.dom.elGraphical.add(H.elGridBorders)),Array.isArray(u.elGraph))for(var K=0;K<u.elGraph.length;K++)y.globals.dom.elGraphical.add(u.elGraph[K]);else y.globals.dom.elGraphical.add(u.elGraph);"front"===y.config.grid.position&&(H&&y.globals.dom.elGraphical.add(H.el),null!=H&&null!==(B=H.elGridBorders)&&void 0!==B&&B.node&&y.globals.dom.elGraphical.add(H.elGridBorders)),"front"===y.config.xaxis.crosshairs.position&&p.crosshairs.drawXCrosshairs(),"front"===y.config.yaxis[0].crosshairs.position&&p.crosshairs.drawYCrosshairs(),"treemap"!==y.config.chart.type&&p.axes.drawAxis(y.config.chart.type,H);var J=new Ts(l.ctx,H),ne=new zn(l.ctx,H);if(null!==H&&(J.xAxisLabelCorrections(H.xAxisTickWidth),ne.setYAxisTextAlignments(),y.config.yaxis.map(function(xe,Se){-1===y.globals.ignoreYAxisIndexes.indexOf(Se)&&ne.yAxisTitleRotate(Se,xe.opposite)})),p.annotations.drawAxesAnnotations(),!y.globals.noData){if(y.config.tooltip.enabled&&!y.globals.noData&&p.w.globals.tooltip.drawTooltip(u.xyRatios),y.globals.axisCharts&&(y.globals.isXNumeric||y.config.xaxis.convertedCatToNumeric||y.globals.isRangeBar))(y.config.chart.zoom.enabled||y.config.chart.selection&&y.config.chart.selection.enabled||y.config.chart.pan&&y.config.chart.pan.enabled)&&p.zoomPanSelection.init({xyRatios:u.xyRatios});else{var de=y.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(xe){de[xe]=!1})}y.config.chart.toolbar.show&&!y.globals.allSeriesCollapsed&&p.toolbar.createToolbar()}y.globals.memory.methodsToExec.length>0&&y.globals.memory.methodsToExec.forEach(function(xe){xe.method(xe.params,!1,xe.context)}),y.globals.axisCharts||y.globals.noData||p.core.resizeNonAxisCharts(),w(p)})}},{key:"destroy",value:function(){var l,u;window.removeEventListener("resize",this.windowResizeHandler),(u=We.get(l=this.parentResizeHandler))&&(u.disconnect(),We.delete(l));var p=this.w.config.chart.id;p&&Apex._chartInstances.forEach(function(y,w){y.id===tt.escapeString(p)&&Apex._chartInstances.splice(w,1)}),new Wt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(l){var u=this,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],y=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],w=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],C=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],M=this.w;return M.globals.selection=void 0,l.series&&(this.series.resetSeries(!1,!0,!1),l.series.length&&l.series[0].data&&(l.series=l.series.map(function(B,H){return u.updateHelpers._extendSeries(B,H)})),this.updateHelpers.revertDefaultAxisMinMax()),l.xaxis&&(l=this.updateHelpers.forceXAxisUpdate(l)),l.yaxis&&(l=this.updateHelpers.forceYAxisUpdate(l)),M.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),l.theme&&(l=this.theme.updateThemeOptions(l)),this.updateHelpers._updateOptions(l,p,y,w,C)}},{key:"updateSeries",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(l,u,p)}},{key:"appendSeries",value:function(l){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],y=this.w.config.series.slice();return y.push(l),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(y,u,p)}},{key:"appendData",value:function(l){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=this;p.w.globals.dataChanged=!0,p.series.getPreviousPaths();for(var y=p.w.config.series.slice(),w=0;w<y.length;w++)if(null!=l[w])for(var C=0;C<l[w].data.length;C++)y[w].data.push(l[w].data[C]);return p.w.config.series=y,u&&(p.w.globals.initialSeries=tt.clone(p.w.config.series)),this.update()}},{key:"update",value:function(l){var u=this;return new Promise(function(p,y){new Wt(u.ctx).clear({isUpdating:!0});var w=u.create(u.w.config.series,l);if(!w)return p(u);u.mount(w).then(function(){"function"==typeof u.w.config.chart.events.updated&&u.w.config.chart.events.updated(u,u.w),u.events.fireEvent("updated",[u,u.w]),u.w.globals.isDirty=!0,p(u)}).catch(function(C){y(C)})})}},{key:"getSyncedCharts",value:function(){var l=this.getGroupedCharts(),u=[this];return l.length&&(u=[],l.forEach(function(p){u.push(p)})),u}},{key:"getGroupedCharts",value:function(){var l=this;return Apex._chartInstances.filter(function(u){if(u.group)return!0}).map(function(u){return l.w.config.chart.group===u.group?u.chart:l})}},{key:"toggleSeries",value:function(l){return this.series.toggleSeries(l)}},{key:"highlightSeriesOnLegendHover",value:function(l,u){return this.series.toggleSeriesOnHover(l,u)}},{key:"showSeries",value:function(l){this.series.showSeries(l)}},{key:"hideSeries",value:function(l){this.series.hideSeries(l)}},{key:"isSeriesHidden",value:function(l){this.series.isSeriesHidden(l)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(l,u){this.events.addEventListener(l,u)}},{key:"removeEventListener",value:function(l,u){this.events.removeEventListener(l,u)}},{key:"addXaxisAnnotation",value:function(l){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,y=this;p&&(y=p),y.annotations.addXaxisAnnotationExternal(l,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y)}},{key:"addYaxisAnnotation",value:function(l){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,y=this;p&&(y=p),y.annotations.addYaxisAnnotationExternal(l,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y)}},{key:"addPointAnnotation",value:function(l){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,y=this;p&&(y=p),y.annotations.addPointAnnotationExternal(l,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y)}},{key:"clearAnnotations",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,u=this;l&&(u=l),u.annotations.clearAnnotations(u)}},{key:"removeAnnotation",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,p=this;u&&(p=u),p.annotations.removeAnnotation(p,l)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(l,u){return this.coreUtils.getSeriesTotalsXRange(l,u)}},{key:"getHighestValueInSeries",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new cr(this.ctx).getMinYMaxY(l).highestY}},{key:"getLowestValueInSeries",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new cr(this.ctx).getMinYMaxY(l).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(l,u){return this.updateHelpers.toggleDataPointSelection(l,u)}},{key:"zoomX",value:function(l,u){this.ctx.toolbar.zoomUpdateOptions(l,u)}},{key:"setLocale",value:function(l){this.localization.setCurrentLocaleValues(l)}},{key:"dataURI",value:function(l){return new Cs(this.ctx).dataURI(l)}},{key:"exportToCSV",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Cs(this.ctx).exportToCSV(l)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var l=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){l.w.globals.resized=!0,l.w.globals.dataChanged=!1,l.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var l=this.w.config.chart.redrawOnWindowResize;"function"==typeof l&&(l=l()),l&&this._windowResize()}}],[{key:"getChartByID",value:function(l){var u=tt.escapeString(l);if(Apex._chartInstances){var p=Apex._chartInstances.filter(function(y){return y.id===u})[0];return p&&p.chart}}},{key:"initOnLoad",value:function(){for(var l=document.querySelectorAll("[data-apexcharts]"),u=0;u<l.length;u++)new ge(l[u],JSON.parse(l[u].getAttribute("data-options"))).render()}},{key:"exec",value:function(l,u){var p=this.getChartByID(l);if(p){p.w.globals.isExecCalled=!0;var y=null;if(-1!==p.publicMethods.indexOf(u)){for(var w=arguments.length,C=new Array(w>2?w-2:0),M=2;M<w;M++)C[M-2]=arguments[M];y=p[u].apply(p,C)}return y}}},{key:"merge",value:function(l,u){return tt.extend(l,u)}}]),ge}();ao.exports=Jt},1176:ao=>{self,ao.exports=function(){var Hs={3099:function(Ze){Ze.exports=function(n){if("function"!=typeof n)throw TypeError(String(n)+" is not a function");return n}},6077:function(Ze,n,j){var He=j(111);Ze.exports=function(Be){if(!He(Be)&&null!==Be)throw TypeError("Can't set "+String(Be)+" as a prototype");return Be}},1223:function(Ze,n,j){var He=j(5112),Be=j(30),Re=j(3070),$e=He("unscopables"),it=Array.prototype;null==it[$e]&&Re.f(it,$e,{configurable:!0,value:Be(null)}),Ze.exports=function(nt){it[$e][nt]=!0}},1530:function(Ze,n,j){"use strict";var He=j(8710).charAt;Ze.exports=function(Be,Re,$e){return Re+($e?He(Be,Re).length:1)}},5787:function(Ze){Ze.exports=function(n,j,He){if(!(n instanceof j))throw TypeError("Incorrect "+(He?He+" ":"")+"invocation");return n}},9670:function(Ze,n,j){var He=j(111);Ze.exports=function(Be){if(!He(Be))throw TypeError(String(Be)+" is not an object");return Be}},4019:function(Ze){Ze.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(Ze,n,j){"use strict";var qi,He=j(4019),Be=j(9781),Re=j(7854),$e=j(111),it=j(6656),nt=j(648),_t=j(8880),gt=j(1320),Xt=j(3070).f,Et=j(9518),Tt=j(7674),Nt=j(5112),Pi=j(9711),tt=Re.Int8Array,Ci=tt&&tt.prototype,Mi=Re.Uint8ClampedArray,kt=Mi&&Mi.prototype,Oi=tt&&Et(tt),vi=Ci&&Et(Ci),hi=Object.prototype,Dt=hi.isPrototypeOf,yi=Nt("toStringTag"),Ri=Pi("TYPED_ARRAY_TAG"),Xi=He&&!!Tt&&"Opera"!==nt(Re.opera),Tn=!1,nn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},_n={BigInt64Array:8,BigUint64Array:8},mr=function(Jn){if(!$e(Jn))return!1;var ts=nt(Jn);return it(nn,ts)||it(_n,ts)};for(qi in nn)Re[qi]||(Xi=!1);if((!Xi||"function"!=typeof Oi||Oi===Function.prototype)&&(Oi=function(){throw TypeError("Incorrect invocation")},Xi))for(qi in nn)Re[qi]&&Tt(Re[qi],Oi);if((!Xi||!vi||vi===hi)&&(vi=Oi.prototype,Xi))for(qi in nn)Re[qi]&&Tt(Re[qi].prototype,vi);if(Xi&&Et(kt)!==vi&&Tt(kt,vi),Be&&!it(vi,yi))for(qi in Tn=!0,Xt(vi,yi,{get:function(){return $e(this)?this[Ri]:void 0}}),nn)Re[qi]&&_t(Re[qi],Ri,qi);Ze.exports={NATIVE_ARRAY_BUFFER_VIEWS:Xi,TYPED_ARRAY_TAG:Tn&&Ri,aTypedArray:function(Jn){if(mr(Jn))return Jn;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(Jn){if(Tt){if(Dt.call(Oi,Jn))return Jn}else for(var ts in nn)if(it(nn,qi)){var Xr=Re[ts];if(Xr&&(Jn===Xr||Dt.call(Xr,Jn)))return Jn}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(Jn,ts,Xr){if(Be){if(Xr)for(var Fr in nn){var En=Re[Fr];En&&it(En.prototype,Jn)&&delete En.prototype[Jn]}(!vi[Jn]||Xr)&&gt(vi,Jn,Xr?ts:Xi&&Ci[Jn]||ts)}},exportTypedArrayStaticMethod:function(Jn,ts,Xr){var Fr,En;if(Be){if(Tt){if(Xr)for(Fr in nn)(En=Re[Fr])&&it(En,Jn)&&delete En[Jn];if(Oi[Jn]&&!Xr)return;try{return gt(Oi,Jn,Xr?ts:Xi&&tt[Jn]||ts)}catch{}}for(Fr in nn)(En=Re[Fr])&&(!En[Jn]||Xr)&&gt(En,Jn,ts)}},isView:function(ts){if(!$e(ts))return!1;var Xr=nt(ts);return"DataView"===Xr||it(nn,Xr)||it(_n,Xr)},isTypedArray:mr,TypedArray:Oi,TypedArrayPrototype:vi}},3331:function(Ze,n,j){"use strict";var He=j(7854),Be=j(9781),Re=j(4019),$e=j(8880),it=j(2248),nt=j(7293),_t=j(5787),gt=j(9958),Xt=j(7466),Et=j(7067),Tt=j(1179),Nt=j(9518),Pi=j(7674),tt=j(8006).f,Ci=j(3070).f,Mi=j(1285),kt=j(8003),Oi=j(9909),vi=Oi.get,hi=Oi.set,Dt="ArrayBuffer",yi="DataView",Ri="prototype",Tn="Wrong index",qi=He[Dt],nn=qi,_n=He[yi],Fn=_n&&_n[Ri],mr=Object.prototype,hr=He.RangeError,Nr=Tt.pack,Si=Tt.unpack,kn=function(jn){return[255&jn]},Jn=function(jn){return[255&jn,jn>>8&255]},ts=function(jn){return[255&jn,jn>>8&255,jn>>16&255,jn>>24&255]},Xr=function(jn){return jn[3]<<24|jn[2]<<16|jn[1]<<8|jn[0]},Fr=function(jn){return Nr(jn,23,4)},En=function(jn){return Nr(jn,52,8)},Os=function(jn,an){Ci(jn[Ri],an,{get:function(){return vi(this)[an]}})},Cs=function(jn,an,ur,xr){var zs=Et(ur),Vs=vi(jn);if(zs+an>Vs.byteLength)throw hr(Tn);var Fs=vi(Vs.buffer).bytes,Ds=zs+Vs.byteOffset,Es=Fs.slice(Ds,Ds+an);return xr?Es:Es.reverse()},Ts=function(jn,an,ur,xr,zs,Vs){var Fs=Et(ur),Ds=vi(jn);if(Fs+an>Ds.byteLength)throw hr(Tn);for(var Es=vi(Ds.buffer).bytes,wr=Fs+Ds.byteOffset,us=xr(+zs),Ks=0;Ks<an;Ks++)Es[wr+Ks]=us[Vs?Ks:an-Ks-1]};if(Re){if(!nt(function(){qi(1)})||!nt(function(){new qi(-1)})||nt(function(){return new qi,new qi(1.5),new qi(NaN),qi.name!=Dt})){for(var zn,Zn=(nn=function(an){return _t(this,nn),new qi(Et(an))})[Ri]=qi[Ri],Un=tt(qi),cr=0;Un.length>cr;)(zn=Un[cr++])in nn||$e(nn,zn,qi[zn]);Zn.constructor=nn}Pi&&Nt(Fn)!==mr&&Pi(Fn,mr);var On=new _n(new nn(2)),Vr=Fn.setInt8;On.setInt8(0,2147483648),On.setInt8(1,2147483649),(On.getInt8(0)||!On.getInt8(1))&&it(Fn,{setInt8:function(an,ur){Vr.call(this,an,ur<<24>>24)},setUint8:function(an,ur){Vr.call(this,an,ur<<24>>24)}},{unsafe:!0})}else nn=function(an){_t(this,nn,Dt);var ur=Et(an);hi(this,{bytes:Mi.call(new Array(ur),0),byteLength:ur}),Be||(this.byteLength=ur)},_n=function(an,ur,xr){_t(this,_n,yi),_t(an,nn,yi);var zs=vi(an).byteLength,Vs=gt(ur);if(Vs<0||Vs>zs)throw hr("Wrong offset");if(Vs+(xr=void 0===xr?zs-Vs:Xt(xr))>zs)throw hr("Wrong length");hi(this,{buffer:an,byteLength:xr,byteOffset:Vs}),Be||(this.buffer=an,this.byteLength=xr,this.byteOffset=Vs)},Be&&(Os(nn,"byteLength"),Os(_n,"buffer"),Os(_n,"byteLength"),Os(_n,"byteOffset")),it(_n[Ri],{getInt8:function(an){return Cs(this,1,an)[0]<<24>>24},getUint8:function(an){return Cs(this,1,an)[0]},getInt16:function(an){var ur=Cs(this,2,an,arguments.length>1?arguments[1]:void 0);return(ur[1]<<8|ur[0])<<16>>16},getUint16:function(an){var ur=Cs(this,2,an,arguments.length>1?arguments[1]:void 0);return ur[1]<<8|ur[0]},getInt32:function(an){return Xr(Cs(this,4,an,arguments.length>1?arguments[1]:void 0))},getUint32:function(an){return Xr(Cs(this,4,an,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(an){return Si(Cs(this,4,an,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(an){return Si(Cs(this,8,an,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(an,ur){Ts(this,1,an,kn,ur)},setUint8:function(an,ur){Ts(this,1,an,kn,ur)},setInt16:function(an,ur){Ts(this,2,an,Jn,ur,arguments.length>2?arguments[2]:void 0)},setUint16:function(an,ur){Ts(this,2,an,Jn,ur,arguments.length>2?arguments[2]:void 0)},setInt32:function(an,ur){Ts(this,4,an,ts,ur,arguments.length>2?arguments[2]:void 0)},setUint32:function(an,ur){Ts(this,4,an,ts,ur,arguments.length>2?arguments[2]:void 0)},setFloat32:function(an,ur){Ts(this,4,an,Fr,ur,arguments.length>2?arguments[2]:void 0)},setFloat64:function(an,ur){Ts(this,8,an,En,ur,arguments.length>2?arguments[2]:void 0)}});kt(nn,Dt),kt(_n,yi),Ze.exports={ArrayBuffer:nn,DataView:_n}},1048:function(Ze,n,j){"use strict";var He=j(7908),Be=j(1400),Re=j(7466),$e=Math.min;Ze.exports=[].copyWithin||function(nt,_t){var gt=He(this),Xt=Re(gt.length),Et=Be(nt,Xt),Tt=Be(_t,Xt),Nt=arguments.length>2?arguments[2]:void 0,Pi=$e((void 0===Nt?Xt:Be(Nt,Xt))-Tt,Xt-Et),tt=1;for(Tt<Et&&Et<Tt+Pi&&(tt=-1,Tt+=Pi-1,Et+=Pi-1);Pi-- >0;)Tt in gt?gt[Et]=gt[Tt]:delete gt[Et],Et+=tt,Tt+=tt;return gt}},1285:function(Ze,n,j){"use strict";var He=j(7908),Be=j(1400),Re=j(7466);Ze.exports=function(it){for(var nt=He(this),_t=Re(nt.length),gt=arguments.length,Xt=Be(gt>1?arguments[1]:void 0,_t),Et=gt>2?arguments[2]:void 0,Tt=void 0===Et?_t:Be(Et,_t);Tt>Xt;)nt[Xt++]=it;return nt}},8533:function(Ze,n,j){"use strict";var He=j(2092).forEach,Re=j(9341)("forEach");Ze.exports=Re?[].forEach:function(it){return He(this,it,arguments.length>1?arguments[1]:void 0)}},8457:function(Ze,n,j){"use strict";var He=j(9974),Be=j(7908),Re=j(3411),$e=j(7659),it=j(7466),nt=j(6135),_t=j(1246);Ze.exports=function(Xt){var kt,Oi,vi,hi,Dt,yi,Et=Be(Xt),Tt="function"==typeof this?this:Array,Nt=arguments.length,Pi=Nt>1?arguments[1]:void 0,tt=void 0!==Pi,Ci=_t(Et),Mi=0;if(tt&&(Pi=He(Pi,Nt>2?arguments[2]:void 0,2)),null==Ci||Tt==Array&&$e(Ci))for(Oi=new Tt(kt=it(Et.length));kt>Mi;Mi++)yi=tt?Pi(Et[Mi],Mi):Et[Mi],nt(Oi,Mi,yi);else for(Dt=(hi=Ci.call(Et)).next,Oi=new Tt;!(vi=Dt.call(hi)).done;Mi++)yi=tt?Re(hi,Pi,[vi.value,Mi],!0):vi.value,nt(Oi,Mi,yi);return Oi.length=Mi,Oi}},1318:function(Ze,n,j){var He=j(5656),Be=j(7466),Re=j(1400),$e=function(it){return function(nt,_t,gt){var Nt,Xt=He(nt),Et=Be(Xt.length),Tt=Re(gt,Et);if(it&&_t!=_t){for(;Et>Tt;)if((Nt=Xt[Tt++])!=Nt)return!0}else for(;Et>Tt;Tt++)if((it||Tt in Xt)&&Xt[Tt]===_t)return it||Tt||0;return!it&&-1}};Ze.exports={includes:$e(!0),indexOf:$e(!1)}},2092:function(Ze,n,j){var He=j(9974),Be=j(8361),Re=j(7908),$e=j(7466),it=j(5417),nt=[].push,_t=function(gt){var Xt=1==gt,Et=2==gt,Tt=3==gt,Nt=4==gt,Pi=6==gt,tt=7==gt,Ci=5==gt||Pi;return function(Mi,kt,Oi,vi){for(var nn,_n,hi=Re(Mi),Dt=Be(hi),yi=He(kt,Oi,3),Ri=$e(Dt.length),Xi=0,Tn=vi||it,qi=Xt?Tn(Mi,Ri):Et||tt?Tn(Mi,0):void 0;Ri>Xi;Xi++)if((Ci||Xi in Dt)&&(_n=yi(nn=Dt[Xi],Xi,hi),gt))if(Xt)qi[Xi]=_n;else if(_n)switch(gt){case 3:return!0;case 5:return nn;case 6:return Xi;case 2:nt.call(qi,nn)}else switch(gt){case 4:return!1;case 7:nt.call(qi,nn)}return Pi?-1:Tt||Nt?Nt:qi}};Ze.exports={forEach:_t(0),map:_t(1),filter:_t(2),some:_t(3),every:_t(4),find:_t(5),findIndex:_t(6),filterOut:_t(7)}},6583:function(Ze,n,j){"use strict";var He=j(5656),Be=j(9958),Re=j(7466),$e=j(9341),it=Math.min,nt=[].lastIndexOf,_t=!!nt&&1/[1].lastIndexOf(1,-0)<0,gt=$e("lastIndexOf");Ze.exports=_t||!gt?function(Tt){if(_t)return nt.apply(this,arguments)||0;var Nt=He(this),Pi=Re(Nt.length),tt=Pi-1;for(arguments.length>1&&(tt=it(tt,Be(arguments[1]))),tt<0&&(tt=Pi+tt);tt>=0;tt--)if(tt in Nt&&Nt[tt]===Tt)return tt||0;return-1}:nt},1194:function(Ze,n,j){var He=j(7293),Be=j(5112),Re=j(7392),$e=Be("species");Ze.exports=function(it){return Re>=51||!He(function(){var nt=[];return(nt.constructor={})[$e]=function(){return{foo:1}},1!==nt[it](Boolean).foo})}},9341:function(Ze,n,j){"use strict";var He=j(7293);Ze.exports=function(Be,Re){var $e=[][Be];return!!$e&&He(function(){$e.call(null,Re||function(){throw 1},1)})}},3671:function(Ze,n,j){var He=j(3099),Be=j(7908),Re=j(8361),$e=j(7466),it=function(nt){return function(_t,gt,Xt,Et){He(gt);var Tt=Be(_t),Nt=Re(Tt),Pi=$e(Tt.length),tt=nt?Pi-1:0,Ci=nt?-1:1;if(Xt<2)for(;;){if(tt in Nt){Et=Nt[tt],tt+=Ci;break}if(tt+=Ci,nt?tt<0:Pi<=tt)throw TypeError("Reduce of empty array with no initial value")}for(;nt?tt>=0:Pi>tt;tt+=Ci)tt in Nt&&(Et=gt(Et,Nt[tt],tt,Tt));return Et}};Ze.exports={left:it(!1),right:it(!0)}},5417:function(Ze,n,j){var He=j(111),Be=j(3157),$e=j(5112)("species");Ze.exports=function(it,nt){var _t;return Be(it)&&("function"!=typeof(_t=it.constructor)||_t!==Array&&!Be(_t.prototype)?He(_t)&&null===(_t=_t[$e])&&(_t=void 0):_t=void 0),new(void 0===_t?Array:_t)(0===nt?0:nt)}},3411:function(Ze,n,j){var He=j(9670),Be=j(9212);Ze.exports=function(Re,$e,it,nt){try{return nt?$e(He(it)[0],it[1]):$e(it)}catch(_t){throw Be(Re),_t}}},7072:function(Ze,n,j){var Be=j(5112)("iterator"),Re=!1;try{var $e=0,it={next:function(){return{done:!!$e++}},return:function(){Re=!0}};it[Be]=function(){return this},Array.from(it,function(){throw 2})}catch{}Ze.exports=function(nt,_t){if(!_t&&!Re)return!1;var gt=!1;try{var Xt={};Xt[Be]=function(){return{next:function(){return{done:gt=!0}}}},nt(Xt)}catch{}return gt}},4326:function(Ze){var n={}.toString;Ze.exports=function(j){return n.call(j).slice(8,-1)}},648:function(Ze,n,j){var He=j(1694),Be=j(4326),$e=j(5112)("toStringTag"),it="Arguments"==Be(function(){return arguments}());Ze.exports=He?Be:function(_t){var gt,Xt,Et;return void 0===_t?"Undefined":null===_t?"Null":"string"==typeof(Xt=function(_t,gt){try{return _t[gt]}catch{}}(gt=Object(_t),$e))?Xt:it?Be(gt):"Object"==(Et=Be(gt))&&"function"==typeof gt.callee?"Arguments":Et}},9920:function(Ze,n,j){var He=j(6656),Be=j(3887),Re=j(1236),$e=j(3070);Ze.exports=function(it,nt){for(var _t=Be(nt),gt=$e.f,Xt=Re.f,Et=0;Et<_t.length;Et++){var Tt=_t[Et];He(it,Tt)||gt(it,Tt,Xt(nt,Tt))}}},8544:function(Ze,n,j){var He=j(7293);Ze.exports=!He(function(){function Be(){}return Be.prototype.constructor=null,Object.getPrototypeOf(new Be)!==Be.prototype})},4994:function(Ze,n,j){"use strict";var He=j(3383).IteratorPrototype,Be=j(30),Re=j(9114),$e=j(8003),it=j(7497),nt=function(){return this};Ze.exports=function(_t,gt,Xt){var Et=gt+" Iterator";return _t.prototype=Be(He,{next:Re(1,Xt)}),$e(_t,Et,!1,!0),it[Et]=nt,_t}},8880:function(Ze,n,j){var He=j(9781),Be=j(3070),Re=j(9114);Ze.exports=He?function($e,it,nt){return Be.f($e,it,Re(1,nt))}:function($e,it,nt){return $e[it]=nt,$e}},9114:function(Ze){Ze.exports=function(n,j){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:j}}},6135:function(Ze,n,j){"use strict";var He=j(7593),Be=j(3070),Re=j(9114);Ze.exports=function($e,it,nt){var _t=He(it);_t in $e?Be.f($e,_t,Re(0,nt)):$e[_t]=nt}},654:function(Ze,n,j){"use strict";var He=j(2109),Be=j(4994),Re=j(9518),$e=j(7674),it=j(8003),nt=j(8880),_t=j(1320),gt=j(5112),Xt=j(1913),Et=j(7497),Tt=j(3383),Nt=Tt.IteratorPrototype,Pi=Tt.BUGGY_SAFARI_ITERATORS,tt=gt("iterator"),Mi="values",kt="entries",Oi=function(){return this};Ze.exports=function(vi,hi,Dt,yi,Ri,Xi,Tn){Be(Dt,hi,yi);var Si,kn,Jn,qi=function(ts){if(ts===Ri&&hr)return hr;if(!Pi&&ts in Fn)return Fn[ts];switch(ts){case"keys":case Mi:case kt:return function(){return new Dt(this,ts)}}return function(){return new Dt(this)}},nn=hi+" Iterator",_n=!1,Fn=vi.prototype,mr=Fn[tt]||Fn["@@iterator"]||Ri&&Fn[Ri],hr=!Pi&&mr||qi(Ri),Nr="Array"==hi&&Fn.entries||mr;if(Nr&&(Si=Re(Nr.call(new vi)),Nt!==Object.prototype&&Si.next&&(!Xt&&Re(Si)!==Nt&&($e?$e(Si,Nt):"function"!=typeof Si[tt]&&nt(Si,tt,Oi)),it(Si,nn,!0,!0),Xt&&(Et[nn]=Oi))),Ri==Mi&&mr&&mr.name!==Mi&&(_n=!0,hr=function(){return mr.call(this)}),(!Xt||Tn)&&Fn[tt]!==hr&&nt(Fn,tt,hr),Et[hi]=hr,Ri)if(kn={values:qi(Mi),keys:Xi?hr:qi("keys"),entries:qi(kt)},Tn)for(Jn in kn)(Pi||_n||!(Jn in Fn))&&_t(Fn,Jn,kn[Jn]);else He({target:hi,proto:!0,forced:Pi||_n},kn);return kn}},9781:function(Ze,n,j){var He=j(7293);Ze.exports=!He(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(Ze,n,j){var He=j(7854),Be=j(111),Re=He.document,$e=Be(Re)&&Be(Re.createElement);Ze.exports=function(it){return $e?Re.createElement(it):{}}},8324:function(Ze){Ze.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(Ze,n,j){var He=j(5005);Ze.exports=He("navigator","userAgent")||""},7392:function(Ze,n,j){var nt,_t,He=j(7854),Be=j(8113),Re=He.process,$e=Re&&Re.versions,it=$e&&$e.v8;it?_t=(nt=it.split("."))[0]+nt[1]:Be&&(!(nt=Be.match(/Edge\/(\d+)/))||nt[1]>=74)&&(nt=Be.match(/Chrome\/(\d+)/))&&(_t=nt[1]),Ze.exports=_t&&+_t},748:function(Ze){Ze.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(Ze,n,j){var He=j(7854),Be=j(1236).f,Re=j(8880),$e=j(1320),it=j(3505),nt=j(9920),_t=j(4705);Ze.exports=function(gt,Xt){var tt,Ci,Mi,kt,Oi,Et=gt.target,Tt=gt.global,Nt=gt.stat;if(tt=Tt?He:Nt?He[Et]||it(Et,{}):(He[Et]||{}).prototype)for(Ci in Xt){if(kt=Xt[Ci],Mi=gt.noTargetGet?(Oi=Be(tt,Ci))&&Oi.value:tt[Ci],!_t(Tt?Ci:Et+(Nt?".":"#")+Ci,gt.forced)&&void 0!==Mi){if(typeof kt==typeof Mi)continue;nt(kt,Mi)}(gt.sham||Mi&&Mi.sham)&&Re(kt,"sham",!0),$e(tt,Ci,kt,gt)}}},7293:function(Ze){Ze.exports=function(n){try{return!!n()}catch{return!0}}},7007:function(Ze,n,j){"use strict";j(4916);var He=j(1320),Be=j(7293),Re=j(5112),$e=j(2261),it=j(8880),nt=Re("species"),_t=!Be(function(){var Nt=/./;return Nt.exec=function(){var Pi=[];return Pi.groups={a:"7"},Pi},"7"!=="".replace(Nt,"$<a>")}),gt="$0"==="a".replace(/./,"$0"),Xt=Re("replace"),Et=!!/./[Xt]&&""===/./[Xt]("a","$0"),Tt=!Be(function(){var Nt=/(?:)/,Pi=Nt.exec;Nt.exec=function(){return Pi.apply(this,arguments)};var tt="ab".split(Nt);return 2!==tt.length||"a"!==tt[0]||"b"!==tt[1]});Ze.exports=function(Nt,Pi,tt,Ci){var Mi=Re(Nt),kt=!Be(function(){var Ri={};return Ri[Mi]=function(){return 7},7!=""[Nt](Ri)}),Oi=kt&&!Be(function(){var Ri=!1,Xi=/a/;return"split"===Nt&&((Xi={}).constructor={},Xi.constructor[nt]=function(){return Xi},Xi.flags="",Xi[Mi]=/./[Mi]),Xi.exec=function(){return Ri=!0,null},Xi[Mi](""),!Ri});if(!kt||!Oi||"replace"===Nt&&(!_t||!gt||Et)||"split"===Nt&&!Tt){var vi=/./[Mi],hi=tt(Mi,""[Nt],function(Ri,Xi,Tn,qi,nn){return Xi.exec===$e?kt&&!nn?{done:!0,value:vi.call(Xi,Tn,qi)}:{done:!0,value:Ri.call(Tn,Xi,qi)}:{done:!1}},{REPLACE_KEEPS_$0:gt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Et}),yi=hi[1];He(String.prototype,Nt,hi[0]),He(RegExp.prototype,Mi,2==Pi?function(Ri,Xi){return yi.call(Ri,this,Xi)}:function(Ri){return yi.call(Ri,this)})}Ci&&it(RegExp.prototype[Mi],"sham",!0)}},9974:function(Ze,n,j){var He=j(3099);Ze.exports=function(Be,Re,$e){if(He(Be),void 0===Re)return Be;switch($e){case 0:return function(){return Be.call(Re)};case 1:return function(it){return Be.call(Re,it)};case 2:return function(it,nt){return Be.call(Re,it,nt)};case 3:return function(it,nt,_t){return Be.call(Re,it,nt,_t)}}return function(){return Be.apply(Re,arguments)}}},5005:function(Ze,n,j){var He=j(857),Be=j(7854),Re=function($e){return"function"==typeof $e?$e:void 0};Ze.exports=function($e,it){return arguments.length<2?Re(He[$e])||Re(Be[$e]):He[$e]&&He[$e][it]||Be[$e]&&Be[$e][it]}},1246:function(Ze,n,j){var He=j(648),Be=j(7497),$e=j(5112)("iterator");Ze.exports=function(it){if(null!=it)return it[$e]||it["@@iterator"]||Be[He(it)]}},8554:function(Ze,n,j){var He=j(9670),Be=j(1246);Ze.exports=function(Re){var $e=Be(Re);if("function"!=typeof $e)throw TypeError(String(Re)+" is not iterable");return He($e.call(Re))}},647:function(Ze,n,j){var He=j(7908),Be=Math.floor,Re="".replace,$e=/\$([$&'`]|\d\d?|<[^>]*>)/g,it=/\$([$&'`]|\d\d?)/g;Ze.exports=function(nt,_t,gt,Xt,Et,Tt){var Nt=gt+nt.length,Pi=Xt.length,tt=it;return void 0!==Et&&(Et=He(Et),tt=$e),Re.call(Tt,tt,function(Ci,Mi){var kt;switch(Mi.charAt(0)){case"$":return"$";case"&":return nt;case"`":return _t.slice(0,gt);case"'":return _t.slice(Nt);case"<":kt=Et[Mi.slice(1,-1)];break;default:var Oi=+Mi;if(0===Oi)return Ci;if(Oi>Pi){var vi=Be(Oi/10);return 0===vi?Ci:vi<=Pi?void 0===Xt[vi-1]?Mi.charAt(1):Xt[vi-1]+Mi.charAt(1):Ci}kt=Xt[Oi-1]}return void 0===kt?"":kt})}},7854:function(Ze,n,j){var He=function(Be){return Be&&Be.Math==Math&&Be};Ze.exports=He("object"==typeof globalThis&&globalThis)||He("object"==typeof window&&window)||He("object"==typeof self&&self)||He("object"==typeof j.g&&j.g)||function(){return this}()||Function("return this")()},6656:function(Ze){var n={}.hasOwnProperty;Ze.exports=function(j,He){return n.call(j,He)}},3501:function(Ze){Ze.exports={}},490:function(Ze,n,j){var He=j(5005);Ze.exports=He("document","documentElement")},4664:function(Ze,n,j){var He=j(9781),Be=j(7293),Re=j(317);Ze.exports=!He&&!Be(function(){return 7!=Object.defineProperty(Re("div"),"a",{get:function(){return 7}}).a})},1179:function(Ze){var n=Math.abs,j=Math.pow,He=Math.floor,Be=Math.log,Re=Math.LN2;Ze.exports={pack:function(nt,_t,gt){var Mi,kt,Oi,Xt=new Array(gt),Et=8*gt-_t-1,Tt=(1<<Et)-1,Nt=Tt>>1,Pi=23===_t?j(2,-24)-j(2,-77):0,tt=nt<0||0===nt&&1/nt<0?1:0,Ci=0;for((nt=n(nt))!=nt||nt===1/0?(kt=nt!=nt?1:0,Mi=Tt):(Mi=He(Be(nt)/Re),nt*(Oi=j(2,-Mi))<1&&(Mi--,Oi*=2),(nt+=Mi+Nt>=1?Pi/Oi:Pi*j(2,1-Nt))*Oi>=2&&(Mi++,Oi/=2),Mi+Nt>=Tt?(kt=0,Mi=Tt):Mi+Nt>=1?(kt=(nt*Oi-1)*j(2,_t),Mi+=Nt):(kt=nt*j(2,Nt-1)*j(2,_t),Mi=0));_t>=8;Xt[Ci++]=255&kt,kt/=256,_t-=8);for(Mi=Mi<<_t|kt,Et+=_t;Et>0;Xt[Ci++]=255&Mi,Mi/=256,Et-=8);return Xt[--Ci]|=128*tt,Xt},unpack:function(nt,_t){var Mi,gt=nt.length,Xt=8*gt-_t-1,Et=(1<<Xt)-1,Tt=Et>>1,Nt=Xt-7,Pi=gt-1,tt=nt[Pi--],Ci=127&tt;for(tt>>=7;Nt>0;Ci=256*Ci+nt[Pi],Pi--,Nt-=8);for(Mi=Ci&(1<<-Nt)-1,Ci>>=-Nt,Nt+=_t;Nt>0;Mi=256*Mi+nt[Pi],Pi--,Nt-=8);if(0===Ci)Ci=1-Tt;else{if(Ci===Et)return Mi?NaN:tt?-1/0:1/0;Mi+=j(2,_t),Ci-=Tt}return(tt?-1:1)*Mi*j(2,Ci-_t)}}},8361:function(Ze,n,j){var He=j(7293),Be=j(4326),Re="".split;Ze.exports=He(function(){return!Object("z").propertyIsEnumerable(0)})?function($e){return"String"==Be($e)?Re.call($e,""):Object($e)}:Object},9587:function(Ze,n,j){var He=j(111),Be=j(7674);Ze.exports=function(Re,$e,it){var nt,_t;return Be&&"function"==typeof(nt=$e.constructor)&&nt!==it&&He(_t=nt.prototype)&&_t!==it.prototype&&Be(Re,_t),Re}},2788:function(Ze,n,j){var He=j(5465),Be=Function.toString;"function"!=typeof He.inspectSource&&(He.inspectSource=function(Re){return Be.call(Re)}),Ze.exports=He.inspectSource},9909:function(Ze,n,j){var Et,Tt,Nt,He=j(8536),Be=j(7854),Re=j(111),$e=j(8880),it=j(6656),nt=j(5465),_t=j(6200),gt=j(3501);if(He){var Ci=nt.state||(nt.state=new(0,Be.WeakMap)),Mi=Ci.get,kt=Ci.has,Oi=Ci.set;Et=function(hi,Dt){return Dt.facade=hi,Oi.call(Ci,hi,Dt),Dt},Tt=function(hi){return Mi.call(Ci,hi)||{}},Nt=function(hi){return kt.call(Ci,hi)}}else{var vi=_t("state");gt[vi]=!0,Et=function(hi,Dt){return Dt.facade=hi,$e(hi,vi,Dt),Dt},Tt=function(hi){return it(hi,vi)?hi[vi]:{}},Nt=function(hi){return it(hi,vi)}}Ze.exports={set:Et,get:Tt,has:Nt,enforce:function(hi){return Nt(hi)?Tt(hi):Et(hi,{})},getterFor:function(hi){return function(Dt){var yi;if(!Re(Dt)||(yi=Tt(Dt)).type!==hi)throw TypeError("Incompatible receiver, "+hi+" required");return yi}}}},7659:function(Ze,n,j){var He=j(5112),Be=j(7497),Re=He("iterator"),$e=Array.prototype;Ze.exports=function(it){return void 0!==it&&(Be.Array===it||$e[Re]===it)}},3157:function(Ze,n,j){var He=j(4326);Ze.exports=Array.isArray||function(Re){return"Array"==He(Re)}},4705:function(Ze,n,j){var He=j(7293),Be=/#|\.prototype\./,Re=function(gt,Xt){var Et=it[$e(gt)];return Et==_t||Et!=nt&&("function"==typeof Xt?He(Xt):!!Xt)},$e=Re.normalize=function(gt){return String(gt).replace(Be,".").toLowerCase()},it=Re.data={},nt=Re.NATIVE="N",_t=Re.POLYFILL="P";Ze.exports=Re},111:function(Ze){Ze.exports=function(n){return"object"==typeof n?null!==n:"function"==typeof n}},1913:function(Ze){Ze.exports=!1},7850:function(Ze,n,j){var He=j(111),Be=j(4326),$e=j(5112)("match");Ze.exports=function(it){var nt;return He(it)&&(void 0!==(nt=it[$e])?!!nt:"RegExp"==Be(it))}},9212:function(Ze,n,j){var He=j(9670);Ze.exports=function(Be){var Re=Be.return;if(void 0!==Re)return He(Re.call(Be)).value}},3383:function(Ze,n,j){"use strict";var Et,Tt,Nt,He=j(7293),Be=j(9518),Re=j(8880),$e=j(6656),it=j(5112),nt=j(1913),_t=it("iterator"),gt=!1;[].keys&&("next"in(Nt=[].keys())?(Tt=Be(Be(Nt)))!==Object.prototype&&(Et=Tt):gt=!0);var Pi=null==Et||He(function(){var tt={};return Et[_t].call(tt)!==tt});Pi&&(Et={}),(!nt||Pi)&&!$e(Et,_t)&&Re(Et,_t,function(){return this}),Ze.exports={IteratorPrototype:Et,BUGGY_SAFARI_ITERATORS:gt}},7497:function(Ze){Ze.exports={}},133:function(Ze,n,j){var He=j(7293);Ze.exports=!!Object.getOwnPropertySymbols&&!He(function(){return!String(Symbol())})},590:function(Ze,n,j){var He=j(7293),Be=j(5112),Re=j(1913),$e=Be("iterator");Ze.exports=!He(function(){var it=new URL("b?a=1&b=2&c=3","http://a"),nt=it.searchParams,_t="";return it.pathname="c%20d",nt.forEach(function(gt,Xt){nt.delete("b"),_t+=Xt+gt}),Re&&!it.toJSON||!nt.sort||"http://a/c%20d?a=1&c=3"!==it.href||"3"!==nt.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!nt[$e]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==_t||"x"!==new URL("http://x",void 0).host})},8536:function(Ze,n,j){var He=j(7854),Be=j(2788),Re=He.WeakMap;Ze.exports="function"==typeof Re&&/native code/.test(Be(Re))},1574:function(Ze,n,j){"use strict";var He=j(9781),Be=j(7293),Re=j(1956),$e=j(5181),it=j(5296),nt=j(7908),_t=j(8361),gt=Object.assign,Xt=Object.defineProperty;Ze.exports=!gt||Be(function(){if(He&&1!==gt({b:1},gt(Xt({},"a",{enumerable:!0,get:function(){Xt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var Et={},Tt={},Nt=Symbol(),Pi="abcdefghijklmnopqrst";return Et[Nt]=7,Pi.split("").forEach(function(tt){Tt[tt]=tt}),7!=gt({},Et)[Nt]||Re(gt({},Tt)).join("")!=Pi})?function(Tt,Nt){for(var Pi=nt(Tt),tt=arguments.length,Ci=1,Mi=$e.f,kt=it.f;tt>Ci;)for(var yi,Oi=_t(arguments[Ci++]),vi=Mi?Re(Oi).concat(Mi(Oi)):Re(Oi),hi=vi.length,Dt=0;hi>Dt;)yi=vi[Dt++],(!He||kt.call(Oi,yi))&&(Pi[yi]=Oi[yi]);return Pi}:gt},30:function(Ze,n,j){var kt,He=j(9670),Be=j(6048),Re=j(748),$e=j(3501),it=j(490),nt=j(317),_t=j(6200),Et="prototype",Tt="script",Nt=_t("IE_PROTO"),Pi=function(){},tt=function(vi){return"<script>"+vi+"</"+Tt+">"},Oi=function(){try{kt=document.domain&&new ActiveXObject("htmlfile")}catch{}Oi=kt?function(vi){vi.write(tt("")),vi.close();var hi=vi.parentWindow.Object;return vi=null,hi}(kt):function(){var Dt,vi=nt("iframe");return vi.style.display="none",it.appendChild(vi),vi.src=String("javascript:"),(Dt=vi.contentWindow.document).open(),Dt.write(tt("document.F=Object")),Dt.close(),Dt.F}();for(var vi=Re.length;vi--;)delete Oi[Et][Re[vi]];return Oi()};$e[Nt]=!0,Ze.exports=Object.create||function(hi,Dt){var yi;return null!==hi?(Pi[Et]=He(hi),yi=new Pi,Pi[Et]=null,yi[Nt]=hi):yi=Oi(),void 0===Dt?yi:Be(yi,Dt)}},6048:function(Ze,n,j){var He=j(9781),Be=j(3070),Re=j(9670),$e=j(1956);Ze.exports=He?Object.defineProperties:function(nt,_t){Re(nt);for(var Tt,gt=$e(_t),Xt=gt.length,Et=0;Xt>Et;)Be.f(nt,Tt=gt[Et++],_t[Tt]);return nt}},3070:function(Ze,n,j){var He=j(9781),Be=j(4664),Re=j(9670),$e=j(7593),it=Object.defineProperty;n.f=He?it:function(_t,gt,Xt){if(Re(_t),gt=$e(gt,!0),Re(Xt),Be)try{return it(_t,gt,Xt)}catch{}if("get"in Xt||"set"in Xt)throw TypeError("Accessors not supported");return"value"in Xt&&(_t[gt]=Xt.value),_t}},1236:function(Ze,n,j){var He=j(9781),Be=j(5296),Re=j(9114),$e=j(5656),it=j(7593),nt=j(6656),_t=j(4664),gt=Object.getOwnPropertyDescriptor;n.f=He?gt:function(Et,Tt){if(Et=$e(Et),Tt=it(Tt,!0),_t)try{return gt(Et,Tt)}catch{}if(nt(Et,Tt))return Re(!Be.f.call(Et,Tt),Et[Tt])}},8006:function(Ze,n,j){var He=j(6324),Re=j(748).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(it){return He(it,Re)}},5181:function(Ze,n){n.f=Object.getOwnPropertySymbols},9518:function(Ze,n,j){var He=j(6656),Be=j(7908),Re=j(6200),$e=j(8544),it=Re("IE_PROTO"),nt=Object.prototype;Ze.exports=$e?Object.getPrototypeOf:function(_t){return _t=Be(_t),He(_t,it)?_t[it]:"function"==typeof _t.constructor&&_t instanceof _t.constructor?_t.constructor.prototype:_t instanceof Object?nt:null}},6324:function(Ze,n,j){var He=j(6656),Be=j(5656),Re=j(1318).indexOf,$e=j(3501);Ze.exports=function(it,nt){var Et,_t=Be(it),gt=0,Xt=[];for(Et in _t)!He($e,Et)&&He(_t,Et)&&Xt.push(Et);for(;nt.length>gt;)He(_t,Et=nt[gt++])&&(~Re(Xt,Et)||Xt.push(Et));return Xt}},1956:function(Ze,n,j){var He=j(6324),Be=j(748);Ze.exports=Object.keys||function($e){return He($e,Be)}},5296:function(Ze,n){"use strict";var j={}.propertyIsEnumerable,He=Object.getOwnPropertyDescriptor,Be=He&&!j.call({1:2},1);n.f=Be?function($e){var it=He(this,$e);return!!it&&it.enumerable}:j},7674:function(Ze,n,j){var He=j(9670),Be=j(6077);Ze.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var it,Re=!1,$e={};try{(it=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call($e,[]),Re=$e instanceof Array}catch{}return function(_t,gt){return He(_t),Be(gt),Re?it.call(_t,gt):_t.__proto__=gt,_t}}():void 0)},288:function(Ze,n,j){"use strict";var He=j(1694),Be=j(648);Ze.exports=He?{}.toString:function(){return"[object "+Be(this)+"]"}},3887:function(Ze,n,j){var He=j(5005),Be=j(8006),Re=j(5181),$e=j(9670);Ze.exports=He("Reflect","ownKeys")||function(nt){var _t=Be.f($e(nt)),gt=Re.f;return gt?_t.concat(gt(nt)):_t}},857:function(Ze,n,j){var He=j(7854);Ze.exports=He},2248:function(Ze,n,j){var He=j(1320);Ze.exports=function(Be,Re,$e){for(var it in Re)He(Be,it,Re[it],$e);return Be}},1320:function(Ze,n,j){var He=j(7854),Be=j(8880),Re=j(6656),$e=j(3505),it=j(2788),nt=j(9909),_t=nt.get,gt=nt.enforce,Xt=String(String).split("String");(Ze.exports=function(Et,Tt,Nt,Pi){var kt,tt=!!Pi&&!!Pi.unsafe,Ci=!!Pi&&!!Pi.enumerable,Mi=!!Pi&&!!Pi.noTargetGet;"function"==typeof Nt&&("string"==typeof Tt&&!Re(Nt,"name")&&Be(Nt,"name",Tt),(kt=gt(Nt)).source||(kt.source=Xt.join("string"==typeof Tt?Tt:""))),Et!==He?(tt?!Mi&&Et[Tt]&&(Ci=!0):delete Et[Tt],Ci?Et[Tt]=Nt:Be(Et,Tt,Nt)):Ci?Et[Tt]=Nt:$e(Tt,Nt)})(Function.prototype,"toString",function(){return"function"==typeof this&&_t(this).source||it(this)})},7651:function(Ze,n,j){var He=j(4326),Be=j(2261);Ze.exports=function(Re,$e){var it=Re.exec;if("function"==typeof it){var nt=it.call(Re,$e);if("object"!=typeof nt)throw TypeError("RegExp exec method returned something other than an Object or null");return nt}if("RegExp"!==He(Re))throw TypeError("RegExp#exec called on incompatible receiver");return Be.call(Re,$e)}},2261:function(Ze,n,j){"use strict";var Et,Tt,He=j(7066),Be=j(2999),Re=RegExp.prototype.exec,$e=String.prototype.replace,it=Re,nt=(Tt=/b*/g,Re.call(Et=/a/,"a"),Re.call(Tt,"a"),0!==Et.lastIndex||0!==Tt.lastIndex),_t=Be.UNSUPPORTED_Y||Be.BROKEN_CARET,gt=void 0!==/()??/.exec("")[1];(nt||gt||_t)&&(it=function(Tt){var Pi,tt,Ci,Mi,Nt=this,kt=_t&&Nt.sticky,Oi=He.call(Nt),vi=Nt.source,hi=0,Dt=Tt;return kt&&(-1===(Oi=Oi.replace("y","")).indexOf("g")&&(Oi+="g"),Dt=String(Tt).slice(Nt.lastIndex),Nt.lastIndex>0&&(!Nt.multiline||Nt.multiline&&"\n"!==Tt[Nt.lastIndex-1])&&(vi="(?: "+vi+")",Dt=" "+Dt,hi++),tt=new RegExp("^(?:"+vi+")",Oi)),gt&&(tt=new RegExp("^"+vi+"$(?!\\s)",Oi)),nt&&(Pi=Nt.lastIndex),Ci=Re.call(kt?tt:Nt,Dt),kt?Ci?(Ci.input=Ci.input.slice(hi),Ci[0]=Ci[0].slice(hi),Ci.index=Nt.lastIndex,Nt.lastIndex+=Ci[0].length):Nt.lastIndex=0:nt&&Ci&&(Nt.lastIndex=Nt.global?Ci.index+Ci[0].length:Pi),gt&&Ci&&Ci.length>1&&$e.call(Ci[0],tt,function(){for(Mi=1;Mi<arguments.length-2;Mi++)void 0===arguments[Mi]&&(Ci[Mi]=void 0)}),Ci}),Ze.exports=it},7066:function(Ze,n,j){"use strict";var He=j(9670);Ze.exports=function(){var Be=He(this),Re="";return Be.global&&(Re+="g"),Be.ignoreCase&&(Re+="i"),Be.multiline&&(Re+="m"),Be.dotAll&&(Re+="s"),Be.unicode&&(Re+="u"),Be.sticky&&(Re+="y"),Re}},2999:function(Ze,n,j){"use strict";var He=j(7293);function Be(Re,$e){return RegExp(Re,$e)}n.UNSUPPORTED_Y=He(function(){var Re=Be("a","y");return Re.lastIndex=2,null!=Re.exec("abcd")}),n.BROKEN_CARET=He(function(){var Re=Be("^r","gy");return Re.lastIndex=2,null!=Re.exec("str")})},4488:function(Ze){Ze.exports=function(n){if(null==n)throw TypeError("Can't call method on "+n);return n}},3505:function(Ze,n,j){var He=j(7854),Be=j(8880);Ze.exports=function(Re,$e){try{Be(He,Re,$e)}catch{He[Re]=$e}return $e}},6340:function(Ze,n,j){"use strict";var He=j(5005),Be=j(3070),Re=j(5112),$e=j(9781),it=Re("species");Ze.exports=function(nt){var _t=He(nt);$e&&_t&&!_t[it]&&(0,Be.f)(_t,it,{configurable:!0,get:function(){return this}})}},8003:function(Ze,n,j){var He=j(3070).f,Be=j(6656),$e=j(5112)("toStringTag");Ze.exports=function(it,nt,_t){it&&!Be(it=_t?it:it.prototype,$e)&&He(it,$e,{configurable:!0,value:nt})}},6200:function(Ze,n,j){var He=j(2309),Be=j(9711),Re=He("keys");Ze.exports=function($e){return Re[$e]||(Re[$e]=Be($e))}},5465:function(Ze,n,j){var He=j(7854),Be=j(3505),Re="__core-js_shared__",$e=He[Re]||Be(Re,{});Ze.exports=$e},2309:function(Ze,n,j){var He=j(1913),Be=j(5465);(Ze.exports=function(Re,$e){return Be[Re]||(Be[Re]=void 0!==$e?$e:{})})("versions",[]).push({version:"3.9.0",mode:He?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(Ze,n,j){var He=j(9670),Be=j(3099),$e=j(5112)("species");Ze.exports=function(it,nt){var gt,_t=He(it).constructor;return void 0===_t||null==(gt=He(_t)[$e])?nt:Be(gt)}},8710:function(Ze,n,j){var He=j(9958),Be=j(4488),Re=function($e){return function(it,nt){var Et,Tt,_t=String(Be(it)),gt=He(nt),Xt=_t.length;return gt<0||gt>=Xt?$e?"":void 0:(Et=_t.charCodeAt(gt))<55296||Et>56319||gt+1===Xt||(Tt=_t.charCodeAt(gt+1))<56320||Tt>57343?$e?_t.charAt(gt):Et:$e?_t.slice(gt,gt+2):Tt-56320+(Et-55296<<10)+65536}};Ze.exports={codeAt:Re(!1),charAt:Re(!0)}},3197:function(Ze){"use strict";var n=2147483647,gt=/[^\0-\u007E]/,Xt=/[.\u3002\uFF0E\uFF61]/g,Et="Overflow: input needs wider integers to process",Nt=Math.floor,Pi=String.fromCharCode,Ci=function(Oi){return Oi+22+75*(Oi<26)},Mi=function(Oi,vi,hi){var Dt=0;for(Oi=hi?Nt(Oi/700):Oi>>1,Oi+=Nt(Oi/vi);Oi>455;Dt+=36)Oi=Nt(Oi/35);return Nt(Dt+36*Oi/(Oi+38))},kt=function(Oi){var Xi,Tn,vi=[],hi=(Oi=function(Oi){for(var vi=[],hi=0,Dt=Oi.length;hi<Dt;){var yi=Oi.charCodeAt(hi++);if(yi>=55296&&yi<=56319&&hi<Dt){var Ri=Oi.charCodeAt(hi++);56320==(64512&Ri)?vi.push(((1023&yi)<<10)+(1023&Ri)+65536):(vi.push(yi),hi--)}else vi.push(yi)}return vi}(Oi)).length,Dt=128,yi=0,Ri=72;for(Xi=0;Xi<Oi.length;Xi++)(Tn=Oi[Xi])<128&&vi.push(Pi(Tn));var qi=vi.length,nn=qi;for(qi&&vi.push("-");nn<hi;){var _n=n;for(Xi=0;Xi<Oi.length;Xi++)(Tn=Oi[Xi])>=Dt&&Tn<_n&&(_n=Tn);var Fn=nn+1;if(_n-Dt>Nt((n-yi)/Fn))throw RangeError(Et);for(yi+=(_n-Dt)*Fn,Dt=_n,Xi=0;Xi<Oi.length;Xi++){if((Tn=Oi[Xi])<Dt&&++yi>n)throw RangeError(Et);if(Tn==Dt){for(var mr=yi,hr=36;;hr+=36){var Nr=hr<=Ri?1:hr>=Ri+26?26:hr-Ri;if(mr<Nr)break;var Si=mr-Nr,kn=36-Nr;vi.push(Pi(Ci(Nr+Si%kn))),mr=Nt(Si/kn)}vi.push(Pi(Ci(mr))),Ri=Mi(yi,Fn,nn==qi),yi=0,++nn}}++yi,++Dt}return vi.join("")};Ze.exports=function(Oi){var Dt,yi,vi=[],hi=Oi.toLowerCase().replace(Xt,".").split(".");for(Dt=0;Dt<hi.length;Dt++)vi.push(gt.test(yi=hi[Dt])?"xn--"+kt(yi):yi);return vi.join(".")}},6091:function(Ze,n,j){var He=j(7293),Be=j(1361);Ze.exports=function($e){return He(function(){return!!Be[$e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[$e]()||Be[$e].name!==$e})}},3111:function(Ze,n,j){var He=j(4488),Re="["+j(1361)+"]",$e=RegExp("^"+Re+Re+"*"),it=RegExp(Re+Re+"*$"),nt=function(_t){return function(gt){var Xt=String(He(gt));return 1&_t&&(Xt=Xt.replace($e,"")),2&_t&&(Xt=Xt.replace(it,"")),Xt}};Ze.exports={start:nt(1),end:nt(2),trim:nt(3)}},1400:function(Ze,n,j){var He=j(9958),Be=Math.max,Re=Math.min;Ze.exports=function($e,it){var nt=He($e);return nt<0?Be(nt+it,0):Re(nt,it)}},7067:function(Ze,n,j){var He=j(9958),Be=j(7466);Ze.exports=function(Re){if(void 0===Re)return 0;var $e=He(Re),it=Be($e);if($e!==it)throw RangeError("Wrong length or index");return it}},5656:function(Ze,n,j){var He=j(8361),Be=j(4488);Ze.exports=function(Re){return He(Be(Re))}},9958:function(Ze){var n=Math.ceil,j=Math.floor;Ze.exports=function(He){return isNaN(He=+He)?0:(He>0?j:n)(He)}},7466:function(Ze,n,j){var He=j(9958),Be=Math.min;Ze.exports=function(Re){return Re>0?Be(He(Re),9007199254740991):0}},7908:function(Ze,n,j){var He=j(4488);Ze.exports=function(Be){return Object(He(Be))}},4590:function(Ze,n,j){var He=j(3002);Ze.exports=function(Be,Re){var $e=He(Be);if($e%Re)throw RangeError("Wrong offset");return $e}},3002:function(Ze,n,j){var He=j(9958);Ze.exports=function(Be){var Re=He(Be);if(Re<0)throw RangeError("The argument can't be less than 0");return Re}},7593:function(Ze,n,j){var He=j(111);Ze.exports=function(Be,Re){if(!He(Be))return Be;var $e,it;if(Re&&"function"==typeof($e=Be.toString)&&!He(it=$e.call(Be))||"function"==typeof($e=Be.valueOf)&&!He(it=$e.call(Be))||!Re&&"function"==typeof($e=Be.toString)&&!He(it=$e.call(Be)))return it;throw TypeError("Can't convert object to primitive value")}},1694:function(Ze,n,j){var Re={};Re[j(5112)("toStringTag")]="z",Ze.exports="[object z]"===String(Re)},9843:function(Ze,n,j){"use strict";var He=j(2109),Be=j(7854),Re=j(9781),$e=j(3832),it=j(260),nt=j(3331),_t=j(5787),gt=j(9114),Xt=j(8880),Et=j(7466),Tt=j(7067),Nt=j(4590),Pi=j(7593),tt=j(6656),Ci=j(648),Mi=j(111),kt=j(30),Oi=j(7674),vi=j(8006).f,hi=j(7321),Dt=j(2092).forEach,yi=j(6340),Ri=j(3070),Xi=j(1236),Tn=j(9909),qi=j(9587),nn=Tn.get,_n=Tn.set,Fn=Ri.f,mr=Xi.f,hr=Math.round,Nr=Be.RangeError,Si=nt.ArrayBuffer,kn=nt.DataView,Jn=it.NATIVE_ARRAY_BUFFER_VIEWS,ts=it.TYPED_ARRAY_TAG,Xr=it.TypedArray,Fr=it.TypedArrayPrototype,En=it.aTypedArrayConstructor,Os=it.isTypedArray,Cs="BYTES_PER_ELEMENT",Ts="Wrong length",Zn=function(jn,an){for(var ur=0,xr=an.length,zs=new(En(jn))(xr);xr>ur;)zs[ur]=an[ur++];return zs},Un=function(jn,an){Fn(jn,an,{get:function(){return nn(this)[an]}})},cr=function(jn){var an;return jn instanceof Si||"ArrayBuffer"==(an=Ci(jn))||"SharedArrayBuffer"==an},zn=function(jn,an){return Os(jn)&&"symbol"!=typeof an&&an in jn&&String(+an)==String(an)},On=function(an,ur){return zn(an,ur=Pi(ur,!0))?gt(2,an[ur]):mr(an,ur)},Vr=function(an,ur,xr){return!(zn(an,ur=Pi(ur,!0))&&Mi(xr)&&tt(xr,"value"))||tt(xr,"get")||tt(xr,"set")||xr.configurable||tt(xr,"writable")&&!xr.writable||tt(xr,"enumerable")&&!xr.enumerable?Fn(an,ur,xr):(an[ur]=xr.value,an)};Re?(Jn||(Xi.f=On,Ri.f=Vr,Un(Fr,"buffer"),Un(Fr,"byteOffset"),Un(Fr,"byteLength"),Un(Fr,"length")),He({target:"Object",stat:!0,forced:!Jn},{getOwnPropertyDescriptor:On,defineProperty:Vr}),Ze.exports=function(jn,an,ur){var xr=jn.match(/\d+$/)[0]/8,zs=jn+(ur?"Clamped":"")+"Array",Vs="get"+jn,Fs="set"+jn,Ds=Be[zs],Es=Ds,wr=Es&&Es.prototype,us={},as=function(Rs,Ss){Fn(Rs,Ss,{get:function(){return function(Rs,Ss){var Bs=nn(Rs);return Bs.view[Vs](Ss*xr+Bs.byteOffset,!0)}(this,Ss)},set:function(Bs){return function(Rs,Ss,Bs){var xa=nn(Rs);ur&&(Bs=(Bs=hr(Bs))<0?0:Bs>255?255:255&Bs),xa.view[Fs](Ss*xr+xa.byteOffset,Bs,!0)}(this,Ss,Bs)},enumerable:!0})};Jn?$e&&(Es=an(function(Rs,Ss,Bs,xa){return _t(Rs,Es,zs),qi(Mi(Ss)?cr(Ss)?void 0!==xa?new Ds(Ss,Nt(Bs,xr),xa):void 0!==Bs?new Ds(Ss,Nt(Bs,xr)):new Ds(Ss):Os(Ss)?Zn(Es,Ss):hi.call(Es,Ss):new Ds(Tt(Ss)),Rs,Es)}),Oi&&Oi(Es,Xr),Dt(vi(Ds),function(Rs){Rs in Es||Xt(Es,Rs,Ds[Rs])}),Es.prototype=wr):(Es=an(function(Rs,Ss,Bs,xa){_t(Rs,Es,zs);var Je,At,St,Gt=0,Ue=0;if(Mi(Ss)){if(!cr(Ss))return Os(Ss)?Zn(Es,Ss):hi.call(Es,Ss);Je=Ss,Ue=Nt(Bs,xr);var si=Ss.byteLength;if(void 0===xa){if(si%xr||(At=si-Ue)<0)throw Nr(Ts)}else if((At=Et(xa)*xr)+Ue>si)throw Nr(Ts);St=At/xr}else St=Tt(Ss),Je=new Si(At=St*xr);for(_n(Rs,{buffer:Je,byteOffset:Ue,byteLength:At,length:St,view:new kn(Je)});Gt<St;)as(Rs,Gt++)}),Oi&&Oi(Es,Xr),wr=Es.prototype=kt(Fr)),wr.constructor!==Es&&Xt(wr,"constructor",Es),ts&&Xt(wr,ts,zs),us[zs]=Es,He({global:!0,forced:Es!=Ds,sham:!Jn},us),Cs in Es||Xt(Es,Cs,xr),Cs in wr||Xt(wr,Cs,xr),yi(zs)}):Ze.exports=function(){}},3832:function(Ze,n,j){var He=j(7854),Be=j(7293),Re=j(7072),$e=j(260).NATIVE_ARRAY_BUFFER_VIEWS,it=He.ArrayBuffer,nt=He.Int8Array;Ze.exports=!$e||!Be(function(){nt(1)})||!Be(function(){new nt(-1)})||!Re(function(_t){new nt,new nt(null),new nt(1.5),new nt(_t)},!0)||Be(function(){return 1!==new nt(new it(2),1,void 0).length})},3074:function(Ze,n,j){var He=j(260).aTypedArrayConstructor,Be=j(6707);Ze.exports=function(Re,$e){for(var it=Be(Re,Re.constructor),nt=0,_t=$e.length,gt=new(He(it))(_t);_t>nt;)gt[nt]=$e[nt++];return gt}},7321:function(Ze,n,j){var He=j(7908),Be=j(7466),Re=j(1246),$e=j(7659),it=j(9974),nt=j(260).aTypedArrayConstructor;Ze.exports=function(gt){var tt,Ci,Mi,kt,Oi,vi,Xt=He(gt),Et=arguments.length,Tt=Et>1?arguments[1]:void 0,Nt=void 0!==Tt,Pi=Re(Xt);if(null!=Pi&&!$e(Pi))for(vi=(Oi=Pi.call(Xt)).next,Xt=[];!(kt=vi.call(Oi)).done;)Xt.push(kt.value);for(Nt&&Et>2&&(Tt=it(Tt,arguments[2],2)),Ci=Be(Xt.length),Mi=new(nt(this))(Ci),tt=0;Ci>tt;tt++)Mi[tt]=Nt?Tt(Xt[tt],tt):Xt[tt];return Mi}},9711:function(Ze){var n=0,j=Math.random();Ze.exports=function(He){return"Symbol("+String(void 0===He?"":He)+")_"+(++n+j).toString(36)}},3307:function(Ze,n,j){var He=j(133);Ze.exports=He&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(Ze,n,j){var He=j(7854),Be=j(2309),Re=j(6656),$e=j(9711),it=j(133),nt=j(3307),_t=Be("wks"),gt=He.Symbol,Xt=nt?gt:gt&&gt.withoutSetter||$e;Ze.exports=function(Et){return Re(_t,Et)||(_t[Et]=it&&Re(gt,Et)?gt[Et]:Xt("Symbol."+Et)),_t[Et]}},1361:function(Ze){Ze.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(Ze,n,j){"use strict";var He=j(2109),Be=j(7854),Re=j(3331),$e=j(6340),it="ArrayBuffer",nt=Re[it];He({global:!0,forced:Be[it]!==nt},{ArrayBuffer:nt}),$e(it)},2222:function(Ze,n,j){"use strict";var He=j(2109),Be=j(7293),Re=j(3157),$e=j(111),it=j(7908),nt=j(7466),_t=j(6135),gt=j(5417),Xt=j(1194),Et=j(5112),Tt=j(7392),Nt=Et("isConcatSpreadable"),Pi=9007199254740991,tt="Maximum allowed index exceeded",Ci=Tt>=51||!Be(function(){var vi=[];return vi[Nt]=!1,vi.concat()[0]!==vi}),Mi=Xt("concat"),kt=function(vi){if(!$e(vi))return!1;var hi=vi[Nt];return void 0!==hi?!!hi:Re(vi)};He({target:"Array",proto:!0,forced:!Ci||!Mi},{concat:function(hi){var Xi,Tn,qi,nn,_n,Dt=it(this),yi=gt(Dt,0),Ri=0;for(Xi=-1,qi=arguments.length;Xi<qi;Xi++)if(kt(_n=-1===Xi?Dt:arguments[Xi])){if(Ri+(nn=nt(_n.length))>Pi)throw TypeError(tt);for(Tn=0;Tn<nn;Tn++,Ri++)Tn in _n&&_t(yi,Ri,_n[Tn])}else{if(Ri>=Pi)throw TypeError(tt);_t(yi,Ri++,_n)}return yi.length=Ri,yi}})},7327:function(Ze,n,j){"use strict";var He=j(2109),Be=j(2092).filter;He({target:"Array",proto:!0,forced:!j(1194)("filter")},{filter:function(nt){return Be(this,nt,arguments.length>1?arguments[1]:void 0)}})},2772:function(Ze,n,j){"use strict";var He=j(2109),Be=j(1318).indexOf,Re=j(9341),$e=[].indexOf,it=!!$e&&1/[1].indexOf(1,-0)<0,nt=Re("indexOf");He({target:"Array",proto:!0,forced:it||!nt},{indexOf:function(gt){return it?$e.apply(this,arguments)||0:Be(this,gt,arguments.length>1?arguments[1]:void 0)}})},6992:function(Ze,n,j){"use strict";var He=j(5656),Be=j(1223),Re=j(7497),$e=j(9909),it=j(654),nt="Array Iterator",_t=$e.set,gt=$e.getterFor(nt);Ze.exports=it(Array,"Array",function(Xt,Et){_t(this,{type:nt,target:He(Xt),index:0,kind:Et})},function(){var Xt=gt(this),Et=Xt.target,Tt=Xt.kind,Nt=Xt.index++;return!Et||Nt>=Et.length?(Xt.target=void 0,{value:void 0,done:!0}):"keys"==Tt?{value:Nt,done:!1}:"values"==Tt?{value:Et[Nt],done:!1}:{value:[Nt,Et[Nt]],done:!1}},"values"),Re.Arguments=Re.Array,Be("keys"),Be("values"),Be("entries")},1249:function(Ze,n,j){"use strict";var He=j(2109),Be=j(2092).map;He({target:"Array",proto:!0,forced:!j(1194)("map")},{map:function(nt){return Be(this,nt,arguments.length>1?arguments[1]:void 0)}})},7042:function(Ze,n,j){"use strict";var He=j(2109),Be=j(111),Re=j(3157),$e=j(1400),it=j(7466),nt=j(5656),_t=j(6135),gt=j(5112),Et=j(1194)("slice"),Tt=gt("species"),Nt=[].slice,Pi=Math.max;He({target:"Array",proto:!0,forced:!Et},{slice:function(Ci,Mi){var Dt,yi,Ri,kt=nt(this),Oi=it(kt.length),vi=$e(Ci,Oi),hi=$e(void 0===Mi?Oi:Mi,Oi);if(Re(kt)&&("function"!=typeof(Dt=kt.constructor)||Dt!==Array&&!Re(Dt.prototype)?Be(Dt)&&null===(Dt=Dt[Tt])&&(Dt=void 0):Dt=void 0,Dt===Array||void 0===Dt))return Nt.call(kt,vi,hi);for(yi=new(void 0===Dt?Array:Dt)(Pi(hi-vi,0)),Ri=0;vi<hi;vi++,Ri++)vi in kt&&_t(yi,Ri,kt[vi]);return yi.length=Ri,yi}})},561:function(Ze,n,j){"use strict";var He=j(2109),Be=j(1400),Re=j(9958),$e=j(7466),it=j(7908),nt=j(5417),_t=j(6135),Xt=j(1194)("splice"),Et=Math.max,Tt=Math.min;He({target:"Array",proto:!0,forced:!Xt},{splice:function(Ci,Mi){var Dt,yi,Ri,Xi,Tn,qi,kt=it(this),Oi=$e(kt.length),vi=Be(Ci,Oi),hi=arguments.length;if(0===hi?Dt=yi=0:1===hi?(Dt=0,yi=Oi-vi):(Dt=hi-2,yi=Tt(Et(Re(Mi),0),Oi-vi)),Oi+Dt-yi>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(Ri=nt(kt,yi),Xi=0;Xi<yi;Xi++)(Tn=vi+Xi)in kt&&_t(Ri,Xi,kt[Tn]);if(Ri.length=yi,Dt<yi){for(Xi=vi;Xi<Oi-yi;Xi++)qi=Xi+Dt,(Tn=Xi+yi)in kt?kt[qi]=kt[Tn]:delete kt[qi];for(Xi=Oi;Xi>Oi-yi+Dt;Xi--)delete kt[Xi-1]}else if(Dt>yi)for(Xi=Oi-yi;Xi>vi;Xi--)qi=Xi+Dt-1,(Tn=Xi+yi-1)in kt?kt[qi]=kt[Tn]:delete kt[qi];for(Xi=0;Xi<Dt;Xi++)kt[Xi+vi]=arguments[Xi+2];return kt.length=Oi-yi+Dt,Ri}})},8309:function(Ze,n,j){var He=j(9781),Be=j(3070).f,Re=Function.prototype,$e=Re.toString,it=/^\s*function ([^ (]*)/;He&&!("name"in Re)&&Be(Re,"name",{configurable:!0,get:function(){try{return $e.call(this).match(it)[1]}catch{return""}}})},489:function(Ze,n,j){var He=j(2109),Be=j(7293),Re=j(7908),$e=j(9518),it=j(8544);He({target:"Object",stat:!0,forced:Be(function(){$e(1)}),sham:!it},{getPrototypeOf:function(gt){return $e(Re(gt))}})},1539:function(Ze,n,j){var He=j(1694),Be=j(1320),Re=j(288);He||Be(Object.prototype,"toString",Re,{unsafe:!0})},4916:function(Ze,n,j){"use strict";var He=j(2109),Be=j(2261);He({target:"RegExp",proto:!0,forced:/./.exec!==Be},{exec:Be})},9714:function(Ze,n,j){"use strict";var He=j(1320),Be=j(9670),Re=j(7293),$e=j(7066),it="toString",nt=RegExp.prototype,_t=nt[it];(Re(function(){return"/a/b"!=_t.call({source:"a",flags:"b"})})||_t.name!=it)&&He(RegExp.prototype,it,function(){var Tt=Be(this),Nt=String(Tt.source),Pi=Tt.flags;return"/"+Nt+"/"+String(void 0===Pi&&Tt instanceof RegExp&&!("flags"in nt)?$e.call(Tt):Pi)},{unsafe:!0})},8783:function(Ze,n,j){"use strict";var He=j(8710).charAt,Be=j(9909),Re=j(654),$e="String Iterator",it=Be.set,nt=Be.getterFor($e);Re(String,"String",function(_t){it(this,{type:$e,string:String(_t),index:0})},function(){var Tt,gt=nt(this),Xt=gt.string,Et=gt.index;return Et>=Xt.length?{value:void 0,done:!0}:(Tt=He(Xt,Et),gt.index+=Tt.length,{value:Tt,done:!1})})},4723:function(Ze,n,j){"use strict";var He=j(7007),Be=j(9670),Re=j(7466),$e=j(4488),it=j(1530),nt=j(7651);He("match",1,function(_t,gt,Xt){return[function(Tt){var Nt=$e(this),Pi=Tt?.[_t];return void 0!==Pi?Pi.call(Tt,Nt):new RegExp(Tt)[_t](String(Nt))},function(Et){var Tt=Xt(gt,Et,this);if(Tt.done)return Tt.value;var Nt=Be(Et),Pi=String(this);if(!Nt.global)return nt(Nt,Pi);var tt=Nt.unicode;Nt.lastIndex=0;for(var kt,Ci=[],Mi=0;null!==(kt=nt(Nt,Pi));){var Oi=String(kt[0]);Ci[Mi]=Oi,""===Oi&&(Nt.lastIndex=it(Pi,Re(Nt.lastIndex),tt)),Mi++}return 0===Mi?null:Ci}]})},5306:function(Ze,n,j){"use strict";var He=j(7007),Be=j(9670),Re=j(7466),$e=j(9958),it=j(4488),nt=j(1530),_t=j(647),gt=j(7651),Xt=Math.max,Et=Math.min,Tt=function(Nt){return void 0===Nt?Nt:String(Nt)};He("replace",2,function(Nt,Pi,tt,Ci){var Mi=Ci.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,kt=Ci.REPLACE_KEEPS_$0,Oi=Mi?"$":"$0";return[function(hi,Dt){var yi=it(this),Ri=hi?.[Nt];return void 0!==Ri?Ri.call(hi,yi,Dt):Pi.call(String(yi),hi,Dt)},function(vi,hi){if(!Mi&&kt||"string"==typeof hi&&-1===hi.indexOf(Oi)){var Dt=tt(Pi,vi,this,hi);if(Dt.done)return Dt.value}var yi=Be(vi),Ri=String(this),Xi="function"==typeof hi;Xi||(hi=String(hi));var Tn=yi.global;if(Tn){var qi=yi.unicode;yi.lastIndex=0}for(var nn=[];;){var _n=gt(yi,Ri);if(null===_n||(nn.push(_n),!Tn))break;""===String(_n[0])&&(yi.lastIndex=nt(Ri,Re(yi.lastIndex),qi))}for(var mr="",hr=0,Nr=0;Nr<nn.length;Nr++){_n=nn[Nr];for(var Si=String(_n[0]),kn=Xt(Et($e(_n.index),Ri.length),0),Jn=[],ts=1;ts<_n.length;ts++)Jn.push(Tt(_n[ts]));var Xr=_n.groups;if(Xi){var Fr=[Si].concat(Jn,kn,Ri);void 0!==Xr&&Fr.push(Xr);var En=String(hi.apply(void 0,Fr))}else En=_t(Si,Ri,kn,Jn,Xr,hi);kn>=hr&&(mr+=Ri.slice(hr,kn)+En,hr=kn+Si.length)}return mr+Ri.slice(hr)}]})},3123:function(Ze,n,j){"use strict";var He=j(7007),Be=j(7850),Re=j(9670),$e=j(4488),it=j(6707),nt=j(1530),_t=j(7466),gt=j(7651),Xt=j(2261),Et=j(7293),Tt=[].push,Nt=Math.min,Pi=4294967295,tt=!Et(function(){return!RegExp(Pi,"y")});He("split",2,function(Ci,Mi,kt){var Oi;return Oi="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(vi,hi){var Dt=String($e(this)),yi=void 0===hi?Pi:hi>>>0;if(0===yi)return[];if(void 0===vi)return[Dt];if(!Be(vi))return Mi.call(Dt,vi,yi);for(var nn,_n,Fn,Ri=[],Tn=0,qi=new RegExp(vi.source,(vi.ignoreCase?"i":"")+(vi.multiline?"m":"")+(vi.unicode?"u":"")+(vi.sticky?"y":"")+"g");(nn=Xt.call(qi,Dt))&&!((_n=qi.lastIndex)>Tn&&(Ri.push(Dt.slice(Tn,nn.index)),nn.length>1&&nn.index<Dt.length&&Tt.apply(Ri,nn.slice(1)),Fn=nn[0].length,Tn=_n,Ri.length>=yi));)qi.lastIndex===nn.index&&qi.lastIndex++;return Tn===Dt.length?(Fn||!qi.test(""))&&Ri.push(""):Ri.push(Dt.slice(Tn)),Ri.length>yi?Ri.slice(0,yi):Ri}:"0".split(void 0,0).length?function(vi,hi){return void 0===vi&&0===hi?[]:Mi.call(this,vi,hi)}:Mi,[function(hi,Dt){var yi=$e(this),Ri=hi?.[Ci];return void 0!==Ri?Ri.call(hi,yi,Dt):Oi.call(String(yi),hi,Dt)},function(vi,hi){var Dt=kt(Oi,vi,this,hi,Oi!==Mi);if(Dt.done)return Dt.value;var yi=Re(vi),Ri=String(this),Xi=it(yi,RegExp),Tn=yi.unicode,nn=new Xi(tt?yi:"^(?:"+yi.source+")",(yi.ignoreCase?"i":"")+(yi.multiline?"m":"")+(yi.unicode?"u":"")+(tt?"y":"g")),_n=void 0===hi?Pi:hi>>>0;if(0===_n)return[];if(0===Ri.length)return null===gt(nn,Ri)?[Ri]:[];for(var Fn=0,mr=0,hr=[];mr<Ri.length;){nn.lastIndex=tt?mr:0;var Si,Nr=gt(nn,tt?Ri:Ri.slice(mr));if(null===Nr||(Si=Nt(_t(nn.lastIndex+(tt?0:mr)),Ri.length))===Fn)mr=nt(Ri,mr,Tn);else{if(hr.push(Ri.slice(Fn,mr)),hr.length===_n)return hr;for(var kn=1;kn<=Nr.length-1;kn++)if(hr.push(Nr[kn]),hr.length===_n)return hr;mr=Fn=Si}}return hr.push(Ri.slice(Fn)),hr}]},!tt)},3210:function(Ze,n,j){"use strict";var He=j(2109),Be=j(3111).trim;He({target:"String",proto:!0,forced:j(6091)("trim")},{trim:function(){return Be(this)}})},2990:function(Ze,n,j){"use strict";var He=j(260),Be=j(1048),Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("copyWithin",function(nt,_t){return Be.call(Re(this),nt,_t,arguments.length>2?arguments[2]:void 0)})},8927:function(Ze,n,j){"use strict";var He=j(260),Be=j(2092).every,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("every",function(nt){return Be(Re(this),nt,arguments.length>1?arguments[1]:void 0)})},3105:function(Ze,n,j){"use strict";var He=j(260),Be=j(1285),Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("fill",function(nt){return Be.apply(Re(this),arguments)})},5035:function(Ze,n,j){"use strict";var He=j(260),Be=j(2092).filter,Re=j(3074),$e=He.aTypedArray;(0,He.exportTypedArrayMethod)("filter",function(_t){var gt=Be($e(this),_t,arguments.length>1?arguments[1]:void 0);return Re(this,gt)})},7174:function(Ze,n,j){"use strict";var He=j(260),Be=j(2092).findIndex,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("findIndex",function(nt){return Be(Re(this),nt,arguments.length>1?arguments[1]:void 0)})},4345:function(Ze,n,j){"use strict";var He=j(260),Be=j(2092).find,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("find",function(nt){return Be(Re(this),nt,arguments.length>1?arguments[1]:void 0)})},2846:function(Ze,n,j){"use strict";var He=j(260),Be=j(2092).forEach,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("forEach",function(nt){Be(Re(this),nt,arguments.length>1?arguments[1]:void 0)})},4731:function(Ze,n,j){"use strict";var He=j(260),Be=j(1318).includes,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("includes",function(nt){return Be(Re(this),nt,arguments.length>1?arguments[1]:void 0)})},7209:function(Ze,n,j){"use strict";var He=j(260),Be=j(1318).indexOf,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("indexOf",function(nt){return Be(Re(this),nt,arguments.length>1?arguments[1]:void 0)})},6319:function(Ze,n,j){"use strict";var He=j(7854),Be=j(260),Re=j(6992),it=j(5112)("iterator"),nt=He.Uint8Array,_t=Re.values,gt=Re.keys,Xt=Re.entries,Et=Be.aTypedArray,Tt=Be.exportTypedArrayMethod,Nt=nt&&nt.prototype[it],Pi=!!Nt&&("values"==Nt.name||null==Nt.name),tt=function(){return _t.call(Et(this))};Tt("entries",function(){return Xt.call(Et(this))}),Tt("keys",function(){return gt.call(Et(this))}),Tt("values",tt,!Pi),Tt(it,tt,!Pi)},8867:function(Ze,n,j){"use strict";var He=j(260),Be=He.aTypedArray,$e=[].join;(0,He.exportTypedArrayMethod)("join",function(nt){return $e.apply(Be(this),arguments)})},7789:function(Ze,n,j){"use strict";var He=j(260),Be=j(6583),Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("lastIndexOf",function(nt){return Be.apply(Re(this),arguments)})},3739:function(Ze,n,j){"use strict";var He=j(260),Be=j(2092).map,Re=j(6707),$e=He.aTypedArray,it=He.aTypedArrayConstructor;(0,He.exportTypedArrayMethod)("map",function(gt){return Be($e(this),gt,arguments.length>1?arguments[1]:void 0,function(Xt,Et){return new(it(Re(Xt,Xt.constructor)))(Et)})})},4483:function(Ze,n,j){"use strict";var He=j(260),Be=j(3671).right,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("reduceRight",function(nt){return Be(Re(this),nt,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(Ze,n,j){"use strict";var He=j(260),Be=j(3671).left,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("reduce",function(nt){return Be(Re(this),nt,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(Ze,n,j){"use strict";var He=j(260),Be=He.aTypedArray,$e=Math.floor;(0,He.exportTypedArrayMethod)("reverse",function(){for(var Et,nt=this,_t=Be(nt).length,gt=$e(_t/2),Xt=0;Xt<gt;)Et=nt[Xt],nt[Xt++]=nt[--_t],nt[_t]=Et;return nt})},3462:function(Ze,n,j){"use strict";var He=j(260),Be=j(7466),Re=j(4590),$e=j(7908),it=j(7293),nt=He.aTypedArray;(0,He.exportTypedArrayMethod)("set",function(Et){nt(this);var Tt=Re(arguments.length>1?arguments[1]:void 0,1),Nt=this.length,Pi=$e(Et),tt=Be(Pi.length),Ci=0;if(tt+Tt>Nt)throw RangeError("Wrong length");for(;Ci<tt;)this[Tt+Ci]=Pi[Ci++]},it(function(){new Int8Array(1).set({})}))},678:function(Ze,n,j){"use strict";var He=j(260),Be=j(6707),Re=j(7293),$e=He.aTypedArray,it=He.aTypedArrayConstructor,_t=[].slice;(0,He.exportTypedArrayMethod)("slice",function(Et,Tt){for(var Nt=_t.call($e(this),Et,Tt),Pi=Be(this,this.constructor),tt=0,Ci=Nt.length,Mi=new(it(Pi))(Ci);Ci>tt;)Mi[tt]=Nt[tt++];return Mi},Re(function(){new Int8Array(1).slice()}))},7462:function(Ze,n,j){"use strict";var He=j(260),Be=j(2092).some,Re=He.aTypedArray;(0,He.exportTypedArrayMethod)("some",function(nt){return Be(Re(this),nt,arguments.length>1?arguments[1]:void 0)})},3824:function(Ze,n,j){"use strict";var He=j(260),Be=He.aTypedArray,$e=[].sort;(0,He.exportTypedArrayMethod)("sort",function(nt){return $e.call(Be(this),nt)})},5021:function(Ze,n,j){"use strict";var He=j(260),Be=j(7466),Re=j(1400),$e=j(6707),it=He.aTypedArray;(0,He.exportTypedArrayMethod)("subarray",function(gt,Xt){var Et=it(this),Tt=Et.length,Nt=Re(gt,Tt);return new($e(Et,Et.constructor))(Et.buffer,Et.byteOffset+Nt*Et.BYTES_PER_ELEMENT,Be((void 0===Xt?Tt:Re(Xt,Tt))-Nt))})},2974:function(Ze,n,j){"use strict";var He=j(7854),Be=j(260),Re=j(7293),$e=He.Int8Array,it=Be.aTypedArray,nt=Be.exportTypedArrayMethod,_t=[].toLocaleString,gt=[].slice,Xt=!!$e&&Re(function(){_t.call(new $e(1))});nt("toLocaleString",function(){return _t.apply(Xt?gt.call(it(this)):it(this),arguments)},Re(function(){return[1,2].toLocaleString()!=new $e([1,2]).toLocaleString()})||!Re(function(){$e.prototype.toLocaleString.call([1,2])}))},5016:function(Ze,n,j){"use strict";var He=j(260).exportTypedArrayMethod,Be=j(7293),$e=j(7854).Uint8Array,it=$e&&$e.prototype||{},nt=[].toString,_t=[].join;Be(function(){nt.call({})})&&(nt=function(){return _t.call(this)}),He("toString",nt,it.toString!=nt)},2472:function(Ze,n,j){j(9843)("Uint8",function(Be){return function($e,it,nt){return Be(this,$e,it,nt)}})},4747:function(Ze,n,j){var He=j(7854),Be=j(8324),Re=j(8533),$e=j(8880);for(var it in Be){var nt=He[it],_t=nt&&nt.prototype;if(_t&&_t.forEach!==Re)try{$e(_t,"forEach",Re)}catch{_t.forEach=Re}}},3948:function(Ze,n,j){var He=j(7854),Be=j(8324),Re=j(6992),$e=j(8880),it=j(5112),nt=it("iterator"),_t=it("toStringTag"),gt=Re.values;for(var Xt in Be){var Et=He[Xt],Tt=Et&&Et.prototype;if(Tt){if(Tt[nt]!==gt)try{$e(Tt,nt,gt)}catch{Tt[nt]=gt}if(Tt[_t]||$e(Tt,_t,Xt),Be[Xt])for(var Nt in Re)if(Tt[Nt]!==Re[Nt])try{$e(Tt,Nt,Re[Nt])}catch{Tt[Nt]=Re[Nt]}}}},1637:function(Ze,n,j){"use strict";j(6992);var He=j(2109),Be=j(5005),Re=j(590),$e=j(1320),it=j(2248),nt=j(8003),_t=j(4994),gt=j(9909),Xt=j(5787),Et=j(6656),Tt=j(9974),Nt=j(648),Pi=j(9670),tt=j(111),Ci=j(30),Mi=j(9114),kt=j(8554),Oi=j(1246),vi=j(5112),hi=Be("fetch"),Dt=Be("Headers"),yi=vi("iterator"),Ri="URLSearchParams",Xi=Ri+"Iterator",Tn=gt.set,qi=gt.getterFor(Ri),nn=gt.getterFor(Xi),_n=/\+/g,Fn=Array(4),mr=function(Zn){return Fn[Zn-1]||(Fn[Zn-1]=RegExp("((?:%[\\da-f]{2}){"+Zn+"})","gi"))},hr=function(Zn){try{return decodeURIComponent(Zn)}catch{return Zn}},Nr=function(Zn){var Un=Zn.replace(_n," "),cr=4;try{return decodeURIComponent(Un)}catch{for(;cr;)Un=Un.replace(mr(cr--),hr);return Un}},Si=/[!'()~]|%20/g,kn={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Jn=function(Zn){return kn[Zn]},ts=function(Zn){return encodeURIComponent(Zn).replace(Si,Jn)},Xr=function(Zn,Un){if(Un)for(var On,Vr,cr=Un.split("&"),zn=0;zn<cr.length;)(On=cr[zn++]).length&&(Vr=On.split("="),Zn.push({key:Nr(Vr.shift()),value:Nr(Vr.join("="))}))},Fr=function(Zn){this.entries.length=0,Xr(this.entries,Zn)},En=function(Zn,Un){if(Zn<Un)throw TypeError("Not enough arguments")},Os=_t(function(Un,cr){Tn(this,{type:Xi,iterator:kt(qi(Un).entries),kind:cr})},"Iterator",function(){var Un=nn(this),cr=Un.kind,zn=Un.iterator.next(),On=zn.value;return zn.done||(zn.value="keys"===cr?On.key:"values"===cr?On.value:[On.key,On.value]),zn}),Cs=function(){Xt(this,Cs,Ri);var On,Vr,jn,an,ur,xr,zs,Vs,Fs,Un=arguments.length>0?arguments[0]:void 0,zn=[];if(Tn(this,{type:Ri,entries:zn,updateURL:function(){},updateSearchParams:Fr}),void 0!==Un)if(tt(Un))if("function"==typeof(On=Oi(Un)))for(jn=(Vr=On.call(Un)).next;!(an=jn.call(Vr)).done;){if((zs=(xr=(ur=kt(Pi(an.value))).next).call(ur)).done||(Vs=xr.call(ur)).done||!xr.call(ur).done)throw TypeError("Expected sequence with length 2");zn.push({key:zs.value+"",value:Vs.value+""})}else for(Fs in Un)Et(Un,Fs)&&zn.push({key:Fs,value:Un[Fs]+""});else Xr(zn,"string"==typeof Un?"?"===Un.charAt(0)?Un.slice(1):Un:Un+"")},Ts=Cs.prototype;it(Ts,{append:function(Un,cr){En(arguments.length,2);var zn=qi(this);zn.entries.push({key:Un+"",value:cr+""}),zn.updateURL()},delete:function(Zn){En(arguments.length,1);for(var Un=qi(this),cr=Un.entries,zn=Zn+"",On=0;On<cr.length;)cr[On].key===zn?cr.splice(On,1):On++;Un.updateURL()},get:function(Un){En(arguments.length,1);for(var cr=qi(this).entries,zn=Un+"",On=0;On<cr.length;On++)if(cr[On].key===zn)return cr[On].value;return null},getAll:function(Un){En(arguments.length,1);for(var cr=qi(this).entries,zn=Un+"",On=[],Vr=0;Vr<cr.length;Vr++)cr[Vr].key===zn&&On.push(cr[Vr].value);return On},has:function(Un){En(arguments.length,1);for(var cr=qi(this).entries,zn=Un+"",On=0;On<cr.length;)if(cr[On++].key===zn)return!0;return!1},set:function(Un,cr){En(arguments.length,1);for(var xr,zn=qi(this),On=zn.entries,Vr=!1,jn=Un+"",an=cr+"",ur=0;ur<On.length;ur++)(xr=On[ur]).key===jn&&(Vr?On.splice(ur--,1):(Vr=!0,xr.value=an));Vr||On.push({key:jn,value:an}),zn.updateURL()},sort:function(){var On,Vr,jn,Un=qi(this),cr=Un.entries,zn=cr.slice();for(cr.length=0,jn=0;jn<zn.length;jn++){for(On=zn[jn],Vr=0;Vr<jn;Vr++)if(cr[Vr].key>On.key){cr.splice(Vr,0,On);break}Vr===jn&&cr.push(On)}Un.updateURL()},forEach:function(Un){for(var Vr,cr=qi(this).entries,zn=Tt(Un,arguments.length>1?arguments[1]:void 0,3),On=0;On<cr.length;)zn((Vr=cr[On++]).value,Vr.key,this)},keys:function(){return new Os(this,"keys")},values:function(){return new Os(this,"values")},entries:function(){return new Os(this,"entries")}},{enumerable:!0}),$e(Ts,yi,Ts.entries),$e(Ts,"toString",function(){for(var On,Un=qi(this).entries,cr=[],zn=0;zn<Un.length;)On=Un[zn++],cr.push(ts(On.key)+"="+ts(On.value));return cr.join("&")},{enumerable:!0}),nt(Cs,Ri),He({global:!0,forced:!Re},{URLSearchParams:Cs}),!Re&&"function"==typeof hi&&"function"==typeof Dt&&He({global:!0,enumerable:!0,forced:!0},{fetch:function(Un){var zn,On,Vr,cr=[Un];return arguments.length>1&&(tt(zn=arguments[1])&&Nt(On=zn.body)===Ri&&((Vr=zn.headers?new Dt(zn.headers):new Dt).has("content-type")||Vr.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),zn=Ci(zn,{body:Mi(0,String(On)),headers:Mi(0,Vr)})),cr.push(zn)),hi.apply(this,cr)}}),Ze.exports={URLSearchParams:Cs,getState:qi}},285:function(Ze,n,j){"use strict";j(8783);var Fr,He=j(2109),Be=j(9781),Re=j(590),$e=j(7854),it=j(6048),nt=j(1320),_t=j(5787),gt=j(6656),Xt=j(1574),Et=j(8457),Tt=j(8710).codeAt,Nt=j(3197),Pi=j(8003),tt=j(1637),Ci=j(9909),Mi=$e.URL,kt=tt.URLSearchParams,Oi=tt.getState,vi=Ci.set,hi=Ci.getterFor("URL"),Dt=Math.floor,yi=Math.pow,Xi="Invalid scheme",Tn="Invalid host",qi="Invalid port",nn=/[A-Za-z]/,_n=/[\d+-.A-Za-z]/,Fn=/\d/,mr=/^(0x|0X)/,hr=/^[0-7]+$/,Nr=/^\d+$/,Si=/^[\dA-Fa-f]+$/,kn=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,Jn=/[\u0000\t\u000A\u000D #/:?@[\\]]/,ts=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Xr=/[\t\u000A\u000D]/g,En=function(We,Jt){var ge,l,u;if("["==Jt.charAt(0)){if("]"!=Jt.charAt(Jt.length-1)||!(ge=Cs(Jt.slice(1,-1))))return Tn;We.host=ge}else if(an(We)){if(Jt=Nt(Jt),kn.test(Jt)||null===(ge=Os(Jt)))return Tn;We.host=ge}else{if(Jn.test(Jt))return Tn;for(ge="",l=Et(Jt),u=0;u<l.length;u++)ge+=Vr(l[u],Un);We.host=ge}},Os=function(We){var ge,l,u,p,y,w,C,Jt=We.split(".");if(Jt.length&&""==Jt[Jt.length-1]&&Jt.pop(),(ge=Jt.length)>4)return We;for(l=[],u=0;u<ge;u++){if(""==(p=Jt[u]))return We;if(y=10,p.length>1&&"0"==p.charAt(0)&&(y=mr.test(p)?16:8,p=p.slice(8==y?1:2)),""===p)w=0;else{if(!(10==y?Nr:8==y?hr:Si).test(p))return We;w=parseInt(p,y)}l.push(w)}for(u=0;u<ge;u++)if(w=l[u],u==ge-1){if(w>=yi(256,5-ge))return null}else if(w>255)return null;for(C=l.pop(),u=0;u<l.length;u++)C+=l[u]*yi(256,3-u);return C},Cs=function(We){var p,y,w,C,M,B,H,Jt=[0,0,0,0,0,0,0,0],ge=0,l=null,u=0,K=function(){return We.charAt(u)};if(":"==K()){if(":"!=We.charAt(1))return;u+=2,l=++ge}for(;K();){if(8==ge)return;if(":"!=K()){for(p=y=0;y<4&&Si.test(K());)p=16*p+parseInt(K(),16),u++,y++;if("."==K()){if(0==y||(u-=y,ge>6))return;for(w=0;K();){if(C=null,w>0){if(!("."==K()&&w<4))return;u++}if(!Fn.test(K()))return;for(;Fn.test(K());){if(M=parseInt(K(),10),null===C)C=M;else{if(0==C)return;C=10*C+M}if(C>255)return;u++}Jt[ge]=256*Jt[ge]+C,(2==++w||4==w)&&ge++}if(4!=w)return;break}if(":"==K()){if(u++,!K())return}else if(K())return;Jt[ge++]=p}else{if(null!==l)return;u++,l=++ge}}if(null!==l)for(B=ge-l,ge=7;0!=ge&&B>0;)H=Jt[ge],Jt[ge--]=Jt[l+B-1],Jt[l+--B]=H;else if(8!=ge)return;return Jt},Zn=function(We){var Jt,ge,l,u;if("number"==typeof We){for(Jt=[],ge=0;ge<4;ge++)Jt.unshift(We%256),We=Dt(We/256);return Jt.join(".")}if("object"==typeof We){for(Jt="",l=function(We){for(var Jt=null,ge=1,l=null,u=0,p=0;p<8;p++)0!==We[p]?(u>ge&&(Jt=l,ge=u),l=null,u=0):(null===l&&(l=p),++u);return u>ge&&(Jt=l,ge=u),Jt}(We),ge=0;ge<8;ge++)u&&0===We[ge]||(u&&(u=!1),l===ge?(Jt+=ge?":":"::",u=!0):(Jt+=We[ge].toString(16),ge<7&&(Jt+=":")));return"["+Jt+"]"}return We},Un={},cr=Xt({},Un,{" ":1,'"':1,"<":1,">":1,"`":1}),zn=Xt({},cr,{"#":1,"?":1,"{":1,"}":1}),On=Xt({},zn,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Vr=function(We,Jt){var ge=Tt(We,0);return ge>32&&ge<127&&!gt(Jt,We)?We:encodeURIComponent(We)},jn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},an=function(We){return gt(jn,We.scheme)},ur=function(We){return""!=We.username||""!=We.password},xr=function(We){return!We.host||We.cannotBeABaseURL||"file"==We.scheme},zs=function(We,Jt){var ge;return 2==We.length&&nn.test(We.charAt(0))&&(":"==(ge=We.charAt(1))||!Jt&&"|"==ge)},Vs=function(We){var Jt;return We.length>1&&zs(We.slice(0,2))&&(2==We.length||"/"===(Jt=We.charAt(2))||"\\"===Jt||"?"===Jt||"#"===Jt)},Fs=function(We){var Jt=We.path,ge=Jt.length;ge&&("file"!=We.scheme||1!=ge||!zs(Jt[0],!0))&&Jt.pop()},Ds=function(We){return"."===We||"%2e"===We.toLowerCase()},Es=function(We){return".."===(We=We.toLowerCase())||"%2e."===We||".%2e"===We||"%2e%2e"===We},wr={},us={},Ks={},io={},as={},Rs={},Ss={},Bs={},xa={},Gt={},Ue={},Je={},At={},St={},si={},wi={},ki={},Mt={},zi={},Sn={},Rn={},Hi=function(We,Jt,ge,l){var B,H,K,J,u=ge||wr,p=0,y="",w=!1,C=!1,M=!1;for(ge||(We.scheme="",We.username="",We.password="",We.host=null,We.port=null,We.path=[],We.query=null,We.fragment=null,We.cannotBeABaseURL=!1,Jt=Jt.replace(ts,"")),Jt=Jt.replace(Xr,""),B=Et(Jt);p<=B.length;){switch(H=B[p],u){case wr:if(!H||!nn.test(H)){if(ge)return Xi;u=Ks;continue}y+=H.toLowerCase(),u=us;break;case us:if(H&&(_n.test(H)||"+"==H||"-"==H||"."==H))y+=H.toLowerCase();else{if(":"!=H){if(ge)return Xi;y="",u=Ks,p=0;continue}if(ge&&(an(We)!=gt(jn,y)||"file"==y&&(ur(We)||null!==We.port)||"file"==We.scheme&&!We.host))return;if(We.scheme=y,ge)return void(an(We)&&jn[We.scheme]==We.port&&(We.port=null));y="","file"==We.scheme?u=St:an(We)&&l&&l.scheme==We.scheme?u=io:an(We)?u=Bs:"/"==B[p+1]?(u=as,p++):(We.cannotBeABaseURL=!0,We.path.push(""),u=zi)}break;case Ks:if(!l||l.cannotBeABaseURL&&"#"!=H)return Xi;if(l.cannotBeABaseURL&&"#"==H){We.scheme=l.scheme,We.path=l.path.slice(),We.query=l.query,We.fragment="",We.cannotBeABaseURL=!0,u=Rn;break}u="file"==l.scheme?St:Rs;continue;case io:if("/"!=H||"/"!=B[p+1]){u=Rs;continue}u=xa,p++;break;case as:if("/"==H){u=Gt;break}u=Mt;continue;case Rs:if(We.scheme=l.scheme,H==Fr)We.username=l.username,We.password=l.password,We.host=l.host,We.port=l.port,We.path=l.path.slice(),We.query=l.query;else if("/"==H||"\\"==H&&an(We))u=Ss;else if("?"==H)We.username=l.username,We.password=l.password,We.host=l.host,We.port=l.port,We.path=l.path.slice(),We.query="",u=Sn;else{if("#"!=H){We.username=l.username,We.password=l.password,We.host=l.host,We.port=l.port,We.path=l.path.slice(),We.path.pop(),u=Mt;continue}We.username=l.username,We.password=l.password,We.host=l.host,We.port=l.port,We.path=l.path.slice(),We.query=l.query,We.fragment="",u=Rn}break;case Ss:if(!an(We)||"/"!=H&&"\\"!=H){if("/"!=H){We.username=l.username,We.password=l.password,We.host=l.host,We.port=l.port,u=Mt;continue}u=Gt}else u=xa;break;case Bs:if(u=xa,"/"!=H||"/"!=y.charAt(p+1))continue;p++;break;case xa:if("/"!=H&&"\\"!=H){u=Gt;continue}break;case Gt:if("@"==H){w&&(y="%40"+y),w=!0,K=Et(y);for(var ne=0;ne<K.length;ne++){var de=K[ne];if(":"!=de||M){var xe=Vr(de,On);M?We.password+=xe:We.username+=xe}else M=!0}y=""}else if(H==Fr||"/"==H||"?"==H||"#"==H||"\\"==H&&an(We)){if(w&&""==y)return"Invalid authority";p-=Et(y).length+1,y="",u=Ue}else y+=H;break;case Ue:case Je:if(ge&&"file"==We.scheme){u=wi;continue}if(":"!=H||C){if(H==Fr||"/"==H||"?"==H||"#"==H||"\\"==H&&an(We)){if(an(We)&&""==y)return Tn;if(ge&&""==y&&(ur(We)||null!==We.port))return;if(J=En(We,y))return J;if(y="",u=ki,ge)return;continue}"["==H?C=!0:"]"==H&&(C=!1),y+=H}else{if(""==y)return Tn;if(J=En(We,y))return J;if(y="",u=At,ge==Je)return}break;case At:if(!Fn.test(H)){if(H==Fr||"/"==H||"?"==H||"#"==H||"\\"==H&&an(We)||ge){if(""!=y){var Se=parseInt(y,10);if(Se>65535)return qi;We.port=an(We)&&Se===jn[We.scheme]?null:Se,y=""}if(ge)return;u=ki;continue}return qi}y+=H;break;case St:if(We.scheme="file","/"==H||"\\"==H)u=si;else{if(!l||"file"!=l.scheme){u=Mt;continue}if(H==Fr)We.host=l.host,We.path=l.path.slice(),We.query=l.query;else if("?"==H)We.host=l.host,We.path=l.path.slice(),We.query="",u=Sn;else{if("#"!=H){Vs(B.slice(p).join(""))||(We.host=l.host,We.path=l.path.slice(),Fs(We)),u=Mt;continue}We.host=l.host,We.path=l.path.slice(),We.query=l.query,We.fragment="",u=Rn}}break;case si:if("/"==H||"\\"==H){u=wi;break}l&&"file"==l.scheme&&!Vs(B.slice(p).join(""))&&(zs(l.path[0],!0)?We.path.push(l.path[0]):We.host=l.host),u=Mt;continue;case wi:if(H==Fr||"/"==H||"\\"==H||"?"==H||"#"==H){if(!ge&&zs(y))u=Mt;else if(""==y){if(We.host="",ge)return;u=ki}else{if(J=En(We,y))return J;if("localhost"==We.host&&(We.host=""),ge)return;y="",u=ki}continue}y+=H;break;case ki:if(an(We)){if(u=Mt,"/"!=H&&"\\"!=H)continue}else if(ge||"?"!=H)if(ge||"#"!=H){if(H!=Fr&&(u=Mt,"/"!=H))continue}else We.fragment="",u=Rn;else We.query="",u=Sn;break;case Mt:if(H==Fr||"/"==H||"\\"==H&&an(We)||!ge&&("?"==H||"#"==H)){if(Es(y)?(Fs(We),"/"!=H&&!("\\"==H&&an(We))&&We.path.push("")):Ds(y)?"/"!=H&&!("\\"==H&&an(We))&&We.path.push(""):("file"==We.scheme&&!We.path.length&&zs(y)&&(We.host&&(We.host=""),y=y.charAt(0)+":"),We.path.push(y)),y="","file"==We.scheme&&(H==Fr||"?"==H||"#"==H))for(;We.path.length>1&&""===We.path[0];)We.path.shift();"?"==H?(We.query="",u=Sn):"#"==H&&(We.fragment="",u=Rn)}else y+=Vr(H,zn);break;case zi:"?"==H?(We.query="",u=Sn):"#"==H?(We.fragment="",u=Rn):H!=Fr&&(We.path[0]+=Vr(H,Un));break;case Sn:ge||"#"!=H?H!=Fr&&("'"==H&&an(We)?We.query+="%27":We.query+="#"==H?"%23":Vr(H,Un)):(We.fragment="",u=Rn);break;case Rn:H!=Fr&&(We.fragment+=Vr(H,cr))}p++}},ar=function(Jt){var y,w,ge=_t(this,ar,"URL"),l=arguments.length>1?arguments[1]:void 0,u=String(Jt),p=vi(ge,{type:"URL"});if(void 0!==l)if(l instanceof ar)y=hi(l);else if(w=Hi(y={},String(l)))throw TypeError(w);if(w=Hi(p,u,null,y))throw TypeError(w);var C=p.searchParams=new kt,M=Oi(C);M.updateSearchParams(p.query),M.updateURL=function(){p.query=String(C)||null},Be||(ge.href=Vt.call(ge),ge.origin=dt.call(ge),ge.protocol=ot.call(ge),ge.username=Xe.call(ge),ge.password=Qe.call(ge),ge.host=Rt.call(ge),ge.hostname=ui.call(ge),ge.port=en.call(ge),ge.pathname=ji.call(ge),ge.search=bn.call(ge),ge.searchParams=bt.call(ge),ge.hash=Ft.call(ge))},Ht=ar.prototype,Vt=function(){var We=hi(this),Jt=We.scheme,ge=We.username,l=We.password,u=We.host,p=We.port,y=We.path,w=We.query,C=We.fragment,M=Jt+":";return null!==u?(M+="//",ur(We)&&(M+=ge+(l?":"+l:"")+"@"),M+=Zn(u),null!==p&&(M+=":"+p)):"file"==Jt&&(M+="//"),M+=We.cannotBeABaseURL?y[0]:y.length?"/"+y.join("/"):"",null!==w&&(M+="?"+w),null!==C&&(M+="#"+C),M},dt=function(){var We=hi(this),Jt=We.scheme,ge=We.port;if("blob"==Jt)try{return new URL(Jt.path[0]).origin}catch{return"null"}return"file"!=Jt&&an(We)?Jt+"://"+Zn(We.host)+(null!==ge?":"+ge:""):"null"},ot=function(){return hi(this).scheme+":"},Xe=function(){return hi(this).username},Qe=function(){return hi(this).password},Rt=function(){var We=hi(this),Jt=We.host,ge=We.port;return null===Jt?"":null===ge?Zn(Jt):Zn(Jt)+":"+ge},ui=function(){var We=hi(this).host;return null===We?"":Zn(We)},en=function(){var We=hi(this).port;return null===We?"":String(We)},ji=function(){var We=hi(this),Jt=We.path;return We.cannotBeABaseURL?Jt[0]:Jt.length?"/"+Jt.join("/"):""},bn=function(){var We=hi(this).query;return We?"?"+We:""},bt=function(){return hi(this).searchParams},Ft=function(){var We=hi(this).fragment;return We?"#"+We:""},ke=function(We,Jt){return{get:We,set:Jt,configurable:!0,enumerable:!0}};if(Be&&it(Ht,{href:ke(Vt,function(We){var Jt=hi(this),ge=String(We),l=Hi(Jt,ge);if(l)throw TypeError(l);Oi(Jt.searchParams).updateSearchParams(Jt.query)}),origin:ke(dt),protocol:ke(ot,function(We){var Jt=hi(this);Hi(Jt,String(We)+":",wr)}),username:ke(Xe,function(We){var Jt=hi(this),ge=Et(String(We));if(!xr(Jt)){Jt.username="";for(var l=0;l<ge.length;l++)Jt.username+=Vr(ge[l],On)}}),password:ke(Qe,function(We){var Jt=hi(this),ge=Et(String(We));if(!xr(Jt)){Jt.password="";for(var l=0;l<ge.length;l++)Jt.password+=Vr(ge[l],On)}}),host:ke(Rt,function(We){var Jt=hi(this);Jt.cannotBeABaseURL||Hi(Jt,String(We),Ue)}),hostname:ke(ui,function(We){var Jt=hi(this);Jt.cannotBeABaseURL||Hi(Jt,String(We),Je)}),port:ke(en,function(We){var Jt=hi(this);xr(Jt)||(""==(We=String(We))?Jt.port=null:Hi(Jt,We,At))}),pathname:ke(ji,function(We){var Jt=hi(this);Jt.cannotBeABaseURL||(Jt.path=[],Hi(Jt,We+"",ki))}),search:ke(bn,function(We){var Jt=hi(this);""==(We=String(We))?Jt.query=null:("?"==We.charAt(0)&&(We=We.slice(1)),Jt.query="",Hi(Jt,We,Sn)),Oi(Jt.searchParams).updateSearchParams(Jt.query)}),searchParams:ke(bt),hash:ke(Ft,function(We){var Jt=hi(this);""!=(We=String(We))?("#"==We.charAt(0)&&(We=We.slice(1)),Jt.fragment="",Hi(Jt,We,Rn)):Jt.fragment=null})}),nt(Ht,"toJSON",function(){return Vt.call(this)},{enumerable:!0}),nt(Ht,"toString",function(){return Vt.call(this)},{enumerable:!0}),Mi){var yt=Mi.createObjectURL,Wt=Mi.revokeObjectURL;yt&&nt(ar,"createObjectURL",function(Jt){return yt.apply(Mi,arguments)}),Wt&&nt(ar,"revokeObjectURL",function(Jt){return Wt.apply(Mi,arguments)})}Pi(ar,"URL"),He({global:!0,forced:!Re,sham:!Be},{URL:ar})}},Qt={};function D(Ze){if(Qt[Ze])return Qt[Ze].exports;var n=Qt[Ze]={exports:{}};return Hs[Ze](n,n.exports,D),n.exports}D.d=function(Ze,n){for(var j in n)D.o(n,j)&&!D.o(Ze,j)&&Object.defineProperty(Ze,j,{enumerable:!0,get:n[j]})},D.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),D.o=function(Ze,n){return Object.prototype.hasOwnProperty.call(Ze,n)},D.r=function(Ze){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Ze,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ze,"__esModule",{value:!0})};var mt={};return function(){"use strict";function Zn(Ht,Vt){var dt;if(typeof Symbol>"u"||null==Ht[Symbol.iterator]){if(Array.isArray(Ht)||(dt=function Un(Ht,Vt){if(Ht){if("string"==typeof Ht)return cr(Ht,Vt);var dt=Object.prototype.toString.call(Ht).slice(8,-1);if("Object"===dt&&Ht.constructor&&(dt=Ht.constructor.name),"Map"===dt||"Set"===dt)return Array.from(Ht);if("Arguments"===dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return cr(Ht,Vt)}}(Ht))||Vt&&Ht&&"number"==typeof Ht.length){dt&&(Ht=dt);var ot=0,Xe=function(){};return{s:Xe,n:function(){return ot>=Ht.length?{done:!0}:{done:!1,value:Ht[ot++]}},e:function(ji){throw ji},f:Xe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ui,Qe=!0,Rt=!1;return{s:function(){dt=Ht[Symbol.iterator]()},n:function(){var ji=dt.next();return Qe=ji.done,ji},e:function(ji){Rt=!0,ui=ji},f:function(){try{!Qe&&null!=dt.return&&dt.return()}finally{if(Rt)throw ui}}}}function cr(Ht,Vt){(null==Vt||Vt>Ht.length)&&(Vt=Ht.length);for(var dt=0,ot=new Array(Vt);dt<Vt;dt++)ot[dt]=Ht[dt];return ot}function On(Ht,Vt){for(var dt=0;dt<Vt.length;dt++){var ot=Vt[dt];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Ht,ot.key,ot)}}D.r(mt),D.d(mt,{Dropzone:function(){return St},default:function(){return ar}}),D(2222),D(7327),D(2772),D(6992),D(1249),D(7042),D(561),D(8264),D(8309),D(489),D(1539),D(4916),D(9714),D(8783),D(4723),D(5306),D(3123),D(3210),D(2472),D(2990),D(8927),D(3105),D(5035),D(4345),D(7174),D(2846),D(4731),D(7209),D(6319),D(8867),D(7789),D(3739),D(9368),D(4483),D(2056),D(3462),D(678),D(7462),D(3824),D(5021),D(2974),D(5016),D(4747),D(3948),D(285);var jn=function(){function Ht(){!function zn(Ht,Vt){if(!(Ht instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Ht)}return function Vr(Ht,Vt,dt){return Vt&&On(Ht.prototype,Vt),dt&&On(Ht,dt),Ht}(Ht,[{key:"on",value:function(dt,ot){return this._callbacks=this._callbacks||{},this._callbacks[dt]||(this._callbacks[dt]=[]),this._callbacks[dt].push(ot),this}},{key:"emit",value:function(dt){this._callbacks=this._callbacks||{};for(var ot=this._callbacks[dt],Xe=arguments.length,Qe=new Array(Xe>1?Xe-1:0),Rt=1;Rt<Xe;Rt++)Qe[Rt-1]=arguments[Rt];if(ot){var en,ui=Zn(ot,!0);try{for(ui.s();!(en=ui.n()).done;)en.value.apply(this,Qe)}catch(bn){ui.e(bn)}finally{ui.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+dt,{args:Qe})),this}},{key:"makeEvent",value:function(dt,ot){var Xe={bubbles:!0,cancelable:!0,detail:ot};if("function"==typeof window.CustomEvent)return new CustomEvent(dt,Xe);var Qe=document.createEvent("CustomEvent");return Qe.initCustomEvent(dt,Xe.bubbles,Xe.cancelable,Xe.detail),Qe}},{key:"off",value:function(dt,ot){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var Xe=this._callbacks[dt];if(!Xe)return this;if(1===arguments.length)return delete this._callbacks[dt],this;for(var Qe=0;Qe<Xe.length;Qe++)if(Xe[Qe]===ot){Xe.splice(Qe,1);break}return this}}]),Ht}();function xr(Ht,Vt){var dt;if(typeof Symbol>"u"||null==Ht[Symbol.iterator]){if(Array.isArray(Ht)||(dt=function zs(Ht,Vt){if(Ht){if("string"==typeof Ht)return Vs(Ht,Vt);var dt=Object.prototype.toString.call(Ht).slice(8,-1);if("Object"===dt&&Ht.constructor&&(dt=Ht.constructor.name),"Map"===dt||"Set"===dt)return Array.from(Ht);if("Arguments"===dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return Vs(Ht,Vt)}}(Ht))||Vt&&Ht&&"number"==typeof Ht.length){dt&&(Ht=dt);var ot=0,Xe=function(){};return{s:Xe,n:function(){return ot>=Ht.length?{done:!0}:{done:!1,value:Ht[ot++]}},e:function(ji){throw ji},f:Xe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ui,Qe=!0,Rt=!1;return{s:function(){dt=Ht[Symbol.iterator]()},n:function(){var ji=dt.next();return Qe=ji.done,ji},e:function(ji){Rt=!0,ui=ji},f:function(){try{!Qe&&null!=dt.return&&dt.return()}finally{if(Rt)throw ui}}}}function Vs(Ht,Vt){(null==Vt||Vt>Ht.length)&&(Vt=Ht.length);for(var dt=0,ot=new Array(Vt);dt<Vt;dt++)ot[dt]=Ht[dt];return ot}var Ds={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(Vt,dt,ot){if(ot)return{dzuuid:ot.file.upload.uuid,dzchunkindex:ot.index,dztotalfilesize:ot.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:ot.file.upload.totalChunkCount,dzchunkbyteoffset:ot.index*this.options.chunkSize}},accept:function(Vt,dt){return dt()},chunksUploaded:function(Vt,dt){dt()},fallback:function(){var Vt;this.element.className="".concat(this.element.className," dz-browser-not-supported");var ot,dt=xr(this.element.getElementsByTagName("div"),!0);try{for(dt.s();!(ot=dt.n()).done;){var Xe=ot.value;if(/(^| )dz-message($| )/.test(Xe.className)){Vt=Xe,Xe.className="dz-message";break}}}catch(Rt){dt.e(Rt)}finally{dt.f()}Vt||(Vt=St.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(Vt));var Qe=Vt.getElementsByTagName("span")[0];return Qe&&(null!=Qe.textContent?Qe.textContent=this.options.dictFallbackMessage:null!=Qe.innerText&&(Qe.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(Vt,dt,ot,Xe){var Qe={srcX:0,srcY:0,srcWidth:Vt.width,srcHeight:Vt.height},Rt=Vt.width/Vt.height;null==dt&&null==ot?(dt=Qe.srcWidth,ot=Qe.srcHeight):null==dt?dt=ot*Rt:null==ot&&(ot=dt/Rt);var ui=(dt=Math.min(dt,Qe.srcWidth))/(ot=Math.min(ot,Qe.srcHeight));if(Qe.srcWidth>dt||Qe.srcHeight>ot)if("crop"===Xe)Rt>ui?(Qe.srcHeight=Vt.height,Qe.srcWidth=Qe.srcHeight*ui):(Qe.srcWidth=Vt.width,Qe.srcHeight=Qe.srcWidth/ui);else{if("contain"!==Xe)throw new Error("Unknown resizeMethod '".concat(Xe,"'"));Rt>ui?ot=dt/Rt:dt=ot*Rt}return Qe.srcX=(Vt.width-Qe.srcWidth)/2,Qe.srcY=(Vt.height-Qe.srcHeight)/2,Qe.trgWidth=dt,Qe.trgHeight=ot,Qe},transformFile:function(Vt,dt){return(this.options.resizeWidth||this.options.resizeHeight)&&Vt.type.match(/image.*/)?this.resizeImage(Vt,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,dt):dt(Vt)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(Vt){return this.element.classList.remove("dz-drag-hover")},dragstart:function(Vt){},dragend:function(Vt){return this.element.classList.remove("dz-drag-hover")},dragenter:function(Vt){return this.element.classList.add("dz-drag-hover")},dragover:function(Vt){return this.element.classList.add("dz-drag-hover")},dragleave:function(Vt){return this.element.classList.remove("dz-drag-hover")},paste:function(Vt){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(Vt){var dt=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){Vt.previewElement=St.createElement(this.options.previewTemplate.trim()),Vt.previewTemplate=Vt.previewElement,this.previewsContainer.appendChild(Vt.previewElement);var Xe,ot=xr(Vt.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(ot.s();!(Xe=ot.n()).done;){var Qe=Xe.value;Qe.textContent=Vt.name}}catch(Ft){ot.e(Ft)}finally{ot.f()}var ui,Rt=xr(Vt.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(Rt.s();!(ui=Rt.n()).done;)(Qe=ui.value).innerHTML=this.filesize(Vt.size)}catch(Ft){Rt.e(Ft)}finally{Rt.f()}this.options.addRemoveLinks&&(Vt._removeLink=St.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),Vt.previewElement.appendChild(Vt._removeLink));var bn,en=function(ke){return ke.preventDefault(),ke.stopPropagation(),Vt.status===St.UPLOADING?St.confirm(dt.options.dictCancelUploadConfirmation,function(){return dt.removeFile(Vt)}):dt.options.dictRemoveFileConfirmation?St.confirm(dt.options.dictRemoveFileConfirmation,function(){return dt.removeFile(Vt)}):dt.removeFile(Vt)},ji=xr(Vt.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(ji.s();!(bn=ji.n()).done;)bn.value.addEventListener("click",en)}catch(Ft){ji.e(Ft)}finally{ji.f()}}},removedfile:function(Vt){return null!=Vt.previewElement&&null!=Vt.previewElement.parentNode&&Vt.previewElement.parentNode.removeChild(Vt.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(Vt,dt){if(Vt.previewElement){Vt.previewElement.classList.remove("dz-file-preview");var Xe,ot=xr(Vt.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(ot.s();!(Xe=ot.n()).done;){var Qe=Xe.value;Qe.alt=Vt.name,Qe.src=dt}}catch(Rt){ot.e(Rt)}finally{ot.f()}return setTimeout(function(){return Vt.previewElement.classList.add("dz-image-preview")},1)}},error:function(Vt,dt){if(Vt.previewElement){Vt.previewElement.classList.add("dz-error"),"string"!=typeof dt&&dt.error&&(dt=dt.error);var Xe,ot=xr(Vt.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(ot.s();!(Xe=ot.n()).done;)Xe.value.textContent=dt}catch(Rt){ot.e(Rt)}finally{ot.f()}}},errormultiple:function(){},processing:function(Vt){if(Vt.previewElement&&(Vt.previewElement.classList.add("dz-processing"),Vt._removeLink))return Vt._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(Vt,dt,ot){if(Vt.previewElement){var Qe,Xe=xr(Vt.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(Xe.s();!(Qe=Xe.n()).done;){var Rt=Qe.value;"PROGRESS"===Rt.nodeName?Rt.value=dt:Rt.style.width="".concat(dt,"%")}}catch(ui){Xe.e(ui)}finally{Xe.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(Vt){if(Vt.previewElement)return Vt.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(Vt){return this.emit("error",Vt,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(Vt){if(Vt._removeLink&&(Vt._removeLink.innerHTML=this.options.dictRemoveFile),Vt.previewElement)return Vt.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function Es(Ht){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(dt){return typeof dt}:function(dt){return dt&&"function"==typeof Symbol&&dt.constructor===Symbol&&dt!==Symbol.prototype?"symbol":typeof dt})(Ht)}function wr(Ht,Vt){var dt;if(typeof Symbol>"u"||null==Ht[Symbol.iterator]){if(Array.isArray(Ht)||(dt=function us(Ht,Vt){if(Ht){if("string"==typeof Ht)return Ks(Ht,Vt);var dt=Object.prototype.toString.call(Ht).slice(8,-1);if("Object"===dt&&Ht.constructor&&(dt=Ht.constructor.name),"Map"===dt||"Set"===dt)return Array.from(Ht);if("Arguments"===dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return Ks(Ht,Vt)}}(Ht))||Vt&&Ht&&"number"==typeof Ht.length){dt&&(Ht=dt);var ot=0,Xe=function(){};return{s:Xe,n:function(){return ot>=Ht.length?{done:!0}:{done:!1,value:Ht[ot++]}},e:function(ji){throw ji},f:Xe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ui,Qe=!0,Rt=!1;return{s:function(){dt=Ht[Symbol.iterator]()},n:function(){var ji=dt.next();return Qe=ji.done,ji},e:function(ji){Rt=!0,ui=ji},f:function(){try{!Qe&&null!=dt.return&&dt.return()}finally{if(Rt)throw ui}}}}function Ks(Ht,Vt){(null==Vt||Vt>Ht.length)&&(Vt=Ht.length);for(var dt=0,ot=new Array(Vt);dt<Vt;dt++)ot[dt]=Ht[dt];return ot}function io(Ht,Vt){if(!(Ht instanceof Vt))throw new TypeError("Cannot call a class as a function")}function as(Ht,Vt){for(var dt=0;dt<Vt.length;dt++){var ot=Vt[dt];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Ht,ot.key,ot)}}function Rs(Ht,Vt,dt){return Vt&&as(Ht.prototype,Vt),dt&&as(Ht,dt),Ht}function Ss(Ht,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function");Ht.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Ht,writable:!0,configurable:!0}}),Vt&&Bs(Ht,Vt)}function Bs(Ht,Vt){return(Bs=Object.setPrototypeOf||function(ot,Xe){return ot.__proto__=Xe,ot})(Ht,Vt)}function xa(Ht){var Vt=function Je(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Xe,ot=At(Ht);if(Vt){var Qe=At(this).constructor;Xe=Reflect.construct(ot,arguments,Qe)}else Xe=ot.apply(this,arguments);return Gt(this,Xe)}}function Gt(Ht,Vt){return!Vt||"object"!==Es(Vt)&&"function"!=typeof Vt?Ue(Ht):Vt}function Ue(Ht){if(void 0===Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht}function At(Ht){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(dt){return dt.__proto__||Object.getPrototypeOf(dt)})(Ht)}var St=function(Ht){Ss(dt,Ht);var Vt=xa(dt);function dt(ot,Xe){var Qe,Rt,ui;if(io(this,dt),(Qe=Vt.call(this)).element=ot,Qe.version=dt.version,Qe.clickableElements=[],Qe.listeners=[],Qe.files=[],"string"==typeof Qe.element&&(Qe.element=document.querySelector(Qe.element)),!Qe.element||null==Qe.element.nodeType)throw new Error("Invalid dropzone element.");if(Qe.element.dropzone)throw new Error("Dropzone already attached.");dt.instances.push(Ue(Qe)),Qe.element.dropzone=Ue(Qe);var en=null!=(ui=dt.optionsForElement(Qe.element))?ui:{};if(Qe.options=dt.extend({},Ds,en,Xe??{}),Qe.options.previewTemplate=Qe.options.previewTemplate.replace(/\n*/g,""),Qe.options.forceFallback||!dt.isBrowserSupported())return Gt(Qe,Qe.options.fallback.call(Ue(Qe)));if(null==Qe.options.url&&(Qe.options.url=Qe.element.getAttribute("action")),!Qe.options.url)throw new Error("No URL provided.");if(Qe.options.acceptedFiles&&Qe.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(Qe.options.uploadMultiple&&Qe.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return Qe.options.acceptedMimeTypes&&(Qe.options.acceptedFiles=Qe.options.acceptedMimeTypes,delete Qe.options.acceptedMimeTypes),null!=Qe.options.renameFilename&&(Qe.options.renameFile=function(ji){return Qe.options.renameFilename.call(Ue(Qe),ji.name,ji)}),"string"==typeof Qe.options.method&&(Qe.options.method=Qe.options.method.toUpperCase()),(Rt=Qe.getExistingFallback())&&Rt.parentNode&&Rt.parentNode.removeChild(Rt),!1!==Qe.options.previewsContainer&&(Qe.previewsContainer=Qe.options.previewsContainer?dt.getElement(Qe.options.previewsContainer,"previewsContainer"):Qe.element),Qe.options.clickable&&(Qe.clickableElements=!0===Qe.options.clickable?[Qe.element]:dt.getElements(Qe.options.clickable,"clickable")),Qe.init(),Qe}return Rs(dt,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(Xe){return Xe.accepted}).map(function(Xe){return Xe})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(Xe){return!Xe.accepted}).map(function(Xe){return Xe})}},{key:"getFilesWithStatus",value:function(Xe){return this.files.filter(function(Qe){return Qe.status===Xe}).map(function(Qe){return Qe})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(dt.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(dt.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(dt.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(Xe){return Xe.status===dt.UPLOADING||Xe.status===dt.QUEUED}).map(function(Xe){return Xe})}},{key:"init",value:function(){var Xe=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(dt.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function bt(){Xe.hiddenFileInput&&Xe.hiddenFileInput.parentNode.removeChild(Xe.hiddenFileInput),Xe.hiddenFileInput=document.createElement("input"),Xe.hiddenFileInput.setAttribute("type","file"),(null===Xe.options.maxFiles||Xe.options.maxFiles>1)&&Xe.hiddenFileInput.setAttribute("multiple","multiple"),Xe.hiddenFileInput.className="dz-hidden-input",null!==Xe.options.acceptedFiles&&Xe.hiddenFileInput.setAttribute("accept",Xe.options.acceptedFiles),null!==Xe.options.capture&&Xe.hiddenFileInput.setAttribute("capture",Xe.options.capture),Xe.hiddenFileInput.setAttribute("tabindex","-1"),Xe.hiddenFileInput.style.visibility="hidden",Xe.hiddenFileInput.style.position="absolute",Xe.hiddenFileInput.style.top="0",Xe.hiddenFileInput.style.left="0",Xe.hiddenFileInput.style.height="0",Xe.hiddenFileInput.style.width="0",dt.getElement(Xe.options.hiddenInputContainer,"hiddenInputContainer").appendChild(Xe.hiddenFileInput),Xe.hiddenFileInput.addEventListener("change",function(){var Ft=Xe.hiddenFileInput.files;if(Ft.length){var yt,ke=wr(Ft,!0);try{for(ke.s();!(yt=ke.n()).done;)Xe.addFile(yt.value)}catch(We){ke.e(We)}finally{ke.f()}}Xe.emit("addedfiles",Ft),bt()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var ui,Rt=wr(this.events,!0);try{for(Rt.s();!(ui=Rt.n()).done;){var en=ui.value;this.on(en,this.options[en])}}catch(bt){Rt.e(bt)}finally{Rt.f()}this.on("uploadprogress",function(){return Xe.updateTotalUploadProgress()}),this.on("removedfile",function(){return Xe.updateTotalUploadProgress()}),this.on("canceled",function(bt){return Xe.emit("complete",bt)}),this.on("complete",function(bt){if(0===Xe.getAddedFiles().length&&0===Xe.getUploadingFiles().length&&0===Xe.getQueuedFiles().length)return setTimeout(function(){return Xe.emit("queuecomplete")},0)});var bn=function(Ft){if(function(Ft){if(Ft.dataTransfer.types)for(var ke=0;ke<Ft.dataTransfer.types.length;ke++)if("Files"===Ft.dataTransfer.types[ke])return!0;return!1}(Ft))return Ft.stopPropagation(),Ft.preventDefault?Ft.preventDefault():Ft.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(Ft){return Xe.emit("dragstart",Ft)},dragenter:function(Ft){return bn(Ft),Xe.emit("dragenter",Ft)},dragover:function(Ft){var ke;try{ke=Ft.dataTransfer.effectAllowed}catch{}return Ft.dataTransfer.dropEffect="move"===ke||"linkMove"===ke?"move":"copy",bn(Ft),Xe.emit("dragover",Ft)},dragleave:function(Ft){return Xe.emit("dragleave",Ft)},drop:function(Ft){return bn(Ft),Xe.drop(Ft)},dragend:function(Ft){return Xe.emit("dragend",Ft)}}}],this.clickableElements.forEach(function(bt){return Xe.listeners.push({element:bt,events:{click:function(ke){return(bt!==Xe.element||ke.target===Xe.element||dt.elementInside(ke.target,Xe.element.querySelector(".dz-message")))&&Xe.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,dt.instances.splice(dt.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var Xe,Qe=0,Rt=0;if(this.getActiveFiles().length){var ji,en=wr(this.getActiveFiles(),!0);try{for(en.s();!(ji=en.n()).done;){var bn=ji.value;Qe+=bn.upload.bytesSent,Rt+=bn.upload.total}}catch(bt){en.e(bt)}finally{en.f()}Xe=100*Qe/Rt}else Xe=100;return this.emit("totaluploadprogress",Xe,Rt,Qe)}},{key:"_getParamName",value:function(Xe){return"function"==typeof this.options.paramName?this.options.paramName(Xe):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(Xe,"]"):"")}},{key:"_renameFile",value:function(Xe){return"function"!=typeof this.options.renameFile?Xe.name:this.options.renameFile(Xe)}},{key:"getFallbackForm",value:function(){var Xe,Qe;if(Xe=this.getExistingFallback())return Xe;var Rt='<div class="dz-fallback">';this.options.dictFallbackText&&(Rt+="<p>".concat(this.options.dictFallbackText,"</p>")),Rt+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var ui=dt.createElement(Rt);return"FORM"!==this.element.tagName?(Qe=dt.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(ui):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),Qe??ui}},{key:"getExistingFallback",value:function(){for(var Xe=function(bn){var Ft,bt=wr(bn,!0);try{for(bt.s();!(Ft=bt.n()).done;){var ke=Ft.value;if(/(^| )fallback($| )/.test(ke.className))return ke}}catch(yt){bt.e(yt)}finally{bt.f()}},Qe=0,Rt=["div","form"];Qe<Rt.length;Qe++){var en;if(en=Xe(this.element.getElementsByTagName(Rt[Qe])))return en}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(Xe){return function(){var Qe=[];for(var Rt in Xe.events)Qe.push(Xe.element.addEventListener(Rt,Xe.events[Rt],!1));return Qe}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(Xe){return function(){var Qe=[];for(var Rt in Xe.events)Qe.push(Xe.element.removeEventListener(Rt,Xe.events[Rt],!1));return Qe}()})}},{key:"disable",value:function(){var Xe=this;return this.clickableElements.forEach(function(Qe){return Qe.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(Qe){return Xe.cancelUpload(Qe)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(Xe){return Xe.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(Xe){var Qe=0,Rt="b";if(Xe>0){for(var ui=["tb","gb","mb","kb","b"],en=0;en<ui.length;en++){var ji=ui[en];if(Xe>=Math.pow(this.options.filesizeBase,4-en)/10){Qe=Xe/Math.pow(this.options.filesizeBase,4-en),Rt=ji;break}}Qe=Math.round(10*Qe)/10}return"<strong>".concat(Qe,"</strong> ").concat(this.options.dictFileSizeUnits[Rt])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(Xe){if(Xe.dataTransfer){this.emit("drop",Xe);for(var Qe=[],Rt=0;Rt<Xe.dataTransfer.files.length;Rt++)Qe[Rt]=Xe.dataTransfer.files[Rt];if(Qe.length){var ui=Xe.dataTransfer.items;ui&&ui.length&&null!=ui[0].webkitGetAsEntry?this._addFilesFromItems(ui):this.handleFiles(Qe)}this.emit("addedfiles",Qe)}}},{key:"paste",value:function(Xe){if(null!=function Rn(Ht,Vt){return typeof Ht<"u"&&null!==Ht?Vt(Ht):void 0}(Xe?.clipboardData,function(Rt){return Rt.items})){this.emit("paste",Xe);var Qe=Xe.clipboardData.items;if(Qe.length)return this._addFilesFromItems(Qe)}}},{key:"handleFiles",value:function(Xe){var Rt,Qe=wr(Xe,!0);try{for(Qe.s();!(Rt=Qe.n()).done;)this.addFile(Rt.value)}catch(en){Qe.e(en)}finally{Qe.f()}}},{key:"_addFilesFromItems",value:function(Xe){var Qe=this;return function(){var en,Rt=[],ui=wr(Xe,!0);try{for(ui.s();!(en=ui.n()).done;){var bn,ji=en.value;null!=ji.webkitGetAsEntry&&(bn=ji.webkitGetAsEntry())?Rt.push(bn.isFile?Qe.addFile(ji.getAsFile()):bn.isDirectory?Qe._addFilesFromDirectory(bn,bn.name):void 0):Rt.push(null==ji.getAsFile||null!=ji.kind&&"file"!==ji.kind?void 0:Qe.addFile(ji.getAsFile()))}}catch(bt){ui.e(bt)}finally{ui.f()}return Rt}()}},{key:"_addFilesFromDirectory",value:function(Xe,Qe){var Rt=this,ui=Xe.createReader(),en=function(bt){return function Hi(Ht,Vt,dt){if(typeof Ht<"u"&&null!==Ht&&"function"==typeof Ht[Vt])return dt(Ht,Vt)}(console,"log",function(Ft){return Ft.log(bt)})};return function bn(){return ui.readEntries(function(bt){if(bt.length>0){var ke,Ft=wr(bt,!0);try{for(Ft.s();!(ke=Ft.n()).done;){var yt=ke.value;yt.isFile?yt.file(function(Wt){if(!Rt.options.ignoreHiddenFiles||"."!==Wt.name.substring(0,1))return Wt.fullPath="".concat(Qe,"/").concat(Wt.name),Rt.addFile(Wt)}):yt.isDirectory&&Rt._addFilesFromDirectory(yt,"".concat(Qe,"/").concat(yt.name))}}catch(Wt){Ft.e(Wt)}finally{Ft.f()}bn()}return null},en)}()}},{key:"accept",value:function(Xe,Qe){this.options.maxFilesize&&Xe.size>1024*this.options.maxFilesize*1024?Qe(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(Xe.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):dt.isValidFile(Xe,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(Qe(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",Xe)):this.options.accept.call(this,Xe,Qe):Qe(this.options.dictInvalidFileType)}},{key:"addFile",value:function(Xe){var Qe=this;Xe.upload={uuid:dt.uuidv4(),progress:0,total:Xe.size,bytesSent:0,filename:this._renameFile(Xe)},this.files.push(Xe),Xe.status=dt.ADDED,this.emit("addedfile",Xe),this._enqueueThumbnail(Xe),this.accept(Xe,function(Rt){Rt?(Xe.accepted=!1,Qe._errorProcessing([Xe],Rt)):(Xe.accepted=!0,Qe.options.autoQueue&&Qe.enqueueFile(Xe)),Qe._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(Xe){var Rt,Qe=wr(Xe,!0);try{for(Qe.s();!(Rt=Qe.n()).done;)this.enqueueFile(Rt.value)}catch(en){Qe.e(en)}finally{Qe.f()}return null}},{key:"enqueueFile",value:function(Xe){var Qe=this;if(Xe.status!==dt.ADDED||!0!==Xe.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(Xe.status=dt.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return Qe.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(Xe){var Qe=this;if(this.options.createImageThumbnails&&Xe.type.match(/image.*/)&&Xe.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(Xe),setTimeout(function(){return Qe._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var Xe=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var Qe=this._thumbnailQueue.shift();return this.createThumbnail(Qe,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(Rt){return Xe.emit("thumbnail",Qe,Rt),Xe._processingThumbnail=!1,Xe._processThumbnailQueue()})}}},{key:"removeFile",value:function(Xe){if(Xe.status===dt.UPLOADING&&this.cancelUpload(Xe),this.files=si(this.files,Xe),this.emit("removedfile",Xe),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(Xe){null==Xe&&(Xe=!1);var Rt,Qe=wr(this.files.slice(),!0);try{for(Qe.s();!(Rt=Qe.n()).done;){var ui=Rt.value;(ui.status!==dt.UPLOADING||Xe)&&this.removeFile(ui)}}catch(en){Qe.e(en)}finally{Qe.f()}return null}},{key:"resizeImage",value:function(Xe,Qe,Rt,ui,en){var ji=this;return this.createThumbnail(Xe,Qe,Rt,ui,!0,function(bn,bt){if(null==bt)return en(Xe);var Ft=ji.options.resizeMimeType;null==Ft&&(Ft=Xe.type);var ke=bt.toDataURL(Ft,ji.options.resizeQuality);return("image/jpeg"===Ft||"image/jpg"===Ft)&&(ke=zi.restore(Xe.dataURL,ke)),en(dt.dataURItoBlob(ke))})}},{key:"createThumbnail",value:function(Xe,Qe,Rt,ui,en,ji){var bn=this,bt=new FileReader;bt.onload=function(){Xe.dataURL=bt.result,"image/svg+xml"!==Xe.type?bn.createThumbnailFromUrl(Xe,Qe,Rt,ui,en,ji):ji?.(bt.result)},bt.readAsDataURL(Xe)}},{key:"displayExistingFile",value:function(Xe,Qe,Rt,ui){var en=this,ji=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",Xe),this.emit("complete",Xe),ji){Xe.dataURL=Qe,this.createThumbnailFromUrl(Xe,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(Ft){en.emit("thumbnail",Xe,Ft),Rt&&Rt()},ui)}else this.emit("thumbnail",Xe,Qe),Rt&&Rt()}},{key:"createThumbnailFromUrl",value:function(Xe,Qe,Rt,ui,en,ji,bn){var bt=this,Ft=document.createElement("img");return bn&&(Ft.crossOrigin=bn),en="from-image"!=getComputedStyle(document.body).imageOrientation&&en,Ft.onload=function(){var ke=function(Wt){return Wt(1)};return typeof EXIF<"u"&&null!==EXIF&&en&&(ke=function(Wt){return EXIF.getData(Ft,function(){return Wt(EXIF.getTag(this,"Orientation"))})}),ke(function(yt){Xe.width=Ft.width,Xe.height=Ft.height;var Wt=bt.options.resize.call(bt,Xe,Qe,Rt,ui),We=document.createElement("canvas"),Jt=We.getContext("2d");switch(We.width=Wt.trgWidth,We.height=Wt.trgHeight,yt>4&&(We.width=Wt.trgHeight,We.height=Wt.trgWidth),yt){case 2:Jt.translate(We.width,0),Jt.scale(-1,1);break;case 3:Jt.translate(We.width,We.height),Jt.rotate(Math.PI);break;case 4:Jt.translate(0,We.height),Jt.scale(1,-1);break;case 5:Jt.rotate(.5*Math.PI),Jt.scale(1,-1);break;case 6:Jt.rotate(.5*Math.PI),Jt.translate(0,-We.width);break;case 7:Jt.rotate(.5*Math.PI),Jt.translate(We.height,-We.width),Jt.scale(-1,1);break;case 8:Jt.rotate(-.5*Math.PI),Jt.translate(-We.height,0)}Mt(Jt,Ft,null!=Wt.srcX?Wt.srcX:0,null!=Wt.srcY?Wt.srcY:0,Wt.srcWidth,Wt.srcHeight,null!=Wt.trgX?Wt.trgX:0,null!=Wt.trgY?Wt.trgY:0,Wt.trgWidth,Wt.trgHeight);var ge=We.toDataURL("image/png");if(null!=ji)return ji(ge,We)})},null!=ji&&(Ft.onerror=ji),Ft.src=Xe.dataURL}},{key:"processQueue",value:function(){var Xe=this.options.parallelUploads,Qe=this.getUploadingFiles().length,Rt=Qe;if(!(Qe>=Xe)){var ui=this.getQueuedFiles();if(ui.length>0){if(this.options.uploadMultiple)return this.processFiles(ui.slice(0,Xe-Qe));for(;Rt<Xe;){if(!ui.length)return;this.processFile(ui.shift()),Rt++}}}}},{key:"processFile",value:function(Xe){return this.processFiles([Xe])}},{key:"processFiles",value:function(Xe){var Rt,Qe=wr(Xe,!0);try{for(Qe.s();!(Rt=Qe.n()).done;){var ui=Rt.value;ui.processing=!0,ui.status=dt.UPLOADING,this.emit("processing",ui)}}catch(en){Qe.e(en)}finally{Qe.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",Xe),this.uploadFiles(Xe)}},{key:"_getFilesWithXhr",value:function(Xe){return this.files.filter(function(Rt){return Rt.xhr===Xe}).map(function(Rt){return Rt})}},{key:"cancelUpload",value:function(Xe){if(Xe.status===dt.UPLOADING){var ui,Qe=this._getFilesWithXhr(Xe.xhr),Rt=wr(Qe,!0);try{for(Rt.s();!(ui=Rt.n()).done;)ui.value.status=dt.CANCELED}catch(Ft){Rt.e(Ft)}finally{Rt.f()}typeof Xe.xhr<"u"&&Xe.xhr.abort();var bn,ji=wr(Qe,!0);try{for(ji.s();!(bn=ji.n()).done;)this.emit("canceled",bn.value)}catch(Ft){ji.e(Ft)}finally{ji.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",Qe)}else(Xe.status===dt.ADDED||Xe.status===dt.QUEUED)&&(Xe.status=dt.CANCELED,this.emit("canceled",Xe),this.options.uploadMultiple&&this.emit("canceledmultiple",[Xe]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(Xe){if("function"==typeof Xe){for(var Qe=arguments.length,Rt=new Array(Qe>1?Qe-1:0),ui=1;ui<Qe;ui++)Rt[ui-1]=arguments[ui];return Xe.apply(this,Rt)}return Xe}},{key:"uploadFile",value:function(Xe){return this.uploadFiles([Xe])}},{key:"uploadFiles",value:function(Xe){var Qe=this;this._transformFiles(Xe,function(Rt){if(Qe.options.chunking){var ui=Rt[0];Xe[0].upload.chunked=Qe.options.chunking&&(Qe.options.forceChunking||ui.size>Qe.options.chunkSize),Xe[0].upload.totalChunkCount=Math.ceil(ui.size/Qe.options.chunkSize)}if(Xe[0].upload.chunked){var en=Xe[0],ji=Rt[0];en.upload.chunks=[];var bt=function(){for(var We=0;void 0!==en.upload.chunks[We];)We++;if(!(We>=en.upload.totalChunkCount)){var Jt=We*Qe.options.chunkSize,ge=Math.min(Jt+Qe.options.chunkSize,ji.size),l={name:Qe._getParamName(0),data:ji.webkitSlice?ji.webkitSlice(Jt,ge):ji.slice(Jt,ge),filename:en.upload.filename,chunkIndex:We};en.upload.chunks[We]={file:en,index:We,dataBlock:l,status:dt.UPLOADING,progress:0,retries:0},Qe._uploadData(Xe,[l])}};if(en.upload.finishedChunkUpload=function(Wt,We){var Jt=!0;Wt.status=dt.SUCCESS,Wt.dataBlock=null,Wt.xhr=null;for(var ge=0;ge<en.upload.totalChunkCount;ge++){if(void 0===en.upload.chunks[ge])return bt();en.upload.chunks[ge].status!==dt.SUCCESS&&(Jt=!1)}Jt&&Qe.options.chunksUploaded(en,function(){Qe._finished(Xe,We,null)})},Qe.options.parallelChunkUploads)for(var Ft=0;Ft<en.upload.totalChunkCount;Ft++)bt();else bt()}else{for(var ke=[],yt=0;yt<Xe.length;yt++)ke[yt]={name:Qe._getParamName(yt),data:Rt[yt],filename:Xe[yt].upload.filename};Qe._uploadData(Xe,ke)}})}},{key:"_getChunk",value:function(Xe,Qe){for(var Rt=0;Rt<Xe.upload.totalChunkCount;Rt++)if(void 0!==Xe.upload.chunks[Rt]&&Xe.upload.chunks[Rt].xhr===Qe)return Xe.upload.chunks[Rt]}},{key:"_uploadData",value:function(Xe,Qe){var ji,Rt=this,ui=new XMLHttpRequest,en=wr(Xe,!0);try{for(en.s();!(ji=en.n()).done;)ji.value.xhr=ui}catch(K){en.e(K)}finally{en.f()}Xe[0].upload.chunked&&(Xe[0].upload.chunks[Qe[0].chunkIndex].xhr=ui);var bt=this.resolveOption(this.options.method,Xe),Ft=this.resolveOption(this.options.url,Xe);ui.open(bt,Ft,!0),this.resolveOption(this.options.timeout,Xe)&&(ui.timeout=this.resolveOption(this.options.timeout,Xe)),ui.withCredentials=!!this.options.withCredentials,ui.onload=function(K){Rt._finishedUploading(Xe,ui,K)},ui.ontimeout=function(){Rt._handleUploadError(Xe,ui,"Request timedout after ".concat(Rt.options.timeout/1e3," seconds"))},ui.onerror=function(){Rt._handleUploadError(Xe,ui)},(null!=ui.upload?ui.upload:ui).onprogress=function(K){return Rt._updateFilesUploadProgress(Xe,ui,K)};var Wt={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var We in this.options.headers&&dt.extend(Wt,this.options.headers),Wt){var Jt=Wt[We];Jt&&ui.setRequestHeader(We,Jt)}var ge=new FormData;if(this.options.params){var l=this.options.params;for(var u in"function"==typeof l&&(l=l.call(this,Xe,ui,Xe[0].upload.chunked?this._getChunk(Xe[0],ui):null)),l){var p=l[u];if(Array.isArray(p))for(var y=0;y<p.length;y++)ge.append(u,p[y]);else ge.append(u,p)}}var C,w=wr(Xe,!0);try{for(w.s();!(C=w.n()).done;)this.emit("sending",C.value,ui,ge)}catch(K){w.e(K)}finally{w.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",Xe,ui,ge),this._addFormElementData(ge);for(var B=0;B<Qe.length;B++){var H=Qe[B];ge.append(H.name,H.data,H.filename)}this.submitRequest(ui,ge,Xe)}},{key:"_transformFiles",value:function(Xe,Qe){for(var Rt=this,ui=[],en=0,ji=function(Ft){Rt.options.transformFile.call(Rt,Xe[Ft],function(ke){ui[Ft]=ke,++en===Xe.length&&Qe(ui)})},bn=0;bn<Xe.length;bn++)ji(bn)}},{key:"_addFormElementData",value:function(Xe){if("FORM"===this.element.tagName){var Rt,Qe=wr(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(Qe.s();!(Rt=Qe.n()).done;){var ui=Rt.value,en=ui.getAttribute("name"),ji=ui.getAttribute("type");if(ji&&(ji=ji.toLowerCase()),!(typeof en>"u"||null===en))if("SELECT"===ui.tagName&&ui.hasAttribute("multiple")){var bt,bn=wr(ui.options,!0);try{for(bn.s();!(bt=bn.n()).done;){var Ft=bt.value;Ft.selected&&Xe.append(en,Ft.value)}}catch(ke){bn.e(ke)}finally{bn.f()}}else(!ji||"checkbox"!==ji&&"radio"!==ji||ui.checked)&&Xe.append(en,ui.value)}}catch(ke){Qe.e(ke)}finally{Qe.f()}}}},{key:"_updateFilesUploadProgress",value:function(Xe,Qe,Rt){if(Xe[0].upload.chunked){var bn=Xe[0],bt=this._getChunk(bn,Qe);Rt?(bt.progress=100*Rt.loaded/Rt.total,bt.total=Rt.total,bt.bytesSent=Rt.loaded):(bt.progress=100,bt.bytesSent=bt.total),bn.upload.progress=0,bn.upload.total=0,bn.upload.bytesSent=0;for(var Ft=0;Ft<bn.upload.totalChunkCount;Ft++)bn.upload.chunks[Ft]&&typeof bn.upload.chunks[Ft].progress<"u"&&(bn.upload.progress+=bn.upload.chunks[Ft].progress,bn.upload.total+=bn.upload.chunks[Ft].total,bn.upload.bytesSent+=bn.upload.chunks[Ft].bytesSent);bn.upload.progress=bn.upload.progress/bn.upload.totalChunkCount,this.emit("uploadprogress",bn,bn.upload.progress,bn.upload.bytesSent)}else{var en,ui=wr(Xe,!0);try{for(ui.s();!(en=ui.n()).done;){var ji=en.value;ji.upload.total&&ji.upload.bytesSent&&ji.upload.bytesSent==ji.upload.total||(Rt?(ji.upload.progress=100*Rt.loaded/Rt.total,ji.upload.total=Rt.total,ji.upload.bytesSent=Rt.loaded):(ji.upload.progress=100,ji.upload.bytesSent=ji.upload.total),this.emit("uploadprogress",ji,ji.upload.progress,ji.upload.bytesSent))}}catch(ke){ui.e(ke)}finally{ui.f()}}}},{key:"_finishedUploading",value:function(Xe,Qe,Rt){var ui;if(Xe[0].status!==dt.CANCELED&&4===Qe.readyState){if("arraybuffer"!==Qe.responseType&&"blob"!==Qe.responseType&&(ui=Qe.responseText,Qe.getResponseHeader("content-type")&&~Qe.getResponseHeader("content-type").indexOf("application/json")))try{ui=JSON.parse(ui)}catch(en){Rt=en,ui="Invalid JSON response from server."}this._updateFilesUploadProgress(Xe,Qe),200<=Qe.status&&Qe.status<300?Xe[0].upload.chunked?Xe[0].upload.finishedChunkUpload(this._getChunk(Xe[0],Qe),ui):this._finished(Xe,ui,Rt):this._handleUploadError(Xe,Qe,ui)}}},{key:"_handleUploadError",value:function(Xe,Qe,Rt){if(Xe[0].status!==dt.CANCELED){if(Xe[0].upload.chunked&&this.options.retryChunks){var ui=this._getChunk(Xe[0],Qe);if(ui.retries++<this.options.retryChunksLimit)return void this._uploadData(Xe,[ui.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(Xe,Rt||this.options.dictResponseError.replace("{{statusCode}}",Qe.status),Qe)}}},{key:"submitRequest",value:function(Xe,Qe,Rt){1==Xe.readyState?Xe.send(Qe):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(Xe,Qe,Rt){var en,ui=wr(Xe,!0);try{for(ui.s();!(en=ui.n()).done;){var ji=en.value;ji.status=dt.SUCCESS,this.emit("success",ji,Qe,Rt),this.emit("complete",ji)}}catch(bn){ui.e(bn)}finally{ui.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",Xe,Qe,Rt),this.emit("completemultiple",Xe)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(Xe,Qe,Rt){var en,ui=wr(Xe,!0);try{for(ui.s();!(en=ui.n()).done;){var ji=en.value;ji.status=dt.ERROR,this.emit("error",ji,Qe,Rt),this.emit("complete",ji)}}catch(bn){ui.e(bn)}finally{ui.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",Xe,Qe,Rt),this.emit("completemultiple",Xe)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=jn,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(Xe){for(var Qe=arguments.length,Rt=new Array(Qe>1?Qe-1:0),ui=1;ui<Qe;ui++)Rt[ui-1]=arguments[ui];for(var en=0,ji=Rt;en<ji.length;en++){var bn=ji[en];for(var bt in bn)Xe[bt]=bn[bt]}return Xe}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Xe){var Qe=16*Math.random()|0;return("x"===Xe?Qe:3&Qe|8).toString(16)})}}]),dt}(jn);St.initClass(),St.version="5.9.3",St.options={},St.optionsForElement=function(Ht){if(Ht.getAttribute("id"))return St.options[wi(Ht.getAttribute("id"))]},St.instances=[],St.forElement=function(Ht){if("string"==typeof Ht&&(Ht=document.querySelector(Ht)),null==Ht?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return Ht.dropzone},St.autoDiscover=!0,St.discover=function(){var Ht;if(document.querySelectorAll)Ht=document.querySelectorAll(".dropzone");else{Ht=[];var Vt=function(ot){return function(){var Rt,Xe=[],Qe=wr(ot,!0);try{for(Qe.s();!(Rt=Qe.n()).done;){var ui=Rt.value;/(^| )dropzone($| )/.test(ui.className)?Xe.push(Ht.push(ui)):Xe.push(void 0)}}catch(en){Qe.e(en)}finally{Qe.f()}return Xe}()};Vt(document.getElementsByTagName("div")),Vt(document.getElementsByTagName("form"))}return function(){var Xe,dt=[],ot=wr(Ht,!0);try{for(ot.s();!(Xe=ot.n()).done;){var Qe=Xe.value;!1!==St.optionsForElement(Qe)?dt.push(new St(Qe)):dt.push(void 0)}}catch(Rt){ot.e(Rt)}finally{ot.f()}return dt}()},St.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],St.isBrowserSupported=function(){var Ht=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==St.blacklistedBrowsers&&(St.blockedBrowsers=St.blacklistedBrowsers);var dt,Vt=wr(St.blockedBrowsers,!0);try{for(Vt.s();!(dt=Vt.n()).done;)dt.value.test(navigator.userAgent)&&(Ht=!1)}catch(Xe){Vt.e(Xe)}finally{Vt.f()}}else Ht=!1;else Ht=!1;return Ht},St.dataURItoBlob=function(Ht){for(var Vt=atob(Ht.split(",")[1]),dt=Ht.split(",")[0].split(":")[1].split(";")[0],ot=new ArrayBuffer(Vt.length),Xe=new Uint8Array(ot),Qe=0,Rt=Vt.length,ui=0<=Rt;ui?Qe<=Rt:Qe>=Rt;ui?Qe++:Qe--)Xe[Qe]=Vt.charCodeAt(Qe);return new Blob([ot],{type:dt})};var si=function(Vt,dt){return Vt.filter(function(ot){return ot!==dt}).map(function(ot){return ot})},wi=function(Vt){return Vt.replace(/[\-_](\w)/g,function(dt){return dt.charAt(1).toUpperCase()})};St.createElement=function(Ht){var Vt=document.createElement("div");return Vt.innerHTML=Ht,Vt.childNodes[0]},St.elementInside=function(Ht,Vt){if(Ht===Vt)return!0;for(;Ht=Ht.parentNode;)if(Ht===Vt)return!0;return!1},St.getElement=function(Ht,Vt){var dt;if("string"==typeof Ht?dt=document.querySelector(Ht):null!=Ht.nodeType&&(dt=Ht),null==dt)throw new Error("Invalid `".concat(Vt,"` option provided. Please provide a CSS selector or a plain HTML element."));return dt},St.getElements=function(Ht,Vt){var ot;if(Ht instanceof Array){ot=[];try{var Qe,Xe=wr(Ht,!0);try{for(Xe.s();!(Qe=Xe.n()).done;)ot.push(this.getElement(Qe.value,Vt))}catch(en){Xe.e(en)}finally{Xe.f()}}catch{ot=null}}else if("string"==typeof Ht){ot=[];var ui,Rt=wr(document.querySelectorAll(Ht),!0);try{for(Rt.s();!(ui=Rt.n()).done;)ot.push(ui.value)}catch(en){Rt.e(en)}finally{Rt.f()}}else null!=Ht.nodeType&&(ot=[Ht]);if(null==ot||!ot.length)throw new Error("Invalid `".concat(Vt,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return ot},St.confirm=function(Ht,Vt,dt){return window.confirm(Ht)?Vt():null!=dt?dt():void 0},St.isValidFile=function(Ht,Vt){if(!Vt)return!0;Vt=Vt.split(",");var Qe,dt=Ht.type,ot=dt.replace(/\/.*$/,""),Xe=wr(Vt,!0);try{for(Xe.s();!(Qe=Xe.n()).done;){var Rt=Qe.value;if("."===(Rt=Rt.trim()).charAt(0)){if(-1!==Ht.name.toLowerCase().indexOf(Rt.toLowerCase(),Ht.name.length-Rt.length))return!0}else if(/\/\*$/.test(Rt)){if(ot===Rt.replace(/\/.*$/,""))return!0}else if(dt===Rt)return!0}}catch(ui){Xe.e(ui)}finally{Xe.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(Ht){return this.each(function(){return new St(this,Ht)})}),St.ADDED="added",St.QUEUED="queued",St.ACCEPTED=St.QUEUED,St.UPLOADING="uploading",St.PROCESSING=St.UPLOADING,St.CANCELED="canceled",St.ERROR="error",St.SUCCESS="success";var Mt=function(Vt,dt,ot,Xe,Qe,Rt,ui,en,ji,bn){var bt=function(Vt){var ot=Vt.naturalHeight,Xe=document.createElement("canvas");Xe.width=1,Xe.height=ot;var Qe=Xe.getContext("2d");Qe.drawImage(Vt,0,0);for(var ui=Qe.getImageData(1,0,1,ot).data,en=0,ji=ot,bn=ot;bn>en;)0===ui[4*(bn-1)+3]?ji=bn:en=bn,bn=ji+en>>1;var Ft=bn/ot;return 0===Ft?1:Ft}(dt);return Vt.drawImage(dt,ot,Xe,Qe,Rt,ui,en,ji,bn/bt)},zi=function(){function Ht(){io(this,Ht)}return Rs(Ht,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(dt){for(var ot="",Xe=void 0,Qe=void 0,Rt="",ui=void 0,en=void 0,ji=void 0,bn="",bt=0;ui=(Xe=dt[bt++])>>2,en=(3&Xe)<<4|(Qe=dt[bt++])>>4,ji=(15&Qe)<<2|(Rt=dt[bt++])>>6,bn=63&Rt,isNaN(Qe)?ji=bn=64:isNaN(Rt)&&(bn=64),ot=ot+this.KEY_STR.charAt(ui)+this.KEY_STR.charAt(en)+this.KEY_STR.charAt(ji)+this.KEY_STR.charAt(bn),Xe=Qe=Rt="",ui=en=ji=bn="",bt<dt.length;);return ot}},{key:"restore",value:function(dt,ot){if(!dt.match("data:image/jpeg;base64,"))return ot;var Xe=this.decode64(dt.replace("data:image/jpeg;base64,","")),Qe=this.slice2Segments(Xe),Rt=this.exifManipulation(ot,Qe);return"data:image/jpeg;base64,".concat(this.encode64(Rt))}},{key:"exifManipulation",value:function(dt,ot){var Xe=this.getExifArray(ot),Qe=this.insertExif(dt,Xe);return new Uint8Array(Qe)}},{key:"getExifArray",value:function(dt){for(var ot=void 0,Xe=0;Xe<dt.length;){if(255===(ot=dt[Xe])[0]&225===ot[1])return ot;Xe++}return[]}},{key:"insertExif",value:function(dt,ot){var Xe=dt.replace("data:image/jpeg;base64,",""),Qe=this.decode64(Xe),Rt=Qe.indexOf(255,3),ui=Qe.slice(0,Rt),en=Qe.slice(Rt),ji=ui;return(ji=ji.concat(ot)).concat(en)}},{key:"slice2Segments",value:function(dt){for(var ot=0,Xe=[];!(255===dt[ot]&218===dt[ot+1]);){if(255===dt[ot]&216===dt[ot+1])ot+=2;else{var Rt=ot+(256*dt[ot+2]+dt[ot+3])+2,ui=dt.slice(ot,Rt);Xe.push(ui),ot=Rt}if(ot>dt.length)break}return Xe}},{key:"decode64",value:function(dt){var Qe=void 0,Rt="",ui=void 0,en=void 0,ji=void 0,bn="",bt=0,Ft=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(dt)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),dt=dt.replace(/[^A-Za-z0-9\+\/\=]/g,"");ui=this.KEY_STR.indexOf(dt.charAt(bt++)),Qe=(15&(en=this.KEY_STR.indexOf(dt.charAt(bt++))))<<4|(ji=this.KEY_STR.indexOf(dt.charAt(bt++)))>>2,Rt=(3&ji)<<6|(bn=this.KEY_STR.indexOf(dt.charAt(bt++))),Ft.push(ui<<2|en>>4),64!==ji&&Ft.push(Qe),64!==bn&&Ft.push(Rt),Qe=Rt="",ui=en=ji=bn="",bt<dt.length;);return Ft}}]),Ht}();zi.initClass();St._autoDiscoverFunction=function(){if(St.autoDiscover)return St.discover()},function(Vt,dt){var ot=!1,Xe=!0,Qe=Vt.document,Rt=Qe.documentElement,ui=Qe.addEventListener?"addEventListener":"attachEvent",en=Qe.addEventListener?"removeEventListener":"detachEvent",ji=Qe.addEventListener?"":"on",bn=function Ft(ke){if(("readystatechange"!==ke.type||"complete"===Qe.readyState)&&(("load"===ke.type?Vt:Qe)[en](ji+ke.type,Ft,!1),!ot&&(ot=!0)))return dt.call(Vt,ke.type||ke)};if("complete"!==Qe.readyState){if(Qe.createEventObject&&Rt.doScroll){try{Xe=!Vt.frameElement}catch{}Xe&&function Ft(){try{Rt.doScroll("left")}catch{return void setTimeout(Ft,50)}return bn("poll")}()}Qe[ui](ji+"DOMContentLoaded",bn,!1),Qe[ui](ji+"readystatechange",bn,!1),Vt[ui](ji+"load",bn,!1)}}(window,St._autoDiscoverFunction),window.Dropzone=St;var ar=St}(),mt}()},2880:function(ao,Hs){var Qt,mt;void 0!==(mt="function"==typeof(Qt=function(){"use strict";function n(it,nt,_t){var gt=new XMLHttpRequest;gt.open("GET",it),gt.responseType="blob",gt.onload=function(){$e(gt.response,nt,_t)},gt.onerror=function(){console.error("could not download file")},gt.send()}function j(it){var nt=new XMLHttpRequest;nt.open("HEAD",it,!1);try{nt.send()}catch{}return 200<=nt.status&&299>=nt.status}function He(it){try{it.dispatchEvent(new MouseEvent("click"))}catch{var nt=document.createEvent("MouseEvents");nt.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),it.dispatchEvent(nt)}}var Be="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Re=Be.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),$e=Be.saveAs||("object"!=typeof window||window!==Be?function(){}:"download"in HTMLAnchorElement.prototype&&!Re?function(it,nt,_t){var gt=Be.URL||Be.webkitURL,Xt=document.createElement("a");Xt.download=nt=nt||it.name||"download",Xt.rel="noopener","string"==typeof it?(Xt.href=it,Xt.origin===location.origin?He(Xt):j(Xt.href)?n(it,nt,_t):He(Xt,Xt.target="_blank")):(Xt.href=gt.createObjectURL(it),setTimeout(function(){gt.revokeObjectURL(Xt.href)},4e4),setTimeout(function(){He(Xt)},0))}:"msSaveOrOpenBlob"in navigator?function(it,nt,_t){if(nt=nt||it.name||"download","string"!=typeof it)navigator.msSaveOrOpenBlob(function Ze(it,nt){return typeof nt>"u"?nt={autoBom:!1}:"object"!=typeof nt&&(console.warn("Deprecated: Expected third argument to be a object"),nt={autoBom:!nt}),nt.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(it.type)?new Blob(["\ufeff",it],{type:it.type}):it}(it,_t),nt);else if(j(it))n(it,nt,_t);else{var gt=document.createElement("a");gt.href=it,gt.target="_blank",setTimeout(function(){He(gt)})}}:function(it,nt,_t,gt){if((gt=gt||open("","_blank"))&&(gt.document.title=gt.document.body.innerText="downloading..."),"string"==typeof it)return n(it,nt,_t);var Xt="application/octet-stream"===it.type,Et=/constructor/i.test(Be.HTMLElement)||Be.safari,Tt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Tt||Xt&&Et||Re)&&typeof FileReader<"u"){var Nt=new FileReader;Nt.onloadend=function(){var Ci=Nt.result;Ci=Tt?Ci:Ci.replace(/^data:[^;]*;/,"data:attachment/file;"),gt?gt.location.href=Ci:location=Ci,gt=null},Nt.readAsDataURL(it)}else{var Pi=Be.URL||Be.webkitURL,tt=Pi.createObjectURL(it);gt?gt.location=tt:location.href=tt,gt=null,setTimeout(function(){Pi.revokeObjectURL(tt)},4e4)}});Be.saveAs=$e.saveAs=$e,ao.exports=$e})?Qt.apply(Hs,[]):Qt)&&(ao.exports=mt)},9280:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(ao){for(var Hs=[],Qt=1;Qt<arguments.length;Qt++)Hs[Qt-1]=arguments[Qt];if(!ao)throw TypeError("Cannot convert undefined or null to object");for(var D=function(j){j&&Object.keys(j).forEach(function(He){return ao[He]=j[He]})},mt=0,Ze=Hs;mt<Ze.length;mt++)D(Ze[mt]);return ao})},9216:function(ao,Hs){!function(Qt){"use strict";function mt(v){var R,Z,fe,Ie;for(Z=1,fe=arguments.length;Z<fe;Z++)for(R in Ie=arguments[Z])v[R]=Ie[R];return v}var Ze=Object.create||function(){function v(){}return function(R){return v.prototype=R,new v}}();function n(v,R){var Z=Array.prototype.slice;if(v.bind)return v.bind.apply(v,Z.call(arguments,1));var fe=Z.call(arguments,2);return function(){return v.apply(R,fe.length?fe.concat(Z.call(arguments)):arguments)}}var j=0;function He(v){return"_leaflet_id"in v||(v._leaflet_id=++j),v._leaflet_id}function Be(v,R,Z){var fe,Ie,rt,ri;return ri=function(){fe=!1,Ie&&(rt.apply(Z,Ie),Ie=!1)},rt=function(){fe?Ie=arguments:(v.apply(Z,arguments),setTimeout(ri,R),fe=!0)},rt}function Re(v,R,Z){var fe=R[1],Ie=R[0],rt=fe-Ie;return v===fe&&Z?v:((v-Ie)%rt+rt)%rt+Ie}function $e(){return!1}function it(v,R){if(!1===R)return v;var Z=Math.pow(10,void 0===R?6:R);return Math.round(v*Z)/Z}function nt(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function _t(v){return nt(v).split(/\s+/)}function gt(v,R){for(var Z in Object.prototype.hasOwnProperty.call(v,"options")||(v.options=v.options?Ze(v.options):{}),R)v.options[Z]=R[Z];return v.options}function Xt(v,R,Z){var fe=[];for(var Ie in v)fe.push(encodeURIComponent(Z?Ie.toUpperCase():Ie)+"="+encodeURIComponent(v[Ie]));return(R&&-1!==R.indexOf("?")?"&":"?")+fe.join("&")}var Et=/\{ *([\w_ -]+) *\}/g;function Tt(v,R){return v.replace(Et,function(Z,fe){var Ie=R[fe];if(void 0===Ie)throw new Error("No value provided for variable "+Z);return"function"==typeof Ie&&(Ie=Ie(R)),Ie})}var Nt=Array.isArray||function(v){return"[object Array]"===Object.prototype.toString.call(v)};function Pi(v,R){for(var Z=0;Z<v.length;Z++)if(v[Z]===R)return Z;return-1}var tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ci(v){return window["webkit"+v]||window["moz"+v]||window["ms"+v]}var Mi=0;function kt(v){var R=+new Date,Z=Math.max(0,16-(R-Mi));return Mi=R+Z,window.setTimeout(v,Z)}var Oi=window.requestAnimationFrame||Ci("RequestAnimationFrame")||kt,vi=window.cancelAnimationFrame||Ci("CancelAnimationFrame")||Ci("CancelRequestAnimationFrame")||function(v){window.clearTimeout(v)};function hi(v,R,Z){if(!Z||Oi!==kt)return Oi.call(window,n(v,R));v.call(R)}function Dt(v){v&&vi.call(window,v)}var yi={__proto__:null,extend:mt,create:Ze,bind:n,get lastId(){return j},stamp:He,throttle:Be,wrapNum:Re,falseFn:$e,formatNum:it,trim:nt,splitWords:_t,setOptions:gt,getParamString:Xt,template:Tt,isArray:Nt,indexOf:Pi,emptyImageUrl:tt,requestFn:Oi,cancelFn:vi,requestAnimFrame:hi,cancelAnimFrame:Dt};function Ri(){}Ri.extend=function(v){var R=function(){gt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},Z=R.__super__=this.prototype,fe=Ze(Z);for(var Ie in fe.constructor=R,R.prototype=fe,this)Object.prototype.hasOwnProperty.call(this,Ie)&&"prototype"!==Ie&&"__super__"!==Ie&&(R[Ie]=this[Ie]);return v.statics&&mt(R,v.statics),v.includes&&(function Xi(v){if(!(typeof L>"u")&&L&&L.Mixin){v=Nt(v)?v:[v];for(var R=0;R<v.length;R++)v[R]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(v.includes),mt.apply(null,[fe].concat(v.includes))),mt(fe,v),delete fe.statics,delete fe.includes,fe.options&&(fe.options=Z.options?Ze(Z.options):{},mt(fe.options,v.options)),fe._initHooks=[],fe.callInitHooks=function(){if(!this._initHooksCalled){Z.callInitHooks&&Z.callInitHooks.call(this),this._initHooksCalled=!0;for(var rt=0,ri=fe._initHooks.length;rt<ri;rt++)fe._initHooks[rt].call(this)}},R},Ri.include=function(v){var R=this.prototype.options;return mt(this.prototype,v),v.options&&(this.prototype.options=R,this.mergeOptions(v.options)),this},Ri.mergeOptions=function(v){return mt(this.prototype.options,v),this},Ri.addInitHook=function(v){var R=Array.prototype.slice.call(arguments,1),Z="function"==typeof v?v:function(){this[v].apply(this,R)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(Z),this};var Tn={on:function(v,R,Z){if("object"==typeof v)for(var fe in v)this._on(fe,v[fe],R);else for(var Ie=0,rt=(v=_t(v)).length;Ie<rt;Ie++)this._on(v[Ie],R,Z);return this},off:function(v,R,Z){if(arguments.length)if("object"==typeof v)for(var fe in v)this._off(fe,v[fe],R);else{v=_t(v);for(var Ie=1===arguments.length,rt=0,ri=v.length;rt<ri;rt++)Ie?this._off(v[rt]):this._off(v[rt],R,Z)}else delete this._events;return this},_on:function(v,R,Z,fe){if("function"==typeof R){if(!1===this._listens(v,R,Z)){Z===this&&(Z=void 0);var Ie={fn:R,ctx:Z};fe&&(Ie.once=!0),this._events=this._events||{},this._events[v]=this._events[v]||[],this._events[v].push(Ie)}}else console.warn("wrong listener type: "+typeof R)},_off:function(v,R,Z){var fe,Ie,rt;if(this._events&&(fe=this._events[v])){if(1===arguments.length){if(this._firingCount)for(Ie=0,rt=fe.length;Ie<rt;Ie++)fe[Ie].fn=$e;return void delete this._events[v]}if("function"!=typeof R)return void console.warn("wrong listener type: "+typeof R);var ri=this._listens(v,R,Z);!1!==ri&&(this._firingCount&&(fe[ri].fn=$e,this._events[v]=fe=fe.slice()),fe.splice(ri,1))}},fire:function(v,R,Z){if(!this.listens(v,Z))return this;var fe=mt({},R,{type:v,target:this,sourceTarget:R&&R.sourceTarget||this});if(this._events){var Ie=this._events[v];if(Ie){this._firingCount=this._firingCount+1||1;for(var rt=0,ri=Ie.length;rt<ri;rt++){var Ai=Ie[rt],ln=Ai.fn;Ai.once&&this.off(v,ln,Ai.ctx),ln.call(Ai.ctx||this,fe)}this._firingCount--}}return Z&&this._propagateEvent(fe),this},listens:function(v,R,Z,fe){"string"!=typeof v&&console.warn('"string" type argument expected');var Ie=R;"function"!=typeof R&&(fe=!!R,Ie=void 0,Z=void 0);var rt=this._events&&this._events[v];if(rt&&rt.length&&!1!==this._listens(v,Ie,Z))return!0;if(fe)for(var ri in this._eventParents)if(this._eventParents[ri].listens(v,R,Z,fe))return!0;return!1},_listens:function(v,R,Z){if(!this._events)return!1;var fe=this._events[v]||[];if(!R)return!!fe.length;Z===this&&(Z=void 0);for(var Ie=0,rt=fe.length;Ie<rt;Ie++)if(fe[Ie].fn===R&&fe[Ie].ctx===Z)return Ie;return!1},once:function(v,R,Z){if("object"==typeof v)for(var fe in v)this._on(fe,v[fe],R,!0);else for(var Ie=0,rt=(v=_t(v)).length;Ie<rt;Ie++)this._on(v[Ie],R,Z,!0);return this},addEventParent:function(v){return this._eventParents=this._eventParents||{},this._eventParents[He(v)]=v,this},removeEventParent:function(v){return this._eventParents&&delete this._eventParents[He(v)],this},_propagateEvent:function(v){for(var R in this._eventParents)this._eventParents[R].fire(v.type,mt({layer:v.target,propagatedFrom:v.target},v),!0)}};Tn.addEventListener=Tn.on,Tn.removeEventListener=Tn.clearAllEventListeners=Tn.off,Tn.addOneTimeEventListener=Tn.once,Tn.fireEvent=Tn.fire,Tn.hasEventListeners=Tn.listens;var qi=Ri.extend(Tn);function nn(v,R,Z){this.x=Z?Math.round(v):v,this.y=Z?Math.round(R):R}var _n=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};function Fn(v,R,Z){return v instanceof nn?v:Nt(v)?new nn(v[0],v[1]):null==v?v:"object"==typeof v&&"x"in v&&"y"in v?new nn(v.x,v.y):new nn(v,R,Z)}function mr(v,R){if(v)for(var Z=R?[v,R]:v,fe=0,Ie=Z.length;fe<Ie;fe++)this.extend(Z[fe])}function hr(v,R){return!v||v instanceof mr?v:new mr(v,R)}function Nr(v,R){if(v)for(var Z=R?[v,R]:v,fe=0,Ie=Z.length;fe<Ie;fe++)this.extend(Z[fe])}function Si(v,R){return v instanceof Nr?v:new Nr(v,R)}function kn(v,R,Z){if(isNaN(v)||isNaN(R))throw new Error("Invalid LatLng object: ("+v+", "+R+")");this.lat=+v,this.lng=+R,void 0!==Z&&(this.alt=+Z)}function Jn(v,R,Z){return v instanceof kn?v:Nt(v)&&"object"!=typeof v[0]?3===v.length?new kn(v[0],v[1],v[2]):2===v.length?new kn(v[0],v[1]):null:null==v?v:"object"==typeof v&&"lat"in v?new kn(v.lat,"lng"in v?v.lng:v.lon,v.alt):void 0===R?null:new kn(v,R,Z)}nn.prototype={clone:function(){return new nn(this.x,this.y)},add:function(v){return this.clone()._add(Fn(v))},_add:function(v){return this.x+=v.x,this.y+=v.y,this},subtract:function(v){return this.clone()._subtract(Fn(v))},_subtract:function(v){return this.x-=v.x,this.y-=v.y,this},divideBy:function(v){return this.clone()._divideBy(v)},_divideBy:function(v){return this.x/=v,this.y/=v,this},multiplyBy:function(v){return this.clone()._multiplyBy(v)},_multiplyBy:function(v){return this.x*=v,this.y*=v,this},scaleBy:function(v){return new nn(this.x*v.x,this.y*v.y)},unscaleBy:function(v){return new nn(this.x/v.x,this.y/v.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_n(this.x),this.y=_n(this.y),this},distanceTo:function(v){var R=(v=Fn(v)).x-this.x,Z=v.y-this.y;return Math.sqrt(R*R+Z*Z)},equals:function(v){return(v=Fn(v)).x===this.x&&v.y===this.y},contains:function(v){return v=Fn(v),Math.abs(v.x)<=Math.abs(this.x)&&Math.abs(v.y)<=Math.abs(this.y)},toString:function(){return"Point("+it(this.x)+", "+it(this.y)+")"}},mr.prototype={extend:function(v){var R,Z;if(!v)return this;if(v instanceof nn||"number"==typeof v[0]||"x"in v)R=Z=Fn(v);else if(Z=(v=hr(v)).max,!(R=v.min)||!Z)return this;return this.min||this.max?(this.min.x=Math.min(R.x,this.min.x),this.max.x=Math.max(Z.x,this.max.x),this.min.y=Math.min(R.y,this.min.y),this.max.y=Math.max(Z.y,this.max.y)):(this.min=R.clone(),this.max=Z.clone()),this},getCenter:function(v){return Fn((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,v)},getBottomLeft:function(){return Fn(this.min.x,this.max.y)},getTopRight:function(){return Fn(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(v){var R,Z;return(v="number"==typeof v[0]||v instanceof nn?Fn(v):hr(v))instanceof mr?(R=v.min,Z=v.max):R=Z=v,R.x>=this.min.x&&Z.x<=this.max.x&&R.y>=this.min.y&&Z.y<=this.max.y},intersects:function(v){v=hr(v);var R=this.min,Z=this.max,fe=v.min,Ie=v.max;return Ie.x>=R.x&&fe.x<=Z.x&&Ie.y>=R.y&&fe.y<=Z.y},overlaps:function(v){v=hr(v);var R=this.min,Z=this.max,fe=v.min,Ie=v.max;return Ie.x>R.x&&fe.x<Z.x&&Ie.y>R.y&&fe.y<Z.y},isValid:function(){return!(!this.min||!this.max)},pad:function(v){var R=this.min,Z=this.max,fe=Math.abs(R.x-Z.x)*v,Ie=Math.abs(R.y-Z.y)*v;return hr(Fn(R.x-fe,R.y-Ie),Fn(Z.x+fe,Z.y+Ie))},equals:function(v){return!!v&&(v=hr(v),this.min.equals(v.getTopLeft())&&this.max.equals(v.getBottomRight()))}},Nr.prototype={extend:function(v){var fe,Ie,R=this._southWest,Z=this._northEast;if(v instanceof kn)fe=v,Ie=v;else{if(!(v instanceof Nr))return v?this.extend(Jn(v)||Si(v)):this;if(Ie=v._northEast,!(fe=v._southWest)||!Ie)return this}return R||Z?(R.lat=Math.min(fe.lat,R.lat),R.lng=Math.min(fe.lng,R.lng),Z.lat=Math.max(Ie.lat,Z.lat),Z.lng=Math.max(Ie.lng,Z.lng)):(this._southWest=new kn(fe.lat,fe.lng),this._northEast=new kn(Ie.lat,Ie.lng)),this},pad:function(v){var R=this._southWest,Z=this._northEast,fe=Math.abs(R.lat-Z.lat)*v,Ie=Math.abs(R.lng-Z.lng)*v;return new Nr(new kn(R.lat-fe,R.lng-Ie),new kn(Z.lat+fe,Z.lng+Ie))},getCenter:function(){return new kn((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new kn(this.getNorth(),this.getWest())},getSouthEast:function(){return new kn(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(v){v="number"==typeof v[0]||v instanceof kn||"lat"in v?Jn(v):Si(v);var fe,Ie,R=this._southWest,Z=this._northEast;return v instanceof Nr?(fe=v.getSouthWest(),Ie=v.getNorthEast()):fe=Ie=v,fe.lat>=R.lat&&Ie.lat<=Z.lat&&fe.lng>=R.lng&&Ie.lng<=Z.lng},intersects:function(v){v=Si(v);var R=this._southWest,Z=this._northEast,fe=v.getSouthWest(),Ie=v.getNorthEast();return Ie.lat>=R.lat&&fe.lat<=Z.lat&&Ie.lng>=R.lng&&fe.lng<=Z.lng},overlaps:function(v){v=Si(v);var R=this._southWest,Z=this._northEast,fe=v.getSouthWest(),Ie=v.getNorthEast();return Ie.lat>R.lat&&fe.lat<Z.lat&&Ie.lng>R.lng&&fe.lng<Z.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(v,R){return!!v&&(v=Si(v),this._southWest.equals(v.getSouthWest(),R)&&this._northEast.equals(v.getNorthEast(),R))},isValid:function(){return!(!this._southWest||!this._northEast)}},kn.prototype={equals:function(v,R){return!!v&&(v=Jn(v),Math.max(Math.abs(this.lat-v.lat),Math.abs(this.lng-v.lng))<=(void 0===R?1e-9:R))},toString:function(v){return"LatLng("+it(this.lat,v)+", "+it(this.lng,v)+")"},distanceTo:function(v){return Xr.distance(this,Jn(v))},wrap:function(){return Xr.wrapLatLng(this)},toBounds:function(v){var R=180*v/40075017,Z=R/Math.cos(Math.PI/180*this.lat);return Si([this.lat-R,this.lng-Z],[this.lat+R,this.lng+Z])},clone:function(){return new kn(this.lat,this.lng,this.alt)}};var v,ts={latLngToPoint:function(v,R){var Z=this.projection.project(v),fe=this.scale(R);return this.transformation._transform(Z,fe)},pointToLatLng:function(v,R){var Z=this.scale(R),fe=this.transformation.untransform(v,Z);return this.projection.unproject(fe)},project:function(v){return this.projection.project(v)},unproject:function(v){return this.projection.unproject(v)},scale:function(v){return 256*Math.pow(2,v)},zoom:function(v){return Math.log(v/256)/Math.LN2},getProjectedBounds:function(v){if(this.infinite)return null;var R=this.projection.bounds,Z=this.scale(v);return new mr(this.transformation.transform(R.min,Z),this.transformation.transform(R.max,Z))},infinite:!1,wrapLatLng:function(v){var R=this.wrapLng?Re(v.lng,this.wrapLng,!0):v.lng;return new kn(this.wrapLat?Re(v.lat,this.wrapLat,!0):v.lat,R,v.alt)},wrapLatLngBounds:function(v){var R=v.getCenter(),Z=this.wrapLatLng(R),fe=R.lat-Z.lat,Ie=R.lng-Z.lng;if(0===fe&&0===Ie)return v;var rt=v.getSouthWest(),ri=v.getNorthEast();return new Nr(new kn(rt.lat-fe,rt.lng-Ie),new kn(ri.lat-fe,ri.lng-Ie))}},Xr=mt({},ts,{wrapLng:[-180,180],R:6371e3,distance:function(v,R){var Z=Math.PI/180,fe=v.lat*Z,Ie=R.lat*Z,rt=Math.sin((R.lat-v.lat)*Z/2),ri=Math.sin((R.lng-v.lng)*Z/2),Ai=rt*rt+Math.cos(fe)*Math.cos(Ie)*ri*ri,ln=2*Math.atan2(Math.sqrt(Ai),Math.sqrt(1-Ai));return this.R*ln}}),En={R:6378137,MAX_LATITUDE:85.0511287798,project:function(v){var R=Math.PI/180,Z=this.MAX_LATITUDE,fe=Math.max(Math.min(Z,v.lat),-Z),Ie=Math.sin(fe*R);return new nn(this.R*v.lng*R,this.R*Math.log((1+Ie)/(1-Ie))/2)},unproject:function(v){var R=180/Math.PI;return new kn((2*Math.atan(Math.exp(v.y/this.R))-Math.PI/2)*R,v.x*R/this.R)},bounds:(v=6378137*Math.PI,new mr([-v,-v],[v,v]))};function Os(v,R,Z,fe){if(Nt(v))return this._a=v[0],this._b=v[1],this._c=v[2],void(this._d=v[3]);this._a=v,this._b=R,this._c=Z,this._d=fe}function Cs(v,R,Z,fe){return new Os(v,R,Z,fe)}Os.prototype={transform:function(v,R){return this._transform(v.clone(),R)},_transform:function(v,R){return v.x=(R=R||1)*(this._a*v.x+this._b),v.y=R*(this._c*v.y+this._d),v},untransform:function(v,R){return new nn((v.x/(R=R||1)-this._b)/this._a,(v.y/R-this._d)/this._c)}};var Ts=mt({},Xr,{code:"EPSG:3857",projection:En,transformation:function(){var v=.5/(Math.PI*En.R);return Cs(v,.5,-v,.5)}()}),Zn=mt({},Ts,{code:"EPSG:900913"});function Un(v){return document.createElementNS("http://www.w3.org/2000/svg",v)}function cr(v,R){var fe,Ie,rt,ri,Ai,ln,Z="";for(fe=0,rt=v.length;fe<rt;fe++){for(Ie=0,ri=(Ai=v[fe]).length;Ie<ri;Ie++)Z+=(Ie?"L":"M")+(ln=Ai[Ie]).x+" "+ln.y;Z+=R?ot.svg?"z":"x":""}return Z||"M0 0"}var zn=document.documentElement.style,On="ActiveXObject"in window,Vr=On&&!document.addEventListener,jn="msLaunchUri"in navigator&&!("documentMode"in document),an=dt("webkit"),ur=dt("android"),xr=dt("android 2")||dt("android 3"),zs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Vs=ur&&dt("Google")&&zs<537&&!("AudioNode"in window),Fs=!!window.opera,Ds=!jn&&dt("chrome"),Es=dt("gecko")&&!an&&!Fs&&!On,wr=!Ds&&dt("safari"),us=dt("phantom"),Ks="OTransition"in zn,io=0===navigator.platform.indexOf("Win"),as=On&&"transition"in zn,Rs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xr,Ss="MozPerspective"in zn,Bs=!window.L_DISABLE_3D&&(as||Rs||Ss)&&!Ks&&!us,xa=typeof orientation<"u"||dt("mobile"),Gt=xa&&an,Ue=xa&&Rs,Je=!window.PointerEvent&&window.MSPointerEvent,At=!(!window.PointerEvent&&!Je),St="ontouchstart"in window||!!window.TouchEvent,si=!window.L_NO_TOUCH&&(St||At),wi=xa&&Fs,ki=xa&&Es,Mt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zi=function(){var v=!1;try{var R=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("testPassiveEventSupport",$e,R),window.removeEventListener("testPassiveEventSupport",$e,R)}catch{}return v}(),Sn=!!document.createElement("canvas").getContext,Rn=!(!document.createElementNS||!Un("svg").createSVGRect),Hi=!!Rn&&function(){var v=document.createElement("div");return v.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(v.firstChild&&v.firstChild.namespaceURI)}(),ar=!Rn&&function(){try{var v=document.createElement("div");v.innerHTML='<v:shape adj="1"/>';var R=v.firstChild;return R.style.behavior="url(#default#VML)",R&&"object"==typeof R.adj}catch{return!1}}();function dt(v){return navigator.userAgent.toLowerCase().indexOf(v)>=0}var ot={ie:On,ielt9:Vr,edge:jn,webkit:an,android:ur,android23:xr,androidStock:Vs,opera:Fs,chrome:Ds,gecko:Es,safari:wr,phantom:us,opera12:Ks,win:io,ie3d:as,webkit3d:Rs,gecko3d:Ss,any3d:Bs,mobile:xa,mobileWebkit:Gt,mobileWebkit3d:Ue,msPointer:Je,pointer:At,touch:si,touchNative:St,mobileOpera:wi,mobileGecko:ki,retina:Mt,passiveEvents:zi,canvas:Sn,svg:Rn,vml:ar,inlineSvg:Hi,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Xe=ot.msPointer?"MSPointerDown":"pointerdown",Qe=ot.msPointer?"MSPointerMove":"pointermove",Rt=ot.msPointer?"MSPointerUp":"pointerup",ui=ot.msPointer?"MSPointerCancel":"pointercancel",en={touchstart:Xe,touchmove:Qe,touchend:Rt,touchcancel:ui},ji={touchstart:function l(v,R){R.MSPOINTER_TYPE_TOUCH&&R.pointerType===R.MSPOINTER_TYPE_TOUCH&&Sa(R),ge(v,R)},touchmove:ge,touchend:ge,touchcancel:ge},bn={},bt=!1;function Ft(v,R,Z){return"touchstart"===R&&function Jt(){bt||(document.addEventListener(Xe,yt,!0),document.addEventListener(Qe,Wt,!0),document.addEventListener(Rt,We,!0),document.addEventListener(ui,We,!0),bt=!0)}(),ji[R]?(Z=ji[R].bind(this,Z),v.addEventListener(en[R],Z,!1),Z):(console.warn("wrong event specified:",R),$e)}function yt(v){bn[v.pointerId]=v}function Wt(v){bn[v.pointerId]&&(bn[v.pointerId]=v)}function We(v){delete bn[v.pointerId]}function ge(v,R){if(R.pointerType!==(R.MSPOINTER_TYPE_MOUSE||"mouse")){for(var Z in R.touches=[],bn)R.touches.push(bn[Z]);R.changedTouches=[R],v(R)}}var p=200;var Di,Qi,cn,hs,vs,C=je(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),M=je(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),B="webkitTransition"===M||"OTransition"===M?M+"End":"transitionend";function H(v){return"string"==typeof v?document.getElementById(v):v}function K(v,R){var Z=v.style[R]||v.currentStyle&&v.currentStyle[R];if((!Z||"auto"===Z)&&document.defaultView){var fe=document.defaultView.getComputedStyle(v,null);Z=fe?fe[R]:null}return"auto"===Z?null:Z}function J(v,R,Z){var fe=document.createElement(v);return fe.className=R||"",Z&&Z.appendChild(fe),fe}function ne(v){var R=v.parentNode;R&&R.removeChild(v)}function de(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function xe(v){var R=v.parentNode;R&&R.lastChild!==v&&R.appendChild(v)}function Se(v){var R=v.parentNode;R&&R.firstChild!==v&&R.insertBefore(v,R.firstChild)}function Pe(v,R){if(void 0!==v.classList)return v.classList.contains(R);var Z=le(v);return Z.length>0&&new RegExp("(^|\\s)"+R+"(\\s|$)").test(Z)}function Te(v,R){if(void 0!==v.classList)for(var Z=_t(R),fe=0,Ie=Z.length;fe<Ie;fe++)v.classList.add(Z[fe]);else if(!Pe(v,R)){var rt=le(v);U(v,(rt?rt+" ":"")+R)}}function Ne(v,R){void 0!==v.classList?v.classList.remove(R):U(v,nt((" "+le(v)+" ").replace(" "+R+" "," ")))}function U(v,R){void 0===v.className.baseVal?v.className=R:v.className.baseVal=R}function le(v){return v.correspondingElement&&(v=v.correspondingElement),void 0===v.className.baseVal?v.className:v.className.baseVal}function we(v,R){"opacity"in v.style?v.style.opacity=R:"filter"in v.style&&function Le(v,R){var Z=!1,fe="DXImageTransform.Microsoft.Alpha";try{Z=v.filters.item(fe)}catch{if(1===R)return}R=Math.round(100*R),Z?(Z.Enabled=100!==R,Z.Opacity=R):v.style.filter+=" progid:"+fe+"(opacity="+R+")"}(v,R)}function je(v){for(var R=document.documentElement.style,Z=0;Z<v.length;Z++)if(v[Z]in R)return v[Z];return!1}function lt(v,R,Z){var fe=R||new nn(0,0);v.style[C]=(ot.ie3d?"translate("+fe.x+"px,"+fe.y+"px)":"translate3d("+fe.x+"px,"+fe.y+"px,0)")+(Z?" scale("+Z+")":"")}function jt(v,R){v._leaflet_pos=R,ot.any3d?lt(v,R):(v.style.left=R.x+"px",v.style.top=R.y+"px")}function qt(v){return v._leaflet_pos||new nn(0,0)}if("onselectstart"in document)Di=function(){ls(window,"selectstart",Sa)},Qi=function(){ss(window,"selectstart",Sa)};else{var Qn=je(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Di=function(){if(Qn){var v=document.documentElement.style;cn=v[Qn],v[Qn]="none"}},Qi=function(){Qn&&(document.documentElement.style[Qn]=cn,cn=void 0)}}function gr(){ls(window,"dragstart",Sa)}function Zr(){ss(window,"dragstart",Sa)}function _s(v){for(;-1===v.tabIndex;)v=v.parentNode;v.style&&(Js(),hs=v,vs=v.style.outlineStyle,v.style.outlineStyle="none",ls(window,"keydown",Js))}function Js(){hs&&(hs.style.outlineStyle=vs,hs=void 0,vs=void 0,ss(window,"keydown",Js))}function oa(v){do{v=v.parentNode}while(!(v.offsetWidth&&v.offsetHeight||v===document.body));return v}function Ea(v){var R=v.getBoundingClientRect();return{x:R.width/v.offsetWidth||1,y:R.height/v.offsetHeight||1,boundingClientRect:R}}var Ws={__proto__:null,TRANSFORM:C,TRANSITION:M,TRANSITION_END:B,get:H,getStyle:K,create:J,remove:ne,empty:de,toFront:xe,toBack:Se,hasClass:Pe,addClass:Te,removeClass:Ne,setClass:U,getClass:le,setOpacity:we,testProp:je,setTransform:lt,setPosition:jt,getPosition:qt,get disableTextSelection(){return Di},get enableTextSelection(){return Qi},disableImageDrag:gr,enableImageDrag:Zr,preventOutline:_s,restoreOutline:Js,getSizedParentNode:oa,getScale:Ea};function ls(v,R,Z,fe){if(R&&"object"==typeof R)for(var Ie in R)Bc(v,Ie,R[Ie],Z);else for(var rt=0,ri=(R=_t(R)).length;rt<ri;rt++)Bc(v,R[rt],Z,fe);return this}var ka="_leaflet_events";function ss(v,R,Z,fe){if(1===arguments.length)Ta(v),delete v[ka];else if(R&&"object"==typeof R)for(var Ie in R)za(v,Ie,R[Ie],Z);else if(R=_t(R),2===arguments.length)Ta(v,function(Ai){return-1!==Pi(R,Ai)});else for(var rt=0,ri=R.length;rt<ri;rt++)za(v,R[rt],Z,fe);return this}function Ta(v,R){for(var Z in v[ka]){var fe=Z.split(/\d/)[0];(!R||R(fe))&&za(v,fe,null,null,Z)}}var dh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bc(v,R,Z,fe){var Ie=R+He(Z)+(fe?"_"+He(fe):"");if(v[ka]&&v[ka][Ie])return this;var rt=function(Ai){return Z.call(fe||v,Ai||window.event)},ri=rt;!ot.touchNative&&ot.pointer&&0===R.indexOf("touch")?rt=Ft(v,R,rt):ot.touch&&"dblclick"===R?rt=function y(v,R){v.addEventListener("dblclick",R);var fe,Z=0;function Ie(rt){if(1===rt.detail){if("mouse"!==rt.pointerType&&(!rt.sourceCapabilities||rt.sourceCapabilities.firesTouchEvents)){var ri=Va(rt);if(!ri.some(function(ln){return ln instanceof HTMLLabelElement&&ln.attributes.for})||ri.some(function(ln){return ln instanceof HTMLInputElement||ln instanceof HTMLSelectElement})){var Ai=Date.now();Ai-Z<=p?2==++fe&&R(function u(v){var Z,fe,R={};for(fe in v)R[fe]=(Z=v[fe])&&Z.bind?Z.bind(v):Z;return v=R,R.type="dblclick",R.detail=2,R.isTrusted=!1,R._simulated=!0,R}(rt)):fe=1,Z=Ai}}}else fe=rt.detail}return v.addEventListener("click",Ie),{dblclick:R,simDblclick:Ie}}(v,rt):"addEventListener"in v?"touchstart"===R||"touchmove"===R||"wheel"===R||"mousewheel"===R?v.addEventListener(dh[R]||R,rt,!!ot.passiveEvents&&{passive:!1}):"mouseenter"===R||"mouseleave"===R?v.addEventListener(dh[R],rt=function(Ai){Ai=Ai||window.event,hf(v,Ai)&&ri(Ai)},!1):v.addEventListener(R,ri,!1):v.attachEvent("on"+R,rt),v[ka]=v[ka]||{},v[ka][Ie]=rt}function za(v,R,Z,fe,Ie){Ie=Ie||R+He(Z)+(fe?"_"+He(fe):"");var rt=v[ka]&&v[ka][Ie];if(!rt)return this;!ot.touchNative&&ot.pointer&&0===R.indexOf("touch")?function ke(v,R,Z){en[R]?v.removeEventListener(en[R],Z,!1):console.warn("wrong event specified:",R)}(v,R,rt):ot.touch&&"dblclick"===R?function w(v,R){v.removeEventListener("dblclick",R.dblclick),v.removeEventListener("click",R.simDblclick)}(v,rt):"removeEventListener"in v?v.removeEventListener(dh[R]||R,rt,!1):v.detachEvent("on"+R,rt),v[ka][Ie]=null}function fc(v){return v.stopPropagation?v.stopPropagation():v.originalEvent?v.originalEvent._stopped=!0:v.cancelBubble=!0,this}function rd(v){return Bc(v,"wheel",fc),this}function Xl(v){return ls(v,"mousedown touchstart dblclick contextmenu",fc),v._leaflet_disable_click=!0,this}function Sa(v){return v.preventDefault?v.preventDefault():v.returnValue=!1,this}function vl(v){return Sa(v),fc(v),this}function Va(v){if(v.composedPath)return v.composedPath();for(var R=[],Z=v.target;Z;)R.push(Z),Z=Z.parentNode;return R}function ba(v,R){if(!R)return new nn(v.clientX,v.clientY);var Z=Ea(R),fe=Z.boundingClientRect;return new nn((v.clientX-fe.left)/Z.x-R.clientLeft,(v.clientY-fe.top)/Z.y-R.clientTop)}var Nc=ot.linux&&ot.chrome?window.devicePixelRatio:ot.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Rh(v){return ot.edge?v.wheelDeltaY/2:v.deltaY&&0===v.deltaMode?-v.deltaY/Nc:v.deltaY&&1===v.deltaMode?20*-v.deltaY:v.deltaY&&2===v.deltaMode?60*-v.deltaY:v.deltaX||v.deltaZ?0:v.wheelDelta?(v.wheelDeltaY||v.wheelDelta)/2:v.detail&&Math.abs(v.detail)<32765?20*-v.detail:v.detail?v.detail/-32765*60:0}function hf(v,R){var Z=R.relatedTarget;if(!Z)return!0;try{for(;Z&&Z!==v;)Z=Z.parentNode}catch{return!1}return Z!==v}var Ff={__proto__:null,on:ls,off:ss,stopPropagation:fc,disableScrollPropagation:rd,disableClickPropagation:Xl,preventDefault:Sa,stop:vl,getPropagationPath:Va,getMousePosition:ba,getWheelDelta:Rh,isExternalTarget:hf,addListener:ls,removeListener:ss},Lh=qi.extend({run:function(v,R,Z,fe){this.stop(),this._el=v,this._inProgress=!0,this._duration=Z||.25,this._easeOutPower=1/Math.max(fe||.5,.2),this._startPos=qt(v),this._offset=R.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=hi(this._animate,this),this._step()},_step:function(v){var R=+new Date-this._startTime,Z=1e3*this._duration;R<Z?this._runFrame(this._easeOut(R/Z),v):(this._runFrame(1),this._complete())},_runFrame:function(v,R){var Z=this._startPos.add(this._offset.multiplyBy(v));R&&Z._round(),jt(this._el,Z),this.fire("step")},_complete:function(){Dt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(v){return 1-Math.pow(1-v,this._easeOutPower)}}),Ys=qi.extend({options:{crs:Ts,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(v,R){R=gt(this,R),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(v),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),R.maxBounds&&this.setMaxBounds(R.maxBounds),void 0!==R.zoom&&(this._zoom=this._limitZoom(R.zoom)),R.center&&void 0!==R.zoom&&this.setView(Jn(R.center),R.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=M&&ot.any3d&&!ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ls(this._proxy,B,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(v,R,Z){return R=void 0===R?this._zoom:this._limitZoom(R),v=this._limitCenter(Jn(v),R,this.options.maxBounds),Z=Z||{},this._stop(),this._loaded&&!Z.reset&&!0!==Z&&(void 0!==Z.animate&&(Z.zoom=mt({animate:Z.animate},Z.zoom),Z.pan=mt({animate:Z.animate,duration:Z.duration},Z.pan)),this._zoom!==R?this._tryAnimatedZoom&&this._tryAnimatedZoom(v,R,Z.zoom):this._tryAnimatedPan(v,Z.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(v,R,Z.pan&&Z.pan.noMoveStart),this)},setZoom:function(v,R){return this._loaded?this.setView(this.getCenter(),v,{zoom:R}):(this._zoom=v,this)},zoomIn:function(v,R){return this.setZoom(this._zoom+(v=v||(ot.any3d?this.options.zoomDelta:1)),R)},zoomOut:function(v,R){return this.setZoom(this._zoom-(v=v||(ot.any3d?this.options.zoomDelta:1)),R)},setZoomAround:function(v,R,Z){var fe=this.getZoomScale(R),Ie=this.getSize().divideBy(2),ri=(v instanceof nn?v:this.latLngToContainerPoint(v)).subtract(Ie).multiplyBy(1-1/fe),Ai=this.containerPointToLatLng(Ie.add(ri));return this.setView(Ai,R,{zoom:Z})},_getBoundsCenterZoom:function(v,R){R=R||{},v=v.getBounds?v.getBounds():Si(v);var Z=Fn(R.paddingTopLeft||R.padding||[0,0]),fe=Fn(R.paddingBottomRight||R.padding||[0,0]),Ie=this.getBoundsZoom(v,!1,Z.add(fe));if((Ie="number"==typeof R.maxZoom?Math.min(R.maxZoom,Ie):Ie)===1/0)return{center:v.getCenter(),zoom:Ie};var rt=fe.subtract(Z).divideBy(2),ri=this.project(v.getSouthWest(),Ie),Ai=this.project(v.getNorthEast(),Ie);return{center:this.unproject(ri.add(Ai).divideBy(2).add(rt),Ie),zoom:Ie}},fitBounds:function(v,R){if(!(v=Si(v)).isValid())throw new Error("Bounds are not valid.");var Z=this._getBoundsCenterZoom(v,R);return this.setView(Z.center,Z.zoom,R)},fitWorld:function(v){return this.fitBounds([[-90,-180],[90,180]],v)},panTo:function(v,R){return this.setView(v,this._zoom,{pan:R})},panBy:function(v,R){if(R=R||{},!(v=Fn(v).round()).x&&!v.y)return this.fire("moveend");if(!0!==R.animate&&!this.getSize().contains(v))return this._resetView(this.unproject(this.project(this.getCenter()).add(v)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Lh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),R.noMoveStart||this.fire("movestart"),!1!==R.animate){Te(this._mapPane,"leaflet-pan-anim");var Z=this._getMapPanePos().subtract(v).round();this._panAnim.run(this._mapPane,Z,R.duration||.25,R.easeLinearity)}else this._rawPanBy(v),this.fire("move").fire("moveend");return this},flyTo:function(v,R,Z){if(!1===(Z=Z||{}).animate||!ot.any3d)return this.setView(v,R,Z);this._stop();var fe=this.project(this.getCenter()),Ie=this.project(v),rt=this.getSize(),ri=this._zoom;v=Jn(v),R=void 0===R?ri:R;var Ai=Math.max(rt.x,rt.y),ln=Ai*this.getZoomScale(ri,R),qn=Ie.distanceTo(fe)||1,Dr=1.42,Qr=Dr*Dr;function Ps(ze){var yn=(ln*ln-Ai*Ai+(ze?-1:1)*Qr*Qr*qn*qn)/(2*(ze?ln:Ai)*Qr*qn),Tr=Math.sqrt(yn*yn+1)-yn;return Tr<1e-9?-18:Math.log(Tr)}function $s(ze){return(Math.exp(ze)-Math.exp(-ze))/2}function uo(ze){return(Math.exp(ze)+Math.exp(-ze))/2}var ho=Ps(0);function Vc(ze){return Ai*(uo(ho)*function vo(ze){return $s(ze)/uo(ze)}(ho+Dr*ze)-$s(ho))/Qr}var Cd=Date.now(),_h=(Ps(1)-ho)/Dr,Uc=Z.duration?1e3*Z.duration:1e3*_h*.8;return this._moveStart(!0,Z.noMoveStart),function sd(){var ze=(Date.now()-Cd)/Uc,ae=function Yo(ze){return 1-Math.pow(1-ze,1.5)}(ze)*_h;ze<=1?(this._flyToFrame=hi(sd,this),this._move(this.unproject(fe.add(Ie.subtract(fe).multiplyBy(Vc(ae)/qn)),ri),this.getScaleZoom(Ai/function Cl(ze){return Ai*(uo(ho)/uo(ho+Dr*ze))}(ae),ri),{flyTo:!0})):this._move(v,R)._moveEnd(!0)}.call(this),this},flyToBounds:function(v,R){var Z=this._getBoundsCenterZoom(v,R);return this.flyTo(Z.center,Z.zoom,R)},setMaxBounds:function(v){return v=Si(v),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),v.isValid()?(this.options.maxBounds=v,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(v){var R=this.options.minZoom;return this.options.minZoom=v,this._loaded&&R!==v&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(v):this},setMaxZoom:function(v){var R=this.options.maxZoom;return this.options.maxZoom=v,this._loaded&&R!==v&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(v):this},panInsideBounds:function(v,R){this._enforcingBounds=!0;var Z=this.getCenter(),fe=this._limitCenter(Z,this._zoom,Si(v));return Z.equals(fe)||this.panTo(fe,R),this._enforcingBounds=!1,this},panInside:function(v,R){var Z=Fn((R=R||{}).paddingTopLeft||R.padding||[0,0]),fe=Fn(R.paddingBottomRight||R.padding||[0,0]),Ie=this.project(this.getCenter()),rt=this.project(v),ri=this.getPixelBounds(),Ai=hr([ri.min.add(Z),ri.max.subtract(fe)]),ln=Ai.getSize();if(!Ai.contains(rt)){this._enforcingBounds=!0;var qn=rt.subtract(Ai.getCenter()),Dr=Ai.extend(rt).getSize().subtract(ln);Ie.x+=qn.x<0?-Dr.x:Dr.x,Ie.y+=qn.y<0?-Dr.y:Dr.y,this.panTo(this.unproject(Ie),R),this._enforcingBounds=!1}return this},invalidateSize:function(v){if(!this._loaded)return this;v=mt({animate:!1,pan:!0},!0===v?{animate:!0}:v);var R=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var Z=this.getSize(),fe=R.divideBy(2).round(),Ie=Z.divideBy(2).round(),rt=fe.subtract(Ie);return rt.x||rt.y?(v.animate&&v.pan?this.panBy(rt):(v.pan&&this._rawPanBy(rt),this.fire("move"),v.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:R,newSize:Z})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(v){if(v=this._locateOptions=mt({timeout:1e4,watch:!1},v),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var R=n(this._handleGeolocationResponse,this),Z=n(this._handleGeolocationError,this);return v.watch?this._locationWatchId=navigator.geolocation.watchPosition(R,Z,v):navigator.geolocation.getCurrentPosition(R,Z,v),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(v){if(this._container._leaflet_id){var R=v.code,Z=v.message||(1===R?"permission denied":2===R?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:R,message:"Geolocation error: "+Z+"."})}},_handleGeolocationResponse:function(v){if(this._container._leaflet_id){var fe=new kn(v.coords.latitude,v.coords.longitude),Ie=fe.toBounds(2*v.coords.accuracy),rt=this._locateOptions;if(rt.setView){var ri=this.getBoundsZoom(Ie);this.setView(fe,rt.maxZoom?Math.min(ri,rt.maxZoom):ri)}var Ai={latlng:fe,bounds:Ie,timestamp:v.timestamp};for(var ln in v.coords)"number"==typeof v.coords[ln]&&(Ai[ln]=v.coords[ln]);this.fire("locationfound",Ai)}},addHandler:function(v,R){if(!R)return this;var Z=this[v]=new R(this);return this._handlers.push(Z),this.options[v]&&Z.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var v;for(v in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Dt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[v].remove();for(v in this._panes)ne(this._panes[v]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(v,R){var fe=J("div","leaflet-pane"+(v?" leaflet-"+v.replace("Pane","")+"-pane":""),R||this._mapPane);return v&&(this._panes[v]=fe),fe},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var v=this.getPixelBounds();return new Nr(this.unproject(v.getBottomLeft()),this.unproject(v.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(v,R,Z){v=Si(v),Z=Fn(Z||[0,0]);var fe=this.getZoom()||0,Ie=this.getMinZoom(),rt=this.getMaxZoom(),ri=v.getNorthWest(),Ai=v.getSouthEast(),ln=this.getSize().subtract(Z),qn=hr(this.project(Ai,fe),this.project(ri,fe)).getSize(),Dr=ot.any3d?this.options.zoomSnap:1,Qr=ln.x/qn.x,Ps=ln.y/qn.y,$s=R?Math.max(Qr,Ps):Math.min(Qr,Ps);return fe=this.getScaleZoom($s,fe),Dr&&(fe=Math.round(fe/(Dr/100))*(Dr/100),fe=R?Math.ceil(fe/Dr)*Dr:Math.floor(fe/Dr)*Dr),Math.max(Ie,Math.min(rt,fe))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new nn(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(v,R){var Z=this._getTopLeftPoint(v,R);return new mr(Z,Z.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(v){return this.options.crs.getProjectedBounds(void 0===v?this.getZoom():v)},getPane:function(v){return"string"==typeof v?this._panes[v]:v},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(v,R){var Z=this.options.crs;return R=void 0===R?this._zoom:R,Z.scale(v)/Z.scale(R)},getScaleZoom:function(v,R){var Z=this.options.crs,fe=Z.zoom(v*Z.scale(R=void 0===R?this._zoom:R));return isNaN(fe)?1/0:fe},project:function(v,R){return R=void 0===R?this._zoom:R,this.options.crs.latLngToPoint(Jn(v),R)},unproject:function(v,R){return R=void 0===R?this._zoom:R,this.options.crs.pointToLatLng(Fn(v),R)},layerPointToLatLng:function(v){var R=Fn(v).add(this.getPixelOrigin());return this.unproject(R)},latLngToLayerPoint:function(v){return this.project(Jn(v))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(v){return this.options.crs.wrapLatLng(Jn(v))},wrapLatLngBounds:function(v){return this.options.crs.wrapLatLngBounds(Si(v))},distance:function(v,R){return this.options.crs.distance(Jn(v),Jn(R))},containerPointToLayerPoint:function(v){return Fn(v).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(v){return Fn(v).add(this._getMapPanePos())},containerPointToLatLng:function(v){var R=this.containerPointToLayerPoint(Fn(v));return this.layerPointToLatLng(R)},latLngToContainerPoint:function(v){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Jn(v)))},mouseEventToContainerPoint:function(v){return ba(v,this._container)},mouseEventToLayerPoint:function(v){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(v))},mouseEventToLatLng:function(v){return this.layerPointToLatLng(this.mouseEventToLayerPoint(v))},_initContainer:function(v){var R=this._container=H(v);if(!R)throw new Error("Map container not found.");if(R._leaflet_id)throw new Error("Map container is already initialized.");ls(R,"scroll",this._onScroll,this),this._containerId=He(R)},_initLayout:function(){var v=this._container;this._fadeAnimated=this.options.fadeAnimation&&ot.any3d,Te(v,"leaflet-container"+(ot.touch?" leaflet-touch":"")+(ot.retina?" leaflet-retina":"")+(ot.ielt9?" leaflet-oldie":"")+(ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var R=K(v,"position");"absolute"!==R&&"relative"!==R&&"fixed"!==R&&"sticky"!==R&&(v.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var v=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),jt(this._mapPane,new nn(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Te(v.markerPane,"leaflet-zoom-hide"),Te(v.shadowPane,"leaflet-zoom-hide"))},_resetView:function(v,R,Z){jt(this._mapPane,new nn(0,0));var fe=!this._loaded;this._loaded=!0,R=this._limitZoom(R),this.fire("viewprereset");var Ie=this._zoom!==R;this._moveStart(Ie,Z)._move(v,R)._moveEnd(Ie),this.fire("viewreset"),fe&&this.fire("load")},_moveStart:function(v,R){return v&&this.fire("zoomstart"),R||this.fire("movestart"),this},_move:function(v,R,Z,fe){void 0===R&&(R=this._zoom);var Ie=this._zoom!==R;return this._zoom=R,this._lastCenter=v,this._pixelOrigin=this._getNewPixelOrigin(v),fe?Z&&Z.pinch&&this.fire("zoom",Z):((Ie||Z&&Z.pinch)&&this.fire("zoom",Z),this.fire("move",Z)),this},_moveEnd:function(v){return v&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Dt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(v){jt(this._mapPane,this._getMapPanePos().subtract(v))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(v){this._targets={},this._targets[He(this._container)]=this;var R=v?ss:ls;R(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&R(window,"resize",this._onResize,this),ot.any3d&&this.options.transform3DLimit&&(v?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Dt(this._resizeRequest),this._resizeRequest=hi(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var v=this._getMapPanePos();Math.max(Math.abs(v.x),Math.abs(v.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(v,R){for(var fe,Z=[],Ie="mouseout"===R||"mouseover"===R,rt=v.target||v.srcElement,ri=!1;rt;){if((fe=this._targets[He(rt)])&&("click"===R||"preclick"===R)&&this._draggableMoved(fe)){ri=!0;break}if(fe&&fe.listens(R,!0)&&(Ie&&!hf(rt,v)||(Z.push(fe),Ie))||rt===this._container)break;rt=rt.parentNode}return!Z.length&&!ri&&!Ie&&this.listens(R,!0)&&(Z=[this]),Z},_isClickDisabled:function(v){for(;v&&v!==this._container;){if(v._leaflet_disable_click)return!0;v=v.parentNode}},_handleDOMEvent:function(v){var R=v.target||v.srcElement;if(!(!this._loaded||R._leaflet_disable_events||"click"===v.type&&this._isClickDisabled(R))){var Z=v.type;"mousedown"===Z&&_s(R),this._fireDOMEvent(v,Z)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(v,R,Z){if("click"===v.type){var fe=mt({},v);fe.type="preclick",this._fireDOMEvent(fe,fe.type,Z)}var Ie=this._findEventTargets(v,R);if(Z){for(var rt=[],ri=0;ri<Z.length;ri++)Z[ri].listens(R,!0)&&rt.push(Z[ri]);Ie=rt.concat(Ie)}if(Ie.length){"contextmenu"===R&&Sa(v);var Ai=Ie[0],ln={originalEvent:v};if("keypress"!==v.type&&"keydown"!==v.type&&"keyup"!==v.type){var qn=Ai.getLatLng&&(!Ai._radius||Ai._radius<=10);ln.containerPoint=qn?this.latLngToContainerPoint(Ai.getLatLng()):this.mouseEventToContainerPoint(v),ln.layerPoint=this.containerPointToLayerPoint(ln.containerPoint),ln.latlng=qn?Ai.getLatLng():this.layerPointToLatLng(ln.layerPoint)}for(ri=0;ri<Ie.length;ri++)if(Ie[ri].fire(R,ln,!0),ln.originalEvent._stopped||!1===Ie[ri].options.bubblingMouseEvents&&-1!==Pi(this._mouseEvents,R))return}},_draggableMoved:function(v){return(v=v.dragging&&v.dragging.enabled()?v:this).dragging&&v.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var v=0,R=this._handlers.length;v<R;v++)this._handlers[v].disable()},whenReady:function(v,R){return this._loaded?v.call(R||this,{target:this}):this.on("load",v,R),this},_getMapPanePos:function(){return qt(this._mapPane)||new nn(0,0)},_moved:function(){var v=this._getMapPanePos();return v&&!v.equals([0,0])},_getTopLeftPoint:function(v,R){return(v&&void 0!==R?this._getNewPixelOrigin(v,R):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(v,R){var Z=this.getSize()._divideBy(2);return this.project(v,R)._subtract(Z)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(v,R,Z){var fe=this._getNewPixelOrigin(Z,R);return this.project(v,R)._subtract(fe)},_latLngBoundsToNewLayerBounds:function(v,R,Z){var fe=this._getNewPixelOrigin(Z,R);return hr([this.project(v.getSouthWest(),R)._subtract(fe),this.project(v.getNorthWest(),R)._subtract(fe),this.project(v.getSouthEast(),R)._subtract(fe),this.project(v.getNorthEast(),R)._subtract(fe)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(v){return this.latLngToLayerPoint(v).subtract(this._getCenterLayerPoint())},_limitCenter:function(v,R,Z){if(!Z)return v;var fe=this.project(v,R),Ie=this.getSize().divideBy(2),rt=new mr(fe.subtract(Ie),fe.add(Ie)),ri=this._getBoundsOffset(rt,Z,R);return Math.abs(ri.x)<=1&&Math.abs(ri.y)<=1?v:this.unproject(fe.add(ri),R)},_limitOffset:function(v,R){if(!R)return v;var Z=this.getPixelBounds(),fe=new mr(Z.min.add(v),Z.max.add(v));return v.add(this._getBoundsOffset(fe,R))},_getBoundsOffset:function(v,R,Z){var fe=hr(this.project(R.getNorthEast(),Z),this.project(R.getSouthWest(),Z)),Ie=fe.min.subtract(v.min),rt=fe.max.subtract(v.max);return new nn(this._rebound(Ie.x,-rt.x),this._rebound(Ie.y,-rt.y))},_rebound:function(v,R){return v+R>0?Math.round(v-R)/2:Math.max(0,Math.ceil(v))-Math.max(0,Math.floor(R))},_limitZoom:function(v){var R=this.getMinZoom(),Z=this.getMaxZoom(),fe=ot.any3d?this.options.zoomSnap:1;return fe&&(v=Math.round(v/fe)*fe),Math.max(R,Math.min(Z,v))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ne(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(v,R){var Z=this._getCenterOffset(v)._trunc();return!(!0!==(R&&R.animate)&&!this.getSize().contains(Z)||(this.panBy(Z,R),0))},_createAnimProxy:function(){var v=this._proxy=J("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(v),this.on("zoomanim",function(R){var Z=C,fe=this._proxy.style[Z];lt(this._proxy,this.project(R.center,R.zoom),this.getZoomScale(R.zoom,1)),fe===this._proxy.style[Z]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var v=this.getCenter(),R=this.getZoom();lt(this._proxy,this.project(v,R),this.getZoomScale(R,1))},_catchTransitionEnd:function(v){this._animatingZoom&&v.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(v,R,Z){if(this._animatingZoom)return!0;if(Z=Z||{},!this._zoomAnimated||!1===Z.animate||this._nothingToAnimate()||Math.abs(R-this._zoom)>this.options.zoomAnimationThreshold)return!1;var fe=this.getZoomScale(R),Ie=this._getCenterOffset(v)._divideBy(1-1/fe);return!(!0!==Z.animate&&!this.getSize().contains(Ie)||(hi(function(){this._moveStart(!0,Z.noMoveStart||!1)._animateZoom(v,R,!0)},this),0))},_animateZoom:function(v,R,Z,fe){this._mapPane&&(Z&&(this._animatingZoom=!0,this._animateToCenter=v,this._animateToZoom=R,Te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:v,zoom:R,noUpdate:fe}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ne(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Ko=Ri.extend({options:{position:"topright"},initialize:function(v){gt(this,v)},getPosition:function(){return this.options.position},setPosition:function(v){var R=this._map;return R&&R.removeControl(this),this.options.position=v,R&&R.addControl(this),this},getContainer:function(){return this._container},addTo:function(v){this.remove(),this._map=v;var R=this._container=this.onAdd(v),Z=this.getPosition(),fe=v._controlCorners[Z];return Te(R,"leaflet-control"),-1!==Z.indexOf("bottom")?fe.insertBefore(R,fe.firstChild):fe.appendChild(R),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(v){this._map&&v&&v.screenX>0&&v.screenY>0&&this._map.getContainer().focus()}}),wa=function(v){return new Ko(v)};Ys.include({addControl:function(v){return v.addTo(this),this},removeControl:function(v){return v.remove(),this},_initControlPos:function(){var v=this._controlCorners={},R="leaflet-",Z=this._controlContainer=J("div",R+"control-container",this._container);function fe(Ie,rt){v[Ie+rt]=J("div",R+Ie+" "+R+rt,Z)}fe("top","left"),fe("top","right"),fe("bottom","left"),fe("bottom","right")},_clearControlPos:function(){for(var v in this._controlCorners)ne(this._controlCorners[v]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ph=Ko.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(v,R,Z,fe){return Z<fe?-1:fe<Z?1:0}},initialize:function(v,R,Z){for(var fe in gt(this,Z),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,v)this._addLayer(v[fe],fe);for(fe in R)this._addLayer(R[fe],fe,!0)},onAdd:function(v){this._initLayout(),this._update(),this._map=v,v.on("zoomend",this._checkDisabledLayers,this);for(var R=0;R<this._layers.length;R++)this._layers[R].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(v){return Ko.prototype.addTo.call(this,v),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(v,R){return this._addLayer(v,R),this._map?this._update():this},addOverlay:function(v,R){return this._addLayer(v,R,!0),this._map?this._update():this},removeLayer:function(v){v.off("add remove",this._onLayerChange,this);var R=this._getLayer(He(v));return R&&this._layers.splice(this._layers.indexOf(R),1),this._map?this._update():this},expand:function(){Te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var v=this._map.getSize().y-(this._container.offsetTop+50);return v<this._section.clientHeight?(Te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=v+"px"):Ne(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ne(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var v="leaflet-control-layers",R=this._container=J("div",v),Z=this.options.collapsed;R.setAttribute("aria-haspopup",!0),Xl(R),rd(R);var fe=this._section=J("section",v+"-list");Z&&(this._map.on("click",this.collapse,this),ls(R,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Ie=this._layersLink=J("a",v+"-toggle",R);Ie.href="#",Ie.title="Layers",Ie.setAttribute("role","button"),ls(Ie,{keydown:function(rt){13===rt.keyCode&&this._expandSafely()},click:function(rt){Sa(rt),this._expandSafely()}},this),Z||this.expand(),this._baseLayersList=J("div",v+"-base",fe),this._separator=J("div",v+"-separator",fe),this._overlaysList=J("div",v+"-overlays",fe),R.appendChild(fe)},_getLayer:function(v){for(var R=0;R<this._layers.length;R++)if(this._layers[R]&&He(this._layers[R].layer)===v)return this._layers[R]},_addLayer:function(v,R,Z){this._map&&v.on("add remove",this._onLayerChange,this),this._layers.push({layer:v,name:R,overlay:Z}),this.options.sortLayers&&this._layers.sort(n(function(fe,Ie){return this.options.sortFunction(fe.layer,Ie.layer,fe.name,Ie.name)},this)),this.options.autoZIndex&&v.setZIndex&&(this._lastZIndex++,v.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;de(this._baseLayersList),de(this._overlaysList),this._layerControlInputs=[];var v,R,Z,fe,Ie=0;for(Z=0;Z<this._layers.length;Z++)this._addItem(fe=this._layers[Z]),R=R||fe.overlay,v=v||!fe.overlay,Ie+=fe.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(v=v&&Ie>1)?"":"none"),this._separator.style.display=R&&v?"":"none",this},_onLayerChange:function(v){this._handlingClick||this._update();var R=this._getLayer(He(v.target)),Z=R.overlay?"add"===v.type?"overlayadd":"overlayremove":"add"===v.type?"baselayerchange":null;Z&&this._map.fire(Z,R)},_createRadioElement:function(v,R){var Z='<input type="radio" class="leaflet-control-layers-selector" name="'+v+'"'+(R?' checked="checked"':"")+"/>",fe=document.createElement("div");return fe.innerHTML=Z,fe.firstChild},_addItem:function(v){var fe,R=document.createElement("label"),Z=this._map.hasLayer(v.layer);v.overlay?((fe=document.createElement("input")).type="checkbox",fe.className="leaflet-control-layers-selector",fe.defaultChecked=Z):fe=this._createRadioElement("leaflet-base-layers_"+He(this),Z),this._layerControlInputs.push(fe),fe.layerId=He(v.layer),ls(fe,"click",this._onInputClick,this);var Ie=document.createElement("span");Ie.innerHTML=" "+v.name;var rt=document.createElement("span");return R.appendChild(rt),rt.appendChild(fe),rt.appendChild(Ie),(v.overlay?this._overlaysList:this._baseLayersList).appendChild(R),this._checkDisabledLayers(),R},_onInputClick:function(){if(!this._preventClick){var R,Z,v=this._layerControlInputs,fe=[],Ie=[];this._handlingClick=!0;for(var rt=v.length-1;rt>=0;rt--)Z=this._getLayer((R=v[rt]).layerId).layer,R.checked?fe.push(Z):R.checked||Ie.push(Z);for(rt=0;rt<Ie.length;rt++)this._map.hasLayer(Ie[rt])&&this._map.removeLayer(Ie[rt]);for(rt=0;rt<fe.length;rt++)this._map.hasLayer(fe[rt])||this._map.addLayer(fe[rt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var R,Z,v=this._layerControlInputs,fe=this._map.getZoom(),Ie=v.length-1;Ie>=0;Ie--)Z=this._getLayer((R=v[Ie]).layerId).layer,R.disabled=void 0!==Z.options.minZoom&&fe<Z.options.minZoom||void 0!==Z.options.maxZoom&&fe>Z.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var v=this._section;this._preventClick=!0,ls(v,"click",Sa),this.expand();var R=this;setTimeout(function(){ss(v,"click",Sa),R._preventClick=!1})}}),Wu=Ko.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(v){var R="leaflet-control-zoom",Z=J("div",R+" leaflet-bar"),fe=this.options;return this._zoomInButton=this._createButton(fe.zoomInText,fe.zoomInTitle,R+"-in",Z,this._zoomIn),this._zoomOutButton=this._createButton(fe.zoomOutText,fe.zoomOutTitle,R+"-out",Z,this._zoomOut),this._updateDisabled(),v.on("zoomend zoomlevelschange",this._updateDisabled,this),Z},onRemove:function(v){v.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(v){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(v.shiftKey?3:1))},_zoomOut:function(v){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(v.shiftKey?3:1))},_createButton:function(v,R,Z,fe,Ie){var rt=J("a",Z,fe);return rt.innerHTML=v,rt.href="#",rt.title=R,rt.setAttribute("role","button"),rt.setAttribute("aria-label",R),Xl(rt),ls(rt,"click",vl),ls(rt,"click",Ie,this),ls(rt,"click",this._refocusOnMap,this),rt},_updateDisabled:function(){var v=this._map,R="leaflet-disabled";Ne(this._zoomInButton,R),Ne(this._zoomOutButton,R),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||v._zoom===v.getMinZoom())&&(Te(this._zoomOutButton,R),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||v._zoom===v.getMaxZoom())&&(Te(this._zoomInButton,R),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ys.mergeOptions({zoomControl:!0}),Ys.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wu,this.addControl(this.zoomControl))});var No=Ko.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(v){var R="leaflet-control-scale",Z=J("div",R),fe=this.options;return this._addScales(fe,R+"-line",Z),v.on(fe.updateWhenIdle?"moveend":"move",this._update,this),v.whenReady(this._update,this),Z},onRemove:function(v){v.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(v,R,Z){v.metric&&(this._mScale=J("div",R,Z)),v.imperial&&(this._iScale=J("div",R,Z))},_update:function(){var v=this._map,R=v.getSize().y/2,Z=v.distance(v.containerPointToLatLng([0,R]),v.containerPointToLatLng([this.options.maxWidth,R]));this._updateScales(Z)},_updateScales:function(v){this.options.metric&&v&&this._updateMetric(v),this.options.imperial&&v&&this._updateImperial(v)},_updateMetric:function(v){var R=this._getRoundNum(v);this._updateScale(this._mScale,R<1e3?R+" m":R/1e3+" km",R/v)},_updateImperial:function(v){var Z,fe,Ie,R=3.2808399*v;R>5280?(fe=this._getRoundNum(Z=R/5280),this._updateScale(this._iScale,fe+" mi",fe/Z)):(Ie=this._getRoundNum(R),this._updateScale(this._iScale,Ie+" ft",Ie/R))},_updateScale:function(v,R,Z){v.style.width=Math.round(this.options.maxWidth*Z)+"px",v.innerHTML=R},_getRoundNum:function(v){var R=Math.pow(10,(Math.floor(v)+"").length-1),Z=v/R;return R*(Z>=10?10:Z>=5?5:Z>=3?3:Z>=2?2:1)}}),pc=Ko.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ot.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(v){gt(this,v),this._attributions={}},onAdd:function(v){for(var R in v.attributionControl=this,this._container=J("div","leaflet-control-attribution"),Xl(this._container),v._layers)v._layers[R].getAttribution&&this.addAttribution(v._layers[R].getAttribution());return this._update(),v.on("layeradd",this._addAttribution,this),this._container},onRemove:function(v){v.off("layeradd",this._addAttribution,this)},_addAttribution:function(v){v.layer.getAttribution&&(this.addAttribution(v.layer.getAttribution()),v.layer.once("remove",function(){this.removeAttribution(v.layer.getAttribution())},this))},setPrefix:function(v){return this.options.prefix=v,this._update(),this},addAttribution:function(v){return v?(this._attributions[v]||(this._attributions[v]=0),this._attributions[v]++,this._update(),this):this},removeAttribution:function(v){return v?(this._attributions[v]&&(this._attributions[v]--,this._update()),this):this},_update:function(){if(this._map){var v=[];for(var R in this._attributions)this._attributions[R]&&v.push(R);var Z=[];this.options.prefix&&Z.push(this.options.prefix),v.length&&Z.push(v.join(", ")),this._container.innerHTML=Z.join(' <span aria-hidden="true">|</span> ')}}});Ys.mergeOptions({attributionControl:!0}),Ys.addInitHook(function(){this.options.attributionControl&&(new pc).addTo(this)});Ko.Layers=Ph,Ko.Zoom=Wu,Ko.Scale=No,Ko.Attribution=pc,wa.layers=function(v,R,Z){return new Ph(v,R,Z)},wa.zoom=function(v){return new Wu(v)},wa.scale=function(v){return new No(v)},wa.attribution=function(v){return new pc(v)};var yl=Ri.extend({initialize:function(v){this._map=v},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yl.addTo=function(v,R){return v.addHandler(R,this),this};var ia={Events:Tn},Zl=ot.touch?"touchstart mousedown":"mousedown",xu=qi.extend({options:{clickTolerance:3},initialize:function(v,R,Z,fe){gt(this,fe),this._element=v,this._dragStartTarget=R||v,this._preventOutline=Z},enable:function(){this._enabled||(ls(this._dragStartTarget,Zl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xu._dragging===this&&this.finishDrag(!0),ss(this._dragStartTarget,Zl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(v){if(this._enabled&&(this._moved=!1,!Pe(this._element,"leaflet-zoom-anim"))){if(v.touches&&1!==v.touches.length)return void(xu._dragging===this&&this.finishDrag());if(!(xu._dragging||v.shiftKey||1!==v.which&&1!==v.button&&!v.touches||(xu._dragging=this,this._preventOutline&&_s(this._element),gr(),Di(),this._moving))){this.fire("down");var R=v.touches?v.touches[0]:v,Z=oa(this._element);this._startPoint=new nn(R.clientX,R.clientY),this._startPos=qt(this._element),this._parentScale=Ea(Z);var fe="mousedown"===v.type;ls(document,fe?"mousemove":"touchmove",this._onMove,this),ls(document,fe?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(v){if(this._enabled){if(v.touches&&v.touches.length>1)return void(this._moved=!0);var R=v.touches&&1===v.touches.length?v.touches[0]:v,Z=new nn(R.clientX,R.clientY)._subtract(this._startPoint);!Z.x&&!Z.y||Math.abs(Z.x)+Math.abs(Z.y)<this.options.clickTolerance||(Z.x/=this._parentScale.x,Z.y/=this._parentScale.y,Sa(v),this._moved||(this.fire("dragstart"),this._moved=!0,Te(document.body,"leaflet-dragging"),this._lastTarget=v.target||v.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(Z),this._moving=!0,this._lastEvent=v,this._updatePosition())}},_updatePosition:function(){var v={originalEvent:this._lastEvent};this.fire("predrag",v),jt(this._element,this._newPos),this.fire("drag",v)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(v){Ne(document.body,"leaflet-dragging"),this._lastTarget&&(Ne(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ss(document,"mousemove touchmove",this._onMove,this),ss(document,"mouseup touchend touchcancel",this._onUp,this),Zr(),Qi();var R=this._moved&&this._moving;this._moving=!1,xu._dragging=!1,R&&this.fire("dragend",{noInertia:v,distance:this._newPos.distanceTo(this._startPos)})}});function xl(v,R,Z){var fe,rt,ri,Ai,ln,qn,Dr,Qr,Ps,Ie=[1,4,2,8];for(rt=0,Dr=v.length;rt<Dr;rt++)v[rt]._code=Xa(v[rt],R);for(Ai=0;Ai<4;Ai++){for(Qr=Ie[Ai],fe=[],rt=0,ri=(Dr=v.length)-1;rt<Dr;ri=rt++)qn=v[ri],(ln=v[rt])._code&Qr?qn._code&Qr||((Ps=Bh(qn,ln,Qr,R,Z))._code=Xa(Ps,R),fe.push(Ps)):(qn._code&Qr&&((Ps=Bh(qn,ln,Qr,R,Z))._code=Xa(Ps,R),fe.push(Ps)),fe.push(ln));v=fe}return v}function bd(v,R){var Z,fe,Ie,rt,ri,Ai,ln,qn;if(!v||0===v.length)throw new Error("latlngs not passed");Ut(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var Qr=Jn([0,0]),Ps=Si(v);Ps.getNorthWest().distanceTo(Ps.getSouthWest())*Ps.getNorthEast().distanceTo(Ps.getNorthWest())<1700&&(Qr=sl(v));var uo=v.length,vo=[];for(Z=0;Z<uo;Z++){var ho=Jn(v[Z]);vo.push(R.project(Jn([ho.lat-Qr.lat,ho.lng-Qr.lng])))}for(Ai=ln=qn=0,Z=0,fe=uo-1;Z<uo;fe=Z++)ln+=((Ie=vo[Z]).x+(rt=vo[fe]).x)*(ri=Ie.y*rt.x-rt.y*Ie.x),qn+=(Ie.y+rt.y)*ri,Ai+=3*ri;var Cl=R.unproject(Fn(0===Ai?vo[0]:[ln/Ai,qn/Ai]));return Jn([Cl.lat+Qr.lat,Cl.lng+Qr.lng])}function sl(v){for(var R=0,Z=0,fe=0,Ie=0;Ie<v.length;Ie++){var rt=Jn(v[Ie]);R+=rt.lat,Z+=rt.lng,fe++}return Jn([R/fe,Z/fe])}var Kl,pr={__proto__:null,clipPolygon:xl,polygonCenter:bd,centroid:sl};function al(v,R){if(!R||!v.length)return v.slice();var Z=R*R;return function po(v,R){var Z=v.length,Ie=new(typeof Uint8Array<"u"?Uint8Array:Array)(Z);Ie[0]=Ie[Z-1]=1,ql(v,Ie,R,0,Z-1);var rt,ri=[];for(rt=0;rt<Z;rt++)Ie[rt]&&ri.push(v[rt]);return ri}(v=function ph(v,R){for(var Z=[v[0]],fe=1,Ie=0,rt=v.length;fe<rt;fe++)mc(v[fe],v[Ie])>R&&(Z.push(v[fe]),Ie=fe);return Ie<rt-1&&Z.push(v[rt-1]),Z}(v,Z),Z)}function ol(v,R,Z){return Math.sqrt(gc(v,R,Z,!0))}function ql(v,R,Z,fe,Ie){var ri,Ai,ln,rt=0;for(Ai=fe+1;Ai<=Ie-1;Ai++)(ln=gc(v[Ai],v[fe],v[Ie],!0))>rt&&(ri=Ai,rt=ln);rt>Z&&(R[ri]=1,ql(v,R,Z,fe,ri),ql(v,R,Z,ri,Ie))}function tu(v,R,Z,fe,Ie){var Ai,ln,qn,rt=fe?Kl:Xa(v,Z),ri=Xa(R,Z);for(Kl=ri;;){if(!(rt|ri))return[v,R];if(rt&ri)return!1;qn=Xa(ln=Bh(v,R,Ai=rt||ri,Z,Ie),Z),Ai===rt?(v=ln,rt=qn):(R=ln,ri=qn)}}function Bh(v,R,Z,fe,Ie){var qn,Dr,rt=R.x-v.x,ri=R.y-v.y,Ai=fe.min,ln=fe.max;return 8&Z?(qn=v.x+rt*(ln.y-v.y)/ri,Dr=ln.y):4&Z?(qn=v.x+rt*(Ai.y-v.y)/ri,Dr=Ai.y):2&Z?(qn=ln.x,Dr=v.y+ri*(ln.x-v.x)/rt):1&Z&&(qn=Ai.x,Dr=v.y+ri*(Ai.x-v.x)/rt),new nn(qn,Dr,Ie)}function Xa(v,R){var Z=0;return v.x<R.min.x?Z|=1:v.x>R.max.x&&(Z|=2),v.y<R.min.y?Z|=4:v.y>R.max.y&&(Z|=8),Z}function mc(v,R){var Z=R.x-v.x,fe=R.y-v.y;return Z*Z+fe*fe}function gc(v,R,Z,fe){var qn,Ie=R.x,rt=R.y,ri=Z.x-Ie,Ai=Z.y-rt,ln=ri*ri+Ai*Ai;return ln>0&&((qn=((v.x-Ie)*ri+(v.y-rt)*Ai)/ln)>1?(Ie=Z.x,rt=Z.y):qn>0&&(Ie+=ri*qn,rt+=Ai*qn)),ri=v.x-Ie,Ai=v.y-rt,fe?ri*ri+Ai*Ai:new nn(Ie,rt)}function Ut(v){return!Nt(v[0])||"object"!=typeof v[0][0]&&typeof v[0][0]<"u"}function Us(v){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ut(v)}function mo(v,R){var Z,fe,Ie,rt,ri,Ai,ln,qn;if(!v||0===v.length)throw new Error("latlngs not passed");Ut(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var Dr=Jn([0,0]),Qr=Si(v);Qr.getNorthWest().distanceTo(Qr.getSouthWest())*Qr.getNorthEast().distanceTo(Qr.getNorthWest())<1700&&(Dr=sl(v));var $s=v.length,uo=[];for(Z=0;Z<$s;Z++){var vo=Jn(v[Z]);uo.push(R.project(Jn([vo.lat-Dr.lat,vo.lng-Dr.lng])))}for(Z=0,fe=0;Z<$s-1;Z++)fe+=uo[Z].distanceTo(uo[Z+1])/2;if(0===fe)qn=uo[0];else for(Z=0,rt=0;Z<$s-1;Z++)if((rt+=Ie=(ri=uo[Z]).distanceTo(Ai=uo[Z+1]))>fe){qn=[Ai.x-(ln=(rt-fe)/Ie)*(Ai.x-ri.x),Ai.y-ln*(Ai.y-ri.y)];break}var ho=R.unproject(Fn(qn));return Jn([ho.lat+Dr.lat,ho.lng+Dr.lng])}var Aa={__proto__:null,simplify:al,pointToSegmentDistance:ol,closestPointOnSegment:function va(v,R,Z){return gc(v,R,Z)},clipSegment:tu,_getEdgeIntersection:Bh,_getBitCode:Xa,_sqClosestPointOnSegment:gc,isFlat:Ut,_flat:Us,polylineCenter:mo},mh={project:function(v){return new nn(v.lng,v.lat)},unproject:function(v){return new kn(v.y,v.x)},bounds:new mr([-180,-90],[180,90])},bu={R:6378137,R_MINOR:6356752.314245179,bounds:new mr([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(v){var R=Math.PI/180,Z=this.R,fe=v.lat*R,Ie=this.R_MINOR/Z,rt=Math.sqrt(1-Ie*Ie),ri=rt*Math.sin(fe),Ai=Math.tan(Math.PI/4-fe/2)/Math.pow((1-ri)/(1+ri),rt/2);return fe=-Z*Math.log(Math.max(Ai,1e-10)),new nn(v.lng*R*Z,fe)},unproject:function(v){for(var qn,R=180/Math.PI,Z=this.R,fe=this.R_MINOR/Z,Ie=Math.sqrt(1-fe*fe),rt=Math.exp(-v.y/Z),ri=Math.PI/2-2*Math.atan(rt),Ai=0,ln=.1;Ai<15&&Math.abs(ln)>1e-7;Ai++)qn=Ie*Math.sin(ri),qn=Math.pow((1-qn)/(1+qn),Ie/2),ri+=ln=Math.PI/2-2*Math.atan(rt*qn)-ri;return new kn(ri*R,v.x*R/Z)}},Ml={__proto__:null,LonLat:mh,Mercator:bu,SphericalMercator:En},Ol=mt({},Xr,{code:"EPSG:3395",projection:bu,transformation:function(){var v=.5/(Math.PI*bu.R);return Cs(v,.5,-v,.5)}()}),Rl=mt({},Xr,{code:"EPSG:4326",projection:mh,transformation:Cs(1/180,1,-1/180,.5)}),ll=mt({},ts,{projection:mh,transformation:Cs(1,0,-1,0),scale:function(v){return Math.pow(2,v)},zoom:function(v){return Math.log(v)/Math.LN2},distance:function(v,R){var Z=R.lng-v.lng,fe=R.lat-v.lat;return Math.sqrt(Z*Z+fe*fe)},infinite:!0});ts.Earth=Xr,ts.EPSG3395=Ol,ts.EPSG3857=Ts,ts.EPSG900913=Zn,ts.EPSG4326=Rl,ts.Simple=ll;var bl=qi.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(v){return v.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(v){return v&&v.removeLayer(this),this},getPane:function(v){return this._map.getPane(v?this.options[v]||v:this.options.pane)},addInteractiveTarget:function(v){return this._map._targets[He(v)]=this,this},removeInteractiveTarget:function(v){return delete this._map._targets[He(v)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(v){var R=v.target;if(R.hasLayer(this)){if(this._map=R,this._zoomAnimated=R._zoomAnimated,this.getEvents){var Z=this.getEvents();R.on(Z,this),this.once("remove",function(){R.off(Z,this)},this)}this.onAdd(R),this.fire("add"),R.fire("layeradd",{layer:this})}}});Ys.include({addLayer:function(v){if(!v._layerAdd)throw new Error("The provided object is not a Layer.");var R=He(v);return this._layers[R]||(this._layers[R]=v,v._mapToAdd=this,v.beforeAdd&&v.beforeAdd(this),this.whenReady(v._layerAdd,v)),this},removeLayer:function(v){var R=He(v);return this._layers[R]?(this._loaded&&v.onRemove(this),delete this._layers[R],this._loaded&&(this.fire("layerremove",{layer:v}),v.fire("remove")),v._map=v._mapToAdd=null,this):this},hasLayer:function(v){return He(v)in this._layers},eachLayer:function(v,R){for(var Z in this._layers)v.call(R,this._layers[Z]);return this},_addLayers:function(v){for(var R=0,Z=(v=v?Nt(v)?v:[v]:[]).length;R<Z;R++)this.addLayer(v[R])},_addZoomLimit:function(v){(!isNaN(v.options.maxZoom)||!isNaN(v.options.minZoom))&&(this._zoomBoundLayers[He(v)]=v,this._updateZoomLevels())},_removeZoomLimit:function(v){var R=He(v);this._zoomBoundLayers[R]&&(delete this._zoomBoundLayers[R],this._updateZoomLevels())},_updateZoomLevels:function(){var v=1/0,R=-1/0,Z=this._getZoomSpan();for(var fe in this._zoomBoundLayers){var Ie=this._zoomBoundLayers[fe].options;v=void 0===Ie.minZoom?v:Math.min(v,Ie.minZoom),R=void 0===Ie.maxZoom?R:Math.max(R,Ie.maxZoom)}this._layersMaxZoom=R===-1/0?void 0:R,this._layersMinZoom=v===1/0?void 0:v,Z!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var iu=bl.extend({initialize:function(v,R){var Z,fe;if(gt(this,R),this._layers={},v)for(Z=0,fe=v.length;Z<fe;Z++)this.addLayer(v[Z])},addLayer:function(v){var R=this.getLayerId(v);return this._layers[R]=v,this._map&&this._map.addLayer(v),this},removeLayer:function(v){var R=v in this._layers?v:this.getLayerId(v);return this._map&&this._layers[R]&&this._map.removeLayer(this._layers[R]),delete this._layers[R],this},hasLayer:function(v){return("number"==typeof v?v:this.getLayerId(v))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(v){var Z,fe,R=Array.prototype.slice.call(arguments,1);for(Z in this._layers)(fe=this._layers[Z])[v]&&fe[v].apply(fe,R);return this},onAdd:function(v){this.eachLayer(v.addLayer,v)},onRemove:function(v){this.eachLayer(v.removeLayer,v)},eachLayer:function(v,R){for(var Z in this._layers)v.call(R,this._layers[Z]);return this},getLayer:function(v){return this._layers[v]},getLayers:function(){var v=[];return this.eachLayer(v.push,v),v},setZIndex:function(v){return this.invoke("setZIndex",v)},getLayerId:function(v){return He(v)}}),Ho=iu.extend({addLayer:function(v){return this.hasLayer(v)?this:(v.addEventParent(this),iu.prototype.addLayer.call(this,v),this.fire("layeradd",{layer:v}))},removeLayer:function(v){return this.hasLayer(v)?(v in this._layers&&(v=this._layers[v]),v.removeEventParent(this),iu.prototype.removeLayer.call(this,v),this.fire("layerremove",{layer:v})):this},setStyle:function(v){return this.invoke("setStyle",v)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var v=new Nr;for(var R in this._layers){var Z=this._layers[R];v.extend(Z.getBounds?Z.getBounds():Z.getLatLng())}return v}}),_c=Ri.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(v){gt(this,v)},createIcon:function(v){return this._createIcon("icon",v)},createShadow:function(v){return this._createIcon("shadow",v)},_createIcon:function(v,R){var Z=this._getIconUrl(v);if(!Z){if("icon"===v)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var fe=this._createImg(Z,R&&"IMG"===R.tagName?R:null);return this._setIconStyles(fe,v),(this.options.crossOrigin||""===this.options.crossOrigin)&&(fe.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),fe},_setIconStyles:function(v,R){var Z=this.options,fe=Z[R+"Size"];"number"==typeof fe&&(fe=[fe,fe]);var Ie=Fn(fe),rt=Fn("shadow"===R&&Z.shadowAnchor||Z.iconAnchor||Ie&&Ie.divideBy(2,!0));v.className="leaflet-marker-"+R+" "+(Z.className||""),rt&&(v.style.marginLeft=-rt.x+"px",v.style.marginTop=-rt.y+"px"),Ie&&(v.style.width=Ie.x+"px",v.style.height=Ie.y+"px")},_createImg:function(v,R){return(R=R||document.createElement("img")).src=v,R},_getIconUrl:function(v){return ot.retina&&this.options[v+"RetinaUrl"]||this.options[v+"Url"]}});var cl=_c.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(v){return"string"!=typeof cl.imagePath&&(cl.imagePath=this._detectIconPath()),(this.options.imagePath||cl.imagePath)+_c.prototype._getIconUrl.call(this,v)},_stripUrl:function(v){var R=function(Z,fe,Ie){var rt=fe.exec(Z);return rt&&rt[Ie]};return(v=R(v,/^url\((['"])?(.+)\1\)$/,2))&&R(v,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var v=J("div","leaflet-default-icon-path",document.body),R=K(v,"background-image")||K(v,"backgroundImage");if(document.body.removeChild(v),R=this._stripUrl(R))return R;var Z=document.querySelector('link[href$="leaflet.css"]');return Z?Z.href.substring(0,Z.href.length-11-1):""}}),gh=yl.extend({initialize:function(v){this._marker=v},addHooks:function(){var v=this._marker._icon;this._draggable||(this._draggable=new xu(v,v,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Te(v,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ne(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(v){var R=this._marker,Z=R._map,fe=this._marker.options.autoPanSpeed,Ie=this._marker.options.autoPanPadding,rt=qt(R._icon),ri=Z.getPixelBounds(),Ai=Z.getPixelOrigin(),ln=hr(ri.min._subtract(Ai).add(Ie),ri.max._subtract(Ai).subtract(Ie));if(!ln.contains(rt)){var qn=Fn((Math.max(ln.max.x,rt.x)-ln.max.x)/(ri.max.x-ln.max.x)-(Math.min(ln.min.x,rt.x)-ln.min.x)/(ri.min.x-ln.min.x),(Math.max(ln.max.y,rt.y)-ln.max.y)/(ri.max.y-ln.max.y)-(Math.min(ln.min.y,rt.y)-ln.min.y)/(ri.min.y-ln.min.y)).multiplyBy(fe);Z.panBy(qn,{animate:!1}),this._draggable._newPos._add(qn),this._draggable._startPos._add(qn),jt(R._icon,this._draggable._newPos),this._onDrag(v),this._panRequest=hi(this._adjustPan.bind(this,v))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(v){this._marker.options.autoPan&&(Dt(this._panRequest),this._panRequest=hi(this._adjustPan.bind(this,v)))},_onDrag:function(v){var R=this._marker,Z=R._shadow,fe=qt(R._icon),Ie=R._map.layerPointToLatLng(fe);Z&&jt(Z,fe),R._latlng=Ie,v.latlng=Ie,v.oldLatLng=this._oldLatLng,R.fire("move",v).fire("drag",v)},_onDragEnd:function(v){Dt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",v)}}),zc=bl.extend({options:{icon:new cl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(v,R){gt(this,R),this._latlng=Jn(v)},onAdd:function(v){this._zoomAnimated=this._zoomAnimated&&v.options.markerZoomAnimation,this._zoomAnimated&&v.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(v){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&v.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(v){var R=this._latlng;return this._latlng=Jn(v),this.update(),this.fire("move",{oldLatLng:R,latlng:this._latlng})},setZIndexOffset:function(v){return this.options.zIndexOffset=v,this.update()},getIcon:function(){return this.options.icon},setIcon:function(v){return this.options.icon=v,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var v=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(v)}return this},_initIcon:function(){var v=this.options,R="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),Z=v.icon.createIcon(this._icon),fe=!1;Z!==this._icon&&(this._icon&&this._removeIcon(),fe=!0,v.title&&(Z.title=v.title),"IMG"===Z.tagName&&(Z.alt=v.alt||"")),Te(Z,R),v.keyboard&&(Z.tabIndex="0",Z.setAttribute("role","button")),this._icon=Z,v.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ls(Z,"focus",this._panOnFocus,this);var Ie=v.icon.createShadow(this._shadow),rt=!1;Ie!==this._shadow&&(this._removeShadow(),rt=!0),Ie&&(Te(Ie,R),Ie.alt=""),this._shadow=Ie,v.opacity<1&&this._updateOpacity(),fe&&this.getPane().appendChild(this._icon),this._initInteraction(),Ie&&rt&&this.getPane(v.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ss(this._icon,"focus",this._panOnFocus,this),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(v){this._icon&&jt(this._icon,v),this._shadow&&jt(this._shadow,v),this._zIndex=v.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(v){this._icon&&(this._icon.style.zIndex=this._zIndex+v)},_animateZoom:function(v){var R=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center).round();this._setPos(R)},_initInteraction:function(){if(this.options.interactive&&(Te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),gh)){var v=this.options.draggable;this.dragging&&(v=this.dragging.enabled(),this.dragging.disable()),this.dragging=new gh(this),v&&this.dragging.enable()}},setOpacity:function(v){return this.options.opacity=v,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var v=this.options.opacity;this._icon&&we(this._icon,v),this._shadow&&we(this._shadow,v)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var v=this._map;if(v){var R=this.options.icon.options,Z=R.iconSize?Fn(R.iconSize):Fn(0,0),fe=R.iconAnchor?Fn(R.iconAnchor):Fn(0,0);v.panInside(this._latlng,{paddingTopLeft:fe,paddingBottomRight:Z.subtract(fe)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Jo=bl.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(v){this._renderer=v.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(v){return gt(this,v),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&v&&Object.prototype.hasOwnProperty.call(v,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pl=Jo.extend({options:{fill:!0,radius:10},initialize:function(v,R){gt(this,R),this._latlng=Jn(v),this._radius=this.options.radius},setLatLng:function(v){var R=this._latlng;return this._latlng=Jn(v),this.redraw(),this.fire("move",{oldLatLng:R,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(v){return this.options.radius=this._radius=v,this.redraw()},getRadius:function(){return this._radius},setStyle:function(v){var R=v&&v.radius||this._radius;return Jo.prototype.setStyle.call(this,v),this.setRadius(R),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var v=this._radius,R=this._radiusY||v,Z=this._clickTolerance(),fe=[v+Z,R+Z];this._pxBounds=new mr(this._point.subtract(fe),this._point.add(fe))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(v){return v.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Xu=Pl.extend({initialize:function(v,R,Z){if("number"==typeof R&&(R=mt({},Z,{radius:R})),gt(this,R),this._latlng=Jn(v),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(v){return this._mRadius=v,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var v=[this._radius,this._radiusY||this._radius];return new Nr(this._map.layerPointToLatLng(this._point.subtract(v)),this._map.layerPointToLatLng(this._point.add(v)))},setStyle:Jo.prototype.setStyle,_project:function(){var v=this._latlng.lng,R=this._latlng.lat,Z=this._map,fe=Z.options.crs;if(fe.distance===Xr.distance){var Ie=Math.PI/180,rt=this._mRadius/Xr.R/Ie,ri=Z.project([R+rt,v]),Ai=Z.project([R-rt,v]),ln=ri.add(Ai).divideBy(2),qn=Z.unproject(ln).lat,Dr=Math.acos((Math.cos(rt*Ie)-Math.sin(R*Ie)*Math.sin(qn*Ie))/(Math.cos(R*Ie)*Math.cos(qn*Ie)))/Ie;(isNaN(Dr)||0===Dr)&&(Dr=rt/Math.cos(Math.PI/180*R)),this._point=ln.subtract(Z.getPixelOrigin()),this._radius=isNaN(Dr)?0:ln.x-Z.project([qn,v-Dr]).x,this._radiusY=ln.y-ri.y}else{var Qr=fe.unproject(fe.project(this._latlng).subtract([this._mRadius,0]));this._point=Z.latLngToLayerPoint(this._latlng),this._radius=this._point.x-Z.latLngToLayerPoint(Qr).x}this._updateBounds()}});var go=Jo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(v,R){gt(this,R),this._setLatLngs(v)},getLatLngs:function(){return this._latlngs},setLatLngs:function(v){return this._setLatLngs(v),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(v){for(var Ie,rt,R=1/0,Z=null,fe=gc,ri=0,Ai=this._parts.length;ri<Ai;ri++)for(var ln=this._parts[ri],qn=1,Dr=ln.length;qn<Dr;qn++){var Qr=fe(v,Ie=ln[qn-1],rt=ln[qn],!0);Qr<R&&(R=Qr,Z=fe(v,Ie,rt))}return Z&&(Z.distance=Math.sqrt(R)),Z},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(v,R){return R=R||this._defaultShape(),v=Jn(v),R.push(v),this._bounds.extend(v),this.redraw()},_setLatLngs:function(v){this._bounds=new Nr,this._latlngs=this._convertLatLngs(v)},_defaultShape:function(){return Ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(v){for(var R=[],Z=Ut(v),fe=0,Ie=v.length;fe<Ie;fe++)Z?(R[fe]=Jn(v[fe]),this._bounds.extend(R[fe])):R[fe]=this._convertLatLngs(v[fe]);return R},_project:function(){var v=new mr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,v),this._bounds.isValid()&&v.isValid()&&(this._rawPxBounds=v,this._updateBounds())},_updateBounds:function(){var v=this._clickTolerance(),R=new nn(v,v);this._rawPxBounds&&(this._pxBounds=new mr([this._rawPxBounds.min.subtract(R),this._rawPxBounds.max.add(R)]))},_projectLatlngs:function(v,R,Z){var rt,ri,Ie=v.length;if(v[0]instanceof kn){for(ri=[],rt=0;rt<Ie;rt++)ri[rt]=this._map.latLngToLayerPoint(v[rt]),Z.extend(ri[rt]);R.push(ri)}else for(rt=0;rt<Ie;rt++)this._projectLatlngs(v[rt],R,Z)},_clipPoints:function(){var v=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(v)){if(this.options.noClip)return void(this._parts=this._rings);var Z,fe,Ie,rt,ri,Ai,ln,R=this._parts;for(Z=0,Ie=0,rt=this._rings.length;Z<rt;Z++)for(fe=0,ri=(ln=this._rings[Z]).length;fe<ri-1;fe++)(Ai=tu(ln[fe],ln[fe+1],v,fe,!0))&&(R[Ie]=R[Ie]||[],R[Ie].push(Ai[0]),(Ai[1]!==ln[fe+1]||fe===ri-2)&&(R[Ie].push(Ai[1]),Ie++))}},_simplifyPoints:function(){for(var v=this._parts,R=this.options.smoothFactor,Z=0,fe=v.length;Z<fe;Z++)v[Z]=al(v[Z],R)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(v,R){var Z,fe,Ie,rt,ri,Ai,ln=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(Z=0,rt=this._parts.length;Z<rt;Z++)for(fe=0,Ie=(ri=(Ai=this._parts[Z]).length)-1;fe<ri;Ie=fe++)if((R||0!==fe)&&ol(v,Ai[Ie],Ai[fe])<=ln)return!0;return!1}});go._flat=Us;var ul=go.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(v){var R=go.prototype._convertLatLngs.call(this,v),Z=R.length;return Z>=2&&R[0]instanceof kn&&R[0].equals(R[Z-1])&&R.pop(),R},_setLatLngs:function(v){go.prototype._setLatLngs.call(this,v),Ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var v=this._renderer._bounds,R=this.options.weight,Z=new nn(R,R);if(v=new mr(v.min.subtract(Z),v.max.add(Z)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(v)){if(this.options.noClip)return void(this._parts=this._rings);for(var rt,fe=0,Ie=this._rings.length;fe<Ie;fe++)(rt=xl(this._rings[fe],v,!0)).length&&this._parts.push(rt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(v){var Z,fe,Ie,rt,ri,Ai,ln,qn,R=!1;if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(rt=0,ln=this._parts.length;rt<ln;rt++)for(ri=0,Ai=(qn=(Z=this._parts[rt]).length)-1;ri<qn;Ai=ri++)(fe=Z[ri]).y>v.y!=(Ie=Z[Ai]).y>v.y&&v.x<(Ie.x-fe.x)*(v.y-fe.y)/(Ie.y-fe.y)+fe.x&&(R=!R);return R||go.prototype._containsPoint.call(this,v,!0)}});var Vo=Ho.extend({initialize:function(v,R){gt(this,R),this._layers={},v&&this.addData(v)},addData:function(v){var Z,fe,Ie,R=Nt(v)?v:v.features;if(R){for(Z=0,fe=R.length;Z<fe;Z++)((Ie=R[Z]).geometries||Ie.geometry||Ie.features||Ie.coordinates)&&this.addData(Ie);return this}var rt=this.options;if(rt.filter&&!rt.filter(v))return this;var ri=Ma(v,rt);return ri?(ri.feature=Cu(v),ri.defaultOptions=ri.options,this.resetStyle(ri),rt.onEachFeature&&rt.onEachFeature(v,ri),this.addLayer(ri)):this},resetStyle:function(v){return void 0===v?this.eachLayer(this.resetStyle,this):(v.options=mt({},v.defaultOptions),this._setLayerStyle(v,this.options.style),this)},setStyle:function(v){return this.eachLayer(function(R){this._setLayerStyle(R,v)},this)},_setLayerStyle:function(v,R){v.setStyle&&("function"==typeof R&&(R=R(v.feature)),v.setStyle(R))}});function Ma(v,R){var Ai,ln,qn,Dr,Z="Feature"===v.type?v.geometry:v,fe=Z?Z.coordinates:null,Ie=[],rt=R&&R.pointToLayer,ri=R&&R.coordsToLatLng||hl;if(!fe&&!Z)return null;switch(Z.type){case"Point":return wl(rt,v,Ai=ri(fe),R);case"MultiPoint":for(qn=0,Dr=fe.length;qn<Dr;qn++)Ai=ri(fe[qn]),Ie.push(wl(rt,v,Ai,R));return new Ho(Ie);case"LineString":case"MultiLineString":return ln=oo(fe,"LineString"===Z.type?0:1,ri),new go(ln,R);case"Polygon":case"MultiPolygon":return ln=oo(fe,"Polygon"===Z.type?1:2,ri),new ul(ln,R);case"GeometryCollection":for(qn=0,Dr=Z.geometries.length;qn<Dr;qn++){var Qr=Ma({geometry:Z.geometries[qn],type:"Feature",properties:v.properties},R);Qr&&Ie.push(Qr)}return new Ho(Ie);case"FeatureCollection":for(qn=0,Dr=Z.features.length;qn<Dr;qn++){var Ps=Ma(Z.features[qn],R);Ps&&Ie.push(Ps)}return new Ho(Ie);default:throw new Error("Invalid GeoJSON object.")}}function wl(v,R,Z,fe){return v?v(R,Z):new zc(Z,fe&&fe.markersInheritOptions&&fe)}function hl(v){return new kn(v[1],v[0],v[2])}function oo(v,R,Z){for(var ri,fe=[],Ie=0,rt=v.length;Ie<rt;Ie++)ri=R?oo(v[Ie],R-1,Z):(Z||hl)(v[Ie]),fe.push(ri);return fe}function wd(v,R){return void 0!==(v=Jn(v)).alt?[it(v.lng,R),it(v.lat,R),it(v.alt,R)]:[it(v.lng,R),it(v.lat,R)]}function nu(v,R,Z,fe){for(var Ie=[],rt=0,ri=v.length;rt<ri;rt++)Ie.push(R?nu(v[rt],Ut(v[rt])?0:R-1,Z,fe):wd(v[rt],fe));return!R&&Z&&Ie.length>0&&Ie.push(Ie[0].slice()),Ie}function Jl(v,R){return v.feature?mt({},v.feature,{geometry:R}):Cu(R)}function Cu(v){return"Feature"===v.type||"FeatureCollection"===v.type?v:{type:"Feature",properties:{},geometry:v}}var Zu={toGeoJSON:function(v){return Jl(this,{type:"Point",coordinates:wd(this.getLatLng(),v)})}};function Eu(v,R){return new Vo(v,R)}zc.include(Zu),Xu.include(Zu),Pl.include(Zu),go.include({toGeoJSON:function(v){var R=!Ut(this._latlngs);return Jl(this,{type:(R?"Multi":"")+"LineString",coordinates:nu(this._latlngs,R?1:0,!1,v)})}}),ul.include({toGeoJSON:function(v){var R=!Ut(this._latlngs),Z=R&&!Ut(this._latlngs[0]),fe=nu(this._latlngs,Z?2:R?1:0,!0,v);return R||(fe=[fe]),Jl(this,{type:(Z?"Multi":"")+"Polygon",coordinates:fe})}}),iu.include({toMultiPoint:function(v){var R=[];return this.eachLayer(function(Z){R.push(Z.toGeoJSON(v).geometry.coordinates)}),Jl(this,{type:"MultiPoint",coordinates:R})},toGeoJSON:function(v){var R=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===R)return this.toMultiPoint(v);var Z="GeometryCollection"===R,fe=[];return this.eachLayer(function(Ie){if(Ie.toGeoJSON){var rt=Ie.toGeoJSON(v);if(Z)fe.push(rt.geometry);else{var ri=Cu(rt);"FeatureCollection"===ri.type?fe.push.apply(fe,ri.features):fe.push(ri)}}}),Z?Jl(this,{geometries:fe,type:"GeometryCollection"}):{type:"FeatureCollection",features:fe}}});var Li=Eu,mn=bl.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(v,R,Z){this._url=v,this._bounds=Si(R),gt(this,Z)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(v){return this.options.opacity=v,this._image&&this._updateOpacity(),this},setStyle:function(v){return v.opacity&&this.setOpacity(v.opacity),this},bringToFront:function(){return this._map&&xe(this._image),this},bringToBack:function(){return this._map&&Se(this._image),this},setUrl:function(v){return this._url=v,this._image&&(this._image.src=v),this},setBounds:function(v){return this._bounds=Si(v),this._map&&this._reset(),this},getEvents:function(){var v={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var v="IMG"===this._url.tagName,R=this._image=v?this._url:J("img");Te(R,"leaflet-image-layer"),this._zoomAnimated&&Te(R,"leaflet-zoom-animated"),this.options.className&&Te(R,this.options.className),R.onselectstart=$e,R.onmousemove=$e,R.onload=n(this.fire,this,"load"),R.onerror=n(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(R.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),v?this._url=R.src:(R.src=this._url,R.alt=this.options.alt)},_animateZoom:function(v){var R=this._map.getZoomScale(v.zoom),Z=this._map._latLngBoundsToNewLayerBounds(this._bounds,v.zoom,v.center).min;lt(this._image,Z,R)},_reset:function(){var v=this._image,R=new mr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),Z=R.getSize();jt(v,R.min),v.style.width=Z.x+"px",v.style.height=Z.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var v=this.options.errorOverlayUrl;v&&this._url!==v&&(this._url=v,this._image.src=v)},getCenter:function(){return this._bounds.getCenter()}}),Mr=mn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var v="VIDEO"===this._url.tagName,R=this._image=v?this._url:J("video");if(Te(R,"leaflet-image-layer"),this._zoomAnimated&&Te(R,"leaflet-zoom-animated"),this.options.className&&Te(R,this.options.className),R.onselectstart=$e,R.onmousemove=$e,R.onloadeddata=n(this.fire,this,"load"),v){for(var Z=R.getElementsByTagName("source"),fe=[],Ie=0;Ie<Z.length;Ie++)fe.push(Z[Ie].src);this._url=Z.length>0?fe:[R.src]}else{Nt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(R.style,"objectFit")&&(R.style.objectFit="fill"),R.autoplay=!!this.options.autoplay,R.loop=!!this.options.loop,R.muted=!!this.options.muted,R.playsInline=!!this.options.playsInline;for(var rt=0;rt<this._url.length;rt++){var ri=J("source");ri.src=this._url[rt],R.appendChild(ri)}}}});var _a=mn.extend({_initImage:function(){var v=this._image=this._url;Te(v,"leaflet-image-layer"),this._zoomAnimated&&Te(v,"leaflet-zoom-animated"),this.options.className&&Te(v,this.options.className),v.onselectstart=$e,v.onmousemove=$e}});var la=bl.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(v,R){v&&(v instanceof kn||Nt(v))?(this._latlng=Jn(v),gt(this,R)):(gt(this,v),this._source=R),this.options.content&&(this._content=this.options.content)},openOn:function(v){return(v=arguments.length?v:this._source._map).hasLayer(this)||v.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(v){return this._map?this.close():(arguments.length?this._source=v:v=this._source,this._prepareOpen(),this.openOn(v._map)),this},onAdd:function(v){this._zoomAnimated=v._zoomAnimated,this._container||this._initLayout(),v._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),v._fadeAnimated&&we(this._container,1),this.bringToFront(),this.options.interactive&&(Te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(v){v._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(n(ne,void 0,this._container),200)):ne(this._container),this.options.interactive&&(Ne(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(v){return this._latlng=Jn(v),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(v){return this._content=v,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var v={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&xe(this._container),this},bringToBack:function(){return this._map&&Se(this._container),this},_prepareOpen:function(v){var R=this._source;if(!R._map)return!1;if(R instanceof Ho){R=null;var Z=this._source._layers;for(var fe in Z)if(Z[fe]._map){R=Z[fe];break}if(!R)return!1;this._source=R}if(!v)if(R.getCenter)v=R.getCenter();else if(R.getLatLng)v=R.getLatLng();else{if(!R.getBounds)throw new Error("Unable to get source layer LatLng.");v=R.getBounds().getCenter()}return this.setLatLng(v),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var v=this._contentNode,R="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof R)v.innerHTML=R;else{for(;v.hasChildNodes();)v.removeChild(v.firstChild);v.appendChild(R)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var v=this._map.latLngToLayerPoint(this._latlng),R=Fn(this.options.offset),Z=this._getAnchor();this._zoomAnimated?jt(this._container,v.add(Z)):R=R.add(v).add(Z);var fe=this._containerBottom=-R.y,Ie=this._containerLeft=-Math.round(this._containerWidth/2)+R.x;this._container.style.bottom=fe+"px",this._container.style.left=Ie+"px"}},_getAnchor:function(){return[0,0]}});Ys.include({_initOverlay:function(v,R,Z,fe){var Ie=R;return Ie instanceof v||(Ie=new v(fe).setContent(R)),Z&&Ie.setLatLng(Z),Ie}}),bl.include({_initOverlay:function(v,R,Z,fe){var Ie=Z;return Ie instanceof v?(gt(Ie,fe),Ie._source=this):(Ie=R&&!fe?R:new v(fe,this)).setContent(Z),Ie}});var Fl=la.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(v){return!(v=arguments.length?v:this._source._map).hasLayer(this)&&v._popup&&v._popup.options.autoClose&&v.removeLayer(v._popup),v._popup=this,la.prototype.openOn.call(this,v)},onAdd:function(v){la.prototype.onAdd.call(this,v),v.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Jo||this._source.on("preclick",fc))},onRemove:function(v){la.prototype.onRemove.call(this,v),v.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Jo||this._source.off("preclick",fc))},getEvents:function(){var v=la.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(v.preclick=this.close),this.options.keepInView&&(v.moveend=this._adjustPan),v},_initLayout:function(){var v="leaflet-popup",R=this._container=J("div",v+" "+(this.options.className||"")+" leaflet-zoom-animated"),Z=this._wrapper=J("div",v+"-content-wrapper",R);if(this._contentNode=J("div",v+"-content",Z),Xl(R),rd(this._contentNode),ls(R,"contextmenu",fc),this._tipContainer=J("div",v+"-tip-container",R),this._tip=J("div",v+"-tip",this._tipContainer),this.options.closeButton){var fe=this._closeButton=J("a",v+"-close-button",R);fe.setAttribute("role","button"),fe.setAttribute("aria-label","Close popup"),fe.href="#close",fe.innerHTML='<span aria-hidden="true">&#215;</span>',ls(fe,"click",function(Ie){Sa(Ie),this.close()},this)}},_updateLayout:function(){var v=this._contentNode,R=v.style;R.width="",R.whiteSpace="nowrap";var Z=v.offsetWidth;Z=Math.min(Z,this.options.maxWidth),Z=Math.max(Z,this.options.minWidth),R.width=Z+1+"px",R.whiteSpace="",R.height="";var Ie=this.options.maxHeight,rt="leaflet-popup-scrolled";Ie&&v.offsetHeight>Ie?(R.height=Ie+"px",Te(v,rt)):Ne(v,rt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(v){var R=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center),Z=this._getAnchor();jt(this._container,R.add(Z))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var v=this._map,R=parseInt(K(this._container,"marginBottom"),10)||0,Z=this._container.offsetHeight+R,fe=this._containerWidth,Ie=new nn(this._containerLeft,-Z-this._containerBottom);Ie._add(qt(this._container));var rt=v.layerPointToContainerPoint(Ie),ri=Fn(this.options.autoPanPadding),Ai=Fn(this.options.autoPanPaddingTopLeft||ri),ln=Fn(this.options.autoPanPaddingBottomRight||ri),qn=v.getSize(),Dr=0,Qr=0;rt.x+fe+ln.x>qn.x&&(Dr=rt.x+fe-qn.x+ln.x),rt.x-Dr-Ai.x<0&&(Dr=rt.x-Ai.x),rt.y+Z+ln.y>qn.y&&(Qr=rt.y+Z-qn.y+ln.y),rt.y-Qr-Ai.y<0&&(Qr=rt.y-Ai.y),(Dr||Qr)&&(this.options.keepInView&&(this._autopanning=!0),v.fire("autopanstart").panBy([Dr,Qr]))}},_getAnchor:function(){return Fn(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ys.mergeOptions({closePopupOnClick:!0}),Ys.include({openPopup:function(v,R,Z){return this._initOverlay(Fl,v,R,Z).openOn(this),this},closePopup:function(v){return(v=arguments.length?v:this._popup)&&v.close(),this}}),bl.include({bindPopup:function(v,R){return this._popup=this._initOverlay(Fl,this._popup,v,R),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(v){return this._popup&&(this instanceof Ho||(this._popup._source=this),this._popup._prepareOpen(v||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(v){return this._popup&&this._popup.setContent(v),this},getPopup:function(){return this._popup},_openPopup:function(v){if(this._popup&&this._map){vl(v);var R=v.layer||v.target;if(this._popup._source===R&&!(R instanceof Jo))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(v.latlng));this._popup._source=R,this.openPopup(v.latlng)}},_movePopup:function(v){this._popup.setLatLng(v.latlng)},_onKeyPress:function(v){13===v.originalEvent.keyCode&&this._openPopup(v)}});var dl=la.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(v){la.prototype.onAdd.call(this,v),this.setOpacity(this.options.opacity),v.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(v){la.prototype.onRemove.call(this,v),v.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var v=la.prototype.getEvents.call(this);return this.options.permanent||(v.preclick=this.close),v},_initLayout:function(){this._contentNode=this._container=J("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+He(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(v){var R,Z,fe=this._map,Ie=this._container,rt=fe.latLngToContainerPoint(fe.getCenter()),ri=fe.layerPointToContainerPoint(v),Ai=this.options.direction,ln=Ie.offsetWidth,qn=Ie.offsetHeight,Dr=Fn(this.options.offset),Qr=this._getAnchor();"top"===Ai?(R=ln/2,Z=qn):"bottom"===Ai?(R=ln/2,Z=0):"center"===Ai?(R=ln/2,Z=qn/2):"right"===Ai?(R=0,Z=qn/2):"left"===Ai?(R=ln,Z=qn/2):ri.x<rt.x?(Ai="right",R=0,Z=qn/2):(Ai="left",R=ln+2*(Dr.x+Qr.x),Z=qn/2),v=v.subtract(Fn(R,Z,!0)).add(Dr).add(Qr),Ne(Ie,"leaflet-tooltip-right"),Ne(Ie,"leaflet-tooltip-left"),Ne(Ie,"leaflet-tooltip-top"),Ne(Ie,"leaflet-tooltip-bottom"),Te(Ie,"leaflet-tooltip-"+Ai),jt(Ie,v)},_updatePosition:function(){var v=this._map.latLngToLayerPoint(this._latlng);this._setPosition(v)},setOpacity:function(v){this.options.opacity=v,this._container&&we(this._container,v)},_animateZoom:function(v){var R=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center);this._setPosition(R)},_getAnchor:function(){return Fn(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ys.include({openTooltip:function(v,R,Z){return this._initOverlay(dl,v,R,Z).openOn(this),this},closeTooltip:function(v){return v.close(),this}}),bl.include({bindTooltip:function(v,R){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(dl,this._tooltip,v,R),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(v){if(v||!this._tooltipHandlersAdded){var R=v?"off":"on",Z={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?Z.add=this._openTooltip:(Z.mouseover=this._openTooltip,Z.mouseout=this.closeTooltip,Z.click=this._openTooltip,this._map?this._addFocusListeners():Z.add=this._addFocusListeners),this._tooltip.options.sticky&&(Z.mousemove=this._moveTooltip),this[R](Z),this._tooltipHandlersAdded=!v}},openTooltip:function(v){return this._tooltip&&(this instanceof Ho||(this._tooltip._source=this),this._tooltip._prepareOpen(v)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(v){return this._tooltip&&this._tooltip.setContent(v),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(v){var R="function"==typeof v.getElement&&v.getElement();R&&(ls(R,"focus",function(){this._tooltip._source=v,this.openTooltip()},this),ls(R,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(v){var R="function"==typeof v.getElement&&v.getElement();R&&R.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(v){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var R=this;return void this._map.once("moveend",function(){R._openOnceFlag=!1,R._openTooltip(v)})}this._tooltip._source=v.layer||v.target,this.openTooltip(this._tooltip.options.sticky?v.latlng:void 0)}},_moveTooltip:function(v){var Z,fe,R=v.latlng;this._tooltip.options.sticky&&v.originalEvent&&(Z=this._map.mouseEventToContainerPoint(v.originalEvent),fe=this._map.containerPointToLayerPoint(Z),R=this._map.layerPointToLatLng(fe)),this._tooltip.setLatLng(R)}});var ru=_c.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(v){var R=v&&"DIV"===v.tagName?v:document.createElement("div"),Z=this.options;if(Z.html instanceof Element?(de(R),R.appendChild(Z.html)):R.innerHTML=!1!==Z.html?Z.html:"",Z.bgPos){var fe=Fn(Z.bgPos);R.style.backgroundPosition=-fe.x+"px "+-fe.y+"px"}return this._setIconStyles(R,"icon"),R},createShadow:function(){return null}});_c.Default=cl;var Ya=bl.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(v){gt(this,v)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(v){v._addZoomLimit(this)},onRemove:function(v){this._removeAllTiles(),ne(this._container),v._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(xe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Se(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(v){return this.options.opacity=v,this._updateOpacity(),this},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var v=this._clampZoom(this._map.getZoom());v!==this._tileZoom&&(this._tileZoom=v,this._updateLevels()),this._update()}return this},getEvents:function(){var v={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Be(this._onMoveEnd,this.options.updateInterval,this)),v.move=this._onMove),this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},createTile:function(){return document.createElement("div")},getTileSize:function(){var v=this.options.tileSize;return v instanceof nn?v:new nn(v,v)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(v){for(var rt,R=this.getPane().children,Z=-v(-1/0,1/0),fe=0,Ie=R.length;fe<Ie;fe++)rt=R[fe].style.zIndex,R[fe]!==this._container&&rt&&(Z=v(Z,+rt));isFinite(Z)&&(this.options.zIndex=Z+v(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ot.ielt9){we(this._container,this.options.opacity);var v=+new Date,R=!1,Z=!1;for(var fe in this._tiles){var Ie=this._tiles[fe];if(Ie.current&&Ie.loaded){var rt=Math.min(1,(v-Ie.loaded)/200);we(Ie.el,rt),rt<1?R=!0:(Ie.active?Z=!0:this._onOpaqueTile(Ie),Ie.active=!0)}}Z&&!this._noPrune&&this._pruneTiles(),R&&(Dt(this._fadeFrame),this._fadeFrame=hi(this._updateOpacity,this))}},_onOpaqueTile:$e,_initContainer:function(){this._container||(this._container=J("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var v=this._tileZoom,R=this.options.maxZoom;if(void 0!==v){for(var Z in this._levels)Z=Number(Z),this._levels[Z].el.children.length||Z===v?(this._levels[Z].el.style.zIndex=R-Math.abs(v-Z),this._onUpdateLevel(Z)):(ne(this._levels[Z].el),this._removeTilesAtZoom(Z),this._onRemoveLevel(Z),delete this._levels[Z]);var fe=this._levels[v],Ie=this._map;return fe||((fe=this._levels[v]={}).el=J("div","leaflet-tile-container leaflet-zoom-animated",this._container),fe.el.style.zIndex=R,fe.origin=Ie.project(Ie.unproject(Ie.getPixelOrigin()),v).round(),fe.zoom=v,this._setZoomTransform(fe,Ie.getCenter(),Ie.getZoom()),this._onCreateLevel(fe)),this._level=fe,fe}},_onUpdateLevel:$e,_onRemoveLevel:$e,_onCreateLevel:$e,_pruneTiles:function(){if(this._map){var v,R,Z=this._map.getZoom();if(Z>this.options.maxZoom||Z<this.options.minZoom)return void this._removeAllTiles();for(v in this._tiles)(R=this._tiles[v]).retain=R.current;for(v in this._tiles)if((R=this._tiles[v]).current&&!R.active){var fe=R.coords;this._retainParent(fe.x,fe.y,fe.z,fe.z-5)||this._retainChildren(fe.x,fe.y,fe.z,fe.z+2)}for(v in this._tiles)this._tiles[v].retain||this._removeTile(v)}},_removeTilesAtZoom:function(v){for(var R in this._tiles)this._tiles[R].coords.z===v&&this._removeTile(R)},_removeAllTiles:function(){for(var v in this._tiles)this._removeTile(v)},_invalidateAll:function(){for(var v in this._levels)ne(this._levels[v].el),this._onRemoveLevel(Number(v)),delete this._levels[v];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(v,R,Z,fe){var Ie=Math.floor(v/2),rt=Math.floor(R/2),ri=Z-1,Ai=new nn(+Ie,+rt);Ai.z=+ri;var ln=this._tileCoordsToKey(Ai),qn=this._tiles[ln];return qn&&qn.active?(qn.retain=!0,!0):(qn&&qn.loaded&&(qn.retain=!0),ri>fe&&this._retainParent(Ie,rt,ri,fe))},_retainChildren:function(v,R,Z,fe){for(var Ie=2*v;Ie<2*v+2;Ie++)for(var rt=2*R;rt<2*R+2;rt++){var ri=new nn(Ie,rt);ri.z=Z+1;var Ai=this._tileCoordsToKey(ri),ln=this._tiles[Ai];ln&&ln.active?ln.retain=!0:(ln&&ln.loaded&&(ln.retain=!0),Z+1<fe&&this._retainChildren(Ie,rt,Z+1,fe))}},_resetView:function(v){var R=v&&(v.pinch||v.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),R,R)},_animateZoom:function(v){this._setView(v.center,v.zoom,!0,v.noUpdate)},_clampZoom:function(v){var R=this.options;return void 0!==R.minNativeZoom&&v<R.minNativeZoom?R.minNativeZoom:void 0!==R.maxNativeZoom&&R.maxNativeZoom<v?R.maxNativeZoom:v},_setView:function(v,R,Z,fe){var Ie=Math.round(R);Ie=void 0!==this.options.maxZoom&&Ie>this.options.maxZoom||void 0!==this.options.minZoom&&Ie<this.options.minZoom?void 0:this._clampZoom(Ie),(!fe||this.options.updateWhenZooming&&Ie!==this._tileZoom)&&(this._tileZoom=Ie,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==Ie&&this._update(v),Z||this._pruneTiles(),this._noPrune=!!Z),this._setZoomTransforms(v,R)},_setZoomTransforms:function(v,R){for(var Z in this._levels)this._setZoomTransform(this._levels[Z],v,R)},_setZoomTransform:function(v,R,Z){var fe=this._map.getZoomScale(Z,v.zoom),Ie=v.origin.multiplyBy(fe).subtract(this._map._getNewPixelOrigin(R,Z)).round();ot.any3d?lt(v.el,Ie,fe):jt(v.el,Ie)},_resetGrid:function(){var v=this._map,R=v.options.crs,Z=this._tileSize=this.getTileSize(),fe=this._tileZoom,Ie=this._map.getPixelWorldBounds(this._tileZoom);Ie&&(this._globalTileRange=this._pxBoundsToTileRange(Ie)),this._wrapX=R.wrapLng&&!this.options.noWrap&&[Math.floor(v.project([0,R.wrapLng[0]],fe).x/Z.x),Math.ceil(v.project([0,R.wrapLng[1]],fe).x/Z.y)],this._wrapY=R.wrapLat&&!this.options.noWrap&&[Math.floor(v.project([R.wrapLat[0],0],fe).y/Z.x),Math.ceil(v.project([R.wrapLat[1],0],fe).y/Z.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(v){var R=this._map,Z=R._animatingZoom?Math.max(R._animateToZoom,R.getZoom()):R.getZoom(),fe=R.getZoomScale(Z,this._tileZoom),Ie=R.project(v,this._tileZoom).floor(),rt=R.getSize().divideBy(2*fe);return new mr(Ie.subtract(rt),Ie.add(rt))},_update:function(v){var R=this._map;if(R){var Z=this._clampZoom(R.getZoom());if(void 0===v&&(v=R.getCenter()),void 0!==this._tileZoom){var fe=this._getTiledPixelBounds(v),Ie=this._pxBoundsToTileRange(fe),rt=Ie.getCenter(),ri=[],Ai=this.options.keepBuffer,ln=new mr(Ie.getBottomLeft().subtract([Ai,-Ai]),Ie.getTopRight().add([Ai,-Ai]));if(!(isFinite(Ie.min.x)&&isFinite(Ie.min.y)&&isFinite(Ie.max.x)&&isFinite(Ie.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var qn in this._tiles){var Dr=this._tiles[qn].coords;(Dr.z!==this._tileZoom||!ln.contains(new nn(Dr.x,Dr.y)))&&(this._tiles[qn].current=!1)}if(Math.abs(Z-this._tileZoom)>1)return void this._setView(v,Z);for(var Qr=Ie.min.y;Qr<=Ie.max.y;Qr++)for(var Ps=Ie.min.x;Ps<=Ie.max.x;Ps++){var $s=new nn(Ps,Qr);if($s.z=this._tileZoom,this._isValidTile($s)){var uo=this._tiles[this._tileCoordsToKey($s)];uo?uo.current=!0:ri.push($s)}}if(ri.sort(function(ho,Cl){return ho.distanceTo(rt)-Cl.distanceTo(rt)}),0!==ri.length){this._loading||(this._loading=!0,this.fire("loading"));var vo=document.createDocumentFragment();for(Ps=0;Ps<ri.length;Ps++)this._addTile(ri[Ps],vo);this._level.el.appendChild(vo)}}}},_isValidTile:function(v){var R=this._map.options.crs;if(!R.infinite){var Z=this._globalTileRange;if(!R.wrapLng&&(v.x<Z.min.x||v.x>Z.max.x)||!R.wrapLat&&(v.y<Z.min.y||v.y>Z.max.y))return!1}if(!this.options.bounds)return!0;var fe=this._tileCoordsToBounds(v);return Si(this.options.bounds).overlaps(fe)},_keyToBounds:function(v){return this._tileCoordsToBounds(this._keyToTileCoords(v))},_tileCoordsToNwSe:function(v){var R=this._map,Z=this.getTileSize(),fe=v.scaleBy(Z),Ie=fe.add(Z);return[R.unproject(fe,v.z),R.unproject(Ie,v.z)]},_tileCoordsToBounds:function(v){var R=this._tileCoordsToNwSe(v),Z=new Nr(R[0],R[1]);return this.options.noWrap||(Z=this._map.wrapLatLngBounds(Z)),Z},_tileCoordsToKey:function(v){return v.x+":"+v.y+":"+v.z},_keyToTileCoords:function(v){var R=v.split(":"),Z=new nn(+R[0],+R[1]);return Z.z=+R[2],Z},_removeTile:function(v){var R=this._tiles[v];R&&(ne(R.el),delete this._tiles[v],this.fire("tileunload",{tile:R.el,coords:this._keyToTileCoords(v)}))},_initTile:function(v){Te(v,"leaflet-tile");var R=this.getTileSize();v.style.width=R.x+"px",v.style.height=R.y+"px",v.onselectstart=$e,v.onmousemove=$e,ot.ielt9&&this.options.opacity<1&&we(v,this.options.opacity)},_addTile:function(v,R){var Z=this._getTilePos(v),fe=this._tileCoordsToKey(v),Ie=this.createTile(this._wrapCoords(v),n(this._tileReady,this,v));this._initTile(Ie),this.createTile.length<2&&hi(n(this._tileReady,this,v,null,Ie)),jt(Ie,Z),this._tiles[fe]={el:Ie,coords:v,current:!0},R.appendChild(Ie),this.fire("tileloadstart",{tile:Ie,coords:v})},_tileReady:function(v,R,Z){R&&this.fire("tileerror",{error:R,tile:Z,coords:v});var fe=this._tileCoordsToKey(v);(Z=this._tiles[fe])&&(Z.loaded=+new Date,this._map._fadeAnimated?(we(Z.el,0),Dt(this._fadeFrame),this._fadeFrame=hi(this._updateOpacity,this)):(Z.active=!0,this._pruneTiles()),R||(Te(Z.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:Z.el,coords:v})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ot.ielt9||!this._map._fadeAnimated?hi(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(v){return v.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(v){var R=new nn(this._wrapX?Re(v.x,this._wrapX):v.x,this._wrapY?Re(v.y,this._wrapY):v.y);return R.z=v.z,R},_pxBoundsToTileRange:function(v){var R=this.getTileSize();return new mr(v.min.unscaleBy(R).floor(),v.max.unscaleBy(R).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var v in this._tiles)if(!this._tiles[v].loaded)return!1;return!0}});var ya=Ya.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(v,R){this._url=v,(R=gt(this,R)).detectRetina&&ot.retina&&R.maxZoom>0?(R.tileSize=Math.floor(R.tileSize/2),R.zoomReverse?(R.zoomOffset--,R.minZoom=Math.min(R.maxZoom,R.minZoom+1)):(R.zoomOffset++,R.maxZoom=Math.max(R.minZoom,R.maxZoom-1)),R.minZoom=Math.max(0,R.minZoom)):R.zoomReverse?R.minZoom=Math.min(R.maxZoom,R.minZoom):R.maxZoom=Math.max(R.minZoom,R.maxZoom),"string"==typeof R.subdomains&&(R.subdomains=R.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(v,R){return this._url===v&&void 0===R&&(R=!0),this._url=v,R||this.redraw(),this},createTile:function(v,R){var Z=document.createElement("img");return ls(Z,"load",n(this._tileOnLoad,this,R,Z)),ls(Z,"error",n(this._tileOnError,this,R,Z)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(Z.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(Z.referrerPolicy=this.options.referrerPolicy),Z.alt="",Z.src=this.getTileUrl(v),Z},getTileUrl:function(v){var R={r:ot.retina?"@2x":"",s:this._getSubdomain(v),x:v.x,y:v.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var Z=this._globalTileRange.max.y-v.y;this.options.tms&&(R.y=Z),R["-y"]=Z}return Tt(this._url,mt(R,this.options))},_tileOnLoad:function(v,R){ot.ielt9?setTimeout(n(v,this,null,R),0):v(null,R)},_tileOnError:function(v,R,Z){var fe=this.options.errorTileUrl;fe&&R.getAttribute("src")!==fe&&(R.src=fe),v(Z,R)},_onTileRemove:function(v){v.tile.onload=null},_getZoomForUrl:function(){var v=this._tileZoom;return this.options.zoomReverse&&(v=this.options.maxZoom-v),v+this.options.zoomOffset},_getSubdomain:function(v){var R=Math.abs(v.x+v.y)%this.options.subdomains.length;return this.options.subdomains[R]},_abortLoading:function(){var v,R;for(v in this._tiles)if(this._tiles[v].coords.z!==this._tileZoom&&((R=this._tiles[v].el).onload=$e,R.onerror=$e,!R.complete)){R.src=tt;var Z=this._tiles[v].coords;ne(R),delete this._tiles[v],this.fire("tileabort",{tile:R,coords:Z})}},_removeTile:function(v){var R=this._tiles[v];if(R)return R.el.setAttribute("src",tt),Ya.prototype._removeTile.call(this,v)},_tileReady:function(v,R,Z){if(this._map&&(!Z||Z.getAttribute("src")!==tt))return Ya.prototype._tileReady.call(this,v,R,Z)}});function su(v,R){return new ya(v,R)}var fl=ya.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(v,R){this._url=v;var Z=mt({},this.defaultWmsParams);for(var fe in R)fe in this.options||(Z[fe]=R[fe]);var Ie=(R=gt(this,R)).detectRetina&&ot.retina?2:1,rt=this.getTileSize();Z.width=rt.x*Ie,Z.height=rt.y*Ie,this.wmsParams=Z},onAdd:function(v){this._crs=this.options.crs||v.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,ya.prototype.onAdd.call(this,v)},getTileUrl:function(v){var R=this._tileCoordsToNwSe(v),Z=this._crs,fe=hr(Z.project(R[0]),Z.project(R[1])),Ie=fe.min,rt=fe.max,ri=(this._wmsVersion>=1.3&&this._crs===Rl?[Ie.y,Ie.x,rt.y,rt.x]:[Ie.x,Ie.y,rt.x,rt.y]).join(","),Ai=ya.prototype.getTileUrl.call(this,v);return Ai+Xt(this.wmsParams,Ai,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ri},setParams:function(v,R){return mt(this.wmsParams,v),R||this.redraw(),this}});ya.WMS=fl,su.wms=function Tu(v,R){return new fl(v,R)};var bc=bl.extend({options:{padding:.1},initialize:function(v){gt(this,v),He(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var v={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(v.zoomanim=this._onAnimZoom),v},_onAnimZoom:function(v){this._updateTransform(v.center,v.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(v,R){var Z=this._map.getZoomScale(R,this._zoom),fe=this._map.getSize().multiplyBy(.5+this.options.padding),Ie=this._map.project(this._center,R),rt=fe.multiplyBy(-Z).add(Ie).subtract(this._map._getNewPixelOrigin(v,R));ot.any3d?lt(this._container,rt,Z):jt(this._container,rt)},_reset:function(){for(var v in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[v]._reset()},_onZoomEnd:function(){for(var v in this._layers)this._layers[v]._project()},_updatePaths:function(){for(var v in this._layers)this._layers[v]._update()},_update:function(){var v=this.options.padding,R=this._map.getSize(),Z=this._map.containerPointToLayerPoint(R.multiplyBy(-v)).round();this._bounds=new mr(Z,Z.add(R.multiplyBy(1+2*v)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ca=bc.extend({options:{tolerance:0},getEvents:function(){var v=bc.prototype.getEvents.call(this);return v.viewprereset=this._onViewPreReset,v},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){bc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var v=this._container=document.createElement("canvas");ls(v,"mousemove",this._onMouseMove,this),ls(v,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ls(v,"mouseout",this._handleMouseOut,this),v._leaflet_disable_events=!0,this._ctx=v.getContext("2d")},_destroyContainer:function(){Dt(this._redrawRequest),delete this._ctx,ne(this._container),ss(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var R in this._redrawBounds=null,this._layers)this._layers[R]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){bc.prototype._update.call(this);var v=this._bounds,R=this._container,Z=v.getSize(),fe=ot.retina?2:1;jt(R,v.min),R.width=fe*Z.x,R.height=fe*Z.y,R.style.width=Z.x+"px",R.style.height=Z.y+"px",ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-v.min.x,-v.min.y),this.fire("update")}},_reset:function(){bc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(v){this._updateDashArray(v),this._layers[He(v)]=v;var R=v._order={layer:v,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=R),this._drawLast=R,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(v){this._requestRedraw(v)},_removePath:function(v){var R=v._order,Z=R.next,fe=R.prev;Z?Z.prev=fe:this._drawLast=fe,fe?fe.next=Z:this._drawFirst=Z,delete v._order,delete this._layers[He(v)],this._requestRedraw(v)},_updatePath:function(v){this._extendRedrawBounds(v),v._project(),v._update(),this._requestRedraw(v)},_updateStyle:function(v){this._updateDashArray(v),this._requestRedraw(v)},_updateDashArray:function(v){if("string"==typeof v.options.dashArray){var fe,Ie,R=v.options.dashArray.split(/[, ]+/),Z=[];for(Ie=0;Ie<R.length;Ie++){if(fe=Number(R[Ie]),isNaN(fe))return;Z.push(fe)}v.options._dashArray=Z}else v.options._dashArray=v.options.dashArray},_requestRedraw:function(v){this._map&&(this._extendRedrawBounds(v),this._redrawRequest=this._redrawRequest||hi(this._redraw,this))},_extendRedrawBounds:function(v){if(v._pxBounds){var R=(v.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new mr,this._redrawBounds.extend(v._pxBounds.min.subtract([R,R])),this._redrawBounds.extend(v._pxBounds.max.add([R,R]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var v=this._redrawBounds;if(v){var R=v.getSize();this._ctx.clearRect(v.min.x,v.min.y,R.x,R.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var v,R=this._redrawBounds;if(this._ctx.save(),R){var Z=R.getSize();this._ctx.beginPath(),this._ctx.rect(R.min.x,R.min.y,Z.x,Z.y),this._ctx.clip()}this._drawing=!0;for(var fe=this._drawFirst;fe;fe=fe.next)v=fe.layer,(!R||v._pxBounds&&v._pxBounds.intersects(R))&&v._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(v,R){if(this._drawing){var Z,fe,Ie,rt,ri=v._parts,Ai=ri.length,ln=this._ctx;if(Ai){for(ln.beginPath(),Z=0;Z<Ai;Z++){for(fe=0,Ie=ri[Z].length;fe<Ie;fe++)ln[fe?"lineTo":"moveTo"]((rt=ri[Z][fe]).x,rt.y);R&&ln.closePath()}this._fillStroke(ln,v)}}},_updateCircle:function(v){if(this._drawing&&!v._empty()){var R=v._point,Z=this._ctx,fe=Math.max(Math.round(v._radius),1),Ie=(Math.max(Math.round(v._radiusY),1)||fe)/fe;1!==Ie&&(Z.save(),Z.scale(1,Ie)),Z.beginPath(),Z.arc(R.x,R.y/Ie,fe,0,2*Math.PI,!1),1!==Ie&&Z.restore(),this._fillStroke(Z,v)}},_fillStroke:function(v,R){var Z=R.options;Z.fill&&(v.globalAlpha=Z.fillOpacity,v.fillStyle=Z.fillColor||Z.color,v.fill(Z.fillRule||"evenodd")),Z.stroke&&0!==Z.weight&&(v.setLineDash&&v.setLineDash(R.options&&R.options._dashArray||[]),v.globalAlpha=Z.opacity,v.lineWidth=Z.weight,v.strokeStyle=Z.color,v.lineCap=Z.lineCap,v.lineJoin=Z.lineJoin,v.stroke())},_onClick:function(v){for(var Z,fe,R=this._map.mouseEventToLayerPoint(v),Ie=this._drawFirst;Ie;Ie=Ie.next)(Z=Ie.layer).options.interactive&&Z._containsPoint(R)&&("click"!==v.type&&"preclick"!==v.type||!this._map._draggableMoved(Z))&&(fe=Z);this._fireEvent(!!fe&&[fe],v)},_onMouseMove:function(v){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var R=this._map.mouseEventToLayerPoint(v);this._handleMouseHover(v,R)}},_handleMouseOut:function(v){var R=this._hoveredLayer;R&&(Ne(this._container,"leaflet-interactive"),this._fireEvent([R],v,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(v,R){if(!this._mouseHoverThrottled){for(var Z,fe,Ie=this._drawFirst;Ie;Ie=Ie.next)(Z=Ie.layer).options.interactive&&Z._containsPoint(R)&&(fe=Z);fe!==this._hoveredLayer&&(this._handleMouseOut(v),fe&&(Te(this._container,"leaflet-interactive"),this._fireEvent([fe],v,"mouseover"),this._hoveredLayer=fe)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],v),this._mouseHoverThrottled=!0,setTimeout(n(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(v,R,Z){this._map._fireDOMEvent(R,Z||R.type,v)},_bringToFront:function(v){var R=v._order;if(R){var Z=R.next,fe=R.prev;if(!Z)return;Z.prev=fe,fe?fe.next=Z:Z&&(this._drawFirst=Z),R.prev=this._drawLast,this._drawLast.next=R,R.next=null,this._drawLast=R,this._requestRedraw(v)}},_bringToBack:function(v){var R=v._order;if(R){var Z=R.next,fe=R.prev;if(!fe)return;fe.next=Z,Z?Z.prev=fe:fe&&(this._drawLast=fe),R.prev=null,R.next=this._drawFirst,this._drawFirst.prev=R,this._drawFirst=R,this._requestRedraw(v)}}});function qu(v){return ot.canvas?new ca(v):null}var wc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(v){return document.createElement("<lvml:"+v+' class="lvml">')}}catch{}return function(v){return document.createElement("<"+v+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Qo={_initContainer:function(){this._container=J("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(bc.prototype._update.call(this),this.fire("update"))},_initPath:function(v){var R=v._container=wc("shape");Te(R,"leaflet-vml-shape "+(this.options.className||"")),R.coordsize="1 1",v._path=wc("path"),R.appendChild(v._path),this._updateStyle(v),this._layers[He(v)]=v},_addPath:function(v){var R=v._container;this._container.appendChild(R),v.options.interactive&&v.addInteractiveTarget(R)},_removePath:function(v){var R=v._container;ne(R),v.removeInteractiveTarget(R),delete this._layers[He(v)]},_updateStyle:function(v){var R=v._stroke,Z=v._fill,fe=v.options,Ie=v._container;Ie.stroked=!!fe.stroke,Ie.filled=!!fe.fill,fe.stroke?(R||(R=v._stroke=wc("stroke")),Ie.appendChild(R),R.weight=fe.weight+"px",R.color=fe.color,R.opacity=fe.opacity,R.dashStyle=fe.dashArray?Nt(fe.dashArray)?fe.dashArray.join(" "):fe.dashArray.replace(/( *, *)/g," "):"",R.endcap=fe.lineCap.replace("butt","flat"),R.joinstyle=fe.lineJoin):R&&(Ie.removeChild(R),v._stroke=null),fe.fill?(Z||(Z=v._fill=wc("fill")),Ie.appendChild(Z),Z.color=fe.fillColor||fe.color,Z.opacity=fe.fillOpacity):Z&&(Ie.removeChild(Z),v._fill=null)},_updateCircle:function(v){var R=v._point.round(),Z=Math.round(v._radius),fe=Math.round(v._radiusY||Z);this._setPath(v,v._empty()?"M0 0":"AL "+R.x+","+R.y+" "+Z+","+fe+" 0,23592600")},_setPath:function(v,R){v._path.v=R},_bringToFront:function(v){xe(v._container)},_bringToBack:function(v){Se(v._container)}},Cc=ot.vml?wc:Un,Bl=bc.extend({_initContainer:function(){this._container=Cc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Cc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),ss(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){bc.prototype._update.call(this);var v=this._bounds,R=v.getSize(),Z=this._container;(!this._svgSize||!this._svgSize.equals(R))&&(this._svgSize=R,Z.setAttribute("width",R.x),Z.setAttribute("height",R.y)),jt(Z,v.min),Z.setAttribute("viewBox",[v.min.x,v.min.y,R.x,R.y].join(" ")),this.fire("update")}},_initPath:function(v){var R=v._path=Cc("path");v.options.className&&Te(R,v.options.className),v.options.interactive&&Te(R,"leaflet-interactive"),this._updateStyle(v),this._layers[He(v)]=v},_addPath:function(v){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(v._path),v.addInteractiveTarget(v._path)},_removePath:function(v){ne(v._path),v.removeInteractiveTarget(v._path),delete this._layers[He(v)]},_updatePath:function(v){v._project(),v._update()},_updateStyle:function(v){var R=v._path,Z=v.options;R&&(Z.stroke?(R.setAttribute("stroke",Z.color),R.setAttribute("stroke-opacity",Z.opacity),R.setAttribute("stroke-width",Z.weight),R.setAttribute("stroke-linecap",Z.lineCap),R.setAttribute("stroke-linejoin",Z.lineJoin),Z.dashArray?R.setAttribute("stroke-dasharray",Z.dashArray):R.removeAttribute("stroke-dasharray"),Z.dashOffset?R.setAttribute("stroke-dashoffset",Z.dashOffset):R.removeAttribute("stroke-dashoffset")):R.setAttribute("stroke","none"),Z.fill?(R.setAttribute("fill",Z.fillColor||Z.color),R.setAttribute("fill-opacity",Z.fillOpacity),R.setAttribute("fill-rule",Z.fillRule||"evenodd")):R.setAttribute("fill","none"))},_updatePoly:function(v,R){this._setPath(v,cr(v._parts,R))},_updateCircle:function(v){var R=v._point,Z=Math.max(Math.round(v._radius),1),Ie="a"+Z+","+(Math.max(Math.round(v._radiusY),1)||Z)+" 0 1,0 ",rt=v._empty()?"M0 0":"M"+(R.x-Z)+","+R.y+Ie+2*Z+",0 "+Ie+2*-Z+",0 ";this._setPath(v,rt)},_setPath:function(v,R){v._path.setAttribute("d",R)},_bringToFront:function(v){xe(v._path)},_bringToBack:function(v){Se(v._path)}});function Su(v){return ot.svg||ot.vml?new Bl(v):null}ot.vml&&Bl.include(Qo),Ys.include({getRenderer:function(v){var R=v.options.renderer||this._getPaneRenderer(v.options.pane)||this.options.renderer||this._renderer;return R||(R=this._renderer=this._createRenderer()),this.hasLayer(R)||this.addLayer(R),R},_getPaneRenderer:function(v){if("overlayPane"===v||void 0===v)return!1;var R=this._paneRenderers[v];return void 0===R&&(R=this._createRenderer({pane:v}),this._paneRenderers[v]=R),R},_createRenderer:function(v){return this.options.preferCanvas&&qu(v)||Su(v)}});var Gc=ul.extend({initialize:function(v,R){ul.prototype.initialize.call(this,this._boundsToLatLngs(v),R)},setBounds:function(v){return this.setLatLngs(this._boundsToLatLngs(v))},_boundsToLatLngs:function(v){return[(v=Si(v)).getSouthWest(),v.getNorthWest(),v.getNorthEast(),v.getSouthEast()]}});Bl.create=Cc,Bl.pointsToPath=cr,Vo.geometryToLayer=Ma,Vo.coordsToLatLng=hl,Vo.coordsToLatLngs=oo,Vo.latLngToCoords=wd,Vo.latLngsToCoords=nu,Vo.getFeature=Jl,Vo.asFeature=Cu,Ys.mergeOptions({boxZoom:!0});var Ku=yl.extend({initialize:function(v){this._map=v,this._container=v._container,this._pane=v._panes.overlayPane,this._resetStateTimeout=0,v.on("unload",this._destroy,this)},addHooks:function(){ls(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ss(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(v){if(!v.shiftKey||1!==v.which&&1!==v.button)return!1;this._clearDeferredResetState(),this._resetState(),Di(),gr(),this._startPoint=this._map.mouseEventToContainerPoint(v),ls(document,{contextmenu:vl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(v){this._moved||(this._moved=!0,this._box=J("div","leaflet-zoom-box",this._container),Te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(v);var R=new mr(this._point,this._startPoint),Z=R.getSize();jt(this._box,R.min),this._box.style.width=Z.x+"px",this._box.style.height=Z.y+"px"},_finish:function(){this._moved&&(ne(this._box),Ne(this._container,"leaflet-crosshair")),Qi(),Zr(),ss(document,{contextmenu:vl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(v){if((1===v.which||1===v.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0);var R=new Nr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(R).fire("boxzoomend",{boxZoomBounds:R})}},_onKeyDown:function(v){27===v.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ys.addInitHook("addHandler","boxZoom",Ku),Ys.mergeOptions({doubleClickZoom:!0});var Au=yl.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(v){var R=this._map,Z=R.getZoom(),fe=R.options.zoomDelta,Ie=v.originalEvent.shiftKey?Z-fe:Z+fe;"center"===R.options.doubleClickZoom?R.setZoom(Ie):R.setZoomAround(v.containerPoint,Ie)}});Ys.addInitHook("addHandler","doubleClickZoom",Au),Ys.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ec=yl.extend({addHooks:function(){if(!this._draggable){var v=this._map;this._draggable=new xu(v._mapPane,v._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),v.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),v.on("zoomend",this._onZoomEnd,this),v.whenReady(this._onZoomEnd,this))}Te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ne(this._map._container,"leaflet-grab"),Ne(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var v=this._map;if(v._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var R=Si(this._map.options.maxBounds);this._offsetLimit=hr(this._map.latLngToContainerPoint(R.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(R.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;v.fire("movestart").fire("dragstart"),v.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(v){if(this._map.options.inertia){var R=this._lastTime=+new Date,Z=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(Z),this._times.push(R),this._prunePositions(R)}this._map.fire("move",v).fire("drag",v)},_prunePositions:function(v){for(;this._positions.length>1&&v-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var v=this._map.getSize().divideBy(2),R=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=R.subtract(v).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(v,R){return v-(v-R)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var v=this._draggable._newPos.subtract(this._draggable._startPos),R=this._offsetLimit;v.x<R.min.x&&(v.x=this._viscousLimit(v.x,R.min.x)),v.y<R.min.y&&(v.y=this._viscousLimit(v.y,R.min.y)),v.x>R.max.x&&(v.x=this._viscousLimit(v.x,R.max.x)),v.y>R.max.y&&(v.y=this._viscousLimit(v.y,R.max.y)),this._draggable._newPos=this._draggable._startPos.add(v)}},_onPreDragWrap:function(){var v=this._worldWidth,R=Math.round(v/2),Z=this._initialWorldOffset,fe=this._draggable._newPos.x,Ie=(fe-R+Z)%v+R-Z,rt=(fe+R+Z)%v-R-Z,ri=Math.abs(Ie+Z)<Math.abs(rt+Z)?Ie:rt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ri},_onDragEnd:function(v){var R=this._map,Z=R.options,fe=!Z.inertia||v.noInertia||this._times.length<2;if(R.fire("dragend",v),fe)R.fire("moveend");else{this._prunePositions(+new Date);var Ie=this._lastPos.subtract(this._positions[0]),ri=Z.easeLinearity,Ai=Ie.multiplyBy(ri/((this._lastTime-this._times[0])/1e3)),ln=Ai.distanceTo([0,0]),qn=Math.min(Z.inertiaMaxSpeed,ln),Dr=Ai.multiplyBy(qn/ln),Qr=qn/(Z.inertiaDeceleration*ri),Ps=Dr.multiplyBy(-Qr/2).round();Ps.x||Ps.y?(Ps=R._limitOffset(Ps,R.options.maxBounds),hi(function(){R.panBy(Ps,{duration:Qr,easeLinearity:ri,noMoveStart:!0,animate:!0})})):R.fire("moveend")}}});Ys.addInitHook("addHandler","dragging",Ec),Ys.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Hc=yl.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(v){this._map=v,this._setPanDelta(v.options.keyboardPanDelta),this._setZoomDelta(v.options.zoomDelta)},addHooks:function(){var v=this._map._container;v.tabIndex<=0&&(v.tabIndex="0"),ls(v,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ss(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var v=document.body,R=document.documentElement,Z=v.scrollTop||R.scrollTop,fe=v.scrollLeft||R.scrollLeft;this._map._container.focus(),window.scrollTo(fe,Z)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(v){var fe,Ie,R=this._panKeys={},Z=this.keyCodes;for(fe=0,Ie=Z.left.length;fe<Ie;fe++)R[Z.left[fe]]=[-1*v,0];for(fe=0,Ie=Z.right.length;fe<Ie;fe++)R[Z.right[fe]]=[v,0];for(fe=0,Ie=Z.down.length;fe<Ie;fe++)R[Z.down[fe]]=[0,v];for(fe=0,Ie=Z.up.length;fe<Ie;fe++)R[Z.up[fe]]=[0,-1*v]},_setZoomDelta:function(v){var fe,Ie,R=this._zoomKeys={},Z=this.keyCodes;for(fe=0,Ie=Z.zoomIn.length;fe<Ie;fe++)R[Z.zoomIn[fe]]=v;for(fe=0,Ie=Z.zoomOut.length;fe<Ie;fe++)R[Z.zoomOut[fe]]=-v},_addHooks:function(){ls(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ss(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(v){if(!(v.altKey||v.ctrlKey||v.metaKey)){var fe,R=v.keyCode,Z=this._map;if(R in this._panKeys){if(!Z._panAnim||!Z._panAnim._inProgress)if(fe=this._panKeys[R],v.shiftKey&&(fe=Fn(fe).multiplyBy(3)),Z.options.maxBounds&&(fe=Z._limitOffset(Fn(fe),Z.options.maxBounds)),Z.options.worldCopyJump){var Ie=Z.wrapLatLng(Z.unproject(Z.project(Z.getCenter()).add(fe)));Z.panTo(Ie)}else Z.panBy(fe)}else if(R in this._zoomKeys)Z.setZoom(Z.getZoom()+(v.shiftKey?3:1)*this._zoomKeys[R]);else{if(27!==R||!Z._popup||!Z._popup.options.closeOnEscapeKey)return;Z.closePopup()}vl(v)}}});Ys.addInitHook("addHandler","keyboard",Hc),Ys.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var au=yl.extend({addHooks:function(){ls(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ss(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(v){var R=Rh(v),Z=this._map.options.wheelDebounceTime;this._delta+=R,this._lastMousePos=this._map.mouseEventToContainerPoint(v),this._startTime||(this._startTime=+new Date);var fe=Math.max(Z-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),fe),vl(v)},_performZoom:function(){var v=this._map,R=v.getZoom(),Z=this._map.options.zoomSnap||0;v._stop();var Ie=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,rt=Z?Math.ceil(Ie/Z)*Z:Ie,ri=v._limitZoom(R+(this._delta>0?rt:-rt))-R;this._delta=0,this._startTime=null,ri&&("center"===v.options.scrollWheelZoom?v.setZoom(R+ri):v.setZoomAround(this._lastMousePos,R+ri))}});Ys.addInitHook("addHandler","scrollWheelZoom",au);Ys.mergeOptions({tapHold:ot.touchNative&&ot.safari&&ot.mobile,tapTolerance:15});var ou=yl.extend({addHooks:function(){ls(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ss(this._map._container,"touchstart",this._onDown,this)},_onDown:function(v){if(clearTimeout(this._holdTimeout),1===v.touches.length){var R=v.touches[0];this._startPos=this._newPos=new nn(R.clientX,R.clientY),this._holdTimeout=setTimeout(n(function(){this._cancel(),this._isTapValid()&&(ls(document,"touchend",Sa),ls(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",R))},this),600),ls(document,"touchend touchcancel contextmenu",this._cancel,this),ls(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function v(){ss(document,"touchend",Sa),ss(document,"touchend touchcancel",v)},_cancel:function(){clearTimeout(this._holdTimeout),ss(document,"touchend touchcancel contextmenu",this._cancel,this),ss(document,"touchmove",this._onMove,this)},_onMove:function(v){var R=v.touches[0];this._newPos=new nn(R.clientX,R.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(v,R){var Z=new MouseEvent(v,{bubbles:!0,cancelable:!0,view:window,screenX:R.screenX,screenY:R.screenY,clientX:R.clientX,clientY:R.clientY});Z._simulated=!0,R.target.dispatchEvent(Z)}});Ys.addInitHook("addHandler","tapHold",ou),Ys.mergeOptions({touchZoom:ot.touch,bounceAtZoomLimits:!0});var lo=yl.extend({addHooks:function(){Te(this._map._container,"leaflet-touch-zoom"),ls(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ne(this._map._container,"leaflet-touch-zoom"),ss(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(v){var R=this._map;if(v.touches&&2===v.touches.length&&!R._animatingZoom&&!this._zooming){var Z=R.mouseEventToContainerPoint(v.touches[0]),fe=R.mouseEventToContainerPoint(v.touches[1]);this._centerPoint=R.getSize()._divideBy(2),this._startLatLng=R.containerPointToLatLng(this._centerPoint),"center"!==R.options.touchZoom&&(this._pinchStartLatLng=R.containerPointToLatLng(Z.add(fe)._divideBy(2))),this._startDist=Z.distanceTo(fe),this._startZoom=R.getZoom(),this._moved=!1,this._zooming=!0,R._stop(),ls(document,"touchmove",this._onTouchMove,this),ls(document,"touchend touchcancel",this._onTouchEnd,this),Sa(v)}},_onTouchMove:function(v){if(v.touches&&2===v.touches.length&&this._zooming){var R=this._map,Z=R.mouseEventToContainerPoint(v.touches[0]),fe=R.mouseEventToContainerPoint(v.touches[1]),Ie=Z.distanceTo(fe)/this._startDist;if(this._zoom=R.getScaleZoom(Ie,this._startZoom),!R.options.bounceAtZoomLimits&&(this._zoom<R.getMinZoom()&&Ie<1||this._zoom>R.getMaxZoom()&&Ie>1)&&(this._zoom=R._limitZoom(this._zoom)),"center"===R.options.touchZoom){if(this._center=this._startLatLng,1===Ie)return}else{var rt=Z._add(fe)._divideBy(2)._subtract(this._centerPoint);if(1===Ie&&0===rt.x&&0===rt.y)return;this._center=R.unproject(R.project(this._pinchStartLatLng,this._zoom).subtract(rt),this._zoom)}this._moved||(R._moveStart(!0,!1),this._moved=!0),Dt(this._animRequest);var ri=n(R._move,R,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=hi(ri,this,!0),Sa(v)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,Dt(this._animRequest),ss(document,"touchmove",this._onTouchMove,this),ss(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ys.addInitHook("addHandler","touchZoom",lo),Ys.BoxZoom=Ku,Ys.DoubleClickZoom=Au,Ys.Drag=Ec,Ys.Keyboard=Hc,Ys.ScrollWheelZoom=au,Ys.TapHold=ou,Ys.TouchZoom=lo,Qt.Bounds=mr,Qt.Browser=ot,Qt.CRS=ts,Qt.Canvas=ca,Qt.Circle=Xu,Qt.CircleMarker=Pl,Qt.Class=Ri,Qt.Control=Ko,Qt.DivIcon=ru,Qt.DivOverlay=la,Qt.DomEvent=Ff,Qt.DomUtil=Ws,Qt.Draggable=xu,Qt.Evented=qi,Qt.FeatureGroup=Ho,Qt.GeoJSON=Vo,Qt.GridLayer=Ya,Qt.Handler=yl,Qt.Icon=_c,Qt.ImageOverlay=mn,Qt.LatLng=kn,Qt.LatLngBounds=Nr,Qt.Layer=bl,Qt.LayerGroup=iu,Qt.LineUtil=Aa,Qt.Map=Ys,Qt.Marker=zc,Qt.Mixin=ia,Qt.Path=Jo,Qt.Point=nn,Qt.PolyUtil=pr,Qt.Polygon=ul,Qt.Polyline=go,Qt.Popup=Fl,Qt.PosAnimation=Lh,Qt.Projection=Ml,Qt.Rectangle=Gc,Qt.Renderer=bc,Qt.SVG=Bl,Qt.SVGOverlay=_a,Qt.TileLayer=ya,Qt.Tooltip=dl,Qt.Transformation=Os,Qt.Util=yi,Qt.VideoOverlay=Mr,Qt.bind=n,Qt.bounds=hr,Qt.canvas=qu,Qt.circle=function zh(v,R,Z){return new Xu(v,R,Z)},Qt.circleMarker=function yc(v,R){return new Pl(v,R)},Qt.control=wa,Qt.divIcon=function xc(v){return new ru(v)},Qt.extend=mt,Qt.featureGroup=function(v,R){return new Ho(v,R)},Qt.geoJSON=Eu,Qt.geoJson=Li,Qt.gridLayer=function Uo(v){return new Ya(v)},Qt.icon=function wu(v){return new _c(v)},Qt.imageOverlay=function(v,R,Z){return new mn(v,R,Z)},Qt.latLng=Jn,Qt.latLngBounds=Si,Qt.layerGroup=function(v,R){return new iu(v,R)},Qt.map=function xd(v,R){return new Ys(v,R)},Qt.marker=function Nh(v,R){return new zc(v,R)},Qt.point=Fn,Qt.polygon=function Bf(v,R){return new ul(v,R)},Qt.polyline=function Yc(v,R){return new go(v,R)},Qt.popup=function(v,R){return new Fl(v,R)},Qt.rectangle=function Nl(v,R){return new Gc(v,R)},Qt.setOptions=gt,Qt.stamp=He,Qt.svg=Su,Qt.svgOverlay=function zo(v,R,Z){return new _a(v,R,Z)},Qt.tileLayer=su,Qt.tooltip=function(v,R){return new dl(v,R)},Qt.transformation=Cs,Qt.version="1.9.4",Qt.videoOverlay=function Ls(v,R,Z){return new Mr(v,R,Z)};var lr=window.L;Qt.noConflict=function(){return window.L=lr,this},window.L=Qt}(Hs)},4940:function(ao,Hs,Qt){var D;ao=Qt.nmd(ao),function(){var mt,He="Expected a function",Re="__lodash_hash_undefined__",it="__lodash_placeholder__",_n=1/0,Fn=9007199254740991,Nr=4294967295,Jn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ts="[object Arguments]",Xr="[object Array]",En="[object Boolean]",Os="[object Date]",Ts="[object Error]",Zn="[object Function]",Un="[object GeneratorFunction]",cr="[object Map]",zn="[object Number]",Vr="[object Object]",jn="[object Promise]",ur="[object RegExp]",xr="[object Set]",zs="[object String]",Vs="[object Symbol]",Ds="[object WeakMap]",wr="[object ArrayBuffer]",us="[object DataView]",Ks="[object Float32Array]",io="[object Float64Array]",as="[object Int8Array]",Rs="[object Int16Array]",Ss="[object Int32Array]",Bs="[object Uint8Array]",xa="[object Uint8ClampedArray]",Gt="[object Uint16Array]",Ue="[object Uint32Array]",Je=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,St=/(__e\(.*?\)|\b__t\)) \+\n'';/g,si=/&(?:amp|lt|gt|quot|#39);/g,wi=/[&<>"']/g,ki=RegExp(si.source),Mt=RegExp(wi.source),zi=/<%-([\s\S]+?)%>/g,Sn=/<%([\s\S]+?)%>/g,Rn=/<%=([\s\S]+?)%>/g,Hi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ar=/^\w*$/,Ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,dt=RegExp(Vt.source),ot=/^\s+/,Xe=/\s/,Qe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rt=/\{\n\/\* \[wrapped with (.+)\] \*/,ui=/,? & /,en=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ji=/[()=,{}\[\]\/\s]/,bn=/\\(\\)?/g,bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ft=/\w*$/,ke=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,We=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,l=/($^)/,u=/['\n\r\u2028\u2029\\]/g,p="\\ud800-\\udfff",M="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",B="\\u2700-\\u27bf",H="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="["+p+"]",U="["+Pe+"]",le="["+M+"]",we="\\d+",Le="["+B+"]",je="["+H+"]",lt="[^"+p+Pe+we+B+H+xe+"]",jt="\\ud83c[\\udffb-\\udfff]",Di="[^"+p+"]",Qi="(?:\\ud83c[\\udde6-\\uddff]){2}",cn="[\\ud800-\\udbff][\\udc00-\\udfff]",Qn="["+xe+"]",Zr="(?:"+je+"|"+lt+")",hs="(?:"+Qn+"|"+lt+")",vs="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",_s="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Js="(?:"+le+"|"+jt+")?",oa="["+Se+"]?",ka=oa+Js+"(?:\\u200d(?:"+[Di,Qi,cn].join("|")+")"+oa+Js+")*",ss="(?:"+[Le,Qi,cn].join("|")+")"+ka,Ta="(?:"+[Di+le+"?",le,Qi,cn,Ne].join("|")+")",dh=RegExp("['\u2019]","g"),Bc=RegExp(le,"g"),za=RegExp(jt+"(?="+jt+")|"+Ta+ka,"g"),fc=RegExp([Qn+"?"+je+"+"+vs+"(?="+[U,Qn,"$"].join("|")+")",hs+"+"+_s+"(?="+[U,Qn+Zr,"$"].join("|")+")",Qn+"?"+Zr+"+"+vs,Qn+"+"+_s,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",we,ss].join("|"),"g"),rd=RegExp("[\\u200d"+p+M+Se+"]"),Xl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vl=-1,Va={};Va[Ks]=Va[io]=Va[as]=Va[Rs]=Va[Ss]=Va[Bs]=Va[xa]=Va[Gt]=Va[Ue]=!0,Va[ts]=Va[Xr]=Va[wr]=Va[En]=Va[us]=Va[Os]=Va[Ts]=Va[Zn]=Va[cr]=Va[zn]=Va[Vr]=Va[ur]=Va[xr]=Va[zs]=Va[Ds]=!1;var ba={};ba[ts]=ba[Xr]=ba[wr]=ba[us]=ba[En]=ba[Os]=ba[Ks]=ba[io]=ba[as]=ba[Rs]=ba[Ss]=ba[cr]=ba[zn]=ba[Vr]=ba[ur]=ba[xr]=ba[zs]=ba[Vs]=ba[Bs]=ba[xa]=ba[Gt]=ba[Ue]=!0,ba[Ts]=ba[Zn]=ba[Ds]=!1;var Ff={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Lh=parseFloat,Ys=parseInt,xd="object"==typeof global&&global&&global.Object===Object&&global,Ko="object"==typeof self&&self&&self.Object===Object&&self,wa=xd||Ko||Function("return this")(),Ph=Hs&&!Hs.nodeType&&Hs,_l=Ph&&ao&&!ao.nodeType&&ao,Wu=_l&&_l.exports===Ph,$u=Wu&&xd.process,No=function(){try{return _l&&_l.require&&_l.require("util").types||$u&&$u.binding&&$u.binding("util")}catch{}}(),df=No&&No.isArrayBuffer,Fh=No&&No.isDate,pc=No&&No.isMap,fh=No&&No.isRegExp,yl=No&&No.isSet,ia=No&&No.isTypedArray;function Zl(Li,mn,un){switch(un.length){case 0:return Li.call(mn);case 1:return Li.call(mn,un[0]);case 2:return Li.call(mn,un[0],un[1]);case 3:return Li.call(mn,un[0],un[1],un[2])}return Li.apply(mn,un)}function xu(Li,mn,un,Mr){for(var Ls=-1,_a=null==Li?0:Li.length;++Ls<_a;){var zo=Li[Ls];mn(Mr,zo,un(zo),Li)}return Mr}function xl(Li,mn){for(var un=-1,Mr=null==Li?0:Li.length;++un<Mr&&!1!==mn(Li[un],un,Li););return Li}function bd(Li,mn){for(var un=null==Li?0:Li.length;un--&&!1!==mn(Li[un],un,Li););return Li}function sl(Li,mn){for(var un=-1,Mr=null==Li?0:Li.length;++un<Mr;)if(!mn(Li[un],un,Li))return!1;return!0}function pr(Li,mn){for(var un=-1,Mr=null==Li?0:Li.length,Ls=0,_a=[];++un<Mr;){var zo=Li[un];mn(zo,un,Li)&&(_a[Ls++]=zo)}return _a}function al(Li,mn){return!(null==Li||!Li.length)&&Ut(Li,mn,0)>-1}function ol(Li,mn,un){for(var Mr=-1,Ls=null==Li?0:Li.length;++Mr<Ls;)if(un(mn,Li[Mr]))return!0;return!1}function va(Li,mn){for(var un=-1,Mr=null==Li?0:Li.length,Ls=Array(Mr);++un<Mr;)Ls[un]=mn(Li[un],un,Li);return Ls}function po(Li,mn){for(var un=-1,Mr=mn.length,Ls=Li.length;++un<Mr;)Li[Ls+un]=mn[un];return Li}function ql(Li,mn,un,Mr){var Ls=-1,_a=null==Li?0:Li.length;for(Mr&&_a&&(un=Li[++Ls]);++Ls<_a;)un=mn(un,Li[Ls],Ls,Li);return un}function ph(Li,mn,un,Mr){var Ls=null==Li?0:Li.length;for(Mr&&Ls&&(un=Li[--Ls]);Ls--;)un=mn(un,Li[Ls],Ls,Li);return un}function Kl(Li,mn){for(var un=-1,Mr=null==Li?0:Li.length;++un<Mr;)if(mn(Li[un],un,Li))return!0;return!1}var tu=mh("length");function mc(Li,mn,un){var Mr;return un(Li,function(Ls,_a,zo){if(mn(Ls,_a,zo))return Mr=_a,!1}),Mr}function gc(Li,mn,un,Mr){for(var Ls=Li.length,_a=un+(Mr?1:-1);Mr?_a--:++_a<Ls;)if(mn(Li[_a],_a,Li))return _a;return-1}function Ut(Li,mn,un){return mn==mn?function Vo(Li,mn,un){for(var Mr=un-1,Ls=Li.length;++Mr<Ls;)if(Li[Mr]===mn)return Mr;return-1}(Li,mn,un):gc(Li,mo,un)}function Us(Li,mn,un,Mr){for(var Ls=un-1,_a=Li.length;++Ls<_a;)if(Mr(Li[Ls],mn))return Ls;return-1}function mo(Li){return Li!=Li}function Aa(Li,mn){var un=null==Li?0:Li.length;return un?Rl(Li,mn)/un:NaN}function mh(Li){return function(mn){return null==mn?mt:mn[Li]}}function bu(Li){return function(mn){return null==Li?mt:Li[mn]}}function Ml(Li,mn,un,Mr,Ls){return Ls(Li,function(_a,zo,la){un=Mr?(Mr=!1,_a):mn(un,_a,zo,la)}),un}function Rl(Li,mn){for(var un,Mr=-1,Ls=Li.length;++Mr<Ls;){var _a=mn(Li[Mr]);_a!==mt&&(un=un===mt?_a:un+_a)}return un}function ll(Li,mn){for(var un=-1,Mr=Array(Li);++un<Li;)Mr[un]=mn(un);return Mr}function iu(Li){return Li&&Li.slice(0,oo(Li)+1).replace(ot,"")}function Ll(Li){return function(mn){return Li(mn)}}function Ho(Li,mn){return va(mn,function(un){return Li[un]})}function vc(Li,mn){return Li.has(mn)}function _c(Li,mn){for(var un=-1,Mr=Li.length;++un<Mr&&Ut(mn,Li[un],0)>-1;);return un}function wu(Li,mn){for(var un=Li.length;un--&&Ut(mn,Li[un],0)>-1;);return un}var gh=bu({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),zc=bu({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nh(Li){return"\\"+Ff[Li]}function Pl(Li){return rd.test(Li)}function zh(Li){var mn=-1,un=Array(Li.size);return Li.forEach(function(Mr,Ls){un[++mn]=[Ls,Mr]}),un}function go(Li,mn){return function(un){return Li(mn(un))}}function Yc(Li,mn){for(var un=-1,Mr=Li.length,Ls=0,_a=[];++un<Mr;){var zo=Li[un];(zo===mn||zo===it)&&(Li[un]=it,_a[Ls++]=un)}return _a}function ul(Li){var mn=-1,un=Array(Li.size);return Li.forEach(function(Mr){un[++mn]=Mr}),un}function wl(Li){return Pl(Li)?function nu(Li){for(var mn=za.lastIndex=0;za.test(Li);)++mn;return mn}(Li):tu(Li)}function hl(Li){return Pl(Li)?function Jl(Li){return Li.match(za)||[]}(Li):function Bh(Li){return Li.split("")}(Li)}function oo(Li){for(var mn=Li.length;mn--&&Xe.test(Li.charAt(mn)););return mn}var wd=bu({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Eu=function Li(mn){var E,un=(mn=null==mn?wa:Eu.defaults(wa.Object(),mn,Eu.pick(wa,Sa))).Array,Mr=mn.Date,Ls=mn.Error,_a=mn.Function,zo=mn.Math,la=mn.Object,Fl=mn.RegExp,Yh=mn.String,dl=mn.TypeError,ku=un.prototype,xc=la.prototype,Ya=mn["__core-js_shared__"],Uo=_a.prototype.toString,ya=xc.hasOwnProperty,su=0,fl=(E=/[^.]+$/.exec(Ya&&Ya.keys&&Ya.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",Tu=xc.toString,bc=Uo.call(la),ca=wa._,qu=Fl("^"+Uo.call(ya).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wc=Wu?mn.Buffer:mt,Qo=mn.Symbol,Cc=mn.Uint8Array,Bl=wc?wc.allocUnsafe:mt,Su=go(la.getPrototypeOf,la),Gc=la.create,Nl=xc.propertyIsEnumerable,Ku=ku.splice,Au=Qo?Qo.isConcatSpreadable:mt,Ec=Qo?Qo.iterator:mt,Hc=Qo?Qo.toStringTag:mt,au=function(){try{var E=_f(la,"defineProperty");return E({},"",{}),E}catch{}}(),vh=mn.clearTimeout!==wa.clearTimeout&&mn.clearTimeout,ou=Mr&&Mr.now!==wa.Date.now&&Mr.now,lo=mn.setTimeout!==wa.setTimeout&&mn.setTimeout,lr=zo.ceil,v=zo.floor,R=la.getOwnPropertySymbols,Z=wc?wc.isBuffer:mt,fe=mn.isFinite,Ie=ku.join,rt=go(la.keys,la),ri=zo.max,Ai=zo.min,ln=Mr.now,qn=mn.parseInt,Dr=zo.random,Qr=ku.reverse,Ps=_f(mn,"DataView"),$s=_f(mn,"Map"),uo=_f(mn,"Promise"),vo=_f(mn,"Set"),ho=_f(mn,"WeakMap"),Cl=_f(la,"create"),Vc=ho&&new ho,Yo={},Cd=Xf(Ps),_h=Xf($s),Uc=Xf(uo),sd=Xf(vo),ze=Xf(ho),ae=Qo?Qo.prototype:mt,me=ae?ae.valueOf:mt,Ge=ae?ae.toString:mt;function Ee(E){if(ml(E)&&!Xs(E)&&!(E instanceof Or)){if(E instanceof ys)return E;if(ya.call(E,"__wrapped__"))return Ua(E)}return new ys(E)}var yn=function(){function E(){}return function(F){if(!Sl(F))return{};if(Gc)return Gc(F);E.prototype=F;var ee=new E;return E.prototype=mt,ee}}();function Tr(){}function ys(E,F){this.__wrapped__=E,this.__actions__=[],this.__chain__=!!F,this.__index__=0,this.__values__=mt}function Or(E){this.__wrapped__=E,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nr,this.__views__=[]}function yh(E){var F=-1,ee=null==E?0:E.length;for(this.clear();++F<ee;){var Ce=E[F];this.set(Ce[0],Ce[1])}}function zl(E){var F=-1,ee=null==E?0:E.length;for(this.clear();++F<ee;){var Ce=E[F];this.set(Ce[0],Ce[1])}}function xh(E){var F=-1,ee=null==E?0:E.length;for(this.clear();++F<ee;){var Ce=E[F];this.set(Ce[0],Ce[1])}}function kd(E){var F=-1,ee=null==E?0:E.length;for(this.__data__=new xh;++F<ee;)this.add(E[F])}function lu(E){var F=this.__data__=new zl(E);this.size=F.size}function mf(E,F){var ee=Xs(E),Ce=!ee&&kf(E),qe=!ee&&!Ce&&Tp(E),Ct=!ee&&!Ce&&!qe&&lm(E),oi=ee||Ce||qe||Ct,xi=oi?ll(E.length,Yh):[],Gi=xi.length;for(var Xn in E)(F||ya.call(E,Xn))&&(!oi||!("length"==Xn||qe&&("offset"==Xn||"parent"==Xn)||Ct&&("buffer"==Xn||"byteLength"==Xn||"byteOffset"==Xn)||du(Xn,Gi)))&&xi.push(Xn);return xi}function k(E){var F=E.length;return F?E[Td(0,F-1)]:mt}function d(E,F){return kg(kc(E),Fe(F,0,E.length))}function _(E){return kg(kc(E))}function I(E,F,ee){(ee!==mt&&!Dh(E[F],ee)||ee===mt&&!(F in E))&&be(E,F,ee)}function Y(E,F,ee){var Ce=E[F];(!ya.call(E,F)||!Dh(Ce,ee)||ee===mt&&!(F in E))&&be(E,F,ee)}function V(E,F){for(var ee=E.length;ee--;)if(Dh(E[ee][0],F))return ee;return-1}function Q(E,F,ee,Ce){return Ye(E,function(qe,Ct,oi){F(Ce,qe,ee(qe),oi)}),Ce}function re(E,F){return E&&Do(F,Mc(F),E)}function be(E,F,ee){"__proto__"==F&&au?au(E,F,{configurable:!0,enumerable:!0,value:ee,writable:!0}):E[F]=ee}function ye(E,F){for(var ee=-1,Ce=F.length,qe=un(Ce),Ct=null==E;++ee<Ce;)qe[ee]=Ct?mt:ig(E,F[ee]);return qe}function Fe(E,F,ee){return E==E&&(ee!==mt&&(E=E<=ee?E:ee),F!==mt&&(E=E>=F?E:F)),E}function et(E,F,ee,Ce,qe,Ct){var oi,xi=1&F,Gi=2&F,Xn=4&F;if(ee&&(oi=qe?ee(E,Ce,qe,Ct):ee(E)),oi!==mt)return oi;if(!Sl(E))return E;var $n=Xs(E);if($n){if(oi=function yf(E){var F=E.length,ee=new E.constructor(F);return F&&"string"==typeof E[0]&&ya.call(E,"index")&&(ee.index=E.index,ee.input=E.input),ee}(E),!xi)return kc(E,oi)}else{var or=kl(E),$r=or==Zn||or==Un;if(Tp(E))return l0(E,xi);if(or==Vr||or==ts||$r&&!qe){if(oi=Gi||$r?{}:qp(E),!xi)return Gi?function Hf(E,F){return Do(E,nc(E),F)}(E,function ue(E,F){return E&&Do(F,fu(F),E)}(oi,E)):function ld(E,F){return Do(E,Zp(E),F)}(E,re(oi,E))}else{if(!ba[or])return qe?E:{};oi=function $c(E,F,ee){var Ce=E.constructor;switch(F){case wr:return Ru(E);case En:case Os:return new Ce(+E);case us:return function Yf(E,F){var ee=F?Ru(E.buffer):E.buffer;return new E.constructor(ee,E.byteOffset,E.byteLength)}(E,ee);case Ks:case io:case as:case Rs:case Ss:case Bs:case xa:case Gt:case Ue:return Yr(E,ee);case cr:return new Ce;case zn:case zs:return new Ce(E);case ur:return function Gf(E){var F=new E.constructor(E.source,Ft.exec(E));return F.lastIndex=E.lastIndex,F}(E);case xr:return new Ce;case Vs:return function Ao(E){return me?la(me.call(E)):{}}(E)}}(E,or,xi)}}Ct||(Ct=new lu);var fs=Ct.get(E);if(fs)return fs;Ct.set(E,oi),Lg(E)?E.forEach(function(Ns){oi.add(et(Ns,F,ee,Ns,E,Ct))}):G0(E)&&E.forEach(function(Ns,fa){oi.set(fa,et(Ns,F,ee,fa,E,Ct))});var ma=$n?mt:(Xn?Gi?Tc:Rm:Gi?fu:Mc)(E);return xl(ma||E,function(Ns,fa){ma&&(Ns=E[fa=Ns]),Y(oi,fa,et(Ns,F,ee,fa,E,Ct))}),oi}function ft(E,F,ee){var Ce=ee.length;if(null==E)return!Ce;for(E=la(E);Ce--;){var qe=ee[Ce],oi=E[qe];if(oi===mt&&!(qe in E)||!(0,F[qe])(oi))return!1}return!0}function vt(E,F,ee){if("function"!=typeof E)throw new dl(He);return pl(function(){E.apply(mt,ee)},F)}function wt(E,F,ee,Ce){var qe=-1,Ct=al,oi=!0,xi=E.length,Gi=[],Xn=F.length;if(!xi)return Gi;ee&&(F=va(F,Ll(ee))),Ce?(Ct=ol,oi=!1):F.length>=200&&(Ct=vc,oi=!1,F=new kd(F));e:for(;++qe<xi;){var $n=E[qe],or=null==ee?$n:ee($n);if($n=Ce||0!==$n?$n:0,oi&&or==or){for(var $r=Xn;$r--;)if(F[$r]===or)continue e;Gi.push($n)}else Ct(F,or,Ce)||Gi.push($n)}return Gi}Ee.templateSettings={escape:zi,evaluate:Sn,interpolate:Rn,variable:"",imports:{_:Ee}},(Ee.prototype=Tr.prototype).constructor=Ee,(ys.prototype=yn(Tr.prototype)).constructor=ys,(Or.prototype=yn(Tr.prototype)).constructor=Or,yh.prototype.clear=function _v(){this.__data__=Cl?Cl(null):{},this.size=0},yh.prototype.delete=function Sm(E){var F=this.has(E)&&delete this.__data__[E];return this.size-=F?1:0,F},yh.prototype.get=function Ju(E){var F=this.__data__;if(Cl){var ee=F[E];return ee===Re?mt:ee}return ya.call(F,E)?F[E]:mt},yh.prototype.has=function fg(E){var F=this.__data__;return Cl?F[E]!==mt:ya.call(F,E)},yh.prototype.set=function Du(E,F){var ee=this.__data__;return this.size+=this.has(E)?0:1,ee[E]=Cl&&F===mt?Re:F,this},zl.prototype.clear=function Iu(){this.__data__=[],this.size=0},zl.prototype.delete=function ff(E){var F=this.__data__,ee=V(F,E);return!(ee<0||(ee==F.length-1?F.pop():Ku.call(F,ee,1),--this.size,0))},zl.prototype.get=function Ql(E){var F=this.__data__,ee=V(F,E);return ee<0?mt:F[ee][1]},zl.prototype.has=function kr(E){return V(this.__data__,E)>-1},zl.prototype.set=function ec(E,F){var ee=this.__data__,Ce=V(ee,E);return Ce<0?(++this.size,ee.push([E,F])):ee[Ce][1]=F,this},xh.prototype.clear=function pf(){this.size=0,this.__data__={hash:new yh,map:new($s||zl),string:new yh}},xh.prototype.delete=function Nf(E){var F=Lm(this,E).delete(E);return this.size-=F?1:0,F},xh.prototype.get=function fr(E){return Lm(this,E).get(E)},xh.prototype.has=function Ed(E){return Lm(this,E).has(E)},xh.prototype.set=function r0(E,F){var ee=Lm(this,E),Ce=ee.size;return ee.set(E,F),this.size+=ee.size==Ce?0:1,this},kd.prototype.add=kd.prototype.push=function Gp(E){return this.__data__.set(E,Re),this},kd.prototype.has=function ad(E){return this.__data__.has(E)},lu.prototype.clear=function s0(){this.__data__=new zl,this.size=0},lu.prototype.delete=function Mu(E){var F=this.__data__,ee=F.delete(E);return this.size=F.size,ee},lu.prototype.get=function Hp(E){return this.__data__.get(E)},lu.prototype.has=function Am(E){return this.__data__.has(E)},lu.prototype.set=function pg(E,F){var ee=this.__data__;if(ee instanceof zl){var Ce=ee.__data__;if(!$s||Ce.length<199)return Ce.push([E,F]),this.size=++ee.size,this;ee=this.__data__=new xh(Ce)}return ee.set(E,F),this.size=ee.size,this};var Ye=_g(Yi),ht=_g(Gn,!0);function zt(E,F){var ee=!0;return Ye(E,function(Ce,qe,Ct){return ee=!!F(Ce,qe,Ct)}),ee}function xt(E,F,ee){for(var Ce=-1,qe=E.length;++Ce<qe;){var Ct=E[Ce],oi=F(Ct);if(null!=oi&&(xi===mt?oi==oi&&!pd(oi):ee(oi,xi)))var xi=oi,Gi=Ct}return Gi}function pi(E,F){var ee=[];return Ye(E,function(Ce,qe,Ct){F(Ce,qe,Ct)&&ee.push(Ce)}),ee}function ai(E,F,ee,Ce,qe){var Ct=-1,oi=E.length;for(ee||(ee=__),qe||(qe=[]);++Ct<oi;){var xi=E[Ct];F>0&&ee(xi)?F>1?ai(xi,F-1,ee,Ce,qe):po(qe,xi):Ce||(qe[qe.length]=xi)}return qe}var Ii=Im(),Ei=Im(!0);function Yi(E,F){return E&&Ii(E,F,Mc)}function Gn(E,F){return E&&Ei(E,F,Mc)}function Ni(E,F){return pr(F,function(ee){return Jf(E[ee])})}function dn(E,F){for(var ee=0,Ce=(F=zf(F,E)).length;null!=E&&ee<Ce;)E=E[Zc(F[ee++])];return ee&&ee==Ce?E:mt}function Vi(E,F,ee){var Ce=F(E);return Xs(E)?Ce:po(Ce,ee(E))}function Dn(E){return null==E?E===mt?"[object Undefined]":"[object Null]":Hc&&Hc in la(E)?function Fd(E){var F=ya.call(E,Hc),ee=E[Hc];try{E[Hc]=mt;var Ce=!0}catch{}var qe=Tu.call(E);return Ce&&(F?E[Hc]=ee:delete E[Hc]),qe}(E):function Bm(E){return Tu.call(E)}(E)}function Wi(E,F){return E>F}function on(E,F){return null!=E&&ya.call(E,F)}function Wn(E,F){return null!=E&&F in la(E)}function Hn(E,F,ee){for(var Ce=ee?ol:al,qe=E[0].length,Ct=E.length,oi=Ct,xi=un(Ct),Gi=1/0,Xn=[];oi--;){var $n=E[oi];oi&&F&&($n=va($n,Ll(F))),Gi=Ai($n.length,Gi),xi[oi]=!ee&&(F||qe>=120&&$n.length>=120)?new kd(oi&&$n):mt}$n=E[0];var or=-1,$r=xi[0];e:for(;++or<qe&&Xn.length<Gi;){var fs=$n[or],Is=F?F(fs):fs;if(fs=ee||0!==fs?fs:0,!($r?vc($r,Is):Ce(Xn,Is,ee))){for(oi=Ct;--oi;){var ma=xi[oi];if(!(ma?vc(ma,Is):Ce(E[oi],Is,ee)))continue e}$r&&$r.push(Is),Xn.push(fs)}}return Xn}function ms(E,F,ee){var Ce=null==(E=mp(E,F=zf(F,E)))?E:E[Zc(Ic(F))];return null==Ce?mt:Zl(Ce,E,ee)}function Sr(E){return ml(E)&&Dn(E)==ts}function cs(E,F,ee,Ce,qe){return E===F||(null==E||null==F||!ml(E)&&!ml(F)?E!=E&&F!=F:function zr(E,F,ee,Ce,qe,Ct){var oi=Xs(E),xi=Xs(F),Gi=oi?Xr:kl(E),Xn=xi?Xr:kl(F),$n=(Gi=Gi==ts?Vr:Gi)==Vr,or=(Xn=Xn==ts?Vr:Xn)==Vr,$r=Gi==Xn;if($r&&Tp(E)){if(!Tp(F))return!1;oi=!0,$n=!1}if($r&&!$n)return Ct||(Ct=new lu),oi||lm(E)?Om(E,F,ee,Ce,qe,Ct):function bg(E,F,ee,Ce,qe,Ct,oi){switch(ee){case us:if(E.byteLength!=F.byteLength||E.byteOffset!=F.byteOffset)return!1;E=E.buffer,F=F.buffer;case wr:return!(E.byteLength!=F.byteLength||!Ct(new Cc(E),new Cc(F)));case En:case Os:case zn:return Dh(+E,+F);case Ts:return E.name==F.name&&E.message==F.message;case ur:case zs:return E==F+"";case cr:var xi=zh;case xr:if(xi||(xi=ul),E.size!=F.size&&!(1&Ce))return!1;var Xn=oi.get(E);if(Xn)return Xn==F;Ce|=2,oi.set(E,F);var $n=Om(xi(E),xi(F),Ce,qe,Ct,oi);return oi.delete(E),$n;case Vs:if(me)return me.call(E)==me.call(F)}return!1}(E,F,Gi,ee,Ce,qe,Ct);if(!(1&ee)){var fs=$n&&ya.call(E,"__wrapped__"),Is=or&&ya.call(F,"__wrapped__");if(fs||Is){var ma=fs?E.value():E,Ns=Is?F.value():F;return Ct||(Ct=new lu),qe(ma,Ns,ee,Ce,Ct)}}return!!$r&&(Ct||(Ct=new lu),function Uf(E,F,ee,Ce,qe,Ct){var oi=1&ee,xi=Rm(E),Gi=xi.length;if(Gi!=Rm(F).length&&!oi)return!1;for(var or=Gi;or--;){var $r=xi[or];if(!(oi?$r in F:ya.call(F,$r)))return!1}var fs=Ct.get(E),Is=Ct.get(F);if(fs&&Is)return fs==F&&Is==E;var ma=!0;Ct.set(E,F),Ct.set(F,E);for(var Ns=oi;++or<Gi;){var fa=E[$r=xi[or]],Ga=F[$r];if(Ce)var qh=oi?Ce(Ga,fa,$r,F,E,Ct):Ce(fa,Ga,$r,E,F,Ct);if(!(qh===mt?fa===Ga||qe(fa,Ga,ee,Ce,Ct):qh)){ma=!1;break}Ns||(Ns="constructor"==$r)}if(ma&&!Ns){var th=E.constructor,ih=F.constructor;th!=ih&&"constructor"in E&&"constructor"in F&&!("function"==typeof th&&th instanceof th&&"function"==typeof ih&&ih instanceof ih)&&(ma=!1)}return Ct.delete(E),Ct.delete(F),ma}(E,F,ee,Ce,qe,Ct))}(E,F,ee,Ce,cs,qe))}function Za(E,F,ee,Ce){var qe=ee.length,Ct=qe,oi=!Ce;if(null==E)return!Ct;for(E=la(E);qe--;){var xi=ee[qe];if(oi&&xi[2]?xi[1]!==E[xi[0]]:!(xi[0]in E))return!1}for(;++qe<Ct;){var Gi=(xi=ee[qe])[0],Xn=E[Gi],$n=xi[1];if(oi&&xi[2]){if(Xn===mt&&!(Gi in E))return!1}else{var or=new lu;if(Ce)var $r=Ce(Xn,$n,Gi,E,F,or);if(!($r===mt?cs($n,Xn,3,Ce,or):$r))return!1}}return!0}function eo(E){return!(!Sl(E)||function fp(E){return!!fl&&fl in E}(E))&&(Jf(E)?qu:Wt).test(Xf(E))}function ua(E){return"function"==typeof E?E:null==E?Gu:"object"==typeof E?Xs(E)?Wc(E[0],E[1]):ro(E):J0(E)}function bh(E){if(!pp(E))return rt(E);var F=[];for(var ee in la(E))ya.call(E,ee)&&"constructor"!=ee&&F.push(ee);return F}function Ca(E,F){return E<F}function Da(E,F){var ee=-1,Ce=zu(E)?un(E.length):[];return Ye(E,function(qe,Ct,oi){Ce[++ee]=F(qe,Ct,oi)}),Ce}function ro(E){var F=jf(E);return 1==F.length&&F[0][2]?Kp(F[0][0],F[0][1]):function(ee){return ee===E||Za(ee,E,F)}}function Wc(E,F){return Pm(E)&&wv(F)?Kp(Zc(E),F):function(ee){var Ce=ig(ee,E);return Ce===mt&&Ce===F?eh(ee,E):cs(F,Ce,3)}}function to(E,F,ee,Ce,qe){E!==F&&Ii(F,function(Ct,oi){if(qe||(qe=new lu),Sl(Ct))!function cu(E,F,ee,Ce,qe,Ct,oi){var xi=Jp(E,ee),Gi=Jp(F,ee),Xn=oi.get(Gi);if(Xn)I(E,ee,Xn);else{var $n=Ct?Ct(xi,Gi,ee+"",E,F,oi):mt,or=$n===mt;if(or){var $r=Xs(Gi),fs=!$r&&Tp(Gi),Is=!$r&&!fs&&lm(Gi);$n=Gi,$r||fs||Is?Xs(xi)?$n=xi:Hl(xi)?$n=kc(xi):fs?(or=!1,$n=l0(Gi,!0)):Is?(or=!1,$n=Yr(Gi,!0)):$n=[]:Qf(Gi)||kf(Gi)?($n=xi,kf(xi)?$n=Fy(xi):(!Sl(xi)||Jf(xi))&&($n=qp(Gi))):or=!1}or&&(oi.set(Gi,$n),qe($n,Gi,Ce,Ct,oi),oi.delete(Gi)),I(E,ee,$n)}}(E,F,oi,ee,to,Ce,qe);else{var xi=Ce?Ce(Jp(E,oi),Ct,oi+"",E,F,qe):mt;xi===mt&&(xi=Ct),I(E,oi,xi)}},fu)}function uu(E,F){var ee=E.length;if(ee)return du(F+=F<0?ee:0,ee)?E[F]:mt}function To(E,F,ee){F=F.length?va(F,function(Ct){return Xs(Ct)?function(oi){return dn(oi,1===Ct.length?Ct[0]:Ct)}:Ct}):[Gu];var Ce=-1;return F=va(F,Ll(As())),function Ol(Li,mn){var un=Li.length;for(Li.sort(mn);un--;)Li[un]=Li[un].value;return Li}(Da(E,function(Ct,oi,xi){return{criteria:va(F,function(Xn){return Xn(Ct)}),index:++Ce,value:Ct}}),function(Ct,oi){return function Md(E,F,ee){for(var Ce=-1,qe=E.criteria,Ct=F.criteria,oi=qe.length,xi=ee.length;++Ce<oi;){var Gi=Vh(qe[Ce],Ct[Ce]);if(Gi)return Ce>=xi?Gi:Gi*("desc"==ee[Ce]?-1:1)}return E.index-F.index}(Ct,oi,ee)})}function tc(E,F,ee){for(var Ce=-1,qe=F.length,Ct={};++Ce<qe;){var oi=F[Ce],xi=dn(E,oi);ee(xi,oi)&&gf(Ct,zf(oi,E),xi)}return Ct}function Ou(E,F,ee,Ce){var qe=Ce?Us:Ut,Ct=-1,oi=F.length,xi=E;for(E===F&&(F=kc(F)),ee&&(xi=va(E,Ll(ee)));++Ct<oi;)for(var Gi=0,Xn=F[Ct],$n=ee?ee(Xn):Xn;(Gi=qe(xi,$n,Gi,Ce))>-1;)xi!==E&&Ku.call(xi,Gi,1),Ku.call(E,Gi,1);return E}function lp(E,F){for(var ee=E?F.length:0,Ce=ee-1;ee--;){var qe=F[ee];if(ee==Ce||qe!==Ct){var Ct=qe;du(qe)?Ku.call(E,qe,1):cp(E,qe)}}return E}function Td(E,F){return E+v(Dr()*(F-E+1))}function Ur(E,F){var ee="";if(!E||F<1||F>Fn)return ee;do{F%2&&(ee+=E),(F=v(F/2))&&(E+=E)}while(F);return ee}function ha(E,F){return Qp(Nm(E,F,Gu),E+"")}function Ey(E){return k(cm(E))}function yv(E,F){var ee=cm(E);return kg(ee,Fe(F,0,ee.length))}function gf(E,F,ee,Ce){if(!Sl(E))return E;for(var qe=-1,Ct=(F=zf(F,E)).length,oi=Ct-1,xi=E;null!=xi&&++qe<Ct;){var Gi=Zc(F[qe]),Xn=ee;if("__proto__"===Gi||"constructor"===Gi||"prototype"===Gi)return E;if(qe!=oi){var $n=xi[Gi];(Xn=Ce?Ce($n,Gi,xi):mt)===mt&&(Xn=Sl($n)?$n:du(F[qe+1])?[]:{})}Y(xi,Gi,Xn),xi=xi[Gi]}return E}var Vp=Vc?function(E,F){return Vc.set(E,F),E}:Gu,Up=au?function(E,F){return au(E,"toString",{configurable:!0,enumerable:!1,value:dm(F),writable:!0})}:Gu;function mg(E){return kg(cm(E))}function Yl(E,F,ee){var Ce=-1,qe=E.length;F<0&&(F=-F>qe?0:qe+F),(ee=ee>qe?qe:ee)<0&&(ee+=qe),qe=F>ee?0:ee-F>>>0,F>>>=0;for(var Ct=un(qe);++Ce<qe;)Ct[Ce]=E[Ce+F];return Ct}function gg(E,F){var ee;return Ye(E,function(Ce,qe,Ct){return!(ee=F(Ce,qe,Ct))}),!!ee}function Dm(E,F,ee){var Ce=0,qe=null==E?Ce:E.length;if("number"==typeof F&&F==F&&qe<=2147483647){for(;Ce<qe;){var Ct=Ce+qe>>>1,oi=E[Ct];null!==oi&&!pd(oi)&&(ee?oi<=F:oi<F)?Ce=Ct+1:qe=Ct}return qe}return vg(E,F,Gu,ee)}function vg(E,F,ee,Ce){var qe=0,Ct=null==E?0:E.length;if(0===Ct)return 0;for(var oi=(F=ee(F))!=F,xi=null===F,Gi=pd(F),Xn=F===mt;qe<Ct;){var $n=v((qe+Ct)/2),or=ee(E[$n]),$r=or!==mt,fs=null===or,Is=or==or,ma=pd(or);if(oi)var Ns=Ce||Is;else Ns=Xn?Is&&(Ce||$r):xi?Is&&$r&&(Ce||!fs):Gi?Is&&$r&&!fs&&(Ce||!ma):!fs&&!ma&&(Ce?or<=F:or<F);Ns?qe=$n+1:Ct=$n}return Ai(Ct,4294967294)}function a0(E,F){for(var ee=-1,Ce=E.length,qe=0,Ct=[];++ee<Ce;){var oi=E[ee],xi=F?F(oi):oi;if(!ee||!Dh(xi,Gi)){var Gi=xi;Ct[qe++]=0===oi?0:oi}}return Ct}function xv(E){return"number"==typeof E?E:pd(E)?NaN:+E}function Ch(E){if("string"==typeof E)return E;if(Xs(E))return va(E,Ch)+"";if(pd(E))return Ge?Ge.call(E):"";var F=E+"";return"0"==F&&1/E==-_n?"-0":F}function Ad(E,F,ee){var Ce=-1,qe=al,Ct=E.length,oi=!0,xi=[],Gi=xi;if(ee)oi=!1,qe=ol;else if(Ct>=200){var Xn=F?null:Xo(E);if(Xn)return ul(Xn);oi=!1,qe=vc,Gi=new kd}else Gi=F?[]:xi;e:for(;++Ce<Ct;){var $n=E[Ce],or=F?F($n):$n;if($n=ee||0!==$n?$n:0,oi&&or==or){for(var $r=Gi.length;$r--;)if(Gi[$r]===or)continue e;F&&Gi.push(or),xi.push($n)}else qe(Gi,or,ee)||(Gi!==xi&&Gi.push(or),xi.push($n))}return xi}function cp(E,F){return null==(E=mp(E,F=zf(F,E)))||delete E[Zc(Ic(F))]}function up(E,F,ee,Ce){return gf(E,F,ee(dn(E,F)),Ce)}function Hh(E,F,ee,Ce){for(var qe=E.length,Ct=Ce?qe:-1;(Ce?Ct--:++Ct<qe)&&F(E[Ct],Ct,E););return ee?Yl(E,Ce?0:Ct,Ce?Ct+1:qe):Yl(E,Ce?Ct+1:0,Ce?qe:Ct)}function Gl(E,F){var ee=E;return ee instanceof Or&&(ee=ee.value()),ql(F,function(Ce,qe){return qe.func.apply(qe.thisArg,po([Ce],qe.args))},ee)}function Dd(E,F,ee){var Ce=E.length;if(Ce<2)return Ce?Ad(E[0]):[];for(var qe=-1,Ct=un(Ce);++qe<Ce;)for(var oi=E[qe],xi=-1;++xi<Ce;)xi!=qe&&(Ct[qe]=wt(Ct[qe]||oi,E[xi],F,ee));return Ad(ai(Ct,1),F,ee)}function Id(E,F,ee){for(var Ce=-1,qe=E.length,Ct=F.length,oi={};++Ce<qe;)ee(oi,E[Ce],Ce<Ct?F[Ce]:mt);return oi}function Eh(E){return Hl(E)?E:[]}function o0(E){return"function"==typeof E?E:Gu}function zf(E,F){return Xs(E)?E:Pm(E,F)?[E]:f0(yo(E))}var So=ha;function od(E,F,ee){var Ce=E.length;return ee=ee===mt?Ce:ee,!F&&ee>=Ce?E:Yl(E,F,ee)}var kh=vh||function(E){return wa.clearTimeout(E)};function l0(E,F){if(F)return E.slice();var ee=E.length,Ce=Bl?Bl(ee):new E.constructor(ee);return E.copy(Ce),Ce}function Ru(E){var F=new E.constructor(E.byteLength);return new Cc(F).set(new Cc(E)),F}function Yr(E,F){var ee=F?Ru(E.buffer):E.buffer;return new E.constructor(ee,E.byteOffset,E.length)}function Vh(E,F){if(E!==F){var ee=E!==mt,Ce=null===E,qe=E==E,Ct=pd(E),oi=F!==mt,xi=null===F,Gi=F==F,Xn=pd(F);if(!xi&&!Xn&&!Ct&&E>F||Ct&&oi&&Gi&&!xi&&!Xn||Ce&&oi&&Gi||!ee&&Gi||!qe)return 1;if(!Ce&&!Ct&&!Xn&&E<F||Xn&&ee&&qe&&!Ce&&!Ct||xi&&ee&&qe||!oi&&qe||!Gi)return-1}return 0}function tn(E,F,ee,Ce){for(var qe=-1,Ct=E.length,oi=ee.length,xi=-1,Gi=F.length,Xn=ri(Ct-oi,0),$n=un(Gi+Xn),or=!Ce;++xi<Gi;)$n[xi]=F[xi];for(;++qe<oi;)(or||qe<Ct)&&($n[ee[qe]]=E[qe]);for(;Xn--;)$n[xi++]=E[qe++];return $n}function hp(E,F,ee,Ce){for(var qe=-1,Ct=E.length,oi=-1,xi=ee.length,Gi=-1,Xn=F.length,$n=ri(Ct-xi,0),or=un($n+Xn),$r=!Ce;++qe<$n;)or[qe]=E[qe];for(var fs=qe;++Gi<Xn;)or[fs+Gi]=F[Gi];for(;++oi<xi;)($r||qe<Ct)&&(or[fs+ee[oi]]=E[qe++]);return or}function kc(E,F){var ee=-1,Ce=E.length;for(F||(F=un(Ce));++ee<Ce;)F[ee]=E[ee];return F}function Do(E,F,ee,Ce){var qe=!ee;ee||(ee={});for(var Ct=-1,oi=F.length;++Ct<oi;){var xi=F[Ct],Gi=Ce?Ce(ee[xi],E[xi],xi,ee,E):mt;Gi===mt&&(Gi=E[xi]),qe?be(ee,xi,Gi):Y(ee,xi,Gi)}return ee}function cd(E,F){return function(ee,Ce){var qe=Xs(ee)?xu:Q,Ct=F?F():{};return qe(ee,E,As(Ce,2),Ct)}}function $o(E){return ha(function(F,ee){var Ce=-1,qe=ee.length,Ct=qe>1?ee[qe-1]:mt,oi=qe>2?ee[2]:mt;for(Ct=E.length>3&&"function"==typeof Ct?(qe--,Ct):mt,oi&&Xc(ee[0],ee[1],oi)&&(Ct=qe<3?mt:Ct,qe=1),F=la(F);++Ce<qe;){var xi=ee[Ce];xi&&E(F,xi,Ce,Ct)}return F})}function _g(E,F){return function(ee,Ce){if(null==ee)return ee;if(!zu(ee))return E(ee,Ce);for(var qe=ee.length,Ct=F?qe:-1,oi=la(ee);(F?Ct--:++Ct<qe)&&!1!==Ce(oi[Ct],Ct,oi););return ee}}function Im(E){return function(F,ee,Ce){for(var qe=-1,Ct=la(F),oi=Ce(F),xi=oi.length;xi--;){var Gi=oi[E?xi:++qe];if(!1===ee(Ct[Gi],Gi,Ct))break}return F}}function jp(E){return function(F){var ee=Pl(F=yo(F))?hl(F):mt,Ce=ee?ee[0]:F.charAt(0),qe=ee?od(ee,1).join(""):F.slice(1);return Ce[E]()+qe}}function Wp(E){return function(F){return ql(H_(ng(F).replace(dh,"")),E,"")}}function Vf(E){return function(){var F=arguments;switch(F.length){case 0:return new E;case 1:return new E(F[0]);case 2:return new E(F[0],F[1]);case 3:return new E(F[0],F[1],F[2]);case 4:return new E(F[0],F[1],F[2],F[3]);case 5:return new E(F[0],F[1],F[2],F[3],F[4]);case 6:return new E(F[0],F[1],F[2],F[3],F[4],F[5]);case 7:return new E(F[0],F[1],F[2],F[3],F[4],F[5],F[6])}var ee=yn(E.prototype),Ce=E.apply(ee,F);return Sl(Ce)?Ce:ee}}function dp(E){return function(F,ee,Ce){var qe=la(F);if(!zu(F)){var Ct=As(ee,3);F=Mc(F),ee=function(xi){return Ct(qe[xi],xi,qe)}}var oi=E(F,ee,Ce);return oi>-1?qe[Ct?F[oi]:oi]:mt}}function Od(E){return Ld(function(F){var ee=F.length,Ce=ee,qe=ys.prototype.thru;for(E&&F.reverse();Ce--;){var Ct=F[Ce];if("function"!=typeof Ct)throw new dl(He);if(qe&&!oi&&"wrapper"==Cg(Ct))var oi=new ys([],!0)}for(Ce=oi?Ce:ee;++Ce<ee;){var xi=Cg(Ct=F[Ce]),Gi="wrapper"==xi?wg(Ct):mt;oi=Gi&&Sc(Gi[0])&&424==Gi[1]&&!Gi[4].length&&1==Gi[9]?oi[Cg(Gi[0])].apply(oi,Gi[3]):1==Ct.length&&Sc(Ct)?oi[xi]():oi.thru(Ct)}return function(){var Xn=arguments,$n=Xn[0];if(oi&&1==Xn.length&&Xs($n))return oi.plant($n).value();for(var or=0,$r=ee?F[or].apply(this,Xn):$n;++or<ee;)$r=F[or].call(this,$r);return $r}})}function Uh(E,F,ee,Ce,qe,Ct,oi,xi,Gi,Xn){var $n=128&F,or=1&F,$r=2&F,fs=24&F,Is=512&F,ma=$r?mt:Vf(E);return function Ns(){for(var fa=arguments.length,Ga=un(fa),qh=fa;qh--;)Ga[qh]=arguments[qh];if(fs)var th=Pd(Ns),ih=function cl(Li,mn){for(var un=Li.length,Mr=0;un--;)Li[un]===mn&&++Mr;return Mr}(Ga,th);if(Ce&&(Ga=tn(Ga,Ce,qe,fs)),Ct&&(Ga=hp(Ga,Ct,oi,fs)),fa-=ih,fs&&fa<Xn){var rc=Yc(Ga,th);return Pu(E,F,Uh,Ns.placeholder,ee,Ga,rc,xi,Gi,Xn-fa)}var nh=or?ee:this,Sf=$r?nh[E]:E;return fa=Ga.length,xi?Ga=function gp(E,F){for(var ee=E.length,Ce=Ai(F.length,ee),qe=kc(E);Ce--;){var Ct=F[Ce];E[Ce]=du(Ct,ee)?qe[Ct]:mt}return E}(Ga,xi):Is&&fa>1&&Ga.reverse(),$n&&Gi<fa&&(Ga.length=Gi),this&&this!==wa&&this instanceof Ns&&(Sf=ma||Vf(Sf)),Sf.apply(nh,Ga)}}function $p(E,F){return function(ee,Ce){return function Rr(E,F,ee,Ce){return Yi(E,function(qe,Ct,oi){F(Ce,ee(qe),Ct,oi)}),Ce}(ee,E,F(Ce),{})}}function Mm(E,F){return function(ee,Ce){var qe;if(ee===mt&&Ce===mt)return F;if(ee!==mt&&(qe=ee),Ce!==mt){if(qe===mt)return Ce;"string"==typeof ee||"string"==typeof Ce?(ee=Ch(ee),Ce=Ch(Ce)):(ee=xv(ee),Ce=xv(Ce)),qe=E(ee,Ce)}return qe}}function ic(E){return Ld(function(F){return F=va(F,Ll(As())),ha(function(ee){var Ce=this;return E(F,function(qe){return Zl(qe,Ce,ee)})})})}function Lu(E,F){var ee=(F=F===mt?" ":Ch(F)).length;if(ee<2)return ee?Ur(F,E):F;var Ce=Ur(F,lr(E/wl(F)));return Pl(F)?od(hl(Ce),0,E).join(""):Ce.slice(0,E)}function Rd(E){return function(F,ee,Ce){return Ce&&"number"!=typeof Ce&&Xc(F,ee,Ce)&&(ee=Ce=mt),F=Yu(F),ee===mt?(ee=F,F=0):ee=Yu(ee),function Sd(E,F,ee,Ce){for(var qe=-1,Ct=ri(lr((F-E)/(ee||1)),0),oi=un(Ct);Ct--;)oi[Ce?Ct:++qe]=E,E+=ee;return oi}(F,ee,Ce=Ce===mt?F<ee?1:-1:Yu(Ce),E)}}function El(E){return function(F,ee){return"string"==typeof F&&"string"==typeof ee||(F=Ud(F),ee=Ud(ee)),E(F,ee)}}function Pu(E,F,ee,Ce,qe,Ct,oi,xi,Gi,Xn){var $n=8&F;F|=$n?32:64,4&(F&=~($n?64:32))||(F&=-4);var ma=[E,F,qe,$n?Ct:mt,$n?oi:mt,$n?mt:Ct,$n?mt:oi,xi,Gi,Xn],Ns=ee.apply(mt,ma);return Sc(E)&&h0(Ns,ma),Ns.placeholder=Ce,vp(Ns,E,F)}function Th(E){var F=zo[E];return function(ee,Ce){if(ee=Ud(ee),(Ce=null==Ce?0:Ai(na(Ce),292))&&fe(ee)){var qe=(yo(ee)+"e").split("e");return+((qe=(yo(F(qe[0]+"e"+(+qe[1]+Ce)))+"e").split("e"))[0]+"e"+(+qe[1]-Ce))}return F(ee)}}var Xo=vo&&1/ul(new vo([,-0]))[1]==_n?function(E){return new vo(E)}:Hv;function Xp(E){return function(F){var ee=kl(F);return ee==cr?zh(F):ee==xr?function Bf(Li){var mn=-1,un=Array(Li.size);return Li.forEach(function(Mr){un[++mn]=[Mr,Mr]}),un}(F):function bl(Li,mn){return va(mn,function(un){return[un,Li[un]]})}(F,E(F))}}function da(E,F,ee,Ce,qe,Ct,oi,xi){var Gi=2&F;if(!Gi&&"function"!=typeof E)throw new dl(He);var Xn=Ce?Ce.length:0;if(Xn||(F&=-97,Ce=qe=mt),oi=oi===mt?oi:ri(na(oi),0),xi=xi===mt?xi:na(xi),Xn-=qe?qe.length:0,64&F){var $n=Ce,or=qe;Ce=qe=mt}var $r=Gi?mt:wg(E),fs=[E,F,ee,Ce,qe,$n,or,Ct,oi,xi];if($r&&function Wf(E,F){var ee=E[1],Ce=F[1],qe=ee|Ce;if(!(qe<131)&&!(128==Ce&&8==ee||128==Ce&&256==ee&&E[7].length<=F[8]||384==Ce&&F[7].length<=F[8]&&8==ee))return E;1&Ce&&(E[2]=F[2],qe|=1&ee?0:4);var xi=F[3];if(xi){var Gi=E[3];E[3]=Gi?tn(Gi,xi,F[4]):xi,E[4]=Gi?Yc(E[3],it):F[4]}(xi=F[5])&&(E[5]=(Gi=E[5])?hp(Gi,xi,F[6]):xi,E[6]=Gi?Yc(E[5],it):F[6]),(xi=F[7])&&(E[7]=xi),128&Ce&&(E[8]=null==E[8]?F[8]:Ai(E[8],F[8])),null==E[9]&&(E[9]=F[9]),E[0]=F[0],E[1]=qe}(fs,$r),E=fs[0],F=fs[1],ee=fs[2],Ce=fs[3],qe=fs[4],!(xi=fs[9]=fs[9]===mt?Gi?0:E.length:ri(fs[9]-Xn,0))&&24&F&&(F&=-25),F&&1!=F)Is=8==F||16==F?function xg(E,F,ee){var Ce=Vf(E);return function qe(){for(var Ct=arguments.length,oi=un(Ct),xi=Ct,Gi=Pd(qe);xi--;)oi[xi]=arguments[xi];var Xn=Ct<3&&oi[0]!==Gi&&oi[Ct-1]!==Gi?[]:Yc(oi,Gi);return(Ct-=Xn.length)<ee?Pu(E,F,Uh,qe.placeholder,mt,oi,Xn,mt,mt,ee-Ct):Zl(this&&this!==wa&&this instanceof qe?Ce:E,this,oi)}}(E,F,xi):32!=F&&33!=F||qe.length?Uh.apply(mt,fs):function hu(E,F,ee,Ce){var qe=1&F,Ct=Vf(E);return function oi(){for(var xi=-1,Gi=arguments.length,Xn=-1,$n=Ce.length,or=un($n+Gi),$r=this&&this!==wa&&this instanceof oi?Ct:E;++Xn<$n;)or[Xn]=Ce[Xn];for(;Gi--;)or[Xn++]=arguments[++xi];return Zl($r,qe?ee:this,or)}}(E,F,ee,Ce);else var Is=function yg(E,F,ee){var Ce=1&F,qe=Vf(E);return function Ct(){return(this&&this!==wa&&this instanceof Ct?qe:E).apply(Ce?ee:this,arguments)}}(E,F,ee);return vp(($r?Vp:h0)(Is,fs),E,F)}function jh(E,F,ee,Ce){return E===mt||Dh(E,xc[ee])&&!ya.call(Ce,ee)?F:E}function bv(E,F,ee,Ce,qe,Ct){return Sl(E)&&Sl(F)&&(Ct.set(F,E),to(E,F,mt,bv,Ct),Ct.delete(F)),E}function vf(E){return Qf(E)?mt:E}function Om(E,F,ee,Ce,qe,Ct){var oi=1&ee,xi=E.length,Gi=F.length;if(xi!=Gi&&!(oi&&Gi>xi))return!1;var Xn=Ct.get(E),$n=Ct.get(F);if(Xn&&$n)return Xn==F&&$n==E;var or=-1,$r=!0,fs=2&ee?new kd:mt;for(Ct.set(E,F),Ct.set(F,E);++or<xi;){var Is=E[or],ma=F[or];if(Ce)var Ns=oi?Ce(ma,Is,or,F,E,Ct):Ce(Is,ma,or,E,F,Ct);if(Ns!==mt){if(Ns)continue;$r=!1;break}if(fs){if(!Kl(F,function(fa,Ga){if(!vc(fs,Ga)&&(Is===fa||qe(Is,fa,ee,Ce,Ct)))return fs.push(Ga)})){$r=!1;break}}else if(Is!==ma&&!qe(Is,ma,ee,Ce,Ct)){$r=!1;break}}return Ct.delete(E),Ct.delete(F),$r}function Ld(E){return Qp(Nm(E,mt,Ev),E+"")}function Rm(E){return Vi(E,Mc,Zp)}function Tc(E){return Vi(E,fu,nc)}var wg=Vc?function(E){return Vc.get(E)}:Hv;function Cg(E){for(var F=E.name+"",ee=Yo[F],Ce=ya.call(Yo,F)?ee.length:0;Ce--;){var qe=ee[Ce],Ct=qe.func;if(null==Ct||Ct==E)return qe.name}return F}function Pd(E){return(ya.call(Ee,"placeholder")?Ee:E).placeholder}function As(){var E=Ee.iteratee||V_;return E=E===V_?ua:E,arguments.length?E(arguments[0],arguments[1]):E}function Lm(E,F){var ee=E.__data__;return function u0(E){var F=typeof E;return"string"==F||"number"==F||"symbol"==F||"boolean"==F?"__proto__"!==E:null===E}(F)?ee["string"==typeof F?"string":"hash"]:ee.map}function jf(E){for(var F=Mc(E),ee=F.length;ee--;){var Ce=F[ee],qe=E[Ce];F[ee]=[Ce,qe,wv(qe)]}return F}function _f(E,F){var ee=function Jo(Li,mn){return null==Li?mt:Li[mn]}(E,F);return eo(ee)?ee:mt}var Zp=R?function(E){return null==E?[]:(E=la(E),pr(R(E),function(F){return Nl.call(E,F)}))}:Ug,nc=R?function(E){for(var F=[];E;)po(F,Zp(E)),E=Su(E);return F}:Ug,kl=Dn;function c0(E,F,ee){for(var Ce=-1,qe=(F=zf(F,E)).length,Ct=!1;++Ce<qe;){var oi=Zc(F[Ce]);if(!(Ct=null!=E&&ee(E,oi)))break;E=E[oi]}return Ct||++Ce!=qe?Ct:!!(qe=null==E?0:E.length)&&Rv(qe)&&du(oi,qe)&&(Xs(E)||kf(E))}function qp(E){return"function"!=typeof E.constructor||pp(E)?{}:yn(Su(E))}function __(E){return Xs(E)||kf(E)||!!(Au&&E&&E[Au])}function du(E,F){var ee=typeof E;return!!(F=F??Fn)&&("number"==ee||"symbol"!=ee&&Jt.test(E))&&E>-1&&E%1==0&&E<F}function Xc(E,F,ee){if(!Sl(ee))return!1;var Ce=typeof F;return!!("number"==Ce?zu(ee)&&du(F,ee.length):"string"==Ce&&F in ee)&&Dh(ee[F],E)}function Pm(E,F){if(Xs(E))return!1;var ee=typeof E;return!("number"!=ee&&"symbol"!=ee&&"boolean"!=ee&&null!=E&&!pd(E))||ar.test(E)||!Hi.test(E)||null!=F&&E in la(F)}function Sc(E){var F=Cg(E),ee=Ee[F];if("function"!=typeof ee||!(F in Or.prototype))return!1;if(E===ee)return!0;var Ce=wg(ee);return!!Ce&&E===Ce[0]}(Ps&&kl(new Ps(new ArrayBuffer(1)))!=us||$s&&kl(new $s)!=cr||uo&&kl(uo.resolve())!=jn||vo&&kl(new vo)!=xr||ho&&kl(new ho)!=Ds)&&(kl=function(E){var F=Dn(E),ee=F==Vr?E.constructor:mt,Ce=ee?Xf(ee):"";if(Ce)switch(Ce){case Cd:return us;case _h:return cr;case Uc:return jn;case sd:return xr;case ze:return Ds}return F});var Fm=Ya?Jf:jg;function pp(E){var F=E&&E.constructor;return E===("function"==typeof F&&F.prototype||xc)}function wv(E){return E==E&&!Sl(E)}function Kp(E,F){return function(ee){return null!=ee&&ee[E]===F&&(F!==mt||E in la(ee))}}function Nm(E,F,ee){return F=ri(F===mt?E.length-1:F,0),function(){for(var Ce=arguments,qe=-1,Ct=ri(Ce.length-F,0),oi=un(Ct);++qe<Ct;)oi[qe]=Ce[F+qe];qe=-1;for(var xi=un(F+1);++qe<F;)xi[qe]=Ce[qe];return xi[F]=ee(oi),Zl(E,this,xi)}}function mp(E,F){return F.length<2?E:dn(E,Yl(F,0,-1))}function Jp(E,F){if(("constructor"!==F||"function"!=typeof E[F])&&"__proto__"!=F)return E[F]}var h0=d0(Vp),pl=lo||function(E,F){return wa.setTimeout(E,F)},Qp=d0(Up);function vp(E,F,ee){var Ce=F+"";return Qp(E,function Wh(E,F){var ee=F.length;if(!ee)return E;var Ce=ee-1;return F[Ce]=(ee>1?"& ":"")+F[Ce],F=F.join(ee>2?", ":" "),E.replace(Qe,"{\n/* [wrapped with "+F+"] */\n")}(Ce,function ud(E,F){return xl(Jn,function(ee){var Ce="_."+ee[0];F&ee[1]&&!al(E,Ce)&&E.push(Ce)}),E.sort()}(function Nd(E){var F=E.match(Rt);return F?F[1].split(ui):[]}(Ce),ee)))}function d0(E){var F=0,ee=0;return function(){var Ce=ln(),qe=16-(Ce-ee);if(ee=Ce,qe>0){if(++F>=800)return arguments[0]}else F=0;return E.apply(mt,arguments)}}function kg(E,F){var ee=-1,Ce=E.length,qe=Ce-1;for(F=F===mt?Ce:F;++ee<F;){var Ct=Td(ee,qe),oi=E[Ct];E[Ct]=E[ee],E[ee]=oi}return E.length=F,E}var f0=function Eg(E){var F=sn(E,function(Ce){return 500===ee.size&&ee.clear(),Ce}),ee=F.cache;return F}(function(E){var F=[];return 46===E.charCodeAt(0)&&F.push(""),E.replace(Ht,function(ee,Ce,qe,Ct){F.push(qe?Ct.replace(bn,"$1"):Ce||ee)}),F});function Zc(E){if("string"==typeof E||pd(E))return E;var F=E+"";return"0"==F&&1/E==-_n?"-0":F}function Xf(E){if(null!=E){try{return Uo.call(E)}catch{}try{return E+""}catch{}}return""}function Ua(E){if(E instanceof Or)return E.clone();var F=new ys(E.__wrapped__,E.__chain__);return F.__actions__=kc(E.__actions__),F.__index__=E.__index__,F.__values__=E.__values__,F}var $h=ha(function(E,F){return Hl(E)?wt(E,ai(F,1,Hl,!0)):[]}),Sh=ha(function(E,F){var ee=Ic(F);return Hl(ee)&&(ee=mt),Hl(E)?wt(E,ai(F,1,Hl,!0),As(ee,2)):[]}),Ac=ha(function(E,F){var ee=Ic(F);return Hl(ee)&&(ee=mt),Hl(E)?wt(E,ai(F,1,Hl,!0),mt,ee):[]});function Tg(E,F,ee){var Ce=null==E?0:E.length;if(!Ce)return-1;var qe=null==ee?0:na(ee);return qe<0&&(qe=ri(Ce+qe,0)),gc(E,As(F,3),qe)}function zm(E,F,ee){var Ce=null==E?0:E.length;if(!Ce)return-1;var qe=Ce-1;return ee!==mt&&(qe=na(ee),qe=ee<0?ri(Ce+qe,0):Ai(qe,Ce-1)),gc(E,As(F,3),qe,!0)}function Ev(E){return null!=E&&E.length?ai(E,1):[]}function xf(E){return E&&E.length?E[0]:mt}var Hm=ha(function(E){var F=va(E,Eh);return F.length&&F[0]===E[0]?Hn(F):[]}),Vm=ha(function(E){var F=Ic(E),ee=va(E,Eh);return F===Ic(ee)?F=mt:ee.pop(),ee.length&&ee[0]===E[0]?Hn(ee,As(F,2)):[]}),Tl=ha(function(E){var F=Ic(E),ee=va(E,Eh);return(F="function"==typeof F?F:mt)&&ee.pop(),ee.length&&ee[0]===E[0]?Hn(ee,mt,F):[]});function Ic(E){var F=null==E?0:E.length;return F?E[F-1]:mt}var ky=ha(bf);function bf(E,F){return E&&E.length&&F&&F.length?Ou(E,F):E}var Ah=Ld(function(E,F){var ee=null==E?0:E.length,Ce=ye(E,F);return lp(E,va(F,function(qe){return du(qe,ee)?+qe:qe}).sort(Vh)),Ce});function yp(E){return null==E?E:Qr.call(E)}var k0=ha(function(E){return Ad(ai(E,1,Hl,!0))}),Cf=ha(function(E){var F=Ic(E);return Hl(F)&&(F=mt),Ad(ai(E,1,Hl,!0),As(F,2))}),Bu=ha(function(E){var F=Ic(E);return F="function"==typeof F?F:mt,Ad(ai(E,1,Hl,!0),mt,F)});function Um(E){if(!E||!E.length)return[];var F=0;return E=pr(E,function(ee){if(Hl(ee))return F=ri(ee.length,F),!0}),ll(F,function(ee){return va(E,mh(ee))})}function S0(E,F){if(!E||!E.length)return[];var ee=Um(E);return null==F?ee:va(ee,function(Ce){return Zl(F,mt,Ce)})}var jm=ha(function(E,F){return Hl(E)?wt(E,F):[]}),nm=ha(function(E){return Dd(pr(E,Hl))}),rm=ha(function(E){var F=Ic(E);return Hl(F)&&(F=mt),Dd(pr(E,Hl),As(F,2))}),Zf=ha(function(E){var F=Ic(E);return F="function"==typeof F?F:mt,Dd(pr(E,Hl),mt,F)}),bp=ha(Um),C_=ha(function(E){var F=E.length,ee=F>1?E[F-1]:mt;return ee="function"==typeof ee?(E.pop(),ee):mt,S0(E,ee)});function wp(E){var F=Ee(E);return F.__chain__=!0,F}function Cp(E,F){return F(E)}var I0=Ld(function(E){var F=E.length,ee=F?E[0]:0,Ce=this.__wrapped__,qe=function(Ct){return ye(Ct,E)};return!(F>1||this.__actions__.length)&&Ce instanceof Or&&du(ee)?((Ce=Ce.slice(ee,+ee+(F?1:0))).__actions__.push({func:Cp,args:[qe],thisArg:mt}),new ys(Ce,this.__chain__).thru(function(Ct){return F&&!Ct.length&&Ct.push(mt),Ct})):this.thru(qe)}),Yd=cd(function(E,F,ee){ya.call(E,ee)?++E[ee]:be(E,ee,1)}),Dg=dp(Tg),$m=dp(zm);function Hd(E,F){return(Xs(E)?xl:Ye)(E,As(F,3))}function Zm(E,F){return(Xs(E)?bd:ht)(E,As(F,3))}var L0=cd(function(E,F,ee){ya.call(E,ee)?E[ee].push(F):be(E,ee,[F])}),qf=ha(function(E,F,ee){var Ce=-1,qe="function"==typeof F,Ct=zu(E)?un(E.length):[];return Ye(E,function(oi){Ct[++Ce]=qe?Zl(F,oi,ee):ms(oi,F,ee)}),Ct}),Ig=cd(function(E,F,ee){be(E,ee,F)});function P0(E,F){return(Xs(E)?va:Da)(E,As(F,3))}var Av=cd(function(E,F,ee){E[ee?0:1].push(F)},function(){return[[],[]]}),Kf=ha(function(E,F){if(null==E)return[];var ee=F.length;return ee>1&&Xc(E,F[0],F[1])?F=[]:ee>2&&Xc(F[0],F[1],F[2])&&(F=[F[0]]),To(E,ai(F,1),[])}),Nu=ou||function(){return wa.Date.now()};function z0(E,F,ee){return F=ee?mt:F,da(E,128,mt,mt,mt,mt,F=E&&null==F?E.length:F)}function Qm(E,F){var ee;if("function"!=typeof F)throw new dl(He);return E=na(E),function(){return--E>0&&(ee=F.apply(this,arguments)),E<=1&&(F=mt),ee}}var Ef=ha(function(E,F,ee){var Ce=1;if(ee.length){var qe=Yc(ee,Pd(Ef));Ce|=32}return da(E,Ce,F,ee,qe)}),b=ha(function(E,F,ee){var Ce=3;if(ee.length){var qe=Yc(ee,Pd(b));Ce|=32}return da(F,Ce,E,ee,qe)});function X(E,F,ee){var Ce,qe,Ct,oi,xi,Gi,Xn=0,$n=!1,or=!1,$r=!0;if("function"!=typeof E)throw new dl(He);function fs(rc){var nh=Ce,Sf=qe;return Ce=qe=mt,Xn=rc,oi=E.apply(Sf,nh)}function Ns(rc){var nh=rc-Gi;return Gi===mt||nh>=F||nh<0||or&&rc-Xn>=Ct}function fa(){var rc=Nu();if(Ns(rc))return Ga(rc);xi=pl(fa,function ma(rc){var Zv=F-(rc-Gi);return or?Ai(Zv,Ct-(rc-Xn)):Zv}(rc))}function Ga(rc){return xi=mt,$r&&Ce?fs(rc):(Ce=qe=mt,oi)}function ih(){var rc=Nu(),nh=Ns(rc);if(Ce=arguments,qe=this,Gi=rc,nh){if(xi===mt)return function Is(rc){return Xn=rc,xi=pl(fa,F),$n?fs(rc):oi}(Gi);if(or)return kh(xi),xi=pl(fa,F),fs(Gi)}return xi===mt&&(xi=pl(fa,F)),oi}return F=Ud(F)||0,Sl(ee)&&($n=!!ee.leading,Ct=(or="maxWait"in ee)?ri(Ud(ee.maxWait)||0,F):Ct,$r="trailing"in ee?!!ee.trailing:$r),ih.cancel=function qh(){xi!==mt&&kh(xi),Xn=0,Ce=Gi=qe=xi=mt},ih.flush=function th(){return xi===mt?oi:Ga(Nu())},ih}var te=ha(function(E,F){return vt(E,1,F)}),Me=ha(function(E,F,ee){return vt(E,Ud(F)||0,ee)});function sn(E,F){if("function"!=typeof E||null!=F&&"function"!=typeof F)throw new dl(He);var ee=function(){var Ce=arguments,qe=F?F.apply(this,Ce):Ce[0],Ct=ee.cache;if(Ct.has(qe))return Ct.get(qe);var oi=E.apply(this,Ce);return ee.cache=Ct.set(qe,oi)||Ct,oi};return ee.cache=new(sn.Cache||xh),ee}function dr(E){if("function"!=typeof E)throw new dl(He);return function(){var F=arguments;switch(F.length){case 0:return!E.call(this);case 1:return!E.call(this,F[0]);case 2:return!E.call(this,F[0],F[1]);case 3:return!E.call(this,F[0],F[1],F[2])}return!E.apply(this,F)}}sn.Cache=xh;var co=So(function(E,F){var ee=(F=1==F.length&&Xs(F[0])?va(F[0],Ll(As())):va(ai(F,1),Ll(As()))).length;return ha(function(Ce){for(var qe=-1,Ct=Ai(Ce.length,ee);++qe<Ct;)Ce[qe]=F[qe].call(this,Ce[qe]);return Zl(E,this,Ce)})}),el=ha(function(E,F){var ee=Yc(F,Pd(el));return da(E,32,mt,F,ee)}),qc=ha(function(E,F){var ee=Yc(F,Pd(qc));return da(E,64,mt,F,ee)}),kp=Ld(function(E,F){return da(E,256,mt,mt,mt,F)});function Dh(E,F){return E===F||E!=E&&F!=F}var Iy=El(Wi),Qu=El(function(E,F){return E>=F}),kf=Sr(function(){return arguments}())?Sr:function(E){return ml(E)&&ya.call(E,"callee")&&!Nl.call(E,"callee")},Xs=un.isArray,Y0=df?Ll(df):function Ir(E){return ml(E)&&Dn(E)==wr};function zu(E){return null!=E&&Rv(E.length)&&!Jf(E)}function Hl(E){return ml(E)&&zu(E)}var Tp=Z||jg,Sp=Fh?Ll(Fh):function xs(E){return ml(E)&&Dn(E)==Os};function D_(E){if(!ml(E))return!1;var F=Dn(E);return F==Ts||"[object DOMException]"==F||"string"==typeof E.message&&"string"==typeof E.name&&!Qf(E)}function Jf(E){if(!Sl(E))return!1;var F=Dn(E);return F==Zn||F==Un||"[object AsyncFunction]"==F||"[object Proxy]"==F}function I_(E){return"number"==typeof E&&E==na(E)}function Rv(E){return"number"==typeof E&&E>-1&&E%1==0&&E<=Fn}function Sl(E){var F=typeof E;return null!=E&&("object"==F||"function"==F)}function ml(E){return null!=E&&"object"==typeof E}var G0=pc?Ll(pc):function Qs(E){return ml(E)&&kl(E)==cr};function tg(E){return"number"==typeof E||ml(E)&&Dn(E)==zn}function Qf(E){if(!ml(E)||Dn(E)!=Vr)return!1;var F=Su(E);if(null===F)return!0;var ee=ya.call(F,"constructor")&&F.constructor;return"function"==typeof ee&&ee instanceof ee&&Uo.call(ee)==bc}var H0=fh?Ll(fh):function no(E){return ml(E)&&Dn(E)==ur},Lg=yl?Ll(yl):function jc(E){return ml(E)&&kl(E)==xr};function V0(E){return"string"==typeof E||!Xs(E)&&ml(E)&&Dn(E)==zs}function pd(E){return"symbol"==typeof E||ml(E)&&Dn(E)==Vs}var lm=ia?Ll(ia):function Wo(E){return ml(E)&&Rv(E.length)&&!!Va[Dn(E)]},L_=El(Ca),Py=El(function(E,F){return E<=F});function Pv(E){if(!E)return[];if(zu(E))return V0(E)?hl(E):kc(E);if(Ec&&E[Ec])return function Xu(Li){for(var mn,un=[];!(mn=Li.next()).done;)un.push(mn.value);return un}(E[Ec]());var F=kl(E);return(F==cr?zh:F==xr?ul:cm)(E)}function Yu(E){return E?(E=Ud(E))===_n||E===-_n?17976931348623157e292*(E<0?-1:1):E==E?E:0:0===E?E:0}function na(E){var F=Yu(E),ee=F%1;return F==F?ee?F-ee:F:0}function Fv(E){return E?Fe(na(E),0,Nr):0}function Ud(E){if("number"==typeof E)return E;if(pd(E))return NaN;if(Sl(E)){var F="function"==typeof E.valueOf?E.valueOf():E;E=Sl(F)?F+"":F}if("string"!=typeof E)return 0===E?E:+E;E=iu(E);var ee=yt.test(E);return ee||We.test(E)?Ys(E.slice(2),ee?2:8):ke.test(E)?NaN:+E}function Fy(E){return Do(E,fu(E))}function yo(E){return null==E?"":Ch(E)}var ix=$o(function(E,F){if(pp(F)||zu(F))Do(F,Mc(F),E);else for(var ee in F)ya.call(F,ee)&&Y(E,ee,F[ee])}),By=$o(function(E,F){Do(F,fu(F),E)}),U0=$o(function(E,F,ee,Ce){Do(F,fu(F),E,Ce)}),Ny=$o(function(E,F,ee,Ce){Do(F,Mc(F),E,Ce)}),zy=Ld(ye),Fg=ha(function(E,F){E=la(E);var ee=-1,Ce=F.length,qe=Ce>2?F[2]:mt;for(qe&&Xc(F[0],F[1],qe)&&(Ce=1);++ee<Ce;)for(var Ct=F[ee],oi=fu(Ct),xi=-1,Gi=oi.length;++xi<Gi;){var Xn=oi[xi],$n=E[Xn];($n===mt||Dh($n,xc[Xn])&&!ya.call(E,Xn))&&(E[Xn]=Ct[Xn])}return E}),Yy=ha(function(E){return E.push(mt,bv),Zl(Wy,mt,E)});function ig(E,F,ee){var Ce=null==E?mt:dn(E,F);return Ce===mt?ee:Ce}function eh(E,F){return null!=E&&c0(E,F,Wn)}var Vy=$p(function(E,F,ee){null!=F&&"function"!=typeof F.toString&&(F=Tu.call(F)),E[F]=ee},dm(Gu)),Bg=$p(function(E,F,ee){null!=F&&"function"!=typeof F.toString&&(F=Tu.call(F)),ya.call(E,F)?E[F].push(ee):E[F]=[ee]},As),Ng=ha(ms);function Mc(E){return zu(E)?mf(E):bh(E)}function fu(E){return zu(E)?mf(E,!0):function _o(E){if(!Sl(E))return function $f(E){var F=[];if(null!=E)for(var ee in la(E))F.push(ee);return F}(E);var F=pp(E),ee=[];for(var Ce in E)"constructor"==Ce&&(F||!ya.call(E,Ce))||ee.push(Ce);return ee}(E)}var jy=$o(function(E,F,ee){to(E,F,ee)}),Wy=$o(function(E,F,ee,Ce){to(E,F,ee,Ce)}),$y=Ld(function(E,F){var ee={};if(null==E)return ee;var Ce=!1;F=va(F,function(Ct){return Ct=zf(Ct,E),Ce||(Ce=Ct.length>1),Ct}),Do(E,Tc(E),ee),Ce&&(ee=et(ee,7,vf));for(var qe=F.length;qe--;)cp(ee,F[qe]);return ee}),P_=Ld(function(E,F){return null==E?{}:function wh(E,F){return tc(E,F,function(ee,Ce){return eh(E,Ce)})}(E,F)});function Bv(E,F){if(null==E)return{};var ee=va(Tc(E),function(Ce){return[Ce]});return F=As(F),tc(E,ee,function(Ce,qe){return F(Ce,qe[0])})}var F_=Xp(Mc),W0=Xp(fu);function cm(E){return null==E?[]:Ho(E,Mc(E))}var Tf=Wp(function(E,F,ee){return F=F.toLowerCase(),E+(ee?X0(F):F)});function X0(E){return G_(yo(E).toLowerCase())}function ng(E){return(E=yo(E))&&E.replace(ge,gh).replace(Bc,"")}var cx=Wp(function(E,F,ee){return E+(ee?"-":"")+F.toLowerCase()}),zv=Wp(function(E,F,ee){return E+(ee?" ":"")+F.toLowerCase()}),B_=jp("toLowerCase"),Gg=Wp(function(E,F,ee){return E+(ee?"_":"")+F.toLowerCase()}),r1=Wp(function(E,F,ee){return E+(ee?" ":"")+G_(F)}),Y_=Wp(function(E,F,ee){return E+(ee?" ":"")+F.toUpperCase()}),G_=jp("toUpperCase");function H_(E,F,ee){return E=yo(E),(F=ee?mt:F)===mt?function yc(Li){return Xl.test(Li)}(E)?function Cu(Li){return Li.match(fc)||[]}(E):function Xa(Li){return Li.match(en)||[]}(E):E.match(F)||[]}var hm=ha(function(E,F){try{return Zl(E,mt,F)}catch(ee){return D_(ee)?ee:new Ls(ee)}}),px=Ld(function(E,F){return xl(F,function(ee){ee=Zc(ee),be(E,ee,Ef(E[ee],E))}),E});function dm(E){return function(){return E}}var Hg=Od(),K0=Od(!0);function Gu(E){return E}function V_(E){return ua("function"==typeof E?E:et(E,1))}var Gv=ha(function(E,F){return function(ee){return ms(ee,E,F)}}),vx=ha(function(E,F){return function(ee){return ms(E,ee,F)}});function U_(E,F,ee){var Ce=Mc(F),qe=Ni(F,Ce);null==ee&&(!Sl(F)||!qe.length&&Ce.length)&&(ee=F,F=E,E=this,qe=Ni(F,Mc(F)));var Ct=!(Sl(ee)&&"chain"in ee&&!ee.chain),oi=Jf(E);return xl(qe,function(xi){var Gi=F[xi];E[xi]=Gi,oi&&(E.prototype[xi]=function(){var Xn=this.__chain__;if(Ct||Xn){var $n=E(this.__wrapped__);return($n.__actions__=kc(this.__actions__)).push({func:Gi,args:arguments,thisArg:E}),$n.__chain__=Xn,$n}return Gi.apply(E,po([this.value()],arguments))})}),E}function Hv(){}var Hb=ic(va),Vv=ic(sl),Uv=ic(Kl);function J0(E){return Pm(E)?mh(Zc(E)):function Gh(E){return function(F){return dn(F,E)}}(E)}var xx=Rd(),jv=Rd(!0);function Ug(){return[]}function jg(){return!1}var c1=Mm(function(E,F){return E+F},0),Dp=Th("ceil"),wx=Mm(function(E,F){return E/F},1),Cx=Th("floor"),Tx=Mm(function(E,F){return E*F},1),u1=Th("round"),h1=Mm(function(E,F){return E-F},0);return Ee.after=function Jm(E,F){if("function"!=typeof F)throw new dl(He);return E=na(E),function(){if(--E<1)return F.apply(this,arguments)}},Ee.ary=z0,Ee.assign=ix,Ee.assignIn=By,Ee.assignInWith=U0,Ee.assignWith=Ny,Ee.at=zy,Ee.before=Qm,Ee.bind=Ef,Ee.bindAll=px,Ee.bindKey=b,Ee.castArray=function T_(){if(!arguments.length)return[];var E=arguments[0];return Xs(E)?E:[E]},Ee.chain=wp,Ee.chunk=function p0(E,F,ee){F=(ee?Xc(E,F,ee):F===mt)?1:ri(na(F),0);var Ce=null==E?0:E.length;if(!Ce||F<1)return[];for(var qe=0,Ct=0,oi=un(lr(Ce/F));qe<Ce;)oi[Ct++]=Yl(E,qe,qe+=F);return oi},Ee.compact=function zd(E){for(var F=-1,ee=null==E?0:E.length,Ce=0,qe=[];++F<ee;){var Ct=E[F];Ct&&(qe[Ce++]=Ct)}return qe},Ee.concat=function hd(){var E=arguments.length;if(!E)return[];for(var F=un(E-1),ee=arguments[0],Ce=E;Ce--;)F[Ce-1]=arguments[Ce];return po(Xs(ee)?kc(ee):[ee],ai(F,1))},Ee.cond=function ip(E){var F=null==E?0:E.length,ee=As();return E=F?va(E,function(Ce){if("function"!=typeof Ce[1])throw new dl(He);return[ee(Ce[0]),Ce[1]]}):[],ha(function(Ce){for(var qe=-1;++qe<F;){var Ct=E[qe];if(Zl(Ct[0],this,Ce))return Zl(Ct[1],this,Ce)}})},Ee.conforms=function mx(E){return function ut(E){var F=Mc(E);return function(ee){return ft(ee,E,F)}}(et(E,1))},Ee.constant=dm,Ee.countBy=Yd,Ee.create=function Pg(E,F){var ee=yn(E);return null==F?ee:re(ee,F)},Ee.curry=function N(E,F,ee){var Ce=da(E,8,mt,mt,mt,mt,mt,F=ee?mt:F);return Ce.placeholder=N.placeholder,Ce},Ee.curryRight=function S(E,F,ee){var Ce=da(E,16,mt,mt,mt,mt,mt,F=ee?mt:F);return Ce.placeholder=S.placeholder,Ce},Ee.debounce=X,Ee.defaults=Fg,Ee.defaultsDeep=Yy,Ee.defer=te,Ee.delay=Me,Ee.difference=$h,Ee.differenceBy=Sh,Ee.differenceWith=Ac,Ee.drop=function Cv(E,F,ee){var Ce=null==E?0:E.length;return Ce?Yl(E,(F=ee||F===mt?1:na(F))<0?0:F,Ce):[]},Ee.dropRight=function Dc(E,F,ee){var Ce=null==E?0:E.length;return Ce?Yl(E,0,(F=Ce-(F=ee||F===mt?1:na(F)))<0?0:F):[]},Ee.dropRightWhile=function m0(E,F){return E&&E.length?Hh(E,As(F,3),!0,!0):[]},Ee.dropWhile=function _p(E,F){return E&&E.length?Hh(E,As(F,3),!0):[]},Ee.fill=function g0(E,F,ee,Ce){var qe=null==E?0:E.length;return qe?(ee&&"number"!=typeof ee&&Xc(E,F,ee)&&(ee=0,Ce=qe),function fi(E,F,ee,Ce){var qe=E.length;for((ee=na(ee))<0&&(ee=-ee>qe?0:qe+ee),(Ce=Ce===mt||Ce>qe?qe:na(Ce))<0&&(Ce+=qe),Ce=ee>Ce?0:Fv(Ce);ee<Ce;)E[ee++]=F;return E}(E,F,ee,Ce)):[]},Ee.filter=function Gd(E,F){return(Xs(E)?pr:pi)(E,As(F,3))},Ee.flatMap=function am(E,F){return ai(P0(E,F),1)},Ee.flatMapDeep=function R0(E,F){return ai(P0(E,F),_n)},Ee.flatMapDepth=function Xm(E,F,ee){return ee=ee===mt?1:na(ee),ai(P0(E,F),ee)},Ee.flatten=Ev,Ee.flattenDeep=function v0(E){return null!=E&&E.length?ai(E,_n):[]},Ee.flattenDepth=function Ym(E,F){return null!=E&&E.length?ai(E,F=F===mt?1:na(F)):[]},Ee.flip=function Lt(E){return da(E,512)},Ee.flow=Hg,Ee.flowRight=K0,Ee.fromPairs=function y_(E){for(var F=-1,ee=null==E?0:E.length,Ce={};++F<ee;){var qe=E[F];Ce[qe[0]]=qe[1]}return Ce},Ee.functions=function ep(E){return null==E?[]:Ni(E,Mc(E))},Ee.functionsIn=function Ih(E){return null==E?[]:Ni(E,fu(E))},Ee.groupBy=L0,Ee.initial=function Gm(E){return null!=E&&E.length?Yl(E,0,-1):[]},Ee.intersection=Hm,Ee.intersectionBy=Vm,Ee.intersectionWith=Tl,Ee.invert=Vy,Ee.invertBy=Bg,Ee.invokeMap=qf,Ee.iteratee=V_,Ee.keyBy=Ig,Ee.keys=Mc,Ee.keysIn=fu,Ee.map=P0,Ee.mapKeys=function ax(E,F){var ee={};return F=As(F,3),Yi(E,function(Ce,qe,Ct){be(ee,F(Ce,qe,Ct),Ce)}),ee},Ee.mapValues=function Uy(E,F){var ee={};return F=As(F,3),Yi(E,function(Ce,qe,Ct){be(ee,qe,F(Ce,qe,Ct))}),ee},Ee.matches=function gx(E){return ro(et(E,1))},Ee.matchesProperty=function Vg(E,F){return Wc(E,et(F,1))},Ee.memoize=sn,Ee.merge=jy,Ee.mergeWith=Wy,Ee.method=Gv,Ee.methodOf=vx,Ee.mixin=U_,Ee.negate=dr,Ee.nthArg=function yx(E){return E=na(E),ha(function(F){return uu(F,E)})},Ee.omit=$y,Ee.omitBy=function Xy(E,F){return Bv(E,dr(As(F)))},Ee.once=function Oa(E){return Qm(2,E)},Ee.orderBy=function F0(E,F,ee,Ce){return null==E?[]:(Xs(F)||(F=null==F?[]:[F]),Xs(ee=Ce?mt:ee)||(ee=null==ee?[]:[ee]),To(E,F,ee))},Ee.over=Hb,Ee.overArgs=co,Ee.overEvery=Vv,Ee.overSome=Uv,Ee.partial=el,Ee.partialRight=qc,Ee.partition=Av,Ee.pick=P_,Ee.pickBy=Bv,Ee.property=J0,Ee.propertyOf=function j_(E){return function(F){return null==E?mt:dn(E,F)}},Ee.pull=ky,Ee.pullAll=bf,Ee.pullAllBy=function Lo(E,F,ee){return E&&E.length&&F&&F.length?Ou(E,F,As(ee,2)):E},Ee.pullAllWith=function x0(E,F,ee){return E&&E.length&&F&&F.length?Ou(E,F,mt,ee):E},Ee.pullAt=Ah,Ee.range=xx,Ee.rangeRight=jv,Ee.rearg=kp,Ee.reject=function Sy(E,F){return(Xs(E)?pr:pi)(E,dr(As(F,3)))},Ee.remove=function tm(E,F){var ee=[];if(!E||!E.length)return ee;var Ce=-1,qe=[],Ct=E.length;for(F=As(F,3);++Ce<Ct;){var oi=E[Ce];F(oi,Ce,E)&&(ee.push(oi),qe.push(Ce))}return lp(E,qe),ee},Ee.rest=function Dv(E,F){if("function"!=typeof E)throw new dl(He);return ha(E,F=F===mt?F:na(F))},Ee.reverse=yp,Ee.sampleSize=function om(E,F,ee){return F=(ee?Xc(E,F,ee):F===mt)?1:na(F),(Xs(E)?d:yv)(E,F)},Ee.set=function qy(E,F,ee){return null==E?E:gf(E,F,ee)},Ee.setWith=function tp(E,F,ee,Ce){return Ce="function"==typeof Ce?Ce:mt,null==E?E:gf(E,F,ee,Ce)},Ee.shuffle=function Mg(E){return(Xs(E)?_:mg)(E)},Ee.slice=function wf(E,F,ee){var Ce=null==E?0:E.length;return Ce?(ee&&"number"!=typeof ee&&Xc(E,F,ee)?(F=0,ee=Ce):(F=null==F?0:na(F),ee=ee===mt?Ce:na(ee)),Yl(E,F,ee)):[]},Ee.sortBy=Kf,Ee.sortedUniq=function Tv(E){return E&&E.length?a0(E):[]},Ee.sortedUniqBy=function C0(E,F){return E&&E.length?a0(E,As(F,2)):[]},Ee.split=function N_(E,F,ee){return ee&&"number"!=typeof ee&&Xc(E,F,ee)&&(F=ee=mt),(ee=ee===mt?Nr:ee>>>0)?(E=yo(E))&&("string"==typeof F||null!=F&&!H0(F))&&!(F=Ch(F))&&Pl(E)?od(hl(E),0,ee):E.split(F,ee):[]},Ee.spread=function eg(E,F){if("function"!=typeof E)throw new dl(He);return F=null==F?0:ri(na(F),0),ha(function(ee){var Ce=ee[F],qe=od(ee,0,F);return Ce&&po(qe,Ce),Zl(E,this,qe)})},Ee.tail=function xp(E){var F=null==E?0:E.length;return F?Yl(E,1,F):[]},Ee.take=function fd(E,F,ee){return E&&E.length?Yl(E,0,(F=ee||F===mt?1:na(F))<0?0:F):[]},Ee.takeRight=function Sv(E,F,ee){var Ce=null==E?0:E.length;return Ce?Yl(E,(F=Ce-(F=ee||F===mt?1:na(F)))<0?0:F,Ce):[]},Ee.takeRightWhile=function E0(E,F){return E&&E.length?Hh(E,As(F,3),!1,!0):[]},Ee.takeWhile=function Ag(E,F){return E&&E.length?Hh(E,As(F,3)):[]},Ee.tap=function D0(E,F){return F(E),E},Ee.throttle=function Xh(E,F,ee){var Ce=!0,qe=!0;if("function"!=typeof E)throw new dl(He);return Sl(ee)&&(Ce="leading"in ee?!!ee.leading:Ce,qe="trailing"in ee?!!ee.trailing:qe),X(E,F,{leading:Ce,maxWait:F,trailing:qe})},Ee.thru=Cp,Ee.toArray=Pv,Ee.toPairs=F_,Ee.toPairsIn=W0,Ee.toPath=function bx(E){return Xs(E)?va(E,Zc):pd(E)?[E]:kc(f0(yo(E)))},Ee.toPlainObject=Fy,Ee.transform=function Ky(E,F,ee){var Ce=Xs(E),qe=Ce||Tp(E)||lm(E);if(F=As(F,4),null==ee){var Ct=E&&E.constructor;ee=qe?Ce?new Ct:[]:Sl(E)&&Jf(Ct)?yn(Su(E)):{}}return(qe?xl:Yi)(E,function(oi,xi,Gi){return F(ee,oi,xi,Gi)}),ee},Ee.unary=function Zh(E){return z0(E,1)},Ee.union=k0,Ee.unionBy=Cf,Ee.unionWith=Bu,Ee.uniq=function x_(E){return E&&E.length?Ad(E):[]},Ee.uniqBy=function T0(E,F){return E&&E.length?Ad(E,As(F,2)):[]},Ee.uniqWith=function b_(E,F){return F="function"==typeof F?F:mt,E&&E.length?Ad(E,mt,F):[]},Ee.unset=function Jy(E,F){return null==E||cp(E,F)},Ee.unzip=Um,Ee.unzipWith=S0,Ee.update=function Qy(E,F,ee){return null==E?E:up(E,F,o0(ee))},Ee.updateWith=function ox(E,F,ee,Ce){return Ce="function"==typeof Ce?Ce:mt,null==E?E:up(E,F,o0(ee),Ce)},Ee.values=cm,Ee.valuesIn=function e1(E){return null==E?[]:Ho(E,fu(E))},Ee.without=jm,Ee.words=H_,Ee.wrap=function Rg(E,F){return el(o0(F),E)},Ee.xor=nm,Ee.xorBy=rm,Ee.xorWith=Zf,Ee.zip=bp,Ee.zipObject=function A0(E,F){return Id(E||[],F||[],Y)},Ee.zipObjectDeep=function w_(E,F){return Id(E||[],F||[],gf)},Ee.zipWith=C_,Ee.entries=F_,Ee.entriesIn=W0,Ee.extend=By,Ee.extendWith=U0,U_(Ee,Ee),Ee.add=c1,Ee.attempt=hm,Ee.camelCase=Tf,Ee.capitalize=X0,Ee.ceil=Dp,Ee.clamp=function $0(E,F,ee){return ee===mt&&(ee=F,F=mt),ee!==mt&&(ee=(ee=Ud(ee))==ee?ee:0),F!==mt&&(F=(F=Ud(F))==F?F:0),Fe(Ud(E),F,ee)},Ee.clone=function S_(E){return et(E,4)},Ee.cloneDeep=function Iv(E){return et(E,5)},Ee.cloneDeepWith=function Ay(E,F){return et(E,5,F="function"==typeof F?F:mt)},Ee.cloneWith=function A_(E,F){return et(E,4,F="function"==typeof F?F:mt)},Ee.conformsTo=function Dy(E,F){return null==F||ft(E,F,Mc(F))},Ee.deburr=ng,Ee.defaultTo=function q0(E,F){return null==E||E!=E?F:E},Ee.divide=wx,Ee.endsWith=function zg(E,F,ee){E=yo(E),F=Ch(F);var Ce=E.length,qe=ee=ee===mt?Ce:Fe(na(ee),0,Ce);return(ee-=F.length)>=0&&E.slice(ee,qe)==F},Ee.eq=Dh,Ee.escape=function lx(E){return(E=yo(E))&&Mt.test(E)?E.replace(wi,zc):E},Ee.escapeRegExp=function Nv(E){return(E=yo(E))&&dt.test(E)?E.replace(Vt,"\\$&"):E},Ee.every=function Wm(E,F,ee){var Ce=Xs(E)?sl:zt;return ee&&Xc(E,F,ee)&&(F=mt),Ce(E,As(F,3))},Ee.find=Dg,Ee.findIndex=Tg,Ee.findKey=function j0(E,F){return mc(E,As(F,3),Yi)},Ee.findLast=$m,Ee.findLastIndex=zm,Ee.findLastKey=function jd(E,F){return mc(E,As(F,3),Gn)},Ee.floor=Cx,Ee.forEach=Hd,Ee.forEachRight=Zm,Ee.forIn=function nx(E,F){return null==E?E:Ii(E,As(F,3),fu)},Ee.forInRight=function rx(E,F){return null==E?E:Ei(E,As(F,3),fu)},Ee.forOwn=function sx(E,F){return E&&Yi(E,As(F,3))},Ee.forOwnRight=function Gy(E,F){return E&&Gn(E,As(F,3))},Ee.get=ig,Ee.gt=Iy,Ee.gte=Qu,Ee.has=function Hy(E,F){return null!=E&&c0(E,F,on)},Ee.hasIn=eh,Ee.head=xf,Ee.identity=Gu,Ee.includes=function qm(E,F,ee,Ce){E=zu(E)?E:cm(E),ee=ee&&!Ce?na(ee):0;var qe=E.length;return ee<0&&(ee=ri(qe+ee,0)),V0(E)?ee<=qe&&E.indexOf(F,ee)>-1:!!qe&&Ut(E,F,ee)>-1},Ee.indexOf=function Fu(E,F,ee){var Ce=null==E?0:E.length;if(!Ce)return-1;var qe=null==ee?0:na(ee);return qe<0&&(qe=ri(Ce+qe,0)),Ut(E,F,qe)},Ee.inRange=function t1(E,F,ee){return F=Yu(F),ee===mt?(ee=F,F=0):ee=Yu(ee),function Ln(E,F,ee){return E>=Ai(F,ee)&&E<ri(F,ee)}(E=Ud(E),F,ee)},Ee.invoke=Ng,Ee.isArguments=kf,Ee.isArray=Xs,Ee.isArrayBuffer=Y0,Ee.isArrayLike=zu,Ee.isArrayLikeObject=Hl,Ee.isBoolean=function Mv(E){return!0===E||!1===E||ml(E)&&Dn(E)==En},Ee.isBuffer=Tp,Ee.isDate=Sp,Ee.isElement=function J1(E){return ml(E)&&1===E.nodeType&&!Qf(E)},Ee.isEmpty=function My(E){if(null==E)return!0;if(zu(E)&&(Xs(E)||"string"==typeof E||"function"==typeof E.splice||Tp(E)||lm(E)||kf(E)))return!E.length;var F=kl(E);if(F==cr||F==xr)return!E.size;if(pp(E))return!bh(E).length;for(var ee in E)if(ya.call(E,ee))return!1;return!0},Ee.isEqual=function Q1(E,F){return cs(E,F)},Ee.isEqualWith=function Ov(E,F,ee){var Ce=(ee="function"==typeof ee?ee:mt)?ee(E,F):mt;return Ce===mt?cs(E,F,mt,ee):!!Ce},Ee.isError=D_,Ee.isFinite=function Oy(E){return"number"==typeof E&&fe(E)},Ee.isFunction=Jf,Ee.isInteger=I_,Ee.isLength=Rv,Ee.isMap=G0,Ee.isMatch=function Ry(E,F){return E===F||Za(E,F,jf(F))},Ee.isMatchWith=function Lv(E,F,ee){return ee="function"==typeof ee?ee:mt,Za(E,F,jf(F),ee)},Ee.isNaN=function ex(E){return tg(E)&&E!=+E},Ee.isNative=function Vl(E){if(Fm(E))throw new Ls("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return eo(E)},Ee.isNil=function M_(E){return null==E},Ee.isNull=function Vd(E){return null===E},Ee.isNumber=tg,Ee.isObject=Sl,Ee.isObjectLike=ml,Ee.isPlainObject=Qf,Ee.isRegExp=H0,Ee.isSafeInteger=function O_(E){return I_(E)&&E>=-Fn&&E<=Fn},Ee.isSet=Lg,Ee.isString=V0,Ee.isSymbol=pd,Ee.isTypedArray=lm,Ee.isUndefined=function R_(E){return E===mt},Ee.isWeakMap=function Ly(E){return ml(E)&&kl(E)==Ds},Ee.isWeakSet=function so(E){return ml(E)&&"[object WeakSet]"==Dn(E)},Ee.join=function em(E,F){return null==E?"":Ie.call(E,F)},Ee.kebabCase=cx,Ee.last=Ic,Ee.lastIndexOf=function _0(E,F,ee){var Ce=null==E?0:E.length;if(!Ce)return-1;var qe=Ce;return ee!==mt&&(qe=(qe=na(ee))<0?ri(Ce+qe,0):Ai(qe,Ce-1)),F==F?function Ma(Li,mn,un){for(var Mr=un+1;Mr--;)if(Li[Mr]===mn)return Mr;return Mr}(E,F,qe):gc(E,mo,qe,!0)},Ee.lowerCase=zv,Ee.lowerFirst=B_,Ee.lt=L_,Ee.lte=Py,Ee.max=function Q0(E){return E&&E.length?xt(E,Gu,Wi):mt},Ee.maxBy=function Xv(E,F){return E&&E.length?xt(E,As(F,2),Wi):mt},Ee.mean=function ev(E){return Aa(E,Gu)},Ee.meanBy=function Ex(E,F){return Aa(E,As(F,2))},Ee.min=function tv(E){return E&&E.length?xt(E,Gu,Ca):mt},Ee.minBy=function kx(E,F){return E&&E.length?xt(E,As(F,2),Ca):mt},Ee.stubArray=Ug,Ee.stubFalse=jg,Ee.stubObject=function l1(){return{}},Ee.stubString=function W_(){return""},Ee.stubTrue=function Wv(){return!0},Ee.multiply=Tx,Ee.nth=function y0(E,F){return E&&E.length?uu(E,na(F)):mt},Ee.noConflict=function _x(){return wa._===this&&(wa._=ca),this},Ee.noop=Hv,Ee.now=Nu,Ee.pad=function zb(E,F,ee){E=yo(E);var Ce=(F=na(F))?wl(E):0;if(!F||Ce>=F)return E;var qe=(F-Ce)/2;return Lu(v(qe),ee)+E+Lu(lr(qe),ee)},Ee.padEnd=function ux(E,F,ee){E=yo(E);var Ce=(F=na(F))?wl(E):0;return F&&Ce<F?E+Lu(F-Ce,ee):E},Ee.padStart=function hx(E,F,ee){E=yo(E);var Ce=(F=na(F))?wl(E):0;return F&&Ce<F?Lu(F-Ce,ee)+E:E},Ee.parseInt=function Yb(E,F,ee){return ee||null==F?F=0:F&&(F=+F),qn(yo(E).replace(ot,""),F||0)},Ee.random=function n1(E,F,ee){if(ee&&"boolean"!=typeof ee&&Xc(E,F,ee)&&(F=ee=mt),ee===mt&&("boolean"==typeof F?(ee=F,F=mt):"boolean"==typeof E&&(ee=E,E=mt)),E===mt&&F===mt?(E=0,F=1):(E=Yu(E),F===mt?(F=E,E=0):F=Yu(F)),E>F){var Ce=E;E=F,F=Ce}if(ee||E%1||F%1){var qe=Dr();return Ai(E+qe*(F-E+Lh("1e-"+((qe+"").length-1))),F)}return Td(E,F)},Ee.reduce=function B0(E,F,ee){var Ce=Xs(E)?ql:Ml,qe=arguments.length<3;return Ce(E,As(F,4),ee,qe,Ye)},Ee.reduceRight=function N0(E,F,ee){var Ce=Xs(E)?ph:Ml,qe=arguments.length<3;return Ce(E,As(F,4),ee,qe,ht)},Ee.repeat=function Gb(E,F,ee){return F=(ee?Xc(E,F,ee):F===mt)?1:na(F),Ur(yo(E),F)},Ee.replace=function Yg(){var E=arguments,F=yo(E[0]);return E.length<3?F:F.replace(E[1],E[2])},Ee.result=function Zy(E,F,ee){var Ce=-1,qe=(F=zf(F,E)).length;for(qe||(qe=1,E=mt);++Ce<qe;){var Ct=null==E?mt:E[Zc(F[Ce])];Ct===mt&&(Ce=qe,Ct=ee),E=Jf(Ct)?Ct.call(E):Ct}return E},Ee.round=u1,Ee.runInContext=Li,Ee.sample=function k_(E){return(Xs(E)?k:Ey)(E)},Ee.size=function Km(E){if(null==E)return 0;if(zu(E))return V0(E)?wl(E):E.length;var F=kl(E);return F==cr||F==xr?E.size:bh(E).length},Ee.snakeCase=Gg,Ee.some=function Og(E,F,ee){var Ce=Xs(E)?Kl:gg;return ee&&Xc(E,F,ee)&&(F=mt),Ce(E,As(F,3))},Ee.sortedIndex=function dd(E,F){return Dm(E,F)},Ee.sortedIndexBy=function im(E,F,ee){return vg(E,F,As(ee,2))},Ee.sortedIndexOf=function b0(E,F){var ee=null==E?0:E.length;if(ee){var Ce=Dm(E,F);if(Ce<ee&&Dh(E[Ce],F))return Ce}return-1},Ee.sortedLastIndex=function Sg(E,F){return Dm(E,F,!0)},Ee.sortedLastIndexBy=function kv(E,F,ee){return vg(E,F,As(ee,2),!0)},Ee.sortedLastIndexOf=function w0(E,F){if(null!=E&&E.length){var Ce=Dm(E,F,!0)-1;if(Dh(E[Ce],F))return Ce}return-1},Ee.startCase=r1,Ee.startsWith=function s1(E,F,ee){return E=yo(E),ee=null==ee?0:Fe(na(ee),0,E.length),F=Ch(F),E.slice(ee,ee+F.length)==F},Ee.subtract=h1,Ee.sum=function d1(E){return E&&E.length?Rl(E,Gu):0},Ee.sumBy=function Wd(E,F){return E&&E.length?Rl(E,As(F,2)):0},Ee.template=function dx(E,F,ee){var Ce=Ee.templateSettings;ee&&Xc(E,F,ee)&&(F=mt),E=yo(E),F=U0({},F,Ce,jh);var xi,Gi,qe=U0({},F.imports,Ce.imports,jh),Ct=Mc(qe),oi=Ho(qe,Ct),Xn=0,$n=F.interpolate||l,or="__p += '",$r=Fl((F.escape||l).source+"|"+$n.source+"|"+($n===Rn?bt:l).source+"|"+(F.evaluate||l).source+"|$","g"),fs="//# sourceURL="+(ya.call(F,"sourceURL")?(F.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vl+"]")+"\n";E.replace($r,function(Ns,fa,Ga,qh,th,ih){return Ga||(Ga=qh),or+=E.slice(Xn,ih).replace(u,Nh),fa&&(xi=!0,or+="' +\n__e("+fa+") +\n'"),th&&(Gi=!0,or+="';\n"+th+";\n__p += '"),Ga&&(or+="' +\n((__t = ("+Ga+")) == null ? '' : __t) +\n'"),Xn=ih+Ns.length,Ns}),or+="';\n";var Is=ya.call(F,"variable")&&F.variable;if(Is){if(ji.test(Is))throw new Ls("Invalid `variable` option passed into `_.template`")}else or="with (obj) {\n"+or+"\n}\n";or=(Gi?or.replace(Je,""):or).replace(At,"$1").replace(St,"$1;"),or="function("+(Is||"obj")+") {\n"+(Is?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(xi?", __e = _.escape":"")+(Gi?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+or+"return __p\n}";var ma=hm(function(){return _a(Ct,fs+"return "+or).apply(mt,oi)});if(ma.source=or,D_(ma))throw ma;return ma},Ee.times=function Ap(E,F){if((E=na(E))<1||E>Fn)return[];var ee=Nr,Ce=Ai(E,Nr);F=As(F),E-=Nr;for(var qe=ll(Ce,F);++ee<E;)F(ee);return qe},Ee.toFinite=Yu,Ee.toInteger=na,Ee.toLength=Fv,Ee.toLower=function z_(E){return yo(E).toLowerCase()},Ee.toNumber=Ud,Ee.toSafeInteger=function tx(E){return E?Fe(na(E),-Fn,Fn):0===E?E:0},Ee.toString=yo,Ee.toUpper=function fx(E){return yo(E).toUpperCase()},Ee.trim=function Z0(E,F,ee){if((E=yo(E))&&(ee||F===mt))return iu(E);if(!E||!(F=Ch(F)))return E;var Ce=hl(E),qe=hl(F);return od(Ce,_c(Ce,qe),wu(Ce,qe)+1).join("")},Ee.trimEnd=function um(E,F,ee){if((E=yo(E))&&(ee||F===mt))return E.slice(0,oo(E)+1);if(!E||!(F=Ch(F)))return E;var Ce=hl(E);return od(Ce,0,wu(Ce,hl(F))+1).join("")},Ee.trimStart=function a1(E,F,ee){if((E=yo(E))&&(ee||F===mt))return E.replace(ot,"");if(!E||!(F=Ch(F)))return E;var Ce=hl(E);return od(Ce,_c(Ce,hl(F))).join("")},Ee.truncate=function o1(E,F){var ee=30,Ce="...";if(Sl(F)){var qe="separator"in F?F.separator:qe;ee="length"in F?na(F.length):ee,Ce="omission"in F?Ch(F.omission):Ce}var Ct=(E=yo(E)).length;if(Pl(E)){var oi=hl(E);Ct=oi.length}if(ee>=Ct)return E;var xi=ee-wl(Ce);if(xi<1)return Ce;var Gi=oi?od(oi,0,xi).join(""):E.slice(0,xi);if(qe===mt)return Gi+Ce;if(oi&&(xi+=Gi.length-xi),H0(qe)){if(E.slice(xi).search(qe)){var Xn,$n=Gi;for(qe.global||(qe=Fl(qe.source,yo(Ft.exec(qe))+"g")),qe.lastIndex=0;Xn=qe.exec($n);)var or=Xn.index;Gi=Gi.slice(0,or===mt?xi:or)}}else if(E.indexOf(Ch(qe),xi)!=xi){var $r=Gi.lastIndexOf(qe);$r>-1&&(Gi=Gi.slice(0,$r))}return Gi+Ce},Ee.unescape=function Yv(E){return(E=yo(E))&&ki.test(E)?E.replace(si,wd):E},Ee.uniqueId=function $v(E){var F=++su;return yo(E)+F},Ee.upperCase=Y_,Ee.upperFirst=G_,Ee.each=Hd,Ee.eachRight=Zm,Ee.first=xf,U_(Ee,function(){var E={};return Yi(Ee,function(F,ee){ya.call(Ee.prototype,ee)||(E[ee]=F)}),E}(),{chain:!1}),Ee.VERSION="4.17.21",xl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(E){Ee[E].placeholder=Ee}),xl(["drop","take"],function(E,F){Or.prototype[E]=function(ee){ee=ee===mt?1:ri(na(ee),0);var Ce=this.__filtered__&&!F?new Or(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=Ai(ee,Ce.__takeCount__):Ce.__views__.push({size:Ai(ee,Nr),type:E+(Ce.__dir__<0?"Right":"")}),Ce},Or.prototype[E+"Right"]=function(ee){return this.reverse()[E](ee).reverse()}}),xl(["filter","map","takeWhile"],function(E,F){var ee=F+1,Ce=1==ee||3==ee;Or.prototype[E]=function(qe){var Ct=this.clone();return Ct.__iteratees__.push({iteratee:As(qe,3),type:ee}),Ct.__filtered__=Ct.__filtered__||Ce,Ct}}),xl(["head","last"],function(E,F){var ee="take"+(F?"Right":"");Or.prototype[E]=function(){return this[ee](1).value()[0]}}),xl(["initial","tail"],function(E,F){var ee="drop"+(F?"":"Right");Or.prototype[E]=function(){return this.__filtered__?new Or(this):this[ee](1)}}),Or.prototype.compact=function(){return this.filter(Gu)},Or.prototype.find=function(E){return this.filter(E).head()},Or.prototype.findLast=function(E){return this.reverse().find(E)},Or.prototype.invokeMap=ha(function(E,F){return"function"==typeof E?new Or(this):this.map(function(ee){return ms(ee,E,F)})}),Or.prototype.reject=function(E){return this.filter(dr(As(E)))},Or.prototype.slice=function(E,F){E=na(E);var ee=this;return ee.__filtered__&&(E>0||F<0)?new Or(ee):(E<0?ee=ee.takeRight(-E):E&&(ee=ee.drop(E)),F!==mt&&(ee=(F=na(F))<0?ee.dropRight(-F):ee.take(F-E)),ee)},Or.prototype.takeRightWhile=function(E){return this.reverse().takeWhile(E).reverse()},Or.prototype.toArray=function(){return this.take(Nr)},Yi(Or.prototype,function(E,F){var ee=/^(?:filter|find|map|reject)|While$/.test(F),Ce=/^(?:head|last)$/.test(F),qe=Ee[Ce?"take"+("last"==F?"Right":""):F],Ct=Ce||/^find/.test(F);qe&&(Ee.prototype[F]=function(){var oi=this.__wrapped__,xi=Ce?[1]:arguments,Gi=oi instanceof Or,Xn=xi[0],$n=Gi||Xs(oi),or=function(fa){var Ga=qe.apply(Ee,po([fa],xi));return Ce&&$r?Ga[0]:Ga};$n&&ee&&"function"==typeof Xn&&1!=Xn.length&&(Gi=$n=!1);var $r=this.__chain__,Is=Ct&&!$r,ma=Gi&&!this.__actions__.length;if(!Ct&&$n){oi=ma?oi:new Or(this);var Ns=E.apply(oi,xi);return Ns.__actions__.push({func:Cp,args:[or],thisArg:mt}),new ys(Ns,$r)}return Is&&ma?E.apply(this,xi):(Ns=this.thru(or),Is?Ce?Ns.value()[0]:Ns.value():Ns)})}),xl(["pop","push","shift","sort","splice","unshift"],function(E){var F=ku[E],ee=/^(?:push|sort|unshift)$/.test(E)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(E);Ee.prototype[E]=function(){var qe=arguments;if(Ce&&!this.__chain__){var Ct=this.value();return F.apply(Xs(Ct)?Ct:[],qe)}return this[ee](function(oi){return F.apply(Xs(oi)?oi:[],qe)})}}),Yi(Or.prototype,function(E,F){var ee=Ee[F];if(ee){var Ce=ee.name+"";ya.call(Yo,Ce)||(Yo[Ce]=[]),Yo[Ce].push({name:F,func:ee})}}),Yo[Uh(mt,2).name]=[{name:"wrapper",func:mt}],Or.prototype.clone=function ko(){var E=new Or(this.__wrapped__);return E.__actions__=kc(this.__actions__),E.__dir__=this.__dir__,E.__filtered__=this.__filtered__,E.__iteratees__=kc(this.__iteratees__),E.__takeCount__=this.__takeCount__,E.__views__=kc(this.__views__),E},Or.prototype.reverse=function jo(){if(this.__filtered__){var E=new Or(this);E.__dir__=-1,E.__filtered__=!0}else(E=this.clone()).__dir__*=-1;return E},Or.prototype.value=function Yp(){var E=this.__wrapped__.value(),F=this.__dir__,ee=Xs(E),Ce=F<0,qe=ee?E.length:0,Ct=function Bd(E,F,ee){for(var Ce=-1,qe=ee.length;++Ce<qe;){var Ct=ee[Ce],oi=Ct.size;switch(Ct.type){case"drop":E+=oi;break;case"dropRight":F-=oi;break;case"take":F=Ai(F,E+oi);break;case"takeRight":E=ri(E,F-oi)}}return{start:E,end:F}}(0,qe,this.__views__),oi=Ct.start,xi=Ct.end,Gi=xi-oi,Xn=Ce?xi:oi-1,$n=this.__iteratees__,or=$n.length,$r=0,fs=Ai(Gi,this.__takeCount__);if(!ee||!Ce&&qe==Gi&&fs==Gi)return Gl(E,this.__actions__);var Is=[];e:for(;Gi--&&$r<fs;){for(var ma=-1,Ns=E[Xn+=F];++ma<or;){var fa=$n[ma],qh=fa.type,th=(0,fa.iteratee)(Ns);if(2==qh)Ns=th;else if(!th){if(1==qh)continue e;break e}}Is[$r++]=Ns}return Is},Ee.prototype.at=I0,Ee.prototype.chain=function M0(){return wp(this)},Ee.prototype.commit=function E_(){return new ys(this.value(),this.__chain__)},Ee.prototype.next=function Ep(){this.__values__===mt&&(this.__values__=Pv(this.value()));var E=this.__index__>=this.__values__.length;return{done:E,value:E?mt:this.__values__[this.__index__++]}},Ee.prototype.plant=function Io(E){for(var F,ee=this;ee instanceof Tr;){var Ce=Ua(ee);Ce.__index__=0,Ce.__values__=mt,F?qe.__wrapped__=Ce:F=Ce;var qe=Ce;ee=ee.__wrapped__}return qe.__wrapped__=E,F},Ee.prototype.reverse=function sm(){var E=this.__wrapped__;if(E instanceof Or){var F=E;return this.__actions__.length&&(F=new Or(this)),(F=F.reverse()).__actions__.push({func:Cp,args:[yp],thisArg:mt}),new ys(F,this.__chain__)}return this.thru(yp)},Ee.prototype.toJSON=Ee.prototype.valueOf=Ee.prototype.value=function O0(){return Gl(this.__wrapped__,this.__actions__)},Ee.prototype.first=Ee.prototype.head,Ec&&(Ee.prototype[Ec]=function Ty(){return this}),Ee}();wa._=Eu,(D=function(){return Eu}.call(Hs,Qt,Hs,ao))!==mt&&(ao.exports=D)}.call(this)},4448:function(ao){ao.exports=function(){"use strict";var Hs,Qt,D;function mt(n,j){if(Hs)if(Qt){var He="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Hs+")(sharedChunk); ("+Qt+")(sharedChunk); self.onerror = null;",Be={};Hs(Be),D=j(Be),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(D.workerUrl=window.URL.createObjectURL(new Blob([He],{type:"text/javascript"})))}else Qt=j;else Hs=j}return mt(0,function(n){var j=typeof self<"u"?self:{},He="2.15.0";let Be;const Re={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Be){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Be=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):c}catch{Be=c}}return Be},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Re.API_URL)return null;try{const c=new URL(Re.API_URL);return"api.mapbox.cn"===c.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===c.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},$e={supported:!1,testSupport:function(c){!_t&&nt&&(gt?Xt(c):it=c)}};let it,nt,_t=!1,gt=!1;function Xt(c){const a=c.createTexture();c.bindTexture(c.TEXTURE_2D,a);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,nt),c.isContextLost())return;$e.supported=!0}catch{}c.deleteTexture(a),_t=!0}j.document&&(nt=j.document.createElement("img"),nt.onload=function(){it&&Xt(it),it=null,gt=!0},nt.onerror=function(){_t=!0,it=null},nt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Et="01";function Tt(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Nt=Pi;function Pi(c,a,h,m){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=h,this.p2y=m}Pi.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(void 0===a&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,m=0;m<8;m++){var x=this.sampleCurveX(h)-c;if(Math.abs(x)<a)return h;var T=this.sampleCurveDerivativeX(h);if(Math.abs(T)<1e-6)break;h-=x/T}var O=0,G=1;for(h=c,m=0;m<20&&(x=this.sampleCurveX(h),!(Math.abs(x-c)<a));m++)c>x?O=h:G=h,h=.5*(G-O)+O;return h},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var tt=Tt(Nt),Ci=Mi;function Mi(c,a){this.x=c,this.y=a}Mi.prototype={clone:function(){return new Mi(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,h=c.y-this.y;return a*a+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),h=Math.sin(c),m=h*this.x+a*this.y;return this.x=a*this.x-h*this.y,this.y=m,this},_rotateAround:function(c,a){var h=Math.cos(c),m=Math.sin(c),x=a.y+m*(this.x-a.x)+h*(this.y-a.y);return this.x=a.x+h*(this.x-a.x)-m*(this.y-a.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Mi.convert=function(c){return c instanceof Mi?c:Array.isArray(c)?new Mi(c[0],c[1]):c};var kt=Tt(Ci);const Oi=Math.PI/180,vi=180/Math.PI;function hi(c){return c*Oi}function Dt(c){return c*vi}const yi=[[0,0],[1,0],[1,1],[0,1]];function Ri(c){if(c<=0)return 0;if(c>=1)return 1;const a=c*c,h=a*c;return 4*(c<.5?h:3*(c-a)+h-.75)}function Xi(c,a,h,m){const x=new tt(c,a,h,m);return function(T){return x.solve(T)}}const Tn=Xi(.25,.1,.25,1);function qi(c,a,h){return Math.min(h,Math.max(a,c))}function nn(c,a,h){return(h=qi((h-c)/(a-c),0,1))*h*(3-2*h)}function _n(c,a,h){const m=h-a,x=((c-a)%m+m)%m+a;return x===a?h:x}function Fn(c,a,h){if(!c.length)return h(null,[]);let m=c.length;const x=new Array(c.length);let T=null;c.forEach((O,G)=>{a(O,(W,q)=>{W&&(T=W),x[G]=q,0==--m&&h(T,x)})})}function mr(c){const a=[];for(const h in c)a.push(c[h]);return a}function hr(c,...a){for(const h of a)for(const m in h)c[m]=h[m];return c}let Nr=1;function Si(){return Nr++}function kn(){return function c(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)}()}function Jn(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function ts(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function Xr(c,a){c.forEach(h=>{a[h]&&(a[h]=a[h].bind(a))})}function Fr(c,a){return-1!==c.indexOf(a,c.length-a.length)}function En(c,a,h){const m={};for(const x in c)m[x]=a.call(h||this,c[x],x,c);return m}function Os(c,a,h){const m={};for(const x in c)a.call(h||this,c[x],x,c)&&(m[x]=c[x]);return m}function Cs(c){return Array.isArray(c)?c.map(Cs):"object"==typeof c&&c?En(c,Cs):c}const Ts={};function Zn(c){Ts[c]||(typeof console<"u"&&console.warn(c),Ts[c]=!0)}function Un(c,a,h){return(h.y-c.y)*(a.x-c.x)>(a.y-c.y)*(h.x-c.x)}function cr(c){let a=0;for(let h,m,x=0,T=c.length,O=T-1;x<T;O=x++)h=c[x],m=c[O],a+=(m.x-h.x)*(h.y+m.y);return a}function zn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function On(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,x,T)=>{const O=x||T;return a[m]=!O||O.toLowerCase(),""}),a["max-age"]){const h=parseInt(a["max-age"],10);isNaN(h)?delete a["max-age"]:a["max-age"]=h}return a}let Vr=null;function jn(c){if(null==Vr){const a=c.navigator?c.navigator.userAgent:null;Vr=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Vr}function an(c){try{const a=j[c];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}}function ur(c,a){return[c[4*a],c[4*a+1],c[4*a+2],c[4*a+3]]}const xr="mapbox-tiles";let Fs,Ds,zs=500,Vs=50;function Es(){try{return j.caches}catch{}}function wr(){Es()&&!Fs&&(Fs=j.caches.open(xr))}function us(c){const a=c.indexOf("?");if(a<0)return c;const m=function(x){const T=x.indexOf("?");return T>0?x.slice(T+1).split("&"):[]}(c).filter(x=>{const T=x.split("=");return"language"===T[0]||"worldview"===T[0]});return m.length?`${c.slice(0,a)}?${m.join("&")}`:c.slice(0,a)}let Ks=1/0;const io={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(io);class as extends Error{constructor(a,h,m){401===h&&wi(m)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=h,this.url=m}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Rs=zn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===j.location.protocol?j.parent:j).location.href,Ss=function(c,a){if(!(/^file:/.test(h=c.url)||/^file:/.test(Rs())&&!/^\w+:/.test(h))){if(j.fetch&&j.Request&&j.AbortController&&j.Request.prototype.hasOwnProperty("signal"))return function(m,x){const T=new j.AbortController,O=new j.Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,referrer:Rs(),referrerPolicy:m.referrerPolicy,signal:T.signal});let G=!1,W=!1;const q=(ce=O.url).indexOf("sku=")>0&&wi(ce);var ce;"json"===m.type&&O.headers.set("Accept","application/json");const pe=(De,Oe,Ve)=>{if(W)return;if(De&&"SecurityError"!==De.message&&Zn(De.toString()),Oe&&Ve)return ve(Oe);const at=Date.now();j.fetch(O).then(It=>{if(It.ok){const ii=q?It.clone():null;return ve(It,ii,at)}return x(new as(It.statusText,It.status,m.url))}).catch(It=>{"AbortError"!==It.name&&x(new Error(`${It.message} ${m.url}`))})},ve=(De,Oe,Ve)=>{("arrayBuffer"===m.type?De.arrayBuffer():"json"===m.type?De.json():De.text()).then(at=>{W||(Oe&&Ve&&function(It,ii,Ot){if(wr(),!Fs)return;const Kt={status:ii.status,statusText:ii.statusText,headers:new j.Headers};ii.headers.forEach((Ji,Ui)=>Kt.headers.set(Ui,Ji));const ci=On(ii.headers.get("Cache-Control")||"");if(ci["no-store"])return;ci["max-age"]&&Kt.headers.set("Expires",new Date(Ot+1e3*ci["max-age"]).toUTCString());const li=Kt.headers.get("Expires");li&&(new Date(li).getTime()-Ot<42e4||function(Ji,Ui){if(void 0===Ds)try{new Response(new ReadableStream),Ds=!0}catch{Ds=!1}Ds?Ui(Ji.body):Ji.blob().then(Ui)}(ii,Ji=>{const Ui=new j.Response(Ji,Kt);wr(),Fs&&Fs.then(wn=>wn.put(us(It.url),Ui)).catch(wn=>Zn(wn.message))}))}(O,Oe,Ve),G=!0,x(null,at,De.headers.get("Cache-Control"),De.headers.get("Expires")))}).catch(at=>{W||x(new Error(at.message))})};return q?function(De,Oe){if(wr(),!Fs)return Oe(null);const Ve=us(De.url);Fs.then(at=>{at.match(Ve).then(It=>{const ii=function(Ot){if(!Ot)return!1;const Kt=new Date(Ot.headers.get("Expires")||0),ci=On(Ot.headers.get("Cache-Control")||"");return Kt>Date.now()&&!ci["no-cache"]}(It);at.delete(Ve),ii&&at.put(Ve,It.clone()),Oe(null,It,ii)}).catch(Oe)}).catch(Oe)}(O,pe):pe(null,null),{cancel:()=>{W=!0,G||T.abort()}}}(c,a);if(zn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a,void 0,!0)}var h;return function(m,x){const T=new j.XMLHttpRequest;T.open(m.method||"GET",m.url,!0),"arrayBuffer"===m.type&&(T.responseType="arraybuffer");for(const O in m.headers)T.setRequestHeader(O,m.headers[O]);return"json"===m.type&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials="include"===m.credentials,T.onerror=()=>{x(new Error(T.statusText))},T.onload=()=>{if((T.status>=200&&T.status<300||0===T.status)&&null!==T.response){let O=T.response;if("json"===m.type)try{O=JSON.parse(T.response)}catch(G){return x(G)}x(null,O,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else x(new as(T.statusText,T.status,m.url))},T.send(m.body),{cancel:()=>T.abort()}}(c,a)},Bs=function(c,a){return Ss(hr(c,{type:"arrayBuffer"}),a)};function xa(c){const a=j.document.createElement("a");return a.href=c,a.protocol===j.document.location.protocol&&a.host===j.document.location.host}const Gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ue,Je;Ue=[],Je=0;const At=function(c,a){if($e.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),Je>=Re.MAX_PARALLEL_IMAGE_REQUESTS){const T={requestParameters:c,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return Ue.push(T),T}Je++;let h=!1;const m=()=>{if(!h)for(h=!0,Je--;Ue.length&&Je<Re.MAX_PARALLEL_IMAGE_REQUESTS;){const T=Ue.shift(),{requestParameters:O,callback:G,cancelled:W}=T;W||(T.cancel=At(O,G).cancel)}},x=Bs(c,(T,O,G,W)=>{m(),T?a(T):O&&(j.createImageBitmap?function(q,ce){const pe=new j.Blob([new Uint8Array(q)],{type:"image/png"});j.createImageBitmap(pe).then(ve=>{ce(null,ve)}).catch(ve=>{ce(new Error(`Could not load image because of ${ve.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(O,(q,ce)=>a(q,ce,G,W)):function(q,ce){const pe=new j.Image,ve=j.URL;pe.onload=()=>{ce(null,pe),ve.revokeObjectURL(pe.src),pe.onload=null,j.requestAnimationFrame(()=>{pe.src=Gt})},pe.onerror=()=>ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const De=new j.Blob([new Uint8Array(q)],{type:"image/png"});pe.src=q.byteLength?ve.createObjectURL(De):Gt}(O,(q,ce)=>a(q,ce,G,W)))});return{cancel:()=>{x.cancel(),m()}}},St="NO_ACCESS_TOKEN";function si(c){return 0===c.indexOf("mapbox:")}function wi(c){return Re.API_URL_REGEX.test(c)}function ki(c){return Re.API_CDN_URL_REGEX.test(c)}function Mt(c){return Re.API_STYLE_REGEX.test(c)&&!zi(c)}function zi(c){return Re.API_SPRITE_REGEX.test(c)}const Sn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Rn(c){const a=c.match(Sn);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Hi(c){const a=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${a}`}const ar="mapbox.eventData";function Ht(c){if(!c)return null;const a=c.split(".");if(!a||3!==a.length)return null;try{return JSON.parse(decodeURIComponent(j.atob(a[1]).split("").map(h=>"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Vt{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const h=Ht(Re.ACCESS_TOKEN);let m="";return m=h&&h.u?j.btoa(encodeURIComponent(h.u).replace(/%([0-9A-F]{2})/g,(x,T)=>String.fromCharCode(+("0x"+T)))):Re.ACCESS_TOKEN||"",a?`${ar}.${a}:${m}`:`${ar}:${m}`}fetchEventData(){const a=an("localStorage"),h=this.getStorageKey(),m=this.getStorageKey("uuid");if(a)try{const x=j.localStorage.getItem(h);x&&(this.eventData=JSON.parse(x));const T=j.localStorage.getItem(m);T&&(this.anonId=T)}catch{Zn("Unable to read from LocalStorage")}}saveEventData(){const a=an("localStorage"),h=this.getStorageKey(),m=this.getStorageKey("uuid");if(a)try{j.localStorage.setItem(m,this.anonId),Object.keys(this.eventData).length>=1&&j.localStorage.setItem(h,JSON.stringify(this.eventData))}catch{Zn("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,h,m,x){if(!Re.EVENTS_URL)return;const T=Rn(Re.EVENTS_URL);T.params.push(`access_token=${x||Re.ACCESS_TOKEN||""}`);const O={event:this.type,created:new Date(a).toISOString()},G=h?hr(O,h):O,W={url:Hi(T),headers:{"Content-Type":"text/plain"},body:JSON.stringify([G])};var ce;this.pendingRequest=(ce=q=>{this.pendingRequest=null,m(q),this.saveEventData(),this.processRequests(x)},Ss(hr(W,{method:"POST"}),ce))}queueRequest(a,h){this.queue.push(a),this.processRequests(h)}}const dt=new class extends Vt{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,a){Re.EVENTS_URL&&Re.ACCESS_TOKEN&&Array.isArray(c)&&c.some(h=>si(h)||wi(h))&&this.queueRequest(Date.now(),a)}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=Ht(Re.ACCESS_TOKEN),h=a?a.u:Re.ACCESS_TOKEN;let m=h!==this.eventData.tokenU;ts(this.anonId)||(this.anonId=kn(),m=!0);const x=this.queue.shift();if(this.eventData.lastSuccess){const T=new Date(this.eventData.lastSuccess),O=new Date(x),G=(x-this.eventData.lastSuccess)/864e5;m=m||G>=1||G<-1||T.getDate()!==O.getDate()}else m=!0;m?this.postEvent(x,{sdkIdentifier:"mapbox-gl-js",sdkVersion:He,skuId:Et,"enabled.telemetry":!1,userId:this.anonId},T=>{T||(this.eventData.lastSuccess=x,this.eventData.tokenU=h)},c):this.processRequests()}},ot=dt.postTurnstileEvent.bind(dt),Xe=new class extends Vt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,a,h,m){this.skuToken=a,this.errorCb=m,Re.EVENTS_URL&&(h||Re.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},h):this.errorCb(new Error(St)))}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{id:a,timestamp:h}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),ts(this.anonId)||(this.anonId=kn()),this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:He,skuId:Et,skuToken:this.skuToken,userId:this.anonId},m=>{m?this.errorCb(m):a&&(this.success[a]=!0)},c))}},Qe=Xe.postMapLoadEvent.bind(Xe),Rt=new class extends Vt{constructor(){super("gljs.performance")}postPerformanceEvent(c,a){Re.EVENTS_URL&&(c||Re.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},c)}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:a,performanceData:h}=this.queue.shift(),m=function(x){const T=j.performance.getEntriesByType("resource"),O=j.performance.getEntriesByType("mark"),G=function(ve){const De={};if(ve)for(const Oe in ve)if("other"!==Oe)for(const Ve of ve[Oe]){const at=`${Oe}ResolveRangeMin`,It=`${Oe}ResolveRangeMax`,ii=`${Oe}RequestCount`,Ot=`${Oe}RequestCachedCount`;De[at]=Math.min(De[at]||1/0,Ve.startTime),De[It]=Math.max(De[It]||-1/0,Ve.responseEnd);const Kt=ci=>{void 0===De[ci]&&(De[ci]=0),++De[ci]};void 0!==Ve.transferSize&&0===Ve.transferSize&&Kt(Ot),Kt(ii)}return De}(function(ve,De){const Oe={};if(ve)for(const Ve of ve){const at=De(Ve);void 0===Oe[at]&&(Oe[at]=[]),Oe[at].push(Ve)}return Oe}(T,ke)),W=j.devicePixelRatio,q=j.navigator.connection||j.navigator.mozConnection||j.navigator.webkitConnection,ce={counters:[],metadata:[],attributes:[]},pe=(ve,De,Oe)=>{null!=Oe&&ve.push({name:De,value:Oe.toString()})};for(const ve in G)pe(ce.counters,ve,G[ve]);if(x.interactionRange[0]!==1/0&&x.interactionRange[1]!==-1/0&&(pe(ce.counters,"interactionRangeMin",x.interactionRange[0]),pe(ce.counters,"interactionRangeMax",x.interactionRange[1])),O)for(const ve of Object.keys(bt)){const De=bt[ve],Oe=O.find(Ve=>Ve.name===De);Oe&&pe(ce.counters,De,Oe.startTime)}return pe(ce.counters,"visibilityHidden",x.visibilityHidden),pe(ce.attributes,"style",function(ve){if(ve)for(const De of ve){const Oe=De.name.split("?")[0];if(Mt(Oe)){const Ve=Oe.split("/").slice(-2);if(2===Ve.length)return`mapbox://styles/${Ve[0]}/${Ve[1]}`}}}(T)),pe(ce.attributes,"terrainEnabled",x.terrainEnabled?"true":"false"),pe(ce.attributes,"fogEnabled",x.fogEnabled?"true":"false"),pe(ce.attributes,"projection",x.projection),pe(ce.attributes,"zoom",x.zoom),pe(ce.metadata,"devicePixelRatio",W),pe(ce.metadata,"connectionEffectiveType",q?q.effectiveType:void 0),pe(ce.metadata,"navigatorUserAgent",j.navigator.userAgent),pe(ce.metadata,"screenWidth",j.screen.width),pe(ce.metadata,"screenHeight",j.screen.height),pe(ce.metadata,"windowWidth",j.innerWidth),pe(ce.metadata,"windowHeight",j.innerHeight),pe(ce.metadata,"mapWidth",x.width/W),pe(ce.metadata,"mapHeight",x.height/W),pe(ce.metadata,"webglRenderer",x.renderer),pe(ce.metadata,"webglVendor",x.vendor),pe(ce.metadata,"sdkVersion",He),pe(ce.metadata,"sdkIdentifier","mapbox-gl-js"),ce}(h);for(const x of m.metadata);for(const x of m.counters);for(const x of m.attributes);this.postEvent(a,m,()=>{},c)}},ui=Rt.postPerformanceEvent.bind(Rt),en=new class extends Vt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,a,h,m){if(!Re.API_URL||!Re.SESSION_PATH)return;const x=Rn(Re.API_URL+Re.SESSION_PATH);x.params.push(`sku=${a||""}`),x.params.push(`access_token=${m||Re.ACCESS_TOKEN||""}`);const T={url:Hi(x),headers:{"Content-Type":"text/plain"}};var G;this.pendingRequest=(G=O=>{this.pendingRequest=null,h(O),this.saveEventData(),this.processRequests(m)},Ss(hr(T,{method:"GET"}),G))}getSessionAPI(c,a,h,m){this.skuToken=a,this.errorCb=m,Re.SESSION_PATH&&Re.API_URL&&(h||Re.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},h):this.errorCb(new Error(St)))}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{id:a,timestamp:h}=this.queue.shift();a&&this.success[a]||this.getSession(h,this.skuToken,m=>{m?this.errorCb(m):a&&(this.success[a]=!0)},c)}},ji=en.getSessionAPI.bind(en),bn=new Set,bt={create:"create",load:"load",fullLoad:"fullLoad"},Ft={mark(c){j.performance.mark(c)},measure(c,a,h){j.performance.measure(c,a,h)}};function ke(c){const a=c.name.split("?")[0];return ki(a)&&a.includes("mapbox-gl.js")?"javascript":ki(a)&&a.includes("mapbox-gl.css")?"css":Re.API_FONTS_REGEX.test(a)?"fontRange":zi(a)?"sprite":Mt(a)?"style":Re.API_TILEJSON_REGEX.test(a)?"tilejson":"other"}const yt=j.performance;function Wt(c){const a=c?c.url.toString():void 0;return yt.getEntriesByName(a)}let We,Jt,ge,l;const u={now:()=>void 0!==ge?ge:j.performance.now(),setNow(c){ge=c},restoreNow(){ge=void 0},frame(c){const a=j.requestAnimationFrame(c);return{cancel:()=>j.cancelAnimationFrame(a)}},getImageData(c,a=0){const{width:h,height:m}=c;l||(l=j.document.createElement("canvas"));const x=l.getContext("2d",{willReadFrequently:!0});if(!x)throw new Error("failed to create canvas 2d context");return(h>l.width||m>l.height)&&(l.width=h,l.height=m),x.clearRect(-a,-a,h+2*a,m+2*a),x.drawImage(c,0,0,h,m),x.getImageData(-a,-a,h+2*a,m+2*a)},resolveURL:c=>(We||(We=j.document.createElement("a")),We.href=c,We.href),get devicePixelRatio(){return j.devicePixelRatio},get prefersReducedMotion(){return!!j.matchMedia&&(null==Jt&&(Jt=j.matchMedia("(prefers-reduced-motion: reduce)")),Jt.matches)}};function p(c,a,h){h[c]&&-1!==h[c].indexOf(a)||(h[c]=h[c]||[],h[c].push(a))}function y(c,a,h){if(h&&h[c]){const m=h[c].indexOf(a);-1!==m&&h[c].splice(m,1)}}class w{constructor(a,h={}){hr(this,h),this.type=a}}class C extends w{constructor(a,h={}){super("error",hr({error:a},h))}}class M{on(a,h){return this._listeners=this._listeners||{},p(a,h,this._listeners),this}off(a,h){return y(a,h,this._listeners),y(a,h,this._oneTimeListeners),this}once(a,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},p(a,h,this._oneTimeListeners),this):new Promise(m=>this.once(a,m))}fire(a,h){"string"==typeof a&&(a=new w(a,h||{}));const m=a.type;if(this.listens(m)){a.target=this;const x=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const G of x)G.call(this,a);const T=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const G of T)y(m,G,this._oneTimeListeners),G.call(this,a);const O=this._eventedParent;O&&(hr(a,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),O.fire(a))}else a instanceof C&&console.error(a.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,h){return this._eventedParent=a,this._eventedParentData=h,this}}var B=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function H(c,...a){for(const h of a)for(const m in h)c[m]=h[m];return c}function K(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function J(c){if(Array.isArray(c))return c.map(J);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const h in c)a[h]=J(c[h]);return a}return K(c)}class ne extends Error{constructor(a,h){super(h),this.message=h,this.key=a}}var de=ne;class xe{constructor(a,h=[]){this.parent=a,this.bindings={};for(const[m,x]of h)this.bindings[m]=x}concat(a){return new xe(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}var Se=xe;const Pe={kind:"null"},Te={kind:"number"},Ne={kind:"string"},U={kind:"boolean"},le={kind:"color"},we={kind:"object"},Le={kind:"value"},je={kind:"collator"},lt={kind:"formatted"},jt={kind:"resolvedImage"};function qt(c,a){return{kind:"array",itemType:c,N:a}}function Di(c){if("array"===c.kind){const a=Di(c.itemType);return"number"==typeof c.N?`array<${a}, ${c.N}>`:"value"===c.itemType.kind?"array":`array<${a}>`}return c.kind}const Qi=[Pe,Te,Ne,U,le,lt,we,qt(Le),jt];function cn(c,a){if("error"===a.kind)return null;if("array"===c.kind){if("array"===a.kind&&(0===a.N&&"value"===a.itemType.kind||!cn(c.itemType,a.itemType))&&("number"!=typeof c.N||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if("value"===c.kind)for(const h of Qi)if(!cn(h,a))return null}return`Expected ${Di(c)} but found ${Di(a)} instead.`}function Qn(c,a){return a.some(h=>h.kind===c.kind)}function gr(c,a){return a.some(h=>"null"===h?null===c:"array"===h?Array.isArray(c):"object"===h?c&&!Array.isArray(c)&&"object"==typeof c:h===typeof c)}var Zr,hs={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function vs(c){return(c=Math.round(c))<0?0:c>255?255:c}function _s(c){return vs("%"===c[c.length-1]?parseFloat(c)/100*255:parseInt(c))}function Js(c){return(a="%"===c[c.length-1]?parseFloat(c)/100:parseFloat(c))<0?0:a>1?1:a;var a}function oa(c,a,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?c+(a-c)*h*6:2*h<1?a:3*h<2?c+(a-c)*(2/3-h)*6:c}try{Zr={}.parseCSSColor=function(c){var a,h=c.replace(/ /g,"").toLowerCase();if(h in hs)return hs[h].slice();if("#"===h[0])return 4===h.length?(a=parseInt(h.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===h.length&&(a=parseInt(h.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var m=h.indexOf("("),x=h.indexOf(")");if(-1!==m&&x+1===h.length){var T=h.substr(0,m),O=h.substr(m+1,x-(m+1)).split(","),G=1;switch(T){case"rgba":if(4!==O.length)return null;G=Js(O.pop());case"rgb":return 3!==O.length?null:[_s(O[0]),_s(O[1]),_s(O[2]),G];case"hsla":if(4!==O.length)return null;G=Js(O.pop());case"hsl":if(3!==O.length)return null;var W=(parseFloat(O[0])%360+360)%360/360,q=Js(O[1]),ce=Js(O[2]),pe=ce<=.5?ce*(q+1):ce+q-ce*q,ve=2*ce-pe;return[vs(255*oa(ve,pe,W+1/3)),vs(255*oa(ve,pe,W)),vs(255*oa(ve,pe,W-1/3)),G];default:return null}}return null}}catch{}class Ea{constructor(a,h,m,x=1){this.r=a,this.g=h,this.b=m,this.a=x}static parse(a){if(!a)return;if(a instanceof Ea)return a;if("string"!=typeof a)return;const h=Zr(a);return h?new Ea(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3]):void 0}toString(){const[a,h,m,x]=this.toArray();return`rgba(${Math.round(a)},${Math.round(h)},${Math.round(m)},${x})`}toArray(){const{r:a,g:h,b:m,a:x}=this;return 0===x?[0,0,0,0]:[255*a/x,255*h/x,255*m/x,x]}toArray01(){const{r:a,g:h,b:m,a:x}=this;return 0===x?[0,0,0,0]:[a/x,h/x,m/x,x]}toArray01PremultipliedAlpha(){const{r:a,g:h,b:m,a:x}=this;return[a,h,m,x]}}Ea.black=new Ea(0,0,0,1),Ea.white=new Ea(1,1,1,1),Ea.transparent=new Ea(0,0,0,0),Ea.red=new Ea(1,0,0,1),Ea.blue=new Ea(0,0,1,1);var Ws=Ea;class ls{constructor(a,h,m){this.sensitivity=a?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,h){return this.collator.compare(a,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ka{constructor(a,h,m,x,T){this.text=a.normalize?a.normalize():a,this.image=h,this.scale=m,this.fontStack=x,this.textColor=T}}class ss{constructor(a){this.sections=a}static fromString(a){return new ss([new ka(a,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(a=>0!==a.text.length||a.image&&0!==a.image.name.length)}static factory(a){return a instanceof ss?a:ss.fromString(a)}toString(){return 0===this.sections.length?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const h of this.sections){if(h.image){a.push(["image",h.image.name]);continue}a.push(h.text);const m={};h.fontStack&&(m["text-font"]=["literal",h.fontStack.split(",")]),h.scale&&(m["font-scale"]=h.scale),h.textColor&&(m["text-color"]=["rgba"].concat(h.textColor.toArray())),a.push(m)}return a}}class Ta{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Ta({name:a,available:!1}):null}serialize(){return["image",this.name]}}function dh(c,a,h,m){return"number"==typeof c&&c>=0&&c<=255&&"number"==typeof a&&a>=0&&a<=255&&"number"==typeof h&&h>=0&&h<=255?void 0===m||"number"==typeof m&&m>=0&&m<=1?null:`Invalid rgba value [${[c,a,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof m?[c,a,h,m]:[c,a,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bc(c){if(null===c||"string"==typeof c||"boolean"==typeof c||"number"==typeof c||c instanceof Ws||c instanceof ls||c instanceof ss||c instanceof Ta)return!0;if(Array.isArray(c)){for(const a of c)if(!Bc(a))return!1;return!0}if("object"==typeof c){for(const a in c)if(!Bc(c[a]))return!1;return!0}return!1}function za(c){if(null===c)return Pe;if("string"==typeof c)return Ne;if("boolean"==typeof c)return U;if("number"==typeof c)return Te;if(c instanceof Ws)return le;if(c instanceof ls)return je;if(c instanceof ss)return lt;if(c instanceof Ta)return jt;if(Array.isArray(c)){const a=c.length;let h;for(const m of c){const x=za(m);if(h){if(h===x)continue;h=Le;break}h=x}return qt(h||Le,a)}return we}function fc(c){const a=typeof c;return null===c?"":"string"===a||"number"===a||"boolean"===a?String(c):c instanceof Ws||c instanceof ss||c instanceof Ta?c.toString():JSON.stringify(c)}class rd{constructor(a,h){this.type=a,this.value=h}static parse(a,h){if(2!==a.length)return h.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Bc(a[1]))return h.error("invalid value");const m=a[1];let x=za(m);const T=h.expectedType;return"array"!==x.kind||0!==x.N||!T||"array"!==T.kind||"number"==typeof T.N&&0!==T.N||(x=T),new rd(x,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ws?["rgba"].concat(this.value.toArray()):this.value instanceof ss?this.value.serialize():this.value}}var Xl=rd,Sa=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const vl={string:Ne,number:Te,boolean:U,object:we};class Va{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");let m,x=1;const T=a[0];if("array"===T){let G,W;if(a.length>2){const q=a[1];if("string"!=typeof q||!(q in vl)||"object"===q)return h.error('The item type argument of "array" must be one of string, number, boolean',1);G=vl[q],x++}else G=Le;if(a.length>3){if(null!==a[2]&&("number"!=typeof a[2]||a[2]<0||a[2]!==Math.floor(a[2])))return h.error('The length argument to "array" must be a positive integer literal',2);W=a[2],x++}m=qt(G,W)}else m=vl[T];const O=[];for(;x<a.length;x++){const G=h.parse(a[x],x,Le);if(!G)return null;O.push(G)}return new Va(m,O)}evaluate(a){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(a);if(!cn(this.type,za(m)))return m;if(h===this.args.length-1)throw new Sa(`Expected value to be of type ${Di(this.type)}, but found ${Di(za(m))} instead.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,h=[a.kind];if("array"===a.kind){const m=a.itemType;if("string"===m.kind||"number"===m.kind||"boolean"===m.kind){h.push(m.kind);const x=a.N;("number"==typeof x||this.args.length>1)&&h.push(x)}}return h.concat(this.args.map(m=>m.serialize()))}}var ba=Va;class Nc{constructor(a){this.type=lt,this.sections=a}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const m=a[1];if(!Array.isArray(m)&&"object"==typeof m)return h.error("First argument must be an image or text section.");const x=[];let T=!1;for(let O=1;O<=a.length-1;++O){const G=a[O];if(T&&"object"==typeof G&&!Array.isArray(G)){T=!1;let W=null;if(G["font-scale"]&&(W=h.parse(G["font-scale"],1,Te),!W))return null;let q=null;if(G["text-font"]&&(q=h.parse(G["text-font"],1,qt(Ne)),!q))return null;let ce=null;if(G["text-color"]&&(ce=h.parse(G["text-color"],1,le),!ce))return null;const pe=x[x.length-1];pe.scale=W,pe.font=q,pe.textColor=ce}else{const W=h.parse(a[O],1,Le);if(!W)return null;const q=W.type.kind;if("string"!==q&&"value"!==q&&"null"!==q&&"resolvedImage"!==q)return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,x.push({content:W,scale:null,font:null,textColor:null})}}return new Nc(x)}evaluate(a){return new ss(this.sections.map(h=>{const m=h.content.evaluate(a);return za(m)===jt?new ka("",m,null,null,null):new ka(fc(m),null,h.scale?h.scale.evaluate(a):null,h.font?h.font.evaluate(a).join(","):null,h.textColor?h.textColor.evaluate(a):null)}))}eachChild(a){for(const h of this.sections)a(h.content),h.scale&&a(h.scale),h.font&&a(h.font),h.textColor&&a(h.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const h of this.sections){a.push(h.content.serialize());const m={};h.scale&&(m["font-scale"]=h.scale.serialize()),h.font&&(m["text-font"]=h.font.serialize()),h.textColor&&(m["text-color"]=h.textColor.serialize()),a.push(m)}return a}}class Rh{constructor(a){this.type=jt,this.input=a}static parse(a,h){if(2!==a.length)return h.error("Expected two arguments.");const m=h.parse(a[1],1,Ne);return m?new Rh(m):h.error("No image name provided.")}evaluate(a){const h=this.input.evaluate(a),m=Ta.fromString(h);return m&&a.availableImages&&(m.available=a.availableImages.indexOf(h)>-1),m}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const hf={"to-boolean":U,"to-color":le,"to-number":Te,"to-string":Ne};class Ff{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const m=a[0];if(("to-boolean"===m||"to-string"===m)&&2!==a.length)return h.error("Expected one argument.");const x=hf[m],T=[];for(let O=1;O<a.length;O++){const G=h.parse(a[O],O,Le);if(!G)return null;T.push(G)}return new Ff(x,T)}evaluate(a){if("boolean"===this.type.kind)return!!this.args[0].evaluate(a);if("color"===this.type.kind){let h,m;for(const x of this.args){if(h=x.evaluate(a),m=null,h instanceof Ws)return h;if("string"==typeof h){const T=a.parseColor(h);if(T)return T}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:dh(h[0],h[1],h[2],h[3]),!m))return new Ws(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Sa(m||`Could not parse color from value '${"string"==typeof h?h:String(JSON.stringify(h))}'`)}if("number"===this.type.kind){let h=null;for(const m of this.args){if(h=m.evaluate(a),null===h)return 0;const x=Number(h);if(!isNaN(x))return x}throw new Sa(`Could not convert ${JSON.stringify(h)} to number.`)}return"formatted"===this.type.kind?ss.fromString(fc(this.args[0].evaluate(a))):"resolvedImage"===this.type.kind?Ta.fromString(fc(this.args[0].evaluate(a))):fc(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Nc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Rh(this.args[0]).serialize();const a=[`to-${this.type.kind}`];return this.eachChild(h=>{a.push(h.serialize())}),a}}var Lh=Ff;const Ys=["Unknown","Point","LineString","Polygon"];var xd=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ys[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,a=this.featureDistanceData.scale,{x:h,y:m}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*a-c[0])+this.featureDistanceData.bearing[1]*(m*a-c[1])}return 0}parseColor(c){let a=this._parseColorCache[c];return a||(a=this._parseColorCache[c]=Ws.parse(c)),a}};class Ko{constructor(a,h,m,x){this.name=a,this.type=h,this._evaluate=m,this.args=x}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,h){const m=a[0],x=Ko.definitions[m];if(!x)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(x)?x[0]:x.type,O=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,G=O.filter(([q])=>!Array.isArray(q)||q.length===a.length-1);let W=null;for(const[q,ce]of G){W=new Bh(h.registry,h.path,null,h.scope);const pe=[];let ve=!1;for(let De=1;De<a.length;De++){const Oe=a[De],Ve=Array.isArray(q)?q[De-1]:q.type,at=W.parse(Oe,1+pe.length,Ve);if(!at){ve=!0;break}pe.push(at)}if(!ve)if(Array.isArray(q)&&q.length!==pe.length)W.error(`Expected ${q.length} arguments, but found ${pe.length} instead.`);else{for(let De=0;De<pe.length;De++){const Oe=Array.isArray(q)?q[De]:q.type,Ve=pe[De];W.concat(De+1).checkSubtype(Oe,Ve.type)}if(0===W.errors.length)return new Ko(m,T,ce,pe)}}if(1===G.length)h.errors.push(...W.errors);else{const q=(G.length?G:O).map(([pe])=>{return ve=pe,Array.isArray(ve)?`(${ve.map(Di).join(", ")})`:`(${Di(ve.type)}...)`;var ve}).join(" | "),ce=[];for(let pe=1;pe<a.length;pe++){const ve=h.parse(a[pe],1+ce.length);if(!ve)return null;ce.push(Di(ve.type))}h.error(`Expected arguments of type ${q}, but found (${ce.join(", ")}) instead.`)}return null}static register(a,h){Ko.definitions=h;for(const m in h)a[m]=Ko}}var wa=Ko;class Ph{constructor(a,h,m){this.type=je,this.locale=m,this.caseSensitive=a,this.diacriticSensitive=h}static parse(a,h){if(2!==a.length)return h.error("Expected one argument.");const m=a[1];if("object"!=typeof m||Array.isArray(m))return h.error("Collator options argument must be an object.");const x=h.parse(void 0!==m["case-sensitive"]&&m["case-sensitive"],1,U);if(!x)return null;const T=h.parse(void 0!==m["diacritic-sensitive"]&&m["diacritic-sensitive"],1,U);if(!T)return null;let O=null;return m.locale&&(O=h.parse(m.locale,1,Ne),!O)?null:new Ph(x,T,O)}evaluate(a){return new ls(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}const _l=8192;function Wu(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function $u(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function No(c,a){const h=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,x=Math.pow(2,a.z);return[Math.round(h*x*_l),Math.round(m*x*_l)]}function df(c,a,h){const m=c[0]-a[0],x=c[1]-a[1],T=c[0]-h[0],O=c[1]-h[1];return m*O-T*x==0&&m*T<=0&&x*O<=0}function Fh(c,a){let h=!1;for(let O=0,G=a.length;O<G;O++){const W=a[O];for(let q=0,ce=W.length;q<ce-1;q++){if(df(c,W[q],W[q+1]))return!1;(x=W[q])[1]>(m=c)[1]!=(T=W[q+1])[1]>m[1]&&m[0]<(T[0]-x[0])*(m[1]-x[1])/(T[1]-x[1])+x[0]&&(h=!h)}}var m,x,T;return h}function pc(c,a){for(let h=0;h<a.length;h++)if(Fh(c,a[h]))return!0;return!1}function fh(c,a,h,m){const x=m[0]-h[0],T=m[1]-h[1],O=(c[0]-h[0])*T-x*(c[1]-h[1]),G=(a[0]-h[0])*T-x*(a[1]-h[1]);return O>0&&G<0||O<0&&G>0}function yl(c,a,h){for(const q of h)for(let ce=0;ce<q.length-1;++ce)if((G=[(O=q[ce+1])[0]-(T=q[ce])[0],O[1]-T[1]])[0]*(W=[(x=a)[0]-(m=c)[0],x[1]-m[1]])[1]-G[1]*W[0]!=0&&fh(m,x,T,O)&&fh(T,O,m,x))return!0;var m,x,T,O,G,W;return!1}function ia(c,a){for(let h=0;h<c.length;++h)if(!Fh(c[h],a))return!1;for(let h=0;h<c.length-1;++h)if(yl(c[h],c[h+1],a))return!1;return!0}function Zl(c,a){for(let h=0;h<a.length;h++)if(ia(c,a[h]))return!0;return!1}function xu(c,a,h){const m=[];for(let x=0;x<c.length;x++){const T=[];for(let O=0;O<c[x].length;O++){const G=No(c[x][O],h);Wu(a,G),T.push(G)}m.push(T)}return m}function xl(c,a,h){const m=[];for(let x=0;x<c.length;x++){const T=xu(c[x],a,h);m.push(T)}return m}function bd(c,a,h,m){if(c[0]<h[0]||c[0]>h[2]){const x=.5*m;let T=c[0]-h[0]>x?-m:h[0]-c[0]>x?m:0;0===T&&(T=c[0]-h[2]>x?-m:h[2]-c[0]>x?m:0),c[0]+=T}Wu(a,c)}function sl(c,a,h,m){const x=Math.pow(2,m.z)*_l,T=[m.x*_l,m.y*_l],O=[];if(!c)return O;for(const G of c)for(const W of G){const q=[W.x+T[0],W.y+T[1]];bd(q,a,h,x),O.push(q)}return O}function pr(c,a,h,m){const x=Math.pow(2,m.z)*_l,T=[m.x*_l,m.y*_l],O=[];if(!c)return O;for(const W of c){const q=[];for(const ce of W){const pe=[ce.x+T[0],ce.y+T[1]];Wu(a,pe),q.push(pe)}O.push(q)}if(a[2]-a[0]<=x/2){(G=a)[0]=G[1]=1/0,G[2]=G[3]=-1/0;for(const W of O)for(const q of W)bd(q,a,h,x)}var G;return O}class al{constructor(a,h){this.type=U,this.geojson=a,this.geometries=h}static parse(a,h){if(2!==a.length)return h.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Bc(a[1])){const m=a[1];if("FeatureCollection"===m.type)for(let x=0;x<m.features.length;++x){const T=m.features[x].geometry.type;if("Polygon"===T||"MultiPolygon"===T)return new al(m,m.features[x].geometry)}else if("Feature"===m.type){const x=m.geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new al(m,m.geometry)}else if("Polygon"===m.type||"MultiPolygon"===m.type)return new al(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(null!=a.geometry()&&null!=a.canonicalID()){if("Point"===a.geometryType())return function(h,m){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],O=h.canonicalID();if(!O)return!1;if("Polygon"===m.type){const G=xu(m.coordinates,T,O),W=sl(h.geometry(),x,T,O);if(!$u(x,T))return!1;for(const q of W)if(!Fh(q,G))return!1}if("MultiPolygon"===m.type){const G=xl(m.coordinates,T,O),W=sl(h.geometry(),x,T,O);if(!$u(x,T))return!1;for(const q of W)if(!pc(q,G))return!1}return!0}(a,this.geometries);if("LineString"===a.geometryType())return function(h,m){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],O=h.canonicalID();if(!O)return!1;if("Polygon"===m.type){const G=xu(m.coordinates,T,O),W=pr(h.geometry(),x,T,O);if(!$u(x,T))return!1;for(const q of W)if(!ia(q,G))return!1}if("MultiPolygon"===m.type){const G=xl(m.coordinates,T,O),W=pr(h.geometry(),x,T,O);if(!$u(x,T))return!1;for(const q of W)if(!Zl(q,G))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var ol=al;function va(c){if(c instanceof wa&&("get"===c.name&&1===c.args.length||"feature-state"===c.name||"has"===c.name&&1===c.args.length||"properties"===c.name||"geometry-type"===c.name||"id"===c.name||/^filter-/.test(c.name))||c instanceof ol)return!1;let a=!0;return c.eachChild(h=>{a&&!va(h)&&(a=!1)}),a}function po(c){if(c instanceof wa&&"feature-state"===c.name)return!1;let a=!0;return c.eachChild(h=>{a&&!po(h)&&(a=!1)}),a}function ql(c,a){if(c instanceof wa&&a.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(m=>{h&&!ql(m,a)&&(h=!1)}),h}class ph{constructor(a,h){this.type=h.type,this.name=a,this.boundExpression=h}static parse(a,h){if(2!==a.length||"string"!=typeof a[1])return h.error("'var' expression requires exactly one string literal argument.");const m=a[1];return h.scope.has(m)?new ph(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Kl=ph;class tu{constructor(a,h=[],m,x=new Se,T=[]){this.registry=a,this.path=h,this.key=h.map(O=>`[${O}]`).join(""),this.scope=x,this.errors=T,this.expectedType=m}parse(a,h,m,x,T={}){return h?this.concat(h,m,x)._parse(a,T):this._parse(a,T)}_parse(a,h){function m(x,T,O){return"assert"===O?new ba(T,[x]):"coerce"===O?new Lh(T,[x]):x}if(null!==a&&"string"!=typeof a&&"boolean"!=typeof a&&"number"!=typeof a||(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=a[0];if("string"!=typeof x)return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[x];if(T){let O=T.parse(a,this);if(!O)return null;if(this.expectedType){const G=this.expectedType,W=O.type;if("string"!==G.kind&&"number"!==G.kind&&"boolean"!==G.kind&&"object"!==G.kind&&"array"!==G.kind||"value"!==W.kind)if("color"!==G.kind&&"formatted"!==G.kind&&"resolvedImage"!==G.kind||"value"!==W.kind&&"string"!==W.kind){if(this.checkSubtype(G,W))return null}else O=m(O,G,h.typeAnnotation||"coerce");else O=m(O,G,h.typeAnnotation||"assert")}if(!(O instanceof Xl)&&"resolvedImage"!==O.type.kind&&Xa(O)){const G=new xd;try{O=new Xl(O.type,O.evaluate(G))}catch(W){return this.error(W.message),null}}return O}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===a?"'undefined' value invalid. Use null instead.":"object"==typeof a?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,h,m){const x="number"==typeof a?this.path.concat(a):this.path,T=m?this.scope.concat(m):this.scope;return new tu(this.registry,x,h||null,T,this.errors)}error(a,...h){const m=`${this.key}${h.map(x=>`[${x}]`).join("")}`;this.errors.push(new de(m,a))}checkSubtype(a,h){const m=cn(a,h);return m&&this.error(m),m}}var Bh=tu;function Xa(c){if(c instanceof Kl)return Xa(c.boundExpression);if(c instanceof wa&&"error"===c.name||c instanceof Ph||c instanceof ol)return!1;const a=c instanceof Lh||c instanceof ba;let h=!0;return c.eachChild(m=>{h=a?h&&Xa(m):h&&m instanceof Xl}),!!h&&va(c)&&ql(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function mc(c,a){const h=c.length-1;let m,x,T=0,O=h,G=0;for(;T<=O;)if(G=Math.floor((T+O)/2),m=c[G],x=c[G+1],m<=a){if(G===h||a<x)return G;T=G+1}else{if(!(m>a))throw new Sa("Input is not a number.");O=G-1}return 0}class gc{constructor(a,h,m){this.type=a,this.input=h,this.labels=[],this.outputs=[];for(const[x,T]of m)this.labels.push(x),this.outputs.push(T)}static parse(a,h){if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(a[1],1,Te);if(!m)return null;const x=[];let T=null;h.expectedType&&"value"!==h.expectedType.kind&&(T=h.expectedType);for(let O=1;O<a.length;O+=2){const G=1===O?-1/0:a[O],W=a[O+1],q=O,ce=O+1;if("number"!=typeof G)return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(x.length&&x[x.length-1][0]>=G)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',q);const pe=h.parse(W,ce,T);if(!pe)return null;T=T||pe.type,x.push([G,pe])}return new gc(T,m,x)}evaluate(a){const h=this.labels,m=this.outputs;if(1===h.length)return m[0].evaluate(a);const x=this.input.evaluate(a);if(x<=h[0])return m[0].evaluate(a);const T=h.length;return x>=h[T-1]?m[T-1].evaluate(a):m[mc(h,x)].evaluate(a)}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let h=0;h<this.labels.length;h++)h>0&&a.push(this.labels[h]),a.push(this.outputs[h].serialize());return a}}var Ut=gc;function Us(c,a,h){return c*(1-h)+a*h}var mo=Object.freeze({__proto__:null,array:function(c,a,h){return c.map((m,x)=>Us(m,a[x],h))},color:function(c,a,h){return new Ws(Us(c.r,a.r,h),Us(c.g,a.g,h),Us(c.b,a.b,h),Us(c.a,a.a,h))},number:Us});const bu=4/29,Ml=6/29,Ol=3*Ml*Ml,Rl=Ml*Ml*Ml,ll=Math.PI/180,bl=180/Math.PI;function iu(c){return c>Rl?Math.pow(c,1/3):c/Ol+bu}function Ll(c){return c>Ml?c*c*c:Ol*(c-bu)}function Ho(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function vc(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function _c(c){const a=vc(c.r),h=vc(c.g),m=vc(c.b),x=iu((.4124564*a+.3575761*h+.1804375*m)/.95047),T=iu((.2126729*a+.7151522*h+.072175*m)/1);return{l:116*T-16,a:500*(x-T),b:200*(T-iu((.0193339*a+.119192*h+.9503041*m)/1.08883)),alpha:c.a}}function wu(c){let a=(c.l+16)/116,h=isNaN(c.a)?a:a+c.a/500,m=isNaN(c.b)?a:a-c.b/200;return a=1*Ll(a),h=.95047*Ll(h),m=1.08883*Ll(m),new Ws(Ho(3.2404542*h-1.5371385*a-.4985314*m),Ho(-.969266*h+1.8760108*a+.041556*m),Ho(.0556434*h-.2040259*a+1.0572252*m),c.alpha)}function cl(c,a,h){const m=a-c;return c+h*(m>180||m<-180?m-360*Math.round(m/360):m)}const gh={forward:_c,reverse:wu,interpolate:function(c,a,h){return{l:Us(c.l,a.l,h),a:Us(c.a,a.a,h),b:Us(c.b,a.b,h),alpha:Us(c.alpha,a.alpha,h)}}},zc={forward:function(c){const{l:a,a:h,b:m}=_c(c),x=Math.atan2(m,h)*bl;return{h:x<0?x+360:x,c:Math.sqrt(h*h+m*m),l:a,alpha:c.a}},reverse:function(c){const a=c.h*ll,h=c.c;return wu({l:c.l,a:Math.cos(a)*h,b:Math.sin(a)*h,alpha:c.alpha})},interpolate:function(c,a,h){return{h:cl(c.h,a.h,h),c:Us(c.c,a.c,h),l:Us(c.l,a.l,h),alpha:Us(c.alpha,a.alpha,h)}}};var Nh=Object.freeze({__proto__:null,hcl:zc,lab:gh});class Jo{constructor(a,h,m,x,T){this.type=a,this.operator=h,this.interpolation=m,this.input=x,this.labels=[],this.outputs=[];for(const[O,G]of T)this.labels.push(O),this.outputs.push(G)}static interpolationFactor(a,h,m,x){let T=0;if("exponential"===a.name)T=Pl(h,a.base,m,x);else if("linear"===a.name)T=Pl(h,1,m,x);else if("cubic-bezier"===a.name){const O=a.controlPoints;T=new tt(O[0],O[1],O[2],O[3]).solve(Pl(h,1,m,x))}return T}static parse(a,h){let[m,x,T,...O]=a;if(!Array.isArray(x)||0===x.length)return h.error("Expected an interpolation type expression.",1);if("linear"===x[0])x={name:"linear"};else if("exponential"===x[0]){const q=x[1];if("number"!=typeof q)return h.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:q}}else{if("cubic-bezier"!==x[0])return h.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const q=x.slice(1);if(4!==q.length||q.some(ce=>"number"!=typeof ce||ce<0||ce>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:q}}}if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(T=h.parse(T,2,Te),!T)return null;const G=[];let W=null;"interpolate-hcl"===m||"interpolate-lab"===m?W=le:h.expectedType&&"value"!==h.expectedType.kind&&(W=h.expectedType);for(let q=0;q<O.length;q+=2){const ce=O[q],pe=O[q+1],ve=q+3,De=q+4;if("number"!=typeof ce)return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ve);if(G.length&&G[G.length-1][0]>=ce)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ve);const Oe=h.parse(pe,De,W);if(!Oe)return null;W=W||Oe.type,G.push([ce,Oe])}return"number"===W.kind||"color"===W.kind||"array"===W.kind&&"number"===W.itemType.kind&&"number"==typeof W.N?new Jo(W,m,x,T,G):h.error(`Type ${Di(W)} is not interpolatable.`)}evaluate(a){const h=this.labels,m=this.outputs;if(1===h.length)return m[0].evaluate(a);const x=this.input.evaluate(a);if(x<=h[0])return m[0].evaluate(a);const T=h.length;if(x>=h[T-1])return m[T-1].evaluate(a);const O=mc(h,x),G=Jo.interpolationFactor(this.interpolation,x,h[O],h[O+1]),W=m[O].evaluate(a),q=m[O+1].evaluate(a);return"interpolate"===this.operator?mo[this.type.kind.toLowerCase()](W,q,G):"interpolate-hcl"===this.operator?zc.reverse(zc.interpolate(zc.forward(W),zc.forward(q),G)):gh.reverse(gh.interpolate(gh.forward(W),gh.forward(q),G))}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const h=[this.operator,a,this.input.serialize()];for(let m=0;m<this.labels.length;m++)h.push(this.labels[m],this.outputs[m].serialize());return h}}function Pl(c,a,h,m){const x=m-h,T=c-h;return 0===x?0:1===a?T/x:(Math.pow(a,T)-1)/(Math.pow(a,x)-1)}var yc=Jo;class Xu{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expectected at least one argument.");let m=null;const x=h.expectedType;x&&"value"!==x.kind&&(m=x);const T=[];for(const G of a.slice(1)){const W=h.parse(G,1+T.length,m,void 0,{typeAnnotation:"omit"});if(!W)return null;m=m||W.type,T.push(W)}const O=x&&T.some(G=>cn(x,G.type));return new Xu(O?Le:m,T)}evaluate(a){let h,m=null,x=0;for(const T of this.args){if(x++,m=T.evaluate(a),m&&m instanceof Ta&&!m.available&&(h||(h=m),m=null,x===this.args.length))return h;if(null!==m)break}return m}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(h=>{a.push(h.serialize())}),a}}var zh=Xu;class go{constructor(a,h){this.type=h.type,this.bindings=[].concat(a),this.result=h}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const h of this.bindings)a(h[1]);a(this.result)}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const m=[];for(let T=1;T<a.length-1;T+=2){const O=a[T];if("string"!=typeof O)return h.error(`Expected string, but found ${typeof O} instead.`,T);if(/[^a-zA-Z0-9_]/.test(O))return h.error("Variable names must contain only alphanumeric characters or '_'.",T);const G=h.parse(a[T+1],T+1);if(!G)return null;m.push([O,G])}const x=h.parse(a[a.length-1],a.length-1,h.expectedType,m);return x?new go(m,x):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[h,m]of this.bindings)a.push(h,m.serialize());return a.push(this.result.serialize()),a}}var Yc=go;class ul{constructor(a,h,m){this.type=a,this.index=h,this.input=m}static parse(a,h){if(3!==a.length)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=h.parse(a[1],1,Te),x=h.parse(a[2],2,qt(h.expectedType||Le));return m&&x?new ul(x.type.itemType,m,x):null}evaluate(a){const h=this.index.evaluate(a),m=this.input.evaluate(a);if(h<0)throw new Sa(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new Sa(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new Sa(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Bf=ul;class Vo{constructor(a,h){this.type=U,this.needle=a,this.haystack=h}static parse(a,h){if(3!==a.length)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=h.parse(a[1],1,Le),x=h.parse(a[2],2,Le);return m&&x?Qn(m.type,[U,Ne,Te,Pe,Le])?new Vo(m,x):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Di(m.type)} instead`):null}evaluate(a){const h=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(null==m)return!1;if(!gr(h,["boolean","string","number","null"]))throw new Sa(`Expected first argument to be of type boolean, string, number or null, but found ${Di(za(h))} instead.`);if(!gr(m,["string","array"]))throw new Sa(`Expected second argument to be of type array or string, but found ${Di(za(m))} instead.`);return m.indexOf(h)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Ma=Vo;class wl{constructor(a,h,m){this.type=Te,this.needle=a,this.haystack=h,this.fromIndex=m}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=h.parse(a[1],1,Le),x=h.parse(a[2],2,Le);if(!m||!x)return null;if(!Qn(m.type,[U,Ne,Te,Pe,Le]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Di(m.type)} instead`);if(4===a.length){const T=h.parse(a[3],3,Te);return T?new wl(m,x,T):null}return new wl(m,x)}evaluate(a){const h=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!gr(h,["boolean","string","number","null"]))throw new Sa(`Expected first argument to be of type boolean, string, number or null, but found ${Di(za(h))} instead.`);if(!gr(m,["string","array"]))throw new Sa(`Expected second argument to be of type array or string, but found ${Di(za(m))} instead.`);if(this.fromIndex){const x=this.fromIndex.evaluate(a);return m.indexOf(h,x)}return m.indexOf(h)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var hl=wl;class oo{constructor(a,h,m,x,T,O){this.inputType=a,this.type=h,this.input=m,this.cases=x,this.outputs=T,this.otherwise=O}static parse(a,h){if(a.length<5)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return h.error("Expected an even number of arguments.");let m,x;h.expectedType&&"value"!==h.expectedType.kind&&(x=h.expectedType);const T={},O=[];for(let q=2;q<a.length-1;q+=2){let ce=a[q];const pe=a[q+1];Array.isArray(ce)||(ce=[ce]);const ve=h.concat(q);if(0===ce.length)return ve.error("Expected at least one branch label.");for(const Oe of ce){if("number"!=typeof Oe&&"string"!=typeof Oe)return ve.error("Branch labels must be numbers or strings.");if("number"==typeof Oe&&Math.abs(Oe)>Number.MAX_SAFE_INTEGER)return ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Oe&&Math.floor(Oe)!==Oe)return ve.error("Numeric branch labels must be integer values.");if(m){if(ve.checkSubtype(m,za(Oe)))return null}else m=za(Oe);if(void 0!==T[String(Oe)])return ve.error("Branch labels must be unique.");T[String(Oe)]=O.length}const De=h.parse(pe,q,x);if(!De)return null;x=x||De.type,O.push(De)}const G=h.parse(a[1],1,Le);if(!G)return null;const W=h.parse(a[a.length-1],a.length-1,x);return W?"value"!==G.type.kind&&h.concat(1).checkSubtype(m,G.type)?null:new oo(m,x,G,T,O,W):null}evaluate(a){const h=this.input.evaluate(a);return(za(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],h=Object.keys(this.cases).sort(),m=[],x={};for(const O of h){const G=x[this.cases[O]];void 0===G?(x[this.cases[O]]=m.length,m.push([this.cases[O],[O]])):m[G][1].push(O)}const T=O=>"number"===this.inputType.kind?Number(O):O;for(const[O,G]of m)a.push(1===G.length?T(G[0]):G.map(T)),a.push(this.outputs[O].serialize());return a.push(this.otherwise.serialize()),a}}var wd=oo;class nu{constructor(a,h,m){this.type=a,this.branches=h,this.otherwise=m}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&"value"!==h.expectedType.kind&&(m=h.expectedType);const x=[];for(let O=1;O<a.length-1;O+=2){const G=h.parse(a[O],O,U);if(!G)return null;const W=h.parse(a[O+1],O+1,m);if(!W)return null;x.push([G,W]),m=m||W.type}const T=h.parse(a[a.length-1],a.length-1,m);return T?new nu(m,x,T):null}evaluate(a){for(const[h,m]of this.branches)if(h.evaluate(a))return m.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[h,m]of this.branches)a(h),a(m);a(this.otherwise)}outputDefined(){return this.branches.every(([a,h])=>h.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(h=>{a.push(h.serialize())}),a}}var Jl=nu;class Cu{constructor(a,h,m,x){this.type=a,this.input=h,this.beginIndex=m,this.endIndex=x}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=h.parse(a[1],1,Le),x=h.parse(a[2],2,Te);if(!m||!x)return null;if(!Qn(m.type,[qt(Le),Ne,Le]))return h.error(`Expected first argument to be of type array or string, but found ${Di(m.type)} instead`);if(4===a.length){const T=h.parse(a[3],3,Te);return T?new Cu(m.type,m,x,T):null}return new Cu(m.type,m,x)}evaluate(a){const h=this.input.evaluate(a),m=this.beginIndex.evaluate(a);if(!gr(h,["string","array"]))throw new Sa(`Expected first argument to be of type array or string, but found ${Di(za(h))} instead.`);if(this.endIndex){const x=this.endIndex.evaluate(a);return h.slice(m,x)}return h.slice(m)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Zu=Cu;function Eu(c,a){return"=="===c||"!="===c?"boolean"===a.kind||"string"===a.kind||"number"===a.kind||"null"===a.kind||"value"===a.kind:"string"===a.kind||"number"===a.kind||"value"===a.kind}function Li(c,a,h,m){return 0===m.compare(a,h)}function mn(c,a,h){const m="=="!==c&&"!="!==c;return class YI{constructor(T,O,G){this.type=U,this.lhs=T,this.rhs=O,this.collator=G,this.hasUntypedArgument="value"===T.type.kind||"value"===O.type.kind}static parse(T,O){if(3!==T.length&&4!==T.length)return O.error("Expected two or three arguments.");const G=T[0];let W=O.parse(T[1],1,Le);if(!W)return null;if(!Eu(G,W.type))return O.concat(1).error(`"${G}" comparisons are not supported for type '${Di(W.type)}'.`);let q=O.parse(T[2],2,Le);if(!q)return null;if(!Eu(G,q.type))return O.concat(2).error(`"${G}" comparisons are not supported for type '${Di(q.type)}'.`);if(W.type.kind!==q.type.kind&&"value"!==W.type.kind&&"value"!==q.type.kind)return O.error(`Cannot compare types '${Di(W.type)}' and '${Di(q.type)}'.`);m&&("value"===W.type.kind&&"value"!==q.type.kind?W=new ba(q.type,[W]):"value"!==W.type.kind&&"value"===q.type.kind&&(q=new ba(W.type,[q])));let ce=null;if(4===T.length){if("string"!==W.type.kind&&"string"!==q.type.kind&&"value"!==W.type.kind&&"value"!==q.type.kind)return O.error("Cannot use collator to compare non-string types.");if(ce=O.parse(T[3],3,je),!ce)return null}return new YI(W,q,ce)}evaluate(T){const O=this.lhs.evaluate(T),G=this.rhs.evaluate(T);if(m&&this.hasUntypedArgument){const W=za(O),q=za(G);if(W.kind!==q.kind||"string"!==W.kind&&"number"!==W.kind)throw new Sa(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${W.kind}, ${q.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const W=za(O),q=za(G);if("string"!==W.kind||"string"!==q.kind)return a(T,O,G)}return this.collator?h(T,O,G,this.collator.evaluate(T)):a(T,O,G)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}serialize(){const T=[c];return this.eachChild(O=>{T.push(O.serialize())}),T}}}const un=mn("==",function(c,a,h){return a===h},Li),Mr=mn("!=",function(c,a,h){return a!==h},function(c,a,h,m){return!Li(0,a,h,m)}),Ls=mn("<",function(c,a,h){return a<h},function(c,a,h,m){return m.compare(a,h)<0}),_a=mn(">",function(c,a,h){return a>h},function(c,a,h,m){return m.compare(a,h)>0}),zo=mn("<=",function(c,a,h){return a<=h},function(c,a,h,m){return m.compare(a,h)<=0}),la=mn(">=",function(c,a,h){return a>=h},function(c,a,h,m){return m.compare(a,h)>=0});class Fl{constructor(a,h,m,x,T,O){this.type=Ne,this.number=a,this.locale=h,this.currency=m,this.unit=x,this.minFractionDigits=T,this.maxFractionDigits=O}static parse(a,h){if(3!==a.length)return h.error("Expected two arguments.");const m=h.parse(a[1],1,Te);if(!m)return null;const x=a[2];if("object"!=typeof x||Array.isArray(x))return h.error("NumberFormat options argument must be an object.");let T=null;if(x.locale&&(T=h.parse(x.locale,1,Ne),!T))return null;let O=null;if(x.currency&&(O=h.parse(x.currency,1,Ne),!O))return null;let G=null;if(x.unit&&(G=h.parse(x.unit,1,Ne),!G))return null;let W=null;if(x["min-fraction-digits"]&&(W=h.parse(x["min-fraction-digits"],1,Te),!W))return null;let q=null;return x["max-fraction-digits"]&&(q=h.parse(x["max-fraction-digits"],1,Te),!q)?null:new Fl(m,T,O,G,W,q)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class Yh{constructor(a){this.type=Te,this.input=a}static parse(a,h){if(2!==a.length)return h.error(`Expected 1 argument, but found ${a.length-1} instead.`);const m=h.parse(a[1],1);return m?"array"!==m.type.kind&&"string"!==m.type.kind&&"value"!==m.type.kind?h.error(`Expected argument of type string or array, but found ${Di(m.type)} instead.`):new Yh(m):null}evaluate(a){const h=this.input.evaluate(a);if("string"==typeof h||Array.isArray(h))return h.length;throw new Sa(`Expected value to be of type string or array, but found ${Di(za(h))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(h=>{a.push(h.serialize())}),a}}const dl={"==":un,"!=":Mr,">":_a,"<":Ls,">=":la,"<=":zo,array:ba,at:Bf,boolean:ba,case:Jl,coalesce:zh,collator:Ph,format:Nc,image:Rh,in:Ma,"index-of":hl,interpolate:yc,"interpolate-hcl":yc,"interpolate-lab":yc,length:Yh,let:Yc,literal:Xl,match:wd,number:ba,"number-format":Fl,object:ba,slice:Zu,step:Ut,string:ba,"to-boolean":Lh,"to-color":Lh,"to-number":Lh,"to-string":Lh,var:Kl,within:ol};function ku(c,[a,h,m,x]){a=a.evaluate(c),h=h.evaluate(c),m=m.evaluate(c);const T=x?x.evaluate(c):1,O=dh(a,h,m,T);if(O)throw new Sa(O);return new Ws(a/255*T,h/255*T,m/255*T,T)}function ru(c,a){return c in a}function xc(c,a){const h=a[c];return void 0===h?null:h}function Ya(c){return{type:c}}wa.register(dl,{error:[{kind:"error"},[Ne],(c,[a])=>{throw new Sa(a.evaluate(c))}],typeof:[Ne,[Le],(c,[a])=>Di(za(a.evaluate(c)))],"to-rgba":[qt(Te,4),[le],(c,[a])=>a.evaluate(c).toArray()],rgb:[le,[Te,Te,Te],ku],rgba:[le,[Te,Te,Te,Te],ku],has:{type:U,overloads:[[[Ne],(c,[a])=>ru(a.evaluate(c),c.properties())],[[Ne,we],(c,[a,h])=>ru(a.evaluate(c),h.evaluate(c))]]},get:{type:Le,overloads:[[[Ne],(c,[a])=>xc(a.evaluate(c),c.properties())],[[Ne,we],(c,[a,h])=>xc(a.evaluate(c),h.evaluate(c))]]},"feature-state":[Le,[Ne],(c,[a])=>xc(a.evaluate(c),c.featureState||{})],properties:[we,[],c=>c.properties()],"geometry-type":[Ne,[],c=>c.geometryType()],id:[Le,[],c=>c.id()],zoom:[Te,[],c=>c.globals.zoom],pitch:[Te,[],c=>c.globals.pitch||0],"distance-from-center":[Te,[],c=>c.distanceFromCenter()],"heatmap-density":[Te,[],c=>c.globals.heatmapDensity||0],"line-progress":[Te,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[Te,[],c=>c.globals.skyRadialProgress||0],accumulated:[Le,[],c=>void 0===c.globals.accumulated?null:c.globals.accumulated],"+":[Te,Ya(Te),(c,a)=>{let h=0;for(const m of a)h+=m.evaluate(c);return h}],"*":[Te,Ya(Te),(c,a)=>{let h=1;for(const m of a)h*=m.evaluate(c);return h}],"-":{type:Te,overloads:[[[Te,Te],(c,[a,h])=>a.evaluate(c)-h.evaluate(c)],[[Te],(c,[a])=>-a.evaluate(c)]]},"/":[Te,[Te,Te],(c,[a,h])=>a.evaluate(c)/h.evaluate(c)],"%":[Te,[Te,Te],(c,[a,h])=>a.evaluate(c)%h.evaluate(c)],ln2:[Te,[],()=>Math.LN2],pi:[Te,[],()=>Math.PI],e:[Te,[],()=>Math.E],"^":[Te,[Te,Te],(c,[a,h])=>Math.pow(a.evaluate(c),h.evaluate(c))],sqrt:[Te,[Te],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[Te,[Te],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[Te,[Te],(c,[a])=>Math.log(a.evaluate(c))],log2:[Te,[Te],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[Te,[Te],(c,[a])=>Math.sin(a.evaluate(c))],cos:[Te,[Te],(c,[a])=>Math.cos(a.evaluate(c))],tan:[Te,[Te],(c,[a])=>Math.tan(a.evaluate(c))],asin:[Te,[Te],(c,[a])=>Math.asin(a.evaluate(c))],acos:[Te,[Te],(c,[a])=>Math.acos(a.evaluate(c))],atan:[Te,[Te],(c,[a])=>Math.atan(a.evaluate(c))],min:[Te,Ya(Te),(c,a)=>Math.min(...a.map(h=>h.evaluate(c)))],max:[Te,Ya(Te),(c,a)=>Math.max(...a.map(h=>h.evaluate(c)))],abs:[Te,[Te],(c,[a])=>Math.abs(a.evaluate(c))],round:[Te,[Te],(c,[a])=>{const h=a.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[Te,[Te],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[Te,[Te],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[U,[Ne,Le],(c,[a,h])=>c.properties()[a.value]===h.value],"filter-id-==":[U,[Le],(c,[a])=>c.id()===a.value],"filter-type-==":[U,[Ne],(c,[a])=>c.geometryType()===a.value],"filter-<":[U,[Ne,Le],(c,[a,h])=>{const m=c.properties()[a.value],x=h.value;return typeof m==typeof x&&m<x}],"filter-id-<":[U,[Le],(c,[a])=>{const h=c.id(),m=a.value;return typeof h==typeof m&&h<m}],"filter->":[U,[Ne,Le],(c,[a,h])=>{const m=c.properties()[a.value],x=h.value;return typeof m==typeof x&&m>x}],"filter-id->":[U,[Le],(c,[a])=>{const h=c.id(),m=a.value;return typeof h==typeof m&&h>m}],"filter-<=":[U,[Ne,Le],(c,[a,h])=>{const m=c.properties()[a.value],x=h.value;return typeof m==typeof x&&m<=x}],"filter-id-<=":[U,[Le],(c,[a])=>{const h=c.id(),m=a.value;return typeof h==typeof m&&h<=m}],"filter->=":[U,[Ne,Le],(c,[a,h])=>{const m=c.properties()[a.value],x=h.value;return typeof m==typeof x&&m>=x}],"filter-id->=":[U,[Le],(c,[a])=>{const h=c.id(),m=a.value;return typeof h==typeof m&&h>=m}],"filter-has":[U,[Le],(c,[a])=>a.value in c.properties()],"filter-has-id":[U,[],c=>null!==c.id()&&void 0!==c.id()],"filter-type-in":[U,[qt(Ne)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[U,[qt(Le)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[U,[Ne,qt(Le)],(c,[a,h])=>h.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[U,[Ne,qt(Le)],(c,[a,h])=>function(m,x,T,O){for(;T<=O;){const G=T+O>>1;if(x[G]===m)return!0;x[G]>m?O=G-1:T=G+1}return!1}(c.properties()[a.value],h.value,0,h.value.length-1)],all:{type:U,overloads:[[[U,U],(c,[a,h])=>a.evaluate(c)&&h.evaluate(c)],[Ya(U),(c,a)=>{for(const h of a)if(!h.evaluate(c))return!1;return!0}]]},any:{type:U,overloads:[[[U,U],(c,[a,h])=>a.evaluate(c)||h.evaluate(c)],[Ya(U),(c,a)=>{for(const h of a)if(h.evaluate(c))return!0;return!1}]]},"!":[U,[U],(c,[a])=>!a.evaluate(c)],"is-supported-script":[U,[Ne],(c,[a])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(a.evaluate(c))}],upcase:[Ne,[Ne],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[Ne,[Ne],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[Ne,Ya(Le),(c,a)=>a.map(h=>fc(h.evaluate(c))).join("")],"resolved-locale":[Ne,[je],(c,[a])=>a.evaluate(c).resolvedLocale()]});var Uo=dl;function ya(c){return{result:"success",value:c}}function su(c){return{result:"error",value:c}}function fl(c){return"data-driven"===c["property-type"]}function Tu(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function bc(c){return!!c.expression&&c.expression.interpolated}function ca(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":null===c?"null":typeof c}function qu(c){return"object"==typeof c&&null!==c&&!Array.isArray(c)}function wc(c){return c}function Qo(c,a){const h="color"===a.type,m=c.stops&&"object"==typeof c.stops[0][0],x=m||!(m||void 0!==c.property),T=c.type||(bc(a)?"exponential":"interval");if(h&&((c=H({},c)).stops&&(c.stops=c.stops.map(q=>[q[0],Ws.parse(q[1])])),c.default=Ws.parse(c.default?c.default:a.default)),c.colorSpace&&"rgb"!==c.colorSpace&&!Nh[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let O,G,W;if("exponential"===T)O=Gc;else if("interval"===T)O=Su;else if("categorical"===T){O=Bl,G=Object.create(null);for(const q of c.stops)G[q[0]]=q[1];W=typeof c.stops[0][0]}else{if("identity"!==T)throw new Error(`Unknown function type "${T}"`);O=Nl}if(m){const q={},ce=[];for(let De=0;De<c.stops.length;De++){const Oe=c.stops[De],Ve=Oe[0].zoom;void 0===q[Ve]&&(q[Ve]={zoom:Ve,type:c.type,property:c.property,default:c.default,stops:[]},ce.push(Ve)),q[Ve].stops.push([Oe[0].value,Oe[1]])}const pe=[];for(const De of ce)pe.push([q[De].zoom,Qo(q[De],a)]);const ve={name:"linear"};return{kind:"composite",interpolationType:ve,interpolationFactor:yc.interpolationFactor.bind(void 0,ve),zoomStops:pe.map(De=>De[0]),evaluate:({zoom:De},Oe)=>Gc({stops:pe,base:c.base},a,De).evaluate(De,Oe)}}if(x){const q="exponential"===T?{name:"exponential",base:void 0!==c.base?c.base:1}:null;return{kind:"camera",interpolationType:q,interpolationFactor:yc.interpolationFactor.bind(void 0,q),zoomStops:c.stops.map(ce=>ce[0]),evaluate:({zoom:ce})=>O(c,a,ce,G,W)}}return{kind:"source",evaluate(q,ce){const pe=ce&&ce.properties?ce.properties[c.property]:void 0;return void 0===pe?Cc(c.default,a.default):O(c,a,pe,G,W)}}}function Cc(c,a,h){return void 0!==c?c:void 0!==a?a:void 0!==h?h:void 0}function Bl(c,a,h,m,x){return Cc(typeof h===x?m[h]:void 0,c.default,a.default)}function Su(c,a,h){if("number"!==ca(h))return Cc(c.default,a.default);const m=c.stops.length;if(1===m||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[m-1][0])return c.stops[m-1][1];const x=mc(c.stops.map(T=>T[0]),h);return c.stops[x][1]}function Gc(c,a,h){const m=void 0!==c.base?c.base:1;if("number"!==ca(h))return Cc(c.default,a.default);const x=c.stops.length;if(1===x||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[x-1][0])return c.stops[x-1][1];const T=mc(c.stops.map(ce=>ce[0]),h),O=function(ce,pe,ve,De){const Oe=De-ve,Ve=ce-ve;return 0===Oe?0:1===pe?Ve/Oe:(Math.pow(pe,Ve)-1)/(Math.pow(pe,Oe)-1)}(h,m,c.stops[T][0],c.stops[T+1][0]),G=c.stops[T][1],W=c.stops[T+1][1];let q=mo[a.type]||wc;if(c.colorSpace&&"rgb"!==c.colorSpace){const ce=Nh[c.colorSpace];q=(pe,ve)=>ce.reverse(ce.interpolate(ce.forward(pe),ce.forward(ve),O))}return"function"==typeof G.evaluate?{evaluate(...ce){const pe=G.evaluate.apply(void 0,ce),ve=W.evaluate.apply(void 0,ce);if(void 0!==pe&&void 0!==ve)return q(pe,ve,O)}}:q(G,W,O)}function Nl(c,a,h){return"color"===a.type?h=Ws.parse(h):"formatted"===a.type?h=ss.fromString(h.toString()):"resolvedImage"===a.type?h=Ta.fromString(h.toString()):ca(h)===a.type||"enum"===a.type&&a.values[h]||(h=void 0),Cc(h,c.default,a.default)}class Ku{constructor(a,h){var m;this.expression=a,this._warningHistory={},this._evaluator=new xd,this._defaultValue=h?"color"===(m=h).type&&(qu(m.default)||Array.isArray(m.default))?new Ws(0,0,0,0):"color"===m.type?Ws.parse(m.default)||null:void 0===m.default?null:m.default:null,this._enumValues=h&&"enum"===h.type?h.values:null}evaluateWithoutErrorHandling(a,h,m,x,T,O,G,W){return this._evaluator.globals=a,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=x||null,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=O,this._evaluator.featureTileCoord=G||null,this._evaluator.featureDistanceData=W||null,this.expression.evaluate(this._evaluator)}evaluate(a,h,m,x,T,O,G,W){this._evaluator.globals=a,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=x||null,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=O||null,this._evaluator.featureTileCoord=G||null,this._evaluator.featureDistanceData=W||null;try{const q=this.expression.evaluate(this._evaluator);if(null==q||"number"==typeof q&&q!=q)return this._defaultValue;if(this._enumValues&&!(q in this._enumValues))throw new Sa(`Expected value to be one of ${Object.keys(this._enumValues).map(ce=>JSON.stringify(ce)).join(", ")}, but found ${JSON.stringify(q)} instead.`);return q}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console<"u"&&console.warn(q.message)),this._defaultValue}}}function Au(c){return Array.isArray(c)&&c.length>0&&"string"==typeof c[0]&&c[0]in Uo}function Ec(c,a){const h=new Bh(Uo,[],a?function(x){const T={color:le,string:Ne,number:Te,enum:Ne,boolean:U,formatted:lt,resolvedImage:jt};return"array"===x.type?qt(T[x.value]||Le,x.length):T[x.type]}(a):void 0),m=h.parse(c,void 0,void 0,void 0,a&&"string"===a.type?{typeAnnotation:"coerce"}:void 0);return m?ya(new Ku(m,a)):su(h.errors)}class Hc{constructor(a,h){this.kind=a,this._styleExpression=h,this.isStateDependent="constant"!==a&&!po(h.expression)}evaluateWithoutErrorHandling(a,h,m,x,T,O){return this._styleExpression.evaluateWithoutErrorHandling(a,h,m,x,T,O)}evaluate(a,h,m,x,T,O){return this._styleExpression.evaluate(a,h,m,x,T,O)}}class au{constructor(a,h,m,x){this.kind=a,this.zoomStops=m,this._styleExpression=h,this.isStateDependent="camera"!==a&&!po(h.expression),this.interpolationType=x}evaluateWithoutErrorHandling(a,h,m,x,T,O){return this._styleExpression.evaluateWithoutErrorHandling(a,h,m,x,T,O)}evaluate(a,h,m,x,T,O){return this._styleExpression.evaluate(a,h,m,x,T,O)}interpolationFactor(a,h,m){return this.interpolationType?yc.interpolationFactor(this.interpolationType,a,h,m):0}}function vh(c,a){if("error"===(c=Ec(c,a)).result)return c;const h=c.value.expression,m=va(h);if(!m&&!fl(a))return su([new de("","data expressions not supported")]);const x=ql(h,["zoom","pitch","distance-from-center"]);if(!x&&!Tu(a))return su([new de("","zoom expressions not supported")]);const T=lo(h);return T||x?T instanceof de?su([T]):T instanceof yc&&!bc(a)?su([new de("",'"interpolate" expressions cannot be used with this property')]):ya(T?new au(m?"camera":"composite",c.value,T.labels,T instanceof yc?T.interpolation:void 0):new Hc(m?"constant":"source",c.value)):su([new de("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ou{constructor(a,h){this._parameters=a,this._specification=h,H(this,Qo(this._parameters,this._specification))}static deserialize(a){return new ou(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function lo(c){let a=null;if(c instanceof Yc)a=lo(c.result);else if(c instanceof zh){for(const h of c.args)if(a=lo(h),a)break}else(c instanceof Ut||c instanceof yc)&&c.input instanceof wa&&"zoom"===c.input.name&&(a=c);return a instanceof de||c.eachChild(h=>{const m=lo(h);m instanceof de?a=m:!a&&m?a=new de("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&m&&a!==m&&(a=new de("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}class lr{constructor(a,h,m,x){this.message=(a?`${a}: `:"")+m,x&&(this.identifier=x),null!=h&&h.__line__&&(this.line=h.__line__)}}function v(c){const a=c.key,h=c.value,m=c.valueSpec||{},x=c.objectElementValidators||{},T=c.style,O=c.styleSpec;let G=[];const W=ca(h);if("object"!==W)return[new lr(a,h,`object expected, ${W} found`)];for(const q in h){const ce=q.split(".")[0];let pe;x[ce]?pe=x[ce]:m[ce]?pe=jo:x["*"]?pe=x["*"]:m["*"]&&(pe=jo),pe?G=G.concat(pe({key:(a&&`${a}.`)+q,value:h[q],valueSpec:m[ce]||m["*"],style:T,styleSpec:O,object:h,objectKey:q},h)):G.push(new lr(a,h[q],`unknown property "${q}"`))}for(const q in m)x[q]||m[q].required&&void 0===m[q].default&&void 0===h[q]&&G.push(new lr(a,h,`missing required property "${q}"`));return G}function R(c){const a=c.value,h=c.valueSpec,m=c.style,x=c.styleSpec,T=c.key,O=c.arrayElementValidator||jo;if("array"!==ca(a))return[new lr(T,a,`array expected, ${ca(a)} found`)];if(h.length&&a.length!==h.length)return[new lr(T,a,`array length ${h.length} expected, length ${a.length} found`)];if(h["min-length"]&&a.length<h["min-length"])return[new lr(T,a,`array length at least ${h["min-length"]} expected, length ${a.length} found`)];let G={type:h.value,values:h.values,minimum:h.minimum,maximum:h.maximum,function:void 0};x.$version<7&&(G.function=h.function),"object"===ca(h.value)&&(G=h.value);let W=[];for(let q=0;q<a.length;q++)W=W.concat(O({array:a,arrayIndex:q,value:a[q],valueSpec:G,style:m,styleSpec:x,key:`${T}[${q}]`}));return W}function Z(c){const a=c.key,h=c.value,m=c.valueSpec;let x=ca(h);if("number"===x&&h!=h&&(x="NaN"),"number"!==x)return[new lr(a,h,`number expected, ${x} found`)];if("minimum"in m){let T=m.minimum;if("array"===ca(m.minimum)&&(T=m.minimum[c.arrayIndex]),h<T)return[new lr(a,h,`${h} is less than the minimum value ${T}`)]}if("maximum"in m){let T=m.maximum;if("array"===ca(m.maximum)&&(T=m.maximum[c.arrayIndex]),h>T)return[new lr(a,h,`${h} is greater than the maximum value ${T}`)]}return[]}function fe(c){const a=c.valueSpec,h=K(c.value.type);let m,x,T,O={};const G="categorical"!==h&&void 0===c.value.property,W=!G,q="array"===ca(c.value.stops)&&"array"===ca(c.value.stops[0])&&"object"===ca(c.value.stops[0][0]),ce=v({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(De){if("identity"===h)return[new lr(De.key,De.value,'identity function may not have a "stops" property')];let Oe=[];const Ve=De.value;return Oe=Oe.concat(R({key:De.key,value:Ve,valueSpec:De.valueSpec,style:De.style,styleSpec:De.styleSpec,arrayElementValidator:pe})),"array"===ca(Ve)&&0===Ve.length&&Oe.push(new lr(De.key,Ve,"array must have at least one stop")),Oe},default:function(De){return jo({key:De.key,value:De.value,valueSpec:a,style:De.style,styleSpec:De.styleSpec})}}});return"identity"===h&&G&&ce.push(new lr(c.key,c.value,'missing required property "property"')),"identity"===h||c.value.stops||ce.push(new lr(c.key,c.value,'missing required property "stops"')),"exponential"===h&&c.valueSpec.expression&&!bc(c.valueSpec)&&ce.push(new lr(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(W&&!fl(c.valueSpec)?ce.push(new lr(c.key,c.value,"property functions not supported")):G&&!Tu(c.valueSpec)&&ce.push(new lr(c.key,c.value,"zoom functions not supported"))),"categorical"!==h&&!q||void 0!==c.value.property||ce.push(new lr(c.key,c.value,'"property" property is required')),ce;function pe(De){let Oe=[];const Ve=De.value,at=De.key;if("array"!==ca(Ve))return[new lr(at,Ve,`array expected, ${ca(Ve)} found`)];if(2!==Ve.length)return[new lr(at,Ve,`array length 2 expected, length ${Ve.length} found`)];if(q){if("object"!==ca(Ve[0]))return[new lr(at,Ve,`object expected, ${ca(Ve[0])} found`)];if(void 0===Ve[0].zoom)return[new lr(at,Ve,"object stop key must have zoom")];if(void 0===Ve[0].value)return[new lr(at,Ve,"object stop key must have value")];const It=K(Ve[0].zoom);if("number"!=typeof It)return[new lr(at,Ve[0].zoom,"stop zoom values must be numbers")];if(T&&T>It)return[new lr(at,Ve[0].zoom,"stop zoom values must appear in ascending order")];It!==T&&(T=It,x=void 0,O={}),Oe=Oe.concat(v({key:`${at}[0]`,value:Ve[0],valueSpec:{zoom:{}},style:De.style,styleSpec:De.styleSpec,objectElementValidators:{zoom:Z,value:ve}}))}else Oe=Oe.concat(ve({key:`${at}[0]`,value:Ve[0],valueSpec:{},style:De.style,styleSpec:De.styleSpec},Ve));return Au(J(Ve[1]))?Oe.concat([new lr(`${at}[1]`,Ve[1],"expressions are not allowed in function stops.")]):Oe.concat(jo({key:`${at}[1]`,value:Ve[1],valueSpec:a,style:De.style,styleSpec:De.styleSpec}))}function ve(De,Oe){const Ve=ca(De.value),at=K(De.value),It=null!==De.value?De.value:Oe;if(m){if(Ve!==m)return[new lr(De.key,It,`${Ve} stop domain type must match previous stop domain type ${m}`)]}else m=Ve;if("number"!==Ve&&"string"!==Ve&&"boolean"!==Ve&&"number"!=typeof at&&"string"!=typeof at&&"boolean"!=typeof at)return[new lr(De.key,It,"stop domain value must be a number, string, or boolean")];if("number"!==Ve&&"categorical"!==h){let ii=`number expected, ${Ve} found`;return fl(a)&&void 0===h&&(ii+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new lr(De.key,It,ii)]}return"categorical"!==h||"number"!==Ve||"number"==typeof at&&isFinite(at)&&Math.floor(at)===at?"categorical"!==h&&"number"===Ve&&"number"==typeof at&&"number"==typeof x&&void 0!==x&&at<x?[new lr(De.key,It,"stop domain values must appear in ascending order")]:(x=at,"categorical"===h&&at in O?[new lr(De.key,It,"stop domain values must be unique")]:(O[at]=!0,[])):[new lr(De.key,It,`integer expected, found ${String(at)}`)]}}function Ie(c){const a=("property"===c.expressionContext?vh:Ec)(J(c.value),c.valueSpec);if("error"===a.result)return a.value.map(m=>new lr(`${c.key}${m.key}`,c.value,m.message));const h=a.value.expression||a.value._styleExpression.expression;if("property"===c.expressionContext&&"text-font"===c.propertyKey&&!h.outputDefined())return[new lr(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===c.expressionContext&&"layout"===c.propertyType&&!po(h))return[new lr(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===c.expressionContext)return rt(h,c);if(c.expressionContext&&0===c.expressionContext.indexOf("cluster")){if(!ql(h,["zoom","feature-state"]))return[new lr(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===c.expressionContext&&!va(h))return[new lr(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rt(c,a){const h=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const x of a.valueSpec.expression.parameters)h.delete(x);if(0===h.size)return[];const m=[];return c instanceof wa&&h.has(c.name)?[new lr(a.key,a.value,`["${c.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(c.eachChild(x=>{m.push(...rt(x,a))}),m)}function ri(c){const a=c.key,h=c.value,m=c.valueSpec,x=[];return Array.isArray(m.values)?-1===m.values.indexOf(K(h))&&x.push(new lr(a,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):-1===Object.keys(m.values).indexOf(K(h))&&x.push(new lr(a,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),x}function Ai(c){if(!0===c||!1===c)return!0;if(!Array.isArray(c)||0===c.length)return!1;switch(c[0]){case"has":return c.length>=2&&"$id"!==c[1]&&"$type"!==c[1];case"in":return c.length>=3&&("string"!=typeof c[1]||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==c.length||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!Ai(a)&&"boolean"!=typeof a)return!1;return!0;default:return!0}}function ln(c,a="fill"){if(null==c)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ai(c)||(c=vo(c));const h=c;let m=!0;try{m=function(q){if(!Qr(q))return q;let ce=J(q);return Dr(ce),ce=qn(ce),ce}(h)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(h,null,2)}\n        `)}const x=B[`filter_${a}`],T=Ec(m,x);let O=null;if("error"===T.result)throw new Error(T.value.map(q=>`${q.key}: ${q.message}`).join(", "));O=(q,ce,pe)=>T.value.evaluate(q,ce,{},pe);let G=null,W=null;if(m!==h){const q=Ec(h,x);if("error"===q.result)throw new Error(q.value.map(ce=>`${ce.key}: ${ce.message}`).join(", "));G=(ce,pe,ve,De,Oe)=>q.value.evaluate(ce,pe,{},ve,void 0,void 0,De,Oe),W=!va(q.value.expression)}return{filter:O,dynamicFilter:G||void 0,needGeometry:uo(m),needFeature:!!W}}function qn(c){if(!Array.isArray(c))return c;const a=function(h){if(Ps.has(h[0]))for(let m=1;m<h.length;m++)if(Qr(h[m]))return!0;return h}(c);return!0===a?a:a.map(h=>qn(h))}function Dr(c){let a=!1;const h=[];if("case"===c[0]){for(let m=1;m<c.length-1;m+=2)a=a||Qr(c[m]),h.push(c[m+1]);h.push(c[c.length-1])}else if("match"===c[0]){a=a||Qr(c[1]);for(let m=2;m<c.length-1;m+=2)h.push(c[m+1]);h.push(c[c.length-1])}else if("step"===c[0]){a=a||Qr(c[1]);for(let m=1;m<c.length-1;m+=2)h.push(c[m+1])}a&&(c.length=0,c.push("any",...h));for(let m=1;m<c.length;m++)Dr(c[m])}function Qr(c){if(!Array.isArray(c))return!1;if("pitch"===(a=c[0])||"distance-from-center"===a)return!0;var a;for(let h=1;h<c.length;h++)if(Qr(c[h]))return!0;return!1}const Ps=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function $s(c,a){return c<a?-1:c>a?1:0}function uo(c){if(!Array.isArray(c))return!1;if("within"===c[0])return!0;for(let a=1;a<c.length;a++)if(uo(c[a]))return!0;return!1}function vo(c){if(!c)return!0;const a=c[0];return c.length<=1?"any"!==a:"=="===a?ho(c[1],c[2],"=="):"!="===a?Yo(ho(c[1],c[2],"==")):"<"===a||">"===a||"<="===a||">="===a?ho(c[1],c[2],a):"any"===a?(h=c.slice(1),["any"].concat(h.map(vo))):"all"===a?["all"].concat(c.slice(1).map(vo)):"none"===a?["all"].concat(c.slice(1).map(vo).map(Yo)):"in"===a?Cl(c[1],c.slice(2)):"!in"===a?Yo(Cl(c[1],c.slice(2))):"has"===a?Vc(c[1]):"!has"===a?Yo(Vc(c[1])):"within"!==a||c;var h}function ho(c,a,h){switch(c){case"$type":return[`filter-type-${h}`,a];case"$id":return[`filter-id-${h}`,a];default:return[`filter-${h}`,c,a]}}function Cl(c,a){if(0===a.length)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(h=>typeof h!=typeof a[0])?["filter-in-large",c,["literal",a.sort($s)]]:["filter-in-small",c,["literal",a]]}}function Vc(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Yo(c){return["!",c]}function Cd(c){return Ai(J(c.value))?Ie(H({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):_h(c)}function _h(c){const a=c.value,h=c.key;if("array"!==ca(a))return[new lr(h,a,`array expected, ${ca(a)} found`)];const m=c.styleSpec;let x,T=[];if(a.length<1)return[new lr(h,a,"filter array must have at least 1 element")];switch(T=T.concat(ri({key:`${h}[0]`,value:a[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),K(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"===K(a[1])&&T.push(new lr(h,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":3!==a.length&&T.push(new lr(h,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(x=ca(a[1]),"string"!==x&&T.push(new lr(`${h}[1]`,a[1],`string expected, ${x} found`)));for(let O=2;O<a.length;O++)x=ca(a[O]),"$type"===K(a[1])?T=T.concat(ri({key:`${h}[${O}]`,value:a[O],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):"string"!==x&&"number"!==x&&"boolean"!==x&&T.push(new lr(`${h}[${O}]`,a[O],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let O=1;O<a.length;O++)T=T.concat(_h({key:`${h}[${O}]`,value:a[O],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":x=ca(a[1]),2!==a.length?T.push(new lr(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):"string"!==x&&T.push(new lr(`${h}[1]`,a[1],`string expected, ${x} found`));break;case"within":x=ca(a[1]),2!==a.length?T.push(new lr(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):"object"!==x&&T.push(new lr(`${h}[1]`,a[1],`object expected, ${x} found`))}return T}function Uc(c,a){const h=c.key,m=c.style,x=c.styleSpec,T=c.value,O=c.objectKey,G=x[`${a}_${c.layerType}`];if(!G)return[];const W=O.match(/^(.*)-transition$/);if("paint"===a&&W&&G[W[1]]&&G[W[1]].transition)return jo({key:h,value:T,valueSpec:x.transition,style:m,styleSpec:x});const q=c.valueSpec||G[O];if(!q)return[new lr(h,T,`unknown property "${O}"`)];let ce;if("string"===ca(T)&&fl(q)&&!q.tokens&&(ce=/^{([^}]+)}$/.exec(T))){const ve=`\`{ "type": "identity", "property": ${ce?JSON.stringify(ce[1]):'"_"'} }\``;return[new lr(h,T,`"${O}" does not support interpolation syntax\nUse an identity property function instead: ${ve}.`)]}const pe=[];return"symbol"===c.layerType&&("text-field"===O&&m&&!m.glyphs&&pe.push(new lr(h,T,'use of "text-field" requires a style "glyphs" property')),"text-font"===O&&qu(J(T))&&"identity"===K(T.type)&&pe.push(new lr(h,T,'"text-font" does not support identity functions'))),pe.concat(jo({key:c.key,value:T,valueSpec:q,style:m,styleSpec:x,expressionContext:"property",propertyType:a,propertyKey:O}))}function sd(c){return Uc(c,"paint")}function ze(c){return Uc(c,"layout")}function ae(c){let a=[];const h=c.value,m=c.key,x=c.style,T=c.styleSpec;h.type||h.ref||a.push(new lr(m,h,'either "type" or "ref" is required'));let O=K(h.type);const G=K(h.ref);if(h.id){const W=K(h.id);for(let q=0;q<c.arrayIndex;q++){const ce=x.layers[q];K(ce.id)===W&&a.push(new lr(m,h.id,`duplicate layer id "${h.id}", previously used at line ${ce.id.__line__}`))}}if("ref"in h){let W;["type","source","source-layer","filter","layout"].forEach(q=>{q in h&&a.push(new lr(m,h[q],`"${q}" is prohibited for ref layers`))}),x.layers.forEach(q=>{K(q.id)===G&&(W=q)}),W?W.ref?a.push(new lr(m,h.ref,"ref cannot reference another ref layer")):O=K(W.type):"string"==typeof G&&a.push(new lr(m,h.ref,`ref layer "${G}" not found`))}else if("background"!==O&&"sky"!==O)if(h.source){const W=x.sources&&x.sources[h.source],q=W&&K(W.type);W?"vector"===q&&"raster"===O?a.push(new lr(m,h.source,`layer "${h.id}" requires a raster source`)):"raster"===q&&"raster"!==O?a.push(new lr(m,h.source,`layer "${h.id}" requires a vector source`)):"vector"!==q||h["source-layer"]?"raster-dem"===q&&"hillshade"!==O?a.push(new lr(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==O||!h.paint||!h.paint["line-gradient"]&&!h.paint["line-trim-offset"]||"geojson"===q&&W.lineMetrics||a.push(new lr(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new lr(m,h,`layer "${h.id}" must specify a "source-layer"`)):a.push(new lr(m,h.source,`source "${h.source}" not found`))}else a.push(new lr(m,h,'missing required property "source"'));return a=a.concat(v({key:m,value:h,valueSpec:T.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>jo({key:`${m}.type`,value:h.type,valueSpec:T.layer.type,style:c.style,styleSpec:c.styleSpec,object:h,objectKey:"type"}),filter:W=>Cd(H({layerType:O},W)),layout:W=>v({layer:h,key:W.key,value:W.value,valueSpec:{},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{"*":q=>ze(H({layerType:O},q))}}),paint:W=>v({layer:h,key:W.key,value:W.value,valueSpec:{},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{"*":q=>sd(H({layerType:O},q))}})}})),a}function me(c){const a=c.value,h=c.key,m=ca(a);return"string"!==m?[new lr(h,a,`string expected, ${m} found`)]:[]}const Ge={promoteId:function({key:c,value:a}){if("string"===ca(a))return me({key:c,value:a});{const h=[];for(const m in a)h.push(...me({key:`${c}.${m}`,value:a[m]}));return h}}};function Ee(c){const a=c.value,h=c.key,m=c.styleSpec,x=c.style;if(!a.type)return[new lr(h,a,'"type" is required')];const T=K(a.type);let O;switch(T){case"vector":case"raster":case"raster-dem":return O=v({key:h,value:a,valueSpec:m[`source_${T.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:Ge}),O;case"geojson":if(O=v({key:h,value:a,valueSpec:m.source_geojson,style:x,styleSpec:m,objectElementValidators:Ge}),a.cluster)for(const G in a.clusterProperties){const[W,q]=a.clusterProperties[G],ce="string"==typeof W?[W,["accumulated"],["get",G]]:W;O.push(...Ie({key:`${h}.${G}.map`,value:q,expressionContext:"cluster-map"})),O.push(...Ie({key:`${h}.${G}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return O;case"video":return v({key:h,value:a,valueSpec:m.source_video,style:x,styleSpec:m});case"image":return v({key:h,value:a,valueSpec:m.source_image,style:x,styleSpec:m});case"canvas":return[new lr(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ri({key:`${h}.type`,value:a.type,valueSpec:{values:yn(m)},style:x,styleSpec:m})}}function yn(c){return c.source.reduce((a,h)=>{const m=c[h];return"enum"===m.type.type&&(a=a.concat(Object.keys(m.type.values))),a},[])}function Tr(c){const a=c.value,h=c.styleSpec,m=h.light,x=c.style;let T=[];const O=ca(a);if(void 0===a)return T;if("object"!==O)return T=T.concat([new lr("light",a,`object expected, ${O} found`)]),T;for(const G in a){const W=G.match(/^(.*)-transition$/);T=T.concat(W&&m[W[1]]&&m[W[1]].transition?jo({key:G,value:a[G],valueSpec:h.transition,style:x,styleSpec:h}):m[G]?jo({key:G,value:a[G],valueSpec:m[G],style:x,styleSpec:h}):[new lr(G,a[G],`unknown property "${G}"`)])}return T}function ys(c){const a=c.value,h=c.key,m=c.style,x=c.styleSpec,T=x.terrain;let O=[];const G=ca(a);if(void 0===a)return O;if("object"!==G)return O=O.concat([new lr("terrain",a,`object expected, ${G} found`)]),O;for(const W in a){const q=W.match(/^(.*)-transition$/);O=O.concat(q&&T[q[1]]&&T[q[1]].transition?jo({key:W,value:a[W],valueSpec:x.transition,style:m,styleSpec:x}):T[W]?jo({key:W,value:a[W],valueSpec:T[W],style:m,styleSpec:x}):[new lr(W,a[W],`unknown property "${W}"`)])}if(a.source){const W=m.sources&&m.sources[a.source],q=W&&K(W.type);W?"raster-dem"!==q&&O.push(new lr(h,a.source,`terrain cannot be used with a source of type ${String(q)}, it only be used with a "raster-dem" source type`)):O.push(new lr(h,a.source,`source "${a.source}" not found`))}else O.push(new lr(h,a,'terrain is missing required property "source"'));return O}function Or(c){const a=c.value,h=c.style,m=c.styleSpec,x=m.fog;let T=[];const O=ca(a);if(void 0===a)return T;if("object"!==O)return T=T.concat([new lr("fog",a,`object expected, ${O} found`)]),T;for(const G in a){const W=G.match(/^(.*)-transition$/);T=T.concat(W&&x[W[1]]&&x[W[1]].transition?jo({key:G,value:a[G],valueSpec:m.transition,style:h,styleSpec:m}):x[G]?jo({key:G,value:a[G],valueSpec:x[G],style:h,styleSpec:m}):[new lr(G,a[G],`unknown property "${G}"`)])}return T}const ko={"*":()=>[],array:R,boolean:function(c){const a=c.value,h=c.key,m=ca(a);return"boolean"!==m?[new lr(h,a,`boolean expected, ${m} found`)]:[]},number:Z,color:function(c){const a=c.key,h=c.value,m=ca(h);return"string"!==m?[new lr(a,h,`color expected, ${m} found`)]:null===Zr(h)?[new lr(a,h,`color expected, "${h}" found`)]:[]},enum:ri,filter:Cd,function:fe,layer:ae,object:v,source:Ee,light:Tr,terrain:ys,fog:Or,string:me,formatted:function(c){return 0===me(c).length?[]:Ie(c)},resolvedImage:function(c){return 0===me(c).length?[]:Ie(c)},projection:function(c){const a=c.value,h=c.styleSpec,m=h.projection,x=c.style;let T=[];const O=ca(a);if("object"===O)for(const G in a)T=T.concat(jo({key:G,value:a[G],valueSpec:m[G],style:x,styleSpec:h}));else"string"!==O&&(T=T.concat([new lr("projection",a,`object or string expected, ${O} found`)]));return T}};function jo(c){const a=c.value,h=c.valueSpec,m=c.styleSpec;return h.expression&&qu(K(a))?fe(c):h.expression&&Au(J(a))?Ie(c):h.type&&ko[h.type]?ko[h.type](c):v(H({},c,{valueSpec:h.type?m[h.type]:h}))}function Yp(c){const a=c.value,h=c.key,m=me(c);return m.length||(-1===a.indexOf("{fontstack}")&&m.push(new lr(h,a,'"glyphs" url must include a "{fontstack}" token')),-1===a.indexOf("{range}")&&m.push(new lr(h,a,'"glyphs" url must include a "{range}" token'))),m}function yh(c,a=B){return Ju(jo({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,objectElementValidators:{glyphs:Yp,"*":()=>[]}}))}const _v=c=>Ju(sd(c)),Sm=c=>Ju(ze(c));function Ju(c){return c.slice().sort((a,h)=>a.line&&h.line?a.line-h.line:0)}function fg(c,a){let h=!1;if(a&&a.length)for(const m of a)c.fire(new C(new Error(m.message))),h=!0;return h}var Du=Iu,zl=3;function Iu(c,a,h){var m=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var x=new Int32Array(this.arrayBuffer);c=x[0],this.d=(a=x[1])+2*(h=x[2]);for(var T=0;T<this.d*this.d;T++){var O=x[zl+T],G=x[zl+T+1];m.push(O===G?null:x.subarray(O,G))}var W=x[zl+m.length+1];this.keys=x.subarray(x[zl+m.length],W),this.bboxes=x.subarray(W),this.insert=this._insertReadonly}else{this.d=a+2*h;for(var q=0;q<this.d*this.d;q++)m.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=c,this.padding=h,this.scale=a/c,this.uid=0;var ce=h/a*c;this.min=-ce,this.max=c+ce}Iu.prototype.insert=function(c,a,h,m,x){this._forEachCell(a,h,m,x,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(x)},Iu.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Iu.prototype._insertCell=function(c,a,h,m,x,T){this.cells[x].push(T)},Iu.prototype.query=function(c,a,h,m,x){var T=this.min,O=this.max;if(c<=T&&a<=T&&O<=h&&O<=m&&!x)return Array.prototype.slice.call(this.keys);var G=[];return this._forEachCell(c,a,h,m,this._queryCell,G,{},x),G},Iu.prototype._queryCell=function(c,a,h,m,x,T,O,G){var W=this.cells[x];if(null!==W)for(var q=this.keys,ce=this.bboxes,pe=0;pe<W.length;pe++){var ve=W[pe];if(void 0===O[ve]){var De=4*ve;(G?G(ce[De+0],ce[De+1],ce[De+2],ce[De+3]):c<=ce[De+2]&&a<=ce[De+3]&&h>=ce[De+0]&&m>=ce[De+1])?(O[ve]=!0,T.push(q[ve])):O[ve]=!1}}},Iu.prototype._forEachCell=function(c,a,h,m,x,T,O,G){for(var W=this._convertToCellCoord(c),q=this._convertToCellCoord(a),ce=this._convertToCellCoord(h),pe=this._convertToCellCoord(m),ve=W;ve<=ce;ve++)for(var De=q;De<=pe;De++){var Oe=this.d*De+ve;if((!G||G(this._convertFromCellCoord(ve),this._convertFromCellCoord(De),this._convertFromCellCoord(ve+1),this._convertFromCellCoord(De+1)))&&x.call(this,c,a,h,m,Oe,T,O,G))return}},Iu.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},Iu.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},Iu.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,a=zl+this.cells.length+1+1,h=0,m=0;m<this.cells.length;m++)h+=this.cells[m].length;var x=new Int32Array(a+h+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var T=a,O=0;O<c.length;O++){var G=c[O];x[zl+O]=T,x.set(G,T),T+=G.length}return x[zl+c.length]=T,x.set(this.keys,T),x[zl+c.length+1]=T+=this.keys.length,x.set(this.bboxes,T),T+=this.bboxes.length,x.buffer};var ff=Tt(Du);const Ql={};function kr(c,a,h={}){Object.defineProperty(c,"_classRegistryKey",{value:a,writeable:!1}),Ql[a]={klass:c,omit:h.omit||[]}}kr(Object,"Object"),ff.serialize=function(c,a){const h=c.toArrayBuffer();return a&&a.push(h),{buffer:h}},ff.deserialize=function(c){return new ff(c.buffer)},Object.defineProperty(ff,"name",{value:"Grid"}),kr(ff,"Grid"),kr(Ws,"Color"),kr(Error,"Error"),kr(as,"AJAXError"),kr(Ta,"ResolvedImage"),kr(ou,"StylePropertyFunction"),kr(Ku,"StyleExpression",{omit:["_evaluator"]}),kr(au,"ZoomDependentExpression"),kr(Hc,"ZoomConstantExpression"),kr(wa,"CompoundExpression",{omit:["_evaluate"]});for(const c in Uo)Ql[Uo[c]._classRegistryKey]||kr(Uo[c],`Expression${c}`);function ec(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&"ArrayBuffer"===c.constructor.name)}function xh(c){return j.ImageBitmap&&c instanceof j.ImageBitmap}function pf(c,a){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(ec(c)||xh(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return a&&a.push(h.buffer),h}if(c instanceof j.ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const m of c)h.push(pf(m,a));return h}if("object"==typeof c){const h=c.constructor,m=h._classRegistryKey;if(!m)throw new Error(`can't serialize object of unregistered class ${m}`);const x=h.serialize?h.serialize(c,a):{};if(!h.serialize){for(const T in c)c.hasOwnProperty(T)&&(Ql[m].omit.indexOf(T)>=0||(x[T]=pf(c[T],a)));c instanceof Error&&(x.message=c.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==m&&(x.$name=m),x}throw new Error("can't serialize object of type "+typeof c)}function Nf(c){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||ec(c)||xh(c)||ArrayBuffer.isView(c)||c instanceof j.ImageData)return c;if(Array.isArray(c))return c.map(Nf);if("object"==typeof c){const a=c.$name||"Object",{klass:h}=Ql[a];if(!h)throw new Error(`can't deserialize unregistered class ${a}`);if(h.deserialize)return h.deserialize(c);const m=Object.create(h.prototype);for(const x of Object.keys(c))"$name"!==x&&(m[x]=Nf(c[x]));return m}throw new Error("can't deserialize object of type "+typeof c)}const fr={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Ed(c){for(const a of c)if(Gp(a.charCodeAt(0)))return!0;return!1}function r0(c){for(const a of c)if(!kd(a.charCodeAt(0)))return!1;return!0}function kd(c){return!(fr.Arabic(c)||fr["Arabic Supplement"](c)||fr["Arabic Extended-A"](c)||fr["Arabic Presentation Forms-A"](c)||fr["Arabic Presentation Forms-B"](c))}function Gp(c){return!(746!==c&&747!==c&&(c<4352||!(fr["Bopomofo Extended"](c)||fr.Bopomofo(c)||fr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||fr["CJK Compatibility Ideographs"](c)||fr["CJK Compatibility"](c)||fr["CJK Radicals Supplement"](c)||fr["CJK Strokes"](c)||!(!fr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||12336===c)||fr["CJK Unified Ideographs Extension A"](c)||fr["CJK Unified Ideographs"](c)||fr["Enclosed CJK Letters and Months"](c)||fr["Hangul Compatibility Jamo"](c)||fr["Hangul Jamo Extended-A"](c)||fr["Hangul Jamo Extended-B"](c)||fr["Hangul Jamo"](c)||fr["Hangul Syllables"](c)||fr.Hiragana(c)||fr["Ideographic Description Characters"](c)||fr.Kanbun(c)||fr["Kangxi Radicals"](c)||fr["Katakana Phonetic Extensions"](c)||fr.Katakana(c)&&12540!==c||!(!fr["Halfwidth and Fullwidth Forms"](c)||65288===c||65289===c||65293===c||c>=65306&&c<=65310||65339===c||65341===c||65343===c||c>=65371&&c<=65503||65507===c||c>=65512&&c<=65519)||!(!fr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||fr["Unified Canadian Aboriginal Syllabics"](c)||fr["Unified Canadian Aboriginal Syllabics Extended"](c)||fr["Vertical Forms"](c)||fr["Yijing Hexagram Symbols"](c)||fr["Yi Syllables"](c)||fr["Yi Radicals"](c))))}function ad(c){return!(Gp(c)||(a=c,fr["Latin-1 Supplement"](a)&&(167===a||169===a||174===a||177===a||188===a||189===a||190===a||215===a||247===a)||fr["General Punctuation"](a)&&(8214===a||8224===a||8225===a||8240===a||8241===a||8251===a||8252===a||8258===a||8263===a||8264===a||8265===a||8273===a)||fr["Letterlike Symbols"](a)||fr["Number Forms"](a)||fr["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||9003===a||a>=9085&&a<=9114||a>=9150&&a<=9165||9167===a||a>=9169&&a<=9179||a>=9186&&a<=9215)||fr["Control Pictures"](a)&&9251!==a||fr["Optical Character Recognition"](a)||fr["Enclosed Alphanumerics"](a)||fr["Geometric Shapes"](a)||fr["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||fr["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||fr["CJK Symbols and Punctuation"](a)||fr.Katakana(a)||fr["Private Use Area"](a)||fr["CJK Compatibility Forms"](a)||fr["Small Form Variants"](a)||fr["Halfwidth and Fullwidth Forms"](a)||8734===a||8756===a||8757===a||a>=9984&&a<=10087||a>=10102&&a<=10131||65532===a||65533===a));var a}function lu(c){return c>=1424&&c<=2303||fr["Arabic Presentation Forms-A"](c)||fr["Arabic Presentation Forms-B"](c)}function s0(c,a){return!(!a&&lu(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||fr.Khmer(c))}function Mu(c){for(const a of c)if(lu(a.charCodeAt(0)))return!0;return!1}const Hp="deferred",Am="loading",pg="loaded";let mf=null,k="unavailable",d=null;const _=function(c){c&&"string"==typeof c&&c.indexOf("NetworkError")>-1&&(k="error"),mf&&mf(c)};function I(){Y.fire(new w("pluginStateChange",{pluginStatus:k,pluginURL:d}))}const Y=new M,V=function(){return k},Q=function(){if(k!==Hp||!d)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");k=Am,I(),d&&Bs({url:d},c=>{c?_(c):(k=pg,I())})},re={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>k===pg||null!=re.applyArabicShaping,isLoading:()=>k===Am,setState(c){k=c.pluginStatus,d=c.pluginURL},isParsed:()=>null!=re.applyArabicShaping&&null!=re.processBidirectionalText&&null!=re.processStyledBidirectionalText,getPluginURL:()=>d};class ue{constructor(a,h){this.zoom=a,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.transition=h.transition,this.pitch=h.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(a){return function(h,m){for(const x of h)if(!s0(x.charCodeAt(0),m))return!1;return!0}(a,re.isLoaded())}}class be{constructor(a,h){this.property=a,this.value=h,this.expression=function(m,x){if(qu(m))return new ou(m,x);if(Au(m)){const T=vh(m,x);if("error"===T.result)throw new Error(T.value.map(O=>`${O.key}: ${O.message}`).join(", "));return T.value}{let T=m;return"string"==typeof m&&"color"===x.type&&(T=Ws.parse(m)),{kind:"constant",evaluate:()=>T}}}(void 0===h?a.specification.default:h,a.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(a,h,m){return this.property.possiblyEvaluate(this,a,h,m)}}class ye{constructor(a){this.property=a,this.value=new be(a,void 0)}transitioned(a,h){return new et(this.property,this.value,h,hr({},a.transition,this.transition),a.now)}untransitioned(){return new et(this.property,this.value,null,{},0)}}class Fe{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return Cs(this._values[a].value.value)}setValue(a,h){this._values.hasOwnProperty(a)||(this._values[a]=new ye(this._values[a].property)),this._values[a].value=new be(this._values[a].property,null===h?void 0:Cs(h))}getTransition(a){return Cs(this._values[a].transition)}setTransition(a,h){this._values.hasOwnProperty(a)||(this._values[a]=new ye(this._values[a].property)),this._values[a].transition=Cs(h)||void 0}serialize(){const a={};for(const h of Object.keys(this._values)){const m=this.getValue(h);void 0!==m&&(a[h]=m);const x=this.getTransition(h);void 0!==x&&(a[`${h}-transition`]=x)}return a}transitioned(a,h){const m=new ut(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].transitioned(a,h._values[x]);return m}untransitioned(){const a=new ut(this._properties);for(const h of Object.keys(this._values))a._values[h]=this._values[h].untransitioned();return a}}class et{constructor(a,h,m,x,T){const O=x.delay||0,G=x.duration||0;T=T||0,this.property=a,this.value=h,this.begin=T+O,this.end=this.begin+G,a.specification.transition&&(x.delay||x.duration)&&(this.prior=m)}possiblyEvaluate(a,h,m){const x=a.now||0,T=this.value.possiblyEvaluate(a,h,m),O=this.prior;if(O){if(x>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(x<this.begin)return O.possiblyEvaluate(a,h,m);{const G=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(O.possiblyEvaluate(a,h,m),T,Ri(G))}}return T}}class ut{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,h,m){const x=new wt(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(a,h,m);return x}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class ft{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return Cs(this._values[a].value)}setValue(a,h){this._values[a]=new be(this._values[a].property,null===h?void 0:Cs(h))}serialize(){const a={};for(const h of Object.keys(this._values)){const m=this.getValue(h);void 0!==m&&(a[h]=m)}return a}possiblyEvaluate(a,h,m){const x=new wt(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(a,h,m);return x}}class vt{constructor(a,h,m){this.property=a,this.value=h,this.parameters=m}isConstant(){return"constant"===this.value.kind}constantOr(a){return"constant"===this.value.kind?this.value.value:a}evaluate(a,h,m,x){return this.property.evaluate(this.value,this.parameters,a,h,m,x)}}class wt{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Ye{constructor(a){this.specification=a}possiblyEvaluate(a,h){return a.expression.evaluate(h)}interpolate(a,h,m){const x=mo[this.specification.type];return x?x(a,h,m):a}}class ht{constructor(a,h){this.specification=a,this.overrides=h}possiblyEvaluate(a,h,m,x){return new vt(this,"constant"===a.expression.kind||"camera"===a.expression.kind?{kind:"constant",value:a.expression.evaluate(h,null,{},m,x)}:a.expression,h)}interpolate(a,h,m){if("constant"!==a.value.kind||"constant"!==h.value.kind)return a;if(void 0===a.value.value||void 0===h.value.value)return new vt(this,{kind:"constant",value:void 0},a.parameters);const x=mo[this.specification.type];return x?new vt(this,{kind:"constant",value:x(a.value.value,h.value.value,m)},a.parameters):a}evaluate(a,h,m,x,T,O){return"constant"===a.kind?a.value:a.evaluate(h,m,x,T,O)}}class zt{constructor(a){this.specification=a}possiblyEvaluate(a,h,m,x){return!!a.expression.evaluate(h,null,{},m,x)}interpolate(){return!1}}class xt{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const h=new ue(0,{});for(const m in a){const x=a[m];x.specification.overridable&&this.overridableProperties.push(m);const T=this.defaultPropertyValues[m]=new be(x,void 0),O=this.defaultTransitionablePropertyValues[m]=new ye(x);this.defaultTransitioningPropertyValues[m]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=T.possiblyEvaluate(h)}}}function fi(c,a){return 256*(c=qi(Math.floor(c),0,255))+qi(Math.floor(a),0,255)}kr(ht,"DataDrivenProperty"),kr(Ye,"DataConstantProperty"),kr(zt,"ColorRampProperty");const pi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ai{constructor(a,h){this._structArray=a,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ii{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,h){return a._trim(),h&&(a.isTransferred=!0,h.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const h=Object.create(this.prototype);return h.arrayBuffer=a.arrayBuffer,h.length=a.length,h.capacity=a.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ei(c,a=1){let h=0,m=0;return{members:c.map(x=>{const T=pi[x.type].BYTES_PER_ELEMENT,O=h=Yi(h,Math.max(a,T)),G=x.components||1;return m=Math.max(m,T),h+=T*G,{name:x.name,type:x.type,components:G,offset:O}}),size:Yi(h,Math.max(m,a)),alignment:a}}function Yi(c,a){return Math.ceil(c/a)*a}class Gn extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h){const m=this.length;return this.resize(m+1),this.emplace(m,a,h)}emplace(a,h,m){const x=2*a;return this.int16[x+0]=h,this.int16[x+1]=m,a}}Gn.prototype.bytesPerElement=4,kr(Gn,"StructArrayLayout2i4");class Ni extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,m){const x=this.length;return this.resize(x+1),this.emplace(x,a,h,m)}emplace(a,h,m,x){const T=3*a;return this.int16[T+0]=h,this.int16[T+1]=m,this.int16[T+2]=x,a}}Ni.prototype.bytesPerElement=6,kr(Ni,"StructArrayLayout3i6");class dn extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,m,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,h,m,x)}emplace(a,h,m,x,T){const O=4*a;return this.int16[O+0]=h,this.int16[O+1]=m,this.int16[O+2]=x,this.int16[O+3]=T,a}}dn.prototype.bytesPerElement=8,kr(dn,"StructArrayLayout4i8");class Vi extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O,G){const W=this.length;return this.resize(W+1),this.emplace(W,a,h,m,x,T,O,G)}emplace(a,h,m,x,T,O,G,W){const q=6*a,ce=12*a,pe=3*a;return this.int16[q+0]=h,this.int16[q+1]=m,this.uint8[ce+4]=x,this.uint8[ce+5]=T,this.uint8[ce+6]=O,this.uint8[ce+7]=G,this.float32[pe+2]=W,a}}Vi.prototype.bytesPerElement=12,kr(Vi,"StructArrayLayout2i4ub1f12");class Dn extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,m,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,h,m,x)}emplace(a,h,m,x,T){const O=4*a;return this.float32[O+0]=h,this.float32[O+1]=m,this.float32[O+2]=x,this.float32[O+3]=T,a}}Dn.prototype.bytesPerElement=16,kr(Dn,"StructArrayLayout4f16");class Wi extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T){const O=this.length;return this.resize(O+1),this.emplace(O,a,h,m,x,T)}emplace(a,h,m,x,T,O){const G=6*a,W=3*a;return this.uint16[G+0]=h,this.uint16[G+1]=m,this.uint16[G+2]=x,this.uint16[G+3]=T,this.float32[W+2]=O,a}}Wi.prototype.bytesPerElement=12,kr(Wi,"StructArrayLayout4ui1f12");class on extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,m,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,h,m,x)}emplace(a,h,m,x,T){const O=4*a;return this.uint16[O+0]=h,this.uint16[O+1]=m,this.uint16[O+2]=x,this.uint16[O+3]=T,a}}on.prototype.bytesPerElement=8,kr(on,"StructArrayLayout4ui8");class Wn extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O){const G=this.length;return this.resize(G+1),this.emplace(G,a,h,m,x,T,O)}emplace(a,h,m,x,T,O,G){const W=6*a;return this.int16[W+0]=h,this.int16[W+1]=m,this.int16[W+2]=x,this.int16[W+3]=T,this.int16[W+4]=O,this.int16[W+5]=G,a}}Wn.prototype.bytesPerElement=12,kr(Wn,"StructArrayLayout6i12");class Ln extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O,G,W,q,ce,pe,ve){const De=this.length;return this.resize(De+1),this.emplace(De,a,h,m,x,T,O,G,W,q,ce,pe,ve)}emplace(a,h,m,x,T,O,G,W,q,ce,pe,ve,De){const Oe=12*a;return this.int16[Oe+0]=h,this.int16[Oe+1]=m,this.int16[Oe+2]=x,this.int16[Oe+3]=T,this.uint16[Oe+4]=O,this.uint16[Oe+5]=G,this.uint16[Oe+6]=W,this.uint16[Oe+7]=q,this.int16[Oe+8]=ce,this.int16[Oe+9]=pe,this.int16[Oe+10]=ve,this.int16[Oe+11]=De,a}}Ln.prototype.bytesPerElement=24,kr(Ln,"StructArrayLayout4i4ui4i24");class Hn extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O){const G=this.length;return this.resize(G+1),this.emplace(G,a,h,m,x,T,O)}emplace(a,h,m,x,T,O,G){const W=10*a,q=5*a;return this.int16[W+0]=h,this.int16[W+1]=m,this.int16[W+2]=x,this.float32[q+2]=T,this.float32[q+3]=O,this.float32[q+4]=G,a}}Hn.prototype.bytesPerElement=20,kr(Hn,"StructArrayLayout3i3f20");class Rr extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint32[1*a+0]=h,a}}Rr.prototype.bytesPerElement=4,kr(Rr,"StructArrayLayout1ul4");class ms extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O,G,W,q,ce,pe,ve,De){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,a,h,m,x,T,O,G,W,q,ce,pe,ve,De)}emplace(a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe){const Ve=20*a,at=10*a;return this.int16[Ve+0]=h,this.int16[Ve+1]=m,this.int16[Ve+2]=x,this.int16[Ve+3]=T,this.int16[Ve+4]=O,this.float32[at+3]=G,this.float32[at+4]=W,this.float32[at+5]=q,this.float32[at+6]=ce,this.int16[Ve+14]=pe,this.uint32[at+8]=ve,this.uint16[Ve+18]=De,this.uint16[Ve+19]=Oe,a}}ms.prototype.bytesPerElement=40,kr(ms,"StructArrayLayout5i4f1i1ul2ui40");class Sr extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O,G){const W=this.length;return this.resize(W+1),this.emplace(W,a,h,m,x,T,O,G)}emplace(a,h,m,x,T,O,G,W){const q=8*a;return this.int16[q+0]=h,this.int16[q+1]=m,this.int16[q+2]=x,this.int16[q+4]=T,this.int16[q+5]=O,this.int16[q+6]=G,this.int16[q+7]=W,a}}Sr.prototype.bytesPerElement=16,kr(Sr,"StructArrayLayout3i2i2i16");class Ir extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T){const O=this.length;return this.resize(O+1),this.emplace(O,a,h,m,x,T)}emplace(a,h,m,x,T,O){const G=4*a,W=8*a;return this.float32[G+0]=h,this.float32[G+1]=m,this.float32[G+2]=x,this.int16[W+6]=T,this.int16[W+7]=O,a}}Ir.prototype.bytesPerElement=16,kr(Ir,"StructArrayLayout2f1f2i16");class xs extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,m,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,h,m,x)}emplace(a,h,m,x,T){const O=12*a,G=3*a;return this.uint8[O+0]=h,this.uint8[O+1]=m,this.float32[G+1]=x,this.float32[G+2]=T,a}}xs.prototype.bytesPerElement=12,kr(xs,"StructArrayLayout2ub2f12");class cs extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,m){const x=this.length;return this.resize(x+1),this.emplace(x,a,h,m)}emplace(a,h,m,x){const T=3*a;return this.float32[T+0]=h,this.float32[T+1]=m,this.float32[T+2]=x,a}}cs.prototype.bytesPerElement=12,kr(cs,"StructArrayLayout3f12");class zr extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,m){const x=this.length;return this.resize(x+1),this.emplace(x,a,h,m)}emplace(a,h,m,x){const T=3*a;return this.uint16[T+0]=h,this.uint16[T+1]=m,this.uint16[T+2]=x,a}}zr.prototype.bytesPerElement=6,kr(zr,"StructArrayLayout3ui6");class Qs extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve,at,It,ii,Ot,Kt,ci){const li=this.length;return this.resize(li+1),this.emplace(li,a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve,at,It,ii,Ot,Kt,ci)}emplace(a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve,at,It,ii,Ot,Kt,ci,li){const Ji=30*a,Ui=15*a,wn=60*a;return this.int16[Ji+0]=h,this.int16[Ji+1]=m,this.int16[Ji+2]=x,this.float32[Ui+2]=T,this.float32[Ui+3]=O,this.uint16[Ji+8]=G,this.uint16[Ji+9]=W,this.uint32[Ui+5]=q,this.uint32[Ui+6]=ce,this.uint32[Ui+7]=pe,this.uint16[Ji+16]=ve,this.uint16[Ji+17]=De,this.uint16[Ji+18]=Oe,this.float32[Ui+10]=Ve,this.float32[Ui+11]=at,this.uint8[wn+48]=It,this.uint8[wn+49]=ii,this.uint8[wn+50]=Ot,this.uint32[Ui+13]=Kt,this.int16[Ji+28]=ci,this.uint8[wn+58]=li,a}}Qs.prototype.bytesPerElement=60,kr(Qs,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Za extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve,at,It,ii,Ot,Kt,ci,li,Ji,Ui,wn,Kn,rn,In,An,Vn){const er=this.length;return this.resize(er+1),this.emplace(er,a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve,at,It,ii,Ot,Kt,ci,li,Ji,Ui,wn,Kn,rn,In,An,Vn)}emplace(a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve,at,It,ii,Ot,Kt,ci,li,Ji,Ui,wn,Kn,rn,In,An,Vn,er){const gn=38*a,_r=19*a;return this.int16[gn+0]=h,this.int16[gn+1]=m,this.int16[gn+2]=x,this.float32[_r+2]=T,this.float32[_r+3]=O,this.int16[gn+8]=G,this.int16[gn+9]=W,this.int16[gn+10]=q,this.int16[gn+11]=ce,this.int16[gn+12]=pe,this.int16[gn+13]=ve,this.uint16[gn+14]=De,this.uint16[gn+15]=Oe,this.uint16[gn+16]=Ve,this.uint16[gn+17]=at,this.uint16[gn+18]=It,this.uint16[gn+19]=ii,this.uint16[gn+20]=Ot,this.uint16[gn+21]=Kt,this.uint16[gn+22]=ci,this.uint16[gn+23]=li,this.uint16[gn+24]=Ji,this.uint16[gn+25]=Ui,this.uint16[gn+26]=wn,this.uint16[gn+27]=Kn,this.uint16[gn+28]=rn,this.uint32[_r+15]=In,this.float32[_r+16]=An,this.float32[_r+17]=Vn,this.float32[_r+18]=er,a}}Za.prototype.bytesPerElement=76,kr(Za,"StructArrayLayout3i2f6i15ui1ul3f76");class eo extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.float32[1*a+0]=h,a}}eo.prototype.bytesPerElement=4,kr(eo,"StructArrayLayout1f4");class no extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,m,x,T){const O=this.length;return this.resize(O+1),this.emplace(O,a,h,m,x,T)}emplace(a,h,m,x,T,O){const G=5*a;return this.float32[G+0]=h,this.float32[G+1]=m,this.float32[G+2]=x,this.float32[G+3]=T,this.float32[G+4]=O,a}}no.prototype.bytesPerElement=20,kr(no,"StructArrayLayout5f20");class jc extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,m,x){const T=this.length;return this.resize(T+1),this.emplace(T,a,h,m,x)}emplace(a,h,m,x,T){const O=6*a;return this.uint32[3*a+0]=h,this.uint16[O+2]=m,this.uint16[O+3]=x,this.uint16[O+4]=T,a}}jc.prototype.bytesPerElement=12,kr(jc,"StructArrayLayout1ul3ui12");class Wo extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h){const m=this.length;return this.resize(m+1),this.emplace(m,a,h)}emplace(a,h,m){const x=2*a;return this.uint16[x+0]=h,this.uint16[x+1]=m,a}}Wo.prototype.bytesPerElement=4,kr(Wo,"StructArrayLayout2ui4");class ua extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint16[1*a+0]=h,a}}ua.prototype.bytesPerElement=2,kr(ua,"StructArrayLayout1ui2");class bh extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h){const m=this.length;return this.resize(m+1),this.emplace(m,a,h)}emplace(a,h,m){const x=2*a;return this.float32[x+0]=h,this.float32[x+1]=m,a}}bh.prototype.bytesPerElement=8,kr(bh,"StructArrayLayout2f8");class _o extends ai{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}_o.prototype.size=40;class Ca extends ms{get(a){return new _o(this,a)}}kr(Ca,"CollisionBoxArray");class Da extends ai{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}Da.prototype.size=60;class ro extends Qs{get(a){return new Da(this,a)}}kr(ro,"PlacedSymbolArray");class Wc extends ai{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(a){this._structArray.uint32[this._pos4+15]=a}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Wc.prototype.size=76;class to extends Za{get(a){return new Wc(this,a)}}kr(to,"SymbolInstanceArray");class cu extends eo{getoffsetX(a){return this.float32[1*a+0]}}kr(cu,"GlyphOffsetArray");class uu extends Gn{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}kr(uu,"SymbolLineVertexArray");class To extends ai{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}To.prototype.size=12;class wh extends jc{get(a){return new To(this,a)}}kr(wh,"FeatureIndexArray");class tc extends Wo{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}kr(tc,"FillExtrusionCentroidArray");const Gh=Ei([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ou=Ei([{name:"a_dash",components:4,type:"Uint16"}]);var lp={exports:{}},ha=function(c,a){var h,m,x,T,O,G,W,q;for(m=c.length-(h=3&c.length),x=a,O=3432918353,G=461845907,q=0;q<m;)W=255&c.charCodeAt(q)|(255&c.charCodeAt(++q))<<8|(255&c.charCodeAt(++q))<<16|(255&c.charCodeAt(++q))<<24,++q,x=27492+(65535&(T=5*(65535&(x=(x^=W=(65535&(W=(W=(65535&W)*O+(((W>>>16)*O&65535)<<16)&4294967295)<<15|W>>>17))*G+(((W>>>16)*G&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(W=0,h){case 3:W^=(255&c.charCodeAt(q+2))<<16;case 2:W^=(255&c.charCodeAt(q+1))<<8;case 1:x^=W=(65535&(W=(W=(65535&(W^=255&c.charCodeAt(q)))*O+(((W>>>16)*O&65535)<<16)&4294967295)<<15|W>>>17))*G+(((W>>>16)*G&65535)<<16)&4294967295}return x^=c.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0},Ey=function(c,a){for(var h,m=c.length,x=a^m,T=0;m>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(T)|(255&c.charCodeAt(++T))<<8|(255&c.charCodeAt(++T))<<16|(255&c.charCodeAt(++T))<<24))+((1540483477*(h>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++T;switch(m){case 3:x^=(255&c.charCodeAt(T+2))<<16;case 2:x^=(255&c.charCodeAt(T+1))<<8;case 1:x=1540483477*(65535&(x^=255&c.charCodeAt(T)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0};lp.exports=ha,lp.exports.murmur3=ha,lp.exports.murmur2=Ey;var yv=Tt(lp.exports);class gf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,h,m,x){this.ids.push(Vp(a)),this.positions.push(h,m,x)}getPositions(a){const h=Vp(a);let m=0,x=this.ids.length-1;for(;m<x;){const O=m+x>>1;this.ids[O]>=h?x=O:m=O+1}const T=[];for(;this.ids[m]===h;)T.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return T}static serialize(a,h){const m=new Float64Array(a.ids),x=new Uint32Array(a.positions);return Up(m,x,0,m.length-1),h&&h.push(m.buffer,x.buffer),{ids:m,positions:x}}static deserialize(a){const h=new gf;return h.ids=a.ids,h.positions=a.positions,h.indexed=!0,h}}function Vp(c){const a=+c;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:yv(String(c))}function Up(c,a,h,m){for(;h<m;){const x=c[h+m>>1];let T=h-1,O=m+1;for(;;){do{T++}while(c[T]<x);do{O--}while(c[O]>x);if(T>=O)break;mg(c,T,O),mg(a,3*T,3*O),mg(a,3*T+1,3*O+1),mg(a,3*T+2,3*O+2)}O-h<m-O?(Up(c,a,h,O),h=O+1):(Up(c,a,O+1,m),m=O)}}function mg(c,a,h){const m=c[a];c[a]=c[h],c[h]=m}kr(gf,"FeaturePositionMap");class Yl{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,h){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,h),this.initialized=!0),!!this.location}}class gg extends Yl{constructor(a){super(a),this.current=0}set(a,h,m){this.fetchUniformLocation(a,h)&&this.current!==m&&(this.current=m,this.gl.uniform1f(this.location,m))}}class Dm extends Yl{constructor(a){super(a),this.current=[0,0,0,0]}set(a,h,m){this.fetchUniformLocation(a,h)&&(m[0]===this.current[0]&&m[1]===this.current[1]&&m[2]===this.current[2]&&m[3]===this.current[3]||(this.current=m,this.gl.uniform4f(this.location,m[0],m[1],m[2],m[3])))}}class vg extends Yl{constructor(a){super(a),this.current=Ws.transparent}set(a,h,m){this.fetchUniformLocation(a,h)&&(m.r===this.current.r&&m.g===this.current.g&&m.b===this.current.b&&m.a===this.current.a||(this.current=m,this.gl.uniform4f(this.location,m.r,m.g,m.b,m.a)))}}const a0=new Float32Array(16),xv=new Float32Array(9),Ch=new Float32Array(4);function Ad(c){return[fi(255*c.r,255*c.g),fi(255*c.b,255*c.a)]}class cp{constructor(a,h,m){this.value=a,this.uniformNames=h.map(x=>`u_${x}`),this.type=m}setUniform(a,h,m,x,T){h.set(a,T,x.constantOr(this.value))}getBinding(a,h){return"color"===this.type?new vg(a):new gg(a)}}class up{constructor(a,h){this.uniformNames=h.map(m=>`u_${m}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,h,m,x,T){const O="u_pattern"===T||"u_dash"===T?this.pattern:"u_pixel_ratio"===T?this.pixelRatio:null;O&&h.set(a,T,O)}getBinding(a,h){return"u_pattern"===h||"u_dash"===h?new Dm(a):new gg(a)}}class Hh{constructor(a,h,m,x){this.expression=a,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(T=>({name:`a_${T}`,type:"Float32",components:"color"===m?2:1,offset:0})),this.paintVertexArray=new x}populatePaintArray(a,h,m,x,T,O){const G=this.paintVertexArray.length,W=this.expression.evaluate(new ue(0),h,{},T,x,O);this.paintVertexArray.resize(a),this._setPaintValue(G,a,W)}updatePaintArray(a,h,m,x,T){const O=this.expression.evaluate({zoom:0},m,x,void 0,T);this._setPaintValue(a,h,O)}_setPaintValue(a,h,m){if("color"===this.type){const x=Ad(m);for(let T=a;T<h;T++)this.paintVertexArray.emplace(T,x[0],x[1])}else{for(let x=a;x<h;x++)this.paintVertexArray.emplace(x,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Gl{constructor(a,h,m,x,T,O){this.expression=a,this.uniformNames=h.map(G=>`u_${G}_t`),this.type=m,this.useIntegerZoom=x,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=h.map(G=>({name:`a_${G}`,type:"Float32",components:"color"===m?4:2,offset:0})),this.paintVertexArray=new O}populatePaintArray(a,h,m,x,T,O){const G=this.expression.evaluate(new ue(this.zoom),h,{},T,x,O),W=this.expression.evaluate(new ue(this.zoom+1),h,{},T,x,O),q=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(q,a,G,W)}updatePaintArray(a,h,m,x,T){const O=this.expression.evaluate({zoom:this.zoom},m,x,void 0,T),G=this.expression.evaluate({zoom:this.zoom+1},m,x,void 0,T);this._setPaintValue(a,h,O,G)}_setPaintValue(a,h,m,x){if("color"===this.type){const T=Ad(m),O=Ad(x);for(let G=a;G<h;G++)this.paintVertexArray.emplace(G,T[0],T[1],O[0],O[1])}else{for(let T=a;T<h;T++)this.paintVertexArray.emplace(T,m,x);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(x))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,h,m,x,T){const O=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,G=qi(this.expression.interpolationFactor(O,this.zoom,this.zoom+1),0,1);h.set(a,T,G)}getBinding(a,h){return new gg(a)}}class Dd{constructor(a,h,m,x,T){this.expression=a,this.layerId=T,this.paintVertexAttributes=("array"===m?Ou:Gh).members;for(let O=0;O<h.length;++O);this.paintVertexArray=new x}populatePaintArray(a,h,m){const x=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(x,a,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(a,h,m,x,T,O){this._setPaintValues(a,h,m.patterns&&m.patterns[this.layerId],O)}_setPaintValues(a,h,m,x){if(!x||!m)return;const T=x[m];if(!T)return;const{tl:O,br:G,pixelRatio:W}=T;for(let q=a;q<h;q++)this.paintVertexArray.emplace(q,O[0],O[1],G[0],G[1],W)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Id{constructor(a,h,m=(()=>!0)){this.binders={},this._buffers=[];const x=[];for(const T in a.paint._values){if(!m(T))continue;const O=a.paint.get(T);if(!(O instanceof vt&&fl(O.property.specification)))continue;const G=zf(T,a.type),W=O.value,q=O.property.specification.type,ce=!!O.property.useIntegerZoom,pe="line-dasharray"===T||T.endsWith("pattern"),ve="line-dasharray"===T&&"constant"!==a.layout.get("line-cap").value.kind;if("constant"!==W.kind||ve)if("source"===W.kind||ve||pe){const De=kh(T,q,"source");this.binders[T]=pe?new Dd(W,G,q,De,a.id):new Hh(W,G,q,De),x.push(`/a_${T}`)}else{const De=kh(T,q,"composite");this.binders[T]=new Gl(W,G,q,ce,h,De),x.push(`/z_${T}`)}else this.binders[T]=pe?new up(W.value,G):new cp(W.value,G,q),x.push(`/u_${T}`)}this.cacheKey=x.sort().join("")}getMaxValue(a){const h=this.binders[a];return h instanceof Hh||h instanceof Gl?h.maxValue:0}populatePaintArrays(a,h,m,x,T,O){for(const G in this.binders){const W=this.binders[G];(W instanceof Hh||W instanceof Gl||W instanceof Dd)&&W.populatePaintArray(a,h,m,x,T,O)}}setConstantPatternPositions(a){for(const h in this.binders){const m=this.binders[h];m instanceof up&&m.setConstantPatternPositions(a)}}updatePaintArrays(a,h,m,x,T,O){let G=!1;for(const W in a){const q=h.getPositions(W);for(const ce of q){const pe=m.feature(ce.index);for(const ve in this.binders){const De=this.binders[ve];if((De instanceof Hh||De instanceof Gl||De instanceof Dd)&&!0===De.expression.isStateDependent){const Oe=x.paint.get(ve);De.expression=Oe.value,De.updatePaintArray(ce.start,ce.end,pe,a[W],T,O),G=!0}}}}return G}defines(){const a=[];for(const h in this.binders){const m=this.binders[h];(m instanceof cp||m instanceof up)&&a.push(...m.uniformNames.map(x=>`#define HAS_UNIFORM_${x}`))}return a}getBinderAttributes(){const a=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof Hh||m instanceof Gl||m instanceof Dd)for(let x=0;x<m.paintVertexAttributes.length;x++)a.push(m.paintVertexAttributes[x].name)}return a}getBinderUniforms(){const a=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof cp||m instanceof up||m instanceof Gl)for(const x of m.uniformNames)a.push(x)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const h=[];for(const m in this.binders){const x=this.binders[m];if(x instanceof cp||x instanceof up||x instanceof Gl)for(const T of x.uniformNames)h.push({name:T,property:m,binding:x.getBinding(a,T)})}return h}setUniforms(a,h,m,x,T){for(const{name:O,property:G,binding:W}of m)this.binders[G].setUniform(a,W,T,x.get(G),O)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const h=this.binders[a];(h instanceof Hh||h instanceof Gl||h instanceof Dd)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(a){for(const h in this.binders){const m=this.binders[h];(m instanceof Hh||m instanceof Gl||m instanceof Dd)&&m.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const h=this.binders[a];(h instanceof Hh||h instanceof Gl||h instanceof Dd)&&h.destroy()}}}class Eh{constructor(a,h,m=(()=>!0)){this.programConfigurations={};for(const x of a)this.programConfigurations[x.id]=new Id(x,h,m);this.needsUpload=!1,this._featureMap=new gf,this._bufferOffset=0}populatePaintArrays(a,h,m,x,T,O,G){for(const W in this.programConfigurations)this.programConfigurations[W].populatePaintArrays(a,h,x,T,O,G);void 0!==h.id&&this._featureMap.add(h.id,m,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,h,m,x,T){for(const O of m)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(a,this._featureMap,h,O,x,T)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const o0={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function zf(c,a){return o0[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}const So={"line-pattern":{source:Wi,composite:Wi},"fill-pattern":{source:Wi,composite:Wi},"fill-extrusion-pattern":{source:Wi,composite:Wi},"line-dasharray":{source:on,composite:on}},od={color:{source:bh,composite:Dn},number:{source:eo,composite:bh}};function kh(c,a,h){const m=So[c];return m&&m[h]||od[a][h]}kr(cp,"ConstantBinder"),kr(up,"PatternConstantBinder"),kr(Hh,"SourceExpressionBinder"),kr(Dd,"PatternCompositeBinder"),kr(Gl,"CompositeExpressionBinder"),kr(Id,"ProgramConfiguration",{omit:["_buffers"]}),kr(Eh,"ProgramConfigurationSet");const l0="-transition";class Ru extends M{constructor(a,h){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==a.type&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,"background"!==a.type&&"sky"!==a.type&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),h.layout&&(this._unevaluatedLayout=new ft(h.layout)),h.paint)){this._transitionablePaint=new Fe(h.paint);for(const m in a.paint)this.setPaintProperty(m,a.paint[m],{validate:!1});for(const m in a.layout)this.setLayoutProperty(m,a.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wt(h.paint)}}getLayoutProperty(a){return"visibility"===a?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,h,m={}){null!=h&&this._validate(Sm,`layers.${this.id}.layout.${a}`,a,h,m)||("visibility"!==a?this._unevaluatedLayout.setValue(a,h):this.visibility=h)}getPaintProperty(a){return Fr(a,l0)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,h,m={}){if(null!=h&&this._validate(_v,`layers.${this.id}.paint.${a}`,a,h,m))return!1;if(Fr(a,l0))return this._transitionablePaint.setTransition(a.slice(0,-11),h||void 0),!1;{const x=this._transitionablePaint._values[a],T=x.value.isDataDriven(),O=x.value;this._transitionablePaint.setValue(a,h),this._handleSpecialPaintPropertyUpdate(a);const G=this._transitionablePaint._values[a].value,W=G.isDataDriven(),q=Fr(a,"pattern")||"line-dasharray"===a;return W||T||q||this._handleOverridablePaintPropertyUpdate(a,O,G)}}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getProgramConfiguration(a){return null}_handleOverridablePaintPropertyUpdate(a,h,m){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||"none"===this.visibility}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,h){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,h)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Os(a,(h,m)=>!(void 0===h||"layout"===m&&!Object.keys(h).length||"paint"===m&&!Object.keys(h).length))}_validate(a,h,m,x,T={}){return(!T||!1!==T.validate)&&fg(this,a.call(yh,{key:h,layerType:this.type,objectKey:m,value:x,styleSpec:B,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const h=this.paint.get(a);if(h instanceof vt&&fl(h.property.specification)&&("source"===h.value.kind||"composite"===h.value.kind)&&h.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ln(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Yf=Ei([{name:"a_pos",components:2,type:"Int16"}],4),Gf=Ei([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ao{constructor(a=[]){this.segments=a}prepareSegment(a,h,m,x){let T=this.segments[this.segments.length-1];return a>Ao.MAX_VERTEX_ARRAY_LENGTH&&Zn(`Max vertices per segment is ${Ao.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!T||T.vertexLength+a>Ao.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==x)&&(T={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},void 0!==x&&(T.sortKey=x),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const a of this.segments)for(const h in a.vaos)a.vaos[h].destroy()}static simpleSegment(a,h,m,x){return new Ao([{vertexOffset:a,primitiveOffset:h,vertexLength:m,primitiveLength:x,vaos:{},sortKey:0}])}}Ao.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,kr(Ao,"SegmentVector");var Yr=8192;class Vh{constructor(a,h){a&&(h?this.setSouthWest(a).setNorthEast(h):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}setNorthEast(a){return this._ne=a instanceof Ua?new Ua(a.lng,a.lat):Ua.convert(a),this}setSouthWest(a){return this._sw=a instanceof Ua?new Ua(a.lng,a.lat):Ua.convert(a),this}extend(a){const h=this._sw,m=this._ne;let x,T;if(a instanceof Ua)x=a,T=a;else{if(!(a instanceof Vh))return Array.isArray(a)?4===a.length||a.every(Array.isArray)?this.extend(Vh.convert(a)):this.extend(Ua.convert(a)):"object"==typeof a&&null!==a&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(Ua.convert(a)):this;if(x=a._sw,T=a._ne,!x||!T)return this}return h||m?(h.lng=Math.min(x.lng,h.lng),h.lat=Math.min(x.lat,h.lat),m.lng=Math.max(T.lng,m.lng),m.lat=Math.max(T.lat,m.lat)):(this._sw=new Ua(x.lng,x.lat),this._ne=new Ua(T.lng,T.lat)),this}getCenter(){return new Ua((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ua(this.getWest(),this.getNorth())}getSouthEast(){return new Ua(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:h,lat:m}=Ua.convert(a);let x=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&x}static convert(a){return!a||a instanceof Vh?a:new Vh(a)}}var Md=1e-6,tn=typeof Float32Array<"u"?Float32Array:Array;function hp(){var c=new tn(9);return tn!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function kc(c,a,h){var m=a[0],x=a[1],T=a[2],O=a[3],G=a[4],W=a[5],q=a[6],ce=a[7],pe=a[8],ve=h[0],De=h[1],Oe=h[2],Ve=h[3],at=h[4],It=h[5],ii=h[6],Ot=h[7],Kt=h[8];return c[0]=ve*m+De*O+Oe*q,c[1]=ve*x+De*G+Oe*ce,c[2]=ve*T+De*W+Oe*pe,c[3]=Ve*m+at*O+It*q,c[4]=Ve*x+at*G+It*ce,c[5]=Ve*T+at*W+It*pe,c[6]=ii*m+Ot*O+Kt*q,c[7]=ii*x+Ot*G+Kt*ce,c[8]=ii*T+Ot*W+Kt*pe,c}function Do(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ld(c,a){var h=a[0],m=a[1],x=a[2],T=a[3],O=a[4],G=a[5],W=a[6],q=a[7],ce=a[8],pe=a[9],ve=a[10],De=a[11],Oe=a[12],Ve=a[13],at=a[14],It=a[15],ii=h*G-m*O,Ot=h*W-x*O,Kt=h*q-T*O,ci=m*W-x*G,li=m*q-T*G,Ji=x*q-T*W,Ui=ce*Ve-pe*Oe,wn=ce*at-ve*Oe,Kn=ce*It-De*Oe,rn=pe*at-ve*Ve,In=pe*It-De*Ve,An=ve*It-De*at,Vn=ii*An-Ot*In+Kt*rn+ci*Kn-li*wn+Ji*Ui;return Vn?(c[0]=(G*An-W*In+q*rn)*(Vn=1/Vn),c[1]=(x*In-m*An-T*rn)*Vn,c[2]=(Ve*Ji-at*li+It*ci)*Vn,c[3]=(ve*li-pe*Ji-De*ci)*Vn,c[4]=(W*Kn-O*An-q*wn)*Vn,c[5]=(h*An-x*Kn+T*wn)*Vn,c[6]=(at*Kt-Oe*Ji-It*Ot)*Vn,c[7]=(ce*Ji-ve*Kt+De*Ot)*Vn,c[8]=(O*In-G*Kn+q*Ui)*Vn,c[9]=(m*Kn-h*In-T*Ui)*Vn,c[10]=(Oe*li-Ve*Kt+It*ii)*Vn,c[11]=(pe*Kt-ce*li-De*ii)*Vn,c[12]=(G*wn-O*rn-W*Ui)*Vn,c[13]=(h*rn-m*wn+x*Ui)*Vn,c[14]=(Ve*Ot-Oe*ci-at*ii)*Vn,c[15]=(ce*ci-pe*Ot+ve*ii)*Vn,c):null}function Hf(c,a,h){var m=a[0],x=a[1],T=a[2],O=a[3],G=a[4],W=a[5],q=a[6],ce=a[7],pe=a[8],ve=a[9],De=a[10],Oe=a[11],Ve=a[12],at=a[13],It=a[14],ii=a[15],Ot=h[0],Kt=h[1],ci=h[2],li=h[3];return c[0]=Ot*m+Kt*G+ci*pe+li*Ve,c[1]=Ot*x+Kt*W+ci*ve+li*at,c[2]=Ot*T+Kt*q+ci*De+li*It,c[3]=Ot*O+Kt*ce+ci*Oe+li*ii,c[4]=(Ot=h[4])*m+(Kt=h[5])*G+(ci=h[6])*pe+(li=h[7])*Ve,c[5]=Ot*x+Kt*W+ci*ve+li*at,c[6]=Ot*T+Kt*q+ci*De+li*It,c[7]=Ot*O+Kt*ce+ci*Oe+li*ii,c[8]=(Ot=h[8])*m+(Kt=h[9])*G+(ci=h[10])*pe+(li=h[11])*Ve,c[9]=Ot*x+Kt*W+ci*ve+li*at,c[10]=Ot*T+Kt*q+ci*De+li*It,c[11]=Ot*O+Kt*ce+ci*Oe+li*ii,c[12]=(Ot=h[12])*m+(Kt=h[13])*G+(ci=h[14])*pe+(li=h[15])*Ve,c[13]=Ot*x+Kt*W+ci*ve+li*at,c[14]=Ot*T+Kt*q+ci*De+li*It,c[15]=Ot*O+Kt*ce+ci*Oe+li*ii,c}function cd(c,a,h){var m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve=h[0],at=h[1],It=h[2];return a===c?(c[12]=a[0]*Ve+a[4]*at+a[8]*It+a[12],c[13]=a[1]*Ve+a[5]*at+a[9]*It+a[13],c[14]=a[2]*Ve+a[6]*at+a[10]*It+a[14],c[15]=a[3]*Ve+a[7]*at+a[11]*It+a[15]):(x=a[1],T=a[2],O=a[3],G=a[4],W=a[5],q=a[6],ce=a[7],pe=a[8],ve=a[9],De=a[10],Oe=a[11],c[0]=m=a[0],c[1]=x,c[2]=T,c[3]=O,c[4]=G,c[5]=W,c[6]=q,c[7]=ce,c[8]=pe,c[9]=ve,c[10]=De,c[11]=Oe,c[12]=m*Ve+G*at+pe*It+a[12],c[13]=x*Ve+W*at+ve*It+a[13],c[14]=T*Ve+q*at+De*It+a[14],c[15]=O*Ve+ce*at+Oe*It+a[15]),c}function $o(c,a,h){var m=h[0],x=h[1],T=h[2];return c[0]=a[0]*m,c[1]=a[1]*m,c[2]=a[2]*m,c[3]=a[3]*m,c[4]=a[4]*x,c[5]=a[5]*x,c[6]=a[6]*x,c[7]=a[7]*x,c[8]=a[8]*T,c[9]=a[9]*T,c[10]=a[10]*T,c[11]=a[11]*T,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c}function _g(c,a,h){var m=Math.sin(h),x=Math.cos(h),T=a[4],O=a[5],G=a[6],W=a[7],q=a[8],ce=a[9],pe=a[10],ve=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=T*x+q*m,c[5]=O*x+ce*m,c[6]=G*x+pe*m,c[7]=W*x+ve*m,c[8]=q*x-T*m,c[9]=ce*x-O*m,c[10]=pe*x-G*m,c[11]=ve*x-W*m,c}function Im(c,a,h){var m=Math.sin(h),x=Math.cos(h),T=a[0],O=a[1],G=a[2],W=a[3],q=a[8],ce=a[9],pe=a[10],ve=a[11];return a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=T*x-q*m,c[1]=O*x-ce*m,c[2]=G*x-pe*m,c[3]=W*x-ve*m,c[8]=T*m+q*x,c[9]=O*m+ce*x,c[10]=G*m+pe*x,c[11]=W*m+ve*x,c}function yg(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function jp(c,a,h){var m,x,T,O=h[0],G=h[1],W=h[2],q=Math.hypot(O,G,W);return q<Md?null:(O*=q=1/q,G*=q,W*=q,m=Math.sin(a),x=Math.cos(a),c[0]=O*O*(T=1-x)+x,c[1]=G*O*T+W*m,c[2]=W*O*T-G*m,c[3]=0,c[4]=O*G*T-W*m,c[5]=G*G*T+x,c[6]=W*G*T+O*m,c[7]=0,c[8]=O*W*T+G*m,c[9]=G*W*T-O*m,c[10]=W*W*T+x,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var Wp=Hf;function Vf(){var c=new tn(3);return tn!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function xg(c){var a=new tn(3);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a}function dp(c){return Math.hypot(c[0],c[1],c[2])}function Od(c,a,h){var m=new tn(3);return m[0]=c,m[1]=a,m[2]=h,m}function Uh(c,a,h){return c[0]=a[0]+h[0],c[1]=a[1]+h[1],c[2]=a[2]+h[2],c}function $p(c,a,h){return c[0]=a[0]-h[0],c[1]=a[1]-h[1],c[2]=a[2]-h[2],c}function Mm(c,a,h){return c[0]=a[0]*h[0],c[1]=a[1]*h[1],c[2]=a[2]*h[2],c}function ic(c,a,h){return c[0]=Math.min(a[0],h[0]),c[1]=Math.min(a[1],h[1]),c[2]=Math.min(a[2],h[2]),c}function Lu(c,a,h){return c[0]=Math.max(a[0],h[0]),c[1]=Math.max(a[1],h[1]),c[2]=Math.max(a[2],h[2]),c}function hu(c,a,h){return c[0]=a[0]*h,c[1]=a[1]*h,c[2]=a[2]*h,c}function Rd(c,a,h,m){return c[0]=a[0]+h[0]*m,c[1]=a[1]+h[1]*m,c[2]=a[2]+h[2]*m,c}function El(c,a){var h=a[0],m=a[1],x=a[2],T=h*h+m*m+x*x;return T>0&&(T=1/Math.sqrt(T)),c[0]=a[0]*T,c[1]=a[1]*T,c[2]=a[2]*T,c}function Pu(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function Th(c,a,h){var m=a[0],x=a[1],T=a[2],O=h[0],G=h[1],W=h[2];return c[0]=x*W-T*G,c[1]=T*O-m*W,c[2]=m*G-x*O,c}function Xo(c,a,h){var m=a[0],x=a[1],T=a[2],O=h[3]*m+h[7]*x+h[11]*T+h[15];return c[0]=(h[0]*m+h[4]*x+h[8]*T+h[12])/(O=O||1),c[1]=(h[1]*m+h[5]*x+h[9]*T+h[13])/O,c[2]=(h[2]*m+h[6]*x+h[10]*T+h[14])/O,c}function Xp(c,a,h){var m=h[0],x=h[1],T=h[2],O=a[0],G=a[1],W=a[2],q=x*W-T*G,ce=T*O-m*W,pe=m*G-x*O,ve=x*pe-T*ce,De=T*q-m*pe,Oe=m*ce-x*q,Ve=2*h[3];return ce*=Ve,pe*=Ve,De*=2,Oe*=2,c[0]=O+(q*=Ve)+(ve*=2),c[1]=G+ce+De,c[2]=W+pe+Oe,c}var da,jh=$p,bv=Mm,vf=dp;function Om(c,a,h){return c[0]=a[0]*h,c[1]=a[1]*h,c[2]=a[2]*h,c[3]=a[3]*h,c}function bg(c,a){var h=a[0],m=a[1],x=a[2],T=a[3],O=h*h+m*m+x*x+T*T;return O>0&&(O=1/Math.sqrt(O)),c[0]=h*O,c[1]=m*O,c[2]=x*O,c[3]=T*O,c}function Uf(c,a,h){var m=a[0],x=a[1],T=a[2],O=a[3];return c[0]=h[0]*m+h[4]*x+h[8]*T+h[12]*O,c[1]=h[1]*m+h[5]*x+h[9]*T+h[13]*O,c[2]=h[2]*m+h[6]*x+h[10]*T+h[14]*O,c[3]=h[3]*m+h[7]*x+h[11]*T+h[15]*O,c}function Ld(){var c=new tn(4);return tn!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Rm(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function Tc(c,a,h){h*=.5;var m=a[0],x=a[1],T=a[2],O=a[3],G=Math.sin(h),W=Math.cos(h);return c[0]=m*W+O*G,c[1]=x*W+T*G,c[2]=T*W-x*G,c[3]=O*W-m*G,c}function wg(c,a,h){h*=.5;var m=a[0],x=a[1],T=a[2],O=a[3],G=Math.sin(h),W=Math.cos(h);return c[0]=m*W-T*G,c[1]=x*W+O*G,c[2]=T*W+m*G,c[3]=O*W-x*G,c}Vf(),da=new tn(4),tn!=Float32Array&&(da[0]=0,da[1]=0,da[2]=0,da[3]=0);var Cg=bg;Vf(),Od(1,0,0),Od(0,1,0),Ld(),Ld(),hp();const Pd=Ei([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:As}=Pd,Lm=Ei([{name:"a_pos_3",components:3,type:"Int16"}]);var jf=Ei([{name:"a_pos",type:"Int16",components:2}]);class _f{constructor(a,h){this.pos=a,this.dir=h}intersectsPlane(a,h,m){const x=Pu(h,this.dir);if(Math.abs(x)<1e-6)return!1;const T=((a[0]-this.pos[0])*h[0]+(a[1]-this.pos[1])*h[1]+(a[2]-this.pos[2])*h[2])/x;return m[0]=this.pos[0]+this.dir[0]*T,m[1]=this.pos[1]+this.dir[1]*T,m[2]=this.pos[2]+this.dir[2]*T,!0}closestPointOnSphere(a,h,m){if(Ve=(De=this.pos)[0],at=De[1],It=De[2],ii=(Oe=a)[0],Ot=Oe[1],Kt=Oe[2],Math.abs(Ve-ii)<=Md*Math.max(1,Math.abs(Ve),Math.abs(ii))&&Math.abs(at-Ot)<=Md*Math.max(1,Math.abs(at),Math.abs(Ot))&&Math.abs(It-Kt)<=Md*Math.max(1,Math.abs(It),Math.abs(Kt))||0===h)return m[0]=m[1]=m[2]=0,!1;var De,Oe,Ve,at,It,ii,Ot,Kt;const[x,T,O]=this.dir,G=this.pos[0]-a[0],W=this.pos[1]-a[1],q=this.pos[2]-a[2],ce=x*x+T*T+O*O,pe=2*(G*x+W*T+q*O),ve=pe*pe-4*ce*(G*G+W*W+q*q-h*h);if(ve<0){const De=Math.max(-pe/2,0),Oe=G+x*De,Ve=W+T*De,at=q+O*De,It=Math.hypot(Oe,Ve,at);return m[0]=Oe*h/It,m[1]=Ve*h/It,m[2]=at*h/It,!1}{const De=(-pe-Math.sqrt(ve))/(2*ce);if(De<0){const Oe=Math.hypot(G,W,q);return m[0]=G*h/Oe,m[1]=W*h/Oe,m[2]=q*h/Oe,!1}return m[0]=G+x*De,m[1]=W+T*De,m[2]=q+O*De,!0}}}class Fd{constructor(a,h,m,x,T){this.TL=a,this.TR=h,this.BR=m,this.BL=x,this.horizon=T}static fromInvProjectionMatrix(a,h,m){const x=[-1,1,1],T=[1,1,1],O=[1,-1,1],G=[-1,-1,1],W=Xo(x,x,a),q=Xo(T,T,a),ce=Xo(O,O,a),pe=Xo(G,G,a);return new Fd(W,q,ce,pe,h/m)}}class Zp{constructor(a,h){this.points=a,this.planes=h}static fromInvProjectionMatrix(a,h,m,x){const T=Math.pow(2,m),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(W=>{const q=Uf([],W,a),ce=1/q[3]/h*T;return(pe=q)[0]=(ve=q)[0]*(De=[ce,ce,x?1/q[3]:ce,ce])[0],pe[1]=ve[1]*De[1],pe[2]=ve[2]*De[2],pe[3]=ve[3]*De[3],pe;var pe,ve,De}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(W=>{const q=El([],Th([],jh([],O[W[0]],O[W[1]]),jh([],O[W[2]],O[W[1]]))),ce=-Pu(q,O[W[1]]);return q.concat(ce)});return new Zp(O,G)}}class nc{static fromPoints(a){const h=[1/0,1/0,1/0],m=[-1/0,-1/0,-1/0];for(const x of a)ic(h,h,x),Lu(m,m,x);return new nc(h,m)}static applyTransform(a,h){const m=a.getCorners();for(let x=0;x<m.length;++x)Xo(m[x],m[x],h);return nc.fromPoints(m)}constructor(a,h){this.min=a,this.max=h,this.center=hu([],Uh([],this.min,this.max),.5)}quadrant(a){const h=[a%2==0,a<2],m=xg(this.min),x=xg(this.max);for(let T=0;T<h.length;T++)m[T]=h[T]?this.min[T]:this.center[T],x[T]=h[T]?this.center[T]:this.max[T];return x[2]=this.max[2],new nc(m,x)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,h=this.max;return[[a[0],a[1],a[2]],[h[0],a[1],a[2]],[h[0],h[1],a[2]],[a[0],h[1],a[2]],[a[0],a[1],h[2]],[h[0],a[1],h[2]],[h[0],h[1],h[2]],[a[0],h[1],h[2]]]}intersects(a){const h=this.getCorners();let m=!0;for(let x=0;x<a.planes.length;x++){const T=a.planes[x];let O=0;for(let G=0;G<h.length;G++)O+=Pu(T,h[G])+T[3]>=0;if(0===O)return 0;O!==h.length&&(m=!1)}if(m)return 2;for(let x=0;x<3;x++){let T=Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let G=0;G<a.points.length;G++){const W=a.points[G][x]-this.min[x];T=Math.min(T,W),O=Math.max(O,W)}if(O<0||T>this.max[x]-this.min[x])return 0}return 1}}const kl=5,Bd=6,Nd=Yr/Math.PI/2,c0=16383,qp=[64,32,16],$c=-Nd,Wh=Nd,__=[new nc([$c,$c,$c],[Wh,Wh,Wh]),new nc([$c,$c,$c],[0,0,Wh]),new nc([0,$c,$c],[Wh,0,Wh]),new nc([$c,0,$c],[0,Wh,Wh]),new nc([0,0,$c],[Wh,Wh,Wh])];function du(c){return c*Nd/Zc}function Xc(c,a,h,m=!0){const x=hu([],c._camera.position,c.worldSize),T=[a,h,1,1];Uf(T,T,c.pixelMatrixInverse),Om(T,T,1/T[3]);const O=El([],jh([],T,x)),G=c.globeMatrix,W=[G[12],G[13],G[14]],q=jh([],W,x),ce=dp(q),pe=El([],q),ve=c.worldSize/(2*Math.PI),De=Pu(pe,O),Oe=Math.asin(ve/ce);if(Oe<Math.acos(De)){if(!m)return null;const Kn=[],rn=[];hu(Kn,O,ce/De),El(rn,jh(rn,Kn,q)),El(O,Uh(O,q,hu(O,rn,Math.tan(Oe)*ce)))}const Ve=[];new _f(x,O).closestPointOnSphere(W,ve,Ve);const at=El([],ur(G,0)),It=El([],ur(G,1)),ii=El([],ur(G,2)),Ot=Pu(at,Ve),Kt=Pu(It,Ve),ci=Pu(ii,Ve),li=Dt(Math.asin(-Kt/ve));let Ji=Dt(Math.atan2(Ot,ci));Ji=c.center.lng+function(Kn,rn){const In=(rn-Kn+180)%360-180;return In<-180?In+360:In}(c.center.lng,Ji);const Ui=zd(Ji),wn=qi(hd(li),0,1);return new _p(Ui,wn)}class Pm{constructor(a,h,m){this.a=jh([],a,m),this.b=jh([],h,m),this.center=m;const x=El([],this.a),T=El([],this.b);this.angle=Math.acos(Pu(x,T))}}function u0(c,a){if(0===c.angle)return null;let h;return h=0===c.a[a]?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[a]/c.a[a]/Math.sin(c.angle)-1/Math.tan(c.angle)),h<0||h>1?null:function(m,x,T,O){const G=Math.sin(T);return m*(Math.sin((1-O)*T)/G)+x*(Math.sin(O*T)/G)}(c.a[a],c.b[a],c.angle,qi(h,0,1))+c.center[a]}function Sc(c){if(c.z<=1)return __[c.z+2*c.y+c.x];const a=Eg(Kp(c));return nc.fromPoints(a)}function fp(c,a,h){return hu(c,c,1-h),Rd(c,c,a,h)}function Fm(c,a){const h=pl(a.zoom);if(0===h)return Sc(c);const m=Kp(c),x=Eg(m),T=zd(m.getWest())*a.worldSize,O=zd(m.getEast())*a.worldSize,G=hd(m.getNorth())*a.worldSize,W=hd(m.getSouth())*a.worldSize,q=[T,G,0],ce=[O,G,0],pe=[T,W,0],ve=[O,W,0],De=ld([],a.globeMatrix);return Xo(q,q,De),Xo(ce,ce,De),Xo(pe,pe,De),Xo(ve,ve,De),x[0]=fp(x[0],pe,h),x[1]=fp(x[1],ve,h),x[2]=fp(x[2],ce,h),x[3]=fp(x[3],q,h),nc.fromPoints(x)}function pp(c,a,h){for(const m of c)Xo(m,m,a),hu(m,m,h)}function Kp({x:c,y:a,z:h}){const m=1/(1<<h),x=new Ua(Sh(c*m),Ac((a+1)*m)),T=new Ua(Sh((c+1)*m),Ac(a*m));return new Vh(x,T)}function Eg(c){const a=hi(c.getNorth()),h=hi(c.getSouth()),m=Math.cos(a),x=Math.cos(h),T=Math.sin(a),O=Math.sin(h),G=c.getWest(),W=c.getEast();return[Wf(x,O,G),Wf(x,O,W),Wf(m,T,W),Wf(m,T,G)]}function Wf(c,a,h,m=Nd){return h=hi(h),[c*Math.sin(h)*m,-a*m,c*Math.cos(h)*m]}function $f(c,a,h){return Wf(Math.cos(hi(c)),Math.sin(hi(c)),a,h)}function Bm(c,a,h,m){const x=1<<h.z,T=(c/Yr+h.x)/x;return $f(Ac((a/Yr+h.y)/x),Sh(T),m)}function Nm({min:c,max:a}){return c0/Math.max(a[0]-c[0],a[1]-c[1],a[2]-c[2])}const mp=new Float64Array(16);function gp(c){const a=Nm(c),h=yg(mp,[a,a,a]);return cd(h,h,((m=[])[0]=-(x=c.min)[0],m[1]=-x[1],m[2]=-x[2],m));var m,x}function Jp(c){const a=(m=c.min,(h=mp)[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=m[0],h[13]=m[1],h[14]=m[2],h[15]=1,h);var h,m;const x=1/Nm(c);return $o(a,a,[x,x,x])}function h0(c,a,h,m,x){const T=function(W){const q=Yr/(2*Math.PI);return W/(2*Math.PI)/q}(h),O=[c,a,-h/(2*Math.PI)],G=Do(new Float64Array(16));return cd(G,G,O),$o(G,G,[T,T,T]),_g(G,G,hi(-x)),Im(G,G,hi(-m)),G}function pl(c){return nn(kl,Bd,c)}function Qp(c,a){const h=$f(a.lat,a.lng);return O=(x=$p([],function(Oe){const Ve=$f(Oe._center.lat,Oe._center.lng);let at=Th([],Od(0,1,0),Ve);const It=jp([],-Oe.angle,Ve);at=Xo(at,at,It),jp(It,-Oe._pitch,at);const ii=El([],Ve);return hu(ii,ii,du(Oe.cameraToCenterDistance/Oe.pixelsPerMeter)),Xo(ii,ii,It),Uh([],Ve,ii)}(c),h))[0],G=x[1],W=x[2],q=(T=h)[0],ce=T[1],pe=T[2],De=(ve=Math.sqrt(O*O+G*G+W*W)*Math.sqrt(q*q+ce*ce+pe*pe))&&Pu(x,T)/ve,Math.acos(Math.min(Math.max(De,-1),1));var x,T,O,G,W,q,ce,pe,ve,De}function vp(c,a){return Qp(c,a)>Math.PI/2*1.01}const d0=hi(85),kg=Math.cos(d0),f0=Math.sin(d0),Zc=6371008.8,Xf=2*Math.PI*Zc;class ud{constructor(a,h){if(isNaN(a)||isNaN(h))throw new Error(`Invalid LngLat object: (${a}, ${h})`);if(this.lng=+a,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ud(_n(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const h=Math.PI/180,m=this.lat*h,x=a.lat*h,T=Math.sin(m)*Math.sin(x)+Math.cos(m)*Math.cos(x)*Math.cos((a.lng-this.lng)*h);return Zc*Math.acos(Math.min(T,1))}toBounds(a=0){const h=360*a/40075017,m=h/Math.cos(Math.PI/180*this.lat);return new Vh(new ud(this.lng-m,this.lat-h),new ud(this.lng+m,this.lat+h))}toEcef(a){const h=du(a);return $f(this.lat,this.lng,Nd+h)}static convert(a){if(a instanceof ud)return a;if(Array.isArray(a)&&(2===a.length||3===a.length))return new ud(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&"object"==typeof a&&null!==a)return new ud(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Ua=ud;function p0(c){return Xf*Math.cos(c*Math.PI/180)}function zd(c){return(180+c)/360}function hd(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function $h(c,a){return c/p0(a)}function Sh(c){return 360*c-180}function Ac(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Cv(c,a){return c*p0(Ac(a))}const Dc=85.051129;function m0(c){return 1/Math.cos(c*Math.PI/180)}class _p{constructor(a,h,m=0){this.x=+a,this.y=+h,this.z=+m}static fromLngLat(a,h=0){const m=Ua.convert(a);return new _p(zd(m.lng),hd(m.lat),$h(h,m.lat))}toLngLat(){return new Ua(Sh(this.x),Ac(this.y))}toAltitude(){return Cv(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Xf*m0(Ac(this.y))}}function g0(c,a,h,m,x,T,O,G,W){const q=(a+m)/2,ce=(h+x)/2,pe=new kt(q,ce);G(pe),function(ve,De,Oe,Ve,at,It){const ii=Oe-at,Ot=Ve-It;return Math.abs((Ve-De)*ii-(Oe-ve)*Ot)/Math.hypot(ii,Ot)}(pe.x,pe.y,T.x,T.y,O.x,O.y)>=W?(g0(c,a,h,q,ce,T,pe,G,W),g0(c,q,ce,m,x,pe,O,G,W)):c.push(O)}function Tg(c,a,h){let m=c[0],x=m.x,T=m.y;a(m);const O=[m];for(let G=1;G<c.length;G++){const W=c[G],{x:q,y:ce}=W;a(W),g0(O,x,T,q,ce,m,W,a,h),x=q,T=ce,m=W}return O}function zm(c,a,h,m){if(m(a,h)){const x=a.add(h)._mult(.5);zm(c,a,x,m),zm(c,x,h,m)}else c.push(h)}function Ev(c,a){let h=c[0];const m=[h];for(let x=1;x<c.length;x++){const T=c[x];zm(m,h,T,a),h=T}return m}const v0=Math.pow(2,14)-1,Ym=-v0-1;function y_(c,a){const h=Math.round(c.x*a),m=Math.round(c.y*a);return c.x=qi(h,Ym,v0),c.y=qi(m,Ym,v0),(h<c.x||h>c.x+1||m<c.y||m>c.y+1)&&Zn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function xf(c,a,h){const m=c.loadGeometry(),x=c.extent,T=Yr/x;if(a&&h&&h.projection.isReprojectedInTileSpace){const O=1<<a.z,{scale:G,x:W,y:q,projection:ce}=h,pe=ve=>{const De=Sh((a.x+ve.x/x)/O),Oe=Ac((a.y+ve.y/x)/O),Ve=ce.project(De,Oe);ve.x=(Ve.x*G-W)*x,ve.y=(Ve.y*G-q)*x};for(let ve=0;ve<m.length;ve++)if(1!==c.type)m[ve]=Tg(m[ve],pe,1);else{const De=[];for(const Oe of m[ve])Oe.x<0||Oe.x>=x||Oe.y<0||Oe.y>=x||(pe(Oe),De.push(Oe));m[ve]=De}}for(const O of m)for(const G of O)y_(G,T);return m}function Fu(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?xf(c):[]}}function Gm(c,a,h,m,x){c.emplaceBack(2*a+(m+1)/2,2*h+(x+1)/2)}function Hm(c,a,h){c.emplaceBack(a.x,a.y,a.z,16384*h[0],16384*h[1],16384*h[2])}class Vm{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new Gn,this.indexArray=new zr,this.segments=new Ao,this.programConfigurations=new Eh(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,m,x){const T=this.layers[0],O=[];let G=null;"circle"===T.type&&(G=T.layout.get("circle-sort-key"));for(const{feature:q,id:ce,index:pe,sourceLayerIndex:ve}of a){const De=this.layers[0]._featureFilter.needGeometry,Oe=Fu(q,De);if(!this.layers[0]._featureFilter.filter(new ue(this.zoom),Oe,m))continue;const Ve=G?G.evaluate(Oe,{},m):void 0,at={id:ce,properties:q.properties,type:q.type,sourceLayerIndex:ve,index:pe,geometry:De?Oe.geometry:xf(q,m,x),patterns:{},sortKey:Ve};O.push(at)}G&&O.sort((q,ce)=>q.sortKey-ce.sortKey);let W=null;"globe"===x.projection.name&&(this.globeExtVertexArray=new Wn,W=x.projection);for(const q of O){const{geometry:ce,index:pe,sourceLayerIndex:ve}=q,De=a[pe].feature;this.addFeature(q,ce,pe,h.availableImages,m,W),h.featureIndex.insert(De,ce,pe,ve,this.index)}}update(a,h,m,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,m,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Yf.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,Gf.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,h,m,x,T,O){for(const G of h)for(const W of G){const q=W.x,ce=W.y;if(q<0||q>=Yr||ce<0||ce>=Yr)continue;if(O){const De=O.projectTilePoint(q,ce,T),Oe=O.upVector(T,q,ce),Ve=this.globeExtVertexArray;Hm(Ve,De,Oe),Hm(Ve,De,Oe),Hm(Ve,De,Oe),Hm(Ve,De,Oe)}const pe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),ve=pe.vertexLength;Gm(this.layoutVertexArray,q,ce,-1,-1),Gm(this.layoutVertexArray,q,ce,1,-1),Gm(this.layoutVertexArray,q,ce,1,1),Gm(this.layoutVertexArray,q,ce,-1,1),this.indexArray.emplaceBack(ve,ve+1,ve+2),this.indexArray.emplaceBack(ve,ve+2,ve+3),pe.vertexLength+=4,pe.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,{},x,T)}}function Tl(c,a){for(let h=0;h<c.length;h++)if(Ah(a,c[h]))return!0;for(let h=0;h<a.length;h++)if(Ah(c,a[h]))return!0;return!!y0(c,a)}function em(c,a,h){return!!Ah(c,a)||!!bf(a,c,h)}function Ic(c,a){if(1===c.length)return x0(a,c[0]);for(let h=0;h<a.length;h++){const m=a[h];for(let x=0;x<m.length;x++)if(Ah(c,m[x]))return!0}for(let h=0;h<c.length;h++)if(x0(a,c[h]))return!0;for(let h=0;h<a.length;h++)if(y0(c,a[h]))return!0;return!1}function _0(c,a,h){if(c.length>1){if(y0(c,a))return!0;for(let m=0;m<a.length;m++)if(bf(a[m],c,h))return!0}for(let m=0;m<c.length;m++)if(bf(c[m],a,h))return!0;return!1}function y0(c,a){if(0===c.length||0===a.length)return!1;for(let h=0;h<c.length-1;h++){const m=c[h],x=c[h+1];for(let T=0;T<a.length-1;T++)if(ky(m,x,a[T],a[T+1]))return!0}return!1}function ky(c,a,h,m){return Un(c,h,m)!==Un(a,h,m)&&Un(c,a,h)!==Un(c,a,m)}function bf(c,a,h){const m=h*h;if(1===a.length)return c.distSqr(a[0])<m;for(let x=1;x<a.length;x++)if(Lo(c,a[x-1],a[x])<m)return!0;return!1}function Lo(c,a,h){const m=a.distSqr(h);if(0===m)return c.distSqr(a);const x=((c.x-a.x)*(h.x-a.x)+(c.y-a.y)*(h.y-a.y))/m;return c.distSqr(x<0?a:x>1?h:h.sub(a)._mult(x)._add(a))}function x0(c,a){let h,m,x,T=!1;for(let O=0;O<c.length;O++){h=c[O];for(let G=0,W=h.length-1;G<h.length;W=G++)m=h[G],x=h[W],m.y>a.y!=x.y>a.y&&a.x<(x.x-m.x)*(a.y-m.y)/(x.y-m.y)+m.x&&(T=!T)}return T}function Ah(c,a){let h=!1;for(let m=0,x=c.length-1;m<c.length;x=m++){const T=c[m],O=c[x];T.y>a.y!=O.y>a.y&&a.x<(O.x-T.x)*(a.y-T.y)/(O.y-T.y)+T.x&&(h=!h)}return h}function tm(c,a,h,m,x){for(const O of c)if(a<=O.x&&h<=O.y&&m>=O.x&&x>=O.y)return!0;const T=[new kt(a,h),new kt(a,x),new kt(m,x),new kt(m,h)];if(c.length>2)for(const O of T)if(Ah(c,O))return!0;for(let O=0;O<c.length-1;O++)if(yp(c[O],c[O+1],T))return!0;return!1}function yp(c,a,h){const m=h[0],x=h[2];if(c.x<m.x&&a.x<m.x||c.x>x.x&&a.x>x.x||c.y<m.y&&a.y<m.y||c.y>x.y&&a.y>x.y)return!1;const T=Un(c,a,h[0]);return T!==Un(c,a,h[1])||T!==Un(c,a,h[2])||T!==Un(c,a,h[3])}function wf(c,a,h){const m=a.paint.get(c).value;return"constant"===m.kind?m.value:h.programConfigurations.get(a.id).getMaxValue(c)}function dd(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function im(c,a,h,m,x){if(!a[0]&&!a[1])return c;const T=kt.convert(a)._mult(x);"viewport"===h&&T._rotate(-m);const O=[];for(let G=0;G<c.length;G++)O.push(c[G].sub(T));return O}function b0(c,a,h,m){const x=kt.convert(c)._mult(m);return"viewport"===a&&x._rotate(-h),x}kr(Vm,"CircleBucket",{omit:["layers"]});const Sg=new xt({"circle-sort-key":new ht(B.layout_circle["circle-sort-key"])});var kv={paint:new xt({"circle-radius":new ht(B.paint_circle["circle-radius"]),"circle-color":new ht(B.paint_circle["circle-color"]),"circle-blur":new ht(B.paint_circle["circle-blur"]),"circle-opacity":new ht(B.paint_circle["circle-opacity"]),"circle-translate":new Ye(B.paint_circle["circle-translate"]),"circle-translate-anchor":new Ye(B.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ye(B.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ye(B.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ht(B.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ht(B.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ht(B.paint_circle["circle-stroke-opacity"])}),layout:Sg};function w0(c,a,h,m,x,T,O,G,W){if(T&&c.queryGeometry.isAboveHorizon)return!1;T&&(W*=c.pixelToTileUnitsFactor);const q=c.tileID.canonical,ce=h.projection.upVectorScale(q,h.center.lat,h.worldSize).metersToTile;for(const pe of a)for(const ve of pe){const De=ve.add(G),Oe=x&&h.elevation?h.elevation.exaggeration()*x.getElevationAt(De.x,De.y,!0):0,Ve=h.projection.projectTilePoint(De.x,De.y,q);if(Oe>0){const Ot=h.projection.upVector(q,De.x,De.y);Ve.x+=Ot[0]*ce*Oe,Ve.y+=Ot[1]*ce*Oe,Ve.z+=Ot[2]*ce*Oe}const at=T?De:Tv(Ve.x,Ve.y,Ve.z,m),It=T?c.tilespaceRays.map(Ot=>fd(Ot,Oe)):c.queryGeometry.screenGeometry,ii=Uf([],[Ve.x,Ve.y,Ve.z,1],m);if(!O&&T?W*=ii[3]/h.cameraToCenterDistance:O&&!T&&(W*=h.cameraToCenterDistance/ii[3]),T){const Ot=Ac((ve.y/Yr+q.y)/(1<<q.z));W/=h.projection.pixelsPerMeter(Ot,1)/$h(1,Ot)}if(em(It,at,W))return!0}return!1}function Tv(c,a,h,m){const x=Uf([],[c,a,h,1],m);return new kt(x[0]/x[3],x[1]/x[3])}const C0=Od(0,0,0),xp=Od(0,0,1);function fd(c,a){const h=Vf();return C0[2]=a,c.intersectsPlane(C0,xp,h),new kt(h[0],h[1])}class Sv extends Vm{}function E0(c,{width:a,height:h},m,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==a*h*m)throw new RangeError("mismatched image size")}else x=new Uint8Array(a*h*m);return c.width=a,c.height=h,c.data=x,c}function Ag(c,a,h){const{width:m,height:x}=a;m===c.width&&x===c.height||(k0(c,a,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,m),height:Math.min(c.height,x)},h),c.width=m,c.height=x,c.data=a.data)}function k0(c,a,h,m,x,T){if(0===x.width||0===x.height)return a;if(x.width>c.width||x.height>c.height||h.x>c.width-x.width||h.y>c.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>a.width||x.height>a.height||m.x>a.width-x.width||m.y>a.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const O=c.data,G=a.data;for(let W=0;W<x.height;W++){const q=((h.y+W)*c.width+h.x)*T,ce=((m.y+W)*a.width+m.x)*T;for(let pe=0;pe<x.width*T;pe++)G[ce+pe]=O[q+pe]}return a}kr(Sv,"HeatmapBucket",{omit:["layers"]});class Cf{constructor(a,h){E0(this,a,1,h)}resize(a){Ag(this,new Cf(a),1)}clone(){return new Cf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,m,x,T){k0(a,h,m,x,T,1)}}class Bu{constructor(a,h){E0(this,a,4,h)}resize(a){Ag(this,new Bu(a),4)}replace(a,h){h?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Bu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,m,x,T){k0(a,h,m,x,T,4)}}kr(Cf,"AlphaImage"),kr(Bu,"RGBAImage");var x_={paint:new xt({"heatmap-radius":new ht(B.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ht(B.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ye(B.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zt(B.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ye(B.paint_heatmap["heatmap-opacity"])})};function T0(c){const a={},h=c.resolution||256,m=c.clips?c.clips.length:1,x=c.image||new Bu({width:h,height:m}),T=(O,G,W)=>{a[c.evaluationKey]=W;const q=c.expression.evaluate(a);x.data[O+G+0]=Math.floor(255*q.r/q.a),x.data[O+G+1]=Math.floor(255*q.g/q.a),x.data[O+G+2]=Math.floor(255*q.b/q.a),x.data[O+G+3]=Math.floor(255*q.a)};if(c.clips)for(let O=0,G=0;O<m;++O,G+=4*h)for(let W=0,q=0;W<h;W++,q+=4){const ce=W/(h-1),{start:pe,end:ve}=c.clips[O];T(G,q,pe*(1-ce)+ve*ce)}else for(let O=0,G=0;O<h;O++,G+=4)T(0,G,O/(h-1));return x}var b_={paint:new xt({"hillshade-illumination-direction":new Ye(B.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ye(B.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ye(B.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ye(B.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ye(B.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ye(B.paint_hillshade["hillshade-accent-color"])})};const Um=Ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:S0}=Um;var jm={exports:{}};function nm(c,a,h){h=h||2;var m,x,T,O,G,W,q,ce=a&&a.length,pe=ce?a[0]*h:c.length,ve=rm(c,0,pe,h,!0),De=[];if(!ve||ve.next===ve.prev)return De;if(ce&&(ve=function(Ve,at,It,ii){var Ot,Kt,ci,li=[];for(Ot=0,Kt=at.length;Ot<Kt;Ot++)(ci=rm(Ve,at[Ot]*ii,Ot<Kt-1?at[Ot+1]*ii:Ve.length,ii,!1))===ci.next&&(ci.steiner=!0),li.push(E_(ci));for(li.sort(D0),Ot=0;Ot<li.length;Ot++)It=Cp(li[Ot],It);return It}(c,a,ve,h)),c.length>80*h){m=T=c[0],x=O=c[1];for(var Oe=h;Oe<pe;Oe+=h)(G=c[Oe])<m&&(m=G),(W=c[Oe+1])<x&&(x=W),G>T&&(T=G),W>O&&(O=W);q=0!==(q=Math.max(T-m,O-x))?32767/q:0}return bp(ve,De,h,m,x,q,0),De}function rm(c,a,h,m,x){var T,O;if(x===Xm(c,a,h,m)>0)for(T=a;T<h;T+=m)O=$m(T,c[T],c[T+1],O);else for(T=h-m;T>=a;T-=m)O=$m(T,c[T],c[T+1],O);return O&&sm(O,O.next)&&(am(O),O=O.next),O}function Zf(c,a){if(!c)return c;a||(a=c);var h,m=c;do{if(h=!1,m.steiner||!sm(m,m.next)&&0!==Io(m.prev,m,m.next))m=m.next;else{if(am(m),(m=a=m.prev)===m.next)break;h=!0}}while(h||m!==a);return a}function bp(c,a,h,m,x,T,O){if(c){!O&&T&&function(ce,pe,ve,De){var Oe=ce;do{0===Oe.z&&(Oe.z=M0(Oe.x,Oe.y,pe,ve,De)),Oe.prevZ=Oe.prev,Oe.nextZ=Oe.next,Oe=Oe.next}while(Oe!==ce);Oe.prevZ.nextZ=null,Oe.prevZ=null,function(Ve){var at,It,ii,Ot,Kt,ci,li,Ji,Ui=1;do{for(It=Ve,Ve=null,Kt=null,ci=0;It;){for(ci++,ii=It,li=0,at=0;at<Ui&&(li++,ii=ii.nextZ);at++);for(Ji=Ui;li>0||Ji>0&&ii;)0!==li&&(0===Ji||!ii||It.z<=ii.z)?(Ot=It,It=It.nextZ,li--):(Ot=ii,ii=ii.nextZ,Ji--),Kt?Kt.nextZ=Ot:Ve=Ot,Ot.prevZ=Kt,Kt=Ot;It=ii}Kt.nextZ=null,Ui*=2}while(ci>1)}(Oe)}(c,m,x,T);for(var G,W,q=c;c.prev!==c.next;)if(G=c.prev,W=c.next,T?w_(c,m,x,T):A0(c))a.push(G.i/h|0),a.push(c.i/h|0),a.push(W.i/h|0),am(c),c=W.next,q=W.next;else if((c=W)===q){O?1===O?bp(c=C_(Zf(c),a,h),a,h,m,x,T,2):2===O&&wp(c,a,h,m,x,T):bp(Zf(c),a,h,m,x,T,1);break}}}function A0(c){var a=c.prev,h=c,m=c.next;if(Io(a,h,m)>=0)return!1;for(var x=a.x,T=h.x,O=m.x,G=a.y,W=h.y,q=m.y,ce=x<T?x<O?x:O:T<O?T:O,pe=G<W?G<q?G:q:W<q?W:q,ve=x>T?x>O?x:O:T>O?T:O,De=G>W?G>q?G:q:W>q?W:q,Oe=m.next;Oe!==a;){if(Oe.x>=ce&&Oe.x<=ve&&Oe.y>=pe&&Oe.y<=De&&Ep(x,G,T,W,O,q,Oe.x,Oe.y)&&Io(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.next}return!0}function w_(c,a,h,m){var x=c.prev,T=c,O=c.next;if(Io(x,T,O)>=0)return!1;for(var G=x.x,W=T.x,q=O.x,ce=x.y,pe=T.y,ve=O.y,De=G<W?G<q?G:q:W<q?W:q,Oe=ce<pe?ce<ve?ce:ve:pe<ve?pe:ve,Ve=G>W?G>q?G:q:W>q?W:q,at=ce>pe?ce>ve?ce:ve:pe>ve?pe:ve,It=M0(De,Oe,a,h,m),ii=M0(Ve,at,a,h,m),Ot=c.prevZ,Kt=c.nextZ;Ot&&Ot.z>=It&&Kt&&Kt.z<=ii;){if(Ot.x>=De&&Ot.x<=Ve&&Ot.y>=Oe&&Ot.y<=at&&Ot!==x&&Ot!==O&&Ep(G,ce,W,pe,q,ve,Ot.x,Ot.y)&&Io(Ot.prev,Ot,Ot.next)>=0||(Ot=Ot.prevZ,Kt.x>=De&&Kt.x<=Ve&&Kt.y>=Oe&&Kt.y<=at&&Kt!==x&&Kt!==O&&Ep(G,ce,W,pe,q,ve,Kt.x,Kt.y)&&Io(Kt.prev,Kt,Kt.next)>=0))return!1;Kt=Kt.nextZ}for(;Ot&&Ot.z>=It;){if(Ot.x>=De&&Ot.x<=Ve&&Ot.y>=Oe&&Ot.y<=at&&Ot!==x&&Ot!==O&&Ep(G,ce,W,pe,q,ve,Ot.x,Ot.y)&&Io(Ot.prev,Ot,Ot.next)>=0)return!1;Ot=Ot.prevZ}for(;Kt&&Kt.z<=ii;){if(Kt.x>=De&&Kt.x<=Ve&&Kt.y>=Oe&&Kt.y<=at&&Kt!==x&&Kt!==O&&Ep(G,ce,W,pe,q,ve,Kt.x,Kt.y)&&Io(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.nextZ}return!0}function C_(c,a,h){var m=c;do{var x=m.prev,T=m.next.next;!sm(x,T)&&O0(x,m,m.next,T)&&Gd(x,T)&&Gd(T,x)&&(a.push(x.i/h|0),a.push(m.i/h|0),a.push(T.i/h|0),am(m),am(m.next),m=c=T),m=m.next}while(m!==c);return Zf(m)}function wp(c,a,h,m,x,T){var O=c;do{for(var G=O.next.next;G!==O.prev;){if(O.i!==G.i&&Ty(O,G)){var W=Dg(O,G);return O=Zf(O,O.next),W=Zf(W,W.next),bp(O,a,h,m,x,T,0),void bp(W,a,h,m,x,T,0)}G=G.next}O=O.next}while(O!==c)}function D0(c,a){return c.x-a.x}function Cp(c,a){var h=function(x,T){var O,G=T,W=x.x,q=x.y,ce=-1/0;do{if(q<=G.y&&q>=G.next.y&&G.next.y!==G.y){var pe=G.x+(q-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(pe<=W&&pe>ce&&(ce=pe,O=G.x<G.next.x?G:G.next,pe===W))return O}G=G.next}while(G!==T);if(!O)return null;var ve,De=O,Oe=O.x,Ve=O.y,at=1/0;G=O;do{W>=G.x&&G.x>=Oe&&W!==G.x&&Ep(q<Ve?W:ce,q,Oe,Ve,q<Ve?ce:W,q,G.x,G.y)&&(ve=Math.abs(q-G.y)/(W-G.x),Gd(G,x)&&(ve<at||ve===at&&(G.x>O.x||G.x===O.x&&I0(O,G)))&&(O=G,at=ve)),G=G.next}while(G!==De);return O}(c,a);if(!h)return a;var m=Dg(h,c);return Zf(m,m.next),Zf(h,h.next)}function I0(c,a){return Io(c.prev,c,a.prev)<0&&Io(a.next,c,c.next)<0}function M0(c,a,h,m,x){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*x|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-m)*x|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function E_(c){var a=c,h=c;do{(a.x<h.x||a.x===h.x&&a.y<h.y)&&(h=a),a=a.next}while(a!==c);return h}function Ep(c,a,h,m,x,T,O,G){return(x-O)*(a-G)>=(c-O)*(T-G)&&(c-O)*(m-G)>=(h-O)*(a-G)&&(h-O)*(T-G)>=(x-O)*(m-G)}function Ty(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(h,m){var x=h;do{if(x.i!==h.i&&x.next.i!==h.i&&x.i!==m.i&&x.next.i!==m.i&&O0(x,x.next,h,m))return!0;x=x.next}while(x!==h);return!1}(c,a)&&(Gd(c,a)&&Gd(a,c)&&function(h,m){var x=h,T=!1,O=(h.x+m.x)/2,G=(h.y+m.y)/2;do{x.y>G!=x.next.y>G&&x.next.y!==x.y&&O<(x.next.x-x.x)*(G-x.y)/(x.next.y-x.y)+x.x&&(T=!T),x=x.next}while(x!==h);return T}(c,a)&&(Io(c.prev,c,a.prev)||Io(c,a.prev,a))||sm(c,a)&&Io(c.prev,c,c.next)>0&&Io(a.prev,a,a.next)>0)}function Io(c,a,h){return(a.y-c.y)*(h.x-a.x)-(a.x-c.x)*(h.y-a.y)}function sm(c,a){return c.x===a.x&&c.y===a.y}function O0(c,a,h,m){var x=Wm(Io(c,a,h)),T=Wm(Io(c,a,m)),O=Wm(Io(h,m,c)),G=Wm(Io(h,m,a));return x!==T&&O!==G||!(0!==x||!Yd(c,h,a))||!(0!==T||!Yd(c,m,a))||!(0!==O||!Yd(h,c,m))||!(0!==G||!Yd(h,a,m))}function Yd(c,a,h){return a.x<=Math.max(c.x,h.x)&&a.x>=Math.min(c.x,h.x)&&a.y<=Math.max(c.y,h.y)&&a.y>=Math.min(c.y,h.y)}function Wm(c){return c>0?1:c<0?-1:0}function Gd(c,a){return Io(c.prev,c,c.next)<0?Io(c,a,c.next)>=0&&Io(c,c.prev,a)>=0:Io(c,a,c.prev)<0||Io(c,c.next,a)<0}function Dg(c,a){var h=new R0(c.i,c.x,c.y),m=new R0(a.i,a.x,a.y),x=c.next,T=a.prev;return c.next=a,a.prev=c,h.next=x,x.prev=h,m.next=h,h.prev=m,T.next=m,m.prev=T,m}function $m(c,a,h,m){var x=new R0(c,a,h);return m?(x.next=m.next,x.prev=m,m.next.prev=x,m.next=x):(x.prev=x,x.next=x),x}function am(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function R0(c,a,h){this.i=c,this.x=a,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xm(c,a,h,m){for(var x=0,T=a,O=h-m;T<h;T+=m)x+=(c[O]-c[T])*(c[T+1]+c[O+1]),O=T;return x}jm.exports=nm,jm.exports.default=nm,nm.deviation=function(c,a,h,m){var x=a&&a.length,T=Math.abs(Xm(c,0,x?a[0]*h:c.length,h));if(x)for(var O=0,G=a.length;O<G;O++)T-=Math.abs(Xm(c,a[O]*h,O<G-1?a[O+1]*h:c.length,h));var W=0;for(O=0;O<m.length;O+=3){var q=m[O]*h,ce=m[O+1]*h,pe=m[O+2]*h;W+=Math.abs((c[q]-c[pe])*(c[ce+1]-c[q+1])-(c[q]-c[ce])*(c[pe+1]-c[q+1]))}return 0===T&&0===W?0:Math.abs((W-T)/T)},nm.flatten=function(c){for(var a=c[0][0].length,h={vertices:[],holes:[],dimensions:a},m=0,x=0;x<c.length;x++){for(var T=0;T<c[x].length;T++)for(var O=0;O<a;O++)h.vertices.push(c[x][T][O]);x>0&&h.holes.push(m+=c[x-1].length)}return h};var Hd=Tt(jm.exports);function Zm(c,a,h,m,x){L0(c,a,h||0,m||c.length-1,x||qf)}function L0(c,a,h,m,x){for(;m>h;){if(m-h>600){var T=m-h+1,O=a-h+1,G=Math.log(T),W=.5*Math.exp(2*G/3),q=.5*Math.sqrt(G*W*(T-W)/T)*(O-T/2<0?-1:1);L0(c,a,Math.max(h,Math.floor(a-O*W/T+q)),Math.min(m,Math.floor(a+(T-O)*W/T+q)),x)}var ce=c[a],pe=h,ve=m;for(qm(c,h,a),x(c[m],ce)>0&&qm(c,h,m);pe<ve;){for(qm(c,pe,ve),pe++,ve--;x(c[pe],ce)<0;)pe++;for(;x(c[ve],ce)>0;)ve--}0===x(c[h],ce)?qm(c,h,ve):qm(c,++ve,m),ve<=a&&(h=ve+1),a<=ve&&(m=ve-1)}}function qm(c,a,h){var m=c[a];c[a]=c[h],c[h]=m}function qf(c,a){return c<a?-1:c>a?1:0}function Ig(c,a){const h=c.length;if(h<=1)return[c];const m=[];let x,T;for(let O=0;O<h;O++){const G=cr(c[O]);0!==G&&(c[O].area=Math.abs(G),void 0===T&&(T=G<0),T===G<0?(x&&m.push(x),x=[c[O]]):x.push(c[O]))}if(x&&m.push(x),a>1)for(let O=0;O<m.length;O++)m[O].length<=a||(Zm(m[O],a,1,m[O].length-1,P0),m[O]=m[O].slice(0,a));return m}function P0(c,a){return a.area-c.area}function F0(c,a,h){const m=h.patternDependencies;let x=!1;for(const T of a){const O=T.paint.get(`${c}-pattern`);O.isConstant()||(x=!0);const G=O.constantOr(null);G&&(x=!0,m[G]=!0)}return x}function Av(c,a,h,m,x){const T=x.patternDependencies;for(const O of a){const G=O.paint.get(`${c}-pattern`).value;if("constant"!==G.kind){let W=G.evaluate({zoom:m},h,{},x.availableImages);W=W&&W.name?W.name:W,T[W]=!0,h.patterns[O.id]=W}}return h}class B0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gn,this.indexArray=new zr,this.indexArray2=new Wo,this.programConfigurations=new Eh(a.layers,a.zoom),this.segments=new Ao,this.segments2=new Ao,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.projection=a.projection}populate(a,h,m,x){this.hasPattern=F0("fill",this.layers,h);const T=this.layers[0].layout.get("fill-sort-key"),O=[];for(const{feature:G,id:W,index:q,sourceLayerIndex:ce}of a){const pe=this.layers[0]._featureFilter.needGeometry,ve=Fu(G,pe);if(!this.layers[0]._featureFilter.filter(new ue(this.zoom),ve,m))continue;const De=T?T.evaluate(ve,{},m,h.availableImages):void 0,Oe={id:W,properties:G.properties,type:G.type,sourceLayerIndex:ce,index:q,geometry:pe?ve.geometry:xf(G,m,x),patterns:{},sortKey:De};O.push(Oe)}T&&O.sort((G,W)=>G.sortKey-W.sortKey);for(const G of O){const{geometry:W,index:q,sourceLayerIndex:ce}=G;if(this.hasPattern){const pe=Av("fill",this.layers,G,this.zoom,h);this.patternFeatures.push(pe)}else this.addFeature(G,W,q,m,{},h.availableImages);h.featureIndex.insert(a[q].feature,W,q,ce,this.index)}}update(a,h,m,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,m,x)}addFeatures(a,h,m,x,T){for(const O of this.patternFeatures)this.addFeature(O,O.geometry,O.index,h,m,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,S0),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,h,m,x,T,O=[]){for(const G of Ig(h,500)){let W=0;for(const Oe of G)W+=Oe.length;const q=this.segments.prepareSegment(W,this.layoutVertexArray,this.indexArray),ce=q.vertexLength,pe=[],ve=[];for(const Oe of G){if(0===Oe.length)continue;Oe!==G[0]&&ve.push(pe.length/2);const Ve=this.segments2.prepareSegment(Oe.length,this.layoutVertexArray,this.indexArray2),at=Ve.vertexLength;this.layoutVertexArray.emplaceBack(Oe[0].x,Oe[0].y),this.indexArray2.emplaceBack(at+Oe.length-1,at),pe.push(Oe[0].x),pe.push(Oe[0].y);for(let It=1;It<Oe.length;It++)this.layoutVertexArray.emplaceBack(Oe[It].x,Oe[It].y),this.indexArray2.emplaceBack(at+It-1,at+It),pe.push(Oe[It].x),pe.push(Oe[It].y);Ve.vertexLength+=Oe.length,Ve.primitiveLength+=Oe.length}const De=Hd(pe,ve);for(let Oe=0;Oe<De.length;Oe+=3)this.indexArray.emplaceBack(ce+De[Oe],ce+De[Oe+1],ce+De[Oe+2]);q.vertexLength+=W,q.primitiveLength+=De.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,T,O,x)}}kr(B0,"FillBucket",{omit:["layers","patternFeatures"]});const N0=new xt({"fill-sort-key":new ht(B.layout_fill["fill-sort-key"])});var Sy={paint:new xt({"fill-antialias":new Ye(B.paint_fill["fill-antialias"]),"fill-opacity":new ht(B.paint_fill["fill-opacity"]),"fill-color":new ht(B.paint_fill["fill-color"]),"fill-outline-color":new ht(B.paint_fill["fill-outline-color"]),"fill-translate":new Ye(B.paint_fill["fill-translate"]),"fill-translate-anchor":new Ye(B.paint_fill["fill-translate-anchor"]),"fill-pattern":new ht(B.paint_fill["fill-pattern"])}),layout:N0};const k_=Ei([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),om=Ei([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Mg=Ei([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Km}=k_;var Og={},Kf=Ci,Nu=Jm;function Jm(c,a,h,m,x){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=x,c.readFields(z0,this,a)}function z0(c,a,h){1==c?a.id=h.readVarint():2==c?function(m,x){for(var T=m.readVarint()+m.pos;m.pos<T;){var O=x._keys[m.readVarint()],G=x._values[m.readVarint()];x.properties[O]=G}}(h,a):3==c?a.type=h.readVarint():4==c&&(a._geometry=h.pos)}function Qm(c){for(var a,h,m=0,x=0,T=c.length,O=T-1;x<T;O=x++)m+=((h=c[O]).x-(a=c[x]).x)*(a.y+h.y);return m}Jm.types=["Unknown","Point","LineString","Polygon"],Jm.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,h=c.readVarint()+c.pos,m=1,x=0,T=0,O=0,G=[];c.pos<h;){if(x<=0){var W=c.readVarint();m=7&W,x=W>>3}if(x--,1===m||2===m)T+=c.readSVarint(),O+=c.readSVarint(),1===m&&(a&&G.push(a),a=[]),a.push(new Kf(T,O));else{if(7!==m)throw new Error("unknown command "+m);a&&a.push(a[0].clone())}}return a&&G.push(a),G},Jm.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,h=1,m=0,x=0,T=0,O=1/0,G=-1/0,W=1/0,q=-1/0;c.pos<a;){if(m<=0){var ce=c.readVarint();h=7&ce,m=ce>>3}if(m--,1===h||2===h)(x+=c.readSVarint())<O&&(O=x),x>G&&(G=x),(T+=c.readSVarint())<W&&(W=T),T>q&&(q=T);else if(7!==h)throw new Error("unknown command "+h)}return[O,W,G,q]},Jm.prototype.toGeoJSON=function(c,a,h){var m,x,T=this.extent*Math.pow(2,h),O=this.extent*c,G=this.extent*a,W=this.loadGeometry(),q=Jm.types[this.type];function ce(De){for(var Oe=0;Oe<De.length;Oe++){var Ve=De[Oe];De[Oe]=[360*(Ve.x+O)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ve.y+G)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var pe=[];for(m=0;m<W.length;m++)pe[m]=W[m][0];ce(W=pe);break;case 2:for(m=0;m<W.length;m++)ce(W[m]);break;case 3:for(W=function(De){var Oe=De.length;if(Oe<=1)return[De];for(var Ve,at,It=[],ii=0;ii<Oe;ii++){var Ot=Qm(De[ii]);0!==Ot&&(void 0===at&&(at=Ot<0),at===Ot<0?(Ve&&It.push(Ve),Ve=[De[ii]]):Ve.push(De[ii]))}return Ve&&It.push(Ve),It}(W),m=0;m<W.length;m++)for(x=0;x<W[m].length;x++)ce(W[m][x])}1===W.length?W=W[0]:q="Multi"+q;var ve={type:"Feature",geometry:{type:q,coordinates:W},properties:this.properties};return"id"in this&&(ve.id=this.id),ve};var Ef=Nu,b=N;function N(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(S,this,a),this.length=this._features.length}function S(c,a,h){15===c?a.version=h.readVarint():1===c?a.name=h.readString():5===c?a.extent=h.readVarint():2===c?a._features.push(h.pos):3===c?a._keys.push(h.readString()):4===c&&a._values.push(function(m){for(var x=null,T=m.readVarint()+m.pos;m.pos<T;){var O=m.readVarint()>>3;x=1===O?m.readString():2===O?m.readFloat():3===O?m.readDouble():4===O?m.readVarint64():5===O?m.readVarint():6===O?m.readSVarint():7===O?m.readBoolean():null}return x}(h))}N.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new Ef(this._pbf,a,this.extent,this._keys,this._values)};var X=b;function te(c,a,h){if(3===c){var m=new X(h,h.readVarint()+h.pos);m.length&&(a[m.name]=m)}}var Me=Og.VectorTile=function(c,a){this.layers=c.readFields(te,{},a)},Lt=Og.VectorTileFeature=Nu;function sn(c,a,h,m){const x=[],T=0===m?(O,G,W,q,ce,pe)=>{O.push(new kt(pe,W+(pe-G)/(q-G)*(ce-W)))}:(O,G,W,q,ce,pe)=>{O.push(new kt(G+(pe-W)/(ce-W)*(q-G),pe))};for(const O of c){const G=[];for(const W of O){if(W.length<=2)continue;const q=[];for(let ve=0;ve<W.length-1;ve++){const De=W[ve].x,Oe=W[ve].y,Ve=W[ve+1].x,at=W[ve+1].y,It=0===m?De:Oe,ii=0===m?Ve:at;It<a?ii>a&&T(q,De,Oe,Ve,at,a):It>h?ii<h&&T(q,De,Oe,Ve,at,h):q.push(W[ve]),ii<a&&It>=a&&T(q,De,Oe,Ve,at,a),ii>h&&It<=h&&T(q,De,Oe,Ve,at,h)}let ce=W[W.length-1];const pe=0===m?ce.x:ce.y;pe>=a&&pe<=h&&q.push(ce),q.length&&(ce=q[q.length-1],q[0].x===ce.x&&q[0].y===ce.y||q.push(q[0]),G.push(q))}G.length&&x.push(G)}return x}Og.VectorTileLayer=b;const dr=Lt.types,Oa=Math.pow(2,13);function co(c,a,h,m,x,T,O,G){c.emplaceBack((a<<1)+O,(h<<1)+T,(Math.floor(m*Oa)<<1)+x,Math.round(G))}function el(c,a,h){c.emplaceBack(a.x,a.y,a.z,16384*h[0],16384*h[1],16384*h[2])}class qc{constructor(){this.acc=new kt(0,0),this.polyCount=[]}startRing(a){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new kt(a.x,a.y),this.max=new kt(a.x,a.y))}append(a,h){this.currentPolyCount.edges++,this.acc._add(a);const m=this.min,x=this.max;a.x<m.x?m.x=a.x:a.x>x.x&&(x.x=a.x),a.y<m.y?m.y=a.y:a.y>x.y&&(x.y=a.y),((0===a.x||a.x===Yr)&&a.x===h.x)!=((0===a.y||a.y===Yr)&&a.y===h.y)&&this.processBorderOverlap(a,h),h.x<0!=a.x<0&&this.addBorderIntersection(0,Us(h.y,a.y,(0-h.x)/(a.x-h.x))),h.x>Yr!=a.x>Yr&&this.addBorderIntersection(1,Us(h.y,a.y,(Yr-h.x)/(a.x-h.x))),h.y<0!=a.y<0&&this.addBorderIntersection(2,Us(h.x,a.x,(0-h.y)/(a.y-h.y))),h.y>Yr!=a.y>Yr&&this.addBorderIntersection(3,Us(h.x,a.x,(Yr-h.y)/(a.y-h.y)))}addBorderIntersection(a,h){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const m=this.borders[a];h<m[0]&&(m[0]=h),h>m[1]&&(m[1]=h)}processBorderOverlap(a,h){if(a.x===h.x){if(a.y===h.y)return;const m=0===a.x?0:1;this.addBorderIntersection(m,h.y),this.addBorderIntersection(m,a.y)}else{const m=0===a.y?2:3;this.addBorderIntersection(m,h.x),this.addBorderIntersection(m,a.x)}}centroid(){const a=this.polyCount.reduce((h,m)=>h+m.edges,0);return 0!==a?this.acc.div(a)._round():new kt(0,0)}span(){return new kt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((a,h)=>a+ +(h[0]!==Number.MAX_VALUE),0)}}class kp{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.layoutVertexArray=new dn,this.centroidVertexArray=new tc,this.indexArray=new zr,this.programConfigurations=new Eh(a.layers,a.zoom),this.segments=new Ao,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.enableTerrain=a.enableTerrain}populate(a,h,m,x){this.features=[],this.hasPattern=F0("fill-extrusion",this.layers,h),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(T){const O=Math.exp(Math.PI*(1-T.y/(1<<T.z)*2));return 80150034*O/(O*O+1)/Yr/(1<<T.z)}(m),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:T,id:O,index:G,sourceLayerIndex:W}of a){const q=this.layers[0]._featureFilter.needGeometry,ce=Fu(T,q);if(!this.layers[0]._featureFilter.filter(new ue(this.zoom),ce,m))continue;const pe={id:O,sourceLayerIndex:W,index:G,geometry:q?ce.geometry:xf(T,m,x),properties:T.properties,type:T.type,patterns:{}},ve=this.layoutVertexArray.length;this.hasPattern?this.features.push(Av("fill-extrusion",this.layers,pe,this.zoom,h)):this.addFeature(pe,pe.geometry,G,m,{},h.availableImages,x),h.featureIndex.insert(T,pe.geometry,G,W,this.index,ve)}this.sortBorders()}addFeatures(a,h,m,x,T){for(const O of this.features){const{geometry:G}=O;this.addFeature(O,G,O.index,h,m,x,T)}this.sortBorders()}update(a,h,m,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,m,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Km),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,Mg.members,!0))),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,om.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,h,m,x,T,O,G){const W=[new kt(0,0),new kt(Yr,Yr)],q=G.projection,ce="globe"===q.name,pe=this.enableTerrain&&!ce?new qc:null,ve="Polygon"===dr[a.type];ce&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Wn);const De=Ig(h,500);for(let It=De.length-1;It>=0;It--){const ii=De[It];(0===ii.length||(Oe=ii[0]).every(Ot=>Ot.x<=0)||Oe.every(Ot=>Ot.x>=Yr)||Oe.every(Ot=>Ot.y<=0)||Oe.every(Ot=>Ot.y>=Yr))&&De.splice(It,1)}var Oe;let Ve;if(ce)Ve=A_(De,W,x);else{Ve=[];for(const It of De)Ve.push({polygon:It,bounds:W})}const at=ve?this.edgeRadius:0;for(const{polygon:It,bounds:ii}of Ve){let Ot=0,Kt=0;for(const li of It)ve&&!li[0].equals(li[li.length-1])&&li.push(li[0]),Kt+=ve?li.length-1:li.length;const ci=this.segments.prepareSegment((ve?5:4)*Kt,this.layoutVertexArray,this.indexArray);if(ve){const li=[],Ji=[];Ot=ci.vertexLength;for(const wn of It){let Kn,rn;wn.length&&wn!==It[0]&&Ji.push(li.length/2),Kn=wn[1].sub(wn[0])._perp()._unit();for(let In=1;In<wn.length;In++){const An=wn[In],Vn=wn[In===wn.length-1?1:In+1];let{x:er,y:gn}=An;if(at){rn=Vn.sub(An)._perp()._unit();const _r=Kn.add(rn)._unit(),jr=at*Math.min(4,1/(Kn.x*_r.x+Kn.y*_r.y));er+=jr*_r.x,gn+=jr*_r.y,Kn=rn}co(this.layoutVertexArray,er,gn,0,0,1,1,0),ci.vertexLength++,li.push(An.x,An.y),ce&&el(this.layoutVertexExtArray,q.projectTilePoint(er,gn,x),q.upVector(x,er,gn))}}const Ui=Hd(li,Ji);for(let wn=0;wn<Ui.length;wn+=3)this.indexArray.emplaceBack(Ot+Ui[wn],Ot+Ui[wn+2],Ot+Ui[wn+1]),ci.primitiveLength++}for(const li of It){pe&&li.length&&pe.startRing(li[0]);let Ji,Ui,wn,Kn=li.length>4&&Rg(li[li.length-2],li[0],li[1]),rn=at?eg(li[li.length-2],li[0],li[1],at):0;Ui=li[1].sub(li[0])._perp()._unit();let In=!0;for(let An=1,Vn=0;An<li.length;An++){let er=li[An-1],gn=li[An];const _r=li[An===li.length-1?1:An+1];if(pe&&ve&&pe.currentPolyCount.top++,Zh(gn,er,ii)){at&&(Ui=_r.sub(gn)._perp()._unit(),In=!In);continue}pe&&pe.append(gn,er);const jr=gn.sub(er)._perp(),br=jr.x/(Math.abs(jr.x)+Math.abs(jr.y)),Zs=jr.y>0?1:0,tr=er.dist(gn);if(Vn+tr>32768&&(Vn=0),at){wn=_r.sub(gn)._perp()._unit();let qs=Xh(er,gn,_r,Dv(Ui,wn),at);isNaN(qs)&&(qs=0);const bs=gn.sub(er)._unit();er=er.add(bs.mult(rn))._round(),gn=gn.add(bs.mult(-qs))._round(),rn=qs,Ui=wn}const rs=ci.vertexLength,js=li.length>4&&Rg(er,gn,_r);let ja=T_(Vn,Kn,In);if(co(this.layoutVertexArray,er.x,er.y,br,Zs,0,0,ja),co(this.layoutVertexArray,er.x,er.y,br,Zs,0,1,ja),Vn+=tr,ja=T_(Vn,js,!In),Kn=js,co(this.layoutVertexArray,gn.x,gn.y,br,Zs,0,0,ja),co(this.layoutVertexArray,gn.x,gn.y,br,Zs,0,1,ja),ci.vertexLength+=4,this.indexArray.emplaceBack(rs+0,rs+1,rs+2),this.indexArray.emplaceBack(rs+1,rs+3,rs+2),ci.primitiveLength+=2,at){const qs=Ot+(1===An?li.length-2:An-2),bs=1===An?Ot:qs+1;if(this.indexArray.emplaceBack(rs+1,qs,rs+3),this.indexArray.emplaceBack(qs,bs,rs+3),ci.primitiveLength+=2,void 0===Ji&&(Ji=rs),!Zh(_r,li[An],ii)){const Po=An===li.length-1?Ji:ci.vertexLength;this.indexArray.emplaceBack(rs+2,rs+3,Po),this.indexArray.emplaceBack(rs+3,Po+1,Po),this.indexArray.emplaceBack(rs+3,bs,Po+1),ci.primitiveLength+=3}In=!In}if(ce){const qs=this.layoutVertexExtArray,bs=q.projectTilePoint(er.x,er.y,x),Po=q.projectTilePoint(gn.x,gn.y,x),ea=q.upVector(x,er.x,er.y),ra=q.upVector(x,gn.x,gn.y);el(qs,bs,ea),el(qs,bs,ea),el(qs,Po,ra),el(qs,Po,ra)}}ve&&(Ot+=li.length-1)}}if(pe&&pe.polyCount.length>0){if(pe.borders){pe.vertexArrayOffset=this.centroidVertexArray.length;const It=pe.borders,ii=this.featuresOnBorder.push(pe)-1;for(let Ot=0;Ot<4;Ot++)It[Ot][0]!==Number.MAX_VALUE&&this.borders[Ot].push(ii)}this.encodeCentroid(pe.borders?void 0:pe.centroid(),pe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,T,O,x)}sortBorders(){for(let a=0;a<4;a++)this.borders[a].sort((h,m)=>this.featuresOnBorder[h].borders[a][0]-this.featuresOnBorder[m].borders[a][0])}encodeCentroid(a,h,m=!0){let x,T;if(a)if(0!==a.y){const G=h.span()._mult(this.tileToMeter);x=(Math.max(a.x,1)<<3)+Math.min(7,Math.round(G.x/10)),T=(Math.max(a.y,1)<<3)+Math.min(7,Math.round(G.y/10))}else x=Math.ceil(7*(a.x+450)),T=0;else x=0,T=+m;let O=m?this.centroidVertexArray.length:h.vertexArrayOffset;for(const G of h.polyCount){m&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*G.edges+G.top);for(let W=0;W<G.top;W++)this.centroidVertexArray.emplace(O++,x,T);for(let W=0;W<2*G.edges;W++)this.centroidVertexArray.emplace(O++,0,T),this.centroidVertexArray.emplace(O++,x,T)}}}function Dv(c,a){const h=c.add(a)._unit();return c.x*h.x+c.y*h.y}function eg(c,a,h,m){const x=a.sub(c)._perp()._unit(),T=h.sub(a)._perp()._unit();return Xh(c,a,h,Dv(x,T),m)}function Xh(c,a,h,m,x){const T=Math.sqrt(1-m*m);return Math.min(c.dist(a)/3,a.dist(h)/3,x*T/m)}function Zh(c,a,h){return c.x<h[0].x&&a.x<h[0].x||c.x>h[1].x&&a.x>h[1].x||c.y<h[0].y&&a.y<h[0].y||c.y>h[1].y&&a.y>h[1].y}function Rg(c,a,h){if(c.x<0||c.x>=Yr||a.x<0||a.x>=Yr||h.x<0||h.x>=Yr)return!1;const m=h.sub(a),x=m.perp(),T=c.sub(a);return(m.x*T.x+m.y*T.y)/Math.sqrt((m.x*m.x+m.y*m.y)*(T.x*T.x+T.y*T.y))>-.866&&x.x*T.x+x.y*T.y<0}function T_(c,a,h){const m=a?2|c:-3&c;return h?1|m:-2&m}function S_(){const c=Math.PI/32,a=Math.tan(c),h=Zc;return h*Math.sqrt(1+2*a*a)-h}function A_(c,a,h){const m=1<<h.z,x=Sh(h.x/m),T=Sh((h.x+1)/m),O=Ac(h.y/m),G=Ac((h.y+1)/m);return function(W,q,ce,pe,ve=0,De){const Oe=[];if(!W.length||!ce||!pe)return Oe;const Ve=(li,Ji)=>{for(const Ui of li)Oe.push({polygon:Ui,bounds:Ji})},at=Math.ceil(Math.log2(ce)),It=Math.ceil(Math.log2(pe)),ii=at-It,Ot=[];for(let li=0;li<Math.abs(ii);li++)Ot.push(ii>0?0:1);for(let li=0;li<Math.min(at,It);li++)Ot.push(0),Ot.push(1);let Kt=W;if(Kt=sn(Kt,q[0].y-ve,q[1].y+ve,1),Kt=sn(Kt,q[0].x-ve,q[1].x+ve,0),!Kt.length)return Oe;const ci=[];for(Ot.length?ci.push({polygons:Kt,bounds:q,depth:0}):Ve(Kt,q);ci.length;){const li=ci.pop(),Ji=li.depth,Ui=Ot[Ji],wn=li.bounds[0],Kn=li.bounds[1],rn=0===Ui?wn.x:wn.y,In=0===Ui?Kn.x:Kn.y,An=De?De(Ui,rn,In):.5*(rn+In),Vn=sn(li.polygons,rn-ve,An+ve,Ui),er=sn(li.polygons,An-ve,In+ve,Ui);if(Vn.length){const gn=[wn,new kt(0===Ui?An:Kn.x,1===Ui?An:Kn.y)];Ot.length>Ji+1?ci.push({polygons:Vn,bounds:gn,depth:Ji+1}):Ve(Vn,gn)}if(er.length){const gn=[new kt(0===Ui?An:wn.x,1===Ui?An:wn.y),Kn];Ot.length>Ji+1?ci.push({polygons:er,bounds:gn,depth:Ji+1}):Ve(er,gn)}}return Oe}(c,a,Math.ceil((T-x)/11.25),Math.ceil((O-G)/11.25),1,(W,q,ce)=>{if(0===W)return.5*(q+ce);{const pe=Ac((h.y+q/Yr)/m);return(hd(.5*(Ac((h.y+ce/Yr)/m)+pe))*m-h.y)*Yr}})}kr(kp,"FillExtrusionBucket",{omit:["layers","features"]}),kr(qc,"PartMetadata");const Iv=new xt({"fill-extrusion-edge-radius":new Ye(B["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Ay={paint:new xt({"fill-extrusion-opacity":new Ye(B["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ht(B["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ye(B["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ye(B["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ht(B["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ht(B["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ht(B["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ye(B["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ye(B["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ye(B["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Ye(B["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Iv};function Dy(c,a,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[c*m-2*Math.PI*6378137/2,a*m-2*Math.PI*6378137/2]}class Dh{constructor(a,h,m){this.z=a,this.x=h,this.y=m,this.key=kf(0,a,a,h,m)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,h){const m=(O=this.y,G=this.z,W=Dy(256*(T=this.x),256*(O=Math.pow(2,G)-O-1),G),q=Dy(256*(T+1),256*(O+1),G),W[0]+","+W[1]+","+q[0]+","+q[1]),x=function(T,O,G){let W,q="";for(let ce=T;ce>0;ce--)W=1<<ce-1,q+=(O&W?1:0)+(G&W?2:0);return q}(this.z,this.x,this.y);var T,O,G,W,q;return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===h?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",x).replace("{bbox-epsg-3857}",m)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Iy{constructor(a,h){this.wrap=a,this.canonical=h,this.key=kf(a,h.z,h.z,h.x,h.y)}}class Qu{constructor(a,h,m,x,T){this.overscaledZ=a,this.wrap=h,this.canonical=new Dh(m,+x,+T),this.key=0===h&&a===m?this.canonical.key:kf(h,a,m,x,T)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const h=this.canonical.z-a;return a>this.canonical.z?new Qu(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qu(a,this.wrap,a,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(a,h=!0){if(this.overscaledZ===a&&h)return this.key;if(a>this.canonical.z)return kf(this.wrap*+h,a,this.canonical.z,this.canonical.x,this.canonical.y);{const m=this.canonical.z-a;return kf(this.wrap*+h,a,a,this.canonical.x>>m,this.canonical.y>>m)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const h=this.canonical.z-a.canonical.z;return 0===a.overscaledZ||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>h&&a.canonical.y===this.canonical.y>>h}children(a){if(this.overscaledZ>=a)return[new Qu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,x=2*this.canonical.y;return[new Qu(h,this.wrap,h,m,x),new Qu(h,this.wrap,h,m+1,x),new Qu(h,this.wrap,h,m,x+1),new Qu(h,this.wrap,h,m+1,x+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Qu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Qu(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Iy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function kf(c,a,h,m,x){const T=1<<Math.min(h,22);let O=T*(x%T)+m%T;return c&&h<22&&(O+=T*T*((c<0?-2*c-1:2*c)%(1<<2*(22-h)))),16*(32*O+h)+(a-h)}kr(Dh,"CanonicalTileID"),kr(Qu,"OverscaledTileID",{omit:["projMatrix"]});class Xs extends kt{constructor(a,h,m){super(a,h),this.z=m}}function Y0(c,a){return c.x*a.x+c.y*a.y}function zu(c,a){if(1===c.length){let h=0;const m=a[h++];let x;for(;!x||m.equals(x);)if(x=a[h++],!x)return 1/0;for(;h<a.length;h++){const T=a[h],O=c[0],G=x.sub(m),W=T.sub(m),q=O.sub(m),ce=Y0(G,G),pe=Y0(G,W),ve=Y0(W,W),De=Y0(q,G),Oe=Y0(q,W),Ve=ce*ve-pe*pe,at=(ve*De-pe*Oe)/Ve,It=(ce*Oe-pe*De)/Ve,ii=m.z*(1-at-It)+x.z*at+T.z*It;if(isFinite(ii))return ii}return 1/0}{let h=1/0;for(const m of a)h=Math.min(h,m.z);return h}}function Hl(c,a,h,m,x,T,O,G){const W=O*x.getElevationAt(c,a,!0,!0),q=0!==T[0],ce=q?0===T[1]?O*(T[0]/7-450):O*function(pe,ve,De){const Oe=Math.floor(ve[0]/8),Ve=Math.floor(ve[1]/8),at=10*(ve[0]-8*Oe),It=10*(ve[1]-8*Ve),ii=pe.getElevationAt(Oe,Ve,!0,!0),Ot=pe.getMeterToDEM(De),Kt=Math.floor(.5*(at*Ot-1)),ci=Math.floor(.5*(It*Ot-1)),li=pe.tileCoordToPixel(Oe,Ve),Ji=2*Kt+1,Ui=2*ci+1,wn=(jr=Ji,br=Ui,[(er=pe).getElevationAtPixel(gn=li.x-Kt,_r=li.y-ci,!0),er.getElevationAtPixel(gn+br,_r,!0),er.getElevationAtPixel(gn,_r+br,!0),er.getElevationAtPixel(gn+jr,_r+br,!0)]),Kn=Math.abs(wn[0]-wn[1]),rn=Math.abs(wn[2]-wn[3]),In=Math.abs(wn[0]-wn[2])+Math.abs(wn[1]-wn[3]),An=Math.min(.25,.5*Ot*(Kn+rn)/Ji),Vn=Math.min(.25,.5*Ot*In/Ui);var er,gn,_r,jr,br;return ii+Math.max(An*at,Vn*It)}(x,T,G):W;return{base:W+(0===h)?-1:h,top:q?Math.max(ce+m,W+h+2):W+m}}const Mv=Ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Tp}=Mv,Sp=Ei([{name:"a_packed",components:4,type:"Float32"}]),{members:J1}=Sp,My=Lt.types,Q1=Math.cos(Math.PI/180*37.5);class Ov{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Vi,this.layoutVertexArray2=new Dn,this.indexArray=new zr,this.programConfigurations=new Eh(a.layers,a.zoom),this.segments=new Ao,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,m,x){this.hasPattern=F0("line",this.layers,h);const T=this.layers[0].layout.get("line-sort-key"),O=[];for(const{feature:ce,id:pe,index:ve,sourceLayerIndex:De}of a){const Oe=this.layers[0]._featureFilter.needGeometry,Ve=Fu(ce,Oe);if(!this.layers[0]._featureFilter.filter(new ue(this.zoom),Ve,m))continue;const at=T?T.evaluate(Ve,{},m):void 0,It={id:pe,properties:ce.properties,type:ce.type,sourceLayerIndex:De,index:ve,geometry:Oe?Ve.geometry:xf(ce,m,x),patterns:{},sortKey:at};O.push(It)}T&&O.sort((ce,pe)=>ce.sortKey-pe.sortKey);const{lineAtlas:G,featureIndex:W}=h,q=this.addConstantDashes(G);for(const ce of O){const{geometry:pe,index:ve,sourceLayerIndex:De}=ce;if(q&&this.addFeatureDashes(ce,G),this.hasPattern){const Oe=Av("line",this.layers,ce,this.zoom,h);this.patternFeatures.push(Oe)}else this.addFeature(ce,pe,ve,m,G.positions,h.availableImages);W.insert(a[ve].feature,pe,ve,De,this.index)}}addConstantDashes(a){let h=!1;for(const m of this.layers){const x=m.paint.get("line-dasharray").value,T=m.layout.get("line-cap").value;if("constant"!==x.kind||"constant"!==T.kind)h=!0;else{const O=T.value,G=x.value;if(!G)continue;a.addDash(G,O)}}return h}addFeatureDashes(a,h){const m=this.zoom;for(const x of this.layers){const T=x.paint.get("line-dasharray").value,O=x.layout.get("line-cap").value;if("constant"===T.kind&&"constant"===O.kind)continue;let G,W;if("constant"===T.kind){if(G=T.value,!G)continue}else G=T.evaluate({zoom:m},a);W="constant"===O.kind?O.value:O.evaluate({zoom:m},a),h.addDash(G,W),a.patterns[x.id]=h.getKey(G,W)}}update(a,h,m,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,m,x)}addFeatures(a,h,m,x,T){for(const O of this.patternFeatures)this.addFeature(O,O.geometry,O.index,h,m,x)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,J1)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Tp),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,h,m,x,T,O){const G=this.layers[0].layout,W=G.get("line-join").evaluate(a,{}),q=G.get("line-cap").evaluate(a,{}),ce=G.get("line-miter-limit"),pe=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const ve of h)this.addLine(ve,a,W,q,ce,pe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,T,O,x)}addLine(a,h,m,x,T,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let It=0;It<a.length-1;It++)this.totalDistance+=a[It].dist(a[It+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const G="Polygon"===My[h.type];let W=a.length;for(;W>=2&&a[W-1].equals(a[W-2]);)W--;let q=0;for(;q<W-1&&a[q].equals(a[q+1]);)q++;if(W<(G?3:2))return;"bevel"===m&&(T=1.05);const ce=this.overscaling<=16?15*Yr/(512*this.overscaling):0,pe=this.segments.prepareSegment(10*W,this.layoutVertexArray,this.indexArray);let ve,De,Oe,Ve,at;this.e1=this.e2=-1,G&&(ve=a[W-2],at=a[q].sub(ve)._unit()._perp());for(let It=q;It<W;It++){if(Oe=It===W-1?G?a[q+1]:void 0:a[It+1],Oe&&a[It].equals(Oe))continue;at&&(Ve=at),ve&&(De=ve),ve=a[It],at=Oe?Oe.sub(ve)._unit()._perp():Ve,Ve=Ve||at;let ii=Ve.add(at);0===ii.x&&0===ii.y||ii._unit();const Ot=Ve.x*at.x+Ve.y*at.y,Kt=ii.x*at.x+ii.y*at.y,ci=0!==Kt?1/Kt:1/0,li=2*Math.sqrt(2-2*Kt),Ji=Kt<Q1&&De&&Oe,Ui=Ve.x*at.y-Ve.y*at.x>0;if(Ji&&It>q){const rn=ve.dist(De);if(rn>2*ce){const In=ve.sub(ve.sub(De)._mult(ce/rn)._round());this.updateDistance(De,In),this.addCurrentVertex(In,Ve,0,0,pe),De=In}}const wn=De&&Oe;let Kn=wn?m:G?"butt":x;if(wn&&"round"===Kn&&(ci<O?Kn="miter":ci<=2&&(Kn="fakeround")),"miter"===Kn&&ci>T&&(Kn="bevel"),"bevel"===Kn&&(ci>2&&(Kn="flipbevel"),ci<T&&(Kn="miter")),De&&this.updateDistance(De,ve),"miter"===Kn)ii._mult(ci),this.addCurrentVertex(ve,ii,0,0,pe);else if("flipbevel"===Kn){if(ci>100)ii=at.mult(-1);else{const rn=ci*Ve.add(at).mag()/Ve.sub(at).mag();ii._perp()._mult(rn*(Ui?-1:1))}this.addCurrentVertex(ve,ii,0,0,pe),this.addCurrentVertex(ve,ii.mult(-1),0,0,pe)}else if("bevel"===Kn||"fakeround"===Kn){const rn=-Math.sqrt(ci*ci-1),In=Ui?rn:0,An=Ui?0:rn;if(De&&this.addCurrentVertex(ve,Ve,In,An,pe),"fakeround"===Kn){const Vn=Math.round(180*li/Math.PI/20);for(let er=1;er<Vn;er++){let gn=er/Vn;if(.5!==gn){const jr=gn-.5;gn+=gn*jr*(gn-1)*((1.0904+Ot*(Ot*(3.55645-1.43519*Ot)-3.2452))*jr*jr+(.848013+Ot*(.215638*Ot-1.06021)))}const _r=at.sub(Ve)._mult(gn)._add(Ve)._unit()._mult(Ui?-1:1);this.addHalfVertex(ve,_r.x,_r.y,!1,Ui,0,pe)}}Oe&&this.addCurrentVertex(ve,at,-In,-An,pe)}else if("butt"===Kn)this.addCurrentVertex(ve,ii,0,0,pe);else if("square"===Kn){const rn=De?1:-1;De||this.addCurrentVertex(ve,ii,rn,rn,pe),this.addCurrentVertex(ve,ii,0,0,pe),De&&this.addCurrentVertex(ve,ii,rn,rn,pe)}else"round"===Kn&&(De&&(this.addCurrentVertex(ve,Ve,0,0,pe),this.addCurrentVertex(ve,Ve,1,1,pe,!0)),Oe&&(this.addCurrentVertex(ve,at,-1,-1,pe,!0),this.addCurrentVertex(ve,at,0,0,pe)));if(Ji&&It<W-1){const rn=ve.dist(Oe);if(rn>2*ce){const In=ve.add(Oe.sub(ve)._mult(ce/rn)._round());this.updateDistance(ve,In),this.addCurrentVertex(In,at,0,0,pe),ve=In}}}}addCurrentVertex(a,h,m,x,T,O=!1){const G=h.y*x-h.x,W=-h.y-h.x*x;this.addHalfVertex(a,h.x+h.y*m,h.y-h.x*m,O,!1,m,T),this.addHalfVertex(a,G,W,O,!0,-x,T)}addHalfVertex({x:a,y:h},m,x,T,O,G,W){this.layoutVertexArray.emplaceBack((a<<1)+(T?1:0),(h<<1)+(O?1:0),Math.round(63*m)+128,Math.round(63*x)+128,1+(0===G?0:G<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const q=W.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,q),W.primitiveLength++),O?this.e2=q:this.e1=q}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,h){this.distance+=a.dist(h),this.updateScaledDistance()}}kr(Ov,"LineBucket",{omit:["layers","patternFeatures"]});const D_=new xt({"line-cap":new ht(B.layout_line["line-cap"]),"line-join":new ht(B.layout_line["line-join"]),"line-miter-limit":new Ye(B.layout_line["line-miter-limit"]),"line-round-limit":new Ye(B.layout_line["line-round-limit"]),"line-sort-key":new ht(B.layout_line["line-sort-key"])});var Oy={paint:new xt({"line-opacity":new ht(B.paint_line["line-opacity"]),"line-color":new ht(B.paint_line["line-color"]),"line-translate":new Ye(B.paint_line["line-translate"]),"line-translate-anchor":new Ye(B.paint_line["line-translate-anchor"]),"line-width":new ht(B.paint_line["line-width"]),"line-gap-width":new ht(B.paint_line["line-gap-width"]),"line-offset":new ht(B.paint_line["line-offset"]),"line-blur":new ht(B.paint_line["line-blur"]),"line-dasharray":new ht(B.paint_line["line-dasharray"]),"line-pattern":new ht(B.paint_line["line-pattern"]),"line-gradient":new zt(B.paint_line["line-gradient"]),"line-trim-offset":new Ye(B.paint_line["line-trim-offset"])}),layout:D_};const Jf=new class extends ht{possiblyEvaluate(c,a){return a=new ue(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,transition:a.transition}),super.possiblyEvaluate(c,a)}evaluate(c,a,h,m){return a=hr({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(c,a,h,m)}}(Oy.paint.properties["line-width"].specification);function I_(c,a){return a>0?a+2*c:c}Jf.useIntegerZoom=!0;const Rv=Ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Sl=Ei([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),ml=Ei([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const G0=Ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ry=Ei([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ei([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lv=Ei([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ex=Ei([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ei([{name:"triangle",components:3,type:"Uint16"}]),Ei([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ei([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ei([{type:"Float32",name:"offsetX"}]),Ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Vl=24;const Vd=128;function M_(c,a){const{expression:h}=a;if("constant"===h.kind)return{kind:"constant",layoutSize:h.evaluate(new ue(c+1))};if("source"===h.kind)return{kind:"source"};{const{zoomStops:m,interpolationType:x}=h;let T=0;for(;T<m.length&&m[T]<=c;)T++;T=Math.max(0,T-1);let O=T;for(;O<m.length&&m[O]<c+1;)O++;O=Math.min(m.length-1,O);const G=m[T],W=m[O];return"composite"===h.kind?{kind:"composite",minZoom:G,maxZoom:W,interpolationType:x}:{kind:"camera",minZoom:G,maxZoom:W,minSize:h.evaluate(new ue(G)),maxSize:h.evaluate(new ue(W)),interpolationType:x}}}function tg(c,{uSize:a,uSizeT:h},{lowerSize:m,upperSize:x}){return"source"===c.kind?m/Vd:"composite"===c.kind?Us(m/Vd,x/Vd,h):a}function Qf(c,a){let h=0,m=0;if("constant"===c.kind)m=c.layoutSize;else if("source"!==c.kind){const{interpolationType:x,minZoom:T,maxZoom:O}=c,G=x?qi(yc.interpolationFactor(x,a,T,O),0,1):0;"camera"===c.kind?m=Us(c.minSize,c.maxSize,G):h=G}return{uSizeT:h,uSize:m}}var H0=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Vd,evaluateSizeForFeature:tg,evaluateSizeForZoom:Qf,getSizeData:M_});function O_(c,a,h){return c.sections.forEach(m=>{m.text=function(x,T,O){const G=T.layout.get("text-transform").evaluate(O,{});return"uppercase"===G?x=x.toLocaleUpperCase():"lowercase"===G&&(x=x.toLocaleLowerCase()),re.applyArabicShaping&&(x=re.applyArabicShaping(x)),x}(m.text,a,h)}),c}const Lg={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function V0(c){return"\ufe36"===c||"\ufe48"===c||"\ufe38"===c||"\ufe44"===c||"\ufe42"===c||"\ufe3e"===c||"\ufe3c"===c||"\ufe3a"===c||"\ufe18"===c||"\ufe40"===c||"\ufe10"===c||"\ufe13"===c||"\ufe14"===c||"\uff40"===c||"\uffe3"===c||"\ufe11"===c||"\ufe12"===c}function pd(c){return"\ufe35"===c||"\ufe47"===c||"\ufe37"===c||"\ufe43"===c||"\ufe41"===c||"\ufe3d"===c||"\ufe3b"===c||"\ufe39"===c||"\ufe17"===c||"\ufe3f"===c}var lm=so,R_=function(c,a,h,m,x){var T,O,G=8*x-m-1,W=(1<<G)-1,q=W>>1,ce=-7,pe=h?x-1:0,ve=h?-1:1,De=c[a+pe];for(pe+=ve,T=De&(1<<-ce)-1,De>>=-ce,ce+=G;ce>0;T=256*T+c[a+pe],pe+=ve,ce-=8);for(O=T&(1<<-ce)-1,T>>=-ce,ce+=m;ce>0;O=256*O+c[a+pe],pe+=ve,ce-=8);if(0===T)T=1-q;else{if(T===W)return O?NaN:1/0*(De?-1:1);O+=Math.pow(2,m),T-=q}return(De?-1:1)*O*Math.pow(2,T-m)},Ly=function(c,a,h,m,x,T){var O,G,W,q=8*T-x-1,ce=(1<<q)-1,pe=ce>>1,ve=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,De=m?0:T-1,Oe=m?1:-1,Ve=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(G=isNaN(a)?1:0,O=ce):(O=Math.floor(Math.log(a)/Math.LN2),a*(W=Math.pow(2,-O))<1&&(O--,W*=2),(a+=O+pe>=1?ve/W:ve*Math.pow(2,1-pe))*W>=2&&(O++,W/=2),O+pe>=ce?(G=0,O=ce):O+pe>=1?(G=(a*W-1)*Math.pow(2,x),O+=pe):(G=a*Math.pow(2,pe-1)*Math.pow(2,x),O=0));x>=8;c[h+De]=255&G,De+=Oe,G/=256,x-=8);for(O=O<<x|G,q+=x;q>0;c[h+De]=255&O,De+=Oe,O/=256,q-=8);c[h+De-Oe]|=128*Ve};function so(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}so.Varint=0,so.Fixed64=1,so.Bytes=2,so.Fixed32=5;var L_=4294967296,Py=1/L_,Pv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Yu(c){return c.type===so.Bytes?c.readVarint()+c.pos:c.pos+1}function Fv(c,a,h){var m=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));h.realloc(m);for(var x=h.pos-1;x>=c;x--)h.buf[x+m]=h.buf[x]}function Ud(c,a){for(var h=0;h<c.length;h++)a.writeVarint(c[h])}function Fy(c,a){for(var h=0;h<c.length;h++)a.writeSVarint(c[h])}function tx(c,a){for(var h=0;h<c.length;h++)a.writeFloat(c[h])}function yo(c,a){for(var h=0;h<c.length;h++)a.writeDouble(c[h])}function ix(c,a){for(var h=0;h<c.length;h++)a.writeBoolean(c[h])}function By(c,a){for(var h=0;h<c.length;h++)a.writeFixed32(c[h])}function U0(c,a){for(var h=0;h<c.length;h++)a.writeSFixed32(c[h])}function Ny(c,a){for(var h=0;h<c.length;h++)a.writeFixed64(c[h])}function zy(c,a){for(var h=0;h<c.length;h++)a.writeSFixed64(c[h])}function Pg(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function Fg(c,a,h){c[h]=a,c[h+1]=a>>>8,c[h+2]=a>>>16,c[h+3]=a>>>24}function Yy(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}so.prototype={destroy:function(){this.buf=null},readFields:function(c,a,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),x=m>>3,T=this.pos;this.type=7&m,c(x,a,this),this.pos===T&&this.skip(m)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=Pg(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Yy(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Pg(this.buf,this.pos)+Pg(this.buf,this.pos+4)*L_;return this.pos+=8,c},readSFixed64:function(){var c=Pg(this.buf,this.pos)+Yy(this.buf,this.pos+4)*L_;return this.pos+=8,c},readFloat:function(){var c=R_(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=R_(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,h,m=this.buf;return a=127&(h=m[this.pos++]),h<128?a:(a|=(127&(h=m[this.pos++]))<<7,h<128?a:(a|=(127&(h=m[this.pos++]))<<14,h<128?a:(a|=(127&(h=m[this.pos++]))<<21,h<128?a:function(x,T,O){var G,W,q=O.buf;if(G=(112&(W=q[O.pos++]))>>4,W<128||(G|=(127&(W=q[O.pos++]))<<3,W<128)||(G|=(127&(W=q[O.pos++]))<<10,W<128)||(G|=(127&(W=q[O.pos++]))<<17,W<128)||(G|=(127&(W=q[O.pos++]))<<24,W<128)||(G|=(1&(W=q[O.pos++]))<<31,W<128))return function na(c,a,h){return h?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}(x,G,T);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(h=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&Pv?Pv.decode(this.buf.subarray(a,c)):function(h,m,x){for(var T="",O=m;O<x;){var G,W,q,ce=h[O],pe=null,ve=ce>239?4:ce>223?3:ce>191?2:1;if(O+ve>x)break;1===ve?ce<128&&(pe=ce):2===ve?128==(192&(G=h[O+1]))&&(pe=(31&ce)<<6|63&G)<=127&&(pe=null):3===ve?(W=h[O+2],128==(192&(G=h[O+1]))&&128==(192&W)&&((pe=(15&ce)<<12|(63&G)<<6|63&W)<=2047||pe>=55296&&pe<=57343)&&(pe=null)):4===ve&&(W=h[O+2],q=h[O+3],128==(192&(G=h[O+1]))&&128==(192&W)&&128==(192&q)&&((pe=(15&ce)<<18|(63&G)<<12|(63&W)<<6|63&q)<=65535||pe>=1114112)&&(pe=null)),null===pe?(pe=65533,ve=1):pe>65535&&(pe-=65536,T+=String.fromCharCode(pe>>>10&1023|55296),pe=56320|1023&pe),T+=String.fromCharCode(pe),O+=ve}return T}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==so.Bytes)return c.push(this.readVarint(a));var h=Yu(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==so.Bytes)return c.push(this.readSVarint());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==so.Bytes)return c.push(this.readBoolean());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==so.Bytes)return c.push(this.readFloat());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==so.Bytes)return c.push(this.readDouble());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==so.Bytes)return c.push(this.readFixed32());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==so.Bytes)return c.push(this.readSFixed32());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==so.Bytes)return c.push(this.readFixed64());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==so.Bytes)return c.push(this.readSFixed64());var a=Yu(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===so.Varint)for(;this.buf[this.pos++]>127;);else if(a===so.Bytes)this.pos=this.readVarint()+this.pos;else if(a===so.Fixed32)this.pos+=4;else{if(a!==so.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var h=new Uint8Array(a);h.set(this.buf),this.buf=h,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Fg(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Fg(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Fg(this.buf,-1&c,this.pos),Fg(this.buf,Math.floor(c*Py),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Fg(this.buf,-1&c,this.pos),Fg(this.buf,Math.floor(c*Py),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,h){var m,x,T,G;if(a>=0?(m=a%4294967296|0,x=a/4294967296|0):(x=~(-a/4294967296),4294967295^(m=~(-a%4294967296))?m=m+1|0:(m=0,x=x+1|0)),a>=0x10000000000000000||a<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),T=m,(G=h).buf[G.pos++]=127&T|128,T>>>=7,G.buf[G.pos++]=127&T|128,T>>>=7,G.buf[G.pos++]=127&T|128,T>>>=7,G.buf[G.pos++]=127&T|128,G.buf[G.pos]=127&(T>>>=7),function(T,O){var G=(7&T)<<4;O.buf[O.pos++]|=G|((T>>>=3)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T)))))}(x,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(m,x,T){for(var O,G,W=0;W<x.length;W++){if((O=x.charCodeAt(W))>55295&&O<57344){if(!G){O>56319||W+1===x.length?(m[T++]=239,m[T++]=191,m[T++]=189):G=O;continue}if(O<56320){m[T++]=239,m[T++]=191,m[T++]=189,G=O;continue}O=G-55296<<10|O-56320|65536,G=null}else G&&(m[T++]=239,m[T++]=191,m[T++]=189,G=null);O<128?m[T++]=O:(O<2048?m[T++]=O>>6|192:(O<65536?m[T++]=O>>12|224:(m[T++]=O>>18|240,m[T++]=O>>12&63|128),m[T++]=O>>6&63|128),m[T++]=63&O|128)}return T}(this.buf,c,this.pos);var h=this.pos-a;h>=128&&Fv(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),Ly(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Ly(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var h=0;h<a;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,a){this.pos++;var h=this.pos;c(a,this);var m=this.pos-h;m>=128&&Fv(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,a,h){this.writeTag(c,so.Bytes),this.writeRawMessage(a,h)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,Ud,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,Fy,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,ix,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,tx,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,yo,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,By,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,U0,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,Ny,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,zy,a)},writeBytesField:function(c,a){this.writeTag(c,so.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,so.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,so.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,so.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,so.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,so.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,so.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,so.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,so.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,so.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};var j0=Tt(lm);const jd=3;function nx(c,a,h){a.glyphs=[],1===c&&h.readMessage(rx,a)}function rx(c,a,h){if(3===c){const{id:m,bitmap:x,width:T,height:O,left:G,top:W,advance:q}=h.readMessage(sx,{});a.glyphs.push({id:m,bitmap:new Cf({width:T+2*jd,height:O+2*jd},x),metrics:{width:T,height:O,left:G,top:W,advance:q}})}else 4===c?a.ascender=h.readSVarint():5===c&&(a.descender=h.readSVarint())}function sx(c,a,h){1===c?a.id=h.readVarint():2===c?a.bitmap=h.readBytes():3===c?a.width=h.readVarint():4===c?a.height=h.readVarint():5===c?a.left=h.readSVarint():6===c?a.top=h.readSVarint():7===c&&(a.advance=h.readVarint())}const Gy=jd;function ep(c){let a=0,h=0;for(const O of c)a+=O.w*O.h,h=Math.max(h,O.w);c.sort((O,G)=>G.h-O.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),h),h:1/0}];let x=0,T=0;for(const O of c)for(let G=m.length-1;G>=0;G--){const W=m[G];if(!(O.w>W.w||O.h>W.h)){if(O.x=W.x,O.y=W.y,T=Math.max(T,O.y+O.h),x=Math.max(x,O.x+O.w),O.w===W.w&&O.h===W.h){const q=m.pop();G<m.length&&(m[G]=q)}else O.h===W.h?(W.x+=O.w,W.w-=O.w):O.w===W.w?(W.y+=O.h,W.h-=O.h):(m.push({x:W.x+O.w,y:W.y,w:W.w-O.w,h:O.h}),W.y+=O.h,W.h-=O.h);break}}return{w:x,h:T,fill:a/(x*T)||0}}const Ih=1;class ig{constructor(a,{pixelRatio:h,version:m,stretchX:x,stretchY:T,content:O}){this.paddedRect=a,this.pixelRatio=h,this.stretchX=x,this.stretchY=T,this.content=O,this.version=m}get tl(){return[this.paddedRect.x+Ih,this.paddedRect.y+Ih]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ih,this.paddedRect.y+this.paddedRect.h-Ih]}get displaySize(){return[(this.paddedRect.w-2*Ih)/this.pixelRatio,(this.paddedRect.h-2*Ih)/this.pixelRatio]}}class Hy{constructor(a,h){const m={},x={};this.haveRenderCallbacks=[];const T=[];this.addImages(a,m,T),this.addImages(h,x,T);const{w:O,h:G}=ep(T),W=new Bu({width:O||1,height:G||1});for(const q in a){const ce=a[q],pe=m[q].paddedRect;Bu.copy(ce.data,W,{x:0,y:0},{x:pe.x+Ih,y:pe.y+Ih},ce.data)}for(const q in h){const ce=h[q],pe=x[q].paddedRect,ve=pe.x+Ih,De=pe.y+Ih,Oe=ce.data.width,Ve=ce.data.height;Bu.copy(ce.data,W,{x:0,y:0},{x:ve,y:De},ce.data),Bu.copy(ce.data,W,{x:0,y:Ve-1},{x:ve,y:De-1},{width:Oe,height:1}),Bu.copy(ce.data,W,{x:0,y:0},{x:ve,y:De+Ve},{width:Oe,height:1}),Bu.copy(ce.data,W,{x:Oe-1,y:0},{x:ve-1,y:De},{width:1,height:Ve}),Bu.copy(ce.data,W,{x:0,y:0},{x:ve+Oe,y:De},{width:1,height:Ve})}this.image=W,this.iconPositions=m,this.patternPositions=x}addImages(a,h,m){for(const x in a){const T=a[x],O={x:0,y:0,w:T.data.width+2*Ih,h:T.data.height+2*Ih};m.push(O),h[x]=new ig(O,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(a,h){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(m=>a.hasImage(m)),a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in a.updatedImages)this.patchUpdatedImage(this.iconPositions[m],a.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],a.getImage(m),h)}patchUpdatedImage(a,h,m){if(!a||!h||a.version===h.version)return;a.version=h.version;const[x,T]=a.tl;m.update(h.data,void 0,{x,y:T})}}kr(ig,"ImagePosition"),kr(Hy,"ImageAtlas");const eh={horizontal:1,vertical:2,horizontalOnly:3},Vy=-17;class Bg{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,h){const m=new Bg;return m.scale=a||1,m.fontStack=h,m}static forImage(a){const h=new Bg;return h.imageName=a,h}}class Ng{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,h){const m=new Ng;for(let x=0;x<a.sections.length;x++){const T=a.sections[x];T.image?m.addImageSection(T):m.addTextSection(T,h)}return m}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(a){this.text=function(h,m){let x="";for(let T=0;T<h.length;T++){const O=h.charCodeAt(T+1)||null,G=h.charCodeAt(T-1)||null;x+=!m&&(O&&ad(O)&&!Lg[h[T+1]]||G&&ad(G)&&!Lg[h[T-1]])||!Lg[h[T]]?h[T]:Lg[h[T]]}return x}(this.text,a)}trim(){let a=0;for(let m=0;m<this.text.length&&fu[this.text.charCodeAt(m)];m++)a++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=a&&fu[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(a,h),this.sectionIndex=this.sectionIndex.slice(a,h)}substring(a,h){const m=new Ng;return m.text=this.text.substring(a,h),m.sectionIndex=this.sectionIndex.slice(a,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,h)=>Math.max(a,this.sections[h].scale),0)}addTextSection(a,h){this.text+=a.text,this.sections.push(Bg.forText(a.scale,a.fontStack||h));const m=this.sections.length-1;for(let x=0;x<a.text.length;++x)this.sectionIndex.push(m)}addImageSection(a){const h=a.image?a.image.name:"";if(0===h.length)return void Zn("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Bg.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Zn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Mc(c,a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe){const Ve=Ng.fromFeature(c,x);pe===eh.vertical&&Ve.verticalizePunctuation(ve);let at=[];const It=function(li,Ji,Ui,wn,Kn,rn){if(!li)return[];const In=[],An=function(_r,jr,br,Zs,tr,rs){let js=0;for(let ja=0;ja<_r.length();ja++){const qs=_r.getSection(ja);js+=Uy(_r.getCharCode(ja),qs,Zs,tr,jr,rs)}return js/Math.max(1,Math.ceil(js/br))}(li,Ji,Ui,wn,Kn,rn),Vn=li.text.indexOf("\u200b")>=0;let er=0;for(let _r=0;_r<li.length();_r++){const jr=li.getSection(_r),br=li.getCharCode(_r);if(fu[br]||(er+=Uy(br,jr,wn,Kn,Ji,rn)),_r<li.length()-1){const Zs=!((gn=br)<11904||!(fr["Bopomofo Extended"](gn)||fr.Bopomofo(gn)||fr["CJK Compatibility Forms"](gn)||fr["CJK Compatibility Ideographs"](gn)||fr["CJK Compatibility"](gn)||fr["CJK Radicals Supplement"](gn)||fr["CJK Strokes"](gn)||fr["CJK Symbols and Punctuation"](gn)||fr["CJK Unified Ideographs Extension A"](gn)||fr["CJK Unified Ideographs"](gn)||fr["Enclosed CJK Letters and Months"](gn)||fr["Halfwidth and Fullwidth Forms"](gn)||fr.Hiragana(gn)||fr["Ideographic Description Characters"](gn)||fr["Kangxi Radicals"](gn)||fr["Katakana Phonetic Extensions"](gn)||fr.Katakana(gn)||fr["Vertical Forms"](gn)||fr["Yi Radicals"](gn)||fr["Yi Syllables"](gn)));(ax[br]||Zs||jr.imageName)&&In.push($y(_r+1,er,An,In,Wy(br,li.getCharCode(_r+1),Zs&&Vn),!1))}}var gn;return Xy($y(li.length(),er,An,In,0,!0))}(Ve,q,T,a,m,De),{processBidirectionalText:ii,processStyledBidirectionalText:Ot}=re;if(ii&&1===Ve.sections.length){const li=ii(Ve.toString(),It);for(const Ji of li){const Ui=new Ng;Ui.text=Ji,Ui.sections=Ve.sections;for(let wn=0;wn<Ji.length;wn++)Ui.sectionIndex.push(0);at.push(Ui)}}else if(Ot){const li=Ot(Ve.text,Ve.sectionIndex,It);for(const Ji of li){const Ui=new Ng;Ui.text=Ji[0],Ui.sectionIndex=Ji[1],Ui.sections=Ve.sections,at.push(Ui)}}else at=function(li,Ji){const Ui=[],wn=li.text;let Kn=0;for(const rn of Ji)Ui.push(li.substring(Kn,rn)),Kn=rn;return Kn<wn.length&&Ui.push(li.substring(Kn,wn.length)),Ui}(Ve,It);const Kt=[],ci={positionedLines:Kt,text:Ve.toString(),top:ce[1],bottom:ce[1],left:ce[0],right:ce[0],writingMode:pe,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(li,Ji,Ui,wn,Kn,rn,In,An,Vn,er,gn,_r){let jr=0,br=0,Zs=0;const tr="right"===An?1:"left"===An?0:.5;let rs=!1;for(const ea of Kn){const ra=ea.getSections();for(const xo of ra){if(xo.imageName)continue;const Mo=Ji[xo.fontStack];if(Mo&&(rs=void 0!==Mo.ascender&&void 0!==Mo.descender,!rs))break}if(!rs)break}let js=0;for(const ea of Kn){ea.trim();const ra=ea.getMaxScale(),xo=(ra-1)*Vl,Mo={positionedGlyphs:[],lineOffset:0};li.positionedLines[js]=Mo;const Oo=Mo.positionedGlyphs;let bo=0;if(!ea.length()){br+=rn,++js;continue}let tl=0,Al=0;for(let wo=0;wo<ea.length();wo++){const Oc=ea.getSection(wo),ac=ea.getSectionIndex(wo),gl=ea.getCharCode(wo);let qa=Oc.scale,oc=null,Ro=null,Mh=null,lc=Vl,Kc=0;const Dl=!(Vn===eh.horizontal||!gn&&!Gp(gl)||gn&&(fu[gl]||(ja=gl,fr.Arabic(ja)||fr["Arabic Supplement"](ja)||fr["Arabic Extended-A"](ja)||fr["Arabic Presentation Forms-A"](ja)||fr["Arabic Presentation Forms-B"](ja))));if(Oc.imageName){const rh=wn[Oc.imageName];if(!rh)continue;Mh=Oc.imageName,li.iconsInText=li.iconsInText||!0,Ro=rh.paddedRect;const Rc=rh.displaySize;qa=qa*Vl/_r,oc={width:Rc[0],height:Rc[1],left:Ih,top:-Gy,advance:Dl?Rc[1]:Rc[0],localGlyph:!1},Kc=rs?-oc.height*qa:Vy+ra*Vl-Rc[1]*qa,lc=oc.advance;const Ul=(Dl?Rc[0]:Rc[1])*qa-Vl*ra;Ul>0&&Ul>bo&&(bo=Ul)}else{const rh=Ui[Oc.fontStack];if(!rh)continue;rh[gl]&&(Ro=rh[gl]);const Rc=Ji[Oc.fontStack];if(!Rc)continue;const Ul=Rc.glyphs[gl];if(!Ul)continue;if(oc=Ul.metrics,lc=8203!==gl?Vl:0,rs){const Oh=void 0!==Rc.ascender?Math.abs(Rc.ascender):0,qv=void 0!==Rc.descender?Math.abs(Rc.descender):0,nv=(Oh+qv)*qa;tl<nv&&(tl=nv,Al=(Oh-qv)/2*qa),Kc=-Oh*qa}else Kc=Vy+(ra-qa)*Vl}Dl?(li.verticalizable=!0,Oo.push({glyph:gl,imageName:Mh,x:jr,y:br+Kc,vertical:Dl,scale:qa,localGlyph:oc.localGlyph,fontStack:Oc.fontStack,sectionIndex:ac,metrics:oc,rect:Ro}),jr+=lc*qa+er):(Oo.push({glyph:gl,imageName:Mh,x:jr,y:br+Kc,vertical:Dl,scale:qa,localGlyph:oc.localGlyph,fontStack:Oc.fontStack,sectionIndex:ac,metrics:oc,rect:Ro}),jr+=oc.advance*qa+er)}0!==Oo.length&&(Zs=Math.max(jr-er,Zs),rs?Bv(Oo,tr,bo,Al,rn*ra/2):Bv(Oo,tr,bo,0,rn/2)),jr=0;const sc=rn*ra+bo;Mo.lineOffset=Math.max(bo,xo),br+=sc,++js}var ja;const qs=br,{horizontalAlign:bs,verticalAlign:Po}=P_(In);(function(ea,ra,xo,Mo,Oo,bo){const tl=(ra-xo)*Oo,Al=-bo*Mo;for(const sc of ea)for(const wo of sc.positionedGlyphs)wo.x+=tl,wo.y+=Al})(li.positionedLines,tr,bs,Po,Zs,qs),li.top+=-Po*qs,li.bottom=li.top+qs,li.left+=-bs*Zs,li.right=li.left+Zs,li.hasBaseline=rs}(ci,a,h,m,at,O,G,W,pe,q,ve,Oe),!function(li){for(const Ji of li)if(0!==Ji.positionedGlyphs.length)return!1;return!0}(Kt)&&ci}const fu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ax={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Uy(c,a,h,m,x,T){if(a.imageName){const O=m[a.imageName];return O?O.displaySize[0]*a.scale*Vl/T+x:0}{const O=h[a.fontStack],G=O&&O.glyphs[c];return G?G.metrics.advance*a.scale+x:0}}function jy(c,a,h,m){const x=Math.pow(c-a,2);return m?c<a?x/2:2*x:x+Math.abs(h)*h}function Wy(c,a,h){let m=0;return 10===c&&(m-=1e4),h&&(m+=150),40!==c&&65288!==c||(m+=50),41!==a&&65289!==a||(m+=50),m}function $y(c,a,h,m,x,T){let O=null,G=jy(a,h,x,T);for(const W of m){const q=jy(a-W.x,h,x,T)+W.badness;q<=G&&(O=W,G=q)}return{index:c,x:a,priorBreak:O,badness:G}}function Xy(c){return c?Xy(c.priorBreak).concat(c.index):[]}function P_(c){let a=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:a,verticalAlign:h}}function Bv(c,a,h,m,x){if(!(a||h||m||x))return;const T=c.length-1,O=c[T],G=(O.x+O.metrics.advance*O.scale)*a;for(let W=0;W<=T;W++)c[W].x-=G,c[W].y+=h+m+x}function Zy(c,a,h){const{horizontalAlign:m,verticalAlign:x}=P_(h),T=a[0]-c.displaySize[0]*m,O=a[1]-c.displaySize[1]*x;return{image:c,top:O,bottom:O+c.displaySize[1],left:T,right:T+c.displaySize[0]}}function qy(c,a,h,m,x,T){const O=c.image;let G;if(O.content){const at=O.content,It=O.pixelRatio||1;G=[at[0]/It,at[1]/It,O.displaySize[0]-at[2]/It,O.displaySize[1]-at[3]/It]}const W=a.left*T,q=a.right*T;let ce,pe,ve,De;"width"===h||"both"===h?(De=x[0]+W-m[3],pe=x[0]+q+m[1]):(De=x[0]+(W+q-O.displaySize[0])/2,pe=De+O.displaySize[0]);const Oe=a.top*T,Ve=a.bottom*T;return"height"===h||"both"===h?(ce=x[1]+Oe-m[0],ve=x[1]+Ve+m[2]):(ce=x[1]+(Oe+Ve-O.displaySize[1])/2,ve=ce+O.displaySize[1]),{image:O,top:ce,right:pe,bottom:ve,left:De,collisionPadding:G}}class tp extends kt{constructor(a,h,m,x,T){super(a,h),this.angle=x,this.z=m,void 0!==T&&(this.segment=T)}clone(){return new tp(this.x,this.y,this.z,this.angle,this.segment)}}function F_(c,a,h,m,x){if(void 0===a.segment)return!0;let T=a,O=a.segment+1,G=0;for(;G>-h/2;){if(O--,O<0)return!1;G-=c[O].dist(T),T=c[O]}G+=c[O].dist(c[O+1]),O++;const W=[];let q=0;for(;G<h/2;){const ce=c[O],pe=c[O+1];if(!pe)return!1;let ve=c[O-1].angleTo(ce)-ce.angleTo(pe);for(ve=Math.abs((ve+3*Math.PI)%(2*Math.PI)-Math.PI),W.push({distance:G,angleDelta:ve}),q+=ve;G-W[0].distance>m;)q-=W.shift().angleDelta;if(q>x)return!1;O++,G+=ce.dist(pe)}return!0}function W0(c){let a=0;for(let h=0;h<c.length-1;h++)a+=c[h].dist(c[h+1]);return a}function Ky(c,a,h){return c?.6*a*h:0}function Jy(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function Qy(c,a,h,m,x,T){const O=Ky(h,x,T),G=Jy(h,m)*T;let W=0;const q=W0(c)/2;for(let ce=0;ce<c.length-1;ce++){const pe=c[ce],ve=c[ce+1],De=pe.dist(ve);if(W+De>q){const Oe=(q-W)/De,Ve=Us(pe.x,ve.x,Oe),at=Us(pe.y,ve.y,Oe),It=new tp(Ve,at,0,ve.angleTo(pe),ce);return!O||F_(c,It,G,O,a)?It:void 0}W+=De}}function ox(c,a,h,m,x,T,O,G,W){const q=Ky(m,T,O),ce=Jy(m,x),pe=ce*O,ve=0===c[0].x||c[0].x===W||0===c[0].y||c[0].y===W;return a-pe<a/4&&(a=pe+a/4),cm(c,ve?a/2*G%a:(ce/2+2*T)*O*G%a,a,q,h,pe,ve,!1,W)}function cm(c,a,h,m,x,T,O,G,W){const q=T/2,ce=W0(c);let pe=0,ve=a-h,De=[];for(let Oe=0;Oe<c.length-1;Oe++){const Ve=c[Oe],at=c[Oe+1],It=Ve.dist(at),ii=at.angleTo(Ve);for(;ve+h<pe+It;){ve+=h;const Ot=(ve-pe)/It,Kt=Us(Ve.x,at.x,Ot),ci=Us(Ve.y,at.y,Ot);if(Kt>=0&&Kt<W&&ci>=0&&ci<W&&ve-q>=0&&ve+q<=ce){const li=new tp(Kt,ci,0,ii,Oe);li._round(),m&&!F_(c,li,T,m,x)||De.push(li)}}pe+=It}return G||De.length||O||(De=cm(c,pe/2,h,m,x,T,O,!0,W)),De}function e1(c,a,h,m,x){const T=[];for(let O=0;O<c.length;O++){const G=c[O];let W;for(let q=0;q<G.length-1;q++){let ce=G[q],pe=G[q+1];ce.x<a&&pe.x<a||(ce.x<a?ce=new kt(a,ce.y+(a-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round():pe.x<a&&(pe=new kt(a,ce.y+(a-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round()),ce.y<h&&pe.y<h||(ce.y<h?ce=new kt(ce.x+(h-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),h)._round():pe.y<h&&(pe=new kt(ce.x+(h-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),h)._round()),ce.x>=m&&pe.x>=m||(ce.x>=m?ce=new kt(m,ce.y+(m-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round():pe.x>=m&&(pe=new kt(m,ce.y+(m-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round()),ce.y>=x&&pe.y>=x||(ce.y>=x?ce=new kt(ce.x+(x-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),x)._round():pe.y>=x&&(pe=new kt(ce.x+(x-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),x)._round()),W&&ce.equals(W[W.length-1])||(W=[ce],T.push(W)),W.push(pe)))))}}return T}kr(tp,"Anchor");const $0=1e20;function t1(c,a,h,m,x,T,O,G,W){for(let q=a;q<a+m;q++)n1(c,h*T+q,T,x,O,G,W);for(let q=h;q<h+x;q++)n1(c,q*T+a,1,m,O,G,W)}function n1(c,a,h,m,x,T,O){T[0]=0,O[0]=-$0,O[1]=$0,x[0]=c[a];for(let G=1,W=0,q=0;G<m;G++){x[G]=c[a+G*h];const ce=G*G;do{const pe=T[W];q=(x[G]-x[pe]+ce-pe*pe)/(G-pe)/2}while(q<=O[W]&&--W>-1);W++,T[W]=G,O[W]=q,O[W+1]=$0}for(let G=0,W=0;G<m;G++){for(;O[W+1]<G;)W++;const q=T[W],ce=G-q;c[a+G*h]=x[q]+ce*ce}}const Tf=2,X0={none:0,ideographs:1,all:2};class ng{constructor(a,h,m){this.requestManager=a,this.localGlyphMode=h,this.localFontFamily=m,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a){this.url=a}getGlyphs(a,h){const m=[];for(const x in a)for(const T of a[x])m.push({stack:x,id:T});Fn(m,({stack:x,id:T},O)=>{let G=this.entries[x];G||(G=this.entries[x]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let W=G.glyphs[T];if(void 0!==W)return void O(null,{stack:x,id:T,glyph:W});if(W=this._tinySDF(G,x,T),W)return G.glyphs[T]=W,void O(null,{stack:x,id:T,glyph:W});const q=Math.floor(T/256);if(256*q>65535)return void O(new Error("glyphs > 65535 not supported"));if(G.ranges[q])return void O(null,{stack:x,id:T,glyph:W});let ce=G.requests[q];ce||(ce=G.requests[q]=[],ng.loadGlyphRange(x,q,this.url,this.requestManager,(pe,ve)=>{if(ve){G.ascender=ve.ascender,G.descender=ve.descender;for(const De in ve.glyphs)this._doesCharSupportLocalGlyph(+De)||(G.glyphs[+De]=ve.glyphs[+De]);G.ranges[q]=!0}for(const De of ce)De(pe,ve);delete G.requests[q]})),ce.push((pe,ve)=>{pe?O(pe):ve&&O(null,{stack:x,id:T,glyph:ve.glyphs[T]||null})})},(x,T)=>{if(x)h(x);else if(T){const O={};for(const{stack:G,id:W,glyph:q}of T)void 0===O[G]&&(O[G]={}),void 0===O[G].glyphs&&(O[G].glyphs={}),O[G].glyphs[W]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics},O[G].ascender=this.entries[G].ascender,O[G].descender=this.entries[G].descender;h(null,O)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==X0.none&&(this.localGlyphMode===X0.all?!!this.localFontFamily:!!this.localFontFamily&&(fr["CJK Unified Ideographs"](a)||fr["Hangul Syllables"](a)||fr.Hiragana(a)||fr.Katakana(a)||fr["CJK Symbols and Punctuation"](a)))}_tinySDF(a,h,m){const x=this.localFontFamily;if(!x||!this._doesCharSupportLocalGlyph(m))return;let T=a.tinySDF;if(!T){let Ve="400";/bold/i.test(h)?Ve="900":/medium/i.test(h)?Ve="500":/light/i.test(h)&&(Ve="200"),T=a.tinySDF=new ng.TinySDF({fontFamily:x,fontWeight:Ve,fontSize:24*Tf,buffer:3*Tf,radius:8*Tf}),T.fontWeight=Ve}if(this.localGlyphs[T.fontWeight][m])return this.localGlyphs[T.fontWeight][m];const O=String.fromCharCode(m),{data:G,width:W,height:q,glyphWidth:ce,glyphHeight:pe,glyphLeft:ve,glyphTop:De,glyphAdvance:Oe}=T.draw(O);return this.localGlyphs[T.fontWeight][m]={id:m,bitmap:new Cf({width:W,height:q},G),metrics:{width:ce/Tf,height:pe/Tf,left:ve/Tf,top:De/Tf-27,advance:Oe/Tf,localGlyph:!0}}}}ng.loadGlyphRange=function(c,a,h,m,x){const T=256*a,O=T+255,G=m.transformRequest(m.normalizeGlyphsURL(h).replace("{fontstack}",c).replace("{range}",`${T}-${O}`),io.Glyphs);Bs(G,(W,q)=>{if(W)x(W);else if(q){const ce={},pe=new j0(q).readFields(nx,{});for(const ve of pe.glyphs)ce[ve.id]=ve;x(null,{glyphs:ce,ascender:pe.ascender,descender:pe.descender})}})},ng.TinySDF=class{constructor({fontSize:c=24,buffer:a=3,radius:h=8,cutoff:m=.25,fontFamily:x="sans-serif",fontWeight:T="normal",fontStyle:O="normal"}={}){this.buffer=a,this.cutoff=m,this.radius=h;const G=this.size=c+4*a,W=this._createCanvas(G),q=this.ctx=W.getContext("2d",{willReadFrequently:!0});q.font=`${O} ${T} ${c}px ${x}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(G*G),this.gridInner=new Float64Array(G*G),this.f=new Float64Array(G),this.z=new Float64Array(G+1),this.v=new Uint16Array(G)}_createCanvas(c){const a=document.createElement("canvas");return a.width=a.height=c,a}draw(c){const{width:a,actualBoundingBoxAscent:h,actualBoundingBoxDescent:m,actualBoundingBoxLeft:x,actualBoundingBoxRight:T}=this.ctx.measureText(c),O=Math.ceil(h),G=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-x))),W=Math.min(this.size-this.buffer,O+Math.ceil(m)),q=G+2*this.buffer,ce=W+2*this.buffer,pe=Math.max(q*ce,0),ve=new Uint8ClampedArray(pe),De={data:ve,width:q,height:ce,glyphWidth:G,glyphHeight:W,glyphTop:O,glyphLeft:0,glyphAdvance:a};if(0===G||0===W)return De;const{ctx:Oe,buffer:Ve,gridInner:at,gridOuter:It}=this;Oe.clearRect(Ve,Ve,G,W),Oe.fillText(c,Ve,Ve+O);const ii=Oe.getImageData(Ve,Ve,G,W);It.fill($0,0,pe),at.fill(0,0,pe);for(let Ot=0;Ot<W;Ot++)for(let Kt=0;Kt<G;Kt++){const ci=ii.data[4*(Ot*G+Kt)+3]/255;if(0===ci)continue;const li=(Ot+Ve)*q+Kt+Ve;if(1===ci)It[li]=0,at[li]=$0;else{const Ji=.5-ci;It[li]=Ji>0?Ji*Ji:0,at[li]=Ji<0?Ji*Ji:0}}t1(It,0,0,q,ce,q,this.f,this.v,this.z),t1(at,Ve,Ve,G,W,q,this.f,this.v,this.z);for(let Ot=0;Ot<pe;Ot++){const Kt=Math.sqrt(It[Ot])-Math.sqrt(at[Ot]);ve[Ot]=Math.round(255-255*(Kt/this.radius+this.cutoff))}return De}};const zg=Ih;function lx(c,a,h,m){const x=[],T=c.image,O=T.pixelRatio,G=T.paddedRect.w-2*zg,W=T.paddedRect.h-2*zg,q=c.right-c.left,ce=c.bottom-c.top,pe=T.stretchX||[[0,G]],ve=T.stretchY||[[0,W]],De=(rn,In)=>rn+In[1]-In[0],Oe=pe.reduce(De,0),Ve=ve.reduce(De,0),at=G-Oe,It=W-Ve;let ii=0,Ot=Oe,Kt=0,ci=Ve,li=0,Ji=at,Ui=0,wn=It;if(T.content&&m){const rn=T.content;ii=Nv(pe,0,rn[0]),Kt=Nv(ve,0,rn[1]),Ot=Nv(pe,rn[0],rn[2]),ci=Nv(ve,rn[1],rn[3]),li=rn[0]-ii,Ui=rn[1]-Kt,Ji=rn[2]-rn[0]-Ot,wn=rn[3]-rn[1]-ci}const Kn=(rn,In,An,Vn)=>{const er=zv(rn.stretch-ii,Ot,q,c.left),gn=B_(rn.fixed-li,Ji,rn.stretch,Oe),_r=zv(In.stretch-Kt,ci,ce,c.top),jr=B_(In.fixed-Ui,wn,In.stretch,Ve),br=zv(An.stretch-ii,Ot,q,c.left),Zs=B_(An.fixed-li,Ji,An.stretch,Oe),tr=zv(Vn.stretch-Kt,ci,ce,c.top),rs=B_(Vn.fixed-Ui,wn,Vn.stretch,Ve),js=new kt(er,_r),ja=new kt(br,_r),qs=new kt(br,tr),bs=new kt(er,tr),Po=new kt(gn/O,jr/O),ea=new kt(Zs/O,rs/O),ra=a*Math.PI/180;if(ra){const Oo=Math.sin(ra),bo=Math.cos(ra),tl=[bo,-Oo,Oo,bo];js._matMult(tl),ja._matMult(tl),bs._matMult(tl),qs._matMult(tl)}const xo=rn.stretch+rn.fixed,Mo=In.stretch+In.fixed;return{tl:js,tr:ja,bl:bs,br:qs,tex:{x:T.paddedRect.x+zg+xo,y:T.paddedRect.y+zg+Mo,w:An.stretch+An.fixed-xo,h:Vn.stretch+Vn.fixed-Mo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Po,pixelOffsetBR:ea,minFontScaleX:Ji/O/q,minFontScaleY:wn/O/ce,isSDF:h}};if(m&&(T.stretchX||T.stretchY)){const rn=cx(pe,at,Oe),In=cx(ve,It,Ve);for(let An=0;An<rn.length-1;An++){const Vn=rn[An],er=rn[An+1];for(let gn=0;gn<In.length-1;gn++)x.push(Kn(Vn,In[gn],er,In[gn+1]))}}else x.push(Kn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:G+1},{fixed:0,stretch:W+1}));return x}function Nv(c,a,h){let m=0;for(const x of c)m+=Math.max(a,Math.min(h,x[1]))-Math.max(a,Math.min(h,x[0]));return m}function cx(c,a,h){const m=[{fixed:-zg,stretch:0}];for(const[x,T]of c){const O=m[m.length-1];m.push({fixed:x-O.stretch,stretch:O.stretch}),m.push({fixed:x-O.stretch,stretch:O.stretch+(T-x)})}return m.push({fixed:a+zg,stretch:h}),m}function zv(c,a,h,m){return c/a*h+m}function B_(c,a,h,m){return c-a*h/m}function zb(c,a,h,m){const x=a+c.positionedLines[m].lineOffset;return 0===m?h+x/2:h+(x+(a+c.positionedLines[m-1].lineOffset))/2}class ux{constructor(a=[],h=hx){if(this.data=a,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const a=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:h,compare:m}=this,x=h[a];for(;a>0;){const T=a-1>>1,O=h[T];if(m(x,O)>=0)break;h[a]=O,a=T}h[a]=x}_down(a){const{data:h,compare:m}=this,x=this.length>>1,T=h[a];for(;a<x;){let O=1+(a<<1),G=h[O];const W=O+1;if(W<this.length&&m(h[W],G)<0&&(O=W,G=h[W]),m(G,T)>=0)break;h[a]=G,a=O}h[a]=T}}function hx(c,a){return c<a?-1:c>a?1:0}function Yb(c,a=1,h=!1){let m=1/0,x=1/0,T=-1/0,O=-1/0;const G=c[0];for(let De=0;De<G.length;De++){const Oe=G[De];(!De||Oe.x<m)&&(m=Oe.x),(!De||Oe.y<x)&&(x=Oe.y),(!De||Oe.x>T)&&(T=Oe.x),(!De||Oe.y>O)&&(O=Oe.y)}const W=Math.min(T-m,O-x);let q=W/2;const ce=new ux([],Gb);if(0===W)return new kt(m,x);for(let De=m;De<T;De+=W)for(let Oe=x;Oe<O;Oe+=W)ce.push(new Yg(De+q,Oe+q,q,c));let pe=function(De){let Oe=0,Ve=0,at=0;const It=De[0];for(let ii=0,Ot=It.length,Kt=Ot-1;ii<Ot;Kt=ii++){const ci=It[ii],li=It[Kt],Ji=ci.x*li.y-li.x*ci.y;Ve+=(ci.x+li.x)*Ji,at+=(ci.y+li.y)*Ji,Oe+=3*Ji}return new Yg(Ve/Oe,at/Oe,0,De)}(c),ve=ce.length;for(;ce.length;){const De=ce.pop();(De.d>pe.d||!pe.d)&&(pe=De,h&&console.log("found best %d after %d probes",Math.round(1e4*De.d)/1e4,ve)),De.max-pe.d<=a||(q=De.h/2,ce.push(new Yg(De.p.x-q,De.p.y-q,q,c)),ce.push(new Yg(De.p.x+q,De.p.y-q,q,c)),ce.push(new Yg(De.p.x-q,De.p.y+q,q,c)),ce.push(new Yg(De.p.x+q,De.p.y+q,q,c)),ve+=4)}return h&&(console.log(`num probes: ${ve}`),console.log(`best distance: ${pe.d}`)),pe.p}function Gb(c,a){return a.max-c.max}class Yg{constructor(a,h,m,x){this.p=new kt(a,h),this.h=m,this.d=function(T,O){let G=!1,W=1/0;for(let q=0;q<O.length;q++){const ce=O[q];for(let pe=0,ve=ce.length,De=ve-1;pe<ve;De=pe++){const Oe=ce[pe],Ve=ce[De];Oe.y>T.y!=Ve.y>T.y&&T.x<(Ve.x-Oe.x)*(T.y-Oe.y)/(Ve.y-Oe.y)+Oe.x&&(G=!G),W=Math.min(W,Lo(T,Oe,Ve))}}return(G?1:-1)*Math.sqrt(W)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}}const Gg=7,N_=Number.POSITIVE_INFINITY,r1=Math.sqrt(2);function s1(c,[a,h]){let m=0,x=0;if(h===N_){a<0&&(a=0);const T=a/r1;switch(c){case"top-right":case"top-left":x=T-Gg;break;case"bottom-right":case"bottom-left":x=-T+Gg;break;case"bottom":x=-a+Gg;break;case"top":x=a-Gg}switch(c){case"top-right":case"bottom-right":m=-T;break;case"top-left":case"bottom-left":m=T;break;case"left":m=a;break;case"right":m=-a}}else{switch(a=Math.abs(a),h=Math.abs(h),c){case"top-right":case"top-left":case"top":x=h-Gg;break;case"bottom-right":case"bottom-left":case"bottom":x=-h+Gg}switch(c){case"top-right":case"bottom-right":case"right":m=-a;break;case"top-left":case"bottom-left":case"left":m=a}}return[m,x]}function dx(c,a,h,m,x,T,O,G,W,q){c.createArrays(),c.tilePixelRatio=Yr/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const ce=c.layers[0].layout,pe=c.layers[0]._unevaluatedLayout._values,ve={};if("composite"===c.textSizeData.kind){const{minZoom:Ve,maxZoom:at}=c.textSizeData;ve.compositeTextSizes=[pe["text-size"].possiblyEvaluate(new ue(Ve),G),pe["text-size"].possiblyEvaluate(new ue(at),G)]}if("composite"===c.iconSizeData.kind){const{minZoom:Ve,maxZoom:at}=c.iconSizeData;ve.compositeIconSizes=[pe["icon-size"].possiblyEvaluate(new ue(Ve),G),pe["icon-size"].possiblyEvaluate(new ue(at),G)]}ve.layoutTextSize=pe["text-size"].possiblyEvaluate(new ue(W+1),G),ve.layoutIconSize=pe["icon-size"].possiblyEvaluate(new ue(W+1),G),ve.textMaxSize=pe["text-size"].possiblyEvaluate(new ue(18),G);const De="map"===ce.get("text-rotation-alignment")&&"point"!==ce.get("symbol-placement"),Oe=ce.get("text-size");for(const Ve of c.features){const at=ce.get("text-font").evaluate(Ve,{},G).join(","),It=Oe.evaluate(Ve,{},G),ii=ve.layoutTextSize.evaluate(Ve,{},G),Ot=(ve.layoutIconSize.evaluate(Ve,{},G),{horizontal:{},vertical:void 0}),Kt=Ve.text;let ci,li=[0,0];if(Kt){const wn=Kt.toString(),Kn=ce.get("text-letter-spacing").evaluate(Ve,{},G)*Vl,rn=ce.get("text-line-height").evaluate(Ve,{},G)*Vl,In=r0(wn)?Kn:0,An=ce.get("text-anchor").evaluate(Ve,{},G),Vn=ce.get("text-variable-anchor");if(!Vn){const br=ce.get("text-radial-offset").evaluate(Ve,{},G);li=br?s1(An,[br*Vl,N_]):ce.get("text-offset").evaluate(Ve,{},G).map(Zs=>Zs*Vl)}let er=De?"center":ce.get("text-justify").evaluate(Ve,{},G);const gn="point"===ce.get("symbol-placement"),_r=gn?ce.get("text-max-width").evaluate(Ve,{},G)*Vl:1/0,jr=br=>{c.allowVerticalPlacement&&Ed(wn)&&(Ot.vertical=Mc(Kt,a,h,x,at,_r,rn,An,br,In,li,eh.vertical,!0,ii,It))};if(!De&&Vn){const br="auto"===er?Vn.map(tr=>z_(tr)):[er];let Zs=!1;for(let tr=0;tr<br.length;tr++){const rs=br[tr];if(!Ot.horizontal[rs])if(Zs)Ot.horizontal[rs]=Ot.horizontal[0];else{const js=Mc(Kt,a,h,x,at,_r,rn,"center",rs,In,li,eh.horizontal,!1,ii,It);js&&(Ot.horizontal[rs]=js,Zs=1===js.positionedLines.length)}}jr("left")}else{if("auto"===er&&(er=z_(An)),gn||ce.get("text-writing-mode").indexOf("horizontal")>=0||!Ed(wn)){const br=Mc(Kt,a,h,x,at,_r,rn,An,er,In,li,eh.horizontal,!1,ii,It);br&&(Ot.horizontal[er]=br)}jr(gn?"left":er)}}let Ji=!1;if(Ve.icon&&Ve.icon.name){const wn=m[Ve.icon.name];wn&&(ci=Zy(x[Ve.icon.name],ce.get("icon-offset").evaluate(Ve,{},G),ce.get("icon-anchor").evaluate(Ve,{},G)),Ji=wn.sdf,void 0===c.sdfIcons?c.sdfIcons=wn.sdf:c.sdfIcons!==wn.sdf&&Zn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(wn.pixelRatio!==c.pixelRatio||0!==ce.get("icon-rotate").constantOr(1))&&(c.iconsNeedLinear=!0))}const Ui=o1(Ot.horizontal)||Ot.vertical;c.iconsInText||(c.iconsInText=!!Ui&&Ui.iconsInText),(Ui||ci)&&fx(c,Ve,Ot,ci,m,ve,ii,0,li,Ji,O,G,q)}T&&c.generateCollisionDebugBuffers(W,c.collisionBoxArray)}function z_(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fx(c,a,h,m,x,T,O,G,W,q,ce,pe,ve){let De=T.textMaxSize.evaluate(a,{},pe);void 0===De&&(De=O);const Oe=c.layers[0].layout,Ve=Oe.get("icon-offset").evaluate(a,{},pe),at=o1(h.horizontal)||h.vertical,It="globe"===ve.name,ii=Vl,Ot=O/ii,Kt=c.tilePixelRatio*De/ii,ci=(An=c.overscaling,c.zoom>18&&An>2&&(An>>=1),Math.max(Yr/(512*An),1)*Oe.get("symbol-spacing")),li=Oe.get("text-padding")*c.tilePixelRatio,Ji=Oe.get("icon-padding")*c.tilePixelRatio,Ui=hi(Oe.get("text-max-angle")),wn="map"===Oe.get("text-rotation-alignment")&&"point"!==Oe.get("symbol-placement"),Kn="map"===Oe.get("icon-rotation-alignment")&&"point"!==Oe.get("symbol-placement"),rn=Oe.get("symbol-placement"),In=ci/2;var An;const Vn=Oe.get("icon-text-fit");let er;m&&"none"!==Vn&&(c.allowVerticalPlacement&&h.vertical&&(er=qy(m,h.vertical,Vn,Oe.get("icon-text-fit-padding"),Ve,Ot)),at&&(m=qy(m,at,Vn,Oe.get("icon-text-fit-padding"),Ve,Ot)));const gn=(_r,jr,br)=>{if(jr.x<0||jr.x>=Yr||jr.y<0||jr.y>=Yr)return;let Zs=null;if(It){const{x:tr,y:rs,z:js}=ve.projectTilePoint(jr.x,jr.y,br);Zs={anchor:new tp(tr,rs,js,0,void 0),up:ve.upVector(br,jr.x,jr.y)}}!function(tr,rs,js,ja,qs,bs,Po,ea,ra,xo,Mo,Oo,bo,tl,Al,sc,wo,Oc,ac,gl,qa,oc,Ro,Mh,lc){const Kc=tr.addToLineVertexArray(rs,ja);let Dl,rh,Rc,Ul,Oh,qv,nv,Kh=0,Co=0,X_=0,Lx=0,Kv=-1,md=-1;const rp={};let Z_=yv("");const rv=js?js.anchor:rs;let rg=0,sv=0;if(void 0===ra._unevaluatedLayout.getValue("text-radial-offset")?[rg,sv]=ra.layout.get("text-offset").evaluate(qa,{},lc).map(Df=>Df*Vl):(rg=ra.layout.get("text-radial-offset").evaluate(qa,{},lc)*Vl,sv=N_),tr.allowVerticalPlacement&&qs.vertical){const Df=qs.vertical;if(Al)qv=Y_(Df),ea&&(nv=Y_(ea));else{const $d=ra.layout.get("text-rotate").evaluate(qa,{},lc)+90;Rc=Yv(xo,rv,rs,Mo,Oo,bo,Df,tl,$d,sc),ea&&(Ul=Yv(xo,rv,rs,Mo,Oo,bo,ea,Oc,$d))}}if(bs){const Df=ra.layout.get("icon-rotate").evaluate(qa,{},lc),$d="none"!==ra.layout.get("icon-text-fit"),av=lx(bs,Df,Ro,$d),Px=ea?lx(ea,Df,Ro,$d):void 0;rh=Yv(xo,rv,rs,Mo,Oo,bo,bs,Oc,Df),Kh=4*av.length;const Qb=tr.iconSizeData;let ag=null;"source"===Qb.kind?(ag=[Vd*ra.layout.get("icon-size").evaluate(qa,{},lc)],ag[0]>um&&Zn(`${tr.layerIds[0]}: Value for "icon-size" is >= ${Z0}. Reduce your "icon-size".`)):"composite"===Qb.kind&&(ag=[Vd*oc.compositeIconSizes[0].evaluate(qa,{},lc),Vd*oc.compositeIconSizes[1].evaluate(qa,{},lc)],(ag[0]>um||ag[1]>um)&&Zn(`${tr.layerIds[0]}: Value for "icon-size" is >= ${Z0}. Reduce your "icon-size".`)),tr.addSymbols(tr.icon,av,ag,gl,ac,qa,!1,js,rs,Kc.lineStartIndex,Kc.lineLength,-1,Mh,lc),Kv=tr.icon.placedSymbolArray.length-1,Px&&(Co=4*Px.length,tr.addSymbols(tr.icon,Px,ag,gl,ac,qa,eh.vertical,js,rs,Kc.lineStartIndex,Kc.lineLength,-1,Mh,lc),md=tr.icon.placedSymbolArray.length-1)}for(const Df in qs.horizontal){const $d=qs.horizontal[Df];Dl||(Z_=yv($d.text),Al?Oh=Y_($d):Dl=Yv(xo,rv,rs,Mo,Oo,bo,$d,tl,ra.layout.get("text-rotate").evaluate(qa,{},lc),sc));const av=1===$d.positionedLines.length;if(X_+=a1(tr,js,rs,$d,Po,ra,Al,qa,sc,Kc,qs.vertical?eh.horizontal:eh.horizontalOnly,av?Object.keys(qs.horizontal):[Df],rp,Kv,oc,Mh,lc),av)break}qs.vertical&&(Lx+=a1(tr,js,rs,qs.vertical,Po,ra,Al,qa,sc,Kc,eh.vertical,["vertical"],rp,md,oc,Mh,lc));let sg=-1;const q_=(Df,$d)=>Df?Math.max(Df,$d):$d;sg=q_(Oh,sg),sg=q_(qv,sg),sg=q_(nv,sg);const Af=sg>-1?1:0;tr.glyphOffsetArray.length>=Ap.MAX_GLYPHS&&Zn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==qa.sortKey&&tr.addToSortKeyRanges(tr.symbolInstances.length,qa.sortKey),tr.symbolInstances.emplaceBack(rv.x,rv.y,rv.z,rs.x,rs.y,rp.right>=0?rp.right:-1,rp.center>=0?rp.center:-1,rp.left>=0?rp.left:-1,rp.vertical>=0?rp.vertical:-1,Kv,md,Z_,void 0!==Dl?Dl:tr.collisionBoxArray.length,void 0!==Dl?Dl+1:tr.collisionBoxArray.length,void 0!==Rc?Rc:tr.collisionBoxArray.length,void 0!==Rc?Rc+1:tr.collisionBoxArray.length,void 0!==rh?rh:tr.collisionBoxArray.length,void 0!==rh?rh+1:tr.collisionBoxArray.length,Ul||tr.collisionBoxArray.length,Ul?Ul+1:tr.collisionBoxArray.length,Mo,X_,Lx,Kh,Co,Af,0,rg,sv,sg)}(c,jr,Zs,_r,h,m,x,er,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,li,wn,W,0,Ji,Kn,Ve,a,T,q,ce,pe)};if("line"===rn)for(const _r of e1(a.geometry,0,0,Yr,Yr)){const jr=ox(_r,ci,Ui,h.vertical||at,m,ii,Kt,c.overscaling,Yr);for(const br of jr)at&&G_(c,at.text,In,br)||gn(_r,br,pe)}else if("line-center"===rn){for(const _r of a.geometry)if(_r.length>1){const jr=Qy(_r,Ui,h.vertical||at,m,ii,Kt);jr&&gn(_r,jr,pe)}}else if("Polygon"===a.type)for(const _r of Ig(a.geometry,0)){const jr=Yb(_r,16);gn(_r[0],new tp(jr.x,jr.y,0,0,void 0),pe)}else if("LineString"===a.type)for(const _r of a.geometry)gn(_r,new tp(_r[0].x,_r[0].y,0,0,void 0),pe);else if("Point"===a.type)for(const _r of a.geometry)for(const jr of _r)gn([jr],new tp(jr.x,jr.y,0,0,void 0),pe)}const Z0=255,um=Z0*Vd;function a1(c,a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe,Ve,at){const It=function(Kt,ci,li,Ji,Ui,wn,Kn,rn){const In=[];if(0===ci.positionedLines.length)return In;const An=Ji.layout.get("text-rotate").evaluate(wn,{})*Math.PI/180,Vn=function(br){const Zs=br[0],tr=br[1],rs=Zs*tr;return rs>0?[Zs,-tr]:rs<0?[-Zs,tr]:0===Zs?[tr,Zs]:[tr,-Zs]}(li);let er=Math.abs(ci.top-ci.bottom);for(const br of ci.positionedLines)er-=br.lineOffset;const gn=ci.positionedLines.length,_r=er/gn;let jr=ci.top-li[1];for(let br=0;br<gn;++br){const Zs=ci.positionedLines[br];jr=zb(ci,_r,jr,br);for(const tr of Zs.positionedGlyphs){if(!tr.rect)continue;const rs=tr.rect||{};let js=Gy+1,ja=!0,qs=1,bs=0;if(tr.imageName){const Ro=Kn[tr.imageName];if(!Ro)continue;if(Ro.sdf){Zn("SDF images are not supported in formatted text and will be ignored.");continue}ja=!1,qs=Ro.pixelRatio,js=Ih/qs}const Po=(Ui||rn)&&tr.vertical,ea=tr.metrics.advance*tr.scale/2,ra=tr.metrics,xo=tr.rect;if(null===xo)continue;rn&&ci.verticalizable&&(bs=tr.imageName?ea-tr.metrics.width*tr.scale/2:0);const Mo=Ui?[tr.x+ea,tr.y]:[0,0];let Oo=[0,0],bo=[0,0],tl=!1;Ui||(Po?(bo=[tr.x+ea+Vn[0],tr.y+Vn[1]-bs],tl=!0):Oo=[tr.x+ea+li[0],tr.y+li[1]-bs]);const Al=xo.w*tr.scale/(qs*(tr.localGlyph?Tf:1)),sc=xo.h*tr.scale/(qs*(tr.localGlyph?Tf:1));let wo,Oc,ac,gl;if(Po){const Ro=tr.y-jr,Mh=new kt(-ea,ea-Ro),lc=-Math.PI/2,Kc=new kt(...bo);wo=new kt(-ea+Oo[0],Oo[1]),wo._rotateAround(lc,Mh)._add(Kc),wo.x+=-Ro+ea,wo.y-=(ra.left-js)*tr.scale;const Dl=tr.imageName?ra.advance*tr.scale:Vl*tr.scale,rh=String.fromCharCode(tr.glyph);V0(rh)?wo.x+=(1-js)*tr.scale:pd(rh)?wo.x+=Dl-ra.height*tr.scale+(-js-1)*tr.scale:wo.x+=tr.imageName||ra.width+2*js===xo.w&&ra.height+2*js===xo.h?(Dl-sc)/2:(Dl-(ra.height+2*js)*tr.scale)/2,Oc=new kt(wo.x,wo.y-Al),ac=new kt(wo.x+sc,wo.y),gl=new kt(wo.x+sc,wo.y-Al)}else{const Ro=(ra.left-js)*tr.scale-ea+Oo[0],Mh=(-ra.top-js)*tr.scale+Oo[1],lc=Ro+Al,Kc=Mh+sc;wo=new kt(Ro,Mh),Oc=new kt(lc,Mh),ac=new kt(Ro,Kc),gl=new kt(lc,Kc)}if(An){let Ro;Ro=Ui?new kt(0,0):tl?new kt(Vn[0],Vn[1]):new kt(li[0],li[1]),wo._rotateAround(An,Ro),Oc._rotateAround(An,Ro),ac._rotateAround(An,Ro),gl._rotateAround(An,Ro)}const qa=new kt(0,0),oc=new kt(0,0);In.push({tl:wo,tr:Oc,bl:ac,br:gl,tex:rs,writingMode:ci.writingMode,glyphOffset:Mo,sectionIndex:tr.sectionIndex,isSDF:ja,pixelOffsetTL:qa,pixelOffsetBR:oc,minFontScaleX:0,minFontScaleY:0})}}return In}(0,m,W,T,O,G,x,c.allowVerticalPlacement),ii=c.textSizeData;let Ot=null;"source"===ii.kind?(Ot=[Vd*T.layout.get("text-size").evaluate(G,{},at)],Ot[0]>um&&Zn(`${c.layerIds[0]}: Value for "text-size" is >= ${Z0}. Reduce your "text-size".`)):"composite"===ii.kind&&(Ot=[Vd*Oe.compositeTextSizes[0].evaluate(G,{},at),Vd*Oe.compositeTextSizes[1].evaluate(G,{},at)],(Ot[0]>um||Ot[1]>um)&&Zn(`${c.layerIds[0]}: Value for "text-size" is >= ${Z0}. Reduce your "text-size".`)),c.addSymbols(c.text,It,Ot,W,O,G,ce,a,h,q.lineStartIndex,q.lineLength,De,Ve,at);for(const Kt of pe)ve[Kt]=c.text.placedSymbolArray.length-1;return 4*It.length}function o1(c){for(const a in c)return c[a];return null}function Yv(c,a,h,m,x,T,O,G,W,q){let ce=O.top,pe=O.bottom,ve=O.left,De=O.right;const Oe=O.collisionPadding;if(Oe&&(ve-=Oe[0],ce-=Oe[1],De+=Oe[2],pe+=Oe[3]),W){const Ve=new kt(ve,ce),at=new kt(De,ce),It=new kt(ve,pe),ii=new kt(De,pe),Ot=hi(W);let Kt=new kt(0,0);q&&(Kt=new kt(q[0],q[1])),Ve._rotateAround(Ot,Kt),at._rotateAround(Ot,Kt),It._rotateAround(Ot,Kt),ii._rotateAround(Ot,Kt),ve=Math.min(Ve.x,at.x,It.x,ii.x),De=Math.max(Ve.x,at.x,It.x,ii.x),ce=Math.min(Ve.y,at.y,It.y,ii.y),pe=Math.max(Ve.y,at.y,It.y,ii.y)}return c.emplaceBack(a.x,a.y,a.z,h.x,h.y,ve,ce,De,pe,G,m,x,T),c.length-1}function Y_(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const a=c.bottom-c.top;return a>0?Math.max(10,a):null}function G_(c,a,h,m){const x=c.compareText;if(a in x){const T=x[a];for(let O=T.length-1;O>=0;O--)if(m.dist(T[O])<h)return!0}else x[a]=[];return x[a].push(m),!1}function H_(c,a){const h=c.fovAboveCenter,m=c.elevation?c.elevation.getMinElevationBelowMSL()*a:0,x=(c._camera.position[2]*c.worldSize-m)/Math.cos(c._pitch),T=Math.sin(h)*x/Math.sin(Math.max(Math.PI/2-c._pitch-h,.01)),O=Math.sin(c._pitch)*T+x;return Math.min(1.01*O,x*(1/c._horizonShift))}function hm(c,a){if(!a.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:a};const h=Math.pow(2,-c.z),m=c.x*h,x=(c.x+1)*h,T=c.y*h,O=(c.y+1)*h,G=Sh(m),W=Sh(x),q=Ac(T),ce=Ac(O),pe=a.project(G,q),ve=a.project(W,q),De=a.project(W,ce),Oe=a.project(G,ce);let Ve=Math.min(pe.x,ve.x,De.x,Oe.x),at=Math.min(pe.y,ve.y,De.y,Oe.y),It=Math.max(pe.x,ve.x,De.x,Oe.x),ii=Math.max(pe.y,ve.y,De.y,Oe.y);const Ot=h/16;function Kt(li,Ji,Ui,wn,Kn,rn){const In=(Ui+Kn)/2,An=(wn+rn)/2,Vn=a.project(Sh(In),Ac(An)),er=Math.max(0,Ve-Vn.x,at-Vn.y,Vn.x-It,Vn.y-ii);Ve=Math.min(Ve,Vn.x),It=Math.max(It,Vn.x),at=Math.min(at,Vn.y),ii=Math.max(ii,Vn.y),er>Ot&&(Kt(li,Vn,Ui,wn,In,An),Kt(Vn,Ji,In,An,Kn,rn))}Kt(pe,ve,m,T,x,T),Kt(ve,De,x,T,x,O),Kt(De,Oe,x,O,m,O),Kt(Oe,pe,m,O,m,T),Ve-=Ot,at-=Ot,It+=Ot,ii+=Ot;const ci=1/Math.max(It-Ve,ii-at);return{scale:ci,x:Ve*ci,y:at*ci,x2:It*ci,y2:ii*ci,projection:a}}const px=Do(new Float32Array(16));class ip{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,h){return{x:0,y:0,z:0}}unproject(a,h){return new Ua(0,0)}projectTilePoint(a,h,m){return{x:a,y:h,z:0}}locationPoint(a,h,m=!0){return a._coordinatePoint(a.locationCoordinate(h),m)}pixelsPerMeter(a,h){return $h(1,a)*h}pixelSpaceConversion(a,h,m){return 1}farthestPixelDistance(a){return H_(a,a.pixelsPerMeter)}pointCoordinate(a,h,m,x){const T=a.horizonLineFromTop(!1),O=new kt(h,Math.max(T,m));return a.rayIntersectionCoordinate(a.pointRayIntersection(O,x))}pointCoordinate3D(a,h,m){const x=new kt(h,m);if(a.elevation)return a.elevation.pointCoordinate(x);{const T=this.pointCoordinate(a,x.x,x.y,0);return[T.x,T.y,T.z]}}isPointAboveHorizon(a,h){if(a.elevation)return!this.pointCoordinate3D(a,h.x,h.y);const m=a.horizonLineFromTop();return h.y<m}createInversionMatrix(a,h){return px}createTileMatrix(a,h,m){let x,T,O;const G=m.canonical,W=Do(new Float64Array(16));if(this.isReprojectedInTileSpace){const q=hm(G,this);x=1,T=q.x+m.wrap*q.scale,O=q.y,$o(W,W,[x/q.scale,x/q.scale,a.pixelsPerMeter/h])}else x=h/a.zoomScale(G.z),T=(G.x+Math.pow(2,G.z)*m.wrap)*x,O=G.y*x;return cd(W,W,[T,O,0]),$o(W,W,[x/Yr,x/Yr,1]),W}upVector(a,h,m){return[0,0,1]}upVectorScale(a,h,m){return{metersToTile:1}}}class mx extends ip{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[h,m]=this.parallels=a.parallels||[29.5,45.5],x=Math.sin(hi(h));this.n=(x+Math.sin(hi(m)))/2,this.c=1+x*(2*this.n-x),this.r0=Math.sqrt(this.c)/this.n}project(a,h){const{n:m,c:x,r0:T}=this,O=hi(a-this.center[0]),G=hi(h),W=Math.sqrt(x-2*m*Math.sin(G))/m;return{x:W*Math.sin(O*m),y:W*Math.cos(O*m)-T,z:0}}unproject(a,h){const{n:m,c:x,r0:T}=this,O=T+h;let G=Math.atan2(a,Math.abs(O))*Math.sign(O);O*m<0&&(G-=Math.PI*Math.sign(a)*Math.sign(O));const W=hi(this.center[0])*m;G=_n(G,-Math.PI-W,Math.PI-W);const q=qi(Dt(G/m)+this.center[0],-180,180),ce=Math.asin(qi((x-(a*a+O*O)*m*m)/(2*m),-1,1)),pe=qi(Dt(ce),-Dc,Dc);return new Ua(q,pe)}}const dm=1.340264,q0=-.081106,Hg=893e-6,K0=.003796,Gu=Math.sqrt(3)/2;class V_ extends ip{project(a,h){h=h/180*Math.PI,a=a/180*Math.PI;const m=Math.asin(Gu*Math.sin(h)),x=m*m,T=x*x*x;return{x:.5*(a*Math.cos(m)/(Gu*(dm+3*q0*x+T*(7*Hg+9*K0*x)))/Math.PI+.5),y:1-.5*(m*(dm+q0*x+T*(Hg+K0*x))/Math.PI+1),z:0}}unproject(a,h){a=(2*a-.5)*Math.PI;let m=h=(2*(1-h)-1)*Math.PI,x=m*m,T=x*x*x;for(let ce,pe,ve,De=0;De<12&&(pe=m*(dm+q0*x+T*(Hg+K0*x))-h,ve=dm+3*q0*x+T*(7*Hg+9*K0*x),ce=pe/ve,m=qi(m-ce,-Math.PI/3,Math.PI/3),x=m*m,T=x*x*x,!(Math.abs(ce)<1e-12));++De);const O=Gu*a*(dm+3*q0*x+T*(7*Hg+9*K0*x))/Math.cos(m),G=Math.asin(Math.sin(m)/Gu),W=qi(180*O/Math.PI,-180,180),q=qi(180*G/Math.PI,-Dc,Dc);return new Ua(W,q)}}class gx extends ip{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,h){return{x:.5+a/360,y:.5-h/360,z:0}}unproject(a,h){const m=360*(a-.5),x=qi(360*(.5-h),-Dc,Dc);return new Ua(m,x)}}const Vg=Math.PI/2;function Gv(c){return Math.tan((Vg+c)/2)}class vx extends ip{constructor(a){super(a),this.center=a.center||[0,30];const[h,m]=this.parallels=a.parallels||[30,30];let x=hi(h),T=hi(m);this.southernCenter=x+T<0,this.southernCenter&&(x=-x,T=-T);const O=Math.cos(x),G=Gv(x);this.n=x===T?Math.sin(x):Math.log(O/Math.cos(T))/Math.log(Gv(T)/G),this.f=O*Math.pow(Gv(x),this.n)/this.n}project(a,h){h=hi(h),this.southernCenter&&(h=-h),a=hi(a-this.center[0]);const m=1e-6,{n:x,f:T}=this;T>0?h<-Vg+m&&(h=-Vg+m):h>Vg-m&&(h=Vg-m);const O=T/Math.pow(Gv(h),x);let G=O*Math.sin(x*a),W=T-O*Math.cos(x*a);return G=.5*(G/Math.PI+.5),W=.5*(W/Math.PI+.5),{x:G,y:this.southernCenter?W:1-W,z:0}}unproject(a,h){a=(2*a-.5)*Math.PI,this.southernCenter&&(h=1-h),h=(2*(1-h)-.5)*Math.PI;const{n:m,f:x}=this,T=x-h,O=Math.sign(T),G=Math.sign(m)*Math.sqrt(a*a+T*T);let W=Math.atan2(a,Math.abs(T))*O;T*m<0&&(W-=Math.PI*Math.sign(a)*O);const q=qi(Dt(W/m)+this.center[0],-180,180),ce=qi(Dt(2*Math.atan(Math.pow(x/G,1/m))-Vg),-Dc,Dc);return new Ua(q,this.southernCenter?-ce:ce)}}class U_ extends ip{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,h){return{x:zd(a),y:hd(h),z:0}}unproject(a,h){const m=Sh(a),x=Ac(h);return new Ua(m,x)}}const _x=hi(Dc);class Hv extends ip{project(a,h){const m=(h=hi(h))*h,x=m*m;return{x:.5*((a=hi(a))*(.8707-.131979*m+x*(x*(.003971*m-.001529*x)-.013791))/Math.PI+.5),y:1-.5*(h*(1.007226+m*(.015085+x*(.028874*m-.044475-.005916*x)))/Math.PI+1),z:0}}unproject(a,h){a=(2*a-.5)*Math.PI;let m=h=(2*(1-h)-1)*Math.PI,x=25,T=0,O=m*m;do{O=m*m;const q=O*O;T=(m*(1.007226+O*(.015085+q*(.028874*O-.044475-.005916*q)))-h)/(1.007226+O*(.045255+q*(.259866*O-.311325-.005916*11*q))),m=qi(m-T,-_x,_x)}while(Math.abs(T)>1e-6&&--x>0);O=m*m;const G=qi(Dt(a/(.8707+O*(O*(O*O*O*(.003971-.001529*O)-.013791)-.131979))),-180,180),W=Dt(m);return new Ua(G,W)}}const yx=hi(Dc);class Hb extends ip{project(a,h){h=hi(h),a=hi(a);const m=Math.cos(h),x=2/Math.PI,T=Math.acos(m*Math.cos(a/2)),O=Math.sin(T)/T,G=.5*(a*x+2*m*Math.sin(a/2)/O)||0,W=.5*(h+Math.sin(h)/O)||0;return{x:.5*(G/Math.PI+.5),y:1-.5*(W/Math.PI+1),z:0}}unproject(a,h){let m=a=(2*a-.5)*Math.PI,x=h=(2*(1-h)-1)*Math.PI,T=25;const O=1e-6;let G=0,W=0;do{const q=Math.cos(x),ce=Math.sin(x),pe=2*ce*q,ve=ce*ce,De=q*q,Oe=Math.cos(m/2),Ve=Math.sin(m/2),at=2*Oe*Ve,It=Ve*Ve,ii=1-De*Oe*Oe,Ot=ii?1/ii:0,Kt=ii?Math.acos(q*Oe)*Math.sqrt(1/ii):0,ci=.5*(2*Kt*q*Ve+2*m/Math.PI)-a,li=.5*(Kt*ce+x)-h,Ji=.5*Ot*(De*It+Kt*q*Oe*ve)+1/Math.PI,Ui=Ot*(at*pe/4-Kt*ce*Ve),wn=.125*Ot*(pe*Ve-Kt*ce*De*at),Kn=.5*Ot*(ve*Oe+Kt*It*q)+.5,rn=Ui*wn-Kn*Ji;G=(li*Ui-ci*Kn)/rn,W=(ci*wn-li*Ji)/rn,m=qi(m-G,-Math.PI,Math.PI),x=qi(x-W,-yx,yx)}while((Math.abs(G)>O||Math.abs(W)>O)&&--T>0);return new Ua(Dt(m),Dt(x))}}class Vv extends ip{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(hi(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,h){const{scale:m,cosPhi:x}=this;return{x:hi(a)*x*m+.5,y:-Math.sin(hi(h))/x*m+.5,z:0}}unproject(a,h){const{scale:m,cosPhi:x}=this,T=-(h-.5)/m,O=qi(Dt((a-.5)/m)/x,-180,180),G=Math.asin(qi(T*x,-1,1)),W=qi(Dt(G),-Dc,Dc);return new Ua(O,W)}}class Uv extends U_{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,h,m){const x=Bm(a,h,m);return Xo(x,x,gp(Sc(m))),{x:x[0],y:x[1],z:x[2]}}locationPoint(a,h){const m=$f(h.lat,h.lng),x=El([],m),T=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(h),a._centerAltitude):a._centerAltitude;Rd(m,m,x,$h(1,0)*Yr*T);const O=Do(new Float64Array(16));return Hf(O,a.pixelMatrix,a.globeMatrix),Xo(m,m,O),new kt(m[0],m[1])}pixelsPerMeter(a,h){return $h(1,0)*h}pixelSpaceConversion(a,h,m){const x=$h(1,a)*h,T=Us($h(1,45)*h,x,m);return this.pixelsPerMeter(a,h)/T}createTileMatrix(a,h,m){const x=Jp(Sc(m.canonical));return Hf(new Float64Array(16),a.globeMatrix,x)}createInversionMatrix(a,h){const{center:m}=a,x=gp(Sc(h));return Im(x,x,hi(m.lng)),_g(x,x,hi(m.lat)),$o(x,x,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(x)}pointCoordinate(a,h,m,x){return Xc(a,h,m,!0)||new _p(0,0)}pointCoordinate3D(a,h,m){const x=this.pointCoordinate(a,h,m,0);return[x.x,x.y,x.z]}isPointAboveHorizon(a,h){return!Xc(a,h.x,h.y,!1)}farthestPixelDistance(a){const h=function(x,T){const O=x.cameraToCenterDistance,G=x._centerAltitude*T,W=x._camera,q=x._camera.forward(),ce=Uh([],hu([],q,-O),[0,0,G]),pe=x.worldSize/(2*Math.PI),ve=[0,0,-pe],De=x.width/x.height,Oe=Math.tan(x.fovAboveCenter),Ve=hu([],W.up(),Oe),at=hu([],W.right(),Oe*De),It=El([],Uh([],Uh([],q,Ve),at)),ii=[];let Ot;if(new _f(ce,It).closestPointOnSphere(ve,pe,ii)){const Kt=Uh([],ii,ve),ci=jh([],Kt,ce);Ot=Math.cos(x.fovAboveCenter)*dp(ci)}else{const Kt=jh([],ce,ve),ci=jh([],ve,ce);El(ci,ci);const li=dp(Kt)-pe;Ot=Math.sqrt(li*(li+2*pe));const Ji=Math.acos(Ot/(pe+li))-Math.acos(Pu(q,ci));Ot*=Math.cos(Ji)}return 1.01*Ot}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),m=pl(a.zoom);if(m>0){const x=H_(a,$h(1,a.center.lat)*a.worldSize),T=a.worldSize/(2*Math.PI),O=Math.max(a.width,a.height)/a.worldSize*Math.PI;return Us(h,x+T*(1-Math.cos(O)),Math.pow(m,10))}return h}upVector(a,h,m){return Bm(h,m,a,1)}upVectorScale(a){return{metersToTile:du(Nm(Sc(a)))}}}function J0(c){const a=c.parallels,h=!!a&&Math.abs(a[0]+a[1])<.01;switch(c.name){case"mercator":return new U_(c);case"equirectangular":return new gx(c);case"naturalEarth":return new Hv(c);case"equalEarth":return new V_(c);case"winkelTripel":return new Hb(c);case"albers":return h?new Vv(c):new mx(c);case"lambertConformalConic":return h?new Vv(c):new vx(c);case"globe":return new Uv(c)}throw new Error(`Invalid projection name: ${c.name}`)}const j_=Lt.types,xx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jv(c,a,h,m,x,T,O,G,W,q,ce,pe,ve){const De=G?Math.min(um,Math.round(G[0])):0,Oe=G?Math.min(um,Math.round(G[1])):0;c.emplaceBack(a,h,Math.round(32*m),Math.round(32*x),T,O,(De<<1)+(W?1:0),Oe,16*q,16*ce,256*pe,256*ve)}function Ug(c,a,h,m,x,T,O){c.emplaceBack(a,h,m,x,T,O)}function jg(c,a,h,m,x){c.emplaceBack(a,h,m,x),c.emplaceBack(a,h,m,x),c.emplaceBack(a,h,m,x),c.emplaceBack(a,h,m,x)}function l1(c){for(const a of c.sections)if(Mu(a.text))return!0;return!1}class W_{constructor(a){this.layoutVertexArray=new Ln,this.indexArray=new zr,this.programConfigurations=a,this.segments=new Ao,this.dynamicLayoutVertexArray=new Dn,this.opacityVertexArray=new Rr,this.placedSymbolArray=new ro,this.globeExtVertexArray=new Hn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(a,h,m,x){this.isEmpty()||(m&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Rv.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,ml.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,xx,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,Sl.members,!0)),this.opacityVertexBuffer.itemSize=1),(m||x)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}kr(W_,"SymbolBuffers");class Wv{constructor(a,h,m){this.layoutVertexArray=new a,this.layoutAttributes=h,this.indexArray=new m,this.segments=new Ao,this.collisionVertexArray=new xs,this.collisionVertexArrayExt=new cs}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,G0.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,Ry.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}kr(Wv,"CollisionBuffers");class Ap{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(O=>O.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Do([]),this.placementViewportMatrix=Do([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=M_(this.zoom,h["text-size"]),this.iconSizeData=M_(this.zoom,h["icon-size"]);const m=this.layers[0].layout,x=m.get("symbol-sort-key"),T=m.get("symbol-z-order");this.canOverlap=m.get("text-allow-overlap")||m.get("icon-allow-overlap")||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==T&&void 0!==x.constantOr(1),this.sortFeaturesByY=("viewport-y"===T||"auto"===T&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=m.get("text-writing-mode").map(O=>eh[O]),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.sourceID=a.sourceID,this.projection=a.projection}createArrays(){this.text=new W_(new Eh(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new W_(new Eh(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new cu,this.lineVertexArray=new uu,this.symbolInstances=new to}calculateGlyphDependencies(a,h,m,x,T){for(let O=0;O<a.length;O++)if(h[a.charCodeAt(O)]=!0,x&&T){const G=Lg[a.charAt(O)];G&&(h[G.charCodeAt(0)]=!0)}}populate(a,h,m,x){const T=this.layers[0],O=T.layout,G="globe"===this.projection.name,W=O.get("text-font"),q=O.get("text-field"),ce=O.get("icon-image"),pe=("constant"!==q.value.kind||q.value.value instanceof ss&&!q.value.value.isEmpty()||q.value.value.toString().length>0)&&("constant"!==W.value.kind||W.value.value.length>0),ve="constant"!==ce.value.kind||!!ce.value.value||Object.keys(ce.parameters).length>0,De=O.get("symbol-sort-key");if(this.features=[],!pe&&!ve)return;const Oe=h.iconDependencies,Ve=h.glyphDependencies,at=h.availableImages,It=new ue(this.zoom);for(const{feature:ii,id:Ot,index:Kt,sourceLayerIndex:ci}of a){const li=T._featureFilter.needGeometry,Ji=Fu(ii,li);if(!T._featureFilter.filter(It,Ji,m))continue;if(li||(Ji.geometry=xf(ii,m,x)),G&&1!==ii.type&&m.z<=5){const rn=Ji.geometry,In=.98078528056,An=(Vn,er)=>Pu(Bm(Vn.x,Vn.y,m,1),Bm(er.x,er.y,m,1))<In;for(let Vn=0;Vn<rn.length;Vn++)rn[Vn]=Ev(rn[Vn],An)}let Ui,wn;if(pe){const rn=T.getValueAndResolveTokens("text-field",Ji,m,at),In=ss.factory(rn);l1(In)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===V()||this.hasRTLText&&re.isParsed())&&(Ui=O_(In,T,Ji))}if(ve){const rn=T.getValueAndResolveTokens("icon-image",Ji,m,at);wn=rn instanceof Ta?rn:Ta.fromString(rn)}if(!Ui&&!wn)continue;const Kn=this.sortFeaturesByKey?De.evaluate(Ji,{},m):void 0;if(this.features.push({id:Ot,text:Ui,icon:wn,index:Kt,sourceLayerIndex:ci,geometry:Ji.geometry,properties:ii.properties,type:j_[ii.type],sortKey:Kn}),wn&&(Oe[wn.name]=!0),Ui){const rn=W.evaluate(Ji,{},m).join(","),In="map"===O.get("text-rotation-alignment")&&"point"!==O.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(eh.vertical)>=0;for(const An of Ui.sections)if(An.image)Oe[An.image.name]=!0;else{const Vn=Ed(Ui.toString()),er=An.fontStack||rn,gn=Ve[er]=Ve[er]||{};this.calculateGlyphDependencies(An.text,gn,In,this.allowVerticalPlacement,Vn)}}}"line"===O.get("symbol-placement")&&(this.features=function(ii){const Ot={},Kt={},ci=[];let li=0;function Ji(rn){ci.push(ii[rn]),li++}function Ui(rn,In,An){const Vn=Kt[rn];return delete Kt[rn],Kt[In]=Vn,ci[Vn].geometry[0].pop(),ci[Vn].geometry[0]=ci[Vn].geometry[0].concat(An[0]),Vn}function wn(rn,In,An){const Vn=Ot[In];return delete Ot[In],Ot[rn]=Vn,ci[Vn].geometry[0].shift(),ci[Vn].geometry[0]=An[0].concat(ci[Vn].geometry[0]),Vn}function Kn(rn,In,An){const Vn=An?In[0][In[0].length-1]:In[0][0];return`${rn}:${Vn.x}:${Vn.y}`}for(let rn=0;rn<ii.length;rn++){const In=ii[rn],An=In.geometry,Vn=In.text?In.text.toString():null;if(!Vn){Ji(rn);continue}const er=Kn(Vn,An),gn=Kn(Vn,An,!0);if(er in Kt&&gn in Ot&&Kt[er]!==Ot[gn]){const _r=wn(er,gn,An),jr=Ui(er,gn,ci[_r].geometry);delete Ot[er],delete Kt[gn],Kt[Kn(Vn,ci[jr].geometry,!0)]=jr,ci[_r].geometry=null}else er in Kt?Ui(er,gn,An):gn in Ot?wn(er,gn,An):(Ji(rn),Ot[er]=li-1,Kt[gn]=li-1)}return ci.filter(rn=>rn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ii,Ot)=>ii.sortKey-Ot.sortKey)}update(a,h,m,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,h,this.layers,m,x),this.icon.programConfigurations.updatePaintArrays(a,h,this.layers,m,x))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=J0(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,h){const m=this.lineVertexArray.length;if(void 0!==a.segment)for(const{x,y:T}of h)this.lineVertexArray.emplaceBack(x,T);return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(a,h,m,x,T,O,G,W,q,ce,pe,ve,De,Oe){const Ve=a.indexArray,at=a.layoutVertexArray,It=a.globeExtVertexArray,ii=a.segments.prepareSegment(4*h.length,at,Ve,this.canOverlap?O.sortKey:void 0),Ot=this.glyphOffsetArray.length,Kt=ii.vertexLength,ci=this.allowVerticalPlacement&&G===eh.vertical?Math.PI/2:0,li=O.text&&O.text.sections;for(let Ui=0;Ui<h.length;Ui++){const{tl:wn,tr:Kn,bl:rn,br:In,tex:An,pixelOffsetTL:Vn,pixelOffsetBR:er,minFontScaleX:gn,minFontScaleY:_r,glyphOffset:jr,isSDF:br,sectionIndex:Zs}=h[Ui],tr=ii.vertexLength,rs=jr[1];if(jv(at,q.x,q.y,wn.x,rs+wn.y,An.x,An.y,m,br,Vn.x,Vn.y,gn,_r),jv(at,q.x,q.y,Kn.x,rs+Kn.y,An.x+An.w,An.y,m,br,er.x,Vn.y,gn,_r),jv(at,q.x,q.y,rn.x,rs+rn.y,An.x,An.y+An.h,m,br,Vn.x,er.y,gn,_r),jv(at,q.x,q.y,In.x,rs+In.y,An.x+An.w,An.y+An.h,m,br,er.x,er.y,gn,_r),W){const{x:js,y:ja,z:qs}=W.anchor,[bs,Po,ea]=W.up;Ug(It,js,ja,qs,bs,Po,ea),Ug(It,js,ja,qs,bs,Po,ea),Ug(It,js,ja,qs,bs,Po,ea),Ug(It,js,ja,qs,bs,Po,ea),jg(a.dynamicLayoutVertexArray,js,ja,qs,ci)}else jg(a.dynamicLayoutVertexArray,q.x,q.y,q.z,ci);Ve.emplaceBack(tr,tr+1,tr+2),Ve.emplaceBack(tr+1,tr+2,tr+3),ii.vertexLength+=4,ii.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(jr[0]),Ui!==h.length-1&&Zs===h[Ui+1].sectionIndex||a.programConfigurations.populatePaintArrays(at.length,O,O.index,{},De,Oe,li&&li[Zs])}const Ji=W?W.anchor:q;a.placedSymbolArray.emplaceBack(Ji.x,Ji.y,Ji.z,q.x,q.y,Ot,this.glyphOffsetArray.length-Ot,Kt,ce,pe,q.segment,m?m[0]:0,m?m[1]:0,x[0],x[1],G,0,!1,0,ve,0)}_commitLayoutVertex(a,h,m,x,T,O,G){a.emplaceBack(h,m,x,T,O,Math.round(G.x),Math.round(G.y))}_addCollisionDebugVertices(a,h,m,x,T,O,G){const W=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),q=W.vertexLength,ce=G.tileAnchorX,pe=G.tileAnchorY;for(let De=0;De<4;De++)m.collisionVertexArray.emplaceBack(0,0,0,0);m.collisionVertexArrayExt.emplaceBack(h,-a.padding,-a.padding),m.collisionVertexArrayExt.emplaceBack(h,a.padding,-a.padding),m.collisionVertexArrayExt.emplaceBack(h,a.padding,a.padding),m.collisionVertexArrayExt.emplaceBack(h,-a.padding,a.padding),this._commitLayoutVertex(m.layoutVertexArray,x,T,O,ce,pe,new kt(a.x1,a.y1)),this._commitLayoutVertex(m.layoutVertexArray,x,T,O,ce,pe,new kt(a.x2,a.y1)),this._commitLayoutVertex(m.layoutVertexArray,x,T,O,ce,pe,new kt(a.x2,a.y2)),this._commitLayoutVertex(m.layoutVertexArray,x,T,O,ce,pe,new kt(a.x1,a.y2)),W.vertexLength+=4;const ve=m.indexArray;ve.emplaceBack(q,q+1),ve.emplaceBack(q+1,q+2),ve.emplaceBack(q+2,q+3),ve.emplaceBack(q+3,q),W.primitiveLength+=4}_addTextDebugCollisionBoxes(a,h,m,x,T,O){for(let G=x;G<T;G++){const W=m.get(G),q=this.getSymbolInstanceTextSize(a,O,h,G);this._addCollisionDebugVertices(W,q,this.textCollisionBox,W.projectedAnchorX,W.projectedAnchorY,W.projectedAnchorZ,O)}}_addIconDebugCollisionBoxes(a,h,m,x,T,O){for(let G=x;G<T;G++){const W=m.get(G),q=this.getSymbolInstanceIconSize(a,h,O.placedIconSymbolIndex);this._addCollisionDebugVertices(W,q,this.iconCollisionBox,W.projectedAnchorX,W.projectedAnchorY,W.projectedAnchorZ,O)}}generateCollisionDebugBuffers(a,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wv(Sr,Lv.members,Wo),this.iconCollisionBox=new Wv(Sr,Lv.members,Wo);const m=Qf(this.iconSizeData,a),x=Qf(this.textSizeData,a);for(let T=0;T<this.symbolInstances.length;T++){const O=this.symbolInstances.get(T);this._addTextDebugCollisionBoxes(x,a,h,O.textBoxStartIndex,O.textBoxEndIndex,O),this._addTextDebugCollisionBoxes(x,a,h,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O),this._addIconDebugCollisionBoxes(m,a,h,O.iconBoxStartIndex,O.iconBoxEndIndex,O),this._addIconDebugCollisionBoxes(m,a,h,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O)}}getSymbolInstanceTextSize(a,h,m,x){const T=this.text.placedSymbolArray.get(h.rightJustifiedTextSymbolIndex>=0?h.rightJustifiedTextSymbolIndex:h.centerJustifiedTextSymbolIndex>=0?h.centerJustifiedTextSymbolIndex:h.leftJustifiedTextSymbolIndex>=0?h.leftJustifiedTextSymbolIndex:h.verticalPlacedTextSymbolIndex>=0?h.verticalPlacedTextSymbolIndex:x),O=tg(this.textSizeData,a,T)/Vl;return this.tilePixelRatio*O}getSymbolInstanceIconSize(a,h,m){const x=this.icon.placedSymbolArray.get(m),T=tg(this.iconSizeData,a,x);return this.tilePixelRatio*T}_commitDebugCollisionVertexUpdate(a,h,m){a.emplaceBack(h,-m,-m),a.emplaceBack(h,m,-m),a.emplaceBack(h,m,m),a.emplaceBack(h,-m,m)}_updateTextDebugCollisionBoxes(a,h,m,x,T,O){for(let G=x;G<T;G++){const W=m.get(G),q=this.getSymbolInstanceTextSize(a,O,h,G);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,q,W.padding)}}_updateIconDebugCollisionBoxes(a,h,m,x,T,O){for(let G=x;G<T;G++){const W=m.get(G),q=this.getSymbolInstanceIconSize(a,h,O);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,q,W.padding)}}updateCollisionDebugBuffers(a,h){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=Qf(this.iconSizeData,a),x=Qf(this.textSizeData,a);for(let T=0;T<this.symbolInstances.length;T++){const O=this.symbolInstances.get(T);this._updateTextDebugCollisionBoxes(x,a,h,O.textBoxStartIndex,O.textBoxEndIndex,O),this._updateTextDebugCollisionBoxes(x,a,h,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O),this._updateIconDebugCollisionBoxes(m,a,h,O.iconBoxStartIndex,O.iconBoxEndIndex,O.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(m,a,h,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,h,m,x,T,O,G,W,q){const ce={};if(h<m){const{x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt,featureIndex:ci}=a.get(h);ce.textBox={x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt},ce.textFeatureIndex=ci}if(x<T){const{x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt,featureIndex:ci}=a.get(x);ce.verticalTextBox={x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt},ce.verticalTextFeatureIndex=ci}if(O<G){const{x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt,featureIndex:ci}=a.get(O);ce.iconBox={x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt},ce.iconFeatureIndex=ci}if(W<q){const{x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt,featureIndex:ci}=a.get(W);ce.verticalIconBox={x1:pe,y1:ve,x2:De,y2:Oe,padding:Ve,projectedAnchorX:at,projectedAnchorY:It,projectedAnchorZ:ii,tileAnchorX:Ot,tileAnchorY:Kt},ce.verticalIconFeatureIndex=ci}return ce}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,h){const m=a.placedSymbolArray.get(h),x=m.vertexStartIndex+4*m.numGlyphs;for(let T=m.vertexStartIndex;T<x;T+=4)a.indexArray.emplaceBack(T,T+1,T+2),a.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const h=Math.sin(a),m=Math.cos(a),x=[],T=[],O=[];for(let G=0;G<this.symbolInstances.length;++G){O.push(G);const W=this.symbolInstances.get(G);x.push(0|Math.round(h*W.tileAnchorX+m*W.tileAnchorY)),T.push(W.featureIndex)}return O.sort((G,W)=>x[G]-x[W]||T[W]-T[G]),O}addToSortKeyRanges(a,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex);const{rightJustifiedTextSymbolIndex:x,centerJustifiedTextSymbolIndex:T,leftJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:G,placedIconSymbolIndex:W,verticalPlacedIconSymbolIndex:q}=m;x>=0&&this.addIndicesForPlacedSymbol(this.text,x),T>=0&&T!==x&&this.addIndicesForPlacedSymbol(this.text,T),O>=0&&O!==T&&O!==x&&this.addIndicesForPlacedSymbol(this.text,O),G>=0&&this.addIndicesForPlacedSymbol(this.text,G),W>=0&&this.addIndicesForPlacedSymbol(this.icon,W),q>=0&&this.addIndicesForPlacedSymbol(this.icon,q)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}kr(Ap,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ap.MAX_GLYPHS=65535,Ap.addDynamicAttributes=jg;const bx=new xt({"symbol-placement":new Ye(B.layout_symbol["symbol-placement"]),"symbol-spacing":new Ye(B.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ye(B.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ht(B.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ye(B.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ye(B.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ye(B.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ye(B.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ye(B.layout_symbol["icon-rotation-alignment"]),"icon-size":new ht(B.layout_symbol["icon-size"]),"icon-text-fit":new Ye(B.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ye(B.layout_symbol["icon-text-fit-padding"]),"icon-image":new ht(B.layout_symbol["icon-image"]),"icon-rotate":new ht(B.layout_symbol["icon-rotate"]),"icon-padding":new Ye(B.layout_symbol["icon-padding"]),"icon-keep-upright":new Ye(B.layout_symbol["icon-keep-upright"]),"icon-offset":new ht(B.layout_symbol["icon-offset"]),"icon-anchor":new ht(B.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ye(B.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ye(B.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ye(B.layout_symbol["text-rotation-alignment"]),"text-field":new ht(B.layout_symbol["text-field"]),"text-font":new ht(B.layout_symbol["text-font"]),"text-size":new ht(B.layout_symbol["text-size"]),"text-max-width":new ht(B.layout_symbol["text-max-width"]),"text-line-height":new ht(B.layout_symbol["text-line-height"]),"text-letter-spacing":new ht(B.layout_symbol["text-letter-spacing"]),"text-justify":new ht(B.layout_symbol["text-justify"]),"text-radial-offset":new ht(B.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ye(B.layout_symbol["text-variable-anchor"]),"text-anchor":new ht(B.layout_symbol["text-anchor"]),"text-max-angle":new Ye(B.layout_symbol["text-max-angle"]),"text-writing-mode":new Ye(B.layout_symbol["text-writing-mode"]),"text-rotate":new ht(B.layout_symbol["text-rotate"]),"text-padding":new Ye(B.layout_symbol["text-padding"]),"text-keep-upright":new Ye(B.layout_symbol["text-keep-upright"]),"text-transform":new ht(B.layout_symbol["text-transform"]),"text-offset":new ht(B.layout_symbol["text-offset"]),"text-allow-overlap":new Ye(B.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ye(B.layout_symbol["text-ignore-placement"]),"text-optional":new Ye(B.layout_symbol["text-optional"])});var $v={paint:new xt({"icon-opacity":new ht(B.paint_symbol["icon-opacity"]),"icon-color":new ht(B.paint_symbol["icon-color"]),"icon-halo-color":new ht(B.paint_symbol["icon-halo-color"]),"icon-halo-width":new ht(B.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ht(B.paint_symbol["icon-halo-blur"]),"icon-translate":new Ye(B.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ye(B.paint_symbol["icon-translate-anchor"]),"text-opacity":new ht(B.paint_symbol["text-opacity"]),"text-color":new ht(B.paint_symbol["text-color"],{runtimeType:le,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new ht(B.paint_symbol["text-halo-color"]),"text-halo-width":new ht(B.paint_symbol["text-halo-width"]),"text-halo-blur":new ht(B.paint_symbol["text-halo-blur"]),"text-translate":new Ye(B.paint_symbol["text-translate"]),"text-translate-anchor":new Ye(B.paint_symbol["text-translate-anchor"])}),layout:bx};class c1{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:Pe,this.defaultValue=a}evaluate(a){if(a.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(a.formattedSection))return h.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}kr(c1,"FormatSectionOverride",{omit:["defaultValue"]});class Dp extends Ru{constructor(a){super(a,$v)}recalculate(a,h){super.recalculate(a,h),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const m=this.layout.get("text-writing-mode");if(m){const x=[];for(const T of m)x.indexOf(T)<0&&x.push(T);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(a,h,m,x){const T=this.layout.get(a).evaluate(h,{},m,x),O=this._unevaluatedLayout._values[a];return O.isDataDriven()||Au(O.value)||!T?T:(G=h.properties,T.replace(/{([^{}]+)}/g,(q,ce)=>ce in G?String(G[ce]):""));var G}createBucket(a){return new Ap(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of $v.paint.overridableProperties){if(!Dp.hasPaintOverride(this.layout,a))continue;const h=this.paint.get(a),m=new c1(h),x=new Ku(m,h.property.specification);let T=null;T="constant"===h.value.kind||"source"===h.value.kind?new Hc("source",x):new au("composite",x,h.value.zoomStops,h.value._interpolationType),this.paint._values[a]=new vt(h.property,T,h.parameters)}}_handleOverridablePaintPropertyUpdate(a,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&Dp.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,h){const m=a.get("text-field"),x=$v.paint.properties[h];let T=!1;const O=G=>{for(const W of G)if(x.overrides&&x.overrides.hasOverride(W))return void(T=!0)};if("constant"===m.value.kind&&m.value.value instanceof ss)O(m.value.value.sections);else if("source"===m.value.kind){const G=q=>{T||(q instanceof Xl&&za(q.value)===lt?O(q.value.sections):q instanceof Nc?O(q.sections):q.eachChild(G))},W=m.value;W._styleExpression&&G(W._styleExpression.expression)}return T}getProgramConfiguration(a){return new Id(this,a)}}var wx={paint:new xt({"background-color":new Ye(B.paint_background["background-color"]),"background-pattern":new Ye(B.paint_background["background-pattern"]),"background-opacity":new Ye(B.paint_background["background-opacity"])})},Cx={paint:new xt({"raster-opacity":new Ye(B.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ye(B.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ye(B.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ye(B.paint_raster["raster-brightness-max"]),"raster-saturation":new Ye(B.paint_raster["raster-saturation"]),"raster-contrast":new Ye(B.paint_raster["raster-contrast"]),"raster-resampling":new Ye(B.paint_raster["raster-resampling"]),"raster-fade-duration":new Ye(B.paint_raster["raster-fade-duration"])})};class Q0 extends Ru{constructor(a){super(a,{}),this.implementation=a}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}var Xv={paint:new xt({"sky-type":new Ye(B.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ye(B.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ye(B.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ye(B.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ye(B.paint_sky["sky-gradient-radius"]),"sky-gradient":new zt(B.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ye(B.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ye(B.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ye(B.paint_sky["sky-opacity"])})};function ev(c,a,h){const m=[0,0,1],x=Rm([]);return wg(x,x,h?-hi(c)+Math.PI:hi(c)),Tc(x,x,-hi(a)),Xp(m,m,x),El(m,m)}const Ex={circle:class extends Ru{constructor(c){super(c,kv)}createBucket(c){return new Vm(c)}queryRadius(c){const a=c;return wf("circle-radius",this,a)+wf("circle-stroke-width",this,a)+dd(this.paint.get("circle-translate"))}queryIntersectsFeature(c,a,h,m,x,T,O,G){const W=b0(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,c.pixelToTileUnitsFactor),q=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h);return w0(c,m,T,O,G,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),W,q)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new Id(this,c)}},heatmap:class extends Ru{createBucket(c){return new Sv(c)}constructor(c){super(c,x_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){"heatmap-color"===c&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=T0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return wf("heatmap-radius",this,c)}queryIntersectsFeature(c,a,h,m,x,T,O,G){const W=this.paint.get("heatmap-radius").evaluate(a,h);return w0(c,m,T,O,G,!0,!0,new kt(0,0),W)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new Id(this,c)}},hillshade:class extends Ru{constructor(c){super(c,b_)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ru{constructor(c){super(c,Sy)}getProgramIds(){const c=this.paint.get("fill-pattern"),a=c&&c.constantOr(1),h=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&h.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),h}getProgramConfiguration(c){return new Id(this,c)}recalculate(c,a){super.recalculate(c,a);const h=this.paint._values["fill-outline-color"];"constant"===h.value.kind&&void 0===h.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new B0(c)}queryRadius(){return dd(this.paint.get("fill-translate"))}queryIntersectsFeature(c,a,h,m,x,T){return!c.queryGeometry.isAboveHorizon&&Ic(im(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,c.pixelToTileUnitsFactor),m)}isTileClipped(){return!0}},"fill-extrusion":class extends Ru{constructor(c){super(c,Ay)}createBucket(c){return new kp(c)}queryRadius(){return dd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new Id(this,c)}queryIntersectsFeature(c,a,h,m,x,T,O,G,W){const q=b0(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,c.pixelToTileUnitsFactor),ce=this.paint.get("fill-extrusion-height").evaluate(a,h),pe=this.paint.get("fill-extrusion-base").evaluate(a,h),ve=[0,0],De=G&&T.elevation,Oe=T.elevation?T.elevation.exaggeration():1,Ve=c.tile.getBucket(this);if(De&&Ve instanceof kp){const Kt=Ve.centroidVertexArray,ci=W+1;ci<Kt.length&&(ve[0]=Kt.geta_centroid_pos0(ci),ve[1]=Kt.geta_centroid_pos1(ci))}if(0===ve[0]&&1===ve[1])return!1;"globe"===T.projection.name&&(m=A_([m],[new kt(0,0),new kt(Yr,Yr)],c.tileID.canonical).map(Kt=>Kt.polygon).flat());const at=De?G:null,[It,ii]=(ci=m,li=pe,Ji=ce,Ui=q,wn=O,Kn=at,rn=ve,In=Oe,An=T.center.lat,"globe"===(Kt=T).projection.name?function(er,gn,_r,jr,br,Zs,tr,rs,js,ja,qs){const bs=[],Po=[],ea=er.projection.upVectorScale(qs,er.center.lat,er.worldSize).metersToTile,ra=[0,0,0,1],xo=[0,0,0,1],Mo=(bo,tl,Al,sc)=>{bo[0]=tl,bo[1]=Al,bo[2]=sc,bo[3]=1},Oo=S_();_r>0&&(_r+=Oo),jr+=Oo;for(const bo of gn){const tl=[],Al=[];for(const sc of bo){const wo=sc.x+br.x,Oc=sc.y+br.y,ac=er.projection.projectTilePoint(wo,Oc,qs),gl=er.projection.upVector(qs,sc.x,sc.y);let qa=_r,oc=jr;if(tr){const Ro=Hl(wo,Oc,_r,jr,tr,rs,js,ja);qa+=Ro.base,oc+=Ro.top}0!==_r?Mo(ra,ac.x+gl[0]*ea*qa,ac.y+gl[1]*ea*qa,ac.z+gl[2]*ea*qa):Mo(ra,ac.x,ac.y,ac.z),Mo(xo,ac.x+gl[0]*ea*oc,ac.y+gl[1]*ea*oc,ac.z+gl[2]*ea*oc),Xo(ra,ra,Zs),Xo(xo,xo,Zs),tl.push(new Xs(ra[0],ra[1],ra[2])),Al.push(new Xs(xo[0],xo[1],xo[2]))}bs.push(tl),Po.push(Al)}return[bs,Po]}(Kt,ci,li,Ji,Ui,wn,Kn,rn,In,An,c.tileID.canonical):Kn?function(er,gn,_r,jr,br,Zs,tr,rs,js){const ja=[],qs=[],bs=[0,0,0,1];for(const Po of er){const ea=[],ra=[];for(const xo of Po){const Mo=xo.x+jr.x,Oo=xo.y+jr.y,bo=Hl(Mo,Oo,gn,_r,Zs,tr,rs,js);bs[0]=Mo,bs[1]=Oo,bs[2]=bo.base,bs[3]=1,Uf(bs,bs,br),bs[3]=Math.max(bs[3],1e-5);const tl=new Xs(bs[0]/bs[3],bs[1]/bs[3],bs[2]/bs[3]);bs[0]=Mo,bs[1]=Oo,bs[2]=bo.top,bs[3]=1,Uf(bs,bs,br),bs[3]=Math.max(bs[3],1e-5);const Al=new Xs(bs[0]/bs[3],bs[1]/bs[3],bs[2]/bs[3]);ea.push(tl),ra.push(Al)}ja.push(ea),qs.push(ra)}return[ja,qs]}(ci,li,Ji,Ui,wn,Kn,rn,In,An):function(er,gn,_r,jr,br){const Zs=[],tr=[],rs=br[8]*gn,js=br[9]*gn,ja=br[10]*gn,qs=br[11]*gn,bs=br[8]*_r,Po=br[9]*_r,ea=br[10]*_r,ra=br[11]*_r;for(const xo of er){const Mo=[],Oo=[];for(const bo of xo){const tl=bo.x+jr.x,Al=bo.y+jr.y,sc=br[0]*tl+br[4]*Al+br[12],wo=br[1]*tl+br[5]*Al+br[13],Oc=br[2]*tl+br[6]*Al+br[14],ac=br[3]*tl+br[7]*Al+br[15],gl=sc+rs,qa=wo+js,oc=Oc+ja,Ro=Math.max(ac+qs,1e-5),Mh=sc+bs,lc=wo+Po,Kc=Oc+ea,Dl=Math.max(ac+ra,1e-5);Mo.push(new Xs(gl/Ro,qa/Ro,oc/Ro)),Oo.push(new Xs(Mh/Dl,lc/Dl,Kc/Dl))}Zs.push(Mo),tr.push(Oo)}return[Zs,tr]}(ci,li,Ji,Ui,wn)),Ot=c.queryGeometry;var Kt,ci,li,Ji,Ui,wn,Kn,rn,In,An;return function(Kt,ci,li){let Ji=1/0;Ic(li,ci)&&(Ji=zu(li,ci[0]));for(let Ui=0;Ui<ci.length;Ui++){const wn=ci[Ui],Kn=Kt[Ui];for(let rn=0;rn<wn.length-1;rn++){const In=wn[rn],An=[In,wn[rn+1],Kn[rn+1],Kn[rn],In];Tl(li,An)&&(Ji=Math.min(Ji,zu(li,An)))}}return Ji!==1/0&&Ji}(It,ii,Ot.isPointQuery()?Ot.screenBounds:Ot.screenGeometry)}},line:class extends Ru{constructor(c){super(c,Oy),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if("line-gradient"===c){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof Ut,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,a){super.recalculate(c,a),this.paint._values["line-floorwidth"]=Jf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new Ov(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new Id(this,c)}queryRadius(c){const a=c,h=I_(wf("line-width",this,a),wf("line-gap-width",this,a)),m=wf("line-offset",this,a);return h/2+Math.abs(m)+dd(this.paint.get("line-translate"))}queryIntersectsFeature(c,a,h,m,x,T){if(c.queryGeometry.isAboveHorizon)return!1;const O=im(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,c.pixelToTileUnitsFactor),G=c.pixelToTileUnitsFactor/2*I_(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),W=this.paint.get("line-offset").evaluate(a,h);return W&&(m=function(q,ce){const pe=[],ve=new kt(0,0);for(let De=0;De<q.length;De++){const Oe=q[De],Ve=[];for(let at=0;at<Oe.length;at++){const It=Oe[at],ii=Oe[at+1],Ot=0===at?ve:It.sub(Oe[at-1])._unit()._perp(),Kt=at===Oe.length-1?ve:ii.sub(It)._unit()._perp(),ci=Ot._add(Kt)._unit();ci._mult(1/(ci.x*Kt.x+ci.y*Kt.y)),Ve.push(ci._mult(ce)._add(It))}pe.push(Ve)}return pe}(m,W*c.pixelToTileUnitsFactor)),function(q,ce,pe){for(let ve=0;ve<ce.length;ve++){const De=ce[ve];if(q.length>=3)for(let Oe=0;Oe<De.length;Oe++)if(Ah(q,De[Oe]))return!0;if(_0(q,De,pe))return!0}return!1}(O,m,G)}isTileClipped(){return!0}},symbol:Dp,background:class extends Ru{constructor(c){super(c,wx)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ru{constructor(c){super(c,Cx)}getProgramIds(){return["raster"]}},sky:class extends Ru{constructor(c){super(c,Xv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){"sky-gradient"===c?this._updateColorRamp():"sky-atmosphere-sun"!==c&&"sky-atmosphere-halo-color"!==c&&"sky-atmosphere-color"!==c&&"sky-atmosphere-sun-intensity"!==c||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=T0({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(c,a){if("atmosphere"===this.paint.get("sky-type")){const m=this.paint.get("sky-atmosphere-sun"),x=!m,T=c.style.light,O=T.properties.get("position");return x&&"viewport"===T.properties.get("anchor")&&Zn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),x?ev(O.azimuthal,90-O.polar,a):ev(m[0],90-m[1],a)}const h=this.paint.get("sky-gradient-center");return ev(h[0],90-h[1],a)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return"atmosphere"===c?["skyboxCapture","skybox"]:"gradient"===c?["skyboxGradient"]:null}}};class tv{constructor(a,h,m,x){this.context=a,this.format=m,this.texture=a.gl.createTexture(),this.update(h,x)}update(a,h,m){const{width:x,height:T}=a,{context:O}=this,{gl:G}=O,{HTMLImageElement:W,HTMLCanvasElement:q,HTMLVideoElement:ce,ImageData:pe,ImageBitmap:ve}=j;if(G.bindTexture(G.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===G.RGBA&&(!h||!1!==h.premultiply)),m||this.size&&this.size[0]===x&&this.size[1]===T){const{x:De,y:Oe}=m||{x:0,y:0};a instanceof W||a instanceof q||a instanceof ce||a instanceof pe||ve&&a instanceof ve?G.texSubImage2D(G.TEXTURE_2D,0,De,Oe,G.RGBA,G.UNSIGNED_BYTE,a):G.texSubImage2D(G.TEXTURE_2D,0,De,Oe,x,T,G.RGBA,G.UNSIGNED_BYTE,a.data)}else this.size=[x,T],a instanceof W||a instanceof q||a instanceof ce||a instanceof pe||ve&&a instanceof ve?G.texImage2D(G.TEXTURE_2D,0,this.format,this.format,G.UNSIGNED_BYTE,a):G.texImage2D(G.TEXTURE_2D,0,this.format,x,T,0,this.format,G.UNSIGNED_BYTE,a.data);this.useMipmap=!!(h&&h.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&G.generateMipmap(G.TEXTURE_2D)}bind(a,h){const{context:m}=this,{gl:x}=m;x.bindTexture(x.TEXTURE_2D,this.texture),a!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,this.useMipmap?a===x.NEAREST?x.NEAREST_MIPMAP_NEAREST:x.LINEAR_MIPMAP_NEAREST:a),this.filter=a),h!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,h),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class kx{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Tx{constructor(){this.tasks={},this.taskQueue=[],Xr(["process"],this),this.invoker=new kx(this.process),this.nextId=0}add(a,h){const m=this.nextId++,x=function({type:T,isSymbolTile:O,zoom:G}){return G=G||0,"message"===T?0:"maybePrepare"!==T||O?"parseTile"!==T||O?"parseTile"===T&&O?300-G:"maybePrepare"===T&&O?400-G:500:200-G:100-G}(h);if(0===x){zn();try{a()}finally{}return{cancel:()=>{}}}return this.tasks[m]={fn:a,metadata:h,priority:x,id:m},this.taskQueue.push(m),this.invoker.trigger(),{cancel:()=>{delete this.tasks[m]}}}process(){zn();try{if(this.taskQueue=this.taskQueue.filter(m=>!!this.tasks[m]),!this.taskQueue.length)return;const a=this.pick();if(null===a)return;const h=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!h)return;h.fn()}finally{}}pick(){let a=null,h=1/0;for(let x=0;x<this.taskQueue.length;x++){const T=this.tasks[this.taskQueue[x]];T.priority<h&&(h=T.priority,a=x)}if(null===a)return null;const m=this.taskQueue[a];return this.taskQueue.splice(a,1),m}remove(){this.invoker.remove()}}class u1{constructor(a){this._stringToNumber={},this._numberToString=[];for(let h=0;h<a.length;h++){const m=a[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const h1=["tile","layer","source","sourceLayer","state"];class d1{constructor(a,h,m,x,T){this.type="Feature",this._vectorTileFeature=a,this._z=h,this._x=m,this._y=x,this.properties=a.properties,this.id=T}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(a.id=this.id);for(const h of h1)void 0!==this[h]&&(a[h]=this[h]);return a}}const E=33,F=new Uint16Array(8184);for(let c=0;c<2046;c++){let a=c+2,h=0,m=0,x=0,T=0,O=0,G=0;for(1&a?x=T=O=32:h=m=G=32;(a>>=1)>1;){const q=h+x>>1,ce=m+T>>1;1&a?(x=h,T=m,h=O,m=G):(h=x,m=T,x=O,T=G),O=q,G=ce}const W=4*c;F[W+0]=h,F[W+1]=m,F[W+2]=x,F[W+3]=T}const ee=new Uint16Array(2178),Ce=new Uint8Array(1089),qe=new Uint16Array(1089);function Ct(c){return 0===c?-.03125:32===c?.03125:0}var oi=Ei([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const xi={type:2,extent:Yr,loadGeometry:()=>[[new kt(0,0),new kt(Yr+1,0),new kt(Yr+1,Yr+1),new kt(0,Yr+1),new kt(0,0)]]};class Gi{constructor(a,h,m,x,T){this.tileID=a,this.uid=Si(),this.uses=0,this.tileSize=h,this.tileZoom=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=T,this.expiredRequestCount=0,this.state="loading",x&&x.transform&&(this.projection=x.transform.projection)}registerFadeDuration(a){const h=a+this.timeAdded;h<u.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=hm(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,h,m){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(x,T){const O={};if(!T)return O;for(const G of x){const W=G.layerIds.map(q=>T.getLayer(q)).filter(Boolean);if(0!==W.length){G.layers=W,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map(q=>W.filter(ce=>ce.id===q)[0]));for(const q of W)O[q.id]=G}}return O}(a.buckets,h.style),this.hasSymbolBuckets=!1;for(const x in this.buckets){const T=this.buckets[x];if(T instanceof Ap){if(this.hasSymbolBuckets=!0,!m)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const x in this.buckets){const T=this.buckets[x];if(T instanceof Ap&&T.hasRTLText){this.hasRTLText=!0,re.isLoading()||re.isLoaded()||"deferred"!==V()||Q();break}}this.queryPadding=0;for(const x in this.buckets){const T=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(x).queryRadius(T))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas)}else this.collisionBoxArray=new Ca}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(a){return this.buckets[a.id]}upload(a){for(const m in this.buckets){const x=this.buckets[m];x.uploadPending()&&x.upload(a)}const h=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new tv(a,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new tv(a,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new tv(a,this.lineAtlas.image,h.ALPHA),this.lineAtlas.uploaded=!0)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,h,m,x,T,O,G,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:x,pixelPosMatrix:G,transform:O,params:T,tileTransform:this.tileTransform},a,h,m):{}}querySourceFeatures(a,h){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const x=m.loadVTLayers(),T=h?h.sourceLayer:"",O=x._geojsonTileLayer||x[T];if(!O)return;const G=ln(h&&h.filter),{z:W,x:q,y:ce}=this.tileID.canonical,pe={z:W,x:q,y:ce};for(let ve=0;ve<O.length;ve++){const De=O.feature(ve);if(G.needGeometry){const at=Fu(De,!0);if(!G.filter(new ue(this.tileID.overscaledZ),at,this.tileID.canonical))continue}else if(!G.filter(new ue(this.tileID.overscaledZ),De))continue;const Oe=m.getId(De,T),Ve=new d1(De,W,q,ce,Oe);Ve.tile=pe,a.push(Ve)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const h=this.expirationTime;if(a.cacheControl){const m=On(a.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const m=Date.now();let x=!1;if(this.expirationTime>m)x=!1;else if(h)if(this.expirationTime<h)x=!0;else{const T=this.expirationTime-h;T?this.expirationTime=m+Math.max(T,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(a,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(a).length||!h)return;const m=this.latestFeatureIndex.loadVTLayers(),x=h.style.listImages();for(const T in this.buckets){if(!h.style.hasLayer(T))continue;const O=this.buckets[T],G=O.layers[0].sourceLayer||"_geojsonTileLayer",W=m[G],q=a[G];if(!W||!q||0===Object.keys(q).length)continue;if(O.update(q,W,x,this.imageAtlas&&this.imageAtlas.patternPositions||{}),O instanceof Ov||O instanceof B0){const pe=h.style._getSourceCache(O.layers[0].source);h._terrain&&h._terrain.enabled&&pe&&O.programConfigurations.needsUpload&&h._terrain._clearRenderCacheForTile(pe.id,this.tileID)}const ce=h&&h.style&&h.style.getLayer(T);ce&&(this.queryPadding=Math.max(this.queryPadding,ce.queryRadius(O)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=u.now()+a}setTexture(a,h){const m=h.context,x=m.gl;this.texture=this.texture||h.getTileTexture(a.width),this.texture?this.texture.update(a,{useMipmap:!0}):(this.texture=new tv(m,a,x.RGBA,{useMipmap:!0}),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE))}setDependencies(a,h){const m={};for(const x of h)m[x]=!0;this.dependencies[a]=m}hasDependency(a,h){for(const m of a){const x=this.dependencies[m];if(x)for(const T of h)if(x[T])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,h){if(!h||"mercator"===h.name||this._tileDebugBuffer)return;const m=xf(xi,this.tileID.canonical,this.tileTransform)[0],x=new Gn,T=new ua;for(let O=0;O<m.length;O++){const{x:G,y:W}=m[O];x.emplaceBack(G,W),T.emplaceBack(O)}T.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(T),this._tileDebugBuffer=a.createVertexBuffer(x,jf.members),this._tileDebugSegments=Ao.simpleSegment(0,0,x.length,T.length)}_makeTileBoundsBuffers(a,h){if(this._tileBoundsBuffer||!h||"mercator"===h.name)return;const m=xf(xi,this.tileID.canonical,this.tileTransform)[0];let x,T;if(this.isRaster){const O=function(G,W){const q=hm(G,W),ce=Math.pow(2,G.z);for(let at=0;at<E;at++)for(let It=0;It<E;It++){const ii=Sh((G.x+(It+Ct(It))/32)/ce),Ot=Ac((G.y+(at+Ct(at))/32)/ce),Kt=W.project(ii,Ot),ci=at*E+It;ee[2*ci+0]=Math.round((Kt.x*q.scale-q.x)*Yr),ee[2*ci+1]=Math.round((Kt.y*q.scale-q.y)*Yr)}Ce.fill(0),qe.fill(0);for(let at=2045;at>=0;at--){const It=4*at,ii=F[It+0],Ot=F[It+1],Kt=F[It+2],ci=F[It+3],li=ii+Kt>>1,Ji=Ot+ci>>1,Ui=li+Ji-Ot,wn=Ji+ii-li,Kn=Ot*E+ii,rn=ci*E+Kt,In=Ji*E+li,An=Math.hypot((ee[2*Kn+0]+ee[2*rn+0])/2-ee[2*In+0],(ee[2*Kn+1]+ee[2*rn+1])/2-ee[2*In+1])>=16;Ce[In]=Ce[In]||(An?1:0),at<1022&&(Ce[In]=Ce[In]||Ce[(Ot+wn>>1)*E+(ii+Ui>>1)]||Ce[(ci+wn>>1)*E+(Kt+Ui>>1)])}const pe=new dn,ve=new zr;let De=0;function Oe(at,It){const ii=It*E+at;return 0===qe[ii]&&(pe.emplaceBack(ee[2*ii+0],ee[2*ii+1],at*Yr/32,It*Yr/32),qe[ii]=++De),qe[ii]-1}function Ve(at,It,ii,Ot,Kt,ci){const li=at+ii>>1,Ji=It+Ot>>1;if(Math.abs(at-Kt)+Math.abs(It-ci)>1&&Ce[Ji*E+li])Ve(Kt,ci,at,It,li,Ji),Ve(ii,Ot,Kt,ci,li,Ji);else{const Ui=Oe(at,It),wn=Oe(ii,Ot),Kn=Oe(Kt,ci);ve.emplaceBack(Ui,wn,Kn)}}return Ve(0,0,32,32,32,0),Ve(32,32,0,0,0,32),{vertices:pe,indices:ve}}(this.tileID.canonical,h);x=O.vertices,T=O.indices}else{x=new dn,T=new zr;for(const{x:G,y:W}of m)x.emplaceBack(G,W,0,0);const O=Hd(x.int16,void 0,4);for(let G=0;G<O.length;G+=3)T.emplaceBack(O[G],O[G+1],O[G+2])}this._tileBoundsBuffer=a.createVertexBuffer(x,oi.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(T),this._tileBoundsSegments=Ao.simpleSegment(0,0,x.length,T.length)}_makeGlobeTileDebugBuffers(a,h){const m=h.projection;if(!m||"globe"!==m.name||h.freezeTileCoverage)return;const x=this.tileID.canonical,T=gp(Fm(x,h)),O=pl(h.zoom);let G;O>0&&(G=ld(new Float64Array(16),h.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,x,h,T,G,O),this._makeGlobeTileDebugTextBuffer(a,x,h,T,G,O)}_globePoint(a,h,m,x,T,O,G){let W=Bm(a,h,m);if(O){const q=1<<m.z,ce=zd(x.center.lng),pe=hd(x.center.lat),ve=(m.x+.5)/q-ce;let De=0;ve>.5?De=-1:ve<-.5&&(De=1);let Oe=(a/Yr+m.x)/q+De,Ve=(h/Yr+m.y)/q;Oe=(Oe-ce)*x._pixelsPerMercatorPixel+ce,Ve=(Ve-pe)*x._pixelsPerMercatorPixel+pe;const at=[Oe*x.worldSize,Ve*x.worldSize,0];Xo(at,at,O),W=fp(W,at,G)}return Xo(W,W,T)}_makeGlobeTileDebugBorderBuffer(a,h,m,x,T,O){const G=new Gn,W=new ua,q=new Ni,ce=(ve,De,Oe,Ve,at)=>{const It=(Oe-ve)/(at-1),ii=(Ve-De)/(at-1),Ot=G.length;for(let Kt=0;Kt<at;Kt++){const ci=ve+Kt*It,li=De+Kt*ii;G.emplaceBack(ci,li);const Ji=this._globePoint(ci,li,h,m,x,T,O);q.emplaceBack(Ji[0],Ji[1],Ji[2]),W.emplaceBack(Ot+Kt)}},pe=Yr;ce(0,0,pe,0,16),ce(pe,0,pe,pe,16),ce(pe,pe,0,pe,16),ce(0,pe,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(W),this._tileDebugBuffer=a.createVertexBuffer(G,jf.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(q,Lm.members),this._tileDebugSegments=Ao.simpleSegment(0,0,G.length,W.length)}_makeGlobeTileDebugTextBuffer(a,h,m,x,T,O){const G=Yr/4,W=new Gn,q=new zr,ce=new Ni;q.reserve(32),W.reserve(25),ce.reserve(25);const ve=(De,Oe)=>25*De+Oe;for(let De=0;De<25;De++){const Oe=De*G;for(let Ve=0;Ve<25;Ve++){const at=Ve*G;W.emplaceBack(at,Oe);const It=this._globePoint(at,Oe,h,m,x,T,O);ce.emplaceBack(It[0],It[1],It[2])}}for(let De=0;De<4;De++)for(let Oe=0;Oe<4;Oe++){const Ve=ve(De,Oe),at=ve(De,Oe+1),It=ve(De+1,Oe),ii=ve(De+1,Oe+1);q.emplaceBack(Ve,at,It),q.emplaceBack(It,at,ii)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(q),this._tileDebugTextBuffer=a.createVertexBuffer(W,jf.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(ce,Lm.members),this._tileDebugTextSegments=Ao.simpleSegment(0,0,25,32)}}class Xn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,h,m){const x=String(h);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][x]=this.stateChanges[a][x]||{},hr(this.stateChanges[a][x],m),null===this.deletedStates[a]){this.deletedStates[a]={};for(const T in this.state[a])T!==x&&(this.deletedStates[a][T]=null)}else if(this.deletedStates[a]&&null===this.deletedStates[a][x]){this.deletedStates[a][x]={};for(const T in this.state[a][x])m[T]||(this.deletedStates[a][x][T]=null)}else for(const T in m)this.deletedStates[a]&&this.deletedStates[a][x]&&null===this.deletedStates[a][x][T]&&delete this.deletedStates[a][x][T]}removeFeatureState(a,h,m){if(null===this.deletedStates[a])return;const x=String(h);if(this.deletedStates[a]=this.deletedStates[a]||{},m&&void 0!==h)null!==this.deletedStates[a][x]&&(this.deletedStates[a][x]=this.deletedStates[a][x]||{},this.deletedStates[a][x][m]=null);else if(void 0!==h)if(this.stateChanges[a]&&this.stateChanges[a][x])for(m in this.deletedStates[a][x]={},this.stateChanges[a][x])this.deletedStates[a][x][m]=null;else this.deletedStates[a][x]=null;else this.deletedStates[a]=null}getState(a,h){const m=String(h),x=hr({},(this.state[a]||{})[m],(this.stateChanges[a]||{})[m]);if(null===this.deletedStates[a])return{};if(this.deletedStates[a]){const T=this.deletedStates[a][h];if(null===T)return{};for(const O in T)delete x[O]}return x}initializeTileState(a,h){a.setFeatureState(this.state,h)}coalesceChanges(a,h){const m={};for(const x in this.stateChanges){this.state[x]=this.state[x]||{};const T={};for(const O in this.stateChanges[x])this.state[x][O]||(this.state[x][O]={}),hr(this.state[x][O],this.stateChanges[x][O]),T[O]=this.state[x][O];m[x]=T}for(const x in this.deletedStates){this.state[x]=this.state[x]||{};const T={};if(null===this.deletedStates[x])for(const O in this.state[x])T[O]={},this.state[x][O]={};else for(const O in this.deletedStates[x]){if(null===this.deletedStates[x][O])this.state[x][O]={};else if(this.state[x][O])for(const G of Object.keys(this.deletedStates[x][O]))delete this.state[x][O][G];T[O]=this.state[x][O]}m[x]=m[x]||{},hr(m[x],T)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(m).length)for(const x in a)a[x].setFeatureState(m,h)}}class $n{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,h){const m=this.toIdx(a,h);return{min:this.minimums[m],max:this.maximums[m]}}isLeaf(a,h){return this.leaves[this.toIdx(a,h)]}toIdx(a,h){return h*this.size+a}}function or(c,a,h,m){let x=0,T=Number.MAX_VALUE;for(let O=0;O<3;O++)if(Math.abs(m[O])<1e-15){if(h[O]<c[O]||h[O]>a[O])return null}else{const G=1/m[O];let W=(c[O]-h[O])*G,q=(a[O]-h[O])*G;if(W>q){const ce=W;W=q,q=ce}if(W>x&&(x=W),q<T&&(T=q),x>T)return null}return x}function $r(c,a,h,m,x,T,O,G,W,q,ce){const pe=m-c,ve=x-a,De=T-h,Oe=O-c,Ve=G-a,at=W-h,It=ce[1]*at-ce[2]*Ve,ii=ce[2]*Oe-ce[0]*at,Ot=ce[0]*Ve-ce[1]*Oe,Kt=pe*It+ve*ii+De*Ot;if(Math.abs(Kt)<1e-15)return null;const ci=1/Kt,li=q[0]-c,Ji=q[1]-a,Ui=q[2]-h,wn=(li*It+Ji*ii+Ui*Ot)*ci;if(wn<0||wn>1)return null;const Kn=Ji*De-Ui*ve,rn=Ui*pe-li*De,In=li*ve-Ji*pe,An=(ce[0]*Kn+ce[1]*rn+ce[2]*In)*ci;return An<0||wn+An>1?null:(Oe*Kn+Ve*rn+at*In)*ci}function fs(c,a,h){return(c-a)/(h-a)}function Is(c,a,h,m,x,T,O,G,W){const q=1<<h,ce=T-m,pe=O-x,ve=(c+1)/q*ce+m,De=(a+0)/q*pe+x,Oe=(a+1)/q*pe+x;G[0]=(c+0)/q*ce+m,G[1]=De,W[0]=ve,W[1]=Oe}class ma{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const h=function(T){const O=Math.ceil(Math.log2(T.dim/8)),G=[];let W=Math.ceil(Math.pow(2,O));const q=1/W,ce=(De,Oe,Ve,at,It)=>{const ii=at?1:0,Ot=(De+1)*Ve-ii,Kt=Oe*Ve,ci=(Oe+1)*Ve-ii;It[0]=De*Ve,It[1]=Kt,It[2]=Ot,It[3]=ci};let pe=new $n(W);const ve=[];for(let De=0;De<W*W;De++){ce(De%W,Math.floor(De/W),q,!1,ve);const Oe=fa(ve[0],ve[1],T),Ve=fa(ve[2],ve[1],T),at=fa(ve[2],ve[3],T),It=fa(ve[0],ve[3],T);pe.minimums.push(Math.min(Oe,Ve,at,It)),pe.maximums.push(Math.max(Oe,Ve,at,It)),pe.leaves.push(1)}for(G.push(pe),W/=2;W>=1;W/=2){const De=G[G.length-1];pe=new $n(W);for(let Oe=0;Oe<W*W;Oe++){ce(Oe%W,Math.floor(Oe/W),2,!0,ve);const Ve=De.getElevation(ve[0],ve[1]),at=De.getElevation(ve[2],ve[1]),It=De.getElevation(ve[2],ve[3]),ii=De.getElevation(ve[0],ve[3]),Ot=De.isLeaf(ve[0],ve[1]),Kt=De.isLeaf(ve[2],ve[1]),ci=De.isLeaf(ve[2],ve[3]),li=De.isLeaf(ve[0],ve[3]),Ji=Math.min(Ve.min,at.min,It.min,ii.min),Ui=Math.max(Ve.max,at.max,It.max,ii.max),wn=Ot&&Kt&&ci&&li;pe.maximums.push(Ui),pe.minimums.push(Ji),pe.leaves.push(Ui-Ji<=5&&wn?1:0)}G.push(pe)}return G}(this.dem),m=h.length-1,x=h[m];this._addNode(x.minimums[0],x.maximums[0],x.leaves[0]),this._construct(h,0,0,m,0)}raycastRoot(a,h,m,x,T,O,G=1){return or([a,h,-100],[m,x,this.maximums[0]*G],T,O)}raycast(a,h,m,x,T,O,G=1){if(!this.nodeCount)return null;const W=this.raycastRoot(a,h,m,x,T,O,G);if(null==W)return null;const q=[],ce=[],pe=[],ve=[],De=[{idx:0,t:W,nodex:0,nodey:0,depth:0}];for(;De.length>0;){const{idx:Oe,t:Ve,nodex:at,nodey:It,depth:ii}=De.pop();if(this.leaves[Oe]){Is(at,It,ii,a,h,m,x,pe,ve);const Kt=1<<ii,ci=(at+0)/Kt,li=(at+1)/Kt,Ji=(It+0)/Kt,Ui=(It+1)/Kt,wn=fa(ci,Ji,this.dem)*G,Kn=fa(li,Ji,this.dem)*G,rn=fa(li,Ui,this.dem)*G,In=fa(ci,Ui,this.dem)*G,An=$r(pe[0],pe[1],wn,ve[0],pe[1],Kn,ve[0],ve[1],rn,T,O),Vn=$r(ve[0],ve[1],rn,pe[0],ve[1],In,pe[0],pe[1],wn,T,O),er=Math.min(null!==An?An:Number.MAX_VALUE,null!==Vn?Vn:Number.MAX_VALUE);if(er!==Number.MAX_VALUE)return er;{const gn=Rd([],T,O,Ve);if(Ns(wn,Kn,In,rn,fs(gn[0],pe[0],ve[0]),fs(gn[1],pe[1],ve[1]))>=gn[2])return Ve}continue}let Ot=0;for(let Kt=0;Kt<this._siblingOffset.length;Kt++){Is((at<<1)+this._siblingOffset[Kt][0],(It<<1)+this._siblingOffset[Kt][1],ii+1,a,h,m,x,pe,ve),pe[2]=-100,ve[2]=this.maximums[this.childOffsets[Oe]+Kt]*G;const ci=or(pe,ve,T,O);if(null!=ci){const li=ci;q[Kt]=li;let Ji=!1;for(let Ui=0;Ui<Ot&&!Ji;Ui++)li>=q[ce[Ui]]&&(ce.splice(Ui,0,Kt),Ji=!0);Ji||(ce[Ot]=Kt),Ot++}}for(let Kt=0;Kt<Ot;Kt++){const ci=ce[Kt];De.push({idx:this.childOffsets[Oe]+ci,t:q[ci],nodex:(at<<1)+this._siblingOffset[ci][0],nodey:(It<<1)+this._siblingOffset[ci][1],depth:ii+1})}}return null}_addNode(a,h,m){return this.minimums.push(a),this.maximums.push(h),this.leaves.push(m),this.childOffsets.push(0),this.nodeCount++}_construct(a,h,m,x,T){if(1===a[x].isLeaf(h,m))return;this.childOffsets[T]||(this.childOffsets[T]=this.nodeCount);const O=x-1,G=a[O];let W=0,q=0;for(let ce=0;ce<this._siblingOffset.length;ce++){const pe=2*h+this._siblingOffset[ce][0],ve=2*m+this._siblingOffset[ce][1],De=G.getElevation(pe,ve),Oe=G.isLeaf(pe,ve),Ve=this._addNode(De.min,De.max,Oe);Oe&&(W|=1<<ce),q||(q=Ve)}for(let ce=0;ce<this._siblingOffset.length;ce++)W&1<<ce||this._construct(a,2*h+this._siblingOffset[ce][0],2*m+this._siblingOffset[ce][1],O,q+ce)}}function Ns(c,a,h,m,x,T){return Us(Us(c,h,T),Us(a,m,T),x)}function fa(c,a,h){const m=h.dim,x=qi(c*m-.5,0,m-1),T=qi(a*m-.5,0,m-1),O=Math.floor(x),G=Math.floor(T),W=Math.min(O+1,m-1),q=Math.min(G+1,m-1);return Ns(h.get(O,G),h.get(W,G),h.get(O,q),h.get(W,q),x-O,T-G)}const Ga={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function qh(c,a,h){return(256*c*256+256*a+h)/10-1e4}function th(c,a,h){return 256*c+a+h/256-32768}class ih{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,h,m,x=!1,T=!1){if(this.uid=a,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&"mapbox"!==m&&"terrarium"!==m)return Zn(`"${m}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const O=this.dim=h.height-2,G=new Uint32Array(h.data.buffer);if(this.pixels=new Uint8Array(h.data.buffer),this.encoding=m||"mapbox",this.borderReady=x,!x){for(let W=0;W<O;W++)G[this._idx(-1,W)]=G[this._idx(0,W)],G[this._idx(O,W)]=G[this._idx(O-1,W)],G[this._idx(W,-1)]=G[this._idx(W,0)],G[this._idx(W,O)]=G[this._idx(W,O-1)];G[this._idx(-1,-1)]=G[this._idx(0,0)],G[this._idx(O,-1)]=G[this._idx(O-1,0)],G[this._idx(-1,O)]=G[this._idx(0,O-1)],G[this._idx(O,O)]=G[this._idx(O-1,O-1)],T&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ma(this)}get(a,h,m=!1){m&&(a=qi(a,-1,this.dim),h=qi(h,-1,this.dim));const x=4*this._idx(a,h);return("terrarium"===this.encoding?th:qh)(this.pixels[x],this.pixels[x+1],this.pixels[x+2])}static getUnpackVector(a){return Ga[a]}get unpackVector(){return Ga[this.encoding]}_idx(a,h){if(a<-1||a>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(a+1)}static pack(a,h){const m=[0,0,0,0],x=ih.getUnpackVector(h);let T=Math.floor((a+x[3])/x[2]);return m[2]=T%256,T=Math.floor(T/256),m[1]=T%256,T=Math.floor(T/256),m[0]=T,m}getPixels(){return new Bu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,h,m){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let x=h*this.dim,T=h*this.dim+this.dim,O=m*this.dim,G=m*this.dim+this.dim;switch(h){case-1:x=T-1;break;case 1:T=x+1}switch(m){case-1:O=G-1;break;case 1:G=O+1}const W=-h*this.dim,q=-m*this.dim;for(let ce=O;ce<G;ce++)for(let pe=x;pe<T;pe++){const ve=4*this._idx(pe,ce),De=4*this._idx(pe+W,ce+q);this.pixels[ve+0]=a.pixels[De+0],this.pixels[ve+1]=a.pixels[De+1],this.pixels[ve+2]=a.pixels[De+2],this.pixels[ve+3]=a.pixels[De+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}kr(ih,"DEMData"),kr(ma,"DemMinMaxQuadTree",{omit:["dem"]});class rc{constructor(a,h){this.max=a,this.onRemove=h,this.reset()}reset(){for(const a in this.data)for(const h of this.data[a])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(a,h,m){const x=a.wrapped().key;void 0===this.data[x]&&(this.data[x]=[]);const T={value:h,timeout:void 0};if(void 0!==m&&(T.timeout=setTimeout(()=>{this.remove(a,T)},m)),this.data[x].push(T),this.order.push(x),this.order.length>this.max){const O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const h=this.data[a].shift();return h.timeout&&clearTimeout(h.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),h.value}getByKey(a){const h=this.data[a];return h?h[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,h){if(!this.has(a))return this;const m=a.wrapped().key,x=void 0===h?0:this.data[m].indexOf(h),T=this.data[m][x];return this.data[m].splice(x,1),T.timeout&&clearTimeout(T.timeout),0===this.data[m].length&&delete this.data[m],this.onRemove(T.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(a){const h=[];for(const m in this.data)for(const x of this.data[m])a(x.value)||h.push(x);for(const m of h)this.remove(m.value.tileID,m)}}class nh{constructor(a,h,m){this.func=a,this.mask=h,this.range=m}}nh.ReadOnly=!1,nh.ReadWrite=!0,nh.disabled=new nh(519,nh.ReadOnly,[0,1]);class Zv{constructor(a,h,m,x,T,O){this.test=a,this.ref=h,this.mask=m,this.fail=x,this.depthFail=T,this.pass=O}}Zv.disabled=new Zv({func:519,mask:0},0,0,7680,7680,7680);class fm{constructor(a,h,m){this.blendFunction=a,this.blendColor=h,this.mask=m}}fm.Replace=[1,0],fm.disabled=new fm(fm.Replace,Ws.transparent,[!1,!1,!1,!1]),fm.unblended=new fm(fm.Replace,Ws.transparent,[!0,!0,!0,!0]),fm.alphaBlended=new fm([1,771],Ws.transparent,[!0,!0,!0,!0]);class np{constructor(a,h,m){this.enable=a,this.mode=h,this.frontFace=m}}np.disabled=new np(!1,1029,2305),np.backCCW=new np(!0,1029,2305),np.backCW=new np(!0,1029,2304),np.frontCW=new np(!0,1028,2304),np.frontCCW=new np(!0,1028,2305);class iv extends M{constructor(a,h,m){super(),this.id=a,this._onlySymbols=m,h.on("data",x=>{"source"===x.dataType&&"metadata"===x.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===x.dataType&&"content"===x.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),h.on("error",()=>{this._sourceErrored=!0}),this._source=h,this._tiles={},this._cache=new rc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Xn,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(a){this.map=a,this._minTileCacheSize=void 0===this._minTileCacheSize&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const h=this._tiles[a];if("loaded"!==h.state&&"errored"!==h.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,h){return a.isSymbolTile=this._onlySymbols,this._source.loadTile(a,h)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a,()=>{})}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const m=this._tiles[h];m.upload(a),m.prepare(this.map.style.imageManager)}}getIds(){return mr(this._tiles).map(a=>a.tileID).sort(Vb).map(a=>a.key)}getRenderableIds(a){const h=[];for(const m in this._tiles)this._isIdRenderable(+m,a)&&h.push(this._tiles[m]);return a?h.sort((m,x)=>{const T=m.tileID,O=x.tileID,G=new kt(T.canonical.x,T.canonical.y)._rotate(this.transform.angle),W=new kt(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return T.overscaledZ-O.overscaledZ||W.y-G.y||W.x-G.x}).map(m=>m.tileID.key):h.map(m=>m.tileID).sort(Vb).map(m=>m.key)}hasRenderableParent(a){const h=this.findLoadedParent(a,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(a,h){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(h||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)"errored"!==this._tiles[a].state&&this._reloadTile(+a,"reloading")}}_reloadTile(a,h){const m=this._tiles[a];m&&("loading"!==m.state&&(m.state=h),this._loadTile(m,this._tileLoaded.bind(this,m,a,h)))}_tileLoaded(a,h,m,x){if(x)if(a.state="errored",404!==x.status)this._source.fire(new C(x,{tile:a}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const T=this.map.painter.terrain;this.update(this.transform,T.getScaledDemTileSize(),!0),T.resetTileLookupCache(this.id)}else this.update(this.transform);else a.timeAdded=u.now(),"expired"===m&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(h,a),"raster-dem"===this._source.type&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new w("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const h=this.getRenderableIds();for(let x=0;x<h.length;x++){const T=h[x];if(a.neighboringTiles&&a.neighboringTiles[T]){const O=this.getTileByID(T);m(a,O),m(O,a)}}function m(x,T){if(!x.dem||x.dem.borderReady)return;x.needsHillshadePrepare=!0,x.needsDEMTextureUpload=!0;let O=T.tileID.canonical.x-x.tileID.canonical.x;const G=T.tileID.canonical.y-x.tileID.canonical.y,W=Math.pow(2,x.tileID.canonical.z),q=T.tileID.key;0===O&&0===G||Math.abs(G)>1||(Math.abs(O)>1&&(1===Math.abs(O+W)?O+=W:1===Math.abs(O-W)&&(O-=W)),T.dem&&x.dem&&(x.dem.backfillBorder(T.dem,O,G),x.neighboringTiles&&x.neighboringTiles[q]&&(x.neighboringTiles[q].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,h,m,x){for(const T in this._tiles){let O=this._tiles[T];if(x[T]||!O.hasData()||O.tileID.overscaledZ<=h||O.tileID.overscaledZ>m)continue;let G=O.tileID;for(;O&&O.tileID.overscaledZ>h+1;){const q=O.tileID.scaledTo(O.tileID.overscaledZ-1);O=this._tiles[q.key],O&&O.hasData()&&(G=q)}let W=G;for(;W.overscaledZ>h;)if(W=W.scaledTo(W.overscaledZ-1),a[W.key]){x[G.key]=G;break}}}findLoadedParent(a,h){if(a.key in this._loadedParentTiles){const m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=h?m:null}for(let m=a.overscaledZ-1;m>=h;m--){const x=a.scaledTo(m),T=this._getLoadedTile(x);if(T)return T}}_getLoadedTile(a){const h=this._tiles[a.key];return h&&h.hasData()?h:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,h){h=h||this._source.tileSize;const m=Math.ceil(a.width/h)+1,x=Math.ceil(a.height/h)+1,T=Math.floor(m*x*5),O="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,T):T,G="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,O):O;this._cache.setMaxSize(G)}handleWrapJump(a){const h=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,h){const m={};for(const x in this._tiles){const T=this._tiles[x];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+h),m[T.tileID.key]=T}this._tiles=m;for(const x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(const x in this._tiles)this._setTileReloadTimer(+x,this._tiles[x])}}update(a,h,m){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!m)return;let x;this.updateCacheSize(a,h),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?x=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(G=>new Qu(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y)):(x=a.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(x=x.filter(G=>this._source.hasTile(G)))):x=[];const T=this._updateRetainedTiles(x);if(Ub(this._source.type)&&0!==x.length){const G={},W={},q=Object.keys(T);for(const pe of q){const ve=T[pe],De=this._tiles[pe];if(!De||De.fadeEndTime&&De.fadeEndTime<=u.now())continue;const Oe=this.findLoadedParent(ve,Math.max(ve.overscaledZ-iv.maxOverzooming,this._source.minzoom));Oe&&(this._addTile(Oe.tileID),G[Oe.tileID.key]=Oe.tileID),W[pe]=ve}const ce=x[x.length-1].overscaledZ;for(const pe in this._tiles){const ve=this._tiles[pe];if(T[pe]||!ve.hasData())continue;let De=ve.tileID;for(;De.overscaledZ>ce;){De=De.scaledTo(De.overscaledZ-1);const Oe=this._tiles[De.key];if(Oe&&Oe.hasData()&&W[De.key]){T[pe]=ve.tileID;break}}}for(const pe in G)T[pe]||(this._coveredTiles[pe]=!0,T[pe]=G[pe])}for(const G in T)this._tiles[G].clearFadeHold();const O=function(G,W){const q=[];for(const ce in G)ce in W||q.push(ce);return q}(this._tiles,T);for(const G of O){const W=this._tiles[G];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(+G)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const h={};if(0===a.length)return h;const m={},x=a.reduce((q,ce)=>Math.min(q,ce.overscaledZ),1/0),T=a[0].overscaledZ,O=Math.max(T-iv.maxOverzooming,this._source.minzoom),G=Math.max(T+iv.maxUnderzooming,this._source.minzoom),W={};for(const q of a){const ce=this._addTile(q);h[q.key]=q,ce.hasData()||x<this._source.maxzoom&&(W[q.key]=q)}this._retainLoadedChildren(W,x,G,h);for(const q of a){let ce=this._tiles[q.key];if(ce.hasData())continue;if(q.canonical.z>=this._source.maxzoom){const ve=q.children(this._source.maxzoom)[0],De=this.getTile(ve);if(De&&De.hasData()){h[ve.key]=ve;continue}}else{const ve=q.children(this._source.maxzoom);if(h[ve[0].key]&&h[ve[1].key]&&h[ve[2].key]&&h[ve[3].key])continue}let pe=ce.wasRequested();for(let ve=q.overscaledZ-1;ve>=O;--ve){const De=q.scaledTo(ve);if(m[De.key]||(m[De.key]=!0,ce=this.getTile(De),!ce&&pe&&(ce=this._addTile(De)),ce&&(h[De.key]=De,pe=ce.wasRequested(),ce.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const h=[];let m,x=this._tiles[a].tileID;for(;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){m=this._loadedParentTiles[x.key];break}h.push(x.key);const T=x.scaledTo(x.overscaledZ-1);if(m=this._getLoadedTile(T),m)break;x=T}for(const T of h)this._loadedParentTiles[T]=m}}_addTile(a){let h=this._tiles[a.key];if(h)return h;h=this._cache.getAndRemove(a),h&&(this._setTileReloadTimer(a.key,h),h.tileID=a,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,h)));const m=!!h;if(!m){const x=this.map?this.map.painter:null;h=new Gi(a,this._source.tileSize*a.overscaleFactor(),this.transform.tileZoom,x,this._isRaster),this._loadTile(h,this._tileLoaded.bind(this,h,a.key,h.state))}return h?(h.uses++,this._tiles[a.key]=h,m||this._source.fire(new w("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h):null}_setTileReloadTimer(a,h){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const m=h.getExpiryTimeout();m&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},m))}_removeTile(a){const h=this._tiles[a];h&&(h.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),h.uses>0||(h.hasData()&&"reloading"!==h.state?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,h,m){const x=[],T=this.transform;if(!T)return x;const O="globe"===T.projection.name,G=zd(T.center.lng);for(const W in this._tiles){const q=this._tiles[W];if(m&&q.clearQueryDebugViz(),q.holdingForFade())continue;let ce;if(O){const pe=q.tileID.canonical;if(0===pe.z){const ve=[Math.abs(qi(G,...pm(pe,-1))-G),Math.abs(qi(G,...pm(pe,1))-G)];ce=[0,2*ve.indexOf(Math.min(...ve))-1]}else{const ve=[Math.abs(qi(G,...pm(pe,-1))-G),Math.abs(qi(G,...pm(pe,0))-G),Math.abs(qi(G,...pm(pe,1))-G)];ce=[ve.indexOf(Math.min(...ve))-1]}}else ce=[0];for(const pe of ce){const ve=a.containsTile(q,T,h,pe);ve&&x.push(ve)}}return x}getVisibleCoordinates(a){const h=this.getRenderableIds(a).map(m=>this._tiles[m].tileID);for(const m of h)m.projMatrix=this.transform.calculateProjMatrix(m.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(Ub(this._source.type))for(const a in this._tiles){const h=this._tiles[a];if(void 0!==h.fadeEndTime&&h.fadeEndTime>=u.now())return!0}return!1}setFeatureState(a,h,m){this._state.updateState(a=a||"_geojsonTileLayer",h,m)}removeFeatureState(a,h,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",h,m)}getFeatureState(a,h){return this._state.getState(a=a||"_geojsonTileLayer",h)}setDependencies(a,h,m){const x=this._tiles[a];x&&x.setDependencies(h,m)}reloadTilesForDependencies(a,h){for(const m in this._tiles)this._tiles[m].hasDependency(a,h)&&this._reloadTile(+m,"reloading");this._cache.filter(m=>!m.hasDependency(a,h))}_preloadTiles(a,h){if(!this._sourceLoaded){const G=()=>{this._sourceLoaded&&(this._source.off("data",G),this._preloadTiles(a,h))};return void this._source.on("data",G)}const m=new Map,x=Array.isArray(a)?a:[a],T=this.map.painter.terrain,O=this.usedForTerrain&&T?T.getScaledDemTileSize():this._source.tileSize;for(const G of x){const W=G.coveringTiles({tileSize:O,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const q of W)m.set(q.key,q);this.usedForTerrain&&G.updateElevation(!1)}Fn(Array.from(m.values()),(G,W)=>{const q=new Gi(G,this._source.tileSize*G.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(q,ce=>{"raster-dem"===this._source.type&&q.dem&&this._backfillDEM(q),W(ce,q)})},h)}}function Vb(c,a){const h=Math.abs(2*c.wrap)-+(c.wrap<0),m=Math.abs(2*a.wrap)-+(a.wrap<0);return c.overscaledZ-a.overscaledZ||m-h||a.canonical.y-c.canonical.y||a.canonical.x-c.canonical.x}function Ub(c){return"raster"===c||"image"===c||"video"===c||"custom"===c}function pm(c,a){const h=1<<c.z;return[c.x/h+a,(c.x+1)/h+a]}iv.maxOverzooming=10,iv.maxUnderzooming=3;class p1{constructor(a,h,m){this._demTile=a,this._dem=this._demTile.dem,this._scale=h,this._offset=m}static create(a,h,m){const x=m||a.findDEMTileFor(h);if(!x||!x.dem)return;const T=x.dem,O=x.tileID,G=1<<h.canonical.z-O.canonical.z;return new p1(x,x.tileSize/Yr/G,[(h.canonical.x/G-O.canonical.x)*T.dim,(h.canonical.y/G-O.canonical.y)*T.dim])}tileCoordToPixel(a,h){const m=h*this._scale+this._offset[1],x=Math.floor(a*this._scale+this._offset[0]),T=Math.floor(m);return new kt(x,T)}getElevationAt(a,h,m,x){const T=a*this._scale+this._offset[0],O=h*this._scale+this._offset[1],G=Math.floor(T),W=Math.floor(O),q=this._dem;return x=!!x,m?Us(Us(q.get(G,W,x),q.get(G,W+1,x),O-W),Us(q.get(G+1,W,x),q.get(G+1,W+1,x),O-W),T-G):q.get(G,W,x)}getElevationAtPixel(a,h,m){return this._dem.get(a,h,!!m)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*$h(1,a)*this._dem.stride}}class Ax{constructor(a,h){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new ff(Yr,16,0),this.featureIndexArray=new wh,this.promoteId=h}insert(a,h,m,x,T,O=0){const G=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,x,T,O);const W=this.grid;for(let q=0;q<h.length;q++){const ce=h[q],pe=[1/0,1/0,-1/0,-1/0];for(let ve=0;ve<ce.length;ve++){const De=ce[ve];pe[0]=Math.min(pe[0],De.x),pe[1]=Math.min(pe[1],De.y),pe[2]=Math.max(pe[2],De.x),pe[3]=Math.max(pe[3],De.y)}pe[0]<Yr&&pe[1]<Yr&&pe[2]>=0&&pe[3]>=0&&W.insert(G,pe[0],pe[1],pe[2],pe[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Me(new j0(this.rawTileData)).layers,this.sourceLayerCoder=new u1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,h,m,x){this.loadVTLayers();const T=a.params||{},O=ln(T.filter),G=a.tileResult,W=a.transform,q=G.bufferedTilespaceBounds,ce=this.grid.query(q.min.x,q.min.y,q.max.x,q.max.y,(Oe,Ve,at,It)=>tm(G.bufferedTilespaceGeometry,Oe,Ve,at,It));ce.sort(uC);let pe=null;W.elevation&&ce.length>0&&(pe=p1.create(W.elevation,this.tileID));const ve={};let De;for(let Oe=0;Oe<ce.length;Oe++){const Ve=ce[Oe];if(Ve===De)continue;De=Ve;const at=this.featureIndexArray.get(Ve);let It=null;this.loadMatchingFeature(ve,at,O,T.layers,T.availableImages,h,m,x,(ii,Ot,Kt,ci=0)=>(It||(It=xf(ii,this.tileID.canonical,a.tileTransform)),Ot.queryIntersectsFeature(G,ii,Kt,It,this.z,a.transform,a.pixelPosMatrix,pe,ci)))}return ve}loadMatchingFeature(a,h,m,x,T,O,G,W,q){const{featureIndex:ce,bucketIndex:pe,sourceLayerIndex:ve,layoutVertexArrayOffset:De}=h,Oe=this.bucketLayerIDs[pe];if(x&&!function(ii,Ot){for(let Kt=0;Kt<ii.length;Kt++)if(Ot.indexOf(ii[Kt])>=0)return!0;return!1}(x,Oe))return;const Ve=this.sourceLayerCoder.decode(ve),at=this.vtLayers[Ve].feature(ce);if(m.needGeometry){const ii=Fu(at,!0);if(!m.filter(new ue(this.tileID.overscaledZ),ii,this.tileID.canonical))return}else if(!m.filter(new ue(this.tileID.overscaledZ),at))return;const It=this.getId(at,Ve);for(let ii=0;ii<Oe.length;ii++){const Ot=Oe[ii];if(x&&x.indexOf(Ot)<0)continue;const Kt=O[Ot];if(!Kt)continue;let ci={};void 0!==It&&W&&(ci=W.getState(Kt.sourceLayer||"_geojsonTileLayer",It));const li=hr({},G[Ot]);li.paint=jb(li.paint,Kt.paint,at,ci,T),li.layout=jb(li.layout,Kt.layout,at,ci,T);const Ji=!q||q(at,Kt,ci,De);if(!Ji)continue;const Ui=new d1(at,this.z,this.x,this.y,It);Ui.layer=li;let wn=a[Ot];void 0===wn&&(wn=a[Ot]=[]),wn.push({featureIndex:ce,feature:Ui,intersectionZ:Ji})}}lookupSymbolFeatures(a,h,m,x,T,O,G,W){const q={};this.loadVTLayers();const ce=ln(T);for(const pe of a)this.loadMatchingFeature(q,{bucketIndex:m,sourceLayerIndex:x,featureIndex:pe,layoutVertexArrayOffset:0},ce,O,G,W,h);return q}loadFeature(a){const{featureIndex:h,sourceLayerIndex:m}=a;this.loadVTLayers();const x=this.sourceLayerCoder.decode(m),T=this.vtFeatures[x];if(T[h])return T[h];const O=this.vtLayers[x].feature(h);return T[h]=O,O}hasLayer(a){for(const h of this.bucketLayerIDs)for(const m of h)if(a===m)return!0;return!1}getId(a,h){let m=a.id;if(this.promoteId){const x="string"==typeof this.promoteId?this.promoteId:this.promoteId[h];null!=x&&(m=a.properties[x]),"boolean"==typeof m&&(m=Number(m))}return m}}function jb(c,a,h,m,x){return En(c,(T,O)=>{const G=a instanceof wt?a.get(O):null;return G&&G.evaluate?G.evaluate(h,m,x):G})}function uC(c,a){return a-c}kr(Ax,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Wb{constructor(a,h){this.width=a,this.height=h,this.nextRow=0,this.image=new Cf({width:a,height:h}),this.positions={},this.uploaded=!1}getDash(a,h){const m=this.getKey(a,h);return this.positions[m]}trim(){const a=this.width,h=this.height=Jn(this.nextRow);this.image.resize({width:a,height:h})}getKey(a,h){return a.join(",")+h}getDashRanges(a,h,m){const x=[];let T=a.length%2==1?-a[a.length-1]*m:0,O=a[0]*m,G=!0;x.push({left:T,right:O,isDash:G,zeroLength:0===a[0]});let W=a[0];for(let q=1;q<a.length;q++){G=!G;const ce=a[q];T=W*m,W+=ce,O=W*m,x.push({left:T,right:O,isDash:G,zeroLength:0===ce})}return x}addRoundDash(a,h,m){const x=h/2;for(let T=-m;T<=m;T++){const O=this.width*(this.nextRow+m+T);let G=0,W=a[G];for(let q=0;q<this.width;q++){q/W.right>1&&(W=a[++G]);const ce=Math.abs(q-W.left),pe=Math.abs(q-W.right),ve=Math.min(ce,pe);let De;const Oe=T/m*(x+1);if(W.isDash){const Ve=x-Math.abs(Oe);De=Math.sqrt(ve*ve+Ve*Ve)}else De=x-Math.sqrt(ve*ve+Oe*Oe);this.image.data[O+q]=Math.max(0,Math.min(255,De+128))}}}addRegularDash(a,h){for(let W=a.length-1;W>=0;--W){const q=a[W],ce=a[W+1];q.zeroLength?a.splice(W,1):ce&&ce.isDash===q.isDash&&(ce.left=q.left,a.splice(W,1))}const m=a[0],x=a[a.length-1];m.isDash===x.isDash&&(m.left=x.left-this.width,x.right=m.right+this.width);const T=this.width*this.nextRow;let O=0,G=a[O];for(let W=0;W<this.width;W++){W/G.right>1&&(G=a[++O]);const q=Math.abs(W-G.left),ce=Math.abs(W-G.right),pe=Math.min(q,ce);this.image.data[T+W]=Math.max(0,Math.min(255,(G.isDash?pe:-pe)+h+128))}}addDash(a,h){const m=this.getKey(a,h);if(this.positions[m])return this.positions[m];const x="round"===h,T=x?7:0,O=2*T+1;if(this.nextRow+O>this.height)return Zn("LineAtlas out of space"),null;0===a.length&&a.push(1);let G=0;for(let ce=0;ce<a.length;ce++)a[ce]<0&&(Zn("Negative value is found in line dasharray, replacing values with 0"),a[ce]=0),G+=a[ce];if(0!==G){const ce=this.width/G,pe=this.getDashRanges(a,this.width,ce);x?this.addRoundDash(pe,ce,T):this.addRegularDash(pe,"square"===h?.5*ce:0)}const W=this.nextRow+T;this.nextRow+=O;const q={tl:[W,T],br:[G,0]};return this.positions[m]=q,q}}kr(Wb,"LineAtlas");const $b=1*Tf;class Xb{constructor(a){const h={},m=[];for(const G in a){const W=a[G],q=h[G]={};for(const ce in W.glyphs){const pe=W.glyphs[+ce];if(!pe||0===pe.bitmap.width||0===pe.bitmap.height)continue;const ve=pe.metrics.localGlyph?$b:1,De={x:0,y:0,w:pe.bitmap.width+2*ve,h:pe.bitmap.height+2*ve};m.push(De),q[ce]=De}}const{w:x,h:T}=ep(m),O=new Cf({width:x||1,height:T||1});for(const G in a){const W=a[G];for(const q in W.glyphs){const ce=W.glyphs[+q];if(!ce||0===ce.bitmap.width||0===ce.bitmap.height)continue;const pe=h[G][q],ve=ce.metrics.localGlyph?$b:1;Cf.copy(ce.bitmap,O,{x:0,y:0},{x:pe.x+ve,y:pe.y+ve},ce.bitmap)}}this.image=O,this.positions=h}}kr(Xb,"GlyphAtlas");class hC{constructor(a){this.tileID=new Qu(a.tileID.overscaledZ,a.tileID.wrap,a.tileID.canonical.z,a.tileID.canonical.x,a.tileID.canonical.y),this.tileZoom=a.tileZoom,this.uid=a.uid,this.zoom=a.zoom,this.canonical=a.tileID.canonical,this.pixelRatio=a.pixelRatio,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=a.showCollisionBoxes,this.collectResourceTiming=!!a.collectResourceTiming,this.returnDependencies=!!a.returnDependencies,this.promoteId=a.promoteId,this.enableTerrain=!!a.enableTerrain,this.isSymbolTile=a.isSymbolTile,this.tileTransform=hm(a.tileID.canonical,a.projection),this.projection=a.projection}parse(a,h,m,x,T){this.status="parsing",this.data=a,this.collisionBoxArray=new Ca;const O=new u1(Object.keys(a.layers).sort()),G=new Ax(this.tileID,this.promoteId);G.bucketLayerIDs=[];const W={},q=new Wb(256,256),ce={featureIndex:G,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:q,availableImages:m},pe=h.familiesBySource[this.source];for(const ci in pe){const li=a.layers[ci];if(!li)continue;let Ji=!1,Ui=!1;for(const rn of pe[ci])"symbol"===rn[0].type?Ji=!0:Ui=!0;if(!0===this.isSymbolTile&&!Ji||!1===this.isSymbolTile&&!Ui)continue;1===li.version&&Zn(`Vector tile source "${this.source}" layer "${ci}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wn=O.encode(ci),Kn=[];for(let rn=0;rn<li.length;rn++){const In=li.feature(rn),An=G.getId(In,ci);Kn.push({feature:In,id:An,index:rn,sourceLayerIndex:wn})}for(const rn of pe[ci]){const In=rn[0];void 0!==this.isSymbolTile&&"symbol"===In.type!==this.isSymbolTile||In.minzoom&&this.zoom<Math.floor(In.minzoom)||In.maxzoom&&this.zoom>=In.maxzoom||"none"!==In.visibility&&(Dx(rn,this.zoom,m),(W[In.id]=In.createBucket({index:G.bucketLayerIDs.length,layers:rn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wn,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:m})).populate(Kn,ce,this.tileID.canonical,this.tileTransform),G.bucketLayerIDs.push(rn.map(An=>An.id)))}}let ve,De,Oe,Ve;q.trim();const at={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},It=()=>{if(ve)return T(ve);if(De&&Oe&&Ve){const ci=new Xb(De),li=new Hy(Oe,Ve);for(const Ji in W){const Ui=W[Ji];Ui instanceof Ap?(Dx(Ui.layers,this.zoom,m),dx(Ui,De,ci.positions,Oe,li.iconPositions,this.showCollisionBoxes,m,this.tileID.canonical,this.tileZoom,this.projection)):Ui.hasPattern&&(Ui instanceof Ov||Ui instanceof B0||Ui instanceof kp)&&(Dx(Ui.layers,this.zoom,m),Ui.addFeatures(ce,this.tileID.canonical,li.patternPositions,m,this.tileTransform))}this.status="done",T(null,{buckets:mr(W).filter(Ji=>!Ji.isEmpty()),featureIndex:G,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ci.image,lineAtlas:q,imageAtlas:li,glyphMap:this.returnDependencies?De:null,iconMap:this.returnDependencies?Oe:null,glyphPositions:this.returnDependencies?ci.positions:null})}},ii=En(ce.glyphDependencies,ci=>Object.keys(ci).map(Number));Object.keys(ii).length?x.send("getGlyphs",{uid:this.uid,stacks:ii},(ci,li)=>{ve||(ve=ci,De=li,It())},void 0,!1,at):De={};const Ot=Object.keys(ce.iconDependencies);Ot.length?x.send("getImages",{icons:Ot,source:this.source,tileID:this.tileID,type:"icons"},(ci,li)=>{ve||(ve=ci,Oe=li,It())},void 0,!1,at):Oe={};const Kt=Object.keys(ce.patternDependencies);Kt.length?x.send("getImages",{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"},(ci,li)=>{ve||(ve=ci,Ve=li,It())},void 0,!1,at):Ve={},It()}}function Dx(c,a,h){const m=new ue(a);for(const x of c)x.recalculate(m,h)}class Ix{constructor(a){this.entries={},this.scheduler=a}request(a,h,m,x){const T=this.entries[a]=this.entries[a]||{callbacks:[]};if(T.result){const[O,G]=T.result;return this.scheduler?this.scheduler.add(()=>{x(O,G)},h):x(O,G),()=>{}}return T.callbacks.push(x),T.cancel||(T.cancel=m((O,G)=>{T.result=[O,G];for(const W of T.callbacks)this.scheduler?this.scheduler.add(()=>{W(O,G)},h):W(O,G);setTimeout(()=>delete this.entries[a],3e3)})),()=>{T.result||(T.callbacks=T.callbacks.filter(O=>O!==x),T.callbacks.length||(T.cancel(),delete this.entries[a]))}}}function Zb(c,a,h){const m=JSON.stringify(c.request);return c.data&&(this.deduped.entries[m]={result:[null,c.data]}),this.deduped.request(m,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},x=>{const T=Bs(c.request,(O,G,W,q)=>{O?x(O):G&&x(null,{vectorTile:h?void 0:new Me(new j0(G)),rawData:G,cacheControl:W,expires:q})});return()=>{T.cancel(),x()}},a)}const qb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Mx{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(a,0,2);if(219!==h)throw new Error("Data does not appear to be in a KDBush format.");const x=m>>4;if(1!==x)throw new Error(`Got v${x} data when expected v1.`);const T=qb[15&m];if(!T)throw new Error("Unrecognized array type.");const[O]=new Uint16Array(a,2,1),[G]=new Uint32Array(a,4,1);return new Mx(G,O,T,a)}constructor(a,h=64,m=Float64Array,x){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const T=qb.indexOf(this.ArrayType),O=2*a*this.ArrayType.BYTES_PER_ELEMENT,G=a*this.IndexArrayType.BYTES_PER_ELEMENT,W=(8-G%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${m}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+G+W,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+O+G+W),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+G+W,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=a)}add(a,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=a,this.coords[this._pos++]=h,m}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return Ox(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,h,m,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:O,nodeSize:G}=this,W=[0,T.length-1,0],q=[];for(;W.length;){const ce=W.pop()||0,pe=W.pop()||0,ve=W.pop()||0;if(pe-ve<=G){for(let at=ve;at<=pe;at++){const It=O[2*at],ii=O[2*at+1];It>=a&&It<=m&&ii>=h&&ii<=x&&q.push(T[at])}continue}const De=ve+pe>>1,Oe=O[2*De],Ve=O[2*De+1];Oe>=a&&Oe<=m&&Ve>=h&&Ve<=x&&q.push(T[De]),(0===ce?a<=Oe:h<=Ve)&&(W.push(ve),W.push(De-1),W.push(1-ce)),(0===ce?m>=Oe:x>=Ve)&&(W.push(De+1),W.push(pe),W.push(1-ce))}return q}within(a,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:T,nodeSize:O}=this,G=[0,x.length-1,0],W=[],q=m*m;for(;G.length;){const ce=G.pop()||0,pe=G.pop()||0,ve=G.pop()||0;if(pe-ve<=O){for(let at=ve;at<=pe;at++)Jb(T[2*at],T[2*at+1],a,h)<=q&&W.push(x[at]);continue}const De=ve+pe>>1,Oe=T[2*De],Ve=T[2*De+1];Jb(Oe,Ve,a,h)<=q&&W.push(x[De]),(0===ce?a-m<=Oe:h-m<=Ve)&&(G.push(ve),G.push(De-1),G.push(1-ce)),(0===ce?a+m>=Oe:h+m>=Ve)&&(G.push(De+1),G.push(pe),G.push(1-ce))}return W}}function Ox(c,a,h,m,x,T){if(x-m<=h)return;const O=m+x>>1;Kb(c,a,O,m,x,T),Ox(c,a,h,m,O-1,1-T),Ox(c,a,h,O+1,x,1-T)}function Kb(c,a,h,m,x,T){for(;x>m;){if(x-m>600){const q=x-m+1,ce=h-m+1,pe=Math.log(q),ve=.5*Math.exp(2*pe/3),De=.5*Math.sqrt(pe*ve*(q-ve)/q)*(ce-q/2<0?-1:1);Kb(c,a,h,Math.max(m,Math.floor(h-ce*ve/q+De)),Math.min(x,Math.floor(h+(q-ce)*ve/q+De)),T)}const O=a[2*h+T];let G=m,W=x;for($_(c,a,m,h),a[2*x+T]>O&&$_(c,a,m,x);G<W;){for($_(c,a,G,W),G++,W--;a[2*G+T]<O;)G++;for(;a[2*W+T]>O;)W--}a[2*m+T]===O?$_(c,a,m,W):(W++,$_(c,a,W,x)),W<=h&&(m=W+1),h<=W&&(x=W-1)}}function $_(c,a,h,m){Rx(c,h,m),Rx(a,2*h,2*m),Rx(a,2*h+1,2*m+1)}function Rx(c,a,h){const m=c[a];c[a]=c[h],c[h]=m}function Jb(c,a,h,m){const x=c-h,T=a-m;return x*x+T*T}n.ARRAY_TYPE=tn,n.AUTH_ERR_MSG=St,n.Aabb=nc,n.Actor=class{constructor(c,a,h){this.target=c,this.parent=a,this.mapId=h,this.callbacks={},this.cancelCallbacks={},Xr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=zn()?c:j,this.scheduler=new Tx}send(c,a,h,m,x=!1,T){const O=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=T,this.callbacks[O]=h);const G=jn(this.globalScope)?void 0:[];return this.target.postMessage({id:O,type:c,hasCallback:!!h,targetMapId:m,mustQueue:x,sourceMapId:this.mapId,data:pf(a,G)},G),{cancel:()=>{h&&delete this.callbacks[O],this.target.postMessage({id:O,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(c){const a=c.data,h=a.id;if(h&&(!a.targetMapId||this.mapId===a.targetMapId))if("<cancel>"===a.type){const m=this.cancelCallbacks[h];delete this.cancelCallbacks[h],m&&m.cancel()}else if(a.mustQueue||zn()){const m=this.callbacks[h];this.cancelCallbacks[h]=this.scheduler.add(()=>this.processTask(h,a),m&&m.metadata||{type:"message"})}else this.processTask(h,a)}processTask(c,a){if("<response>"===a.type){const h=this.callbacks[c];delete this.callbacks[c],h&&(a.error?h(Nf(a.error)):h(null,Nf(a.data)))}else{const h=jn(this.globalScope)?void 0:[],m=a.hasCallback?(T,O)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:T?pf(T):null,data:pf(O,h)},h)}:T=>{},x=Nf(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,x,m);else if(this.parent.getWorkerSource){const T=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,T[0],x.source)[T[1]](x,m)}else m(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},n.CanonicalTileID=Dh,n.Color=Ws,n.ColorMode=fm,n.CullFaceMode=np,n.DEMData=ih,n.DataConstantProperty=Ye,n.DedupedRequest=Ix,n.DepthMode=nh,n.EXTENT=Yr,n.Elevation=class{isDataAvailableAtPoint(c){const a=this._source();if(this.isUsingMockSource()||!a||c.y<0||c.y>1)return!1;const h=a.getSource().maxzoom,m=1<<h,x=Math.floor(c.x),T=Math.floor((c.x-x)*m),O=Math.floor(c.y*m),G=this.findDEMTileFor(new Qu(h,x,h,T,O));return!(!G||!G.dem)}getAtPointOrZero(c,a=0){return this.getAtPoint(c,a)||0}getAtPoint(c,a,h=!0){if(this.isUsingMockSource())return null;null==a&&(a=null);const m=this._source();if(!m||c.y<0||c.y>1)return a;const x=m.getSource().maxzoom,T=1<<x,O=Math.floor(c.x),G=c.x-O,W=new Qu(x,O,x,Math.floor(G*T),Math.floor(c.y*T)),q=this.findDEMTileFor(W);if(!q||!q.dem)return a;const ce=q.dem,pe=1<<q.tileID.canonical.z,ve=(G*pe-q.tileID.canonical.x)*ce.dim,De=(c.y*pe-q.tileID.canonical.y)*ce.dim,Oe=Math.floor(ve),Ve=Math.floor(De);return(h?this.exaggeration():1)*Us(Us(ce.get(Oe,Ve),ce.get(Oe,Ve+1),De-Ve),Us(ce.get(Oe+1,Ve),ce.get(Oe+1,Ve+1),De-Ve),ve-Oe)}getAtTileOffset(c,a,h){const m=1<<c.canonical.z;return this.getAtPointOrZero(new _p(c.wrap+(c.canonical.x+a/Yr)/m,(c.canonical.y+h/Yr)/m))}getAtTileOffsetFunc(c,a,h,m){return x=>{const T=this.getAtTileOffset(c,x.x,x.y),O=m.upVector(c.canonical,x.x,x.y);return hu(O,O,T*m.upVectorScale(c.canonical,a,h).metersToTile),O}}getForTilePoints(c,a,h,m){if(this.isUsingMockSource())return!1;const x=p1.create(this,c,m);return!!x&&(a.forEach(T=>{T[2]=this.exaggeration()*x.getElevationAt(T[0],T[1],h)}),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(c);if(!a||!a.dem)return null;const h=a.dem.tree,m=a.tileID,x=1<<c.canonical.z-m.canonical.z;let T=c.canonical.x/x-m.canonical.x,O=c.canonical.y/x-m.canonical.y,G=0;for(let W=0;W<c.canonical.z-m.canonical.z&&!h.leaves[G];W++){T*=2,O*=2;const q=2*Math.floor(O)+Math.floor(T);G=h.childOffsets[G]+q,T%=1,O%=1}return{min:this.exaggeration()*h.minimums[G],max:this.exaggeration()*h.maximums[G]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,a,h){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},n.ErrorEvent=C,n.EvaluationParameters=ue,n.Event=w,n.Evented=M,n.FillExtrusionBucket=kp,n.Frustum=Zp,n.FrustumCorners=Fd,n.GLOBE_RADIUS=Nd,n.GLOBE_SCALE_MATCH_LATITUDE=45,n.GLOBE_ZOOM_THRESHOLD_MAX=Bd,n.GLOBE_ZOOM_THRESHOLD_MIN=kl,n.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,a){const h=new Gn,m=new zr,x=[],T=c+1+2,O=a[0]+1,G=a[0]+1+(1+a.length),W=(q,ce,pe)=>{let ve=q===T-1?q-2:0===q?q:q-1;return ve+=pe?24575:0,[ve,ce]};for(let q=0;q<T;++q)h.emplaceBack(...W(q,0,!0));for(let q=0;q<O;++q)for(let ce=0;ce<T;++ce)h.emplaceBack(...W(ce,q,(0===ce||ce===T-1)&&!0));for(let q=0;q<a.length;++q){const ce=a[q];for(let pe=0;pe<T;++pe)h.emplaceBack(...W(pe,ce,!0))}for(let q=0;q<a.length;++q){const ce=m.length,pe=a[q]+1+2,ve=new zr;for(let Ve=0;Ve<pe-1;Ve++){const at=Ve===pe-2,It=at?T*(G-a.length+q-Ve):T;for(let ii=0;ii<T-1;ii++){const Ot=Ve*T+ii;0===Ve||at||0===ii||ii===T-2?(ve.emplaceBack(Ot+1,Ot,Ot+It),ve.emplaceBack(Ot+It,Ot+It+1,Ot+1)):(m.emplaceBack(Ot+1,Ot,Ot+It),m.emplaceBack(Ot+It,Ot+It+1,Ot+1))}}const De=Ao.simpleSegment(0,ce,h.length,m.length-ce);for(let Ve=0;Ve<ve.uint16.length;Ve+=3)m.emplaceBack(ve.uint16[Ve],ve.uint16[Ve+1],ve.uint16[Ve+2]);const Oe=Ao.simpleSegment(0,ce,h.length,m.length-ce);x.push({withoutSkirts:De,withSkirts:Oe})}return{vertices:h,indices:m,segments:x}}_createGrid(c){const a=this._fillGridMeshWithLods(64,qp);this._gridSegments=a.segments,this._gridBuffer=c.createVertexBuffer(a.vertices,jf.members),this._gridIndexBuffer=c.createIndexBuffer(a.indices,!0)}_createPoles(c){const a=new zr;for(let x=0;x<=64;x++)a.emplaceBack(0,x+1,x+2);this._poleIndexBuffer=c.createIndexBuffer(a,!0);const h=new no,m=new no;this._poleSegments=[];for(let x=0,T=0;x<kl;x++){const O=360/(1<<x);h.emplaceBack(0,-Nd,0,.5,0),m.emplaceBack(0,-Nd,0,.5,1);for(let G=0;G<=64;G++){const W=G/64,q=Us(0,O,W),[ce,pe,ve]=Wf(kg,f0,q,Nd);h.emplaceBack(ce,pe,ve,W,0),m.emplaceBack(ce,pe,ve,W,1)}this._poleSegments.push(Ao.simpleSegment(T,0,66,64)),T+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(h,As,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(m,As,!1)}getGridBuffers(c,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,a){if(!this._wireframeSegments){const h=new Wo,m=64,x=m+1+2,T=1;this._wireframeSegments=[];for(let O=0,G=0;O<qp.length;O++){const W=qp[O];for(let ce=T;ce<W+T;ce++)for(let pe=T;pe<m+T;pe++){const ve=ce*x+pe;h.emplaceBack(ve,ve+1),h.emplaceBack(ve,ve+x),h.emplaceBack(ve,ve+x+1)}const q=W*m*3;this._wireframeSegments.push(Ao.simpleSegment(0,G,(W+1)*x,q)),G+=q}this._wireframeIndexBuffer=c.createIndexBuffer(h)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[a]]}},n.GlyphManager=ng,n.ImagePosition=ig,n.KDBush=Mx,n.LivePerformanceUtils=Ft,n.LngLat=Ua,n.LngLatBounds=Vh,n.LocalGlyphMode=X0,n.MAX_MERCATOR_LATITUDE=Dc,n.MercatorCoordinate=_p,n.ONE_EM=Vl,n.OverscaledTileID=Qu,n.PerformanceMarkers=bt,n.Point=kt,n.Properties=xt,n.RGBAImage=Bu,n.Ray=_f,n.RequestManager=class{constructor(c,a,h){this._transformRequestFn=c,this._customAccessToken=a,this._silenceAuthErrors=!!h,this._createSkuToken()}_createSkuToken(){const c=function(){let a="";for(let h=0;h<10;h++)a+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Et,a].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,a){return this._transformRequestFn&&this._transformRequestFn(c,a)||{url:c}}normalizeStyleURL(c,a){if(!si(c))return c;const h=Rn(c);return h.path=`/styles/v1${h.path}`,this._makeAPIURL(h,this._customAccessToken||a)}normalizeGlyphsURL(c,a){if(!si(c))return c;const h=Rn(c);return h.path=`/fonts/v1${h.path}`,this._makeAPIURL(h,this._customAccessToken||a)}normalizeSourceURL(c,a,h,m){if(!si(c))return c;const x=Rn(c);return x.path=`/v4/${x.authority}.json`,x.params.push("secure"),h&&x.params.push(`language=${h}`),m&&x.params.push(`worldview=${m}`),this._makeAPIURL(x,this._customAccessToken||a)}normalizeSpriteURL(c,a,h,m){const x=Rn(c);return si(c)?(x.path=`/styles/v1${x.path}/sprite${a}${h}`,this._makeAPIURL(x,this._customAccessToken||m)):(x.path+=`${a}${h}`,Hi(x))}normalizeTileURL(c,a,h){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!si(c))return c;const m=Rn(c);m.path=m.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${a||h&&"raster"!==m.authority&&512===h?"@2x":""}${$e.supported?".webp":"$1"}`),"raster"===m.authority?m.path=`/${Re.RASTER_URL_PREFIX}${m.path}`:(m.path=m.path.replace(/^.+\/v4\//,"/"),m.path=`/${Re.TILE_URL_VERSION}${m.path}`);const x=this._customAccessToken||function(T){for(const O of T){const G=O.match(/^access_token=(.*)$/);if(G)return G[1]}return null}(m.params)||Re.ACCESS_TOKEN;return Re.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&m.params.push(`sku=${this._skuToken}`),this._makeAPIURL(m,x)}canonicalizeTileURL(c,a){const h=Rn(c);if(!h.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!h.path.match(/\.[\w]+$/))return c;let m="mapbox://";h.path.match(/^\/raster\/v1\//)?m+=`raster/${h.path.replace(`/${Re.RASTER_URL_PREFIX}/`,"")}`:m+=`tiles/${h.path.replace(`/${Re.TILE_URL_VERSION}/`,"")}`;let x=h.params;return a&&(x=x.filter(T=>!T.match(/^access_token=/))),x.length&&(m+=`?${x.join("&")}`),m}canonicalizeTileset(c,a){const h=!!a&&si(a),m=[];for(const x of c.tiles||[])wi(x)?m.push(this.canonicalizeTileURL(x,h)):m.push(x);return m}_makeAPIURL(c,a){const h="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",m=Rn(Re.API_URL);if(c.protocol=m.protocol,c.authority=m.authority,"http"===c.protocol){const x=c.params.indexOf("secure");x>=0&&c.params.splice(x,1)}if("/"!==m.path&&(c.path=`${m.path}${c.path}`),!Re.REQUIRE_ACCESS_TOKEN)return Hi(c);if(a=a||Re.ACCESS_TOKEN,!this._silenceAuthErrors){if(!a)throw new Error(`An API access token is required to use Mapbox GL. ${h}`);if("s"===a[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${h}`)}return c.params=c.params.filter(x=>-1===x.indexOf("access_token")),c.params.push(`access_token=${a||""}`),Hi(c)}},n.ResourceType=io,n.SegmentVector=Ao,n.SourceCache=iv,n.StencilMode=Zv,n.StructArrayLayout1ui2=ua,n.StructArrayLayout2f1f2i16=Ir,n.StructArrayLayout2i4=Gn,n.StructArrayLayout2ui4=Wo,n.StructArrayLayout3f12=cs,n.StructArrayLayout3ui6=zr,n.StructArrayLayout4i8=dn,n.StructArrayLayout5f20=no,n.Texture=tv,n.Tile=Gi,n.Transitionable=Fe,n.Uniform1f=gg,n.Uniform1i=class extends Yl{constructor(c){super(c),this.current=0}set(c,a,h){this.fetchUniformLocation(c,a)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},n.Uniform2f=class extends Yl{constructor(c){super(c),this.current=[0,0]}set(c,a,h){this.fetchUniformLocation(c,a)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}},n.Uniform3f=class extends Yl{constructor(c){super(c),this.current=[0,0,0]}set(c,a,h){this.fetchUniformLocation(c,a)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}},n.Uniform4f=Dm,n.UniformColor=vg,n.UniformMatrix2f=class extends Yl{constructor(c){super(c),this.current=Ch}set(c,a,h){if(this.fetchUniformLocation(c,a))for(let m=0;m<4;m++)if(h[m]!==this.current[m]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}},n.UniformMatrix3f=class extends Yl{constructor(c){super(c),this.current=xv}set(c,a,h){if(this.fetchUniformLocation(c,a))for(let m=0;m<9;m++)if(h[m]!==this.current[m]){this.current=h,this.gl.uniformMatrix3fv(this.location,!1,h);break}}},n.UniformMatrix4f=class extends Yl{constructor(c){super(c),this.current=a0}set(c,a,h){if(this.fetchUniformLocation(c,a)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let m=1;m<16;m++)if(h[m]!==this.current[m]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}},n.UnwrappedTileID=Iy,n.ValidationError=lr,n.VectorTileFeature=Lt,n.VectorTileWorkerSource=class extends M{constructor(c,a,h,m,x){super(),this.actor=c,this.layerIndex=a,this.availableImages=h,this.loadVectorData=x||Zb,this.loading={},this.loaded={},this.deduped=new Ix(c.scheduler),this.isSpriteLoaded=m,this.scheduler=c.scheduler}loadTile(c,a){const h=c.uid,m=c&&c.request,x=m&&m.collectResourceTiming,T=this.loading[h]=new hC(c);T.abort=this.loadVectorData(c,(O,G)=>{const W=!this.loading[h];if(delete this.loading[h],W||O||!G)return T.status="done",W||(this.loaded[h]=T),a(O);const q=G.rawData,ce={};G.expires&&(ce.expires=G.expires),G.cacheControl&&(ce.cacheControl=G.cacheControl),T.vectorTile=G.vectorTile||new Me(new j0(q));const pe=()=>{T.parse(T.vectorTile,this.layerIndex,this.availableImages,this.actor,(ve,De)=>{if(ve||!De)return a(ve);const Oe={};if(x){const Ve=Wt(m);Ve.length>0&&(Oe.resourceTiming=JSON.parse(JSON.stringify(Ve)))}a(null,hr({rawTileData:q.slice(0)},De,ce,Oe))})};this.isSpriteLoaded?pe():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(pe,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):pe()}),this.loaded=this.loaded||{},this.loaded[h]=T})}reloadTile(c,a){const h=this.loaded,m=c.uid,x=this;if(h&&h[m]){const T=h[m];T.showCollisionBoxes=c.showCollisionBoxes,T.enableTerrain=!!c.enableTerrain,T.projection=c.projection,T.tileTransform=hm(c.tileID.canonical,c.projection);const O=(G,W)=>{const q=T.reloadCallback;q&&(delete T.reloadCallback,T.parse(T.vectorTile,x.layerIndex,this.availableImages,x.actor,q)),a(G,W)};"parsing"===T.status?T.reloadCallback=O:"done"===T.status&&(T.vectorTile?T.parse(T.vectorTile,this.layerIndex,this.availableImages,this.actor,O):O())}}abortTile(c,a){const h=c.uid,m=this.loading[h];m&&(m.abort&&m.abort(),delete this.loading[h]),a()}removeTile(c,a){const h=this.loaded,m=c.uid;h&&h[m]&&delete h[m],a()}},n.WritingMode=eh,n.ZoomDependentExpression=au,n.add=Uh,n.addDynamicAttributes=jg,n.adjoint=function(c,a){var h=a[0],m=a[1],x=a[2],T=a[3],O=a[4],G=a[5],W=a[6],q=a[7],ce=a[8];return c[0]=O*ce-G*q,c[1]=x*q-m*ce,c[2]=m*G-x*O,c[3]=G*W-T*ce,c[4]=h*ce-x*W,c[5]=x*T-h*G,c[6]=T*q-O*W,c[7]=m*W-h*q,c[8]=h*O-m*T,c},n.asyncAll=Fn,n.bezier=Xi,n.bindAll=Xr,n.boundsAttributes=oi,n.bufferConvexPolygon=function(c,a){const h=[];for(let m=0;m<c.length;m++){const x=_n(m-1,-1,c.length-1),T=_n(m+1,-1,c.length-1),O=c[m],G=c[T],W=c[x].sub(O).unit(),q=G.sub(O).unit(),ce=q.angleWithSep(W.x,W.y),pe=W.add(q).unit().mult(-1*a/Math.sin(ce/2));h.push(O.add(pe))}return h},n.cacheEntryPossiblyAdded=function(c){Ks++,Ks>Vs&&(c.getActor().send("enforceCacheSizeLimit",zs),Ks=0)},n.calculateGlobeLabelMatrix=function(c,a){const{x:h,y:m}=c.point,x=h0(h,m,c.worldSize/c._pixelsPerMercatorPixel,0,0);return Hf(x,x,Jp(Sc(a)))},n.calculateGlobeMatrix=function(c){const{x:a,y:h}=c.point,{lng:m,lat:x}=c._center;return h0(a,h,c.worldSize,m,x)},n.calculateGlobeMercatorMatrix=function(c){const a=c.pixelsPerMeter,h=a/$h(1,c.center.lat),m=Do(new Float64Array(16));return cd(m,m,[c.point.x,c.point.y,0]),$o(m,m,[h,h,a]),Float32Array.from(m)},n.circumferenceAtLatitude=p0,n.clamp=qi,n.clearTileCache=function(c){if(!Es())return;const a=j.caches.delete(xr);c&&a.catch(c).then(()=>c())},n.clipLine=e1,n.clone=function(c){var a=new tn(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},n.clone$1=Cs,n.collisionCircleLayout=ex,n.config=Re,n.conjugate=function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c[3]=a[3],c},n.create=function(){var c=new tn(16);return tn!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},n.create$1=hp,n.createExpression=Ec,n.createLayout=Ei,n.createStyleLayer=function(c){return"custom"===c.type?new Q0(c):new Ex[c.type](c)},n.cross=Th,n.degToRad=hi,n.distance=function(c,a){return Math.hypot(a[0]-c[0],a[1]-c[1],a[2]-c[2])},n.div=function(c,a,h){return c[0]=a[0]/h[0],c[1]=a[1]/h[1],c[2]=a[2]/h[2],c},n.dot=Pu,n.earthRadius=Zc,n.ease=Tn,n.easeCubicInOut=Ri,n.ecefToLatLng=function([c,a,h]){const m=Math.hypot(c,a,h),x=Math.atan2(c,h),T=.5*Math.PI-Math.acos(-a/m);return new Ua(Dt(x),Dt(T))},n.emitValidationErrors=fg,n.endsWith=Fr,n.enforceCacheSizeLimit=function(c){wr(),Fs&&Fs.then(a=>{a.keys().then(h=>{for(let m=0;m<h.length-c;m++)a.delete(h[m])})})},n.evaluateSizeForFeature=tg,n.evaluateSizeForZoom=Qf,n.evaluateVariableOffset=s1,n.evented=Y,n.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]},n.exactEquals$1=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]},n.exported=u,n.exported$1=$e,n.extend=hr,n.extend$1=H,n.fillExtrusionHeightLift=S_,n.filterObject=Os,n.fromMat4=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[4],c[4]=a[5],c[5]=a[6],c[6]=a[8],c[7]=a[9],c[8]=a[10],c},n.fromQuat=function(c,a){var h=a[0],m=a[1],x=a[2],T=a[3],O=h+h,G=m+m,W=x+x,q=h*O,ce=m*O,pe=m*G,ve=x*O,De=x*G,Oe=x*W,Ve=T*O,at=T*G,It=T*W;return c[0]=1-pe-Oe,c[1]=ce+It,c[2]=ve-at,c[3]=0,c[4]=ce-It,c[5]=1-q-Oe,c[6]=De+Ve,c[7]=0,c[8]=ve+at,c[9]=De-Ve,c[10]=1-q-pe,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},n.fromRotation=function(c,a){var h=Math.sin(a),m=Math.cos(a);return c[0]=m,c[1]=h,c[2]=0,c[3]=-h,c[4]=m,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},n.fromScaling=yg,n.furthestTileCorner=function(c){const a=Math.round((c+45+360)%360/90)%4;return yi[a]},n.getAABBPointSquareDist=function(c,a,h){let m=0;for(let x=0;x<2;++x){const T=h?h[x]:0;c[x]>T&&(m+=(c[x]-T)*(c[x]-T)),a[x]<T&&(m+=(T-a[x])*(T-a[x]))}return m},n.getAnchorAlignment=P_,n.getAnchorJustification=z_,n.getBounds=function(c){let a=1/0,h=1/0,m=-1/0,x=-1/0;for(const T of c)a=Math.min(a,T.x),h=Math.min(h,T.y),m=Math.max(m,T.x),x=Math.max(x,T.y);return{min:new kt(a,h),max:new kt(m,x)}},n.getColumn=ur,n.getDefaultExportFromCjs=Tt,n.getGridMatrix=function(c,a,h,m){const x=a.getNorth(),T=a.getSouth(),O=a.getWest(),G=a.getEast(),W=1<<c.z,q=G-O,ce=x-T,pe=q/64,ve=-ce/qp[h],De=[0,pe,0,ve,0,0,x,O,0];if(c.z>0){const Oe=180/m;kc(De,De,[Oe/q+1,0,0,0,Oe/ce+1,0,-.5*Oe/pe,.5*Oe/ve,1])}return De[2]=W,De[5]=c.x,De[8]=c.y,De},n.getImage=At,n.getJSON=function(c,a){return Ss(hr(c,{type:"json"}),a)},n.getLatitudinalLod=function(c){const a=Dc-5;c=qi(c,-a,a)/a*90;const h=Math.pow(Math.abs(Math.sin(hi(c))),3);return Math.round(h*(qp.length-1))},n.getMapSessionAPI=ji,n.getPerformanceMeasurement=Wt,n.getProjection=J0,n.getRTLTextPluginStatus=V,n.getReferrer=Rs,n.getTilePoint=function(c,{x:a,y:h},m=0){return new kt(((a-m)*c.scale-c.x)*Yr,(h*c.scale-c.y)*Yr)},n.getTileVec3=function(c,a,h=0){return Od(((a.x-h)*c.scale-c.x)*Yr,(a.y*c.scale-c.y)*Yr,Cv(a.z,a.y))},n.getVideo=function(c,a){const h=j.document.createElement("video");h.muted=!0,h.onloadstart=function(){a(null,h)};for(let m=0;m<c.length;m++){const x=j.document.createElement("source");xa(c[m])||(h.crossOrigin="Anonymous"),x.src=c[m],h.appendChild(x)}return{cancel:()=>{}}},n.globeCenterToScreenPoint=function(c){const a=[0,0,0],h=Do(new Float64Array(16));return Hf(h,c.pixelMatrix,c.globeMatrix),Xo(a,a,h),new kt(a[0],a[1])},n.globeDenormalizeECEF=Jp,n.globeECEFOrigin=function(c,a){const h=[0,0,0];return Xo(h,h,gp(Sc(a.canonical))),Xo(h,h,c),h},n.globeMetersToEcef=du,n.globeNormalizeECEF=gp,n.globePixelsToTileUnits=function(c,a){return Yr/(512*Math.pow(2,c))*Nm(Sc(a))},n.globePoleMatrixForTile=function(c,a,h){const m=Do(new Float64Array(16)),x=(a/(1<<c)-.5)*Math.PI*2;return Im(m,h.globeMatrix,x),Float32Array.from(m)},n.globeTileBounds=Sc,n.globeTiltAtLngLat=Qp,n.globeToMercatorTransition=pl,n.globeUseCustomAntiAliasing=function(c,a,h){const m=pl(h.zoom),x=c.style.map._antialias,T=!!a.extStandardDerivatives,O=a.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return 0===m&&!x&&!O&&T},n.identity=Do,n.identity$1=Rm,n.invert=ld,n.isFullscreen=function(){return!!j.document.fullscreenElement||!!j.document.webkitFullscreenElement},n.isLngLatBehindGlobe=vp,n.isMapAuthenticated=function(c){return bn.has(c)},n.isMapboxURL=si,n.isSafariWithAntialiasingBug=function(c){const a=c.navigator?c.navigator.userAgent:null;return!!jn(c)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.latFromMercatorY=Ac,n.latLngToECEF=$f,n.len=vf,n.length=dp,n.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},n.lngFromMercatorX=Sh,n.loadVectorTile=Zb,n.makeRequest=Ss,n.mapValue=function(c,a,h,m,x){return qi((c-a)/(h-a)*(x-m)+m,m,x)},n.mercatorScale=m0,n.mercatorXfromLng=zd,n.mercatorYfromLat=hd,n.mercatorZfromAltitude=$h,n.mul=Wp,n.mul$1=bv,n.multiply=Hf,n.multiply$1=kc,n.multiply$2=Mm,n.nextPowerOfTwo=Jn,n.normalize=El,n.normalize$1=Cg,n.normalize$2=bg,n.number=Us,n.ortho=function(c,a,h,m,x,T,O){var G=1/(a-h),W=1/(m-x),q=1/(T-O);return c[0]=-2*G,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*W,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*q,c[11]=0,c[12]=(a+h)*G,c[13]=(x+m)*W,c[14]=(O+T)*q,c[15]=1,c},n.pbf=lm,n.perspective=function(c,a,h,m,x){var T,O=1/Math.tan(a/2);return c[0]=O/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=O,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,null!=x&&x!==1/0?(c[10]=(x+m)*(T=1/(m-x)),c[14]=2*x*m*T):(c[10]=-1,c[14]=-2*m),c},n.pick=function(c,a){const h={};for(let m=0;m<a.length;m++){const x=a[m];x in c&&(h[x]=c[x])}return h},n.plugin=re,n.pointGeometry=Ci,n.polesInViewport=function(c){const a=Do(new Float64Array(16));Hf(a,c.pixelMatrix,c.globeMatrix);const h=[0,$c,0],m=[0,Wh,0];return Xo(h,h,a),Xo(m,m,a),[h[0]>0&&h[0]<=c.width&&h[1]>0&&h[1]<=c.height&&!vp(c,new Ua(c.center.lat,90)),m[0]>0&&m[0]<=c.width&&m[1]>0&&m[1]<=c.height&&!vp(c,new Ua(c.center.lat,-90))]},n.polygonContainsPoint=Ah,n.polygonIntersectsBox=tm,n.polygonIntersectsPolygon=Tl,n.polygonizeBounds=function(c,a,h=0,m=!0){const x=new kt(h,h),T=c.sub(x),O=a.add(x),G=[T,new kt(O.x,T.y),O,new kt(T.x,O.y)];return m&&G.push(T.clone()),G},n.posAttributes=jf,n.postMapLoadEvent=Qe,n.postPerformanceEvent=ui,n.postTurnstileEvent=ot,n.potpack=ep,n.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},n.radToDeg=Dt,n.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.registerForPluginStateChange=function(c){return c({pluginStatus:k,pluginURL:d}),Y.on("pluginStateChange",c),c},n.removeAuthState=function(c){bn.delete(c)},n.renderColorRamp=T0,n.resample=Tg,n.rotateX=_g,n.rotateX$1=Tc,n.rotateY=Im,n.rotateY$1=wg,n.rotateZ=function(c,a,h){var m=Math.sin(h),x=Math.cos(h),T=a[0],O=a[1],G=a[2],W=a[3],q=a[4],ce=a[5],pe=a[6],ve=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=T*x+q*m,c[1]=O*x+ce*m,c[2]=G*x+pe*m,c[3]=W*x+ve*m,c[4]=q*x-T*m,c[5]=ce*x-O*m,c[6]=pe*x-G*m,c[7]=ve*x-W*m,c},n.rotateZ$1=function(c,a,h){h*=.5;var m=a[0],x=a[1],T=a[2],O=a[3],G=Math.sin(h),W=Math.cos(h);return c[0]=m*W+x*G,c[1]=x*W-m*G,c[2]=T*W+O*G,c[3]=O*W-T*G,c},n.scale=$o,n.scale$1=Om,n.scale$2=hu,n.scaleAndAdd=Rd,n.set=function(c,a,h,m){return c[0]=a,c[1]=h,c[2]=m,c},n.setCacheLimits=function(c,a){zs=c,Vs=a},n.setColumn=function(c,a,h){c[4*a+0]=h[0],c[4*a+1]=h[1],c[4*a+2]=h[2],c[4*a+3]=h[3]},n.setRTLTextPlugin=function(c,a,h=!1){if(k===Hp||k===Am||k===pg)throw new Error("setRTLTextPlugin cannot be called multiple times.");d=u.resolveURL(c),k=Hp,mf=a,I(),h||Q()},n.smoothstep=nn,n.spec=B,n.squaredLength=function(c){var a=c[0],h=c[1],m=c[2];return a*a+h*h+m*m},n.storeAuthState=function(c,a){a?bn.add(c):bn.delete(c)},n.sub=jh,n.subtract=$p,n.symbolSize=H0,n.tileAABB=function(c,a,h,m,x,T,O,G,W){if("globe"===W.name)return function wv(c,a,h){const m=a/c.worldSize,x=c.globeMatrix;if(h.z<=1){const Ui=Sc(h).getCorners();return pp(Ui,x,m),nc.fromPoints(Ui)}const T=Kp(h),O=Eg(T);pp(O,x,m);const G=Number.MAX_VALUE,W=[-G,-G,-G],q=[G,G,G];if(T.contains(c.center)){for(const Kn of O)ic(q,q,Kn),Lu(W,W,Kn);W[2]=0;const Ui=c.point,wn=[Ui.x*m,Ui.y*m,0];return ic(q,q,wn),Lu(W,W,wn),new nc(q,W)}const ce=[x[12]*m,x[13]*m,x[14]*m],pe=T.getCenter(),ve=qi(c.center.lat,-Dc,Dc),De=qi(pe.lat,-Dc,Dc),Oe=zd(c.center.lng),Ve=hd(ve);let at=Oe-zd(pe.lng);const It=Ve-hd(De);at>.5?at-=1:at<-.5&&(at+=1);let ii=0;Math.abs(at)>Math.abs(It)?ii=at>=0?1:3:(ii=It>=0?0:2,Rd(ce,ce,[x[4]*m,x[5]*m,x[6]*m],-Math.sin(hi(It>=0?T.getSouth():T.getNorth()))*Nd));const Ot=O[ii],Kt=O[(ii+1)%4],ci=new Pm(Ot,Kt,ce),li=[u0(ci,0)||Ot[0],u0(ci,1)||Ot[1],u0(ci,2)||Ot[2]],Ji=pl(c.zoom);if(Ji>0){const Ui=function({x:Kn,y:rn,z:In},An,Vn,er,gn){const _r=1/(1<<In);let jr=Kn*_r,br=jr+_r,Zs=rn*_r,tr=Zs+_r,rs=0;const js=(jr+br)/2-er;return js>.5?rs=-1:js<-.5&&(rs=1),jr=((jr+rs)*An-(er*=An))*Vn+er,br=((br+rs)*An-er)*Vn+er,Zs=(Zs*An-(gn*=An))*Vn+gn,tr=(tr*An-gn)*Vn+gn,[[jr,tr,0],[br,tr,0],[br,Zs,0],[jr,Zs,0]]}(h,a,c._pixelsPerMercatorPixel,Oe,Ve);for(let Kn=0;Kn<O.length;Kn++)fp(O[Kn],Ui[Kn],Ji);const wn=Uh([],Ui[ii],Ui[(ii+1)%4]);hu(wn,wn,.5),fp(li,wn,Ji)}for(const Ui of O)ic(q,q,Ui),Lu(W,W,Ui);return q[2]=Math.min(Ot[2],Kt[2]),ic(q,q,li),Lu(W,W,li),new nc(q,W)}(c,a,new Dh(h,m,x));const q=hm({z:h,x:m,y:x},W);return new nc([(T+q.x/q.scale)*a,a*(q.y/q.scale),O],[(T+q.x2/q.scale)*a,a*(q.y2/q.scale),G])},n.tileCornersToBounds=Kp,n.tileTransform=hm,n.transformMat3=function(c,a,h){var m=a[0],x=a[1],T=a[2];return c[0]=m*h[0]+x*h[3]+T*h[6],c[1]=m*h[1]+x*h[4]+T*h[7],c[2]=m*h[2]+x*h[5]+T*h[8],c},n.transformMat4=Xo,n.transformMat4$1=Uf,n.transformQuat=Xp,n.transitionTileAABBinECEF=Fm,n.translate=cd,n.transpose=function(c,a){if(c===a){var h=a[1],m=a[2],x=a[5];c[1]=a[3],c[2]=a[6],c[3]=h,c[5]=a[7],c[6]=m,c[7]=x}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c},n.triggerPluginCompletionEvent=_,n.uniqueId=Si,n.updateGlobeVertexNormal=function(c,a,h,m,x){const T=5*a+2;c.float32[T+0]=h,c.float32[T+1]=m,c.float32[T+2]=x},n.validateCustomStyleLayer=function(c){const a=[],h=c.id;return void 0===h&&a.push({message:`layers.${h}: missing required property "id"`}),void 0===c.render&&a.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&"2d"!==c.renderingMode&&"3d"!==c.renderingMode&&a.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),a},n.validateFilter=c=>Ju(Cd(c)),n.validateFog=c=>Ju(Or(c)),n.validateLayer=c=>Ju(ae(c)),n.validateLight=c=>Ju(Tr(c)),n.validateSource=c=>Ju(Ee(c)),n.validateStyle=yh,n.validateTerrain=c=>Ju(ys(c)),n.values=mr,n.vectorTile=Og,n.version=He,n.warnOnce=Zn,n.window=j,n.wrap=_n}),mt(0,function(n){function j(Gt){if("number"==typeof Gt||"boolean"==typeof Gt||"string"==typeof Gt||null==Gt)return JSON.stringify(Gt);if(Array.isArray(Gt)){let Je="[";for(const At of Gt)Je+=`${j(At)},`;return`${Je}]`}let Ue="{";for(const Je of Object.keys(Gt).sort())Ue+=`${Je}:${j(Gt[Je])},`;return`${Ue}}`}function He(Gt){let Ue="";for(const Je of n.refProperties)Ue+=`/${j(Gt[Je])}`;return Ue}class Be{constructor(Ue){this.keyCache={},Ue&&this.replace(Ue)}replace(Ue){this._layerConfigs={},this._layers={},this.update(Ue,[])}update(Ue,Je){for(const St of Ue)this._layerConfigs[St.id]=St,(this._layers[St.id]=n.createStyleLayer(St)).compileFilter(),this.keyCache[St.id]&&delete this.keyCache[St.id];for(const St of Je)delete this.keyCache[St],delete this._layerConfigs[St],delete this._layers[St];this.familiesBySource={};const At=function(St,si){const wi={};for(let Mt=0;Mt<St.length;Mt++){const zi=si&&si[St[Mt].id]||He(St[Mt]);si&&(si[St[Mt].id]=zi);let Sn=wi[zi];Sn||(Sn=wi[zi]=[]),Sn.push(St[Mt])}const ki=[];for(const Mt in wi)ki.push(wi[Mt]);return ki}(n.values(this._layerConfigs),this.keyCache);for(const St of At){const si=St.map(Rn=>this._layers[Rn.id]),wi=si[0];if("none"===wi.visibility)continue;const ki=wi.source||"";let Mt=this.familiesBySource[ki];Mt||(Mt=this.familiesBySource[ki]={});const zi=wi.sourceLayer||"_geojsonTileLayer";let Sn=Mt[zi];Sn||(Sn=Mt[zi]=[]),Sn.push(si)}}}class Re{loadTile(Ue,Je){const{uid:At,encoding:St,rawImageData:si,padding:wi,buildQuadTree:ki}=Ue,Mt=n.window.ImageBitmap&&si instanceof n.window.ImageBitmap?this.getImageData(si,wi):si;Je(null,new n.DEMData(At,Mt,St,wi<1,ki))}getImageData(Ue,Je){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ue.width,Ue.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ue.width,this.offscreenCanvas.height=Ue.height,this.offscreenCanvasContext.drawImage(Ue,0,0,Ue.width,Ue.height);const At=this.offscreenCanvasContext.getImageData(-Je,-Je,Ue.width+2*Je,Ue.height+2*Je);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),At}}function $e(Gt,Ue){if(0!==Gt.length){it(Gt[0],Ue);for(var Je=1;Je<Gt.length;Je++)it(Gt[Je],!Ue)}}function it(Gt,Ue){for(var Je=0,At=0,St=0,si=Gt.length,wi=si-1;St<si;wi=St++){var ki=(Gt[St][0]-Gt[wi][0])*(Gt[wi][1]+Gt[St][1]),Mt=Je+ki;At+=Math.abs(Je)>=Math.abs(ki)?Je-Mt+ki:ki-Mt+Je,Je=Mt}Je+At>=0!=!!Ue&&Gt.reverse()}var nt=n.getDefaultExportFromCjs(function Gt(Ue,Je){var At,St=Ue&&Ue.type;if("FeatureCollection"===St)for(At=0;At<Ue.features.length;At++)Gt(Ue.features[At],Je);else if("GeometryCollection"===St)for(At=0;At<Ue.geometries.length;At++)Gt(Ue.geometries[At],Je);else if("Feature"===St)Gt(Ue.geometry,Je);else if("Polygon"===St)$e(Ue.coordinates,Je);else if("MultiPolygon"===St)for(At=0;At<Ue.coordinates.length;At++)$e(Ue.coordinates[At],Je);return Ue});const _t=n.VectorTileFeature.prototype.toGeoJSON;var gt={exports:{}},Xt=n.pointGeometry,Et=n.vectorTile.VectorTileFeature,Tt=Nt;function Nt(Gt,Ue){this.options=Ue||{},this.features=Gt,this.length=Gt.length}function Pi(Gt,Ue){this.id="number"==typeof Gt.id?Gt.id:void 0,this.type=Gt.type,this.rawGeometry=1===Gt.type?[Gt.geometry]:Gt.geometry,this.properties=Gt.tags,this.extent=Ue||4096}Nt.prototype.feature=function(Gt){return new Pi(this.features[Gt],this.options.extent)},Pi.prototype.loadGeometry=function(){var Gt=this.rawGeometry;this.geometry=[];for(var Ue=0;Ue<Gt.length;Ue++){for(var Je=Gt[Ue],At=[],St=0;St<Je.length;St++)At.push(new Xt(Je[St][0],Je[St][1]));this.geometry.push(At)}return this.geometry},Pi.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Gt=this.geometry,Ue=1/0,Je=-1/0,At=1/0,St=-1/0,si=0;si<Gt.length;si++)for(var wi=Gt[si],ki=0;ki<wi.length;ki++){var Mt=wi[ki];Ue=Math.min(Ue,Mt.x),Je=Math.max(Je,Mt.x),At=Math.min(At,Mt.y),St=Math.max(St,Mt.y)}return[Ue,At,Je,St]},Pi.prototype.toGeoJSON=Et.prototype.toGeoJSON;var tt=n.pbf,Ci=Tt;function Mi(Gt){var Ue=new tt;return function(Je,At){for(var St in Je.layers)At.writeMessage(3,kt,Je.layers[St])}(Gt,Ue),Ue.finish()}function kt(Gt,Ue){var Je;Ue.writeVarintField(15,Gt.version||1),Ue.writeStringField(1,Gt.name||""),Ue.writeVarintField(5,Gt.extent||4096);var At={keys:[],values:[],keycache:{},valuecache:{}};for(Je=0;Je<Gt.length;Je++)At.feature=Gt.feature(Je),Ue.writeMessage(2,Oi,At);var St=At.keys;for(Je=0;Je<St.length;Je++)Ue.writeStringField(3,St[Je]);var si=At.values;for(Je=0;Je<si.length;Je++)Ue.writeMessage(4,Ri,si[Je])}function Oi(Gt,Ue){var Je=Gt.feature;void 0!==Je.id&&Ue.writeVarintField(1,Je.id),Ue.writeMessage(2,vi,Gt),Ue.writeVarintField(3,Je.type),Ue.writeMessage(4,yi,Je)}function vi(Gt,Ue){var Je=Gt.feature,At=Gt.keys,St=Gt.values,si=Gt.keycache,wi=Gt.valuecache;for(var ki in Je.properties){var Mt=Je.properties[ki],zi=si[ki];if(null!==Mt){void 0===zi&&(At.push(ki),si[ki]=zi=At.length-1),Ue.writeVarint(zi);var Sn=typeof Mt;"string"!==Sn&&"boolean"!==Sn&&"number"!==Sn&&(Mt=JSON.stringify(Mt));var Rn=Sn+":"+Mt,Hi=wi[Rn];void 0===Hi&&(St.push(Mt),wi[Rn]=Hi=St.length-1),Ue.writeVarint(Hi)}}}function hi(Gt,Ue){return(Ue<<3)+(7&Gt)}function Dt(Gt){return Gt<<1^Gt>>31}function yi(Gt,Ue){for(var Je=Gt.loadGeometry(),At=Gt.type,St=0,si=0,wi=Je.length,ki=0;ki<wi;ki++){var Mt=Je[ki],zi=1;1===At&&(zi=Mt.length),Ue.writeVarint(hi(1,zi));for(var Sn=3===At?Mt.length-1:Mt.length,Rn=0;Rn<Sn;Rn++){1===Rn&&1!==At&&Ue.writeVarint(hi(2,Sn-1));var Hi=Mt[Rn].x-St,ar=Mt[Rn].y-si;Ue.writeVarint(Dt(Hi)),Ue.writeVarint(Dt(ar)),St+=Hi,si+=ar}3===At&&Ue.writeVarint(hi(7,1))}}function Ri(Gt,Ue){var Je=typeof Gt;"string"===Je?Ue.writeStringField(1,Gt):"boolean"===Je?Ue.writeBooleanField(7,Gt):"number"===Je&&(Gt%1!=0?Ue.writeDoubleField(3,Gt):Gt<0?Ue.writeSVarintField(6,Gt):Ue.writeVarintField(5,Gt))}gt.exports=Mi,gt.exports.fromVectorTileJs=Mi,gt.exports.fromGeojsonVt=function(Gt,Ue){Ue=Ue||{};var Je={};for(var At in Gt)Je[At]=new Ci(Gt[At].features,Ue),Je[At].name=At,Je[At].version=Ue.version,Je[At].extent=Ue.extent;return Mi({layers:Je})},gt.exports.GeoJSONWrapper=Ci;var Xi=n.getDefaultExportFromCjs(gt.exports);const Tn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Gt=>Gt},qi=Math.fround||(nn=new Float32Array(1),Gt=>(nn[0]=+Gt,nn[0]));var nn;const _n=3,Fn=5,mr=6;class hr{constructor(Ue){this.options=Object.assign(Object.create(Tn),Ue),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ue){const{log:Je,minZoom:At,maxZoom:St}=this.options;Je&&console.time("total time");const si=`prepare ${Ue.length} points`;Je&&console.time(si),this.points=Ue;const wi=[];for(let Mt=0;Mt<Ue.length;Mt++){const zi=Ue[Mt];if(!zi.geometry)continue;const[Sn,Rn]=zi.geometry.coordinates,Hi=qi(kn(Sn)),ar=qi(Jn(Rn));wi.push(Hi,ar,1/0,Mt,-1,1),this.options.reduce&&wi.push(0)}let ki=this.trees[St+1]=this._createTree(wi);Je&&console.timeEnd(si);for(let Mt=St;Mt>=At;Mt--){const zi=+Date.now();ki=this.trees[Mt]=this._createTree(this._cluster(ki,Mt)),Je&&console.log("z%d: %d clusters in %dms",Mt,ki.numItems,+Date.now()-zi)}return Je&&console.timeEnd("total time"),this}getClusters(Ue,Je){let At=((Ue[0]+180)%360+360)%360-180;const St=Math.max(-90,Math.min(90,Ue[1]));let si=180===Ue[2]?180:((Ue[2]+180)%360+360)%360-180;const wi=Math.max(-90,Math.min(90,Ue[3]));if(Ue[2]-Ue[0]>=360)At=-180,si=180;else if(At>si){const Rn=this.getClusters([At,St,180,wi],Je),Hi=this.getClusters([-180,St,si,wi],Je);return Rn.concat(Hi)}const ki=this.trees[this._limitZoom(Je)],Mt=ki.range(kn(At),Jn(wi),kn(si),Jn(St)),zi=ki.data,Sn=[];for(const Rn of Mt){const Hi=this.stride*Rn;Sn.push(zi[Hi+Fn]>1?Nr(zi,Hi,this.clusterProps):this.points[zi[Hi+_n]])}return Sn}getChildren(Ue){const Je=this._getOriginId(Ue),At=this._getOriginZoom(Ue),St="No cluster with the specified id.",si=this.trees[At];if(!si)throw new Error(St);const wi=si.data;if(Je*this.stride>=wi.length)throw new Error(St);const ki=this.options.radius/(this.options.extent*Math.pow(2,At-1)),Mt=si.within(wi[Je*this.stride],wi[Je*this.stride+1],ki),zi=[];for(const Sn of Mt){const Rn=Sn*this.stride;wi[Rn+4]===Ue&&zi.push(wi[Rn+Fn]>1?Nr(wi,Rn,this.clusterProps):this.points[wi[Rn+_n]])}if(0===zi.length)throw new Error(St);return zi}getLeaves(Ue,Je,At){const St=[];return this._appendLeaves(St,Ue,Je=Je||10,At=At||0,0),St}getTile(Ue,Je,At){const St=this.trees[this._limitZoom(Ue)],si=Math.pow(2,Ue),{extent:wi,radius:ki}=this.options,Mt=ki/wi,zi=(At-Mt)/si,Sn=(At+1+Mt)/si,Rn={features:[]};return this._addTileFeatures(St.range((Je-Mt)/si,zi,(Je+1+Mt)/si,Sn),St.data,Je,At,si,Rn),0===Je&&this._addTileFeatures(St.range(1-Mt/si,zi,1,Sn),St.data,si,At,si,Rn),Je===si-1&&this._addTileFeatures(St.range(0,zi,Mt/si,Sn),St.data,-1,At,si,Rn),Rn.features.length?Rn:null}getClusterExpansionZoom(Ue){let Je=this._getOriginZoom(Ue)-1;for(;Je<=this.options.maxZoom;){const At=this.getChildren(Ue);if(Je++,1!==At.length)break;Ue=At[0].properties.cluster_id}return Je}_appendLeaves(Ue,Je,At,St,si){const wi=this.getChildren(Je);for(const ki of wi){const Mt=ki.properties;if(Mt&&Mt.cluster?si+Mt.point_count<=St?si+=Mt.point_count:si=this._appendLeaves(Ue,Mt.cluster_id,At,St,si):si<St?si++:Ue.push(ki),Ue.length===At)break}return si}_createTree(Ue){const Je=new n.KDBush(Ue.length/this.stride|0,this.options.nodeSize,Float32Array);for(let At=0;At<Ue.length;At+=this.stride)Je.add(Ue[At],Ue[At+1]);return Je.finish(),Je.data=Ue,Je}_addTileFeatures(Ue,Je,At,St,si,wi){for(const ki of Ue){const Mt=ki*this.stride,zi=Je[Mt+Fn]>1;let Sn,Rn,Hi;if(zi)Sn=Si(Je,Mt,this.clusterProps),Rn=Je[Mt],Hi=Je[Mt+1];else{const Vt=this.points[Je[Mt+_n]];Sn=Vt.properties;const[dt,ot]=Vt.geometry.coordinates;Rn=kn(dt),Hi=Jn(ot)}const ar={type:1,geometry:[[Math.round(this.options.extent*(Rn*si-At)),Math.round(this.options.extent*(Hi*si-St))]],tags:Sn};let Ht;Ht=zi||this.options.generateId?Je[Mt+_n]:this.points[Je[Mt+_n]].id,void 0!==Ht&&(ar.id=Ht),wi.features.push(ar)}}_limitZoom(Ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ue),this.options.maxZoom+1))}_cluster(Ue,Je){const{radius:At,extent:St,reduce:si,minPoints:wi}=this.options,ki=At/(St*Math.pow(2,Je)),Mt=Ue.data,zi=[],Sn=this.stride;for(let Rn=0;Rn<Mt.length;Rn+=Sn){if(Mt[Rn+2]<=Je)continue;Mt[Rn+2]=Je;const Hi=Mt[Rn],ar=Mt[Rn+1],Ht=Ue.within(Mt[Rn],Mt[Rn+1],ki),Vt=Mt[Rn+Fn];let dt=Vt;for(const ot of Ht){const Xe=ot*Sn;Mt[Xe+2]>Je&&(dt+=Mt[Xe+Fn])}if(dt>Vt&&dt>=wi){let ot,Xe=Hi*Vt,Qe=ar*Vt,Rt=-1;const ui=((Rn/Sn|0)<<5)+(Je+1)+this.points.length;for(const en of Ht){const ji=en*Sn;if(Mt[ji+2]<=Je)continue;Mt[ji+2]=Je;const bn=Mt[ji+Fn];Xe+=Mt[ji]*bn,Qe+=Mt[ji+1]*bn,Mt[ji+4]=ui,si&&(ot||(ot=this._map(Mt,Rn,!0),Rt=this.clusterProps.length,this.clusterProps.push(ot)),si(ot,this._map(Mt,ji)))}Mt[Rn+4]=ui,zi.push(Xe/dt,Qe/dt,1/0,ui,-1,dt),si&&zi.push(Rt)}else{for(let ot=0;ot<Sn;ot++)zi.push(Mt[Rn+ot]);if(dt>1)for(const ot of Ht){const Xe=ot*Sn;if(!(Mt[Xe+2]<=Je)){Mt[Xe+2]=Je;for(let Qe=0;Qe<Sn;Qe++)zi.push(Mt[Xe+Qe])}}}}return zi}_getOriginId(Ue){return Ue-this.points.length>>5}_getOriginZoom(Ue){return(Ue-this.points.length)%32}_map(Ue,Je,At){if(Ue[Je+Fn]>1){const wi=this.clusterProps[Ue[Je+mr]];return At?Object.assign({},wi):wi}const St=this.points[Ue[Je+_n]].properties,si=this.options.map(St);return At&&si===St?Object.assign({},si):si}}function Nr(Gt,Ue,Je){return{type:"Feature",id:Gt[Ue+_n],properties:Si(Gt,Ue,Je),geometry:{type:"Point",coordinates:[(At=Gt[Ue],360*(At-.5)),ts(Gt[Ue+1])]}};var At}function Si(Gt,Ue,Je){const At=Gt[Ue+Fn],St=At>=1e4?`${Math.round(At/1e3)}k`:At>=1e3?Math.round(At/100)/10+"k":At,si=Gt[Ue+mr],wi=-1===si?{}:Object.assign({},Je[si]);return Object.assign(wi,{cluster:!0,cluster_id:Gt[Ue+_n],point_count:At,point_count_abbreviated:St})}function kn(Gt){return Gt/360+.5}function Jn(Gt){const Ue=Math.sin(Gt*Math.PI/180),Je=.5-.25*Math.log((1+Ue)/(1-Ue))/Math.PI;return Je<0?0:Je>1?1:Je}function ts(Gt){const Ue=(180-360*Gt)*Math.PI/180;return 360*Math.atan(Math.exp(Ue))/Math.PI-90}function Xr(Gt,Ue,Je,At){for(var St,si=At,wi=Je-Ue>>1,ki=Je-Ue,Mt=Gt[Ue],zi=Gt[Ue+1],Sn=Gt[Je],Rn=Gt[Je+1],Hi=Ue+3;Hi<Je;Hi+=3){var ar=Fr(Gt[Hi],Gt[Hi+1],Mt,zi,Sn,Rn);if(ar>si)St=Hi,si=ar;else if(ar===si){var Ht=Math.abs(Hi-wi);Ht<ki&&(St=Hi,ki=Ht)}}si>At&&(St-Ue>3&&Xr(Gt,Ue,St,At),Gt[St+2]=si,Je-St>3&&Xr(Gt,St,Je,At))}function Fr(Gt,Ue,Je,At,St,si){var wi=St-Je,ki=si-At;if(0!==wi||0!==ki){var Mt=((Gt-Je)*wi+(Ue-At)*ki)/(wi*wi+ki*ki);Mt>1?(Je=St,At=si):Mt>0&&(Je+=wi*Mt,At+=ki*Mt)}return(wi=Gt-Je)*wi+(ki=Ue-At)*ki}function En(Gt,Ue,Je,At){var St={id:void 0===Gt?null:Gt,type:Ue,geometry:Je,tags:At,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(si){var wi=si.geometry,ki=si.type;if("Point"===ki||"MultiPoint"===ki||"LineString"===ki)Os(si,wi);else if("Polygon"===ki||"MultiLineString"===ki)for(var Mt=0;Mt<wi.length;Mt++)Os(si,wi[Mt]);else if("MultiPolygon"===ki)for(Mt=0;Mt<wi.length;Mt++)for(var zi=0;zi<wi[Mt].length;zi++)Os(si,wi[Mt][zi])}(St),St}function Os(Gt,Ue){for(var Je=0;Je<Ue.length;Je+=3)Gt.minX=Math.min(Gt.minX,Ue[Je]),Gt.minY=Math.min(Gt.minY,Ue[Je+1]),Gt.maxX=Math.max(Gt.maxX,Ue[Je]),Gt.maxY=Math.max(Gt.maxY,Ue[Je+1])}function Cs(Gt,Ue,Je,At){if(Ue.geometry){var St=Ue.geometry.coordinates,si=Ue.geometry.type,wi=Math.pow(Je.tolerance/((1<<Je.maxZoom)*Je.extent),2),ki=[],Mt=Ue.id;if(Je.promoteId?Mt=Ue.properties[Je.promoteId]:Je.generateId&&(Mt=At||0),"Point"===si)Ts(St,ki);else if("MultiPoint"===si)for(var zi=0;zi<St.length;zi++)Ts(St[zi],ki);else if("LineString"===si)Zn(St,ki,wi,!1);else if("MultiLineString"===si){if(Je.lineMetrics){for(zi=0;zi<St.length;zi++)Zn(St[zi],ki=[],wi,!1),Gt.push(En(Mt,"LineString",ki,Ue.properties));return}Un(St,ki,wi,!1)}else if("Polygon"===si)Un(St,ki,wi,!0);else{if("MultiPolygon"!==si){if("GeometryCollection"===si){for(zi=0;zi<Ue.geometry.geometries.length;zi++)Cs(Gt,{id:Mt,geometry:Ue.geometry.geometries[zi],properties:Ue.properties},Je,At);return}throw new Error("Input data is not a valid GeoJSON object.")}for(zi=0;zi<St.length;zi++){var Sn=[];Un(St[zi],Sn,wi,!0),ki.push(Sn)}}Gt.push(En(Mt,si,ki,Ue.properties))}}function Ts(Gt,Ue){Ue.push(cr(Gt[0])),Ue.push(zn(Gt[1])),Ue.push(0)}function Zn(Gt,Ue,Je,At){for(var St,si,wi=0,ki=0;ki<Gt.length;ki++){var Mt=cr(Gt[ki][0]),zi=zn(Gt[ki][1]);Ue.push(Mt),Ue.push(zi),Ue.push(0),ki>0&&(wi+=At?(St*zi-Mt*si)/2:Math.sqrt(Math.pow(Mt-St,2)+Math.pow(zi-si,2))),St=Mt,si=zi}var Sn=Ue.length-3;Ue[2]=1,Xr(Ue,0,Sn,Je),Ue[Sn+2]=1,Ue.size=Math.abs(wi),Ue.start=0,Ue.end=Ue.size}function Un(Gt,Ue,Je,At){for(var St=0;St<Gt.length;St++){var si=[];Zn(Gt[St],si,Je,At),Ue.push(si)}}function cr(Gt){return Gt/360+.5}function zn(Gt){var Ue=Math.sin(Gt*Math.PI/180),Je=.5-.25*Math.log((1+Ue)/(1-Ue))/Math.PI;return Je<0?0:Je>1?1:Je}function On(Gt,Ue,Je,At,St,si,wi,ki){if(At/=Ue,si>=(Je/=Ue)&&wi<At)return Gt;if(wi<Je||si>=At)return null;for(var Mt=[],zi=0;zi<Gt.length;zi++){var Sn=Gt[zi],Rn=Sn.geometry,Hi=Sn.type,ar=0===St?Sn.minX:Sn.minY,Ht=0===St?Sn.maxX:Sn.maxY;if(ar>=Je&&Ht<At)Mt.push(Sn);else if(!(Ht<Je||ar>=At)){var Vt=[];if("Point"===Hi||"MultiPoint"===Hi)Vr(Rn,Vt,Je,At,St);else if("LineString"===Hi)jn(Rn,Vt,Je,At,St,!1,ki.lineMetrics);else if("MultiLineString"===Hi)ur(Rn,Vt,Je,At,St,!1);else if("Polygon"===Hi)ur(Rn,Vt,Je,At,St,!0);else if("MultiPolygon"===Hi)for(var dt=0;dt<Rn.length;dt++){var ot=[];ur(Rn[dt],ot,Je,At,St,!0),ot.length&&Vt.push(ot)}if(Vt.length){if(ki.lineMetrics&&"LineString"===Hi){for(dt=0;dt<Vt.length;dt++)Mt.push(En(Sn.id,Hi,Vt[dt],Sn.tags));continue}"LineString"!==Hi&&"MultiLineString"!==Hi||(1===Vt.length?(Hi="LineString",Vt=Vt[0]):Hi="MultiLineString"),"Point"!==Hi&&"MultiPoint"!==Hi||(Hi=3===Vt.length?"Point":"MultiPoint"),Mt.push(En(Sn.id,Hi,Vt,Sn.tags))}}}return Mt.length?Mt:null}function Vr(Gt,Ue,Je,At,St){for(var si=0;si<Gt.length;si+=3){var wi=Gt[si+St];wi>=Je&&wi<=At&&(Ue.push(Gt[si]),Ue.push(Gt[si+1]),Ue.push(Gt[si+2]))}}function jn(Gt,Ue,Je,At,St,si,wi){for(var ki,Mt,zi=an(Gt),Sn=0===St?zs:Vs,Rn=Gt.start,Hi=0;Hi<Gt.length-3;Hi+=3){var ar=Gt[Hi],Ht=Gt[Hi+1],Vt=Gt[Hi+2],dt=Gt[Hi+3],ot=Gt[Hi+4],Xe=0===St?ar:Ht,Qe=0===St?dt:ot,Rt=!1;wi&&(ki=Math.sqrt(Math.pow(ar-dt,2)+Math.pow(Ht-ot,2))),Xe<Je?Qe>Je&&(Mt=Sn(zi,ar,Ht,dt,ot,Je),wi&&(zi.start=Rn+ki*Mt)):Xe>At?Qe<At&&(Mt=Sn(zi,ar,Ht,dt,ot,At),wi&&(zi.start=Rn+ki*Mt)):xr(zi,ar,Ht,Vt),Qe<Je&&Xe>=Je&&(Mt=Sn(zi,ar,Ht,dt,ot,Je),Rt=!0),Qe>At&&Xe<=At&&(Mt=Sn(zi,ar,Ht,dt,ot,At),Rt=!0),!si&&Rt&&(wi&&(zi.end=Rn+ki*Mt),Ue.push(zi),zi=an(Gt)),wi&&(Rn+=ki)}var ui=Gt.length-3;ar=Gt[ui],Ht=Gt[ui+1],Vt=Gt[ui+2],(Xe=0===St?ar:Ht)>=Je&&Xe<=At&&xr(zi,ar,Ht,Vt),ui=zi.length-3,si&&ui>=3&&(zi[ui]!==zi[0]||zi[ui+1]!==zi[1])&&xr(zi,zi[0],zi[1],zi[2]),zi.length&&Ue.push(zi)}function an(Gt){var Ue=[];return Ue.size=Gt.size,Ue.start=Gt.start,Ue.end=Gt.end,Ue}function ur(Gt,Ue,Je,At,St,si){for(var wi=0;wi<Gt.length;wi++)jn(Gt[wi],Ue,Je,At,St,si,!1)}function xr(Gt,Ue,Je,At){Gt.push(Ue),Gt.push(Je),Gt.push(At)}function zs(Gt,Ue,Je,At,St,si){var wi=(si-Ue)/(At-Ue);return Gt.push(si),Gt.push(Je+(St-Je)*wi),Gt.push(1),wi}function Vs(Gt,Ue,Je,At,St,si){var wi=(si-Je)/(St-Je);return Gt.push(Ue+(At-Ue)*wi),Gt.push(si),Gt.push(1),wi}function Fs(Gt,Ue){for(var Je=[],At=0;At<Gt.length;At++){var St,si=Gt[At],wi=si.type;if("Point"===wi||"MultiPoint"===wi||"LineString"===wi)St=Ds(si.geometry,Ue);else if("MultiLineString"===wi||"Polygon"===wi){St=[];for(var ki=0;ki<si.geometry.length;ki++)St.push(Ds(si.geometry[ki],Ue))}else if("MultiPolygon"===wi)for(St=[],ki=0;ki<si.geometry.length;ki++){for(var Mt=[],zi=0;zi<si.geometry[ki].length;zi++)Mt.push(Ds(si.geometry[ki][zi],Ue));St.push(Mt)}Je.push(En(si.id,wi,St,si.tags))}return Je}function Ds(Gt,Ue){var Je=[];Je.size=Gt.size,void 0!==Gt.start&&(Je.start=Gt.start,Je.end=Gt.end);for(var At=0;At<Gt.length;At+=3)Je.push(Gt[At]+Ue,Gt[At+1],Gt[At+2]);return Je}function Es(Gt,Ue){if(Gt.transformed)return Gt;var Je,At,St,si=1<<Gt.z,wi=Gt.x,ki=Gt.y;for(Je=0;Je<Gt.features.length;Je++){var Mt=Gt.features[Je],zi=Mt.geometry,Sn=Mt.type;if(Mt.geometry=[],1===Sn)for(At=0;At<zi.length;At+=2)Mt.geometry.push(wr(zi[At],zi[At+1],Ue,si,wi,ki));else for(At=0;At<zi.length;At++){var Rn=[];for(St=0;St<zi[At].length;St+=2)Rn.push(wr(zi[At][St],zi[At][St+1],Ue,si,wi,ki));Mt.geometry.push(Rn)}}return Gt.transformed=!0,Gt}function wr(Gt,Ue,Je,At,St,si){return[Math.round(Je*(Gt*At-St)),Math.round(Je*(Ue*At-si))]}function us(Gt,Ue,Je,At,St){for(var si=Ue===St.maxZoom?0:St.tolerance/((1<<Ue)*St.extent),wi={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Je,y:At,z:Ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ki=0;ki<Gt.length;ki++){wi.numFeatures++,Ks(wi,Gt[ki],si,St);var Mt=Gt[ki].minX,zi=Gt[ki].minY,Sn=Gt[ki].maxX,Rn=Gt[ki].maxY;Mt<wi.minX&&(wi.minX=Mt),zi<wi.minY&&(wi.minY=zi),Sn>wi.maxX&&(wi.maxX=Sn),Rn>wi.maxY&&(wi.maxY=Rn)}return wi}function Ks(Gt,Ue,Je,At){var St=Ue.geometry,si=Ue.type,wi=[];if("Point"===si||"MultiPoint"===si)for(var ki=0;ki<St.length;ki+=3)wi.push(St[ki]),wi.push(St[ki+1]),Gt.numPoints++,Gt.numSimplified++;else if("LineString"===si)io(wi,St,Gt,Je,!1,!1);else if("MultiLineString"===si||"Polygon"===si)for(ki=0;ki<St.length;ki++)io(wi,St[ki],Gt,Je,"Polygon"===si,0===ki);else if("MultiPolygon"===si)for(var Mt=0;Mt<St.length;Mt++){var zi=St[Mt];for(ki=0;ki<zi.length;ki++)io(wi,zi[ki],Gt,Je,!0,0===ki)}if(wi.length){var Sn=Ue.tags||null;if("LineString"===si&&At.lineMetrics){for(var Rn in Sn={},Ue.tags)Sn[Rn]=Ue.tags[Rn];Sn.mapbox_clip_start=St.start/St.size,Sn.mapbox_clip_end=St.end/St.size}var Hi={geometry:wi,type:"Polygon"===si||"MultiPolygon"===si?3:"LineString"===si||"MultiLineString"===si?2:1,tags:Sn};null!==Ue.id&&(Hi.id=Ue.id),Gt.features.push(Hi)}}function io(Gt,Ue,Je,At,St,si){var wi=At*At;if(At>0&&Ue.size<(St?wi:At))Je.numPoints+=Ue.length/3;else{for(var ki=[],Mt=0;Mt<Ue.length;Mt+=3)(0===At||Ue[Mt+2]>wi)&&(Je.numSimplified++,ki.push(Ue[Mt]),ki.push(Ue[Mt+1])),Je.numPoints++;St&&function(zi,Sn){for(var Rn=0,Hi=0,ar=zi.length,Ht=ar-2;Hi<ar;Ht=Hi,Hi+=2)Rn+=(zi[Hi]-zi[Ht])*(zi[Hi+1]+zi[Ht+1]);if(Rn>0===Sn)for(Hi=0,ar=zi.length;Hi<ar/2;Hi+=2){var Vt=zi[Hi],dt=zi[Hi+1];zi[Hi]=zi[ar-2-Hi],zi[Hi+1]=zi[ar-1-Hi],zi[ar-2-Hi]=Vt,zi[ar-1-Hi]=dt}}(ki,si),Gt.push(ki)}}function as(Gt,Ue){var Je=(Ue=this.options=function(St,si){for(var wi in si)St[wi]=si[wi];return St}(Object.create(this.options),Ue)).debug;if(Je&&console.time("preprocess data"),Ue.maxZoom<0||Ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ue.promoteId&&Ue.generateId)throw new Error("promoteId and generateId cannot be used together.");var St,si,wi,ki,Mt,zi,At=function(St,si){var wi=[];if("FeatureCollection"===St.type)for(var ki=0;ki<St.features.length;ki++)Cs(wi,St.features[ki],si,ki);else Cs(wi,"Feature"===St.type?St:{geometry:St},si);return wi}(Gt,Ue);this.tiles={},this.tileCoords=[],Je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ue.indexMaxZoom,Ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ki=St=At,Mt=On(St,1,-1-(wi=(si=Ue).buffer/si.extent),wi,0,-1,2,si),zi=On(St,1,1-wi,2+wi,0,-1,2,si),(Mt||zi)&&(ki=On(St,1,-wi,1+wi,0,-1,2,si)||[],Mt&&(ki=Fs(Mt,1).concat(ki)),zi&&(ki=ki.concat(Fs(zi,-1)))),(At=ki).length&&this.splitTile(At,0,0,0),Je&&(At.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Rs(Gt,Ue,Je){return 32*((1<<Gt)*Je+Ue)+Gt}function Ss(Gt,Ue){const Je=Gt.tileID.canonical;if(!this._geoJSONIndex)return Ue(null,null);const At=this._geoJSONIndex.getTile(Je.z,Je.x,Je.y);if(!At)return Ue(null,null);const St=new class{constructor(wi){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=wi.length,this._features=wi}feature(wi){return new class{constructor(ki){this._feature=ki,this.extent=n.EXTENT,this.type=ki.type,this.properties=ki.tags,"id"in ki&&!isNaN(ki.id)&&(this.id=parseInt(ki.id,10))}loadGeometry(){if(1===this._feature.type){const ki=[];for(const Mt of this._feature.geometry)ki.push([new n.Point(Mt[0],Mt[1])]);return ki}{const ki=[];for(const Mt of this._feature.geometry){const zi=[];for(const Sn of Mt)zi.push(new n.Point(Sn[0],Sn[1]));ki.push(zi)}return ki}}toGeoJSON(ki,Mt,zi){return _t.call(this,ki,Mt,zi)}}(this._features[wi])}}(At.features);let si=Xi(St);0===si.byteOffset&&si.byteLength===si.buffer.byteLength||(si=new Uint8Array(si)),Ue(null,{vectorTile:St,rawData:si.buffer})}as.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},as.prototype.splitTile=function(Gt,Ue,Je,At,St,si,wi){for(var ki=[Gt,Ue,Je,At],Mt=this.options,zi=Mt.debug;ki.length;){At=ki.pop(),Je=ki.pop(),Ue=ki.pop(),Gt=ki.pop();var Sn=1<<Ue,Rn=Rs(Ue,Je,At),Hi=this.tiles[Rn];if(!Hi&&(zi>1&&console.time("creation"),Hi=this.tiles[Rn]=us(Gt,Ue,Je,At,Mt),this.tileCoords.push({z:Ue,x:Je,y:At}),zi)){zi>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ue,Je,At,Hi.numFeatures,Hi.numPoints,Hi.numSimplified),console.timeEnd("creation"));var ar="z"+Ue;this.stats[ar]=(this.stats[ar]||0)+1,this.total++}if(Hi.source=Gt,St){if(Ue===Mt.maxZoom||Ue===St)continue;var Ht=1<<St-Ue;if(Je!==Math.floor(si/Ht)||At!==Math.floor(wi/Ht))continue}else if(Ue===Mt.indexMaxZoom||Hi.numPoints<=Mt.indexMaxPoints)continue;if(Hi.source=null,0!==Gt.length){zi>1&&console.time("clipping");var Vt,dt,ot,Xe,Qe,Rt,ui=.5*Mt.buffer/Mt.extent,en=.5-ui,ji=.5+ui,bn=1+ui;Vt=dt=ot=Xe=null,Qe=On(Gt,Sn,Je-ui,Je+ji,0,Hi.minX,Hi.maxX,Mt),Rt=On(Gt,Sn,Je+en,Je+bn,0,Hi.minX,Hi.maxX,Mt),Gt=null,Qe&&(Vt=On(Qe,Sn,At-ui,At+ji,1,Hi.minY,Hi.maxY,Mt),dt=On(Qe,Sn,At+en,At+bn,1,Hi.minY,Hi.maxY,Mt),Qe=null),Rt&&(ot=On(Rt,Sn,At-ui,At+ji,1,Hi.minY,Hi.maxY,Mt),Xe=On(Rt,Sn,At+en,At+bn,1,Hi.minY,Hi.maxY,Mt),Rt=null),zi>1&&console.timeEnd("clipping"),ki.push(Vt||[],Ue+1,2*Je,2*At),ki.push(dt||[],Ue+1,2*Je,2*At+1),ki.push(ot||[],Ue+1,2*Je+1,2*At),ki.push(Xe||[],Ue+1,2*Je+1,2*At+1)}}},as.prototype.getTile=function(Gt,Ue,Je){var At=this.options,St=At.extent,si=At.debug;if(Gt<0||Gt>24)return null;var wi=1<<Gt,ki=Rs(Gt,Ue=(Ue%wi+wi)%wi,Je);if(this.tiles[ki])return Es(this.tiles[ki],St);si>1&&console.log("drilling down to z%d-%d-%d",Gt,Ue,Je);for(var Mt,zi=Gt,Sn=Ue,Rn=Je;!Mt&&zi>0;)zi--,Sn=Math.floor(Sn/2),Rn=Math.floor(Rn/2),Mt=this.tiles[Rs(zi,Sn,Rn)];return Mt&&Mt.source?(si>1&&console.log("found parent tile z%d-%d-%d",zi,Sn,Rn),si>1&&console.time("drilling down"),this.splitTile(Mt.source,zi,Sn,Rn,Gt,Ue,Je),si>1&&console.timeEnd("drilling down"),this.tiles[ki]?Es(this.tiles[ki],St):null):null};class Bs extends n.VectorTileWorkerSource{constructor(Ue,Je,At,St,si){super(Ue,Je,At,St,Ss),si&&(this.loadGeoJSON=si)}loadData(Ue,Je){const At=Ue&&Ue.request,St=At&&At.collectResourceTiming;this.loadGeoJSON(Ue,(si,wi)=>{if(si||!wi)return Je(si);if("object"!=typeof wi)return Je(new Error(`Input data given to '${Ue.source}' is not a valid GeoJSON object.`));{nt(wi,!0);try{if(Ue.filter){const Mt=n.createExpression(Ue.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Mt.result)throw new Error(Mt.value.map(Sn=>`${Sn.key}: ${Sn.message}`).join(", "));wi={type:"FeatureCollection",features:wi.features.filter(Sn=>Mt.value.evaluate({zoom:0},Sn))}}this._geoJSONIndex=Ue.cluster?new hr(function({superclusterOptions:Mt,clusterProperties:zi}){if(!zi||!Mt)return Mt;const Sn={},Rn={},Hi={accumulated:null,zoom:0},ar={properties:null},Ht=Object.keys(zi);for(const Vt of Ht){const[dt,ot]=zi[Vt],Xe=n.createExpression(ot),Qe=n.createExpression("string"==typeof dt?[dt,["accumulated"],["get",Vt]]:dt);Sn[Vt]=Xe.value,Rn[Vt]=Qe.value}return Mt.map=Vt=>{ar.properties=Vt;const dt={};for(const ot of Ht)dt[ot]=Sn[ot].evaluate(Hi,ar);return dt},Mt.reduce=(Vt,dt)=>{ar.properties=dt;for(const ot of Ht)Hi.accumulated=Vt[ot],Vt[ot]=Rn[ot].evaluate(Hi,ar)},Mt}(Ue)).load(wi.features):new as(Mt=wi,Ue.geojsonVtOptions)}catch(Mt){return Je(Mt)}this.loaded={};const ki={};if(St){const Mt=n.getPerformanceMeasurement(At);Mt&&(ki.resourceTiming={},ki.resourceTiming[Ue.source]=JSON.parse(JSON.stringify(Mt)))}Je(null,ki)}var Mt})}reloadTile(Ue,Je){const At=this.loaded;return At&&At[Ue.uid]?super.reloadTile(Ue,Je):this.loadTile(Ue,Je)}loadGeoJSON(Ue,Je){if(Ue.request)n.getJSON(Ue.request,Je);else{if("string"!=typeof Ue.data)return Je(new Error(`Input data given to '${Ue.source}' is not a valid GeoJSON object.`));try{return Je(null,JSON.parse(Ue.data))}catch{return Je(new Error(`Input data given to '${Ue.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ue,Je){try{Je(null,this._geoJSONIndex.getClusterExpansionZoom(Ue.clusterId))}catch(At){Je(At)}}getClusterChildren(Ue,Je){try{Je(null,this._geoJSONIndex.getChildren(Ue.clusterId))}catch(At){Je(At)}}getClusterLeaves(Ue,Je){try{Je(null,this._geoJSONIndex.getLeaves(Ue.clusterId,Ue.limit,Ue.offset))}catch(At){Je(At)}}}class xa{constructor(Ue){this.self=Ue,this.actor=new n.Actor(Ue,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=n.getProjection({name:"mercator"}),this.workerSourceTypes={vector:n.VectorTileWorkerSource,geojson:Bs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Je,At)=>{if(this.workerSourceTypes[Je])throw new Error(`Worker source with name "${Je}" already registered.`);this.workerSourceTypes[Je]=At},this.self.registerRTLTextPlugin=Je=>{if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=Je.applyArabicShaping,n.plugin.processBidirectionalText=Je.processBidirectionalText,n.plugin.processStyledBidirectionalText=Je.processStyledBidirectionalText}}clearCaches(Ue,Je,At){delete this.layerIndexes[Ue],delete this.availableImages[Ue],delete this.workerSources[Ue],delete this.demWorkerSources[Ue],At()}checkIfReady(Ue,Je,At){At()}setReferrer(Ue,Je){this.referrer=Je}spriteLoaded(Ue,Je){this.isSpriteLoaded[Ue]=Je;for(const At in this.workerSources[Ue]){const St=this.workerSources[Ue][At];for(const si in St)St[si]instanceof n.VectorTileWorkerSource&&(St[si].isSpriteLoaded=Je,St[si].fire(new n.Event("isSpriteLoaded")))}}setImages(Ue,Je,At){this.availableImages[Ue]=Je;for(const St in this.workerSources[Ue]){const si=this.workerSources[Ue][St];for(const wi in si)si[wi].availableImages=Je}At()}enableTerrain(Ue,Je,At){this.terrain=Je,At()}setProjection(Ue,Je){this.projections[Ue]=n.getProjection(Je)}setLayers(Ue,Je,At){this.getLayerIndex(Ue).replace(Je),At()}updateLayers(Ue,Je,At){this.getLayerIndex(Ue).update(Je.layers,Je.removedIds),At()}loadTile(Ue,Je,At){const St=this.enableTerrain?n.extend({enableTerrain:this.terrain},Je):Je;St.projection=this.projections[Ue]||this.defaultProjection,this.getWorkerSource(Ue,Je.type,Je.source).loadTile(St,At)}loadDEMTile(Ue,Je,At){const St=this.enableTerrain?n.extend({buildQuadTree:this.terrain},Je):Je;this.getDEMWorkerSource(Ue,Je.source).loadTile(St,At)}reloadTile(Ue,Je,At){const St=this.enableTerrain?n.extend({enableTerrain:this.terrain},Je):Je;St.projection=this.projections[Ue]||this.defaultProjection,this.getWorkerSource(Ue,Je.type,Je.source).reloadTile(St,At)}abortTile(Ue,Je,At){this.getWorkerSource(Ue,Je.type,Je.source).abortTile(Je,At)}removeTile(Ue,Je,At){this.getWorkerSource(Ue,Je.type,Je.source).removeTile(Je,At)}removeSource(Ue,Je,At){if(!this.workerSources[Ue]||!this.workerSources[Ue][Je.type]||!this.workerSources[Ue][Je.type][Je.source])return;const St=this.workerSources[Ue][Je.type][Je.source];delete this.workerSources[Ue][Je.type][Je.source],void 0!==St.removeSource?St.removeSource(Je,At):At()}loadWorkerSource(Ue,Je,At){try{this.self.importScripts(Je.url),At()}catch(St){At(St.toString())}}syncRTLPluginState(Ue,Je,At){try{n.plugin.setState(Je);const St=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&null!=St){this.self.importScripts(St);const si=n.plugin.isParsed();At(si?void 0:new Error(`RTL Text Plugin failed to import scripts from ${St}`),si)}}catch(St){At(St.toString())}}getAvailableImages(Ue){let Je=this.availableImages[Ue];return Je||(Je=[]),Je}getLayerIndex(Ue){let Je=this.layerIndexes[Ue];return Je||(Je=this.layerIndexes[Ue]=new Be),Je}getWorkerSource(Ue,Je,At){return this.workerSources[Ue]||(this.workerSources[Ue]={}),this.workerSources[Ue][Je]||(this.workerSources[Ue][Je]={}),this.workerSources[Ue][Je][At]||(this.workerSources[Ue][Je][At]=new this.workerSourceTypes[Je]({send:(si,wi,ki,Mt,zi,Sn)=>{this.actor.send(si,wi,ki,Ue,zi,Sn)},scheduler:this.actor.scheduler},this.getLayerIndex(Ue),this.getAvailableImages(Ue),this.isSpriteLoaded[Ue])),this.workerSources[Ue][Je][At]}getDEMWorkerSource(Ue,Je){return this.demWorkerSources[Ue]||(this.demWorkerSources[Ue]={}),this.demWorkerSources[Ue][Je]||(this.demWorkerSources[Ue][Je]=new Re),this.demWorkerSources[Ue][Je]}enforceCacheSizeLimit(Ue,Je){n.enforceCacheSizeLimit(Je)}getWorkerPerformanceMetrics(Ue,Je,At){At(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new xa(self)),xa}),mt(0,function(n){function j(k,d){if(Array.isArray(k)){if(!Array.isArray(d)||k.length!==d.length)return!1;for(let _=0;_<k.length;_++)if(!j(k[_],d[_]))return!1;return!0}if("object"==typeof k&&null!==k&&null!==d){if("object"!=typeof d||Object.keys(k).length!==Object.keys(d).length)return!1;for(const _ in k)if(!j(k[_],d[_]))return!1;return!0}return k===d}var He=Be;function Be(k){return d=k,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var I,Y,V=new Blob([""],{type:"text/javascript"}),Q=URL.createObjectURL(V);try{Y=new Worker(Q),I=!0}catch{I=!1}return Y&&Y.terminate(),URL.revokeObjectURL(Q),I}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var I=document.createElement("canvas");I.width=I.height=1;var Y=I.getContext("2d");if(!Y)return!1;var V=Y.getImageData(0,0,1,1);return V&&V.width===I.width}()||(void 0===Re[_=d&&d.failIfMajorPerformanceCaveat]&&(Re[_]=function(I){var Y,Q,re,ue,V=(Q=I,re=document.createElement("canvas"),(ue=Object.create(Be.webGLContextAttributes)).failIfMajorPerformanceCaveat=Q,re.getContext("webgl",ue)||re.getContext("experimental-webgl",ue));if(!V)return!1;try{Y=V.createShader(V.VERTEX_SHADER)}catch{return!1}return!(!Y||V.isContextLost())&&(V.shaderSource(Y,"void main() {}"),V.compileShader(Y),!0===V.getShaderParameter(Y,V.COMPILE_STATUS))}(_)),!Re[_]||document.documentMode));var d,_}var Re={};function $e(k,d,_){const I=n.window.document.createElement(k);return void 0!==d&&(I.className=d),_&&_.appendChild(I),I}function it(k,d,_){const I=n.window.document.createElementNS("http://www.w3.org/2000/svg",k);for(const Y of Object.keys(d))I.setAttributeNS(null,Y,d[Y]);return _&&_.appendChild(I),I}Be.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const nt=n.window.document&&n.window.document.documentElement.style,_t=nt&&void 0!==nt.userSelect?"userSelect":"WebkitUserSelect";let gt;function Xt(){nt&&_t&&(gt=nt[_t],nt[_t]="none")}function Et(){nt&&_t&&(nt[_t]=gt)}function Tt(k){k.preventDefault(),k.stopPropagation(),n.window.removeEventListener("click",Tt,!0)}function Nt(){n.window.addEventListener("click",Tt,!0),n.window.setTimeout(()=>{n.window.removeEventListener("click",Tt,!0)},0)}function Pi(k,d){const _=k.getBoundingClientRect();return Mi(k,_,d)}function tt(k,d){const _=k.getBoundingClientRect(),I=[];for(let Y=0;Y<d.length;Y++)I.push(Mi(k,_,d[Y]));return I}function Ci(k){return void 0!==n.window.InstallTrigger&&2===k.button&&k.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:k.button}function Mi(k,d,_){const I=k.offsetWidth===d.width?1:k.offsetWidth/d.width;return new n.Point((_.clientX-d.left)*I,(_.clientY-d.top)*I)}function kt(k,d){var _=d[0],I=d[1],Y=d[2],V=d[3],Q=_*V-Y*I;return Q?(k[0]=V*(Q=1/Q),k[1]=-I*Q,k[2]=-Y*Q,k[3]=_*Q,k):null}function Oi(k){const{userImage:d}=k;return!!(d&&d.render&&d.render())&&(k.data.replace(new Uint8Array(d.data.buffer)),!0)}class vi extends n.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:_,callback:I}of this.requestors)this._notify(_,I);this.requestors=[]}}hasImage(d){return!!this.getImage(d)}getImage(d){return this.images[d]}addImage(d,_){this._validate(d,_)&&(this.images[d]=_)}_validate(d,_){let I=!0;return this._validateStretch(_.stretchX,_.data&&_.data.width)||(this.fire(new n.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),I=!1),this._validateStretch(_.stretchY,_.data&&_.data.height)||(this.fire(new n.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),I=!1),this._validateContent(_.content,_)||(this.fire(new n.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),I=!1),I}_validateStretch(d,_){if(!d)return!0;let I=0;for(const Y of d){if(Y[0]<I||Y[1]<Y[0]||_<Y[1])return!1;I=Y[1]}return!0}_validateContent(d,_){return!(d&&(4!==d.length||d[0]<0||_.data.width<d[0]||d[1]<0||_.data.height<d[1]||d[2]<0||_.data.width<d[2]||d[3]<0||_.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,_){_.version=this.images[d].version+1,this.images[d]=_,this.updatedImages[d]=!0}removeImage(d){const _=this.images[d];delete this.images[d],delete this.patterns[d],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,_){let I=!0;if(!this.isLoaded())for(const Y of d)this.images[Y]||(I=!1);this.isLoaded()||I?this._notify(d,_):this.requestors.push({ids:d,callback:_})}_notify(d,_){const I={};for(const Y of d){this.images[Y]||this.fire(new n.Event("styleimagemissing",{id:Y}));const V=this.images[Y];V?I[Y]={data:V.data.clone(),pixelRatio:V.pixelRatio,sdf:V.sdf,version:V.version,stretchX:V.stretchX,stretchY:V.stretchY,content:V.content,hasRenderCallback:!(!V.userImage||!V.userImage.render)}:n.warnOnce(`Image "${Y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,I)}getPixelSize(){const{width:d,height:_}=this.atlasImage;return{width:d,height:_}}getPattern(d){const _=this.patterns[d],I=this.getImage(d);if(!I)return null;if(_&&_.position.version===I.version)return _.position;if(_)_.position.version=I.version;else{const Y={w:I.data.width+2,h:I.data.height+2,x:0,y:0},V=new n.ImagePosition(Y,I);this.patterns[d]={bin:Y,position:V}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const _=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(d,this.atlasImage,_.RGBA),this.atlasTexture&&this.atlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const V in this.patterns)d.push(this.patterns[V].bin);const{w:_,h:I}=n.potpack(d),Y=this.atlasImage;Y.resize({width:_||1,height:I||1});for(const V in this.patterns){const{bin:Q}=this.patterns[V],re=Q.x+1,ue=Q.y+1,be=this.images[V].data,ye=be.width,Fe=be.height;n.RGBAImage.copy(be,Y,{x:0,y:0},{x:re,y:ue},{width:ye,height:Fe}),n.RGBAImage.copy(be,Y,{x:0,y:Fe-1},{x:re,y:ue-1},{width:ye,height:1}),n.RGBAImage.copy(be,Y,{x:0,y:0},{x:re,y:ue+Fe},{width:ye,height:1}),n.RGBAImage.copy(be,Y,{x:ye-1,y:0},{x:re-1,y:ue},{width:1,height:Fe}),n.RGBAImage.copy(be,Y,{x:0,y:0},{x:re+ye,y:ue},{width:1,height:Fe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const _ of d){if(this.callbackDispatchedThisFrame[_])continue;this.callbackDispatchedThisFrame[_]=!0;const I=this.images[_];Oi(I)&&this.updateImage(_,I)}}}const hi=new n.Properties({anchor:new n.DataConstantProperty(n.spec.light.anchor),position:new class{constructor(){this.specification=n.spec.light.position}possiblyEvaluate(k,d){return function([_,I,Y]){const V=n.degToRad(I+90),Q=n.degToRad(Y);return{x:_*Math.cos(V)*Math.sin(Q),y:_*Math.sin(V)*Math.sin(Q),z:_*Math.cos(Q),azimuthal:I,polar:Y}}(k.expression.evaluate(d))}interpolate(k,d,_){return{x:n.number(k.x,d.x,_),y:n.number(k.y,d.y,_),z:n.number(k.z,d.z,_),azimuthal:n.number(k.azimuthal,d.azimuthal,_),polar:n.number(k.polar,d.polar,_)}}},color:new n.DataConstantProperty(n.spec.light.color),intensity:new n.DataConstantProperty(n.spec.light.intensity)});class Dt extends n.Evented{constructor(d){super(),this._transitionable=new n.Transitionable(hi),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,_={}){if(!this._validate(n.validateLight,d,_))for(const I in d){const Y=d[I];n.endsWith(I,"-transition")?this._transitionable.setTransition(I.slice(0,-11),Y):this._transitionable.setValue(I,Y)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,_,I){return(!I||!1!==I.validate)&&n.emitValidationErrors(this,d.call(n.validateStyle,n.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:n.spec})))}}const yi=new n.Properties({source:new n.DataConstantProperty(n.spec.terrain.source),exaggeration:new n.DataConstantProperty(n.spec.terrain.exaggeration)});let Ri=class extends n.Evented{constructor(k,d){super(),this._transitionable=new n.Transitionable(yi),this.set(k),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=d}get(){return this._transitionable.serialize()}set(k){for(const d in k){const _=k[d];n.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-11),_):this._transitionable.setValue(d,_)}}updateTransitions(k){this._transitioning=this._transitionable.transitioned(k,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(k){this.properties=this._transitioning.possiblyEvaluate(k)}};function Xi(k,d,_,I){const Y=n.smoothstep(45,65,_),[V,Q]=Tn(k,I),re=n.length(d);let ue=1-Math.min(1,Math.exp((re-V)/(Q-V)*-6));return ue*=ue*ue,ue=Math.min(1,1.00747*ue),ue*Y*k.alpha}function Tn(k,d){const _=.5/Math.tan(.5*d);return[k.range[0]+_,k.range[1]+_]}const qi=new n.Properties({range:new n.DataConstantProperty(n.spec.fog.range),color:new n.DataConstantProperty(n.spec.fog.color),"high-color":new n.DataConstantProperty(n.spec.fog["high-color"]),"space-color":new n.DataConstantProperty(n.spec.fog["space-color"]),"horizon-blend":new n.DataConstantProperty(n.spec.fog["horizon-blend"]),"star-intensity":new n.DataConstantProperty(n.spec.fog["star-intensity"])});class nn extends n.Evented{constructor(d,_){super(),this._transitionable=new n.Transitionable(qi),this.set(d),this._transitioning=this._transitionable.untransitioned(),this._transform=_}get state(){const d=this._transform,_="globe"===d.projection.name,I=n.globeToMercatorTransition(d.zoom),Y=this.properties.get("range"),V=[.5,3];return{range:_?[n.number(V[0],Y[0],I),n.number(V[1],Y[1],I)]:Y,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(d,_={}){if(!this._validate(n.validateFog,d,_)){for(const I of Object.keys(n.spec.fog))d&&void 0===d[I]&&(d[I]=n.spec.fog[I].default);for(const I in d){const Y=d[I];n.endsWith(I,"-transition")?this._transitionable.setTransition(I.slice(0,-11),Y):this._transitionable.setValue(I,Y)}}}getOpacity(d){if(!this._transform.projection.supportsFog)return 0;const _=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:n.smoothstep(45,65,d))*_.a}getOpacityAtLatLng(d,_){return this._transform.projection.supportsFog?function(I,Y,V){const Q=n.MercatorCoordinate.fromLngLat(Y),re=V.elevation?V.elevation.getAtPointOrZero(Q):0,ue=[Q.x,Q.y,re];return n.transformMat4(ue,ue,V.mercatorFogMatrix),Xi(I,ue,V.pitch,V._fov)}(this.state,d,_):0}getFovAdjustedRange(d){return this._transform.projection.supportsFog?Tn(this.state,d):[0,1]}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,_,I){return(!I||!1!==I.validate)&&n.emitValidationErrors(this,d.call(n.validateStyle,n.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:n.spec})))}}class _n{constructor(d,_){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=n.uniqueId();const I=this.workerPool.acquire(this.id);for(let Y=0;Y<I.length;Y++){const V=new _n.Actor(I[Y],_,this.id);V.name=`Worker ${Y}`,this.actors.push(V)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(d,_,I){n.asyncAll(this.actors,(Y,V)=>{Y.send(d,_,V)},I=I||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Fn(k,d,_){return d*(n.EXTENT/(k.tileSize*Math.pow(2,_-k.tileID.overscaledZ)))}_n.Actor=n.Actor;class mr{constructor(d,_,I,Y){this.screenBounds=d,this.cameraPoint=_,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=I,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,Y)}static createFromScreenPoints(d,_){let I,Y;if(d instanceof n.Point||"number"==typeof d[0]){const V=n.Point.convert(d);I=[V],Y=_.isPointAboveHorizon(V)}else{const V=n.Point.convert(d[0]),Q=n.Point.convert(d[1]);I=[V,Q],Y=n.polygonizeBounds(V,Q).every(re=>_.isPointAboveHorizon(re))}return new mr(I,_.getCameraPoint(),Y,_)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(d){return n.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],d)}bufferedCameraGeometry(d){const _=this.screenBounds[0],I=1===this.screenBounds.length?this.screenBounds[0].add(new n.Point(1,1)):this.screenBounds[1],Y=n.polygonizeBounds(_,I,0,!1);return this.cameraPoint.y>I.y&&(this.cameraPoint.x>_.x&&this.cameraPoint.x<I.x?Y.splice(3,0,this.cameraPoint):this.cameraPoint.x>=I.x?Y[2]=this.cameraPoint:this.cameraPoint.x<=_.x&&(Y[3]=this.cameraPoint)),n.bufferConvexPolygon(Y,d)}bufferedCameraGeometryGlobe(d){const _=this.screenBounds[0],I=1===this.screenBounds.length?this.screenBounds[0].add(new n.Point(1,1)):this.screenBounds[1],Y=n.polygonizeBounds(_,I,d),V=this.cameraPoint.clone();switch(3*((V.y>_.y)+(V.y>I.y))+((V.x>_.x)+(V.x>I.x))){case 0:Y[0]=V,Y[4]=V.clone();break;case 1:Y.splice(1,0,V);break;case 2:Y[1]=V;break;case 3:Y.splice(4,0,V);break;case 5:Y.splice(2,0,V);break;case 6:Y[3]=V;break;case 7:Y.splice(3,0,V);break;case 8:Y[2]=V}return Y}containsTile(d,_,I,Y=0){const V=d.queryPadding/_._pixelsPerMercatorPixel+1,Q=I?this._bufferedCameraMercator(V,_):this._bufferedScreenMercator(V,_);let re=d.tileID.wrap+(Q.unwrapped?Y:0);const ue=Q.polygon.map(wt=>n.getTilePoint(d.tileTransform,wt,re));if(!n.polygonIntersectsBox(ue,0,0,n.EXTENT,n.EXTENT))return;re=d.tileID.wrap+(this.screenGeometryMercator.unwrapped?Y:0);const be=this.screenGeometryMercator.polygon.map(wt=>n.getTileVec3(d.tileTransform,wt,re)),ye=be.map(wt=>new n.Point(wt[0],wt[1])),Fe=_.getFreeCameraOptions().position||new n.MercatorCoordinate(0,0,0),et=n.getTileVec3(d.tileTransform,Fe,re),ut=be.map(wt=>{const Ye=n.sub(wt,wt,et);return n.normalize(Ye,Ye),new n.Ray(et,Ye)}),ft=Fn(d,1,_.zoom)*_._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:ye,tilespaceRays:ut,bufferedTilespaceGeometry:ue,bufferedTilespaceBounds:(vt=n.getBounds(ue),vt.min.x=n.clamp(vt.min.x,0,n.EXTENT),vt.min.y=n.clamp(vt.min.y,0,n.EXTENT),vt.max.x=n.clamp(vt.max.x,0,n.EXTENT),vt.max.y=n.clamp(vt.max.y,0,n.EXTENT),vt),tile:d,tileID:d.tileID,pixelToTileUnitsFactor:ft};var vt}_bufferedScreenMercator(d,_){const I=Si(d);if(this._screenRaycastCache[I])return this._screenRaycastCache[I];{let Y;return Y="globe"===_.projection.name?this._projectAndResample(this.bufferedScreenGeometry(d),_):{polygon:this.bufferedScreenGeometry(d).map(V=>_.pointCoordinate3D(V)),unwrapped:!0},this._screenRaycastCache[I]=Y,Y}}_bufferedCameraMercator(d,_){const I=Si(d);if(this._cameraRaycastCache[I])return this._cameraRaycastCache[I];{let Y;return Y="globe"===_.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(d),_):{polygon:this.bufferedCameraGeometry(d).map(V=>_.pointCoordinate3D(V)),unwrapped:!0},this._cameraRaycastCache[I]=Y,Y}}_projectAndResample(d,_){const I=function(V,Q){const re=n.multiply([],Q.pixelMatrix,Q.globeMatrix),ue=[0,-n.GLOBE_RADIUS,0,1],be=[0,n.GLOBE_RADIUS,0,1],ye=[0,0,0,1];n.transformMat4$1(ue,ue,re),n.transformMat4$1(be,be,re),n.transformMat4$1(ye,ye,re);const Fe=new n.Point(ue[0]/ue[3],ue[1]/ue[3]),et=new n.Point(be[0]/be[3],be[1]/be[3]),ut=n.polygonContainsPoint(V,Fe)&&ue[3]<ye[3],ft=n.polygonContainsPoint(V,et)&&be[3]<ye[3];if(!ut&&!ft)return null;const vt=function(ai,Ii,Ei){for(let Yi=1;Yi<ai.length;Yi++){const Gn=Nr(Ii.pointCoordinate3D(ai[Yi-1]).x),Ni=Nr(Ii.pointCoordinate3D(ai[Yi]).x);if(Ei<0){if(Gn<Ni)return{idx:Yi,t:-Gn/(Ni-1-Gn)}}else if(Ni<Gn)return{idx:Yi,t:(1-Gn)/(Ni+1-Gn)}}return null}(V,Q,ut?-1:1);if(!vt)return null;const{idx:wt,t:Ye}=vt;let ht=wt>1?hr(V.slice(0,wt),Q):[],zt=wt<V.length?hr(V.slice(wt),Q):[];ht=ht.map(ai=>new n.Point(Nr(ai.x),ai.y)),zt=zt.map(ai=>new n.Point(Nr(ai.x),ai.y));const xt=[...ht];0===xt.length&&xt.push(zt[zt.length-1]);const fi=n.number(xt[xt.length-1].y,(0===zt.length?ht[0]:zt[0]).y,Ye);let pi;return pi=ut?[new n.Point(0,fi),new n.Point(0,0),new n.Point(1,0),new n.Point(1,fi)]:[new n.Point(1,fi),new n.Point(1,1),new n.Point(0,1),new n.Point(0,fi)],xt.push(...pi),0===zt.length?xt.push(ht[0]):xt.push(...zt),{polygon:xt.map(ai=>new n.MercatorCoordinate(ai.x,ai.y)),unwrapped:!1}}(d,_);if(I)return I;const Y=function(V,Q){let re=!1,ue=-1/0,be=0;for(let Fe=0;Fe<V.length-1;Fe++)V[Fe].x>ue&&(ue=V[Fe].x,be=Fe);for(let Fe=0;Fe<V.length-1;Fe++){const et=(be+Fe)%(V.length-1),ut=V[et],ft=V[et+1];Math.abs(ut.x-ft.x)>.5&&(ut.x<ft.x?(ut.x+=1,0===et&&(V[V.length-1].x+=1)):(ft.x+=1,et+1===V.length-1&&(V[0].x+=1)),re=!0)}const ye=n.mercatorXfromLng(Q.center.lng);return re&&ye<Math.abs(ye-1)&&V.forEach(Fe=>{Fe.x-=1}),{polygon:V,unwrapped:re}}(hr(d,_).map(V=>new n.Point(Nr(V.x),V.y)),_);return{polygon:Y.polygon.map(V=>new n.MercatorCoordinate(V.x,V.y)),unwrapped:Y.unwrapped}}}function hr(k,d){return n.resample(k,_=>{const I=d.pointCoordinate3D(_);_.x=I.x,_.y=I.y},1/256)}function Nr(k){return k<0?1+k%1:k%1}function Si(k){return 100*k|0}function kn(k,d,_,I,Y){const V=function(Q,re){if(Q)return Y(Q);if(re){k.url&&re.tiles&&k.tiles&&delete k.tiles;const ue=n.pick(n.extend(re,k),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);re.vector_layers&&(ue.vectorLayers=re.vector_layers,ue.vectorLayerIds=ue.vectorLayers.map(be=>be.id)),ue.tiles=d.canonicalizeTileset(ue,k.url),Y(null,ue)}};return k.url?n.getJSON(d.transformRequest(d.normalizeSourceURL(k.url,null,_,I),n.ResourceType.Source),V):n.exported.frame(()=>V(null,k))}class Jn{constructor(d,_,I){this.bounds=n.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=_||0,this.maxzoom=I||24}validateBounds(d){return Array.isArray(d)&&4===d.length?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const _=Math.pow(2,d.z),I=Math.floor(n.mercatorXfromLng(this.bounds.getWest())*_),Y=Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*_),V=Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*_),Q=Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*_);return d.x>=I&&d.x<V&&d.y>=Y&&d.y<Q}}class ts{constructor(d,_,I){this.context=d;const Y=d.gl;this.buffer=Y.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),Y.bufferData(Y.ELEMENT_ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?Y.DYNAMIC_DRAW:Y.STATIC_DRAW),this.dynamicDraw||_.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const _=this.context.gl;this.context.unbindVAO(),this.bind(),_.bufferSubData(_.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fr{constructor(d,_,I,Y){this.length=_.length,this.attributes=I,this.itemSize=_.bytesPerElement,this.dynamicDraw=Y,this.context=d;const V=d.gl;this.buffer=V.createBuffer(),d.bindVertexBuffer.set(this.buffer),V.bufferData(V.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?V.DYNAMIC_DRAW:V.STATIC_DRAW),this.dynamicDraw||_.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){const _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,_){for(let I=0;I<this.attributes.length;I++){const Y=_.attributes[this.attributes[I].name];void 0!==Y&&d.enableVertexAttribArray(Y)}}setVertexAttribPointers(d,_,I){for(let Y=0;Y<this.attributes.length;Y++){const V=this.attributes[Y],Q=_.attributes[V.name];void 0!==Q&&d.vertexAttribPointer(Q,V.components,d[Xr[V.type]],!1,this.itemSize,V.offset+this.itemSize*(I||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class En{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Os extends En{getDefault(){return n.Color.transparent}set(d){const _=this.current;(d.r!==_.r||d.g!==_.g||d.b!==_.b||d.a!==_.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Cs extends En{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class Ts extends En{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class Zn extends En{getDefault(){return[!0,!0,!0,!0]}set(d){const _=this.current;(d[0]!==_[0]||d[1]!==_[1]||d[2]!==_[2]||d[3]!==_[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class Un extends En{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class cr extends En{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class zn extends En{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const _=this.current;(d.func!==_.func||d.ref!==_.ref||d.mask!==_.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class On extends En{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const _=this.current;(d[0]!==_[0]||d[1]!==_[1]||d[2]!==_[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class Vr extends En{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;d?_.enable(_.STENCIL_TEST):_.disable(_.STENCIL_TEST),this.current=d,this.dirty=!1}}class jn extends En{getDefault(){return[0,1]}set(d){const _=this.current;(d[0]!==_[0]||d[1]!==_[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class an extends En{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;d?_.enable(_.DEPTH_TEST):_.disable(_.DEPTH_TEST),this.current=d,this.dirty=!1}}class ur extends En{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class xr extends En{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;d?_.enable(_.BLEND):_.disable(_.BLEND),this.current=d,this.dirty=!1}}class zs extends En{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const _=this.current;(d[0]!==_[0]||d[1]!==_[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Vs extends En{getDefault(){return n.Color.transparent}set(d){const _=this.current;(d.r!==_.r||d.g!==_.g||d.b!==_.b||d.a!==_.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Fs extends En{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class Ds extends En{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;d?_.enable(_.CULL_FACE):_.disable(_.CULL_FACE),this.current=d,this.dirty=!1}}class Es extends En{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class wr extends En{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}let us,Ks=class extends En{getDefault(){return null}set(k){(k!==this.current||this.dirty)&&(this.gl.useProgram(k),this.current=k,this.dirty=!1)}};class io extends En{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class as extends En{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const _=this.current;(d[0]!==_[0]||d[1]!==_[1]||d[2]!==_[2]||d[3]!==_[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class Rs extends En{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class Ss extends En{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;_.bindRenderbuffer(_.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class Bs extends En{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;_.bindTexture(_.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class xa extends En{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;_.bindBuffer(_.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Gt extends En{getDefault(){return null}set(d){const _=this.gl;_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Ue extends En{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Je extends En{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class At extends En{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class St extends En{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class si extends En{constructor(d,_){super(d),this.context=d,this.parent=_}getDefault(){return null}}class wi extends si{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class ki extends si{attachment(){return this.gl.DEPTH_ATTACHMENT}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,this.attachment(),_.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class Mt extends ki{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class zi{constructor(d,_,I,Y){this.context=d,this.width=_,this.height=I;const V=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new wi(d,V),Y&&(this.depthAttachment=new ki(d,V))}destroy(){const d=this.context.gl,_=this.colorAttachment.get();if(_&&d.deleteTexture(_),this.depthAttachment){const I=this.depthAttachment.get();I&&d.deleteRenderbuffer(I)}d.deleteFramebuffer(this.framebuffer)}}class Sn{constructor(d,_=!1){if(this.gl=d,this.isWebGL2=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),_){const I=d;this.extVertexArrayObject={createVertexArrayOES:I.createVertexArray.bind(d),deleteVertexArrayOES:I.deleteVertexArray.bind(d),bindVertexArrayOES:I.bindVertexArray.bind(d)}}this.clearColor=new Os(this),this.clearDepth=new Cs(this),this.clearStencil=new Ts(this),this.colorMask=new Zn(this),this.depthMask=new Un(this),this.stencilMask=new cr(this),this.stencilFunc=new zn(this),this.stencilOp=new On(this),this.stencilTest=new Vr(this),this.depthRange=new jn(this),this.depthTest=new an(this),this.depthFunc=new ur(this),this.blend=new xr(this),this.blendFunc=new zs(this),this.blendColor=new Vs(this),this.blendEquation=new Fs(this),this.cullFace=new Ds(this),this.cullFaceSide=new Es(this),this.frontFace=new wr(this),this.program=new Ks(this),this.activeTexture=new io(this),this.viewport=new as(this),this.bindFramebuffer=new Rs(this),this.bindRenderbuffer=new Ss(this),this.bindTexture=new Bs(this),this.bindVertexBuffer=new xa(this),this.bindElementBuffer=new Gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ue(this),this.pixelStoreUnpack=new Je(this),this.pixelStoreUnpackPremultiplyAlpha=new At(this),this.pixelStoreUnpackFlipY=new St(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=d.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=d.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=d.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),_||(this.extTextureHalfFloat=d.getExtension("OES_texture_half_float")),(_||this.extTextureHalfFloat&&d.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=_||d.getExtension("OES_standard_derivatives"),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,_){return new ts(this,d,_)}createVertexBuffer(d,_,I){return new Fr(this,d,_,I)}createRenderbuffer(d,_,I){const Y=this.gl,V=Y.createRenderbuffer();return this.bindRenderbuffer.set(V),Y.renderbufferStorage(Y.RENDERBUFFER,d,_,I),this.bindRenderbuffer.set(null),V}createFramebuffer(d,_,I){return new zi(this,d,_,I)}clear({color:d,depth:_,stencil:I}){const Y=this.gl;let V=0;d&&(V|=Y.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),void 0!==_&&(V|=Y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),void 0!==I&&(V|=Y.STENCIL_BUFFER_BIT,this.clearStencil.set(I),this.stencilMask.set(255)),Y.clear(V)}setCullFace(d){!1===d.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){j(d.blendFunction,n.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Rn extends n.Evented{constructor(d,_,I,Y){if(super(),this.id=d,this.dispatcher=I,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(_,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Y),this._tileWorkers={},this._deduped=new n.DedupedRequest}load(d){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"}));const _=Array.isArray(this.map._language)?this.map._language.join():this.map._language,I=this.map._worldview;this._tileJSONRequest=kn(this._options,this.map._requestManager,_,I,(Y,V)=>{this._tileJSONRequest=null,this._loaded=!0,Y?(_&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${_}`),I&&2!==I.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${I}`),this.fire(new n.ErrorEvent(Y))):V&&(n.extend(this,V),V.bounds&&(this.tileBounds=new Jn(V.bounds,this.minzoom,this.maxzoom)),n.postTurnstileEvent(V.tiles,this.map._requestManager._customAccessToken),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(Y)})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return n.extend({},this._options)}loadTile(d,_){const I=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),Y={request:this.map._requestManager.transformRequest(I,n.ResourceType.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:d.isSymbolTile};if(Y.request.collectResourceTiming=this._collectResourceTiming,d.actor&&"expired"!==d.state)"loading"===d.state?d.reloadCallback=_:d.request=d.actor.send("reloadTile",Y,V.bind(this));else if(d.actor=this._tileWorkers[I]=this._tileWorkers[I]||this.dispatcher.getActor(),this.dispatcher.ready)d.request=d.actor.send("loadTile",Y,V.bind(this),void 0,!0);else{const Q=n.loadVectorTile.call({deduped:this._deduped},Y,(re,ue)=>{re||!ue?V.call(this,re):(Y.data={cacheControl:ue.cacheControl,expires:ue.expires,rawData:ue.rawData.slice(0)},d.actor&&d.actor.send("loadTile",Y,V.bind(this),void 0,!0))},!0);d.request={cancel:Q}}function V(Q,re){return delete d.request,d.aborted?_(null):Q&&404!==Q.status?_(Q):(re&&re.resourceTiming&&(d.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&d.setExpiryData(re),d.loadVectorData(re,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),_(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id})}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Hi extends n.Evented{constructor(d,_,I,Y){super(),this.id=d,this.dispatcher=I,this.setEventedParent(Y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},_),n.extend(this,n.pick(_,["url","scheme","tileSize"]))}load(d){this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=kn(this._options,this.map._requestManager,null,null,(_,I)=>{this._tileJSONRequest=null,this._loaded=!0,_?this.fire(new n.ErrorEvent(_)):I&&(n.extend(this,I),I.bounds&&(this.tileBounds=new Jn(I.bounds,this.minzoom,this.maxzoom)),n.postTurnstileEvent(I.tiles),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(_)})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return n.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,_){const I=n.exported.devicePixelRatio>=2,Y=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),I,this.tileSize);d.request=n.getImage(this.map._requestManager.transformRequest(Y,n.ResourceType.Tile),(V,Q,re,ue)=>(delete d.request,d.aborted?(d.state="unloaded",_(null)):V?(d.state="errored",_(V)):Q?(this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:re,expires:ue}),d.setTexture(Q,this.map.painter),d.state="loaded",n.cacheEntryPossiblyAdded(this.dispatcher),void _(null)):_(null)))}static loadTileData(d,_,I){d.setTexture(_,I)}static unloadTileData(d,_){d.texture&&_.saveTileTexture(d.texture)}abortTile(d,_){d.request&&(d.request.cancel(),delete d.request),_()}unloadTile(d,_){d.texture&&this.map.painter.saveTileTexture(d.texture),_()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function ar(k,d,_,I,Y,V,Q,re){const ue=[k,_,Y,d,I,V,1,1,1],be=[Q,re,1],ye=n.adjoint([],ue),[Fe,et,ut]=n.transformMat3(be,be,n.transpose(ye,ye));return n.multiply$1(ue,[Fe,0,0,0,et,0,0,0,ut],ue)}class Ht extends n.Evented{constructor(d,_,I,Y){super(),this.id=d,this.dispatcher=I,this.coordinates=_.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Y),this.options=_,this._dirty=!1}load(d,_){this._loaded=_||!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),(I,Y)=>{if(this._imageRequest=null,this._loaded=!0,I)this.fire(new n.ErrorEvent(I));else if(Y){const{HTMLImageElement:V}=n.window;this.image=Y instanceof V?n.exported.getImageData(Y):Y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,d&&(this.coordinates=d),this._finishLoading()}})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this._imageRequest&&d.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=d.url,this.load(d.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(d){this.coordinates=d,this._boundsArray=void 0;const _=d.map(n.MercatorCoordinate.fromLngLat);return this.tileID=function(I){let Y=1/0,V=1/0,Q=-1/0,re=-1/0;for(const Fe of I)Y=Math.min(Y,Fe.x),V=Math.min(V,Fe.y),Q=Math.max(Q,Fe.x),re=Math.max(re,Fe.y);const ue=Math.max(Q-Y,re-V),be=Math.max(0,Math.floor(-Math.log(ue)/Math.LN2)),ye=Math.pow(2,be);return new n.CanonicalTileID(be,Math.floor((Y+Q)/2*ye),Math.floor((V+re)/2*ye))}(_),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(d){for(const ue in this.tiles){const be=this.tiles[ue];"loaded"!==be.state&&(be.state="loaded",be.texture=this.texture)}if(this._boundsArray)return;const _=n.tileTransform(this.tileID,this.map.transform.projection),[I,Y,V,Q]=this.coordinates.map(ue=>{const be=_.projection.project(ue[0],ue[1]);return n.getTilePoint(_,be)._round()});this.perspectiveTransform=function(ue,be,ye,Fe,et,ut,ft,vt,wt,Ye){const ht=ar(0,0,ue,0,0,be,ue,be),zt=ar(ye,Fe,et,ut,ft,vt,wt,Ye);return n.multiply$1(zt,n.adjoint(ht,ht),zt),[zt[6]/zt[8]*ue/n.EXTENT,zt[7]/zt[8]*be/n.EXTENT]}(this.width,this.height,I.x,I.y,Y.x,Y.y,Q.x,Q.y,V.x,V.y);const re=this._boundsArray=new n.StructArrayLayout4i8;re.emplaceBack(I.x,I.y,0,0),re.emplaceBack(Y.x,Y.y,n.EXTENT,0),re.emplaceBack(Q.x,Q.y,0,n.EXTENT),re.emplaceBack(V.x,V.y,n.EXTENT,n.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=d.createVertexBuffer(re,n.boundsAttributes.members),this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const d=this.map.painter.context,_=d.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new n.Texture(d,this.image,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(d)}loadTile(d,_){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},_(null)):(d.state="errored",_(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Vt={vector:Rn,raster:Hi,"raster-dem":class extends Hi{constructor(k,d,_,I){super(k,d,_,I),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}loadTile(k,d){const _=this.map._requestManager.normalizeTileURL(k.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function I(Y,V){Y&&(k.state="errored",d(Y)),V&&(k.dem=V,k.dem.onDeserialize(),k.needsHillshadePrepare=!0,k.needsDEMTextureUpload=!0,k.state="loaded",d(null))}k.request=n.getImage(this.map._requestManager.transformRequest(_,n.ResourceType.Tile),function(Y,V,Q,re){if(delete k.request,k.aborted)k.state="unloaded",d(null);else if(Y)k.state="errored",d(Y);else if(V){this.map._refreshExpiredTiles&&k.setExpiryData({cacheControl:Q,expires:re});const ue=n.window.ImageBitmap&&V instanceof n.window.ImageBitmap&&(null==us&&(us=n.window.OffscreenCanvas&&new n.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof n.window.createImageBitmap),us),be=1-(V.width-n.prevPowerOfTwo(V.width))/2;be<1||k.neighboringTiles||(k.neighboringTiles=this._getNeighboringTiles(k.tileID));const ye=ue?V:n.exported.getImageData(V,be),Fe={uid:k.uid,coord:k.tileID,source:this.id,rawImageData:ye,encoding:this.encoding,padding:be};k.actor&&"expired"!==k.state||(k.actor=this.dispatcher.getActor(),k.actor.send("loadDEMTile",Fe,I.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(k){const d=k.canonical,_=Math.pow(2,d.z),I=(d.x-1+_)%_,Y=0===d.x?k.wrap-1:k.wrap,V=(d.x+1+_)%_,Q=d.x+1===_?k.wrap+1:k.wrap,re={};return re[new n.OverscaledTileID(k.overscaledZ,Y,d.z,I,d.y).key]={backfilled:!1},re[new n.OverscaledTileID(k.overscaledZ,Q,d.z,V,d.y).key]={backfilled:!1},d.y>0&&(re[new n.OverscaledTileID(k.overscaledZ,Y,d.z,I,d.y-1).key]={backfilled:!1},re[new n.OverscaledTileID(k.overscaledZ,k.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},re[new n.OverscaledTileID(k.overscaledZ,Q,d.z,V,d.y-1).key]={backfilled:!1}),d.y+1<_&&(re[new n.OverscaledTileID(k.overscaledZ,Y,d.z,I,d.y+1).key]={backfilled:!1},re[new n.OverscaledTileID(k.overscaledZ,k.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},re[new n.OverscaledTileID(k.overscaledZ,Q,d.z,V,d.y+1).key]={backfilled:!1}),re}unloadTile(k){k.demTexture&&this.map.painter.saveTileTexture(k.demTexture),k.fbo&&(k.fbo.destroy(),delete k.fbo),k.dem&&delete k.dem,delete k.neighboringTiles,k.state="unloaded"}},geojson:class extends n.Evented{constructor(k,d,_,I){super(),this.id=k,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(I),this._data=d.data,this._options=n.extend({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const Y=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*Y,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*Y,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:n.EXTENT,radius:(void 0!==d.clusterRadius?d.clusterRadius:50)*Y,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}onAdd(k){this.map=k,this.setData(this._data)}setData(k){return this._data=k,this._updateWorkerData(),this}getClusterExpansionZoom(k,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:k,source:this.id},d),this}getClusterChildren(k,d){return this.actor.send("geojson.getClusterChildren",{clusterId:k,source:this.id},d),this}getClusterLeaves(k,d,_,I){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:k,limit:d,offset:_},I),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.Event("dataloading",{dataType:"source"})),this._loaded=!1;const k=n.extend({},this.workerOptions),d=this._data;"string"==typeof d?(k.request=this.map._requestManager.transformRequest(n.exported.resolveURL(d),n.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,k,(_,I)=>{if(this._loaded=!0,this._pendingLoad=null,_)this.fire(new n.ErrorEvent(_));else{const Y={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&I&&I.resourceTiming&&I.resourceTiming[this.id]&&(Y.resourceTiming=I.resourceTiming[this.id]),this.fire(new n.Event("data",Y)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(k,d){const _=k.actor?"reloadTile":"loadTile";k.actor=this.actor,k.request=this.actor.send(_,{type:this.type,uid:k.uid,tileID:k.tileID,tileZoom:k.tileZoom,zoom:k.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(I,Y)=>(delete k.request,k.unloadVectorData(),k.aborted?d(null):I?d(I):(k.loadVectorData(Y,this.map.painter,"reloadTile"===_),d(null))),void 0,"loadTile"===_)}abortTile(k){k.request&&(k.request.cancel(),delete k.request),k.aborted=!0}unloadTile(k){k.unloadVectorData(),this.actor.send("removeTile",{uid:k.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ht{constructor(k,d,_,I){super(k,d,_,I),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const k=this.options;this.urls=[];for(const d of k.urls)this.urls.push(this.map._requestManager.transformRequest(d,n.ResourceType.Source).url);n.getVideo(this.urls,(d,_)=>{this._loaded=!0,d?this.fire(new n.ErrorEvent(d)):_&&(this.video=_,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(k){if(this.video){const d=this.video.seekable;k<d.start(0)||k>d.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=k}}getVideo(){return this.video}onAdd(k){this.map||(this.map=k,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const k=this.map.painter.context,d=k.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(k,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(k)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ht,canvas:class extends Ht{constructor(k,d,_,I){super(k,d,_,I),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(Y=>!Array.isArray(Y)||2!==Y.length||Y.some(V=>"number"!=typeof V))||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${k}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${k}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${k}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof n.window.HTMLCanvasElement||this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${k}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError(`sources.${k}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(k){this.map=k,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let k=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,k=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,k=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const d=this.map.painter.context;this.texture?(k||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(d,this.canvas,d.gl.RGBA,{premultiply:!0}),this._prepareData(d)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const k of[this.canvas.width,this.canvas.height])if(isNaN(k)||k<=0)return!0;return!1}},custom:class extends n.Evented{constructor(k,d,_,I){super(),this.id=k,this.type="custom",this._dataType="raster",this._dispatcher=_,this._implementation=d,this.setEventedParent(I),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Jn(this._implementation.bounds,this.minzoom,this.maxzoom)),d.update=this._update.bind(this),d.clearTiles=this._clearTiles.bind(this),d.coveringTiles=this._coveringTiles.bind(this),n.extend(this,n.pick(d,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(k){this._map=k,this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(k),this.load()}onRemove(k){this._implementation.onRemove&&this._implementation.onRemove(k)}hasTile(k){if(this._implementation.hasTile){const{x:d,y:_,z:I}=k.canonical;return this._implementation.hasTile({x:d,y:_,z:I})}return!this.tileBounds||this.tileBounds.contains(k.canonical)}loadTile(k,d){const{x:_,y:I,z:Y}=k.tileID.canonical,V=new n.window.AbortController;k.request=Promise.resolve(this._implementation.loadTile({x:_,y:I,z:Y},{signal:V.signal})).then(function(Q){return delete k.request,k.aborted?(k.state="unloaded",d(null)):void 0===Q?(k.state="errored",d(null)):null===Q?(this.loadTileData(k,{width:this.tileSize,height:this.tileSize,data:null}),k.state="loaded",d(null)):(re=Q)instanceof n.window.ImageData||re instanceof n.window.HTMLCanvasElement||re instanceof n.window.ImageBitmap||re instanceof n.window.HTMLImageElement?(this.loadTileData(k,Q),k.state="loaded",void d(null)):(k.state="errored",d(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var re}.bind(this)).catch(Q=>{20!==Q.code&&(k.state="errored",d(Q))}),k.request.cancel=()=>V.abort()}loadTileData(k,d){Hi.loadTileData(k,d,this._map.painter)}unloadTileData(k){Hi.unloadTileData(k,this._map.painter)}unloadTile(k,d){if(this.unloadTileData(k),this._implementation.unloadTile){const{x:_,y:I,z:Y}=k.tileID.canonical;this._implementation.unloadTile({x:_,y:I,z:Y})}d()}abortTile(k,d){k.request&&k.request.cancel&&(k.request.cancel(),delete k.request),d()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(k=>({x:k.canonical.x,y:k.canonical.y,z:k.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"}))}}},dt=function(k,d,_,I){const Y=new Vt[d.type](k,d,_,I);if(Y.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${Y.id}`);return n.bindAll(["load","abort","unload","serialize","prepare"],Y),Y};function ot(k,d){const _=n.identity([]);return n.scale(_,_,[.5*k.width,.5*-k.height,1]),n.translate(_,_,[1,-1,0]),n.multiply(_,_,k.calculateProjMatrix(d.toUnwrapped())),Float32Array.from(_)}function Xe(k,d,_,I,Y,V,Q,re=!1){const ue=k.tilesIn(I,Q,re);ue.sort(Rt);const be=[];for(const Fe of ue)be.push({wrappedTileID:Fe.tile.tileID.wrapped().key,queryResults:Fe.tile.queryRenderedFeatures(d,_,k._state,Fe,Y,V,ot(k.transform,Fe.tile.tileID),re)});const ye=function(Fe){const et={},ut={};for(const ft of Fe){const vt=ft.queryResults,wt=ft.wrappedTileID,Ye=ut[wt]=ut[wt]||{};for(const ht in vt){const zt=vt[ht],xt=Ye[ht]=Ye[ht]||{},fi=et[ht]=et[ht]||[];for(const pi of zt)xt[pi.featureIndex]||(xt[pi.featureIndex]=!0,fi.push(pi))}}return et}(be);for(const Fe in ye)ye[Fe].forEach(et=>{const ut=et.feature,ft=ut.layer;ft&&"background"!==ft.type&&"sky"!==ft.type&&(ut.source=ft.source,ft["source-layer"]&&(ut.sourceLayer=ft["source-layer"]),ut.state=void 0!==ut.id?k.getFeatureState(ft["source-layer"],ut.id):{})});return ye}function Qe(k,d){const _=k.getRenderableIds().map(V=>k.getTileByID(V)),I=[],Y={};for(let V=0;V<_.length;V++){const Q=_[V],re=Q.tileID.canonical.key;Y[re]||(Y[re]=!0,Q.querySourceFeatures(I,d))}return I}function Rt(k,d){const _=k.tileID,I=d.tileID;return _.overscaledZ-I.overscaledZ||_.canonical.y-I.canonical.y||_.wrap-I.wrap||_.canonical.x-I.canonical.x}function ui(){return null!=mf.workerClass?new mf.workerClass:new n.window.Worker(mf.workerUrl)}const en="mapboxgl_preloaded_worker_pool";class ji{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<ji.workerCount;)this.workers.push(new ui);return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],0===this.numActive()&&(this.workers.forEach(_=>{_.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[en]}numActive(){return Object.keys(this.active).length}}let bn;function bt(){return bn||(bn=new ji),bn}function Ft(k,d){const _={};for(const I in k)"ref"!==I&&(_[I]=k[I]);return n.refProperties.forEach(I=>{I in d&&(_[I]=d[I])}),_}function ke(k){k=k.slice();const d=Object.create(null);for(let _=0;_<k.length;_++)d[k[_].id]=k[_];for(let _=0;_<k.length;_++)"ref"in k[_]&&(k[_]=Ft(k[_],d[k[_].ref]));return k}ji.workerCount=2;const yt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Wt(k,d,_){_.push({command:yt.addSource,args:[k,d[k]]})}function We(k,d,_){d.push({command:yt.removeSource,args:[k]}),_[k]=!0}function Jt(k,d,_,I){We(k,_,I),Wt(k,d,_)}function ge(k,d,_){let I;for(I in k[_])if(k[_].hasOwnProperty(I)&&"data"!==I&&!j(k[_][I],d[_][I]))return!1;for(I in d[_])if(d[_].hasOwnProperty(I)&&"data"!==I&&!j(k[_][I],d[_][I]))return!1;return!0}function l(k,d,_,I,Y,V){let Q;for(Q in d=d||{},k=k||{})k.hasOwnProperty(Q)&&(j(k[Q],d[Q])||_.push({command:V,args:[I,Q,d[Q],Y]}));for(Q in d)d.hasOwnProperty(Q)&&!k.hasOwnProperty(Q)&&(j(k[Q],d[Q])||_.push({command:V,args:[I,Q,d[Q],Y]}))}function u(k){return k.id}function p(k,d){return k[d.id]=d,k}class y{constructor(d,_){this.reset(d,_)}reset(d,_){this.points=d||[],this._distances=[0];for(let I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(1===this.points.length)return this.points[0];d=n.clamp(d,0,1);let _=1,I=this._distances[_];const Y=d*this.paddedLength+this.padding;for(;I<Y&&_<this._distances.length;)I=this._distances[++_];const V=_-1,Q=this._distances[V],re=I-Q,ue=re>0?(Y-Q)/re:0;return this.points[V].mult(1-ue).add(this.points[_].mult(ue))}}class w{constructor(d,_,I){const Y=this.boxCells=[],V=this.circleCells=[];this.xCellCount=Math.ceil(d/I),this.yCellCount=Math.ceil(_/I);for(let Q=0;Q<this.xCellCount*this.yCellCount;Q++)Y.push([]),V.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=_,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,_,I,Y,V){this._forEachCell(_,I,Y,V,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(_),this.bboxes.push(I),this.bboxes.push(Y),this.bboxes.push(V)}insertCircle(d,_,I,Y){this._forEachCell(_-Y,I-Y,_+Y,I+Y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(_),this.circles.push(I),this.circles.push(Y)}_insertBoxCell(d,_,I,Y,V,Q){this.boxCells[V].push(Q)}_insertCircleCell(d,_,I,Y,V,Q){this.circleCells[V].push(Q)}_query(d,_,I,Y,V,Q){if(I<0||d>this.width||Y<0||_>this.height)return!V&&[];const re=[];if(d<=0&&_<=0&&this.width<=I&&this.height<=Y){if(V)return!0;for(let ue=0;ue<this.boxKeys.length;ue++)re.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(let ue=0;ue<this.circleKeys.length;ue++){const be=this.circles[3*ue],ye=this.circles[3*ue+1],Fe=this.circles[3*ue+2];re.push({key:this.circleKeys[ue],x1:be-Fe,y1:ye-Fe,x2:be+Fe,y2:ye+Fe})}return Q?re.filter(Q):re}return this._forEachCell(d,_,I,Y,this._queryCell,re,{hitTest:V,seenUids:{box:{},circle:{}}},Q),V?re.length>0:re}_queryCircle(d,_,I,Y,V){const Q=d-I,re=d+I,ue=_-I,be=_+I;if(re<0||Q>this.width||be<0||ue>this.height)return!Y&&[];const ye=[];return this._forEachCell(Q,ue,re,be,this._queryCellCircle,ye,{hitTest:Y,circle:{x:d,y:_,radius:I},seenUids:{box:{},circle:{}}},V),Y?ye.length>0:ye}query(d,_,I,Y,V){return this._query(d,_,I,Y,!1,V)}hitTest(d,_,I,Y,V){return this._query(d,_,I,Y,!0,V)}hitTestCircle(d,_,I,Y){return this._queryCircle(d,_,I,!0,Y)}_queryCell(d,_,I,Y,V,Q,re,ue){const be=re.seenUids,ye=this.boxCells[V];if(null!==ye){const et=this.bboxes;for(const ut of ye)if(!be.box[ut]){be.box[ut]=!0;const ft=4*ut;if(d<=et[ft+2]&&_<=et[ft+3]&&I>=et[ft+0]&&Y>=et[ft+1]&&(!ue||ue(this.boxKeys[ut]))){if(re.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[ut],x1:et[ft],y1:et[ft+1],x2:et[ft+2],y2:et[ft+3]})}}}const Fe=this.circleCells[V];if(null!==Fe){const et=this.circles;for(const ut of Fe)if(!be.circle[ut]){be.circle[ut]=!0;const ft=3*ut;if(this._circleAndRectCollide(et[ft],et[ft+1],et[ft+2],d,_,I,Y)&&(!ue||ue(this.circleKeys[ut]))){if(re.hitTest)return Q.push(!0),!0;{const vt=et[ft],wt=et[ft+1],Ye=et[ft+2];Q.push({key:this.circleKeys[ut],x1:vt-Ye,y1:wt-Ye,x2:vt+Ye,y2:wt+Ye})}}}}}_queryCellCircle(d,_,I,Y,V,Q,re,ue){const be=re.circle,ye=re.seenUids,Fe=this.boxCells[V];if(null!==Fe){const ut=this.bboxes;for(const ft of Fe)if(!ye.box[ft]){ye.box[ft]=!0;const vt=4*ft;if(this._circleAndRectCollide(be.x,be.y,be.radius,ut[vt+0],ut[vt+1],ut[vt+2],ut[vt+3])&&(!ue||ue(this.boxKeys[ft])))return Q.push(!0),!0}}const et=this.circleCells[V];if(null!==et){const ut=this.circles;for(const ft of et)if(!ye.circle[ft]){ye.circle[ft]=!0;const vt=3*ft;if(this._circlesCollide(ut[vt],ut[vt+1],ut[vt+2],be.x,be.y,be.radius)&&(!ue||ue(this.circleKeys[ft])))return Q.push(!0),!0}}}_forEachCell(d,_,I,Y,V,Q,re,ue){const be=this._convertToXCellCoord(d),ye=this._convertToYCellCoord(_),Fe=this._convertToXCellCoord(I),et=this._convertToYCellCoord(Y);for(let ut=be;ut<=Fe;ut++)for(let ft=ye;ft<=et;ft++)if(V.call(this,d,_,I,Y,this.xCellCount*ft+ut,Q,re,ue))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,_,I,Y,V,Q){const re=Y-d,ue=V-_,be=I+Q;return be*be>re*re+ue*ue}_circleAndRectCollide(d,_,I,Y,V,Q,re){const ue=(Q-Y)/2,be=Math.abs(d-(Y+ue));if(be>ue+I)return!1;const ye=(re-V)/2,Fe=Math.abs(_-(V+ye));if(Fe>ye+I)return!1;if(be<=ue||Fe<=ye)return!0;const et=be-ue,ut=Fe-ye;return et*et+ut*ut<=I*I}}const C={unknown:0,flipRequired:1,flipNotRequired:2},M=Math.tan(85*Math.PI/180);function B(k,d,_,I,Y,V,Q){const re=n.create();if(_)if("globe"===V.name){const ue=n.calculateGlobeLabelMatrix(Y,d);n.multiply(re,re,ue)}else{const ue=kt([],Q);re[0]=ue[0],re[1]=ue[1],re[4]=ue[2],re[5]=ue[3],I||n.rotateZ(re,re,Y.angle)}else n.multiply(re,Y.labelPlaneMatrix,k);return re}function H(k,d,_,I,Y,V,Q){const re=B(k,d,_,I,Y,V,Q);return"globe"===V.name&&_||(re[2]=re[6]=re[10]=re[14]=0),re}function K(k,d,_,I,Y,V,Q){if(_){if("globe"===V.name){const re=B(k,d,_,I,Y,V,Q);return n.invert(re,re),n.multiply(re,k,re),re}{const re=n.clone(k),ue=n.identity([]);return ue[0]=Q[0],ue[1]=Q[1],ue[4]=Q[2],ue[5]=Q[3],n.multiply(re,re,ue),I||n.rotateZ(re,re,-Y.angle),re}}return Y.glCoordMatrix}function J(k,d,_,I){const Y=[k,d,_,1];_?n.transformMat4$1(Y,Y,I):Le(Y,Y,I);const V=Y[3];return Y[0]/=V,Y[1]/=V,Y[2]/=V,Y}function ne(k,d){return Math.min(.5+k/d*.5,1.5)}function de(k,d){const _=k[0]/k[3],I=k[1]/k[3];return _>=-d[0]&&_<=d[0]&&I>=-d[1]&&I<=d[1]}function xe(k,d,_,I,Y,V,Q,re,ue,be){const ye=_.transform,Fe=I?k.textSizeData:k.iconSizeData,et=n.evaluateSizeForZoom(Fe,_.transform.zoom),ut="globe"===ye.projection.name,ft=[256/_.width*2+1,256/_.height*2+1],vt=I?k.text.dynamicLayoutVertexArray:k.icon.dynamicLayoutVertexArray;vt.clear();let wt=null;ut&&(wt=I?k.text.globeExtVertexArray:k.icon.globeExtVertexArray);const Ye=k.lineVertexArray,ht=I?k.text.placedSymbolArray:k.icon.placedSymbolArray,zt=_.transform.width/_.transform.height;let xt,fi=!1;for(let pi=0;pi<ht.length;pi++){const ai=ht.get(pi),{numGlyphs:Ii,writingMode:Ei}=ai;if(Ei!==n.WritingMode.vertical||fi||xt===n.WritingMode.horizontal||(fi=!0),xt=Ei,(ai.hidden||Ei===n.WritingMode.vertical)&&!fi){we(Ii,vt);continue}fi=!1;const Yi=new n.Point(ai.tileAnchorX,ai.tileAnchorY);let{x:Gn,y:Ni,z:dn}=ye.projection.projectTilePoint(Yi.x,Yi.y,be.canonical);if(ue){const[ms,Sr,Ir]=ue(Yi);Gn+=ms,Ni+=Sr,dn+=Ir}const Vi=[Gn,Ni,dn,1];if(n.transformMat4$1(Vi,Vi,d),!de(Vi,ft)){we(Ii,vt);continue}const Dn=ne(_.transform.cameraToCenterDistance,Vi[3]),Wi=n.evaluateSizeForFeature(Fe,et,ai),on=Q?Wi/Dn:Wi*Dn,Wn=J(Gn,Ni,dn,Y);if(Wn[3]<=0){we(Ii,vt);continue}let Ln={};const Hn=Q?null:ue,Rr=Te(ai,on,!1,re,d,Y,V,k.glyphOffsetArray,Ye,vt,wt,Wn,Yi,Ln,zt,Hn,ye.projection,be,Q);fi=Rr.useVertical,Hn&&Rr.needsFlipping&&(Ln={}),(Rr.notEnoughRoom||fi||Rr.needsFlipping&&Te(ai,on,!0,re,d,Y,V,k.glyphOffsetArray,Ye,vt,wt,Wn,Yi,Ln,zt,Hn,ye.projection,be,Q).notEnoughRoom)&&we(Ii,vt)}I?(k.text.dynamicLayoutVertexBuffer.updateData(vt),wt&&k.text.globeExtVertexBuffer.updateData(wt)):(k.icon.dynamicLayoutVertexBuffer.updateData(vt),wt&&k.icon.globeExtVertexBuffer.updateData(wt))}function Se(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt){const{lineStartIndex:wt,glyphStartIndex:Ye,segment:ht}=re,zt=Ye+re.numGlyphs,xt=wt+re.lineLength,fi=d.getoffsetX(Ye),pi=d.getoffsetX(zt-1),ai=le(k*fi,_,I,Y,V,Q,ht,wt,xt,ue,be,ye,Fe,et,!0,ut,ft,vt);if(!ai)return null;const Ii=le(k*pi,_,I,Y,V,Q,ht,wt,xt,ue,be,ye,Fe,et,!0,ut,ft,vt);return Ii?{first:ai,last:Ii}:null}function Pe(k,d,_,I){return k===n.WritingMode.horizontal&&Math.abs(I)>Math.abs(_)?{useVertical:!0}:k===n.WritingMode.vertical?I>0?{needsFlipping:!0}:null:d!==C.unknown&&(0===(Y=_)||Math.abs(I/Y)>M)?d===C.flipRequired?{needsFlipping:!0}:null:_<0?{needsFlipping:!0}:null;var Y}function Te(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt,wt,Ye,ht){const zt=d/24,xt=k.lineOffsetX*zt,fi=k.lineOffsetY*zt,{lineStartIndex:pi,glyphStartIndex:ai,numGlyphs:Ii,segment:Ei,writingMode:Yi,flipState:Gn}=k,Ni=pi+k.lineLength,dn=Vi=>{if(ye){const[Wn,Ln,Hn]=Vi.up,Rr=be.length;n.updateGlobeVertexNormal(ye,Rr+0,Wn,Ln,Hn),n.updateGlobeVertexNormal(ye,Rr+1,Wn,Ln,Hn),n.updateGlobeVertexNormal(ye,Rr+2,Wn,Ln,Hn),n.updateGlobeVertexNormal(ye,Rr+3,Wn,Ln,Hn)}const[Dn,Wi,on]=Vi.point;n.addDynamicAttributes(be,Dn,Wi,on,Vi.angle)};if(Ii>1){const Vi=Se(zt,re,xt,fi,_,Fe,et,k,ue,V,ut,vt,!1,wt,Ye,ht);if(!Vi)return{notEnoughRoom:!0};if(I&&!_){let[Dn,Wi,on]=Vi.first.point,[Wn,Ln,Hn]=Vi.last.point;[Dn,Wi]=J(Dn,Wi,on,Q),[Wn,Ln]=J(Wn,Ln,Hn,Q);const Rr=Pe(Yi,Gn,(Wn-Dn)*ft,Ln-Wi);if(k.flipState=Rr&&Rr.needsFlipping?C.flipRequired:C.flipNotRequired,Rr)return Rr}dn(Vi.first);for(let Dn=ai+1;Dn<ai+Ii-1;Dn++){const Wi=le(zt*re.getoffsetX(Dn),xt,fi,_,Fe,et,Ei,pi,Ni,ue,V,ut,vt,!1,!1,wt,Ye,ht);if(!Wi)return be.length-=4*(Dn-ai),{notEnoughRoom:!0};dn(Wi)}dn(Vi.last)}else{if(I&&!_){const Dn=J(et.x,et.y,0,Y),Wi=pi+Ei+1,on=new n.Point(ue.getx(Wi),ue.gety(Wi)),Wn=J(on.x,on.y,0,Y),Ln=Wn[3]>0?Wn:U(et,on,Dn,1,Y,void 0,wt,Ye.canonical),Hn=Pe(Yi,Gn,(Ln[0]-Dn[0])*ft,Ln[1]-Dn[1]);if(k.flipState=Hn&&Hn.needsFlipping?C.flipRequired:C.flipNotRequired,Hn)return Hn}const Vi=le(zt*re.getoffsetX(ai),xt,fi,_,Fe,et,Ei,pi,Ni,ue,V,ut,vt,!1,!1,wt,Ye,ht);if(!Vi)return{notEnoughRoom:!0};dn(Vi)}return{}}function Ne(k,d,_,I,Y){const{x:V,y:Q,z:re}=I.projectTilePoint(k.x,k.y,d);if(!Y)return J(V,Q,re,_);const[ue,be,ye]=Y(k);return J(V+ue,Q+be,re+ye,_)}function U(k,d,_,I,Y,V,Q,re){const ue=Ne(k.sub(d)._unit()._add(k),re,Y,Q,V);return n.sub(ue,_,ue),n.normalize(ue,ue),n.scaleAndAdd(ue,_,ue,I)}function le(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt,wt,Ye){const ht=I?k-d:k+d;let zt=ht>0?1:-1,xt=0;I&&(zt*=-1,xt=Math.PI),zt<0&&(xt+=Math.PI);let fi=re+Q+(zt>0?0:1)|0,pi=Y,ai=Y,Ii=0,Ei=0;const Yi=Math.abs(ht),Gn=[],Ni=[];let dn=V,Vi=dn;const Dn=()=>U(Vi,dn,ai,Yi-Ii+1,ye,et,vt,wt.canonical);for(;Ii+Ei<=Yi;){if(fi+=zt,fi<re||fi>=ue)return null;if(ai=pi,Vi=dn,Gn.push(ai),ut&&Ni.push(Vi),dn=new n.Point(be.getx(fi),be.gety(fi)),pi=Fe[fi],!pi){const Ir=Ne(dn,wt.canonical,ye,vt,et);pi=Ir[3]>0?Fe[fi]=Ir:Dn()}Ii+=Ei,Ei=n.distance(ai,pi)}ft&&et&&(Fe[fi]&&(pi=Dn(),Ei=n.distance(ai,pi)),Fe[fi]=pi);const Wi=(Yi-Ii)/Ei,on=dn.sub(Vi)._mult(Wi)._add(Vi),Wn=n.sub([],pi,ai),Ln=n.scaleAndAdd([],ai,Wn,Wi);let Hn=[0,0,1],Rr=Wn[0],ms=Wn[1];if(Ye&&(Hn=vt.upVector(wt.canonical,on.x,on.y),0!==Hn[0]||0!==Hn[1]||1!==Hn[2])){const Ir=[Hn[2],0,-Hn[0]],xs=n.cross([],Hn,Ir);n.normalize(Ir,Ir),n.normalize(xs,xs),Rr=n.dot(Wn,Ir),ms=n.dot(Wn,xs)}if(_){const Ir=n.cross([],Hn,Wn);n.normalize(Ir,Ir),n.scaleAndAdd(Ln,Ln,Ir,_*zt)}const Sr=xt+Math.atan2(ms,Rr);return Gn.push(Ln),ut&&Ni.push(on),{point:Ln,angle:Sr,path:Gn,tilePath:Ni,up:Hn}}function we(k,d){const _=d.length,I=_+4*k;d.resize(I),d.float32.fill(-1/0,4*_,4*I)}function Le(k,d,_){const I=d[0],Y=d[1];return k[0]=_[0]*I+_[4]*Y+_[12],k[1]=_[1]*I+_[5]*Y+_[13],k[3]=_[3]*I+_[7]*Y+_[15],k}const je=100;class lt{constructor(d,_,I=new w(d.width+200,d.height+200,25),Y=new w(d.width+200,d.height+200,25)){this.transform=d,this.grid=I,this.ignoredGrid=Y,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+je,this.screenBottomBoundary=d.height+je,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.fogState=_}placeCollisionBox(d,_,I,Y,V,Q,re,ue){let be=I.projectedAnchorX,ye=I.projectedAnchorY,Fe=I.projectedAnchorZ;const et=I.elevation,ut=I.tileID,ft=d.getProjection();if(et&&ut){const[pi,ai,Ii]=ft.upVector(ut.canonical,I.tileAnchorX,I.tileAnchorY),Ei=ft.upVectorScale(ut.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;be+=pi*et*Ei,ye+=ai*et*Ei,Fe+=Ii*et*Ei}const vt=this.projectAndGetPerspectiveRatio(re,be,ye,Fe,I.tileID,"globe"===ft.name||!!et||this.transform.pitch>0,ft),wt=Q*vt.perspectiveRatio,Ye=(I.x1*_+Y.x-I.padding)*wt+vt.point.x,ht=(I.y1*_+Y.y-I.padding)*wt+vt.point.y,zt=(I.x2*_+Y.x+I.padding)*wt+vt.point.x,xt=(I.y2*_+Y.y+I.padding)*wt+vt.point.y,fi=vt.perspectiveRatio<=.55||vt.occluded;return!this.isInsideGrid(Ye,ht,zt,xt)||!V&&this.grid.hitTest(Ye,ht,zt,xt,ue)||fi?{box:[],offscreen:!1,occluded:vt.occluded}:{box:[Ye,ht,zt,xt],offscreen:this.isOffscreen(Ye,ht,zt,xt),occluded:!1}}placeCollisionCircles(d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt){const wt=[],Ye=this.transform.elevation,ht=d.getProjection(),zt=Ye?Ye.getAtTileOffsetFunc(vt,this.transform.center.lat,this.transform.worldSize,ht):null,xt=new n.Point(I.tileAnchorX,I.tileAnchorY);let{x:fi,y:pi,z:ai}=ht.projectTilePoint(xt.x,xt.y,vt.canonical);if(zt){const[on,Wn,Ln]=zt(xt);fi+=on,pi+=Wn,ai+=Ln}const Ii="globe"===ht.name,Ei=this.projectAndGetPerspectiveRatio(re,fi,pi,ai,vt,Ii||!!Ye||this.transform.pitch>0,ht),{perspectiveRatio:Yi}=Ei,Gn=(Fe?Q/Yi:Q*Yi)/n.ONE_EM,Ni=J(fi,pi,ai,ue),dn=Ei.signedDistanceFromCamera>0?Se(Gn,V,I.lineOffsetX*Gn,I.lineOffsetY*Gn,!1,Ni,xt,I,Y,ue,{},Ye&&!Fe?zt:null,Fe&&!!Ye,ht,vt,Fe):null;let Vi=!1,Dn=!1,Wi=!0;if(dn&&!Ei.occluded){const on=.5*ut*Yi+ft,Wn=new n.Point(-100,-100),Ln=new n.Point(this.screenRightBoundary,this.screenBottomBoundary),Hn=new y,{first:Rr,last:ms}=dn,Sr=Rr.path.length;let Ir=[];for(let zr=Sr-1;zr>=1;zr--)Ir.push(Rr.path[zr]);for(let zr=1;zr<ms.path.length;zr++)Ir.push(ms.path[zr]);const xs=2.5*on;be&&(Ir=Ir.map(([zr,Qs,Za],eo)=>(zt&&!Ii&&(Za=zt(eo<Sr-1?Rr.tilePath[Sr-1-eo]:ms.tilePath[eo-Sr+2])[2]),J(zr,Qs,Za,be))),Ir.some(zr=>zr[3]<=0)&&(Ir=[]));let cs=[];if(Ir.length>0){let zr=1/0,Qs=-1/0,Za=1/0,eo=-1/0;for(const no of Ir)zr=Math.min(zr,no[0]),Za=Math.min(Za,no[1]),Qs=Math.max(Qs,no[0]),eo=Math.max(eo,no[1]);Qs>=Wn.x&&zr<=Ln.x&&eo>=Wn.y&&Za<=Ln.y&&(cs=[Ir.map(no=>new n.Point(no[0],no[1]))],(zr<Wn.x||Qs>Ln.x||Za<Wn.y||eo>Ln.y)&&(cs=n.clipLine(cs,Wn.x,Wn.y,Ln.x,Ln.y)))}for(const zr of cs){Hn.reset(zr,.25*on);let Qs=0;Qs=Hn.length<=.5*on?1:Math.ceil(Hn.paddedLength/xs)+1;for(let Za=0;Za<Qs;Za++){const eo=Za/Math.max(Qs-1,1),no=Hn.lerp(eo),jc=no.x+je,Wo=no.y+je;wt.push(jc,Wo,on,0);const ua=jc-on,bh=Wo-on,_o=jc+on,Ca=Wo+on;if(Wi=Wi&&this.isOffscreen(ua,bh,_o,Ca),Dn=Dn||this.isInsideGrid(ua,bh,_o,Ca),!_&&this.grid.hitTestCircle(jc,Wo,on,et)&&(Vi=!0,!ye))return{circles:[],offscreen:!1,collisionDetected:Vi,occluded:!1}}}}return{circles:!ye&&Vi||!Dn?[]:wt,offscreen:Wi,collisionDetected:Vi,occluded:Ei.occluded}}queryRenderedSymbols(d){if(0===d.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const _=[];let I=1/0,Y=1/0,V=-1/0,Q=-1/0;for(const ye of d){const Fe=new n.Point(ye.x+je,ye.y+je);I=Math.min(I,Fe.x),Y=Math.min(Y,Fe.y),V=Math.max(V,Fe.x),Q=Math.max(Q,Fe.y),_.push(Fe)}const re=this.grid.query(I,Y,V,Q).concat(this.ignoredGrid.query(I,Y,V,Q)),ue={},be={};for(const ye of re){const Fe=ye.key;if(void 0===ue[Fe.bucketInstanceId]&&(ue[Fe.bucketInstanceId]={}),ue[Fe.bucketInstanceId][Fe.featureIndex])continue;const et=[new n.Point(ye.x1,ye.y1),new n.Point(ye.x2,ye.y1),new n.Point(ye.x2,ye.y2),new n.Point(ye.x1,ye.y2)];n.polygonIntersectsPolygon(_,et)&&(ue[Fe.bucketInstanceId][Fe.featureIndex]=!0,void 0===be[Fe.bucketInstanceId]&&(be[Fe.bucketInstanceId]=[]),be[Fe.bucketInstanceId].push(Fe.featureIndex))}return be}insertCollisionBox(d,_,I,Y,V){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:I,featureIndex:Y,collisionGroupID:V},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,_,I,Y,V){const Q=_?this.ignoredGrid:this.grid,re={bucketInstanceId:I,featureIndex:Y,collisionGroupID:V};for(let ue=0;ue<d.length;ue+=4)Q.insertCircle(re,d[ue],d[ue+1],d[ue+2])}projectAndGetPerspectiveRatio(d,_,I,Y,V,Q,re){const ue=[_,I,Y,1];let be=!1;Y||this.transform.pitch>0?(n.transformMat4$1(ue,ue,d),this.fogState&&V&&"globe"!==re.name&&(be=function(et,ut,ft,vt,wt,Ye){const ht=Ye.calculateFogTileMatrix(wt),zt=[ut,ft,vt];return n.transformMat4(zt,zt,ht),Xi(et,zt,Ye.pitch,Ye._fov)}(this.fogState,_,I,Y,V.toUnwrapped(),this.transform)>.9)):Le(ue,ue,d);const ye=ue[3];return{point:new n.Point((ue[0]/ye+1)/2*this.transform.width+je,(-ue[1]/ye+1)/2*this.transform.height+je),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(re)/ye*.5,1.5),signedDistanceFromCamera:ye,occluded:Q&&ue[2]>ye||be}}isOffscreen(d,_,I,Y){return I<je||d>=this.screenRightBoundary||Y<je||_>this.screenBottomBoundary}isInsideGrid(d,_,I,Y){return I>=0&&d<this.gridRightBoundary&&Y>=0&&_<this.gridBottomBoundary}getViewportMatrix(){const d=n.identity([]);return n.translate(d,d,[-100,-100,0]),d}}function jt(k,d,_){const I=d.createTileMatrix(k,k.worldSize,_.toUnwrapped());return n.multiply(new Float32Array(16),k.projMatrix,I)}function qt(k,d,_){if(d.projection.name===_.projection.name)return k.projMatrix;const I=_.clone();return I.setProjection(d.projection),jt(I,d.getProjection(),k)}function Di(k,d,_){return d.name===_.projection.name?k.projMatrix:jt(_,d,k)}class Qi{constructor(d,_,I,Y){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?_:-_))):Y&&I?1:0,this.placed=I}isHidden(){return 0===this.opacity&&!this.placed}}class cn{constructor(d,_,I,Y,V,Q=!1){this.text=new Qi(d?d.text:null,_,I,V),this.icon=new Qi(d?d.icon:null,_,Y,V),this.clipped=Q}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Qn{constructor(d,_,I,Y=!1){this.text=d,this.icon=_,this.skipFade=I,this.clipped=Y}}class gr{constructor(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]}}class Zr{constructor(d,_,I,Y,V){this.bucketInstanceId=d,this.featureIndex=_,this.sourceLayerIndex=I,this.bucketIndex=Y,this.tileID=V}}class hs{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const _=++this.maxGroupID;this.collisionGroups[d]={ID:_,predicate:I=>I.collisionGroupID===_}}return this.collisionGroups[d]}}function vs(k,d,_,I,Y){const{horizontalAlign:V,verticalAlign:Q}=n.getAnchorAlignment(k),re=-(V-.5)*d,ue=-(Q-.5)*_,be=n.evaluateVariableOffset(k,I);return new n.Point(re+be[0]*Y,ue+be[1]*Y)}function _s(k,d,_,I,Y){const V=new n.Point(k,d);return _&&V._rotate(I?Y:-Y),V}class Js{constructor(d,_,I,Y,V){this.transform=d.clone(),this.projection=d.projection.name,this.collisionIndex=new lt(this.transform,V),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new hs(I),this.collisionCircleArrays={},this.prevPlacement=Y,Y&&(Y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,_,I,Y){const V=I.getBucket(_),Q=I.latestFeatureIndex;if(!V||!Q||_.id!==V.layerIds[0])return;const re=V.layers[0].layout,ue=I.collisionBoxArray,be=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),ye=I.tileSize/n.EXTENT,Fe=I.tileID.toUnwrapped();this.transform.setProjection(V.projection);const et=(ut=I.tileID,ft=V.getProjection(),vt=this.transform,ft.name===this.projection?vt.calculateProjMatrix(ut.toUnwrapped()):jt(vt,ft,ut));var ut,ft,vt;const wt="map"===re.get("text-pitch-alignment"),Ye="map"===re.get("text-rotation-alignment");_.compileFilter();const ht=_.dynamicFilter(),zt=_.dynamicFilterNeedsFeature(),xt=this.transform.calculatePixelsToTileUnitsMatrix(I),fi=H(et,I.tileID.canonical,wt,Ye,this.transform,V.getProjection(),xt);let pi=null;if(wt){const Ei=K(et,I.tileID.canonical,wt,Ye,this.transform,V.getProjection(),xt);pi=n.multiply([],this.transform.labelPlaneMatrix,Ei)}let ai=null;ht&&I.latestFeatureIndex&&(ai={unwrappedTileID:Fe,dynamicFilter:ht,dynamicFilterNeedsFeature:zt,featureIndex:I.latestFeatureIndex}),this.retainedQueryData[V.bucketInstanceId]=new Zr(V.bucketInstanceId,Q,V.sourceLayerIndex,V.index,I.tileID);const Ii={bucket:V,layout:re,posMatrix:et,textLabelPlaneMatrix:fi,labelToScreenMatrix:pi,clippingData:ai,scale:be,textPixelRatio:ye,holdingForFade:I.holdingForFade(),collisionBoxArray:ue,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(V.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:n.evaluateSizeForZoom(V.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(V.sourceID)};if(Y)for(const Ei of V.sortKeyRanges){const{sortKey:Yi,symbolInstanceStart:Gn,symbolInstanceEnd:Ni}=Ei;d.push({sortKey:Yi,symbolInstanceStart:Gn,symbolInstanceEnd:Ni,parameters:Ii})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:V.symbolInstances.length,parameters:Ii})}attemptAnchorPlacement(d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt,wt,Ye,ht){const{textOffset0:zt,textOffset1:xt,crossTileID:fi}=et,pi=[zt,xt],ai=vs(d,I,Y,pi,V),Ii=this.collisionIndex.placeCollisionBox(ft,V,_,_s(ai.x,ai.y,Q,re,this.transform.angle),Fe,ue,be,ye.predicate);if(wt){const Ei=ft.getSymbolInstanceIconSize(ht,this.transform.zoom,et.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(ft,Ei,wt,_s(ai.x,ai.y,Q,re,this.transform.angle),Fe,ue,be,ye.predicate).box.length)return}if(Ii.box.length>0){let Ei;return this.prevPlacement&&this.prevPlacement.variableOffsets[fi]&&this.prevPlacement.placements[fi]&&this.prevPlacement.placements[fi].text&&(Ei=this.prevPlacement.variableOffsets[fi].anchor),this.variableOffsets[fi]={textOffset:pi,width:I,height:Y,anchor:d,textScale:V,prevAnchor:Ei},this.markUsedJustification(ft,d,et,vt),ft.allowVerticalPlacement&&(this.markUsedOrientation(ft,vt,et),this.placedOrientations[fi]=vt),{shift:ai,placedGlyphBoxes:Ii}}}placeLayerBucketPart(d,_,I,Y){const{bucket:V,layout:Q,posMatrix:re,textLabelPlaneMatrix:ue,labelToScreenMatrix:be,clippingData:ye,textPixelRatio:Fe,holdingForFade:et,collisionBoxArray:ut,partiallyEvaluatedTextSize:ft,partiallyEvaluatedIconSize:vt,collisionGroup:wt}=d.parameters,Ye=Q.get("text-optional"),ht=Q.get("icon-optional"),zt=Q.get("text-allow-overlap"),xt=Q.get("icon-allow-overlap"),fi="map"===Q.get("text-rotation-alignment"),pi="map"===Q.get("text-pitch-alignment"),ai="none"!==Q.get("icon-text-fit"),Ii="viewport-y"===Q.get("symbol-z-order");this.transform.setProjection(V.projection);let Ei=zt&&(xt||!V.hasIconData()||ht),Yi=xt&&(zt||!V.hasTextData()||Ye);!V.collisionArrays&&ut&&V.deserializeCollisionBoxes(ut),I&&Y&&V.updateCollisionDebugBuffers(this.transform.zoom,ut);const Gn=(Ni,dn,Vi)=>{const{crossTileID:Dn,numVerticalGlyphVertices:Wi}=Ni;if(ye){const _o={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ca=null;if(ye.dynamicFilterNeedsFeature){const Da=this.retainedQueryData[V.bucketInstanceId];Ca=ye.featureIndex.loadFeature({featureIndex:Ni.featureIndex,bucketIndex:Da.bucketIndex,sourceLayerIndex:Da.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,ye.dynamicFilter)(_o,Ca,this.retainedQueryData[V.bucketInstanceId].tileID.canonical,new n.Point(Ni.tileAnchorX,Ni.tileAnchorY),this.transform.calculateDistanceTileData(ye.unwrappedTileID)))return this.placements[Dn]=new Qn(!1,!1,!1,!0),void _.add(Dn)}if(_.has(Dn))return;if(et)return void(this.placements[Dn]=new Qn(!1,!1,!1));let on=!1,Wn=!1,Ln=!0,Hn=!1,Rr=!1,ms=null,Sr={box:null,offscreen:null,occluded:null},Ir={box:null,offscreen:null,occluded:null},xs=null,cs=null,zr=null,Qs=0,Za=0,eo=0;Vi.textFeatureIndex?Qs=Vi.textFeatureIndex:Ni.useRuntimeCollisionCircles&&(Qs=Ni.featureIndex),Vi.verticalTextFeatureIndex&&(Za=Vi.verticalTextFeatureIndex);const no=_o=>{_o.tileID=this.retainedQueryData[V.bucketInstanceId].tileID;const Ca=this.transform.elevation;(Ca||_o.elevation)&&(_o.elevation=Ca?Ca.getAtTileOffset(_o.tileID,_o.tileAnchorX,_o.tileAnchorY):0)},jc=Vi.textBox;if(jc){no(jc);const _o=Da=>{let ro=n.WritingMode.horizontal;if(V.allowVerticalPlacement&&!Da&&this.prevPlacement){const Wc=this.prevPlacement.placedOrientations[Dn];Wc&&(this.placedOrientations[Dn]=Wc,ro=Wc,this.markUsedOrientation(V,ro,Ni))}return ro},Ca=(Da,ro)=>{if(V.allowVerticalPlacement&&Wi>0&&Vi.verticalTextBox){for(const Wc of V.writingModes)if(Wc===n.WritingMode.vertical?(Sr=ro(),Ir=Sr):Sr=Da(),Sr&&Sr.box&&Sr.box.length)break}else Sr=Da()};if(Q.get("text-variable-anchor")){let Da=Q.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Dn]){const to=this.prevPlacement.variableOffsets[Dn];Da.indexOf(to.anchor)>0&&(Da=Da.filter(cu=>cu!==to.anchor),Da.unshift(to.anchor))}const ro=(to,cu,uu)=>{const To=V.getSymbolInstanceTextSize(ft,Ni,this.transform.zoom,dn),wh=(to.x2-to.x1)*To+2*to.padding,tc=(to.y2-to.y1)*To+2*to.padding,Gh=ai&&!xt?cu:null;Gh&&no(Gh);let Ou={box:[],offscreen:!1,occluded:!1};const lp=zt?2*Da.length:Da.length;for(let Td=0;Td<lp;++Td){const Sd=this.attemptAnchorPlacement(Da[Td%Da.length],to,wh,tc,To,fi,pi,Fe,re,wt,Td>=Da.length,Ni,dn,V,uu,Gh,ft,vt);if(Sd&&(Ou=Sd.placedGlyphBoxes,Ou&&Ou.box&&Ou.box.length)){on=!0,ms=Sd.shift;break}}return Ou};Ca(()=>ro(jc,Vi.iconBox,n.WritingMode.horizontal),()=>{const to=Vi.verticalTextBox;return to&&no(to),V.allowVerticalPlacement&&!(Sr&&Sr.box&&Sr.box.length)&&Wi>0&&to?ro(to,Vi.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Sr&&(on=Sr.box,Ln=Sr.offscreen,Hn=Sr.occluded);const Wc=_o(!(!Sr||!Sr.box));if(!on&&this.prevPlacement){const to=this.prevPlacement.variableOffsets[Dn];to&&(this.variableOffsets[Dn]=to,this.markUsedJustification(V,to.anchor,Ni,Wc))}}else{const Da=(ro,Wc)=>{const to=V.getSymbolInstanceTextSize(ft,Ni,this.transform.zoom,dn),cu=this.collisionIndex.placeCollisionBox(V,to,ro,new n.Point(0,0),zt,Fe,re,wt.predicate);return cu&&cu.box&&cu.box.length&&(this.markUsedOrientation(V,Wc,Ni),this.placedOrientations[Dn]=Wc),cu};Ca(()=>Da(jc,n.WritingMode.horizontal),()=>{const ro=Vi.verticalTextBox;return V.allowVerticalPlacement&&Wi>0&&ro?(no(ro),Da(ro,n.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),_o(!!(Sr&&Sr.box&&Sr.box.length))}}if(xs=Sr,on=xs&&xs.box&&xs.box.length>0,Ln=xs&&xs.offscreen,Hn=xs&&xs.occluded,Ni.useRuntimeCollisionCircles){const _o=V.text.placedSymbolArray.get(Ni.centerJustifiedTextSymbolIndex>=0?Ni.centerJustifiedTextSymbolIndex:Ni.verticalPlacedTextSymbolIndex),Ca=n.evaluateSizeForFeature(V.textSizeData,ft,_o),Da=Q.get("text-padding");cs=this.collisionIndex.placeCollisionCircles(V,zt,_o,V.lineVertexArray,V.glyphOffsetArray,Ca,re,ue,be,I,pi,wt.predicate,Ni.collisionCircleDiameter*Ca/n.ONE_EM,Da,this.retainedQueryData[V.bucketInstanceId].tileID),on=zt||cs.circles.length>0&&!cs.collisionDetected,Ln=Ln&&cs.offscreen,Hn=cs.occluded}if(Vi.iconFeatureIndex&&(eo=Vi.iconFeatureIndex),Vi.iconBox){const _o=Ca=>{no(Ca);const Da=ai&&ms?_s(ms.x,ms.y,fi,pi,this.transform.angle):new n.Point(0,0),ro=V.getSymbolInstanceIconSize(vt,this.transform.zoom,Ni.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(V,ro,Ca,Da,xt,Fe,re,wt.predicate)};Ir&&Ir.box&&Ir.box.length&&Vi.verticalIconBox?(zr=_o(Vi.verticalIconBox),Wn=zr.box.length>0):(zr=_o(Vi.iconBox),Wn=zr.box.length>0),Ln=Ln&&zr.offscreen,Rr=zr.occluded}const Wo=Ye||0===Ni.numHorizontalGlyphVertices&&0===Wi,ua=ht||0===Ni.numIconVertices;if(Wo||ua?ua?Wo||(Wn=Wn&&on):on=Wn&&on:Wn=on=Wn&&on,on&&xs&&xs.box&&this.collisionIndex.insertCollisionBox(xs.box,Q.get("text-ignore-placement"),V.bucketInstanceId,Ir&&Ir.box&&Za?Za:Qs,wt.ID),Wn&&zr&&this.collisionIndex.insertCollisionBox(zr.box,Q.get("icon-ignore-placement"),V.bucketInstanceId,eo,wt.ID),cs&&(on&&this.collisionIndex.insertCollisionCircles(cs.circles,Q.get("text-ignore-placement"),V.bucketInstanceId,Qs,wt.ID),I)){const _o=V.bucketInstanceId;let Ca=this.collisionCircleArrays[_o];void 0===Ca&&(Ca=this.collisionCircleArrays[_o]=new gr);for(let Da=0;Da<cs.circles.length;Da+=4)Ca.circles.push(cs.circles[Da+0]),Ca.circles.push(cs.circles[Da+1]),Ca.circles.push(cs.circles[Da+2]),Ca.circles.push(cs.collisionDetected?1:0)}const bh="globe"!==V.projection.name;Ei=Ei&&(bh||!Hn),Yi=Yi&&(bh||!Rr),this.placements[Dn]=new Qn(on||Ei,Wn||Yi,Ln||V.justReloaded),_.add(Dn)};if(Ii){const Ni=V.getSortedSymbolIndexes(this.transform.angle);for(let dn=Ni.length-1;dn>=0;--dn){const Vi=Ni[dn];Gn(V.symbolInstances.get(Vi),Vi,V.collisionArrays[Vi])}}else for(let Ni=d.symbolInstanceStart;Ni<d.symbolInstanceEnd;Ni++)Gn(V.symbolInstances.get(Ni),Ni,V.collisionArrays[Ni]);if(I&&V.bucketInstanceId in this.collisionCircleArrays){const Ni=this.collisionCircleArrays[V.bucketInstanceId];n.invert(Ni.invProjMatrix,re),Ni.viewportMatrix=this.collisionIndex.getViewportMatrix()}V.justReloaded=!1}markUsedJustification(d,_,I,Y){const{leftJustifiedTextSymbolIndex:V,centerJustifiedTextSymbolIndex:Q,rightJustifiedTextSymbolIndex:re,verticalPlacedTextSymbolIndex:ue,crossTileID:be}=I,ye=n.getAnchorJustification(_),Fe=Y===n.WritingMode.vertical?ue:"left"===ye?V:"center"===ye?Q:"right"===ye?re:-1;V>=0&&(d.text.placedSymbolArray.get(V).crossTileID=Fe>=0&&V!==Fe?0:be),Q>=0&&(d.text.placedSymbolArray.get(Q).crossTileID=Fe>=0&&Q!==Fe?0:be),re>=0&&(d.text.placedSymbolArray.get(re).crossTileID=Fe>=0&&re!==Fe?0:be),ue>=0&&(d.text.placedSymbolArray.get(ue).crossTileID=Fe>=0&&ue!==Fe?0:be)}markUsedOrientation(d,_,I){const Y=_===n.WritingMode.horizontal||_===n.WritingMode.horizontalOnly?_:0,V=_===n.WritingMode.vertical?_:0,{leftJustifiedTextSymbolIndex:Q,centerJustifiedTextSymbolIndex:re,rightJustifiedTextSymbolIndex:ue,verticalPlacedTextSymbolIndex:be}=I,ye=d.text.placedSymbolArray;Q>=0&&(ye.get(Q).placedOrientation=Y),re>=0&&(ye.get(re).placedOrientation=Y),ue>=0&&(ye.get(ue).placedOrientation=Y),be>=0&&(ye.get(be).placedOrientation=V)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const _=this.prevPlacement;let I=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;const Y=_?_.symbolFadeChange(d):1,V=_?_.opacities:{},Q=_?_.variableOffsets:{},re=_?_.placedOrientations:{};for(const ue in this.placements){const be=this.placements[ue],ye=V[ue];ye?(this.opacities[ue]=new cn(ye,Y,be.text,be.icon,null,be.clipped),I=I||be.text!==ye.text.placed||be.icon!==ye.icon.placed):(this.opacities[ue]=new cn(null,Y,be.text,be.icon,be.skipFade,be.clipped),I=I||be.text||be.icon)}for(const ue in V){const be=V[ue];if(!this.opacities[ue]){const ye=new cn(be,Y,!1,!1);ye.isHidden()||(this.opacities[ue]=ye,I=I||be.text.placed||be.icon.placed)}}for(const ue in Q)this.variableOffsets[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.variableOffsets[ue]=Q[ue]);for(const ue in re)this.placedOrientations[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.placedOrientations[ue]=re[ue]);I?this.lastPlacementChangeTime=d:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:d)}updateLayerOpacities(d,_){const I=new Set;for(const Y of _){const V=Y.getBucket(d);V&&Y.latestFeatureIndex&&d.id===V.layerIds[0]&&this.updateBucketOpacities(V,I,Y.collisionBoxArray)}}updateBucketOpacities(d,_,I){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const Y=d.layers[0].layout,V=!!d.layers[0].dynamicFilter(),Q=new cn(null,0,!1,!1,!0),re=Y.get("text-allow-overlap"),ue=Y.get("icon-allow-overlap"),be=Y.get("text-variable-anchor"),ye="map"===Y.get("text-rotation-alignment"),Fe="map"===Y.get("text-pitch-alignment"),et="none"!==Y.get("icon-text-fit"),ut=new cn(null,0,re&&(ue||!d.hasIconData()||Y.get("icon-optional")),ue&&(re||!d.hasTextData()||Y.get("text-optional")),!0);!d.collisionArrays&&I&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(I);const ft=(wt,Ye,ht)=>{for(let zt=0;zt<Ye/4;zt++)wt.opacityVertexArray.emplaceBack(ht)};let vt=0;for(let wt=0;wt<d.symbolInstances.length;wt++){const Ye=d.symbolInstances.get(wt),{numHorizontalGlyphVertices:ht,numVerticalGlyphVertices:zt,crossTileID:xt,numIconVertices:fi}=Ye,pi=_.has(xt);let ai=this.opacities[xt];pi?ai=Q:ai||(ai=ut,this.opacities[xt]=ai),_.add(xt);const Ii=ht>0||zt>0,Ei=fi>0,Yi=this.placedOrientations[xt],Gn=Yi===n.WritingMode.vertical,Ni=Yi===n.WritingMode.horizontal||Yi===n.WritingMode.horizontalOnly;if(!Ii&&!Ei||ai.isHidden()||vt++,Ii){const dn=Bc(ai.text);ft(d.text,ht,Gn?za:dn),ft(d.text,zt,Ni?za:dn);const Vi=ai.text.isHidden(),{leftJustifiedTextSymbolIndex:Dn,centerJustifiedTextSymbolIndex:Wi,rightJustifiedTextSymbolIndex:on,verticalPlacedTextSymbolIndex:Wn}=Ye,Ln=d.text.placedSymbolArray,Hn=Vi||Gn?1:0;Dn>=0&&(Ln.get(Dn).hidden=Hn),Wi>=0&&(Ln.get(Wi).hidden=Hn),on>=0&&(Ln.get(on).hidden=Hn),Wn>=0&&(Ln.get(Wn).hidden=Vi||Ni?1:0);const Rr=this.variableOffsets[xt];Rr&&this.markUsedJustification(d,Rr.anchor,Ye,Yi);const ms=this.placedOrientations[xt];ms&&(this.markUsedJustification(d,"left",Ye,ms),this.markUsedOrientation(d,ms,Ye))}if(Ei){const dn=Bc(ai.icon),{placedIconSymbolIndex:Vi,verticalPlacedIconSymbolIndex:Dn}=Ye,Wi=d.icon.placedSymbolArray,on=ai.icon.isHidden()?1:0;Vi>=0&&(ft(d.icon,fi,Gn?za:dn),Wi.get(Vi).hidden=on),Dn>=0&&(ft(d.icon,Ye.numVerticalIconVertices,Ni?za:dn),Wi.get(Dn).hidden=on)}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const dn=d.collisionArrays[wt];if(dn){let Vi=new n.Point(0,0),Dn=!0;if(dn.textBox||dn.verticalTextBox){if(be){const on=this.variableOffsets[xt];on?(Vi=vs(on.anchor,on.width,on.height,on.textOffset,on.textScale),ye&&Vi._rotate(Fe?this.transform.angle:-this.transform.angle)):Dn=!1}V&&(Dn=!ai.clipped),dn.textBox&&oa(d.textCollisionBox.collisionVertexArray,ai.text.placed,!Dn||Gn,Vi.x,Vi.y),dn.verticalTextBox&&oa(d.textCollisionBox.collisionVertexArray,ai.text.placed,!Dn||Ni,Vi.x,Vi.y)}const Wi=Dn&&!(Ni||!dn.verticalIconBox);dn.iconBox&&oa(d.iconCollisionBox.collisionVertexArray,ai.icon.placed,Wi,et?Vi.x:0,et?Vi.y:0),dn.verticalIconBox&&oa(d.iconCollisionBox.collisionVertexArray,ai.icon.placed,!Wi,et?Vi.x:0,et?Vi.y:0)}}}if(d.fullyClipped=0===vt,d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){const wt=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=wt.invProjMatrix,d.placementViewportMatrix=wt.viewportMatrix,d.collisionCircleArray=wt.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return 0===this.fadeDuration?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,_){const I=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*I>d}setStale(){this.stale=!0}}function oa(k,d,_,I,Y){k.emplaceBack(d?1:0,_?1:0,I||0,Y||0),k.emplaceBack(d?1:0,_?1:0,I||0,Y||0),k.emplaceBack(d?1:0,_?1:0,I||0,Y||0),k.emplaceBack(d?1:0,_?1:0,I||0,Y||0)}const Ea=Math.pow(2,25),Ws=Math.pow(2,24),ls=Math.pow(2,17),ka=Math.pow(2,16),ss=Math.pow(2,9),Ta=Math.pow(2,8),dh=Math.pow(2,1);function Bc(k){if(0===k.opacity&&!k.placed)return 0;if(1===k.opacity&&k.placed)return 4294967295;const d=k.placed?1:0,_=Math.floor(127*k.opacity);return _*Ea+d*Ws+_*ls+d*ka+_*ss+d*Ta+_*dh+d}const za=0;class fc{constructor(d){this._sortAcrossTiles="viewport-y"!==d.layout.get("symbol-z-order")&&void 0!==d.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(d,_,I,Y,V){const Q=this._bucketParts;for(;this._currentTileIndex<d.length;)if(_.getBucketParts(Q,Y,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,V())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort((re,ue)=>re.sortKey-ue.sortKey));this._currentPartIndex<Q.length;){const re=Q[this._currentPartIndex];if(_.placeLayerBucketPart(re,this._seenCrossTileIDs,I,0===re.symbolInstanceStart),this._currentPartIndex++,V())return!0}return!1}}class rd{constructor(d,_,I,Y,V,Q,re,ue){this.placement=new Js(d,V,Q,re,ue),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=Y,this._done=!1}isDone(){return this._done}continuePlacement(d,_,I){const Y=n.exported.now(),V=()=>{const Q=n.exported.now()-Y;return!this._forceFullPlacement&&Q>2};for(;this._currentPlacementIndex>=0;){const Q=_[d[this._currentPlacementIndex]],re=this.placement.collisionIndex.transform.zoom;if("symbol"===Q.type&&(!Q.minzoom||Q.minzoom<=re)&&(!Q.maxzoom||Q.maxzoom>re)){if(this._inProgressLayer||(this._inProgressLayer=new fc(Q)),this._inProgressLayer.continuePlacement(I[Q.source],this.placement,this._showCollisionBoxes,Q,V))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const Xl=512/n.EXTENT/2;class Sa{constructor(d,_,I){this.tileID=d,this.bucketInstanceId=I,this.index=new n.KDBush(_.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const Y=d.canonical.x*n.EXTENT,V=d.canonical.y*n.EXTENT;for(let Q=0;Q<_.length;Q++){const{key:re,crossTileID:ue,tileAnchorX:be,tileAnchorY:ye}=_.get(Q),Fe=Math.floor((Y+be)*Xl),et=Math.floor((V+ye)*Xl);this.index.add(Fe,et),this.keys.push(re),this.crossTileIDs.push(ue)}this.index.finish()}findMatches(d,_,I){const Y=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z),V=Xl/Math.pow(2,_.canonical.z-this.tileID.canonical.z),Q=_.canonical.x*n.EXTENT,re=_.canonical.y*n.EXTENT;for(let ue=0;ue<d.length;ue++){const be=d.get(ue);if(be.crossTileID)continue;const{key:ye,tileAnchorX:Fe,tileAnchorY:et}=be,ut=Math.floor((Q+Fe)*V),ft=Math.floor((re+et)*V),vt=this.index.range(ut-Y,ft-Y,ut+Y,ft+Y);for(const wt of vt){const Ye=this.crossTileIDs[wt];if(this.keys[wt]===ye&&!I.has(Ye)){I.add(Ye),be.crossTileID=Ye;break}}}}}class vl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Va{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const _=Math.round((d-this.lng)/360);if(0!==_)for(const I in this.indexes){const Y=this.indexes[I],V={};for(const Q in Y){const re=Y[Q];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+_),V[re.tileID.key]=re}this.indexes[I]=V}this.lng=d}addBucket(d,_,I){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let V=0;V<_.symbolInstances.length;V++)_.symbolInstances.get(V).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]=new Set);const Y=this.usedCrossTileIDs[d.overscaledZ];for(const V in this.indexes){const Q=this.indexes[V];if(Number(V)>d.overscaledZ)for(const re in Q){const ue=Q[re];ue.tileID.isChildOf(d)&&ue.findMatches(_.symbolInstances,d,Y)}else{const re=Q[d.scaledTo(Number(V)).key];re&&re.findMatches(_.symbolInstances,d,Y)}}for(let V=0;V<_.symbolInstances.length;V++){const Q=_.symbolInstances.get(V);Q.crossTileID||(Q.crossTileID=I.generate(),Y.add(Q.crossTileID))}return void 0===this.indexes[d.overscaledZ]&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Sa(d,_.symbolInstances,_.bucketInstanceId),!0}removeBucketCrossTileIDs(d,_){for(const I of _.crossTileIDs)this.usedCrossTileIDs[d].delete(I)}removeStaleBuckets(d){let _=!1;for(const I in this.indexes){const Y=this.indexes[I];for(const V in Y)d[Y[V].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,Y[V]),delete Y[V],_=!0)}return _}}class ba{constructor(){this.layerIndexes={},this.crossTileIDs=new vl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,_,I,Y){let V=this.layerIndexes[d.id];void 0===V&&(V=this.layerIndexes[d.id]=new Va);let Q=!1;const re={};"globe"!==Y.name&&V.handleWrapJump(I);for(const ue of _){const be=ue.getBucket(d);be&&d.id===be.layerIds[0]&&(be.bucketInstanceId||(be.bucketInstanceId=++this.maxBucketInstanceId),V.addBucket(ue.tileID,be,this.crossTileIDs)&&(Q=!0),re[be.bucketInstanceId]=!0)}return V.removeStaleBuckets(re)&&(Q=!0),Q}pruneUnusedLayers(d){const _={};d.forEach(I=>{_[I]=!0});for(const I in this.layerIndexes)_[I]||delete this.layerIndexes[I]}}const Nc=(k,d)=>n.emitValidationErrors(k,d&&d.filter(_=>"source.canvas"!==_.identifier)),Rh=n.pick(yt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),hf=n.pick(yt,["setCenter","setZoom","setBearing","setPitch"]),Ff={version:8,layers:[],sources:{}},Lh={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ys extends n.Evented{constructor(d,_={}){super(),this.map=d,this.dispatcher=new _n(bt(),this),this.imageManager=new vi,this.imageManager.setEventedParent(this),this.glyphManager=new n.GlyphManager(d._requestManager,_.localFontFamily?n.LocalGlyphMode.all:_.localIdeographFontFamily?n.LocalGlyphMode.ideographs:n.LocalGlyphMode.none,_.localFontFamily||_.localIdeographFontFamily),this.crossTileSymbolIndex=new ba,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());const I=this;this._rtlTextPluginCallback=Ys.registerForPluginStateChange(Y=>{I.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Y.pluginStatus,pluginURL:Y.pluginURL},(V,Q)=>{if(n.triggerPluginCompletionEvent(V),Q&&Q.every(re=>re))for(const re in I._sourceCaches){const ue=I._sourceCaches[re],be=ue.getSource().type;"vector"!==be&&"geojson"!==be||ue.reload()}})}),this.on("data",Y=>{if("source"!==Y.dataType||"metadata"!==Y.sourceDataType)return;const V=this.getSource(Y.sourceId);if(V&&V.vectorLayerIds)for(const Q in this._layers){const re=this._layers[Q];re.source===V.id&&this._validateLayer(re)}})}loadURL(d,_={}){this.fire(new n.Event("dataloading",{dataType:"style"}));const I="boolean"==typeof _.validate?_.validate:!n.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,_.accessToken);const Y=this.map._requestManager.transformRequest(d,n.ResourceType.Style);this._request=n.getJSON(Y,(V,Q)=>{this._request=null,V?this.fire(new n.ErrorEvent(V)):Q&&this._load(Q,I)})}loadJSON(d,_={}){this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.exported.frame(()=>{this._request=null,this._load(d,!1!==_.validate)})}loadEmpty(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(Ff,!1)}_updateLayerCount(d,_){const I=_?1:-1;d.is3D()&&(this._num3DLayers+=I),"circle"===d.type&&(this._numCircleLayers+=I),"symbol"===d.type&&(this._numSymbolLayers+=I)}_load(d,_){if(_&&Nc(this,n.validateStyle(d)))return;this._loaded=!0,this.stylesheet=n.clone$1(d),this._updateMapProjection();for(const Y in d.sources)this.addSource(Y,d.sources[Y],{validate:!1});this._changed=!1,d.sprite?this._loadSprite(d.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(d.glyphs);const I=ke(this.stylesheet.layers);this._order=I.map(Y=>Y.id),this._layers={},this._serializedLayers={};for(const Y of I){const V=n.createStyleLayer(Y);V.setEventedParent(this,{layer:{id:V.id}}),this._layers[V.id]=V,this._serializedLayers[V.id]=V.serialize(),this._updateLayerCount(V,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Dt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(d){d?this.stylesheet.projection=d:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(d){this._spriteRequest=function(_,I,Y){let V,Q,re;const ue=n.exported.devicePixelRatio>1?"@2x":"";let be=n.getJSON(I.transformRequest(I.normalizeSpriteURL(_,ue,".json"),n.ResourceType.SpriteJSON),(et,ut)=>{be=null,re||(re=et,V=ut,Fe())}),ye=n.getImage(I.transformRequest(I.normalizeSpriteURL(_,ue,".png"),n.ResourceType.SpriteImage),(et,ut)=>{ye=null,re||(re=et,Q=ut,Fe())});function Fe(){if(re)Y(re);else if(V&&Q){const et=n.exported.getImageData(Q),ut={};for(const ft in V){const{width:vt,height:wt,x:Ye,y:ht,sdf:zt,pixelRatio:xt,stretchX:fi,stretchY:pi,content:ai}=V[ft],Ii=new n.RGBAImage({width:vt,height:wt});n.RGBAImage.copy(et,Ii,{x:Ye,y:ht},{x:0,y:0},{width:vt,height:wt}),ut[ft]={data:Ii,pixelRatio:xt,sdf:zt,stretchX:fi,stretchY:pi,content:ai}}Y(null,ut)}}return{cancel(){be&&(be.cancel(),be=null),ye&&(ye.cancel(),ye=null)}}}(d,this.map._requestManager,(_,I)=>{if(this._spriteRequest=null,_)this.fire(new n.ErrorEvent(_));else if(I)for(const Y in I)this.imageManager.addImage(Y,I[Y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new n.Event("data",{dataType:"style"}))})}_validateLayer(d){const _=this.getSource(d.source);if(!_)return;const I=d.sourceLayer;I&&("geojson"===_.type||_.vectorLayerIds&&-1===_.vectorLayerIds.indexOf(I))&&this.fire(new n.ErrorEvent(new Error(`Source layer "${I}" does not exist on source "${_.id}" as specified by style layer "${d.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this._sourceCaches)if(!this._sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const _=[];for(const I of d){const Y=this._layers[I];"custom"!==Y.type&&_.push(Y.serialize())}return _}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const d in this._sourceCaches)if(this._sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(d){return!!this.terrain&&("function"==typeof d.isLayerDraped?d.isLayerDraped():Lh[d.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(d){if(!this._loaded)return;const _=this._changed;if(this._changed){const Y=Object.keys(this._updatedLayers),V=Object.keys(this._removedLayers);(Y.length||V.length)&&this._updateWorkerLayers(Y,V);for(const Q in this._updatedSources){const re=this._updatedSources[Q];"reload"===re?this._reloadSource(Q):"clear"===re&&this._clearSource(Q)}this._updateTilesForChangedImages();for(const Q in this._updatedPaintProps)this._layers[Q].updateTransitions(d);this.light.updateTransitions(d),this.fog&&this.fog.updateTransitions(d),this._resetUpdates()}const I={};for(const Y in this._sourceCaches){const V=this._sourceCaches[Y];I[Y]=V.used,V.used=!1}for(const Y of this._order){const V=this._layers[Y];if(V.recalculate(d,this._availableImages),!V.isHidden(d.zoom)){const re=this._getLayerSourceCache(V);re&&(re.used=!0)}const Q=this.map.painter;if(Q){const re=V.getProgramIds();if(!re)continue;const ue=V.getProgramConfiguration(d.zoom);for(const be of re)Q.useProgram(be,ue)}}for(const Y in I){const V=this._sourceCaches[Y];I[Y]!==V.used&&V.getSource().fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:V.getSource().id}))}this.light.recalculate(d),this.terrain&&this.terrain.recalculate(d),this.fog&&this.fog.recalculate(d),this.z=d.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),_&&this.fire(new n.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const _ in this._sourceCaches)this._sourceCaches[_].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,_){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:_})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(d){if(this._checkLoaded(),Nc(this,n.validateStyle(d)))return!1;(d=n.clone$1(d)).layers=ke(d.layers);const _=function(Y,V){if(!Y)return[{command:yt.setStyle,args:[V]}];let Q=[];try{if(!j(Y.version,V.version))return[{command:yt.setStyle,args:[V]}];j(Y.center,V.center)||Q.push({command:yt.setCenter,args:[V.center]}),j(Y.zoom,V.zoom)||Q.push({command:yt.setZoom,args:[V.zoom]}),j(Y.bearing,V.bearing)||Q.push({command:yt.setBearing,args:[V.bearing]}),j(Y.pitch,V.pitch)||Q.push({command:yt.setPitch,args:[V.pitch]}),j(Y.sprite,V.sprite)||Q.push({command:yt.setSprite,args:[V.sprite]}),j(Y.glyphs,V.glyphs)||Q.push({command:yt.setGlyphs,args:[V.glyphs]}),j(Y.transition,V.transition)||Q.push({command:yt.setTransition,args:[V.transition]}),j(Y.light,V.light)||Q.push({command:yt.setLight,args:[V.light]}),j(Y.fog,V.fog)||Q.push({command:yt.setFog,args:[V.fog]}),j(Y.projection,V.projection)||Q.push({command:yt.setProjection,args:[V.projection]});const re={},ue=[];!function(Fe,et,ut,ft){let vt;for(vt in et=et||{},Fe=Fe||{})Fe.hasOwnProperty(vt)&&(et.hasOwnProperty(vt)||We(vt,ut,ft));for(vt in et){if(!et.hasOwnProperty(vt))continue;const wt=et[vt];Fe.hasOwnProperty(vt)?j(Fe[vt],wt)||("geojson"===Fe[vt].type&&"geojson"===wt.type&&ge(Fe,et,vt)?ut.push({command:yt.setGeoJSONSourceData,args:[vt,wt.data]}):Jt(vt,et,ut,ft)):Wt(vt,et,ut)}}(Y.sources,V.sources,ue,re);const be=[];Y.layers&&Y.layers.forEach(Fe=>{Fe.source&&re[Fe.source]?Q.push({command:yt.removeLayer,args:[Fe.id]}):be.push(Fe)});let ye=Y.terrain;ye&&re[ye.source]&&(Q.push({command:yt.setTerrain,args:[void 0]}),ye=void 0),Q=Q.concat(ue),j(ye,V.terrain)||Q.push({command:yt.setTerrain,args:[V.terrain]}),function(Fe,et,ut){et=et||[];const ft=(Fe=Fe||[]).map(u),vt=et.map(u),wt=Fe.reduce(p,{}),Ye=et.reduce(p,{}),ht=ft.slice(),zt=Object.create(null);let xt,fi,pi,ai,Ii,Ei,Yi;for(xt=0,fi=0;xt<ft.length;xt++)pi=ft[xt],Ye.hasOwnProperty(pi)?fi++:(ut.push({command:yt.removeLayer,args:[pi]}),ht.splice(ht.indexOf(pi,fi),1));for(xt=0,fi=0;xt<vt.length;xt++)pi=vt[vt.length-1-xt],ht[ht.length-1-xt]!==pi&&(wt.hasOwnProperty(pi)?(ut.push({command:yt.removeLayer,args:[pi]}),ht.splice(ht.lastIndexOf(pi,ht.length-fi),1)):fi++,Ei=ht[ht.length-xt],ut.push({command:yt.addLayer,args:[Ye[pi],Ei]}),ht.splice(ht.length-xt,0,pi),zt[pi]=!0);for(xt=0;xt<vt.length;xt++)if(pi=vt[xt],ai=wt[pi],Ii=Ye[pi],!zt[pi]&&!j(ai,Ii))if(j(ai.source,Ii.source)&&j(ai["source-layer"],Ii["source-layer"])&&j(ai.type,Ii.type)){for(Yi in l(ai.layout,Ii.layout,ut,pi,null,yt.setLayoutProperty),l(ai.paint,Ii.paint,ut,pi,null,yt.setPaintProperty),j(ai.filter,Ii.filter)||ut.push({command:yt.setFilter,args:[pi,Ii.filter]}),j(ai.minzoom,Ii.minzoom)&&j(ai.maxzoom,Ii.maxzoom)||ut.push({command:yt.setLayerZoomRange,args:[pi,Ii.minzoom,Ii.maxzoom]}),ai)ai.hasOwnProperty(Yi)&&"layout"!==Yi&&"paint"!==Yi&&"filter"!==Yi&&"metadata"!==Yi&&"minzoom"!==Yi&&"maxzoom"!==Yi&&(0===Yi.indexOf("paint.")?l(ai[Yi],Ii[Yi],ut,pi,Yi.slice(6),yt.setPaintProperty):j(ai[Yi],Ii[Yi])||ut.push({command:yt.setLayerProperty,args:[pi,Yi,Ii[Yi]]}));for(Yi in Ii)Ii.hasOwnProperty(Yi)&&!ai.hasOwnProperty(Yi)&&"layout"!==Yi&&"paint"!==Yi&&"filter"!==Yi&&"metadata"!==Yi&&"minzoom"!==Yi&&"maxzoom"!==Yi&&(0===Yi.indexOf("paint.")?l(ai[Yi],Ii[Yi],ut,pi,Yi.slice(6),yt.setPaintProperty):j(ai[Yi],Ii[Yi])||ut.push({command:yt.setLayerProperty,args:[pi,Yi,Ii[Yi]]}))}else ut.push({command:yt.removeLayer,args:[pi]}),Ei=ht[ht.lastIndexOf(pi)+1],ut.push({command:yt.addLayer,args:[Ii,Ei]})}(be,V.layers,Q)}catch(re){console.warn("Unable to compute style diff:",re),Q=[{command:yt.setStyle,args:[V]}]}return Q}(this.serialize(),d).filter(Y=>!(Y.command in hf));if(0===_.length)return!1;const I=_.filter(Y=>!(Y.command in Rh));if(I.length>0)throw new Error(`Unimplemented: ${I.map(Y=>Y.command).join(", ")}.`);return _.forEach(Y=>{"setTransition"!==Y.command&&"setProjection"!==Y.command&&this[Y.command].apply(this,Y.args)}),this.stylesheet=d,this._updateMapProjection(),!0}addImage(d,_){return this.getImage(d)?this.fire(new n.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(d,_),this._afterImageUpdated(d),this)}updateImage(d,_){this.imageManager.updateImage(d,_)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){return this.getImage(d)?(this.imageManager.removeImage(d),this._afterImageUpdated(d),this):this.fire(new n.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(d,_,I={}){if(this._checkLoaded(),void 0!==this.getSource(d))throw new Error("There is already a source with this ID");if(!_.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(_).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(_.type)>=0&&this._validate(n.validateSource,`sources.${d}`,_,null,I))return;this.map&&this.map._collectResourceTiming&&(_.collectResourceTiming=!0);const Y=dt(d,_,this.dispatcher,this);Y.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(d),source:Y.serialize(),sourceId:d}));const V=Q=>{const re=(Q?"symbol:":"other:")+d,ue=this._sourceCaches[re]=new n.SourceCache(re,Y,Q);(Q?this._symbolSourceCaches:this._otherSourceCaches)[d]=ue,ue.style=this,ue.onAdd(this.map)};V(!1),"vector"!==_.type&&"geojson"!==_.type||V(!0),Y.onAdd&&Y.onAdd(this.map),this._changed=!0}removeSource(d){this._checkLoaded();const _=this.getSource(d);if(!_)throw new Error("There is no source with this ID");for(const Y in this._layers)if(this._layers[Y].source===d)return this.fire(new n.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${Y}" is using it.`)));if(this.terrain&&this.terrain.get().source===d)return this.fire(new n.ErrorEvent(new Error(`Source "${d}" cannot be removed while terrain is using it.`)));const I=this._getSourceCaches(d);for(const Y of I)delete this._sourceCaches[Y.id],delete this._updatedSources[Y.id],Y.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Y.getSource().id})),Y.setEventedParent(null),Y.clearTiles();return delete this._otherSourceCaches[d],delete this._symbolSourceCaches[d],_.setEventedParent(null),_.onRemove&&_.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(d,_){this._checkLoaded(),this.getSource(d).setData(_),this._changed=!0}getSource(d){const _=this._getSourceCache(d);return _&&_.getSource()}_getSources(){const d=[];for(const _ in this._otherSourceCaches){const I=this._getSourceCache(_);I&&d.push(I.getSource())}return d}addLayer(d,_,I={}){this._checkLoaded();const Y=d.id;if(this.getLayer(Y))return void this.fire(new n.ErrorEvent(new Error(`Layer with id "${Y}" already exists on this map`)));let V;if("custom"===d.type){if(Nc(this,n.validateCustomStyleLayer(d)))return;V=n.createStyleLayer(d)}else{if("object"==typeof d.source&&(this.addSource(Y,d.source),d=n.clone$1(d),d=n.extend(d,{source:Y})),this._validate(n.validateLayer,`layers.${Y}`,d,{arrayIndex:-1},I))return;V=n.createStyleLayer(d),this._validateLayer(V),V.setEventedParent(this,{layer:{id:Y}}),this._serializedLayers[V.id]=V.serialize(),this._updateLayerCount(V,!0)}const Q=_?this._order.indexOf(_):this._order.length;if(_&&-1===Q)return void this.fire(new n.ErrorEvent(new Error(`Layer with id "${_}" does not exist on this map.`)));this._order.splice(Q,0,Y),this._layerOrderChanged=!0,this._layers[Y]=V;const re=this._getLayerSourceCache(V);if(this._removedLayers[Y]&&V.source&&re&&"custom"!==V.type){const ue=this._removedLayers[Y];delete this._removedLayers[Y],ue.type!==V.type?this._updatedSources[V.source]="clear":(this._updatedSources[V.source]="reload",re.pause())}this._updateLayer(V),V.onAdd&&V.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(d,_){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new n.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===_)return;const I=this._order.indexOf(d);this._order.splice(I,1);const Y=_?this._order.indexOf(_):this._order.length;_&&-1===Y?this.fire(new n.ErrorEvent(new Error(`Layer with id "${_}" does not exist on this map.`))):(this._order.splice(Y,0,d),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(d){this._checkLoaded();const _=this._layers[d];if(!_)return void this.fire(new n.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be removed.`)));_.setEventedParent(null),this._updateLayerCount(_,!1);const I=this._order.indexOf(d);this._order.splice(I,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=_,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],_.onRemove&&_.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}hasLayerType(d){for(const _ in this._layers)if(this._layers[_].type===d)return!0;return!1}setLayerZoomRange(d,_,I){this._checkLoaded();const Y=this.getLayer(d);Y?Y.minzoom===_&&Y.maxzoom===I||(null!=_&&(Y.minzoom=_),null!=I&&(Y.maxzoom=I),this._updateLayer(Y)):this.fire(new n.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(d,_,I={}){this._checkLoaded();const Y=this.getLayer(d);if(Y){if(!j(Y.filter,_))return null==_?(Y.filter=void 0,void this._updateLayer(Y)):void(this._validate(n.validateFilter,`layers.${Y.id}.filter`,_,{layerType:Y.type},I)||(Y.filter=n.clone$1(_),this._updateLayer(Y)))}else this.fire(new n.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be filtered.`)))}getFilter(d){const _=this.getLayer(d);return _&&n.clone$1(_.filter)}setLayoutProperty(d,_,I,Y={}){this._checkLoaded();const V=this.getLayer(d);V?j(V.getLayoutProperty(_),I)||(V.setLayoutProperty(_,I,Y),this._updateLayer(V)):this.fire(new n.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(d,_){const I=this.getLayer(d);if(I)return I.getLayoutProperty(_);this.fire(new n.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style.`)))}setPaintProperty(d,_,I,Y={}){this._checkLoaded();const V=this.getLayer(d);V?j(V.getPaintProperty(_),I)||(V.setPaintProperty(_,I,Y)&&this._updateLayer(V),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new n.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(d,_){const I=this.getLayer(d);return I&&I.getPaintProperty(_)}setFeatureState(d,_){this._checkLoaded();const I=d.source,Y=d.sourceLayer,V=this.getSource(I);if(!V)return void this.fire(new n.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const Q=V.type;if("geojson"===Q&&Y)return void this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===Q&&!Y)return void this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===d.id&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided.")));const re=this._getSourceCaches(I);for(const ue of re)ue.setFeatureState(Y,d.id,_)}removeFeatureState(d,_){this._checkLoaded();const I=d.source,Y=this.getSource(I);if(!Y)return void this.fire(new n.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const V=Y.type,Q="vector"===V?d.sourceLayer:void 0;if("vector"===V&&!Q)return void this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(_&&"string"!=typeof d.id&&"number"!=typeof d.id)return void this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const re=this._getSourceCaches(I);for(const ue of re)ue.removeFeatureState(Q,d.id,_)}getFeatureState(d){this._checkLoaded();const _=d.source,I=d.sourceLayer,Y=this.getSource(_);if(Y){if("vector"!==Y.type||I)return void 0===d.id&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(_)[0].getFeatureState(I,d.id);this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new n.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)))}getTransition(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const d={};for(const _ in this._sourceCaches){const I=this._sourceCaches[_].getSource();d[I.id]||(d[I.id]=I.serialize())}return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:d,layers:this._serializeLayers(this._order)},_=>void 0!==_)}_updateLayer(d){this._updatedLayers[d.id]=!0;const _=this._getLayerSourceCache(d);d.source&&!this._updatedSources[d.source]&&_&&"raster"!==_.getSource().type&&(this._updatedSources[d.source]="reload",_.pause()),this._changed=!0,d.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(d){const _=Q=>"fill-extrusion"===this._layers[Q].type,I={},Y=[];for(let Q=this._order.length-1;Q>=0;Q--){const re=this._order[Q];if(_(re)){I[re]=Q;for(const ue of d){const be=ue[re];if(be)for(const ye of be)Y.push(ye)}}}Y.sort((Q,re)=>re.intersectionZ-Q.intersectionZ);const V=[];for(let Q=this._order.length-1;Q>=0;Q--){const re=this._order[Q];if(_(re))for(let ue=Y.length-1;ue>=0;ue--){const be=Y[ue].feature;if(I[be.layer.id]<Q)break;V.push(be),Y.pop()}else for(const ue of d){const be=ue[re];if(be)for(const ye of be)V.push(ye.feature)}}return V}queryRenderedFeatures(d,_,I){_&&_.filter&&this._validate(n.validateFilter,"queryRenderedFeatures.filter",_.filter,null,_);const Y={};if(_&&_.layers){if(!Array.isArray(_.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ue of _.layers){const be=this._layers[ue];if(!be)return this.fire(new n.ErrorEvent(new Error(`The layer '${ue}' does not exist in the map's style and cannot be queried for features.`))),[];Y[be.source]=!0}}const V=[];_.availableImages=this._availableImages;const Q=_&&_.layers?_.layers.some(ue=>{const be=this.getLayer(ue);return be&&be.is3D()}):this.has3DLayers(),re=mr.createFromScreenPoints(d,I);for(const ue in this._sourceCaches){const be=this._sourceCaches[ue].getSource().id;_.layers&&!Y[be]||V.push(Xe(this._sourceCaches[ue],this._layers,this._serializedLayers,re,_,I,Q,!!this.map._showQueryGeometry))}return this.placement&&V.push(function(ue,be,ye,Fe,et,ut,ft){const vt={},wt=ut.queryRenderedSymbols(Fe),Ye=[];for(const ht of Object.keys(wt).map(Number))Ye.push(ft[ht]);Ye.sort(Rt);for(const ht of Ye){const zt=ht.featureIndex.lookupSymbolFeatures(wt[ht.bucketInstanceId],be,ht.bucketIndex,ht.sourceLayerIndex,et.filter,et.layers,et.availableImages,ue);for(const xt in zt){const fi=vt[xt]=vt[xt]||[],pi=zt[xt];pi.sort((ai,Ii)=>{const Ei=ht.featureSortOrder;if(Ei){const Yi=Ei.indexOf(ai.featureIndex);return Ei.indexOf(Ii.featureIndex)-Yi}return Ii.featureIndex-ai.featureIndex});for(const ai of pi)fi.push(ai)}}for(const ht in vt)vt[ht].forEach(zt=>{const xt=zt.feature,fi=ye(ue[ht]);if(!fi)return;const pi=fi.getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=pi});return vt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),re.screenGeometry,_,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(V)}querySourceFeatures(d,_){_&&_.filter&&this._validate(n.validateFilter,"querySourceFeatures.filter",_.filter,null,_);const I=this._getSourceCaches(d);let Y=[];for(const V of I)Y=Y.concat(Qe(V,_));return Y}addSourceType(d,_,I){return Ys.getSourceType(d)?I(new Error(`A source type called "${d}" already exists.`)):(Ys.setSourceType(d,_),_.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:_.workerSourceURL},I):I(null,null))}getLight(){return this.light.getLight()}setLight(d,_={}){this._checkLoaded();const I=this.light.getLight();let Y=!1;for(const Q in d)if(!j(d[Q],I[Q])){Y=!0;break}if(!Y)return;const V=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(d,_),this.light.updateTransitions(V)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(d,_=1){if(this._checkLoaded(),!d)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let I=d;if(1===_){if("object"==typeof I.source){const Y="terrain-dem-src";this.addSource(Y,I.source),I=n.clone$1(I),I=n.extend(I,{source:Y})}if(this._validate(n.validateTerrain,"terrain",I))return}if(!this.terrain||this.terrain&&_!==this.terrain.drapeRenderMode){if(!I)return;this._createTerrain(I,_)}else{const Y=this.terrain,V=Y.get();for(const Q of Object.keys(n.spec.terrain))!I.hasOwnProperty(Q)&&n.spec.terrain[Q].default&&(I[Q]=n.spec.terrain[Q].default);for(const Q in I)if(!j(I[Q],V[Q])){Y.set(I),this.stylesheet.terrain=I;const re=this._setTransitionParameters({duration:0});Y.updateTransitions(re);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(d){const _=this.fog=new nn(d,this.map.transform);this.stylesheet.fog=d;const I=this._setTransitionParameters({duration:0});_.updateTransitions(I)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const d of this.map._markers)d._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(d){if(this._checkLoaded(),!d)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const _=this.fog,I=_.get();0===Object.keys(d).length&&_.set(d);for(const Y in d)if(!j(d[Y],I[Y])){_.set(d),this.stylesheet.fog=d;const V=this._setTransitionParameters({duration:0});_.updateTransitions(V);break}}else this._createFog(d);this._markersNeedUpdate=!0}_setTransitionParameters(d){return{now:n.exported.now(),transition:n.extend(d,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const d=this._order.filter(I=>this.isLayerDraped(this._layers[I])),_=this._order.filter(I=>!this.isLayerDraped(this._layers[I]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...d),this._drapedFirstOrder.push(..._)}_createTerrain(d,_){const I=this.terrain=new Ri(d,_);this.stylesheet.terrain=d,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const Y=this._setTransitionParameters({duration:0});I.updateTransitions(Y)}_force3DLayerUpdate(){for(const d in this._layers){const _=this._layers[d];"fill-extrusion"===_.type&&this._updateLayer(_)}}_forceSymbolLayerUpdate(){for(const d in this._layers){const _=this._layers[d];"symbol"===_.type&&this._updateLayer(_)}}_validate(d,_,I,Y,V={}){return(!V||!1!==V.validate)&&Nc(this,d.call(n.validateStyle,n.extend({key:_,style:this.serialize(),value:I,styleSpec:n.spec},Y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this._sourceCaches)this._sourceCaches[d].clearTiles(),this._sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){const _=this._getSourceCaches(d);for(const I of _)I.clearTiles()}_reloadSource(d){const _=this._getSourceCaches(d);for(const I of _)I.resume(),I.reload()}_reloadSources(){for(const d of this._getSources())d.reload&&d.reload()}_updateSources(d){for(const _ in this._sourceCaches)this._sourceCaches[_].update(d)}_generateCollisionBoxes(){for(const d in this._sourceCaches){const _=this._sourceCaches[d];_.resume(),_.reload()}}_updatePlacement(d,_,I,Y,V=!1){let Q=!1,re=!1;const ue={};for(const be of this._order){const ye=this._layers[be];if("symbol"!==ye.type)continue;if(!ue[ye.source]){const et=this._getLayerSourceCache(ye);if(!et)continue;ue[ye.source]=et.getRenderableIds(!0).map(ut=>et.getTileByID(ut)).sort((ut,ft)=>ft.tileID.overscaledZ-ut.tileID.overscaledZ||(ut.tileID.isLessThan(ft.tileID)?-1:1))}const Fe=this.crossTileSymbolIndex.addLayer(ye,ue[ye.source],d.center.lng,d.projection);Q=Q||Fe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),V=V||this._layerOrderChanged||0===I,this._layerOrderChanged&&this.fire(new n.Event("neworder")),(V||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.exported.now(),d.zoom))&&(this.pauseablePlacement=new rd(d,this._order,V,_,I,Y,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ue),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.exported.now()),re=!0),Q&&this.pauseablePlacement.placement.setStale()),re||Q)for(const be of this._order){const ye=this._layers[be];"symbol"===ye.type&&this.placement.updateLayerOpacities(ye,ue[ye.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.exported.now())}_releaseSymbolFadeTiles(){for(const d in this._sourceCaches)this._sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,_,I){this.imageManager.getImages(_.icons,I),this._updateTilesForChangedImages();const Y=V=>{V&&V.setDependencies(_.tileID.key,_.type,_.icons)};Y(this._otherSourceCaches[_.source]),Y(this._symbolSourceCaches[_.source])}getGlyphs(d,_,I){this.glyphManager.getGlyphs(_.stacks,I)}getResource(d,_,I){return n.makeRequest(_,I)}_getSourceCache(d){return this._otherSourceCaches[d]}_getLayerSourceCache(d){return"symbol"===d.type?this._symbolSourceCaches[d.source]:this._otherSourceCaches[d.source]}_getSourceCaches(d){const _=[];return this._otherSourceCaches[d]&&_.push(this._otherSourceCaches[d]),this._symbolSourceCaches[d]&&_.push(this._symbolSourceCaches[d]),_}_isSourceCacheLoaded(d){const _=this._getSourceCaches(d);return 0===_.length?(this.fire(new n.ErrorEvent(new Error(`There is no source with ID '${d}'`))),!1):_.every(I=>I.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ys.getSourceType=function(k){return Vt[k]},Ys.setSourceType=function(k,d){Vt[k]=d},Ys.registerForPluginStateChange=n.registerForPluginStateChange;var xd="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Ko="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",wa="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Ph="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",_l="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let Wu={},$u={};const No=[];yl(xd,No),yl(wa,No),yl(Ph,No),yl(_l,No),Wu=ia("",wa),$u=ia(_l,Ph);const df=ia("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Fh=xd,pc="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var fh={background:ia("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:ia("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:ia("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:ia("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ia("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:ia("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ia("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ia("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ia("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:ia("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:ia("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:ia("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:ia("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:ia("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:ia("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:ia("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ia("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:ia("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:ia("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:ia("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:ia("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:ia("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:ia("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:ia("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:ia("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ia("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ko),skyboxGradient:ia("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ko),skyboxCapture:ia("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ia("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:ia("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function yl(k,d){const _=k.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let I of _)if(I=I.trim(),"#"===I[0]&&I.includes("if")&&!I.includes("endif")){I=I.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const Y=I.split(" ");for(const V of Y)d.includes(V)||d.push(V)}}function ia(k,d){const _=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=d.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),Y={},V=[...No];return yl(k,V),yl(d,V),{fragmentSource:k=k.replace(_,(Q,re,ue,be,ye)=>(Y[ye]=!0,"define"===re?`\n#ifndef HAS_UNIFORM_u_${ye}\nvarying ${ue} ${be} ${ye};\n#else\nuniform ${ue} ${be} u_${ye};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${ye}\n    ${ue} ${be} ${ye} = u_${ye};\n#endif\n`)),vertexSource:d=d.replace(_,(Q,re,ue,be,ye)=>{const Fe="float"===be?"vec2":"vec4",et=ye.match(/color/)?"color":Fe;return Y[ye]?"define"===re?`\n#ifndef HAS_UNIFORM_u_${ye}\nuniform lowp float u_${ye}_t;\nattribute ${ue} ${Fe} a_${ye};\nvarying ${ue} ${be} ${ye};\n#else\nuniform ${ue} ${be} u_${ye};\n#endif\n`:"vec4"===et?`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ye} = a_${ye};\n#else\n    ${ue} ${be} ${ye} = u_${ye};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ye} = unpack_mix_${et}(a_${ye}, u_${ye}_t);\n#else\n    ${ue} ${be} ${ye} = u_${ye};\n#endif\n`:"define"===re?`\n#ifndef HAS_UNIFORM_u_${ye}\nuniform lowp float u_${ye}_t;\nattribute ${ue} ${Fe} a_${ye};\n#else\nuniform ${ue} ${be} u_${ye};\n#endif\n`:"vec4"===et?`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ue} ${be} ${ye} = a_${ye};\n#else\n    ${ue} ${be} ${ye} = u_${ye};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${ye}\n    ${ue} ${be} ${ye} = unpack_mix_${et}(a_${ye}, u_${ye}_t);\n#else\n    ${ue} ${be} ${ye} = u_${ye};\n#endif\n`}),staticAttributes:I,usedDefines:V}}class Zl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(d,_,I,Y,V,Q,re){this.context=d;let ue=this.boundPaintVertexBuffers.length!==Y.length;for(let ye=0;!ue&&ye<Y.length;ye++)this.boundPaintVertexBuffers[ye]!==Y[ye]&&(ue=!0);let be=this.boundDynamicVertexBuffers.length!==re.length;for(let ye=0;!be&&ye<re.length;ye++)this.boundDynamicVertexBuffers[ye]!==re[ye]&&(be=!0);if(!d.extVertexArrayObject||!this.vao||this.boundProgram!==_||this.boundLayoutVertexBuffer!==I||ue||be||this.boundIndexBuffer!==V||this.boundVertexOffset!==Q)this.freshBind(_,I,Y,V,Q,re);else{d.bindVertexArrayOES.set(this.vao);for(const ye of re)ye&&ye.bind();V&&V.dynamicDraw&&V.bind()}}freshBind(d,_,I,Y,V,Q){let re;const ue=d.numAttributes,be=this.context,ye=be.gl;if(be.extVertexArrayObject)this.vao&&this.destroy(),this.vao=be.extVertexArrayObject.createVertexArrayOES(),be.bindVertexArrayOES.set(this.vao),re=0,this.boundProgram=d,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=Y,this.boundVertexOffset=V,this.boundDynamicVertexBuffers=Q;else{re=be.currentNumAttributes||0;for(let Fe=ue;Fe<re;Fe++)ye.disableVertexAttribArray(Fe)}_.enableAttributes(ye,d),_.bind(),_.setVertexAttribPointers(ye,d,V);for(const Fe of I)Fe.enableAttributes(ye,d),Fe.bind(),Fe.setVertexAttribPointers(ye,d,V);for(const Fe of Q)Fe&&(Fe.enableAttributes(ye,d),Fe.bind(),Fe.setVertexAttribPointers(ye,d,V));Y&&Y.bind(),be.currentNumAttributes=ue}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function xu(k,d){const _=Math.pow(2,d.canonical.z),I=d.canonical.y;return[new n.MercatorCoordinate(0,I/_).toLngLat().lat,new n.MercatorCoordinate(0,(I+1)/_).toLngLat().lat]}function xl(k,d,_,I,Y,V,Q){const re=k.context,ue=re.gl,be=_.fbo;if(!be)return;k.prepareDrawTile();const ye=k.useProgram("hillshade");re.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,be.colorAttachment.get());const Fe=((vt,wt,Ye,ht)=>{const zt=Ye.paint.get("hillshade-shadow-color"),xt=Ye.paint.get("hillshade-highlight-color"),fi=Ye.paint.get("hillshade-accent-color");let pi=Ye.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ye.paint.get("hillshade-illumination-anchor")&&(pi-=vt.transform.angle);const ai=!vt.options.moving;return{u_matrix:ht||vt.transform.calculateProjMatrix(wt.tileID.toUnwrapped(),ai),u_image:0,u_latrange:xu(0,wt.tileID),u_light:[Ye.paint.get("hillshade-exaggeration"),pi],u_shadow:zt,u_highlight:xt,u_accent:fi}})(k,_,I,k.terrain?d.projMatrix:null);k.prepareDrawProgram(re,ye,d.toUnwrapped());const{tileBoundsBuffer:et,tileBoundsIndexBuffer:ut,tileBoundsSegments:ft}=k.getTileBoundsBuffers(_);ye.draw(re,ue.TRIANGLES,Y,V,Q,n.CullFaceMode.disabled,Fe,I.id,et,ut,ft)}function bd(k,d,_){if(!d.needsDEMTextureUpload)return;const I=k.context,Y=I.gl;I.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||k.getTileTexture(_.stride);const V=_.getPixels();d.demTexture?d.demTexture.update(V,{premultiply:!1}):d.demTexture=new n.Texture(I,V,Y.RGBA,{premultiply:!1}),d.needsDEMTextureUpload=!1}function sl(k,d,_,I,Y,V){const Q=k.context,re=Q.gl;if(!d.dem)return;const ue=d.dem;if(Q.activeTexture.set(re.TEXTURE1),bd(k,d,ue),!d.demTexture)return;d.demTexture.bind(re.NEAREST,re.CLAMP_TO_EDGE);const be=ue.dim;Q.activeTexture.set(re.TEXTURE0);let ye=d.fbo;if(!ye){const ft=new n.Texture(Q,{width:be,height:be,data:null},re.RGBA);ft.bind(re.LINEAR,re.CLAMP_TO_EDGE),ye=d.fbo=Q.createFramebuffer(be,be,!0),ye.colorAttachment.set(ft.texture)}Q.bindFramebuffer.set(ye.framebuffer),Q.viewport.set([0,0,be,be]);const{tileBoundsBuffer:Fe,tileBoundsIndexBuffer:et,tileBoundsSegments:ut}=k.getMercatorTileBoundsBuffers();k.useProgram("hillshadePrepare").draw(Q,re.TRIANGLES,I,Y,V,n.CullFaceMode.disabled,((ft,vt)=>{const wt=vt.stride,Ye=n.create();return n.ortho(Ye,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(Ye,Ye,[0,-n.EXTENT,0]),{u_matrix:Ye,u_image:1,u_dimension:[wt,wt],u_zoom:ft.overscaledZ,u_unpack:vt.unpackVector}})(d.tileID,ue),_.id,Fe,et,ut),d.needsHillshadePrepare=!1}const pr=k=>({u_matrix:new n.UniformMatrix4f(k),u_image0:new n.Uniform1i(k),u_skirt_height:new n.Uniform1f(k)}),al=(k,d)=>({u_matrix:k,u_image0:0,u_skirt_height:d}),ol=(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft)=>({u_proj_matrix:Float32Array.from(k),u_globe_matrix:d,u_normalize_matrix:Float32Array.from(I),u_merc_matrix:_,u_zoom_transition:Y,u_merc_center:V,u_image0:0,u_frustum_tl:Q,u_frustum_tr:re,u_frustum_br:ue,u_frustum_bl:be,u_globe_pos:ye,u_globe_radius:Fe,u_viewport:et,u_grid_matrix:ft?Float32Array.from(ft):new Float32Array(9),u_skirt_height:ut});function va(k,d){return null!=k&&null!=d&&!(!k.hasData()||!d.hasData())&&null!=k.demTexture&&null!=d.demTexture&&k.tileID.key!==d.tileID.key}const po=new class{constructor(){this.operations={}}newMorphing(k,d,_,I,Y){if(k in this.operations){const V=this.operations[k];V.to.tileID.key!==_.tileID.key&&(V.queued=_)}else this.operations[k]={startTime:I,phase:0,duration:Y,from:d,to:_,queued:null}}getMorphValuesForProxy(k){if(!(k in this.operations))return null;const d=this.operations[k];return{from:d.from,to:d.to,phase:d.phase}}update(k){for(const d in this.operations){const _=this.operations[d];for(_.phase=(k-_.startTime)/_.duration;_.phase>=1||!this._validOp(_);)if(!this._nextOp(_,k)){delete this.operations[d];break}}}_nextOp(k,d){return!!k.queued&&(k.from=k.to,k.to=k.queued,k.queued=null,k.phase=0,k.startTime=d,!0)}_validOp(k){return k.from.hasData()&&k.to.hasData()}},ql={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ph(k){return 6*Math.pow(1.5,22-k)}function Kl(k,d){const _=1<<k.z;return!d&&(0===k.x||k.x===_-1)||0===k.y||k.y===_-1}const tu=k=>({u_matrix:k});function Bh(k,d,_,I,Y){if(Y>0){const V=n.exported.now(),Q=(V-k.timeAdded)/Y,re=d?(V-d.timeAdded)/Y:-1,ue=_.getSource(),be=I.coveringZoomLevel({tileSize:ue.tileSize,roundZoom:ue.roundZoom}),ye=!d||Math.abs(d.tileID.overscaledZ-be)>Math.abs(k.tileID.overscaledZ-be),Fe=ye&&k.refreshedUponExpiration?1:n.clamp(ye?Q:1-re,0,1);return k.refreshedUponExpiration&&Q>=1&&(k.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Fe}:{opacity:Fe,mix:0}}return{opacity:1,mix:0}}class Xa extends n.SourceCache{constructor(d){const _={type:"raster-dem",maxzoom:d.transform.maxZoom},I=new _n(bt(),null),Y=dt("mock-dem",_,I,d.style);super("mock-dem",Y,!1),Y.setEventedParent(this),this._sourceLoaded=!0}_loadTile(d,_){d.state="loaded",_(null)}}class mc extends n.SourceCache{constructor(d){const _=dt("proxy",{type:"geojson",maxzoom:d.transform.maxZoom},new _n(bt(),null),d.style);super("proxy",_,!1),_.setEventedParent(this),this.map=this.getSource().map=d,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(d,_,I){if(d.freezeTileCoverage)return;this.transform=d;const Y=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((V,Q)=>{if(V[Q.key]="",!this._tiles[Q.key]){const re=new n.Tile(Q,this._source.tileSize*Q.overscaleFactor(),d.tileZoom);re.state="loaded",this._tiles[Q.key]=re}return V},{});for(const V in this._tiles)V in Y||(this.freeFBO(V),this._tiles[V].unloadVectorData(),delete this._tiles[V])}freeFBO(d){const _=this.proxyCachedFBO[d];if(void 0!==_){const I=Object.values(_);this.renderCachePool.push(...I),delete this.proxyCachedFBO[d]}}deallocRenderCache(){this.renderCache.forEach(d=>d.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class gc extends n.OverscaledTileID{constructor(d,_,I){super(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y),this.proxyTileKey=_,this.projMatrix=I}}class Ut extends n.Elevation{constructor(d,_){super(),this.painter=d,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[I,Y,V]=function(ue){const be=new n.StructArrayLayout2i4,ye=new n.StructArrayLayout3ui6;be.reserve(17161),ye.reserve(33800);const et=n.EXTENT/128,ut=n.EXTENT+et/2,ft=ut+et;for(let wt=-et;wt<ft;wt+=et)for(let Ye=-et;Ye<ft;Ye+=et){const ht=Ye<0||Ye>ut||wt<0||wt>ut?24575:0,zt=n.clamp(Math.round(Ye),0,n.EXTENT),xt=n.clamp(Math.round(wt),0,n.EXTENT);be.emplaceBack(zt+ht,xt)}const vt=(wt,Ye)=>{const ht=131*Ye+wt;ye.emplaceBack(ht+1,ht,ht+131),ye.emplaceBack(ht+131,ht+131+1,ht+1)};for(let wt=1;wt<129;wt++)for(let Ye=1;Ye<129;Ye++)vt(Ye,wt);return[0,129].forEach(wt=>{for(let Ye=0;Ye<130;Ye++)vt(Ye,wt),vt(wt,Ye)}),[be,ye,32768]}(),Q=d.context;this.gridBuffer=Q.createVertexBuffer(I,n.posAttributes.members),this.gridIndexBuffer=Q.createIndexBuffer(Y),this.gridSegments=n.SegmentVector.simpleSegment(0,0,I.length,Y.length),this.gridNoSkirtSegments=n.SegmentVector.simpleSegment(0,0,I.length,V),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new mc(_.map),this.orthoMatrix=n.create(),n.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,n.EXTENT,0,n.EXTENT,0,1);const re=Q.gl;this._overlapStencilMode=new n.StencilMode({func:re.GEQUAL,mask:255},0,255,re.KEEP,re.KEEP,re.REPLACE),this._previousZoom=d.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=_,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Xa(_.map)}set style(d){d.on("data",this._onStyleDataEvent.bind(this)),d.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=d,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(d,_,I){if(d&&d.terrain){this._style!==d&&(this.style=d),this.enabled=!0;const Y=d.terrain.properties;this.sourceCache=0===d.terrain.drapeRenderMode?this._mockSourceCache:d._getSourceCache(Y.get("source")),this._exaggeration=Y.get("exaggeration");const V=()=>{this.sourceCache.used&&n.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Q=this.getScaledDemTileSize();this.sourceCache.update(_,Q,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,V(),this._initializing=!0),V(),_.updateElevation(!0,I),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(_),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(d){this._findCoveringTileCache[d]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const d=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==d.efficiency&&n.warnOnce(`Terrain render cache efficiency is not optimal (${d.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${d.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(d){d.coord&&"source"===d.dataType?this._clearRenderCacheForTile(d.sourceCacheId,d.coord):"style"===d.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const d in this._style._sourceCaches)this._style._sourceCaches[d].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(d=>d.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const d=2*this.proxySourceCache.getSource().tileSize;return[d,d]}set useVertexMorphing(d){this._useVertexMorphing=d}updateTileBinding(d){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const _=this.proxySourceCache,I=this.painter.transform;this._initializing&&(this._initializing=0===I._centerAltitude&&-1===this.getAtPointOrZero(n.MercatorCoordinate.fromLngLat(I.center),-1),this._emptyDEMTextureDirty=!this._initializing);const Y=this.proxyCoords=_.getIds().map(ue=>{const be=_.getTileByID(ue).tileID;return be.projMatrix=I.calculateProjMatrix(be.toUnwrapped()),be});(function(ue,be){const ye=be.transform.pointCoordinate(be.transform.getCameraPoint()),Fe=new n.Point(ye.x,ye.y);ue.sort((et,ut)=>{if(ut.overscaledZ-et.overscaledZ)return ut.overscaledZ-et.overscaledZ;const ft=new n.Point(et.canonical.x+(1<<et.canonical.z)*et.wrap,et.canonical.y),vt=new n.Point(ut.canonical.x+(1<<ut.canonical.z)*ut.wrap,ut.canonical.y),wt=Fe.mult(1<<et.canonical.z);return wt.x-=.5,wt.y-=.5,wt.distSqr(ft)-wt.distSqr(vt)})})(Y,this.painter),this._previousZoom=I.zoom;const V=this.proxyToSource||{};this.proxyToSource={},Y.forEach(ue=>{this.proxyToSource[ue.key]={}}),this.terrainTileForTile={};const Q=this._style._sourceCaches;for(const ue in Q){const be=Q[ue];if(!be.used||(be!==this.sourceCache&&this.resetTileLookupCache(be.id),this._setupProxiedCoordsForOrtho(be,d[ue],V),be.usedForTerrain))continue;const ye=d[ue];be.getSource().reparseOverscaled&&this._assignTerrainTiles(ye)}this.proxiedCoords[_.id]=Y.map(ue=>new gc(ue,ue.key,this.orthoMatrix)),this._assignTerrainTiles(Y),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(V),this.renderingToTexture=!1,this._updateTimestamp=n.exported.now();const re={};this._visibleDemTiles=[];for(const ue of this.proxyCoords){const be=this.terrainTileForTile[ue.key];if(!be)continue;const ye=be.tileID.key;ye in re||(this._visibleDemTiles.push(be),re[ye]=ye)}}_assignTerrainTiles(d){this._initializing||d.forEach(_=>{if(this.terrainTileForTile[_.key])return;const I=this._findTileCoveringTileID(_,this.sourceCache);I&&(this.terrainTileForTile[_.key]=I)})}_prepareDEMTextures(){const d=this.painter.context,_=d.gl;for(const I in this.terrainTileForTile){const Y=this.terrainTileForTile[I],V=Y.dem;!V||Y.demTexture&&!Y.needsDEMTextureUpload||(d.activeTexture.set(_.TEXTURE1),bd(this.painter,Y,V))}}_prepareDemTileUniforms(d,_,I,Y){if(!_||null==_.demTexture)return!1;const V=d.tileID.canonical,Q=Math.pow(2,_.tileID.canonical.z-V.z),re=Y||"";return I[`u_dem_tl${re}`]=[V.x*Q%1,V.y*Q%1],I[`u_dem_scale${re}`]=Q,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const d=this.painter.context,_=d.gl;if(!this._emptyDepthBufferTexture){const I=new n.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new n.Texture(d,I,_.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let d=0;const _=this._visibleDemTiles.reduce((I,Y)=>{if(!Y.dem)return I;const V=Y.dem.tree.minimums[0];return V>0&&d++,I+V},0);return d?_/d:0}_updateEmptyDEMTexture(){const d=this.painter.context,_=d.gl;d.activeTexture.set(_.TEXTURE2);const I=this._getLoadedAreaMinimum(),Y=new n.RGBAImage({width:1,height:1},new Uint8Array(n.DEMData.pack(I,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let V=this._emptyDEMTexture;return V?V.update(Y,{premultiply:!1}):V=this._emptyDEMTexture=new n.Texture(d,Y,_.RGBA,{premultiply:!1}),V}setupElevationDraw(d,_,I){const Y=this.painter.context,V=Y.gl,Q=(re=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:n.DEMData.getUnpackVector(re),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var re;Q.u_dem_size=this.sourceCache.getSource().tileSize,Q.u_exaggeration=this.exaggeration();let ue=null,be=null,ye=1;if(I&&I.morphing&&this._useVertexMorphing){const Fe=I.morphing.srcDemTile,et=I.morphing.dstDemTile;ye=I.morphing.phase,Fe&&et&&(this._prepareDemTileUniforms(d,Fe,Q,"_prev")&&(be=Fe),this._prepareDemTileUniforms(d,et,Q)&&(ue=et))}if(be&&ue?(Y.activeTexture.set(V.TEXTURE2),ue.demTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE,V.NEAREST),Y.activeTexture.set(V.TEXTURE4),be.demTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE,V.NEAREST),Q.u_dem_lerp=ye):(ue=this.terrainTileForTile[d.tileID.key],Y.activeTexture.set(V.TEXTURE2),(this._prepareDemTileUniforms(d,ue,Q)?ue.demTexture:this.emptyDEMTexture).bind(V.NEAREST,V.CLAMP_TO_EDGE)),Y.activeTexture.set(V.TEXTURE3),I&&I.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE),this._depthFBO&&(Q.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE),Q.u_depth_size_inv=[1,1]),I&&I.useMeterToDem&&ue){const Fe=(1<<ue.tileID.canonical.z)*n.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Q.u_meter_to_dem=Fe}if(I&&I.labelPlaneMatrixInv&&(Q.u_label_plane_matrix_inv=I.labelPlaneMatrixInv),_.setTerrainUniformValues(Y,Q),"globe"===this.painter.transform.projection.name){const Fe=this.globeUniformValues(this.painter.transform,d.tileID.canonical,I&&I.useDenormalizedUpVectorScale);_.setGlobeUniformValues(Y,Fe)}}globeUniformValues(d,_,I){const Y=d.projection;return{u_tile_tl_up:Y.upVector(_,0,0),u_tile_tr_up:Y.upVector(_,n.EXTENT,0),u_tile_br_up:Y.upVector(_,n.EXTENT,n.EXTENT),u_tile_bl_up:Y.upVector(_,0,n.EXTENT),u_tile_up_scale:I?n.globeMetersToEcef(1):Y.upVectorScale(_,d.center.lat,d.worldSize).metersToTile}}renderToBackBuffer(d){const _=this.painter,I=this.painter.context;0!==d.length&&(I.bindFramebuffer.set(null),I.viewport.set([0,0,_.width,_.height]),_.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(Y,V,Q,re,ue){if("globe"===Y.transform.projection.name)!function(be,ye,Fe,et,ut){const ft=be.context,vt=ft.gl;let wt,Ye;const ht=be.options.showTerrainWireframe?2:0,zt=be.transform,xt=n.globeUseCustomAntiAliasing(be,ft,zt),fi=(Dn,Wi)=>{if(Ye===Dn)return;const on=[ql[Dn],"PROJECTION_GLOBE_VIEW"];xt&&on.push("CUSTOM_ANTIALIASING"),Wi&&on.push(ql[ht]),wt=be.useProgram("globeRaster",null,on),Ye=Dn},pi=be.colorModeForRenderPass(),ai=new n.DepthMode(vt.LEQUAL,n.DepthMode.ReadWrite,be.depthRangeFor3D);po.update(ut);const Ii=n.calculateGlobeMercatorMatrix(zt),Ei=[n.mercatorXfromLng(zt.center.lng),n.mercatorYfromLat(zt.center.lat)],Yi=ht?[!1,!0]:[!1],Gn=be.globeSharedBuffers,Ni=[zt.width*n.exported.devicePixelRatio,zt.height*n.exported.devicePixelRatio],dn=Float32Array.from(zt.globeMatrix),Vi={useDenormalizedUpVectorScale:!0};if(Yi.forEach(Dn=>{const Wi=be.transform,on=ph(Wi.zoom)*ye.exaggeration();Ye=-1;const Wn=Dn?vt.LINES:vt.TRIANGLES;for(const Ln of et){const Hn=Fe.getTile(Ln),Rr=n.StencilMode.disabled,ms=ye.prevTerrainTileForTile[Ln.key],Sr=ye.terrainTileForTile[Ln.key];va(ms,Sr)&&po.newMorphing(Ln.key,ms,Sr,ut,250),ft.activeTexture.set(vt.TEXTURE0),Hn.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE);const Ir=po.getMorphValuesForProxy(Ln.key),xs=Ir?1:0;Ir&&n.extend$1(Vi,{morphing:{srcDemTile:Ir.from,dstDemTile:Ir.to,phase:n.easeCubicInOut(Ir.phase)}});const cs=n.tileCornersToBounds(Ln.canonical),zr=n.getLatitudinalLod(cs.getCenter().lat),Qs=n.getGridMatrix(Ln.canonical,cs,zr,Wi.worldSize/Wi._pixelsPerMercatorPixel),Za=n.globeNormalizeECEF(n.globeTileBounds(Ln.canonical)),eo=ol(Wi.projMatrix,dn,Ii,Za,n.globeToMercatorTransition(Wi.zoom),Ei,Wi.frustumCorners.TL,Wi.frustumCorners.TR,Wi.frustumCorners.BR,Wi.frustumCorners.BL,Wi.globeCenterInViewSpace,Wi.globeRadius,Ni,on,Qs);if(fi(xs,Dn),ye.setupElevationDraw(Hn,wt,Vi),be.prepareDrawProgram(ft,wt,Ln.toUnwrapped()),Gn){const[no,jc,Wo]=Dn?Gn.getWirefameBuffers(be.context,zr):Gn.getGridBuffers(zr,0!==on);wt.draw(ft,Wn,ai,Rr,pi,n.CullFaceMode.backCCW,eo,"globe_raster",no,jc,Wo)}}}),Gn){const Dn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];xt&&Dn.push("CUSTOM_ANTIALIASING"),wt=be.useProgram("globeRaster",null,Dn);for(const Wi of et){const{x:on,y:Wn,z:Ln}=Wi.canonical,Hn=0===Wn,Rr=Wn===(1<<Ln)-1,[ms,Sr,Ir,xs]=Gn.getPoleBuffers(Ln);if(xs&&(Hn||Rr)){const cs=Fe.getTile(Wi);ft.activeTexture.set(vt.TEXTURE0),cs.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE);let zr=n.globePoleMatrixForTile(Ln,on,zt);const Qs=n.globeNormalizeECEF(n.globeTileBounds(Wi.canonical)),Za=(eo,no)=>eo.draw(ft,vt.TRIANGLES,ai,n.StencilMode.disabled,pi,n.CullFaceMode.disabled,ol(zt.projMatrix,zr,zr,Qs,0,Ei,zt.frustumCorners.TL,zt.frustumCorners.TR,zt.frustumCorners.BR,zt.frustumCorners.BL,zt.globeCenterInViewSpace,zt.globeRadius,Ni,0),"globe_pole_raster",no,Ir,xs);ye.setupElevationDraw(cs,wt,Vi),be.prepareDrawProgram(ft,wt,Wi.toUnwrapped()),Hn&&Za(wt,ms),Rr&&(zr=n.scale(n.create(),zr,[1,-1,1]),Za(wt,Sr))}}}}(Y,V,Q,re,ue);else{const be=Y.context,ye=be.gl;let Fe,et;const ut=Y.options.showTerrainWireframe?2:0,ft=(zt,xt)=>{if(et===zt)return;const fi=[ql[zt]];xt&&fi.push(ql[ut]),Fe=Y.useProgram("terrainRaster",null,fi),et=zt},vt=Y.colorModeForRenderPass(),wt=new n.DepthMode(ye.LEQUAL,n.DepthMode.ReadWrite,Y.depthRangeFor3D);po.update(ue);const Ye=Y.transform,ht=ph(Ye.zoom)*V.exaggeration();(ut?[!1,!0]:[!1]).forEach(zt=>{et=-1;const xt=zt?ye.LINES:ye.TRIANGLES,[fi,pi]=zt?V.getWirefameBuffer():[V.gridIndexBuffer,V.gridSegments];for(const ai of re){const Ii=Q.getTile(ai),Ei=n.StencilMode.disabled,Yi=V.prevTerrainTileForTile[ai.key],Gn=V.terrainTileForTile[ai.key];va(Yi,Gn)&&po.newMorphing(ai.key,Yi,Gn,ue,250),be.activeTexture.set(ye.TEXTURE0),Ii.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST);const Ni=po.getMorphValuesForProxy(ai.key),dn=Ni?1:0;let Vi;Ni&&(Vi={morphing:{srcDemTile:Ni.from,dstDemTile:Ni.to,phase:n.easeCubicInOut(Ni.phase)}});const Dn=al(ai.projMatrix,Kl(ai.canonical,Ye.renderWorldCopies)?ht/10:ht);ft(dn,zt),V.setupElevationDraw(Ii,Fe,Vi),Y.prepareDrawProgram(be,Fe,ai.toUnwrapped()),Fe.draw(be,xt,wt,Ei,vt,n.CullFaceMode.backCCW,Dn,"terrain_raster",V.gridBuffer,fi,pi)}})}}(_,this,this.proxySourceCache,d,this._updateTimestamp),this.renderingToTexture=!0,_.gpuTimingDeferredRenderEnd(),d.splice(0,d.length))}renderBatch(d){if(0===this._drapedRenderBatches.length)return d+1;this.renderingToTexture=!0;const _=this.painter,I=this.painter.context,Y=this.proxySourceCache,V=this.proxiedCoords[Y.id],Q=this._drapedRenderBatches.shift(),re=[],ue=_.style.order;let be=0;for(const ye of V){const Fe=Y.getTileByID(ye.proxyTileKey),et=Y.proxyCachedFBO[ye.key]?Y.proxyCachedFBO[ye.key][d]:void 0,ut=void 0!==et?Y.renderCache[et]:this.pool[be++],ft=void 0!==et;if(Fe.texture=ut.tex,ft&&!ut.dirty){re.push(Fe.tileID);continue}let vt;I.bindFramebuffer.set(ut.fb.framebuffer),this.renderedToTile=!1,ut.dirty&&(I.clear({color:n.Color.transparent,stencil:0}),ut.dirty=!1);for(let wt=Q.start;wt<=Q.end;++wt){const Ye=_.style._layers[ue[wt]];if(Ye.isHidden(_.transform.zoom))continue;const ht=_.style._getLayerSourceCache(Ye),zt=ht?this.proxyToSource[ye.key][ht.id]:[ye];if(!zt)continue;const xt=zt;I.viewport.set([0,0,ut.fb.width,ut.fb.height]),vt!==(ht?ht.id:null)&&(this._setupStencil(ut,zt,Ye,ht),vt=ht?ht.id:null),_.renderLayer(_,ht,Ye,xt)}this.renderedToTile?(ut.dirty=!0,re.push(Fe.tileID)):ft||--be,5===be&&(be=0,this.renderToBackBuffer(re))}return this.renderToBackBuffer(re),this.renderingToTexture=!1,I.bindFramebuffer.set(null),I.viewport.set([0,0,_.width,_.height]),Q.end+1}postRender(){}renderCacheEfficiency(d){const _=d.order.length;if(0===_)return{efficiency:100};let I,Y=0,V=0,Q=!1;for(let re=0;re<_;++re){const ue=d._layers[d.order[re]];this._style.isLayerDraped(ue)?(Q&&++Y,++V):Q||(Q=!0,I=ue.id)}return 0===V?{efficiency:100}:{efficiency:100*(1-Y/V),firstUndrapedLayer:I}}getMinElevationBelowMSL(){let d=0;return this._visibleDemTiles.filter(_=>_.dem).forEach(_=>{d=Math.min(d,_.dem.tree.minimums[0])}),0===d?d:(d-30)*this._exaggeration}raycast(d,_,I){if(!this._visibleDemTiles)return null;const Y=this._visibleDemTiles.filter(V=>V.dem).map(V=>{const Q=V.tileID,re=1<<Q.overscaledZ,{x:ue,y:be}=Q.canonical,ye=ue/re,Fe=(ue+1)/re,et=be/re,ut=(be+1)/re;return{minx:ye,miny:et,maxx:Fe,maxy:ut,t:V.dem.tree.raycastRoot(ye,et,Fe,ut,d,_,I),tile:V}});Y.sort((V,Q)=>(null!==V.t?V.t:Number.MAX_VALUE)-(null!==Q.t?Q.t:Number.MAX_VALUE));for(const V of Y){if(null==V.t)return null;const Q=V.tile.dem.tree.raycast(V.minx,V.miny,V.maxx,V.maxy,d,_,I);if(null!=Q)return Q}return null}_createFBO(){const d=this.painter.context,_=d.gl,I=this.drapeBufferSize;d.activeTexture.set(_.TEXTURE0);const Y=new n.Texture(d,{width:I[0],height:I[1],data:null},_.RGBA);Y.bind(_.LINEAR,_.CLAMP_TO_EDGE);const V=d.createFramebuffer(I[0],I[1],!1);return V.colorAttachment.set(Y.texture),V.depthAttachment=new Mt(d,V.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=d.createRenderbuffer(d.gl.DEPTH_STENCIL,I[0],I[1]),this._stencilRef=0,V.depthAttachment.set(this._sharedDepthStencil),d.clear({stencil:0})):V.depthAttachment.set(this._sharedDepthStencil),d.extTextureFilterAnisotropic&&!d.extTextureFilterAnisotropicForceOff&&_.texParameterf(_.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax),{fb:V,tex:Y,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d].hasTransition())return!0;return this._style.order.some(d=>{const _=this._style._layers[d],I=_.isHidden(this.painter.transform.zoom);return"custom"===_.type?!I&&_.shouldRedrape():!I&&_.hasTransition()})}_clearLineLayersFromRenderCache(){let d=!1;for(const I of this._style._getSources())if(I instanceof Rn){d=!0;break}if(!d)return;const _={};for(let I=0;I<this._style.order.length;++I){const Y=this._style._layers[this._style.order[I]],V=this._style._getLayerSourceCache(Y);if(V&&!_[V.id]&&!Y.isHidden(this.painter.transform.zoom)&&"line"===Y.type&&Y.widthExpression()instanceof n.ZoomDependentExpression){_[V.id]=!0;for(const Q of this.proxyCoords){const re=this.proxyToSource[Q.key][V.id];if(re)for(const ue of re)this._clearRenderCacheForTile(V.id,ue)}}}}_clearRasterLayersFromRenderCache(){let d=!1;for(const I in this._style._sourceCaches)if(this._style._sourceCaches[I]._source instanceof Hi){d=!0;break}if(!d)return;const _={};for(let I=0;I<this._style.order.length;++I){const Y=this._style._layers[this._style.order[I]],V=this._style._getLayerSourceCache(Y);if(!V||_[V.id]||Y.isHidden(this.painter.transform.zoom)||"raster"!==Y.type)continue;const Q=Y.paint.get("raster-fade-duration");for(const re of this.proxyCoords){const ue=this.proxyToSource[re.key][V.id];if(ue)for(const be of ue){const ye=Bh(V.getTile(be),V.findLoadedParent(be,0),V,this.painter.transform,Q);(1!==ye.opacity||0!==ye.mix)&&this._clearRenderCacheForTile(V.id,be)}}}}_setupDrapedRenderBatches(){const d=this._style.order,_=d.length;if(0===_)return;const I=[];let Y,V=0,Q=this._style._layers[d[V]];for(;!this._style.isLayerDraped(Q)&&Q.isHidden(this.painter.transform.zoom)&&++V<_;)Q=this._style._layers[d[V]];for(;V<_;++V){const re=this._style._layers[d[V]];re.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(re)?void 0===Y&&(Y=V):void 0!==Y&&(I.push({start:Y,end:V-1}),Y=void 0))}void 0!==Y&&I.push({start:Y,end:V-1}),this._drapedRenderBatches=I}_setupRenderCache(d){const _=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,_.renderCache.length>_.renderCachePool.length){const Q=Object.values(_.proxyCachedFBO);_.proxyCachedFBO={};for(let re=0;re<Q.length;++re){const ue=Object.values(Q[re]);_.renderCachePool.push(...ue)}}return}this._clearRasterLayersFromRenderCache();const I=this.proxyCoords,Y=this._tilesDirty;for(let Q=I.length-1;Q>=0;Q--){const re=I[Q];if(_.getTileByID(re.key),void 0!==_.proxyCachedFBO[re.key]){const ue=d[re.key],be=this.proxyToSource[re.key];let ye=0;for(const Fe in be){const et=be[Fe],ut=ue[Fe];if(!ut||ut.length!==et.length||et.some((ft,vt)=>ft!==ut[vt]||Y[Fe]&&Y[Fe].hasOwnProperty(ft.key))){ye=-1;break}++ye}for(const Fe in _.proxyCachedFBO[re.key])_.renderCache[_.proxyCachedFBO[re.key][Fe]].dirty=ye<0||ye!==Object.values(ue).length}}const V=[...this._drapedRenderBatches];V.sort((Q,re)=>re.end-re.start-(Q.end-Q.start));for(const Q of V)for(const re of I){if(_.proxyCachedFBO[re.key])continue;let ue=_.renderCachePool.pop();void 0===ue&&_.renderCache.length<50&&(ue=_.renderCache.length,_.renderCache.push(this._createFBO())),void 0!==ue&&(_.proxyCachedFBO[re.key]={},_.proxyCachedFBO[re.key][Q.start]=ue,_.renderCache[ue].dirty=!0)}this._tilesDirty={}}_setupStencil(d,_,I,Y){if(!Y||!this._sourceTilesOverlap[Y.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const V=this.painter.context,Q=V.gl;if(_.length<=1)return void(this._overlapStencilType=!1);let re;if(I.isTileClipped())re=_.length,this._overlapStencilMode.test={func:Q.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(_[0].overscaledZ>_[_.length-1].overscaledZ))return void(this._overlapStencilType=!1);re=1,this._overlapStencilMode.test={func:Q.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+re>255&&(V.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=re,this._overlapStencilMode.ref=this._stencilRef,I.isTileClipped()&&this._renderTileClippingMasks(_,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(d){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[d.key]),this._overlapStencilMode):n.StencilMode.disabled}_renderTileClippingMasks(d,_){const I=this.painter,Y=this.painter.context,V=Y.gl;I._tileClippingMaskIDs={},Y.setColorMode(n.ColorMode.disabled),Y.setDepthMode(n.DepthMode.disabled);const Q=I.useProgram("clippingMask");for(const re of d){const ue=I._tileClippingMaskIDs[re.key]=--_;Q.draw(Y,V.TRIANGLES,n.DepthMode.disabled,new n.StencilMode({func:V.ALWAYS,mask:0},ue,255,V.KEEP,V.KEEP,V.REPLACE),n.ColorMode.disabled,n.CullFaceMode.disabled,tu(re.projMatrix),"$clipping",I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}}pointCoordinate(d){const _=this.painter.transform;if(d.x<0||d.x>_.width||d.y<0||d.y>_.height)return null;const I=[d.x,d.y,1,1];n.transformMat4$1(I,I,_.pixelMatrixInverse),n.scale$1(I,I,1/I[3]),I[0]/=_.worldSize,I[1]/=_.worldSize;const Y=_._camera.position,V=n.mercatorZfromAltitude(1,_.center.lat),Q=[Y[0],Y[1],Y[2]/V,0],re=n.subtract([],I.slice(0,3),Q);n.normalize(re,re);const ue=this.raycast(Q,re,this._exaggeration);return null!==ue&&ue?(n.scaleAndAdd(Q,Q,re,ue),Q[3]=Q[2],Q[2]*=V,Q):null}drawDepth(){const d=this.painter,_=d.context,I=this.proxySourceCache,Y=Math.ceil(d.width),V=Math.ceil(d.height);if(!this._depthFBO||this._depthFBO.width===Y&&this._depthFBO.height===V||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Q=_.gl,re=_.createFramebuffer(Y,V,!0);_.activeTexture.set(Q.TEXTURE0);const ue=new n.Texture(_,{width:Y,height:V,data:null},Q.RGBA);ue.bind(Q.NEAREST,Q.CLAMP_TO_EDGE),re.colorAttachment.set(ue.texture);const be=_.createRenderbuffer(_.gl.DEPTH_COMPONENT16,Y,V);re.depthAttachment.set(be),this._depthFBO=re,this._depthTexture=ue}_.bindFramebuffer.set(this._depthFBO.framebuffer),_.viewport.set([0,0,Y,V]),function(Q,re,ue,be){if("globe"===Q.transform.projection.name)return;const ye=Q.context,Fe=ye.gl;ye.clear({depth:1});const et=Q.useProgram("terrainDepth"),ut=new n.DepthMode(Fe.LESS,n.DepthMode.ReadWrite,Q.depthRangeFor3D);for(const ft of be){const vt=ue.getTile(ft),wt=al(ft.projMatrix,0);re.setupElevationDraw(vt,et),et.draw(ye,Fe.TRIANGLES,ut,n.StencilMode.disabled,n.ColorMode.unblended,n.CullFaceMode.backCCW,wt,"terrain_depth",re.gridBuffer,re.gridIndexBuffer,re.gridNoSkirtSegments)}}(d,this,I,this.proxyCoords)}_setupProxiedCoordsForOrtho(d,_,I){if(d.getSource()instanceof Ht)return this._setupProxiedCoordsForImageSource(d,_,I);this._findCoveringTileCache[d.id]=this._findCoveringTileCache[d.id]||{};const Y=this.proxiedCoords[d.id]=[],V=this.proxyCoords;for(let re=0;re<V.length;re++){const ue=V[re],be=this._findTileCoveringTileID(ue,d);if(be){const ye=this._createProxiedId(ue,be,I[ue.key]&&I[ue.key][d.id]);Y.push(ye),this.proxyToSource[ue.key][d.id]=[ye]}}let Q=!1;for(let re=0;re<_.length;re++){const ue=d.getTile(_[re]);if(!ue||!ue.hasData())continue;const be=this._findTileCoveringTileID(ue.tileID,this.proxySourceCache);if(be&&be.tileID.canonical.z!==ue.tileID.canonical.z){const ye=this.proxyToSource[be.tileID.key][d.id],Fe=this._createProxiedId(be.tileID,ue,I[be.tileID.key]&&I[be.tileID.key][d.id]);ye?ye.splice(ye.length-1,0,Fe):this.proxyToSource[be.tileID.key][d.id]=[Fe],Y.push(Fe),Q=!0}}this._sourceTilesOverlap[d.id]=Q}_setupProxiedCoordsForImageSource(d,_,I){if(!d.getSource().loaded())return;const Y=this.proxiedCoords[d.id]=[],V=this.proxyCoords,Q=d.getSource(),re=new n.Point(Q.tileID.x,Q.tileID.y)._div(1<<Q.tileID.z),ue=Q.coordinates.map(n.MercatorCoordinate.fromLngLat).reduce((ye,Fe)=>(ye.min.x=Math.min(ye.min.x,Fe.x-re.x),ye.min.y=Math.min(ye.min.y,Fe.y-re.y),ye.max.x=Math.max(ye.max.x,Fe.x-re.x),ye.max.y=Math.max(ye.max.y,Fe.y-re.y),ye),{min:new n.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),be=(ye,Fe)=>{const et=ye.wrap+ye.canonical.x/(1<<ye.canonical.z),ut=ye.canonical.y/(1<<ye.canonical.z),ft=n.EXTENT/(1<<ye.canonical.z),vt=Fe.wrap+Fe.canonical.x/(1<<Fe.canonical.z),wt=Fe.canonical.y/(1<<Fe.canonical.z);return et+ft<vt+ue.min.x||et>vt+ue.max.x||ut+ft<wt+ue.min.y||ut>wt+ue.max.y};for(let ye=0;ye<V.length;ye++){const Fe=V[ye];for(let et=0;et<_.length;et++){const ut=d.getTile(_[et]);if(!ut||!ut.hasData()||be(Fe,ut.tileID))continue;const ft=this._createProxiedId(Fe,ut,I[Fe.key]&&I[Fe.key][d.id]),vt=this.proxyToSource[Fe.key][d.id];vt?vt.push(ft):this.proxyToSource[Fe.key][d.id]=[ft],Y.push(ft)}}}_createProxiedId(d,_,I){let Y=this.orthoMatrix;if(I){const V=I.find(Q=>Q.key===_.tileID.key);if(V)return V}if(_.tileID.key!==d.key){const V=d.canonical.z-_.tileID.canonical.z;let Q,re,ue;Y=n.create();const be=_.tileID.wrap-d.wrap<<d.overscaledZ;V>0?(Q=n.EXTENT>>V,re=Q*((_.tileID.canonical.x<<V)-d.canonical.x+be),ue=Q*((_.tileID.canonical.y<<V)-d.canonical.y)):(Q=n.EXTENT<<-V,re=n.EXTENT*(_.tileID.canonical.x-(d.canonical.x+be<<-V)),ue=n.EXTENT*(_.tileID.canonical.y-(d.canonical.y<<-V))),n.ortho(Y,0,Q,0,Q,0,1),n.translate(Y,Y,[re,ue,0])}return new gc(_.tileID,d.key,Y)}_findTileCoveringTileID(d,_){let I=_.getTile(d);if(I&&I.hasData())return I;const Y=this._findCoveringTileCache[_.id],V=Y[d.key];if(I=V?_.getTileByID(V):null,I&&I.hasData()||null===V)return I;let Q=I?I.tileID:d,re=Q.overscaledZ;const ue=_.getSource().minzoom,be=[];if(!V){const Fe=_.getSource().maxzoom;if(d.canonical.z>=Fe){const et=d.canonical.z-Fe;_.getSource().reparseOverscaled?(re=Math.max(d.canonical.z+2,_.transform.tileZoom),Q=new n.OverscaledTileID(re,d.wrap,Fe,d.canonical.x>>et,d.canonical.y>>et)):0!==et&&(re=Fe,Q=new n.OverscaledTileID(re,d.wrap,Fe,d.canonical.x>>et,d.canonical.y>>et))}Q.key!==d.key&&(be.push(Q.key),I=_.getTile(Q))}const ye=Fe=>{be.forEach(et=>{Y[et]=Fe}),be.length=0};for(re-=1;re>=ue&&(!I||!I.hasData());re--){I&&ye(I.tileID.key);const Fe=Q.calculateScaledKey(re);if(I=_.getTileByID(Fe),I&&I.hasData())break;const et=Y[Fe];if(null===et)break;void 0===et?be.push(Fe):I=_.getTileByID(et)}return ye(I?I.tileID.key:null),I&&I.hasData()?I:null}findDEMTileFor(d){return this.enabled?this._findTileCoveringTileID(d,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(d,_){let I=this._tilesDirty[d];I||(I=this._tilesDirty[d]={}),I[_.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const d=function(_){let I=0;const Y=new n.StructArrayLayout2ui4,V=131;for(let Q=1;Q<129;Q++){for(let re=1;re<129;re++)I=Q*V+re,Y.emplaceBack(I,I+1),Y.emplaceBack(I,I+V),Y.emplaceBack(I+1,I+V),128===Q&&Y.emplaceBack(I+V,I+V+1);Y.emplaceBack(I+1,I+1+V)}return Y}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(d),this.wireframeSegments=n.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,d.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Us{static cacheKey(d,_,I,Y){let V=`${_}${Y?Y.cacheKey:""}`;for(const Q of I)d.usedDefines.includes(Q)&&(V+=`/${Q}`);return V}constructor(d,_,I,Y,V,Q){const re=d.gl;this.program=re.createProgram();const ue=function(Ye){const ht=[];for(let zt=0;zt<Ye.length;zt++){if(null===Ye[zt])continue;const xt=Ye[zt].split(" ");ht.push(xt.pop())}return ht}(I.staticAttributes),be=Y?Y.getBinderAttributes():[],ye=ue.concat(be);let Fe=Y?Y.defines():[];Fe=Fe.concat(Q.map(Ye=>`#define ${Ye}`));const et=d.isWebGL2?"#version 300 es\n":"",ut=et+Fe.concat(d.extStandardDerivatives&&0===et.length?"#extension GL_OES_standard_derivatives : enable\n".concat(pc):pc,pc,Fh,df.fragmentSource,$u.fragmentSource,I.fragmentSource).join("\n"),ft=et+Fe.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Fh,df.vertexSource,$u.vertexSource,Wu.vertexSource,I.vertexSource).join("\n"),vt=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);re.shaderSource(vt,ut),re.compileShader(vt),re.attachShader(this.program,vt);const wt=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(wt,ft),re.compileShader(wt),re.attachShader(this.program,wt),this.attributes={},this.numAttributes=ye.length;for(let Ye=0;Ye<this.numAttributes;Ye++)ye[Ye]&&(re.bindAttribLocation(this.program,Ye,ye[Ye]),this.attributes[ye[Ye]]=Ye);re.linkProgram(this.program),re.deleteShader(wt),re.deleteShader(vt),this.fixedUniforms=V(d),this.binderUniforms=Y?Y.getUniforms(d):[],Q.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new n.Uniform1i(Ye=d),u_dem_prev:new n.Uniform1i(Ye),u_dem_unpack:new n.Uniform4f(Ye),u_dem_tl:new n.Uniform2f(Ye),u_dem_scale:new n.Uniform1f(Ye),u_dem_tl_prev:new n.Uniform2f(Ye),u_dem_scale_prev:new n.Uniform1f(Ye),u_dem_size:new n.Uniform1f(Ye),u_dem_lerp:new n.Uniform1f(Ye),u_exaggeration:new n.Uniform1f(Ye),u_depth:new n.Uniform1i(Ye),u_depth_size_inv:new n.Uniform2f(Ye),u_meter_to_dem:new n.Uniform1f(Ye),u_label_plane_matrix_inv:new n.UniformMatrix4f(Ye)}),Q.includes("GLOBE")&&(this.globeUniforms=(Ye=>({u_tile_tl_up:new n.Uniform3f(Ye),u_tile_tr_up:new n.Uniform3f(Ye),u_tile_br_up:new n.Uniform3f(Ye),u_tile_bl_up:new n.Uniform3f(Ye),u_tile_up_scale:new n.Uniform1f(Ye)}))(d)),Q.includes("FOG")&&(this.fogUniforms=(Ye=>({u_fog_matrix:new n.UniformMatrix4f(Ye),u_fog_range:new n.Uniform2f(Ye),u_fog_color:new n.Uniform4f(Ye),u_fog_horizon_blend:new n.Uniform1f(Ye),u_fog_temporal_offset:new n.Uniform1f(Ye),u_frustum_tl:new n.Uniform3f(Ye),u_frustum_tr:new n.Uniform3f(Ye),u_frustum_br:new n.Uniform3f(Ye),u_frustum_bl:new n.Uniform3f(Ye),u_globe_pos:new n.Uniform3f(Ye),u_globe_radius:new n.Uniform1f(Ye),u_globe_transition:new n.Uniform1f(Ye),u_is_globe:new n.Uniform1i(Ye),u_viewport:new n.Uniform2f(Ye)}))(d))}var Ye}setTerrainUniformValues(d,_){if(!this.terrainUniforms)return;const I=this.terrainUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const Y in _)I[Y]&&I[Y].set(this.program,Y,_[Y])}}setGlobeUniformValues(d,_){if(!this.globeUniforms)return;const I=this.globeUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const Y in _)I[Y]&&I[Y].set(this.program,Y,_[Y])}}setFogUniformValues(d,_){if(!this.fogUniforms)return;const I=this.fogUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const Y in _)I[Y].set(this.program,Y,_[Y])}}draw(d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt){const wt=d.gl;if(this.failedToCreate)return;d.program.set(this.program),d.setDepthMode(I),d.setStencilMode(Y),d.setColorMode(V),d.setCullFace(Q);for(const ht of Object.keys(this.fixedUniforms))this.fixedUniforms[ht].set(this.program,ht,re[ht]);ft&&ft.setUniforms(this.program,d,this.binderUniforms,et,{zoom:ut});const Ye={[wt.LINES]:2,[wt.TRIANGLES]:3,[wt.LINE_STRIP]:1}[_];for(const ht of Fe.get()){const zt=ht.vaos||(ht.vaos={});(zt[ue]||(zt[ue]=new Zl)).bind(d,this,be,ft?ft.getPaintVertexBuffers():[],ye,ht.vertexOffset,vt||[]),wt.drawElements(_,ht.primitiveLength*Ye,wt.UNSIGNED_SHORT,ht.primitiveOffset*Ye*2)}}}function mo(k,d){const _=Math.pow(2,d.tileID.overscaledZ),I=d.tileSize*Math.pow(2,k.transform.tileZoom)/_,Y=I*(d.tileID.canonical.x+d.tileID.wrap*_),V=I*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_tile_units_to_pixels:1/Fn(d,1,k.transform.tileZoom),u_pixel_coord_upper:[Y>>16,V>>16],u_pixel_coord_lower:[65535&Y,65535&V]}}const Aa=n.create(),mh=(k,d,_,I,Y,V,Q,re,ue,be,ye)=>{const Fe=d.style.light,et=Fe.properties.get("position"),ut=[et.x,et.y,et.z],ft=n.create$1();"viewport"===Fe.properties.get("anchor")&&(n.fromRotation(ft,-d.transform.angle),n.transformMat3(ut,ut,ft));const vt=Fe.properties.get("color"),wt=d.transform,Ye={u_matrix:k,u_lightpos:ut,u_lightintensity:Fe.properties.get("intensity"),u_lightcolor:[vt.r,vt.g,vt.b],u_vertical_gradient:+_,u_opacity:I,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Aa,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:Y,u_edge_radius:V};return"globe"===wt.projection.name&&(Ye.u_tile_id=[Q.canonical.x,Q.canonical.y,1<<Q.canonical.z],Ye.u_zoom_transition=ue,Ye.u_inv_rot_matrix=ye,Ye.u_merc_center=be,Ye.u_up_dir=wt.projection.upVector(new n.CanonicalTileID(0,0,0),be[0]*n.EXTENT,be[1]*n.EXTENT),Ye.u_height_lift=re),Ye},bu=(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe)=>{const et=mh(k,d,_,I,Y,V,Q,ue,be,ye,Fe),ut={u_height_factor:-Math.pow(2,Q.overscaledZ)/re.tileSize/8};return n.extend(et,mo(d,re),ut)},Ml=k=>({u_matrix:k}),Ol=(k,d,_)=>n.extend(Ml(k),mo(d,_)),Rl=(k,d)=>({u_matrix:k,u_world:d}),ll=(k,d,_,I)=>n.extend(Ol(k,d,_),{u_world:I}),bl=n.create(),iu=(k,d,_,I,Y,V)=>{const Q=k.transform,re="globe"===Q.projection.name;let ue;if("map"===V.paint.get("circle-pitch-alignment"))if(re){const ye=n.globePixelsToTileUnits(Q.zoom,d.canonical)*Q._pixelsPerMercatorPixel;ue=Float32Array.from([ye,0,0,ye])}else ue=Q.calculatePixelsToTileUnitsMatrix(_);else ue=new Float32Array([Q.pixelsToGLUnits[0],0,0,Q.pixelsToGLUnits[1]]);const be={u_camera_to_center_distance:Q.cameraToCenterDistance,u_matrix:k.translatePosMatrix(d.projMatrix,_,V.paint.get("circle-translate"),V.paint.get("circle-translate-anchor")),u_device_pixel_ratio:n.exported.devicePixelRatio,u_extrude_scale:ue,u_inv_rot_matrix:bl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(re){be.u_inv_rot_matrix=I,be.u_merc_center=Y,be.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],be.u_zoom_transition=n.globeToMercatorTransition(Q.zoom);const ye=Y[0]*n.EXTENT,Fe=Y[1]*n.EXTENT;be.u_up_dir=Q.projection.upVector(new n.CanonicalTileID(0,0,0),ye,Fe)}return be},Ll=k=>{const d=[];return"map"===k.paint.get("circle-pitch-alignment")&&d.push("PITCH_WITH_MAP"),"map"===k.paint.get("circle-pitch-scale")&&d.push("SCALE_WITH_MAP"),d},Ho=(k,d,_,I)=>{const Y=n.EXTENT/_.tileSize;return{u_matrix:k,u_camera_to_center_distance:d.getCameraToCenterDistance(I),u_extrude_scale:[d.pixelsToGLUnits[0]/Y,d.pixelsToGLUnits[1]/Y]}},vc=(k,d,_=1)=>({u_matrix:k,u_color:d,u_overlay:0,u_overlay_scale:_}),_c=n.create(),wu=(k,d,_,I,Y,V,Q)=>{const re=k.transform,ue="globe"===re.projection.name,be=ue?n.globePixelsToTileUnits(re.zoom,d.canonical)*re._pixelsPerMercatorPixel:Fn(_,1,V),ye={u_matrix:d.projMatrix,u_extrude_scale:be,u_intensity:Q,u_inv_rot_matrix:_c,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(ue){ye.u_inv_rot_matrix=I,ye.u_merc_center=Y,ye.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],ye.u_zoom_transition=n.globeToMercatorTransition(re.zoom);const Fe=Y[0]*n.EXTENT,et=Y[1]*n.EXTENT;ye.u_up_dir=re.projection.upVector(new n.CanonicalTileID(0,0,0),Fe,et)}return ye},cl=(k,d,_,I,Y,V,Q)=>{const re=k.transform,ue=re.calculatePixelsToTileUnitsMatrix(d);return{u_matrix:Nh(k,d,_,I),u_pixels_to_tile_units:ue,u_device_pixel_ratio:V,u_units_to_pixels:[1/re.pixelsToGLUnits[0],1/re.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:Y,u_texsize:Jo(_)?d.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:zc(d,k.transform),u_alpha_discard_threshold:0,u_trim_offset:Q}},gh=(k,d,_,I,Y)=>{const V=k.transform;return{u_matrix:Nh(k,d,_,I),u_texsize:d.imageAtlasTexture.size,u_pixels_to_tile_units:V.calculatePixelsToTileUnitsMatrix(d),u_device_pixel_ratio:Y,u_image:0,u_tile_units_to_pixels:zc(d,V),u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function zc(k,d){return 1/Fn(k,1,d.tileZoom)}function Nh(k,d,_,I){return k.translatePosMatrix(I||d.tileID.projMatrix,d,_.paint.get("line-translate"),_.paint.get("line-translate-anchor"))}function Jo(k){const d=k.paint.get("line-dasharray").value;return d.value||"constant"!==d.kind}const Pl=(k,d,_,I,Y,V)=>{return{u_matrix:k,u_tl_parent:d,u_scale_parent:_,u_fade_t:I.mix,u_opacity:I.opacity*Y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Y.paint.get("raster-brightness-min"),u_brightness_high:Y.paint.get("raster-brightness-max"),u_saturation_factor:(re=Y.paint.get("raster-saturation"),re>0?1-1/(1.001-re):-re),u_contrast_factor:(Q=Y.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:yc(Y.paint.get("raster-hue-rotate")),u_perspective_transform:V};var Q,re};function yc(k){k*=Math.PI/180;const d=Math.sin(k),_=Math.cos(k);return[(2*_+1)/3,(-Math.sqrt(3)*d-_+1)/3,(Math.sqrt(3)*d-_+1)/3]}const Xu=n.create(),zh=(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt)=>{const wt=Y.transform,Ye={u_is_size_zoom_constant:+("constant"===k||"source"===k),u_is_size_feature_constant:+("constant"===k||"camera"===k),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:wt.cameraToCenterDistance,u_rotate_symbol:+_,u_aspect_ratio:wt.width/wt.height,u_fade_change:Y.options.fadeDuration?Y.symbolFadeChange:1,u_matrix:V,u_label_plane_matrix:Q,u_coord_matrix:re,u_is_text:+ue,u_pitch_with_map:+I,u_texsize:be,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Xu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Xu,u_up_vector:[0,-1,0]};return"globe"===vt.name&&(Ye.u_tile_id=[ye.canonical.x,ye.canonical.y,1<<ye.canonical.z],Ye.u_zoom_transition=Fe,Ye.u_inv_rot_matrix=ut,Ye.u_merc_center=et,Ye.u_camera_forward=wt._camera.forward(),Ye.u_ecef_origin=n.globeECEFOrigin(wt.globeMatrix,ye.toUnwrapped()),Ye.u_tile_matrix=Float32Array.from(wt.globeMatrix),Ye.u_up_vector=ft),Ye},go=(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt,wt)=>n.extend(zh(k,d,_,I,Y,V,Q,re,ue,be,Fe,et,ut,ft,vt,wt),{u_gamma_scale:I?Y.transform.cameraToCenterDistance*Math.cos(Y.terrain?0:Y.transform._pitch):1,u_device_pixel_ratio:n.exported.devicePixelRatio,u_is_halo:+ye}),Yc=(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe,et,ut,ft,vt)=>n.extend(go(k,d,_,I,Y,V,Q,re,!0,ue,!0,ye,Fe,et,ut,ft,vt),{u_texsize_icon:be,u_texture_icon:1}),ul=(k,d,_)=>({u_matrix:k,u_opacity:d,u_color:_}),Bf=(k,d,_,I,Y)=>n.extend(function(V,Q,re){const ue=Q.imageManager.getPattern(V.toString()),{width:be,height:ye}=Q.imageManager.getPixelSize(),Fe=Math.pow(2,re.tileID.overscaledZ),et=re.tileSize*Math.pow(2,Q.transform.tileZoom)/Fe,ut=et*(re.tileID.canonical.x+re.tileID.wrap*Fe),ft=et*re.tileID.canonical.y;return{u_image:0,u_pattern_tl:ue.tl,u_pattern_br:ue.br,u_texsize:[be,ye],u_pattern_size:ue.displaySize,u_tile_units_to_pixels:1/Fn(re,1,Q.transform.tileZoom),u_pixel_coord_upper:[ut>>16,ft>>16],u_pixel_coord_lower:[65535&ut,65535&ft]}}(I,_,Y),{u_matrix:k,u_opacity:d}),Vo={fillExtrusion:k=>({u_matrix:new n.UniformMatrix4f(k),u_lightpos:new n.Uniform3f(k),u_lightintensity:new n.Uniform1f(k),u_lightcolor:new n.Uniform3f(k),u_vertical_gradient:new n.Uniform1f(k),u_opacity:new n.Uniform1f(k),u_edge_radius:new n.Uniform1f(k),u_ao:new n.Uniform2f(k),u_tile_id:new n.Uniform3f(k),u_zoom_transition:new n.Uniform1f(k),u_inv_rot_matrix:new n.UniformMatrix4f(k),u_merc_center:new n.Uniform2f(k),u_up_dir:new n.Uniform3f(k),u_height_lift:new n.Uniform1f(k)}),fillExtrusionPattern:k=>({u_matrix:new n.UniformMatrix4f(k),u_lightpos:new n.Uniform3f(k),u_lightintensity:new n.Uniform1f(k),u_lightcolor:new n.Uniform3f(k),u_vertical_gradient:new n.Uniform1f(k),u_height_factor:new n.Uniform1f(k),u_edge_radius:new n.Uniform1f(k),u_ao:new n.Uniform2f(k),u_tile_id:new n.Uniform3f(k),u_zoom_transition:new n.Uniform1f(k),u_inv_rot_matrix:new n.UniformMatrix4f(k),u_merc_center:new n.Uniform2f(k),u_up_dir:new n.Uniform3f(k),u_height_lift:new n.Uniform1f(k),u_image:new n.Uniform1i(k),u_texsize:new n.Uniform2f(k),u_pixel_coord_upper:new n.Uniform2f(k),u_pixel_coord_lower:new n.Uniform2f(k),u_tile_units_to_pixels:new n.Uniform1f(k),u_opacity:new n.Uniform1f(k)}),fill:k=>({u_matrix:new n.UniformMatrix4f(k)}),fillPattern:k=>({u_matrix:new n.UniformMatrix4f(k),u_image:new n.Uniform1i(k),u_texsize:new n.Uniform2f(k),u_pixel_coord_upper:new n.Uniform2f(k),u_pixel_coord_lower:new n.Uniform2f(k),u_tile_units_to_pixels:new n.Uniform1f(k)}),fillOutline:k=>({u_matrix:new n.UniformMatrix4f(k),u_world:new n.Uniform2f(k)}),fillOutlinePattern:k=>({u_matrix:new n.UniformMatrix4f(k),u_world:new n.Uniform2f(k),u_image:new n.Uniform1i(k),u_texsize:new n.Uniform2f(k),u_pixel_coord_upper:new n.Uniform2f(k),u_pixel_coord_lower:new n.Uniform2f(k),u_tile_units_to_pixels:new n.Uniform1f(k)}),circle:k=>({u_camera_to_center_distance:new n.Uniform1f(k),u_extrude_scale:new n.UniformMatrix2f(k),u_device_pixel_ratio:new n.Uniform1f(k),u_matrix:new n.UniformMatrix4f(k),u_inv_rot_matrix:new n.UniformMatrix4f(k),u_merc_center:new n.Uniform2f(k),u_tile_id:new n.Uniform3f(k),u_zoom_transition:new n.Uniform1f(k),u_up_dir:new n.Uniform3f(k)}),collisionBox:k=>({u_matrix:new n.UniformMatrix4f(k),u_camera_to_center_distance:new n.Uniform1f(k),u_extrude_scale:new n.Uniform2f(k)}),collisionCircle:k=>({u_matrix:new n.UniformMatrix4f(k),u_inv_matrix:new n.UniformMatrix4f(k),u_camera_to_center_distance:new n.Uniform1f(k),u_viewport_size:new n.Uniform2f(k)}),debug:k=>({u_color:new n.UniformColor(k),u_matrix:new n.UniformMatrix4f(k),u_overlay:new n.Uniform1i(k),u_overlay_scale:new n.Uniform1f(k)}),clippingMask:k=>({u_matrix:new n.UniformMatrix4f(k)}),heatmap:k=>({u_extrude_scale:new n.Uniform1f(k),u_intensity:new n.Uniform1f(k),u_matrix:new n.UniformMatrix4f(k),u_inv_rot_matrix:new n.UniformMatrix4f(k),u_merc_center:new n.Uniform2f(k),u_tile_id:new n.Uniform3f(k),u_zoom_transition:new n.Uniform1f(k),u_up_dir:new n.Uniform3f(k)}),heatmapTexture:k=>({u_image:new n.Uniform1i(k),u_color_ramp:new n.Uniform1i(k),u_opacity:new n.Uniform1f(k)}),hillshade:k=>({u_matrix:new n.UniformMatrix4f(k),u_image:new n.Uniform1i(k),u_latrange:new n.Uniform2f(k),u_light:new n.Uniform2f(k),u_shadow:new n.UniformColor(k),u_highlight:new n.UniformColor(k),u_accent:new n.UniformColor(k)}),hillshadePrepare:k=>({u_matrix:new n.UniformMatrix4f(k),u_image:new n.Uniform1i(k),u_dimension:new n.Uniform2f(k),u_zoom:new n.Uniform1f(k),u_unpack:new n.Uniform4f(k)}),line:k=>({u_matrix:new n.UniformMatrix4f(k),u_pixels_to_tile_units:new n.UniformMatrix2f(k),u_device_pixel_ratio:new n.Uniform1f(k),u_units_to_pixels:new n.Uniform2f(k),u_dash_image:new n.Uniform1i(k),u_gradient_image:new n.Uniform1i(k),u_image_height:new n.Uniform1f(k),u_texsize:new n.Uniform2f(k),u_tile_units_to_pixels:new n.Uniform1f(k),u_alpha_discard_threshold:new n.Uniform1f(k),u_trim_offset:new n.Uniform2f(k)}),linePattern:k=>({u_matrix:new n.UniformMatrix4f(k),u_texsize:new n.Uniform2f(k),u_pixels_to_tile_units:new n.UniformMatrix2f(k),u_device_pixel_ratio:new n.Uniform1f(k),u_image:new n.Uniform1i(k),u_units_to_pixels:new n.Uniform2f(k),u_tile_units_to_pixels:new n.Uniform1f(k),u_alpha_discard_threshold:new n.Uniform1f(k)}),raster:k=>({u_matrix:new n.UniformMatrix4f(k),u_tl_parent:new n.Uniform2f(k),u_scale_parent:new n.Uniform1f(k),u_fade_t:new n.Uniform1f(k),u_opacity:new n.Uniform1f(k),u_image0:new n.Uniform1i(k),u_image1:new n.Uniform1i(k),u_brightness_low:new n.Uniform1f(k),u_brightness_high:new n.Uniform1f(k),u_saturation_factor:new n.Uniform1f(k),u_contrast_factor:new n.Uniform1f(k),u_spin_weights:new n.Uniform3f(k),u_perspective_transform:new n.Uniform2f(k)}),symbolIcon:k=>({u_is_size_zoom_constant:new n.Uniform1i(k),u_is_size_feature_constant:new n.Uniform1i(k),u_size_t:new n.Uniform1f(k),u_size:new n.Uniform1f(k),u_camera_to_center_distance:new n.Uniform1f(k),u_rotate_symbol:new n.Uniform1i(k),u_aspect_ratio:new n.Uniform1f(k),u_fade_change:new n.Uniform1f(k),u_matrix:new n.UniformMatrix4f(k),u_label_plane_matrix:new n.UniformMatrix4f(k),u_coord_matrix:new n.UniformMatrix4f(k),u_is_text:new n.Uniform1i(k),u_pitch_with_map:new n.Uniform1i(k),u_texsize:new n.Uniform2f(k),u_tile_id:new n.Uniform3f(k),u_zoom_transition:new n.Uniform1f(k),u_inv_rot_matrix:new n.UniformMatrix4f(k),u_merc_center:new n.Uniform2f(k),u_camera_forward:new n.Uniform3f(k),u_tile_matrix:new n.UniformMatrix4f(k),u_up_vector:new n.Uniform3f(k),u_ecef_origin:new n.Uniform3f(k),u_texture:new n.Uniform1i(k)}),symbolSDF:k=>({u_is_size_zoom_constant:new n.Uniform1i(k),u_is_size_feature_constant:new n.Uniform1i(k),u_size_t:new n.Uniform1f(k),u_size:new n.Uniform1f(k),u_camera_to_center_distance:new n.Uniform1f(k),u_rotate_symbol:new n.Uniform1i(k),u_aspect_ratio:new n.Uniform1f(k),u_fade_change:new n.Uniform1f(k),u_matrix:new n.UniformMatrix4f(k),u_label_plane_matrix:new n.UniformMatrix4f(k),u_coord_matrix:new n.UniformMatrix4f(k),u_is_text:new n.Uniform1i(k),u_pitch_with_map:new n.Uniform1i(k),u_texsize:new n.Uniform2f(k),u_texture:new n.Uniform1i(k),u_gamma_scale:new n.Uniform1f(k),u_device_pixel_ratio:new n.Uniform1f(k),u_tile_id:new n.Uniform3f(k),u_zoom_transition:new n.Uniform1f(k),u_inv_rot_matrix:new n.UniformMatrix4f(k),u_merc_center:new n.Uniform2f(k),u_camera_forward:new n.Uniform3f(k),u_tile_matrix:new n.UniformMatrix4f(k),u_up_vector:new n.Uniform3f(k),u_ecef_origin:new n.Uniform3f(k),u_is_halo:new n.Uniform1i(k)}),symbolTextAndIcon:k=>({u_is_size_zoom_constant:new n.Uniform1i(k),u_is_size_feature_constant:new n.Uniform1i(k),u_size_t:new n.Uniform1f(k),u_size:new n.Uniform1f(k),u_camera_to_center_distance:new n.Uniform1f(k),u_rotate_symbol:new n.Uniform1i(k),u_aspect_ratio:new n.Uniform1f(k),u_fade_change:new n.Uniform1f(k),u_matrix:new n.UniformMatrix4f(k),u_label_plane_matrix:new n.UniformMatrix4f(k),u_coord_matrix:new n.UniformMatrix4f(k),u_is_text:new n.Uniform1i(k),u_pitch_with_map:new n.Uniform1i(k),u_texsize:new n.Uniform2f(k),u_texsize_icon:new n.Uniform2f(k),u_texture:new n.Uniform1i(k),u_texture_icon:new n.Uniform1i(k),u_gamma_scale:new n.Uniform1f(k),u_device_pixel_ratio:new n.Uniform1f(k),u_is_halo:new n.Uniform1i(k)}),background:k=>({u_matrix:new n.UniformMatrix4f(k),u_opacity:new n.Uniform1f(k),u_color:new n.UniformColor(k)}),backgroundPattern:k=>({u_matrix:new n.UniformMatrix4f(k),u_opacity:new n.Uniform1f(k),u_image:new n.Uniform1i(k),u_pattern_tl:new n.Uniform2f(k),u_pattern_br:new n.Uniform2f(k),u_texsize:new n.Uniform2f(k),u_pattern_size:new n.Uniform2f(k),u_pixel_coord_upper:new n.Uniform2f(k),u_pixel_coord_lower:new n.Uniform2f(k),u_tile_units_to_pixels:new n.Uniform1f(k)}),terrainRaster:pr,terrainDepth:pr,skybox:k=>({u_matrix:new n.UniformMatrix4f(k),u_sun_direction:new n.Uniform3f(k),u_cubemap:new n.Uniform1i(k),u_opacity:new n.Uniform1f(k),u_temporal_offset:new n.Uniform1f(k)}),skyboxGradient:k=>({u_matrix:new n.UniformMatrix4f(k),u_color_ramp:new n.Uniform1i(k),u_center_direction:new n.Uniform3f(k),u_radius:new n.Uniform1f(k),u_opacity:new n.Uniform1f(k),u_temporal_offset:new n.Uniform1f(k)}),skyboxCapture:k=>({u_matrix_3f:new n.UniformMatrix3f(k),u_sun_direction:new n.Uniform3f(k),u_sun_intensity:new n.Uniform1f(k),u_color_tint_r:new n.Uniform4f(k),u_color_tint_m:new n.Uniform4f(k),u_luminance:new n.Uniform1f(k)}),globeRaster:k=>({u_proj_matrix:new n.UniformMatrix4f(k),u_globe_matrix:new n.UniformMatrix4f(k),u_normalize_matrix:new n.UniformMatrix4f(k),u_merc_matrix:new n.UniformMatrix4f(k),u_zoom_transition:new n.Uniform1f(k),u_merc_center:new n.Uniform2f(k),u_image0:new n.Uniform1i(k),u_grid_matrix:new n.UniformMatrix3f(k),u_skirt_height:new n.Uniform1f(k),u_frustum_tl:new n.Uniform3f(k),u_frustum_tr:new n.Uniform3f(k),u_frustum_br:new n.Uniform3f(k),u_frustum_bl:new n.Uniform3f(k),u_globe_pos:new n.Uniform3f(k),u_globe_radius:new n.Uniform1f(k),u_viewport:new n.Uniform2f(k)}),globeAtmosphere:k=>({u_frustum_tl:new n.Uniform3f(k),u_frustum_tr:new n.Uniform3f(k),u_frustum_br:new n.Uniform3f(k),u_frustum_bl:new n.Uniform3f(k),u_horizon:new n.Uniform1f(k),u_transition:new n.Uniform1f(k),u_fadeout_range:new n.Uniform1f(k),u_color:new n.Uniform4f(k),u_high_color:new n.Uniform4f(k),u_space_color:new n.Uniform4f(k),u_star_intensity:new n.Uniform1f(k),u_star_density:new n.Uniform1f(k),u_star_size:new n.Uniform1f(k),u_temporal_offset:new n.Uniform1f(k),u_horizon_angle:new n.Uniform1f(k),u_rotation_matrix:new n.UniformMatrix4f(k)})};let Ma;function wl(k,d,_,I,Y,V,Q){const re=k.context,ue=re.gl,be=k.transform,ye=k.useProgram("collisionBox"),Fe=[];let et=0,ut=0;for(let xt=0;xt<I.length;xt++){const fi=I[xt],pi=d.getTile(fi),ai=pi.getBucket(_);if(!ai)continue;const Ii=qt(fi,ai,be);let Ei=Ii;0===Y[0]&&0===Y[1]||(Ei=k.translatePosMatrix(Ii,pi,Y,V));const Yi=Q?ai.textCollisionBox:ai.iconCollisionBox,Gn=ai.collisionCircleArray;if(Gn.length>0){const Ni=n.create(),dn=Ei;n.mul(Ni,ai.placementInvProjMatrix,be.glCoordMatrix),n.mul(Ni,Ni,ai.placementViewportMatrix),Fe.push({circleArray:Gn,circleOffset:ut,transform:dn,invTransform:Ni,projection:ai.getProjection()}),et+=Gn.length/4,ut=et}Yi&&(k.terrain&&k.terrain.setupElevationDraw(pi,ye),ye.draw(re,ue.LINES,n.DepthMode.disabled,n.StencilMode.disabled,k.colorModeForRenderPass(),n.CullFaceMode.disabled,Ho(Ei,be,pi,ai.getProjection()),_.id,Yi.layoutVertexBuffer,Yi.indexBuffer,Yi.segments,null,be.zoom,null,[Yi.collisionVertexBuffer,Yi.collisionVertexBufferExt]))}if(!Q||!Fe.length)return;const ft=k.useProgram("collisionCircle"),vt=new n.StructArrayLayout2f1f2i16;vt.resize(4*et),vt._trim();let wt=0;for(const xt of Fe)for(let fi=0;fi<xt.circleArray.length/4;fi++){const pi=4*fi,ai=xt.circleArray[pi+0],Ii=xt.circleArray[pi+1],Ei=xt.circleArray[pi+2],Yi=xt.circleArray[pi+3];vt.emplace(wt++,ai,Ii,Ei,Yi,0),vt.emplace(wt++,ai,Ii,Ei,Yi,1),vt.emplace(wt++,ai,Ii,Ei,Yi,2),vt.emplace(wt++,ai,Ii,Ei,Yi,3)}(!Ma||Ma.length<2*et)&&(Ma=function(xt){const fi=2*xt,pi=new n.StructArrayLayout3ui6;pi.resize(fi),pi._trim();for(let ai=0;ai<fi;ai++){const Ii=6*ai;pi.uint16[Ii+0]=4*ai+0,pi.uint16[Ii+1]=4*ai+1,pi.uint16[Ii+2]=4*ai+2,pi.uint16[Ii+3]=4*ai+2,pi.uint16[Ii+4]=4*ai+3,pi.uint16[Ii+5]=4*ai+0}return pi}(et));const Ye=re.createIndexBuffer(Ma,!0),ht=re.createVertexBuffer(vt,n.collisionCircleLayout.members,!0);for(const xt of Fe){const fi={u_matrix:xt.transform,u_inv_matrix:xt.invTransform,u_camera_to_center_distance:(zt=be).getCameraToCenterDistance(xt.projection),u_viewport_size:[zt.width,zt.height]};ft.draw(re,ue.TRIANGLES,n.DepthMode.disabled,n.StencilMode.disabled,k.colorModeForRenderPass(),n.CullFaceMode.disabled,fi,_.id,ht,Ye,n.SegmentVector.simpleSegment(0,2*xt.circleOffset,xt.circleArray.length,xt.circleArray.length/2),null,be.zoom)}var zt;ht.destroy(),Ye.destroy()}const hl=n.create();function oo({width:k,height:d,anchor:_,textOffset:I,textScale:Y},V){const{horizontalAlign:Q,verticalAlign:re}=n.getAnchorAlignment(_),ue=-(Q-.5)*k,be=-(re-.5)*d,ye=n.evaluateVariableOffset(_,I);return new n.Point((ue/Y+ye[0])*V,(be/Y+ye[1])*V)}function wd(k,d,_,I,Y,V,Q,re,ue,be,ye){const Fe=k.text.placedSymbolArray,et=k.text.dynamicLayoutVertexArray,ut=k.icon.dynamicLayoutVertexArray,ft={},vt=k.getProjection(),wt=Di(re,vt,V),Ye=V.elevation,ht=vt.upVectorScale(re.canonical,V.center.lat,V.worldSize).metersToTile;et.clear();for(let zt=0;zt<Fe.length;zt++){const xt=Fe.get(zt),{tileAnchorX:fi,tileAnchorY:pi,numGlyphs:ai}=xt,Ii=xt.hidden||!xt.crossTileID||k.allowVerticalPlacement&&!xt.placedOrientation?null:I[xt.crossTileID];if(Ii){let Ei=0,Yi=0,Gn=0;if(Ye){const Hn=Ye?Ye.getAtTileOffset(re,fi,pi):0,[Rr,ms,Sr]=vt.upVector(re.canonical,fi,pi);Ei=Hn*Rr*ht,Yi=Hn*ms*ht,Gn=Hn*Sr*ht}let[Ni,dn,Vi,Dn]=J(xt.projectedAnchorX+Ei,xt.projectedAnchorY+Yi,xt.projectedAnchorZ+Gn,_?wt:Q);const Wi=ne(V.getCameraToCenterDistance(vt),Dn);let on=Y.evaluateSizeForFeature(k.textSizeData,be,xt)*Wi/n.ONE_EM;_&&(on*=k.tilePixelRatio/ue);const Wn=oo(Ii,on);_?(({x:Ni,y:dn,z:Vi}=vt.projectTilePoint(fi+Wn.x,pi+Wn.y,re.canonical)),[Ni,dn,Vi]=J(Ni+Ei,dn+Yi,Vi+Gn,Q)):(d&&Wn._rotate(-V.angle),Ni+=Wn.x,dn+=Wn.y,Vi=0);const Ln=k.allowVerticalPlacement&&xt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0;for(let Hn=0;Hn<ai;Hn++)n.addDynamicAttributes(et,Ni,dn,Vi,Ln);ye&&xt.associatedIconIndex>=0&&(ft[xt.associatedIconIndex]={x:Ni,y:dn,z:Vi,angle:Ln})}else we(ai,et)}if(ye){ut.clear();const zt=k.icon.placedSymbolArray;for(let xt=0;xt<zt.length;xt++){const fi=zt.get(xt),{numGlyphs:pi}=fi,ai=ft[xt];if(fi.hidden||!ai)we(pi,ut);else{const{x:Ii,y:Ei,z:Yi,angle:Gn}=ai;for(let Ni=0;Ni<pi;Ni++)n.addDynamicAttributes(ut,Ii,Ei,Yi,Gn)}}k.icon.dynamicLayoutVertexBuffer.updateData(ut)}k.text.dynamicLayoutVertexBuffer.updateData(et)}function nu(k,d,_){return _.iconsInText&&d?"symbolTextAndIcon":k?"symbolSDF":"symbolIcon"}function Jl(k,d,_,I,Y,V,Q,re,ue,be,ye,Fe){const et=k.context,ut=et.gl,ft=k.transform,vt="map"===re,wt="map"===ue,Ye=vt&&"point"!==_.layout.get("symbol-placement"),ht=vt&&!wt&&!Ye,zt=void 0!==_.layout.get("symbol-sort-key").constantOr(1);let xt=!1;const fi=k.depthModeForSublayer(0,n.DepthMode.ReadOnly),pi=[n.mercatorXfromLng(ft.center.lng),n.mercatorYfromLat(ft.center.lat)],ai=_.layout.get("text-variable-anchor"),Ii="globe"===ft.projection.name,Ei=[],Yi=[0,-1,0];let Gn=Yi;!Ii&&!ft.mercatorFromTransition||vt||(Gn=function(Ni){const dn=Ni._camera.getWorldToCamera(Ni.worldSize,1),Vi=n.multiply([],dn,Ni.globeMatrix);n.invert(Vi,Vi);const Dn=[0,0,0],Wi=[0,1,0,0];return n.transformMat4$1(Wi,Wi,Vi),Dn[0]=Wi[0],Dn[1]=Wi[1],Dn[2]=Wi[2],n.normalize(Dn,Dn),Dn}(ft));for(const Ni of I){const dn=d.getTile(Ni),Vi=dn.getBucket(_);if(!Vi||"mercator"===Vi.projection.name&&Ii)continue;const Dn=Y?Vi.text:Vi.icon;if(!Dn||Vi.fullyClipped||!Dn.segments.get().length)continue;const Wi=Dn.programConfigurations.get(_.id),on=Y||Vi.sdfIcons,Wn=Y?Vi.textSizeData:Vi.iconSizeData,Ln=wt||0!==ft.pitch,Hn=n.evaluateSizeForZoom(Wn,ft.zoom);let Rr,ms,Sr,Ir,xs=[0,0],cs=null;if(Y)ms=dn.glyphAtlasTexture,Sr=ut.LINEAR,Rr=dn.glyphAtlasTexture.size,Vi.iconsInText&&(xs=dn.imageAtlasTexture.size,cs=dn.imageAtlasTexture,Ir=Ln||k.options.rotating||k.options.zooming||"composite"===Wn.kind||"camera"===Wn.kind?ut.LINEAR:ut.NEAREST);else{const tc=1!==_.layout.get("icon-size").constantOr(0)||Vi.iconsNeedLinear;ms=dn.imageAtlasTexture,Sr=on||k.options.rotating||k.options.zooming||tc||Ln?ut.LINEAR:ut.NEAREST,Rr=dn.imageAtlasTexture.size}const zr="globe"===Vi.projection.name,Qs=zr?Gn:Yi,Za=zr?n.globeToMercatorTransition(ft.zoom):0,eo=Di(Ni,Vi.getProjection(),ft),no=ft.calculatePixelsToTileUnitsMatrix(dn),jc=B(eo,dn.tileID.canonical,wt,vt,ft,Vi.getProjection(),no),Wo=k.terrain&&wt&&Ye?n.invert(n.create(),jc):hl,ua=K(eo,dn.tileID.canonical,wt,vt,ft,Vi.getProjection(),no),bh=ai&&Vi.hasTextData(),_o="none"!==_.layout.get("icon-text-fit")&&bh&&Vi.hasIconData();if(Ye){const tc=ft.elevation,Gh=tc?tc.getAtTileOffsetFunc(Ni,ft.center.lat,ft.worldSize,Vi.getProjection()):null,Ou=H(eo,dn.tileID.canonical,wt,vt,ft,Vi.getProjection(),no);xe(Vi,eo,k,Y,Ou,ua,wt,be,Gh,Ni)}const Ca=Ye||Y&&ai||_o,Da=k.translatePosMatrix(eo,dn,V,Q),ro=Ca?hl:jc,Wc=k.translatePosMatrix(ua,dn,V,Q,!0),to=Vi.getProjection().createInversionMatrix(ft,Ni.canonical),cu=[];k.terrainRenderModeElevated()&&wt&&cu.push("PITCH_WITH_MAP_TERRAIN"),zr&&cu.push("PROJECTION_GLOBE_VIEW"),Ca&&cu.push("PROJECTED_POS_ON_VIEWPORT");const uu=on&&0!==_.paint.get(Y?"text-halo-width":"icon-halo-width").constantOr(1);let To;To=on?Vi.iconsInText?Yc(Wn.kind,Hn,ht,wt,k,Da,ro,Wc,Rr,xs,Ni,Za,pi,to,Qs,Vi.getProjection()):go(Wn.kind,Hn,ht,wt,k,Da,ro,Wc,Y,Rr,!0,Ni,Za,pi,to,Qs,Vi.getProjection()):zh(Wn.kind,Hn,ht,wt,k,Da,ro,Wc,Y,Rr,Ni,Za,pi,to,Qs,Vi.getProjection());const wh={program:k.useProgram(nu(on,Y,Vi),Wi,cu),buffers:Dn,uniformValues:To,atlasTexture:ms,atlasTextureIcon:cs,atlasInterpolation:Sr,atlasInterpolationIcon:Ir,isSDF:on,hasHalo:uu,tile:dn,labelPlaneMatrixInv:Wo};if(zt&&Vi.canOverlap){xt=!0;const tc=Dn.segments.get();for(const Gh of tc)Ei.push({segments:new n.SegmentVector([Gh]),sortKey:Gh.sortKey,state:wh})}else Ei.push({segments:Dn.segments,sortKey:0,state:wh})}xt&&Ei.sort((Ni,dn)=>Ni.sortKey-dn.sortKey);for(const Ni of Ei){const dn=Ni.state;if(k.terrain&&k.terrain.setupElevationDraw(dn.tile,dn.program,{useDepthForOcclusion:!Ii,labelPlaneMatrixInv:dn.labelPlaneMatrixInv}),et.activeTexture.set(ut.TEXTURE0),dn.atlasTexture.bind(dn.atlasInterpolation,ut.CLAMP_TO_EDGE),dn.atlasTextureIcon&&(et.activeTexture.set(ut.TEXTURE1),dn.atlasTextureIcon&&dn.atlasTextureIcon.bind(dn.atlasInterpolationIcon,ut.CLAMP_TO_EDGE)),dn.isSDF){const Vi=dn.uniformValues;dn.hasHalo&&(Vi.u_is_halo=1,Cu(dn.buffers,Ni.segments,_,k,dn.program,fi,ye,Fe,Vi)),Vi.u_is_halo=0}Cu(dn.buffers,Ni.segments,_,k,dn.program,fi,ye,Fe,dn.uniformValues)}}function Cu(k,d,_,I,Y,V,Q,re,ue){const be=I.context,ye=[k.dynamicLayoutVertexBuffer,k.opacityVertexBuffer,k.globeExtVertexBuffer];Y.draw(be,be.gl.TRIANGLES,V,Q,re,n.CullFaceMode.disabled,ue,_.id,k.layoutVertexBuffer,k.indexBuffer,d,_.paint,I.transform.zoom,k.programConfigurations.get(_.id),ye)}function Zu(k,d,_,I,Y,V,Q){const re=k.context.gl,ue=_.paint.get("fill-pattern"),be=ue&&ue.constantOr(1);let ye,Fe,et,ut,ft;Q?(Fe=be&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ye=re.LINES):(Fe=be?"fillPattern":"fill",ye=re.TRIANGLES);for(const vt of I){const wt=d.getTile(vt);if(be&&!wt.patternsLoaded())continue;const Ye=wt.getBucket(_);if(!Ye)continue;k.prepareDrawTile();const ht=Ye.programConfigurations.get(_.id),zt=k.useProgram(Fe,ht);be&&(k.context.activeTexture.set(re.TEXTURE0),wt.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),ht.updatePaintBuffers());const xt=ue.constantOr(null);if(xt&&wt.imageAtlas){const pi=wt.imageAtlas.patternPositions[xt.toString()];pi&&ht.setConstantPatternPositions(pi)}const fi=k.translatePosMatrix(vt.projMatrix,wt,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor"));if(Q){ut=Ye.indexBuffer2,ft=Ye.segments2;const pi=k.terrain&&k.terrain.renderingToTexture?k.terrain.drapeBufferSize:[re.drawingBufferWidth,re.drawingBufferHeight];et="fillOutlinePattern"===Fe&&be?ll(fi,k,wt,pi):Rl(fi,pi)}else ut=Ye.indexBuffer,ft=Ye.segments,et=be?Ol(fi,k,wt):Ml(fi);k.prepareDrawProgram(k.context,zt,vt.toUnwrapped()),zt.draw(k.context,ye,Y,k.stencilModeForClipping(vt),V,n.CullFaceMode.disabled,et,_.id,Ye.layoutVertexBuffer,ut,ft,_.paint,k.transform.zoom,ht)}}function Eu(k,d,_,I,Y,V,Q){const re=k.context,ue=re.gl,be=k.transform,ye=_.paint.get("fill-extrusion-pattern"),Fe=ye.constantOr(1),et=_.paint.get("fill-extrusion-opacity"),ut=[_.paint.get("fill-extrusion-ambient-occlusion-intensity"),_.paint.get("fill-extrusion-ambient-occlusion-radius")],ft=_.layout.get("fill-extrusion-edge-radius"),vt=ft>0&&!_.paint.get("fill-extrusion-rounded-roof"),wt=vt?0:ft,Ye="globe"===be.projection.name?n.fillExtrusionHeightLift():0,ht="globe"===be.projection.name,zt=ht?n.globeToMercatorTransition(be.zoom):0,xt=[n.mercatorXfromLng(be.center.lng),n.mercatorYfromLat(be.center.lat)],fi=[];ht&&fi.push("PROJECTION_GLOBE_VIEW"),ut[0]>0&&fi.push("FAUX_AO"),vt&&fi.push("ZERO_ROOF_RADIUS");for(const pi of I){const ai=d.getTile(pi),Ii=ai.getBucket(_);if(!Ii||Ii.projection.name!==be.projection.name)continue;const Ei=Ii.programConfigurations.get(_.id),Yi=k.useProgram(Fe?"fillExtrusionPattern":"fillExtrusion",Ei,fi);if(k.terrain){const on=k.terrain;if(k.style.terrainSetForDrapingOnly())on.setupElevationDraw(ai,Yi,{useMeterToDem:!0});else{if(!Ii.enableTerrain)continue;if(on.setupElevationDraw(ai,Yi,{useMeterToDem:!0}),Li(re,d,pi,Ii,_,on),!Ii.centroidVertexBuffer){const Wn=Yi.attributes.a_centroid_pos;void 0!==Wn&&ue.vertexAttrib2f(Wn,0,0)}}}Fe&&(k.context.activeTexture.set(ue.TEXTURE0),ai.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Ei.updatePaintBuffers());const Gn=ye.constantOr(null);if(Gn&&ai.imageAtlas){const on=ai.imageAtlas.patternPositions[Gn.toString()];on&&Ei.setConstantPatternPositions(on)}const Ni=k.translatePosMatrix(pi.projMatrix,ai,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),dn=be.projection.createInversionMatrix(be,pi.canonical),Vi=_.paint.get("fill-extrusion-vertical-gradient"),Dn=Fe?bu(Ni,k,Vi,et,ut,wt,pi,ai,Ye,zt,xt,dn):mh(Ni,k,Vi,et,ut,wt,pi,Ye,zt,xt,dn);k.prepareDrawProgram(re,Yi,pi.toUnwrapped());const Wi=[];k.terrain&&Wi.push(Ii.centroidVertexBuffer),ht&&Wi.push(Ii.layoutVertexExtBuffer),Yi.draw(re,re.gl.TRIANGLES,Y,V,Q,n.CullFaceMode.backCCW,Dn,_.id,Ii.layoutVertexBuffer,Ii.indexBuffer,Ii.segments,_.paint,k.transform.zoom,Ei,Wi)}}function Li(k,d,_,I,Y,V){const Q=[Ye=>{let ht=Ye.canonical.x-1,zt=Ye.wrap;return ht<0&&(ht=(1<<Ye.canonical.z)-1,zt--),new n.OverscaledTileID(Ye.overscaledZ,zt,Ye.canonical.z,ht,Ye.canonical.y)},Ye=>{let ht=Ye.canonical.x+1,zt=Ye.wrap;return ht===1<<Ye.canonical.z&&(ht=0,zt++),new n.OverscaledTileID(Ye.overscaledZ,zt,Ye.canonical.z,ht,Ye.canonical.y)},Ye=>new n.OverscaledTileID(Ye.overscaledZ,Ye.wrap,Ye.canonical.z,Ye.canonical.x,(0===Ye.canonical.y?1<<Ye.canonical.z:Ye.canonical.y)-1),Ye=>new n.OverscaledTileID(Ye.overscaledZ,Ye.wrap,Ye.canonical.z,Ye.canonical.x,Ye.canonical.y===(1<<Ye.canonical.z)-1?0:Ye.canonical.y+1)],re=Ye=>{const ht=d.getSource().minzoom,zt=fi=>{const pi=d.getTileByID(fi);if(pi&&pi.hasData())return pi.getBucket(Y)},xt=[0,-1,1];for(const fi of xt){if(Ye.overscaledZ+fi<ht)continue;const pi=zt(Ye.calculateScaledKey(Ye.overscaledZ+fi));if(pi)return pi}},ue=[0,0,0],be=(Ye,ht)=>(ue[0]=Math.min(Ye.min.y,ht.min.y),ue[1]=Math.max(Ye.max.y,ht.max.y),ue[2]=n.EXTENT-ht.min.x>Ye.max.x?ht.min.x-n.EXTENT:Ye.max.x,ue),ye=(Ye,ht)=>(ue[0]=Math.min(Ye.min.x,ht.min.x),ue[1]=Math.max(Ye.max.x,ht.max.x),ue[2]=n.EXTENT-ht.min.y>Ye.max.y?ht.min.y-n.EXTENT:Ye.max.y,ue),Fe=[(Ye,ht)=>be(Ye,ht),(Ye,ht)=>be(ht,Ye),(Ye,ht)=>ye(Ye,ht),(Ye,ht)=>ye(ht,Ye)],et=new n.Point(0,0);let ut,ft,vt;const wt=(Ye,ht,zt,xt,fi)=>{const pi=[[xt?zt:Ye,xt?Ye:zt,0],[xt?zt:ht,xt?ht:zt,0]],ai=fi<0?n.EXTENT+fi:fi,Ii=[xt?ai:(Ye+ht)/2,xt?(Ye+ht)/2:ai,0];return 0===zt&&fi<0||0!==zt&&fi>0?V.getForTilePoints(vt,[Ii],!0,ft):pi.push(Ii),V.getForTilePoints(_,pi,!0,ut),Math.max(pi[0][2],pi[1][2],Ii[2])/V.exaggeration()};for(let Ye=0;Ye<4;Ye++){const ht=(Ye<2?1:5)-Ye,zt=I.borders[Ye];if(0===zt.length)continue;const xt=vt=Q[Ye](_),fi=re(xt);if(!(fi&&fi instanceof n.FillExtrusionBucket&&fi.enableTerrain)||I.borderDoneWithNeighborZ[Ye]===fi.canonical.z&&fi.borderDoneWithNeighborZ[ht]===I.canonical.z||(ft=V.findDEMTileFor(xt),!ft||!ft.dem))continue;if(!ut){const Ei=V.findDEMTileFor(_);if(!Ei||!Ei.dem)return;ut=Ei}const pi=fi.borders[ht];let ai=0;const Ii=fi.borderDoneWithNeighborZ[ht]!==I.canonical.z;if(I.canonical.z===fi.canonical.z){for(let Ei=0;Ei<zt.length;Ei++){const Yi=I.featuresOnBorder[zt[Ei]],Gn=Yi.borders[Ye];let Ni;for(;ai<pi.length&&(Ni=fi.featuresOnBorder[pi[ai]],!(Ni.borders[ht][1]>Gn[0]+3));)Ii&&fi.encodeCentroid(void 0,Ni,!1),ai++;if(Ni&&ai<pi.length){const dn=ai;let Vi=0;for(;!(Ni.borders[ht][0]>Gn[1]-3)&&(Vi++,++ai!==pi.length);)Ni=fi.featuresOnBorder[pi[ai]];if(Ni=fi.featuresOnBorder[pi[dn]],Yi.intersectsCount()>1||Ni.intersectsCount()>1||1!==Vi){1!==Vi&&(ai=dn),I.encodeCentroid(void 0,Yi,!1),Ii&&fi.encodeCentroid(void 0,Ni,!1);continue}const Dn=Fe[Ye](Yi,Ni),Wi=Ye%2?n.EXTENT-1:0;et.x=wt(Dn[0],Math.min(n.EXTENT-1,Dn[1]),Wi,Ye<2,Dn[2]),et.y=0,I.encodeCentroid(et,Yi,!1),Ii&&fi.encodeCentroid(et,Ni,!1)}else I.encodeCentroid(void 0,Yi,!1)}I.borderDoneWithNeighborZ[Ye]=fi.canonical.z,I.needsCentroidUpdate=!0,Ii&&(fi.borderDoneWithNeighborZ[ht]=I.canonical.z,fi.needsCentroidUpdate=!0)}else{for(const Ei of zt)I.encodeCentroid(void 0,I.featuresOnBorder[Ei],!1);if(Ii){for(const Ei of pi)fi.encodeCentroid(void 0,fi.featuresOnBorder[Ei],!1);fi.borderDoneWithNeighborZ[ht]=I.canonical.z,fi.needsCentroidUpdate=!0}I.borderDoneWithNeighborZ[Ye]=fi.canonical.z,I.needsCentroidUpdate=!0}}(I.needsCentroidUpdate||!I.centroidVertexBuffer&&0!==I.centroidVertexArray.length)&&I.uploadCentroid(k)}const mn=new n.Color(1,0,0,1),un=new n.Color(0,1,0,1),Mr=new n.Color(0,0,1,1),Ls=new n.Color(1,0,1,1),_a=new n.Color(0,1,1,1);function zo(k,d,_){const I=k.context,Y=k.transform,V=I.gl,Q="globe"===Y.projection.name,re=Q?["PROJECTION_GLOBE_VIEW"]:null;let ue=_.projMatrix;if(Q&&n.globeToMercatorTransition(Y.zoom)>0){const Yi=n.transitionTileAABBinECEF(_.canonical,Y),Gn=n.globeDenormalizeECEF(Yi);ue=n.multiply(new Float32Array(16),Y.globeMatrix,Gn),n.multiply(ue,Y.projMatrix,ue)}const be=k.useProgram("debug",null,re),ye=d.getTileByID(_.key);k.terrain&&k.terrain.setupElevationDraw(ye,be);const Fe=n.DepthMode.disabled,et=n.StencilMode.disabled,ut=k.colorModeForRenderPass();I.activeTexture.set(V.TEXTURE0),k.emptyTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Q?ye._makeGlobeTileDebugBuffers(k.context,Y):ye._makeDebugTileBoundsBuffers(k.context,Y.projection);const vt=ye._tileDebugBuffer||k.debugBuffer,wt=ye._tileDebugIndexBuffer||k.debugIndexBuffer,Ye=ye._tileDebugSegments||k.debugSegments;be.draw(I,V.LINE_STRIP,Fe,et,ut,n.CullFaceMode.disabled,vc(ue,n.Color.red),"$debug",vt,wt,Ye,null,null,null,[ye._globeTileDebugBorderBuffer]);const ht=ye.latestRawTileData,zt=Math.floor((ht&&ht.byteLength||0)/1024),xt=d.getTile(_).tileSize,fi=512/Math.min(xt,512)*(_.overscaledZ/Y.zoom)*.5;let pi=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(pi+=` => ${_.overscaledZ}`),pi+=` ${zt}kb`,function(Yi,Gn){Yi.initDebugOverlayCanvas();const Ni=Yi.debugOverlayCanvas,dn=Yi.context.gl,Vi=Yi.debugOverlayCanvas.getContext("2d");Vi.clearRect(0,0,Ni.width,Ni.height),Vi.shadowColor="white",Vi.shadowBlur=2,Vi.lineWidth=1.5,Vi.strokeStyle="white",Vi.textBaseline="top",Vi.font="bold 36px Open Sans, sans-serif",Vi.fillText(Gn,5,5),Vi.strokeText(Gn,5,5),Yi.debugOverlayTexture.update(Ni),Yi.debugOverlayTexture.bind(dn.LINEAR,dn.CLAMP_TO_EDGE)}(k,pi);const ai=ye._tileDebugTextBuffer||k.debugBuffer,Ii=ye._tileDebugTextIndexBuffer||k.quadTriangleIndexBuffer,Ei=ye._tileDebugTextSegments||k.debugSegments;be.draw(I,V.TRIANGLES,Fe,et,n.ColorMode.alphaBlended,n.CullFaceMode.disabled,vc(ue,n.Color.transparent,fi),"$debug",ai,Ii,Ei,null,null,null,[ye._globeTileDebugTextBuffer])}function la(k,d,_,I){Yh(k,0,d+_/2,k.transform.width,_,I)}function Fl(k,d,_,I){Yh(k,d-_/2,0,_,k.transform.height,I)}function Yh(k,d,_,I,Y,V){const Q=k.context,re=Q.gl;re.enable(re.SCISSOR_TEST),re.scissor(d*n.exported.devicePixelRatio,_*n.exported.devicePixelRatio,I*n.exported.devicePixelRatio,Y*n.exported.devicePixelRatio),Q.clear({color:V}),re.disable(re.SCISSOR_TEST)}const dl=n.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ku}=dl;function ru(k,d,_,I){k.emplaceBack(d,_,I)}class xc{constructor(d){this.vertexArray=new n.StructArrayLayout3f12,this.indices=new n.StructArrayLayout3ui6,ru(this.vertexArray,-1,-1,1),ru(this.vertexArray,1,-1,1),ru(this.vertexArray,-1,1,1),ru(this.vertexArray,1,1,1),ru(this.vertexArray,-1,-1,-1),ru(this.vertexArray,1,-1,-1),ru(this.vertexArray,-1,1,-1),ru(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=d.createVertexBuffer(this.vertexArray,ku),this.indexBuffer=d.createIndexBuffer(this.indices),this.segment=n.SegmentVector.simpleSegment(0,0,36,12)}}function Ya(k,d,_,I,Y,V){const Q=k.gl,re=d.paint.get("sky-atmosphere-color"),ue=d.paint.get("sky-atmosphere-halo-color"),be=d.paint.get("sky-atmosphere-sun-intensity"),ye={u_matrix_3f:n.fromMat4(n.create$1(),I),u_sun_direction:Y,u_sun_intensity:be,u_color_tint_r:[(ft=re).r,ft.g,ft.b,ft.a],u_color_tint_m:[(vt=ue).r,vt.g,vt.b,vt.a],u_luminance:5e-5};var ft,vt;Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+V,d.skyboxTexture,0),_.draw(k,Q.TRIANGLES,n.DepthMode.disabled,n.StencilMode.disabled,n.ColorMode.unblended,n.CullFaceMode.frontCW,ye,"skyboxCapture",d.skyboxGeometry.vertexBuffer,d.skyboxGeometry.indexBuffer,d.skyboxGeometry.segment)}const Uo=n.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ya{constructor(d){const _=new n.StructArrayLayout5f20;_.emplaceBack(-1,1,1,0,0),_.emplaceBack(1,1,1,1,0),_.emplaceBack(1,-1,1,1,1),_.emplaceBack(-1,-1,1,0,1);const I=new n.StructArrayLayout3ui6;I.emplaceBack(0,1,2),I.emplaceBack(2,3,0),this.vertexBuffer=d.createVertexBuffer(_,Uo.members),this.indexBuffer=d.createIndexBuffer(I),this.segments=n.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const su={symbol:function(k,d,_,I,Y){if("translucent"!==k.renderPass)return;const V=n.StencilMode.disabled,Q=k.colorModeForRenderPass();_.layout.get("text-variable-anchor")&&function(re,ue,be,ye,Fe,et,ut){const ft=ue.transform,vt="map"===Fe,wt="map"===et;for(const Ye of re){const ht=ye.getTile(Ye),zt=ht.getBucket(be);if(!zt||!zt.text||!zt.text.segments.get().length)continue;const xt=n.evaluateSizeForZoom(zt.textSizeData,ft.zoom),fi=Di(Ye,zt.getProjection(),ft),pi=ft.calculatePixelsToTileUnitsMatrix(ht),ai=B(fi,ht.tileID.canonical,wt,vt,ft,zt.getProjection(),pi),Ii="none"!==be.layout.get("icon-text-fit")&&zt.hasIconData();if(xt){const Ei=Math.pow(2,ft.zoom-ht.tileID.overscaledZ);wd(zt,vt,wt,ut,n.symbolSize,ft,ai,Ye,Ei,xt,Ii)}}}(I,k,_,d,_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),Y),0!==_.paint.get("icon-opacity").constantOr(1)&&Jl(k,d,_,I,!1,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),_.layout.get("icon-rotation-alignment"),_.layout.get("icon-pitch-alignment"),_.layout.get("icon-keep-upright"),V,Q),0!==_.paint.get("text-opacity").constantOr(1)&&Jl(k,d,_,I,!0,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),_.layout.get("text-keep-upright"),V,Q),d.map.showCollisionBoxes&&(wl(k,d,_,I,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),!0),wl(k,d,_,I,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),!1))},circle:function(k,d,_,I){if("translucent"!==k.renderPass)return;const Y=_.paint.get("circle-opacity"),V=_.paint.get("circle-stroke-width"),Q=_.paint.get("circle-stroke-opacity"),re=void 0!==_.layout.get("circle-sort-key").constantOr(1);if(0===Y.constantOr(1)&&(0===V.constantOr(1)||0===Q.constantOr(1)))return;const ue=k.context,be=ue.gl,ye=k.transform,Fe=k.depthModeForSublayer(0,n.DepthMode.ReadOnly),et=n.StencilMode.disabled,ut=k.colorModeForRenderPass(),ft="globe"===ye.projection.name,vt=[n.mercatorXfromLng(ye.center.lng),n.mercatorYfromLat(ye.center.lat)],wt=[];for(let ht=0;ht<I.length;ht++){const zt=I[ht],xt=d.getTile(zt),fi=xt.getBucket(_);if(!fi||fi.projection.name!==ye.projection.name)continue;const pi=fi.programConfigurations.get(_.id),ai=Ll(_);ft&&ai.push("PROJECTION_GLOBE_VIEW");const Ii=k.useProgram("circle",pi,ai),Ei=fi.layoutVertexBuffer,Yi=fi.globeExtVertexBuffer,Gn=fi.indexBuffer,Ni=ye.projection.createInversionMatrix(ye,zt.canonical),dn={programConfiguration:pi,program:Ii,layoutVertexBuffer:Ei,globeExtVertexBuffer:Yi,indexBuffer:Gn,uniformValues:iu(k,zt,xt,Ni,vt,_),tile:xt};if(re){const Vi=fi.segments.get();for(const Dn of Vi)wt.push({segments:new n.SegmentVector([Dn]),sortKey:Dn.sortKey,state:dn})}else wt.push({segments:fi.segments,sortKey:0,state:dn})}re&&wt.sort((ht,zt)=>ht.sortKey-zt.sortKey);const Ye={useDepthForOcclusion:!ft};for(const ht of wt){const{programConfiguration:zt,program:xt,layoutVertexBuffer:fi,globeExtVertexBuffer:pi,indexBuffer:ai,uniformValues:Ii,tile:Ei}=ht.state,Yi=ht.segments;k.terrain&&k.terrain.setupElevationDraw(Ei,xt,Ye),k.prepareDrawProgram(ue,xt,Ei.tileID.toUnwrapped()),xt.draw(ue,be.TRIANGLES,Fe,et,ut,n.CullFaceMode.disabled,Ii,_.id,fi,ai,Yi,_.paint,ye.zoom,zt,[pi])}},heatmap:function(k,d,_,I){if(0!==_.paint.get("heatmap-opacity"))if("offscreen"===k.renderPass){const Y=k.context,V=Y.gl,Q=n.StencilMode.disabled,re=new n.ColorMode([V.ONE,V.ONE],n.Color.transparent,[!0,!0,!0,!0]);(function(ut,ft,vt,wt){const Ye=ut.gl,ht=ft.width*wt,zt=ft.height*wt;ut.activeTexture.set(Ye.TEXTURE1),ut.viewport.set([0,0,ht,zt]);let xt=vt.heatmapFbo;if(!xt||xt&&(xt.width!==ht||xt.height!==zt)){xt&&xt.destroy();const fi=Ye.createTexture();Ye.bindTexture(Ye.TEXTURE_2D,fi),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_WRAP_S,Ye.CLAMP_TO_EDGE),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_WRAP_T,Ye.CLAMP_TO_EDGE),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_MIN_FILTER,Ye.LINEAR),Ye.texParameteri(Ye.TEXTURE_2D,Ye.TEXTURE_MAG_FILTER,Ye.LINEAR),xt=vt.heatmapFbo=ut.createFramebuffer(ht,zt,!1),function(pi,ai,Ii,Ei,Yi,Gn){const Ni=pi.gl;Ni.texImage2D(Ni.TEXTURE_2D,0,pi.isWebGL2&&pi.extRenderToTextureHalfFloat?Ni.RGBA16F:Ni.RGBA,Yi,Gn,0,Ni.RGBA,pi.extRenderToTextureHalfFloat?pi.isWebGL2?Ni.HALF_FLOAT:pi.extTextureHalfFloat.HALF_FLOAT_OES:Ni.UNSIGNED_BYTE,null),Ei.colorAttachment.set(Ii)}(ut,0,fi,xt,ht,zt)}else Ye.bindTexture(Ye.TEXTURE_2D,xt.colorAttachment.get()),ut.bindFramebuffer.set(xt.framebuffer)})(Y,k,_,"globe"===k.transform.projection.name?.5:.25),Y.clear({color:n.Color.transparent});const ue=k.transform,be="globe"===ue.projection.name,ye=be?["PROJECTION_GLOBE_VIEW"]:null,Fe=be?n.CullFaceMode.frontCCW:n.CullFaceMode.disabled,et=[n.mercatorXfromLng(ue.center.lng),n.mercatorYfromLat(ue.center.lat)];for(let ut=0;ut<I.length;ut++){const ft=I[ut];if(d.hasRenderableParent(ft))continue;const vt=d.getTile(ft),wt=vt.getBucket(_);if(!wt||wt.projection.name!==ue.projection.name)continue;const Ye=wt.programConfigurations.get(_.id),ht=k.useProgram("heatmap",Ye,ye),{zoom:zt}=k.transform;k.terrain&&k.terrain.setupElevationDraw(vt,ht),k.prepareDrawProgram(Y,ht,ft.toUnwrapped());const xt=ue.projection.createInversionMatrix(ue,ft.canonical);ht.draw(Y,V.TRIANGLES,n.DepthMode.disabled,Q,re,Fe,wu(k,ft,vt,xt,et,zt,_.paint.get("heatmap-intensity")),_.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,_.paint,k.transform.zoom,Ye,be?[wt.globeExtVertexBuffer]:null)}Y.viewport.set([0,0,k.width,k.height])}else"translucent"===k.renderPass&&(k.context.setColorMode(k.colorModeForRenderPass()),function(Y,V){const Q=Y.context,re=Q.gl,ue=V.heatmapFbo;if(!ue)return;Q.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,ue.colorAttachment.get()),Q.activeTexture.set(re.TEXTURE1);let be=V.colorRampTexture;be||(be=V.colorRampTexture=new n.Texture(Q,V.colorRamp,re.RGBA)),be.bind(re.LINEAR,re.CLAMP_TO_EDGE),Y.useProgram("heatmapTexture").draw(Q,re.TRIANGLES,n.DepthMode.disabled,n.StencilMode.disabled,Y.colorModeForRenderPass(),n.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:V.paint.get("heatmap-opacity")},V.id,Y.viewportBuffer,Y.quadTriangleIndexBuffer,Y.viewportSegments,V.paint,Y.transform.zoom)}(k,_))},line:function(k,d,_,I){if("translucent"!==k.renderPass)return;const Y=_.paint.get("line-opacity"),V=_.paint.get("line-width");if(0===Y.constantOr(1)||0===V.constantOr(1))return;const Q=k.depthModeForSublayer(0,n.DepthMode.ReadOnly),re=k.colorModeForRenderPass(),ue=k.terrain&&k.terrain.renderingToTexture?1:n.exported.devicePixelRatio,be=_.paint.get("line-dasharray"),ye=be.constantOr(1),Fe=_.layout.get("line-cap"),et=_.paint.get("line-pattern"),ut=et.constantOr(1),ft=_.paint.get("line-gradient"),vt=ut?"linePattern":"line",wt=k.context,Ye=wt.gl,ht=(xt=>{const fi=[];Jo(xt)&&fi.push("RENDER_LINE_DASH"),xt.paint.get("line-gradient")&&fi.push("RENDER_LINE_GRADIENT");const pi=xt.paint.get("line-trim-offset");0===pi[0]&&0===pi[1]||fi.push("RENDER_LINE_TRIM_OFFSET");const ai=xt.paint.get("line-pattern").constantOr(1),Ii=1!==xt.paint.get("line-opacity").constantOr(1);return!ai&&Ii&&fi.push("RENDER_LINE_ALPHA_DISCARD"),fi})(_);let zt=ht.includes("RENDER_LINE_ALPHA_DISCARD");k.terrain&&k.terrain.clipOrMaskOverlapStencilType()&&(zt=!1);for(const xt of I){const fi=d.getTile(xt);if(ut&&!fi.patternsLoaded())continue;const pi=fi.getBucket(_);if(!pi)continue;k.prepareDrawTile();const ai=pi.programConfigurations.get(_.id),Ii=k.useProgram(vt,ai,ht),Ei=et.constantOr(null);if(Ei&&fi.imageAtlas){const on=fi.imageAtlas.patternPositions[Ei.toString()];on&&ai.setConstantPatternPositions(on)}const Yi=be.constantOr(null),Gn=Fe.constantOr(null);if(!ut&&Yi&&Gn&&fi.lineAtlas){const on=fi.lineAtlas.getDash(Yi,Gn);on&&ai.setConstantPatternPositions(on)}let[Ni,dn]=_.paint.get("line-trim-offset");("round"===Gn||"square"===Gn)&&Ni!==dn&&(0===Ni&&(Ni-=1),1===dn&&(dn+=1));const Vi=k.terrain?xt.projMatrix:null,Dn=ut?gh(k,fi,_,Vi,ue):cl(k,fi,_,Vi,pi.lineClipsArray.length,ue,[Ni,dn]);if(ft){const on=pi.gradients[_.id];let Wn=on.texture;if(_.gradientVersion!==on.version){let Ln=256;if(_.stepInterpolant){const Hn=d.getSource().maxzoom,Rr=xt.canonical.z===Hn?Math.ceil(1<<k.transform.maxZoom-xt.canonical.z):1;Ln=n.clamp(n.nextPowerOfTwo(pi.maxLineLength/n.EXTENT*1024*Rr),256,wt.maxTextureSize)}on.gradient=n.renderColorRamp({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:Ln,image:on.gradient||void 0,clips:pi.lineClipsArray}),on.texture?on.texture.update(on.gradient):on.texture=new n.Texture(wt,on.gradient,Ye.RGBA),on.version=_.gradientVersion,Wn=on.texture}wt.activeTexture.set(Ye.TEXTURE1),Wn.bind(_.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}ye&&(wt.activeTexture.set(Ye.TEXTURE0),fi.lineAtlasTexture.bind(Ye.LINEAR,Ye.REPEAT),ai.updatePaintBuffers()),ut&&(wt.activeTexture.set(Ye.TEXTURE0),fi.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),ai.updatePaintBuffers()),k.prepareDrawProgram(wt,Ii,xt.toUnwrapped());const Wi=on=>{Ii.draw(wt,Ye.TRIANGLES,Q,on,re,n.CullFaceMode.disabled,Dn,_.id,pi.layoutVertexBuffer,pi.indexBuffer,pi.segments,_.paint,k.transform.zoom,ai,[pi.layoutVertexBuffer2])};if(zt){const on=k.stencilModeForClipping(xt).ref;0===on&&k.terrain&&wt.clear({stencil:0});const Wn={func:Ye.EQUAL,mask:255};Dn.u_alpha_discard_threshold=.8,Wi(new n.StencilMode(Wn,on,255,Ye.KEEP,Ye.KEEP,Ye.INVERT)),Dn.u_alpha_discard_threshold=0,Wi(new n.StencilMode(Wn,on,255,Ye.KEEP,Ye.KEEP,Ye.KEEP))}else Wi(k.stencilModeForClipping(xt))}zt&&(k.resetStencilClippingMasks(),k.terrain&&wt.clear({stencil:0}))},fill:function(k,d,_,I){const Y=_.paint.get("fill-color"),V=_.paint.get("fill-opacity");if(0===V.constantOr(1))return;const Q=k.colorModeForRenderPass(),re=_.paint.get("fill-pattern"),ue=k.opaquePassEnabledForLayer()&&!re.constantOr(1)&&1===Y.constantOr(n.Color.transparent).a&&1===V.constantOr(0)?"opaque":"translucent";if(k.renderPass===ue){const be=k.depthModeForSublayer(1,"opaque"===k.renderPass?n.DepthMode.ReadWrite:n.DepthMode.ReadOnly);Zu(k,d,_,I,be,Q,!1)}if("translucent"===k.renderPass&&_.paint.get("fill-antialias")){const be=k.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,n.DepthMode.ReadOnly);Zu(k,d,_,I,be,Q,!0)}},"fill-extrusion":function(k,d,_,I){const Y=_.paint.get("fill-extrusion-opacity");if(0!==Y&&"translucent"===k.renderPass){const V=new n.DepthMode(k.context.gl.LEQUAL,n.DepthMode.ReadWrite,k.depthRangeFor3D);if(1!==Y||_.paint.get("fill-extrusion-pattern").constantOr(1))Eu(k,d,_,I,V,n.StencilMode.disabled,n.ColorMode.disabled),Eu(k,d,_,I,V,k.stencilModeFor3D(),k.colorModeForRenderPass()),k.resetStencilClippingMasks();else{const Q=k.colorModeForRenderPass();Eu(k,d,_,I,V,n.StencilMode.disabled,Q)}}},hillshade:function(k,d,_,I){if("offscreen"!==k.renderPass&&"translucent"!==k.renderPass)return;const Y=k.context,V=k.depthModeForSublayer(0,n.DepthMode.ReadOnly),Q=k.colorModeForRenderPass(),re=k.terrain&&k.terrain.renderingToTexture,[ue,be]="translucent"!==k.renderPass||re?[{},I]:k.stencilConfigForOverlap(I);for(const ye of be){const Fe=d.getTile(ye);if(Fe.needsHillshadePrepare&&"offscreen"===k.renderPass)sl(k,Fe,_,V,n.StencilMode.disabled,Q);else if("translucent"===k.renderPass){const et=re&&k.terrain?k.terrain.stencilModeForRTTOverlap(ye):ue[ye.overscaledZ];xl(k,ye,Fe,_,V,et,Q)}}Y.viewport.set([0,0,k.width,k.height]),k.resetStencilClippingMasks()},raster:function(k,d,_,I,Y,V){if("translucent"!==k.renderPass||0===_.paint.get("raster-opacity")||!I.length)return;const Q=k.context,re=Q.gl,ue=d.getSource(),be=k.useProgram("raster"),ye=k.colorModeForRenderPass(),Fe=k.terrain&&k.terrain.renderingToTexture,[et,ut]=ue instanceof Ht||Fe?[{},I]:k.stencilConfigForOverlap(I),ft=ut[ut.length-1].overscaledZ,vt=!k.options.moving;for(const wt of ut){const Ye=Fe?n.DepthMode.disabled:k.depthModeForSublayer(wt.overscaledZ-ft,1===_.paint.get("raster-opacity")?n.DepthMode.ReadWrite:n.DepthMode.ReadOnly,re.LESS),ht=wt.toUnwrapped(),zt=d.getTile(wt);if(Fe&&(!zt||!zt.hasData()))continue;const xt=Fe?wt.projMatrix:k.transform.calculateProjMatrix(ht,vt),fi=k.terrain&&Fe?k.terrain.stencilModeForRTTOverlap(wt):et[wt.overscaledZ],pi=V?0:_.paint.get("raster-fade-duration");zt.registerFadeDuration(pi);const ai=d.findLoadedParent(wt,0),Ii=Bh(zt,ai,d,k.transform,pi);let Ei,Yi;k.terrain&&k.terrain.prepareDrawTile();const Gn="nearest"===_.paint.get("raster-resampling")?re.NEAREST:re.LINEAR;Q.activeTexture.set(re.TEXTURE0),zt.texture.bind(Gn,re.CLAMP_TO_EDGE),Q.activeTexture.set(re.TEXTURE1),ai?(ai.texture.bind(Gn,re.CLAMP_TO_EDGE),Ei=Math.pow(2,ai.tileID.overscaledZ-zt.tileID.overscaledZ),Yi=[zt.tileID.canonical.x*Ei%1,zt.tileID.canonical.y*Ei%1]):zt.texture.bind(Gn,re.CLAMP_TO_EDGE),zt.texture.useMipmap&&Q.extTextureFilterAnisotropic&&k.transform.pitch>20&&re.texParameterf(re.TEXTURE_2D,Q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Q.extTextureFilterAnisotropicMax);const Ni=Pl(xt,Yi||[0,0],Ei||1,Ii,_,ue instanceof Ht?ue.perspectiveTransform:[0,0]);if(k.prepareDrawProgram(Q,be,ht),ue instanceof Ht)ue.boundsBuffer&&ue.boundsSegments&&be.draw(Q,re.TRIANGLES,Ye,n.StencilMode.disabled,ye,n.CullFaceMode.disabled,Ni,_.id,ue.boundsBuffer,k.quadTriangleIndexBuffer,ue.boundsSegments);else{const{tileBoundsBuffer:dn,tileBoundsIndexBuffer:Vi,tileBoundsSegments:Dn}=k.getTileBoundsBuffers(zt);be.draw(Q,re.TRIANGLES,Ye,fi,ye,n.CullFaceMode.disabled,Ni,_.id,dn,Vi,Dn)}}k.resetStencilClippingMasks()},background:function(k,d,_,I){const Y=_.paint.get("background-color"),V=_.paint.get("background-opacity");if(0===V)return;const Q=k.context,re=Q.gl,ue=k.transform,be=ue.tileSize,ye=_.paint.get("background-pattern");if(k.isPatternMissing(ye))return;const Fe=!ye&&1===Y.a&&1===V&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==Fe)return;const et=n.StencilMode.disabled,ut=k.depthModeForSublayer(0,"opaque"===Fe?n.DepthMode.ReadWrite:n.DepthMode.ReadOnly),ft=k.colorModeForRenderPass(),vt=k.useProgram(ye?"backgroundPattern":"background");let wt,Ye=I;Ye||(wt=k.getBackgroundTiles(),Ye=Object.values(wt).map(ht=>ht.tileID)),ye&&(Q.activeTexture.set(re.TEXTURE0),k.imageManager.bind(k.context));for(const ht of Ye){const zt=ht.toUnwrapped(),xt=I?ht.projMatrix:k.transform.calculateProjMatrix(zt);k.prepareDrawTile();const fi=d?d.getTile(ht):wt?wt[ht.key]:new n.Tile(ht,be,ue.zoom,k),pi=ye?Bf(xt,V,k,ye,{tileID:ht,tileSize:be}):ul(xt,V,Y);k.prepareDrawProgram(Q,vt,zt);const{tileBoundsBuffer:ai,tileBoundsIndexBuffer:Ii,tileBoundsSegments:Ei}=k.getTileBoundsBuffers(fi);vt.draw(Q,re.TRIANGLES,ut,et,ft,n.CullFaceMode.disabled,pi,_.id,ai,Ii,Ei)}},sky:function(k,d,_){const I=k.transform,Y="mercator"===I.projection.name||"globe"===I.projection.name?1:n.smoothstep(7,8,I.zoom),V=_.paint.get("sky-opacity")*Y;if(0===V)return;const Q=k.context,re=_.paint.get("sky-type"),ue=new n.DepthMode(Q.gl.LEQUAL,n.DepthMode.ReadOnly,[0,1]),be=k.frameCounter/1e3%1;"atmosphere"===re?"offscreen"===k.renderPass?_.needsSkyboxCapture(k)&&(function(ye,Fe,et,ut){const ft=ye.context,vt=ft.gl;let wt=Fe.skyboxFbo;if(!wt){wt=Fe.skyboxFbo=ft.createFramebuffer(32,32,!1),Fe.skyboxGeometry=new xc(ft),Fe.skyboxTexture=ft.gl.createTexture(),vt.bindTexture(vt.TEXTURE_CUBE_MAP,Fe.skyboxTexture),vt.texParameteri(vt.TEXTURE_CUBE_MAP,vt.TEXTURE_WRAP_S,vt.CLAMP_TO_EDGE),vt.texParameteri(vt.TEXTURE_CUBE_MAP,vt.TEXTURE_WRAP_T,vt.CLAMP_TO_EDGE),vt.texParameteri(vt.TEXTURE_CUBE_MAP,vt.TEXTURE_MIN_FILTER,vt.LINEAR),vt.texParameteri(vt.TEXTURE_CUBE_MAP,vt.TEXTURE_MAG_FILTER,vt.LINEAR);for(let xt=0;xt<6;++xt)vt.texImage2D(vt.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,vt.RGBA,32,32,0,vt.RGBA,vt.UNSIGNED_BYTE,null)}ft.bindFramebuffer.set(wt.framebuffer),ft.viewport.set([0,0,32,32]);const Ye=Fe.getCenter(ye,!0),ht=ye.useProgram("skyboxCapture"),zt=new Float64Array(16);n.identity(zt),n.rotateY(zt,zt,.5*-Math.PI),Ya(ft,Fe,ht,zt,Ye,0),n.identity(zt),n.rotateY(zt,zt,.5*Math.PI),Ya(ft,Fe,ht,zt,Ye,1),n.identity(zt),n.rotateX(zt,zt,.5*-Math.PI),Ya(ft,Fe,ht,zt,Ye,2),n.identity(zt),n.rotateX(zt,zt,.5*Math.PI),Ya(ft,Fe,ht,zt,Ye,3),n.identity(zt),Ya(ft,Fe,ht,zt,Ye,4),n.identity(zt),n.rotateY(zt,zt,Math.PI),Ya(ft,Fe,ht,zt,Ye,5),ft.viewport.set([0,0,ye.width,ye.height])}(k,_),_.markSkyboxValid(k)):"sky"===k.renderPass&&function(ye,Fe,et,ut,ft){const vt=ye.context,wt=vt.gl,Ye=ye.transform,ht=ye.useProgram("skybox");vt.activeTexture.set(wt.TEXTURE0),wt.bindTexture(wt.TEXTURE_CUBE_MAP,Fe.skyboxTexture);const zt=((xt,fi,pi,ai,Ii)=>({u_matrix:xt,u_sun_direction:fi,u_cubemap:0,u_opacity:ai,u_temporal_offset:Ii}))(Ye.skyboxMatrix,Fe.getCenter(ye,!1),0,ut,ft);ye.prepareDrawProgram(vt,ht),ht.draw(vt,wt.TRIANGLES,et,n.StencilMode.disabled,ye.colorModeForRenderPass(),n.CullFaceMode.backCW,zt,"skybox",Fe.skyboxGeometry.vertexBuffer,Fe.skyboxGeometry.indexBuffer,Fe.skyboxGeometry.segment)}(k,_,ue,V,be):"gradient"===re&&"sky"===k.renderPass&&function(ye,Fe,et,ut,ft){const vt=ye.context,wt=vt.gl,Ye=ye.transform,ht=ye.useProgram("skyboxGradient");Fe.skyboxGeometry||(Fe.skyboxGeometry=new xc(vt)),vt.activeTexture.set(wt.TEXTURE0);let zt=Fe.colorRampTexture;zt||(zt=Fe.colorRampTexture=new n.Texture(vt,Fe.colorRamp,wt.RGBA)),zt.bind(wt.LINEAR,wt.CLAMP_TO_EDGE);const xt=(fi=Ye.skyboxMatrix,pi=Fe.getCenter(ye,!1),ai=Fe.paint.get("sky-gradient-radius"),Ii=ut,Ei=ft,{u_matrix:fi,u_color_ramp:0,u_center_direction:pi,u_radius:n.degToRad(ai),u_opacity:Ii,u_temporal_offset:Ei});var fi,pi,ai,Ii,Ei;ye.prepareDrawProgram(vt,ht),ht.draw(vt,wt.TRIANGLES,et,n.StencilMode.disabled,ye.colorModeForRenderPass(),n.CullFaceMode.backCW,xt,"skyboxGradient",Fe.skyboxGeometry.vertexBuffer,Fe.skyboxGeometry.indexBuffer,Fe.skyboxGeometry.segment)}(k,_,ue,V,be)},debug:function(k,d,_){for(let I=0;I<_.length;I++)zo(k,d,_[I])},custom:function(k,d,_,I){const Y=k.context,V=_.implementation;if(!k.transform.projection.unsupportedLayers||!k.transform.projection.unsupportedLayers.includes("custom")||k.terrain&&(k.terrain.renderingToTexture||"offscreen"===k.renderPass)&&_.isLayerDraped()){if("offscreen"===k.renderPass){const Q=V.prerender;if(Q){if(k.setCustomLayerDefaults(),Y.setColorMode(k.colorModeForRenderPass()),"globe"===k.transform.projection.name){const re=k.transform.pointMerc;Q.call(V,Y.gl,k.transform.customLayerMatrix(),k.transform.getProjection(),k.transform.globeToMercatorMatrix(),n.globeToMercatorTransition(k.transform.zoom),[re.x,re.y],k.transform.pixelsPerMeterRatio)}else Q.call(V,Y.gl,k.transform.customLayerMatrix());Y.setDirty(),k.setBaseState()}}else if("translucent"===k.renderPass){if(k.terrain&&k.terrain.renderingToTexture){const re=V.renderToTile;if(re){const ue=I[0].canonical,be=new n.MercatorCoordinate(ue.x+I[0].wrap*(1<<ue.z),ue.y,ue.z);Y.setDepthMode(n.DepthMode.disabled),Y.setStencilMode(n.StencilMode.disabled),Y.setColorMode(k.colorModeForRenderPass()),k.setCustomLayerDefaults(),re.call(V,Y.gl,be),Y.setDirty(),k.setBaseState()}return}k.setCustomLayerDefaults(),Y.setColorMode(k.colorModeForRenderPass()),Y.setStencilMode(n.StencilMode.disabled);const Q="3d"===V.renderingMode?new n.DepthMode(k.context.gl.LEQUAL,n.DepthMode.ReadWrite,k.depthRangeFor3D):k.depthModeForSublayer(0,n.DepthMode.ReadOnly);if(Y.setDepthMode(Q),"globe"===k.transform.projection.name){const re=k.transform.pointMerc;V.render(Y.gl,k.transform.customLayerMatrix(),k.transform.getProjection(),k.transform.globeToMercatorMatrix(),n.globeToMercatorTransition(k.transform.zoom),[re.x,re.y],k.transform.pixelsPerMeterRatio)}else V.render(Y.gl,k.transform.customLayerMatrix());Y.setDirty(),k.setBaseState(),Y.bindFramebuffer.set(null)}}else n.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class fl{constructor(d,_,I=!1){this.context=new Sn(d,I),this.transform=_,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=n.SourceCache.maxUnderzooming+n.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(d,_){const I=!!d&&!!d.terrain&&this.transform.projection.supportsTerrain;if(!(I||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ut(this,d));const Y=this._terrain;this.transform.elevation=I?Y:null,Y.update(d,this.transform,_)}_updateFog(d){const _=d.fog;if(!_||"globe"===this.transform.projection.name||_.getOpacity(this.transform.pitch)<1||_.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[I,Y]=_.getFovAdjustedRange(this.transform._fov);if(I>Y)return void(this.transform.fogCullDistSq=null);const V=I+.78*(Y-I);this.transform.fogCullDistSq=V*V}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(d,_){if(this.width=d*n.exported.devicePixelRatio,this.height=_*n.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const I of this.style.order)this.style._layers[I].resize()}setup(){const d=this.context,_=new n.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(n.EXTENT,0),_.emplaceBack(0,n.EXTENT),_.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(_,n.posAttributes.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);const I=new n.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(n.EXTENT,0),I.emplaceBack(0,n.EXTENT),I.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=d.createVertexBuffer(I,n.posAttributes.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);const Y=new n.StructArrayLayout2i4;Y.emplaceBack(-1,-1),Y.emplaceBack(1,-1),Y.emplaceBack(-1,1),Y.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(Y,n.posAttributes.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);const V=new n.StructArrayLayout4i8;V.emplaceBack(0,0,0,0),V.emplaceBack(n.EXTENT,0,n.EXTENT,0),V.emplaceBack(0,n.EXTENT,0,n.EXTENT),V.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.mercatorBoundsBuffer=d.createVertexBuffer(V,n.boundsAttributes.members),this.mercatorBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);const Q=new n.StructArrayLayout3ui6;Q.emplaceBack(0,1,2),Q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(Q);const re=new n.StructArrayLayout1ui2;for(const be of[0,1,3,2,0])re.emplaceBack(be);this.debugIndexBuffer=d.createIndexBuffer(re),this.emptyTexture=new n.Texture(d,new n.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),d.gl.RGBA),this.identityMat=n.create();const ue=this.context.gl;this.stencilClearMode=new n.StencilMode({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO),this.loadTimeStamps.push(n.window.performance.now()),this.atmosphereBuffer=new ya(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(d){return d._makeTileBoundsBuffers(this.context,this.transform.projection),d._tileBoundsBuffer?{tileBoundsBuffer:d._tileBoundsBuffer,tileBoundsIndexBuffer:d._tileBoundsIndexBuffer,tileBoundsSegments:d._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const d=this.context,_=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(d,_.TRIANGLES,n.DepthMode.disabled,this.stencilClearMode,n.ColorMode.disabled,n.CullFaceMode.disabled,tu(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(d,_,I){if(!_||this.currentStencilSource===_.id||!d.isTileClipped()||!I||0===I.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let re=!1;for(const ue of I)if(void 0===this._tileClippingMaskIDs[ue.key]){re=!0;break}if(!re)return}this.currentStencilSource=_.id;const Y=this.context,V=Y.gl;this.nextStencilID+I.length>256&&this.clearStencil(),Y.setColorMode(n.ColorMode.disabled),Y.setDepthMode(n.DepthMode.disabled);const Q=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const re of I){const ue=_.getTile(re),be=this._tileClippingMaskIDs[re.key]=this.nextStencilID++,{tileBoundsBuffer:ye,tileBoundsIndexBuffer:Fe,tileBoundsSegments:et}=this.getTileBoundsBuffers(ue);Q.draw(Y,V.TRIANGLES,n.DepthMode.disabled,new n.StencilMode({func:V.ALWAYS,mask:0},be,255,V.KEEP,V.KEEP,V.REPLACE),n.ColorMode.disabled,n.CullFaceMode.disabled,tu(re.projMatrix),"$clipping",ye,Fe,et)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,_=this.context.gl;return new n.StencilMode({func:_.NOTEQUAL,mask:255},d,255,_.KEEP,_.KEEP,_.REPLACE)}stencilModeForClipping(d){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(d);const _=this.context.gl;return new n.StencilMode({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,_.KEEP,_.KEEP,_.REPLACE)}stencilConfigForOverlap(d){const _=this.context.gl,I=d.sort((Q,re)=>re.overscaledZ-Q.overscaledZ),Y=I[I.length-1].overscaledZ,V=I[0].overscaledZ-Y+1;if(V>1){this.currentStencilSource=void 0,this.nextStencilID+V>256&&this.clearStencil();const Q={};for(let re=0;re<V;re++)Q[re+Y]=new n.StencilMode({func:_.GEQUAL,mask:255},re+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=V,[Q,I]}return[{[Y]:n.StencilMode.disabled},I]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new n.ColorMode([d.CONSTANT_COLOR,d.ONE],new n.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?n.ColorMode.unblended:n.ColorMode.alphaBlended}depthModeForSublayer(d,_,I){if(!this.opaquePassEnabledForLayer())return n.DepthMode.disabled;const Y=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new n.DepthMode(I||this.context.gl.LEQUAL,_,[Y,Y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,_){this.style=d,this.options=_,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(n.exported.now()),this.imageManager.beginFrame();const I=this.style.order,Y=this.style._sourceCaches;for(const be in Y){const ye=Y[be];ye.used&&ye.prepare(this.context)}const V={},Q={},re={};for(const be in Y){const ye=Y[be];V[be]=ye.getVisibleCoordinates(),Q[be]=V[be].slice().reverse(),re[be]=ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let be=0;be<I.length;be++)if(this.style._layers[I[be]].is3D()){this.opaquePassCutoff=be;break}if(this.terrain&&(this.terrain.updateTileBinding(re),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new n.GlobeSharedBuffers(this.context)),!n.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const be of I){const ye=this.style._layers[be],Fe=d._getLayerSourceCache(ye);if(!ye.hasOffscreenPass()||ye.isHidden(this.transform.zoom))continue;const et=Fe?Q[Fe.id]:void 0;("custom"===ye.type||ye.isSky()||et&&et.length)&&this.renderLayer(this,Fe,ye,et)}this.depthRangeFor3D=[0,1-(d.order.length+2)*this.numSublayers*this.depthEpsilon];const ue=this.terrain;if(ue&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&ue.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:_.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const be=this.style._layers[I[this.currentLayer]],ye=d._getLayerSourceCache(be);if(be.isSky())continue;const Fe=ye?Q[ye.id]:void 0;this._renderTileClippingMasks(be,ye,Fe),this.renderLayer(this,ye,be,Fe)}if(this.style.fog&&this.transform.projection.supportsFog&&function(be,ye){const Fe=be.context,et=Fe.gl,ut=be.transform,ft=new n.DepthMode(et.LEQUAL,n.DepthMode.ReadOnly,[0,1]),vt=be.useProgram("globeAtmosphere",null,"globe"===ut.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),wt=n.globeToMercatorTransition(ut.zoom),Ye=ye.properties.get("color").toArray01(),ht=ye.properties.get("high-color").toArray01(),zt=ye.properties.get("space-color").toArray01PremultipliedAlpha(),xt=n.identity$1([]);n.rotateY$1(xt,xt,-n.degToRad(ut._center.lng)),n.rotateX$1(xt,xt,n.degToRad(ut._center.lat)),n.rotateZ$1(xt,xt,ut.angle),n.rotateX$1(xt,xt,-ut._pitch);const fi=n.fromQuat(new Float32Array(16),xt),pi=n.mapValue(ye.properties.get("star-intensity"),0,1,0,.25),Ii=n.mapValue(ye.properties.get("horizon-blend"),0,1,5e-4,.25),Ei=n.globeUseCustomAntiAliasing(be,Fe,ut)&&5e-4===Ii?ut.worldSize/(2*Math.PI*1.025)-1:ut.globeRadius,Yi=be.frameCounter/1e3%1,Gn=n.length(ut.globeCenterInViewSpace),Ni=Math.sqrt(Math.pow(Gn,2)-Math.pow(Ei,2)),dn=Math.acos(Ni/Gn),Vi={u_frustum_tl:ut.frustumCorners.TL,u_frustum_tr:ut.frustumCorners.TR,u_frustum_br:ut.frustumCorners.BR,u_frustum_bl:ut.frustumCorners.BL,u_horizon:ut.frustumCorners.horizon,u_transition:wt,u_fadeout_range:Ii,u_color:Ye,u_high_color:ht,u_space_color:zt,u_star_intensity:pi,u_star_size:5*n.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Yi,u_horizon_angle:dn,u_rotation_matrix:fi};be.prepareDrawProgram(Fe,vt);const Dn=be.atmosphereBuffer;Dn&&vt.draw(Fe,et.TRIANGLES,ft,n.StencilMode.disabled,n.ColorMode.alphaBlended,n.CullFaceMode.backCW,Vi,"skybox",Dn.vertexBuffer,Dn.indexBuffer,Dn.segments)}(this,this.style.fog),this.renderPass="sky",(n.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const be=this.style._layers[I[this.currentLayer]],ye=d._getLayerSourceCache(be);be.isSky()&&this.renderLayer(this,ye,be,ye?Q[ye.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;){const be=this.style._layers[I[this.currentLayer]],ye=d._getLayerSourceCache(be);if(be.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(be)){if(be.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Fe=ye?("symbol"===be.type?re:Q)[ye.id]:void 0;this._renderTileClippingMasks(be,ye,ye?V[ye.id]:void 0),this.renderLayer(this,ye,be,Fe),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let be=null;n.values(this.style._layers).forEach(ye=>{const Fe=d._getLayerSourceCache(ye);Fe&&!ye.isHidden(this.transform.zoom)&&(!be||be.getSource().maxzoom<Fe.getSource().maxzoom)&&(be=Fe)}),be&&this.options.showTileBoundaries&&su.debug(this,be,be.getVisibleCoordinates())}this.options.showPadding&&function(be){const ye=be.transform.padding;la(be,be.transform.height-(ye.top||0),3,mn),la(be,ye.bottom||0,3,un),Fl(be,ye.left||0,3,Mr),Fl(be,be.transform.width-(ye.right||0),3,Ls);const Fe=be.transform.centerPoint;var et,ut,ft,vt;Yh(et=be,(ut=Fe.x)-1,(ft=be.transform.height-Fe.y)-10,2,20,vt=_a),Yh(et,ut-10,ft-1,20,2,vt)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(n.window.performance.now()),this.saveCanvasCopy())}renderLayer(d,_,I,Y){I.isHidden(this.transform.zoom)||("background"===I.type||"sky"===I.type||"custom"===I.type||Y&&Y.length)&&(this.id=I.id,this.gpuTimingStart(I),(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes(I.type)||d.terrain&&"custom"===I.type)&&su[I.type](d,_,I,Y,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const _=this.context.extTimerQuery;let I=this.gpuTimers[d.id];I||(I=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:_.createQueryEXT()}),I.calls++,_.beginQueryEXT(_.TIME_ELAPSED_EXT,I.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const d=this.context.extTimerQuery,_=d.createQueryEXT();this.deferredRenderGpuTimeQueries.push(_),d.beginQueryEXT(d.TIME_ELAPSED_EXT,_)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}collectDeferredRenderGpuQueries(){const d=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],d}queryGpuTimers(d){const _={};for(const I in d){const Y=d[I],V=this.context.extTimerQuery,Q=V.getQueryObjectEXT(Y.query,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(Y.query),_[I]=Q}return _}queryGpuTimeDeferredRender(d){if(!this.options.gpuTimingDeferredRender)return 0;const _=this.context.extTimerQuery;let I=0;for(const Y of d)I+=_.getQueryObjectEXT(Y,_.QUERY_RESULT_EXT)/1e6,_.deleteQueryEXT(Y);return I}translatePosMatrix(d,_,I,Y,V){if(!I[0]&&!I[1])return d;const Q=V?"map"===Y?this.transform.angle:0:"viewport"===Y?-this.transform.angle:0;if(Q){const be=Math.sin(Q),ye=Math.cos(Q);I=[I[0]*ye-I[1]*be,I[0]*be+I[1]*ye]}const re=[V?I[0]:Fn(_,I[0],this.transform.zoom),V?I[1]:Fn(_,I[1],this.transform.zoom),0],ue=new Float32Array(16);return n.translate(ue,d,re),ue}saveTileTexture(d){const _=this._tileTextures[d.size[0]];_?_.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const _=this._tileTextures[d];return _&&_.length>0?_.pop():null}isPatternMissing(d){return null===d||void 0!==d&&!this.imageManager.getPattern(d.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const d=this.terrain&&this.terrain.renderingToTexture,_=this.terrain&&0===this.terrain.exaggeration(),I=this.style&&this.style.fog,Y=[];return this.terrainRenderModeElevated()&&Y.push("TERRAIN"),"globe"===this.transform.projection.name&&Y.push("GLOBE"),_&&Y.push("ZERO_EXAGGERATION"),I&&!d&&0!==I.getOpacity(this.transform.pitch)&&Y.push("FOG"),d&&Y.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&Y.push("OVERDRAW_INSPECTOR"),Y}useProgram(d,_,I){this.cache=this.cache||{};const Y=I||[],V=this.currentGlobalDefines().concat(Y),Q=Us.cacheKey(fh[d],d,V,_);return this.cache[Q]||(this.cache[Q]=new Us(this.context,d,fh[d],_,Vo[d],V)),this.cache[Q]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(d,_,I){if(this.terrain&&this.terrain.renderingToTexture)return;const Y=this.style.fog;if(Y){const V=Y.getOpacity(this.transform.pitch),Q=((re,ue,be,ye,Fe,et,ut,ft,vt,wt,Ye)=>{const ht=re.transform,zt=ue.properties.get("color").toArray01();zt[3]=ye;const xt=re.frameCounter/1e3%1;return{u_fog_matrix:be?ht.calculateFogTileMatrix(be):re.identityMat,u_fog_range:ue.getFovAdjustedRange(ht._fov),u_fog_color:zt,u_fog_horizon_blend:ue.properties.get("horizon-blend"),u_fog_temporal_offset:xt,u_frustum_tl:Fe,u_frustum_tr:et,u_frustum_br:ut,u_frustum_bl:ft,u_globe_pos:vt,u_globe_radius:wt,u_viewport:Ye,u_globe_transition:n.globeToMercatorTransition(ht.zoom),u_is_globe:+("globe"===ht.projection.name)}})(this,Y,I,V,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.exported.devicePixelRatio,this.transform.height*n.exported.devicePixelRatio]);_.setFogUniformValues(d,Q)}}setTileLoadedFlag(d){this.tileLoaded=d}saveCanvasCopy(){const d=this.canvasCopy();d&&(this.frameCopies.push(d),this.tileLoaded=!1)}canvasCopy(){const d=this.context.gl,_=d.createTexture();return d.bindTexture(d.TEXTURE_2D,_),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,0,0,d.drawingBufferWidth,d.drawingBufferHeight,0),_}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const d=this.style&&this.style.fog;return!!d&&0!==d.getOpacity(this.transform.pitch)}getBackgroundTiles(){const d=this._backgroundTiles,_=this._backgroundTiles={},I=this.transform.coveringTiles({tileSize:512});for(const Y of I)_[Y.key]=d[Y.key]||new n.Tile(Y,512,this.transform.tileZoom,this);return _}clearBackgroundTiles(){this._backgroundTiles={}}}class Tu{constructor(d=0,_=0,I=0,Y=0){if(isNaN(d)||d<0||isNaN(_)||_<0||isNaN(I)||I<0||isNaN(Y)||Y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=_,this.left=I,this.right=Y}interpolate(d,_,I){return null!=_.top&&null!=d.top&&(this.top=n.number(d.top,_.top,I)),null!=_.bottom&&null!=d.bottom&&(this.bottom=n.number(d.bottom,_.bottom,I)),null!=_.left&&null!=d.left&&(this.left=n.number(d.left,_.left,I)),null!=_.right&&null!=d.right&&(this.right=n.number(d.right,_.right,I)),this}getCenter(d,_){const I=n.clamp((this.left+d-this.right)/2,0,d),Y=n.clamp((this.top+_-this.bottom)/2,0,_);return new n.Point(I,Y)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new Tu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function bc(k,d){const _=n.getColumn(k,3);n.fromQuat(k,d),n.setColumn(k,3,_)}function ca(k,d){const _=n.identity$1([]);return n.rotateZ$1(_,_,-d),n.rotateX$1(_,_,-k),_}function qu(k,d){const _=[k[0],k[1],0],I=[d[0],d[1],0];if(n.length(_)>=1e-15){const Q=n.normalize([],_);n.scale$2(I,Q,n.dot(I,Q)),d[0]=I[0],d[1]=I[1]}const Y=n.cross([],d,k);if(n.len(Y)<1e-15)return null;const V=Math.atan2(-Y[1],Y[0]);return ca(Math.atan2(Math.sqrt(k[0]*k[0]+k[1]*k[1]),-k[2]),V)}class wc{constructor(d,_){this.position=d,this.orientation=_}get position(){return this._position}set position(d){if(d){const _=d instanceof n.MercatorCoordinate?d:new n.MercatorCoordinate(d[0],d[1],d[2]);this._renderWorldCopies&&(_.x=n.wrap(_.x,0,1)),this._position=_}else this._position=null}lookAtPoint(d,_){if(this.orientation=null,!this.position)return;const I=this.position,Y=this._elevation?this._elevation.getAtPointOrZero(n.MercatorCoordinate.fromLngLat(d)):0,V=n.MercatorCoordinate.fromLngLat(d,Y),Q=[V.x-I.x,V.y-I.y,V.z-I.z];_||(_=[0,0,1]),_[2]=Math.abs(_[2]),this.orientation=qu(Q,_)}setPitchBearing(d,_){this.orientation=ca(n.degToRad(d),n.degToRad(-_))}}class Qo{constructor(d,_){this._transform=n.identity([]),this.orientation=_,this.position=d}get mercatorPosition(){const d=this.position;return new n.MercatorCoordinate(d[0],d[1],d[2])}get position(){const d=n.getColumn(this._transform,3);return[d[0],d[1],d[2]]}set position(d){var _;d&&n.setColumn(this._transform,3,[(_=d)[0],_[1],_[2],1])}get orientation(){return this._orientation}set orientation(d){this._orientation=d||n.identity$1([]),d&&bc(this._transform,this._orientation)}getPitchBearing(){const d=this.forward(),_=this.right();return{bearing:Math.atan2(-_[1],_[0]),pitch:Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2])}}setPitchBearing(d,_){this._orientation=ca(d,_),bc(this._transform,this._orientation)}forward(){const d=n.getColumn(this._transform,2);return[-d[0],-d[1],-d[2]]}up(){const d=n.getColumn(this._transform,1);return[-d[0],-d[1],-d[2]]}right(){const d=n.getColumn(this._transform,0);return[d[0],d[1],d[2]]}getCameraToWorld(d,_){const I=new Float64Array(16);return n.invert(I,this.getWorldToCamera(d,_)),I}getWorldToCameraPosition(d,_,I){const Y=this.position;n.scale$2(Y,Y,-d);const V=new Float64Array(16);return n.fromScaling(V,[I,I,I]),n.translate(V,V,Y),V[10]*=_,V}getWorldToCamera(d,_){const I=new Float64Array(16),Y=new Float64Array(4),V=this.position;return n.conjugate(Y,this._orientation),n.scale$2(V,V,-d),n.fromQuat(I,Y),n.translate(I,I,V),I[1]*=-1,I[5]*=-1,I[9]*=-1,I[13]*=-1,I[8]*=_,I[9]*=_,I[10]*=_,I[11]*=_,I}getCameraToClipPerspective(d,_,I,Y){const V=new Float64Array(16);return n.perspective(V,d,_,I,Y),V}getDistanceToElevation(d,_=!1){const I=0===d?0:n.mercatorZfromAltitude(d,_?n.latFromMercatorY(this.position[1]):this.position[1]),Y=this.forward();return(I-this.position[2])/Y[2]}clone(){return new Qo([...this.position],[...this.orientation])}}function Cc(k,d){const _=Su(k.projection,k.zoom,k.width,k.height),I=function(V,Q,re,ue,be){const ye=new n.LngLat(re.lng-180*Gc,re.lat),Fe=new n.LngLat(re.lng+180*Gc,re.lat),et=V.project(ye.lng,ye.lat),ut=V.project(Fe.lng,Fe.lat),ft=-Math.atan2(ut.y-et.y,ut.x-et.x),vt=n.MercatorCoordinate.fromLngLat(re);vt.y=n.clamp(vt.y,-1+Gc,1-Gc);const wt=vt.toLngLat(),Ye=V.project(wt.lng,wt.lat),ht=n.MercatorCoordinate.fromLngLat(wt);ht.x+=Gc;const zt=ht.toLngLat(),xt=V.project(zt.lng,zt.lat),fi=Ku(xt.x-Ye.x,xt.y-Ye.y,ft),pi=n.MercatorCoordinate.fromLngLat(wt);pi.y+=Gc;const ai=pi.toLngLat(),Ii=V.project(ai.lng,ai.lat),Ei=Ku(Ii.x-Ye.x,Ii.y-Ye.y,ft),Yi=Math.abs(fi.x)/Math.abs(Ei.y),Gn=n.identity([]);n.rotateZ(Gn,Gn,-ft*(1-(be?0:ue)));const Ni=n.identity([]);return n.scale(Ni,Ni,[1,1-(1-Yi)*ue,1]),Ni[4]=-Ei.x/Ei.y*ue,n.rotateZ(Ni,Ni,ft),n.multiply(Ni,Gn,Ni),Ni}(k.projection,0,k.center,_,d),Y=Bl(k);return n.scale(I,I,[Y,Y,1]),I}function Bl(k){const d=k.projection,_=Su(k.projection,k.zoom,k.width,k.height),I=Nl(d,k.center),Y=Nl(d,n.LngLat.convert(d.center));return Math.pow(2,I*_+(1-_)*Y)}function Su(k,d,_,I,Y=1/0){const V=k.range;if(!V)return 0;const Q=Math.min(Y,Math.max(_,I)),re=Math.log(Q/1024)/Math.LN2;return n.smoothstep(V[0]+re,V[1]+re,d)}const Gc=1/4e4;function Nl(k,d){const _=n.clamp(d.lat,-n.MAX_MERCATOR_LATITUDE,n.MAX_MERCATOR_LATITUDE),I=new n.LngLat(d.lng-180*Gc,_),Y=new n.LngLat(d.lng+180*Gc,_),V=k.project(I.lng,_),Q=k.project(Y.lng,_),re=n.MercatorCoordinate.fromLngLat(I),ue=n.MercatorCoordinate.fromLngLat(Y),be=Q.x-V.x,ye=Q.y-V.y,Fe=ue.x-re.x,et=ue.y-re.y,ut=Math.sqrt((Fe*Fe+et*et)/(be*be+ye*ye));return Math.log(ut)/Math.LN2}function Ku(k,d,_){const I=Math.cos(_),Y=Math.sin(_);return{x:k*I-d*Y,y:k*Y+d*I}}class Au{constructor(d,_,I,Y,V,Q,re){this.tileSize=512,this._renderWorldCopies=void 0===V||V,this._minZoom=d||0,this._maxZoom=_||22,this._minPitch=I??0,this._maxPitch=Y??60,this.setProjection(Q),this.setMaxBounds(re),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Tu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Qo,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const d=new Au(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return d._elevation=this._elevation,d._centerAltitude=this._centerAltitude,d._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,d.tileSize=this.tileSize,d.mercatorFromTransition=this.mercatorFromTransition,d.width=this.width,d.height=this.height,d.cameraElevationReference=this.cameraElevationReference,d._center=this._center,d._setZoom(this.zoom),d._seaLevelZoom=this._seaLevelZoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._nearZ=this._nearZ,d._farZ=this._farZ,d._averageElevation=this._averageElevation,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._camera=this._camera.clone(),d._calcMatrices(),d.freezeTileCoverage=this.freezeTileCoverage,d.frustumCorners=this.frustumCorners,d}get elevation(){return this._elevation}set elevation(d){this._elevation!==d&&(this._elevation=d,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(d,_=!1){const I=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||I)&&this._updateCameraOnTerrain(),(d||I)&&this._constrainCamera(_),this._calcMatrices()}getProjection(){return n.pick(this.projection,["name","center","parallels"])}setProjection(d){this.projectionOptions=d||{name:"mercator"};const _=this.projection?this.getProjection():void 0;this.projection=n.getProjection(this.projectionOptions);const I=!j(_,this.getProjection());return I&&this._calcMatrices(),this.mercatorFromTransition=!1,I}setMercatorFromTransition(){const d=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.getProjection({name:"mercator"});const _=d!==this.projection.name;return _&&this._calcMatrices(),_}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(d){void 0===d?d=!0:null===d&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get cameraWorldSize(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.Point(this.width,this.height)}get bearing(){return n.wrap(this.rotation,-180,180)}set bearing(d){this.rotation=d}get rotation(){return-this.angle/Math.PI*180}set rotation(d){const _=-d*Math.PI/180;var I,Y,V,Q,re,ue,be,ye,Fe,et;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=(I=new n.ARRAY_TYPE(4),n.ARRAY_TYPE!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I),Y=this.rotationMatrix,Q=this.angle,re=(V=this.rotationMatrix)[0],ue=V[1],be=V[2],ye=V[3],Fe=Math.sin(Q),et=Math.cos(Q),Y[0]=re*et+be*Fe,Y[1]=ue*et+ye*Fe,Y[2]=re*-Fe+be*et,Y[3]=ue*-Fe+ye*et)}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const _=n.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const d=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/d)}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=n.degToRad(d),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(d){this._averageElevation=d,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(d){const _=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._setZoom(_),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(d){this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const d=this._elevation;this._centerAltitude=d.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=d.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const d=this._elevation,_=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],I=this.horizonLineFromTop();let Y=0,V=0;for(let Q=0;Q<_.length;Q++){const re=new n.Point(_[Q][0]*this.width,I+_[Q][1]*(this.height-I)),ue=d.pointCoordinate(re);if(!ue)continue;const be=1/Math.hypot(ue[0]-this._camera.position[0],ue[1]-this._camera.position[1]);Y+=ue[3]*be,V+=be}return 0===V?NaN:Y/V}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const d=this._seaLevelZoom,_=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),I=this.pixelsPerMeter/this.worldSize*_,Y=this._mercatorZfromZoom(d),V=this._mercatorZfromZoom(this._maxZoom),Q=Math.max(Y-I,V);this._setZoom(this._zoomFromMercatorZ(Q))}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}computeZoomRelativeTo(d){const _=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,d.toAltitude()));let I;I=d.z<this._camera.position[2]?[_.x,_.y,_.z]:[d.x,d.y,d.z];const Y=n.length(n.sub([],this._camera.position,I));return n.clamp(this._zoomFromMercatorZ(Y),this._minZoom,this._maxZoom)}setFreeCameraOptions(d){if(!this.height||!d.position&&!d.orientation)return;this._updateCameraState();let _=!1;if(d.orientation&&!n.exactEquals(d.orientation,this._camera.orientation)&&(_=this._setCameraOrientation(d.orientation)),d.position){const I=[d.position.x,d.position.y,d.position.z];n.exactEquals$1(I,this._camera.position)||(this._setCameraPosition(I),_=!0)}_&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const d=this._camera.position,_=new wc;return _.position=new n.MercatorCoordinate(d[0],d[1],d[2]),_.orientation=this._camera.orientation,_._elevation=this.elevation,_._renderWorldCopies=this.renderWorldCopies,_}_setCameraOrientation(d){if(!n.length$1(d))return!1;n.normalize$1(d,d);const _=n.transformQuat([],[0,0,-1],d),I=n.transformQuat([],[0,-1,0],d);if(I[2]<0)return!1;const Y=qu(_,I);return!!Y&&(this._camera.orientation=Y,!0)}_setCameraPosition(d){const _=this.zoomScale(this.minZoom)*this.tileSize,I=this.zoomScale(this.maxZoom)*this.tileSize,Y=this.cameraToCenterDistance;d[2]=n.clamp(d[2],Y/I,Y/_),this._camera.position=d}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,_,I){this._unmodified=!1,this._edgeInsets.interpolate(d,_,I),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const _=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,_)}getVisibleUnwrappedCoordinates(d){const _=[new n.UnwrappedTileID(0,d)];if(this.renderWorldCopies){const I=this.pointCoordinate(new n.Point(0,0)),Y=this.pointCoordinate(new n.Point(this.width,0)),V=this.pointCoordinate(new n.Point(this.width,this.height)),Q=this.pointCoordinate(new n.Point(0,this.height)),re=Math.floor(Math.min(I.x,Y.x,V.x,Q.x)),ue=Math.floor(Math.max(I.x,Y.x,V.x,Q.x)),be=1;for(let ye=re-be;ye<=ue+be;ye++)0!==ye&&_.push(new n.UnwrappedTileID(ye,d))}return _}coveringTiles(d){let _=this.coveringZoomLevel(d);const I=_,Y=this.elevation&&!d.isTerrainDEM,V="mercator"===this.projection.name;if(void 0!==d.minzoom&&_<d.minzoom)return[];void 0!==d.maxzoom&&_>d.maxzoom&&(_=d.maxzoom);const Q=this.locationCoordinate(this.center),re=this.center.lat,ue=1<<_,be=[ue*Q.x,ue*Q.y,0],ye="globe"===this.projection.name,Fe=!ye,et=n.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,_,Fe),ut=ye?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ft=ue*n.mercatorZfromAltitude(1,this.center.lat),vt=this._camera.position[2]/n.mercatorZfromAltitude(1,this.center.lat),wt=[ue*ut.x,ue*ut.y,vt*(Fe?1:ft)],Ye=this.cameraToCenterDistance/d.tileSize*(d.roundZoom?1:.502),ht=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?_:0,zt=d.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,xt=d.isTerrainDEM?-zt:this._elevation?this._elevation.getMinElevationBelowMSL():0,fi=this.projection.isReprojectedInTileSpace?Bl(this):1,pi=Wi=>{const Wn=new n.MercatorCoordinate(Wi.x+25e-6,Wi.y,Wi.z),Ln=new n.MercatorCoordinate(Wi.x,Wi.y+25e-6,Wi.z),Hn=Wi.toLngLat(),Rr=Wn.toLngLat(),ms=Ln.toLngLat(),Sr=this.locationCoordinate(Hn),Ir=this.locationCoordinate(Rr),xs=this.locationCoordinate(ms),cs=Math.hypot(Ir.x-Sr.x,Ir.y-Sr.y),zr=Math.hypot(xs.x-Sr.x,xs.y-Sr.y);return Math.sqrt(cs*zr)*fi/25e-6},ai=Wi=>{const on=zt,Wn=xt;return{aabb:n.tileAABB(this,ue,0,0,0,Wi,Wn,on,this.projection),zoom:0,x:0,y:0,minZ:Wn,maxZ:on,wrap:Wi,fullyVisible:!1}},Ii=[];let Ei=[];const Yi=_,Gn=d.reparseOverscaled?I:_,Ni=Wi=>Wi*Wi,dn=Ni((vt-this._centerAltitude)*ft),Vi=Wi=>{if(!this._elevation||!Wi.tileID||!V)return;const on=this._elevation.getMinMaxForTile(Wi.tileID),Wn=Wi.aabb;on?(Wn.min[2]=on.min,Wn.max[2]=on.max,Wn.center[2]=(Wn.min[2]+Wn.max[2])/2):(Wi.shouldSplit=Dn(Wi),Wi.shouldSplit||(Wn.min[2]=Wn.max[2]=Wn.center[2]=this._centerAltitude))},Dn=Wi=>{if(Wi.zoom<ht)return!0;if(Wi.zoom===Yi)return!1;if(null!=Wi.shouldSplit)return Wi.shouldSplit;const on=Wi.aabb.distanceX(wt),Wn=Wi.aabb.distanceY(wt);let Ln=dn,Hn=1;if(ye){Ln=Ni(Wi.aabb.distanceZ(wt));const Sr=Math.pow(2,Wi.zoom),Ir=n.latFromMercatorY((Wi.y+1)/Sr),xs=n.latFromMercatorY(Wi.y/Sr),cs=Math.min(Math.max(re,Ir),xs),zr=n.circumferenceAtLatitude(cs)/n.circumferenceAtLatitude(re);if(Hn=cs===re?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,zr/this._mercatorScaleRatio),this.zoom<=n.GLOBE_ZOOM_THRESHOLD_MIN&&Wi.zoom===Yi-1&&zr>=.9)return!0}else if(Y&&(Ln=Ni(Wi.aabb.distanceZ(wt)*ft)),this.projection.isReprojectedInTileSpace&&I<=5){const Sr=Math.pow(2,Wi.zoom),Ir=pi(new n.MercatorCoordinate((Wi.x+.5)/Sr,(Wi.y+.5)/Sr));Hn=Ir>.85?1:Ir}const Rr=on*on+Wn*Wn+Ln;return Rr<Ni((1<<Yi-Wi.zoom)*Ye*Hn*((Sr,Ir)=>{if(Ir*Ni(.707)<Sr)return 1;const xs=Math.sqrt(Ir/Sr);return xs/(1.4144271570014144+(Math.pow(1.1,xs-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Ln,dn),Rr))};if(this.renderWorldCopies)for(let Wi=1;Wi<=3;Wi++)Ii.push(ai(-Wi)),Ii.push(ai(Wi));for(Ii.push(ai(0));Ii.length>0;){const Wi=Ii.pop(),on=Wi.x,Wn=Wi.y;let Ln=Wi.fullyVisible;if(!Ln){const Hn=Wi.aabb.intersects(et);if(0===Hn)continue;Ln=2===Hn}if(Wi.zoom!==Yi&&Dn(Wi))for(let Hn=0;Hn<4;Hn++){const Rr=(on<<1)+Hn%2,ms=(Wn<<1)+(Hn>>1),Sr={aabb:V?Wi.aabb.quadrant(Hn):n.tileAABB(this,ue,Wi.zoom+1,Rr,ms,Wi.wrap,Wi.minZ,Wi.maxZ,this.projection),zoom:Wi.zoom+1,x:Rr,y:ms,wrap:Wi.wrap,fullyVisible:Ln,tileID:void 0,shouldSplit:void 0,minZ:Wi.minZ,maxZ:Wi.maxZ};Y&&!ye&&(Sr.tileID=new n.OverscaledTileID(Wi.zoom+1===Yi?Gn:Wi.zoom+1,Wi.wrap,Wi.zoom+1,Rr,ms),Vi(Sr)),Ii.push(Sr)}else{const Hn=Wi.zoom===Yi?Gn:Wi.zoom;if(d.minzoom&&d.minzoom>Hn)continue;const Rr=be[0]-(.5+on+(Wi.wrap<<Wi.zoom))*(1<<_-Wi.zoom),ms=be[1]-.5-Wn,Sr=Wi.tileID?Wi.tileID:new n.OverscaledTileID(Hn,Wi.wrap,Wi.zoom,on,Wn);Ei.push({tileID:Sr,distanceSq:Rr*Rr+ms*ms})}}if(this.fogCullDistSq){const Wi=this.fogCullDistSq,on=this.horizonLineFromTop();Ei=Ei.filter(Wn=>{const Ln=[0,0,0,1],Hn=[n.EXTENT,n.EXTENT,0,1],Rr=this.calculateFogTileMatrix(Wn.tileID.toUnwrapped());n.transformMat4$1(Ln,Ln,Rr),n.transformMat4$1(Hn,Hn,Rr);const ms=n.getAABBPointSquareDist(Ln,Hn);if(0===ms)return!0;let Sr=!1;const Ir=this._elevation;if(Ir&&ms>Wi&&0!==on){const xs=this.calculateProjMatrix(Wn.tileID.toUnwrapped());let cs;d.isTerrainDEM||(cs=Ir.getMinMaxForTile(Wn.tileID)),cs||(cs={min:xt,max:zt});const zr=n.furthestTileCorner(this.rotation),Qs=[zr[0]*n.EXTENT,zr[1]*n.EXTENT,cs.max];n.transformMat4(Qs,Qs,xs),Sr=(1-Qs[1])*this.height*.5<on}return ms<Wi||Sr})}return Ei.sort((Wi,on)=>Wi.distanceSq-on.distanceSq).map(Wi=>Wi.tileID)}resize(d,_){this.width=d,this.height=_,this.pixelsToGLUnits=[2/d,-2/_],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const _=n.clamp(d.lat,-n.MAX_MERCATOR_LATITUDE,n.MAX_MERCATOR_LATITUDE),I=this.projection.project(d.lng,_);return new n.Point(I.x*this.worldSize,I.y*this.worldSize)}unproject(d){return this.projection.unproject(d.x/this.worldSize,d.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(d,_){let I,Y;const V=this.centerPoint;if("globe"===this.projection.name){const re=this.worldSize;I=(_.x-V.x)/re,Y=(_.y-V.y)/re}else{const re=this.pointCoordinate(_),ue=this.pointCoordinate(V);I=re.x-ue.x,Y=re.y-ue.y}const Q=this.locationCoordinate(d);this.setLocation(new n.MercatorCoordinate(Q.x-I,Q.y-Y))}setLocation(d){this.center=this.coordinateLocation(d),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(d){return this.projection.locationPoint(this,d)}locationPoint3D(d){return this.projection.locationPoint(this,d,!0)}pointLocation(d){return this.coordinateLocation(this.pointCoordinate(d))}pointLocation3D(d){return this.coordinateLocation(this.pointCoordinate3D(d))}locationCoordinate(d,_){const I=_?n.mercatorZfromAltitude(_,d.lat):void 0,Y=this.projection.project(d.lng,d.lat);return new n.MercatorCoordinate(Y.x,Y.y,I)}coordinateLocation(d){return this.projection.unproject(d.x,d.y)}pointRayIntersection(d,_){const I=_??this._centerAltitude,Y=[d.x,d.y,0,1],V=[d.x,d.y,1,1];n.transformMat4$1(Y,Y,this.pixelMatrixInverse),n.transformMat4$1(V,V,this.pixelMatrixInverse);const Q=V[3];n.scale$1(Y,Y,1/Y[3]),n.scale$1(V,V,1/Q);const re=Y[2],ue=V[2];return{p0:Y,p1:V,t:re===ue?0:(I-re)/(ue-re)}}screenPointToMercatorRay(d){const _=[d.x,d.y,0,1],I=[d.x,d.y,1,1];return n.transformMat4$1(_,_,this.pixelMatrixInverse),n.transformMat4$1(I,I,this.pixelMatrixInverse),n.scale$1(_,_,1/_[3]),n.scale$1(I,I,1/I[3]),_[2]=n.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,I[2]=n.mercatorZfromAltitude(I[2],this._center.lat)*this.worldSize,n.scale$1(_,_,1/this.worldSize),n.scale$1(I,I,1/this.worldSize),new n.Ray([_[0],_[1],_[2]],n.normalize([],n.sub([],I,_)))}rayIntersectionCoordinate(d){const{p0:_,p1:I,t:Y}=d,V=n.mercatorZfromAltitude(_[2],this._center.lat),Q=n.mercatorZfromAltitude(I[2],this._center.lat);return new n.MercatorCoordinate(n.number(_[0],I[0],Y)/this.worldSize,n.number(_[1],I[1],Y)/this.worldSize,n.number(V,Q,Y))}pointCoordinate(d,_=this._centerAltitude){return this.projection.pointCoordinate(this,d.x,d.y,_)}pointCoordinate3D(d){if(!this.elevation)return this.pointCoordinate(d);let _=this.projection.pointCoordinate3D(this,d.x,d.y);if(_)return new n.MercatorCoordinate(_[0],_[1],_[2]);let I=0,Y=this.horizonLineFromTop();if(d.y>Y)return this.pointCoordinate(d);const V=.02*Y,Q=d.clone();for(let re=0;re<10&&Y-I>V;re++){Q.y=n.number(I,Y,.66);const ue=this.projection.pointCoordinate3D(this,Q.x,Q.y);ue?(Y=Q.y,_=ue):I=Q.y}return _?new n.MercatorCoordinate(_[0],_[1],_[2]):this.pointCoordinate(d)}isPointAboveHorizon(d){return this.projection.isPointAboveHorizon(this,d)}isPointOnSurface(d){if(d.y<0||d.y>this.height||d.x<0||d.x>this.width)return!1;if(this.elevation||this.zoom>=n.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(d);const _=this.pointCoordinate(d);return _.y>=0&&_.y<=1}_coordinatePoint(d,_){const I=_&&this.elevation?this.elevation.getAtPointOrZero(d,this._centerAltitude):this._centerAltitude,Y=[d.x*this.worldSize,d.y*this.worldSize,I+d.toAltitude(),1];return n.transformMat4$1(Y,Y,this.pixelMatrix),Y[3]>0?new n.Point(Y[0]/Y[3],Y[1]/Y[3]):new n.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:d,left:_}=this._edgeInsets,I=this.height-this._edgeInsets.bottom,Y=this.width-this._edgeInsets.right,V=this.pointLocation3D(new n.Point(_,d)),Q=this.pointLocation3D(new n.Point(Y,d)),re=this.pointLocation3D(new n.Point(Y,I)),ue=this.pointLocation3D(new n.Point(_,I));let be=Math.min(V.lng,Q.lng,re.lng,ue.lng),ye=Math.max(V.lng,Q.lng,re.lng,ue.lng),Fe=Math.min(V.lat,Q.lat,re.lat,ue.lat),et=Math.max(V.lat,Q.lat,re.lat,ue.lat);const ut=Math.pow(2,-this.zoom)/16*270,ft="globe"===this.projection.name?1:4,vt=(wt,Ye,ht,zt,xt)=>{const fi=(wt+ht)/2,pi=(Ye+zt)/2,ai=new n.Point(fi,pi),{lng:Ii,lat:Ei}=this.pointLocation3D(ai),Yi=Math.max(0,be-Ii,Fe-Ei,Ii-ye,Ei-et);be=Math.min(be,Ii),ye=Math.max(ye,Ii),Fe=Math.min(Fe,Ei),et=Math.max(et,Ei),(xt<ft||Yi>ut)&&(vt(wt,Ye,fi,pi,xt+1),vt(fi,pi,ht,zt,xt+1))};if(vt(_,d,Y,d,1),vt(Y,d,Y,I,1),vt(Y,I,_,I,1),vt(_,I,_,d,1),"globe"===this.projection.name){const[wt,Ye]=n.polesInViewport(this);wt?(et=90,ye=180,be=-180):Ye&&(Fe=-90,ye=180,be=-180)}return new n.LngLatBounds(new n.LngLat(be,Fe),new n.LngLat(ye,et))}_getBoundsRectangular(d,_){const{top:I,left:Y}=this._edgeInsets,V=this.height-this._edgeInsets.bottom,Q=this.width-this._edgeInsets.right,re=new n.Point(Y,I),ue=new n.Point(Q,I),be=new n.Point(Q,V),ye=new n.Point(Y,V);let Fe=this.pointCoordinate(re,d),et=this.pointCoordinate(ue,d);const ut=this.pointCoordinate(be,_),ft=this.pointCoordinate(ye,_),vt=(wt,Ye)=>(Ye.y-wt.y)/(Ye.x-wt.x);return Fe.y>1&&et.y>=0?Fe=new n.MercatorCoordinate((1-ft.y)/vt(ft,Fe)+ft.x,1):Fe.y<0&&et.y<=1&&(Fe=new n.MercatorCoordinate(-ft.y/vt(ft,Fe)+ft.x,0)),et.y>1&&Fe.y>=0?et=new n.MercatorCoordinate((1-ut.y)/vt(ut,et)+ut.x,1):et.y<0&&Fe.y<=1&&(et=new n.MercatorCoordinate(-ut.y/vt(ut,et)+ut.x,0)),(new n.LngLatBounds).extend(this.coordinateLocation(Fe)).extend(this.coordinateLocation(et)).extend(this.coordinateLocation(ft)).extend(this.coordinateLocation(ut))}_getBoundsRectangularTerrain(){const d=this.elevation;if(!d.visibleDemTiles.length||d.isUsingMockSource())return this._getBoundsRectangular(0,0);const _=d.visibleDemTiles.reduce((I,Y)=>{if(Y.dem){const V=Y.dem.tree;I.min=Math.min(I.min,V.minimums[0]),I.max=Math.max(I.max,V.maximums[0])}return I},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(_.min*d.exaggeration(),_.max*d.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(d=!0){const _=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,I=this.height/2-_*(1-this._horizonShift);return d?Math.max(0,I):I}getMaxBounds(){return this.maxBounds}setMaxBounds(d){this.maxBounds=d,this.minLat=-n.MAX_MERCATOR_LATITUDE,this.maxLat=n.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,d&&(this.minLat=d.getSouth(),this.maxLat=d.getNorth(),this.minLng=d.getWest(),this.maxLng=d.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=n.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=n.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=n.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(d,_){return this.projection.createTileMatrix(this,_,d)}calculateDistanceTileData(d){const _=d.key,I=this._distanceTileDataCache;if(I[_])return I[_];const Y=d.canonical,V=1/this.height,Q=this.cameraWorldSize,re=Q/this.zoomScale(Y.z),ue=(Y.x+Math.pow(2,Y.z)*d.wrap)*re,be=Y.y*re,ye=this.point;ye.x*=Q/this.worldSize,ye.y*=Q/this.worldSize;const Fe=this.angle,et=Math.sin(-Fe),ut=-Math.cos(-Fe);return I[_]={bearing:[et,ut],center:[(ye.x-ue)*V,(ye.y-be)*V],scale:re/n.EXTENT*V},I[_]}calculateFogTileMatrix(d){const _=d.key,I=this._fogTileMatrixCache;if(I[_])return I[_];const Y=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,d);return n.multiply(Y,this.worldToFogMatrix,Y),I[_]=new Float32Array(Y),I[_]}calculateProjMatrix(d,_=!1){const I=d.key,Y=_?this._alignedProjMatrixCache:this._projMatrixCache;if(Y[I])return Y[I];const V=this.calculatePosMatrix(d,this.worldSize);return n.multiply(V,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:_?this.alignedProjMatrix:this.projMatrix,V),Y[I]=new Float32Array(V),Y[I]}calculatePixelsToTileUnitsMatrix(d){const _=d.tileID.key,I=this._pixelsToTileUnitsCache;if(I[_])return I[_];const Y=function(V,Q){const{scale:re}=V.tileTransform,ue=re*n.EXTENT/(V.tileSize*Math.pow(2,Q.zoom-V.tileID.overscaledZ+V.tileID.canonical.z));return be=new Float32Array(4),et=(ye=Q.inverseAdjustmentMatrix)[1],ut=ye[2],ft=ye[3],wt=(Fe=[ue,ue])[1],be[0]=ye[0]*(vt=Fe[0]),be[1]=et*vt,be[2]=ut*wt,be[3]=ft*wt,be;var be,ye,Fe,et,ut,ft,vt,wt}(d,this);return I[_]=Y,I[_]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const d=1/this.worldSize,_=n.fromScaling([],[d,d,d]);return n.multiply(_,_,this.globeMatrix),_}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const d=this._elevation;this._updateCameraState();const _=n.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,I=this._computeCameraPosition(_),Y=this._camera.forward(),V=n.mercatorZfromAltitude(1,this._center.lat);I[2]/=V,Y[2]/=V,n.normalize(Y,Y);const Q=d.raycast(I,Y,d.exaggeration());if(Q){const re=n.scaleAndAdd([],I,Y,Q),ue=new n.MercatorCoordinate(re[0],re[1],n.mercatorZfromAltitude(re[2],n.latFromMercatorY(re[1]))),be=(ue.z+n.length([ue.x-I[0],ue.y-I[1],ue.z-I[2]*V]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(be),this._centerAltitude=ue.toAltitude(),this._center=this.coordinateLocation(ue),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(d=!1){if(!this._elevation)return;const _=this._elevation,I=n.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,Y=this._computeCameraPosition(I),V=_.getAtPointOrZero(new n.MercatorCoordinate(...Y)),Q=this.pixelsPerMeter/this.worldSize*V,re=this._minimumHeightOverTerrain(),ue=Y[2]-Q;if(ue<=re)if(ue<0||d){const be=this.locationCoordinate(this._center,this._centerAltitude),ye=[Y[0],Y[1],be.z-Y[2]],Fe=n.length(ye);ye[2]-=(re-ue)/this._pixelsPerMercatorPixel;const et=n.length(ye);if(0===et)return;n.scale$2(ye,ye,Fe/et*this._pixelsPerMercatorPixel),this._camera.position=[Y[0],Y[1],be.z*this._pixelsPerMercatorPixel-ye[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const d="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||d){const et=this.center;return et.lat=n.clamp(et.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!d)&&(et.lng=n.clamp(et.lng,this.minLng,this.maxLng)),this.center=et,void(this._constraining=!1)}const _=this._unmodified,{x:I,y:Y}=this.point;let V=0,Q=I,re=Y;const ue=this.width/2,be=this.height/2,ye=this.worldMinY*this.scale,Fe=this.worldMaxY*this.scale;if(Y-be<ye&&(re=ye+be),Y+be>Fe&&(re=Fe-be),Fe-ye<this.height&&(V=Math.max(V,this.height/(Fe-ye)),re=(Fe+ye)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const et=this.worldMinX*this.scale,ut=this.worldMaxX*this.scale,ft=this.worldSize/2-(et+ut)/2;Q=(I+ft+this.worldSize)%this.worldSize-ft,Q-ue<et&&(Q=et+ue),Q+ue>ut&&(Q=ut-ue),ut-et<this.width&&(V=Math.max(V,this.width/(ut-et)),Q=(ut+et)/2)}Q===I&&re===Y||(this.center=this.unproject(new n.Point(Q,re))),V&&(this.zoom+=this.scaleZoom(V)),this._constrainCamera(),this._unmodified=_,this._constraining=!1}_minZoomForBounds(){let d=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(d=Math.max(d,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),d}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,_=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=n.mercatorZfromAltitude(1,this.center.lat)/n.mercatorZfromAltitude(1,n.GLOBE_SCALE_MATCH_LATITUDE));const I=Su(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,I),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const Y="meters"===this.projection.zAxisUnit?_:1,V=this._camera.getWorldToCamera(this.worldSize,Y),Q=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Q[8]=2*-d.x/this.width,Q[9]=2*d.y/this.height;let re=n.mul([],Q,V);if(this.projection.isReprojectedInTileSpace){const pi=this.locationCoordinate(this.center),ai=n.identity([]);n.translate(ai,ai,[pi.x*this.worldSize,pi.y*this.worldSize,0]),n.multiply(ai,ai,Cc(this)),n.translate(ai,ai,[-pi.x*this.worldSize,-pi.y*this.worldSize,0]),n.multiply(re,re,ai),this.inverseAdjustmentMatrix=function(Ii){const Ei=Cc(Ii,!0);return kt([],[Ei[0],Ei[1],Ei[4],Ei[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=n.scale([],re,[this.worldSize,this.worldSize,this.worldSize/Y,1]),this.projMatrix=re,this.invProjMatrix=n.invert(new Float64Array(16),this.projMatrix);const ue=n.invert([],Q);this.frustumCorners=n.FrustumCorners.fromInvProjectionMatrix(ue,this.horizonLineFromTop(),this.height);const be=new Float32Array(16);n.identity(be),n.scale(be,be,[1,-1,1]),n.rotateX(be,be,this._pitch),n.rotateZ(be,be,this.angle);const ye=n.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Fe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ye[8]=2*-d.x/this.width,ye[9]=2*(d.y+Fe)/this.height,this.skyboxMatrix=n.multiply(be,ye,be);const et=this.point,ut=et.x,ft=et.y,vt=this.width%2/2,wt=this.height%2/2,Ye=Math.cos(this.angle),ht=Math.sin(this.angle),zt=ut-Math.round(ut)+Ye*vt+ht*wt,xt=ft-Math.round(ft)+Ye*wt+ht*vt,fi=new Float64Array(re);if(n.translate(fi,fi,[zt>.5?zt-1:zt,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=fi,re=n.create(),n.scale(re,re,[this.width/2,-this.height/2,1]),n.translate(re,re,[1,-1,0]),this.labelPlaneMatrix=re,re=n.create(),n.scale(re,re,[1,-1,1]),n.translate(re,re,[-1,-1,0]),n.scale(re,re,[2/this.width,2/this.height,1]),this.glCoordMatrix=re,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},re=n.invert(new Float64Array(16),this.pixelMatrix),!re)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=re,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=n.calculateGlobeMatrix(this);const pi=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.transformMat4(pi,pi,V),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=re;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const d=this.cameraWorldSizeForFog,_=this.cameraPixelsPerMeter,I=this._camera.position,Y=1/this.height/this._pixelsPerMercatorPixel,V=[d,d,_];n.scale$2(V,V,Y),n.scale$2(I,I,-1),n.multiply$2(I,I,V);const Q=n.create();n.translate(Q,Q,I),n.scale(Q,Q,V),this.mercatorFogMatrix=Q,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(d,_,Y)}_computeCameraPosition(d){const _=(d=d||this.pixelsPerMeter)/this.pixelsPerMeter,I=this._camera.forward(),Y=this.point,V=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*_-d/this.worldSize*this._centerAltitude;return[Y.x/this.worldSize-I[0]*V,Y.y/this.worldSize-I[1]*V,d/this.worldSize*this._centerAltitude-I[2]*V]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(d){const _=this._maxCameraBoundsDistance()*Math.cos(this._pitch),I=this._camera.position[2],Y=d[2];let V=1;this.projection.wrap&&(this.center=this.center.wrap()),Y>0&&(V=Math.min((_-I)/Y,1)),this._camera.position=n.scaleAndAdd([],this._camera.position,d,V),this._updateStateFromCamera()}_updateStateFromCamera(){const d=this._camera.position,_=this._camera.forward(),{pitch:I,bearing:Y}=this._camera.getPitchBearing(),V=n.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Q=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.degToRad(this._maxPitch)),re=Math.max((d[2]-V)/Math.cos(I),Q),ue=this._zoomFromMercatorZ(re);n.scaleAndAdd(d,d,_,re),this._pitch=n.clamp(I,n.degToRad(this.minPitch),n.degToRad(this.maxPitch)),this.angle=n.wrap(Y,-Math.PI,Math.PI),this._setZoom(n.clamp(ue,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.MercatorCoordinate(d[0],d[1],d[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(d){return Math.pow(2,d)*this.tileSize}_mercatorZfromZoom(d){return this.cameraToCenterDistance/this._worldSizeFromZoom(d)}_minimumHeightOverTerrain(){const d=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(d)}_zoomFromMercatorZ(d){return this.scaleZoom(this.cameraToCenterDistance/(d*this.tileSize))}zoomFromMercatorZAdjusted(d){let _=0,I=n.GLOBE_ZOOM_THRESHOLD_MAX,Y=0,V=1/0;for(;I-_>1e-6&&I>_;){const Q=_+.5*(I-_),re=this.tileSize*Math.pow(2,Q),ue=this.getCameraToCenterDistance(this.projection,Q,re),be=this.scaleZoom(ue/(d*this.tileSize)),ye=Math.abs(Q-be);ye<V&&(V=ye,Y=Q),Q<be?_=Q:I=Q}return Y}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(d,_){const I=Math.min(d.x,_.x),Y=Math.max(d.x,_.x),V=Math.min(d.y,_.y),Q=Math.max(d.y,_.y);if(V<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const re=[new n.Point(I,V),new n.Point(Y,Q),new n.Point(I,Q),new n.Point(Y,V)],ue=this.renderWorldCopies?-3:0,be=this.renderWorldCopies?4:1;for(const ye of re){const Fe=this.pointRayIntersection(ye);if(Fe.t<0)return!0;const et=this.rayIntersectionCoordinate(Fe);if(et.x<ue||et.y<0||et.x>be||et.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.Point(0,0),new n.Point(this.width,this.height))}zoomDeltaToMovement(d,_){const I=n.length(n.sub([],this._camera.position,d)),Y=this._zoomFromMercatorZ(I)+_;return I-this._mercatorZfromZoom(Y)}getCameraPoint(){if("globe"===this.projection.name){const d=function([_,I,Y],V){const Q=[_,I,Y,1];n.transformMat4$1(Q,Q,V);const re=Q[3]=Math.max(Q[3],1e-6);return Q[0]/=re,Q[1]/=re,Q[2]/=re,Q}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.Point(d[0],d[1])}{const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.Point(0,d))}}getCameraToCenterDistance(d,_=this.zoom,I=this.worldSize){const Y=Su(d,_,this.width,this.height,1024),V=d.pixelSpaceConversion(this.center.lat,I,Y);return.5/Math.tan(.5*this._fov)*this.height*V}getWorldToCameraMatrix(){const d=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&n.multiply(d,d,this.globeMatrix),d}}function Ec(k,d){let _=!1,I=null;const Y=()=>{I=null,_&&(k(),I=setTimeout(Y,d),_=!1)};return()=>(_=!0,I||Y(),I)}class Hc{constructor(d){this._hashName=d&&encodeURIComponent(d),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ec(this._updateHashUnthrottled.bind(this),300)}addTo(d){return this._map=d,n.window.addEventListener("hashchange",this._onHashChange,!1),d.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),n.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const d=this._map;if(!d)return"";const _=au(d);if(this._hashName){const I=this._hashName;let Y=!1;const V=n.window.location.hash.slice(1).split("&").map(Q=>{const re=Q.split("=")[0];return re===I?(Y=!0,`${re}=${_}`):Q}).filter(Q=>Q);return Y||V.push(`${I}=${_}`),`#${V.join("&")}`}return`#${_}`}_getCurrentHash(){const d=n.window.location.hash.replace("#","");if(this._hashName){let _;return d.split("&").map(I=>I.split("=")).forEach(I=>{I[0]===this._hashName&&(_=I)}),(_&&_[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._map;if(!d)return!1;const _=this._getCurrentHash();if(_.length>=3&&!_.some(I=>isNaN(I))){const I=d.dragRotate.isEnabled()&&d.touchZoomRotate.isEnabled()?+(_[3]||0):d.getBearing();return d.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:I,pitch:+(_[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=n.window.location.href.replace(/(#.+)?$/,this.getHashString());n.window.history.replaceState(n.window.history.state,null,d)}}function au(k,d){const _=k.getCenter(),I=Math.round(100*k.getZoom())/100,Y=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),V=Math.pow(10,Y),Q=Math.round(_.lng*V)/V,re=Math.round(_.lat*V)/V,ue=k.getBearing(),be=k.getPitch();let ye=d?`/${Q}/${re}/${I}`:`${I}/${re}/${Q}`;return(ue||be)&&(ye+="/"+Math.round(10*ue)/10),be&&(ye+=`/${Math.round(be)}`),ye}const vh={linearity:.3,easing:n.bezier(0,0,.3,1)},ou=n.extend({deceleration:2500,maxSpeed:1400},vh),lo=n.extend({deceleration:20,maxSpeed:1400},vh),lr=n.extend({deceleration:1e3,maxSpeed:360},vh),v=n.extend({deceleration:1e3,maxSpeed:90},vh);class R{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,_=n.exported.now();for(;d.length>0&&_-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const _={zoom:0,bearing:0,pitch:0,pan:new n.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:V}of this._inertiaBuffer)_.zoom+=V.zoomDelta||0,_.bearing+=V.bearingDelta||0,_.pitch+=V.pitchDelta||0,V.panDelta&&_.pan._add(V.panDelta),V.around&&(_.around=V.around),V.pinchAround&&(_.pinchAround=V.pinchAround);const I=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Y={};if(_.pan.mag()){const V=fe(_.pan.mag(),I,n.extend({},ou,d||{}));Y.offset=_.pan.mult(V.amount/_.pan.mag()),Y.center=this._map.transform.center,Z(Y,V)}if(_.zoom){const V=fe(_.zoom,I,lo);Y.zoom=this._map.transform.zoom+V.amount,Z(Y,V)}if(_.bearing){const V=fe(_.bearing,I,lr);Y.bearing=this._map.transform.bearing+n.clamp(V.amount,-179,179),Z(Y,V)}if(_.pitch){const V=fe(_.pitch,I,v);Y.pitch=this._map.transform.pitch+V.amount,Z(Y,V)}if(Y.zoom||Y.bearing){const V=void 0===_.pinchAround?_.around:_.pinchAround;Y.around=V?this._map.unproject(V):this._map.getCenter()}return this.clear(),Y.noMoveStart=!0,Y}}function Z(k,d){(!k.duration||k.duration<d.duration)&&(k.duration=d.duration,k.easing=d.easing)}function fe(k,d,_){const{maxSpeed:I,linearity:Y,deceleration:V}=_,Q=n.clamp(k*Y/(d/1e3),-I,I),re=Math.abs(Q)/(V*Y);return{easing:_.easing,duration:1e3*re,amount:Q*(re/2)}}class Ie extends n.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,_,I,Y={}){const V=Pi(_.getCanvasContainer(),I),Q=_.unproject(V);super(d,n.extend({point:V,lngLat:Q,originalEvent:I},Y)),this._defaultPrevented=!1,this.target=_}}class rt extends n.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,_,I){const Y="touchend"===d?I.changedTouches:I.touches,V=tt(_.getCanvasContainer(),Y),Q=V.map(ue=>_.unproject(ue)),re=V.reduce((ue,be,ye,Fe)=>ue.add(be.div(Fe.length)),new n.Point(0,0));super(d,{points:V,point:re,lngLats:Q,lngLat:_.unproject(re),originalEvent:I}),this._defaultPrevented=!1}}class ri extends n.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,_,I){super(d,{originalEvent:I}),this._defaultPrevented=!1}}class Ai{constructor(d,_){this._map=d,this._clickTolerance=_.clickTolerance}reset(){this._mousedownPos=void 0}wheel(d){return this._firePreventable(new ri(d.type,this._map,d))}mousedown(d,_){return this._mousedownPos=_,this._firePreventable(new Ie(d.type,this._map,d))}mouseup(d){this._map.fire(new Ie(d.type,this._map,d))}preclick(d){const _=n.extend({},d);_.type="preclick",this._map.fire(new Ie(_.type,this._map,_))}click(d,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||(this.preclick(d),this._map.fire(new Ie(d.type,this._map,d)))}dblclick(d){return this._firePreventable(new Ie(d.type,this._map,d))}mouseover(d){this._map.fire(new Ie(d.type,this._map,d))}mouseout(d){this._map.fire(new Ie(d.type,this._map,d))}touchstart(d){return this._firePreventable(new rt(d.type,this._map,d))}touchmove(d){this._map.fire(new rt(d.type,this._map,d))}touchend(d){this._map.fire(new rt(d.type,this._map,d))}touchcancel(d){this._map.fire(new rt(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ln{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(d){this._map.fire(new Ie(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ie("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new Ie(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qn{constructor(d,_){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=_.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,_){this.isEnabled()&&d.shiftKey&&0===d.button&&(Xt(),this._startPos=this._lastPos=_,this._active=!0)}mousemoveWindow(d,_){if(!this._active)return;const I=_,Y=this._startPos,V=this._lastPos;if(!Y||!V||V.equals(I)||!this._box&&I.dist(Y)<this._clickTolerance)return;this._lastPos=I,this._box||(this._box=$e("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const Q=Math.min(Y.x,I.x),re=Math.max(Y.x,I.x),ue=Math.min(Y.y,I.y),be=Math.max(Y.y,I.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Q}px,${ue}px)`,this._box.style.width=re-Q+"px",this._box.style.height=be-ue+"px")})}mouseupWindow(d,_){if(!this._active)return;const I=this._startPos,Y=_;if(I&&0===d.button){if(this.reset(),Nt(),I.x!==Y.x||I.y!==Y.y)return this._map.fire(new n.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:V=>V.fitScreenCoordinates(I,Y,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",d)}}keydown(d){this._active&&27===d.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",d))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Et(),delete this._startPos,delete this._lastPos}_fireEvent(d,_){return this._map.fire(new n.Event(d,{originalEvent:_}))}}function Dr(k,d){const _={};for(let I=0;I<k.length;I++)_[k[I].identifier]=d[I];return _}class Qr{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(d,_,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=d.timeStamp),I.length===this.numTouches&&(this.centroid=function(Y){const V=new n.Point(0,0);for(const Q of Y)V._add(Q);return V.div(Y.length)}(_),this.touches=Dr(I,_)))}touchmove(d,_,I){if(this.aborted||!this.centroid)return;const Y=Dr(I,_);for(const V in this.touches){const Q=Y[V];(!Q||Q.dist(this.touches[V])>30)&&(this.aborted=!0)}}touchend(d,_,I){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),0===I.length){const Y=!this.aborted&&this.centroid;if(this.reset(),Y)return Y}}}class Ps{constructor(d){this.singleTap=new Qr(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(d,_,I){this.singleTap.touchstart(d,_,I)}touchmove(d,_,I){this.singleTap.touchmove(d,_,I)}touchend(d,_,I){const Y=this.singleTap.touchend(d,_,I);if(Y){const V=d.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(Y)<30;if(V&&Q||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=Y,this.count===this.numTaps)return this.reset(),Y}}}class $s{constructor(){this._zoomIn=new Ps({numTouches:1,numTaps:2}),this._zoomOut=new Ps({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,_,I){this._zoomIn.touchstart(d,_,I),this._zoomOut.touchstart(d,_,I)}touchmove(d,_,I){this._zoomIn.touchmove(d,_,I),this._zoomOut.touchmove(d,_,I)}touchend(d,_,I){const Y=this._zoomIn.touchend(d,_,I),V=this._zoomOut.touchend(d,_,I);return Y?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:Q.getZoom()+1,around:Q.unproject(Y)},{originalEvent:d})}):V?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:Q.getZoom()-1,around:Q.unproject(V)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const uo={0:1,2:2};class vo{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(d,_){return!1}_move(d,_){return{}}mousedown(d,_){if(this._lastPoint)return;const I=Ci(d);this._correctButton(d,I)&&(this._lastPoint=_,this._eventButton=I)}mousemoveWindow(d,_){const I=this._lastPoint;if(I)if(d.preventDefault(),null!=this._eventButton&&function(Y,V){const Q=uo[V];return void 0===Y.buttons||(Y.buttons&Q)!==Q}(d,this._eventButton))this.reset();else if(this._moved||!(_.dist(I)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(I,_)}mouseupWindow(d){this._lastPoint&&Ci(d)===this._eventButton&&(this._moved&&Nt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ho extends vo{mousedown(d,_){super.mousedown(d,_),this._lastPoint&&(this._active=!0)}_correctButton(d,_){return 0===_&&!d.ctrlKey}_move(d,_){return{around:_,panDelta:_.sub(d)}}}class Cl extends vo{_correctButton(d,_){return 0===_&&d.ctrlKey||2===_}_move(d,_){const I=.8*(_.x-d.x);if(I)return this._active=!0,{bearingDelta:I}}contextmenu(d){d.preventDefault()}}class Vc extends vo{_correctButton(d,_){return 0===_&&d.ctrlKey||2===_}_move(d,_){const I=-.5*(_.y-d.y);if(I)return this._active=!0,{pitchDelta:I}}contextmenu(d){d.preventDefault()}}class Yo{constructor(d,_){this._map=d,this._el=d.getCanvasContainer(),this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset(),n.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.Point(0,0)}touchstart(d,_,I){return this._calculateTransform(d,_,I)}touchmove(d,_,I){if(this._active&&!(I.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===I.length&&!n.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return d.cancelable&&d.preventDefault(),this._calculateTransform(d,_,I)}}touchend(d,_,I){this._calculateTransform(d,_,I),this._active&&I.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,_,I){I.length>0&&(this._active=!0);const Y=Dr(I,_),V=new n.Point(0,0),Q=new n.Point(0,0);let re=0;for(const be in Y){const ye=Y[be],Fe=this._touches[be];Fe&&(V._add(ye),Q._add(ye.sub(Fe)),re++,Y[be]=ye)}if(this._touches=Y,re<this._minTouches||!Q.mag())return;const ue=Q.div(re);return this._sum._add(ue),this._sum.mag()<this._clickTolerance?void 0:{around:V.div(re),panDelta:ue}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$e("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Cd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(d){}_move(d,_,I){return{}}touchstart(d,_,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([_[0],_[1]]))}touchmove(d,_,I){const Y=this._firstTwoTouches;if(!Y)return;d.preventDefault();const[V,Q]=Y,re=_h(I,_,V),ue=_h(I,_,Q);if(!re||!ue)return;const be=this._aroundCenter?null:re.add(ue).div(2);return this._move([re,ue],be,d)}touchend(d,_,I){if(!this._firstTwoTouches)return;const[Y,V]=this._firstTwoTouches,Q=_h(I,_,Y),re=_h(I,_,V);Q&&re||(this._active&&Nt(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function _h(k,d,_){for(let I=0;I<k.length;I++)if(k[I].identifier===_)return d[I]}function Uc(k,d){return Math.log(k/d)/Math.LN2}class sd extends Cd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,_){const I=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(Uc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Uc(this._distance,I),pinchAround:_}}}function ze(k,d){return 180*k.angleWith(d)/Math.PI}class ae extends Cd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,_){const I=this._vector;if(this._vector=d[0].sub(d[1]),I&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ze(this._vector,I),pinchAround:_}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const _=25/(Math.PI*this._minDiameter)*360,I=this._startVector;if(!I)return!1;const Y=ze(d,I);return Math.abs(Y)<_}}function me(k){return Math.abs(k.y)>Math.abs(k.x)}class Ge extends Cd{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(d){this._lastPoints=d,me(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,_,I){const Y=this._lastPoints;if(!Y)return;const V=d[0].sub(Y[0]),Q=d[1].sub(Y[1]);return this._map._cooperativeGestures&&!n.isFullscreen()&&I.touches.length<3||(this._valid=this.gestureBeginsVertically(V,Q,I.timeStamp),!this._valid)?void 0:(this._lastPoints=d,this._active=!0,{pitchDelta:(V.y+Q.y)/2*-.5})}gestureBeginsVertically(d,_,I){if(void 0!==this._valid)return this._valid;const Y=d.mag()>=2,V=_.mag()>=2;if(!Y&&!V)return;if(!Y||!V)return null==this._firstMove&&(this._firstMove=I),I-this._firstMove<100&&void 0;const Q=d.y>0==_.y>0;return me(d)&&me(_)&&Q}}const Ee={panStep:100,bearingStep:15,pitchStep:10};class yn{constructor(){const d=Ee;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let _=0,I=0,Y=0,V=0,Q=0;switch(d.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:d.shiftKey?I=-1:(d.preventDefault(),V=-1);break;case 39:d.shiftKey?I=1:(d.preventDefault(),V=1);break;case 38:d.shiftKey?Y=1:(d.preventDefault(),Q=-1);break;case 40:d.shiftKey?Y=-1:(d.preventDefault(),Q=1);break;default:return}return this._rotationDisabled&&(I=0,Y=0),{cameraAnimation:re=>{const ue=re.getZoom();re.easeTo({duration:300,easeId:"keyboardHandler",easing:Tr,zoom:_?Math.round(ue)+_*(d.shiftKey?2:1):ue,bearing:re.getBearing()+I*this._bearingStep,pitch:re.getPitch()+Y*this._pitchStep,offset:[-V*this._panStep,-Q*this._panStep],center:re.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tr(k){return k*(2-k)}const ys=4.000244140625;class Or{constructor(d,_){this._map=d,this._el=d.getCanvasContainer(),this._handler=_,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,n.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(d.ctrlKey||d.metaKey||this.isZooming()||n.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let _=d.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const I=n.exported.now(),Y=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,0!==_&&_%ys==0?this._type="wheel":0!==_&&Math.abs(_)<4?this._type="trackpad":Y>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(Y*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),d.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=d,this._delta-=_,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const _=Pi(this._el,d);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:_,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;"wheel"===this._type&&d.projection.wrap&&(d._center.lng>=180||d._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const _=()=>d._terrainEnabled()&&this._aroundCoord?d.computeZoomRelativeTo(this._aroundCoord):d.zoom;if(0!==this._delta){const ue="wheel"===this._type&&Math.abs(this._delta)>ys?this._wheelZoomRate:this._defaultZoomRate;let be=2/(1+Math.exp(-Math.abs(this._delta*ue)));this._delta<0&&0!==be&&(be=1/be);const ye=_(),Fe=Math.pow(2,ye),et="number"==typeof this._targetZoom?d.zoomScale(this._targetZoom):Fe;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(et*be))),"wheel"===this._type&&(this._startZoom=ye,this._easing=this._smoothOutEasing(200)),this._delta=0}const I="number"==typeof this._targetZoom?this._targetZoom:_(),Y=this._startZoom,V=this._easing;let Q,re=!1;if("wheel"===this._type&&Y&&V){const ue=Math.min((n.exported.now()-this._lastWheelEventTime)/200,1),be=V(ue);Q=n.number(Y,I,be),ue<1?this._frameId||(this._frameId=!0):re=!0}else Q=I,re=!0;return this._active=!0,re&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!re,zoomDelta:Q-_(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let _=n.ease;if(this._prevEase){const I=this._prevEase,Y=(n.exported.now()-I.start)/I.duration,V=I.easing(Y+.01)-I.easing(Y),Q=.27/Math.sqrt(V*V+1e-4)*.01,re=Math.sqrt(.0729-Q*Q);_=n.bezier(Q,re,.25,1)}return this._prevEase={start:n.exported.now(),duration:d,easing:_},_}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$e("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(n.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class ko{constructor(d,_){this._clickZoom=d,this._tapZoom=_}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class jo{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(d,_){return d.preventDefault(),{cameraAnimation:I=>{I.easeTo({duration:300,zoom:I.getZoom()+(d.shiftKey?-1:1),around:I.unproject(_)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yp{constructor(){this._tap=new Ps({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(d,_,I){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?I.length>0&&(this._swipePoint=_[0],this._swipeTouch=I[0].identifier):this._tap.touchstart(d,_,I))}touchmove(d,_,I){if(this._tapTime){if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;const Y=_[0],V=Y.y-this._swipePoint.y;return this._swipePoint=Y,d.preventDefault(),this._active=!0,{zoomDelta:V/128}}}else this._tap.touchmove(d,_,I)}touchend(d,_,I){this._tapTime?this._swipePoint&&0===I.length&&this.reset():this._tap.touchend(d,_,I)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yh{constructor(d,_,I){this._el=d,this._mousePan=_,this._touchPan=I}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _v{constructor(d,_,I){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=_,this._mousePitch=I}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Sm{constructor(d,_,I,Y){this._el=d,this._touchZoom=_,this._touchRotate=I,this._tapDragZoom=Y,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ju=k=>k.zoom||k.drag||k.pitch||k.rotate;class fg extends n.Event{}class Du{constructor(){this.constants=[1,1,.01],this.radius=0}setup(d,_){const I=n.sub([],_,d);this.radius=n.length(I[2]<0?n.div([],I,this.constants):[I[0],I[1],0])}projectRay(d){n.div(d,d,this.constants),n.normalize(d,d),n.mul$1(d,d,this.constants);const _=n.scale$2([],d,this.radius);if(_[2]>0){const I=n.scale$2([],[0,0,1],n.dot(_,[0,0,1])),Y=n.scale$2([],n.normalize([],[_[0],_[1],0]),this.radius),V=n.add([],_,n.scale$2([],n.sub([],n.add([],Y,I),_),2));_[0]=V[0],_[1]=V[1]}return _}}function zl(k){return k.panDelta&&k.panDelta.mag()||k.zoomDelta||k.bearingDelta||k.pitchDelta}class Iu{constructor(d,_){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new R(d),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Du,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(_),n.bindAll(["handleEvent","handleWindowEvent"],this);const I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[n.window,"blur",void 0]];for(const[Y,V,Q]of this._listeners)Y.addEventListener(V,Y===n.window.document?this.handleWindowEvent:this.handleEvent,Q)}destroy(){for(const[d,_,I]of this._listeners)d.removeEventListener(_,d===n.window.document?this.handleWindowEvent:this.handleEvent,I)}_addDefaultHandlers(d){const _=this._map,I=_.getCanvasContainer();this._add("mapEvent",new Ai(_,d));const Y=_.boxZoom=new qn(_,d);this._add("boxZoom",Y);const V=new $s,Q=new jo;_.doubleClickZoom=new ko(Q,V),this._add("tapZoom",V),this._add("clickZoom",Q);const re=new Yp;this._add("tapDragZoom",re);const ue=_.touchPitch=new Ge(_);this._add("touchPitch",ue);const be=new Cl(d),ye=new Vc(d);_.dragRotate=new _v(d,be,ye),this._add("mouseRotate",be,["mousePitch"]),this._add("mousePitch",ye,["mouseRotate"]);const Fe=new ho(d),et=new Yo(_,d);_.dragPan=new yh(I,Fe,et),this._add("mousePan",Fe),this._add("touchPan",et,["touchZoom","touchRotate"]);const ut=new ae,ft=new sd;_.touchZoomRotate=new Sm(I,ft,ut,re),this._add("touchRotate",ut,["touchPan","touchZoom"]),this._add("touchZoom",ft,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ln(_));const vt=_.scrollZoom=new Or(_,this);this._add("scrollZoom",vt,["mousePan"]);const wt=_.keyboard=new yn;this._add("keyboard",wt);for(const Ye of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[Ye]&&_[Ye].enable(d[Ye])}_add(d,_,I){this._handlers.push({handlerName:d,handler:_,allowed:I}),this._handlersById[d]=_}stop(d){if(!this._updatingCamera){for(const{handler:_}of this._handlers)_.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ju(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(d,_,I){for(const Y in d)if(Y!==I&&(!_||_.indexOf(Y)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const _=[];for(const I of d)this._el.contains(I.target)&&_.push(I);return _}handleEvent(d,_){this._updatingCamera=!0;const I="renderFrame"===d.type,Y=I?void 0:d,V={needsRenderFrame:!1},Q={},re={},ue=d.touches?this._getMapTouches(d.touches):void 0,be=ue?tt(this._el,ue):I?void 0:Pi(this._el,d);for(const{handlerName:et,handler:ut,allowed:ft}of this._handlers){if(!ut.isEnabled())continue;let vt;this._blockedByActive(re,ft,et)?ut.reset():ut[_||d.type]&&(vt=ut[_||d.type](d,be,ue),this.mergeHandlerResult(V,Q,vt,et,Y),vt&&vt.needsRenderFrame&&this._triggerRenderFrame()),(vt||ut.isActive())&&(re[et]=ut)}const ye={};for(const et in this._previousActiveHandlers)re[et]||(ye[et]=Y);this._previousActiveHandlers=re,(Object.keys(ye).length||zl(V))&&(this._changes.push([V,Q,ye]),this._triggerRenderFrame()),(Object.keys(re).length||zl(V))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Fe}=V;Fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Fe(this._map))}mergeHandlerResult(d,_,I,Y,V){if(!I)return;n.extend(d,I);const Q={handlerName:Y,originalEvent:I.originalEvent||V};void 0!==I.zoomDelta&&(_.zoom=Q),void 0!==I.panDelta&&(_.drag=Q),void 0!==I.pitchDelta&&(_.pitch=Q),void 0!==I.bearingDelta&&(_.rotate=Q)}_applyChanges(){const d={},_={},I={};for(const[Y,V,Q]of this._changes)Y.panDelta&&(d.panDelta=(d.panDelta||new n.Point(0,0))._add(Y.panDelta)),Y.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+Y.zoomDelta),Y.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+Y.bearingDelta),Y.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+Y.pitchDelta),void 0!==Y.around&&(d.around=Y.around),void 0!==Y.aroundCoord&&(d.aroundCoord=Y.aroundCoord),void 0!==Y.pinchAround&&(d.pinchAround=Y.pinchAround),Y.noInertia&&(d.noInertia=Y.noInertia),n.extend(_,V),n.extend(I,Q);this._updateMapTransform(d,_,I),this._changes=[]}_updateMapTransform(d,_,I){const Y=this._map,V=Y.transform,Q=ht=>[ht.x,ht.y,ht.z];if((ht=>{const zt=this._eventsInProgress.drag;return zt&&!this._handlersById[zt.handlerName].isActive()})()&&!zl(d)){const ht=V.zoom;V.cameraElevationReference="sea",V.recenterOnTerrain(),V.cameraElevationReference="ground",ht!==V.zoom&&this._map._update(!0)}if(V._isCameraConstrained&&Y._stop(!0),!zl(d))return void this._fireEvents(_,I,!0);let{panDelta:re,zoomDelta:ue,bearingDelta:be,pitchDelta:ye,around:Fe,aroundCoord:et,pinchAround:ut}=d;V._isCameraConstrained&&(ue>0&&(ue=0),V._isCameraConstrained=!1),void 0!==ut&&(Fe=ut),(ue||(ht=>_.drag&&!this._eventsInProgress.drag)())&&Fe&&(this._dragOrigin=Q(V.pointCoordinate3D(Fe)),this._trackingEllipsoid.setup(V._camera.position,this._dragOrigin)),V.cameraElevationReference="sea",Y._stop(!0),Fe=Fe||Y.transform.centerPoint,be&&(V.bearing+=be),ye&&(V.pitch+=ye),V._updateCameraState();const ft=[0,0,0];if(re)if("mercator"===V.projection.name){const ht=this._trackingEllipsoid.projectRay(V.screenPointToMercatorRay(Fe).dir),zt=this._trackingEllipsoid.projectRay(V.screenPointToMercatorRay(Fe.sub(re)).dir);ft[0]=zt[0]-ht[0],ft[1]=zt[1]-ht[1]}else{const ht=V.pointCoordinate(Fe);if("globe"===V.projection.name){re=re.rotate(-V.angle);const zt=V._pixelsPerMercatorPixel/V.worldSize;ft[0]=-re.x*n.mercatorScale(n.latFromMercatorY(ht.y))*zt,ft[1]=-re.y*n.mercatorScale(V.center.lat)*zt}else{const zt=V.pointCoordinate(Fe.sub(re));ht&&zt&&(ft[0]=zt.x-ht.x,ft[1]=zt.y-ht.y)}}const vt=V.zoom,wt=[0,0,0];if(ue){const ht=Q(et||V.pointCoordinate3D(Fe)),zt={dir:n.normalize([],n.sub([],ht,V._camera.position))};if(zt.dir[2]<0){const xt=V.zoomDeltaToMovement(ht,ue);n.scale$2(wt,zt.dir,xt)}}const Ye=n.add(ft,ft,wt);V._translateCameraConstrained(Ye),ue&&Math.abs(V.zoom-vt)>1e-4&&V.recenterOnTerrain(),V.cameraElevationReference="ground",this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(_,I,!0)}_fireEvents(d,_,I){const Y=Ju(this._eventsInProgress),V=Ju(d),Q={};for(const ye in d){const{originalEvent:Fe}=d[ye];this._eventsInProgress[ye]||(Q[`${ye}start`]=Fe),this._eventsInProgress[ye]=d[ye]}!Y&&V&&this._fireEvent("movestart",V.originalEvent);for(const ye in Q)this._fireEvent(ye,Q[ye]);V&&this._fireEvent("move",V.originalEvent);for(const ye in d){const{originalEvent:Fe}=d[ye];this._fireEvent(ye,Fe)}const re={};let ue;for(const ye in this._eventsInProgress){const{handlerName:Fe,originalEvent:et}=this._eventsInProgress[ye];this._handlersById[Fe].isActive()||(delete this._eventsInProgress[ye],ue=_[Fe]||et,re[`${ye}end`]=ue)}for(const ye in re)this._fireEvent(ye,re[ye]);const be=Ju(this._eventsInProgress);if(I&&(Y||V)&&!be){this._updatingCamera=!0;const ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Fe=et=>0!==et&&-this._bearingSnap<et&&et<this._bearingSnap;ye?(Fe(ye.bearing||this._map.getBearing())&&(ye.bearing=0),this._map.easeTo(ye,{originalEvent:ue})):(this._map.fire(new n.Event("moveend",{originalEvent:ue})),Fe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,_){this._map.fire(new n.Event(d,_?{originalEvent:_}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{this._frameId=void 0,this.handleEvent(new fg("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const ff="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ql extends n.Evented{constructor(d,_){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=_.bearingSnap,this._respectPrefersReducedMotion=!1!==_.respectPrefersReducedMotion,n.bindAll(["_renderFrameCallback"],this)}getCenter(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,_){return this.jumpTo({center:d},_)}panBy(d,_,I){return d=n.Point.convert(d).mult(-1),this.panTo(this.transform.center,n.extend({offset:d},_),I)}panTo(d,_,I){return this.easeTo(n.extend({center:d},_),I)}getZoom(){return this.transform.zoom}setZoom(d,_){return this.jumpTo({zoom:d},_),this}zoomTo(d,_,I){return this.easeTo(n.extend({zoom:d},_),I)}zoomIn(d,_){return this.zoomTo(this.getZoom()+1,d,_),this}zoomOut(d,_){return this.zoomTo(this.getZoom()-1,d,_),this}getBearing(){return this.transform.bearing}setBearing(d,_){return this.jumpTo({bearing:d},_),this}getPadding(){return this.transform.padding}setPadding(d,_){return this.jumpTo({padding:d},_),this}rotateTo(d,_,I){return this.easeTo(n.extend({bearing:d},_),I)}resetNorth(d,_){return this.rotateTo(0,n.extend({duration:1e3},d),_),this}resetNorthPitch(d,_){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},d),_),this}snapToNorth(d,_){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,_):this}getPitch(){return this.transform.pitch}setPitch(d,_){return this.jumpTo({pitch:d},_),this}cameraForBounds(d,_){d=n.LngLatBounds.convert(d);const I=_&&_.bearing||0,Y=_&&_.pitch||0,V=d.getNorthWest(),Q=d.getSouthEast();return this._cameraForBounds(this.transform,V,Q,I,Y,_)}_extendCameraOptions(d){const _={top:0,bottom:0,right:0,left:0};if("number"==typeof(d=n.extend({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding){const I=d.padding;d.padding={top:I,bottom:I,right:I,left:I}}return d.padding=n.extend(_,d.padding),d}_minimumAABBFrustumDistance(d,_){const I=_.max[0]-_.min[0],Y=_.max[1]-_.min[1];return I/Y>d.aspect?I/(2*Math.tan(.5*d.fovX)*d.aspect):Y/(2*Math.tan(.5*d.fovY)*d.aspect)}_cameraForBoundsOnGlobe(d,_,I,Y,V,Q){const re=d.clone(),ue=this._extendCameraOptions(Q);re.bearing=Y,re.pitch=V;const be=n.LngLat.convert(_),ye=n.LngLat.convert(I),Fe=.5*(be.lat+ye.lat),et=.5*(be.lng+ye.lng),ut=n.latLngToECEF(Fe,et),ft=n.normalize([],ut),vt=n.normalize([],n.cross([],ft,[0,1,0])),wt=n.cross([],vt,ft),Ye=[vt[0],vt[1],vt[2],0,wt[0],wt[1],wt[2],0,ft[0],ft[1],ft[2],0,0,0,0,1],ht=[ut,n.latLngToECEF(be.lat,be.lng),n.latLngToECEF(ye.lat,be.lng),n.latLngToECEF(ye.lat,ye.lng),n.latLngToECEF(be.lat,ye.lng),n.latLngToECEF(Fe,be.lng),n.latLngToECEF(Fe,ye.lng),n.latLngToECEF(be.lat,et),n.latLngToECEF(ye.lat,et)];let zt=n.Aabb.fromPoints(ht.map(Ln=>[n.dot(vt,Ln),n.dot(wt,Ln),n.dot(ft,Ln)]));const xt=n.transformMat4([],zt.center,Ye);0===n.squaredLength(xt)&&n.set(xt,0,0,1),n.normalize(xt,xt),n.scale$2(xt,xt,n.GLOBE_RADIUS),re.center=n.ecefToLatLng(xt);const fi=re.getWorldToCameraMatrix(),pi=n.invert(new Float64Array(16),fi);zt=n.Aabb.applyTransform(zt,n.multiply([],fi,Ye)),n.transformMat4(xt,xt,fi);const ai=.5*(zt.max[2]-zt.min[2]),Ii=this._minimumAABBFrustumDistance(re,zt),Ei=n.scale$2([],[0,0,1],ai),Yi=n.add(Ei,xt,Ei),Gn=Ii+(0===re.pitch?0:n.distance(xt,Yi)),Ni=re.globeCenterInViewSpace,dn=n.sub([],xt,[Ni[0],Ni[1],Ni[2]]);n.normalize(dn,dn),n.scale$2(dn,dn,Gn);const Vi=n.add([],xt,dn);n.transformMat4(Vi,Vi,pi);const Dn=n.earthRadius/n.GLOBE_RADIUS,Wi=n.length(Vi),on=n.mercatorZfromAltitude(Math.max(Wi*Dn-n.earthRadius,Number.EPSILON),0),Wn=Math.min(re.zoomFromMercatorZAdjusted(on),ue.maxZoom);return Wn>.5*(n.GLOBE_ZOOM_THRESHOLD_MIN+n.GLOBE_ZOOM_THRESHOLD_MAX)?(re.setProjection({name:"mercator"}),re.zoom=Wn,this._cameraForBounds(re,_,I,Y,V,Q)):{center:re.center,zoom:Wn,bearing:Y,pitch:V}}queryTerrainElevation(d,_){const I=this.transform.elevation;return I?(_=n.extend({},{exaggerated:!0},_),I.getAtPoint(n.MercatorCoordinate.fromLngLat(d),null,_.exaggerated)):null}_cameraForBounds(d,_,I,Y,V,Q){if("globe"===d.projection.name)return this._cameraForBoundsOnGlobe(d,_,I,Y,V,Q);const re=d.clone(),ue=this._extendCameraOptions(Q),be=re.padding;re.bearing=Y,re.pitch=V;const ye=n.LngLat.convert(_),Fe=n.LngLat.convert(I),et=new n.LngLat(ye.lng,Fe.lat),ut=new n.LngLat(Fe.lng,ye.lat),ft=re.project(ye),vt=re.project(Fe),wt=this.queryTerrainElevation(ye),Ye=this.queryTerrainElevation(Fe),ht=this.queryTerrainElevation(et),zt=this.queryTerrainElevation(ut),xt=[[ft.x,ft.y,Math.min(wt||0,Ye||0,ht||0,zt||0)],[vt.x,vt.y,Math.max(wt||0,Ye||0,ht||0,zt||0)]];let fi=n.Aabb.fromPoints(xt);const pi=re.getWorldToCameraMatrix(),ai=n.invert(new Float64Array(16),pi);fi=n.Aabb.applyTransform(fi,pi);const Ii=n.sub([],fi.max,fi.min),Ei=be.left||0,Yi=be.right||0,Gn=be.bottom||0,Ni=be.top||0,{left:dn,right:Vi,top:Dn,bottom:Wi}=ue.padding,on=.5*(Ei+Yi),Wn=.5*(Ni+Gn),Ln=Math.min(re.scaleZoom(re.scale*Math.min((re.width-(Ei+Yi+dn+Vi))/Ii[0],(re.height-(Gn+Ni+Wi+Dn))/Ii[1])),ue.maxZoom),Hn=re.scale/re.zoomScale(Ln);fi=new n.Aabb([fi.min[0]-(dn+on)*Hn,fi.min[1]-(Wi+Wn)*Hn,fi.min[2]],[fi.max[0]+(Vi+on)*Hn,fi.max[1]+(Dn+Wn)*Hn,fi.max[2]]);const Rr=.5*Ii[2],ms=this._minimumAABBFrustumDistance(re,fi),Sr=[0,0,1,0];n.transformMat4$1(Sr,Sr,pi),n.normalize$2(Sr,Sr);const Ir=n.scale$2([],Sr,ms+Rr),xs=n.add([],fi.center,Ir),cs=("number"==typeof ue.offset.x&&"number"==typeof ue.offset.y?new n.Point(ue.offset.x,ue.offset.y):n.Point.convert(ue.offset)).rotate(-n.degToRad(Y));fi.center[0]-=cs.x*Hn,fi.center[1]+=cs.y*Hn,n.transformMat4(fi.center,fi.center,ai),n.transformMat4(xs,xs,ai);const zr=[fi.center[0],fi.center[1],xs[2]*re.pixelsPerMeter];n.scale$2(zr,zr,1/re.worldSize);const Qs=n.lngFromMercatorX(zr[0]),Za=n.latFromMercatorY(zr[1]),eo=Math.min(re._zoomFromMercatorZ(zr[2]),ue.maxZoom),no=new n.LngLat(Qs,Za);return re.mercatorFromTransition&&eo<.5*(n.GLOBE_ZOOM_THRESHOLD_MIN+n.GLOBE_ZOOM_THRESHOLD_MAX)?(re.setProjection({name:"globe"}),re.zoom=eo,this._cameraForBounds(re,_,I,Y,V,Q)):{center:no,zoom:eo,bearing:Y,pitch:V}}fitBounds(d,_,I){const Y=this.cameraForBounds(d,_);return this._fitInternal(Y,_,I)}fitScreenCoordinates(d,_,I,Y,V){const Q=n.Point.convert(d),re=n.Point.convert(_),ue=new n.Point(Math.min(Q.x,re.x),Math.min(Q.y,re.y)),be=new n.Point(Math.max(Q.x,re.x),Math.max(Q.y,re.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(Q,re))return this;const ye=this.transform.pointLocation3D(ue),Fe=this.transform.pointLocation3D(be),et=this.transform.pointLocation3D(new n.Point(ue.x,be.y)),ut=this.transform.pointLocation3D(new n.Point(be.x,ue.y)),ft=[Math.min(ye.lng,Fe.lng,et.lng,ut.lng),Math.min(ye.lat,Fe.lat,et.lat,ut.lat)],vt=[Math.max(ye.lng,Fe.lng,et.lng,ut.lng),Math.max(ye.lat,Fe.lat,et.lat,ut.lat)],wt=Y&&Y.pitch?Y.pitch:this.getPitch(),Ye=this._cameraForBounds(this.transform,ft,vt,I,wt,Y);return this._fitInternal(Ye,Y,V)}_fitInternal(d,_,I){return d?(delete(_=n.extend(d,_)).padding,_.linear?this.easeTo(_,I):this.flyTo(_,I)):this}jumpTo(d,_){this.stop();const I=d.preloadOnly?this.transform.clone():this.transform;let Y=!1,V=!1,Q=!1;return"zoom"in d&&I.zoom!==+d.zoom&&(Y=!0,I.zoom=+d.zoom),void 0!==d.center&&(I.center=n.LngLat.convert(d.center)),"bearing"in d&&I.bearing!==+d.bearing&&(V=!0,I.bearing=+d.bearing),"pitch"in d&&I.pitch!==+d.pitch&&(Q=!0,I.pitch=+d.pitch),null==d.padding||I.isPaddingEqual(d.padding)||(I.padding=d.padding),d.preloadOnly?(this._preloadTiles(I),this):(this.fire(new n.Event("movestart",_)).fire(new n.Event("move",_)),Y&&this.fire(new n.Event("zoomstart",_)).fire(new n.Event("zoom",_)).fire(new n.Event("zoomend",_)),V&&this.fire(new n.Event("rotatestart",_)).fire(new n.Event("rotate",_)).fire(new n.Event("rotateend",_)),Q&&this.fire(new n.Event("pitchstart",_)).fire(new n.Event("pitch",_)).fire(new n.Event("pitchend",_)),this.fire(new n.Event("moveend",_)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.warnOnce(ff),this.transform.getFreeCameraOptions()}setFreeCameraOptions(d,_){const I=this.transform;if(!I.projection.supportsFreeCamera)return n.warnOnce(ff),this;this.stop();const Y=I.zoom,V=I.pitch,Q=I.bearing;I.setFreeCameraOptions(d);const re=Y!==I.zoom,ue=V!==I.pitch,be=Q!==I.bearing;return this.fire(new n.Event("movestart",_)).fire(new n.Event("move",_)),re&&this.fire(new n.Event("zoomstart",_)).fire(new n.Event("zoom",_)).fire(new n.Event("zoomend",_)),be&&this.fire(new n.Event("rotatestart",_)).fire(new n.Event("rotate",_)).fire(new n.Event("rotateend",_)),ue&&this.fire(new n.Event("pitchstart",_)).fire(new n.Event("pitch",_)).fire(new n.Event("pitchend",_)),this.fire(new n.Event("moveend",_)),this}easeTo(d,_){this._stop(!1,d.easeId),(!1===(d=n.extend({offset:[0,0],duration:500,easing:n.ease},d)).animate||this._prefersReducedMotion(d))&&(d.duration=0);const I=this.transform,Y=this.getZoom(),V=this.getBearing(),Q=this.getPitch(),re=this.getPadding(),ue="zoom"in d?+d.zoom:Y,be="bearing"in d?this._normalizeBearing(d.bearing,V):V,ye="pitch"in d?+d.pitch:Q,Fe="padding"in d?d.padding:I.padding,et=n.Point.convert(d.offset);let ut,ft,vt;if("globe"===I.projection.name){const Ei=n.MercatorCoordinate.fromLngLat(I.center),Yi=et.rotate(-I.angle);Ei.x+=Yi.x/I.worldSize,Ei.y+=Yi.y/I.worldSize;const Gn=Ei.toLngLat(),Ni=n.LngLat.convert(d.center||Gn);this._normalizeCenter(Ni),ut=I.centerPoint.add(Yi),ft=new n.Point(Ei.x,Ei.y).mult(I.worldSize),vt=new n.Point(n.mercatorXfromLng(Ni.lng),n.mercatorYfromLat(Ni.lat)).mult(I.worldSize).sub(ft)}else{ut=I.centerPoint.add(et);const Ei=I.pointLocation(ut),Yi=n.LngLat.convert(d.center||Ei);this._normalizeCenter(Yi),ft=I.project(Ei),vt=I.project(Yi).sub(ft)}const wt=I.zoomScale(ue-Y);let Ye,ht;d.around&&(Ye=n.LngLat.convert(d.around),ht=I.locationPoint(Ye));const zt=this._zooming||ue!==Y,xt=this._rotating||V!==be,fi=this._pitching||ye!==Q,pi=!I.isPaddingEqual(Fe),ai=Ei=>Yi=>{if(zt&&(Ei.zoom=n.number(Y,ue,Yi)),xt&&(Ei.bearing=n.number(V,be,Yi)),fi&&(Ei.pitch=n.number(Q,ye,Yi)),pi&&(Ei.interpolatePadding(re,Fe,Yi),ut=Ei.centerPoint.add(et)),Ye)Ei.setLocationAtPoint(Ye,ht);else{const Gn=Ei.zoomScale(Ei.zoom-Y),Ni=ue>Y?Math.min(2,wt):Math.max(.5,wt),dn=Math.pow(Ni,1-Yi),Vi=Ei.unproject(ft.add(vt.mult(Yi*dn)).mult(Gn));Ei.setLocationAtPoint(Ei.renderWorldCopies?Vi.wrap():Vi,ut)}return d.preloadOnly||this._fireMoveEvents(_),Ei};if(d.preloadOnly){const Ei=this._emulate(ai,d.duration,I);return this._preloadTiles(Ei),this}const Ii={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=zt,this._rotating=xt,this._pitching=fi,this._padding=pi,this._easeId=d.easeId,this._prepareEase(_,d.noMoveStart,Ii),this._ease(ai(I),Ei=>{I.recenterOnTerrain(),this._afterEase(_,Ei)},d),this}_prepareEase(d,_,I={}){this._moving=!0,this.transform.cameraElevationReference="sea",_||I.moving||this.fire(new n.Event("movestart",d)),this._zooming&&!I.zooming&&this.fire(new n.Event("zoomstart",d)),this._rotating&&!I.rotating&&this.fire(new n.Event("rotatestart",d)),this._pitching&&!I.pitching&&this.fire(new n.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new n.Event("move",d)),this._zooming&&this.fire(new n.Event("zoom",d)),this._rotating&&this.fire(new n.Event("rotate",d)),this._pitching&&this.fire(new n.Event("pitch",d))}_afterEase(d,_){if(this._easeId&&_&&this._easeId===_)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const I=this._zooming,Y=this._rotating,V=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,I&&this.fire(new n.Event("zoomend",d)),Y&&this.fire(new n.Event("rotateend",d)),V&&this.fire(new n.Event("pitchend",d)),this.fire(new n.Event("moveend",d))}flyTo(d,_){if(this._prefersReducedMotion(d)){const Ln=n.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ln,_)}this.stop(),d=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},d);const I=this.transform,Y=this.getZoom(),V=this.getBearing(),Q=this.getPitch(),re=this.getPadding(),ue="zoom"in d?n.clamp(+d.zoom,I.minZoom,I.maxZoom):Y,be="bearing"in d?this._normalizeBearing(d.bearing,V):V,ye="pitch"in d?+d.pitch:Q,Fe="padding"in d?d.padding:I.padding,et=I.zoomScale(ue-Y),ut=n.Point.convert(d.offset);let ft=I.centerPoint.add(ut);const vt=I.pointLocation(ft),wt=n.LngLat.convert(d.center||vt);this._normalizeCenter(wt);const Ye=I.project(vt),ht=I.project(wt).sub(Ye);let zt=d.curve;const xt=Math.max(I.width,I.height),fi=xt/et,pi=ht.mag();if("minZoom"in d){const Ln=n.clamp(Math.min(d.minZoom,Y,ue),I.minZoom,I.maxZoom),Hn=xt/I.zoomScale(Ln-Y);zt=Math.sqrt(Hn/pi*2)}const ai=zt*zt;function Ii(Ln){const Hn=(fi*fi-xt*xt+(Ln?-1:1)*ai*ai*pi*pi)/(2*(Ln?fi:xt)*ai*pi);return Math.log(Math.sqrt(Hn*Hn+1)-Hn)}function Ei(Ln){return(Math.exp(Ln)-Math.exp(-Ln))/2}function Yi(Ln){return(Math.exp(Ln)+Math.exp(-Ln))/2}const Gn=Ii(0);let Ni=function(Ln){return Yi(Gn)/Yi(Gn+zt*Ln)},dn=function(Ln){return xt*((Yi(Gn)*(Ei(Hn=Gn+zt*Ln)/Yi(Hn))-Ei(Gn))/ai)/pi;var Hn},Vi=(Ii(1)-Gn)/zt;if(Math.abs(pi)<1e-6||!isFinite(Vi)){if(Math.abs(xt-fi)<1e-6)return this.easeTo(d,_);const Ln=fi<xt?-1:1;Vi=Math.abs(Math.log(fi/xt))/zt,dn=function(){return 0},Ni=function(Hn){return Math.exp(Ln*zt*Hn)}}d.duration="duration"in d?+d.duration:1e3*Vi/("screenSpeed"in d?+d.screenSpeed/zt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0);const Dn=V!==be,Wi=ye!==Q,on=!I.isPaddingEqual(Fe),Wn=Ln=>Hn=>{const Rr=Hn*Vi,ms=1/Ni(Rr);Ln.zoom=1===Hn?ue:Y+Ln.scaleZoom(ms),Dn&&(Ln.bearing=n.number(V,be,Hn)),Wi&&(Ln.pitch=n.number(Q,ye,Hn)),on&&(Ln.interpolatePadding(re,Fe,Hn),ft=Ln.centerPoint.add(ut));const Sr=1===Hn?wt:Ln.unproject(Ye.add(ht.mult(dn(Rr))).mult(ms));return Ln.setLocationAtPoint(Ln.renderWorldCopies?Sr.wrap():Sr,ft),Ln._updateCameraOnTerrain(),d.preloadOnly||this._fireMoveEvents(_),Ln};if(d.preloadOnly){const Ln=this._emulate(Wn,d.duration,I);return this._preloadTiles(Ln),this}return this._zooming=!0,this._rotating=Dn,this._pitching=Wi,this._padding=on,this._prepareEase(_,!1),this._ease(Wn(I),()=>this._afterEase(_),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,_){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const I=this._onEaseEnd;this._onEaseEnd=void 0,I.call(this,_)}if(!d){const I=this.handlers;I&&I.stop(!1)}return this}_ease(d,_,I){!1===I.animate||0===I.duration?(d(1),_()):(this._easeStart=n.exported.now(),this._easeOptions=I,this._onEaseFrame=d,this._onEaseEnd=_,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((n.exported.now()-this._easeStart)/this._easeOptions.duration,1),_=this._onEaseFrame;_&&_(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,_){d=n.wrap(d,-180,180);const I=Math.abs(d-_);return Math.abs(d-360-_)<I&&(d-=360),Math.abs(d+360-_)<I&&(d+=360),d}_normalizeCenter(d){const _=this.transform;if(!_.renderWorldCopies||_.maxBounds)return;const I=d.lng-_.center.lng;d.lng+=I>180?-360:I<-180?360:0}_prefersReducedMotion(d){return this._respectPrefersReducedMotion&&n.exported.prefersReducedMotion&&!(d&&d.essential)}_emulate(d,_,I){const Y=Math.ceil(15*_/1e3),V=[],Q=d(I.clone());for(let re=0;re<=Y;re++){const ue=Q(re/Y);V.push(ue.clone())}return V}}class kr{constructor(d={}){this.options=d,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){const _=this.options&&this.options.compact;return this._map=d,this._container=$e("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=$e("button","mapboxgl-ctrl-attrib-button",this._container),$e("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=$e("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),_&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===_&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(d,_){const I=this._map._getUIString(`AttributionControl.${_}`);d.setAttribute("aria-label",I),d.removeAttribute("title"),d.firstElementChild&&d.firstElementChild.setAttribute("title",I)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));const _=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(d){const I=_.reduce((Y,V,Q)=>(V.value&&(Y+=`${V.key}=${V.value}${Q<_.length-1?"&":""}`),Y),"?");d.href=`${n.config.FEEDBACK_URL}/${I}#${au(this._map,!0)}`,d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}}_updateData(d){!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let d=[];if(this._map.style.stylesheet){const Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}const _=this._map.style._sourceCaches;for(const Y in _){const V=_[Y];if(V.used){const Q=V.getSource();Q.attribution&&d.indexOf(Q.attribution)<0&&d.push(Q.attribution)}}d.sort((Y,V)=>Y.length-V.length),d=d.filter((Y,V)=>{for(let Q=V+1;Q<d.length;Q++)if(d[Q].indexOf(Y)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=[...this.options.customAttribution,...d]:d.unshift(this.options.customAttribution));const I=d.join(" | ");I!==this._attribHTML&&(this._attribHTML=I,d.length?(this._innerContainer.innerHTML=I,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ec{constructor(){n.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(d){this._map=d,this._container=$e("div","mapboxgl-ctrl");const _=$e("a","mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://www.mapbox.com/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(d){d&&"metadata"!==d.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const d=this._map.style._sourceCaches;if(0===Object.entries(d).length)return!0;for(const _ in d){const I=d[_].getSource();if(I.hasOwnProperty("mapbox_logo")&&!I.mapbox_logo)return!1}return!0}_updateCompact(){const d=this._container.children;if(d.length){const _=d[0];this._map.getCanvasContainer().offsetWidth<250?_.classList.add("mapboxgl-compact"):_.classList.remove("mapboxgl-compact")}}}class xh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const _=++this._id;return this._queue.push({callback:d,id:_,cancelled:!1}),_}remove(d){const _=this._currentlyRunning,I=_?this._queue.concat(_):this._queue;for(const Y of I)if(Y.id===d)return void(Y.cancelled=!0)}run(d=0){const _=this._currentlyRunning=this._queue;this._queue=[];for(const I of _)if(!I.cancelled&&(I.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function pf(k,d,_){if(k=new n.LngLat(k.lng,k.lat),d){const I=new n.LngLat(k.lng-360,k.lat),Y=new n.LngLat(k.lng+360,k.lat),V=360*Math.ceil(Math.abs(k.lng-_.center.lng)/360),Q=_.locationPoint(k).distSqr(d),re=d.x<0||d.y<0||d.x>_.width||d.y>_.height;_.locationPoint(I).distSqr(d)<Q&&(re||Math.abs(I.lng-_.center.lng)<V)?k=I:_.locationPoint(Y).distSqr(d)<Q&&(re||Math.abs(Y.lng-_.center.lng)<V)&&(k=Y)}for(;Math.abs(k.lng-_.center.lng)>180;){const I=_.locationPoint(k);if(I.x>=0&&I.y>=0&&I.x<=_.width&&I.y<=_.height)break;k.lng>_.center.lng?k.lng-=360:k.lng+=360}return k}const Nf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class fr extends n.Evented{constructor(d,_){if(super(),(d instanceof n.window.HTMLElement||_)&&(d=n.extend({element:d},_)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=d&&d.occludedOpacity||.2,d&&d.element)this._element=d.element,this._offset=n.Point.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=$e("div");const Y=41,V=27,Q=it("svg",{display:"block",height:Y*this._scale+"px",width:V*this._scale+"px",viewBox:`0 0 ${V} ${Y}`},this._element),re=it("radialGradient",{id:"shadowGradient"},it("defs",{},Q));it("stop",{offset:"10%","stop-opacity":.4},re),it("stop",{offset:"100%","stop-opacity":.05},re),it("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Q),it("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Q),it("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Q),it("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Q),this._offset=n.Point.convert(d&&d.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",Y=>{Y.preventDefault()}),this._element.addEventListener("mousedown",Y=>{Y.preventDefault()});const I=this._element.classList;for(const Y in Nf)I.remove(`mapboxgl-marker-anchor-${Y}`);I.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(d){return d===this._map||(this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._updateMoving),d.on("moveend",this._update),d.on("remove",this._clearFadeTimer),d._addMarker(this),this.setDraggable(this._draggable),this._update(),d.on("click",this._onMapClick)),this}remove(){const d=this._map;return d&&(d.off("click",this._onMapClick),d.off("move",this._updateMoving),d.off("moveend",this._update),d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler),d.off("mouseup",this._onUp),d.off("touchend",this._onUp),d.off("mousemove",this._onMove),d.off("touchmove",this._onMove),d.off("remove",this._clearFadeTimer),d._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=n.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const Y=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Y,-1*(24.6+Y)],"bottom-right":[-Y,-1*(24.6+Y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=d,d._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(d){const _=d.code,I=d.charCode||d.keyCode;"Space"!==_&&"Enter"!==_&&32!==I&&13!==I||this.togglePopup()}_onMapClick(d){const _=d.originalEvent.target,I=this._element;this._popup&&(_===I||I.contains(_))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?(d.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(d.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const d=this._map,_=this._pos;if(!d||!_)return!1;const I=d.unproject(_),Y=d.getFreeCameraOptions();if(!Y.position)return!1;const V=Y.position.toLngLat();return V.distanceTo(I)<.9*V.distanceTo(this._lngLat)}_evaluateOpacity(){const d=this._map;if(!d)return;const _=this._pos;if(!_||_.x<0||_.x>d.transform.width||_.y<0||_.y>d.transform.height)return void this._clearFadeTimer();const I=d.unproject(_);let Y;d._showingGlobe()&&n.isLngLatBehindGlobe(d.transform,this._lngLat)?Y=0:(Y=1-d._queryFogOpacity(I),d.transform._terrainEnabled()&&d.getTerrain()&&this._behindTerrain()&&(Y*=this._occludedOpacity)),this._element.style.opacity=`${Y}`,this._element.style.pointerEvents=Y>0?"auto":"none",this._popup&&this._popup._setOpacity(Y),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const d=this._pos;if(!d||!this._map)return;const _=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${d.x}px,${d.y}px)\n            ${Nf[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${_.x}px,${_.y}px)\n        `}_calculateXYTransform(){const d=this._pos,_=this._map,I=this.getPitchAlignment();if(!_||!d||"map"!==I)return"";if(!_._showingGlobe()){const ue=_.getPitch();return ue?`rotateX(${ue}deg)`:""}const Y=n.radToDeg(n.globeTiltAtLngLat(_.transform,this._lngLat)),V=d.sub(n.globeCenterToScreenPoint(_.transform)),Q=Math.abs(V.x)+Math.abs(V.y);if(0===Q)return"";const re=Y/Q;return`rotateX(${-V.y*re}deg) rotateY(${V.x*re}deg)`}_calculateZTransform(){const d=this._pos,_=this._map;if(!_||!d)return"";let I=0;const Y=this.getRotationAlignment();if("map"===Y)if(_._showingGlobe()){const V=_.project(new n.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Q=_.project(new n.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(V);I=n.radToDeg(Math.atan2(Q.y,Q.x))-90}else I=-_.getBearing();else if("horizon"===Y){const V=n.smoothstep(4,6,_.getZoom()),Q=n.globeCenterToScreenPoint(_.transform);Q.y+=V*_.transform.height;const re=d.sub(Q),ue=n.radToDeg(Math.atan2(re.y,re.x));I=(ue>90?ue-270:ue+90)*(1-V)}return I+=this._rotation,I?`rotateZ(${I}deg)`:""}_update(d){n.window.cancelAnimationFrame(this._updateFrameId);const _=this._map;_&&(_.transform.renderWorldCopies&&(this._lngLat=pf(this._lngLat,this._pos,_.transform)),this._pos=_.project(this._lngLat),!0===d?this._updateFrameId=n.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),_._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(_._showingGlobe()||_.getTerrain()||_.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(d){return this._offset=n.Point.convert(d),this._update(),this}_onMove(d){const _=this._map;if(!_)return;const I=this._pointerdownPos,Y=this._positionDelta;if(I&&Y){if(!this._isDragging){const V=this._clickTolerance||_._clickTolerance;if(d.point.dist(I)<V)return;this._isDragging=!0}this._pos=d.point.sub(Y),this._lngLat=_.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const d=this._map;d&&(d.off("mousemove",this._onMove),d.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new n.Event("dragend")),this._state="inactive"}_addDragHandler(d){const _=this._map,I=this._pos;_&&I&&this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(I),this._pointerdownPos=d.point,this._state="pending",_.on("mousemove",this._onMove),_.on("touchmove",this._onMove),_.once("mouseup",this._onUp),_.once("touchend",this._onUp))}setDraggable(d){this._draggable=!!d;const _=this._map;return _&&(d?(_.on("mousedown",this._addDragHandler),_.on("touchstart",this._addDragHandler)):(_.off("mousedown",this._addDragHandler),_.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(d){return this._occludedOpacity=d||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Ed={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},r0=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function kd(k=new n.Point(0,0),d="bottom"){if("number"==typeof k){const _=Math.round(Math.sqrt(.5*Math.pow(k,2)));switch(d){case"top":return new n.Point(0,k);case"top-left":return new n.Point(_,_);case"top-right":return new n.Point(-_,_);case"bottom":return new n.Point(0,-k);case"bottom-left":return new n.Point(_,-_);case"bottom-right":return new n.Point(-_,-_);case"left":return new n.Point(k,0);case"right":return new n.Point(-k,0)}return new n.Point(0,0)}return k instanceof n.Point||Array.isArray(k)?n.Point.convert(k):n.Point.convert(k[d]||[0,0])}class Gp{constructor(d){this.jumpTo(d)}getValue(d){if(d<=this._startTime)return this._start;if(d>=this._endTime)return this._end;const _=n.easeCubicInOut((d-this._startTime)/(this._endTime-this._startTime));return this._start*(1-_)+this._end*_}isEasing(d){return d>=this._startTime&&d<=this._endTime}jumpTo(d){this._startTime=-1/0,this._endTime=-1/0,this._start=d,this._end=d}easeTo(d,_,I){this._start=this.getValue(_),this._end=d,this._startTime=_,this._endTime=_+I}}const ad={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},lu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},s0={showCompass:!0,showZoom:!0,visualizePitch:!1};class Mu{constructor(d,_,I=!1){this._clickTolerance=10,this.element=_,this.mouseRotate=new Cl({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,I&&(this.mousePitch=new Vc({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener("mousedown",this.mousedown),_.addEventListener("touchstart",this.touchstart,{passive:!1}),_.addEventListener("touchmove",this.touchmove),_.addEventListener("touchend",this.touchend),_.addEventListener("touchcancel",this.reset)}down(d,_){this.mouseRotate.mousedown(d,_),this.mousePitch&&this.mousePitch.mousedown(d,_),Xt()}move(d,_){const I=this.map,Y=this.mouseRotate.mousemoveWindow(d,_),V=Y&&Y.bearingDelta;if(V&&I.setBearing(I.getBearing()+V),this.mousePitch){const Q=this.mousePitch.mousemoveWindow(d,_),re=Q&&Q.pitchDelta;re&&I.setPitch(I.getPitch()+re)}}off(){const d=this.element;d.removeEventListener("mousedown",this.mousedown),d.removeEventListener("touchstart",this.touchstart,{passive:!1}),d.removeEventListener("touchmove",this.touchmove),d.removeEventListener("touchend",this.touchend),d.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Et(),n.window.removeEventListener("mousemove",this.mousemove),n.window.removeEventListener("mouseup",this.mouseup)}mousedown(d){this.down(n.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),Pi(this.element,d)),n.window.addEventListener("mousemove",this.mousemove),n.window.addEventListener("mouseup",this.mouseup)}mousemove(d){this.move(d,Pi(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){1!==d.targetTouches.length?this.reset():(this._startPos=this._lastPos=tt(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){1!==d.targetTouches.length?this.reset():(this._lastPos=tt(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){0===d.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Hp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Am={maxWidth:100,unit:"metric"},pg={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},mf={version:n.version,supported:He,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:class extends Ql{constructor(k){if(n.LivePerformanceUtils.mark(n.PerformanceMarkers.create),null!=(k=n.extend({},lu,k)).minZoom&&null!=k.maxZoom&&k.minZoom>k.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=k.minPitch&&null!=k.maxPitch&&k.minPitch>k.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=k.minPitch&&k.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=k.maxPitch&&k.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(k.antialias&&n.isSafariWithAntialiasingBug(n.window)&&(k.antialias=!1,n.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Au(k.minZoom,k.maxZoom,k.minPitch,k.maxPitch,k.renderWorldCopies),k),this._interactive=k.interactive,this._minTileCacheSize=k.minTileCacheSize,this._maxTileCacheSize=k.maxTileCacheSize,this._failIfMajorPerformanceCaveat=k.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=k.preserveDrawingBuffer,this._antialias=k.antialias,this._useWebGL2=k.useWebGL2,this._trackResize=k.trackResize,this._bearingSnap=k.bearingSnap,this._refreshExpiredTiles=k.refreshExpiredTiles,this._fadeDuration=k.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=k.crossSourceCollisions,this._collectResourceTiming=k.collectResourceTiming,this._optimizeForTerrain=k.optimizeForTerrain,this._language=this._parseLanguage(k.language),this._worldview=k.worldview,this._renderTaskQueue=new xh,this._domRenderTaskQueue=new xh,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.uniqueId(),this._locale=n.extend({},ad,k.locale),this._clickTolerance=k.clickTolerance,this._cooperativeGestures=k.cooperativeGestures,this._performanceMetricsCollection=k.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Gp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new n.RequestManager(k.transformRequest,k.accessToken,k.testMode),this._silenceAuthErrors=!!k.testMode,"string"==typeof k.container){if(this._container=n.window.document.getElementById(k.container),!this._container)throw new Error(`Container '${k.container}' not found.`)}else{if(!(k.container instanceof n.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=k.container}if(this._container.childNodes.length>0&&n.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),k.maxBounds&&this.setMaxBounds(k.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==n.window&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1),n.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),n.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Iu(this,k),this._localFontFamily=k.localFontFamily,this._localIdeographFontFamily=k.localIdeographFontFamily,k.style&&this.setStyle(k.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),k.projection&&this.setProjection(k.projection),this._hash=k.hash&&new Hc("string"==typeof k.hash&&k.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch}),k.bounds&&(this.resize(),this.fitBounds(k.bounds,n.extend({},k.fitBoundsOptions,{duration:0})))),this.resize(),k.attributionControl&&this.addControl(new kr({customAttribution:k.customAttribution})),this._logoControl=new ec,this.addControl(this._logoControl,k.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new n.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new n.Event(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(k,d){if(void 0===d&&(d=k.getDefaultPosition?k.getDefaultPosition():"top-right"),!k||!k.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const _=k.onAdd(this);this._controls.push(k);const I=this._controlPositions[d];return-1!==d.indexOf("bottom")?I.insertBefore(_,I.firstChild):I.appendChild(_),this}removeControl(k){if(!k||!k.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(k);return d>-1&&this._controls.splice(d,1),k.onRemove(this),this}hasControl(k){return this._controls.indexOf(k)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(k){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const d=!this._moving;return d&&this.fire(new n.Event("movestart",k)).fire(new n.Event("move",k)),this.fire(new n.Event("resize",k)),d&&this.fire(new n.Event("moveend",k)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(k){return this.transform.setMaxBounds(n.LngLatBounds.convert(k)),this._update()}setMinZoom(k){if((k=k??-2)>=-2&&k<=this.transform.maxZoom)return this.transform.minZoom=k,this._update(),this.getZoom()<k?this.setZoom(k):this.fire(new n.Event("zoomstart")).fire(new n.Event("zoom")).fire(new n.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(k){if((k=k??22)>=this.transform.minZoom)return this.transform.maxZoom=k,this._update(),this.getZoom()>k?this.setZoom(k):this.fire(new n.Event("zoomstart")).fire(new n.Event("zoom")).fire(new n.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(k){if((k=k??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(k>=0&&k<=this.transform.maxPitch)return this.transform.minPitch=k,this._update(),this.getPitch()<k?this.setPitch(k):this.fire(new n.Event("pitchstart")).fire(new n.Event("pitch")).fire(new n.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(k){if((k=k??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(k>=this.transform.minPitch)return this.transform.maxPitch=k,this._update(),this.getPitch()>k?this.setPitch(k):this.fire(new n.Event("pitchstart")).fire(new n.Event("pitch")).fire(new n.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(k){return this.transform.renderWorldCopies=k,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(k){return"auto"===k?n.window.navigator.language:Array.isArray(k)?0===k.length?void 0:k.map(d=>"auto"===d?n.window.navigator.language:d):k}setLanguage(k){const d=this._parseLanguage(k);if(!this.style||d===this._language)return this;this._language=d,this.style._reloadSources();for(const _ of this._controls)_._setLanguage&&_._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(k){return this.style&&k!==this._worldview?(this._worldview=k,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(k){return this._lazyInitEmptyStyle(),k?"string"==typeof k&&(k={name:k}):k=null,this._useExplicitProjection=!!k,this._prioritizeAndUpdateProjection(k,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const k=this.transform,d=k.projection.name;let _;"globe"===d&&k.zoom>=n.GLOBE_ZOOM_THRESHOLD_MAX?(k.setMercatorFromTransition(),_=!0):"mercator"===d&&k.zoom<n.GLOBE_ZOOM_THRESHOLD_MAX&&(k.setProjection({name:"globe"}),_=!0),_&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(k,d){return this._updateProjection(k||d||{name:"mercator"})}_updateProjection(k){let d;if(d="globe"===k.name&&this.transform.zoom>=n.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(k),this.style.applyProjectionUpdate(),d){this.painter.clearBackgroundTiles();for(const _ in this.style._sourceCaches)this.style._sourceCaches[_].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(k){return this.transform.locationPoint3D(n.LngLat.convert(k))}unproject(k){return this.transform.pointLocation3D(n.Point.convert(k))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(k,d,_){if("mouseenter"===k||"mouseover"===k){let I=!1;const Y=Q=>{const re=d.filter(be=>this.getLayer(be)),ue=re.length?this.queryRenderedFeatures(Q.point,{layers:re}):[];ue.length?I||(I=!0,_.call(this,new Ie(k,this,Q.originalEvent,{features:ue}))):I=!1},V=()=>{I=!1};return{layers:new Set(d),listener:_,delegates:{mousemove:Y,mouseout:V}}}if("mouseleave"===k||"mouseout"===k){let I=!1;const Y=Q=>{const re=d.filter(ue=>this.getLayer(ue));(re.length?this.queryRenderedFeatures(Q.point,{layers:re}):[]).length?I=!0:I&&(I=!1,_.call(this,new Ie(k,this,Q.originalEvent)))},V=Q=>{I&&(I=!1,_.call(this,new Ie(k,this,Q.originalEvent)))};return{layers:new Set(d),listener:_,delegates:{mousemove:Y,mouseout:V}}}{const I=Y=>{const V=d.filter(re=>this.getLayer(re)),Q=V.length?this.queryRenderedFeatures(Y.point,{layers:V}):[];Q.length&&(Y.features=Q,_.call(this,Y),delete Y.features)};return{layers:new Set(d),listener:_,delegates:{[k]:I}}}}on(k,d,_){if(void 0===_)return super.on(k,d);Array.isArray(d)||(d=[d]);const I=this._createDelegatedListener(k,d,_);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[k]=this._delegatedListeners[k]||[],this._delegatedListeners[k].push(I);for(const Y in I.delegates)this.on(Y,I.delegates[Y]);return this}once(k,d,_){if(void 0===_)return super.once(k,d);Array.isArray(d)||(d=[d]);const I=this._createDelegatedListener(k,d,_);for(const Y in I.delegates)this.once(Y,I.delegates[Y]);return this}off(k,d,_){if(void 0===_)return super.off(k,d);d=new Set(Array.isArray(d)?d:[d]);const I=(V,Q)=>{if(V.size!==Q.size)return!1;for(const re of V)if(!Q.has(re))return!1;return!0},Y=this._delegatedListeners?this._delegatedListeners[k]:void 0;return Y&&(V=>{for(let Q=0;Q<V.length;Q++){const re=V[Q];if(re.listener===_&&I(re.layers,d)){for(const ue in re.delegates)this.off(ue,re.delegates[ue]);return V.splice(Q,1),this}}})(Y),this}queryRenderedFeatures(k,d){return this.style?(void 0!==d||void 0===k||k instanceof n.Point||Array.isArray(k)||(d=k,k=void 0),this.style.queryRenderedFeatures(k=k||[[0,0],[this.transform.width,this.transform.height]],d=d||{},this.transform)):[]}querySourceFeatures(k,d){return this.style.querySourceFeatures(k,d)}isPointOnSurface(k){const{name:d}=this.transform.projection;return"globe"!==d&&"mercator"!==d&&n.warnOnce(`${d} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.Point.convert(k))}setStyle(k,d){return!1!==(d=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},d)).diff&&d.localIdeographFontFamily===this._localIdeographFontFamily&&d.localFontFamily===this._localFontFamily&&this.style&&k?(this._diffStyle(k,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._localFontFamily=d.localFontFamily,this._updateStyle(k,d))}_getUIString(k){const d=this._locale[k];if(null==d)throw new Error(`Missing UI string '${k}'`);return d}_updateStyle(k,d){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),k&&(this.style=new Ys(this,d||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof k?this.style.loadURL(k):this.style.loadJSON(k)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ys(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(k,d){if("string"==typeof k){const _=this._requestManager.normalizeStyleURL(k),I=this._requestManager.transformRequest(_,n.ResourceType.Style);n.getJSON(I,(Y,V)=>{Y?this.fire(new n.ErrorEvent(Y)):V&&this._updateDiff(V,d)})}else"object"==typeof k&&this._updateDiff(k,d)}_updateDiff(k,d){try{this.style.setState(k)&&this._update(!0)}catch(_){n.warnOnce(`Unable to perform style diff: ${_.message||_.error||_}.  Rebuilding the style from scratch.`),this._updateStyle(k,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.warnOnce("There is no style added to the map."),!1)}addSource(k,d){return this._lazyInitEmptyStyle(),this.style.addSource(k,d),this._update(!0)}isSourceLoaded(k){return!!this.style&&this.style._isSourceCacheLoaded(k)}areTilesLoaded(){const k=this.style&&this.style._sourceCaches;for(const d in k){const _=k[d]._tiles;for(const I in _){const Y=_[I];if("loaded"!==Y.state&&"errored"!==Y.state)return!1}}return!0}addSourceType(k,d,_){this._lazyInitEmptyStyle(),this.style.addSourceType(k,d,_)}removeSource(k){return this.style.removeSource(k),this._updateTerrain(),this._update(!0)}getSource(k){return this.style.getSource(k)}addImage(k,d,{pixelRatio:_=1,sdf:I=!1,stretchX:Y,stretchY:V,content:Q}={}){if(this._lazyInitEmptyStyle(),d instanceof n.window.HTMLImageElement||n.window.ImageBitmap&&d instanceof n.window.ImageBitmap){const{width:re,height:ue,data:be}=n.exported.getImageData(d);this.style.addImage(k,{data:new n.RGBAImage({width:re,height:ue},be),pixelRatio:_,stretchX:Y,stretchY:V,content:Q,sdf:I,version:0})}else if(void 0===d.width||void 0===d.height)this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:re,height:ue}=d,be=d;this.style.addImage(k,{data:new n.RGBAImage({width:re,height:ue},new Uint8Array(be.data)),pixelRatio:_,stretchX:Y,stretchY:V,content:Q,sdf:I,version:0,userImage:be}),be.onAdd&&be.onAdd(this,k)}}updateImage(k,d){const _=this.style.getImage(k);if(!_)return void this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const I=d instanceof n.window.HTMLImageElement||n.window.ImageBitmap&&d instanceof n.window.ImageBitmap?n.exported.getImageData(d):d,{width:Y,height:V}=I;void 0!==Y&&void 0!==V?Y===_.data.width&&V===_.data.height?(_.data.replace(I.data,!(d instanceof n.window.HTMLImageElement||n.window.ImageBitmap&&d instanceof n.window.ImageBitmap)),this.style.updateImage(k,_)):this.fire(new n.ErrorEvent(new Error(`The width and height of the updated image (${Y}, ${V})\n                must be that same as the previous version of the image\n                (${_.data.width}, ${_.data.height})`))):this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(k){return k?!!this.style.getImage(k):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(k){this.style.removeImage(k)}loadImage(k,d){n.getImage(this._requestManager.transformRequest(k,n.ResourceType.Image),(_,I)=>{d(_,I instanceof n.window.HTMLImageElement?n.exported.getImageData(I):I)})}listImages(){return this.style.listImages()}addLayer(k,d){return this._lazyInitEmptyStyle(),this.style.addLayer(k,d),this._update(!0)}moveLayer(k,d){return this.style.moveLayer(k,d),this._update(!0)}removeLayer(k){return this.style.removeLayer(k),this._update(!0)}getLayer(k){return this.style.getLayer(k)}setLayerZoomRange(k,d,_){return this.style.setLayerZoomRange(k,d,_),this._update(!0)}setFilter(k,d,_={}){return this.style.setFilter(k,d,_),this._update(!0)}getFilter(k){return this.style.getFilter(k)}setPaintProperty(k,d,_,I={}){return this.style.setPaintProperty(k,d,_,I),this._update(!0)}getPaintProperty(k,d){return this.style.getPaintProperty(k,d)}setLayoutProperty(k,d,_,I={}){return this.style.setLayoutProperty(k,d,_,I),this._update(!0)}getLayoutProperty(k,d){return this.style.getLayoutProperty(k,d)}setLight(k,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(k,d),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(k){return this._lazyInitEmptyStyle(),!k&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(k),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(k){return this._lazyInitEmptyStyle(),this.style.setFog(k),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(k){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.LngLat.convert(k),this.transform):0}setFeatureState(k,d){return this.style.setFeatureState(k,d),this._update()}removeFeatureState(k,d){return this.style.removeFeatureState(k,d),this._update()}getFeatureState(k){return this.style.getFeatureState(k)}_updateContainerDimensions(){if(!this._container)return;const k=this._container.getBoundingClientRect().width||400,d=this._container.getBoundingClientRect().height||300;let _,I,Y,V=this._container;for(;V&&(!I||!Y);){const Q=n.window.getComputedStyle(V).transform;Q&&"none"!==Q&&(_=Q.match(/matrix.*\((.+)\)/)[1].split(", "),_[0]&&"0"!==_[0]&&"1"!==_[0]&&(I=_[0]),_[3]&&"0"!==_[3]&&"1"!==_[3]&&(Y=_[3])),V=V.parentElement}this._containerWidth=I?Math.abs(k/I):k,this._containerHeight=Y?Math.abs(d/Y):d}_detectMissingCSS(){"rgb(250, 128, 114)"!==n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const k=this._container;k.classList.add("mapboxgl-map"),(this._missingCSSCanary=$e("div","mapboxgl-canary",k)).style.visibility="hidden",this._detectMissingCSS();const d=this._canvasContainer=$e("div","mapboxgl-canvas-container",k);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=$e("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const _=this._controlContainer=$e("div","mapboxgl-control-container",k),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Y=>{I[Y]=$e("div",`mapboxgl-ctrl-${Y}`,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(k,d){const _=n.exported.devicePixelRatio||1;this._canvas.width=_*Math.ceil(k),this._canvas.height=_*Math.ceil(d),this._canvas.style.width=`${k}px`,this._canvas.style.height=`${d}px`}_addMarker(k){this._markers.push(k)}_removeMarker(k){const d=this._markers.indexOf(k);-1!==d&&this._markers.splice(d,1)}_addPopup(k){this._popups.push(k)}_removePopup(k){const d=this._popups.indexOf(k);-1!==d&&this._popups.splice(d,1)}_setupPainter(){const k=n.extend({},He.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._useWebGL2&&this._canvas.getContext("webgl2",k),_=d||this._canvas.getContext("webgl",k)||this._canvas.getContext("experimental-webgl",k);_?(this._useWebGL2&&!d&&n.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),n.storeAuthState(_,!0),this.painter=new fl(_,this.transform,!!d),this.on("data",I=>{"source"===I.dataType&&this.painter.setTileLoadedFlag(!0)}),n.exported$1.testSupport(_)):this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(k){k.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:k}))}_contextRestored(k){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:k}))}_onMapScroll(k){if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(k){return this.style?(this._styleDirty=this._styleDirty||k,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(k){return this._update(),this._renderTaskQueue.add(k)}_cancelRenderFrame(k){this._renderTaskQueue.remove(k)}_requestDomTask(k){!this.loaded()||this.loaded()&&!this.isMoving()?k():this._domRenderTaskQueue.add(k)}_render(k){let d;const _=this.painter.context.extTimerQuery,I=n.exported.now();if(this.listens("gpu-timing-frame")&&(d=_.createQueryEXT(),_.beginQueryEXT(_.TIME_ELAPSED_EXT,d)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],n.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],n.window.performance.now())),this._renderTaskQueue.run(k),this._domRenderTaskQueue.run(k),this._removed)return;this._updateProjectionTransition();const Y=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const re=this.transform.zoom,ue=this.transform.pitch,be=n.exported.now(),ye=new n.EvaluationParameters(re,{now:be,fadeDuration:Y,pitch:ue,transition:this.style.getTransition()});this.style.update(ye)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let V=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),V=this._updateAverageElevation(I),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):V=this._updateAverageElevation(I),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,Y,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Y,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),d){const re=n.exported.now()-I;_.endQueryEXT(_.TIME_ELAPSED_EXT,d),setTimeout(()=>{const ue=_.getQueryObjectEXT(d,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(d),this.fire(new n.Event("gpu-timing-frame",{cpuTime:re,gpuTime:ue})),n.window.performance.mark("frame-gpu",{startTime:I,detail:{gpuTime:ue}})},50)}if(this.listens("gpu-timing-layer")){const re=this.painter.collectGpuTimers();setTimeout(()=>{const ue=this.painter.queryGpuTimers(re);this.fire(new n.Event("gpu-timing-layer",{layerTimes:ue}))},50)}if(this.listens("gpu-timing-deferred-render")){const re=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const ue=this.painter.queryGpuTimeDeferredRender(re);this.fire(new n.Event("gpu-timing-deferred-render",{gpuTime:ue}))},50)}const Q=this._sourcesDirty||this._styleDirty||this._placementDirty||V;if(Q||this._repaint)this.triggerRepaint();else{const re=!this.isMoving()&&this.loaded();if(re&&(V=this._updateAverageElevation(I,!0)),V)this.triggerRepaint();else if(this._triggerFrame(!1),re&&(this.fire(new n.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const ue=this._calculateSpeedIndex();this.fire(new n.Event("speedindexcompleted",{speedIndex:ue})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Q||(this._fullyLoaded=!0,n.LivePerformanceUtils.mark(n.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&n.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(k){for(const d of this._markers)k&&!this.getRenderWorldCopies()&&(d._lngLat=d._lngLat.wrap()),d._update();for(const d of this._popups)!k||this.getRenderWorldCopies()||d._trackPointer||(d._lngLat=d._lngLat.wrap()),d._update()}_updateAverageElevation(k,d=!1){const _=I=>(this.transform.averageElevation=I,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&_(0);if((d||k-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(k)){const I=this.transform.averageElevation;let Y=this.transform.sampleAverageElevation(),V=!1;this.transform.elevation&&(V=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(Y)?Y=0:this._averageElevationLastSampledAt=k;const Q=Math.abs(I-Y);if(Q>1){if(this._isInitialLoad||V)return this._averageElevation.jumpTo(Y),_(Y);this._averageElevation.easeTo(Y,k,300)}else if(Q>1e-4)return this._averageElevation.jumpTo(Y),_(Y)}return!!this._averageElevation.isEasing(k)&&_(this._averageElevation.getValue(k))}_authenticate(){n.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,k=>{if(k&&(k.message===n.AUTH_ERR_MSG||401===k.status)){const d=this.painter.context.gl;n.storeAuthState(d,!1),this._logoControl instanceof ec&&this._logoControl._updateLogo(),d&&d.clear(d.DEPTH_BUFFER_BIT|d.COLOR_BUFFER_BIT|d.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),n.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const k=this._isDragging();this.painter.updateTerrain(this.style,k)}_calculateSpeedIndex(){const k=this.painter.canvasCopy(),d=this.painter.getCanvasCopiesAndTimestamps();d.timeStamps.push(performance.now());const _=this.painter.context.gl,I=_.createFramebuffer();function Y(V){_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,V,0);const Q=new Uint8Array(_.drawingBufferWidth*_.drawingBufferHeight*4);return _.readPixels(0,0,_.drawingBufferWidth,_.drawingBufferHeight,_.RGBA,_.UNSIGNED_BYTE,Q),Q}return _.bindFramebuffer(_.FRAMEBUFFER,I),this._canvasPixelComparison(Y(k),d.canvasCopies.map(Y),d.timeStamps)}_canvasPixelComparison(k,d,_){let I=_[1]-_[0];const Y=k.length/4;for(let V=0;V<d.length;V++){const Q=d[V];let re=0;for(let ue=0;ue<Q.length;ue+=4)Q[ue]===k[ue]&&Q[ue+1]===k[ue+1]&&Q[ue+2]===k[ue+2]&&Q[ue+3]===k[ue+3]&&(re+=1);I+=(_[V+2]-_[V+1])*(1-re/Y)}return I}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==n.window&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1),n.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const k=this.painter.context.gl.getExtension("WEBGL_lose_context");k&&k.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),n.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new n.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(k){this._renderNextFrame=this._renderNextFrame||k,this.style&&!this._frame&&(this._frame=n.exported.frame(d=>{const _=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,_&&this._render(d)}))}_preloadTiles(k){const d=this.style?Object.values(this.style._sourceCaches):[];return n.asyncAll(d,(_,I)=>_._preloadTiles(k,I),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(k){this._trackResize&&this.resize({originalEvent:k})._update()}_onVisibilityChange(){"hidden"===n.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(k){this._showTileBoundaries!==k&&(this._showTileBoundaries=k,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(k){this._showTerrainWireframe!==k&&(this._showTerrainWireframe=k,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(k){this._speedIndexTiming!==k&&(this._speedIndexTiming=k,this._update())}get showPadding(){return!!this._showPadding}set showPadding(k){this._showPadding!==k&&(this._showPadding=k,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(k){this._showCollisionBoxes!==k&&(this._showCollisionBoxes=k,k?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(k){this._showOverdrawInspector!==k&&(this._showOverdrawInspector=k,this._update())}get repaint(){return!!this._repaint}set repaint(k){this._repaint!==k&&(this._repaint=k,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(k){this._vertices=k,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(k){this._showTileAABBs!==k&&(this._showTileAABBs=k,k&&this._update())}_setCacheLimits(k,d){n.setCacheLimits(k,d)}get version(){return n.version}},NavigationControl:class{constructor(k){this.options=n.extend({},s0,k),this._container=$e("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",d=>{this._map&&this._map.zoomIn({},{originalEvent:d})}),$e("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",d=>{this._map&&this._map.zoomOut({},{originalEvent:d})}),$e("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",d=>{const _=this._map;_&&(this.options.visualizePitch?_.resetNorthPitch({},{originalEvent:d}):_.resetNorth({},{originalEvent:d}))}),this._compassIcon=$e("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const k=this._map;if(!k)return;const d=k.getZoom(),_=d===k.getMaxZoom(),I=d===k.getMinZoom();this._zoomInButton.disabled=_,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",_.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())}_rotateCompassArrow(){const k=this._map;if(!k)return;const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(k.transform.pitch*(Math.PI/180)),.5)}) rotateX(${k.transform.pitch}deg) rotateZ(${k.transform.angle*(180/Math.PI)}deg)`:`rotate(${k.transform.angle*(180/Math.PI)}deg)`;k._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=d)})}onAdd(k){return this._map=k,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),k.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&k.on("pitch",this._rotateCompassArrow),k.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mu(k,this._compass,this.options.visualizePitch)),this._container}onRemove(){const k=this._map;k&&(this._container.remove(),this.options.showZoom&&k.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&k.off("pitch",this._rotateCompassArrow),k.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(k,d){const _=$e("button",k,this._container);return _.type="button",_.addEventListener("click",d),_}_setButtonTitle(k,d){if(!this._map)return;const _=this._map._getUIString(`NavigationControl.${d}`);k.setAttribute("aria-label",_),k.firstElementChild&&k.firstElementChild.setAttribute("title",_)}},GeolocateControl:class extends n.Evented{constructor(k){super(),this.options=n.extend({geolocation:n.window.navigator.geolocation},Hp,k),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ec(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(k){return this._map=k,this._container=$e("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(k){const d=(_=!!this.options.geolocation)=>{this._supportsGeolocation=_,k(_)};void 0!==this._supportsGeolocation?k(this._supportsGeolocation):void 0!==n.window.navigator.permissions?n.window.navigator.permissions.query({name:"geolocation"}).then(_=>d("denied"!==_.state)).catch(()=>d()):d()}_isOutOfMapMaxBounds(k){const d=this._map.getMaxBounds(),_=k.coords;return!!d&&(_.longitude<d.getWest()||_.longitude>d.getEast()||_.latitude<d.getSouth()||_.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(k){if(this._map){if(this._isOutOfMapMaxBounds(k))return this._setErrorState(),this.fire(new n.Event("outofmaxbounds",k)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=k,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(k),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(k),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",k)),this._finish()}}_updateCamera(k){const d=new n.LngLat(k.coords.longitude,k.coords.latitude),_=k.coords.accuracy,I=this._map.getBearing(),Y=n.extend({bearing:I},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(_),Y,{geolocateSource:!0})}_updateMarker(k){if(k){const d=new n.LngLat(k.coords.longitude,k.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=k.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const k=this._map.transform,d=n.mercatorZfromAltitude(1,k._center.lat)*k.worldSize,_=Math.ceil(2*this._accuracy*d);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(k){if(this._map){if(this.options.trackUserLocation)if(1===k.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===k.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",k)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(k){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=$e("button","mapboxgl-ctrl-geolocate",this._container),$e("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===k){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$e("div","mapboxgl-user-location"),this._dotElement.appendChild($e("div","mapboxgl-user-location-dot")),this._dotElement.appendChild($e("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new fr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=$e("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.Event("trackuserlocationend")))})}}_onDeviceOrientation(k){this._userLocationDotMarker&&(k.webkitCompassHeading?this._heading=k.webkitCompassHeading:!0===k.absolute&&(this._heading=-1*k.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let k;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(k={maximumAge:6e5,timeout:0},this._noTimeout=!0):(k=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,k),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const k=()=>{n.window.addEventListener("ondeviceorientationabsolute"in n.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==n.window.DeviceMotionEvent&&"function"==typeof n.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(d=>{"granted"===d&&k()}).catch(console.error):k()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),n.window.removeEventListener("deviceorientation",this._onDeviceOrientation),n.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:kr,ScaleControl:class{constructor(k){this.options=n.extend({},Am,k),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const k=this.options.maxWidth||100,d=this._map,_=d._containerHeight/2,I=d._containerWidth/2-k/2,Y=d.unproject([I,_]),V=d.unproject([I+k,_]),Q=Y.distanceTo(V);if("imperial"===this.options.unit){const re=3.2808*Q;re>5280?this._setScale(k,re/5280,"mile"):this._setScale(k,re,"foot")}else"nautical"===this.options.unit?this._setScale(k,Q/1852,"nautical-mile"):Q>=1e3?this._setScale(k,Q/1e3,"kilometer"):this._setScale(k,Q,"meter")}_setScale(k,d,_){this._map._requestDomTask(()=>{const I=function(V){const Q=Math.pow(10,`${Math.floor(V)}`.length-1);let re=V/Q;return re=re>=10?10:re>=5?5:re>=3?3:re>=2?2:re>=1?1:function(ue){const be=Math.pow(10,Math.ceil(-Math.log(ue)/Math.LN10));return Math.round(ue*be)/be}(re),Q*re}(d),Y=I/d;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==_?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:_}).format(I):`${I}&nbsp;${pg[_]}`,this._container.style.width=k*Y+"px"})}onAdd(k){return this._map=k,this._language=k.getLanguage(),this._container=$e("div","mapboxgl-ctrl mapboxgl-ctrl-scale",k.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(k){this._language=k,this._update()}setUnit(k){this.options.unit=k,this._update()}},FullscreenControl:class{constructor(k){this._fullscreen=!1,k&&k.container&&(k.container instanceof n.window.HTMLElement?this._container=k.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in n.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(k){return this._map=k,this._container||(this._container=this._map.getContainer()),this._controlContainer=$e("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!n.window.document.fullscreenEnabled&&!n.window.document.webkitFullscreenEnabled)}_setupUI(){const k=this._fullscreenButton=$e("button","mapboxgl-ctrl-fullscreen",this._controlContainer);$e("span","mapboxgl-ctrl-icon",k).setAttribute("aria-hidden","true"),k.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const k=this._getTitle();this._fullscreenButton.setAttribute("aria-label",k),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",k)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(n.window.document.fullscreenElement||n.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.Evented{constructor(k){super(),this.options=n.extend(Object.create(Ed),k),n.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(k&&k.className?k.className.trim().split(/\s+/):[])}addTo(k){return this._map&&this.remove(),this._map=k,this.options.closeOnClick&&k.on("preclick",this._onClose),this.options.closeOnMove&&k.on("move",this._onClose),k.on("remove",this.remove),this._update(),k._addPopup(this),this._focusFirstElement(),this._trackPointer?(k.on("mousemove",this._onMouseEvent),k.on("mouseup",this._onMouseEvent),k._canvasContainer.classList.add("mapboxgl-track-pointer")):k.on("move",this._update),this.fire(new n.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const k=this._map;return k&&(k.off("move",this._update),k.off("move",this._onClose),k.off("preclick",this._onClose),k.off("click",this._onClose),k.off("remove",this.remove),k.off("mousemove",this._onMouseEvent),k.off("mouseup",this._onMouseEvent),k.off("drag",this._onMouseEvent),k._canvasContainer&&k._canvasContainer.classList.remove("mapboxgl-track-pointer"),k._removePopup(this),this._map=void 0),this.fire(new n.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(k){this._lngLat=n.LngLat.convert(k),this._pos=null,this._trackPointer=!1,this._update();const d=this._map;return d&&(d.on("move",this._update),d.off("mousemove",this._onMouseEvent),d._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const k=this._map;return k&&(k.off("move",this._update),k.on("mousemove",this._onMouseEvent),k.on("drag",this._onMouseEvent),k._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(k){return this.setDOMContent(n.window.document.createTextNode(k))}setHTML(k){const d=n.window.document.createDocumentFragment(),_=n.window.document.createElement("body");let I;for(_.innerHTML=k;I=_.firstChild,I;)d.appendChild(I);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(k){return this.options.maxWidth=k,this._update(),this}setDOMContent(k){let d=this._content;if(d)for(;d.hasChildNodes();)d.firstChild&&d.removeChild(d.firstChild);else d=this._content=$e("div","mapboxgl-popup-content",this._container||void 0);if(d.appendChild(k),this.options.closeButton){const _=this._closeButton=$e("button","mapboxgl-popup-close-button",d);_.type="button",_.setAttribute("aria-label","Close popup"),_.setAttribute("aria-hidden","true"),_.innerHTML="&#215;",_.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(k){return this._classList.add(k),this._updateClassList(),this}removeClassName(k){return this._classList.delete(k),this._updateClassList(),this}setOffset(k){return this.options.offset=k,this._update(),this}toggleClassName(k){let d;return this._classList.delete(k)?d=!1:(this._classList.add(k),d=!0),this._updateClassList(),d}_onMouseEvent(k){this._update(k.point)}_getAnchor(k){if(this.options.anchor)return this.options.anchor;const d=this._map,_=this._container,I=this._pos;if(!d||!_||!I)return"bottom";const Y=_.offsetWidth,V=_.offsetHeight,Q=I.x<Y/2,re=I.x>d.transform.width-Y/2;if(I.y+k<V)return Q?"top-left":re?"top-right":"top";if(I.y>d.transform.height-V){if(Q)return"bottom-left";if(re)return"bottom-right"}return Q?"left":re?"right":"bottom"}_updateClassList(){const k=this._container;if(!k)return;const d=[...this._classList];d.push("mapboxgl-popup"),this._anchor&&d.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&d.push("mapboxgl-popup-track-pointer"),k.className=d.join(" ")}_update(k){const d=this._map,_=this._content;if(!d||!this._lngLat&&!this._trackPointer||!_)return;let I=this._container;if(I||(I=this._container=$e("div","mapboxgl-popup",d.getContainer()),this._tip=$e("div","mapboxgl-popup-tip",I),I.appendChild(_)),this.options.maxWidth&&I.style.maxWidth!==this.options.maxWidth&&(I.style.maxWidth=this.options.maxWidth),d.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pf(this._lngLat,this._pos,d.transform)),!this._trackPointer||k){const Y=this._pos=this._trackPointer&&k?k:d.project(this._lngLat),V=kd(this.options.offset),Q=this._anchor=this._getAnchor(V.y),re=kd(this.options.offset,Q),ue=Y.add(re).round();d._requestDomTask(()=>{this._container&&Q&&(this._container.style.transform=`${Nf[Q]} translate(${ue.x}px,${ue.y}px)`)})}if(!this._marker&&d._showingGlobe()){const Y=n.isLngLatBehindGlobe(d.transform,this._lngLat)?0:1;this._setOpacity(Y)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const k=this._container.querySelector(r0);k&&k.focus()}_onClose(){this.remove()}_setOpacity(k){this._container&&(this._container.style.opacity=`${k}`),this._content&&(this._content.style.pointerEvents=k?"auto":"none")}},Marker:fr,Style:Ys,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.Point,MercatorCoordinate:n.MercatorCoordinate,FreeCameraOptions:wc,Evented:n.Evented,config:n.config,prewarm:function(){bt().acquire(en)},clearPrewarmedResources:function(){const k=bn;k&&(k.isPreloaded()&&1===k.numActive()?(k.release(en),bn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return n.config.ACCESS_TOKEN},set accessToken(k){n.config.ACCESS_TOKEN=k},get baseApiUrl(){return n.config.API_URL},set baseApiUrl(k){n.config.API_URL=k},get workerCount(){return ji.workerCount},set workerCount(k){ji.workerCount=k},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(k){n.config.MAX_PARALLEL_IMAGE_REQUESTS=k},clearStorage(k){n.clearTileCache(k)},workerUrl:"",workerClass:null,setNow:n.exported.setNow,restoreNow:n.exported.restoreNow};return mf}),D}()},1472:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{u:()=>Xt});var D=Qt(1364);let Ze,mt=1;const n={};function j(Tt){return Tt in n&&(delete n[Tt],!0)}const He={setImmediate(Tt){const Nt=mt++;return n[Nt]=!0,Ze||(Ze=Promise.resolve()),Ze.then(()=>j(Nt)&&Tt()),Nt},clearImmediate(Tt){j(Tt)}},{setImmediate:Re,clearImmediate:$e}=He,it={setImmediate(...Tt){const{delegate:Nt}=it;return(Nt?.setImmediate||Re)(...Tt)},clearImmediate(Tt){const{delegate:Nt}=it;return(Nt?.clearImmediate||$e)(Tt)},delegate:void 0};var _t=Qt(9816);const Xt=new class gt extends _t.k{flush(Nt){this._active=!0;const Pi=this._scheduled;this._scheduled=void 0;const{actions:tt}=this;let Ci;Nt=Nt||tt.shift();do{if(Ci=Nt.execute(Nt.state,Nt.delay))break}while((Nt=tt[0])&&Nt.id===Pi&&tt.shift());if(this._active=!1,Ci){for(;(Nt=tt[0])&&Nt.id===Pi&&tt.shift();)Nt.unsubscribe();throw Ci}}}(class nt extends D.m{constructor(Nt,Pi){super(Nt,Pi),this.scheduler=Nt,this.work=Pi}requestAsyncId(Nt,Pi,tt=0){return null!==tt&&tt>0?super.requestAsyncId(Nt,Pi,tt):(Nt.actions.push(this),Nt._scheduled||(Nt._scheduled=it.setImmediate(Nt.flush.bind(Nt,void 0))))}recycleAsyncId(Nt,Pi,tt=0){var Ci;if(null!=tt?tt>0:this.delay>0)return super.recycleAsyncId(Nt,Pi,tt);const{actions:Mi}=Nt;null!=Pi&&(null===(Ci=Mi[Mi.length-1])||void 0===Ci?void 0:Ci.id)!==Pi&&(it.clearImmediate(Pi),Nt._scheduled===Pi&&(Nt._scheduled=void 0))}})},3756:function(ao){ao.exports=function(){"use strict";function Hs(ze,ae,me){return ae=it(ae),function gt(ze,ae){if(ae&&("object"==typeof ae||"function"==typeof ae))return ae;if(void 0!==ae)throw new TypeError("Derived constructors may only return object or undefined");return function _t(ze){if(void 0===ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ze}(ze)}(ze,D()?Reflect.construct(ae,me||[],it(ze).constructor):ae.apply(ze,me))}function D(){try{var ze=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D=function(){return!!ze})()}function n(ze){var ae=function Ze(ze,ae){if("object"!=typeof ze||!ze)return ze;var me=ze[Symbol.toPrimitive];if(void 0!==me){var Ge=me.call(ze,ae||"default");if("object"!=typeof Ge)return Ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===ae?String:Number)(ze)}(ze,"string");return"symbol"==typeof ae?ae:String(ae)}function j(ze){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ae){return typeof ae}:function(ae){return ae&&"function"==typeof Symbol&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae})(ze)}function He(ze,ae){if(!(ze instanceof ae))throw new TypeError("Cannot call a class as a function")}function Be(ze,ae){for(var me=0;me<ae.length;me++){var Ge=ae[me];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(ze,n(Ge.key),Ge)}}function Re(ze,ae,me){return ae&&Be(ze.prototype,ae),me&&Be(ze,me),Object.defineProperty(ze,"prototype",{writable:!1}),ze}function it(ze){return(it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(me){return me.__proto__||Object.getPrototypeOf(me)})(ze)}function nt(ze,ae){return(nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ge,Ee){return Ge.__proto__=Ee,Ge})(ze,ae)}function Et(){return Et=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(ae,me,Ge){var Ee=function Xt(ze,ae){for(;!Object.prototype.hasOwnProperty.call(ze,ae)&&null!==(ze=it(ze)););return ze}(ae,me);if(Ee){var yn=Object.getOwnPropertyDescriptor(Ee,me);return yn.get?yn.get.call(arguments.length<3?ae:Ge):yn.value}},Et.apply(this,arguments)}function Tt(ze,ae){return function tt(ze){if(Array.isArray(ze))return ze}(ze)||function mt(ze,ae){var me=null==ze?null:typeof Symbol<"u"&&ze[Symbol.iterator]||ze["@@iterator"];if(null!=me){var Ge,Ee,yn,Tr,ys=[],Or=!0,ko=!1;try{if(yn=(me=me.call(ze)).next,0===ae){if(Object(me)!==me)return;Or=!1}else for(;!(Or=(Ge=yn.call(me)).done)&&(ys.push(Ge.value),ys.length!==ae);Or=!0);}catch(jo){ko=!0,Ee=jo}finally{try{if(!Or&&null!=me.return&&(Tr=me.return(),Object(Tr)!==Tr))return}finally{if(ko)throw Ee}}return ys}}(ze,ae)||Mi(ze,ae)||function vi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(ze){return function Pi(ze){if(Array.isArray(ze))return kt(ze)}(ze)||function Ci(ze){if(typeof Symbol<"u"&&null!=ze[Symbol.iterator]||null!=ze["@@iterator"])return Array.from(ze)}(ze)||Mi(ze)||function Oi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(ze,ae){if(ze){if("string"==typeof ze)return kt(ze,ae);var me=Object.prototype.toString.call(ze).slice(8,-1);if("Object"===me&&ze.constructor&&(me=ze.constructor.name),"Map"===me||"Set"===me)return Array.from(ze);if("Arguments"===me||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me))return kt(ze,ae)}}function kt(ze,ae){(null==ae||ae>ze.length)&&(ae=ze.length);for(var me=0,Ge=new Array(ae);me<ae;me++)Ge[me]=ze[me];return Ge}function hi(ze,ae){return function Ri(ze,ae){return ae.get?ae.get.call(ze):ae.value}(ze,yi(ze,ae,"get"))}function Dt(ze,ae,me){return function Xi(ze,ae,me){if(ae.set)ae.set.call(ze,me);else{if(!ae.writable)throw new TypeError("attempted to set read only private field");ae.value=me}}(ze,yi(ze,ae,"set"),me),me}function yi(ze,ae,me){if(!ae.has(ze))throw new TypeError("attempted to "+me+" private field on non-instance");return ae.get(ze)}function qi(ze,ae,me){(function Tn(ze,ae){if(ae.has(ze))throw new TypeError("Cannot initialize the same private elements twice on an object")})(ze,ae),ae.set(ze,me)}var _n={},mr=function(ae){return new Promise(function(me){if(!ae)return me();var Ge=window.scrollX,Ee=window.scrollY;_n.restoreFocusTimeout=setTimeout(function(){_n.previousActiveElement instanceof HTMLElement?(_n.previousActiveElement.focus(),_n.previousActiveElement=null):document.body&&document.body.focus(),me()},100),window.scrollTo(Ge,Ee)})},Si=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(ze,ae){return ze[ae]="swal2-"+ae,ze},{}),Jn=["success","warning","info","question","error"].reduce(function(ze,ae){return ze[ae]="swal2-"+ae,ze},{}),ts="SweetAlert2:",Xr=function(ae){return ae.charAt(0).toUpperCase()+ae.slice(1)},Fr=function(ae){console.warn("".concat(ts," ").concat("object"===j(ae)?ae.join(" "):ae))},En=function(ae){console.error("".concat(ts," ").concat(ae))},Os=[],Ts=function(ae,me){!function(ae){Os.includes(ae)||(Os.push(ae),Fr(ae))}('"'.concat(ae,'" is deprecated and will be removed in the next major release. Please use "').concat(me,'" instead.'))},Zn=function(ae){return"function"==typeof ae?ae():ae},Un=function(ae){return ae&&"function"==typeof ae.toPromise},cr=function(ae){return Un(ae)?ae.toPromise():Promise.resolve(ae)},zn=function(ae){return ae&&Promise.resolve(ae)===ae},On=function(){return document.body.querySelector(".".concat(Si.container))},Vr=function(ae){var me=On();return me?me.querySelector(ae):null},jn=function(ae){return Vr(".".concat(ae))},an=function(){return jn(Si.popup)},ur=function(){return jn(Si.icon)},zs=function(){return jn(Si.title)},Vs=function(){return jn(Si["html-container"])},Fs=function(){return jn(Si.image)},Ds=function(){return jn(Si["progress-steps"])},Es=function(){return jn(Si["validation-message"])},wr=function(){return Vr(".".concat(Si.actions," .").concat(Si.confirm))},us=function(){return Vr(".".concat(Si.actions," .").concat(Si.cancel))},Ks=function(){return Vr(".".concat(Si.actions," .").concat(Si.deny))},as=function(){return Vr(".".concat(Si.loader))},Rs=function(){return jn(Si.actions)},Ss=function(){return jn(Si.footer)},Bs=function(){return jn(Si["timer-progress-bar"])},xa=function(){return jn(Si.close)},Ue=function(){var ae=an();if(!ae)return[];var me=ae.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),Ge=Array.from(me).sort(function(Tr,ys){var Or=parseInt(Tr.getAttribute("tabindex")||"0"),ko=parseInt(ys.getAttribute("tabindex")||"0");return Or>ko?1:Or<ko?-1:0}),Ee=ae.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),yn=Array.from(Ee).filter(function(Tr){return"-1"!==Tr.getAttribute("tabindex")});return Nt(new Set(Ge.concat(yn))).filter(function(Tr){return ui(Tr)})},Je=function(){return wi(document.body,Si.shown)&&!wi(document.body,Si["toast-shown"])&&!wi(document.body,Si["no-backdrop"])},At=function(){var ae=an();return!!ae&&wi(ae,Si.toast)},si=function(ae,me){if(ae.textContent="",me){var Ee=(new DOMParser).parseFromString(me,"text/html"),yn=Ee.querySelector("head");yn&&Array.from(yn.childNodes).forEach(function(ys){ae.appendChild(ys)});var Tr=Ee.querySelector("body");Tr&&Array.from(Tr.childNodes).forEach(function(ys){ys instanceof HTMLVideoElement||ys instanceof HTMLAudioElement?ae.appendChild(ys.cloneNode(!0)):ae.appendChild(ys)})}},wi=function(ae,me){if(!me)return!1;for(var Ge=me.split(/\s+/),Ee=0;Ee<Ge.length;Ee++)if(!ae.classList.contains(Ge[Ee]))return!1;return!0},Mt=function(ae,me,Ge){if(function(ae,me){Array.from(ae.classList).forEach(function(Ge){!Object.values(Si).includes(Ge)&&!Object.values(Jn).includes(Ge)&&!Object.values(me.showClass||{}).includes(Ge)&&ae.classList.remove(Ge)})}(ae,me),me.customClass&&me.customClass[Ge]){if("string"!=typeof me.customClass[Ge]&&!me.customClass[Ge].forEach)return void Fr("Invalid type of customClass.".concat(Ge,'! Expected string or iterable object, got "').concat(j(me.customClass[Ge]),'"'));Hi(ae,me.customClass[Ge])}},zi=function(ae,me){if(!me)return null;switch(me){case"select":case"textarea":case"file":return ae.querySelector(".".concat(Si.popup," > .").concat(Si[me]));case"checkbox":return ae.querySelector(".".concat(Si.popup," > .").concat(Si.checkbox," input"));case"radio":return ae.querySelector(".".concat(Si.popup," > .").concat(Si.radio," input:checked"))||ae.querySelector(".".concat(Si.popup," > .").concat(Si.radio," input:first-child"));case"range":return ae.querySelector(".".concat(Si.popup," > .").concat(Si.range," input"));default:return ae.querySelector(".".concat(Si.popup," > .").concat(Si.input))}},Sn=function(ae){if(ae.focus(),"file"!==ae.type){var me=ae.value;ae.value="",ae.value=me}},Rn=function(ae,me,Ge){!ae||!me||("string"==typeof me&&(me=me.split(/\s+/).filter(Boolean)),me.forEach(function(Ee){Array.isArray(ae)?ae.forEach(function(yn){Ge?yn.classList.add(Ee):yn.classList.remove(Ee)}):Ge?ae.classList.add(Ee):ae.classList.remove(Ee)}))},Hi=function(ae,me){Rn(ae,me,!0)},ar=function(ae,me){Rn(ae,me,!1)},Ht=function(ae,me){for(var Ge=Array.from(ae.children),Ee=0;Ee<Ge.length;Ee++){var yn=Ge[Ee];if(yn instanceof HTMLElement&&wi(yn,me))return yn}},Vt=function(ae,me,Ge){Ge==="".concat(parseInt(Ge))&&(Ge=parseInt(Ge)),Ge||0===parseInt(Ge)?ae.style.setProperty(me,"number"==typeof Ge?"".concat(Ge,"px"):Ge):ae.style.removeProperty(me)},dt=function(ae){ae&&(ae.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},ot=function(ae){ae&&(ae.style.display="none")},Xe=function(ae){var me=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";ae&&new MutationObserver(function(){Rt(ae,ae.innerHTML,me)}).observe(ae,{childList:!0,subtree:!0})},Qe=function(ae,me,Ge,Ee){var yn=ae.querySelector(me);yn&&yn.style.setProperty(Ge,Ee)},Rt=function(ae,me){me?dt(ae,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):ot(ae)},ui=function(ae){return!(!ae||!(ae.offsetWidth||ae.offsetHeight||ae.getClientRects().length))},ji=function(ae){return ae.scrollHeight>ae.clientHeight},bn=function(ae){var me=window.getComputedStyle(ae),Ge=parseFloat(me.getPropertyValue("animation-duration")||"0"),Ee=parseFloat(me.getPropertyValue("transition-duration")||"0");return Ge>0||Ee>0},bt=function(ae){var me=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Ge=Bs();Ge&&ui(Ge)&&(me&&(Ge.style.transition="none",Ge.style.width="100%"),setTimeout(function(){Ge.style.transition="width ".concat(ae/1e3,"s linear"),Ge.style.width="0%"},10))},ke=function(){return typeof window>"u"||typeof document>"u"},yt='\n <div aria-labelledby="'.concat(Si.title,'" aria-describedby="').concat(Si["html-container"],'" class="').concat(Si.popup,'" tabindex="-1">\n   <button type="button" class="').concat(Si.close,'"></button>\n   <ul class="').concat(Si["progress-steps"],'"></ul>\n   <div class="').concat(Si.icon,'"></div>\n   <img class="').concat(Si.image,'" />\n   <h2 class="').concat(Si.title,'" id="').concat(Si.title,'"></h2>\n   <div class="').concat(Si["html-container"],'" id="').concat(Si["html-container"],'"></div>\n   <input class="').concat(Si.input,'" id="').concat(Si.input,'" />\n   <input type="file" class="').concat(Si.file,'" />\n   <div class="').concat(Si.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(Si.select,'" id="').concat(Si.select,'"></select>\n   <div class="').concat(Si.radio,'"></div>\n   <label class="').concat(Si.checkbox,'">\n     <input type="checkbox" id="').concat(Si.checkbox,'" />\n     <span class="').concat(Si.label,'"></span>\n   </label>\n   <textarea class="').concat(Si.textarea,'" id="').concat(Si.textarea,'"></textarea>\n   <div class="').concat(Si["validation-message"],'" id="').concat(Si["validation-message"],'"></div>\n   <div class="').concat(Si.actions,'">\n     <div class="').concat(Si.loader,'"></div>\n     <button type="button" class="').concat(Si.confirm,'"></button>\n     <button type="button" class="').concat(Si.deny,'"></button>\n     <button type="button" class="').concat(Si.cancel,'"></button>\n   </div>\n   <div class="').concat(Si.footer,'"></div>\n   <div class="').concat(Si["timer-progress-bar-container"],'">\n     <div class="').concat(Si["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),We=function(){_n.currentInstance.resetValidationMessage()},p=function(ae){var me=function(){var ae=On();return!!ae&&(ae.remove(),ar([document.documentElement,document.body],[Si["no-backdrop"],Si["toast-shown"],Si["has-column"]]),!0)}();if(ke())En("SweetAlert2 requires document to initialize");else{var Ge=document.createElement("div");Ge.className=Si.container,me&&Hi(Ge,Si["no-transition"]),si(Ge,yt);var Ee=function(ae){return"string"==typeof ae?document.querySelector(ae):ae}(ae.target);Ee.appendChild(Ge),function(ae){var me=an();me.setAttribute("role",ae.toast?"alert":"dialog"),me.setAttribute("aria-live",ae.toast?"polite":"assertive"),ae.toast||me.setAttribute("aria-modal","true")}(ae),function(ae){"rtl"===window.getComputedStyle(ae).direction&&Hi(On(),Si.rtl)}(Ee),function(){var ae=an(),me=Ht(ae,Si.input),Ge=Ht(ae,Si.file),Ee=ae.querySelector(".".concat(Si.range," input")),yn=ae.querySelector(".".concat(Si.range," output")),Tr=Ht(ae,Si.select),ys=ae.querySelector(".".concat(Si.checkbox," input")),Or=Ht(ae,Si.textarea);me.oninput=We,Ge.onchange=We,Tr.onchange=We,ys.onchange=We,Or.oninput=We,Ee.oninput=function(){We(),yn.value=Ee.value},Ee.onchange=function(){We(),yn.value=Ee.value}}()}},y=function(ae,me){ae instanceof HTMLElement?me.appendChild(ae):"object"===j(ae)?w(ae,me):ae&&si(me,ae)},w=function(ae,me){ae.jquery?C(me,ae):si(me,ae.toString())},C=function(ae,me){if(ae.textContent="",0 in me)for(var Ge=0;Ge in me;Ge++)ae.appendChild(me[Ge].cloneNode(!0));else ae.appendChild(me.cloneNode(!0))},M=function(){if(ke())return!1;var ze=document.createElement("div");return typeof ze.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof ze.style.animation<"u"&&"animationend"}(),B=function(ae,me){var Ge=Rs(),Ee=as();!Ge||!Ee||(me.showConfirmButton||me.showDenyButton||me.showCancelButton?dt(Ge):ot(Ge),Mt(Ge,me,"actions"),function H(ze,ae,me){var Ge=wr(),Ee=Ks(),yn=us();!Ge||!Ee||!yn||(J(Ge,"confirm",me),J(Ee,"deny",me),J(yn,"cancel",me),function K(ze,ae,me,Ge){Ge.buttonsStyling?(Hi([ze,ae,me],Si.styled),Ge.confirmButtonColor&&(ze.style.backgroundColor=Ge.confirmButtonColor,Hi(ze,Si["default-outline"])),Ge.denyButtonColor&&(ae.style.backgroundColor=Ge.denyButtonColor,Hi(ae,Si["default-outline"])),Ge.cancelButtonColor&&(me.style.backgroundColor=Ge.cancelButtonColor,Hi(me,Si["default-outline"]))):ar([ze,ae,me],Si.styled)}(Ge,Ee,yn,me),me.reverseButtons&&(me.toast?(ze.insertBefore(yn,Ge),ze.insertBefore(Ee,Ge)):(ze.insertBefore(yn,ae),ze.insertBefore(Ee,ae),ze.insertBefore(Ge,ae))))}(Ge,Ee,me),si(Ee,me.loaderHtml||""),Mt(Ee,me,"loader"))};function J(ze,ae,me){var Ge=Xr(ae);Rt(ze,me["show".concat(Ge,"Button")],"inline-block"),si(ze,me["".concat(ae,"ButtonText")]||""),ze.setAttribute("aria-label",me["".concat(ae,"ButtonAriaLabel")]||""),ze.className=Si[ae],Mt(ze,me,"".concat(ae,"Button"))}var de=function(ae,me){var Ge=On();Ge&&(function xe(ze,ae){"string"==typeof ae?ze.style.background=ae:ae||Hi([document.documentElement,document.body],Si["no-backdrop"])}(Ge,me.backdrop),function Se(ze,ae){ae&&(ae in Si?Hi(ze,Si[ae]):(Fr('The "position" parameter is not valid, defaulting to "center"'),Hi(ze,Si.center)))}(Ge,me.position),function Pe(ze,ae){ae&&Hi(ze,Si["grow-".concat(ae)])}(Ge,me.grow),Mt(Ge,me,"container"))};var Te={innerParams:new WeakMap,domCache:new WeakMap},Ne=["input","file","range","select","radio","checkbox","textarea"],le=function(ae){if(ae.input){if(!Qi[ae.input])return void En("Unexpected type of input! Expected ".concat(Object.keys(Qi).join(" | "),', got "').concat(ae.input,'"'));var me=qt(ae.input),Ge=Qi[ae.input](me,ae);dt(me),ae.inputAutoFocus&&setTimeout(function(){Sn(Ge)})}},Le=function(ae,me){var Ge=zi(an(),ae);if(Ge)for(var Ee in function(ae){for(var me=0;me<ae.attributes.length;me++){var Ge=ae.attributes[me].name;["id","type","value","style"].includes(Ge)||ae.removeAttribute(Ge)}}(Ge),me)Ge.setAttribute(Ee,me[Ee])},je=function(ae){var me=qt(ae.input);"object"===j(ae.customClass)&&Hi(me,ae.customClass.input)},lt=function(ae,me){(!ae.placeholder||me.inputPlaceholder)&&(ae.placeholder=me.inputPlaceholder)},jt=function(ae,me,Ge){if(Ge.inputLabel){var Ee=document.createElement("label"),yn=Si["input-label"];Ee.setAttribute("for",ae.id),Ee.className=yn,"object"===j(Ge.customClass)&&Hi(Ee,Ge.customClass.inputLabel),Ee.innerText=Ge.inputLabel,me.insertAdjacentElement("beforebegin",Ee)}},qt=function(ae){return Ht(an(),Si[ae]||Si.input)},Di=function(ae,me){["string","number"].includes(j(me))?ae.value="".concat(me):zn(me)||Fr('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(j(me),'"'))},Qi={};Qi.text=Qi.email=Qi.password=Qi.number=Qi.tel=Qi.url=Qi.search=Qi.date=Qi["datetime-local"]=Qi.time=Qi.week=Qi.month=function(ze,ae){return Di(ze,ae.inputValue),jt(ze,ze,ae),lt(ze,ae),ze.type=ae.input,ze},Qi.file=function(ze,ae){return jt(ze,ze,ae),lt(ze,ae),ze},Qi.range=function(ze,ae){var me=ze.querySelector("input"),Ge=ze.querySelector("output");return Di(me,ae.inputValue),me.type=ae.input,Di(Ge,ae.inputValue),jt(me,ze,ae),ze},Qi.select=function(ze,ae){if(ze.textContent="",ae.inputPlaceholder){var me=document.createElement("option");si(me,ae.inputPlaceholder),me.value="",me.disabled=!0,me.selected=!0,ze.appendChild(me)}return jt(ze,ze,ae),ze},Qi.radio=function(ze){return ze.textContent="",ze},Qi.checkbox=function(ze,ae){var me=zi(an(),"checkbox");me.value="1",me.checked=!!ae.inputValue;var Ge=ze.querySelector("span");return si(Ge,ae.inputPlaceholder),me},Qi.textarea=function(ze,ae){Di(ze,ae.inputValue),lt(ze,ae),jt(ze,ze,ae);return setTimeout(function(){if("MutationObserver"in window){var Ge=parseInt(window.getComputedStyle(an()).width);new MutationObserver(function(){if(document.body.contains(ze)){var Tr=ze.offsetWidth+(Ee=ze,parseInt(window.getComputedStyle(Ee).marginLeft)+parseInt(window.getComputedStyle(Ee).marginRight));Tr>Ge?an().style.width="".concat(Tr,"px"):Vt(an(),"width",ae.width)}var Ee}).observe(ze,{attributes:!0,attributeFilter:["style"]})}}),ze};var cn=function(ae,me){var Ge=Vs();Ge&&(Xe(Ge),Mt(Ge,me,"htmlContainer"),me.html?(y(me.html,Ge),dt(Ge,"block")):me.text?(Ge.textContent=me.text,dt(Ge,"block")):ot(Ge),function(ae,me){var Ge=an();if(Ge){var Ee=Te.innerParams.get(ae),yn=!Ee||me.input!==Ee.input;Ne.forEach(function(Tr){var ys=Ht(Ge,Si[Tr]);ys&&(Le(Tr,me.inputAttributes),ys.className=Si[Tr],yn&&ot(ys))}),me.input&&(yn&&le(me),je(me))}}(ae,me))},Zr=function(ae,me){for(var Ge=0,Ee=Object.entries(Jn);Ge<Ee.length;Ge++){var yn=Tt(Ee[Ge],2);me.icon!==yn[0]&&ar(ae,yn[1])}Hi(ae,me.icon&&Jn[me.icon]),oa(ae,me),hs(),Mt(ae,me,"icon")},hs=function(){var ae=an();if(ae)for(var me=window.getComputedStyle(ae).getPropertyValue("background-color"),Ge=ae.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Ee=0;Ee<Ge.length;Ee++)Ge[Ee].style.backgroundColor=me},Js=function(ae,me){if(me.icon||me.iconHtml){var Ge=ae.innerHTML,Ee="";me.iconHtml?Ee=Ea(me.iconHtml):"success"===me.icon?(Ee='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',Ge=Ge.replace(/ style=".*?"/g,"")):"error"===me.icon?Ee='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':me.icon&&(Ee=Ea({question:"?",warning:"!",info:"i"}[me.icon])),Ge.trim()!==Ee.trim()&&si(ae,Ee)}},oa=function(ae,me){if(me.iconColor){ae.style.color=me.iconColor,ae.style.borderColor=me.iconColor;for(var Ge=0,Ee=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];Ge<Ee.length;Ge++)Qe(ae,Ee[Ge],"background-color",me.iconColor);Qe(ae,".swal2-success-ring","border-color",me.iconColor)}},Ea=function(ae){return'<div class="'.concat(Si["icon-content"],'">').concat(ae,"</div>")},ka=function(ae,me){var Ge=me.showClass||{};ae.className="".concat(Si.popup," ").concat(ui(ae)?Ge.popup:""),me.toast?(Hi([document.documentElement,document.body],Si["toast-shown"]),Hi(ae,Si.toast)):Hi(ae,Si.modal),Mt(ae,me,"popup"),"string"==typeof me.customClass&&Hi(ae,me.customClass),me.icon&&Hi(ae,Si["icon-".concat(me.icon)])},Ta=function(ae){var me=document.createElement("li");return Hi(me,Si["progress-step"]),si(me,ae),me},dh=function(ae){var me=document.createElement("li");return Hi(me,Si["progress-step-line"]),ae.progressStepsDistance&&Vt(me,"width",ae.progressStepsDistance),me},za=function(ae,me){(function(ae,me){var Ge=On(),Ee=an();if(Ge&&Ee){if(me.toast){Vt(Ge,"width",me.width),Ee.style.width="100%";var yn=as();yn&&Ee.insertBefore(yn,ur())}else Vt(Ee,"width",me.width);Vt(Ee,"padding",me.padding),me.color&&(Ee.style.color=me.color),me.background&&(Ee.style.background=me.background),ot(Es()),ka(Ee,me)}})(0,me),de(0,me),function(ae,me){var Ge=Ds();if(Ge){var Ee=me.progressSteps,yn=me.currentProgressStep;if(!Ee||0===Ee.length||void 0===yn)return void ot(Ge);dt(Ge),Ge.textContent="",yn>=Ee.length&&Fr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Ee.forEach(function(Tr,ys){var Or=Ta(Tr);if(Ge.appendChild(Or),ys===yn&&Hi(Or,Si["active-progress-step"]),ys!==Ee.length-1){var ko=dh(me);Ge.appendChild(ko)}})}}(0,me),function(ae,me){var Ge=Te.innerParams.get(ae),Ee=ur();if(Ee){if(Ge&&me.icon===Ge.icon)return Js(Ee,me),void Zr(Ee,me);if(!me.icon&&!me.iconHtml)return void ot(Ee);if(me.icon&&-1===Object.keys(Jn).indexOf(me.icon))return En('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(me.icon,'"')),void ot(Ee);dt(Ee),Js(Ee,me),Zr(Ee,me),Hi(Ee,me.showClass&&me.showClass.icon)}}(ae,me),function(ae,me){var Ge=Fs();if(Ge){if(!me.imageUrl)return void ot(Ge);dt(Ge,""),Ge.setAttribute("src",me.imageUrl),Ge.setAttribute("alt",me.imageAlt||""),Vt(Ge,"width",me.imageWidth),Vt(Ge,"height",me.imageHeight),Ge.className=Si.image,Mt(Ge,me,"image")}}(0,me),function(ae,me){var Ge=zs();Ge&&(Xe(Ge),Rt(Ge,me.title||me.titleText,"block"),me.title&&y(me.title,Ge),me.titleText&&(Ge.innerText=me.titleText),Mt(Ge,me,"title"))}(0,me),function(ae,me){var Ge=xa();Ge&&(si(Ge,me.closeButtonHtml||""),Mt(Ge,me,"closeButton"),Rt(Ge,me.showCloseButton),Ge.setAttribute("aria-label",me.closeButtonAriaLabel||""))}(0,me),cn(ae,me),B(0,me),function(ae,me){var Ge=Ss();Ge&&(Xe(Ge),Rt(Ge,me.footer,"block"),me.footer&&y(me.footer,Ge),Mt(Ge,me,"footer"))}(0,me);var Ge=an();"function"==typeof me.didRender&&Ge&&me.didRender(Ge)},rd=function(){var ae;return null===(ae=wr())||void 0===ae?void 0:ae.click()},vl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Va=function(ae){ae.keydownTarget&&ae.keydownHandlerAdded&&(ae.keydownTarget.removeEventListener("keydown",ae.keydownHandler,{capture:ae.keydownListenerCapture}),ae.keydownHandlerAdded=!1)},Nc=function(ae,me){var Ge,Ee=Ue();if(Ee.length)return(ae+=me)===Ee.length?ae=0:-1===ae&&(ae=Ee.length-1),void Ee[ae].focus();null===(Ge=an())||void 0===Ge||Ge.focus()},Rh=["ArrowRight","ArrowDown"],hf=["ArrowLeft","ArrowUp"],Ff=function(ae,me,Ge){ae&&(me.isComposing||229===me.keyCode||(ae.stopKeydownPropagation&&me.stopPropagation(),"Enter"===me.key?Lh(me,ae):"Tab"===me.key?Ys(me):[].concat(Rh,hf).includes(me.key)?xd(me.key):"Escape"===me.key&&Ko(me,ae,Ge)))},Lh=function(ae,me){if(Zn(me.allowEnterKey)){var Ge=zi(an(),me.input);if(ae.target&&Ge&&ae.target instanceof HTMLElement&&ae.target.outerHTML===Ge.outerHTML){if(["textarea","file"].includes(me.input))return;rd(),ae.preventDefault()}}},Ys=function(ae){for(var me=ae.target,Ge=Ue(),Ee=-1,yn=0;yn<Ge.length;yn++)if(me===Ge[yn]){Ee=yn;break}Nc(Ee,ae.shiftKey?-1:1),ae.stopPropagation(),ae.preventDefault()},xd=function(ae){var me=Rs(),Ge=wr(),Ee=Ks(),yn=us();if(me&&Ge&&Ee&&yn&&(!(document.activeElement instanceof HTMLElement)||[Ge,Ee,yn].includes(document.activeElement))){var ys=Rh.includes(ae)?"nextElementSibling":"previousElementSibling",Or=document.activeElement;if(Or){for(var ko=0;ko<me.children.length;ko++){if(!(Or=Or[ys]))return;if(Or instanceof HTMLButtonElement&&ui(Or))break}Or instanceof HTMLButtonElement&&Or.focus()}}},Ko=function(ae,me,Ge){Zn(me.allowEscapeKey)&&(ae.preventDefault(),Ge(vl.esc))},wa={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},_l=function(){Array.from(document.body.children).forEach(function(me){me.hasAttribute("data-previous-aria-hidden")?(me.setAttribute("aria-hidden",me.getAttribute("data-previous-aria-hidden")||""),me.removeAttribute("data-previous-aria-hidden")):me.removeAttribute("aria-hidden")})},Wu=typeof window<"u"&&!!window.GestureEvent,No=function(){var me,ae=On();ae&&(ae.ontouchstart=function(Ge){me=df(Ge)},ae.ontouchmove=function(Ge){me&&(Ge.preventDefault(),Ge.stopPropagation())})},df=function(ae){var me=ae.target,Ge=On(),Ee=Vs();return!(!Ge||!Ee||Fh(ae)||pc(ae)||me!==Ge&&(ji(Ge)||!(me instanceof HTMLElement)||"INPUT"===me.tagName||"TEXTAREA"===me.tagName||ji(Ee)&&Ee.contains(me)))},Fh=function(ae){return ae.touches&&ae.touches.length&&"stylus"===ae.touches[0].touchType},pc=function(ae){return ae.touches&&ae.touches.length>1},ia=null,Zl=function(ae){null===ia&&(document.body.scrollHeight>window.innerHeight||"scroll"===ae)&&(ia=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(ia+function(){var ae=document.createElement("div");ae.className=Si["scrollbar-measure"],document.body.appendChild(ae);var me=ae.getBoundingClientRect().width-ae.clientWidth;return document.body.removeChild(ae),me}(),"px"))};function xl(ze,ae,me,Ge){At()?ph(ze,Ge):(mr(me).then(function(){return ph(ze,Ge)}),Va(_n)),Wu?(ae.setAttribute("style","display:none !important"),ae.removeAttribute("class"),ae.innerHTML=""):ae.remove(),Je()&&(null!==ia&&(document.body.style.paddingRight="".concat(ia,"px"),ia=null),function(){if(wi(document.body,Si.iosfix)){var ae=parseInt(document.body.style.top,10);ar(document.body,Si.iosfix),document.body.style.top="",document.body.scrollTop=-1*ae}}(),_l()),function bd(){ar([document.documentElement,document.body],[Si.shown,Si["height-auto"],Si["no-backdrop"],Si["toast-shown"]])}()}function sl(ze){ze=va(ze);var ae=wa.swalPromiseResolve.get(this),me=pr(this);this.isAwaitingPromise?ze.isDismissed||(ol(this),ae(ze)):me&&ae(ze)}var pr=function(ae){var me=an();if(!me)return!1;var Ge=Te.innerParams.get(ae);if(!Ge||wi(me,Ge.hideClass.popup))return!1;ar(me,Ge.showClass.popup),Hi(me,Ge.hideClass.popup);var Ee=On();return ar(Ee,Ge.showClass.backdrop),Hi(Ee,Ge.hideClass.backdrop),po(ae,me,Ge),!0};function al(ze){var ae=wa.swalPromiseReject.get(this);ol(this),ae&&ae(ze)}var ol=function(ae){ae.isAwaitingPromise&&(delete ae.isAwaitingPromise,Te.innerParams.get(ae)||ae._destroy())},va=function(ae){return typeof ae>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},ae)},po=function(ae,me,Ge){var Ee=On(),yn=M&&bn(me);"function"==typeof Ge.willClose&&Ge.willClose(me),yn?ql(ae,me,Ee,Ge.returnFocus,Ge.didClose):xl(ae,Ee,Ge.returnFocus,Ge.didClose)},ql=function(ae,me,Ge,Ee,yn){M&&(_n.swalCloseEventFinishedCallback=xl.bind(null,ae,Ge,Ee,yn),me.addEventListener(M,function(Tr){Tr.target===me&&(_n.swalCloseEventFinishedCallback(),delete _n.swalCloseEventFinishedCallback)}))},ph=function(ae,me){setTimeout(function(){"function"==typeof me&&me.bind(ae.params)(),ae._destroy&&ae._destroy()})},Kl=function(ae){var me=an();if(me||new sd,me=an()){var Ge=as();At()?ot(ur()):tu(me,ae),dt(Ge),me.setAttribute("data-loading","true"),me.setAttribute("aria-busy","true"),me.focus()}},tu=function(ae,me){var Ge=Rs(),Ee=as();!Ge||!Ee||(!me&&ui(wr())&&(me=wr()),dt(Ge),me&&(ot(me),Ee.setAttribute("data-button-to-replace",me.className),Ge.insertBefore(Ee,me)),Hi([ae,Ge],Si.loading))},mc=function(ae){return ae.checked?1:0},gc=function(ae){return ae.checked?ae.value:null},Ut=function(ae){return ae.files&&ae.files.length?null!==ae.getAttribute("multiple")?ae.files:ae.files[0]:null},Us=function(ae,me){var Ge=an();if(Ge){var Ee=function(Tr){"select"===me.input?function Aa(ze,ae,me){var Ge=Ht(ze,Si.select);if(Ge){var Ee=function(Tr,ys,Or){var ko=document.createElement("option");ko.value=Or,si(ko,ys),ko.selected=Ml(Or,me.inputValue),Tr.appendChild(ko)};ae.forEach(function(yn){var Tr=yn[0],ys=yn[1];if(Array.isArray(ys)){var Or=document.createElement("optgroup");Or.label=Tr,Or.disabled=!1,Ge.appendChild(Or),ys.forEach(function(ko){return Ee(Or,ko[1],ko[0])})}else Ee(Ge,ys,Tr)}),Ge.focus()}}(Ge,bu(Tr),me):"radio"===me.input&&function mh(ze,ae,me){var Ge=Ht(ze,Si.radio);if(Ge){ae.forEach(function(yn){var Tr=yn[0],ys=yn[1],Or=document.createElement("input"),ko=document.createElement("label");Or.type="radio",Or.name=Si.radio,Or.value=Tr,Ml(Tr,me.inputValue)&&(Or.checked=!0);var jo=document.createElement("span");si(jo,ys),jo.className=Si.label,ko.appendChild(Or),ko.appendChild(jo),Ge.appendChild(ko)});var Ee=Ge.querySelectorAll("input");Ee.length&&Ee[0].focus()}}(Ge,bu(Tr),me)};Un(me.inputOptions)||zn(me.inputOptions)?(Kl(wr()),cr(me.inputOptions).then(function(yn){ae.hideLoading(),Ee(yn)})):"object"===j(me.inputOptions)?Ee(me.inputOptions):En("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(j(me.inputOptions)))}},mo=function(ae,me){var Ge=ae.getInput();Ge&&(ot(Ge),cr(me.inputValue).then(function(Ee){Ge.value="".concat("number"===me.input?parseFloat(Ee)||0:Ee),dt(Ge),Ge.focus(),ae.hideLoading()}).catch(function(Ee){En("Error in inputValue promise: ".concat(Ee)),Ge.value="",dt(Ge),Ge.focus(),ae.hideLoading()}))};var bu=function ze(ae){var me=[];return ae instanceof Map?ae.forEach(function(Ge,Ee){var yn=Ge;"object"===j(yn)&&(yn=ze(yn)),me.push([Ee,yn])}):Object.keys(ae).forEach(function(Ge){var Ee=ae[Ge];"object"===j(Ee)&&(Ee=ze(Ee)),me.push([Ge,Ee])}),me},Ml=function(ae,me){return!!me&&me.toString()===ae.toString()},Ol=void 0,iu=function(ae,me){var Ge=Te.innerParams.get(ae);if(Ge.input){var Ee=ae.getInput(),yn=function(ae,me){var Ge=ae.getInput();if(!Ge)return null;switch(me.input){case"checkbox":return mc(Ge);case"radio":return gc(Ge);case"file":return Ut(Ge);default:return me.inputAutoTrim?Ge.value.trim():Ge.value}}(ae,Ge);Ge.inputValidator?Ll(ae,yn,me):Ee&&!Ee.checkValidity()?(ae.enableButtons(),ae.showValidationMessage(Ge.validationMessage||Ee.validationMessage)):"deny"===me?Ho(ae,yn):wu(ae,yn)}else En('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Xr(me)))},Ll=function(ae,me,Ge){var Ee=Te.innerParams.get(ae);ae.disableInput(),Promise.resolve().then(function(){return cr(Ee.inputValidator(me,Ee.validationMessage))}).then(function(Tr){ae.enableButtons(),ae.enableInput(),Tr?ae.showValidationMessage(Tr):"deny"===Ge?Ho(ae,me):wu(ae,me)})},Ho=function(ae,me){var Ge=Te.innerParams.get(ae||Ol);Ge.showLoaderOnDeny&&Kl(Ks()),Ge.preDeny?(ae.isAwaitingPromise=!0,Promise.resolve().then(function(){return cr(Ge.preDeny(me,Ge.validationMessage))}).then(function(yn){!1===yn?(ae.hideLoading(),ol(ae)):ae.close({isDenied:!0,value:typeof yn>"u"?me:yn})}).catch(function(yn){return _c(ae||Ol,yn)})):ae.close({isDenied:!0,value:me})},vc=function(ae,me){ae.close({isConfirmed:!0,value:me})},_c=function(ae,me){ae.rejectPromise(me)},wu=function(ae,me){var Ge=Te.innerParams.get(ae||Ol);Ge.showLoaderOnConfirm&&Kl(),Ge.preConfirm?(ae.resetValidationMessage(),ae.isAwaitingPromise=!0,Promise.resolve().then(function(){return cr(Ge.preConfirm(me,Ge.validationMessage))}).then(function(yn){ui(Es())||!1===yn?(ae.hideLoading(),ol(ae)):vc(ae,typeof yn>"u"?me:yn)}).catch(function(yn){return _c(ae||Ol,yn)})):vc(ae,me)};function cl(){var ze=Te.innerParams.get(this);if(ze){var ae=Te.domCache.get(this);ot(ae.loader),At()?ze.icon&&dt(ur()):gh(ae),ar([ae.popup,ae.actions],Si.loading),ae.popup.removeAttribute("aria-busy"),ae.popup.removeAttribute("data-loading"),ae.confirmButton.disabled=!1,ae.denyButton.disabled=!1,ae.cancelButton.disabled=!1}}var gh=function(ae){var me=ae.popup.getElementsByClassName(ae.loader.getAttribute("data-button-to-replace"));me.length?dt(me[0],"inline-block"):!ui(wr())&&!ui(Ks())&&!ui(us())&&ot(ae.actions)};function zc(){var ze=Te.innerParams.get(this),ae=Te.domCache.get(this);return ae?zi(ae.popup,ze.input):null}function Nh(ze,ae,me){var Ge=Te.domCache.get(ze);ae.forEach(function(Ee){Ge[Ee].disabled=me})}function Jo(ze,ae){var me=an();if(me&&ze)if("radio"===ze.type)for(var Ge=me.querySelectorAll('[name="'.concat(Si.radio,'"]')),Ee=0;Ee<Ge.length;Ee++)Ge[Ee].disabled=ae;else ze.disabled=ae}function Pl(){Nh(this,["confirmButton","denyButton","cancelButton"],!1)}function yc(){Nh(this,["confirmButton","denyButton","cancelButton"],!0)}function Xu(){Jo(this.getInput(),!1)}function zh(){Jo(this.getInput(),!0)}function go(ze){var ae=Te.domCache.get(this),me=Te.innerParams.get(this);si(ae.validationMessage,ze),ae.validationMessage.className=Si["validation-message"],me.customClass&&me.customClass.validationMessage&&Hi(ae.validationMessage,me.customClass.validationMessage),dt(ae.validationMessage);var Ge=this.getInput();Ge&&(Ge.setAttribute("aria-invalid","true"),Ge.setAttribute("aria-describedby",Si["validation-message"]),Sn(Ge),Hi(Ge,Si.inputerror))}function Yc(){var ze=Te.domCache.get(this);ze.validationMessage&&ot(ze.validationMessage);var ae=this.getInput();ae&&(ae.removeAttribute("aria-invalid"),ae.removeAttribute("aria-describedby"),ar(ae,Si.inputerror))}var ul={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Bf=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Vo={},Ma=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],wl=function(ae){return Object.prototype.hasOwnProperty.call(ul,ae)},hl=function(ae){return-1!==Bf.indexOf(ae)},oo=function(ae){return Vo[ae]},wd=function(ae){wl(ae)||Fr('Unknown parameter "'.concat(ae,'"'))},nu=function(ae){Ma.includes(ae)&&Fr('The parameter "'.concat(ae,'" is incompatible with toasts'))},Jl=function(ae){var me=oo(ae);me&&Ts(ae,me)};function Zu(ze){var ae=an(),me=Te.innerParams.get(this);if(ae&&!wi(ae,me.hideClass.popup)){var Ge=Eu(ze),Ee=Object.assign({},me,Ge);za(this,Ee),Te.innerParams.set(this,Ee),Object.defineProperties(this,{params:{value:Object.assign({},this.params,ze),writable:!1,enumerable:!0}})}else Fr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var Eu=function(ae){var me={};return Object.keys(ae).forEach(function(Ge){hl(Ge)?me[Ge]=ae[Ge]:Fr("Invalid parameter to update: ".concat(Ge))}),me};function Li(){var ze=Te.domCache.get(this),ae=Te.innerParams.get(this);ae?(ze.popup&&_n.swalCloseEventFinishedCallback&&(_n.swalCloseEventFinishedCallback(),delete _n.swalCloseEventFinishedCallback),"function"==typeof ae.didDestroy&&ae.didDestroy(),mn(this)):un(this)}var mn=function(ae){un(ae),delete ae.params,delete _n.keydownHandler,delete _n.keydownTarget,delete _n.currentInstance},un=function(ae){ae.isAwaitingPromise?(Mr(Te,ae),ae.isAwaitingPromise=!0):(Mr(wa,ae),Mr(Te,ae),delete ae.isAwaitingPromise,delete ae.disableButtons,delete ae.enableButtons,delete ae.getInput,delete ae.disableInput,delete ae.enableInput,delete ae.hideLoading,delete ae.disableLoading,delete ae.showValidationMessage,delete ae.resetValidationMessage,delete ae.close,delete ae.closePopup,delete ae.closeModal,delete ae.closeToast,delete ae.rejectPromise,delete ae.update,delete ae._destroy)},Mr=function(ae,me){for(var Ge in ae)ae[Ge].delete(me)},Ls=Object.freeze({__proto__:null,_destroy:Li,close:sl,closeModal:sl,closePopup:sl,closeToast:sl,disableButtons:yc,disableInput:zh,disableLoading:cl,enableButtons:Pl,enableInput:Xu,getInput:zc,handleAwaitingPromise:ol,hideLoading:cl,rejectPromise:al,resetValidationMessage:Yc,showValidationMessage:go,update:Zu}),zo=function(ae,me,Ge){me.popup.onclick=function(){ae&&(la(ae)||ae.timer||ae.input)||Ge(vl.close)}},la=function(ae){return!!(ae.showConfirmButton||ae.showDenyButton||ae.showCancelButton||ae.showCloseButton)},Fl=!1,Yh=function(ae){ae.popup.onmousedown=function(){ae.container.onmouseup=function(me){ae.container.onmouseup=function(){},me.target===ae.container&&(Fl=!0)}}},dl=function(ae){ae.container.onmousedown=function(){ae.popup.onmouseup=function(me){ae.popup.onmouseup=function(){},(me.target===ae.popup||me.target instanceof HTMLElement&&ae.popup.contains(me.target))&&(Fl=!0)}}},ku=function(ae,me,Ge){me.container.onclick=function(Ee){Fl?Fl=!1:Ee.target===me.container&&Zn(ae.allowOutsideClick)&&Ge(vl.backdrop)}},xc=function(ae){return ae instanceof Element||function(ae){return"object"===j(ae)&&ae.jquery}(ae)};var fl=function(){if(_n.timeout)return function(){var ae=Bs();if(ae){var me=parseInt(window.getComputedStyle(ae).width);ae.style.removeProperty("transition"),ae.style.width="100%";var Ge=parseInt(window.getComputedStyle(ae).width);ae.style.width="".concat(me/Ge*100,"%")}}(),_n.timeout.stop()},Tu=function(){if(_n.timeout){var ae=_n.timeout.start();return bt(ae),ae}},wc=!1,Qo={};var Bl=function(ae){for(var me=ae.target;me&&me!==document;me=me.parentNode)for(var Ge in Qo){var Ee=me.getAttribute(Ge);if(Ee)return void Qo[Ge].fire({template:Ee})}},Su=Object.freeze({__proto__:null,argsToParams:function(ae){var me={};return"object"!==j(ae[0])||xc(ae[0])?["title","html","icon"].forEach(function(Ge,Ee){var yn=ae[Ee];"string"==typeof yn||xc(yn)?me[Ge]=yn:void 0!==yn&&En("Unexpected type of ".concat(Ge,'! Expected "string" or "Element", got ').concat(j(yn)))}):Object.assign(me,ae[0]),me},bindClickHandler:function Cc(){Qo[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,wc||(document.body.addEventListener("click",Bl),wc=!0)},clickCancel:function(){var ae;return null===(ae=us())||void 0===ae?void 0:ae.click()},clickConfirm:rd,clickDeny:function(){var ae;return null===(ae=Ks())||void 0===ae?void 0:ae.click()},enableLoading:Kl,fire:function Uo(){for(var ae=arguments.length,me=new Array(ae),Ge=0;Ge<ae;Ge++)me[Ge]=arguments[Ge];return function Qt(ze,ae,me){if(D())return Reflect.construct.apply(null,arguments);var Ge=[null];Ge.push.apply(Ge,ae);var Ee=new(ze.bind.apply(ze,Ge));return me&&nt(Ee,me.prototype),Ee}(this,me)},getActions:Rs,getCancelButton:us,getCloseButton:xa,getConfirmButton:wr,getContainer:On,getDenyButton:Ks,getFocusableElements:Ue,getFooter:Ss,getHtmlContainer:Vs,getIcon:ur,getIconContent:function(){return jn(Si["icon-content"])},getImage:Fs,getInputLabel:function(){return jn(Si["input-label"])},getLoader:as,getPopup:an,getProgressSteps:Ds,getTimerLeft:function(){return _n.timeout&&_n.timeout.getTimerLeft()},getTimerProgressBar:Bs,getTitle:zs,getValidationMessage:Es,increaseTimer:function(ae){if(_n.timeout){var me=_n.timeout.increase(ae);return bt(me,!0),me}},isDeprecatedParameter:oo,isLoading:function(){var ae=an();return!!ae&&ae.hasAttribute("data-loading")},isTimerRunning:function(){return!(!_n.timeout||!_n.timeout.isRunning())},isUpdatableParameter:hl,isValidParameter:wl,isVisible:function(){return ui(an())},mixin:function ya(ze){var ae=function(me){function Ge(){return He(this,Ge),Hs(this,Ge,arguments)}return function $e(ze,ae){if("function"!=typeof ae&&null!==ae)throw new TypeError("Super expression must either be null or a function");ze.prototype=Object.create(ae&&ae.prototype,{constructor:{value:ze,writable:!0,configurable:!0}}),Object.defineProperty(ze,"prototype",{writable:!1}),ae&&nt(ze,ae)}(Ge,me),Re(Ge,[{key:"_main",value:function(yn,Tr){return Et(it(Ge.prototype),"_main",this).call(this,yn,Object.assign({},ze,Tr))}}]),Ge}(this);return ae},resumeTimer:Tu,showLoading:Kl,stopTimer:fl,toggleTimer:function(){var ae=_n.timeout;return ae&&(ae.running?fl():Tu())}}),Gc=function(){function ze(ae,me){He(this,ze),this.callback=ae,this.remaining=me,this.running=!1,this.start()}return Re(ze,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(me){var Ge=this.running;return Ge&&this.stop(),this.remaining+=me,Ge&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),ze}(),Nl=["swal-title","swal-html","swal-footer"],Au=function(ae){var me={};return Array.from(ae.querySelectorAll("swal-param")).forEach(function(Ee){v(Ee,["name","value"]);var yn=Ee.getAttribute("name"),Tr=Ee.getAttribute("value");me[yn]="boolean"==typeof ul[yn]?"false"!==Tr:"object"===j(ul[yn])?JSON.parse(Tr):Tr}),me},Ec=function(ae){var me={};return Array.from(ae.querySelectorAll("swal-function-param")).forEach(function(Ee){var yn=Ee.getAttribute("name"),Tr=Ee.getAttribute("value");me[yn]=new Function("return ".concat(Tr))()}),me},Hc=function(ae){var me={};return Array.from(ae.querySelectorAll("swal-button")).forEach(function(Ee){v(Ee,["type","color","aria-label"]);var yn=Ee.getAttribute("type");me["".concat(yn,"ButtonText")]=Ee.innerHTML,me["show".concat(Xr(yn),"Button")]=!0,Ee.hasAttribute("color")&&(me["".concat(yn,"ButtonColor")]=Ee.getAttribute("color")),Ee.hasAttribute("aria-label")&&(me["".concat(yn,"ButtonAriaLabel")]=Ee.getAttribute("aria-label"))}),me},au=function(ae){var me={},Ge=ae.querySelector("swal-image");return Ge&&(v(Ge,["src","width","height","alt"]),Ge.hasAttribute("src")&&(me.imageUrl=Ge.getAttribute("src")),Ge.hasAttribute("width")&&(me.imageWidth=Ge.getAttribute("width")),Ge.hasAttribute("height")&&(me.imageHeight=Ge.getAttribute("height")),Ge.hasAttribute("alt")&&(me.imageAlt=Ge.getAttribute("alt"))),me},vh=function(ae){var me={},Ge=ae.querySelector("swal-icon");return Ge&&(v(Ge,["type","color"]),Ge.hasAttribute("type")&&(me.icon=Ge.getAttribute("type")),Ge.hasAttribute("color")&&(me.iconColor=Ge.getAttribute("color")),me.iconHtml=Ge.innerHTML),me},ou=function(ae){var me={},Ge=ae.querySelector("swal-input");Ge&&(v(Ge,["type","label","placeholder","value"]),me.input=Ge.getAttribute("type")||"text",Ge.hasAttribute("label")&&(me.inputLabel=Ge.getAttribute("label")),Ge.hasAttribute("placeholder")&&(me.inputPlaceholder=Ge.getAttribute("placeholder")),Ge.hasAttribute("value")&&(me.inputValue=Ge.getAttribute("value")));var Ee=Array.from(ae.querySelectorAll("swal-input-option"));return Ee.length&&(me.inputOptions={},Ee.forEach(function(yn){v(yn,["value"]);var Tr=yn.getAttribute("value");me.inputOptions[Tr]=yn.innerHTML})),me},lo=function(ae,me){var Ge={};for(var Ee in me){var yn=me[Ee],Tr=ae.querySelector(yn);Tr&&(v(Tr,[]),Ge[yn.replace(/^swal-/,"")]=Tr.innerHTML.trim())}return Ge},lr=function(ae){var me=Nl.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(ae.children).forEach(function(Ge){var Ee=Ge.tagName.toLowerCase();me.includes(Ee)||Fr("Unrecognized element <".concat(Ee,">"))})},v=function(ae,me){Array.from(ae.attributes).forEach(function(Ge){-1===me.indexOf(Ge.name)&&Fr(['Unrecognized attribute "'.concat(Ge.name,'" on <').concat(ae.tagName.toLowerCase(),">."),"".concat(me.length?"Allowed attributes are: ".concat(me.join(", ")):"To set the value, use HTML within the element.")])})},Z=function(ae){var me=On(),Ge=an();"function"==typeof ae.willOpen&&ae.willOpen(Ge);var yn=window.getComputedStyle(document.body).overflowY;ri(me,Ge,ae),setTimeout(function(){Ie(me,Ge)},10),Je()&&(rt(me,ae.scrollbarPadding,yn),Array.from(document.body.children).forEach(function(me){me===On()||me.contains(On())||(me.hasAttribute("aria-hidden")&&me.setAttribute("data-previous-aria-hidden",me.getAttribute("aria-hidden")||""),me.setAttribute("aria-hidden","true"))})),!At()&&!_n.previousActiveElement&&(_n.previousActiveElement=document.activeElement),"function"==typeof ae.didOpen&&setTimeout(function(){return ae.didOpen(Ge)}),ar(me,Si["no-transition"])},fe=function ze(ae){var me=an();if(ae.target===me&&M){var Ge=On();me.removeEventListener(M,ze),Ge.style.overflowY="auto"}},Ie=function(ae,me){M&&bn(me)?(ae.style.overflowY="hidden",me.addEventListener(M,fe)):ae.style.overflowY="auto"},rt=function(ae,me,Ge){(function(){if(Wu&&!wi(document.body,Si.iosfix)){var ae=document.body.scrollTop;document.body.style.top="".concat(-1*ae,"px"),Hi(document.body,Si.iosfix),No()}})(),me&&"hidden"!==Ge&&Zl(Ge),setTimeout(function(){ae.scrollTop=0})},ri=function(ae,me,Ge){Hi(ae,Ge.showClass.backdrop),Ge.animation?(me.style.setProperty("opacity","0","important"),dt(me,"grid"),setTimeout(function(){Hi(me,Ge.showClass.popup),me.style.removeProperty("opacity")},10)):dt(me,"grid"),Hi([document.documentElement,document.body],Si.shown),Ge.heightAuto&&Ge.backdrop&&!Ge.toast&&Hi([document.documentElement,document.body],Si["height-auto"])},Ai={email:function(ae,me){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(ae)?Promise.resolve():Promise.resolve(me||"Invalid email address")},url:function(ae,me){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(ae)?Promise.resolve():Promise.resolve(me||"Invalid URL")}};function Dr(ze){(function ln(ze){ze.inputValidator||("email"===ze.input&&(ze.inputValidator=Ai.email),"url"===ze.input&&(ze.inputValidator=Ai.url))})(ze),ze.showLoaderOnConfirm&&!ze.preConfirm&&Fr("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function qn(ze){(!ze.target||"string"==typeof ze.target&&!document.querySelector(ze.target)||"string"!=typeof ze.target&&!ze.target.appendChild)&&(Fr('Target parameter is not valid, defaulting to "body"'),ze.target="body")}(ze),"string"==typeof ze.title&&(ze.title=ze.title.split("\n").join("<br />")),p(ze)}var Qr,Ps=new WeakMap,$s=function(){function ze(){if(He(this,ze),qi(this,Ps,{writable:!0,value:void 0}),!(typeof window>"u")){Qr=this;for(var ae=arguments.length,me=new Array(ae),Ge=0;Ge<ae;Ge++)me[Ge]=arguments[Ge];var Ee=Object.freeze(this.constructor.argsToParams(me));this.params=Ee,this.isAwaitingPromise=!1,Dt(this,Ps,this._main(Qr.params))}}return Re(ze,[{key:"_main",value:function(me){var Ge=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(ae){for(var me in!1===ae.backdrop&&ae.allowOutsideClick&&Fr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),ae)wd(me),ae.toast&&nu(me),Jl(me)}(Object.assign({},Ge,me)),_n.currentInstance){var Ee=wa.swalPromiseResolve.get(_n.currentInstance),yn=_n.currentInstance.isAwaitingPromise;_n.currentInstance._destroy(),yn||Ee({isDismissed:!0}),Je()&&_l()}_n.currentInstance=Qr;var Tr=vo(me,Ge);Dr(Tr),Object.freeze(Tr),_n.timeout&&(_n.timeout.stop(),delete _n.timeout),clearTimeout(_n.restoreFocusTimeout);var ys=ho(Qr);return za(Qr,Tr),Te.innerParams.set(Qr,Tr),uo(Qr,ys,Tr)}},{key:"then",value:function(me){return hi(this,Ps).then(me)}},{key:"finally",value:function(me){return hi(this,Ps).finally(me)}}]),ze}(),uo=function(ae,me,Ge){return new Promise(function(Ee,yn){var Tr=function(Or){ae.close({isDismissed:!0,dismiss:Or})};wa.swalPromiseResolve.set(ae,Ee),wa.swalPromiseReject.set(ae,yn),me.confirmButton.onclick=function(){!function(ae){var me=Te.innerParams.get(ae);ae.disableButtons(),me.input?iu(ae,"confirm"):wu(ae,!0)}(ae)},me.denyButton.onclick=function(){!function(ae){var me=Te.innerParams.get(ae);ae.disableButtons(),me.returnInputValueOnDeny?iu(ae,"deny"):Ho(ae,!1)}(ae)},me.cancelButton.onclick=function(){!function(ae,me){ae.disableButtons(),me(vl.cancel)}(ae,Tr)},me.closeButton.onclick=function(){Tr(vl.close)},function(ae,me,Ge){ae.toast?zo(ae,me,Ge):(Yh(me),dl(me),ku(ae,me,Ge))}(Ge,me,Tr),function(ae,me,Ge){Va(ae),me.toast||(ae.keydownHandler=function(Ee){return Ff(me,Ee,Ge)},ae.keydownTarget=me.keydownListenerCapture?window:an(),ae.keydownListenerCapture=me.keydownListenerCapture,ae.keydownTarget.addEventListener("keydown",ae.keydownHandler,{capture:ae.keydownListenerCapture}),ae.keydownHandlerAdded=!0)}(_n,Ge,Tr),function(ae,me){"select"===me.input||"radio"===me.input?Us(ae,me):["text","email","number","tel","textarea"].some(function(Ge){return Ge===me.input})&&(Un(me.inputValue)||zn(me.inputValue))&&(Kl(wr()),mo(ae,me))}(ae,Ge),Z(Ge),Cl(_n,Ge,Tr),Vc(me,Ge),setTimeout(function(){me.container.scrollTop=0})})},vo=function(ae,me){var Ge=function(ae){var me="string"==typeof ae.template?document.querySelector(ae.template):ae.template;if(!me)return{};var Ge=me.content;return lr(Ge),Object.assign(Au(Ge),Ec(Ge),Hc(Ge),au(Ge),vh(Ge),ou(Ge),lo(Ge,Nl))}(ae),Ee=Object.assign({},ul,me,Ge,ae);return Ee.showClass=Object.assign({},ul.showClass,Ee.showClass),Ee.hideClass=Object.assign({},ul.hideClass,Ee.hideClass),!1===Ee.animation&&(Ee.showClass={backdrop:"swal2-noanimation"},Ee.hideClass={}),Ee},ho=function(ae){var me={popup:an(),container:On(),actions:Rs(),confirmButton:wr(),denyButton:Ks(),cancelButton:us(),loader:as(),closeButton:xa(),validationMessage:Es(),progressSteps:Ds()};return Te.domCache.set(ae,me),me},Cl=function(ae,me,Ge){var Ee=Bs();ot(Ee),me.timer&&(ae.timeout=new Gc(function(){Ge("timer"),delete ae.timeout},me.timer),me.timerProgressBar&&(dt(Ee),Mt(Ee,me,"timerProgressBar"),setTimeout(function(){ae.timeout&&ae.timeout.running&&bt(me.timer)})))},Vc=function(ae,me){if(!me.toast){if(!Zn(me.allowEnterKey))return void Cd();Yo(ae,me)||Nc(-1,1)}},Yo=function(ae,me){return me.focusDeny&&ui(ae.denyButton)?(ae.denyButton.focus(),!0):me.focusCancel&&ui(ae.cancelButton)?(ae.cancelButton.focus(),!0):!(!me.focusConfirm||!ui(ae.confirmButton)||(ae.confirmButton.focus(),0))},Cd=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var _h=new Date,Uc=localStorage.getItem("swal-initiation");Uc?(_h.getTime()-Date.parse(Uc))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var ze=document.createElement("audio");ze.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",ze.loop=!0,document.body.appendChild(ze),setTimeout(function(){ze.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(_h))}$s.prototype.disableButtons=yc,$s.prototype.enableButtons=Pl,$s.prototype.getInput=zc,$s.prototype.disableInput=zh,$s.prototype.enableInput=Xu,$s.prototype.hideLoading=cl,$s.prototype.disableLoading=cl,$s.prototype.showValidationMessage=go,$s.prototype.resetValidationMessage=Yc,$s.prototype.close=sl,$s.prototype.closePopup=sl,$s.prototype.closeModal=sl,$s.prototype.closeToast=sl,$s.prototype.rejectPromise=al,$s.prototype.update=Zu,$s.prototype._destroy=Li,Object.assign($s,Su),Object.keys(Ls).forEach(function(ze){$s[ze]=function(){var ae;return Qr&&Qr[ze]?(ae=Qr)[ze].apply(ae,arguments):null}}),$s.DismissReason=vl,$s.version="11.10.6";var sd=$s;return sd.default=sd,sd}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Hs,Qt){var D=Hs.createElement("style");if(Hs.getElementsByTagName("head")[0].appendChild(D),D.styleSheet)D.styleSheet.disabled||(D.styleSheet.cssText=Qt);else try{D.innerHTML=Qt}catch{D.innerText=Qt}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},4884:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{UT:()=>ui,gb:()=>bn});var D=Qt(4496),mt=Qt(6504),Ze=Qt(3616),n=Qt(112),j=Qt(5448),He=Qt(560),Be=Qt(7773),$e=Qt(3120);var nt=Qt(5568),_t=Qt(9212),gt=Qt(4680),Xt=Qt(6684),Et=Qt(4704),Tt=Qt(4096),Nt=Qt(1472),Pi=Qt(5657),tt=Qt(800),Ci=Qt(3412),Mi=Qt(1368);const kt=["content"],Oi=["scroll"],vi=["padding"],hi=bt=>({searchTerm:bt});function Dt(bt,Ft){if(1&bt&&(D.I0R(0,"div",6),D.C_f(1,7),D.C$Y()),2&bt){const ke=D.GaO();D.yG2(),D.E7m("ngTemplateOutlet",ke.headerTemplate)("ngTemplateOutletContext",D.S45(2,hi,ke.filterValue))}}function yi(bt,Ft){if(1&bt&&(D.I0R(0,"div",8),D.C_f(1,7),D.C$Y()),2&bt){const ke=D.GaO();D.yG2(),D.E7m("ngTemplateOutlet",ke.footerTemplate)("ngTemplateOutletContext",D.S45(2,hi,ke.filterValue))}}const Ri=["*"],Xi=["searchInput"],Tn=["clearButton"];function qi(bt,Ft){if(1&bt){const ke=D.KQA();D.I0R(0,"span",15),D.qCj("click",function(){D.usT(ke);const Wt=D.GaO().$implicit,We=D.GaO(2);return D.CGJ(We.unselect(Wt))}),D.OEk(1,"\xd7"),D.C$Y(),D.wR5(2,"span",16)}if(2&bt){const ke=D.GaO().$implicit,yt=D.GaO(2);D.yG2(2),D.E7m("ngItemLabel",ke.label)("escape",yt.escapeHTML)}}function nn(bt,Ft){}const _n=(bt,Ft,ke)=>({item:bt,clear:Ft,label:ke});function Fn(bt,Ft){if(1&bt&&(D.I0R(0,"div",12),D.yuY(1,qi,3,2,"ng-template",null,13,D.gJz)(3,nn,0,0,"ng-template",14),D.C$Y()),2&bt){const ke=Ft.$implicit,yt=D.Gew(2),Wt=D.GaO(2);D.eAK("ng-value-disabled",ke.disabled),D.yG2(3),D.E7m("ngTemplateOutlet",Wt.labelTemplate||yt)("ngTemplateOutletContext",D.uAc(4,_n,ke.value,Wt.clearItem,ke.label))}}function mr(bt,Ft){if(1&bt&&(D.SAx(0),D.yuY(1,Fn,4,8,"div",11),D.k70()),2&bt){const ke=D.GaO();D.yG2(),D.E7m("ngForOf",ke.selectedItems)("ngForTrackBy",ke.trackByOption)}}function hr(bt,Ft){}const Nr=(bt,Ft)=>({items:bt,clear:Ft});function Si(bt,Ft){if(1&bt&&D.yuY(0,hr,0,0,"ng-template",14),2&bt){const ke=D.GaO();D.E7m("ngTemplateOutlet",ke.multiLabelTemplate)("ngTemplateOutletContext",D.IBC(2,Nr,ke.selectedValues,ke.clearItem))}}function kn(bt,Ft){1&bt&&D.wR5(0,"div",19)}function Jn(bt,Ft){}function ts(bt,Ft){if(1&bt&&(D.SAx(0),D.yuY(1,kn,1,0,"ng-template",null,17,D.gJz)(3,Jn,0,0,"ng-template",18),D.k70()),2&bt){const ke=D.Gew(2),yt=D.GaO();D.yG2(3),D.E7m("ngTemplateOutlet",yt.loadingSpinnerTemplate||ke)}}function Xr(bt,Ft){if(1&bt&&(D.I0R(0,"span",20,21)(2,"span",22),D.OEk(3,"\xd7"),D.C$Y()()),2&bt){const ke=D.GaO();D._6D("title",ke.clearAllText)}}function Fr(bt,Ft){if(1&bt&&D.wR5(0,"span",28),2&bt){const ke=D.GaO().$implicit,yt=D.GaO(2);D.E7m("ngItemLabel",ke.label)("escape",yt.escapeHTML)}}function En(bt,Ft){}const Os=(bt,Ft,ke,yt)=>({item:bt,item$:Ft,index:ke,searchTerm:yt});function Cs(bt,Ft){if(1&bt){const ke=D.KQA();D.I0R(0,"div",26),D.qCj("click",function(){const We=D.usT(ke).$implicit,Jt=D.GaO(2);return D.CGJ(Jt.toggleItem(We))})("mouseover",function(){const We=D.usT(ke).$implicit,Jt=D.GaO(2);return D.CGJ(Jt.onItemHover(We))}),D.yuY(1,Fr,1,2,"ng-template",null,27,D.gJz)(3,En,0,0,"ng-template",14),D.C$Y()}if(2&bt){const ke=Ft.$implicit,yt=D.Gew(2),Wt=D.GaO(2);D.eAK("ng-option-disabled",ke.disabled)("ng-option-selected",ke.selected)("ng-optgroup",ke.children)("ng-option",!ke.children)("ng-option-child",!!ke.parent)("ng-option-marked",ke===Wt.itemsList.markedItem),D.e48("role",ke.children?"group":"option")("aria-selected",ke.selected)("id",null==ke?null:ke.htmlId),D.yG2(3),D.E7m("ngTemplateOutlet",ke.children?Wt.optgroupTemplate||yt:Wt.optionTemplate||yt)("ngTemplateOutletContext",D.WuN(17,Os,ke.value,ke,ke.index,Wt.searchTerm))}}function Ts(bt,Ft){if(1&bt&&(D.I0R(0,"span")(1,"span",31),D.OEk(2),D.C$Y(),D.OEk(3),D.C$Y()),2&bt){const ke=D.GaO(3);D.yG2(2),D.cNF(ke.addTagText),D.yG2(),D.oRS('"',ke.searchTerm,'"')}}function Zn(bt,Ft){}function Un(bt,Ft){if(1&bt){const ke=D.KQA();D.I0R(0,"div",29),D.qCj("mouseover",function(){D.usT(ke);const Wt=D.GaO(2);return D.CGJ(Wt.itemsList.unmarkItem())})("click",function(){D.usT(ke);const Wt=D.GaO(2);return D.CGJ(Wt.selectTag())}),D.yuY(1,Ts,4,2,"ng-template",null,30,D.gJz)(3,Zn,0,0,"ng-template",14),D.C$Y()}if(2&bt){const ke=D.Gew(2),yt=D.GaO(2);D.eAK("ng-option-marked",!yt.itemsList.markedItem),D.yG2(3),D.E7m("ngTemplateOutlet",yt.tagTemplate||ke)("ngTemplateOutletContext",D.S45(4,hi,yt.searchTerm))}}function cr(bt,Ft){if(1&bt&&(D.I0R(0,"div",33),D.OEk(1),D.C$Y()),2&bt){const ke=D.GaO(3);D.yG2(),D.cNF(ke.notFoundText)}}function zn(bt,Ft){}function On(bt,Ft){if(1&bt&&(D.SAx(0),D.yuY(1,cr,2,1,"ng-template",null,32,D.gJz)(3,zn,0,0,"ng-template",14),D.k70()),2&bt){const ke=D.Gew(2),yt=D.GaO(2);D.yG2(3),D.E7m("ngTemplateOutlet",yt.notFoundTemplate||ke)("ngTemplateOutletContext",D.S45(2,hi,yt.searchTerm))}}function Vr(bt,Ft){if(1&bt&&(D.I0R(0,"div",33),D.OEk(1),D.C$Y()),2&bt){const ke=D.GaO(3);D.yG2(),D.cNF(ke.typeToSearchText)}}function jn(bt,Ft){}function an(bt,Ft){if(1&bt&&(D.SAx(0),D.yuY(1,Vr,2,1,"ng-template",null,34,D.gJz)(3,jn,0,0,"ng-template",18),D.k70()),2&bt){const ke=D.Gew(2),yt=D.GaO(2);D.yG2(3),D.E7m("ngTemplateOutlet",yt.typeToSearchTemplate||ke)}}function ur(bt,Ft){if(1&bt&&(D.I0R(0,"div",33),D.OEk(1),D.C$Y()),2&bt){const ke=D.GaO(3);D.yG2(),D.cNF(ke.loadingText)}}function xr(bt,Ft){}function zs(bt,Ft){if(1&bt&&(D.SAx(0),D.yuY(1,ur,2,1,"ng-template",null,35,D.gJz)(3,xr,0,0,"ng-template",14),D.k70()),2&bt){const ke=D.Gew(2),yt=D.GaO(2);D.yG2(3),D.E7m("ngTemplateOutlet",yt.loadingTextTemplate||ke)("ngTemplateOutletContext",D.S45(2,hi,yt.searchTerm))}}function Vs(bt,Ft){if(1&bt){const ke=D.KQA();D.I0R(0,"ng-dropdown-panel",23),D.qCj("update",function(Wt){D.usT(ke);const We=D.GaO();return D.CGJ(We.viewPortItems=Wt)})("scroll",function(Wt){D.usT(ke);const We=D.GaO();return D.CGJ(We.scroll.emit(Wt))})("scrollToEnd",function(Wt){D.usT(ke);const We=D.GaO();return D.CGJ(We.scrollToEnd.emit(Wt))})("outsideClick",function(){D.usT(ke);const Wt=D.GaO();return D.CGJ(Wt.close())}),D.SAx(1),D.yuY(2,Cs,4,22,"div",24)(3,Un,4,6,"div",25),D.k70(),D.yuY(4,On,4,4,"ng-container",3)(5,an,4,1,"ng-container",3)(6,zs,4,4,"ng-container",3),D.C$Y()}if(2&bt){const ke=D.GaO();D.eAK("ng-select-multiple",ke.multiple),D.E7m("virtualScroll",ke.virtualScroll)("bufferAmount",ke.bufferAmount)("appendTo",ke.appendTo)("position",ke.dropdownPosition)("headerTemplate",ke.headerTemplate)("footerTemplate",ke.footerTemplate)("filterValue",ke.searchTerm)("items",ke.itemsList.filteredItems)("markedItem",ke.itemsList.markedItem)("ngClass",ke.appendTo?ke.classes:null)("id",ke.dropdownId),D.yG2(2),D.E7m("ngForOf",ke.viewPortItems)("ngForTrackBy",ke.trackByOption),D.yG2(),D.E7m("ngIf",ke.showAddTag),D.yG2(),D.E7m("ngIf",ke.showNoItemsFound()),D.yG2(),D.E7m("ngIf",ke.showTypeToSearch()),D.yG2(),D.E7m("ngIf",ke.loading&&0===ke.itemsList.filteredItems.length)}}const Fs=/[&<>"']/g,Ds=RegExp(Fs.source),Es={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function us(bt){return null!=bt}function Ks(bt){return"object"==typeof bt&&us(bt)}function as(bt){return bt instanceof Function}let Rs=(()=>{class bt{constructor(ke){this.element=ke,this.escape=!0}ngOnChanges(ke){this.element.nativeElement.innerHTML=this.escape?function wr(bt){return bt&&Ds.test(bt)?bt.replace(Fs,Ft=>Es[Ft]):bt}(this.ngItemLabel):this.ngItemLabel}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.GMv))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[D.SYr]})}return bt})(),Ss=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-option-tmp",""]]})}return bt})(),Bs=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-optgroup-tmp",""]]})}return bt})(),xa=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-label-tmp",""]]})}return bt})(),Gt=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-multi-label-tmp",""]]})}return bt})(),Ue=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-header-tmp",""]]})}return bt})(),Je=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-footer-tmp",""]]})}return bt})(),At=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-notfound-tmp",""]]})}return bt})(),St=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-typetosearch-tmp",""]]})}return bt})(),si=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-loadingtext-tmp",""]]})}return bt})(),wi=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-tag-tmp",""]]})}return bt})(),ki=(()=>{class bt{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.Yw2))};static#t=this.\u0275dir=D.Sc5({type:bt,selectors:[["","ng-loadingspinner-tmp",""]]})}return bt})();function Mt(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const zi={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function Sn(bt){return bt.replace(/[^\u0000-\u007E]/g,ke=>zi[ke]||ke)}class Rn{constructor(Ft,ke){this._ngSelect=Ft,this._selectionModel=ke,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let Ft=this.selectedItems.length-1;for(;Ft>=0;Ft--){const ke=this.selectedItems[Ft];if(!ke.disabled)return ke}return null}setItems(Ft){this._items=Ft.map((ke,yt)=>this.mapItem(ke,yt)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(Ft){if(Ft.selected||this.maxItemsSelected)return;const ke=this._ngSelect.multiple;ke||this.clearSelected(),this._selectionModel.select(Ft,ke,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(Ft)}unselect(Ft){Ft.selected&&(this._selectionModel.unselect(Ft,this._ngSelect.multiple),this._ngSelect.hideSelected&&us(Ft.index)&&this._ngSelect.multiple&&this._showSelected(Ft))}findItem(Ft){let ke;return ke=this._ngSelect.compareWith?yt=>this._ngSelect.compareWith(yt.value,Ft):this._ngSelect.bindValue?yt=>!yt.children&&this.resolveNested(yt.value,this._ngSelect.bindValue)===Ft:yt=>yt.value===Ft||!yt.children&&yt.label&&yt.label===this.resolveNested(Ft,this._ngSelect.bindLabel),this._items.find(yt=>ke(yt))}addItem(Ft){const ke=this.mapItem(Ft,this._items.length);return this._items.push(ke),this._filteredItems.push(ke),ke}clearSelected(Ft=!1){this._selectionModel.clear(Ft),this._items.forEach(ke=>{ke.selected=Ft&&ke.selected&&ke.disabled,ke.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(Ft){return Ft=Sn(Ft).toLocaleLowerCase(),this.filteredItems.find(ke=>Sn(ke.label).toLocaleLowerCase().substr(0,Ft.length)===Ft)}filter(Ft){if(!Ft)return void this.resetFilteredItems();this._filteredItems=[],Ft=this._ngSelect.searchFn?Ft:Sn(Ft).toLocaleLowerCase();const ke=this._ngSelect.searchFn||this._defaultSearchFn,yt=this._ngSelect.hideSelected;for(const Wt of Array.from(this._groups.keys())){const We=[];for(const Jt of this._groups.get(Wt))yt&&(Jt.parent&&Jt.parent.selected||Jt.selected)||ke(Ft,this._ngSelect.searchFn?Jt.value:Jt)&&We.push(Jt);if(We.length>0){const[Jt]=We.slice(-1);if(Jt.parent){const ge=this._items.find(l=>l===Jt.parent);this._filteredItems.push(ge)}this._filteredItems.push(...We)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(Ft=>!Ft.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(Ft){this._markedIndex=this._filteredItems.indexOf(Ft)}markSelectedOrDefault(Ft){if(0===this._filteredItems.length)return;const ke=this._getLastMarkedIndex();this._markedIndex=ke>-1?ke:Ft?this.filteredItems.findIndex(yt=>!yt.disabled):-1}resolveNested(Ft,ke){if(!Ks(Ft))return Ft;if(-1===ke.indexOf("."))return Ft[ke];{const yt=ke.split(".");let Wt=Ft;for(let We=0,Jt=yt.length;We<Jt;++We){if(null==Wt)return null;Wt=Wt[yt[We]]}return Wt}}mapItem(Ft,ke){const yt=us(Ft.$ngOptionLabel)?Ft.$ngOptionLabel:this.resolveNested(Ft,this._ngSelect.bindLabel),Wt=us(Ft.$ngOptionValue)?Ft.$ngOptionValue:Ft;return{index:ke,label:us(yt)?yt.toString():"",value:Wt,disabled:Ft.disabled,htmlId:`${this._ngSelect.dropdownId}-${ke}`}}mapSelectedItems(){const Ft=this._ngSelect.multiple;for(const ke of this.selectedItems){const yt=this._ngSelect.bindValue?this.resolveNested(ke.value,this._ngSelect.bindValue):ke.value,Wt=us(yt)?this.findItem(yt):null;this._selectionModel.unselect(ke,Ft),this._selectionModel.select(Wt||ke,Ft,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(ke=>-1===this.selectedItems.indexOf(ke)))}_showSelected(Ft){if(this._filteredItems.push(Ft),Ft.parent){const ke=Ft.parent;this._filteredItems.find(Wt=>Wt===ke)||this._filteredItems.push(ke)}else if(Ft.children)for(const ke of Ft.children)ke.selected=!1,this._filteredItems.push(ke);this._filteredItems=[...this._filteredItems.sort((ke,yt)=>ke.index-yt.index)]}_hideSelected(Ft){this._filteredItems=this._filteredItems.filter(ke=>ke!==Ft),Ft.parent?Ft.parent.children.every(yt=>yt.selected)&&(this._filteredItems=this._filteredItems.filter(yt=>yt!==Ft.parent)):Ft.children&&(this._filteredItems=this.filteredItems.filter(ke=>ke.parent!==Ft))}_defaultSearchFn(Ft,ke){return Sn(ke.label).toLocaleLowerCase().indexOf(Ft)>-1}_getNextItemIndex(Ft){return Ft>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(Ft){0===this._filteredItems.length||this._filteredItems.every(ke=>ke.disabled)||(this._markedIndex=this._getNextItemIndex(Ft),this.markedItem.disabled&&this._stepToItem(Ft))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const Ft=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&Ft<0?-1:Math.max(this.markedIndex,Ft)}_groupBy(Ft,ke){const yt=new Map;if(0===Ft.length)return yt;if(Array.isArray(Ft[0].value[ke])){for(const Jt of Ft){const ge=(Jt.value[ke]||[]).map((l,u)=>this.mapItem(l,u));yt.set(Jt,ge)}return yt}const Wt=as(this._ngSelect.groupBy),We=Jt=>{const ge=Wt?ke(Jt.value):Jt.value[ke];return us(ge)?ge:void 0};for(const Jt of Ft){const ge=We(Jt),l=yt.get(ge);l?l.push(Jt):yt.set(ge,[Jt])}return yt}_flatten(Ft){const ke=as(this._ngSelect.groupBy),yt=[];for(const Wt of Array.from(Ft.keys())){let We=yt.length;if(void 0===Wt){const y=Ft.get(void 0)||[];yt.push(...y.map(w=>(w.index=We++,w)));continue}const Jt=Ks(Wt),ge={label:Jt?"":String(Wt),children:void 0,parent:null,index:We++,disabled:!this._ngSelect.selectableGroup,htmlId:Mt()},l=ke?this._ngSelect.bindLabel:this._ngSelect.groupBy,u=this._ngSelect.groupValue||(()=>Jt?Wt.value:{[l]:Wt}),p=Ft.get(Wt).map(y=>(y.parent=ge,y.children=void 0,y.index=We++,y));ge.children=p,ge.value=u(Wt,p.map(y=>y.value)),yt.push(ge),yt.push(...p)}return yt}}var Hi=function(bt){return bt[bt.Tab=9]="Tab",bt[bt.Enter=13]="Enter",bt[bt.Esc=27]="Esc",bt[bt.Space=32]="Space",bt[bt.ArrowUp=38]="ArrowUp",bt[bt.ArrowDown=40]="ArrowDown",bt[bt.Backspace=8]="Backspace",bt}(Hi||{});let ar=(()=>{class bt{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(ke,yt,Wt){const We=this._dimensions,Jt=We.itemHeight*yt,l=Math.max(0,ke)/Jt*yt;let u=Math.min(yt,Math.ceil(l)+(We.itemsPerViewport+1));const y=Math.max(0,u-We.itemsPerViewport);let w=Math.min(y,Math.floor(l)),C=We.itemHeight*Math.ceil(w)-We.itemHeight*Math.min(w,Wt);return C=isNaN(C)?0:C,w=isNaN(w)?-1:w,u=isNaN(u)?-1:u,w-=Wt,w=Math.max(0,w),u+=Wt,u=Math.min(yt,u),{topPadding:C,scrollHeight:Jt,start:w,end:u}}setDimensions(ke,yt){const Wt=Math.max(1,Math.floor(yt/ke));this._dimensions={itemHeight:ke,panelHeight:yt,itemsPerViewport:Wt}}getScrollTo(ke,yt,Wt){const{panelHeight:We}=this.dimensions,Jt=ke+yt,l=Wt+We;return We>=Jt&&Wt===ke?null:Jt>l?Wt+Jt-l:ke<=Wt?ke:null}static#e=this.\u0275fac=function(yt){return new(yt||bt)};static#t=this.\u0275prov=D.wxM({token:bt,factory:bt.\u0275fac})}return bt})();const Ht=["top","right","bottom","left"],Vt=typeof requestAnimationFrame<"u"?Tt.A:Nt.u;let dt=(()=>{class bt{constructor(ke,yt,Wt,We,Jt){this._renderer=ke,this._zone=yt,this._panelService=Wt,this._document=Jt,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new D._w7,this.scroll=new D._w7,this.scrollToEnd=new D._w7,this.outsideClick=new D._w7,this._destroy$=new Pi.E,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=We.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(ke){ke!==this._itemsLength&&(this._itemsLength=ke,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:ke,panelHeight:yt}=this._panelService.dimensions,Wt=this.markedItem.index*ke;return yt>Wt?0:Wt}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(ke){if(ke.items){const yt=ke.items;this._onItemsChange(yt.currentValue,yt.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(ke,yt=!1){if(!ke)return;const Wt=this.items.indexOf(ke);if(Wt<0||Wt>=this.itemsLength)return;let We;if(this.virtualScroll){const Jt=this._panelService.dimensions.itemHeight;We=this._panelService.getScrollTo(Wt*Jt,Jt,this._lastScrollPosition)}else{const Jt=this._dropdown.querySelector(`#${ke.htmlId}`);We=this._panelService.getScrollTo(Jt.offsetTop,Jt.clientHeight,yt?Jt.offsetTop:this._lastScrollPosition)}us(We)&&(this._scrollablePanel.scrollTop=We)}scrollToTag(){const ke=this._scrollablePanel;ke.scrollTop=ke.scrollHeight-ke.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),Ht.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(ke){Ht.forEach(Wt=>{const We=`ng-select-${Wt}`;this._renderer.removeClass(this._dropdown,We),this._renderer.removeClass(this._select,We)});const yt=`ng-select-${ke}`;this._renderer.addClass(this._dropdown,yt),this._renderer.addClass(this._select,yt)}_handleScroll(){this._zone.runOutsideAngular(()=>{(0,tt.w)(this.scrollElementRef.nativeElement,"scroll").pipe((0,Ze.a)(this._destroy$),function it(bt,Ft=n.M){return function Re(bt){return(0,j.i)((Ft,ke)=>{let yt=!1,Wt=null,We=null,Jt=!1;const ge=()=>{if(We?.unsubscribe(),We=null,yt){yt=!1;const u=Wt;Wt=null,ke.next(u)}Jt&&ke.complete()},l=()=>{We=null,Jt&&ke.complete()};Ft.subscribe((0,Be.e)(ke,u=>{yt=!0,Wt=u,We||(0,He.Uv)(bt(u)).subscribe(We=(0,Be.e)(ke,ge,l))},()=>{Jt=!0,(!yt||!We||We.closed)&&ke.complete()}))})}(()=>(0,$e.k)(bt,Ft))}(0,Vt)).subscribe(ke=>{const yt=ke.path||ke.composedPath&&ke.composedPath();yt&&(0!==yt.length||ke.target)&&this._onContentScrolled(yt&&0!==yt.length?yt[0].scrollTop:ke.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{(0,Ci.U)((0,tt.w)(this._document,"touchstart",{capture:!0}),(0,tt.w)(this._document,"mousedown",{capture:!0})).pipe((0,Ze.a)(this._destroy$)).subscribe(ke=>this._checkToClose(ke))})}_checkToClose(ke){if(this._select.contains(ke.target)||this._dropdown.contains(ke.target))return;const yt=ke.path||ke.composedPath&&ke.composedPath();ke.target&&ke.target.shadowRoot&&yt&&yt[0]&&this._select.contains(yt[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(ke,yt){this.items=ke||[],this._scrollToEndFired=!1,this.itemsLength=ke.length,this.virtualScroll?this._updateItemsRange(yt):(this._setVirtualHeight(),this._updateItems(yt))}_updateItems(ke){this.update.emit(this.items),!1!==ke&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,ke)})})}_updateItemsRange(ke){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{ke?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(ke){this.virtualScroll&&this._renderItemsRange(ke),this._lastScrollPosition=ke,this._fireScrollToEnd(ke)}_updateVirtualHeight(ke){this._updateScrollHeight&&(this._virtualPadding.style.height=`${ke}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(ke=null){if(ke&&this._lastScrollPosition===ke)return;const yt=this._panelService.calculateItems(ke=ke||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(yt.scrollHeight),this._contentPanel.style.transform=`translateY(${yt.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(yt.start,yt.end)),this.scroll.emit({start:yt.start,end:yt.end})}),us(ke)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=ke,this._lastScrollPosition=ke)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[ke]=this.items;return this.update.emit([ke]),Promise.resolve().then(()=>{const Wt=this._dropdown.querySelector(`#${ke.htmlId}`).clientHeight;return this._virtualPadding.style.height=Wt*this.itemsLength+"px",this._panelService.setDimensions(Wt,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(ke){this._scrollToEndFired||0===ke||ke+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(ke){if("auto"!==this.position)return this.position;const yt=this._select.getBoundingClientRect(),Wt=document.documentElement.scrollTop||document.body.scrollTop;return yt.top+window.pageYOffset+yt.height+ke.getBoundingClientRect().height>Wt+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const ke=this._select.getBoundingClientRect(),yt=this._parent.getBoundingClientRect();this._dropdown.style.left=ke.left-yt.left+"px",this._dropdown.style.width=ke.width+"px",this._dropdown.style.minWidth=ke.width+"px"}_updateYPosition(){const ke=this._select.getBoundingClientRect(),yt=this._parent.getBoundingClientRect(),Wt=ke.height;"top"===this._currentPosition?(this._dropdown.style.bottom=yt.bottom-ke.bottom+Wt+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=ke.top-yt.top+Wt+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{(0,tt.w)(this._dropdown,"mousedown").pipe((0,Ze.a)(this._destroy$)).subscribe(ke=>{"INPUT"!==ke.target.tagName&&ke.preventDefault()})})}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.q87),D.GI1(D.WW2),D.GI1(ar),D.GI1(D.GMv),D.GI1(Mi.Ud,8))};static#t=this.\u0275cmp=D.In1({type:bt,selectors:[["ng-dropdown-panel"]],viewQuery:function(yt,Wt){if(1&yt&&(D.CC$(kt,7,D.GMv),D.CC$(Oi,7,D.GMv),D.CC$(vi,7,D.GMv)),2&yt){let We;D.wto(We=D.Gqi())&&(Wt.contentElementRef=We.first),D.wto(We=D.Gqi())&&(Wt.scrollElementRef=We.first),D.wto(We=D.Gqi())&&(Wt.paddingElementRef=We.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[D.SYr],ngContentSelectors:Ri,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(yt,Wt){1&yt&&(D.kPM(),D.yuY(0,Dt,2,4,"div",0),D.I0R(1,"div",1,2),D.wR5(3,"div",null,3),D.I0R(5,"div",null,4),D._Xx(7),D.C$Y()(),D.yuY(8,yi,2,4,"div",5)),2&yt&&(D.E7m("ngIf",Wt.headerTemplate),D.yG2(3),D.eAK("total-padding",Wt.virtualScroll),D.yG2(2),D.eAK("scrollable-content",Wt.virtualScroll&&Wt.items.length),D.yG2(3),D.E7m("ngIf",Wt.footerTemplate))},dependencies:[Mi.u_,Mi.XV],encapsulation:2,changeDetection:0})}return bt})(),ot=(()=>{class bt{get disabled(){return this._disabled}set disabled(ke){this._disabled=this._isDisabled(ke)}constructor(ke){this.elementRef=ke,this.stateChange$=new Pi.E,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(ke){ke.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(ke){return null!=ke&&"false"!=`${ke}`}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.GI1(D.GMv))};static#t=this.\u0275cmp=D.In1({type:bt,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[D.SYr],ngContentSelectors:Ri,decls:1,vars:0,template:function(yt,Wt){1&yt&&(D.kPM(),D._Xx(0))},encapsulation:2,changeDetection:0})}return bt})(),Xe=(()=>{class bt{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static#e=this.\u0275fac=function(yt){return new(yt||bt)};static#t=this.\u0275prov=D.wxM({token:bt,factory:bt.\u0275fac,providedIn:"root"})}return bt})(),Qe=(()=>{class bt{warn(ke){console.warn(ke)}static#e=this.\u0275fac=function(yt){return new(yt||bt)};static#t=this.\u0275prov=D.wxM({token:bt,factory:bt.\u0275fac,providedIn:"root"})}return bt})();const Rt=new D.UbH("ng-select-selection-model");let ui=(()=>{class bt{get items(){return this._items}set items(ke){null===ke&&(ke=[]),this._itemsAreUsed=!0,this._items=ke}get compareWith(){return this._compareWith}set compareWith(ke){if(null!=ke&&!as(ke))throw Error("`compareWith` must be a function.");this._compareWith=ke}get clearSearchOnAdd(){return us(this._clearSearchOnAdd)?this._clearSearchOnAdd:us(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(ke){this._clearSearchOnAdd=ke}get deselectOnClick(){return us(this._deselectOnClick)?this._deselectOnClick:us(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(ke){this._deselectOnClick=ke}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(ke,yt,Wt,We,Jt,ge,l){this.classes=ke,this.autoFocus=yt,this.config=Wt,this._cd=ge,this._console=l,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=u=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new D._w7,this.focusEvent=new D._w7,this.changeEvent=new D._w7,this.openEvent=new D._w7,this.closeEvent=new D._w7,this.searchEvent=new D._w7,this.clearEvent=new D._w7,this.addEvent=new D._w7,this.removeEvent=new D._w7,this.scroll=new D._w7,this.scrollToEnd=new D._w7,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=Mt(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new Pi.E,this._keyPress$=new Pi.E,this._onChange=u=>{},this._onTouched=()=>{},this.clearItem=u=>{const p=this.selectedItems.find(y=>y.value===u);this.unselect(p)},this.trackByOption=(u,p)=>this.trackByFn?this.trackByFn(p.value):p,this._mergeGlobalConfig(Wt),this.itemsList=new Rn(this,We()),this.element=Jt.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(ke=>ke.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(ke){ke.multiple&&this.itemsList.clearSelected(),ke.items&&this._setItems(ke.items.currentValue||[]),ke.isOpen&&(this._manualOpen=us(ke.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),us(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(ke){if(Hi[ke.which]){if(!1===this.keyDownFn(ke))return;this.handleKeyCode(ke)}else ke.key&&1===ke.key.length&&this._keyPress$.next(ke.key.toLocaleLowerCase())}handleKeyCode(ke){this.clearButton&&this.clearButton.nativeElement===ke.target?this.handleKeyCodeClear(ke):this.handleKeyCodeInput(ke)}handleKeyCodeInput(ke){switch(ke.which){case Hi.ArrowDown:this._handleArrowDown(ke);break;case Hi.ArrowUp:this._handleArrowUp(ke);break;case Hi.Space:this._handleSpace(ke);break;case Hi.Enter:this._handleEnter(ke);break;case Hi.Tab:this._handleTab(ke);break;case Hi.Esc:this.close(),ke.preventDefault();break;case Hi.Backspace:this._handleBackspace()}}handleKeyCodeClear(ke){ke.which===Hi.Enter&&(this.handleClearClick(),ke.preventDefault())}handleMousedown(ke){const yt=ke.target;"INPUT"!==yt.tagName&&ke.preventDefault(),yt.classList.contains("ng-clear-wrapper")?this.handleClearClick():yt.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():yt.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(ke){this.itemsList.clearSelected(),this._handleWriteValue(ke),this._cd.markForCheck()}registerOnChange(ke){this._onChange=ke}registerOnTouched(ke){this._onTouched=ke}setDisabledState(ke){this._disabled=ke,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(ke){!ke||ke.disabled||this.disabled||(this.deselectOnClick&&ke.selected?this.unselect(ke):this.select(ke),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(ke){ke.selected||(this.itemsList.select(ke),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(ke.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(ke){ke&&(this.itemsList.unselect(ke),this.focus(),this._updateNgModel(),this.removeEvent.emit(ke.value))}selectTag(){let ke;ke=as(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const yt=Wt=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(Wt,null):this.itemsList.addItem(Wt);!function io(bt){return bt instanceof Promise}(ke)?ke&&this.select(yt(ke)):ke.then(Wt=>this.select(yt(Wt))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;const ke=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(yt=>yt.label.toLowerCase()===ke)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(yt=>yt.label.toLowerCase()===ke))&&!this.loading}showNoItemsFound(){const ke=0===this.itemsList.filteredItems.length;return(ke&&!this._isTypeahead&&!this.loading||ke&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(ke){this._isComposing=!1,!this.searchWhileComposing&&this.filter(ke)}filter(ke){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=ke,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(ke),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:ke,items:this.itemsList.filteredItems.map(yt=>yt.value)}),this.open())}onInputFocus(ke){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(ke),this.focused=!0)}onInputBlur(ke){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(ke),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(ke){ke.disabled||this.itemsList.markItem(ke)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const ke=this.selectedItems&&this.selectedItems[0];this.searchTerm=ke&&ke.label||null}_setItems(ke){const yt=ke[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=us(yt)?!Ks(yt):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(ke),ke.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&us(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const ke=Wt=>{this.items=Wt.map(We=>({$ngOptionValue:We.value,$ngOptionLabel:We.elementRef.nativeElement.innerHTML,disabled:We.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},yt=()=>{const Wt=(0,Ci.U)(this.ngOptions.changes,this._destroy$);(0,Ci.U)(...this.ngOptions.map(We=>We.stateChange$)).pipe((0,Ze.a)(Wt)).subscribe(We=>{const Jt=this.itemsList.findItem(We.value);Jt.disabled=We.disabled,Jt.label=We.label||Jt.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe((0,nt.W)(this.ngOptions),(0,Ze.a)(this._destroy$)).subscribe(Wt=>{this.bindLabel=this._defaultLabel,ke(Wt),yt()})}_isValidWriteValue(ke){if(!us(ke)||this.multiple&&""===ke||Array.isArray(ke)&&0===ke.length)return!1;const yt=Wt=>!(!us(this.compareWith)&&Ks(Wt)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(Wt)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(ke)?ke.every(Wt=>yt(Wt)):(this._console.warn("Multiple select ngModel should be array."),!1):yt(ke)}_handleWriteValue(ke){if(!this._isValidWriteValue(ke))return;const yt=Wt=>{let We=this.itemsList.findItem(Wt);if(We)this.itemsList.select(We);else{const Jt=Ks(Wt);Jt||!Jt&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(Wt,null)):this.bindValue&&(We={[this.bindLabel]:null,[this.bindValue]:Wt},this.itemsList.select(this.itemsList.mapItem(We,null)))}};this.multiple?ke.forEach(Wt=>yt(Wt)):yt(ke)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe((0,Ze.a)(this._destroy$),(0,_t.y)(ke=>this._pressedKeys.push(ke)),(0,gt.o)(200),(0,Xt.I)(()=>this._pressedKeys.length>0),(0,Et.k)(()=>this._pressedKeys.join(""))).subscribe(ke=>{const yt=this.itemsList.findByLabel(ke);yt&&(this.isOpen?(this.itemsList.markItem(yt),this._scrollToMarked(),this._cd.markForCheck()):this.select(yt)),this._pressedKeys=[]})}_setInputAttributes(){const ke=this.searchInput.nativeElement,yt={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const Wt of Object.keys(yt))ke.setAttribute(Wt,yt[Wt])}_updateNgModel(){const ke=[];for(const Wt of this.selectedItems)if(this.bindValue){let We=null;We=Wt.children?Wt.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(Wt.value,this.bindValue),ke.push(We)}else ke.push(Wt.value);const yt=this.selectedItems.map(Wt=>Wt.value);this.multiple?(this._onChange(ke),this.changeEvent.emit(yt)):(this._onChange(us(ke[0])?ke[0]:null),this.changeEvent.emit(yt[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(ke){this.searchTerm=ke,this._isTypeahead&&this.typeahead.next(ke)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(ke){if(!1===this.isOpen)if(this.showClear())this.focusOnClear(),ke.preventDefault();else if(!this.addTag)return;this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),ke.preventDefault()):this.showAddTag?(this.selectTag(),ke.preventDefault()):this.close():this.close()}_handleEnter(ke){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}ke.preventDefault()}_handleSpace(ke){this.isOpen||this._manualOpen||(this.open(),ke.preventDefault())}_handleArrowDown(ke){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),ke.preventDefault()}_handleArrowUp(ke){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),ke.preventDefault())}_nextItemIsTag(ke){const yt=this.itemsList.markedIndex+ke;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(yt<0||yt===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const ke=this.searchTerm&&this.searchTerm.trim();return ke&&ke.length>=this.minTermLength}_mergeGlobalConfig(ke){this.placeholder=this.placeholder||ke.placeholder,this.notFoundText=this.notFoundText||ke.notFoundText,this.typeToSearchText=this.typeToSearchText||ke.typeToSearchText,this.addTagText=this.addTagText||ke.addTagText,this.loadingText=this.loadingText||ke.loadingText,this.clearAllText=this.clearAllText||ke.clearAllText,this.virtualScroll=us(this.virtualScroll)?this.virtualScroll:!!us(ke.disableVirtualScroll)&&!ke.disableVirtualScroll,this.openOnEnter=us(this.openOnEnter)?this.openOnEnter:ke.openOnEnter,this.appendTo=this.appendTo||ke.appendTo,this.bindValue=this.bindValue||ke.bindValue,this.bindLabel=this.bindLabel||ke.bindLabel,this.appearance=this.appearance||ke.appearance}static#e=this.\u0275fac=function(yt){return new(yt||bt)(D.gJ8("class"),D.gJ8("autofocus"),D.GI1(Xe),D.GI1(Rt),D.GI1(D.GMv),D.GI1(D.kD9),D.GI1(Qe))};static#t=this.\u0275cmp=D.In1({type:bt,selectors:[["ng-select"]],contentQueries:function(yt,Wt,We){if(1&yt&&(D.szK(We,Ss,5,D.Yw2),D.szK(We,Bs,5,D.Yw2),D.szK(We,xa,5,D.Yw2),D.szK(We,Gt,5,D.Yw2),D.szK(We,Ue,5,D.Yw2),D.szK(We,Je,5,D.Yw2),D.szK(We,At,5,D.Yw2),D.szK(We,St,5,D.Yw2),D.szK(We,si,5,D.Yw2),D.szK(We,wi,5,D.Yw2),D.szK(We,ki,5,D.Yw2),D.szK(We,ot,5)),2&yt){let Jt;D.wto(Jt=D.Gqi())&&(Wt.optionTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.optgroupTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.labelTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.multiLabelTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.headerTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.footerTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.notFoundTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.typeToSearchTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.loadingTextTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.tagTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.loadingSpinnerTemplate=Jt.first),D.wto(Jt=D.Gqi())&&(Wt.ngOptions=Jt)}},viewQuery:function(yt,Wt){if(1&yt&&(D.CC$(dt,5),D.CC$(Xi,7),D.CC$(Tn,5)),2&yt){let We;D.wto(We=D.Gqi())&&(Wt.dropdownPanel=We.first),D.wto(We=D.Gqi())&&(Wt.searchInput=We.first),D.wto(We=D.Gqi())&&(Wt.clearButton=We.first)}},hostVars:20,hostBindings:function(yt,Wt){1&yt&&D.qCj("keydown",function(Jt){return Wt.handleKeyDown(Jt)}),2&yt&&D.eAK("ng-select-typeahead",Wt.typeahead)("ng-select-multiple",Wt.multiple)("ng-select-taggable",Wt.addTag)("ng-select-searchable",Wt.searchable)("ng-select-clearable",Wt.clearable)("ng-select-opened",Wt.isOpen)("ng-select",Wt.useDefaultClass)("ng-select-disabled",Wt.disabled)("ng-select-filtered",Wt.filtered)("ng-select-single",Wt.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[D.M5G([{provide:mt.Y6,useExisting:(0,D.wd)(()=>bt),multi:!0},ar]),D.SYr],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper","tabindex","0",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],["clearButton",""],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(yt,Wt){if(1&yt){const We=D.KQA();D.I0R(0,"div",0),D.qCj("mousedown",function(ge){return Wt.handleMousedown(ge)}),D.I0R(1,"div",1)(2,"div",2),D.OEk(3),D.C$Y(),D.yuY(4,mr,2,2,"ng-container",3)(5,Si,1,5,null,3),D.I0R(6,"div",4)(7,"input",5,6),D.qCj("input",function(){D.usT(We);const ge=D.Gew(8);return D.CGJ(Wt.filter(ge.value))})("compositionstart",function(){return Wt.onCompositionStart()})("compositionend",function(){D.usT(We);const ge=D.Gew(8);return D.CGJ(Wt.onCompositionEnd(ge.value))})("focus",function(ge){return Wt.onInputFocus(ge)})("blur",function(ge){return Wt.onInputBlur(ge)})("change",function(ge){return ge.stopPropagation()}),D.C$Y()()(),D.yuY(9,ts,4,1,"ng-container",3)(10,Xr,4,1,"span",7),D.I0R(11,"span",8),D.wR5(12,"span",9),D.C$Y()(),D.yuY(13,Vs,7,19,"ng-dropdown-panel",10)}2&yt&&(D.eAK("ng-appearance-outline","outline"===Wt.appearance)("ng-has-value",Wt.hasValue),D.yG2(3),D.cNF(Wt.placeholder),D.yG2(),D.E7m("ngIf",(!Wt.multiLabelTemplate||!Wt.multiple)&&Wt.selectedItems.length>0),D.yG2(),D.E7m("ngIf",Wt.multiple&&Wt.multiLabelTemplate&&Wt.selectedValues.length>0),D.yG2(),D.e48("aria-expanded",Wt.isOpen)("aria-owns",Wt.isOpen?Wt.dropdownId:null),D.yG2(),D.E7m("readOnly",!Wt.searchable||Wt.itemsList.maxItemsSelected)("disabled",Wt.disabled)("value",Wt.searchTerm?Wt.searchTerm:""),D.e48("id",Wt.labelForId)("tabindex",Wt.tabIndex)("aria-activedescendant",Wt.isOpen?null==Wt.itemsList||null==Wt.itemsList.markedItem?null:Wt.itemsList.markedItem.htmlId:null)("aria-controls",Wt.isOpen?Wt.dropdownId:null),D.yG2(2),D.E7m("ngIf",Wt.loading),D.yG2(),D.E7m("ngIf",Wt.showClear()),D.yG2(3),D.E7m("ngIf",Wt.isOpen))},dependencies:[Mi.QF,Mi.ay,Mi.u_,Mi.XV,dt,Rs],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0})}return bt})();function en(){return new ji}class ji{constructor(){this._selected=[]}get value(){return this._selected}select(Ft,ke,yt){if(Ft.selected=!0,(!Ft.children||!ke&&yt)&&this._selected.push(Ft),ke)if(Ft.parent){const Wt=Ft.parent.children.length,We=Ft.parent.children.filter(Jt=>Jt.selected).length;Ft.parent.selected=Wt===We}else Ft.children&&(this._setChildrenSelectedState(Ft.children,!0),this._removeChildren(Ft),this._selected=yt&&this._activeChildren(Ft)?[...this._selected.filter(Wt=>Wt.parent!==Ft),Ft]:[...this._selected,...Ft.children.filter(Wt=>!Wt.disabled)])}unselect(Ft,ke){if(this._selected=this._selected.filter(yt=>yt!==Ft),Ft.selected=!1,ke)if(Ft.parent&&Ft.parent.selected){const yt=Ft.parent.children;this._removeParent(Ft.parent),this._removeChildren(Ft.parent),this._selected.push(...yt.filter(Wt=>Wt!==Ft&&!Wt.disabled)),Ft.parent.selected=!1}else Ft.children&&(this._setChildrenSelectedState(Ft.children,!1),this._removeChildren(Ft))}clear(Ft){this._selected=Ft?this._selected.filter(ke=>ke.disabled):[]}_setChildrenSelectedState(Ft,ke){for(const yt of Ft)yt.disabled||(yt.selected=ke)}_removeChildren(Ft){this._selected=[...this._selected.filter(ke=>ke.parent!==Ft),...Ft.children.filter(ke=>ke.parent===Ft&&ke.disabled&&ke.selected)]}_removeParent(Ft){this._selected=this._selected.filter(ke=>ke!==Ft)}_activeChildren(Ft){return Ft.children.every(ke=>!ke.disabled||ke.selected)}}let bn=(()=>{class bt{static#e=this.\u0275fac=function(yt){return new(yt||bt)};static#t=this.\u0275mod=D.a4G({type:bt});static#i=this.\u0275inj=D.s3X({providers:[{provide:Rt,useValue:en}],imports:[Mi.MD]})}return bt})()},2728:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{C:()=>_t,Wz:()=>it,gD:()=>nt});var D=Qt(4496),mt=Qt(1368),Ze=Qt(4984);const n=["*"],j=gt=>({"text-muted":gt});function He(gt,Xt){if(1&gt&&(D.I0R(0,"button",7),D.OEk(1),D.C$Y()),2&gt){const Et=D.GaO();D.E7m("ngClass",D.S45(2,j,Et.isDisabled)),D.yG2(),D.oRS(" ",Et.heading," ")}}const Be=[[["","accordion-heading",""]],"*"],Re=["[accordion-heading]","*"];let $e=(()=>{class gt{constructor(){this.closeOthers=!1,this.isAnimated=!1}static#e=this.\u0275fac=function(Tt){return new(Tt||gt)};static#t=this.\u0275prov=D.wxM({token:gt,factory:gt.\u0275fac,providedIn:"root"})}return gt})(),it=(()=>{class gt{constructor(Et){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,Et)}closeOtherPanels(Et){this.closeOthers&&this.groups.forEach(Tt=>{Tt!==Et&&(Tt.isOpen=!1)})}addGroup(Et){Et.isAnimated=this.isAnimated,this.groups.push(Et)}removeGroup(Et){const Tt=this.groups.indexOf(Et);-1!==Tt&&this.groups.splice(Tt,1)}static#e=this.\u0275fac=function(Tt){return new(Tt||gt)(D.GI1($e))};static#t=this.\u0275cmp=D.In1({type:gt,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(Tt,Nt){2&Tt&&D.e48("aria-multiselectable",Nt.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:n,decls:1,vars:0,template:function(Tt,Nt){1&Tt&&(D.kPM(),D._Xx(0))},encapsulation:2})}return gt})(),nt=(()=>{class gt{get isOpen(){return this._isOpen}set isOpen(Et){Et!==this.isOpen&&(Et&&this.accordion.closeOtherPanels(this),this._isOpen=Et,Promise.resolve(null).then(()=>{this.isOpenChange.emit(Et)}))}constructor(Et){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new D._w7,this._isOpen=!1,this.accordion=Et}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static#e=this.\u0275fac=function(Tt){return new(Tt||gt)(D.GI1(it))};static#t=this.\u0275cmp=D.In1({type:gt,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(Tt,Nt){2&Tt&&D.eAK("panel-open",Nt.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:Re,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"ngClass","click"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(Tt,Nt){1&Tt&&(D.kPM(Be),D.I0R(0,"div",0)(1,"div",1),D.qCj("click",function(){return Nt.toggleOpen()}),D.I0R(2,"div",2)(3,"div",3),D.yuY(4,He,2,4,"button",4),D._Xx(5),D.C$Y()()(),D.I0R(6,"div",5)(7,"div",6),D._Xx(8,1),D.C$Y()()()),2&Tt&&(D.E7m("ngClass",Nt.panelClass),D.yG2(),D.E7m("ngClass",Nt.isDisabled?"panel-disabled":"panel-enabled"),D.yG2(2),D.e48("aria-expanded",Nt.isOpen),D.yG2(),D.E7m("ngIf",Nt.heading),D.yG2(2),D.E7m("collapse",!Nt.isOpen)("isAnimated",Nt.isAnimated))},dependencies:[mt.QF,mt.u_,Ze.m],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}return gt})(),_t=(()=>{class gt{static forRoot(){return{ngModule:gt,providers:[]}}static#e=this.\u0275fac=function(Tt){return new(Tt||gt)};static#t=this.\u0275mod=D.a4G({type:gt});static#i=this.\u0275inj=D.s3X({imports:[mt.MD,Ze.a]})}return gt})()},3304:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{em:()=>Ig,U5:()=>Km,SO:()=>Ef});var D=Qt(4496),mt=Qt(6684),Ze=Qt(4704),n=Qt(3992),j=Qt(3616),He=Qt(4e3);function Re(b){return b<0?Math.ceil(b)||0:Math.floor(b)}function $e(b){return"string"==typeof b}function it(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b)}function _t(b){return b&&b.getTime&&!isNaN(b.getTime())}function gt(b){return b instanceof Function||"[object Function]"===Object.prototype.toString.call(b)}function Xt(b){return"number"==typeof b||"[object Number]"===Object.prototype.toString.call(b)}function Et(b){return b instanceof Array||"[object Array]"===Object.prototype.toString.call(b)}function Tt(b,N){return Object.prototype.hasOwnProperty.call(b,N)}function Nt(b){return null!=b&&"[object Object]"===Object.prototype.toString.call(b)}function tt(b){return void 0===b}function Ci(b){const N=+b;let S=0;return 0!==N&&isFinite(N)&&(S=Re(N)),S}const Mi={},kt={date:"day",hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Oi(b,N){const S=b.toLowerCase();let X=b;S in kt&&(X=kt[S]),Mi[S]=Mi[`${S}s`]=Mi[N]=X}function vi(b){return $e(b)?Mi[b]||Mi[b.toLowerCase()]:void 0}const Dt=0,yi=1,Ri=2,Xi=3,Tn=4,qi=5,nn=6,_n=7,Fn=8;function mr(b,N,S){const X=`${Math.abs(b)}`;return(b>=0?S?"+":"":"-")+Math.pow(10,Math.max(0,N-X.length)).toString().substr(1)+X}const hr={},Nr={},Si=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;function kn(b,N,S,X){b&&(Nr[b]=X),N&&(Nr[N[0]]=function(){return mr(X.apply(null,arguments),N[1],N[2])}),S&&(Nr[S]=function(te,Me){return Me.locale.ordinal(X.apply(null,arguments),b)})}function ts(b){return b.match(/\[[\s\S]/)?b.replace(/^\[|\]$/g,""):b.replace(/\\/g,"")}function Xr(b,N,S){const X=new Date(Date.UTC.apply(null,arguments));return b<100&&b>=0&&isFinite(X.getUTCFullYear())&&X.setUTCFullYear(b),X}function Fr(b,N=0,S=1,X=0,te=0,Me=0,Lt=0){const sn=new Date(b,N,S,X,te,Me,Lt);return b<100&&b>=0&&isFinite(sn.getFullYear())&&sn.setFullYear(b),sn}function En(b,N=!1){return N?b.getUTCHours():b.getHours()}function Os(b,N=!1){return N?b.getUTCMinutes():b.getMinutes()}function Cs(b,N=!1){return N?b.getUTCSeconds():b.getSeconds()}function Ts(b,N=!1){return N?b.getUTCMilliseconds():b.getMilliseconds()}function Un(b,N=!1){return N?b.getUTCDay():b.getDay()}function cr(b,N=!1){return N?b.getUTCDate():b.getDate()}function zn(b,N=!1){return N?b.getUTCMonth():b.getMonth()}function On(b,N=!1){return N?b.getUTCFullYear():b.getFullYear()}function Vs(b,N){return!(!b||!N)&&Fs(b,N)&&zn(b)===zn(N)}function Fs(b,N){return!(!b||!N)&&On(b)===On(N)}function Ds(b,N){return!(!b||!N)&&Fs(b,N)&&Vs(b,N)&&cr(b)===cr(N)}const Es=/\d/,wr=/\d\d/,us=/\d{3}/,Ks=/\d{4}/,io=/[+-]?\d{6}/,as=/\d\d?/,Rs=/\d\d\d\d?/,Ss=/\d\d\d\d\d\d?/,Bs=/\d{1,3}/,xa=/\d{1,4}/,Gt=/[+-]?\d{1,6}/,Ue=/\d+/,Je=/[+-]?\d+/,St=/Z|[+-]\d\d(?::?\d\d)?/gi,si=/[+-]?\d+(\.\d{1,3})?/,wi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ki={};function Mt(b,N,S){ki[b]=gt(N)?N:function(X,te){return X&&S?S:N}}function zi(b,N){return Tt(ki,b)?ki[b](!1,N):new RegExp(function Sn(b){return Rn(b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(N,S,X,te,Me)=>S||X||te||Me))}(b))}function Rn(b){return b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const Hi={};function ar(b,N){const S=$e(b)?[b]:b;let X=N;if(Xt(N)&&(X=function(te,Me,Lt){return Me[N]=Ci(te),Lt}),Et(S)&&gt(X)){let te;for(te=0;te<S.length;te++)Hi[S[te]]=X}}function Ht(b,N){ar(b,function(S,X,te,Me){return te._w=te._w||{},N(S,te._w,te,Me)})}function Vt(b,N,S){return null!=N&&Tt(Hi,b)&&Hi[b](N,S._a,S,b),S}const dt={};function ot(b,N){dt[b]=N}function Rt(b){return null==b._pf&&(b._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),b._pf}function ui(b,N){return N.locale.getFullYear?N.locale.getFullYear(b,N.isUTC).toString():On(b,N.isUTC).toString()}function ji(b){return Ci(b)+(Ci(b)>68?1900:2e3)}function bn(b){return bt(b)?366:365}function bt(b){return b%4==0&&b%100!=0||b%400==0}function Ft(b,N){if(isNaN(b)||isNaN(N))return NaN;const S=function Be(b,N){return(b%N+N)%N}(N,12);return 1===S?bt(b+(N-S)/12)?29:28:31-S%7%2}const yt={year:0,month:0,day:0,hour:0,minute:0,seconds:0};function Wt(b,N){const S=Object.assign({},yt,N),X=b.getFullYear()+(S.year||0),te=b.getMonth()+(S.month||0);let Me=b.getDate()+(S.day||0);return S.month&&!S.day&&(Me=Math.min(Me,Ft(X,te))),Fr(X,te,Me,b.getHours()+(S.hour||0),b.getMinutes()+(S.minute||0),b.getSeconds()+(S.seconds||0))}function Jt(b,N){return Xt(N)?N:b}function l(b,N,S){const X=Math.min(cr(b),Ft(On(b),N));return S?b.setUTCMonth(N,X):b.setMonth(N,X),b}function M(b,N,S){return S?b.setUTCDate(N):b.setDate(N),b}function H(b){return new Date(b.getTime())}function K(b,N,S){const X=H(b);switch(N){case"year":l(X,0,S);case"quarter":case"month":M(X,1,S);case"week":case"isoWeek":case"day":case"date":!function p(b,N,S){S?b.setUTCHours(N):b.setHours(N)}(X,0,S);case"hours":!function y(b,N,S){S?b.setUTCMinutes(N):b.setMinutes(N)}(X,0,S);case"minutes":!function w(b,N,S){S?b.setUTCSeconds(N):b.setSeconds(N)}(X,0,S);case"seconds":!function C(b,N,S){S?b.setUTCMilliseconds(N):b.setMilliseconds(N)}(X,0,S)}return"week"===N&&function v(b,N,S={}){Nl(b,N-lr(b,S.locale,S.isUTC),"day")}(X,0,{isUTC:S}),"isoWeek"===N&&function Z(b,N,S={}){const X=function au(b,N=Xa()){return $e(b)?N.weekdaysParse(b)%7||7:Xt(b)&&isNaN(b)?null:b}(N,S.locale);ou(b,function lo(b,N){return Un(b,N)}(b)%7?X:X-7)}(X,1),"quarter"===N&&l(X,3*Math.floor(zn(X,S)/3),S),X}function J(b,N,S){let X=N;return"date"===X&&(X="day"),function Ku(b,N,S,X){return Au(b,Qo(N,S),-1,X)}(Nl(K(b,X,S),1,"isoWeek"===X?"week":X,S),1,"milliseconds",S)}function de(b,N){const S=+K(b,"day",N),X=+K(b,"year",N);return Math.round((S-X)/864e5)+1}function Se(b,N,S){const X=N-S+7;return-(Xr(b,0,X).getUTCDay()-N+7)%7+X-1}function Te(b,N,S,X){const te=Se(On(b,X),N,S),Me=Math.floor((de(b,X)-te-1)/7)+1;let Lt,sn;return Me<1?(sn=On(b,X)-1,Lt=Me+Ne(sn,N,S)):Me>Ne(On(b,X),N,S)?(Lt=Me-Ne(On(b,X),N,S),sn=On(b,X)+1):(sn=On(b,X),Lt=Me),{week:Lt,year:sn}}function Ne(b,N,S){const X=Se(b,N,S),te=Se(b+1,N,S);return(bn(b)-X+te)/7}const U=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),we="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Le="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),je="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),jt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Qi=wi,cn=wi;class Qn{constructor(N){N&&this.set(N)}set(N){let S;for(S in N){if(!N.hasOwnProperty(S))continue;const X=N[S];this[gt(X)?S:`_${S}`]=X}this._config=N}calendar(N,S,X){const te=this._calendar[N]||this._calendar.sameElse;return gt(te)?te.call(null,S,X):te}longDateFormat(N){const S=this._longDateFormat[N],X=this._longDateFormat[N.toUpperCase()];return S||!X?S:(this._longDateFormat[N]=X.replace(/MMMM|MM|DD|dddd/g,function(te){return te.slice(1)}),this._longDateFormat[N])}get invalidDate(){return this._invalidDate}set invalidDate(N){this._invalidDate=N}ordinal(N,S){return this._ordinal.replace("%d",N.toString(10))}preparse(N,S){return N}getFullYear(N,S=!1){return On(N,S)}postformat(N){return N}relativeTime(N,S,X,te){const Me=this._relativeTime[X];return gt(Me)?Me(N,S,X,te):Me.replace(/%d/i,N.toString(10))}pastFuture(N,S){const X=this._relativeTime[N>0?"future":"past"];return gt(X)?X(S):X.replace(/%s/i,S)}months(N,S,X=!1){if(!N)return Et(this._months)?this._months:this._months.standalone;if(Et(this._months))return this._months[zn(N,X)];const te=(this._months.isFormat||U).test(S)?"format":"standalone";return this._months[te][zn(N,X)]}monthsShort(N,S,X=!1){if(!N)return Et(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;if(Et(this._monthsShort))return this._monthsShort[zn(N,X)];const te=U.test(S)?"format":"standalone";return this._monthsShort[te][zn(N,X)]}monthsParse(N,S,X){let te,Me,Lt;if(this._monthsParseExact)return this.handleMonthStrictParse(N,S,X);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),Lt=0;Lt<12;Lt++){if(te=new Date(Date.UTC(2e3,Lt)),X&&!this._longMonthsParse[Lt]){const sn=this.months(te,"",!0).replace(".",""),dr=this.monthsShort(te,"",!0).replace(".","");this._longMonthsParse[Lt]=new RegExp(`^${sn}$`,"i"),this._shortMonthsParse[Lt]=new RegExp(`^${dr}$`,"i")}if(!X&&!this._monthsParse[Lt]&&(Me=`^${this.months(te,"",!0)}|^${this.monthsShort(te,"",!0)}`,this._monthsParse[Lt]=new RegExp(Me.replace(".",""),"i")),X&&"MMMM"===S&&this._longMonthsParse[Lt].test(N)||X&&"MMM"===S&&this._shortMonthsParse[Lt].test(N)||!X&&this._monthsParse[Lt].test(N))return Lt}}monthsRegex(N){return this._monthsParseExact?(Tt(this,"_monthsRegex")||this.computeMonthsParse(),N?this._monthsStrictRegex:this._monthsRegex):(Tt(this,"_monthsRegex")||(this._monthsRegex=cn),this._monthsStrictRegex&&N?this._monthsStrictRegex:this._monthsRegex)}monthsShortRegex(N){return this._monthsParseExact?(Tt(this,"_monthsRegex")||this.computeMonthsParse(),N?this._monthsShortStrictRegex:this._monthsShortRegex):(Tt(this,"_monthsShortRegex")||(this._monthsShortRegex=Qi),this._monthsShortStrictRegex&&N?this._monthsShortStrictRegex:this._monthsShortRegex)}week(N,S){return Te(N,this._week.dow,this._week.doy,S).week}firstDayOfWeek(){return this._week.dow}firstDayOfYear(){return this._week.doy}weekdays(N,S,X){if(!N)return Et(this._weekdays)?this._weekdays:this._weekdays.standalone;if(Et(this._weekdays))return this._weekdays[Un(N,X)];const te=this._weekdays.isFormat.test(S)?"format":"standalone";return this._weekdays[te][Un(N,X)]}weekdaysMin(N,S,X){return N?this._weekdaysMin[Un(N,X)]:this._weekdaysMin}weekdaysShort(N,S,X){return N?this._weekdaysShort[Un(N,X)]:this._weekdaysShort}weekdaysParse(N,S,X){let te,Me;if(this._weekdaysParseExact)return this.handleWeekStrictParse(N,S,X);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),te=0;te<7;te++){const Lt=ou(new Date(Date.UTC(2e3,1)),te,null,!0);if(X&&!this._fullWeekdaysParse[te]&&(this._fullWeekdaysParse[te]=new RegExp(`^${this.weekdays(Lt,"",!0).replace(".",".?")}$`,"i"),this._shortWeekdaysParse[te]=new RegExp(`^${this.weekdaysShort(Lt,"",!0).replace(".",".?")}$`,"i"),this._minWeekdaysParse[te]=new RegExp(`^${this.weekdaysMin(Lt,"",!0).replace(".",".?")}$`,"i")),this._weekdaysParse[te]||(Me=`^${this.weekdays(Lt,"",!0)}|^${this.weekdaysShort(Lt,"",!0)}|^${this.weekdaysMin(Lt,"",!0)}`,this._weekdaysParse[te]=new RegExp(Me.replace(".",""),"i")),!(Et(this._fullWeekdaysParse)&&Et(this._shortWeekdaysParse)&&Et(this._minWeekdaysParse)&&Et(this._weekdaysParse)))return;if(X&&"dddd"===S&&this._fullWeekdaysParse[te].test(N))return te;if(X&&"ddd"===S&&this._shortWeekdaysParse[te].test(N))return te;if(X&&"dd"===S&&this._minWeekdaysParse[te].test(N))return te;if(!X&&this._weekdaysParse[te].test(N))return te}}weekdaysRegex(N){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),N?this._weekdaysStrictRegex:this._weekdaysRegex):(Tt(this,"_weekdaysRegex")||(this._weekdaysRegex=wi),this._weekdaysStrictRegex&&N?this._weekdaysStrictRegex:this._weekdaysRegex)}weekdaysShortRegex(N){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),N?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Tt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=wi),this._weekdaysShortStrictRegex&&N?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}weekdaysMinRegex(N){return this._weekdaysParseExact?(Tt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),N?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Tt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=wi),this._weekdaysMinStrictRegex&&N?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}isPM(N){return"p"===N.toLowerCase().charAt(0)}meridiem(N,S,X){return N>11?X?"pm":"PM":X?"am":"AM"}formatLongDate(N){this._longDateFormat=this._longDateFormat?this._longDateFormat:jt;const S=this._longDateFormat[N],X=this._longDateFormat[N.toUpperCase()];return S||!X?S:(this._longDateFormat[N]=X.replace(/MMMM|MM|DD|dddd/g,te=>te.slice(1)),this._longDateFormat[N])}handleMonthStrictParse(N,S,X){const te=N.toLocaleLowerCase();let Me,Lt,sn;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Me=0;Me<12;++Me)sn=new Date(2e3,Me),this._shortMonthsParse[Me]=this.monthsShort(sn,"").toLocaleLowerCase(),this._longMonthsParse[Me]=this.months(sn,"").toLocaleLowerCase();return X?"MMM"===S?(Lt=this._shortMonthsParse.indexOf(te),-1!==Lt?Lt:null):(Lt=this._longMonthsParse.indexOf(te),-1!==Lt?Lt:null):"MMM"===S?(Lt=this._shortMonthsParse.indexOf(te),-1!==Lt?Lt:(Lt=this._longMonthsParse.indexOf(te),-1!==Lt?Lt:null)):(Lt=this._longMonthsParse.indexOf(te),-1!==Lt?Lt:(Lt=this._shortMonthsParse.indexOf(te),-1!==Lt?Lt:null))}handleWeekStrictParse(N,S,X){let te;const Me=N.toLocaleLowerCase();if(!this._weekdaysParse){let Lt;for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Lt=0;Lt<7;++Lt){const sn=ou(new Date(Date.UTC(2e3,1)),Lt,null,!0);this._minWeekdaysParse[Lt]=this.weekdaysMin(sn).toLocaleLowerCase(),this._shortWeekdaysParse[Lt]=this.weekdaysShort(sn).toLocaleLowerCase(),this._weekdaysParse[Lt]=this.weekdays(sn,"").toLocaleLowerCase()}}if(Et(this._weekdaysParse)&&Et(this._shortWeekdaysParse)&&Et(this._minWeekdaysParse))return X?"dddd"===S?(te=this._weekdaysParse.indexOf(Me),-1!==te?te:null):"ddd"===S?(te=this._shortWeekdaysParse.indexOf(Me),-1!==te?te:null):(te=this._minWeekdaysParse.indexOf(Me),-1!==te?te:null):"dddd"===S?(te=this._weekdaysParse.indexOf(Me),-1!==te||(te=this._shortWeekdaysParse.indexOf(Me),-1!==te)?te:(te=this._minWeekdaysParse.indexOf(Me),-1!==te?te:null)):"ddd"===S?(te=this._shortWeekdaysParse.indexOf(Me),-1!==te||(te=this._weekdaysParse.indexOf(Me),-1!==te)?te:(te=this._minWeekdaysParse.indexOf(Me),-1!==te?te:null)):(te=this._minWeekdaysParse.indexOf(Me),-1!==te||(te=this._weekdaysParse.indexOf(Me),-1!==te)?te:(te=this._shortWeekdaysParse.indexOf(Me),-1!==te?te:null))}computeMonthsParse(){const N=[],S=[],X=[];let te,Me;for(Me=0;Me<12;Me++)te=new Date(2e3,Me),N.push(this.monthsShort(te,"")),S.push(this.months(te,"")),X.push(this.months(te,"")),X.push(this.monthsShort(te,""));for(N.sort(gr),S.sort(gr),X.sort(gr),Me=0;Me<12;Me++)N[Me]=Rn(N[Me]),S[Me]=Rn(S[Me]);for(Me=0;Me<24;Me++)X[Me]=Rn(X[Me]);this._monthsRegex=new RegExp(`^(${X.join("|")})`,"i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(`^(${S.join("|")})`,"i"),this._monthsShortStrictRegex=new RegExp(`^(${N.join("|")})`,"i")}computeWeekdaysParse(){const N=[],S=[],X=[],te=[];let Me;for(Me=0;Me<7;Me++){const Lt=ou(new Date(Date.UTC(2e3,1)),Me,null,!0),sn=this.weekdaysMin(Lt),dr=this.weekdaysShort(Lt),Oa=this.weekdays(Lt);N.push(sn),S.push(dr),X.push(Oa),te.push(sn),te.push(dr),te.push(Oa)}for(N.sort(gr),S.sort(gr),X.sort(gr),te.sort(gr),Me=0;Me<7;Me++)S[Me]=Rn(S[Me]),X[Me]=Rn(X[Me]),te[Me]=Rn(te[Me]);this._weekdaysRegex=new RegExp(`^(${te.join("|")})`,"i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(`^(${X.join("|")})`,"i"),this._weekdaysShortStrictRegex=new RegExp(`^(${S.join("|")})`,"i"),this._weekdaysMinStrictRegex=new RegExp(`^(${N.join("|")})`,"i")}}function gr(b,N){return N.length-b.length}const oa={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:jt,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:le,monthsShort:we,week:{dow:0,doy:6},weekdays:Le,weekdaysMin:lt,weekdaysShort:je,meridiemParse:/[ap]\.?m?\.?/i};function Ea(b,N,S){const X=Math.min(b.length,N.length),te=Math.abs(b.length-N.length);let Lt,Me=0;for(Lt=0;Lt<X;Lt++)(S&&b[Lt]!==N[Lt]||!S&&Ci(b[Lt])!==Ci(N[Lt]))&&Me++;return Me+te}function Bc(b,N){kn(null,[b,b.length,!1],null,N)}function za(b,N){return Xl(b,N.locale).toString()}function fc(b){return vl(b).toString()}function Xl(b,N=Xa(),S){return Te(b,N.firstDayOfWeek(),N.firstDayOfYear(),S).year}function vl(b,N){return Te(b,1,4,N).year}function _l(b,N){kn(b,null,null,function(S,X){let te=function pc(b,N={}){return N._isUTC?N._offset||0:function Fh(b){return 15*-Math.round(b.getTimezoneOffset()/15)}(b)}(S,{_isUTC:X.isUTC,_offset:X.offset}),Me="+";return te<0&&(te=-te,Me="-"),Me+mr(~~(te/60),2)+N+mr(~~te%60,2)})}const $u=/([\+\-]|\d\d)/gi;const pr={},al={};let ol;function va(b){return b&&b.toLowerCase().replace("_","-")}function ph(b){return pr[b]||console.error(`Khronos locale error: please load locale "${b}" before using it`),pr[b]}function Kl(b,N){let S;return b&&(tt(N)?S=Xa(b):$e(b)&&(S=tu(b,N)),S&&(ol=S)),ol&&ol._abbr}function tu(b,N){if(null===N)return delete pr[b],ol=Xa("en"),null;if(!N)return;let S=oa;if(N.abbr=b,null!=N.parentLocale){if(null==pr[N.parentLocale])return al[N.parentLocale]||(al[N.parentLocale]=[]),al[N.parentLocale].push({name:b,config:N}),null;S=pr[N.parentLocale]._config}return pr[b]=new Qn(function ql(b,N){const S=Object.assign({},b);for(const X in N)Tt(N,X)&&(Nt(b[X])&&Nt(N[X])?(S[X]={},Object.assign(S[X],b[X]),Object.assign(S[X],N[X])):null!=N[X]?S[X]=N[X]:delete S[X]);for(const X in b)Tt(b,X)&&!Tt(N,X)&&Nt(b[X])&&(S[X]=Object.assign({},S[X]));return S}(S,N)),al[b]&&al[b].forEach(function(X){tu(X.name,X.config)}),Kl(b),pr[b]}function Xa(b){return function gc(){pr.en||(Kl("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal(b){const N=b%10;return b+(1===Ci(b%100/10)?"th":1===N?"st":2===N?"nd":3===N?"rd":"th")}}),function Ws(){kn("w",["ww",2,!1],"wo",function(b,N){return function ka(b,N=Xa(),S){return N.week(b,S)}(b,N.locale).toString(10)}),kn("W",["WW",2,!1],"Wo",function(b){return function Ta(b,N){return Te(b,1,4,N).week}(b).toString(10)}),Oi("week","w"),Oi("isoWeek","W"),ot("week",5),ot("isoWeek",5),Mt("w",as),Mt("ww",as,wr),Mt("W",as),Mt("WW",as,wr),Ht(["w","ww","W","WW"],function(b,N,S,X){return N[X.substr(0,1)]=Ci(b),S})}(),function dh(){kn(null,["gg",2,!1],null,function(b,N){return(Xl(b,N.locale)%100).toString()}),kn(null,["GG",2,!1],null,function(b){return(vl(b)%100).toString()}),Bc("gggg",za),Bc("ggggg",za),Bc("GGGG",fc),Bc("GGGGG",fc),Oi("weekYear","gg"),Oi("isoWeekYear","GG"),ot("weekYear",1),ot("isoWeekYear",1),Mt("G",Je),Mt("g",Je),Mt("GG",as,wr),Mt("gg",as,wr),Mt("GGGG",xa,Ks),Mt("gggg",xa,Ks),Mt("GGGGG",Gt,io),Mt("ggggg",Gt,io),Ht(["gggg","ggggg","GGGG","GGGGG"],function(b,N,S,X){return N[X.substr(0,2)]=Ci(b),S}),Ht(["gg","GG"],function(b,N,S,X){return N[X]=ji(b),S})}(),function en(){kn("Y",null,null,function(b,N){const S=On(b,N.isUTC);return S<=9999?S.toString(10):`+${S}`}),kn(null,["YY",2,!1],null,function(b,N){return(On(b,N.isUTC)%100).toString(10)}),kn(null,["YYYY",4,!1],null,ui),kn(null,["YYYYY",5,!1],null,ui),kn(null,["YYYYYY",6,!0],null,ui),Oi("year","y"),ot("year",1),Mt("Y",Je),Mt("YY",as,wr),Mt("YYYY",xa,Ks),Mt("YYYYY",Gt,io),Mt("YYYYYY",Gt,io),ar(["YYYYY","YYYYYY"],Dt),ar("YYYY",function(b,N,S){return N[Dt]=2===b.length?ji(b):Ci(b),S}),ar("YY",function(b,N,S){return N[Dt]=ji(b),S}),ar("Y",function(b,N,S){return N[Dt]=parseInt(b,10),S})}(),function hf(){kn("z",null,null,function(b,N){return N.isUTC?"UTC":""}),kn("zz",null,null,function(b,N){return N.isUTC?"Coordinated Universal Time":""})}(),function Ys(){kn("X",null,null,function(b){return function jn(b){return Math.floor(b.valueOf()/1e3)}(b).toString(10)}),kn("x",null,null,function(b){return b.valueOf().toString(10)}),Mt("x",Je),Mt("X",si),ar("X",function(b,N,S){return S._d=new Date(1e3*parseFloat(b)),S}),ar("x",function(b,N,S){return S._d=new Date(Ci(b)),S})}(),function xd(){kn("s",["ss",2,!1],null,function(b,N){return Cs(b,N.isUTC).toString(10)}),Oi("second","s"),ot("second",15),Mt("s",as),Mt("ss",as,wr),ar(["s","ss"],qi)}(),function Ko(){kn("Q",null,"Qo",function(b,N){return function wa(b,N=!1){return Math.ceil((zn(b,N)+1)/3)}(b,N.isUTC).toString(10)}),Oi("quarter","Q"),ot("quarter",7),Mt("Q",Es),ar("Q",function(b,N,S){return N[yi]=3*(Ci(b)-1),S})}(),function Wu(){_l("Z",":"),_l("ZZ",""),Mt("Z",St),Mt("ZZ",St),ar(["Z","ZZ"],function(b,N,S){return S._useUTC=!0,S._tzm=function No(b,N){const S=(N||"").match(b);if(null===S)return null;const te=S[S.length-1].match($u)||["-","0","0"],Me=60*parseInt(te[1],10)+Ci(te[2]);return 0===Me?0:"+"===te[0]?Me:-Me}(St,b),S})}(),function ke(){kn("M",["MM",2,!1],"Mo",function(b,N){return(zn(b,N.isUTC)+1).toString(10)}),kn("MMM",null,null,function(b,N){return N.locale.monthsShort(b,N.format,N.isUTC)}),kn("MMMM",null,null,function(b,N){return N.locale.months(b,N.format,N.isUTC)}),Oi("month","M"),ot("month",8),Mt("M",as),Mt("MM",as,wr),Mt("MMM",function(b,N){return N.monthsShortRegex(b)}),Mt("MMMM",function(b,N){return N.monthsRegex(b)}),ar(["M","MM"],function(b,N,S){return N[yi]=Ci(b)-1,S}),ar(["MMM","MMMM"],function(b,N,S,X){const te=S._locale.monthsParse(b,X,S._strict);return null!=te?N[yi]=te:Rt(S).invalidMonth=!!b,S})}(),function xl(){kn("m",["mm",2,!1],null,function(b,N){return Os(b,N.isUTC).toString(10)}),Oi("minute","m"),ot("minute",14),Mt("m",as),Mt("mm",as,wr),ar(["m","mm"],Tn)}(),function bd(){let b;for(kn("S",null,null,function(S,X){return(~~(Ts(S,X.isUTC)/100)).toString(10)}),kn(null,["SS",2,!1],null,function(S,X){return(~~(Ts(S,X.isUTC)/10)).toString(10)}),kn(null,["SSS",3,!1],null,function(S,X){return Ts(S,X.isUTC).toString(10)}),kn(null,["SSSS",4,!1],null,function(S,X){return(10*Ts(S,X.isUTC)).toString(10)}),kn(null,["SSSSS",5,!1],null,function(S,X){return(100*Ts(S,X.isUTC)).toString(10)}),kn(null,["SSSSSS",6,!1],null,function(S,X){return(1e3*Ts(S,X.isUTC)).toString(10)}),kn(null,["SSSSSSS",7,!1],null,function(S,X){return(1e4*Ts(S,X.isUTC)).toString(10)}),kn(null,["SSSSSSSS",8,!1],null,function(S,X){return(1e5*Ts(S,X.isUTC)).toString(10)}),kn(null,["SSSSSSSSS",9,!1],null,function(S,X){return(1e6*Ts(S,X.isUTC)).toString(10)}),Oi("millisecond","ms"),ot("millisecond",16),Mt("S",Bs,Es),Mt("SS",Bs,wr),Mt("SSS",Bs,us),b="SSSS";b.length<=9;b+="S")Mt(b,Ue);function N(S,X,te){return X[nn]=Ci(1e3*parseFloat(`0.${S}`)),te}for(b="S";b.length<=9;b+="S")ar(b,N)}(),function sl(){function b(te,Me){return En(te,Me)%12||12}function S(te,Me){kn(te,null,null,function(Lt,sn){return sn.locale.meridiem(En(Lt,sn.isUTC),Os(Lt,sn.isUTC),Me)})}function X(te,Me){return Me._meridiemParse}kn("H",["HH",2,!1],null,function(te,Me){return En(te,Me.isUTC).toString(10)}),kn("h",["hh",2,!1],null,function(te,Me){return b(te,Me.isUTC).toString(10)}),kn("k",["kk",2,!1],null,function(te,Me){return function N(te,Me){return En(te,Me)||24}(te,Me.isUTC).toString(10)}),kn("hmm",null,null,function(te,Me){return`${b(te,Me.isUTC)}${mr(Os(te,Me.isUTC),2)}`}),kn("hmmss",null,null,function(te,Me){return`${b(te,Me.isUTC)}${mr(Os(te,Me.isUTC),2)}${mr(Cs(te,Me.isUTC),2)}`}),kn("Hmm",null,null,function(te,Me){return`${En(te,Me.isUTC)}${mr(Os(te,Me.isUTC),2)}`}),kn("Hmmss",null,null,function(te,Me){return`${En(te,Me.isUTC)}${mr(Os(te,Me.isUTC),2)}${mr(Cs(te,Me.isUTC),2)}`}),S("a",!0),S("A",!1),Oi("hour","h"),ot("hour",13),Mt("a",X),Mt("A",X),Mt("H",as),Mt("h",as),Mt("k",as),Mt("HH",as,wr),Mt("hh",as,wr),Mt("kk",as,wr),Mt("hmm",Rs),Mt("hmmss",Ss),Mt("Hmm",Rs),Mt("Hmmss",Ss),ar(["H","HH"],Xi),ar(["k","kk"],function(te,Me,Lt){const sn=Ci(te);return Me[Xi]=24===sn?0:sn,Lt}),ar(["a","A"],function(te,Me,Lt){return Lt._isPm=Lt._locale.isPM(te),Lt._meridiem=te,Lt}),ar(["h","hh"],function(te,Me,Lt){return Me[Xi]=Ci(te),Rt(Lt).bigHour=!0,Lt}),ar("hmm",function(te,Me,Lt){const sn=te.length-2;return Me[Xi]=Ci(te.substr(0,sn)),Me[Tn]=Ci(te.substr(sn)),Rt(Lt).bigHour=!0,Lt}),ar("hmmss",function(te,Me,Lt){const sn=te.length-4,dr=te.length-2;return Me[Xi]=Ci(te.substr(0,sn)),Me[Tn]=Ci(te.substr(sn,2)),Me[qi]=Ci(te.substr(dr)),Rt(Lt).bigHour=!0,Lt}),ar("Hmm",function(te,Me,Lt){const sn=te.length-2;return Me[Xi]=Ci(te.substr(0,sn)),Me[Tn]=Ci(te.substr(sn)),Lt}),ar("Hmmss",function(te,Me,Lt){const sn=te.length-4,dr=te.length-2;return Me[Xi]=Ci(te.substr(0,sn)),Me[Tn]=Ci(te.substr(sn,2)),Me[qi]=Ci(te.substr(dr)),Lt})}(),function ne(){kn("DDD",["DDDD",3,!1],"DDDo",function(b){return de(b).toString(10)}),Oi("dayOfYear","DDD"),ot("dayOfYear",4),Mt("DDD",Bs),Mt("DDDD",us),ar(["DDD","DDDD"],function(b,N,S){return S._dayOfYear=Ci(b),S})}(),function Ec(){kn("d",null,"do",function(b,N){return Un(b,N.isUTC).toString(10)}),kn("dd",null,null,function(b,N){return N.locale.weekdaysMin(b,N.format,N.isUTC)}),kn("ddd",null,null,function(b,N){return N.locale.weekdaysShort(b,N.format,N.isUTC)}),kn("dddd",null,null,function(b,N){return N.locale.weekdays(b,N.format,N.isUTC)}),kn("e",null,null,function(b,N){return lr(b,N.locale,N.isUTC).toString(10)}),kn("E",null,null,function(b,N){return function R(b,N){return Un(b,N)||7}(b,N.isUTC).toString(10)}),Oi("day","d"),Oi("weekday","e"),Oi("isoWeekday","E"),ot("day",11),ot("weekday",11),ot("isoWeekday",11),Mt("d",as),Mt("e",as),Mt("E",as),Mt("dd",function(b,N){return N.weekdaysMinRegex(b)}),Mt("ddd",function(b,N){return N.weekdaysShortRegex(b)}),Mt("dddd",function(b,N){return N.weekdaysRegex(b)}),Ht(["dd","ddd","dddd"],function(b,N,S,X){const te=S._locale.weekdaysParse(b,X,S._strict);return null!=te?N.d=te:Rt(S).invalidWeekday=!!b,S}),Ht(["d","e","E"],function(b,N,S,X){return N[X]=Ci(b),S})}(),function Xe(){kn("D",["DD",2,!1],"Do",function(b,N){return cr(b,N.isUTC).toString(10)}),Oi("date","D"),ot("date",9),Mt("D",as),Mt("DD",as,wr),Mt("Do",function(b,N){return N._dayOfMonthOrdinalParse||N._ordinalParse}),ar(["D","DD"],Ri),ar("Do",function(b,N,S){return N[Ri]=Ci(b.match(as)[0]),S})}())}(),b?function po(b){let N,S,X=0;for(;X<b.length;){const te=va(b[X]).split("-");let Me=te.length;for(N=va(b[X+1]),N=N?N.split("-"):null;Me>0;){if(S=ph(te.slice(0,Me).join("-")),S)return S;if(N&&N.length>=Me&&Ea(te,N,!0)>=Me-1)break;Me--}X++}return null}(Et(b)?b:[b]):ol}const Ut=["year","quarter","month","week","day","hours","minutes","seconds","milliseconds"],Us=Ut.reduce((b,N)=>(b[N]=!0,b),{});function Aa(b){return b<0?Math.floor(b):Math.ceil(b)}function bu(b){return 4800*b/146097}function Ml(b){return 146097*b/4800}let Ol=Math.round;const Rl_ss=44,Rl_s=45,Rl_m=45,Rl_h=22,Rl_d=26,Rl_M=11;function ll(b,N,S,X,te){return te.relativeTime(N||1,!!S,b,X)}class Ho{constructor(N,S={}){this._data={},this._locale=Xa(),this._locale=S&&S._locale||Xa();const te=N.year||0,Me=N.quarter||0,Lt=N.month||0,sn=N.week||0,dr=N.day||0,Oa=N.hours||0,co=N.minutes||0,el=N.seconds||0,qc=N.milliseconds||0;return this._isValid=function mo(b){if(Object.keys(b).some(X=>X in Us&&null===b[X]||isNaN(b[X])))return!1;let S=!1;for(let X=0;X<Ut.length;++X)if(b[Ut[X]]){if(S)return!1;b[Ut[X]]!==Ci(b[Ut[X]])&&(S=!0)}return!0}(N),this._milliseconds=+qc+1e3*el+60*co*1e3+1e3*Oa*60*60,this._days=+dr+7*sn,this._months=+Lt+3*Me+12*te,function mh(b){let N=b._milliseconds,S=b._days,X=b._months;const te=b._data;N>=0&&S>=0&&X>=0||N<=0&&S<=0&&X<=0||(N+=864e5*Aa(Ml(X)+S),S=0,X=0),te.milliseconds=N%1e3;const Me=Re(N/1e3);te.seconds=Me%60;const Lt=Re(Me/60);te.minutes=Lt%60;const sn=Re(Lt/60);te.hours=sn%24,S+=Re(sn/24);const dr=Re(bu(S));X+=dr,S-=Aa(Ml(dr));const Oa=Re(X/12);return X%=12,te.day=S,te.month=X,te.year=Oa,b}(this)}isValid(){return this._isValid}humanize(N){if(!this.isValid())return this.localeData().invalidDate;const S=this.localeData();let X=function bl(b,N,S){const X=Qo(b).abs(),te=Ol(X.as("s")),Me=Ol(X.as("m")),Lt=Ol(X.as("h")),sn=Ol(X.as("d")),dr=Ol(X.as("M")),Oa=Ol(X.as("y")),co=te<=Rl_ss&&["s",te]||te<Rl_s&&["ss",te]||Me<=1&&["m"]||Me<Rl_m&&["mm",Me]||Lt<=1&&["h"]||Lt<Rl_h&&["hh",Lt]||sn<=1&&["d"]||sn<Rl_d&&["dd",sn]||dr<=1&&["M"]||dr<Rl_M&&["MM",dr]||Oa<=1&&["y"]||["yy",Oa];return ll.apply(null,[co[0],co[1],N,+b>0,S])}(this,!N,S);return N&&(X=S.pastFuture(+this,X)),S.postformat(X)}localeData(){return this._locale}locale(N){return N?(this._locale=Xa(N)||this._locale,this):this._locale._abbr}abs(){const N=Math.abs,S=this._data;return this._milliseconds=N(this._milliseconds),this._days=N(this._days),this._months=N(this._months),S.milliseconds=N(S.milliseconds),S.seconds=N(S.seconds),S.minutes=N(S.minutes),S.hours=N(S.hours),S.month=N(S.month),S.year=N(S.year),this}as(N){if(!this.isValid())return NaN;let S,X;const te=this._milliseconds,Me=vi(N);if("month"===Me||"year"===Me)return S=this._days+te/864e5,X=this._months+bu(S),"month"===Me?X:X/12;switch(S=this._days+Math.round(Ml(this._months)),Me){case"week":return S/7+te/6048e5;case"day":return S+te/864e5;case"hours":return 24*S+te/36e5;case"minutes":return 1440*S+te/6e4;case"seconds":return 86400*S+te/1e3;case"milliseconds":return Math.floor(864e5*S)+te;default:throw new Error(`Unknown unit ${Me}`)}}valueOf(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Ci(this._months/12):NaN}}function _c(b){if(null==b._isValid){const N=Rt(b),S=Array.prototype.some.call(N.parsedDateParts,function(te){return null!=te});let X=!isNaN(b._d&&b._d.getTime())&&N.overflow<0&&!N.empty&&!N.invalidMonth&&!N.invalidWeekday&&!N.weekdayMismatch&&!N.nullInput&&!N.invalidFormat&&!N.userInvalidated&&(!N.meridiem||N.meridiem&&S);if(b._strict&&(X=X&&0===N.charsLeftOver&&0===N.unusedTokens.length&&void 0===N.bigHour),null!=Object.isFrozen&&Object.isFrozen(b))return X;b._isValid=X}return b._isValid}function wu(b,N){return b._d=new Date(NaN),Object.assign(Rt(b),N||{userInvalidated:!0}),b}const gh=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nh=/Z|[+-]\d\d(?::?\d\d)?/,Jo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/,!0],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/,!0],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/,!0],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/,!0],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/,!0],["YYYYMMDD",/\d{8}/,!0],["GGGG[W]WWE",/\d{4}W\d{3}/,!0],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/,!0]],Pl=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yc=/^\/?Date\((\-?\d+)/i,Xu={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},zh=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function go(b){if(!$e(b._i))return b;const N=b._i,S=gh.exec(N)||zc.exec(N);let X,te,Me,Lt,sn,dr;if(!S)return b._isValid=!1,b;for(sn=0,dr=Jo.length;sn<dr;sn++)if(Jo[sn][1].exec(S[1])){te=Jo[sn][0],X=!1!==Jo[sn][2];break}if(null==te)return b._isValid=!1,b;if(S[3]){for(sn=0,dr=Pl.length;sn<dr;sn++)if(Pl[sn][1].exec(S[3])){Me=(S[2]||" ")+Pl[sn][0];break}if(null==Me)return b._isValid=!1,b}if(!X&&null!=Me)return b._isValid=!1,b;if(S[4]){if(!Nh.exec(S[4]))return b._isValid=!1,b;Lt="Z"}return b._f=te+(Me||"")+(Lt||""),Mr(b)}function ul(b){const N=parseInt(b,10);return N<=49?N+2e3:N}function wl(b){if(!$e(b._i))return b;const N=zh.exec(function Bf(b){return b.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(b._i));if(!N)return function cl(b){return b._isValid=!1,b}(b);const S=function Yc(b,N,S,X,te,Me){const Lt=[ul(b),we.indexOf(N),parseInt(S,10),parseInt(X,10),parseInt(te,10)];return Me&&Lt.push(parseInt(Me,10)),Lt}(N[4],N[3],N[2],N[5],N[6],N[7]);return function Vo(b,N,S){return!b||je.indexOf(b)===new Date(N[0],N[1],N[2]).getDay()||(Rt(S).weekdayMismatch=!0,S._isValid=!1,!1)}(N[1],S,b)&&(b._a=S,b._tzm=function Ma(b,N,S){if(b)return Xu[b];if(N)return 0;{const X=parseInt(S,10),te=X%100;return(X-te)/100*60+te}}(N[8],N[9],N[10]),b._d=Xr.apply(null,b._a),b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm),Rt(b).rfc2822=!0),b}function oo(b,N,S,X,te=0){const Me=Xa(S||"en");if(!Me)throw new Error(`Locale "${S}" is not defined, please add it with "defineLocale(...)"`);const sn=function wd(b,N,S,X,te=0){if(!_t(b))return S.invalidDate;const Me=nu(N,S);return hr[Me]=hr[Me]||function Jn(b){const N=b.match(Si),S=N.length,X=new Array(S);for(let te=0;te<S;te++)X[te]=Nr[N[te]]?Nr[N[te]]:ts(N[te]);return function(te,Me,Lt,sn=0){let dr="";for(let Oa=0;Oa<S;Oa++)dr+=gt(X[Oa])?X[Oa].call(null,te,{format:b,locale:Me,isUTC:Lt,offset:sn}):X[Oa];return dr}}(Me),hr[Me](b,S,X,te)}(b,N||(X?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"),Me,X,te);return sn&&Me.postformat(sn)}function nu(b,N){let S=b,X=5;const te=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Me=Lt=>N.formatLongDate(Lt)||Lt;for(te.lastIndex=0;X>=0&&te.test(S);)S=S.replace(te,Me),te.lastIndex=0,X-=1;return S}function Jl(b,N,S){return b??N??S}function Zu(b){const N=[];let S,X,te;if(b._d)return b;const Me=function Cu(b){const N=new Date;return b._useUTC?[N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate()]:[N.getFullYear(),N.getMonth(),N.getDate()]}(b);for(b._w&&null==b._a[Ri]&&null==b._a[yi]&&function Eu(b){let N,S,X,te,Me,Lt,sn;const dr=b._w;if(null!=dr.GG||null!=dr.W||null!=dr.E)te=1,Me=4,N=Jl(dr.GG,b._a[Dt],Te(new Date,1,4).year),S=Jl(dr.W,1),X=Jl(dr.E,1),(X<1||X>7)&&(sn=!0);else{te=b._locale._week.dow,Me=b._locale._week.doy;const Oa=Te(new Date,te,Me);N=Jl(dr.gg,b._a[Dt],Oa.year),S=Jl(dr.w,Oa.week),null!=dr.d?(X=dr.d,(X<0||X>6)&&(sn=!0)):null!=dr.e?(X=dr.e+te,(dr.e<0||dr.e>6)&&(sn=!0)):X=te}S<1||S>Ne(N,te,Me)?Rt(b)._overflowWeeks=!0:null!=sn?Rt(b)._overflowWeekday=!0:(Lt=function Pe(b,N,S,X,te){const sn=1+7*(N-1)+(7+S-X)%7+Se(b,X,te);let dr,Oa;return sn<=0?(dr=b-1,Oa=bn(dr)+sn):sn>bn(b)?(dr=b+1,Oa=sn-bn(b)):(dr=b,Oa=sn),{year:dr,dayOfYear:Oa}}(N,S,X,te,Me),b._a[Dt]=Lt.year,b._dayOfYear=Lt.dayOfYear)}(b),null!=b._dayOfYear&&(te=Jl(b._a[Dt],Me[Dt]),(b._dayOfYear>bn(te)||0===b._dayOfYear)&&(Rt(b)._overflowDayOfYear=!0),X=new Date(Date.UTC(te,0,b._dayOfYear)),b._a[yi]=X.getUTCMonth(),b._a[Ri]=X.getUTCDate()),S=0;S<3&&null==b._a[S];++S)b._a[S]=N[S]=Me[S];for(;S<7;S++)b._a[S]=N[S]=null==b._a[S]?2===S?1:0:b._a[S];24===b._a[Xi]&&0===b._a[Tn]&&0===b._a[qi]&&0===b._a[nn]&&(b._nextDay=!0,b._a[Xi]=0),b._d=(b._useUTC?Xr:Fr).apply(null,N);const Lt=b._useUTC?b._d.getUTCDay():b._d.getDay();return null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm),b._nextDay&&(b._a[Xi]=24),b._w&&typeof b._w.d<"u"&&b._w.d!==Lt&&(Rt(b).weekdayMismatch=!0),b}function Li(b){let N;const S=b._a;return S&&-2===Rt(b).overflow&&(N=S[yi]<0||S[yi]>11?yi:S[Ri]<1||S[Ri]>Ft(S[Dt],S[yi])?Ri:S[Xi]<0||S[Xi]>24||24===S[Xi]&&(0!==S[Tn]||0!==S[qi]||0!==S[nn])?Xi:S[Tn]<0||S[Tn]>59?Tn:S[qi]<0||S[qi]>59?qi:S[nn]<0||S[nn]>999?nn:-1,Rt(b)._overflowDayOfYear&&(N<Dt||N>Ri)&&(N=Ri),Rt(b)._overflowWeeks&&-1===N&&(N=_n),Rt(b)._overflowWeekday&&-1===N&&(N=Fn),Rt(b).overflow=N),b}const mn="ISO_8601",un="RFC_2822";function Mr(b){if(b._f===mn)return go(b);if(b._f===un)return wl(b);if(b._a=[],Rt(b).empty=!0,Et(b._f)||!b._i&&0!==b._i)return b;let N=b._i.toString(),S=0;const X=N.length,te=nu(b._f,b._locale).match(Si)||[];let Me,Lt,sn,dr;for(Me=0;Me<te.length;Me++)Lt=te[Me],sn=(N.match(zi(Lt,b._locale))||[])[0],sn&&(dr=N.substr(0,N.indexOf(sn)),dr.length>0&&Rt(b).unusedInput.push(dr),N=N.slice(N.indexOf(sn)+sn.length),S+=sn.length),Nr[Lt]?(sn?Rt(b).empty=!1:Rt(b).unusedTokens.push(Lt),Vt(Lt,sn,b)):b._strict&&!sn&&Rt(b).unusedTokens.push(Lt);return Rt(b).charsLeftOver=X-S,N.length>0&&Rt(b).unusedInput.push(N),b._a[Xi]<=12&&!0===Rt(b).bigHour&&b._a[Xi]>0&&(Rt(b).bigHour=void 0),Rt(b).parsedDateParts=b._a.slice(0),Rt(b).meridiem=b._meridiem,b._a[Xi]=function Ls(b,N,S){let X=N;if(null==S)return X;if(null!=b.meridiemHour)return b.meridiemHour(X,S);if(null==b.isPM)return X;const te=b.isPM(S);return te&&X<12&&(X+=12),!te&&12===X&&(X=0),X}(b._locale,b._a[Xi],b._meridiem),Zu(b),Li(b)}function la(b){const N=Li(function Fl(b){let N=b._i;const S=b._f;return b._locale=b._locale||Xa(b._l),null===N||void 0===S&&""===N?wu(b,{nullInput:!0}):($e(N)&&(b._i=N=b._locale.preparse(N,S)),it(N)?(b._d=H(N),b):(Et(S)?function _a(b){let N,S,X,te,Me;if(!b._f||0===b._f.length)return Rt(b).invalidFormat=!0,wu(b);for(Me=0;Me<b._f.length;Me++)te=0,N=Object.assign({},b),null!=b._useUTC&&(N._useUTC=b._useUTC),N._f=b._f[Me],Mr(N),_c(N)&&(te+=Rt(N).charsLeftOver,te+=10*Rt(N).unusedTokens.length,Rt(N).score=te,(null==X||te<X)&&(X=te,S=N));Object.assign(b,S||N)}(b):S?Mr(b):function Yh(b){const N=b._i;if(tt(N))b._d=new Date;else if(it(N))b._d=H(N);else if($e(N))!function hl(b){if(!$e(b._i))return b;const N=yc.exec(b._i);null!==N?b._d=new Date(+N[1]):(go(b),!1!==b._isValid||(delete b._isValid,wl(b),!1!==b._isValid||(delete b._isValid,wu(b))))}(b);else if(Et(N)&&N.length){const S=N.slice(0);b._a=S.map(X=>$e(X)?parseInt(X,10):X),Zu(b)}else if(Nt(N))!function zo(b){if(b._d)return b;const N=b._i;if(Nt(N)){const S=function hi(b){const N={};let S,X;for(X in b)Tt(b,X)&&(S=vi(X),S&&(N[S]=b[X]));return N}(N);b._a=[S.year,S.month,S.day,S.hours,S.minutes,S.seconds,S.milliseconds].map(X=>$e(X)?parseInt(X,10):X)}return Zu(b)}(b);else{if(!Xt(N))return wu(b);b._d=new Date(N)}}(b),_c(b)||(b._d=null),b))}(b));return N._d=new Date(null!=N._d?N._d.getTime():NaN),_c(Object.assign({},N,{_isValid:null}))||(N._d=new Date(NaN)),N}function ku(b,N,S,X,te){return it(b)?b:function dl(b,N,S,X,te){const Me={};let Lt=b;return(Nt(Lt)&&function Pi(b){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(b).length;let N;for(N in b)if(b.hasOwnProperty(N))return!1;return!0}(Lt)||Et(Lt)&&0===Lt.length)&&(Lt=void 0),Me._useUTC=Me._isUTC=te,Me._l=S,Me._i=Lt,Me._f=N,Me._strict=X,la(Me)}(b,N,S,X,te)._d}function ru(b){return b instanceof Date?new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()):null}function xc(b){return b<0?-1*Math.round(-1*b):Math.round(b)}function Ya(b,N,S="milliseconds"){return!(!b||!N)&&("milliseconds"===S?b.valueOf()>N.valueOf():N.valueOf()<K(b,S).valueOf())}function Uo(b,N,S="milliseconds"){return!(!b||!N)&&("milliseconds"===S?b.valueOf()<N.valueOf():J(b,S).valueOf()<N.valueOf())}function fl(b,N,S="milliseconds"){if(!b||!N)return!1;if("milliseconds"===S)return b.valueOf()===N.valueOf();const X=N.valueOf();return K(b,S).valueOf()<=X&&X<=J(b,S).valueOf()}const qu=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,wc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Qo(b,N,S={}){const X=function Cc(b,N){if(null==b)return{};if(function vc(b){return b instanceof Ho}(b))return{milliseconds:b._milliseconds,day:b._days,month:b._months};if(Xt(b))return N?{[N]:b}:{milliseconds:b};if($e(b)){let S=qu.exec(b);if(S){const X="-"===S[1]?-1:1;return{year:0,day:Ci(S[Ri])*X,hours:Ci(S[Xi])*X,minutes:Ci(S[Tn])*X,seconds:Ci(S[qi])*X,milliseconds:Ci(xc(1e3*Ci(S[nn])))*X}}if(S=wc.exec(b),S){const X="-"===S[1]?-1:1;return{year:Bl(S[2],X),month:Bl(S[3],X),week:Bl(S[4],X),day:Bl(S[5],X),hours:Bl(S[6],X),minutes:Bl(S[7],X),seconds:Bl(S[8],X)}}}if(Nt(b)&&("from"in b||"to"in b)){const S=function Gc(b,N){if(!_t(b)||!_t(N))return{milliseconds:0,months:0};let S;const X=function df(b,N,S={}){if(!S._isUTC)return b;const X=H(N),te=6e4*(S._offset||0),Me=b.valueOf()-X.valueOf()+te;return X.setTime(X.valueOf()+Me),X}(N,b,{_offset:b.getTimezoneOffset()});return Uo(b,X)?S=Su(b,X):(S=Su(X,b),S.milliseconds=-S.milliseconds,S.months=-S.months),S}(ku(b.from),ku(b.to));return{milliseconds:S.milliseconds,month:S.months}}return b}(b,N);return new Ho(X,S)}function Bl(b,N){const S=b&&parseFloat(b.replace(",","."));return(isNaN(S)?0:S)*N}function Su(b,N){const S={milliseconds:0,months:0};return S.months=zn(N)-zn(b)+12*(On(N)-On(b)),Ya(Nl(H(b),S.months,"month"),N)&&--S.months,S.milliseconds=+N-+Nl(H(b),S.months,"month"),S}function Nl(b,N,S,X){return Au(b,Qo(N,S),1,X)}function Au(b,N,S,X){const te=N._milliseconds,Me=xc(N._days),Lt=xc(N._months);return Lt&&l(b,zn(b,X)+Lt*S,X),Me&&M(b,cr(b,X)+Me*S,X),te&&function B(b,N){b.setTime(N)}(b,function Zn(b){return b.getTime()}(b)+te*S),H(b)}function ou(b,N,S=Xa(),X){const te=Un(b,X),Me=function Hc(b,N){if(!$e(b))return b;const S=parseInt(b,10);if(!isNaN(S))return S;const X=N.weekdaysParse(b);return Xt(X)?X:null}(N,S);return Nl(b,Me-te,"day")}function lr(b,N=Xa(),S){return(Un(b,S)+7-N.firstDayOfWeek())%7}const rt=function(b){return 0===b?0:1===b?1:2===b?2:b%100>=3&&b%100<=10?3:b%100>=11?4:5},ri={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},Ai=function(b){return function(N,S){const X=rt(N);let te=ri[b][rt(N)];return 2===X&&(te=te[S?0:1]),te.replace(/%d/i,N.toString())}};"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),Ai("s"),Ai("s"),Ai("m"),Ai("m"),Ai("h"),Ai("h"),Ai("d"),Ai("d"),Ai("M"),Ai("M"),Ai("y"),Ai("y"),"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"gen._feb._mar._abr._mai._jun._jul._ago._set._oct._nov._des.".split("_"),"ene_feb_mar_abr_mai_jun_jul_ago_set_oct_nov_des".split("_"),"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),"diu._dil._dim._dix._dij._div._dis.".split("_"),"dg_dl_dt_dc_dj_dv_ds".split("_");const ho="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),Cl="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");(function(b,N){let S,X=[];for(S=0;S<12;S++)X[S]=new RegExp("^"+b[S]+"$|^"+N[S]+"$","i")})(ho,Cl),function(b){let N,S=[];for(N=0;N<12;N++)S[N]=new RegExp("^"+b[N]+"$","i")}(Cl),function(b){let N,S=[];for(N=0;N<12;N++)S[N]=new RegExp("^"+b[N]+"$","i")}(ho),"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"Januar_Februar_Marts_April_Maj_Juni_Juli_August_September_Oktober_November_December".split("_"),"Jan_Feb_Mar_Apr_Maj_Jun_Jul_Aug_Sep_Okt_Nov_Dec".split("_"),"S\xf8ndag_Mandag_Tirsdag_Onsdag_Torsdag_Fredag_L\xf8rdag".split("_"),"S\xf8n_Man_Tir_Ons_Tor_Fre_L\xf8r".split("_"),"S\xf8_Ma_Ti_On_To_Fr_L\xf8".split("_"),"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),"P_E_T_K_N_R_L".split("_"),"P_E_T_K_N_R_L".split("_"),"nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),"xan_feb_mar_abr_mai_xu\xf1_xul_ago_set_out_nov_dec".split("_"),"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),"vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" "),"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),"v_h_k_sze_cs_p_szo".split("_"),"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),"Sij_Velj_O\u017eu_Tra_Svi_Lip_Srp_Kol_Ruj_Lis_Stu_Pro".split("_"),"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),"Ne_Po_Ut_Sr_\u010ce_Pe_Su".split("_"),"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),"dom_lun_mar_mer_gio_ven_sab".split("_"),"do_lu_ma_me_gi_ve_sa".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),"S_P_A_T_K_Pn_\u0160".split("_"),"Janv\u0101ris_Febru\u0101ris_Marts_Apr\u012blis_Maijs_J\u016bnijs_J\u016blijs_Augusts_Septembris_Oktobris_Novembris_Decembris".split("_"),"Jan_Feb_Mar_Apr_Mai_J\u016bn_J\u016bl_Aug_Sep_Okt_Nov_Dec".split("_"),"Sv\u0113tdiena_Pirmdiena_Otrdiena_Tre\u0161diena_Ceturtdiena_Piektdiena_Sestdiena".split("_"),"Sv\u0113td_Pirmd_Otrd_Tre\u0161d_Ceturtd_Piektd_Sestd".split("_"),"Sv_Pi_Ot_Tr_Ce_Pk_Se".split("_"),"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),"jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_"),"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),"ne_po_to_sr_\u010de_pe_so".split("_"),"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),"E Diel\xeb_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),"Di_He_Ma_Me_En_Pr_Sh".split("_"),"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_");const Wo={abbr:"th-be",months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:b=>"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===b,meridiem:(b,N,S)=>b<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07",calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},preparse(b,N){const S=Wo.longDateFormat[N]?Wo.longDateFormat[N]:N;return-1!==S.indexOf("YYYY",S.length-4)?b.substr(0,b.length-4)+(parseInt(b.substr(b.length-4),10)-543):b},getFullYear:(b,N=!1)=>543+(N?b.getUTCFullYear():b.getFullYear())};function ro(b){return function(N){return b+"\u043e"+(11===En(N)?"\u0431":"")+"] LT"}}"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_"),"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),ro("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),ro("[\u0417\u0430\u0432\u0442\u0440\u0430 "),ro("[\u0412\u0447\u043e\u0440\u0430 "),ro("[\u0423] dddd ["),"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_");var uu=Qt(140),To=Qt(6504),wh=Qt(6700),tc=Qt(756),Gh=Qt(3252),Ou=Qt(3920),lp=Qt(208);class Td extends wh.g{constructor(N,S,X){super(N),S.pipe((0,Ou.y)(tc.M)).pipe((0,lp.K)((Lt,sn)=>sn?X(Lt,sn):Lt,N)).subscribe(Lt=>this.next(Lt))}}class Sd extends Gh._{constructor(N,S,X){super(),this._dispatcher=N,this._reducer=S,this.source=X}select(N){return(this.source?.pipe((0,Ze.k)(N))||(new Gh._).pipe((0,Ze.k)(N))).pipe((0,He.a)())}lift(N){const S=new Sd(this._dispatcher,this._reducer,this);return S.operator=N,S}dispatch(N){this._dispatcher.next(N)}next(N){this._dispatcher.next(N)}error(N){this._dispatcher.error(N)}complete(){}}var Ur=Qt(1368);function ha(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0\xa0\xa0"),D.C$Y())}function Ey(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td")(1,"a",1),D.qCj("click",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeMinutes(te.minuteStep))}),D.wR5(2,"span",2),D.C$Y()()}if(2&b){const S=D.GaO();D.yG2(),D.eAK("disabled",!S.canIncrementMinutes||!S.isEditable)}}function yv(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0"),D.C$Y())}function gf(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td")(1,"a",1),D.qCj("click",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeSeconds(te.secondsStep))}),D.wR5(2,"span",2),D.C$Y()()}if(2&b){const S=D.GaO();D.yG2(),D.eAK("disabled",!S.canIncrementSeconds||!S.isEditable)}}function Vp(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0\xa0\xa0"),D.C$Y())}function Up(b,N){1&b&&D.wR5(0,"td")}function mg(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0:\xa0"),D.C$Y())}function Yl(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td",4)(1,"input",5),D.qCj("wheel",function(te){D.usT(S);const Me=D.GaO();return Me.prevDef(te),D.CGJ(Me.changeMinutes(Me.minuteStep*Me.wheelSign(te),"wheel"))})("keydown.ArrowUp",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeMinutes(te.minuteStep,"key"))})("keydown.ArrowDown",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeMinutes(-te.minuteStep,"key"))})("change",function(te){D.usT(S);const Me=D.GaO();return D.CGJ(Me.updateMinutes(te.target))}),D.C$Y()()}if(2&b){const S=D.GaO();D.eAK("has-error",S.invalidMinutes),D.yG2(),D.eAK("is-invalid",S.invalidMinutes),D.E7m("placeholder",S.minutesPlaceholder)("readonly",S.readonlyInput)("disabled",S.disabled)("value",S.minutes),D.e48("aria-label",S.labelMinutes)}}function gg(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0:\xa0"),D.C$Y())}function Dm(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td",4)(1,"input",5),D.qCj("wheel",function(te){D.usT(S);const Me=D.GaO();return Me.prevDef(te),D.CGJ(Me.changeSeconds(Me.secondsStep*Me.wheelSign(te),"wheel"))})("keydown.ArrowUp",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeSeconds(te.secondsStep,"key"))})("keydown.ArrowDown",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeSeconds(-te.secondsStep,"key"))})("change",function(te){D.usT(S);const Me=D.GaO();return D.CGJ(Me.updateSeconds(te.target))}),D.C$Y()()}if(2&b){const S=D.GaO();D.eAK("has-error",S.invalidSeconds),D.yG2(),D.eAK("is-invalid",S.invalidSeconds),D.E7m("placeholder",S.secondsPlaceholder)("readonly",S.readonlyInput)("disabled",S.disabled)("value",S.seconds),D.e48("aria-label",S.labelSeconds)}}function vg(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0\xa0\xa0"),D.C$Y())}function a0(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td")(1,"button",8),D.qCj("click",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.toggleMeridian())}),D.OEk(2),D.C$Y()()}if(2&b){const S=D.GaO();D.yG2(),D.eAK("disabled",!S.isEditable||!S.canToggleMeridian),D.E7m("disabled",!S.isEditable||!S.canToggleMeridian),D.yG2(),D.oRS("",S.meridian," ")}}function xv(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0\xa0\xa0"),D.C$Y())}function Ch(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td")(1,"a",1),D.qCj("click",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeMinutes(-te.minuteStep))}),D.wR5(2,"span",7),D.C$Y()()}if(2&b){const S=D.GaO();D.yG2(),D.eAK("disabled",!S.canDecrementMinutes||!S.isEditable)}}function Ad(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0"),D.C$Y())}function cp(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td")(1,"a",1),D.qCj("click",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.changeSeconds(-te.secondsStep))}),D.wR5(2,"span",7),D.C$Y()()}if(2&b){const S=D.GaO();D.yG2(),D.eAK("disabled",!S.canDecrementSeconds||!S.isEditable)}}function up(b,N){1&b&&(D.I0R(0,"td"),D.OEk(1,"\xa0\xa0\xa0"),D.C$Y())}function Hh(b,N){1&b&&D.wR5(0,"td")}let Gl=(()=>{class b{static#e=this.WRITE_VALUE="[timepicker] write value from ng model";static#t=this.CHANGE_HOURS="[timepicker] change hours";static#i=this.CHANGE_MINUTES="[timepicker] change minutes";static#n=this.CHANGE_SECONDS="[timepicker] change seconds";static#r=this.SET_TIME_UNIT="[timepicker] set time unit";static#s=this.UPDATE_CONTROLS="[timepicker] update controls";writeValue(S){return{type:b.WRITE_VALUE,payload:S}}changeHours(S){return{type:b.CHANGE_HOURS,payload:S}}changeMinutes(S){return{type:b.CHANGE_MINUTES,payload:S}}changeSeconds(S){return{type:b.CHANGE_SECONDS,payload:S}}setTime(S){return{type:b.SET_TIME_UNIT,payload:S}}updateControls(S){return{type:b.UPDATE_CONTROLS,payload:S}}static#a=this.\u0275fac=function(X){return new(X||b)};static#o=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})();const Dd=10,Id=24,Eh=12,o0=60,zf=60;function So(b){return!(!b||b instanceof Date&&isNaN(b.getHours()))&&("string"!=typeof b||So(new Date(b)))}function od(b,N){return!(b.min&&N<b.min||b.max&&N>b.max)}function kh(b){return typeof b>"u"?NaN:"number"==typeof b?b:parseInt(b,Dd)}function Ru(b,N=!1){const S=kh(b);return isNaN(S)||S<0||S>(N?Eh:Id)?NaN:S}function Yf(b){const N=kh(b);return isNaN(N)||N<0||N>o0?NaN:N}function Gf(b){const N=kh(b);return isNaN(N)||N<0||N>zf?NaN:N}function Ao(b){return"string"==typeof b?new Date(b):b}function Yr(b,N){if(!b)return Yr(Md(new Date,0,0,0),N);if(!N)return b;let S=b.getHours(),X=b.getMinutes(),te=b.getSeconds();return N.hour&&(S+=kh(N.hour)),N.minute&&(X+=kh(N.minute)),N.seconds&&(te+=kh(N.seconds)),Md(b,S,X,te)}function Vh(b,N){let S=Ru(N.hour);const X=Yf(N.minute),te=Gf(N.seconds)||0;return N.isPM&&12!==S&&(S+=Eh),b?isNaN(S)||isNaN(X)?b:Md(b,S,X,te):isNaN(S)||isNaN(X)?b:Md(new Date,S,X,te)}function Md(b,N,S,X){const te=new Date(b.getFullYear(),b.getMonth(),b.getDate(),N,S,X,b.getMilliseconds());return te.setFullYear(b.getFullYear()),te.setMonth(b.getMonth()),te.setDate(b.getDate()),te}function tn(b){const N=b.toString();return N.length>1?N:`0${N}`}function hp(b,N){return!isNaN(Ru(b,N))}function kc(b){return!isNaN(Yf(b))}function Do(b){return!isNaN(Gf(b))}function cd(b,N="0",S="0",X){return hp(b,X)&&kc(N)&&Do(S)}function $o(b,N){return!(b.readonlyInput||b.disabled||N&&("wheel"===N.source&&!b.mousewheel||"key"===N.source&&!b.arrowkeys))}function jp(b){const{hourStep:N,minuteStep:S,secondsStep:X,readonlyInput:te,disabled:Me,mousewheel:Lt,arrowkeys:sn,showSpinners:dr,showMeridian:Oa,showSeconds:co,meridians:el,min:qc,max:kp}=b;return{hourStep:N,minuteStep:S,secondsStep:X,readonlyInput:te,disabled:Me,mousewheel:Lt,arrowkeys:sn,showSpinners:dr,showMeridian:Oa,showSeconds:co,meridians:el,min:qc,max:kp}}let Vf=(()=>{class b{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.allowEmptyTime=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();const xg={value:void 0,config:new Vf,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function dp(b=xg,N){switch(N.type){case Gl.WRITE_VALUE:return Object.assign({},b,{value:N.payload});case Gl.CHANGE_HOURS:{if(!$o(b.config,N.payload)||!function _g(b,N){return!(!b.step||b.step>0&&!N.canIncrementHours||b.step<0&&!N.canDecrementHours)}(N.payload,b.controls))return b;const S=Yr(b.value,{hour:N.payload.step});return!b.config.max&&!b.config.min||od(b.config,S)?Object.assign({},b,{value:S}):b}case Gl.CHANGE_MINUTES:{if(!$o(b.config,N.payload)||!function Im(b,N){return!(!b.step||b.step>0&&!N.canIncrementMinutes||b.step<0&&!N.canDecrementMinutes)}(N.payload,b.controls))return b;const S=Yr(b.value,{minute:N.payload.step});return!b.config.max&&!b.config.min||od(b.config,S)?Object.assign({},b,{value:S}):b}case Gl.CHANGE_SECONDS:{if(!$o(b.config,N.payload)||!function yg(b,N){return!(!b.step||b.step>0&&!N.canIncrementSeconds||b.step<0&&!N.canDecrementSeconds)}(N.payload,b.controls))return b;const S=Yr(b.value,{seconds:N.payload.step});return!b.config.max&&!b.config.min||od(b.config,S)?Object.assign({},b,{value:S}):b}case Gl.SET_TIME_UNIT:{if(!$o(b.config))return b;const S=Vh(b.value,N.payload);return Object.assign({},b,{value:S})}case Gl.UPDATE_CONTROLS:{const S=function Wp(b,N){const{min:te,max:Me,hourStep:Lt,minuteStep:sn,secondsStep:dr,showSeconds:Oa}=N,co={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!b)return co;if(Me){const el=Yr(b,{hour:Lt});if(co.canIncrementHours=Me>el&&b.getHours()+Lt<24,!co.canIncrementHours){const qc=Yr(b,{minute:sn});co.canIncrementMinutes=Oa?Me>qc:Me>=qc}if(!co.canIncrementMinutes){const qc=Yr(b,{seconds:dr});co.canIncrementSeconds=Me>=qc}b.getHours()<12&&(co.canToggleMeridian=Yr(b,{hour:12})<Me)}if(te){const el=Yr(b,{hour:-Lt});if(co.canDecrementHours=te<el,!co.canDecrementHours){const qc=Yr(b,{minute:-sn});co.canDecrementMinutes=Oa?te<qc:te<=qc}if(!co.canDecrementMinutes){const qc=Yr(b,{seconds:-dr});co.canDecrementSeconds=te<=qc}b.getHours()>=12&&(co.canToggleMeridian=Yr(b,{hour:-12})>te)}return co}(b.value,N.payload),X={value:b.value,config:N.payload,controls:S};return b.config.showMeridian!==X.config.showMeridian&&b.value&&(X.value=new Date(b.value)),Object.assign({},b,X)}default:return b}}let Od=(()=>{class b extends Sd{constructor(){const S=new wh.g({type:"[mini-ngrx] dispatcher init"});super(S,dp,new Td(xg,S,dp))}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})();const Uh={provide:To.Y6,useExisting:(0,D.wd)(()=>$p),multi:!0};let $p=(()=>{class b{constructor(S,X,te,Me){this._cd=X,this._store=te,this._timepickerActions=Me,this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showMeridian=!0,this.showMinutes=!0,this.showSeconds=!1,this.meridians=["AM","PM"],this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.isValid=new D._w7,this.meridianChange=new D._w7,this.hours="",this.minutes="",this.seconds="",this.meridian="",this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.labelHours="hours",this.labelMinutes="minutes",this.labelSeconds="seconds",this.canIncrementHours=!0,this.canIncrementMinutes=!0,this.canIncrementSeconds=!0,this.canDecrementHours=!0,this.canDecrementMinutes=!0,this.canDecrementSeconds=!0,this.canToggleMeridian=!0,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.config=S,Object.assign(this,this.config),this.timepickerSub=te.select(Lt=>Lt.value).subscribe(Lt=>{this._renderTime(Lt),this.onChange(Lt),this._store.dispatch(this._timepickerActions.updateControls(jp(this)))}),te.select(Lt=>Lt.controls).subscribe(Lt=>{const sn=cd(this.hours,this.minutes,this.seconds,this.isPM()),dr=this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||sn;this.isValid.emit(dr),Object.assign(this,Lt),X.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(S){S.preventDefault()}wheelSign(S){return-1*Math.sign(S.deltaY||0)}ngOnChanges(){this._store.dispatch(this._timepickerActions.updateControls(jp(this)))}changeHours(S,X=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:S,source:X}))}changeMinutes(S,X=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:S,source:X}))}changeSeconds(S,X=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:S,source:X}))}updateHours(S){this.resetValidation(),this.hours=S.value;const X=hp(this.hours,this.isPM())&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||X))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(S){this.resetValidation(),this.minutes=S.value;const X=kc(this.minutes)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||X))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(S){this.resetValidation(),this.seconds=S.value;const X=Do(this.seconds)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||X))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function ld(b,N,S){const X=Vh(new Date,b);return!(!X||N&&X>N||S&&X<S)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}isOneOfDatesIsEmpty(){return function Hf(b,N,S){return 0===b.length||0===N.length||0===S.length}(this.hours,this.minutes,this.seconds)}_updateTime(){const te=cd(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM());if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||te))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(S){So(S)?(this.resetValidation(),this._store.dispatch(this._timepickerActions.writeValue(Ao(S)))):null==S&&this._store.dispatch(this._timepickerActions.writeValue())}registerOnChange(S){this.onChange=S}registerOnTouched(S){this.onTouched=S}setDisabledState(S){this.disabled=S,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub?.unsubscribe()}_renderTime(S){if(!S||!So(S))return this.hours="",this.minutes="",this.seconds="",this.meridian=this.meridians[0],void this.meridianChange.emit(this.meridian);const X=Ao(S);if(!X)return;let Me=X.getHours();this.showMeridian&&(this.meridian=this.meridians[Me>=12?1:0],this.meridianChange.emit(this.meridian),Me%=12,0===Me&&(Me=12)),this.hours=tn(Me),this.minutes=tn(X.getMinutes()),this.seconds=tn(X.getUTCSeconds())}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(Vf),D.GI1(D.kD9),D.GI1(Od),D.GI1(Gl))};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["timepicker"]],inputs:{hourStep:"hourStep",minuteStep:"minuteStep",secondsStep:"secondsStep",readonlyInput:"readonlyInput",disabled:"disabled",mousewheel:"mousewheel",arrowkeys:"arrowkeys",showSpinners:"showSpinners",showMeridian:"showMeridian",showMinutes:"showMinutes",showSeconds:"showSeconds",meridians:"meridians",min:"min",max:"max",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",secondsPlaceholder:"secondsPlaceholder"},outputs:{isValid:"isValid",meridianChange:"meridianChange"},features:[D.M5G([Uh,Od]),D.SYr],decls:31,vars:33,consts:[[1,"text-center",3,"hidden"],["href","javascript:void(0);",1,"btn","btn-link",3,"click"],[1,"bs-chevron","bs-chevron-up"],[4,"ngIf"],[1,"form-group","mb-3"],["type","text","maxlength","2",1,"form-control","text-center","bs-timepicker-field",3,"placeholder","readonly","disabled","value","wheel","keydown.ArrowUp","keydown.ArrowDown","change"],["class","form-group mb-3",3,"has-error",4,"ngIf"],[1,"bs-chevron","bs-chevron-down"],["type","button",1,"btn","btn-default","text-center",3,"disabled","click"]],template:function(X,te){1&X&&(D.I0R(0,"table")(1,"tbody")(2,"tr",0)(3,"td")(4,"a",1),D.qCj("click",function(){return te.changeHours(te.hourStep)}),D.wR5(5,"span",2),D.C$Y()(),D.yuY(6,ha,2,0,"td",3)(7,Ey,3,2,"td",3)(8,yv,2,0,"td",3)(9,gf,3,2,"td",3)(10,Vp,2,0,"td",3)(11,Up,1,0,"td",3),D.C$Y(),D.I0R(12,"tr")(13,"td",4)(14,"input",5),D.qCj("wheel",function(Lt){return te.prevDef(Lt),te.changeHours(te.hourStep*te.wheelSign(Lt),"wheel")})("keydown.ArrowUp",function(){return te.changeHours(te.hourStep,"key")})("keydown.ArrowDown",function(){return te.changeHours(-te.hourStep,"key")})("change",function(Lt){return te.updateHours(Lt.target)}),D.C$Y()(),D.yuY(15,mg,2,0,"td",3)(16,Yl,2,9,"td",6)(17,gg,2,0,"td",3)(18,Dm,2,9,"td",6)(19,vg,2,0,"td",3)(20,a0,3,4,"td",3),D.C$Y(),D.I0R(21,"tr",0)(22,"td")(23,"a",1),D.qCj("click",function(){return te.changeHours(-te.hourStep)}),D.wR5(24,"span",7),D.C$Y()(),D.yuY(25,xv,2,0,"td",3)(26,Ch,3,2,"td",3)(27,Ad,2,0,"td",3)(28,cp,3,2,"td",3)(29,up,2,0,"td",3)(30,Hh,1,0,"td",3),D.C$Y()()()),2&X&&(D.yG2(2),D.E7m("hidden",!te.showSpinners),D.yG2(2),D.eAK("disabled",!te.canIncrementHours||!te.isEditable),D.yG2(2),D.E7m("ngIf",te.showMinutes),D.yG2(),D.E7m("ngIf",te.showMinutes),D.yG2(),D.E7m("ngIf",te.showSeconds),D.yG2(),D.E7m("ngIf",te.showSeconds),D.yG2(),D.E7m("ngIf",te.showMeridian),D.yG2(),D.E7m("ngIf",te.showMeridian),D.yG2(2),D.eAK("has-error",te.invalidHours),D.yG2(),D.eAK("is-invalid",te.invalidHours),D.E7m("placeholder",te.hoursPlaceholder)("readonly",te.readonlyInput)("disabled",te.disabled)("value",te.hours),D.e48("aria-label",te.labelHours),D.yG2(),D.E7m("ngIf",te.showMinutes),D.yG2(),D.E7m("ngIf",te.showMinutes),D.yG2(),D.E7m("ngIf",te.showSeconds),D.yG2(),D.E7m("ngIf",te.showSeconds),D.yG2(),D.E7m("ngIf",te.showMeridian),D.yG2(),D.E7m("ngIf",te.showMeridian),D.yG2(),D.E7m("hidden",!te.showSpinners),D.yG2(2),D.eAK("disabled",!te.canDecrementHours||!te.isEditable),D.yG2(2),D.E7m("ngIf",te.showMinutes),D.yG2(),D.E7m("ngIf",te.showMinutes),D.yG2(),D.E7m("ngIf",te.showSeconds),D.yG2(),D.E7m("ngIf",te.showSeconds),D.yG2(),D.E7m("ngIf",te.showMeridian),D.yG2(),D.E7m("ngIf",te.showMeridian))},dependencies:[Ur.u_],styles:[".bs-chevron{border-style:solid;display:block;width:9px;height:9px;position:relative;border-width:3px 0px 0 3px}.bs-chevron-up{transform:rotate(45deg);top:2px}.bs-chevron-down{transform:rotate(-135deg);top:-2px}.bs-timepicker-field{width:65px;padding:.375rem .55rem}\n"],encapsulation:2,changeDetection:0})}return b})(),Mm=(()=>{class b{static forRoot(){return{ngModule:b,providers:[Gl,Od]}}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275mod=D.a4G({type:b});static#i=this.\u0275inj=D.s3X({providers:[Od],imports:[Ur.MD]})}return b})();var ic=Qt(9684),Lu=Qt(6928),hu=Qt(6040),Rd=Qt(5657),El=Qt(7995),Pu=Qt(6552);function Th(b,N){if(1&b){const S=D.KQA();D.I0R(0,"button",2),D.qCj("click",function(){const Me=D.usT(S).$implicit,Lt=D.GaO();return D.CGJ(Lt.selectFromRanges(Me))}),D.OEk(1),D.C$Y()}if(2&b){const S=N.$implicit,X=D.GaO();D.eAK("selected",S.value===X.selectedRange),D.yG2(),D.oRS(" ",S.label," ")}}function Xo(b,N){1&b&&D.wR5(0,"bs-current-date",4)}function Xp(b,N){1&b&&D.wR5(0,"bs-timepicker")}const da=[[["bs-datepicker-navigation-view"]],"*"],jh=["bs-datepicker-navigation-view","*"],bv=["bsDatepickerDayDecorator",""];function vf(b,N){if(1&b){const S=D.KQA();D.SAx(0),D.OEk(1," \u200b "),D.I0R(2,"button",2),D.qCj("click",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.view("month"))}),D.I0R(3,"span"),D.OEk(4),D.C$Y()(),D.k70()}if(2&b){const S=D.GaO();D.yG2(2),D.E7m("disabled",S.isDisabled),D.yG2(2),D.cNF(S.calendar.monthTitle)}}function Om(b,N){1&b&&D.wR5(0,"th")}function bg(b,N){if(1&b&&(D.I0R(0,"th",5),D.OEk(1),D.C$Y()),2&b){const S=N.index,X=D.GaO();D.yG2(),D.oRS("",X.calendar.weekdays[S]," ")}}function Uf(b,N){if(1&b){const S=D.KQA();D.I0R(0,"span",11),D.qCj("click",function(){D.usT(S);const te=D.GaO(2).$implicit,Me=D.GaO();return D.CGJ(Me.selectWeek(te))}),D.OEk(1),D.C$Y()}if(2&b){const S=D.GaO(2).index,X=D.GaO();D.yG2(),D.cNF(X.calendar.weekNumbers[S])}}function Ld(b,N){if(1&b){const S=D.KQA();D.I0R(0,"span",12),D.qCj("click",function(){D.usT(S);const te=D.GaO(2).$implicit,Me=D.GaO();return D.CGJ(Me.selectWeek(te))})("mouseenter",function(){D.usT(S);const te=D.GaO(2).$implicit,Me=D.GaO();return D.CGJ(Me.weekHoverHandler(te,!0))})("mouseleave",function(){D.usT(S);const te=D.GaO(2).$implicit,Me=D.GaO();return D.CGJ(Me.weekHoverHandler(te,!1))}),D.OEk(1),D.C$Y()}if(2&b){const S=D.GaO(2).index,X=D.GaO();D.yG2(),D.cNF(X.calendar.weekNumbers[S])}}function Rm(b,N){if(1&b&&(D.I0R(0,"td",8),D.yuY(1,Uf,2,1,"span",9)(2,Ld,2,1,"span",10),D.C$Y()),2&b){const S=D.GaO(2);D.eAK("active-week",S.isWeekHovered),D.yG2(),D.E7m("ngIf",S.isiOS),D.yG2(),D.E7m("ngIf",!S.isiOS)}}function Tc(b,N){if(1&b){const S=D.KQA();D.I0R(0,"span",17),D.qCj("click",function(){D.usT(S);const te=D.GaO().$implicit,Me=D.GaO(2);return D.CGJ(Me.selectDay(te))})("mouseenter",function(){D.usT(S);const te=D.GaO().$implicit,Me=D.GaO(2);return D.CGJ(Me.hoverDay(te,!0))})("mouseleave",function(){D.usT(S);const te=D.GaO().$implicit,Me=D.GaO(2);return D.CGJ(Me.hoverDay(te,!1))}),D.OEk(1),D.C$Y()}if(2&b){const S=D.GaO().$implicit;D._6D("tooltip",S.tooltipText),D.E7m("day",S),D.yG2(),D.oRS("",S.label," 3")}}function wg(b,N){if(1&b){const S=D.KQA();D.I0R(0,"span",18),D.qCj("click",function(){D.usT(S);const te=D.GaO().$implicit,Me=D.GaO(2);return D.CGJ(Me.selectDay(te))})("mouseenter",function(){D.usT(S);const te=D.GaO().$implicit,Me=D.GaO(2);return D.CGJ(Me.hoverDay(te,!0))})("mouseleave",function(){D.usT(S);const te=D.GaO().$implicit,Me=D.GaO(2);return D.CGJ(Me.hoverDay(te,!1))}),D.OEk(1),D.C$Y()}if(2&b){const S=D.GaO().$implicit;D.E7m("day",S),D.yG2(),D.oRS("",S.label," 2")}}function Cg(b,N){if(1&b){const S=D.KQA();D.I0R(0,"span",19),D.qCj("click",function(){D.usT(S);const te=D.GaO().$implicit,Me=D.GaO(2);return D.CGJ(Me.selectDay(te))}),D.OEk(1),D.C$Y()}if(2&b){const S=D.GaO().$implicit;D.E7m("day",S),D.yG2(),D.oRS("",S.label," 1")}}function Pd(b,N){if(1&b&&(D.I0R(0,"td",13),D.yuY(1,Tc,2,3,"span",14)(2,wg,2,2,"span",15)(3,Cg,2,2,"span",16),D.C$Y()),2&b){const S=D.GaO(2);D.yG2(),D.E7m("ngIf",!S.isiOS&&S.isShowTooltip),D.yG2(),D.E7m("ngIf",!S.isiOS&&!S.isShowTooltip),D.yG2(),D.E7m("ngIf",S.isiOS)}}function As(b,N){if(1&b&&(D.I0R(0,"tr"),D.yuY(1,Rm,3,4,"td",6)(2,Pd,4,3,"td",7),D.C$Y()),2&b){const S=N.$implicit,X=D.GaO();D.yG2(),D.E7m("ngIf",X.options&&X.options.showWeekNumbers),D.yG2(),D.E7m("ngForOf",S.days)}}function Lm(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td",4),D.qCj("click",function(){const Me=D.usT(S).$implicit,Lt=D.GaO(2);return D.CGJ(Lt.viewMonth(Me))})("mouseenter",function(){const Me=D.usT(S).$implicit,Lt=D.GaO(2);return D.CGJ(Lt.hoverMonth(Me,!0))})("mouseleave",function(){const Me=D.usT(S).$implicit,Lt=D.GaO(2);return D.CGJ(Lt.hoverMonth(Me,!1))}),D.I0R(1,"span"),D.OEk(2),D.C$Y()()}if(2&b){const S=N.$implicit;D.eAK("disabled",S.isDisabled)("is-highlighted",S.isHovered),D.yG2(),D.eAK("selected",S.isSelected),D.yG2(),D.cNF(S.label)}}function jf(b,N){if(1&b&&(D.I0R(0,"tr"),D.yuY(1,Lm,3,7,"td",3),D.C$Y()),2&b){const S=N.$implicit;D.yG2(),D.E7m("ngForOf",S)}}function _f(b,N){if(1&b){const S=D.KQA();D.I0R(0,"td",4),D.qCj("click",function(){const Me=D.usT(S).$implicit,Lt=D.GaO(2);return D.CGJ(Lt.viewYear(Me))})("mouseenter",function(){const Me=D.usT(S).$implicit,Lt=D.GaO(2);return D.CGJ(Lt.hoverYear(Me,!0))})("mouseleave",function(){const Me=D.usT(S).$implicit,Lt=D.GaO(2);return D.CGJ(Lt.hoverYear(Me,!1))}),D.I0R(1,"span"),D.OEk(2),D.C$Y()()}if(2&b){const S=N.$implicit;D.eAK("disabled",S.isDisabled)("is-highlighted",S.isHovered),D.yG2(),D.eAK("selected",S.isSelected),D.yG2(),D.cNF(S.label)}}function Fd(b,N){if(1&b&&(D.I0R(0,"tr"),D.yuY(1,_f,3,7,"td",3),D.C$Y()),2&b){const S=N.$implicit;D.yG2(),D.E7m("ngForOf",S)}}const Zp=["startTP"];function nc(b,N){if(1&b){const S=D.KQA();D.I0R(0,"bs-days-calendar-view",11),D.qCj("onNavigate",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.navigateTo(te))})("onViewMode",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.setViewMode(te))})("onHover",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.dayHoverHandler(te))})("onHoverWeek",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.weekHoverHandler(te))})("onSelect",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.daySelectHandler(te))}),D.wVc(1,"async"),D.C$Y()}if(2&b){const S=N.$implicit,X=D.GaO(3);D.eAK("bs-datepicker-multiple",X.multipleCalendars),D.E7m("calendar",S)("isDisabled",X.isDatePickerDisabled)("options",D.kDX(1,5,X.options$))}}function kl(b,N){if(1&b&&D.wR5(0,"timepicker",13,16),2&b){const S=D.GaO(4);D.E7m("disabled",S.isDatePickerDisabled)}}function Bd(b,N){if(1&b&&(D.I0R(0,"div",12),D.wR5(1,"timepicker",13,14),D.yuY(3,kl,2,1,"timepicker",15),D.C$Y()),2&b){const S=D.GaO(3);D.yG2(),D.E7m("disabled",S.isDatePickerDisabled),D.yG2(2),D.E7m("ngIf",S.isRangePicker)}}function Nd(b,N){if(1&b&&(D.SAx(0),D.I0R(1,"div",8),D.yuY(2,nc,2,7,"bs-days-calendar-view",9),D.wVc(3,"async"),D.C$Y(),D.yuY(4,Bd,4,2,"div",10),D.k70()),2&b){const S=D.GaO(2);D.yG2(2),D.E7m("ngForOf",D.kDX(3,2,S.daysCalendar$)),D.yG2(2),D.E7m("ngIf",S.withTimepicker)}}function c0(b,N){if(1&b){const S=D.KQA();D.I0R(0,"bs-month-calendar-view",18),D.qCj("onNavigate",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.navigateTo(te))})("onViewMode",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.setViewMode(te))})("onHover",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.monthHoverHandler(te))})("onSelect",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.monthSelectHandler(te))}),D.C$Y()}if(2&b){const S=N.$implicit,X=D.GaO(3);D.eAK("bs-datepicker-multiple",X.multipleCalendars),D.E7m("calendar",S)}}function yf(b,N){if(1&b&&(D.I0R(0,"div",8),D.yuY(1,c0,1,3,"bs-month-calendar-view",17),D.wVc(2,"async"),D.C$Y()),2&b){const S=D.GaO(2);D.yG2(),D.E7m("ngForOf",D.kDX(2,1,S.monthsCalendar))}}function qp(b,N){if(1&b){const S=D.KQA();D.I0R(0,"bs-years-calendar-view",18),D.qCj("onNavigate",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.navigateTo(te))})("onViewMode",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.setViewMode(te))})("onHover",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.yearHoverHandler(te))})("onSelect",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.yearSelectHandler(te))}),D.C$Y()}if(2&b){const S=N.$implicit,X=D.GaO(3);D.eAK("bs-datepicker-multiple",X.multipleCalendars),D.E7m("calendar",S)}}function $c(b,N){if(1&b&&(D.I0R(0,"div",8),D.yuY(1,qp,1,3,"bs-years-calendar-view",17),D.wVc(2,"async"),D.C$Y()),2&b){const S=D.GaO(2);D.yG2(),D.E7m("ngForOf",D.kDX(2,1,S.yearsCalendar))}}function Wh(b,N){1&b&&(D.I0R(0,"div",19)(1,"button",20),D.OEk(2,"Apply"),D.C$Y(),D.I0R(3,"button",21),D.OEk(4,"Cancel"),D.C$Y()())}function __(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",24)(1,"button",25),D.qCj("click",function(){D.usT(S);const te=D.GaO(3);return D.CGJ(te.setToday())}),D.OEk(2),D.C$Y()()}if(2&b){const S=D.GaO(3);D.eAK("today-left","left"===S.todayPos)("today-right","right"===S.todayPos)("today-center","center"===S.todayPos),D.yG2(2),D.cNF(S.todayBtnLbl)}}function du(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",26)(1,"button",25),D.qCj("click",function(){D.usT(S);const te=D.GaO(3);return D.CGJ(te.clearDate())}),D.OEk(2),D.C$Y()()}if(2&b){const S=D.GaO(3);D.eAK("clear-left","left"===S.clearPos)("clear-right","right"===S.clearPos)("clear-center","center"===S.clearPos),D.yG2(2),D.cNF(S.clearBtnLbl)}}function Xc(b,N){if(1&b&&(D.I0R(0,"div",19),D.yuY(1,__,3,7,"div",22)(2,du,3,7,"div",23),D.C$Y()),2&b){const S=D.GaO(2);D.yG2(),D.E7m("ngIf",S.showTodayBtn),D.yG2(),D.E7m("ngIf",S.showClearBtn)}}function Pm(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",27)(1,"bs-custom-date-view",28),D.qCj("onSelect",function(te){D.usT(S);const Me=D.GaO(2);return D.CGJ(Me.setRangeOnCalendar(te))}),D.C$Y()()}if(2&b){const S=D.GaO(2);D.yG2(),D.E7m("selectedRange",S.chosenRange)("ranges",S.customRanges)("customRangeLabel",S.customRangeBtnLbl)}}function u0(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",1)(1,"div",2),D.qCj("@datepickerAnimation.done",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.positionServiceEnable())}),D.I0R(2,"div",3),D.wVc(3,"async"),D.yuY(4,Nd,5,4,"ng-container",4)(5,yf,3,3,"div",5)(6,$c,3,3,"div",5),D.C$Y(),D.yuY(7,Wh,5,0,"div",6)(8,Xc,3,2,"div",6),D.C$Y(),D.yuY(9,Pm,2,3,"div",7),D.C$Y()}if(2&b){const S=D.GaO();D.E7m("ngClass",S.containerClass),D.yG2(),D.E7m("@datepickerAnimation",S.animationState),D.yG2(),D.E7m("ngSwitch",D.kDX(3,9,S.viewMode)),D.yG2(2),D.E7m("ngSwitchCase","day"),D.yG2(),D.E7m("ngSwitchCase","month"),D.yG2(),D.E7m("ngSwitchCase","year"),D.yG2(),D.E7m("ngIf",!1),D.yG2(),D.E7m("ngIf",S.showTodayBtn||S.showClearBtn),D.yG2(),D.E7m("ngIf",S.customRanges&&S.customRanges.length>0)}}const h0=["endTP"];function pl(b,N){if(1&b){const S=D.KQA();D.I0R(0,"bs-days-calendar-view",11),D.qCj("onNavigate",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.navigateTo(te))})("onViewMode",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.setViewMode(te))})("onHover",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.dayHoverHandler(te))})("onHoverWeek",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.weekHoverHandler(te))})("onSelect",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.daySelectHandler(te))}),D.wVc(1,"async"),D.C$Y()}if(2&b){const S=N.$implicit,X=D.GaO(3);D.eAK("bs-datepicker-multiple",X.multipleCalendars),D.E7m("calendar",S)("isDisabled",X.isDatePickerDisabled)("options",D.kDX(1,5,X.options$))}}function Qp(b,N){if(1&b&&D.wR5(0,"timepicker",13,16),2&b){const S=D.GaO(4);D.E7m("disabled",S.isDatePickerDisabled)}}function vp(b,N){if(1&b&&(D.I0R(0,"div",12),D.wR5(1,"timepicker",13,14),D.yuY(3,Qp,2,1,"timepicker",15),D.C$Y()),2&b){const S=D.GaO(3);D.yG2(),D.E7m("disabled",S.isDatePickerDisabled),D.yG2(2),D.E7m("ngIf",S.isRangePicker)}}function d0(b,N){if(1&b&&(D.SAx(0),D.I0R(1,"div",8),D.yuY(2,pl,2,7,"bs-days-calendar-view",9),D.wVc(3,"async"),D.C$Y(),D.yuY(4,vp,4,2,"div",10),D.k70()),2&b){const S=D.GaO(2);D.yG2(2),D.E7m("ngForOf",D.kDX(3,2,S.daysCalendar$)),D.yG2(2),D.E7m("ngIf",S.withTimepicker)}}function kg(b,N){if(1&b){const S=D.KQA();D.I0R(0,"bs-month-calendar-view",18),D.qCj("onNavigate",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.navigateTo(te))})("onViewMode",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.setViewMode(te))})("onHover",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.monthHoverHandler(te))})("onSelect",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.monthSelectHandler(te))}),D.C$Y()}if(2&b){const S=N.$implicit,X=D.GaO(3);D.eAK("bs-datepicker-multiple",X.multipleCalendars),D.E7m("calendar",S)}}function f0(b,N){if(1&b&&(D.I0R(0,"div",8),D.yuY(1,kg,1,3,"bs-month-calendar-view",17),D.wVc(2,"async"),D.C$Y()),2&b){const S=D.GaO(2);D.yG2(),D.E7m("ngForOf",D.kDX(2,1,S.monthsCalendar))}}function Zc(b,N){if(1&b){const S=D.KQA();D.I0R(0,"bs-years-calendar-view",18),D.qCj("onNavigate",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.navigateTo(te))})("onViewMode",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.setViewMode(te))})("onHover",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.yearHoverHandler(te))})("onSelect",function(te){D.usT(S);const Me=D.GaO(3);return D.CGJ(Me.yearSelectHandler(te))}),D.C$Y()}if(2&b){const S=N.$implicit,X=D.GaO(3);D.eAK("bs-datepicker-multiple",X.multipleCalendars),D.E7m("calendar",S)}}function Xf(b,N){if(1&b&&(D.I0R(0,"div",8),D.yuY(1,Zc,1,3,"bs-years-calendar-view",17),D.wVc(2,"async"),D.C$Y()),2&b){const S=D.GaO(2);D.yG2(),D.E7m("ngForOf",D.kDX(2,1,S.yearsCalendar))}}function ud(b,N){1&b&&(D.I0R(0,"div",19)(1,"button",20),D.OEk(2,"Apply"),D.C$Y(),D.I0R(3,"button",21),D.OEk(4,"Cancel"),D.C$Y()())}function Ua(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",24)(1,"button",25),D.qCj("click",function(){D.usT(S);const te=D.GaO(3);return D.CGJ(te.setToday())}),D.OEk(2),D.C$Y()()}if(2&b){const S=D.GaO(3);D.eAK("today-left","left"===S.todayPos)("today-right","right"===S.todayPos)("today-center","center"===S.todayPos),D.yG2(2),D.cNF(S.todayBtnLbl)}}function p0(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",26)(1,"button",25),D.qCj("click",function(){D.usT(S);const te=D.GaO(3);return D.CGJ(te.clearDate())}),D.OEk(2),D.C$Y()()}if(2&b){const S=D.GaO(3);D.eAK("clear-left","left"===S.clearPos)("clear-right","right"===S.clearPos)("clear-center","center"===S.clearPos),D.yG2(2),D.cNF(S.clearBtnLbl)}}function zd(b,N){if(1&b&&(D.I0R(0,"div",19),D.yuY(1,Ua,3,7,"div",22)(2,p0,3,7,"div",23),D.C$Y()),2&b){const S=D.GaO(2);D.yG2(),D.E7m("ngIf",S.showTodayBtn),D.yG2(),D.E7m("ngIf",S.showClearBtn)}}function hd(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",27)(1,"bs-custom-date-view",28),D.qCj("onSelect",function(te){D.usT(S);const Me=D.GaO(2);return D.CGJ(Me.setRangeOnCalendar(te))}),D.C$Y()()}if(2&b){const S=D.GaO(2);D.yG2(),D.E7m("selectedRange",S.chosenRange)("ranges",S.customRanges)("customRangeLabel",S.customRangeBtnLbl)}}function $h(b,N){if(1&b){const S=D.KQA();D.I0R(0,"div",1)(1,"div",2),D.qCj("@datepickerAnimation.done",function(){D.usT(S);const te=D.GaO();return D.CGJ(te.positionServiceEnable())}),D.I0R(2,"div",3),D.wVc(3,"async"),D.yuY(4,d0,5,4,"ng-container",4)(5,f0,3,3,"div",5)(6,Xf,3,3,"div",5),D.C$Y(),D.yuY(7,ud,5,0,"div",6)(8,zd,3,2,"div",6),D.C$Y(),D.yuY(9,hd,2,3,"div",7),D.C$Y()}if(2&b){const S=D.GaO();D.E7m("ngClass",S.containerClass),D.yG2(),D.E7m("@datepickerAnimation",S.animationState),D.yG2(),D.E7m("ngSwitch",D.kDX(3,9,S.viewMode)),D.yG2(2),D.E7m("ngSwitchCase","day"),D.yG2(),D.E7m("ngSwitchCase","month"),D.yG2(),D.E7m("ngSwitchCase","year"),D.yG2(),D.E7m("ngIf",!1),D.yG2(),D.E7m("ngIf",S.showTodayBtn||S.showClearBtn),D.yG2(),D.E7m("ngIf",S.customRanges&&S.customRanges.length>0)}}let Fu=(()=>{class b{constructor(){this.adaptivePosition=!1,this.useUtc=!1,this.isAnimated=!1,this.startView="day",this.returnFocusToInput=!1,this.containerClass="theme-green",this.displayMonths=1,this.showWeekNumbers=!0,this.dateInputFormat="L",this.rangeSeparator=" - ",this.rangeInputFormat="L",this.monthTitle="MMMM",this.yearTitle="YYYY",this.dayLabel="D",this.monthLabel="MMMM",this.yearLabel="YYYY",this.weekNumbers="w",this.showTodayButton=!1,this.showClearButton=!1,this.todayPosition="center",this.clearPosition="right",this.todayButtonLabel="Today",this.clearButtonLabel="Clear",this.customRangeButtonLabel="Custom Range",this.withTimepicker=!1,this.allowedPositions=["top","bottom"],this.keepDatepickerOpened=!1,this.keepDatesOutOfRules=!1}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();const Gm="220ms cubic-bezier(0, 0, 0.2, 1)",Hm=(0,ic.gV)("datepickerAnimation",[(0,ic.K2)("animated-down",(0,ic.wb)({height:"*",overflow:"hidden"})),(0,ic.aK)("* => animated-down",[(0,ic.wb)({height:0,overflow:"hidden"}),(0,ic.Cs)(Gm)]),(0,ic.K2)("animated-up",(0,ic.wb)({height:"*",overflow:"hidden"})),(0,ic.aK)("* => animated-up",[(0,ic.wb)({height:"*",overflow:"hidden"}),(0,ic.Cs)(Gm)]),(0,ic.aK)("* => unanimated",(0,ic.Cs)("0s"))]);class Vm{constructor(){this.containerClass="",this.customRanges=[],this.chosenRange=[],this._daysCalendarSub=new Lu.wH,this.selectedTimeSub=new Lu.wH}set minDate(N){this._effects?.setMinDate(N)}set maxDate(N){this._effects?.setMaxDate(N)}set daysDisabled(N){this._effects?.setDaysDisabled(N)}set datesDisabled(N){this._effects?.setDatesDisabled(N)}set datesEnabled(N){this._effects?.setDatesEnabled(N)}set isDisabled(N){this._effects?.setDisabled(N)}set dateCustomClasses(N){this._effects?.setDateCustomClasses(N)}set dateTooltipTexts(N){this._effects?.setDateTooltipTexts(N)}set daysCalendar$(N){this._daysCalendar$=N,this._daysCalendarSub.unsubscribe(),this._daysCalendarSub.add(this._daysCalendar$.subscribe(S=>{this.multipleCalendars=!!S&&S.length>1}))}get daysCalendar$(){return this._daysCalendar$}setViewMode(N){}navigateTo(N){}dayHoverHandler(N){}weekHoverHandler(N){}monthHoverHandler(N){}yearHoverHandler(N){}timeSelectHandler(N,S){}daySelectHandler(N){}monthSelectHandler(N){}yearSelectHandler(N){}setRangeOnCalendar(N){}setToday(){}clearDate(){}_stopPropagation(N){N.stopPropagation()}}let Tl=(()=>{class b{static#e=this.CALCULATE="[datepicker] calculate dates matrix";static#t=this.FORMAT="[datepicker] format datepicker values";static#i=this.FLAG="[datepicker] set flags";static#n=this.SELECT="[datepicker] select date";static#r=this.NAVIGATE_OFFSET="[datepicker] shift view date";static#s=this.NAVIGATE_TO="[datepicker] change view date";static#a=this.SET_OPTIONS="[datepicker] update render options";static#o=this.HOVER="[datepicker] hover date";static#l=this.CHANGE_VIEWMODE="[datepicker] switch view mode";static#c=this.SET_MIN_DATE="[datepicker] set min date";static#u=this.SET_MAX_DATE="[datepicker] set max date";static#h=this.SET_DAYSDISABLED="[datepicker] set days disabled";static#d=this.SET_DATESDISABLED="[datepicker] set dates disabled";static#f=this.SET_DATESENABLED="[datepicker] set dates enabled";static#p=this.SET_IS_DISABLED="[datepicker] set is disabled";static#m=this.SET_DATE_CUSTOM_CLASSES="[datepicker] set date custom classes";static#g=this.SET_DATE_TOOLTIP_TEXTS="[datepicker] set date tooltip texts";static#v=this.SET_LOCALE="[datepicker] set datepicker locale";static#_=this.SELECT_TIME="[datepicker] select time";static#y=this.SELECT_RANGE="[daterangepicker] select dates range";calculate(){return{type:b.CALCULATE}}format(){return{type:b.FORMAT}}flag(){return{type:b.FLAG}}select(S){return{type:b.SELECT,payload:S}}selectTime(S,X){return{type:b.SELECT_TIME,payload:{date:S,index:X}}}changeViewMode(S){return{type:b.CHANGE_VIEWMODE,payload:S}}navigateTo(S){return{type:b.NAVIGATE_TO,payload:S}}navigateStep(S){return{type:b.NAVIGATE_OFFSET,payload:S}}setOptions(S){return{type:b.SET_OPTIONS,payload:S}}selectRange(S){return{type:b.SELECT_RANGE,payload:S}}hoverDay(S){return{type:b.HOVER,payload:S.isHovered?S.cell.date:null}}minDate(S){return{type:b.SET_MIN_DATE,payload:S}}maxDate(S){return{type:b.SET_MAX_DATE,payload:S}}daysDisabled(S){return{type:b.SET_DAYSDISABLED,payload:S}}datesDisabled(S){return{type:b.SET_DATESDISABLED,payload:S}}datesEnabled(S){return{type:b.SET_DATESENABLED,payload:S}}isDisabled(S){return{type:b.SET_IS_DISABLED,payload:S}}setDateCustomClasses(S){return{type:b.SET_DATE_CUSTOM_CLASSES,payload:S}}setDateTooltipTexts(S){return{type:b.SET_DATE_TOOLTIP_TEXTS,payload:S}}setLocale(S){return{type:b.SET_LOCALE,payload:S}}static#x=this.\u0275fac=function(X){return new(X||b)};static#b=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})(),em=(()=>{class b{constructor(){this._defaultLocale="en",this._locale=new wh.g(this._defaultLocale),this._localeChange=this._locale.asObservable()}get locale(){return this._locale}get localeChange(){return this._localeChange}get currentLocale(){return this._locale.getValue()}use(S){S!==this.currentLocale&&this._locale.next(S)}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})(),Ic=(()=>{class b{constructor(S,X){this._actions=S,this._localeService=X,this._subs=[]}init(S){return this._store=S,this}setValue(S){this._store?.dispatch(this._actions.select(S))}setRangeValue(S){this._store?.dispatch(this._actions.selectRange(S))}setMinDate(S){return this._store?.dispatch(this._actions.minDate(S)),this}setMaxDate(S){return this._store?.dispatch(this._actions.maxDate(S)),this}setDaysDisabled(S){return this._store?.dispatch(this._actions.daysDisabled(S)),this}setDatesDisabled(S){return this._store?.dispatch(this._actions.datesDisabled(S)),this}setDatesEnabled(S){return this._store?.dispatch(this._actions.datesEnabled(S)),this}setDisabled(S){return this._store?.dispatch(this._actions.isDisabled(S)),this}setDateCustomClasses(S){return this._store?.dispatch(this._actions.setDateCustomClasses(S)),this}setDateTooltipTexts(S){return this._store?.dispatch(this._actions.setDateTooltipTexts(S)),this}setOptions(S){const X=Object.assign({locale:this._localeService.currentLocale},S);return this._store?.dispatch(this._actions.setOptions(X)),this}setBindings(S){return this._store?(S.selectedTime=this._store.select(X=>X.selectedTime).pipe((0,mt.I)(X=>!!X)),S.daysCalendar$=this._store.select(X=>X.flaggedMonths).pipe((0,mt.I)(X=>!!X)),S.monthsCalendar=this._store.select(X=>X.flaggedMonthsCalendar).pipe((0,mt.I)(X=>!!X)),S.yearsCalendar=this._store.select(X=>X.yearsCalendarFlagged).pipe((0,mt.I)(X=>!!X)),S.viewMode=this._store.select(X=>X.view?.mode),S.options$=(0,hu.E)([this._store.select(X=>X.showWeekNumbers),this._store.select(X=>X.displayMonths)]).pipe((0,Ze.k)(X=>({showWeekNumbers:X[0],displayMonths:X[1]}))),this):this}setEventHandlers(S){return S.setViewMode=X=>{this._store?.dispatch(this._actions.changeViewMode(X))},S.navigateTo=X=>{this._store?.dispatch(this._actions.navigateStep(X.step))},S.dayHoverHandler=X=>{const te=X.cell;te.isOtherMonth||te.isDisabled||(this._store?.dispatch(this._actions.hoverDay(X)),te.isHovered=X.isHovered)},S.monthHoverHandler=X=>{X.cell.isHovered=X.isHovered},S.yearHoverHandler=X=>{X.cell.isHovered=X.isHovered},this}registerDatepickerSideEffects(){return this._store?(this._subs.push(this._store.select(S=>S.view).subscribe(()=>{this._store?.dispatch(this._actions.calculate())})),this._subs.push(this._store.select(S=>S.monthsModel).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.format()))),this._subs.push(this._store.select(S=>S.formattedMonths).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.selectedDate).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.selectedRange).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.monthsCalendar).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.yearsCalendarModel).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.hoveredDate).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.dateCustomClasses).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.dateTooltipTexts).pipe((0,mt.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._localeService.localeChange.subscribe(S=>this._store?.dispatch(this._actions.setLocale(S)))),this):this}destroy(){for(const S of this._subs)S.unsubscribe()}static#e=this.\u0275fac=function(X){return new(X||b)(D.CoB(Tl),D.CoB(em))};static#t=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})();const bf={date:new Date,mode:"day"},Lo=Object.assign(new Fu,{locale:"en",view:bf,selectedRange:[],selectedTime:[],monthViewOptions:{width:7,height:6}});function tm(b,N,S){const X=N&&Uo(J(b,"month"),N,"day"),te=S&&Ya(K(b,"month"),S,"day");return X||te||!1}function yp(b,N,S){const X=N&&Uo(J(b,"year"),N,"day"),te=S&&Ya(K(b,"year"),S,"day");return X||te||!1}function wf(b,N,S){return!!(N&&Et(N)&&N.length)&&(S&&"year"===S&&!N[0].getDate()?N.some(X=>fl(b,X,"year")):N.some(X=>fl(b,X,"date")))}function dd(b,N,S){return!!(N&&Et(N)&&N.length)&&!N.some(X=>fl(b,X,S||"date"))}function im(b,N=0){const S=b&&b.yearsCalendarModel&&b.yearsCalendarModel[N];return S?.years[0]&&S.years[0][0]&&S.years[0][0].date}function b0(b,N){return!b||!N||!b.length&&!b[0].value||b.forEach(S=>(!S||!S.value||S.value instanceof Date||!(S.value instanceof Array&&S.value.length)||(S.value=kv(S.value,N)),b)),b}function Sg(b,N){return!b||!N||b instanceof Array&&!b.length||b instanceof Date?b:kv(b,N)}function kv(b,N){return b instanceof Array?b.map(X=>X&&(Ya(X,N,"date")&&(X=N),X)):b}function w0(b){return b&&C0(b)}function Tv(b){return b?.length&&b.map(N=>N&&C0(N)),b}function C0(b){const N=new Date;return b.setMilliseconds(N.getMilliseconds()),b.setSeconds(N.getSeconds()),b.setMinutes(N.getMinutes()),b.setHours(N.getHours()),b}function xp(b,N){let S=b.initialDate;const X=new Array(b.height);for(let te=0;te<b.height;te++){X[te]=new Array(b.width);for(let Me=0;Me<b.width;Me++)X[te][Me]=N(S),S=Wt(S,b.shift)}return X}function fd(b,N){const S=function an(b){return Fr(b.getFullYear(),b.getMonth(),1,b.getHours(),b.getMinutes(),b.getSeconds())}(b),X=function x0(b,N){if(function zs(b,N){return b.getDay()===Number(N)}(b,N.firstDayOfWeek))return b;const X=function Ah(b,N){const S=Number(N);if(isNaN(S))return 0;if(0===S)return b;const X=b-S%7;return X<0?X+7:X}(Un(b),N.firstDayOfWeek);return Wt(b,{day:-X})}(S,N);return{daysMatrix:xp({width:N.width||0,height:N.height||0,initialDate:X,shift:{day:1}},Lt=>Lt),month:S}}function E0(b,N,S){return b.map(X=>X[0]?oo(X[0],N,S):"")}function Ag(b){const N=Xa(b),S=N.weekdaysShort(),X=N.firstDayOfWeek();return[...S.slice(X),...S.slice(0,X)]}function Bu(b,N){return!N||b>=N}const x_=4,T0=3,b_={month:1};function Um(b,N){const S=K(b,"year");return{months:xp({width:T0,height:x_,initialDate:S,shift:b_},Me=>({date:Me,label:oo(Me,N.monthLabel,N.locale)})),monthTitle:"",yearTitle:oo(b,N.yearTitle,N.locale),hideRightArrow:!1,hideLeftArrow:!1,disableRightArrow:!1,disableLeftArrow:!1}}const jm=4,nm=4,rm=jm*nm,Zf=-1*(Math.floor(rm/2)-1),bp={year:1};function A0(b,N,S){const X=function w_(b,N){return N&&b.getFullYear()>=N.getFullYear()&&b.getFullYear()<N.getFullYear()+rm?N:Wt(b,{year:Zf})}(b,S),Me=xp({width:nm,height:jm,initialDate:X,shift:bp},sn=>({date:sn,label:oo(sn,N.yearLabel,N.locale)})),Lt=function C_(b,N){return`${oo(b[0][0].date,N.yearTitle,N.locale)} - ${oo(b[jm-1][nm-1].date,N.yearTitle,N.locale)}`}(Me,N);return{years:Me,monthTitle:"",yearTitle:Lt,hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}function D0(b,N){!b||!isNaN(b.getTime())||(b.setHours(N.getHours()),b.setMinutes(N.getMinutes()),b.setSeconds(N.getSeconds()),b.setMilliseconds(N.getMilliseconds()))}function Cp(b=Lo,N){switch(N.type){case Tl.CALCULATE:return function I0(b){if(!b.view)return b;let N;N=b.displayOneMonthRange&&O0(b.view.date,b.minDate,b.maxDate)?1:b.displayMonths||1;let S=b.view.date;if("day"===b.view.mode&&b.monthViewOptions){b.showPreviousMonth&&b.selectedRange&&0===b.selectedRange.length&&(S=Wt(S,{month:-1})),b.monthViewOptions.firstDayOfWeek=Xa(b.locale).firstDayOfWeek();let X=new Array(N);for(let te=0;te<N;te++)X[te]=fd(S,b.monthViewOptions),S=Wt(S,{month:1});if(b.preventChangeToNextMonth&&b.flaggedMonths&&b.hoveredDate){const te=fd(b.view.date,b.monthViewOptions);b.flaggedMonths.length&&b.flaggedMonths[1].month.getMonth()===te.month.getMonth()&&(X=b.flaggedMonths.map(Me=>b.monthViewOptions?fd(Me.month,b.monthViewOptions):null).filter(Me=>null!==Me))}return Object.assign({},b,{monthsModel:X})}if("month"===b.view.mode){const X=new Array(N);for(let te=0;te<N;te++)X[te]=Um(S,Io(b)),S=Wt(S,{year:1});return Object.assign({},b,{monthsCalendar:X})}if("year"===b.view.mode){const X=new Array(N);for(let te=0;te<N;te++)X[te]=A0(S,Io(b),"year"===b.minMode?im(b,te):void 0),S=Wt(S,{year:rm});return Object.assign({},b,{yearsCalendarModel:X})}return b}(b);case Tl.FORMAT:return function M0(b){if(!b.view)return b;if("day"===b.view.mode&&b.monthsModel){const X=b.monthsModel.map((te,Me)=>function Sv(b,N,S){return{month:b.month,monthTitle:oo(b.month,N.monthTitle,N.locale),yearTitle:oo(b.month,N.yearTitle,N.locale),weekNumbers:E0(b.daysMatrix,N.weekNumbers,N.locale),weekdays:Ag(N.locale),weeks:b.daysMatrix.map((X,te)=>({days:X.map((Me,Lt)=>({date:Me,label:oo(Me,N.dayLabel,N.locale),monthIndex:S,weekIndex:te,dayIndex:Lt}))})),hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}(te,Io(b),Me));return Object.assign({},b,{formattedMonths:X})}const N=b.displayMonths||1;let S=b.view.date;if("month"===b.view.mode){const X=new Array(N);for(let te=0;te<N;te++)X[te]=Um(S,Io(b)),S=Wt(S,{year:1});return Object.assign({},b,{monthsCalendar:X})}if("year"===b.view.mode){const X=new Array(N);for(let te=0;te<N;te++)X[te]=A0(S,Io(b)),S=Wt(S,{year:16});return Object.assign({},b,{yearsCalendarModel:X})}return b}(b);case Tl.FLAG:return function E_(b){if(!b.view)return b;const N=O0(b.view.date,b.minDate,b.maxDate)?1:b.displayMonths;if(b.formattedMonths&&"day"===b.view.mode){const S=b.formattedMonths.map((X,te)=>function k0(b,N){return b.weeks.forEach(S=>{S.days.forEach((X,te)=>{const Me=!Vs(X.date,b.month),Lt=!Me&&Ds(X.date,N.hoveredDate),sn=!Me&&N.selectedRange&&Ds(X.date,N.selectedRange[0]),dr=!Me&&N.selectedRange&&Ds(X.date,N.selectedRange[1]),Oa=!Me&&Ds(X.date,N.selectedDate)||sn||dr,co=!Me&&N.selectedRange&&function Cf(b,N,S){return!!(b&&N&&N[0])&&(N[1]?b>N[0]&&b<=N[1]:!!S&&b>N[0]&&b<=S)}(X.date,N.selectedRange,N.hoveredDate),el=N.isDisabled||Uo(X.date,N.minDate,"day")||Ya(X.date,N.maxDate,"day")||function ya(b,N){return!(typeof N>"u"||!N||!N.length)&&N.some(S=>S===b.getDay())}(X.date,N.daysDisabled)||wf(X.date,N.datesDisabled)||dd(X.date,N.datesEnabled),kp=!Me&&Ds(X.date,new Date),Dv=N.dateCustomClasses&&N.dateCustomClasses.map(Zh=>Ds(X.date,Zh.date)?Zh.classes:[]).reduce((Zh,Rg)=>Zh.concat(Rg),[]).join(" ")||"",eg=N.dateTooltipTexts&&N.dateTooltipTexts.map(Zh=>Ds(X.date,Zh.date)?Zh.tooltipText:"").reduce((Zh,Rg)=>(Zh.push(Rg),Zh),[]).join(" ")||"",Xh=Object.assign({},X,{isOtherMonth:Me,isHovered:Lt,isSelected:Oa,isSelectionStart:sn,isSelectionEnd:dr,isInRange:co,isDisabled:el,isToday:kp,customClasses:Dv,tooltipText:eg});(X.isOtherMonth!==Xh.isOtherMonth||X.isHovered!==Xh.isHovered||X.isSelected!==Xh.isSelected||X.isSelectionStart!==Xh.isSelectionStart||X.isSelectionEnd!==Xh.isSelectionEnd||X.isDisabled!==Xh.isDisabled||X.isInRange!==Xh.isInRange||X.customClasses!==Xh.customClasses||X.tooltipText!==Xh.tooltipText)&&(S.days[te]=Xh)})}),b.hideLeftArrow=N.isDisabled||!!N.monthIndex&&N.monthIndex>0&&N.monthIndex!==N.displayMonths,b.hideRightArrow=N.isDisabled||(!!N.monthIndex||0===N.monthIndex)&&!!N.displayMonths&&N.monthIndex<N.displayMonths&&N.monthIndex+1!==N.displayMonths,b.disableLeftArrow=tm(Wt(b.month,{month:-1}),N.minDate,N.maxDate),b.disableRightArrow=tm(Wt(b.month,{month:1}),N.minDate,N.maxDate),b}(X,{isDisabled:b.isDisabled,minDate:b.minDate,maxDate:b.maxDate,daysDisabled:b.daysDisabled,datesDisabled:b.datesDisabled,datesEnabled:b.datesEnabled,hoveredDate:b.hoveredDate,selectedDate:b.selectedDate,selectedRange:b.selectedRange,displayMonths:N,dateCustomClasses:b.dateCustomClasses,dateTooltipTexts:b.dateTooltipTexts,monthIndex:te}));return Object.assign({},b,{flaggedMonths:S})}if("month"===b.view.mode&&b.monthsCalendar){const S=b.monthsCalendar.map((X,te)=>function S0(b,N){return b.months.forEach((S,X)=>{S.forEach((te,Me)=>{let Lt;const sn=Vs(te.date,N.hoveredMonth),dr=N.isDisabled||wf(te.date,N.datesDisabled)||dd(te.date,N.datesEnabled,"month")||tm(te.date,N.minDate,N.maxDate);!N.selectedDate&&N.selectedRange?(Lt=Vs(te.date,N.selectedRange[0]),Lt||(Lt=Vs(te.date,N.selectedRange[1]))):Lt=Vs(te.date,N.selectedDate);const Oa=Object.assign(te,{isHovered:sn,isDisabled:dr,isSelected:Lt});(te.isHovered!==Oa.isHovered||te.isDisabled!==Oa.isDisabled||te.isSelected!==Oa.isSelected)&&(b.months[X][Me]=Oa)})}),b.hideLeftArrow=!!N.monthIndex&&N.monthIndex>0&&N.monthIndex!==N.displayMonths,b.hideRightArrow=(!!N.monthIndex||0===N.monthIndex)&&(!!N.displayMonths||0===N.displayMonths)&&N.monthIndex<N.displayMonths&&N.monthIndex+1!==N.displayMonths,b.disableLeftArrow=yp(Wt(b.months[0][0].date,{year:-1}),N.minDate,N.maxDate),b.disableRightArrow=yp(Wt(b.months[0][0].date,{year:1}),N.minDate,N.maxDate),b}(X,{isDisabled:b.isDisabled,minDate:b.minDate,maxDate:b.maxDate,hoveredMonth:b.hoveredMonth,selectedDate:b.selectedDate,datesDisabled:b.datesDisabled,datesEnabled:b.datesEnabled,selectedRange:b.selectedRange,displayMonths:N,monthIndex:te}));return Object.assign({},b,{flaggedMonthsCalendar:S})}if("year"===b.view.mode&&b.yearsCalendarModel){const S=b.yearsCalendarModel.map((X,te)=>function wp(b,N){b.years.forEach((te,Me)=>{te.forEach((Lt,sn)=>{let dr;const Oa=Fs(Lt.date,N.hoveredYear),co=N.isDisabled||wf(Lt.date,N.datesDisabled,"year")||dd(Lt.date,N.datesEnabled,"year")||yp(Lt.date,N.minDate,N.maxDate);!N.selectedDate&&N.selectedRange?(dr=Fs(Lt.date,N.selectedRange[0]),dr||(dr=Fs(Lt.date,N.selectedRange[1]))):dr=Fs(Lt.date,N.selectedDate);const el=Object.assign(Lt,{isHovered:Oa,isDisabled:co,isSelected:dr});(Lt.isHovered!==el.isHovered||Lt.isDisabled!==el.isDisabled||Lt.isSelected!==el.isSelected)&&(b.years[Me][sn]=el)})}),b.hideLeftArrow=!!N.yearIndex&&N.yearIndex>0&&N.yearIndex!==N.displayMonths,b.hideRightArrow=!!N.yearIndex&&!!N.displayMonths&&N.yearIndex<N.displayMonths&&N.yearIndex+1!==N.displayMonths,b.disableLeftArrow=yp(Wt(b.years[0][0].date,{year:-1}),N.minDate,N.maxDate);const S=b.years.length-1;return b.disableRightArrow=yp(Wt(b.years[S][b.years[S].length-1].date,{year:1}),N.minDate,N.maxDate),b}(X,{isDisabled:b.isDisabled,minDate:b.minDate,maxDate:b.maxDate,hoveredYear:b.hoveredYear,selectedDate:b.selectedDate,datesDisabled:b.datesDisabled,datesEnabled:b.datesEnabled,selectedRange:b.selectedRange,displayMonths:N,yearIndex:te}));return Object.assign({},b,{yearsCalendarFlagged:S})}return b}(b);case Tl.NAVIGATE_OFFSET:return function Ep(b,N){if(!b.view)return b;const S=function Ty(b,N){if(b.view){if("year"===b.view.mode&&"year"===b.minMode){const S=im(b,0);if(S){const X=Wt(S,{year:-Zf});return Wt(X,N.payload)}}return Wt(K(b.view.date,"month"),N.payload)}}(b,N);if(!S)return b;return Object.assign({},b,{view:{mode:b.view.mode,date:S}})}(b,N);case Tl.NAVIGATE_TO:{const S=N.payload;if(!b.view||!S.unit)return b;const X=function We(b,N){return Fr(Jt(b.getFullYear(),N.year),Jt(b.getMonth(),N.month),1,Jt(b.getHours(),N.hour),Jt(b.getMinutes(),N.minute),Jt(b.getSeconds(),N.seconds),Jt(b.getMilliseconds(),N.milliseconds))}(b.view.date,S.unit);let te,Me;return Bu(S.viewMode,b.minMode)?(Me=S.viewMode,te={view:{date:X,mode:Me}}):(Me=b.view.mode,te={selectedDate:X,view:{date:X,mode:Me}}),Object.assign({},b,te)}case Tl.CHANGE_VIEWMODE:return Bu(N.payload,b.minMode)&&b.view?Object.assign({},b,{view:{date:b.view.date,mode:N.payload}}):b;case Tl.HOVER:return Object.assign({},b,{hoveredDate:N.payload});case Tl.SELECT:{if(!b.view)return b;const S={selectedDate:N.payload,view:b.view};if(Array.isArray(b.selectedTime)){const Lt=b.selectedTime[0];S.selectedDate&&Lt&&D0(S.selectedDate,Lt)}const X=b.view.mode,Me=sm(N.payload||b.view.date,b.minDate,b.maxDate);return S.view={mode:X,date:Me},Object.assign({},b,S)}case Tl.SELECT_TIME:{const{date:S,index:X}=N.payload,te=b.selectedTime?[...b.selectedTime]:[];return te[X]=S,Object.assign({},b,{selectedTime:te})}case Tl.SET_OPTIONS:{if(!b.view)return b;const S=N.payload,X=S.minMode?S.minMode:b.view.mode,Me=sm(_t(S.value)&&S.value||Et(S.value)&&_t(S.value[0])&&S.value[0]||b.view.date,S.minDate,S.maxDate);return S.view={mode:X,date:Me},S.value&&(Et(S.value)&&(S.selectedRange=S.value,S.selectedTime=S.value.map(Lt=>Lt)),S.value instanceof Date&&(S.selectedDate=S.value,S.selectedTime=[S.value])),Object.assign({},b,S)}case Tl.SELECT_RANGE:{if(!b.view)return b;const S={selectedRange:N.payload,view:b.view};S.selectedRange?.forEach((Lt,sn)=>{if(Array.isArray(b.selectedTime)){const dr=b.selectedTime[sn];dr&&D0(Lt,dr)}});const X=b.view.mode,Me=sm(N.payload&&N.payload[0]||b.view.date,b.minDate,b.maxDate);return S.view={mode:X,date:Me},Object.assign({},b,S)}case Tl.SET_MIN_DATE:return Object.assign({},b,{minDate:N.payload});case Tl.SET_MAX_DATE:return Object.assign({},b,{maxDate:N.payload});case Tl.SET_IS_DISABLED:return Object.assign({},b,{isDisabled:N.payload});case Tl.SET_DATE_CUSTOM_CLASSES:return Object.assign({},b,{dateCustomClasses:N.payload});case Tl.SET_DATE_TOOLTIP_TEXTS:return Object.assign({},b,{dateTooltipTexts:N.payload});default:return b}}function Io(b){return{locale:b.locale,monthTitle:b.monthTitle,yearTitle:b.yearTitle,dayLabel:b.dayLabel,monthLabel:b.monthLabel,yearLabel:b.yearLabel,weekNumbers:b.weekNumbers}}function sm(b,N,S){const X=Array.isArray(b)?b[0]:b;return N&&Ya(N,X,"day")?N:S&&Uo(S,X,"day")?S:X}function O0(b,N,S){return!(!S||!fl(S,b,"day"))||N&&S&&N.getMonth()===S.getMonth()}let Yd=(()=>{class b extends Sd{constructor(){const S=new wh.g({type:"[datepicker] dispatcher init"});super(S,Cp,new Td(Lo,S,Cp))}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})(),Wm=(()=>{class b{constructor(){this.onSelect=new D._w7}selectFromRanges(S){this.onSelect.emit(S)}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-custom-date-view"]],inputs:{ranges:"ranges",selectedRange:"selectedRange",customRangeLabel:"customRangeLabel"},outputs:{onSelect:"onSelect"},decls:2,vars:1,consts:[[1,"bs-datepicker-predefined-btns"],["type","button","class","btn",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"]],template:function(X,te){1&X&&(D.I0R(0,"div",0),D.yuY(1,Th,2,3,"button",1),D.C$Y()),2&X&&(D.yG2(),D.E7m("ngForOf",te.ranges))},dependencies:[Ur.ay],encapsulation:2,changeDetection:0})}return b})();var Gd=function(b){return b[b.UP=0]="UP",b[b.DOWN=1]="DOWN",b}(Gd||{});let qf,Dg=(()=>{class b{static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-current-date"]],inputs:{title:"title"},decls:3,vars:1,consts:[[1,"current-timedate"]],template:function(X,te){1&X&&(D.I0R(0,"div",0)(1,"span"),D.OEk(2),D.C$Y()()),2&X&&(D.yG2(2),D.cNF(te.title))},encapsulation:2})}return b})(),$m=(()=>{class b{constructor(){this.ampm="ok",this.hours=0,this.minutes=0}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-timepicker"]],decls:16,vars:3,consts:[[1,"bs-timepicker-container"],[1,"bs-timepicker-controls"],["type","button",1,"bs-decrease"],["type","text","placeholder","00",3,"value"],["type","button",1,"bs-increase"],["type","button",1,"switch-time-format"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==","alt",""]],template:function(X,te){1&X&&(D.I0R(0,"div",0)(1,"div",1)(2,"button",2),D.OEk(3,"-"),D.C$Y(),D.wR5(4,"input",3),D.I0R(5,"button",4),D.OEk(6,"+"),D.C$Y()(),D.I0R(7,"div",1)(8,"button",2),D.OEk(9,"-"),D.C$Y(),D.wR5(10,"input",3),D.I0R(11,"button",4),D.OEk(12,"+"),D.C$Y()(),D.I0R(13,"button",5),D.OEk(14),D.wR5(15,"img",6),D.C$Y()()),2&X&&(D.yG2(4),D.E7m("value",te.hours),D.yG2(6),D.E7m("value",te.minutes),D.yG2(4),D.oRS("",te.ampm," "))},encapsulation:2})}return b})(),am=(()=>{class b{static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-calendar-layout"]],ngContentSelectors:jh,decls:6,vars:2,consts:[["title","hey there",4,"ngIf"],[1,"bs-datepicker-head"],[1,"bs-datepicker-body"],[4,"ngIf"],["title","hey there"]],template:function(X,te){1&X&&(D.kPM(da),D.yuY(0,Xo,1,0,"bs-current-date",0),D.I0R(1,"div",1),D._Xx(2),D.C$Y(),D.I0R(3,"div",2),D._Xx(4,1),D.C$Y(),D.yuY(5,Xp,1,0,"bs-timepicker",3)),2&X&&(D.E7m("ngIf",!1),D.yG2(5),D.E7m("ngIf",!1))},dependencies:[Ur.u_,Dg,$m],encapsulation:2})}return b})(),R0=(()=>{class b{constructor(S,X,te){this._config=S,this._elRef=X,this._renderer=te,this.day={date:new Date,label:""}}ngOnInit(){this.day?.isToday&&this._config&&this._config.customTodayClass&&this._renderer.addClass(this._elRef.nativeElement,this._config.customTodayClass),"string"==typeof this.day?.customClasses&&this.day?.customClasses.split(" ").filter(S=>S).forEach(S=>{this._renderer.addClass(this._elRef.nativeElement,S)})}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(Fu),D.GI1(D.GMv),D.GI1(D.q87))};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["","bsDatepickerDayDecorator",""]],hostVars:16,hostBindings:function(X,te){2&X&&D.eAK("disabled",te.day.isDisabled)("is-highlighted",te.day.isHovered)("is-other-month",te.day.isOtherMonth)("is-active-other-month",te.day.isOtherMonthHovered)("in-range",te.day.isInRange)("select-start",te.day.isSelectionStart)("select-end",te.day.isSelectionEnd)("selected",te.day.isSelected)},inputs:{day:"day"},attrs:bv,decls:1,vars:1,template:function(X,te){1&X&&D.OEk(0),2&X&&D.cNF(te.day&&te.day.label||"")},encapsulation:2,changeDetection:0})}return b})(),Xm=(()=>{class b{constructor(){this.isDisabled=!1,this.onNavigate=new D._w7,this.onViewMode=new D._w7}navTo(S){this.onNavigate.emit(S?Gd.DOWN:Gd.UP)}view(S){this.isDisabled||this.onViewMode.emit(S)}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-datepicker-navigation-view"]],inputs:{calendar:"calendar",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode"},decls:12,vars:9,consts:[["type","button",1,"previous",3,"disabled","click"],[4,"ngIf"],["type","button",1,"current",3,"disabled","click"],["type","button",1,"next",3,"disabled","click"]],template:function(X,te){1&X&&(D.I0R(0,"button",0),D.qCj("click",function(){return te.navTo(!0)}),D.I0R(1,"span"),D.OEk(2,"\u2039"),D.C$Y()(),D.yuY(3,vf,5,2,"ng-container",1),D.OEk(4," \u200b "),D.I0R(5,"button",2),D.qCj("click",function(){return te.view("year")}),D.I0R(6,"span"),D.OEk(7),D.C$Y()(),D.OEk(8," \u200b "),D.I0R(9,"button",3),D.qCj("click",function(){return te.navTo(!1)}),D.I0R(10,"span"),D.OEk(11,"\u203a"),D.C$Y()()),2&X&&(D.m4B("visibility",te.calendar.hideLeftArrow?"hidden":"visible"),D.E7m("disabled",te.calendar.disableLeftArrow),D.yG2(3),D.E7m("ngIf",te.calendar&&te.calendar.monthTitle),D.yG2(2),D.E7m("disabled",te.isDisabled),D.yG2(2),D.cNF(te.calendar.yearTitle),D.yG2(2),D.m4B("visibility",te.calendar.hideRightArrow?"hidden":"visible"),D.E7m("disabled",te.calendar.disableRightArrow))},dependencies:[Ur.u_],encapsulation:2,changeDetection:0})}return b})(),Hd=(()=>{class b{constructor(S){this._config=S,this.onNavigate=new D._w7,this.onViewMode=new D._w7,this.onSelect=new D._w7,this.onHover=new D._w7,this.onHoverWeek=new D._w7,this.isiOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._config.dateTooltipTexts&&this._config.dateTooltipTexts.length>0&&(this.isShowTooltip=!0)}navigateTo(S){this.onNavigate.emit({step:{month:Gd.DOWN===S?-1:1}})}changeViewMode(S){this.onViewMode.emit(S)}selectDay(S){this.onSelect.emit(S)}selectWeek(S){if(!this._config.selectWeek&&!this._config.selectWeekDateRange||0===S.days.length)return;if(this._config.selectWeek&&S.days[0]&&!S.days[0].isDisabled&&this._config.selectFromOtherMonth)return void this.onSelect.emit(S.days[0]);const X=S.days.find(te=>(this._config.selectFromOtherMonth||!te.isOtherMonth)&&!te.isDisabled);if(this.onSelect.emit(X),this._config.selectWeekDateRange){const Me=S.days.slice(0).reverse().find(Lt=>(this._config.selectFromOtherMonth||!Lt.isOtherMonth)&&!Lt.isDisabled);this.onSelect.emit(Me)}}weekHoverHandler(S,X){(this._config.selectWeek||this._config.selectWeekDateRange)&&S.days.find(Me=>(this._config.selectFromOtherMonth||!Me.isOtherMonth)&&!Me.isDisabled)&&(S.isHovered=X,this.isWeekHovered=X,this.onHoverWeek.emit(S))}hoverDay(S,X){this._config.selectFromOtherMonth&&S.isOtherMonth&&(S.isOtherMonthHovered=X),this._config.dateTooltipTexts&&(S.tooltipText="",this._config.dateTooltipTexts.forEach(te=>{Ds(te.date,S.date)&&(S.tooltipText=te.tooltipText)})),this.onHover.emit({cell:S,isHovered:X})}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(Fu))};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-days-calendar-view"]],inputs:{calendar:"calendar",options:"options",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover",onHoverWeek:"onHoverWeek"},decls:9,vars:5,consts:[[3,"calendar","isDisabled","onNavigate","onViewMode"],["role","grid",1,"days","weeks"],[4,"ngIf"],["aria-label","weekday",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["aria-label","weekday"],["class","week",3,"active-week",4,"ngIf"],["role","gridcell",4,"ngFor","ngForOf"],[1,"week"],[3,"click",4,"ngIf"],[3,"click","mouseenter","mouseleave",4,"ngIf"],[3,"click"],[3,"click","mouseenter","mouseleave"],["role","gridcell"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click"]],template:function(X,te){1&X&&(D.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),D.qCj("onNavigate",function(Lt){return te.navigateTo(Lt)})("onViewMode",function(Lt){return te.changeViewMode(Lt)}),D.C$Y(),D.I0R(2,"table",1)(3,"thead")(4,"tr"),D.yuY(5,Om,1,0,"th",2)(6,bg,2,1,"th",3),D.C$Y()(),D.I0R(7,"tbody"),D.yuY(8,As,3,2,"tr",4),D.C$Y()()()),2&X&&(D.yG2(),D.E7m("calendar",te.calendar)("isDisabled",!!te.isDisabled),D.yG2(4),D.E7m("ngIf",te.options&&te.options.showWeekNumbers),D.yG2(),D.E7m("ngForOf",te.calendar.weekdays),D.yG2(2),D.E7m("ngForOf",te.calendar.weeks))},dependencies:[Ur.ay,Ur.u_,El.uM,am,R0,Xm],encapsulation:2})}return b})(),Zm=(()=>{class b{constructor(){this.onNavigate=new D._w7,this.onViewMode=new D._w7,this.onSelect=new D._w7,this.onHover=new D._w7}navigateTo(S){this.onNavigate.emit({step:{year:Gd.DOWN===S?-1:1}})}viewMonth(S){this.onSelect.emit(S)}hoverMonth(S,X){this.onHover.emit({cell:S,isHovered:X})}changeViewMode(S){this.onViewMode.emit(S)}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-month-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"months"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(X,te){1&X&&(D.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),D.qCj("onNavigate",function(Lt){return te.navigateTo(Lt)})("onViewMode",function(Lt){return te.changeViewMode(Lt)}),D.C$Y(),D.I0R(2,"table",1)(3,"tbody"),D.yuY(4,jf,2,1,"tr",2),D.C$Y()()()),2&X&&(D.yG2(),D.E7m("calendar",te.calendar),D.yG2(3),D.E7m("ngForOf",null==te.calendar?null:te.calendar.months))},dependencies:[Ur.ay,am,Xm],encapsulation:2})}return b})(),L0=(()=>{class b{constructor(){this.onNavigate=new D._w7,this.onViewMode=new D._w7,this.onSelect=new D._w7,this.onHover=new D._w7}navigateTo(S){this.onNavigate.emit({step:{year:(Gd.DOWN===S?-1:1)*rm}})}viewYear(S){this.onSelect.emit(S)}hoverYear(S,X){this.onHover.emit({cell:S,isHovered:X})}changeViewMode(S){this.onViewMode.emit(S)}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-years-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"years"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(X,te){1&X&&(D.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),D.qCj("onNavigate",function(Lt){return te.navigateTo(Lt)})("onViewMode",function(Lt){return te.changeViewMode(Lt)}),D.C$Y(),D.I0R(2,"table",1)(3,"tbody"),D.yuY(4,Fd,2,1,"tr",2),D.C$Y()()()),2&X&&(D.yG2(),D.E7m("calendar",te.calendar),D.yG2(3),D.E7m("ngForOf",null==te.calendar?null:te.calendar.years))},dependencies:[Ur.ay,am,Xm],encapsulation:2})}return b})(),qm=(()=>{class b extends Vm{set value(S){this._effects?.setValue(S)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(S,X,te,Me,Lt,sn,dr){super(),this._config=X,this._store=te,this._element=Me,this._actions=Lt,this._positionService=dr,this.valueChange=new D._w7,this.animationState="void",this.isRangePicker=!1,this._subs=[],this._effects=sn,S.setStyle(Me.nativeElement,"display","block"),S.setStyle(Me.nativeElement,"position","absolute")}ngOnInit(){let S;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,n.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.containerClass=this._config.containerClass,this.showTodayBtn=this._config.showTodayButton,this.todayBtnLbl=this._config.todayButtonLabel,this.todayPos=this._config.todayPosition,this.showClearBtn=this._config.showClearButton,this.clearBtnLbl=this._config.clearButtonLabel,this.clearPos=this._config.clearPosition,this.customRangeBtnLbl=this._config.customRangeButtonLabel,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(X=>X.selectedDate).subscribe(X=>{S=X,this.valueChange.emit(X)})),this._subs.push(this._store.select(X=>X.selectedTime).subscribe(X=>{!X[0]||!(X[0]instanceof Date)||X[0]===S||this.valueChange.emit(X[0])})),this._store.dispatch(this._actions.changeViewMode(this._config.startView))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(S=>{Array.isArray(S)&&S.length>=1&&this.startTimepicker?.writeValue(S[0])})),this.startTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,0)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(S,X){this._store.dispatch(this._actions.selectTime(S,X))}daySelectHandler(S){!S||(this.isOtherMonthsActive?S.isDisabled:S.isOtherMonth||S.isDisabled)||this._store.dispatch(this._actions.select(S.date))}monthSelectHandler(S){!S||S.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{month:zn(S.date),year:On(S.date)},viewMode:"day"}))}yearSelectHandler(S){!S||S.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{year:On(S.date)},viewMode:"month"}))}setToday(){this._store.dispatch(this._actions.select(new Date))}clearDate(){this._store.dispatch(this._actions.select(void 0))}ngOnDestroy(){for(const S of this._subs)S.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(D.q87),D.GI1(Fu),D.GI1(Yd),D.GI1(D.GMv),D.GI1(Tl),D.GI1(Ic),D.GI1(uu.O4))};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-datepicker-container"]],viewQuery:function(X,te){if(1&X&&D.CC$(Zp,5),2&X){let Me;D.wto(Me=D.Gqi())&&(te.startTimepicker=Me.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(X,te){1&X&&D.qCj("click",function(Lt){return te._stopPropagation(Lt)}),2&X&&D.e48("disabled",te.isDatepickerDisabled)("readonly",te.isDatepickerReadonly)},features:[D.M5G([Yd,Ic]),D.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(X,te){1&X&&(D.yuY(0,u0,10,11,"div",0),D.wVc(1,"async")),2&X&&D.E7m("ngIf",D.kDX(1,1,te.viewMode))},dependencies:[Ur.QF,Ur.ay,Ur.u_,Ur.Ko,Ur.Wm,$p,Wm,Hd,Zm,L0,Ur.a],encapsulation:2,data:{animation:[Hm]}})}return b})(),Ig=(()=>{class b{get readonlyValue(){return this.isDisabled?"":null}constructor(S,X,te,Me,Lt){this._config=S,this._elementRef=X,this._renderer=te,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Rd.E,this.isDisabled=!1,this.bsValueChange=new D._w7,this._subs=[],this._dateInputFormat$=new Rd.E,Object.assign(this,this._config),this._datepicker=Lt.createLoader(X,Me,te),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new wh.g(this.isOpen)}get isOpen(){return this._datepicker.isShown}set isOpen(S){this.isOpen$.next(S)}set bsValue(S){this._bsValue&&S&&this._bsValue.getTime()===S.getTime()||(!this._bsValue&&S&&!this._config.withTimepicker&&D0(S,new Date),S&&this.bsConfig?.initCurrentTime&&(S=w0(S)),this.initPreviousValue(),this._bsValue=S,this.bsValueChange.emit(S))}get dateInputFormat$(){return this._dateInputFormat$}ngOnInit(){this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.setConfig(),this.initPreviousValue()}initPreviousValue(){qf=this._bsValue}ngOnChanges(S){S.bsConfig&&(S.bsConfig.currentValue?.initCurrentTime&&S.bsConfig.currentValue?.initCurrentTime!==S.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=w0(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._dateInputFormat$.next(this.bsConfig&&this.bsConfig.dateInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(S.minDate&&(this._datepickerRef.instance.minDate=this.minDate),S.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),S.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),S.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),S.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),S.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),S.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses),S.dateTooltipTexts&&(this._datepickerRef.instance.dateTooltipTexts=this.dateTooltipTexts))}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(S=>{this._datepickerRef&&(this._datepickerRef.instance.value=S)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.subscribe(S=>{this.initPreviousValue(),this.bsValue=S,!this.keepDatepickerModalOpened()&&this.hide()}))}keepDatepickerModalOpened(){return!!(qf&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return qf instanceof Date&&this._bsValue?.getDate()===qf?.getDate()&&this._bsValue?.getMonth()===qf?.getMonth()&&this._bsValue?.getFullYear()===qf?.getFullYear()}ngAfterViewInit(){this.isOpen$.pipe((0,mt.I)(S=>S!==this.isOpen),(0,j.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Fu,useValue:this._config}).attach(qm).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}hide(){this.isOpen&&this._datepicker.hide();for(const S of this._subs)S.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this._config.keepDatesOutOfRules?this._bsValue:Sg(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,dateTooltipTexts:this.dateTooltipTexts||this.bsConfig&&this.bsConfig.dateTooltipTexts,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,minMode:this.minMode||this.bsConfig&&this.bsConfig.minMode,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(S=>S.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(Fu),D.GI1(D.GMv),D.GI1(D.q87),D.GI1(D.y8U),D.GI1(Pu.Sy))};static#t=this.\u0275dir=D.Sc5({type:b,selectors:[["","bsDatepicker",""]],hostVars:1,hostBindings:function(X,te){2&X&&D.e48("readonly",te.readonlyValue)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",minMode:"minMode",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled",dateCustomClasses:"dateCustomClasses",dateTooltipTexts:"dateTooltipTexts",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDatepicker"],features:[D.SYr]})}return b})(),N0=(()=>{class b extends Vm{set value(S){this._effects?.setRangeValue(S)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(S,X,te,Me,Lt,sn,dr){super(),this._config=X,this._store=te,this._element=Me,this._actions=Lt,this._positionService=dr,this.valueChange=new D._w7,this.animationState="void",this._rangeStack=[],this.chosenRange=[],this._subs=[],this.isRangePicker=!0,this._effects=sn,this.customRanges=this._config.ranges||[],this.customRangeBtnLbl=this._config.customRangeButtonLabel,S.setStyle(Me.nativeElement,"display","block"),S.setStyle(Me.nativeElement,"position","absolute")}ngOnInit(){let S;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,n.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.containerClass=this._config.containerClass,this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(X=>X.selectedRange).subscribe(X=>{S=X,this.valueChange.emit(X),this.chosenRange=X||[]})),this._subs.push(this._store.select(X=>X.selectedTime).subscribe(X=>{!X[0]||!X[1]||!(X[0]instanceof Date)||!(X[1]instanceof Date)||S&&X[0]===S[0]&&X[1]===S[1]||(this.valueChange.emit(X),this.chosenRange=X||[])}))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(S=>{Array.isArray(S)&&S.length>=2&&(this.startTimepicker?.writeValue(S[0]),this.endTimepicker?.writeValue(S[1]))})),this.startTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,0)}),this.endTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,1)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(S,X){this._store.dispatch(this._actions.selectTime(S,X))}daySelectHandler(S){!S||(this.isOtherMonthsActive?S.isDisabled:S.isOtherMonth||S.isDisabled)||this.rangesProcessing(S)}monthSelectHandler(S){if(S&&!S.isDisabled){if(S.isSelected=!0,"month"!==this._config.minMode){if(S.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{month:zn(S.date),year:On(S.date)},viewMode:"day"}))}this.rangesProcessing(S)}}yearSelectHandler(S){if(S&&!S.isDisabled){if(S.isSelected=!0,"year"!==this._config.minMode){if(S.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{year:On(S.date)},viewMode:"month"}))}this.rangesProcessing(S)}}rangesProcessing(S){1===this._rangeStack.length&&(this._rangeStack=S.date>=this._rangeStack[0]?[this._rangeStack[0],S.date]:[S.date]),this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(S.date),0===this._rangeStack.length&&(this._rangeStack=[S.date],this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(S.date)),this._store.dispatch(this._actions.selectRange(this._rangeStack)),2===this._rangeStack.length&&(this._rangeStack=[])}ngOnDestroy(){for(const S of this._subs)S.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}setRangeOnCalendar(S){S&&(this._rangeStack=S.value instanceof Date?[S.value]:S.value),this._store.dispatch(this._actions.selectRange(this._rangeStack))}setMaxDateRangeOnCalendar(S){let X=new Date(S);if(this._config.maxDate){const te=this._config.maxDate.getTime(),Me=S.getTime()+864e5*(this._config.maxDateRange||0);X=Me>te?new Date(this._config.maxDate):new Date(Me)}else X.setDate(S.getDate()+(this._config.maxDateRange||0));this._effects?.setMaxDate(X)}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(D.q87),D.GI1(Fu),D.GI1(Yd),D.GI1(D.GMv),D.GI1(Tl),D.GI1(Ic),D.GI1(uu.O4))};static#t=this.\u0275cmp=D.In1({type:b,selectors:[["bs-daterangepicker-container"]],viewQuery:function(X,te){if(1&X&&(D.CC$(Zp,5),D.CC$(h0,5)),2&X){let Me;D.wto(Me=D.Gqi())&&(te.startTimepicker=Me.first),D.wto(Me=D.Gqi())&&(te.endTimepicker=Me.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(X,te){1&X&&D.qCj("click",function(Lt){return te._stopPropagation(Lt)}),2&X&&D.e48("disabled",te.isDatepickerDisabled)("readonly",te.isDatepickerReadonly)},features:[D.M5G([Yd,Ic]),D.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(X,te){1&X&&(D.yuY(0,$h,10,11,"div",0),D.wVc(1,"async")),2&X&&D.E7m("ngIf",D.kDX(1,1,te.viewMode))},dependencies:[Ur.QF,Ur.ay,Ur.u_,Ur.Ko,Ur.Wm,$p,Wm,Hd,Zm,L0,Ur.a],encapsulation:2,data:{animation:[Hm]}})}return b})();const om={provide:To.Y6,useExisting:(0,D.wd)(()=>Km),multi:!0},Mg={provide:To.WM,useExisting:(0,D.wd)(()=>Km),multi:!0};let Kf,Km=(()=>{class b{constructor(S,X,te,Me,Lt){this._picker=S,this._localeService=X,this._renderer=te,this._elRef=Me,this.changeDetection=Lt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Lu.wH}ngOnInit(){const S=X=>{this._setInputValue(X),this._value!==X&&(this._value=X,this._onChange(X),this._onTouched()),this.changeDetection.markForCheck()};this._picker._bsValue&&S(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(S)),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.dateInputFormat$.pipe((0,He.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(S){(13===S.keyCode||"Enter"===S.code)&&this.hide()}_setInputValue(S){const X=S?oo(S,this._picker._config.dateInputFormat,this._localeService.currentLocale):"";this._renderer.setProperty(this._elRef.nativeElement,"value",X)}onChange(S){this.writeValue(S.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(S){const X=S.value;if(null==X||""===X)return null;if(it(X)){if(!_t(X))return{bsDate:{invalid:X}};if(this._picker&&this._picker.minDate&&Uo(X,this._picker.minDate,"date"))return this.writeValue(this._picker.minDate),{bsDate:{minDate:this._picker.minDate}};if(this._picker&&this._picker.maxDate&&Ya(X,this._picker.maxDate,"date"))return this.writeValue(this._picker.maxDate),{bsDate:{maxDate:this._picker.maxDate}}}return null}registerOnValidatorChange(S){this._validatorChange=S}writeValue(S){if(S){const X=this._localeService.currentLocale;if(!Xa(X))throw new Error(`Locale "${X}" is not defined, please add it with "defineLocale(...)"`);this._value=ku(S,this._picker._config.dateInputFormat,this._localeService.currentLocale),this._picker._config.useUtc&&(this._value=ru(this._value))}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(S){this._picker.isDisabled=S,S?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(S){this._onChange=S}registerOnTouched(S){this._onTouched=S}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(Ig,1),D.GI1(em),D.GI1(D.q87),D.GI1(D.GMv),D.GI1(D.kD9))};static#t=this.\u0275dir=D.Sc5({type:b,selectors:[["input","bsDatepicker",""]],hostBindings:function(X,te){1&X&&D.qCj("change",function(Lt){return te.onChange(Lt)})("keyup.esc",function(){return te.hide()})("keydown",function(Lt){return te.onKeydownEvent(Lt)})("blur",function(){return te.onBlur()})},features:[D.M5G([om,Mg])]})}return b})(),Og=(()=>{class b extends Fu{constructor(){super(...arguments),this.displayMonths=2}static#e=this.\u0275fac=(()=>{let S;return function(te){return(S||(S=D.otF(b)))(te||b)}})();static#t=this.\u0275prov=D.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),Nu=(()=>{class b{get isOpen(){return this._datepicker.isShown}set isOpen(S){this.isOpen$.next(S)}set bsValue(S){this._bsValue!==S&&(S&&this.bsConfig?.initCurrentTime&&(S=Tv(S)),this.initPreviousValue(),this._bsValue=S,this.bsValueChange.emit(S))}get isDatepickerReadonly(){return this.isDisabled?"":null}get rangeInputFormat$(){return this._rangeInputFormat$}constructor(S,X,te,Me,Lt){this._config=S,this._elementRef=X,this._renderer=te,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Rd.E,this.isDisabled=!1,this.bsValueChange=new D._w7,this._subs=[],this._rangeInputFormat$=new Rd.E,this._datepicker=Lt.createLoader(X,Me,te),Object.assign(this,S),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new wh.g(this.isOpen)}ngOnInit(){this.isDestroy$=new Rd.E,this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.initPreviousValue(),this.setConfig()}ngOnChanges(S){S.bsConfig&&(S.bsConfig.currentValue?.initCurrentTime&&S.bsConfig.currentValue?.initCurrentTime!==S.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=Tv(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._rangeInputFormat$.next(S.bsConfig.currentValue&&S.bsConfig.currentValue.rangeInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(S.minDate&&(this._datepickerRef.instance.minDate=this.minDate),S.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),S.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),S.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),S.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),S.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),S.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses))}ngAfterViewInit(){this.isOpen$.pipe((0,mt.I)(S=>S!==this.isOpen),(0,j.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Fu,useValue:this._config}).attach(N0).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(S=>{this._datepickerRef&&(this._datepickerRef.instance.value=S)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.pipe((0,mt.I)(S=>S&&S[0]&&!!S[1])).subscribe(S=>{this.initPreviousValue(),this.bsValue=S,!this.keepDatepickerModalOpened()&&this.hide()}))}initPreviousValue(){Kf=this._bsValue}keepDatepickerModalOpened(){return!!(Kf&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return this._bsValue?.[0]?.getDate()===Kf?.[0]?.getDate()&&this._bsValue?.[0]?.getMonth()===Kf?.[0]?.getMonth()&&this._bsValue?.[0]?.getFullYear()===Kf?.[0]?.getFullYear()&&this._bsValue?.[1]?.getDate()===Kf?.[1]?.getDate()&&this._bsValue?.[1]?.getMonth()===Kf?.[1]?.getMonth()&&this._bsValue?.[1]?.getFullYear()===Kf?.[1]?.getFullYear()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this.bsConfig?.keepDatesOutOfRules?this._bsValue:Sg(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,ranges:b0(this.bsConfig&&this.bsConfig.ranges,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),maxDateRange:this.bsConfig&&this.bsConfig.maxDateRange,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}hide(){this.isOpen&&this._datepicker.hide();for(const S of this._subs)S.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(S=>S.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(Og),D.GI1(D.GMv),D.GI1(D.q87),D.GI1(D.y8U),D.GI1(Pu.Sy))};static#t=this.\u0275dir=D.Sc5({type:b,selectors:[["","bsDaterangepicker",""]],hostVars:1,hostBindings:function(X,te){2&X&&D.e48("readonly",te.isDatepickerReadonly)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",dateCustomClasses:"dateCustomClasses",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDaterangepicker"],features:[D.SYr]})}return b})();const Jm={provide:To.Y6,useExisting:(0,D.wd)(()=>Qm),multi:!0},z0={provide:To.WM,useExisting:(0,D.wd)(()=>Qm),multi:!0};let Qm=(()=>{class b{constructor(S,X,te,Me,Lt){this._picker=S,this._localeService=X,this._renderer=te,this._elRef=Me,this.changeDetection=Lt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Lu.wH}ngOnInit(){this._picker._bsValue&&(X=>{this._setInputValue(X),this._value!==X&&(this._value=X,this._onChange(X),this._onTouched()),this.changeDetection.markForCheck()})(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(X=>{this._setInputValue(X),this._value!==X&&(this._value=X,this._onChange(X),this._onTouched()),this.changeDetection.markForCheck()})),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.rangeInputFormat$.pipe((0,He.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(S){(13===S.keyCode||"Enter"===S.code)&&this.hide()}_setInputValue(S){let X="";if(S){const te=S[0]?oo(S[0],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"",Me=S[1]?oo(S[1],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"";X=te&&Me?te+this._picker._config.rangeSeparator+Me:""}this._renderer.setProperty(this._elRef.nativeElement,"value",X)}onChange(S){this.writeValue(S.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(S){let X=S.value;const te=[];if(null==X||!Et(X))return null;X=X.slice().sort((sn,dr)=>sn.getTime()-dr.getTime());const Me=_t(X[0]),Lt=_t(X[1]);return Me?Lt?(this._picker&&this._picker.minDate&&Uo(X[0],this._picker.minDate,"date")&&(X[0]=this._picker.minDate,te.push({bsDate:{minDate:this._picker.minDate}})),this._picker&&this._picker.maxDate&&Ya(X[1],this._picker.maxDate,"date")&&(X[1]=this._picker.maxDate,te.push({bsDate:{maxDate:this._picker.maxDate}})),te.length>0?(this.writeValue(X),te):null):{bsDate:{invalid:X[1]}}:{bsDate:{invalid:X[0]}}}registerOnValidatorChange(S){this._validatorChange=S}writeValue(S){if(S){const X=this._localeService.currentLocale;if(!Xa(X))throw new Error(`Locale "${X}" is not defined, please add it with "defineLocale(...)"`);let Me=[];if("string"==typeof S){const Lt=this._picker._config.rangeSeparator.trim();Me=S.replace(/[^-]/g,"").length>1?S.split(this._picker._config.rangeSeparator):S.split(Lt.length>0?Lt:this._picker._config.rangeSeparator).map(sn=>sn.trim())}Array.isArray(S)&&(Me=S),this._value=Me.map(Lt=>this._picker._config.useUtc?ru(ku(Lt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)):ku(Lt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)).map(Lt=>isNaN(Lt.valueOf())?void 0:Lt)}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(S){this._picker.isDisabled=S,S?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(S){this._onChange=S}registerOnTouched(S){this._onTouched=S}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(X){return new(X||b)(D.GI1(Nu,1),D.GI1(em),D.GI1(D.q87),D.GI1(D.GMv),D.GI1(D.kD9))};static#t=this.\u0275dir=D.Sc5({type:b,selectors:[["input","bsDaterangepicker",""]],hostBindings:function(X,te){1&X&&D.qCj("change",function(Lt){return te.onChange(Lt)})("keyup.esc",function(){return te.hide()})("keydown",function(Lt){return te.onKeydownEvent(Lt)})("blur",function(){return te.onBlur()})},features:[D.M5G([Jm,z0])]})}return b})(),Ef=(()=>{class b{static forRoot(){return{ngModule:b,providers:[Pu.Sy,uu.O4,Yd,Tl,Ic,em,Gl]}}static#e=this.\u0275fac=function(X){return new(X||b)};static#t=this.\u0275mod=D.a4G({type:b});static#i=this.\u0275inj=D.s3X({imports:[Ur.MD,El.as,Mm]})}return b})()},8216:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{im:()=>kt,rO:()=>Oi});var D=Qt(4496),mt=Qt(6504),Ze=Qt(1368);const n=(vi,hi)=>({"pull-left":vi,"float-left":hi}),j=(vi,hi)=>({"pull-right":vi,"float-right":hi}),He=(vi,hi)=>({disabled:vi,currentPage:hi});function Be(vi,hi){if(1&vi){const Dt=D.KQA();D.I0R(0,"li",11)(1,"a",12),D.qCj("click",function(Ri){D.usT(Dt);const Xi=D.GaO();return D.CGJ(Xi.selectPage(1,Ri))}),D.C_f(2,13),D.C$Y()()}if(2&vi){const Dt=D.GaO(),yi=D.Gew(13);D.eAK("disabled",Dt.noPrevious()||Dt.disabled),D.yG2(2),D.E7m("ngTemplateOutlet",Dt.customFirstTemplate||yi)("ngTemplateOutletContext",D.IBC(4,He,Dt.noPrevious()||Dt.disabled,Dt.page))}}function Re(vi,hi){if(1&vi){const Dt=D.KQA();D.I0R(0,"li",14)(1,"a",12),D.qCj("click",function(Ri){D.usT(Dt);const Xi=D.GaO();return D.CGJ(Xi.selectPage(Xi.page-1,Ri))}),D.C_f(2,13),D.C$Y()()}if(2&vi){const Dt=D.GaO(),yi=D.Gew(11);D.eAK("disabled",Dt.noPrevious()||Dt.disabled),D.yG2(2),D.E7m("ngTemplateOutlet",Dt.customPreviousTemplate||yi)("ngTemplateOutletContext",D.IBC(4,He,Dt.noPrevious()||Dt.disabled,Dt.page))}}const $e=(vi,hi,Dt)=>({disabled:vi,$implicit:hi,currentPage:Dt});function it(vi,hi){if(1&vi){const Dt=D.KQA();D.I0R(0,"li",15)(1,"a",12),D.qCj("click",function(Ri){const Tn=D.usT(Dt).$implicit,qi=D.GaO();return D.CGJ(qi.selectPage(Tn.number,Ri))}),D.C_f(2,13),D.C$Y()()}if(2&vi){const Dt=hi.$implicit,yi=D.GaO(),Ri=D.Gew(7);D.eAK("active",Dt.active)("disabled",yi.disabled&&!Dt.active),D.yG2(2),D.E7m("ngTemplateOutlet",yi.customPageTemplate||Ri)("ngTemplateOutletContext",D.uAc(6,$e,yi.disabled,Dt,yi.page))}}function nt(vi,hi){if(1&vi){const Dt=D.KQA();D.I0R(0,"li",16)(1,"a",12),D.qCj("click",function(Ri){D.usT(Dt);const Xi=D.GaO();return D.CGJ(Xi.selectPage(Xi.page+1,Ri))}),D.C_f(2,13),D.C$Y()()}if(2&vi){const Dt=D.GaO(),yi=D.Gew(9);D.eAK("disabled",Dt.noNext()||Dt.disabled),D.yG2(2),D.E7m("ngTemplateOutlet",Dt.customNextTemplate||yi)("ngTemplateOutletContext",D.IBC(4,He,Dt.noNext()||Dt.disabled,Dt.page))}}function _t(vi,hi){if(1&vi){const Dt=D.KQA();D.I0R(0,"li",17)(1,"a",12),D.qCj("click",function(Ri){D.usT(Dt);const Xi=D.GaO();return D.CGJ(Xi.selectPage(Xi.totalPages,Ri))}),D.C_f(2,13),D.C$Y()()}if(2&vi){const Dt=D.GaO(),yi=D.Gew(15);D.eAK("disabled",Dt.noNext()||Dt.disabled),D.yG2(2),D.E7m("ngTemplateOutlet",Dt.customLastTemplate||yi)("ngTemplateOutletContext",D.IBC(4,He,Dt.noNext()||Dt.disabled,Dt.page))}}function gt(vi,hi){1&vi&&D.OEk(0),2&vi&&D.cNF(hi.$implicit.text)}function Xt(vi,hi){if(1&vi&&D.OEk(0),2&vi){const Dt=D.GaO();D.cNF(Dt.getText("next"))}}function Et(vi,hi){if(1&vi&&D.OEk(0),2&vi){const Dt=D.GaO();D.cNF(Dt.getText("previous"))}}function Tt(vi,hi){if(1&vi&&D.OEk(0),2&vi){const Dt=D.GaO();D.cNF(Dt.getText("first"))}}function Nt(vi,hi){if(1&vi&&D.OEk(0),2&vi){const Dt=D.GaO();D.cNF(Dt.getText("last"))}}let Pi=(()=>{class vi{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xab Previous",nextText:"Next \xbb",pageBtnClass:"",align:!0}}static#e=this.\u0275fac=function(yi){return new(yi||vi)};static#t=this.\u0275prov=D.wxM({token:vi,factory:vi.\u0275fac,providedIn:"root"})}return vi})();const tt={provide:mt.Y6,useExisting:(0,D.wd)(()=>Ci),multi:!0};let Ci=(()=>{class vi{constructor(Dt,yi,Ri){this.elementRef=Dt,this.changeDetection=Ri,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xab Previous",this.nextText="Next \xbb",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new D._w7,this.pageChanged=new D._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=Dt,this.config||this.configureOptions(Object.assign({},yi.main,yi.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(Dt){this._itemsPerPage=Dt,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(Dt){this._totalItems=Dt,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(Dt){this._totalPages=Dt,this.numPages.emit(Dt),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(Dt){const yi=this._page;this._page=Dt>this.totalPages?this.totalPages:Dt||1,this.changeDetection.markForCheck(),!(yi===this._page||typeof yi>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(Dt){this.config=Object.assign({},Dt)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(Dt){this.page=Dt,this.pages=this.getPages(this.page,this.totalPages)}getText(Dt){return this[`${Dt}Text`]||this.config[`${Dt}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(Dt){this.onChange=Dt}registerOnTouched(Dt){this.onTouched=Dt}selectPage(Dt,yi){yi&&yi.preventDefault(),this.disabled||(yi&&yi.target&&yi.target.blur(),this.writeValue(Dt),this.onChange(this.page))}makePage(Dt,yi,Ri){return{text:yi,number:Dt,active:Ri}}getPages(Dt,yi){const Ri=[];let Xi=1,Tn=yi;const qi=typeof this.maxSize<"u"&&this.maxSize<yi;qi&&this.maxSize&&(this.rotate?(Xi=Math.max(Dt-Math.floor(this.maxSize/2),1),Tn=Xi+this.maxSize-1,Tn>yi&&(Tn=yi,Xi=Tn-this.maxSize+1)):(Xi=(Math.ceil(Dt/this.maxSize)-1)*this.maxSize+1,Tn=Math.min(Xi+this.maxSize-1,yi)));for(let nn=Xi;nn<=Tn;nn++){const _n=this.makePage(nn,nn.toString(),nn===Dt);Ri.push(_n)}if(qi&&!this.rotate){if(Xi>1){const nn=this.makePage(Xi-1,"...",!1);Ri.unshift(nn)}if(Tn<yi){const nn=this.makePage(Tn+1,"...",!1);Ri.push(nn)}}return Ri}calculateTotalPages(){const Dt=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(Dt||0,1)}static#e=this.\u0275fac=function(yi){return new(yi||vi)(D.GI1(D.GMv),D.GI1(Pi),D.GI1(D.kD9))};static#t=this.\u0275cmp=D.In1({type:vi,selectors:[["pager"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[D.M5G([tt])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(yi,Ri){1&yi&&(D.I0R(0,"ul",0)(1,"li",1)(2,"a",2),D.qCj("click",function(Tn){return Ri.selectPage(Ri.page-1,Tn)}),D.OEk(3),D.C$Y()(),D.I0R(4,"li",1)(5,"a",2),D.qCj("click",function(Tn){return Ri.selectPage(Ri.page+1,Tn)}),D.OEk(6),D.C$Y()()()),2&yi&&(D.yG2(),D.m8U(Ri.pageBtnClass),D.eAK("disabled",Ri.noPrevious())("previous",Ri.align),D.E7m("ngClass",D.IBC(18,n,Ri.align,Ri.align)),D.yG2(2),D.cNF(Ri.getText("previous")),D.yG2(),D.m8U(Ri.pageBtnClass),D.eAK("disabled",Ri.noNext())("next",Ri.align),D.E7m("ngClass",D.IBC(21,j,Ri.align,Ri.align)),D.yG2(2),D.cNF(Ri.getText("next")))},dependencies:[Ze.QF],encapsulation:2})}return vi})();const Mi={provide:mt.Y6,useExisting:(0,D.wd)(()=>kt),multi:!0};let kt=(()=>{class vi{constructor(Dt,yi,Ri){this.elementRef=Dt,this.changeDetection=Ri,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new D._w7,this.pageChanged=new D._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=Dt,this.config||this.configureOptions(yi.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(Dt){this._itemsPerPage=Dt,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(Dt){this._totalItems=Dt,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(Dt){this._totalPages=Dt,this.numPages.emit(Dt),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(Dt){const yi=this._page;this._page=Dt>this.totalPages?this.totalPages:Dt||1,this.changeDetection.markForCheck(),!(yi===this._page||typeof yi>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(Dt){this.config=Object.assign({},Dt)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(Dt){this.page=Dt,this.pages=this.getPages(this.page,this.totalPages)}getText(Dt){return this[`${Dt}Text`]||this.config[`${Dt}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(Dt){this.onChange=Dt}registerOnTouched(Dt){this.onTouched=Dt}selectPage(Dt,yi){yi&&yi.preventDefault(),this.disabled||(yi&&yi.target&&yi.target.blur(),this.writeValue(Dt),this.onChange(this.page))}makePage(Dt,yi,Ri){return{text:yi,number:Dt,active:Ri}}getPages(Dt,yi){const Ri=[];let Xi=1,Tn=yi;const qi=typeof this.maxSize<"u"&&this.maxSize<yi;qi&&this.maxSize&&(this.rotate?(Xi=Math.max(Dt-Math.floor(this.maxSize/2),1),Tn=Xi+this.maxSize-1,Tn>yi&&(Tn=yi,Xi=Tn-this.maxSize+1)):(Xi=(Math.ceil(Dt/this.maxSize)-1)*this.maxSize+1,Tn=Math.min(Xi+this.maxSize-1,yi)));for(let nn=Xi;nn<=Tn;nn++){const _n=this.makePage(nn,nn.toString(),nn===Dt);Ri.push(_n)}if(qi&&!this.rotate){if(Xi>1){const nn=this.makePage(Xi-1,"...",!1);Ri.unshift(nn)}if(Tn<yi){const nn=this.makePage(Tn+1,"...",!1);Ri.push(nn)}}return Ri}calculateTotalPages(){const Dt=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(Dt||0,1)}static#e=this.\u0275fac=function(yi){return new(yi||vi)(D.GI1(D.GMv),D.GI1(Pi),D.GI1(D.kD9))};static#t=this.\u0275cmp=D.In1({type:vi,selectors:[["pagination"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[D.M5G([Mi])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(yi,Ri){1&yi&&(D.I0R(0,"ul",0),D.yuY(1,Be,3,7,"li",1)(2,Re,3,7,"li",2)(3,it,3,10,"li",3)(4,nt,3,7,"li",4)(5,_t,3,7,"li",5),D.C$Y(),D.yuY(6,gt,1,1,"ng-template",null,6,D.gJz)(8,Xt,1,1,"ng-template",null,7,D.gJz)(10,Et,1,1,"ng-template",null,8,D.gJz)(12,Tt,1,1,"ng-template",null,9,D.gJz)(14,Nt,1,1,"ng-template",null,10,D.gJz)),2&yi&&(D.E7m("ngClass",Ri.classMap),D.yG2(),D.E7m("ngIf",Ri.boundaryLinks),D.yG2(),D.E7m("ngIf",Ri.directionLinks),D.yG2(),D.E7m("ngForOf",Ri.pages),D.yG2(),D.E7m("ngIf",Ri.directionLinks),D.yG2(),D.E7m("ngIf",Ri.boundaryLinks))},dependencies:[Ze.QF,Ze.ay,Ze.u_,Ze.XV],encapsulation:2})}return vi})(),Oi=(()=>{class vi{static forRoot(){return{ngModule:vi,providers:[]}}static#e=this.\u0275fac=function(yi){return new(yi||vi)};static#t=this.\u0275mod=D.a4G({type:vi});static#i=this.\u0275inj=D.s3X({imports:[Ze.MD]})}return vi})()},8987:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{iU:()=>nt});var D=Qt(4496),mt=Qt(1368);let nt=(()=>{class _t{static forRoot(){return{ngModule:_t,providers:[]}}static#e=this.\u0275fac=function(Et){return new(Et||_t)};static#t=this.\u0275mod=D.a4G({type:_t});static#i=this.\u0275inj=D.s3X({imports:[mt.MD]})}return _t})()},7995:(ao,Hs,Qt)=>{"use strict";Qt.d(Hs,{as:()=>gt,uM:()=>_t});var D=Qt(4496),mt=Qt(3676),Ze=Qt(140),n=Qt(1316),j=Qt(6552),He=Qt(3120),Be=Qt(1368);const Re=["*"];let $e=(()=>{class Xt{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}static#e=this.\u0275fac=function(Nt){return new(Nt||Xt)};static#t=this.\u0275prov=D.wxM({token:Xt,factory:Xt.\u0275fac,providedIn:"root"})}return Xt})(),it=(()=>{class Xt{get _bsVersions(){return(0,mt.w3)()}constructor(Tt){Object.assign(this,Tt)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=Ze.Ly[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}static#e=this.\u0275fac=function(Nt){return new(Nt||Xt)(D.GI1($e))};static#t=this.\u0275cmp=D.In1({type:Xt,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(Nt,Pi){2&Nt&&(D.e48("id",Pi.id),D.m8U("show tooltip in tooltip-"+Pi.placement+" bs-tooltip-"+Pi.placement+" "+Pi.placement+" "+Pi.containerClass))},ngContentSelectors:Re,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(Nt,Pi){1&Nt&&(D.kPM(),D.wR5(0,"div",0),D.I0R(1,"div",1),D._Xx(2),D.C$Y())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0})}return Xt})(),nt=0,_t=(()=>{class Xt{get isOpen(){return this._tooltip.isShown}set isOpen(Tt){Tt?this.show():this.hide()}set htmlContent(Tt){(0,mt.eG)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=Tt}set _placement(Tt){(0,mt.eG)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=Tt}set _isOpen(Tt){(0,mt.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=Tt}get _isOpen(){return(0,mt.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(Tt){(0,mt.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!Tt}get _enable(){return(0,mt.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(Tt){(0,mt.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=Tt?"body":this.container}get _appendToBody(){return(0,mt.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container}set _popupClass(Tt){(0,mt.eG)("tooltipClass deprecated")}set _tooltipContext(Tt){(0,mt.eG)("tooltipContext deprecated")}set _tooltipPopupDelay(Tt){(0,mt.eG)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=Tt}get _tooltipTrigger(){return(0,mt.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(Tt){(0,mt.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(Tt||"").toString()}constructor(Tt,Nt,Pi,tt,Ci,Mi){this._elementRef=tt,this._renderer=Ci,this._positionService=Mi,this.tooltipId=nt++,this.adaptivePosition=!0,this.tooltipChange=new D._w7,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new D._w7,this._tooltip=Nt.createLoader(this._elementRef,Tt,this._renderer).provide({provide:$e,useValue:Pi}),Object.assign(this,Pi),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(Tt=>{Tt||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const Tt=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(it).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},Nt=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,He.k)(this.delay).subscribe(()=>{Tt(),Nt()}),this.triggers&&(0,mt.GY)(this.triggers).forEach(Pi=>{Pi.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,Pi.close,()=>{this._delaySubscription?.unsubscribe(),Nt()}))})):Tt()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}static#e=this.\u0275fac=function(Nt){return new(Nt||Xt)(D.GI1(D.y8U),D.GI1(j.Sy),D.GI1($e),D.GI1(D.GMv),D.GI1(D.q87),D.GI1(Ze.O4))};static#t=this.\u0275dir=D.Sc5({type:Xt,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[D.Wk5.None,"tooltipHtml","htmlContent"],_placement:[D.Wk5.None,"tooltipPlacement","_placement"],_isOpen:[D.Wk5.None,"tooltipIsOpen","_isOpen"],_enable:[D.Wk5.None,"tooltipEnable","_enable"],_appendToBody:[D.Wk5.None,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[D.Wk5.None,"tooltipClass","_popupClass"],_tooltipContext:[D.Wk5.None,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[D.Wk5.None,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[D.Wk5.None,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]})}return(0,n.UN)([(0,mt.s9)(),(0,n.YR)("design:type",Object)],Xt.prototype,"tooltip",void 0),Xt})(),gt=(()=>{class Xt{static forRoot(){return{ngModule:Xt,providers:[j.Sy,Ze.O4]}}static#e=this.\u0275fac=function(Nt){return new(Nt||Xt)};static#t=this.\u0275mod=D.a4G({type:Xt});static#i=this.\u0275inj=D.s3X({imports:[Be.MD]})}return Xt})()}}]);