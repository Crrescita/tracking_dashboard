(self.webpackChunkSteex=self.webpackChunkSteex||[]).push([[968],{3320:(Qs,Lr,Ot)=>{"use strict";Ot.r(Lr),Ot.d(Lr,{CustomPagesModule:()=>gb});var A=Ot(1012),sn=Ot(3756),Re=Ot.n(sn),e=Ot(4496),Y=Ot(6504),Ae=Ot(7048),ke=Ot(6716);let Ee=(()=>{class v{constructor(i){this.http=i,this.apiUrl=ke.O.apiUrl,this.headers=new Ae.UD({"Content-Type":"application/json; charset=utf-8"});const d=localStorage.getItem("access_token"),f=localStorage.getItem("userType");d&&(this.headers=this.headers.set("access_token",`Bearer ${d}`),this.headers=this.headers.set("userType",`${f}`))}fetchBannerSection(i,d){const f={headers:new Ae.UD({"Content-Type":"application/json",Authorization:"Auth "+i})};return this.http.get(this.apiUrl+"homebanner/"+d,f)}updateBannerSection(i,d,f){return this.http.patch(this.apiUrl+"homebanner/"+f,d)}updateData(i,d){return this.http.put(this.apiUrl,d)}deleteData(i){return this.http.delete(i)}put(i,d,f){return this.http.put(`${this.apiUrl+i}/${d}`,f)}postwithid(i,d,f){return this.http.post(`${this.apiUrl+i}/${d}`,f)}post(i,d){return this.http.post(`${this.apiUrl+i}`,d)}get(i,d){return this.http.get(`${this.apiUrl+i}/${d}`)}getwithoutid(i){return this.http.get(`${this.apiUrl+i}`)}deleteWithId(i,d){return this.http.delete(`${this.apiUrl+i}/${d}`)}static#e=this.\u0275fac=function(d){return new(d||v)(e.CoB(Ae.KK))};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var Oe=Ot(4400),Ye=Ot(1368),Xe=Ot(6708),et=Ot(8216);const dt=(v,l)=>({"bg-info-subtle text-info":v,"bg-danger-subtle text-danger":l});function St(v,l){if(1&v){const i=e.KQA();e.I0R(0,"tr")(1,"td",38),e.OEk(2),e.C$Y(),e.wR5(3,"td",39)(4,"td",39),e.I0R(5,"td",40)(6,"div",41)(7,"input",42),e.qCj("change",function(f){const H=e.usT(i).$implicit,ne=e.GaO();return e.CGJ(ne.setStatus(H.id,f))}),e.C$Y(),e.I0R(8,"label",43)(9,"span",44),e.OEk(10),e.C$Y()()()(),e.I0R(11,"td",45)(12,"ul",46)(13,"li")(14,"a",47),e.wR5(15,"i",48),e.C$Y()(),e.I0R(16,"li")(17,"a",49),e.qCj("click",function(){const O=e.usT(i).$implicit,H=e.GaO();return e.CGJ(H.delete(O.id))}),e.wR5(18,"i",50),e.C$Y()()()()()}if(2&v){const i=l.$implicit,d=l.$index,f=e.GaO();e.yG2(2),e.oRS(" ",(f.currentPage-1)*f.itemsPerPage+d+1," "),e.yG2(),e.E7m("innerHtml",i.name,e.E3n),e.yG2(),e.E7m("innerHtml",i.cin_id,e.E3n),e.yG2(3),e.E7m("checked","active"===i.status)("id","customSwitchsizemd"+d),e.yG2(),e.E7m("for","customSwitchsizemd"+d),e.yG2(),e.E7m("ngClass",e.IBC(9,dt,"active"===i.status,"inactive"===i.status)),e.yG2(),e.oRS(" ",i.status," "),e.yG2(4),e.CI5("routerLink","/edit-company/",i.id,"")}}function it(v,l){1&v&&(e.I0R(0,"div",37)(1,"div",51)(2,"span",52),e.OEk(3,"Loading..."),e.C$Y()()())}let pt=(()=>{class v{constructor(i,d,f){this.formBuilder=i,this.api=d,this.toastService=f,this.spinnerStatus=!1,this.companyData=[],this.companyDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Company",active:!0},{label:"Company list",active:!0}],this.getCompanyData()}getCompanyData(){this.toggleSpinner(!0),this.api.getwithoutid("company").subscribe(i=>{i&&i.status?(this.toggleSpinner(!1),this.companyData=i.data||[],this.companyDataList=i.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},i=>{this.handleError(i.message||"An error occurred while fetching data")})}setStatus(i,d){const O=d.target.checked?"active":"inactive",H=new FormData;H.append("status",O),this.toggleSpinner(!0),this.api.put("company",i,H).subscribe(ne=>this.handleStatusChangeResponse(ne),ne=>this.handleError(ne))}toggleSpinner(i){this.spinnerStatus=i}delete(i){i&&Re().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(d=>{d.isConfirmed&&this.api.deleteWithId("company",i).subscribe(f=>this.handleStatusChangeResponse(f),f=>this.handleError(f))})}handleStatusChangeResponse(i){this.toggleSpinner(!1),!0===i.status?(this.toastService.success("Data Saved Successfully!!"),this.getCompanyData()):(console.log(i),this.toastService.error(i.message))}handleError(i){this.toggleSpinner(!1)}filterdata(){this.companyData=this.term?this.companyDataList.filter(i=>{const d=this.term.toLowerCase();return i.name.toLowerCase().includes(d)||i.cin_id.toLowerCase().includes(d)||i.status.toLowerCase().includes(d)}):this.companyDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const i=document.querySelector(".noresult"),d=document.getElementById("pagination-element");this.term&&0===this.companyData.length?(i.style.display="block",d.classList.add("d-none")):(i.style.display="none",d.classList.remove("d-none"))}pageChanged(i){this.currentPage=i.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.companyDataList.length}updateDisplayedItems(){const i=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.companyData=this.companyDataList.slice(i,this.endItem)}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(Y.im),e.GI1(Ee),e.GI1(Oe.SA))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-company-list"]],decls:61,vars:7,consts:[["title","Company List",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/add-company",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(d,f){1&d&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.wR5(12,"div",10),e.C$Y()(),e.I0R(13,"div",11)(14,"div",12)(15,"input",13),e.iHE("ngModelChange",function(H){return e.kNx(f.term,H)||(f.term=H),H}),e.qCj("keyup",function(){return f.filterdata()}),e.C$Y(),e.wR5(16,"i",14),e.C$Y()(),e.I0R(17,"div",15)(18,"div",16)(19,"div")(20,"a",17),e.wR5(21,"i",18),e.OEk(22,"Add"),e.C$Y()()()()()(),e.I0R(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),e.OEk(29,"S No."),e.C$Y(),e.I0R(30,"th",23),e.OEk(31,"Company Name"),e.C$Y(),e.I0R(32,"th",23),e.OEk(33,"CIN"),e.C$Y(),e.I0R(34,"th",23),e.OEk(35,"Status"),e.C$Y(),e.I0R(36,"th",24),e.OEk(37,"Action"),e.C$Y()()(),e.I0R(38,"tbody",25),e.c53(39,St,19,12,"tr",null,e.wJt),e.C$Y()(),e.I0R(41,"div",26)(42,"div",27),e.wR5(43,"i",28),e.I0R(44,"h5",29),e.OEk(45,"Sorry! No Result Found"),e.C$Y(),e.I0R(46,"p",30),e.OEk(47," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(48,"div",31)(49,"div",32)(50,"div",33),e.OEk(51," Showing "),e.I0R(52,"span",34),e.OEk(53),e.C$Y(),e.OEk(54," of "),e.I0R(55,"span",34),e.OEk(56),e.C$Y(),e.OEk(57," Results "),e.C$Y()(),e.I0R(58,"div",35)(59,"pagination",36),e.qCj("pageChanged",function(H){return f.pageChanged(H)}),e.C$Y()()()()()()(),e.yuY(60,it,4,0,"div",37),e.C$Y()()()()),2&d&&(e.E7m("breadcrumbItems",f.breadCrumbItems),e.yG2(15),e.OKB("ngModel",f.term),e.yG2(24),e.oho(f.companyData),e.yG2(14),e.cNF(null==f.companyData?null:f.companyData.length),e.yG2(3),e.cNF(null==f.companyDataList?null:f.companyDataList.length),e.yG2(3),e.E7m("totalItems",null==f.companyDataList?null:f.companyDataList.length)("itemsPerPage",5),e.yG2(),e.C0Y(60,f.spinnerStatus?60:-1))},dependencies:[Ye.QF,Xe.O,A.ER,Y.ot,Y.ue,Y._G,et.im]})}return v})();function yt(v,l){if(1&v&&(e.I0R(0,"div",9)(1,"div",83),e.wR5(2,"img",84),e.C$Y()()),2&v){const i=e.GaO(2);e.yG2(2),e.E7m("src",i.companyselectedImagePreview,e.K6U)}}function Qt(v,l){if(1&v&&e.yuY(0,yt,3,1,"div",82),2&v){const i=e.GaO();e.C0Y(0,i.companyselectedImagePreview?0:-1)}}function Ve(v,l){if(1&v&&(e.I0R(0,"div",9)(1,"div",83),e.wR5(2,"img",84),e.C$Y()()),2&v){const i=e.GaO();e.yG2(2),e.E7m("src",i.companyuploadedImage,e.K6U)}}function Zt(v,l){1&v&&(e.I0R(0,"div",9)(1,"div",83),e.wR5(2,"img",85),e.C$Y()())}function ei(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Logo is required."),e.C$Y())}function rt(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Company name is required."),e.C$Y())}function Kt(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1," Company name must be at most 45 characters "),e.C$Y())}function Yt(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Business type is required."),e.C$Y())}function Nt(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1," Business type must be at most 45 characters "),e.C$Y())}function ct(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"TIN is required."),e.C$Y())}function Vt(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"CIN is required."),e.C$Y())}function qt(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"No. of Employee is required."),e.C$Y())}function ri(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Website url is required."),e.C$Y())}function Li(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Contact person is required."),e.C$Y())}function ai(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Email is required."),e.C$Y())}function fi(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1," Email must be a valid email address "),e.C$Y())}function Mi(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Mobile is required."),e.C$Y())}function Yi(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1," Please, Enter 10 digit Mobile Number. "),e.C$Y())}function mn(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"City is required."),e.C$Y())}function ln(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"State is required."),e.C$Y())}function zn(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"zip_code is required."),e.C$Y())}function jt(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Address is required."),e.C$Y())}function Di(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1," Address must be at most 100 characters "),e.C$Y())}function qi(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Password is required."),e.C$Y())}function Hn(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1," password must be at minimum 5 characters "),e.C$Y())}function Rn(v,l){1&v&&(e.I0R(0,"div",86),e.OEk(1,"Status is required."),e.C$Y())}function xn(v,l){1&v&&(e.I0R(0,"button",87),e.OEk(1,"Save"),e.C$Y())}function Pi(v,l){1&v&&(e.I0R(0,"button",88),e.wR5(1,"span",89),e.OEk(2," Please wait "),e.C$Y())}function gr(v,l){1&v&&(e.I0R(0,"div",81)(1,"div",90)(2,"span",91),e.OEk(3,"Loading..."),e.C$Y()()())}const tr=v=>({"is-invalid":v}),qn=(v,l)=>({"mdi-eye-off-outline":v,"mdi-eye-outline":l});let hn=(()=>{class v{constructor(i,d,f,O,H){this.route=i,this.formBuilder=d,this.api=f,this.router=O,this.toastService=H,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.companyselectedImage=null,this.companyselectedImagePreview=null,this.companyuploadedImage=null,this.mockLocationUpdates=[{lng:78.22045594790079,lat:26.230978491880894},{lng:78.22581623978483,lat:26.230717171669912},{lng:78.22831983563903,lat:26.229851080580822}]}ngOnInit(){this.breadCrumbItems=[{label:"Compay",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(i=>{this.urlId=i.id?Number(i.id):null}),this.initializeForm(),this.urlId&&this.getCompanyData()}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[Y.AQ.maxLength(45),Y.AQ.required]],address:["",[Y.AQ.maxLength(100),Y.AQ.required]],no_of_emp:["",[Y.AQ.required]],logo:["",this.imageValidator()],cin_id:["",[Y.AQ.required]],tax_no:["",[Y.AQ.required]],website_url:["",[Y.AQ.required]],email:["",[Y.AQ.required,Y.AQ.email,Y.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[Y.AQ.required,Y.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],business_type:["",[Y.AQ.maxLength(45),Y.AQ.required]],password:["",[this.imageValidator(),Y.AQ.minLength(5)]],status:["",[Y.AQ.required]],city:["",[Y.AQ.required]],state:["",[Y.AQ.required]],zip_code:["",[Y.AQ.required]],contact_person:["",[Y.AQ.required]]})}imageValidator(){return i=>this.urlId?null:Y.AQ.required(i)}get f(){return this.formGroup.controls}getCompanyData(){this.toggleSpinner(!0),this.api.get("company",this.urlId).subscribe(i=>{i&&i.status?(this.toggleSpinner(!1),this.setCompanyDetails(i.data[0])):this.handleError("Unexpected response format")},i=>{this.handleError(i.message||"An error occurred while fetching data")})}setCompanyDetails(i){i&&(this.formGroup.patchValue({name:i.name,address:i.address,no_of_emp:i.no_of_emp,cin_id:i.cin_id,tax_no:i.tax_no,email:i.email,password:i.password,status:i.status,mobile:i.mobile,business_type:i.business_type,city:i.city,state:i.state,zip_code:i.zip_code,contact_person:i.contact_person,website_url:i.website_url}),this.companyuploadedImage=i.logo||"")}toggleSpinner(i){this.spinnerStatus=i,this.saveButtonActive=!i,this.submitted=i}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const i=this.createFormData();this.urlId?this.updateCompany(i):this.addCompany(i)}else this.formGroup.markAllAsTouched()}createFormData(){const i=new FormData;return i.append("name",this.f.name.value),i.append("address",this.f.address.value),i.append("no_of_emp",this.f.no_of_emp.value),i.append("cin_id",this.f.cin_id.value),i.append("email",this.f.email.value),i.append("password",this.f.password.value),i.append("status",this.f.status.value),i.append("mobile",this.f.mobile.value),i.append("business_type",this.f.business_type.value),i.append("tax_no",this.f.tax_no.value),i.append("city",this.f.city.value),i.append("state",this.f.state.value),i.append("zip_code",this.f.zip_code.value),i.append("contact_person",this.f.contact_person.value),i.append("website_url",this.f.website_url.value),this.companyselectedImage&&i.append("logo",this.companyselectedImage),i}addCompany(i){this.api.post("company",i).subscribe(d=>this.handleResponse(d),d=>this.handleError(d))}updateCompany(i){this.api.put("company",this.urlId,i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}handleResponse(i){this.toggleSpinner(!1),!0===i.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["company"])):this.toastService.error(i.message)}resetForm(){this.companyselectedImage=null,this.formGroup.reset()}handleError(i){this.toggleSpinner(!1)}companyimageSelect(i){const d=i.target.files[0];d&&(this.companyselectedImage=d,this.companyselectedImagePreview=URL.createObjectURL(d))}companyremoveImage(){this.companyselectedImage=null,this.companyselectedImagePreview=null}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(A.gV),e.GI1(Y.im),e.GI1(Ee),e.GI1(A.E5),e.GI1(Oe.SA))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-add-company"]],decls:228,vars:59,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-4"],[1,"card","overflow-hidden"],[1,"ratio","ratio-16x9"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6509156.773725123!2d-123.79622260161696!3d37.19312212390098!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb9fe5f285e3d%3A0x8b5109a227086f55!2sCalifornia%2C%20USA!5e0!3m2!1sen!2sin!4v1678106410566!5m2!1sen!2sin","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[1,"card-body","pt-1"],["class","invalid-text"],[1,"avatar-lg","mt-n5","position-relative","mx-auto"],["type","file","id","companylogo","accept","image/*","formControlName","logo","hidden","",3,"change"],["companylogo",""],["for","companylogo",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","companylogo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"text-center","mt-4"],[1,"mb-2"],[1,"text-muted","mb-4","pb-2"],[1,"table-responsive","table-card"],[1,"table","align-middle","table-borderless","mb-0"],[1,"hstack","gap-2","justify-content-center","list-unstyled","mt-4","pt-2","mb-0"],["href","javascript:void(0);",1,"btn","btn-success","btn-sm"],[1,"bi","bi-whatsapp"],["href","javascript:void(0);",1,"btn","btn-primary","btn-sm"],[1,"bi","bi-facebook"],["href","javascript:void(0);",1,"btn","btn-info","btn-sm"],[1,"bi","bi-twitter"],["href","javascript:void(0);",1,"btn","btn-danger","btn-sm"],[1,"bi","bi-envelope"],[1,"col-xl-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter company name","value","name",1,"form-control",3,"ngClass"],["for","business_type",1,"form-label"],["type","text","id","business_type","formControlName","business_type","placeholder","Enter Business type","value","business_type",1,"form-control",3,"ngClass"],["for","tax_no",1,"form-label"],["type","text","id","tax_no","formControlName","tax_no","placeholder","Enter TIN","value","tax_no",1,"form-control",3,"ngClass"],["for","cin_id",1,"form-label"],["type","text","id","cin_id","formControlName","cin_id","placeholder","Enter CIN","value","cin_id",1,"form-control",3,"ngClass"],["for","no_of_emp",1,"form-label"],["type","number","id","no_of_emp","formControlName","no_of_emp","placeholder","Enter No. of employee","value","no_of_emp",1,"form-control",3,"ngClass"],["for","website_url",1,"form-label"],["type","text","id","website_url","formControlName","website_url","placeholder","Enter Website Url","value","website_url",1,"form-control",3,"ngClass"],[1,"card","mt-3"],[1,"col-lg-4"],["for","contact_person",1,"form-label"],["type","text","id","contact_person","formControlName","contact_person","placeholder","Enter Contact person","value","contact_person",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter City","value","city",1,"form-control",3,"ngClass"],["for","State",1,"form-label"],["type","text","id","State","formControlName","state","placeholder","Enter state","value","state",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","text","id","zip_code","formControlName","zip_code","placeholder","Enter zip code","value","zip_code",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","5","formControlName","address",1,"form-control",3,"ngClass"],["for","password-input",1,"form-label"],[1,"position-relative","auth-pass-inputgroup","mb-3"],["formControlName","password","type","password","placeholder","Enter password","id","password-input",1,"form-control","pe-5","password-input",3,"type","ngClass"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon"],[1,"ri-eye-fill","align-middle",3,"ngClass","click"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["class","avatar-lg mt-n5 position-relative mx-auto"],[1,"avatar-title","bg-body-secondary","rounded","shadow"],["alt","",1,"avatar-sm",3,"src"],["src","assets/images/companies/img-1.png","alt","",1,"avatar-sm"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(d,f){1&d&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"form",1),e.qCj("ngSubmit",function(){return f.onSubmit()}),e.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.wR5(6,"iframe",6),e.C$Y(),e.I0R(7,"div",7),e.yuY(8,Qt,1,1)(9,Ve,3,1)(10,Zt,3,0)(11,ei,2,0,"div",8),e.I0R(12,"div",9)(13,"input",10,11),e.qCj("change",function(H){return f.companyimageSelect(H)}),e.C$Y(),e.I0R(15,"div",12)(16,"label",13)(17,"span",14),e.wR5(18,"i",15),e.C$Y()()()(),e.I0R(19,"div",16)(20,"h5",17),e.OEk(21),e.C$Y(),e.I0R(22,"p",18),e.OEk(23),e.C$Y()(),e.I0R(24,"div",19)(25,"table",20)(26,"tbody")(27,"tr")(28,"th"),e.OEk(29,"TIN"),e.C$Y(),e.I0R(30,"td"),e.OEk(31),e.C$Y()(),e.I0R(32,"tr")(33,"th"),e.OEk(34,"CIN"),e.C$Y(),e.I0R(35,"td"),e.OEk(36),e.C$Y()(),e.I0R(37,"tr")(38,"th"),e.OEk(39,"Location"),e.C$Y(),e.I0R(40,"td"),e.OEk(41),e.C$Y()(),e.I0R(42,"tr")(43,"th"),e.OEk(44,"Website"),e.C$Y(),e.I0R(45,"td"),e.OEk(46),e.C$Y()(),e.I0R(47,"tr")(48,"th"),e.OEk(49,"Phone Number"),e.C$Y(),e.I0R(50,"td")(51,"a"),e.OEk(52),e.C$Y()()()()()(),e.I0R(53,"ul",21)(54,"li")(55,"a",22),e.wR5(56,"i",23),e.C$Y()(),e.I0R(57,"li")(58,"a",24),e.wR5(59,"i",25),e.C$Y()(),e.I0R(60,"li")(61,"a",26),e.wR5(62,"i",27),e.C$Y()(),e.I0R(63,"li")(64,"a",28),e.wR5(65,"i",29),e.C$Y()()()()()(),e.I0R(66,"div",30)(67,"div",31)(68,"div",32)(69,"h6",33),e.OEk(70,"Company Information"),e.C$Y()(),e.I0R(71,"div",34)(72,"div",35)(73,"div",2)(74,"div",36)(75,"div",37)(76,"label",38),e.OEk(77,"Company name "),e.I0R(78,"span",39),e.OEk(79,"*"),e.C$Y()(),e.wR5(80,"input",40),e.yuY(81,rt,2,0,"div",8)(82,Kt,2,0,"div",8),e.C$Y()(),e.I0R(83,"div",36)(84,"div",37)(85,"label",41),e.OEk(86,"Business type "),e.I0R(87,"span",39),e.OEk(88,"*"),e.C$Y()(),e.wR5(89,"input",42),e.yuY(90,Yt,2,0,"div",8)(91,Nt,2,0,"div",8),e.C$Y()(),e.I0R(92,"div",36)(93,"div",37)(94,"label",43),e.OEk(95,"Tax Identification Number (TIN) "),e.I0R(96,"span",39),e.OEk(97,"*"),e.C$Y()(),e.wR5(98,"input",44),e.yuY(99,ct,2,0,"div",8),e.C$Y()(),e.I0R(100,"div",36)(101,"div",37)(102,"label",45),e.OEk(103,"Corporate Identification Number (CIN) "),e.I0R(104,"span",39),e.OEk(105,"*"),e.C$Y()(),e.wR5(106,"input",46),e.yuY(107,Vt,2,0,"div",8),e.C$Y()(),e.I0R(108,"div",36)(109,"div",37)(110,"label",47),e.OEk(111,"No. of Employee "),e.I0R(112,"span",39),e.OEk(113,"*"),e.C$Y()(),e.wR5(114,"input",48),e.yuY(115,qt,2,0,"div",8),e.C$Y()(),e.I0R(116,"div",36)(117,"div",37)(118,"label",49),e.OEk(119,"Website Url"),e.I0R(120,"span",39),e.OEk(121,"*"),e.C$Y()(),e.wR5(122,"input",50),e.yuY(123,ri,2,0,"div",8),e.C$Y()()()()()(),e.I0R(124,"div",51)(125,"div",32)(126,"h6",33),e.OEk(127,"Contact Information"),e.C$Y()(),e.I0R(128,"div",34)(129,"div",35)(130,"div",2)(131,"div",52)(132,"div",37)(133,"label",53),e.OEk(134,"Contact person "),e.I0R(135,"span",39),e.OEk(136,"*"),e.C$Y()(),e.wR5(137,"input",54),e.yuY(138,Li,2,0,"div",8),e.C$Y()(),e.I0R(139,"div",52)(140,"div",37)(141,"label",55),e.OEk(142,"Email "),e.I0R(143,"span",39),e.OEk(144,"*"),e.C$Y()(),e.wR5(145,"input",56),e.yuY(146,ai,2,0,"div",8)(147,fi,2,0,"div",8),e.C$Y()(),e.I0R(148,"div",52)(149,"div",37)(150,"label",57),e.OEk(151,"Contact Number "),e.I0R(152,"span",39),e.OEk(153,"*"),e.C$Y()(),e.wR5(154,"input",58),e.yuY(155,Mi,2,0,"div",8)(156,Yi,2,0,"div",8),e.C$Y()()()()()(),e.I0R(157,"div",51)(158,"div",32)(159,"h6",33),e.OEk(160,"Address Information"),e.C$Y()(),e.I0R(161,"div",34)(162,"div",35)(163,"div",2)(164,"div",52)(165,"div",37)(166,"label",59),e.OEk(167,"City "),e.I0R(168,"span",39),e.OEk(169,"*"),e.C$Y()(),e.wR5(170,"input",60),e.yuY(171,mn,2,0,"div",8),e.C$Y()(),e.I0R(172,"div",52)(173,"div",37)(174,"label",61),e.OEk(175,"State "),e.I0R(176,"span",39),e.OEk(177,"*"),e.C$Y()(),e.wR5(178,"input",62),e.yuY(179,ln,2,0,"div",8),e.C$Y()(),e.I0R(180,"div",52)(181,"div",37)(182,"label",63),e.OEk(183,"Zip code "),e.I0R(184,"span",39),e.OEk(185,"*"),e.C$Y()(),e.wR5(186,"input",64),e.yuY(187,zn,2,0,"div",8),e.C$Y()(),e.I0R(188,"div",65)(189,"div",37)(190,"label",66),e.OEk(191," Address "),e.I0R(192,"span",39),e.OEk(193,"*"),e.C$Y()(),e.wR5(194,"textarea",67),e.yuY(195,jt,2,0,"div",8)(196,Di,2,0,"div",8),e.C$Y()(),e.I0R(197,"div",52)(198,"div",37)(199,"label",68),e.OEk(200,"Password "),e.I0R(201,"span",39),e.OEk(202,"*"),e.C$Y()(),e.I0R(203,"div",69),e.wR5(204,"input",70),e.I0R(205,"button",71)(206,"i",72),e.qCj("click",function(){return f.toggleFieldTextType()}),e.C$Y()(),e.yuY(207,qi,2,0,"div",8)(208,Hn,2,0,"div",8),e.C$Y()()(),e.I0R(209,"div",52)(210,"div",37)(211,"label",73),e.OEk(212,"Status "),e.I0R(213,"span",39),e.OEk(214,"*"),e.C$Y()(),e.I0R(215,"select",74)(216,"option",75),e.OEk(217,"Select Status"),e.C$Y(),e.I0R(218,"option",76),e.OEk(219,"Active"),e.C$Y(),e.I0R(220,"option",77),e.OEk(221,"Inactive"),e.C$Y()(),e.yuY(222,Rn,2,0,"div",8),e.C$Y()(),e.I0R(223,"div",78)(224,"div",79),e.yuY(225,xn,2,0,"button",80)(226,Pi,3,0),e.C$Y()()()()()()(),e.yuY(227,gr,4,0,"div",81),e.C$Y()()),2&d&&(e.E7m("title",f.urlId?"Edit Company":"Add Company")("breadcrumbItems",f.breadCrumbItems),e.yG2(),e.E7m("formGroup",f.formGroup),e.yG2(7),e.C0Y(8,f.companyselectedImage?8:f.companyuploadedImage?9:10),e.yG2(3),e.C0Y(11,f.f.logo&&f.f.logo.hasError("required")&&f.f.logo.touched?11:-1),e.yG2(10),e.cNF(f.f.name.value),e.yG2(2),e.cNF(f.f.business_type.value),e.yG2(8),e.cNF(f.f.tax_no.value),e.yG2(5),e.cNF(f.f.cin_id.value),e.yG2(5),e.cNF(f.f.address.value),e.yG2(5),e.cNF(f.f.website_url.value),e.yG2(6),e.cNF(f.f.mobile.value),e.yG2(28),e.E7m("ngClass",f.f.name&&f.f.name.hasError("required")&&f.f.name.touched?"is-invalid":""),e.yG2(),e.C0Y(81,f.f.name&&f.f.name.hasError("required")&&f.f.name.touched?81:-1),e.yG2(),e.C0Y(82,f.f.name&&f.f.name.hasError("maxlength")&&f.f.name.touched?82:-1),e.yG2(7),e.E7m("ngClass",f.f.business_type&&f.f.business_type.hasError("required")&&f.f.business_type.touched?"is-invalid":""),e.yG2(),e.C0Y(90,f.f.business_type&&f.f.business_type.hasError("required")&&f.f.business_type.touched?90:-1),e.yG2(),e.C0Y(91,f.f.business_type&&f.f.business_type.hasError("maxlength")&&f.f.business_type.touched?91:-1),e.yG2(7),e.E7m("ngClass",f.f.tax_no&&f.f.tax_no.hasError("required")&&f.f.tax_no.touched?"is-invalid":""),e.yG2(),e.C0Y(99,f.f.tax_no&&f.f.tax_no.hasError("required")&&f.f.tax_no.touched?99:-1),e.yG2(7),e.E7m("ngClass",f.f.cin_id&&f.f.cin_id.hasError("required")&&f.f.cin_id.touched?"is-invalid":""),e.yG2(),e.C0Y(107,f.f.cin_id&&f.f.cin_id.hasError("required")&&f.f.cin_id.touched?107:-1),e.yG2(7),e.E7m("ngClass",f.f.no_of_emp&&f.f.no_of_emp.hasError("required")&&f.f.no_of_emp.touched?"is-invalid":""),e.yG2(),e.C0Y(115,f.f.no_of_emp&&f.f.no_of_emp.hasError("required")&&f.f.no_of_emp.touched?115:-1),e.yG2(7),e.E7m("ngClass",f.f.website_url&&f.f.website_url.hasError("required")&&f.f.website_url.touched?"is-invalid":""),e.yG2(),e.C0Y(123,f.f.website_url&&f.f.website_url.hasError("required")&&f.f.website_url.touched?123:-1),e.yG2(14),e.E7m("ngClass",f.f.contact_person&&f.f.contact_person.hasError("required")&&f.f.contact_person.touched?"is-invalid":""),e.yG2(),e.C0Y(138,f.f.contact_person&&f.f.contact_person.hasError("required")&&f.f.contact_person.touched?138:-1),e.yG2(7),e.E7m("ngClass",f.f.email&&f.f.email.hasError("required")&&f.f.email.touched?"is-invalid":""),e.yG2(),e.C0Y(146,f.f.email&&f.f.email.hasError("required")&&f.f.email.touched?146:-1),e.yG2(),e.C0Y(147,f.f.email.hasError("pattern")?147:-1),e.yG2(7),e.E7m("ngClass",f.f.mobile&&f.f.mobile.hasError("required")&&f.f.mobile.touched?"is-invalid":""),e.yG2(),e.C0Y(155,f.f.mobile&&f.f.mobile.hasError("required")&&f.f.mobile.touched?155:-1),e.yG2(),e.C0Y(156,f.f.mobile.hasError("pattern")?156:-1),e.yG2(14),e.E7m("ngClass",f.f.city&&f.f.city.hasError("required")&&f.f.city.touched?"is-invalid":""),e.yG2(),e.C0Y(171,f.f.city&&f.f.city.hasError("required")&&f.f.city.touched?171:-1),e.yG2(7),e.E7m("ngClass",f.f.state&&f.f.state.hasError("required")&&f.f.state.touched?"is-invalid":""),e.yG2(),e.C0Y(179,f.f.state&&f.f.state.hasError("required")&&f.f.state.touched?179:-1),e.yG2(7),e.E7m("ngClass",f.f.zip_code&&f.f.zip_code.hasError("required")&&f.f.zip_code.touched?"is-invalid":""),e.yG2(),e.C0Y(187,f.f.zip_code&&f.f.zip_code.hasError("required")&&f.f.zip_code.touched?187:-1),e.yG2(7),e.E7m("ngClass",e.S45(52,tr,f.f.address&&f.f.address.errors&&f.f.address.touched)),e.yG2(),e.C0Y(195,f.f.address&&f.f.address.hasError("required")&&f.f.address.touched?195:-1),e.yG2(),e.C0Y(196,f.f.address&&f.f.address.hasError("maxlength")&&f.f.address.touched?196:-1),e.yG2(8),e.E7m("type",f.fieldTextType?"text":"password")("ngClass",e.S45(54,tr,f.submitted&&f.f.password.errors)),e.yG2(2),e.E7m("ngClass",e.IBC(56,qn,!f.fieldTextType,f.fieldTextType)),e.yG2(),e.C0Y(207,f.f.password&&f.f.password.hasError("required")&&f.f.password.touched?207:-1),e.yG2(),e.C0Y(208,f.f.password&&f.f.password.hasError("minlength")&&f.f.password.touched?208:-1),e.yG2(7),e.E7m("ngClass",f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(222,f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?222:-1),e.yG2(3),e.C0Y(225,f.saveButtonActive?225:226),e.yG2(2),e.C0Y(227,f.spinnerStatus?227:-1))},dependencies:[Ye.QF,Xe.O,Y.sz,Y.wd,Y.GO,Y.ot,Y.O4,Y.GC,Y.ue,Y.u,Y.uW,Y.Wo],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.match-parent[_ngcontent-%COMP%]{width:100%;height:500px}.mt-n5[_ngcontent-%COMP%]{margin-top:-5rem!important}"]})}return v})();var Ui=Ot(5140),cn=Ot(1768);const Vi=["showModal"],Oi=["deleteRecordModal"];function Bn(v,l){if(1&v&&e.wR5(0,"img",79),2&v){const i=e.GaO().$implicit;e._6D("src",i.image,e.K6U)}}function $i(v,l){1&v&&e.wR5(0,"img",80)}const gi=()=>({tab:"personalDetails"});function un(v,l){if(1&v){const i=e.KQA();e.I0R(0,"ul",81)(1,"li")(2,"a",82),e.wR5(3,"i",83),e.OEk(4," View"),e.C$Y()(),e.I0R(5,"li")(6,"a",84),e.wR5(7,"i",85),e.OEk(8," Edit"),e.C$Y()(),e.I0R(9,"li")(10,"a",86),e.qCj("click",function(){e.usT(i);const f=e.GaO().$implicit,O=e.GaO();return e.CGJ(O.removeItem(f.id))}),e.wR5(11,"i",87),e.OEk(12," Remove"),e.C$Y()()()}if(2&v){const i=e.GaO().$implicit;e.yG2(2),e.CI5("routerLink","/employee-detail/",i.id,""),e.E7m("queryParams",e.q4q(3,gi)),e.yG2(4),e.CI5("routerLink","/edit-employee/",i.id,"")}}const Mn=(v,l)=>({"bg-info-subtle text-info":v,"bg-danger-subtle text-danger":l});function Tr(v,l){if(1&v){const i=e.KQA();e.I0R(0,"tr",58)(1,"td")(2,"div",23)(3,"input",59),e.iHE("ngModelChange",function(f){const H=e.usT(i).$implicit;return e.kNx(H.states,f)||(H.states=f),e.CGJ(f)}),e.qCj("change",function(f){e.usT(i);const O=e.GaO();return e.CGJ(O.onCheckboxChange(f))}),e.C$Y(),e.wR5(4,"label",60),e.C$Y()(),e.I0R(5,"td",61)(6,"a",62),e.OEk(7,"#TB01"),e.C$Y()(),e.I0R(8,"td",63)(9,"div",64)(10,"div",65),e.yuY(11,Bn,1,1,"img",66)(12,$i,1,0),e.C$Y(),e.I0R(13,"div")(14,"h6",67)(15,"a",68),e.OEk(16),e.C$Y()()()()(),e.I0R(17,"td",69),e.OEk(18),e.C$Y(),e.I0R(19,"td",69),e.OEk(20),e.C$Y(),e.I0R(21,"td",69),e.OEk(22),e.C$Y(),e.I0R(23,"td",69),e.OEk(24),e.C$Y(),e.I0R(25,"td",70)(26,"div",71)(27,"input",72),e.qCj("change",function(f){const H=e.usT(i).$implicit,ne=e.GaO();return e.CGJ(ne.setStatus(H.id,f))}),e.C$Y(),e.I0R(28,"label",73)(29,"span",74),e.OEk(30),e.C$Y()()()(),e.I0R(31,"td")(32,"div",75)(33,"button",76),e.wR5(34,"i",77),e.C$Y(),e.yuY(35,un,13,4,"ul",78),e.C$Y()()()}if(2&v){const i=l.$implicit,d=l.$index;e.CI5("id","p_",i._id,""),e.yG2(3),e._6D("value",i._id),e.OKB("ngModel",i.states),e.yG2(8),e.C0Y(11,i.image?11:12),e.yG2(5),e.cNF(i.name),e.yG2(2),e.oRS(" ",i.mobile," "),e.yG2(2),e.oRS(" ",i.employee_id," "),e.yG2(2),e.oRS(" ",i.designation," "),e.yG2(2),e.oRS(" ",i.department," "),e.yG2(3),e.E7m("checked","active"===i.status)("id","customSwitchsizemd"+d),e.yG2(),e.E7m("for","customSwitchsizemd"+d),e.yG2(),e.E7m("ngClass",e.IBC(14,Mn,"active"===i.status,"inactive"===i.status)),e.yG2(),e.oRS(" ",i.status," ")}}function kr(v,l){1&v&&(e.I0R(0,"div",28)(1,"div",88)(2,"span",89),e.OEk(3,"Loading..."),e.C$Y()()())}let xr=(()=>{class v{constructor(i,d,f){this.formBuilder=i,this.api=d,this.toastService=f,this.spinnerStatus=!1,this.employeeData=[],this.employeeDataList=[],this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management",active:!0},{label:"Employees",active:!0}];const i=localStorage.getItem("currentUser");if(i){const d=JSON.parse(i);this.company_id=d.id}this.getemployeeData()}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe(d=>{d&&d.status?(this.toggleSpinner(!1),this.employeeData=d.data||[],this.employeeDataList=d.data||[]):this.handleError("Unexpected response format")},d=>{this.handleError(d.message||"An error occurred while fetching data")})}setStatus(i,d){const O=d.target.checked?"active":"inactive",H=new FormData;H.append("status",O),this.toggleSpinner(!0),this.api.put("employees",i,H).subscribe(ne=>this.handleStatusChangeResponse(ne),ne=>this.handleError(ne))}toggleSpinner(i){this.spinnerStatus=i}handleStatusChangeResponse(i){this.toggleSpinner(!1),!0===i.status?(this.toastService.success("Data Saved Successfully!!"),this.getemployeeData()):this.toastService.error(i.message)}removeItem(i){this.deleteId=i,this.deleteRecordModal?.show()}deleteData(i){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),i&&this.api.deleteWithId("employees",i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f));const d=this.checkedValGet;d&&d.length>0&&this.api.post("employees-delete-multiple",{ids:d}).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}handleResponse(i){this.toggleSpinner(!1),!0===i.status?(this.toastService.success("Employee Data Delete Successfully!!"),this.getemployeeData(),this.showModal?.hide()):this.toastService.error(i.message)}handleError(i){this.toggleSpinner(!1)}onSort(i){this.direction="asc"==this.direction?"desc":"asc";const d=[...this.employeeData];d.sort((f,O)=>{const H=this.compare(f[i],O[i]);return"asc"===this.direction?H:-H}),this.employeeData=d}compare(i,d){return i<d?-1:i>d?1:0}pageChanged(i){const d=(i.page-1)*i.itemsPerPage;this.endItem=i.page*i.itemsPerPage,this.employeeData=this.employeeDataList.slice(d,this.endItem)}filterdata(){this.employeeData=this.term?this.employeeDataList.filter(i=>i.name.toLowerCase().includes(this.term.toLowerCase())||i.mobile.toLowerCase().includes(this.term.toLowerCase())||i.email.toLowerCase().includes(this.term.toLowerCase())||i.designation.toLowerCase().includes(this.term.toLowerCase())||i.department.toLowerCase().includes(this.term.toLowerCase())||i.employee_id.toLowerCase().includes(this.term.toLowerCase())):this.employeeDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const i=document.querySelector(".noresult"),d=document.getElementById("pagination-element");this.term&&0===this.employeeData.length?(i.style.display="block",d.classList.add("d-none")):(i.style.display="none",d.classList.remove("d-none"))}onCheckboxChange(i){for(var d=[],O=0;O<this.employeeData.length;O++)1==this.employeeData[O].states&&d.push(this.employeeData[O].id);this.checkedValGet=d,d.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(i){this.employeeData=this.employeeData.map(H=>({...H,states:i.target.checked}));for(var d=[],O=0;O<this.employeeData.length;O++)1==this.employeeData[O].states&&d.push(this.employeeData[O].id);this.checkedValGet=d,d.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(Y.im),e.GI1(Ee),e.GI1(Oe.SA))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-employee-list"]],viewQuery:function(d,f){if(1&d&&(e.CC$(Vi,5),e.CC$(Oi,5)),2&d){let O;e.wto(O=e.Gqi())&&(f.showModal=O.first),e.wto(O=e.Gqi())&&(f.deleteRecordModal=O.first)}},decls:90,vars:10,consts:[["title","Employees List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name, mobile,etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button","routerLink","/add-employee",1,"btn","btn-primary","add-btn"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"text-danger"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","","class","img-fluid d-block",3,"src"],[1,"mb-0"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"category"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ph-pencil","align-middle","me-1"],[1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(d,f){if(1&d){const O=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),e.OEk(8," Employeess "),e.I0R(9,"span",8),e.OEk(10),e.C$Y()()(),e.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),e.iHE("ngModelChange",function(ne){return e.kNx(f.term,ne)||(f.term=ne),ne}),e.qCj("keyup",function(){return f.filterdata()}),e.C$Y(),e.wR5(16,"i",14),e.C$Y()(),e.I0R(17,"button",15),e.qCj("click",function(){e.usT(O);const ne=e.Gew(71);return e.CGJ(ne.show())}),e.wR5(18,"i",16),e.C$Y(),e.I0R(19,"button",17),e.wR5(20,"i",18),e.OEk(21," Add Employee "),e.C$Y()()()(),e.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),e.iHE("ngModelChange",function(ne){return e.kNx(f.masterSelected,ne)||(f.masterSelected=ne),ne}),e.qCj("change",function(ne){return f.checkUncheckAll(ne)}),e.C$Y(),e.wR5(30,"label",25),e.C$Y()(),e.I0R(31,"th",26),e.qCj("click",function(){return f.onSort("name")}),e.OEk(32," Employee Name "),e.C$Y(),e.I0R(33,"th",26),e.qCj("click",function(){return f.onSort("mobile")}),e.OEk(34," Mobile "),e.C$Y(),e.I0R(35,"th",26),e.qCj("click",function(){return f.onSort("employee_id")}),e.OEk(36," Employee ID "),e.C$Y(),e.I0R(37,"th",26),e.qCj("click",function(){return f.onSort("designation")}),e.OEk(38," Designation "),e.C$Y(),e.I0R(39,"th",26),e.qCj("click",function(){return f.onSort("department")}),e.OEk(40," Department "),e.C$Y(),e.I0R(41,"th",26),e.qCj("click",function(){return f.onSort("status")}),e.OEk(42," Status "),e.C$Y(),e.I0R(43,"th"),e.OEk(44,"Action"),e.C$Y()()(),e.I0R(45,"tbody",27),e.c53(46,Tr,36,17,"tr",58,e.wJt),e.C$Y(),e.yuY(48,kr,4,0,"div",28),e.C$Y()(),e.I0R(49,"div",29)(50,"div",30)(51,"div",31)(52,"div",32),e.wR5(53,"i",33),e.C$Y()(),e.I0R(54,"h5",34),e.OEk(55,"Sorry! No Result Found"),e.C$Y(),e.I0R(56,"p",35),e.OEk(57),e.C$Y()()(),e.I0R(58,"div",36)(59,"div",37)(60,"div",38),e.OEk(61," Showing "),e.I0R(62,"span",39),e.OEk(63),e.C$Y(),e.OEk(64," of "),e.I0R(65,"span",39),e.OEk(66),e.C$Y(),e.OEk(67," Results "),e.C$Y()(),e.I0R(68,"div",40)(69,"pagination",41),e.qCj("pageChanged",function(ne){return f.pageChanged(ne)}),e.C$Y()()()()()()()(),e.I0R(70,"div",42,43)(72,"div",44)(73,"div",45)(74,"div",46)(75,"button",47),e.qCj("click",function(){e.usT(O);const ne=e.Gew(71);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(76,"div",48)(77,"div",49)(78,"div",50),e.wR5(79,"i",51),e.C$Y(),e.I0R(80,"div",52)(81,"h3",53),e.OEk(82,"Are you sure ?"),e.C$Y(),e.I0R(83,"p",54),e.OEk(84," Are you sure you want to remove this record ? "),e.C$Y()()(),e.I0R(85,"div",55)(86,"button",56),e.qCj("click",function(){e.usT(O);const ne=e.Gew(71);return e.CGJ(ne.hide())}),e.OEk(87," Close "),e.C$Y(),e.I0R(88,"button",57),e.qCj("click",function(){return f.deleteData(f.deleteId)}),e.OEk(89," Yes, Delete It! "),e.C$Y()()()()()()}2&d&&(e.E7m("breadcrumbItems",f.breadCrumbItems),e.yG2(10),e.cNF(null==f.employeeDataList?null:f.employeeDataList.length),e.yG2(5),e.OKB("ngModel",f.term),e.yG2(14),e.OKB("ngModel",f.masterSelected),e.yG2(17),e.oho(f.employeeData),e.yG2(2),e.C0Y(48,f.spinnerStatus?48:-1),e.yG2(9),e.oRS(" We've searched ",f.employeeDataList.length," Department We did not find any Department for you search. "),e.yG2(6),e.cNF(null==f.employeeData?null:f.employeeData.length),e.yG2(3),e.cNF(null==f.employeeDataList?null:f.employeeDataList.length),e.yG2(3),e.E7m("totalItems",null==f.employeeDataList?null:f.employeeDataList.length)("itemsPerPage",10))},dependencies:[Ye.QF,Xe.O,A.ER,Ui.uo,Ui.M3,Ui.mY,Y.ot,Y.SU,Y.ue,Y._G,et.im,cn.uK],styles:[".uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}"]})}return v})();const _r=["showModal"],ir=["showModalDepartment"];function yn(v,l){if(1&v&&e.wR5(0,"img",98),2&v){const i=e.GaO(2);e.E7m("src",i.employeeselectedImagePreview,e.K6U)}}function qr(v,l){if(1&v&&e.yuY(0,yn,1,1,"img",97),2&v){const i=e.GaO();e.C0Y(0,i.employeeselectedImagePreview?0:-1)}}function Sr(v,l){if(1&v&&e.wR5(0,"img",99),2&v){const i=e.GaO();e.E7m("src",i.employeeuploadedImage,e.K6U)}}function ys(v,l){1&v&&e.wR5(0,"img",100)}function Kn(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Image is required."),e.C$Y())}function fr(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Empolyee name is required."),e.C$Y())}function sr(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Empolyee name must be at most 45 characters "),e.C$Y())}function vr(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Employee Id is required."),e.C$Y())}function Yr(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Email is required."),e.C$Y())}function xt(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Email must be a valid email address "),e.C$Y())}function De(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Mobile is required."),e.C$Y())}function ze(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Please, Enter 10 digit Mobile Number. "),e.C$Y())}function at(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Date of Birth is required."),e.C$Y())}function st(v,l){if(1&v&&(e.I0R(0,"option",102),e.OEk(1),e.C$Y()),2&v){const i=l.$implicit;e._6D("value",i.slug),e.yG2(),e.cNF(i.name)}}function It(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Designation is required."),e.C$Y())}function Ht(v,l){if(1&v&&(e.I0R(0,"option",102),e.OEk(1),e.C$Y()),2&v){const i=l.$implicit;e._6D("value",i.slug),e.yG2(),e.cNF(i.name)}}function Gt(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Department is required."),e.C$Y())}function Ie(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Gender is required."),e.C$Y())}function He(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Address is required."),e.C$Y())}function Pe(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Address must be at most 100 characters "),e.C$Y())}function bt(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"City is required."),e.C$Y())}function Mt(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Zip code is required. "),e.C$Y())}function xi(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Invalid zip code. "),e.C$Y())}function Ke(v,l){if(1&v&&(e.I0R(0,"div"),e.yuY(1,Mt,2,0,"div",103)(2,xi,2,0,"div",103),e.C$Y()),2&v){const i=e.GaO();e.yG2(),e.E7m("ngIf",null==i.f.zip_code?null:i.f.zip_code.hasError("required")),e.yG2(),e.E7m("ngIf",null==i.f.zip_code?null:i.f.zip_code.hasError("maxlength"))}}function ot(v,l){if(1&v&&(e.I0R(0,"option",102),e.OEk(1),e.C$Y()),2&v){const i=l.$implicit;e.E7m("value",i),e.yG2(),e.oRS(" ",i," ")}}function Ue(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"State is required."),e.C$Y())}function je(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Status is required."),e.C$Y())}function Le(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Password is required. "),e.C$Y())}const Fe=v=>({"is-invalid":v}),ht=(v,l)=>({"mdi-eye-off-outline":v,"mdi-eye-outline":l});function Rt(v,l){if(1&v){const i=e.KQA();e.I0R(0,"div",56)(1,"div",104)(2,"label",105),e.OEk(3,"New Password*"),e.C$Y(),e.I0R(4,"div",106)(5,"input",107),e.qCj("input",function(){e.usT(i);const f=e.GaO();return e.CGJ(f.checkPasswordPattern())}),e.C$Y(),e.I0R(6,"button",108),e.qCj("click",function(){e.usT(i);const f=e.GaO();return e.CGJ(f.toggleFieldTextType1())}),e.wR5(7,"i",109),e.C$Y()(),e.yuY(8,Le,2,0,"div",103),e.C$Y()()}if(2&v){const i=e.GaO();e.yG2(5),e.E7m("type",i.fieldTextType1?"text":"password")("ngClass",e.S45(4,Fe,i.f.password.hasError("required")&&i.f.password.touched)),e.yG2(2),e.E7m("ngClass",e.IBC(6,ht,!i.fieldTextType1,i.fieldTextType1)),e.yG2(),e.E7m("ngIf",i.f.password.hasError("required")&&i.f.password.touched)}}function pi(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Confirm Password is required. "),e.C$Y())}function si(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Password and Confirm Password does not match. "),e.C$Y())}function Si(v,l){if(1&v){const i=e.KQA();e.I0R(0,"div",56)(1,"div",104)(2,"label",110),e.OEk(3,"Confirm Password*"),e.C$Y(),e.I0R(4,"div",106),e.wR5(5,"input",111),e.I0R(6,"button",108),e.qCj("click",function(){e.usT(i);const f=e.GaO();return e.CGJ(f.toggleFieldTextType2())}),e.wR5(7,"i",109),e.C$Y()(),e.yuY(8,pi,2,0,"div",103)(9,si,2,0,"div",103),e.C$Y()()}if(2&v){const i=e.GaO();e.yG2(5),e.E7m("type",i.fieldTextType2?"text":"password")("ngClass",e.S45(5,Fe,i.f.confirmPassword.hasError("required")&&i.f.confirmPassword.touched)),e.yG2(2),e.E7m("ngClass",e.IBC(7,ht,!i.fieldTextType2,i.fieldTextType2)),e.yG2(),e.E7m("ngIf",i.f.confirmPassword.hasError("required")&&i.f.confirmPassword.touched),e.yG2(),e.E7m("ngIf",i.formGroup.hasError("mismatch")&&(null==i.f.confirmPassword?null:i.f.confirmPassword.value)&&(null==i.f.password?null:i.f.password.value))}}function Qi(v,l){if(1&v&&(e.I0R(0,"div",112)(1,"div",113)(2,"div",20)(3,"div",114)(4,"h5",115),e.OEk(5,"Password must contain:"),e.C$Y()(),e.I0R(6,"div")(7,"p",116),e.OEk(8," Minimum "),e.I0R(9,"b"),e.OEk(10,"8 characters"),e.C$Y()(),e.I0R(11,"p",117),e.OEk(12," At least "),e.I0R(13,"b"),e.OEk(14,"one lowercase"),e.C$Y(),e.OEk(15," letter (a-z) "),e.C$Y(),e.I0R(16,"p",118),e.OEk(17," At least "),e.I0R(18,"b"),e.OEk(19,"one uppercase"),e.C$Y(),e.OEk(20," letter (A-Z) "),e.C$Y(),e.I0R(21,"p",119),e.OEk(22," At least "),e.I0R(23,"b"),e.OEk(24,"one number"),e.C$Y(),e.OEk(25," (0-9) "),e.C$Y()()()()()),2&v){const i=e.GaO();e.yG2(7),e.E7m("ngClass",i.passwordValidations.length?"valid":"invalid"),e.yG2(4),e.E7m("ngClass",i.passwordValidations.lower?"valid":"invalid"),e.yG2(5),e.eAK("valid",i.passwordValidations.upper),e.E7m("ngClass",i.passwordValidations.upper?"valid":"invalid"),e.yG2(5),e.E7m("ngClass",i.passwordValidations.number?"valid":"invalid")}}function Bi(v,l){1&v&&(e.I0R(0,"button",120),e.OEk(1,"Save"),e.C$Y())}function Tn(v,l){1&v&&(e.I0R(0,"button",121),e.wR5(1,"span",122),e.OEk(2," Please wait "),e.C$Y())}function Dn(v,l){1&v&&(e.I0R(0,"div",77)(1,"div",123)(2,"span",124),e.OEk(3,"Loading..."),e.C$Y()()())}function In(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Designation name is required."),e.C$Y())}function tt(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Designation name must be at most 45 characters "),e.C$Y())}function di(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Status is required."),e.C$Y())}function ue(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Department name is required."),e.C$Y())}function n(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1," Department name must be at most 45 characters "),e.C$Y())}function s(v,l){1&v&&(e.I0R(0,"div",101),e.OEk(1,"Status is required."),e.C$Y())}let c=(()=>{class v{constructor(i,d,f,O,H){this.route=i,this.formBuilder=d,this.api=f,this.router=O,this.toastService=H,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeselectedImage=null,this.employeeselectedImagePreview=null,this.employeeuploadedImage=null,this.states=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep","Delhi","Puducherry","Ladakh","Jammu and Kashmir"],this.fieldTextType1=!1,this.fieldTextType2=!1,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1},this.useDefaultPassword=!0,this.departments=[],this.designations=[]}ngOnInit(){this.breadCrumbItems=[{label:"Employee",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(d=>{this.urlId=d.id?Number(d.id):null}),this.initializeForm(),this.urlId&&(this.useDefaultPassword=!1,this.getemployeeData());const i=localStorage.getItem("currentUser");if(i){const d=JSON.parse(i);this.company_id=d.id}this.updateFormControls(),this.getDepartment(),this.getDesignation(),this.formGroupDesignation=this.formBuilder.group({name:["",[Y.AQ.maxLength(45),Y.AQ.required]],status:["",[Y.AQ.required]]}),this.formGroupDepartment=this.formBuilder.group({name:["",[Y.AQ.maxLength(45),Y.AQ.required]],status:["",[Y.AQ.required]]})}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[Y.AQ.maxLength(45),Y.AQ.required]],address:["",[Y.AQ.maxLength(100),Y.AQ.required]],dob:["",[Y.AQ.required]],image:["",this.imageValidator()],emp_id:["",[Y.AQ.required]],email:["",[Y.AQ.required,Y.AQ.email,Y.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[Y.AQ.required,Y.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],status:["",[Y.AQ.required]],gender:["",[Y.AQ.required]],state:["",[Y.AQ.required]],city:["",[Y.AQ.required]],zip_code:["",[Y.AQ.required,Y.AQ.maxLength(6)]],designation:["",[Y.AQ.required]],department:["",[Y.AQ.required]],joining_date:[""],password:[this.urlId?"":"123456",this.urlId?[Y.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/)]:[Y.AQ.required,Y.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/)]],confirmPassword:[this.urlId?"":"123456",this.urlId?[]:[Y.AQ.required]]},{validator:this.passwordMatchValidator})}imageValidator(){}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}passwordMatchValidator(i){const d=i.get("password")?.value,f=i.get("confirmPassword")?.value;return d&&f?d===f?null:{mismatch:!0}:null}checkPasswordPattern(){const i=this.formGroup.get("password")?.value;this.passwordValidations.length=i.length>=8,this.passwordValidations.lower=/[a-z]/.test(i),this.passwordValidations.upper=/[A-Z]/.test(i),this.passwordValidations.number=/\d/.test(i)}onCheckboxChange(i){this.useDefaultPassword=i.target.checked,this.updateFormControls()}updateFormControls(){this.useDefaultPassword?(this.formGroup.get("password")?.setValue("123456"),this.formGroup.get("confirmPassword")?.setValue("123456"),this.formGroup.get("password")?.disable(),this.formGroup.get("confirmPassword")?.disable()):(this.formGroup.get("password")?.enable(),this.formGroup.get("confirmPassword")?.enable(),this.formGroup.get("password")?.setValue(""),this.formGroup.get("confirmPassword")?.setValue(""))}get f(){return this.formGroup.controls}get d(){return this.formGroupDesignation.controls}get de(){return this.formGroupDepartment.controls}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department?status=active").subscribe(i=>{this.toggleSpinner(!1),this.departments=i&&i.status?i.data:[]},i=>{this.toggleSpinner(!1),this.handleError(i.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid("designation?status=active").subscribe(i=>{this.toggleSpinner(!1),this.designations=i&&i.status?i.data:[]},i=>{this.toggleSpinner(!1),this.handleError(i.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(i=>{i&&i.status?(this.toggleSpinner(!1),this.setemployeeDetails(i.data[0])):this.handleError("Unexpected response format")},i=>{this.handleError(i.message||"An error occurred while fetching data")})}setemployeeDetails(i){i&&(this.formGroup.patchValue({name:i.name,address:i.address,dob:i.dob,emp_id:i.employee_id,email:i.email,password:i.password,status:i.status,mobile:i.mobile,joining_date:i.joining_date,gender:i.gender,designation:i.designation,department:i.department,state:i.state,city:i.city,zip_code:i.zip_code}),this.employeeuploadedImage=i.image||"")}toggleSpinner(i){this.spinnerStatus=i,this.saveButtonActive=!i,this.submitted=i}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const i=this.createFormData();this.urlId?this.updateemployee(i):this.addemployee(i)}else this.formGroup.markAllAsTouched()}createFormData(){const i=new FormData;return i.append("company_id",this.company_id),i.append("name",this.f.name.value),i.append("mobile",this.f.mobile.value),i.append("email",this.f.email.value),i.append("address",this.f.address.value),i.append("dob",this.f.dob.value),i.append("employee_id",this.f.emp_id.value),i.append("status",this.f.status.value),i.append("joining_date",this.f.joining_date.value),i.append("gender",this.f.gender.value),i.append("designation",this.f.designation.value),i.append("department",this.f.department.value),i.append("state",this.f.state.value),i.append("city",this.f.city.value),i.append("zip_code",this.f.zip_code.value),this.f.password.value&&i.append("password",this.f.password.value),this.employeeselectedImage&&i.append("image",this.employeeselectedImage),i}addemployee(i){this.api.post("employees",i).subscribe(d=>this.handleResponse(d),d=>this.handleError(d))}updateemployee(i){this.api.put("employees",this.urlId,i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}handleResponse(i){this.toggleSpinner(!1),!0===i.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["employee"])):this.toastService.error(i.message)}resetForm(){this.employeeselectedImage=null,this.formGroup.reset()}handleError(i){this.toggleSpinner(!1)}employeeimageSelect(i){const d=i.target.files[0];d&&(this.employeeselectedImage=d,this.employeeselectedImagePreview=URL.createObjectURL(d))}employeeremoveImage(){this.employeeselectedImage=null,this.employeeselectedImagePreview=null}onAdd(){this.resetFormDes(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDes(){this.formGroupDesignation.reset(),this.formGroupDesignation.patchValue({name:"",status:""})}onSubmitDes(){if(this.formGroupDesignation.valid){this.toggleSpinner(!0);const i=this.createFormDataDes();this.adddes(i)}else this.formGroupDesignation.markAllAsTouched()}createFormDataDes(){return{name:this.d.name.value,status:this.d.status.value}}adddes(i){this.api.post("designation",i).subscribe(d=>this.handleResponseDes(d),d=>this.handleError(d))}handleResponseDes(i){this.toggleSpinner(!1),!0===i.status?(this.formGroupDesignation.reset(),this.toastService.success("Designation Created Successfully!!"),this.getDesignation(),this.showModal?.hide()):this.toastService.error(i.message)}onAdddep(){this.resetFormDes(),this.showModalDepartment?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDep(){this.formGroupDepartment.reset(),this.formGroupDepartment.patchValue({name:"",status:""})}onSubmitDep(){if(this.formGroupDepartment.valid){this.toggleSpinner(!0);const i=this.createFormDataDep();this.adddep(i)}else this.formGroupDepartment.markAllAsTouched()}createFormDataDep(){return{name:this.de.name.value,status:this.de.status.value}}adddep(i){this.api.post("department",i).subscribe(d=>this.handleResponseDep(d),d=>this.handleError(d))}handleResponseDep(i){this.toggleSpinner(!1),!0===i.status?(this.formGroupDepartment.reset(),this.toastService.success("Department Created Successfully!!"),this.getDepartment(),this.showModalDepartment?.hide()):this.toastService.error(i.message)}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(A.gV),e.GI1(Y.im),e.GI1(Ee),e.GI1(A.E5),e.GI1(Oe.SA))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-add-employee"]],viewQuery:function(d,f){if(1&d&&(e.CC$(_r,5),e.CC$(ir,5)),2&d){let O;e.wto(O=e.Gqi())&&(f.showModal=O.first),e.wto(O=e.Gqi())&&(f.showModalDepartment=O.first)}},decls:271,vars:52,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["class","invalid-text"],["type","file","id","empimage","accept","image/*","formControlName","image","hidden","",3,"change"],["empimage",""],["for","empimage",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","empimage",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"col-xl-9"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter Empolyee name","value","name",1,"form-control",3,"ngClass"],["for","emp_id",1,"form-label"],["type","text","id","emp_id","formControlName","emp_id","placeholder","Enter Employee Id","value","emp_id",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","dob",1,"form-label"],["type","date","id","dob","formControlName","dob","placeholder","Enter Date of Birth","value","dob",1,"form-control",3,"ngClass"],["for","JoiningdatInput",1,"form-label"],["formControlName","joining_date","type","date",1,"form-control"],[1,"d-flex"],[1,"flex-grow-1"],["for","designation",1,"form-label"],[1,"flex-shrink-0"],[1,"link-effect",3,"click"],[1,"bi","bi-arrow-right","align-baseline","ms-1"],["id","designation","formControlName","designation","placeholder","Enter Designation",1,"form-select"],["selected",""],["for","departments",1,"form-label"],["id","departments","formControlName","department","placeholder","Enter Department",1,"form-select"],["for","gender",1,"form-label"],["formControlName","gender","data-choices","","id","gender",1,"form-control",3,"ngClass"],["value",""],["value","Male"],["value","Female"],["value","Other"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","3","formControlName","address",1,"form-control",3,"ngClass"],[1,"col-lg-4"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter city","value","city",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","number","id","zip_code","formControlName","zip_code","placeholder","Enter zip code",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","state",1,"form-label"],["formControlName","state","data-choices","","id","state",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"col-lg-6","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","directMessage",1,"form-check-input",3,"checked","change"],["class","col-lg-4",4,"ngIf"],["class","col-lg-12 mt-4"],[1,"col-12"],[1,"hstack","gap-2","justify-content-end","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","product-title-input",1,"form-label"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["showModalDepartment","bs-modal"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image","alt","Dropzone-Image",3,"src"],["alt","Dropzone-Image",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["alt","Uploaded Thumbnail",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"invalid-text"],[3,"value"],["class","invalid-text",4,"ngIf"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","formControlName","password","placeholder","Enter new password",1,"form-control","password-input",3,"type","ngClass","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["for","confirm-password-input",1,"form-label"],["id","confirm-password-input","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","password-input",3,"type","ngClass"],[1,"col-lg-12","mt-4"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(d,f){if(1&d){const O=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"form",1),e.qCj("ngSubmit",function(){return f.onSubmit()}),e.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),e.wR5(6,"img",5),e.C$Y(),e.I0R(7,"div",6)(8,"div",7)(9,"div",8),e.yuY(10,qr,1,1)(11,Sr,1,1)(12,ys,1,0)(13,Kn,2,0,"div",9),e.I0R(14,"input",10,11),e.qCj("change",function(ne){return f.employeeimageSelect(ne)}),e.C$Y(),e.I0R(16,"div",12)(17,"label",13)(18,"span",14),e.wR5(19,"i",15),e.C$Y()()()()()()()(),e.I0R(20,"div",16)(21,"div",17)(22,"div",18)(23,"h6",19),e.OEk(24,"Personal Details"),e.C$Y()(),e.I0R(25,"div",20)(26,"div",21)(27,"div",2)(28,"div",22)(29,"div",23)(30,"label",24),e.OEk(31,"Empolyee Name "),e.I0R(32,"span",25),e.OEk(33,"*"),e.C$Y()(),e.wR5(34,"input",26),e.yuY(35,fr,2,0,"div",9)(36,sr,2,0,"div",9),e.C$Y()(),e.I0R(37,"div",22)(38,"div",23)(39,"label",27),e.OEk(40,"Employee Id "),e.I0R(41,"span",25),e.OEk(42,"*"),e.C$Y()(),e.wR5(43,"input",28),e.yuY(44,vr,2,0,"div",9),e.C$Y()(),e.I0R(45,"div",22)(46,"div",23)(47,"label",29),e.OEk(48,"Email "),e.I0R(49,"span",25),e.OEk(50,"*"),e.C$Y()(),e.wR5(51,"input",30),e.yuY(52,Yr,2,0,"div",9)(53,xt,2,0,"div",9),e.C$Y()(),e.I0R(54,"div",22)(55,"div",23)(56,"label",31),e.OEk(57,"Contact Number "),e.I0R(58,"span",25),e.OEk(59,"*"),e.C$Y()(),e.wR5(60,"input",32),e.yuY(61,De,2,0,"div",9)(62,ze,2,0,"div",9),e.C$Y()(),e.I0R(63,"div",22)(64,"div",23)(65,"label",33),e.OEk(66,"Date of Birth "),e.I0R(67,"span",25),e.OEk(68,"*"),e.C$Y()(),e.wR5(69,"input",34),e.yuY(70,at,2,0,"div",9),e.C$Y()(),e.I0R(71,"div",22)(72,"div",23)(73,"label",35),e.OEk(74,"Joining Date"),e.C$Y(),e.wR5(75,"input",36),e.C$Y()(),e.I0R(76,"div",22)(77,"div",23)(78,"div",37)(79,"div",38)(80,"label",39),e.OEk(81,"Designation "),e.I0R(82,"span",25),e.OEk(83,"*"),e.C$Y()()(),e.I0R(84,"div",40)(85,"a",41),e.qCj("click",function(){return f.onAdd()}),e.OEk(86,"Create New "),e.wR5(87,"i",42),e.C$Y()()(),e.I0R(88,"select",43)(89,"option",44),e.OEk(90,"Select Designation"),e.C$Y(),e.c53(91,st,2,2,"option",102,e.wJt),e.C$Y(),e.yuY(93,It,2,0,"div",9),e.C$Y()(),e.I0R(94,"div",22)(95,"div",23)(96,"div",37)(97,"div",38)(98,"label",45),e.OEk(99,"Department "),e.I0R(100,"span",25),e.OEk(101,"*"),e.C$Y()()(),e.I0R(102,"div",40)(103,"a",41),e.qCj("click",function(){return f.onAdddep()}),e.OEk(104,"Create New "),e.wR5(105,"i",42),e.C$Y()()(),e.I0R(106,"select",46)(107,"option",44),e.OEk(108,"Select Department"),e.C$Y(),e.c53(109,Ht,2,2,"option",102,e.wJt),e.C$Y(),e.yuY(111,Gt,2,0,"div",9),e.C$Y()(),e.I0R(112,"div",22)(113,"div",23)(114,"label",47),e.OEk(115,"Gender "),e.I0R(116,"span",25),e.OEk(117,"*"),e.C$Y()(),e.I0R(118,"select",48)(119,"option",49),e.OEk(120,"Select Gender"),e.C$Y(),e.I0R(121,"option",50),e.OEk(122,"Male"),e.C$Y(),e.I0R(123,"option",51),e.OEk(124,"Female"),e.C$Y(),e.I0R(125,"option",52),e.OEk(126,"Other"),e.C$Y()(),e.yuY(127,Ie,2,0,"div",9),e.C$Y()(),e.I0R(128,"div",53)(129,"div",23)(130,"label",54),e.OEk(131," Address "),e.I0R(132,"span",25),e.OEk(133,"*"),e.C$Y()(),e.wR5(134,"textarea",55),e.yuY(135,He,2,0,"div",9)(136,Pe,2,0,"div",9),e.C$Y()(),e.I0R(137,"div",56)(138,"div",23)(139,"label",57),e.OEk(140,"City "),e.I0R(141,"span",25),e.OEk(142,"*"),e.C$Y()(),e.wR5(143,"input",58),e.yuY(144,bt,2,0,"div",9),e.C$Y()(),e.I0R(145,"div",56)(146,"div",23)(147,"label",59),e.OEk(148,"Zip code "),e.I0R(149,"span",25),e.OEk(150,"*"),e.C$Y()(),e.wR5(151,"input",60),e.yuY(152,Ke,3,2,"div",61),e.C$Y()(),e.I0R(153,"div",56)(154,"div",23)(155,"label",62),e.OEk(156,"State "),e.I0R(157,"span",25),e.OEk(158,"*"),e.C$Y()(),e.I0R(159,"select",63)(160,"option",49),e.OEk(161,"Select State"),e.C$Y(),e.yuY(162,ot,2,2,"option",64),e.C$Y(),e.yuY(163,Ue,2,0,"div",9),e.C$Y()(),e.I0R(164,"div",22)(165,"div",23)(166,"label",65),e.OEk(167,"Status "),e.I0R(168,"span",25),e.OEk(169,"*"),e.C$Y()(),e.I0R(170,"select",66)(171,"option",49),e.OEk(172,"Select Status"),e.C$Y(),e.I0R(173,"option",67),e.OEk(174,"Active"),e.C$Y(),e.I0R(175,"option",68),e.OEk(176,"Inactive"),e.C$Y()(),e.yuY(177,je,2,0,"div",9),e.C$Y()(),e.I0R(178,"div",69)(179,"li",37)(180,"div",40)(181,"div",70)(182,"input",71),e.qCj("change",function(ne){return f.onCheckboxChange(ne)}),e.C$Y(),e.OEk(183," Use Default Password (Password : 123456) "),e.C$Y()()()(),e.yuY(184,Rt,9,9,"div",72)(185,Si,10,10,"div",72)(186,Qi,26,6,"div",73),e.C$Y(),e.I0R(187,"div",74)(188,"div",75),e.yuY(189,Bi,2,0,"button",76)(190,Tn,3,0),e.C$Y()(),e.wR5(191,"div"),e.C$Y(),e.yuY(192,Dn,4,0,"div",77),e.C$Y()()()()(),e.I0R(193,"div",78,79),e.qCj("hidden.bs.modal",function(){return f.resetFormDes()}),e.I0R(195,"div",80)(196,"div",81)(197,"div",82)(198,"h5",83),e.OEk(199,"Add Designation"),e.C$Y(),e.I0R(200,"button",84),e.qCj("click",function(){e.usT(O);const ne=e.Gew(194);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(201,"form",85),e.qCj("ngSubmit",function(){return f.onSubmitDes()}),e.I0R(202,"div",86),e.wR5(203,"div",87),e.I0R(204,"div",23)(205,"label",88),e.OEk(206,"Designation Name "),e.I0R(207,"span",25),e.OEk(208,"*"),e.C$Y()(),e.wR5(209,"input",89),e.yuY(210,In,2,0,"div",9)(211,tt,2,0,"div",9),e.C$Y(),e.I0R(212,"div",23)(213,"label",65),e.OEk(214,"Status "),e.I0R(215,"span",25),e.OEk(216,"*"),e.C$Y()(),e.I0R(217,"select",66)(218,"option",49),e.OEk(219,"Select Status"),e.C$Y(),e.I0R(220,"option",67),e.OEk(221,"Active"),e.C$Y(),e.I0R(222,"option",68),e.OEk(223,"Inactive"),e.C$Y()(),e.yuY(224,di,2,0,"div",9),e.C$Y()(),e.I0R(225,"div",90)(226,"div",91)(227,"button",92),e.qCj("click",function(){e.usT(O);const ne=e.Gew(194);return e.CGJ(ne.hide())}),e.wR5(228,"i",93),e.OEk(229," Close "),e.C$Y(),e.I0R(230,"button",94),e.OEk(231," Add "),e.C$Y()()()()()()(),e.I0R(232,"div",78,95),e.qCj("hidden.bs.modal",function(){return f.resetFormDep()}),e.I0R(234,"div",80)(235,"div",81)(236,"div",82)(237,"h5",83),e.OEk(238,"Add Department"),e.C$Y(),e.I0R(239,"button",84),e.qCj("click",function(){e.usT(O);const ne=e.Gew(233);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(240,"form",85),e.qCj("ngSubmit",function(){return f.onSubmitDep()}),e.I0R(241,"div",86),e.wR5(242,"div",87),e.I0R(243,"div",23)(244,"label",88),e.OEk(245,"Department Name "),e.I0R(246,"span",25),e.OEk(247,"*"),e.C$Y()(),e.wR5(248,"input",96),e.yuY(249,ue,2,0,"div",9)(250,n,2,0,"div",9),e.C$Y(),e.I0R(251,"div",23)(252,"label",65),e.OEk(253,"Status "),e.I0R(254,"span",25),e.OEk(255,"*"),e.C$Y()(),e.I0R(256,"select",66)(257,"option",49),e.OEk(258,"Select Status"),e.C$Y(),e.I0R(259,"option",67),e.OEk(260,"Active"),e.C$Y(),e.I0R(261,"option",68),e.OEk(262,"Inactive"),e.C$Y()(),e.yuY(263,s,2,0,"div",9),e.C$Y()(),e.I0R(264,"div",90)(265,"div",91)(266,"button",92),e.qCj("click",function(){e.usT(O);const ne=e.Gew(233);return e.CGJ(ne.hide())}),e.wR5(267,"i",93),e.OEk(268," Close "),e.C$Y(),e.I0R(269,"button",94),e.OEk(270," Add "),e.C$Y()()()()()()()}2&d&&(e.E7m("title",f.urlId?"Edit Employee Detail":"Add Employee Detail")("breadcrumbItems",f.breadCrumbItems),e.yG2(),e.E7m("formGroup",f.formGroup),e.yG2(9),e.C0Y(10,f.employeeselectedImage?10:f.employeeuploadedImage?11:12),e.yG2(3),e.C0Y(13,f.f.image&&f.f.image.hasError("required")&&f.f.image.touched?13:-1),e.yG2(21),e.E7m("ngClass",f.f.name&&f.f.name.hasError("required")&&f.f.name.touched?"is-invalid":""),e.yG2(),e.C0Y(35,f.f.name&&f.f.name.hasError("required")&&f.f.name.touched?35:-1),e.yG2(),e.C0Y(36,f.f.name&&f.f.name.hasError("maxlength")&&f.f.name.touched?36:-1),e.yG2(7),e.E7m("ngClass",f.f.emp_id&&f.f.emp_id.hasError("required")&&f.f.emp_id.touched?"is-invalid":""),e.yG2(),e.C0Y(44,f.f.emp_id&&f.f.emp_id.hasError("required")&&f.f.emp_id.touched?44:-1),e.yG2(7),e.E7m("ngClass",f.f.email&&f.f.email.hasError("required")&&f.f.email.touched?"is-invalid":""),e.yG2(),e.C0Y(52,f.f.email&&f.f.email.hasError("required")&&f.f.email.touched?52:-1),e.yG2(),e.C0Y(53,f.f.email.hasError("pattern")?53:-1),e.yG2(7),e.E7m("ngClass",f.f.mobile&&f.f.mobile.hasError("required")&&f.f.mobile.touched?"is-invalid":""),e.yG2(),e.C0Y(61,f.f.mobile&&f.f.mobile.hasError("required")&&f.f.mobile.touched?61:-1),e.yG2(),e.C0Y(62,f.f.mobile.hasError("pattern")?62:-1),e.yG2(7),e.E7m("ngClass",f.f.dob&&f.f.dob.hasError("required")&&f.f.dob.touched?"is-invalid":""),e.yG2(),e.C0Y(70,f.f.dob&&f.f.dob.hasError("required")&&f.f.dob.touched?70:-1),e.yG2(21),e.oho(f.designations),e.yG2(2),e.C0Y(93,f.f.designation&&f.f.designation.hasError("required")&&f.f.designation.touched?93:-1),e.yG2(16),e.oho(f.departments),e.yG2(2),e.C0Y(111,f.f.department&&f.f.department.hasError("required")&&f.f.department.touched?111:-1),e.yG2(7),e.E7m("ngClass",f.f.gender&&f.f.gender.hasError("required")&&f.f.gender.touched?"is-invalid":""),e.yG2(9),e.C0Y(127,f.f.gender&&f.f.gender.hasError("required")&&f.f.gender.touched?127:-1),e.yG2(7),e.E7m("ngClass",e.S45(50,Fe,f.f.address&&f.f.address.errors&&f.f.address.touched)),e.yG2(),e.C0Y(135,f.f.address&&f.f.address.hasError("required")&&f.f.address.touched?135:-1),e.yG2(),e.C0Y(136,f.f.address&&f.f.address.hasError("maxlength")&&f.f.address.touched?136:-1),e.yG2(7),e.E7m("ngClass",f.f.city&&f.f.city.hasError("required")&&f.f.city.touched?"is-invalid":""),e.yG2(),e.C0Y(144,f.f.city&&f.f.city.hasError("required")&&f.f.city.touched?144:-1),e.yG2(7),e.E7m("ngClass",f.f.zip_code&&f.f.zip_code.hasError("required")&&f.f.zip_code.touched?"is-invalid":""),e.yG2(),e.E7m("ngIf",(null==f.f.zip_code?null:f.f.zip_code.touched)&&(null==f.f.zip_code?null:f.f.zip_code.errors)),e.yG2(7),e.E7m("ngClass",f.f.state&&f.f.state.hasError("required")&&f.f.state.touched?"is-invalid":""),e.yG2(3),e.E7m("ngForOf",f.states),e.yG2(),e.C0Y(163,f.f.state&&f.f.state.hasError("required")&&f.f.state.touched?163:-1),e.yG2(7),e.E7m("ngClass",f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(177,f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?177:-1),e.yG2(5),e.E7m("checked",f.useDefaultPassword),e.yG2(2),e.E7m("ngIf",!f.useDefaultPassword),e.yG2(),e.E7m("ngIf",!f.useDefaultPassword),e.yG2(),e.C0Y(186,f.f.password&&f.f.password.hasError("pattern")?186:-1),e.yG2(3),e.C0Y(189,f.saveButtonActive?189:190),e.yG2(3),e.C0Y(192,f.spinnerStatus?192:-1),e.yG2(9),e.E7m("formGroup",f.formGroupDesignation),e.yG2(9),e.C0Y(210,f.d.name&&f.d.name.hasError("required")&&f.d.name.touched?210:-1),e.yG2(),e.C0Y(211,f.d.name&&f.d.name.hasError("maxlength")&&f.d.name.touched?211:-1),e.yG2(6),e.E7m("ngClass",f.d.status&&f.d.status.hasError("required")&&f.d.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(224,f.d.status&&f.d.status.hasError("required")&&f.d.status.touched?224:-1),e.yG2(16),e.E7m("formGroup",f.formGroupDepartment),e.yG2(9),e.C0Y(249,f.de.name&&f.de.name.hasError("required")&&f.de.name.touched?249:-1),e.yG2(),e.C0Y(250,f.de.name&&f.de.name.hasError("maxlength")&&f.de.name.touched?250:-1),e.yG2(6),e.E7m("ngClass",f.de.status&&f.de.status.hasError("required")&&f.de.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(263,f.de.status&&f.de.status.hasError("required")&&f.de.status.touched?263:-1))},dependencies:[Ye.QF,Ye.ay,Ye.u_,Xe.O,Y.sz,Y.wd,Y.GO,Y.ot,Y.O4,Y.GC,Y.ue,Y.u,Y.uW,Y.Wo,cn.uK],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}']})}return v})();var g=Ot(4448),y=Ot(5657),x=Ot(4680),k=Ot(7995),M=Ot(3304);function R(v,l){if(1&v&&(e.I0R(0,"div",17)(1,"p",18),e.OEk(2,"Check-In At"),e.C$Y(),e.wR5(3,"h5",32),e.C$Y()),2&v){const i=e.GaO();e.yG2(3),e.E7m("innerHTML",i.formatTime(null==i.checkIndetails?null:i.checkIndetails.check_in_time),e.E3n)}}function j(v,l){if(1&v&&(e.I0R(0,"div",17)(1,"p",18),e.OEk(2,"Check-out At"),e.C$Y(),e.I0R(3,"h5",19),e.wR5(4,"span",33),e.C$Y()()),2&v){const i=e.GaO();e.yG2(4),e.E7m("innerHTML",i.formatTime(null==i.checkIndetails?null:i.checkIndetails.check_out_time),e.E3n)}}function U(v,l){if(1&v&&(e.I0R(0,"div",17)(1,"p",18),e.OEk(2,"Total Time"),e.C$Y(),e.I0R(3,"h5",19)(4,"span",34),e.OEk(5),e.C$Y()()()),2&v){const i=e.GaO();e.yG2(5),e.cNF(i.formattedTotalTime)}}function X(v,l){if(1&v&&(e.I0R(0,"div",17)(1,"p",18),e.OEk(2,"Total Distance"),e.C$Y(),e.I0R(3,"h5",19)(4,"span",34),e.OEk(5),e.C$Y()()()),2&v){const i=e.GaO();e.yG2(5),e.oRS("",i.totaldistanceToshow," km")}}const ee=v=>({"selected-item":v});function ae(v,l){if(1&v){const i=e.KQA();e.I0R(0,"li",35),e.qCj("click",function(){const O=e.usT(i).$implicit,H=e.GaO();return e.CGJ(H.updateMarkerAndPath(O.end.longitude,O.end.latitude,O))}),e.I0R(1,"div",36)(2,"span",37),e.OEk(3),e.C$Y(),e.I0R(4,"button",38),e.wR5(5,"span",39),e.OEk(6),e.C$Y()(),e.I0R(7,"p",40),e.OEk(8),e.C$Y()()}if(2&v){const i=l.$implicit,d=e.GaO();e.E7m("ngClass",e.S45(5,ee,d.selectedItem===i)),e.yG2(3),e.cNF(i.end.formattedTime),e.yG2(),e.E7m("ngClass",d.getBatteryClass(i.end.battery_status)),e.yG2(2),e.oRS(" ",i.end.battery_status," % "),e.yG2(2),e.cNF(i.end.address)}}function de(v,l){1&v&&(e.I0R(0,"div",41),e.wR5(1,"div",42),e.I0R(2,"button",43)(3,"span",44)(4,"span",45),e.OEk(5," Loading... "),e.C$Y(),e.I0R(6,"span",46)(7,"span",47),e.OEk(8,"Loading..."),e.C$Y()()()()())}const ve=v=>({rotate:v});let he=(()=>{class v{constructor(i,d,f){this.route=i,this.api=d,this.cdr=f,this.urlId=null,this.dateChangeSubject=new y.E,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeTimeline=[],this.selectedDate=new Date,this.markers=[],this.selectedItem=null,this.checkIndetails={},this.selectedInterval=15,this.intervalTimeCoordinates=[],this.isRotating=!1}ngOnDestroy(){this.map&&this.map.remove()}ngOnInit(){this.cdr.detectChanges(),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(new Date)),this.bsConfig={dateInputFormat:"DD-MMM-YY",showWeekNumbers:!1},this.route.params.subscribe(i=>{this.urlId=i.id?Number(i.id):null}),this.urlId&&this.companyId&&(this.getemployeeTimeline(),this.getCheckInDetail()),this.dateChangeSubject.pipe((0,x.o)(300)).subscribe(i=>{this.handleDateChange(i)})}onIntervalChange(){this.initializeMap()}onDateChange(i){this.dateChangeSubject.next(i)}handleDateChange(i){this.selectedDate=i,this.formattedDate=this.formatDate(i),this.getemployeeTimeline(),this.getCheckInDetail()}refreshTimeline(){this.isRotating=!0,this.getemployeeTimeline(),setTimeout(()=>{this.isRotating=!1},500)}formatDate(i){return i?`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`:""}toggleSpinner(i){this.spinnerStatus=i,this.saveButtonActive=!i,this.submitted=i}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(i=>{this.toggleSpinner(!1),i&&i.status?(this.checkIndetails=i.data[0],this.checkIndetails.check_in_time&&this.checkIndetails.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},i=>{this.toggleSpinner(!1),this.handleError(i.message||"An error occurred while fetching data")})}getemployeeTimeline(){this.toggleSpinner(!0),this.api.getwithoutid(`getCoordinates?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(i=>{if(this.toggleSpinner(!1),i&&i.status&&i.data.length>0){if(this.employeeTimeline=i.data.map(d=>(d.formattedTime=this.formatTime(d.time),d)),this.employeeTimeline&&this.employeeTimeline.length>0){this.initializeMap();let d=0;for(let O=1;O<this.employeeTimeline.length;O++)d+=this.calculateDistance(this.employeeTimeline[O-1].latitude,this.employeeTimeline[O-1].longitude,this.employeeTimeline[O].latitude,this.employeeTimeline[O].longitude);this.calculateTimeSpent(),this.totaldistanceToshow=d.toFixed(1)}}else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null},i=>{this.toggleSpinner(!1),this.employeeTimeline=[],this.initializeDefaultMap(),this.handleError(i.message||"An error occurred while fetching data")})}filterCoordinatesByInterval(i,d){const[f,O,H]=i.split(":").map(Number),Te=[];let Qe=3600*f+60*O+H;const _t=nn=>{const[rr,$r,Za]=nn.split(":").map(Number);return 3600*rr+60*$r+Za},Ti=_t(this.employeeTimeline[this.employeeTimeline.length-1].time),Fi=this.employeeTimeline[0];for(Te.push({start:Fi,end:Fi});Qe<=Ti;){Qe+=60*d;const nn=this.employeeTimeline.find(rr=>_t(rr.time)>=Qe);if(!nn)break;{const rr=Te[Te.length-1];(!rr||rr.end.id!==nn.id)&&Te.push({start:Te[Te.length-1].end,end:nn})}}const fn=this.employeeTimeline[this.employeeTimeline.length-1];return(0===Te.length||Te[Te.length-1].end.id!==fn.id)&&Te.push({start:Te.length>0?Te[Te.length-1].end:fn,end:fn}),this.intervalTimeCoordinates=Te,console.log(this.intervalTimeCoordinates),Te}calculateDistance(i,d,f,O){const ne=this.deg2rad(f-i),Te=this.deg2rad(O-d),Qe=Math.sin(ne/2)*Math.sin(ne/2)+Math.cos(this.deg2rad(i))*Math.cos(this.deg2rad(f))*Math.sin(Te/2)*Math.sin(Te/2);return 2*Math.atan2(Math.sqrt(Qe),Math.sqrt(1-Qe))*6371}deg2rad(i){return i*(Math.PI/180)}calculateTimeSpent(){const i={driving:0,cycling:0,walking:0,stationary:0};for(let d=1;d<this.employeeTimeline.length;d++){const f=this.employeeTimeline[d-1],O=this.employeeTimeline[d],H=(new Date(O.time).getTime()-new Date(f.time).getTime())/1e3/60,Te=this.calculateDistance(f.latitude,f.longitude,O.latitude,O.longitude)/(H/60);Te>25?i.driving+=H:Te>15?i.cycling+=H:Te>5?i.walking+=H:i.stationary+=H}return i}geocodeCoordinates(i,d){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${i},${d}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(O=>O.json()).then(O=>O.features[0].place_name).catch(O=>(console.error("Error fetching address:",O),""))}initializeMap(){this.map=new g.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),this.map.addControl(new g.NavigationControl),this.map.on("load",()=>{if(!this.employeeTimeline||0===this.employeeTimeline.length)return void console.error("Employee timeline data is empty or undefined.");this.map.resize();const i=this.filterCoordinatesByInterval(this.employeeTimeline[0].time,this.selectedInterval),d=this.employeeTimeline.map(f=>this.geocodeCoordinates(f.longitude,f.latitude).then(O=>{f.address=O}).catch(O=>{console.error("Error fetching address:",O)}));Promise.all(d).then(()=>{const f=this.employeeTimeline[0],O=this.employeeTimeline[this.employeeTimeline.length-1],H=new g.Popup({offset:25}).setHTML(`<h6>${f.formattedTime}</h6>\n                <p>Battery Percentage: ${f.battery_status}%</p>\n                <p>Address: ${f.address}</p>`),ne=new g.Marker({color:"green"}).setLngLat([f.longitude,f.latitude]).setPopup(H).addTo(this.map),Te=new g.Popup({offset:25}).setHTML(`<h6>${O.formattedTime}</h6>\n                <p>Battery Percentage: ${O.battery_status}%</p>\n                <p>Address: ${O.address}</p>`),Qe=new g.Marker({color:"red"}).setLngLat([O.longitude,O.latitude]).setPopup(Te).addTo(this.map);this.markers.push(ne,Qe),i.forEach((Xt,Ti)=>{if(!Xt.start||!Xt.end)return void console.error(`Segment at index ${Ti} is missing start or end coordinates.`);const Fi=this.employeeTimeline.filter(nn=>{const rr=this.getTimeInSeconds(nn.time),$r=this.getTimeInSeconds(Xt.start.time),Za=this.getTimeInSeconds(Xt.end.time);return rr>=$r&&rr<=Za}).map(nn=>[nn.longitude,nn.latitude]);(Fi[0][0]!==Xt.start.longitude||Fi[0][1]!==Xt.start.latitude)&&Fi.unshift([Xt.start.longitude,Xt.start.latitude]),(Fi[Fi.length-1][0]!==Xt.end.longitude||Fi[Fi.length-1][1]!==Xt.end.latitude)&&Fi.push([Xt.end.longitude,Xt.end.latitude]);const fn=`path-${Ti}`;this.removeLayerIfExists(fn),this.map.addLayer({id:fn,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:Fi}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":8}})});const _t=new g.LngLatBounds;this.markers.forEach(Xt=>_t.extend(Xt.getLngLat())),this.map.fitBounds(_t,{padding:50})})})}getTimeInSeconds(i){const[d,f,O]=i.split(":").map(Number);return 3600*d+60*f+O}removeLayerIfExists(i){this.map.getLayer(i)&&this.map.removeLayer(i),this.map.getSource(i)&&this.map.removeSource(i)}initializeDefaultMap(){this.map=new g.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.9629,20.5937],zoom:13}),this.map.addControl(new g.NavigationControl)}formatTime(i){const[d,f,O]=i.split(":");return`${+d%12||12}:${f} ${+d>=12?"PM":"AM"}`}handleError(i){this.toggleSpinner(!1)}updateMarkerAndPath(i,d,f){this.marker&&this.marker.remove(),this.marker=new g.Marker({color:"#ffc703"}).setLngLat([i,d]).addTo(this.map);const O=new g.Popup({offset:25}).setHTML(`<h6>${f.end.formattedTime}</h6>\n        <p>Battery Percentage: ${f.end.battery_status}%</p>\n        <p>Address: ${f.end.address}</p>`);this.marker.setPopup(O),this.selectedItem=f}getBatteryClass(i){return i>=75?"battery-high":i>=35?"battery-mid":"battery-low"}calculateTotalTime(i,d){const[f,O]=i.split(":").map(Number),[H,ne]=d.split(":").map(Number),Te=new Date;Te.setHours(f,O,0);const Qe=new Date;Qe.setHours(H,ne,0);const _t=Qe.getTime()-Te.getTime(),Xt=Math.floor(_t/6e4);return`${Math.floor(Xt/60)}h ${Xt%60}m`}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(A.gV),e.GI1(Ee),e.GI1(e.kD9))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-timeline"]],inputs:{companyId:"companyId"},decls:47,vars:18,consts:[[1,"card","py-3"],[1,"row"],[1,"col-lg-2"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","15"],["value","30"],["value","60"],[1,"col-8","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"p-3","user-chat-topbar","border-bottom","border-2"],[1,"row","align-items-center","flex-nowrap"],[1,"col-lg","col-3"],[1,"text-muted","mb-2","text-uppercase"],[1,"fs-md","mb-0"],["id","total-amount"],["class","col-lg col-3"],[1,"col-lg-4",3,"ngClass"],[1,"acitivity-timeline-2","list-unstyled","mb-0","mt-3","overflow"],[1,"col-lg-8",3,"ngClass"],["id","map",1,"match-parent","w-100","h-100"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"],["id","map",1,"match-parent"],[1,"fs-md","mb-0",3,"innerHTML"],["id","invoice-date",3,"innerHTML"],["id","invoice-due-date"],[1,"activity-item","pt-2",3,"ngClass","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-md","badge","bg-body-secondary","border","border-secondary","text-secondary"],["type","button","data-bs-toggle","tooltip","placement","top","tooltip","Battery Percentage",1,"btn","battery-status",3,"ngClass"],[1,"ri-battery-saver-line"],[1,"mb-0","mt-2"],[1,"mt-5","pt-5","text-center"],[1,"error-img","text-center","px-5","mt-5"],["type","button",1,"btn","btn-info","btn-load","mt-5"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","me-2"],["role","status",1,"spinner-grow","flex-shrink-0"],[1,"visually-hidden"],["class","activity-item pt-2",3,"ngClass"],["class","mt-5 pt-5 text-center"]],template:function(d,f){1&d&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),e.iHE("ngModelChange",function(H){return e.kNx(f.selectedDate,H)||(f.selectedDate=H),H}),e.qCj("bsValueChange",function(H){return f.onDateChange(H)}),e.C$Y(),e.I0R(5,"div",5)(6,"label",6),e.wR5(7,"i",7),e.C$Y()()()(),e.I0R(8,"div",2)(9,"select",8),e.iHE("ngModelChange",function(H){return e.kNx(f.selectedInterval,H)||(f.selectedInterval=H),H}),e.qCj("change",function(){return f.onIntervalChange()}),e.I0R(10,"option",9),e.OEk(11,"15 Minutes"),e.C$Y(),e.I0R(12,"option",10),e.OEk(13,"30 Minutes"),e.C$Y(),e.I0R(14,"option",11),e.OEk(15,"1 Hour"),e.C$Y()()(),e.I0R(16,"div",12)(17,"button",13),e.qCj("click",function(){return f.refreshTimeline()}),e.wR5(18,"i",14),e.C$Y()()()(),e.I0R(19,"div",15)(20,"div",16)(21,"div",17)(22,"p",18),e.OEk(23,"Date"),e.C$Y(),e.I0R(24,"h5",19)(25,"span",20),e.OEk(26),e.wVc(27,"date"),e.C$Y()()(),e.yuY(28,R,4,1,"div",21)(29,j,5,1,"div",21)(30,U,6,1,"div",21)(31,X,6,1,"div",21),e.C$Y()(),e.I0R(32,"div",1)(33,"div",22)(34,"ul",23),e.c53(35,ae,9,7,"li",48,e.wJt,!1,de,9,0,"div",49),e.C$Y()(),e.I0R(38,"div",24),e.wR5(39,"div",25),e.C$Y(),e.I0R(40,"div",26)(41,"div",27)(42,"div",28),e.wR5(43,"img",29),e.C$Y(),e.I0R(44,"h3",30),e.OEk(45,"Sorry! No Result Found"),e.C$Y()()()(),e.wR5(46,"div",31)),2&d&&(e.yG2(4),e.E7m("bsConfig",f.bsConfig),e.OKB("ngModel",f.selectedDate),e.yG2(5),e.OKB("ngModel",f.selectedInterval),e.yG2(8),e.E7m("ngClass",e.S45(16,ve,f.isRotating)),e.yG2(9),e.cNF(e.g7$(27,13,f.formattedDate,"dd/MMM/yyyy")),e.yG2(2),e.C0Y(28,null!=f.checkIndetails&&f.checkIndetails.check_in_time?28:-1),e.yG2(),e.C0Y(29,null!=f.checkIndetails&&f.checkIndetails.check_out_time?29:-1),e.yG2(),e.C0Y(30,null!=f.checkIndetails&&f.checkIndetails.check_in_time&&null!=f.checkIndetails&&f.checkIndetails.check_out_time?30:-1),e.yG2(),e.C0Y(31,f.totaldistanceToshow?31:-1),e.yG2(2),e.E7m("ngClass",f.employeeTimeline&&f.employeeTimeline.length>0?"d-block":"d-none"),e.yG2(2),e.oho(f.intervalTimeCoordinates),e.yG2(3),e.E7m("ngClass",f.employeeTimeline&&0==f.employeeTimeline.length?"d-none":"d-block"),e.yG2(3),e.E7m("ngClass",f.employeeTimeline&&0===f.employeeTimeline.length?"d-block":"d-none"))},dependencies:[Ye.QF,Y.wd,Y.GO,Y.ot,Y.GC,Y.ue,Y._G,k.uM,M.em,M.U5,Ye.y],styles:[".activity-timeline-2[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.activity-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.selected-item[_ngcontent-%COMP%]{background-color:#d1ecf1}.battery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.battery-status[_ngcontent-%COMP%]   .ri-battery-saver-line[_ngcontent-%COMP%]{margin-right:5px}.battery-high[_ngcontent-%COMP%]{color:green}.battery-mid[_ngcontent-%COMP%]{color:orange}.battery-low[_ngcontent-%COMP%]{color:red}#noresult[_ngcontent-%COMP%]{text-align:center;padding:20px}#map[_ngcontent-%COMP%]{width:100%!important;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:500px}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return v})();function be(v,l){1&v&&(e.I0R(0,"div",30),e.OEk(1,"Password is required."),e.C$Y())}function F(v,l){1&v&&(e.I0R(0,"div",30),e.OEk(1,"Confirm Password is required."),e.C$Y())}function K(v,l){1&v&&(e.I0R(0,"div",30),e.OEk(1," Password and Confirm Password does not match. "),e.C$Y())}function ce(v,l){if(1&v&&(e.I0R(0,"div",18)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),e.OEk(5,"Password must contain:"),e.C$Y()(),e.I0R(6,"div")(7,"p",35),e.OEk(8," Minimum "),e.I0R(9,"b"),e.OEk(10,"8 characters"),e.C$Y()(),e.I0R(11,"p",36),e.OEk(12," At least "),e.I0R(13,"b"),e.OEk(14,"one lowercase"),e.C$Y(),e.OEk(15," letter (a-z) "),e.C$Y(),e.I0R(16,"p",37),e.OEk(17," At least "),e.I0R(18,"b"),e.OEk(19,"one uppercase"),e.C$Y(),e.OEk(20," letter (A-Z) "),e.C$Y(),e.I0R(21,"p",38),e.OEk(22," At least "),e.I0R(23,"b"),e.OEk(24,"one number"),e.C$Y(),e.OEk(25," (0-9) "),e.C$Y()()()()()),2&v){const i=e.GaO();e.yG2(7),e.E7m("ngClass",i.passwordValidations.length?"valid":"invalid"),e.yG2(4),e.E7m("ngClass",i.passwordValidations.lower?"valid":"invalid"),e.yG2(5),e.eAK("valid",i.passwordValidations.upper),e.E7m("ngClass",i.passwordValidations.upper?"valid":"invalid"),e.yG2(5),e.E7m("ngClass",i.passwordValidations.number?"valid":"invalid")}}function _e(v,l){if(1&v&&(e.I0R(0,"tr")(1,"td"),e.wR5(2,"i",39),e.OEk(3),e.C$Y(),e.I0R(4,"td"),e.OEk(5),e.C$Y(),e.I0R(6,"td"),e.OEk(7),e.wVc(8,"date"),e.C$Y(),e.I0R(9,"td"),e.OEk(10),e.C$Y(),e.I0R(11,"td")(12,"a",40),e.OEk(13,"Logout "),e.wR5(14,"i",41),e.C$Y()()()),2&v){const i=l.$implicit;e.yG2(3),e.oRS(" ",i.device," "),e.yG2(2),e.cNF(i.ip_address),e.yG2(2),e.cNF(e.g7$(8,4,i.date,"dd MMM , yyyy")),e.yG2(3),e.cNF(i.address)}}const Me=(v,l)=>({"mdi-eye-off-outline":v,"mdi-eye-outline":l});let $e=(()=>{class v{constructor(i,d,f,O){this.route=i,this.api=d,this.toastService=f,this.formBuilder=O,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.loginDetails=[],this.loginDetailsList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1}}ngOnInit(){this.route.params.subscribe(i=>{this.urlId=i.id?Number(i.id):null}),this.urlId&&this.companyId&&this.getemployeeLoginDetail(),this.initializeForm()}initializeForm(){this.formGroup=this.formBuilder.group({password:["",[Y.AQ.required,Y.AQ.pattern("(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}")]],confirmPassword:["",Y.AQ.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(i){const d=i.get("password")?.value,f=i.get("confirmPassword")?.value;return d===f?null:{mismatch:!0}}checkPasswordPattern(){const i=this.formGroup.get("password")?.value;this.passwordValidations.length=i.length>=8,this.passwordValidations.lower=/[a-z]/.test(i),this.passwordValidations.upper=/[A-Z]/.test(i),this.passwordValidations.number=/\d/.test(i)}get f(){return this.formGroup.controls}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}toggleSpinner(i){this.spinnerStatus=i,this.saveButtonActive=!i,this.submitted=i}getemployeeLoginDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLoginDetail?emp_id=${this.urlId}company_id=${this.companyId}`).subscribe(d=>{this.toggleSpinner(!1),d&&d.status?(this.loginDetails=d.data,this.loginDetails=d.data||[],this.loginDetailsList=d.data||[],this.updatePagination(),this.updateDisplayedItems()):this.loginDetails=[]},d=>{this.toggleSpinner(!1),this.handleError(d.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const i=this.createFormData();this.updateemployee(i)}else this.formGroup.markAllAsTouched()}createFormData(){const i=new FormData;return i.append("company_id",this.companyId),i.append("password",this.f.password.value),i}updateemployee(i){this.api.put("employees",this.urlId,i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}handleResponse(i){this.toggleSpinner(!1),!0===i.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(i.message)}handleError(i){this.toggleSpinner(!1)}filterdata(){this.loginDetails=this.term?this.loginDetailsList.filter(i=>{const d=this.term.toLowerCase();return i.name.toLowerCase().includes(d)||i.employee_id.toLowerCase().includes(d)||i.status.toLowerCase().includes(d)}):this.loginDetailsList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const i=document.querySelector(".noresult"),d=document.getElementById("pagination-element");this.term&&0===this.loginDetails.length?(i.style.display="block",d.classList.add("d-none")):(i.style.display="none",d.classList.remove("d-none"))}pageChanged(i){this.currentPage=i.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.loginDetailsList.length}updateDisplayedItems(){const i=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.loginDetails=this.loginDetailsList.slice(i,this.endItem)}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(A.gV),e.GI1(Ee),e.GI1(Oe.SA),e.GI1(Y.im))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-password-change"]],inputs:{companyId:"companyId"},decls:60,vars:19,consts:[[3,"formGroup","ngSubmit"],[1,"row","g-2","align-items-center"],[1,"col-lg-4"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","onpaste","return false","placeholder","Enter new password","formControlName","password","required","",1,"form-control","password-input",3,"type","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["class","invalid-text"],["for","confirm-password-input",1,"form-label"],["onpaste","return false","id","confirm-password-input","placeholder","Confirm password","formControlName","confirmPassword","required","",1,"form-control","password-input",3,"type"],[1,"d-flex","align-items-center","justify-content-between"],["type","submit",1,"btn","btn-success"],["class","col-lg-12"],[1,"mt-4","mb-4","pb-3","border-bottom","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],[1,"ri-logout-box-r-line"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[1,"invalid-text"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"card-body"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"bi","bi-phone","align-baseline","me-1"],["href","javascript:void(0);",1,"icon-link","icon-link-hover"],[1,"bi","bi-box-arrow-right"]],template:function(d,f){1&d&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return f.onSubmit()}),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e.OEk(5,"New Password*"),e.C$Y(),e.I0R(6,"div",5)(7,"input",6),e.qCj("input",function(){return f.checkPasswordPattern()}),e.C$Y(),e.I0R(8,"button",7),e.qCj("click",function(){return f.toggleFieldTextType1()}),e.wR5(9,"i",8),e.C$Y()(),e.yuY(10,be,2,0,"div",9),e.C$Y()(),e.I0R(11,"div",2)(12,"div",3)(13,"label",10),e.OEk(14,"Confirm Password*"),e.C$Y(),e.I0R(15,"div",5),e.wR5(16,"input",11),e.I0R(17,"button",7),e.qCj("click",function(){return f.toggleFieldTextType2()}),e.wR5(18,"i",8),e.C$Y()(),e.yuY(19,F,2,0,"div",9)(20,K,2,0,"div",9),e.C$Y()(),e.I0R(21,"div",12)(22,"div")(23,"button",13),e.OEk(24,"Change Password"),e.C$Y()()(),e.yuY(25,ce,26,6,"div",14),e.C$Y()(),e.I0R(26,"div",15)(27,"h5",16),e.OEk(28,"Login History"),e.C$Y()(),e.I0R(29,"div",17)(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead",21)(34,"tr")(35,"th",22),e.OEk(36,"Mobile"),e.C$Y(),e.I0R(37,"th",22),e.OEk(38,"IP Address"),e.C$Y(),e.I0R(39,"th",22),e.OEk(40,"Date"),e.C$Y(),e.I0R(41,"th",22),e.OEk(42,"Address"),e.C$Y(),e.I0R(43,"th",22),e.wR5(44,"i",23),e.C$Y()()(),e.I0R(45,"tbody"),e.c53(46,_e,15,7,"tr",null,e.wJt),e.C$Y()()(),e.I0R(48,"div",24)(49,"div",25)(50,"div",26),e.OEk(51," Showing "),e.I0R(52,"span",27),e.OEk(53),e.C$Y(),e.OEk(54," of "),e.I0R(55,"span",27),e.OEk(56),e.C$Y(),e.OEk(57," Results "),e.C$Y()(),e.I0R(58,"div",28)(59,"pagination",29),e.qCj("pageChanged",function(H){return f.pageChanged(H)}),e.C$Y()()()()()),2&d&&(e.E7m("formGroup",f.formGroup),e.yG2(7),e.E7m("type",f.fieldTextType1?"text":"password"),e.yG2(2),e.E7m("ngClass",e.IBC(13,Me,!f.fieldTextType1,f.fieldTextType1)),e.yG2(),e.C0Y(10,f.f.password&&f.f.password.hasError("required")&&f.f.password.touched?10:-1),e.yG2(6),e.E7m("type",f.fieldTextType2?"text":"password"),e.yG2(2),e.E7m("ngClass",e.IBC(16,Me,!f.fieldTextType2,f.fieldTextType2)),e.yG2(),e.C0Y(19,f.f.confirmPassword&&f.f.confirmPassword.hasError("required")&&f.f.confirmPassword.touched?19:-1),e.yG2(),e.C0Y(20,f.formGroup.hasError("mismatch")&&f.f.confirmPassword.value&&f.f.password.value?20:-1),e.yG2(5),e.C0Y(25,f.f.password&&f.f.password.hasError("pattern")?25:-1),e.yG2(21),e.oho(f.loginDetails),e.yG2(7),e.cNF(null==f.loginDetails?null:f.loginDetails.length),e.yG2(3),e.cNF(null==f.loginDetailsList?null:f.loginDetailsList.length),e.yG2(3),e.E7m("totalItems",null==f.loginDetailsList?null:f.loginDetailsList.length)("itemsPerPage",f.itemsPerPage))},dependencies:[Ye.QF,Y.sz,Y.ot,Y.ue,Y.u,Y.eJ,Y.uW,Y.Wo,et.im,Ye.y],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}']})}return v})();var wt=Ot(1528);const kt=v=>({rotate:v});let Wt=(()=>{class v{constructor(i,d){this.api=i,this.route=d,this.urlId=null,this.selectedDate=new Date,this.spinnerStatus=!1,this.isRotatinglive=!1,this.refreshInterval=3e4}ngOnDestroy(){this.livemap&&this.livemap.remove(),this.liveLocationTimeout&&clearTimeout(this.liveLocationTimeout)}ngOnInit(){this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(i=>{this.urlId=i.id?Number(i.id):null}),this.companyId&&this.scheduleNextUpdate(),this.initializeMap()}refreshTimeline(){this.isRotatinglive=!0,this.getLiveLocation(),setTimeout(()=>{this.isRotatinglive=!1},500)}formatDate(i){return i?`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`:""}toggleSpinner(i){this.spinnerStatus=i}getLiveLocation(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLiveLocation?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(d=>{this.toggleSpinner(!1),d&&d.status?(this.liveCoordinates=d.data,this.addMarkerToMap(this.liveCoordinates)):this.liveCoordinates=[],this.scheduleNextUpdate()},d=>{this.toggleSpinner(!1),this.handleError(d.message||"An error occurred while fetching data"),this.scheduleNextUpdate()})}scheduleNextUpdate(){this.liveLocationTimeout=setTimeout(()=>{this.getLiveLocation()},this.refreshInterval)}handleError(i){this.toggleSpinner(!1),console.error(i)}initializeMap(){g.accessToken="pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",this.livemap=new g.Map({container:"mapId",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),window.addEventListener("resize",()=>{this.livemap.resize()}),this.livemap.on("load",i=>{this.livemap.resize()}),this.livemap.addControl(new g.NavigationControl)}addMarkerToMap(i){var d=this;return(0,wt.c)(function*(){if(!i)return;const f=[i.longitude,i.latitude];try{const O=yield d.geocodeCoordinates(i.longitude,i.latitude),H=new g.Popup({offset:25}).setText(`Address: ${O}\nMotion: ${i.motion}`),ne=document.createElement("div");ne.className="custom-marker",ne.style.backgroundImage=`url(${d.emp_image})`,ne.style.width="42px",ne.style.height="42px",ne.style.backgroundSize="100%",ne.style.borderRadius="50%",new g.Marker(ne).setLngLat(f).setPopup(H).addTo(d.livemap).togglePopup(),d.livemap.flyTo({center:f,zoom:14})}catch(O){console.error("Error adding marker to map:",O)}})()}geocodeCoordinates(i,d){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${i},${d}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(O=>O.json()).then(O=>O.features[0].place_name).catch(O=>(console.error("Error fetching address:",O),"Unknown location"))}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(Ee),e.GI1(A.gV))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-live-location"]],inputs:{companyId:"companyId",emp_image:"emp_image"},decls:13,vars:5,consts:[[1,"card"],[1,"row"],[1,"col-12","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"col-lg-12",3,"ngClass"],["id","mapId"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"]],template:function(d,f){1&d&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.qCj("click",function(){return f.refreshTimeline()}),e.wR5(4,"i",4),e.C$Y()(),e.I0R(5,"div",5),e.wR5(6,"div",6),e.C$Y(),e.I0R(7,"div",7)(8,"div",8)(9,"div",9),e.wR5(10,"img",10),e.C$Y(),e.I0R(11,"h3",11),e.OEk(12,"Sorry! No Result Found"),e.C$Y()()()()()),2&d&&(e.yG2(3),e.E7m("ngClass",e.S45(3,kt,f.isRotatinglive)),e.yG2(2),e.E7m("ngClass",f.liveCoordinates&&0==f.liveCoordinates.length?"d-none":"d-block"),e.yG2(3),e.E7m("ngClass",f.liveCoordinates&&0===f.liveCoordinates.length?"d-block":"d-none"))},dependencies:[Ye.QF],styles:["[_nghost-%COMP%]     #mapId{width:100%!important;height:500px!important}.match-parent[_ngcontent-%COMP%]{height:100%}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return v})();function hi(v,l){if(1&v&&e.wR5(0,"img",45),2&v){const i=e.GaO();e._6D("src",null==i.employeeDetail?null:i.employeeDetail.image,e.K6U)}}function yi(v,l){1&v&&e.wR5(0,"img",46)}function rn(v,l){if(1&v&&(e.I0R(0,"a",47)(1,"span",48),e.wR5(2,"i",49),e.C$Y()()),2&v){const i=e.GaO();e.CI5("href","tel:",null==i.employeeDetail?null:i.employeeDetail.mobile,"",e.K6U)}}function gn(v,l){if(1&v&&(e.I0R(0,"a",47)(1,"span",50),e.wR5(2,"i",51),e.C$Y()()),2&v){const i=e.GaO();e.CI5("href","mailto:",null==i.employeeDetail?null:i.employeeDetail.email,"",e.K6U)}}function An(v,l){if(1&v&&e.wR5(0,"div",52),2&v){const i=e.GaO();e.E7m("innerHTML",i.formatTime(null==i.checkIndetails?null:i.checkIndetails.check_in_time),e.E3n)}}function $n(v,l){1&v&&(e.I0R(0,"div",53),e.OEk(1,"Not Checked In Yet"),e.C$Y())}function Jn(v,l){if(1&v&&e.wR5(0,"div",52),2&v){const i=e.GaO();e.E7m("innerHTML",i.formatTime(null==i.checkIndetails?null:i.checkIndetails.check_out_time),e.E3n)}}function Qn(v,l){1&v&&(e.I0R(0,"div",53),e.OEk(1,"Not Checked Out Yet"),e.C$Y())}function wr(v,l){if(1&v&&(e.I0R(0,"div",54),e.OEk(1),e.C$Y()),2&v){const i=e.GaO();e.yG2(),e.oRS(" ",i.formattedTotalTime," ")}}function Pr(v,l){1&v&&e.OEk(0,"-")}function Rr(v,l){if(1&v&&e.wR5(0,"app-password-change",41),2&v){const i=e.GaO();e.E7m("companyId",null==i.employeeDetail?null:i.employeeDetail.company_id)}}function yr(v,l){if(1&v&&e.wR5(0,"app-timeline",41),2&v){const i=e.GaO();e.E7m("companyId",null==i.employeeDetail?null:i.employeeDetail.company_id)}}function Un(v,l){if(1&v&&e.wR5(0,"app-live-location",44),2&v){const i=e.GaO();e.E7m("companyId",null==i.employeeDetail?null:i.employeeDetail.company_id)("emp_image",null==i.employeeDetail?null:i.employeeDetail.image)}}let Wr=(()=>{class v{constructor(i,d,f){this.formBuilder=i,this.route=d,this.api=f,this.formGroups=[],this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.selectedDate=new Date,this.checkIndetails={},this.route.queryParams.subscribe(O=>{this.currentTab=O.tab||"personalDetails"})}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Profile Settings",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(i=>{this.urlId=i.id?Number(i.id):null}),this.urlId&&this.getemployeeData()}formatDate(i){return i?`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`:""}toggleSpinner(i){this.spinnerStatus=i,this.saveButtonActive=!i,this.submitted=i}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(i=>{i&&i.status?(this.toggleSpinner(!1),this.employeeDetail=i.data[0],this.getCheckInDetail()):this.handleError("Unexpected response format")},i=>{this.handleError(i.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.employeeDetail.company_id}&date=${this.formattedDate}`).subscribe(i=>{this.toggleSpinner(!1),i&&i.status?(this.checkIndetails=i.data,this.formattedTotalTime=this.calculateTotalTimeForAll(),console.log(this.formattedTotalTime)):this.checkIndetails=null},i=>{this.toggleSpinner(!1),this.handleError(i.message||"An error occurred while fetching data")})}handleError(i){this.toggleSpinner(!1)}changeTab(i){this.currentTab=i}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}addForm(){const i=this.formBuilder.group(this.educationForm.value);this.formGroups.push(i)}deleteForm(i){this.formGroups.splice(i,1)}calculateTimeDifference(i,d){const[f,O,H]=i.split(":").map(Number),[ne,Te,Qe]=d.split(":").map(Number),_t=new Date;_t.setHours(f,O,H);const Xt=new Date;Xt.setHours(ne,Te,Qe);const Ti=Xt.getTime()-_t.getTime();return Math.max(0,Math.floor(Ti/6e4))}calculateTotalTimeForAll(){if(!this.checkIndetails||0===this.checkIndetails.length)return"No check-in/check-out data available";let i=0;for(const O of this.checkIndetails)O.check_in_time&&O.check_out_time&&(i+=this.calculateTimeDifference(O.check_in_time,O.check_out_time));return`${Math.floor(i/60)}h ${i%60}m`}calculateTotalTime(i,d){const[f,O]=i.split(":").map(Number),[H,ne]=d.split(":").map(Number),Te=new Date;Te.setHours(f,O,0);const Qe=new Date;Qe.setHours(H,ne,0);const _t=Qe.getTime()-Te.getTime(),Xt=Math.floor(_t/6e4);return`${Math.floor(Xt/60)}h ${Xt%60}m`}formatTime(i){if(!i)return"Invalid time";const[d,f,O]=i.split(":");return`${+d%12||12}:${f} ${+d>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(Y.im),e.GI1(A.gV),e.GI1(Ee))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-employee-detail"]],decls:157,vars:42,consts:[[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["alt","","id","user-img","class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"d-flex","justify-content-center","gap-2","mt-2"],["class","avatar-xs d-block",3,"href"],[1,"card","border-top"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"list-unstyled","vstack","gap-2","mb-0"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"ri-login-box-line","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted",3,"innerHTML"],[1,"ri-logout-box-line","align-middle","me-1","text-primary-emphasis"],[1,"ph","ph-timer","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","false","tabindex","-1",1,"nav-link",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-secondary",3,"routerLink"],[1,"bi","bi-pencil-square","align-baseline","me-1"],[1,"card"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-body","p-4"],[1,""],[1,"table-responsive"],[1,"table","table-sm","table-borderless","align-middle","description-table","mb-0"],["id","changePassword","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId"],["id","timeline","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","liveLocation","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId","emp_image"],["alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"avatar-xs","d-block",3,"href"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-phone-line"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-mail-line"],[1,"flex-shrink-0","text-muted",3,"innerHTML"],[1,"flex-shrink-0","text-danger"],[1,"flex-shrink-0","text-muted"]],template:function(d,f){1&d&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),e.wR5(4,"img",3)(5,"div"),e.C$Y(),e.I0R(6,"div",4)(7,"div",5)(8,"div",6),e.yuY(9,hi,1,1,"img",7)(10,yi,1,0),e.C$Y(),e.I0R(11,"div",8)(12,"h5"),e.OEk(13),e.C$Y(),e.I0R(14,"p",9),e.OEk(15),e.C$Y()(),e.I0R(16,"div",10),e.yuY(17,rn,3,1,"a",11)(18,gn,3,1,"a",11),e.C$Y()()(),e.I0R(19,"div",12)(20,"div",13)(21,"h6",14),e.OEk(22,"Today Attendance"),e.C$Y()(),e.I0R(23,"div",15)(24,"ul",16)(25,"li")(26,"div",17)(27,"div",18),e.wR5(28,"i",19),e.OEk(29," Checkin Time "),e.C$Y(),e.yuY(30,An,1,1,"div",20)(31,$n,2,0),e.C$Y()(),e.I0R(32,"li")(33,"div",17)(34,"div",18),e.wR5(35,"i",21),e.OEk(36," Checkout Time "),e.C$Y(),e.yuY(37,Jn,1,1,"div",20)(38,Qn,2,0),e.C$Y()(),e.I0R(39,"li")(40,"div",17)(41,"div",18),e.wR5(42,"i",22),e.OEk(43," Total Time "),e.C$Y(),e.yuY(44,wr,2,1,"div",23)(45,Pr,1,0),e.C$Y()()()()()()(),e.I0R(46,"div",24)(47,"div",25)(48,"ul",26)(49,"li",27)(50,"a",28),e.qCj("click",function(){return f.changeTab("personalDetails")}),e.OEk(51," Personal Details "),e.C$Y()(),e.I0R(52,"li",27)(53,"a",29),e.qCj("click",function(){return f.changeTab("changePassword")}),e.OEk(54," Changes Password "),e.C$Y()(),e.I0R(55,"li",27)(56,"a",29),e.qCj("click",function(){return f.changeTab("timeline")}),e.OEk(57," Timeline "),e.C$Y()(),e.I0R(58,"li",27)(59,"a",29),e.qCj("click",function(){return f.changeTab("liveLocation")}),e.OEk(60," Live Location "),e.C$Y()()(),e.I0R(61,"div",30)(62,"a",31),e.wR5(63,"i",32),e.OEk(64," Edit Profile"),e.C$Y()()(),e.I0R(65,"div",33)(66,"div",34)(67,"div",35)(68,"div",33)(69,"div",13)(70,"h6",14),e.OEk(71,"Personal Details"),e.C$Y()(),e.I0R(72,"div",36)(73,"div",37)(74,"div",38)(75,"table",39)(76,"tbody")(77,"tr")(78,"th"),e.OEk(79,"Name"),e.C$Y(),e.I0R(80,"td"),e.OEk(81),e.C$Y()(),e.I0R(82,"tr")(83,"th"),e.OEk(84,"Gender"),e.C$Y(),e.I0R(85,"td"),e.OEk(86),e.C$Y()(),e.I0R(87,"tr")(88,"th"),e.OEk(89,"Designation"),e.C$Y(),e.I0R(90,"td"),e.OEk(91),e.C$Y()(),e.I0R(92,"tr")(93,"th"),e.OEk(94,"Employee id"),e.C$Y(),e.I0R(95,"td"),e.OEk(96),e.C$Y()(),e.I0R(97,"tr")(98,"th"),e.OEk(99,"Email"),e.C$Y(),e.I0R(100,"td"),e.OEk(101),e.C$Y()(),e.I0R(102,"tr")(103,"th"),e.OEk(104,"Mobile"),e.C$Y(),e.I0R(105,"td"),e.OEk(106),e.C$Y()(),e.I0R(107,"tr")(108,"th"),e.OEk(109,"Date of Birth"),e.C$Y(),e.I0R(110,"td"),e.OEk(111),e.wVc(112,"date"),e.C$Y()(),e.I0R(113,"tr")(114,"th"),e.OEk(115,"Joining date"),e.C$Y(),e.I0R(116,"td"),e.OEk(117),e.wVc(118,"date"),e.C$Y()(),e.I0R(119,"tr")(120,"th"),e.OEk(121,"Address"),e.C$Y(),e.I0R(122,"td"),e.OEk(123),e.C$Y()(),e.I0R(124,"tr")(125,"th"),e.OEk(126,"City"),e.C$Y(),e.I0R(127,"td"),e.OEk(128),e.C$Y()(),e.I0R(129,"tr")(130,"th"),e.OEk(131,"State"),e.C$Y(),e.I0R(132,"td"),e.OEk(133),e.C$Y()(),e.I0R(134,"tr")(135,"th"),e.OEk(136,"Zip code"),e.C$Y(),e.I0R(137,"td"),e.OEk(138),e.C$Y()()()()()()()()(),e.I0R(139,"div",40)(140,"div",13)(141,"h6",14),e.OEk(142,"Changes Password"),e.C$Y()(),e.I0R(143,"div",15),e.yuY(144,Rr,1,1,"app-password-change",41),e.C$Y()(),e.I0R(145,"div",42)(146,"div",13)(147,"h6",14),e.OEk(148,"Timeline"),e.C$Y()(),e.I0R(149,"div",15),e.yuY(150,yr,1,1,"app-timeline",41),e.C$Y()(),e.I0R(151,"div",43)(152,"div",13)(153,"h6",14),e.OEk(154,"Live Location"),e.C$Y()(),e.I0R(155,"div",15),e.yuY(156,Un,1,2,"app-live-location",44),e.C$Y()()()()()()),2&d&&(e.yG2(9),e.C0Y(9,null!=f.employeeDetail&&f.employeeDetail.image?9:10),e.yG2(4),e.oRS(" ",null==f.employeeDetail?null:f.employeeDetail.name," "),e.yG2(2),e.cNF(null==f.employeeDetail?null:f.employeeDetail.designation),e.yG2(2),e.C0Y(17,null!=f.employeeDetail&&f.employeeDetail.mobile?17:-1),e.yG2(),e.C0Y(18,null!=f.employeeDetail&&f.employeeDetail.email?18:-1),e.yG2(12),e.C0Y(30,null!=f.checkIndetails&&f.checkIndetails.check_in_time?30:31),e.yG2(7),e.C0Y(37,null!=f.checkIndetails&&f.checkIndetails.check_out_time?37:38),e.yG2(7),e.C0Y(44,null!=f.checkIndetails&&f.checkIndetails.check_in_time&&null!=f.checkIndetails&&f.checkIndetails.check_out_time?44:45),e.yG2(6),e.eAK("active","personalDetails"===f.currentTab),e.yG2(3),e.eAK("active","changePassword"===f.currentTab),e.yG2(3),e.eAK("active","timeline"===f.currentTab),e.yG2(3),e.eAK("active","liveLocation"===f.currentTab),e.yG2(3),e.CI5("routerLink","/edit-employee/",f.urlId,""),e.yG2(5),e.E7m("hidden","personalDetails"!==f.currentTab),e.yG2(14),e.cNF(null==f.employeeDetail?null:f.employeeDetail.name),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.gender),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.designation),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.employee_id),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.email),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.mobile),e.yG2(5),e.oRS(" ",e.g7$(112,36,null==f.employeeDetail?null:f.employeeDetail.dob,"dd/MMM/yyyy")," "),e.yG2(6),e.oRS(" ",e.g7$(118,39,null==f.employeeDetail?null:f.employeeDetail.joining_date,"dd/MMM/yyyy")," "),e.yG2(6),e.cNF(null==f.employeeDetail?null:f.employeeDetail.address),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.city),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.state),e.yG2(5),e.cNF(null==f.employeeDetail?null:f.employeeDetail.zip_code),e.yG2(),e.E7m("hidden","changePassword"!==f.currentTab),e.yG2(5),e.C0Y(144,f.employeeDetail?144:-1),e.yG2(),e.E7m("hidden","timeline"!==f.currentTab),e.yG2(5),e.C0Y(150,f.employeeDetail?150:-1),e.yG2(),e.E7m("hidden","liveLocation"!==f.currentTab),e.yG2(5),e.C0Y(156,f.employeeDetail?156:-1))},dependencies:[A.ER,he,$e,Wt,Ye.y]})}return v})();var Yn=function(){return Yn=Object.assign||function(v){for(var l,i=1,d=arguments.length;i<d;i++)for(var f in l=arguments[i])Object.prototype.hasOwnProperty.call(l,f)&&(v[f]=l[f]);return v},Yn.apply(this,arguments)},zr=function(){function v(l,i,d){var f=this;this.endVal=i,this.options=d,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(O){f.startTime||(f.startTime=O);var H=O-f.startTime;f.remaining=f.duration-H,f.frameVal=f.useEasing?f.countDown?f.startVal-f.easingFn(H,0,f.startVal-f.endVal,f.duration):f.easingFn(H,f.startVal,f.endVal-f.startVal,f.duration):f.startVal+H/f.duration*(f.endVal-f.startVal),f.frameVal=(f.countDown?f.frameVal<f.endVal:f.frameVal>f.endVal)?f.endVal:f.frameVal,f.frameVal=Number(f.frameVal.toFixed(f.options.decimalPlaces)),f.printValue(f.frameVal),H<f.duration?f.rAF=requestAnimationFrame(f.count):null!==f.finalEndVal?f.update(f.finalEndVal):f.options.onCompleteCallback&&f.options.onCompleteCallback()},this.formatNumber=function(O){var H,ne,Te,Qe,_t=O<0?"-":"";H=Math.abs(O).toFixed(f.options.decimalPlaces);var Xt=(H+="").split(".");if(ne=Xt[0],Te=Xt.length>1?f.options.decimal+Xt[1]:"",f.options.useGrouping){Qe="";for(var Ti=3,Fi=0,fn=0,nn=ne.length;fn<nn;++fn)f.options.useIndianSeparators&&4===fn&&(Ti=2,Fi=1),0!==fn&&Fi%Ti==0&&(Qe=f.options.separator+Qe),Fi++,Qe=ne[nn-fn-1]+Qe;ne=Qe}return f.options.numerals&&f.options.numerals.length&&(ne=ne.replace(/[0-9]/g,function(rr){return f.options.numerals[+rr]}),Te=Te.replace(/[0-9]/g,function(rr){return f.options.numerals[+rr]})),_t+f.options.prefix+ne+Te+f.options.suffix},this.easeOutExpo=function(O,H,ne,Te){return ne*(1-Math.pow(2,-10*O/Te))*1024/1023+H},this.options=Yn(Yn({},this.defaults),d),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(i),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof l?document.getElementById(l):l,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,l):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return f.handleScroll(f)}),window.onscroll=function(){window.onScrollFns.forEach(function(O){return O()})},this.handleScroll(this)))}return v.prototype.handleScroll=function(l){if(l&&window&&!l.once){var i=window.innerHeight+window.scrollY,d=l.el.getBoundingClientRect(),f=d.top+window.pageYOffset,O=d.top+d.height+window.pageYOffset;O<i&&O>window.scrollY&&l.paused?(l.paused=!1,setTimeout(function(){return l.start()},l.options.scrollSpyDelay),l.options.scrollSpyOnce&&(l.once=!0)):(window.scrollY>O||f>i)&&!l.paused&&l.reset()}},v.prototype.determineDirectionAndSmartEasing=function(){var l=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>l,Math.abs(l-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=l,this.endVal=l+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=l,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},v.prototype.start=function(l){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),l&&(this.options.onCompleteCallback=l),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},v.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},v.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},v.prototype.update=function(l){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(l),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},v.prototype.printValue=function(l){var i;if(this.el){var d=this.formattingFn(l);null!==(i=this.options.plugin)&&void 0!==i&&i.render?this.options.plugin.render(this.el,d):"INPUT"===this.el.tagName?this.el.value=d:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=d:this.el.innerHTML=d}},v.prototype.ensureNumber=function(l){return"number"==typeof l&&!isNaN(l)},v.prototype.validateValue=function(l){var i=Number(l);return this.ensureNumber(i)?i:(this.error="[CountUp] invalid start or end value: ".concat(l),null)},v.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},v}();let qa=(()=>{class v{constructor(i,d,f){this.el=i,this.zone=d,this.platformId=f,this.options={},this.reanimateOnClick=!0,this.complete=new e._w7}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(i){if(!(0,Ye.c0)(this.platformId))return;const{options:d,endVal:f}=i;void 0!==f?.currentValue?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==d?.currentValue&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new zr(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return v.\u0275fac=function(i){return new(i||v)(e.GI1(e.GMv),e.GI1(e.WW2),e.GI1(e.AHE))},v.\u0275dir=e.Sc5({type:v,selectors:[["","countUp",""]],hostBindings:function(i,d){1&i&&e.qCj("click",function(){return d.onClick()})},inputs:{endVal:[e.Wk5.None,"countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[e.SYr]}),v})(),sa=(()=>{class v{}return v.\u0275fac=function(i){return new(i||v)},v.\u0275mod=e.a4G({type:v}),v.\u0275inj=e.s3X({imports:[[]]}),v})();function Kr(v,l){if(1&v&&(e.I0R(0,"div",103),e.wR5(1,"img",104),e.C$Y()),2&v){const i=e.GaO().$implicit;e.yG2(),e._6D("src",i.image,e.K6U)}}function So(v,l){1&v&&(e.I0R(0,"div",103),e.wR5(1,"img",105),e.C$Y())}const Dl=()=>({tab:"timeline"});function go(v,l){if(1&v&&(e.I0R(0,"ul",106)(1,"li")(2,"a",107),e.wR5(3,"i",108),e.OEk(4," View"),e.C$Y()()()),2&v){const i=e.GaO().$implicit;e.yG2(2),e.CI5("routerLink","/employee-detail/",i.id,""),e.E7m("queryParams",e.q4q(2,Dl))}}function Fr(v,l){if(1&v){const i=e.KQA();e.I0R(0,"tr",84),e.wR5(1,"td"),e.I0R(2,"td",85)(3,"a",86),e.OEk(4,"#TB01"),e.C$Y()(),e.I0R(5,"td",87)(6,"div",88),e.yuY(7,Kr,2,1,"div",89)(8,So,2,0),e.I0R(9,"div")(10,"h6",14)(11,"a",90),e.OEk(12),e.C$Y()()()()(),e.I0R(13,"td",91),e.OEk(14),e.C$Y(),e.I0R(15,"td",92),e.OEk(16),e.C$Y(),e.I0R(17,"td",93),e.OEk(18),e.C$Y(),e.I0R(19,"td",94),e.OEk(20),e.C$Y(),e.I0R(21,"td",95),e.OEk(22),e.C$Y(),e.I0R(23,"td",95),e.OEk(24),e.wR5(25,"br"),e.I0R(26,"a",96),e.qCj("click",function(){const O=e.usT(i).$implicit,H=e.GaO();return e.Gew(132).show(),e.CGJ(H.updateCheckInDetal(O.checkIns,O.totalDuration))}),e.OEk(27,"Check Detail "),e.C$Y()(),e.I0R(28,"td",97)(29,"span",98),e.OEk(30),e.C$Y()(),e.I0R(31,"td")(32,"div",99)(33,"button",100),e.wR5(34,"i",101),e.C$Y(),e.yuY(35,go,5,3,"ul",102),e.C$Y()()()}if(2&v){const i=l.$implicit,d=e.GaO();e.CI5("id","p_",i._id,""),e.yG2(7),e.C0Y(7,i.image?7:8),e.yG2(5),e.cNF(i.name),e.yG2(2),e.cNF(i.mobile),e.yG2(2),e.cNF(i.email),e.yG2(2),e.cNF(i.designation),e.yG2(2),e.oRS(" ",d.formatTime(i.latestCheckInTime)," "),e.yG2(2),e.oRS(" ",d.formatTime(i.latestCheckOutTime)," "),e.yG2(2),e.oRS(" ",i.totalDuration,""),e.yG2(5),e.E7m("ngClass","Present"==i.checkin_status?"bg-success":"bg-danger"),e.yG2(),e.cNF(i.checkin_status)}}function eo(v,l){1&v&&(e.I0R(0,"div",47)(1,"div",109)(2,"span",110),e.OEk(3,"Loading..."),e.C$Y()()())}function Zl(v,l){if(1&v&&(e.I0R(0,"tr")(1,"th",78),e.OEk(2),e.C$Y(),e.I0R(3,"td"),e.OEk(4),e.C$Y(),e.I0R(5,"td"),e.OEk(6),e.C$Y(),e.I0R(7,"td",79),e.OEk(8),e.C$Y()()),2&v){const i=l.$implicit,d=l.$index,f=e.GaO();e.yG2(2),e.cNF(d+1),e.yG2(2),e.cNF(f.formatTime(i.check_in_time)),e.yG2(2),e.cNF(f.formatTime(i.check_out_time)),e.yG2(2),e.cNF(i.duration)}}let _a=(()=>{class v{constructor(i){this.api=i,this.dateChangeSubject=new y.E,this.spinnerStatus=!1,this.selectedDate=new Date,this.attendanceData=[],this.attendanceDataList=[],this.checkInDetails=[],this.direction="asc",this.bsConfig={maxDate:new Date,showWeekNumbers:!1,dateInputFormat:"DD/MM/YYYY"}}ngOnInit(){this.breadCrumbItems=[{label:"Attendance"},{label:"Employee",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate));const i=localStorage.getItem("currentUser");if(i){const d=JSON.parse(i);this.company_id=d.id}this.company_id&&this.getAttendance(),this.dateChangeSubject.pipe((0,x.o)(300)).subscribe(d=>{this.handleDateChange(d)})}onDateChange(i){this.dateChangeSubject.next(i)}handleDateChange(i){this.selectedDate=i,this.formattedDate=this.formatDate(i),this.getAttendance()}formatDate(i){return i?`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`:""}toggleSpinner(i){this.spinnerStatus=i}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid(`getAttendence?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe(d=>{this.toggleSpinner(!1),d&&d.status?(this.attendanceData=d.data||[],this.attendanceDataList=d.data||[],this.attendanceCount=d.attendenceCount||[]):(this.attendanceData=[],this.attendanceDataList=[],this.attendanceCount=[],this.toggleSpinner(!1))},d=>{this.handleError(d.message||"An error occurred while fetching data")})}handleError(i){this.toggleSpinner(!1)}updateCheckInDetal(i,d){this.totalDuration=d,this.checkInDetails=i}onSort(i){this.direction="asc"==this.direction?"desc":"asc";const d=[...this.attendanceData];d.sort((f,O)=>{const H=this.compare(f[i],O[i]);return"asc"===this.direction?H:-H}),this.attendanceData=d}compare(i,d){return i<d?-1:i>d?1:0}pageChanged(i){const d=(i.page-1)*i.itemsPerPage;this.endItem=i.page*i.itemsPerPage,this.attendanceData=this.attendanceDataList.slice(d,this.endItem)}filterdata(){this.attendanceData=this.term?this.attendanceDataList.filter(i=>i.name.toLowerCase().includes(this.term.toLowerCase())||i.mobile.toLowerCase().includes(this.term.toLowerCase())||i.email.toLowerCase().includes(this.term.toLowerCase())||i.employee_id.toLowerCase().includes(this.term.toLowerCase())||i.checkin_status.toLowerCase().includes(this.term.toLowerCase())):this.attendanceDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const i=document.querySelector(".noresult"),d=document.getElementById("pagination-element");this.term&&0===this.attendanceData.length?(i.style.display="block",d.classList.add("d-none")):(i.style.display="none",d.classList.remove("d-none"))}formatTime(i){if(!i)return"-";const[d,f,O]=i.split(":");return`${+d%12||12}:${f}:${O} ${+d>=12?"PM":"AM"} `}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(Ee))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-attendance-list"]],decls:169,vars:23,consts:[["title","Employee Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-xl-7"],[1,"card"],[1,"card-body"],[1,"row","g-4"],[1,"col-lg-3","col-sm-6","border-end-sm","ng-star-inserted"],[1,"d-flex","align-items-center","gap-2","mb-4"],[1,"avatar-xs","flex-shrink-0"],[1,"avatar-title","bg-body-secondary","border","border-primary-subtle","rounded-circle","text-primary"],[1,"ri-user-line"],[1,"flex-grow-1"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"counter-value",3,"countUp"],[1,"avatar-title","bg-body-secondary","border","border-success-subtle","rounded-circle","text-success"],[1,"ri-user-follow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-danger"],[1,"ri-user-unfollow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-warning"],[1,"bi","bi-clock-history"],[1,"counter-value"],[1,"col-lg-12"],[1,"card-header","d-flex","align-items-center"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name, mobile etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","exampleModalPopovers",1,"modal","fade"],["tooltipmodal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table-responsive","mt-4"],[1,"table","table-borderless","text-center","table-nowrap","align-middle","mb-0"],[1,"table-light"],["scope","col",2,"width","50px"],["scope","col"],["scope","col",1,"text-end"],["id","products-list"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"border-top","border-top-dashed","fs-base"],["scope","row"],[1,"text-end"],[1,"bi","bi-clock","align-baseline","me-1"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-light",3,"click"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],["class","avatar-sm bg-light rounded p-1 me-2"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"discount"],[1,"category"],[1,"stock"],[1,"price"],[1,"orders"],[1,"text-decoration-underline","ng-star-inserted",3,"click"],[1,"published"],[1,"badge",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);",1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(d,f){if(1&d){const O=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div")(9,"div",8)(10,"div",9)(11,"div",10),e.wR5(12,"i",11),e.C$Y()(),e.I0R(13,"div",12)(14,"p",13),e.OEk(15,"Total Employee"),e.C$Y()()(),e.I0R(16,"h3",14)(17,"span",15),e.OEk(18),e.C$Y()()()(),e.I0R(19,"div",7)(20,"div")(21,"div",8)(22,"div",9)(23,"div",16),e.wR5(24,"i",17),e.C$Y()(),e.I0R(25,"div",12)(26,"p",13),e.OEk(27,"Present"),e.C$Y()()(),e.I0R(28,"h3",14)(29,"span",15),e.OEk(30),e.C$Y()()()(),e.I0R(31,"div",7)(32,"div")(33,"div",8)(34,"div",9)(35,"div",18),e.wR5(36,"i",19),e.C$Y()(),e.I0R(37,"div",12)(38,"p",13),e.OEk(39,"Absent"),e.C$Y()()(),e.I0R(40,"h3",14)(41,"span",15),e.OEk(42),e.C$Y()()()(),e.I0R(43,"div",7)(44,"div")(45,"div",8)(46,"div",9)(47,"div",20),e.wR5(48,"i",21),e.C$Y()(),e.I0R(49,"div",12)(50,"p",13),e.OEk(51,"Total Duration"),e.C$Y()()(),e.I0R(52,"h3",14)(53,"span",22),e.OEk(54),e.C$Y()()()()()()()()(),e.I0R(55,"div",2)(56,"div",23)(57,"div",4)(58,"div",24)(59,"div",12)(60,"h5",25),e.OEk(61," Employees "),e.I0R(62,"span",26),e.OEk(63),e.C$Y()(),e.I0R(64,"p",27),e.OEk(65," Showing Result of Date: "),e.I0R(66,"span",28),e.OEk(67),e.wVc(68,"date"),e.C$Y()()(),e.I0R(69,"div",29)(70,"div",30)(71,"div",31)(72,"div",32)(73,"input",33),e.iHE("ngModelChange",function(ne){return e.kNx(f.selectedDate,ne)||(f.selectedDate=ne),ne}),e.qCj("bsValueChange",function(ne){return f.onDateChange(ne)}),e.C$Y(),e.I0R(74,"div",34)(75,"label",35),e.wR5(76,"i",36),e.C$Y()()()(),e.I0R(77,"div",37)(78,"input",38),e.iHE("ngModelChange",function(ne){return e.kNx(f.term,ne)||(f.term=ne),ne}),e.qCj("keyup",function(){return f.filterdata()}),e.C$Y(),e.wR5(79,"i",39),e.C$Y()()()(),e.I0R(80,"div",5)(81,"div",40)(82,"table",41)(83,"thead",42)(84,"tr")(85,"th")(86,"div",43),e.wR5(87,"label",44),e.C$Y()(),e.I0R(88,"th",45),e.qCj("click",function(){return f.onSort("name")}),e.OEk(89," Name "),e.C$Y(),e.I0R(90,"th",45),e.qCj("click",function(){return f.onSort("mobile")}),e.OEk(91," Mobile "),e.C$Y(),e.I0R(92,"th",45),e.qCj("click",function(){return f.onSort("email")}),e.OEk(93," Email "),e.C$Y(),e.I0R(94,"th",45),e.qCj("click",function(){return f.onSort("designation")}),e.OEk(95," Designation "),e.C$Y(),e.I0R(96,"th",45),e.qCj("click",function(){return f.onSort("check_in_time")}),e.OEk(97," Check-in Time "),e.C$Y(),e.I0R(98,"th",45),e.qCj("click",function(){return f.onSort("check_out_time")}),e.OEk(99," Check-out Time "),e.C$Y(),e.I0R(100,"th",45),e.qCj("click",function(){return f.onSort("totalDuration")}),e.OEk(101," Total Duration "),e.C$Y(),e.I0R(102,"th",45),e.qCj("click",function(){return f.onSort("checkin_status")}),e.OEk(103," Attendance Status "),e.C$Y(),e.I0R(104,"th"),e.OEk(105,"Action"),e.C$Y()()(),e.I0R(106,"tbody",46),e.c53(107,Fr,36,11,"tr",84,e.wJt),e.C$Y(),e.yuY(109,eo,4,0,"div",47),e.C$Y()(),e.I0R(110,"div",48)(111,"div",49)(112,"div",50)(113,"div",51),e.wR5(114,"i",52),e.C$Y()(),e.I0R(115,"h5",53),e.OEk(116,"Sorry! No Result Found"),e.C$Y(),e.I0R(117,"p",13),e.OEk(118),e.C$Y()()(),e.I0R(119,"div",54)(120,"div",55)(121,"div",56),e.OEk(122," Showing "),e.I0R(123,"span",57),e.OEk(124),e.C$Y(),e.OEk(125," of "),e.I0R(126,"span",57),e.OEk(127),e.C$Y(),e.OEk(128," Results "),e.C$Y()(),e.I0R(129,"div",58)(130,"pagination",59),e.qCj("pageChanged",function(ne){return f.pageChanged(ne)}),e.C$Y()()()()()()()(),e.I0R(131,"div",60,61)(133,"div",62)(134,"div",63)(135,"div",64)(136,"h5",65),e.OEk(137,"Check-in Detail"),e.C$Y(),e.I0R(138,"button",66),e.qCj("click",function(){e.usT(O);const ne=e.Gew(132);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(139,"div",67)(140,"div",68)(141,"table",69)(142,"thead")(143,"tr",70)(144,"th",71),e.OEk(145,"#"),e.C$Y(),e.I0R(146,"th",72),e.OEk(147,"Check-In Time"),e.C$Y(),e.I0R(148,"th",72),e.OEk(149,"Check-Out Time"),e.C$Y(),e.I0R(150,"th",73),e.OEk(151,"Duration"),e.C$Y()()(),e.I0R(152,"tbody",74),e.c53(153,Zl,9,4,"tr",null,e.wJt),e.C$Y()()(),e.I0R(155,"div",75)(156,"table",76)(157,"tbody")(158,"tr",77)(159,"th",78),e.OEk(160,"Total Duration"),e.C$Y(),e.I0R(161,"th",79),e.wR5(162,"i",80),e.OEk(163),e.C$Y()()()()()(),e.I0R(164,"div",81)(165,"div",23)(166,"div",82)(167,"button",83),e.qCj("click",function(){e.usT(O);const ne=e.Gew(132);return e.CGJ(ne.hide())}),e.OEk(168," Close "),e.C$Y()()()()()()()}2&d&&(e.E7m("breadcrumbItems",f.breadCrumbItems),e.yG2(17),e.E7m("countUp",null==f.attendanceDataList?null:f.attendanceDataList.length),e.yG2(),e.cNF(null==f.attendanceDataList?null:f.attendanceDataList.length),e.yG2(11),e.E7m("countUp",null==f.attendanceCount?null:f.attendanceCount.totalPresent),e.yG2(),e.cNF(null==f.attendanceCount?null:f.attendanceCount.totalPresent),e.yG2(11),e.E7m("countUp",null==f.attendanceCount?null:f.attendanceCount.totalAbsent),e.yG2(),e.cNF(null==f.attendanceCount?null:f.attendanceCount.totalAbsent),e.yG2(12),e.cNF(null==f.attendanceCount?null:f.attendanceCount.totalDuration),e.yG2(9),e.cNF(null==f.attendanceData?null:f.attendanceData.length),e.yG2(4),e.oRS(" ",e.g7$(68,20,f.formattedDate,"dd MMM , yyyy"),""),e.yG2(6),e.E7m("bsConfig",f.bsConfig),e.OKB("ngModel",f.selectedDate),e.yG2(5),e.OKB("ngModel",f.term),e.yG2(29),e.oho(f.attendanceData),e.yG2(2),e.C0Y(109,f.spinnerStatus?109:-1),e.yG2(9),e.oRS(" We've searched ",null==f.attendanceDataList?null:f.attendanceDataList.length," Employee Data. We did not find any Employee for you search. "),e.yG2(6),e.cNF(null==f.attendanceData?null:f.attendanceData.length),e.yG2(3),e.cNF(null==f.attendanceDataList?null:f.attendanceDataList.length),e.yG2(3),e.E7m("totalItems",null==f.attendanceDataList?null:f.attendanceDataList.length)("itemsPerPage",10),e.yG2(23),e.oho(f.checkInDetails),e.yG2(10),e.oRS(" ",f.totalDuration," "))},dependencies:[Ye.QF,Xe.O,A.ER,Ui.uo,Ui.M3,Ui.mY,Y.ot,Y.ue,Y._G,et.im,cn.uK,qa,M.em,M.U5,Ye.y]})}return v})();const zo=["showModal"],dl=["deleteRecordModal"];function mc(v,l){if(1&v){const i=e.KQA();e.I0R(0,"ul",96)(1,"li")(2,"a",97),e.wR5(3,"i",98),e.OEk(4," View"),e.C$Y()(),e.I0R(5,"li")(6,"a",99),e.qCj("click",function(){e.usT(i);const f=e.GaO().$implicit,O=e.GaO();return e.CGJ(O.editList(f))}),e.wR5(7,"i",100),e.OEk(8," Edit"),e.C$Y()(),e.I0R(9,"li")(10,"a",101),e.qCj("click",function(){e.usT(i);const f=e.GaO().$implicit,O=e.GaO();return e.CGJ(O.removeItem(f.id))}),e.wR5(11,"i",102),e.OEk(12," Remove"),e.C$Y()()()}}const Rc=(v,l)=>({"bg-info-subtle text-info":v,"bg-danger-subtle text-danger":l});function pl(v,l){if(1&v){const i=e.KQA();e.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),e.iHE("ngModelChange",function(f){const H=e.usT(i).$implicit;return e.kNx(H.states,f)||(H.states=f),e.CGJ(f)}),e.qCj("change",function(f){e.usT(i);const O=e.GaO();return e.CGJ(O.onCheckboxChange(f))}),e.C$Y(),e.wR5(4,"label",82),e.C$Y()(),e.I0R(5,"td",83)(6,"a",84),e.OEk(7,"#TB01"),e.C$Y()(),e.I0R(8,"td",85),e.OEk(9),e.C$Y(),e.I0R(10,"td",86)(11,"div",87)(12,"input",88),e.qCj("change",function(f){const H=e.usT(i).$implicit,ne=e.GaO();return e.CGJ(ne.setStatus(H,f))}),e.C$Y(),e.I0R(13,"label",89)(14,"span",90),e.OEk(15),e.C$Y()()()(),e.I0R(16,"td",91),e.OEk(17),e.wVc(18,"date"),e.C$Y(),e.I0R(19,"td")(20,"div",92)(21,"button",93),e.wR5(22,"i",94),e.C$Y(),e.yuY(23,mc,13,0,"ul",95),e.C$Y()()()}if(2&v){const i=l.$implicit,d=l.$index;e.CI5("id","p_",i._id,""),e.yG2(3),e._6D("value",i._id),e.OKB("ngModel",i.states),e.yG2(6),e.oRS(" ",i.name," "),e.yG2(3),e.E7m("checked","active"===i.status)("id","customSwitchsizemd"+d),e.yG2(),e.E7m("for","customSwitchsizemd"+d),e.yG2(),e.E7m("ngClass",e.IBC(13,Rc,"active"===i.status,"inactive"===i.status)),e.yG2(),e.oRS(" ",i.status," "),e.yG2(2),e.oRS(" ",e.g7$(18,10,i.created_at,"dd MMM, YYYY")," ")}}function lr(v,l){1&v&&(e.I0R(0,"div",28)(1,"div",103)(2,"span",104),e.OEk(3,"Loading..."),e.C$Y()()())}function gc(v,l){1&v&&(e.I0R(0,"div",105),e.OEk(1,"Department name is required."),e.C$Y())}function Bs(v,l){1&v&&(e.I0R(0,"div",105),e.OEk(1," Department name must be at most 45 characters "),e.C$Y())}function Ps(v,l){1&v&&(e.I0R(0,"div",105),e.OEk(1,"Status is required."),e.C$Y())}let Il=(()=>{class v{constructor(i,d,f){this.api=i,this.toastService=d,this.formBuilder=f,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Department",active:!0}],this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[Y.AQ.maxLength(45),Y.AQ.required]],status:["",[Y.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(i){this.spinnerStatus=i,this.saveButtonActive=!i,this.submitted=i}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department").subscribe(i=>{i&&i.status?(this.toggleSpinner(!1),this.departmentData=i.data||[],this.departmentDataList=i.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},i=>{this.toggleSpinner(!1),this.handleError(i.message||"An error occurred while fetching data")})}setStatus(i,d){const H={name:i.name,status:d.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("department",i.id,H).subscribe(ne=>this.handleResponse(ne),ne=>this.handleError(ne))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const i=this.createFormData();this.id?this.update(i):this.add(i)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(i){this.api.post("department",i).subscribe(d=>this.handleResponse(d),d=>this.handleError(d))}update(i){this.api.put("department",this.id,i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Department",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(i){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Department",document.getElementById("add-btn").innerHTML="Update",this.id=i.id,this.formGroup.patchValue({name:i.name,status:i.status})}removeItem(i){this.deleteId=i,this.deleteRecordModal?.show()}deleteData(i){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),i&&this.api.deleteWithId("department",i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f));const d=this.checkedValGet;d&&d.length>0&&this.api.post("department-delete-multiple",{ids:d}).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}handleResponse(i){this.toggleSpinner(!1),!0===i.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(i.message)}handleError(i){this.toggleSpinner(!1)}onCheckboxChange(i){for(var d=[],O=0;O<this.departmentData.length;O++)1==this.departmentData[O].states&&d.push(this.departmentData[O].id);this.checkedValGet=d,d.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(i){this.departmentData=this.departmentData.map(H=>({...H,states:i.target.checked}));for(var d=[],O=0;O<this.departmentData.length;O++)1==this.departmentData[O].states&&d.push(this.departmentData[O].id);this.checkedValGet=d,d.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(i){this.direction="asc"==this.direction?"desc":"asc";const d=[...this.departmentData];d.sort((f,O)=>{const H=this.compare(f[i],O[i]);return"asc"===this.direction?H:-H}),this.departmentData=d}compare(i,d){return i<d?-1:i>d?1:0}pageChanged(i){const d=(i.page-1)*i.itemsPerPage;this.endItem=i.page*i.itemsPerPage,this.departmentData=this.departmentDataList.slice(d,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(i=>i.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const i=document.querySelector(".noresult"),d=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(i.style.display="block",d.classList.add("d-none")):(i.style.display="none",d.classList.remove("d-none"))}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(Ee),e.GI1(Oe.SA),e.GI1(Y.im))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-department-list"]],viewQuery:function(d,f){if(1&d&&(e.CC$(zo,5),e.CC$(dl,5)),2&d){let O;e.wto(O=e.Gqi())&&(f.showModal=O.first),e.wto(O=e.Gqi())&&(f.deleteRecordModal=O.first)}},decls:123,vars:15,consts:[["title","Department",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(d,f){if(1&d){const O=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),e.OEk(8," Departments "),e.I0R(9,"span",8),e.OEk(10),e.C$Y()()(),e.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),e.iHE("ngModelChange",function(ne){return e.kNx(f.term,ne)||(f.term=ne),ne}),e.qCj("keyup",function(){return f.filterdata()}),e.C$Y(),e.wR5(16,"i",14),e.C$Y()(),e.I0R(17,"button",15),e.qCj("click",function(){e.usT(O);const ne=e.Gew(104);return e.CGJ(ne.show())}),e.wR5(18,"i",16),e.C$Y(),e.I0R(19,"button",17),e.qCj("click",function(){return f.onAdd()}),e.wR5(20,"i",18),e.OEk(21," Add Department "),e.C$Y()()()(),e.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),e.iHE("ngModelChange",function(ne){return e.kNx(f.masterSelected,ne)||(f.masterSelected=ne),ne}),e.qCj("change",function(ne){return f.checkUncheckAll(ne)}),e.C$Y(),e.wR5(30,"label",25),e.C$Y()(),e.I0R(31,"th",26),e.qCj("click",function(){return f.onSort("name")}),e.OEk(32," Department Name "),e.C$Y(),e.I0R(33,"th",26),e.qCj("click",function(){return f.onSort("status")}),e.OEk(34," Status "),e.C$Y(),e.I0R(35,"th",26),e.qCj("click",function(){return f.onSort("created_at")}),e.OEk(36," Created At "),e.C$Y(),e.I0R(37,"th"),e.OEk(38,"Action"),e.C$Y()()(),e.I0R(39,"tbody",27),e.c53(40,pl,24,16,"tr",80,e.wJt),e.C$Y(),e.yuY(42,lr,4,0,"div",28),e.C$Y()(),e.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),e.wR5(47,"i",33),e.C$Y()(),e.I0R(48,"h5",34),e.OEk(49,"Sorry! No Result Found"),e.C$Y(),e.I0R(50,"p",35),e.OEk(51),e.C$Y()()(),e.I0R(52,"div",36)(53,"div",37)(54,"div",38),e.OEk(55," Showing "),e.I0R(56,"span",39),e.OEk(57),e.C$Y(),e.OEk(58," of "),e.I0R(59,"span",39),e.OEk(60),e.C$Y(),e.OEk(61," Results "),e.C$Y()(),e.I0R(62,"div",40)(63,"pagination",41),e.qCj("pageChanged",function(ne){return f.pageChanged(ne)}),e.C$Y()()()()()()()(),e.I0R(64,"div",42,43),e.qCj("hidden.bs.modal",function(){return f.resetForm()}),e.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),e.OEk(70,"Add Department"),e.C$Y(),e.I0R(71,"button",48),e.qCj("click",function(){e.usT(O);const ne=e.Gew(65);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(72,"form",49),e.qCj("ngSubmit",function(){return f.onSubmit()}),e.I0R(73,"div",50),e.wR5(74,"div",51),e.I0R(75,"div",52)(76,"label",53),e.OEk(77,"Department Name "),e.I0R(78,"span",54),e.OEk(79,"*"),e.C$Y()(),e.wR5(80,"input",55),e.yuY(81,gc,2,0,"div",56)(82,Bs,2,0,"div",56),e.C$Y(),e.I0R(83,"div",52)(84,"label",57),e.OEk(85,"Status "),e.I0R(86,"span",54),e.OEk(87,"*"),e.C$Y()(),e.I0R(88,"select",58)(89,"option",59),e.OEk(90,"Select Status"),e.C$Y(),e.I0R(91,"option",60),e.OEk(92,"Active"),e.C$Y(),e.I0R(93,"option",61),e.OEk(94,"Inactive"),e.C$Y()(),e.yuY(95,Ps,2,0,"div",56),e.C$Y()(),e.I0R(96,"div",62)(97,"div",63)(98,"button",64),e.qCj("click",function(){e.usT(O);const ne=e.Gew(65);return e.CGJ(ne.hide())}),e.wR5(99,"i",65),e.OEk(100," Close "),e.C$Y(),e.I0R(101,"button",66),e.OEk(102," Add "),e.C$Y()()()()()()(),e.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),e.qCj("click",function(){e.usT(O);const ne=e.Gew(104);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(109,"div",71)(110,"div",72)(111,"div",54),e.wR5(112,"i",73),e.C$Y(),e.I0R(113,"div",74)(114,"h3",75),e.OEk(115,"Are you sure ?"),e.C$Y(),e.I0R(116,"p",76),e.OEk(117," Are you sure you want to remove this record ? "),e.C$Y()()(),e.I0R(118,"div",77)(119,"button",78),e.qCj("click",function(){e.usT(O);const ne=e.Gew(104);return e.CGJ(ne.hide())}),e.OEk(120," Close "),e.C$Y(),e.I0R(121,"button",79),e.qCj("click",function(){return f.deleteData(f.deleteId)}),e.OEk(122," Yes, Delete It! "),e.C$Y()()()()()()}2&d&&(e.E7m("breadcrumbItems",f.breadCrumbItems),e.yG2(10),e.cNF(null==f.departmentData?null:f.departmentData.length),e.yG2(5),e.OKB("ngModel",f.term),e.yG2(14),e.OKB("ngModel",f.masterSelected),e.yG2(11),e.oho(f.departmentData),e.yG2(2),e.C0Y(42,f.spinnerStatus?42:-1),e.yG2(9),e.oRS(" We've searched ",f.departmentDataList.length," Department We did not find any Department for you search. "),e.yG2(6),e.cNF(null==f.departmentData?null:f.departmentData.length),e.yG2(3),e.cNF(null==f.departmentDataList?null:f.departmentDataList.length),e.yG2(3),e.E7m("totalItems",null==f.departmentDataList?null:f.departmentDataList.length)("itemsPerPage",10),e.yG2(9),e.E7m("formGroup",f.formGroup),e.yG2(9),e.C0Y(81,f.f.name&&f.f.name.hasError("required")&&f.f.name.touched?81:-1),e.yG2(),e.C0Y(82,f.f.name&&f.f.name.hasError("maxlength")&&f.f.name.touched?82:-1),e.yG2(6),e.E7m("ngClass",f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(95,f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?95:-1))},dependencies:[Ye.QF,Xe.O,A.ER,Ui.uo,Ui.M3,Ui.mY,Y.sz,Y.wd,Y.GO,Y.ot,Y.SU,Y.GC,Y.ue,Y.u,Y._G,Y.uW,Y.Wo,et.im,cn.uK,Ye.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}"]})}return v})();const Fo=["showModal"],Ka=["deleteRecordModal"];function fl(v,l){if(1&v){const i=e.KQA();e.I0R(0,"ul",96)(1,"li")(2,"a",97),e.wR5(3,"i",98),e.OEk(4," View"),e.C$Y()(),e.I0R(5,"li")(6,"a",99),e.qCj("click",function(){e.usT(i);const f=e.GaO().$implicit,O=e.GaO();return e.CGJ(O.editList(f))}),e.wR5(7,"i",100),e.OEk(8," Edit"),e.C$Y()(),e.I0R(9,"li")(10,"a",101),e.qCj("click",function(){e.usT(i);const f=e.GaO().$implicit,O=e.GaO();return e.CGJ(O.removeItem(f.id))}),e.wR5(11,"i",102),e.OEk(12," Remove"),e.C$Y()()()}}const Aa=(v,l)=>({"bg-info-subtle text-info":v,"bg-danger-subtle text-danger":l});function zc(v,l){if(1&v){const i=e.KQA();e.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),e.iHE("ngModelChange",function(f){const H=e.usT(i).$implicit;return e.kNx(H.states,f)||(H.states=f),e.CGJ(f)}),e.qCj("change",function(f){e.usT(i);const O=e.GaO();return e.CGJ(O.onCheckboxChange(f))}),e.C$Y(),e.wR5(4,"label",82),e.C$Y()(),e.I0R(5,"td",83)(6,"a",84),e.OEk(7,"#TB01"),e.C$Y()(),e.I0R(8,"td",85),e.OEk(9),e.C$Y(),e.I0R(10,"td",86)(11,"div",87)(12,"input",88),e.qCj("change",function(f){const H=e.usT(i).$implicit,ne=e.GaO();return e.CGJ(ne.setStatus(H,f))}),e.C$Y(),e.I0R(13,"label",89)(14,"span",90),e.OEk(15),e.C$Y()()()(),e.I0R(16,"td",91),e.OEk(17),e.wVc(18,"date"),e.C$Y(),e.I0R(19,"td")(20,"div",92)(21,"button",93),e.wR5(22,"i",94),e.C$Y(),e.yuY(23,fl,13,0,"ul",95),e.C$Y()()()}if(2&v){const i=l.$implicit,d=l.$index;e.CI5("id","p_",i._id,""),e.yG2(3),e._6D("value",i._id),e.OKB("ngModel",i.states),e.yG2(6),e.oRS(" ",i.name," "),e.yG2(3),e.E7m("checked","active"===i.status)("id","customSwitchsizemd"+d),e.yG2(),e.E7m("for","customSwitchsizemd"+d),e.yG2(),e.E7m("ngClass",e.IBC(13,Aa,"active"===i.status,"inactive"===i.status)),e.yG2(),e.oRS(" ",i.status," "),e.yG2(2),e.oRS(" ",e.g7$(18,10,i.created_at,"dd MMM, YYYY")," ")}}function Al(v,l){1&v&&(e.I0R(0,"div",28)(1,"div",103)(2,"span",104),e.OEk(3,"Loading..."),e.C$Y()()())}function Bo(v,l){1&v&&(e.I0R(0,"div",105),e.OEk(1,"Designation name is required."),e.C$Y())}function ml(v,l){1&v&&(e.I0R(0,"div",105),e.OEk(1," Designation name must be at most 45 characters "),e.C$Y())}function lo(v,l){1&v&&(e.I0R(0,"div",105),e.OEk(1,"Status is required."),e.C$Y())}const au=[{path:"company",component:pt},{path:"add-company",component:hn},{path:"edit-company/:id",component:hn},{path:"employee",component:xr},{path:"add-employee",component:c},{path:"edit-employee/:id",component:c},{path:"employee-detail/:id",component:Wr},{path:"attendance-list",component:_a},{path:"department-list",component:Il},{path:"designation-list",component:(()=>{class v{constructor(i,d,f){this.api=i,this.toastService=d,this.formBuilder=f,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Designation",active:!0}],this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[Y.AQ.maxLength(45),Y.AQ.required]],status:["",[Y.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(i){this.spinnerStatus=i,this.saveButtonActive=!i,this.submitted=i}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("designation").subscribe(i=>{i&&i.status?(this.toggleSpinner(!1),this.departmentData=i.data||[],this.departmentDataList=i.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},i=>{this.toggleSpinner(!1),this.handleError(i.message||"An error occurred while fetching data")})}setStatus(i,d){const H={name:i.name,status:d.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("designation",i.id,H).subscribe(ne=>this.handleResponse(ne),ne=>this.handleError(ne))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const i=this.createFormData();this.id?this.update(i):this.add(i)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(i){this.api.post("designation",i).subscribe(d=>this.handleResponse(d),d=>this.handleError(d))}update(i){this.api.put("designation",this.id,i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(i){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Designation",document.getElementById("add-btn").innerHTML="Update",this.id=i.id,this.formGroup.patchValue({name:i.name,status:i.status})}removeItem(i){this.deleteId=i,this.deleteRecordModal?.show()}deleteData(i){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),i&&this.api.deleteWithId("designation",i).subscribe(f=>this.handleResponse(f),f=>this.handleError(f));const d=this.checkedValGet;d&&d.length>0&&this.api.post("designation-delete-multiple",{ids:d}).subscribe(f=>this.handleResponse(f),f=>this.handleError(f))}handleResponse(i){this.toggleSpinner(!1),!0===i.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(i.message)}handleError(i){this.toggleSpinner(!1)}onCheckboxChange(i){for(var d=[],O=0;O<this.departmentData.length;O++)1==this.departmentData[O].states&&d.push(this.departmentData[O].id);this.checkedValGet=d,d.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(i){this.departmentData=this.departmentData.map(H=>({...H,states:i.target.checked}));for(var d=[],O=0;O<this.departmentData.length;O++)1==this.departmentData[O].states&&d.push(this.departmentData[O].id);this.checkedValGet=d,d.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(i){this.direction="asc"==this.direction?"desc":"asc";const d=[...this.departmentData];d.sort((f,O)=>{const H=this.compare(f[i],O[i]);return"asc"===this.direction?H:-H}),this.departmentData=d}compare(i,d){return i<d?-1:i>d?1:0}pageChanged(i){const d=(i.page-1)*i.itemsPerPage;this.endItem=i.page*i.itemsPerPage,this.departmentData=this.departmentDataList.slice(d,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(i=>i.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const i=document.querySelector(".noresult"),d=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(i.style.display="block",d.classList.add("d-none")):(i.style.display="none",d.classList.remove("d-none"))}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(Ee),e.GI1(Oe.SA),e.GI1(Y.im))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["app-designation-list"]],viewQuery:function(d,f){if(1&d&&(e.CC$(Fo,5),e.CC$(Ka,5)),2&d){let O;e.wto(O=e.Gqi())&&(f.showModal=O.first),e.wto(O=e.Gqi())&&(f.deleteRecordModal=O.first)}},decls:123,vars:15,consts:[["title","Designation",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(d,f){if(1&d){const O=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),e.OEk(8," Designation "),e.I0R(9,"span",8),e.OEk(10),e.C$Y()()(),e.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),e.iHE("ngModelChange",function(ne){return e.kNx(f.term,ne)||(f.term=ne),ne}),e.qCj("keyup",function(){return f.filterdata()}),e.C$Y(),e.wR5(16,"i",14),e.C$Y()(),e.I0R(17,"button",15),e.qCj("click",function(){e.usT(O);const ne=e.Gew(104);return e.CGJ(ne.show())}),e.wR5(18,"i",16),e.C$Y(),e.I0R(19,"button",17),e.qCj("click",function(){return f.onAdd()}),e.wR5(20,"i",18),e.OEk(21," Add Designation "),e.C$Y()()()(),e.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),e.iHE("ngModelChange",function(ne){return e.kNx(f.masterSelected,ne)||(f.masterSelected=ne),ne}),e.qCj("change",function(ne){return f.checkUncheckAll(ne)}),e.C$Y(),e.wR5(30,"label",25),e.C$Y()(),e.I0R(31,"th",26),e.qCj("click",function(){return f.onSort("name")}),e.OEk(32," Designation Name "),e.C$Y(),e.I0R(33,"th",26),e.qCj("click",function(){return f.onSort("status")}),e.OEk(34," Status "),e.C$Y(),e.I0R(35,"th",26),e.qCj("click",function(){return f.onSort("created_at")}),e.OEk(36," Created At "),e.C$Y(),e.I0R(37,"th"),e.OEk(38,"Action"),e.C$Y()()(),e.I0R(39,"tbody",27),e.c53(40,zc,24,16,"tr",80,e.wJt),e.C$Y(),e.yuY(42,Al,4,0,"div",28),e.C$Y()(),e.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),e.wR5(47,"i",33),e.C$Y()(),e.I0R(48,"h5",34),e.OEk(49,"Sorry! No Result Found"),e.C$Y(),e.I0R(50,"p",35),e.OEk(51),e.C$Y()()(),e.I0R(52,"div",36)(53,"div",37)(54,"div",38),e.OEk(55," Showing "),e.I0R(56,"span",39),e.OEk(57),e.C$Y(),e.OEk(58," of "),e.I0R(59,"span",39),e.OEk(60),e.C$Y(),e.OEk(61," Results "),e.C$Y()(),e.I0R(62,"div",40)(63,"pagination",41),e.qCj("pageChanged",function(ne){return f.pageChanged(ne)}),e.C$Y()()()()()()()(),e.I0R(64,"div",42,43),e.qCj("hidden.bs.modal",function(){return f.resetForm()}),e.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),e.OEk(70,"Add Designation"),e.C$Y(),e.I0R(71,"button",48),e.qCj("click",function(){e.usT(O);const ne=e.Gew(65);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(72,"form",49),e.qCj("ngSubmit",function(){return f.onSubmit()}),e.I0R(73,"div",50),e.wR5(74,"div",51),e.I0R(75,"div",52)(76,"label",53),e.OEk(77,"Designation Name "),e.I0R(78,"span",54),e.OEk(79,"*"),e.C$Y()(),e.wR5(80,"input",55),e.yuY(81,Bo,2,0,"div",56)(82,ml,2,0,"div",56),e.C$Y(),e.I0R(83,"div",52)(84,"label",57),e.OEk(85,"Status "),e.I0R(86,"span",54),e.OEk(87,"*"),e.C$Y()(),e.I0R(88,"select",58)(89,"option",59),e.OEk(90,"Select Status"),e.C$Y(),e.I0R(91,"option",60),e.OEk(92,"Active"),e.C$Y(),e.I0R(93,"option",61),e.OEk(94,"Inactive"),e.C$Y()(),e.yuY(95,lo,2,0,"div",56),e.C$Y()(),e.I0R(96,"div",62)(97,"div",63)(98,"button",64),e.qCj("click",function(){e.usT(O);const ne=e.Gew(65);return e.CGJ(ne.hide())}),e.wR5(99,"i",65),e.OEk(100," Close "),e.C$Y(),e.I0R(101,"button",66),e.OEk(102," Add "),e.C$Y()()()()()()(),e.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),e.qCj("click",function(){e.usT(O);const ne=e.Gew(104);return e.CGJ(ne.hide())}),e.C$Y()(),e.I0R(109,"div",71)(110,"div",72)(111,"div",54),e.wR5(112,"i",73),e.C$Y(),e.I0R(113,"div",74)(114,"h3",75),e.OEk(115,"Are you sure ?"),e.C$Y(),e.I0R(116,"p",76),e.OEk(117," Are you sure you want to remove this record ? "),e.C$Y()()(),e.I0R(118,"div",77)(119,"button",78),e.qCj("click",function(){e.usT(O);const ne=e.Gew(104);return e.CGJ(ne.hide())}),e.OEk(120," Close "),e.C$Y(),e.I0R(121,"button",79),e.qCj("click",function(){return f.deleteData(f.deleteId)}),e.OEk(122," Yes, Delete It! "),e.C$Y()()()()()()}2&d&&(e.E7m("breadcrumbItems",f.breadCrumbItems),e.yG2(10),e.cNF(null==f.departmentData?null:f.departmentData.length),e.yG2(5),e.OKB("ngModel",f.term),e.yG2(14),e.OKB("ngModel",f.masterSelected),e.yG2(11),e.oho(f.departmentData),e.yG2(2),e.C0Y(42,f.spinnerStatus?42:-1),e.yG2(9),e.oRS(" We've searched ",f.departmentDataList.length," Department We did not find any Department for you search. "),e.yG2(6),e.cNF(null==f.departmentData?null:f.departmentData.length),e.yG2(3),e.cNF(null==f.departmentDataList?null:f.departmentDataList.length),e.yG2(3),e.E7m("totalItems",null==f.departmentDataList?null:f.departmentDataList.length)("itemsPerPage",10),e.yG2(9),e.E7m("formGroup",f.formGroup),e.yG2(9),e.C0Y(81,f.f.name&&f.f.name.hasError("required")&&f.f.name.touched?81:-1),e.yG2(),e.C0Y(82,f.f.name&&f.f.name.hasError("maxlength")&&f.f.name.touched?82:-1),e.yG2(6),e.E7m("ngClass",f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(95,f.f.status&&f.f.status.hasError("required")&&f.f.status.touched?95:-1))},dependencies:[Ye.QF,Xe.O,A.ER,Ui.uo,Ui.M3,Ui.mY,Y.sz,Y.wd,Y.GO,Y.ot,Y.SU,Y.GC,Y.ue,Y.u,Y._G,Y.uW,Y.Wo,et.im,cn.uK,Ye.y]})}return v})()}];let va=(()=>{class v{static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({imports:[A.qQ.forChild(au),A.qQ]})}return v})();var ql=Ot(1116),Ll=Ot(2700);function Qr(v){this.content=v}Qr.prototype={constructor:Qr,find:function(v){for(var l=0;l<this.content.length;l+=2)if(this.content[l]===v)return l;return-1},get:function(v){var l=this.find(v);return-1==l?void 0:this.content[l+1]},update:function(v,l,i){var d=i&&i!=v?this.remove(i):this,f=d.find(v),O=d.content.slice();return-1==f?O.push(i||v,l):(O[f+1]=l,i&&(O[f]=i)),new Qr(O)},remove:function(v){var l=this.find(v);if(-1==l)return this;var i=this.content.slice();return i.splice(l,2),new Qr(i)},addToStart:function(v,l){return new Qr([v,l].concat(this.remove(v).content))},addToEnd:function(v,l){var i=this.remove(v).content.slice();return i.push(v,l),new Qr(i)},addBefore:function(v,l,i){var d=this.remove(l),f=d.content.slice(),O=d.find(v);return f.splice(-1==O?f.length:O,0,l,i),new Qr(f)},forEach:function(v){for(var l=0;l<this.content.length;l+=2)v(this.content[l],this.content[l+1])},prepend:function(v){return(v=Qr.from(v)).size?new Qr(v.content.concat(this.subtract(v).content)):this},append:function(v){return(v=Qr.from(v)).size?new Qr(this.subtract(v).content.concat(v.content)):this},subtract:function(v){var l=this;v=Qr.from(v);for(var i=0;i<v.content.length;i+=2)l=l.remove(v.content[i]);return l},toObject:function(){var v={};return this.forEach(function(l,i){v[l]=i}),v},get size(){return this.content.length>>1}},Qr.from=function(v){if(v instanceof Qr)return v;var l=[];if(v)for(var i in v)l.push(i,v[i]);return new Qr(l)};const Ts=Qr;function _o(v,l,i){for(let d=0;;d++){if(d==v.childCount||d==l.childCount)return v.childCount==l.childCount?null:i;let f=v.child(d),O=l.child(d);if(f!=O){if(!f.sameMarkup(O))return i;if(f.isText&&f.text!=O.text){for(let H=0;f.text[H]==O.text[H];H++)i++;return i}if(f.content.size||O.content.size){let H=_o(f.content,O.content,i+1);if(null!=H)return H}i+=f.nodeSize}else i+=f.nodeSize}}function co(v,l,i,d){for(let f=v.childCount,O=l.childCount;;){if(0==f||0==O)return f==O?null:{a:i,b:d};let H=v.child(--f),ne=l.child(--O),Te=H.nodeSize;if(H!=ne){if(!H.sameMarkup(ne))return{a:i,b:d};if(H.isText&&H.text!=ne.text){let Qe=0,_t=Math.min(H.text.length,ne.text.length);for(;Qe<_t&&H.text[H.text.length-Qe-1]==ne.text[ne.text.length-Qe-1];)Qe++,i--,d--;return{a:i,b:d}}if(H.content.size||ne.content.size){let Qe=co(H.content,ne.content,i-1,d-1);if(Qe)return Qe}i-=Te,d-=Te}else i-=Te,d-=Te}}class dn{constructor(l,i){if(this.content=l,this.size=i||0,null==i)for(let d=0;d<l.length;d++)this.size+=l[d].nodeSize}nodesBetween(l,i,d,f=0,O){for(let H=0,ne=0;ne<i;H++){let Te=this.content[H],Qe=ne+Te.nodeSize;if(Qe>l&&!1!==d(Te,f+ne,O||null,H)&&Te.content.size){let _t=ne+1;Te.nodesBetween(Math.max(0,l-_t),Math.min(Te.content.size,i-_t),d,f+_t)}ne=Qe}}descendants(l){this.nodesBetween(0,this.size,l)}textBetween(l,i,d,f){let O="",H=!0;return this.nodesBetween(l,i,(ne,Te)=>{ne.isText?(O+=ne.text.slice(Math.max(l,Te)-Te,i-Te),H=!d):ne.isLeaf?(f?O+="function"==typeof f?f(ne):f:ne.type.spec.leafText&&(O+=ne.type.spec.leafText(ne)),H=!d):!H&&ne.isBlock&&(O+=d,H=!0)},0),O}append(l){if(!l.size)return this;if(!this.size)return l;let i=this.lastChild,d=l.firstChild,f=this.content.slice(),O=0;for(i.isText&&i.sameMarkup(d)&&(f[f.length-1]=i.withText(i.text+d.text),O=1);O<l.content.length;O++)f.push(l.content[O]);return new dn(f,this.size+l.size)}cut(l,i=this.size){if(0==l&&i==this.size)return this;let d=[],f=0;if(i>l)for(let O=0,H=0;H<i;O++){let ne=this.content[O],Te=H+ne.nodeSize;Te>l&&((H<l||Te>i)&&(ne=ne.isText?ne.cut(Math.max(0,l-H),Math.min(ne.text.length,i-H)):ne.cut(Math.max(0,l-H-1),Math.min(ne.content.size,i-H-1))),d.push(ne),f+=ne.nodeSize),H=Te}return new dn(d,f)}cutByIndex(l,i){return l==i?dn.empty:0==l&&i==this.content.length?this:new dn(this.content.slice(l,i))}replaceChild(l,i){let d=this.content[l];if(d==i)return this;let f=this.content.slice(),O=this.size+i.nodeSize-d.nodeSize;return f[l]=i,new dn(f,O)}addToStart(l){return new dn([l].concat(this.content),this.size+l.nodeSize)}addToEnd(l){return new dn(this.content.concat(l),this.size+l.nodeSize)}eq(l){if(this.content.length!=l.content.length)return!1;for(let i=0;i<this.content.length;i++)if(!this.content[i].eq(l.content[i]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(l){let i=this.content[l];if(!i)throw new RangeError("Index "+l+" out of range for "+this);return i}maybeChild(l){return this.content[l]||null}forEach(l){for(let i=0,d=0;i<this.content.length;i++){let f=this.content[i];l(f,d,i),d+=f.nodeSize}}findDiffStart(l,i=0){return _o(this,l,i)}findDiffEnd(l,i=this.size,d=l.size){return co(this,l,i,d)}findIndex(l,i=-1){if(0==l)return vo(0,l);if(l==this.size)return vo(this.content.length,l);if(l>this.size||l<0)throw new RangeError(`Position ${l} outside of fragment (${this})`);for(let d=0,f=0;;d++){let H=f+this.child(d).nodeSize;if(H>=l)return H==l||i>0?vo(d+1,H):vo(d,f);f=H}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(l=>l.toJSON()):null}static fromJSON(l,i){if(!i)return dn.empty;if(!Array.isArray(i))throw new RangeError("Invalid input for Fragment.fromJSON");return new dn(i.map(l.nodeFromJSON))}static fromArray(l){if(!l.length)return dn.empty;let i,d=0;for(let f=0;f<l.length;f++){let O=l[f];d+=O.nodeSize,f&&O.isText&&l[f-1].sameMarkup(O)?(i||(i=l.slice(0,f)),i[i.length-1]=O.withText(i[i.length-1].text+O.text)):i&&i.push(O)}return new dn(i||l,d)}static from(l){if(!l)return dn.empty;if(l instanceof dn)return l;if(Array.isArray(l))return this.fromArray(l);if(l.attrs)return new dn([l],l.nodeSize);throw new RangeError("Can not convert "+l+" to a Fragment"+(l.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}dn.empty=new dn([],0);const No={index:0,offset:0};function vo(v,l){return No.index=v,No.offset=l,No}function ya(v,l){if(v===l)return!0;if(!v||"object"!=typeof v||!l||"object"!=typeof l)return!1;let i=Array.isArray(v);if(Array.isArray(l)!=i)return!1;if(i){if(v.length!=l.length)return!1;for(let d=0;d<v.length;d++)if(!ya(v[d],l[d]))return!1}else{for(let d in v)if(!(d in l)||!ya(v[d],l[d]))return!1;for(let d in l)if(!(d in v))return!1}return!0}let Or=(()=>{class v{constructor(i,d){this.type=i,this.attrs=d}addToSet(i){let d,f=!1;for(let O=0;O<i.length;O++){let H=i[O];if(this.eq(H))return i;if(this.type.excludes(H.type))d||(d=i.slice(0,O));else{if(H.type.excludes(this.type))return i;!f&&H.type.rank>this.type.rank&&(d||(d=i.slice(0,O)),d.push(this),f=!0),d&&d.push(H)}}return d||(d=i.slice()),f||d.push(this),d}removeFromSet(i){for(let d=0;d<i.length;d++)if(this.eq(i[d]))return i.slice(0,d).concat(i.slice(d+1));return i}isInSet(i){for(let d=0;d<i.length;d++)if(this.eq(i[d]))return!0;return!1}eq(i){return this==i||this.type==i.type&&ya(this.attrs,i.attrs)}toJSON(){let i={type:this.type.name};for(let d in this.attrs){i.attrs=this.attrs;break}return i}static fromJSON(i,d){if(!d)throw new RangeError("Invalid input for Mark.fromJSON");let f=i.marks[d.type];if(!f)throw new RangeError(`There is no mark type ${d.type} in this schema`);return f.create(d.attrs)}static sameSet(i,d){if(i==d)return!0;if(i.length!=d.length)return!1;for(let f=0;f<i.length;f++)if(!i[f].eq(d[f]))return!1;return!0}static setFrom(i){if(!i||Array.isArray(i)&&0==i.length)return v.none;if(i instanceof v)return[i];let d=i.slice();return d.sort((f,O)=>f.type.rank-O.type.rank),d}}return v.none=[],v})();class oa extends Error{}class Fn{constructor(l,i,d){this.content=l,this.openStart=i,this.openEnd=d}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(l,i){let d=Kl(this.content,l+this.openStart,i);return d&&new Fn(d,this.openStart,this.openEnd)}removeBetween(l,i){return new Fn(Xr(this.content,l+this.openStart,i+this.openStart),this.openStart,this.openEnd)}eq(l){return this.content.eq(l.content)&&this.openStart==l.openStart&&this.openEnd==l.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let l={content:this.content.toJSON()};return this.openStart>0&&(l.openStart=this.openStart),this.openEnd>0&&(l.openEnd=this.openEnd),l}static fromJSON(l,i){if(!i)return Fn.empty;let d=i.openStart||0,f=i.openEnd||0;if("number"!=typeof d||"number"!=typeof f)throw new RangeError("Invalid input for Slice.fromJSON");return new Fn(dn.fromJSON(l,i.content),d,f)}static maxOpen(l,i=!0){let d=0,f=0;for(let O=l.firstChild;O&&!O.isLeaf&&(i||!O.type.spec.isolating);O=O.firstChild)d++;for(let O=l.lastChild;O&&!O.isLeaf&&(i||!O.type.spec.isolating);O=O.lastChild)f++;return new Fn(l,d,f)}}function Xr(v,l,i){let{index:d,offset:f}=v.findIndex(l),O=v.maybeChild(d),{index:H,offset:ne}=v.findIndex(i);if(f==l||O.isText){if(ne!=i&&!v.child(H).isText)throw new RangeError("Removing non-flat range");return v.cut(0,l).append(v.cut(i))}if(d!=H)throw new RangeError("Removing non-flat range");return v.replaceChild(d,O.copy(Xr(O.content,l-f-1,i-f-1)))}function Kl(v,l,i,d){let{index:f,offset:O}=v.findIndex(l),H=v.maybeChild(f);if(O==l||H.isText)return d&&!d.canReplace(f,f,i)?null:v.cut(0,l).append(i).append(v.cut(l));let ne=Kl(H.content,l-O-1,i);return ne&&v.replaceChild(f,H.copy(ne))}function La(v,l,i){if(i.openStart>v.depth)throw new oa("Inserted content deeper than insertion position");if(v.depth-i.openStart!=l.depth-i.openEnd)throw new oa("Inconsistent open depths");return Ds(v,l,i,0)}function Ds(v,l,i,d){let f=v.index(d),O=v.node(d);if(f==l.index(d)&&d<v.depth-i.openStart){let H=Ds(v,l,i,d+1);return O.copy(O.content.replaceChild(f,H))}if(i.content.size){if(i.openStart||i.openEnd||v.depth!=d||l.depth!=d){let{start:H,end:ne}=function Vo(v,l){let i=l.depth-v.openStart,f=l.node(i).copy(v.content);for(let O=i-1;O>=0;O--)f=l.node(O).copy(dn.from(f));return{start:f.resolveNoCache(v.openStart+i),end:f.resolveNoCache(f.content.size-v.openEnd-i)}}(i,v);return Mo(O,Yo(v,H,ne,l,d))}{let H=v.parent,ne=H.content;return Mo(H,ne.cut(0,v.parentOffset).append(i.content).append(ne.cut(l.parentOffset)))}}return Mo(O,Us(v,l,d))}function Cr(v,l){if(!l.type.compatibleContent(v.type))throw new oa("Cannot join "+l.type.name+" onto "+v.type.name)}function Pa(v,l,i){let d=v.node(i);return Cr(d,l.node(i)),d}function xa(v,l){let i=l.length-1;i>=0&&v.isText&&v.sameMarkup(l[i])?l[i]=v.withText(l[i].text+v.text):l.push(v)}function ba(v,l,i,d){let f=(l||v).node(i),O=0,H=l?l.index(i):f.childCount;v&&(O=v.index(i),v.depth>i?O++:v.textOffset&&(xa(v.nodeAfter,d),O++));for(let ne=O;ne<H;ne++)xa(f.child(ne),d);l&&l.depth==i&&l.textOffset&&xa(l.nodeBefore,d)}function Mo(v,l){return v.type.checkContent(l),v.copy(l)}function Yo(v,l,i,d,f){let O=v.depth>f&&Pa(v,l,f+1),H=d.depth>f&&Pa(i,d,f+1),ne=[];return ba(null,v,f,ne),O&&H&&l.index(f)==i.index(f)?(Cr(O,H),xa(Mo(O,Yo(v,l,i,d,f+1)),ne)):(O&&xa(Mo(O,Us(v,l,f+1)),ne),ba(l,i,f,ne),H&&xa(Mo(H,Us(i,d,f+1)),ne)),ba(d,null,f,ne),new dn(ne)}function Us(v,l,i){let d=[];return ba(null,v,i,d),v.depth>i&&xa(Mo(Pa(v,l,i+1),Us(v,l,i+1)),d),ba(l,null,i,d),new dn(d)}Fn.empty=new Fn(dn.empty,0,0);class Pl{constructor(l,i,d){this.pos=l,this.path=i,this.parentOffset=d,this.depth=i.length/3-1}resolveDepth(l){return null==l?this.depth:l<0?this.depth+l:l}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(l){return this.path[3*this.resolveDepth(l)]}index(l){return this.path[3*this.resolveDepth(l)+1]}indexAfter(l){return l=this.resolveDepth(l),this.index(l)+(l!=this.depth||this.textOffset?1:0)}start(l){return 0==(l=this.resolveDepth(l))?0:this.path[3*l-1]+1}end(l){return l=this.resolveDepth(l),this.start(l)+this.node(l).content.size}before(l){if(!(l=this.resolveDepth(l)))throw new RangeError("There is no position before the top-level node");return l==this.depth+1?this.pos:this.path[3*l-1]}after(l){if(!(l=this.resolveDepth(l)))throw new RangeError("There is no position after the top-level node");return l==this.depth+1?this.pos:this.path[3*l-1]+this.path[3*l].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let l=this.parent,i=this.index(this.depth);if(i==l.childCount)return null;let d=this.pos-this.path[this.path.length-1],f=l.child(i);return d?l.child(i).cut(d):f}get nodeBefore(){let l=this.index(this.depth),i=this.pos-this.path[this.path.length-1];return i?this.parent.child(l).cut(0,i):0==l?null:this.parent.child(l-1)}posAtIndex(l,i){i=this.resolveDepth(i);let d=this.path[3*i],f=0==i?0:this.path[3*i-1]+1;for(let O=0;O<l;O++)f+=d.child(O).nodeSize;return f}marks(){let l=this.parent,i=this.index();if(0==l.content.size)return Or.none;if(this.textOffset)return l.child(i).marks;let d=l.maybeChild(i-1),f=l.maybeChild(i);if(!d){let ne=d;d=f,f=ne}let O=d.marks;for(var H=0;H<O.length;H++)!1===O[H].type.spec.inclusive&&(!f||!O[H].isInSet(f.marks))&&(O=O[H--].removeFromSet(O));return O}marksAcross(l){let i=this.parent.maybeChild(this.index());if(!i||!i.isInline)return null;let d=i.marks,f=l.parent.maybeChild(l.index());for(var O=0;O<d.length;O++)!1===d[O].type.spec.inclusive&&(!f||!d[O].isInSet(f.marks))&&(d=d[O--].removeFromSet(d));return d}sharedDepth(l){for(let i=this.depth;i>0;i--)if(this.start(i)<=l&&this.end(i)>=l)return i;return 0}blockRange(l=this,i){if(l.pos<this.pos)return l.blockRange(this);for(let d=this.depth-(this.parent.inlineContent||this.pos==l.pos?1:0);d>=0;d--)if(l.pos<=this.end(d)&&(!i||i(this.node(d))))return new Ns(this,l,d);return null}sameParent(l){return this.pos-this.parentOffset==l.pos-l.parentOffset}max(l){return l.pos>this.pos?l:this}min(l){return l.pos<this.pos?l:this}toString(){let l="";for(let i=1;i<=this.depth;i++)l+=(l?"/":"")+this.node(i).type.name+"_"+this.index(i-1);return l+":"+this.parentOffset}static resolve(l,i){if(!(i>=0&&i<=l.content.size))throw new RangeError("Position "+i+" out of range");let d=[],f=0,O=i;for(let H=l;;){let{index:ne,offset:Te}=H.content.findIndex(O),Qe=O-Te;if(d.push(H,ne,f+Te),!Qe||(H=H.child(ne),H.isText))break;O=Qe-1,f+=Te+1}return new Pl(i,d,O)}static resolveCached(l,i){for(let f=0;f<yo.length;f++){let O=yo[f];if(O.pos==i&&O.doc==l)return O}let d=yo[aa]=Pl.resolve(l,i);return aa=(aa+1)%Fc,d}}let yo=[],aa=0,Fc=12;class Ns{constructor(l,i,d){this.$from=l,this.$to=i,this.depth=d}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Ol=Object.create(null);class Os{constructor(l,i,d,f=Or.none){this.type=l,this.attrs=i,this.marks=f,this.content=d||dn.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(l){return this.content.child(l)}maybeChild(l){return this.content.maybeChild(l)}forEach(l){this.content.forEach(l)}nodesBetween(l,i,d,f=0){this.content.nodesBetween(l,i,d,f,this)}descendants(l){this.nodesBetween(0,this.content.size,l)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(l,i,d,f){return this.content.textBetween(l,i,d,f)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(l){return this==l||this.sameMarkup(l)&&this.content.eq(l.content)}sameMarkup(l){return this.hasMarkup(l.type,l.attrs,l.marks)}hasMarkup(l,i,d){return this.type==l&&ya(this.attrs,i||l.defaultAttrs||Ol)&&Or.sameSet(this.marks,d||Or.none)}copy(l=null){return l==this.content?this:new Os(this.type,this.attrs,l,this.marks)}mark(l){return l==this.marks?this:new Os(this.type,this.attrs,this.content,l)}cut(l,i=this.content.size){return 0==l&&i==this.content.size?this:this.copy(this.content.cut(l,i))}slice(l,i=this.content.size,d=!1){if(l==i)return Fn.empty;let f=this.resolve(l),O=this.resolve(i),H=d?0:f.sharedDepth(i),ne=f.start(H),Qe=f.node(H).content.cut(f.pos-ne,O.pos-ne);return new Fn(Qe,f.depth-H,O.depth-H)}replace(l,i,d){return La(this.resolve(l),this.resolve(i),d)}nodeAt(l){for(let i=this;;){let{index:d,offset:f}=i.content.findIndex(l);if(i=i.maybeChild(d),!i)return null;if(f==l||i.isText)return i;l-=f+1}}childAfter(l){let{index:i,offset:d}=this.content.findIndex(l);return{node:this.content.maybeChild(i),index:i,offset:d}}childBefore(l){if(0==l)return{node:null,index:0,offset:0};let{index:i,offset:d}=this.content.findIndex(l);if(d<l)return{node:this.content.child(i),index:i,offset:d};let f=this.content.child(i-1);return{node:f,index:i-1,offset:d-f.nodeSize}}resolve(l){return Pl.resolveCached(this,l)}resolveNoCache(l){return Pl.resolve(this,l)}rangeHasMark(l,i,d){let f=!1;return i>l&&this.nodesBetween(l,i,O=>(d.isInSet(O.marks)&&(f=!0),!f)),f}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let l=this.type.name;return this.content.size&&(l+="("+this.content.toStringInner()+")"),wa(this.marks,l)}contentMatchAt(l){let i=this.type.contentMatch.matchFragment(this.content,0,l);if(!i)throw new Error("Called contentMatchAt on a node with invalid content");return i}canReplace(l,i,d=dn.empty,f=0,O=d.childCount){let H=this.contentMatchAt(l).matchFragment(d,f,O),ne=H&&H.matchFragment(this.content,i);if(!ne||!ne.validEnd)return!1;for(let Te=f;Te<O;Te++)if(!this.type.allowsMarks(d.child(Te).marks))return!1;return!0}canReplaceWith(l,i,d,f){if(f&&!this.type.allowsMarks(f))return!1;let O=this.contentMatchAt(l).matchType(d),H=O&&O.matchFragment(this.content,i);return!!H&&H.validEnd}canAppend(l){return l.content.size?this.canReplace(this.childCount,this.childCount,l.content):this.type.compatibleContent(l.type)}check(){this.type.checkContent(this.content);let l=Or.none;for(let i=0;i<this.marks.length;i++)l=this.marks[i].addToSet(l);if(!Or.sameSet(l,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(i=>i.type.name)}`);this.content.forEach(i=>i.check())}toJSON(){let l={type:this.type.name};for(let i in this.attrs){l.attrs=this.attrs;break}return this.content.size&&(l.content=this.content.toJSON()),this.marks.length&&(l.marks=this.marks.map(i=>i.toJSON())),l}static fromJSON(l,i){if(!i)throw new RangeError("Invalid input for Node.fromJSON");let d=null;if(i.marks){if(!Array.isArray(i.marks))throw new RangeError("Invalid mark data for Node.fromJSON");d=i.marks.map(l.markFromJSON)}if("text"==i.type){if("string"!=typeof i.text)throw new RangeError("Invalid text node in JSON");return l.text(i.text,d)}let f=dn.fromJSON(l,i.content);return l.nodeType(i.type).create(i.attrs,f,d)}}Os.prototype.text=void 0;class la extends Os{constructor(l,i,d,f){if(super(l,i,null,f),!d)throw new RangeError("Empty text nodes are not allowed");this.text=d}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wa(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(l,i){return this.text.slice(l,i)}get nodeSize(){return this.text.length}mark(l){return l==this.marks?this:new la(this.type,this.attrs,this.text,l)}withText(l){return l==this.text?this:new la(this.type,this.attrs,l,this.marks)}cut(l=0,i=this.text.length){return 0==l&&i==this.text.length?this:this.withText(this.text.slice(l,i))}eq(l){return this.sameMarkup(l)&&this.text==l.text}toJSON(){let l=super.toJSON();return l.text=this.text,l}}function wa(v,l){for(let i=v.length-1;i>=0;i--)l=v[i].type.name+"("+l+")";return l}class Do{constructor(l){this.validEnd=l,this.next=[],this.wrapCache=[]}static parse(l,i){let d=new ca(l,i);if(null==d.next)return Do.empty;let f=Rl(d);d.next&&d.err("Unexpected trailing text");let O=function Ho(v){let l=Object.create(null);return function i(d){let f=[];d.forEach(H=>{v[H].forEach(({term:ne,to:Te})=>{if(!ne)return;let Qe;for(let _t=0;_t<f.length;_t++)f[_t][0]==ne&&(Qe=f[_t][1]);Bc(v,Te).forEach(_t=>{Qe||f.push([ne,Qe=[]]),-1==Qe.indexOf(_t)&&Qe.push(_t)})})});let O=l[d.join(",")]=new Do(d.indexOf(v.length-1)>-1);for(let H=0;H<f.length;H++){let ne=f[H][1].sort(ho);O.next.push({type:f[H][0],next:l[ne.join(",")]||i(ne)})}return O}(Bc(v,0))}(function _c(v){let l=[[]];return f(function O(H,ne){if("choice"==H.type)return H.exprs.reduce((Te,Qe)=>Te.concat(O(Qe,ne)),[]);if("seq"!=H.type){if("star"==H.type){let Te=i();return d(ne,Te),f(O(H.expr,Te),Te),[d(Te)]}if("plus"==H.type){let Te=i();return f(O(H.expr,ne),Te),f(O(H.expr,Te),Te),[d(Te)]}if("opt"==H.type)return[d(ne)].concat(O(H.expr,ne));if("range"==H.type){let Te=ne;for(let Qe=0;Qe<H.min;Qe++){let _t=i();f(O(H.expr,Te),_t),Te=_t}if(-1==H.max)f(O(H.expr,Te),Te);else for(let Qe=H.min;Qe<H.max;Qe++){let _t=i();d(Te,_t),f(O(H.expr,Te),_t),Te=_t}return[d(Te)]}if("name"==H.type)return[d(ne,void 0,H.value)];throw new Error("Unknown expr type")}for(let Te=0;;Te++){let Qe=O(H.exprs[Te],ne);if(Te==H.exprs.length-1)return Qe;f(Qe,ne=i())}}(v,0),i()),l;function i(){return l.push([])-1}function d(H,ne,Te){let Qe={term:Te,to:ne};return l[H].push(Qe),Qe}function f(H,ne){H.forEach(Te=>Te.to=ne)}}(f));return function Qa(v,l){for(let i=0,d=[v];i<d.length;i++){let f=d[i],O=!f.validEnd,H=[];for(let ne=0;ne<f.next.length;ne++){let{type:Te,next:Qe}=f.next[ne];H.push(Te.name),O&&!(Te.isText||Te.hasRequiredAttrs())&&(O=!1),-1==d.indexOf(Qe)&&d.push(Qe)}O&&l.err("Only non-generatable nodes ("+H.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(O,d),O}matchType(l){for(let i=0;i<this.next.length;i++)if(this.next[i].type==l)return this.next[i].next;return null}matchFragment(l,i=0,d=l.childCount){let f=this;for(let O=i;f&&O<d;O++)f=f.matchType(l.child(O).type);return f}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let l=0;l<this.next.length;l++){let{type:i}=this.next[l];if(!i.isText&&!i.hasRequiredAttrs())return i}return null}compatible(l){for(let i=0;i<this.next.length;i++)for(let d=0;d<l.next.length;d++)if(this.next[i].type==l.next[d].type)return!0;return!1}fillBefore(l,i=!1,d=0){let f=[this];return function O(H,ne){let Te=H.matchFragment(l,d);if(Te&&(!i||Te.validEnd))return dn.from(ne.map(Qe=>Qe.createAndFill()));for(let Qe=0;Qe<H.next.length;Qe++){let{type:_t,next:Xt}=H.next[Qe];if(!_t.isText&&!_t.hasRequiredAttrs()&&-1==f.indexOf(Xt)){f.push(Xt);let Ti=O(Xt,ne.concat(_t));if(Ti)return Ti}}return null}(this,[])}findWrapping(l){for(let d=0;d<this.wrapCache.length;d+=2)if(this.wrapCache[d]==l)return this.wrapCache[d+1];let i=this.computeWrapping(l);return this.wrapCache.push(l,i),i}computeWrapping(l){let i=Object.create(null),d=[{match:this,type:null,via:null}];for(;d.length;){let f=d.shift(),O=f.match;if(O.matchType(l)){let H=[];for(let ne=f;ne.type;ne=ne.via)H.push(ne.type);return H.reverse()}for(let H=0;H<O.next.length;H++){let{type:ne,next:Te}=O.next[H];!ne.isLeaf&&!ne.hasRequiredAttrs()&&!(ne.name in i)&&(!f.type||Te.validEnd)&&(d.push({match:ne.contentMatch,type:ne,via:f}),i[ne.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(l){if(l>=this.next.length)throw new RangeError(`There's no ${l}th edge in this content match`);return this.next[l]}toString(){let l=[];return function i(d){l.push(d);for(let f=0;f<d.next.length;f++)-1==l.indexOf(d.next[f].next)&&i(d.next[f].next)}(this),l.map((d,f)=>{let O=f+(d.validEnd?"*":" ")+" ";for(let H=0;H<d.next.length;H++)O+=(H?", ":"")+d.next[H].type.name+"->"+l.indexOf(d.next[H].next);return O}).join("\n")}}Do.empty=new Do(!0);class ca{constructor(l,i){this.string=l,this.nodeTypes=i,this.inline=null,this.pos=0,this.tokens=l.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(l){return this.next==l&&(this.pos++||!0)}err(l){throw new SyntaxError(l+" (in content expression '"+this.string+"')")}}function Rl(v){let l=[];do{l.push($s(v))}while(v.eat("|"));return 1==l.length?l[0]:{type:"choice",exprs:l}}function $s(v){let l=[];do{l.push(Ca(v))}while(v.next&&")"!=v.next&&"|"!=v.next);return 1==l.length?l[0]:{type:"seq",exprs:l}}function Ca(v){let l=function uo(v){if(v.eat("(")){let l=Rl(v);return v.eat(")")||v.err("Missing closing paren"),l}if(!/\W/.test(v.next)){let l=function Jl(v,l){let i=v.nodeTypes,d=i[l];if(d)return[d];let f=[];for(let O in i){let H=i[O];H.groups.indexOf(l)>-1&&f.push(H)}return 0==f.length&&v.err("No node type or group '"+l+"' found"),f}(v,v.next).map(i=>(null==v.inline?v.inline=i.isInline:v.inline!=i.isInline&&v.err("Mixing inline and block content"),{type:"name",value:i}));return v.pos++,1==l.length?l[0]:{type:"choice",exprs:l}}v.err("Unexpected token '"+v.next+"'")}(v);for(;;)if(v.eat("+"))l={type:"plus",expr:l};else if(v.eat("*"))l={type:"star",expr:l};else if(v.eat("?"))l={type:"opt",expr:l};else{if(!v.eat("{"))break;l=Ja(v,l)}return l}function Io(v){/\D/.test(v.next)&&v.err("Expected number, got '"+v.next+"'");let l=Number(v.next);return v.pos++,l}function Ja(v,l){let i=Io(v),d=i;return v.eat(",")&&(d="}"!=v.next?Io(v):-1),v.eat("}")||v.err("Unclosed braced range"),{type:"range",min:i,max:d,expr:l}}function ho(v,l){return l-v}function Bc(v,l){let i=[];return function d(f){let O=v[f];if(1==O.length&&!O[0].term)return d(O[0].to);i.push(f);for(let H=0;H<O.length;H++){let{term:ne,to:Te}=O[H];!ne&&-1==i.indexOf(Te)&&d(Te)}}(l),i.sort(ho)}function Ta(v){let l=Object.create(null);for(let i in v){let d=v[i];if(!d.hasDefault)return null;l[i]=d.default}return l}function gl(v,l){let i=Object.create(null);for(let d in v){let f=l&&l[d];if(void 0===f){let O=v[d];if(!O.hasDefault)throw new RangeError("No value supplied for attribute "+d);f=O.default}i[d]=f}return i}function Is(v){let l=Object.create(null);if(v)for(let i in v)l[i]=new el(v[i]);return l}class _l{constructor(l,i,d){this.name=l,this.schema=i,this.spec=d,this.markSet=null,this.groups=d.group?d.group.split(" "):[],this.attrs=Is(d.attrs),this.defaultAttrs=Ta(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(d.inline||"text"==l),this.isText="text"==l}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Do.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let l in this.attrs)if(this.attrs[l].isRequired)return!0;return!1}compatibleContent(l){return this==l||this.contentMatch.compatible(l.contentMatch)}computeAttrs(l){return!l&&this.defaultAttrs?this.defaultAttrs:gl(this.attrs,l)}create(l=null,i,d){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Os(this,this.computeAttrs(l),dn.from(i),Or.setFrom(d))}createChecked(l=null,i,d){return i=dn.from(i),this.checkContent(i),new Os(this,this.computeAttrs(l),i,Or.setFrom(d))}createAndFill(l=null,i,d){if(l=this.computeAttrs(l),(i=dn.from(i)).size){let H=this.contentMatch.fillBefore(i);if(!H)return null;i=H.append(i)}let f=this.contentMatch.matchFragment(i),O=f&&f.fillBefore(dn.empty,!0);return O?new Os(this,l,i.append(O),Or.setFrom(d)):null}validContent(l){let i=this.contentMatch.matchFragment(l);if(!i||!i.validEnd)return!1;for(let d=0;d<l.childCount;d++)if(!this.allowsMarks(l.child(d).marks))return!1;return!0}checkContent(l){if(!this.validContent(l))throw new RangeError(`Invalid content for node ${this.name}: ${l.toString().slice(0,50)}`)}allowsMarkType(l){return null==this.markSet||this.markSet.indexOf(l)>-1}allowsMarks(l){if(null==this.markSet)return!0;for(let i=0;i<l.length;i++)if(!this.allowsMarkType(l[i].type))return!1;return!0}allowedMarks(l){if(null==this.markSet)return l;let i;for(let d=0;d<l.length;d++)this.allowsMarkType(l[d].type)?i&&i.push(l[d]):i||(i=l.slice(0,d));return i?i.length?i:Or.none:l}static compile(l,i){let d=Object.create(null);l.forEach((O,H)=>d[O]=new _l(O,i,H));let f=i.spec.topNode||"doc";if(!d[f])throw new RangeError("Schema is missing its top node type ('"+f+"')");if(!d.text)throw new RangeError("Every schema needs a 'text' type");for(let O in d.text.attrs)throw new RangeError("The text node type should not have attributes");return d}}class el{constructor(l){this.hasDefault=Object.prototype.hasOwnProperty.call(l,"default"),this.default=l.default}get isRequired(){return!this.hasDefault}}class to{constructor(l,i,d,f){this.name=l,this.rank=i,this.schema=d,this.spec=f,this.attrs=Is(f.attrs),this.excluded=null;let O=Ta(this.attrs);this.instance=O?new Or(this,O):null}create(l=null){return!l&&this.instance?this.instance:new Or(this,gl(this.attrs,l))}static compile(l,i){let d=Object.create(null),f=0;return l.forEach((O,H)=>d[O]=new to(O,f++,i,H)),d}removeFromSet(l){for(var i=0;i<l.length;i++)l[i].type==this&&(l=l.slice(0,i).concat(l.slice(i+1)),i--);return l}isInSet(l){for(let i=0;i<l.length;i++)if(l[i].type==this)return l[i]}excludes(l){return this.excluded.indexOf(l)>-1}}function Ra(v,l){let i=[];for(let d=0;d<l.length;d++){let f=l[d],O=v.marks[f],H=O;if(O)i.push(O);else for(let ne in v.marks){let Te=v.marks[ne];("_"==f||Te.spec.group&&Te.spec.group.split(" ").indexOf(f)>-1)&&i.push(H=Te)}if(!H)throw new SyntaxError("Unknown mark type: '"+l[d]+"'")}return i}const Bl=Math.pow(2,16);function jo(v,l){return v+l*Bl}function Dr(v){return 65535&v}class Ba{constructor(l,i,d){this.pos=l,this.delInfo=i,this.recover=d}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class xs{constructor(l,i=!1){if(this.ranges=l,this.inverted=i,!l.length&&xs.empty)return xs.empty}recover(l){let i=0,d=Dr(l);if(!this.inverted)for(let f=0;f<d;f++)i+=this.ranges[3*f+2]-this.ranges[3*f+1];return this.ranges[3*d]+i+function bl(v){return(v-(65535&v))/Bl}(l)}mapResult(l,i=1){return this._map(l,i,!1)}map(l,i=1){return this._map(l,i,!0)}_map(l,i,d){let f=0,O=this.inverted?2:1,H=this.inverted?1:2;for(let ne=0;ne<this.ranges.length;ne+=3){let Te=this.ranges[ne]-(this.inverted?f:0);if(Te>l)break;let Qe=this.ranges[ne+O],_t=this.ranges[ne+H],Xt=Te+Qe;if(l<=Xt){let Fi=Te+f+((Qe?l==Te?-1:l==Xt?1:i:i)<0?0:_t);if(d)return Fi;let fn=l==(i<0?Te:Xt)?null:jo(ne/3,l-Te),nn=l==Te?2:l==Xt?1:4;return(i<0?l!=Te:l!=Xt)&&(nn|=8),new Ba(Fi,nn,fn)}f+=_t-Qe}return d?l+f:new Ba(l+f,0,null)}touches(l,i){let d=0,f=Dr(i),O=this.inverted?2:1,H=this.inverted?1:2;for(let ne=0;ne<this.ranges.length;ne+=3){let Te=this.ranges[ne]-(this.inverted?d:0);if(Te>l)break;let Qe=this.ranges[ne+O];if(l<=Te+Qe&&ne==3*f)return!0;d+=this.ranges[ne+H]-Qe}return!1}forEach(l){let i=this.inverted?2:1,d=this.inverted?1:2;for(let f=0,O=0;f<this.ranges.length;f+=3){let H=this.ranges[f],ne=H-(this.inverted?O:0),Te=H+(this.inverted?0:O),Qe=this.ranges[f+i],_t=this.ranges[f+d];l(ne,ne+Qe,Te,Te+_t),O+=_t-Qe}}invert(){return new xs(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(l){return 0==l?xs.empty:new xs(l<0?[0,-l,0]:[0,0,l])}}xs.empty=new xs([]);const nl=Object.create(null);class gs{getMap(){return xs.empty}merge(l){return null}static fromJSON(l,i){if(!i||!i.stepType)throw new RangeError("Invalid input for Step.fromJSON");let d=nl[i.stepType];if(!d)throw new RangeError(`No step type ${i.stepType} defined`);return d.fromJSON(l,i)}static jsonID(l,i){if(l in nl)throw new RangeError("Duplicate use of step JSON ID "+l);return nl[l]=i,i.prototype.jsonID=l,i}}class ts{constructor(l,i){this.doc=l,this.failed=i}static ok(l){return new ts(l,null)}static fail(l){return new ts(null,l)}static fromReplace(l,i,d,f){try{return ts.ok(l.replace(i,d,f))}catch(O){if(O instanceof oa)return ts.fail(O.message);throw O}}}function wl(v,l,i){let d=[];for(let f=0;f<v.childCount;f++){let O=v.child(f);O.content.size&&(O=O.copy(wl(O.content,l,O))),O.isInline&&(O=l(O,i,f)),d.push(O)}return dn.fromArray(d)}class bo extends gs{constructor(l,i,d){super(),this.from=l,this.to=i,this.mark=d}apply(l){let i=l.slice(this.from,this.to),d=l.resolve(this.from),f=d.node(d.sharedDepth(this.to)),O=new Fn(wl(i.content,(H,ne)=>H.isAtom&&ne.type.allowsMarkType(this.mark.type)?H.mark(this.mark.addToSet(H.marks)):H,f),i.openStart,i.openEnd);return ts.fromReplace(l,this.from,this.to,O)}invert(){return new wo(this.from,this.to,this.mark)}map(l){let i=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return i.deleted&&d.deleted||i.pos>=d.pos?null:new bo(i.pos,d.pos,this.mark)}merge(l){return l instanceof bo&&l.mark.eq(this.mark)&&this.from<=l.to&&this.to>=l.from?new bo(Math.min(this.from,l.from),Math.max(this.to,l.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(l,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new bo(i.from,i.to,l.markFromJSON(i.mark))}}gs.jsonID("addMark",bo);class wo extends gs{constructor(l,i,d){super(),this.from=l,this.to=i,this.mark=d}apply(l){let i=l.slice(this.from,this.to),d=new Fn(wl(i.content,f=>f.mark(this.mark.removeFromSet(f.marks)),l),i.openStart,i.openEnd);return ts.fromReplace(l,this.from,this.to,d)}invert(){return new bo(this.from,this.to,this.mark)}map(l){let i=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return i.deleted&&d.deleted||i.pos>=d.pos?null:new wo(i.pos,d.pos,this.mark)}merge(l){return l instanceof wo&&l.mark.eq(this.mark)&&this.from<=l.to&&this.to>=l.from?new wo(Math.min(this.from,l.from),Math.max(this.to,l.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(l,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new wo(i.from,i.to,l.markFromJSON(i.mark))}}gs.jsonID("removeMark",wo);class Xs extends gs{constructor(l,i){super(),this.pos=l,this.mark=i}apply(l){let i=l.nodeAt(this.pos);if(!i)return ts.fail("No node at mark step's position");let d=i.type.create(i.attrs,null,this.mark.addToSet(i.marks));return ts.fromReplace(l,this.pos,this.pos+1,new Fn(dn.from(d),0,i.isLeaf?0:1))}invert(l){let i=l.nodeAt(this.pos);if(i){let d=this.mark.addToSet(i.marks);if(d.length==i.marks.length){for(let f=0;f<i.marks.length;f++)if(!i.marks[f].isInSet(d))return new Xs(this.pos,i.marks[f]);return new Xs(this.pos,this.mark)}}return new jr(this.pos,this.mark)}map(l){let i=l.mapResult(this.pos,1);return i.deletedAfter?null:new Xs(i.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(l,i){if("number"!=typeof i.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xs(i.pos,l.markFromJSON(i.mark))}}gs.jsonID("addNodeMark",Xs);class jr extends gs{constructor(l,i){super(),this.pos=l,this.mark=i}apply(l){let i=l.nodeAt(this.pos);if(!i)return ts.fail("No node at mark step's position");let d=i.type.create(i.attrs,null,this.mark.removeFromSet(i.marks));return ts.fromReplace(l,this.pos,this.pos+1,new Fn(dn.from(d),0,i.isLeaf?0:1))}invert(l){let i=l.nodeAt(this.pos);return i&&this.mark.isInSet(i.marks)?new Xs(this.pos,this.mark):this}map(l){let i=l.mapResult(this.pos,1);return i.deletedAfter?null:new jr(i.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(l,i){if("number"!=typeof i.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new jr(i.pos,l.markFromJSON(i.mark))}}gs.jsonID("removeNodeMark",jr);class en extends gs{constructor(l,i,d,f=!1){super(),this.from=l,this.to=i,this.slice=d,this.structure=f}apply(l){return this.structure&&S(l,this.from,this.to)?ts.fail("Structure replace would overwrite content"):ts.fromReplace(l,this.from,this.to,this.slice)}getMap(){return new xs([this.from,this.to-this.from,this.slice.size])}invert(l){return new en(this.from,this.from+this.slice.size,l.slice(this.from,this.to))}map(l){let i=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return i.deletedAcross&&d.deletedAcross?null:new en(i.pos,Math.max(i.pos,d.pos),this.slice)}merge(l){if(!(l instanceof en)||l.structure||this.structure)return null;if(this.from+this.slice.size!=l.from||this.slice.openEnd||l.slice.openStart){if(l.to!=this.from||this.slice.openStart||l.slice.openEnd)return null;{let i=this.slice.size+l.slice.size==0?Fn.empty:new Fn(l.slice.content.append(this.slice.content),l.slice.openStart,this.slice.openEnd);return new en(l.from,this.to,i,this.structure)}}{let i=this.slice.size+l.slice.size==0?Fn.empty:new Fn(this.slice.content.append(l.slice.content),this.slice.openStart,l.slice.openEnd);return new en(this.from,this.to+(l.to-l.from),i,this.structure)}}toJSON(){let l={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(l.slice=this.slice.toJSON()),this.structure&&(l.structure=!0),l}static fromJSON(l,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new en(i.from,i.to,Fn.fromJSON(l,i.slice),!!i.structure)}}gs.jsonID("replace",en);class h extends gs{constructor(l,i,d,f,O,H,ne=!1){super(),this.from=l,this.to=i,this.gapFrom=d,this.gapTo=f,this.slice=O,this.insert=H,this.structure=ne}apply(l){if(this.structure&&(S(l,this.from,this.gapFrom)||S(l,this.gapTo,this.to)))return ts.fail("Structure gap-replace would overwrite content");let i=l.slice(this.gapFrom,this.gapTo);if(i.openStart||i.openEnd)return ts.fail("Gap is not a flat range");let d=this.slice.insertAt(this.insert,i.content);return d?ts.fromReplace(l,this.from,this.to,d):ts.fail("Content does not fit in gap")}getMap(){return new xs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(l){let i=this.gapTo-this.gapFrom;return new h(this.from,this.from+this.slice.size+i,this.from+this.insert,this.from+this.insert+i,l.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(l){let i=l.mapResult(this.from,1),d=l.mapResult(this.to,-1),f=l.map(this.gapFrom,-1),O=l.map(this.gapTo,1);return i.deletedAcross&&d.deletedAcross||f<i.pos||O>d.pos?null:new h(i.pos,d.pos,f,O,this.slice,this.insert,this.structure)}toJSON(){let l={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(l.slice=this.slice.toJSON()),this.structure&&(l.structure=!0),l}static fromJSON(l,i){if("number"!=typeof i.from||"number"!=typeof i.to||"number"!=typeof i.gapFrom||"number"!=typeof i.gapTo||"number"!=typeof i.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new h(i.from,i.to,i.gapFrom,i.gapTo,Fn.fromJSON(l,i.slice),i.insert,!!i.structure)}}function S(v,l,i){let d=v.resolve(l),f=i-l,O=d.depth;for(;f>0&&O>0&&d.indexAfter(O)==d.node(O).childCount;)O--,f--;if(f>0){let H=d.node(O).maybeChild(d.indexAfter(O));for(;f>0;){if(!H||H.isLeaf)return!0;H=H.firstChild,f--}}return!1}function Ne(v,l,i){return(0==l||v.canReplace(l,v.childCount))&&(i==v.childCount||v.canReplace(0,i))}function Pt(v){let i=v.parent.content.cutByIndex(v.startIndex,v.endIndex);for(let d=v.depth;;--d){let f=v.$from.node(d),O=v.$from.index(d),H=v.$to.indexAfter(d);if(d<v.depth&&f.canReplace(O,H,i))return d;if(0==d||f.type.spec.isolating||!Ne(f,O,H))break}return null}function _i(v,l,i=null,d=v){let f=function kn(v,l){let{parent:i,startIndex:d,endIndex:f}=v,O=i.contentMatchAt(d).findWrapping(l);return O&&i.canReplaceWith(d,f,O.length?O[0]:l)?O:null}(v,l),O=f&&function Ln(v,l){let{parent:i,startIndex:d,endIndex:f}=v,O=i.child(d),H=l.contentMatch.findWrapping(O.type);if(!H)return null;let Te=(H.length?H[H.length-1]:l).contentMatch;for(let Qe=d;Te&&Qe<f;Qe++)Te=Te.matchType(i.child(Qe).type);return Te&&Te.validEnd?H:null}(d,l);return O?f.map(Zi).concat({type:l,attrs:i}).concat(O.map(Zi)):null}function Zi(v){return{type:v,attrs:null}}function bs(v,l,i=1,d){let f=v.resolve(l),O=f.depth-i,H=d&&d[d.length-1]||f.parent;if(O<0||f.parent.type.spec.isolating||!f.parent.canReplace(f.index(),f.parent.childCount)||!H.type.validContent(f.parent.content.cutByIndex(f.index(),f.parent.childCount)))return!1;for(let Qe=f.depth-1,_t=i-2;Qe>O;Qe--,_t--){let Xt=f.node(Qe),Ti=f.index(Qe);if(Xt.type.spec.isolating)return!1;let Fi=Xt.content.cutByIndex(Ti,Xt.childCount),fn=d&&d[_t+1];fn&&(Fi=Fi.replaceChild(0,fn.type.create(fn.attrs)));let nn=d&&d[_t]||Xt;if(!Xt.canReplace(Ti+1,Xt.childCount)||!nn.type.validContent(Fi))return!1}let ne=f.indexAfter(O),Te=d&&d[0];return f.node(O).canReplaceWith(ne,ne,Te?Te.type:f.node(O+1).type)}function ha(v,l){let i=v.resolve(l),d=i.index();return function qs(v,l){return!(!v||!l||v.isLeaf||!v.canAppend(l))}(i.nodeBefore,i.nodeAfter)&&i.parent.canReplace(d,d+1)}function xe(v,l,i=l,d=Fn.empty){if(l==i&&!d.size)return null;let f=v.resolve(l),O=v.resolve(i);return function q(v,l,i){return!i.openStart&&!i.openEnd&&v.start()==l.start()&&v.parent.canReplace(v.index(),l.index(),i.content)}(f,O,d)?new en(l,i,d):new re(f,O,d).fit()}gs.jsonID("replaceAround",h);class re{constructor(l,i,d){this.$from=l,this.$to=i,this.unplaced=d,this.frontier=[],this.placed=dn.empty;for(let f=0;f<=l.depth;f++){let O=l.node(f);this.frontier.push({type:O.type,match:O.contentMatchAt(l.indexAfter(f))})}for(let f=l.depth;f>0;f--)this.placed=dn.from(l.node(f).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let Qe=this.findFittable();Qe?this.placeNodes(Qe):this.openMore()||this.dropNode()}let l=this.mustMoveInline(),i=this.placed.size-this.depth-this.$from.depth,d=this.$from,f=this.close(l<0?this.$to:d.doc.resolve(l));if(!f)return null;let O=this.placed,H=d.depth,ne=f.depth;for(;H&&ne&&1==O.childCount;)O=O.firstChild.content,H--,ne--;let Te=new Fn(O,H,ne);return l>-1?new h(d.pos,l,this.$to.pos,this.$to.end(),Te,i):Te.size||d.pos!=this.$to.pos?new en(d.pos,f.pos,Te):null}findFittable(){let l=this.unplaced.openStart;for(let i=this.unplaced.content,d=0,f=this.unplaced.openEnd;d<l;d++){let O=i.firstChild;if(i.childCount>1&&(f=0),O.type.spec.isolating&&f<=d){l=d;break}i=O.content}for(let i=1;i<=2;i++)for(let d=1==i?l:this.unplaced.openStart;d>=0;d--){let f,O=null;d?(O=Ei(this.unplaced.content,d-1).firstChild,f=O.content):f=this.unplaced.content;let H=f.firstChild;for(let ne=this.depth;ne>=0;ne--){let _t,{type:Te,match:Qe}=this.frontier[ne],Xt=null;if(1==i&&(H?Qe.matchType(H.type)||(Xt=Qe.fillBefore(dn.from(H),!1)):O&&Te.compatibleContent(O.type)))return{sliceDepth:d,frontierDepth:ne,parent:O,inject:Xt};if(2==i&&H&&(_t=Qe.findWrapping(H.type)))return{sliceDepth:d,frontierDepth:ne,parent:O,wrap:_t};if(O&&Qe.matchType(O.type))break}}}openMore(){let{content:l,openStart:i,openEnd:d}=this.unplaced,f=Ei(l,i);return!(!f.childCount||f.firstChild.isLeaf||(this.unplaced=new Fn(l,i+1,Math.max(d,f.size+i>=l.size-d?i+1:0)),0))}dropNode(){let{content:l,openStart:i,openEnd:d}=this.unplaced,f=Ei(l,i);if(f.childCount<=1&&i>0){let O=l.size-i<=i+f.size;this.unplaced=new Fn(Ce(l,i-1,1),i-1,O?i-1:d)}else this.unplaced=new Fn(Ce(l,i,1),i,d)}placeNodes({sliceDepth:l,frontierDepth:i,parent:d,inject:f,wrap:O}){for(;this.depth>i;)this.closeFrontierNode();if(O)for(let nn=0;nn<O.length;nn++)this.openFrontierNode(O[nn]);let H=this.unplaced,ne=d?d.content:H.content,Te=H.openStart-l,Qe=0,_t=[],{match:Xt,type:Ti}=this.frontier[i];if(f){for(let nn=0;nn<f.childCount;nn++)_t.push(f.child(nn));Xt=Xt.matchFragment(f)}let Fi=ne.size+l-(H.content.size-H.openEnd);for(;Qe<ne.childCount;){let nn=ne.child(Qe),rr=Xt.matchType(nn.type);if(!rr)break;Qe++,(Qe>1||0==Te||nn.content.size)&&(Xt=rr,_t.push(bn(nn.mark(Ti.allowedMarks(nn.marks)),1==Qe?Te:0,Qe==ne.childCount?Fi:-1)))}let fn=Qe==ne.childCount;fn||(Fi=-1),this.placed=Dt(this.placed,i,dn.from(_t)),this.frontier[i].match=Xt,fn&&Fi<0&&d&&d.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let nn=0,rr=ne;nn<Fi;nn++){let $r=rr.lastChild;this.frontier.push({type:$r.type,match:$r.contentMatchAt($r.childCount)}),rr=$r.content}this.unplaced=fn?0==l?Fn.empty:new Fn(Ce(H.content,l-1,1),l-1,Fi<0?H.openEnd:l-1):new Fn(Ce(H.content,l,Qe),H.openStart,H.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let i,l=this.frontier[this.depth];if(!l.type.isTextblock||!mr(this.$to,this.$to.depth,l.type,l.match,!1)||this.$to.depth==this.depth&&(i=this.findCloseLevel(this.$to))&&i.depth==this.depth)return-1;let{depth:d}=this.$to,f=this.$to.after(d);for(;d>1&&f==this.$to.end(--d);)++f;return f}findCloseLevel(l){e:for(let i=Math.min(this.depth,l.depth);i>=0;i--){let{match:d,type:f}=this.frontier[i],O=i<l.depth&&l.end(i+1)==l.pos+(l.depth-(i+1)),H=mr(l,i,f,d,O);if(H){for(let ne=i-1;ne>=0;ne--){let{match:Te,type:Qe}=this.frontier[ne],_t=mr(l,ne,Qe,Te,!0);if(!_t||_t.childCount)continue e}return{depth:i,fit:H,move:O?l.doc.resolve(l.after(i+1)):l}}}}close(l){let i=this.findCloseLevel(l);if(!i)return null;for(;this.depth>i.depth;)this.closeFrontierNode();i.fit.childCount&&(this.placed=Dt(this.placed,i.depth,i.fit)),l=i.move;for(let d=i.depth+1;d<=l.depth;d++){let f=l.node(d),O=f.type.contentMatch.fillBefore(f.content,!0,l.index(d));this.openFrontierNode(f.type,f.attrs,O)}return l}openFrontierNode(l,i=null,d){let f=this.frontier[this.depth];f.match=f.match.matchType(l),this.placed=Dt(this.placed,this.depth,dn.from(l.create(i,d))),this.frontier.push({type:l,match:l.contentMatch})}closeFrontierNode(){let i=this.frontier.pop().match.fillBefore(dn.empty,!0);i.childCount&&(this.placed=Dt(this.placed,this.frontier.length,i))}}function Ce(v,l,i){return 0==l?v.cutByIndex(i,v.childCount):v.replaceChild(0,v.firstChild.copy(Ce(v.firstChild.content,l-1,i)))}function Dt(v,l,i){return 0==l?v.append(i):v.replaceChild(v.childCount-1,v.lastChild.copy(Dt(v.lastChild.content,l-1,i)))}function Ei(v,l){for(let i=0;i<l;i++)v=v.firstChild.content;return v}function bn(v,l,i){if(l<=0)return v;let d=v.content;return l>1&&(d=d.replaceChild(0,bn(d.firstChild,l-1,1==d.childCount?i-1:0))),l>0&&(d=v.type.contentMatch.fillBefore(d).append(d),i<=0&&(d=d.append(v.type.contentMatch.matchFragment(d).fillBefore(dn.empty,!0)))),v.copy(d)}function mr(v,l,i,d,f){let O=v.node(l),H=f?v.indexAfter(l):v.index(l);if(H==O.childCount&&!i.compatibleContent(O.type))return null;let ne=d.fillBefore(O.content,!0,H);return ne&&!function Er(v,l,i){for(let d=i;d<l.childCount;d++)if(!v.allowsMarks(l.child(d).marks))return!0;return!1}(i,O.content,H)?ne:null}class Co extends gs{constructor(l,i,d){super(),this.pos=l,this.attr=i,this.value=d}apply(l){let i=l.nodeAt(this.pos);if(!i)return ts.fail("No node at attribute step's position");let d=Object.create(null);for(let O in i.attrs)d[O]=i.attrs[O];d[this.attr]=this.value;let f=i.type.create(d,null,i.marks);return ts.fromReplace(l,this.pos,this.pos+1,new Fn(dn.from(f),0,i.isLeaf?0:1))}getMap(){return xs.empty}invert(l){return new Co(this.pos,this.attr,l.nodeAt(this.pos).attrs[this.attr])}map(l){let i=l.mapResult(this.pos,1);return i.deletedAfter?null:new Co(i.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(l,i){if("number"!=typeof i.pos||"string"!=typeof i.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Co(i.pos,i.attr,i.value)}}gs.jsonID("attr",Co);class lu extends gs{constructor(l,i){super(),this.attr=l,this.value=i}apply(l){let i=Object.create(null);for(let f in l.attrs)i[f]=l.attrs[f];i[this.attr]=this.value;let d=l.type.create(i,l.content,l.marks);return ts.ok(d)}getMap(){return xs.empty}invert(l){return new lu(this.attr,l.attrs[this.attr])}map(l){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(l,i){if("string"!=typeof i.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new lu(i.attr,i.value)}}gs.jsonID("docAttr",lu);let Po=class extends Error{};Po=function v(l){let i=Error.call(this,l);return i.__proto__=v.prototype,i},(Po.prototype=Object.create(Error.prototype)).constructor=Po,Po.prototype.name="TransformError";const $o=Object.create(null);class is{constructor(l,i,d){this.$anchor=l,this.$head=i,this.ranges=d||[new Wo(l.min(i),l.max(i))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let l=this.ranges;for(let i=0;i<l.length;i++)if(l[i].$from.pos!=l[i].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(l,i=Fn.empty){let d=i.content.lastChild,f=null;for(let ne=0;ne<i.openEnd;ne++)f=d,d=d.lastChild;let O=l.steps.length,H=this.ranges;for(let ne=0;ne<H.length;ne++){let{$from:Te,$to:Qe}=H[ne],_t=l.mapping.slice(O);l.replaceRange(_t.map(Te.pos),_t.map(Qe.pos),ne?Fn.empty:i),0==ne&&yu(l,O,(d?d.isInline:f&&f.isTextblock)?-1:1)}}replaceWith(l,i){let d=l.steps.length,f=this.ranges;for(let O=0;O<f.length;O++){let{$from:H,$to:ne}=f[O],Te=l.mapping.slice(d),Qe=Te.map(H.pos),_t=Te.map(ne.pos);O?l.deleteRange(Qe,_t):(l.replaceRangeWith(Qe,_t,i),yu(l,d,i.isInline?-1:1))}}static findFrom(l,i,d=!1){let f=l.parent.inlineContent?new Oo(l):Yc(l.node(0),l.parent,l.pos,l.index(),i,d);if(f)return f;for(let O=l.depth-1;O>=0;O--){let H=i<0?Yc(l.node(0),l.node(O),l.before(O+1),l.index(O),i,d):Yc(l.node(0),l.node(O),l.after(O+1),l.index(O)+1,i,d);if(H)return H}return null}static near(l,i=1){return this.findFrom(l,i)||this.findFrom(l,-i)||new Xo(l.node(0))}static atStart(l){return Yc(l,l,0,0,1)||new Xo(l)}static atEnd(l){return Yc(l,l,l.content.size,l.childCount,-1)||new Xo(l)}static fromJSON(l,i){if(!i||!i.type)throw new RangeError("Invalid input for Selection.fromJSON");let d=$o[i.type];if(!d)throw new RangeError(`No selection type ${i.type} defined`);return d.fromJSON(l,i)}static jsonID(l,i){if(l in $o)throw new RangeError("Duplicate use of selection JSON ID "+l);return $o[l]=i,i.prototype.jsonID=l,i}getBookmark(){return Oo.between(this.$anchor,this.$head).getBookmark()}}is.prototype.visible=!0;class Wo{constructor(l,i){this.$from=l,this.$to=i}}let vn=!1;function Ju(v){!vn&&!v.parent.inlineContent&&(vn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+v.parent.type.name+")"))}class Oo extends is{constructor(l,i=l){Ju(l),Ju(i),super(l,i)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(l,i){let d=l.resolve(i.map(this.head));if(!d.parent.inlineContent)return is.near(d);let f=l.resolve(i.map(this.anchor));return new Oo(f.parent.inlineContent?f:d,d)}replace(l,i=Fn.empty){if(super.replace(l,i),i==Fn.empty){let d=this.$from.marksAcross(this.$to);d&&l.ensureMarks(d)}}eq(l){return l instanceof Oo&&l.anchor==this.anchor&&l.head==this.head}getBookmark(){return new kl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(l,i){if("number"!=typeof i.anchor||"number"!=typeof i.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Oo(l.resolve(i.anchor),l.resolve(i.head))}static create(l,i,d=i){let f=l.resolve(i);return new this(f,d==i?f:l.resolve(d))}static between(l,i,d){let f=l.pos-i.pos;if((!d||f)&&(d=f>=0?1:-1),!i.parent.inlineContent){let O=is.findFrom(i,d,!0)||is.findFrom(i,-d,!0);if(!O)return is.near(i,d);i=O.$head}return l.parent.inlineContent||(0==f||(l=(is.findFrom(l,-d,!0)||is.findFrom(l,d,!0)).$anchor).pos<i.pos!=f<0)&&(l=i),new Oo(l,i)}}is.jsonID("text",Oo);class kl{constructor(l,i){this.anchor=l,this.head=i}map(l){return new kl(l.map(this.anchor),l.map(this.head))}resolve(l){return Oo.between(l.resolve(this.anchor),l.resolve(this.head))}}class rs extends is{constructor(l){let i=l.nodeAfter,d=l.node(0).resolve(l.pos+i.nodeSize);super(l,d),this.node=i}map(l,i){let{deleted:d,pos:f}=i.mapResult(this.anchor),O=l.resolve(f);return d?is.near(O):new rs(O)}content(){return new Fn(dn.from(this.node),0,0)}eq(l){return l instanceof rs&&l.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new an(this.anchor)}static fromJSON(l,i){if("number"!=typeof i.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new rs(l.resolve(i.anchor))}static create(l,i){return new rs(l.resolve(i))}static isSelectable(l){return!l.isText&&!1!==l.type.spec.selectable}}rs.prototype.visible=!1,is.jsonID("node",rs);class an{constructor(l){this.anchor=l}map(l){let{deleted:i,pos:d}=l.mapResult(this.anchor);return i?new kl(d,d):new an(d)}resolve(l){let i=l.resolve(this.anchor),d=i.nodeAfter;return d&&rs.isSelectable(d)?new rs(i):is.near(i)}}class Xo extends is{constructor(l){super(l.resolve(0),l.resolve(l.content.size))}replace(l,i=Fn.empty){if(i==Fn.empty){l.delete(0,l.doc.content.size);let d=is.atStart(l.doc);d.eq(l.selection)||l.setSelection(d)}else super.replace(l,i)}toJSON(){return{type:"all"}}static fromJSON(l){return new Xo(l)}map(l){return new Xo(l)}eq(l){return l instanceof Xo}getBookmark(){return hp}}is.jsonID("all",Xo);const hp={map(){return this},resolve:v=>new Xo(v)};function Yc(v,l,i,d,f,O=!1){if(l.inlineContent)return Oo.create(v,i);for(let H=d-(f>0?0:1);f>0?H<l.childCount:H>=0;H+=f){let ne=l.child(H);if(ne.isAtom){if(!O&&rs.isSelectable(ne))return rs.create(v,i-(f<0?ne.nodeSize:0))}else{let Te=Yc(v,ne,i+f,f<0?ne.childCount:0,f,O);if(Te)return Te}i+=ne.nodeSize*f}return null}function yu(v,l,i){let d=v.steps.length-1;if(d<l)return;let H,f=v.steps[d];(f instanceof en||f instanceof h)&&(v.mapping.maps[d].forEach((ne,Te,Qe,_t)=>{null==H&&(H=_t)}),v.setSelection(is.near(v.doc.resolve(H),i)))}function cu(v,l){return l&&v?v.bind(l):v}class Vc{constructor(l,i,d){this.name=l,this.init=cu(i.init,d),this.apply=cu(i.apply,d)}}new Vc("doc",{init:v=>v.doc||v.schema.topNodeType.createAndFill(),apply:v=>v.doc}),new Vc("selection",{init:(v,l)=>v.selection||is.atStart(l.doc),apply:v=>v.selection}),new Vc("storedMarks",{init:v=>v.storedMarks||null,apply:(v,l,i,d)=>d.selection.$cursor?v.storedMarks:null}),new Vc("scrollToSelection",{init:()=>0,apply:(v,l)=>v.scrolledIntoView?l+1:l});const $=["ol",0],Z=["ul",0],Q=["li",0],le={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:v=>({order:v.hasAttribute("start")?+v.getAttribute("start"):1})}],toDOM:v=>1==v.attrs.order?$:["ol",{start:v.attrs.order},0]};const $t=v=>{const l=(v=>{const l={};return Object.keys(v).forEach(i=>{v[i]&&(l[i]=v[i])}),l})(v);return Object.entries(l).map(([i,d])=>`${(v=>v.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`))(i)}:${d}`).join(";")};Error;const Wi={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:v=>({href:v.getAttribute("href"),title:v.getAttribute("title"),target:v.getAttribute("target")})}],toDOM(v){const{href:l,title:i,target:d}=v.attrs;return["a",{href:l,title:i,target:d},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:v=>"normal"!==v.style.fontWeight&&null},{style:"font-weight",getAttrs:v=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(v)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:v=>({color:v})}],toDOM(v){const{color:l}=v.attrs;return["span",{style:`color:${l};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:v=>({backgroundColor:v})}],toDOM(v){const{backgroundColor:l}=v.attrs;return["span",{style:`background-color:${l};`},0]}}},Pn={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(v){const{textAlign:l}=v.style;return{align:v.getAttribute("align")||l||null}}}],toDOM(v){const{align:l}=v.attrs;return["p",{style:$t({textAlign:"left"!==l?l:null})||null},0]}},jn={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(v){const{textAlign:l}=v.style;return{level:1,align:v.getAttribute("align")||l||null}}},{tag:"h2",getAttrs(v){const{textAlign:l}=v.style;return{level:2,align:v.getAttribute("align")||l||null}}},{tag:"h3",getAttrs(v){const{textAlign:l}=v.style;return{level:3,align:v.getAttribute("align")||l||null}}},{tag:"h4",getAttrs(v){const{textAlign:l}=v.style;return{level:4,align:v.getAttribute("align")||l||null}}},{tag:"h5",getAttrs(v){const{textAlign:l}=v.style;return{level:5,align:v.getAttribute("align")||l||null}}},{tag:"h6",getAttrs(v){const{textAlign:l}=v.style;return{level:6,align:v.getAttribute("align")||l||null}}}],toDOM(v){const{level:l,align:i}=v.attrs;return[`h${l}`,{style:$t({textAlign:"left"!==i?i:null})||null},0]}},On={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:v=>({src:v.getAttribute("src"),title:v.getAttribute("title"),alt:v.getAttribute("alt"),width:v.getAttribute("width")})}],toDOM(v){const{src:l,alt:i,title:d,width:f}=v.attrs;return["img",{src:l,alt:i,title:d,width:f}]}},ls={doc:{content:"block+"},text:{group:"inline"},paragraph:Pn,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:jn,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:On,list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>Q,defining:!0},content:"paragraph block*"},ordered_list:{...le,content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>Z},content:"list_item+",group:"block"}},Ks=(new class Oa{constructor(l){this.cached=Object.create(null);let i=this.spec={};for(let f in l)i[f]=l[f];i.nodes=Ts.from(l.nodes),i.marks=Ts.from(l.marks||{}),this.nodes=_l.compile(this.spec.nodes,this),this.marks=to.compile(this.spec.marks,this);let d=Object.create(null);for(let f in this.nodes){if(f in this.marks)throw new RangeError(f+" can not be both a node and a mark");let O=this.nodes[f],H=O.spec.content||"",ne=O.spec.marks;O.contentMatch=d[H]||(d[H]=Do.parse(H,this.nodes)),O.inlineContent=O.contentMatch.inlineContent,O.markSet="_"==ne?null:ne?Ra(this,ne.split(" ")):""!=ne&&O.inlineContent?null:[]}for(let f in this.marks){let O=this.marks[f],H=O.spec.excludes;O.excluded=null==H?[O]:""==H?[]:Ra(this,H.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(l,i=null,d,f){if("string"==typeof l)l=this.nodeType(l);else{if(!(l instanceof _l))throw new RangeError("Invalid node type: "+l);if(l.schema!=this)throw new RangeError("Node type from different schema used ("+l.name+")")}return l.createChecked(i,d,f)}text(l,i){let d=this.nodes.text;return new la(d,d.defaultAttrs,l,Or.setFrom(i))}mark(l,i){return"string"==typeof l&&(l=this.marks[l]),l.create(i)}nodeFromJSON(l){return Os.fromJSON(this,l)}markFromJSON(l){return Or.fromJSON(this,l)}nodeType(l){let i=this.nodes[l];if(!i)throw new RangeError("Unknown node type: "+l);return i}}({marks:Wi,nodes:ls}),(v,l)=>!v.selection.empty&&(l&&l(v.tr.deleteSelection().scrollIntoView()),!0));function Jr(v,l,i=!1){for(let d=v;d;d="start"==l?d.firstChild:d.lastChild){if(d.isTextblock)return!0;if(i&&1!=d.childCount)return!1}return!1}function cs(v){if(!v.parent.type.spec.isolating)for(let l=v.depth-1;l>=0;l--){if(v.index(l)>0)return v.doc.resolve(v.before(l+1));if(v.node(l).type.spec.isolating)break}return null}function Ya(v){if(!v.parent.type.spec.isolating)for(let l=v.depth-1;l>=0;l--){let i=v.node(l);if(v.index(l)+1<i.childCount)return v.doc.resolve(v.after(l+1));if(i.type.spec.isolating)break}return null}function nc(v){for(let l=0;l<v.edgeCount;l++){let{type:i}=v.edge(l);if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}const Ph=function If(v){return(l,i)=>{let{$from:d,$to:f}=l.selection;if(l.selection instanceof rs&&l.selection.node.isBlock)return!(!d.parentOffset||!bs(l.doc,d.pos)||(i&&i(l.tr.split(d.pos).scrollIntoView()),0));if(!d.parent.isBlock)return!1;if(i){let O=f.parentOffset==f.parent.content.size,H=l.tr;(l.selection instanceof Oo||l.selection instanceof Xo)&&H.deleteSelection();let ne=0==d.depth?null:nc(d.node(-1).contentMatchAt(d.indexAfter(-1))),Te=v&&v(f.parent,O),Qe=Te?[Te]:O&&ne?[{type:ne}]:void 0,_t=bs(H.doc,H.mapping.map(d.pos),1,Qe);if(!Qe&&!_t&&bs(H.doc,H.mapping.map(d.pos),1,ne?[{type:ne}]:void 0)&&(ne&&(Qe=[{type:ne}]),_t=!0),_t&&(H.split(H.mapping.map(d.pos),1,Qe),!O&&!d.parentOffset&&d.parent.type!=ne)){let Xt=H.mapping.map(d.before()),Ti=H.doc.resolve(Xt);ne&&d.node(-1).canReplaceWith(Ti.index(),Ti.index()+1,ne)&&H.setNodeMarkup(H.mapping.map(d.before()),ne)}i(H.scrollIntoView())}return!0}}();function rc(v,l,i){let O,H,d=l.nodeBefore,f=l.nodeAfter;if(d.type.spec.isolating||f.type.spec.isolating)return!1;if(function Oh(v,l,i){let d=l.nodeBefore,f=l.nodeAfter,O=l.index();return!(!(d&&f&&d.type.compatibleContent(f.type))||(!d.content.size&&l.parent.canReplace(O-1,O)?(i&&i(v.tr.delete(l.pos-d.nodeSize,l.pos).scrollIntoView()),0):!l.parent.canReplace(O,O+1)||!f.isTextblock&&!ha(v.doc,l.pos)||(i&&i(v.tr.clearIncompatible(l.pos,d.type,d.contentMatchAt(d.childCount)).join(l.pos).scrollIntoView()),0)))}(v,l,i))return!0;let ne=l.parent.canReplace(l.index(),l.index()+1);if(ne&&(O=(H=d.contentMatchAt(d.childCount)).findWrapping(f.type))&&H.matchType(O[0]||f.type).validEnd){if(i){let Xt=l.pos+f.nodeSize,Ti=dn.empty;for(let nn=O.length-1;nn>=0;nn--)Ti=dn.from(O[nn].create(null,Ti));Ti=dn.from(d.copy(Ti));let Fi=v.tr.step(new h(l.pos-1,Xt,l.pos,Xt,new Fn(Ti,1,0),O.length,!0)),fn=Xt+2*O.length;ha(Fi.doc,fn)&&Fi.join(fn),i(Fi.scrollIntoView())}return!0}let Te=is.findFrom(l,1),Qe=Te&&Te.$from.blockRange(Te.$to),_t=Qe&&Pt(Qe);if(null!=_t&&_t>=l.depth)return i&&i(v.tr.lift(Qe,_t).scrollIntoView()),!0;if(ne&&Jr(f,"start",!0)&&Jr(d,"end")){let Xt=d,Ti=[];for(;Ti.push(Xt),!Xt.isTextblock;)Xt=Xt.lastChild;let Fi=f,fn=1;for(;!Fi.isTextblock;Fi=Fi.firstChild)fn++;if(Xt.canReplace(Xt.childCount,Xt.childCount,Fi.content)){if(i){let nn=dn.empty;for(let $r=Ti.length-1;$r>=0;$r--)nn=dn.from(Ti[$r].copy(nn));i(v.tr.step(new h(l.pos-Ti.length,l.pos+f.nodeSize,l.pos+fn,l.pos+f.nodeSize-fn,new Fn(nn,Ti.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function eh(v){return function(l,i){let d=l.selection,f=v<0?d.$from:d.$to,O=f.depth;for(;f.node(O).isInline;){if(!O)return!1;O--}return!!f.node(O).isTextblock&&(i&&i(l.tr.setSelection(Oo.create(l.doc,v<0?f.start(O):f.end(O)))),!0)}}const pp=eh(-1),fp=eh(1);function fd(v,l=null){return function(i,d){let f=!1;for(let O=0;O<i.selection.ranges.length&&!f;O++){let{$from:{pos:H},$to:{pos:ne}}=i.selection.ranges[O];i.doc.nodesBetween(H,ne,(Te,Qe)=>{if(f)return!1;if(Te.isTextblock&&!Te.hasMarkup(v,l))if(Te.type==v)f=!0;else{let _t=i.doc.resolve(Qe),Xt=_t.index();f=_t.parent.canReplaceWith(Xt,Xt+1,v)}})}if(!f)return!1;if(d){let O=i.tr;for(let H=0;H<i.selection.ranges.length;H++){let{$from:{pos:ne},$to:{pos:Te}}=i.selection.ranges[H];O.setBlockType(ne,Te,v,l)}d(O.scrollIntoView())}return!0}}function Rh(v,l=null){return function(i,d){let{empty:f,$cursor:O,ranges:H}=i.selection;if(f&&!O||!function Pf(v,l,i){for(let d=0;d<l.length;d++){let{$from:f,$to:O}=l[d],H=0==f.depth&&v.inlineContent&&v.type.allowsMarkType(i);if(v.nodesBetween(f.pos,O.pos,ne=>{if(H)return!1;H=ne.inlineContent&&ne.type.allowsMarkType(i)}),H)return!0}return!1}(i.doc,H,v))return!1;if(d)if(O)v.isInSet(i.storedMarks||O.marks())?d(i.tr.removeStoredMark(v)):d(i.tr.addStoredMark(v.create(l)));else{let ne=!1,Te=i.tr;for(let Qe=0;!ne&&Qe<H.length;Qe++){let{$from:_t,$to:Xt}=H[Qe];ne=i.doc.rangeHasMark(_t.pos,Xt.pos,v)}for(let Qe=0;Qe<H.length;Qe++){let{$from:_t,$to:Xt}=H[Qe];if(ne)Te.removeMark(_t.pos,Xt.pos,v);else{let Ti=_t.pos,Fi=Xt.pos,fn=_t.nodeAfter,nn=Xt.nodeBefore,rr=fn&&fn.isText?/^\s*/.exec(fn.text)[0].length:0,$r=nn&&nn.isText?/\s*$/.exec(nn.text)[0].length:0;Ti+rr<Fi&&(Ti+=rr,Fi-=$r),Te.addMark(Ti,Fi,v.create(l))}}d(Te.scrollIntoView())}return!0}}function Yl(...v){return function(l,i,d){for(let f=0;f<v.length;f++)if(v[f](l,i,d))return!0;return!1}}let io=Yl(Ks,(v,l,i)=>{let d=function qo(v,l){let{$cursor:i}=v.selection;return!i||(l?!l.endOfTextblock("backward",v):i.parentOffset>0)?null:i}(v,i);if(!d)return!1;let f=cs(d);if(!f){let H=d.blockRange(),ne=H&&Pt(H);return null!=ne&&(l&&l(v.tr.lift(H,ne).scrollIntoView()),!0)}let O=f.nodeBefore;if(!O.type.spec.isolating&&rc(v,f,l))return!0;if(0==d.parent.content.size&&(Jr(O,"end")||rs.isSelectable(O))){let H=xe(v.doc,d.before(),d.after(),Fn.empty);if(H&&H.slice.size<H.to-H.from){if(l){let ne=v.tr.step(H);ne.setSelection(Jr(O,"end")?is.findFrom(ne.doc.resolve(ne.mapping.map(f.pos,-1)),-1):rs.create(ne.doc,f.pos-O.nodeSize)),l(ne.scrollIntoView())}return!0}}return!(!O.isAtom||f.depth!=d.depth-1||(l&&l(v.tr.delete(f.pos-O.nodeSize,f.pos).scrollIntoView()),0))},(v,l,i)=>{let{$head:d,empty:f}=v.selection,O=d;if(!f)return!1;if(d.parent.isTextblock){if(i?!i.endOfTextblock("backward",v):d.parentOffset>0)return!1;O=cs(d)}let H=O&&O.nodeBefore;return!(!H||!rs.isSelectable(H)||(l&&l(v.tr.setSelection(rs.create(v.doc,O.pos-H.nodeSize)).scrollIntoView()),0))}),wc=Yl(Ks,(v,l,i)=>{let d=function pa(v,l){let{$cursor:i}=v.selection;return!i||(l?!l.endOfTextblock("forward",v):i.parentOffset<i.parent.content.size)?null:i}(v,i);if(!d)return!1;let f=Ya(d);if(!f)return!1;let O=f.nodeAfter;if(rc(v,f,l))return!0;if(0==d.parent.content.size&&(Jr(O,"start")||rs.isSelectable(O))){let H=xe(v.doc,d.before(),d.after(),Fn.empty);if(H&&H.slice.size<H.to-H.from){if(l){let ne=v.tr.step(H);ne.setSelection(Jr(O,"start")?is.findFrom(ne.doc.resolve(ne.mapping.map(f.pos)),1):rs.create(ne.doc,ne.mapping.map(f.pos))),l(ne.scrollIntoView())}return!0}}return!(!O.isAtom||f.depth!=d.depth-1||(l&&l(v.tr.delete(f.pos,f.pos+O.nodeSize).scrollIntoView()),0))},(v,l,i)=>{let{$head:d,empty:f}=v.selection,O=d;if(!f)return!1;if(d.parent.isTextblock){if(i?!i.endOfTextblock("forward",v):d.parentOffset<d.parent.content.size)return!1;O=Ya(d)}let H=O&&O.nodeAfter;return!(!H||!rs.isSelectable(H)||(l&&l(v.tr.setSelection(rs.create(v.doc,O.pos)).scrollIntoView()),0))});const Da={Enter:Yl((v,l)=>{let{$head:i,$anchor:d}=v.selection;return!(!i.parent.type.spec.code||!i.sameParent(d)||(l&&l(v.tr.insertText("\n").scrollIntoView()),0))},(v,l)=>{let i=v.selection,{$from:d,$to:f}=i;if(i instanceof Xo||d.parent.inlineContent||f.parent.inlineContent)return!1;let O=nc(f.parent.contentMatchAt(f.indexAfter()));if(!O||!O.isTextblock)return!1;if(l){let H=(!d.parentOffset&&f.index()<f.parent.childCount?d:f).pos,ne=v.tr.insert(H,O.createAndFill());ne.setSelection(Oo.create(ne.doc,H+1)),l(ne.scrollIntoView())}return!0},(v,l)=>{let{$cursor:i}=v.selection;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){let O=i.before();if(bs(v.doc,O))return l&&l(v.tr.split(O).scrollIntoView()),!0}let d=i.blockRange(),f=d&&Pt(d);return null!=f&&(l&&l(v.tr.lift(d,f).scrollIntoView()),!0)},Ph),"Mod-Enter":(v,l)=>{let{$head:i,$anchor:d}=v.selection;if(!i.parent.type.spec.code||!i.sameParent(d))return!1;let f=i.node(-1),O=i.indexAfter(-1),H=nc(f.contentMatchAt(O));if(!H||!f.canReplaceWith(O,O,H))return!1;if(l){let ne=i.after(),Te=v.tr.replaceWith(ne,ne,H.createAndFill());Te.setSelection(is.near(Te.doc.resolve(ne),1)),l(Te.scrollIntoView())}return!0},Backspace:io,"Mod-Backspace":io,"Shift-Backspace":io,Delete:wc,"Mod-Delete":wc,"Mod-a":(v,l)=>(l&&l(v.tr.setSelection(new Xo(v.doc))),!0)},jc={"Ctrl-h":Da.Backspace,"Alt-Backspace":Da["Mod-Backspace"],"Ctrl-d":Da.Delete,"Ctrl-Alt-Backspace":Da["Mod-Delete"],"Alt-Delete":Da["Mod-Delete"],"Alt-d":Da["Mod-Delete"],"Ctrl-a":pp,"Ctrl-e":fp};for(let v in Da)jc[v]=Da[v];typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform();const nh=(v,l)=>{const{from:i,$from:d,to:f,empty:O}=v.selection;return O?!!l.isInSet(v.storedMarks||d.marks()):v.doc.rangeHasMark(i,f,l)},Cc=(v,l,i={})=>{const{selection:d}=v,{$from:f,to:O}=d,H=((v,l)=>{for(let i=l.depth;i>0;i-=1)if(l.node(i).type===v)return l.node(i).type;return null})(l,f);return Object.entries(i).length&&H?O<=f.end()&&f.parent.hasMarkup(l,i):!!H},sl=v=>{const l=[],{selection:{from:i,to:d}}=v;return v.doc.nodesBetween(i,d,f=>{l.push(f)}),l},gd=(v,l,i)=>{for(const d of l){const{$from:f,$to:O}=d;let H=0===f.depth&&v.type.allowsMarkType(i);if(v.nodesBetween(f.pos,O.pos,ne=>!H&&(H=ne.inlineContent&&ne.type.allowsMarkType(i),!0)),H)return!0}return!1},sc=(v,l={})=>(i,d)=>{const{tr:f,selection:O}=i,{empty:H,ranges:ne,$from:Te,$to:Qe}=O;if(H&&O instanceof Oo){const{$cursor:_t}=O;if(!_t||!gd(i.doc,ne,v)||(f.addStoredMark(v.create(l)),!f.storedMarksSet))return!1;d?.(f)}else{if(f.addMark(Te.pos,Qe.pos,v.create(l)),!f.docChanged)return!1;d?.(f.scrollIntoView())}return!0};var fa=Ot(4476);class ku{constructor(l){this.name=l}apply(){return(l,i)=>{const{schema:d}=l,f=d.marks[this.name];return!!f&&sc(f)(l,i)}}toggle(){return(l,i)=>{const{schema:d}=l,f=d.marks[this.name];return!!f&&Rh(f)(l,i)}}isActive(l){const{schema:i}=l,d=i.marks[this.name];return!!d&&nh(l,d)}canExecute(l){return this.toggle()(l)}}class uc{constructor(l=!1){this.isBulletList=!1,this.isBulletList=l}getType(l){return this.isBulletList?l.nodes.bullet_list:l.nodes.ordered_list}toggle(){return(l,i)=>{const{schema:d}=l,f=this.getType(d);return!!f&&(this.isActive(l)?function we(v){return function(l,i){let{$from:d,$to:f}=l.selection,O=d.blockRange(f,H=>H.childCount>0&&H.firstChild.type==v);return!!O&&(!i||(d.node(O.depth-1).type==v?function We(v,l,i,d){let f=v.tr,O=d.end,H=d.$to.end(d.depth);O<H&&(f.step(new h(O-1,H,O,H,new Fn(dn.from(i.create(null,d.parent.copy())),1,0),1,!0)),d=new Ns(f.doc.resolve(d.$from.pos),f.doc.resolve(H),d.depth));const ne=Pt(d);if(null==ne)return!1;f.lift(d,ne);let Te=f.mapping.map(O,-1)-1;return ha(f.doc,Te)&&f.join(Te),l(f.scrollIntoView()),!0}(l,i,v,O):function gt(v,l,i){let d=v.tr,f=i.parent;for(let Fi=i.end,fn=i.endIndex-1,nn=i.startIndex;fn>nn;fn--)Fi-=f.child(fn).nodeSize,d.delete(Fi-1,Fi+1);let O=d.doc.resolve(i.start),H=O.nodeAfter;if(d.mapping.map(i.end)!=i.start+O.nodeAfter.nodeSize)return!1;let ne=0==i.startIndex,Te=i.endIndex==f.childCount,Qe=O.node(-1),_t=O.index(-1);if(!Qe.canReplace(_t+(ne?0:1),_t+1,H.content.append(Te?dn.empty:dn.from(f))))return!1;let Xt=O.pos,Ti=Xt+H.nodeSize;return d.step(new h(Xt-(ne?1:0),Ti+(Te?1:0),Xt+1,Ti-1,new Fn((ne?dn.empty:dn.from(f.copy(dn.empty))).append(Te?dn.empty:dn.from(f.copy(dn.empty))),ne?0:1,Te?0:1),ne?0:1)),l(d.scrollIntoView()),!0}(l,i,O)))}}(d.nodes.list_item)(l,i):function qe(v,l=null){return function(i,d){let{$from:f,$to:O}=i.selection,H=f.blockRange(O),ne=!1,Te=H;if(!H)return!1;if(H.depth>=2&&f.node(H.depth-1).type.compatibleContent(v)&&0==H.startIndex){if(0==f.index(H.depth-1))return!1;let _t=i.doc.resolve(H.start-2);Te=new Ns(_t,_t,H.depth),H.endIndex<H.parent.childCount&&(H=new Ns(f,i.doc.resolve(O.end(H.depth)),H.depth)),ne=!0}let Qe=_i(Te,v,l,H);return!!Qe&&(d&&d(function Je(v,l,i,d,f){let O=dn.empty;for(let _t=i.length-1;_t>=0;_t--)O=dn.from(i[_t].type.create(i[_t].attrs,O));v.step(new h(l.start-(d?2:0),l.end,l.start,l.end,new Fn(O,0,0),i.length,!0));let H=0;for(let _t=0;_t<i.length;_t++)i[_t].type==f&&(H=_t+1);let ne=i.length-H,Te=l.start+i.length-(d?2:0),Qe=l.parent;for(let _t=l.startIndex,Xt=l.endIndex,Ti=!0;_t<Xt;_t++,Ti=!1)!Ti&&bs(v.doc,Te,ne)&&(v.split(Te,ne),Te+=2*ne),Te+=Qe.child(_t).nodeSize;return v}(i.tr,H,Qe,ne,v).scrollIntoView()),!0)}}(f)(l,i))}}isActive(l){const{schema:i}=l,d=this.getType(i);return!!d&&Cc(l,d)}canExecute(l){return this.toggle()(l)}}class $c{constructor(l){this.level=l}apply(){return(l,i)=>{const{schema:d}=l,f=d.nodes.heading;return!!f&&fd(f)(l,i)}}toggle(){return(l,i)=>{const{schema:d,selection:f,doc:O}=l,H=d.nodes.heading;if(!H)return!1;const ne=f.$from.before(1),Qe=O.nodeAt(ne)?.attrs??{};return this.isActive(l)?fd(d.nodes.paragraph,Qe)(l,i):fd(H,{...Qe,level:this.level})(l,i)}}isActive(l){const{schema:i}=l,d=sl(l),f=i.nodes.heading;if(!f)return!1;const O=[f,i.nodes.text,i.nodes.blockquote];return!!d.filter(Te=>O.includes(Te.type)).find(Te=>Te.attrs.level===this.level)}canExecute(l){return this.toggle()(l)}}class Eu{constructor(l){this.align=l}toggle(){return(l,i)=>{const{doc:d,selection:f,tr:O,schema:H}=l,{from:ne,to:Te}=f;let Qe=!1;return d.nodesBetween(ne,Te,(_t,Xt)=>{const Ti=_t.type;return[H.nodes.paragraph,H.nodes.heading].includes(Ti)&&(Qe=!0,O.setNodeMarkup(Xt,Ti,{..._t.attrs,align:this.align})),!0}),!!Qe&&(O.docChanged&&i?.(O),!0)}}isActive(l){return!!sl(l).find(f=>f.attrs.align===this.align)}canExecute(l){return this.toggle()(l)}}const jf={strict:!0};let Gl=class{constructor(l,i="color"){this.name=l,this.attrName=i}apply(l){return(i,d)=>{const{schema:f,selection:O,doc:H}=i,ne=f.marks[this.name];if(!ne)return!1;const{from:Te,to:Qe,empty:_t}=O;if(!_t&&Te+1===Qe){const Xt=H.nodeAt(Te);if(Xt?.isAtom&&!Xt.isText&&Xt.isLeaf)return!1}return sc(ne,l)(i,d)}}isActive(l){const{schema:i}=l,d=i.marks[this.name];return!!d&&nh(l,d)}getActiveColors(l){if(!this.isActive(l))return[];const{schema:i}=l;return(v=>{let l=[];const{selection:i,storedMarks:d}=v,{from:f,to:O,empty:H,$from:ne}=i;return H?l=d||ne.marks():v.doc.nodesBetween(f,O,Te=>{l=[...l,...Te.marks]}),l})(l).filter(O=>O.type===i.marks[this.name]).map(O=>O.attrs[this.attrName]).filter(Boolean)}remove(){return(l,i)=>{const{schema:d}=l,f=d.marks[this.name];return!!f&&(v=f,(l,i)=>{const{tr:d,selection:f,storedMarks:O,doc:H}=l,{empty:ne,ranges:Te}=f;if(ne&&f instanceof Oo){const{$cursor:Qe}=f;if(!Qe||!gd(l.doc,Te,v))return!1;if(v.isInSet(O||Qe.marks()))return d.removeStoredMark(v),i?.(d),!0}else{for(const Qe of Te){const{$from:_t,$to:Xt}=Qe;H.rangeHasMark(_t.pos,Xt.pos,v)&&d.removeMark(_t.pos,Xt.pos,v)}if(!d.docChanged)return!1;i?.(d.scrollIntoView())}return!1})(l,i);var v}}canExecute(l){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(l)}};const Mu=["link"];new ku("strong"),new ku("em"),new ku("code"),new ku("u"),new ku("s"),new class Cd{toggle(){return(l,i)=>{const{schema:d}=l,f=d.nodes.blockquote;return!!f&&(this.isActive(l)?((v,l)=>{let{$from:i,$to:d}=v.selection,f=i.blockRange(d),O=f&&Pt(f);return null!=O&&(l&&l(v.tr.lift(f,O).scrollIntoView()),!0)})(l,i):function Lf(v,l=null){return function(i,d){let{$from:f,$to:O}=i.selection,H=f.blockRange(O),ne=H&&_i(H,v,l);return!!ne&&(d&&d(i.tr.wrap(H,ne).scrollIntoView()),!0)}}(f)(l,i))}}isActive(l){const{schema:i}=l,d=i.nodes.blockquote;return!!d&&Cc(l,d)}canExecute(l){return this.toggle()(l)}},new class cc{insert(){return(l,i)=>{const{schema:d,tr:f}=l,O=d.nodes.horizontal_rule;return!!O&&(i(f.replaceSelectionWith(O.create()).scrollIntoView()),!0)}}canExecute(l){return((v,l)=>{const{$from:i}=v.selection;for(let d=i.depth;d>=0;d-=1){const f=i.index(d);if(i.node(d).canReplaceWith(f,f,l))return!0}return!1})(l,l.schema.nodes.horizontal_rule)}},new class ah{insert(){return(l,i)=>{const{tr:d}=l,{ranges:f,empty:O}=d.selection;return O||(Object.entries(l.schema.marks).forEach(([H,ne])=>{Mu.includes(H)||f.forEach(Te=>{d.removeMark(Te.$from.pos,Te.$to.pos,ne)})}),i(d)),!0}}canExecute(){return!0}},new uc(!0),new uc(!1),new $c(1),new $c(2),new $c(3),new $c(4),new $c(5),new $c(6),new Eu("left"),new Eu("center"),new Eu("right"),new Eu("justify"),new class{update(l){return(i,d)=>{const{schema:f,selection:O}=i,H=f.marks.link;return!(!H||O.empty)&&Rh(H,l)(i,d)}}insert(l,i){return(d,f)=>{const{schema:O,tr:H}=d;if(!O.marks.link)return!1;const Qe=O.text(l,[O.marks.link.create({href:i.href,title:i.title??l,target:i.target??"_blank"})]);return H.replaceSelectionWith(Qe,!1).scrollIntoView(),!!H.docChanged&&(f?.(H),!0)}}isActive(l,i=jf){if(i.strict)return!0;const{schema:d}=l,f=d.marks.link;return!!f&&nh(l,f)}remove(l,i){return((v,l)=>{const{doc:i,selection:d,tr:f}=v,{$head:{pos:O},from:H,to:ne}=d;if(H===ne){const Te=i.resolve(O),Qe=O-Te.textOffset,_t=Qe+Te.parent.child(Te.index()).nodeSize;f.removeMark(Qe,_t)}else f.removeMark(H,ne);return!!f.docChanged&&(l?.(f),!0)})(l,i)}canExecute(l){const i={href:""};return this.insert("Exec",i)(l)||this.update(i)(l)}},new class{insert(l,i){return(d,f)=>{const{schema:O,tr:H,selection:ne}=d,Te=O.nodes.image;if(!Te)return!1;const Qe={width:null,src:l,...i};!Qe.width&&ne instanceof rs&&ne.node.type===Te&&(Qe.width=ne.node.attrs.width),H.replaceSelectionWith(Te.createAndFill(Qe));const _t=H.doc.resolve(H.selection.anchor-H.selection.$anchor.nodeBefore.nodeSize);return H.setSelection(new rs(_t)).scrollIntoView(),!!H.docChanged&&(f?.(H),!0)}}isActive(l){const{selection:i}=l;return i instanceof rs&&"image"===i.node.type.name}},new Gl("text_color","color"),new Gl("text_background_color","backgroundColor");const Hh={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class qf{constructor(l={}){this.locals=Hh,this.get=i=>{const d=this.locals[i];return d?(0,ql.X)(d)?d:(0,Ll.of)(d):(0,Ll.of)("")},this.locals={...Hh,...l}}}const Id={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class Ad{static get(l,i="currentColor"){const d=Id[l];return d&&(d.includes("<path")||d.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${i}\n          height=20\n          width=20\n        >\n          ${d}\n        </svg>\n      `:d}}let $h=(()=>{class v{constructor(){this.locals={},this.icons={}}static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),Ld=(()=>{class v{constructor(i){this.config=i}get locals(){return new qf(this.config.locals)}getIcon(i){return this.config.icons[i]?this.config.icons[i]:Ad.get(i)}static#e=this.\u0275fac=function(d){return new(d||v)(e.CoB($h,8))};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const Wh=v=>({locals:v.locals??{},icons:v.icons??{}});let Pd=(()=>{class v{constructor(i){this.sanitizer=i}transform(i){return(v=>window.trustedTypes?.isHTML(v)??!1)(i)?i:this.sanitizer.bypassSecurityTrustHtml(i)}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(fa.mI,16))};static#t=this.\u0275pipe=e.UTH({name:"sanitizeHtml",type:v,pure:!0})}return v})(),mh=(()=>{class v{static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({providers:[Pd],imports:[Ye.MD,Y.sl]})}return v})();const Ul=new e.UbH("NgxEditorConfig"),Lu={locals:Hh,icons:Id};let Gp=(()=>{class v{static forRoot(i=Lu){return{ngModule:v,providers:[{provide:Ul,useValue:i},{provide:$h,useFactory:Wh,deps:[Ul]}]}}static forChild(i=Lu){return{ngModule:v,providers:[{provide:Ul,useValue:i},{provide:$h,useFactory:Wh,deps:[Ul]},Ld]}}static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({imports:[Ye.MD,mh]})}return v})();typeof navigator<"u"&&/Mac/.test(navigator.platform);var _h=Ot(9280);Ot(1176),new e.UbH("DROPZONE_CONFIG");let Zp=(()=>{class v{static \u0275fac=function(d){return new(d||v)};static \u0275mod=e.a4G({type:v});static \u0275inj=e.s3X({imports:[Ye.MD,Ye.MD]})}return v})();var Nd=Ot(3768),cm=Ot(7592),ig=Ot(112),ng=Ot(5448),qp=Ot(7773),um=Ot(560),qh=Ot(3120);function Sc(v,l=ig.M,i){const d=(0,qh.k)(v,l);return function Yd(v,l){return(0,ng.i)((i,d)=>{const{leading:f=!0,trailing:O=!1}=l??{};let H=!1,ne=null,Te=null,Qe=!1;const _t=()=>{Te?.unsubscribe(),Te=null,O&&(Fi(),Qe&&d.complete())},Xt=()=>{Te=null,Qe&&d.complete()},Ti=fn=>Te=(0,um.Uv)(v(fn)).subscribe((0,qp.e)(d,_t,Xt)),Fi=()=>{if(H){H=!1;const fn=ne;ne=null,d.next(fn),!Qe&&Ti(fn)}};i.subscribe((0,qp.e)(d,fn=>{H=!0,ne=fn,(!Te||Te.closed)&&(f?Fi():Ti(fn))},()=>{Qe=!0,(!(O&&H&&Te)||Te.closed)&&d.complete()}))})}(()=>d,i)}var Vd=Ot(9212),fu=Ot(4e3),Kp=Ot(6684),Ga=typeof window<"u"?window:{screen:{},navigator:{}},Ru=(Ga.matchMedia||function(){return{matches:!1}}).bind(Ga),_=!1,C=function(){};Ga.addEventListener&&Ga.addEventListener("p",C,{get passive(){return _=!0}}),Ga.removeEventListener&&Ga.removeEventListener("p",C,!1);var N=_,me="ontouchstart"in Ga,Nr=(me||"TouchEvent"in Ga&&Ru("(any-pointer: coarse)"),Ga.navigator.userAgent||"");Ru("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Nr)&&Math.min(Ga.screen.width||0,Ga.screen.height||0);function dm(v,l){}function $l(v,l){1&v&&e.yuY(0,dm,0,0,"ng-template")}(Ru("(pointer: coarse)").matches||!Ru("(pointer: fine)").matches&&me)&&/Windows.*Firefox/.test(Nr),Ru("(any-pointer: fine)").matches||Ru("(any-hover: hover)");const Wl=(v,l,i)=>({tooltip:v,placement:l,content:i});function Kh(v,l){if(1&v&&(e.SAx(0),e.yuY(1,$l,1,0,null,1),e.k70()),2&v){const i=e.GaO();e.yG2(),e.E7m("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.uAc(2,Wl,i.tooltip,i.placement,i.content))}}function rg(v,l){if(1&v&&(e.SAx(0),e.I0R(1,"div",2),e.OEk(2),e.C$Y(),e.k70()),2&v){const i=e.GaO();e.yG2(),e.e48("title",i.tooltip)("data-tooltip-placement",i.placement),e.yG2(),e.oRS(" ",i.content," ")}}const sg=["tooltipTemplate"],og=["leftOuterSelectionBar"],L_=["rightOuterSelectionBar"],P_=["fullBar"],ag=["selectionBar"],Jp=["minHandle"],lg=["maxHandle"],ja=["floorLabel"],Hd=["ceilLabel"],Jh=["minHandleLabel"],Gd=["maxHandleLabel"],cg=["combinedLabel"],ug=["ticksElement"];function O_(v,l){if(1&v&&e.wR5(0,"ngx-slider-tooltip-wrapper",32),2&v){const i=e.GaO().$implicit,d=e.GaO();e.E7m("template",d.tooltipTemplate)("tooltip",i.valueTooltip)("placement",i.valueTooltipPlacement)("content",i.value)}}function R_(v,l){if(1&v&&e.wR5(0,"span",33),2&v){const i=e.GaO().$implicit;e.E7m("innerText",i.legend)}}function z_(v,l){if(1&v&&e.wR5(0,"span",34),2&v){const i=e.GaO().$implicit;e.E7m("innerHTML",i.legend,e.E3n)}}const F_=v=>({"ngx-slider-selected":v});function B_(v,l){if(1&v&&(e.I0R(0,"span",27),e.wR5(1,"ngx-slider-tooltip-wrapper",28),e.yuY(2,O_,1,4,"ngx-slider-tooltip-wrapper",29)(3,R_,1,1,"span",30)(4,z_,1,1,"span",31),e.C$Y()),2&v){const i=l.$implicit,d=e.GaO();e.E7m("ngClass",e.S45(8,F_,i.selected))("ngStyle",i.style),e.yG2(),e.E7m("template",d.tooltipTemplate)("tooltip",i.tooltip)("placement",i.tooltipPlacement),e.yG2(),e.E7m("ngIf",null!=i.value),e.yG2(),e.E7m("ngIf",null!=i.legend&&!1===d.allowUnsafeHtmlInSlider),e.yG2(),e.E7m("ngIf",null!=i.legend&&(null==d.allowUnsafeHtmlInSlider||d.allowUnsafeHtmlInSlider))}}var eu=function(v){return v[v.Low=0]="Low",v[v.High=1]="High",v[v.Floor=2]="Floor",v[v.Ceil=3]="Ceil",v[v.TickValue=4]="TickValue",v}(eu||{});class yh{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1}const hg=new e.UbH("AllowUnsafeHtmlInSlider");var Gn=function(v){return v[v.Min=0]="Min",v[v.Max=1]="Max",v}(Gn||{});class dg{value;highValue;pointerType}class Ji{static isNullOrUndefined(l){return null==l}static areArraysEqual(l,i){if(l.length!==i.length)return!1;for(let d=0;d<l.length;++d)if(l[d]!==i[d])return!1;return!0}static linearValueToPosition(l,i,d){return(l-i)/(d-i)}static logValueToPosition(l,i,d){return((l=Math.log(l))-(i=Math.log(i)))/((d=Math.log(d))-i)}static linearPositionToValue(l,i,d){return l*(d-i)+i}static logPositionToValue(l,i,d){return i=Math.log(i),d=Math.log(d),Math.exp(l*(d-i)+i)}static findStepIndex(l,i){const d=i.map(O=>Math.abs(l-O.value));let f=0;for(let O=0;O<i.length;O++)d[O]!==d[f]&&d[O]<d[f]&&(f=O);return f}}class zu{static isTouchEvent(l){return void 0!==window.TouchEvent?l instanceof TouchEvent:void 0!==l.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class To{static roundToPrecisionLimit(l,i){return+l.toPrecision(i)}static isModuloWithinPrecisionLimit(l,i,d){const f=Math.pow(10,-d);return Math.abs(l%i)<=f||Math.abs(Math.abs(l%i)-i)<=f}static clampToRange(l,i,d){return Math.min(Math.max(l,i),d)}}class pg{eventName=null;events=null;eventsSubscription=null;teardownCallback=null}class fg{renderer;constructor(l){this.renderer=l}attachPassiveEventListener(l,i,d,f){if(!0!==N)return this.attachEventListener(l,i,d,f);const O=new pg;O.eventName=i,O.events=new y.E;const H=ne=>{O.events.next(ne)};return l.addEventListener(i,H,{passive:!0,capture:!1}),O.teardownCallback=()=>{l.removeEventListener(i,H,{passive:!0,capture:!1})},O.eventsSubscription=O.events.pipe(Ji.isNullOrUndefined(f)?(0,Vd.y)(()=>{}):Sc(f,void 0,{leading:!0,trailing:!0})).subscribe(ne=>{d(ne)}),O}detachEventListener(l){Ji.isNullOrUndefined(l.eventsSubscription)||(l.eventsSubscription.unsubscribe(),l.eventsSubscription=null),Ji.isNullOrUndefined(l.events)||(l.events.complete(),l.events=null),Ji.isNullOrUndefined(l.teardownCallback)||(l.teardownCallback(),l.teardownCallback=null)}attachEventListener(l,i,d,f){const O=new pg;return O.eventName=i,O.events=new y.E,O.teardownCallback=this.renderer.listen(l,i,ne=>{O.events.next(ne)}),O.eventsSubscription=O.events.pipe(Ji.isNullOrUndefined(f)?(0,Vd.y)(()=>{}):Sc(f,void 0,{leading:!0,trailing:!0})).subscribe(ne=>{d(ne)}),O}}let Fu=(()=>{class v{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(i,d,f){this.elemRef=i,this.renderer=d,this.changeDetectionRef=f,this.eventListenerHelper=new fg(this.renderer)}setAlwaysHide(i){this._alwaysHide=i,this.visibility=i?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(i){this._vertical=i,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(i){this._scale=i}setRotate(i){this._rotate=i,this.transform="rotate("+i+"deg)"}getRotate(){return this._rotate}setPosition(i){this._position!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=i,this._vertical?this.bottom=Math.round(i)+"px":this.left=Math.round(i)+"px"}calculateDimension(){const i=this.getBoundingClientRect();this._dimension=this.vertical?(i.bottom-i.top)*this.scale:(i.right-i.left)*this.scale}setDimension(i){this._dimension!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=i,this._vertical?this.height=Math.round(i)+"px":this.width=Math.round(i)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(i,d,f){const O=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,i,d,f);this.eventListeners.push(O)}onPassive(i,d,f){const O=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,i,d,f);this.eventListeners.push(O)}off(i){let d,f;Ji.isNullOrUndefined(i)?(d=[],f=this.eventListeners):(d=this.eventListeners.filter(O=>O.eventName!==i),f=this.eventListeners.filter(O=>O.eventName===i));for(const O of f)this.eventListenerHelper.detachEventListener(O);this.eventListeners=d}isRefDestroyed(){return Ji.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(d){return new(d||v)(e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.kD9))};static \u0275dir=e.Sc5({type:v,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(d,f){2&d&&e.m4B("opacity",f.opacity)("visibility",f.visibility)("left",f.left)("bottom",f.bottom)("height",f.height)("width",f.width)("transform",f.transform)}})}return v})(),Qp=(()=>{class v extends Fu{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}constructor(i,d,f){super(i,d,f)}static \u0275fac=function(d){return new(d||v)(e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.kD9))};static \u0275dir=e.Sc5({type:v,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(d,f){2&d&&(e.e48("role",f.role)("tabindex",f.tabindex)("aria-orientation",f.ariaOrientation)("aria-label",f.ariaLabel)("aria-labelledby",f.ariaLabelledBy)("aria-valuenow",f.ariaValueNow)("aria-valuetext",f.ariaValueText)("aria-valuemin",f.ariaValueMin)("aria-valuemax",f.ariaValueMax),e.eAK("ngx-slider-active",f.active))},features:[e.eg9]})}return v})(),Qh=(()=>{class v extends Fu{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(i,d,f,O){super(i,d,f),this.allowUnsafeHtmlInSlider=O}setValue(i){let d=!1;!this.alwaysHide&&(Ji.isNullOrUndefined(this.value)||this.value.length!==i.length||this.value.length>0&&0===this.dimension)&&(d=!0),this._value=i,!1===this.allowUnsafeHtmlInSlider?this.elemRef.nativeElement.innerText=i:this.elemRef.nativeElement.innerHTML=i,d&&this.calculateDimension()}static \u0275fac=function(d){return new(d||v)(e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.kD9),e.GI1(hg,8))};static \u0275dir=e.Sc5({type:v,selectors:[["","ngxSliderLabel",""]],features:[e.eg9]})}return v})(),ia=(()=>{class v{template;tooltip;placement;content;static \u0275fac=function(d){return new(d||v)};static \u0275cmp=e.In1({type:v,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(d,f){1&d&&e.yuY(0,Kh,2,6,"ng-container",0)(1,rg,3,3,"ng-container",0),2&d&&(e.E7m("ngIf",f.template),e.yG2(),e.E7m("ngIf",!f.template))},dependencies:[Ye.u_,Ye.XV],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return v})();class Mc{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null}class ef{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0}class xh{value;highValue;static compare(l,i){return!(Ji.isNullOrUndefined(l)&&Ji.isNullOrUndefined(i)||Ji.isNullOrUndefined(l)!==Ji.isNullOrUndefined(i))&&l.value===i.value&&l.highValue===i.highValue}}class bh extends xh{forceChange;static compare(l,i){return!(Ji.isNullOrUndefined(l)&&Ji.isNullOrUndefined(i)||Ji.isNullOrUndefined(l)!==Ji.isNullOrUndefined(i))&&l.value===i.value&&l.highValue===i.highValue&&l.forceChange===i.forceChange}}const jd={provide:Y.Y6,useExisting:(0,e.wd)(()=>N_),multi:!0};let N_=(()=>{class v{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;value=null;valueChange=new e._w7;highValue=null;highValueChange=new e._w7;options=new yh;userChangeStart=new e._w7;userChange=new e._w7;userChangeEnd=new e._w7;manualRefreshSubscription;set manualRefresh(i){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=i.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(i){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=i.subscribe(d=>{this.focusPointer(d)})}get range(){return!Ji.isNullOrUndefined(this.value)&&!Ji.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new y.E;inputModelChangeSubscription=null;outputModelChangeSubject=new y.E;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new yh;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new ef;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(i,d,f,O,H){this.renderer=i,this.elementRef=d,this.changeDetectionRef=f,this.zone=O,this.allowUnsafeHtmlInSlider=H,this.eventListenerHelper=new fg(this.renderer)}ngOnInit(){this.viewOptions=new yh,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(i){!Ji.isNullOrUndefined(i.options)&&JSON.stringify(i.options.previousValue)!==JSON.stringify(i.options.currentValue)&&this.onChangeOptions(),(!Ji.isNullOrUndefined(i.value)||!Ji.isNullOrUndefined(i.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(i){i instanceof Array?(this.value=i[0],this.highValue=i[1]):this.value=i,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(i){this.onChangeCallback=i}registerOnTouched(i){this.onTouchedCallback=i}setDisabledState(i){this.viewOptions.disabled=i,this.updateDisabledState()}setAriaLabel(i){this.viewOptions.ariaLabel=i,this.updateAriaLabel()}onResize(i){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,fu.a)(bh.compare),(0,Kp.I)(i=>!i.forceChange&&!i.internalChange)).subscribe(i=>this.applyInputModelChange(i))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,fu.a)(bh.compare)).subscribe(i=>this.publishOutputModelChange(i))}subscribeResizeObserver(){zu.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){zu.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){Ji.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){Ji.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){Ji.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){Ji.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){Ji.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){Ji.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(i){return i===Gn.Min?this.minHandleElement:i===Gn.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===Gn.Min?this.viewLowValue:this.currentTrackingPointer===Gn.Max?this.viewHighValue:null}modelValueToViewValue(i){return Ji.isNullOrUndefined(i)?NaN:Ji.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+i:Ji.findStepIndex(+i,this.viewOptions.stepsArray)}viewValueToModelValue(i){return Ji.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?i:this.getStepValue(i)}getStepValue(i){const d=this.viewOptions.stepsArray[i];return Ji.isNullOrUndefined(d)?NaN:d.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(i){const d=this.normaliseModelValues(i),f=!xh.compare(i,d);f&&(this.value=d.value,this.highValue=d.highValue),this.viewLowValue=this.modelValueToViewValue(d.value),this.viewHighValue=this.range?this.modelValueToViewValue(d.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:d.value,highValue:d.highValue,forceChange:f,userEventInitiated:!1})}publishOutputModelChange(i){const d=()=>{this.valueChange.emit(i.value),this.range&&this.highValueChange.emit(i.highValue),Ji.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[i.value,i.highValue]:i.value),Ji.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[i.value,i.highValue]:i.value)};i.userEventInitiated?(d(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{d()})}normaliseModelValues(i){const d=new xh;if(d.value=i.value,d.highValue=i.highValue,!Ji.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const f=Ji.findStepIndex(d.value,this.viewOptions.stepsArray);if(d.value=this.viewOptions.stepsArray[f].value,this.range){const O=Ji.findStepIndex(d.highValue,this.viewOptions.stepsArray);d.highValue=this.viewOptions.stepsArray[O].value}}return d}if(this.viewOptions.enforceStep&&(d.value=this.roundStep(d.value),this.range&&(d.highValue=this.roundStep(d.highValue))),this.viewOptions.enforceRange&&(d.value=To.clampToRange(d.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(d.highValue=To.clampToRange(d.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&i.value>i.highValue))if(this.viewOptions.noSwitching)d.value=d.highValue;else{const f=i.value;d.value=i.highValue,d.highValue=f}return d}renormaliseModelValues(){const i={value:this.value,highValue:this.highValue},d=this.normaliseModelValues(i);xh.compare(d,i)||(this.value=d.value,this.highValue=d.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const i=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const d=this.getOptionsInfluencingEventBindings(this.viewOptions),f=!Ji.areArraysEqual(i,d);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(f)}applyOptions(){if(this.viewOptions=new yh,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!Ji.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!Ji.isNullOrUndefined(this.viewOptions.tickStep)||!Ji.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!Ji.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),Ji.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),Ji.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(i,d)=>i+" - "+d),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,Ji.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(i):i))}applyFloorCeilOptions(){if(Ji.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),Ji.isNullOrUndefined(this.viewOptions.ceil)||Ji.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,Ji.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>String(i))}resetSlider(i=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),i&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions()}focusPointer(i){i!==Gn.Min&&i!==Gn.Max&&(i=Gn.Min),i===Gn.Min?this.minHandleElement.focus():this.range&&i===Gn.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){Ji.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const i=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(i||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const i of this.getAllSliderElements())Ji.isNullOrUndefined(i)||i.setVertical(this.viewOptions.vertical)}updateScale(){for(const i of this.getAllSliderElements())i.setScale(this.viewOptions.scale)}updateRotate(){for(const i of this.getAllSliderElements())i.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",Ji.isNullOrUndefined(this.viewOptions.ariaLabel)?Ji.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",Ji.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?Ji.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,eu.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,eu.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){Ji.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const i=this.minHandleElement.dimension;this.handleHalfDimension=i/2,Ji.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-i,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const i=Ji.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,d=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&i.reverse();const f=Ji.isNullOrUndefined(this.viewOptions.tickValueStep)?Ji.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let O=!1;const H=i.map(ne=>{let Te=this.valueToPosition(ne);this.viewOptions.vertical&&(Te=this.maxHandlePosition-Te);const Qe=d+"("+Math.round(Te)+"px)",_t=new Mc;_t.selected=this.isTickSelected(ne),_t.style={"-webkit-transform":Qe,"-moz-transform":Qe,"-o-transform":Qe,"-ms-transform":Qe,transform:Qe},_t.selected&&!Ji.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(_t.style["background-color"]=this.getSelectionBarColor()),!_t.selected&&!Ji.isNullOrUndefined(this.viewOptions.getTickColor)&&(_t.style["background-color"]=this.getTickColor(ne)),Ji.isNullOrUndefined(this.viewOptions.ticksTooltip)||(_t.tooltip=this.viewOptions.ticksTooltip(ne),_t.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!Ji.isNullOrUndefined(f)&&To.isModuloWithinPrecisionLimit(ne,f,this.viewOptions.precisionLimit)&&(_t.value=this.getDisplayValue(ne,eu.TickValue),Ji.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(_t.valueTooltip=this.viewOptions.ticksValuesTooltip(ne),_t.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let Xt=null;if(Ji.isNullOrUndefined(this.viewOptions.stepsArray))Ji.isNullOrUndefined(this.viewOptions.getLegend)||(Xt=this.viewOptions.getLegend(ne));else{const Ti=this.viewOptions.stepsArray[ne];Ji.isNullOrUndefined(this.viewOptions.getStepLegend)?Ji.isNullOrUndefined(Ti)||(Xt=Ti.legend):Xt=this.viewOptions.getStepLegend(Ti)}return Ji.isNullOrUndefined(Xt)||(_t.legend=Xt,O=!0),_t});if(this.sliderElementWithLegendClass!==O&&setTimeout(()=>{this.sliderElementWithLegendClass=O}),Ji.isNullOrUndefined(this.ticks)||this.ticks.length!==H.length)this.ticks=H,this.isRefDestroyed()||this.changeDetectionRef.detectChanges();else for(let ne=0;ne<H.length;++ne)Object.assign(this.ticks[ne],H[ne])}getTicksArray(){const i=Ji.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,d=[],f=1+Math.floor(To.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/i,this.viewOptions.precisionLimit));for(let O=0;O<f;++O)d.push(To.roundToPrecisionLimit(this.viewOptions.floor+i*O,this.viewOptions.precisionLimit));return d}isTickSelected(i){if(!this.range)if(Ji.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(i>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&i<=this.viewLowValue)return!0}else{const d=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>d&&i>=d&&i<=this.viewLowValue)return!0;if(this.viewLowValue<d&&i<=d&&i>=this.viewLowValue)return!0}return!!(this.range&&i>=this.viewLowValue&&i<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,eu.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,eu.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(i,d){i===Gn.Min?this.updateLowHandle(d):i===Gn.Max&&this.updateHighHandle(d),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(i,d){const f=i===Gn.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,O=d-f/2+this.handleHalfDimension,H=this.fullBarElement.dimension-f;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&i===Gn.Min||!this.viewOptions.rightToLeft&&i===Gn.Max?Math.min(O,H):Math.min(Math.max(O,0),H):O}updateLowHandle(i){this.minHandleElement.setPosition(i),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,eu.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(Gn.Min,i)),Ji.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(Gn.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(i){this.maxHandleElement.setPosition(i),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,eu.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(Gn.Max,i)),Ji.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(Gn.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let i=!1,d=!1;const f=this.isLabelBelowFloorLabel(this.minHandleLabelElement),O=this.isLabelAboveCeilLabel(this.minHandleLabelElement),H=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),ne=this.isLabelBelowFloorLabel(this.combinedLabelElement),Te=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(f?(i=!0,this.floorLabelElement.hide()):(i=!1,this.floorLabelElement.show()),O?(d=!0,this.ceilLabelElement.hide()):(d=!1,this.ceilLabelElement.show()),this.range){const Qe=this.combinedLabelElement.isVisible()?Te:H,_t=this.combinedLabelElement.isVisible()?ne:f;Qe?this.ceilLabelElement.hide():d||this.ceilLabelElement.show(),_t?this.floorLabelElement.hide():i||this.floorLabelElement.show()}}isLabelBelowFloorLabel(i){const d=i.position,O=this.floorLabelElement.position;return this.viewOptions.rightToLeft?d+i.dimension>=O-2:d<=O+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(i){const d=i.position,O=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?d<=O+this.ceilLabelElement.dimension+2:d+i.dimension>=O-2}updateSelectionBar(){let i=0,d=0;const f=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,O=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)d=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),i=O;else if(Ji.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))f?(d=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),i=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(d=this.minHandleElement.position+this.handleHalfDimension,i=0);else{const H=this.viewOptions.showSelectionBarFromValue,ne=this.valueToPosition(H);(this.viewOptions.rightToLeft?this.viewLowValue<=H:this.viewLowValue>H)?(d=this.minHandleElement.position-ne,i=ne+this.handleHalfDimension):(d=ne-this.minHandleElement.position,i=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(d),this.selectionBarElement.setPosition(i),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(i),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+d)),this.leftOuterSelectionBarElement.setPosition(i+d)):(this.leftOuterSelectionBarElement.setDimension(i),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+d)),this.rightOuterSelectionBarElement.setPosition(i+d))),Ji.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!Ji.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const H=Ji.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),ne=H-i>0&&!f||H-i<=0&&f;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?ne?"bottom":"top":ne?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(H+d+i+(ne?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=H-i+(ne?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const H=this.getSelectionBarColor();this.barStyle={backgroundColor:H}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(i){return this.viewOptions.getPointerColor(i===Gn.Max?this.highValue:this.value,i)}getTickColor(i){return this.viewOptions.getTickColor(i)}updateCombinedLabel(){let i=null;if(i=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,i){const d=this.getDisplayValue(this.viewLowValue,eu.Low),f=this.getDisplayValue(this.viewHighValue,eu.High),O=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(f,d):this.viewOptions.combineLabels(d,f);this.combinedLabelElement.setValue(O);const H=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(H),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(i,d){return!Ji.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(i=this.getStepValue(i)),this.viewOptions.translate(i,d)}roundStep(i,d){const f=Ji.isNullOrUndefined(d)?this.viewOptions.step:d;let O=To.roundToPrecisionLimit((i-this.viewOptions.floor)/f,this.viewOptions.precisionLimit);return O=Math.round(O)*f,To.roundToPrecisionLimit(this.viewOptions.floor+O,this.viewOptions.precisionLimit)}valueToPosition(i){let d=Ji.linearValueToPosition;Ji.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(d=Ji.logValueToPosition):d=this.viewOptions.customValueToPosition;let f=d(i=To.clampToRange(i,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return Ji.isNullOrUndefined(f)&&(f=0),this.viewOptions.rightToLeft&&(f=1-f),f*this.maxHandlePosition}positionToValue(i){let d=i/this.maxHandlePosition;this.viewOptions.rightToLeft&&(d=1-d);let f=Ji.linearPositionToValue;Ji.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(f=Ji.logPositionToValue):f=this.viewOptions.customPositionToValue;const O=f(d,this.viewOptions.floor,this.viewOptions.ceil);return Ji.isNullOrUndefined(O)?0:O}getEventXY(i,d){if(i instanceof MouseEvent)return this.viewOptions.vertical||0!==this.viewOptions.rotate?i.clientY:i.clientX;let f=0;const O=i.touches;if(!Ji.isNullOrUndefined(d))for(let H=0;H<O.length;H++)if(O[H].identifier===d){f=H;break}return this.viewOptions.vertical||0!==this.viewOptions.rotate?O[f].clientY:O[f].clientX}getEventPosition(i,d){const f=this.elementRef.nativeElement.getBoundingClientRect(),O=this.viewOptions.vertical||0!==this.viewOptions.rotate?f.bottom:f.left;let H=0;return H=this.viewOptions.vertical||0!==this.viewOptions.rotate?-this.getEventXY(i,d)+O:this.getEventXY(i,d)-O,H*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(i){if(!this.range)return Gn.Min;const d=this.getEventPosition(i),f=Math.abs(d-this.minHandleElement.position),O=Math.abs(d-this.maxHandleElement.position);return f<O?Gn.Min:f>O?Gn.Max:this.viewOptions.rightToLeft?d>this.minHandleElement.position?Gn.Min:Gn.Max:d<this.minHandleElement.position?Gn.Min:Gn.Max}bindEvents(){const i=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",d=>this.onBarStart(null,i,d,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",d=>this.onBarStart(Gn.Min,i,d,!0,!0)),this.maxHandleElement.on("mousedown",d=>this.onBarStart(Gn.Max,i,d,!0,!0))):(this.minHandleElement.on("mousedown",d=>this.onStart(Gn.Min,d,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",d=>this.onStart(Gn.Max,d,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",d=>this.onStart(null,d,!0,!0,!0)),this.ticksElement.on("mousedown",d=>this.onStart(null,d,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",d=>this.onBarStart(null,i,d,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",d=>this.onBarStart(Gn.Min,i,d,!0,!0)),this.maxHandleElement.onPassive("touchstart",d=>this.onBarStart(Gn.Max,i,d,!0,!0))):(this.minHandleElement.onPassive("touchstart",d=>this.onStart(Gn.Min,d,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",d=>this.onStart(Gn.Max,d,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",d=>this.onStart(null,d,!0,!0,!0)),this.ticksElement.onPassive("touchstart",d=>this.onStart(null,d,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(Gn.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(Gn.Max)))}getOptionsInfluencingEventBindings(i){return[i.disabled,i.readOnly,i.draggableRange,i.draggableRangeOnly,i.onlyBindHandles,i.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const i of this.getAllSliderElements())Ji.isNullOrUndefined(i)||i.off()}onBarStart(i,d,f,O,H,ne,Te){d?this.onDragStart(i,f,O,H):this.onStart(i,f,O,H,ne,Te)}onStart(i,d,f,O,H,ne){d.stopPropagation(),!zu.isTouchEvent(d)&&!N&&d.preventDefault(),this.moving=!1,this.calculateViewDimensions(),Ji.isNullOrUndefined(i)&&(i=this.getNearestHandle(d)),this.currentTrackingPointer=i;const Te=this.getPointerElement(i);if(Te.active=!0,this.viewOptions.keyboardSupport&&Te.focus(),f){this.unsubscribeOnMove();const Qe=_t=>this.dragging.active?this.onDragMove(_t):this.onMove(_t);this.onMoveEventListener=zu.isTouchEvent(d)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",Qe):this.eventListenerHelper.attachEventListener(document,"mousemove",Qe)}if(O){this.unsubscribeOnEnd();const Qe=_t=>this.onEnd(_t);this.onEndEventListener=zu.isTouchEvent(d)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",Qe):this.eventListenerHelper.attachEventListener(document,"mouseup",Qe)}this.userChangeStart.emit(this.getChangeContext()),zu.isTouchEvent(d)&&!Ji.isNullOrUndefined(d.changedTouches)&&Ji.isNullOrUndefined(this.touchId)&&(this.touchId=d.changedTouches[0].identifier),H&&this.onMove(d,!0),ne&&this.onEnd(d)}onMove(i,d){let f=null;if(zu.isTouchEvent(i)){const Qe=i.changedTouches;for(let _t=0;_t<Qe.length;_t++)if(Qe[_t].identifier===this.touchId){f=Qe[_t];break}if(Ji.isNullOrUndefined(f))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const O=Ji.isNullOrUndefined(f)?this.getEventPosition(i):this.getEventPosition(i,f.identifier);let H;O<=0?H=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:O>=this.maxHandlePosition?H=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(H=this.positionToValue(O),H=d&&!Ji.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(H,this.viewOptions.tickStep):this.roundStep(H)),this.positionTrackingHandle(H)}onEnd(i){zu.isTouchEvent(i)&&i.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(i){const d=this.getPointerElement(i);d.on("blur",()=>this.onPointerBlur(d)),d.on("keydown",f=>this.onKeyboardEvent(f)),d.on("keyup",()=>this.onKeyUp()),d.active=!0,this.currentTrackingPointer=i,this.currentFocusPointer=i,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(i){i.off("blur"),i.off("keydown"),i.off("keyup"),i.active=!1,Ji.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(i){const d=this.viewOptions.ceil-this.viewOptions.floor;let f=i+this.viewOptions.step,O=i-this.viewOptions.step,H=i+d/10,ne=i-d/10;this.viewOptions.reversedControls&&(f=i-this.viewOptions.step,O=i+this.viewOptions.step,H=i-d/10,ne=i+d/10);const Te={UP:f,DOWN:O,LEFT:O,RIGHT:f,PAGEUP:H,PAGEDOWN:ne,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(Te.LEFT=f,Te.RIGHT=O,(this.viewOptions.vertical||0!==this.viewOptions.rotate)&&(Te.UP=O,Te.DOWN=f)),Te}onKeyboardEvent(i){const d=this.getCurrentTrackingValue(),f=Ji.isNullOrUndefined(i.keyCode)?i.which:i.keyCode,Te=this.getKeyActions(d)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[f]];if(Ji.isNullOrUndefined(Te)||Ji.isNullOrUndefined(this.currentTrackingPointer))return;i.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const Qe=To.clampToRange(Te,this.viewOptions.floor,this.viewOptions.ceil),_t=this.roundStep(Qe);if(this.viewOptions.draggableRangeOnly){const Xt=this.viewHighValue-this.viewLowValue;let Ti,Fi;this.currentTrackingPointer===Gn.Min?(Ti=_t,Fi=_t+Xt,Fi>this.viewOptions.ceil&&(Fi=this.viewOptions.ceil,Ti=Fi-Xt)):this.currentTrackingPointer===Gn.Max&&(Fi=_t,Ti=_t-Xt,Ti<this.viewOptions.floor&&(Ti=this.viewOptions.floor,Fi=Ti+Xt)),this.positionTrackingBar(Ti,Fi)}else this.positionTrackingHandle(_t)}onDragStart(i,d,f,O){const H=this.getEventPosition(d);this.dragging=new ef,this.dragging.active=!0,this.dragging.value=this.positionToValue(H),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-H:H-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?H-this.maxHandleElement.position:this.maxHandleElement.position-H,this.onStart(i,d,f,O)}getMinValue(i,d,f){const O=this.viewOptions.rightToLeft;let H=null;return H=d?f?O?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:O?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(O?i+this.dragging.lowLimit:i-this.dragging.lowLimit),this.roundStep(H)}getMaxValue(i,d,f){const O=this.viewOptions.rightToLeft;let H=null;return H=d?f?O?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:O?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:O?this.positionToValue(i+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(i-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(H)}onDragMove(i){const d=this.getEventPosition(i);let f,O,H,ne;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(f=this.dragging.lowLimit,O=this.dragging.highLimit,H=this.maxHandleElement,ne=this.minHandleElement):(f=this.dragging.highLimit,O=this.dragging.lowLimit,H=this.minHandleElement,ne=this.maxHandleElement);const Qe=d>=this.maxHandlePosition-f;let _t,Xt;if(d<=O){if(0===H.position)return;_t=this.getMinValue(d,!0,!1),Xt=this.getMaxValue(d,!0,!1)}else if(Qe){if(ne.position===this.maxHandlePosition)return;Xt=this.getMaxValue(d,!0,!0),_t=this.getMinValue(d,!0,!0)}else _t=this.getMinValue(d,!1,!1),Xt=this.getMaxValue(d,!1,!1);this.positionTrackingBar(_t,Xt)}positionTrackingBar(i,d){!Ji.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit&&(d=To.roundToPrecisionLimit((i=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!Ji.isNullOrUndefined(this.viewOptions.maxLimit)&&d>this.viewOptions.maxLimit&&(i=To.roundToPrecisionLimit((d=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=i,this.viewHighValue=d,this.applyViewChange(),this.updateHandles(Gn.Min,this.valueToPosition(i)),this.updateHandles(Gn.Max,this.valueToPosition(d))}positionTrackingHandle(i){i=this.applyMinMaxLimit(i),this.range&&(this.viewOptions.pushRange?i=this.applyPushRange(i):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===Gn.Min&&i>this.viewHighValue?i=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===Gn.Max&&i<this.viewLowValue&&(i=this.applyMinMaxRange(this.viewLowValue))),i=this.applyMinMaxRange(i),this.currentTrackingPointer===Gn.Min&&i>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(Gn.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Gn.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===Gn.Max&&i<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(Gn.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Gn.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==i&&(this.currentTrackingPointer===Gn.Min?(this.viewLowValue=i,this.applyViewChange()):this.currentTrackingPointer===Gn.Max&&(this.viewHighValue=i,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(i)),this.updateAriaAttributes())}applyMinMaxLimit(i){return!Ji.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit?this.viewOptions.minLimit:!Ji.isNullOrUndefined(this.viewOptions.maxLimit)&&i>this.viewOptions.maxLimit?this.viewOptions.maxLimit:i}applyMinMaxRange(i){const f=Math.abs(i-(this.currentTrackingPointer===Gn.Min?this.viewHighValue:this.viewLowValue));if(!Ji.isNullOrUndefined(this.viewOptions.minRange)&&f<this.viewOptions.minRange){if(this.currentTrackingPointer===Gn.Min)return To.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Gn.Max)return To.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!Ji.isNullOrUndefined(this.viewOptions.maxRange)&&f>this.viewOptions.maxRange){if(this.currentTrackingPointer===Gn.Min)return To.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Gn.Max)return To.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return i}applyPushRange(i){const d=this.currentTrackingPointer===Gn.Min?this.viewHighValue-i:i-this.viewLowValue,f=Ji.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,O=this.viewOptions.maxRange;return d<f?(this.currentTrackingPointer===Gn.Min?(this.viewHighValue=To.roundToPrecisionLimit(Math.min(i+f,this.viewOptions.ceil),this.viewOptions.precisionLimit),i=To.roundToPrecisionLimit(this.viewHighValue-f,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Gn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Gn.Max&&(this.viewLowValue=To.roundToPrecisionLimit(Math.max(i-f,this.viewOptions.floor),this.viewOptions.precisionLimit),i=To.roundToPrecisionLimit(this.viewLowValue+f,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Gn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!Ji.isNullOrUndefined(O)&&d>O&&(this.currentTrackingPointer===Gn.Min?(this.viewHighValue=To.roundToPrecisionLimit(i+O,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Gn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Gn.Max&&(this.viewLowValue=To.roundToPrecisionLimit(i-O,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Gn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),i}getChangeContext(){const i=new dg;return i.pointerType=this.currentTrackingPointer,i.value=+this.value,this.range&&(i.highValue=+this.highValue),i}static \u0275fac=function(d){return new(d||v)(e.GI1(e.q87),e.GI1(e.GMv),e.GI1(e.kD9),e.GI1(e.WW2),e.GI1(hg,8))};static \u0275cmp=e.In1({type:v,selectors:[["ngx-slider"]],contentQueries:function(d,f,O){if(1&d&&e.szK(O,sg,5),2&d){let H;e.wto(H=e.Gqi())&&(f.tooltipTemplate=H.first)}},viewQuery:function(d,f){if(1&d&&(e.CC$(og,5,Fu),e.CC$(L_,5,Fu),e.CC$(P_,5,Fu),e.CC$(ag,5,Fu),e.CC$(Jp,5,Qp),e.CC$(lg,5,Qp),e.CC$(ja,5,Qh),e.CC$(Hd,5,Qh),e.CC$(Jh,5,Qh),e.CC$(Gd,5,Qh),e.CC$(cg,5,Qh),e.CC$(ug,5,Fu)),2&d){let O;e.wto(O=e.Gqi())&&(f.leftOuterSelectionBarElement=O.first),e.wto(O=e.Gqi())&&(f.rightOuterSelectionBarElement=O.first),e.wto(O=e.Gqi())&&(f.fullBarElement=O.first),e.wto(O=e.Gqi())&&(f.selectionBarElement=O.first),e.wto(O=e.Gqi())&&(f.minHandleElement=O.first),e.wto(O=e.Gqi())&&(f.maxHandleElement=O.first),e.wto(O=e.Gqi())&&(f.floorLabelElement=O.first),e.wto(O=e.Gqi())&&(f.ceilLabelElement=O.first),e.wto(O=e.Gqi())&&(f.minHandleLabelElement=O.first),e.wto(O=e.Gqi())&&(f.maxHandleLabelElement=O.first),e.wto(O=e.Gqi())&&(f.combinedLabelElement=O.first),e.wto(O=e.Gqi())&&(f.ticksElement=O.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(d,f){1&d&&e.qCj("resize",function(H){return f.onResize(H)},!1,e.MbM),2&d&&(e.e48("disabled",f.sliderElementDisabledAttr)("aria-label",f.sliderElementAriaLabel),e.eAK("vertical",f.sliderElementVerticalClass)("animate",f.sliderElementAnimateClass)("with-legend",f.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[e.M5G([jd]),e.SYr],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(d,f){1&d&&(e.I0R(0,"span",0,1),e.wR5(2,"span",2),e.C$Y(),e.I0R(3,"span",3,4),e.wR5(5,"span",2),e.C$Y(),e.I0R(6,"span",5,6),e.wR5(8,"span",2),e.C$Y(),e.I0R(9,"span",7,8),e.wR5(11,"span",9),e.C$Y(),e.wR5(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),e.I0R(26,"span",24,25),e.yuY(28,B_,5,10,"span",26),e.C$Y()),2&d&&(e.yG2(6),e.eAK("ngx-slider-transparent",f.fullBarTransparentClass),e.yG2(3),e.eAK("ngx-slider-draggable",f.selectionBarDraggableClass),e.yG2(2),e.E7m("ngStyle",f.barStyle),e.yG2(),e.E7m("ngStyle",f.minPointerStyle),e.yG2(2),e.m4B("display",f.range?"inherit":"none"),e.E7m("ngStyle",f.maxPointerStyle),e.yG2(12),e.eAK("ngx-slider-ticks-values-under",f.ticksUnderValuesClass),e.E7m("hidden",!f.showTicks),e.yG2(2),e.E7m("ngForOf",f.ticks))},dependencies:[Ye.QF,Ye.ay,Ye.u_,Ye.Qt,Fu,Qp,Qh,ia],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}'],changeDetection:0})}return v})(),Y_=(()=>{class v{static \u0275fac=function(d){return new(d||v)};static \u0275mod=e.a4G({type:v});static \u0275inj=e.s3X({imports:[Ye.MD]})}return v})(),vs=(()=>{class v{static \u0275fac=function(d){return new(d||v)};static \u0275mod=e.a4G({type:v});static \u0275inj=e.s3X({imports:[Ye.MD]})}return v})();Ot(9400);var wh=Ot(6764),ed=Ot(2780);const _g=function U_(v,l){return function(i){return v(l(i))}};_g(Object.getPrototypeOf,Object),Function.prototype.toString.call(Object);const of=function cl(v,l){return v===l||v!=v&&l!=l},Ua=function bg(v,l){for(var i=v.length;i--;)if(of(v[i][0],l))return i;return-1};var $d=Array.prototype.splice;function Th(v){var l=-1,i=null==v?0:v.length;for(this.clear();++l<i;){var d=v[l];this.set(d[0],d[1])}}Th.prototype.clear=function xg(){this.__data__=[],this.size=0},Th.prototype.delete=function td(v){var l=this.__data__,i=Ua(l,v);return!(i<0||(i==l.length-1?l.pop():$d.call(l,i,1),--this.size,0))},Th.prototype.get=function af(v){var l=this.__data__,i=Ua(l,v);return i<0?void 0:l[i][1]},Th.prototype.has=function Cg(v){return Ua(this.__data__,v)>-1},Th.prototype.set=function J_(v,l){var i=this.__data__,d=Ua(i,v);return d<0?(++this.size,i.push([v,l])):i[d][1]=l,this};const id=Th;var Wd=Ot(4556);var v,na=Ot(7616),vm=na.c["__core-js_shared__"],kh=(v=/[^.]+$/.exec(vm&&vm.keys&&vm.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"";var cf=Function.prototype.toString;const Eh=function uf(v){if(null!=v){try{return cf.call(v)}catch{}try{return v+""}catch{}}return""};var iv=/^\[object .+?Constructor\]$/,ym=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Fg=function sv(v){return!(!(0,Wd.c)(v)||function Rg(v){return!!kh&&kh in v}(v))&&(function Og(v){if(!(0,Wd.c)(v))return!1;var l=(0,ed.c)(v);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}(v)?ym:iv).test(Eh(v))},Dc=function av(v,l){var i=function ov(v,l){return v?.[l]}(v,l);return Fg(i)?i:void 0},sd=Dc(na.c,"Map"),Yu=Dc(Object,"create");var uv=Object.prototype.hasOwnProperty;var Jd=Object.prototype.hasOwnProperty;function ad(v){var l=-1,i=null==v?0:v.length;for(this.clear();++l<i;){var d=v[l];this.set(d[0],d[1])}}ad.prototype.clear=function bm(){this.__data__=Yu?Yu(null):{},this.size=0},ad.prototype.delete=function Ng(v){var l=this.has(v)&&delete this.__data__[v];return this.size-=l?1:0,l},ad.prototype.get=function Zd(v){var l=this.__data__;if(Yu){var i=l[v];return"__lodash_hash_undefined__"===i?void 0:i}return uv.call(l,v)?l[v]:void 0},ad.prototype.has=function hf(v){var l=this.__data__;return Yu?void 0!==l[v]:Jd.call(l,v)},ad.prototype.set=function od(v,l){var i=this.__data__;return this.size+=this.has(v)?0:1,i[v]=Yu&&void 0===l?"__lodash_hash_undefined__":l,this};const wm=ad,pf=function Hg(v,l){var i=v.__data__;return function Vg(v){var l=typeof v;return"string"==l||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==v:null===v}(l)?i["string"==typeof l?"string":"hash"]:i.map};function Hu(v){var l=-1,i=null==v?0:v.length;for(this.clear();++l<i;){var d=v[l];this.set(d[0],d[1])}}Hu.prototype.clear=function Yg(){this.size=0,this.__data__={hash:new wm,map:new(sd||id),string:new wm}},Hu.prototype.delete=function Gg(v){var l=pf(this,v).delete(v);return this.size-=l?1:0,l},Hu.prototype.get=function gv(v){return pf(this,v).get(v)},Hu.prototype.has=function mf(v){return pf(this,v).has(v)},Hu.prototype.set=function _v(v,l){var i=pf(this,v),d=i.size;return i.set(v,l),this.size+=i.size==d?0:1,this};const Gu=Hu;function gu(v){var l=this.__data__=new id(v);this.size=l.size}gu.prototype.clear=function Eg(){this.__data__=new id,this.size=0},gu.prototype.delete=function Sg(v){var l=this.__data__,i=l.delete(v);return this.size=l.size,i},gu.prototype.get=function Mg(v){return this.__data__.get(v)},gu.prototype.has=function Ig(v){return this.__data__.has(v)},gu.prototype.set=function Tm(v,l){var i=this.__data__;if(i instanceof id){var d=i.__data__;if(!sd||d.length<199)return d.push([v,l]),this.size=++i.size,this;i=this.__data__=new Gu(d)}return i.set(v,l),this.size=i.size,this},function(){try{var v=Dc(Object,"defineProperty");return v({},"",{}),v}catch{}}();!function Uu(v){(0,wh.c)(v)&&(0,ed.c)(v)}(function(){return arguments}()),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;var r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1;const m=function u(v){return function(l){return v(l)}};var w=Ot(8616),E="object"==typeof exports&&exports&&!exports.nodeType&&exports,P=E&&"object"==typeof module&&module&&!module.nodeType&&module,G=P&&P.exports===E&&w.c.process;const ie=function(){try{return P&&P.require&&P.require("util").types||G&&G.binding&&G.binding("util")}catch{}}();var se=ie&&ie.isTypedArray;se&&m(se),_g(Object.keys,Object),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;const vu=Dc(na.c,"DataView"),np=Dc(na.c,"Promise"),rp=Dc(na.c,"Set"),Xa=Dc(na.c,"WeakMap");var hl="[object Map]",wf="[object Promise]",Ym="[object Set]",Wu="[object WeakMap]",iy="[object DataView]",Hy=Eh(vu),Gy=Eh(sd),jy=Eh(np),Uy=Eh(rp),$y=Eh(Xa),op=ed.c;(vu&&op(new vu(new ArrayBuffer(1)))!=iy||sd&&op(new sd)!=hl||np&&op(np.resolve())!=wf||rp&&op(new rp)!=Ym||Xa&&op(new Xa)!=Wu)&&(op=function(v){var l=(0,ed.c)(v),i="[object Object]"==l?v.constructor:void 0,d=i?Eh(i):"";if(d)switch(d){case Hy:return iy;case Gy:return hl;case jy:return wf;case Uy:return Ym;case $y:return Wu}return l});Ot(312);var ly=ie&&ie.isMap;ly&&m(ly);var cy=ie&&ie.isSet;cy&&m(cy);var Js={};Js["[object Arguments]"]=Js["[object Array]"]=Js["[object ArrayBuffer]"]=Js["[object DataView]"]=Js["[object Boolean]"]=Js["[object Date]"]=Js["[object Float32Array]"]=Js["[object Float64Array]"]=Js["[object Int8Array]"]=Js["[object Int16Array]"]=Js["[object Int32Array]"]=Js["[object Map]"]=Js["[object Number]"]=Js["[object Object]"]=Js["[object RegExp]"]=Js["[object Set]"]=Js["[object String]"]=Js["[object Symbol]"]=Js["[object Uint8Array]"]=Js["[object Uint8ClampedArray]"]=Js["[object Uint16Array]"]=Js["[object Uint32Array]"]=!0,Js["[object Error]"]=Js["[object Function]"]=Js["[object WeakMap]"]=!1,Symbol("MainQueueId"),new Array(256).fill(0).map((v,l)=>("0"+l.toString(16)).slice(-2));let Tx=(()=>{class v{}return v.\u0275fac=function(i){return new(i||v)},v.\u0275mod=e.a4G({type:v}),v.\u0275inj=e.s3X({imports:[[Y.y,Ye.MD]]}),v})();Ot(1472);var fy=Ot(2164);window.ApexCharts=fy;let Mx=(()=>{class v{}return v.\u0275fac=function(i){return new(i||v)},v.\u0275mod=e.a4G({type:v}),v.\u0275inj=e.s3X({}),v})();Ot(9216);let Dx=(()=>{class v{static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({})}return v})();var my=Ot(800),gy=Ot(3616),Ix=Ot(5084),Ax=Ot(4704),Lx=Ot(6700),Px=Ot(7368),Ox=Ot(8716);const y_=()=>{const v=typeof window<"u"?window:void 0;return v&&v.tinymce?v.tinymce:null};let Rx=(()=>{class v{onBeforePaste=new e._w7;onBlur=new e._w7;onClick=new e._w7;onCompositionEnd=new e._w7;onCompositionStart=new e._w7;onCompositionUpdate=new e._w7;onContextMenu=new e._w7;onCopy=new e._w7;onCut=new e._w7;onDblclick=new e._w7;onDrag=new e._w7;onDragDrop=new e._w7;onDragEnd=new e._w7;onDragGesture=new e._w7;onDragOver=new e._w7;onDrop=new e._w7;onFocus=new e._w7;onFocusIn=new e._w7;onFocusOut=new e._w7;onKeyDown=new e._w7;onKeyPress=new e._w7;onKeyUp=new e._w7;onMouseDown=new e._w7;onMouseEnter=new e._w7;onMouseLeave=new e._w7;onMouseMove=new e._w7;onMouseOut=new e._w7;onMouseOver=new e._w7;onMouseUp=new e._w7;onPaste=new e._w7;onSelectionChange=new e._w7;onActivate=new e._w7;onAddUndo=new e._w7;onBeforeAddUndo=new e._w7;onBeforeExecCommand=new e._w7;onBeforeGetContent=new e._w7;onBeforeRenderUI=new e._w7;onBeforeSetContent=new e._w7;onChange=new e._w7;onClearUndos=new e._w7;onDeactivate=new e._w7;onDirty=new e._w7;onExecCommand=new e._w7;onGetContent=new e._w7;onHide=new e._w7;onInit=new e._w7;onInput=new e._w7;onInitNgModel=new e._w7;onLoadContent=new e._w7;onNodeChange=new e._w7;onPostProcess=new e._w7;onPostRender=new e._w7;onPreInit=new e._w7;onPreProcess=new e._w7;onProgressState=new e._w7;onRedo=new e._w7;onRemove=new e._w7;onReset=new e._w7;onResizeEditor=new e._w7;onSaveContent=new e._w7;onSetAttrib=new e._w7;onObjectResizeStart=new e._w7;onObjectResized=new e._w7;onObjectSelected=new e._w7;onSetContent=new e._w7;onShow=new e._w7;onSubmit=new e._w7;onUndo=new e._w7;onVisualAid=new e._w7;static \u0275fac=function(d){return new(d||v)};static \u0275dir=e.Sc5({type:v,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInput:"onInput",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}})}return v})();const _y=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],x_=(v,l,i)=>(0,my.w)(v,l).pipe((0,gy.a)(i)),vy=(v,l)=>"string"==typeof v?v.split(",").map(i=>i.trim()):Array.isArray(v)?v:l;let yy=0;const xy=v=>typeof v<"u"&&"textarea"===v.tagName.toLowerCase(),by=v=>typeof v>"u"||""===v?[]:Array.isArray(v)?v:v.split(" "),Nx=(v,l)=>by(v).concat(by(l)),Yx=()=>{},wy=v=>null==v,Gx=(()=>{const v=new Lx.g(null),l=v.pipe((0,Kp.I)(Boolean),(0,Px.G)(([i,d])=>{const f=i.createElement("script");return f.referrerPolicy="origin",f.type="application/javascript",f.src=d,i.head.appendChild(f),(0,my.w)(f,"load").pipe(v=>v.pipe((0,Ix.K)(),(0,Ax.k)(()=>{})))}),(0,Ox.C)({bufferSize:1,refCount:!0}));return{load:(...i)=>(v.getValue()||v.next(i),l),reinitialize:()=>{v.next(null)}}})(),jx=new e.UbH("TINYMCE_SCRIPT_SRC"),Ux={provide:Y.Y6,useExisting:(0,e.wd)(()=>Cy),multi:!0};let Cy=(()=>{class v extends Rx{cdRef;platformId;tinymceScriptSrc;cloudChannel="7";apiKey="no-api-key";licenseKey;init;id="";initialValue;outputFormat;inline;tagName;plugins;toolbar;modelEvents="change input undo redo";allowedEvents;ignoreEvents;set disabled(i){this._disabled=i,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(i?"readonly":"design"):this._editor.setMode(i?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}ngZone;_elementRef;_element;_disabled;_editor;onTouchedCallback=Yx;onChangeCallback;destroy$=new y.E;constructor(i,d,f,O,H){super(),this.cdRef=f,this.platformId=O,this.tinymceScriptSrc=H,this._elementRef=i,this.ngZone=d}writeValue(i){this._editor&&this._editor.initialized?this._editor.setContent(wy(i)?"":i):this.initialValue=null===i?void 0:i}registerOnChange(i){this.onChangeCallback=i}registerOnTouched(i){this.onTouchedCallback=i}setDisabledState(i){this.disabled=i}ngAfterViewInit(){(0,Ye.c0)(this.platformId)&&(this.id=this.id||(v=>{const i=(new Date).getTime(),d=Math.floor(1e9*Math.random());return yy++,"tiny-angular_"+d+yy+String(i)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==y_()?this.initialise():this._element&&this._element.ownerDocument&&Gx.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,gy.a)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==y_()&&y_().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,xy(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise=()=>{const i={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,license_key:this.licenseKey,plugins:Nx(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:d=>{this._editor=d,x_(d,"init",this.destroy$).subscribe(()=>{this.initEditor(d)}),((v,l,i)=>{(v=>{const l=vy(v.ignoreEvents,[]);return vy(v.allowedEvents,_y).filter(d=>_y.includes(d)&&!l.includes(d))})(v).forEach(f=>{const O=v[f];x_(l,f.substring(2),i).subscribe(H=>{(v=>v.observed||v.observers?.length>0)(O)&&v.ngZone.run(()=>O.emit({event:H,editor:l}))})})})(this,d,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(d)}};xy(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{y_().init(i)})};getScriptSrc(){return wy(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(i){x_(i,"blur",this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.onTouchedCallback())}),x_(i,this.modelEvents,this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.emitOnChange(i))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{i.setContent(this.initialValue),i.getContent()!==this.initialValue&&this.emitOnChange(i),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(i)})}emitOnChange(i){this.onChangeCallback&&this.onChangeCallback(i.getContent({format:this.outputFormat}))}static \u0275fac=function(d){return new(d||v)(e.GI1(e.GMv),e.GI1(e.WW2),e.GI1(e.kD9),e.GI1(e.AHE),e.GI1(jx,8))};static \u0275cmp=e.In1({type:v,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",licenseKey:"licenseKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[e.M5G([Ux]),e.eg9,e.UHJ],decls:0,vars:0,template:function(d,f){},dependencies:[Ye.MD,Y.y],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return v})(),$x=(()=>{class v{static \u0275fac=function(d){return new(d||v)};static \u0275mod=e.a4G({type:v});static \u0275inj=e.s3X({imports:[Cy]})}return v})();var Wx=Ot(2728);let Zx=(()=>{class v{static forRoot(){return{ngModule:v,providers:[]}}static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({imports:[Ye.MD]})}return v})();var qx=Ot(8987);function Kx(v,l){1&v&&e.OEk(0),2&v&&e.cNF(l.index<l.value?"\u2605":"\u2606")}function Jx(v,l){}const Qx=(v,l)=>({index:v,value:l});function eb(v,l){if(1&v){const i=e.KQA();e.I0R(0,"span",3),e.OEk(1),e.C$Y(),e.I0R(2,"span",4),e.qCj("mouseenter",function(){const O=e.usT(i).index,H=e.GaO();return e.CGJ(H.enter(O+1))})("click",function(){const O=e.usT(i).index,H=e.GaO();return e.CGJ(H.rate(O+1))}),e.yuY(3,Jx,0,0,"ng-template",5),e.C$Y()}if(2&v){const i=l.$implicit,d=l.index,f=e.GaO(),O=e.Gew(2);e.yG2(),e.oRS("(",d<f.value?"*":" ",")"),e.yG2(),e.m4B("cursor",f.readonly?"default":"pointer"),e.eAK("active",d<f.value),e.E7m("title",i.title),e.yG2(),e.E7m("ngTemplateOutlet",f.customTemplate||O)("ngTemplateOutletContext",e.IBC(8,Qx,d,f.value))}}let tb=(()=>{class v{constructor(){this.ariaLabel="rating"}static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const ib={provide:Y.Y6,useExisting:(0,e.wd)(()=>nb),multi:!0};let nb=(()=>{class v{constructor(i,d){this.changeDetection=i,this.max=5,this.readonly=!1,this.titles=[],this.onHover=new e._w7,this.onLeave=new e._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.ariaLabel="rating",this.range=[],this.value=0,Object.assign(this,d)}onKeydown(i){-1!==[37,38,39,40].indexOf(i.which)&&(i.preventDefault(),i.stopPropagation(),this.rate(this.value+(38===i.which||39===i.which?1:-1)))}ngOnInit(){this.max=this.max||5,this.titles=typeof this.titles<"u"&&this.titles.length>0?this.titles:[],this.range=this.buildTemplateObjects(this.max)}writeValue(i){if(i%1!==i)return this.value=Math.round(i),this.preValue=i,void this.changeDetection.markForCheck();this.preValue=i,this.value=i,this.changeDetection.markForCheck()}enter(i){this.readonly||(this.value=i,this.changeDetection.markForCheck(),this.onHover.emit(i))}reset(){"number"==typeof this.preValue&&(this.value=Math.round(this.preValue),this.changeDetection.markForCheck(),this.onLeave.emit(this.value))}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}rate(i){!this.readonly&&this.range&&i>=0&&i<=this.range.length&&(this.writeValue(i),this.onChange(i))}buildTemplateObjects(i){const d=[];for(let f=0;f<i;f++)d.push({index:f,title:this.titles[f]||f+1});return d}static#e=this.\u0275fac=function(d){return new(d||v)(e.GI1(e.kD9),e.GI1(tb))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["rating"]],hostBindings:function(d,f){1&d&&e.qCj("keydown",function(H){return f.onKeydown(H)})},inputs:{max:"max",readonly:"readonly",titles:"titles",customTemplate:"customTemplate"},outputs:{onHover:"onHover",onLeave:"onLeave"},features:[e.M5G([ib])],decls:4,vars:4,consts:[["tabindex","0","role","slider","aria-valuemin","0",3,"mouseleave","keydown"],["star",""],["ngFor","",3,"ngForOf"],[1,"sr-only","visually-hidden"],[1,"bs-rating-star",3,"title","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(d,f){1&d&&(e.I0R(0,"span",0),e.qCj("mouseleave",function(){return f.reset()})("keydown",function(H){return f.onKeydown(H)}),e.yuY(1,Kx,1,1,"ng-template",null,1,e.gJz)(3,eb,4,11,"ng-template",2),e.C$Y()),2&d&&(e.e48("aria-label",f.ariaLabel)("aria-valuemax",f.range.length)("aria-valuenow",f.value),e.yG2(3),e.E7m("ngForOf",f.range))},dependencies:[Ye.ay,Ye.XV],encapsulation:2,changeDetection:0})}return v})(),rb=(()=>{class v{static forRoot(){return{ngModule:v,providers:[]}}static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({imports:[Ye.MD]})}return v})();var zv=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Cf={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(v){return typeof console<"u"&&console.warn(v)},getWeek:function(v){var l=new Date(v.getTime());l.setHours(0,0,0,0),l.setDate(l.getDate()+3-(l.getDay()+6)%7);var i=new Date(l.getFullYear(),0,4);return 1+Math.round(((l.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Fv={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(v){var l=v%100;if(l>3&&l<21)return"th";switch(l%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const Bv=Fv;var fc=function(v,l){return void 0===l&&(l=2),("000"+v).slice(-1*l)},ou=function(v){return!0===v?1:0};function Ty(v,l){var i;return function(){var d=this,f=arguments;clearTimeout(i),i=setTimeout(function(){return v.apply(d,f)},l)}}var Nv=function(v){return v instanceof Array?v:[v]};function Xl(v,l,i){if(!0===i)return v.classList.add(l);v.classList.remove(l)}function Ss(v,l,i){var d=window.document.createElement(v);return i=i||"",d.className=l=l||"",void 0!==i&&(d.textContent=i),d}function b_(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function ky(v,l){return l(v)?v:v.parentNode?ky(v.parentNode,l):void 0}function w_(v,l){var i=Ss("div","numInputWrapper"),d=Ss("input","numInput "+v),f=Ss("span","arrowUp"),O=Ss("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?d.type="number":(d.type="text",d.pattern="\\d*"),void 0!==l)for(var H in l)d.setAttribute(H,l[H]);return i.appendChild(d),i.appendChild(f),i.appendChild(O),i}function Lc(v){try{return"function"==typeof v.composedPath?v.composedPath()[0]:v.target}catch{return v.target}}var Yv=function(){},C_=function(v,l,i){return i.months[l?"shorthand":"longhand"][v]},sb={D:Yv,F:function(v,l,i){v.setMonth(i.months.longhand.indexOf(l))},G:function(v,l){v.setHours((v.getHours()>=12?12:0)+parseFloat(l))},H:function(v,l){v.setHours(parseFloat(l))},J:function(v,l){v.setDate(parseFloat(l))},K:function(v,l,i){v.setHours(v.getHours()%12+12*ou(new RegExp(i.amPM[1],"i").test(l)))},M:function(v,l,i){v.setMonth(i.months.shorthand.indexOf(l))},S:function(v,l){v.setSeconds(parseFloat(l))},U:function(v,l){return new Date(1e3*parseFloat(l))},W:function(v,l,i){var d=parseInt(l),f=new Date(v.getFullYear(),0,2+7*(d-1),0,0,0,0);return f.setDate(f.getDate()-f.getDay()+i.firstDayOfWeek),f},Y:function(v,l){v.setFullYear(parseFloat(l))},Z:function(v,l){return new Date(l)},d:function(v,l){v.setDate(parseFloat(l))},h:function(v,l){v.setHours((v.getHours()>=12?12:0)+parseFloat(l))},i:function(v,l){v.setMinutes(parseFloat(l))},j:function(v,l){v.setDate(parseFloat(l))},l:Yv,m:function(v,l){v.setMonth(parseFloat(l)-1)},n:function(v,l){v.setMonth(parseFloat(l)-1)},s:function(v,l){v.setSeconds(parseFloat(l))},u:function(v,l){return new Date(parseFloat(l))},w:Yv,y:function(v,l){v.setFullYear(2e3+parseFloat(l))}},ap={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Hm={Z:function(v){return v.toISOString()},D:function(v,l,i){return l.weekdays.shorthand[Hm.w(v,l,i)]},F:function(v,l,i){return C_(Hm.n(v,l,i)-1,!1,l)},G:function(v,l,i){return fc(Hm.h(v,l,i))},H:function(v){return fc(v.getHours())},J:function(v,l){return void 0!==l.ordinal?v.getDate()+l.ordinal(v.getDate()):v.getDate()},K:function(v,l){return l.amPM[ou(v.getHours()>11)]},M:function(v,l){return C_(v.getMonth(),!0,l)},S:function(v){return fc(v.getSeconds())},U:function(v){return v.getTime()/1e3},W:function(v,l,i){return i.getWeek(v)},Y:function(v){return fc(v.getFullYear(),4)},d:function(v){return fc(v.getDate())},h:function(v){return v.getHours()%12?v.getHours()%12:12},i:function(v){return fc(v.getMinutes())},j:function(v){return v.getDate()},l:function(v,l){return l.weekdays.longhand[v.getDay()]},m:function(v){return fc(v.getMonth()+1)},n:function(v){return v.getMonth()+1},s:function(v){return v.getSeconds()},u:function(v){return v.getTime()},w:function(v){return v.getDay()},y:function(v){return String(v.getFullYear()).substring(2)}},Ey=function(v){var l=v.config,i=void 0===l?Cf:l,d=v.l10n,f=void 0===d?Fv:d,O=v.isMobile,H=void 0!==O&&O;return function(ne,Te,Qe){var _t=Qe||f;return void 0===i.formatDate||H?Te.split("").map(function(Xt,Ti,Fi){return Hm[Xt]&&"\\"!==Fi[Ti-1]?Hm[Xt](ne,_t,i):"\\"!==Xt?Xt:""}).join(""):i.formatDate(ne,Te,_t)}},Vv=function(v){var l=v.config,i=void 0===l?Cf:l,d=v.l10n,f=void 0===d?Fv:d;return function(O,H,ne,Te){if(0===O||O){var _t,Qe=Te||f,Xt=O;if(O instanceof Date)_t=new Date(O.getTime());else if("string"!=typeof O&&void 0!==O.toFixed)_t=new Date(O);else if("string"==typeof O){var Ti=H||(i||Cf).dateFormat,Fi=String(O).trim();if("today"===Fi)_t=new Date,ne=!0;else if(i&&i.parseDate)_t=i.parseDate(O,Ti);else if(/Z$/.test(Fi)||/GMT$/.test(Fi))_t=new Date(O);else{for(var fn=void 0,nn=[],rr=0,$r=0,Za="";rr<Ti.length;rr++){var Xu=Ti[rr],kf="\\"===Xu;if(ap[Xu]&&"\\"!==Ti[rr-1]&&!kf){Za+=ap[Xu];var lp=new RegExp(Za).exec(O);lp&&(fn=!0)&&nn["Y"!==Xu?"push":"unshift"]({fn:sb[Xu],val:lp[++$r]})}else kf||(Za+=".")}_t=i&&i.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),nn.forEach(function(Ef){return _t=(0,Ef.fn)(_t,Ef.val,Qe)||_t}),_t=fn?_t:void 0}}return _t instanceof Date&&!isNaN(_t.getTime())?(!0===ne&&_t.setHours(0,0,0,0),_t):void i.errorHandler(new Error("Invalid date provided: "+Xt))}}};function Pc(v,l,i){return void 0===i&&(i=!0),!1!==i?new Date(v.getTime()).setHours(0,0,0,0)-new Date(l.getTime()).setHours(0,0,0,0):v.getTime()-l.getTime()}var ob=function(v,l,i){return v>Math.min(l,i)&&v<Math.max(l,i)},Hv=function(v,l,i){return 3600*v+60*l+i},ab=function(v){var l=Math.floor(v/3600),i=(v-3600*l)/60;return[l,i,v-3600*l-60*i]},lb={DAY:864e5};function Gv(v){var l=v.defaultHour,i=v.defaultMinute,d=v.defaultSeconds;if(void 0!==v.minDate){var f=v.minDate.getHours(),O=v.minDate.getMinutes(),H=v.minDate.getSeconds();l<f&&(l=f),l===f&&i<O&&(i=O),l===f&&i===O&&d<H&&(d=v.minDate.getSeconds())}if(void 0!==v.maxDate){var ne=v.maxDate.getHours(),Te=v.maxDate.getMinutes();(l=Math.min(l,ne))===ne&&(i=Math.min(Te,i)),l===ne&&i===Te&&(d=v.maxDate.getSeconds())}return{hours:l,minutes:i,seconds:d}}Ot(6900);var Ml=function(){return Ml=Object.assign||function(v){for(var l,i=1,d=arguments.length;i<d;i++)for(var f in l=arguments[i])Object.prototype.hasOwnProperty.call(l,f)&&(v[f]=l[f]);return v},Ml.apply(this,arguments)},Sy=function(){for(var v=0,l=0,i=arguments.length;l<i;l++)v+=arguments[l].length;var d=Array(v),f=0;for(l=0;l<i;l++)for(var O=arguments[l],H=0,ne=O.length;H<ne;H++,f++)d[f]=O[H];return d},cb=300;function ub(v,l){var i={config:Ml(Ml({},Cf),ga.defaultConfig),l10n:Bv};function O(){var mt;return(null===(mt=i.calendarContainer)||void 0===mt?void 0:mt.getRootNode()).activeElement||document.activeElement}function H(mt){return mt.bind(i)}function ne(){var mt=i.config;!1===mt.weekNumbers&&1===mt.showMonths||!0!==mt.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==i.calendarContainer&&(i.calendarContainer.style.visibility="hidden",i.calendarContainer.style.display="block"),void 0!==i.daysContainer){var Tt=(i.days.offsetWidth+1)*mt.showMonths;i.daysContainer.style.width=Tt+"px",i.calendarContainer.style.width=Tt+(void 0!==i.weekWrapper?i.weekWrapper.offsetWidth:0)+"px",i.calendarContainer.style.removeProperty("visibility"),i.calendarContainer.style.removeProperty("display")}})}function Te(mt){if(0===i.selectedDates.length){var Tt=void 0===i.config.minDate||Pc(new Date,i.config.minDate)>=0?new Date:new Date(i.config.minDate.getTime()),ni=Gv(i.config);Tt.setHours(ni.hours,ni.minutes,ni.seconds,Tt.getMilliseconds()),i.selectedDates=[Tt],i.latestSelectedDateObj=Tt}void 0!==mt&&"blur"!==mt.type&&function Nb(mt){mt.preventDefault();var Tt="keydown"===mt.type,ni=Lc(mt),Ri=ni;void 0!==i.amPM&&ni===i.amPM&&(i.amPM.textContent=i.l10n.amPM[ou(i.amPM.textContent===i.l10n.amPM[0])]);var Cn=parseFloat(Ri.getAttribute("min")),Nn=parseFloat(Ri.getAttribute("max")),Hr=parseFloat(Ri.getAttribute("step")),er=parseInt(Ri.value,10),Xn=er+Hr*(mt.delta||(Tt?38===mt.which?1:-1:0));if(typeof Ri.value<"u"&&2===Ri.value.length){var Ar=Ri===i.hourElement,js=Ri===i.minuteElement;Xn<Cn?(Xn=Nn+Xn+ou(!Ar)+(ou(Ar)&&ou(!i.amPM)),js&&kf(void 0,-1,i.hourElement)):Xn>Nn&&(Xn=Ri===i.hourElement?Xn-Nn-ou(!i.amPM):Cn,js&&kf(void 0,1,i.hourElement)),i.amPM&&Ar&&(1===Hr?Xn+er===23:Math.abs(Xn-er)>Hr)&&(i.amPM.textContent=i.l10n.amPM[ou(i.amPM.textContent===i.l10n.amPM[0])]),Ri.value=fc(Xn)}}(mt);var Ri=i._input.value;Xt(),Dh(),i._input.value!==Ri&&i._debouncedChange()}function Xt(){if(void 0!==i.hourElement&&void 0!==i.minuteElement){var mt=(parseInt(i.hourElement.value.slice(-2),10)||0)%24,Tt=(parseInt(i.minuteElement.value,10)||0)%60,ni=void 0!==i.secondElement?(parseInt(i.secondElement.value,10)||0)%60:0;void 0!==i.amPM&&(mt=function Qe(mt,Tt){return mt%12+12*ou(Tt===i.l10n.amPM[1])}(mt,i.amPM.textContent));var Ri=void 0!==i.config.minTime||i.config.minDate&&i.minDateHasTime&&i.latestSelectedDateObj&&0===Pc(i.latestSelectedDateObj,i.config.minDate,!0),Cn=void 0!==i.config.maxTime||i.config.maxDate&&i.maxDateHasTime&&i.latestSelectedDateObj&&0===Pc(i.latestSelectedDateObj,i.config.maxDate,!0);if(void 0!==i.config.maxTime&&void 0!==i.config.minTime&&i.config.minTime>i.config.maxTime){var Nn=Hv(i.config.minTime.getHours(),i.config.minTime.getMinutes(),i.config.minTime.getSeconds()),Hr=Hv(i.config.maxTime.getHours(),i.config.maxTime.getMinutes(),i.config.maxTime.getSeconds()),er=Hv(mt,Tt,ni);if(er>Hr&&er<Nn){var Zr=ab(Nn);mt=Zr[0],Tt=Zr[1],ni=Zr[2]}}else{if(Cn){var Xn=void 0!==i.config.maxTime?i.config.maxTime:i.config.maxDate;(mt=Math.min(mt,Xn.getHours()))===Xn.getHours()&&(Tt=Math.min(Tt,Xn.getMinutes())),Tt===Xn.getMinutes()&&(ni=Math.min(ni,Xn.getSeconds()))}if(Ri){var Ar=void 0!==i.config.minTime?i.config.minTime:i.config.minDate;(mt=Math.max(mt,Ar.getHours()))===Ar.getHours()&&Tt<Ar.getMinutes()&&(Tt=Ar.getMinutes()),Tt===Ar.getMinutes()&&(ni=Math.max(ni,Ar.getSeconds()))}}Fi(mt,Tt,ni)}}function Ti(mt){var Tt=mt||i.latestSelectedDateObj;Tt&&Tt instanceof Date&&Fi(Tt.getHours(),Tt.getMinutes(),Tt.getSeconds())}function Fi(mt,Tt,ni){void 0!==i.latestSelectedDateObj&&i.latestSelectedDateObj.setHours(mt%24,Tt,ni||0,0),i.hourElement&&i.minuteElement&&!i.isMobile&&(i.hourElement.value=fc(i.config.time_24hr?mt:(12+mt)%12+12*ou(mt%12==0)),i.minuteElement.value=fc(Tt),void 0!==i.amPM&&(i.amPM.textContent=i.l10n.amPM[ou(mt>=12)]),void 0!==i.secondElement&&(i.secondElement.value=fc(ni)))}function fn(mt){var Tt=Lc(mt),ni=parseInt(Tt.value)+(mt.delta||0);(ni/1e3>1||"Enter"===mt.key&&!/[^\d]/.test(ni.toString()))&&k_(ni)}function nn(mt,Tt,ni,Ri){return Tt instanceof Array?Tt.forEach(function(Cn){return nn(mt,Cn,ni,Ri)}):mt instanceof Array?mt.forEach(function(Cn){return nn(Cn,Tt,ni,Ri)}):(mt.addEventListener(Tt,ni,Ri),void i._handlers.push({remove:function(){return mt.removeEventListener(Tt,ni,Ri)}}))}function rr(){Eo("onChange")}function Za(mt,Tt){var ni=void 0!==mt?i.parseDate(mt):i.latestSelectedDateObj||(i.config.minDate&&i.config.minDate>i.now?i.config.minDate:i.config.maxDate&&i.config.maxDate<i.now?i.config.maxDate:i.now),Ri=i.currentYear,Cn=i.currentMonth;try{void 0!==ni&&(i.currentYear=ni.getFullYear(),i.currentMonth=ni.getMonth())}catch(Nn){Nn.message="Invalid date supplied: "+ni,i.config.errorHandler(Nn)}Tt&&i.currentYear!==Ri&&(Eo("onYearChange"),Mf()),Tt&&(i.currentYear!==Ri||i.currentMonth!==Cn)&&Eo("onMonthChange"),i.redraw()}function Xu(mt){var Tt=Lc(mt);~Tt.className.indexOf("arrow")&&kf(mt,Tt.classList.contains("arrowUp")?1:-1)}function kf(mt,Tt,ni){var Ri=mt&&Lc(mt),Cn=ni||Ri&&Ri.parentNode&&Ri.parentNode.firstChild,Nn=qv("increment");Nn.delta=Tt,Cn&&Cn.dispatchEvent(Nn)}function lp(mt,Tt,ni,Ri){var Cn=cp(Tt,!0),Nn=Ss("span",mt,Tt.getDate().toString());return Nn.dateObj=Tt,Nn.$i=Ri,Nn.setAttribute("aria-label",i.formatDate(Tt,i.config.ariaDateFormat)),-1===mt.indexOf("hidden")&&0===Pc(Tt,i.now)&&(i.todayDateElem=Nn,Nn.classList.add("today"),Nn.setAttribute("aria-current","date")),Cn?(Nn.tabIndex=-1,Kv(Tt)&&(Nn.classList.add("selected"),i.selectedDateElem=Nn,"range"===i.config.mode&&(Xl(Nn,"startRange",i.selectedDates[0]&&0===Pc(Tt,i.selectedDates[0],!0)),Xl(Nn,"endRange",i.selectedDates[1]&&0===Pc(Tt,i.selectedDates[1],!0)),"nextMonthDay"===mt&&Nn.classList.add("inRange")))):Nn.classList.add("flatpickr-disabled"),"range"===i.config.mode&&function Fb(mt){return!("range"!==i.config.mode||i.selectedDates.length<2)&&Pc(mt,i.selectedDates[0])>=0&&Pc(mt,i.selectedDates[1])<=0}(Tt)&&!Kv(Tt)&&Nn.classList.add("inRange"),i.weekNumbers&&1===i.config.showMonths&&"prevMonthDay"!==mt&&Ri%7==6&&i.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+i.config.getWeek(Tt)+"</span>"),Eo("onDayCreate",Nn),Nn}function Ef(mt){mt.focus(),"range"===i.config.mode&&S_(mt)}function Sf(mt){for(var ni=mt>0?i.config.showMonths:-1,Ri=mt>0?0:i.config.showMonths-1;Ri!=ni;Ri+=mt)for(var Cn=i.daysContainer.children[Ri],Hr=mt>0?Cn.children.length:-1,er=mt>0?0:Cn.children.length-1;er!=Hr;er+=mt){var Zr=Cn.children[er];if(-1===Zr.className.indexOf("hidden")&&cp(Zr.dateObj))return Zr}}function Gm(mt,Tt){var ni=O(),Ri=E_(ni||document.body),Cn=void 0!==mt?mt:Ri?ni:void 0!==i.selectedDateElem&&E_(i.selectedDateElem)?i.selectedDateElem:void 0!==i.todayDateElem&&E_(i.todayDateElem)?i.todayDateElem:Sf(Tt>0?1:-1);void 0===Cn?i._input.focus():Ri?function $v(mt,Tt){for(var ni=-1===mt.className.indexOf("Month")?mt.dateObj.getMonth():i.currentMonth,Ri=Tt>0?i.config.showMonths:-1,Cn=Tt>0?1:-1,Nn=ni-i.currentMonth;Nn!=Ri;Nn+=Cn)for(var Hr=i.daysContainer.children[Nn],Zr=Hr.children.length,Xn=ni-i.currentMonth===Nn?mt.$i+Tt:Tt<0?Hr.children.length-1:0;Xn>=0&&Xn<Zr&&Xn!=(Tt>0?Zr:-1);Xn+=Cn){var Ar=Hr.children[Xn];if(-1===Ar.className.indexOf("hidden")&&cp(Ar.dateObj)&&Math.abs(mt.$i-Xn)>=Math.abs(Tt))return Ef(Ar)}i.changeMonth(Cn),Gm(Sf(Cn),0)}(Cn,Tt):Ef(Cn)}function _b(mt,Tt){for(var ni=(new Date(mt,Tt,1).getDay()-i.l10n.firstDayOfWeek+7)%7,Ri=i.utils.getDaysInMonth((Tt-1+12)%12,mt),Cn=i.utils.getDaysInMonth(Tt,mt),Nn=window.document.createDocumentFragment(),Hr=i.config.showMonths>1,er=Hr?"prevMonthDay hidden":"prevMonthDay",Zr=Hr?"nextMonthDay hidden":"nextMonthDay",Xn=Ri+1-ni,Ar=0;Xn<=Ri;Xn++,Ar++)Nn.appendChild(lp("flatpickr-day "+er,new Date(mt,Tt-1,Xn),0,Ar));for(Xn=1;Xn<=Cn;Xn++,Ar++)Nn.appendChild(lp("flatpickr-day",new Date(mt,Tt,Xn),0,Ar));for(var js=Cn+1;js<=42-ni&&(1===i.config.showMonths||Ar%7!=0);js++,Ar++)Nn.appendChild(lp("flatpickr-day "+Zr,new Date(mt,Tt+1,js%Cn),0,Ar));var Zu=Ss("div","dayContainer");return Zu.appendChild(Nn),Zu}function T_(){if(void 0!==i.daysContainer){b_(i.daysContainer),i.weekNumbers&&b_(i.weekNumbers);for(var mt=document.createDocumentFragment(),Tt=0;Tt<i.config.showMonths;Tt++){var ni=new Date(i.currentYear,i.currentMonth,1);ni.setMonth(i.currentMonth+Tt),mt.appendChild(_b(ni.getFullYear(),ni.getMonth()))}i.daysContainer.appendChild(mt),i.days=i.daysContainer.firstChild,"range"===i.config.mode&&1===i.selectedDates.length&&S_()}}function Mf(){if(!(i.config.showMonths>1||"dropdown"!==i.config.monthSelectorType)){i.monthsDropdownContainer.tabIndex=-1,i.monthsDropdownContainer.innerHTML="";for(var Tt=0;Tt<12;Tt++)if(Ri=Tt,!(void 0!==i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&Ri<i.config.minDate.getMonth()||void 0!==i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()&&Ri>i.config.maxDate.getMonth())){var ni=Ss("option","flatpickr-monthDropdown-month");ni.value=new Date(i.currentYear,Tt).getMonth().toString(),ni.textContent=C_(Tt,i.config.shorthandCurrentMonth,i.l10n),ni.tabIndex=-1,i.currentMonth===Tt&&(ni.selected=!0),i.monthsDropdownContainer.appendChild(ni)}}var Ri}function vb(){var ni,mt=Ss("div","flatpickr-month"),Tt=window.document.createDocumentFragment();i.config.showMonths>1||"static"===i.config.monthSelectorType?ni=Ss("span","cur-month"):(i.monthsDropdownContainer=Ss("select","flatpickr-monthDropdown-months"),i.monthsDropdownContainer.setAttribute("aria-label",i.l10n.monthAriaLabel),nn(i.monthsDropdownContainer,"change",function(Hr){var er=Lc(Hr),Zr=parseInt(er.value,10);i.changeMonth(Zr-i.currentMonth),Eo("onMonthChange")}),Mf(),ni=i.monthsDropdownContainer);var Ri=w_("cur-year",{tabindex:"-1"}),Cn=Ri.getElementsByTagName("input")[0];Cn.setAttribute("aria-label",i.l10n.yearAriaLabel),i.config.minDate&&Cn.setAttribute("min",i.config.minDate.getFullYear().toString()),i.config.maxDate&&(Cn.setAttribute("max",i.config.maxDate.getFullYear().toString()),Cn.disabled=!!i.config.minDate&&i.config.minDate.getFullYear()===i.config.maxDate.getFullYear());var Nn=Ss("div","flatpickr-current-month");return Nn.appendChild(ni),Nn.appendChild(Ri),Tt.appendChild(Nn),mt.appendChild(Tt),{container:mt,yearElement:Cn,monthElement:ni}}function Dy(){b_(i.monthNav),i.monthNav.appendChild(i.prevMonthNav),i.config.showMonths&&(i.yearElements=[],i.monthElements=[]);for(var mt=i.config.showMonths;mt--;){var Tt=vb();i.yearElements.push(Tt.yearElement),i.monthElements.push(Tt.monthElement),i.monthNav.appendChild(Tt.container)}i.monthNav.appendChild(i.nextMonthNav)}function Iy(){i.weekdayContainer?b_(i.weekdayContainer):i.weekdayContainer=Ss("div","flatpickr-weekdays");for(var mt=i.config.showMonths;mt--;){var Tt=Ss("div","flatpickr-weekdaycontainer");i.weekdayContainer.appendChild(Tt)}return Ay(),i.weekdayContainer}function Ay(){if(i.weekdayContainer){var mt=i.l10n.firstDayOfWeek,Tt=Sy(i.l10n.weekdays.shorthand);mt>0&&mt<Tt.length&&(Tt=Sy(Tt.splice(mt,Tt.length),Tt.splice(0,mt)));for(var ni=i.config.showMonths;ni--;)i.weekdayContainer.children[ni].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+Tt.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function Wv(mt,Tt){void 0===Tt&&(Tt=!0);var ni=Tt?mt:mt-i.currentMonth;ni<0&&!0===i._hidePrevMonthArrow||ni>0&&!0===i._hideNextMonthArrow||(i.currentMonth+=ni,(i.currentMonth<0||i.currentMonth>11)&&(i.currentYear+=i.currentMonth>11?1:-1,i.currentMonth=(i.currentMonth+12)%12,Eo("onYearChange"),Mf()),T_(),Eo("onMonthChange"),I_())}function jm(mt){return i.calendarContainer.contains(mt)}function Xv(mt){if(i.isOpen&&!i.config.inline){var Tt=Lc(mt),ni=jm(Tt),Cn=!(Tt===i.input||Tt===i.altInput||i.element.contains(Tt)||mt.path&&mt.path.indexOf&&(~mt.path.indexOf(i.input)||~mt.path.indexOf(i.altInput))||ni||jm(mt.relatedTarget)),Nn=!i.config.ignoredFocusElements.some(function(Hr){return Hr.contains(Tt)});Cn&&Nn&&(i.config.allowInput&&i.setDate(i._input.value,!1,i.config.altInput?i.config.altFormat:i.config.dateFormat),void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement&&""!==i.input.value&&void 0!==i.input.value&&Te(),i.close(),i.config&&"range"===i.config.mode&&1===i.selectedDates.length&&i.clear(!1))}}function k_(mt){if(!(!mt||i.config.minDate&&mt<i.config.minDate.getFullYear()||i.config.maxDate&&mt>i.config.maxDate.getFullYear())){var ni=i.currentYear!==mt;i.currentYear=mt||i.currentYear,i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth=Math.min(i.config.maxDate.getMonth(),i.currentMonth):i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&(i.currentMonth=Math.max(i.config.minDate.getMonth(),i.currentMonth)),ni&&(i.redraw(),Eo("onYearChange"),Mf())}}function cp(mt,Tt){var ni;void 0===Tt&&(Tt=!0);var Ri=i.parseDate(mt,void 0,Tt);if(i.config.minDate&&Ri&&Pc(Ri,i.config.minDate,void 0!==Tt?Tt:!i.minDateHasTime)<0||i.config.maxDate&&Ri&&Pc(Ri,i.config.maxDate,void 0!==Tt?Tt:!i.maxDateHasTime)>0)return!1;if(!i.config.enable&&0===i.config.disable.length)return!0;if(void 0===Ri)return!1;for(var Cn=!!i.config.enable,Nn=null!==(ni=i.config.enable)&&void 0!==ni?ni:i.config.disable,Hr=0,er=void 0;Hr<Nn.length;Hr++){if("function"==typeof(er=Nn[Hr])&&er(Ri))return Cn;if(er instanceof Date&&void 0!==Ri&&er.getTime()===Ri.getTime())return Cn;if("string"==typeof er){var Zr=i.parseDate(er,void 0,!0);return Zr&&Zr.getTime()===Ri.getTime()?Cn:!Cn}if("object"==typeof er&&void 0!==Ri&&er.from&&er.to&&Ri.getTime()>=er.from.getTime()&&Ri.getTime()<=er.to.getTime())return Cn}return!Cn}function E_(mt){return void 0!==i.daysContainer&&-1===mt.className.indexOf("hidden")&&-1===mt.className.indexOf("flatpickr-disabled")&&i.daysContainer.contains(mt)}function kb(mt){var Tt=mt.target===i._input,ni=i._input.value.trimEnd()!==Jv();Tt&&ni&&(!mt.relatedTarget||!jm(mt.relatedTarget))&&i.setDate(i._input.value,!0,mt.target===i.altInput?i.config.altFormat:i.config.dateFormat)}function Ly(mt){var Tt=Lc(mt),ni=i.config.wrap?v.contains(Tt):Tt===i._input,Ri=i.config.allowInput,Cn=i.isOpen&&(!Ri||!ni),Nn=i.config.inline&&ni&&!Ri;if(13===mt.keyCode&&ni){if(Ri)return i.setDate(i._input.value,!0,Tt===i.altInput?i.config.altFormat:i.config.dateFormat),i.close(),Tt.blur();i.open()}else if(jm(Tt)||Cn||Nn){var Hr=!!i.timeContainer&&i.timeContainer.contains(Tt);switch(mt.keyCode){case 13:Hr?(mt.preventDefault(),Te(),Zv()):Fy(mt);break;case 27:mt.preventDefault(),Zv();break;case 8:case 46:ni&&!i.config.allowInput&&(mt.preventDefault(),i.clear());break;case 37:case 39:if(Hr||ni)i.hourElement&&i.hourElement.focus();else{mt.preventDefault();var er=O();if(void 0!==i.daysContainer&&(!1===Ri||er&&E_(er))){var Zr=39===mt.keyCode?1:-1;mt.ctrlKey?(mt.stopPropagation(),Wv(Zr),Gm(Sf(1),0)):Gm(void 0,Zr)}}break;case 38:case 40:mt.preventDefault();var Xn=40===mt.keyCode?1:-1;i.daysContainer&&void 0!==Tt.$i||Tt===i.input||Tt===i.altInput?mt.ctrlKey?(mt.stopPropagation(),k_(i.currentYear-Xn),Gm(Sf(1),0)):Hr||Gm(void 0,7*Xn):Tt===i.currentYearElement?k_(i.currentYear-Xn):i.config.enableTime&&(!Hr&&i.hourElement&&i.hourElement.focus(),Te(mt),i._debouncedChange());break;case 9:if(Hr){var Ar=[i.hourElement,i.minuteElement,i.secondElement,i.amPM].concat(i.pluginElements).filter(function(Oc){return Oc}),js=Ar.indexOf(Tt);if(-1!==js){var Zu=Ar[js+(mt.shiftKey?-1:1)];mt.preventDefault(),(Zu||i._input).focus()}}else!i.config.noCalendar&&i.daysContainer&&i.daysContainer.contains(Tt)&&mt.shiftKey&&(mt.preventDefault(),i._input.focus())}}if(void 0!==i.amPM&&Tt===i.amPM)switch(mt.key){case i.l10n.amPM[0].charAt(0):case i.l10n.amPM[0].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[0],Xt(),Dh();break;case i.l10n.amPM[1].charAt(0):case i.l10n.amPM[1].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[1],Xt(),Dh()}(ni||jm(Tt))&&Eo("onKeyDown",mt)}function S_(mt,Tt){if(void 0===Tt&&(Tt="flatpickr-day"),1===i.selectedDates.length&&(!mt||mt.classList.contains(Tt)&&!mt.classList.contains("flatpickr-disabled"))){for(var ni=mt?mt.dateObj.getTime():i.days.firstElementChild.dateObj.getTime(),Ri=i.parseDate(i.selectedDates[0],void 0,!0).getTime(),Cn=Math.min(ni,i.selectedDates[0].getTime()),Nn=Math.max(ni,i.selectedDates[0].getTime()),Hr=!1,er=0,Zr=0,Xn=Cn;Xn<Nn;Xn+=lb.DAY)cp(new Date(Xn),!0)||(Hr=Hr||Xn>Cn&&Xn<Nn,Xn<Ri&&(!er||Xn>er)?er=Xn:Xn>Ri&&(!Zr||Xn<Zr)&&(Zr=Xn));Array.from(i.rContainer.querySelectorAll("*:nth-child(-n+"+i.config.showMonths+") > ."+Tt)).forEach(function(js){var Oc=js.dateObj.getTime(),Um=er>0&&Oc<er||Zr>0&&Oc>Zr;if(Um)return js.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(Df){js.classList.remove(Df)});Hr&&!Um||(["startRange","inRange","endRange","notAllowed"].forEach(function(Df){js.classList.remove(Df)}),void 0!==mt&&(mt.classList.add(ni<=i.selectedDates[0].getTime()?"startRange":"endRange"),Ri<ni&&Oc===Ri?js.classList.add("startRange"):Ri>ni&&Oc===Ri&&js.classList.add("endRange"),Oc>=er&&(0===Zr||Oc<=Zr)&&ob(Oc,Ri,ni)&&js.classList.add("inRange")))})}}function Eb(){i.isOpen&&!i.config.static&&!i.config.inline&&M_()}function Py(mt){return function(Tt){var ni=i.config["_"+mt+"Date"]=i.parseDate(Tt,i.config.dateFormat),Ri=i.config["_"+("min"===mt?"max":"min")+"Date"];void 0!==ni&&(i["min"===mt?"minDateHasTime":"maxDateHasTime"]=ni.getHours()>0||ni.getMinutes()>0||ni.getSeconds()>0),i.selectedDates&&(i.selectedDates=i.selectedDates.filter(function(Cn){return cp(Cn)}),!i.selectedDates.length&&"min"===mt&&Ti(ni),Dh()),i.daysContainer&&(zy(),void 0!==ni?i.currentYearElement[mt]=ni.getFullYear().toString():i.currentYearElement.removeAttribute(mt),i.currentYearElement.disabled=!!Ri&&void 0!==ni&&Ri.getFullYear()===ni.getFullYear())}}function Oy(){return i.config.wrap?v.querySelector("[data-input]"):v}function Ry(){"object"!=typeof i.config.locale&&typeof ga.l10ns[i.config.locale]>"u"&&i.config.errorHandler(new Error("flatpickr: invalid locale "+i.config.locale)),i.l10n=Ml(Ml({},ga.l10ns.default),"object"==typeof i.config.locale?i.config.locale:"default"!==i.config.locale?ga.l10ns[i.config.locale]:void 0),ap.D="("+i.l10n.weekdays.shorthand.join("|")+")",ap.l="("+i.l10n.weekdays.longhand.join("|")+")",ap.M="("+i.l10n.months.shorthand.join("|")+")",ap.F="("+i.l10n.months.longhand.join("|")+")",ap.K="("+i.l10n.amPM[0]+"|"+i.l10n.amPM[1]+"|"+i.l10n.amPM[0].toLowerCase()+"|"+i.l10n.amPM[1].toLowerCase()+")",void 0===Ml(Ml({},l),JSON.parse(JSON.stringify(v.dataset||{}))).time_24hr&&void 0===ga.defaultConfig.time_24hr&&(i.config.time_24hr=i.l10n.time_24hr),i.formatDate=Ey(i),i.parseDate=Vv({config:i.config,l10n:i.l10n})}function M_(mt){if("function"!=typeof i.config.position){if(void 0!==i.calendarContainer){Eo("onPreCalendarPosition");var Tt=mt||i._positionElement,ni=Array.prototype.reduce.call(i.calendarContainer.children,function(Wb,Xb){return Wb+Xb.offsetHeight},0),Ri=i.calendarContainer.offsetWidth,Cn=i.config.position.split(" "),Nn=Cn[0],Hr=Cn.length>1?Cn[1]:null,er=Tt.getBoundingClientRect(),Zr=window.innerHeight-er.bottom,Xn="above"===Nn||"below"!==Nn&&Zr<ni&&er.top>ni,Ar=window.pageYOffset+er.top+(Xn?-ni-2:Tt.offsetHeight+2);if(Xl(i.calendarContainer,"arrowTop",!Xn),Xl(i.calendarContainer,"arrowBottom",Xn),!i.config.inline){var js=window.pageXOffset+er.left,Zu=!1,Oc=!1;"center"===Hr?(js-=(Ri-er.width)/2,Zu=!0):"right"===Hr&&(js-=Ri-er.width,Oc=!0),Xl(i.calendarContainer,"arrowLeft",!Zu&&!Oc),Xl(i.calendarContainer,"arrowCenter",Zu),Xl(i.calendarContainer,"arrowRight",Oc);var Um=window.document.body.offsetWidth-(window.pageXOffset+er.right),Df=js+Ri>window.document.body.offsetWidth,Yb=Um+Ri>window.document.body.offsetWidth;if(Xl(i.calendarContainer,"rightMost",Df),!i.config.static)if(i.calendarContainer.style.top=Ar+"px",Df)if(Yb){var Qv=function Db(){for(var mt=null,Tt=0;Tt<document.styleSheets.length;Tt++){var ni=document.styleSheets[Tt];if(ni.cssRules){mt=ni;break}}return mt??function Ib(){var mt=document.createElement("style");return document.head.appendChild(mt),mt.sheet}()}();if(void 0===Qv)return;var Vb=window.document.body.offsetWidth,Hb=Math.max(0,Vb/2-Ri/2),Ub=Qv.cssRules.length,$b="{left:"+er.left+"px;right:auto;}";Xl(i.calendarContainer,"rightMost",!1),Xl(i.calendarContainer,"centerMost",!0),Qv.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+$b,Ub),i.calendarContainer.style.left=Hb+"px",i.calendarContainer.style.right="auto"}else i.calendarContainer.style.left="auto",i.calendarContainer.style.right=Um+"px";else i.calendarContainer.style.left=js+"px",i.calendarContainer.style.right="auto"}}}else i.config.position(i,mt)}function zy(){i.config.noCalendar||i.isMobile||(Mf(),I_(),T_())}function Zv(){i._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(i.close,0):i.close()}function Fy(mt){mt.preventDefault(),mt.stopPropagation();var ni=ky(Lc(mt),function(Ar){return Ar.classList&&Ar.classList.contains("flatpickr-day")&&!Ar.classList.contains("flatpickr-disabled")&&!Ar.classList.contains("notAllowed")});if(void 0!==ni){var Ri=ni,Cn=i.latestSelectedDateObj=new Date(Ri.dateObj.getTime()),Nn=(Cn.getMonth()<i.currentMonth||Cn.getMonth()>i.currentMonth+i.config.showMonths-1)&&"range"!==i.config.mode;if(i.selectedDateElem=Ri,"single"===i.config.mode)i.selectedDates=[Cn];else if("multiple"===i.config.mode){var Hr=Kv(Cn);Hr?i.selectedDates.splice(parseInt(Hr),1):i.selectedDates.push(Cn)}else"range"===i.config.mode&&(2===i.selectedDates.length&&i.clear(!1,!1),i.latestSelectedDateObj=Cn,i.selectedDates.push(Cn),0!==Pc(Cn,i.selectedDates[0],!0)&&i.selectedDates.sort(function(Ar,js){return Ar.getTime()-js.getTime()}));if(Xt(),Nn){var er=i.currentYear!==Cn.getFullYear();i.currentYear=Cn.getFullYear(),i.currentMonth=Cn.getMonth(),er&&(Eo("onYearChange"),Mf()),Eo("onMonthChange")}I_(),T_(),Dh(),Nn||"range"===i.config.mode||1!==i.config.showMonths?void 0!==i.selectedDateElem&&void 0===i.hourElement&&i.selectedDateElem&&i.selectedDateElem.focus():Ef(Ri),void 0!==i.hourElement&&void 0!==i.hourElement&&i.hourElement.focus(),i.config.closeOnSelect&&("single"===i.config.mode&&!i.config.enableTime||"range"===i.config.mode&&2===i.selectedDates.length&&!i.config.enableTime)&&Zv(),rr()}}i.parseDate=Vv({config:i.config,l10n:i.l10n}),i._handlers=[],i.pluginElements=[],i.loadedPlugins=[],i._bind=nn,i._setHoursFromDate=Ti,i._positionCalendar=M_,i.changeMonth=Wv,i.changeYear=k_,i.clear=function wb(mt,Tt){if(void 0===mt&&(mt=!0),void 0===Tt&&(Tt=!0),i.input.value="",void 0!==i.altInput&&(i.altInput.value=""),void 0!==i.mobileInput&&(i.mobileInput.value=""),i.selectedDates=[],i.latestSelectedDateObj=void 0,!0===Tt&&(i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth()),!0===i.config.enableTime){var ni=Gv(i.config);Fi(ni.hours,ni.minutes,ni.seconds)}i.redraw(),mt&&Eo("onChange")},i.close=function Cb(){i.isOpen=!1,i.isMobile||(void 0!==i.calendarContainer&&i.calendarContainer.classList.remove("open"),void 0!==i._input&&i._input.classList.remove("active")),Eo("onClose")},i.onMouseOver=S_,i._createElement=Ss,i.createDay=lp,i.destroy=function Tb(){void 0!==i.config&&Eo("onDestroy");for(var mt=i._handlers.length;mt--;)i._handlers[mt].remove();if(i._handlers=[],i.mobileInput)i.mobileInput.parentNode&&i.mobileInput.parentNode.removeChild(i.mobileInput),i.mobileInput=void 0;else if(i.calendarContainer&&i.calendarContainer.parentNode)if(i.config.static&&i.calendarContainer.parentNode){var Tt=i.calendarContainer.parentNode;if(Tt.lastChild&&Tt.removeChild(Tt.lastChild),Tt.parentNode){for(;Tt.firstChild;)Tt.parentNode.insertBefore(Tt.firstChild,Tt);Tt.parentNode.removeChild(Tt)}}else i.calendarContainer.parentNode.removeChild(i.calendarContainer);i.altInput&&(i.input.type="text",i.altInput.parentNode&&i.altInput.parentNode.removeChild(i.altInput),delete i.altInput),i.input&&(i.input.type=i.input._type,i.input.classList.remove("flatpickr-input"),i.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ni){try{delete i[ni]}catch{}})},i.isEnabled=cp,i.jumpToDate=Za,i.updateValue=Dh,i.open=function Sb(mt,Tt){if(void 0===Tt&&(Tt=i._positionElement),!0===i.isMobile){if(mt){mt.preventDefault();var ni=Lc(mt);ni&&ni.blur()}return void 0!==i.mobileInput&&(i.mobileInput.focus(),i.mobileInput.click()),void Eo("onOpen")}if(!i._input.disabled&&!i.config.inline){var Ri=i.isOpen;i.isOpen=!0,Ri||(i.calendarContainer.classList.add("open"),i._input.classList.add("active"),Eo("onOpen"),M_(Tt)),!0===i.config.enableTime&&!0===i.config.noCalendar&&!1===i.config.allowInput&&(void 0===mt||!i.timeContainer.contains(mt.relatedTarget))&&setTimeout(function(){return i.hourElement.select()},50)}},i.redraw=zy,i.set=function Ab(mt,Tt){if(null!==mt&&"object"==typeof mt)for(var ni in Object.assign(i.config,mt),mt)void 0!==D_[ni]&&D_[ni].forEach(function(Ri){return Ri()});else i.config[mt]=Tt,void 0!==D_[mt]?D_[mt].forEach(function(Ri){return Ri()}):zv.indexOf(mt)>-1&&(i.config[mt]=Nv(Tt));i.redraw(),Dh(!0)},i.setDate=function Lb(mt,Tt,ni){if(void 0===Tt&&(Tt=!1),void 0===ni&&(ni=i.config.dateFormat),0!==mt&&!mt||mt instanceof Array&&0===mt.length)return i.clear(Tt);By(mt,ni),i.latestSelectedDateObj=i.selectedDates[i.selectedDates.length-1],i.redraw(),Za(void 0,Tt),Ti(),0===i.selectedDates.length&&i.clear(!1),Dh(Tt),Tt&&Eo("onChange")},i.toggle=function zb(mt){if(!0===i.isOpen)return i.close();i.open(mt)};var D_={locale:[Ry,Ay],showMonths:[Dy,ne,Iy],minDate:[Za],maxDate:[Za],positionElement:[Yy],clickOpens:[function(){!0===i.config.clickOpens?(nn(i._input,"focus",i.open),nn(i._input,"click",i.open)):(i._input.removeEventListener("focus",i.open),i._input.removeEventListener("click",i.open))}]};function By(mt,Tt){var ni=[];if(mt instanceof Array)ni=mt.map(function(Ri){return i.parseDate(Ri,Tt)});else if(mt instanceof Date||"number"==typeof mt)ni=[i.parseDate(mt,Tt)];else if("string"==typeof mt)switch(i.config.mode){case"single":case"time":ni=[i.parseDate(mt,Tt)];break;case"multiple":ni=mt.split(i.config.conjunction).map(function(Ri){return i.parseDate(Ri,Tt)});break;case"range":ni=mt.split(i.l10n.rangeSeparator).map(function(Ri){return i.parseDate(Ri,Tt)})}else i.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(mt)));i.selectedDates=i.config.allowInvalidPreload?ni:ni.filter(function(Ri){return Ri instanceof Date&&cp(Ri,!1)}),"range"===i.config.mode&&i.selectedDates.sort(function(Ri,Cn){return Ri.getTime()-Cn.getTime()})}function Ny(mt){return mt.slice().map(function(Tt){return"string"==typeof Tt||"number"==typeof Tt||Tt instanceof Date?i.parseDate(Tt,void 0,!0):Tt&&"object"==typeof Tt&&Tt.from&&Tt.to?{from:i.parseDate(Tt.from,void 0),to:i.parseDate(Tt.to,void 0)}:Tt}).filter(function(Tt){return Tt})}function Yy(){i._positionElement=i.config.positionElement||i._input}function Eo(mt,Tt){if(void 0!==i.config){var ni=i.config[mt];if(void 0!==ni&&ni.length>0)for(var Ri=0;ni[Ri]&&Ri<ni.length;Ri++)ni[Ri](i.selectedDates,i.input.value,i,Tt);"onChange"===mt&&(i.input.dispatchEvent(qv("change")),i.input.dispatchEvent(qv("input")))}}function qv(mt){var Tt=document.createEvent("Event");return Tt.initEvent(mt,!0,!0),Tt}function Kv(mt){for(var Tt=0;Tt<i.selectedDates.length;Tt++){var ni=i.selectedDates[Tt];if(ni instanceof Date&&0===Pc(ni,mt))return""+Tt}return!1}function I_(){i.config.noCalendar||i.isMobile||!i.monthNav||(i.yearElements.forEach(function(mt,Tt){var ni=new Date(i.currentYear,i.currentMonth,1);ni.setMonth(i.currentMonth+Tt),i.config.showMonths>1||"static"===i.config.monthSelectorType?i.monthElements[Tt].textContent=C_(ni.getMonth(),i.config.shorthandCurrentMonth,i.l10n)+" ":i.monthsDropdownContainer.value=ni.getMonth().toString(),mt.value=ni.getFullYear().toString()}),i._hidePrevMonthArrow=void 0!==i.config.minDate&&(i.currentYear===i.config.minDate.getFullYear()?i.currentMonth<=i.config.minDate.getMonth():i.currentYear<i.config.minDate.getFullYear()),i._hideNextMonthArrow=void 0!==i.config.maxDate&&(i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth+1>i.config.maxDate.getMonth():i.currentYear>i.config.maxDate.getFullYear()))}function Jv(mt){var Tt=mt||(i.config.altInput?i.config.altFormat:i.config.dateFormat);return i.selectedDates.map(function(ni){return i.formatDate(ni,Tt)}).filter(function(ni,Ri,Cn){return"range"!==i.config.mode||i.config.enableTime||Cn.indexOf(ni)===Ri}).join("range"!==i.config.mode?i.config.conjunction:i.l10n.rangeSeparator)}function Dh(mt){void 0===mt&&(mt=!0),void 0!==i.mobileInput&&i.mobileFormatStr&&(i.mobileInput.value=void 0!==i.latestSelectedDateObj?i.formatDate(i.latestSelectedDateObj,i.mobileFormatStr):""),i.input.value=Jv(i.config.dateFormat),void 0!==i.altInput&&(i.altInput.value=Jv(i.config.altFormat)),!1!==mt&&Eo("onValueUpdate")}function Bb(mt){var Tt=Lc(mt),ni=i.prevMonthNav.contains(Tt),Ri=i.nextMonthNav.contains(Tt);ni||Ri?Wv(ni?-1:1):i.yearElements.indexOf(Tt)>=0?Tt.select():Tt.classList.contains("arrowUp")?i.changeYear(i.currentYear+1):Tt.classList.contains("arrowDown")&&i.changeYear(i.currentYear-1)}return function f(){i.element=i.input=v,i.isOpen=!1,function Mb(){var mt=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Tt=Ml(Ml({},JSON.parse(JSON.stringify(v.dataset||{}))),l),ni={};i.config.parseDate=Tt.parseDate,i.config.formatDate=Tt.formatDate,Object.defineProperty(i.config,"enable",{get:function(){return i.config._enable},set:function(Ar){i.config._enable=Ny(Ar)}}),Object.defineProperty(i.config,"disable",{get:function(){return i.config._disable},set:function(Ar){i.config._disable=Ny(Ar)}});var Ri="time"===Tt.mode;Tt.dateFormat||!Tt.enableTime&&!Ri||(ni.dateFormat=Tt.noCalendar||Ri?"H:i"+(Tt.enableSeconds?":S":""):(ga.defaultConfig.dateFormat||Cf.dateFormat)+" H:i"+(Tt.enableSeconds?":S":"")),Tt.altInput&&(Tt.enableTime||Ri)&&!Tt.altFormat&&(ni.altFormat=Tt.noCalendar||Ri?"h:i"+(Tt.enableSeconds?":S K":" K"):(ga.defaultConfig.altFormat||Cf.altFormat)+" h:i"+(Tt.enableSeconds?":S":"")+" K"),Object.defineProperty(i.config,"minDate",{get:function(){return i.config._minDate},set:Py("min")}),Object.defineProperty(i.config,"maxDate",{get:function(){return i.config._maxDate},set:Py("max")});var Hr=function(Ar){return function(js){i.config["min"===Ar?"_minTime":"_maxTime"]=i.parseDate(js,"H:i:S")}};Object.defineProperty(i.config,"minTime",{get:function(){return i.config._minTime},set:Hr("min")}),Object.defineProperty(i.config,"maxTime",{get:function(){return i.config._maxTime},set:Hr("max")}),"time"===Tt.mode&&(i.config.noCalendar=!0,i.config.enableTime=!0),Object.assign(i.config,ni,Tt);for(var er=0;er<mt.length;er++)i.config[mt[er]]=!0===i.config[mt[er]]||"true"===i.config[mt[er]];for(zv.filter(function(Ar){return void 0!==i.config[Ar]}).forEach(function(Ar){i.config[Ar]=Nv(i.config[Ar]||[]).map(H)}),i.isMobile=!i.config.disableMobile&&!i.config.inline&&"single"===i.config.mode&&!i.config.disable.length&&!i.config.enable&&!i.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),er=0;er<i.config.plugins.length;er++){var Zr=i.config.plugins[er](i)||{};for(var Xn in Zr)zv.indexOf(Xn)>-1?i.config[Xn]=Nv(Zr[Xn]).map(H).concat(i.config[Xn]):typeof Tt[Xn]>"u"&&(i.config[Xn]=Zr[Xn])}Tt.altInputClass||(i.config.altInputClass=Oy().className+" "+i.config.altInputClass),Eo("onParseConfig")}(),Ry(),function Ob(){i.input=Oy(),i.input?(i.input._type=i.input.type,i.input.type="text",i.input.classList.add("flatpickr-input"),i._input=i.input,i.config.altInput&&(i.altInput=Ss(i.input.nodeName,i.config.altInputClass),i._input=i.altInput,i.altInput.placeholder=i.input.placeholder,i.altInput.disabled=i.input.disabled,i.altInput.required=i.input.required,i.altInput.tabIndex=i.input.tabIndex,i.altInput.type="text",i.input.setAttribute("type","hidden"),!i.config.static&&i.input.parentNode&&i.input.parentNode.insertBefore(i.altInput,i.input.nextSibling)),i.config.allowInput||i._input.setAttribute("readonly","readonly"),Yy()):i.config.errorHandler(new Error("Invalid input element specified"))}(),function Pb(){i.selectedDates=[],i.now=i.parseDate(i.config.now)||new Date;var mt=i.config.defaultDate||("INPUT"!==i.input.nodeName&&"TEXTAREA"!==i.input.nodeName||!i.input.placeholder||i.input.value!==i.input.placeholder?i.input.value:null);mt&&By(mt,i.config.dateFormat),i._initialDate=i.selectedDates.length>0?i.selectedDates[0]:i.config.minDate&&i.config.minDate.getTime()>i.now.getTime()?i.config.minDate:i.config.maxDate&&i.config.maxDate.getTime()<i.now.getTime()?i.config.maxDate:i.now,i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth(),i.selectedDates.length>0&&(i.latestSelectedDateObj=i.selectedDates[0]),void 0!==i.config.minTime&&(i.config.minTime=i.parseDate(i.config.minTime,"H:i")),void 0!==i.config.maxTime&&(i.config.maxTime=i.parseDate(i.config.maxTime,"H:i")),i.minDateHasTime=!!i.config.minDate&&(i.config.minDate.getHours()>0||i.config.minDate.getMinutes()>0||i.config.minDate.getSeconds()>0),i.maxDateHasTime=!!i.config.maxDate&&(i.config.maxDate.getHours()>0||i.config.maxDate.getMinutes()>0||i.config.maxDate.getSeconds()>0)}(),function d(){i.utils={getDaysInMonth:function(mt,Tt){return void 0===mt&&(mt=i.currentMonth),void 0===Tt&&(Tt=i.currentYear),1===mt&&(Tt%4==0&&Tt%100!=0||Tt%400==0)?29:i.l10n.daysInMonth[mt]}}}(),i.isMobile||function Uv(){var mt=window.document.createDocumentFragment();if(i.calendarContainer=Ss("div","flatpickr-calendar"),i.calendarContainer.tabIndex=-1,!i.config.noCalendar){if(mt.appendChild(function yb(){return i.monthNav=Ss("div","flatpickr-months"),i.yearElements=[],i.monthElements=[],i.prevMonthNav=Ss("span","flatpickr-prev-month"),i.prevMonthNav.innerHTML=i.config.prevArrow,i.nextMonthNav=Ss("span","flatpickr-next-month"),i.nextMonthNav.innerHTML=i.config.nextArrow,Dy(),Object.defineProperty(i,"_hidePrevMonthArrow",{get:function(){return i.__hidePrevMonthArrow},set:function(mt){i.__hidePrevMonthArrow!==mt&&(Xl(i.prevMonthNav,"flatpickr-disabled",mt),i.__hidePrevMonthArrow=mt)}}),Object.defineProperty(i,"_hideNextMonthArrow",{get:function(){return i.__hideNextMonthArrow},set:function(mt){i.__hideNextMonthArrow!==mt&&(Xl(i.nextMonthNav,"flatpickr-disabled",mt),i.__hideNextMonthArrow=mt)}}),i.currentYearElement=i.yearElements[0],I_(),i.monthNav}()),i.innerContainer=Ss("div","flatpickr-innerContainer"),i.config.weekNumbers){var Tt=function bb(){i.calendarContainer.classList.add("hasWeeks");var mt=Ss("div","flatpickr-weekwrapper");mt.appendChild(Ss("span","flatpickr-weekday",i.l10n.weekAbbreviation));var Tt=Ss("div","flatpickr-weeks");return mt.appendChild(Tt),{weekWrapper:mt,weekNumbers:Tt}}(),ni=Tt.weekWrapper,Ri=Tt.weekNumbers;i.innerContainer.appendChild(ni),i.weekNumbers=Ri,i.weekWrapper=ni}i.rContainer=Ss("div","flatpickr-rContainer"),i.rContainer.appendChild(Iy()),i.daysContainer||(i.daysContainer=Ss("div","flatpickr-days"),i.daysContainer.tabIndex=-1),T_(),i.rContainer.appendChild(i.daysContainer),i.innerContainer.appendChild(i.rContainer),mt.appendChild(i.innerContainer)}i.config.enableTime&&mt.appendChild(function xb(){i.calendarContainer.classList.add("hasTime"),i.config.noCalendar&&i.calendarContainer.classList.add("noCalendar");var mt=Gv(i.config);i.timeContainer=Ss("div","flatpickr-time"),i.timeContainer.tabIndex=-1;var Tt=Ss("span","flatpickr-time-separator",":"),ni=w_("flatpickr-hour",{"aria-label":i.l10n.hourAriaLabel});i.hourElement=ni.getElementsByTagName("input")[0];var Ri=w_("flatpickr-minute",{"aria-label":i.l10n.minuteAriaLabel});if(i.minuteElement=Ri.getElementsByTagName("input")[0],i.hourElement.tabIndex=i.minuteElement.tabIndex=-1,i.hourElement.value=fc(i.latestSelectedDateObj?i.latestSelectedDateObj.getHours():i.config.time_24hr?mt.hours:function _t(mt){switch(mt%24){case 0:case 12:return 12;default:return mt%12}}(mt.hours)),i.minuteElement.value=fc(i.latestSelectedDateObj?i.latestSelectedDateObj.getMinutes():mt.minutes),i.hourElement.setAttribute("step",i.config.hourIncrement.toString()),i.minuteElement.setAttribute("step",i.config.minuteIncrement.toString()),i.hourElement.setAttribute("min",i.config.time_24hr?"0":"1"),i.hourElement.setAttribute("max",i.config.time_24hr?"23":"12"),i.hourElement.setAttribute("maxlength","2"),i.minuteElement.setAttribute("min","0"),i.minuteElement.setAttribute("max","59"),i.minuteElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(ni),i.timeContainer.appendChild(Tt),i.timeContainer.appendChild(Ri),i.config.time_24hr&&i.timeContainer.classList.add("time24hr"),i.config.enableSeconds){i.timeContainer.classList.add("hasSeconds");var Cn=w_("flatpickr-second");i.secondElement=Cn.getElementsByTagName("input")[0],i.secondElement.value=fc(i.latestSelectedDateObj?i.latestSelectedDateObj.getSeconds():mt.seconds),i.secondElement.setAttribute("step",i.minuteElement.getAttribute("step")),i.secondElement.setAttribute("min","0"),i.secondElement.setAttribute("max","59"),i.secondElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(Ss("span","flatpickr-time-separator",":")),i.timeContainer.appendChild(Cn)}return i.config.time_24hr||(i.amPM=Ss("span","flatpickr-am-pm",i.l10n.amPM[ou((i.latestSelectedDateObj?i.hourElement.value:i.config.defaultHour)>11)]),i.amPM.title=i.l10n.toggleTitle,i.amPM.tabIndex=-1,i.timeContainer.appendChild(i.amPM)),i.timeContainer}()),Xl(i.calendarContainer,"rangeMode","range"===i.config.mode),Xl(i.calendarContainer,"animate",!0===i.config.animate),Xl(i.calendarContainer,"multiMonth",i.config.showMonths>1),i.calendarContainer.appendChild(mt);var Cn=void 0!==i.config.appendTo&&void 0!==i.config.appendTo.nodeType;if((i.config.inline||i.config.static)&&(i.calendarContainer.classList.add(i.config.inline?"inline":"static"),i.config.inline&&(!Cn&&i.element.parentNode?i.element.parentNode.insertBefore(i.calendarContainer,i._input.nextSibling):void 0!==i.config.appendTo&&i.config.appendTo.appendChild(i.calendarContainer)),i.config.static)){var Nn=Ss("div","flatpickr-wrapper");i.element.parentNode&&i.element.parentNode.insertBefore(Nn,i.element),Nn.appendChild(i.element),i.altInput&&Nn.appendChild(i.altInput),Nn.appendChild(i.calendarContainer)}!i.config.static&&!i.config.inline&&(void 0!==i.config.appendTo?i.config.appendTo:window.document.body).appendChild(i.calendarContainer)}(),function $r(){if(i.config.wrap&&["open","close","toggle","clear"].forEach(function(ni){Array.prototype.forEach.call(i.element.querySelectorAll("[data-"+ni+"]"),function(Ri){return nn(Ri,"click",i[ni])})}),i.isMobile)!function Rb(){var mt=i.config.enableTime?i.config.noCalendar?"time":"datetime-local":"date";i.mobileInput=Ss("input",i.input.className+" flatpickr-mobile"),i.mobileInput.tabIndex=1,i.mobileInput.type=mt,i.mobileInput.disabled=i.input.disabled,i.mobileInput.required=i.input.required,i.mobileInput.placeholder=i.input.placeholder,i.mobileFormatStr="datetime-local"===mt?"Y-m-d\\TH:i:S":"date"===mt?"Y-m-d":"H:i:S",i.selectedDates.length>0&&(i.mobileInput.defaultValue=i.mobileInput.value=i.formatDate(i.selectedDates[0],i.mobileFormatStr)),i.config.minDate&&(i.mobileInput.min=i.formatDate(i.config.minDate,"Y-m-d")),i.config.maxDate&&(i.mobileInput.max=i.formatDate(i.config.maxDate,"Y-m-d")),i.input.getAttribute("step")&&(i.mobileInput.step=String(i.input.getAttribute("step"))),i.input.type="hidden",void 0!==i.altInput&&(i.altInput.type="hidden");try{i.input.parentNode&&i.input.parentNode.insertBefore(i.mobileInput,i.input.nextSibling)}catch{}nn(i.mobileInput,"change",function(Tt){i.setDate(Lc(Tt).value,!1,i.mobileFormatStr),Eo("onChange"),Eo("onClose")})}();else{var mt=Ty(Eb,50);if(i._debouncedChange=Ty(rr,cb),i.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&nn(i.daysContainer,"mouseover",function(ni){"range"===i.config.mode&&S_(Lc(ni))}),nn(i._input,"keydown",Ly),void 0!==i.calendarContainer&&nn(i.calendarContainer,"keydown",Ly),!i.config.inline&&!i.config.static&&nn(window,"resize",mt),void 0!==window.ontouchstart?nn(window.document,"touchstart",Xv):nn(window.document,"mousedown",Xv),nn(window.document,"focus",Xv,{capture:!0}),!0===i.config.clickOpens&&(nn(i._input,"focus",i.open),nn(i._input,"click",i.open)),void 0!==i.daysContainer&&(nn(i.monthNav,"click",Bb),nn(i.monthNav,["keyup","increment"],fn),nn(i.daysContainer,"click",Fy)),void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement){nn(i.timeContainer,["increment"],Te),nn(i.timeContainer,"blur",Te,{capture:!0}),nn(i.timeContainer,"click",Xu),nn([i.hourElement,i.minuteElement],["focus","click"],function(ni){return Lc(ni).select()}),void 0!==i.secondElement&&nn(i.secondElement,"focus",function(){return i.secondElement&&i.secondElement.select()}),void 0!==i.amPM&&nn(i.amPM,"click",function(ni){Te(ni)})}i.config.allowInput&&nn(i._input,"blur",kb)}}(),(i.selectedDates.length||i.config.noCalendar)&&(i.config.enableTime&&Ti(i.config.noCalendar?i.latestSelectedDateObj:void 0),Dh(!1)),ne();var mt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!i.isMobile&&mt&&M_(),Eo("onReady")}(),i}function Tf(v,l){for(var i=Array.prototype.slice.call(v).filter(function(H){return H instanceof HTMLElement}),d=[],f=0;f<i.length;f++){var O=i[f];try{if(null!==O.getAttribute("data-fp-omit"))continue;void 0!==O._flatpickr&&(O._flatpickr.destroy(),O._flatpickr=void 0),O._flatpickr=ub(O,l||{}),d.push(O._flatpickr)}catch(H){console.error(H)}}return 1===d.length?d[0]:d}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(v){return Tf(this,v)},HTMLElement.prototype.flatpickr=function(v){return Tf([this],v)});var ga=function(v,l){return"string"==typeof v?Tf(window.document.querySelectorAll(v),l):v instanceof Node?Tf([v],l):Tf(v,l)};ga.defaultConfig={},ga.l10ns={en:Ml({},Bv),default:Ml({},Bv)},ga.localize=function(v){ga.l10ns.default=Ml(Ml({},ga.l10ns.default),v)},ga.setDefaults=function(v){ga.defaultConfig=Ml(Ml({},ga.defaultConfig),v)},ga.parseDate=Vv({}),ga.formatDate=Ey({}),ga.compareDates=Pc,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(v){return Tf(this,v)}),Date.prototype.fp_incr=function(v){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof v?parseInt(v,10):v))},typeof window<"u"&&(window.flatpickr=ga);const hb=ga;let jv=(()=>{class v{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return v.\u0275fac=function(i){return new(i||v)},v.\u0275prov=e.wxM({token:v,factory:v.\u0275fac}),v})();const db={provide:Y.Y6,useExisting:(0,e.wd)(()=>pb),multi:!0};let pb=(()=>{class v{constructor(i,d,f){this.elm=i,this.defaults=d,this.renderer=f,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new e._w7,this.flatpickrChange=new e._w7,this.flatpickrValueUpdate=new e._w7,this.flatpickrOpen=new e._w7,this.flatpickrClose=new e._w7,this.flatpickrMonthChange=new e._w7,this.flatpickrYearChange=new e._w7,this.flatpickrDayCreate=new e._w7,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const i={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(d,f,O)=>{this.flatpickrChange.emit({selectedDates:d,dateString:f,instance:O})},onOpen:(d,f,O)=>{this.flatpickrOpen.emit({selectedDates:d,dateString:f,instance:O})},onClose:(d,f,O)=>{this.flatpickrClose.emit({selectedDates:d,dateString:f,instance:O})},onMonthChange:(d,f,O)=>{this.flatpickrMonthChange.emit({selectedDates:d,dateString:f,instance:O})},onYearChange:(d,f,O)=>{this.flatpickrYearChange.emit({selectedDates:d,dateString:f,instance:O})},onReady:(d,f,O)=>{this.flatpickrReady.emit({selectedDates:d,dateString:f,instance:O})},onValueUpdate:(d,f,O)=>{this.flatpickrValueUpdate.emit({selectedDates:d,dateString:f,instance:O})},onDayCreate:(d,f,O,H)=>{this.flatpickrDayCreate.emit({selectedDates:d,dateString:f,instance:O,dayElement:H})}};Object.keys(i).forEach(d=>{typeof i[d]>"u"&&(i[d]=typeof this.options[d]<"u"?this.options[d]:this.defaults[d])}),i.time_24hr=i.time24hr,i.altInputClass=(i.altInputClass||"")+" "+this.elm.nativeElement.className,i.enable||delete i.enable,this.instance=hb(this.elm.nativeElement,i),this.setDisabledState(this.isDisabled)}ngOnChanges(i){this.instance&&Object.keys(i).forEach(d=>{this.instance.set(d,this[d])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(i){let d=i;this.convertModelValue&&"range"===this.mode&&i&&(d=[i.from,i.to]),this.instance?this.instance.setDate(d):this.initialValue=d}registerOnChange(i){this.onChangeFn=i}registerOnTouched(i){this.onTouchedFn=i}setDisabledState(i){this.isDisabled=i,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const i=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof i)switch(this.mode){case"multiple":const d=i.split("; ").map(H=>this.instance.parseDate(H,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(d);break;case"range":const[f,O]=i.split(this.instance.l10n.rangeSeparator).map(H=>this.instance.parseDate(H,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:f,to:O});break;default:this.onChangeFn(this.instance.parseDate(i,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(i)}}return v.\u0275fac=function(i){return new(i||v)(e.GI1(e.GMv),e.GI1(jv),e.GI1(e.q87))},v.\u0275dir=e.Sc5({type:v,selectors:[["","mwlFlatpickr",""]],hostBindings:function(i,d){1&i&&e.qCj("blur",function(){return d.onTouchedFn()})("input",function(){return d.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[e.M5G([db]),e.SYr]}),v})();const My=new e.UbH("flatpickr defaults");function fb(v){const l=new jv;return Object.assign(l,v),l}let mb=(()=>{class v{static forRoot(i={}){return{ngModule:v,providers:[{provide:My,useValue:i},{provide:jv,useFactory:fb,deps:[My]}]}}}return v.\u0275fac=function(i){return new(i||v)},v.\u0275mod=e.a4G({type:v}),v.\u0275inj=e.s3X({}),v})(),gb=(()=>{class v{static#e=this.\u0275fac=function(d){return new(d||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({imports:[Ye.MD,_h.k,va,Ui.Uf.forRoot(),Y.y,Y.sl,et.rO.forRoot(),cn.f8.forRoot(),Wx.C.forRoot(),vs,Nd.S,k.as.forRoot(),Mx,sa,Zx.forRoot(),cm.gb,Y_,Tx,Gp,$x,M.SO.forRoot(),qx.iU.forRoot(),Dx,rb.forRoot(),Zp,mb.forRoot()]})}return v})()},968:(Qs,Lr,Ot)=>{"use strict";Ot.r(Lr),Ot.d(Lr,{PagesModule:()=>Ee});var A=Ot(1368),sn=Ot(1012),Re=Ot(4496);const e=[{path:"",loadChildren:()=>Promise.resolve().then(Ot.bind(Ot,3320)).then(Oe=>Oe.CustomPagesModule)},{path:"pages",loadChildren:()=>Ot.e(228).then(Ot.bind(Ot,4848)).then(Oe=>Oe.ExtrapagesModule)}];let Y=(()=>{class Oe{static#e=this.\u0275fac=function(et){return new(et||Oe)};static#t=this.\u0275mod=Re.a4G({type:Oe});static#i=this.\u0275inj=Re.s3X({imports:[sn.qQ.forChild(e),sn.qQ]})}return Oe})();var Ae=Ot(9280),ke=Ot(3320);let Ee=(()=>{class Oe{static#e=this.\u0275fac=function(et){return new(et||Oe)};static#t=this.\u0275mod=Re.a4G({type:Oe});static#i=this.\u0275inj=Re.s3X({imports:[A.MD,Y,Ae.k,ke.CustomPagesModule]})}return Oe})()},6708:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{O:()=>Re});var A=Ot(4496);function sn(e,Y){if(1&e&&(A.I0R(0,"li",6),A.OEk(1),A.C$Y()),2&e){const Ae=Y.$implicit;A.yG2(),A.cNF(Ae.label)}}let Re=(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(ke){return new(ke||e)};static#t=this.\u0275cmp=A.In1({type:e,selectors:[["app-breadcrumbs"]],inputs:{title:"title",breadcrumbItems:"breadcrumbItems"},decls:9,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item","active"],["class","breadcrumb-item active"]],template:function(ke,Ee){1&ke&&(A.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),A.OEk(4),A.C$Y(),A.I0R(5,"div",4)(6,"ol",5),A.c53(7,sn,2,1,"li",7,A.wJt),A.C$Y()()()()()),2&ke&&(A.yG2(4),A.cNF(Ee.title),A.yG2(3),A.oho(Ee.breadcrumbItems))}})}return e})()},9280:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{k:()=>Re});var A=Ot(1368),sn=Ot(4496);let Re=(()=>{class e{static#e=this.\u0275fac=function(ke){return new(ke||e)};static#t=this.\u0275mod=sn.a4G({type:e});static#i=this.\u0275inj=sn.s3X({imports:[A.MD]})}return e})()},2164:(Qs,Lr,Ot)=>{"use strict";var A;function sn(ue,n){var s=Object.keys(ue);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(ue);n&&(c=c.filter(function(g){return Object.getOwnPropertyDescriptor(ue,g).enumerable})),s.push.apply(s,c)}return s}function Re(ue){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?sn(Object(s),!0).forEach(function(c){Ee(ue,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(s)):sn(Object(s)).forEach(function(c){Object.defineProperty(ue,c,Object.getOwnPropertyDescriptor(s,c))})}return ue}function e(ue){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(ue)}function Y(ue,n){if(!(ue instanceof n))throw new TypeError("Cannot call a class as a function")}function Ae(ue,n){for(var s=0;s<n.length;s++){var c=n[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(ue,c.key,c)}}function ke(ue,n,s){return n&&Ae(ue.prototype,n),s&&Ae(ue,s),ue}function Ee(ue,n,s){return n in ue?Object.defineProperty(ue,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):ue[n]=s,ue}function Oe(ue,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");ue.prototype=Object.create(n&&n.prototype,{constructor:{value:ue,writable:!0,configurable:!0}}),n&&Xe(ue,n)}function Ye(ue){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(ue)}function Xe(ue,n){return(Xe=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s})(ue,n)}function et(ue){if(void 0===ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ue}function dt(ue){var n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var s,c=Ye(ue);if(n){var g=Ye(this).constructor;s=Reflect.construct(c,arguments,g)}else s=c.apply(this,arguments);return function(y,x){if(x&&("object"==typeof x||"function"==typeof x))return x;if(void 0!==x)throw new TypeError("Derived constructors may only return object or undefined");return et(y)}(this,s)}}function St(ue,n){return function(s){if(Array.isArray(s))return s}(ue)||function(s,c){var g=null==s?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(null!=g){var y,x,k=[],M=!0,R=!1;try{for(g=g.call(s);!(M=(y=g.next()).done)&&(k.push(y.value),!c||k.length!==c);M=!0);}catch(j){R=!0,x=j}finally{try{M||null==g.return||g.return()}finally{if(R)throw x}}return k}}(ue,n)||pt(ue,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(ue){return function(n){if(Array.isArray(n))return yt(n)}(ue)||function(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(ue)||pt(ue)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(ue,n){if(ue){if("string"==typeof ue)return yt(ue,n);var s=Object.prototype.toString.call(ue).slice(8,-1);return"Object"===s&&ue.constructor&&(s=ue.constructor.name),"Map"===s||"Set"===s?Array.from(ue):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?yt(ue,n):void 0}}function yt(ue,n){(null==n||n>ue.length)&&(n=ue.length);for(var s=0,c=new Array(n);s<n;s++)c[s]=ue[s];return c}function Qt(ue,n){var s=typeof Symbol<"u"&&ue[Symbol.iterator]||ue["@@iterator"];if(!s){if(Array.isArray(ue)||(s=pt(ue))||n&&ue&&"number"==typeof ue.length){s&&(ue=s);var c=0,g=function(){};return{s:g,n:function(){return c>=ue.length?{done:!0}:{done:!1,value:ue[c++]}},e:function(M){throw M},f:g}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y,x=!0,k=!1;return{s:function(){s=s.call(ue)},n:function(){var M=s.next();return x=M.done,M},e:function(M){k=!0,y=M},f:function(){try{x||null==s.return||s.return()}finally{if(k)throw y}}}}var Ve=function(){function ue(){Y(this,ue)}return ke(ue,[{key:"shadeRGBColor",value:function(n,s){var c=s.split(","),g=n<0?0:255,y=n<0?-1*n:n,x=parseInt(c[0].slice(4),10),k=parseInt(c[1],10),M=parseInt(c[2],10);return"rgb("+(Math.round((g-x)*y)+x)+","+(Math.round((g-k)*y)+k)+","+(Math.round((g-M)*y)+M)+")"}},{key:"shadeHexColor",value:function(n,s){var c=parseInt(s.slice(1),16),g=n<0?0:255,y=n<0?-1*n:n,x=c>>16,k=c>>8&255,M=255&c;return"#"+(16777216+65536*(Math.round((g-x)*y)+x)+256*(Math.round((g-k)*y)+k)+(Math.round((g-M)*y)+M)).toString(16).slice(1)}},{key:"shadeColor",value:function(n,s){return ue.isColorHex(s)?this.shadeHexColor(n,s):this.shadeRGBColor(n,s)}}],[{key:"bind",value:function(n,s){return function(){return n.apply(s,arguments)}}},{key:"isObject",value:function(n){return n&&"object"===e(n)&&!Array.isArray(n)&&null!=n}},{key:"is",value:function(n,s){return Object.prototype.toString.call(s)==="[object "+n+"]"}},{key:"listToArray",value:function(n){var s,c=[];for(s=0;s<n.length;s++)c[s]=n[s];return c}},{key:"extend",value:function(n,s){var c=this;"function"!=typeof Object.assign&&(Object.assign=function(y){if(null==y)throw new TypeError("Cannot convert undefined or null to object");for(var x=Object(y),k=1;k<arguments.length;k++){var M=arguments[k];if(null!=M)for(var R in M)M.hasOwnProperty(R)&&(x[R]=M[R])}return x});var g=Object.assign({},n);return this.isObject(n)&&this.isObject(s)&&Object.keys(s).forEach(function(y){c.isObject(s[y])&&y in n?g[y]=c.extend(n[y],s[y]):Object.assign(g,Ee({},y,s[y]))}),g}},{key:"extendArray",value:function(n,s){var c=[];return n.map(function(g){c.push(ue.extend(s,g))}),c}},{key:"monthMod",value:function(n){return n%12}},{key:"clone",value:function(n){if(ue.is("Array",n)){for(var s=[],c=0;c<n.length;c++)s[c]=this.clone(n[c]);return s}if(ue.is("Null",n))return null;if(ue.is("Date",n))return n;if("object"===e(n)){var g={};for(var y in n)n.hasOwnProperty(y)&&(g[y]=this.clone(n[y]));return g}return n}},{key:"log10",value:function(n){return Math.log(n)/Math.LN10}},{key:"roundToBase10",value:function(n){return Math.pow(10,Math.floor(Math.log10(n)))}},{key:"roundToBase",value:function(n,s){return Math.pow(s,Math.floor(Math.log(n)/Math.log(s)))}},{key:"parseNumber",value:function(n){return null===n?n:parseFloat(n)}},{key:"stripNumber",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(n)?n:parseFloat(n.toPrecision(s))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(n){var s=String(n).split(/[eE]/);if(1===s.length)return s[0];var c="",g=n<0?"-":"",y=s[0].replace(".",""),x=Number(s[1])+1;if(x<0){for(c=g+"0.";x++;)c+="0";return c+y.replace(/^-/,"")}for(x-=y.length;x--;)c+="0";return y+c}},{key:"getDimensions",value:function(n){var s=getComputedStyle(n,null),c=n.clientHeight,g=n.clientWidth;return c-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),[g-=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),c]}},{key:"getBoundingClientRect",value:function(n){var s=n.getBoundingClientRect();return{top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:n.clientWidth,height:n.clientHeight,x:s.left,y:s.top}}},{key:"getLargestStringFromArr",value:function(n){return n.reduce(function(s,c){return Array.isArray(c)&&(c=c.reduce(function(g,y){return g.length>y.length?g:y})),s.length>c.length?s:c},0)}},{key:"hexToRgba",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==n.substring(0,1)&&(n="#999999");var c=n.replace("#","");c=c.match(new RegExp("(.{"+c.length/3+"})","g"));for(var g=0;g<c.length;g++)c[g]=parseInt(1===c[g].length?c[g]+c[g]:c[g],16);return void 0!==s&&c.push(s),"rgba("+c.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(n){return parseFloat(n.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(n){return(n=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===n.length?"#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(n)}},{key:"getPolygonPos",value:function(n,s){for(var c=[],g=2*Math.PI/s,y=0;y<s;y++){var x={};x.x=n*Math.sin(y*g),x.y=-n*Math.cos(y*g),c.push(x)}return c}},{key:"polarToCartesian",value:function(n,s,c,g){var y=(g-90)*Math.PI/180;return{x:n+c*Math.cos(y),y:s+c*Math.sin(y)}}},{key:"escapeString",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return n.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,s)}},{key:"negToZero",value:function(n){return n<0?0:n}},{key:"moveIndexInArray",value:function(n,s,c){if(c>=n.length)for(var g=c-n.length+1;g--;)n.push(void 0);return n.splice(c,0,n.splice(s,1)[0]),n}},{key:"extractNumber",value:function(n){return parseFloat(n.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(n,s){for(;(n=n.parentElement)&&!n.classList.contains(s););return n}},{key:"setELstyles",value:function(n,s){for(var c in s)s.hasOwnProperty(c)&&(n.style.key=s[c])}},{key:"isNumber",value:function(n){return!isNaN(n)&&parseFloat(Number(n))===n&&!isNaN(parseInt(n,10))}},{key:"isFloat",value:function(n){return Number(n)===n&&n%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var n=window.navigator.userAgent,s=n.indexOf("MSIE ");if(s>0)return parseInt(n.substring(s+5,n.indexOf(".",s)),10);if(n.indexOf("Trident/")>0){var c=n.indexOf("rv:");return parseInt(n.substring(c+3,n.indexOf(".",c)),10)}var g=n.indexOf("Edge/");return g>0&&parseInt(n.substring(g+5,n.indexOf(".",g)),10)}},{key:"getGCD",value:function(n,s){var g=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(n,s))));for(n=Math.round(Math.abs(n)*g),s=Math.round(Math.abs(s)*g);s;){var y=s;s=n%s,n=y}return n/g}},{key:"getPrimeFactors",value:function(n){for(var s=[],c=2;n>=2;)n%c==0?(s.push(c),n/=c):c++;return s}},{key:"mod",value:function(n,s){var g=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(n,s))));return(n=Math.round(Math.abs(n)*g))%(s=Math.round(Math.abs(s)*g))/g}}]),ue}(),Zt=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.setEasingFunctions()}return ke(ue,[{key:"setEasingFunctions",value:function(){var n;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":n="-";break;case"easein":n="<";break;case"easeout":n=">";break;case"easeinout":default:n="<>";break;case"swing":n=function(s){var c=1.70158;return(s-=1)*s*((c+1)*s+c)+1};break;case"bounce":n=function(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375};break;case"elastic":n=function(s){return s===!!s?s:Math.pow(2,-10*s)*Math.sin((s-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=n}}},{key:"animateLine",value:function(n,s,c,g){n.attr(s).animate(g).attr(c)}},{key:"animateMarker",value:function(n,s,c,g,y,x){s||(s=0),n.attr({r:s,width:s,height:s}).animate(g,y).attr({r:c,width:c.width,height:c.height}).afterAll(function(){x()})}},{key:"animateCircle",value:function(n,s,c,g,y){n.attr({r:s.r,cx:s.cx,cy:s.cy}).animate(g,y).attr({r:c.r,cx:c.cx,cy:c.cy})}},{key:"animateRect",value:function(n,s,c,g,y){n.attr(s).animate(g).attr(c).afterAll(function(){return y()})}},{key:"animatePathsGradually",value:function(n){var j=this.w,U=0;j.config.chart.animations.animateGradually.enabled&&(U=j.config.chart.animations.animateGradually.delay),j.config.chart.animations.dynamicAnimation.enabled&&j.globals.dataChanged&&"bar"!==j.config.chart.type&&(U=0),this.morphSVG(n.el,n.realIndex,n.j,"line"!==j.config.chart.type||j.globals.comboCharts?n.fill:"stroke",n.pathFrom,n.pathTo,n.speed,n.delay*U)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(n){var s=n.el;s.classList.remove("apexcharts-element-hidden"),s.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(n){var s=this.w;s.globals.animationEnded||(s.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof s.config.chart.events.animationEnd&&s.config.chart.events.animationEnd(this.ctx,{el:n,w:s}))}},{key:"morphSVG",value:function(n,s,c,g,y,x,k,M){var R=this,j=this.w;y||(y=n.attr("pathFrom")),x||(x=n.attr("pathTo"));var U=function(X){return"radar"===j.config.chart.type&&(k=1),"M 0 ".concat(j.globals.gridHeight)};(!y||y.indexOf("undefined")>-1||y.indexOf("NaN")>-1)&&(y=U()),(!x||x.indexOf("undefined")>-1||x.indexOf("NaN")>-1)&&(x=U()),j.globals.shouldAnimate||(k=1),n.plot(y).animate(1,j.globals.easing,M).plot(y).animate(k,j.globals.easing,M).plot(x).afterAll(function(){Ve.isNumber(c)?c===j.globals.series[j.globals.maxValsInArrayIndex].length-2&&j.globals.shouldAnimate&&R.animationCompleted(n):"none"!==g&&j.globals.shouldAnimate&&(!j.globals.comboCharts&&s===j.globals.series.length-1||j.globals.comboCharts)&&R.animationCompleted(n),R.showDelayedElements()})}}]),ue}(),ei=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"getDefaultFilter",value:function(n,s){var c=this.w;n.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==c.config.states.normal.filter?this.applyFilter(n,s,c.config.states.normal.filter.type,c.config.states.normal.filter.value):c.config.chart.dropShadow.enabled&&this.dropShadow(n,c.config.chart.dropShadow,s)}},{key:"addNormalFilter",value:function(n,s){var c=this.w;c.config.chart.dropShadow.enabled&&!n.node.classList.contains("apexcharts-marker")&&this.dropShadow(n,c.config.chart.dropShadow,s)}},{key:"addLightenFilter",value:function(n,s,c){var g=this,y=this.w,x=c.intensity;n.unfilter(!0),new window.SVG.Filter,n.filter(function(k){var M=y.config.chart.dropShadow;(M.enabled?g.addShadow(k,s,M):k).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:x}})}),n.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(n.filterer.node)}},{key:"addDarkenFilter",value:function(n,s,c){var g=this,y=this.w,x=c.intensity;n.unfilter(!0),new window.SVG.Filter,n.filter(function(k){var M=y.config.chart.dropShadow;(M.enabled?g.addShadow(k,s,M):k).componentTransfer({rgb:{type:"linear",slope:x}})}),n.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(n.filterer.node)}},{key:"applyFilter",value:function(n,s,c){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(c){case"none":this.addNormalFilter(n,s);break;case"lighten":this.addLightenFilter(n,s,{intensity:g});break;case"darken":this.addDarkenFilter(n,s,{intensity:g})}}},{key:"addShadow",value:function(n,s,c){var g,y=this.w,x=c.blur,k=c.top,M=c.left,R=c.color,j=c.opacity;if((null===(g=y.config.chart.dropShadow.enabledOnSeries)||void 0===g?void 0:g.length)>0&&-1===y.config.chart.dropShadow.enabledOnSeries.indexOf(s))return n;var U=n.flood(Array.isArray(R)?R[s]:R,j).composite(n.sourceAlpha,"in").offset(M,k).gaussianBlur(x).merge(n.source);return n.blend(n.source,U)}},{key:"dropShadow",value:function(n,s){var c,g,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=s.top,k=s.left,M=s.blur,R=s.color,j=s.opacity,U=s.noUserSpaceOnUse,X=this.w;return n.unfilter(!0),Ve.isIE()&&"radialBar"===X.config.chart.type||(null===(c=X.config.chart.dropShadow.enabledOnSeries)||void 0===c?void 0:c.length)>0&&-1===(null===(g=X.config.chart.dropShadow.enabledOnSeries)||void 0===g?void 0:g.indexOf(y))||(R=Array.isArray(R)?R[y]:R,n.filter(function(ee){var ae;ae=Ve.isSafari()||Ve.isFirefox()||Ve.isIE()?ee.flood(R,j).composite(ee.sourceAlpha,"in").offset(k,x).gaussianBlur(M):ee.flood(R,j).composite(ee.sourceAlpha,"in").offset(k,x).gaussianBlur(M).merge(ee.source),ee.blend(ee.source,ae)}),U||n.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(n.filterer.node)),n}},{key:"setSelectionFilter",value:function(n,s,c){var g=this.w;if(void 0!==g.globals.selectedDataPoints[s]&&g.globals.selectedDataPoints[s].indexOf(c)>-1){n.node.setAttribute("selected",!0);var y=g.config.states.active.filter;"none"!==y&&this.applyFilter(n,s,y.type,y.value)}}},{key:"_scaleFilterSize",value:function(n){!function(s){for(var c in s)s.hasOwnProperty(c)&&n.setAttribute(c,s[c])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),ue}(),rt=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"roundPathCorners",value:function(n,s){function c($e,wt,kt){var Wt=wt.x-$e.x,hi=wt.y-$e.y,yi=Math.sqrt(Wt*Wt+hi*hi);return g($e,wt,Math.min(1,kt/yi))}function g($e,wt,kt){return{x:$e.x+(wt.x-$e.x)*kt,y:$e.y+(wt.y-$e.y)*kt}}function y($e,wt){$e.length>2&&($e[$e.length-2]=wt.x,$e[$e.length-1]=wt.y)}function x($e){return{x:parseFloat($e[$e.length-2]),y:parseFloat($e[$e.length-1])}}n.indexOf("NaN")>-1&&(n="");var k=n.split(/[,\s]/).reduce(function($e,wt){var kt=wt.match("([a-zA-Z])(.+)");return kt?($e.push(kt[1]),$e.push(kt[2])):$e.push(wt),$e},[]).reduce(function($e,wt){return parseFloat(wt)==wt&&$e.length?$e[$e.length-1].push(wt):$e.push([wt]),$e},[]),M=[];if(k.length>1){var R=x(k[0]),j=null;"Z"==k[k.length-1][0]&&k[0].length>2&&(k[k.length-1]=j=["L",R.x,R.y]),M.push(k[0]);for(var U=1;U<k.length;U++){var X=M[M.length-1],ee=k[U],ae=ee==j?k[1]:k[U+1];if(ae&&X&&X.length>2&&"L"==ee[0]&&ae.length>2&&"L"==ae[0]){var de,ve,he=x(X),be=x(ee),F=x(ae);de=c(be,he,s),ve=c(be,F,s),y(ee,de),ee.origPoint=be,M.push(ee);var K=g(de,be,.5),ce=g(be,ve,.5),_e=["C",K.x,K.y,ce.x,ce.y,ve.x,ve.y];_e.origPoint=be,M.push(_e)}else M.push(ee)}if(j){var Me=x(M[M.length-1]);M.push(["Z"]),y(M[0],Me)}}else M=k;return M.reduce(function($e,wt){return $e+wt.join(" ")+" "},"")}},{key:"drawLine",value:function(n,s,c,g){var y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,k=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,M=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:n,y1:s,x2:c,y2:g,stroke:y,"stroke-dasharray":x,"stroke-width":k,"stroke-linecap":M})}},{key:"drawRect",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",k=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,M=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,R=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,j=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,U=this.w.globals.dom.Paper.rect();return U.attr({x:n,y:s,width:c>0?c:0,height:g>0?g:0,rx:y,ry:y,opacity:k,"stroke-width":null!==M?M:0,stroke:null!==R?R:"none","stroke-dasharray":j}),U.node.setAttribute("fill",x),U}},{key:"drawPolygon",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(n).attr({fill:g,stroke:s,"stroke-width":c})}},{key:"drawCircle",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n<0&&(n=0);var c=this.w.globals.dom.Paper.circle(2*n);return null!==s&&c.attr(s),c}},{key:"drawPath",value:function(n){var s=n.d,c=void 0===s?"":s,g=n.stroke,y=void 0===g?"#a8a8a8":g,x=n.strokeWidth,k=void 0===x?1:x,M=n.fill,R=n.fillOpacity,j=void 0===R?1:R,U=n.strokeOpacity,X=void 0===U?1:U,ee=n.classes,ae=n.strokeLinecap,de=void 0===ae?null:ae,ve=n.strokeDashArray,he=void 0===ve?0:ve,be=this.w;return null===de&&(de=be.config.stroke.lineCap),(c.indexOf("undefined")>-1||c.indexOf("NaN")>-1)&&(c="M 0 ".concat(be.globals.gridHeight)),be.globals.dom.Paper.path(c).attr({fill:M,"fill-opacity":j,stroke:y,"stroke-opacity":X,"stroke-linecap":de,"stroke-width":k,"stroke-dasharray":he,class:ee})}},{key:"group",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=this.w.globals.dom.Paper.group();return null!==n&&s.attr(n),s}},{key:"move",value:function(n,s){return["M",n,s].join(" ")}},{key:"line",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=null;return null===c?g=[" L",n,s].join(" "):"H"===c?g=[" H",n].join(" "):"V"===c&&(g=[" V",s].join(" ")),g}},{key:"curve",value:function(n,s,c,g,y,x){return["C",n,s,c,g,y,x].join(" ")}},{key:"quadraticCurve",value:function(n,s,c,g){return["Q",n,s,c,g].join(" ")}},{key:"arc",value:function(n,s,c,g,y,x,k){var M="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(M="a"),[M,n,s,c,g,y,x,k].join(" ")}},{key:"renderPaths",value:function(n){var s,c=n.j,g=n.realIndex,y=n.pathFrom,x=n.pathTo,k=n.stroke,M=n.strokeWidth,R=n.strokeLinecap,j=n.fill,U=n.animationDelay,X=n.initialSpeed,ee=n.dataChangeSpeed,ae=n.className,de=n.shouldClipToGrid,ve=void 0===de||de,he=n.bindEventsOnPaths,be=void 0===he||he,F=n.drawShadow,K=void 0===F||F,ce=this.w,_e=new ei(this.ctx),Me=new Zt(this.ctx),$e=this.w.config.chart.animations.enabled,wt=$e&&this.w.config.chart.animations.dynamicAnimation.enabled,kt=!!($e&&!ce.globals.resized||wt&&ce.globals.dataChanged&&ce.globals.shouldAnimate);kt?s=y:(s=x,ce.globals.animationEnded=!0);var hi,Wt=ce.config.stroke.dashArray;hi=Array.isArray(Wt)?Wt[g]:ce.config.stroke.dashArray;var yi=this.drawPath({d:s,stroke:k,strokeWidth:M,fill:j,fillOpacity:1,classes:ae,strokeLinecap:R,strokeDashArray:hi});yi.attr("index",g),ve&&yi.attr({"clip-path":"url(#gridRectMask".concat(ce.globals.cuid,")")}),"none"!==ce.config.states.normal.filter.type?_e.getDefaultFilter(yi,g):ce.config.chart.dropShadow.enabled&&K&&_e.dropShadow(yi,ce.config.chart.dropShadow,g),be&&(yi.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,yi)),yi.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,yi)),yi.node.addEventListener("mousedown",this.pathMouseDown.bind(this,yi))),yi.attr({pathTo:x,pathFrom:y});var gn={el:yi,j:c,realIndex:g,pathFrom:y,pathTo:x,fill:j,strokeWidth:M,delay:U};return!$e||ce.globals.resized||ce.globals.dataChanged?!ce.globals.resized&&ce.globals.dataChanged||Me.showDelayedElements():Me.animatePathsGradually(Re(Re({},gn),{},{speed:X})),ce.globals.dataChanged&&wt&&kt&&Me.animatePathsGradually(Re(Re({},gn),{},{speed:ee})),yi}},{key:"drawPattern",value:function(n,s,c){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(s,c,function(x){"horizontalLines"===n?x.line(0,0,c,0).stroke({color:g,width:y+1}):"verticalLines"===n?x.line(0,0,0,s).stroke({color:g,width:y+1}):"slantedLines"===n?x.line(0,0,s,c).stroke({color:g,width:y}):"squares"===n?x.rect(s,c).fill("none").stroke({color:g,width:y}):"circles"===n&&x.circle(s).fill("none").stroke({color:g,width:y})})}},{key:"drawGradient",value:function(n,s,c,g,y){var x,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,j=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,U=this.w;s.length<9&&0===s.indexOf("#")&&(s=Ve.hexToRgba(s,g)),c.length<9&&0===c.indexOf("#")&&(c=Ve.hexToRgba(c,y));var X=0,ee=1,ae=1,de=null;null!==M&&(X=void 0!==M[0]?M[0]/100:0,ee=void 0!==M[1]?M[1]/100:1,ae=void 0!==M[2]?M[2]/100:1,de=void 0!==M[3]?M[3]/100:null);var ve=!("donut"!==U.config.chart.type&&"pie"!==U.config.chart.type&&"polarArea"!==U.config.chart.type&&"bubble"!==U.config.chart.type);return x=U.globals.dom.Paper.gradient(ve?"radial":"linear",null===R||0===R.length?function(F){F.at(X,s,g),F.at(ee,c,y),F.at(ae,c,y),null!==de&&F.at(de,s,g)}:function(F){(Array.isArray(R[j])?R[j]:R).forEach(function(K){F.at(K.offset/100,K.color,K.opacity)})}),ve?x.attr("bubble"!==U.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:U.globals.gridWidth/2,cy:U.globals.gridHeight/2,r:k}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===n?x.from(0,0).to(0,1):"diagonal"===n?x.from(0,0).to(1,1):"horizontal"===n?x.from(0,1).to(1,1):"diagonal2"===n&&x.from(1,0).to(0,1),x}},{key:"getTextBasedOnMaxWidth",value:function(n){var s=n.text,c=n.maxWidth,x=this.getTextRects(s,n.fontSize,n.fontFamily),M=Math.floor(c/(x.width/s.length));return c<x.width?s.slice(0,M-3)+"...":s}},{key:"drawText",value:function(n){var s=this,c=n.x,g=n.y,y=n.text,x=n.textAnchor,k=n.fontSize,M=n.fontFamily,R=n.fontWeight,j=n.foreColor,U=n.opacity,X=n.maxWidth,ee=n.cssClass,ae=void 0===ee?"":ee,de=n.isPlainText,ve=void 0===de||de,he=n.dominantBaseline,be=void 0===he?"auto":he,F=this.w;void 0===y&&(y="");var K=y;x||(x="start"),j&&j.length||(j=F.config.chart.foreColor),R=R||"regular";var ce,_e={maxWidth:X,fontSize:k=k||"11px",fontFamily:M=M||F.config.chart.fontFamily};return Array.isArray(y)?ce=F.globals.dom.Paper.text(function(Me){for(var $e=0;$e<y.length;$e++)K=y[$e],X&&(K=s.getTextBasedOnMaxWidth(Re({text:y[$e]},_e))),0===$e?Me.tspan(K):Me.tspan(K).newLine()}):(X&&(K=this.getTextBasedOnMaxWidth(Re({text:y},_e))),ce=ve?F.globals.dom.Paper.plain(y):F.globals.dom.Paper.text(function(Me){return Me.tspan(K)})),ce.attr({x:c,y:g,"text-anchor":x,"dominant-baseline":be,"font-size":k,"font-family":M,"font-weight":R,fill:j,class:"apexcharts-text "+ae}),ce.node.style.fontFamily=M,ce.node.style.opacity=U,ce}},{key:"createGroupWithAttributes",value:function(n,s,c,g){var y=this.group();return c.forEach(function(x){return y.add(x)}),y.attr({class:g.class?g.class:"",cy:s,cx:n}),y}},{key:"drawPlus",value:function(n,s,c,g){var y=c/2,x=this.drawLine(n,s-y,n,s+y,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap),k=this.drawLine(n-y,s,n+y,s,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap);return this.createGroupWithAttributes(n,s,[x,k],g)}},{key:"drawX",value:function(n,s,c,g){var y=c/2,x=this.drawLine(n-y,s-y,n+y,s+y,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap),k=this.drawLine(n-y,s+y,n+y,s-y,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap);return this.createGroupWithAttributes(n,s,[x,k],g)}},{key:"drawMarker",value:function(n,s,c){n=n||0;var g=c.pSize||0,y=null;if("X"===c?.shape||"x"===c?.shape)y=this.drawX(n,s,g,c);else if("plus"===c?.shape||"+"===c?.shape)y=this.drawPlus(n,s,g,c);else if("square"===c.shape||"rect"===c.shape){var x=void 0===c.pRadius?g/2:c.pRadius;null!==s&&g||(g=0,x=0);var k=1.2*g+x,M=this.drawRect(k,k,k,k,x);M.attr({x:n-k/2,y:s-k/2,cx:n,cy:s,class:c.class?c.class:"",fill:c.pointFillColor,"fill-opacity":c.pointFillOpacity?c.pointFillOpacity:1,stroke:c.pointStrokeColor,"stroke-width":c.pointStrokeWidth?c.pointStrokeWidth:0,"stroke-opacity":c.pointStrokeOpacity?c.pointStrokeOpacity:1}),y=M}else"circle"!==c.shape&&c.shape||(Ve.isNumber(s)||(g=0,s=0),y=this.drawCircle(g,{cx:n,cy:s,class:c.class?c.class:"",stroke:c.pointStrokeColor,fill:c.pointFillColor,"fill-opacity":c.pointFillOpacity?c.pointFillOpacity:1,"stroke-width":c.pointStrokeWidth?c.pointStrokeWidth:0,"stroke-opacity":c.pointStrokeOpacity?c.pointStrokeOpacity:1}));return y}},{key:"pathMouseEnter",value:function(n,s){var c=this.w,g=new ei(this.ctx),y=parseInt(n.node.getAttribute("index"),10),x=parseInt(n.node.getAttribute("j"),10);if("function"==typeof c.config.chart.events.dataPointMouseEnter&&c.config.chart.events.dataPointMouseEnter(s,this.ctx,{seriesIndex:y,dataPointIndex:x,w:c}),this.ctx.events.fireEvent("dataPointMouseEnter",[s,this.ctx,{seriesIndex:y,dataPointIndex:x,w:c}]),("none"===c.config.states.active.filter.type||"true"!==n.node.getAttribute("selected"))&&"none"!==c.config.states.hover.filter.type&&!c.globals.isTouchDevice){var k=c.config.states.hover.filter;g.applyFilter(n,y,k.type,k.value)}}},{key:"pathMouseLeave",value:function(n,s){var c=this.w,g=new ei(this.ctx),y=parseInt(n.node.getAttribute("index"),10),x=parseInt(n.node.getAttribute("j"),10);"function"==typeof c.config.chart.events.dataPointMouseLeave&&c.config.chart.events.dataPointMouseLeave(s,this.ctx,{seriesIndex:y,dataPointIndex:x,w:c}),this.ctx.events.fireEvent("dataPointMouseLeave",[s,this.ctx,{seriesIndex:y,dataPointIndex:x,w:c}]),"none"!==c.config.states.active.filter.type&&"true"===n.node.getAttribute("selected")||"none"!==c.config.states.hover.filter.type&&g.getDefaultFilter(n,y)}},{key:"pathMouseDown",value:function(n,s){var c=this.w,g=new ei(this.ctx),y=parseInt(n.node.getAttribute("index"),10),x=parseInt(n.node.getAttribute("j"),10),k="false";if("true"===n.node.getAttribute("selected")){if(n.node.setAttribute("selected","false"),c.globals.selectedDataPoints[y].indexOf(x)>-1){var M=c.globals.selectedDataPoints[y].indexOf(x);c.globals.selectedDataPoints[y].splice(M,1)}}else{if(!c.config.states.active.allowMultipleDataPointsSelection&&c.globals.selectedDataPoints.length>0){c.globals.selectedDataPoints=[];var R=c.globals.dom.Paper.select(".apexcharts-series path").members,j=c.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,U=function(ae){Array.prototype.forEach.call(ae,function(de){de.node.setAttribute("selected","false"),g.getDefaultFilter(de,y)})};U(R),U(j)}n.node.setAttribute("selected","true"),k="true",void 0===c.globals.selectedDataPoints[y]&&(c.globals.selectedDataPoints[y]=[]),c.globals.selectedDataPoints[y].push(x)}if("true"===k){var X=c.config.states.active.filter;if("none"!==X)g.applyFilter(n,y,X.type,X.value);else if("none"!==c.config.states.hover.filter&&!c.globals.isTouchDevice){var ee=c.config.states.hover.filter;g.applyFilter(n,y,ee.type,ee.value)}}else"none"!==c.config.states.active.filter.type&&("none"===c.config.states.hover.filter.type||c.globals.isTouchDevice?g.getDefaultFilter(n,y):g.applyFilter(n,y,(ee=c.config.states.hover.filter).type,ee.value));"function"==typeof c.config.chart.events.dataPointSelection&&c.config.chart.events.dataPointSelection(s,this.ctx,{selectedDataPoints:c.globals.selectedDataPoints,seriesIndex:y,dataPointIndex:x,w:c}),s&&this.ctx.events.fireEvent("dataPointSelection",[s,this.ctx,{selectedDataPoints:c.globals.selectedDataPoints,seriesIndex:y,dataPointIndex:x,w:c}])}},{key:"rotateAroundCenter",value:function(n){var s={};return n&&"function"==typeof n.getBBox&&(s=n.getBBox()),{x:s.x+s.width/2,y:s.y+s.height/2}}},{key:"getTextRects",value:function(n,s,c,g){var y=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],x=this.w,k=this.drawText({x:-200,y:-200,text:n,textAnchor:"start",fontSize:s,fontFamily:c,foreColor:"#fff",opacity:0});g&&k.attr("transform",g),x.globals.dom.Paper.add(k);var M=k.bbox();return y||(M=k.node.getBoundingClientRect()),k.remove(),{width:M.width,height:M.height}}},{key:"placeTextWithEllipsis",value:function(n,s,c){if("function"==typeof n.getComputedTextLength&&(n.textContent=s,s.length>0&&n.getComputedTextLength()>=c/1.1)){for(var g=s.length-3;g>0;g-=3)if(n.getSubStringLength(0,g)<=c/1.1)return void(n.textContent=s.substring(0,g)+"...");n.textContent="."}}}],[{key:"setAttrs",value:function(n,s){for(var c in s)s.hasOwnProperty(c)&&n.setAttribute(c,s[c])}}]),ue}(),Kt=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"getStackedSeriesTotals",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=this.w,c=[];if(0===s.globals.series.length)return c;for(var g=0;g<s.globals.series[s.globals.maxValsInArrayIndex].length;g++){for(var y=0,x=0;x<s.globals.series.length;x++)void 0!==s.globals.series[x][g]&&-1===n.indexOf(x)&&(y+=s.globals.series[x][g]);c.push(y)}return c}},{key:"getSeriesTotalByIndex",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===n?this.w.config.series.reduce(function(s,c){return s+c},0):this.w.globals.series[n].reduce(function(s,c){return s+c},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var n=this,s=this.w,c=[];return s.globals.seriesGroups.forEach(function(g){var y=[];s.config.series.forEach(function(k,M){g.indexOf(k.name)>-1&&y.push(M)});var x=s.globals.series.map(function(k,M){return-1===y.indexOf(M)?M:-1}).filter(function(k){return-1!==k});c.push(n.getStackedSeriesTotals(x))}),c}},{key:"isSeriesNull",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===n?this.w.config.series.filter(function(s){return null!==s}):this.w.config.series[n].data.filter(function(s){return null!==s})).length}},{key:"seriesHaveSameValues",value:function(n){return this.w.globals.series[n].every(function(s,c,g){return s===g[0]})}},{key:"getCategoryLabels",value:function(n){var s=this.w,c=n.slice();return s.config.xaxis.convertedCatToNumeric&&(c=n.map(function(g,y){return s.config.xaxis.labels.formatter(g-s.globals.minX+1)})),c}},{key:"getLargestSeries",value:function(){var n=this.w;n.globals.maxValsInArrayIndex=n.globals.series.map(function(s){return s.length}).indexOf(Math.max.apply(Math,n.globals.series.map(function(s){return s.length})))}},{key:"getLargestMarkerSize",value:function(){var n=this.w,s=0;return n.globals.markers.size.forEach(function(c){s=Math.max(s,c)}),n.config.markers.discrete&&n.config.markers.discrete.length&&n.config.markers.discrete.forEach(function(c){s=Math.max(s,c.size)}),s>0&&(s+=n.config.markers.hover.sizeOffset+1),n.globals.markers.largestSize=s,s}},{key:"getSeriesTotals",value:function(){var n=this.w;n.globals.seriesTotals=n.globals.series.map(function(s,c){var g=0;if(Array.isArray(s))for(var y=0;y<s.length;y++)g+=s[y];else g+=s;return g})}},{key:"getSeriesTotalsXRange",value:function(n,s){var c=this.w;return c.globals.series.map(function(g,y){for(var x=0,k=0;k<g.length;k++)c.globals.seriesX[y][k]>n&&c.globals.seriesX[y][k]<s&&(x+=g[k]);return x})}},{key:"getPercentSeries",value:function(){var n=this.w;n.globals.seriesPercent=n.globals.series.map(function(s,c){var g=[];if(Array.isArray(s))for(var y=0;y<s.length;y++){var x=n.globals.stackedSeriesTotals[y],k=0;x&&(k=100*s[y]/x),g.push(k)}else{var M=100*s/n.globals.seriesTotals.reduce(function(R,j){return R+j},0);g.push(M)}return g})}},{key:"getCalculatedRatios",value:function(){var n,s,c,g=this.w.globals,y=[],x=0,k=[],M=.1,R=0;if(g.yRange=[],g.isMultipleYAxis)for(var j=0;j<g.minYArr.length;j++)g.yRange.push(Math.abs(g.minYArr[j]-g.maxYArr[j])),k.push(0);else g.yRange.push(Math.abs(g.minY-g.maxY));g.xRange=Math.abs(g.maxX-g.minX),g.zRange=Math.abs(g.maxZ-g.minZ);for(var U=0;U<g.yRange.length;U++)y.push(g.yRange[U]/g.gridHeight);if(s=g.xRange/g.gridWidth,n=g.yRange/g.gridWidth,c=g.xRange/g.gridHeight,(x=g.zRange/g.gridHeight*16)||(x=1),g.minY!==Number.MIN_VALUE&&0!==Math.abs(g.minY)&&(g.hasNegs=!0),g.isMultipleYAxis){k=[];for(var X=0;X<y.length;X++)k.push(-g.minYArr[X]/y[X])}else k.push(-g.minY/y[0]),g.minY!==Number.MIN_VALUE&&0!==Math.abs(g.minY)&&(M=-g.minY/n,R=g.minX/s);return{yRatio:y,invertedYRatio:n,zRatio:x,xRatio:s,invertedXRatio:c,baseLineInvertedY:M,baseLineY:k,baseLineX:R}}},{key:"getLogSeries",value:function(n){var s=this,c=this.w;return c.globals.seriesLog=n.map(function(g,y){return c.config.yaxis[y]&&c.config.yaxis[y].logarithmic?g.map(function(x){return null===x?null:s.getLogVal(c.config.yaxis[y].logBase,x,y)}):g}),c.globals.invalidLogScale?n:c.globals.seriesLog}},{key:"getBaseLog",value:function(n,s){return Math.log(s)/Math.log(n)}},{key:"getLogVal",value:function(n,s,c){if(0===s)return 0;var g=this.w,y=0===g.globals.minYArr[c]?-1:this.getBaseLog(n,g.globals.minYArr[c]),x=(0===g.globals.maxYArr[c]?0:this.getBaseLog(n,g.globals.maxYArr[c]))-y;return s<1?s/x:(this.getBaseLog(n,s)-y)/x}},{key:"getLogYRatios",value:function(n){var s=this,c=this.w,g=this.w.globals;return g.yLogRatio=n.slice(),g.logYRange=g.yRange.map(function(y,x){if(c.config.yaxis[x]&&s.w.config.yaxis[x].logarithmic){var k,M=-Number.MAX_VALUE,R=Number.MIN_VALUE;return g.seriesLog.forEach(function(j,U){j.forEach(function(X){c.config.yaxis[U]&&c.config.yaxis[U].logarithmic&&(M=Math.max(X,M),R=Math.min(X,R))})}),k=Math.pow(g.yRange[x],Math.abs(R-M)/g.yRange[x]),g.yLogRatio[x]=k/g.gridHeight,k}}),g.invalidLogScale?n.slice():g.yLogRatio}}],[{key:"checkComboSeries",value:function(n){var s=!1,c=0,g=0;return n.length&&void 0!==n[0].type&&n.forEach(function(y){"bar"!==y.type&&"column"!==y.type&&"candlestick"!==y.type&&"boxPlot"!==y.type||c++,void 0!==y.type&&g++}),g>0&&(s=!0),{comboBarCount:c,comboCharts:s}}},{key:"extendArrayProps",value:function(n,s,c){var g,y,x,k,M,R;return null!==(g=s)&&void 0!==g&&g.yaxis&&(s=n.extendYAxis(s,c)),null!==(y=s)&&void 0!==y&&y.annotations&&(s.annotations.yaxis&&(s=n.extendYAxisAnnotations(s)),null!==(x=s)&&void 0!==x&&null!==(k=x.annotations)&&void 0!==k&&k.xaxis&&(s=n.extendXAxisAnnotations(s)),null!==(M=s)&&void 0!==M&&null!==(R=M.annotations)&&void 0!==R&&R.points&&(s=n.extendPointAnnotations(s))),s}}]),ue}(),Yt=function(){function ue(n){Y(this,ue),this.w=n.w,this.annoCtx=n}return ke(ue,[{key:"setOrientations",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===n.label.orientation){var y=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==s?s:0,"']"));if(null!==y){var x=y.getBoundingClientRect();y.setAttribute("x",parseFloat(y.getAttribute("x"))-x.height+4),y.setAttribute("y","top"===n.label.position?parseFloat(y.getAttribute("y"))+x.width:parseFloat(y.getAttribute("y"))-x.width);var k=this.annoCtx.graphics.rotateAroundCenter(y),R=k.y;y.setAttribute("transform","rotate(-90 ".concat(k.x," ").concat(R,")"))}}}},{key:"addBackgroundToAnno",value:function(n,s){var c=this.w;if(!n||void 0===s.label.text||void 0!==s.label.text&&!String(s.label.text).trim())return null;var g=c.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),y=n.getBoundingClientRect(),x=s.label.style.padding.left,k=s.label.style.padding.right,M=s.label.style.padding.top,R=s.label.style.padding.bottom;"vertical"===s.label.orientation&&(M=s.label.style.padding.left,R=s.label.style.padding.right,x=s.label.style.padding.top,k=s.label.style.padding.bottom);var X=this.annoCtx.graphics.drawRect(y.left-g.left-x-c.globals.barPadForNumericAxis,y.top-g.top-M,y.width+x+k,y.height+M+R,s.label.borderRadius,s.label.style.background,1,s.label.borderWidth,s.label.borderColor,0);return s.id&&X.node.classList.add(s.id),X}},{key:"annotationsBackground",value:function(){var n=this,s=this.w,c=function(g,y,x){var k=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(x,"-annotations .apexcharts-").concat(x,"-annotation-label[rel='").concat(y,"']"));if(k){var M=k.parentNode,R=n.addBackgroundToAnno(k,g);R&&(M.insertBefore(R.node,k),g.label.mouseEnter&&R.node.addEventListener("mouseenter",g.label.mouseEnter.bind(n,g)),g.label.mouseLeave&&R.node.addEventListener("mouseleave",g.label.mouseLeave.bind(n,g)),g.label.click&&R.node.addEventListener("click",g.label.click.bind(n,g)))}};s.config.annotations.xaxis.map(function(g,y){c(g,y,"xaxis")}),s.config.annotations.yaxis.map(function(g,y){c(g,y,"yaxis")}),s.config.annotations.points.map(function(g,y){c(g,y,"point")})}},{key:"getY1Y2",value:function(n,s){var c,g="y1"===n?s.y:s.y2,y=this.w;if(this.annoCtx.invertAxis){var x=y.globals.labels;y.config.xaxis.convertedCatToNumeric&&(x=y.globals.categoryLabels);var k=x.indexOf(g),M=y.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(k+1)+")");c=M?parseFloat(M.getAttribute("y")):(y.globals.gridHeight/x.length-1)*(k+1)-y.globals.barHeight,void 0!==s.seriesIndex&&y.globals.barHeight&&(c=c-y.globals.barHeight/2*(y.globals.series.length-1)+y.globals.barHeight*s.seriesIndex)}else{var R;R=y.config.yaxis[s.yAxisIndex].logarithmic?(g=new Kt(this.annoCtx.ctx).getLogVal(g,s.yAxisIndex))/y.globals.yLogRatio[s.yAxisIndex]:(g-y.globals.minYArr[s.yAxisIndex])/(y.globals.yRange[s.yAxisIndex]/y.globals.gridHeight),c=y.globals.gridHeight-R,!s.marker||null!=s.y||(c=0),y.config.yaxis[s.yAxisIndex]&&y.config.yaxis[s.yAxisIndex].reversed&&(c=R)}return"string"==typeof g&&g.indexOf("px")>-1&&(c=parseFloat(g)),c}},{key:"getX1X2",value:function(n,s){var c=this.w,g=this.annoCtx.invertAxis?c.globals.minY:c.globals.minX,y=this.annoCtx.invertAxis?c.globals.maxY:c.globals.maxX,x=this.annoCtx.invertAxis?c.globals.yRange[0]:c.globals.xRange,k=(s.x-g)/(x/c.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(k=(y-s.x)/(x/c.globals.gridWidth)),"category"!==c.config.xaxis.type&&!c.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||c.globals.dataFormatXNumeric||(k=this.getStringX(s.x));var M=(s.x2-g)/(x/c.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(M=(y-s.x2)/(x/c.globals.gridWidth)),"category"!==c.config.xaxis.type&&!c.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||c.globals.dataFormatXNumeric||(M=this.getStringX(s.x2)),null!=s.x||!s.marker||(k=c.globals.gridWidth),"x1"===n&&"string"==typeof s.x&&s.x.indexOf("px")>-1&&(k=parseFloat(s.x)),"x2"===n&&"string"==typeof s.x2&&s.x2.indexOf("px")>-1&&(M=parseFloat(s.x2)),void 0!==s.seriesIndex&&c.globals.barWidth&&!this.annoCtx.invertAxis&&(k=k-c.globals.barWidth/2*(c.globals.series.length-1)+c.globals.barWidth*s.seriesIndex),"x1"===n?k:M}},{key:"getStringX",value:function(n){var s=this.w,c=n;s.config.xaxis.convertedCatToNumeric&&s.globals.categoryLabels.length&&(n=s.globals.categoryLabels.indexOf(n)+1);var g=s.globals.labels.indexOf(n),y=s.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(g+1)+")");return y&&(c=parseFloat(y.getAttribute("x"))),c}}]),ue}(),Nt=function(){function ue(n){Y(this,ue),this.w=n.w,this.annoCtx=n,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Yt(this.annoCtx)}return ke(ue,[{key:"addXaxisAnnotation",value:function(n,s,c){var g,y=this.w,x=this.helpers.getX1X2("x1",n),k=n.label.text,M=n.strokeDashArray;if(Ve.isNumber(x)){if(null==n.x2){var R=this.annoCtx.graphics.drawLine(x+n.offsetX,0+n.offsetY,x+n.offsetX,y.globals.gridHeight+n.offsetY,n.borderColor,M,n.borderWidth);s.appendChild(R.node),n.id&&R.node.classList.add(n.id)}else{if((g=this.helpers.getX1X2("x2",n))<x){var j=x;x=g,g=j}var U=this.annoCtx.graphics.drawRect(x+n.offsetX,0+n.offsetY,g-x,y.globals.gridHeight+n.offsetY,0,n.fillColor,n.opacity,1,n.borderColor,M);U.node.classList.add("apexcharts-annotation-rect"),U.attr("clip-path","url(#gridRectMask".concat(y.globals.cuid,")")),s.appendChild(U.node),n.id&&U.node.classList.add(n.id)}var X=this.annoCtx.graphics.getTextRects(k,parseFloat(n.label.style.fontSize)),ae=this.annoCtx.graphics.drawText({x:x+n.label.offsetX,y:("top"===n.label.position?4:"center"===n.label.position?y.globals.gridHeight/2+("vertical"===n.label.orientation?X.width/2:0):y.globals.gridHeight)+n.label.offsetY-("vertical"===n.label.orientation?"top"===n.label.position?X.width/2-12:-X.width/2:0),text:k,textAnchor:n.label.textAnchor,fontSize:n.label.style.fontSize,fontFamily:n.label.style.fontFamily,fontWeight:n.label.style.fontWeight,foreColor:n.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(n.label.style.cssClass," ").concat(n.id?n.id:"")});ae.attr({rel:c}),s.appendChild(ae.node),this.annoCtx.helpers.setOrientations(n,c)}}},{key:"drawXAxisAnnotations",value:function(){var n=this,s=this.w,c=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return s.config.annotations.xaxis.map(function(g,y){n.addXaxisAnnotation(g,c.node,y)}),c}}]),ue}(),ct=function(){function ue(n){Y(this,ue),this.w=n.w,this.annoCtx=n,this.helpers=new Yt(this.annoCtx)}return ke(ue,[{key:"addYaxisAnnotation",value:function(n,s,c){var g,y=this.w,x=n.strokeDashArray,k=this.helpers.getY1Y2("y1",n),M=n.label.text;if(null==n.y2){var R=this.annoCtx.graphics.drawLine(0+n.offsetX,k+n.offsetY,this._getYAxisAnnotationWidth(n),k+n.offsetY,n.borderColor,x,n.borderWidth);s.appendChild(R.node),n.id&&R.node.classList.add(n.id)}else{if((g=this.helpers.getY1Y2("y2",n))>k){var j=k;k=g,g=j}var U=this.annoCtx.graphics.drawRect(0+n.offsetX,g+n.offsetY,this._getYAxisAnnotationWidth(n),k-g,0,n.fillColor,n.opacity,1,n.borderColor,x);U.node.classList.add("apexcharts-annotation-rect"),U.attr("clip-path","url(#gridRectMask".concat(y.globals.cuid,")")),s.appendChild(U.node),n.id&&U.node.classList.add(n.id)}var ee=this.annoCtx.graphics.drawText({x:("right"===n.label.position?y.globals.gridWidth:"center"===n.label.position?y.globals.gridWidth/2:0)+n.label.offsetX,y:(g??k)+n.label.offsetY-3,text:M,textAnchor:n.label.textAnchor,fontSize:n.label.style.fontSize,fontFamily:n.label.style.fontFamily,fontWeight:n.label.style.fontWeight,foreColor:n.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(n.label.style.cssClass," ").concat(n.id?n.id:"")});ee.attr({rel:c}),s.appendChild(ee.node)}},{key:"_getYAxisAnnotationWidth",value:function(n){var s=this.w;return(n.width.indexOf("%")>-1?s.globals.gridWidth*parseInt(n.width,10)/100:parseInt(n.width,10))+n.offsetX}},{key:"drawYAxisAnnotations",value:function(){var n=this,s=this.w,c=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return s.config.annotations.yaxis.map(function(g,y){n.addYaxisAnnotation(g,c.node,y)}),c}}]),ue}(),Vt=function(){function ue(n){Y(this,ue),this.w=n.w,this.annoCtx=n,this.helpers=new Yt(this.annoCtx)}return ke(ue,[{key:"addPointAnnotation",value:function(n,s,c){var g=this.helpers.getX1X2("x1",n),y=this.helpers.getY1Y2("y1",n);if(Ve.isNumber(g)){var x={pSize:n.marker.size,pointStrokeWidth:n.marker.strokeWidth,pointFillColor:n.marker.fillColor,pointStrokeColor:n.marker.strokeColor,shape:n.marker.shape,pRadius:n.marker.radius,class:"apexcharts-point-annotation-marker ".concat(n.marker.cssClass," ").concat(n.id?n.id:"")},k=this.annoCtx.graphics.drawMarker(g+n.marker.offsetX,y+n.marker.offsetY,x);s.appendChild(k.node);var M=n.label.text?n.label.text:"",R=this.annoCtx.graphics.drawText({x:g+n.label.offsetX,y:y+n.label.offsetY-n.marker.size-parseFloat(n.label.style.fontSize)/1.6,text:M,textAnchor:n.label.textAnchor,fontSize:n.label.style.fontSize,fontFamily:n.label.style.fontFamily,fontWeight:n.label.style.fontWeight,foreColor:n.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(n.label.style.cssClass," ").concat(n.id?n.id:"")});if(R.attr({rel:c}),s.appendChild(R.node),n.customSVG.SVG){var j=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+n.customSVG.cssClass});j.attr({transform:"translate(".concat(g+n.customSVG.offsetX,", ").concat(y+n.customSVG.offsetY,")")}),j.node.innerHTML=n.customSVG.SVG,s.appendChild(j.node)}if(n.image.path){var U=n.image.width?n.image.width:20,X=n.image.height?n.image.height:20;k=this.annoCtx.addImage({x:g+n.image.offsetX-U/2,y:y+n.image.offsetY-X/2,width:U,height:X,path:n.image.path,appendTo:".apexcharts-point-annotations"})}n.mouseEnter&&k.node.addEventListener("mouseenter",n.mouseEnter.bind(this,n)),n.mouseLeave&&k.node.addEventListener("mouseleave",n.mouseLeave.bind(this,n)),n.click&&k.node.addEventListener("click",n.click.bind(this,n))}}},{key:"drawPointAnnotations",value:function(){var n=this,s=this.w,c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return s.config.annotations.points.map(function(g,y){n.addPointAnnotation(g,c.node,y)}),c}}]),ue}(),qt={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},ri=function(){function ue(){Y(this,ue),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return ke(ue,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[qt],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(n){return new Date(n).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(n){return n}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(n){return n+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(n){return n.globals.seriesTotals.reduce(function(s,c){return s+c},0)/n.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(n){return n},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(n){return n}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(n){return n}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(n){return n.globals.seriesTotals.reduce(function(s,c){return s+c},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(n){return null!==n?n:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(n){return n?n+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),ue}(),Li=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.graphics=new rt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Yt(this),this.xAxisAnnotations=new Nt(this),this.yAxisAnnotations=new ct(this),this.pointsAnnotations=new Vt(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return ke(ue,[{key:"drawAxesAnnotations",value:function(){var n=this.w;if(n.globals.axisCharts){for(var s=this.yAxisAnnotations.drawYAxisAnnotations(),c=this.xAxisAnnotations.drawXAxisAnnotations(),g=this.pointsAnnotations.drawPointAnnotations(),y=n.config.chart.animations.enabled,x=[s,c,g],k=[c.node,s.node,g.node],M=0;M<3;M++)n.globals.dom.elGraphical.add(x[M]),!y||n.globals.resized||n.globals.dataChanged||"scatter"!==n.config.chart.type&&"bubble"!==n.config.chart.type&&n.globals.dataPoints>1&&k[M].classList.add("apexcharts-element-hidden"),n.globals.delayedElements.push({el:k[M],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var n=this;this.w.config.annotations.images.map(function(s,c){n.addImage(s,c)})}},{key:"drawTextAnnos",value:function(){var n=this;this.w.config.annotations.texts.map(function(s,c){n.addText(s,c)})}},{key:"addXaxisAnnotation",value:function(n,s,c){this.xAxisAnnotations.addXaxisAnnotation(n,s,c)}},{key:"addYaxisAnnotation",value:function(n,s,c){this.yAxisAnnotations.addYaxisAnnotation(n,s,c)}},{key:"addPointAnnotation",value:function(n,s,c){this.pointsAnnotations.addPointAnnotation(n,s,c)}},{key:"addText",value:function(n,s){var y=n.text,X=n.backgroundColor,ee=n.borderWidth,ae=n.strokeDashArray,de=n.borderRadius,ve=n.borderColor,he=n.appendTo,be=void 0===he?".apexcharts-svg":he,F=n.paddingLeft,K=void 0===F?4:F,ce=n.paddingRight,_e=void 0===ce?4:ce,Me=n.paddingBottom,$e=void 0===Me?2:Me,wt=n.paddingTop,kt=void 0===wt?2:wt,Wt=this.w,hi=this.graphics.drawText({x:n.x,y:n.y,text:y,textAnchor:n.textAnchor||"start",fontSize:n.fontSize||"12px",fontWeight:n.fontWeight||"regular",fontFamily:n.fontFamily||Wt.config.chart.fontFamily,foreColor:n.foreColor||Wt.config.chart.foreColor,cssClass:n.cssClass}),yi=Wt.globals.dom.baseEl.querySelector(be);yi&&yi.appendChild(hi.node);var rn=hi.bbox();if(y){var gn=this.graphics.drawRect(rn.x-K,rn.y-kt,rn.width+K+_e,rn.height+$e+kt,de,X||"transparent",1,ee,ve,ae);yi.insertBefore(gn.node,hi.node)}}},{key:"addImage",value:function(n,s){var c=this.w,y=n.x,x=void 0===y?0:y,k=n.y,M=void 0===k?0:k,R=n.width,j=void 0===R?20:R,U=n.height,X=void 0===U?20:U,ee=n.appendTo,ae=void 0===ee?".apexcharts-svg":ee,de=c.globals.dom.Paper.image(n.path);de.size(j,X).move(x,M);var ve=c.globals.dom.baseEl.querySelector(ae);return ve&&ve.appendChild(de.node),de}},{key:"addXaxisAnnotationExternal",value:function(n,s,c){return this.addAnnotationExternal({params:n,pushToMemory:s,context:c,type:"xaxis",contextMethod:c.addXaxisAnnotation}),c}},{key:"addYaxisAnnotationExternal",value:function(n,s,c){return this.addAnnotationExternal({params:n,pushToMemory:s,context:c,type:"yaxis",contextMethod:c.addYaxisAnnotation}),c}},{key:"addPointAnnotationExternal",value:function(n,s,c){return void 0===this.invertAxis&&(this.invertAxis=c.w.globals.isBarHorizontal),this.addAnnotationExternal({params:n,pushToMemory:s,context:c,type:"point",contextMethod:c.addPointAnnotation}),c}},{key:"addAnnotationExternal",value:function(n){var s=n.params,c=n.pushToMemory,g=n.context,y=n.type,x=n.contextMethod,k=g,M=k.w,R=M.globals.dom.baseEl.querySelector(".apexcharts-".concat(y,"-annotations")),j=R.childNodes.length+1,U=new ri,X=Object.assign({},"xaxis"===y?U.xAxisAnnotation:"yaxis"===y?U.yAxisAnnotation:U.pointAnnotation),ee=Ve.extend(X,s);switch(y){case"xaxis":this.addXaxisAnnotation(ee,R,j);break;case"yaxis":this.addYaxisAnnotation(ee,R,j);break;case"point":this.addPointAnnotation(ee,R,j)}var ae=M.globals.dom.baseEl.querySelector(".apexcharts-".concat(y,"-annotations .apexcharts-").concat(y,"-annotation-label[rel='").concat(j,"']")),de=this.helpers.addBackgroundToAnno(ae,ee);return de&&R.insertBefore(de.node,ae),c&&M.globals.memory.methodsToExec.push({context:k,id:ee.id?ee.id:Ve.randomId(),method:x,label:"addAnnotation",params:s}),g}},{key:"clearAnnotations",value:function(n){var s=n.w,c=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");s.globals.memory.methodsToExec.map(function(g,y){"addText"!==g.label&&"addAnnotation"!==g.label||s.globals.memory.methodsToExec.splice(y,1)}),c=Ve.listToArray(c),Array.prototype.forEach.call(c,function(g){for(;g.firstChild;)g.removeChild(g.firstChild)})}},{key:"removeAnnotation",value:function(n,s){var c=n.w,g=c.globals.dom.baseEl.querySelectorAll(".".concat(s));g&&(c.globals.memory.methodsToExec.map(function(y,x){y.id===s&&c.globals.memory.methodsToExec.splice(x,1)}),Array.prototype.forEach.call(g,function(y){y.parentElement.removeChild(y)}))}}]),ue}(),ai=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return ke(ue,[{key:"isValidDate",value:function(n){return"number"!=typeof n&&!isNaN(this.parseDate(n))}},{key:"getTimeStamp",value:function(n){return Date.parse(n)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(n).toISOString().substr(0,25)).getTime():new Date(n).getTime():n}},{key:"getDate",value:function(n){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(n).toUTCString()):new Date(n)}},{key:"parseDate",value:function(n){var s=Date.parse(n);if(!isNaN(s))return this.getTimeStamp(n);var c=Date.parse(n.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(c)}},{key:"parseDateWithTimezone",value:function(n){return Date.parse(n.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(n,s){var c=this.w.globals.locale,g=this.w.config.xaxis.labels.datetimeUTC,y=["\0"].concat(it(c.months)),x=["\x01"].concat(it(c.shortMonths)),k=["\x02"].concat(it(c.days)),M=["\x03"].concat(it(c.shortDays));function R($e,wt){var kt=$e+"";for(wt=wt||2;kt.length<wt;)kt="0"+kt;return kt}var j=g?n.getUTCFullYear():n.getFullYear();s=(s=(s=s.replace(/(^|[^\\])yyyy+/g,"$1"+j)).replace(/(^|[^\\])yy/g,"$1"+j.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+j);var U=(g?n.getUTCMonth():n.getMonth())+1;s=(s=(s=(s=s.replace(/(^|[^\\])MMMM+/g,"$1"+y[0])).replace(/(^|[^\\])MMM/g,"$1"+x[0])).replace(/(^|[^\\])MM/g,"$1"+R(U))).replace(/(^|[^\\])M/g,"$1"+U);var X=g?n.getUTCDate():n.getDate();s=(s=(s=(s=s.replace(/(^|[^\\])dddd+/g,"$1"+k[0])).replace(/(^|[^\\])ddd/g,"$1"+M[0])).replace(/(^|[^\\])dd/g,"$1"+R(X))).replace(/(^|[^\\])d/g,"$1"+X);var ee=g?n.getUTCHours():n.getHours(),ae=ee>12?ee-12:0===ee?12:ee;s=(s=(s=(s=s.replace(/(^|[^\\])HH+/g,"$1"+R(ee))).replace(/(^|[^\\])H/g,"$1"+ee)).replace(/(^|[^\\])hh+/g,"$1"+R(ae))).replace(/(^|[^\\])h/g,"$1"+ae);var de=g?n.getUTCMinutes():n.getMinutes();s=(s=s.replace(/(^|[^\\])mm+/g,"$1"+R(de))).replace(/(^|[^\\])m/g,"$1"+de);var ve=g?n.getUTCSeconds():n.getSeconds();s=(s=s.replace(/(^|[^\\])ss+/g,"$1"+R(ve))).replace(/(^|[^\\])s/g,"$1"+ve);var he=g?n.getUTCMilliseconds():n.getMilliseconds();s=s.replace(/(^|[^\\])fff+/g,"$1"+R(he,3)),he=Math.round(he/10),s=s.replace(/(^|[^\\])ff/g,"$1"+R(he)),he=Math.round(he/10);var be=ee<12?"AM":"PM";s=(s=(s=s.replace(/(^|[^\\])f/g,"$1"+he)).replace(/(^|[^\\])TT+/g,"$1"+be)).replace(/(^|[^\\])T/g,"$1"+be.charAt(0));var F=be.toLowerCase();s=(s=s.replace(/(^|[^\\])tt+/g,"$1"+F)).replace(/(^|[^\\])t/g,"$1"+F.charAt(0));var K=-n.getTimezoneOffset(),ce=g||!K?"Z":K>0?"+":"-";if(!g){var _e=(K=Math.abs(K))%60;ce+=R(Math.floor(K/60))+":"+R(_e)}s=s.replace(/(^|[^\\])K/g,"$1"+ce);var Me=(g?n.getUTCDay():n.getDay())+1;return(s=(s=(s=(s=s.replace(new RegExp(k[0],"g"),k[Me])).replace(new RegExp(M[0],"g"),M[Me])).replace(new RegExp(y[0],"g"),y[U])).replace(new RegExp(x[0],"g"),x[U])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(n,s,c){var g=this.w;void 0!==g.config.xaxis.min&&(n=g.config.xaxis.min),void 0!==g.config.xaxis.max&&(s=g.config.xaxis.max);var y=this.getDate(n),x=this.getDate(s),k=this.formatDate(y,"yyyy MM dd HH mm ss fff").split(" "),M=this.formatDate(x,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(k[6],10),maxMillisecond:parseInt(M[6],10),minSecond:parseInt(k[5],10),maxSecond:parseInt(M[5],10),minMinute:parseInt(k[4],10),maxMinute:parseInt(M[4],10),minHour:parseInt(k[3],10),maxHour:parseInt(M[3],10),minDate:parseInt(k[2],10),maxDate:parseInt(M[2],10),minMonth:parseInt(k[1],10)-1,maxMonth:parseInt(M[1],10)-1,minYear:parseInt(k[0],10),maxYear:parseInt(M[0],10)}}},{key:"isLeapYear",value:function(n){return n%4==0&&n%100!=0||n%400==0}},{key:"calculcateLastDaysOfMonth",value:function(n,s,c){return this.determineDaysOfMonths(n,s)-c}},{key:"determineDaysOfYear",value:function(n){var s=365;return this.isLeapYear(n)&&(s=366),s}},{key:"determineRemainingDaysOfYear",value:function(n,s,c){var g=this.daysCntOfYear[s]+c;return s>1&&this.isLeapYear()&&g++,g}},{key:"determineDaysOfMonths",value:function(n,s){var c=30;switch(n=Ve.monthMod(n),!0){case this.months30.indexOf(n)>-1:2===n&&(c=this.isLeapYear(s)?29:28);break;case this.months31.indexOf(n)>-1:default:c=31}return c}}]),ue}(),fi=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.tooltipKeyFormat="dd MMM"}return ke(ue,[{key:"xLabelFormat",value:function(n,s,c,g){var y=this.w;if("datetime"===y.config.xaxis.type&&void 0===y.config.xaxis.labels.formatter&&void 0===y.config.tooltip.x.formatter){var x=new ai(this.ctx);return x.formatDate(x.getDate(s),y.config.tooltip.x.format)}return n(s,c,g)}},{key:"defaultGeneralFormatter",value:function(n){return Array.isArray(n)?n.map(function(s){return s}):n}},{key:"defaultYFormatter",value:function(n,s,c){var g=this.w;return Ve.isNumber(n)&&(n=n.toFixed(0!==g.globals.yValueDecimal?void 0!==s.decimalsInFloat?s.decimalsInFloat:g.globals.yValueDecimal:g.globals.maxYArr[c]-g.globals.minYArr[c]<5?1:0)),n}},{key:"setLabelFormatters",value:function(){var n=this,s=this.w;return s.globals.xaxisTooltipFormatter=function(c){return n.defaultGeneralFormatter(c)},s.globals.ttKeyFormatter=function(c){return n.defaultGeneralFormatter(c)},s.globals.ttZFormatter=function(c){return c},s.globals.legendFormatter=function(c){return n.defaultGeneralFormatter(c)},s.globals.xLabelFormatter=void 0!==s.config.xaxis.labels.formatter?s.config.xaxis.labels.formatter:function(c){if(Ve.isNumber(c)){if(!s.config.xaxis.convertedCatToNumeric&&"numeric"===s.config.xaxis.type){if(Ve.isNumber(s.config.xaxis.decimalsInFloat))return c.toFixed(s.config.xaxis.decimalsInFloat);var g=s.globals.maxX-s.globals.minX;return c.toFixed(g>0&&g<100?1:0)}return c.toFixed(s.globals.isBarHorizontal&&s.globals.maxY-s.globals.minYArr<4?1:0)}return c},s.globals.ttKeyFormatter="function"==typeof s.config.tooltip.x.formatter?s.config.tooltip.x.formatter:s.globals.xLabelFormatter,"function"==typeof s.config.xaxis.tooltip.formatter&&(s.globals.xaxisTooltipFormatter=s.config.xaxis.tooltip.formatter),(Array.isArray(s.config.tooltip.y)||void 0!==s.config.tooltip.y.formatter)&&(s.globals.ttVal=s.config.tooltip.y),void 0!==s.config.tooltip.z.formatter&&(s.globals.ttZFormatter=s.config.tooltip.z.formatter),void 0!==s.config.legend.formatter&&(s.globals.legendFormatter=s.config.legend.formatter),s.config.yaxis.forEach(function(c,g){s.globals.yLabelFormatters[g]=void 0!==c.labels.formatter?c.labels.formatter:function(y){return s.globals.xyCharts?Array.isArray(y)?y.map(function(x){return n.defaultYFormatter(x,c,g)}):n.defaultYFormatter(y,c,g):y}}),s.globals}},{key:"heatmapLabelFormatters",value:function(){var n=this.w;if("heatmap"===n.config.chart.type){n.globals.yAxisScale[0].result=n.globals.seriesNames.slice();var s=n.globals.seriesNames.reduce(function(c,g){return c.length>g.length?c:g},0);n.globals.yAxisScale[0].niceMax=s,n.globals.yAxisScale[0].niceMin=s}}}]),ue}(),Mi=function(ue){var n,s=ue.isTimeline,c=ue.ctx,g=ue.seriesIndex,y=ue.dataPointIndex,x=ue.y1,k=ue.y2,M=ue.w,R=M.globals.seriesRangeStart[g][y],j=M.globals.seriesRangeEnd[g][y],U=M.globals.labels[y],X=M.config.series[g].name?M.config.series[g].name:"",ee=M.globals.ttKeyFormatter,ae=M.config.tooltip.y.title.formatter,de={w:M,seriesIndex:g,dataPointIndex:y,start:R,end:j};"function"==typeof ae&&(X=ae(X,de)),null!==(n=M.config.series[g].data[y])&&void 0!==n&&n.x&&(U=M.config.series[g].data[y].x),s||"datetime"===M.config.xaxis.type&&(U=new fi(c).xLabelFormat(M.globals.ttKeyFormatter,U,U,{i:void 0,dateFormatter:new ai(c).formatDate,w:M})),"function"==typeof ee&&(U=ee(U,de)),Number.isFinite(x)&&Number.isFinite(k)&&(R=x,j=k);var ve="",he="",be=M.globals.colors[g];if(void 0===M.config.tooltip.x.formatter)if("datetime"===M.config.xaxis.type){var F=new ai(c);ve=F.formatDate(F.getDate(R),M.config.tooltip.x.format),he=F.formatDate(F.getDate(j),M.config.tooltip.x.format)}else ve=R,he=j;else ve=M.config.tooltip.x.formatter(R),he=M.config.tooltip.x.formatter(j);return{start:R,end:j,startVal:ve,endVal:he,ylabel:U,color:be,seriesName:X}},Yi=function(ue){var n=ue.color,s=ue.seriesName,c=ue.ylabel,g=ue.start,y=ue.end,x=ue.seriesIndex,k=ue.dataPointIndex,M=ue.ctx.tooltip.tooltipLabels.getFormatters(x);g=M.yLbFormatter(g),y=M.yLbFormatter(y);var R=M.yLbFormatter(ue.w.globals.series[x][k]),j='<span class="value start-value">\n  '.concat(g,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(y,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+n+'">'+(s||"")+'</span></div><div> <span class="category">'+c+": </span> "+(ue.w.globals.comboCharts?"rangeArea"===ue.w.config.series[x].type||"rangeBar"===ue.w.config.series[x].type?j:"<span>".concat(R,"</span>"):j)+" </div></div>"},mn=function(){function ue(n){Y(this,ue),this.opts=n}return ke(ue,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(n){return this.hideYAxis(),Ve.extend(n,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Re(Re({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var n=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(s){return n._getBoxTooltip(s.w,s.seriesIndex,s.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var n=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(s){return n._getBoxTooltip(s.w,s.seriesIndex,s.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(n,s){var c=s.seriesIndex,g=s.dataPointIndex,y=s.w,x=function(){return y.globals.seriesRangeEnd[c][g]-y.globals.seriesRangeStart[c][g]};return y.globals.comboCharts?"rangeBar"===y.config.series[c].type||"rangeArea"===y.config.series[c].type?x():n:x()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(n){return n.w.config.plotOptions&&n.w.config.plotOptions.bar&&n.w.config.plotOptions.bar.horizontal?(g=(c=Mi(Re(Re({},s=n),{},{isTimeline:!0}))).color,y=c.seriesName,x=c.ylabel,k=c.startVal,M=c.endVal,Yi(Re(Re({},s),{},{color:g,seriesName:y,ylabel:x,start:k,end:M}))):function(s){var c=Mi(s),g=c.color,y=c.seriesName,x=c.ylabel,k=c.start,M=c.end;return Yi(Re(Re({},s),{},{color:g,seriesName:y,ylabel:x,start:k,end:M}))}(n);var s,c,g,y,x,k,M}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(n){var s,c;return null!==(s=n.plotOptions.bar)&&void 0!==s&&s.barHeight||(n.plotOptions.bar.barHeight=2),null!==(c=n.plotOptions.bar)&&void 0!==c&&c.columnWidth||(n.plotOptions.bar.columnWidth=2),n}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(n){return g=(c=Mi(s=n)).color,y=c.seriesName,x=c.ylabel,k=c.start,M=c.end,Yi(Re(Re({},s),{},{color:g,seriesName:y,ylabel:x,start:k,end:M}));var s,c,g,y,x,k,M}}}}},{key:"brush",value:function(n){return Ve.extend(n,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(n){n.dataLabels=n.dataLabels||{},n.dataLabels.formatter=n.dataLabels.formatter||void 0;var s=n.dataLabels.formatter;return n.yaxis.forEach(function(c,g){n.yaxis[g].min=0,n.yaxis[g].max=100}),"bar"===n.chart.type&&(n.dataLabels.formatter=s||function(c){return"number"==typeof c&&c?c.toFixed(0)+"%":c}),n}},{key:"stackedBars",value:function(){var n=this.bar();return Re(Re({},n),{},{plotOptions:Re(Re({},n.plotOptions),{},{bar:Re(Re({},n.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(n){return n.xaxis.convertedCatToNumeric=!0,n}},{key:"convertCatToNumericXaxis",value:function(n,s,c){n.xaxis.type="numeric",n.xaxis.labels=n.xaxis.labels||{},n.xaxis.labels.formatter=n.xaxis.labels.formatter||function(x){return Ve.isNumber(x)?Math.floor(x):x};var g=n.xaxis.labels.formatter,y=n.xaxis.categories&&n.xaxis.categories.length?n.xaxis.categories:n.labels;return c&&c.length&&(y=c.map(function(x){return Array.isArray(x)?x:String(x)})),y&&y.length&&(n.xaxis.labels.formatter=function(x){return Ve.isNumber(x)?g(y[Math.floor(x)-1]):g(x)}),n.xaxis.categories=[],n.labels=[],n.xaxis.tickAmount=n.xaxis.tickAmount||"dataPoints",n}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(n){return n.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(n){return n.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(n){return n.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(n){return n},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(n,s,c,g,y){var x=n.globals.seriesCandleO[s][c],k=n.globals.seriesCandleH[s][c],M=n.globals.seriesCandleM[s][c],R=n.globals.seriesCandleL[s][c],j=n.globals.seriesCandleC[s][c];return n.config.series[s].type&&n.config.series[s].type!==y?'<div class="apexcharts-custom-tooltip">\n          '.concat(n.config.series[s].name?n.config.series[s].name:"series-"+(s+1),": <strong>").concat(n.globals.series[s][c],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(n.config.chart.type,'">')+"<div>".concat(g[0],': <span class="value">')+x+"</span></div>"+"<div>".concat(g[1],': <span class="value">')+k+"</span></div>"+(M?"<div>".concat(g[2],': <span class="value">')+M+"</span></div>":"")+"<div>".concat(g[3],': <span class="value">')+R+"</span></div>"+"<div>".concat(g[4],': <span class="value">')+j+"</span></div></div>"}}]),ue}(),ln=function(){function ue(n){Y(this,ue),this.opts=n}return ke(ue,[{key:"init",value:function(n){var s=n.responsiveOverride,c=this.opts,g=new ri,y=new mn(c);this.chartType=c.chart.type,c=this.extendYAxis(c),c=this.extendAnnotations(c);var x=g.init(),k={};if(c&&"object"===e(c)){var M,R,j,U,X,ee,ae,de,ve={};ve=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(c.chart.type)?y[c.chart.type]():y.line(),null!==(M=c.plotOptions)&&void 0!==M&&null!==(R=M.bar)&&void 0!==R&&R.isFunnel&&(ve=y.funnel()),c.chart.stacked&&"bar"===c.chart.type&&(ve=y.stackedBars()),null!==(j=c.chart.brush)&&void 0!==j&&j.enabled&&(ve=y.brush(ve)),c.chart.stacked&&"100%"===c.chart.stackType&&(c=y.stacked100(c)),null!==(U=c.plotOptions)&&void 0!==U&&null!==(X=U.bar)&&void 0!==X&&X.isDumbbell&&(c=y.dumbbell(c)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(c),c.xaxis=c.xaxis||window.Apex.xaxis||{},s||(c.xaxis.convertedCatToNumeric=!1),(null!==(ee=(c=this.checkForCatToNumericXAxis(this.chartType,ve,c)).chart.sparkline)&&void 0!==ee&&ee.enabled||null!==(ae=window.Apex.chart)&&void 0!==ae&&null!==(de=ae.sparkline)&&void 0!==de&&de.enabled)&&(ve=y.sparkline(ve)),k=Ve.extend(x,ve)}var he=Ve.extend(k,window.Apex);return x=Ve.extend(he,c),this.handleUserInputErrors(x)}},{key:"checkForCatToNumericXAxis",value:function(n,s,c){var g,y,x=new mn(c);return("bar"===n||"boxPlot"===n)&&(null===(g=c.plotOptions)||void 0===g||null===(y=g.bar)||void 0===y?void 0:y.horizontal)||"pie"===n||"polarArea"===n||"donut"===n||"radar"===n||"radialBar"===n||"heatmap"===n||!("datetime"!==c.xaxis.type&&"numeric"!==c.xaxis.type)||"between"===(c.xaxis.tickPlacement?c.xaxis.tickPlacement:s.xaxis&&s.xaxis.tickPlacement)||(c=x.convertCatToNumeric(c)),c}},{key:"extendYAxis",value:function(n,s){var c=new ri;(void 0===n.yaxis||!n.yaxis||Array.isArray(n.yaxis)&&0===n.yaxis.length)&&(n.yaxis={}),n.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(n.yaxis=Ve.extend(n.yaxis,window.Apex.yaxis)),n.yaxis=n.yaxis.constructor!==Array?[Ve.extend(c.yAxis,n.yaxis)]:Ve.extendArray(n.yaxis,c.yAxis);var g=!1;n.yaxis.forEach(function(x){x.logarithmic&&(g=!0)});var y=n.series;return s&&!y&&(y=s.config.series),g&&y.length!==n.yaxis.length&&y.length&&(n.yaxis=y.map(function(x,k){if(x.name||(y[k].name="series-".concat(k+1)),n.yaxis[k])return n.yaxis[k].seriesName=y[k].name,n.yaxis[k];var M=Ve.extend(c.yAxis,n.yaxis[0]);return M.show=!1,M})),g&&y.length>1&&y.length!==n.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),n}},{key:"extendAnnotations",value:function(n){return void 0===n.annotations&&(n.annotations={},n.annotations.yaxis=[],n.annotations.xaxis=[],n.annotations.points=[]),n=this.extendYAxisAnnotations(n),n=this.extendXAxisAnnotations(n),this.extendPointAnnotations(n)}},{key:"extendYAxisAnnotations",value:function(n){var s=new ri;return n.annotations.yaxis=Ve.extendArray(void 0!==n.annotations.yaxis?n.annotations.yaxis:[],s.yAxisAnnotation),n}},{key:"extendXAxisAnnotations",value:function(n){var s=new ri;return n.annotations.xaxis=Ve.extendArray(void 0!==n.annotations.xaxis?n.annotations.xaxis:[],s.xAxisAnnotation),n}},{key:"extendPointAnnotations",value:function(n){var s=new ri;return n.annotations.points=Ve.extendArray(void 0!==n.annotations.points?n.annotations.points:[],s.pointAnnotation),n}},{key:"checkForDarkTheme",value:function(n){n.theme&&"dark"===n.theme.mode&&(n.tooltip||(n.tooltip={}),"light"!==n.tooltip.theme&&(n.tooltip.theme="dark"),n.chart.foreColor||(n.chart.foreColor="#f6f7f8"),n.chart.background||(n.chart.background="#424242"),n.theme.palette||(n.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(n){var s=n;if(s.tooltip.shared&&s.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===s.chart.type&&s.plotOptions.bar.horizontal){if(s.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");s.yaxis[0].reversed&&(s.yaxis[0].opposite=!0),s.xaxis.tooltip.enabled=!1,s.yaxis[0].tooltip.enabled=!1,s.chart.zoom.enabled=!1}return"bar"!==s.chart.type&&"rangeBar"!==s.chart.type||s.tooltip.shared&&"barWidth"===s.xaxis.crosshairs.width&&s.series.length>1&&(s.xaxis.crosshairs.width="tickWidth"),"candlestick"!==s.chart.type&&"boxPlot"!==s.chart.type||s.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(s.chart.type," chart is not supported.")),s.yaxis[0].reversed=!1),s}}]),ue}(),zn=function(){function ue(){Y(this,ue)}return ke(ue,[{key:"initGlobalVars",value:function(n){n.series=[],n.seriesCandleO=[],n.seriesCandleH=[],n.seriesCandleM=[],n.seriesCandleL=[],n.seriesCandleC=[],n.seriesRangeStart=[],n.seriesRangeEnd=[],n.seriesRange=[],n.seriesPercent=[],n.seriesGoals=[],n.seriesX=[],n.seriesZ=[],n.seriesNames=[],n.seriesTotals=[],n.seriesLog=[],n.seriesColors=[],n.stackedSeriesTotals=[],n.seriesXvalues=[],n.seriesYvalues=[],n.labels=[],n.hasXaxisGroups=!1,n.groups=[],n.hasSeriesGroups=!1,n.seriesGroups=[],n.categoryLabels=[],n.timescaleLabels=[],n.noLabelsProvided=!1,n.resizeTimer=null,n.selectionResizeTimer=null,n.delayedElements=[],n.pointsArray=[],n.dataLabelsRects=[],n.isXNumeric=!1,n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1,n.isDataXYZ=!1,n.isMultiLineX=!1,n.isMultipleYAxis=!1,n.maxY=-Number.MAX_VALUE,n.minY=Number.MIN_VALUE,n.minYArr=[],n.maxYArr=[],n.maxX=-Number.MAX_VALUE,n.minX=Number.MAX_VALUE,n.initialMaxX=-Number.MAX_VALUE,n.initialMinX=Number.MAX_VALUE,n.maxDate=0,n.minDate=Number.MAX_VALUE,n.minZ=Number.MAX_VALUE,n.maxZ=-Number.MAX_VALUE,n.minXDiff=Number.MAX_VALUE,n.yAxisScale=[],n.xAxisScale=null,n.xAxisTicksPositions=[],n.yLabelsCoords=[],n.yTitleCoords=[],n.barPadForNumericAxis=0,n.padHorizontal=0,n.xRange=0,n.yRange=[],n.zRange=0,n.dataPoints=0,n.xTickAmount=0,n.multiAxisTickAmount=0}},{key:"globalVars",value:function(n){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:n.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===n.chart.toolbar.autoSelected&&n.chart.toolbar.tools.zoom&&n.chart.zoom.enabled,panEnabled:"pan"===n.chart.toolbar.autoSelected&&n.chart.toolbar.tools.pan,selectionEnabled:"selection"===n.chart.toolbar.autoSelected&&n.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(n){var s=this.globalVars(n);return this.initGlobalVars(s),s.initialConfig=Ve.extend({},n),s.initialSeries=Ve.clone(n.series),s.lastXAxis=Ve.clone(s.initialConfig.xaxis),s.lastYAxis=Ve.clone(s.initialConfig.yaxis),s}}]),ue}(),jt=function(){function ue(n){Y(this,ue),this.opts=n}return ke(ue,[{key:"init",value:function(){var n=new ln(this.opts).init({responsiveOverride:!1});return{config:n,globals:(new zn).init(n)}}}]),ue}(),Di=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.opts=null,this.seriesIndex=0}return ke(ue,[{key:"clippedImgArea",value:function(n){var s=this.w,c=s.config,g=parseInt(s.globals.gridWidth,10),y=parseInt(s.globals.gridHeight,10),x=g>y?g:y,k=n.image,M=0,R=0;void 0===n.width&&void 0===n.height?void 0!==c.fill.image.width&&void 0!==c.fill.image.height?(M=c.fill.image.width+1,R=c.fill.image.height):(M=x+1,R=x):(M=n.width,R=n.height);var j=document.createElementNS(s.globals.SVGNS,"pattern");rt.setAttrs(j,{id:n.patternID,patternUnits:n.patternUnits?n.patternUnits:"userSpaceOnUse",width:M+"px",height:R+"px"});var U=document.createElementNS(s.globals.SVGNS,"image");j.appendChild(U),U.setAttributeNS(window.SVG.xlink,"href",k),rt.setAttrs(U,{x:0,y:0,preserveAspectRatio:"none",width:M+"px",height:R+"px"}),U.style.opacity=n.opacity,s.globals.dom.elDefs.node.appendChild(j)}},{key:"getSeriesIndex",value:function(n){var s=this.w,c=s.config.chart.type;return this.seriesIndex=("bar"===c||"rangeBar"===c)&&s.config.plotOptions.bar.distributed||"heatmap"===c||"treemap"===c?n.seriesNumber:n.seriesNumber%s.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(n){var s=this.w;this.opts=n;var c,g,y,x=this.w.config;this.seriesIndex=this.getSeriesIndex(n);var k=this.getFillColors()[this.seriesIndex];void 0!==s.globals.seriesColors[this.seriesIndex]&&(k=s.globals.seriesColors[this.seriesIndex]),"function"==typeof k&&(k=k({seriesIndex:this.seriesIndex,dataPointIndex:n.dataPointIndex,value:n.value,w:s}));var M=n.fillType?n.fillType:this.getFillType(this.seriesIndex),R=Array.isArray(x.fill.opacity)?x.fill.opacity[this.seriesIndex]:x.fill.opacity;n.color&&(k=n.color),k||(k="#fff",console.warn("undefined color - ApexCharts"));var j=k;if(-1===k.indexOf("rgb")?k.length<9&&(j=Ve.hexToRgba(k,R)):k.indexOf("rgba")>-1&&(R=Ve.getOpacityFromRGBA(k)),n.opacity&&(R=n.opacity),"pattern"===M&&(g=this.handlePatternFill({fillConfig:n.fillConfig,patternFill:g,fillColor:k,fillOpacity:R,defaultColor:j})),"gradient"===M&&(y=this.handleGradientFill({fillConfig:n.fillConfig,fillColor:k,fillOpacity:R,i:this.seriesIndex})),"image"===M){var U=x.fill.image.src,X=n.patternID?n.patternID:"";this.clippedImgArea({opacity:R,image:Array.isArray(U)?n.seriesNumber<U.length?U[n.seriesNumber]:U[0]:U,width:n.width?n.width:void 0,height:n.height?n.height:void 0,patternUnits:n.patternUnits,patternID:"pattern".concat(s.globals.cuid).concat(n.seriesNumber+1).concat(X)}),c="url(#pattern".concat(s.globals.cuid).concat(n.seriesNumber+1).concat(X,")")}else c="gradient"===M?y:"pattern"===M?g:j;return n.solid&&(c=j),c}},{key:"getFillType",value:function(n){var s=this.w;return Array.isArray(s.config.fill.type)?s.config.fill.type[n]:s.config.fill.type}},{key:"getFillColors",value:function(){var n=this.w,s=n.config,c=this.opts,g=[];return n.globals.comboCharts?"line"===n.config.series[this.seriesIndex].type?Array.isArray(n.globals.stroke.colors)?g=n.globals.stroke.colors:g.push(n.globals.stroke.colors):Array.isArray(n.globals.fill.colors)?g=n.globals.fill.colors:g.push(n.globals.fill.colors):"line"===s.chart.type?Array.isArray(n.globals.stroke.colors)?g=n.globals.stroke.colors:g.push(n.globals.stroke.colors):Array.isArray(n.globals.fill.colors)?g=n.globals.fill.colors:g.push(n.globals.fill.colors),void 0!==c.fillColors&&(g=[],Array.isArray(c.fillColors)?g=c.fillColors.slice():g.push(c.fillColors)),g}},{key:"handlePatternFill",value:function(n){var s=n.fillConfig,g=n.fillColor,y=n.fillOpacity,x=n.defaultColor,k=this.w.config.fill;s&&(k=s);var M=this.opts,R=new rt(this.ctx),j=Array.isArray(k.pattern.strokeWidth)?k.pattern.strokeWidth[this.seriesIndex]:k.pattern.strokeWidth,U=g;return Array.isArray(k.pattern.style)?void 0!==k.pattern.style[M.seriesNumber]?R.drawPattern(k.pattern.style[M.seriesNumber],k.pattern.width,k.pattern.height,U,j,y):x:R.drawPattern(k.pattern.style,k.pattern.width,k.pattern.height,U,j,y)}},{key:"handleGradientFill",value:function(n){var s=n.fillColor,c=n.fillOpacity,g=n.fillConfig,y=n.i,x=this.w.config.fill;g&&(x=Re(Re({},x),g));var k,M=this.opts,R=new rt(this.ctx),j=new Ve,U=x.gradient.type,X=s,ee=void 0===x.gradient.opacityFrom?c:Array.isArray(x.gradient.opacityFrom)?x.gradient.opacityFrom[y]:x.gradient.opacityFrom;X.indexOf("rgba")>-1&&(ee=Ve.getOpacityFromRGBA(X));var ae=void 0===x.gradient.opacityTo?c:Array.isArray(x.gradient.opacityTo)?x.gradient.opacityTo[y]:x.gradient.opacityTo;if(void 0===x.gradient.gradientToColors||0===x.gradient.gradientToColors.length)k=j.shadeColor("dark"===x.gradient.shade?-1*parseFloat(x.gradient.shadeIntensity):parseFloat(x.gradient.shadeIntensity),s.indexOf("rgb")>-1?Ve.rgb2hex(s):s);else if(x.gradient.gradientToColors[M.seriesNumber]){var de=x.gradient.gradientToColors[M.seriesNumber];k=de,de.indexOf("rgba")>-1&&(ae=Ve.getOpacityFromRGBA(de))}else k=s;if(x.gradient.gradientFrom&&(X=x.gradient.gradientFrom),x.gradient.gradientTo&&(k=x.gradient.gradientTo),x.gradient.inverseColors){var ve=X;X=k,k=ve}return X.indexOf("rgb")>-1&&(X=Ve.rgb2hex(X)),k.indexOf("rgb")>-1&&(k=Ve.rgb2hex(k)),R.drawGradient(U,X,k,ee,ae,M.size,x.gradient.stops,x.gradient.colorStops,y)}}]),ue}(),qi=function(){function ue(n,s){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"setGlobalMarkerSize",value:function(){var n=this.w;if(n.globals.markers.size=Array.isArray(n.config.markers.size)?n.config.markers.size:[n.config.markers.size],n.globals.markers.size.length>0){if(n.globals.markers.size.length<n.globals.series.length+1)for(var s=0;s<=n.globals.series.length;s++)void 0===n.globals.markers.size[s]&&n.globals.markers.size.push(n.globals.markers.size[0])}else n.globals.markers.size=n.config.series.map(function(c){return n.config.markers.size})}},{key:"plotChartMarkers",value:function(n,s,c,g){var y,x=arguments.length>4&&void 0!==arguments[4]&&arguments[4],k=this.w,M=s,R=n,j=null,U=new rt(this.ctx),X=k.config.markers.discrete&&k.config.markers.discrete.length;if((k.globals.markers.size[s]>0||x||X)&&(j=U.group({class:x||X?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(k.globals.cuid,")")),Array.isArray(R.x))for(var ee=0;ee<R.x.length;ee++){var ae=c;1===c&&0===ee&&(ae=0),1===c&&1===ee&&(ae=1);var de="apexcharts-marker";if("line"!==k.config.chart.type&&"area"!==k.config.chart.type||k.globals.comboCharts||k.config.tooltip.intersect||(de+=" no-pointer-events"),(Array.isArray(k.config.markers.size)?k.globals.markers.size[s]>0:k.config.markers.size>0)||x||X){Ve.isNumber(R.y[ee])?de+=" w".concat(Ve.randomId()):de="apexcharts-nullpoint";var ve=this.getMarkerConfig({cssClass:de,seriesIndex:s,dataPointIndex:ae});k.config.series[M].data[ae]&&(k.config.series[M].data[ae].fillColor&&(ve.pointFillColor=k.config.series[M].data[ae].fillColor),k.config.series[M].data[ae].strokeColor&&(ve.pointStrokeColor=k.config.series[M].data[ae].strokeColor)),g&&(ve.pSize=g),(R.x[ee]<0||R.x[ee]>k.globals.gridWidth||R.y[ee]<-k.globals.markers.largestSize||R.y[ee]>k.globals.gridHeight+k.globals.markers.largestSize)&&(ve.pSize=0),(y=U.drawMarker(R.x[ee],R.y[ee],ve)).attr("rel",ae),y.attr("j",ae),y.attr("index",s),y.node.setAttribute("default-marker-size",ve.pSize),new ei(this.ctx).setSelectionFilter(y,s,ae),this.addEvents(y),j&&j.add(y)}else void 0===k.globals.pointsArray[s]&&(k.globals.pointsArray[s]=[]),k.globals.pointsArray[s].push([R.x[ee],R.y[ee]])}return j}},{key:"getMarkerConfig",value:function(n){var s=n.cssClass,c=n.seriesIndex,g=n.dataPointIndex,y=void 0===g?null:g,x=n.finishRadius,k=void 0===x?null:x,M=this.w,R=this.getMarkerStyle(c),j=M.globals.markers.size[c],U=M.config.markers;return null!==y&&U.discrete.length&&U.discrete.map(function(X){X.seriesIndex===c&&X.dataPointIndex===y&&(R.pointStrokeColor=X.strokeColor,R.pointFillColor=X.fillColor,j=X.size,R.pointShape=X.shape)}),{pSize:null===k?j:k,pRadius:U.radius,width:Array.isArray(U.width)?U.width[c]:U.width,height:Array.isArray(U.height)?U.height[c]:U.height,pointStrokeWidth:Array.isArray(U.strokeWidth)?U.strokeWidth[c]:U.strokeWidth,pointStrokeColor:R.pointStrokeColor,pointFillColor:R.pointFillColor,shape:R.pointShape||(Array.isArray(U.shape)?U.shape[c]:U.shape),class:s,pointStrokeOpacity:Array.isArray(U.strokeOpacity)?U.strokeOpacity[c]:U.strokeOpacity,pointStrokeDashArray:Array.isArray(U.strokeDashArray)?U.strokeDashArray[c]:U.strokeDashArray,pointFillOpacity:Array.isArray(U.fillOpacity)?U.fillOpacity[c]:U.fillOpacity,seriesIndex:c}}},{key:"addEvents",value:function(n){var s=this.w,c=new rt(this.ctx);n.node.addEventListener("mouseenter",c.pathMouseEnter.bind(this.ctx,n)),n.node.addEventListener("mouseleave",c.pathMouseLeave.bind(this.ctx,n)),n.node.addEventListener("mousedown",c.pathMouseDown.bind(this.ctx,n)),n.node.addEventListener("click",s.config.markers.onClick),n.node.addEventListener("dblclick",s.config.markers.onDblClick),n.node.addEventListener("touchstart",c.pathMouseDown.bind(this.ctx,n),{passive:!0})}},{key:"getMarkerStyle",value:function(n){var s=this.w,c=s.globals.markers.colors,g=s.config.markers.strokeColor||s.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(g)?g[n]:g,pointFillColor:Array.isArray(c)?c[n]:c}}}]),ue}(),Hn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return ke(ue,[{key:"draw",value:function(n,s,c){var g=this.w,y=new rt(this.ctx),x=c.realIndex,k=c.pointsPos,M=c.zRatio,R=c.elParent,j=y.group({class:"apexcharts-series-markers apexcharts-series-".concat(g.config.chart.type)});if(j.attr("clip-path","url(#gridRectMarkerMask".concat(g.globals.cuid,")")),Array.isArray(k.x))for(var U=0;U<k.x.length;U++){var X=s+1,ee=!0;0===s&&0===U&&(X=0),0===s&&1===U&&(X=1);var ae=0,de=g.globals.markers.size[x];if(M!==1/0){var ve=g.config.plotOptions.bubble;de=g.globals.seriesZ[x][X],ve.zScaling&&(de/=M),ve.minBubbleRadius&&de<ve.minBubbleRadius&&(de=ve.minBubbleRadius),ve.maxBubbleRadius&&de>ve.maxBubbleRadius&&(de=ve.maxBubbleRadius)}g.config.chart.animations.enabled||(ae=de);var be=k.y[U];if(ae=ae||0,null!==be&&void 0!==g.globals.series[x][X]||(ee=!1),ee){var F=this.drawPoint(k.x[U],be,ae,de,x,X,s);j.add(F)}R.add(j)}}},{key:"drawPoint",value:function(n,s,c,g,y,x,k){var M=this.w,R=y,j=new Zt(this.ctx),U=new ei(this.ctx),X=new Di(this.ctx),ee=new qi(this.ctx),ae=new rt(this.ctx),de=ee.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:R,dataPointIndex:x,finishRadius:"bubble"===M.config.chart.type||M.globals.comboCharts&&M.config.series[y]&&"bubble"===M.config.series[y].type?g:null});g=de.pSize;var ve,he=X.fillPath({seriesNumber:y,dataPointIndex:x,color:de.pointFillColor,patternUnits:"objectBoundingBox",value:M.globals.series[y][k]});if("circle"===de.shape?ve=ae.drawCircle(c):"square"!==de.shape&&"rect"!==de.shape||(ve=ae.drawRect(0,0,de.width-de.pointStrokeWidth/2,de.height-de.pointStrokeWidth/2,de.pRadius)),M.config.series[R].data[x]&&M.config.series[R].data[x].fillColor&&(he=M.config.series[R].data[x].fillColor),ve.attr({x:n-de.width/2-de.pointStrokeWidth/2,y:s-de.height/2-de.pointStrokeWidth/2,cx:n,cy:s,fill:he,"fill-opacity":de.pointFillOpacity,stroke:de.pointStrokeColor,r:g,"stroke-width":de.pointStrokeWidth,"stroke-dasharray":de.pointStrokeDashArray,"stroke-opacity":de.pointStrokeOpacity}),M.config.chart.dropShadow.enabled&&U.dropShadow(ve,M.config.chart.dropShadow,y),!this.initialAnim||M.globals.dataChanged||M.globals.resized?M.globals.animationEnded=!0:j.animateMarker(ve,0,"circle"===de.shape?g:{width:de.width,height:de.height},M.config.chart.animations.speed,M.globals.easing,function(){window.setTimeout(function(){j.animationCompleted(ve)},100)}),M.globals.dataChanged&&"circle"===de.shape)if(this.dynamicAnim){var K,ce,_e,Me,$e=M.config.chart.animations.dynamicAnimation.speed;null!=(Me=M.globals.previousPaths[y]&&M.globals.previousPaths[y][k])&&(K=Me.x,ce=Me.y,_e=void 0!==Me.r?Me.r:g);for(var wt=0;wt<M.globals.collapsedSeries.length;wt++)M.globals.collapsedSeries[wt].index===y&&($e=1,g=0);0===n&&0===s&&(g=0),j.animateCircle(ve,{cx:K,cy:ce,r:_e},{cx:n,cy:s,r:g},$e,M.globals.easing)}else ve.attr({r:g});return ve.attr({rel:x,j:x,index:y,"default-marker-size":g}),U.setSelectionFilter(ve,y,x),ee.addEvents(ve),ve.node.classList.add("apexcharts-marker"),ve}},{key:"centerTextInBubble",value:function(n){return{y:n+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),ue}(),Rn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"dataLabelsCorrection",value:function(n,s,c,g,y,x,k){var M=this.w,R=!1,j=new rt(this.ctx).getTextRects(c,k),U=j.width,X=j.height;if(s<0&&(s=0),s>M.globals.gridHeight+X&&(s=M.globals.gridHeight+X/2),void 0===M.globals.dataLabelsRects[g]&&(M.globals.dataLabelsRects[g]=[]),M.globals.dataLabelsRects[g].push({x:n,y:s,width:U,height:X}),void 0!==M.globals.dataLabelsRects[g][M.globals.dataLabelsRects[g].length-2]){var de=M.globals.dataLabelsRects[g][void 0!==M.globals.lastDrawnDataLabelsIndexes[g]?M.globals.lastDrawnDataLabelsIndexes[g][M.globals.lastDrawnDataLabelsIndexes[g].length-1]:0];(n>de.x+de.width||s>de.y+de.height||s+X<de.y||n+U<de.x)&&(R=!0)}return(0===y||x)&&(R=!0),{x:n,y:s,textRects:j,drawnextLabel:R}}},{key:"drawDataLabel",value:function(n){var s=this,c=n.type,g=n.pos,y=n.i,x=n.j,k=n.isRangeStart,M=n.strokeWidth,R=void 0===M?2:M,j=this.w,U=new rt(this.ctx),X=j.config.dataLabels,ee=0,ae=0,de=x,ve=null;if(-1!==j.globals.collapsedSeriesIndices.indexOf(y)||!X.enabled||!Array.isArray(g.x))return ve;ve=U.group({class:"apexcharts-data-labels"});for(var he=0;he<g.x.length;he++)if(ee=g.x[he]+X.offsetX,ae=g.y[he]+X.offsetY+R,!isNaN(ee)){1===x&&0===he&&(de=0),1===x&&1===he&&(de=1);var be=j.globals.series[y][de];"rangeArea"===c&&(be=k?j.globals.seriesRangeStart[y][de]:j.globals.seriesRangeEnd[y][de]);var F="",K=function(ce){return j.config.dataLabels.formatter(ce,{ctx:s.ctx,seriesIndex:y,dataPointIndex:de,w:j})};"bubble"===j.config.chart.type?(F=K(be=j.globals.seriesZ[y][de]),ae=g.y[he],ae=new Hn(this.ctx).centerTextInBubble(ae,y,de).y):void 0!==be&&(F=K(be)),this.plotDataLabelsText({x:ee,y:ae,text:F,i:y,j:de,parent:ve,offsetCorrection:!0,dataLabelsConfig:j.config.dataLabels})}return ve}},{key:"plotDataLabelsText",value:function(n){var s=this.w,c=new rt(this.ctx),g=n.x,y=n.y,x=n.i,k=n.j,M=n.text,R=n.textAnchor,j=n.fontSize,U=n.parent,X=n.dataLabelsConfig,ee=n.color,ae=n.alwaysDrawDataLabel,de=n.offsetCorrection;if(!(Array.isArray(s.config.dataLabels.enabledOnSeries)&&s.config.dataLabels.enabledOnSeries.indexOf(x)<0)){var ve={x:g,y,drawnextLabel:!0,textRects:null};de&&(ve=this.dataLabelsCorrection(g,y,M,x,k,ae,parseInt(X.style.fontSize,10))),s.globals.zoomed||(g=ve.x,y=ve.y),ve.textRects&&(g<-20-ve.textRects.width||g>s.globals.gridWidth+ve.textRects.width+30)&&(M="");var he=s.globals.dataLabels.style.colors[x];(("bar"===s.config.chart.type||"rangeBar"===s.config.chart.type)&&s.config.plotOptions.bar.distributed||s.config.dataLabels.distributed)&&(he=s.globals.dataLabels.style.colors[k]),"function"==typeof he&&(he=he({series:s.globals.series,seriesIndex:x,dataPointIndex:k,w:s})),ee&&(he=ee);var be=X.offsetX,F=X.offsetY;if("bar"!==s.config.chart.type&&"rangeBar"!==s.config.chart.type||(be=0,F=0),ve.drawnextLabel){var K=c.drawText({width:100,height:parseInt(X.style.fontSize,10),x:g+be,y:y+F,foreColor:he,textAnchor:R||X.textAnchor,text:M,fontSize:j||X.style.fontSize,fontFamily:X.style.fontFamily,fontWeight:X.style.fontWeight||"normal"});if(K.attr({class:"apexcharts-datalabel",cx:g,cy:y}),X.dropShadow.enabled){var ce=X.dropShadow;new ei(this.ctx).dropShadow(K,ce)}U.add(K),void 0===s.globals.lastDrawnDataLabelsIndexes[x]&&(s.globals.lastDrawnDataLabelsIndexes[x]=[]),s.globals.lastDrawnDataLabelsIndexes[x].push(k)}}}},{key:"addBackgroundToDataLabel",value:function(n,s){var c=this.w,g=c.config.dataLabels.background,y=g.padding,x=g.padding/2,k=s.width,M=s.height,R=new rt(this.ctx).drawRect(s.x-y,s.y-x/2,k+2*y,M+x,g.borderRadius,"transparent"===c.config.chart.background?"#fff":c.config.chart.background,g.opacity,g.borderWidth,g.borderColor);return g.dropShadow.enabled&&new ei(this.ctx).dropShadow(R,g.dropShadow),R}},{key:"dataLabelsBackground",value:function(){var n=this.w;if("bubble"!==n.config.chart.type)for(var s=n.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),c=0;c<s.length;c++){var g=s[c],y=g.getBBox(),x=null;if(y.width&&y.height&&(x=this.addBackgroundToDataLabel(g,y)),x){g.parentNode.insertBefore(x.node,g);var k=g.getAttribute("fill");!n.config.chart.animations.enabled||n.globals.resized||n.globals.dataChanged?x.attr({fill:k}):x.animate().attr({fill:k}),g.setAttribute("fill",n.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var n=this.w,s=n.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),c=n.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),g=0;g<s.length;g++)c&&c.insertBefore(s[g],c.nextSibling)}}]),ue}(),xn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.legendInactiveClass="legend-mouseover-inactive"}return ke(ue,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(n){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(Ve.escapeString(n),"']"))}},{key:"isSeriesHidden",value:function(n){var s=this.getSeriesByName(n),c=parseInt(s.getAttribute("data:realIndex"),10);return{isHidden:s.classList.contains("apexcharts-series-collapsed"),realIndex:c}}},{key:"addCollapsedClassToSeries",value:function(n,s){var c=this.w;function g(y){for(var x=0;x<y.length;x++)y[x].index===s&&n.node.classList.add("apexcharts-series-collapsed")}g(c.globals.collapsedSeries),g(c.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(n){var s=this.isSeriesHidden(n);return this.ctx.legend.legendHelpers.toggleDataSeries(s.realIndex,s.isHidden),s.isHidden}},{key:"showSeries",value:function(n){var s=this.isSeriesHidden(n);s.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(s.realIndex,!0)}},{key:"hideSeries",value:function(n){var s=this.isSeriesHidden(n);s.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(s.realIndex,!1)}},{key:"resetSeries",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],g=this.w,y=Ve.clone(g.globals.initialSeries);g.globals.previousPaths=[],c?(g.globals.collapsedSeries=[],g.globals.ancillaryCollapsedSeries=[],g.globals.collapsedSeriesIndices=[],g.globals.ancillaryCollapsedSeriesIndices=[]):y=this.emptyCollapsedSeries(y),g.config.series=y,n&&(s&&(g.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(y,g.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(n){for(var s=this.w,c=0;c<n.length;c++)s.globals.collapsedSeriesIndices.indexOf(c)>-1&&(n[c].data=[]);return n}},{key:"toggleSeriesOnHover",value:function(n,s){var c=this.w;s||(s=n.target);var g=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===n.type){var y=parseInt(s.getAttribute("rel"),10)-1,x=null,k=null;c.globals.axisCharts||"radialBar"===c.config.chart.type?c.globals.axisCharts?(x=c.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(y,"']")),k=c.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(y,"']"))):x=c.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(y+1,"']")):x=c.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(y+1,"'] path"));for(var M=0;M<g.length;M++)g[M].classList.add(this.legendInactiveClass);null!==x&&(c.globals.axisCharts||x.parentNode.classList.remove(this.legendInactiveClass),x.classList.remove(this.legendInactiveClass),null!==k&&k.classList.remove(this.legendInactiveClass))}else if("mouseout"===n.type)for(var R=0;R<g.length;R++)g[R].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(n,s){var c=this,g=this.w,y=g.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),x=function(M){for(var R=0;R<y.length;R++)y[R].classList[M](c.legendInactiveClass)};if("mousemove"===n.type){var k=parseInt(s.getAttribute("rel"),10)-1;x("add"),function(M){for(var R=0;R<y.length;R++){var j=parseInt(y[R].getAttribute("val"),10);j>=M.from&&j<=M.to&&y[R].classList.remove(c.legendInactiveClass)}}(g.config.plotOptions.heatmap.colorScale.ranges[k])}else"mouseout"===n.type&&x("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=this.w,g=0;if(c.config.series.length>1)for(var y=c.config.series.map(function(k,M){return k.data&&k.data.length>0&&-1===c.globals.collapsedSeriesIndices.indexOf(M)&&(!c.globals.comboCharts||0===s.length||s.length&&s.indexOf(c.config.series[M].type)>-1)?M:-1}),x="asc"===n?0:y.length-1;"asc"===n?x<y.length:x>=0;"asc"===n?x++:x--)if(-1!==y[x]){g=y[x];break}return g}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(n,s){return"bar"===n.type||"column"===n.type?s:-1}).filter(function(n){return-1!==n}):this.w.config.series.map(function(n,s){return s})}},{key:"getPreviousPaths",value:function(){var n=this.w;function s(x,k,M){for(var R=x[k].childNodes,j={type:M,paths:[],realIndex:x[k].getAttribute("data:realIndex")},U=0;U<R.length;U++)if(R[U].hasAttribute("pathTo")){var X=R[U].getAttribute("pathTo");j.paths.push({d:X})}n.globals.previousPaths.push(j)}n.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(x){for(var M=n.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(x,"-series .apexcharts-series")),R=0;R<M.length;R++)s(M,R,x)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var c=n.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n.config.chart.type," .apexcharts-series"));if(c.length>0)for(var g=function(x){for(var k=n.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(x,"'] rect")),M=[],R=function(U){var X=function(ae){return k[U].getAttribute(ae)},ee={x:parseFloat(X("x")),y:parseFloat(X("y")),width:parseFloat(X("width")),height:parseFloat(X("height"))};M.push({rect:ee,color:k[U].getAttribute("color")})},j=0;j<k.length;j++)R(j);n.globals.previousPaths.push(M)},y=0;y<c.length;y++)g(y);n.globals.axisCharts||(n.globals.previousPaths=n.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(n){var s=this.w,c=s.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n,"-series .apexcharts-series"));if(c.length>0)for(var g=0;g<c.length;g++){for(var y=s.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n,"-series .apexcharts-series[data\\:realIndex='").concat(g,"'] circle")),x=[],k=0;k<y.length;k++)x.push({x:y[k].getAttribute("cx"),y:y[k].getAttribute("cy"),r:y[k].getAttribute("r")});s.globals.previousPaths.push(x)}}},{key:"clearPreviousPaths",value:function(){var n=this.w;n.globals.previousPaths=[],n.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var n=this.w,s=n.config.noData,c=new rt(this.ctx),g=n.globals.svgWidth/2,y=n.globals.svgHeight/2,x="middle";if(n.globals.noData=!0,n.globals.animationEnded=!0,"left"===s.align?(g=10,x="start"):"right"===s.align&&(g=n.globals.svgWidth-10,x="end"),"top"===s.verticalAlign?y=50:"bottom"===s.verticalAlign&&(y=n.globals.svgHeight-50),g+=s.offsetX,y=y+parseInt(s.style.fontSize,10)+2+s.offsetY,void 0!==s.text&&""!==s.text){var k=c.drawText({x:g,y,text:s.text,textAnchor:x,fontSize:s.style.fontSize,fontFamily:s.style.fontFamily,foreColor:s.style.color,opacity:1,class:"apexcharts-text-nodata"});n.globals.dom.Paper.add(k)}}},{key:"setNullSeriesToZeroValues",value:function(n){for(var s=this.w,c=0;c<n.length;c++)if(0===n[c].length)for(var g=0;g<n[s.globals.maxValsInArrayIndex].length;g++)n[c].push(0);return n}},{key:"hasAllSeriesEqualX",value:function(){for(var n=!0,s=this.w,c=this.filteredSeriesX(),g=0;g<c.length-1;g++)if(c[g][0]!==c[g+1][0]){n=!1;break}return s.globals.allSeriesHasEqualX=n,n}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(s){return s.length>0?s:[]})}}]),ue}(),Pi=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Kt(this.ctx)}return ke(ue,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var n=this.w.config.series.slice(),s=new xn(this.ctx);if(this.activeSeriesIndex=s.getActiveConfigSeriesIndex(),void 0!==n[this.activeSeriesIndex].data&&n[this.activeSeriesIndex].data.length>0&&null!==n[this.activeSeriesIndex].data[0]&&void 0!==n[this.activeSeriesIndex].data[0].x&&null!==n[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var n=this.w.config.series.slice(),s=new xn(this.ctx);if(this.activeSeriesIndex=s.getActiveConfigSeriesIndex(),void 0!==n[this.activeSeriesIndex].data&&n[this.activeSeriesIndex].data.length>0&&null!=n[this.activeSeriesIndex].data[0]&&n[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(n,s){for(var c=this.w.config,g=this.w.globals,y="boxPlot"===c.chart.type||"boxPlot"===c.series[s].type,x=0;x<n[s].data.length;x++)if(void 0!==n[s].data[x][1]&&(Array.isArray(n[s].data[x][1])&&4===n[s].data[x][1].length&&!y?this.twoDSeries.push(Ve.parseNumber(n[s].data[x][1][3])):this.twoDSeries.push(Ve.parseNumber(n[s].data[x].length>=5?n[s].data[x][4]:n[s].data[x][1])),g.dataFormatXNumeric=!0),"datetime"===c.xaxis.type){var k=new Date(n[s].data[x][0]);k=new Date(k).getTime(),this.twoDSeriesX.push(k)}else this.twoDSeriesX.push(n[s].data[x][0]);for(var M=0;M<n[s].data.length;M++)void 0!==n[s].data[M][2]&&(this.threeDSeries.push(n[s].data[M][2]),g.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(n,s){var c=this.w.config,g=this.w.globals,y=new ai(this.ctx),x=s;g.collapsedSeriesIndices.indexOf(s)>-1&&(x=this.activeSeriesIndex);for(var k=0;k<n[s].data.length;k++)void 0!==n[s].data[k].y&&(Array.isArray(n[s].data[k].y)?this.twoDSeries.push(Ve.parseNumber(n[s].data[k].y[n[s].data[k].y.length-1])):this.twoDSeries.push(Ve.parseNumber(n[s].data[k].y))),void 0!==n[s].data[k].goals&&Array.isArray(n[s].data[k].goals)?(void 0===this.seriesGoals[s]&&(this.seriesGoals[s]=[]),this.seriesGoals[s].push(n[s].data[k].goals)):(void 0===this.seriesGoals[s]&&(this.seriesGoals[s]=[]),this.seriesGoals[s].push(null));for(var M=0;M<n[x].data.length;M++){var R="string"==typeof n[x].data[M].x,j=Array.isArray(n[x].data[M].x),U=!j&&!!y.isValidDate(n[x].data[M].x);R||U?R||c.xaxis.convertedCatToNumeric?"datetime"!==c.xaxis.type||g.isBarHorizontal&&g.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(n[x].data[M].x),isNaN(n[x].data[M].x)||"category"===this.w.config.xaxis.type||"string"==typeof n[x].data[M].x||(g.isXNumeric=!0)):this.twoDSeriesX.push(y.parseDate(n[x].data[M].x)):"datetime"===c.xaxis.type?this.twoDSeriesX.push(y.parseDate(n[x].data[M].x.toString())):(g.dataFormatXNumeric=!0,g.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(n[x].data[M].x))):j?(this.fallbackToCategory=!0,this.twoDSeriesX.push(n[x].data[M].x)):(g.isXNumeric=!0,g.dataFormatXNumeric=!0,this.twoDSeriesX.push(n[x].data[M].x))}if(n[s].data[0]&&void 0!==n[s].data[0].z){for(var ee=0;ee<n[s].data.length;ee++)this.threeDSeries.push(n[s].data[ee].z);g.isDataXYZ=!0}}},{key:"handleRangeData",value:function(n,s){var c=this.w.globals,g={};return this.isFormat2DArray()?g=this.handleRangeDataFormat("array",n,s):this.isFormatXY()&&(g=this.handleRangeDataFormat("xy",n,s)),c.seriesRangeStart.push(void 0===g.start?[]:g.start),c.seriesRangeEnd.push(void 0===g.end?[]:g.end),c.seriesRange.push(g.rangeUniques),c.seriesRange.forEach(function(y,x){y&&y.forEach(function(k,M){k.y.forEach(function(R,j){for(var U=0;U<k.y.length;U++)j!==U&&R.y1<=k.y[U].y2&&k.y[U].y1<=R.y2&&(k.overlaps.indexOf(R.rangeName)<0&&k.overlaps.push(R.rangeName),k.overlaps.indexOf(k.y[U].rangeName)<0&&k.overlaps.push(k.y[U].rangeName))})})}),g}},{key:"handleCandleStickBoxData",value:function(n,s){var c=this.w.globals,g={};return this.isFormat2DArray()?g=this.handleCandleStickBoxDataFormat("array",n,s):this.isFormatXY()&&(g=this.handleCandleStickBoxDataFormat("xy",n,s)),c.seriesCandleO[s]=g.o,c.seriesCandleH[s]=g.h,c.seriesCandleM[s]=g.m,c.seriesCandleL[s]=g.l,c.seriesCandleC[s]=g.c,g}},{key:"handleRangeDataFormat",value:function(n,s,c){var g=[],y=[],x=s[c].data.filter(function(j,U,X){return U===X.findIndex(function(ee){return ee.x===j.x})}).map(function(j,U){return{x:j.x,overlaps:[],y:[]}});if("array"===n)for(var k=0;k<s[c].data.length;k++)Array.isArray(s[c].data[k])?(g.push(s[c].data[k][1][0]),y.push(s[c].data[k][1][1])):(g.push(s[c].data[k]),y.push(s[c].data[k]));else if("xy"===n)for(var M=function(j){var U=Array.isArray(s[c].data[j].y),X=Ve.randomId(),ee=s[c].data[j].x,ae={y1:U?s[c].data[j].y[0]:s[c].data[j].y,y2:U?s[c].data[j].y[1]:s[c].data[j].y,rangeName:X};s[c].data[j].rangeName=X;var de=x.findIndex(function(ve){return ve.x===ee});x[de].y.push(ae),g.push(ae.y1),y.push(ae.y2)},R=0;R<s[c].data.length;R++)M(R);return{start:g,end:y,rangeUniques:x}}},{key:"handleCandleStickBoxDataFormat",value:function(n,s,c){var g=this.w,y="boxPlot"===g.config.chart.type||"boxPlot"===g.config.series[c].type,x=[],k=[],M=[],R=[],j=[];if("array"===n)if(y&&6===s[c].data[0].length||!y&&5===s[c].data[0].length)for(var U=0;U<s[c].data.length;U++)x.push(s[c].data[U][1]),k.push(s[c].data[U][2]),y?(M.push(s[c].data[U][3]),R.push(s[c].data[U][4]),j.push(s[c].data[U][5])):(R.push(s[c].data[U][3]),j.push(s[c].data[U][4]));else for(var X=0;X<s[c].data.length;X++)Array.isArray(s[c].data[X][1])&&(x.push(s[c].data[X][1][0]),k.push(s[c].data[X][1][1]),y?(M.push(s[c].data[X][1][2]),R.push(s[c].data[X][1][3]),j.push(s[c].data[X][1][4])):(R.push(s[c].data[X][1][2]),j.push(s[c].data[X][1][3])));else if("xy"===n)for(var ee=0;ee<s[c].data.length;ee++)Array.isArray(s[c].data[ee].y)&&(x.push(s[c].data[ee].y[0]),k.push(s[c].data[ee].y[1]),y?(M.push(s[c].data[ee].y[2]),R.push(s[c].data[ee].y[3]),j.push(s[c].data[ee].y[4])):(R.push(s[c].data[ee].y[2]),j.push(s[c].data[ee].y[3])));return{o:x,h:k,m:M,l:R,c:j}}},{key:"parseDataAxisCharts",value:function(n){var s,c=this,y=this.w.config,x=this.w.globals,k=new ai(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),M=y.labels.length>0?y.labels.slice():y.xaxis.categories.slice();if(x.isRangeBar="rangeBar"===y.chart.type&&x.isBarHorizontal,x.hasXaxisGroups="category"===y.xaxis.type&&y.xaxis.group.groups.length>0,x.hasXaxisGroups&&(x.groups=y.xaxis.group.groups),x.hasSeriesGroups=null===(s=n[0])||void 0===s?void 0:s.group,x.hasSeriesGroups){var R=[],j=it(new Set(n.map(function(ae){return ae.group})));n.forEach(function(ae,de){var ve=j.indexOf(ae.group);R[ve]||(R[ve]=[]),R[ve].push(ae.name)}),x.seriesGroups=R}for(var U=function(){for(var ae=0;ae<M.length;ae++)if("string"==typeof M[ae]){if(!k.isValidDate(M[ae]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");c.twoDSeriesX.push(k.parseDate(M[ae]))}else c.twoDSeriesX.push(M[ae])},X=0;X<n.length;X++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===n[X].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==y.chart.type&&"rangeArea"!==y.chart.type&&"rangeBar"!==n[X].type&&"rangeArea"!==n[X].type||(x.isRangeData=!0,"rangeBar"!==y.chart.type&&"rangeArea"!==y.chart.type||this.handleRangeData(n,X)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(n,X):this.isFormatXY()&&this.handleFormatXY(n,X),"candlestick"!==y.chart.type&&"candlestick"!==n[X].type&&"boxPlot"!==y.chart.type&&"boxPlot"!==n[X].type||this.handleCandleStickBoxData(n,X),x.series.push(this.twoDSeries),x.labels.push(this.twoDSeriesX),x.seriesX.push(this.twoDSeriesX),x.seriesGoals=this.seriesGoals,X!==this.activeSeriesIndex||this.fallbackToCategory||(x.isXNumeric=!0);else{"datetime"===y.xaxis.type?(x.isXNumeric=!0,U(),x.seriesX.push(this.twoDSeriesX)):"numeric"===y.xaxis.type&&(x.isXNumeric=!0,M.length>0&&(this.twoDSeriesX=M,x.seriesX.push(this.twoDSeriesX))),x.labels.push(this.twoDSeriesX);var ee=n[X].data.map(function(ae){return Ve.parseNumber(ae)});x.series.push(ee)}x.seriesZ.push(this.threeDSeries),x.seriesNames.push(void 0!==n[X].name?n[X].name:"series-"+parseInt(X+1,10)),x.seriesColors.push(void 0!==n[X].color?n[X].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(n){var s=this.w.globals,c=this.w.config;s.series=n.slice(),s.seriesNames=c.labels.slice();for(var g=0;g<s.series.length;g++)void 0===s.seriesNames[g]&&s.seriesNames.push("series-"+(g+1));return this.w}},{key:"handleExternalLabelsData",value:function(n){var s=this.w.config,c=this.w.globals;s.xaxis.categories.length>0?c.labels=s.xaxis.categories:s.labels.length>0?c.labels=s.labels.slice():this.fallbackToCategory?(c.labels=c.labels[0],c.seriesRange.length&&(c.seriesRange.map(function(g){g.forEach(function(y){c.labels.indexOf(y.x)<0&&y.x&&c.labels.push(y.x)})}),c.labels=Array.from(new Set(c.labels.map(JSON.stringify)),JSON.parse)),s.xaxis.convertedCatToNumeric&&(new mn(s).convertCatToNumericXaxis(s,this.ctx,c.seriesX[0]),this._generateExternalLabels(n))):this._generateExternalLabels(n)}},{key:"_generateExternalLabels",value:function(n){var s=this.w.globals,c=this.w.config,g=[];if(s.axisCharts){if(s.series.length>0)if(this.isFormatXY())for(var y=c.series.map(function(U,X){return U.data.filter(function(ee,ae,de){return de.findIndex(function(ve){return ve.x===ee.x})===ae})}),x=y.reduce(function(U,X,ee,ae){return ae[U].length>X.length?U:ee},0),k=0;k<y[x].length;k++)g.push(k+1);else for(var M=0;M<s.series[s.maxValsInArrayIndex].length;M++)g.push(M+1);s.seriesX=[];for(var R=0;R<n.length;R++)s.seriesX.push(g);this.w.globals.isBarHorizontal||(s.isXNumeric=!0)}if(0===g.length){g=s.axisCharts?[]:s.series.map(function(U,X){return X+1});for(var j=0;j<n.length;j++)s.seriesX.push(g)}s.labels=g,c.xaxis.convertedCatToNumeric&&(s.categoryLabels=g.map(function(U){return c.xaxis.labels.formatter(U)})),s.noLabelsProvided=!0}},{key:"parseData",value:function(n){var s=this.w,c=s.config,g=s.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),g.axisCharts?(this.parseDataAxisCharts(n),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(n),c.chart.stacked){var y=new xn(this.ctx);g.series=y.setNullSeriesToZeroValues(g.series)}this.coreUtils.getSeriesTotals(),g.axisCharts&&(g.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),g.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),g.dataFormatXNumeric||g.isXNumeric&&("numeric"!==c.xaxis.type||0!==c.labels.length||0!==c.xaxis.categories.length)||this.handleExternalLabelsData(n);for(var x=this.coreUtils.getCategoryLabels(g.labels),k=0;k<x.length;k++)if(Array.isArray(x[k])){g.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var n=this.w,s=[];n.globals.seriesYAxisMap.forEach(function(c,g){var y=0;c.forEach(function(x){-1!==n.globals.collapsedSeriesIndices.indexOf(x)&&y++}),y>0&&y==c.length&&s.push(g)}),n.globals.ignoreYAxisIndexes=s.map(function(c){return c})}}]),ue}(),gr=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"getLabel",value:function(n,s,c,g){var ve,he,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",k=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],M=this.w,R=void 0===n[g]?"":n[g],j=R,U=M.globals.xLabelFormatter,X=M.config.xaxis.labels.formatter,ee=!1,ae=new fi(this.ctx);k&&(j=ae.xLabelFormat(U,R,R,{i:g,dateFormatter:new ai(this.ctx).formatDate,w:M}),void 0!==X&&(j=X(R,n[g],{i:g,dateFormatter:new ai(this.ctx).formatDate,w:M}))),s.length>0?(ve=s[g].unit,he=null,s.forEach(function(ce){"month"===ce.unit?he="year":"day"===ce.unit?he="month":"hour"===ce.unit?he="day":"minute"===ce.unit&&(he="hour")}),ee=he===ve,c=s[g].position,j=s[g].value):"datetime"===M.config.xaxis.type&&void 0===X&&(j=""),void 0===j&&(j=""),j=Array.isArray(j)?j:j.toString();var F,be=new rt(this.ctx);F=M.globals.rotateXLabels&&k?be.getTextRects(j,parseInt(x,10),null,"rotate(".concat(M.config.xaxis.labels.rotate," 0 0)"),!1):be.getTextRects(j,parseInt(x,10));var K=!M.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(j)&&("NaN"===String(j)||y.indexOf(j)>=0&&K)&&(j=""),{x:c,text:j,textRect:F,isBold:ee}}},{key:"checkLabelBasedOnTickamount",value:function(n,s,c){var g=this.w,y=g.config.xaxis.tickAmount;return"dataPoints"===y&&(y=Math.round(g.globals.gridWidth/120)),y>c||n%Math.round(c/(y+1))==0||(s.text=""),s}},{key:"checkForOverflowingLabels",value:function(n,s,c,g,y){var x=this.w;if(0===n&&x.globals.skipFirstTimelinelabel&&(s.text=""),n===c-1&&x.globals.skipLastTimelinelabel&&(s.text=""),x.config.xaxis.labels.hideOverlappingLabels&&g.length>0){var k=y[y.length-1];s.x<k.textRect.width/(x.globals.rotateXLabels?Math.abs(x.config.xaxis.labels.rotate)/12:1.01)+k.x&&(s.text="")}return s}},{key:"checkForReversedLabels",value:function(n,s){var c=this.w;return c.config.yaxis[n]&&c.config.yaxis[n].reversed&&s.reverse(),s}},{key:"isYAxisHidden",value:function(n){var s=this.w,c=new Kt(this.ctx),g=!s.globals.seriesYAxisMap[n].some(function(y){return-1===s.globals.collapsedSeriesIndices.indexOf(y)});return!s.config.yaxis[n].show||!s.config.yaxis[n].showForNullSeries&&c.isSeriesNull(n)&&g}},{key:"getYAxisForeColor",value:function(n,s){var c=this.w;return Array.isArray(n)&&c.globals.yAxisScale[s]&&this.ctx.theme.pushExtraColors(n,c.globals.yAxisScale[s].result.length,!1),n}},{key:"drawYAxisTicks",value:function(n,s,c,g,y,x,k){var M=this.w,R=new rt(this.ctx),j=M.globals.translateY;if(g.show&&s>0){!0===M.config.yaxis[y].opposite&&(n+=g.width);for(var U=s;U>=0;U--){var X=j+s/10+M.config.yaxis[y].labels.offsetY-1;M.globals.isBarHorizontal&&(X=x*U),"heatmap"===M.config.chart.type&&(X+=x/2);var ee=R.drawLine(n+c.offsetX-g.width+g.offsetX,X+g.offsetY,n+c.offsetX+g.offsetX,X+g.offsetY,g.color);k.add(ee),j+=x}}}}]),ue}(),tr=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"scaleSvgNode",value:function(n,s){var c=parseFloat(n.getAttributeNS(null,"width")),g=parseFloat(n.getAttributeNS(null,"height"));n.setAttributeNS(null,"width",c*s),n.setAttributeNS(null,"height",g*s),n.setAttributeNS(null,"viewBox","0 0 "+c+" "+g)}},{key:"fixSvgStringForIe11",value:function(n){if(!Ve.isIE11())return n.replace(/&nbsp;/g,"&#160;");var s=0,c=n.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(g){return 2==++s?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':g});return(c=c.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(n){null==n&&(n=1);var s=this.w.globals.dom.Paper.svg();if(1!==n){var c=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(c,n),s=(new XMLSerializer).serializeToString(c)}return this.fixSvgStringForIe11(s)}},{key:"cleanup",value:function(){var n=this.w,s=n.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),c=n.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),g=n.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(g,function(y){y.setAttribute("width",0)}),s&&s[0]&&(s[0].setAttribute("x",-500),s[0].setAttribute("x1",-500),s[0].setAttribute("x2",-500)),c&&c[0]&&(c[0].setAttribute("y",-100),c[0].setAttribute("y1",-100),c[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var n=this.getSvgString(),s=new Blob([n],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(s)}},{key:"dataURI",value:function(n){var s=this;return new Promise(function(c){var g=s.w,y=n?n.scale||n.width/g.globals.svgWidth:1;s.cleanup();var x=document.createElement("canvas");x.width=g.globals.svgWidth*y,x.height=parseInt(g.globals.dom.elWrap.style.height,10)*y;var k="transparent"===g.config.chart.background?"#fff":g.config.chart.background,M=x.getContext("2d");M.fillStyle=k,M.fillRect(0,0,x.width*y,x.height*y);var R=s.getSvgString(y);if(window.canvg&&Ve.isIE11()){var j=window.canvg.Canvg.fromString(M,R,{ignoreClear:!0,ignoreDimensions:!0});j.start();var U=x.msToBlob();j.stop(),c({blob:U})}else{var X="data:image/svg+xml,"+encodeURIComponent(R),ee=new Image;ee.crossOrigin="anonymous",ee.onload=function(){if(M.drawImage(ee,0,0),x.msToBlob){var ae=x.msToBlob();c({blob:ae})}else{var de=x.toDataURL("image/png");c({imgURI:de})}},ee.src=X}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var n=this;this.dataURI().then(function(s){var c=s.imgURI,g=s.blob;g?navigator.msSaveOrOpenBlob(g,n.w.globals.chartID+".png"):n.triggerDownload(c,n.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(n){var s=this,c=n.series,g=n.fileName,y=n.columnDelimiter,x=void 0===y?",":y,k=n.lineDelimiter,M=void 0===k?"\n":k,R=this.w;c||(c=R.config.series);var j,U,X=[],ee=[],ae="",de=R.globals.series.map(function(_e,Me){return-1===R.globals.collapsedSeriesIndices.indexOf(Me)?_e:[]}),ve=function(_e){return"datetime"===R.config.xaxis.type&&String(_e).length>=10},he=Math.max.apply(Math,it(c.map(function(_e){return _e.data?_e.data.length:0}))),be=new Pi(this.ctx),F=new gr(this.ctx),K=function(_e){var Me="";if(R.globals.axisCharts){if("category"===R.config.xaxis.type||R.config.xaxis.convertedCatToNumeric)if(R.globals.isBarHorizontal){var $e=R.globals.yLabelFormatters[0],wt=new xn(s.ctx).getActiveConfigSeriesIndex();Me=$e(R.globals.labels[_e],{seriesIndex:wt,dataPointIndex:_e,w:R})}else Me=F.getLabel(R.globals.labels,R.globals.timescaleLabels,0,_e).text;"datetime"===R.config.xaxis.type&&(R.config.xaxis.categories.length?Me=R.config.xaxis.categories[_e]:R.config.labels.length&&(Me=R.config.labels[_e]))}else Me=R.config.labels[_e];return Array.isArray(Me)&&(Me=Me.join(" ")),Ve.isNumber(Me)?Me:Me.split(x).join("")};X.push(R.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===R.config.chart.type?(X.push("minimum"),X.push("q1"),X.push("median"),X.push("q3"),X.push("maximum")):"candlestick"===R.config.chart.type?(X.push("open"),X.push("high"),X.push("low"),X.push("close")):"rangeBar"===R.config.chart.type?(X.push("minimum"),X.push("maximum")):c.map(function(_e,Me){var $e=(_e.name?_e.name:"series-".concat(Me))+"";R.globals.axisCharts&&X.push($e.split(x).join("")?$e.split(x).join(""):"series-".concat(Me))}),R.globals.axisCharts||(X.push(R.config.chart.toolbar.export.csv.headerValue),ee.push(X.join(x))),R.globals.allSeriesHasEqualX||!R.globals.axisCharts||R.config.xaxis.categories.length||R.config.labels.length?c.map(function(_e,Me){R.globals.axisCharts?function(_e,Me){if(X.length&&0===Me&&ee.push(X.join(x)),_e.data){_e.data=_e.data.length&&_e.data||it(Array(he)).map(function(){return""});for(var $e=0;$e<_e.data.length;$e++){X=[];var wt=K($e);if(wt||(be.isFormatXY()?wt=c[Me].data[$e].x:be.isFormat2DArray()&&(wt=c[Me].data[$e]?c[Me].data[$e][0]:"")),0===Me){X.push(ve(wt)?R.config.chart.toolbar.export.csv.dateFormatter(wt):Ve.isNumber(wt)?wt:wt.split(x).join(""));for(var kt=0;kt<R.globals.series.length;kt++){var Wt;be.isFormatXY()?X.push(null===(Wt=c[kt].data[$e])||void 0===Wt?void 0:Wt.y):X.push(de[kt][$e])}}("candlestick"===R.config.chart.type||_e.type&&"candlestick"===_e.type)&&(X.pop(),X.push(R.globals.seriesCandleO[Me][$e]),X.push(R.globals.seriesCandleH[Me][$e]),X.push(R.globals.seriesCandleL[Me][$e]),X.push(R.globals.seriesCandleC[Me][$e])),("boxPlot"===R.config.chart.type||_e.type&&"boxPlot"===_e.type)&&(X.pop(),X.push(R.globals.seriesCandleO[Me][$e]),X.push(R.globals.seriesCandleH[Me][$e]),X.push(R.globals.seriesCandleM[Me][$e]),X.push(R.globals.seriesCandleL[Me][$e]),X.push(R.globals.seriesCandleC[Me][$e])),"rangeBar"===R.config.chart.type&&(X.pop(),X.push(R.globals.seriesRangeStart[Me][$e]),X.push(R.globals.seriesRangeEnd[Me][$e])),X.length&&ee.push(X.join(x))}}}(_e,Me):((X=[]).push(R.globals.labels[Me].split(x).join("")),X.push(de[Me]),ee.push(X.join(x)))}):(j=new Set,U={},c.forEach(function(_e,Me){_e?.data.forEach(function($e){var wt,kt;if(be.isFormatXY())wt=$e.x,kt=$e.y;else{if(!be.isFormat2DArray())return;wt=$e[0],kt=$e[1]}U[wt]||(U[wt]=Array(c.length).fill("")),U[wt][Me]=kt,j.add(wt)})}),X.length&&ee.push(X.join(x)),Array.from(j).sort().forEach(function(_e){ee.push([ve(_e)&&"datetime"===R.config.xaxis.type?R.config.chart.toolbar.export.csv.dateFormatter(_e):Ve.isNumber(_e)?_e:_e.split(x).join(""),U[_e].join(x)])})),ae+=ee.join(M),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+ae),g||R.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(n,s,c){var g=document.createElement("a");g.href=n,g.download=(s||this.w.globals.chartID)+c,document.body.appendChild(g),g.click(),document.body.removeChild(g)}}]),ue}(),qn=function(){function ue(n,s){Y(this,ue),this.ctx=n,this.elgrid=s,this.w=n.w;var c=this.w;this.axesUtils=new gr(n),this.xaxisLabels=c.globals.labels.slice(),c.globals.timescaleLabels.length>0&&!c.globals.isBarHorizontal&&(this.xaxisLabels=c.globals.timescaleLabels.slice()),c.config.xaxis.overwriteCategories&&(this.xaxisLabels=c.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===c.config.xaxis.position?0:c.globals.gridHeight+1,this.offY=this.offY+c.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===c.config.chart.type&&c.config.plotOptions.bar.horizontal,this.xaxisFontSize=c.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=c.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=c.config.xaxis.labels.style.colors,this.xaxisBorderWidth=c.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=c.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?c.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=c.config.xaxis.axisBorder.height,this.yaxis=c.config.yaxis[0]}return ke(ue,[{key:"drawXaxis",value:function(){var n=this.w,s=new rt(this.ctx),c=s.group({class:"apexcharts-xaxis",transform:"translate(".concat(n.config.xaxis.offsetX,", ").concat(n.config.xaxis.offsetY,")")}),g=s.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(n.globals.translateXAxisX,", ").concat(n.globals.translateXAxisY,")")});c.add(g);for(var y=[],x=0;x<this.xaxisLabels.length;x++)y.push(this.xaxisLabels[x]);if(this.drawXAxisLabelAndGroup(!0,s,g,y,n.globals.isXNumeric,function(ae,de){return de}),n.globals.hasXaxisGroups){var k=n.globals.groups;y=[];for(var M=0;M<k.length;M++)y.push(k[M].title);var R={};n.config.xaxis.group.style&&(R.xaxisFontSize=n.config.xaxis.group.style.fontSize,R.xaxisFontFamily=n.config.xaxis.group.style.fontFamily,R.xaxisForeColors=n.config.xaxis.group.style.colors,R.fontWeight=n.config.xaxis.group.style.fontWeight,R.cssClass=n.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,s,g,y,!1,function(ae,de){return k[ae].cols*de},R)}if(void 0!==n.config.xaxis.title.text){var j=s.group({class:"apexcharts-xaxis-title"}),U=s.drawText({x:n.globals.gridWidth/2+n.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===n.config.xaxis.position?n.globals.xAxisLabelsHeight:-n.globals.xAxisLabelsHeight-10)+n.config.xaxis.title.offsetY,text:n.config.xaxis.title.text,textAnchor:"middle",fontSize:n.config.xaxis.title.style.fontSize,fontFamily:n.config.xaxis.title.style.fontFamily,fontWeight:n.config.xaxis.title.style.fontWeight,foreColor:n.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+n.config.xaxis.title.style.cssClass});j.add(U),c.add(j)}if(n.config.xaxis.axisBorder.show){var X=n.globals.barPadForNumericAxis,ee=s.drawLine(n.globals.padHorizontal+n.config.xaxis.axisBorder.offsetX-X,this.offY,this.xaxisBorderWidth+X,this.offY,n.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&n.config.grid.show?this.elgrid.elGridBorders.add(ee):c.add(ee)}return c}},{key:"drawXAxisLabelAndGroup",value:function(n,s,c,g,y,x){var k,M=this,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},j=[],U=[],X=this.w,ee=R.xaxisFontSize||this.xaxisFontSize,ae=R.xaxisFontFamily||this.xaxisFontFamily,de=R.xaxisForeColors||this.xaxisForeColors,ve=R.fontWeight||X.config.xaxis.labels.style.fontWeight,he=R.cssClass||X.config.xaxis.labels.style.cssClass,be=X.globals.padHorizontal,F=g.length,K="category"===X.config.xaxis.type?X.globals.dataPoints:F;0===K&&F>K&&(K=F),y?(k=X.globals.gridWidth/Math.min(K>1?K-1:K,F-1),be=be+x(0,k)/2+X.config.xaxis.labels.offsetX):be=be+x(0,k=X.globals.gridWidth/K)+X.config.xaxis.labels.offsetX;for(var _e=function($e){var wt=be-x($e,k)/2+X.config.xaxis.labels.offsetX;0===$e&&1===F&&k/2===be&&1===K&&(wt=X.globals.gridWidth/2);var kt=M.axesUtils.getLabel(g,X.globals.timescaleLabels,wt,$e,j,ee,n),Wt=28;if(X.globals.rotateXLabels&&n&&(Wt=22),X.config.xaxis.title.text&&"top"===X.config.xaxis.position&&(Wt+=parseFloat(X.config.xaxis.title.style.fontSize)+2),n||(Wt=Wt+parseFloat(ee)+(X.globals.xAxisLabelsHeight-X.globals.xAxisGroupLabelsHeight)+(X.globals.rotateXLabels?10:0)),kt=void 0!==X.config.xaxis.tickAmount&&"dataPoints"!==X.config.xaxis.tickAmount&&"datetime"!==X.config.xaxis.type?M.axesUtils.checkLabelBasedOnTickamount($e,kt,F):M.axesUtils.checkForOverflowingLabels($e,kt,F,j,U),X.config.xaxis.labels.show){var hi=s.drawText({x:kt.x,y:M.offY+X.config.xaxis.labels.offsetY+Wt-("top"===X.config.xaxis.position?X.globals.xAxisHeight+X.config.xaxis.axisTicks.height-2:0),text:kt.text,textAnchor:"middle",fontWeight:kt.isBold?600:ve,fontSize:ee,fontFamily:ae,foreColor:Array.isArray(de)?n&&X.config.xaxis.convertedCatToNumeric?de[X.globals.minX+$e-1]:de[$e]:de,isPlainText:!1,cssClass:(n?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+he});if(c.add(hi),hi.on("click",function(rn){if("function"==typeof X.config.chart.events.xAxisLabelClick){var gn=Object.assign({},X,{labelIndex:$e});X.config.chart.events.xAxisLabelClick(rn,M.ctx,gn)}}),n){var yi=document.createElementNS(X.globals.SVGNS,"title");yi.textContent=Array.isArray(kt.text)?kt.text.join(" "):kt.text,hi.node.appendChild(yi),""!==kt.text&&(j.push(kt.text),U.push(kt))}}$e<F-1&&(be+=x($e+1,k))},Me=0;Me<=F-1;Me++)_e(Me)}},{key:"drawXaxisInversed",value:function(n){var s,c,g=this,y=this.w,x=new rt(this.ctx),k=y.config.yaxis[0].opposite?y.globals.translateYAxisX[n]:0,M=x.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:n}),R=x.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+k+", 0)"});M.add(R);var j=[];if(y.config.yaxis[n].show)for(var U=0;U<this.xaxisLabels.length;U++)j.push(this.xaxisLabels[U]);c=-(s=y.globals.gridHeight/j.length)/2.2;var X=y.globals.yLabelFormatters[0],ee=y.config.yaxis[0].labels;if(ee.show)for(var ae=function(ce){var _e=void 0===j[ce]?"":j[ce];_e=X(_e,{seriesIndex:n,dataPointIndex:ce,w:y});var Me=g.axesUtils.getYAxisForeColor(ee.style.colors,n),$e=0;Array.isArray(_e)&&($e=_e.length/2*parseInt(ee.style.fontSize,10));var wt=ee.offsetX-15,kt="end";g.yaxis.opposite&&(kt="start"),"left"===y.config.yaxis[0].labels.align?(wt=ee.offsetX,kt="start"):"center"===y.config.yaxis[0].labels.align?(wt=ee.offsetX,kt="middle"):"right"===y.config.yaxis[0].labels.align&&(kt="end");var Wt=x.drawText({x:wt,y:c+s+ee.offsetY-$e,text:_e,textAnchor:kt,foreColor:Array.isArray(Me)?Me[ce]:Me,fontSize:ee.style.fontSize,fontFamily:ee.style.fontFamily,fontWeight:ee.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+ee.style.cssClass,maxWidth:ee.maxWidth});R.add(Wt),Wt.on("click",function(rn){if("function"==typeof y.config.chart.events.xAxisLabelClick){var gn=Object.assign({},y,{labelIndex:ce});y.config.chart.events.xAxisLabelClick(rn,g.ctx,gn)}});var hi=document.createElementNS(y.globals.SVGNS,"title");if(hi.textContent=Array.isArray(_e)?_e.join(" "):_e,Wt.node.appendChild(hi),0!==y.config.yaxis[n].labels.rotate){var yi=x.rotateAroundCenter(Wt.node);Wt.node.setAttribute("transform","rotate(".concat(y.config.yaxis[n].labels.rotate," 0 ").concat(yi.y,")"))}c+=s},de=0;de<=j.length-1;de++)ae(de);if(void 0!==y.config.yaxis[0].title.text){var ve=x.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+k+", 0)"}),he=x.drawText({x:y.config.yaxis[0].title.offsetX,y:y.globals.gridHeight/2+y.config.yaxis[0].title.offsetY,text:y.config.yaxis[0].title.text,textAnchor:"middle",foreColor:y.config.yaxis[0].title.style.color,fontSize:y.config.yaxis[0].title.style.fontSize,fontWeight:y.config.yaxis[0].title.style.fontWeight,fontFamily:y.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+y.config.yaxis[0].title.style.cssClass});ve.add(he),M.add(ve)}var be=0;this.isCategoryBarHorizontal&&y.config.yaxis[0].opposite&&(be=y.globals.gridWidth);var F=y.config.xaxis.axisBorder;if(F.show){var K=x.drawLine(y.globals.padHorizontal+F.offsetX+be,1+F.offsetY,y.globals.padHorizontal+F.offsetX+be,y.globals.gridHeight+F.offsetY,F.color,0);this.elgrid&&this.elgrid.elGridBorders&&y.config.grid.show?this.elgrid.elGridBorders.add(K):M.add(K)}return y.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(be,j.length,y.config.yaxis[0].axisBorder,y.config.yaxis[0].axisTicks,0,s,M),M}},{key:"drawXaxisTicks",value:function(n,s,c){var g=this.w,y=n;if(!(n<0||n-2>g.globals.gridWidth)){var x=this.offY+g.config.xaxis.axisTicks.offsetY;if(s=s+x+g.config.xaxis.axisTicks.height,"top"===g.config.xaxis.position&&(s=x-g.config.xaxis.axisTicks.height),g.config.xaxis.axisTicks.show){var k=new rt(this.ctx).drawLine(n+g.config.xaxis.axisTicks.offsetX,x+g.config.xaxis.offsetY,y+g.config.xaxis.axisTicks.offsetX,s+g.config.xaxis.offsetY,g.config.xaxis.axisTicks.color);c.add(k),k.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var n=this.w,s=[],c=this.xaxisLabels.length,g=n.globals.padHorizontal;if(n.globals.timescaleLabels.length>0)for(var y=0;y<c;y++)s.push(g=this.xaxisLabels[y].position);else for(var x=c,k=0;k<x;k++){var M=x;n.globals.isXNumeric&&"bar"!==n.config.chart.type&&(M-=1),s.push(g+=n.globals.gridWidth/M)}return s}},{key:"xAxisLabelCorrections",value:function(){var n=this.w,s=new rt(this.ctx),c=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),g=n.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),y=n.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),x=n.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(n.globals.rotateXLabels||n.config.xaxis.labels.rotateAlways)for(var k=0;k<g.length;k++){var M=s.rotateAroundCenter(g[k]);M.y=M.y-1,M.x=M.x+1,g[k].setAttribute("transform","rotate(".concat(n.config.xaxis.labels.rotate," ").concat(M.x," ").concat(M.y,")")),g[k].setAttribute("text-anchor","end"),c.setAttribute("transform","translate(0, ".concat(-10,")")),n.config.xaxis.labels.trim&&Array.prototype.forEach.call(g[k].childNodes,function(ee){s.placeTextWithEllipsis(ee,ee.textContent,n.globals.xAxisLabelsHeight-("bottom"===n.config.legend.position?20:10))})}else!function(){for(var ee=n.globals.gridWidth/(n.globals.labels.length+1),ae=0;ae<g.length;ae++)n.config.xaxis.labels.trim&&"datetime"!==n.config.xaxis.type&&Array.prototype.forEach.call(g[ae].childNodes,function(ve){s.placeTextWithEllipsis(ve,ve.textContent,ee)})}();if(y.length>0){var j=y[y.length-1].getBBox(),U=y[0].getBBox();j.x<-20&&y[y.length-1].parentNode.removeChild(y[y.length-1]),U.x+U.width>n.globals.gridWidth&&!n.globals.isBarHorizontal&&y[0].parentNode.removeChild(y[0]);for(var X=0;X<x.length;X++)s.placeTextWithEllipsis(x[X],x[X].textContent,n.config.yaxis[0].labels.maxWidth-(n.config.yaxis[0].title.text?2*parseFloat(n.config.yaxis[0].title.style.fontSize):0)-15)}}}]),ue}(),hn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w;var s=this.w;this.xaxisLabels=s.globals.labels.slice(),this.axesUtils=new gr(n),this.isRangeBar=s.globals.seriesRange.length&&s.globals.isBarHorizontal,s.globals.timescaleLabels.length>0&&(this.xaxisLabels=s.globals.timescaleLabels.slice())}return ke(ue,[{key:"drawGridArea",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=this.w,c=new rt(this.ctx);null===n&&(n=c.group({class:"apexcharts-grid"}));var g=c.drawLine(s.globals.padHorizontal,1,s.globals.padHorizontal,s.globals.gridHeight,"transparent"),y=c.drawLine(s.globals.padHorizontal,s.globals.gridHeight,s.globals.gridWidth,s.globals.gridHeight,"transparent");return n.add(y),n.add(g),n}},{key:"drawGrid",value:function(){var n=null;return this.w.globals.axisCharts&&(n=this.renderGrid(),this.drawGridArea(n.el)),n}},{key:"createGridMask",value:function(){var n=this.w,s=n.globals,c=new rt(this.ctx),g=Array.isArray(n.config.stroke.width)?0:n.config.stroke.width;if(Array.isArray(n.config.stroke.width)){var y=0;n.config.stroke.width.forEach(function(U){y=Math.max(y,U)}),g=y}s.dom.elGridRectMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(s.cuid)),s.dom.elGridRectMarkerMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(s.cuid)),s.dom.elForecastMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elForecastMask.setAttribute("id","forecastMask".concat(s.cuid)),s.dom.elNonForecastMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(s.cuid));var x=n.config.chart.type,k=0,M=0;("bar"===x||"rangeBar"===x||"candlestick"===x||"boxPlot"===x||n.globals.comboBarCount>0)&&n.globals.isXNumeric&&!n.globals.isBarHorizontal&&(M=n.config.grid.padding.right,s.barPadForNumericAxis>(k=n.config.grid.padding.left)&&(k=s.barPadForNumericAxis,M=s.barPadForNumericAxis)),s.dom.elGridRect=c.drawRect(-g-k-2,2*-g-2,s.gridWidth+g+M+k+4,s.gridHeight+4*g+4,0,"#fff");var R=n.globals.markers.largestSize+1;s.dom.elGridRectMarker=c.drawRect(2*-R,2*-R,s.gridWidth+4*R,s.gridHeight+4*R,0,"#fff"),s.dom.elGridRectMask.appendChild(s.dom.elGridRect.node),s.dom.elGridRectMarkerMask.appendChild(s.dom.elGridRectMarker.node);var j=s.dom.baseEl.querySelector("defs");j.appendChild(s.dom.elGridRectMask),j.appendChild(s.dom.elForecastMask),j.appendChild(s.dom.elNonForecastMask),j.appendChild(s.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(n){var s=n.i,c=n.x1,k=n.xCount,R=this.w;if(!(0===s&&R.globals.skipFirstTimelinelabel||s===k-1&&R.globals.skipLastTimelinelabel&&!R.config.xaxis.labels.formatter||"radar"===R.config.chart.type)){R.config.grid.xaxis.lines.show&&this._drawGridLine({i:s,x1:c,y1:n.y1,x2:n.x2,y2:n.y2,xCount:k,parent:n.parent});var j=0;if(R.globals.hasXaxisGroups&&"between"===R.config.xaxis.tickPlacement){var U=R.globals.groups;if(U){for(var X=0,ee=0;X<s&&ee<U.length;ee++)X+=U[ee].cols;X===s&&(j=.6*R.globals.xAxisLabelsHeight)}}new qn(this.ctx).drawXaxisTicks(c,j,R.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(n){var s=n.i,c=n.x1,g=n.y1,y=n.x2,x=n.y2,k=n.xCount,M=n.parent,R=this.w,j=!1,U=M.node.classList.contains("apexcharts-gridlines-horizontal"),X=R.config.grid.strokeDashArray,ee=R.globals.barPadForNumericAxis;(0===g&&0===x||0===c&&0===y)&&(j=!0),g===R.globals.gridHeight&&x===R.globals.gridHeight&&(j=!0),!R.globals.isBarHorizontal||0!==s&&s!==k-1||(j=!0);var ae=new rt(this).drawLine(c-(U?ee:0),g,y+(U?ee:0),x,R.config.grid.borderColor,X);ae.node.classList.add("apexcharts-gridline"),j&&R.config.grid.show?this.elGridBorders.add(ae):M.add(ae)}},{key:"_drawGridBandRect",value:function(n){var s=n.c,c=n.x1,g=n.y1,y=n.x2,x=n.y2,k=n.type,M=this.w,R=new rt(this.ctx),j=M.globals.barPadForNumericAxis;if("column"!==k||"datetime"!==M.config.xaxis.type){var X=R.drawRect(c-("row"===k?j:0),g,y+("row"===k?2*j:0),x,0,M.config.grid[k].colors[s],M.config.grid[k].opacity);this.elg.add(X),X.attr("clip-path","url(#gridRectMask".concat(M.globals.cuid,")")),X.node.classList.add("apexcharts-grid-".concat(k))}}},{key:"_drawXYLines",value:function(n){var s=this,c=n.xCount,g=n.tickAmount,y=this.w;if(y.config.grid.xaxis.lines.show||y.config.xaxis.axisTicks.show){var x,k=y.globals.padHorizontal,M=y.globals.gridHeight;y.globals.timescaleLabels.length?function(ae){for(var de=ae.xC,he=ae.y1,F=ae.y2,K=0;K<de;K++)s._drawGridLines({i:K,x1:s.xaxisLabels[K].position,y1:he,x2:s.xaxisLabels[K].position,y2:F,xCount:c,parent:s.elgridLinesV})}({xC:c,x1:k,y1:0,x2:x,y2:M}):(y.globals.isXNumeric&&(c=y.globals.xAxisScale.result.length),function(ae){for(var de=ae.xC,ve=ae.x1,he=ae.y1,be=ae.x2,F=ae.y2,K=0;K<de+(y.globals.isXNumeric?0:1);K++)0===K&&1===de&&1===y.globals.dataPoints&&(be=ve=y.globals.gridWidth/2),s._drawGridLines({i:K,x1:ve,y1:he,x2:be,y2:F,xCount:c,parent:s.elgridLinesV}),be=ve+=y.globals.gridWidth/(y.globals.isXNumeric?de-1:de)}({xC:c,x1:k,y1:0,x2:x,y2:M}))}if(y.config.grid.yaxis.lines.show){var R=0,j=0,U=y.globals.gridWidth,X=g+1;this.isRangeBar&&(X=y.globals.labels.length);for(var ee=0;ee<X+(this.isRangeBar?1:0);ee++)this._drawGridLine({i:ee,xCount:X+(this.isRangeBar?1:0),x1:0,y1:R,x2:U,y2:j,parent:this.elgridLinesH}),j=R+=y.globals.gridHeight/(this.isRangeBar?X:g)}}},{key:"_drawInvertedXYLines",value:function(n){var s=n.xCount,c=this.w;if(c.config.grid.xaxis.lines.show||c.config.xaxis.axisTicks.show)for(var g,y=c.globals.padHorizontal,x=c.globals.gridHeight,k=0;k<s+1;k++)c.config.grid.xaxis.lines.show&&this._drawGridLine({i:k,xCount:s+1,x1:y,y1:0,x2:g,y2:x,parent:this.elgridLinesV}),new qn(this.ctx).drawXaxisTicks(y,0,c.globals.dom.elGraphical),g=y=y+c.globals.gridWidth/s+.3;if(c.config.grid.yaxis.lines.show)for(var M=0,R=0,j=c.globals.gridWidth,U=0;U<c.globals.dataPoints+1;U++)this._drawGridLine({i:U,xCount:c.globals.dataPoints+1,x1:0,y1:M,x2:j,y2:R,parent:this.elgridLinesH}),R=M+=c.globals.gridHeight/c.globals.dataPoints}},{key:"renderGrid",value:function(){var n=this.w,s=new rt(this.ctx);this.elg=s.group({class:"apexcharts-grid"}),this.elgridLinesH=s.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=s.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=s.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),n.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var c=0;c<n.globals.seriesYAxisMap.length&&-1!==n.globals.ignoreYAxisIndexes.indexOf(c);)c++;c===n.globals.seriesYAxisMap.length&&(c=0);var g,x,k,M,y=n.globals.yAxisScale[c].result.length-1;return!n.globals.isBarHorizontal||this.isRangeBar?(g=this.xaxisLabels.length,this.isRangeBar&&(g--,y=n.globals.labels.length,n.config.xaxis.tickAmount&&n.config.xaxis.labels.formatter&&(g=n.config.xaxis.tickAmount),(null===(x=n.globals.yAxisScale)||void 0===x||null===(k=x[c])||void 0===k||null===(M=k.result)||void 0===M?void 0:M.length)>0&&"datetime"!==n.config.xaxis.type&&(g=n.globals.yAxisScale[c].result.length-1)),this._drawXYLines({xCount:g,tickAmount:y})):this._drawInvertedXYLines({xCount:g=y,tickAmount:y=n.globals.xTickAmount}),this.drawGridBands(g,y),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:n.globals.gridWidth/g}}},{key:"drawGridBands",value:function(n,s){var c=this.w;if(void 0!==c.config.grid.row.colors&&c.config.grid.row.colors.length>0)for(var g=0,y=c.globals.gridHeight/s,x=c.globals.gridWidth,k=0,M=0;k<s;k++,M++)M>=c.config.grid.row.colors.length&&(M=0),this._drawGridBandRect({c:M,x1:0,y1:g,x2:x,y2:y,type:"row"}),g+=c.globals.gridHeight/s;if(void 0!==c.config.grid.column.colors&&c.config.grid.column.colors.length>0)for(var R=c.globals.isBarHorizontal||"on"!==c.config.xaxis.tickPlacement||"category"!==c.config.xaxis.type&&!c.config.xaxis.convertedCatToNumeric?n:n-1,j=c.globals.padHorizontal,U=c.globals.padHorizontal+c.globals.gridWidth/R,X=c.globals.gridHeight,ee=0,ae=0;ee<n;ee++,ae++)ae>=c.config.grid.column.colors.length&&(ae=0),this._drawGridBandRect({c:ae,x1:j,y1:0,x2:U,y2:X,type:"column"}),j+=c.globals.gridWidth/R}}]),ue}(),Ui=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"niceScale",value:function(n,s){var c,g,y,x,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,M=1e-11,R=this.w,j=R.globals;j.isBarHorizontal?(c=R.config.xaxis,g=Math.max((j.svgWidth-100)/25,2)):(c=R.config.yaxis[k],g=Math.max((j.svgHeight-100)/15,2)),y=null!=c.min,x=void 0!==c.max&&null!==c.min;var U=null!=c.stepSize,X=null!=c.tickAmount,ee=X?c.tickAmount:c.forceNiceScale?j.niceScaleDefaultTicks[Math.min(Math.round(g/2),j.niceScaleDefaultTicks.length-1)]:10;if(j.isMultipleYAxis&&!X&&j.multiAxisTickAmount>0&&(ee=j.multiAxisTickAmount,X=!0),ee="dataPoints"===ee?j.dataPoints-1:Math.abs(Math.round(ee)),(n===Number.MIN_VALUE&&0===s||!Ve.isNumber(n)&&!Ve.isNumber(s)||n===Number.MIN_VALUE&&s===-Number.MAX_VALUE)&&(n=0,s=ee,j.allSeriesCollapsed=!1),n>s){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var ae=s;s=n,n=ae}else n===s&&(n=0===n?0:n-1,s=0===s?2:s+1);var de=[];ee<1&&(ee=1);var ve=ee,he=Math.abs(s-n);c.forceNiceScale&&(!y&&n>0&&n/he<.15&&(n=0,y=!0),!x&&s<0&&-s/he<.15&&(s=0,x=!0),he=Math.abs(s-n));var be=he/ve,F=be,K=Math.floor(Math.log10(F)),ce=Math.pow(10,K),_e=Math.ceil(F/ce);if(be=F=(_e=j.niceScaleAllowedMagMsd[0===j.yValueDecimal?0:1][_e])*ce,j.isBarHorizontal&&c.stepSize&&"datetime"!==c.type?(be=c.stepSize,U=!0):U&&(be=c.stepSize),U&&c.forceNiceScale){var Me=Math.floor(Math.log10(be));be*=Math.pow(10,K-Me)}if(y&&x){var $e=he/ve;if(X)if(U)if(0!=Ve.mod(he,be)){var wt=Ve.getGCD(be,$e);be=$e/wt<10?wt:$e}else 0==Ve.mod(be,$e)?be=$e:($e=be,X=!1);else be=$e;else if(U)0==Ve.mod(he,be)?$e=be:be=$e;else if(0==Ve.mod(he,be))$e=be;else{$e=he/(ve=Math.ceil(he/be));var kt=Ve.getGCD(he,be);he/kt<g&&($e=kt),be=$e}ve=Math.round(he/be)}else{if(y||x)if(x)if(X)n=s-be*ve;else{var Wt=n;n=be*Math.floor(n/be),Math.abs(s-n)/Ve.getGCD(he,be)>g&&(n=s-be*ee,n+=be*Math.floor((Wt-n)/be))}else y&&(s=X?n+be*ve:be*Math.ceil(s/be));else if(X){var hi=be/(s-n>s?1:2),yi=hi*Math.floor(n/hi);Math.abs(yi-n)<=hi/2?s=(n=yi)+be*ve:n=(s=hi*Math.ceil(s/hi))-be*ve}else n=be*Math.floor(n/be),s=be*Math.ceil(s/be);he=Math.abs(s-n),be=Ve.getGCD(he,be),ve=Math.round(he/be)}if(X||y||x||(ve=Math.ceil((he-M)/(be+M)))>16&&Ve.getPrimeFactors(ve).length<2&&ve++,j.isMultipleYAxis&&0==j.multiAxisTickAmount&&(j.multiAxisTickAmount=ve),ve>g&&(!X&&!U||c.forceNiceScale)){var rn=Ve.getPrimeFactors(ve),gn=rn.length-1,An=ve;e:for(var $n=0;$n<gn;$n++)for(var Jn=0;Jn<=gn-$n;Jn++){for(var Qn=Math.min(Jn+$n,gn),wr=An,Pr=1,Rr=Jn;Rr<=Qn;Rr++)Pr*=rn[Rr];if((wr/=Pr)<g){An=wr;break e}}be=An===ve?he:he/An}var yr=n-be,Un=be*M;do{de.push(Ve.stripNumber(yr+=be,7))}while(s-yr>Un);return{result:de,niceMin:de[0],niceMax:de[de.length-1]}}},{key:"linearScale",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,x=Math.abs(s-n);"dataPoints"===(c=this._adjustTicksForSmallRange(c,g,x))&&(c=this.w.globals.dataPoints-1),y||(y=x/c),c===Number.MAX_VALUE&&(c=5,y=1);for(var k=[],M=n;c>=0;)k.push(M),M+=y,c-=1;return{result:k,niceMin:k[0],niceMax:k[k.length-1]}}},{key:"logarithmicScaleNice",value:function(n,s,c){s<=0&&(s=Math.max(n,c)),n<=0&&(n=Math.min(s,c));for(var g=[],y=Math.ceil(Math.log(s)/Math.log(c)+1),x=Math.floor(Math.log(n)/Math.log(c));x<y;x++)g.push(Math.pow(c,x));return{result:g,niceMin:g[0],niceMax:g[g.length-1]}}},{key:"logarithmicScale",value:function(n,s,c){s<=0&&(s=Math.max(n,c)),n<=0&&(n=Math.min(s,c));for(var g=[],y=Math.log(s)/Math.log(c),x=Math.log(n)/Math.log(c),k=y-x,M=Math.round(k),R=k/M,j=0,U=x;j<M;j++,U+=R)g.push(Math.pow(c,U));return g.push(Math.pow(c,y)),{result:g,niceMin:n,niceMax:s}}},{key:"_adjustTicksForSmallRange",value:function(n,s,c){var g=n;if(void 0!==s&&this.w.config.yaxis[s].labels.formatter&&void 0===this.w.config.yaxis[s].tickAmount){var y=Number(this.w.config.yaxis[s].labels.formatter(1));Ve.isNumber(y)&&0===this.w.globals.yValueDecimal&&(g=Math.ceil(c))}return g<n?g:n}},{key:"setYScaleForIndex",value:function(n,s,c){var g=this.w.globals,y=this.w.config,x=g.isBarHorizontal?y.xaxis:y.yaxis[n];void 0===g.yAxisScale[n]&&(g.yAxisScale[n]=[]);var k=Math.abs(c-s);x.logarithmic&&k<=5&&(g.invalidLogScale=!0),x.logarithmic&&k>5?(g.allSeriesCollapsed=!1,g.yAxisScale[n]=x.forceNiceScale?this.logarithmicScaleNice(s,c,x.logBase):this.logarithmicScale(s,c,x.logBase)):c!==-Number.MAX_VALUE&&Ve.isNumber(c)?(g.allSeriesCollapsed=!1,g.yAxisScale[n]=this.niceScale(s,c,n)):g.yAxisScale[n]=this.linearScale(0,10,10,n,y.yaxis[n].stepSize)}},{key:"setXScale",value:function(n,s){var c=this.w,g=c.globals,y=Math.abs(s-n);return g.xAxisScale=s!==-Number.MAX_VALUE&&Ve.isNumber(s)?this.linearScale(n,s,c.config.xaxis.tickAmount?c.config.xaxis.tickAmount:y<10&&y>1?y+1:10,0,c.config.xaxis.stepSize):this.linearScale(0,10,10),g.xAxisScale}},{key:"setMultipleYScales",value:function(){var n=this.w.globals,s=this.w.config,c=n.minYArr,g=n.maxYArr,y=[],x=[],k=[];s.series.forEach(function(X,ee){k.push(ee),x.push(null)});var M,R=[];s.yaxis.forEach(function(X,ee){if(X.seriesName){var ae=[];Array.isArray(X.seriesName)?ae=X.seriesName:ae.push(X.seriesName),y[ee]=[],ae.forEach(function(de){s.series.forEach(function(ve,he){if(ve.name===de){y[ee].push(he),x[he]=ee;var be=k.indexOf(he);k.splice(be,1)}})})}else R.push(ee)});for(var j=0;j<R.length&&(y[M=R[j]]=[],k);j++){var U=k[0];k.shift(),y[M].push(U),x[U]=M}M&&k.forEach(function(X){y[M].push(X),x[X]=M}),n.seriesYAxisMap=y.map(function(X){return X}),n.seriesYAxisReverseMap=x.map(function(X){return X}),this.sameScaleInMultipleAxes(c,g,y)}},{key:"sameScaleInMultipleAxes",value:function(n,s,c){var g=this,y=this.w.config,x=this.w.globals,k=[];c.forEach(function(R,j){for(var U=j+1;U<c.length;U++){var X,ee=Qt(R.values());try{for(ee.s();!(X=ee.n()).done;){var de=c[U].indexOf(X.value);-1!==de&&(R.push(U),c[U].splice(de,1))}}catch(ve){ee.e(ve)}finally{ee.f()}c[U].length<1&&-1===k.indexOf(U)&&k.push(U)}});for(var M=k.length-1;M>=0;M--)c.splice(k[M],1);c.forEach(function(R,j){var U=Number.MAX_VALUE,X=-Number.MAX_VALUE;if(y.chart.stacked){for(var ee=x.seriesX[R[0]].map(function(Me){return Number.MIN_VALUE}),ae=x.seriesX[R[0]].map(function(Me){return Number.MIN_VALUE}),de=x.seriesX[R[0]].map(function(Me){return Number.MIN_VALUE}),ve=y.series[R[0]].type,he=0;he<R.length;he++){var be=R[he];if(-1===x.collapsedSeriesIndices.indexOf(be))for(var F=0;F<x.series[be].length;F++){var K=x.series[be][F];K>=0?ae[F]+=K:de[F]+=K,ee[F]+=K}}"bar"===ve?(U=Math.min.apply(null,de),X=Math.max.apply(null,ae)):(U=Math.min.apply(null,ee),X=Math.max.apply(null,ee))}else{for(var ce=0;ce<R.length;ce++)U=Math.min(U,n[R[ce]]);for(var _e=0;_e<R.length;_e++)X=Math.max(X,s[R[_e]])}void 0!==y.yaxis[j].min&&(U="function"==typeof y.yaxis[j].min?y.yaxis[j].min(U):y.yaxis[j].min),void 0!==y.yaxis[j].max&&(X="function"==typeof y.yaxis[j].max?y.yaxis[j].max(X):y.yaxis[j].max),g.setYScaleForIndex(j,U,X),R.forEach(function(Me){n[Me]=x.yAxisScale[j].niceMin,s[Me]=x.yAxisScale[j].niceMax})})}}]),ue}(),cn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.scales=new Ui(n)}return ke(ue,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,y=this.w.config,x=this.w.globals,k=-Number.MAX_VALUE,M=Number.MIN_VALUE;null===g&&(g=n+1);var R=0,j=0,U=void 0;if(x.seriesX.length>=g){var X,ee;R=0,j=(U=it(new Set((X=[]).concat.apply(X,it(x.seriesX.slice(n,g)))))).length-1;var ae=null===(ee=x.brushSource)||void 0===ee?void 0:ee.w.config.chart.brush;if(y.chart.zoom.enabled&&y.chart.zoom.autoScaleYaxis||null!=ae&&ae.enabled&&null!=ae&&ae.autoScaleYaxis){if(y.xaxis.min)for(R=0;R<j&&U[R]<=y.xaxis.min;R++);if(y.xaxis.max)for(;j>R&&U[j]>=y.xaxis.max;j--);}}var de=x.series,ve=de,he=de;"candlestick"===y.chart.type?(ve=x.seriesCandleL,he=x.seriesCandleH):"boxPlot"===y.chart.type?(ve=x.seriesCandleO,he=x.seriesCandleC):x.isRangeData&&(ve=x.seriesRangeStart,he=x.seriesRangeEnd);for(var be=n;be<g;be++){x.dataPoints=Math.max(x.dataPoints,de[be].length);var F=y.series[be].type;x.categoryLabels.length&&(x.dataPoints=x.categoryLabels.filter(function(_e){return void 0!==_e}).length),x.labels.length&&"datetime"!==y.xaxis.type&&0!==x.series.reduce(function(_e,Me){return _e+Me.length},0)&&(x.dataPoints=Math.max(x.dataPoints,x.labels.length)),U||(R=0,j=x.series[be].length);for(var K=R;K<=j&&K<x.series[be].length;K++){var ce=de[be][K];if(null!==ce&&Ve.isNumber(ce)){switch(void 0!==he[be][K]&&(k=Math.max(k,he[be][K]),s=Math.min(s,he[be][K])),void 0!==ve[be][K]&&(s=Math.min(s,ve[be][K]),c=Math.max(c,ve[be][K])),F){case"candlestick":void 0!==x.seriesCandleC[be][K]&&(k=Math.max(k,x.seriesCandleH[be][K]),s=Math.min(s,x.seriesCandleL[be][K]));case"boxPlot":void 0!==x.seriesCandleC[be][K]&&(k=Math.max(k,x.seriesCandleC[be][K]),s=Math.min(s,x.seriesCandleO[be][K]))}F&&"candlestick"!==F&&"boxPlot"!==F&&"rangeArea"!==F&&"rangeBar"!==F&&(k=Math.max(k,x.series[be][K]),s=Math.min(s,x.series[be][K])),c=k,x.seriesGoals[be]&&x.seriesGoals[be][K]&&Array.isArray(x.seriesGoals[be][K])&&x.seriesGoals[be][K].forEach(function(_e){M!==Number.MIN_VALUE&&(M=Math.min(M,_e.value),s=M),k=Math.max(k,_e.value),c=k}),Ve.isFloat(ce)&&(ce=Ve.noExponents(ce),x.yValueDecimal=Math.max(x.yValueDecimal,ce.toString().split(".")[1].length)),M>ve[be][K]&&ve[be][K]<0&&(M=ve[be][K])}else x.hasNullValues=!0}"bar"!==F&&"column"!==F||(M<0&&k<0&&(k=0,c=Math.max(c,0)),M===Number.MIN_VALUE&&(M=0,s=Math.min(s,0)))}return"rangeBar"===y.chart.type&&x.seriesRangeStart.length&&x.isBarHorizontal&&(M=s),"bar"===y.chart.type&&(M<0&&k<0&&(k=0),M===Number.MIN_VALUE&&(M=0)),{minY:M,maxY:k,lowestY:s,highestY:c}}},{key:"setYRange",value:function(){var n=this.w.globals,s=this.w.config;n.maxY=-Number.MAX_VALUE,n.minY=Number.MIN_VALUE;var c,g=Number.MAX_VALUE;if(n.isMultipleYAxis){g=Number.MAX_VALUE;for(var y=0;y<n.series.length;y++)c=this.getMinYMaxY(y),n.minYArr[y]=c.lowestY,n.maxYArr[y]=c.highestY,g=Math.min(g,c.lowestY)}return c=this.getMinYMaxY(0,g,null,n.series.length),"bar"===s.chart.type?(n.minY=c.minY,n.maxY=c.maxY):(n.minY=c.lowestY,n.maxY=c.highestY),g=c.lowestY,s.chart.stacked&&this._setStackedMinMax(),"line"===s.chart.type||"area"===s.chart.type||"scatter"===s.chart.type||"candlestick"===s.chart.type||"boxPlot"===s.chart.type||"rangeBar"===s.chart.type&&!n.isBarHorizontal?n.minY===Number.MIN_VALUE&&g!==-Number.MAX_VALUE&&g!==n.maxY&&(n.minY=g):n.minY=c.minY,s.yaxis.forEach(function(x,k){void 0!==x.max&&("number"==typeof x.max?n.maxYArr[k]=x.max:"function"==typeof x.max&&(n.maxYArr[k]=x.max(n.isMultipleYAxis?n.maxYArr[k]:n.maxY)),n.maxY=n.maxYArr[k]),void 0!==x.min&&("number"==typeof x.min?n.minYArr[k]=x.min:"function"==typeof x.min&&(n.minYArr[k]=x.min(n.isMultipleYAxis?n.minYArr[k]===Number.MIN_VALUE?0:n.minYArr[k]:n.minY)),n.minY=n.minYArr[k])}),n.isBarHorizontal&&["min","max"].forEach(function(x){void 0!==s.xaxis[x]&&"number"==typeof s.xaxis[x]&&("min"===x?n.minY=s.xaxis[x]:n.maxY=s.xaxis[x])}),n.isMultipleYAxis?(this.scales.setMultipleYScales(),n.minY=g):(this.scales.setYScaleForIndex(0,n.minY,n.maxY),n.minY=n.yAxisScale[0].niceMin,n.maxY=n.yAxisScale[0].niceMax,n.minYArr[0]=n.yAxisScale[0].niceMin,n.maxYArr[0]=n.yAxisScale[0].niceMax,n.seriesYAxisMap=[n.series.map(function(x,k){return k})],n.seriesYAxisReverseMap=n.series.map(function(x,k){return 0})),{minY:n.minY,maxY:n.maxY,minYArr:n.minYArr,maxYArr:n.maxYArr,yAxisScale:n.yAxisScale}}},{key:"setXRange",value:function(){var n=this.w.globals,s=this.w.config,c="numeric"===s.xaxis.type||"datetime"===s.xaxis.type||"category"===s.xaxis.type&&!n.noLabelsProvided||n.noLabelsProvided||n.isXNumeric;if(n.isXNumeric&&function(){for(var k=0;k<n.series.length;k++)if(n.labels[k])for(var M=0;M<n.labels[k].length;M++)null!==n.labels[k][M]&&Ve.isNumber(n.labels[k][M])&&(n.maxX=Math.max(n.maxX,n.labels[k][M]),n.initialMaxX=Math.max(n.maxX,n.labels[k][M]),n.minX=Math.min(n.minX,n.labels[k][M]),n.initialMinX=Math.min(n.minX,n.labels[k][M]))}(),n.noLabelsProvided&&0===s.xaxis.categories.length&&(n.maxX=n.labels[n.labels.length-1],n.initialMaxX=n.labels[n.labels.length-1],n.minX=1,n.initialMinX=1),n.isXNumeric||n.noLabelsProvided||n.dataFormatXNumeric){var g;if(void 0===s.xaxis.tickAmount?(g=Math.round(n.svgWidth/150),"numeric"===s.xaxis.type&&n.dataPoints<30&&(g=n.dataPoints-1),g>n.dataPoints&&0!==n.dataPoints&&(g=n.dataPoints-1)):"dataPoints"===s.xaxis.tickAmount?(n.series.length>1&&(g=n.series[n.maxValsInArrayIndex].length-1),n.isXNumeric&&(g=n.maxX-n.minX-1)):g=s.xaxis.tickAmount,n.xTickAmount=g,void 0!==s.xaxis.max&&"number"==typeof s.xaxis.max&&(n.maxX=s.xaxis.max),void 0!==s.xaxis.min&&"number"==typeof s.xaxis.min&&(n.minX=s.xaxis.min),void 0!==s.xaxis.range&&(n.minX=n.maxX-s.xaxis.range),n.minX!==Number.MAX_VALUE&&n.maxX!==-Number.MAX_VALUE)if(s.xaxis.convertedCatToNumeric&&!n.dataFormatXNumeric){for(var y=[],x=n.minX-1;x<n.maxX;x++)y.push(x+1);n.xAxisScale={result:y,niceMin:y[0],niceMax:y[y.length-1]}}else n.xAxisScale=this.scales.setXScale(n.minX,n.maxX);else n.xAxisScale=this.scales.linearScale(0,g,g,0,s.xaxis.stepSize),n.noLabelsProvided&&n.labels.length>0&&(n.xAxisScale=this.scales.linearScale(1,n.labels.length,g-1,0,s.xaxis.stepSize),n.seriesX=n.labels.slice());c&&(n.labels=n.xAxisScale.result.slice())}return n.isBarHorizontal&&n.labels.length&&(n.xTickAmount=n.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:n.minX,maxX:n.maxX}}},{key:"setZRange",value:function(){var n=this.w.globals;if(n.isDataXYZ)for(var s=0;s<n.series.length;s++)if(void 0!==n.seriesZ[s])for(var c=0;c<n.seriesZ[s].length;c++)null!==n.seriesZ[s][c]&&Ve.isNumber(n.seriesZ[s][c])&&(n.maxZ=Math.max(n.maxZ,n.seriesZ[s][c]),n.minZ=Math.min(n.minZ,n.seriesZ[s][c]))}},{key:"_handleSingleDataPoint",value:function(){var n=this.w.globals,s=this.w.config;if(n.minX===n.maxX){var c=new ai(this.ctx);if("datetime"===s.xaxis.type){var g=c.getDate(n.minX);s.xaxis.labels.datetimeUTC?g.setUTCDate(g.getUTCDate()-2):g.setDate(g.getDate()-2),n.minX=new Date(g).getTime();var y=c.getDate(n.maxX);s.xaxis.labels.datetimeUTC?y.setUTCDate(y.getUTCDate()+2):y.setDate(y.getDate()+2),n.maxX=new Date(y).getTime()}else("numeric"===s.xaxis.type||"category"===s.xaxis.type&&!n.noLabelsProvided)&&(n.minX=n.minX-2,n.initialMinX=n.minX,n.maxX=n.maxX+2,n.initialMaxX=n.maxX)}}},{key:"_getMinXDiff",value:function(){var n=this.w.globals;n.isXNumeric&&n.seriesX.forEach(function(s,c){1===s.length&&s.push(n.seriesX[n.maxValsInArrayIndex][n.seriesX[n.maxValsInArrayIndex].length-1]);var g=s.slice();g.sort(function(y,x){return y-x}),g.forEach(function(y,x){if(x>0){var k=y-g[x-1];k>0&&(n.minXDiff=Math.min(k,n.minXDiff))}}),1!==n.dataPoints&&n.minXDiff!==Number.MAX_VALUE||(n.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var n=this,s=this.w.globals;if(s.series.length){var c=s.seriesGroups;c.length||(c=[this.w.config.series.map(function(x){return x.name})]);var g={},y={};c.forEach(function(x){g[x]=[],y[x]=[],n.w.config.series.map(function(k,M){return x.indexOf(k.name)>-1?M:null}).filter(function(k){return null!==k}).forEach(function(k){for(var M=0;M<s.series[s.maxValsInArrayIndex].length;M++){var R,j;void 0===g[x][M]&&(g[x][M]=0,y[x][M]=0),(n.w.config.chart.stacked&&!s.comboCharts||n.w.config.chart.stacked&&s.comboCharts&&(!n.w.config.chart.stackOnlyBar||"bar"===(null===(R=n.w.config.series)||void 0===R||null===(j=R[k])||void 0===j?void 0:j.type)))&&null!==s.series[k][M]&&Ve.isNumber(s.series[k][M])&&(s.series[k][M]>0?g[x][M]+=parseFloat(s.series[k][M])+1e-4:y[x][M]+=parseFloat(s.series[k][M]))}})}),Object.entries(g).forEach(function(x){var k=St(x,1)[0];g[k].forEach(function(M,R){s.maxY=Math.max(s.maxY,g[k][R]),s.minY=Math.min(s.minY,y[k][R])})})}}}]),ue}(),Vi=function(){function ue(n,s){Y(this,ue),this.ctx=n,this.elgrid=s,this.w=n.w;var c=this.w;this.xaxisFontSize=c.config.xaxis.labels.style.fontSize,this.axisFontFamily=c.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=c.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===c.config.chart.type&&c.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===c.config.xaxis.position&&(this.xAxisoffX=c.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new gr(n)}return ke(ue,[{key:"drawYaxis",value:function(n){var s=this,c=this.w,g=new rt(this.ctx),y=c.config.yaxis[n].labels.style,x=y.fontSize,k=y.fontFamily,M=y.fontWeight,R=g.group({class:"apexcharts-yaxis",rel:n,transform:"translate("+c.globals.translateYAxisX[n]+", 0)"});if(this.axesUtils.isYAxisHidden(n))return R;var j=g.group({class:"apexcharts-yaxis-texts-g"});R.add(j);var U=c.globals.yAxisScale[n].result.length-1,X=c.globals.gridHeight/U,ee=c.globals.translateY,ae=c.globals.yLabelFormatters[n],de=c.globals.yAxisScale[n].result.slice();de=this.axesUtils.checkForReversedLabels(n,de);var ve="";if(c.config.yaxis[n].labels.show)for(var he=function(wt){var kt=de[wt];kt=ae(kt,wt,c);var Wt=c.config.yaxis[n].labels.padding;c.config.yaxis[n].opposite&&0!==c.config.yaxis.length&&(Wt*=-1);var hi="end";c.config.yaxis[n].opposite&&(hi="start"),"left"===c.config.yaxis[n].labels.align?hi="start":"center"===c.config.yaxis[n].labels.align?hi="middle":"right"===c.config.yaxis[n].labels.align&&(hi="end");var yi=s.axesUtils.getYAxisForeColor(y.colors,n),rn=c.config.yaxis[n].labels.offsetY;"heatmap"===c.config.chart.type&&(rn-=(c.globals.gridHeight/c.globals.series.length-1)/2);var gn=g.drawText({x:Wt,y:ee+U/10+rn+1,text:kt,textAnchor:hi,fontSize:x,fontFamily:k,fontWeight:M,maxWidth:c.config.yaxis[n].labels.maxWidth,foreColor:Array.isArray(yi)?yi[wt]:yi,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+y.cssClass});wt===U&&(ve=gn),j.add(gn);var An=document.createElementNS(c.globals.SVGNS,"title");if(An.textContent=Array.isArray(kt)?kt.join(" "):kt,gn.node.appendChild(An),0!==c.config.yaxis[n].labels.rotate){var $n=g.rotateAroundCenter(ve.node),Jn=g.rotateAroundCenter(gn.node);gn.node.setAttribute("transform","rotate(".concat(c.config.yaxis[n].labels.rotate," ").concat($n.x," ").concat(Jn.y,")"))}ee+=X},be=U;be>=0;be--)he(be);if(void 0!==c.config.yaxis[n].title.text){var F=g.group({class:"apexcharts-yaxis-title"}),K=0;c.config.yaxis[n].opposite&&(K=c.globals.translateYAxisX[n]);var ce=g.drawText({x:K,y:c.globals.gridHeight/2+c.globals.translateY+c.config.yaxis[n].title.offsetY,text:c.config.yaxis[n].title.text,textAnchor:"end",foreColor:c.config.yaxis[n].title.style.color,fontSize:c.config.yaxis[n].title.style.fontSize,fontWeight:c.config.yaxis[n].title.style.fontWeight,fontFamily:c.config.yaxis[n].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+c.config.yaxis[n].title.style.cssClass});F.add(ce),R.add(F)}var _e=c.config.yaxis[n].axisBorder,Me=31+_e.offsetX;if(c.config.yaxis[n].opposite&&(Me=-31-_e.offsetX),_e.show){var $e=g.drawLine(Me,c.globals.translateY+_e.offsetY-2,Me,c.globals.gridHeight+c.globals.translateY+_e.offsetY+2,_e.color,0,_e.width);R.add($e)}return c.config.yaxis[n].axisTicks.show&&this.axesUtils.drawYAxisTicks(Me,U,_e,c.config.yaxis[n].axisTicks,n,X,R),R}},{key:"drawYaxisInversed",value:function(n){var s=this.w,c=new rt(this.ctx),g=c.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),y=c.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(s.globals.translateXAxisX,", ").concat(s.globals.translateXAxisY,")")});g.add(y);var x=s.globals.yAxisScale[n].result.length-1,k=s.globals.gridWidth/x+.1,M=k+s.config.xaxis.labels.offsetX,R=s.globals.xLabelFormatter,j=s.globals.yAxisScale[n].result.slice(),U=s.globals.timescaleLabels;U.length>0&&(this.xaxisLabels=U.slice(),x=(j=U.slice()).length),j=this.axesUtils.checkForReversedLabels(n,j);var X=U.length;if(s.config.xaxis.labels.show)for(var ee=X?0:x;X?ee<X:ee>=0;X?ee++:ee--){var ae=j[ee];ae=R(ae,ee,s);var de=s.globals.gridWidth+s.globals.padHorizontal-(M-k+s.config.xaxis.labels.offsetX);if(U.length){var ve=this.axesUtils.getLabel(j,U,de,ee,this.drawnLabels,this.xaxisFontSize);de=ve.x,ae=ve.text,this.drawnLabels.push(ve.text),0===ee&&s.globals.skipFirstTimelinelabel&&(ae=""),ee===j.length-1&&s.globals.skipLastTimelinelabel&&(ae="")}var he=c.drawText({x:de,y:this.xAxisoffX+s.config.xaxis.labels.offsetY+30-("top"===s.config.xaxis.position?s.globals.xAxisHeight+s.config.xaxis.axisTicks.height-2:0),text:ae,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[n]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:s.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+s.config.xaxis.labels.style.cssClass});y.add(he),he.tspan(ae);var be=document.createElementNS(s.globals.SVGNS,"title");be.textContent=ae,he.node.appendChild(be),M+=k}return this.inversedYAxisTitleText(g),this.inversedYAxisBorder(g),g}},{key:"inversedYAxisBorder",value:function(n){var s=this.w,c=new rt(this.ctx),g=s.config.xaxis.axisBorder;if(g.show){var y=0;"bar"===s.config.chart.type&&s.globals.isXNumeric&&(y-=15);var x=c.drawLine(s.globals.padHorizontal+y+g.offsetX,this.xAxisoffX,s.globals.gridWidth,this.xAxisoffX,g.color,0,g.height);this.elgrid&&this.elgrid.elGridBorders&&s.config.grid.show?this.elgrid.elGridBorders.add(x):n.add(x)}}},{key:"inversedYAxisTitleText",value:function(n){var s=this.w,c=new rt(this.ctx);if(void 0!==s.config.xaxis.title.text){var g=c.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),y=c.drawText({x:s.globals.gridWidth/2+s.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(s.config.xaxis.title.style.fontSize)+s.config.xaxis.title.offsetY+20,text:s.config.xaxis.title.text,textAnchor:"middle",fontSize:s.config.xaxis.title.style.fontSize,fontFamily:s.config.xaxis.title.style.fontFamily,fontWeight:s.config.xaxis.title.style.fontWeight,foreColor:s.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+s.config.xaxis.title.style.cssClass});g.add(y),n.add(g)}}},{key:"yAxisTitleRotate",value:function(n,s){var c=this.w,g=new rt(this.ctx),y={width:0,height:0},x={width:0,height:0},k=c.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g"));null!==k&&(y=k.getBoundingClientRect());var M=c.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-title text"));if(null!==M&&(x=M.getBoundingClientRect()),null!==M){var R=this.xPaddingForYAxisTitle(n,y,x,s);M.setAttribute("x",R.xPos-(s?10:0))}if(null!==M){var j=g.rotateAroundCenter(M);M.setAttribute("transform","rotate(".concat(s?-1*c.config.yaxis[n].title.rotate:c.config.yaxis[n].title.rotate," ").concat(j.x," ").concat(j.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(n,s,c,g){var y=this.w,x=0,k=0,M=10;return void 0===y.config.yaxis[n].title.text||n<0?{xPos:k,padd:0}:(g?(k=s.width+y.config.yaxis[n].title.offsetX+c.width/2+M/2,0===(x+=1)&&(k-=M/2)):(k=-1*s.width+y.config.yaxis[n].title.offsetX+M/2+c.width/2,y.globals.isBarHorizontal&&(k=-1*s.width-y.config.yaxis[n].title.offsetX-(M=25))),{xPos:k,padd:M})}},{key:"setYAxisXPosition",value:function(n,s){var c=this.w,g=0,y=0,x=18,k=1;c.config.yaxis.length>1&&(this.multipleYs=!0),c.config.yaxis.map(function(M,R){var j=c.globals.ignoreYAxisIndexes.indexOf(R)>-1||!M.show||M.floating||0===n[R].width,U=n[R].width+s[R].width;M.opposite?c.globals.isBarHorizontal?c.globals.translateYAxisX[R]=(y=c.globals.gridWidth+c.globals.translateX-1)-M.labels.offsetX:(y=c.globals.gridWidth+c.globals.translateX+k,j||(k=k+U+20),c.globals.translateYAxisX[R]=y-M.labels.offsetX+20):(g=c.globals.translateX-x,j||(x=x+U+20),c.globals.translateYAxisX[R]=g+M.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var n=this.w,s=n.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(s=Ve.listToArray(s)).forEach(function(c,g){var y=n.config.yaxis[g];if(y&&!y.floating&&void 0!==y.labels.align){var x=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(g,"'] .apexcharts-yaxis-texts-g")),k=n.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(g,"'] .apexcharts-yaxis-label"));k=Ve.listToArray(k);var M=x.getBoundingClientRect();"left"===y.labels.align?(k.forEach(function(R,j){R.setAttribute("text-anchor","start")}),y.opposite||x.setAttribute("transform","translate(-".concat(M.width,", 0)"))):"center"===y.labels.align?(k.forEach(function(R,j){R.setAttribute("text-anchor","middle")}),x.setAttribute("transform","translate(".concat(M.width/2*(y.opposite?1:-1),", 0)"))):"right"===y.labels.align&&(k.forEach(function(R,j){R.setAttribute("text-anchor","end")}),y.opposite&&x.setAttribute("transform","translate(".concat(M.width,", 0)")))}})}}]),ue}(),Oi=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.documentEvent=Ve.bind(this.documentEvent,this)}return ke(ue,[{key:"addEventListener",value:function(n,s){var c=this.w;c.globals.events.hasOwnProperty(n)?c.globals.events[n].push(s):c.globals.events[n]=[s]}},{key:"removeEventListener",value:function(n,s){var c=this.w;if(c.globals.events.hasOwnProperty(n)){var g=c.globals.events[n].indexOf(s);-1!==g&&c.globals.events[n].splice(g,1)}}},{key:"fireEvent",value:function(n,s){var c=this.w;if(c.globals.events.hasOwnProperty(n)){s&&s.length||(s=[]);for(var g=c.globals.events[n],y=g.length,x=0;x<y;x++)g[x].apply(null,s)}}},{key:"setupEventHandlers",value:function(){var n=this,s=this.w,c=this.ctx,g=s.globals.dom.baseEl.querySelector(s.globals.chartClass);this.ctx.eventList.forEach(function(y){g.addEventListener(y,function(x){var k=Object.assign({},s,{seriesIndex:s.globals.capturedSeriesIndex,dataPointIndex:s.globals.capturedDataPointIndex});"mousemove"===x.type||"touchmove"===x.type?"function"==typeof s.config.chart.events.mouseMove&&s.config.chart.events.mouseMove(x,c,k):"mouseleave"===x.type||"touchleave"===x.type?"function"==typeof s.config.chart.events.mouseLeave&&s.config.chart.events.mouseLeave(x,c,k):("mouseup"===x.type&&1===x.which||"touchend"===x.type)&&("function"==typeof s.config.chart.events.click&&s.config.chart.events.click(x,c,k),c.ctx.events.fireEvent("click",[x,c,k]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(y){s.globals.dom.baseEl.addEventListener(y,n.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(n){var s=this.w,c=n.target.className;if("click"===n.type){var g=s.globals.dom.baseEl.querySelector(".apexcharts-menu");g&&g.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==c&&g.classList.remove("apexcharts-menu-open")}s.globals.clientX="touchmove"===n.type?n.touches[0].clientX:n.clientX,s.globals.clientY="touchmove"===n.type?n.touches[0].clientY:n.clientY}}]),ue}(),Bn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"setCurrentLocaleValues",value:function(n){var s=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(s=this.w.config.chart.locales.concat(window.Apex.chart.locales));var c=s.filter(function(y){return y.name===n})[0];if(!c)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var g=Ve.extend(qt,c);this.w.globals.locale=g.options}}]),ue}(),$i=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"drawAxis",value:function(n,s){var c,g,y=this,x=this.w.globals,k=this.w.config,M=new qn(this.ctx,s),R=new Vi(this.ctx,s);x.axisCharts&&"radar"!==n&&(x.isBarHorizontal?(g=R.drawYaxisInversed(0),c=M.drawXaxisInversed(0),x.dom.elGraphical.add(c),x.dom.elGraphical.add(g)):(c=M.drawXaxis(),x.dom.elGraphical.add(c),k.yaxis.map(function(j,U){if(-1===x.ignoreYAxisIndexes.indexOf(U)&&(g=R.drawYaxis(U),x.dom.Paper.add(g),"back"===y.w.config.grid.position)){var X=x.dom.Paper.children()[1];X.remove(),x.dom.Paper.add(X)}})))}}]),ue}(),gi=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"drawXCrosshairs",value:function(){var n=this.w,s=new rt(this.ctx),c=new ei(this.ctx),g=n.config.xaxis.crosshairs.fill.gradient,y=n.config.xaxis.crosshairs.dropShadow,X=y.enabled,ee=y.left,ae=y.top,de=y.blur,ve=y.color,he=y.opacity,be=n.config.xaxis.crosshairs.fill.color;if(n.config.xaxis.crosshairs.show){"gradient"===n.config.xaxis.crosshairs.fill.type&&(be=s.drawGradient("vertical",g.colorFrom,g.colorTo,g.opacityFrom,g.opacityTo,null,g.stops,null));var F=s.drawRect();1===n.config.xaxis.crosshairs.width&&(F=s.drawLine());var K=n.globals.gridHeight;(!Ve.isNumber(K)||K<0)&&(K=0);var ce=n.config.xaxis.crosshairs.width;(!Ve.isNumber(ce)||ce<0)&&(ce=0),F.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:K,width:ce,height:K,fill:be,filter:"none","fill-opacity":n.config.xaxis.crosshairs.opacity,stroke:n.config.xaxis.crosshairs.stroke.color,"stroke-width":n.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":n.config.xaxis.crosshairs.stroke.dashArray}),X&&(F=c.dropShadow(F,{left:ee,top:ae,blur:de,color:ve,opacity:he})),n.globals.dom.elGraphical.add(F)}}},{key:"drawYCrosshairs",value:function(){var n=this.w,s=new rt(this.ctx),c=n.config.yaxis[0].crosshairs,g=n.globals.barPadForNumericAxis;if(n.config.yaxis[0].crosshairs.show){var y=s.drawLine(-g,0,n.globals.gridWidth+g,0,c.stroke.color,c.stroke.dashArray,c.stroke.width);y.attr({class:"apexcharts-ycrosshairs"}),n.globals.dom.elGraphical.add(y)}var x=s.drawLine(-g,0,n.globals.gridWidth+g,0,c.stroke.color,0,0);x.attr({class:"apexcharts-ycrosshairs-hidden"}),n.globals.dom.elGraphical.add(x)}}]),ue}(),un=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"checkResponsiveConfig",value:function(n){var s=this,c=this.w,g=c.config;if(0!==g.responsive.length){var y=g.responsive.slice();y.sort(function(R,j){return R.breakpoint>j.breakpoint?1:j.breakpoint>R.breakpoint?-1:0}).reverse();var x=new ln({}),k=function(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=window.innerWidth>0?window.innerWidth:screen.width;if(U>y[0].breakpoint){var X=Kt.extendArrayProps(x,c.globals.initialConfig,c);R=Ve.extend(X,R),R=Ve.extend(c.config,R),s.overrideResponsiveOptions(R)}else for(var ee=0;ee<y.length;ee++)U<y[ee].breakpoint&&(R=Kt.extendArrayProps(x,y[ee].options,c),R=Ve.extend(c.config,R),s.overrideResponsiveOptions(R))};if(n){var M=Kt.extendArrayProps(x,n,c);M=Ve.extend(c.config,M),k(M=Ve.extend(M,n))}else k({})}}},{key:"overrideResponsiveOptions",value:function(n){var s=new ln(n).init({responsiveOverride:!0});this.w.config=s}}]),ue}(),Mn=function(){function ue(n){Y(this,ue),this.ctx=n,this.colors=[],this.w=n.w;var s=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===s.config.chart.type&&s.config.plotOptions.treemap.distributed||"heatmap"===s.config.chart.type&&s.config.plotOptions.heatmap.distributed,this.isBarDistributed=s.config.plotOptions.bar.distributed&&("bar"===s.config.chart.type||"rangeBar"===s.config.chart.type)}return ke(ue,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var n,s=this,c=this.w,g=new Ve;if(c.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(c.config.theme.mode)),void 0===c.config.colors||0===(null===(n=c.config.colors)||void 0===n?void 0:n.length)?c.globals.colors=this.predefined():(c.globals.colors=c.config.colors,Array.isArray(c.config.colors)&&c.config.colors.length>0&&"function"==typeof c.config.colors[0]&&(c.globals.colors=c.config.series.map(function(ae,de){var ve=c.config.colors[de];return ve||(ve=c.config.colors[0]),"function"==typeof ve?(s.isColorFn=!0,ve({value:c.globals.axisCharts?c.globals.series[de][0]?c.globals.series[de][0]:0:c.globals.series[de],seriesIndex:de,dataPointIndex:de,w:c})):ve}))),c.globals.seriesColors.map(function(ae,de){ae&&(c.globals.colors[de]=ae)}),c.config.theme.monochrome.enabled){var y=[],x=c.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(x=c.globals.series[0].length*c.globals.series.length);for(var k=c.config.theme.monochrome.color,M=1/(x/c.config.theme.monochrome.shadeIntensity),R=c.config.theme.monochrome.shadeTo,j=0,U=0;U<x;U++){var X=void 0;"dark"===R?(X=g.shadeColor(-1*j,k),j+=M):(X=g.shadeColor(j,k),j+=M),y.push(X)}c.globals.colors=y.slice()}var ee=c.globals.colors.slice();this.pushExtraColors(c.globals.colors),["fill","stroke"].forEach(function(ae){c.globals[ae].colors=void 0===c.config[ae].colors?s.isColorFn?c.config.colors:ee:c.config[ae].colors.slice(),s.pushExtraColors(c.globals[ae].colors)}),c.globals.dataLabels.style.colors=void 0===c.config.dataLabels.style.colors?ee:c.config.dataLabels.style.colors.slice(),this.pushExtraColors(c.globals.dataLabels.style.colors,50),c.globals.radarPolygons.fill.colors=void 0===c.config.plotOptions.radar.polygons.fill.colors?["dark"===c.config.theme.mode?"#424242":"none"]:c.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(c.globals.radarPolygons.fill.colors,20),c.globals.markers.colors=void 0===c.config.markers.colors?ee:c.config.markers.colors.slice(),this.pushExtraColors(c.globals.markers.colors)}},{key:"pushExtraColors",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=this.w,y=s||g.globals.series.length;if(null===c&&(c=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===g.config.chart.type&&g.config.plotOptions.heatmap.colorScale.inverse),c&&g.globals.series.length&&(y=g.globals.series[g.globals.maxValsInArrayIndex].length*g.globals.series.length),n.length<y)for(var x=y-n.length,k=0;k<x;k++)n.push(n[k])}},{key:"updateThemeOptions",value:function(n){n.chart=n.chart||{},n.tooltip=n.tooltip||{};var s=n.theme.mode||"light",c=n.theme.palette?n.theme.palette:"dark"===s?"palette4":"palette1",g=n.chart.foreColor?n.chart.foreColor:"dark"===s?"#f6f7f8":"#373d3f";return n.tooltip.theme=s,n.chart.foreColor=g,n.theme.palette=c,n}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),ue}(),Tr=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(n){var s=this.w,c="title"===n?s.config.title:s.config.subtitle,g=s.globals.svgWidth/2,y=c.offsetY,x="middle";if("left"===c.align?(g=10,x="start"):"right"===c.align&&(g=s.globals.svgWidth-10,x="end"),g+=c.offsetX,y=y+parseInt(c.style.fontSize,10)+c.margin/2,void 0!==c.text){var k=new rt(this.ctx).drawText({x:g,y,text:c.text,textAnchor:x,fontSize:c.style.fontSize,fontFamily:c.style.fontFamily,fontWeight:c.style.fontWeight,foreColor:c.style.color,opacity:1});k.node.setAttribute("class","apexcharts-".concat(n,"-text")),s.globals.dom.Paper.add(k)}}}]),ue}(),kr=function(){function ue(n){Y(this,ue),this.w=n.w,this.dCtx=n}return ke(ue,[{key:"getTitleSubtitleCoords",value:function(n){var s=this.w,c=0,g=0,y="title"===n?s.config.title.floating:s.config.subtitle.floating,x=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-text"));if(null!==x&&!y){var k=x.getBoundingClientRect();c=k.width,g=s.globals.axisCharts?k.height+5:k.height}return{width:c,height:g}}},{key:"getLegendsRect",value:function(){var n=this.w,s=n.globals.dom.elLegendWrap;n.config.legend.height||"top"!==n.config.legend.position&&"bottom"!==n.config.legend.position||(s.style.maxHeight=n.globals.svgHeight/2+"px");var c=Object.assign({},Ve.getBoundingClientRect(s));return this.dCtx.lgRect=null!==s&&!n.config.legend.floating&&n.config.legend.show?{x:c.x,y:c.y,height:c.height,width:0===c.height?0:c.width}:{x:0,y:0,height:0,width:0},"left"!==n.config.legend.position&&"right"!==n.config.legend.position||1.5*this.dCtx.lgRect.width>n.globals.svgWidth&&(this.dCtx.lgRect.width=n.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(n,s){var c=n;if(this.w.globals.isMultiLineX){var g=s.map(function(x,k){return Array.isArray(x)?x.length:1}),y=Math.max.apply(Math,it(g));c=s[g.indexOf(y)]}return c}}]),ue}(),xr=function(){function ue(n){Y(this,ue),this.w=n.w,this.dCtx=n}return ke(ue,[{key:"getxAxisLabelsCoords",value:function(){var n,s=this.w,c=s.globals.labels.slice();if(s.config.xaxis.convertedCatToNumeric&&0===c.length&&(c=s.globals.categoryLabels),s.globals.timescaleLabels.length>0){var g=this.getxAxisTimeScaleLabelsCoords();n={width:g.width,height:g.height},s.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==s.config.legend.position&&"right"!==s.config.legend.position||s.config.legend.floating?0:this.dCtx.lgRect.width;var y=s.globals.xLabelFormatter,x=Ve.getLargestStringFromArr(c),k=this.dCtx.dimHelpers.getLargestStringFromMultiArr(x,c);s.globals.isBarHorizontal&&(k=x=s.globals.yAxisScale[0].result.reduce(function(ae,de){return ae.length>de.length?ae:de},0));var M=new fi(this.dCtx.ctx),R=x;x=M.xLabelFormat(y,x,R,{i:void 0,dateFormatter:new ai(this.dCtx.ctx).formatDate,w:s}),k=M.xLabelFormat(y,k,R,{i:void 0,dateFormatter:new ai(this.dCtx.ctx).formatDate,w:s}),(s.config.xaxis.convertedCatToNumeric&&void 0===x||""===String(x).trim())&&(k=x="1");var j=new rt(this.dCtx.ctx),U=j.getTextRects(x,s.config.xaxis.labels.style.fontSize),X=U;if(x!==k&&(X=j.getTextRects(k,s.config.xaxis.labels.style.fontSize)),(n={width:U.width>=X.width?U.width:X.width,height:U.height>=X.height?U.height:X.height}).width*c.length>s.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==s.config.xaxis.labels.rotate||s.config.xaxis.labels.rotateAlways){if(!s.globals.isBarHorizontal){s.globals.rotateXLabels=!0;var ee=function(ae){return j.getTextRects(ae,s.config.xaxis.labels.style.fontSize,s.config.xaxis.labels.style.fontFamily,"rotate(".concat(s.config.xaxis.labels.rotate," 0 0)"),!1)};U=ee(x),x!==k&&(X=ee(k)),n.height=(U.height>X.height?U.height:X.height)/1.5,n.width=U.width>X.width?U.width:X.width}}else s.globals.rotateXLabels=!1}return s.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var n,s=this.w;if(!s.globals.hasXaxisGroups)return{width:0,height:0};var c,g=(null===(n=s.config.xaxis.group.style)||void 0===n?void 0:n.fontSize)||s.config.xaxis.labels.style.fontSize,y=s.globals.groups.map(function(U){return U.title}),x=Ve.getLargestStringFromArr(y),k=this.dCtx.dimHelpers.getLargestStringFromMultiArr(x,y),M=new rt(this.dCtx.ctx),R=M.getTextRects(x,g),j=R;return x!==k&&(j=M.getTextRects(k,g)),c={width:R.width>=j.width?R.width:j.width,height:R.height>=j.height?R.height:j.height},s.config.xaxis.labels.show||(c={width:0,height:0}),{width:c.width,height:c.height}}},{key:"getxAxisTitleCoords",value:function(){var n=this.w,s=0,c=0;if(void 0!==n.config.xaxis.title.text){var g=new rt(this.dCtx.ctx).getTextRects(n.config.xaxis.title.text,n.config.xaxis.title.style.fontSize);s=g.width,c=g.height}return{width:s,height:c}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var n,s=this.w;this.dCtx.timescaleLabels=s.globals.timescaleLabels.slice();var c=this.dCtx.timescaleLabels.map(function(y){return y.value}),g=c.reduce(function(y,x){return void 0===y?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):y.length>x.length?y:x},0);return 1.05*(n=new rt(this.dCtx.ctx).getTextRects(g,s.config.xaxis.labels.style.fontSize)).width*c.length>s.globals.gridWidth&&0!==s.config.xaxis.labels.rotate&&(s.globals.overlappingXLabels=!0),n}},{key:"additionalPaddingXLabels",value:function(n){var s=this,c=this.w,g=c.globals,y=c.config,x=y.xaxis.type,k=n.width;g.skipLastTimelinelabel=!1,g.skipFirstTimelinelabel=!1;var M=c.config.yaxis[0].opposite&&c.globals.isBarHorizontal;y.yaxis.forEach(function(j,U){M?(s.dCtx.gridPad.left<k&&(s.dCtx.xPadLeft=k/2+1),s.dCtx.xPadRight=k/2+1):function(j,U){y.yaxis.length>1&&-1!==g.collapsedSeriesIndices.indexOf(U)||function(X){if(s.dCtx.timescaleLabels&&s.dCtx.timescaleLabels.length){var de=s.dCtx.timescaleLabels[0].position-k/1.75+s.dCtx.yAxisWidthLeft;s.dCtx.timescaleLabels[s.dCtx.timescaleLabels.length-1].position+k/1.75-s.dCtx.yAxisWidthRight>g.svgWidth-g.translateX-("right"===c.config.legend.position&&s.dCtx.lgRect.width>0?s.dCtx.lgRect.width:0)&&(g.skipLastTimelinelabel=!0),de<-(X.show&&!X.floating||"bar"!==y.chart.type&&"candlestick"!==y.chart.type&&"rangeBar"!==y.chart.type&&"boxPlot"!==y.chart.type?10:k/1.75)&&(g.skipFirstTimelinelabel=!0)}else"datetime"===x?s.dCtx.gridPad.right<k&&!g.rotateXLabels&&(g.skipLastTimelinelabel=!0):"datetime"!==x&&s.dCtx.gridPad.right<k/2-s.dCtx.yAxisWidthRight&&!g.rotateXLabels&&!c.config.xaxis.labels.trim&&("between"!==c.config.xaxis.tickPlacement||c.globals.isBarHorizontal)&&(s.dCtx.xPadRight=k/2+1)}(j)}(j,U)})}}]),ue}(),_r=function(){function ue(n){Y(this,ue),this.w=n.w,this.dCtx=n}return ke(ue,[{key:"getyAxisLabelsCoords",value:function(){var n=this,s=this.w,c=[],g=10,y=new gr(this.dCtx.ctx);return s.config.yaxis.map(function(x,k){var M={seriesIndex:k,dataPointIndex:-1,w:s},R=s.globals.yAxisScale[k],j=0;if(!y.isYAxisHidden(k)&&x.labels.show&&void 0!==x.labels.minWidth&&(j=x.labels.minWidth),!y.isYAxisHidden(k)&&x.labels.show&&R.result.length){var U=s.globals.yLabelFormatters[k],ee=R.result.reduce(function(K,ce){var _e,Me;return(null===(_e=String(U(K,M)))||void 0===_e?void 0:_e.length)>(null===(Me=String(U(ce,M)))||void 0===Me?void 0:Me.length)?K:ce},R.niceMin===Number.MIN_VALUE?0:R.niceMin),ae=ee=U(ee,M);if(void 0!==ee&&0!==ee.length||(ee=R.niceMax),s.globals.isBarHorizontal){g=0;var de=s.globals.labels.slice();ee=Ve.getLargestStringFromArr(de),ee=U(ee,{seriesIndex:k,dataPointIndex:-1,w:s}),ae=n.dCtx.dimHelpers.getLargestStringFromMultiArr(ee,de)}var ve=new rt(n.dCtx.ctx),he="rotate(".concat(x.labels.rotate," 0 0)"),be=ve.getTextRects(ee,x.labels.style.fontSize,x.labels.style.fontFamily,he,!1),F=be;ee!==ae&&(F=ve.getTextRects(ae,x.labels.style.fontSize,x.labels.style.fontFamily,he,!1)),c.push({width:(j>F.width||j>be.width?j:F.width>be.width?F.width:be.width)+g,height:F.height>be.height?F.height:be.height})}else c.push({width:0,height:0})}),c}},{key:"getyAxisTitleCoords",value:function(){var n=this,c=[];return this.w.config.yaxis.map(function(g,y){if(g.show&&void 0!==g.title.text){var x=new rt(n.dCtx.ctx),k="rotate(".concat(g.title.rotate," 0 0)"),M=x.getTextRects(g.title.text,g.title.style.fontSize,g.title.style.fontFamily,k,!1);c.push({width:M.width,height:M.height})}else c.push({width:0,height:0})}),c}},{key:"getTotalYAxisWidth",value:function(){var n=this.w,s=0,c=0,g=0,y=n.globals.yAxisScale.length>1?10:0,x=new gr(this.dCtx.ctx),k=function(M,R){var j=n.config.yaxis[R].floating,U=0;M.width>0&&!j?(U=M.width+y,n.globals.ignoreYAxisIndexes.indexOf(R)>-1&&(U=U-M.width-y)):U=j||x.isYAxisHidden(R)?0:5,n.config.yaxis[R].opposite?g+=U:c+=U,s+=U};return n.globals.yLabelsCoords.map(function(M,R){k(M,R)}),n.globals.yTitleCoords.map(function(M,R){k(M,R)}),n.globals.isBarHorizontal&&!n.config.yaxis[0].floating&&(s=n.globals.yLabelsCoords[0].width+n.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=c,this.dCtx.yAxisWidthRight=g,s}}]),ue}(),ir=function(){function ue(n){Y(this,ue),this.w=n.w,this.dCtx=n}return ke(ue,[{key:"gridPadForColumnsInNumericAxis",value:function(n){var s=this.w;if(s.globals.noData||s.globals.allSeriesCollapsed)return 0;var c=function(j){return"bar"===j||"rangeBar"===j||"candlestick"===j||"boxPlot"===j},g=s.config.chart.type,y=0,x=c(g)?s.config.series.length:1;if(s.globals.comboBarCount>0&&(x=s.globals.comboBarCount),s.globals.collapsedSeries.forEach(function(j){c(j.type)&&(x-=1)}),s.config.chart.stacked&&(x=1),(c(g)||s.globals.comboBarCount>0)&&s.globals.isXNumeric&&!s.globals.isBarHorizontal&&x>0){var k,M,R=Math.abs(s.globals.initialMaxX-s.globals.initialMinX);R<=3&&(R=s.globals.dataPoints),k=R/n,s.globals.minXDiff&&s.globals.minXDiff/k>0&&(M=s.globals.minXDiff/k),M>n/2&&(M/=2),(y=M*parseInt(s.config.plotOptions.bar.columnWidth,10)/100)<1&&(y=1),s.globals.barPadForNumericAxis=y}return y}},{key:"gridPadFortitleSubtitle",value:function(){var n=this,s=this.w,c=s.globals,g=this.dCtx.isSparkline||!s.globals.axisCharts?0:10;["title","subtitle"].forEach(function(k){g+=void 0!==s.config[k].text?s.config[k].margin:n.dCtx.isSparkline||!s.globals.axisCharts?0:5}),!s.config.legend.show||"bottom"!==s.config.legend.position||s.config.legend.floating||s.globals.axisCharts||(g+=10);var y=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),x=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");c.gridHeight=c.gridHeight-y.height-x.height-g,c.translateY=c.translateY+y.height+x.height+g}},{key:"setGridXPosForDualYAxis",value:function(n,s){var c=this.w,g=new gr(this.dCtx.ctx);c.config.yaxis.map(function(y,x){-1!==c.globals.ignoreYAxisIndexes.indexOf(x)||y.floating||g.isYAxisHidden(x)||(y.opposite&&(c.globals.translateX=c.globals.translateX-(s[x].width+n[x].width)-parseInt(c.config.yaxis[x].labels.style.fontSize,10)/1.2-12),c.globals.translateX<2&&(c.globals.translateX=2))})}}]),ue}(),yn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new kr(this),this.dimYAxis=new _r(this),this.dimXAxis=new xr(this),this.dimGrid=new ir(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return ke(ue,[{key:"plotCoords",value:function(){var n=this,s=this.w,c=s.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((s.config.markers.discrete.length>0||s.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(y){var x=St(y,2);n.gridPad[x[0]]=Math.max(x[1],n.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(s.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(s.config.stroke.width/2,this.gridPad.bottom)),c.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),c.gridHeight=c.gridHeight-this.gridPad.top-this.gridPad.bottom,c.gridWidth=c.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var g=this.dimGrid.gridPadForColumnsInNumericAxis(c.gridWidth);c.gridWidth=c.gridWidth-2*g,c.translateX=c.translateX+this.gridPad.left+this.xPadLeft+(g>0?g+4:0),c.translateY=c.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var n=this,s=this.w,c=s.globals,g=this.dimYAxis.getyAxisLabelsCoords(),y=this.dimYAxis.getyAxisTitleCoords();s.globals.yLabelsCoords=[],s.globals.yTitleCoords=[],s.config.yaxis.map(function(ee,ae){s.globals.yLabelsCoords.push({width:g[ae].width,index:ae}),s.globals.yTitleCoords.push({width:y[ae].width,index:ae})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var x=this.dimXAxis.getxAxisLabelsCoords(),k=this.dimXAxis.getxAxisGroupLabelsCoords(),M=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(x,M,k),c.translateXAxisY=s.globals.rotateXLabels?this.xAxisHeight/8:-4,c.translateXAxisX=s.globals.rotateXLabels&&s.globals.isXNumeric&&s.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,s.globals.isBarHorizontal&&(c.rotateXLabels=!1,c.translateXAxisY=parseInt(s.config.xaxis.labels.style.fontSize,10)/1.5*-1),c.translateXAxisY=c.translateXAxisY+s.config.xaxis.labels.offsetY,c.translateXAxisX=c.translateXAxisX+s.config.xaxis.labels.offsetX;var R=this.yAxisWidth,j=this.xAxisHeight;c.xAxisLabelsHeight=this.xAxisHeight-M.height,c.xAxisGroupLabelsHeight=c.xAxisLabelsHeight-x.height,c.xAxisLabelsWidth=this.xAxisWidth,c.xAxisHeight=this.xAxisHeight;var U=10;("radar"===s.config.chart.type||this.isSparkline)&&(R=0,j=c.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===s.config.chart.type)&&(R=0,j=0,U=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(x);var X=function(){c.translateX=R,c.gridHeight=c.svgHeight-n.lgRect.height-j-(n.isSparkline||"treemap"===s.config.chart.type?0:s.globals.rotateXLabels?10:15),c.gridWidth=c.svgWidth-R};switch("top"===s.config.xaxis.position&&(U=c.xAxisHeight-s.config.xaxis.axisTicks.height-5),s.config.legend.position){case"bottom":c.translateY=U,X();break;case"top":c.translateY=this.lgRect.height+U,X();break;case"left":c.translateY=U,c.translateX=this.lgRect.width+R,c.gridHeight=c.svgHeight-j-12,c.gridWidth=c.svgWidth-this.lgRect.width-R;break;case"right":c.translateY=U,c.translateX=R,c.gridHeight=c.svgHeight-j-12,c.gridWidth=c.svgWidth-this.lgRect.width-R-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(y,g),new Vi(this.ctx).setYAxisXPosition(g,y)}},{key:"setDimensionsForNonAxisCharts",value:function(){var n=this.w,s=n.globals,c=n.config,g=0;n.config.legend.show&&!n.config.legend.floating&&(g=20);var y="pie"===c.chart.type||"polarArea"===c.chart.type||"donut"===c.chart.type?"pie":"radialBar",x=c.plotOptions[y].offsetY,k=c.plotOptions[y].offsetX;if(!c.legend.show||c.legend.floating)return s.gridHeight=s.svgHeight-c.grid.padding.left+c.grid.padding.right,s.gridWidth=s.gridHeight,s.translateY=x,void(s.translateX=k+(s.svgWidth-s.gridWidth)/2);switch(c.legend.position){case"bottom":s.gridHeight=s.svgHeight-this.lgRect.height-s.goldenPadding,s.gridWidth=s.svgWidth,s.translateY=x-10,s.translateX=k+(s.svgWidth-s.gridWidth)/2;break;case"top":s.gridHeight=s.svgHeight-this.lgRect.height-s.goldenPadding,s.gridWidth=s.svgWidth,s.translateY=this.lgRect.height+x+10,s.translateX=k+(s.svgWidth-s.gridWidth)/2;break;case"left":s.gridWidth=s.svgWidth-this.lgRect.width-g,s.gridHeight="auto"!==c.chart.height?s.svgHeight:s.gridWidth,s.translateY=x,s.translateX=k+this.lgRect.width+g;break;case"right":s.gridWidth=s.svgWidth-this.lgRect.width-g-5,s.gridHeight="auto"!==c.chart.height?s.svgHeight:s.gridWidth,s.translateY=x,s.translateX=k+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(n,s,c){var g=this.w;this.xAxisHeight=(c.height+n.height+s.height)*(g.globals.isMultiLineX?1.2:g.globals.LINE_HEIGHT_RATIO)+(g.globals.hasXaxisGroups?2:1)*(g.globals.rotateXLabels?22:10)+(g.globals.rotateXLabels&&"bottom"===g.config.legend.position?10:0),this.xAxisWidth=n.width,this.xAxisHeight-s.height>g.config.xaxis.labels.maxHeight&&(this.xAxisHeight=g.config.xaxis.labels.maxHeight),g.config.xaxis.labels.minHeight&&this.xAxisHeight<g.config.xaxis.labels.minHeight&&(this.xAxisHeight=g.config.xaxis.labels.minHeight),g.config.xaxis.floating&&(this.xAxisHeight=0);var j=0,U=0;g.config.yaxis.forEach(function(X){j+=X.labels.minWidth,U+=X.labels.maxWidth}),this.yAxisWidth<j&&(this.yAxisWidth=j),this.yAxisWidth>U&&(this.yAxisWidth=U)}}]),ue}(),qr=function(){function ue(n){Y(this,ue),this.w=n.w,this.lgCtx=n}return ke(ue,[{key:"getLegendStyles",value:function(){var n,s,c,g=document.createElement("style");g.setAttribute("type","text/css");var y=(null===(n=this.lgCtx.ctx)||void 0===n||null===(s=n.opts)||void 0===s||null===(c=s.chart)||void 0===c?void 0:c.nonce)||this.w.config.chart.nonce;y&&g.setAttribute("nonce",y);var x=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return g.appendChild(x),g}},{key:"getLegendBBox",value:function(){var n=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:n.height,clww:n.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(n,s){var c=this,g=this.w;if(g.globals.axisCharts||"radialBar"===g.config.chart.type){g.globals.resized=!0;var y=null,x=null;g.globals.risingSeries=[],g.globals.axisCharts?(y=g.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),x=parseInt(y.getAttribute("data:realIndex"),10)):(y=g.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']")),x=parseInt(y.getAttribute("rel"),10)-1),s?[{cs:g.globals.collapsedSeries,csi:g.globals.collapsedSeriesIndices},{cs:g.globals.ancillaryCollapsedSeries,csi:g.globals.ancillaryCollapsedSeriesIndices}].forEach(function(j){c.riseCollapsedSeries(j.cs,j.csi,x)}):this.hideSeries({seriesEl:y,realIndex:x})}else{var k=g.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(n+1,"'] path")),M=g.config.chart.type;if("pie"===M||"polarArea"===M||"donut"===M){var R=g.config.plotOptions.pie.donut.labels;new rt(this.lgCtx.ctx).pathMouseDown(k.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(k.members[0].node,R)}k.fire("click")}}},{key:"hideSeries",value:function(n){var s=n.seriesEl,c=n.realIndex,g=this.w,y=Ve.clone(g.config.series);if(g.globals.axisCharts){var x=g.config.yaxis[g.globals.seriesYAxisReverseMap[c]];if(x&&x.show&&x.showAlways)g.globals.ancillaryCollapsedSeriesIndices.indexOf(c)<0&&(g.globals.ancillaryCollapsedSeries.push({index:c,data:y[c].data.slice(),type:s.parentNode.className.baseVal.split("-")[1]}),g.globals.ancillaryCollapsedSeriesIndices.push(c));else if(g.globals.collapsedSeriesIndices.indexOf(c)<0){g.globals.collapsedSeries.push({index:c,data:y[c].data.slice(),type:s.parentNode.className.baseVal.split("-")[1]}),g.globals.collapsedSeriesIndices.push(c);var k=g.globals.risingSeries.indexOf(c);g.globals.risingSeries.splice(k,1)}}else g.globals.collapsedSeries.push({index:c,data:y[c]}),g.globals.collapsedSeriesIndices.push(c);for(var M=s.childNodes,R=0;R<M.length;R++)M[R].classList.contains("apexcharts-series-markers-wrap")&&(M[R].classList.contains("apexcharts-hide")?M[R].classList.remove("apexcharts-hide"):M[R].classList.add("apexcharts-hide"));g.globals.allSeriesCollapsed=g.globals.collapsedSeries.length===g.config.series.length,y=this._getSeriesBasedOnCollapsedState(y),this.lgCtx.ctx.updateHelpers._updateSeries(y,g.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(n,s,c){var g=this.w,y=Ve.clone(g.config.series);if(n.length>0){for(var x=0;x<n.length;x++)n[x].index===c&&(g.globals.axisCharts?(y[c].data=n[x].data.slice(),n.splice(x,1),s.splice(x,1),g.globals.risingSeries.push(c)):(y[c]=n[x].data,n.splice(x,1),s.splice(x,1),g.globals.risingSeries.push(c)));y=this._getSeriesBasedOnCollapsedState(y),this.lgCtx.ctx.updateHelpers._updateSeries(y,g.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(n){var s=this.w;return n.forEach(s.globals.axisCharts?function(c,g){s.globals.collapsedSeriesIndices.indexOf(g)>-1&&(n[g].data=[])}:function(c,g){s.globals.collapsedSeriesIndices.indexOf(g)>-1&&(n[g]=0)}),n}}]),ue}(),Sr=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new qr(this)}return ke(ue,[{key:"init",value:function(){var n=this.w,s=n.globals,c=n.config;if((c.legend.showForSingleSeries&&1===s.series.length||this.isBarsDistributed||s.series.length>1||!s.axisCharts)&&c.legend.show){for(;s.dom.elLegendWrap.firstChild;)s.dom.elLegendWrap.removeChild(s.dom.elLegendWrap.firstChild);this.drawLegends(),Ve.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===c.legend.position||"top"===c.legend.position?this.legendAlignHorizontal():"right"!==c.legend.position&&"left"!==c.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var n=this,s=this.w,c=s.config.legend.fontFamily,g=s.globals.seriesNames,y=s.globals.colors.slice();if("heatmap"===s.config.chart.type){var x=s.config.plotOptions.heatmap.colorScale.ranges;g=x.map(function(yi){return yi.name?yi.name:yi.from+" - "+yi.to}),y=x.map(function(yi){return yi.color})}else this.isBarsDistributed&&(g=s.globals.labels.slice());s.config.legend.customLegendItems.length&&(g=s.config.legend.customLegendItems);for(var k=s.globals.legendFormatter,M=s.config.legend.inverseOrder,R=M?g.length-1:0;M?R>=0:R<=g.length-1;M?R--:R++){var j,U=k(g[R],{seriesIndex:R,w:s}),X=!1,ee=!1;if(s.globals.collapsedSeries.length>0)for(var ae=0;ae<s.globals.collapsedSeries.length;ae++)s.globals.collapsedSeries[ae].index===R&&(X=!0);if(s.globals.ancillaryCollapsedSeriesIndices.length>0)for(var de=0;de<s.globals.ancillaryCollapsedSeriesIndices.length;de++)s.globals.ancillaryCollapsedSeriesIndices[de]===R&&(ee=!0);var ve=document.createElement("span");ve.classList.add("apexcharts-legend-marker");var he=s.config.legend.markers.offsetX,be=s.config.legend.markers.offsetY,F=s.config.legend.markers.height,K=s.config.legend.markers.width,ce=s.config.legend.markers.strokeWidth,_e=s.config.legend.markers.strokeColor,Me=s.config.legend.markers.radius,$e=ve.style;$e.background=y[R],$e.color=y[R],$e.setProperty("background",y[R],"important"),s.config.legend.markers.fillColors&&s.config.legend.markers.fillColors[R]&&($e.background=s.config.legend.markers.fillColors[R]),void 0!==s.globals.seriesColors[R]&&($e.background=s.globals.seriesColors[R],$e.color=s.globals.seriesColors[R]),$e.height=Array.isArray(F)?parseFloat(F[R])+"px":parseFloat(F)+"px",$e.width=Array.isArray(K)?parseFloat(K[R])+"px":parseFloat(K)+"px",$e.left=(Array.isArray(he)?parseFloat(he[R]):parseFloat(he))+"px",$e.top=(Array.isArray(be)?parseFloat(be[R]):parseFloat(be))+"px",$e.borderWidth=Array.isArray(ce)?ce[R]:ce,$e.borderColor=Array.isArray(_e)?_e[R]:_e,$e.borderRadius=Array.isArray(Me)?parseFloat(Me[R])+"px":parseFloat(Me)+"px",s.config.legend.markers.customHTML&&(Array.isArray(s.config.legend.markers.customHTML)?s.config.legend.markers.customHTML[R]&&(ve.innerHTML=s.config.legend.markers.customHTML[R]()):ve.innerHTML=s.config.legend.markers.customHTML()),rt.setAttrs(ve,{rel:R+1,"data:collapsed":X||ee}),(X||ee)&&ve.classList.add("apexcharts-inactive-legend");var wt=document.createElement("div"),kt=document.createElement("span");kt.classList.add("apexcharts-legend-text"),kt.innerHTML=Array.isArray(U)?U.join(" "):U;var Wt=s.config.legend.labels.useSeriesColors?s.globals.colors[R]:Array.isArray(s.config.legend.labels.colors)?null===(j=s.config.legend.labels.colors)||void 0===j?void 0:j[R]:s.config.legend.labels.colors;Wt||(Wt=s.config.chart.foreColor),kt.style.color=Wt,kt.style.fontSize=parseFloat(s.config.legend.fontSize)+"px",kt.style.fontWeight=s.config.legend.fontWeight,kt.style.fontFamily=c||s.config.chart.fontFamily,rt.setAttrs(kt,{rel:R+1,i:R,"data:default-text":encodeURIComponent(U),"data:collapsed":X||ee}),wt.appendChild(ve),wt.appendChild(kt);var hi=new Kt(this.ctx);s.config.legend.showForZeroSeries||0===hi.getSeriesTotalByIndex(R)&&hi.seriesHaveSameValues(R)&&!hi.isSeriesNull(R)&&-1===s.globals.collapsedSeriesIndices.indexOf(R)&&-1===s.globals.ancillaryCollapsedSeriesIndices.indexOf(R)&&wt.classList.add("apexcharts-hidden-zero-series"),s.config.legend.showForNullSeries||hi.isSeriesNull(R)&&-1===s.globals.collapsedSeriesIndices.indexOf(R)&&-1===s.globals.ancillaryCollapsedSeriesIndices.indexOf(R)&&wt.classList.add("apexcharts-hidden-null-series"),s.globals.dom.elLegendWrap.appendChild(wt),s.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(s.config.legend.horizontalAlign)),s.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+s.config.legend.position),wt.classList.add("apexcharts-legend-series"),wt.style.margin="".concat(s.config.legend.itemMargin.vertical,"px ").concat(s.config.legend.itemMargin.horizontal,"px"),s.globals.dom.elLegendWrap.style.width=s.config.legend.width?s.config.legend.width+"px":"",s.globals.dom.elLegendWrap.style.height=s.config.legend.height?s.config.legend.height+"px":"",rt.setAttrs(wt,{rel:R+1,seriesName:Ve.escapeString(g[R]),"data:collapsed":X||ee}),(X||ee)&&wt.classList.add("apexcharts-inactive-legend"),s.config.legend.onItemClick.toggleDataSeries||wt.classList.add("apexcharts-no-click")}s.globals.dom.elWrap.addEventListener("click",n.onLegendClick,!0),s.config.legend.onItemHover.highlightDataSeries&&0===s.config.legend.customLegendItems.length&&(s.globals.dom.elWrap.addEventListener("mousemove",n.onLegendHovered,!0),s.globals.dom.elWrap.addEventListener("mouseout",n.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(n,s){var c=this.w,g=c.globals.dom.elLegendWrap,y=g.getBoundingClientRect(),x=0,k=0;if("bottom"===c.config.legend.position)k+=c.globals.svgHeight-y.height/2;else if("top"===c.config.legend.position){var M=new yn(this.ctx),R=M.dimHelpers.getTitleSubtitleCoords("title").height,j=M.dimHelpers.getTitleSubtitleCoords("subtitle").height;k=k+(R>0?R-10:0)+(j>0?j-10:0)}g.style.position="absolute",k=k+s+c.config.legend.offsetY,g.style.left=(x=x+n+c.config.legend.offsetX)+"px",g.style.top=k+"px","bottom"===c.config.legend.position?(g.style.top="auto",g.style.bottom=5-c.config.legend.offsetY+"px"):"right"===c.config.legend.position&&(g.style.left="auto",g.style.right=25+c.config.legend.offsetX+"px"),["width","height"].forEach(function(U){g.style[U]&&(g.style[U]=parseInt(c.config.legend[U],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var n=this.w;n.globals.dom.elLegendWrap.style.right=0;var s=this.legendHelpers.getLegendBBox(),c=new yn(this.ctx),g=c.dimHelpers.getTitleSubtitleCoords("title"),y=c.dimHelpers.getTitleSubtitleCoords("subtitle"),x=0;"bottom"===n.config.legend.position?x=-s.clwh/1.8:"top"===n.config.legend.position&&(x=g.height+y.height+n.config.title.margin+n.config.subtitle.margin-10),this.setLegendWrapXY(20,x)}},{key:"legendAlignVertical",value:function(){var n=this.w,s=this.legendHelpers.getLegendBBox(),c=0;"left"===n.config.legend.position&&(c=20),"right"===n.config.legend.position&&(c=n.globals.svgWidth-s.clww-10),this.setLegendWrapXY(c,20)}},{key:"onLegendHovered",value:function(n){var s=this.w,c=n.target.classList.contains("apexcharts-legend-series")||n.target.classList.contains("apexcharts-legend-text")||n.target.classList.contains("apexcharts-legend-marker");if("heatmap"===s.config.chart.type||this.isBarsDistributed){if(c){var g=parseInt(n.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,g,this.w]),new xn(this.ctx).highlightRangeInSeries(n,n.target)}}else!n.target.classList.contains("apexcharts-inactive-legend")&&c&&new xn(this.ctx).toggleSeriesOnHover(n,n.target)}},{key:"onLegendClick",value:function(n){var s=this.w;if(!s.config.legend.customLegendItems.length&&(n.target.classList.contains("apexcharts-legend-series")||n.target.classList.contains("apexcharts-legend-text")||n.target.classList.contains("apexcharts-legend-marker"))){var c=parseInt(n.target.getAttribute("rel"),10)-1,g="true"===n.target.getAttribute("data:collapsed"),y=this.w.config.chart.events.legendClick;"function"==typeof y&&y(this.ctx,c,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,c,this.w]);var x=this.w.config.legend.markers.onClick;"function"==typeof x&&n.target.classList.contains("apexcharts-legend-marker")&&(x(this.ctx,c,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,c,this.w])),"treemap"!==s.config.chart.type&&"heatmap"!==s.config.chart.type&&!this.isBarsDistributed&&s.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(c,g)}}}]),ue}(),ys=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w;var s=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=s.globals.minX,this.maxX=s.globals.maxX}return ke(ue,[{key:"createToolbar",value:function(){var n=this,s=this.w,c=function(){return document.createElement("div")},g=c();if(g.setAttribute("class","apexcharts-toolbar"),g.style.top=s.config.chart.toolbar.offsetY+"px",g.style.right=3-s.config.chart.toolbar.offsetX+"px",s.globals.dom.elWrap.appendChild(g),this.elZoom=c(),this.elZoomIn=c(),this.elZoomOut=c(),this.elPan=c(),this.elSelection=c(),this.elZoomReset=c(),this.elMenuIcon=c(),this.elMenu=c(),this.elCustomIcons=[],this.t=s.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var y=0;y<this.t.customIcons.length;y++)this.elCustomIcons.push(c());var x=[],k=function(U,X,ee){var ae=U.toLowerCase();n.t[ae]&&s.config.chart.zoom.enabled&&x.push({el:X,icon:"string"==typeof n.t[ae]?n.t[ae]:ee,title:n.localeValues[U],class:"apexcharts-".concat(ae,"-icon")})};k("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),k("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var M=function(U){n.t[U]&&s.config.chart[U].enabled&&x.push({el:"zoom"===U?n.elZoom:n.elSelection,icon:"string"==typeof n.t[U]?n.t[U]:"zoom"===U?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:n.localeValues["zoom"===U?"selectionZoom":"selection"],class:s.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(U,"-icon")})};M("zoom"),M("selection"),this.t.pan&&s.config.chart.zoom.enabled&&x.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:s.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),k("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&x.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var R=0;R<this.elCustomIcons.length;R++)x.push({el:this.elCustomIcons[R],icon:this.t.customIcons[R].icon,title:this.t.customIcons[R].title,index:this.t.customIcons[R].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[R].class});x.forEach(function(U,X){U.index&&Ve.moveIndexInArray(x,X,U.index)});for(var j=0;j<x.length;j++)rt.setAttrs(x[j].el,{class:x[j].class,title:x[j].title}),x[j].el.innerHTML=x[j].icon,g.appendChild(x[j].el);this._createHamburgerMenu(g),s.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):s.globals.panEnabled?this.elPan.classList.add(this.selectedClass):s.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(n){this.elMenuItems=[],n.appendChild(this.elMenu),rt.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var s=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],c=0;c<s.length;c++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[c].innerHTML=s[c].title,rt.setAttrs(this.elMenuItems[c],{class:"apexcharts-menu-item ".concat(s[c].name),title:s[c].title}),this.elMenu.appendChild(this.elMenuItems[c])}},{key:"addToolbarEventListeners",value:function(){var n=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(c){c.classList.contains("exportSVG")?c.addEventListener("click",n.handleDownload.bind(n,"svg")):c.classList.contains("exportPNG")?c.addEventListener("click",n.handleDownload.bind(n,"png")):c.classList.contains("exportCSV")&&c.addEventListener("click",n.handleDownload.bind(n,"csv"))});for(var s=0;s<this.t.customIcons.length;s++)this.elCustomIcons[s].addEventListener("click",this.t.customIcons[s].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(n){this.ctx.getSyncedCharts().forEach(function(s){s.ctx.toolbar.toggleOtherControls();var c="selection"===n?s.ctx.toolbar.elSelection:s.ctx.toolbar.elZoom,g="selection"===n?"selectionEnabled":"zoomEnabled";s.w.globals[g]=!s.w.globals[g],c.classList.contains(s.ctx.toolbar.selectedClass)?c.classList.remove(s.ctx.toolbar.selectedClass):c.classList.add(s.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var n=this.w;this.elZoom||(this.elZoom=n.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=n.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=n.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(n){this.toggleOtherControls(),"pan"===n?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var s="pan"===n?this.elPan:this.elZoom,c="pan"===n?this.elZoom:this.elPan;s&&s.classList.add(this.selectedClass),c&&c.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(n){n.ctx.toolbar.toggleOtherControls(),n.w.globals.panEnabled=!n.w.globals.panEnabled,n.ctx.toolbar.elPan.classList.contains(n.ctx.toolbar.selectedClass)?n.ctx.toolbar.elPan.classList.remove(n.ctx.toolbar.selectedClass):n.ctx.toolbar.elPan.classList.add(n.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var n=this,s=this.w;s.globals.panEnabled=!1,s.globals.zoomEnabled=!1,s.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(c){c&&c.classList.remove(n.selectedClass)})}},{key:"handleZoomIn",value:function(){var n=this.w;n.globals.isRangeBar&&(this.minX=n.globals.minY,this.maxX=n.globals.maxY);var s=(this.minX+this.maxX)/2,y=this._getNewMinXMaxX((this.minX+s)/2,(this.maxX+s)/2);n.globals.disableZoomIn||this.zoomUpdateOptions(y.minX,y.maxX)}},{key:"handleZoomOut",value:function(){var n=this.w;if(n.globals.isRangeBar&&(this.minX=n.globals.minY,this.maxX=n.globals.maxY),!("datetime"===n.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var s=(this.minX+this.maxX)/2,y=this._getNewMinXMaxX(this.minX-(s-this.minX),this.maxX-(s-this.maxX));n.globals.disableZoomOut||this.zoomUpdateOptions(y.minX,y.maxX)}}},{key:"_getNewMinXMaxX",value:function(n,s){var c=this.w.config.xaxis.convertedCatToNumeric;return{minX:c?Math.floor(n):n,maxX:c?Math.floor(s):s}}},{key:"zoomUpdateOptions",value:function(n,s){var c=this.w;if(void 0!==n||void 0!==s){if(!(c.config.xaxis.convertedCatToNumeric&&(n<1&&(n=1,s=c.globals.dataPoints),s-n<2))){var g={min:n,max:s},y=this.getBeforeZoomRange(g);y&&(g=y.xaxis);var x={xaxis:g},k=Ve.clone(c.globals.initialConfig.yaxis);c.config.chart.group||(x.yaxis=k),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(x,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(g,k)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(n,s){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:n,yaxis:s})}},{key:"getBeforeZoomRange",value:function(n,s){var c=null;return"function"==typeof this.ev.beforeZoom&&(c=this.ev.beforeZoom(this,{xaxis:n,yaxis:s})),c}},{key:"toggleMenu",value:function(){var n=this;window.setTimeout(function(){n.elMenu.classList.contains("apexcharts-menu-open")?n.elMenu.classList.remove("apexcharts-menu-open"):n.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(n){var s=this.w,c=new tr(this.ctx);switch(n){case"svg":c.exportToSVG(this.ctx);break;case"png":c.exportToPng(this.ctx);break;case"csv":c.exportToCSV({series:s.config.series,columnDelimiter:s.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(n){this.ctx.getSyncedCharts().forEach(function(s){var c=s.w;if(c.globals.lastXAxis.min=c.globals.initialConfig.xaxis.min,c.globals.lastXAxis.max=c.globals.initialConfig.xaxis.max,s.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof c.config.chart.events.beforeResetZoom){var g=c.config.chart.events.beforeResetZoom(s,c);g&&s.updateHelpers.revertDefaultAxisMinMax(g)}"function"==typeof c.config.chart.events.zoomed&&s.ctx.toolbar.zoomCallback({min:c.config.xaxis.min,max:c.config.xaxis.max}),c.globals.zoomed=!1;var y=s.ctx.series.emptyCollapsedSeries(Ve.clone(c.globals.initialSeries));s.updateHelpers._updateSeries(y,c.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),ue}(),Kn=function(ue){Oe(s,ys);var n=dt(s);function s(c){var g;return Y(this,s),(g=n.call(this,c)).ctx=c,g.w=c.w,g.dragged=!1,g.graphics=new rt(g.ctx),g.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],g.clientX=0,g.clientY=0,g.startX=0,g.endX=0,g.dragX=0,g.startY=0,g.endY=0,g.dragY=0,g.moveDirection="none",g}return ke(s,[{key:"init",value:function(c){var g=this,y=c.xyRatios,x=this.w,k=this;this.xyRatios=y,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=x.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),x.globals.dom.elGraphical.add(this.zoomRect),x.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===x.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:x.globals.gridWidth,maxY:x.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===x.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:x.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=x.globals.dom.baseEl.querySelector("".concat(x.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(M){g.hoverArea.addEventListener(M,k.svgMouseEvents.bind(k,y),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(c,g){var y=this.w,x=this,k=this.ctx.toolbar,M=y.globals.zoomEnabled?y.config.chart.zoom.type:y.config.chart.selection.type,R=y.config.chart.toolbar.autoSelected;if(g.shiftKey?(this.shiftWasPressed=!0,k.enableZoomPanFromToolbar("pan"===R?"zoom":"pan")):this.shiftWasPressed&&(k.enableZoomPanFromToolbar(R),this.shiftWasPressed=!1),g.target){var j,U=g.target.classList;if(g.target.parentNode&&null!==g.target.parentNode&&(j=g.target.parentNode.classList),!(U.contains("apexcharts-selection-rect")||U.contains("apexcharts-legend-marker")||U.contains("apexcharts-legend-text")||j&&j.contains("apexcharts-toolbar"))){if(x.clientX="touchmove"===g.type||"touchstart"===g.type?g.touches[0].clientX:"touchend"===g.type?g.changedTouches[0].clientX:g.clientX,x.clientY="touchmove"===g.type||"touchstart"===g.type?g.touches[0].clientY:"touchend"===g.type?g.changedTouches[0].clientY:g.clientY,("mousedown"===g.type||"touchmove"===g.type)&&1===g.which){var X=x.gridRect.getBoundingClientRect();x.startX=x.clientX-X.left,x.startY=x.clientY-X.top,x.dragged=!1,x.w.globals.mousedown=!0}if("mousemove"===g.type&&1===g.which||"touchmove"===g.type)if(x.dragged=!0,y.globals.panEnabled){if(y.globals.selection=null,x.w.globals.mousedown||"touchmove"===g.type){if("touchmove"===g.type&&!x.w.globals.mousedown){console.warn("me.w.globals.mousedown ",x.w.globals.mousedown);var ee=x.gridRect.getBoundingClientRect();x.startX=x.clientX-ee.left,x.startY=x.clientY-ee.top,x.w.globals.mousedown=!0}x.panDragging({context:x,zoomtype:M,xyRatios:c})}}else{if("touchmove"===g.type){if(!x.w.globals.mousedown){var ae=x.gridRect.getBoundingClientRect();x.startX=x.clientX-ae.left,x.startY=x.clientY-ae.top}x.w.globals.mousedown=!0}(x.w.globals.mousedown&&y.globals.zoomEnabled||x.w.globals.mousedown&&y.globals.selectionEnabled)&&(x.selection=x.selectionDrawing({context:x,zoomtype:M}))}if("mouseup"===g.type||"touchend"===g.type||"mouseleave"===g.type){var de=x.gridRect.getBoundingClientRect();x.w.globals.mousedown&&(x.endX=x.clientX-de.left,x.endY=x.clientY-de.top,x.dragX=Math.abs(x.endX-x.startX),x.dragY=Math.abs(x.endY-x.startY),(y.globals.zoomEnabled||y.globals.selectionEnabled)&&x.selectionDrawn({context:x,zoomtype:M}),y.globals.panEnabled&&y.config.xaxis.convertedCatToNumeric&&x.delayedPanScrolled()),y.globals.zoomEnabled&&x.hideSelectionRect(this.selectionRect),x.dragged=!1,x.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var c=this.w;if(this.selectionRect){var g=this.selectionRect.node.getBoundingClientRect();g.width>0&&g.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:c.globals.gridWidth,maxY:c.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var c=this.w,g=this.xyRatios;if(!c.globals.zoomEnabled)if(null!=c.globals.selection)this.drawSelectionRect(c.globals.selection);else if(void 0!==c.config.chart.selection.xaxis.min&&void 0!==c.config.chart.selection.xaxis.max){var y=(c.config.chart.selection.xaxis.min-c.globals.minX)/g.xRatio,x=c.globals.gridWidth-(c.globals.maxX-c.config.chart.selection.xaxis.max)/g.xRatio-y;c.globals.isRangeBar&&(y=(c.config.chart.selection.xaxis.min-c.globals.yAxisScale[0].niceMin)/g.invertedYRatio,x=(c.config.chart.selection.xaxis.max-c.config.chart.selection.xaxis.min)/g.invertedYRatio),this.drawSelectionRect({x:y,y:0,width:x,height:c.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof c.config.chart.events.selection&&c.config.chart.events.selection(this.ctx,{xaxis:{min:c.config.chart.selection.xaxis.min,max:c.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(c){var g=c.x,y=c.y,x=c.width,k=c.height,M=c.translateX,j=c.translateY,X=this.w,ee=this.zoomRect,ae=this.selectionRect;if(this.dragged||null!==X.globals.selection){var de={transform:"translate("+(void 0===M?0:M)+", "+(void 0===j?0:j)+")"};X.globals.zoomEnabled&&this.dragged&&(x<0&&(x=1),ee.attr({x:g,y,width:x,height:k,fill:X.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":X.config.chart.zoom.zoomedArea.fill.opacity,stroke:X.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":X.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":X.config.chart.zoom.zoomedArea.stroke.opacity}),rt.setAttrs(ee.node,de)),X.globals.selectionEnabled&&(ae.attr({x:g,y,width:x>0?x:0,height:k>0?k:0,fill:X.config.chart.selection.fill.color,"fill-opacity":X.config.chart.selection.fill.opacity,stroke:X.config.chart.selection.stroke.color,"stroke-width":X.config.chart.selection.stroke.width,"stroke-dasharray":X.config.chart.selection.stroke.dashArray,"stroke-opacity":X.config.chart.selection.stroke.opacity}),rt.setAttrs(ae.node,de))}}},{key:"hideSelectionRect",value:function(c){c&&c.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(c){var de,y=c.zoomtype,x=this.w,k=c.context,M=this.gridRect.getBoundingClientRect(),R=k.startX-1,j=k.startY,U=!1,X=!1,ee=k.clientX-M.left-R,ae=k.clientY-M.top-j;return Math.abs(ee+R)>x.globals.gridWidth?ee=x.globals.gridWidth-R:k.clientX-M.left<0&&(ee=R),R>k.clientX-M.left&&(U=!0,ee=Math.abs(ee)),j>k.clientY-M.top&&(X=!0,ae=Math.abs(ae)),k.drawSelectionRect(de="x"===y?{x:U?R-ee:R,y:0,width:ee,height:x.globals.gridHeight}:"y"===y?{x:0,y:X?j-ae:j,width:x.globals.gridWidth,height:ae}:{x:U?R-ee:R,y:X?j-ae:j,width:ee,height:ae}),k.selectionDragging("resizing"),de}},{key:"selectionDragging",value:function(c,g){var y=this,x=this.w,k=this.xyRatios,M=this.selectionRect,R=0;"resizing"===c&&(R=30);var j=function(X){return parseFloat(M.node.getAttribute(X))},U={x:j("x"),y:j("y"),width:j("width"),height:j("height")};x.globals.selection=U,"function"==typeof x.config.chart.events.selection&&x.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var X,ee,ae,de,ve=y.gridRect.getBoundingClientRect(),he=M.node.getBoundingClientRect();x.globals.isRangeBar?(X=x.globals.yAxisScale[0].niceMin+(he.left-ve.left)*k.invertedYRatio,ee=x.globals.yAxisScale[0].niceMin+(he.right-ve.left)*k.invertedYRatio,ae=0,de=1):(X=x.globals.xAxisScale.niceMin+(he.left-ve.left)*k.xRatio,ee=x.globals.xAxisScale.niceMin+(he.right-ve.left)*k.xRatio,ae=x.globals.yAxisScale[0].niceMin+(ve.bottom-he.bottom)*k.yRatio[0],de=x.globals.yAxisScale[0].niceMax-(he.top-ve.top)*k.yRatio[0]);var be={xaxis:{min:X,max:ee},yaxis:{min:ae,max:de}};x.config.chart.events.selection(y.ctx,be),x.config.chart.brush.enabled&&void 0!==x.config.chart.events.brushScrolled&&x.config.chart.events.brushScrolled(y.ctx,be)},R))}},{key:"selectionDrawn",value:function(c){var y=c.zoomtype,x=this.w,k=c.context,M=this.xyRatios,R=this.ctx.toolbar;if(k.startX>k.endX){var j=k.startX;k.startX=k.endX,k.endX=j}if(k.startY>k.endY){var U=k.startY;k.startY=k.endY,k.endY=U}var X=void 0,ee=void 0;x.globals.isRangeBar?(X=x.globals.yAxisScale[0].niceMin+k.startX*M.invertedYRatio,ee=x.globals.yAxisScale[0].niceMin+k.endX*M.invertedYRatio):(X=x.globals.xAxisScale.niceMin+k.startX*M.xRatio,ee=x.globals.xAxisScale.niceMin+k.endX*M.xRatio);var ae=[],de=[];if(x.config.yaxis.forEach(function(_e,Me){ae.push(x.globals.yAxisScale[Me].niceMax-M.yRatio[Me]*k.startY),de.push(x.globals.yAxisScale[Me].niceMax-M.yRatio[Me]*k.endY)}),k.dragged&&(k.dragX>10||k.dragY>10)&&X!==ee)if(x.globals.zoomEnabled){var ve=Ve.clone(x.globals.initialConfig.yaxis),he=Ve.clone(x.globals.initialConfig.xaxis);if(x.globals.zoomed=!0,x.config.xaxis.convertedCatToNumeric&&(X=Math.floor(X),ee=Math.floor(ee),X<1&&(X=1,ee=x.globals.dataPoints),ee-X<2&&(ee=X+1)),"xy"!==y&&"x"!==y||(he={min:X,max:ee}),"xy"!==y&&"y"!==y||ve.forEach(function(_e,Me){ve[Me].min=de[Me],ve[Me].max=ae[Me]}),R){var be=R.getBeforeZoomRange(he,ve);be&&(he=be.xaxis?be.xaxis:he,ve=be.yaxis?be.yaxis:ve)}var F={xaxis:he};x.config.chart.group||(F.yaxis=ve),k.ctx.updateHelpers._updateOptions(F,!1,k.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof x.config.chart.events.zoomed&&R.zoomCallback(he,ve)}else if(x.globals.selectionEnabled){var K,ce=null;K={min:X,max:ee},"xy"!==y&&"y"!==y||(ce=Ve.clone(x.config.yaxis)).forEach(function(_e,Me){ce[Me].min=de[Me],ce[Me].max=ae[Me]}),x.globals.selection=k.selection,"function"==typeof x.config.chart.events.selection&&x.config.chart.events.selection(k.ctx,{xaxis:K,yaxis:ce})}}},{key:"panDragging",value:function(c){var y=this.w,x=c.context;if(void 0!==y.globals.lastClientPosition.x){var k=y.globals.lastClientPosition.x-x.clientX,M=y.globals.lastClientPosition.y-x.clientY;Math.abs(k)>Math.abs(M)&&k>0?this.moveDirection="left":Math.abs(k)>Math.abs(M)&&k<0?this.moveDirection="right":Math.abs(M)>Math.abs(k)&&M>0?this.moveDirection="up":Math.abs(M)>Math.abs(k)&&M<0&&(this.moveDirection="down")}y.globals.lastClientPosition={x:x.clientX,y:x.clientY},y.config.xaxis.convertedCatToNumeric||x.panScrolled(y.globals.isRangeBar?y.globals.minY:y.globals.minX,y.globals.isRangeBar?y.globals.maxY:y.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var c=this.w,g=c.globals.minX,y=c.globals.maxX,x=(c.globals.maxX-c.globals.minX)/2;"left"===this.moveDirection?(g=c.globals.minX+x,y=c.globals.maxX+x):"right"===this.moveDirection&&(g=c.globals.minX-x,y=c.globals.maxX-x),g=Math.floor(g),y=Math.floor(y),this.updateScrolledChart({xaxis:{min:g,max:y}},g,y)}},{key:"panScrolled",value:function(c,g){var y=this.w,x=this.xyRatios,k=Ve.clone(y.globals.initialConfig.yaxis),M=x.xRatio,R=y.globals.minX,j=y.globals.maxX;y.globals.isRangeBar&&(M=x.invertedYRatio,R=y.globals.minY,j=y.globals.maxY),"left"===this.moveDirection?(c=R+y.globals.gridWidth/15*M,g=j+y.globals.gridWidth/15*M):"right"===this.moveDirection&&(c=R-y.globals.gridWidth/15*M,g=j-y.globals.gridWidth/15*M),y.globals.isRangeBar||(c<y.globals.initialMinX||g>y.globals.initialMaxX)&&(c=R,g=j);var U={xaxis:{min:c,max:g}};y.config.chart.group||(U.yaxis=k),this.updateScrolledChart(U,c,g)}},{key:"updateScrolledChart",value:function(c,g,y){var x=this.w;this.ctx.updateHelpers._updateOptions(c,!1,!1),"function"==typeof x.config.chart.events.scrolled&&x.config.chart.events.scrolled(this.ctx,{xaxis:{min:g,max:y}})}}]),s}(),fr=function(){function ue(n){Y(this,ue),this.w=n.w,this.ttCtx=n,this.ctx=n.ctx}return ke(ue,[{key:"getNearestValues",value:function(n){var s=n.hoverArea,g=n.clientX,y=n.clientY,x=this.w,k=n.elGrid.getBoundingClientRect(),M=k.width,R=k.height,j=M/(x.globals.dataPoints-1),U=R/x.globals.dataPoints,X=this.hasBars();!x.globals.comboCharts&&!X||x.config.xaxis.convertedCatToNumeric||(j=M/x.globals.dataPoints);var ee=g-k.left-x.globals.barPadForNumericAxis,ae=y-k.top;ee<0||ae<0||ee>M||ae>R?(s.classList.remove("hovering-zoom"),s.classList.remove("hovering-pan")):x.globals.zoomEnabled?(s.classList.remove("hovering-pan"),s.classList.add("hovering-zoom")):x.globals.panEnabled&&(s.classList.remove("hovering-zoom"),s.classList.add("hovering-pan"));var de=Math.round(ee/j),ve=Math.floor(ae/U);X&&!x.config.xaxis.convertedCatToNumeric&&(de=Math.ceil(ee/j),de-=1);var he=null,be=null,F=x.globals.seriesXvalues.map(function($e){return $e.filter(function(wt){return Ve.isNumber(wt)})}),K=x.globals.seriesYvalues.map(function($e){return $e.filter(function(wt){return Ve.isNumber(wt)})});if(x.globals.isXNumeric){var ce=this.ttCtx.getElGrid().getBoundingClientRect(),_e=ee*(ce.width/M);he=(be=this.closestInMultiArray(_e,ae*(ce.height/R),F,K)).index,de=be.j,null!==he&&(de=(be=this.closestInArray(_e,F=x.globals.seriesXvalues[he])).index)}return x.globals.capturedSeriesIndex=null===he?-1:he,(!de||de<1)&&(de=0),x.globals.capturedDataPointIndex=x.globals.isBarHorizontal?ve:de,{capturedSeries:he,j:x.globals.isBarHorizontal?ve:de,hoverX:ee,hoverY:ae}}},{key:"closestInMultiArray",value:function(n,s,c,g){var x=0,k=null,M=-1;this.w.globals.series.length>1?x=this.getFirstActiveXArray(c):k=0;var j=Math.abs(n-c[x][0]);if(c.forEach(function(ee){ee.forEach(function(ae,de){var ve=Math.abs(n-ae);ve<=j&&(j=ve,M=de)})}),-1!==M){var X=Math.abs(s-g[x][M]);k=x,g.forEach(function(ee,ae){var de=Math.abs(s-ee[M]);de<=X&&(X=de,k=ae)})}return{index:k,j:M}}},{key:"getFirstActiveXArray",value:function(n){for(var s=this.w,c=0,g=n.map(function(x,k){return x.length>0?k:-1}),y=0;y<g.length;y++)if(-1!==g[y]&&-1===s.globals.collapsedSeriesIndices.indexOf(y)&&-1===s.globals.ancillaryCollapsedSeriesIndices.indexOf(y)){c=g[y];break}return c}},{key:"closestInArray",value:function(n,s){for(var g=null,y=Math.abs(n-s[0]),x=0;x<s.length;x++){var k=Math.abs(n-s[x]);k<y&&(y=k,g=x)}return{index:g}}},{key:"isXoverlap",value:function(n){var s=[],c=this.w.globals.seriesX.filter(function(y){return void 0!==y[0]});if(c.length>0)for(var g=0;g<c.length-1;g++)void 0!==c[g][n]&&void 0!==c[g+1][n]&&c[g][n]!==c[g+1][n]&&s.push("unEqual");return 0===s.length}},{key:"isInitialSeriesSameLen",value:function(){for(var n=!0,s=this.w.globals.initialSeries,c=0;c<s.length-1;c++)if(s[c].data.length!==s[c+1].data.length){n=!1;break}return n}},{key:"getBarsHeight",value:function(n){return it(n).reduce(function(s,c){return s+c.getBBox().height},0)}},{key:"getElMarkers",value:function(n){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof n?".apexcharts-series[data\\:realIndex='".concat(n,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var n=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(n=it(n)).sort(function(c,g){var y=Number(c.getAttribute("data:realIndex")),x=Number(g.getAttribute("data:realIndex"));return x<y?1:x>y?-1:0});var s=[];return n.forEach(function(c){s.push(c.querySelector(".apexcharts-marker"))}),s}},{key:"hasMarkers",value:function(n){return this.getElMarkers(n).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(n){var s=this.w,c=s.config.markers.hover.size;return void 0===c&&(c=s.globals.markers.size[n]+s.config.markers.hover.sizeOffset),c}},{key:"toggleAllTooltipSeriesGroups",value:function(n){var s=this.w,c=this.ttCtx;0===c.allTooltipSeriesGroups.length&&(c.allTooltipSeriesGroups=s.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var g=c.allTooltipSeriesGroups,y=0;y<g.length;y++)"enable"===n?(g[y].classList.add("apexcharts-active"),g[y].style.display=s.config.tooltip.items.display):(g[y].classList.remove("apexcharts-active"),g[y].style.display="none")}}]),ue}(),sr=function(){function ue(n){Y(this,ue),this.w=n.w,this.ctx=n.ctx,this.ttCtx=n,this.tooltipUtil=new fr(n)}return ke(ue,[{key:"drawSeriesTexts",value:function(n){var s=n.shared,c=void 0===s||s,g=n.ttItems,y=n.i,x=void 0===y?0:y,k=n.j,M=void 0===k?null:k,U=n.e,X=this.w;void 0!==X.config.tooltip.custom?this.handleCustomTooltip({i:x,j:M,y1:n.y1,y2:n.y2,w:X}):this.toggleActiveInactiveSeries(c);var ee=this.getValuesToPrint({i:x,j:M});this.printLabels({i:x,j:M,values:ee,ttItems:g,shared:c,e:U});var ae=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=ae.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=ae.getBoundingClientRect().height}},{key:"printLabels",value:function(n){var s,c=this,g=n.i,y=n.j,x=n.values,k=n.ttItems,M=n.shared,R=n.e,j=this.w,U=[],X=function(ce){return j.globals.seriesGoals[ce]&&j.globals.seriesGoals[ce][y]&&Array.isArray(j.globals.seriesGoals[ce][y])},ee=x.xVal,ae=x.zVal,de=x.xAxisTTVal,ve="",he=j.globals.colors[g];null!==y&&j.config.plotOptions.bar.distributed&&(he=j.globals.colors[y]);for(var be=function(ce,_e){var Me=c.getFormatters(g);ve=c.getSeriesName({fn:Me.yLbTitleFormatter,index:g,seriesIndex:g,j:y}),"treemap"===j.config.chart.type&&(ve=Me.yLbTitleFormatter(String(j.config.series[g].data[y].x),{series:j.globals.series,seriesIndex:g,dataPointIndex:y,w:j}));var $e=j.config.tooltip.inverseOrder?_e:ce;if(j.globals.axisCharts){var wt=function(hi){var yi,rn,gn,An;return j.globals.isRangeData?Me.yLbFormatter(null===(yi=j.globals.seriesRangeStart)||void 0===yi||null===(rn=yi[hi])||void 0===rn?void 0:rn[y],{series:j.globals.seriesRangeStart,seriesIndex:hi,dataPointIndex:y,w:j})+" - "+Me.yLbFormatter(null===(gn=j.globals.seriesRangeEnd)||void 0===gn||null===(An=gn[hi])||void 0===An?void 0:An[y],{series:j.globals.seriesRangeEnd,seriesIndex:hi,dataPointIndex:y,w:j}):Me.yLbFormatter(j.globals.series[hi][y],{series:j.globals.series,seriesIndex:hi,dataPointIndex:y,w:j})};if(M)Me=c.getFormatters($e),ve=c.getSeriesName({fn:Me.yLbTitleFormatter,index:$e,seriesIndex:g,j:y}),he=j.globals.colors[$e],s=wt($e),X($e)&&(U=j.globals.seriesGoals[$e][y].map(function(hi){return{attrs:hi,val:Me.yLbFormatter(hi.value,{seriesIndex:$e,dataPointIndex:y,w:j})}}));else{var kt,Wt=null==R||null===(kt=R.target)||void 0===kt?void 0:kt.getAttribute("fill");Wt&&(he=-1!==Wt.indexOf("url")?document.querySelector(Wt.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):Wt),s=wt(g),X(g)&&Array.isArray(j.globals.seriesGoals[g][y])&&(U=j.globals.seriesGoals[g][y].map(function(hi){return{attrs:hi,val:Me.yLbFormatter(hi.value,{seriesIndex:g,dataPointIndex:y,w:j})}}))}}null===y&&(s=Me.yLbFormatter(j.globals.series[g],Re(Re({},j),{},{seriesIndex:g,dataPointIndex:g}))),c.DOMHandling({i:g,t:$e,j:y,ttItems:k,values:{val:s,goalVals:U,xVal:ee,xAxisTTVal:de,zVal:ae},seriesName:ve,shared:M,pColor:he})},F=0,K=j.globals.series.length-1;F<j.globals.series.length;F++,K--)be(F,K)}},{key:"getFormatters",value:function(n){var s,c=this.w,g=c.globals.yLabelFormatters[n];return void 0!==c.globals.ttVal?Array.isArray(c.globals.ttVal)?(g=c.globals.ttVal[n]&&c.globals.ttVal[n].formatter,s=c.globals.ttVal[n]&&c.globals.ttVal[n].title&&c.globals.ttVal[n].title.formatter):(g=c.globals.ttVal.formatter,"function"==typeof c.globals.ttVal.title.formatter&&(s=c.globals.ttVal.title.formatter)):s=c.config.tooltip.y.title.formatter,"function"!=typeof g&&(g=c.globals.yLabelFormatters[0]?c.globals.yLabelFormatters[0]:function(y){return y}),"function"!=typeof s&&(s=function(y){return y}),{yLbFormatter:g,yLbTitleFormatter:s}}},{key:"getSeriesName",value:function(n){var g=n.seriesIndex,y=n.j,x=this.w;return(0,n.fn)(String(x.globals.seriesNames[n.index]),{series:x.globals.series,seriesIndex:g,dataPointIndex:y,w:x})}},{key:"DOMHandling",value:function(n){var s=n.t,c=n.j,g=n.ttItems,y=n.values,x=n.seriesName,k=n.shared,M=n.pColor,R=this.w,j=this.ttCtx,U=y.val,X=y.goalVals,ee=y.xVal,ae=y.xAxisTTVal,de=y.zVal,ve=null;ve=g[s].children,R.config.tooltip.fillSeriesColor&&(g[s].style.backgroundColor=M,ve[0].style.display="none"),j.showTooltipTitle&&(null===j.tooltipTitle&&(j.tooltipTitle=R.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),j.tooltipTitle.innerHTML=ee),j.isXAxisTooltipEnabled&&(j.xaxisTooltipText.innerHTML=""!==ae?ae:ee);var he=g[s].querySelector(".apexcharts-tooltip-text-y-label");he&&(he.innerHTML=x||"");var be=g[s].querySelector(".apexcharts-tooltip-text-y-value");be&&(be.innerHTML=void 0!==U?U:""),ve[0]&&ve[0].classList.contains("apexcharts-tooltip-marker")&&(R.config.tooltip.marker.fillColors&&Array.isArray(R.config.tooltip.marker.fillColors)&&(M=R.config.tooltip.marker.fillColors[s]),ve[0].style.backgroundColor=M),R.config.tooltip.marker.show||(ve[0].style.display="none");var F=g[s].querySelector(".apexcharts-tooltip-text-goals-label"),K=g[s].querySelector(".apexcharts-tooltip-text-goals-value");if(X.length&&R.globals.seriesGoals[s]){var ce=function(){var $e="<div >",wt="<div>";X.forEach(function(kt,Wt){$e+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(kt.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(kt.attrs.name,"</div>"),wt+="<div>".concat(kt.val,"</div>")}),F.innerHTML=$e+"</div>",K.innerHTML=wt+"</div>"};k?R.globals.seriesGoals[s][c]&&Array.isArray(R.globals.seriesGoals[s][c])?ce():(F.innerHTML="",K.innerHTML=""):ce()}else F.innerHTML="",K.innerHTML="";if(null!==de&&(g[s].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=R.config.tooltip.z.title,g[s].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==de?de:""),k&&ve[0]){if(R.config.tooltip.hideEmptySeries){var _e=g[s].querySelector(".apexcharts-tooltip-marker"),Me=g[s].querySelector(".apexcharts-tooltip-text");0==parseFloat(U)?(_e.style.display="none",Me.style.display="none"):(_e.style.display="block",Me.style.display="block")}ve[0].parentNode.style.display=null==U||R.globals.ancillaryCollapsedSeriesIndices.indexOf(s)>-1||R.globals.collapsedSeriesIndices.indexOf(s)>-1?"none":R.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(n){var s=this.w;if(n)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var c=s.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");c&&(c.classList.add("apexcharts-active"),c.style.display=s.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(n){var s=n.i,c=n.j,g=this.w,y=this.ctx.series.filteredSeriesX(),x="",k="",M=null,R=null,j={series:g.globals.series,seriesIndex:s,dataPointIndex:c,w:g},U=g.globals.ttZFormatter;null===c?R=g.globals.series[s]:g.globals.isXNumeric&&"treemap"!==g.config.chart.type?(x=y[s][c],0===y[s].length&&(x=y[this.tooltipUtil.getFirstActiveXArray(y)][c])):x=void 0!==g.globals.labels[c]?g.globals.labels[c]:"";var X=x;return x=g.globals.isXNumeric&&"datetime"===g.config.xaxis.type?new fi(this.ctx).xLabelFormat(g.globals.ttKeyFormatter,X,X,{i:void 0,dateFormatter:new ai(this.ctx).formatDate,w:this.w}):g.globals.isBarHorizontal?g.globals.yLabelFormatters[0](X,j):g.globals.xLabelFormatter(X,j),void 0!==g.config.tooltip.x.formatter&&(x=g.globals.ttKeyFormatter(X,j)),g.globals.seriesZ.length>0&&g.globals.seriesZ[s].length>0&&(M=U(g.globals.seriesZ[s][c],g)),k="function"==typeof g.config.xaxis.tooltip.formatter?g.globals.xaxisTooltipFormatter(X,j):x,{val:Array.isArray(R)?R.join(" "):R,xVal:Array.isArray(x)?x.join(" "):x,xAxisTTVal:Array.isArray(k)?k.join(" "):k,zVal:M}}},{key:"handleCustomTooltip",value:function(n){var s=n.i,c=n.j,g=n.y1,y=n.y2,x=n.w,k=this.ttCtx.getElTooltip(),M=x.config.tooltip.custom;Array.isArray(M)&&M[s]&&(M=M[s]),k.innerHTML=M({ctx:this.ctx,series:x.globals.series,seriesIndex:s,dataPointIndex:c,y1:g,y2:y,w:x})}}]),ue}(),vr=function(){function ue(n){Y(this,ue),this.ttCtx=n,this.ctx=n.ctx,this.w=n.w}return ke(ue,[{key:"moveXCrosshairs",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=this.ttCtx,g=this.w,y=c.getElXCrosshairs(),x=n-c.xcrosshairsWidth/2,k=g.globals.labels.slice().length;if(null!==s&&(x=g.globals.gridWidth/k*s),null===y||g.globals.isBarHorizontal||(y.setAttribute("x",x),y.setAttribute("x1",x),y.setAttribute("x2",x),y.setAttribute("y2",g.globals.gridHeight),y.classList.add("apexcharts-active")),x<0&&(x=0),x>g.globals.gridWidth&&(x=g.globals.gridWidth),c.isXAxisTooltipEnabled){var M=x;"tickWidth"!==g.config.xaxis.crosshairs.width&&"barWidth"!==g.config.xaxis.crosshairs.width||(M=x+c.xcrosshairsWidth/2),this.moveXAxisTooltip(M)}}},{key:"moveYCrosshairs",value:function(n){var s=this.ttCtx;null!==s.ycrosshairs&&rt.setAttrs(s.ycrosshairs,{y1:n,y2:n}),null!==s.ycrosshairsHidden&&rt.setAttrs(s.ycrosshairsHidden,{y1:n,y2:n})}},{key:"moveXAxisTooltip",value:function(n){var s=this.w,c=this.ttCtx;if(null!==c.xaxisTooltip&&0!==c.xcrosshairsWidth){c.xaxisTooltip.classList.add("apexcharts-active");var y,g=c.xaxisOffY+s.config.xaxis.tooltip.offsetY+s.globals.translateY+1+s.config.xaxis.offsetY;n-=c.xaxisTooltip.getBoundingClientRect().width/2,isNaN(n)||(n+=s.globals.translateX,y=new rt(this.ctx).getTextRects(c.xaxisTooltipText.innerHTML),c.xaxisTooltipText.style.minWidth=y.width+"px",c.xaxisTooltip.style.left=n+"px",c.xaxisTooltip.style.top=g+"px")}}},{key:"moveYAxisTooltip",value:function(n){var s=this.w,c=this.ttCtx;null===c.yaxisTTEls&&(c.yaxisTTEls=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var g=parseInt(c.ycrosshairsHidden.getAttribute("y1"),10),y=s.globals.translateY+g,x=c.yaxisTTEls[n].getBoundingClientRect().height,k=s.globals.translateYAxisX[n]-2;s.config.yaxis[n].opposite&&(k-=26),y-=x/2,-1===s.globals.ignoreYAxisIndexes.indexOf(n)?(c.yaxisTTEls[n].classList.add("apexcharts-active"),c.yaxisTTEls[n].style.top=y+"px",c.yaxisTTEls[n].style.left=k+s.config.yaxis[n].tooltip.offsetX+"px"):c.yaxisTTEls[n].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=this.w,y=this.ttCtx,x=y.getElTooltip(),k=y.tooltipRect,M=null!==c?parseFloat(c):1,R=parseFloat(n)+M+5,j=parseFloat(s)+M/2;if(R>g.globals.gridWidth/2&&(R=R-k.ttWidth-M-10),R>g.globals.gridWidth-k.ttWidth-10&&(R=g.globals.gridWidth-k.ttWidth),R<-20&&(R=-20),g.config.tooltip.followCursor){var U=y.getElGrid().getBoundingClientRect();(R=y.e.clientX-U.left)>g.globals.gridWidth/2&&(R-=y.tooltipRect.ttWidth),(j=y.e.clientY+g.globals.translateY-U.top)>g.globals.gridHeight/2&&(j-=y.tooltipRect.ttHeight)}else g.globals.isBarHorizontal||k.ttHeight/2+j>g.globals.gridHeight&&(j=g.globals.gridHeight-k.ttHeight+g.globals.translateY);isNaN(R)||(x.style.left=(R+=g.globals.translateX)+"px",x.style.top=j+"px")}},{key:"moveMarkers",value:function(n,s){var c=this.w,g=this.ttCtx;if(c.globals.markers.size[n]>0)for(var y=c.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(n,"'] .apexcharts-marker")),x=0;x<y.length;x++)parseInt(y[x].getAttribute("rel"),10)===s&&(g.marker.resetPointsSize(),g.marker.enlargeCurrentPoint(s,y[x]));else g.marker.resetPointsSize(),this.moveDynamicPointOnHover(s,n)}},{key:"moveDynamicPointOnHover",value:function(n,s){var c,g,y=this.w,x=this.ttCtx,k=y.globals.pointsArray,M=x.tooltipUtil.getHoverMarkerSize(s),R=y.config.series[s].type;if(!R||"column"!==R&&"candlestick"!==R&&"boxPlot"!==R){c=k[s][n][0],g=k[s][n][1]?k[s][n][1]:0;var j=y.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(s,"'] .apexcharts-series-markers circle"));j&&g<y.globals.gridHeight&&g>0&&(j.setAttribute("r",M),j.setAttribute("cx",c),j.setAttribute("cy",g)),this.moveXCrosshairs(c),x.fixedTooltip||this.moveTooltip(c,g,M)}}},{key:"moveDynamicPointsOnHover",value:function(n){var s,c=this.ttCtx,g=c.w,y=0,x=0,k=g.globals.pointsArray;s=new xn(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var M=c.tooltipUtil.getHoverMarkerSize(s);k[s]&&(y=k[s][n][0],x=k[s][n][1]);var R=c.tooltipUtil.getAllMarkers();if(null!==R)for(var j=0;j<g.globals.series.length;j++){var U=k[j];if(g.globals.comboCharts&&void 0===U&&R.splice(j,0,null),U&&U.length){var X=k[j][n][1];R[j].setAttribute("cx",y),"rangeArea"!==g.config.chart.type||g.globals.comboCharts||(X-=Math.abs(X-k[j][n+g.globals.series[j].length][1])/2),null!==X&&!isNaN(X)&&X<g.globals.gridHeight+M&&X+M>0?(R[j]&&R[j].setAttribute("r",M),R[j]&&R[j].setAttribute("cy",X)):R[j]&&R[j].setAttribute("r",0)}}this.moveXCrosshairs(y),c.fixedTooltip||this.moveTooltip(y,x||g.globals.gridHeight,M)}},{key:"moveStickyTooltipOverBars",value:function(n,s){var c=this.w,g=this.ttCtx,y=c.globals.columnSeries?c.globals.columnSeries.length:c.globals.series.length,x=y>=2&&y%2==0?Math.floor(y/2):Math.floor(y/2)+1;c.globals.isBarHorizontal&&(x=new xn(this.ctx).getActiveConfigSeriesIndex("desc")+1);var k=c.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(x,"'] path[j='").concat(n,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(n,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(n,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(n,"']"));k||"number"!=typeof s||(k=c.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(s,"'] path[j='").concat(n,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(s,"'] path[j='").concat(n,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(s,"'] path[j='").concat(n,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(s,"'] path[j='").concat(n,"']")));var M=k?parseFloat(k.getAttribute("cx")):0,R=k?parseFloat(k.getAttribute("cy")):0,j=k?parseFloat(k.getAttribute("barWidth")):0,U=g.getElGrid().getBoundingClientRect(),X=k&&(k.classList.contains("apexcharts-candlestick-area")||k.classList.contains("apexcharts-boxPlot-area"));c.globals.isXNumeric?(k&&!X&&(M-=y%2!=0?j/2:0),k&&X&&c.globals.comboCharts&&(M-=j/2)):c.globals.isBarHorizontal||(M=g.xAxisTicksPositions[n-1]+g.dataPointsDividedWidth/2,isNaN(M)&&(M=g.xAxisTicksPositions[n]-g.dataPointsDividedWidth/2)),c.globals.isBarHorizontal?R-=g.tooltipRect.ttHeight:c.config.tooltip.followCursor?R=g.e.clientY-U.top-g.tooltipRect.ttHeight/2:R+g.tooltipRect.ttHeight+15>c.globals.gridHeight&&(R=c.globals.gridHeight),c.globals.isBarHorizontal||this.moveXCrosshairs(M),g.fixedTooltip||this.moveTooltip(M,R||c.globals.gridHeight)}}]),ue}(),Yr=function(){function ue(n){Y(this,ue),this.w=n.w,this.ttCtx=n,this.ctx=n.ctx,this.tooltipPosition=new vr(n)}return ke(ue,[{key:"drawDynamicPoints",value:function(){var n=this.w,s=new rt(this.ctx),c=new qi(this.ctx),g=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series");g=it(g),n.config.chart.stacked&&g.sort(function(U,X){return parseFloat(U.getAttribute("data:realIndex"))-parseFloat(X.getAttribute("data:realIndex"))});for(var y=0;y<g.length;y++){var x=g[y].querySelector(".apexcharts-series-markers-wrap");if(null!==x){var k=void 0,M="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==n.config.chart.type&&"area"!==n.config.chart.type||n.globals.comboCharts||n.config.tooltip.intersect||(M+=" no-pointer-events");var R=c.getMarkerConfig({cssClass:M,seriesIndex:Number(x.getAttribute("data:realIndex"))});(k=s.drawMarker(0,0,R)).node.setAttribute("default-marker-size",0);var j=document.createElementNS(n.globals.SVGNS,"g");j.classList.add("apexcharts-series-markers"),j.appendChild(k.node),x.appendChild(j)}}}},{key:"enlargeCurrentPoint",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,y=this.w;"bubble"!==y.config.chart.type&&this.newPointSize(n,s);var x=s.getAttribute("cx"),k=s.getAttribute("cy");if(null!==c&&null!==g&&(x=c,k=g),this.tooltipPosition.moveXCrosshairs(x),!this.fixedTooltip){if("radar"===y.config.chart.type){var M=this.ttCtx.getElGrid().getBoundingClientRect();x=this.ttCtx.e.clientX-M.left}this.tooltipPosition.moveTooltip(x,k,y.config.markers.hover.size)}}},{key:"enlargePoints",value:function(n){for(var s=this.w,c=this,g=this.ttCtx,y=n,x=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),k=s.config.markers.hover.size,M=0;M<x.length;M++){var R=x[M].getAttribute("rel"),j=x[M].getAttribute("index");if(void 0===k&&(k=s.globals.markers.size[j]+s.config.markers.hover.sizeOffset),y===parseInt(R,10)){c.newPointSize(y,x[M]);var U=x[M].getAttribute("cx"),X=x[M].getAttribute("cy");c.tooltipPosition.moveXCrosshairs(U),g.fixedTooltip||c.tooltipPosition.moveTooltip(U,X,k)}else c.oldPointSize(x[M])}}},{key:"newPointSize",value:function(n,s){var c=this.w,g=c.config.markers.hover.size,y=0===n?s.parentNode.firstChild:s.parentNode.lastChild;if("0"!==y.getAttribute("default-marker-size")){var x=parseInt(y.getAttribute("index"),10);void 0===g&&(g=c.globals.markers.size[x]+c.config.markers.hover.sizeOffset),g<0&&(g=0),y.setAttribute("r",g)}}},{key:"oldPointSize",value:function(n){var s=parseFloat(n.getAttribute("default-marker-size"));n.setAttribute("r",s)}},{key:"resetPointsSize",value:function(){for(var n=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),s=0;s<n.length;s++){var c=parseFloat(n[s].getAttribute("default-marker-size"));Ve.isNumber(c)&&c>=0?n[s].setAttribute("r",c):n[s].setAttribute("r",0)}}}]),ue}(),xt=function(){function ue(n){Y(this,ue),this.w=n.w;var s=this.w;this.ttCtx=n,this.isVerticalGroupedRangeBar=!s.globals.isBarHorizontal&&"rangeBar"===s.config.chart.type&&s.config.plotOptions.bar.rangeBarGroupRows}return ke(ue,[{key:"getAttr",value:function(n,s){return parseFloat(n.target.getAttribute(s))}},{key:"handleHeatTreeTooltip",value:function(n){var s=n.e,c=n.opt,g=n.x,y=n.y,k=this.ttCtx,M=this.w;if(s.target.classList.contains("apexcharts-".concat(n.type,"-rect"))){var R=this.getAttr(s,"i"),j=this.getAttr(s,"j"),U=this.getAttr(s,"cx"),X=this.getAttr(s,"cy"),ee=this.getAttr(s,"width"),ae=this.getAttr(s,"height");if(k.tooltipLabels.drawSeriesTexts({ttItems:c.ttItems,i:R,j,shared:!1,e:s}),M.globals.capturedSeriesIndex=R,M.globals.capturedDataPointIndex=j,g=U+k.tooltipRect.ttWidth/2+ee,y=X+k.tooltipRect.ttHeight/2-ae/2,k.tooltipPosition.moveXCrosshairs(U+ee/2),g>M.globals.gridWidth/2&&(g=U-k.tooltipRect.ttWidth/2+ee),k.w.config.tooltip.followCursor){var de=M.globals.dom.elWrap.getBoundingClientRect();g=M.globals.clientX-de.left-(g>M.globals.gridWidth/2?k.tooltipRect.ttWidth:0),y=M.globals.clientY-de.top-(y>M.globals.gridHeight/2?k.tooltipRect.ttHeight:0)}}return{x:g,y}}},{key:"handleMarkerTooltip",value:function(n){var s,c,g=n.e,y=n.opt,x=n.x,k=n.y,M=this.w,R=this.ttCtx;if(g.target.classList.contains("apexcharts-marker")){var j=parseInt(y.paths.getAttribute("cx"),10),U=parseInt(y.paths.getAttribute("cy"),10),X=parseFloat(y.paths.getAttribute("val"));if(c=parseInt(y.paths.getAttribute("rel"),10),s=parseInt(y.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,R.intersect){var ee=Ve.findAncestor(y.paths,"apexcharts-series");ee&&(s=parseInt(ee.getAttribute("data:realIndex"),10))}if(R.tooltipLabels.drawSeriesTexts({ttItems:y.ttItems,i:s,j:c,shared:!R.showOnIntersect&&M.config.tooltip.shared,e:g}),"mouseup"===g.type&&R.markerClick(g,s,c),M.globals.capturedSeriesIndex=s,M.globals.capturedDataPointIndex=c,x=j,k=U+M.globals.translateY-1.4*R.tooltipRect.ttHeight,R.w.config.tooltip.followCursor){var ae=R.getElGrid().getBoundingClientRect();k=R.e.clientY+M.globals.translateY-ae.top}X<0&&(k=U),R.marker.enlargeCurrentPoint(c,y.paths,x,k)}return{x,y:k}}},{key:"handleBarTooltip",value:function(n){var s,c,g=n.e,y=n.opt,x=this.w,k=this.ttCtx,M=k.getElTooltip(),R=0,j=0,U=0,X=this.getBarTooltipXY({e:g,opt:y}),ee=X.barHeight,ae=X.j;x.globals.capturedSeriesIndex=s=X.i,x.globals.capturedDataPointIndex=ae,x.globals.isBarHorizontal&&k.tooltipUtil.hasBars()||!x.config.tooltip.shared?(j=X.x,U=X.y,c=Array.isArray(x.config.stroke.width)?x.config.stroke.width[s]:x.config.stroke.width,R=j):x.globals.comboCharts||x.config.tooltip.shared||(R/=2),isNaN(U)&&(U=x.globals.svgHeight-k.tooltipRect.ttHeight);var de=parseInt(y.paths.parentNode.getAttribute("data:realIndex"),10),ve=x.globals.isMultipleYAxis?x.config.yaxis[de]&&x.config.yaxis[de].reversed:x.config.yaxis[0].reversed;if(j+k.tooltipRect.ttWidth>x.globals.gridWidth&&!ve?j-=k.tooltipRect.ttWidth:j<0&&(j=0),k.w.config.tooltip.followCursor){var he=k.getElGrid().getBoundingClientRect();U=k.e.clientY-he.top}null===k.tooltip&&(k.tooltip=x.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),x.config.tooltip.shared||k.tooltipPosition.moveXCrosshairs(x.globals.comboBarCount>0?R+c/2:R),!k.fixedTooltip&&(!x.config.tooltip.shared||x.globals.isBarHorizontal&&k.tooltipUtil.hasBars())&&(ve&&(j-=k.tooltipRect.ttWidth)<0&&(j=0),!ve||x.globals.isBarHorizontal&&k.tooltipUtil.hasBars()||(U=U+ee-2*(x.globals.series[s][ae]<0?ee:0)),U=U+x.globals.translateY-k.tooltipRect.ttHeight/2,M.style.left=j+x.globals.translateX+"px",M.style.top=U+"px")}},{key:"getBarTooltipXY",value:function(n){var s=this,c=n.e,g=n.opt,y=this.w,x=null,k=this.ttCtx,M=0,R=0,j=0,U=0,X=0,ee=c.target.classList;if(ee.contains("apexcharts-bar-area")||ee.contains("apexcharts-candlestick-area")||ee.contains("apexcharts-boxPlot-area")||ee.contains("apexcharts-rangebar-area")){var ae=c.target,de=ae.getBoundingClientRect(),ve=g.elGrid.getBoundingClientRect(),he=de.height;X=de.height;var be=de.width,F=parseInt(ae.getAttribute("cx"),10),K=parseInt(ae.getAttribute("cy"),10);U=parseFloat(ae.getAttribute("barWidth"));var ce="touchmove"===c.type?c.touches[0].clientX:c.clientX;x=parseInt(ae.getAttribute("j"),10),M=parseInt(ae.parentNode.getAttribute("rel"),10)-1;var _e=ae.getAttribute("data-range-y1"),Me=ae.getAttribute("data-range-y2");y.globals.comboCharts&&(M=parseInt(ae.parentNode.getAttribute("data:realIndex"),10));var $e=function(kt){return y.globals.isXNumeric?F-be/2:s.isVerticalGroupedRangeBar?F+be/2:F-k.dataPointsDividedWidth+be/2},wt=function(){return K-k.dataPointsDividedHeight+he/2-k.tooltipRect.ttHeight/2};k.tooltipLabels.drawSeriesTexts({ttItems:g.ttItems,i:M,j:x,y1:_e?parseInt(_e,10):null,y2:Me?parseInt(Me,10):null,shared:!k.showOnIntersect&&y.config.tooltip.shared,e:c}),y.config.tooltip.followCursor?y.globals.isBarHorizontal?(R=ce-ve.left+15,j=wt()):(R=$e(),j=c.clientY-ve.top-k.tooltipRect.ttHeight/2-15):y.globals.isBarHorizontal?((R=F)<k.xyRatios.baseLineInvertedY&&(R=F-k.tooltipRect.ttWidth),j=wt()):(R=$e(),j=K)}return{x:R,y:j,barHeight:X,barWidth:U,i:M,j:x}}}]),ue}(),De=function(){function ue(n){Y(this,ue),this.w=n.w,this.ttCtx=n}return ke(ue,[{key:"drawXaxisTooltip",value:function(){var n=this.w,s=this.ttCtx,c="bottom"===n.config.xaxis.position;s.xaxisOffY=c?n.globals.gridHeight+1:-n.globals.xAxisHeight-n.config.xaxis.axisTicks.height+3;var g=c?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",y=n.globals.dom.elWrap;s.isXAxisTooltipEnabled&&null===n.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(s.xaxisTooltip=document.createElement("div"),s.xaxisTooltip.setAttribute("class",g+" apexcharts-theme-"+n.config.tooltip.theme),y.appendChild(s.xaxisTooltip),s.xaxisTooltipText=document.createElement("div"),s.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),s.xaxisTooltipText.style.fontFamily=n.config.xaxis.tooltip.style.fontFamily||n.config.chart.fontFamily,s.xaxisTooltipText.style.fontSize=n.config.xaxis.tooltip.style.fontSize,s.xaxisTooltip.appendChild(s.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var n=this.w,s=this.ttCtx,c=0;c<n.config.yaxis.length;c++){var g=n.config.yaxis[c].opposite||n.config.yaxis[c].crosshairs.opposite;s.yaxisOffX=g?n.globals.gridWidth+1:1;var y="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(c,g?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),x=n.globals.dom.elWrap;null===n.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(c))&&(s.yaxisTooltip=document.createElement("div"),s.yaxisTooltip.setAttribute("class",y+" apexcharts-theme-"+n.config.tooltip.theme),x.appendChild(s.yaxisTooltip),0===c&&(s.yaxisTooltipText=[]),s.yaxisTooltipText[c]=document.createElement("div"),s.yaxisTooltipText[c].classList.add("apexcharts-yaxistooltip-text"),s.yaxisTooltip.appendChild(s.yaxisTooltipText[c]))}}},{key:"setXCrosshairWidth",value:function(){var n=this.w,s=this.ttCtx,c=s.getElXCrosshairs();if(s.xcrosshairsWidth=parseInt(n.config.xaxis.crosshairs.width,10),n.globals.comboCharts){var g=n.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==g&&"barWidth"===n.config.xaxis.crosshairs.width){var y=parseFloat(g.getAttribute("barWidth"));s.xcrosshairsWidth=y}else"tickWidth"===n.config.xaxis.crosshairs.width&&(s.xcrosshairsWidth=n.globals.gridWidth/n.globals.labels.length)}else if("tickWidth"===n.config.xaxis.crosshairs.width)s.xcrosshairsWidth=n.globals.gridWidth/n.globals.labels.length;else if("barWidth"===n.config.xaxis.crosshairs.width){var M=n.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==M){var R=parseFloat(M.getAttribute("barWidth"));s.xcrosshairsWidth=R}else s.xcrosshairsWidth=1}n.globals.isBarHorizontal&&(s.xcrosshairsWidth=0),null!==c&&s.xcrosshairsWidth>0&&c.setAttribute("width",s.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var n=this.w,s=this.ttCtx;s.ycrosshairs=n.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),s.ycrosshairsHidden=n.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(n,s,c){var g=this.ttCtx,y=this.w,x=y.globals.yLabelFormatters[n];if(g.yaxisTooltips[n]){var k=g.getElGrid().getBoundingClientRect(),j=y.globals.minYArr[n]+(y.globals.maxYArr[n]-y.globals.minYArr[n]-(s-k.top)*c.yRatio[n]);g.tooltipPosition.moveYCrosshairs(s-k.top),g.yaxisTooltipText[n].innerHTML=x(j),g.tooltipPosition.moveYAxisTooltip(n)}}}]),ue}(),ze=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w;var s=this.w;this.tConfig=s.config.tooltip,this.tooltipUtil=new fr(this),this.tooltipLabels=new sr(this),this.tooltipPosition=new vr(this),this.marker=new Yr(this),this.intersect=new xt(this),this.axesTooltip=new De(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!s.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return ke(ue,[{key:"getElTooltip",value:function(n){return n||(n=this),n.w.globals.dom.baseEl?n.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(n){var s=this.w;this.xyRatios=n,this.isXAxisTooltipEnabled=s.config.xaxis.tooltip.enabled&&s.globals.axisCharts,this.yaxisTooltips=s.config.yaxis.map(function(x,k){return!!(x.show&&x.tooltip.enabled&&s.globals.axisCharts)}),this.allTooltipSeriesGroups=[],s.globals.axisCharts||(this.showTooltipTitle=!1);var c=document.createElement("div");if(c.classList.add("apexcharts-tooltip"),s.config.tooltip.cssClass&&c.classList.add(s.config.tooltip.cssClass),c.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),s.globals.dom.elWrap.appendChild(c),s.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var g=new qn(this.ctx);this.xAxisTicksPositions=g.getXAxisTicksPositions()}if(!s.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==s.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==s.config.markers.size&&0!==s.globals.markers.largestSize||this.marker.drawDynamicPoints(this),s.globals.collapsedSeries.length!==s.globals.series.length){this.dataPointsDividedHeight=s.globals.gridHeight/s.globals.dataPoints,this.dataPointsDividedWidth=s.globals.gridWidth/s.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||s.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,c.appendChild(this.tooltipTitle));var y=s.globals.series.length;(s.globals.xyCharts||s.globals.comboCharts)&&this.tConfig.shared&&(y=this.showOnIntersect?1:s.globals.series.length),this.legendLabels=s.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(y),this.addSVGEvents()}}},{key:"createTTElements",value:function(n){for(var s=this,c=this.w,g=[],y=this.getElTooltip(),x=function(M){var R=document.createElement("div");R.classList.add("apexcharts-tooltip-series-group"),R.style.order=c.config.tooltip.inverseOrder?n-M:M+1,s.tConfig.shared&&s.tConfig.enabledOnSeries&&Array.isArray(s.tConfig.enabledOnSeries)&&s.tConfig.enabledOnSeries.indexOf(M)<0&&R.classList.add("apexcharts-tooltip-series-group-hidden");var j=document.createElement("span");j.classList.add("apexcharts-tooltip-marker"),j.style.backgroundColor=c.globals.colors[M],R.appendChild(j);var U=document.createElement("div");U.classList.add("apexcharts-tooltip-text"),U.style.fontFamily=s.tConfig.style.fontFamily||c.config.chart.fontFamily,U.style.fontSize=s.tConfig.style.fontSize,["y","goals","z"].forEach(function(X){var ee=document.createElement("div");ee.classList.add("apexcharts-tooltip-".concat(X,"-group"));var ae=document.createElement("span");ae.classList.add("apexcharts-tooltip-text-".concat(X,"-label")),ee.appendChild(ae);var de=document.createElement("span");de.classList.add("apexcharts-tooltip-text-".concat(X,"-value")),ee.appendChild(de),U.appendChild(ee)}),R.appendChild(U),y.appendChild(R),g.push(R)},k=0;k<n;k++)x(k);return g}},{key:"addSVGEvents",value:function(){var n=this.w,s=n.config.chart.type,c=this.getElTooltip(),g=!("bar"!==s&&"candlestick"!==s&&"boxPlot"!==s&&"rangeBar"!==s),y="area"===s||"line"===s||"scatter"===s||"bubble"===s||"radar"===s,x=n.globals.dom.Paper.node,k=this.getElGrid();k&&(this.seriesBound=k.getBoundingClientRect());var M,R=[],j=[],U={hoverArea:x,elGrid:k,tooltipEl:c,tooltipY:R,tooltipX:j,ttItems:this.ttItems};if(n.globals.axisCharts&&(y?M=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):g?M=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==s&&"treemap"!==s||(M=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),M&&M.length))for(var X=0;X<M.length;X++)R.push(M[X].getAttribute("cy")),j.push(M[X].getAttribute("cx"));if(n.globals.xyCharts&&!this.showOnIntersect||n.globals.comboCharts&&!this.showOnIntersect||g&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([x],U);else if(g&&!n.globals.comboCharts||y&&this.showOnIntersect)this.addDatapointEventsListeners(U);else if(!n.globals.axisCharts||"heatmap"===s||"treemap"===s){var ee=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(ee,U)}if(this.showOnIntersect){var ae=n.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");ae.length>0&&this.addPathsEventListeners(ae,U),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(U)}}},{key:"drawFixedTooltipRect",value:function(){var n=this.w,s=this.getElTooltip(),c=s.getBoundingClientRect(),g=c.width+10,y=c.height+10,x=this.tConfig.fixed.offsetX,k=this.tConfig.fixed.offsetY,M=this.tConfig.fixed.position.toLowerCase();return M.indexOf("right")>-1&&(x=x+n.globals.svgWidth-g+10),M.indexOf("bottom")>-1&&(k=k+n.globals.svgHeight-y-10),s.style.left=x+"px",s.style.top=k+"px",{x,y:k,ttWidth:g,ttHeight:y}}},{key:"addDatapointEventsListeners",value:function(n){var s=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(s,n)}},{key:"addPathsEventListeners",value:function(n,s){for(var c=this,g=function(x){var k={paths:n[x],tooltipEl:s.tooltipEl,tooltipY:s.tooltipY,tooltipX:s.tooltipX,elGrid:s.elGrid,hoverArea:s.hoverArea,ttItems:s.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(M){return n[x].addEventListener(M,c.onSeriesHover.bind(c,k),{capture:!1,passive:!0})})},y=0;y<n.length;y++)g(y)}},{key:"onSeriesHover",value:function(n,s){var c=this,g=Date.now()-this.lastHoverTime;g>=100?this.seriesHover(n,s):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){c.seriesHover(n,s)},100-g))}},{key:"seriesHover",value:function(n,s){var c=this;this.lastHoverTime=Date.now();var g=[],y=this.w;y.config.chart.group&&(g=this.ctx.getGroupedCharts()),y.globals.axisCharts&&(y.globals.minX===-1/0&&y.globals.maxX===1/0||0===y.globals.dataPoints)||(g.length?g.forEach(function(x){var k=c.getElTooltip(x);x.w.globals.minX===c.w.globals.minX&&x.w.globals.maxX===c.w.globals.maxX&&x.w.globals.tooltip.seriesHoverByContext({chartCtx:x,ttCtx:x.w.globals.tooltip,opt:{paths:n.paths,tooltipEl:k,tooltipY:n.tooltipY,tooltipX:n.tooltipX,elGrid:n.elGrid,hoverArea:n.hoverArea,ttItems:x.w.globals.tooltip.ttItems},e:s})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:n,e:s}))}},{key:"seriesHoverByContext",value:function(n){var s=n.chartCtx,c=n.ttCtx,g=n.opt,y=n.e,x=s.w,k=this.getElTooltip();k&&(c.tooltipRect={x:0,y:0,ttWidth:k.getBoundingClientRect().width,ttHeight:k.getBoundingClientRect().height},c.e=y,c.tooltipUtil.hasBars()&&!x.globals.comboCharts&&!c.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new xn(s).toggleSeriesOnHover(y,y.target.parentNode),c.fixedTooltip&&c.drawFixedTooltipRect(),x.globals.axisCharts?c.axisChartsTooltips({e:y,opt:g,tooltipRect:c.tooltipRect}):c.nonAxisChartsTooltips({e:y,opt:g,tooltipRect:c.tooltipRect}))}},{key:"axisChartsTooltips",value:function(n){var s,c,g=n.e,y=n.opt,x=this.w,k=y.elGrid.getBoundingClientRect(),M="touchmove"===g.type?g.touches[0].clientX:g.clientX,R="touchmove"===g.type?g.touches[0].clientY:g.clientY;if(this.clientY=R,this.clientX=M,x.globals.capturedSeriesIndex=-1,x.globals.capturedDataPointIndex=-1,R<k.top||R>k.top+k.height)this.handleMouseOut(y);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!x.config.tooltip.shared){var j=parseInt(y.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(j)<0)return void this.handleMouseOut(y)}var U=this.getElTooltip(),X=this.getElXCrosshairs(),ee=x.globals.xyCharts||"bar"===x.config.chart.type&&!x.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||x.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===g.type||"touchmove"===g.type||"mouseup"===g.type){if(x.globals.collapsedSeries.length+x.globals.ancillaryCollapsedSeries.length===x.globals.series.length)return;null!==X&&X.classList.add("apexcharts-active");var ae=this.yaxisTooltips.filter(function(he){return!0===he});if(null!==this.ycrosshairs&&ae.length&&this.ycrosshairs.classList.add("apexcharts-active"),ee&&!this.showOnIntersect)this.handleStickyTooltip(g,M,R,y);else if("heatmap"===x.config.chart.type||"treemap"===x.config.chart.type){var de=this.intersect.handleHeatTreeTooltip({e:g,opt:y,x:s,y:c,type:x.config.chart.type});c=de.y,U.style.left=(s=de.x)+"px",U.style.top=c+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:g,opt:y}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:g,opt:y,x:s,y:c});if(this.yaxisTooltips.length)for(var ve=0;ve<x.config.yaxis.length;ve++)this.axesTooltip.drawYaxisTooltipText(ve,R,this.xyRatios);y.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==g.type&&"touchend"!==g.type||this.handleMouseOut(y)}}},{key:"nonAxisChartsTooltips",value:function(n){var s=n.e,c=n.opt,g=n.tooltipRect,y=this.w,x=c.paths.getAttribute("rel"),k=this.getElTooltip(),M=y.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===s.type||"touchmove"===s.type){k.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:c.ttItems,i:parseInt(x,10)-1,shared:!1});var j=y.globals.clientY-M.top-g.ttHeight-10;if(k.style.left=y.globals.clientX-M.left-g.ttWidth/2+"px",k.style.top=j+"px",y.config.legend.tooltipHoverFormatter){var U=x-1,X=(0,y.config.legend.tooltipHoverFormatter)(this.legendLabels[U].getAttribute("data:default-text"),{seriesIndex:U,dataPointIndex:U,w:y});this.legendLabels[U].innerHTML=X}}else"mouseout"!==s.type&&"touchend"!==s.type||(k.classList.remove("apexcharts-active"),y.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(ee){var ae=ee.getAttribute("data:default-text");ee.innerHTML=decodeURIComponent(ae)}))}},{key:"handleStickyTooltip",value:function(n,s,c,g){var y=this.w,x=this.tooltipUtil.getNearestValues({context:this,hoverArea:g.hoverArea,elGrid:g.elGrid,clientX:s,clientY:c}),k=x.j,M=x.capturedSeries;y.globals.collapsedSeriesIndices.includes(M)&&(M=null);var R=g.elGrid.getBoundingClientRect();if(x.hoverX<0||x.hoverX>R.width)this.handleMouseOut(g);else if(null!==M)this.handleStickyCapturedSeries(n,M,g,k);else if(this.tooltipUtil.isXoverlap(k)||y.globals.isBarHorizontal){var j=y.globals.series.findIndex(function(U,X){return!y.globals.collapsedSeriesIndices.includes(X)});this.create(n,this,j,k,g.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(n,s,c,g){var y=this.w;if(this.tConfig.shared||null!==y.globals.series[s][g]){if(void 0!==y.globals.series[s][g])this.tConfig.shared&&this.tooltipUtil.isXoverlap(g)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(n,this,s,g,c.ttItems):this.create(n,this,s,g,c.ttItems,!1);else if(this.tooltipUtil.isXoverlap(g)){var x=y.globals.series.findIndex(function(k,M){return!y.globals.collapsedSeriesIndices.includes(M)});this.create(n,this,x,g,c.ttItems)}}else this.handleMouseOut(c)}},{key:"deactivateHoverFilter",value:function(){for(var n=this.w,s=new rt(this.ctx),c=n.globals.dom.Paper.select(".apexcharts-bar-area"),g=0;g<c.length;g++)s.pathMouseLeave(c[g])}},{key:"handleMouseOut",value:function(n){var s=this.w,c=this.getElXCrosshairs();if(n.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==s.config.chart.type&&this.marker.resetPointsSize(),null!==c&&c.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var g=0;g<this.yaxisTTEls.length;g++)this.yaxisTTEls[g].classList.remove("apexcharts-active")}s.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(y){var x=y.getAttribute("data:default-text");y.innerHTML=decodeURIComponent(x)})}},{key:"markerClick",value:function(n,s,c){var g=this.w;"function"==typeof g.config.chart.events.markerClick&&g.config.chart.events.markerClick(n,this.ctx,{seriesIndex:s,dataPointIndex:c,w:g}),this.ctx.events.fireEvent("markerClick",[n,this.ctx,{seriesIndex:s,dataPointIndex:c,w:g}])}},{key:"create",value:function(n,s,c,g,y){var x,k,M,R,j,U,X,ee,ae,de,ve,he,be,F,K,ce,_e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,Me=this.w,$e=s;"mouseup"===n.type&&this.markerClick(n,c,g),null===_e&&(_e=this.tConfig.shared);var wt=this.tooltipUtil.hasMarkers(c),kt=this.tooltipUtil.getElBars();if(Me.config.legend.tooltipHoverFormatter){var Wt=Me.config.legend.tooltipHoverFormatter,hi=Array.from(this.legendLabels);hi.forEach(function(Rr){var yr=Rr.getAttribute("data:default-text");Rr.innerHTML=decodeURIComponent(yr)});for(var yi=0;yi<hi.length;yi++){var rn=hi[yi],gn=parseInt(rn.getAttribute("i"),10),An=decodeURIComponent(rn.getAttribute("data:default-text")),$n=Wt(An,{seriesIndex:_e?gn:c,dataPointIndex:g,w:Me});if(_e)rn.innerHTML=Me.globals.collapsedSeriesIndices.indexOf(gn)<0?$n:An;else if(rn.innerHTML=gn===c?$n:An,c===gn)break}}var Jn=Re(Re({ttItems:y,i:c,j:g},void 0!==(null===(x=Me.globals.seriesRange)||void 0===x||null===(k=x[c])||void 0===k||null===(M=k[g])||void 0===M||null===(R=M.y[0])||void 0===R?void 0:R.y1)&&{y1:null===(j=Me.globals.seriesRange)||void 0===j||null===(U=j[c])||void 0===U||null===(X=U[g])||void 0===X||null===(ee=X.y[0])||void 0===ee?void 0:ee.y1}),void 0!==(null===(ae=Me.globals.seriesRange)||void 0===ae||null===(de=ae[c])||void 0===de||null===(ve=de[g])||void 0===ve||null===(he=ve.y[0])||void 0===he?void 0:he.y2)&&{y2:null===(be=Me.globals.seriesRange)||void 0===be||null===(F=be[c])||void 0===F||null===(K=F[g])||void 0===K||null===(ce=K.y[0])||void 0===ce?void 0:ce.y2});if(_e){if($e.tooltipLabels.drawSeriesTexts(Re(Re({},Jn),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),wt)Me.globals.markers.largestSize>0?$e.marker.enlargePoints(g):$e.tooltipPosition.moveDynamicPointsOnHover(g);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(kt),this.barSeriesHeight>0)){var Qn=new rt(this.ctx),wr=Me.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(g,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(g,c);for(var Pr=0;Pr<wr.length;Pr++)Qn.pathMouseEnter(wr[Pr])}}else $e.tooltipLabels.drawSeriesTexts(Re({shared:!1},Jn)),this.tooltipUtil.hasBars()&&$e.tooltipPosition.moveStickyTooltipOverBars(g,c),wt&&$e.tooltipPosition.moveMarkers(c,g)}}]),ue}(),at=function(){function ue(n){Y(this,ue),this.w=n.w,this.barCtx=n,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return ke(ue,[{key:"handleBarDataLabels",value:function(n){var s=n.x,c=n.y,g=n.y1,y=n.y2,x=n.i,k=n.j,M=n.realIndex,R=n.groupIndex,j=n.series,U=n.barHeight,X=n.barWidth,ee=n.barXPosition,ae=n.barYPosition,de=n.visibleSeries,ve=n.renderedPath,he=this.w,be=new rt(this.barCtx.ctx),F=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[M]:this.barCtx.strokeWidth,K=s+parseFloat(X*de),ce=c+parseFloat(U*de);he.globals.isXNumeric&&!he.globals.isBarHorizontal&&(K=s+parseFloat(X*(de+1)),ce=c+parseFloat(U*(de+1))-F);var _e,kt,Me=null,$e=s,wt=c,Wt=he.config.dataLabels,hi=this.barCtx.barOptions.dataLabels,yi=this.barCtx.barOptions.dataLabels.total;void 0!==ae&&this.barCtx.isRangeBar&&(ce=ae,wt=ae),void 0!==ee&&this.barCtx.isVerticalGroupedRangeBar&&(K=ee,$e=ee);var rn=Wt.offsetX,gn=Wt.offsetY,An={width:0,height:0};he.config.dataLabels.enabled&&(An=be.getTextRects(he.globals.yLabelFormatters[0](this.barCtx.series[x][k]),parseFloat(Wt.style.fontSize)));var Jn={x:s,y:c,i:x,j:k,realIndex:M,groupIndex:R||-1,renderedPath:ve,bcx:K,bcy:ce,barHeight:U,barWidth:X,textRects:An,strokeWidth:F,dataLabelsX:$e,dataLabelsY:wt,dataLabelsConfig:Wt,barDataLabelsConfig:hi,barTotalDataLabelsConfig:yi,offX:rn,offY:gn};return kt=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(Jn):this.calculateColumnsDataLabelsPosition(Jn),ve.attr({cy:kt.bcy,cx:kt.bcx,j:k,val:j[x][k],barHeight:U,barWidth:X}),_e=this.drawCalculatedDataLabels({x:kt.dataLabelsX,y:kt.dataLabelsY,val:this.barCtx.isRangeBar?[g,y]:j[x][k],i:M,j:k,barWidth:X,barHeight:U,textRects:An,dataLabelsConfig:Wt}),he.config.chart.stacked&&yi.enabled&&(Me=this.drawTotalDataLabels({x:kt.totalDataLabelsX,y:kt.totalDataLabelsY,barWidth:X,barHeight:U,realIndex:M,textAnchor:kt.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:M,j:k}),dataLabelsConfig:Wt,barTotalDataLabelsConfig:yi})),{dataLabels:_e,totalDataLabels:Me}}},{key:"getStackedTotalDataLabel",value:function(n){var s=n.realIndex,c=n.j,g=this.w,y=this.barCtx.stackedSeriesTotals[c];return this.totalFormatter&&(y=this.totalFormatter(y,Re(Re({},g),{},{seriesIndex:s,dataPointIndex:c,w:g}))),y}},{key:"calculateColumnsDataLabelsPosition",value:function(n){var s,c,g=this.w,y=n.i,x=n.j,k=n.realIndex,M=n.groupIndex,R=n.y,j=n.bcx,U=n.barWidth,X=n.barHeight,ee=n.textRects,ae=n.dataLabelsX,de=n.dataLabelsY,ve=n.dataLabelsConfig,he=n.barDataLabelsConfig,be=n.barTotalDataLabelsConfig,F=n.strokeWidth,K=n.offX,ce=n.offY;X=Math.abs(X);var _e="vertical"===g.config.plotOptions.bar.dataLabels.orientation,Me=this.barCtx.barHelpers.getZeroValueEncounters({i:y,j:x}).zeroEncounters;j=j-F/2+(-1!==M?M*U:0),this.barCtx.isVerticalGroupedRangeBar?ae+=U/2:(ae=g.globals.isXNumeric?j-U/2+K:j-g.globals.gridWidth/g.globals.dataPoints+U/2+K,Me>0&&g.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(ae-=U*Me)),_e&&(ae=ae+ee.height/2-F/2-2);var wt=this.barCtx.series[y][x]<0,kt=R;switch(this.barCtx.isReversed&&(kt=R-X+(wt?2*X:0),R-=X),he.position){case"center":de=_e?wt?kt-X/2+ce:kt+X/2-ce:wt?kt-X/2+ee.height/2+ce:kt+X/2+ee.height/2-ce;break;case"bottom":de=_e?wt?kt-X+ce:kt+X-ce:wt?kt-X+ee.height+F+ce:kt+X-ee.height/2+F-ce;break;case"top":de=_e?wt?kt+ce:kt-ce:wt?kt-ee.height/2-ce:kt+ee.height+ce}if(this.barCtx.lastActiveBarSerieIndex===k&&be.enabled){var Wt=new rt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:k,j:x}),ve.fontSize);s=wt?kt-Wt.height/2-ce-be.offsetY+18:kt+Wt.height+ce+be.offsetY-18,c=ae+be.offsetX}return g.config.chart.stacked||(de<0?de=0+F:de+ee.height/3>g.globals.gridHeight&&(de=g.globals.gridHeight-F)),{bcx:j,bcy:R,dataLabelsX:ae,dataLabelsY:de,totalDataLabelsX:c,totalDataLabelsY:s,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(n){var s=this.w,c=n.x,g=n.i,y=n.j,x=n.realIndex,k=n.groupIndex,M=n.bcy,R=n.barHeight,j=n.barWidth,U=n.textRects,X=n.dataLabelsX,ee=n.strokeWidth,ae=n.dataLabelsConfig,de=n.barDataLabelsConfig,ve=n.barTotalDataLabelsConfig,he=n.offX,be=n.offY,F=s.globals.gridHeight/s.globals.dataPoints;j=Math.abs(j);var K,ce,_e=(M+=-1!==k?k*R:0)-(this.barCtx.isRangeBar?0:F)+R/2+U.height/2+be-3,Me="start",$e=this.barCtx.series[g][y]<0,wt=c;switch(this.barCtx.isReversed&&(wt=c+j-($e?2*j:0),c=s.globals.gridWidth-j),de.position){case"center":X=$e?wt+j/2-he:Math.max(U.width/2,wt-j/2)+he;break;case"bottom":X=$e?wt+j-ee-Math.round(U.width/2)-he:wt-j+ee+Math.round(U.width/2)+he;break;case"top":X=$e?wt-ee+Math.round(U.width/2)-he:wt-ee-Math.round(U.width/2)+he}if(this.barCtx.lastActiveBarSerieIndex===x&&ve.enabled){var kt=new rt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:x,j:y}),ae.fontSize);$e?(K=wt-ee+Math.round(kt.width/2)-he-ve.offsetX-15,Me="end"):K=wt-ee-Math.round(kt.width/2)+he+ve.offsetX+15,ce=_e+ve.offsetY}return s.config.chart.stacked||(X<0?X=X+U.width+ee:X+U.width/2>s.globals.gridWidth&&(X=s.globals.gridWidth-U.width-ee)),{bcx:c,bcy:M,dataLabelsX:X,dataLabelsY:_e,totalDataLabelsX:K,totalDataLabelsY:ce,totalDataLabelsAnchor:Me}}},{key:"drawCalculatedDataLabels",value:function(n){var s=n.x,c=n.y,g=n.val,y=n.i,x=n.j,k=n.textRects,M=n.barHeight,R=n.barWidth,j=n.dataLabelsConfig,U=this.w,X="rotate(0)";"vertical"===U.config.plotOptions.bar.dataLabels.orientation&&(X="rotate(-90, ".concat(s,", ").concat(c,")"));var ee=new Rn(this.barCtx.ctx),ae=new rt(this.barCtx.ctx),de=j.formatter,ve=null,he=U.globals.collapsedSeriesIndices.indexOf(y)>-1;if(j.enabled&&!he){ve=ae.group({class:"apexcharts-data-labels",transform:X});var be="";void 0!==g&&(be=de(g,Re(Re({},U),{},{seriesIndex:y,dataPointIndex:x,w:U}))),!g&&U.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(be="");var F=U.globals.series[y][x]<0,K=U.config.plotOptions.bar.dataLabels.position;"vertical"===U.config.plotOptions.bar.dataLabels.orientation&&("top"===K&&(j.textAnchor=F?"end":"start"),"center"===K&&(j.textAnchor="middle"),"bottom"===K&&(j.textAnchor=F?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&R<ae.getTextRects(be,parseFloat(j.style.fontSize)).width&&(be=""),U.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?k.width/1.6>Math.abs(R)&&(be=""):k.height/1.6>Math.abs(M)&&(be=""));var ce=Re({},j);this.barCtx.isHorizontal&&g<0&&("start"===j.textAnchor?ce.textAnchor="end":"end"===j.textAnchor&&(ce.textAnchor="start")),ee.plotDataLabelsText({x:s,y:c,text:be,i:y,j:x,parent:ve,dataLabelsConfig:ce,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return ve}},{key:"drawTotalDataLabels",value:function(n){var s,c=n.x,g=n.y,y=n.val,x=n.barWidth,k=n.barHeight,M=n.realIndex,R=n.textAnchor,j=n.barTotalDataLabelsConfig,U=this.w,X=new rt(this.barCtx.ctx);return j.enabled&&void 0!==c&&void 0!==g&&this.barCtx.lastActiveBarSerieIndex===M&&(s=X.drawText({x:c-(!U.globals.isBarHorizontal&&U.globals.seriesGroups.length?x/U.globals.seriesGroups.length:0),y:g-(U.globals.isBarHorizontal&&U.globals.seriesGroups.length?k/U.globals.seriesGroups.length:0),foreColor:j.style.color,text:y,textAnchor:R,fontFamily:j.style.fontFamily,fontSize:j.style.fontSize,fontWeight:j.style.fontWeight})),s}}]),ue}(),st=function(){function ue(n){Y(this,ue),this.w=n.w,this.barCtx=n}return ke(ue,[{key:"initVariables",value:function(n){var s=this.w;this.barCtx.series=n,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var c=0;c<n.length;c++)if(n[c].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=n[c].length),s.globals.isXNumeric)for(var g=0;g<n[c].length;g++)s.globals.seriesX[c][g]>s.globals.minX&&s.globals.seriesX[c][g]<s.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=s.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],s.globals.comboCharts||this.checkZeroSeries({series:n})}},{key:"initialPositions",value:function(){var n,s,c,g,y,x,k,M,R=this.w,j=R.globals.dataPoints;this.barCtx.isRangeBar&&(j=R.globals.labels.length);var U=this.barCtx.seriesLen;if(R.config.plotOptions.bar.rangeBarGroupRows&&(U=1),this.barCtx.isHorizontal)y=(c=R.globals.gridHeight/j)/U,R.globals.isXNumeric&&(y=(c=R.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),y=y*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(y=parseInt(this.barCtx.barOptions.barHeight,10)),M=this.barCtx.baseLineInvertedY+R.globals.padHorizontal+(this.barCtx.isReversed?R.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(M=R.globals.gridWidth/2),s=(c-y*this.barCtx.seriesLen)/2;else{if(g=R.globals.gridWidth/this.barCtx.visibleItems,R.config.xaxis.convertedCatToNumeric&&(g=R.globals.gridWidth/R.globals.dataPoints),x=g/U*parseInt(this.barCtx.barOptions.columnWidth,10)/100,R.globals.isXNumeric){var X=this.barCtx.xRatio;R.globals.minXDiff&&.5!==R.globals.minXDiff&&R.globals.minXDiff/X>0&&(g=R.globals.minXDiff/X),(x=g/U*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(x=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(x=parseInt(this.barCtx.barOptions.columnWidth,10)),k=R.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?R.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),n=R.globals.padHorizontal+(g-x*this.barCtx.seriesLen)/2}return R.globals.barHeight=y,R.globals.barWidth=x,{x:n,y:s,yDivision:c,xDivision:g,barHeight:y,barWidth:x,zeroH:k,zeroW:M}}},{key:"initializeStackedPrevVars",value:function(n){var s=n.w;s.globals.hasSeriesGroups?s.globals.seriesGroups.forEach(function(c){n[c]||(n[c]={}),n[c].prevY=[],n[c].prevX=[],n[c].prevYF=[],n[c].prevXF=[],n[c].prevYVal=[],n[c].prevXVal=[]}):(n.prevY=[],n.prevX=[],n.prevYF=[],n.prevXF=[],n.prevYVal=[],n.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(n){var s=n.w;s.globals.hasSeriesGroups?s.globals.seriesGroups.forEach(function(c){n[c]||(n[c]={}),n[c].xArrj=[],n[c].xArrjF=[],n[c].xArrjVal=[],n[c].yArrj=[],n[c].yArrjF=[],n[c].yArrjVal=[]}):(n.xArrj=[],n.xArrjF=[],n.xArrjVal=[],n.yArrj=[],n.yArrjF=[],n.yArrjVal=[])}},{key:"getPathFillColor",value:function(n,s,c,g){var y,x,k,M,R=this.w,j=new Di(this.barCtx.ctx),U=null,X=this.barCtx.barOptions.distributed?c:s;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(ee){n[s][c]>=ee.from&&n[s][c]<=ee.to&&(U=ee.color)}),R.config.series[s].data[c]&&R.config.series[s].data[c].fillColor&&(U=R.config.series[s].data[c].fillColor),j.fillPath({seriesNumber:this.barCtx.barOptions.distributed?X:g,dataPointIndex:c,color:U,value:n[s][c],fillConfig:null===(y=R.config.series[s].data[c])||void 0===y?void 0:y.fill,fillType:null!==(x=R.config.series[s].data[c])&&void 0!==x&&null!==(k=x.fill)&&void 0!==k&&k.type?null===(M=R.config.series[s].data[c])||void 0===M?void 0:M.fill.type:Array.isArray(R.config.fill.type)?R.config.fill.type[s]:R.config.fill.type})}},{key:"getStrokeWidth",value:function(n,s,c){var g=0,y=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[n][s],y.config.stroke.show&&(this.barCtx.isNullValue||(g=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[c]:this.barCtx.strokeWidth)),g}},{key:"shouldApplyRadius",value:function(n){var s=this.w,c=!1;return s.config.plotOptions.bar.borderRadius>0&&(s.config.chart.stacked&&"last"===s.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===n&&(c=!0):c=!0),c}},{key:"barBackground",value:function(n){var s=n.j,c=n.i,g=n.x1,y=n.x2,x=n.y1,k=n.y2,M=n.elSeries,R=this.w,j=new rt(this.barCtx.ctx),U=new xn(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&U===c){s>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(s%=this.barCtx.barOptions.colors.backgroundBarColors.length);var ee=j.drawRect(void 0!==g?g:0,void 0!==x?x:0,void 0!==y?y:R.globals.gridWidth,void 0!==k?k:R.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[s],this.barCtx.barOptions.colors.backgroundBarOpacity);M.add(ee),ee.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(n){var s,c=n.barWidth,g=n.barXPosition,y=n.y1,x=n.y2,k=n.strokeWidth,M=n.seriesGroup,R=n.realIndex,j=n.i,U=n.j,X=n.w,ee=new rt(this.barCtx.ctx);(k=Array.isArray(k)?k[R]:k)||(k=0);var ae=c,de=g;null!==(s=X.config.series[R].data[U])&&void 0!==s&&s.columnWidthOffset&&(de=g-X.config.series[R].data[U].columnWidthOffset/2,ae=c+X.config.series[R].data[U].columnWidthOffset);var ve=de,he=de+ae;x+=.001;var be=ee.move(ve,y+=.001),F=ee.move(ve,y),K=ee.line(he-k,y);if(X.globals.previousPaths.length>0&&(F=this.barCtx.getPreviousPath(R,U,!1)),be=be+ee.line(ve,x)+ee.line(he-k,x)+ee.line(he-k,y)+("around"===X.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),F=F+ee.line(ve,y)+K+K+K+K+K+ee.line(ve,y)+("around"===X.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(R)&&(be=ee.roundPathCorners(be,X.config.plotOptions.bar.borderRadius)),X.config.chart.stacked){var ce=this.barCtx;X.globals.hasSeriesGroups&&M&&(ce=this.barCtx[M]),ce.yArrj.push(x),ce.yArrjF.push(Math.abs(y-x)),ce.yArrjVal.push(this.barCtx.series[j][U])}return{pathTo:be,pathFrom:F}}},{key:"getBarpaths",value:function(n){var s,c=n.barYPosition,g=n.barHeight,y=n.x1,x=n.x2,k=n.strokeWidth,M=n.seriesGroup,R=n.realIndex,j=n.i,U=n.j,X=n.w,ee=new rt(this.barCtx.ctx);(k=Array.isArray(k)?k[R]:k)||(k=0);var ae=c,de=g;null!==(s=X.config.series[R].data[U])&&void 0!==s&&s.barHeightOffset&&(ae=c-X.config.series[R].data[U].barHeightOffset/2,de=g+X.config.series[R].data[U].barHeightOffset);var ve=ae,he=ae+de;x+=.001;var be=ee.move(y+=.001,ve),F=ee.move(y,ve);X.globals.previousPaths.length>0&&(F=this.barCtx.getPreviousPath(R,U,!1));var K=ee.line(y,he-k);if(be=be+ee.line(x,ve)+ee.line(x,he-k)+K+("around"===X.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),F=F+ee.line(y,ve)+K+K+K+K+K+ee.line(y,ve)+("around"===X.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(R)&&(be=ee.roundPathCorners(be,X.config.plotOptions.bar.borderRadius)),X.config.chart.stacked){var ce=this.barCtx;X.globals.hasSeriesGroups&&M&&(ce=this.barCtx[M]),ce.xArrj.push(x),ce.xArrjF.push(Math.abs(y-x)),ce.xArrjVal.push(this.barCtx.series[j][U])}return{pathTo:be,pathFrom:F}}},{key:"checkZeroSeries",value:function(n){for(var s=n.series,c=this.w,g=0;g<s.length;g++){for(var y=0,x=0;x<s[c.globals.maxValsInArrayIndex].length;x++)y+=s[g][x];0===y&&this.barCtx.zeroSerieses.push(g)}}},{key:"getXForValue",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:s;return null!=n&&(c=s+n/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?n/this.barCtx.invertedYRatio:0)),c}},{key:"getYForValue",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:s;return null!=n&&(c=s-n/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?n/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),c}},{key:"getGoalValues",value:function(n,s,c,g,y){var x=this,k=this.w,M=[],R=function(X,ee){var ae;M.push((Ee(ae={},n,"x"===n?x.getXForValue(X,s,!1):x.getYForValue(X,c,!1)),Ee(ae,"attrs",ee),ae))};if(k.globals.seriesGoals[g]&&k.globals.seriesGoals[g][y]&&Array.isArray(k.globals.seriesGoals[g][y])&&k.globals.seriesGoals[g][y].forEach(function(X){R(X.value,X)}),this.barCtx.barOptions.isDumbbell&&k.globals.seriesRange.length){var j=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:k.globals.colors,U={strokeHeight:"x"===n?0:k.globals.markers.size[g],strokeWidth:"x"===n?k.globals.markers.size[g]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(j[g])?j[g][0]:j[g]};R(k.globals.seriesRangeStart[g][y],U),R(k.globals.seriesRangeEnd[g][y],Re(Re({},U),{},{strokeColor:Array.isArray(j[g])?j[g][1]:j[g]}))}return M}},{key:"drawGoalLine",value:function(n){var s=n.barXPosition,c=n.barYPosition,g=n.goalX,y=n.goalY,x=n.barWidth,k=n.barHeight,M=new rt(this.barCtx.ctx),R=M.group({className:"apexcharts-bar-goals-groups"});R.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:R.node}),R.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var j=null;return this.barCtx.isHorizontal?Array.isArray(g)&&g.forEach(function(U){var X=void 0!==U.attrs.strokeHeight?U.attrs.strokeHeight:k/2,ee=c+X+k/2;j=M.drawLine(U.x,ee-2*X,U.x,ee,U.attrs.strokeColor?U.attrs.strokeColor:void 0,U.attrs.strokeDashArray,U.attrs.strokeWidth?U.attrs.strokeWidth:2,U.attrs.strokeLineCap),R.add(j)}):Array.isArray(y)&&y.forEach(function(U){var X=void 0!==U.attrs.strokeWidth?U.attrs.strokeWidth:x/2,ee=s+X+x/2;j=M.drawLine(ee-2*X,U.y,ee,U.y,U.attrs.strokeColor?U.attrs.strokeColor:void 0,U.attrs.strokeDashArray,U.attrs.strokeHeight?U.attrs.strokeHeight:2,U.attrs.strokeLineCap),R.add(j)}),R}},{key:"drawBarShadow",value:function(n){var s=n.prevPaths,c=n.currPaths,g=n.color,y=this.w,x=s.x,k=s.x1,R=c.x,j=c.x1,U=c.barYPosition,X=s.barYPosition+c.barHeight,ee=new rt(this.barCtx.ctx),ae=new Ve,de=ee.move(k,X)+ee.line(x,X)+ee.line(R,U)+ee.line(j,U)+ee.line(k,X)+("around"===y.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return ee.drawPath({d:de,fill:ae.shadeColor(.5,Ve.rgb2hex(g)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(n){var s=n.i,c=n.j,y=0,x=0;return this.w.globals.seriesPercent.forEach(function(k,M){k[c]&&y++,M<s&&0===k[c]&&x++}),{nonZeroColumns:y,zeroEncounters:x}}}]),ue}(),It=function(){function ue(n,s){Y(this,ue),this.ctx=n,this.w=n.w;var c=this.w;this.barOptions=c.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=c.config.stroke.width,this.isNullValue=!1,this.isRangeBar=c.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!c.globals.isBarHorizontal&&c.globals.seriesRange.length&&c.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=s,null!==this.xyRatios&&(this.xRatio=s.xRatio,this.yRatio=s.yRatio,this.invertedXRatio=s.invertedXRatio,this.invertedYRatio=s.invertedYRatio,this.baseLineY=s.baseLineY,this.baseLineInvertedY=s.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var g=new xn(this.ctx);this.lastActiveBarSerieIndex=g.getActiveConfigSeriesIndex("desc",["bar","column"]);var y=g.getBarSeriesIndices(),x=new Kt(this.ctx);this.stackedSeriesTotals=x.getStackedSeriesTotals(this.w.config.series.map(function(k,M){return-1===y.indexOf(M)?M:-1}).filter(function(k){return-1!==k})),this.barHelpers=new st(this)}return ke(ue,[{key:"draw",value:function(n,s){var c=this.w,g=new rt(this.ctx),y=new Kt(this.ctx,c);n=y.getLogSeries(n),this.series=n,this.yRatio=y.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n);var x=g.group({class:"apexcharts-bar-series apexcharts-plot-series"});c.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var k=0,M=0;k<n.length;k++,M++){var R,j,U,X,ee=void 0,ae=void 0,de=[],ve=[],he=c.globals.comboCharts?s[k]:k,be=g.group({class:"apexcharts-series",rel:k+1,seriesName:Ve.escapeString(c.globals.seriesNames[he]),"data:realIndex":he});this.ctx.series.addCollapsedClassToSeries(be,he),n[k].length>0&&(this.visibleI=this.visibleI+1);var F=0,K=0;this.yRatio.length>1&&(this.yaxisIndex=he),this.isReversed=c.config.yaxis[this.yaxisIndex]&&c.config.yaxis[this.yaxisIndex].reversed;var ce=this.barHelpers.initialPositions();ae=ce.y,F=ce.barHeight,j=ce.yDivision,X=ce.zeroW,ee=ce.x,K=ce.barWidth,R=ce.xDivision,U=ce.zeroH,this.horizontal||ve.push(ee+K/2);var _e=g.group({class:"apexcharts-datalabels","data:realIndex":he});c.globals.delayedElements.push({el:_e.node}),_e.node.classList.add("apexcharts-element-hidden");var Me=g.group({class:"apexcharts-bar-goals-markers"}),$e=g.group({class:"apexcharts-bar-shadows"});c.globals.delayedElements.push({el:$e.node}),$e.node.classList.add("apexcharts-element-hidden");for(var wt=0;wt<n[k].length;wt++){var kt=this.barHelpers.getStrokeWidth(k,wt,he),Wt=null,hi={indexes:{i:k,j:wt,realIndex:he,bc:M},x:ee,y:ae,strokeWidth:kt,elSeries:be};this.isHorizontal?(Wt=this.drawBarPaths(Re(Re({},hi),{},{barHeight:F,zeroW:X,yDivision:j})),K=this.series[k][wt]/this.invertedYRatio):(Wt=this.drawColumnPaths(Re(Re({},hi),{},{xDivision:R,barWidth:K,zeroH:U})),F=this.series[k][wt]/this.yRatio[this.yaxisIndex]);var yi=this.barHelpers.getPathFillColor(n,k,wt,he);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&wt>0){var rn=this.barHelpers.drawBarShadow({color:"string"==typeof yi&&-1===yi?.indexOf("url")?yi:Ve.hexToRgba(c.globals.colors[k]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:Wt});rn&&$e.add(rn)}this.pathArr.push(Wt);var gn=this.barHelpers.drawGoalLine({barXPosition:Wt.barXPosition,barYPosition:Wt.barYPosition,goalX:Wt.goalX,goalY:Wt.goalY,barHeight:F,barWidth:K});gn&&Me.add(gn),ae=Wt.y,ee=Wt.x,wt>0&&ve.push(ee+K/2),de.push(ae),this.renderSeries({realIndex:he,pathFill:yi,j:wt,i:k,pathFrom:Wt.pathFrom,pathTo:Wt.pathTo,strokeWidth:kt,elSeries:be,x:ee,y:ae,series:n,barHeight:Wt.barHeight?Wt.barHeight:F,barWidth:Wt.barWidth?Wt.barWidth:K,elDataLabelsWrap:_e,elGoalsMarkers:Me,elBarShadows:$e,visibleSeries:this.visibleI,type:"bar"})}c.globals.seriesXvalues[he]=ve,c.globals.seriesYvalues[he]=de,x.add(be)}return x}},{key:"renderSeries",value:function(n){var s=n.realIndex,c=n.pathFill,g=n.lineFill,y=n.j,x=n.i,k=n.groupIndex,M=n.pathFrom,R=n.pathTo,j=n.strokeWidth,U=n.elSeries,X=n.x,ee=n.y,ae=n.y1,de=n.y2,ve=n.series,he=n.barHeight,be=n.barWidth,F=n.barXPosition,K=n.barYPosition,ce=n.elDataLabelsWrap,_e=n.elGoalsMarkers,Me=n.elBarShadows,$e=n.visibleSeries,wt=n.type,kt=this.w,Wt=new rt(this.ctx);g||(g=this.barOptions.distributed?kt.globals.stroke.colors[y]:kt.globals.stroke.colors[s]),kt.config.series[x].data[y]&&kt.config.series[x].data[y].strokeColor&&(g=kt.config.series[x].data[y].strokeColor),this.isNullValue&&(c="none");var yi=Wt.renderPaths({i:x,j:y,realIndex:s,pathFrom:M,pathTo:R,stroke:g,strokeWidth:j,strokeLineCap:kt.config.stroke.lineCap,fill:c,animationDelay:y/kt.config.chart.animations.animateGradually.delay*(kt.config.chart.animations.speed/kt.globals.dataPoints)/2.4,initialSpeed:kt.config.chart.animations.speed,dataChangeSpeed:kt.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(wt,"-area")});yi.attr("clip-path","url(#gridRectMask".concat(kt.globals.cuid,")"));var rn=kt.config.forecastDataPoints;rn.count>0&&y>=kt.globals.dataPoints-rn.count&&(yi.node.setAttribute("stroke-dasharray",rn.dashArray),yi.node.setAttribute("stroke-width",rn.strokeWidth),yi.node.setAttribute("fill-opacity",rn.fillOpacity)),void 0!==ae&&void 0!==de&&(yi.attr("data-range-y1",ae),yi.attr("data-range-y2",de)),new ei(this.ctx).setSelectionFilter(yi,s,y),U.add(yi);var gn=new at(this).handleBarDataLabels({x:X,y:ee,y1:ae,y2:de,i:x,j:y,series:ve,realIndex:s,groupIndex:k,barHeight:he,barWidth:be,barXPosition:F,barYPosition:K,renderedPath:yi,visibleSeries:$e});return null!==gn.dataLabels&&ce.add(gn.dataLabels),gn.totalDataLabels&&ce.add(gn.totalDataLabels),U.add(ce),_e&&U.add(_e),Me&&U.add(Me),U}},{key:"drawBarPaths",value:function(n){var s,k,c=n.indexes,g=n.barHeight,y=n.strokeWidth,x=n.zeroW,M=n.y,R=n.yDivision,j=n.elSeries,U=this.w,X=c.i,ee=c.j;if(U.globals.isXNumeric)s=(M=(U.globals.seriesX[X][ee]-U.globals.minX)/this.invertedXRatio-g)+g*this.visibleI;else if(U.config.plotOptions.bar.hideZeroBarsWhenGrouped){var ae=0,de=0;U.globals.seriesPercent.forEach(function(he,be){he[ee]&&ae++,be<X&&0===he[ee]&&de++}),ae>0&&(g=this.seriesLen*g/ae),s=M+g*this.visibleI,s-=g*de}else s=M+g*this.visibleI;this.isFunnel&&(x-=(this.barHelpers.getXForValue(this.series[X][ee],x)-x)/2),k=this.barHelpers.getXForValue(this.series[X][ee],x);var ve=this.barHelpers.getBarpaths({barYPosition:s,barHeight:g,x1:x,x2:k,strokeWidth:y,series:this.series,realIndex:c.realIndex,i:X,j:ee,w:U});return U.globals.isXNumeric||(M+=R),this.barHelpers.barBackground({j:ee,i:X,y1:s-g*this.visibleI,y2:g*this.seriesLen,elSeries:j}),{pathTo:ve.pathTo,pathFrom:ve.pathFrom,x1:x,x:k,y:M,goalX:this.barHelpers.getGoalValues("x",x,null,X,ee),barYPosition:s,barHeight:g}}},{key:"drawColumnPaths",value:function(n){var s,y,c=n.indexes,g=n.x,x=n.xDivision,k=n.barWidth,M=n.zeroH,R=n.strokeWidth,j=n.elSeries,U=this.w,ee=c.i,ae=c.j,de=c.bc;if(U.globals.isXNumeric){var ve=this.getBarXForNumericXAxis({x:g,j:ae,realIndex:c.realIndex,barWidth:k});g=ve.x,s=ve.barXPosition}else if(U.config.plotOptions.bar.hideZeroBarsWhenGrouped){var he=this.barHelpers.getZeroValueEncounters({i:ee,j:ae}),be=he.nonZeroColumns;be>0&&(k=this.seriesLen*k/be),s=g+k*this.visibleI,s-=k*he.zeroEncounters}else s=g+k*this.visibleI;y=this.barHelpers.getYForValue(this.series[ee][ae],M);var K=this.barHelpers.getColumnPaths({barXPosition:s,barWidth:k,y1:M,y2:y,strokeWidth:R,series:this.series,realIndex:c.realIndex,i:ee,j:ae,w:U});return U.globals.isXNumeric||(g+=x),this.barHelpers.barBackground({bc:de,j:ae,i:ee,x1:s-R/2-k*this.visibleI,x2:k*this.seriesLen+R/2,elSeries:j}),{pathTo:K.pathTo,pathFrom:K.pathFrom,x:g,y,goalY:this.barHelpers.getGoalValues("y",null,M,ee,ae),barXPosition:s,barWidth:k}}},{key:"getBarXForNumericXAxis",value:function(n){var s=n.x,c=n.barWidth,g=n.realIndex,y=n.j,x=this.w,k=g;return x.globals.seriesX[g].length||(k=x.globals.maxValsInArrayIndex),x.globals.seriesX[k][y]&&(s=(x.globals.seriesX[k][y]-x.globals.minX)/this.xRatio-c*this.seriesLen/2),{barXPosition:s+c*this.visibleI,x:s}}},{key:"getPreviousPath",value:function(n,s){for(var c,g=this.w,y=0;y<g.globals.previousPaths.length;y++){var x=g.globals.previousPaths[y];x.paths&&x.paths.length>0&&parseInt(x.realIndex,10)===parseInt(n,10)&&void 0!==g.globals.previousPaths[y].paths[s]&&(c=g.globals.previousPaths[y].paths[s].d)}return c}}]),ue}(),Ht=function(ue){Oe(s,It);var n=dt(s);function s(){return Y(this,s),n.apply(this,arguments)}return ke(s,[{key:"draw",value:function(c,g){var y=this,x=this.w;this.graphics=new rt(this.ctx),this.bar=new It(this.ctx,this.xyRatios);var k=new Kt(this.ctx,x);c=k.getLogSeries(c),this.yRatio=k.getLogYRatios(this.yRatio),this.barHelpers.initVariables(c),"100%"===x.config.chart.stackType&&(c=x.globals.seriesPercent.slice()),this.series=c,this.barHelpers.initializeStackedPrevVars(this);for(var M=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),R=0,j=0,U=function(ae,de){var ve=void 0,he=void 0,be=void 0,F=void 0,K=-1;y.groupCtx=y,x.globals.seriesGroups.forEach(function(wr,Pr){wr.indexOf(x.config.series[ae].name)>-1&&(K=Pr)}),-1!==K&&(y.groupCtx=y[x.globals.seriesGroups[K]]);var ce=[],_e=[],Me=x.globals.comboCharts?g[ae]:ae;y.yRatio.length>1&&(y.yaxisIndex=Me),y.isReversed=x.config.yaxis[y.yaxisIndex]&&x.config.yaxis[y.yaxisIndex].reversed;var $e=y.graphics.group({class:"apexcharts-series",seriesName:Ve.escapeString(x.globals.seriesNames[Me]),rel:ae+1,"data:realIndex":Me});y.ctx.series.addCollapsedClassToSeries($e,Me);var wt=y.graphics.group({class:"apexcharts-datalabels","data:realIndex":Me}),kt=y.graphics.group({class:"apexcharts-bar-goals-markers"}),Wt=0,hi=0,yi=y.initialPositions(R,j,ve,he,be,F);j=yi.y,he=yi.yDivision,F=yi.zeroW,R=yi.x,hi=yi.barWidth,ve=yi.xDivision,be=yi.zeroH,x.globals.barHeight=Wt=yi.barHeight,x.globals.barWidth=hi,y.barHelpers.initializeStackedXYVars(y),1===y.groupCtx.prevY.length&&y.groupCtx.prevY[0].every(function(wr){return isNaN(wr)})&&(y.groupCtx.prevY[0]=y.groupCtx.prevY[0].map(function(wr){return be}),y.groupCtx.prevYF[0]=y.groupCtx.prevYF[0].map(function(wr){return 0}));for(var rn=0;rn<x.globals.dataPoints;rn++){var gn=y.barHelpers.getStrokeWidth(ae,rn,Me),An={indexes:{i:ae,j:rn,realIndex:Me,bc:de},strokeWidth:gn,x:R,y:j,elSeries:$e,groupIndex:K,seriesGroup:x.globals.seriesGroups[K]},$n=null;y.isHorizontal?($n=y.drawStackedBarPaths(Re(Re({},An),{},{zeroW:F,barHeight:Wt,yDivision:he})),hi=y.series[ae][rn]/y.invertedYRatio):($n=y.drawStackedColumnPaths(Re(Re({},An),{},{xDivision:ve,barWidth:hi,zeroH:be})),Wt=y.series[ae][rn]/y.yRatio[y.yaxisIndex]);var Jn=y.barHelpers.drawGoalLine({barXPosition:$n.barXPosition,barYPosition:$n.barYPosition,goalX:$n.goalX,goalY:$n.goalY,barHeight:Wt,barWidth:hi});Jn&&kt.add(Jn),j=$n.y,ce.push(R=$n.x),_e.push(j);var Qn=y.barHelpers.getPathFillColor(c,ae,rn,Me);$e=y.renderSeries({realIndex:Me,pathFill:Qn,j:rn,i:ae,groupIndex:K,pathFrom:$n.pathFrom,pathTo:$n.pathTo,strokeWidth:gn,elSeries:$e,x:R,y:j,series:c,barHeight:Wt,barWidth:hi,elDataLabelsWrap:wt,elGoalsMarkers:kt,type:"bar",visibleSeries:0})}x.globals.seriesXvalues[Me]=ce,x.globals.seriesYvalues[Me]=_e,y.groupCtx.prevY.push(y.groupCtx.yArrj),y.groupCtx.prevYF.push(y.groupCtx.yArrjF),y.groupCtx.prevYVal.push(y.groupCtx.yArrjVal),y.groupCtx.prevX.push(y.groupCtx.xArrj),y.groupCtx.prevXF.push(y.groupCtx.xArrjF),y.groupCtx.prevXVal.push(y.groupCtx.xArrjVal),M.add($e)},X=0,ee=0;X<c.length;X++,ee++)U(X,ee);return M}},{key:"initialPositions",value:function(c,g,y,x,k,M){var R,j,U,X,ee=this.w;return this.isHorizontal?(U=(U=x=ee.globals.gridHeight/ee.globals.dataPoints)*parseInt(ee.config.plotOptions.bar.barHeight,10)/100,-1===String(ee.config.plotOptions.bar.barHeight).indexOf("%")&&(U=parseInt(ee.config.plotOptions.bar.barHeight,10)),M=this.baseLineInvertedY+ee.globals.padHorizontal+(this.isReversed?ee.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),g=(x-U)/2):(X=y=ee.globals.gridWidth/ee.globals.dataPoints,X=ee.globals.isXNumeric&&ee.globals.dataPoints>1?(y=ee.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:X*parseInt(ee.config.plotOptions.bar.columnWidth,10)/100,-1===String(ee.config.plotOptions.bar.columnWidth).indexOf("%")&&(X=parseInt(ee.config.plotOptions.bar.columnWidth,10)),k=ee.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?ee.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),c=ee.globals.padHorizontal+(y-X)/2),{x:c,y:g,yDivision:x,xDivision:y,barHeight:null!==(R=ee.globals.seriesGroups)&&void 0!==R&&R.length?U/ee.globals.seriesGroups.length:U,barWidth:null!==(j=ee.globals.seriesGroups)&&void 0!==j&&j.length?X/ee.globals.seriesGroups.length:X,zeroH:k,zeroW:M}}},{key:"drawStackedBarPaths",value:function(c){for(var g,R,y=c.indexes,x=c.barHeight,k=c.strokeWidth,M=c.zeroW,j=c.y,U=c.groupIndex,X=c.seriesGroup,ee=c.yDivision,ae=c.elSeries,de=this.w,ve=j+(-1!==U?U*x:0),he=y.i,be=y.j,F=0,K=0;K<this.groupCtx.prevXF.length;K++)F+=this.groupCtx.prevXF[K][be];var ce=he;if(X&&(ce=X.indexOf(de.config.series[he].name)),ce>0){var _e=M;this.groupCtx.prevXVal[ce-1][be]<0?_e=this.series[he][be]>=0?this.groupCtx.prevX[ce-1][be]+F-2*(this.isReversed?F:0):this.groupCtx.prevX[ce-1][be]:this.groupCtx.prevXVal[ce-1][be]>=0&&(_e=this.series[he][be]>=0?this.groupCtx.prevX[ce-1][be]:this.groupCtx.prevX[ce-1][be]-F+2*(this.isReversed?F:0)),g=_e}else g=M;var Me=this.barHelpers.getBarpaths({barYPosition:ve,barHeight:x,x1:g,x2:R=null===this.series[he][be]?g:g+this.series[he][be]/this.invertedYRatio-2*(this.isReversed?this.series[he][be]/this.invertedYRatio:0),strokeWidth:k,series:this.series,realIndex:y.realIndex,seriesGroup:X,i:he,j:be,w:de});return this.barHelpers.barBackground({j:be,i:he,y1:ve,y2:x,elSeries:ae}),j+=ee,{pathTo:Me.pathTo,pathFrom:Me.pathFrom,goalX:this.barHelpers.getGoalValues("x",M,null,he,be),barYPosition:ve,x:R,y:j}}},{key:"drawStackedColumnPaths",value:function(c){var x,g=c.indexes,y=c.x,k=c.xDivision,M=c.barWidth,R=c.zeroH,j=c.groupIndex,U=c.seriesGroup,X=c.elSeries,ee=this.w,ae=g.i,de=g.j,ve=g.bc;if(ee.globals.isXNumeric){var he=ee.globals.seriesX[ae][de];he||(he=0),y=(he-ee.globals.minX)/this.xRatio-M/2,ee.globals.seriesGroups.length&&(y=(he-ee.globals.minX)/this.xRatio-M/2*ee.globals.seriesGroups.length)}for(var be,F=y+(-1!==j?j*M:0),K=0,ce=0;ce<this.groupCtx.prevYF.length;ce++)K+=isNaN(this.groupCtx.prevYF[ce][de])?0:this.groupCtx.prevYF[ce][de];var _e=ae;if(U&&(_e=U.indexOf(ee.config.series[ae].name)),_e>0&&!ee.globals.isXNumeric||_e>0&&ee.globals.isXNumeric&&ee.globals.seriesX[ae-1][de]===ee.globals.seriesX[ae][de]){var Me,$e,wt,kt=Math.min(this.yRatio.length+1,ae+1);if(void 0!==this.groupCtx.prevY[_e-1]&&this.groupCtx.prevY[_e-1].length)for(var Wt=1;Wt<kt;Wt++){var hi;if(!isNaN(null===(hi=this.groupCtx.prevY[_e-Wt])||void 0===hi?void 0:hi[de])){wt=this.groupCtx.prevY[_e-Wt][de];break}}for(var yi=1;yi<kt;yi++){var rn,gn;if((null===(rn=this.groupCtx.prevYVal[_e-yi])||void 0===rn?void 0:rn[de])<0){$e=this.series[ae][de]>=0?wt-K+2*(this.isReversed?K:0):wt;break}if((null===(gn=this.groupCtx.prevYVal[_e-yi])||void 0===gn?void 0:gn[de])>=0){$e=this.series[ae][de]>=0?wt:wt+K-2*(this.isReversed?K:0);break}}void 0===$e&&($e=ee.globals.gridHeight),be=null!==(Me=this.groupCtx.prevYF[0])&&void 0!==Me&&Me.every(function($n){return 0===$n})&&this.groupCtx.prevYF.slice(1,_e).every(function($n){return $n.every(function(Jn){return isNaN(Jn)})})?R:$e}else be=R;var An=this.barHelpers.getColumnPaths({barXPosition:F,barWidth:M,y1:be,y2:x=this.series[ae][de]?be-this.series[ae][de]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[ae][de]/this.yRatio[this.yaxisIndex]:0):be,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:U,realIndex:g.realIndex,i:ae,j:de,w:ee});return this.barHelpers.barBackground({bc:ve,j:de,i:ae,x1:F,x2:M,elSeries:X}),y+=k,{pathTo:An.pathTo,pathFrom:An.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,R,ae,de),barXPosition:F,x:ee.globals.isXNumeric?y-k:y,y:x}}}]),s}(),Gt=function(ue){Oe(s,It);var n=dt(s);function s(){return Y(this,s),n.apply(this,arguments)}return ke(s,[{key:"draw",value:function(c,g,y){var x=this,k=this.w,M=new rt(this.ctx),R=k.globals.comboCharts?g:k.config.chart.type,j=new Di(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=k.config.plotOptions.bar.horizontal;var U=new Kt(this.ctx,k);c=U.getLogSeries(c),this.series=c,this.yRatio=U.getLogYRatios(this.yRatio),this.barHelpers.initVariables(c);for(var X=M.group({class:"apexcharts-".concat(R,"-series apexcharts-plot-series")}),ee=function(de){x.isBoxPlot="boxPlot"===k.config.chart.type||"boxPlot"===k.config.series[de].type;var ve,he,be,F,kt,Wt,K=void 0,ce=void 0,_e=[],Me=[],$e=k.globals.comboCharts?y[de]:de,wt=M.group({class:"apexcharts-series",seriesName:Ve.escapeString(k.globals.seriesNames[$e]),rel:de+1,"data:realIndex":$e});x.ctx.series.addCollapsedClassToSeries(wt,$e),c[de].length>0&&(x.visibleI=x.visibleI+1),x.yRatio.length>1&&(x.yaxisIndex=$e);var hi=x.barHelpers.initialPositions();ce=hi.y,kt=hi.barHeight,he=hi.yDivision,F=hi.zeroW,ve=hi.xDivision,be=hi.zeroH,Me.push((K=hi.x)+(Wt=hi.barWidth)/2);for(var yi=M.group({class:"apexcharts-datalabels","data:realIndex":$e}),rn=function(An){var $n=x.barHelpers.getStrokeWidth(de,An,$e),Jn=null,Qn={indexes:{i:de,j:An,realIndex:$e},x:K,y:ce,strokeWidth:$n,elSeries:wt};Jn=x.isHorizontal?x.drawHorizontalBoxPaths(Re(Re({},Qn),{},{yDivision:he,barHeight:kt,zeroW:F})):x.drawVerticalBoxPaths(Re(Re({},Qn),{},{xDivision:ve,barWidth:Wt,zeroH:be})),ce=Jn.y,K=Jn.x,An>0&&Me.push(K+Wt/2),_e.push(ce),Jn.pathTo.forEach(function(wr,Pr){var Rr=!x.isBoxPlot&&x.candlestickOptions.wick.useFillColor?Jn.color[Pr]:k.globals.stroke.colors[de],yr=j.fillPath({seriesNumber:$e,dataPointIndex:An,color:Jn.color[Pr],value:c[de][An]});x.renderSeries({realIndex:$e,pathFill:yr,lineFill:Rr,j:An,i:de,pathFrom:Jn.pathFrom,pathTo:wr,strokeWidth:$n,elSeries:wt,x:K,y:ce,series:c,barHeight:kt,barWidth:Wt,elDataLabelsWrap:yi,visibleSeries:x.visibleI,type:k.config.chart.type})})},gn=0;gn<k.globals.dataPoints;gn++)rn(gn);k.globals.seriesXvalues[$e]=Me,k.globals.seriesYvalues[$e]=_e,X.add(wt)},ae=0;ae<c.length;ae++)ee(ae);return X}},{key:"drawVerticalBoxPaths",value:function(c){var g=c.indexes,y=c.x,x=c.xDivision,k=c.barWidth,M=c.zeroH,R=c.strokeWidth,j=this.w,U=new rt(this.ctx),X=g.i,ee=g.j,ae=!0,de=j.config.plotOptions.candlestick.colors.upward,ve=j.config.plotOptions.candlestick.colors.downward,he="";this.isBoxPlot&&(he=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var be=this.yRatio[this.yaxisIndex],F=g.realIndex,K=this.getOHLCValue(F,ee),ce=M,_e=M;K.o>K.c&&(ae=!1);var Me=Math.min(K.o,K.c),$e=Math.max(K.o,K.c),wt=K.m;j.globals.isXNumeric&&(y=(j.globals.seriesX[F][ee]-j.globals.minX)/this.xRatio-k/2);var kt=y+k*this.visibleI;null==this.series[X][ee]?(Me=M,$e=M):(Me=M-Me/be,$e=M-$e/be,ce=M-K.h/be,_e=M-K.l/be,wt=M-K.m/be);var Wt=U.move(kt,M),hi=U.move(kt+k/2,Me);return j.globals.previousPaths.length>0&&(hi=this.getPreviousPath(F,ee,!0)),Wt=this.isBoxPlot?[U.move(kt,Me)+U.line(kt+k/2,Me)+U.line(kt+k/2,ce)+U.line(kt+k/4,ce)+U.line(kt+k-k/4,ce)+U.line(kt+k/2,ce)+U.line(kt+k/2,Me)+U.line(kt+k,Me)+U.line(kt+k,wt)+U.line(kt,wt)+U.line(kt,Me+R/2),U.move(kt,wt)+U.line(kt+k,wt)+U.line(kt+k,$e)+U.line(kt+k/2,$e)+U.line(kt+k/2,_e)+U.line(kt+k-k/4,_e)+U.line(kt+k/4,_e)+U.line(kt+k/2,_e)+U.line(kt+k/2,$e)+U.line(kt,$e)+U.line(kt,wt)+"z"]:[U.move(kt,$e)+U.line(kt+k/2,$e)+U.line(kt+k/2,ce)+U.line(kt+k/2,$e)+U.line(kt+k,$e)+U.line(kt+k,Me)+U.line(kt+k/2,Me)+U.line(kt+k/2,_e)+U.line(kt+k/2,Me)+U.line(kt,Me)+U.line(kt,$e-R/2)],hi+=U.move(kt,Me),j.globals.isXNumeric||(y+=x),{pathTo:Wt,pathFrom:hi,x:y,y:$e,barXPosition:kt,color:this.isBoxPlot?he:ae?[de]:[ve]}}},{key:"drawHorizontalBoxPaths",value:function(c){var g=c.indexes,y=c.y,x=c.yDivision,k=c.barHeight,M=c.zeroW,R=c.strokeWidth,j=this.w,U=new rt(this.ctx),X=g.i,ee=g.j,ae=this.boxOptions.colors.lower;this.isBoxPlot&&(ae=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var de=this.invertedYRatio,ve=g.realIndex,he=this.getOHLCValue(ve,ee),be=M,F=M,K=Math.min(he.o,he.c),ce=Math.max(he.o,he.c),_e=he.m;j.globals.isXNumeric&&(y=(j.globals.seriesX[ve][ee]-j.globals.minX)/this.invertedXRatio-k/2);var Me=y+k*this.visibleI;null==this.series[X][ee]?(K=M,ce=M):(K=M+K/de,ce=M+ce/de,be=M+he.h/de,F=M+he.l/de,_e=M+he.m/de);var $e=U.move(M,Me),wt=U.move(K,Me+k/2);return j.globals.previousPaths.length>0&&(wt=this.getPreviousPath(ve,ee,!0)),$e=[U.move(K,Me)+U.line(K,Me+k/2)+U.line(be,Me+k/2)+U.line(be,Me+k/2-k/4)+U.line(be,Me+k/2+k/4)+U.line(be,Me+k/2)+U.line(K,Me+k/2)+U.line(K,Me+k)+U.line(_e,Me+k)+U.line(_e,Me)+U.line(K+R/2,Me),U.move(_e,Me)+U.line(_e,Me+k)+U.line(ce,Me+k)+U.line(ce,Me+k/2)+U.line(F,Me+k/2)+U.line(F,Me+k-k/4)+U.line(F,Me+k/4)+U.line(F,Me+k/2)+U.line(ce,Me+k/2)+U.line(ce,Me)+U.line(_e,Me)+"z"],wt+=U.move(K,Me),j.globals.isXNumeric||(y+=x),{pathTo:$e,pathFrom:wt,x:ce,y,barYPosition:Me,color:ae}}},{key:"getOHLCValue",value:function(c,g){var y=this.w;return{o:this.isBoxPlot?y.globals.seriesCandleH[c][g]:y.globals.seriesCandleO[c][g],h:this.isBoxPlot?y.globals.seriesCandleO[c][g]:y.globals.seriesCandleH[c][g],m:y.globals.seriesCandleM[c][g],l:this.isBoxPlot?y.globals.seriesCandleC[c][g]:y.globals.seriesCandleL[c][g],c:this.isBoxPlot?y.globals.seriesCandleL[c][g]:y.globals.seriesCandleC[c][g]}}}]),s}(),Ie=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"checkColorRange",value:function(){var n=this.w,s=!1,c=n.config.plotOptions[n.config.chart.type];return c.colorScale.ranges.length>0&&c.colorScale.ranges.map(function(g,y){g.from<=0&&(s=!0)}),s}},{key:"getShadeColor",value:function(n,s,c,g){var y=this.w,x=1,k=y.config.plotOptions[n].shadeIntensity,M=this.determineColor(n,s,c);y.globals.hasNegs||g?x=y.config.plotOptions[n].reverseNegativeShade?M.percent<0?M.percent/100*(1.25*k):1.25*k*(1-M.percent/100):M.percent<=0?1-(1+M.percent/100)*k:(1-M.percent/100)*k:(x=1-M.percent/100,"treemap"===n&&(x=1.25*k*(1-M.percent/100)));var R=M.color,j=new Ve;return y.config.plotOptions[n].enableShades&&(R=Ve.hexToRgba(j.shadeColor("dark"===this.w.config.theme.mode?-1*x:x,M.color),y.config.fill.opacity)),{color:R,colorProps:M}}},{key:"determineColor",value:function(n,s,c){var g=this.w,y=g.globals.series[s][c],x=g.config.plotOptions[n],k=x.colorScale.inverse?c:s;x.distributed&&"treemap"===g.config.chart.type&&(k=c);var M=g.globals.colors[k],R=null,j=Math.min.apply(Math,it(g.globals.series[s])),U=Math.max.apply(Math,it(g.globals.series[s]));x.distributed||"heatmap"!==n||(j=g.globals.minY,U=g.globals.maxY),void 0!==x.colorScale.min&&(j=x.colorScale.min<g.globals.minY?x.colorScale.min:g.globals.minY,U=x.colorScale.max>g.globals.maxY?x.colorScale.max:g.globals.maxY);var X=Math.abs(U)+Math.abs(j),ee=100*y/(0===X?X-1e-6:X);return x.colorScale.ranges.length>0&&x.colorScale.ranges.map(function(ae,de){if(y>=ae.from&&y<=ae.to){M=ae.color,R=ae.foreColor?ae.foreColor:null,j=ae.from,U=ae.to;var ve=Math.abs(U)+Math.abs(j);ee=100*y/(0===ve?ve-1e-6:ve)}}),{color:M,foreColor:R,percent:ee}}},{key:"calculateDataLabels",value:function(n){var s=n.text,c=n.x,g=n.y,y=n.i,x=n.j,k=n.colorProps,M=n.fontSize,R=this.w.config.dataLabels,j=new rt(this.ctx),U=new Rn(this.ctx),X=null;if(R.enabled){X=j.group({class:"apexcharts-data-labels"});var ae=R.offsetY,de=c+R.offsetX,ve=g+parseFloat(R.style.fontSize)/3+ae;U.plotDataLabelsText({x:de,y:ve,text:s,i:y,j:x,color:k.foreColor,parent:X,fontSize:M,dataLabelsConfig:R})}return X}},{key:"addListeners",value:function(n){var s=new rt(this.ctx);n.node.addEventListener("mouseenter",s.pathMouseEnter.bind(this,n)),n.node.addEventListener("mouseleave",s.pathMouseLeave.bind(this,n)),n.node.addEventListener("mousedown",s.pathMouseDown.bind(this,n))}}]),ue}(),He=function(){function ue(n,s){Y(this,ue),this.ctx=n,this.w=n.w,this.xRatio=s.xRatio,this.yRatio=s.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Ie(n),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return ke(ue,[{key:"draw",value:function(n){var s=this.w,c=new rt(this.ctx),g=c.group({class:"apexcharts-heatmap"});g.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")"));var y=s.globals.gridWidth/s.globals.dataPoints,x=s.globals.gridHeight/s.globals.series.length,k=0,M=!1;this.negRange=this.helpers.checkColorRange();var R=n.slice();s.config.yaxis[0].reversed&&(M=!0,R.reverse());for(var j=M?0:R.length-1;M?j<R.length:j>=0;M?j++:j--){var U=c.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:Ve.escapeString(s.globals.seriesNames[j]),rel:j+1,"data:realIndex":j});if(this.ctx.series.addCollapsedClassToSeries(U,j),s.config.chart.dropShadow.enabled){var X=s.config.chart.dropShadow;new ei(this.ctx).dropShadow(U,X,j)}for(var ee=0,ae=s.config.plotOptions.heatmap.shadeIntensity,de=0;de<R[j].length;de++){var ve=this.helpers.getShadeColor(s.config.chart.type,j,de,this.negRange),he=ve.color,be=ve.colorProps;"image"===s.config.fill.type&&(he=new Di(this.ctx).fillPath({seriesNumber:j,dataPointIndex:de,opacity:s.globals.hasNegs?be.percent<0?1-(1+be.percent/100):ae+be.percent/100:be.percent/100,patternID:Ve.randomId(),width:s.config.fill.image.width?s.config.fill.image.width:y,height:s.config.fill.image.height?s.config.fill.image.height:x}));var K=c.drawRect(ee,k,y,x,this.rectRadius);if(K.attr({cx:ee,cy:k}),K.node.classList.add("apexcharts-heatmap-rect"),U.add(K),K.attr({fill:he,i:j,index:j,j:de,val:n[j][de],"stroke-width":this.strokeWidth,stroke:s.config.plotOptions.heatmap.useFillColorAsStroke?he:s.globals.stroke.colors[0],color:he}),this.helpers.addListeners(K),s.config.chart.animations.enabled&&!s.globals.dataChanged){var ce=1;s.globals.resized||(ce=s.config.chart.animations.speed),this.animateHeatMap(K,ee,k,y,x,ce)}if(s.globals.dataChanged){var _e=1;if(this.dynamicAnim.enabled&&s.globals.shouldAnimate){_e=this.dynamicAnim.speed;var Me=s.globals.previousPaths[j]&&s.globals.previousPaths[j][de]&&s.globals.previousPaths[j][de].color;Me||(Me="rgba(255, 255, 255, 0)"),this.animateHeatColor(K,Ve.isColorHex(Me)?Me:Ve.rgb2hex(Me),Ve.isColorHex(he)?he:Ve.rgb2hex(he),_e)}}var $e=(0,s.config.dataLabels.formatter)(s.globals.series[j][de],{value:s.globals.series[j][de],seriesIndex:j,dataPointIndex:de,w:s}),wt=this.helpers.calculateDataLabels({text:$e,x:ee+y/2,y:k+x/2,i:j,j:de,colorProps:be,series:R});null!==wt&&U.add(wt),ee+=y}k+=x,g.add(U)}var kt=s.globals.yAxisScale[0].result.slice();return s.config.yaxis[0].reversed?kt.unshift(""):kt.push(""),s.globals.yAxisScale[0].result=kt,g}},{key:"animateHeatMap",value:function(n,s,c,g,y,x){var k=new Zt(this.ctx);k.animateRect(n,{x:s+g/2,y:c+y/2,width:0,height:0},{x:s,y:c,width:g,height:y},x,function(){k.animationCompleted(n)})}},{key:"animateHeatColor",value:function(n,s,c,g){n.attr({fill:s}).animate(g).attr({fill:c})}}]),ue}(),Pe=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"drawYAxisTexts",value:function(n,s,c,g){var y=this.w,x=y.config.yaxis[0],k=y.globals.yLabelFormatters[0];return new rt(this.ctx).drawText({x:n+x.labels.offsetX,y:s+x.labels.offsetY,text:k(g,c),textAnchor:"middle",fontSize:x.labels.style.fontSize,fontFamily:x.labels.style.fontFamily,foreColor:Array.isArray(x.labels.style.colors)?x.labels.style.colors[c]:x.labels.style.colors})}}]),ue}(),bt=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w;var s=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==s.globals.stroke.colors?s.globals.stroke.colors:s.globals.colors,this.defaultSize=Math.min(s.globals.gridWidth,s.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=s.globals.gridWidth/2,this.fullAngle="radialBar"===s.config.chart.type?360:Math.abs(s.config.plotOptions.pie.endAngle-s.config.plotOptions.pie.startAngle),this.initialAngle=s.config.plotOptions.pie.startAngle%this.fullAngle,s.globals.radialSize=this.defaultSize/2.05-s.config.stroke.width-(s.config.chart.sparkline.enabled?0:s.config.chart.dropShadow.blur),this.donutSize=s.globals.radialSize*parseInt(s.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return ke(ue,[{key:"draw",value:function(n){var s=this,c=this.w,g=new rt(this.ctx);if(this.ret=g.group({class:"apexcharts-pie"}),c.globals.noData)return this.ret;for(var y=0,x=0;x<n.length;x++)y+=Ve.negToZero(n[x]);var k=[],M=g.group();0===y&&(y=1e-5),n.forEach(function(Me){s.maxY=Math.max(s.maxY,Me)}),c.config.yaxis[0].max&&(this.maxY=c.config.yaxis[0].max),"back"===c.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var R=0;R<n.length;R++){var j=this.fullAngle*Ve.negToZero(n[R])/y;k.push(j),"polarArea"===this.chartType?(k[R]=this.fullAngle/n.length,this.sliceSizes.push(c.globals.radialSize*n[R]/this.maxY)):this.sliceSizes.push(c.globals.radialSize)}if(c.globals.dataChanged){for(var U,X=0,ee=0;ee<c.globals.previousPaths.length;ee++)X+=Ve.negToZero(c.globals.previousPaths[ee]);for(var ae=0;ae<c.globals.previousPaths.length;ae++)U=this.fullAngle*Ve.negToZero(c.globals.previousPaths[ae])/X,this.prevSectorAngleArr.push(U)}this.donutSize<0&&(this.donutSize=0);var de=c.config.plotOptions.pie.customScale,be=c.globals.gridWidth/2-c.globals.gridWidth/2*de,F=c.globals.gridHeight/2-c.globals.gridHeight/2*de;if("donut"===this.chartType){var K=g.drawCircle(this.donutSize);K.attr({cx:this.centerX,cy:this.centerY,fill:c.config.plotOptions.pie.donut.background?c.config.plotOptions.pie.donut.background:"transparent"}),M.add(K)}var ce=this.drawArcs(k,n);if(this.sliceLabels.forEach(function(Me){ce.add(Me)}),M.attr({transform:"translate(".concat(be,", ").concat(F,") scale(").concat(de,")")}),M.add(ce),this.ret.add(M),this.donutDataLabels.show){var _e=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:be,translateY:F});this.ret.add(_e)}return"front"===c.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(n,s){var c=this.w,g=new ei(this.ctx),y=new rt(this.ctx),x=new Di(this.ctx),k=y.group({class:"apexcharts-slices"}),M=this.initialAngle,R=this.initialAngle,j=this.initialAngle,U=this.initialAngle;this.strokeWidth=c.config.stroke.show?c.config.stroke.width:0;for(var X=0;X<n.length;X++){var ee=y.group({class:"apexcharts-series apexcharts-pie-series",seriesName:Ve.escapeString(c.globals.seriesNames[X]),rel:X+1,"data:realIndex":X});k.add(ee),j=(M=j)+n[X],U=(R=U)+this.prevSectorAngleArr[X];var ae=j<M?this.fullAngle+j-M:j-M,de=x.fillPath({seriesNumber:X,size:this.sliceSizes[X],value:s[X]}),ve=this.getChangedPath(R,U),he=y.drawPath({d:ve,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[X]:this.lineColorArr,strokeWidth:0,fill:de,fillOpacity:c.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(X)});he.attr({index:0,j:X}),g.setSelectionFilter(he,0,X),c.config.chart.dropShadow.enabled&&g.dropShadow(he,c.config.chart.dropShadow,X),this.addListeners(he,this.donutDataLabels),rt.setAttrs(he.node,{"data:angle":ae,"data:startAngle":M,"data:strokeWidth":this.strokeWidth,"data:value":s[X]});var F={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?F=Ve.polarToCartesian(this.centerX,this.centerY,c.globals.radialSize/1.25+c.config.plotOptions.pie.dataLabels.offset,(M+ae/2)%this.fullAngle):"donut"===this.chartType&&(F=Ve.polarToCartesian(this.centerX,this.centerY,(c.globals.radialSize+this.donutSize)/2+c.config.plotOptions.pie.dataLabels.offset,(M+ae/2)%this.fullAngle)),ee.add(he);var K=0;if(!this.initialAnim||c.globals.resized||c.globals.dataChanged?this.animBeginArr.push(0):(0==(K=ae/this.fullAngle*c.config.chart.animations.speed)&&(K=1),this.animDur=K+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(he,this.dynamicAnim&&c.globals.dataChanged?{size:this.sliceSizes[X],endAngle:j,startAngle:M,prevStartAngle:R,prevEndAngle:U,animateStartingPos:!0,i:X,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:c.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[X],endAngle:j,startAngle:M,i:X,totalItems:n.length-1,animBeginArr:this.animBeginArr,dur:K}),c.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&he.click(this.pieClicked.bind(this,X)),void 0!==c.globals.selectedDataPoints[0]&&c.globals.selectedDataPoints[0].indexOf(X)>-1&&this.pieClicked(X),c.config.dataLabels.enabled){var ce=F.x,_e=F.y,Me=100*ae/this.fullAngle+"%";if(0!==ae&&c.config.plotOptions.pie.dataLabels.minAngleToShowLabel<n[X]){var $e=c.config.dataLabels.formatter;void 0!==$e&&(Me=$e(c.globals.seriesPercent[X][0],{seriesIndex:X,w:c}));var wt=c.globals.dataLabels.style.colors[X],kt=y.group({class:"apexcharts-datalabels"}),Wt=y.drawText({x:ce,y:_e,text:Me,textAnchor:"middle",fontSize:c.config.dataLabels.style.fontSize,fontFamily:c.config.dataLabels.style.fontFamily,fontWeight:c.config.dataLabels.style.fontWeight,foreColor:wt});kt.add(Wt),c.config.dataLabels.dropShadow.enabled&&g.dropShadow(Wt,c.config.dataLabels.dropShadow),Wt.node.classList.add("apexcharts-pie-label"),c.config.chart.animations.animate&&!1===c.globals.resized&&(Wt.node.classList.add("apexcharts-pie-label-delay"),Wt.node.style.animationDelay=c.config.chart.animations.speed/940+"s"),this.sliceLabels.push(kt)}}}return k}},{key:"addListeners",value:function(n,s){var c=new rt(this.ctx);n.node.addEventListener("mouseenter",c.pathMouseEnter.bind(this,n)),n.node.addEventListener("mouseleave",c.pathMouseLeave.bind(this,n)),n.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,n.node,s)),n.node.addEventListener("mousedown",c.pathMouseDown.bind(this,n)),this.donutDataLabels.total.showAlways||(n.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,n.node,s)),n.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,n.node,s)))}},{key:"animatePaths",value:function(n,s){var g=s.endAngle<s.startAngle?this.fullAngle+s.endAngle-s.startAngle:s.endAngle-s.startAngle,y=g,x=s.startAngle,k=s.startAngle;void 0!==s.prevStartAngle&&void 0!==s.prevEndAngle&&(x=s.prevEndAngle,y=s.prevEndAngle<s.prevStartAngle?this.fullAngle+s.prevEndAngle-s.prevStartAngle:s.prevEndAngle-s.prevStartAngle),s.i===this.w.config.series.length-1&&(g+k>this.fullAngle?s.endAngle=s.endAngle-(g+k):g+k<this.fullAngle&&(s.endAngle=s.endAngle+(this.fullAngle-(g+k)))),g===this.fullAngle&&(g=this.fullAngle-.01),this.animateArc(n,x,k,g,y,s)}},{key:"animateArc",value:function(n,s,c,g,y,x){var k,M=this,R=this.w,j=new Zt(this.ctx),U=x.size;(isNaN(s)||isNaN(y))&&(s=c,y=g,x.dur=0);var X=g,ee=c,ae=s<c?this.fullAngle+s-c:s-c;R.globals.dataChanged&&x.shouldSetPrevPaths&&x.prevEndAngle&&(k=M.getPiePath({me:M,startAngle:x.prevStartAngle,angle:x.prevEndAngle<x.prevStartAngle?this.fullAngle+x.prevEndAngle-x.prevStartAngle:x.prevEndAngle-x.prevStartAngle,size:U}),n.attr({d:k})),0!==x.dur?n.animate(x.dur,R.globals.easing,x.animBeginArr[x.i]).afterAll(function(){"pie"!==M.chartType&&"donut"!==M.chartType&&"polarArea"!==M.chartType||this.animate(R.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":M.strokeWidth}),x.i===R.config.series.length-1&&j.animationCompleted(n)}).during(function(de){X=ae+(g-ae)*de,x.animateStartingPos&&(X=y+(g-y)*de,ee=s-y+(c-(s-y))*de),k=M.getPiePath({me:M,startAngle:ee,angle:X,size:U}),n.node.setAttribute("data:pathOrig",k),n.attr({d:k})}):(k=M.getPiePath({me:M,startAngle:ee,angle:g,size:U}),x.isTrack||(R.globals.animationEnded=!0),n.node.setAttribute("data:pathOrig",k),n.attr({d:k,"stroke-width":M.strokeWidth}))}},{key:"pieClicked",value:function(n){var s,c=this.w,g=this,y=g.sliceSizes[n]+(c.config.plotOptions.pie.expandOnClick?4:0),x=c.globals.dom.Paper.select(".apexcharts-".concat(g.chartType.toLowerCase(),"-slice-").concat(n)).members[0];if("true"!==x.attr("data:pieClicked")){var k=c.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(k,function(U){U.setAttribute("data:pieClicked","false");var X=U.getAttribute("data:pathOrig");X&&U.setAttribute("d",X)}),x.attr("data:pieClicked","true");var M=parseInt(x.attr("data:startAngle"),10),R=parseInt(x.attr("data:angle"),10);s=g.getPiePath({me:g,startAngle:M,angle:R,size:y}),360!==R&&x.plot(s)}else{x.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(x.node,this.donutDataLabels);var j=x.attr("data:pathOrig");x.attr({d:j})}}},{key:"getChangedPath",value:function(n,s){var c="";return this.dynamicAnim&&this.w.globals.dataChanged&&(c=this.getPiePath({me:this,startAngle:n,angle:s-n,size:this.size})),c}},{key:"getPiePath",value:function(n){var s,c=n.me,g=n.startAngle,y=n.angle,x=n.size,k=new rt(this.ctx),M=g,R=Math.PI*(M-90)/180,j=y+g;Math.ceil(j)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(j=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(j)>this.fullAngle&&(j-=this.fullAngle);var U=Math.PI*(j-90)/180,X=c.centerX+x*Math.cos(R),ee=c.centerY+x*Math.sin(R),ae=c.centerX+x*Math.cos(U),de=c.centerY+x*Math.sin(U),ve=Ve.polarToCartesian(c.centerX,c.centerY,c.donutSize,j),he=Ve.polarToCartesian(c.centerX,c.centerY,c.donutSize,M),be=y>180?1:0,F=["M",X,ee,"A",x,x,0,be,1,ae,de];return s="donut"===c.chartType?[].concat(F,["L",ve.x,ve.y,"A",c.donutSize,c.donutSize,0,be,0,he.x,he.y,"L",X,ee,"z"]).join(" "):"pie"===c.chartType||"polarArea"===c.chartType?[].concat(F,["L",c.centerX,c.centerY,"L",X,ee]).join(" "):[].concat(F).join(" "),k.roundPathCorners(s,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(n){var s=this.w,c=new Ui(this.ctx),g=new rt(this.ctx),y=new Pe(this.ctx),x=g.group(),k=g.group(),M=c.niceScale(0,Math.ceil(this.maxY),0),R=M.result.reverse(),j=M.result.length;this.maxY=M.niceMax;for(var U=s.globals.radialSize,X=U/(j-1),ee=0;ee<j-1;ee++){var ae=g.drawCircle(U);if(ae.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":s.config.plotOptions.polarArea.rings.strokeWidth,stroke:s.config.plotOptions.polarArea.rings.strokeColor}),s.config.yaxis[0].show){var de=y.drawYAxisTexts(this.centerX,this.centerY-U+parseInt(s.config.yaxis[0].labels.style.fontSize,10)/2,ee,R[ee]);k.add(de)}x.add(ae),U-=X}this.drawSpokes(n),n.add(x),n.add(k)}},{key:"renderInnerDataLabels",value:function(n,s){var c=this.w,g=new rt(this.ctx),y=g.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(s.translateX?s.translateX:0,", ").concat(s.translateY?s.translateY:0,") scale(").concat(c.config.plotOptions.pie.customScale,")")}),x=n.total.show;y.node.style.opacity=s.opacity;var k,M,R=s.centerX,j=s.centerY;k=void 0===n.name.color?c.globals.colors[0]:n.name.color;var U=n.name.fontSize,X=n.name.fontFamily,ee=n.name.fontWeight;M=void 0===n.value.color?c.config.chart.foreColor:n.value.color;var ae=n.value.formatter,de="",ve="";if(x?(k=n.total.color,U=n.total.fontSize,X=n.total.fontFamily,ee=n.total.fontWeight,ve=n.total.label,de=n.total.formatter(c)):1===c.globals.series.length&&(de=ae(c.globals.series[0],c),ve=c.globals.seriesNames[0]),ve&&(ve=n.name.formatter(ve,n.total.show,c)),n.name.show){var he=g.drawText({x:R,y:j+parseFloat(n.name.offsetY),text:ve,textAnchor:"middle",foreColor:k,fontSize:U,fontWeight:ee,fontFamily:X});he.node.classList.add("apexcharts-datalabel-label"),y.add(he)}if(n.value.show){var be=n.name.show?parseFloat(n.value.offsetY)+16:n.value.offsetY,F=g.drawText({x:R,y:j+be,text:de,textAnchor:"middle",foreColor:M,fontWeight:n.value.fontWeight,fontSize:n.value.fontSize,fontFamily:n.value.fontFamily});F.node.classList.add("apexcharts-datalabel-value"),y.add(F)}return y}},{key:"printInnerLabels",value:function(n,s,c,g){var y,x=this.w;g?y=void 0===n.name.color?x.globals.colors[parseInt(g.parentNode.getAttribute("rel"),10)-1]:n.name.color:x.globals.series.length>1&&n.total.show&&(y=n.total.color);var k=x.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),M=x.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");c=(0,n.value.formatter)(c,x),g||"function"!=typeof n.total.formatter||(c=n.total.formatter(x)),s=n.name.formatter(s,s===n.total.label,x),null!==k&&(k.textContent=s),null!==M&&(M.textContent=c),null!==k&&(k.style.fill=y)}},{key:"printDataLabelsInner",value:function(n,s){var c=this.w,g=n.getAttribute("data:value"),y=c.globals.seriesNames[parseInt(n.parentNode.getAttribute("rel"),10)-1];c.globals.series.length>1&&this.printInnerLabels(s,y,g,n);var x=c.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==x&&(x.style.opacity=1)}},{key:"drawSpokes",value:function(n){var s=this,c=this.w,g=new rt(this.ctx),y=c.config.plotOptions.polarArea.spokes;if(0!==y.strokeWidth){for(var x=[],k=360/c.globals.series.length,M=0;M<c.globals.series.length;M++)x.push(Ve.polarToCartesian(this.centerX,this.centerY,c.globals.radialSize,c.config.plotOptions.pie.startAngle+k*M));x.forEach(function(R,j){var U=g.drawLine(R.x,R.y,s.centerX,s.centerY,Array.isArray(y.connectorColors)?y.connectorColors[j]:y.connectorColors);n.add(U)})}}},{key:"revertDataLabelsInner",value:function(n,s,c){var g=this,y=this.w,x=y.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),k=!1,M=y.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),R=function(X){var ee=X.makeSliceOut,ae=X.printLabel;Array.prototype.forEach.call(M,function(de){"true"===de.getAttribute("data:pieClicked")&&(ee&&(k=!0),ae&&g.printDataLabelsInner(de,s))})};if(R({makeSliceOut:!0,printLabel:!1}),s.total.show&&y.globals.series.length>1)k&&!s.total.showAlways?R({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(s,s.total.label,s.total.formatter(y));else if(R({makeSliceOut:!1,printLabel:!0}),!k)if(y.globals.selectedDataPoints.length&&y.globals.series.length>1)if(y.globals.selectedDataPoints[0].length>0){var j=y.globals.selectedDataPoints[0],U=y.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(j));this.printDataLabelsInner(U,s)}else x&&y.globals.selectedDataPoints.length&&0===y.globals.selectedDataPoints[0].length&&(x.style.opacity=0);else x&&y.globals.series.length>1&&(x.style.opacity=0)}}]),ue}(),Mt=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var s=this.w;this.graphics=new rt(this.ctx),this.lineColorArr=void 0!==s.globals.stroke.colors?s.globals.stroke.colors:s.globals.colors,this.defaultSize=s.globals.svgHeight<s.globals.svgWidth?s.globals.gridHeight+1.5*s.globals.goldenPadding:s.globals.gridWidth,this.isLog=s.config.yaxis[0].logarithmic,this.coreUtils=new Kt(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(s.globals.maxY,0):s.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):s.globals.minY,this.polygons=s.config.plotOptions.radar.polygons,this.strokeWidth=s.config.stroke.show?s.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-s.config.chart.dropShadow.blur,s.config.xaxis.labels.show&&(this.size=this.size-s.globals.xAxisLabelsWidth/1.75),void 0!==s.config.plotOptions.radar.size&&(this.size=s.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return ke(ue,[{key:"draw",value:function(n){var s=this,c=this.w,g=new Di(this.ctx),y=[],x=new Rn(this.ctx);n.length&&(this.dataPointsLen=n[c.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var j=c.globals.gridHeight/2+c.config.plotOptions.radar.offsetY,U=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c.globals.gridWidth/2+c.config.plotOptions.radar.offsetX||0,", ").concat(j||0,")")}),X=[],ee=null,ae=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),n.forEach(function(ve,he){var be=ve.length===c.globals.dataPoints,F=s.graphics.group().attr({class:"apexcharts-series","data:longestSeries":be,seriesName:Ve.escapeString(c.globals.seriesNames[he]),rel:he+1,"data:realIndex":he});s.dataRadiusOfPercent[he]=[],s.dataRadius[he]=[],s.angleArr[he]=[],ve.forEach(function(yi,rn){var gn=Math.abs(s.maxValue-s.minValue);yi+=Math.abs(s.minValue),s.isLog&&(yi=s.coreUtils.getLogVal(yi,0)),s.dataRadiusOfPercent[he][rn]=yi/gn,s.dataRadius[he][rn]=s.dataRadiusOfPercent[he][rn]*s.size,s.angleArr[he][rn]=rn*s.disAngle}),X=s.getDataPointsPos(s.dataRadius[he],s.angleArr[he]);var K=s.createPaths(X,{x:0,y:0});ee=s.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),ae=s.graphics.group({class:"apexcharts-datalabels","data:realIndex":he}),c.globals.delayedElements.push({el:ee.node,index:he});var ce={i:he,realIndex:he,animationDelay:he,initialSpeed:c.config.chart.animations.speed,dataChangeSpeed:c.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:c.globals.stroke.colors[he],strokeLineCap:c.config.stroke.lineCap},_e=null;c.globals.previousPaths.length>0&&(_e=s.getPreviousPath(he));for(var Me=0;Me<K.linePathsTo.length;Me++){var $e=s.graphics.renderPaths(Re(Re({},ce),{},{pathFrom:null===_e?K.linePathsFrom[Me]:_e,pathTo:K.linePathsTo[Me],strokeWidth:Array.isArray(s.strokeWidth)?s.strokeWidth[he]:s.strokeWidth,fill:"none",drawShadow:!1}));F.add($e);var wt=g.fillPath({seriesNumber:he}),kt=s.graphics.renderPaths(Re(Re({},ce),{},{pathFrom:null===_e?K.areaPathsFrom[Me]:_e,pathTo:K.areaPathsTo[Me],strokeWidth:0,fill:wt,drawShadow:!1}));c.config.chart.dropShadow.enabled&&new ei(s.ctx).dropShadow(kt,Object.assign({},c.config.chart.dropShadow,{noUserSpaceOnUse:!0}),he),F.add(kt)}ve.forEach(function(yi,rn){var gn=new qi(s.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:he,dataPointIndex:rn}),An=s.graphics.drawMarker(X[rn].x,X[rn].y,gn);An.attr("rel",rn),An.attr("j",rn),An.attr("index",he),An.node.setAttribute("default-marker-size",gn.pSize);var $n=s.graphics.group({class:"apexcharts-series-markers"});$n&&$n.add(An),ee.add($n),F.add(ee);var Jn=c.config.dataLabels;if(Jn.enabled){var Qn=Jn.formatter(c.globals.series[he][rn],{seriesIndex:he,dataPointIndex:rn,w:c});x.plotDataLabelsText({x:X[rn].x,y:X[rn].y,text:Qn,textAnchor:"middle",i:he,j:he,parent:ae,offsetCorrection:!1,dataLabelsConfig:Re({},Jn)})}F.add(ae)}),y.push(F)}),this.drawPolygons({parent:U}),c.config.xaxis.labels.show){var de=this.drawXAxisTexts();U.add(de)}return y.forEach(function(ve){U.add(ve)}),U.add(this.yaxisLabels),U}},{key:"drawPolygons",value:function(n){for(var s=this,c=this.w,g=n.parent,y=new Pe(this.ctx),x=c.globals.yAxisScale[0].result.reverse(),k=x.length,M=[],R=this.size/(k-1),j=0;j<k;j++)M[j]=R*j;M.reverse();var U=[],X=[];M.forEach(function(ee,ae){var de=Ve.getPolygonPos(ee,s.dataPointsLen),ve="";de.forEach(function(he,be){if(0===ae){var F=s.graphics.drawLine(he.x,he.y,0,0,Array.isArray(s.polygons.connectorColors)?s.polygons.connectorColors[be]:s.polygons.connectorColors);X.push(F)}0===be&&s.yaxisLabelsTextsPos.push({x:he.x,y:he.y}),ve+=he.x+","+he.y+" "}),U.push(ve)}),U.forEach(function(ee,ae){var de=s.polygons.strokeColors,ve=s.polygons.strokeWidth,he=s.graphics.drawPolygon(ee,Array.isArray(de)?de[ae]:de,Array.isArray(ve)?ve[ae]:ve,c.globals.radarPolygons.fill.colors[ae]);g.add(he)}),X.forEach(function(ee){g.add(ee)}),c.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(ee,ae){var de=y.drawYAxisTexts(ee.x,ee.y,ae,x[ae]);s.yaxisLabels.add(de)})}},{key:"drawXAxisTexts",value:function(){var n=this,s=this.w,c=s.config.xaxis.labels,g=this.graphics.group({class:"apexcharts-xaxis"}),y=Ve.getPolygonPos(this.size,this.dataPointsLen);return s.globals.labels.forEach(function(x,k){var M=s.config.xaxis.labels.formatter,R=new Rn(n.ctx);if(y[k]){var j=n.getTextPos(y[k],n.size),U=M(x,{seriesIndex:-1,dataPointIndex:k,w:s});R.plotDataLabelsText({x:j.newX,y:j.newY,text:U,textAnchor:j.textAnchor,i:k,j:k,parent:g,color:Array.isArray(c.style.colors)&&c.style.colors[k]?c.style.colors[k]:"#a8a8a8",dataLabelsConfig:Re({textAnchor:j.textAnchor,dropShadow:{enabled:!1}},c),offsetCorrection:!1})}}),g}},{key:"createPaths",value:function(n,s){var c=this,g=[],y=[],x=[],k=[];if(n.length){y=[this.graphics.move(s.x,s.y)],k=[this.graphics.move(s.x,s.y)];var M=this.graphics.move(n[0].x,n[0].y),R=this.graphics.move(n[0].x,n[0].y);n.forEach(function(j,U){M+=c.graphics.line(j.x,j.y),R+=c.graphics.line(j.x,j.y),U===n.length-1&&(M+="Z",R+="Z")}),g.push(M),x.push(R)}return{linePathsFrom:y,linePathsTo:g,areaPathsFrom:k,areaPathsTo:x}}},{key:"getTextPos",value:function(n,s){var c="middle",g=n.x,y=n.y;return Math.abs(n.x)>=10?n.x>0?(c="start",g+=10):n.x<0&&(c="end",g-=10):c="middle",Math.abs(n.y)>=s-10&&(n.y<0?y-=10:n.y>0&&(y+=10)),{textAnchor:c,newX:g,newY:y}}},{key:"getPreviousPath",value:function(n){for(var s=this.w,c=null,g=0;g<s.globals.previousPaths.length;g++){var y=s.globals.previousPaths[g];y.paths.length>0&&parseInt(y.realIndex,10)===parseInt(n,10)&&void 0!==s.globals.previousPaths[g].paths[0]&&(c=s.globals.previousPaths[g].paths[0].d)}return c}},{key:"getDataPointsPos",value:function(n,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;n=n||[],s=s||[];for(var g=[],y=0;y<c;y++){var x={};x.x=n[y]*Math.sin(s[y]),x.y=-n[y]*Math.cos(s[y]),g.push(x)}return g}}]),ue}(),xi=function(ue){Oe(s,bt);var n=dt(s);function s(c){var g;Y(this,s),(g=n.call(this,c)).ctx=c,g.w=c.w,g.animBeginArr=[0],g.animDur=0;var y=g.w;return g.startAngle=y.config.plotOptions.radialBar.startAngle,g.endAngle=y.config.plotOptions.radialBar.endAngle,g.totalAngle=Math.abs(y.config.plotOptions.radialBar.endAngle-y.config.plotOptions.radialBar.startAngle),g.trackStartAngle=y.config.plotOptions.radialBar.track.startAngle,g.trackEndAngle=y.config.plotOptions.radialBar.track.endAngle,g.barLabels=g.w.config.plotOptions.radialBar.barLabels,g.donutDataLabels=g.w.config.plotOptions.radialBar.dataLabels,g.radialDataLabels=g.donutDataLabels,g.trackStartAngle||(g.trackStartAngle=g.startAngle),g.trackEndAngle||(g.trackEndAngle=g.endAngle),360===g.endAngle&&(g.endAngle=359.99),g.margin=parseInt(y.config.plotOptions.radialBar.track.margin,10),g.onBarLabelClick=g.onBarLabelClick.bind(et(g)),g}return ke(s,[{key:"draw",value:function(c){var g=this.w,y=new rt(this.ctx),x=y.group({class:"apexcharts-radialbar"});if(g.globals.noData)return x;var k=y.group(),M=this.defaultSize/2,R=g.globals.gridWidth/2,j=this.defaultSize/2.05;g.config.chart.sparkline.enabled||(j=j-g.config.stroke.width-g.config.chart.dropShadow.blur);var U=g.globals.fill.colors;if(g.config.plotOptions.radialBar.track.show){var X=this.drawTracks({size:j,centerX:R,centerY:M,colorArr:U,series:c});k.add(X)}var ee=this.drawArcs({size:j,centerX:R,centerY:M,colorArr:U,series:c}),ae=360;g.config.plotOptions.radialBar.startAngle<0&&(ae=this.totalAngle);var de=(360-ae)/360;if(g.globals.radialSize=j-j*de,this.radialDataLabels.value.show){var ve=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);g.globals.radialSize+=ve*de}return k.add(ee.g),"front"===g.config.plotOptions.radialBar.hollow.position&&(ee.g.add(ee.elHollow),ee.dataLabels&&ee.g.add(ee.dataLabels)),x.add(k),x}},{key:"drawTracks",value:function(c){var g=this.w,y=new rt(this.ctx),x=y.group({class:"apexcharts-tracks"}),k=new ei(this.ctx),M=new Di(this.ctx),R=this.getStrokeWidth(c);c.size=c.size-R/2;for(var j=0;j<c.series.length;j++){var U=y.group({class:"apexcharts-radialbar-track apexcharts-track"});x.add(U),U.attr({rel:j+1}),c.size=c.size-R-this.margin;var X=g.config.plotOptions.radialBar.track,ee=M.fillPath({seriesNumber:0,size:c.size,fillColors:Array.isArray(X.background)?X.background[j]:X.background,solid:!0}),ae=this.trackStartAngle,de=this.trackEndAngle;Math.abs(de)+Math.abs(ae)>=360&&(de=360-Math.abs(this.startAngle)-.1);var ve=y.drawPath({d:"",stroke:ee,strokeWidth:R*parseInt(X.strokeWidth,10)/100,fill:"none",strokeOpacity:X.opacity,classes:"apexcharts-radialbar-area"});X.dropShadow.enabled&&k.dropShadow(ve,X.dropShadow),U.add(ve),ve.attr("id","apexcharts-radialbarTrack-"+j),this.animatePaths(ve,{centerX:c.centerX,centerY:c.centerY,endAngle:de,startAngle:ae,size:c.size,i:j,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:g.globals.easing})}return x}},{key:"drawArcs",value:function(c){var g=this.w,y=new rt(this.ctx),x=new Di(this.ctx),k=new ei(this.ctx),M=y.group(),R=this.getStrokeWidth(c);c.size=c.size-R/2;var j=g.config.plotOptions.radialBar.hollow.background,U=c.size-R*c.series.length-this.margin*c.series.length-R*parseInt(g.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,X=U-g.config.plotOptions.radialBar.hollow.margin;void 0!==g.config.plotOptions.radialBar.hollow.image&&(j=this.drawHollowImage(c,M,U,j));var ee=this.drawHollow({size:X,centerX:c.centerX,centerY:c.centerY,fill:j||"transparent"});g.config.plotOptions.radialBar.hollow.dropShadow.enabled&&k.dropShadow(ee,g.config.plotOptions.radialBar.hollow.dropShadow);var de=1;!this.radialDataLabels.total.show&&g.globals.series.length>1&&(de=0);var ve=null;this.radialDataLabels.show&&(ve=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:U,centerX:c.centerX,centerY:c.centerY,opacity:de})),"back"===g.config.plotOptions.radialBar.hollow.position&&(M.add(ee),ve&&M.add(ve));var he=!1;g.config.plotOptions.radialBar.inverseOrder&&(he=!0);for(var be=he?c.series.length-1:0;he?be>=0:be<c.series.length;he?be--:be++){var F=y.group({class:"apexcharts-series apexcharts-radial-series",seriesName:Ve.escapeString(g.globals.seriesNames[be])});M.add(F),F.attr({rel:be+1,"data:realIndex":be}),this.ctx.series.addCollapsedClassToSeries(F,be),c.size=c.size-R-this.margin;var K=x.fillPath({seriesNumber:be,size:c.size,value:c.series[be]}),ce=this.startAngle,_e=void 0,Me=Ve.negToZero(c.series[be]>100?100:c.series[be])/100,$e=Math.round(this.totalAngle*Me)+this.startAngle,wt=void 0;g.globals.dataChanged&&(_e=this.startAngle,wt=Math.round(this.totalAngle*Ve.negToZero(g.globals.previousPaths[be])/100)+_e),Math.abs($e)+Math.abs(ce)>=360&&($e-=.01),Math.abs(wt)+Math.abs(_e)>=360&&(wt-=.01);var kt=$e-ce,Wt=Array.isArray(g.config.stroke.dashArray)?g.config.stroke.dashArray[be]:g.config.stroke.dashArray,hi=y.drawPath({d:"",stroke:K,strokeWidth:R,fill:"none",fillOpacity:g.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+be,strokeDashArray:Wt});if(rt.setAttrs(hi.node,{"data:angle":kt,"data:value":c.series[be]}),g.config.chart.dropShadow.enabled&&k.dropShadow(hi,g.config.chart.dropShadow,be),k.setSelectionFilter(hi,0,be),this.addListeners(hi,this.radialDataLabels),F.add(hi),hi.attr({index:0,j:be}),this.barLabels.enabled){var rn=Ve.polarToCartesian(c.centerX,c.centerY,c.size,ce),gn=this.barLabels.formatter(g.globals.seriesNames[be],{seriesIndex:be,w:g}),An=["apexcharts-radialbar-label"];this.barLabels.onClick||An.push("apexcharts-no-click");var $n=this.barLabels.useSeriesColors?g.globals.colors[be]:g.config.chart.foreColor;$n||($n=g.config.chart.foreColor);var Jn=rn.x-this.barLabels.margin,Qn=rn.y,wr=y.drawText({x:Jn,y:Qn,text:gn,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:$n,cssClass:An.join(" ")});wr.on("click",this.onBarLabelClick),wr.attr({rel:be+1}),0!==ce&&wr.attr({"transform-origin":"".concat(Jn," ").concat(Qn),transform:"rotate(".concat(ce," 0 0)")}),F.add(wr)}var Pr=0;!this.initialAnim||g.globals.resized||g.globals.dataChanged||(Pr=g.config.chart.animations.speed),g.globals.dataChanged&&(Pr=g.config.chart.animations.dynamicAnimation.speed),this.animDur=Pr/(1.2*c.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(hi,{centerX:c.centerX,centerY:c.centerY,endAngle:$e,startAngle:ce,prevEndAngle:wt,prevStartAngle:_e,size:c.size,i:be,totalItems:2,animBeginArr:this.animBeginArr,dur:Pr,shouldSetPrevPaths:!0,easing:g.globals.easing})}return{g:M,elHollow:ee,dataLabels:ve}}},{key:"drawHollow",value:function(c){var g=new rt(this.ctx).drawCircle(2*c.size);return g.attr({class:"apexcharts-radialbar-hollow",cx:c.centerX,cy:c.centerY,r:c.size,fill:c.fill}),g}},{key:"drawHollowImage",value:function(c,g,y,x){var k=this.w,M=new Di(this.ctx),R=Ve.randomId(),j=k.config.plotOptions.radialBar.hollow.image;if(k.config.plotOptions.radialBar.hollow.imageClipped)M.clippedImgArea({width:y,height:y,image:j,patternID:"pattern".concat(k.globals.cuid).concat(R)}),x="url(#pattern".concat(k.globals.cuid).concat(R,")");else{var U=k.config.plotOptions.radialBar.hollow.imageWidth,X=k.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===U&&void 0===X){var ee=k.globals.dom.Paper.image(j).loaded(function(de){this.move(c.centerX-de.width/2+k.config.plotOptions.radialBar.hollow.imageOffsetX,c.centerY-de.height/2+k.config.plotOptions.radialBar.hollow.imageOffsetY)});g.add(ee)}else{var ae=k.globals.dom.Paper.image(j).loaded(function(de){this.move(c.centerX-U/2+k.config.plotOptions.radialBar.hollow.imageOffsetX,c.centerY-X/2+k.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(U,X)});g.add(ae)}}return x}},{key:"getStrokeWidth",value:function(c){return c.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(c.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(c){var g=parseInt(c.target.getAttribute("rel"),10)-1,y=this.barLabels.onClick,x=this.w;y&&y(x.globals.seriesNames[g],{w:x,seriesIndex:g})}}]),s}(),Ke=function(ue){Oe(s,It);var n=dt(s);function s(){return Y(this,s),n.apply(this,arguments)}return ke(s,[{key:"draw",value:function(c,g){var y=this.w,x=new rt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=c,this.seriesRangeStart=y.globals.seriesRangeStart,this.seriesRangeEnd=y.globals.seriesRangeEnd,this.barHelpers.initVariables(c);for(var k=x.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),M=0;M<c.length;M++){var R,j,U,X,ee=void 0,ae=void 0,de=y.globals.comboCharts?g[M]:M,ve=x.group({class:"apexcharts-series",seriesName:Ve.escapeString(y.globals.seriesNames[de]),rel:M+1,"data:realIndex":de});this.ctx.series.addCollapsedClassToSeries(ve,de),c[M].length>0&&(this.visibleI=this.visibleI+1);var he=0,be=0;this.yRatio.length>1&&(this.yaxisIndex=de);var F=this.barHelpers.initialPositions();ae=F.y,X=F.zeroW,ee=F.x,be=F.barWidth,he=F.barHeight,R=F.xDivision,j=F.yDivision,U=F.zeroH;for(var K=x.group({class:"apexcharts-datalabels","data:realIndex":de}),ce=x.group({class:"apexcharts-rangebar-goals-markers"}),_e=0;_e<y.globals.dataPoints;_e++){var Me,$e=this.barHelpers.getStrokeWidth(M,_e,de),wt=this.seriesRangeStart[M][_e],kt=this.seriesRangeEnd[M][_e],Wt=null,hi=null,yi=null,rn={x:ee,y:ae,strokeWidth:$e,elSeries:ve},gn=this.seriesLen;if(y.config.plotOptions.bar.rangeBarGroupRows&&(gn=1),void 0===y.config.series[M].data[_e])break;if(this.isHorizontal){if(yi=ae+he*this.visibleI,y.config.series[M].data[_e].x){var $n=this.detectOverlappingBars({i:M,j:_e,barYPosition:yi,srty:(j-he*gn)/2,barHeight:he,yDivision:j,initPositions:F});he=$n.barHeight,yi=$n.barYPosition}be=(Wt=this.drawRangeBarPaths(Re({indexes:{i:M,j:_e,realIndex:de},barHeight:he,barYPosition:yi,zeroW:X,yDivision:j,y1:wt,y2:kt},rn))).barWidth}else{if(y.globals.isXNumeric&&(ee=(y.globals.seriesX[M][_e]-y.globals.minX)/this.xRatio-be/2),hi=ee+be*this.visibleI,y.config.series[M].data[_e].x){var Qn=this.detectOverlappingBars({i:M,j:_e,barXPosition:hi,srtx:(R-be*gn)/2,barWidth:be,xDivision:R,initPositions:F});be=Qn.barWidth,hi=Qn.barXPosition}he=(Wt=this.drawRangeColumnPaths(Re({indexes:{i:M,j:_e,realIndex:de},barWidth:be,barXPosition:hi,zeroH:U,xDivision:R},rn))).barHeight}var wr=this.barHelpers.drawGoalLine({barXPosition:Wt.barXPosition,barYPosition:yi,goalX:Wt.goalX,goalY:Wt.goalY,barHeight:he,barWidth:be});wr&&ce.add(wr),ae=Wt.y,ee=Wt.x;var Pr=this.barHelpers.getPathFillColor(c,M,_e,de);this.renderSeries((Ee(Me={realIndex:de,pathFill:Pr,lineFill:y.globals.stroke.colors[de],j:_e,i:M,x:ee,y:ae,y1:wt,y2:kt,pathFrom:Wt.pathFrom,pathTo:Wt.pathTo,strokeWidth:$e,elSeries:ve,series:c,barHeight:he,barWidth:be,barXPosition:hi,barYPosition:yi},"barWidth",be),Ee(Me,"elDataLabelsWrap",K),Ee(Me,"elGoalsMarkers",ce),Ee(Me,"visibleSeries",this.visibleI),Ee(Me,"type","rangebar"),Me))}k.add(ve)}return k}},{key:"detectOverlappingBars",value:function(c){var g=c.i,y=c.j,x=c.barYPosition,k=c.barXPosition,M=c.srty,R=c.srtx,j=c.barHeight,U=c.barWidth,X=c.yDivision,ee=c.xDivision,ae=c.initPositions,de=this.w,ve=[],he=de.config.series[g].data[y].rangeName,be=de.config.series[g].data[y].x,F=Array.isArray(be)?be.join(" "):be,K=de.globals.labels.map(function(_e){return Array.isArray(_e)?_e.join(" "):_e}).indexOf(F),ce=de.globals.seriesRange[g].findIndex(function(_e){return _e.x===F&&_e.overlaps.length>0});return this.isHorizontal?(x=de.config.plotOptions.bar.rangeBarGroupRows?M+X*K:M+j*this.visibleI+X*K,ce>-1&&!de.config.plotOptions.bar.rangeBarOverlap&&(ve=de.globals.seriesRange[g][ce].overlaps).indexOf(he)>-1&&(x=(j=ae.barHeight/ve.length)*this.visibleI+X*(100-parseInt(this.barOptions.barHeight,10))/100/2+j*(this.visibleI+ve.indexOf(he))+X*K)):(K>-1&&(k=de.config.plotOptions.bar.rangeBarGroupRows?R+ee*K:R+U*this.visibleI+ee*K),ce>-1&&!de.config.plotOptions.bar.rangeBarOverlap&&(ve=de.globals.seriesRange[g][ce].overlaps).indexOf(he)>-1&&(k=(U=ae.barWidth/ve.length)*this.visibleI+ee*(100-parseInt(this.barOptions.barWidth,10))/100/2+U*(this.visibleI+ve.indexOf(he))+ee*K)),{barYPosition:x,barXPosition:k,barHeight:j,barWidth:U}}},{key:"drawRangeColumnPaths",value:function(c){var g=c.indexes,y=c.x,x=c.xDivision,k=c.barWidth,M=c.barXPosition,R=c.zeroH,j=this.w,U=g.i,X=g.j,ee=this.yRatio[this.yaxisIndex],ae=g.realIndex,de=this.getRangeValue(ae,X),ve=Math.min(de.start,de.end),he=Math.max(de.start,de.end);null==this.series[U][X]?ve=R:(ve=R-ve/ee,he=R-he/ee);var be=Math.abs(he-ve),F=this.barHelpers.getColumnPaths({barXPosition:M,barWidth:k,y1:ve,y2:he,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:g.realIndex,i:ae,j:X,w:j});if(j.globals.isXNumeric){var K=this.getBarXForNumericXAxis({x:y,j:X,realIndex:ae,barWidth:k});y=K.x,M=K.barXPosition}else y+=x;return{pathTo:F.pathTo,pathFrom:F.pathFrom,barHeight:be,x:y,y:he,goalY:this.barHelpers.getGoalValues("y",null,R,U,X),barXPosition:M}}},{key:"drawRangeBarPaths",value:function(c){var g=c.indexes,y=c.y,M=c.yDivision,R=c.barHeight,j=c.barYPosition,U=c.zeroW,X=this.w,ee=U+c.y1/this.invertedYRatio,ae=U+c.y2/this.invertedYRatio,de=Math.abs(ae-ee),ve=this.barHelpers.getBarpaths({barYPosition:j,barHeight:R,x1:ee,x2:ae,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:g.realIndex,realIndex:g.realIndex,j:g.j,w:X});return X.globals.isXNumeric||(y+=M),{pathTo:ve.pathTo,pathFrom:ve.pathFrom,barWidth:de,x:ae,goalX:this.barHelpers.getGoalValues("x",U,null,g.realIndex,g.j),y}}},{key:"getRangeValue",value:function(c,g){var y=this.w;return{start:y.globals.seriesRangeStart[c][g],end:y.globals.seriesRangeEnd[c][g]}}}]),s}(),ot=function(){function ue(n){Y(this,ue),this.w=n.w,this.lineCtx=n}return ke(ue,[{key:"sameValueSeriesFix",value:function(n,s){var c=this.w;if(("gradient"===c.config.fill.type||"gradient"===c.config.fill.type[n])&&new Kt(this.lineCtx.ctx,c).seriesHaveSameValues(n)){var g=s[n].slice();g[g.length-1]=g[g.length-1]+1e-6,s[n]=g}return s}},{key:"calculatePoints",value:function(n){var s=n.series,g=n.x,y=n.y,x=n.i,k=n.j,M=n.prevY,R=this.w,j=[],U=[];if(0===k){var X=this.lineCtx.categoryAxisCorrection+R.config.markers.offsetX;R.globals.isXNumeric&&(X=(R.globals.seriesX[n.realIndex][0]-R.globals.minX)/this.lineCtx.xRatio+R.config.markers.offsetX),j.push(X),U.push(Ve.isNumber(s[x][0])?M+R.config.markers.offsetY:null),j.push(g+R.config.markers.offsetX),U.push(Ve.isNumber(s[x][k+1])?y+R.config.markers.offsetY:null)}else j.push(g+R.config.markers.offsetX),U.push(Ve.isNumber(s[x][k+1])?y+R.config.markers.offsetY:null);return{x:j,y:U}}},{key:"checkPreviousPaths",value:function(n){for(var s=n.pathFromLine,c=n.pathFromArea,g=n.realIndex,y=this.w,x=0;x<y.globals.previousPaths.length;x++){var k=y.globals.previousPaths[x];("line"===k.type||"area"===k.type)&&k.paths.length>0&&parseInt(k.realIndex,10)===parseInt(g,10)&&("line"===k.type?(this.lineCtx.appendPathFrom=!1,s=y.globals.previousPaths[x].paths[0].d):"area"===k.type&&(this.lineCtx.appendPathFrom=!1,c=y.globals.previousPaths[x].paths[0].d,y.config.stroke.show&&y.globals.previousPaths[x].paths[1]&&(s=y.globals.previousPaths[x].paths[1].d)))}return{pathFromLine:s,pathFromArea:c}}},{key:"determineFirstPrevY",value:function(n){var s,c,g=n.i,y=n.series,x=n.prevY,k=n.lineYPosition,M=this.w,R=M.config.chart.stacked&&!M.globals.comboCharts||M.config.chart.stacked&&M.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(s=this.w.config.series[g])||void 0===s?void 0:s.type));if(void 0!==(null===(c=y[g])||void 0===c?void 0:c[0]))x=(k=R&&g>0?this.lineCtx.prevSeriesY[g-1][0]:this.lineCtx.zeroY)-y[g][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?y[g][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(R&&g>0&&void 0===y[g][0])for(var j=g-1;j>=0;j--)if(null!=y[j][0]){x=k=this.lineCtx.prevSeriesY[j][0];break}return{prevY:x,lineYPosition:k}}}]),ue}(),je=function(ue){for(var n="",s=0;s<ue.length;s++){var c=ue[s],g=c.length;g>4?(n+="C".concat(c[0],", ").concat(c[1]),n+=", ".concat(c[2],", ").concat(c[3]),n+=", ".concat(c[4],", ").concat(c[5])):g>2&&(n+="S".concat(c[0],", ").concat(c[1]),n+=", ".concat(c[2],", ").concat(c[3]))}return n},Le=function(ue){var n=function(ue){for(var n,s,c,g,y=function(j){for(var U=[],X=j[0],ee=j[1],ae=U[0]=Fe(X,ee),de=1,ve=j.length-1;de<ve;de++)U[de]=.5*(ae+(ae=Fe(X=ee,ee=j[de+1])));return U[de]=ae,U}(ue),x=ue.length-1,k=[],M=0;M<x;M++)c=Fe(ue[M],ue[M+1]),Math.abs(c)<1e-6?y[M]=y[M+1]=0:(g=(n=y[M]/c)*n+(s=y[M+1]/c)*s)>9&&(g=3*c/Math.sqrt(g),y[M]=g*n,y[M+1]=g*s);for(var R=0;R<=x;R++)g=(ue[Math.min(x,R+1)][0]-ue[Math.max(0,R-1)][0])/(6*(1+y[R]*y[R])),k.push([g||0,y[R]*g||0]);return k}(ue),s=ue[1],c=ue[0],g=[],y=n[1],x=n[0];g.push(c,[c[0]+x[0],c[1]+x[1],s[0]-y[0],s[1]-y[1],s[0],s[1]]);for(var k=2,M=n.length;k<M;k++){var R=ue[k],j=n[k];g.push([R[0]-j[0],R[1]-j[1],R[0],R[1]])}return g};function Fe(ue,n){return(n[1]-ue[1])/(n[0]-ue[0])}var ht=function(){function ue(n,s,c){Y(this,ue),this.ctx=n,this.w=n.w,this.xyRatios=s,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||c,this.scatter=new Hn(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new ot(this),this.markers=new qi(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return ke(ue,[{key:"draw",value:function(n,s,c,g){var y,x=this.w,k=new rt(this.ctx),M=x.globals.comboCharts?s:x.config.chart.type,R=k.group({class:"apexcharts-".concat(M,"-series apexcharts-plot-series")}),j=new Kt(this.ctx,x);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,n=j.getLogSeries(n),this.yRatio=j.getLogYRatios(this.yRatio);for(var U=[],X=0;X<n.length;X++){n=this.lineHelpers.sameValueSeriesFix(X,n);var ee=x.globals.comboCharts?c[X]:X;this._initSerieVariables(n,X,ee);var ae=[],de=[],ve=[],he=x.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,ee),x.globals.isXNumeric&&x.globals.seriesX.length>0&&(he=(x.globals.seriesX[ee][0]-x.globals.minX)/this.xRatio),ve.push(he);var be,F=he,K=void 0,ce=F,_e=this.zeroY,Me=this.zeroY;_e=this.lineHelpers.determineFirstPrevY({i:X,series:n,prevY:_e,lineYPosition:0}).prevY,ae.push("monotonCubic"===x.config.stroke.curve&&null===n[X][0]?null:_e),be=_e,"rangeArea"===M&&(K=Me=this.lineHelpers.determineFirstPrevY({i:X,series:g,prevY:Me,lineYPosition:0}).prevY,de.push(Me));var $e={type:M,series:n,realIndex:ee,i:X,x:he,y:1,pX:F,pY:be,pathsFrom:this._calculatePathsFrom({type:M,series:n,i:X,realIndex:ee,prevX:ce,prevY:_e,prevY2:Me}),linePaths:[],areaPaths:[],seriesIndex:c,lineYPosition:0,xArrj:ve,yArrj:ae,y2Arrj:de,seriesRangeEnd:g},wt=this._iterateOverDataPoints(Re(Re({},$e),{},{iterations:"rangeArea"===M?n[X].length-1:void 0,isRangeStart:!0}));if("rangeArea"===M){var kt=this._calculatePathsFrom({series:g,i:X,realIndex:ee,prevX:ce,prevY:Me}),Wt=this._iterateOverDataPoints(Re(Re({},$e),{},{series:g,pY:K,pathsFrom:kt,iterations:g[X].length-1,isRangeStart:!1}));wt.linePaths[0]=Wt.linePath+wt.linePath,wt.pathFromLine=Wt.pathFromLine+wt.pathFromLine}this._handlePaths({type:M,realIndex:ee,i:X,paths:wt}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),U.push(this.elSeries)}if(void 0!==(null===(y=x.config.series[0])||void 0===y?void 0:y.zIndex)&&U.sort(function(rn,gn){return Number(rn.node.getAttribute("zIndex"))-Number(gn.node.getAttribute("zIndex"))}),x.config.chart.stacked)for(var hi=U.length;hi>0;hi--)R.add(U[hi-1]);else for(var yi=0;yi<U.length;yi++)R.add(U[yi]);return R}},{key:"_initSerieVariables",value:function(n,s,c){var g=this.w,y=new rt(this.ctx);this.xDivision=g.globals.gridWidth/(g.globals.dataPoints-("on"===g.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(g.config.stroke.width)?g.config.stroke.width[c]:g.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=c),this.isReversed=g.config.yaxis[this.yaxisIndex]&&g.config.yaxis[this.yaxisIndex].reversed,this.zeroY=g.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?g.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>g.globals.gridHeight||"end"===g.config.plotOptions.area.fillTo)&&(this.areaBottomY=g.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=y.group({class:"apexcharts-series",zIndex:void 0!==g.config.series[c].zIndex?g.config.series[c].zIndex:c,seriesName:Ve.escapeString(g.globals.seriesNames[c])}),this.elPointsMain=y.group({class:"apexcharts-series-markers-wrap","data:realIndex":c}),this.elDataLabelsWrap=y.group({class:"apexcharts-datalabels","data:realIndex":c}),this.elSeries.attr({"data:longestSeries":n[s].length===g.globals.dataPoints,rel:s+1,"data:realIndex":c}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(n){var s,c,g,y,x=n.type,k=n.series,M=n.i,R=n.realIndex,j=n.prevX,U=n.prevY,X=n.prevY2,ee=this.w,ae=new rt(this.ctx);if(null===k[M][0]){for(var de=0;de<k[M].length;de++)if(null!==k[M][de]){s=ae.move(j=this.xDivision*de,U=this.zeroY-k[M][de]/this.yRatio[this.yaxisIndex]),c=ae.move(j,this.areaBottomY);break}}else s=ae.move(j,U),"rangeArea"===x&&(s=ae.move(j,X)+ae.line(j,U)),c=ae.move(j,this.areaBottomY)+ae.line(j,U);if(g=ae.move(-1,this.zeroY)+ae.line(-1,this.zeroY),y=ae.move(-1,this.zeroY)+ae.line(-1,this.zeroY),ee.globals.previousPaths.length>0){var ve=this.lineHelpers.checkPreviousPaths({pathFromLine:g,pathFromArea:y,realIndex:R});g=ve.pathFromLine,y=ve.pathFromArea}return{prevX:j,prevY:U,linePath:s,areaPath:c,pathFromLine:g,pathFromArea:y}}},{key:"_handlePaths",value:function(n){var s=n.type,c=n.realIndex,g=n.i,y=n.paths,x=this.w,k=new rt(this.ctx),M=new Di(this.ctx);this.prevSeriesY.push(y.yArrj),x.globals.seriesXvalues[c]=y.xArrj,x.globals.seriesYvalues[c]=y.yArrj;var R=x.config.forecastDataPoints;if(R.count>0&&"rangeArea"!==s){var j=x.globals.seriesXvalues[c][x.globals.seriesXvalues[c].length-R.count-1],U=k.drawRect(j,0,x.globals.gridWidth,x.globals.gridHeight,0);x.globals.dom.elForecastMask.appendChild(U.node);var X=k.drawRect(0,0,j,x.globals.gridHeight,0);x.globals.dom.elNonForecastMask.appendChild(X.node)}this.pointsChart||x.globals.delayedElements.push({el:this.elPointsMain.node,index:c});var ee={i:g,realIndex:c,animationDelay:g,initialSpeed:x.config.chart.animations.speed,dataChangeSpeed:x.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(s)};if("area"===s)for(var ae=M.fillPath({seriesNumber:c}),de=0;de<y.areaPaths.length;de++){var ve=k.renderPaths(Re(Re({},ee),{},{pathFrom:y.pathFromArea,pathTo:y.areaPaths[de],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:ae}));this.elSeries.add(ve)}if(x.config.stroke.show&&!this.pointsChart){var he=null;if("line"===s)he=M.fillPath({seriesNumber:c,i:g});else if("solid"===x.config.stroke.fill.type)he=x.globals.stroke.colors[c];else{var be=x.config.fill;x.config.fill=x.config.stroke.fill,he=M.fillPath({seriesNumber:c,i:g}),x.config.fill=be}for(var F=0;F<y.linePaths.length;F++){var K=he;"rangeArea"===s&&(K=M.fillPath({seriesNumber:c}));var ce=Re(Re({},ee),{},{pathFrom:y.pathFromLine,pathTo:y.linePaths[F],stroke:he,strokeWidth:this.strokeWidth,strokeLineCap:x.config.stroke.lineCap,fill:"rangeArea"===s?K:"none"}),_e=k.renderPaths(ce);if(this.elSeries.add(_e),_e.attr("fill-rule","evenodd"),R.count>0&&"rangeArea"!==s){var Me=k.renderPaths(ce);Me.node.setAttribute("stroke-dasharray",R.dashArray),R.strokeWidth&&Me.node.setAttribute("stroke-width",R.strokeWidth),this.elSeries.add(Me),Me.attr("clip-path","url(#forecastMask".concat(x.globals.cuid,")")),_e.attr("clip-path","url(#nonForecastMask".concat(x.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(n){var s,c=this,g=n.type,y=n.series,x=n.iterations,k=n.realIndex,M=n.i,R=n.x,j=n.y,U=n.pX,X=n.pY,ee=n.pathsFrom,ae=n.linePaths,de=n.areaPaths,ve=n.seriesIndex,he=n.lineYPosition,be=n.xArrj,F=n.yArrj,K=n.y2Arrj,ce=n.isRangeStart,_e=n.seriesRangeEnd,Me=this.w,$e=new rt(this.ctx),wt=this.yRatio,kt=ee.prevY,Wt=ee.linePath,hi=ee.areaPath,yi=ee.pathFromLine,rn=ee.pathFromArea,gn=Ve.isNumber(Me.globals.minYArr[k])?Me.globals.minYArr[k]:Me.globals.minY;x||(x=Me.globals.dataPoints>1?Me.globals.dataPoints-1:Me.globals.dataPoints);for(var An=function(Un,Wr){return Wr-Un/wt[c.yaxisIndex]+2*(c.isReversed?Un/wt[c.yaxisIndex]:0)},$n=j,Jn=Me.config.chart.stacked&&!Me.globals.comboCharts||Me.config.chart.stacked&&Me.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(s=this.w.config.series[k])||void 0===s?void 0:s.type)),Qn=0;Qn<x;Qn++){var wr=null==y[M][Qn+1];if(Me.globals.isXNumeric){var Pr=Me.globals.seriesX[k][Qn+1];void 0===Me.globals.seriesX[k][Qn+1]&&(Pr=Me.globals.seriesX[k][x-1]),R=(Pr-Me.globals.minX)/this.xRatio}else R+=this.xDivision;he=Jn&&M>0&&Me.globals.collapsedSeries.length<Me.config.series.length-1?this.prevSeriesY[function(Un){for(var Wr=Un,Yn=0;Yn<Me.globals.series.length;Yn++)if(Me.globals.collapsedSeriesIndices.indexOf(Un)>-1){Wr--;break}return Wr>=0?Wr:0}(M-1)][Qn+1]:this.zeroY,wr?j=An(gn,he):(j=An(y[M][Qn+1],he),"rangeArea"===g&&($n=An(_e[M][Qn+1],he))),be.push(R),F.push(wr&&"smooth"===Me.config.stroke.curve?null:j),K.push($n);var Rr=this.lineHelpers.calculatePoints({series:y,x:R,y:j,realIndex:k,i:M,j:Qn,prevY:kt}),yr=this._createPaths({type:g,series:y,i:M,realIndex:k,j:Qn,x:R,y:j,y2:$n,xArrj:be,yArrj:F,y2Arrj:K,pX:U,pY:X,linePath:Wt,areaPath:hi,linePaths:ae,areaPaths:de,seriesIndex:ve,isRangeStart:ce});de=yr.areaPaths,ae=yr.linePaths,U=yr.pX,X=yr.pY,hi=yr.areaPath,Wt=yr.linePath,!this.appendPathFrom||"monotoneCubic"===Me.config.stroke.curve&&"rangeArea"===g||(yi+=$e.line(R,this.zeroY),rn+=$e.line(R,this.zeroY)),this.handleNullDataPoints(y,Rr,M,Qn,k),this._handleMarkersAndLabels({type:g,pointsPos:Rr,i:M,j:Qn,realIndex:k,isRangeStart:ce})}return{yArrj:F,xArrj:be,pathFromArea:rn,areaPaths:de,pathFromLine:yi,linePaths:ae,linePath:Wt,areaPath:hi}}},{key:"_handleMarkersAndLabels",value:function(n){var s=n.type,c=n.pointsPos,g=n.isRangeStart,y=n.i,x=n.j,k=n.realIndex,M=this.w,R=new Rn(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,x,{realIndex:k,pointsPos:c,zRatio:this.zRatio,elParent:this.elPointsMain});else{M.globals.series[y].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var j=this.markers.plotChartMarkers(c,k,x+1);null!==j&&this.elPointsMain.add(j)}var U=R.drawDataLabel({type:s,isRangeStart:g,pos:c,i:k,j:x+1});null!==U&&this.elDataLabelsWrap.add(U)}},{key:"_createPaths",value:function(n){var s=n.type,c=n.series,g=n.i,y=n.realIndex,x=n.j,k=n.x,M=n.y,R=n.xArrj,j=n.yArrj,U=n.y2,X=n.y2Arrj,ee=n.pX,ae=n.pY,de=n.linePath,ve=n.areaPath,he=n.linePaths,be=n.areaPaths,F=n.seriesIndex,K=n.isRangeStart,ce=this.w,_e=new rt(this.ctx),Me=ce.config.stroke.curve,$e=this.areaBottomY;if(Array.isArray(ce.config.stroke.curve)&&(Me=Array.isArray(F)?ce.config.stroke.curve[F[g]]:ce.config.stroke.curve[g]),"rangeArea"===s&&(ce.globals.hasNullValues||ce.config.forecastDataPoints.count>0)&&"monotoneCubic"===Me&&(Me="straight"),"monotoneCubic"===Me){var wt="rangeArea"===s?R.length===ce.globals.dataPoints:x===c[g].length-2,kt=R.map(function(Jn,Qn){return[R[Qn],j[Qn]]}).filter(function(Jn){return null!==Jn[1]});if(wt&&kt.length>1){var Wt=Le(kt);if(de+=je(Wt),null===c[g][0]?ve=de:ve+=je(Wt),"rangeArea"===s&&K){de+=_e.line(R[R.length-1],X[X.length-1]);var hi=R.slice().reverse(),yi=X.slice().reverse(),rn=hi.map(function(Jn,Qn){return[hi[Qn],yi[Qn]]}),gn=Le(rn);ve=de+=je(gn)}else ve+=_e.line(kt[kt.length-1][0],$e)+_e.line(kt[0][0],$e)+_e.move(kt[0][0],kt[0][1])+"z";he.push(de),be.push(ve)}}else if("smooth"===Me){var An=.35*(k-ee);ce.globals.hasNullValues?(null!==c[g][x]&&(null!==c[g][x+1]?(de=_e.move(ee,ae)+_e.curve(ee+An,ae,k-An,M,k+1,M),ve=_e.move(ee+1,ae)+_e.curve(ee+An,ae,k-An,M,k+1,M)+_e.line(k,$e)+_e.line(ee,$e)+"z"):(de=_e.move(ee,ae),ve=_e.move(ee,ae)+"z")),he.push(de),be.push(ve)):(de+=_e.curve(ee+An,ae,k-An,M,k,M),ve+=_e.curve(ee+An,ae,k-An,M,k,M)),ee=k,ae=M,x===c[g].length-2&&(ve=ve+_e.curve(ee,ae,k,M,k,$e)+_e.move(k,M)+"z","rangeArea"===s&&K?de=de+_e.curve(ee,ae,k,M,k,U)+_e.move(k,U)+"z":ce.globals.hasNullValues||(he.push(de),be.push(ve)))}else null===c[g][x+1]&&(de+=_e.move(k,M),ve=ve+_e.line(ce.globals.isXNumeric?(ce.globals.seriesX[y][x]-ce.globals.minX)/this.xRatio:k-this.xDivision,$e)+_e.move(k,M)+"z"),null===c[g][x]&&(de+=_e.move(k,M),ve+=_e.move(k,$e)),"stepline"===Me?(de=de+_e.line(k,null,"H")+_e.line(null,M,"V"),ve=ve+_e.line(k,null,"H")+_e.line(null,M,"V")):"straight"===Me&&(de+=_e.line(k,M),ve+=_e.line(k,M)),x===c[g].length-2&&(ve=ve+_e.line(k,$e)+_e.move(k,M)+"z","rangeArea"===s&&K?de=de+_e.line(k,U)+_e.move(k,U)+"z":(he.push(de),be.push(ve)));return{linePaths:he,areaPaths:be,pX:ee,pY:ae,linePath:de,areaPath:ve}}},{key:"handleNullDataPoints",value:function(n,s,c,g,y){var x=this.w;if(null===n[c][g]&&x.config.markers.showNullDataPoints||1===n[c].length){var k=this.markers.plotChartMarkers(s,y,g+1,this.strokeWidth-x.config.markers.strokeWidth/2,!0);null!==k&&this.elPointsMain.add(k)}}}]),ue}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function ue(k,M,R,j){this.xoffset=k,this.yoffset=M,this.height=j,this.width=R,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(U){var X,ee=[],ae=this.xoffset,de=this.yoffset,ve=y(U)/this.height,he=y(U)/this.width;if(this.width>=this.height)for(X=0;X<U.length;X++)ee.push([ae,de,ae+ve,de+U[X]/ve]),de+=U[X]/ve;else for(X=0;X<U.length;X++)ee.push([ae,de,ae+U[X]/he,de+he]),ae+=U[X]/he;return ee},this.cutArea=function(U){var X;if(this.width>=this.height){var ee=U/this.height;X=new ue(this.xoffset+ee,this.yoffset,this.width-ee,this.height)}else{var de=U/this.width;X=new ue(this.xoffset,this.yoffset+de,this.width,this.height-de)}return X}}function n(k,M,R,j,U){return j=void 0===j?0:j,U=void 0===U?0:U,function(ee){var ae,de,ve=[];for(ae=0;ae<ee.length;ae++)for(de=0;de<ee[ae].length;de++)ve.push(ee[ae][de]);return ve}(s(function(ee,ae){var de,ve=[],he=ae/y(ee);for(de=0;de<ee.length;de++)ve[de]=ee[de]*he;return ve}(k,M*R),[],new ue(j,U,M,R),[]))}function s(k,M,R,j){var U,X,ee,ae,de,ve,he;if(0!==k.length)return U=R.shortestEdge(),de=X=k[0],ve=U,0===(ae=M).length||((he=ae.slice()).push(de),c(ae,ve)>=c(he,ve))?(M.push(X),s(k.slice(1),M,R,j)):(ee=R.cutArea(y(M),j),j.push(R.getCoordinates(M)),s(k,[],ee,j)),j;j.push(R.getCoordinates(M))}function c(k,M){var R=Math.min.apply(Math,k),j=Math.max.apply(Math,k),U=y(k);return Math.max(Math.pow(M,2)*j/Math.pow(U,2),Math.pow(U,2)/(Math.pow(M,2)*R))}function g(k){return k&&k.constructor===Array}function y(k){var M,R=0;for(M=0;M<k.length;M++)R+=k[M];return R}function x(k){var M,R=0;if(g(k[0]))for(M=0;M<k.length;M++)R+=x(k[M]);else R=y(k);return R}return function k(M,R,j,U,X){U=void 0===U?0:U,X=void 0===X?0:X;var ee,ae,de=[],ve=[];if(g(M[0])){for(ae=0;ae<M.length;ae++)de[ae]=x(M[ae]);for(ee=n(de,R,j,U,X),ae=0;ae<M.length;ae++)ve.push(k(M[ae],ee[ae][2]-ee[ae][0],ee[ae][3]-ee[ae][1],ee[ae][0],ee[ae][1]))}else ve=n(M,R,j,U,X);return ve}}();var Rt,pi,si=function(){function ue(n,s){Y(this,ue),this.ctx=n,this.w=n.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Ie(n),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return ke(ue,[{key:"draw",value:function(n){var s=this,c=this.w,g=new rt(this.ctx),y=new Di(this.ctx),x=g.group({class:"apexcharts-treemap"});if(c.globals.noData)return x;var k=[];return n.forEach(function(M){var R=M.map(function(j){return Math.abs(j)});k.push(R)}),this.negRange=this.helpers.checkColorRange(),c.config.series.forEach(function(M,R){M.data.forEach(function(j){Array.isArray(s.labels[R])||(s.labels[R]=[]),s.labels[R].push(j.x)})}),window.TreemapSquared.generate(k,c.globals.gridWidth,c.globals.gridHeight).forEach(function(M,R){var j=g.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:Ve.escapeString(c.globals.seriesNames[R]),rel:R+1,"data:realIndex":R});if(c.config.chart.dropShadow.enabled){var U=c.config.chart.dropShadow;new ei(s.ctx).dropShadow(x,U,R)}var X=g.group({class:"apexcharts-data-labels"});M.forEach(function(ee,ae){var de=ee[0],ve=ee[1],he=ee[2],be=ee[3],F=g.drawRect(de,ve,he-de,be-ve,c.config.plotOptions.treemap.borderRadius,"#fff",1,s.strokeWidth,c.config.plotOptions.treemap.useFillColorAsStroke?ce:c.globals.stroke.colors[R]);F.attr({cx:de,cy:ve,index:R,i:R,j:ae,width:he-de,height:be-ve});var K=s.helpers.getShadeColor(c.config.chart.type,R,ae,s.negRange),ce=K.color;void 0!==c.config.series[R].data[ae]&&c.config.series[R].data[ae].fillColor&&(ce=c.config.series[R].data[ae].fillColor);var _e=y.fillPath({color:ce,seriesNumber:R,dataPointIndex:ae});F.node.classList.add("apexcharts-treemap-rect"),F.attr({fill:_e}),s.helpers.addListeners(F);var Me={x:de+(he-de)/2,y:ve+(be-ve)/2,width:0,height:0},$e={x:de,y:ve,width:he-de,height:be-ve};if(c.config.chart.animations.enabled&&!c.globals.dataChanged){var wt=1;c.globals.resized||(wt=c.config.chart.animations.speed),s.animateTreemap(F,Me,$e,wt)}c.globals.dataChanged&&s.dynamicAnim.enabled&&c.globals.shouldAnimate&&(c.globals.previousPaths[R]&&c.globals.previousPaths[R][ae]&&c.globals.previousPaths[R][ae].rect&&(Me=c.globals.previousPaths[R][ae].rect),s.animateTreemap(F,Me,$e,s.dynamicAnim.speed));var Wt=s.getFontSize(ee),hi=c.config.dataLabels.formatter(s.labels[R][ae],{value:c.globals.series[R][ae],seriesIndex:R,dataPointIndex:ae,w:c});"truncate"===c.config.plotOptions.treemap.dataLabels.format&&(Wt=parseInt(c.config.dataLabels.style.fontSize,10),hi=s.truncateLabels(hi,Wt,de,ve,he,be));var yi=s.helpers.calculateDataLabels({text:hi,x:(de+he)/2,y:(ve+be)/2+s.strokeWidth/2+Wt/3,i:R,j:ae,colorProps:K,fontSize:Wt,series:n});c.config.dataLabels.enabled&&yi&&s.rotateToFitLabel(yi,Wt,hi,de,ve,he,be),j.add(F),null!==yi&&j.add(yi)}),j.add(X),x.add(j)}),x}},{key:"getFontSize",value:function(n){var x,s=this.w,k=function M(R){var j,U=0;if(Array.isArray(R[0]))for(j=0;j<R.length;j++)U+=M(R[j]);else for(j=0;j<R.length;j++)U+=R[j].length;return U}(this.labels)/function M(R){var j,U=0;if(Array.isArray(R[0]))for(j=0;j<R.length;j++)U+=M(R[j]);else for(j=0;j<R.length;j++)U+=1;return U}(this.labels);return x=Math.pow((n[2]-n[0])*(n[3]-n[1]),.5),Math.min(x/k,parseInt(s.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(n,s,c,g,y,x,k){var M=new rt(this.ctx),R=M.getTextRects(c,s);if(R.width+this.w.config.stroke.width+5>x-g&&R.width<=k-y){var j=M.rotateAroundCenter(n.node);n.node.setAttribute("transform","rotate(-90 ".concat(j.x," ").concat(j.y,") translate(").concat(R.height/3,")"))}}},{key:"truncateLabels",value:function(n,s,c,g,y,x){var k=new rt(this.ctx),M=k.getTextRects(n,s).width+this.w.config.stroke.width+5>y-c&&x-g>y-c?x-g:y-c,R=k.getTextBasedOnMaxWidth({text:n,maxWidth:M,fontSize:s});return n.length!==R.length&&M/s<5?"":R}},{key:"animateTreemap",value:function(n,s,c,g){var y=new Zt(this.ctx);y.animateRect(n,{x:s.x,y:s.y,width:s.width,height:s.height},{x:c.x,y:c.y,width:c.width,height:c.height},g,function(){y.animationCompleted(n)})}}]),ue}(),Qi=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return ke(ue,[{key:"calculateTimeScaleTicks",value:function(n,s){var c=this,g=this.w;if(g.globals.allSeriesCollapsed)return g.globals.labels=[],g.globals.timescaleLabels=[],[];var y=new ai(this.ctx),x=(s-n)/864e5;this.determineInterval(x),g.globals.disableZoomIn=!1,g.globals.disableZoomOut=!1,x<.00011574074074074075?g.globals.disableZoomIn=!0:x>5e4&&(g.globals.disableZoomOut=!0);var k=y.getTimeUnitsfromTimestamp(n,s,this.utc),M=g.globals.gridWidth/x,R=M/24,j=R/60,U=j/60,X=Math.floor(24*x),ee=Math.floor(1440*x),ae=Math.floor(86400*x),de=Math.floor(x),ve=Math.floor(x/30),he=Math.floor(x/365),be={minMillisecond:k.minMillisecond,minSecond:k.minSecond,minMinute:k.minMinute,minHour:k.minHour,minDate:k.minDate,minMonth:k.minMonth,minYear:k.minYear},F={firstVal:be,currentMillisecond:be.minMillisecond,currentSecond:be.minSecond,currentMinute:be.minMinute,currentHour:be.minHour,currentMonthDate:be.minDate,currentDate:be.minDate,currentMonth:be.minMonth,currentYear:be.minYear,daysWidthOnXAxis:M,hoursWidthOnXAxis:R,minutesWidthOnXAxis:j,secondsWidthOnXAxis:U,numberOfSeconds:ae,numberOfMinutes:ee,numberOfHours:X,numberOfDays:de,numberOfMonths:ve,numberOfYears:he};switch(this.tickInterval){case"years":this.generateYearScale(F);break;case"months":case"half_year":this.generateMonthScale(F);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(F);break;case"hours":this.generateHourScale(F);break;case"minutes_fives":case"minutes":this.generateMinuteScale(F);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(F)}var K=this.timeScaleArray.map(function(ce){var _e={position:ce.position,unit:ce.unit,year:ce.year,day:ce.day?ce.day:1,hour:ce.hour?ce.hour:0,month:ce.month+1};return"month"===ce.unit?Re(Re({},_e),{},{day:1,value:ce.value+1}):"day"===ce.unit||"hour"===ce.unit?Re(Re({},_e),{},{value:ce.value}):"minute"===ce.unit?Re(Re({},_e),{},{value:ce.value,minute:ce.value}):"second"===ce.unit?Re(Re({},_e),{},{value:ce.value,minute:ce.minute,second:ce.second}):ce});return K.filter(function(ce){var _e=1,Me=Math.ceil(g.globals.gridWidth/120),$e=ce.value;void 0!==g.config.xaxis.tickAmount&&(Me=g.config.xaxis.tickAmount),K.length>Me&&(_e=Math.floor(K.length/Me));var wt=!1,kt=!1;switch(c.tickInterval){case"years":"year"===ce.unit&&(wt=!0);break;case"half_year":_e=7,"year"===ce.unit&&(wt=!0);break;case"months":_e=1,"year"===ce.unit&&(wt=!0);break;case"months_fortnight":_e=15,"year"!==ce.unit&&"month"!==ce.unit||(wt=!0),30===$e&&(kt=!0);break;case"months_days":_e=10,"month"===ce.unit&&(wt=!0),30===$e&&(kt=!0);break;case"week_days":_e=8,"month"===ce.unit&&(wt=!0);break;case"days":_e=1,"month"===ce.unit&&(wt=!0);break;case"hours":"day"===ce.unit&&(wt=!0);break;case"minutes_fives":case"seconds_fives":$e%5!=0&&(kt=!0);break;case"seconds_tens":$e%10!=0&&(kt=!0)}if("hours"===c.tickInterval||"minutes_fives"===c.tickInterval||"seconds_tens"===c.tickInterval||"seconds_fives"===c.tickInterval){if(!kt)return!0}else if(($e%_e==0||wt)&&!kt)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(n,s){var c=this.w,g=this.formatDates(n),y=this.removeOverlappingTS(g);c.globals.timescaleLabels=y.slice(),new yn(this.ctx).plotCoords()}},{key:"determineInterval",value:function(n){var s=24*n,c=60*s;switch(!0){case n/365>5:this.tickInterval="years";break;case n>800:this.tickInterval="half_year";break;case n>180:this.tickInterval="months";break;case n>90:this.tickInterval="months_fortnight";break;case n>60:this.tickInterval="months_days";break;case n>30:this.tickInterval="week_days";break;case n>2:this.tickInterval="days";break;case s>2.4:this.tickInterval="hours";break;case c>15:this.tickInterval="minutes_fives";break;case c>5:this.tickInterval="minutes";break;case c>1:this.tickInterval="seconds_tens";break;case 60*c>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(n){var s=n.firstVal,c=n.currentMonth,g=n.currentYear,y=n.daysWidthOnXAxis,x=n.numberOfYears,k=s.minYear,M=0,R=new ai(this.ctx),j="year";if(s.minDate>1||s.minMonth>0){var U=R.determineRemainingDaysOfYear(s.minYear,s.minMonth,s.minDate);M=(R.determineDaysOfYear(s.minYear)-U+1)*y,this.timeScaleArray.push({position:M,value:k=s.minYear+1,unit:j,year:k,month:Ve.monthMod(c+1)})}else 1===s.minDate&&0===s.minMonth&&this.timeScaleArray.push({position:M,value:k,unit:j,year:g,month:Ve.monthMod(c+1)});for(var X=k,ee=M,ae=0;ae<x;ae++)X++,ee=R.determineDaysOfYear(X-1)*y+ee,this.timeScaleArray.push({position:ee,value:X,unit:j,year:X,month:1})}},{key:"generateMonthScale",value:function(n){var s=n.firstVal,c=n.currentMonthDate,g=n.currentMonth,y=n.currentYear,x=n.daysWidthOnXAxis,k=n.numberOfMonths,M=g,R=0,j=new ai(this.ctx),U="month",X=0;if(s.minDate>1){R=(j.determineDaysOfMonths(g+1,s.minYear)-c+1)*x,M=Ve.monthMod(g+1);var ee=y+X,ae=Ve.monthMod(M),de=M;0===M&&(U="year",de=ee,ae=1,ee+=X+=1),this.timeScaleArray.push({position:R,value:de,unit:U,year:ee,month:ae})}else this.timeScaleArray.push({position:R,value:M,unit:U,year:y,month:Ve.monthMod(g)});for(var ve=M+1,he=R,be=0,F=1;be<k;be++,F++){0===(ve=Ve.monthMod(ve))?(U="year",X+=1):U="month";var K=this._getYear(y,ve,X);he=j.determineDaysOfMonths(ve,K)*x+he,this.timeScaleArray.push({position:he,value:0===ve?K:ve,unit:U,year:K,month:0===ve?1:ve}),ve++}}},{key:"generateDayScale",value:function(n){var s=n.firstVal,c=n.currentMonth,g=n.currentYear,y=n.hoursWidthOnXAxis,x=n.numberOfDays,k=new ai(this.ctx),M="day",R=s.minDate+1,j=R,U=function(F,K,ce){return F>k.determineDaysOfMonths(K+1,ce)&&(j=1,M="month",ee=K+=1),K},X=(24-s.minHour)*y,ee=R,ae=U(j,c,g);0===s.minHour&&1===s.minDate?(X=0,ee=Ve.monthMod(s.minMonth),M="month",j=s.minDate):1!==s.minDate&&0===s.minHour&&0===s.minMinute&&(X=0,ee=R=s.minDate,ae=U(j=R,c,g)),this.timeScaleArray.push({position:X,value:ee,unit:M,year:this._getYear(g,ae,0),month:Ve.monthMod(ae),day:j});for(var de=X,ve=0;ve<x;ve++){M="day",ae=U(j+=1,ae,this._getYear(g,ae,0));var he=this._getYear(g,ae,0);de=24*y+de;var be=1===j?Ve.monthMod(ae):j;this.timeScaleArray.push({position:de,value:be,unit:M,year:he,month:Ve.monthMod(ae),day:be})}}},{key:"generateHourScale",value:function(n){var s=n.firstVal,c=n.currentDate,g=n.currentMonth,y=n.currentYear,x=n.minutesWidthOnXAxis,k=n.numberOfHours,M=new ai(this.ctx),R="hour",j=function(_e,Me){return _e>M.determineDaysOfMonths(Me+1,y)&&(ve=1,Me+=1),{month:Me,date:ve}},U=function(_e,Me){return _e>M.determineDaysOfMonths(Me+1,y)?Me+=1:Me},X=60-(s.minMinute+s.minSecond/60),ee=X*x,ae=s.minHour+1,de=ae;60===X&&(ee=0,de=ae=s.minHour);var ve=c;de>=24&&(de=0,ve+=1,R="day");var he=j(ve,g).month;he=U(ve,he),this.timeScaleArray.push({position:ee,value:ae,unit:R,day:ve,hour:de,year:y,month:Ve.monthMod(he)}),de++;for(var be=ee,F=0;F<k;F++){R="hour",de>=24&&(de=0,R="day",he=j(ve+=1,he).month,he=U(ve,he));var K=this._getYear(y,he,0);this.timeScaleArray.push({position:be=60*x+be,value:0===de?ve:de,unit:R,hour:de,day:ve,year:K,month:Ve.monthMod(he)}),de++}}},{key:"generateMinuteScale",value:function(n){for(var R=n.minutesWidthOnXAxis,U=n.numberOfMinutes,X=n.currentMinute+1,ee=n.currentDate,ae=n.currentMonth,de=n.currentYear,ve=n.currentHour,he=(60-n.currentSecond-n.currentMillisecond/1e3)*n.secondsWidthOnXAxis,be=0;be<U;be++)X>=60&&(X=0,24===(ve+=1)&&(ve=0)),this.timeScaleArray.push({position:he,value:X,unit:"minute",hour:ve,minute:X,day:ee,year:this._getYear(de,ae,0),month:Ve.monthMod(ae)}),he+=R,X++}},{key:"generateSecondScale",value:function(n){for(var R=n.secondsWidthOnXAxis,j=n.numberOfSeconds,U=n.currentSecond+1,X=n.currentMinute,ee=n.currentDate,ae=n.currentMonth,de=n.currentYear,ve=n.currentHour,he=(1e3-n.currentMillisecond)/1e3*R,be=0;be<j;be++)U>=60&&(U=0,++X>=60&&(X=0,24==++ve&&(ve=0))),this.timeScaleArray.push({position:he,value:U,unit:"second",hour:ve,minute:X,second:U,day:ee,year:this._getYear(de,ae,0),month:Ve.monthMod(ae)}),he+=R,U++}},{key:"createRawDateString",value:function(n,s){var c=n.year;return 0===n.month&&(n.month=1),c+="-"+("0"+n.month.toString()).slice(-2),c+="day"===n.unit?"day"===n.unit?"-"+("0"+s).slice(-2):"-01":"-"+("0"+(n.day?n.day:"1")).slice(-2),c+="hour"===n.unit?"hour"===n.unit?"T"+("0"+s).slice(-2):"T00":"T"+("0"+(n.hour?n.hour:"0")).slice(-2),c+="minute"===n.unit?":"+("0"+s).slice(-2):":"+(n.minute?("0"+n.minute).slice(-2):"00"),c+="second"===n.unit?":"+("0"+s).slice(-2):":00",this.utc&&(c+=".000Z"),c}},{key:"formatDates",value:function(n){var s=this,c=this.w;return n.map(function(g){var y=g.value.toString(),x=new ai(s.ctx),k=s.createRawDateString(g,y),M=x.getDate(x.parseDate(k));if(s.utc||(M=x.getDate(x.parseDateWithTimezone(k))),void 0===c.config.xaxis.labels.format){var R="dd MMM",j=c.config.xaxis.labels.datetimeFormatter;"year"===g.unit&&(R=j.year),"month"===g.unit&&(R=j.month),"day"===g.unit&&(R=j.day),"hour"===g.unit&&(R=j.hour),"minute"===g.unit&&(R=j.minute),"second"===g.unit&&(R=j.second),y=x.formatDate(M,R)}else y=x.formatDate(M,c.config.xaxis.labels.format);return{dateString:k,position:g.position,value:y,unit:g.unit,year:g.year,month:g.month}})}},{key:"removeOverlappingTS",value:function(n){var s,c=this,g=new rt(this.ctx),y=!1;n.length>0&&n[0].value&&n.every(function(M){return M.value.length===n[0].value.length})&&(y=!0,s=g.getTextRects(n[0].value).width);var x=0;return n.map(function(M,R){if(R>0&&c.w.config.xaxis.labels.hideOverlappingLabels){var j=y?s:g.getTextRects(n[x].value).width;return M.position>n[x].position+j+10?(x=R,M):null}return M}).filter(function(M){return null!==M})}},{key:"_getYear",value:function(n,s,c){return n+Math.floor(s/12)+c}}]),ue}(),Bi=function(){function ue(n,s){Y(this,ue),this.ctx=s,this.w=s.w,this.el=n}return ke(ue,[{key:"setupElements",value:function(){var n=this.w.globals,s=this.w.config,c=s.chart.type;n.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(c)>-1,n.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(c)>-1,n.isBarHorizontal=("bar"===s.chart.type||"rangeBar"===s.chart.type||"boxPlot"===s.chart.type)&&s.plotOptions.bar.horizontal,n.chartClass=".apexcharts"+n.chartID,n.dom.baseEl=this.el,n.dom.elWrap=document.createElement("div"),rt.setAttrs(n.dom.elWrap,{id:n.chartClass.substring(1),class:"apexcharts-canvas "+n.chartClass.substring(1)}),this.el.appendChild(n.dom.elWrap),n.dom.Paper=new window.SVG.Doc(n.dom.elWrap),n.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(s.chart.offsetX,", ").concat(s.chart.offsetY,")")}),n.dom.Paper.node.style.background="dark"!==s.theme.mode||s.chart.background?s.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),n.dom.elLegendForeign=document.createElementNS(n.SVGNS,"foreignObject"),rt.setAttrs(n.dom.elLegendForeign,{x:0,y:0,width:n.svgWidth,height:n.svgHeight}),n.dom.elLegendWrap=document.createElement("div"),n.dom.elLegendWrap.classList.add("apexcharts-legend"),n.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),n.dom.elLegendForeign.appendChild(n.dom.elLegendWrap),n.dom.Paper.node.appendChild(n.dom.elLegendForeign),n.dom.elGraphical=n.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),n.dom.elDefs=n.dom.Paper.defs(),n.dom.Paper.add(n.dom.elGraphical),n.dom.elGraphical.add(n.dom.elDefs)}},{key:"plotChartType",value:function(n,s){var c=this.w,g=c.config,y=c.globals,x={series:[],i:[]},k={series:[],i:[]},M={series:[],i:[]},R={series:[],i:[]},j={series:[],i:[]},U={series:[],i:[]},X={series:[],i:[]},ee={series:[],i:[]},ae={series:[],seriesRangeEnd:[],i:[]};y.series.map(function(Me,$e){var wt=0;void 0!==n[$e].type?("column"===n[$e].type||"bar"===n[$e].type?(y.series.length>1&&g.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),j.series.push(Me),j.i.push($e),wt++,c.globals.columnSeries=j.series):"area"===n[$e].type?(k.series.push(Me),k.i.push($e),wt++):"line"===n[$e].type?(x.series.push(Me),x.i.push($e),wt++):"scatter"===n[$e].type?(M.series.push(Me),M.i.push($e)):"bubble"===n[$e].type?(R.series.push(Me),R.i.push($e),wt++):"candlestick"===n[$e].type?(U.series.push(Me),U.i.push($e),wt++):"boxPlot"===n[$e].type?(X.series.push(Me),X.i.push($e),wt++):"rangeBar"===n[$e].type?(ee.series.push(Me),ee.i.push($e),wt++):"rangeArea"===n[$e].type?(ae.series.push(y.seriesRangeStart[$e]),ae.seriesRangeEnd.push(y.seriesRangeEnd[$e]),ae.i.push($e),wt++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),wt>1&&(y.comboCharts=!0)):(x.series.push(Me),x.i.push($e))});var de=new ht(this.ctx,s),ve=new Gt(this.ctx,s);this.ctx.pie=new bt(this.ctx);var he=new xi(this.ctx);this.ctx.rangeBar=new Ke(this.ctx,s);var be=new Mt(this.ctx),F=[];if(y.comboCharts){if(k.series.length>0&&F.push(de.draw(k.series,"area",k.i)),j.series.length>0)if(c.config.chart.stacked){var K=new Ht(this.ctx,s);F.push(K.draw(j.series,j.i))}else this.ctx.bar=new It(this.ctx,s),F.push(this.ctx.bar.draw(j.series,j.i));if(ae.series.length>0&&F.push(de.draw(ae.series,"rangeArea",ae.i,ae.seriesRangeEnd)),x.series.length>0&&F.push(de.draw(x.series,"line",x.i)),U.series.length>0&&F.push(ve.draw(U.series,"candlestick",U.i)),X.series.length>0&&F.push(ve.draw(X.series,"boxPlot",X.i)),ee.series.length>0&&F.push(this.ctx.rangeBar.draw(ee.series,ee.i)),M.series.length>0){var ce=new ht(this.ctx,s,!0);F.push(ce.draw(M.series,"scatter",M.i))}if(R.series.length>0){var _e=new ht(this.ctx,s,!0);F.push(_e.draw(R.series,"bubble",R.i))}}else switch(g.chart.type){case"line":F=de.draw(y.series,"line");break;case"area":F=de.draw(y.series,"area");break;case"bar":g.chart.stacked?F=new Ht(this.ctx,s).draw(y.series):(this.ctx.bar=new It(this.ctx,s),F=this.ctx.bar.draw(y.series));break;case"candlestick":F=new Gt(this.ctx,s).draw(y.series,"candlestick");break;case"boxPlot":F=new Gt(this.ctx,s).draw(y.series,g.chart.type);break;case"rangeBar":F=this.ctx.rangeBar.draw(y.series);break;case"rangeArea":F=de.draw(y.seriesRangeStart,"rangeArea",void 0,y.seriesRangeEnd);break;case"heatmap":F=new He(this.ctx,s).draw(y.series);break;case"treemap":F=new si(this.ctx,s).draw(y.series);break;case"pie":case"donut":case"polarArea":F=this.ctx.pie.draw(y.series);break;case"radialBar":F=he.draw(y.series);break;case"radar":F=be.draw(y.series);break;default:F=de.draw(y.series)}return F}},{key:"setSVGDimensions",value:function(){var n=this.w.globals,s=this.w.config;n.svgWidth=s.chart.width,n.svgHeight=s.chart.height;var c=Ve.getDimensions(this.el),g=s.chart.width.toString().split(/[0-9]+/g).pop();"%"===g?Ve.isNumber(c[0])&&(0===c[0].width&&(c=Ve.getDimensions(this.el.parentNode)),n.svgWidth=c[0]*parseInt(s.chart.width,10)/100):"px"!==g&&""!==g||(n.svgWidth=parseInt(s.chart.width,10));var y=s.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==n.svgHeight&&""!==n.svgHeight)if("%"===y){var x=Ve.getDimensions(this.el.parentNode);n.svgHeight=x[1]*parseInt(s.chart.height,10)/100}else n.svgHeight=parseInt(s.chart.height,10);else n.svgHeight=n.axisCharts?n.svgWidth/1.61:n.svgWidth/1.2;n.svgWidth<0&&(n.svgWidth=0),n.svgHeight<0&&(n.svgHeight=0),rt.setAttrs(n.dom.Paper.node,{width:n.svgWidth,height:n.svgHeight}),"%"!==y&&(n.dom.Paper.node.parentNode.parentNode.style.minHeight=n.svgHeight+(s.chart.sparkline.enabled?0:n.axisCharts?s.chart.parentHeightOffset:0)+"px"),n.dom.elWrap.style.width=n.svgWidth+"px",n.dom.elWrap.style.height=n.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var n=this.w.globals;rt.setAttrs(n.dom.elGraphical.node,{transform:"translate("+n.translateX+", "+n.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var n=this.w,s=n.globals,c=0,g=n.config.chart.sparkline.enabled?1:15;g+=n.config.grid.padding.bottom,"top"!==n.config.legend.position&&"bottom"!==n.config.legend.position||!n.config.legend.show||n.config.legend.floating||(c=new Sr(this.ctx).legendHelpers.getLegendBBox().clwh+10);var y=n.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),x=2.05*n.globals.radialSize;if(y&&!n.config.chart.sparkline.enabled&&0!==n.config.plotOptions.radialBar.startAngle){var k=Ve.getBoundingClientRect(y);x=k.bottom,x=Math.max(2.05*n.globals.radialSize,k.bottom-k.top)}var R=x+s.translateY+c+g;s.dom.elLegendForeign&&s.dom.elLegendForeign.setAttribute("height",R),n.config.chart.height&&String(n.config.chart.height).indexOf("%")>0||(s.dom.elWrap.style.height=R+"px",rt.setAttrs(s.dom.Paper.node,{height:R}),s.dom.Paper.node.parentNode.parentNode.style.minHeight=R+"px")}},{key:"coreCalculations",value:function(){new cn(this.ctx).init()}},{key:"resetGlobals",value:function(){var n=this,s=function(){return n.w.config.series.map(function(y){return[]})},c=new zn,g=this.w.globals;c.initGlobalVars(g),g.seriesXvalues=s(),g.seriesYvalues=s()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var n=null,s=this.w;if(s.globals.axisCharts){if("back"===s.config.xaxis.crosshairs.position&&new gi(this.ctx).drawXCrosshairs(),"back"===s.config.yaxis[0].crosshairs.position&&new gi(this.ctx).drawYCrosshairs(),"datetime"===s.config.xaxis.type&&void 0===s.config.xaxis.labels.formatter){this.ctx.timeScale=new Qi(this.ctx);var c=[];isFinite(s.globals.minX)&&isFinite(s.globals.maxX)&&!s.globals.isBarHorizontal?c=this.ctx.timeScale.calculateTimeScaleTicks(s.globals.minX,s.globals.maxX):s.globals.isBarHorizontal&&(c=this.ctx.timeScale.calculateTimeScaleTicks(s.globals.minY,s.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(c)}n=new Kt(this.ctx).getCalculatedRatios()}return n}},{key:"updateSourceChart",value:function(n){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:n.w.globals.minX,max:n.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var n=this,s=this.w;if(s.config.chart.brush.enabled&&"function"!=typeof s.config.chart.events.selection){var c=Array.isArray(s.config.chart.brush.targets)?s.config.chart.brush.targets:[s.config.chart.brush.target];c.forEach(function(g){var y=ApexCharts.getChartByID(g);y.w.globals.brushSource=n.ctx,"function"!=typeof y.w.config.chart.events.zoomed&&(y.w.config.chart.events.zoomed=function(){n.updateSourceChart(y)}),"function"!=typeof y.w.config.chart.events.scrolled&&(y.w.config.chart.events.scrolled=function(){n.updateSourceChart(y)})}),s.config.chart.events.selection=function(g,y){c.forEach(function(x){ApexCharts.getChartByID(x).ctx.updateHelpers._updateOptions({xaxis:{min:y.xaxis.min,max:y.xaxis.max}},!1,!1,!1,!1)})}}}}]),ue}(),Tn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"_updateOptions",value:function(n){var s=this,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],y=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],x=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(k){var M=[s.ctx];y&&(M=s.ctx.getSyncedCharts()),s.ctx.w.globals.isExecCalled&&(M=[s.ctx],s.ctx.w.globals.isExecCalled=!1),M.forEach(function(R,j){var U=R.w;if(U.globals.shouldAnimate=g,c||(U.globals.resized=!0,U.globals.dataChanged=!0,g&&R.series.getPreviousPaths()),n&&"object"===e(n)&&(R.config=new ln(n),n=Kt.extendArrayProps(R.config,n,U),R.w.globals.chartID!==s.ctx.w.globals.chartID&&delete n.series,U.config=Ve.extend(U.config,n),x&&(U.globals.lastXAxis=n.xaxis?Ve.clone(n.xaxis):[],U.globals.lastYAxis=n.yaxis?Ve.clone(n.yaxis):[],U.globals.initialConfig=Ve.extend({},U.config),U.globals.initialSeries=Ve.clone(U.config.series),n.series))){for(var X=0;X<U.globals.collapsedSeriesIndices.length;X++){var ee=U.config.series[U.globals.collapsedSeriesIndices[X]];U.globals.collapsedSeries[X].data=U.globals.axisCharts?ee.data.slice():ee}for(var ae=0;ae<U.globals.ancillaryCollapsedSeriesIndices.length;ae++){var de=U.config.series[U.globals.ancillaryCollapsedSeriesIndices[ae]];U.globals.ancillaryCollapsedSeries[ae].data=U.globals.axisCharts?de.data.slice():de}R.series.emptyCollapsedSeries(U.config.series)}return R.update(n).then(function(){j===M.length-1&&k(R)})})})}},{key:"_updateSeries",value:function(n,s){var c=this,g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(y){var x,k=c.w;return k.globals.shouldAnimate=s,k.globals.dataChanged=!0,s&&c.ctx.series.getPreviousPaths(),k.globals.axisCharts?(0===(x=n.map(function(M,R){return c._extendSeries(M,R)})).length&&(x=[{data:[]}]),k.config.series=x):k.config.series=n.slice(),g&&(k.globals.initialConfig.series=Ve.clone(k.config.series),k.globals.initialSeries=Ve.clone(k.config.series)),c.ctx.update().then(function(){y(c.ctx)})})}},{key:"_extendSeries",value:function(n,s){var c=this.w,g=c.config.series[s];return Re(Re({},c.config.series[s]),{},{name:n.name?n.name:g?.name,color:n.color?n.color:g?.color,type:n.type?n.type:g?.type,group:n.group?n.group:g?.group,data:n.data?n.data:g?.data,zIndex:void 0!==n.zIndex?n.zIndex:s})}},{key:"toggleDataPointSelection",value:function(n,s){var c=this.w,g=null,y=".apexcharts-series[data\\:realIndex='".concat(n,"']");return c.globals.axisCharts?g=c.globals.dom.Paper.select("".concat(y," path[j='").concat(s,"'], ").concat(y," circle[j='").concat(s,"'], ").concat(y," rect[j='").concat(s,"']")).members[0]:void 0===s&&(g=c.globals.dom.Paper.select("".concat(y," path[j='").concat(n,"']")).members[0],"pie"!==c.config.chart.type&&"polarArea"!==c.config.chart.type&&"donut"!==c.config.chart.type||this.ctx.pie.pieClicked(n)),g?(new rt(this.ctx).pathMouseDown(g,null),g.node?g.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(n){var s=this.w;if(["min","max"].forEach(function(g){void 0!==n.xaxis[g]&&(s.config.xaxis[g]=n.xaxis[g],s.globals.lastXAxis[g]=n.xaxis[g])}),n.xaxis.categories&&n.xaxis.categories.length&&(s.config.xaxis.categories=n.xaxis.categories),s.config.xaxis.convertedCatToNumeric){var c=new mn(n);n=c.convertCatToNumericXaxis(n,this.ctx)}return n}},{key:"forceYAxisUpdate",value:function(n){return n.chart&&n.chart.stacked&&"100%"===n.chart.stackType&&(Array.isArray(n.yaxis)?n.yaxis.forEach(function(s,c){n.yaxis[c].min=0,n.yaxis[c].max=100}):(n.yaxis.min=0,n.yaxis.max=100)),n}},{key:"revertDefaultAxisMinMax",value:function(n){var s=this,c=this.w,g=c.globals.lastXAxis,y=c.globals.lastYAxis;n&&n.xaxis&&(g=n.xaxis),n&&n.yaxis&&(y=n.yaxis),c.config.xaxis.min=g.min,c.config.xaxis.max=g.max,c.config.yaxis.map(function(k,M){c.globals.zoomed||void 0!==y[M]?function(k){void 0!==y[k]&&(c.config.yaxis[k].min=y[k].min,c.config.yaxis[k].max=y[k].max)}(M):void 0!==s.ctx.opts.yaxis[M]&&(k.min=s.ctx.opts.yaxis[M].min,k.max=s.ctx.opts.yaxis[M].max)})}}]),ue}();Rt=typeof window<"u"?window:void 0,pi=function(ue,n){var s=(void 0!==this?this:ue).SVG=function(F){if(s.supported)return F=new s.Doc(F),s.parser.draw||s.prepare(),F};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.svgjs="http://svgjs.dev",s.supported=!0,!s.supported)return!1;s.did=1e3,s.eid=function(F){return"Svgjs"+j(F)+s.did++},s.create=function(F){var K=n.createElementNS(this.ns,F);return K.setAttribute("id",this.eid(F)),K},s.extend=function(){var F,K;K=(F=[].slice.call(arguments)).pop();for(var ce=F.length-1;ce>=0;ce--)if(F[ce])for(var _e in K)F[ce].prototype[_e]=K[_e];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(F){var K="function"==typeof F.create?F.create:function(){this.constructor.call(this,s.create(F.create))};return F.inherit&&(K.prototype=new F.inherit),F.extend&&s.extend(K,F.extend),F.construct&&s.extend(F.parent||s.Container,F.construct),K},s.adopt=function(F){return F?F.instance?F.instance:((K="svg"==F.nodeName?F.parentNode instanceof ue.SVGElement?new s.Nested:new s.Doc:"linearGradient"==F.nodeName?new s.Gradient("linear"):"radialGradient"==F.nodeName?new s.Gradient("radial"):s[j(F.nodeName)]?new(s[j(F.nodeName)]):new s.Element(F)).type=F.nodeName,K.node=F,F.instance=K,K instanceof s.Doc&&K.namespace().defs(),K.setData(JSON.parse(F.getAttribute("svgjs:data"))||{}),K):null;var K},s.prepare=function(){var F=n.getElementsByTagName("body")[0],K=(F?new s.Doc(F):s.adopt(n.documentElement).nested()).size(2,0);s.parser={body:F||n.documentElement,draw:K.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:K.polyline().node,path:K.path().node,native:s.create("svg")}},s.parser={native:s.create("svg")},n.addEventListener("DOMContentLoaded",function(){s.parser.draw||s.prepare()},!1),s.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},s.utils={map:function(F,K){for(var ce=F.length,_e=[],Me=0;Me<ce;Me++)_e.push(K(F[Me]));return _e},filter:function(F,K){for(var ce=F.length,_e=[],Me=0;Me<ce;Me++)K(F[Me])&&_e.push(F[Me]);return _e},filterSVGElements:function(F){return this.filter(F,function(K){return K instanceof ue.SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(F){var K,ce;this.r=0,this.g=0,this.b=0,F&&("string"==typeof F?s.regex.isRgb.test(F)?(K=s.regex.rgb.exec(F.replace(s.regex.whitespace,"")),this.r=parseInt(K[1]),this.g=parseInt(K[2]),this.b=parseInt(K[3])):s.regex.isHex.test(F)&&(K=s.regex.hex.exec(4==(ce=F).length?["#",ce.substring(1,2),ce.substring(1,2),ce.substring(2,3),ce.substring(2,3),ce.substring(3,4),ce.substring(3,4)].join(""):ce),this.r=parseInt(K[1],16),this.g=parseInt(K[2],16),this.b=parseInt(K[3],16)):"object"===e(F)&&(this.r=F.r,this.g=F.g,this.b=F.b))},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+U(this.r)+U(this.g)+U(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(F){return this.destination=new s.Color(F),this},at:function(F){return this.destination?new s.Color({r:~~(this.r+(this.destination.r-this.r)*(F=F<0?0:F>1?1:F)),g:~~(this.g+(this.destination.g-this.g)*F),b:~~(this.b+(this.destination.b-this.b)*F)}):this}}),s.Color.test=function(F){return s.regex.isHex.test(F+="")||s.regex.isRgb.test(F)},s.Color.isRgb=function(F){return F&&"number"==typeof F.r&&"number"==typeof F.g&&"number"==typeof F.b},s.Color.isColor=function(F){return s.Color.isRgb(F)||s.Color.test(F)},s.Array=function(F,K){0==(F=(F||[]).valueOf()).length&&K&&(F=K.valueOf()),this.value=this.parse(F)},s.extend(s.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(F){return F=F.valueOf(),Array.isArray(F)?F:this.split(F)}}),s.PointArray=function(F,K){s.Array.call(this,F,K||[[0,0]])},s.PointArray.prototype=new s.Array,s.PointArray.prototype.constructor=s.PointArray;for(var c={M:function(F,K,ce){return K.x=ce.x=F[0],K.y=ce.y=F[1],["M",K.x,K.y]},L:function(F,K){return K.x=F[0],K.y=F[1],["L",F[0],F[1]]},H:function(F,K){return K.x=F[0],["H",F[0]]},V:function(F,K){return K.y=F[0],["V",F[0]]},C:function(F,K){return K.x=F[4],K.y=F[5],["C",F[0],F[1],F[2],F[3],F[4],F[5]]},Q:function(F,K){return K.x=F[2],K.y=F[3],["Q",F[0],F[1],F[2],F[3]]},S:function(F,K){return K.x=F[2],K.y=F[3],["S",F[0],F[1],F[2],F[3]]},Z:function(F,K,ce){return K.x=ce.x,K.y=ce.y,["Z"]}},g="mlhvqtcsaz".split(""),y=0,x=g.length;y<x;++y)c[g[y]]=function(F){return function(K,ce,_e){if("H"==F)K[0]=K[0]+ce.x;else if("V"==F)K[0]=K[0]+ce.y;else if("A"==F)K[5]=K[5]+ce.x,K[6]=K[6]+ce.y;else for(var Me=0,$e=K.length;Me<$e;++Me)K[Me]=K[Me]+(Me%2?ce.y:ce.x);if(c&&"function"==typeof c[F])return c[F](K,ce,_e)}}(g[y].toUpperCase());s.PathArray=function(F,K){s.Array.call(this,F,K||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.PathArray.prototype.constructor=s.PathArray,s.extend(s.PathArray,{toString:function(){return function(F){for(var K=0,ce=F.length,_e="";K<ce;K++)_e+=F[K][0],null!=F[K][1]&&(_e+=F[K][1],null!=F[K][2]&&(_e+=" ",_e+=F[K][2],null!=F[K][3]&&(_e+=" ",_e+=F[K][3],_e+=" ",_e+=F[K][4],null!=F[K][5]&&(_e+=" ",_e+=F[K][5],_e+=" ",_e+=F[K][6],null!=F[K][7]&&(_e+=" ",_e+=F[K][7])))));return _e+" "}(this.value)},move:function(F,K){return this.bbox(),this},at:function(F){if(!this.destination)return this;for(var K=this.value,ce=this.destination.value,_e=[],Me=new s.PathArray,$e=0,wt=K.length;$e<wt;$e++){_e[$e]=[K[$e][0]];for(var kt=1,Wt=K[$e].length;kt<Wt;kt++)_e[$e][kt]=K[$e][kt]+(ce[$e][kt]-K[$e][kt])*F;"A"===_e[$e][0]&&(_e[$e][4]=+(0!=_e[$e][4]),_e[$e][5]=+(0!=_e[$e][5]))}return Me.value=_e,Me},parse:function(F){if(F instanceof s.PathArray)return F.valueOf();var K,ce={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};F="string"==typeof F?F.replace(s.regex.numbersWithDots,M).replace(s.regex.pathLetters," $& ").replace(s.regex.hyphen,"$1 -").trim().split(s.regex.delimiter):F.reduce(function(Wt,hi){return[].concat.call(Wt,hi)},[]);var _e=[],Me=new s.Point,$e=new s.Point,wt=0,kt=F.length;do{s.regex.isPathLetter.test(F[wt])?(K=F[wt],++wt):"M"==K?K="L":"m"==K&&(K="l"),_e.push(c[K].call(null,F.slice(wt,wt+=ce[K.toUpperCase()]).map(parseFloat),Me,$e))}while(kt>wt);return _e},bbox:function(){return s.parser.draw||s.prepare(),s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(F,K){this.value=0,this.unit=K||"","number"==typeof F?this.value=isNaN(F)?0:isFinite(F)?F:F<0?-34e37:34e37:"string"==typeof F?(K=F.match(s.regex.numberAndUnit))&&(this.value=parseFloat(K[1]),"%"==K[5]?this.value/=100:"s"==K[5]&&(this.value*=1e3),this.unit=K[5]):F instanceof s.Number&&(this.value=F.valueOf(),this.unit=F.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(F){return F=new s.Number(F),new s.Number(this+F,this.unit||F.unit)},minus:function(F){return F=new s.Number(F),new s.Number(this-F,this.unit||F.unit)},times:function(F){return F=new s.Number(F),new s.Number(this*F,this.unit||F.unit)},divide:function(F){return F=new s.Number(F),new s.Number(this/F,this.unit||F.unit)},to:function(F){var K=new s.Number(this);return"string"==typeof F&&(K.unit=F),K},morph:function(F){return this.destination=new s.Number(F),F.relative&&(this.destination.value+=this.value),this},at:function(F){return this.destination?new s.Number(this.destination).minus(this).times(F).plus(this):this}}}),s.Element=s.invent({create:function(F){this._stroke=s.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=F)&&(this.type=F.nodeName,this.node.instance=this,this._stroke=F.getAttribute("stroke")||this._stroke)},extend:{x:function(F){return this.attr("x",F)},y:function(F){return this.attr("y",F)},cx:function(F){return null==F?this.x()+this.width()/2:this.x(F-this.width()/2)},cy:function(F){return null==F?this.y()+this.height()/2:this.y(F-this.height()/2)},move:function(F,K){return this.x(F).y(K)},center:function(F,K){return this.cx(F).cy(K)},width:function(F){return this.attr("width",F)},height:function(F){return this.attr("height",F)},size:function(F,K){var ce=X(this,F,K);return this.width(new s.Number(ce.width)).height(new s.Number(ce.height))},clone:function(F){this.writeDataToDom();var K=de(this.node.cloneNode(!0));return F?F.add(K):this.after(K),K},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(F){return this.after(F).remove(),F},addTo:function(F){return F.put(this)},putIn:function(F){return F.add(this)},id:function(F){return this.attr("id",F)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var F=this.attr("class");return null==F?[]:F.trim().split(s.regex.delimiter)},hasClass:function(F){return-1!=this.classes().indexOf(F)},addClass:function(F){if(!this.hasClass(F)){var K=this.classes();K.push(F),this.attr("class",K.join(" "))}return this},removeClass:function(F){return this.hasClass(F)&&this.attr("class",this.classes().filter(function(K){return K!=F}).join(" ")),this},toggleClass:function(F){return this.hasClass(F)?this.removeClass(F):this.addClass(F)},reference:function(F){return s.get(this.attr(F))},parent:function(F){var K=this;if(!K.node.parentNode)return null;if(K=s.adopt(K.node.parentNode),!F)return K;for(;K&&K.node instanceof ue.SVGElement;){if("string"==typeof F?K.matches(F):K instanceof F)return K;if(!K.node.parentNode||"#document"==K.node.parentNode.nodeName)return null;K=s.adopt(K.node.parentNode)}},doc:function(){return this instanceof s.Doc?this:this.parent(s.Doc)},parents:function(F){var K=[],ce=this;do{if(!(ce=ce.parent(F))||!ce.node)break;K.push(ce)}while(ce.parent);return K},matches:function(F){return((K=this.node).matches||K.matchesSelector||K.msMatchesSelector||K.mozMatchesSelector||K.webkitMatchesSelector||K.oMatchesSelector).call(K,F);var K},native:function(){return this.node},svg:function(F){var K=n.createElement("svg");if(!(F&&this instanceof s.Parent))return K.appendChild(F=n.createElement("svg")),this.writeDataToDom(),F.appendChild(this.node.cloneNode(!0)),K.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");K.innerHTML="<svg>"+F.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var ce=0,_e=K.firstChild.childNodes.length;ce<_e;ce++)this.node.appendChild(K.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(F){return this.dom=F,this},is:function(F){return this instanceof F}}}),s.easing={"-":function(F){return F},"<>":function(F){return-Math.cos(F*Math.PI)/2+.5},">":function(F){return Math.sin(F*Math.PI/2)},"<":function(F){return 1-Math.cos(F*Math.PI/2)}},s.morph=function(F){return function(K,ce){return new s.MorphObj(K,ce).at(F)}},s.Situation=s.invent({create:function(F){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new s.Number(F.duration).valueOf(),this.delay=new s.Number(F.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=F.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),s.FX=s.invent({create:function(F){this._target=F,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(F,K,ce){"object"===e(F)&&(K=F.ease,ce=F.delay,F=F.duration);var _e=new s.Situation({duration:F||1e3,delay:ce||0,ease:s.easing[K||"-"]||K});return this.queue(_e),this},target:function(F){return F&&F instanceof s.Element?(this._target=F,this):this._target},timeToAbsPos:function(F){return(F-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(F){return this.situation.duration/this._speed*F+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=ue.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){ue.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(F){return("function"==typeof F||F instanceof s.Situation)&&this.situations.push(F),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof s.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var F,K=this.situation;if(K.init)return this;for(var ce in K.animations){F=this.target()[ce](),Array.isArray(F)||(F=[F]),Array.isArray(K.animations[ce])||(K.animations[ce]=[K.animations[ce]]);for(var _e=F.length;_e--;)K.animations[ce][_e]instanceof s.Number&&(F[_e]=new s.Number(F[_e])),K.animations[ce][_e]=F[_e].morph(K.animations[ce][_e])}for(var ce in K.attrs)K.attrs[ce]=new s.MorphObj(this.target().attr(ce),K.attrs[ce]);for(var ce in K.styles)K.styles[ce]=new s.MorphObj(this.target().style(ce),K.styles[ce]);return K.initialTransformation=this.target().matrixify(),K.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(F,K){var ce=this.active;return this.active=!1,K&&this.clearQueue(),F&&this.situation&&(!ce&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(F){var K=this.last();return this.target().on("finished.fx",function ce(_e){_e.detail.situation==K&&(F.call(this,K),this.off("finished.fx",ce))}),this._callStart()},during:function(F){var K=this.last(),ce=function(_e){_e.detail.situation==K&&F.call(this,_e.detail.pos,s.morph(_e.detail.pos),_e.detail.eased,K)};return this.target().off("during.fx",ce).on("during.fx",ce),this.after(function(){this.off("during.fx",ce)}),this._callStart()},afterAll:function(F){var K=function ce(_e){F.call(this),this.off("allfinished.fx",ce)};return this.target().off("allfinished.fx",K).on("allfinished.fx",K),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(F,K,ce){return this.last()[ce||"animations"][F]=K,this._callStart()},step:function(F){var K,ce,_e;F||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(K=Math.max(this.absPos,0),ce=Math.floor(K),!0===this.situation.loops||ce<this.situation.loops?(this.pos=K-ce,_e=this.situation.loop,this.situation.loop=ce):(this.absPos=this.situation.loops,this.pos=1,_e=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-_e)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Me=this.situation.ease(this.pos);for(var $e in this.situation.once)$e>this.lastPos&&$e<=Me&&(this.situation.once[$e].call(this.target(),this.pos,Me),delete this.situation.once[$e]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Me,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Me,this):this},eachAt:function(){var F,K=this,ce=this.target(),_e=this.situation;for(var Me in _e.animations)F=[].concat(_e.animations[Me]).map(function(kt){return"string"!=typeof kt&&kt.at?kt.at(_e.ease(K.pos),K.pos):kt}),ce[Me].apply(ce,F);for(var Me in _e.attrs)F=[Me].concat(_e.attrs[Me]).map(function(Wt){return"string"!=typeof Wt&&Wt.at?Wt.at(_e.ease(K.pos),K.pos):Wt}),ce.attr.apply(ce,F);for(var Me in _e.styles)F=[Me].concat(_e.styles[Me]).map(function(Wt){return"string"!=typeof Wt&&Wt.at?Wt.at(_e.ease(K.pos),K.pos):Wt}),ce.style.apply(ce,F);if(_e.transforms.length){F=_e.initialTransformation,Me=0;for(var $e=_e.transforms.length;Me<$e;Me++){var wt=_e.transforms[Me];wt instanceof s.Matrix?F=wt.relative?F.multiply((new s.Matrix).morph(wt).at(_e.ease(this.pos))):F.morph(wt).at(_e.ease(this.pos)):(wt.relative||wt.undo(F.extract()),F=F.multiply(wt.at(_e.ease(this.pos))))}ce.matrix(F)}return this},once:function(F,K,ce){var _e=this.last();return ce||(F=_e.ease(F)),_e.once[F]=K,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:s.Element,construct:{animate:function(F,K,ce){return(this.fx||(this.fx=new s.FX(this))).animate(F,K,ce)},delay:function(F){return(this.fx||(this.fx=new s.FX(this))).delay(F)},stop:function(F,K){return this.fx&&this.fx.stop(F,K),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),s.MorphObj=s.invent({create:function(F,K){return s.Color.isColor(K)?new s.Color(F).morph(K):s.regex.delimiter.test(F)?s.regex.pathLetters.test(F)?new s.PathArray(F).morph(K):new s.Array(F).morph(K):s.regex.numberAndUnit.test(K)?new s.Number(F).morph(K):(this.value=F,void(this.destination=K))},extend:{at:function(F,K){return K<1?this.value:this.destination},valueOf:function(){return this.value}}}),s.extend(s.FX,{attr:function(F,K,ce){if("object"===e(F))for(var _e in F)this.attr(_e,F[_e]);else this.add(F,K,"attrs");return this},plot:function(F,K,ce,_e){return 4==arguments.length?this.plot([F,K,ce,_e]):this.add("plot",new(this.target().morphArray)(F))}}),s.Box=s.invent({create:function(F,K,ce,_e){if(!("object"!==e(F)||F instanceof s.Element))return s.Box.call(this,null!=F.left?F.left:F.x,null!=F.top?F.top:F.y,F.width,F.height);var Me;4==arguments.length&&(this.x=F,this.y=K,this.width=ce,this.height=_e),null==(Me=this).x&&(Me.x=0,Me.y=0,Me.width=0,Me.height=0),Me.w=Me.width,Me.h=Me.height,Me.x2=Me.x+Me.width,Me.y2=Me.y+Me.height,Me.cx=Me.x+Me.width/2,Me.cy=Me.y+Me.height/2}}),s.BBox=s.invent({create:function(F){if(s.Box.apply(this,[].slice.call(arguments)),F instanceof s.Element){var K;try{if(!n.documentElement.contains){for(var ce=F.node;ce.parentNode;)ce=ce.parentNode;if(ce!=n)throw new Error("Element not in the dom")}K=F.node.getBBox()}catch{if(F instanceof s.Shape){s.parser.draw||s.prepare();var _e=F.clone(s.parser.draw.instance).show();_e&&_e.node&&"function"==typeof _e.node.getBBox&&(K=_e.node.getBBox()),_e&&"function"==typeof _e.remove&&_e.remove()}else K={x:F.node.clientLeft,y:F.node.clientTop,width:F.node.clientWidth,height:F.node.clientHeight}}s.Box.call(this,K)}},inherit:s.Box,parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.BBox.prototype.constructor=s.BBox,s.Matrix=s.invent({create:function(F){var K=ae([1,0,0,1,0,0]);F=null===F?K:F instanceof s.Element?F.matrixify():"string"==typeof F?ae(F.split(s.regex.delimiter).map(parseFloat)):6==arguments.length?ae([].slice.call(arguments)):Array.isArray(F)?ae(F):F&&"object"===e(F)?F:K;for(var ce=he.length-1;ce>=0;--ce)this[he[ce]]=null!=F[he[ce]]?F[he[ce]]:K[he[ce]]},extend:{extract:function(){var F=ee(this,0,1);ee(this,1,0);var K=180/Math.PI*Math.atan2(F.y,F.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(K*Math.PI/180)+this.f*Math.sin(K*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(K*Math.PI/180)+this.e*Math.sin(-K*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:K,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new s.Matrix(this)}},clone:function(){return new s.Matrix(this)},morph:function(F){return this.destination=new s.Matrix(F),this},multiply:function(F){return new s.Matrix(this.native().multiply((K=F,K instanceof s.Matrix||(K=new s.Matrix(K)),K).native()));var K},inverse:function(){return new s.Matrix(this.native().inverse())},translate:function(F,K){return new s.Matrix(this.native().translate(F||0,K||0))},native:function(){for(var F=s.parser.native.createSVGMatrix(),K=he.length-1;K>=0;K--)F[he[K]]=this[he[K]];return F},toString:function(){return"matrix("+ve(this.a)+","+ve(this.b)+","+ve(this.c)+","+ve(this.d)+","+ve(this.e)+","+ve(this.f)+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof s.Nested){var F=this.rect(1,1),K=F.node.getScreenCTM();return F.remove(),new s.Matrix(K)}return new s.Matrix(this.node.getScreenCTM())}}}),s.Point=s.invent({create:function(F,K){var ce;ce=Array.isArray(F)?{x:F[0],y:F[1]}:"object"===e(F)?{x:F.x,y:F.y}:null!=F?{x:F,y:K??F}:{x:0,y:0},this.x=ce.x,this.y=ce.y},extend:{clone:function(){return new s.Point(this)},morph:function(F,K){return this.destination=new s.Point(F,K),this}}}),s.extend(s.Element,{point:function(F,K){return new s.Point(F,K).transform(this.screenCTM().inverse())}}),s.extend(s.Element,{attr:function(F,K,ce){if(null==F){for(F={},ce=(K=this.node.attributes).length-1;ce>=0;ce--)F[K[ce].nodeName]=s.regex.isNumber.test(K[ce].nodeValue)?parseFloat(K[ce].nodeValue):K[ce].nodeValue;return F}if("object"===e(F))for(var _e in F)this.attr(_e,F[_e]);else if(null===K)this.node.removeAttribute(F);else{if(null==K)return null==(K=this.node.getAttribute(F))?s.defaults.attrs[F]:s.regex.isNumber.test(K)?parseFloat(K):K;"stroke-width"==F?this.attr("stroke",parseFloat(K)>0?this._stroke:null):"stroke"==F&&(this._stroke=K),"fill"!=F&&"stroke"!=F||(s.regex.isImage.test(K)&&(K=this.doc().defs().image(K,0,0)),K instanceof s.Image&&(K=this.doc().defs().pattern(0,0,function(){this.add(K)}))),"number"==typeof K?K=new s.Number(K):s.Color.isColor(K)?K=new s.Color(K):Array.isArray(K)&&(K=new s.Array(K)),"leading"==F?this.leading&&this.leading(K):"string"==typeof ce?this.node.setAttributeNS(ce,F,K.toString()):this.node.setAttribute(F,K.toString()),!this.rebuild||"font-size"!=F&&"x"!=F||this.rebuild(F,K)}return this}}),s.extend(s.Element,{transform:function(F,K){var ce;return"object"!==e(F)?(ce=new s.Matrix(this).extract(),"string"==typeof F?ce[F]:ce):(ce=new s.Matrix(this),K=!!K||!!F.relative,null!=F.a&&(ce=K?ce.multiply(new s.Matrix(F)):new s.Matrix(F)),this.attr("transform",ce))}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(s.regex.transforms).slice(0,-1).map(function(F){var K=F.trim().split("(");return[K[0],K[1].split(s.regex.delimiter).map(function(ce){return parseFloat(ce)})]}).reduce(function(F,K){return"matrix"==K[0]?F.multiply(ae(K[1])):F[K[0]].apply(F,K[1])},new s.Matrix)},toParent:function(F){if(this==F)return this;var K=this.screenCTM(),ce=F.screenCTM().inverse();return this.addTo(F).untransform().transform(ce.multiply(K)),this},toDoc:function(){return this.toParent(this.doc())}}),s.Transformation=s.invent({create:function(F,K){if(arguments.length>1&&"boolean"!=typeof K)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(F))for(var ce=0,_e=this.arguments.length;ce<_e;++ce)this[this.arguments[ce]]=F[ce];else if(F&&"object"===e(F))for(ce=0,_e=this.arguments.length;ce<_e;++ce)this[this.arguments[ce]]=F[this.arguments[ce]];this.inversed=!1,!0===K&&(this.inversed=!0)}}),s.Translate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(F,K){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),s.extend(s.Element,{style:function(F,K){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===e(F))for(var ce in F)this.style(ce,F[ce]);else{if(!s.regex.isCss.test(F))return this.node.style[R(F)];for(F=F.split(/\s*;\s*/).filter(function(_e){return!!_e}).map(function(_e){return _e.split(/\s*:\s*/)});K=F.pop();)this.style(K[0],K[1])}else this.node.style[R(F)]=null===K||s.regex.isBlank.test(K)?"":K;return this}}),s.Parent=s.invent({create:function(F){this.constructor.call(this,F)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(F){return s.adopt(F)})},add:function(F,K){return null==K?this.node.appendChild(F.node):F.node!=this.node.childNodes[K]&&this.node.insertBefore(F.node,this.node.childNodes[K]),this},put:function(F,K){return this.add(F,K),F},has:function(F){return this.index(F)>=0},index:function(F){return[].slice.call(this.node.childNodes).indexOf(F.node)},get:function(F){return s.adopt(this.node.childNodes[F])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(F,K){for(var ce=this.children(),_e=0,Me=ce.length;_e<Me;_e++)ce[_e]instanceof s.Element&&F.apply(ce[_e],[_e,ce]),K&&ce[_e]instanceof s.Container&&ce[_e].each(F,K);return this},removeElement:function(F){return this.node.removeChild(F.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.extend(s.Parent,{ungroup:function(F,K){return 0===K||this instanceof s.Defs||this.node==s.parser.draw||(F=F||(this instanceof s.Doc?this:this.parent(s.Parent)),K=K||1/0,this.each(function(){return this instanceof s.Defs?this:this instanceof s.Parent?this.ungroup(F,K-1):this.toParent(F)}),this.node.firstChild||this.remove()),this},flatten:function(F,K){return this.ungroup(F,K)}}),s.Container=s.invent({create:function(F){this.constructor.call(this,F)},inherit:s.Parent}),s.ViewBox=s.invent({parent:s.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(F){s.Element.prototype[F]=function(K){return s.on(this.node,F,K),this}}),s.listeners=[],s.handlerMap=[],s.listenerId=0,s.on=function(F,K,ce,_e,Me){var $e=ce.bind(_e||F.instance||F),wt=(s.handlerMap.indexOf(F)+1||s.handlerMap.push(F))-1,kt=K.split(".")[0],Wt=K.split(".")[1]||"*";s.listeners[wt]=s.listeners[wt]||{},s.listeners[wt][kt]=s.listeners[wt][kt]||{},s.listeners[wt][kt][Wt]=s.listeners[wt][kt][Wt]||{},ce._svgjsListenerId||(ce._svgjsListenerId=++s.listenerId),s.listeners[wt][kt][Wt][ce._svgjsListenerId]=$e,F.addEventListener(kt,$e,Me||{passive:!1})},s.off=function(F,K,ce){var _e=s.handlerMap.indexOf(F),Me=K&&K.split(".")[0],$e=K&&K.split(".")[1],wt="";if(-1!=_e)if(ce){if("function"==typeof ce&&(ce=ce._svgjsListenerId),!ce)return;s.listeners[_e][Me]&&s.listeners[_e][Me][$e||"*"]&&(F.removeEventListener(Me,s.listeners[_e][Me][$e||"*"][ce],!1),delete s.listeners[_e][Me][$e||"*"][ce])}else if($e&&Me){if(s.listeners[_e][Me]&&s.listeners[_e][Me][$e]){for(var kt in s.listeners[_e][Me][$e])s.off(F,[Me,$e].join("."),kt);delete s.listeners[_e][Me][$e]}}else if($e)for(var Wt in s.listeners[_e])for(var wt in s.listeners[_e][Wt])$e===wt&&s.off(F,[Wt,$e].join("."));else if(Me){if(s.listeners[_e][Me]){for(var wt in s.listeners[_e][Me])s.off(F,[Me,wt].join("."));delete s.listeners[_e][Me]}}else{for(var Wt in s.listeners[_e])s.off(F,Wt);delete s.listeners[_e],delete s.handlerMap[_e]}},s.extend(s.Element,{on:function(F,K,ce,_e){return s.on(this.node,F,K,ce,_e),this},off:function(F,K){return s.off(this.node,F,K),this},fire:function(F,K){return this.node.dispatchEvent(F instanceof ue.Event?F:F=new s.CustomEvent(F,{detail:K,cancelable:!0})),this._event=F,this},event:function(){return this._event}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(F){return null==F?this.transform("x"):this.transform({x:F-this.x()},!0)}},construct:{group:function(){return this.put(new s.G)}}}),s.Doc=s.invent({create:function(F){F&&("svg"==(F="string"==typeof F?n.getElementById(F):F).nodeName?this.constructor.call(this,F):(this.constructor.call(this,s.create("svg")),F.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns).attr("xmlns:svgjs",s.svgjs,s.xmlns)},defs:function(){var F;return this._defs||(this._defs=(F=this.node.getElementsByTagName("defs")[0])?s.adopt(F):new s.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,s.parser.draw&&!s.parser.draw.parentNode&&this.node.appendChild(s.parser.draw),this},clone:function(F){this.writeDataToDom();var K=this.node,ce=de(K.cloneNode(!0));return F?(F.node||F).appendChild(ce.node):K.parentNode.insertBefore(ce.node,K.nextSibling),ce}}}),s.extend(s.Element,{}),s.Gradient=s.invent({create:function(F){this.constructor.call(this,s.create(F+"Gradient")),this.type=F},inherit:s.Container,extend:{at:function(F,K,ce){return this.put(new s.Stop).update(F,K,ce)},update:function(F){return this.clear(),"function"==typeof F&&F.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(F,K,ce){return"transform"==F&&(F="gradientTransform"),s.Container.prototype.attr.call(this,F,K,ce)}},construct:{gradient:function(F,K){return this.defs().gradient(F,K)}}}),s.extend(s.Gradient,s.FX,{from:function(F,K){return this.attr("radial"==(this._target||this).type?{fx:new s.Number(F),fy:new s.Number(K)}:{x1:new s.Number(F),y1:new s.Number(K)})},to:function(F,K){return this.attr("radial"==(this._target||this).type?{cx:new s.Number(F),cy:new s.Number(K)}:{x2:new s.Number(F),y2:new s.Number(K)})}}),s.extend(s.Defs,{gradient:function(F,K){return this.put(new s.Gradient(F)).update(K)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(F){return("number"==typeof F||F instanceof s.Number)&&(F={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=F.opacity&&this.attr("stop-opacity",F.opacity),null!=F.color&&this.attr("stop-color",F.color),null!=F.offset&&this.attr("offset",new s.Number(F.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(F){return this.clear(),"function"==typeof F&&F.call(this,this),this},toString:function(){return this.fill()},attr:function(F,K,ce){return"transform"==F&&(F="patternTransform"),s.Container.prototype.attr.call(this,F,K,ce)}},construct:{pattern:function(F,K,ce){return this.defs().pattern(F,K,ce)}}}),s.extend(s.Defs,{pattern:function(F,K,ce){return this.put(new s.Pattern).update(ce).attr({x:0,y:0,width:F,height:K,patternUnits:"userSpaceOnUse"})}}),s.Shape=s.invent({create:function(F){this.constructor.call(this,F)},inherit:s.Element}),s.Symbol=s.invent({create:"symbol",inherit:s.Container,construct:{symbol:function(){return this.put(new s.Symbol)}}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(F,K){return this.attr("href",(K||"")+"#"+F,s.xlink)}},construct:{use:function(F,K){return this.put(new s.Use).element(F,K)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(F,K){return this.put(new s.Rect).size(F,K)}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(F){return this.put(new s.Circle).rx(new s.Number(F).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(F){return this.attr("r",F)},ry:function(F){return this.rx(F)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(F,K){return this.put(new s.Ellipse).size(F,K).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(F){return this.attr("rx",F)},ry:function(F){return this.attr("ry",F)}}),s.extend(s.Circle,s.Ellipse,{x:function(F){return null==F?this.cx()-this.rx():this.cx(F+this.rx())},y:function(F){return null==F?this.cy()-this.ry():this.cy(F+this.ry())},cx:function(F){return null==F?this.attr("cx"):this.attr("cx",F)},cy:function(F){return null==F?this.attr("cy"):this.attr("cy",F)},width:function(F){return null==F?2*this.rx():this.rx(new s.Number(F).divide(2))},height:function(F){return null==F?2*this.ry():this.ry(new s.Number(F).divide(2))},size:function(F,K){var ce=X(this,F,K);return this.rx(new s.Number(ce.width).divide(2)).ry(new s.Number(ce.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(F,K,ce,_e){return null==F?this.array():(F=void 0!==K?{x1:F,y1:K,x2:ce,y2:_e}:new s.PointArray(F).toLine(),this.attr(F))},move:function(F,K){return this.attr(this.array().move(F,K).toLine())},size:function(F,K){var ce=X(this,F,K);return this.attr(this.array().size(ce.width,ce.height).toLine())}},construct:{line:function(F,K,ce,_e){return s.Line.prototype.plot.apply(this.put(new s.Line),null!=F?[F,K,ce,_e]:[0,0,0,0])}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(F){return this.put(new s.Polyline).plot(F||new s.PointArray)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(F){return this.put(new s.Polygon).plot(F||new s.PointArray)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(F){return null==F?this.array():this.clear().attr("points","string"==typeof F?F:this._array=new s.PointArray(F))},clear:function(){return delete this._array,this},move:function(F,K){return this.attr("points",this.array().move(F,K))},size:function(F,K){var ce=X(this,F,K);return this.attr("points",this.array().size(ce.width,ce.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(F){return null==F?this.bbox().x:this.move(F,this.bbox().y)},y:function(F){return null==F?this.bbox().y:this.move(this.bbox().x,F)},width:function(F){var K=this.bbox();return null==F?K.width:this.size(F,K.height)},height:function(F){var K=this.bbox();return null==F?K.height:this.size(K.width,F)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(F){return null==F?this.array():this.clear().attr("d","string"==typeof F?F:this._array=new s.PathArray(F))},clear:function(){return delete this._array,this}},construct:{path:function(F){return this.put(new s.Path).plot(F||new s.PathArray)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(F){if(!F)return this;var K=this,ce=new ue.Image;return s.on(ce,"load",function(){s.off(ce);var _e=K.parent(s.Pattern);null!==_e&&(0==K.width()&&0==K.height()&&K.size(ce.width,ce.height),_e&&0==_e.width()&&0==_e.height()&&_e.size(K.width(),K.height()),"function"==typeof K._loaded&&K._loaded.call(K,{width:ce.width,height:ce.height,ratio:ce.width/ce.height,url:F}))}),s.on(ce,"error",function(_e){s.off(ce),"function"==typeof K._error&&K._error.call(K,_e)}),this.attr("href",ce.src=this.src=F,s.xlink)},loaded:function(F){return this._loaded=F,this},error:function(F){return this._error=F,this}},construct:{image:function(F,K,ce){return this.put(new s.Image).load(F).size(K||0,ce||K||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this.dom.leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{x:function(F){return null==F?this.attr("x"):this.attr("x",F)},text:function(F){if(void 0===F){F="";for(var K=this.node.childNodes,ce=0,_e=K.length;ce<_e;++ce)0!=ce&&3!=K[ce].nodeType&&1==s.adopt(K[ce]).dom.newLined&&(F+="\n"),F+=K[ce].textContent;return F}if(this.clear().build(!0),"function"==typeof F)F.call(this,this);else{ce=0;for(var Me=(F=F.split("\n")).length;ce<Me;ce++)this.tspan(F[ce]).newLine()}return this.build(!1).rebuild()},size:function(F){return this.attr("font-size",F).rebuild()},leading:function(F){return null==F?this.dom.leading:(this.dom.leading=new s.Number(F),this.rebuild())},lines:function(){var F=(this.textPath&&this.textPath()||this).node,K=s.utils.map(s.utils.filterSVGElements(F.childNodes),function(ce){return s.adopt(ce)});return new s.Set(K)},rebuild:function(F){if("boolean"==typeof F&&(this._rebuild=F),this._rebuild){var K=this,ce=0,_e=this.dom.leading*new s.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(K.textPath()||this.attr("x",K.attr("x")),"\n"==this.text()?ce+=_e:(this.attr("dy",_e+ce),ce=0))}),this.fire("rebuild")}return this},build:function(F){return this._build=!!F,this},setData:function(F){return this.dom=F,this.dom.leading=new s.Number(F.leading||1.3),this}},construct:{text:function(F){return this.put(new s.Text).text(F)},plain:function(F){return this.put(new s.Text).plain(F)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(F){return null==F?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof F?F.call(this,this):this.plain(F),this)},dx:function(F){return this.attr("dx",F)},dy:function(F){return this.attr("dy",F)},newLine:function(){var F=this.parent(s.Text);return this.dom.newLined=!0,this.dy(F.dom.leading*F.attr("font-size")).attr("x",F.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(F){return!1===this._build&&this.clear(),this.node.appendChild(n.createTextNode(F)),this},tspan:function(F){var K=(this.textPath&&this.textPath()||this).node,ce=new s.Tspan;return!1===this._build&&this.clear(),K.appendChild(ce.node),ce.text(F)},clear:function(){for(var F=(this.textPath&&this.textPath()||this).node;F.hasChildNodes();)F.removeChild(F.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Parent,parent:s.Text,construct:{morphArray:s.PathArray,array:function(){var F=this.track();return F?F.array():null},plot:function(F){var K=this.track(),ce=null;return K&&(ce=K.plot(F)),null==F?ce:this},track:function(){var F=this.textPath();if(F)return F.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return s.adopt(this.node.firstChild)}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}});var k={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(F,K){return"color"==K?F:F+"-"+K}};function M(F,K,ce,_e){return ce+_e.replace(s.regex.dots," .")}function R(F){return F.toLowerCase().replace(/-(.)/g,function(K,ce){return ce.toUpperCase()})}function j(F){return F.charAt(0).toUpperCase()+F.slice(1)}function U(F){var K=F.toString(16);return 1==K.length?"0"+K:K}function X(F,K,ce){if(null==K||null==ce){var _e=F.bbox();null==K?K=_e.width/_e.height*ce:null==ce&&(ce=_e.height/_e.width*K)}return{width:K,height:ce}}function ee(F,K,ce){return{x:K*F.a+ce*F.c+0,y:K*F.b+ce*F.d+0}}function ae(F){return{a:F[0],b:F[1],c:F[2],d:F[3],e:F[4],f:F[5]}}function de(F){for(var K=F.childNodes.length-1;K>=0;K--)F.childNodes[K]instanceof ue.SVGElement&&de(F.childNodes[K]);return s.adopt(F).id(s.eid(F.nodeName))}function ve(F){return Math.abs(F)>1e-37?F:0}["fill","stroke"].forEach(function(F){var K={};K[F]=function(ce){if(void 0===ce)return this;if("string"==typeof ce||s.Color.isRgb(ce)||ce&&"function"==typeof ce.fill)this.attr(F,ce);else for(var _e=k[F].length-1;_e>=0;_e--)null!=ce[k[F][_e]]&&this.attr(k.prefix(F,k[F][_e]),ce[k[F][_e]]);return this},s.extend(s.Element,s.FX,K)}),s.extend(s.Element,s.FX,{translate:function(F,K){return this.transform({x:F,y:K})},matrix:function(F){return this.attr("transform",new s.Matrix(6==arguments.length?[].slice.call(arguments):F))},opacity:function(F){return this.attr("opacity",F)},dx:function(F){return this.x(new s.Number(F).plus(this instanceof s.FX?0:this.x()),!0)},dy:function(F){return this.y(new s.Number(F).plus(this instanceof s.FX?0:this.y()),!0)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(F){return this.node.getPointAtLength(F)}}),s.Set=s.invent({create:function(F){Array.isArray(F)?this.members=F:this.clear()},extend:{add:function(){for(var F=[].slice.call(arguments),K=0,ce=F.length;K<ce;K++)this.members.push(F[K]);return this},remove:function(F){var K=this.index(F);return K>-1&&this.members.splice(K,1),this},each:function(F){for(var K=0,ce=this.members.length;K<ce;K++)F.apply(this.members[K],[K,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(F){return this.index(F)>=0},index:function(F){return this.members.indexOf(F)},get:function(F){return this.members[F]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(F){return new s.Set(F)}}}),s.FX.Set=s.invent({create:function(F){this.set=F}}),s.Set.inherit=function(){var F=[];for(var K in s.Shape.prototype)"function"==typeof s.Shape.prototype[K]&&"function"!=typeof s.Set.prototype[K]&&F.push(K);for(var K in F.forEach(function(_e){s.Set.prototype[_e]=function(){for(var Me=0,$e=this.members.length;Me<$e;Me++)this.members[Me]&&"function"==typeof this.members[Me][_e]&&this.members[Me][_e].apply(this.members[Me],arguments);return"animate"==_e?this.fx||(this.fx=new s.FX.Set(this)):this}}),F=[],s.FX.prototype)"function"==typeof s.FX.prototype[K]&&"function"!=typeof s.FX.Set.prototype[K]&&F.push(K);F.forEach(function(ce){s.FX.Set.prototype[ce]=function(){for(var _e=0,Me=this.set.members.length;_e<Me;_e++)this.set.members[_e].fx[ce].apply(this.set.members[_e].fx,arguments);return this}})},s.extend(s.Element,{}),s.extend(s.Element,{remember:function(F,K){if("object"===e(arguments[0]))for(var ce in F)this.remember(ce,F[ce]);else{if(1==arguments.length)return this.memory()[F];this.memory()[F]=K}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var F=arguments.length-1;F>=0;F--)delete this.memory()[arguments[F]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(F){var K=n.getElementById(function(ce){var _e=(ce||"").toString().match(s.regex.reference);if(_e)return _e[1]}(F)||F);return s.adopt(K)},s.select=function(F,K){return new s.Set(s.utils.map((K||n).querySelectorAll(F),function(ce){return s.adopt(ce)}))},s.extend(s.Parent,{select:function(F){return s.select(F,this.node)}});var he="abcdef".split("");if("function"!=typeof ue.CustomEvent){var be=function(F,K){K=K||{bubbles:!1,cancelable:!1,detail:void 0};var ce=n.createEvent("CustomEvent");return ce.initCustomEvent(F,K.bubbles,K.cancelable,K.detail),ce};be.prototype=ue.Event.prototype,s.CustomEvent=be}else s.CustomEvent=ue.CustomEvent;return s},void 0!==(A=function(){return pi(Rt,Rt.document)}.call(Lr,Ot,Lr,Qs))&&(Qs.exports=A),
/*! svg.filter.js - v2.0.2 - 2016-02-24
      * https://github.com/wout/svg.filter.js
      * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(x,k){return this.add(x,k),!x.attr("in")&&this.autoSetIn&&x.attr("in",this.source),x.attr("result")||x.attr("result",x),x},blend:function(x,k,M){return this.put(new SVG.BlendEffect(x,k,M))},colorMatrix:function(x,k){return this.put(new SVG.ColorMatrixEffect(x,k))},convolveMatrix:function(x){return this.put(new SVG.ConvolveMatrixEffect(x))},componentTransfer:function(x){return this.put(new SVG.ComponentTransferEffect(x))},composite:function(x,k,M){return this.put(new SVG.CompositeEffect(x,k,M))},flood:function(x,k){return this.put(new SVG.FloodEffect(x,k))},offset:function(x,k){return this.put(new SVG.OffsetEffect(x,k))},image:function(x){return this.put(new SVG.ImageEffect(x))},merge:function(){var x=[void 0];for(var k in arguments)x.push(arguments[k]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,x)))},gaussianBlur:function(x,k){return this.put(new SVG.GaussianBlurEffect(x,k))},morphology:function(x,k){return this.put(new SVG.MorphologyEffect(x,k))},diffuseLighting:function(x,k,M){return this.put(new SVG.DiffuseLightingEffect(x,k,M))},displacementMap:function(x,k,M,R,j){return this.put(new SVG.DisplacementMapEffect(x,k,M,R,j))},specularLighting:function(x,k,M,R){return this.put(new SVG.SpecularLightingEffect(x,k,M,R))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(x,k,M,R,j){return this.put(new SVG.TurbulenceEffect(x,k,M,R,j))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(x){var k=this.put(new SVG.Filter);return"function"==typeof x&&x.call(k,k),k}}),SVG.extend(SVG.Container,{filter:function(x){return this.defs().filter(x)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(x){return this.filterer=x instanceof SVG.Element?x:this.doc().filter(x),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(x){return this.filterer&&!0===x&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",x)},result:function(x){return null==x?this.attr("result"):this.attr("result",x)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",x)},result:function(x){return null==x?this.attr("result"):this.attr("result",x)},toString:function(){return this.result()}}});var ue={blend:function(x,k){return this.parent()&&this.parent().blend(this,x,k)},colorMatrix:function(x,k){return this.parent()&&this.parent().colorMatrix(x,k).in(this)},convolveMatrix:function(x){return this.parent()&&this.parent().convolveMatrix(x).in(this)},componentTransfer:function(x){return this.parent()&&this.parent().componentTransfer(x).in(this)},composite:function(x,k){return this.parent()&&this.parent().composite(this,x,k)},flood:function(x,k){return this.parent()&&this.parent().flood(x,k)},offset:function(x,k){return this.parent()&&this.parent().offset(x,k).in(this)},image:function(x){return this.parent()&&this.parent().image(x)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(x,k){return this.parent()&&this.parent().gaussianBlur(x,k).in(this)},morphology:function(x,k){return this.parent()&&this.parent().morphology(x,k).in(this)},diffuseLighting:function(x,k,M){return this.parent()&&this.parent().diffuseLighting(x,k,M).in(this)},displacementMap:function(x,k,M,R){return this.parent()&&this.parent().displacementMap(this,x,k,M,R)},specularLighting:function(x,k,M,R){return this.parent()&&this.parent().specularLighting(x,k,M,R).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(x,k,M,R,j){return this.parent()&&this.parent().turbulence(x,k,M,R,j).in(this)}};SVG.extend(SVG.Effect,ue),SVG.extend(SVG.ParentEffect,ue),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(x){this.attr("in",x)}}});var n={blend:function(x,k,M){this.attr({in:x,in2:k,mode:M||"normal"})},colorMatrix:function(x,k){"matrix"==x&&(k=g(k)),this.attr({type:x,values:void 0===k?null:k})},convolveMatrix:function(x){x=g(x),this.attr({order:Math.sqrt(x.split(" ").length),kernelMatrix:x})},composite:function(x,k,M){this.attr({in:x,in2:k,operator:M})},flood:function(x,k){this.attr("flood-color",x),null!=k&&this.attr("flood-opacity",k)},offset:function(x,k){this.attr({dx:x,dy:k})},image:function(x){this.attr("href",x,SVG.xlink)},displacementMap:function(x,k,M,R,j){this.attr({in:x,in2:k,scale:M,xChannelSelector:R,yChannelSelector:j})},gaussianBlur:function(x,k){this.attr("stdDeviation",null!=x||null!=k?function(M){if(!Array.isArray(M))return M;for(var R=0,j=M.length,U=[];R<j;R++)U.push(M[R]);return U.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(x,k){this.attr({operator:x,radius:k})},tile:function(){},turbulence:function(x,k,M,R,j){this.attr({numOctaves:k,seed:M,stitchTiles:R,baseFrequency:x,type:j})}},s={merge:function(){var x;if(arguments[0]instanceof SVG.Set){var k=this;arguments[0].each(function(R){this instanceof SVG.MergeNode?k.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&k.put(new SVG.MergeNode(this))})}else{x=Array.isArray(arguments[0])?arguments[0]:arguments;for(var M=0;M<x.length;M++)x[M]instanceof SVG.MergeNode?this.put(x[M]):this.put(new SVG.MergeNode(x[M]))}},componentTransfer:function(x){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(M){this[M]=new(SVG["Func"+M.toUpperCase()])("identity"),this.rgb.add(this[M]),this.node.appendChild(this[M].node)}.bind(this)),x)for(var k in x.rgb&&(["r","g","b"].forEach(function(M){this[M].attr(x.rgb)}.bind(this)),delete x.rgb),x)this[k].attr(x[k])},diffuseLighting:function(x,k,M){this.attr({surfaceScale:x,diffuseConstant:k,kernelUnitLength:M})},specularLighting:function(x,k,M,R){this.attr({surfaceScale:x,diffuseConstant:k,specularExponent:M,kernelUnitLength:R})}},c={distantLight:function(x,k){this.attr({azimuth:x,elevation:k})},pointLight:function(x,k,M){this.attr({x,y:k,z:M})},spotLight:function(x,k,M,R,j,U){this.attr({x,y:k,z:M,pointsAtX:R,pointsAtY:j,pointsAtZ:U})},mergeNode:function(x){this.attr("in",x)}};function g(x){return Array.isArray(x)&&(x=new SVG.Array(x)),x.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function y(){var x=function(){};for(var k in"function"==typeof arguments[arguments.length-1]&&(x=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var M in arguments[k])x(arguments[k][M],M,arguments[k])}["r","g","b","a"].forEach(function(x){c["Func"+x.toUpperCase()]=function(k){switch(this.attr("type",k),k){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),y(n,function(x,k){var M=k.charAt(0).toUpperCase()+k.slice(1);SVG[M+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+M)),x.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),y(s,function(x,k){var M=k.charAt(0).toUpperCase()+k.slice(1);SVG[M+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+M)),x.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),y(c,function(x,k){var M=k.charAt(0).toUpperCase()+k.slice(1);SVG[M]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+M)),x.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(x){return x instanceof SVG.MergeNode?this.add(x,0):this.add(new SVG.MergeNode(x),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",x)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function ue(y,x,k,M,R,j,U){for(var X=y.slice(x,k||U),ee=M.slice(R,j||U),ae=0,de={pos:[0,0],start:[0,0]},ve={pos:[0,0],start:[0,0]};X[ae]=n.call(de,X[ae]),ee[ae]=n.call(ve,ee[ae]),X[ae][0]!=ee[ae][0]||"M"==X[ae][0]||"A"==X[ae][0]&&(X[ae][4]!=ee[ae][4]||X[ae][5]!=ee[ae][5])?(Array.prototype.splice.apply(X,[ae,1].concat(c.call(de,X[ae]))),Array.prototype.splice.apply(ee,[ae,1].concat(c.call(ve,ee[ae])))):(X[ae]=s.call(de,X[ae]),ee[ae]=s.call(ve,ee[ae])),++ae!=X.length||ae!=ee.length;)ae==X.length&&X.push(["C",de.pos[0],de.pos[1],de.pos[0],de.pos[1],de.pos[0],de.pos[1]]),ae==ee.length&&ee.push(["C",ve.pos[0],ve.pos[1],ve.pos[0],ve.pos[1],ve.pos[0],ve.pos[1]]);return{start:X,dest:ee}}function n(y){switch(y[0]){case"z":case"Z":y[0]="L",y[1]=this.start[0],y[2]=this.start[1];break;case"H":y[0]="L",y[2]=this.pos[1];break;case"V":y[0]="L",y[2]=y[1],y[1]=this.pos[0];break;case"T":y[0]="Q",y[3]=y[1],y[4]=y[2],y[1]=this.reflection[1],y[2]=this.reflection[0];break;case"S":y[0]="C",y[6]=y[4],y[5]=y[3],y[4]=y[2],y[3]=y[1],y[2]=this.reflection[1],y[1]=this.reflection[0]}return y}function s(y){var x=y.length;return this.pos=[y[x-2],y[x-1]],-1!="SCQT".indexOf(y[0])&&(this.reflection=[2*this.pos[0]-y[x-4],2*this.pos[1]-y[x-3]]),y}function c(y){var x=[y];switch(y[0]){case"M":return this.pos=this.start=[y[1],y[2]],x;case"L":y[5]=y[3]=y[1],y[6]=y[4]=y[2],y[1]=this.pos[0],y[2]=this.pos[1];break;case"Q":y[6]=y[4],y[5]=y[3],y[4]=1*y[4]/3+2*y[2]/3,y[3]=1*y[3]/3+2*y[1]/3,y[2]=1*this.pos[1]/3+2*y[2]/3,y[1]=1*this.pos[0]/3+2*y[1]/3;break;case"A":y=(x=function(k,M){var R,j,U,X,ee,ae,de,ve,he,be,F,K,ce,_e,Me,$e,wt,kt,Wt,hi,yi,rn,gn,An,$n,Jn,Qn=Math.abs(M[1]),wr=Math.abs(M[2]),Pr=M[3]%360,Rr=M[4],yr=M[5],Un=M[6],Wr=M[7],Yn=new SVG.Point(k),zr=new SVG.Point(Un,Wr),qa=[];if(0===Qn||0===wr||Yn.x===zr.x&&Yn.y===zr.y)return[["C",Yn.x,Yn.y,zr.x,zr.y,zr.x,zr.y]];for((j=(R=new SVG.Point((Yn.x-zr.x)/2,(Yn.y-zr.y)/2).transform((new SVG.Matrix).rotate(Pr))).x*R.x/(Qn*Qn)+R.y*R.y/(wr*wr))>1&&(Qn*=j=Math.sqrt(j),wr*=j),U=(new SVG.Matrix).rotate(Pr).scale(1/Qn,1/wr).rotate(-Pr),Yn=Yn.transform(U),ae=(X=[(zr=zr.transform(U)).x-Yn.x,zr.y-Yn.y])[0]*X[0]+X[1]*X[1],ee=Math.sqrt(ae),X[0]/=ee,X[1]/=ee,de=ae<4?Math.sqrt(1-ae/4):0,Rr===yr&&(de*=-1),ve=new SVG.Point((zr.x+Yn.x)/2+de*-X[1],(zr.y+Yn.y)/2+de*X[0]),he=new SVG.Point(Yn.x-ve.x,Yn.y-ve.y),be=new SVG.Point(zr.x-ve.x,zr.y-ve.y),F=Math.acos(he.x/Math.sqrt(he.x*he.x+he.y*he.y)),he.y<0&&(F*=-1),K=Math.acos(be.x/Math.sqrt(be.x*be.x+be.y*be.y)),be.y<0&&(K*=-1),yr&&F>K&&(K+=2*Math.PI),!yr&&F<K&&(K-=2*Math.PI),$e=[],wt=F,ce=(K-F)/(_e=Math.ceil(2*Math.abs(F-K)/Math.PI)),Me=4*Math.tan(ce/4)/3,yi=0;yi<=_e;yi++)Wt=Math.cos(wt),kt=Math.sin(wt),hi=new SVG.Point(ve.x+Wt,ve.y+kt),$e[yi]=[new SVG.Point(hi.x+Me*kt,hi.y-Me*Wt),hi,new SVG.Point(hi.x-Me*kt,hi.y+Me*Wt)],wt+=ce;for($e[0][0]=$e[0][1].clone(),$e[$e.length-1][2]=$e[$e.length-1][1].clone(),U=(new SVG.Matrix).rotate(Pr).scale(Qn,wr).rotate(-Pr),yi=0,rn=$e.length;yi<rn;yi++)$e[yi][0]=$e[yi][0].transform(U),$e[yi][1]=$e[yi][1].transform(U),$e[yi][2]=$e[yi][2].transform(U);for(yi=1,rn=$e.length;yi<rn;yi++)gn=(hi=$e[yi-1][2]).x,An=hi.y,$n=(hi=$e[yi][0]).x,Jn=hi.y,Un=(hi=$e[yi][1]).x,qa.push(["C",gn,An,$n,Jn,Un,Wr=hi.y]);return qa}(this.pos,y))[0]}return y[0]="C",this.pos=[y[5],y[6]],this.reflection=[2*y[5]-y[3],2*y[6]-y[4]],x}function g(y,x){if(!1===x)return!1;for(var k=x,M=y.length;k<M;++k)if("M"==y[k][0])return k;return!1}SVG.extend(SVG.PathArray,{morph:function(y){for(var x=this.value,k=this.parse(y),M=0,R=0,j=!1,U=!1;!1!==M||!1!==R;){var X;j=g(x,!1!==M&&M+1),U=g(k,!1!==R&&R+1),!1===M&&(M=0==(X=new SVG.PathArray(ee.start).bbox()).height||0==X.width?x.push(x[0])-1:x.push(["M",X.x+X.width/2,X.y+X.height/2])-1),!1===R&&(R=0==(X=new SVG.PathArray(ee.dest).bbox()).height||0==X.width?k.push(k[0])-1:k.push(["M",X.x+X.width/2,X.y+X.height/2])-1);var ee=ue(x,M,j,k,R,U);x=x.slice(0,M).concat(ee.start,!1===j?[]:x.slice(j)),k=k.slice(0,R).concat(ee.dest,!1===U?[]:k.slice(U)),M=!1!==j&&M+ee.start.length,R=!1!==U&&R+ee.dest.length}return this.value=x,this.destination=new SVG.PathArray,this.destination.value=k,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
      * https://github.com/svgdotjs/svg.draggable.js
      * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function ue(n){n.remember("_draggable",this),this.el=n}ue.prototype.init=function(n,s){var c=this;this.constraint=n,this.value=s,this.el.on("mousedown.drag",function(g){c.start(g)}),this.el.on("touchstart.drag",function(g){c.start(g)})},ue.prototype.transformPoint=function(n,s){var c=(n=n||window.event).changedTouches&&n.changedTouches[0]||n;return this.p.x=c.clientX-(s||0),this.p.y=c.clientY,this.p.matrixTransform(this.m)},ue.prototype.getBBox=function(){var n=this.el.bbox();return this.el instanceof SVG.Nested&&(n=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(n.x=this.el.x(),n.y=this.el.y()),n},ue.prototype.start=function(n){if("click"!=n.type&&"mousedown"!=n.type&&"mousemove"!=n.type||1==(n.which||n.buttons)){var s=this;if(this.el.fire("beforedrag",{event:n,handler:this}),!this.el.event().defaultPrevented){n.preventDefault(),n.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var c,g=this.getBBox();if(this.el instanceof SVG.Text)switch(c=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":c/=2;break;case"start":c=0}this.startPoints={point:this.transformPoint(n,c),box:g,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(y){s.drag(y)}),SVG.on(window,"touchmove.drag",function(y){s.drag(y)}),SVG.on(window,"mouseup.drag",function(y){s.end(y)}),SVG.on(window,"touchend.drag",function(y){s.end(y)}),this.el.fire("dragstart",{event:n,p:this.startPoints.point,m:this.m,handler:this})}}},ue.prototype.drag=function(n){var s=this.getBBox(),c=this.transformPoint(n),g=this.startPoints.box.x+c.x-this.startPoints.point.x,y=this.startPoints.box.y+c.y-this.startPoints.point.y,x=this.constraint,k=c.x-this.startPoints.point.x,M=c.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:n,p:c,m:this.m,handler:this}),this.el.event().defaultPrevented)return c;if("function"==typeof x){var R=x.call(this.el,g,y,this.m);"boolean"==typeof R&&(R={x:R,y:R}),!0===R.x?this.el.x(g):!1!==R.x&&this.el.x(R.x),!0===R.y?this.el.y(y):!1!==R.y&&this.el.y(R.y)}else"object"==typeof x&&(null!=x.minX&&g<x.minX?k=(g=x.minX)-this.startPoints.box.x:null!=x.maxX&&g>x.maxX-s.width&&(k=(g=x.maxX-s.width)-this.startPoints.box.x),null!=x.minY&&y<x.minY?M=(y=x.minY)-this.startPoints.box.y:null!=x.maxY&&y>x.maxY-s.height&&(M=(y=x.maxY-s.height)-this.startPoints.box.y),null!=x.snapToGrid&&(g-=g%x.snapToGrid,y-=y%x.snapToGrid,k-=k%x.snapToGrid,M-=M%x.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:k,y:M},!0):this.el.move(g,y));return c},ue.prototype.end=function(n){var s=this.drag(n);this.el.fire("dragend",{event:n,p:s,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(n,s){"function"!=typeof n&&"object"!=typeof n||(s=n,n=!0);var c=this.remember("_draggable")||new ue(this);return(n=void 0===n||n)?c.init(s||{},n):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function ue(n){this.el=n,n.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(s,c,g){var y="string"!=typeof s?s:c[s];return g?y/2:y},this.pointCoords=function(s,c){var g=this.pointsList[s];return{x:this.pointCoord(g[0],c,"t"===s||"b"===s),y:this.pointCoord(g[1],c,"r"===s||"l"===s)}}}ue.prototype.init=function(n,s){var c=this.el.bbox();this.options={};var g=this.el.selectize.defaults.points;for(var y in this.el.selectize.defaults)this.options[y]=this.el.selectize.defaults[y],void 0!==s[y]&&(this.options[y]=s[y]);var x=["points","pointsExclude"];for(var y in x){var k=this.options[x[y]];"string"==typeof k?k=k.length>0?k.split(/\s*,\s*/i):[]:"boolean"==typeof k&&"points"===x[y]&&(k=k?g:[]),this.options[x[y]]=k}this.options.points=[g,this.options.points].reduce(function(M,R){return M.filter(function(j){return R.indexOf(j)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(M,R){return M.filter(function(j){return R.indexOf(j)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(c.x,c.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(n):this.selectRect(n),this.observe(),this.cleanup()},ue.prototype.selectPoints=function(n){return this.pointSelection.isSelected=n,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},ue.prototype.getPointArray=function(){var n=this.el.bbox();return this.el.array().valueOf().map(function(s){return[s[0]-n.x,s[1]-n.y]})},ue.prototype.drawPoints=function(){for(var n=this,s=this.getPointArray(),c=0,g=s.length;c<g;++c){var y=function(k){return function(M){(M=M||window.event).preventDefault?M.preventDefault():M.returnValue=!1,M.stopPropagation(),n.el.fire("point",{x:M.pageX||M.touches[0].pageX,y:M.pageY||M.touches[0].pageY,i:k,event:M})}}(c),x=this.drawPoint(s[c][0],s[c][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",y).on("mousedown",y);this.pointSelection.set.add(x)}},ue.prototype.drawPoint=function(n,s){var c=this.options.pointType;switch(c){case"circle":return this.drawCircle(n,s);case"rect":return this.drawRect(n,s);default:if("function"==typeof c)return c.call(this,n,s);throw new Error("Unknown "+c+" point type!")}},ue.prototype.drawCircle=function(n,s){return this.nested.circle(this.options.pointSize).center(n,s)},ue.prototype.drawRect=function(n,s){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(n,s)},ue.prototype.updatePointSelection=function(){var n=this.getPointArray();this.pointSelection.set.each(function(s){this.cx()===n[s][0]&&this.cy()===n[s][1]||this.center(n[s][0],n[s][1])})},ue.prototype.updateRectSelection=function(){var n=this,s=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:s.width,height:s.height}),this.options.points.length&&this.options.points.map(function(g,y){var x=n.pointCoords(g,s);n.rectSelection.set.get(y+1).center(x.x,x.y)}),this.options.rotationPoint){var c=this.rectSelection.set.length();this.rectSelection.set.get(c-1).center(s.width/2,20)}},ue.prototype.selectRect=function(n){var s=this,c=this.el.bbox();function g(k){return function(M){(M=M||window.event).preventDefault?M.preventDefault():M.returnValue=!1,M.stopPropagation(),s.el.fire(k,{x:M.pageX||M.touches[0].pageX,y:M.pageY||M.touches[0].pageY,event:M})}}if(this.rectSelection.isSelected=n,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(c.width,c.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(k,M){var R=s.pointCoords(k,c),j=s.drawPoint(R.x,R.y).attr("class",s.options.classPoints+"_"+k).on("mousedown",g(k)).on("touchstart",g(k));s.rectSelection.set.add(j)}),this.rectSelection.set.each(function(){this.addClass(s.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var y=function(k){(k=k||window.event).preventDefault?k.preventDefault():k.returnValue=!1,k.stopPropagation(),s.el.fire("rot",{x:k.pageX||k.touches[0].pageX,y:k.pageY||k.touches[0].pageY,event:k})},x=this.drawPoint(c.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",y).on("mousedown",y);this.rectSelection.set.add(x)}},ue.prototype.handler=function(){var n=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(n.x,n.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},ue.prototype.observe=function(){var n=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){n.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){n.handler()})},ue.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(n,s){return"object"==typeof n&&(s=n,n=!0),(this.remember("_selectHandler")||new ue(this)).init(void 0===n||n,s||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function ue(n){n.remember("_resizeHandler",this),this.el=n,this.parameters={},this.lastUpdateCall=null,this.p=n.doc().node.createSVGPoint()}ue.prototype.transformPoint=function(n,s,c){return this.p.x=n-(this.offset.x-window.pageXOffset),this.p.y=s-(this.offset.y-window.pageYOffset),this.p.matrixTransform(c||this.m)},ue.prototype._extractPosition=function(n){return{x:null!=n.clientX?n.clientX:n.touches[0].clientX,y:null!=n.clientY?n.clientY:n.touches[0].clientY}},ue.prototype.init=function(n){var s=this;if(this.stop(),"stop"!==n){for(var c in this.options={},this.el.resize.defaults)this.options[c]=this.el.resize.defaults[c],void 0!==n[c]&&(this.options[c]=n[c]);this.el.on("lt.resize",function(g){s.resize(g||window.event)}),this.el.on("rt.resize",function(g){s.resize(g||window.event)}),this.el.on("rb.resize",function(g){s.resize(g||window.event)}),this.el.on("lb.resize",function(g){s.resize(g||window.event)}),this.el.on("t.resize",function(g){s.resize(g||window.event)}),this.el.on("r.resize",function(g){s.resize(g||window.event)}),this.el.on("b.resize",function(g){s.resize(g||window.event)}),this.el.on("l.resize",function(g){s.resize(g||window.event)}),this.el.on("rot.resize",function(g){s.resize(g||window.event)}),this.el.on("point.resize",function(g){s.resize(g||window.event)}),this.update()}},ue.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},ue.prototype.resize=function(n){var s=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var c=this._extractPosition(n.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(c.x,c.y),x:n.detail.x,y:n.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==n.detail.i){var g=this.el.array().valueOf();this.parameters.i=n.detail.i,this.parameters.pointCoords=[g[n.detail.i][0],g[n.detail.i][1]]}switch(n.type){case"lt":this.calc=function(y,x){var k=this.snapToGrid(y,x);if(this.parameters.box.width-k[0]>0&&this.parameters.box.height-k[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+k[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-k[0]);k=this.checkAspectRatio(k),this.el.move(this.parameters.box.x+k[0],this.parameters.box.y+k[1]).size(this.parameters.box.width-k[0],this.parameters.box.height-k[1])}};break;case"rt":this.calc=function(y,x){var k=this.snapToGrid(y,x,2);if(this.parameters.box.width+k[0]>0&&this.parameters.box.height-k[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-k[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+k[0]);k=this.checkAspectRatio(k,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+k[1]).size(this.parameters.box.width+k[0],this.parameters.box.height-k[1])}};break;case"rb":this.calc=function(y,x){var k=this.snapToGrid(y,x,0);if(this.parameters.box.width+k[0]>0&&this.parameters.box.height+k[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-k[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+k[0]);k=this.checkAspectRatio(k),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+k[0],this.parameters.box.height+k[1])}};break;case"lb":this.calc=function(y,x){var k=this.snapToGrid(y,x,1);if(this.parameters.box.width-k[0]>0&&this.parameters.box.height+k[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+k[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-k[0]);k=this.checkAspectRatio(k,!0),this.el.move(this.parameters.box.x+k[0],this.parameters.box.y).size(this.parameters.box.width-k[0],this.parameters.box.height+k[1])}};break;case"t":this.calc=function(y,x){var k=this.snapToGrid(y,x,2);if(this.parameters.box.height-k[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+k[1]).height(this.parameters.box.height-k[1])}};break;case"r":this.calc=function(y,x){var k=this.snapToGrid(y,x,0);if(this.parameters.box.width+k[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+k[0])}};break;case"b":this.calc=function(y,x){var k=this.snapToGrid(y,x,0);if(this.parameters.box.height+k[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+k[1])}};break;case"l":this.calc=function(y,x){var k=this.snapToGrid(y,x,1);if(this.parameters.box.width-k[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+k[0],this.parameters.box.y).width(this.parameters.box.width-k[0])}};break;case"rot":this.calc=function(y,x){var k=y+this.parameters.p.x,M=x+this.parameters.p.y,R=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),j=Math.atan2(M-this.parameters.box.y-this.parameters.box.height/2,k-this.parameters.box.x-this.parameters.box.width/2),U=this.parameters.rotation+180*(j-R)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(U-U%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(y,x){var k=this.snapToGrid(y,x,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),M=this.el.array().valueOf();M[this.parameters.i][0]=this.parameters.pointCoords[0]+k[0],M[this.parameters.i][1]=this.parameters.pointCoords[1]+k[1],this.el.plot(M)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:n}),SVG.on(window,"touchmove.resize",function(y){s.update(y||window.event)}),SVG.on(window,"touchend.resize",function(){s.done()}),SVG.on(window,"mousemove.resize",function(y){s.update(y||window.event)}),SVG.on(window,"mouseup.resize",function(){s.done()})},ue.prototype.update=function(n){if(n){var s=this._extractPosition(n),c=this.transformPoint(s.x,s.y),g=c.x-this.parameters.p.x,y=c.y-this.parameters.p.y;this.lastUpdateCall=[g,y],this.calc(g,y),this.el.fire("resizing",{dx:g,dy:y,event:n})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},ue.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},ue.prototype.snapToGrid=function(n,s,c,g){var y;return y=void 0!==g?[(c+n)%this.options.snapToGrid,(g+s)%this.options.snapToGrid]:[(this.parameters.box.x+n+(1&(c=c??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+s+(2&c?0:this.parameters.box.height))%this.options.snapToGrid],n<0&&(y[0]-=this.options.snapToGrid),s<0&&(y[1]-=this.options.snapToGrid),n-=Math.abs(y[0])<this.options.snapToGrid/2?y[0]:y[0]-(n<0?-this.options.snapToGrid:this.options.snapToGrid),s-=Math.abs(y[1])<this.options.snapToGrid/2?y[1]:y[1]-(s<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(n,s,c,g)},ue.prototype.constraintToBox=function(n,s,c,g){var y,x,k=this.options.constraint||{};return void 0!==g?(y=c,x=g):(y=this.parameters.box.x+(1&c?0:this.parameters.box.width),x=this.parameters.box.y+(2&c?0:this.parameters.box.height)),void 0!==k.minX&&y+n<k.minX&&(n=k.minX-y),void 0!==k.maxX&&y+n>k.maxX&&(n=k.maxX-y),void 0!==k.minY&&x+s<k.minY&&(s=k.minY-x),void 0!==k.maxY&&x+s>k.maxY&&(s=k.maxY-x),[n,s]},ue.prototype.checkAspectRatio=function(n,s){if(!this.options.saveAspectRatio)return n;var c=n.slice(),g=this.parameters.box.width/this.parameters.box.height,y=this.parameters.box.width+n[0],x=this.parameters.box.height-n[1],k=y/x;return k<g?(c[1]=y/g-this.parameters.box.height,s&&(c[1]=-c[1])):k>g&&(c[0]=this.parameters.box.width-x*g,s&&(c[0]=-c[0])),c},SVG.extend(SVG.Element,{resize:function(n){return(this.remember("_resizeHandler")||new ue(this)).init(n||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Dn=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Zt(this.ctx),this.ctx.axes=new $i(this.ctx),this.ctx.core=new Bi(this.ctx.el,this.ctx),this.ctx.config=new ln({}),this.ctx.data=new Pi(this.ctx),this.ctx.grid=new hn(this.ctx),this.ctx.graphics=new rt(this.ctx),this.ctx.coreUtils=new Kt(this.ctx),this.ctx.crosshairs=new gi(this.ctx),this.ctx.events=new Oi(this.ctx),this.ctx.exports=new tr(this.ctx),this.ctx.localization=new Bn(this.ctx),this.ctx.options=new ri,this.ctx.responsive=new un(this.ctx),this.ctx.series=new xn(this.ctx),this.ctx.theme=new Mn(this.ctx),this.ctx.formatters=new fi(this.ctx),this.ctx.titleSubtitle=new Tr(this.ctx),this.ctx.legend=new Sr(this.ctx),this.ctx.toolbar=new ys(this.ctx),this.ctx.tooltip=new ze(this.ctx),this.ctx.dimensions=new yn(this.ctx),this.ctx.updateHelpers=new Tn(this.ctx),this.ctx.zoomPanSelection=new Kn(this.ctx),this.ctx.w.globals.tooltip=new ze(this.ctx)}}]),ue}(),In=function(){function ue(n){Y(this,ue),this.ctx=n,this.w=n.w}return ke(ue,[{key:"clear",value:function(n){var s=n.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:s})}},{key:"killSVG",value:function(n){n.each(function(s,c){this.removeClass("*"),this.off(),this.stop()},!0),n.ungroup(),n.clear()}},{key:"clearDomElements",value:function(n){var s=this,g=this.w.globals.dom.Paper.node;g.parentNode&&g.parentNode.parentNode&&!n.isUpdating&&(g.parentNode.parentNode.style.minHeight="unset");var y=this.w.globals.dom.baseEl;y&&this.ctx.eventList.forEach(function(k){y.removeEventListener(k,s.ctx.events.documentEvent)});var x=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(x.Paper),x.Paper.remove(),x.elWrap=null,x.elGraphical=null,x.elLegendWrap=null,x.elLegendForeign=null,x.baseEl=null,x.elGridRect=null,x.elGridRectMask=null,x.elGridRectMarkerMask=null,x.elForecastMask=null,x.elNonForecastMask=null,x.elDefs=null}}]),ue}(),tt=new WeakMap,di=function(){function ue(n,s){Y(this,ue),this.opts=s,this.ctx=this,this.w=new jt(s).init(),this.el=n,this.w.globals.cuid=Ve.randomId(),this.w.globals.chartID=this.w.config.chart.id?Ve.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Dn(this).initModules(),this.create=Ve.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return ke(ue,[{key:"render",value:function(){var n=this;return new Promise(function(s,c){if(null!==n.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),n.w.config.chart.id&&Apex._chartInstances.push({id:n.w.globals.chartID,group:n.w.config.chart.group,chart:n}),n.setLocale(n.w.config.chart.defaultLocale);var g=n.w.config.chart.events.beforeMount;if("function"==typeof g&&g(n,n.w),n.events.fireEvent("beforeMount",[n,n.w]),window.addEventListener("resize",n.windowResizeHandler),function(X,ee){var ae=!1;if(X.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var de=X.getBoundingClientRect();"none"!==X.style.display&&0!==de.width||(ae=!0)}var ve=new ResizeObserver(function(he){ae&&ee.call(X,he),ae=!0});X.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(X.children).forEach(function(he){return ve.observe(he)}):ve.observe(X),tt.set(ee,ve)}(n.el.parentNode,n.parentResizeHandler),!n.css){var y=n.el.getRootNode&&n.el.getRootNode(),x=Ve.is("ShadowRoot",y),k=n.el.ownerDocument,M=k.getElementById("apexcharts-css");if(x||!M){var R;n.css=document.createElement("style"),n.css.id="apexcharts-css",n.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var j=(null===(R=n.opts.chart)||void 0===R?void 0:R.nonce)||n.w.config.chart.nonce;j&&n.css.setAttribute("nonce",j),x?y.prepend(n.css):k.head.appendChild(n.css)}}var U=n.create(n.w.config.series,{});if(!U)return s(n);n.mount(U).then(function(){"function"==typeof n.w.config.chart.events.mounted&&n.w.config.chart.events.mounted(n,n.w),n.events.fireEvent("mounted",[n,n.w]),s(U)}).catch(function(X){c(X)})}else c(new Error("Element not found"))})}},{key:"create",value:function(n,s){var c=this.w;new Dn(this).initModules();var g=this.w.globals;if(g.noData=!1,g.animationEnded=!1,this.responsive.checkResponsiveConfig(s),c.config.xaxis.convertedCatToNumeric&&new mn(c.config).convertCatToNumericXaxis(c.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===c.config.chart.type&&(c.config.grid.show=!1,c.config.yaxis[0].show=!1),0===g.svgWidth))return g.animationEnded=!0,null;var y=Kt.checkComboSeries(n);g.comboCharts=y.comboCharts,g.comboBarCount=y.comboBarCount;var x=n.every(function(j){return j.data&&0===j.data.length});(0===n.length||x)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(n),this.theme.init(),new qi(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),g.noData&&g.collapsedSeries.length!==g.series.length&&!c.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),g.axisCharts&&(this.core.coreCalculations(),"category"!==c.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=c.globals.minX,this.ctx.toolbar.maxX=c.globals.maxX),this.formatters.heatmapLabelFormatters(),new Kt(this).getLargestMarkerSize(),this.dimensions.plotCoords();var k=this.core.xySettings();this.grid.createGridMask();var M=this.core.plotChartType(n,k),R=new Rn(this);return R.bringForward(),c.config.dataLabels.background.enabled&&R.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:M,xyRatios:k,dimensions:{plot:{left:c.globals.translateX,top:c.globals.translateY,width:c.globals.gridWidth,height:c.globals.gridHeight}}}}},{key:"mount",value:function(){var n=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=this,g=c.w;return new Promise(function(y,x){if(null===c.el)return x(new Error("Not enough data to display or target element not found"));(null===s||g.globals.allSeriesCollapsed)&&c.series.handleNoData(),c.grid=new hn(c);var k,M,R=c.grid.drawGrid();if(c.annotations=new Li(c),c.annotations.drawImageAnnos(),c.annotations.drawTextAnnos(),"back"===g.config.grid.position&&(R&&g.globals.dom.elGraphical.add(R.el),null!=R&&null!==(k=R.elGridBorders)&&void 0!==k&&k.node&&g.globals.dom.elGraphical.add(R.elGridBorders)),Array.isArray(s.elGraph))for(var j=0;j<s.elGraph.length;j++)g.globals.dom.elGraphical.add(s.elGraph[j]);else g.globals.dom.elGraphical.add(s.elGraph);"front"===g.config.grid.position&&(R&&g.globals.dom.elGraphical.add(R.el),null!=R&&null!==(M=R.elGridBorders)&&void 0!==M&&M.node&&g.globals.dom.elGraphical.add(R.elGridBorders)),"front"===g.config.xaxis.crosshairs.position&&c.crosshairs.drawXCrosshairs(),"front"===g.config.yaxis[0].crosshairs.position&&c.crosshairs.drawYCrosshairs(),"treemap"!==g.config.chart.type&&c.axes.drawAxis(g.config.chart.type,R);var U=new qn(n.ctx,R),X=new Vi(n.ctx,R);if(null!==R&&(U.xAxisLabelCorrections(R.xAxisTickWidth),X.setYAxisTextAlignments(),g.config.yaxis.map(function(ae,de){-1===g.globals.ignoreYAxisIndexes.indexOf(de)&&X.yAxisTitleRotate(de,ae.opposite)})),c.annotations.drawAxesAnnotations(),!g.globals.noData){if(g.config.tooltip.enabled&&!g.globals.noData&&c.w.globals.tooltip.drawTooltip(s.xyRatios),g.globals.axisCharts&&(g.globals.isXNumeric||g.config.xaxis.convertedCatToNumeric||g.globals.isRangeBar))(g.config.chart.zoom.enabled||g.config.chart.selection&&g.config.chart.selection.enabled||g.config.chart.pan&&g.config.chart.pan.enabled)&&c.zoomPanSelection.init({xyRatios:s.xyRatios});else{var ee=g.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(ae){ee[ae]=!1})}g.config.chart.toolbar.show&&!g.globals.allSeriesCollapsed&&c.toolbar.createToolbar()}g.globals.memory.methodsToExec.length>0&&g.globals.memory.methodsToExec.forEach(function(ae){ae.method(ae.params,!1,ae.context)}),g.globals.axisCharts||g.globals.noData||c.core.resizeNonAxisCharts(),y(c)})}},{key:"destroy",value:function(){var n,s;window.removeEventListener("resize",this.windowResizeHandler),(s=tt.get(n=this.parentResizeHandler))&&(s.disconnect(),tt.delete(n));var c=this.w.config.chart.id;c&&Apex._chartInstances.forEach(function(g,y){g.id===Ve.escapeString(c)&&Apex._chartInstances.splice(y,1)}),new In(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(n){var s=this,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],y=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],x=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],k=this.w;return k.globals.selection=void 0,n.series&&(this.series.resetSeries(!1,!0,!1),n.series.length&&n.series[0].data&&(n.series=n.series.map(function(M,R){return s.updateHelpers._extendSeries(M,R)})),this.updateHelpers.revertDefaultAxisMinMax()),n.xaxis&&(n=this.updateHelpers.forceXAxisUpdate(n)),n.yaxis&&(n=this.updateHelpers.forceYAxisUpdate(n)),k.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),n.theme&&(n=this.theme.updateThemeOptions(n)),this.updateHelpers._updateOptions(n,c,g,y,x)}},{key:"updateSeries",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,s,c)}},{key:"appendSeries",value:function(n){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],g=this.w.config.series.slice();return g.push(n),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(g,s,c)}},{key:"appendData",value:function(n){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=this;c.w.globals.dataChanged=!0,c.series.getPreviousPaths();for(var g=c.w.config.series.slice(),y=0;y<g.length;y++)if(null!=n[y])for(var x=0;x<n[y].data.length;x++)g[y].data.push(n[y].data[x]);return c.w.config.series=g,s&&(c.w.globals.initialSeries=Ve.clone(c.w.config.series)),this.update()}},{key:"update",value:function(n){var s=this;return new Promise(function(c,g){new In(s.ctx).clear({isUpdating:!0});var y=s.create(s.w.config.series,n);if(!y)return c(s);s.mount(y).then(function(){"function"==typeof s.w.config.chart.events.updated&&s.w.config.chart.events.updated(s,s.w),s.events.fireEvent("updated",[s,s.w]),s.w.globals.isDirty=!0,c(s)}).catch(function(x){g(x)})})}},{key:"getSyncedCharts",value:function(){var n=this.getGroupedCharts(),s=[this];return n.length&&(s=[],n.forEach(function(c){s.push(c)})),s}},{key:"getGroupedCharts",value:function(){var n=this;return Apex._chartInstances.filter(function(s){if(s.group)return!0}).map(function(s){return n.w.config.chart.group===s.group?s.chart:n})}},{key:"toggleSeries",value:function(n){return this.series.toggleSeries(n)}},{key:"highlightSeriesOnLegendHover",value:function(n,s){return this.series.toggleSeriesOnHover(n,s)}},{key:"showSeries",value:function(n){this.series.showSeries(n)}},{key:"hideSeries",value:function(n){this.series.hideSeries(n)}},{key:"isSeriesHidden",value:function(n){this.series.isSeriesHidden(n)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(n,s){this.events.addEventListener(n,s)}},{key:"removeEventListener",value:function(n,s){this.events.removeEventListener(n,s)}},{key:"addXaxisAnnotation",value:function(n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,g=this;c&&(g=c),g.annotations.addXaxisAnnotationExternal(n,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],g)}},{key:"addYaxisAnnotation",value:function(n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,g=this;c&&(g=c),g.annotations.addYaxisAnnotationExternal(n,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],g)}},{key:"addPointAnnotation",value:function(n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,g=this;c&&(g=c),g.annotations.addPointAnnotationExternal(n,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],g)}},{key:"clearAnnotations",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,s=this;n&&(s=n),s.annotations.clearAnnotations(s)}},{key:"removeAnnotation",value:function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=this;s&&(c=s),c.annotations.removeAnnotation(c,n)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(n,s){return this.coreUtils.getSeriesTotalsXRange(n,s)}},{key:"getHighestValueInSeries",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new cn(this.ctx).getMinYMaxY(n).highestY}},{key:"getLowestValueInSeries",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new cn(this.ctx).getMinYMaxY(n).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(n,s){return this.updateHelpers.toggleDataPointSelection(n,s)}},{key:"zoomX",value:function(n,s){this.ctx.toolbar.zoomUpdateOptions(n,s)}},{key:"setLocale",value:function(n){this.localization.setCurrentLocaleValues(n)}},{key:"dataURI",value:function(n){return new tr(this.ctx).dataURI(n)}},{key:"exportToCSV",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new tr(this.ctx).exportToCSV(n)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var n=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){n.w.globals.resized=!0,n.w.globals.dataChanged=!1,n.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var n=this.w.config.chart.redrawOnWindowResize;"function"==typeof n&&(n=n()),n&&this._windowResize()}}],[{key:"getChartByID",value:function(n){var s=Ve.escapeString(n);if(Apex._chartInstances){var c=Apex._chartInstances.filter(function(g){return g.id===s})[0];return c&&c.chart}}},{key:"initOnLoad",value:function(){for(var n=document.querySelectorAll("[data-apexcharts]"),s=0;s<n.length;s++)new ue(n[s],JSON.parse(n[s].getAttribute("data-options"))).render()}},{key:"exec",value:function(n,s){var c=this.getChartByID(n);if(c){c.w.globals.isExecCalled=!0;var g=null;if(-1!==c.publicMethods.indexOf(s)){for(var y=arguments.length,x=new Array(y>2?y-2:0),k=2;k<y;k++)x[k-2]=arguments[k];g=c[s].apply(c,x)}return g}}},{key:"merge",value:function(n,s){return Ve.extend(n,s)}}]),ue}();Qs.exports=di},1176:Qs=>{self,Qs.exports=function(){var Lr={3099:function(Re){Re.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},6077:function(Re,e,Y){var Ae=Y(111);Re.exports=function(ke){if(!Ae(ke)&&null!==ke)throw TypeError("Can't set "+String(ke)+" as a prototype");return ke}},1223:function(Re,e,Y){var Ae=Y(5112),ke=Y(30),Ee=Y(3070),Oe=Ae("unscopables"),Ye=Array.prototype;null==Ye[Oe]&&Ee.f(Ye,Oe,{configurable:!0,value:ke(null)}),Re.exports=function(Xe){Ye[Oe][Xe]=!0}},1530:function(Re,e,Y){"use strict";var Ae=Y(8710).charAt;Re.exports=function(ke,Ee,Oe){return Ee+(Oe?Ae(ke,Ee).length:1)}},5787:function(Re){Re.exports=function(e,Y,Ae){if(!(e instanceof Y))throw TypeError("Incorrect "+(Ae?Ae+" ":"")+"invocation");return e}},9670:function(Re,e,Y){var Ae=Y(111);Re.exports=function(ke){if(!Ae(ke))throw TypeError(String(ke)+" is not an object");return ke}},4019:function(Re){Re.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(Re,e,Y){"use strict";var ai,Ae=Y(4019),ke=Y(9781),Ee=Y(7854),Oe=Y(111),Ye=Y(6656),Xe=Y(648),et=Y(8880),dt=Y(1320),St=Y(3070).f,it=Y(9518),pt=Y(7674),yt=Y(5112),Qt=Y(9711),Ve=Ee.Int8Array,Zt=Ve&&Ve.prototype,ei=Ee.Uint8ClampedArray,rt=ei&&ei.prototype,Kt=Ve&&it(Ve),Yt=Zt&&it(Zt),Nt=Object.prototype,ct=Nt.isPrototypeOf,Vt=yt("toStringTag"),qt=Qt("TYPED_ARRAY_TAG"),ri=Ae&&!!pt&&"Opera"!==Xe(Ee.opera),Li=!1,fi={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Mi={BigInt64Array:8,BigUint64Array:8},mn=function(qi){if(!Oe(qi))return!1;var Hn=Xe(qi);return Ye(fi,Hn)||Ye(Mi,Hn)};for(ai in fi)Ee[ai]||(ri=!1);if((!ri||"function"!=typeof Kt||Kt===Function.prototype)&&(Kt=function(){throw TypeError("Incorrect invocation")},ri))for(ai in fi)Ee[ai]&&pt(Ee[ai],Kt);if((!ri||!Yt||Yt===Nt)&&(Yt=Kt.prototype,ri))for(ai in fi)Ee[ai]&&pt(Ee[ai].prototype,Yt);if(ri&&it(rt)!==Yt&&pt(rt,Yt),ke&&!Ye(Yt,Vt))for(ai in Li=!0,St(Yt,Vt,{get:function(){return Oe(this)?this[qt]:void 0}}),fi)Ee[ai]&&et(Ee[ai],qt,ai);Re.exports={NATIVE_ARRAY_BUFFER_VIEWS:ri,TYPED_ARRAY_TAG:Li&&qt,aTypedArray:function(qi){if(mn(qi))return qi;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(qi){if(pt){if(ct.call(Kt,qi))return qi}else for(var Hn in fi)if(Ye(fi,ai)){var Rn=Ee[Hn];if(Rn&&(qi===Rn||ct.call(Rn,qi)))return qi}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(qi,Hn,Rn){if(ke){if(Rn)for(var xn in fi){var Pi=Ee[xn];Pi&&Ye(Pi.prototype,qi)&&delete Pi.prototype[qi]}(!Yt[qi]||Rn)&&dt(Yt,qi,Rn?Hn:ri&&Zt[qi]||Hn)}},exportTypedArrayStaticMethod:function(qi,Hn,Rn){var xn,Pi;if(ke){if(pt){if(Rn)for(xn in fi)(Pi=Ee[xn])&&Ye(Pi,qi)&&delete Pi[qi];if(Kt[qi]&&!Rn)return;try{return dt(Kt,qi,Rn?Hn:ri&&Ve[qi]||Hn)}catch{}}for(xn in fi)(Pi=Ee[xn])&&(!Pi[qi]||Rn)&&dt(Pi,qi,Hn)}},isView:function(Hn){if(!Oe(Hn))return!1;var Rn=Xe(Hn);return"DataView"===Rn||Ye(fi,Rn)||Ye(Mi,Rn)},isTypedArray:mn,TypedArray:Kt,TypedArrayPrototype:Yt}},3331:function(Re,e,Y){"use strict";var Ae=Y(7854),ke=Y(9781),Ee=Y(4019),Oe=Y(8880),Ye=Y(2248),Xe=Y(7293),et=Y(5787),dt=Y(9958),St=Y(7466),it=Y(7067),pt=Y(1179),yt=Y(9518),Qt=Y(7674),Ve=Y(8006).f,Zt=Y(3070).f,ei=Y(1285),rt=Y(8003),Kt=Y(9909),Yt=Kt.get,Nt=Kt.set,ct="ArrayBuffer",Vt="DataView",qt="prototype",Li="Wrong index",ai=Ae[ct],fi=ai,Mi=Ae[Vt],Yi=Mi&&Mi[qt],mn=Object.prototype,ln=Ae.RangeError,zn=pt.pack,jt=pt.unpack,Di=function($i){return[255&$i]},qi=function($i){return[255&$i,$i>>8&255]},Hn=function($i){return[255&$i,$i>>8&255,$i>>16&255,$i>>24&255]},Rn=function($i){return $i[3]<<24|$i[2]<<16|$i[1]<<8|$i[0]},xn=function($i){return zn($i,23,4)},Pi=function($i){return zn($i,52,8)},gr=function($i,gi){Zt($i[qt],gi,{get:function(){return Yt(this)[gi]}})},tr=function($i,gi,un,Mn){var Tr=it(un),kr=Yt($i);if(Tr+gi>kr.byteLength)throw ln(Li);var xr=Yt(kr.buffer).bytes,_r=Tr+kr.byteOffset,ir=xr.slice(_r,_r+gi);return Mn?ir:ir.reverse()},qn=function($i,gi,un,Mn,Tr,kr){var xr=it(un),_r=Yt($i);if(xr+gi>_r.byteLength)throw ln(Li);for(var ir=Yt(_r.buffer).bytes,yn=xr+_r.byteOffset,qr=Mn(+Tr),Sr=0;Sr<gi;Sr++)ir[yn+Sr]=qr[kr?Sr:gi-Sr-1]};if(Ee){if(!Xe(function(){ai(1)})||!Xe(function(){new ai(-1)})||Xe(function(){return new ai,new ai(1.5),new ai(NaN),ai.name!=ct})){for(var Vi,hn=(fi=function(gi){return et(this,fi),new ai(it(gi))})[qt]=ai[qt],Ui=Ve(ai),cn=0;Ui.length>cn;)(Vi=Ui[cn++])in fi||Oe(fi,Vi,ai[Vi]);hn.constructor=fi}Qt&&yt(Yi)!==mn&&Qt(Yi,mn);var Oi=new Mi(new fi(2)),Bn=Yi.setInt8;Oi.setInt8(0,2147483648),Oi.setInt8(1,2147483649),(Oi.getInt8(0)||!Oi.getInt8(1))&&Ye(Yi,{setInt8:function(gi,un){Bn.call(this,gi,un<<24>>24)},setUint8:function(gi,un){Bn.call(this,gi,un<<24>>24)}},{unsafe:!0})}else fi=function(gi){et(this,fi,ct);var un=it(gi);Nt(this,{bytes:ei.call(new Array(un),0),byteLength:un}),ke||(this.byteLength=un)},Mi=function(gi,un,Mn){et(this,Mi,Vt),et(gi,fi,Vt);var Tr=Yt(gi).byteLength,kr=dt(un);if(kr<0||kr>Tr)throw ln("Wrong offset");if(kr+(Mn=void 0===Mn?Tr-kr:St(Mn))>Tr)throw ln("Wrong length");Nt(this,{buffer:gi,byteLength:Mn,byteOffset:kr}),ke||(this.buffer=gi,this.byteLength=Mn,this.byteOffset=kr)},ke&&(gr(fi,"byteLength"),gr(Mi,"buffer"),gr(Mi,"byteLength"),gr(Mi,"byteOffset")),Ye(Mi[qt],{getInt8:function(gi){return tr(this,1,gi)[0]<<24>>24},getUint8:function(gi){return tr(this,1,gi)[0]},getInt16:function(gi){var un=tr(this,2,gi,arguments.length>1?arguments[1]:void 0);return(un[1]<<8|un[0])<<16>>16},getUint16:function(gi){var un=tr(this,2,gi,arguments.length>1?arguments[1]:void 0);return un[1]<<8|un[0]},getInt32:function(gi){return Rn(tr(this,4,gi,arguments.length>1?arguments[1]:void 0))},getUint32:function(gi){return Rn(tr(this,4,gi,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(gi){return jt(tr(this,4,gi,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(gi){return jt(tr(this,8,gi,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(gi,un){qn(this,1,gi,Di,un)},setUint8:function(gi,un){qn(this,1,gi,Di,un)},setInt16:function(gi,un){qn(this,2,gi,qi,un,arguments.length>2?arguments[2]:void 0)},setUint16:function(gi,un){qn(this,2,gi,qi,un,arguments.length>2?arguments[2]:void 0)},setInt32:function(gi,un){qn(this,4,gi,Hn,un,arguments.length>2?arguments[2]:void 0)},setUint32:function(gi,un){qn(this,4,gi,Hn,un,arguments.length>2?arguments[2]:void 0)},setFloat32:function(gi,un){qn(this,4,gi,xn,un,arguments.length>2?arguments[2]:void 0)},setFloat64:function(gi,un){qn(this,8,gi,Pi,un,arguments.length>2?arguments[2]:void 0)}});rt(fi,ct),rt(Mi,Vt),Re.exports={ArrayBuffer:fi,DataView:Mi}},1048:function(Re,e,Y){"use strict";var Ae=Y(7908),ke=Y(1400),Ee=Y(7466),Oe=Math.min;Re.exports=[].copyWithin||function(Xe,et){var dt=Ae(this),St=Ee(dt.length),it=ke(Xe,St),pt=ke(et,St),yt=arguments.length>2?arguments[2]:void 0,Qt=Oe((void 0===yt?St:ke(yt,St))-pt,St-it),Ve=1;for(pt<it&&it<pt+Qt&&(Ve=-1,pt+=Qt-1,it+=Qt-1);Qt-- >0;)pt in dt?dt[it]=dt[pt]:delete dt[it],it+=Ve,pt+=Ve;return dt}},1285:function(Re,e,Y){"use strict";var Ae=Y(7908),ke=Y(1400),Ee=Y(7466);Re.exports=function(Ye){for(var Xe=Ae(this),et=Ee(Xe.length),dt=arguments.length,St=ke(dt>1?arguments[1]:void 0,et),it=dt>2?arguments[2]:void 0,pt=void 0===it?et:ke(it,et);pt>St;)Xe[St++]=Ye;return Xe}},8533:function(Re,e,Y){"use strict";var Ae=Y(2092).forEach,Ee=Y(9341)("forEach");Re.exports=Ee?[].forEach:function(Ye){return Ae(this,Ye,arguments.length>1?arguments[1]:void 0)}},8457:function(Re,e,Y){"use strict";var Ae=Y(9974),ke=Y(7908),Ee=Y(3411),Oe=Y(7659),Ye=Y(7466),Xe=Y(6135),et=Y(1246);Re.exports=function(St){var rt,Kt,Yt,Nt,ct,Vt,it=ke(St),pt="function"==typeof this?this:Array,yt=arguments.length,Qt=yt>1?arguments[1]:void 0,Ve=void 0!==Qt,Zt=et(it),ei=0;if(Ve&&(Qt=Ae(Qt,yt>2?arguments[2]:void 0,2)),null==Zt||pt==Array&&Oe(Zt))for(Kt=new pt(rt=Ye(it.length));rt>ei;ei++)Vt=Ve?Qt(it[ei],ei):it[ei],Xe(Kt,ei,Vt);else for(ct=(Nt=Zt.call(it)).next,Kt=new pt;!(Yt=ct.call(Nt)).done;ei++)Vt=Ve?Ee(Nt,Qt,[Yt.value,ei],!0):Yt.value,Xe(Kt,ei,Vt);return Kt.length=ei,Kt}},1318:function(Re,e,Y){var Ae=Y(5656),ke=Y(7466),Ee=Y(1400),Oe=function(Ye){return function(Xe,et,dt){var yt,St=Ae(Xe),it=ke(St.length),pt=Ee(dt,it);if(Ye&&et!=et){for(;it>pt;)if((yt=St[pt++])!=yt)return!0}else for(;it>pt;pt++)if((Ye||pt in St)&&St[pt]===et)return Ye||pt||0;return!Ye&&-1}};Re.exports={includes:Oe(!0),indexOf:Oe(!1)}},2092:function(Re,e,Y){var Ae=Y(9974),ke=Y(8361),Ee=Y(7908),Oe=Y(7466),Ye=Y(5417),Xe=[].push,et=function(dt){var St=1==dt,it=2==dt,pt=3==dt,yt=4==dt,Qt=6==dt,Ve=7==dt,Zt=5==dt||Qt;return function(ei,rt,Kt,Yt){for(var fi,Mi,Nt=Ee(ei),ct=ke(Nt),Vt=Ae(rt,Kt,3),qt=Oe(ct.length),ri=0,Li=Yt||Ye,ai=St?Li(ei,qt):it||Ve?Li(ei,0):void 0;qt>ri;ri++)if((Zt||ri in ct)&&(Mi=Vt(fi=ct[ri],ri,Nt),dt))if(St)ai[ri]=Mi;else if(Mi)switch(dt){case 3:return!0;case 5:return fi;case 6:return ri;case 2:Xe.call(ai,fi)}else switch(dt){case 4:return!1;case 7:Xe.call(ai,fi)}return Qt?-1:pt||yt?yt:ai}};Re.exports={forEach:et(0),map:et(1),filter:et(2),some:et(3),every:et(4),find:et(5),findIndex:et(6),filterOut:et(7)}},6583:function(Re,e,Y){"use strict";var Ae=Y(5656),ke=Y(9958),Ee=Y(7466),Oe=Y(9341),Ye=Math.min,Xe=[].lastIndexOf,et=!!Xe&&1/[1].lastIndexOf(1,-0)<0,dt=Oe("lastIndexOf");Re.exports=et||!dt?function(pt){if(et)return Xe.apply(this,arguments)||0;var yt=Ae(this),Qt=Ee(yt.length),Ve=Qt-1;for(arguments.length>1&&(Ve=Ye(Ve,ke(arguments[1]))),Ve<0&&(Ve=Qt+Ve);Ve>=0;Ve--)if(Ve in yt&&yt[Ve]===pt)return Ve||0;return-1}:Xe},1194:function(Re,e,Y){var Ae=Y(7293),ke=Y(5112),Ee=Y(7392),Oe=ke("species");Re.exports=function(Ye){return Ee>=51||!Ae(function(){var Xe=[];return(Xe.constructor={})[Oe]=function(){return{foo:1}},1!==Xe[Ye](Boolean).foo})}},9341:function(Re,e,Y){"use strict";var Ae=Y(7293);Re.exports=function(ke,Ee){var Oe=[][ke];return!!Oe&&Ae(function(){Oe.call(null,Ee||function(){throw 1},1)})}},3671:function(Re,e,Y){var Ae=Y(3099),ke=Y(7908),Ee=Y(8361),Oe=Y(7466),Ye=function(Xe){return function(et,dt,St,it){Ae(dt);var pt=ke(et),yt=Ee(pt),Qt=Oe(pt.length),Ve=Xe?Qt-1:0,Zt=Xe?-1:1;if(St<2)for(;;){if(Ve in yt){it=yt[Ve],Ve+=Zt;break}if(Ve+=Zt,Xe?Ve<0:Qt<=Ve)throw TypeError("Reduce of empty array with no initial value")}for(;Xe?Ve>=0:Qt>Ve;Ve+=Zt)Ve in yt&&(it=dt(it,yt[Ve],Ve,pt));return it}};Re.exports={left:Ye(!1),right:Ye(!0)}},5417:function(Re,e,Y){var Ae=Y(111),ke=Y(3157),Oe=Y(5112)("species");Re.exports=function(Ye,Xe){var et;return ke(Ye)&&("function"!=typeof(et=Ye.constructor)||et!==Array&&!ke(et.prototype)?Ae(et)&&null===(et=et[Oe])&&(et=void 0):et=void 0),new(void 0===et?Array:et)(0===Xe?0:Xe)}},3411:function(Re,e,Y){var Ae=Y(9670),ke=Y(9212);Re.exports=function(Ee,Oe,Ye,Xe){try{return Xe?Oe(Ae(Ye)[0],Ye[1]):Oe(Ye)}catch(et){throw ke(Ee),et}}},7072:function(Re,e,Y){var ke=Y(5112)("iterator"),Ee=!1;try{var Oe=0,Ye={next:function(){return{done:!!Oe++}},return:function(){Ee=!0}};Ye[ke]=function(){return this},Array.from(Ye,function(){throw 2})}catch{}Re.exports=function(Xe,et){if(!et&&!Ee)return!1;var dt=!1;try{var St={};St[ke]=function(){return{next:function(){return{done:dt=!0}}}},Xe(St)}catch{}return dt}},4326:function(Re){var e={}.toString;Re.exports=function(Y){return e.call(Y).slice(8,-1)}},648:function(Re,e,Y){var Ae=Y(1694),ke=Y(4326),Oe=Y(5112)("toStringTag"),Ye="Arguments"==ke(function(){return arguments}());Re.exports=Ae?ke:function(et){var dt,St,it;return void 0===et?"Undefined":null===et?"Null":"string"==typeof(St=function(et,dt){try{return et[dt]}catch{}}(dt=Object(et),Oe))?St:Ye?ke(dt):"Object"==(it=ke(dt))&&"function"==typeof dt.callee?"Arguments":it}},9920:function(Re,e,Y){var Ae=Y(6656),ke=Y(3887),Ee=Y(1236),Oe=Y(3070);Re.exports=function(Ye,Xe){for(var et=ke(Xe),dt=Oe.f,St=Ee.f,it=0;it<et.length;it++){var pt=et[it];Ae(Ye,pt)||dt(Ye,pt,St(Xe,pt))}}},8544:function(Re,e,Y){var Ae=Y(7293);Re.exports=!Ae(function(){function ke(){}return ke.prototype.constructor=null,Object.getPrototypeOf(new ke)!==ke.prototype})},4994:function(Re,e,Y){"use strict";var Ae=Y(3383).IteratorPrototype,ke=Y(30),Ee=Y(9114),Oe=Y(8003),Ye=Y(7497),Xe=function(){return this};Re.exports=function(et,dt,St){var it=dt+" Iterator";return et.prototype=ke(Ae,{next:Ee(1,St)}),Oe(et,it,!1,!0),Ye[it]=Xe,et}},8880:function(Re,e,Y){var Ae=Y(9781),ke=Y(3070),Ee=Y(9114);Re.exports=Ae?function(Oe,Ye,Xe){return ke.f(Oe,Ye,Ee(1,Xe))}:function(Oe,Ye,Xe){return Oe[Ye]=Xe,Oe}},9114:function(Re){Re.exports=function(e,Y){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:Y}}},6135:function(Re,e,Y){"use strict";var Ae=Y(7593),ke=Y(3070),Ee=Y(9114);Re.exports=function(Oe,Ye,Xe){var et=Ae(Ye);et in Oe?ke.f(Oe,et,Ee(0,Xe)):Oe[et]=Xe}},654:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(4994),Ee=Y(9518),Oe=Y(7674),Ye=Y(8003),Xe=Y(8880),et=Y(1320),dt=Y(5112),St=Y(1913),it=Y(7497),pt=Y(3383),yt=pt.IteratorPrototype,Qt=pt.BUGGY_SAFARI_ITERATORS,Ve=dt("iterator"),ei="values",rt="entries",Kt=function(){return this};Re.exports=function(Yt,Nt,ct,Vt,qt,ri,Li){ke(ct,Nt,Vt);var jt,Di,qi,ai=function(Hn){if(Hn===qt&&ln)return ln;if(!Qt&&Hn in Yi)return Yi[Hn];switch(Hn){case"keys":case ei:case rt:return function(){return new ct(this,Hn)}}return function(){return new ct(this)}},fi=Nt+" Iterator",Mi=!1,Yi=Yt.prototype,mn=Yi[Ve]||Yi["@@iterator"]||qt&&Yi[qt],ln=!Qt&&mn||ai(qt),zn="Array"==Nt&&Yi.entries||mn;if(zn&&(jt=Ee(zn.call(new Yt)),yt!==Object.prototype&&jt.next&&(!St&&Ee(jt)!==yt&&(Oe?Oe(jt,yt):"function"!=typeof jt[Ve]&&Xe(jt,Ve,Kt)),Ye(jt,fi,!0,!0),St&&(it[fi]=Kt))),qt==ei&&mn&&mn.name!==ei&&(Mi=!0,ln=function(){return mn.call(this)}),(!St||Li)&&Yi[Ve]!==ln&&Xe(Yi,Ve,ln),it[Nt]=ln,qt)if(Di={values:ai(ei),keys:ri?ln:ai("keys"),entries:ai(rt)},Li)for(qi in Di)(Qt||Mi||!(qi in Yi))&&et(Yi,qi,Di[qi]);else Ae({target:Nt,proto:!0,forced:Qt||Mi},Di);return Di}},9781:function(Re,e,Y){var Ae=Y(7293);Re.exports=!Ae(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(Re,e,Y){var Ae=Y(7854),ke=Y(111),Ee=Ae.document,Oe=ke(Ee)&&ke(Ee.createElement);Re.exports=function(Ye){return Oe?Ee.createElement(Ye):{}}},8324:function(Re){Re.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(Re,e,Y){var Ae=Y(5005);Re.exports=Ae("navigator","userAgent")||""},7392:function(Re,e,Y){var Xe,et,Ae=Y(7854),ke=Y(8113),Ee=Ae.process,Oe=Ee&&Ee.versions,Ye=Oe&&Oe.v8;Ye?et=(Xe=Ye.split("."))[0]+Xe[1]:ke&&(!(Xe=ke.match(/Edge\/(\d+)/))||Xe[1]>=74)&&(Xe=ke.match(/Chrome\/(\d+)/))&&(et=Xe[1]),Re.exports=et&&+et},748:function(Re){Re.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(Re,e,Y){var Ae=Y(7854),ke=Y(1236).f,Ee=Y(8880),Oe=Y(1320),Ye=Y(3505),Xe=Y(9920),et=Y(4705);Re.exports=function(dt,St){var Ve,Zt,ei,rt,Kt,it=dt.target,pt=dt.global,yt=dt.stat;if(Ve=pt?Ae:yt?Ae[it]||Ye(it,{}):(Ae[it]||{}).prototype)for(Zt in St){if(rt=St[Zt],ei=dt.noTargetGet?(Kt=ke(Ve,Zt))&&Kt.value:Ve[Zt],!et(pt?Zt:it+(yt?".":"#")+Zt,dt.forced)&&void 0!==ei){if(typeof rt==typeof ei)continue;Xe(rt,ei)}(dt.sham||ei&&ei.sham)&&Ee(rt,"sham",!0),Oe(Ve,Zt,rt,dt)}}},7293:function(Re){Re.exports=function(e){try{return!!e()}catch{return!0}}},7007:function(Re,e,Y){"use strict";Y(4916);var Ae=Y(1320),ke=Y(7293),Ee=Y(5112),Oe=Y(2261),Ye=Y(8880),Xe=Ee("species"),et=!ke(function(){var yt=/./;return yt.exec=function(){var Qt=[];return Qt.groups={a:"7"},Qt},"7"!=="".replace(yt,"$<a>")}),dt="$0"==="a".replace(/./,"$0"),St=Ee("replace"),it=!!/./[St]&&""===/./[St]("a","$0"),pt=!ke(function(){var yt=/(?:)/,Qt=yt.exec;yt.exec=function(){return Qt.apply(this,arguments)};var Ve="ab".split(yt);return 2!==Ve.length||"a"!==Ve[0]||"b"!==Ve[1]});Re.exports=function(yt,Qt,Ve,Zt){var ei=Ee(yt),rt=!ke(function(){var qt={};return qt[ei]=function(){return 7},7!=""[yt](qt)}),Kt=rt&&!ke(function(){var qt=!1,ri=/a/;return"split"===yt&&((ri={}).constructor={},ri.constructor[Xe]=function(){return ri},ri.flags="",ri[ei]=/./[ei]),ri.exec=function(){return qt=!0,null},ri[ei](""),!qt});if(!rt||!Kt||"replace"===yt&&(!et||!dt||it)||"split"===yt&&!pt){var Yt=/./[ei],Nt=Ve(ei,""[yt],function(qt,ri,Li,ai,fi){return ri.exec===Oe?rt&&!fi?{done:!0,value:Yt.call(ri,Li,ai)}:{done:!0,value:qt.call(Li,ri,ai)}:{done:!1}},{REPLACE_KEEPS_$0:dt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:it}),Vt=Nt[1];Ae(String.prototype,yt,Nt[0]),Ae(RegExp.prototype,ei,2==Qt?function(qt,ri){return Vt.call(qt,this,ri)}:function(qt){return Vt.call(qt,this)})}Zt&&Ye(RegExp.prototype[ei],"sham",!0)}},9974:function(Re,e,Y){var Ae=Y(3099);Re.exports=function(ke,Ee,Oe){if(Ae(ke),void 0===Ee)return ke;switch(Oe){case 0:return function(){return ke.call(Ee)};case 1:return function(Ye){return ke.call(Ee,Ye)};case 2:return function(Ye,Xe){return ke.call(Ee,Ye,Xe)};case 3:return function(Ye,Xe,et){return ke.call(Ee,Ye,Xe,et)}}return function(){return ke.apply(Ee,arguments)}}},5005:function(Re,e,Y){var Ae=Y(857),ke=Y(7854),Ee=function(Oe){return"function"==typeof Oe?Oe:void 0};Re.exports=function(Oe,Ye){return arguments.length<2?Ee(Ae[Oe])||Ee(ke[Oe]):Ae[Oe]&&Ae[Oe][Ye]||ke[Oe]&&ke[Oe][Ye]}},1246:function(Re,e,Y){var Ae=Y(648),ke=Y(7497),Oe=Y(5112)("iterator");Re.exports=function(Ye){if(null!=Ye)return Ye[Oe]||Ye["@@iterator"]||ke[Ae(Ye)]}},8554:function(Re,e,Y){var Ae=Y(9670),ke=Y(1246);Re.exports=function(Ee){var Oe=ke(Ee);if("function"!=typeof Oe)throw TypeError(String(Ee)+" is not iterable");return Ae(Oe.call(Ee))}},647:function(Re,e,Y){var Ae=Y(7908),ke=Math.floor,Ee="".replace,Oe=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ye=/\$([$&'`]|\d\d?)/g;Re.exports=function(Xe,et,dt,St,it,pt){var yt=dt+Xe.length,Qt=St.length,Ve=Ye;return void 0!==it&&(it=Ae(it),Ve=Oe),Ee.call(pt,Ve,function(Zt,ei){var rt;switch(ei.charAt(0)){case"$":return"$";case"&":return Xe;case"`":return et.slice(0,dt);case"'":return et.slice(yt);case"<":rt=it[ei.slice(1,-1)];break;default:var Kt=+ei;if(0===Kt)return Zt;if(Kt>Qt){var Yt=ke(Kt/10);return 0===Yt?Zt:Yt<=Qt?void 0===St[Yt-1]?ei.charAt(1):St[Yt-1]+ei.charAt(1):Zt}rt=St[Kt-1]}return void 0===rt?"":rt})}},7854:function(Re,e,Y){var Ae=function(ke){return ke&&ke.Math==Math&&ke};Re.exports=Ae("object"==typeof globalThis&&globalThis)||Ae("object"==typeof window&&window)||Ae("object"==typeof self&&self)||Ae("object"==typeof Y.g&&Y.g)||function(){return this}()||Function("return this")()},6656:function(Re){var e={}.hasOwnProperty;Re.exports=function(Y,Ae){return e.call(Y,Ae)}},3501:function(Re){Re.exports={}},490:function(Re,e,Y){var Ae=Y(5005);Re.exports=Ae("document","documentElement")},4664:function(Re,e,Y){var Ae=Y(9781),ke=Y(7293),Ee=Y(317);Re.exports=!Ae&&!ke(function(){return 7!=Object.defineProperty(Ee("div"),"a",{get:function(){return 7}}).a})},1179:function(Re){var e=Math.abs,Y=Math.pow,Ae=Math.floor,ke=Math.log,Ee=Math.LN2;Re.exports={pack:function(Xe,et,dt){var ei,rt,Kt,St=new Array(dt),it=8*dt-et-1,pt=(1<<it)-1,yt=pt>>1,Qt=23===et?Y(2,-24)-Y(2,-77):0,Ve=Xe<0||0===Xe&&1/Xe<0?1:0,Zt=0;for((Xe=e(Xe))!=Xe||Xe===1/0?(rt=Xe!=Xe?1:0,ei=pt):(ei=Ae(ke(Xe)/Ee),Xe*(Kt=Y(2,-ei))<1&&(ei--,Kt*=2),(Xe+=ei+yt>=1?Qt/Kt:Qt*Y(2,1-yt))*Kt>=2&&(ei++,Kt/=2),ei+yt>=pt?(rt=0,ei=pt):ei+yt>=1?(rt=(Xe*Kt-1)*Y(2,et),ei+=yt):(rt=Xe*Y(2,yt-1)*Y(2,et),ei=0));et>=8;St[Zt++]=255&rt,rt/=256,et-=8);for(ei=ei<<et|rt,it+=et;it>0;St[Zt++]=255&ei,ei/=256,it-=8);return St[--Zt]|=128*Ve,St},unpack:function(Xe,et){var ei,dt=Xe.length,St=8*dt-et-1,it=(1<<St)-1,pt=it>>1,yt=St-7,Qt=dt-1,Ve=Xe[Qt--],Zt=127&Ve;for(Ve>>=7;yt>0;Zt=256*Zt+Xe[Qt],Qt--,yt-=8);for(ei=Zt&(1<<-yt)-1,Zt>>=-yt,yt+=et;yt>0;ei=256*ei+Xe[Qt],Qt--,yt-=8);if(0===Zt)Zt=1-pt;else{if(Zt===it)return ei?NaN:Ve?-1/0:1/0;ei+=Y(2,et),Zt-=pt}return(Ve?-1:1)*ei*Y(2,Zt-et)}}},8361:function(Re,e,Y){var Ae=Y(7293),ke=Y(4326),Ee="".split;Re.exports=Ae(function(){return!Object("z").propertyIsEnumerable(0)})?function(Oe){return"String"==ke(Oe)?Ee.call(Oe,""):Object(Oe)}:Object},9587:function(Re,e,Y){var Ae=Y(111),ke=Y(7674);Re.exports=function(Ee,Oe,Ye){var Xe,et;return ke&&"function"==typeof(Xe=Oe.constructor)&&Xe!==Ye&&Ae(et=Xe.prototype)&&et!==Ye.prototype&&ke(Ee,et),Ee}},2788:function(Re,e,Y){var Ae=Y(5465),ke=Function.toString;"function"!=typeof Ae.inspectSource&&(Ae.inspectSource=function(Ee){return ke.call(Ee)}),Re.exports=Ae.inspectSource},9909:function(Re,e,Y){var it,pt,yt,Ae=Y(8536),ke=Y(7854),Ee=Y(111),Oe=Y(8880),Ye=Y(6656),Xe=Y(5465),et=Y(6200),dt=Y(3501);if(Ae){var Zt=Xe.state||(Xe.state=new(0,ke.WeakMap)),ei=Zt.get,rt=Zt.has,Kt=Zt.set;it=function(Nt,ct){return ct.facade=Nt,Kt.call(Zt,Nt,ct),ct},pt=function(Nt){return ei.call(Zt,Nt)||{}},yt=function(Nt){return rt.call(Zt,Nt)}}else{var Yt=et("state");dt[Yt]=!0,it=function(Nt,ct){return ct.facade=Nt,Oe(Nt,Yt,ct),ct},pt=function(Nt){return Ye(Nt,Yt)?Nt[Yt]:{}},yt=function(Nt){return Ye(Nt,Yt)}}Re.exports={set:it,get:pt,has:yt,enforce:function(Nt){return yt(Nt)?pt(Nt):it(Nt,{})},getterFor:function(Nt){return function(ct){var Vt;if(!Ee(ct)||(Vt=pt(ct)).type!==Nt)throw TypeError("Incompatible receiver, "+Nt+" required");return Vt}}}},7659:function(Re,e,Y){var Ae=Y(5112),ke=Y(7497),Ee=Ae("iterator"),Oe=Array.prototype;Re.exports=function(Ye){return void 0!==Ye&&(ke.Array===Ye||Oe[Ee]===Ye)}},3157:function(Re,e,Y){var Ae=Y(4326);Re.exports=Array.isArray||function(Ee){return"Array"==Ae(Ee)}},4705:function(Re,e,Y){var Ae=Y(7293),ke=/#|\.prototype\./,Ee=function(dt,St){var it=Ye[Oe(dt)];return it==et||it!=Xe&&("function"==typeof St?Ae(St):!!St)},Oe=Ee.normalize=function(dt){return String(dt).replace(ke,".").toLowerCase()},Ye=Ee.data={},Xe=Ee.NATIVE="N",et=Ee.POLYFILL="P";Re.exports=Ee},111:function(Re){Re.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:function(Re){Re.exports=!1},7850:function(Re,e,Y){var Ae=Y(111),ke=Y(4326),Oe=Y(5112)("match");Re.exports=function(Ye){var Xe;return Ae(Ye)&&(void 0!==(Xe=Ye[Oe])?!!Xe:"RegExp"==ke(Ye))}},9212:function(Re,e,Y){var Ae=Y(9670);Re.exports=function(ke){var Ee=ke.return;if(void 0!==Ee)return Ae(Ee.call(ke)).value}},3383:function(Re,e,Y){"use strict";var it,pt,yt,Ae=Y(7293),ke=Y(9518),Ee=Y(8880),Oe=Y(6656),Ye=Y(5112),Xe=Y(1913),et=Ye("iterator"),dt=!1;[].keys&&("next"in(yt=[].keys())?(pt=ke(ke(yt)))!==Object.prototype&&(it=pt):dt=!0);var Qt=null==it||Ae(function(){var Ve={};return it[et].call(Ve)!==Ve});Qt&&(it={}),(!Xe||Qt)&&!Oe(it,et)&&Ee(it,et,function(){return this}),Re.exports={IteratorPrototype:it,BUGGY_SAFARI_ITERATORS:dt}},7497:function(Re){Re.exports={}},133:function(Re,e,Y){var Ae=Y(7293);Re.exports=!!Object.getOwnPropertySymbols&&!Ae(function(){return!String(Symbol())})},590:function(Re,e,Y){var Ae=Y(7293),ke=Y(5112),Ee=Y(1913),Oe=ke("iterator");Re.exports=!Ae(function(){var Ye=new URL("b?a=1&b=2&c=3","http://a"),Xe=Ye.searchParams,et="";return Ye.pathname="c%20d",Xe.forEach(function(dt,St){Xe.delete("b"),et+=St+dt}),Ee&&!Ye.toJSON||!Xe.sort||"http://a/c%20d?a=1&c=3"!==Ye.href||"3"!==Xe.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!Xe[Oe]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==et||"x"!==new URL("http://x",void 0).host})},8536:function(Re,e,Y){var Ae=Y(7854),ke=Y(2788),Ee=Ae.WeakMap;Re.exports="function"==typeof Ee&&/native code/.test(ke(Ee))},1574:function(Re,e,Y){"use strict";var Ae=Y(9781),ke=Y(7293),Ee=Y(1956),Oe=Y(5181),Ye=Y(5296),Xe=Y(7908),et=Y(8361),dt=Object.assign,St=Object.defineProperty;Re.exports=!dt||ke(function(){if(Ae&&1!==dt({b:1},dt(St({},"a",{enumerable:!0,get:function(){St(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var it={},pt={},yt=Symbol(),Qt="abcdefghijklmnopqrst";return it[yt]=7,Qt.split("").forEach(function(Ve){pt[Ve]=Ve}),7!=dt({},it)[yt]||Ee(dt({},pt)).join("")!=Qt})?function(pt,yt){for(var Qt=Xe(pt),Ve=arguments.length,Zt=1,ei=Oe.f,rt=Ye.f;Ve>Zt;)for(var Vt,Kt=et(arguments[Zt++]),Yt=ei?Ee(Kt).concat(ei(Kt)):Ee(Kt),Nt=Yt.length,ct=0;Nt>ct;)Vt=Yt[ct++],(!Ae||rt.call(Kt,Vt))&&(Qt[Vt]=Kt[Vt]);return Qt}:dt},30:function(Re,e,Y){var rt,Ae=Y(9670),ke=Y(6048),Ee=Y(748),Oe=Y(3501),Ye=Y(490),Xe=Y(317),et=Y(6200),it="prototype",pt="script",yt=et("IE_PROTO"),Qt=function(){},Ve=function(Yt){return"<script>"+Yt+"</"+pt+">"},Kt=function(){try{rt=document.domain&&new ActiveXObject("htmlfile")}catch{}Kt=rt?function(Yt){Yt.write(Ve("")),Yt.close();var Nt=Yt.parentWindow.Object;return Yt=null,Nt}(rt):function(){var ct,Yt=Xe("iframe");return Yt.style.display="none",Ye.appendChild(Yt),Yt.src=String("javascript:"),(ct=Yt.contentWindow.document).open(),ct.write(Ve("document.F=Object")),ct.close(),ct.F}();for(var Yt=Ee.length;Yt--;)delete Kt[it][Ee[Yt]];return Kt()};Oe[yt]=!0,Re.exports=Object.create||function(Nt,ct){var Vt;return null!==Nt?(Qt[it]=Ae(Nt),Vt=new Qt,Qt[it]=null,Vt[yt]=Nt):Vt=Kt(),void 0===ct?Vt:ke(Vt,ct)}},6048:function(Re,e,Y){var Ae=Y(9781),ke=Y(3070),Ee=Y(9670),Oe=Y(1956);Re.exports=Ae?Object.defineProperties:function(Xe,et){Ee(Xe);for(var pt,dt=Oe(et),St=dt.length,it=0;St>it;)ke.f(Xe,pt=dt[it++],et[pt]);return Xe}},3070:function(Re,e,Y){var Ae=Y(9781),ke=Y(4664),Ee=Y(9670),Oe=Y(7593),Ye=Object.defineProperty;e.f=Ae?Ye:function(et,dt,St){if(Ee(et),dt=Oe(dt,!0),Ee(St),ke)try{return Ye(et,dt,St)}catch{}if("get"in St||"set"in St)throw TypeError("Accessors not supported");return"value"in St&&(et[dt]=St.value),et}},1236:function(Re,e,Y){var Ae=Y(9781),ke=Y(5296),Ee=Y(9114),Oe=Y(5656),Ye=Y(7593),Xe=Y(6656),et=Y(4664),dt=Object.getOwnPropertyDescriptor;e.f=Ae?dt:function(it,pt){if(it=Oe(it),pt=Ye(pt,!0),et)try{return dt(it,pt)}catch{}if(Xe(it,pt))return Ee(!ke.f.call(it,pt),it[pt])}},8006:function(Re,e,Y){var Ae=Y(6324),Ee=Y(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(Ye){return Ae(Ye,Ee)}},5181:function(Re,e){e.f=Object.getOwnPropertySymbols},9518:function(Re,e,Y){var Ae=Y(6656),ke=Y(7908),Ee=Y(6200),Oe=Y(8544),Ye=Ee("IE_PROTO"),Xe=Object.prototype;Re.exports=Oe?Object.getPrototypeOf:function(et){return et=ke(et),Ae(et,Ye)?et[Ye]:"function"==typeof et.constructor&&et instanceof et.constructor?et.constructor.prototype:et instanceof Object?Xe:null}},6324:function(Re,e,Y){var Ae=Y(6656),ke=Y(5656),Ee=Y(1318).indexOf,Oe=Y(3501);Re.exports=function(Ye,Xe){var it,et=ke(Ye),dt=0,St=[];for(it in et)!Ae(Oe,it)&&Ae(et,it)&&St.push(it);for(;Xe.length>dt;)Ae(et,it=Xe[dt++])&&(~Ee(St,it)||St.push(it));return St}},1956:function(Re,e,Y){var Ae=Y(6324),ke=Y(748);Re.exports=Object.keys||function(Oe){return Ae(Oe,ke)}},5296:function(Re,e){"use strict";var Y={}.propertyIsEnumerable,Ae=Object.getOwnPropertyDescriptor,ke=Ae&&!Y.call({1:2},1);e.f=ke?function(Oe){var Ye=Ae(this,Oe);return!!Ye&&Ye.enumerable}:Y},7674:function(Re,e,Y){var Ae=Y(9670),ke=Y(6077);Re.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var Ye,Ee=!1,Oe={};try{(Ye=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(Oe,[]),Ee=Oe instanceof Array}catch{}return function(et,dt){return Ae(et),ke(dt),Ee?Ye.call(et,dt):et.__proto__=dt,et}}():void 0)},288:function(Re,e,Y){"use strict";var Ae=Y(1694),ke=Y(648);Re.exports=Ae?{}.toString:function(){return"[object "+ke(this)+"]"}},3887:function(Re,e,Y){var Ae=Y(5005),ke=Y(8006),Ee=Y(5181),Oe=Y(9670);Re.exports=Ae("Reflect","ownKeys")||function(Xe){var et=ke.f(Oe(Xe)),dt=Ee.f;return dt?et.concat(dt(Xe)):et}},857:function(Re,e,Y){var Ae=Y(7854);Re.exports=Ae},2248:function(Re,e,Y){var Ae=Y(1320);Re.exports=function(ke,Ee,Oe){for(var Ye in Ee)Ae(ke,Ye,Ee[Ye],Oe);return ke}},1320:function(Re,e,Y){var Ae=Y(7854),ke=Y(8880),Ee=Y(6656),Oe=Y(3505),Ye=Y(2788),Xe=Y(9909),et=Xe.get,dt=Xe.enforce,St=String(String).split("String");(Re.exports=function(it,pt,yt,Qt){var rt,Ve=!!Qt&&!!Qt.unsafe,Zt=!!Qt&&!!Qt.enumerable,ei=!!Qt&&!!Qt.noTargetGet;"function"==typeof yt&&("string"==typeof pt&&!Ee(yt,"name")&&ke(yt,"name",pt),(rt=dt(yt)).source||(rt.source=St.join("string"==typeof pt?pt:""))),it!==Ae?(Ve?!ei&&it[pt]&&(Zt=!0):delete it[pt],Zt?it[pt]=yt:ke(it,pt,yt)):Zt?it[pt]=yt:Oe(pt,yt)})(Function.prototype,"toString",function(){return"function"==typeof this&&et(this).source||Ye(this)})},7651:function(Re,e,Y){var Ae=Y(4326),ke=Y(2261);Re.exports=function(Ee,Oe){var Ye=Ee.exec;if("function"==typeof Ye){var Xe=Ye.call(Ee,Oe);if("object"!=typeof Xe)throw TypeError("RegExp exec method returned something other than an Object or null");return Xe}if("RegExp"!==Ae(Ee))throw TypeError("RegExp#exec called on incompatible receiver");return ke.call(Ee,Oe)}},2261:function(Re,e,Y){"use strict";var it,pt,Ae=Y(7066),ke=Y(2999),Ee=RegExp.prototype.exec,Oe=String.prototype.replace,Ye=Ee,Xe=(pt=/b*/g,Ee.call(it=/a/,"a"),Ee.call(pt,"a"),0!==it.lastIndex||0!==pt.lastIndex),et=ke.UNSUPPORTED_Y||ke.BROKEN_CARET,dt=void 0!==/()??/.exec("")[1];(Xe||dt||et)&&(Ye=function(pt){var Qt,Ve,Zt,ei,yt=this,rt=et&&yt.sticky,Kt=Ae.call(yt),Yt=yt.source,Nt=0,ct=pt;return rt&&(-1===(Kt=Kt.replace("y","")).indexOf("g")&&(Kt+="g"),ct=String(pt).slice(yt.lastIndex),yt.lastIndex>0&&(!yt.multiline||yt.multiline&&"\n"!==pt[yt.lastIndex-1])&&(Yt="(?: "+Yt+")",ct=" "+ct,Nt++),Ve=new RegExp("^(?:"+Yt+")",Kt)),dt&&(Ve=new RegExp("^"+Yt+"$(?!\\s)",Kt)),Xe&&(Qt=yt.lastIndex),Zt=Ee.call(rt?Ve:yt,ct),rt?Zt?(Zt.input=Zt.input.slice(Nt),Zt[0]=Zt[0].slice(Nt),Zt.index=yt.lastIndex,yt.lastIndex+=Zt[0].length):yt.lastIndex=0:Xe&&Zt&&(yt.lastIndex=yt.global?Zt.index+Zt[0].length:Qt),dt&&Zt&&Zt.length>1&&Oe.call(Zt[0],Ve,function(){for(ei=1;ei<arguments.length-2;ei++)void 0===arguments[ei]&&(Zt[ei]=void 0)}),Zt}),Re.exports=Ye},7066:function(Re,e,Y){"use strict";var Ae=Y(9670);Re.exports=function(){var ke=Ae(this),Ee="";return ke.global&&(Ee+="g"),ke.ignoreCase&&(Ee+="i"),ke.multiline&&(Ee+="m"),ke.dotAll&&(Ee+="s"),ke.unicode&&(Ee+="u"),ke.sticky&&(Ee+="y"),Ee}},2999:function(Re,e,Y){"use strict";var Ae=Y(7293);function ke(Ee,Oe){return RegExp(Ee,Oe)}e.UNSUPPORTED_Y=Ae(function(){var Ee=ke("a","y");return Ee.lastIndex=2,null!=Ee.exec("abcd")}),e.BROKEN_CARET=Ae(function(){var Ee=ke("^r","gy");return Ee.lastIndex=2,null!=Ee.exec("str")})},4488:function(Re){Re.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:function(Re,e,Y){var Ae=Y(7854),ke=Y(8880);Re.exports=function(Ee,Oe){try{ke(Ae,Ee,Oe)}catch{Ae[Ee]=Oe}return Oe}},6340:function(Re,e,Y){"use strict";var Ae=Y(5005),ke=Y(3070),Ee=Y(5112),Oe=Y(9781),Ye=Ee("species");Re.exports=function(Xe){var et=Ae(Xe);Oe&&et&&!et[Ye]&&(0,ke.f)(et,Ye,{configurable:!0,get:function(){return this}})}},8003:function(Re,e,Y){var Ae=Y(3070).f,ke=Y(6656),Oe=Y(5112)("toStringTag");Re.exports=function(Ye,Xe,et){Ye&&!ke(Ye=et?Ye:Ye.prototype,Oe)&&Ae(Ye,Oe,{configurable:!0,value:Xe})}},6200:function(Re,e,Y){var Ae=Y(2309),ke=Y(9711),Ee=Ae("keys");Re.exports=function(Oe){return Ee[Oe]||(Ee[Oe]=ke(Oe))}},5465:function(Re,e,Y){var Ae=Y(7854),ke=Y(3505),Ee="__core-js_shared__",Oe=Ae[Ee]||ke(Ee,{});Re.exports=Oe},2309:function(Re,e,Y){var Ae=Y(1913),ke=Y(5465);(Re.exports=function(Ee,Oe){return ke[Ee]||(ke[Ee]=void 0!==Oe?Oe:{})})("versions",[]).push({version:"3.9.0",mode:Ae?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(Re,e,Y){var Ae=Y(9670),ke=Y(3099),Oe=Y(5112)("species");Re.exports=function(Ye,Xe){var dt,et=Ae(Ye).constructor;return void 0===et||null==(dt=Ae(et)[Oe])?Xe:ke(dt)}},8710:function(Re,e,Y){var Ae=Y(9958),ke=Y(4488),Ee=function(Oe){return function(Ye,Xe){var it,pt,et=String(ke(Ye)),dt=Ae(Xe),St=et.length;return dt<0||dt>=St?Oe?"":void 0:(it=et.charCodeAt(dt))<55296||it>56319||dt+1===St||(pt=et.charCodeAt(dt+1))<56320||pt>57343?Oe?et.charAt(dt):it:Oe?et.slice(dt,dt+2):pt-56320+(it-55296<<10)+65536}};Re.exports={codeAt:Ee(!1),charAt:Ee(!0)}},3197:function(Re){"use strict";var e=2147483647,dt=/[^\0-\u007E]/,St=/[.\u3002\uFF0E\uFF61]/g,it="Overflow: input needs wider integers to process",yt=Math.floor,Qt=String.fromCharCode,Zt=function(Kt){return Kt+22+75*(Kt<26)},ei=function(Kt,Yt,Nt){var ct=0;for(Kt=Nt?yt(Kt/700):Kt>>1,Kt+=yt(Kt/Yt);Kt>455;ct+=36)Kt=yt(Kt/35);return yt(ct+36*Kt/(Kt+38))},rt=function(Kt){var ri,Li,Yt=[],Nt=(Kt=function(Kt){for(var Yt=[],Nt=0,ct=Kt.length;Nt<ct;){var Vt=Kt.charCodeAt(Nt++);if(Vt>=55296&&Vt<=56319&&Nt<ct){var qt=Kt.charCodeAt(Nt++);56320==(64512&qt)?Yt.push(((1023&Vt)<<10)+(1023&qt)+65536):(Yt.push(Vt),Nt--)}else Yt.push(Vt)}return Yt}(Kt)).length,ct=128,Vt=0,qt=72;for(ri=0;ri<Kt.length;ri++)(Li=Kt[ri])<128&&Yt.push(Qt(Li));var ai=Yt.length,fi=ai;for(ai&&Yt.push("-");fi<Nt;){var Mi=e;for(ri=0;ri<Kt.length;ri++)(Li=Kt[ri])>=ct&&Li<Mi&&(Mi=Li);var Yi=fi+1;if(Mi-ct>yt((e-Vt)/Yi))throw RangeError(it);for(Vt+=(Mi-ct)*Yi,ct=Mi,ri=0;ri<Kt.length;ri++){if((Li=Kt[ri])<ct&&++Vt>e)throw RangeError(it);if(Li==ct){for(var mn=Vt,ln=36;;ln+=36){var zn=ln<=qt?1:ln>=qt+26?26:ln-qt;if(mn<zn)break;var jt=mn-zn,Di=36-zn;Yt.push(Qt(Zt(zn+jt%Di))),mn=yt(jt/Di)}Yt.push(Qt(Zt(mn))),qt=ei(Vt,Yi,fi==ai),Vt=0,++fi}}++Vt,++ct}return Yt.join("")};Re.exports=function(Kt){var ct,Vt,Yt=[],Nt=Kt.toLowerCase().replace(St,".").split(".");for(ct=0;ct<Nt.length;ct++)Yt.push(dt.test(Vt=Nt[ct])?"xn--"+rt(Vt):Vt);return Yt.join(".")}},6091:function(Re,e,Y){var Ae=Y(7293),ke=Y(1361);Re.exports=function(Oe){return Ae(function(){return!!ke[Oe]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[Oe]()||ke[Oe].name!==Oe})}},3111:function(Re,e,Y){var Ae=Y(4488),Ee="["+Y(1361)+"]",Oe=RegExp("^"+Ee+Ee+"*"),Ye=RegExp(Ee+Ee+"*$"),Xe=function(et){return function(dt){var St=String(Ae(dt));return 1&et&&(St=St.replace(Oe,"")),2&et&&(St=St.replace(Ye,"")),St}};Re.exports={start:Xe(1),end:Xe(2),trim:Xe(3)}},1400:function(Re,e,Y){var Ae=Y(9958),ke=Math.max,Ee=Math.min;Re.exports=function(Oe,Ye){var Xe=Ae(Oe);return Xe<0?ke(Xe+Ye,0):Ee(Xe,Ye)}},7067:function(Re,e,Y){var Ae=Y(9958),ke=Y(7466);Re.exports=function(Ee){if(void 0===Ee)return 0;var Oe=Ae(Ee),Ye=ke(Oe);if(Oe!==Ye)throw RangeError("Wrong length or index");return Ye}},5656:function(Re,e,Y){var Ae=Y(8361),ke=Y(4488);Re.exports=function(Ee){return Ae(ke(Ee))}},9958:function(Re){var e=Math.ceil,Y=Math.floor;Re.exports=function(Ae){return isNaN(Ae=+Ae)?0:(Ae>0?Y:e)(Ae)}},7466:function(Re,e,Y){var Ae=Y(9958),ke=Math.min;Re.exports=function(Ee){return Ee>0?ke(Ae(Ee),9007199254740991):0}},7908:function(Re,e,Y){var Ae=Y(4488);Re.exports=function(ke){return Object(Ae(ke))}},4590:function(Re,e,Y){var Ae=Y(3002);Re.exports=function(ke,Ee){var Oe=Ae(ke);if(Oe%Ee)throw RangeError("Wrong offset");return Oe}},3002:function(Re,e,Y){var Ae=Y(9958);Re.exports=function(ke){var Ee=Ae(ke);if(Ee<0)throw RangeError("The argument can't be less than 0");return Ee}},7593:function(Re,e,Y){var Ae=Y(111);Re.exports=function(ke,Ee){if(!Ae(ke))return ke;var Oe,Ye;if(Ee&&"function"==typeof(Oe=ke.toString)&&!Ae(Ye=Oe.call(ke))||"function"==typeof(Oe=ke.valueOf)&&!Ae(Ye=Oe.call(ke))||!Ee&&"function"==typeof(Oe=ke.toString)&&!Ae(Ye=Oe.call(ke)))return Ye;throw TypeError("Can't convert object to primitive value")}},1694:function(Re,e,Y){var Ee={};Ee[Y(5112)("toStringTag")]="z",Re.exports="[object z]"===String(Ee)},9843:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(7854),Ee=Y(9781),Oe=Y(3832),Ye=Y(260),Xe=Y(3331),et=Y(5787),dt=Y(9114),St=Y(8880),it=Y(7466),pt=Y(7067),yt=Y(4590),Qt=Y(7593),Ve=Y(6656),Zt=Y(648),ei=Y(111),rt=Y(30),Kt=Y(7674),Yt=Y(8006).f,Nt=Y(7321),ct=Y(2092).forEach,Vt=Y(6340),qt=Y(3070),ri=Y(1236),Li=Y(9909),ai=Y(9587),fi=Li.get,Mi=Li.set,Yi=qt.f,mn=ri.f,ln=Math.round,zn=ke.RangeError,jt=Xe.ArrayBuffer,Di=Xe.DataView,qi=Ye.NATIVE_ARRAY_BUFFER_VIEWS,Hn=Ye.TYPED_ARRAY_TAG,Rn=Ye.TypedArray,xn=Ye.TypedArrayPrototype,Pi=Ye.aTypedArrayConstructor,gr=Ye.isTypedArray,tr="BYTES_PER_ELEMENT",qn="Wrong length",hn=function($i,gi){for(var un=0,Mn=gi.length,Tr=new(Pi($i))(Mn);Mn>un;)Tr[un]=gi[un++];return Tr},Ui=function($i,gi){Yi($i,gi,{get:function(){return fi(this)[gi]}})},cn=function($i){var gi;return $i instanceof jt||"ArrayBuffer"==(gi=Zt($i))||"SharedArrayBuffer"==gi},Vi=function($i,gi){return gr($i)&&"symbol"!=typeof gi&&gi in $i&&String(+gi)==String(gi)},Oi=function(gi,un){return Vi(gi,un=Qt(un,!0))?dt(2,gi[un]):mn(gi,un)},Bn=function(gi,un,Mn){return!(Vi(gi,un=Qt(un,!0))&&ei(Mn)&&Ve(Mn,"value"))||Ve(Mn,"get")||Ve(Mn,"set")||Mn.configurable||Ve(Mn,"writable")&&!Mn.writable||Ve(Mn,"enumerable")&&!Mn.enumerable?Yi(gi,un,Mn):(gi[un]=Mn.value,gi)};Ee?(qi||(ri.f=Oi,qt.f=Bn,Ui(xn,"buffer"),Ui(xn,"byteOffset"),Ui(xn,"byteLength"),Ui(xn,"length")),Ae({target:"Object",stat:!0,forced:!qi},{getOwnPropertyDescriptor:Oi,defineProperty:Bn}),Re.exports=function($i,gi,un){var Mn=$i.match(/\d+$/)[0]/8,Tr=$i+(un?"Clamped":"")+"Array",kr="get"+$i,xr="set"+$i,_r=ke[Tr],ir=_r,yn=ir&&ir.prototype,qr={},Kn=function(fr,sr){Yi(fr,sr,{get:function(){return function(fr,sr){var vr=fi(fr);return vr.view[kr](sr*Mn+vr.byteOffset,!0)}(this,sr)},set:function(vr){return function(fr,sr,vr){var Yr=fi(fr);un&&(vr=(vr=ln(vr))<0?0:vr>255?255:255&vr),Yr.view[xr](sr*Mn+Yr.byteOffset,vr,!0)}(this,sr,vr)},enumerable:!0})};qi?Oe&&(ir=gi(function(fr,sr,vr,Yr){return et(fr,ir,Tr),ai(ei(sr)?cn(sr)?void 0!==Yr?new _r(sr,yt(vr,Mn),Yr):void 0!==vr?new _r(sr,yt(vr,Mn)):new _r(sr):gr(sr)?hn(ir,sr):Nt.call(ir,sr):new _r(pt(sr)),fr,ir)}),Kt&&Kt(ir,Rn),ct(Yt(_r),function(fr){fr in ir||St(ir,fr,_r[fr])}),ir.prototype=yn):(ir=gi(function(fr,sr,vr,Yr){et(fr,ir,Tr);var ze,at,st,xt=0,De=0;if(ei(sr)){if(!cn(sr))return gr(sr)?hn(ir,sr):Nt.call(ir,sr);ze=sr,De=yt(vr,Mn);var It=sr.byteLength;if(void 0===Yr){if(It%Mn||(at=It-De)<0)throw zn(qn)}else if((at=it(Yr)*Mn)+De>It)throw zn(qn);st=at/Mn}else st=pt(sr),ze=new jt(at=st*Mn);for(Mi(fr,{buffer:ze,byteOffset:De,byteLength:at,length:st,view:new Di(ze)});xt<st;)Kn(fr,xt++)}),Kt&&Kt(ir,Rn),yn=ir.prototype=rt(xn)),yn.constructor!==ir&&St(yn,"constructor",ir),Hn&&St(yn,Hn,Tr),qr[Tr]=ir,Ae({global:!0,forced:ir!=_r,sham:!qi},qr),tr in ir||St(ir,tr,Mn),tr in yn||St(yn,tr,Mn),Vt(Tr)}):Re.exports=function(){}},3832:function(Re,e,Y){var Ae=Y(7854),ke=Y(7293),Ee=Y(7072),Oe=Y(260).NATIVE_ARRAY_BUFFER_VIEWS,Ye=Ae.ArrayBuffer,Xe=Ae.Int8Array;Re.exports=!Oe||!ke(function(){Xe(1)})||!ke(function(){new Xe(-1)})||!Ee(function(et){new Xe,new Xe(null),new Xe(1.5),new Xe(et)},!0)||ke(function(){return 1!==new Xe(new Ye(2),1,void 0).length})},3074:function(Re,e,Y){var Ae=Y(260).aTypedArrayConstructor,ke=Y(6707);Re.exports=function(Ee,Oe){for(var Ye=ke(Ee,Ee.constructor),Xe=0,et=Oe.length,dt=new(Ae(Ye))(et);et>Xe;)dt[Xe]=Oe[Xe++];return dt}},7321:function(Re,e,Y){var Ae=Y(7908),ke=Y(7466),Ee=Y(1246),Oe=Y(7659),Ye=Y(9974),Xe=Y(260).aTypedArrayConstructor;Re.exports=function(dt){var Ve,Zt,ei,rt,Kt,Yt,St=Ae(dt),it=arguments.length,pt=it>1?arguments[1]:void 0,yt=void 0!==pt,Qt=Ee(St);if(null!=Qt&&!Oe(Qt))for(Yt=(Kt=Qt.call(St)).next,St=[];!(rt=Yt.call(Kt)).done;)St.push(rt.value);for(yt&&it>2&&(pt=Ye(pt,arguments[2],2)),Zt=ke(St.length),ei=new(Xe(this))(Zt),Ve=0;Zt>Ve;Ve++)ei[Ve]=yt?pt(St[Ve],Ve):St[Ve];return ei}},9711:function(Re){var e=0,Y=Math.random();Re.exports=function(Ae){return"Symbol("+String(void 0===Ae?"":Ae)+")_"+(++e+Y).toString(36)}},3307:function(Re,e,Y){var Ae=Y(133);Re.exports=Ae&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(Re,e,Y){var Ae=Y(7854),ke=Y(2309),Ee=Y(6656),Oe=Y(9711),Ye=Y(133),Xe=Y(3307),et=ke("wks"),dt=Ae.Symbol,St=Xe?dt:dt&&dt.withoutSetter||Oe;Re.exports=function(it){return Ee(et,it)||(et[it]=Ye&&Ee(dt,it)?dt[it]:St("Symbol."+it)),et[it]}},1361:function(Re){Re.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(7854),Ee=Y(3331),Oe=Y(6340),Ye="ArrayBuffer",Xe=Ee[Ye];Ae({global:!0,forced:ke[Ye]!==Xe},{ArrayBuffer:Xe}),Oe(Ye)},2222:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(7293),Ee=Y(3157),Oe=Y(111),Ye=Y(7908),Xe=Y(7466),et=Y(6135),dt=Y(5417),St=Y(1194),it=Y(5112),pt=Y(7392),yt=it("isConcatSpreadable"),Qt=9007199254740991,Ve="Maximum allowed index exceeded",Zt=pt>=51||!ke(function(){var Yt=[];return Yt[yt]=!1,Yt.concat()[0]!==Yt}),ei=St("concat"),rt=function(Yt){if(!Oe(Yt))return!1;var Nt=Yt[yt];return void 0!==Nt?!!Nt:Ee(Yt)};Ae({target:"Array",proto:!0,forced:!Zt||!ei},{concat:function(Nt){var ri,Li,ai,fi,Mi,ct=Ye(this),Vt=dt(ct,0),qt=0;for(ri=-1,ai=arguments.length;ri<ai;ri++)if(rt(Mi=-1===ri?ct:arguments[ri])){if(qt+(fi=Xe(Mi.length))>Qt)throw TypeError(Ve);for(Li=0;Li<fi;Li++,qt++)Li in Mi&&et(Vt,qt,Mi[Li])}else{if(qt>=Qt)throw TypeError(Ve);et(Vt,qt++,Mi)}return Vt.length=qt,Vt}})},7327:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(2092).filter;Ae({target:"Array",proto:!0,forced:!Y(1194)("filter")},{filter:function(Xe){return ke(this,Xe,arguments.length>1?arguments[1]:void 0)}})},2772:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(1318).indexOf,Ee=Y(9341),Oe=[].indexOf,Ye=!!Oe&&1/[1].indexOf(1,-0)<0,Xe=Ee("indexOf");Ae({target:"Array",proto:!0,forced:Ye||!Xe},{indexOf:function(dt){return Ye?Oe.apply(this,arguments)||0:ke(this,dt,arguments.length>1?arguments[1]:void 0)}})},6992:function(Re,e,Y){"use strict";var Ae=Y(5656),ke=Y(1223),Ee=Y(7497),Oe=Y(9909),Ye=Y(654),Xe="Array Iterator",et=Oe.set,dt=Oe.getterFor(Xe);Re.exports=Ye(Array,"Array",function(St,it){et(this,{type:Xe,target:Ae(St),index:0,kind:it})},function(){var St=dt(this),it=St.target,pt=St.kind,yt=St.index++;return!it||yt>=it.length?(St.target=void 0,{value:void 0,done:!0}):"keys"==pt?{value:yt,done:!1}:"values"==pt?{value:it[yt],done:!1}:{value:[yt,it[yt]],done:!1}},"values"),Ee.Arguments=Ee.Array,ke("keys"),ke("values"),ke("entries")},1249:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(2092).map;Ae({target:"Array",proto:!0,forced:!Y(1194)("map")},{map:function(Xe){return ke(this,Xe,arguments.length>1?arguments[1]:void 0)}})},7042:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(111),Ee=Y(3157),Oe=Y(1400),Ye=Y(7466),Xe=Y(5656),et=Y(6135),dt=Y(5112),it=Y(1194)("slice"),pt=dt("species"),yt=[].slice,Qt=Math.max;Ae({target:"Array",proto:!0,forced:!it},{slice:function(Zt,ei){var ct,Vt,qt,rt=Xe(this),Kt=Ye(rt.length),Yt=Oe(Zt,Kt),Nt=Oe(void 0===ei?Kt:ei,Kt);if(Ee(rt)&&("function"!=typeof(ct=rt.constructor)||ct!==Array&&!Ee(ct.prototype)?ke(ct)&&null===(ct=ct[pt])&&(ct=void 0):ct=void 0,ct===Array||void 0===ct))return yt.call(rt,Yt,Nt);for(Vt=new(void 0===ct?Array:ct)(Qt(Nt-Yt,0)),qt=0;Yt<Nt;Yt++,qt++)Yt in rt&&et(Vt,qt,rt[Yt]);return Vt.length=qt,Vt}})},561:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(1400),Ee=Y(9958),Oe=Y(7466),Ye=Y(7908),Xe=Y(5417),et=Y(6135),St=Y(1194)("splice"),it=Math.max,pt=Math.min;Ae({target:"Array",proto:!0,forced:!St},{splice:function(Zt,ei){var ct,Vt,qt,ri,Li,ai,rt=Ye(this),Kt=Oe(rt.length),Yt=ke(Zt,Kt),Nt=arguments.length;if(0===Nt?ct=Vt=0:1===Nt?(ct=0,Vt=Kt-Yt):(ct=Nt-2,Vt=pt(it(Ee(ei),0),Kt-Yt)),Kt+ct-Vt>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(qt=Xe(rt,Vt),ri=0;ri<Vt;ri++)(Li=Yt+ri)in rt&&et(qt,ri,rt[Li]);if(qt.length=Vt,ct<Vt){for(ri=Yt;ri<Kt-Vt;ri++)ai=ri+ct,(Li=ri+Vt)in rt?rt[ai]=rt[Li]:delete rt[ai];for(ri=Kt;ri>Kt-Vt+ct;ri--)delete rt[ri-1]}else if(ct>Vt)for(ri=Kt-Vt;ri>Yt;ri--)ai=ri+ct-1,(Li=ri+Vt-1)in rt?rt[ai]=rt[Li]:delete rt[ai];for(ri=0;ri<ct;ri++)rt[ri+Yt]=arguments[ri+2];return rt.length=Kt-Vt+ct,qt}})},8309:function(Re,e,Y){var Ae=Y(9781),ke=Y(3070).f,Ee=Function.prototype,Oe=Ee.toString,Ye=/^\s*function ([^ (]*)/;Ae&&!("name"in Ee)&&ke(Ee,"name",{configurable:!0,get:function(){try{return Oe.call(this).match(Ye)[1]}catch{return""}}})},489:function(Re,e,Y){var Ae=Y(2109),ke=Y(7293),Ee=Y(7908),Oe=Y(9518),Ye=Y(8544);Ae({target:"Object",stat:!0,forced:ke(function(){Oe(1)}),sham:!Ye},{getPrototypeOf:function(dt){return Oe(Ee(dt))}})},1539:function(Re,e,Y){var Ae=Y(1694),ke=Y(1320),Ee=Y(288);Ae||ke(Object.prototype,"toString",Ee,{unsafe:!0})},4916:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(2261);Ae({target:"RegExp",proto:!0,forced:/./.exec!==ke},{exec:ke})},9714:function(Re,e,Y){"use strict";var Ae=Y(1320),ke=Y(9670),Ee=Y(7293),Oe=Y(7066),Ye="toString",Xe=RegExp.prototype,et=Xe[Ye];(Ee(function(){return"/a/b"!=et.call({source:"a",flags:"b"})})||et.name!=Ye)&&Ae(RegExp.prototype,Ye,function(){var pt=ke(this),yt=String(pt.source),Qt=pt.flags;return"/"+yt+"/"+String(void 0===Qt&&pt instanceof RegExp&&!("flags"in Xe)?Oe.call(pt):Qt)},{unsafe:!0})},8783:function(Re,e,Y){"use strict";var Ae=Y(8710).charAt,ke=Y(9909),Ee=Y(654),Oe="String Iterator",Ye=ke.set,Xe=ke.getterFor(Oe);Ee(String,"String",function(et){Ye(this,{type:Oe,string:String(et),index:0})},function(){var pt,dt=Xe(this),St=dt.string,it=dt.index;return it>=St.length?{value:void 0,done:!0}:(pt=Ae(St,it),dt.index+=pt.length,{value:pt,done:!1})})},4723:function(Re,e,Y){"use strict";var Ae=Y(7007),ke=Y(9670),Ee=Y(7466),Oe=Y(4488),Ye=Y(1530),Xe=Y(7651);Ae("match",1,function(et,dt,St){return[function(pt){var yt=Oe(this),Qt=pt?.[et];return void 0!==Qt?Qt.call(pt,yt):new RegExp(pt)[et](String(yt))},function(it){var pt=St(dt,it,this);if(pt.done)return pt.value;var yt=ke(it),Qt=String(this);if(!yt.global)return Xe(yt,Qt);var Ve=yt.unicode;yt.lastIndex=0;for(var rt,Zt=[],ei=0;null!==(rt=Xe(yt,Qt));){var Kt=String(rt[0]);Zt[ei]=Kt,""===Kt&&(yt.lastIndex=Ye(Qt,Ee(yt.lastIndex),Ve)),ei++}return 0===ei?null:Zt}]})},5306:function(Re,e,Y){"use strict";var Ae=Y(7007),ke=Y(9670),Ee=Y(7466),Oe=Y(9958),Ye=Y(4488),Xe=Y(1530),et=Y(647),dt=Y(7651),St=Math.max,it=Math.min,pt=function(yt){return void 0===yt?yt:String(yt)};Ae("replace",2,function(yt,Qt,Ve,Zt){var ei=Zt.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,rt=Zt.REPLACE_KEEPS_$0,Kt=ei?"$":"$0";return[function(Nt,ct){var Vt=Ye(this),qt=Nt?.[yt];return void 0!==qt?qt.call(Nt,Vt,ct):Qt.call(String(Vt),Nt,ct)},function(Yt,Nt){if(!ei&&rt||"string"==typeof Nt&&-1===Nt.indexOf(Kt)){var ct=Ve(Qt,Yt,this,Nt);if(ct.done)return ct.value}var Vt=ke(Yt),qt=String(this),ri="function"==typeof Nt;ri||(Nt=String(Nt));var Li=Vt.global;if(Li){var ai=Vt.unicode;Vt.lastIndex=0}for(var fi=[];;){var Mi=dt(Vt,qt);if(null===Mi||(fi.push(Mi),!Li))break;""===String(Mi[0])&&(Vt.lastIndex=Xe(qt,Ee(Vt.lastIndex),ai))}for(var mn="",ln=0,zn=0;zn<fi.length;zn++){Mi=fi[zn];for(var jt=String(Mi[0]),Di=St(it(Oe(Mi.index),qt.length),0),qi=[],Hn=1;Hn<Mi.length;Hn++)qi.push(pt(Mi[Hn]));var Rn=Mi.groups;if(ri){var xn=[jt].concat(qi,Di,qt);void 0!==Rn&&xn.push(Rn);var Pi=String(Nt.apply(void 0,xn))}else Pi=et(jt,qt,Di,qi,Rn,Nt);Di>=ln&&(mn+=qt.slice(ln,Di)+Pi,ln=Di+jt.length)}return mn+qt.slice(ln)}]})},3123:function(Re,e,Y){"use strict";var Ae=Y(7007),ke=Y(7850),Ee=Y(9670),Oe=Y(4488),Ye=Y(6707),Xe=Y(1530),et=Y(7466),dt=Y(7651),St=Y(2261),it=Y(7293),pt=[].push,yt=Math.min,Qt=4294967295,Ve=!it(function(){return!RegExp(Qt,"y")});Ae("split",2,function(Zt,ei,rt){var Kt;return Kt="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Yt,Nt){var ct=String(Oe(this)),Vt=void 0===Nt?Qt:Nt>>>0;if(0===Vt)return[];if(void 0===Yt)return[ct];if(!ke(Yt))return ei.call(ct,Yt,Vt);for(var fi,Mi,Yi,qt=[],Li=0,ai=new RegExp(Yt.source,(Yt.ignoreCase?"i":"")+(Yt.multiline?"m":"")+(Yt.unicode?"u":"")+(Yt.sticky?"y":"")+"g");(fi=St.call(ai,ct))&&!((Mi=ai.lastIndex)>Li&&(qt.push(ct.slice(Li,fi.index)),fi.length>1&&fi.index<ct.length&&pt.apply(qt,fi.slice(1)),Yi=fi[0].length,Li=Mi,qt.length>=Vt));)ai.lastIndex===fi.index&&ai.lastIndex++;return Li===ct.length?(Yi||!ai.test(""))&&qt.push(""):qt.push(ct.slice(Li)),qt.length>Vt?qt.slice(0,Vt):qt}:"0".split(void 0,0).length?function(Yt,Nt){return void 0===Yt&&0===Nt?[]:ei.call(this,Yt,Nt)}:ei,[function(Nt,ct){var Vt=Oe(this),qt=Nt?.[Zt];return void 0!==qt?qt.call(Nt,Vt,ct):Kt.call(String(Vt),Nt,ct)},function(Yt,Nt){var ct=rt(Kt,Yt,this,Nt,Kt!==ei);if(ct.done)return ct.value;var Vt=Ee(Yt),qt=String(this),ri=Ye(Vt,RegExp),Li=Vt.unicode,fi=new ri(Ve?Vt:"^(?:"+Vt.source+")",(Vt.ignoreCase?"i":"")+(Vt.multiline?"m":"")+(Vt.unicode?"u":"")+(Ve?"y":"g")),Mi=void 0===Nt?Qt:Nt>>>0;if(0===Mi)return[];if(0===qt.length)return null===dt(fi,qt)?[qt]:[];for(var Yi=0,mn=0,ln=[];mn<qt.length;){fi.lastIndex=Ve?mn:0;var jt,zn=dt(fi,Ve?qt:qt.slice(mn));if(null===zn||(jt=yt(et(fi.lastIndex+(Ve?0:mn)),qt.length))===Yi)mn=Xe(qt,mn,Li);else{if(ln.push(qt.slice(Yi,mn)),ln.length===Mi)return ln;for(var Di=1;Di<=zn.length-1;Di++)if(ln.push(zn[Di]),ln.length===Mi)return ln;mn=Yi=jt}}return ln.push(qt.slice(Yi)),ln}]},!Ve)},3210:function(Re,e,Y){"use strict";var Ae=Y(2109),ke=Y(3111).trim;Ae({target:"String",proto:!0,forced:Y(6091)("trim")},{trim:function(){return ke(this)}})},2990:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(1048),Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("copyWithin",function(Xe,et){return ke.call(Ee(this),Xe,et,arguments.length>2?arguments[2]:void 0)})},8927:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(2092).every,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("every",function(Xe){return ke(Ee(this),Xe,arguments.length>1?arguments[1]:void 0)})},3105:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(1285),Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("fill",function(Xe){return ke.apply(Ee(this),arguments)})},5035:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(2092).filter,Ee=Y(3074),Oe=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("filter",function(et){var dt=ke(Oe(this),et,arguments.length>1?arguments[1]:void 0);return Ee(this,dt)})},7174:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(2092).findIndex,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("findIndex",function(Xe){return ke(Ee(this),Xe,arguments.length>1?arguments[1]:void 0)})},4345:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(2092).find,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("find",function(Xe){return ke(Ee(this),Xe,arguments.length>1?arguments[1]:void 0)})},2846:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(2092).forEach,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("forEach",function(Xe){ke(Ee(this),Xe,arguments.length>1?arguments[1]:void 0)})},4731:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(1318).includes,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("includes",function(Xe){return ke(Ee(this),Xe,arguments.length>1?arguments[1]:void 0)})},7209:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(1318).indexOf,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("indexOf",function(Xe){return ke(Ee(this),Xe,arguments.length>1?arguments[1]:void 0)})},6319:function(Re,e,Y){"use strict";var Ae=Y(7854),ke=Y(260),Ee=Y(6992),Ye=Y(5112)("iterator"),Xe=Ae.Uint8Array,et=Ee.values,dt=Ee.keys,St=Ee.entries,it=ke.aTypedArray,pt=ke.exportTypedArrayMethod,yt=Xe&&Xe.prototype[Ye],Qt=!!yt&&("values"==yt.name||null==yt.name),Ve=function(){return et.call(it(this))};pt("entries",function(){return St.call(it(this))}),pt("keys",function(){return dt.call(it(this))}),pt("values",Ve,!Qt),pt(Ye,Ve,!Qt)},8867:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Ae.aTypedArray,Oe=[].join;(0,Ae.exportTypedArrayMethod)("join",function(Xe){return Oe.apply(ke(this),arguments)})},7789:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(6583),Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("lastIndexOf",function(Xe){return ke.apply(Ee(this),arguments)})},3739:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(2092).map,Ee=Y(6707),Oe=Ae.aTypedArray,Ye=Ae.aTypedArrayConstructor;(0,Ae.exportTypedArrayMethod)("map",function(dt){return ke(Oe(this),dt,arguments.length>1?arguments[1]:void 0,function(St,it){return new(Ye(Ee(St,St.constructor)))(it)})})},4483:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(3671).right,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("reduceRight",function(Xe){return ke(Ee(this),Xe,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(3671).left,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("reduce",function(Xe){return ke(Ee(this),Xe,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Ae.aTypedArray,Oe=Math.floor;(0,Ae.exportTypedArrayMethod)("reverse",function(){for(var it,Xe=this,et=ke(Xe).length,dt=Oe(et/2),St=0;St<dt;)it=Xe[St],Xe[St++]=Xe[--et],Xe[et]=it;return Xe})},3462:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(7466),Ee=Y(4590),Oe=Y(7908),Ye=Y(7293),Xe=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("set",function(it){Xe(this);var pt=Ee(arguments.length>1?arguments[1]:void 0,1),yt=this.length,Qt=Oe(it),Ve=ke(Qt.length),Zt=0;if(Ve+pt>yt)throw RangeError("Wrong length");for(;Zt<Ve;)this[pt+Zt]=Qt[Zt++]},Ye(function(){new Int8Array(1).set({})}))},678:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(6707),Ee=Y(7293),Oe=Ae.aTypedArray,Ye=Ae.aTypedArrayConstructor,et=[].slice;(0,Ae.exportTypedArrayMethod)("slice",function(it,pt){for(var yt=et.call(Oe(this),it,pt),Qt=ke(this,this.constructor),Ve=0,Zt=yt.length,ei=new(Ye(Qt))(Zt);Zt>Ve;)ei[Ve]=yt[Ve++];return ei},Ee(function(){new Int8Array(1).slice()}))},7462:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(2092).some,Ee=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("some",function(Xe){return ke(Ee(this),Xe,arguments.length>1?arguments[1]:void 0)})},3824:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Ae.aTypedArray,Oe=[].sort;(0,Ae.exportTypedArrayMethod)("sort",function(Xe){return Oe.call(ke(this),Xe)})},5021:function(Re,e,Y){"use strict";var Ae=Y(260),ke=Y(7466),Ee=Y(1400),Oe=Y(6707),Ye=Ae.aTypedArray;(0,Ae.exportTypedArrayMethod)("subarray",function(dt,St){var it=Ye(this),pt=it.length,yt=Ee(dt,pt);return new(Oe(it,it.constructor))(it.buffer,it.byteOffset+yt*it.BYTES_PER_ELEMENT,ke((void 0===St?pt:Ee(St,pt))-yt))})},2974:function(Re,e,Y){"use strict";var Ae=Y(7854),ke=Y(260),Ee=Y(7293),Oe=Ae.Int8Array,Ye=ke.aTypedArray,Xe=ke.exportTypedArrayMethod,et=[].toLocaleString,dt=[].slice,St=!!Oe&&Ee(function(){et.call(new Oe(1))});Xe("toLocaleString",function(){return et.apply(St?dt.call(Ye(this)):Ye(this),arguments)},Ee(function(){return[1,2].toLocaleString()!=new Oe([1,2]).toLocaleString()})||!Ee(function(){Oe.prototype.toLocaleString.call([1,2])}))},5016:function(Re,e,Y){"use strict";var Ae=Y(260).exportTypedArrayMethod,ke=Y(7293),Oe=Y(7854).Uint8Array,Ye=Oe&&Oe.prototype||{},Xe=[].toString,et=[].join;ke(function(){Xe.call({})})&&(Xe=function(){return et.call(this)}),Ae("toString",Xe,Ye.toString!=Xe)},2472:function(Re,e,Y){Y(9843)("Uint8",function(ke){return function(Oe,Ye,Xe){return ke(this,Oe,Ye,Xe)}})},4747:function(Re,e,Y){var Ae=Y(7854),ke=Y(8324),Ee=Y(8533),Oe=Y(8880);for(var Ye in ke){var Xe=Ae[Ye],et=Xe&&Xe.prototype;if(et&&et.forEach!==Ee)try{Oe(et,"forEach",Ee)}catch{et.forEach=Ee}}},3948:function(Re,e,Y){var Ae=Y(7854),ke=Y(8324),Ee=Y(6992),Oe=Y(8880),Ye=Y(5112),Xe=Ye("iterator"),et=Ye("toStringTag"),dt=Ee.values;for(var St in ke){var it=Ae[St],pt=it&&it.prototype;if(pt){if(pt[Xe]!==dt)try{Oe(pt,Xe,dt)}catch{pt[Xe]=dt}if(pt[et]||Oe(pt,et,St),ke[St])for(var yt in Ee)if(pt[yt]!==Ee[yt])try{Oe(pt,yt,Ee[yt])}catch{pt[yt]=Ee[yt]}}}},1637:function(Re,e,Y){"use strict";Y(6992);var Ae=Y(2109),ke=Y(5005),Ee=Y(590),Oe=Y(1320),Ye=Y(2248),Xe=Y(8003),et=Y(4994),dt=Y(9909),St=Y(5787),it=Y(6656),pt=Y(9974),yt=Y(648),Qt=Y(9670),Ve=Y(111),Zt=Y(30),ei=Y(9114),rt=Y(8554),Kt=Y(1246),Yt=Y(5112),Nt=ke("fetch"),ct=ke("Headers"),Vt=Yt("iterator"),qt="URLSearchParams",ri=qt+"Iterator",Li=dt.set,ai=dt.getterFor(qt),fi=dt.getterFor(ri),Mi=/\+/g,Yi=Array(4),mn=function(hn){return Yi[hn-1]||(Yi[hn-1]=RegExp("((?:%[\\da-f]{2}){"+hn+"})","gi"))},ln=function(hn){try{return decodeURIComponent(hn)}catch{return hn}},zn=function(hn){var Ui=hn.replace(Mi," "),cn=4;try{return decodeURIComponent(Ui)}catch{for(;cn;)Ui=Ui.replace(mn(cn--),ln);return Ui}},jt=/[!'()~]|%20/g,Di={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},qi=function(hn){return Di[hn]},Hn=function(hn){return encodeURIComponent(hn).replace(jt,qi)},Rn=function(hn,Ui){if(Ui)for(var Oi,Bn,cn=Ui.split("&"),Vi=0;Vi<cn.length;)(Oi=cn[Vi++]).length&&(Bn=Oi.split("="),hn.push({key:zn(Bn.shift()),value:zn(Bn.join("="))}))},xn=function(hn){this.entries.length=0,Rn(this.entries,hn)},Pi=function(hn,Ui){if(hn<Ui)throw TypeError("Not enough arguments")},gr=et(function(Ui,cn){Li(this,{type:ri,iterator:rt(ai(Ui).entries),kind:cn})},"Iterator",function(){var Ui=fi(this),cn=Ui.kind,Vi=Ui.iterator.next(),Oi=Vi.value;return Vi.done||(Vi.value="keys"===cn?Oi.key:"values"===cn?Oi.value:[Oi.key,Oi.value]),Vi}),tr=function(){St(this,tr,qt);var Oi,Bn,$i,gi,un,Mn,Tr,kr,xr,Ui=arguments.length>0?arguments[0]:void 0,Vi=[];if(Li(this,{type:qt,entries:Vi,updateURL:function(){},updateSearchParams:xn}),void 0!==Ui)if(Ve(Ui))if("function"==typeof(Oi=Kt(Ui)))for($i=(Bn=Oi.call(Ui)).next;!(gi=$i.call(Bn)).done;){if((Tr=(Mn=(un=rt(Qt(gi.value))).next).call(un)).done||(kr=Mn.call(un)).done||!Mn.call(un).done)throw TypeError("Expected sequence with length 2");Vi.push({key:Tr.value+"",value:kr.value+""})}else for(xr in Ui)it(Ui,xr)&&Vi.push({key:xr,value:Ui[xr]+""});else Rn(Vi,"string"==typeof Ui?"?"===Ui.charAt(0)?Ui.slice(1):Ui:Ui+"")},qn=tr.prototype;Ye(qn,{append:function(Ui,cn){Pi(arguments.length,2);var Vi=ai(this);Vi.entries.push({key:Ui+"",value:cn+""}),Vi.updateURL()},delete:function(hn){Pi(arguments.length,1);for(var Ui=ai(this),cn=Ui.entries,Vi=hn+"",Oi=0;Oi<cn.length;)cn[Oi].key===Vi?cn.splice(Oi,1):Oi++;Ui.updateURL()},get:function(Ui){Pi(arguments.length,1);for(var cn=ai(this).entries,Vi=Ui+"",Oi=0;Oi<cn.length;Oi++)if(cn[Oi].key===Vi)return cn[Oi].value;return null},getAll:function(Ui){Pi(arguments.length,1);for(var cn=ai(this).entries,Vi=Ui+"",Oi=[],Bn=0;Bn<cn.length;Bn++)cn[Bn].key===Vi&&Oi.push(cn[Bn].value);return Oi},has:function(Ui){Pi(arguments.length,1);for(var cn=ai(this).entries,Vi=Ui+"",Oi=0;Oi<cn.length;)if(cn[Oi++].key===Vi)return!0;return!1},set:function(Ui,cn){Pi(arguments.length,1);for(var Mn,Vi=ai(this),Oi=Vi.entries,Bn=!1,$i=Ui+"",gi=cn+"",un=0;un<Oi.length;un++)(Mn=Oi[un]).key===$i&&(Bn?Oi.splice(un--,1):(Bn=!0,Mn.value=gi));Bn||Oi.push({key:$i,value:gi}),Vi.updateURL()},sort:function(){var Oi,Bn,$i,Ui=ai(this),cn=Ui.entries,Vi=cn.slice();for(cn.length=0,$i=0;$i<Vi.length;$i++){for(Oi=Vi[$i],Bn=0;Bn<$i;Bn++)if(cn[Bn].key>Oi.key){cn.splice(Bn,0,Oi);break}Bn===$i&&cn.push(Oi)}Ui.updateURL()},forEach:function(Ui){for(var Bn,cn=ai(this).entries,Vi=pt(Ui,arguments.length>1?arguments[1]:void 0,3),Oi=0;Oi<cn.length;)Vi((Bn=cn[Oi++]).value,Bn.key,this)},keys:function(){return new gr(this,"keys")},values:function(){return new gr(this,"values")},entries:function(){return new gr(this,"entries")}},{enumerable:!0}),Oe(qn,Vt,qn.entries),Oe(qn,"toString",function(){for(var Oi,Ui=ai(this).entries,cn=[],Vi=0;Vi<Ui.length;)Oi=Ui[Vi++],cn.push(Hn(Oi.key)+"="+Hn(Oi.value));return cn.join("&")},{enumerable:!0}),Xe(tr,qt),Ae({global:!0,forced:!Ee},{URLSearchParams:tr}),!Ee&&"function"==typeof Nt&&"function"==typeof ct&&Ae({global:!0,enumerable:!0,forced:!0},{fetch:function(Ui){var Vi,Oi,Bn,cn=[Ui];return arguments.length>1&&(Ve(Vi=arguments[1])&&yt(Oi=Vi.body)===qt&&((Bn=Vi.headers?new ct(Vi.headers):new ct).has("content-type")||Bn.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Vi=Zt(Vi,{body:ei(0,String(Oi)),headers:ei(0,Bn)})),cn.push(Vi)),Nt.apply(this,cn)}}),Re.exports={URLSearchParams:tr,getState:ai}},285:function(Re,e,Y){"use strict";Y(8783);var xn,Ae=Y(2109),ke=Y(9781),Ee=Y(590),Oe=Y(7854),Ye=Y(6048),Xe=Y(1320),et=Y(5787),dt=Y(6656),St=Y(1574),it=Y(8457),pt=Y(8710).codeAt,yt=Y(3197),Qt=Y(8003),Ve=Y(1637),Zt=Y(9909),ei=Oe.URL,rt=Ve.URLSearchParams,Kt=Ve.getState,Yt=Zt.set,Nt=Zt.getterFor("URL"),ct=Math.floor,Vt=Math.pow,ri="Invalid scheme",Li="Invalid host",ai="Invalid port",fi=/[A-Za-z]/,Mi=/[\d+-.A-Za-z]/,Yi=/\d/,mn=/^(0x|0X)/,ln=/^[0-7]+$/,zn=/^\d+$/,jt=/^[\dA-Fa-f]+$/,Di=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,qi=/[\u0000\t\u000A\u000D #/:?@[\\]]/,Hn=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Rn=/[\t\u000A\u000D]/g,Pi=function(tt,di){var ue,n,s;if("["==di.charAt(0)){if("]"!=di.charAt(di.length-1)||!(ue=tr(di.slice(1,-1))))return Li;tt.host=ue}else if(gi(tt)){if(di=yt(di),Di.test(di)||null===(ue=gr(di)))return Li;tt.host=ue}else{if(qi.test(di))return Li;for(ue="",n=it(di),s=0;s<n.length;s++)ue+=Bn(n[s],Ui);tt.host=ue}},gr=function(tt){var ue,n,s,c,g,y,x,di=tt.split(".");if(di.length&&""==di[di.length-1]&&di.pop(),(ue=di.length)>4)return tt;for(n=[],s=0;s<ue;s++){if(""==(c=di[s]))return tt;if(g=10,c.length>1&&"0"==c.charAt(0)&&(g=mn.test(c)?16:8,c=c.slice(8==g?1:2)),""===c)y=0;else{if(!(10==g?zn:8==g?ln:jt).test(c))return tt;y=parseInt(c,g)}n.push(y)}for(s=0;s<ue;s++)if(y=n[s],s==ue-1){if(y>=Vt(256,5-ue))return null}else if(y>255)return null;for(x=n.pop(),s=0;s<n.length;s++)x+=n[s]*Vt(256,3-s);return x},tr=function(tt){var c,g,y,x,k,M,R,di=[0,0,0,0,0,0,0,0],ue=0,n=null,s=0,j=function(){return tt.charAt(s)};if(":"==j()){if(":"!=tt.charAt(1))return;s+=2,n=++ue}for(;j();){if(8==ue)return;if(":"!=j()){for(c=g=0;g<4&&jt.test(j());)c=16*c+parseInt(j(),16),s++,g++;if("."==j()){if(0==g||(s-=g,ue>6))return;for(y=0;j();){if(x=null,y>0){if(!("."==j()&&y<4))return;s++}if(!Yi.test(j()))return;for(;Yi.test(j());){if(k=parseInt(j(),10),null===x)x=k;else{if(0==x)return;x=10*x+k}if(x>255)return;s++}di[ue]=256*di[ue]+x,(2==++y||4==y)&&ue++}if(4!=y)return;break}if(":"==j()){if(s++,!j())return}else if(j())return;di[ue++]=c}else{if(null!==n)return;s++,n=++ue}}if(null!==n)for(M=ue-n,ue=7;0!=ue&&M>0;)R=di[ue],di[ue--]=di[n+M-1],di[n+--M]=R;else if(8!=ue)return;return di},hn=function(tt){var di,ue,n,s;if("number"==typeof tt){for(di=[],ue=0;ue<4;ue++)di.unshift(tt%256),tt=ct(tt/256);return di.join(".")}if("object"==typeof tt){for(di="",n=function(tt){for(var di=null,ue=1,n=null,s=0,c=0;c<8;c++)0!==tt[c]?(s>ue&&(di=n,ue=s),n=null,s=0):(null===n&&(n=c),++s);return s>ue&&(di=n,ue=s),di}(tt),ue=0;ue<8;ue++)s&&0===tt[ue]||(s&&(s=!1),n===ue?(di+=ue?":":"::",s=!0):(di+=tt[ue].toString(16),ue<7&&(di+=":")));return"["+di+"]"}return tt},Ui={},cn=St({},Ui,{" ":1,'"':1,"<":1,">":1,"`":1}),Vi=St({},cn,{"#":1,"?":1,"{":1,"}":1}),Oi=St({},Vi,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Bn=function(tt,di){var ue=pt(tt,0);return ue>32&&ue<127&&!dt(di,tt)?tt:encodeURIComponent(tt)},$i={ftp:21,file:null,http:80,https:443,ws:80,wss:443},gi=function(tt){return dt($i,tt.scheme)},un=function(tt){return""!=tt.username||""!=tt.password},Mn=function(tt){return!tt.host||tt.cannotBeABaseURL||"file"==tt.scheme},Tr=function(tt,di){var ue;return 2==tt.length&&fi.test(tt.charAt(0))&&(":"==(ue=tt.charAt(1))||!di&&"|"==ue)},kr=function(tt){var di;return tt.length>1&&Tr(tt.slice(0,2))&&(2==tt.length||"/"===(di=tt.charAt(2))||"\\"===di||"?"===di||"#"===di)},xr=function(tt){var di=tt.path,ue=di.length;ue&&("file"!=tt.scheme||1!=ue||!Tr(di[0],!0))&&di.pop()},_r=function(tt){return"."===tt||"%2e"===tt.toLowerCase()},ir=function(tt){return".."===(tt=tt.toLowerCase())||"%2e."===tt||".%2e"===tt||"%2e%2e"===tt},yn={},qr={},Sr={},ys={},Kn={},fr={},sr={},vr={},Yr={},xt={},De={},ze={},at={},st={},It={},Ht={},Gt={},Ie={},He={},Pe={},bt={},Mt=function(tt,di,ue,n){var M,R,j,U,s=ue||yn,c=0,g="",y=!1,x=!1,k=!1;for(ue||(tt.scheme="",tt.username="",tt.password="",tt.host=null,tt.port=null,tt.path=[],tt.query=null,tt.fragment=null,tt.cannotBeABaseURL=!1,di=di.replace(Hn,"")),di=di.replace(Rn,""),M=it(di);c<=M.length;){switch(R=M[c],s){case yn:if(!R||!fi.test(R)){if(ue)return ri;s=Sr;continue}g+=R.toLowerCase(),s=qr;break;case qr:if(R&&(Mi.test(R)||"+"==R||"-"==R||"."==R))g+=R.toLowerCase();else{if(":"!=R){if(ue)return ri;g="",s=Sr,c=0;continue}if(ue&&(gi(tt)!=dt($i,g)||"file"==g&&(un(tt)||null!==tt.port)||"file"==tt.scheme&&!tt.host))return;if(tt.scheme=g,ue)return void(gi(tt)&&$i[tt.scheme]==tt.port&&(tt.port=null));g="","file"==tt.scheme?s=st:gi(tt)&&n&&n.scheme==tt.scheme?s=ys:gi(tt)?s=vr:"/"==M[c+1]?(s=Kn,c++):(tt.cannotBeABaseURL=!0,tt.path.push(""),s=He)}break;case Sr:if(!n||n.cannotBeABaseURL&&"#"!=R)return ri;if(n.cannotBeABaseURL&&"#"==R){tt.scheme=n.scheme,tt.path=n.path.slice(),tt.query=n.query,tt.fragment="",tt.cannotBeABaseURL=!0,s=bt;break}s="file"==n.scheme?st:fr;continue;case ys:if("/"!=R||"/"!=M[c+1]){s=fr;continue}s=Yr,c++;break;case Kn:if("/"==R){s=xt;break}s=Ie;continue;case fr:if(tt.scheme=n.scheme,R==xn)tt.username=n.username,tt.password=n.password,tt.host=n.host,tt.port=n.port,tt.path=n.path.slice(),tt.query=n.query;else if("/"==R||"\\"==R&&gi(tt))s=sr;else if("?"==R)tt.username=n.username,tt.password=n.password,tt.host=n.host,tt.port=n.port,tt.path=n.path.slice(),tt.query="",s=Pe;else{if("#"!=R){tt.username=n.username,tt.password=n.password,tt.host=n.host,tt.port=n.port,tt.path=n.path.slice(),tt.path.pop(),s=Ie;continue}tt.username=n.username,tt.password=n.password,tt.host=n.host,tt.port=n.port,tt.path=n.path.slice(),tt.query=n.query,tt.fragment="",s=bt}break;case sr:if(!gi(tt)||"/"!=R&&"\\"!=R){if("/"!=R){tt.username=n.username,tt.password=n.password,tt.host=n.host,tt.port=n.port,s=Ie;continue}s=xt}else s=Yr;break;case vr:if(s=Yr,"/"!=R||"/"!=g.charAt(c+1))continue;c++;break;case Yr:if("/"!=R&&"\\"!=R){s=xt;continue}break;case xt:if("@"==R){y&&(g="%40"+g),y=!0,j=it(g);for(var X=0;X<j.length;X++){var ee=j[X];if(":"!=ee||k){var ae=Bn(ee,Oi);k?tt.password+=ae:tt.username+=ae}else k=!0}g=""}else if(R==xn||"/"==R||"?"==R||"#"==R||"\\"==R&&gi(tt)){if(y&&""==g)return"Invalid authority";c-=it(g).length+1,g="",s=De}else g+=R;break;case De:case ze:if(ue&&"file"==tt.scheme){s=Ht;continue}if(":"!=R||x){if(R==xn||"/"==R||"?"==R||"#"==R||"\\"==R&&gi(tt)){if(gi(tt)&&""==g)return Li;if(ue&&""==g&&(un(tt)||null!==tt.port))return;if(U=Pi(tt,g))return U;if(g="",s=Gt,ue)return;continue}"["==R?x=!0:"]"==R&&(x=!1),g+=R}else{if(""==g)return Li;if(U=Pi(tt,g))return U;if(g="",s=at,ue==ze)return}break;case at:if(!Yi.test(R)){if(R==xn||"/"==R||"?"==R||"#"==R||"\\"==R&&gi(tt)||ue){if(""!=g){var de=parseInt(g,10);if(de>65535)return ai;tt.port=gi(tt)&&de===$i[tt.scheme]?null:de,g=""}if(ue)return;s=Gt;continue}return ai}g+=R;break;case st:if(tt.scheme="file","/"==R||"\\"==R)s=It;else{if(!n||"file"!=n.scheme){s=Ie;continue}if(R==xn)tt.host=n.host,tt.path=n.path.slice(),tt.query=n.query;else if("?"==R)tt.host=n.host,tt.path=n.path.slice(),tt.query="",s=Pe;else{if("#"!=R){kr(M.slice(c).join(""))||(tt.host=n.host,tt.path=n.path.slice(),xr(tt)),s=Ie;continue}tt.host=n.host,tt.path=n.path.slice(),tt.query=n.query,tt.fragment="",s=bt}}break;case It:if("/"==R||"\\"==R){s=Ht;break}n&&"file"==n.scheme&&!kr(M.slice(c).join(""))&&(Tr(n.path[0],!0)?tt.path.push(n.path[0]):tt.host=n.host),s=Ie;continue;case Ht:if(R==xn||"/"==R||"\\"==R||"?"==R||"#"==R){if(!ue&&Tr(g))s=Ie;else if(""==g){if(tt.host="",ue)return;s=Gt}else{if(U=Pi(tt,g))return U;if("localhost"==tt.host&&(tt.host=""),ue)return;g="",s=Gt}continue}g+=R;break;case Gt:if(gi(tt)){if(s=Ie,"/"!=R&&"\\"!=R)continue}else if(ue||"?"!=R)if(ue||"#"!=R){if(R!=xn&&(s=Ie,"/"!=R))continue}else tt.fragment="",s=bt;else tt.query="",s=Pe;break;case Ie:if(R==xn||"/"==R||"\\"==R&&gi(tt)||!ue&&("?"==R||"#"==R)){if(ir(g)?(xr(tt),"/"!=R&&!("\\"==R&&gi(tt))&&tt.path.push("")):_r(g)?"/"!=R&&!("\\"==R&&gi(tt))&&tt.path.push(""):("file"==tt.scheme&&!tt.path.length&&Tr(g)&&(tt.host&&(tt.host=""),g=g.charAt(0)+":"),tt.path.push(g)),g="","file"==tt.scheme&&(R==xn||"?"==R||"#"==R))for(;tt.path.length>1&&""===tt.path[0];)tt.path.shift();"?"==R?(tt.query="",s=Pe):"#"==R&&(tt.fragment="",s=bt)}else g+=Bn(R,Vi);break;case He:"?"==R?(tt.query="",s=Pe):"#"==R?(tt.fragment="",s=bt):R!=xn&&(tt.path[0]+=Bn(R,Ui));break;case Pe:ue||"#"!=R?R!=xn&&("'"==R&&gi(tt)?tt.query+="%27":tt.query+="#"==R?"%23":Bn(R,Ui)):(tt.fragment="",s=bt);break;case bt:R!=xn&&(tt.fragment+=Bn(R,cn))}c++}},xi=function(di){var g,y,ue=et(this,xi,"URL"),n=arguments.length>1?arguments[1]:void 0,s=String(di),c=Yt(ue,{type:"URL"});if(void 0!==n)if(n instanceof xi)g=Nt(n);else if(y=Mt(g={},String(n)))throw TypeError(y);if(y=Mt(c,s,null,g))throw TypeError(y);var x=c.searchParams=new rt,k=Kt(x);k.updateSearchParams(c.query),k.updateURL=function(){c.query=String(x)||null},ke||(ue.href=ot.call(ue),ue.origin=Ue.call(ue),ue.protocol=je.call(ue),ue.username=Le.call(ue),ue.password=Fe.call(ue),ue.host=ht.call(ue),ue.hostname=Rt.call(ue),ue.port=pi.call(ue),ue.pathname=si.call(ue),ue.search=Si.call(ue),ue.searchParams=Qi.call(ue),ue.hash=Bi.call(ue))},Ke=xi.prototype,ot=function(){var tt=Nt(this),di=tt.scheme,ue=tt.username,n=tt.password,s=tt.host,c=tt.port,g=tt.path,y=tt.query,x=tt.fragment,k=di+":";return null!==s?(k+="//",un(tt)&&(k+=ue+(n?":"+n:"")+"@"),k+=hn(s),null!==c&&(k+=":"+c)):"file"==di&&(k+="//"),k+=tt.cannotBeABaseURL?g[0]:g.length?"/"+g.join("/"):"",null!==y&&(k+="?"+y),null!==x&&(k+="#"+x),k},Ue=function(){var tt=Nt(this),di=tt.scheme,ue=tt.port;if("blob"==di)try{return new URL(di.path[0]).origin}catch{return"null"}return"file"!=di&&gi(tt)?di+"://"+hn(tt.host)+(null!==ue?":"+ue:""):"null"},je=function(){return Nt(this).scheme+":"},Le=function(){return Nt(this).username},Fe=function(){return Nt(this).password},ht=function(){var tt=Nt(this),di=tt.host,ue=tt.port;return null===di?"":null===ue?hn(di):hn(di)+":"+ue},Rt=function(){var tt=Nt(this).host;return null===tt?"":hn(tt)},pi=function(){var tt=Nt(this).port;return null===tt?"":String(tt)},si=function(){var tt=Nt(this),di=tt.path;return tt.cannotBeABaseURL?di[0]:di.length?"/"+di.join("/"):""},Si=function(){var tt=Nt(this).query;return tt?"?"+tt:""},Qi=function(){return Nt(this).searchParams},Bi=function(){var tt=Nt(this).fragment;return tt?"#"+tt:""},Tn=function(tt,di){return{get:tt,set:di,configurable:!0,enumerable:!0}};if(ke&&Ye(Ke,{href:Tn(ot,function(tt){var di=Nt(this),ue=String(tt),n=Mt(di,ue);if(n)throw TypeError(n);Kt(di.searchParams).updateSearchParams(di.query)}),origin:Tn(Ue),protocol:Tn(je,function(tt){var di=Nt(this);Mt(di,String(tt)+":",yn)}),username:Tn(Le,function(tt){var di=Nt(this),ue=it(String(tt));if(!Mn(di)){di.username="";for(var n=0;n<ue.length;n++)di.username+=Bn(ue[n],Oi)}}),password:Tn(Fe,function(tt){var di=Nt(this),ue=it(String(tt));if(!Mn(di)){di.password="";for(var n=0;n<ue.length;n++)di.password+=Bn(ue[n],Oi)}}),host:Tn(ht,function(tt){var di=Nt(this);di.cannotBeABaseURL||Mt(di,String(tt),De)}),hostname:Tn(Rt,function(tt){var di=Nt(this);di.cannotBeABaseURL||Mt(di,String(tt),ze)}),port:Tn(pi,function(tt){var di=Nt(this);Mn(di)||(""==(tt=String(tt))?di.port=null:Mt(di,tt,at))}),pathname:Tn(si,function(tt){var di=Nt(this);di.cannotBeABaseURL||(di.path=[],Mt(di,tt+"",Gt))}),search:Tn(Si,function(tt){var di=Nt(this);""==(tt=String(tt))?di.query=null:("?"==tt.charAt(0)&&(tt=tt.slice(1)),di.query="",Mt(di,tt,Pe)),Kt(di.searchParams).updateSearchParams(di.query)}),searchParams:Tn(Qi),hash:Tn(Bi,function(tt){var di=Nt(this);""!=(tt=String(tt))?("#"==tt.charAt(0)&&(tt=tt.slice(1)),di.fragment="",Mt(di,tt,bt)):di.fragment=null})}),Xe(Ke,"toJSON",function(){return ot.call(this)},{enumerable:!0}),Xe(Ke,"toString",function(){return ot.call(this)},{enumerable:!0}),ei){var Dn=ei.createObjectURL,In=ei.revokeObjectURL;Dn&&Xe(xi,"createObjectURL",function(di){return Dn.apply(ei,arguments)}),In&&Xe(xi,"revokeObjectURL",function(di){return In.apply(ei,arguments)})}Qt(xi,"URL"),Ae({global:!0,forced:!Ee,sham:!ke},{URL:xi})}},Ot={};function A(Re){if(Ot[Re])return Ot[Re].exports;var e=Ot[Re]={exports:{}};return Lr[Re](e,e.exports,A),e.exports}A.d=function(Re,e){for(var Y in e)A.o(e,Y)&&!A.o(Re,Y)&&Object.defineProperty(Re,Y,{enumerable:!0,get:e[Y]})},A.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),A.o=function(Re,e){return Object.prototype.hasOwnProperty.call(Re,e)},A.r=function(Re){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Re,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Re,"__esModule",{value:!0})};var sn={};return function(){"use strict";function hn(Ke,ot){var Ue;if(typeof Symbol>"u"||null==Ke[Symbol.iterator]){if(Array.isArray(Ke)||(Ue=function Ui(Ke,ot){if(Ke){if("string"==typeof Ke)return cn(Ke,ot);var Ue=Object.prototype.toString.call(Ke).slice(8,-1);if("Object"===Ue&&Ke.constructor&&(Ue=Ke.constructor.name),"Map"===Ue||"Set"===Ue)return Array.from(Ke);if("Arguments"===Ue||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ue))return cn(Ke,ot)}}(Ke))||ot&&Ke&&"number"==typeof Ke.length){Ue&&(Ke=Ue);var je=0,Le=function(){};return{s:Le,n:function(){return je>=Ke.length?{done:!0}:{done:!1,value:Ke[je++]}},e:function(si){throw si},f:Le}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Rt,Fe=!0,ht=!1;return{s:function(){Ue=Ke[Symbol.iterator]()},n:function(){var si=Ue.next();return Fe=si.done,si},e:function(si){ht=!0,Rt=si},f:function(){try{!Fe&&null!=Ue.return&&Ue.return()}finally{if(ht)throw Rt}}}}function cn(Ke,ot){(null==ot||ot>Ke.length)&&(ot=Ke.length);for(var Ue=0,je=new Array(ot);Ue<ot;Ue++)je[Ue]=Ke[Ue];return je}function Oi(Ke,ot){for(var Ue=0;Ue<ot.length;Ue++){var je=ot[Ue];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ke,je.key,je)}}A.r(sn),A.d(sn,{Dropzone:function(){return st},default:function(){return xi}}),A(2222),A(7327),A(2772),A(6992),A(1249),A(7042),A(561),A(8264),A(8309),A(489),A(1539),A(4916),A(9714),A(8783),A(4723),A(5306),A(3123),A(3210),A(2472),A(2990),A(8927),A(3105),A(5035),A(4345),A(7174),A(2846),A(4731),A(7209),A(6319),A(8867),A(7789),A(3739),A(9368),A(4483),A(2056),A(3462),A(678),A(7462),A(3824),A(5021),A(2974),A(5016),A(4747),A(3948),A(285);var $i=function(){function Ke(){!function Vi(Ke,ot){if(!(Ke instanceof ot))throw new TypeError("Cannot call a class as a function")}(this,Ke)}return function Bn(Ke,ot,Ue){return ot&&Oi(Ke.prototype,ot),Ue&&Oi(Ke,Ue),Ke}(Ke,[{key:"on",value:function(Ue,je){return this._callbacks=this._callbacks||{},this._callbacks[Ue]||(this._callbacks[Ue]=[]),this._callbacks[Ue].push(je),this}},{key:"emit",value:function(Ue){this._callbacks=this._callbacks||{};for(var je=this._callbacks[Ue],Le=arguments.length,Fe=new Array(Le>1?Le-1:0),ht=1;ht<Le;ht++)Fe[ht-1]=arguments[ht];if(je){var pi,Rt=hn(je,!0);try{for(Rt.s();!(pi=Rt.n()).done;)pi.value.apply(this,Fe)}catch(Si){Rt.e(Si)}finally{Rt.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+Ue,{args:Fe})),this}},{key:"makeEvent",value:function(Ue,je){var Le={bubbles:!0,cancelable:!0,detail:je};if("function"==typeof window.CustomEvent)return new CustomEvent(Ue,Le);var Fe=document.createEvent("CustomEvent");return Fe.initCustomEvent(Ue,Le.bubbles,Le.cancelable,Le.detail),Fe}},{key:"off",value:function(Ue,je){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var Le=this._callbacks[Ue];if(!Le)return this;if(1===arguments.length)return delete this._callbacks[Ue],this;for(var Fe=0;Fe<Le.length;Fe++)if(Le[Fe]===je){Le.splice(Fe,1);break}return this}}]),Ke}();function Mn(Ke,ot){var Ue;if(typeof Symbol>"u"||null==Ke[Symbol.iterator]){if(Array.isArray(Ke)||(Ue=function Tr(Ke,ot){if(Ke){if("string"==typeof Ke)return kr(Ke,ot);var Ue=Object.prototype.toString.call(Ke).slice(8,-1);if("Object"===Ue&&Ke.constructor&&(Ue=Ke.constructor.name),"Map"===Ue||"Set"===Ue)return Array.from(Ke);if("Arguments"===Ue||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ue))return kr(Ke,ot)}}(Ke))||ot&&Ke&&"number"==typeof Ke.length){Ue&&(Ke=Ue);var je=0,Le=function(){};return{s:Le,n:function(){return je>=Ke.length?{done:!0}:{done:!1,value:Ke[je++]}},e:function(si){throw si},f:Le}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Rt,Fe=!0,ht=!1;return{s:function(){Ue=Ke[Symbol.iterator]()},n:function(){var si=Ue.next();return Fe=si.done,si},e:function(si){ht=!0,Rt=si},f:function(){try{!Fe&&null!=Ue.return&&Ue.return()}finally{if(ht)throw Rt}}}}function kr(Ke,ot){(null==ot||ot>Ke.length)&&(ot=Ke.length);for(var Ue=0,je=new Array(ot);Ue<ot;Ue++)je[Ue]=Ke[Ue];return je}var _r={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(ot,Ue,je){if(je)return{dzuuid:je.file.upload.uuid,dzchunkindex:je.index,dztotalfilesize:je.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:je.file.upload.totalChunkCount,dzchunkbyteoffset:je.index*this.options.chunkSize}},accept:function(ot,Ue){return Ue()},chunksUploaded:function(ot,Ue){Ue()},fallback:function(){var ot;this.element.className="".concat(this.element.className," dz-browser-not-supported");var je,Ue=Mn(this.element.getElementsByTagName("div"),!0);try{for(Ue.s();!(je=Ue.n()).done;){var Le=je.value;if(/(^| )dz-message($| )/.test(Le.className)){ot=Le,Le.className="dz-message";break}}}catch(ht){Ue.e(ht)}finally{Ue.f()}ot||(ot=st.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(ot));var Fe=ot.getElementsByTagName("span")[0];return Fe&&(null!=Fe.textContent?Fe.textContent=this.options.dictFallbackMessage:null!=Fe.innerText&&(Fe.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(ot,Ue,je,Le){var Fe={srcX:0,srcY:0,srcWidth:ot.width,srcHeight:ot.height},ht=ot.width/ot.height;null==Ue&&null==je?(Ue=Fe.srcWidth,je=Fe.srcHeight):null==Ue?Ue=je*ht:null==je&&(je=Ue/ht);var Rt=(Ue=Math.min(Ue,Fe.srcWidth))/(je=Math.min(je,Fe.srcHeight));if(Fe.srcWidth>Ue||Fe.srcHeight>je)if("crop"===Le)ht>Rt?(Fe.srcHeight=ot.height,Fe.srcWidth=Fe.srcHeight*Rt):(Fe.srcWidth=ot.width,Fe.srcHeight=Fe.srcWidth/Rt);else{if("contain"!==Le)throw new Error("Unknown resizeMethod '".concat(Le,"'"));ht>Rt?je=Ue/ht:Ue=je*ht}return Fe.srcX=(ot.width-Fe.srcWidth)/2,Fe.srcY=(ot.height-Fe.srcHeight)/2,Fe.trgWidth=Ue,Fe.trgHeight=je,Fe},transformFile:function(ot,Ue){return(this.options.resizeWidth||this.options.resizeHeight)&&ot.type.match(/image.*/)?this.resizeImage(ot,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,Ue):Ue(ot)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(ot){return this.element.classList.remove("dz-drag-hover")},dragstart:function(ot){},dragend:function(ot){return this.element.classList.remove("dz-drag-hover")},dragenter:function(ot){return this.element.classList.add("dz-drag-hover")},dragover:function(ot){return this.element.classList.add("dz-drag-hover")},dragleave:function(ot){return this.element.classList.remove("dz-drag-hover")},paste:function(ot){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(ot){var Ue=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){ot.previewElement=st.createElement(this.options.previewTemplate.trim()),ot.previewTemplate=ot.previewElement,this.previewsContainer.appendChild(ot.previewElement);var Le,je=Mn(ot.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(je.s();!(Le=je.n()).done;){var Fe=Le.value;Fe.textContent=ot.name}}catch(Bi){je.e(Bi)}finally{je.f()}var Rt,ht=Mn(ot.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(ht.s();!(Rt=ht.n()).done;)(Fe=Rt.value).innerHTML=this.filesize(ot.size)}catch(Bi){ht.e(Bi)}finally{ht.f()}this.options.addRemoveLinks&&(ot._removeLink=st.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),ot.previewElement.appendChild(ot._removeLink));var Si,pi=function(Tn){return Tn.preventDefault(),Tn.stopPropagation(),ot.status===st.UPLOADING?st.confirm(Ue.options.dictCancelUploadConfirmation,function(){return Ue.removeFile(ot)}):Ue.options.dictRemoveFileConfirmation?st.confirm(Ue.options.dictRemoveFileConfirmation,function(){return Ue.removeFile(ot)}):Ue.removeFile(ot)},si=Mn(ot.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(si.s();!(Si=si.n()).done;)Si.value.addEventListener("click",pi)}catch(Bi){si.e(Bi)}finally{si.f()}}},removedfile:function(ot){return null!=ot.previewElement&&null!=ot.previewElement.parentNode&&ot.previewElement.parentNode.removeChild(ot.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(ot,Ue){if(ot.previewElement){ot.previewElement.classList.remove("dz-file-preview");var Le,je=Mn(ot.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(je.s();!(Le=je.n()).done;){var Fe=Le.value;Fe.alt=ot.name,Fe.src=Ue}}catch(ht){je.e(ht)}finally{je.f()}return setTimeout(function(){return ot.previewElement.classList.add("dz-image-preview")},1)}},error:function(ot,Ue){if(ot.previewElement){ot.previewElement.classList.add("dz-error"),"string"!=typeof Ue&&Ue.error&&(Ue=Ue.error);var Le,je=Mn(ot.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(je.s();!(Le=je.n()).done;)Le.value.textContent=Ue}catch(ht){je.e(ht)}finally{je.f()}}},errormultiple:function(){},processing:function(ot){if(ot.previewElement&&(ot.previewElement.classList.add("dz-processing"),ot._removeLink))return ot._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(ot,Ue,je){if(ot.previewElement){var Fe,Le=Mn(ot.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(Le.s();!(Fe=Le.n()).done;){var ht=Fe.value;"PROGRESS"===ht.nodeName?ht.value=Ue:ht.style.width="".concat(Ue,"%")}}catch(Rt){Le.e(Rt)}finally{Le.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(ot){if(ot.previewElement)return ot.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(ot){return this.emit("error",ot,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(ot){if(ot._removeLink&&(ot._removeLink.innerHTML=this.options.dictRemoveFile),ot.previewElement)return ot.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function ir(Ke){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ue){return typeof Ue}:function(Ue){return Ue&&"function"==typeof Symbol&&Ue.constructor===Symbol&&Ue!==Symbol.prototype?"symbol":typeof Ue})(Ke)}function yn(Ke,ot){var Ue;if(typeof Symbol>"u"||null==Ke[Symbol.iterator]){if(Array.isArray(Ke)||(Ue=function qr(Ke,ot){if(Ke){if("string"==typeof Ke)return Sr(Ke,ot);var Ue=Object.prototype.toString.call(Ke).slice(8,-1);if("Object"===Ue&&Ke.constructor&&(Ue=Ke.constructor.name),"Map"===Ue||"Set"===Ue)return Array.from(Ke);if("Arguments"===Ue||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ue))return Sr(Ke,ot)}}(Ke))||ot&&Ke&&"number"==typeof Ke.length){Ue&&(Ke=Ue);var je=0,Le=function(){};return{s:Le,n:function(){return je>=Ke.length?{done:!0}:{done:!1,value:Ke[je++]}},e:function(si){throw si},f:Le}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Rt,Fe=!0,ht=!1;return{s:function(){Ue=Ke[Symbol.iterator]()},n:function(){var si=Ue.next();return Fe=si.done,si},e:function(si){ht=!0,Rt=si},f:function(){try{!Fe&&null!=Ue.return&&Ue.return()}finally{if(ht)throw Rt}}}}function Sr(Ke,ot){(null==ot||ot>Ke.length)&&(ot=Ke.length);for(var Ue=0,je=new Array(ot);Ue<ot;Ue++)je[Ue]=Ke[Ue];return je}function ys(Ke,ot){if(!(Ke instanceof ot))throw new TypeError("Cannot call a class as a function")}function Kn(Ke,ot){for(var Ue=0;Ue<ot.length;Ue++){var je=ot[Ue];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ke,je.key,je)}}function fr(Ke,ot,Ue){return ot&&Kn(Ke.prototype,ot),Ue&&Kn(Ke,Ue),Ke}function sr(Ke,ot){if("function"!=typeof ot&&null!==ot)throw new TypeError("Super expression must either be null or a function");Ke.prototype=Object.create(ot&&ot.prototype,{constructor:{value:Ke,writable:!0,configurable:!0}}),ot&&vr(Ke,ot)}function vr(Ke,ot){return(vr=Object.setPrototypeOf||function(je,Le){return je.__proto__=Le,je})(Ke,ot)}function Yr(Ke){var ot=function ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Le,je=at(Ke);if(ot){var Fe=at(this).constructor;Le=Reflect.construct(je,arguments,Fe)}else Le=je.apply(this,arguments);return xt(this,Le)}}function xt(Ke,ot){return!ot||"object"!==ir(ot)&&"function"!=typeof ot?De(Ke):ot}function De(Ke){if(void 0===Ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ke}function at(Ke){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(Ue){return Ue.__proto__||Object.getPrototypeOf(Ue)})(Ke)}var st=function(Ke){sr(Ue,Ke);var ot=Yr(Ue);function Ue(je,Le){var Fe,ht,Rt;if(ys(this,Ue),(Fe=ot.call(this)).element=je,Fe.version=Ue.version,Fe.clickableElements=[],Fe.listeners=[],Fe.files=[],"string"==typeof Fe.element&&(Fe.element=document.querySelector(Fe.element)),!Fe.element||null==Fe.element.nodeType)throw new Error("Invalid dropzone element.");if(Fe.element.dropzone)throw new Error("Dropzone already attached.");Ue.instances.push(De(Fe)),Fe.element.dropzone=De(Fe);var pi=null!=(Rt=Ue.optionsForElement(Fe.element))?Rt:{};if(Fe.options=Ue.extend({},_r,pi,Le??{}),Fe.options.previewTemplate=Fe.options.previewTemplate.replace(/\n*/g,""),Fe.options.forceFallback||!Ue.isBrowserSupported())return xt(Fe,Fe.options.fallback.call(De(Fe)));if(null==Fe.options.url&&(Fe.options.url=Fe.element.getAttribute("action")),!Fe.options.url)throw new Error("No URL provided.");if(Fe.options.acceptedFiles&&Fe.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(Fe.options.uploadMultiple&&Fe.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return Fe.options.acceptedMimeTypes&&(Fe.options.acceptedFiles=Fe.options.acceptedMimeTypes,delete Fe.options.acceptedMimeTypes),null!=Fe.options.renameFilename&&(Fe.options.renameFile=function(si){return Fe.options.renameFilename.call(De(Fe),si.name,si)}),"string"==typeof Fe.options.method&&(Fe.options.method=Fe.options.method.toUpperCase()),(ht=Fe.getExistingFallback())&&ht.parentNode&&ht.parentNode.removeChild(ht),!1!==Fe.options.previewsContainer&&(Fe.previewsContainer=Fe.options.previewsContainer?Ue.getElement(Fe.options.previewsContainer,"previewsContainer"):Fe.element),Fe.options.clickable&&(Fe.clickableElements=!0===Fe.options.clickable?[Fe.element]:Ue.getElements(Fe.options.clickable,"clickable")),Fe.init(),Fe}return fr(Ue,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(Le){return Le.accepted}).map(function(Le){return Le})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(Le){return!Le.accepted}).map(function(Le){return Le})}},{key:"getFilesWithStatus",value:function(Le){return this.files.filter(function(Fe){return Fe.status===Le}).map(function(Fe){return Fe})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(Ue.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(Ue.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(Ue.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(Le){return Le.status===Ue.UPLOADING||Le.status===Ue.QUEUED}).map(function(Le){return Le})}},{key:"init",value:function(){var Le=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Ue.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function Qi(){Le.hiddenFileInput&&Le.hiddenFileInput.parentNode.removeChild(Le.hiddenFileInput),Le.hiddenFileInput=document.createElement("input"),Le.hiddenFileInput.setAttribute("type","file"),(null===Le.options.maxFiles||Le.options.maxFiles>1)&&Le.hiddenFileInput.setAttribute("multiple","multiple"),Le.hiddenFileInput.className="dz-hidden-input",null!==Le.options.acceptedFiles&&Le.hiddenFileInput.setAttribute("accept",Le.options.acceptedFiles),null!==Le.options.capture&&Le.hiddenFileInput.setAttribute("capture",Le.options.capture),Le.hiddenFileInput.setAttribute("tabindex","-1"),Le.hiddenFileInput.style.visibility="hidden",Le.hiddenFileInput.style.position="absolute",Le.hiddenFileInput.style.top="0",Le.hiddenFileInput.style.left="0",Le.hiddenFileInput.style.height="0",Le.hiddenFileInput.style.width="0",Ue.getElement(Le.options.hiddenInputContainer,"hiddenInputContainer").appendChild(Le.hiddenFileInput),Le.hiddenFileInput.addEventListener("change",function(){var Bi=Le.hiddenFileInput.files;if(Bi.length){var Dn,Tn=yn(Bi,!0);try{for(Tn.s();!(Dn=Tn.n()).done;)Le.addFile(Dn.value)}catch(tt){Tn.e(tt)}finally{Tn.f()}}Le.emit("addedfiles",Bi),Qi()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var Rt,ht=yn(this.events,!0);try{for(ht.s();!(Rt=ht.n()).done;){var pi=Rt.value;this.on(pi,this.options[pi])}}catch(Qi){ht.e(Qi)}finally{ht.f()}this.on("uploadprogress",function(){return Le.updateTotalUploadProgress()}),this.on("removedfile",function(){return Le.updateTotalUploadProgress()}),this.on("canceled",function(Qi){return Le.emit("complete",Qi)}),this.on("complete",function(Qi){if(0===Le.getAddedFiles().length&&0===Le.getUploadingFiles().length&&0===Le.getQueuedFiles().length)return setTimeout(function(){return Le.emit("queuecomplete")},0)});var Si=function(Bi){if(function(Bi){if(Bi.dataTransfer.types)for(var Tn=0;Tn<Bi.dataTransfer.types.length;Tn++)if("Files"===Bi.dataTransfer.types[Tn])return!0;return!1}(Bi))return Bi.stopPropagation(),Bi.preventDefault?Bi.preventDefault():Bi.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(Bi){return Le.emit("dragstart",Bi)},dragenter:function(Bi){return Si(Bi),Le.emit("dragenter",Bi)},dragover:function(Bi){var Tn;try{Tn=Bi.dataTransfer.effectAllowed}catch{}return Bi.dataTransfer.dropEffect="move"===Tn||"linkMove"===Tn?"move":"copy",Si(Bi),Le.emit("dragover",Bi)},dragleave:function(Bi){return Le.emit("dragleave",Bi)},drop:function(Bi){return Si(Bi),Le.drop(Bi)},dragend:function(Bi){return Le.emit("dragend",Bi)}}}],this.clickableElements.forEach(function(Qi){return Le.listeners.push({element:Qi,events:{click:function(Tn){return(Qi!==Le.element||Tn.target===Le.element||Ue.elementInside(Tn.target,Le.element.querySelector(".dz-message")))&&Le.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Ue.instances.splice(Ue.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var Le,Fe=0,ht=0;if(this.getActiveFiles().length){var si,pi=yn(this.getActiveFiles(),!0);try{for(pi.s();!(si=pi.n()).done;){var Si=si.value;Fe+=Si.upload.bytesSent,ht+=Si.upload.total}}catch(Qi){pi.e(Qi)}finally{pi.f()}Le=100*Fe/ht}else Le=100;return this.emit("totaluploadprogress",Le,ht,Fe)}},{key:"_getParamName",value:function(Le){return"function"==typeof this.options.paramName?this.options.paramName(Le):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(Le,"]"):"")}},{key:"_renameFile",value:function(Le){return"function"!=typeof this.options.renameFile?Le.name:this.options.renameFile(Le)}},{key:"getFallbackForm",value:function(){var Le,Fe;if(Le=this.getExistingFallback())return Le;var ht='<div class="dz-fallback">';this.options.dictFallbackText&&(ht+="<p>".concat(this.options.dictFallbackText,"</p>")),ht+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var Rt=Ue.createElement(ht);return"FORM"!==this.element.tagName?(Fe=Ue.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(Rt):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),Fe??Rt}},{key:"getExistingFallback",value:function(){for(var Le=function(Si){var Bi,Qi=yn(Si,!0);try{for(Qi.s();!(Bi=Qi.n()).done;){var Tn=Bi.value;if(/(^| )fallback($| )/.test(Tn.className))return Tn}}catch(Dn){Qi.e(Dn)}finally{Qi.f()}},Fe=0,ht=["div","form"];Fe<ht.length;Fe++){var pi;if(pi=Le(this.element.getElementsByTagName(ht[Fe])))return pi}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(Le){return function(){var Fe=[];for(var ht in Le.events)Fe.push(Le.element.addEventListener(ht,Le.events[ht],!1));return Fe}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(Le){return function(){var Fe=[];for(var ht in Le.events)Fe.push(Le.element.removeEventListener(ht,Le.events[ht],!1));return Fe}()})}},{key:"disable",value:function(){var Le=this;return this.clickableElements.forEach(function(Fe){return Fe.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(Fe){return Le.cancelUpload(Fe)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(Le){return Le.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(Le){var Fe=0,ht="b";if(Le>0){for(var Rt=["tb","gb","mb","kb","b"],pi=0;pi<Rt.length;pi++){var si=Rt[pi];if(Le>=Math.pow(this.options.filesizeBase,4-pi)/10){Fe=Le/Math.pow(this.options.filesizeBase,4-pi),ht=si;break}}Fe=Math.round(10*Fe)/10}return"<strong>".concat(Fe,"</strong> ").concat(this.options.dictFileSizeUnits[ht])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(Le){if(Le.dataTransfer){this.emit("drop",Le);for(var Fe=[],ht=0;ht<Le.dataTransfer.files.length;ht++)Fe[ht]=Le.dataTransfer.files[ht];if(Fe.length){var Rt=Le.dataTransfer.items;Rt&&Rt.length&&null!=Rt[0].webkitGetAsEntry?this._addFilesFromItems(Rt):this.handleFiles(Fe)}this.emit("addedfiles",Fe)}}},{key:"paste",value:function(Le){if(null!=function bt(Ke,ot){return typeof Ke<"u"&&null!==Ke?ot(Ke):void 0}(Le?.clipboardData,function(ht){return ht.items})){this.emit("paste",Le);var Fe=Le.clipboardData.items;if(Fe.length)return this._addFilesFromItems(Fe)}}},{key:"handleFiles",value:function(Le){var ht,Fe=yn(Le,!0);try{for(Fe.s();!(ht=Fe.n()).done;)this.addFile(ht.value)}catch(pi){Fe.e(pi)}finally{Fe.f()}}},{key:"_addFilesFromItems",value:function(Le){var Fe=this;return function(){var pi,ht=[],Rt=yn(Le,!0);try{for(Rt.s();!(pi=Rt.n()).done;){var Si,si=pi.value;null!=si.webkitGetAsEntry&&(Si=si.webkitGetAsEntry())?ht.push(Si.isFile?Fe.addFile(si.getAsFile()):Si.isDirectory?Fe._addFilesFromDirectory(Si,Si.name):void 0):ht.push(null==si.getAsFile||null!=si.kind&&"file"!==si.kind?void 0:Fe.addFile(si.getAsFile()))}}catch(Qi){Rt.e(Qi)}finally{Rt.f()}return ht}()}},{key:"_addFilesFromDirectory",value:function(Le,Fe){var ht=this,Rt=Le.createReader(),pi=function(Qi){return function Mt(Ke,ot,Ue){if(typeof Ke<"u"&&null!==Ke&&"function"==typeof Ke[ot])return Ue(Ke,ot)}(console,"log",function(Bi){return Bi.log(Qi)})};return function Si(){return Rt.readEntries(function(Qi){if(Qi.length>0){var Tn,Bi=yn(Qi,!0);try{for(Bi.s();!(Tn=Bi.n()).done;){var Dn=Tn.value;Dn.isFile?Dn.file(function(In){if(!ht.options.ignoreHiddenFiles||"."!==In.name.substring(0,1))return In.fullPath="".concat(Fe,"/").concat(In.name),ht.addFile(In)}):Dn.isDirectory&&ht._addFilesFromDirectory(Dn,"".concat(Fe,"/").concat(Dn.name))}}catch(In){Bi.e(In)}finally{Bi.f()}Si()}return null},pi)}()}},{key:"accept",value:function(Le,Fe){this.options.maxFilesize&&Le.size>1024*this.options.maxFilesize*1024?Fe(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(Le.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Ue.isValidFile(Le,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(Fe(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",Le)):this.options.accept.call(this,Le,Fe):Fe(this.options.dictInvalidFileType)}},{key:"addFile",value:function(Le){var Fe=this;Le.upload={uuid:Ue.uuidv4(),progress:0,total:Le.size,bytesSent:0,filename:this._renameFile(Le)},this.files.push(Le),Le.status=Ue.ADDED,this.emit("addedfile",Le),this._enqueueThumbnail(Le),this.accept(Le,function(ht){ht?(Le.accepted=!1,Fe._errorProcessing([Le],ht)):(Le.accepted=!0,Fe.options.autoQueue&&Fe.enqueueFile(Le)),Fe._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(Le){var ht,Fe=yn(Le,!0);try{for(Fe.s();!(ht=Fe.n()).done;)this.enqueueFile(ht.value)}catch(pi){Fe.e(pi)}finally{Fe.f()}return null}},{key:"enqueueFile",value:function(Le){var Fe=this;if(Le.status!==Ue.ADDED||!0!==Le.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(Le.status=Ue.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return Fe.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(Le){var Fe=this;if(this.options.createImageThumbnails&&Le.type.match(/image.*/)&&Le.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(Le),setTimeout(function(){return Fe._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var Le=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var Fe=this._thumbnailQueue.shift();return this.createThumbnail(Fe,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(ht){return Le.emit("thumbnail",Fe,ht),Le._processingThumbnail=!1,Le._processThumbnailQueue()})}}},{key:"removeFile",value:function(Le){if(Le.status===Ue.UPLOADING&&this.cancelUpload(Le),this.files=It(this.files,Le),this.emit("removedfile",Le),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(Le){null==Le&&(Le=!1);var ht,Fe=yn(this.files.slice(),!0);try{for(Fe.s();!(ht=Fe.n()).done;){var Rt=ht.value;(Rt.status!==Ue.UPLOADING||Le)&&this.removeFile(Rt)}}catch(pi){Fe.e(pi)}finally{Fe.f()}return null}},{key:"resizeImage",value:function(Le,Fe,ht,Rt,pi){var si=this;return this.createThumbnail(Le,Fe,ht,Rt,!0,function(Si,Qi){if(null==Qi)return pi(Le);var Bi=si.options.resizeMimeType;null==Bi&&(Bi=Le.type);var Tn=Qi.toDataURL(Bi,si.options.resizeQuality);return("image/jpeg"===Bi||"image/jpg"===Bi)&&(Tn=He.restore(Le.dataURL,Tn)),pi(Ue.dataURItoBlob(Tn))})}},{key:"createThumbnail",value:function(Le,Fe,ht,Rt,pi,si){var Si=this,Qi=new FileReader;Qi.onload=function(){Le.dataURL=Qi.result,"image/svg+xml"!==Le.type?Si.createThumbnailFromUrl(Le,Fe,ht,Rt,pi,si):si?.(Qi.result)},Qi.readAsDataURL(Le)}},{key:"displayExistingFile",value:function(Le,Fe,ht,Rt){var pi=this,si=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",Le),this.emit("complete",Le),si){Le.dataURL=Fe,this.createThumbnailFromUrl(Le,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(Bi){pi.emit("thumbnail",Le,Bi),ht&&ht()},Rt)}else this.emit("thumbnail",Le,Fe),ht&&ht()}},{key:"createThumbnailFromUrl",value:function(Le,Fe,ht,Rt,pi,si,Si){var Qi=this,Bi=document.createElement("img");return Si&&(Bi.crossOrigin=Si),pi="from-image"!=getComputedStyle(document.body).imageOrientation&&pi,Bi.onload=function(){var Tn=function(In){return In(1)};return typeof EXIF<"u"&&null!==EXIF&&pi&&(Tn=function(In){return EXIF.getData(Bi,function(){return In(EXIF.getTag(this,"Orientation"))})}),Tn(function(Dn){Le.width=Bi.width,Le.height=Bi.height;var In=Qi.options.resize.call(Qi,Le,Fe,ht,Rt),tt=document.createElement("canvas"),di=tt.getContext("2d");switch(tt.width=In.trgWidth,tt.height=In.trgHeight,Dn>4&&(tt.width=In.trgHeight,tt.height=In.trgWidth),Dn){case 2:di.translate(tt.width,0),di.scale(-1,1);break;case 3:di.translate(tt.width,tt.height),di.rotate(Math.PI);break;case 4:di.translate(0,tt.height),di.scale(1,-1);break;case 5:di.rotate(.5*Math.PI),di.scale(1,-1);break;case 6:di.rotate(.5*Math.PI),di.translate(0,-tt.width);break;case 7:di.rotate(.5*Math.PI),di.translate(tt.height,-tt.width),di.scale(-1,1);break;case 8:di.rotate(-.5*Math.PI),di.translate(-tt.height,0)}Ie(di,Bi,null!=In.srcX?In.srcX:0,null!=In.srcY?In.srcY:0,In.srcWidth,In.srcHeight,null!=In.trgX?In.trgX:0,null!=In.trgY?In.trgY:0,In.trgWidth,In.trgHeight);var ue=tt.toDataURL("image/png");if(null!=si)return si(ue,tt)})},null!=si&&(Bi.onerror=si),Bi.src=Le.dataURL}},{key:"processQueue",value:function(){var Le=this.options.parallelUploads,Fe=this.getUploadingFiles().length,ht=Fe;if(!(Fe>=Le)){var Rt=this.getQueuedFiles();if(Rt.length>0){if(this.options.uploadMultiple)return this.processFiles(Rt.slice(0,Le-Fe));for(;ht<Le;){if(!Rt.length)return;this.processFile(Rt.shift()),ht++}}}}},{key:"processFile",value:function(Le){return this.processFiles([Le])}},{key:"processFiles",value:function(Le){var ht,Fe=yn(Le,!0);try{for(Fe.s();!(ht=Fe.n()).done;){var Rt=ht.value;Rt.processing=!0,Rt.status=Ue.UPLOADING,this.emit("processing",Rt)}}catch(pi){Fe.e(pi)}finally{Fe.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",Le),this.uploadFiles(Le)}},{key:"_getFilesWithXhr",value:function(Le){return this.files.filter(function(ht){return ht.xhr===Le}).map(function(ht){return ht})}},{key:"cancelUpload",value:function(Le){if(Le.status===Ue.UPLOADING){var Rt,Fe=this._getFilesWithXhr(Le.xhr),ht=yn(Fe,!0);try{for(ht.s();!(Rt=ht.n()).done;)Rt.value.status=Ue.CANCELED}catch(Bi){ht.e(Bi)}finally{ht.f()}typeof Le.xhr<"u"&&Le.xhr.abort();var Si,si=yn(Fe,!0);try{for(si.s();!(Si=si.n()).done;)this.emit("canceled",Si.value)}catch(Bi){si.e(Bi)}finally{si.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",Fe)}else(Le.status===Ue.ADDED||Le.status===Ue.QUEUED)&&(Le.status=Ue.CANCELED,this.emit("canceled",Le),this.options.uploadMultiple&&this.emit("canceledmultiple",[Le]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(Le){if("function"==typeof Le){for(var Fe=arguments.length,ht=new Array(Fe>1?Fe-1:0),Rt=1;Rt<Fe;Rt++)ht[Rt-1]=arguments[Rt];return Le.apply(this,ht)}return Le}},{key:"uploadFile",value:function(Le){return this.uploadFiles([Le])}},{key:"uploadFiles",value:function(Le){var Fe=this;this._transformFiles(Le,function(ht){if(Fe.options.chunking){var Rt=ht[0];Le[0].upload.chunked=Fe.options.chunking&&(Fe.options.forceChunking||Rt.size>Fe.options.chunkSize),Le[0].upload.totalChunkCount=Math.ceil(Rt.size/Fe.options.chunkSize)}if(Le[0].upload.chunked){var pi=Le[0],si=ht[0];pi.upload.chunks=[];var Qi=function(){for(var tt=0;void 0!==pi.upload.chunks[tt];)tt++;if(!(tt>=pi.upload.totalChunkCount)){var di=tt*Fe.options.chunkSize,ue=Math.min(di+Fe.options.chunkSize,si.size),n={name:Fe._getParamName(0),data:si.webkitSlice?si.webkitSlice(di,ue):si.slice(di,ue),filename:pi.upload.filename,chunkIndex:tt};pi.upload.chunks[tt]={file:pi,index:tt,dataBlock:n,status:Ue.UPLOADING,progress:0,retries:0},Fe._uploadData(Le,[n])}};if(pi.upload.finishedChunkUpload=function(In,tt){var di=!0;In.status=Ue.SUCCESS,In.dataBlock=null,In.xhr=null;for(var ue=0;ue<pi.upload.totalChunkCount;ue++){if(void 0===pi.upload.chunks[ue])return Qi();pi.upload.chunks[ue].status!==Ue.SUCCESS&&(di=!1)}di&&Fe.options.chunksUploaded(pi,function(){Fe._finished(Le,tt,null)})},Fe.options.parallelChunkUploads)for(var Bi=0;Bi<pi.upload.totalChunkCount;Bi++)Qi();else Qi()}else{for(var Tn=[],Dn=0;Dn<Le.length;Dn++)Tn[Dn]={name:Fe._getParamName(Dn),data:ht[Dn],filename:Le[Dn].upload.filename};Fe._uploadData(Le,Tn)}})}},{key:"_getChunk",value:function(Le,Fe){for(var ht=0;ht<Le.upload.totalChunkCount;ht++)if(void 0!==Le.upload.chunks[ht]&&Le.upload.chunks[ht].xhr===Fe)return Le.upload.chunks[ht]}},{key:"_uploadData",value:function(Le,Fe){var si,ht=this,Rt=new XMLHttpRequest,pi=yn(Le,!0);try{for(pi.s();!(si=pi.n()).done;)si.value.xhr=Rt}catch(j){pi.e(j)}finally{pi.f()}Le[0].upload.chunked&&(Le[0].upload.chunks[Fe[0].chunkIndex].xhr=Rt);var Qi=this.resolveOption(this.options.method,Le),Bi=this.resolveOption(this.options.url,Le);Rt.open(Qi,Bi,!0),this.resolveOption(this.options.timeout,Le)&&(Rt.timeout=this.resolveOption(this.options.timeout,Le)),Rt.withCredentials=!!this.options.withCredentials,Rt.onload=function(j){ht._finishedUploading(Le,Rt,j)},Rt.ontimeout=function(){ht._handleUploadError(Le,Rt,"Request timedout after ".concat(ht.options.timeout/1e3," seconds"))},Rt.onerror=function(){ht._handleUploadError(Le,Rt)},(null!=Rt.upload?Rt.upload:Rt).onprogress=function(j){return ht._updateFilesUploadProgress(Le,Rt,j)};var In={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var tt in this.options.headers&&Ue.extend(In,this.options.headers),In){var di=In[tt];di&&Rt.setRequestHeader(tt,di)}var ue=new FormData;if(this.options.params){var n=this.options.params;for(var s in"function"==typeof n&&(n=n.call(this,Le,Rt,Le[0].upload.chunked?this._getChunk(Le[0],Rt):null)),n){var c=n[s];if(Array.isArray(c))for(var g=0;g<c.length;g++)ue.append(s,c[g]);else ue.append(s,c)}}var x,y=yn(Le,!0);try{for(y.s();!(x=y.n()).done;)this.emit("sending",x.value,Rt,ue)}catch(j){y.e(j)}finally{y.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",Le,Rt,ue),this._addFormElementData(ue);for(var M=0;M<Fe.length;M++){var R=Fe[M];ue.append(R.name,R.data,R.filename)}this.submitRequest(Rt,ue,Le)}},{key:"_transformFiles",value:function(Le,Fe){for(var ht=this,Rt=[],pi=0,si=function(Bi){ht.options.transformFile.call(ht,Le[Bi],function(Tn){Rt[Bi]=Tn,++pi===Le.length&&Fe(Rt)})},Si=0;Si<Le.length;Si++)si(Si)}},{key:"_addFormElementData",value:function(Le){if("FORM"===this.element.tagName){var ht,Fe=yn(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(Fe.s();!(ht=Fe.n()).done;){var Rt=ht.value,pi=Rt.getAttribute("name"),si=Rt.getAttribute("type");if(si&&(si=si.toLowerCase()),!(typeof pi>"u"||null===pi))if("SELECT"===Rt.tagName&&Rt.hasAttribute("multiple")){var Qi,Si=yn(Rt.options,!0);try{for(Si.s();!(Qi=Si.n()).done;){var Bi=Qi.value;Bi.selected&&Le.append(pi,Bi.value)}}catch(Tn){Si.e(Tn)}finally{Si.f()}}else(!si||"checkbox"!==si&&"radio"!==si||Rt.checked)&&Le.append(pi,Rt.value)}}catch(Tn){Fe.e(Tn)}finally{Fe.f()}}}},{key:"_updateFilesUploadProgress",value:function(Le,Fe,ht){if(Le[0].upload.chunked){var Si=Le[0],Qi=this._getChunk(Si,Fe);ht?(Qi.progress=100*ht.loaded/ht.total,Qi.total=ht.total,Qi.bytesSent=ht.loaded):(Qi.progress=100,Qi.bytesSent=Qi.total),Si.upload.progress=0,Si.upload.total=0,Si.upload.bytesSent=0;for(var Bi=0;Bi<Si.upload.totalChunkCount;Bi++)Si.upload.chunks[Bi]&&typeof Si.upload.chunks[Bi].progress<"u"&&(Si.upload.progress+=Si.upload.chunks[Bi].progress,Si.upload.total+=Si.upload.chunks[Bi].total,Si.upload.bytesSent+=Si.upload.chunks[Bi].bytesSent);Si.upload.progress=Si.upload.progress/Si.upload.totalChunkCount,this.emit("uploadprogress",Si,Si.upload.progress,Si.upload.bytesSent)}else{var pi,Rt=yn(Le,!0);try{for(Rt.s();!(pi=Rt.n()).done;){var si=pi.value;si.upload.total&&si.upload.bytesSent&&si.upload.bytesSent==si.upload.total||(ht?(si.upload.progress=100*ht.loaded/ht.total,si.upload.total=ht.total,si.upload.bytesSent=ht.loaded):(si.upload.progress=100,si.upload.bytesSent=si.upload.total),this.emit("uploadprogress",si,si.upload.progress,si.upload.bytesSent))}}catch(Tn){Rt.e(Tn)}finally{Rt.f()}}}},{key:"_finishedUploading",value:function(Le,Fe,ht){var Rt;if(Le[0].status!==Ue.CANCELED&&4===Fe.readyState){if("arraybuffer"!==Fe.responseType&&"blob"!==Fe.responseType&&(Rt=Fe.responseText,Fe.getResponseHeader("content-type")&&~Fe.getResponseHeader("content-type").indexOf("application/json")))try{Rt=JSON.parse(Rt)}catch(pi){ht=pi,Rt="Invalid JSON response from server."}this._updateFilesUploadProgress(Le,Fe),200<=Fe.status&&Fe.status<300?Le[0].upload.chunked?Le[0].upload.finishedChunkUpload(this._getChunk(Le[0],Fe),Rt):this._finished(Le,Rt,ht):this._handleUploadError(Le,Fe,Rt)}}},{key:"_handleUploadError",value:function(Le,Fe,ht){if(Le[0].status!==Ue.CANCELED){if(Le[0].upload.chunked&&this.options.retryChunks){var Rt=this._getChunk(Le[0],Fe);if(Rt.retries++<this.options.retryChunksLimit)return void this._uploadData(Le,[Rt.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(Le,ht||this.options.dictResponseError.replace("{{statusCode}}",Fe.status),Fe)}}},{key:"submitRequest",value:function(Le,Fe,ht){1==Le.readyState?Le.send(Fe):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(Le,Fe,ht){var pi,Rt=yn(Le,!0);try{for(Rt.s();!(pi=Rt.n()).done;){var si=pi.value;si.status=Ue.SUCCESS,this.emit("success",si,Fe,ht),this.emit("complete",si)}}catch(Si){Rt.e(Si)}finally{Rt.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",Le,Fe,ht),this.emit("completemultiple",Le)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(Le,Fe,ht){var pi,Rt=yn(Le,!0);try{for(Rt.s();!(pi=Rt.n()).done;){var si=pi.value;si.status=Ue.ERROR,this.emit("error",si,Fe,ht),this.emit("complete",si)}}catch(Si){Rt.e(Si)}finally{Rt.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",Le,Fe,ht),this.emit("completemultiple",Le)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=$i,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(Le){for(var Fe=arguments.length,ht=new Array(Fe>1?Fe-1:0),Rt=1;Rt<Fe;Rt++)ht[Rt-1]=arguments[Rt];for(var pi=0,si=ht;pi<si.length;pi++){var Si=si[pi];for(var Qi in Si)Le[Qi]=Si[Qi]}return Le}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Le){var Fe=16*Math.random()|0;return("x"===Le?Fe:3&Fe|8).toString(16)})}}]),Ue}($i);st.initClass(),st.version="5.9.3",st.options={},st.optionsForElement=function(Ke){if(Ke.getAttribute("id"))return st.options[Ht(Ke.getAttribute("id"))]},st.instances=[],st.forElement=function(Ke){if("string"==typeof Ke&&(Ke=document.querySelector(Ke)),null==Ke?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return Ke.dropzone},st.autoDiscover=!0,st.discover=function(){var Ke;if(document.querySelectorAll)Ke=document.querySelectorAll(".dropzone");else{Ke=[];var ot=function(je){return function(){var ht,Le=[],Fe=yn(je,!0);try{for(Fe.s();!(ht=Fe.n()).done;){var Rt=ht.value;/(^| )dropzone($| )/.test(Rt.className)?Le.push(Ke.push(Rt)):Le.push(void 0)}}catch(pi){Fe.e(pi)}finally{Fe.f()}return Le}()};ot(document.getElementsByTagName("div")),ot(document.getElementsByTagName("form"))}return function(){var Le,Ue=[],je=yn(Ke,!0);try{for(je.s();!(Le=je.n()).done;){var Fe=Le.value;!1!==st.optionsForElement(Fe)?Ue.push(new st(Fe)):Ue.push(void 0)}}catch(ht){je.e(ht)}finally{je.f()}return Ue}()},st.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],st.isBrowserSupported=function(){var Ke=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==st.blacklistedBrowsers&&(st.blockedBrowsers=st.blacklistedBrowsers);var Ue,ot=yn(st.blockedBrowsers,!0);try{for(ot.s();!(Ue=ot.n()).done;)Ue.value.test(navigator.userAgent)&&(Ke=!1)}catch(Le){ot.e(Le)}finally{ot.f()}}else Ke=!1;else Ke=!1;return Ke},st.dataURItoBlob=function(Ke){for(var ot=atob(Ke.split(",")[1]),Ue=Ke.split(",")[0].split(":")[1].split(";")[0],je=new ArrayBuffer(ot.length),Le=new Uint8Array(je),Fe=0,ht=ot.length,Rt=0<=ht;Rt?Fe<=ht:Fe>=ht;Rt?Fe++:Fe--)Le[Fe]=ot.charCodeAt(Fe);return new Blob([je],{type:Ue})};var It=function(ot,Ue){return ot.filter(function(je){return je!==Ue}).map(function(je){return je})},Ht=function(ot){return ot.replace(/[\-_](\w)/g,function(Ue){return Ue.charAt(1).toUpperCase()})};st.createElement=function(Ke){var ot=document.createElement("div");return ot.innerHTML=Ke,ot.childNodes[0]},st.elementInside=function(Ke,ot){if(Ke===ot)return!0;for(;Ke=Ke.parentNode;)if(Ke===ot)return!0;return!1},st.getElement=function(Ke,ot){var Ue;if("string"==typeof Ke?Ue=document.querySelector(Ke):null!=Ke.nodeType&&(Ue=Ke),null==Ue)throw new Error("Invalid `".concat(ot,"` option provided. Please provide a CSS selector or a plain HTML element."));return Ue},st.getElements=function(Ke,ot){var je;if(Ke instanceof Array){je=[];try{var Fe,Le=yn(Ke,!0);try{for(Le.s();!(Fe=Le.n()).done;)je.push(this.getElement(Fe.value,ot))}catch(pi){Le.e(pi)}finally{Le.f()}}catch{je=null}}else if("string"==typeof Ke){je=[];var Rt,ht=yn(document.querySelectorAll(Ke),!0);try{for(ht.s();!(Rt=ht.n()).done;)je.push(Rt.value)}catch(pi){ht.e(pi)}finally{ht.f()}}else null!=Ke.nodeType&&(je=[Ke]);if(null==je||!je.length)throw new Error("Invalid `".concat(ot,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return je},st.confirm=function(Ke,ot,Ue){return window.confirm(Ke)?ot():null!=Ue?Ue():void 0},st.isValidFile=function(Ke,ot){if(!ot)return!0;ot=ot.split(",");var Fe,Ue=Ke.type,je=Ue.replace(/\/.*$/,""),Le=yn(ot,!0);try{for(Le.s();!(Fe=Le.n()).done;){var ht=Fe.value;if("."===(ht=ht.trim()).charAt(0)){if(-1!==Ke.name.toLowerCase().indexOf(ht.toLowerCase(),Ke.name.length-ht.length))return!0}else if(/\/\*$/.test(ht)){if(je===ht.replace(/\/.*$/,""))return!0}else if(Ue===ht)return!0}}catch(Rt){Le.e(Rt)}finally{Le.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(Ke){return this.each(function(){return new st(this,Ke)})}),st.ADDED="added",st.QUEUED="queued",st.ACCEPTED=st.QUEUED,st.UPLOADING="uploading",st.PROCESSING=st.UPLOADING,st.CANCELED="canceled",st.ERROR="error",st.SUCCESS="success";var Ie=function(ot,Ue,je,Le,Fe,ht,Rt,pi,si,Si){var Qi=function(ot){var je=ot.naturalHeight,Le=document.createElement("canvas");Le.width=1,Le.height=je;var Fe=Le.getContext("2d");Fe.drawImage(ot,0,0);for(var Rt=Fe.getImageData(1,0,1,je).data,pi=0,si=je,Si=je;Si>pi;)0===Rt[4*(Si-1)+3]?si=Si:pi=Si,Si=si+pi>>1;var Bi=Si/je;return 0===Bi?1:Bi}(Ue);return ot.drawImage(Ue,je,Le,Fe,ht,Rt,pi,si,Si/Qi)},He=function(){function Ke(){ys(this,Ke)}return fr(Ke,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(Ue){for(var je="",Le=void 0,Fe=void 0,ht="",Rt=void 0,pi=void 0,si=void 0,Si="",Qi=0;Rt=(Le=Ue[Qi++])>>2,pi=(3&Le)<<4|(Fe=Ue[Qi++])>>4,si=(15&Fe)<<2|(ht=Ue[Qi++])>>6,Si=63&ht,isNaN(Fe)?si=Si=64:isNaN(ht)&&(Si=64),je=je+this.KEY_STR.charAt(Rt)+this.KEY_STR.charAt(pi)+this.KEY_STR.charAt(si)+this.KEY_STR.charAt(Si),Le=Fe=ht="",Rt=pi=si=Si="",Qi<Ue.length;);return je}},{key:"restore",value:function(Ue,je){if(!Ue.match("data:image/jpeg;base64,"))return je;var Le=this.decode64(Ue.replace("data:image/jpeg;base64,","")),Fe=this.slice2Segments(Le),ht=this.exifManipulation(je,Fe);return"data:image/jpeg;base64,".concat(this.encode64(ht))}},{key:"exifManipulation",value:function(Ue,je){var Le=this.getExifArray(je),Fe=this.insertExif(Ue,Le);return new Uint8Array(Fe)}},{key:"getExifArray",value:function(Ue){for(var je=void 0,Le=0;Le<Ue.length;){if(255===(je=Ue[Le])[0]&225===je[1])return je;Le++}return[]}},{key:"insertExif",value:function(Ue,je){var Le=Ue.replace("data:image/jpeg;base64,",""),Fe=this.decode64(Le),ht=Fe.indexOf(255,3),Rt=Fe.slice(0,ht),pi=Fe.slice(ht),si=Rt;return(si=si.concat(je)).concat(pi)}},{key:"slice2Segments",value:function(Ue){for(var je=0,Le=[];!(255===Ue[je]&218===Ue[je+1]);){if(255===Ue[je]&216===Ue[je+1])je+=2;else{var ht=je+(256*Ue[je+2]+Ue[je+3])+2,Rt=Ue.slice(je,ht);Le.push(Rt),je=ht}if(je>Ue.length)break}return Le}},{key:"decode64",value:function(Ue){var Fe=void 0,ht="",Rt=void 0,pi=void 0,si=void 0,Si="",Qi=0,Bi=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(Ue)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),Ue=Ue.replace(/[^A-Za-z0-9\+\/\=]/g,"");Rt=this.KEY_STR.indexOf(Ue.charAt(Qi++)),Fe=(15&(pi=this.KEY_STR.indexOf(Ue.charAt(Qi++))))<<4|(si=this.KEY_STR.indexOf(Ue.charAt(Qi++)))>>2,ht=(3&si)<<6|(Si=this.KEY_STR.indexOf(Ue.charAt(Qi++))),Bi.push(Rt<<2|pi>>4),64!==si&&Bi.push(Fe),64!==Si&&Bi.push(ht),Fe=ht="",Rt=pi=si=Si="",Qi<Ue.length;);return Bi}}]),Ke}();He.initClass();st._autoDiscoverFunction=function(){if(st.autoDiscover)return st.discover()},function(ot,Ue){var je=!1,Le=!0,Fe=ot.document,ht=Fe.documentElement,Rt=Fe.addEventListener?"addEventListener":"attachEvent",pi=Fe.addEventListener?"removeEventListener":"detachEvent",si=Fe.addEventListener?"":"on",Si=function Bi(Tn){if(("readystatechange"!==Tn.type||"complete"===Fe.readyState)&&(("load"===Tn.type?ot:Fe)[pi](si+Tn.type,Bi,!1),!je&&(je=!0)))return Ue.call(ot,Tn.type||Tn)};if("complete"!==Fe.readyState){if(Fe.createEventObject&&ht.doScroll){try{Le=!ot.frameElement}catch{}Le&&function Bi(){try{ht.doScroll("left")}catch{return void setTimeout(Bi,50)}return Si("poll")}()}Fe[Rt](si+"DOMContentLoaded",Si,!1),Fe[Rt](si+"readystatechange",Si,!1),ot[Rt](si+"load",Si,!1)}}(window,st._autoDiscoverFunction),window.Dropzone=st;var xi=st}(),sn}()},6900:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(Qs){for(var Lr=[],Ot=1;Ot<arguments.length;Ot++)Lr[Ot-1]=arguments[Ot];if(!Qs)throw TypeError("Cannot convert undefined or null to object");for(var A=function(Y){Y&&Object.keys(Y).forEach(function(Ae){return Qs[Ae]=Y[Ae]})},sn=0,Re=Lr;sn<Re.length;sn++)A(Re[sn]);return Qs})},9216:function(Qs,Lr){!function(Ot){"use strict";function sn(h){var S,V,te,fe;for(V=1,te=arguments.length;V<te;V++)for(S in fe=arguments[V])h[S]=fe[S];return h}var Re=Object.create||function(){function h(){}return function(S){return h.prototype=S,new h}}();function e(h,S){var V=Array.prototype.slice;if(h.bind)return h.bind.apply(h,V.call(arguments,1));var te=V.call(arguments,2);return function(){return h.apply(S,te.length?te.concat(V.call(arguments)):arguments)}}var Y=0;function Ae(h){return"_leaflet_id"in h||(h._leaflet_id=++Y),h._leaflet_id}function ke(h,S,V){var te,fe,Ne,Pt;return Pt=function(){te=!1,fe&&(Ne.apply(V,fe),fe=!1)},Ne=function(){te?fe=arguments:(h.apply(V,arguments),setTimeout(Pt,S),te=!0)},Ne}function Ee(h,S,V){var te=S[1],fe=S[0],Ne=te-fe;return h===te&&V?h:((h-fe)%Ne+Ne)%Ne+fe}function Oe(){return!1}function Ye(h,S){if(!1===S)return h;var V=Math.pow(10,void 0===S?6:S);return Math.round(h*V)/V}function Xe(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function et(h){return Xe(h).split(/\s+/)}function dt(h,S){for(var V in Object.prototype.hasOwnProperty.call(h,"options")||(h.options=h.options?Re(h.options):{}),S)h.options[V]=S[V];return h.options}function St(h,S,V){var te=[];for(var fe in h)te.push(encodeURIComponent(V?fe.toUpperCase():fe)+"="+encodeURIComponent(h[fe]));return(S&&-1!==S.indexOf("?")?"&":"?")+te.join("&")}var it=/\{ *([\w_ -]+) *\}/g;function pt(h,S){return h.replace(it,function(V,te){var fe=S[te];if(void 0===fe)throw new Error("No value provided for variable "+V);return"function"==typeof fe&&(fe=fe(S)),fe})}var yt=Array.isArray||function(h){return"[object Array]"===Object.prototype.toString.call(h)};function Qt(h,S){for(var V=0;V<h.length;V++)if(h[V]===S)return V;return-1}var Ve="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Zt(h){return window["webkit"+h]||window["moz"+h]||window["ms"+h]}var ei=0;function rt(h){var S=+new Date,V=Math.max(0,16-(S-ei));return ei=S+V,window.setTimeout(h,V)}var Kt=window.requestAnimationFrame||Zt("RequestAnimationFrame")||rt,Yt=window.cancelAnimationFrame||Zt("CancelAnimationFrame")||Zt("CancelRequestAnimationFrame")||function(h){window.clearTimeout(h)};function Nt(h,S,V){if(!V||Kt!==rt)return Kt.call(window,e(h,S));h.call(S)}function ct(h){h&&Yt.call(window,h)}var Vt={__proto__:null,extend:sn,create:Re,bind:e,get lastId(){return Y},stamp:Ae,throttle:ke,wrapNum:Ee,falseFn:Oe,formatNum:Ye,trim:Xe,splitWords:et,setOptions:dt,getParamString:St,template:pt,isArray:yt,indexOf:Qt,emptyImageUrl:Ve,requestFn:Kt,cancelFn:Yt,requestAnimFrame:Nt,cancelAnimFrame:ct};function qt(){}qt.extend=function(h){var S=function(){dt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},V=S.__super__=this.prototype,te=Re(V);for(var fe in te.constructor=S,S.prototype=te,this)Object.prototype.hasOwnProperty.call(this,fe)&&"prototype"!==fe&&"__super__"!==fe&&(S[fe]=this[fe]);return h.statics&&sn(S,h.statics),h.includes&&(function ri(h){if(!(typeof L>"u")&&L&&L.Mixin){h=yt(h)?h:[h];for(var S=0;S<h.length;S++)h[S]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(h.includes),sn.apply(null,[te].concat(h.includes))),sn(te,h),delete te.statics,delete te.includes,te.options&&(te.options=V.options?Re(V.options):{},sn(te.options,h.options)),te._initHooks=[],te.callInitHooks=function(){if(!this._initHooksCalled){V.callInitHooks&&V.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ne=0,Pt=te._initHooks.length;Ne<Pt;Ne++)te._initHooks[Ne].call(this)}},S},qt.include=function(h){var S=this.prototype.options;return sn(this.prototype,h),h.options&&(this.prototype.options=S,this.mergeOptions(h.options)),this},qt.mergeOptions=function(h){return sn(this.prototype.options,h),this},qt.addInitHook=function(h){var S=Array.prototype.slice.call(arguments,1),V="function"==typeof h?h:function(){this[h].apply(this,S)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(V),this};var Li={on:function(h,S,V){if("object"==typeof h)for(var te in h)this._on(te,h[te],S);else for(var fe=0,Ne=(h=et(h)).length;fe<Ne;fe++)this._on(h[fe],S,V);return this},off:function(h,S,V){if(arguments.length)if("object"==typeof h)for(var te in h)this._off(te,h[te],S);else{h=et(h);for(var fe=1===arguments.length,Ne=0,Pt=h.length;Ne<Pt;Ne++)fe?this._off(h[Ne]):this._off(h[Ne],S,V)}else delete this._events;return this},_on:function(h,S,V,te){if("function"==typeof S){if(!1===this._listens(h,S,V)){V===this&&(V=void 0);var fe={fn:S,ctx:V};te&&(fe.once=!0),this._events=this._events||{},this._events[h]=this._events[h]||[],this._events[h].push(fe)}}else console.warn("wrong listener type: "+typeof S)},_off:function(h,S,V){var te,fe,Ne;if(this._events&&(te=this._events[h])){if(1===arguments.length){if(this._firingCount)for(fe=0,Ne=te.length;fe<Ne;fe++)te[fe].fn=Oe;return void delete this._events[h]}if("function"!=typeof S)return void console.warn("wrong listener type: "+typeof S);var Pt=this._listens(h,S,V);!1!==Pt&&(this._firingCount&&(te[Pt].fn=Oe,this._events[h]=te=te.slice()),te.splice(Pt,1))}},fire:function(h,S,V){if(!this.listens(h,V))return this;var te=sn({},S,{type:h,target:this,sourceTarget:S&&S.sourceTarget||this});if(this._events){var fe=this._events[h];if(fe){this._firingCount=this._firingCount+1||1;for(var Ne=0,Pt=fe.length;Ne<Pt;Ne++){var Jt=fe[Ne],_i=Jt.fn;Jt.once&&this.off(h,_i,Jt.ctx),_i.call(Jt.ctx||this,te)}this._firingCount--}}return V&&this._propagateEvent(te),this},listens:function(h,S,V,te){"string"!=typeof h&&console.warn('"string" type argument expected');var fe=S;"function"!=typeof S&&(te=!!S,fe=void 0,V=void 0);var Ne=this._events&&this._events[h];if(Ne&&Ne.length&&!1!==this._listens(h,fe,V))return!0;if(te)for(var Pt in this._eventParents)if(this._eventParents[Pt].listens(h,S,V,te))return!0;return!1},_listens:function(h,S,V){if(!this._events)return!1;var te=this._events[h]||[];if(!S)return!!te.length;V===this&&(V=void 0);for(var fe=0,Ne=te.length;fe<Ne;fe++)if(te[fe].fn===S&&te[fe].ctx===V)return fe;return!1},once:function(h,S,V){if("object"==typeof h)for(var te in h)this._on(te,h[te],S,!0);else for(var fe=0,Ne=(h=et(h)).length;fe<Ne;fe++)this._on(h[fe],S,V,!0);return this},addEventParent:function(h){return this._eventParents=this._eventParents||{},this._eventParents[Ae(h)]=h,this},removeEventParent:function(h){return this._eventParents&&delete this._eventParents[Ae(h)],this},_propagateEvent:function(h){for(var S in this._eventParents)this._eventParents[S].fire(h.type,sn({layer:h.target,propagatedFrom:h.target},h),!0)}};Li.addEventListener=Li.on,Li.removeEventListener=Li.clearAllEventListeners=Li.off,Li.addOneTimeEventListener=Li.once,Li.fireEvent=Li.fire,Li.hasEventListeners=Li.listens;var ai=qt.extend(Li);function fi(h,S,V){this.x=V?Math.round(h):h,this.y=V?Math.round(S):S}var Mi=Math.trunc||function(h){return h>0?Math.floor(h):Math.ceil(h)};function Yi(h,S,V){return h instanceof fi?h:yt(h)?new fi(h[0],h[1]):null==h?h:"object"==typeof h&&"x"in h&&"y"in h?new fi(h.x,h.y):new fi(h,S,V)}function mn(h,S){if(h)for(var V=S?[h,S]:h,te=0,fe=V.length;te<fe;te++)this.extend(V[te])}function ln(h,S){return!h||h instanceof mn?h:new mn(h,S)}function zn(h,S){if(h)for(var V=S?[h,S]:h,te=0,fe=V.length;te<fe;te++)this.extend(V[te])}function jt(h,S){return h instanceof zn?h:new zn(h,S)}function Di(h,S,V){if(isNaN(h)||isNaN(S))throw new Error("Invalid LatLng object: ("+h+", "+S+")");this.lat=+h,this.lng=+S,void 0!==V&&(this.alt=+V)}function qi(h,S,V){return h instanceof Di?h:yt(h)&&"object"!=typeof h[0]?3===h.length?new Di(h[0],h[1],h[2]):2===h.length?new Di(h[0],h[1]):null:null==h?h:"object"==typeof h&&"lat"in h?new Di(h.lat,"lng"in h?h.lng:h.lon,h.alt):void 0===S?null:new Di(h,S,V)}fi.prototype={clone:function(){return new fi(this.x,this.y)},add:function(h){return this.clone()._add(Yi(h))},_add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.clone()._subtract(Yi(h))},_subtract:function(h){return this.x-=h.x,this.y-=h.y,this},divideBy:function(h){return this.clone()._divideBy(h)},_divideBy:function(h){return this.x/=h,this.y/=h,this},multiplyBy:function(h){return this.clone()._multiplyBy(h)},_multiplyBy:function(h){return this.x*=h,this.y*=h,this},scaleBy:function(h){return new fi(this.x*h.x,this.y*h.y)},unscaleBy:function(h){return new fi(this.x/h.x,this.y/h.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Mi(this.x),this.y=Mi(this.y),this},distanceTo:function(h){var S=(h=Yi(h)).x-this.x,V=h.y-this.y;return Math.sqrt(S*S+V*V)},equals:function(h){return(h=Yi(h)).x===this.x&&h.y===this.y},contains:function(h){return h=Yi(h),Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)},toString:function(){return"Point("+Ye(this.x)+", "+Ye(this.y)+")"}},mn.prototype={extend:function(h){var S,V;if(!h)return this;if(h instanceof fi||"number"==typeof h[0]||"x"in h)S=V=Yi(h);else if(V=(h=ln(h)).max,!(S=h.min)||!V)return this;return this.min||this.max?(this.min.x=Math.min(S.x,this.min.x),this.max.x=Math.max(V.x,this.max.x),this.min.y=Math.min(S.y,this.min.y),this.max.y=Math.max(V.y,this.max.y)):(this.min=S.clone(),this.max=V.clone()),this},getCenter:function(h){return Yi((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)},getBottomLeft:function(){return Yi(this.min.x,this.max.y)},getTopRight:function(){return Yi(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var S,V;return(h="number"==typeof h[0]||h instanceof fi?Yi(h):ln(h))instanceof mn?(S=h.min,V=h.max):S=V=h,S.x>=this.min.x&&V.x<=this.max.x&&S.y>=this.min.y&&V.y<=this.max.y},intersects:function(h){h=ln(h);var S=this.min,V=this.max,te=h.min,fe=h.max;return fe.x>=S.x&&te.x<=V.x&&fe.y>=S.y&&te.y<=V.y},overlaps:function(h){h=ln(h);var S=this.min,V=this.max,te=h.min,fe=h.max;return fe.x>S.x&&te.x<V.x&&fe.y>S.y&&te.y<V.y},isValid:function(){return!(!this.min||!this.max)},pad:function(h){var S=this.min,V=this.max,te=Math.abs(S.x-V.x)*h,fe=Math.abs(S.y-V.y)*h;return ln(Yi(S.x-te,S.y-fe),Yi(V.x+te,V.y+fe))},equals:function(h){return!!h&&(h=ln(h),this.min.equals(h.getTopLeft())&&this.max.equals(h.getBottomRight()))}},zn.prototype={extend:function(h){var te,fe,S=this._southWest,V=this._northEast;if(h instanceof Di)te=h,fe=h;else{if(!(h instanceof zn))return h?this.extend(qi(h)||jt(h)):this;if(fe=h._northEast,!(te=h._southWest)||!fe)return this}return S||V?(S.lat=Math.min(te.lat,S.lat),S.lng=Math.min(te.lng,S.lng),V.lat=Math.max(fe.lat,V.lat),V.lng=Math.max(fe.lng,V.lng)):(this._southWest=new Di(te.lat,te.lng),this._northEast=new Di(fe.lat,fe.lng)),this},pad:function(h){var S=this._southWest,V=this._northEast,te=Math.abs(S.lat-V.lat)*h,fe=Math.abs(S.lng-V.lng)*h;return new zn(new Di(S.lat-te,S.lng-fe),new Di(V.lat+te,V.lng+fe))},getCenter:function(){return new Di((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Di(this.getNorth(),this.getWest())},getSouthEast:function(){return new Di(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){h="number"==typeof h[0]||h instanceof Di||"lat"in h?qi(h):jt(h);var te,fe,S=this._southWest,V=this._northEast;return h instanceof zn?(te=h.getSouthWest(),fe=h.getNorthEast()):te=fe=h,te.lat>=S.lat&&fe.lat<=V.lat&&te.lng>=S.lng&&fe.lng<=V.lng},intersects:function(h){h=jt(h);var S=this._southWest,V=this._northEast,te=h.getSouthWest(),fe=h.getNorthEast();return fe.lat>=S.lat&&te.lat<=V.lat&&fe.lng>=S.lng&&te.lng<=V.lng},overlaps:function(h){h=jt(h);var S=this._southWest,V=this._northEast,te=h.getSouthWest(),fe=h.getNorthEast();return fe.lat>S.lat&&te.lat<V.lat&&fe.lng>S.lng&&te.lng<V.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(h,S){return!!h&&(h=jt(h),this._southWest.equals(h.getSouthWest(),S)&&this._northEast.equals(h.getNorthEast(),S))},isValid:function(){return!(!this._southWest||!this._northEast)}},Di.prototype={equals:function(h,S){return!!h&&(h=qi(h),Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng))<=(void 0===S?1e-9:S))},toString:function(h){return"LatLng("+Ye(this.lat,h)+", "+Ye(this.lng,h)+")"},distanceTo:function(h){return Rn.distance(this,qi(h))},wrap:function(){return Rn.wrapLatLng(this)},toBounds:function(h){var S=180*h/40075017,V=S/Math.cos(Math.PI/180*this.lat);return jt([this.lat-S,this.lng-V],[this.lat+S,this.lng+V])},clone:function(){return new Di(this.lat,this.lng,this.alt)}};var h,Hn={latLngToPoint:function(h,S){var V=this.projection.project(h),te=this.scale(S);return this.transformation._transform(V,te)},pointToLatLng:function(h,S){var V=this.scale(S),te=this.transformation.untransform(h,V);return this.projection.unproject(te)},project:function(h){return this.projection.project(h)},unproject:function(h){return this.projection.unproject(h)},scale:function(h){return 256*Math.pow(2,h)},zoom:function(h){return Math.log(h/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite)return null;var S=this.projection.bounds,V=this.scale(h);return new mn(this.transformation.transform(S.min,V),this.transformation.transform(S.max,V))},infinite:!1,wrapLatLng:function(h){var S=this.wrapLng?Ee(h.lng,this.wrapLng,!0):h.lng;return new Di(this.wrapLat?Ee(h.lat,this.wrapLat,!0):h.lat,S,h.alt)},wrapLatLngBounds:function(h){var S=h.getCenter(),V=this.wrapLatLng(S),te=S.lat-V.lat,fe=S.lng-V.lng;if(0===te&&0===fe)return h;var Ne=h.getSouthWest(),Pt=h.getNorthEast();return new zn(new Di(Ne.lat-te,Ne.lng-fe),new Di(Pt.lat-te,Pt.lng-fe))}},Rn=sn({},Hn,{wrapLng:[-180,180],R:6371e3,distance:function(h,S){var V=Math.PI/180,te=h.lat*V,fe=S.lat*V,Ne=Math.sin((S.lat-h.lat)*V/2),Pt=Math.sin((S.lng-h.lng)*V/2),Jt=Ne*Ne+Math.cos(te)*Math.cos(fe)*Pt*Pt,_i=2*Math.atan2(Math.sqrt(Jt),Math.sqrt(1-Jt));return this.R*_i}}),Pi={R:6378137,MAX_LATITUDE:85.0511287798,project:function(h){var S=Math.PI/180,V=this.MAX_LATITUDE,te=Math.max(Math.min(V,h.lat),-V),fe=Math.sin(te*S);return new fi(this.R*h.lng*S,this.R*Math.log((1+fe)/(1-fe))/2)},unproject:function(h){var S=180/Math.PI;return new Di((2*Math.atan(Math.exp(h.y/this.R))-Math.PI/2)*S,h.x*S/this.R)},bounds:(h=6378137*Math.PI,new mn([-h,-h],[h,h]))};function gr(h,S,V,te){if(yt(h))return this._a=h[0],this._b=h[1],this._c=h[2],void(this._d=h[3]);this._a=h,this._b=S,this._c=V,this._d=te}function tr(h,S,V,te){return new gr(h,S,V,te)}gr.prototype={transform:function(h,S){return this._transform(h.clone(),S)},_transform:function(h,S){return h.x=(S=S||1)*(this._a*h.x+this._b),h.y=S*(this._c*h.y+this._d),h},untransform:function(h,S){return new fi((h.x/(S=S||1)-this._b)/this._a,(h.y/S-this._d)/this._c)}};var qn=sn({},Rn,{code:"EPSG:3857",projection:Pi,transformation:function(){var h=.5/(Math.PI*Pi.R);return tr(h,.5,-h,.5)}()}),hn=sn({},qn,{code:"EPSG:900913"});function Ui(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}function cn(h,S){var te,fe,Ne,Pt,Jt,_i,V="";for(te=0,Ne=h.length;te<Ne;te++){for(fe=0,Pt=(Jt=h[te]).length;fe<Pt;fe++)V+=(fe?"L":"M")+(_i=Jt[fe]).x+" "+_i.y;V+=S?je.svg?"z":"x":""}return V||"M0 0"}var Vi=document.documentElement.style,Oi="ActiveXObject"in window,Bn=Oi&&!document.addEventListener,$i="msLaunchUri"in navigator&&!("documentMode"in document),gi=Ue("webkit"),un=Ue("android"),Mn=Ue("android 2")||Ue("android 3"),Tr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kr=un&&Ue("Google")&&Tr<537&&!("AudioNode"in window),xr=!!window.opera,_r=!$i&&Ue("chrome"),ir=Ue("gecko")&&!gi&&!xr&&!Oi,yn=!_r&&Ue("safari"),qr=Ue("phantom"),Sr="OTransition"in Vi,ys=0===navigator.platform.indexOf("Win"),Kn=Oi&&"transition"in Vi,fr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mn,sr="MozPerspective"in Vi,vr=!window.L_DISABLE_3D&&(Kn||fr||sr)&&!Sr&&!qr,Yr=typeof orientation<"u"||Ue("mobile"),xt=Yr&&gi,De=Yr&&fr,ze=!window.PointerEvent&&window.MSPointerEvent,at=!(!window.PointerEvent&&!ze),st="ontouchstart"in window||!!window.TouchEvent,It=!window.L_NO_TOUCH&&(st||at),Ht=Yr&&xr,Gt=Yr&&ir,Ie=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,He=function(){var h=!1;try{var S=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testPassiveEventSupport",Oe,S),window.removeEventListener("testPassiveEventSupport",Oe,S)}catch{}return h}(),Pe=!!document.createElement("canvas").getContext,bt=!(!document.createElementNS||!Ui("svg").createSVGRect),Mt=!!bt&&function(){var h=document.createElement("div");return h.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(h.firstChild&&h.firstChild.namespaceURI)}(),xi=!bt&&function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var S=h.firstChild;return S.style.behavior="url(#default#VML)",S&&"object"==typeof S.adj}catch{return!1}}();function Ue(h){return navigator.userAgent.toLowerCase().indexOf(h)>=0}var je={ie:Oi,ielt9:Bn,edge:$i,webkit:gi,android:un,android23:Mn,androidStock:kr,opera:xr,chrome:_r,gecko:ir,safari:yn,phantom:qr,opera12:Sr,win:ys,ie3d:Kn,webkit3d:fr,gecko3d:sr,any3d:vr,mobile:Yr,mobileWebkit:xt,mobileWebkit3d:De,msPointer:ze,pointer:at,touch:It,touchNative:st,mobileOpera:Ht,mobileGecko:Gt,retina:Ie,passiveEvents:He,canvas:Pe,svg:bt,vml:xi,inlineSvg:Mt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Le=je.msPointer?"MSPointerDown":"pointerdown",Fe=je.msPointer?"MSPointerMove":"pointermove",ht=je.msPointer?"MSPointerUp":"pointerup",Rt=je.msPointer?"MSPointerCancel":"pointercancel",pi={touchstart:Le,touchmove:Fe,touchend:ht,touchcancel:Rt},si={touchstart:function n(h,S){S.MSPOINTER_TYPE_TOUCH&&S.pointerType===S.MSPOINTER_TYPE_TOUCH&&Fr(S),ue(h,S)},touchmove:ue,touchend:ue,touchcancel:ue},Si={},Qi=!1;function Bi(h,S,V){return"touchstart"===S&&function di(){Qi||(document.addEventListener(Le,Dn,!0),document.addEventListener(Fe,In,!0),document.addEventListener(ht,tt,!0),document.addEventListener(Rt,tt,!0),Qi=!0)}(),si[S]?(V=si[S].bind(this,V),h.addEventListener(pi[S],V,!1),V):(console.warn("wrong event specified:",S),Oe)}function Dn(h){Si[h.pointerId]=h}function In(h){Si[h.pointerId]&&(Si[h.pointerId]=h)}function tt(h){delete Si[h.pointerId]}function ue(h,S){if(S.pointerType!==(S.MSPOINTER_TYPE_MOUSE||"mouse")){for(var V in S.touches=[],Si)S.touches.push(Si[V]);S.changedTouches=[S],h(S)}}var c=200;var Wt,hi,yi,$n,Jn,x=Me(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),k=Me(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),M="webkitTransition"===k||"OTransition"===k?k+"End":"transitionend";function R(h){return"string"==typeof h?document.getElementById(h):h}function j(h,S){var V=h.style[S]||h.currentStyle&&h.currentStyle[S];if((!V||"auto"===V)&&document.defaultView){var te=document.defaultView.getComputedStyle(h,null);V=te?te[S]:null}return"auto"===V?null:V}function U(h,S,V){var te=document.createElement(h);return te.className=S||"",V&&V.appendChild(te),te}function X(h){var S=h.parentNode;S&&S.removeChild(h)}function ee(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function ae(h){var S=h.parentNode;S&&S.lastChild!==h&&S.appendChild(h)}function de(h){var S=h.parentNode;S&&S.firstChild!==h&&S.insertBefore(h,S.firstChild)}function ve(h,S){if(void 0!==h.classList)return h.classList.contains(S);var V=K(h);return V.length>0&&new RegExp("(^|\\s)"+S+"(\\s|$)").test(V)}function he(h,S){if(void 0!==h.classList)for(var V=et(S),te=0,fe=V.length;te<fe;te++)h.classList.add(V[te]);else if(!ve(h,S)){var Ne=K(h);F(h,(Ne?Ne+" ":"")+S)}}function be(h,S){void 0!==h.classList?h.classList.remove(S):F(h,Xe((" "+K(h)+" ").replace(" "+S+" "," ")))}function F(h,S){void 0===h.className.baseVal?h.className=S:h.className.baseVal=S}function K(h){return h.correspondingElement&&(h=h.correspondingElement),void 0===h.className.baseVal?h.className:h.className.baseVal}function ce(h,S){"opacity"in h.style?h.style.opacity=S:"filter"in h.style&&function _e(h,S){var V=!1,te="DXImageTransform.Microsoft.Alpha";try{V=h.filters.item(te)}catch{if(1===S)return}S=Math.round(100*S),V?(V.Enabled=100!==S,V.Opacity=S):h.style.filter+=" progid:"+te+"(opacity="+S+")"}(h,S)}function Me(h){for(var S=document.documentElement.style,V=0;V<h.length;V++)if(h[V]in S)return h[V];return!1}function $e(h,S,V){var te=S||new fi(0,0);h.style[x]=(je.ie3d?"translate("+te.x+"px,"+te.y+"px)":"translate3d("+te.x+"px,"+te.y+"px,0)")+(V?" scale("+V+")":"")}function wt(h,S){h._leaflet_pos=S,je.any3d?$e(h,S):(h.style.left=S.x+"px",h.style.top=S.y+"px")}function kt(h){return h._leaflet_pos||new fi(0,0)}if("onselectstart"in document)Wt=function(){Un(window,"selectstart",Fr)},hi=function(){Yn(window,"selectstart",Fr)};else{var rn=Me(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wt=function(){if(rn){var h=document.documentElement.style;yi=h[rn],h[rn]="none"}},hi=function(){rn&&(document.documentElement.style[rn]=yi,yi=void 0)}}function gn(){Un(window,"dragstart",Fr)}function An(){Yn(window,"dragstart",Fr)}function Qn(h){for(;-1===h.tabIndex;)h=h.parentNode;h.style&&(wr(),$n=h,Jn=h.style.outlineStyle,h.style.outlineStyle="none",Un(window,"keydown",wr))}function wr(){$n&&($n.style.outlineStyle=Jn,$n=void 0,Jn=void 0,Yn(window,"keydown",wr))}function Pr(h){do{h=h.parentNode}while(!(h.offsetWidth&&h.offsetHeight||h===document.body));return h}function Rr(h){var S=h.getBoundingClientRect();return{x:S.width/h.offsetWidth||1,y:S.height/h.offsetHeight||1,boundingClientRect:S}}var yr={__proto__:null,TRANSFORM:x,TRANSITION:k,TRANSITION_END:M,get:R,getStyle:j,create:U,remove:X,empty:ee,toFront:ae,toBack:de,hasClass:ve,addClass:he,removeClass:be,setClass:F,getClass:K,setOpacity:ce,testProp:Me,setTransform:$e,setPosition:wt,getPosition:kt,get disableTextSelection(){return Wt},get enableTextSelection(){return hi},disableImageDrag:gn,enableImageDrag:An,preventOutline:Qn,restoreOutline:wr,getSizedParentNode:Pr,getScale:Rr};function Un(h,S,V,te){if(S&&"object"==typeof S)for(var fe in S)sa(h,fe,S[fe],V);else for(var Ne=0,Pt=(S=et(S)).length;Ne<Pt;Ne++)sa(h,S[Ne],V,te);return this}var Wr="_leaflet_events";function Yn(h,S,V,te){if(1===arguments.length)zr(h),delete h[Wr];else if(S&&"object"==typeof S)for(var fe in S)Kr(h,fe,S[fe],V);else if(S=et(S),2===arguments.length)zr(h,function(Jt){return-1!==Qt(S,Jt)});else for(var Ne=0,Pt=S.length;Ne<Pt;Ne++)Kr(h,S[Ne],V,te);return this}function zr(h,S){for(var V in h[Wr]){var te=V.split(/\d/)[0];(!S||S(te))&&Kr(h,te,null,null,V)}}var qa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sa(h,S,V,te){var fe=S+Ae(V)+(te?"_"+Ae(te):"");if(h[Wr]&&h[Wr][fe])return this;var Ne=function(Jt){return V.call(te||h,Jt||window.event)},Pt=Ne;!je.touchNative&&je.pointer&&0===S.indexOf("touch")?Ne=Bi(h,S,Ne):je.touch&&"dblclick"===S?Ne=function g(h,S){h.addEventListener("dblclick",S);var te,V=0;function fe(Ne){if(1===Ne.detail){if("mouse"!==Ne.pointerType&&(!Ne.sourceCapabilities||Ne.sourceCapabilities.firesTouchEvents)){var Pt=Zl(Ne);if(!Pt.some(function(_i){return _i instanceof HTMLLabelElement&&_i.attributes.for})||Pt.some(function(_i){return _i instanceof HTMLInputElement||_i instanceof HTMLSelectElement})){var Jt=Date.now();Jt-V<=c?2==++te&&S(function s(h){var V,te,S={};for(te in h)S[te]=(V=h[te])&&V.bind?V.bind(h):V;return h=S,S.type="dblclick",S.detail=2,S.isTrusted=!1,S._simulated=!0,S}(Ne)):te=1,V=Jt}}}else te=Ne.detail}return h.addEventListener("click",fe),{dblclick:S,simDblclick:fe}}(h,Ne):"addEventListener"in h?"touchstart"===S||"touchmove"===S||"wheel"===S||"mousewheel"===S?h.addEventListener(qa[S]||S,Ne,!!je.passiveEvents&&{passive:!1}):"mouseenter"===S||"mouseleave"===S?h.addEventListener(qa[S],Ne=function(Jt){Jt=Jt||window.event,mc(h,Jt)&&Pt(Jt)},!1):h.addEventListener(S,Pt,!1):h.attachEvent("on"+S,Ne),h[Wr]=h[Wr]||{},h[Wr][fe]=Ne}function Kr(h,S,V,te,fe){fe=fe||S+Ae(V)+(te?"_"+Ae(te):"");var Ne=h[Wr]&&h[Wr][fe];if(!Ne)return this;!je.touchNative&&je.pointer&&0===S.indexOf("touch")?function Tn(h,S,V){pi[S]?h.removeEventListener(pi[S],V,!1):console.warn("wrong event specified:",S)}(h,S,Ne):je.touch&&"dblclick"===S?function y(h,S){h.removeEventListener("dblclick",S.dblclick),h.removeEventListener("click",S.simDblclick)}(h,Ne):"removeEventListener"in h?h.removeEventListener(qa[S]||S,Ne,!1):h.detachEvent("on"+S,Ne),h[Wr][fe]=null}function So(h){return h.stopPropagation?h.stopPropagation():h.originalEvent?h.originalEvent._stopped=!0:h.cancelBubble=!0,this}function Dl(h){return sa(h,"wheel",So),this}function go(h){return Un(h,"mousedown touchstart dblclick contextmenu",So),h._leaflet_disable_click=!0,this}function Fr(h){return h.preventDefault?h.preventDefault():h.returnValue=!1,this}function eo(h){return Fr(h),So(h),this}function Zl(h){if(h.composedPath)return h.composedPath();for(var S=[],V=h.target;V;)S.push(V),V=V.parentNode;return S}function _a(h,S){if(!S)return new fi(h.clientX,h.clientY);var V=Rr(S),te=V.boundingClientRect;return new fi((h.clientX-te.left)/V.x-S.clientLeft,(h.clientY-te.top)/V.y-S.clientTop)}var zo=je.linux&&je.chrome?window.devicePixelRatio:je.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function dl(h){return je.edge?h.wheelDeltaY/2:h.deltaY&&0===h.deltaMode?-h.deltaY/zo:h.deltaY&&1===h.deltaMode?20*-h.deltaY:h.deltaY&&2===h.deltaMode?60*-h.deltaY:h.deltaX||h.deltaZ?0:h.wheelDelta?(h.wheelDeltaY||h.wheelDelta)/2:h.detail&&Math.abs(h.detail)<32765?20*-h.detail:h.detail?h.detail/-32765*60:0}function mc(h,S){var V=S.relatedTarget;if(!V)return!0;try{for(;V&&V!==h;)V=V.parentNode}catch{return!1}return V!==h}var Rc={__proto__:null,on:Un,off:Yn,stopPropagation:So,disableScrollPropagation:Dl,disableClickPropagation:go,preventDefault:Fr,stop:eo,getPropagationPath:Zl,getMousePosition:_a,getWheelDelta:dl,isExternalTarget:mc,addListener:Un,removeListener:Yn},pl=ai.extend({run:function(h,S,V,te){this.stop(),this._el=h,this._inProgress=!0,this._duration=V||.25,this._easeOutPower=1/Math.max(te||.5,.2),this._startPos=kt(h),this._offset=S.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Nt(this._animate,this),this._step()},_step:function(h){var S=+new Date-this._startTime,V=1e3*this._duration;S<V?this._runFrame(this._easeOut(S/V),h):(this._runFrame(1),this._complete())},_runFrame:function(h,S){var V=this._startPos.add(this._offset.multiplyBy(h));S&&V._round(),wt(this._el,V),this.fire("step")},_complete:function(){ct(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)}}),lr=ai.extend({options:{crs:qn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(h,S){S=dt(this,S),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(h),this._initLayout(),this._onResize=e(this._onResize,this),this._initEvents(),S.maxBounds&&this.setMaxBounds(S.maxBounds),void 0!==S.zoom&&(this._zoom=this._limitZoom(S.zoom)),S.center&&void 0!==S.zoom&&this.setView(qi(S.center),S.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=k&&je.any3d&&!je.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Un(this._proxy,M,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(h,S,V){return S=void 0===S?this._zoom:this._limitZoom(S),h=this._limitCenter(qi(h),S,this.options.maxBounds),V=V||{},this._stop(),this._loaded&&!V.reset&&!0!==V&&(void 0!==V.animate&&(V.zoom=sn({animate:V.animate},V.zoom),V.pan=sn({animate:V.animate,duration:V.duration},V.pan)),this._zoom!==S?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,S,V.zoom):this._tryAnimatedPan(h,V.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(h,S,V.pan&&V.pan.noMoveStart),this)},setZoom:function(h,S){return this._loaded?this.setView(this.getCenter(),h,{zoom:S}):(this._zoom=h,this)},zoomIn:function(h,S){return this.setZoom(this._zoom+(h=h||(je.any3d?this.options.zoomDelta:1)),S)},zoomOut:function(h,S){return this.setZoom(this._zoom-(h=h||(je.any3d?this.options.zoomDelta:1)),S)},setZoomAround:function(h,S,V){var te=this.getZoomScale(S),fe=this.getSize().divideBy(2),Pt=(h instanceof fi?h:this.latLngToContainerPoint(h)).subtract(fe).multiplyBy(1-1/te),Jt=this.containerPointToLatLng(fe.add(Pt));return this.setView(Jt,S,{zoom:V})},_getBoundsCenterZoom:function(h,S){S=S||{},h=h.getBounds?h.getBounds():jt(h);var V=Yi(S.paddingTopLeft||S.padding||[0,0]),te=Yi(S.paddingBottomRight||S.padding||[0,0]),fe=this.getBoundsZoom(h,!1,V.add(te));if((fe="number"==typeof S.maxZoom?Math.min(S.maxZoom,fe):fe)===1/0)return{center:h.getCenter(),zoom:fe};var Ne=te.subtract(V).divideBy(2),Pt=this.project(h.getSouthWest(),fe),Jt=this.project(h.getNorthEast(),fe);return{center:this.unproject(Pt.add(Jt).divideBy(2).add(Ne),fe),zoom:fe}},fitBounds:function(h,S){if(!(h=jt(h)).isValid())throw new Error("Bounds are not valid.");var V=this._getBoundsCenterZoom(h,S);return this.setView(V.center,V.zoom,S)},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)},panTo:function(h,S){return this.setView(h,this._zoom,{pan:S})},panBy:function(h,S){if(S=S||{},!(h=Yi(h).round()).x&&!h.y)return this.fire("moveend");if(!0!==S.animate&&!this.getSize().contains(h))return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),S.noMoveStart||this.fire("movestart"),!1!==S.animate){he(this._mapPane,"leaflet-pan-anim");var V=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,V,S.duration||.25,S.easeLinearity)}else this._rawPanBy(h),this.fire("move").fire("moveend");return this},flyTo:function(h,S,V){if(!1===(V=V||{}).animate||!je.any3d)return this.setView(h,S,V);this._stop();var te=this.project(this.getCenter()),fe=this.project(h),Ne=this.getSize(),Pt=this._zoom;h=qi(h),S=void 0===S?Pt:S;var Jt=Math.max(Ne.x,Ne.y),_i=Jt*this.getZoomScale(Pt,S),Zi=fe.distanceTo(te)||1,kn=1.42,Ln=kn*kn;function cr(xe){var Ei=(_i*_i-Jt*Jt+(xe?-1:1)*Ln*Ln*Zi*Zi)/(2*(xe?_i:Jt)*Ln*Zi),bn=Math.sqrt(Ei*Ei+1)-Ei;return bn<1e-9?-18:Math.log(bn)}function Ir(xe){return(Math.exp(xe)-Math.exp(-xe))/2}function Ms(xe){return(Math.exp(xe)+Math.exp(-xe))/2}var bs=cr(0);function ha(xe){return Jt*(Ms(bs)*function Zs(xe){return Ir(xe)/Ms(xe)}(bs+kn*xe)-Ir(bs))/Ln}var yc=Date.now(),Cl=(cr(1)-bs)/kn,Uo=V.duration?1e3*V.duration:1e3*Cl*.8;return this._moveStart(!0,V.noMoveStart),function ec(){var xe=(Date.now()-yc)/Uo,q=function qs(xe){return 1-Math.pow(1-xe,1.5)}(xe)*Cl;xe<=1?(this._flyToFrame=Nt(ec,this),this._move(this.unproject(te.add(fe.subtract(te).multiplyBy(ha(q)/Zi)),Pt),this.getScaleZoom(Jt/function ua(xe){return Jt*(Ms(bs)/Ms(bs+kn*xe))}(q),Pt),{flyTo:!0})):this._move(h,S)._moveEnd(!0)}.call(this),this},flyToBounds:function(h,S){var V=this._getBoundsCenterZoom(h,S);return this.flyTo(V.center,V.zoom,S)},setMaxBounds:function(h){return h=jt(h),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),h.isValid()?(this.options.maxBounds=h,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(h){var S=this.options.minZoom;return this.options.minZoom=h,this._loaded&&S!==h&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(h):this},setMaxZoom:function(h){var S=this.options.maxZoom;return this.options.maxZoom=h,this._loaded&&S!==h&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(h):this},panInsideBounds:function(h,S){this._enforcingBounds=!0;var V=this.getCenter(),te=this._limitCenter(V,this._zoom,jt(h));return V.equals(te)||this.panTo(te,S),this._enforcingBounds=!1,this},panInside:function(h,S){var V=Yi((S=S||{}).paddingTopLeft||S.padding||[0,0]),te=Yi(S.paddingBottomRight||S.padding||[0,0]),fe=this.project(this.getCenter()),Ne=this.project(h),Pt=this.getPixelBounds(),Jt=ln([Pt.min.add(V),Pt.max.subtract(te)]),_i=Jt.getSize();if(!Jt.contains(Ne)){this._enforcingBounds=!0;var Zi=Ne.subtract(Jt.getCenter()),kn=Jt.extend(Ne).getSize().subtract(_i);fe.x+=Zi.x<0?-kn.x:kn.x,fe.y+=Zi.y<0?-kn.y:kn.y,this.panTo(this.unproject(fe),S),this._enforcingBounds=!1}return this},invalidateSize:function(h){if(!this._loaded)return this;h=sn({animate:!1,pan:!0},!0===h?{animate:!0}:h);var S=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var V=this.getSize(),te=S.divideBy(2).round(),fe=V.divideBy(2).round(),Ne=te.subtract(fe);return Ne.x||Ne.y?(h.animate&&h.pan?this.panBy(Ne):(h.pan&&this._rawPanBy(Ne),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:S,newSize:V})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(h){if(h=this._locateOptions=sn({timeout:1e4,watch:!1},h),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var S=e(this._handleGeolocationResponse,this),V=e(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(S,V,h):navigator.geolocation.getCurrentPosition(S,V,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){if(this._container._leaflet_id){var S=h.code,V=h.message||(1===S?"permission denied":2===S?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:S,message:"Geolocation error: "+V+"."})}},_handleGeolocationResponse:function(h){if(this._container._leaflet_id){var te=new Di(h.coords.latitude,h.coords.longitude),fe=te.toBounds(2*h.coords.accuracy),Ne=this._locateOptions;if(Ne.setView){var Pt=this.getBoundsZoom(fe);this.setView(te,Ne.maxZoom?Math.min(Pt,Ne.maxZoom):Pt)}var Jt={latlng:te,bounds:fe,timestamp:h.timestamp};for(var _i in h.coords)"number"==typeof h.coords[_i]&&(Jt[_i]=h.coords[_i]);this.fire("locationfound",Jt)}},addHandler:function(h,S){if(!S)return this;var V=this[h]=new S(this);return this._handlers.push(V),this.options[h]&&V.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var h;for(h in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),X(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ct(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[h].remove();for(h in this._panes)X(this._panes[h]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(h,S){var te=U("div","leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),S||this._mapPane);return h&&(this._panes[h]=te),te},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds();return new zn(this.unproject(h.getBottomLeft()),this.unproject(h.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(h,S,V){h=jt(h),V=Yi(V||[0,0]);var te=this.getZoom()||0,fe=this.getMinZoom(),Ne=this.getMaxZoom(),Pt=h.getNorthWest(),Jt=h.getSouthEast(),_i=this.getSize().subtract(V),Zi=ln(this.project(Jt,te),this.project(Pt,te)).getSize(),kn=je.any3d?this.options.zoomSnap:1,Ln=_i.x/Zi.x,cr=_i.y/Zi.y,Ir=S?Math.max(Ln,cr):Math.min(Ln,cr);return te=this.getScaleZoom(Ir,te),kn&&(te=Math.round(te/(kn/100))*(kn/100),te=S?Math.ceil(te/kn)*kn:Math.floor(te/kn)*kn),Math.max(fe,Math.min(Ne,te))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new fi(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,S){var V=this._getTopLeftPoint(h,S);return new mn(V,V.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(h){return this.options.crs.getProjectedBounds(void 0===h?this.getZoom():h)},getPane:function(h){return"string"==typeof h?this._panes[h]:h},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h,S){var V=this.options.crs;return S=void 0===S?this._zoom:S,V.scale(h)/V.scale(S)},getScaleZoom:function(h,S){var V=this.options.crs,te=V.zoom(h*V.scale(S=void 0===S?this._zoom:S));return isNaN(te)?1/0:te},project:function(h,S){return S=void 0===S?this._zoom:S,this.options.crs.latLngToPoint(qi(h),S)},unproject:function(h,S){return S=void 0===S?this._zoom:S,this.options.crs.pointToLatLng(Yi(h),S)},layerPointToLatLng:function(h){var S=Yi(h).add(this.getPixelOrigin());return this.unproject(S)},latLngToLayerPoint:function(h){return this.project(qi(h))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(h){return this.options.crs.wrapLatLng(qi(h))},wrapLatLngBounds:function(h){return this.options.crs.wrapLatLngBounds(jt(h))},distance:function(h,S){return this.options.crs.distance(qi(h),qi(S))},containerPointToLayerPoint:function(h){return Yi(h).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(h){return Yi(h).add(this._getMapPanePos())},containerPointToLatLng:function(h){var S=this.containerPointToLayerPoint(Yi(h));return this.layerPointToLatLng(S)},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(qi(h)))},mouseEventToContainerPoint:function(h){return _a(h,this._container)},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))},_initContainer:function(h){var S=this._container=R(h);if(!S)throw new Error("Map container not found.");if(S._leaflet_id)throw new Error("Map container is already initialized.");Un(S,"scroll",this._onScroll,this),this._containerId=Ae(S)},_initLayout:function(){var h=this._container;this._fadeAnimated=this.options.fadeAnimation&&je.any3d,he(h,"leaflet-container"+(je.touch?" leaflet-touch":"")+(je.retina?" leaflet-retina":"")+(je.ielt9?" leaflet-oldie":"")+(je.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var S=j(h,"position");"absolute"!==S&&"relative"!==S&&"fixed"!==S&&"sticky"!==S&&(h.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var h=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wt(this._mapPane,new fi(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(h.markerPane,"leaflet-zoom-hide"),he(h.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,S,V){wt(this._mapPane,new fi(0,0));var te=!this._loaded;this._loaded=!0,S=this._limitZoom(S),this.fire("viewprereset");var fe=this._zoom!==S;this._moveStart(fe,V)._move(h,S)._moveEnd(fe),this.fire("viewreset"),te&&this.fire("load")},_moveStart:function(h,S){return h&&this.fire("zoomstart"),S||this.fire("movestart"),this},_move:function(h,S,V,te){void 0===S&&(S=this._zoom);var fe=this._zoom!==S;return this._zoom=S,this._lastCenter=h,this._pixelOrigin=this._getNewPixelOrigin(h),te?V&&V.pinch&&this.fire("zoom",V):((fe||V&&V.pinch)&&this.fire("zoom",V),this.fire("move",V)),this},_moveEnd:function(h){return h&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ct(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(h){wt(this._mapPane,this._getMapPanePos().subtract(h))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(h){this._targets={},this._targets[Ae(this._container)]=this;var S=h?Yn:Un;S(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&S(window,"resize",this._onResize,this),je.any3d&&this.options.transform3DLimit&&(h?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ct(this._resizeRequest),this._resizeRequest=Nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var h=this._getMapPanePos();Math.max(Math.abs(h.x),Math.abs(h.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(h,S){for(var te,V=[],fe="mouseout"===S||"mouseover"===S,Ne=h.target||h.srcElement,Pt=!1;Ne;){if((te=this._targets[Ae(Ne)])&&("click"===S||"preclick"===S)&&this._draggableMoved(te)){Pt=!0;break}if(te&&te.listens(S,!0)&&(fe&&!mc(Ne,h)||(V.push(te),fe))||Ne===this._container)break;Ne=Ne.parentNode}return!V.length&&!Pt&&!fe&&this.listens(S,!0)&&(V=[this]),V},_isClickDisabled:function(h){for(;h&&h!==this._container;){if(h._leaflet_disable_click)return!0;h=h.parentNode}},_handleDOMEvent:function(h){var S=h.target||h.srcElement;if(!(!this._loaded||S._leaflet_disable_events||"click"===h.type&&this._isClickDisabled(S))){var V=h.type;"mousedown"===V&&Qn(S),this._fireDOMEvent(h,V)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(h,S,V){if("click"===h.type){var te=sn({},h);te.type="preclick",this._fireDOMEvent(te,te.type,V)}var fe=this._findEventTargets(h,S);if(V){for(var Ne=[],Pt=0;Pt<V.length;Pt++)V[Pt].listens(S,!0)&&Ne.push(V[Pt]);fe=Ne.concat(fe)}if(fe.length){"contextmenu"===S&&Fr(h);var Jt=fe[0],_i={originalEvent:h};if("keypress"!==h.type&&"keydown"!==h.type&&"keyup"!==h.type){var Zi=Jt.getLatLng&&(!Jt._radius||Jt._radius<=10);_i.containerPoint=Zi?this.latLngToContainerPoint(Jt.getLatLng()):this.mouseEventToContainerPoint(h),_i.layerPoint=this.containerPointToLayerPoint(_i.containerPoint),_i.latlng=Zi?Jt.getLatLng():this.layerPointToLatLng(_i.layerPoint)}for(Pt=0;Pt<fe.length;Pt++)if(fe[Pt].fire(S,_i,!0),_i.originalEvent._stopped||!1===fe[Pt].options.bubblingMouseEvents&&-1!==Qt(this._mouseEvents,S))return}},_draggableMoved:function(h){return(h=h.dragging&&h.dragging.enabled()?h:this).dragging&&h.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var h=0,S=this._handlers.length;h<S;h++)this._handlers[h].disable()},whenReady:function(h,S){return this._loaded?h.call(S||this,{target:this}):this.on("load",h,S),this},_getMapPanePos:function(){return kt(this._mapPane)||new fi(0,0)},_moved:function(){var h=this._getMapPanePos();return h&&!h.equals([0,0])},_getTopLeftPoint:function(h,S){return(h&&void 0!==S?this._getNewPixelOrigin(h,S):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,S){var V=this.getSize()._divideBy(2);return this.project(h,S)._subtract(V)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,S,V){var te=this._getNewPixelOrigin(V,S);return this.project(h,S)._subtract(te)},_latLngBoundsToNewLayerBounds:function(h,S,V){var te=this._getNewPixelOrigin(V,S);return ln([this.project(h.getSouthWest(),S)._subtract(te),this.project(h.getNorthWest(),S)._subtract(te),this.project(h.getSouthEast(),S)._subtract(te),this.project(h.getNorthEast(),S)._subtract(te)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())},_limitCenter:function(h,S,V){if(!V)return h;var te=this.project(h,S),fe=this.getSize().divideBy(2),Ne=new mn(te.subtract(fe),te.add(fe)),Pt=this._getBoundsOffset(Ne,V,S);return Math.abs(Pt.x)<=1&&Math.abs(Pt.y)<=1?h:this.unproject(te.add(Pt),S)},_limitOffset:function(h,S){if(!S)return h;var V=this.getPixelBounds(),te=new mn(V.min.add(h),V.max.add(h));return h.add(this._getBoundsOffset(te,S))},_getBoundsOffset:function(h,S,V){var te=ln(this.project(S.getNorthEast(),V),this.project(S.getSouthWest(),V)),fe=te.min.subtract(h.min),Ne=te.max.subtract(h.max);return new fi(this._rebound(fe.x,-Ne.x),this._rebound(fe.y,-Ne.y))},_rebound:function(h,S){return h+S>0?Math.round(h-S)/2:Math.max(0,Math.ceil(h))-Math.max(0,Math.floor(S))},_limitZoom:function(h){var S=this.getMinZoom(),V=this.getMaxZoom(),te=je.any3d?this.options.zoomSnap:1;return te&&(h=Math.round(h/te)*te),Math.max(S,Math.min(V,h))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,S){var V=this._getCenterOffset(h)._trunc();return!(!0!==(S&&S.animate)&&!this.getSize().contains(V)||(this.panBy(V,S),0))},_createAnimProxy:function(){var h=this._proxy=U("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(h),this.on("zoomanim",function(S){var V=x,te=this._proxy.style[V];$e(this._proxy,this.project(S.center,S.zoom),this.getZoomScale(S.zoom,1)),te===this._proxy.style[V]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){X(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var h=this.getCenter(),S=this.getZoom();$e(this._proxy,this.project(h,S),this.getZoomScale(S,1))},_catchTransitionEnd:function(h){this._animatingZoom&&h.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,S,V){if(this._animatingZoom)return!0;if(V=V||{},!this._zoomAnimated||!1===V.animate||this._nothingToAnimate()||Math.abs(S-this._zoom)>this.options.zoomAnimationThreshold)return!1;var te=this.getZoomScale(S),fe=this._getCenterOffset(h)._divideBy(1-1/te);return!(!0!==V.animate&&!this.getSize().contains(fe)||(Nt(function(){this._moveStart(!0,V.noMoveStart||!1)._animateZoom(h,S,!0)},this),0))},_animateZoom:function(h,S,V,te){this._mapPane&&(V&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=S,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:S,noUpdate:te}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(e(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Bs=qt.extend({options:{position:"topright"},initialize:function(h){dt(this,h)},getPosition:function(){return this.options.position},setPosition:function(h){var S=this._map;return S&&S.removeControl(this),this.options.position=h,S&&S.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var S=this._container=this.onAdd(h),V=this.getPosition(),te=h._controlCorners[V];return he(S,"leaflet-control"),-1!==V.indexOf("bottom")?te.insertBefore(S,te.firstChild):te.appendChild(S),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(X(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(h){this._map&&h&&h.screenX>0&&h.screenY>0&&this._map.getContainer().focus()}}),Ps=function(h){return new Bs(h)};lr.include({addControl:function(h){return h.addTo(this),this},removeControl:function(h){return h.remove(),this},_initControlPos:function(){var h=this._controlCorners={},S="leaflet-",V=this._controlContainer=U("div",S+"control-container",this._container);function te(fe,Ne){h[fe+Ne]=U("div",S+fe+" "+S+Ne,V)}te("top","left"),te("top","right"),te("bottom","left"),te("bottom","right")},_clearControlPos:function(){for(var h in this._controlCorners)X(this._controlCorners[h]);X(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Il=Bs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(h,S,V,te){return V<te?-1:te<V?1:0}},initialize:function(h,S,V){for(var te in dt(this,V),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,h)this._addLayer(h[te],te);for(te in S)this._addLayer(S[te],te,!0)},onAdd:function(h){this._initLayout(),this._update(),this._map=h,h.on("zoomend",this._checkDisabledLayers,this);for(var S=0;S<this._layers.length;S++)this._layers[S].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(h){return Bs.prototype.addTo.call(this,h),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(h,S){return this._addLayer(h,S),this._map?this._update():this},addOverlay:function(h,S){return this._addLayer(h,S,!0),this._map?this._update():this},removeLayer:function(h){h.off("add remove",this._onLayerChange,this);var S=this._getLayer(Ae(h));return S&&this._layers.splice(this._layers.indexOf(S),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var h=this._map.getSize().y-(this._container.offsetTop+50);return h<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=h+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",S=this._container=U("div",h),V=this.options.collapsed;S.setAttribute("aria-haspopup",!0),go(S),Dl(S);var te=this._section=U("section",h+"-list");V&&(this._map.on("click",this.collapse,this),Un(S,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var fe=this._layersLink=U("a",h+"-toggle",S);fe.href="#",fe.title="Layers",fe.setAttribute("role","button"),Un(fe,{keydown:function(Ne){13===Ne.keyCode&&this._expandSafely()},click:function(Ne){Fr(Ne),this._expandSafely()}},this),V||this.expand(),this._baseLayersList=U("div",h+"-base",te),this._separator=U("div",h+"-separator",te),this._overlaysList=U("div",h+"-overlays",te),S.appendChild(te)},_getLayer:function(h){for(var S=0;S<this._layers.length;S++)if(this._layers[S]&&Ae(this._layers[S].layer)===h)return this._layers[S]},_addLayer:function(h,S,V){this._map&&h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:S,overlay:V}),this.options.sortLayers&&this._layers.sort(e(function(te,fe){return this.options.sortFunction(te.layer,fe.layer,te.name,fe.name)},this)),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ee(this._baseLayersList),ee(this._overlaysList),this._layerControlInputs=[];var h,S,V,te,fe=0;for(V=0;V<this._layers.length;V++)this._addItem(te=this._layers[V]),S=S||te.overlay,h=h||!te.overlay,fe+=te.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(h=h&&fe>1)?"":"none"),this._separator.style.display=S&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var S=this._getLayer(Ae(h.target)),V=S.overlay?"add"===h.type?"overlayadd":"overlayremove":"add"===h.type?"baselayerchange":null;V&&this._map.fire(V,S)},_createRadioElement:function(h,S){var V='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"'+(S?' checked="checked"':"")+"/>",te=document.createElement("div");return te.innerHTML=V,te.firstChild},_addItem:function(h){var te,S=document.createElement("label"),V=this._map.hasLayer(h.layer);h.overlay?((te=document.createElement("input")).type="checkbox",te.className="leaflet-control-layers-selector",te.defaultChecked=V):te=this._createRadioElement("leaflet-base-layers_"+Ae(this),V),this._layerControlInputs.push(te),te.layerId=Ae(h.layer),Un(te,"click",this._onInputClick,this);var fe=document.createElement("span");fe.innerHTML=" "+h.name;var Ne=document.createElement("span");return S.appendChild(Ne),Ne.appendChild(te),Ne.appendChild(fe),(h.overlay?this._overlaysList:this._baseLayersList).appendChild(S),this._checkDisabledLayers(),S},_onInputClick:function(){if(!this._preventClick){var S,V,h=this._layerControlInputs,te=[],fe=[];this._handlingClick=!0;for(var Ne=h.length-1;Ne>=0;Ne--)V=this._getLayer((S=h[Ne]).layerId).layer,S.checked?te.push(V):S.checked||fe.push(V);for(Ne=0;Ne<fe.length;Ne++)this._map.hasLayer(fe[Ne])&&this._map.removeLayer(fe[Ne]);for(Ne=0;Ne<te.length;Ne++)this._map.hasLayer(te[Ne])||this._map.addLayer(te[Ne]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var S,V,h=this._layerControlInputs,te=this._map.getZoom(),fe=h.length-1;fe>=0;fe--)V=this._getLayer((S=h[fe]).layerId).layer,S.disabled=void 0!==V.options.minZoom&&te<V.options.minZoom||void 0!==V.options.maxZoom&&te>V.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var h=this._section;this._preventClick=!0,Un(h,"click",Fr),this.expand();var S=this;setTimeout(function(){Yn(h,"click",Fr),S._preventClick=!1})}}),Ka=Bs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(h){var S="leaflet-control-zoom",V=U("div",S+" leaflet-bar"),te=this.options;return this._zoomInButton=this._createButton(te.zoomInText,te.zoomInTitle,S+"-in",V,this._zoomIn),this._zoomOutButton=this._createButton(te.zoomOutText,te.zoomOutTitle,S+"-out",V,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),V},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(h){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(h.shiftKey?3:1))},_zoomOut:function(h){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(h.shiftKey?3:1))},_createButton:function(h,S,V,te,fe){var Ne=U("a",V,te);return Ne.innerHTML=h,Ne.href="#",Ne.title=S,Ne.setAttribute("role","button"),Ne.setAttribute("aria-label",S),go(Ne),Un(Ne,"click",eo),Un(Ne,"click",fe,this),Un(Ne,"click",this._refocusOnMap,this),Ne},_updateDisabled:function(){var h=this._map,S="leaflet-disabled";be(this._zoomInButton,S),be(this._zoomOutButton,S),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||h._zoom===h.getMinZoom())&&(he(this._zoomOutButton,S),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||h._zoom===h.getMaxZoom())&&(he(this._zoomInButton,S),this._zoomInButton.setAttribute("aria-disabled","true"))}});lr.mergeOptions({zoomControl:!0}),lr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ka,this.addControl(this.zoomControl))});var Aa=Bs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var S="leaflet-control-scale",V=U("div",S),te=this.options;return this._addScales(te,S+"-line",V),h.on(te.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),V},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,S,V){h.metric&&(this._mScale=U("div",S,V)),h.imperial&&(this._iScale=U("div",S,V))},_update:function(){var h=this._map,S=h.getSize().y/2,V=h.distance(h.containerPointToLatLng([0,S]),h.containerPointToLatLng([this.options.maxWidth,S]));this._updateScales(V)},_updateScales:function(h){this.options.metric&&h&&this._updateMetric(h),this.options.imperial&&h&&this._updateImperial(h)},_updateMetric:function(h){var S=this._getRoundNum(h);this._updateScale(this._mScale,S<1e3?S+" m":S/1e3+" km",S/h)},_updateImperial:function(h){var V,te,fe,S=3.2808399*h;S>5280?(te=this._getRoundNum(V=S/5280),this._updateScale(this._iScale,te+" mi",te/V)):(fe=this._getRoundNum(S),this._updateScale(this._iScale,fe+" ft",fe/S))},_updateScale:function(h,S,V){h.style.width=Math.round(this.options.maxWidth*V)+"px",h.innerHTML=S},_getRoundNum:function(h){var S=Math.pow(10,(Math.floor(h)+"").length-1),V=h/S;return S*(V>=10?10:V>=5?5:V>=3?3:V>=2?2:1)}}),Bo=Bs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(je.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(h){dt(this,h),this._attributions={}},onAdd:function(h){for(var S in h.attributionControl=this,this._container=U("div","leaflet-control-attribution"),go(this._container),h._layers)h._layers[S].getAttribution&&this.addAttribution(h._layers[S].getAttribution());return this._update(),h.on("layeradd",this._addAttribution,this),this._container},onRemove:function(h){h.off("layeradd",this._addAttribution,this)},_addAttribution:function(h){h.layer.getAttribution&&(this.addAttribution(h.layer.getAttribution()),h.layer.once("remove",function(){this.removeAttribution(h.layer.getAttribution())},this))},setPrefix:function(h){return this.options.prefix=h,this._update(),this},addAttribution:function(h){return h?(this._attributions[h]||(this._attributions[h]=0),this._attributions[h]++,this._update(),this):this},removeAttribution:function(h){return h?(this._attributions[h]&&(this._attributions[h]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var S in this._attributions)this._attributions[S]&&h.push(S);var V=[];this.options.prefix&&V.push(this.options.prefix),h.length&&V.push(h.join(", ")),this._container.innerHTML=V.join(' <span aria-hidden="true">|</span> ')}}});lr.mergeOptions({attributionControl:!0}),lr.addInitHook(function(){this.options.attributionControl&&(new Bo).addTo(this)});Bs.Layers=Il,Bs.Zoom=Ka,Bs.Scale=Aa,Bs.Attribution=Bo,Ps.layers=function(h,S,V){return new Il(h,S,V)},Ps.zoom=function(h){return new Ka(h)},Ps.scale=function(h){return new Aa(h)},Ps.attribution=function(h){return new Bo(h)};var lo=qt.extend({initialize:function(h){this._map=h},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});lo.addTo=function(h,S){return h.addHandler(S,this),this};var Mr={Events:Li},au=je.touch?"touchstart mousedown":"mousedown",va=ai.extend({options:{clickTolerance:3},initialize:function(h,S,V,te){dt(this,te),this._element=h,this._dragStartTarget=S||h,this._preventOutline=V},enable:function(){this._enabled||(Un(this._dragStartTarget,au,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(va._dragging===this&&this.finishDrag(!0),Yn(this._dragStartTarget,au,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(h){if(this._enabled&&(this._moved=!1,!ve(this._element,"leaflet-zoom-anim"))){if(h.touches&&1!==h.touches.length)return void(va._dragging===this&&this.finishDrag());if(!(va._dragging||h.shiftKey||1!==h.which&&1!==h.button&&!h.touches||(va._dragging=this,this._preventOutline&&Qn(this._element),gn(),Wt(),this._moving))){this.fire("down");var S=h.touches?h.touches[0]:h,V=Pr(this._element);this._startPoint=new fi(S.clientX,S.clientY),this._startPos=kt(this._element),this._parentScale=Rr(V);var te="mousedown"===h.type;Un(document,te?"mousemove":"touchmove",this._onMove,this),Un(document,te?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(h){if(this._enabled){if(h.touches&&h.touches.length>1)return void(this._moved=!0);var S=h.touches&&1===h.touches.length?h.touches[0]:h,V=new fi(S.clientX,S.clientY)._subtract(this._startPoint);!V.x&&!V.y||Math.abs(V.x)+Math.abs(V.y)<this.options.clickTolerance||(V.x/=this._parentScale.x,V.y/=this._parentScale.y,Fr(h),this._moved||(this.fire("dragstart"),this._moved=!0,he(document.body,"leaflet-dragging"),this._lastTarget=h.target||h.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(V),this._moving=!0,this._lastEvent=h,this._updatePosition())}},_updatePosition:function(){var h={originalEvent:this._lastEvent};this.fire("predrag",h),wt(this._element,this._newPos),this.fire("drag",h)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(h){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yn(document,"mousemove touchmove",this._onMove,this),Yn(document,"mouseup touchend touchcancel",this._onUp,this),An(),hi();var S=this._moved&&this._moving;this._moving=!1,va._dragging=!1,S&&this.fire("dragend",{noInertia:h,distance:this._newPos.distanceTo(this._startPos)})}});function ql(h,S,V){var te,Ne,Pt,Jt,_i,Zi,kn,Ln,cr,fe=[1,4,2,8];for(Ne=0,kn=h.length;Ne<kn;Ne++)h[Ne]._code=Xr(h[Ne],S);for(Jt=0;Jt<4;Jt++){for(Ln=fe[Jt],te=[],Ne=0,Pt=(kn=h.length)-1;Ne<kn;Pt=Ne++)Zi=h[Pt],(_i=h[Ne])._code&Ln?Zi._code&Ln||((cr=Fn(Zi,_i,Ln,S,V))._code=Xr(cr,S),te.push(cr)):(Zi._code&Ln&&((cr=Fn(Zi,_i,Ln,S,V))._code=Xr(cr,S),te.push(cr)),te.push(_i));h=te}return h}function Ll(h,S){var V,te,fe,Ne,Pt,Jt,_i,Zi;if(!h||0===h.length)throw new Error("latlngs not passed");Ds(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var Ln=qi([0,0]),cr=jt(h);cr.getNorthWest().distanceTo(cr.getSouthWest())*cr.getNorthEast().distanceTo(cr.getNorthWest())<1700&&(Ln=Qr(h));var Ms=h.length,Zs=[];for(V=0;V<Ms;V++){var bs=qi(h[V]);Zs.push(S.project(qi([bs.lat-Ln.lat,bs.lng-Ln.lng])))}for(Jt=_i=Zi=0,V=0,te=Ms-1;V<Ms;te=V++)_i+=((fe=Zs[V]).x+(Ne=Zs[te]).x)*(Pt=fe.y*Ne.x-Ne.y*fe.x),Zi+=(fe.y+Ne.y)*Pt,Jt+=3*Pt;var ua=S.unproject(Yi(0===Jt?Zs[0]:[_i/Jt,Zi/Jt]));return qi([ua.lat+Ln.lat,ua.lng+Ln.lng])}function Qr(h){for(var S=0,V=0,te=0,fe=0;fe<h.length;fe++){var Ne=qi(h[fe]);S+=Ne.lat,V+=Ne.lng,te++}return qi([S/te,V/te])}var Or,Ts={__proto__:null,clipPolygon:ql,polygonCenter:Ll,centroid:Qr};function _o(h,S){if(!S||!h.length)return h.slice();var V=S*S;return function No(h,S){var V=h.length,fe=new(typeof Uint8Array<"u"?Uint8Array:Array)(V);fe[0]=fe[V-1]=1,vo(h,fe,S,0,V-1);var Ne,Pt=[];for(Ne=0;Ne<V;Ne++)fe[Ne]&&Pt.push(h[Ne]);return Pt}(h=function ya(h,S){for(var V=[h[0]],te=1,fe=0,Ne=h.length;te<Ne;te++)Kl(h[te],h[fe])>S&&(V.push(h[te]),fe=te);return fe<Ne-1&&V.push(h[Ne-1]),V}(h,V),V)}function co(h,S,V){return Math.sqrt(La(h,S,V,!0))}function vo(h,S,V,te,fe){var Pt,Jt,_i,Ne=0;for(Jt=te+1;Jt<=fe-1;Jt++)(_i=La(h[Jt],h[te],h[fe],!0))>Ne&&(Pt=Jt,Ne=_i);Ne>V&&(S[Pt]=1,vo(h,S,V,te,Pt),vo(h,S,V,Pt,fe))}function oa(h,S,V,te,fe){var Jt,_i,Zi,Ne=te?Or:Xr(h,V),Pt=Xr(S,V);for(Or=Pt;;){if(!(Ne|Pt))return[h,S];if(Ne&Pt)return!1;Zi=Xr(_i=Fn(h,S,Jt=Ne||Pt,V,fe),V),Jt===Ne?(h=_i,Ne=Zi):(S=_i,Pt=Zi)}}function Fn(h,S,V,te,fe){var Zi,kn,Ne=S.x-h.x,Pt=S.y-h.y,Jt=te.min,_i=te.max;return 8&V?(Zi=h.x+Ne*(_i.y-h.y)/Pt,kn=_i.y):4&V?(Zi=h.x+Ne*(Jt.y-h.y)/Pt,kn=Jt.y):2&V?(Zi=_i.x,kn=h.y+Pt*(_i.x-h.x)/Ne):1&V&&(Zi=Jt.x,kn=h.y+Pt*(Jt.x-h.x)/Ne),new fi(Zi,kn,fe)}function Xr(h,S){var V=0;return h.x<S.min.x?V|=1:h.x>S.max.x&&(V|=2),h.y<S.min.y?V|=4:h.y>S.max.y&&(V|=8),V}function Kl(h,S){var V=S.x-h.x,te=S.y-h.y;return V*V+te*te}function La(h,S,V,te){var Zi,fe=S.x,Ne=S.y,Pt=V.x-fe,Jt=V.y-Ne,_i=Pt*Pt+Jt*Jt;return _i>0&&((Zi=((h.x-fe)*Pt+(h.y-Ne)*Jt)/_i)>1?(fe=V.x,Ne=V.y):Zi>0&&(fe+=Pt*Zi,Ne+=Jt*Zi)),Pt=h.x-fe,Jt=h.y-Ne,te?Pt*Pt+Jt*Jt:new fi(fe,Ne)}function Ds(h){return!yt(h[0])||"object"!=typeof h[0][0]&&typeof h[0][0]<"u"}function Cr(h){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ds(h)}function Pa(h,S){var V,te,fe,Ne,Pt,Jt,_i,Zi;if(!h||0===h.length)throw new Error("latlngs not passed");Ds(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var kn=qi([0,0]),Ln=jt(h);Ln.getNorthWest().distanceTo(Ln.getSouthWest())*Ln.getNorthEast().distanceTo(Ln.getNorthWest())<1700&&(kn=Qr(h));var Ir=h.length,Ms=[];for(V=0;V<Ir;V++){var Zs=qi(h[V]);Ms.push(S.project(qi([Zs.lat-kn.lat,Zs.lng-kn.lng])))}for(V=0,te=0;V<Ir-1;V++)te+=Ms[V].distanceTo(Ms[V+1])/2;if(0===te)Zi=Ms[0];else for(V=0,Ne=0;V<Ir-1;V++)if((Ne+=fe=(Pt=Ms[V]).distanceTo(Jt=Ms[V+1]))>te){Zi=[Jt.x-(_i=(Ne-te)/fe)*(Jt.x-Pt.x),Jt.y-_i*(Jt.y-Pt.y)];break}var bs=S.unproject(Yi(Zi));return qi([bs.lat+kn.lat,bs.lng+kn.lng])}var xa={__proto__:null,simplify:_o,pointToSegmentDistance:co,closestPointOnSegment:function dn(h,S,V){return La(h,S,V)},clipSegment:oa,_getEdgeIntersection:Fn,_getBitCode:Xr,_sqClosestPointOnSegment:La,isFlat:Ds,_flat:Cr,polylineCenter:Pa},ba={project:function(h){return new fi(h.lng,h.lat)},unproject:function(h){return new Di(h.y,h.x)},bounds:new mn([-180,-90],[180,90])},Mo={R:6378137,R_MINOR:6356752.314245179,bounds:new mn([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(h){var S=Math.PI/180,V=this.R,te=h.lat*S,fe=this.R_MINOR/V,Ne=Math.sqrt(1-fe*fe),Pt=Ne*Math.sin(te),Jt=Math.tan(Math.PI/4-te/2)/Math.pow((1-Pt)/(1+Pt),Ne/2);return te=-V*Math.log(Math.max(Jt,1e-10)),new fi(h.lng*S*V,te)},unproject:function(h){for(var Zi,S=180/Math.PI,V=this.R,te=this.R_MINOR/V,fe=Math.sqrt(1-te*te),Ne=Math.exp(-h.y/V),Pt=Math.PI/2-2*Math.atan(Ne),Jt=0,_i=.1;Jt<15&&Math.abs(_i)>1e-7;Jt++)Zi=fe*Math.sin(Pt),Zi=Math.pow((1-Zi)/(1+Zi),fe/2),Pt+=_i=Math.PI/2-2*Math.atan(Ne*Zi)-Pt;return new Di(Pt*S,h.x*S/V)}},Yo={__proto__:null,LonLat:ba,Mercator:Mo,SphericalMercator:Pi},Us=sn({},Rn,{code:"EPSG:3395",projection:Mo,transformation:function(){var h=.5/(Math.PI*Mo.R);return tr(h,.5,-h,.5)}()}),Vo=sn({},Rn,{code:"EPSG:4326",projection:ba,transformation:tr(1/180,1,-1/180,.5)}),Pl=sn({},Hn,{projection:ba,transformation:tr(1,0,-1,0),scale:function(h){return Math.pow(2,h)},zoom:function(h){return Math.log(h)/Math.LN2},distance:function(h,S){var V=S.lng-h.lng,te=S.lat-h.lat;return Math.sqrt(V*V+te*te)},infinite:!0});Hn.Earth=Rn,Hn.EPSG3395=Us,Hn.EPSG3857=qn,Hn.EPSG900913=hn,Hn.EPSG4326=Vo,Hn.Simple=Pl;var yo=ai.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(h){return h.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(h){return h&&h.removeLayer(this),this},getPane:function(h){return this._map.getPane(h?this.options[h]||h:this.options.pane)},addInteractiveTarget:function(h){return this._map._targets[Ae(h)]=this,this},removeInteractiveTarget:function(h){return delete this._map._targets[Ae(h)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(h){var S=h.target;if(S.hasLayer(this)){if(this._map=S,this._zoomAnimated=S._zoomAnimated,this.getEvents){var V=this.getEvents();S.on(V,this),this.once("remove",function(){S.off(V,this)},this)}this.onAdd(S),this.fire("add"),S.fire("layeradd",{layer:this})}}});lr.include({addLayer:function(h){if(!h._layerAdd)throw new Error("The provided object is not a Layer.");var S=Ae(h);return this._layers[S]||(this._layers[S]=h,h._mapToAdd=this,h.beforeAdd&&h.beforeAdd(this),this.whenReady(h._layerAdd,h)),this},removeLayer:function(h){var S=Ae(h);return this._layers[S]?(this._loaded&&h.onRemove(this),delete this._layers[S],this._loaded&&(this.fire("layerremove",{layer:h}),h.fire("remove")),h._map=h._mapToAdd=null,this):this},hasLayer:function(h){return Ae(h)in this._layers},eachLayer:function(h,S){for(var V in this._layers)h.call(S,this._layers[V]);return this},_addLayers:function(h){for(var S=0,V=(h=h?yt(h)?h:[h]:[]).length;S<V;S++)this.addLayer(h[S])},_addZoomLimit:function(h){(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))&&(this._zoomBoundLayers[Ae(h)]=h,this._updateZoomLevels())},_removeZoomLimit:function(h){var S=Ae(h);this._zoomBoundLayers[S]&&(delete this._zoomBoundLayers[S],this._updateZoomLevels())},_updateZoomLevels:function(){var h=1/0,S=-1/0,V=this._getZoomSpan();for(var te in this._zoomBoundLayers){var fe=this._zoomBoundLayers[te].options;h=void 0===fe.minZoom?h:Math.min(h,fe.minZoom),S=void 0===fe.maxZoom?S:Math.max(S,fe.maxZoom)}this._layersMaxZoom=S===-1/0?void 0:S,this._layersMinZoom=h===1/0?void 0:h,V!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var aa=yo.extend({initialize:function(h,S){var V,te;if(dt(this,S),this._layers={},h)for(V=0,te=h.length;V<te;V++)this.addLayer(h[V])},addLayer:function(h){var S=this.getLayerId(h);return this._layers[S]=h,this._map&&this._map.addLayer(h),this},removeLayer:function(h){var S=h in this._layers?h:this.getLayerId(h);return this._map&&this._layers[S]&&this._map.removeLayer(this._layers[S]),delete this._layers[S],this},hasLayer:function(h){return("number"==typeof h?h:this.getLayerId(h))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(h){var V,te,S=Array.prototype.slice.call(arguments,1);for(V in this._layers)(te=this._layers[V])[h]&&te[h].apply(te,S);return this},onAdd:function(h){this.eachLayer(h.addLayer,h)},onRemove:function(h){this.eachLayer(h.removeLayer,h)},eachLayer:function(h,S){for(var V in this._layers)h.call(S,this._layers[V]);return this},getLayer:function(h){return this._layers[h]},getLayers:function(){var h=[];return this.eachLayer(h.push,h),h},setZIndex:function(h){return this.invoke("setZIndex",h)},getLayerId:function(h){return Ae(h)}}),Ns=aa.extend({addLayer:function(h){return this.hasLayer(h)?this:(h.addEventParent(this),aa.prototype.addLayer.call(this,h),this.fire("layeradd",{layer:h}))},removeLayer:function(h){return this.hasLayer(h)?(h in this._layers&&(h=this._layers[h]),h.removeEventParent(this),aa.prototype.removeLayer.call(this,h),this.fire("layerremove",{layer:h})):this},setStyle:function(h){return this.invoke("setStyle",h)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new zn;for(var S in this._layers){var V=this._layers[S];h.extend(V.getBounds?V.getBounds():V.getLatLng())}return h}}),Os=qt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(h){dt(this,h)},createIcon:function(h){return this._createIcon("icon",h)},createShadow:function(h){return this._createIcon("shadow",h)},_createIcon:function(h,S){var V=this._getIconUrl(h);if(!V){if("icon"===h)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var te=this._createImg(V,S&&"IMG"===S.tagName?S:null);return this._setIconStyles(te,h),(this.options.crossOrigin||""===this.options.crossOrigin)&&(te.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),te},_setIconStyles:function(h,S){var V=this.options,te=V[S+"Size"];"number"==typeof te&&(te=[te,te]);var fe=Yi(te),Ne=Yi("shadow"===S&&V.shadowAnchor||V.iconAnchor||fe&&fe.divideBy(2,!0));h.className="leaflet-marker-"+S+" "+(V.className||""),Ne&&(h.style.marginLeft=-Ne.x+"px",h.style.marginTop=-Ne.y+"px"),fe&&(h.style.width=fe.x+"px",h.style.height=fe.y+"px")},_createImg:function(h,S){return(S=S||document.createElement("img")).src=h,S},_getIconUrl:function(h){return je.retina&&this.options[h+"RetinaUrl"]||this.options[h+"Url"]}});var wa=Os.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(h){return"string"!=typeof wa.imagePath&&(wa.imagePath=this._detectIconPath()),(this.options.imagePath||wa.imagePath)+Os.prototype._getIconUrl.call(this,h)},_stripUrl:function(h){var S=function(V,te,fe){var Ne=te.exec(V);return Ne&&Ne[fe]};return(h=S(h,/^url\((['"])?(.+)\1\)$/,2))&&S(h,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var h=U("div","leaflet-default-icon-path",document.body),S=j(h,"background-image")||j(h,"backgroundImage");if(document.body.removeChild(h),S=this._stripUrl(S))return S;var V=document.querySelector('link[href$="leaflet.css"]');return V?V.href.substring(0,V.href.length-11-1):""}}),Do=lo.extend({initialize:function(h){this._marker=h},addHooks:function(){var h=this._marker._icon;this._draggable||(this._draggable=new va(h,h,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(h,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(h){var S=this._marker,V=S._map,te=this._marker.options.autoPanSpeed,fe=this._marker.options.autoPanPadding,Ne=kt(S._icon),Pt=V.getPixelBounds(),Jt=V.getPixelOrigin(),_i=ln(Pt.min._subtract(Jt).add(fe),Pt.max._subtract(Jt).subtract(fe));if(!_i.contains(Ne)){var Zi=Yi((Math.max(_i.max.x,Ne.x)-_i.max.x)/(Pt.max.x-_i.max.x)-(Math.min(_i.min.x,Ne.x)-_i.min.x)/(Pt.min.x-_i.min.x),(Math.max(_i.max.y,Ne.y)-_i.max.y)/(Pt.max.y-_i.max.y)-(Math.min(_i.min.y,Ne.y)-_i.min.y)/(Pt.min.y-_i.min.y)).multiplyBy(te);V.panBy(Zi,{animate:!1}),this._draggable._newPos._add(Zi),this._draggable._startPos._add(Zi),wt(S._icon,this._draggable._newPos),this._onDrag(h),this._panRequest=Nt(this._adjustPan.bind(this,h))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(h){this._marker.options.autoPan&&(ct(this._panRequest),this._panRequest=Nt(this._adjustPan.bind(this,h)))},_onDrag:function(h){var S=this._marker,V=S._shadow,te=kt(S._icon),fe=S._map.layerPointToLatLng(te);V&&wt(V,te),S._latlng=fe,h.latlng=fe,h.oldLatLng=this._oldLatLng,S.fire("move",h).fire("drag",h)},_onDragEnd:function(h){ct(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",h)}}),ca=yo.extend({options:{icon:new wa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(h,S){dt(this,S),this._latlng=qi(h)},onAdd:function(h){this._zoomAnimated=this._zoomAnimated&&h.options.markerZoomAnimation,this._zoomAnimated&&h.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(h){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&h.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(h){var S=this._latlng;return this._latlng=qi(h),this.update(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},setZIndexOffset:function(h){return this.options.zIndexOffset=h,this.update()},getIcon:function(){return this.options.icon},setIcon:function(h){return this.options.icon=h,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var h=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(h)}return this},_initIcon:function(){var h=this.options,S="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),V=h.icon.createIcon(this._icon),te=!1;V!==this._icon&&(this._icon&&this._removeIcon(),te=!0,h.title&&(V.title=h.title),"IMG"===V.tagName&&(V.alt=h.alt||"")),he(V,S),h.keyboard&&(V.tabIndex="0",V.setAttribute("role","button")),this._icon=V,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Un(V,"focus",this._panOnFocus,this);var fe=h.icon.createShadow(this._shadow),Ne=!1;fe!==this._shadow&&(this._removeShadow(),Ne=!0),fe&&(he(fe,S),fe.alt=""),this._shadow=fe,h.opacity<1&&this._updateOpacity(),te&&this.getPane().appendChild(this._icon),this._initInteraction(),fe&&Ne&&this.getPane(h.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Yn(this._icon,"focus",this._panOnFocus,this),X(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&X(this._shadow),this._shadow=null},_setPos:function(h){this._icon&&wt(this._icon,h),this._shadow&&wt(this._shadow,h),this._zIndex=h.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(h){this._icon&&(this._icon.style.zIndex=this._zIndex+h)},_animateZoom:function(h){var S=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center).round();this._setPos(S)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Do)){var h=this.options.draggable;this.dragging&&(h=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Do(this),h&&this.dragging.enable()}},setOpacity:function(h){return this.options.opacity=h,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var h=this.options.opacity;this._icon&&ce(this._icon,h),this._shadow&&ce(this._shadow,h)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var h=this._map;if(h){var S=this.options.icon.options,V=S.iconSize?Yi(S.iconSize):Yi(0,0),te=S.iconAnchor?Yi(S.iconAnchor):Yi(0,0);h.panInside(this._latlng,{paddingTopLeft:te,paddingBottomRight:V.subtract(te)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var $s=yo.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(h){this._renderer=h.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(h){return dt(this,h),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&h&&Object.prototype.hasOwnProperty.call(h,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ca=$s.extend({options:{fill:!0,radius:10},initialize:function(h,S){dt(this,S),this._latlng=qi(h),this._radius=this.options.radius},setLatLng:function(h){var S=this._latlng;return this._latlng=qi(h),this.redraw(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(h){return this.options.radius=this._radius=h,this.redraw()},getRadius:function(){return this._radius},setStyle:function(h){var S=h&&h.radius||this._radius;return $s.prototype.setStyle.call(this,h),this.setRadius(S),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,S=this._radiusY||h,V=this._clickTolerance(),te=[h+V,S+V];this._pxBounds=new mn(this._point.subtract(te),this._point.add(te))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(h){return h.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ja=Ca.extend({initialize:function(h,S,V){if("number"==typeof S&&(S=sn({},V,{radius:S})),dt(this,S),this._latlng=qi(h),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(h){return this._mRadius=h,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var h=[this._radius,this._radiusY||this._radius];return new zn(this._map.layerPointToLatLng(this._point.subtract(h)),this._map.layerPointToLatLng(this._point.add(h)))},setStyle:$s.prototype.setStyle,_project:function(){var h=this._latlng.lng,S=this._latlng.lat,V=this._map,te=V.options.crs;if(te.distance===Rn.distance){var fe=Math.PI/180,Ne=this._mRadius/Rn.R/fe,Pt=V.project([S+Ne,h]),Jt=V.project([S-Ne,h]),_i=Pt.add(Jt).divideBy(2),Zi=V.unproject(_i).lat,kn=Math.acos((Math.cos(Ne*fe)-Math.sin(S*fe)*Math.sin(Zi*fe))/(Math.cos(S*fe)*Math.cos(Zi*fe)))/fe;(isNaN(kn)||0===kn)&&(kn=Ne/Math.cos(Math.PI/180*S)),this._point=_i.subtract(V.getPixelOrigin()),this._radius=isNaN(kn)?0:_i.x-V.project([Zi,h-kn]).x,this._radiusY=_i.y-Pt.y}else{var Ln=te.unproject(te.project(this._latlng).subtract([this._mRadius,0]));this._point=V.latLngToLayerPoint(this._latlng),this._radius=this._point.x-V.latLngToLayerPoint(Ln).x}this._updateBounds()}});var uo=$s.extend({options:{smoothFactor:1,noClip:!1},initialize:function(h,S){dt(this,S),this._setLatLngs(h)},getLatLngs:function(){return this._latlngs},setLatLngs:function(h){return this._setLatLngs(h),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var fe,Ne,S=1/0,V=null,te=La,Pt=0,Jt=this._parts.length;Pt<Jt;Pt++)for(var _i=this._parts[Pt],Zi=1,kn=_i.length;Zi<kn;Zi++){var Ln=te(h,fe=_i[Zi-1],Ne=_i[Zi],!0);Ln<S&&(S=Ln,V=te(h,fe,Ne))}return V&&(V.distance=Math.sqrt(S)),V},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(h,S){return S=S||this._defaultShape(),h=qi(h),S.push(h),this._bounds.extend(h),this.redraw()},_setLatLngs:function(h){this._bounds=new zn,this._latlngs=this._convertLatLngs(h)},_defaultShape:function(){return Ds(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var S=[],V=Ds(h),te=0,fe=h.length;te<fe;te++)V?(S[te]=qi(h[te]),this._bounds.extend(S[te])):S[te]=this._convertLatLngs(h[te]);return S},_project:function(){var h=new mn;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h),this._bounds.isValid()&&h.isValid()&&(this._rawPxBounds=h,this._updateBounds())},_updateBounds:function(){var h=this._clickTolerance(),S=new fi(h,h);this._rawPxBounds&&(this._pxBounds=new mn([this._rawPxBounds.min.subtract(S),this._rawPxBounds.max.add(S)]))},_projectLatlngs:function(h,S,V){var Ne,Pt,fe=h.length;if(h[0]instanceof Di){for(Pt=[],Ne=0;Ne<fe;Ne++)Pt[Ne]=this._map.latLngToLayerPoint(h[Ne]),V.extend(Pt[Ne]);S.push(Pt)}else for(Ne=0;Ne<fe;Ne++)this._projectLatlngs(h[Ne],S,V)},_clipPoints:function(){var h=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(h)){if(this.options.noClip)return void(this._parts=this._rings);var V,te,fe,Ne,Pt,Jt,_i,S=this._parts;for(V=0,fe=0,Ne=this._rings.length;V<Ne;V++)for(te=0,Pt=(_i=this._rings[V]).length;te<Pt-1;te++)(Jt=oa(_i[te],_i[te+1],h,te,!0))&&(S[fe]=S[fe]||[],S[fe].push(Jt[0]),(Jt[1]!==_i[te+1]||te===Pt-2)&&(S[fe].push(Jt[1]),fe++))}},_simplifyPoints:function(){for(var h=this._parts,S=this.options.smoothFactor,V=0,te=h.length;V<te;V++)h[V]=_o(h[V],S)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(h,S){var V,te,fe,Ne,Pt,Jt,_i=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(V=0,Ne=this._parts.length;V<Ne;V++)for(te=0,fe=(Pt=(Jt=this._parts[V]).length)-1;te<Pt;fe=te++)if((S||0!==te)&&co(h,Jt[fe],Jt[te])<=_i)return!0;return!1}});uo._flat=Cr;var ho=uo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ll(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(h){var S=uo.prototype._convertLatLngs.call(this,h),V=S.length;return V>=2&&S[0]instanceof Di&&S[0].equals(S[V-1])&&S.pop(),S},_setLatLngs:function(h){uo.prototype._setLatLngs.call(this,h),Ds(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ds(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,S=this.options.weight,V=new fi(S,S);if(h=new mn(h.min.subtract(V),h.max.add(V)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(h)){if(this.options.noClip)return void(this._parts=this._rings);for(var Ne,te=0,fe=this._rings.length;te<fe;te++)(Ne=ql(this._rings[te],h,!0)).length&&this._parts.push(Ne)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(h){var V,te,fe,Ne,Pt,Jt,_i,Zi,S=!1;if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(Ne=0,_i=this._parts.length;Ne<_i;Ne++)for(Pt=0,Jt=(Zi=(V=this._parts[Ne]).length)-1;Pt<Zi;Jt=Pt++)(te=V[Pt]).y>h.y!=(fe=V[Jt]).y>h.y&&h.x<(fe.x-te.x)*(h.y-te.y)/(fe.y-te.y)+te.x&&(S=!S);return S||uo.prototype._containsPoint.call(this,h,!0)}});var Ho=Ns.extend({initialize:function(h,S){dt(this,S),this._layers={},h&&this.addData(h)},addData:function(h){var V,te,fe,S=yt(h)?h:h.features;if(S){for(V=0,te=S.length;V<te;V++)((fe=S[V]).geometries||fe.geometry||fe.features||fe.coordinates)&&this.addData(fe);return this}var Ne=this.options;if(Ne.filter&&!Ne.filter(h))return this;var Pt=Qa(h,Ne);return Pt?(Pt.feature=Oa(h),Pt.defaultOptions=Pt.options,this.resetStyle(Pt),Ne.onEachFeature&&Ne.onEachFeature(h,Pt),this.addLayer(Pt)):this},resetStyle:function(h){return void 0===h?this.eachLayer(this.resetStyle,this):(h.options=sn({},h.defaultOptions),this._setLayerStyle(h,this.options.style),this)},setStyle:function(h){return this.eachLayer(function(S){this._setLayerStyle(S,h)},this)},_setLayerStyle:function(h,S){h.setStyle&&("function"==typeof S&&(S=S(h.feature)),h.setStyle(S))}});function Qa(h,S){var Jt,_i,Zi,kn,V="Feature"===h.type?h.geometry:h,te=V?V.coordinates:null,fe=[],Ne=S&&S.pointToLayer,Pt=S&&S.coordsToLatLng||gl;if(!te&&!V)return null;switch(V.type){case"Point":return Ta(Ne,h,Jt=Pt(te),S);case"MultiPoint":for(Zi=0,kn=te.length;Zi<kn;Zi++)Jt=Pt(te[Zi]),fe.push(Ta(Ne,h,Jt,S));return new Ns(fe);case"LineString":case"MultiLineString":return _i=Is(te,"LineString"===V.type?0:1,Pt),new uo(_i,S);case"Polygon":case"MultiPolygon":return _i=Is(te,"Polygon"===V.type?1:2,Pt),new ho(_i,S);case"GeometryCollection":for(Zi=0,kn=V.geometries.length;Zi<kn;Zi++){var Ln=Qa({geometry:V.geometries[Zi],type:"Feature",properties:h.properties},S);Ln&&fe.push(Ln)}return new Ns(fe);case"FeatureCollection":for(Zi=0,kn=V.features.length;Zi<kn;Zi++){var cr=Qa(V.features[Zi],S);cr&&fe.push(cr)}return new Ns(fe);default:throw new Error("Invalid GeoJSON object.")}}function Ta(h,S,V,te){return h?h(S,V):new ca(V,te&&te.markersInheritOptions&&te)}function gl(h){return new Di(h[1],h[0],h[2])}function Is(h,S,V){for(var Pt,te=[],fe=0,Ne=h.length;fe<Ne;fe++)Pt=S?Is(h[fe],S-1,V):(V||gl)(h[fe]),te.push(Pt);return te}function _l(h,S){return void 0!==(h=qi(h)).alt?[Ye(h.lng,S),Ye(h.lat,S),Ye(h.alt,S)]:[Ye(h.lng,S),Ye(h.lat,S)]}function el(h,S,V,te){for(var fe=[],Ne=0,Pt=h.length;Ne<Pt;Ne++)fe.push(S?el(h[Ne],Ds(h[Ne])?0:S-1,V,te):_l(h[Ne],te));return!S&&V&&fe.length>0&&fe.push(fe[0].slice()),fe}function to(h,S){return h.feature?sn({},h.feature,{geometry:S}):Oa(S)}function Oa(h){return"Feature"===h.type||"FeatureCollection"===h.type?h:{type:"Feature",properties:{},geometry:h}}var Ra={toGeoJSON:function(h){return to(this,{type:"Point",coordinates:_l(this.getLatLng(),h)})}};function tl(h,S){return new Ho(h,S)}ca.include(Ra),Ja.include(Ra),Ca.include(Ra),uo.include({toGeoJSON:function(h){var S=!Ds(this._latlngs);return to(this,{type:(S?"Multi":"")+"LineString",coordinates:el(this._latlngs,S?1:0,!1,h)})}}),ho.include({toGeoJSON:function(h){var S=!Ds(this._latlngs),V=S&&!Ds(this._latlngs[0]),te=el(this._latlngs,V?2:S?1:0,!0,h);return S||(te=[te]),to(this,{type:(V?"Multi":"")+"Polygon",coordinates:te})}}),aa.include({toMultiPoint:function(h){var S=[];return this.eachLayer(function(V){S.push(V.toGeoJSON(h).geometry.coordinates)}),to(this,{type:"MultiPoint",coordinates:S})},toGeoJSON:function(h){var S=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===S)return this.toMultiPoint(h);var V="GeometryCollection"===S,te=[];return this.eachLayer(function(fe){if(fe.toGeoJSON){var Ne=fe.toGeoJSON(h);if(V)te.push(Ne.geometry);else{var Pt=Oa(Ne);"FeatureCollection"===Pt.type?te.push.apply(te,Pt.features):te.push(Pt)}}}),V?to(this,{geometries:te,type:"GeometryCollection"}):{type:"FeatureCollection",features:te}}});var zl=tl,ka=yo.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(h,S,V){this._url=h,this._bounds=jt(S),dt(this,V)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){X(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(h){return this.options.opacity=h,this._image&&this._updateOpacity(),this},setStyle:function(h){return h.opacity&&this.setOpacity(h.opacity),this},bringToFront:function(){return this._map&&ae(this._image),this},bringToBack:function(){return this._map&&de(this._image),this},setUrl:function(h){return this._url=h,this._image&&(this._image.src=h),this},setBounds:function(h){return this._bounds=jt(h),this._map&&this._reset(),this},getEvents:function(){var h={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var h="IMG"===this._url.tagName,S=this._image=h?this._url:U("img");he(S,"leaflet-image-layer"),this._zoomAnimated&&he(S,"leaflet-zoom-animated"),this.options.className&&he(S,this.options.className),S.onselectstart=Oe,S.onmousemove=Oe,S.onload=e(this.fire,this,"load"),S.onerror=e(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(S.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),h?this._url=S.src:(S.src=this._url,S.alt=this.options.alt)},_animateZoom:function(h){var S=this._map.getZoomScale(h.zoom),V=this._map._latLngBoundsToNewLayerBounds(this._bounds,h.zoom,h.center).min;$e(this._image,V,S)},_reset:function(){var h=this._image,S=new mn(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),V=S.getSize();wt(h,S.min),h.style.width=V.x+"px",h.style.height=V.y+"px"},_updateOpacity:function(){ce(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var h=this.options.errorOverlayUrl;h&&this._url!==h&&(this._url=h,this._image.src=h)},getCenter:function(){return this._bounds.getCenter()}}),Ea=ka.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var h="VIDEO"===this._url.tagName,S=this._image=h?this._url:U("video");if(he(S,"leaflet-image-layer"),this._zoomAnimated&&he(S,"leaflet-zoom-animated"),this.options.className&&he(S,this.options.className),S.onselectstart=Oe,S.onmousemove=Oe,S.onloadeddata=e(this.fire,this,"load"),h){for(var V=S.getElementsByTagName("source"),te=[],fe=0;fe<V.length;fe++)te.push(V[fe].src);this._url=V.length>0?te:[S.src]}else{yt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(S.style,"objectFit")&&(S.style.objectFit="fill"),S.autoplay=!!this.options.autoplay,S.loop=!!this.options.loop,S.muted=!!this.options.muted,S.playsInline=!!this.options.playsInline;for(var Ne=0;Ne<this._url.length;Ne++){var Pt=U("source");Pt.src=this._url[Ne],S.appendChild(Pt)}}}});var vl=ka.extend({_initImage:function(){var h=this._image=this._url;he(h,"leaflet-image-layer"),this._zoomAnimated&&he(h,"leaflet-zoom-animated"),this.options.className&&he(h,this.options.className),h.onselectstart=Oe,h.onmousemove=Oe}});var po=yo.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(h,S){h&&(h instanceof Di||yt(h))?(this._latlng=qi(h),dt(this,S)):(dt(this,h),this._source=S),this.options.content&&(this._content=this.options.content)},openOn:function(h){return(h=arguments.length?h:this._source._map).hasLayer(this)||h.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(h){return this._map?this.close():(arguments.length?this._source=h:h=this._source,this._prepareOpen(),this.openOn(h._map)),this},onAdd:function(h){this._zoomAnimated=h._zoomAnimated,this._container||this._initLayout(),h._fadeAnimated&&ce(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),h._fadeAnimated&&ce(this._container,1),this.bringToFront(),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(h){h._fadeAnimated?(ce(this._container,0),this._removeTimeout=setTimeout(e(X,void 0,this._container),200)):X(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(h){return this._latlng=qi(h),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(h){return this._content=h,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var h={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ae(this._container),this},bringToBack:function(){return this._map&&de(this._container),this},_prepareOpen:function(h){var S=this._source;if(!S._map)return!1;if(S instanceof Ns){S=null;var V=this._source._layers;for(var te in V)if(V[te]._map){S=V[te];break}if(!S)return!1;this._source=S}if(!h)if(S.getCenter)h=S.getCenter();else if(S.getLatLng)h=S.getLatLng();else{if(!S.getBounds)throw new Error("Unable to get source layer LatLng.");h=S.getBounds().getCenter()}return this.setLatLng(h),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var h=this._contentNode,S="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof S)h.innerHTML=S;else{for(;h.hasChildNodes();)h.removeChild(h.firstChild);h.appendChild(S)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),S=Yi(this.options.offset),V=this._getAnchor();this._zoomAnimated?wt(this._container,h.add(V)):S=S.add(h).add(V);var te=this._containerBottom=-S.y,fe=this._containerLeft=-Math.round(this._containerWidth/2)+S.x;this._container.style.bottom=te+"px",this._container.style.left=fe+"px"}},_getAnchor:function(){return[0,0]}});lr.include({_initOverlay:function(h,S,V,te){var fe=S;return fe instanceof h||(fe=new h(te).setContent(S)),V&&fe.setLatLng(V),fe}}),yo.include({_initOverlay:function(h,S,V,te){var fe=V;return fe instanceof h?(dt(fe,te),fe._source=this):(fe=S&&!te?S:new h(te,this)).setContent(V),fe}});var Go=po.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(h){return!(h=arguments.length?h:this._source._map).hasLayer(this)&&h._popup&&h._popup.options.autoClose&&h.removeLayer(h._popup),h._popup=this,po.prototype.openOn.call(this,h)},onAdd:function(h){po.prototype.onAdd.call(this,h),h.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $s||this._source.on("preclick",So))},onRemove:function(h){po.prototype.onRemove.call(this,h),h.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $s||this._source.off("preclick",So))},getEvents:function(){var h=po.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(h.preclick=this.close),this.options.keepInView&&(h.moveend=this._adjustPan),h},_initLayout:function(){var h="leaflet-popup",S=this._container=U("div",h+" "+(this.options.className||"")+" leaflet-zoom-animated"),V=this._wrapper=U("div",h+"-content-wrapper",S);if(this._contentNode=U("div",h+"-content",V),go(S),Dl(this._contentNode),Un(S,"contextmenu",So),this._tipContainer=U("div",h+"-tip-container",S),this._tip=U("div",h+"-tip",this._tipContainer),this.options.closeButton){var te=this._closeButton=U("a",h+"-close-button",S);te.setAttribute("role","button"),te.setAttribute("aria-label","Close popup"),te.href="#close",te.innerHTML='<span aria-hidden="true">&#215;</span>',Un(te,"click",function(fe){Fr(fe),this.close()},this)}},_updateLayout:function(){var h=this._contentNode,S=h.style;S.width="",S.whiteSpace="nowrap";var V=h.offsetWidth;V=Math.min(V,this.options.maxWidth),V=Math.max(V,this.options.minWidth),S.width=V+1+"px",S.whiteSpace="",S.height="";var fe=this.options.maxHeight,Ne="leaflet-popup-scrolled";fe&&h.offsetHeight>fe?(S.height=fe+"px",he(h,Ne)):be(h,Ne),this._containerWidth=this._container.offsetWidth},_animateZoom:function(h){var S=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center),V=this._getAnchor();wt(this._container,S.add(V))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var h=this._map,S=parseInt(j(this._container,"marginBottom"),10)||0,V=this._container.offsetHeight+S,te=this._containerWidth,fe=new fi(this._containerLeft,-V-this._containerBottom);fe._add(kt(this._container));var Ne=h.layerPointToContainerPoint(fe),Pt=Yi(this.options.autoPanPadding),Jt=Yi(this.options.autoPanPaddingTopLeft||Pt),_i=Yi(this.options.autoPanPaddingBottomRight||Pt),Zi=h.getSize(),kn=0,Ln=0;Ne.x+te+_i.x>Zi.x&&(kn=Ne.x+te-Zi.x+_i.x),Ne.x-kn-Jt.x<0&&(kn=Ne.x-Jt.x),Ne.y+V+_i.y>Zi.y&&(Ln=Ne.y+V-Zi.y+_i.y),Ne.y-Ln-Jt.y<0&&(Ln=Ne.y-Jt.y),(kn||Ln)&&(this.options.keepInView&&(this._autopanning=!0),h.fire("autopanstart").panBy([kn,Ln]))}},_getAnchor:function(){return Yi(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});lr.mergeOptions({closePopupOnClick:!0}),lr.include({openPopup:function(h,S,V){return this._initOverlay(Go,h,S,V).openOn(this),this},closePopup:function(h){return(h=arguments.length?h:this._popup)&&h.close(),this}}),yo.include({bindPopup:function(h,S){return this._popup=this._initOverlay(Go,this._popup,h,S),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h){return this._popup&&(this instanceof Ns||(this._popup._source=this),this._popup._prepareOpen(h||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(h){return this._popup&&this._popup.setContent(h),this},getPopup:function(){return this._popup},_openPopup:function(h){if(this._popup&&this._map){eo(h);var S=h.layer||h.target;if(this._popup._source===S&&!(S instanceof $s))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(h.latlng));this._popup._source=S,this.openPopup(h.latlng)}},_movePopup:function(h){this._popup.setLatLng(h.latlng)},_onKeyPress:function(h){13===h.originalEvent.keyCode&&this._openPopup(h)}});var Fl=po.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(h){po.prototype.onAdd.call(this,h),this.setOpacity(this.options.opacity),h.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(h){po.prototype.onRemove.call(this,h),h.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var h=po.prototype.getEvents.call(this);return this.options.permanent||(h.preclick=this.close),h},_initLayout:function(){this._contentNode=this._container=U("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Ae(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(h){var S,V,te=this._map,fe=this._container,Ne=te.latLngToContainerPoint(te.getCenter()),Pt=te.layerPointToContainerPoint(h),Jt=this.options.direction,_i=fe.offsetWidth,Zi=fe.offsetHeight,kn=Yi(this.options.offset),Ln=this._getAnchor();"top"===Jt?(S=_i/2,V=Zi):"bottom"===Jt?(S=_i/2,V=0):"center"===Jt?(S=_i/2,V=Zi/2):"right"===Jt?(S=0,V=Zi/2):"left"===Jt?(S=_i,V=Zi/2):Pt.x<Ne.x?(Jt="right",S=0,V=Zi/2):(Jt="left",S=_i+2*(kn.x+Ln.x),V=Zi/2),h=h.subtract(Yi(S,V,!0)).add(kn).add(Ln),be(fe,"leaflet-tooltip-right"),be(fe,"leaflet-tooltip-left"),be(fe,"leaflet-tooltip-top"),be(fe,"leaflet-tooltip-bottom"),he(fe,"leaflet-tooltip-"+Jt),wt(fe,h)},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng);this._setPosition(h)},setOpacity:function(h){this.options.opacity=h,this._container&&ce(this._container,h)},_animateZoom:function(h){var S=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);this._setPosition(S)},_getAnchor:function(){return Yi(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});lr.include({openTooltip:function(h,S,V){return this._initOverlay(Fl,h,S,V).openOn(this),this},closeTooltip:function(h){return h.close(),this}}),yo.include({bindTooltip:function(h,S){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fl,this._tooltip,h,S),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(h){if(h||!this._tooltipHandlersAdded){var S=h?"off":"on",V={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?V.add=this._openTooltip:(V.mouseover=this._openTooltip,V.mouseout=this.closeTooltip,V.click=this._openTooltip,this._map?this._addFocusListeners():V.add=this._addFocusListeners),this._tooltip.options.sticky&&(V.mousemove=this._moveTooltip),this[S](V),this._tooltipHandlersAdded=!h}},openTooltip:function(h){return this._tooltip&&(this instanceof Ns||(this._tooltip._source=this),this._tooltip._prepareOpen(h)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(h){return this._tooltip&&this._tooltip.setContent(h),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(h){var S="function"==typeof h.getElement&&h.getElement();S&&(Un(S,"focus",function(){this._tooltip._source=h,this.openTooltip()},this),Un(S,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(h){var S="function"==typeof h.getElement&&h.getElement();S&&S.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(h){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var S=this;return void this._map.once("moveend",function(){S._openOnceFlag=!1,S._openTooltip(h)})}this._tooltip._source=h.layer||h.target,this.openTooltip(this._tooltip.options.sticky?h.latlng:void 0)}},_moveTooltip:function(h){var V,te,S=h.latlng;this._tooltip.options.sticky&&h.originalEvent&&(V=this._map.mouseEventToContainerPoint(h.originalEvent),te=this._map.containerPointToLayerPoint(V),S=this._map.layerPointToLatLng(te)),this._tooltip.setLatLng(S)}});var Ao=Os.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(h){var S=h&&"DIV"===h.tagName?h:document.createElement("div"),V=this.options;if(V.html instanceof Element?(ee(S),S.appendChild(V.html)):S.innerHTML=!1!==V.html?V.html:"",V.bgPos){var te=Yi(V.bgPos);S.style.backgroundPosition=-te.x+"px "+-te.y+"px"}return this._setIconStyles(S,"icon"),S},createShadow:function(){return null}});Os.Default=wa;var es=yo.extend({options:{tileSize:256,opacity:1,updateWhenIdle:je.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(h){dt(this,h)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(h){h._addZoomLimit(this)},onRemove:function(h){this._removeAllTiles(),X(this._container),h._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(de(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(h){return this.options.opacity=h,this._updateOpacity(),this},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var h=this._clampZoom(this._map.getZoom());h!==this._tileZoom&&(this._tileZoom=h,this._updateLevels()),this._update()}return this},getEvents:function(){var h={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=ke(this._onMoveEnd,this.options.updateInterval,this)),h.move=this._onMove),this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},createTile:function(){return document.createElement("div")},getTileSize:function(){var h=this.options.tileSize;return h instanceof fi?h:new fi(h,h)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var Ne,S=this.getPane().children,V=-h(-1/0,1/0),te=0,fe=S.length;te<fe;te++)Ne=S[te].style.zIndex,S[te]!==this._container&&Ne&&(V=h(V,+Ne));isFinite(V)&&(this.options.zIndex=V+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!je.ielt9){ce(this._container,this.options.opacity);var h=+new Date,S=!1,V=!1;for(var te in this._tiles){var fe=this._tiles[te];if(fe.current&&fe.loaded){var Ne=Math.min(1,(h-fe.loaded)/200);ce(fe.el,Ne),Ne<1?S=!0:(fe.active?V=!0:this._onOpaqueTile(fe),fe.active=!0)}}V&&!this._noPrune&&this._pruneTiles(),S&&(ct(this._fadeFrame),this._fadeFrame=Nt(this._updateOpacity,this))}},_onOpaqueTile:Oe,_initContainer:function(){this._container||(this._container=U("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var h=this._tileZoom,S=this.options.maxZoom;if(void 0!==h){for(var V in this._levels)V=Number(V),this._levels[V].el.children.length||V===h?(this._levels[V].el.style.zIndex=S-Math.abs(h-V),this._onUpdateLevel(V)):(X(this._levels[V].el),this._removeTilesAtZoom(V),this._onRemoveLevel(V),delete this._levels[V]);var te=this._levels[h],fe=this._map;return te||((te=this._levels[h]={}).el=U("div","leaflet-tile-container leaflet-zoom-animated",this._container),te.el.style.zIndex=S,te.origin=fe.project(fe.unproject(fe.getPixelOrigin()),h).round(),te.zoom=h,this._setZoomTransform(te,fe.getCenter(),fe.getZoom()),this._onCreateLevel(te)),this._level=te,te}},_onUpdateLevel:Oe,_onRemoveLevel:Oe,_onCreateLevel:Oe,_pruneTiles:function(){if(this._map){var h,S,V=this._map.getZoom();if(V>this.options.maxZoom||V<this.options.minZoom)return void this._removeAllTiles();for(h in this._tiles)(S=this._tiles[h]).retain=S.current;for(h in this._tiles)if((S=this._tiles[h]).current&&!S.active){var te=S.coords;this._retainParent(te.x,te.y,te.z,te.z-5)||this._retainChildren(te.x,te.y,te.z,te.z+2)}for(h in this._tiles)this._tiles[h].retain||this._removeTile(h)}},_removeTilesAtZoom:function(h){for(var S in this._tiles)this._tiles[S].coords.z===h&&this._removeTile(S)},_removeAllTiles:function(){for(var h in this._tiles)this._removeTile(h)},_invalidateAll:function(){for(var h in this._levels)X(this._levels[h].el),this._onRemoveLevel(Number(h)),delete this._levels[h];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(h,S,V,te){var fe=Math.floor(h/2),Ne=Math.floor(S/2),Pt=V-1,Jt=new fi(+fe,+Ne);Jt.z=+Pt;var _i=this._tileCoordsToKey(Jt),Zi=this._tiles[_i];return Zi&&Zi.active?(Zi.retain=!0,!0):(Zi&&Zi.loaded&&(Zi.retain=!0),Pt>te&&this._retainParent(fe,Ne,Pt,te))},_retainChildren:function(h,S,V,te){for(var fe=2*h;fe<2*h+2;fe++)for(var Ne=2*S;Ne<2*S+2;Ne++){var Pt=new fi(fe,Ne);Pt.z=V+1;var Jt=this._tileCoordsToKey(Pt),_i=this._tiles[Jt];_i&&_i.active?_i.retain=!0:(_i&&_i.loaded&&(_i.retain=!0),V+1<te&&this._retainChildren(fe,Ne,V+1,te))}},_resetView:function(h){var S=h&&(h.pinch||h.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),S,S)},_animateZoom:function(h){this._setView(h.center,h.zoom,!0,h.noUpdate)},_clampZoom:function(h){var S=this.options;return void 0!==S.minNativeZoom&&h<S.minNativeZoom?S.minNativeZoom:void 0!==S.maxNativeZoom&&S.maxNativeZoom<h?S.maxNativeZoom:h},_setView:function(h,S,V,te){var fe=Math.round(S);fe=void 0!==this.options.maxZoom&&fe>this.options.maxZoom||void 0!==this.options.minZoom&&fe<this.options.minZoom?void 0:this._clampZoom(fe),(!te||this.options.updateWhenZooming&&fe!==this._tileZoom)&&(this._tileZoom=fe,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==fe&&this._update(h),V||this._pruneTiles(),this._noPrune=!!V),this._setZoomTransforms(h,S)},_setZoomTransforms:function(h,S){for(var V in this._levels)this._setZoomTransform(this._levels[V],h,S)},_setZoomTransform:function(h,S,V){var te=this._map.getZoomScale(V,h.zoom),fe=h.origin.multiplyBy(te).subtract(this._map._getNewPixelOrigin(S,V)).round();je.any3d?$e(h.el,fe,te):wt(h.el,fe)},_resetGrid:function(){var h=this._map,S=h.options.crs,V=this._tileSize=this.getTileSize(),te=this._tileZoom,fe=this._map.getPixelWorldBounds(this._tileZoom);fe&&(this._globalTileRange=this._pxBoundsToTileRange(fe)),this._wrapX=S.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,S.wrapLng[0]],te).x/V.x),Math.ceil(h.project([0,S.wrapLng[1]],te).x/V.y)],this._wrapY=S.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([S.wrapLat[0],0],te).y/V.x),Math.ceil(h.project([S.wrapLat[1],0],te).y/V.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(h){var S=this._map,V=S._animatingZoom?Math.max(S._animateToZoom,S.getZoom()):S.getZoom(),te=S.getZoomScale(V,this._tileZoom),fe=S.project(h,this._tileZoom).floor(),Ne=S.getSize().divideBy(2*te);return new mn(fe.subtract(Ne),fe.add(Ne))},_update:function(h){var S=this._map;if(S){var V=this._clampZoom(S.getZoom());if(void 0===h&&(h=S.getCenter()),void 0!==this._tileZoom){var te=this._getTiledPixelBounds(h),fe=this._pxBoundsToTileRange(te),Ne=fe.getCenter(),Pt=[],Jt=this.options.keepBuffer,_i=new mn(fe.getBottomLeft().subtract([Jt,-Jt]),fe.getTopRight().add([Jt,-Jt]));if(!(isFinite(fe.min.x)&&isFinite(fe.min.y)&&isFinite(fe.max.x)&&isFinite(fe.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Zi in this._tiles){var kn=this._tiles[Zi].coords;(kn.z!==this._tileZoom||!_i.contains(new fi(kn.x,kn.y)))&&(this._tiles[Zi].current=!1)}if(Math.abs(V-this._tileZoom)>1)return void this._setView(h,V);for(var Ln=fe.min.y;Ln<=fe.max.y;Ln++)for(var cr=fe.min.x;cr<=fe.max.x;cr++){var Ir=new fi(cr,Ln);if(Ir.z=this._tileZoom,this._isValidTile(Ir)){var Ms=this._tiles[this._tileCoordsToKey(Ir)];Ms?Ms.current=!0:Pt.push(Ir)}}if(Pt.sort(function(bs,ua){return bs.distanceTo(Ne)-ua.distanceTo(Ne)}),0!==Pt.length){this._loading||(this._loading=!0,this.fire("loading"));var Zs=document.createDocumentFragment();for(cr=0;cr<Pt.length;cr++)this._addTile(Pt[cr],Zs);this._level.el.appendChild(Zs)}}}},_isValidTile:function(h){var S=this._map.options.crs;if(!S.infinite){var V=this._globalTileRange;if(!S.wrapLng&&(h.x<V.min.x||h.x>V.max.x)||!S.wrapLat&&(h.y<V.min.y||h.y>V.max.y))return!1}if(!this.options.bounds)return!0;var te=this._tileCoordsToBounds(h);return jt(this.options.bounds).overlaps(te)},_keyToBounds:function(h){return this._tileCoordsToBounds(this._keyToTileCoords(h))},_tileCoordsToNwSe:function(h){var S=this._map,V=this.getTileSize(),te=h.scaleBy(V),fe=te.add(V);return[S.unproject(te,h.z),S.unproject(fe,h.z)]},_tileCoordsToBounds:function(h){var S=this._tileCoordsToNwSe(h),V=new zn(S[0],S[1]);return this.options.noWrap||(V=this._map.wrapLatLngBounds(V)),V},_tileCoordsToKey:function(h){return h.x+":"+h.y+":"+h.z},_keyToTileCoords:function(h){var S=h.split(":"),V=new fi(+S[0],+S[1]);return V.z=+S[2],V},_removeTile:function(h){var S=this._tiles[h];S&&(X(S.el),delete this._tiles[h],this.fire("tileunload",{tile:S.el,coords:this._keyToTileCoords(h)}))},_initTile:function(h){he(h,"leaflet-tile");var S=this.getTileSize();h.style.width=S.x+"px",h.style.height=S.y+"px",h.onselectstart=Oe,h.onmousemove=Oe,je.ielt9&&this.options.opacity<1&&ce(h,this.options.opacity)},_addTile:function(h,S){var V=this._getTilePos(h),te=this._tileCoordsToKey(h),fe=this.createTile(this._wrapCoords(h),e(this._tileReady,this,h));this._initTile(fe),this.createTile.length<2&&Nt(e(this._tileReady,this,h,null,fe)),wt(fe,V),this._tiles[te]={el:fe,coords:h,current:!0},S.appendChild(fe),this.fire("tileloadstart",{tile:fe,coords:h})},_tileReady:function(h,S,V){S&&this.fire("tileerror",{error:S,tile:V,coords:h});var te=this._tileCoordsToKey(h);(V=this._tiles[te])&&(V.loaded=+new Date,this._map._fadeAnimated?(ce(V.el,0),ct(this._fadeFrame),this._fadeFrame=Nt(this._updateOpacity,this)):(V.active=!0,this._pruneTiles()),S||(he(V.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:V.el,coords:h})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),je.ielt9||!this._map._fadeAnimated?Nt(this._pruneTiles,this):setTimeout(e(this._pruneTiles,this),250)))},_getTilePos:function(h){return h.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(h){var S=new fi(this._wrapX?Ee(h.x,this._wrapX):h.x,this._wrapY?Ee(h.y,this._wrapY):h.y);return S.z=h.z,S},_pxBoundsToTileRange:function(h){var S=this.getTileSize();return new mn(h.min.unscaleBy(S).floor(),h.max.unscaleBy(S).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var h in this._tiles)if(!this._tiles[h].loaded)return!1;return!0}});var za=es.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(h,S){this._url=h,(S=dt(this,S)).detectRetina&&je.retina&&S.maxZoom>0?(S.tileSize=Math.floor(S.tileSize/2),S.zoomReverse?(S.zoomOffset--,S.minZoom=Math.min(S.maxZoom,S.minZoom+1)):(S.zoomOffset++,S.maxZoom=Math.max(S.minZoom,S.maxZoom-1)),S.minZoom=Math.max(0,S.minZoom)):S.zoomReverse?S.minZoom=Math.min(S.maxZoom,S.minZoom):S.maxZoom=Math.max(S.minZoom,S.maxZoom),"string"==typeof S.subdomains&&(S.subdomains=S.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(h,S){return this._url===h&&void 0===S&&(S=!0),this._url=h,S||this.redraw(),this},createTile:function(h,S){var V=document.createElement("img");return Un(V,"load",e(this._tileOnLoad,this,S,V)),Un(V,"error",e(this._tileOnError,this,S,V)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(V.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(V.referrerPolicy=this.options.referrerPolicy),V.alt="",V.src=this.getTileUrl(h),V},getTileUrl:function(h){var S={r:je.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var V=this._globalTileRange.max.y-h.y;this.options.tms&&(S.y=V),S["-y"]=V}return pt(this._url,sn(S,this.options))},_tileOnLoad:function(h,S){je.ielt9?setTimeout(e(h,this,null,S),0):h(null,S)},_tileOnError:function(h,S,V){var te=this.options.errorTileUrl;te&&S.getAttribute("src")!==te&&(S.src=te),h(V,S)},_onTileRemove:function(h){h.tile.onload=null},_getZoomForUrl:function(){var h=this._tileZoom;return this.options.zoomReverse&&(h=this.options.maxZoom-h),h+this.options.zoomOffset},_getSubdomain:function(h){var S=Math.abs(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[S]},_abortLoading:function(){var h,S;for(h in this._tiles)if(this._tiles[h].coords.z!==this._tileZoom&&((S=this._tiles[h].el).onload=Oe,S.onerror=Oe,!S.complete)){S.src=Ve;var V=this._tiles[h].coords;X(S),delete this._tiles[h],this.fire("tileabort",{tile:S,coords:V})}},_removeTile:function(h){var S=this._tiles[h];if(S)return S.el.setAttribute("src",Ve),es.prototype._removeTile.call(this,h)},_tileReady:function(h,S,V){if(this._map&&(!V||V.getAttribute("src")!==Ve))return es.prototype._tileReady.call(this,h,S,V)}});function Sa(h,S){return new za(h,S)}var fo=za.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,S){this._url=h;var V=sn({},this.defaultWmsParams);for(var te in S)te in this.options||(V[te]=S[te]);var fe=(S=dt(this,S)).detectRetina&&je.retina?2:1,Ne=this.getTileSize();V.width=Ne.x*fe,V.height=Ne.y*fe,this.wmsParams=V},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,za.prototype.onAdd.call(this,h)},getTileUrl:function(h){var S=this._tileCoordsToNwSe(h),V=this._crs,te=ln(V.project(S[0]),V.project(S[1])),fe=te.min,Ne=te.max,Pt=(this._wmsVersion>=1.3&&this._crs===Vo?[fe.y,fe.x,Ne.y,Ne.x]:[fe.x,fe.y,Ne.x,Ne.y]).join(","),Jt=za.prototype.getTileUrl.call(this,h);return Jt+St(this.wmsParams,Jt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Pt},setParams:function(h,S){return sn(this.wmsParams,h),S||this.redraw(),this}});za.WMS=fo,Sa.wms=function Bl(h,S){return new fo(h,S)};var jo=yo.extend({options:{padding:.1},initialize:function(h){dt(this,h),Ae(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var h={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(h.zoomanim=this._onAnimZoom),h},_onAnimZoom:function(h){this._updateTransform(h.center,h.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(h,S){var V=this._map.getZoomScale(S,this._zoom),te=this._map.getSize().multiplyBy(.5+this.options.padding),fe=this._map.project(this._center,S),Ne=te.multiplyBy(-V).add(fe).subtract(this._map._getNewPixelOrigin(h,S));je.any3d?$e(this._container,Ne,V):wt(this._container,Ne)},_reset:function(){for(var h in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[h]._reset()},_onZoomEnd:function(){for(var h in this._layers)this._layers[h]._project()},_updatePaths:function(){for(var h in this._layers)this._layers[h]._update()},_update:function(){var h=this.options.padding,S=this._map.getSize(),V=this._map.containerPointToLayerPoint(S.multiplyBy(-h)).round();this._bounds=new mn(V,V.add(S.multiplyBy(1+2*h)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Dr=jo.extend({options:{tolerance:0},getEvents:function(){var h=jo.prototype.getEvents.call(this);return h.viewprereset=this._onViewPreReset,h},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){jo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var h=this._container=document.createElement("canvas");Un(h,"mousemove",this._onMouseMove,this),Un(h,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Un(h,"mouseout",this._handleMouseOut,this),h._leaflet_disable_events=!0,this._ctx=h.getContext("2d")},_destroyContainer:function(){ct(this._redrawRequest),delete this._ctx,X(this._container),Yn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var S in this._redrawBounds=null,this._layers)this._layers[S]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){jo.prototype._update.call(this);var h=this._bounds,S=this._container,V=h.getSize(),te=je.retina?2:1;wt(S,h.min),S.width=te*V.x,S.height=te*V.y,S.style.width=V.x+"px",S.style.height=V.y+"px",je.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y),this.fire("update")}},_reset:function(){jo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(h){this._updateDashArray(h),this._layers[Ae(h)]=h;var S=h._order={layer:h,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=S),this._drawLast=S,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(h){this._requestRedraw(h)},_removePath:function(h){var S=h._order,V=S.next,te=S.prev;V?V.prev=te:this._drawLast=te,te?te.next=V:this._drawFirst=V,delete h._order,delete this._layers[Ae(h)],this._requestRedraw(h)},_updatePath:function(h){this._extendRedrawBounds(h),h._project(),h._update(),this._requestRedraw(h)},_updateStyle:function(h){this._updateDashArray(h),this._requestRedraw(h)},_updateDashArray:function(h){if("string"==typeof h.options.dashArray){var te,fe,S=h.options.dashArray.split(/[, ]+/),V=[];for(fe=0;fe<S.length;fe++){if(te=Number(S[fe]),isNaN(te))return;V.push(te)}h.options._dashArray=V}else h.options._dashArray=h.options.dashArray},_requestRedraw:function(h){this._map&&(this._extendRedrawBounds(h),this._redrawRequest=this._redrawRequest||Nt(this._redraw,this))},_extendRedrawBounds:function(h){if(h._pxBounds){var S=(h.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new mn,this._redrawBounds.extend(h._pxBounds.min.subtract([S,S])),this._redrawBounds.extend(h._pxBounds.max.add([S,S]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var h=this._redrawBounds;if(h){var S=h.getSize();this._ctx.clearRect(h.min.x,h.min.y,S.x,S.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var h,S=this._redrawBounds;if(this._ctx.save(),S){var V=S.getSize();this._ctx.beginPath(),this._ctx.rect(S.min.x,S.min.y,V.x,V.y),this._ctx.clip()}this._drawing=!0;for(var te=this._drawFirst;te;te=te.next)h=te.layer,(!S||h._pxBounds&&h._pxBounds.intersects(S))&&h._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,S){if(this._drawing){var V,te,fe,Ne,Pt=h._parts,Jt=Pt.length,_i=this._ctx;if(Jt){for(_i.beginPath(),V=0;V<Jt;V++){for(te=0,fe=Pt[V].length;te<fe;te++)_i[te?"lineTo":"moveTo"]((Ne=Pt[V][te]).x,Ne.y);S&&_i.closePath()}this._fillStroke(_i,h)}}},_updateCircle:function(h){if(this._drawing&&!h._empty()){var S=h._point,V=this._ctx,te=Math.max(Math.round(h._radius),1),fe=(Math.max(Math.round(h._radiusY),1)||te)/te;1!==fe&&(V.save(),V.scale(1,fe)),V.beginPath(),V.arc(S.x,S.y/fe,te,0,2*Math.PI,!1),1!==fe&&V.restore(),this._fillStroke(V,h)}},_fillStroke:function(h,S){var V=S.options;V.fill&&(h.globalAlpha=V.fillOpacity,h.fillStyle=V.fillColor||V.color,h.fill(V.fillRule||"evenodd")),V.stroke&&0!==V.weight&&(h.setLineDash&&h.setLineDash(S.options&&S.options._dashArray||[]),h.globalAlpha=V.opacity,h.lineWidth=V.weight,h.strokeStyle=V.color,h.lineCap=V.lineCap,h.lineJoin=V.lineJoin,h.stroke())},_onClick:function(h){for(var V,te,S=this._map.mouseEventToLayerPoint(h),fe=this._drawFirst;fe;fe=fe.next)(V=fe.layer).options.interactive&&V._containsPoint(S)&&("click"!==h.type&&"preclick"!==h.type||!this._map._draggableMoved(V))&&(te=V);this._fireEvent(!!te&&[te],h)},_onMouseMove:function(h){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var S=this._map.mouseEventToLayerPoint(h);this._handleMouseHover(h,S)}},_handleMouseOut:function(h){var S=this._hoveredLayer;S&&(be(this._container,"leaflet-interactive"),this._fireEvent([S],h,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(h,S){if(!this._mouseHoverThrottled){for(var V,te,fe=this._drawFirst;fe;fe=fe.next)(V=fe.layer).options.interactive&&V._containsPoint(S)&&(te=V);te!==this._hoveredLayer&&(this._handleMouseOut(h),te&&(he(this._container,"leaflet-interactive"),this._fireEvent([te],h,"mouseover"),this._hoveredLayer=te)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],h),this._mouseHoverThrottled=!0,setTimeout(e(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(h,S,V){this._map._fireDOMEvent(S,V||S.type,h)},_bringToFront:function(h){var S=h._order;if(S){var V=S.next,te=S.prev;if(!V)return;V.prev=te,te?te.next=V:V&&(this._drawFirst=V),S.prev=this._drawLast,this._drawLast.next=S,S.next=null,this._drawLast=S,this._requestRedraw(h)}},_bringToBack:function(h){var S=h._order;if(S){var V=S.next,te=S.prev;if(!te)return;te.next=V,V?V.prev=te:te&&(this._drawLast=te),S.prev=null,S.next=this._drawFirst,this._drawFirst.prev=S,this._drawFirst=S,this._requestRedraw(h)}}});function bl(h){return je.canvas?new Dr(h):null}var Fa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(h){return document.createElement("<lvml:"+h+' class="lvml">')}}catch{}return function(h){return document.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ma={_initContainer:function(){this._container=U("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(jo.prototype._update.call(this),this.fire("update"))},_initPath:function(h){var S=h._container=Fa("shape");he(S,"leaflet-vml-shape "+(this.options.className||"")),S.coordsize="1 1",h._path=Fa("path"),S.appendChild(h._path),this._updateStyle(h),this._layers[Ae(h)]=h},_addPath:function(h){var S=h._container;this._container.appendChild(S),h.options.interactive&&h.addInteractiveTarget(S)},_removePath:function(h){var S=h._container;X(S),h.removeInteractiveTarget(S),delete this._layers[Ae(h)]},_updateStyle:function(h){var S=h._stroke,V=h._fill,te=h.options,fe=h._container;fe.stroked=!!te.stroke,fe.filled=!!te.fill,te.stroke?(S||(S=h._stroke=Fa("stroke")),fe.appendChild(S),S.weight=te.weight+"px",S.color=te.color,S.opacity=te.opacity,S.dashStyle=te.dashArray?yt(te.dashArray)?te.dashArray.join(" "):te.dashArray.replace(/( *, *)/g," "):"",S.endcap=te.lineCap.replace("butt","flat"),S.joinstyle=te.lineJoin):S&&(fe.removeChild(S),h._stroke=null),te.fill?(V||(V=h._fill=Fa("fill")),fe.appendChild(V),V.color=te.fillColor||te.color,V.opacity=te.fillOpacity):V&&(fe.removeChild(V),h._fill=null)},_updateCircle:function(h){var S=h._point.round(),V=Math.round(h._radius),te=Math.round(h._radiusY||V);this._setPath(h,h._empty()?"M0 0":"AL "+S.x+","+S.y+" "+V+","+te+" 0,23592600")},_setPath:function(h,S){h._path.v=S},_bringToFront:function(h){ae(h._container)},_bringToBack:function(h){de(h._container)}},Lo=je.vml?Fa:Ui,xo=jo.extend({_initContainer:function(){this._container=Lo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Lo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){X(this._container),Yn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){jo.prototype._update.call(this);var h=this._bounds,S=h.getSize(),V=this._container;(!this._svgSize||!this._svgSize.equals(S))&&(this._svgSize=S,V.setAttribute("width",S.x),V.setAttribute("height",S.y)),wt(V,h.min),V.setAttribute("viewBox",[h.min.x,h.min.y,S.x,S.y].join(" ")),this.fire("update")}},_initPath:function(h){var S=h._path=Lo("path");h.options.className&&he(S,h.options.className),h.options.interactive&&he(S,"leaflet-interactive"),this._updateStyle(h),this._layers[Ae(h)]=h},_addPath:function(h){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(h._path),h.addInteractiveTarget(h._path)},_removePath:function(h){X(h._path),h.removeInteractiveTarget(h._path),delete this._layers[Ae(h)]},_updatePath:function(h){h._project(),h._update()},_updateStyle:function(h){var S=h._path,V=h.options;S&&(V.stroke?(S.setAttribute("stroke",V.color),S.setAttribute("stroke-opacity",V.opacity),S.setAttribute("stroke-width",V.weight),S.setAttribute("stroke-linecap",V.lineCap),S.setAttribute("stroke-linejoin",V.lineJoin),V.dashArray?S.setAttribute("stroke-dasharray",V.dashArray):S.removeAttribute("stroke-dasharray"),V.dashOffset?S.setAttribute("stroke-dashoffset",V.dashOffset):S.removeAttribute("stroke-dashoffset")):S.setAttribute("stroke","none"),V.fill?(S.setAttribute("fill",V.fillColor||V.color),S.setAttribute("fill-opacity",V.fillOpacity),S.setAttribute("fill-rule",V.fillRule||"evenodd")):S.setAttribute("fill","none"))},_updatePoly:function(h,S){this._setPath(h,cn(h._parts,S))},_updateCircle:function(h){var S=h._point,V=Math.max(Math.round(h._radius),1),fe="a"+V+","+(Math.max(Math.round(h._radiusY),1)||V)+" 0 1,0 ",Ne=h._empty()?"M0 0":"M"+(S.x-V)+","+S.y+fe+2*V+",0 "+fe+2*-V+",0 ";this._setPath(h,Ne)},_setPath:function(h,S){h._path.setAttribute("d",S)},_bringToFront:function(h){ae(h._path)},_bringToBack:function(h){de(h._path)}});function Ba(h){return je.svg||je.vml?new xo(h):null}je.vml&&xo.include(Ma),lr.include({getRenderer:function(h){var S=h.options.renderer||this._getPaneRenderer(h.options.pane)||this.options.renderer||this._renderer;return S||(S=this._renderer=this._createRenderer()),this.hasLayer(S)||this.addLayer(S),S},_getPaneRenderer:function(h){if("overlayPane"===h||void 0===h)return!1;var S=this._paneRenderers[h];return void 0===S&&(S=this._createRenderer({pane:h}),this._paneRenderers[h]=S),S},_createRenderer:function(h){return this.options.preferCanvas&&bl(h)||Ba(h)}});var xs=ho.extend({initialize:function(h,S){ho.prototype.initialize.call(this,this._boundsToLatLngs(h),S)},setBounds:function(h){return this.setLatLngs(this._boundsToLatLngs(h))},_boundsToLatLngs:function(h){return[(h=jt(h)).getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]}});xo.create=Lo,xo.pointsToPath=cn,Ho.geometryToLayer=Qa,Ho.coordsToLatLng=gl,Ho.coordsToLatLngs=Is,Ho.latLngToCoords=_l,Ho.latLngsToCoords=el,Ho.getFeature=to,Ho.asFeature=Oa,lr.mergeOptions({boxZoom:!0});var nl=lo.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane,this._resetStateTimeout=0,h.on("unload",this._destroy,this)},addHooks:function(){Un(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){X(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(h){if(!h.shiftKey||1!==h.which&&1!==h.button)return!1;this._clearDeferredResetState(),this._resetState(),Wt(),gn(),this._startPoint=this._map.mouseEventToContainerPoint(h),Un(document,{contextmenu:eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=U("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var S=new mn(this._point,this._startPoint),V=S.getSize();wt(this._box,S.min),this._box.style.width=V.x+"px",this._box.style.height=V.y+"px"},_finish:function(){this._moved&&(X(this._box),be(this._container,"leaflet-crosshair")),hi(),An(),Yn(document,{contextmenu:eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(h){if((1===h.which||1===h.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(e(this._resetState,this),0);var S=new zn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(S).fire("boxzoomend",{boxZoomBounds:S})}},_onKeyDown:function(h){27===h.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});lr.addInitHook("addHandler","boxZoom",nl),lr.mergeOptions({doubleClickZoom:!0});var gs=lo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var S=this._map,V=S.getZoom(),te=S.options.zoomDelta,fe=h.originalEvent.shiftKey?V-te:V+te;"center"===S.options.doubleClickZoom?S.setZoom(fe):S.setZoomAround(h.containerPoint,fe)}});lr.addInitHook("addHandler","doubleClickZoom",gs),lr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ts=lo.extend({addHooks:function(){if(!this._draggable){var h=this._map;this._draggable=new va(h._mapPane,h._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),h.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),h.on("zoomend",this._onZoomEnd,this),h.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var h=this._map;if(h._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var S=jt(this._map.options.maxBounds);this._offsetLimit=ln(this._map.latLngToContainerPoint(S.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(S.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;h.fire("movestart").fire("dragstart"),h.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var S=this._lastTime=+new Date,V=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(V),this._times.push(S),this._prunePositions(S)}this._map.fire("move",h).fire("drag",h)},_prunePositions:function(h){for(;this._positions.length>1&&h-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var h=this._map.getSize().divideBy(2),S=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=S.subtract(h).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(h,S){return h-(h-S)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var h=this._draggable._newPos.subtract(this._draggable._startPos),S=this._offsetLimit;h.x<S.min.x&&(h.x=this._viscousLimit(h.x,S.min.x)),h.y<S.min.y&&(h.y=this._viscousLimit(h.y,S.min.y)),h.x>S.max.x&&(h.x=this._viscousLimit(h.x,S.max.x)),h.y>S.max.y&&(h.y=this._viscousLimit(h.y,S.max.y)),this._draggable._newPos=this._draggable._startPos.add(h)}},_onPreDragWrap:function(){var h=this._worldWidth,S=Math.round(h/2),V=this._initialWorldOffset,te=this._draggable._newPos.x,fe=(te-S+V)%h+S-V,Ne=(te+S+V)%h-S-V,Pt=Math.abs(fe+V)<Math.abs(Ne+V)?fe:Ne;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Pt},_onDragEnd:function(h){var S=this._map,V=S.options,te=!V.inertia||h.noInertia||this._times.length<2;if(S.fire("dragend",h),te)S.fire("moveend");else{this._prunePositions(+new Date);var fe=this._lastPos.subtract(this._positions[0]),Pt=V.easeLinearity,Jt=fe.multiplyBy(Pt/((this._lastTime-this._times[0])/1e3)),_i=Jt.distanceTo([0,0]),Zi=Math.min(V.inertiaMaxSpeed,_i),kn=Jt.multiplyBy(Zi/_i),Ln=Zi/(V.inertiaDeceleration*Pt),cr=kn.multiplyBy(-Ln/2).round();cr.x||cr.y?(cr=S._limitOffset(cr,S.options.maxBounds),Nt(function(){S.panBy(cr,{duration:Ln,easeLinearity:Pt,noMoveStart:!0,animate:!0})})):S.fire("moveend")}}});lr.addInitHook("addHandler","dragging",ts),lr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wl=lo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(h){this._map=h,this._setPanDelta(h.options.keyboardPanDelta),this._setZoomDelta(h.options.zoomDelta)},addHooks:function(){var h=this._map._container;h.tabIndex<=0&&(h.tabIndex="0"),Un(h,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var h=document.body,S=document.documentElement,V=h.scrollTop||S.scrollTop,te=h.scrollLeft||S.scrollLeft;this._map._container.focus(),window.scrollTo(te,V)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var te,fe,S=this._panKeys={},V=this.keyCodes;for(te=0,fe=V.left.length;te<fe;te++)S[V.left[te]]=[-1*h,0];for(te=0,fe=V.right.length;te<fe;te++)S[V.right[te]]=[h,0];for(te=0,fe=V.down.length;te<fe;te++)S[V.down[te]]=[0,h];for(te=0,fe=V.up.length;te<fe;te++)S[V.up[te]]=[0,-1*h]},_setZoomDelta:function(h){var te,fe,S=this._zoomKeys={},V=this.keyCodes;for(te=0,fe=V.zoomIn.length;te<fe;te++)S[V.zoomIn[te]]=h;for(te=0,fe=V.zoomOut.length;te<fe;te++)S[V.zoomOut[te]]=-h},_addHooks:function(){Un(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var te,S=h.keyCode,V=this._map;if(S in this._panKeys){if(!V._panAnim||!V._panAnim._inProgress)if(te=this._panKeys[S],h.shiftKey&&(te=Yi(te).multiplyBy(3)),V.options.maxBounds&&(te=V._limitOffset(Yi(te),V.options.maxBounds)),V.options.worldCopyJump){var fe=V.wrapLatLng(V.unproject(V.project(V.getCenter()).add(te)));V.panTo(fe)}else V.panBy(te)}else if(S in this._zoomKeys)V.setZoom(V.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[S]);else{if(27!==S||!V._popup||!V._popup.options.closeOnEscapeKey)return;V.closePopup()}eo(h)}}});lr.addInitHook("addHandler","keyboard",wl),lr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bo=lo.extend({addHooks:function(){Un(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var S=dl(h),V=this._map.options.wheelDebounceTime;this._delta+=S,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var te=Math.max(V-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e(this._performZoom,this),te),eo(h)},_performZoom:function(){var h=this._map,S=h.getZoom(),V=this._map.options.zoomSnap||0;h._stop();var fe=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,Ne=V?Math.ceil(fe/V)*V:fe,Pt=h._limitZoom(S+(this._delta>0?Ne:-Ne))-S;this._delta=0,this._startTime=null,Pt&&("center"===h.options.scrollWheelZoom?h.setZoom(S+Pt):h.setZoomAround(this._lastMousePos,S+Pt))}});lr.addInitHook("addHandler","scrollWheelZoom",bo);lr.mergeOptions({tapHold:je.touchNative&&je.safari&&je.mobile,tapTolerance:15});var Xs=lo.extend({addHooks:function(){Un(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(h){if(clearTimeout(this._holdTimeout),1===h.touches.length){var S=h.touches[0];this._startPos=this._newPos=new fi(S.clientX,S.clientY),this._holdTimeout=setTimeout(e(function(){this._cancel(),this._isTapValid()&&(Un(document,"touchend",Fr),Un(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",S))},this),600),Un(document,"touchend touchcancel contextmenu",this._cancel,this),Un(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function h(){Yn(document,"touchend",Fr),Yn(document,"touchend touchcancel",h)},_cancel:function(){clearTimeout(this._holdTimeout),Yn(document,"touchend touchcancel contextmenu",this._cancel,this),Yn(document,"touchmove",this._onMove,this)},_onMove:function(h){var S=h.touches[0];this._newPos=new fi(S.clientX,S.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(h,S){var V=new MouseEvent(h,{bubbles:!0,cancelable:!0,view:window,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY});V._simulated=!0,S.target.dispatchEvent(V)}});lr.addInitHook("addHandler","tapHold",Xs),lr.mergeOptions({touchZoom:je.touch,bounceAtZoomLimits:!0});var jr=lo.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),Un(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),Yn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(h){var S=this._map;if(h.touches&&2===h.touches.length&&!S._animatingZoom&&!this._zooming){var V=S.mouseEventToContainerPoint(h.touches[0]),te=S.mouseEventToContainerPoint(h.touches[1]);this._centerPoint=S.getSize()._divideBy(2),this._startLatLng=S.containerPointToLatLng(this._centerPoint),"center"!==S.options.touchZoom&&(this._pinchStartLatLng=S.containerPointToLatLng(V.add(te)._divideBy(2))),this._startDist=V.distanceTo(te),this._startZoom=S.getZoom(),this._moved=!1,this._zooming=!0,S._stop(),Un(document,"touchmove",this._onTouchMove,this),Un(document,"touchend touchcancel",this._onTouchEnd,this),Fr(h)}},_onTouchMove:function(h){if(h.touches&&2===h.touches.length&&this._zooming){var S=this._map,V=S.mouseEventToContainerPoint(h.touches[0]),te=S.mouseEventToContainerPoint(h.touches[1]),fe=V.distanceTo(te)/this._startDist;if(this._zoom=S.getScaleZoom(fe,this._startZoom),!S.options.bounceAtZoomLimits&&(this._zoom<S.getMinZoom()&&fe<1||this._zoom>S.getMaxZoom()&&fe>1)&&(this._zoom=S._limitZoom(this._zoom)),"center"===S.options.touchZoom){if(this._center=this._startLatLng,1===fe)return}else{var Ne=V._add(te)._divideBy(2)._subtract(this._centerPoint);if(1===fe&&0===Ne.x&&0===Ne.y)return;this._center=S.unproject(S.project(this._pinchStartLatLng,this._zoom).subtract(Ne),this._zoom)}this._moved||(S._moveStart(!0,!1),this._moved=!0),ct(this._animRequest);var Pt=e(S._move,S,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Nt(Pt,this,!0),Fr(h)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,ct(this._animRequest),Yn(document,"touchmove",this._onTouchMove,this),Yn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});lr.addInitHook("addHandler","touchZoom",jr),lr.BoxZoom=nl,lr.DoubleClickZoom=gs,lr.Drag=ts,lr.Keyboard=wl,lr.ScrollWheelZoom=bo,lr.TapHold=Xs,lr.TouchZoom=jr,Ot.Bounds=mn,Ot.Browser=je,Ot.CRS=Hn,Ot.Canvas=Dr,Ot.Circle=Ja,Ot.CircleMarker=Ca,Ot.Class=qt,Ot.Control=Bs,Ot.DivIcon=Ao,Ot.DivOverlay=po,Ot.DomEvent=Rc,Ot.DomUtil=yr,Ot.Draggable=va,Ot.Evented=ai,Ot.FeatureGroup=Ns,Ot.GeoJSON=Ho,Ot.GridLayer=es,Ot.Handler=lo,Ot.Icon=Os,Ot.ImageOverlay=ka,Ot.LatLng=Di,Ot.LatLngBounds=zn,Ot.Layer=yo,Ot.LayerGroup=aa,Ot.LineUtil=xa,Ot.Map=lr,Ot.Marker=ca,Ot.Mixin=Mr,Ot.Path=$s,Ot.Point=fi,Ot.PolyUtil=Ts,Ot.Polygon=ho,Ot.Polyline=uo,Ot.Popup=Go,Ot.PosAnimation=pl,Ot.Projection=Yo,Ot.Rectangle=xs,Ot.Renderer=jo,Ot.SVG=xo,Ot.SVGOverlay=vl,Ot.TileLayer=za,Ot.Tooltip=Fl,Ot.Transformation=gr,Ot.Util=Vt,Ot.VideoOverlay=Ea,Ot.bind=e,Ot.bounds=ln,Ot.canvas=bl,Ot.circle=function Jl(h,S,V){return new Ja(h,S,V)},Ot.circleMarker=function Io(h,S){return new Ca(h,S)},Ot.control=Ps,Ot.divIcon=function il(h){return new Ao(h)},Ot.extend=sn,Ot.featureGroup=function(h,S){return new Ns(h,S)},Ot.geoJSON=tl,Ot.geoJson=zl,Ot.gridLayer=function Rs(h){return new es(h)},Ot.icon=function la(h){return new Os(h)},Ot.imageOverlay=function(h,S,V){return new ka(h,S,V)},Ot.latLng=qi,Ot.latLngBounds=jt,Ot.layerGroup=function(h,S){return new aa(h,S)},Ot.map=function gc(h,S){return new lr(h,S)},Ot.marker=function Rl(h,S){return new ca(h,S)},Ot.point=Yi,Ot.polygon=function Bc(h,S){return new ho(h,S)},Ot.polyline=function _c(h,S){return new uo(h,S)},Ot.popup=function(h,S){return new Go(h,S)},Ot.rectangle=function Ws(h,S){return new xs(h,S)},Ot.setOptions=dt,Ot.stamp=Ae,Ot.svg=Ba,Ot.svgOverlay=function Nc(h,S,V){return new vl(h,S,V)},Ot.tileLayer=Sa,Ot.tooltip=function(h,S){return new Fl(h,S)},Ot.transformation=tr,Ot.version="1.9.4",Ot.videoOverlay=function Ql(h,S,V){return new Ea(h,S,V)};var en=window.L;Ot.noConflict=function(){return window.L=en,this},window.L=Ot}(Lr)},4448:function(Qs){Qs.exports=function(){"use strict";var Lr,Ot,A;function sn(e,Y){if(Lr)if(Ot){var Ae="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Lr+")(sharedChunk); ("+Ot+")(sharedChunk); self.onerror = null;",ke={};Lr(ke),A=Y(ke),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(A.workerUrl=window.URL.createObjectURL(new Blob([Ae],{type:"text/javascript"})))}else Ot=Y;else Lr=Y}return sn(0,function(e){var Y=typeof self<"u"?self:{},Ae="2.15.0";let ke;const Ee={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==ke){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ke=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):r}catch{ke=r}}return ke},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ee.API_URL)return null;try{const r=new URL(Ee.API_URL);return"api.mapbox.cn"===r.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===r.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Oe={supported:!1,testSupport:function(r){!et&&Xe&&(dt?St(r):Ye=r)}};let Ye,Xe,et=!1,dt=!1;function St(r){const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Xe),r.isContextLost())return;Oe.supported=!0}catch{}r.deleteTexture(t),et=!0}Y.document&&(Xe=Y.document.createElement("img"),Xe.onload=function(){Ye&&St(Ye),Ye=null,dt=!0},Xe.onerror=function(){et=!0,Ye=null},Xe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const it="01";function pt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yt=Qt;function Qt(r,t,o,u){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=o,this.p2y=u}Qt.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(void 0===t&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var o=r,u=0;u<8;u++){var m=this.sampleCurveX(o)-r;if(Math.abs(m)<t)return o;var w=this.sampleCurveDerivativeX(o);if(Math.abs(w)<1e-6)break;o-=m/w}var E=0,P=1;for(o=r,u=0;u<20&&(m=this.sampleCurveX(o),!(Math.abs(m-r)<t));u++)r>m?E=o:P=o,o=.5*(P-E)+E;return o},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};var Ve=pt(yt),Zt=ei;function ei(r,t){this.x=r,this.y=t}ei.prototype={clone:function(){return new ei(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,o=r.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),o=Math.sin(r),u=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=u,this},_rotateAround:function(r,t){var o=Math.cos(r),u=Math.sin(r),m=t.y+u*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-u*(this.y-t.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ei.convert=function(r){return r instanceof ei?r:Array.isArray(r)?new ei(r[0],r[1]):r};var rt=pt(Zt);const Kt=Math.PI/180,Yt=180/Math.PI;function Nt(r){return r*Kt}function ct(r){return r*Yt}const Vt=[[0,0],[1,0],[1,1],[0,1]];function qt(r){if(r<=0)return 0;if(r>=1)return 1;const t=r*r,o=t*r;return 4*(r<.5?o:3*(r-t)+o-.75)}function ri(r,t,o,u){const m=new Ve(r,t,o,u);return function(w){return m.solve(w)}}const Li=ri(.25,.1,.25,1);function ai(r,t,o){return Math.min(o,Math.max(t,r))}function fi(r,t,o){return(o=ai((o-r)/(t-r),0,1))*o*(3-2*o)}function Mi(r,t,o){const u=o-t,m=((r-t)%u+u)%u+t;return m===t?o:m}function Yi(r,t,o){if(!r.length)return o(null,[]);let u=r.length;const m=new Array(r.length);let w=null;r.forEach((E,P)=>{t(E,(B,G)=>{B&&(w=B),m[P]=G,0==--u&&o(w,m)})})}function mn(r){const t=[];for(const o in r)t.push(r[o]);return t}function ln(r,...t){for(const o of t)for(const u in o)r[u]=o[u];return r}let zn=1;function jt(){return zn++}function Di(){return function r(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function qi(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Hn(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Rn(r,t){r.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function xn(r,t){return-1!==r.indexOf(t,r.length-t.length)}function Pi(r,t,o){const u={};for(const m in r)u[m]=t.call(o||this,r[m],m,r);return u}function gr(r,t,o){const u={};for(const m in r)t.call(o||this,r[m],m,r)&&(u[m]=r[m]);return u}function tr(r){return Array.isArray(r)?r.map(tr):"object"==typeof r&&r?Pi(r,tr):r}const qn={};function hn(r){qn[r]||(typeof console<"u"&&console.warn(r),qn[r]=!0)}function Ui(r,t,o){return(o.y-r.y)*(t.x-r.x)>(t.y-r.y)*(o.x-r.x)}function cn(r){let t=0;for(let o,u,m=0,w=r.length,E=w-1;m<w;E=m++)o=r[m],u=r[E],t+=(u.x-o.x)*(o.y+u.y);return t}function Vi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Oi(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,m,w)=>{const E=m||w;return t[u]=!E||E.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let Bn=null;function $i(r){if(null==Bn){const t=r.navigator?r.navigator.userAgent:null;Bn=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Bn}function gi(r){try{const t=Y[r];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}function un(r,t){return[r[4*t],r[4*t+1],r[4*t+2],r[4*t+3]]}const Mn="mapbox-tiles";let xr,_r,Tr=500,kr=50;function ir(){try{return Y.caches}catch{}}function yn(){ir()&&!xr&&(xr=Y.caches.open(Mn))}function qr(r){const t=r.indexOf("?");if(t<0)return r;const u=function(m){const w=m.indexOf("?");return w>0?m.slice(w+1).split("&"):[]}(r).filter(m=>{const w=m.split("=");return"language"===w[0]||"worldview"===w[0]});return u.length?`${r.slice(0,t)}?${u.join("&")}`:r.slice(0,t)}let Sr=1/0;const ys={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ys);class Kn extends Error{constructor(t,o,u){401===o&&Ht(u)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=o,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const fr=Vi()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Y.location.protocol?Y.parent:Y).location.href,sr=function(r,t){if(!(/^file:/.test(o=r.url)||/^file:/.test(fr())&&!/^\w+:/.test(o))){if(Y.fetch&&Y.Request&&Y.AbortController&&Y.Request.prototype.hasOwnProperty("signal"))return function(u,m){const w=new Y.AbortController,E=new Y.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:fr(),referrerPolicy:u.referrerPolicy,signal:w.signal});let P=!1,B=!1;const G=(J=E.url).indexOf("sku=")>0&&Ht(J);var J;"json"===u.type&&E.headers.set("Accept","application/json");const ie=(pe,ge,Se)=>{if(B)return;if(pe&&"SecurityError"!==pe.message&&hn(pe.toString()),ge&&Se)return se(ge);const Ge=Date.now();Y.fetch(E).then(lt=>{if(lt.ok){const Et=G?lt.clone():null;return se(lt,Et,Ge)}return m(new Kn(lt.statusText,lt.status,u.url))}).catch(lt=>{"AbortError"!==lt.name&&m(new Error(`${lt.message} ${u.url}`))})},se=(pe,ge,Se)=>{("arrayBuffer"===u.type?pe.arrayBuffer():"json"===u.type?pe.json():pe.text()).then(Ge=>{B||(ge&&Se&&function(lt,Et,ut){if(yn(),!xr)return;const Ct={status:Et.status,statusText:Et.statusText,headers:new Y.Headers};Et.headers.forEach((ui,ii)=>Ct.headers.set(ii,ui));const At=Oi(Et.headers.get("Cache-Control")||"");if(At["no-store"])return;At["max-age"]&&Ct.headers.set("Expires",new Date(ut+1e3*At["max-age"]).toUTCString());const Lt=Ct.headers.get("Expires");Lt&&(new Date(Lt).getTime()-ut<42e4||function(ui,ii){if(void 0===_r)try{new Response(new ReadableStream),_r=!0}catch{_r=!1}_r?ii(ui.body):ui.blob().then(ii)}(Et,ui=>{const ii=new Y.Response(ui,Ct);yn(),xr&&xr.then(Ci=>Ci.put(qr(lt.url),ii)).catch(Ci=>hn(Ci.message))}))}(E,ge,Se),P=!0,m(null,Ge,pe.headers.get("Cache-Control"),pe.headers.get("Expires")))}).catch(Ge=>{B||m(new Error(Ge.message))})};return G?function(pe,ge){if(yn(),!xr)return ge(null);const Se=qr(pe.url);xr.then(Ge=>{Ge.match(Se).then(lt=>{const Et=function(ut){if(!ut)return!1;const Ct=new Date(ut.headers.get("Expires")||0),At=Oi(ut.headers.get("Cache-Control")||"");return Ct>Date.now()&&!At["no-cache"]}(lt);Ge.delete(Se),Et&&Ge.put(Se,lt.clone()),ge(null,lt,Et)}).catch(ge)}).catch(ge)}(E,ie):ie(null,null),{cancel:()=>{B=!0,P||w.abort()}}}(r,t);if(Vi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,t,void 0,!0)}var o;return function(u,m){const w=new Y.XMLHttpRequest;w.open(u.method||"GET",u.url,!0),"arrayBuffer"===u.type&&(w.responseType="arraybuffer");for(const E in u.headers)w.setRequestHeader(E,u.headers[E]);return"json"===u.type&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials="include"===u.credentials,w.onerror=()=>{m(new Error(w.statusText))},w.onload=()=>{if((w.status>=200&&w.status<300||0===w.status)&&null!==w.response){let E=w.response;if("json"===u.type)try{E=JSON.parse(w.response)}catch(P){return m(P)}m(null,E,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else m(new Kn(w.statusText,w.status,u.url))},w.send(u.body),{cancel:()=>w.abort()}}(r,t)},vr=function(r,t){return sr(ln(r,{type:"arrayBuffer"}),t)};function Yr(r){const t=Y.document.createElement("a");return t.href=r,t.protocol===Y.document.location.protocol&&t.host===Y.document.location.host}const xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let De,ze;De=[],ze=0;const at=function(r,t){if(Oe.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),ze>=Ee.MAX_PARALLEL_IMAGE_REQUESTS){const w={requestParameters:r,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return De.push(w),w}ze++;let o=!1;const u=()=>{if(!o)for(o=!0,ze--;De.length&&ze<Ee.MAX_PARALLEL_IMAGE_REQUESTS;){const w=De.shift(),{requestParameters:E,callback:P,cancelled:B}=w;B||(w.cancel=at(E,P).cancel)}},m=vr(r,(w,E,P,B)=>{u(),w?t(w):E&&(Y.createImageBitmap?function(G,J){const ie=new Y.Blob([new Uint8Array(G)],{type:"image/png"});Y.createImageBitmap(ie).then(se=>{J(null,se)}).catch(se=>{J(new Error(`Could not load image because of ${se.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(E,(G,J)=>t(G,J,P,B)):function(G,J){const ie=new Y.Image,se=Y.URL;ie.onload=()=>{J(null,ie),se.revokeObjectURL(ie.src),ie.onload=null,Y.requestAnimationFrame(()=>{ie.src=xt})},ie.onerror=()=>J(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const pe=new Y.Blob([new Uint8Array(G)],{type:"image/png"});ie.src=G.byteLength?se.createObjectURL(pe):xt}(E,(G,J)=>t(G,J,P,B)))});return{cancel:()=>{m.cancel(),u()}}},st="NO_ACCESS_TOKEN";function It(r){return 0===r.indexOf("mapbox:")}function Ht(r){return Ee.API_URL_REGEX.test(r)}function Gt(r){return Ee.API_CDN_URL_REGEX.test(r)}function Ie(r){return Ee.API_STYLE_REGEX.test(r)&&!He(r)}function He(r){return Ee.API_SPRITE_REGEX.test(r)}const Pe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function bt(r){const t=r.match(Pe);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Mt(r){const t=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${t}`}const xi="mapbox.eventData";function Ke(r){if(!r)return null;const t=r.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(Y.atob(t[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ot{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const o=Ke(Ee.ACCESS_TOKEN);let u="";return u=o&&o.u?Y.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(m,w)=>String.fromCharCode(+("0x"+w)))):Ee.ACCESS_TOKEN||"",t?`${xi}.${t}:${u}`:`${xi}:${u}`}fetchEventData(){const t=gi("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(t)try{const m=Y.localStorage.getItem(o);m&&(this.eventData=JSON.parse(m));const w=Y.localStorage.getItem(u);w&&(this.anonId=w)}catch{hn("Unable to read from LocalStorage")}}saveEventData(){const t=gi("localStorage"),o=this.getStorageKey(),u=this.getStorageKey("uuid");if(t)try{Y.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&Y.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{hn("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,o,u,m){if(!Ee.EVENTS_URL)return;const w=bt(Ee.EVENTS_URL);w.params.push(`access_token=${m||Ee.ACCESS_TOKEN||""}`);const E={event:this.type,created:new Date(t).toISOString()},P=o?ln(E,o):E,B={url:Mt(w),headers:{"Content-Type":"text/plain"},body:JSON.stringify([P])};var J;this.pendingRequest=(J=G=>{this.pendingRequest=null,u(G),this.saveEventData(),this.processRequests(m)},sr(ln(B,{method:"POST"}),J))}queueRequest(t,o){this.queue.push(t),this.processRequests(o)}}const Ue=new class extends ot{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,t){Ee.EVENTS_URL&&Ee.ACCESS_TOKEN&&Array.isArray(r)&&r.some(o=>It(o)||Ht(o))&&this.queueRequest(Date.now(),t)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ke(Ee.ACCESS_TOKEN),o=t?t.u:Ee.ACCESS_TOKEN;let u=o!==this.eventData.tokenU;Hn(this.anonId)||(this.anonId=Di(),u=!0);const m=this.queue.shift();if(this.eventData.lastSuccess){const w=new Date(this.eventData.lastSuccess),E=new Date(m),P=(m-this.eventData.lastSuccess)/864e5;u=u||P>=1||P<-1||w.getDate()!==E.getDate()}else u=!0;u?this.postEvent(m,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Ae,skuId:it,"enabled.telemetry":!1,userId:this.anonId},w=>{w||(this.eventData.lastSuccess=m,this.eventData.tokenU=o)},r):this.processRequests()}},je=Ue.postTurnstileEvent.bind(Ue),Le=new class extends ot{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,t,o,u){this.skuToken=t,this.errorCb=u,Ee.EVENTS_URL&&(o||Ee.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(st)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:o}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),Hn(this.anonId)||(this.anonId=Di()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Ae,skuId:it,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):t&&(this.success[t]=!0)},r))}},Fe=Le.postMapLoadEvent.bind(Le),ht=new class extends ot{constructor(){super("gljs.performance")}postPerformanceEvent(r,t){Ee.EVENTS_URL&&(r||Ee.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},r)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:t,performanceData:o}=this.queue.shift(),u=function(m){const w=Y.performance.getEntriesByType("resource"),E=Y.performance.getEntriesByType("mark"),P=function(se){const pe={};if(se)for(const ge in se)if("other"!==ge)for(const Se of se[ge]){const Ge=`${ge}ResolveRangeMin`,lt=`${ge}ResolveRangeMax`,Et=`${ge}RequestCount`,ut=`${ge}RequestCachedCount`;pe[Ge]=Math.min(pe[Ge]||1/0,Se.startTime),pe[lt]=Math.max(pe[lt]||-1/0,Se.responseEnd);const Ct=At=>{void 0===pe[At]&&(pe[At]=0),++pe[At]};void 0!==Se.transferSize&&0===Se.transferSize&&Ct(ut),Ct(Et)}return pe}(function(se,pe){const ge={};if(se)for(const Se of se){const Ge=pe(Se);void 0===ge[Ge]&&(ge[Ge]=[]),ge[Ge].push(Se)}return ge}(w,Tn)),B=Y.devicePixelRatio,G=Y.navigator.connection||Y.navigator.mozConnection||Y.navigator.webkitConnection,J={counters:[],metadata:[],attributes:[]},ie=(se,pe,ge)=>{null!=ge&&se.push({name:pe,value:ge.toString()})};for(const se in P)ie(J.counters,se,P[se]);if(m.interactionRange[0]!==1/0&&m.interactionRange[1]!==-1/0&&(ie(J.counters,"interactionRangeMin",m.interactionRange[0]),ie(J.counters,"interactionRangeMax",m.interactionRange[1])),E)for(const se of Object.keys(Qi)){const pe=Qi[se],ge=E.find(Se=>Se.name===pe);ge&&ie(J.counters,pe,ge.startTime)}return ie(J.counters,"visibilityHidden",m.visibilityHidden),ie(J.attributes,"style",function(se){if(se)for(const pe of se){const ge=pe.name.split("?")[0];if(Ie(ge)){const Se=ge.split("/").slice(-2);if(2===Se.length)return`mapbox://styles/${Se[0]}/${Se[1]}`}}}(w)),ie(J.attributes,"terrainEnabled",m.terrainEnabled?"true":"false"),ie(J.attributes,"fogEnabled",m.fogEnabled?"true":"false"),ie(J.attributes,"projection",m.projection),ie(J.attributes,"zoom",m.zoom),ie(J.metadata,"devicePixelRatio",B),ie(J.metadata,"connectionEffectiveType",G?G.effectiveType:void 0),ie(J.metadata,"navigatorUserAgent",Y.navigator.userAgent),ie(J.metadata,"screenWidth",Y.screen.width),ie(J.metadata,"screenHeight",Y.screen.height),ie(J.metadata,"windowWidth",Y.innerWidth),ie(J.metadata,"windowHeight",Y.innerHeight),ie(J.metadata,"mapWidth",m.width/B),ie(J.metadata,"mapHeight",m.height/B),ie(J.metadata,"webglRenderer",m.renderer),ie(J.metadata,"webglVendor",m.vendor),ie(J.metadata,"sdkVersion",Ae),ie(J.metadata,"sdkIdentifier","mapbox-gl-js"),J}(o);for(const m of u.metadata);for(const m of u.counters);for(const m of u.attributes);this.postEvent(t,u,()=>{},r)}},Rt=ht.postPerformanceEvent.bind(ht),pi=new class extends ot{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,t,o,u){if(!Ee.API_URL||!Ee.SESSION_PATH)return;const m=bt(Ee.API_URL+Ee.SESSION_PATH);m.params.push(`sku=${t||""}`),m.params.push(`access_token=${u||Ee.ACCESS_TOKEN||""}`);const w={url:Mt(m),headers:{"Content-Type":"text/plain"}};var P;this.pendingRequest=(P=E=>{this.pendingRequest=null,o(E),this.saveEventData(),this.processRequests(u)},sr(ln(w,{method:"GET"}),P))}getSessionAPI(r,t,o,u){this.skuToken=t,this.errorCb=u,Ee.SESSION_PATH&&Ee.API_URL&&(o||Ee.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(st)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:o}=this.queue.shift();t&&this.success[t]||this.getSession(o,this.skuToken,u=>{u?this.errorCb(u):t&&(this.success[t]=!0)},r)}},si=pi.getSessionAPI.bind(pi),Si=new Set,Qi={create:"create",load:"load",fullLoad:"fullLoad"},Bi={mark(r){Y.performance.mark(r)},measure(r,t,o){Y.performance.measure(r,t,o)}};function Tn(r){const t=r.name.split("?")[0];return Gt(t)&&t.includes("mapbox-gl.js")?"javascript":Gt(t)&&t.includes("mapbox-gl.css")?"css":Ee.API_FONTS_REGEX.test(t)?"fontRange":He(t)?"sprite":Ie(t)?"style":Ee.API_TILEJSON_REGEX.test(t)?"tilejson":"other"}const Dn=Y.performance;function In(r){const t=r?r.url.toString():void 0;return Dn.getEntriesByName(t)}let tt,di,ue,n;const s={now:()=>void 0!==ue?ue:Y.performance.now(),setNow(r){ue=r},restoreNow(){ue=void 0},frame(r){const t=Y.requestAnimationFrame(r);return{cancel:()=>Y.cancelAnimationFrame(t)}},getImageData(r,t=0){const{width:o,height:u}=r;n||(n=Y.document.createElement("canvas"));const m=n.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return(o>n.width||u>n.height)&&(n.width=o,n.height=u),m.clearRect(-t,-t,o+2*t,u+2*t),m.drawImage(r,0,0,o,u),m.getImageData(-t,-t,o+2*t,u+2*t)},resolveURL:r=>(tt||(tt=Y.document.createElement("a")),tt.href=r,tt.href),get devicePixelRatio(){return Y.devicePixelRatio},get prefersReducedMotion(){return!!Y.matchMedia&&(null==di&&(di=Y.matchMedia("(prefers-reduced-motion: reduce)")),di.matches)}};function c(r,t,o){o[r]&&-1!==o[r].indexOf(t)||(o[r]=o[r]||[],o[r].push(t))}function g(r,t,o){if(o&&o[r]){const u=o[r].indexOf(t);-1!==u&&o[r].splice(u,1)}}class y{constructor(t,o={}){ln(this,o),this.type=t}}class x extends y{constructor(t,o={}){super("error",ln({error:t},o))}}class k{on(t,o){return this._listeners=this._listeners||{},c(t,o,this._listeners),this}off(t,o){return g(t,o,this._listeners),g(t,o,this._oneTimeListeners),this}once(t,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},c(t,o,this._oneTimeListeners),this):new Promise(u=>this.once(t,u))}fire(t,o){"string"==typeof t&&(t=new y(t,o||{}));const u=t.type;if(this.listens(u)){t.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const P of m)P.call(this,t);const w=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const P of w)g(u,P,this._oneTimeListeners),P.call(this,t);const E=this._eventedParent;E&&(ln(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),E.fire(t))}else t instanceof x&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var M=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function R(r,...t){for(const o of t)for(const u in o)r[u]=o[u];return r}function j(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function U(r){if(Array.isArray(r))return r.map(U);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const o in r)t[o]=U(r[o]);return t}return j(r)}class X extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}var ee=X;class ae{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[u,m]of o)this.bindings[u]=m}concat(t){return new ae(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var de=ae;const ve={kind:"null"},he={kind:"number"},be={kind:"string"},F={kind:"boolean"},K={kind:"color"},ce={kind:"object"},_e={kind:"value"},Me={kind:"collator"},$e={kind:"formatted"},wt={kind:"resolvedImage"};function kt(r,t){return{kind:"array",itemType:r,N:t}}function Wt(r){if("array"===r.kind){const t=Wt(r.itemType);return"number"==typeof r.N?`array<${t}, ${r.N}>`:"value"===r.itemType.kind?"array":`array<${t}>`}return r.kind}const hi=[ve,he,be,F,K,$e,ce,kt(_e),wt];function yi(r,t){if("error"===t.kind)return null;if("array"===r.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!yi(r.itemType,t.itemType))&&("number"!=typeof r.N||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if("value"===r.kind)for(const o of hi)if(!yi(o,t))return null}return`Expected ${Wt(r)} but found ${Wt(t)} instead.`}function rn(r,t){return t.some(o=>o.kind===r.kind)}function gn(r,t){return t.some(o=>"null"===o?null===r:"array"===o?Array.isArray(r):"object"===o?r&&!Array.isArray(r)&&"object"==typeof r:o===typeof r)}var An,$n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Jn(r){return(r=Math.round(r))<0?0:r>255?255:r}function Qn(r){return Jn("%"===r[r.length-1]?parseFloat(r)/100*255:parseInt(r))}function wr(r){return(t="%"===r[r.length-1]?parseFloat(r)/100:parseFloat(r))<0?0:t>1?1:t;var t}function Pr(r,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?r+(t-r)*o*6:2*o<1?t:3*o<2?r+(t-r)*(2/3-o)*6:r}try{An={}.parseCSSColor=function(r){var t,o=r.replace(/ /g,"").toLowerCase();if(o in $n)return $n[o].slice();if("#"===o[0])return 4===o.length?(t=parseInt(o.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===o.length&&(t=parseInt(o.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=o.indexOf("("),m=o.indexOf(")");if(-1!==u&&m+1===o.length){var w=o.substr(0,u),E=o.substr(u+1,m-(u+1)).split(","),P=1;switch(w){case"rgba":if(4!==E.length)return null;P=wr(E.pop());case"rgb":return 3!==E.length?null:[Qn(E[0]),Qn(E[1]),Qn(E[2]),P];case"hsla":if(4!==E.length)return null;P=wr(E.pop());case"hsl":if(3!==E.length)return null;var B=(parseFloat(E[0])%360+360)%360/360,G=wr(E[1]),J=wr(E[2]),ie=J<=.5?J*(G+1):J+G-J*G,se=2*J-ie;return[Jn(255*Pr(se,ie,B+1/3)),Jn(255*Pr(se,ie,B)),Jn(255*Pr(se,ie,B-1/3)),P];default:return null}}return null}}catch{}class Rr{constructor(t,o,u,m=1){this.r=t,this.g=o,this.b=u,this.a=m}static parse(t){if(!t)return;if(t instanceof Rr)return t;if("string"!=typeof t)return;const o=An(t);return o?new Rr(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[t,o,u,m]=this.toArray();return`rgba(${Math.round(t)},${Math.round(o)},${Math.round(u)},${m})`}toArray(){const{r:t,g:o,b:u,a:m}=this;return 0===m?[0,0,0,0]:[255*t/m,255*o/m,255*u/m,m]}toArray01(){const{r:t,g:o,b:u,a:m}=this;return 0===m?[0,0,0,0]:[t/m,o/m,u/m,m]}toArray01PremultipliedAlpha(){const{r:t,g:o,b:u,a:m}=this;return[t,o,u,m]}}Rr.black=new Rr(0,0,0,1),Rr.white=new Rr(1,1,1,1),Rr.transparent=new Rr(0,0,0,0),Rr.red=new Rr(1,0,0,1),Rr.blue=new Rr(0,0,1,1);var yr=Rr;class Un{constructor(t,o,u){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Wr{constructor(t,o,u,m,w){this.text=t.normalize?t.normalize():t,this.image=o,this.scale=u,this.fontStack=m,this.textColor=w}}class Yn{constructor(t){this.sections=t}static fromString(t){return new Yn([new Wr(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof Yn?t:Yn.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const o of this.sections){if(o.image){t.push(["image",o.image.name]);continue}t.push(o.text);const u={};o.fontStack&&(u["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(u["font-scale"]=o.scale),o.textColor&&(u["text-color"]=["rgba"].concat(o.textColor.toArray())),t.push(u)}return t}}class zr{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new zr({name:t,available:!1}):null}serialize(){return["image",this.name]}}function qa(r,t,o,u){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof o&&o>=0&&o<=255?void 0===u||"number"==typeof u&&u>=0&&u<=1?null:`Invalid rgba value [${[r,t,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof u?[r,t,o,u]:[r,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sa(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof yr||r instanceof Un||r instanceof Yn||r instanceof zr)return!0;if(Array.isArray(r)){for(const t of r)if(!sa(t))return!1;return!0}if("object"==typeof r){for(const t in r)if(!sa(r[t]))return!1;return!0}return!1}function Kr(r){if(null===r)return ve;if("string"==typeof r)return be;if("boolean"==typeof r)return F;if("number"==typeof r)return he;if(r instanceof yr)return K;if(r instanceof Un)return Me;if(r instanceof Yn)return $e;if(r instanceof zr)return wt;if(Array.isArray(r)){const t=r.length;let o;for(const u of r){const m=Kr(u);if(o){if(o===m)continue;o=_e;break}o=m}return kt(o||_e,t)}return ce}function So(r){const t=typeof r;return null===r?"":"string"===t||"number"===t||"boolean"===t?String(r):r instanceof yr||r instanceof Yn||r instanceof zr?r.toString():JSON.stringify(r)}class Dl{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(2!==t.length)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!sa(t[1]))return o.error("invalid value");const u=t[1];let m=Kr(u);const w=o.expectedType;return"array"!==m.kind||0!==m.N||!w||"array"!==w.kind||"number"==typeof w.N&&0!==w.N||(m=w),new Dl(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof yr?["rgba"].concat(this.value.toArray()):this.value instanceof Yn?this.value.serialize():this.value}}var go=Dl,Fr=class{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}};const eo={string:be,number:he,boolean:F,object:ce};class Zl{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let u,m=1;const w=t[0];if("array"===w){let P,B;if(t.length>2){const G=t[1];if("string"!=typeof G||!(G in eo)||"object"===G)return o.error('The item type argument of "array" must be one of string, number, boolean',1);P=eo[G],m++}else P=_e;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);B=t[2],m++}u=kt(P,B)}else u=eo[w];const E=[];for(;m<t.length;m++){const P=o.parse(t[m],m,_e);if(!P)return null;E.push(P)}return new Zl(u,E)}evaluate(t){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(t);if(!yi(this.type,Kr(u)))return u;if(o===this.args.length-1)throw new Fr(`Expected value to be of type ${Wt(this.type)}, but found ${Wt(Kr(u))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,o=[t.kind];if("array"===t.kind){const u=t.itemType;if("string"===u.kind||"number"===u.kind||"boolean"===u.kind){o.push(u.kind);const m=t.N;("number"==typeof m||this.args.length>1)&&o.push(m)}}return o.concat(this.args.map(u=>u.serialize()))}}var _a=Zl;class zo{constructor(t){this.type=$e,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&"object"==typeof u)return o.error("First argument must be an image or text section.");const m=[];let w=!1;for(let E=1;E<=t.length-1;++E){const P=t[E];if(w&&"object"==typeof P&&!Array.isArray(P)){w=!1;let B=null;if(P["font-scale"]&&(B=o.parse(P["font-scale"],1,he),!B))return null;let G=null;if(P["text-font"]&&(G=o.parse(P["text-font"],1,kt(be)),!G))return null;let J=null;if(P["text-color"]&&(J=o.parse(P["text-color"],1,K),!J))return null;const ie=m[m.length-1];ie.scale=B,ie.font=G,ie.textColor=J}else{const B=o.parse(t[E],1,_e);if(!B)return null;const G=B.type.kind;if("string"!==G&&"value"!==G&&"null"!==G&&"resolvedImage"!==G)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,m.push({content:B,scale:null,font:null,textColor:null})}}return new zo(m)}evaluate(t){return new Yn(this.sections.map(o=>{const u=o.content.evaluate(t);return Kr(u)===wt?new Wr("",u,null,null,null):new Wr(So(u),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const o of this.sections){t.push(o.content.serialize());const u={};o.scale&&(u["font-scale"]=o.scale.serialize()),o.font&&(u["text-font"]=o.font.serialize()),o.textColor&&(u["text-color"]=o.textColor.serialize()),t.push(u)}return t}}class dl{constructor(t){this.type=wt,this.input=t}static parse(t,o){if(2!==t.length)return o.error("Expected two arguments.");const u=o.parse(t[1],1,be);return u?new dl(u):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),u=zr.fromString(o);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(o)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const mc={"to-boolean":F,"to-color":K,"to-number":he,"to-string":be};class Rc{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[0];if(("to-boolean"===u||"to-string"===u)&&2!==t.length)return o.error("Expected one argument.");const m=mc[u],w=[];for(let E=1;E<t.length;E++){const P=o.parse(t[E],E,_e);if(!P)return null;w.push(P)}return new Rc(m,w)}evaluate(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){let o,u;for(const m of this.args){if(o=m.evaluate(t),u=null,o instanceof yr)return o;if("string"==typeof o){const w=t.parseColor(o);if(w)return w}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:qa(o[0],o[1],o[2],o[3]),!u))return new yr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Fr(u||`Could not parse color from value '${"string"==typeof o?o:String(JSON.stringify(o))}'`)}if("number"===this.type.kind){let o=null;for(const u of this.args){if(o=u.evaluate(t),null===o)return 0;const m=Number(o);if(!isNaN(m))return m}throw new Fr(`Could not convert ${JSON.stringify(o)} to number.`)}return"formatted"===this.type.kind?Yn.fromString(So(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?zr.fromString(So(this.args[0].evaluate(t))):So(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new zo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new dl(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(o=>{t.push(o.serialize())}),t}}var pl=Rc;const lr=["Unknown","Point","LineString","Polygon"];var gc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?lr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:o,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(o*t-r[0])+this.featureDistanceData.bearing[1]*(u*t-r[1])}return 0}parseColor(r){let t=this._parseColorCache[r];return t||(t=this._parseColorCache[r]=yr.parse(r)),t}};class Bs{constructor(t,o,u,m){this.name=t,this.type=o,this._evaluate=u,this.args=m}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,o){const u=t[0],m=Bs.definitions[u];if(!m)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(m)?m[0]:m.type,E=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,P=E.filter(([G])=>!Array.isArray(G)||G.length===t.length-1);let B=null;for(const[G,J]of P){B=new Fn(o.registry,o.path,null,o.scope);const ie=[];let se=!1;for(let pe=1;pe<t.length;pe++){const ge=t[pe],Se=Array.isArray(G)?G[pe-1]:G.type,Ge=B.parse(ge,1+ie.length,Se);if(!Ge){se=!0;break}ie.push(Ge)}if(!se)if(Array.isArray(G)&&G.length!==ie.length)B.error(`Expected ${G.length} arguments, but found ${ie.length} instead.`);else{for(let pe=0;pe<ie.length;pe++){const ge=Array.isArray(G)?G[pe]:G.type,Se=ie[pe];B.concat(pe+1).checkSubtype(ge,Se.type)}if(0===B.errors.length)return new Bs(u,w,J,ie)}}if(1===P.length)o.errors.push(...B.errors);else{const G=(P.length?P:E).map(([ie])=>{return se=ie,Array.isArray(se)?`(${se.map(Wt).join(", ")})`:`(${Wt(se.type)}...)`;var se}).join(" | "),J=[];for(let ie=1;ie<t.length;ie++){const se=o.parse(t[ie],1+J.length);if(!se)return null;J.push(Wt(se.type))}o.error(`Expected arguments of type ${G}, but found (${J.join(", ")}) instead.`)}return null}static register(t,o){Bs.definitions=o;for(const u in o)t[u]=Bs}}var Ps=Bs;class Il{constructor(t,o,u){this.type=Me,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(2!==t.length)return o.error("Expected one argument.");const u=t[1];if("object"!=typeof u||Array.isArray(u))return o.error("Collator options argument must be an object.");const m=o.parse(void 0!==u["case-sensitive"]&&u["case-sensitive"],1,F);if(!m)return null;const w=o.parse(void 0!==u["diacritic-sensitive"]&&u["diacritic-sensitive"],1,F);if(!w)return null;let E=null;return u.locale&&(E=o.parse(u.locale,1,be),!E)?null:new Il(m,w,E)}evaluate(t){return new Un(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Fo=8192;function Ka(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function fl(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function Aa(r,t){const o=(180+r[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,t.z);return[Math.round(o*m*Fo),Math.round(u*m*Fo)]}function zc(r,t,o){const u=r[0]-t[0],m=r[1]-t[1],w=r[0]-o[0],E=r[1]-o[1];return u*E-w*m==0&&u*w<=0&&m*E<=0}function Al(r,t){let o=!1;for(let E=0,P=t.length;E<P;E++){const B=t[E];for(let G=0,J=B.length;G<J-1;G++){if(zc(r,B[G],B[G+1]))return!1;(m=B[G])[1]>(u=r)[1]!=(w=B[G+1])[1]>u[1]&&u[0]<(w[0]-m[0])*(u[1]-m[1])/(w[1]-m[1])+m[0]&&(o=!o)}}var u,m,w;return o}function Bo(r,t){for(let o=0;o<t.length;o++)if(Al(r,t[o]))return!0;return!1}function ml(r,t,o,u){const m=u[0]-o[0],w=u[1]-o[1],E=(r[0]-o[0])*w-m*(r[1]-o[1]),P=(t[0]-o[0])*w-m*(t[1]-o[1]);return E>0&&P<0||E<0&&P>0}function lo(r,t,o){for(const G of o)for(let J=0;J<G.length-1;++J)if((P=[(E=G[J+1])[0]-(w=G[J])[0],E[1]-w[1]])[0]*(B=[(m=t)[0]-(u=r)[0],m[1]-u[1]])[1]-P[1]*B[0]!=0&&ml(u,m,w,E)&&ml(w,E,u,m))return!0;var u,m,w,E,P,B;return!1}function Mr(r,t){for(let o=0;o<r.length;++o)if(!Al(r[o],t))return!1;for(let o=0;o<r.length-1;++o)if(lo(r[o],r[o+1],t))return!1;return!0}function au(r,t){for(let o=0;o<t.length;o++)if(Mr(r,t[o]))return!0;return!1}function va(r,t,o){const u=[];for(let m=0;m<r.length;m++){const w=[];for(let E=0;E<r[m].length;E++){const P=Aa(r[m][E],o);Ka(t,P),w.push(P)}u.push(w)}return u}function ql(r,t,o){const u=[];for(let m=0;m<r.length;m++){const w=va(r[m],t,o);u.push(w)}return u}function Ll(r,t,o,u){if(r[0]<o[0]||r[0]>o[2]){const m=.5*u;let w=r[0]-o[0]>m?-u:o[0]-r[0]>m?u:0;0===w&&(w=r[0]-o[2]>m?-u:o[2]-r[0]>m?u:0),r[0]+=w}Ka(t,r)}function Qr(r,t,o,u){const m=Math.pow(2,u.z)*Fo,w=[u.x*Fo,u.y*Fo],E=[];if(!r)return E;for(const P of r)for(const B of P){const G=[B.x+w[0],B.y+w[1]];Ll(G,t,o,m),E.push(G)}return E}function Ts(r,t,o,u){const m=Math.pow(2,u.z)*Fo,w=[u.x*Fo,u.y*Fo],E=[];if(!r)return E;for(const B of r){const G=[];for(const J of B){const ie=[J.x+w[0],J.y+w[1]];Ka(t,ie),G.push(ie)}E.push(G)}if(t[2]-t[0]<=m/2){(P=t)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const B of E)for(const G of B)Ll(G,t,o,m)}var P;return E}class _o{constructor(t,o){this.type=F,this.geojson=t,this.geometries=o}static parse(t,o){if(2!==t.length)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(sa(t[1])){const u=t[1];if("FeatureCollection"===u.type)for(let m=0;m<u.features.length;++m){const w=u.features[m].geometry.type;if("Polygon"===w||"MultiPolygon"===w)return new _o(u,u.features[m].geometry)}else if("Feature"===u.type){const m=u.geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new _o(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new _o(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(o,u){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=o.canonicalID();if(!E)return!1;if("Polygon"===u.type){const P=va(u.coordinates,w,E),B=Qr(o.geometry(),m,w,E);if(!fl(m,w))return!1;for(const G of B)if(!Al(G,P))return!1}if("MultiPolygon"===u.type){const P=ql(u.coordinates,w,E),B=Qr(o.geometry(),m,w,E);if(!fl(m,w))return!1;for(const G of B)if(!Bo(G,P))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(o,u){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=o.canonicalID();if(!E)return!1;if("Polygon"===u.type){const P=va(u.coordinates,w,E),B=Ts(o.geometry(),m,w,E);if(!fl(m,w))return!1;for(const G of B)if(!Mr(G,P))return!1}if("MultiPolygon"===u.type){const P=ql(u.coordinates,w,E),B=Ts(o.geometry(),m,w,E);if(!fl(m,w))return!1;for(const G of B)if(!au(G,P))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var co=_o;function dn(r){if(r instanceof Ps&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof co)return!1;let t=!0;return r.eachChild(o=>{t&&!dn(o)&&(t=!1)}),t}function No(r){if(r instanceof Ps&&"feature-state"===r.name)return!1;let t=!0;return r.eachChild(o=>{t&&!No(o)&&(t=!1)}),t}function vo(r,t){if(r instanceof Ps&&t.indexOf(r.name)>=0)return!1;let o=!0;return r.eachChild(u=>{o&&!vo(u,t)&&(o=!1)}),o}class ya{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(2!==t.length||"string"!=typeof t[1])return o.error("'var' expression requires exactly one string literal argument.");const u=t[1];return o.scope.has(u)?new ya(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Or=ya;class oa{constructor(t,o=[],u,m=new de,w=[]){this.registry=t,this.path=o,this.key=o.map(E=>`[${E}]`).join(""),this.scope=m,this.errors=w,this.expectedType=u}parse(t,o,u,m,w={}){return o?this.concat(o,u,m)._parse(t,w):this._parse(t,w)}_parse(t,o){function u(m,w,E){return"assert"===E?new _a(w,[m]):"coerce"===E?new pl(w,[m]):m}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=t[0];if("string"!=typeof m)return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[m];if(w){let E=w.parse(t,this);if(!E)return null;if(this.expectedType){const P=this.expectedType,B=E.type;if("string"!==P.kind&&"number"!==P.kind&&"boolean"!==P.kind&&"object"!==P.kind&&"array"!==P.kind||"value"!==B.kind)if("color"!==P.kind&&"formatted"!==P.kind&&"resolvedImage"!==P.kind||"value"!==B.kind&&"string"!==B.kind){if(this.checkSubtype(P,B))return null}else E=u(E,P,o.typeAnnotation||"coerce");else E=u(E,P,o.typeAnnotation||"assert")}if(!(E instanceof go)&&"resolvedImage"!==E.type.kind&&Xr(E)){const P=new gc;try{E=new go(E.type,E.evaluate(P))}catch(B){return this.error(B.message),null}}return E}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,u){const m="number"==typeof t?this.path.concat(t):this.path,w=u?this.scope.concat(u):this.scope;return new oa(this.registry,m,o||null,w,this.errors)}error(t,...o){const u=`${this.key}${o.map(m=>`[${m}]`).join("")}`;this.errors.push(new ee(u,t))}checkSubtype(t,o){const u=yi(t,o);return u&&this.error(u),u}}var Fn=oa;function Xr(r){if(r instanceof Or)return Xr(r.boundExpression);if(r instanceof Ps&&"error"===r.name||r instanceof Il||r instanceof co)return!1;const t=r instanceof pl||r instanceof _a;let o=!0;return r.eachChild(u=>{o=t?o&&Xr(u):o&&u instanceof go}),!!o&&dn(r)&&vo(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Kl(r,t){const o=r.length-1;let u,m,w=0,E=o,P=0;for(;w<=E;)if(P=Math.floor((w+E)/2),u=r[P],m=r[P+1],u<=t){if(P===o||t<m)return P;w=P+1}else{if(!(u>t))throw new Fr("Input is not a number.");E=P-1}return 0}class La{constructor(t,o,u){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[m,w]of u)this.labels.push(m),this.outputs.push(w)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(t[1],1,he);if(!u)return null;const m=[];let w=null;o.expectedType&&"value"!==o.expectedType.kind&&(w=o.expectedType);for(let E=1;E<t.length;E+=2){const P=1===E?-1/0:t[E],B=t[E+1],G=E,J=E+1;if("number"!=typeof P)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(m.length&&m[m.length-1][0]>=P)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',G);const ie=o.parse(B,J,w);if(!ie)return null;w=w||ie.type,m.push([P,ie])}return new La(w,u,m)}evaluate(t){const o=this.labels,u=this.outputs;if(1===o.length)return u[0].evaluate(t);const m=this.input.evaluate(t);if(m<=o[0])return u[0].evaluate(t);const w=o.length;return m>=o[w-1]?u[w-1].evaluate(t):u[Kl(o,m)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&t.push(this.labels[o]),t.push(this.outputs[o].serialize());return t}}var Ds=La;function Cr(r,t,o){return r*(1-o)+t*o}var Pa=Object.freeze({__proto__:null,array:function(r,t,o){return r.map((u,m)=>Cr(u,t[m],o))},color:function(r,t,o){return new yr(Cr(r.r,t.r,o),Cr(r.g,t.g,o),Cr(r.b,t.b,o),Cr(r.a,t.a,o))},number:Cr});const Mo=4/29,Yo=6/29,Us=3*Yo*Yo,Vo=Yo*Yo*Yo,Pl=Math.PI/180,yo=180/Math.PI;function aa(r){return r>Vo?Math.pow(r,1/3):r/Us+Mo}function Fc(r){return r>Yo?r*r*r:Us*(r-Mo)}function Ns(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function Ol(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Os(r){const t=Ol(r.r),o=Ol(r.g),u=Ol(r.b),m=aa((.4124564*t+.3575761*o+.1804375*u)/.95047),w=aa((.2126729*t+.7151522*o+.072175*u)/1);return{l:116*w-16,a:500*(m-w),b:200*(w-aa((.0193339*t+.119192*o+.9503041*u)/1.08883)),alpha:r.a}}function la(r){let t=(r.l+16)/116,o=isNaN(r.a)?t:t+r.a/500,u=isNaN(r.b)?t:t-r.b/200;return t=1*Fc(t),o=.95047*Fc(o),u=1.08883*Fc(u),new yr(Ns(3.2404542*o-1.5371385*t-.4985314*u),Ns(-.969266*o+1.8760108*t+.041556*u),Ns(.0556434*o-.2040259*t+1.0572252*u),r.alpha)}function wa(r,t,o){const u=t-r;return r+o*(u>180||u<-180?u-360*Math.round(u/360):u)}const Do={forward:Os,reverse:la,interpolate:function(r,t,o){return{l:Cr(r.l,t.l,o),a:Cr(r.a,t.a,o),b:Cr(r.b,t.b,o),alpha:Cr(r.alpha,t.alpha,o)}}},ca={forward:function(r){const{l:t,a:o,b:u}=Os(r),m=Math.atan2(u,o)*yo;return{h:m<0?m+360:m,c:Math.sqrt(o*o+u*u),l:t,alpha:r.a}},reverse:function(r){const t=r.h*Pl,o=r.c;return la({l:r.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:r.alpha})},interpolate:function(r,t,o){return{h:wa(r.h,t.h,o),c:Cr(r.c,t.c,o),l:Cr(r.l,t.l,o),alpha:Cr(r.alpha,t.alpha,o)}}};var Rl=Object.freeze({__proto__:null,hcl:ca,lab:Do});class $s{constructor(t,o,u,m,w){this.type=t,this.operator=o,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[E,P]of w)this.labels.push(E),this.outputs.push(P)}static interpolationFactor(t,o,u,m){let w=0;if("exponential"===t.name)w=Ca(o,t.base,u,m);else if("linear"===t.name)w=Ca(o,1,u,m);else if("cubic-bezier"===t.name){const E=t.controlPoints;w=new Ve(E[0],E[1],E[2],E[3]).solve(Ca(o,1,u,m))}return w}static parse(t,o){let[u,m,w,...E]=t;if(!Array.isArray(m)||0===m.length)return o.error("Expected an interpolation type expression.",1);if("linear"===m[0])m={name:"linear"};else if("exponential"===m[0]){const G=m[1];if("number"!=typeof G)return o.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:G}}else{if("cubic-bezier"!==m[0])return o.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const G=m.slice(1);if(4!==G.length||G.some(J=>"number"!=typeof J||J<0||J>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:G}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(w=o.parse(w,2,he),!w)return null;const P=[];let B=null;"interpolate-hcl"===u||"interpolate-lab"===u?B=K:o.expectedType&&"value"!==o.expectedType.kind&&(B=o.expectedType);for(let G=0;G<E.length;G+=2){const J=E[G],ie=E[G+1],se=G+3,pe=G+4;if("number"!=typeof J)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(P.length&&P[P.length-1][0]>=J)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const ge=o.parse(ie,pe,B);if(!ge)return null;B=B||ge.type,P.push([J,ge])}return"number"===B.kind||"color"===B.kind||"array"===B.kind&&"number"===B.itemType.kind&&"number"==typeof B.N?new $s(B,u,m,w,P):o.error(`Type ${Wt(B)} is not interpolatable.`)}evaluate(t){const o=this.labels,u=this.outputs;if(1===o.length)return u[0].evaluate(t);const m=this.input.evaluate(t);if(m<=o[0])return u[0].evaluate(t);const w=o.length;if(m>=o[w-1])return u[w-1].evaluate(t);const E=Kl(o,m),P=$s.interpolationFactor(this.interpolation,m,o[E],o[E+1]),B=u[E].evaluate(t),G=u[E+1].evaluate(t);return"interpolate"===this.operator?Pa[this.type.kind.toLowerCase()](B,G,P):"interpolate-hcl"===this.operator?ca.reverse(ca.interpolate(ca.forward(B),ca.forward(G),P)):Do.reverse(Do.interpolate(Do.forward(B),Do.forward(G),P))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,t,this.input.serialize()];for(let u=0;u<this.labels.length;u++)o.push(this.labels[u],this.outputs[u].serialize());return o}}function Ca(r,t,o,u){const m=u-o,w=r-o;return 0===m?0:1===t?w/m:(Math.pow(t,w)-1)/(Math.pow(t,m)-1)}var Io=$s;class Ja{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let u=null;const m=o.expectedType;m&&"value"!==m.kind&&(u=m);const w=[];for(const P of t.slice(1)){const B=o.parse(P,1+w.length,u,void 0,{typeAnnotation:"omit"});if(!B)return null;u=u||B.type,w.push(B)}const E=m&&w.some(P=>yi(m,P.type));return new Ja(E?_e:u,w)}evaluate(t){let o,u=null,m=0;for(const w of this.args){if(m++,u=w.evaluate(t),u&&u instanceof zr&&!u.available&&(o||(o=u),u=null,m===this.args.length))return o;if(null!==u)break}return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(o=>{t.push(o.serialize())}),t}}var Jl=Ja;class uo{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let w=1;w<t.length-1;w+=2){const E=t[w];if("string"!=typeof E)return o.error(`Expected string, but found ${typeof E} instead.`,w);if(/[^a-zA-Z0-9_]/.test(E))return o.error("Variable names must contain only alphanumeric characters or '_'.",w);const P=o.parse(t[w+1],w+1);if(!P)return null;u.push([E,P])}const m=o.parse(t[t.length-1],t.length-1,o.expectedType,u);return m?new uo(u,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[o,u]of this.bindings)t.push(o,u.serialize());return t.push(this.result.serialize()),t}}var _c=uo;class ho{constructor(t,o,u){this.type=t,this.index=o,this.input=u}static parse(t,o){if(3!==t.length)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,he),m=o.parse(t[2],2,kt(o.expectedType||_e));return u&&m?new ho(m.type.itemType,u,m):null}evaluate(t){const o=this.index.evaluate(t),u=this.input.evaluate(t);if(o<0)throw new Fr(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new Fr(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new Fr(`Array index must be an integer, but found ${o} instead.`);return u[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Bc=ho;class Ho{constructor(t,o){this.type=F,this.needle=t,this.haystack=o}static parse(t,o){if(3!==t.length)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,_e),m=o.parse(t[2],2,_e);return u&&m?rn(u.type,[F,be,he,ve,_e])?new Ho(u,m):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(u.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(null==u)return!1;if(!gn(o,["boolean","string","number","null"]))throw new Fr(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(Kr(o))} instead.`);if(!gn(u,["string","array"]))throw new Fr(`Expected second argument to be of type array or string, but found ${Wt(Kr(u))} instead.`);return u.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Qa=Ho;class Ta{constructor(t,o,u){this.type=he,this.needle=t,this.haystack=o,this.fromIndex=u}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,_e),m=o.parse(t[2],2,_e);if(!u||!m)return null;if(!rn(u.type,[F,be,he,ve,_e]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(u.type)} instead`);if(4===t.length){const w=o.parse(t[3],3,he);return w?new Ta(u,m,w):null}return new Ta(u,m)}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!gn(o,["boolean","string","number","null"]))throw new Fr(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(Kr(o))} instead.`);if(!gn(u,["string","array"]))throw new Fr(`Expected second argument to be of type array or string, but found ${Wt(Kr(u))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(t);return u.indexOf(o,m)}return u.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var gl=Ta;class Is{constructor(t,o,u,m,w,E){this.inputType=t,this.type=o,this.input=u,this.cases=m,this.outputs=w,this.otherwise=E}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let u,m;o.expectedType&&"value"!==o.expectedType.kind&&(m=o.expectedType);const w={},E=[];for(let G=2;G<t.length-1;G+=2){let J=t[G];const ie=t[G+1];Array.isArray(J)||(J=[J]);const se=o.concat(G);if(0===J.length)return se.error("Expected at least one branch label.");for(const ge of J){if("number"!=typeof ge&&"string"!=typeof ge)return se.error("Branch labels must be numbers or strings.");if("number"==typeof ge&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof ge&&Math.floor(ge)!==ge)return se.error("Numeric branch labels must be integer values.");if(u){if(se.checkSubtype(u,Kr(ge)))return null}else u=Kr(ge);if(void 0!==w[String(ge)])return se.error("Branch labels must be unique.");w[String(ge)]=E.length}const pe=o.parse(ie,G,m);if(!pe)return null;m=m||pe.type,E.push(pe)}const P=o.parse(t[1],1,_e);if(!P)return null;const B=o.parse(t[t.length-1],t.length-1,m);return B?"value"!==P.type.kind&&o.concat(1).checkSubtype(u,P.type)?null:new Is(u,m,P,w,E,B):null}evaluate(t){const o=this.input.evaluate(t);return(Kr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),u=[],m={};for(const E of o){const P=m[this.cases[E]];void 0===P?(m[this.cases[E]]=u.length,u.push([this.cases[E],[E]])):u[P][1].push(E)}const w=E=>"number"===this.inputType.kind?Number(E):E;for(const[E,P]of u)t.push(1===P.length?w(P[0]):P.map(w)),t.push(this.outputs[E].serialize());return t.push(this.otherwise.serialize()),t}}var _l=Is;class el{constructor(t,o,u){this.type=t,this.branches=o,this.otherwise=u}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&"value"!==o.expectedType.kind&&(u=o.expectedType);const m=[];for(let E=1;E<t.length-1;E+=2){const P=o.parse(t[E],E,F);if(!P)return null;const B=o.parse(t[E+1],E+1,u);if(!B)return null;m.push([P,B]),u=u||B.type}const w=o.parse(t[t.length-1],t.length-1,u);return w?new el(u,m,w):null}evaluate(t){for(const[o,u]of this.branches)if(o.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,u]of this.branches)t(o),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(o=>{t.push(o.serialize())}),t}}var to=el;class Oa{constructor(t,o,u,m){this.type=t,this.input=o,this.beginIndex=u,this.endIndex=m}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,_e),m=o.parse(t[2],2,he);if(!u||!m)return null;if(!rn(u.type,[kt(_e),be,_e]))return o.error(`Expected first argument to be of type array or string, but found ${Wt(u.type)} instead`);if(4===t.length){const w=o.parse(t[3],3,he);return w?new Oa(u.type,u,m,w):null}return new Oa(u.type,u,m)}evaluate(t){const o=this.input.evaluate(t),u=this.beginIndex.evaluate(t);if(!gn(o,["string","array"]))throw new Fr(`Expected first argument to be of type array or string, but found ${Wt(Kr(o))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(t);return o.slice(u,m)}return o.slice(u)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Ra=Oa;function tl(r,t){return"=="===r||"!="===r?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function zl(r,t,o,u){return 0===u.compare(t,o)}function ka(r,t,o){const u="=="!==r&&"!="!==r;return class Vy{constructor(w,E,P){this.type=F,this.lhs=w,this.rhs=E,this.collator=P,this.hasUntypedArgument="value"===w.type.kind||"value"===E.type.kind}static parse(w,E){if(3!==w.length&&4!==w.length)return E.error("Expected two or three arguments.");const P=w[0];let B=E.parse(w[1],1,_e);if(!B)return null;if(!tl(P,B.type))return E.concat(1).error(`"${P}" comparisons are not supported for type '${Wt(B.type)}'.`);let G=E.parse(w[2],2,_e);if(!G)return null;if(!tl(P,G.type))return E.concat(2).error(`"${P}" comparisons are not supported for type '${Wt(G.type)}'.`);if(B.type.kind!==G.type.kind&&"value"!==B.type.kind&&"value"!==G.type.kind)return E.error(`Cannot compare types '${Wt(B.type)}' and '${Wt(G.type)}'.`);u&&("value"===B.type.kind&&"value"!==G.type.kind?B=new _a(G.type,[B]):"value"!==B.type.kind&&"value"===G.type.kind&&(G=new _a(B.type,[G])));let J=null;if(4===w.length){if("string"!==B.type.kind&&"string"!==G.type.kind&&"value"!==B.type.kind&&"value"!==G.type.kind)return E.error("Cannot use collator to compare non-string types.");if(J=E.parse(w[3],3,Me),!J)return null}return new Vy(B,G,J)}evaluate(w){const E=this.lhs.evaluate(w),P=this.rhs.evaluate(w);if(u&&this.hasUntypedArgument){const B=Kr(E),G=Kr(P);if(B.kind!==G.kind||"string"!==B.kind&&"number"!==B.kind)throw new Fr(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${B.kind}, ${G.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const B=Kr(E),G=Kr(P);if("string"!==B.kind||"string"!==G.kind)return t(w,E,P)}return this.collator?o(w,E,P,this.collator.evaluate(w)):t(w,E,P)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}serialize(){const w=[r];return this.eachChild(E=>{w.push(E.serialize())}),w}}}const vc=ka("==",function(r,t,o){return t===o},zl),Ea=ka("!=",function(r,t,o){return t!==o},function(r,t,o,u){return!zl(0,t,o,u)}),Ql=ka("<",function(r,t,o){return t<o},function(r,t,o,u){return u.compare(t,o)<0}),vl=ka(">",function(r,t,o){return t>o},function(r,t,o,u){return u.compare(t,o)>0}),Nc=ka("<=",function(r,t,o){return t<=o},function(r,t,o,u){return u.compare(t,o)<=0}),po=ka(">=",function(r,t,o){return t>=o},function(r,t,o,u){return u.compare(t,o)>=0});class Go{constructor(t,o,u,m,w,E){this.type=be,this.number=t,this.locale=o,this.currency=u,this.unit=m,this.minFractionDigits=w,this.maxFractionDigits=E}static parse(t,o){if(3!==t.length)return o.error("Expected two arguments.");const u=o.parse(t[1],1,he);if(!u)return null;const m=t[2];if("object"!=typeof m||Array.isArray(m))return o.error("NumberFormat options argument must be an object.");let w=null;if(m.locale&&(w=o.parse(m.locale,1,be),!w))return null;let E=null;if(m.currency&&(E=o.parse(m.currency,1,be),!E))return null;let P=null;if(m.unit&&(P=o.parse(m.unit,1,be),!P))return null;let B=null;if(m["min-fraction-digits"]&&(B=o.parse(m["min-fraction-digits"],1,he),!B))return null;let G=null;return m["max-fraction-digits"]&&(G=o.parse(m["max-fraction-digits"],1,he),!G)?null:new Go(u,w,E,P,B,G)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class yl{constructor(t){this.type=he,this.input=t}static parse(t,o){if(2!==t.length)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=o.parse(t[1],1);return u?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?o.error(`Expected argument of type string or array, but found ${Wt(u.type)} instead.`):new yl(u):null}evaluate(t){const o=this.input.evaluate(t);if("string"==typeof o||Array.isArray(o))return o.length;throw new Fr(`Expected value to be of type string or array, but found ${Wt(Kr(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Fl={"==":vc,"!=":Ea,">":vl,"<":Ql,">=":po,"<=":Nc,array:_a,at:Bc,boolean:_a,case:to,coalesce:Jl,collator:Il,format:zo,image:dl,in:Qa,"index-of":gl,interpolate:Io,"interpolate-hcl":Io,"interpolate-lab":Io,length:yl,let:_c,literal:go,match:_l,number:_a,"number-format":Go,object:_a,slice:Ra,step:Ds,string:_a,"to-boolean":pl,"to-color":pl,"to-number":pl,"to-string":pl,var:Or,within:co};function xl(r,[t,o,u,m]){t=t.evaluate(r),o=o.evaluate(r),u=u.evaluate(r);const w=m?m.evaluate(r):1,E=qa(t,o,u,w);if(E)throw new Fr(E);return new yr(t/255*w,o/255*w,u/255*w,w)}function Ao(r,t){return r in t}function il(r,t){const o=t[r];return void 0===o?null:o}function es(r){return{type:r}}Ps.register(Fl,{error:[{kind:"error"},[be],(r,[t])=>{throw new Fr(t.evaluate(r))}],typeof:[be,[_e],(r,[t])=>Wt(Kr(t.evaluate(r)))],"to-rgba":[kt(he,4),[K],(r,[t])=>t.evaluate(r).toArray()],rgb:[K,[he,he,he],xl],rgba:[K,[he,he,he,he],xl],has:{type:F,overloads:[[[be],(r,[t])=>Ao(t.evaluate(r),r.properties())],[[be,ce],(r,[t,o])=>Ao(t.evaluate(r),o.evaluate(r))]]},get:{type:_e,overloads:[[[be],(r,[t])=>il(t.evaluate(r),r.properties())],[[be,ce],(r,[t,o])=>il(t.evaluate(r),o.evaluate(r))]]},"feature-state":[_e,[be],(r,[t])=>il(t.evaluate(r),r.featureState||{})],properties:[ce,[],r=>r.properties()],"geometry-type":[be,[],r=>r.geometryType()],id:[_e,[],r=>r.id()],zoom:[he,[],r=>r.globals.zoom],pitch:[he,[],r=>r.globals.pitch||0],"distance-from-center":[he,[],r=>r.distanceFromCenter()],"heatmap-density":[he,[],r=>r.globals.heatmapDensity||0],"line-progress":[he,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[he,[],r=>r.globals.skyRadialProgress||0],accumulated:[_e,[],r=>void 0===r.globals.accumulated?null:r.globals.accumulated],"+":[he,es(he),(r,t)=>{let o=0;for(const u of t)o+=u.evaluate(r);return o}],"*":[he,es(he),(r,t)=>{let o=1;for(const u of t)o*=u.evaluate(r);return o}],"-":{type:he,overloads:[[[he,he],(r,[t,o])=>t.evaluate(r)-o.evaluate(r)],[[he],(r,[t])=>-t.evaluate(r)]]},"/":[he,[he,he],(r,[t,o])=>t.evaluate(r)/o.evaluate(r)],"%":[he,[he,he],(r,[t,o])=>t.evaluate(r)%o.evaluate(r)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(r,[t,o])=>Math.pow(t.evaluate(r),o.evaluate(r))],sqrt:[he,[he],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[he,[he],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[he,[he],(r,[t])=>Math.log(t.evaluate(r))],log2:[he,[he],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[he,[he],(r,[t])=>Math.sin(t.evaluate(r))],cos:[he,[he],(r,[t])=>Math.cos(t.evaluate(r))],tan:[he,[he],(r,[t])=>Math.tan(t.evaluate(r))],asin:[he,[he],(r,[t])=>Math.asin(t.evaluate(r))],acos:[he,[he],(r,[t])=>Math.acos(t.evaluate(r))],atan:[he,[he],(r,[t])=>Math.atan(t.evaluate(r))],min:[he,es(he),(r,t)=>Math.min(...t.map(o=>o.evaluate(r)))],max:[he,es(he),(r,t)=>Math.max(...t.map(o=>o.evaluate(r)))],abs:[he,[he],(r,[t])=>Math.abs(t.evaluate(r))],round:[he,[he],(r,[t])=>{const o=t.evaluate(r);return o<0?-Math.round(-o):Math.round(o)}],floor:[he,[he],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[he,[he],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[F,[be,_e],(r,[t,o])=>r.properties()[t.value]===o.value],"filter-id-==":[F,[_e],(r,[t])=>r.id()===t.value],"filter-type-==":[F,[be],(r,[t])=>r.geometryType()===t.value],"filter-<":[F,[be,_e],(r,[t,o])=>{const u=r.properties()[t.value],m=o.value;return typeof u==typeof m&&u<m}],"filter-id-<":[F,[_e],(r,[t])=>{const o=r.id(),u=t.value;return typeof o==typeof u&&o<u}],"filter->":[F,[be,_e],(r,[t,o])=>{const u=r.properties()[t.value],m=o.value;return typeof u==typeof m&&u>m}],"filter-id->":[F,[_e],(r,[t])=>{const o=r.id(),u=t.value;return typeof o==typeof u&&o>u}],"filter-<=":[F,[be,_e],(r,[t,o])=>{const u=r.properties()[t.value],m=o.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[F,[_e],(r,[t])=>{const o=r.id(),u=t.value;return typeof o==typeof u&&o<=u}],"filter->=":[F,[be,_e],(r,[t,o])=>{const u=r.properties()[t.value],m=o.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[F,[_e],(r,[t])=>{const o=r.id(),u=t.value;return typeof o==typeof u&&o>=u}],"filter-has":[F,[_e],(r,[t])=>t.value in r.properties()],"filter-has-id":[F,[],r=>null!==r.id()&&void 0!==r.id()],"filter-type-in":[F,[kt(be)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[F,[kt(_e)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[F,[be,kt(_e)],(r,[t,o])=>o.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[F,[be,kt(_e)],(r,[t,o])=>function(u,m,w,E){for(;w<=E;){const P=w+E>>1;if(m[P]===u)return!0;m[P]>u?E=P-1:w=P+1}return!1}(r.properties()[t.value],o.value,0,o.value.length-1)],all:{type:F,overloads:[[[F,F],(r,[t,o])=>t.evaluate(r)&&o.evaluate(r)],[es(F),(r,t)=>{for(const o of t)if(!o.evaluate(r))return!1;return!0}]]},any:{type:F,overloads:[[[F,F],(r,[t,o])=>t.evaluate(r)||o.evaluate(r)],[es(F),(r,t)=>{for(const o of t)if(o.evaluate(r))return!0;return!1}]]},"!":[F,[F],(r,[t])=>!t.evaluate(r)],"is-supported-script":[F,[be],(r,[t])=>{const o=r.globals&&r.globals.isSupportedScript;return!o||o(t.evaluate(r))}],upcase:[be,[be],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[be,[be],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[be,es(_e),(r,t)=>t.map(o=>So(o.evaluate(r))).join("")],"resolved-locale":[be,[Me],(r,[t])=>t.evaluate(r).resolvedLocale()]});var Rs=Fl;function za(r){return{result:"success",value:r}}function Sa(r){return{result:"error",value:r}}function fo(r){return"data-driven"===r["property-type"]}function Bl(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function jo(r){return!!r.expression&&r.expression.interpolated}function Dr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function bl(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function Fa(r){return r}function Ma(r,t){const o="color"===t.type,u=r.stops&&"object"==typeof r.stops[0][0],m=u||!(u||void 0!==r.property),w=r.type||(jo(t)?"exponential":"interval");if(o&&((r=R({},r)).stops&&(r.stops=r.stops.map(G=>[G[0],yr.parse(G[1])])),r.default=yr.parse(r.default?r.default:t.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!Rl[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let E,P,B;if("exponential"===w)E=xs;else if("interval"===w)E=Ba;else if("categorical"===w){E=xo,P=Object.create(null);for(const G of r.stops)P[G[0]]=G[1];B=typeof r.stops[0][0]}else{if("identity"!==w)throw new Error(`Unknown function type "${w}"`);E=Ws}if(u){const G={},J=[];for(let pe=0;pe<r.stops.length;pe++){const ge=r.stops[pe],Se=ge[0].zoom;void 0===G[Se]&&(G[Se]={zoom:Se,type:r.type,property:r.property,default:r.default,stops:[]},J.push(Se)),G[Se].stops.push([ge[0].value,ge[1]])}const ie=[];for(const pe of J)ie.push([G[pe].zoom,Ma(G[pe],t)]);const se={name:"linear"};return{kind:"composite",interpolationType:se,interpolationFactor:Io.interpolationFactor.bind(void 0,se),zoomStops:ie.map(pe=>pe[0]),evaluate:({zoom:pe},ge)=>xs({stops:ie,base:r.base},t,pe).evaluate(pe,ge)}}if(m){const G="exponential"===w?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:G,interpolationFactor:Io.interpolationFactor.bind(void 0,G),zoomStops:r.stops.map(J=>J[0]),evaluate:({zoom:J})=>E(r,t,J,P,B)}}return{kind:"source",evaluate(G,J){const ie=J&&J.properties?J.properties[r.property]:void 0;return void 0===ie?Lo(r.default,t.default):E(r,t,ie,P,B)}}}function Lo(r,t,o){return void 0!==r?r:void 0!==t?t:void 0!==o?o:void 0}function xo(r,t,o,u,m){return Lo(typeof o===m?u[o]:void 0,r.default,t.default)}function Ba(r,t,o){if("number"!==Dr(o))return Lo(r.default,t.default);const u=r.stops.length;if(1===u||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[u-1][0])return r.stops[u-1][1];const m=Kl(r.stops.map(w=>w[0]),o);return r.stops[m][1]}function xs(r,t,o){const u=void 0!==r.base?r.base:1;if("number"!==Dr(o))return Lo(r.default,t.default);const m=r.stops.length;if(1===m||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[m-1][0])return r.stops[m-1][1];const w=Kl(r.stops.map(J=>J[0]),o),E=function(J,ie,se,pe){const ge=pe-se,Se=J-se;return 0===ge?0:1===ie?Se/ge:(Math.pow(ie,Se)-1)/(Math.pow(ie,ge)-1)}(o,u,r.stops[w][0],r.stops[w+1][0]),P=r.stops[w][1],B=r.stops[w+1][1];let G=Pa[t.type]||Fa;if(r.colorSpace&&"rgb"!==r.colorSpace){const J=Rl[r.colorSpace];G=(ie,se)=>J.reverse(J.interpolate(J.forward(ie),J.forward(se),E))}return"function"==typeof P.evaluate?{evaluate(...J){const ie=P.evaluate.apply(void 0,J),se=B.evaluate.apply(void 0,J);if(void 0!==ie&&void 0!==se)return G(ie,se,E)}}:G(P,B,E)}function Ws(r,t,o){return"color"===t.type?o=yr.parse(o):"formatted"===t.type?o=Yn.fromString(o.toString()):"resolvedImage"===t.type?o=zr.fromString(o.toString()):Dr(o)===t.type||"enum"===t.type&&t.values[o]||(o=void 0),Lo(o,r.default,t.default)}class nl{constructor(t,o){var u;this.expression=t,this._warningHistory={},this._evaluator=new gc,this._defaultValue=o?"color"===(u=o).type&&(bl(u.default)||Array.isArray(u.default))?new yr(0,0,0,0):"color"===u.type?yr.parse(u.default)||null:void 0===u.default?null:u.default:null,this._enumValues=o&&"enum"===o.type?o.values:null}evaluateWithoutErrorHandling(t,o,u,m,w,E,P,B){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=m||null,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E,this._evaluator.featureTileCoord=P||null,this._evaluator.featureDistanceData=B||null,this.expression.evaluate(this._evaluator)}evaluate(t,o,u,m,w,E,P,B){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E||null,this._evaluator.featureTileCoord=P||null,this._evaluator.featureDistanceData=B||null;try{const G=this.expression.evaluate(this._evaluator);if(null==G||"number"==typeof G&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new Fr(`Expected value to be one of ${Object.keys(this._enumValues).map(J=>JSON.stringify(J)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(G.message)),this._defaultValue}}}function gs(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in Rs}function ts(r,t){const o=new Fn(Rs,[],t?function(m){const w={color:K,string:be,number:he,enum:be,boolean:F,formatted:$e,resolvedImage:wt};return"array"===m.type?kt(w[m.value]||_e,m.length):w[m.type]}(t):void 0),u=o.parse(r,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return u?za(new nl(u,t)):Sa(o.errors)}class wl{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent="constant"!==t&&!No(o.expression)}evaluateWithoutErrorHandling(t,o,u,m,w,E){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,m,w,E)}evaluate(t,o,u,m,w,E){return this._styleExpression.evaluate(t,o,u,m,w,E)}}class bo{constructor(t,o,u,m){this.kind=t,this.zoomStops=u,this._styleExpression=o,this.isStateDependent="camera"!==t&&!No(o.expression),this.interpolationType=m}evaluateWithoutErrorHandling(t,o,u,m,w,E){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,m,w,E)}evaluate(t,o,u,m,w,E){return this._styleExpression.evaluate(t,o,u,m,w,E)}interpolationFactor(t,o,u){return this.interpolationType?Io.interpolationFactor(this.interpolationType,t,o,u):0}}function wo(r,t){if("error"===(r=ts(r,t)).result)return r;const o=r.value.expression,u=dn(o);if(!u&&!fo(t))return Sa([new ee("","data expressions not supported")]);const m=vo(o,["zoom","pitch","distance-from-center"]);if(!m&&!Bl(t))return Sa([new ee("","zoom expressions not supported")]);const w=jr(o);return w||m?w instanceof ee?Sa([w]):w instanceof Io&&!jo(t)?Sa([new ee("",'"interpolate" expressions cannot be used with this property')]):za(w?new bo(u?"camera":"composite",r.value,w.labels,w instanceof Io?w.interpolation:void 0):new wl(u?"constant":"source",r.value)):Sa([new ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xs{constructor(t,o){this._parameters=t,this._specification=o,R(this,Ma(this._parameters,this._specification))}static deserialize(t){return new Xs(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function jr(r){let t=null;if(r instanceof _c)t=jr(r.result);else if(r instanceof Jl){for(const o of r.args)if(t=jr(o),t)break}else(r instanceof Ds||r instanceof Io)&&r.input instanceof Ps&&"zoom"===r.input.name&&(t=r);return t instanceof ee||r.eachChild(o=>{const u=jr(o);u instanceof ee?t=u:!t&&u?t=new ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new ee("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}class en{constructor(t,o,u,m){this.message=(t?`${t}: `:"")+u,m&&(this.identifier=m),null!=o&&o.__line__&&(this.line=o.__line__)}}function h(r){const t=r.key,o=r.value,u=r.valueSpec||{},m=r.objectElementValidators||{},w=r.style,E=r.styleSpec;let P=[];const B=Dr(o);if("object"!==B)return[new en(t,o,`object expected, ${B} found`)];for(const G in o){const J=G.split(".")[0];let ie;m[J]?ie=m[J]:u[J]?ie=Ys:m["*"]?ie=m["*"]:u["*"]&&(ie=Ys),ie?P=P.concat(ie({key:(t&&`${t}.`)+G,value:o[G],valueSpec:u[J]||u["*"],style:w,styleSpec:E,object:o,objectKey:G},o)):P.push(new en(t,o[G],`unknown property "${G}"`))}for(const G in u)m[G]||u[G].required&&void 0===u[G].default&&void 0===o[G]&&P.push(new en(t,o,`missing required property "${G}"`));return P}function S(r){const t=r.value,o=r.valueSpec,u=r.style,m=r.styleSpec,w=r.key,E=r.arrayElementValidator||Ys;if("array"!==Dr(t))return[new en(w,t,`array expected, ${Dr(t)} found`)];if(o.length&&t.length!==o.length)return[new en(w,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new en(w,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let P={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};m.$version<7&&(P.function=o.function),"object"===Dr(o.value)&&(P=o.value);let B=[];for(let G=0;G<t.length;G++)B=B.concat(E({array:t,arrayIndex:G,value:t[G],valueSpec:P,style:u,styleSpec:m,key:`${w}[${G}]`}));return B}function V(r){const t=r.key,o=r.value,u=r.valueSpec;let m=Dr(o);if("number"===m&&o!=o&&(m="NaN"),"number"!==m)return[new en(t,o,`number expected, ${m} found`)];if("minimum"in u){let w=u.minimum;if("array"===Dr(u.minimum)&&(w=u.minimum[r.arrayIndex]),o<w)return[new en(t,o,`${o} is less than the minimum value ${w}`)]}if("maximum"in u){let w=u.maximum;if("array"===Dr(u.maximum)&&(w=u.maximum[r.arrayIndex]),o>w)return[new en(t,o,`${o} is greater than the maximum value ${w}`)]}return[]}function te(r){const t=r.valueSpec,o=j(r.value.type);let u,m,w,E={};const P="categorical"!==o&&void 0===r.value.property,B=!P,G="array"===Dr(r.value.stops)&&"array"===Dr(r.value.stops[0])&&"object"===Dr(r.value.stops[0][0]),J=h({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(pe){if("identity"===o)return[new en(pe.key,pe.value,'identity function may not have a "stops" property')];let ge=[];const Se=pe.value;return ge=ge.concat(S({key:pe.key,value:Se,valueSpec:pe.valueSpec,style:pe.style,styleSpec:pe.styleSpec,arrayElementValidator:ie})),"array"===Dr(Se)&&0===Se.length&&ge.push(new en(pe.key,Se,"array must have at least one stop")),ge},default:function(pe){return Ys({key:pe.key,value:pe.value,valueSpec:t,style:pe.style,styleSpec:pe.styleSpec})}}});return"identity"===o&&P&&J.push(new en(r.key,r.value,'missing required property "property"')),"identity"===o||r.value.stops||J.push(new en(r.key,r.value,'missing required property "stops"')),"exponential"===o&&r.valueSpec.expression&&!jo(r.valueSpec)&&J.push(new en(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(B&&!fo(r.valueSpec)?J.push(new en(r.key,r.value,"property functions not supported")):P&&!Bl(r.valueSpec)&&J.push(new en(r.key,r.value,"zoom functions not supported"))),"categorical"!==o&&!G||void 0!==r.value.property||J.push(new en(r.key,r.value,'"property" property is required')),J;function ie(pe){let ge=[];const Se=pe.value,Ge=pe.key;if("array"!==Dr(Se))return[new en(Ge,Se,`array expected, ${Dr(Se)} found`)];if(2!==Se.length)return[new en(Ge,Se,`array length 2 expected, length ${Se.length} found`)];if(G){if("object"!==Dr(Se[0]))return[new en(Ge,Se,`object expected, ${Dr(Se[0])} found`)];if(void 0===Se[0].zoom)return[new en(Ge,Se,"object stop key must have zoom")];if(void 0===Se[0].value)return[new en(Ge,Se,"object stop key must have value")];const lt=j(Se[0].zoom);if("number"!=typeof lt)return[new en(Ge,Se[0].zoom,"stop zoom values must be numbers")];if(w&&w>lt)return[new en(Ge,Se[0].zoom,"stop zoom values must appear in ascending order")];lt!==w&&(w=lt,m=void 0,E={}),ge=ge.concat(h({key:`${Ge}[0]`,value:Se[0],valueSpec:{zoom:{}},style:pe.style,styleSpec:pe.styleSpec,objectElementValidators:{zoom:V,value:se}}))}else ge=ge.concat(se({key:`${Ge}[0]`,value:Se[0],valueSpec:{},style:pe.style,styleSpec:pe.styleSpec},Se));return gs(U(Se[1]))?ge.concat([new en(`${Ge}[1]`,Se[1],"expressions are not allowed in function stops.")]):ge.concat(Ys({key:`${Ge}[1]`,value:Se[1],valueSpec:t,style:pe.style,styleSpec:pe.styleSpec}))}function se(pe,ge){const Se=Dr(pe.value),Ge=j(pe.value),lt=null!==pe.value?pe.value:ge;if(u){if(Se!==u)return[new en(pe.key,lt,`${Se} stop domain type must match previous stop domain type ${u}`)]}else u=Se;if("number"!==Se&&"string"!==Se&&"boolean"!==Se&&"number"!=typeof Ge&&"string"!=typeof Ge&&"boolean"!=typeof Ge)return[new en(pe.key,lt,"stop domain value must be a number, string, or boolean")];if("number"!==Se&&"categorical"!==o){let Et=`number expected, ${Se} found`;return fo(t)&&void 0===o&&(Et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new en(pe.key,lt,Et)]}return"categorical"!==o||"number"!==Se||"number"==typeof Ge&&isFinite(Ge)&&Math.floor(Ge)===Ge?"categorical"!==o&&"number"===Se&&"number"==typeof Ge&&"number"==typeof m&&void 0!==m&&Ge<m?[new en(pe.key,lt,"stop domain values must appear in ascending order")]:(m=Ge,"categorical"===o&&Ge in E?[new en(pe.key,lt,"stop domain values must be unique")]:(E[Ge]=!0,[])):[new en(pe.key,lt,`integer expected, found ${String(Ge)}`)]}}function fe(r){const t=("property"===r.expressionContext?wo:ts)(U(r.value),r.valueSpec);if("error"===t.result)return t.value.map(u=>new en(`${r.key}${u.key}`,r.value,u.message));const o=t.value.expression||t.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!o.outputDefined())return[new en(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===r.expressionContext&&"layout"===r.propertyType&&!No(o))return[new en(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext)return Ne(o,r);if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!vo(o,["zoom","feature-state"]))return[new en(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!dn(o))return[new en(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ne(r,t){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const m of t.valueSpec.expression.parameters)o.delete(m);if(0===o.size)return[];const u=[];return r instanceof Ps&&o.has(r.name)?[new en(t.key,t.value,`["${r.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(r.eachChild(m=>{u.push(...Ne(m,t))}),u)}function Pt(r){const t=r.key,o=r.value,u=r.valueSpec,m=[];return Array.isArray(u.values)?-1===u.values.indexOf(j(o))&&m.push(new en(t,o,`expected one of [${u.values.join(", ")}], ${JSON.stringify(o)} found`)):-1===Object.keys(u.values).indexOf(j(o))&&m.push(new en(t,o,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(o)} found`)),m}function Jt(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!Jt(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function _i(r,t="fill"){if(null==r)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Jt(r)||(r=Zs(r));const o=r;let u=!0;try{u=function(G){if(!Ln(G))return G;let J=U(G);return kn(J),J=Zi(J),J}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(o,null,2)}\n        `)}const m=M[`filter_${t}`],w=ts(u,m);let E=null;if("error"===w.result)throw new Error(w.value.map(G=>`${G.key}: ${G.message}`).join(", "));E=(G,J,ie)=>w.value.evaluate(G,J,{},ie);let P=null,B=null;if(u!==o){const G=ts(o,m);if("error"===G.result)throw new Error(G.value.map(J=>`${J.key}: ${J.message}`).join(", "));P=(J,ie,se,pe,ge)=>G.value.evaluate(J,ie,{},se,void 0,void 0,pe,ge),B=!dn(G.value.expression)}return{filter:E,dynamicFilter:P||void 0,needGeometry:Ms(u),needFeature:!!B}}function Zi(r){if(!Array.isArray(r))return r;const t=function(o){if(cr.has(o[0]))for(let u=1;u<o.length;u++)if(Ln(o[u]))return!0;return o}(r);return!0===t?t:t.map(o=>Zi(o))}function kn(r){let t=!1;const o=[];if("case"===r[0]){for(let u=1;u<r.length-1;u+=2)t=t||Ln(r[u]),o.push(r[u+1]);o.push(r[r.length-1])}else if("match"===r[0]){t=t||Ln(r[1]);for(let u=2;u<r.length-1;u+=2)o.push(r[u+1]);o.push(r[r.length-1])}else if("step"===r[0]){t=t||Ln(r[1]);for(let u=1;u<r.length-1;u+=2)o.push(r[u+1])}t&&(r.length=0,r.push("any",...o));for(let u=1;u<r.length;u++)kn(r[u])}function Ln(r){if(!Array.isArray(r))return!1;if("pitch"===(t=r[0])||"distance-from-center"===t)return!0;var t;for(let o=1;o<r.length;o++)if(Ln(r[o]))return!0;return!1}const cr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ir(r,t){return r<t?-1:r>t?1:0}function Ms(r){if(!Array.isArray(r))return!1;if("within"===r[0])return!0;for(let t=1;t<r.length;t++)if(Ms(r[t]))return!0;return!1}function Zs(r){if(!r)return!0;const t=r[0];return r.length<=1?"any"!==t:"=="===t?bs(r[1],r[2],"=="):"!="===t?qs(bs(r[1],r[2],"==")):"<"===t||">"===t||"<="===t||">="===t?bs(r[1],r[2],t):"any"===t?(o=r.slice(1),["any"].concat(o.map(Zs))):"all"===t?["all"].concat(r.slice(1).map(Zs)):"none"===t?["all"].concat(r.slice(1).map(Zs).map(qs)):"in"===t?ua(r[1],r.slice(2)):"!in"===t?qs(ua(r[1],r.slice(2))):"has"===t?ha(r[1]):"!has"===t?qs(ha(r[1])):"within"!==t||r;var o}function bs(r,t,o){switch(r){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,r,t]}}function ua(r,t){if(0===t.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",r,["literal",t.sort(Ir)]]:["filter-in-small",r,["literal",t]]}}function ha(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function qs(r){return["!",r]}function yc(r){return Jt(U(r.value))?fe(R({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):Cl(r)}function Cl(r){const t=r.value,o=r.key;if("array"!==Dr(t))return[new en(o,t,`array expected, ${Dr(t)} found`)];const u=r.styleSpec;let m,w=[];if(t.length<1)return[new en(o,t,"filter array must have at least 1 element")];switch(w=w.concat(Pt({key:`${o}[0]`,value:t[0],valueSpec:u.filter_operator,style:r.style,styleSpec:r.styleSpec})),j(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===j(t[1])&&w.push(new en(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&w.push(new en(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(m=Dr(t[1]),"string"!==m&&w.push(new en(`${o}[1]`,t[1],`string expected, ${m} found`)));for(let E=2;E<t.length;E++)m=Dr(t[E]),"$type"===j(t[1])?w=w.concat(Pt({key:`${o}[${E}]`,value:t[E],valueSpec:u.geometry_type,style:r.style,styleSpec:r.styleSpec})):"string"!==m&&"number"!==m&&"boolean"!==m&&w.push(new en(`${o}[${E}]`,t[E],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let E=1;E<t.length;E++)w=w.concat(Cl({key:`${o}[${E}]`,value:t[E],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":m=Dr(t[1]),2!==t.length?w.push(new en(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==m&&w.push(new en(`${o}[1]`,t[1],`string expected, ${m} found`));break;case"within":m=Dr(t[1]),2!==t.length?w.push(new en(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==m&&w.push(new en(`${o}[1]`,t[1],`object expected, ${m} found`))}return w}function Uo(r,t){const o=r.key,u=r.style,m=r.styleSpec,w=r.value,E=r.objectKey,P=m[`${t}_${r.layerType}`];if(!P)return[];const B=E.match(/^(.*)-transition$/);if("paint"===t&&B&&P[B[1]]&&P[B[1]].transition)return Ys({key:o,value:w,valueSpec:m.transition,style:u,styleSpec:m});const G=r.valueSpec||P[E];if(!G)return[new en(o,w,`unknown property "${E}"`)];let J;if("string"===Dr(w)&&fo(G)&&!G.tokens&&(J=/^{([^}]+)}$/.exec(w))){const se=`\`{ "type": "identity", "property": ${J?JSON.stringify(J[1]):'"_"'} }\``;return[new en(o,w,`"${E}" does not support interpolation syntax\nUse an identity property function instead: ${se}.`)]}const ie=[];return"symbol"===r.layerType&&("text-field"===E&&u&&!u.glyphs&&ie.push(new en(o,w,'use of "text-field" requires a style "glyphs" property')),"text-font"===E&&bl(U(w))&&"identity"===j(w.type)&&ie.push(new en(o,w,'"text-font" does not support identity functions'))),ie.concat(Ys({key:r.key,value:w,valueSpec:G,style:u,styleSpec:m,expressionContext:"property",propertyType:t,propertyKey:E}))}function ec(r){return Uo(r,"paint")}function xe(r){return Uo(r,"layout")}function q(r){let t=[];const o=r.value,u=r.key,m=r.style,w=r.styleSpec;o.type||o.ref||t.push(new en(u,o,'either "type" or "ref" is required'));let E=j(o.type);const P=j(o.ref);if(o.id){const B=j(o.id);for(let G=0;G<r.arrayIndex;G++){const J=m.layers[G];j(J.id)===B&&t.push(new en(u,o.id,`duplicate layer id "${o.id}", previously used at line ${J.id.__line__}`))}}if("ref"in o){let B;["type","source","source-layer","filter","layout"].forEach(G=>{G in o&&t.push(new en(u,o[G],`"${G}" is prohibited for ref layers`))}),m.layers.forEach(G=>{j(G.id)===P&&(B=G)}),B?B.ref?t.push(new en(u,o.ref,"ref cannot reference another ref layer")):E=j(B.type):"string"==typeof P&&t.push(new en(u,o.ref,`ref layer "${P}" not found`))}else if("background"!==E&&"sky"!==E)if(o.source){const B=m.sources&&m.sources[o.source],G=B&&j(B.type);B?"vector"===G&&"raster"===E?t.push(new en(u,o.source,`layer "${o.id}" requires a raster source`)):"raster"===G&&"raster"!==E?t.push(new en(u,o.source,`layer "${o.id}" requires a vector source`)):"vector"!==G||o["source-layer"]?"raster-dem"===G&&"hillshade"!==E?t.push(new en(u,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==E||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||"geojson"===G&&B.lineMetrics||t.push(new en(u,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new en(u,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new en(u,o.source,`source "${o.source}" not found`))}else t.push(new en(u,o,'missing required property "source"'));return t=t.concat(h({key:u,value:o,valueSpec:w.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ys({key:`${u}.type`,value:o.type,valueSpec:w.layer.type,style:r.style,styleSpec:r.styleSpec,object:o,objectKey:"type"}),filter:B=>yc(R({layerType:E},B)),layout:B=>h({layer:o,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":G=>xe(R({layerType:E},G))}}),paint:B=>h({layer:o,key:B.key,value:B.value,valueSpec:{},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{"*":G=>ec(R({layerType:E},G))}})}})),t}function re(r){const t=r.value,o=r.key,u=Dr(t);return"string"!==u?[new en(o,t,`string expected, ${u} found`)]:[]}const Ce={promoteId:function({key:r,value:t}){if("string"===Dr(t))return re({key:r,value:t});{const o=[];for(const u in t)o.push(...re({key:`${r}.${u}`,value:t[u]}));return o}}};function Dt(r){const t=r.value,o=r.key,u=r.styleSpec,m=r.style;if(!t.type)return[new en(o,t,'"type" is required')];const w=j(t.type);let E;switch(w){case"vector":case"raster":case"raster-dem":return E=h({key:o,value:t,valueSpec:u[`source_${w.replace("-","_")}`],style:r.style,styleSpec:u,objectElementValidators:Ce}),E;case"geojson":if(E=h({key:o,value:t,valueSpec:u.source_geojson,style:m,styleSpec:u,objectElementValidators:Ce}),t.cluster)for(const P in t.clusterProperties){const[B,G]=t.clusterProperties[P],J="string"==typeof B?[B,["accumulated"],["get",P]]:B;E.push(...fe({key:`${o}.${P}.map`,value:G,expressionContext:"cluster-map"})),E.push(...fe({key:`${o}.${P}.reduce`,value:J,expressionContext:"cluster-reduce"}))}return E;case"video":return h({key:o,value:t,valueSpec:u.source_video,style:m,styleSpec:u});case"image":return h({key:o,value:t,valueSpec:u.source_image,style:m,styleSpec:u});case"canvas":return[new en(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pt({key:`${o}.type`,value:t.type,valueSpec:{values:Ei(u)},style:m,styleSpec:u})}}function Ei(r){return r.source.reduce((t,o)=>{const u=r[o];return"enum"===u.type.type&&(t=t.concat(Object.keys(u.type.values))),t},[])}function bn(r){const t=r.value,o=r.styleSpec,u=o.light,m=r.style;let w=[];const E=Dr(t);if(void 0===t)return w;if("object"!==E)return w=w.concat([new en("light",t,`object expected, ${E} found`)]),w;for(const P in t){const B=P.match(/^(.*)-transition$/);w=w.concat(B&&u[B[1]]&&u[B[1]].transition?Ys({key:P,value:t[P],valueSpec:o.transition,style:m,styleSpec:o}):u[P]?Ys({key:P,value:t[P],valueSpec:u[P],style:m,styleSpec:o}):[new en(P,t[P],`unknown property "${P}"`)])}return w}function mr(r){const t=r.value,o=r.key,u=r.style,m=r.styleSpec,w=m.terrain;let E=[];const P=Dr(t);if(void 0===t)return E;if("object"!==P)return E=E.concat([new en("terrain",t,`object expected, ${P} found`)]),E;for(const B in t){const G=B.match(/^(.*)-transition$/);E=E.concat(G&&w[G[1]]&&w[G[1]].transition?Ys({key:B,value:t[B],valueSpec:m.transition,style:u,styleSpec:m}):w[B]?Ys({key:B,value:t[B],valueSpec:w[B],style:u,styleSpec:m}):[new en(B,t[B],`unknown property "${B}"`)])}if(t.source){const B=u.sources&&u.sources[t.source],G=B&&j(B.type);B?"raster-dem"!==G&&E.push(new en(o,t.source,`terrain cannot be used with a source of type ${String(G)}, it only be used with a "raster-dem" source type`)):E.push(new en(o,t.source,`source "${t.source}" not found`))}else E.push(new en(o,t,'terrain is missing required property "source"'));return E}function Er(r){const t=r.value,o=r.style,u=r.styleSpec,m=u.fog;let w=[];const E=Dr(t);if(void 0===t)return w;if("object"!==E)return w=w.concat([new en("fog",t,`object expected, ${E} found`)]),w;for(const P in t){const B=P.match(/^(.*)-transition$/);w=w.concat(B&&m[B[1]]&&m[B[1]].transition?Ys({key:P,value:t[P],valueSpec:u.transition,style:o,styleSpec:u}):m[P]?Ys({key:P,value:t[P],valueSpec:m[P],style:o,styleSpec:u}):[new en(P,t[P],`unknown property "${P}"`)])}return w}const ws={"*":()=>[],array:S,boolean:function(r){const t=r.value,o=r.key,u=Dr(t);return"boolean"!==u?[new en(o,t,`boolean expected, ${u} found`)]:[]},number:V,color:function(r){const t=r.key,o=r.value,u=Dr(o);return"string"!==u?[new en(t,o,`color expected, ${u} found`)]:null===An(o)?[new en(t,o,`color expected, "${o}" found`)]:[]},enum:Pt,filter:yc,function:te,layer:q,object:h,source:Dt,light:bn,terrain:mr,fog:Er,string:re,formatted:function(r){return 0===re(r).length?[]:fe(r)},resolvedImage:function(r){return 0===re(r).length?[]:fe(r)},projection:function(r){const t=r.value,o=r.styleSpec,u=o.projection,m=r.style;let w=[];const E=Dr(t);if("object"===E)for(const P in t)w=w.concat(Ys({key:P,value:t[P],valueSpec:u[P],style:m,styleSpec:o}));else"string"!==E&&(w=w.concat([new en("projection",t,`object or string expected, ${E} found`)]));return w}};function Ys(r){const t=r.value,o=r.valueSpec,u=r.styleSpec;return o.expression&&bl(j(t))?te(r):o.expression&&gs(U(t))?fe(r):o.type&&ws[o.type]?ws[o.type](r):h(R({},r,{valueSpec:o.type?u[o.type]:o}))}function qu(r){const t=r.value,o=r.key,u=re(r);return u.length||(-1===t.indexOf("{fontstack}")&&u.push(new en(o,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&u.push(new en(o,t,'"glyphs" url must include a "{range}" token'))),u}function Ih(r,t=M){return Co(Ys({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,objectElementValidators:{glyphs:qu,"*":()=>[]}}))}const up=r=>Co(ec(r)),Ku=r=>Co(xe(r));function Co(r){return r.slice().sort((t,o)=>t.line&&o.line?t.line-o.line:0)}function lu(r,t){let o=!1;if(t&&t.length)for(const u of t)r.fire(new x(new Error(u.message))),o=!0;return o}var Po=$o,Tl=3;function $o(r,t,o){var u=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var m=new Int32Array(this.arrayBuffer);r=m[0],this.d=(t=m[1])+2*(o=m[2]);for(var w=0;w<this.d*this.d;w++){var E=m[Tl+w],P=m[Tl+w+1];u.push(E===P?null:m.subarray(E,P))}var B=m[Tl+u.length+1];this.keys=m.subarray(m[Tl+u.length],B),this.bboxes=m.subarray(B),this.insert=this._insertReadonly}else{this.d=t+2*o;for(var G=0;G<this.d*this.d;G++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=r,this.padding=o,this.scale=t/r,this.uid=0;var J=o/t*r;this.min=-J,this.max=r+J}$o.prototype.insert=function(r,t,o,u,m){this._forEachCell(t,o,u,m,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(t),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(m)},$o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$o.prototype._insertCell=function(r,t,o,u,m,w){this.cells[m].push(w)},$o.prototype.query=function(r,t,o,u,m){var w=this.min,E=this.max;if(r<=w&&t<=w&&E<=o&&E<=u&&!m)return Array.prototype.slice.call(this.keys);var P=[];return this._forEachCell(r,t,o,u,this._queryCell,P,{},m),P},$o.prototype._queryCell=function(r,t,o,u,m,w,E,P){var B=this.cells[m];if(null!==B)for(var G=this.keys,J=this.bboxes,ie=0;ie<B.length;ie++){var se=B[ie];if(void 0===E[se]){var pe=4*se;(P?P(J[pe+0],J[pe+1],J[pe+2],J[pe+3]):r<=J[pe+2]&&t<=J[pe+3]&&o>=J[pe+0]&&u>=J[pe+1])?(E[se]=!0,w.push(G[se])):E[se]=!1}}},$o.prototype._forEachCell=function(r,t,o,u,m,w,E,P){for(var B=this._convertToCellCoord(r),G=this._convertToCellCoord(t),J=this._convertToCellCoord(o),ie=this._convertToCellCoord(u),se=B;se<=J;se++)for(var pe=G;pe<=ie;pe++){var ge=this.d*pe+se;if((!P||P(this._convertFromCellCoord(se),this._convertFromCellCoord(pe),this._convertFromCellCoord(se+1),this._convertFromCellCoord(pe+1)))&&m.call(this,r,t,o,u,ge,w,E,P))return}},$o.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},$o.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},$o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,t=Tl+this.cells.length+1+1,o=0,u=0;u<this.cells.length;u++)o+=this.cells[u].length;var m=new Int32Array(t+o+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var w=t,E=0;E<r.length;E++){var P=r[E];m[Tl+E]=w,m.set(P,w),w+=P.length}return m[Tl+r.length]=w,m.set(this.keys,w),m[Tl+r.length+1]=w+=this.keys.length,m.set(this.bboxes,w),w+=this.bboxes.length,m.buffer};var is=pt(Po);const Wo={};function vn(r,t,o={}){Object.defineProperty(r,"_classRegistryKey",{value:t,writeable:!1}),Wo[t]={klass:r,omit:o.omit||[]}}vn(Object,"Object"),is.serialize=function(r,t){const o=r.toArrayBuffer();return t&&t.push(o),{buffer:o}},is.deserialize=function(r){return new is(r.buffer)},Object.defineProperty(is,"name",{value:"Grid"}),vn(is,"Grid"),vn(yr,"Color"),vn(Error,"Error"),vn(Kn,"AJAXError"),vn(zr,"ResolvedImage"),vn(Xs,"StylePropertyFunction"),vn(nl,"StyleExpression",{omit:["_evaluator"]}),vn(bo,"ZoomDependentExpression"),vn(wl,"ZoomConstantExpression"),vn(Ps,"CompoundExpression",{omit:["_evaluate"]});for(const r in Rs)Wo[Rs[r]._classRegistryKey]||vn(Rs[r],`Expression${r}`);function Ju(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function Oo(r){return Y.ImageBitmap&&r instanceof Y.ImageBitmap}function kl(r,t){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(Ju(r)||Oo(r))return t&&t.push(r),r;if(ArrayBuffer.isView(r)){const o=r;return t&&t.push(o.buffer),o}if(r instanceof Y.ImageData)return t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const o=[];for(const u of r)o.push(kl(u,t));return o}if("object"==typeof r){const o=r.constructor,u=o._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const m=o.serialize?o.serialize(r,t):{};if(!o.serialize){for(const w in r)r.hasOwnProperty(w)&&(Wo[u].omit.indexOf(w)>=0||(m[w]=kl(r[w],t)));r instanceof Error&&(m.message=r.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(m.$name=u),m}throw new Error("can't serialize object of type "+typeof r)}function rs(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||Ju(r)||Oo(r)||ArrayBuffer.isView(r)||r instanceof Y.ImageData)return r;if(Array.isArray(r))return r.map(rs);if("object"==typeof r){const t=r.$name||"Object",{klass:o}=Wo[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(r);const u=Object.create(o.prototype);for(const m of Object.keys(r))"$name"!==m&&(u[m]=rs(r[m]));return u}throw new Error("can't deserialize object of type "+typeof r)}const an={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Xo(r){for(const t of r)if(yu(t.charCodeAt(0)))return!0;return!1}function hp(r){for(const t of r)if(!Yc(t.charCodeAt(0)))return!1;return!0}function Yc(r){return!(an.Arabic(r)||an["Arabic Supplement"](r)||an["Arabic Extended-A"](r)||an["Arabic Presentation Forms-A"](r)||an["Arabic Presentation Forms-B"](r))}function yu(r){return!(746!==r&&747!==r&&(r<4352||!(an["Bopomofo Extended"](r)||an.Bopomofo(r)||an["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||an["CJK Compatibility Ideographs"](r)||an["CJK Compatibility"](r)||an["CJK Radicals Supplement"](r)||an["CJK Strokes"](r)||!(!an["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||an["CJK Unified Ideographs Extension A"](r)||an["CJK Unified Ideographs"](r)||an["Enclosed CJK Letters and Months"](r)||an["Hangul Compatibility Jamo"](r)||an["Hangul Jamo Extended-A"](r)||an["Hangul Jamo Extended-B"](r)||an["Hangul Jamo"](r)||an["Hangul Syllables"](r)||an.Hiragana(r)||an["Ideographic Description Characters"](r)||an.Kanbun(r)||an["Kangxi Radicals"](r)||an["Katakana Phonetic Extensions"](r)||an.Katakana(r)&&12540!==r||!(!an["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!an["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||an["Unified Canadian Aboriginal Syllabics"](r)||an["Unified Canadian Aboriginal Syllabics Extended"](r)||an["Vertical Forms"](r)||an["Yijing Hexagram Symbols"](r)||an["Yi Syllables"](r)||an["Yi Radicals"](r))))}function Qu(r){return!(yu(r)||(t=r,an["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||an["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||an["Letterlike Symbols"](t)||an["Number Forms"](t)||an["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||an["Control Pictures"](t)&&9251!==t||an["Optical Character Recognition"](t)||an["Enclosed Alphanumerics"](t)||an["Geometric Shapes"](t)||an["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||an["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||an["CJK Symbols and Punctuation"](t)||an.Katakana(t)||an["Private Use Area"](t)||an["CJK Compatibility Forms"](t)||an["Small Form Variants"](t)||an["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t));var t}function xu(r){return r>=1424&&r<=2303||an["Arabic Presentation Forms-A"](r)||an["Arabic Presentation Forms-B"](r)}function Ah(r,t){return!(!t&&xu(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||an.Khmer(r))}function Na(r){for(const t of r)if(xu(t.charCodeAt(0)))return!0;return!1}const cu="deferred",Vc="loading",Lh="loaded";let xc=null,b="unavailable",a=null;const p=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(b="error"),xc&&xc(r)};function T(){I.fire(new y("pluginStateChange",{pluginStatus:b,pluginURL:a}))}const I=new k,z=function(){return b},$=function(){if(b!==cu||!a)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");b=Vc,T(),a&&vr({url:a},r=>{r?p(r):(b=Lh,T())})},Z={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>b===Lh||null!=Z.applyArabicShaping,isLoading:()=>b===Vc,setState(r){b=r.pluginStatus,a=r.pluginURL},isParsed:()=>null!=Z.applyArabicShaping&&null!=Z.processBidirectionalText&&null!=Z.processStyledBidirectionalText,getPluginURL:()=>a};class Q{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(o,u){for(const m of o)if(!Ah(m.charCodeAt(0),u))return!1;return!0}(t,Z.isLoaded())}}class le{constructor(t,o){this.property=t,this.value=o,this.expression=function(u,m){if(bl(u))return new Xs(u,m);if(gs(u)){const w=wo(u,m);if("error"===w.result)throw new Error(w.value.map(E=>`${E.key}: ${E.message}`).join(", "));return w.value}{let w=u;return"string"==typeof u&&"color"===m.type&&(w=yr.parse(u)),{kind:"constant",evaluate:()=>w}}}(void 0===o?t.specification.default:o,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,o,u){return this.property.possiblyEvaluate(this,t,o,u)}}class oe{constructor(t){this.property=t,this.value=new le(t,void 0)}transitioned(t,o){return new Be(this.property,this.value,o,ln({},t.transition,this.transition),t.now)}untransitioned(){return new Be(this.property,this.value,null,{},0)}}class ye{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return tr(this._values[t].value.value)}setValue(t,o){this._values.hasOwnProperty(t)||(this._values[t]=new oe(this._values[t].property)),this._values[t].value=new le(this._values[t].property,null===o?void 0:tr(o))}getTransition(t){return tr(this._values[t].transition)}setTransition(t,o){this._values.hasOwnProperty(t)||(this._values[t]=new oe(this._values[t].property)),this._values[t].transition=tr(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);void 0!==u&&(t[o]=u);const m=this.getTransition(o);void 0!==m&&(t[`${o}-transition`]=m)}return t}transitioned(t,o){const u=new Ze(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(t,o._values[m]);return u}untransitioned(){const t=new Ze(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class Be{constructor(t,o,u,m,w){const E=m.delay||0,P=m.duration||0;w=w||0,this.property=t,this.value=o,this.begin=w+E,this.end=this.begin+P,t.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(t,o,u){const m=t.now||0,w=this.value.possiblyEvaluate(t,o,u),E=this.prior;if(E){if(m>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(m<this.begin)return E.possiblyEvaluate(t,o,u);{const P=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(t,o,u),w,qt(P))}}return w}}class Ze{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,u){const m=new nt(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(t,o,u);return m}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class qe{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return tr(this._values[t].value)}setValue(t,o){this._values[t]=new le(this._values[t].property,null===o?void 0:tr(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);void 0!==u&&(t[o]=u)}return t}possiblyEvaluate(t,o,u){const m=new nt(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(t,o,u);return m}}class Je{constructor(t,o,u){this.property=t,this.value=o,this.parameters=u}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,o,u,m){return this.property.evaluate(this.value,this.parameters,t,o,u,m)}}class nt{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class we{constructor(t){this.specification=t}possiblyEvaluate(t,o){return t.expression.evaluate(o)}interpolate(t,o,u){const m=Pa[this.specification.type];return m?m(t,o,u):t}}class We{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,u,m){return new Je(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(o,null,{},u,m)}:t.expression,o)}interpolate(t,o,u){if("constant"!==t.value.kind||"constant"!==o.value.kind)return t;if(void 0===t.value.value||void 0===o.value.value)return new Je(this,{kind:"constant",value:void 0},t.parameters);const m=Pa[this.specification.type];return m?new Je(this,{kind:"constant",value:m(t.value.value,o.value.value,u)},t.parameters):t}evaluate(t,o,u,m,w,E){return"constant"===t.kind?t.value:t.evaluate(o,u,m,w,E)}}class gt{constructor(t){this.specification=t}possiblyEvaluate(t,o,u,m){return!!t.expression.evaluate(o,null,{},u,m)}interpolate(){return!1}}class vt{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new Q(0,{});for(const u in t){const m=t[u];m.specification.overridable&&this.overridableProperties.push(u);const w=this.defaultPropertyValues[u]=new le(m,void 0),E=this.defaultTransitionablePropertyValues[u]=new oe(m);this.defaultTransitioningPropertyValues[u]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=w.possiblyEvaluate(o)}}}function zt(r,t){return 256*(r=ai(Math.floor(r),0,255))+ai(Math.floor(t),0,255)}vn(We,"DataDrivenProperty"),vn(we,"DataConstantProperty"),vn(gt,"ColorRampProperty");const Bt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ft{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class $t{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ut(r,t=1){let o=0,u=0;return{members:r.map(m=>{const w=Bt[m.type].BYTES_PER_ELEMENT,E=o=li(o,Math.max(t,w)),P=m.components||1;return u=Math.max(u,w),o+=w*P,{name:m.name,type:m.type,components:P,offset:E}}),size:li(o,Math.max(u,t)),alignment:t}}function li(r,t){return Math.ceil(r/t)*t}class Gi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const m=2*t;return this.int16[m+0]=o,this.int16[m+1]=u,t}}Gi.prototype.bytesPerElement=4,vn(Gi,"StructArrayLayout2i4");class ti extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,o,u)}emplace(t,o,u,m){const w=3*t;return this.int16[w+0]=o,this.int16[w+1]=u,this.int16[w+2]=m,t}}ti.prototype.bytesPerElement=6,vn(ti,"StructArrayLayout3i6");class ki extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,m){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,m)}emplace(t,o,u,m,w){const E=4*t;return this.int16[E+0]=o,this.int16[E+1]=u,this.int16[E+2]=m,this.int16[E+3]=w,t}}ki.prototype.bytesPerElement=8,vn(ki,"StructArrayLayout4i8");class ci extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E,P){const B=this.length;return this.resize(B+1),this.emplace(B,t,o,u,m,w,E,P)}emplace(t,o,u,m,w,E,P,B){const G=6*t,J=12*t,ie=3*t;return this.int16[G+0]=o,this.int16[G+1]=u,this.uint8[J+4]=m,this.uint8[J+5]=w,this.uint8[J+6]=E,this.uint8[J+7]=P,this.float32[ie+2]=B,t}}ci.prototype.bytesPerElement=12,vn(ci,"StructArrayLayout2i4ub1f12");class ji extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,m){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,m)}emplace(t,o,u,m,w){const E=4*t;return this.float32[E+0]=o,this.float32[E+1]=u,this.float32[E+2]=m,this.float32[E+3]=w,t}}ji.prototype.bytesPerElement=16,vn(ji,"StructArrayLayout4f16");class oi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w){const E=this.length;return this.resize(E+1),this.emplace(E,t,o,u,m,w)}emplace(t,o,u,m,w,E){const P=6*t,B=3*t;return this.uint16[P+0]=o,this.uint16[P+1]=u,this.uint16[P+2]=m,this.uint16[P+3]=w,this.float32[B+2]=E,t}}oi.prototype.bytesPerElement=12,vn(oi,"StructArrayLayout4ui1f12");class wi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,m){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,m)}emplace(t,o,u,m,w){const E=4*t;return this.uint16[E+0]=o,this.uint16[E+1]=u,this.uint16[E+2]=m,this.uint16[E+3]=w,t}}wi.prototype.bytesPerElement=8,vn(wi,"StructArrayLayout4ui8");class Wi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E){const P=this.length;return this.resize(P+1),this.emplace(P,t,o,u,m,w,E)}emplace(t,o,u,m,w,E,P){const B=6*t;return this.int16[B+0]=o,this.int16[B+1]=u,this.int16[B+2]=m,this.int16[B+3]=w,this.int16[B+4]=E,this.int16[B+5]=P,t}}Wi.prototype.bytesPerElement=12,vn(Wi,"StructArrayLayout6i12");class zi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E,P,B,G,J,ie,se){const pe=this.length;return this.resize(pe+1),this.emplace(pe,t,o,u,m,w,E,P,B,G,J,ie,se)}emplace(t,o,u,m,w,E,P,B,G,J,ie,se,pe){const ge=12*t;return this.int16[ge+0]=o,this.int16[ge+1]=u,this.int16[ge+2]=m,this.int16[ge+3]=w,this.uint16[ge+4]=E,this.uint16[ge+5]=P,this.uint16[ge+6]=B,this.uint16[ge+7]=G,this.int16[ge+8]=J,this.int16[ge+9]=ie,this.int16[ge+10]=se,this.int16[ge+11]=pe,t}}zi.prototype.bytesPerElement=24,vn(zi,"StructArrayLayout4i4ui4i24");class Hi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E){const P=this.length;return this.resize(P+1),this.emplace(P,t,o,u,m,w,E)}emplace(t,o,u,m,w,E,P){const B=10*t,G=5*t;return this.int16[B+0]=o,this.int16[B+1]=u,this.int16[B+2]=m,this.float32[G+2]=w,this.float32[G+3]=E,this.float32[G+4]=P,t}}Hi.prototype.bytesPerElement=20,vn(Hi,"StructArrayLayout3i3f20");class Pn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}Pn.prototype.bytesPerElement=4,vn(Pn,"StructArrayLayout1ul4");class nr extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E,P,B,G,J,ie,se,pe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,t,o,u,m,w,E,P,B,G,J,ie,se,pe)}emplace(t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge){const Se=20*t,Ge=10*t;return this.int16[Se+0]=o,this.int16[Se+1]=u,this.int16[Se+2]=m,this.int16[Se+3]=w,this.int16[Se+4]=E,this.float32[Ge+3]=P,this.float32[Ge+4]=B,this.float32[Ge+5]=G,this.float32[Ge+6]=J,this.int16[Se+14]=ie,this.uint32[Ge+8]=se,this.uint16[Se+18]=pe,this.uint16[Se+19]=ge,t}}nr.prototype.bytesPerElement=40,vn(nr,"StructArrayLayout5i4f1i1ul2ui40");class wn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E,P){const B=this.length;return this.resize(B+1),this.emplace(B,t,o,u,m,w,E,P)}emplace(t,o,u,m,w,E,P,B){const G=8*t;return this.int16[G+0]=o,this.int16[G+1]=u,this.int16[G+2]=m,this.int16[G+4]=w,this.int16[G+5]=E,this.int16[G+6]=P,this.int16[G+7]=B,t}}wn.prototype.bytesPerElement=16,vn(wn,"StructArrayLayout3i2i2i16");class jn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w){const E=this.length;return this.resize(E+1),this.emplace(E,t,o,u,m,w)}emplace(t,o,u,m,w,E){const P=4*t,B=8*t;return this.float32[P+0]=o,this.float32[P+1]=u,this.float32[P+2]=m,this.int16[B+6]=w,this.int16[B+7]=E,t}}jn.prototype.bytesPerElement=16,vn(jn,"StructArrayLayout2f1f2i16");class ar extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,m){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,m)}emplace(t,o,u,m,w){const E=12*t,P=3*t;return this.uint8[E+0]=o,this.uint8[E+1]=u,this.float32[P+1]=m,this.float32[P+2]=w,t}}ar.prototype.bytesPerElement=12,vn(ar,"StructArrayLayout2ub2f12");class Zn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,o,u)}emplace(t,o,u,m){const w=3*t;return this.float32[w+0]=o,this.float32[w+1]=u,this.float32[w+2]=m,t}}Zn.prototype.bytesPerElement=12,vn(Zn,"StructArrayLayout3f12");class On extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,o,u)}emplace(t,o,u,m){const w=3*t;return this.uint16[w+0]=o,this.uint16[w+1]=u,this.uint16[w+2]=m,t}}On.prototype.bytesPerElement=6,vn(On,"StructArrayLayout3ui6");class br extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge,Se,Ge,lt,Et,ut,Ct,At){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge,Se,Ge,lt,Et,ut,Ct,At)}emplace(t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge,Se,Ge,lt,Et,ut,Ct,At,Lt){const ui=30*t,ii=15*t,Ci=60*t;return this.int16[ui+0]=o,this.int16[ui+1]=u,this.int16[ui+2]=m,this.float32[ii+2]=w,this.float32[ii+3]=E,this.uint16[ui+8]=P,this.uint16[ui+9]=B,this.uint32[ii+5]=G,this.uint32[ii+6]=J,this.uint32[ii+7]=ie,this.uint16[ui+16]=se,this.uint16[ui+17]=pe,this.uint16[ui+18]=ge,this.float32[ii+10]=Se,this.float32[ii+11]=Ge,this.uint8[Ci+48]=lt,this.uint8[Ci+49]=Et,this.uint8[Ci+50]=ut,this.uint32[ii+13]=Ct,this.int16[ui+28]=At,this.uint8[Ci+58]=Lt,t}}br.prototype.bytesPerElement=60,vn(br,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ss extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge,Se,Ge,lt,Et,ut,Ct,At,Lt,ui,ii,Ci,Xi,mi,Ai,Ii,Ni){const Ki=this.length;return this.resize(Ki+1),this.emplace(Ki,t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge,Se,Ge,lt,Et,ut,Ct,At,Lt,ui,ii,Ci,Xi,mi,Ai,Ii,Ni)}emplace(t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge,Se,Ge,lt,Et,ut,Ct,At,Lt,ui,ii,Ci,Xi,mi,Ai,Ii,Ni,Ki){const bi=38*t,pn=19*t;return this.int16[bi+0]=o,this.int16[bi+1]=u,this.int16[bi+2]=m,this.float32[pn+2]=w,this.float32[pn+3]=E,this.int16[bi+8]=P,this.int16[bi+9]=B,this.int16[bi+10]=G,this.int16[bi+11]=J,this.int16[bi+12]=ie,this.int16[bi+13]=se,this.uint16[bi+14]=pe,this.uint16[bi+15]=ge,this.uint16[bi+16]=Se,this.uint16[bi+17]=Ge,this.uint16[bi+18]=lt,this.uint16[bi+19]=Et,this.uint16[bi+20]=ut,this.uint16[bi+21]=Ct,this.uint16[bi+22]=At,this.uint16[bi+23]=Lt,this.uint16[bi+24]=ui,this.uint16[bi+25]=ii,this.uint16[bi+26]=Ci,this.uint16[bi+27]=Xi,this.uint16[bi+28]=mi,this.uint32[pn+15]=Ai,this.float32[pn+16]=Ii,this.float32[pn+17]=Ni,this.float32[pn+18]=Ki,t}}ss.prototype.bytesPerElement=76,vn(ss,"StructArrayLayout3i2f6i15ui1ul3f76");class as extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}as.prototype.bytesPerElement=4,vn(as,"StructArrayLayout1f4");class ls extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,m,w){const E=this.length;return this.resize(E+1),this.emplace(E,t,o,u,m,w)}emplace(t,o,u,m,w,E){const P=5*t;return this.float32[P+0]=o,this.float32[P+1]=u,this.float32[P+2]=m,this.float32[P+3]=w,this.float32[P+4]=E,t}}ls.prototype.bytesPerElement=20,vn(ls,"StructArrayLayout5f20");class Zo extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,m){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,m)}emplace(t,o,u,m,w){const E=6*t;return this.uint32[3*t+0]=o,this.uint16[E+2]=u,this.uint16[E+3]=m,this.uint16[E+4]=w,t}}Zo.prototype.bytesPerElement=12,vn(Zo,"StructArrayLayout1ul3ui12");class Ks extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const m=2*t;return this.uint16[m+0]=o,this.uint16[m+1]=u,t}}Ks.prototype.bytesPerElement=4,vn(Ks,"StructArrayLayout2ui4");class qo extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}qo.prototype.bytesPerElement=2,vn(qo,"StructArrayLayout1ui2");class Nl extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const m=2*t;return this.float32[m+0]=o,this.float32[m+1]=u,t}}Nl.prototype.bytesPerElement=8,vn(Nl,"StructArrayLayout2f8");class ks extends Ft{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ks.prototype.size=40;class Vr extends nr{get(t){return new ks(this,t)}}vn(Vr,"CollisionBoxArray");class Br extends Ft{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Br.prototype.size=60;class Jr extends br{get(t){return new Br(this,t)}}vn(Jr,"PlacedSymbolArray");class da extends Ft{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}da.prototype.size=76;class cs extends ss{get(t){return new da(this,t)}}vn(cs,"SymbolInstanceArray");class pa extends as{getoffsetX(t){return this.float32[1*t+0]}}vn(pa,"GlyphOffsetArray");class Hc extends Gi{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}vn(Hc,"SymbolLineVertexArray");class rl extends Ft{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}rl.prototype.size=12;class Ya extends Zo{get(t){return new rl(this,t)}}vn(Ya,"FeatureIndexArray");class tc extends Ks{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}vn(tc,"FillExtrusionCentroidArray");const ic=Ut([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),bc=Ut([{name:"a_dash",components:4,type:"Uint16"}]);var bu={exports:{}},dp=function(r,t){var o,u,m,w,E,P,B,G;for(u=r.length-(o=3&r.length),m=t,E=3432918353,P=461845907,G=0;G<u;)B=255&r.charCodeAt(G)|(255&r.charCodeAt(++G))<<8|(255&r.charCodeAt(++G))<<16|(255&r.charCodeAt(++G))<<24,++G,m=27492+(65535&(w=5*(65535&(m=(m^=B=(65535&(B=(B=(65535&B)*E+(((B>>>16)*E&65535)<<16)&4294967295)<<15|B>>>17))*P+(((B>>>16)*P&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(B=0,o){case 3:B^=(255&r.charCodeAt(G+2))<<16;case 2:B^=(255&r.charCodeAt(G+1))<<8;case 1:m^=B=(65535&(B=(B=(65535&(B^=255&r.charCodeAt(G)))*E+(((B>>>16)*E&65535)<<16)&4294967295)<<15|B>>>17))*P+(((B>>>16)*P&65535)<<16)&4294967295}return m^=r.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0},If=function(r,t){for(var o,u=r.length,m=t^u,w=0;u>=4;)o=1540483477*(65535&(o=255&r.charCodeAt(w)|(255&r.charCodeAt(++w))<<8|(255&r.charCodeAt(++w))<<16|(255&r.charCodeAt(++w))<<24))+((1540483477*(o>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),u-=4,++w;switch(u){case 3:m^=(255&r.charCodeAt(w+2))<<16;case 2:m^=(255&r.charCodeAt(w+1))<<8;case 1:m=1540483477*(65535&(m^=255&r.charCodeAt(w)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};bu.exports=dp,bu.exports.murmur3=dp,bu.exports.murmur2=If;var Ph=pt(bu.exports);class dd{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,u,m){this.ids.push(Af(t)),this.positions.push(o,u,m)}getPositions(t){const o=Af(t);let u=0,m=this.ids.length-1;for(;u<m;){const E=u+m>>1;this.ids[E]>=o?m=E:u=E+1}const w=[];for(;this.ids[u]===o;)w.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return w}static serialize(t,o){const u=new Float64Array(t.ids),m=new Uint32Array(t.positions);return pd(u,m,0,u.length-1),o&&o.push(u.buffer,m.buffer),{ids:u,positions:m}}static deserialize(t){const o=new dd;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function Af(r){const t=+r;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Ph(String(r))}function pd(r,t,o,u){for(;o<u;){const m=r[o+u>>1];let w=o-1,E=u+1;for(;;){do{w++}while(r[w]<m);do{E--}while(r[E]>m);if(w>=E)break;Oh(r,w,E),Oh(t,3*w,3*E),Oh(t,3*w+1,3*E+1),Oh(t,3*w+2,3*E+2)}E-o<u-E?(pd(r,t,o,E),o=E+1):(pd(r,t,E+1,u),u=E)}}function Oh(r,t,o){const u=r[t];r[t]=r[o],r[o]=u}vn(dd,"FeaturePositionMap");class rc{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,o),this.initialized=!0),!!this.location}}class eh extends rc{constructor(t){super(t),this.current=0}set(t,o,u){this.fetchUniformLocation(t,o)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class pp extends rc{constructor(t){super(t),this.current=[0,0,0,0]}set(t,o,u){this.fetchUniformLocation(t,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class fp extends rc{constructor(t){super(t),this.current=yr.transparent}set(t,o,u){this.fetchUniformLocation(t,o)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Lf=new Float32Array(16),fd=new Float32Array(9),Pf=new Float32Array(4);function Rh(r){return[zt(255*r.r,255*r.g),zt(255*r.b,255*r.a)]}class th{constructor(t,o,u){this.value=t,this.uniformNames=o.map(m=>`u_${m}`),this.type=u}setUniform(t,o,u,m,w){o.set(t,w,m.constantOr(this.value))}getBinding(t,o){return"color"===this.type?new fp(t):new eh(t)}}class ih{constructor(t,o){this.uniformNames=o.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,o,u,m,w){const E="u_pattern"===w||"u_dash"===w?this.pattern:"u_pixel_ratio"===w?this.pixelRatio:null;E&&o.set(t,w,E)}getBinding(t,o){return"u_pattern"===o||"u_dash"===o?new pp(t):new eh(t)}}class Yl{constructor(t,o,u,m){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:"color"===u?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(t,o,u,m,w,E){const P=this.paintVertexArray.length,B=this.expression.evaluate(new Q(0),o,{},w,m,E);this.paintVertexArray.resize(t),this._setPaintValue(P,t,B)}updatePaintArray(t,o,u,m,w){const E=this.expression.evaluate({zoom:0},u,m,void 0,w);this._setPaintValue(t,o,E)}_setPaintValue(t,o,u){if("color"===this.type){const m=Rh(u);for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,m[0],m[1])}else{for(let m=t;m<o;m++)this.paintVertexArray.emplace(m,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class io{constructor(t,o,u,m,w,E){this.expression=t,this.uniformNames=o.map(P=>`u_${P}_t`),this.type=u,this.useIntegerZoom=m,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=o.map(P=>({name:`a_${P}`,type:"Float32",components:"color"===u?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(t,o,u,m,w,E){const P=this.expression.evaluate(new Q(this.zoom),o,{},w,m,E),B=this.expression.evaluate(new Q(this.zoom+1),o,{},w,m,E),G=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(G,t,P,B)}updatePaintArray(t,o,u,m,w){const E=this.expression.evaluate({zoom:this.zoom},u,m,void 0,w),P=this.expression.evaluate({zoom:this.zoom+1},u,m,void 0,w);this._setPaintValue(t,o,E,P)}_setPaintValue(t,o,u,m){if("color"===this.type){const w=Rh(u),E=Rh(m);for(let P=t;P<o;P++)this.paintVertexArray.emplace(P,w[0],w[1],E[0],E[1])}else{for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o,u,m,w){const E=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,P=ai(this.expression.interpolationFactor(E,this.zoom,this.zoom+1),0,1);o.set(t,w,P)}getBinding(t,o){return new eh(t)}}class wc{constructor(t,o,u,m,w){this.expression=t,this.layerId=w,this.paintVertexAttributes=("array"===u?bc:ic).members;for(let E=0;E<o.length;++E);this.paintVertexArray=new m}populatePaintArray(t,o,u){const m=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(m,t,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(t,o,u,m,w,E){this._setPaintValues(t,o,u.patterns&&u.patterns[this.layerId],E)}_setPaintValues(t,o,u,m){if(!m||!u)return;const w=m[u];if(!w)return;const{tl:E,br:P,pixelRatio:B}=w;for(let G=t;G<o;G++)this.paintVertexArray.emplace(G,E[0],E[1],P[0],P[1],B)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Da{constructor(t,o,u=(()=>!0)){this.binders={},this._buffers=[];const m=[];for(const w in t.paint._values){if(!u(w))continue;const E=t.paint.get(w);if(!(E instanceof Je&&fo(E.property.specification)))continue;const P=Wm(w,t.type),B=E.value,G=E.property.specification.type,J=!!E.property.useIntegerZoom,ie="line-dasharray"===w||w.endsWith("pattern"),se="line-dasharray"===w&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==B.kind||se)if("source"===B.kind||se||ie){const pe=Cc(w,G,"source");this.binders[w]=ie?new wc(B,P,G,pe,t.id):new Yl(B,P,G,pe),m.push(`/a_${w}`)}else{const pe=Cc(w,G,"composite");this.binders[w]=new io(B,P,G,J,o,pe),m.push(`/z_${w}`)}else this.binders[w]=ie?new ih(B.value,P):new th(B.value,P,G),m.push(`/u_${w}`)}this.cacheKey=m.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof Yl||o instanceof io?o.maxValue:0}populatePaintArrays(t,o,u,m,w,E){for(const P in this.binders){const B=this.binders[P];(B instanceof Yl||B instanceof io||B instanceof wc)&&B.populatePaintArray(t,o,u,m,w,E)}}setConstantPatternPositions(t){for(const o in this.binders){const u=this.binders[o];u instanceof ih&&u.setConstantPatternPositions(t)}}updatePaintArrays(t,o,u,m,w,E){let P=!1;for(const B in t){const G=o.getPositions(B);for(const J of G){const ie=u.feature(J.index);for(const se in this.binders){const pe=this.binders[se];if((pe instanceof Yl||pe instanceof io||pe instanceof wc)&&!0===pe.expression.isStateDependent){const ge=m.paint.get(se);pe.expression=ge.value,pe.updatePaintArray(J.start,J.end,ie,t[B],w,E),P=!0}}}}return P}defines(){const t=[];for(const o in this.binders){const u=this.binders[o];(u instanceof th||u instanceof ih)&&t.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Yl||u instanceof io||u instanceof wc)for(let m=0;m<u.paintVertexAttributes.length;m++)t.push(u.paintVertexAttributes[m].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof th||u instanceof ih||u instanceof io)for(const m of u.uniformNames)t.push(m)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const o=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof th||m instanceof ih||m instanceof io)for(const w of m.uniformNames)o.push({name:w,property:u,binding:m.getBinding(t,w)})}return o}setUniforms(t,o,u,m,w){for(const{name:E,property:P,binding:B}of u)this.binders[P].setUniform(t,B,w,m.get(P),E)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const o=this.binders[t];(o instanceof Yl||o instanceof io||o instanceof wc)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(t){for(const o in this.binders){const u=this.binders[o];(u instanceof Yl||u instanceof io||u instanceof wc)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof Yl||o instanceof io||o instanceof wc)&&o.destroy()}}}class jc{constructor(t,o,u=(()=>!0)){this.programConfigurations={};for(const m of t)this.programConfigurations[m.id]=new Da(m,o,u);this.needsUpload=!1,this._featureMap=new dd,this._bufferOffset=0}populatePaintArrays(t,o,u,m,w,E,P){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(t,o,m,w,E,P);void 0!==o.id&&this._featureMap.add(o.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,u,m,w){for(const E of u)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(t,this._featureMap,o,E,m,w)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const $m={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Wm(r,t){return $m[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}const nh={"line-pattern":{source:oi,composite:oi},"fill-pattern":{source:oi,composite:oi},"fill-extrusion-pattern":{source:oi,composite:oi},"line-dasharray":{source:wi,composite:wi}},md={color:{source:Nl,composite:ji},number:{source:as,composite:Nl}};function Cc(r,t,o){const u=nh[r];return u&&u[o]||md[t][o]}vn(th,"ConstantBinder"),vn(ih,"PatternConstantBinder"),vn(Yl,"SourceExpressionBinder"),vn(wc,"PatternCompositeBinder"),vn(io,"CompositeExpressionBinder"),vn(Da,"ProgramConfiguration",{omit:["_buffers"]}),vn(jc,"ProgramConfigurationSet");const Of="-transition";class sl extends k{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new qe(o.layout)),o.paint)){this._transitionablePaint=new ye(o.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nt(o.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,u={}){null!=o&&this._validate(Ku,`layers.${this.id}.layout.${t}`,t,o,u)||("visibility"!==t?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return xn(t,Of)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,u={}){if(null!=o&&this._validate(up,`layers.${this.id}.paint.${t}`,t,o,u))return!1;if(xn(t,Of))return this._transitionablePaint.setTransition(t.slice(0,-11),o||void 0),!1;{const m=this._transitionablePaint._values[t],w=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const P=this._transitionablePaint._values[t].value,B=P.isDataDriven(),G=xn(t,"pattern")||"line-dasharray"===t;return B||w||G||this._handleOverridablePaintPropertyUpdate(t,E,P)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,o,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),gr(t,(o,u)=>!(void 0===o||"layout"===u&&!Object.keys(o).length||"paint"===u&&!Object.keys(o).length))}_validate(t,o,u,m,w={}){return(!w||!1!==w.validate)&&lu(this,t.call(Ih,{key:o,layerType:this.type,objectKey:u,value:m,styleSpec:M,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof Je&&fo(o.property.specification)&&("source"===o.value.kind||"composite"===o.value.kind)&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=_i(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const gd=Ut([{name:"a_pos",components:2,type:"Int16"}],4),Rf=Ut([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class zs{constructor(t=[]){this.segments=t}prepareSegment(t,o,u,m){let w=this.segments[this.segments.length-1];return t>zs.MAX_VERTEX_ARRAY_LENGTH&&hn(`Max vertices per segment is ${zs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!w||w.vertexLength+t>zs.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==m)&&(w={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},void 0!==m&&(w.sortKey=m),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,u,m){return new zs([{vertexOffset:t,primitiveOffset:o,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}zs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,vn(zs,"SegmentVector");var Sn=8192;class sc{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof ns?new ns(t.lng,t.lat):ns.convert(t),this}setSouthWest(t){return this._sw=t instanceof ns?new ns(t.lng,t.lat):ns.convert(t),this}extend(t){const o=this._sw,u=this._ne;let m,w;if(t instanceof ns)m=t,w=t;else{if(!(t instanceof sc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(sc.convert(t)):this.extend(ns.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(ns.convert(t)):this;if(m=t._sw,w=t._ne,!m||!w)return this}return o||u?(o.lng=Math.min(m.lng,o.lng),o.lat=Math.min(m.lat,o.lat),u.lng=Math.max(w.lng,u.lng),u.lat=Math.max(w.lat,u.lat)):(this._sw=new ns(m.lng,m.lat),this._ne=new ns(w.lng,w.lat)),this}getCenter(){return new ns((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ns(this.getWest(),this.getNorth())}getSouthEast(){return new ns(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:u}=ns.convert(t);let m=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}static convert(t){return!t||t instanceof sc?t:new sc(t)}}var uu=1e-6,fa=typeof Float32Array<"u"?Float32Array:Array;function mp(){var r=new fa(9);return fa!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function gp(r,t,o){var u=t[0],m=t[1],w=t[2],E=t[3],P=t[4],B=t[5],G=t[6],J=t[7],ie=t[8],se=o[0],pe=o[1],ge=o[2],Se=o[3],Ge=o[4],lt=o[5],Et=o[6],ut=o[7],Ct=o[8];return r[0]=se*u+pe*E+ge*G,r[1]=se*m+pe*P+ge*J,r[2]=se*w+pe*B+ge*ie,r[3]=Se*u+Ge*E+lt*G,r[4]=Se*m+Ge*P+lt*J,r[5]=Se*w+Ge*B+lt*ie,r[6]=Et*u+ut*E+Ct*G,r[7]=Et*m+ut*P+Ct*J,r[8]=Et*w+ut*B+Ct*ie,r}function Vl(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function _p(r,t){var o=t[0],u=t[1],m=t[2],w=t[3],E=t[4],P=t[5],B=t[6],G=t[7],J=t[8],ie=t[9],se=t[10],pe=t[11],ge=t[12],Se=t[13],Ge=t[14],lt=t[15],Et=o*P-u*E,ut=o*B-m*E,Ct=o*G-w*E,At=u*B-m*P,Lt=u*G-w*P,ui=m*G-w*B,ii=J*Se-ie*ge,Ci=J*Ge-se*ge,Xi=J*lt-pe*ge,mi=ie*Ge-se*Se,Ai=ie*lt-pe*Se,Ii=se*lt-pe*Ge,Ni=Et*Ii-ut*Ai+Ct*mi+At*Xi-Lt*Ci+ui*ii;return Ni?(r[0]=(P*Ii-B*Ai+G*mi)*(Ni=1/Ni),r[1]=(m*Ai-u*Ii-w*mi)*Ni,r[2]=(Se*ui-Ge*Lt+lt*At)*Ni,r[3]=(se*Lt-ie*ui-pe*At)*Ni,r[4]=(B*Xi-E*Ii-G*Ci)*Ni,r[5]=(o*Ii-m*Xi+w*Ci)*Ni,r[6]=(Ge*Ct-ge*ui-lt*ut)*Ni,r[7]=(J*ui-se*Ct+pe*ut)*Ni,r[8]=(E*Ai-P*Xi+G*ii)*Ni,r[9]=(u*Xi-o*Ai-w*ii)*Ni,r[10]=(ge*Lt-Se*Ct+lt*Et)*Ni,r[11]=(ie*Ct-J*Lt-pe*Et)*Ni,r[12]=(P*Ci-E*mi-B*ii)*Ni,r[13]=(o*mi-u*Ci+m*ii)*Ni,r[14]=(Se*ut-ge*At-Ge*Et)*Ni,r[15]=(J*At-ie*ut+se*Et)*Ni,r):null}function wu(r,t,o){var u=t[0],m=t[1],w=t[2],E=t[3],P=t[4],B=t[5],G=t[6],J=t[7],ie=t[8],se=t[9],pe=t[10],ge=t[11],Se=t[12],Ge=t[13],lt=t[14],Et=t[15],ut=o[0],Ct=o[1],At=o[2],Lt=o[3];return r[0]=ut*u+Ct*P+At*ie+Lt*Se,r[1]=ut*m+Ct*B+At*se+Lt*Ge,r[2]=ut*w+Ct*G+At*pe+Lt*lt,r[3]=ut*E+Ct*J+At*ge+Lt*Et,r[4]=(ut=o[4])*u+(Ct=o[5])*P+(At=o[6])*ie+(Lt=o[7])*Se,r[5]=ut*m+Ct*B+At*se+Lt*Ge,r[6]=ut*w+Ct*G+At*pe+Lt*lt,r[7]=ut*E+Ct*J+At*ge+Lt*Et,r[8]=(ut=o[8])*u+(Ct=o[9])*P+(At=o[10])*ie+(Lt=o[11])*Se,r[9]=ut*m+Ct*B+At*se+Lt*Ge,r[10]=ut*w+Ct*G+At*pe+Lt*lt,r[11]=ut*E+Ct*J+At*ge+Lt*Et,r[12]=(ut=o[12])*u+(Ct=o[13])*P+(At=o[14])*ie+(Lt=o[15])*Se,r[13]=ut*m+Ct*B+At*se+Lt*Ge,r[14]=ut*w+Ct*G+At*pe+Lt*lt,r[15]=ut*E+Ct*J+At*ge+Lt*Et,r}function Cu(r,t,o){var u,m,w,E,P,B,G,J,ie,se,pe,ge,Se=o[0],Ge=o[1],lt=o[2];return t===r?(r[12]=t[0]*Se+t[4]*Ge+t[8]*lt+t[12],r[13]=t[1]*Se+t[5]*Ge+t[9]*lt+t[13],r[14]=t[2]*Se+t[6]*Ge+t[10]*lt+t[14],r[15]=t[3]*Se+t[7]*Ge+t[11]*lt+t[15]):(m=t[1],w=t[2],E=t[3],P=t[4],B=t[5],G=t[6],J=t[7],ie=t[8],se=t[9],pe=t[10],ge=t[11],r[0]=u=t[0],r[1]=m,r[2]=w,r[3]=E,r[4]=P,r[5]=B,r[6]=G,r[7]=J,r[8]=ie,r[9]=se,r[10]=pe,r[11]=ge,r[12]=u*Se+P*Ge+ie*lt+t[12],r[13]=m*Se+B*Ge+se*lt+t[13],r[14]=w*Se+G*Ge+pe*lt+t[14],r[15]=E*Se+J*Ge+ge*lt+t[15]),r}function oc(r,t,o){var u=o[0],m=o[1],w=o[2];return r[0]=t[0]*u,r[1]=t[1]*u,r[2]=t[2]*u,r[3]=t[3]*u,r[4]=t[4]*m,r[5]=t[5]*m,r[6]=t[6]*m,r[7]=t[7]*m,r[8]=t[8]*w,r[9]=t[9]*w,r[10]=t[10]*w,r[11]=t[11]*w,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function vp(r,t,o){var u=Math.sin(o),m=Math.cos(o),w=t[4],E=t[5],P=t[6],B=t[7],G=t[8],J=t[9],ie=t[10],se=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=w*m+G*u,r[5]=E*m+J*u,r[6]=P*m+ie*u,r[7]=B*m+se*u,r[8]=G*m-w*u,r[9]=J*m-E*u,r[10]=ie*m-P*u,r[11]=se*m-B*u,r}function zh(r,t,o){var u=Math.sin(o),m=Math.cos(o),w=t[0],E=t[1],P=t[2],B=t[3],G=t[8],J=t[9],ie=t[10],se=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=w*m-G*u,r[1]=E*m-J*u,r[2]=P*m-ie*u,r[3]=B*m-se*u,r[8]=w*u+G*m,r[9]=E*u+J*m,r[10]=P*u+ie*m,r[11]=B*u+se*m,r}function yp(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function xp(r,t,o){var u,m,w,E=o[0],P=o[1],B=o[2],G=Math.hypot(E,P,B);return G<uu?null:(E*=G=1/G,P*=G,B*=G,u=Math.sin(t),m=Math.cos(t),r[0]=E*E*(w=1-m)+m,r[1]=P*E*w+B*u,r[2]=B*E*w-P*u,r[3]=0,r[4]=E*P*w-B*u,r[5]=P*P*w+m,r[6]=B*P*w+E*u,r[7]=0,r[8]=E*B*w+P*u,r[9]=P*B*w-E*u,r[10]=B*B*w+m,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var zf=wu;function _d(){var r=new fa(3);return fa!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function vd(r){var t=new fa(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Tu(r){return Math.hypot(r[0],r[1],r[2])}function Tc(r,t,o){var u=new fa(3);return u[0]=r,u[1]=t,u[2]=o,u}function kc(r,t,o){return r[0]=t[0]+o[0],r[1]=t[1]+o[1],r[2]=t[2]+o[2],r}function Fh(r,t,o){return r[0]=t[0]-o[0],r[1]=t[1]-o[1],r[2]=t[2]-o[2],r}function bp(r,t,o){return r[0]=t[0]*o[0],r[1]=t[1]*o[1],r[2]=t[2]*o[2],r}function Ko(r,t,o){return r[0]=Math.min(t[0],o[0]),r[1]=Math.min(t[1],o[1]),r[2]=Math.min(t[2],o[2]),r}function Uc(r,t,o){return r[0]=Math.max(t[0],o[0]),r[1]=Math.max(t[1],o[1]),r[2]=Math.max(t[2],o[2]),r}function ol(r,t,o){return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r}function Ec(r,t,o,u){return r[0]=t[0]+o[0]*u,r[1]=t[1]+o[1]*u,r[2]=t[2]+o[2]*u,r}function Jo(r,t){var o=t[0],u=t[1],m=t[2],w=o*o+u*u+m*m;return w>0&&(w=1/Math.sqrt(w)),r[0]=t[0]*w,r[1]=t[1]*w,r[2]=t[2]*w,r}function Va(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function yd(r,t,o){var u=t[0],m=t[1],w=t[2],E=o[0],P=o[1],B=o[2];return r[0]=m*B-w*P,r[1]=w*E-u*B,r[2]=u*P-m*E,r}function Fs(r,t,o){var u=t[0],m=t[1],w=t[2],E=o[3]*u+o[7]*m+o[11]*w+o[15];return r[0]=(o[0]*u+o[4]*m+o[8]*w+o[12])/(E=E||1),r[1]=(o[1]*u+o[5]*m+o[9]*w+o[13])/E,r[2]=(o[2]*u+o[6]*m+o[10]*w+o[14])/E,r}function wp(r,t,o){var u=o[0],m=o[1],w=o[2],E=t[0],P=t[1],B=t[2],G=m*B-w*P,J=w*E-u*B,ie=u*P-m*E,se=m*ie-w*J,pe=w*G-u*ie,ge=u*J-m*G,Se=2*o[3];return J*=Se,ie*=Se,pe*=2,ge*=2,r[0]=E+(G*=Se)+(se*=2),r[1]=P+J+pe,r[2]=B+ie+ge,r}var Bh,ac=Fh,Xm=bp,Ff=Tu;function Cp(r,t,o){return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=t[3]*o,r}function Tp(r,t){var o=t[0],u=t[1],m=t[2],w=t[3],E=o*o+u*u+m*m+w*w;return E>0&&(E=1/Math.sqrt(E)),r[0]=o*E,r[1]=u*E,r[2]=m*E,r[3]=w*E,r}function hu(r,t,o){var u=t[0],m=t[1],w=t[2],E=t[3];return r[0]=o[0]*u+o[4]*m+o[8]*w+o[12]*E,r[1]=o[1]*u+o[5]*m+o[9]*w+o[13]*E,r[2]=o[2]*u+o[6]*m+o[10]*w+o[14]*E,r[3]=o[3]*u+o[7]*m+o[11]*w+o[15]*E,r}function Bf(){var r=new fa(4);return fa!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function Nf(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function Yf(r,t,o){o*=.5;var u=t[0],m=t[1],w=t[2],E=t[3],P=Math.sin(o),B=Math.cos(o);return r[0]=u*B+E*P,r[1]=m*B+w*P,r[2]=w*B-m*P,r[3]=E*B-u*P,r}function kp(r,t,o){o*=.5;var u=t[0],m=t[1],w=t[2],E=t[3],P=Math.sin(o),B=Math.cos(o);return r[0]=u*B-w*P,r[1]=m*B+E*P,r[2]=w*B+u*P,r[3]=E*B-m*P,r}_d(),Bh=new fa(4),fa!=Float32Array&&(Bh[0]=0,Bh[1]=0,Bh[2]=0,Bh[3]=0);var Zm=Tp;_d(),Tc(1,0,0),Tc(0,1,0),Bf(),Bf(),mp();const qm=Ut([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Vf}=qm,Hf=Ut([{name:"a_pos_3",components:3,type:"Int16"}]);var rh=Ut([{name:"a_pos",type:"Int16",components:2}]);class xd{constructor(t,o){this.pos=t,this.dir=o}intersectsPlane(t,o,u){const m=Va(o,this.dir);if(Math.abs(m)<1e-6)return!1;const w=((t[0]-this.pos[0])*o[0]+(t[1]-this.pos[1])*o[1]+(t[2]-this.pos[2])*o[2])/m;return u[0]=this.pos[0]+this.dir[0]*w,u[1]=this.pos[1]+this.dir[1]*w,u[2]=this.pos[2]+this.dir[2]*w,!0}closestPointOnSphere(t,o,u){if(Se=(pe=this.pos)[0],Ge=pe[1],lt=pe[2],Et=(ge=t)[0],ut=ge[1],Ct=ge[2],Math.abs(Se-Et)<=uu*Math.max(1,Math.abs(Se),Math.abs(Et))&&Math.abs(Ge-ut)<=uu*Math.max(1,Math.abs(Ge),Math.abs(ut))&&Math.abs(lt-Ct)<=uu*Math.max(1,Math.abs(lt),Math.abs(Ct))||0===o)return u[0]=u[1]=u[2]=0,!1;var pe,ge,Se,Ge,lt,Et,ut,Ct;const[m,w,E]=this.dir,P=this.pos[0]-t[0],B=this.pos[1]-t[1],G=this.pos[2]-t[2],J=m*m+w*w+E*E,ie=2*(P*m+B*w+G*E),se=ie*ie-4*J*(P*P+B*B+G*G-o*o);if(se<0){const pe=Math.max(-ie/2,0),ge=P+m*pe,Se=B+w*pe,Ge=G+E*pe,lt=Math.hypot(ge,Se,Ge);return u[0]=ge*o/lt,u[1]=Se*o/lt,u[2]=Ge*o/lt,!1}{const pe=(-ie-Math.sqrt(se))/(2*J);if(pe<0){const ge=Math.hypot(P,B,G);return u[0]=P*o/ge,u[1]=B*o/ge,u[2]=G*o/ge,!1}return u[0]=P+m*pe,u[1]=B+w*pe,u[2]=G+E*pe,!0}}}class Ep{constructor(t,o,u,m,w){this.TL=t,this.TR=o,this.BR=u,this.BL=m,this.horizon=w}static fromInvProjectionMatrix(t,o,u){const m=[-1,1,1],w=[1,1,1],E=[1,-1,1],P=[-1,-1,1],B=Fs(m,m,t),G=Fs(w,w,t),J=Fs(E,E,t),ie=Fs(P,P,t);return new Ep(B,G,J,ie,o/u)}}class Nh{constructor(t,o){this.points=t,this.planes=o}static fromInvProjectionMatrix(t,o,u,m){const w=Math.pow(2,u),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{const G=hu([],B,t),J=1/G[3]/o*w;return(ie=G)[0]=(se=G)[0]*(pe=[J,J,m?1/G[3]:J,J])[0],ie[1]=se[1]*pe[1],ie[2]=se[2]*pe[2],ie[3]=se[3]*pe[3],ie;var ie,se,pe}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{const G=Jo([],yd([],ac([],E[B[0]],E[B[1]]),ac([],E[B[2]],E[B[1]]))),J=-Va(G,E[B[1]]);return G.concat(J)});return new Nh(E,P)}}class Qo{static fromPoints(t){const o=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const m of t)Ko(o,o,m),Uc(u,u,m);return new Qo(o,u)}static applyTransform(t,o){const u=t.getCorners();for(let m=0;m<u.length;++m)Fs(u[m],u[m],o);return Qo.fromPoints(u)}constructor(t,o){this.min=t,this.max=o,this.center=ol([],kc([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],u=vd(this.min),m=vd(this.max);for(let w=0;w<o.length;w++)u[w]=o[w]?this.min[w]:this.center[w],m[w]=o[w]?this.center[w]:this.max[w];return m[2]=this.max[2],new Qo(u,m)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,o=this.max;return[[t[0],t[1],t[2]],[o[0],t[1],t[2]],[o[0],o[1],t[2]],[t[0],o[1],t[2]],[t[0],t[1],o[2]],[o[0],t[1],o[2]],[o[0],o[1],o[2]],[t[0],o[1],o[2]]]}intersects(t){const o=this.getCorners();let u=!0;for(let m=0;m<t.planes.length;m++){const w=t.planes[m];let E=0;for(let P=0;P<o.length;P++)E+=Va(w,o[P])+w[3]>=0;if(0===E)return 0;E!==o.length&&(u=!1)}if(u)return 2;for(let m=0;m<3;m++){let w=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let P=0;P<t.points.length;P++){const B=t.points[P][m]-this.min[m];w=Math.min(w,B),E=Math.max(E,B)}if(E<0||w>this.max[m]-this.min[m])return 0}return 1}}const Sp=5,bd=6,lc=Sn/Math.PI/2,Mp=16383,sh=[64,32,16],Hl=-lc,El=lc,oh=[new Qo([Hl,Hl,Hl],[El,El,El]),new Qo([Hl,Hl,Hl],[0,0,El]),new Qo([0,Hl,Hl],[El,0,El]),new Qo([Hl,0,Hl],[0,El,El]),new Qo([0,0,Hl],[El,El,El])];function wd(r){return r*lc/ch}function Gf(r,t,o,u=!0){const m=ol([],r._camera.position,r.worldSize),w=[t,o,1,1];hu(w,w,r.pixelMatrixInverse),Cp(w,w,1/w[3]);const E=Jo([],ac([],w,m)),P=r.globeMatrix,B=[P[12],P[13],P[14]],G=ac([],B,m),J=Tu(G),ie=Jo([],G),se=r.worldSize/(2*Math.PI),pe=Va(ie,E),ge=Math.asin(se/J);if(ge<Math.acos(pe)){if(!u)return null;const Xi=[],mi=[];ol(Xi,E,J/pe),Jo(mi,ac(mi,Xi,G)),Jo(E,kc(E,G,ol(E,mi,Math.tan(ge)*J)))}const Se=[];new xd(m,E).closestPointOnSphere(B,se,Se);const Ge=Jo([],un(P,0)),lt=Jo([],un(P,1)),Et=Jo([],un(P,2)),ut=Va(Ge,Se),Ct=Va(lt,Se),At=Va(Et,Se),Lt=ct(Math.asin(-Ct/se));let ui=ct(Math.atan2(ut,At));ui=r.center.lng+function(Xi,mi){const Ai=(mi-Xi+180)%360-180;return Ai<-180?Ai+360:Ai}(r.center.lng,ui);const ii=hc(ui),Ci=ai(dc(Lt),0,1);return new uh(ii,Ci)}class ku{constructor(t,o,u){this.a=ac([],t,u),this.b=ac([],o,u),this.center=u;const m=Jo([],this.a),w=Jo([],this.b);this.angle=Math.acos(Va(m,w))}}function Cd(r,t){if(0===r.angle)return null;let o;return o=0===r.a[t]?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[t]/r.a[t]/Math.sin(r.angle)-1/Math.tan(r.angle)),o<0||o>1?null:function(u,m,w,E){const P=Math.sin(w);return u*(Math.sin((1-E)*w)/P)+m*(Math.sin(E*w)/P)}(r.a[t],r.b[t],r.angle,ai(o,0,1))+r.center[t]}function cc(r){if(r.z<=1)return oh[r.z+2*r.y+r.x];const t=Yh(Su(r));return Qo.fromPoints(t)}function uc(r,t,o){return ol(r,r,1-o),Ec(r,r,t,o)}function $c(r,t){const o=Du(t.zoom);if(0===o)return cc(r);const u=Su(r),m=Yh(u),w=hc(u.getWest())*t.worldSize,E=hc(u.getEast())*t.worldSize,P=dc(u.getNorth())*t.worldSize,B=dc(u.getSouth())*t.worldSize,G=[w,P,0],J=[E,P,0],ie=[w,B,0],se=[E,B,0],pe=_p([],t.globeMatrix);return Fs(G,G,pe),Fs(J,J,pe),Fs(ie,ie,pe),Fs(se,se,pe),m[0]=uc(m[0],ie,o),m[1]=uc(m[1],se,o),m[2]=uc(m[2],J,o),m[3]=uc(m[3],G,o),Qo.fromPoints(m)}function Eu(r,t,o){for(const u of r)Fs(u,u,t),ol(u,u,o)}function Su({x:r,y:t,z:o}){const u=1/(1<<o),m=new ns(al(r*u),ea((t+1)*u)),w=new ns(al((r+1)*u),ea(t*u));return new sc(m,w)}function Yh(r){const t=Nt(r.getNorth()),o=Nt(r.getSouth()),u=Math.cos(t),m=Math.cos(o),w=Math.sin(t),E=Math.sin(o),P=r.getWest(),B=r.getEast();return[Gl(m,E,P),Gl(m,E,B),Gl(u,w,B),Gl(u,w,P)]}function Gl(r,t,o,u=lc){return o=Nt(o),[r*Math.sin(o)*u,-t*u,r*Math.cos(o)*u]}function Mu(r,t,o){return Gl(Math.cos(Nt(r)),Math.sin(Nt(r)),t,o)}function ah(r,t,o,u){const m=1<<o.z,w=(r/Sn+o.x)/m;return Mu(ea((t/Sn+o.y)/m),al(w),u)}function Vh({min:r,max:t}){return Mp/Math.max(t[0]-r[0],t[1]-r[1],t[2]-r[2])}const Dp=new Float64Array(16);function lh(r){const t=Vh(r),o=yp(Dp,[t,t,t]);return Cu(o,o,((u=[])[0]=-(m=r.min)[0],u[1]=-m[1],u[2]=-m[2],u));var u,m}function Ip(r){const t=(u=r.min,(o=Dp)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=u[0],o[13]=u[1],o[14]=u[2],o[15]=1,o);var o,u;const m=1/Vh(r);return oc(t,t,[m,m,m])}function Ap(r,t,o,u,m){const w=function(B){const G=Sn/(2*Math.PI);return B/(2*Math.PI)/G}(o),E=[r,t,-o/(2*Math.PI)],P=Vl(new Float64Array(16));return Cu(P,P,E),oc(P,P,[w,w,w]),vp(P,P,Nt(-m)),zh(P,P,Nt(-u)),P}function Du(r){return fi(Sp,bd,r)}function Lp(r,t){const o=Mu(t.lat,t.lng);return E=(m=Fh([],function(ge){const Se=Mu(ge._center.lat,ge._center.lng);let Ge=yd([],Tc(0,1,0),Se);const lt=xp([],-ge.angle,Se);Ge=Fs(Ge,Ge,lt),xp(lt,-ge._pitch,Ge);const Et=Jo([],Se);return ol(Et,Et,wd(ge.cameraToCenterDistance/ge.pixelsPerMeter)),Fs(Et,Et,lt),kc([],Se,Et)}(r),o))[0],P=m[1],B=m[2],G=(w=o)[0],J=w[1],ie=w[2],pe=(se=Math.sqrt(E*E+P*P+B*B)*Math.sqrt(G*G+J*J+ie*ie))&&Va(m,w)/se,Math.acos(Math.min(Math.max(pe,-1),1));var m,w,E,P,B,G,J,ie,se,pe}function Td(r,t){return Lp(r,t)>Math.PI/2*1.01}const Pp=Nt(85),Uf=Math.cos(Pp),$f=Math.sin(Pp),ch=6371008.8,Op=2*Math.PI*ch;class Wc{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wc(Mi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,u=this.lat*o,m=t.lat*o,w=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((t.lng-this.lng)*o);return ch*Math.acos(Math.min(w,1))}toBounds(t=0){const o=360*t/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new sc(new Wc(this.lng-u,this.lat-o),new Wc(this.lng+u,this.lat+o))}toEcef(t){const o=wd(t);return Mu(this.lat,this.lng,lc+o)}static convert(t){if(t instanceof Wc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Wc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Wc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var ns=Wc;function kd(r){return Op*Math.cos(r*Math.PI/180)}function hc(r){return(180+r)/360}function dc(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function jl(r,t){return r/kd(t)}function al(r){return 360*r-180}function ea(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function Wf(r,t){return r*kd(ea(t))}const ta=85.051129;function Xf(r){return 1/Math.cos(r*Math.PI/180)}class uh{constructor(t,o,u=0){this.x=+t,this.y=+o,this.z=+u}static fromLngLat(t,o=0){const u=ns.convert(t);return new uh(hc(u.lng),dc(u.lat),jl(o,u.lat))}toLngLat(){return new ns(al(this.x),ea(this.y))}toAltitude(){return Wf(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Op*Xf(ea(this.y))}}function Rp(r,t,o,u,m,w,E,P,B){const G=(t+u)/2,J=(o+m)/2,ie=new rt(G,J);P(ie),function(se,pe,ge,Se,Ge,lt){const Et=ge-Ge,ut=Se-lt;return Math.abs((Se-pe)*Et-(ge-se)*ut)/Math.hypot(Et,ut)}(ie.x,ie.y,w.x,w.y,E.x,E.y)>=B?(Rp(r,t,o,G,J,w,ie,P,B),Rp(r,G,J,u,m,ie,E,P,B)):r.push(E)}function Zf(r,t,o){let u=r[0],m=u.x,w=u.y;t(u);const E=[u];for(let P=1;P<r.length;P++){const B=r[P],{x:G,y:J}=B;t(B),Rp(E,m,w,G,J,u,B,t,o),m=G,w=J,u=B}return E}function zp(r,t,o,u){if(u(t,o)){const m=t.add(o)._mult(.5);zp(r,t,m,u),zp(r,m,o,u)}else r.push(o)}function Km(r,t){let o=r[0];const u=[o];for(let m=1;m<r.length;m++){const w=r[m];zp(u,o,w,t),o=w}return u}const Fp=Math.pow(2,14)-1,Hh=-Fp-1;function qf(r,t){const o=Math.round(r.x*t),u=Math.round(r.y*t);return r.x=ai(o,Hh,Fp),r.y=ai(u,Hh,Fp),(o<r.x||o>r.x+1||u<r.y||u>r.y+1)&&hn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function Xc(r,t,o){const u=r.loadGeometry(),m=r.extent,w=Sn/m;if(t&&o&&o.projection.isReprojectedInTileSpace){const E=1<<t.z,{scale:P,x:B,y:G,projection:J}=o,ie=se=>{const pe=al((t.x+se.x/m)/E),ge=ea((t.y+se.y/m)/E),Se=J.project(pe,ge);se.x=(Se.x*P-B)*m,se.y=(Se.y*P-G)*m};for(let se=0;se<u.length;se++)if(1!==r.type)u[se]=Zf(u[se],ie,1);else{const pe=[];for(const ge of u[se])ge.x<0||ge.x>=m||ge.y<0||ge.y>=m||(ie(ge),pe.push(ge));u[se]=pe}}for(const E of u)for(const P of E)qf(P,w);return u}function Ia(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?Xc(r):[]}}function hh(r,t,o,u,m){r.emplaceBack(2*t+(u+1)/2,2*o+(m+1)/2)}function dh(r,t,o){r.emplaceBack(t.x,t.y,t.z,16384*o[0],16384*o[1],16384*o[2])}class Gh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Gi,this.indexArray=new On,this.segments=new zs,this.programConfigurations=new jc(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u,m){const w=this.layers[0],E=[];let P=null;"circle"===w.type&&(P=w.layout.get("circle-sort-key"));for(const{feature:G,id:J,index:ie,sourceLayerIndex:se}of t){const pe=this.layers[0]._featureFilter.needGeometry,ge=Ia(G,pe);if(!this.layers[0]._featureFilter.filter(new Q(this.zoom),ge,u))continue;const Se=P?P.evaluate(ge,{},u):void 0,Ge={id:J,properties:G.properties,type:G.type,sourceLayerIndex:se,index:ie,geometry:pe?ge.geometry:Xc(G,u,m),patterns:{},sortKey:Se};E.push(Ge)}P&&E.sort((G,J)=>G.sortKey-J.sortKey);let B=null;"globe"===m.projection.name&&(this.globeExtVertexArray=new Wi,B=m.projection);for(const G of E){const{geometry:J,index:ie,sourceLayerIndex:se}=G,pe=t[ie].feature;this.addFeature(G,J,ie,o.availableImages,u,B),o.featureIndex.insert(pe,J,ie,se,this.index)}}update(t,o,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gd.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Rf.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,o,u,m,w,E){for(const P of o)for(const B of P){const G=B.x,J=B.y;if(G<0||G>=Sn||J<0||J>=Sn)continue;if(E){const pe=E.projectTilePoint(G,J,w),ge=E.upVector(w,G,J),Se=this.globeExtVertexArray;dh(Se,pe,ge),dh(Se,pe,ge),dh(Se,pe,ge),dh(Se,pe,ge)}const ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),se=ie.vertexLength;hh(this.layoutVertexArray,G,J,-1,-1),hh(this.layoutVertexArray,G,J,1,-1),hh(this.layoutVertexArray,G,J,1,1),hh(this.layoutVertexArray,G,J,-1,1),this.indexArray.emplaceBack(se,se+1,se+2),this.indexArray.emplaceBack(se,se+2,se+3),ie.vertexLength+=4,ie.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},m,w)}}function no(r,t){for(let o=0;o<r.length;o++)if(pu(t,r[o]))return!0;for(let o=0;o<t.length;o++)if(pu(r,t[o]))return!0;return!!Ed(r,t)}function jh(r,t,o){return!!pu(r,t)||!!Sd(t,r,o)}function Iu(r,t){if(1===r.length)return Bp(t,r[0]);for(let o=0;o<t.length;o++){const u=t[o];for(let m=0;m<u.length;m++)if(pu(r,u[m]))return!0}for(let o=0;o<r.length;o++)if(Bp(t,r[o]))return!0;for(let o=0;o<t.length;o++)if(Ed(r,t[o]))return!0;return!1}function Kf(r,t,o){if(r.length>1){if(Ed(r,t))return!0;for(let u=0;u<t.length;u++)if(Sd(t[u],r,o))return!0}for(let u=0;u<r.length;u++)if(Sd(r[u],t,o))return!0;return!1}function Ed(r,t){if(0===r.length||0===t.length)return!1;for(let o=0;o<r.length-1;o++){const u=r[o],m=r[o+1];for(let w=0;w<t.length-1;w++)if(Jm(u,m,t[w],t[w+1]))return!0}return!1}function Jm(r,t,o,u){return Ui(r,o,u)!==Ui(t,o,u)&&Ui(r,t,o)!==Ui(r,t,u)}function Sd(r,t,o){const u=o*o;if(1===t.length)return r.distSqr(t[0])<u;for(let m=1;m<t.length;m++)if(Md(r,t[m-1],t[m])<u)return!0;return!1}function Md(r,t,o){const u=t.distSqr(o);if(0===u)return r.distSqr(t);const m=((r.x-t.x)*(o.x-t.x)+(r.y-t.y)*(o.y-t.y))/u;return r.distSqr(m<0?t:m>1?o:o.sub(t)._mult(m)._add(t))}function Bp(r,t){let o,u,m,w=!1;for(let E=0;E<r.length;E++){o=r[E];for(let P=0,B=o.length-1;P<o.length;B=P++)u=o[P],m=o[B],u.y>t.y!=m.y>t.y&&t.x<(m.x-u.x)*(t.y-u.y)/(m.y-u.y)+u.x&&(w=!w)}return w}function pu(r,t){let o=!1;for(let u=0,m=r.length-1;u<r.length;m=u++){const w=r[u],E=r[m];w.y>t.y!=E.y>t.y&&t.x<(E.x-w.x)*(t.y-w.y)/(E.y-w.y)+w.x&&(o=!o)}return o}function Uh(r,t,o,u,m){for(const E of r)if(t<=E.x&&o<=E.y&&u>=E.x&&m>=E.y)return!0;const w=[new rt(t,o),new rt(t,m),new rt(u,m),new rt(u,o)];if(r.length>2)for(const E of w)if(pu(r,E))return!0;for(let E=0;E<r.length-1;E++)if(ph(r[E],r[E+1],w))return!0;return!1}function ph(r,t,o){const u=o[0],m=o[2];if(r.x<u.x&&t.x<u.x||r.x>m.x&&t.x>m.x||r.y<u.y&&t.y<u.y||r.y>m.y&&t.y>m.y)return!1;const w=Ui(r,t,o[0]);return w!==Ui(r,t,o[1])||w!==Ui(r,t,o[2])||w!==Ui(r,t,o[3])}function Zc(r,t,o){const u=t.paint.get(r).value;return"constant"===u.kind?u.value:o.programConfigurations.get(t.id).getMaxValue(r)}function Au(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Dd(r,t,o,u,m){if(!t[0]&&!t[1])return r;const w=rt.convert(t)._mult(m);"viewport"===o&&w._rotate(-u);const E=[];for(let P=0;P<r.length;P++)E.push(r[P].sub(w));return E}function Np(r,t,o,u){const m=rt.convert(r)._mult(u);return"viewport"===t&&m._rotate(-o),m}vn(Gh,"CircleBucket",{omit:["layers"]});const Yp=new vt({"circle-sort-key":new We(M.layout_circle["circle-sort-key"])});var Id={paint:new vt({"circle-radius":new We(M.paint_circle["circle-radius"]),"circle-color":new We(M.paint_circle["circle-color"]),"circle-blur":new We(M.paint_circle["circle-blur"]),"circle-opacity":new We(M.paint_circle["circle-opacity"]),"circle-translate":new we(M.paint_circle["circle-translate"]),"circle-translate-anchor":new we(M.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new we(M.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new we(M.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new We(M.paint_circle["circle-stroke-width"]),"circle-stroke-color":new We(M.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new We(M.paint_circle["circle-stroke-opacity"])}),layout:Yp};function Ad(r,t,o,u,m,w,E,P,B){if(w&&r.queryGeometry.isAboveHorizon)return!1;w&&(B*=r.pixelToTileUnitsFactor);const G=r.tileID.canonical,J=o.projection.upVectorScale(G,o.center.lat,o.worldSize).metersToTile;for(const ie of t)for(const se of ie){const pe=se.add(P),ge=m&&o.elevation?o.elevation.exaggeration()*m.getElevationAt(pe.x,pe.y,!0):0,Se=o.projection.projectTilePoint(pe.x,pe.y,G);if(ge>0){const ut=o.projection.upVector(G,pe.x,pe.y);Se.x+=ut[0]*J*ge,Se.y+=ut[1]*J*ge,Se.z+=ut[2]*J*ge}const Ge=w?pe:$h(Se.x,Se.y,Se.z,u),lt=w?r.tilespaceRays.map(ut=>Pd(ut,ge)):r.queryGeometry.screenGeometry,Et=hu([],[Se.x,Se.y,Se.z,1],u);if(!E&&w?B*=Et[3]/o.cameraToCenterDistance:E&&!w&&(B*=o.cameraToCenterDistance/Et[3]),w){const ut=ea((se.y/Sn+G.y)/(1<<G.z));B/=o.projection.pixelsPerMeter(ut,1)/jl(1,ut)}if(jh(lt,Ge,B))return!0}return!1}function $h(r,t,o,u){const m=hu([],[r,t,o,1],u);return new rt(m[0]/m[3],m[1]/m[3])}const Ld=Tc(0,0,0),Wh=Tc(0,0,1);function Pd(r,t){const o=_d();return Ld[2]=t,r.intersectsPlane(Ld,Wh,o),new rt(o[0],o[1])}class Jf extends Gh{}function Qf(r,{width:t,height:o},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==t*o*u)throw new RangeError("mismatched image size")}else m=new Uint8Array(t*o*u);return r.width=t,r.height=o,r.data=m,r}function em(r,t,o){const{width:u,height:m}=t;u===r.width&&m===r.height||(Vp(r,t,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,u),height:Math.min(r.height,m)},o),r.width=u,r.height=m,r.data=t.data)}function Vp(r,t,o,u,m,w){if(0===m.width||0===m.height)return t;if(m.width>r.width||m.height>r.height||o.x>r.width-m.width||o.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>t.width||m.height>t.height||u.x>t.width-m.width||u.y>t.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const E=r.data,P=t.data;for(let B=0;B<m.height;B++){const G=((o.y+B)*r.width+o.x)*w,J=((u.y+B)*t.width+u.x)*w;for(let ie=0;ie<m.width*w;ie++)P[J+ie]=E[G+ie]}return t}vn(Jf,"HeatmapBucket",{omit:["layers"]});class qc{constructor(t,o){Qf(this,t,1,o)}resize(t){em(this,new qc(t),1)}clone(){return new qc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,m,w){Vp(t,o,u,m,w,1)}}class Ha{constructor(t,o){Qf(this,t,4,o)}resize(t){em(this,new Ha(t),4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Ha({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,m,w){Vp(t,o,u,m,w,4)}}vn(qc,"AlphaImage"),vn(Ha,"RGBAImage");var Qm={paint:new vt({"heatmap-radius":new We(M.paint_heatmap["heatmap-radius"]),"heatmap-weight":new We(M.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new we(M.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gt(M.paint_heatmap["heatmap-color"]),"heatmap-opacity":new we(M.paint_heatmap["heatmap-opacity"])})};function Hp(r){const t={},o=r.resolution||256,u=r.clips?r.clips.length:1,m=r.image||new Ha({width:o,height:u}),w=(E,P,B)=>{t[r.evaluationKey]=B;const G=r.expression.evaluate(t);m.data[E+P+0]=Math.floor(255*G.r/G.a),m.data[E+P+1]=Math.floor(255*G.g/G.a),m.data[E+P+2]=Math.floor(255*G.b/G.a),m.data[E+P+3]=Math.floor(255*G.a)};if(r.clips)for(let E=0,P=0;E<u;++E,P+=4*o)for(let B=0,G=0;B<o;B++,G+=4){const J=B/(o-1),{start:ie,end:se}=r.clips[E];w(P,G,ie*(1-J)+se*J)}else for(let E=0,P=0;E<o;E++,P+=4)w(0,P,E/(o-1));return m}var eg={paint:new vt({"hillshade-illumination-direction":new we(M.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new we(M.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new we(M.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new we(M.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new we(M.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new we(M.paint_hillshade["hillshade-accent-color"])})};const tm=Ut([{name:"a_pos",components:2,type:"Int16"}],4),{members:tg}=tm;var Xh={exports:{}};function fh(r,t,o){o=o||2;var u,m,w,E,P,B,G,J=t&&t.length,ie=J?t[0]*o:r.length,se=mh(r,0,ie,o,!0),pe=[];if(!se||se.next===se.prev)return pe;if(J&&(se=function(Se,Ge,lt,Et){var ut,Ct,At,Lt=[];for(ut=0,Ct=Ge.length;ut<Ct;ut++)(At=mh(Se,Ge[ut]*Et,ut<Ct-1?Ge[ut+1]*Et:Se.length,Et,!1))===At.next&&(At.steiner=!0),Lt.push(sm(At));for(Lt.sort(Up),ut=0;ut<Lt.length;ut++)lt=ll(Lt[ut],lt);return lt}(r,t,se,o)),r.length>80*o){u=w=r[0],m=E=r[1];for(var ge=o;ge<ie;ge+=o)(P=r[ge])<u&&(u=P),(B=r[ge+1])<m&&(m=B),P>w&&(w=P),B>E&&(E=B);G=0!==(G=Math.max(w-u,E-m))?32767/G:0}return Lu(se,pe,o,u,m,G,0),pe}function mh(r,t,o,u,m){var w,E;if(m===_h(r,t,o,u)>0)for(w=t;w<o;w+=u)E=zd(w,r[w],r[w+1],E);else for(w=o-u;w>=t;w-=u)E=zd(w,r[w],r[w+1],E);return E&&Ou(E,E.next)&&(Jc(E),E=E.next),E}function Ul(r,t){if(!r)return r;t||(t=r);var o,u=r;do{if(o=!1,u.steiner||!Ou(u,u.next)&&0!==Es(u.prev,u,u.next))u=u.next;else{if(Jc(u),(u=t=u.prev)===u.next)break;o=!0}}while(o||u!==t);return t}function Lu(r,t,o,u,m,w,E){if(r){!E&&w&&function(J,ie,se,pe){var ge=J;do{0===ge.z&&(ge.z=Od(ge.x,ge.y,ie,se,pe)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next}while(ge!==J);ge.prevZ.nextZ=null,ge.prevZ=null,function(Se){var Ge,lt,Et,ut,Ct,At,Lt,ui,ii=1;do{for(lt=Se,Se=null,Ct=null,At=0;lt;){for(At++,Et=lt,Lt=0,Ge=0;Ge<ii&&(Lt++,Et=Et.nextZ);Ge++);for(ui=ii;Lt>0||ui>0&&Et;)0!==Lt&&(0===ui||!Et||lt.z<=Et.z)?(ut=lt,lt=lt.nextZ,Lt--):(ut=Et,Et=Et.nextZ,ui--),Ct?Ct.nextZ=ut:Se=ut,ut.prevZ=Ct,Ct=ut;lt=Et}Ct.nextZ=null,ii*=2}while(At>1)}(ge)}(r,u,m,w);for(var P,B,G=r;r.prev!==r.next;)if(P=r.prev,B=r.next,w?im(r,u,m,w):Gp(r))t.push(P.i/o|0),t.push(r.i/o|0),t.push(B.i/o|0),Jc(r),r=B.next,G=B.next;else if((r=B)===G){E?1===E?Lu(r=jp(Ul(r),t,o),t,o,u,m,w,2):2===E&&nm(r,t,o,u,m,w):Lu(Ul(r),t,o,u,m,w,1);break}}}function Gp(r){var t=r.prev,o=r,u=r.next;if(Es(t,o,u)>=0)return!1;for(var m=t.x,w=o.x,E=u.x,P=t.y,B=o.y,G=u.y,J=m<w?m<E?m:E:w<E?w:E,ie=P<B?P<G?P:G:B<G?B:G,se=m>w?m>E?m:E:w>E?w:E,pe=P>B?P>G?P:G:B>G?B:G,ge=u.next;ge!==t;){if(ge.x>=J&&ge.x<=se&&ge.y>=ie&&ge.y<=pe&&Pu(m,P,w,B,E,G,ge.x,ge.y)&&Es(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function im(r,t,o,u){var m=r.prev,w=r,E=r.next;if(Es(m,w,E)>=0)return!1;for(var P=m.x,B=w.x,G=E.x,J=m.y,ie=w.y,se=E.y,pe=P<B?P<G?P:G:B<G?B:G,ge=J<ie?J<se?J:se:ie<se?ie:se,Se=P>B?P>G?P:G:B>G?B:G,Ge=J>ie?J>se?J:se:ie>se?ie:se,lt=Od(pe,ge,t,o,u),Et=Od(Se,Ge,t,o,u),ut=r.prevZ,Ct=r.nextZ;ut&&ut.z>=lt&&Ct&&Ct.z<=Et;){if(ut.x>=pe&&ut.x<=Se&&ut.y>=ge&&ut.y<=Ge&&ut!==m&&ut!==E&&Pu(P,J,B,ie,G,se,ut.x,ut.y)&&Es(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,Ct.x>=pe&&Ct.x<=Se&&Ct.y>=ge&&Ct.y<=Ge&&Ct!==m&&Ct!==E&&Pu(P,J,B,ie,G,se,Ct.x,Ct.y)&&Es(Ct.prev,Ct,Ct.next)>=0))return!1;Ct=Ct.nextZ}for(;ut&&ut.z>=lt;){if(ut.x>=pe&&ut.x<=Se&&ut.y>=ge&&ut.y<=Ge&&ut!==m&&ut!==E&&Pu(P,J,B,ie,G,se,ut.x,ut.y)&&Es(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;Ct&&Ct.z<=Et;){if(Ct.x>=pe&&Ct.x<=Se&&Ct.y>=ge&&Ct.y<=Ge&&Ct!==m&&Ct!==E&&Pu(P,J,B,ie,G,se,Ct.x,Ct.y)&&Es(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}return!0}function jp(r,t,o){var u=r;do{var m=u.prev,w=u.next.next;!Ou(m,w)&&Rd(m,u,u.next,w)&&pc(m,w)&&pc(w,m)&&(t.push(m.i/o|0),t.push(u.i/o|0),t.push(w.i/o|0),Jc(u),Jc(u.next),u=r=w),u=u.next}while(u!==r);return Ul(u)}function nm(r,t,o,u,m,w){var E=r;do{for(var P=E.next.next;P!==E.prev;){if(E.i!==P.i&&om(E,P)){var B=$p(E,P);return E=Ul(E,E.next),B=Ul(B,B.next),Lu(E,t,o,u,m,w,0),void Lu(B,t,o,u,m,w,0)}P=P.next}E=E.next}while(E!==r)}function Up(r,t){return r.x-t.x}function ll(r,t){var o=function(m,w){var E,P=w,B=m.x,G=m.y,J=-1/0;do{if(G<=P.y&&G>=P.next.y&&P.next.y!==P.y){var ie=P.x+(G-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(ie<=B&&ie>J&&(J=ie,E=P.x<P.next.x?P:P.next,ie===B))return E}P=P.next}while(P!==w);if(!E)return null;var se,pe=E,ge=E.x,Se=E.y,Ge=1/0;P=E;do{B>=P.x&&P.x>=ge&&B!==P.x&&Pu(G<Se?B:J,G,ge,Se,G<Se?J:B,G,P.x,P.y)&&(se=Math.abs(G-P.y)/(B-P.x),pc(P,m)&&(se<Ge||se===Ge&&(P.x>E.x||P.x===E.x&&rm(E,P)))&&(E=P,Ge=se)),P=P.next}while(P!==pe);return E}(r,t);if(!o)return t;var u=$p(o,r);return Ul(u,u.next),Ul(o,o.next)}function rm(r,t){return Es(r.prev,r,t.prev)<0&&Es(t.next,r,r.next)<0}function Od(r,t,o,u,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-o)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*m|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function sm(r){var t=r,o=r;do{(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next}while(t!==r);return o}function Pu(r,t,o,u,m,w,E,P){return(m-E)*(t-P)>=(r-E)*(w-P)&&(r-E)*(u-P)>=(o-E)*(t-P)&&(o-E)*(w-P)>=(m-E)*(u-P)}function om(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(o,u){var m=o;do{if(m.i!==o.i&&m.next.i!==o.i&&m.i!==u.i&&m.next.i!==u.i&&Rd(m,m.next,o,u))return!0;m=m.next}while(m!==o);return!1}(r,t)&&(pc(r,t)&&pc(t,r)&&function(o,u){var m=o,w=!1,E=(o.x+u.x)/2,P=(o.y+u.y)/2;do{m.y>P!=m.next.y>P&&m.next.y!==m.y&&E<(m.next.x-m.x)*(P-m.y)/(m.next.y-m.y)+m.x&&(w=!w),m=m.next}while(m!==o);return w}(r,t)&&(Es(r.prev,r,t.prev)||Es(r,t.prev,t))||Ou(r,t)&&Es(r.prev,r,r.next)>0&&Es(t.prev,t,t.next)>0)}function Es(r,t,o){return(t.y-r.y)*(o.x-t.x)-(t.x-r.x)*(o.y-t.y)}function Ou(r,t){return r.x===t.x&&r.y===t.y}function Rd(r,t,o,u){var m=gh(Es(r,t,o)),w=gh(Es(r,t,u)),E=gh(Es(o,u,r)),P=gh(Es(o,u,t));return m!==w&&E!==P||!(0!==m||!Kc(r,o,t))||!(0!==w||!Kc(r,u,t))||!(0!==E||!Kc(o,r,u))||!(0!==P||!Kc(o,t,u))}function Kc(r,t,o){return t.x<=Math.max(r.x,o.x)&&t.x>=Math.min(r.x,o.x)&&t.y<=Math.max(r.y,o.y)&&t.y>=Math.min(r.y,o.y)}function gh(r){return r>0?1:r<0?-1:0}function pc(r,t){return Es(r.prev,r,r.next)<0?Es(r,t,r.next)>=0&&Es(r,r.prev,t)>=0:Es(r,t,r.prev)<0||Es(r,r.next,t)<0}function $p(r,t){var o=new Wp(r.i,r.x,r.y),u=new Wp(t.i,t.x,t.y),m=r.next,w=t.prev;return r.next=t,t.prev=r,o.next=m,m.prev=o,u.next=o,o.prev=u,w.next=u,u.prev=w,u}function zd(r,t,o,u){var m=new Wp(r,t,o);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function Jc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Wp(r,t,o){this.i=r,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _h(r,t,o,u){for(var m=0,w=t,E=o-u;w<o;w+=u)m+=(r[E]-r[w])*(r[w+1]+r[E+1]),E=w;return m}Xh.exports=fh,Xh.exports.default=fh,fh.deviation=function(r,t,o,u){var m=t&&t.length,w=Math.abs(_h(r,0,m?t[0]*o:r.length,o));if(m)for(var E=0,P=t.length;E<P;E++)w-=Math.abs(_h(r,t[E]*o,E<P-1?t[E+1]*o:r.length,o));var B=0;for(E=0;E<u.length;E+=3){var G=u[E]*o,J=u[E+1]*o,ie=u[E+2]*o;B+=Math.abs((r[G]-r[ie])*(r[J+1]-r[G+1])-(r[G]-r[J])*(r[ie+1]-r[G+1]))}return 0===w&&0===B?0:Math.abs((B-w)/w)},fh.flatten=function(r){for(var t=r[0][0].length,o={vertices:[],holes:[],dimensions:t},u=0,m=0;m<r.length;m++){for(var w=0;w<r[m].length;w++)for(var E=0;E<t;E++)o.vertices.push(r[m][w][E]);m>0&&o.holes.push(u+=r[m-1].length)}return o};var Fd=pt(Xh.exports);function am(r,t,o,u,m){Xp(r,t,o||0,u||r.length-1,m||vh)}function Xp(r,t,o,u,m){for(;u>o;){if(u-o>600){var w=u-o+1,E=t-o+1,P=Math.log(w),B=.5*Math.exp(2*P/3),G=.5*Math.sqrt(P*B*(w-B)/w)*(E-w/2<0?-1:1);Xp(r,t,Math.max(o,Math.floor(t-E*B/w+G)),Math.min(u,Math.floor(t+(w-E)*B/w+G)),m)}var J=r[t],ie=o,se=u;for(Zh(r,o,t),m(r[u],J)>0&&Zh(r,o,u);ie<se;){for(Zh(r,ie,se),ie++,se--;m(r[ie],J)<0;)ie++;for(;m(r[se],J)>0;)se--}0===m(r[o],J)?Zh(r,o,se):Zh(r,++se,u),se<=t&&(o=se+1),t<=se&&(u=se-1)}}function Zh(r,t,o){var u=r[t];r[t]=r[o],r[o]=u}function vh(r,t){return r<t?-1:r>t?1:0}function Bd(r,t){const o=r.length;if(o<=1)return[r];const u=[];let m,w;for(let E=0;E<o;E++){const P=cn(r[E]);0!==P&&(r[E].area=Math.abs(P),void 0===w&&(w=P<0),w===P<0?(m&&u.push(m),m=[r[E]]):m.push(r[E]))}if(m&&u.push(m),t>1)for(let E=0;E<u.length;E++)u[E].length<=t||(am(u[E],t,1,u[E].length-1,A_),u[E]=u[E].slice(0,t));return u}function A_(r,t){return t.area-r.area}function lm(r,t,o){const u=o.patternDependencies;let m=!1;for(const w of t){const E=w.paint.get(`${r}-pattern`);E.isConstant()||(m=!0);const P=E.constantOr(null);P&&(m=!0,u[P]=!0)}return m}function Zp(r,t,o,u,m){const w=m.patternDependencies;for(const E of t){const P=E.paint.get(`${r}-pattern`).value;if("constant"!==P.kind){let B=P.evaluate({zoom:u},o,{},m.availableImages);B=B&&B.name?B.name:B,w[B]=!0,o.patterns[E.id]=B}}return o}class Nd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gi,this.indexArray=new On,this.indexArray2=new Ks,this.programConfigurations=new jc(t.layers,t.zoom),this.segments=new zs,this.segments2=new zs,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=t.projection}populate(t,o,u,m){this.hasPattern=lm("fill",this.layers,o);const w=this.layers[0].layout.get("fill-sort-key"),E=[];for(const{feature:P,id:B,index:G,sourceLayerIndex:J}of t){const ie=this.layers[0]._featureFilter.needGeometry,se=Ia(P,ie);if(!this.layers[0]._featureFilter.filter(new Q(this.zoom),se,u))continue;const pe=w?w.evaluate(se,{},u,o.availableImages):void 0,ge={id:B,properties:P.properties,type:P.type,sourceLayerIndex:J,index:G,geometry:ie?se.geometry:Xc(P,u,m),patterns:{},sortKey:pe};E.push(ge)}w&&E.sort((P,B)=>P.sortKey-B.sortKey);for(const P of E){const{geometry:B,index:G,sourceLayerIndex:J}=P;if(this.hasPattern){const ie=Zp("fill",this.layers,P,this.zoom,o);this.patternFeatures.push(ie)}else this.addFeature(P,B,G,u,{},o.availableImages);o.featureIndex.insert(t[G].feature,B,G,J,this.index)}}update(t,o,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u,m)}addFeatures(t,o,u,m,w){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,o,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,tg),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,u,m,w,E=[]){for(const P of Bd(o,500)){let B=0;for(const ge of P)B+=ge.length;const G=this.segments.prepareSegment(B,this.layoutVertexArray,this.indexArray),J=G.vertexLength,ie=[],se=[];for(const ge of P){if(0===ge.length)continue;ge!==P[0]&&se.push(ie.length/2);const Se=this.segments2.prepareSegment(ge.length,this.layoutVertexArray,this.indexArray2),Ge=Se.vertexLength;this.layoutVertexArray.emplaceBack(ge[0].x,ge[0].y),this.indexArray2.emplaceBack(Ge+ge.length-1,Ge),ie.push(ge[0].x),ie.push(ge[0].y);for(let lt=1;lt<ge.length;lt++)this.layoutVertexArray.emplaceBack(ge[lt].x,ge[lt].y),this.indexArray2.emplaceBack(Ge+lt-1,Ge+lt),ie.push(ge[lt].x),ie.push(ge[lt].y);Se.vertexLength+=ge.length,Se.primitiveLength+=ge.length}const pe=Fd(ie,se);for(let ge=0;ge<pe.length;ge+=3)this.indexArray.emplaceBack(J+pe[ge],J+pe[ge+1],J+pe[ge+2]);G.vertexLength+=B,G.primitiveLength+=pe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,E,m)}}vn(Nd,"FillBucket",{omit:["layers","patternFeatures"]});const cm=new vt({"fill-sort-key":new We(M.layout_fill["fill-sort-key"])});var ig={paint:new vt({"fill-antialias":new we(M.paint_fill["fill-antialias"]),"fill-opacity":new We(M.paint_fill["fill-opacity"]),"fill-color":new We(M.paint_fill["fill-color"]),"fill-outline-color":new We(M.paint_fill["fill-outline-color"]),"fill-translate":new we(M.paint_fill["fill-translate"]),"fill-translate-anchor":new we(M.paint_fill["fill-translate-anchor"]),"fill-pattern":new We(M.paint_fill["fill-pattern"])}),layout:cm};const ng=Ut([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),qp=Ut([{name:"a_centroid_pos",components:2,type:"Uint16"}]),um=Ut([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Yd}=ng;var qh={},Sc=Zt,Vd=fu;function fu(r,t,o,u,m){this.properties={},this.extent=o,this.type=0,this._pbf=r,this._geometry=-1,this._keys=u,this._values=m,r.readFields(Kp,this,t)}function Kp(r,t,o){1==r?t.id=o.readVarint():2==r?function(u,m){for(var w=u.readVarint()+u.pos;u.pos<w;){var E=m._keys[u.readVarint()],P=m._values[u.readVarint()];m.properties[E]=P}}(o,t):3==r?t.type=o.readVarint():4==r&&(t._geometry=o.pos)}function Ga(r){for(var t,o,u=0,m=0,w=r.length,E=w-1;m<w;E=m++)u+=((o=r[E]).x-(t=r[m]).x)*(t.y+o.y);return u}fu.types=["Unknown","Point","LineString","Polygon"],fu.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var t,o=r.readVarint()+r.pos,u=1,m=0,w=0,E=0,P=[];r.pos<o;){if(m<=0){var B=r.readVarint();u=7&B,m=B>>3}if(m--,1===u||2===u)w+=r.readSVarint(),E+=r.readSVarint(),1===u&&(t&&P.push(t),t=[]),t.push(new Sc(w,E));else{if(7!==u)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&P.push(t),P},fu.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var t=r.readVarint()+r.pos,o=1,u=0,m=0,w=0,E=1/0,P=-1/0,B=1/0,G=-1/0;r.pos<t;){if(u<=0){var J=r.readVarint();o=7&J,u=J>>3}if(u--,1===o||2===o)(m+=r.readSVarint())<E&&(E=m),m>P&&(P=m),(w+=r.readSVarint())<B&&(B=w),w>G&&(G=w);else if(7!==o)throw new Error("unknown command "+o)}return[E,B,P,G]},fu.prototype.toGeoJSON=function(r,t,o){var u,m,w=this.extent*Math.pow(2,o),E=this.extent*r,P=this.extent*t,B=this.loadGeometry(),G=fu.types[this.type];function J(pe){for(var ge=0;ge<pe.length;ge++){var Se=pe[ge];pe[ge]=[360*(Se.x+E)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(Se.y+P)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(u=0;u<B.length;u++)ie[u]=B[u][0];J(B=ie);break;case 2:for(u=0;u<B.length;u++)J(B[u]);break;case 3:for(B=function(pe){var ge=pe.length;if(ge<=1)return[pe];for(var Se,Ge,lt=[],Et=0;Et<ge;Et++){var ut=Ga(pe[Et]);0!==ut&&(void 0===Ge&&(Ge=ut<0),Ge===ut<0?(Se&&lt.push(Se),Se=[pe[Et]]):Se.push(pe[Et]))}return Se&&lt.push(Se),lt}(B),u=0;u<B.length;u++)for(m=0;m<B[u].length;m++)J(B[u][m])}1===B.length?B=B[0]:G="Multi"+G;var se={type:"Feature",geometry:{type:G,coordinates:B},properties:this.properties};return"id"in this&&(se.id=this.id),se};var Ru=Vd,_=D;function D(r,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(C,this,t),this.length=this._features.length}function C(r,t,o){15===r?t.version=o.readVarint():1===r?t.name=o.readString():5===r?t.extent=o.readVarint():2===r?t._features.push(o.pos):3===r?t._keys.push(o.readString()):4===r&&t._values.push(function(u){for(var m=null,w=u.readVarint()+u.pos;u.pos<w;){var E=u.readVarint()>>3;m=1===E?u.readString():2===E?u.readFloat():3===E?u.readDouble():4===E?u.readVarint64():5===E?u.readVarint():6===E?u.readSVarint():7===E?u.readBoolean():null}return m}(o))}D.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var t=this._pbf.readVarint()+this._pbf.pos;return new Ru(this._pbf,t,this.extent,this._keys,this._values)};var N=_;function W(r,t,o){if(3===r){var u=new N(o,o.readVarint()+o.pos);u.length&&(t[u.name]=u)}}var me=qh.VectorTile=function(r,t){this.layers=r.readFields(W,{},t)},ft=qh.VectorTileFeature=Vd;function vi(r,t,o,u){const m=[],w=0===u?(E,P,B,G,J,ie)=>{E.push(new rt(ie,B+(ie-P)/(G-P)*(J-B)))}:(E,P,B,G,J,ie)=>{E.push(new rt(P+(ie-B)/(J-B)*(G-P),ie))};for(const E of r){const P=[];for(const B of E){if(B.length<=2)continue;const G=[];for(let se=0;se<B.length-1;se++){const pe=B[se].x,ge=B[se].y,Se=B[se+1].x,Ge=B[se+1].y,lt=0===u?pe:ge,Et=0===u?Se:Ge;lt<t?Et>t&&w(G,pe,ge,Se,Ge,t):lt>o?Et<o&&w(G,pe,ge,Se,Ge,o):G.push(B[se]),Et<t&&lt>=t&&w(G,pe,ge,Se,Ge,t),Et>o&&lt<=o&&w(G,pe,ge,Se,Ge,o)}let J=B[B.length-1];const ie=0===u?J.x:J.y;ie>=t&&ie<=o&&G.push(J),G.length&&(J=G[G.length-1],G[0].x===J.x&&G[0].y===J.y||G.push(G[0]),P.push(G))}P.length&&m.push(P)}return m}qh.VectorTileLayer=_;const on=ft.types,Nr=Math.pow(2,13);function _s(r,t,o,u,m,w,E,P){r.emplaceBack((t<<1)+E,(o<<1)+w,(Math.floor(u*Nr)<<1)+m,Math.round(P))}function ro(r,t,o){r.emplaceBack(t.x,t.y,t.z,16384*o[0],16384*o[1],16384*o[2])}class ma{constructor(){this.acc=new rt(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new rt(t.x,t.y),this.max=new rt(t.x,t.y))}append(t,o){this.currentPolyCount.edges++,this.acc._add(t);const u=this.min,m=this.max;t.x<u.x?u.x=t.x:t.x>m.x&&(m.x=t.x),t.y<u.y?u.y=t.y:t.y>m.y&&(m.y=t.y),((0===t.x||t.x===Sn)&&t.x===o.x)!=((0===t.y||t.y===Sn)&&t.y===o.y)&&this.processBorderOverlap(t,o),o.x<0!=t.x<0&&this.addBorderIntersection(0,Cr(o.y,t.y,(0-o.x)/(t.x-o.x))),o.x>Sn!=t.x>Sn&&this.addBorderIntersection(1,Cr(o.y,t.y,(Sn-o.x)/(t.x-o.x))),o.y<0!=t.y<0&&this.addBorderIntersection(2,Cr(o.x,t.x,(0-o.y)/(t.y-o.y))),o.y>Sn!=t.y>Sn&&this.addBorderIntersection(3,Cr(o.x,t.x,(Sn-o.y)/(t.y-o.y)))}addBorderIntersection(t,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[t];o<u[0]&&(u[0]=o),o>u[1]&&(u[1]=o)}processBorderOverlap(t,o){if(t.x===o.x){if(t.y===o.y)return;const u=0===t.x?0:1;this.addBorderIntersection(u,o.y),this.addBorderIntersection(u,t.y)}else{const u=0===t.y?2:3;this.addBorderIntersection(u,o.x),this.addBorderIntersection(u,t.x)}}centroid(){const t=this.polyCount.reduce((o,u)=>o+u.edges,0);return 0!==t?this.acc.div(t)._round():new rt(0,0)}span(){return new rt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((t,o)=>t+ +(o[0]!==Number.MAX_VALUE),0)}}class Qc{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new ki,this.centroidVertexArray=new tc,this.indexArray=new On,this.programConfigurations=new jc(t.layers,t.zoom),this.segments=new zs,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=t.enableTerrain}populate(t,o,u,m){this.features=[],this.hasPattern=lm("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(w){const E=Math.exp(Math.PI*(1-w.y/(1<<w.z)*2));return 80150034*E/(E*E+1)/Sn/(1<<w.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:w,id:E,index:P,sourceLayerIndex:B}of t){const G=this.layers[0]._featureFilter.needGeometry,J=Ia(w,G);if(!this.layers[0]._featureFilter.filter(new Q(this.zoom),J,u))continue;const ie={id:E,sourceLayerIndex:B,index:P,geometry:G?J.geometry:Xc(w,u,m),properties:w.properties,type:w.type,patterns:{}},se=this.layoutVertexArray.length;this.hasPattern?this.features.push(Zp("fill-extrusion",this.layers,ie,this.zoom,o)):this.addFeature(ie,ie.geometry,P,u,{},o.availableImages,m),o.featureIndex.insert(w,ie.geometry,P,B,this.index,se)}this.sortBorders()}addFeatures(t,o,u,m,w){for(const E of this.features){const{geometry:P}=E;this.addFeature(E,P,E.index,o,u,m,w)}this.sortBorders()}update(t,o,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Yd),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,um.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,qp.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,u,m,w,E,P){const B=[new rt(0,0),new rt(Sn,Sn)],G=P.projection,J="globe"===G.name,ie=this.enableTerrain&&!J?new ma:null,se="Polygon"===on[t.type];J&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Wi);const pe=Bd(o,500);for(let lt=pe.length-1;lt>=0;lt--){const Et=pe[lt];(0===Et.length||(ge=Et[0]).every(ut=>ut.x<=0)||ge.every(ut=>ut.x>=Sn)||ge.every(ut=>ut.y<=0)||ge.every(ut=>ut.y>=Sn))&&pe.splice(lt,1)}var ge;let Se;if(J)Se=og(pe,B,m);else{Se=[];for(const lt of pe)Se.push({polygon:lt,bounds:B})}const Ge=se?this.edgeRadius:0;for(const{polygon:lt,bounds:Et}of Se){let ut=0,Ct=0;for(const Lt of lt)se&&!Lt[0].equals(Lt[Lt.length-1])&&Lt.push(Lt[0]),Ct+=se?Lt.length-1:Lt.length;const At=this.segments.prepareSegment((se?5:4)*Ct,this.layoutVertexArray,this.indexArray);if(se){const Lt=[],ui=[];ut=At.vertexLength;for(const Ci of lt){let Xi,mi;Ci.length&&Ci!==lt[0]&&ui.push(Lt.length/2),Xi=Ci[1].sub(Ci[0])._perp()._unit();for(let Ai=1;Ai<Ci.length;Ai++){const Ii=Ci[Ai],Ni=Ci[Ai===Ci.length-1?1:Ai+1];let{x:Ki,y:bi}=Ii;if(Ge){mi=Ni.sub(Ii)._perp()._unit();const pn=Xi.add(mi)._unit(),En=Ge*Math.min(4,1/(Xi.x*pn.x+Xi.y*pn.y));Ki+=En*pn.x,bi+=En*pn.y,Xi=mi}_s(this.layoutVertexArray,Ki,bi,0,0,1,1,0),At.vertexLength++,Lt.push(Ii.x,Ii.y),J&&ro(this.layoutVertexExtArray,G.projectTilePoint(Ki,bi,m),G.upVector(m,Ki,bi))}}const ii=Fd(Lt,ui);for(let Ci=0;Ci<ii.length;Ci+=3)this.indexArray.emplaceBack(ut+ii[Ci],ut+ii[Ci+2],ut+ii[Ci+1]),At.primitiveLength++}for(const Lt of lt){ie&&Lt.length&&ie.startRing(Lt[0]);let ui,ii,Ci,Xi=Lt.length>4&&Kh(Lt[Lt.length-2],Lt[0],Lt[1]),mi=Ge?dm(Lt[Lt.length-2],Lt[0],Lt[1],Ge):0;ii=Lt[1].sub(Lt[0])._perp()._unit();let Ai=!0;for(let Ii=1,Ni=0;Ii<Lt.length;Ii++){let Ki=Lt[Ii-1],bi=Lt[Ii];const pn=Lt[Ii===Lt.length-1?1:Ii+1];if(ie&&se&&ie.currentPolyCount.top++,Wl(bi,Ki,Et)){Ge&&(ii=pn.sub(bi)._perp()._unit(),Ai=!Ai);continue}ie&&ie.append(bi,Ki);const En=bi.sub(Ki)._perp(),_n=En.x/(Math.abs(En.x)+Math.abs(En.y)),ur=En.y>0?1:0,tn=Ki.dist(bi);if(Ni+tn>32768&&(Ni=0),Ge){Ci=pn.sub(bi)._perp()._unit();let or=$l(Ki,bi,pn,hm(ii,Ci),Ge);isNaN(or)&&(or=0);const Wn=bi.sub(Ki)._unit();Ki=Ki.add(Wn.mult(mi))._round(),bi=bi.add(Wn.mult(-or))._round(),mi=or,ii=Ci}const Vn=At.vertexLength,hr=Lt.length>4&&Kh(Ki,bi,pn);let Gr=rg(Ni,Xi,Ai);if(_s(this.layoutVertexArray,Ki.x,Ki.y,_n,ur,0,0,Gr),_s(this.layoutVertexArray,Ki.x,Ki.y,_n,ur,0,1,Gr),Ni+=tn,Gr=rg(Ni,hr,!Ai),Xi=hr,_s(this.layoutVertexArray,bi.x,bi.y,_n,ur,0,0,Gr),_s(this.layoutVertexArray,bi.x,bi.y,_n,ur,0,1,Gr),At.vertexLength+=4,this.indexArray.emplaceBack(Vn+0,Vn+1,Vn+2),this.indexArray.emplaceBack(Vn+1,Vn+3,Vn+2),At.primitiveLength+=2,Ge){const or=ut+(1===Ii?Lt.length-2:Ii-2),Wn=1===Ii?ut:or+1;if(this.indexArray.emplaceBack(Vn+1,or,Vn+3),this.indexArray.emplaceBack(or,Wn,Vn+3),At.primitiveLength+=2,void 0===ui&&(ui=Vn),!Wl(pn,Lt[Ii],Et)){const Cs=Ii===Lt.length-1?ui:At.vertexLength;this.indexArray.emplaceBack(Vn+2,Vn+3,Cs),this.indexArray.emplaceBack(Vn+3,Cs+1,Cs),this.indexArray.emplaceBack(Vn+3,Wn,Cs+1),At.primitiveLength+=3}Ai=!Ai}if(J){const or=this.layoutVertexExtArray,Wn=G.projectTilePoint(Ki.x,Ki.y,m),Cs=G.projectTilePoint(bi.x,bi.y,m),dr=G.upVector(m,Ki.x,Ki.y),pr=G.upVector(m,bi.x,bi.y);ro(or,Wn,dr),ro(or,Wn,dr),ro(or,Cs,pr),ro(or,Cs,pr)}}se&&(ut+=Lt.length-1)}}if(ie&&ie.polyCount.length>0){if(ie.borders){ie.vertexArrayOffset=this.centroidVertexArray.length;const lt=ie.borders,Et=this.featuresOnBorder.push(ie)-1;for(let ut=0;ut<4;ut++)lt[ut][0]!==Number.MAX_VALUE&&this.borders[ut].push(Et)}this.encodeCentroid(ie.borders?void 0:ie.centroid(),ie)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,E,m)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort((o,u)=>this.featuresOnBorder[o].borders[t][0]-this.featuresOnBorder[u].borders[t][0])}encodeCentroid(t,o,u=!0){let m,w;if(t)if(0!==t.y){const P=o.span()._mult(this.tileToMeter);m=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(P.x/10)),w=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(P.y/10))}else m=Math.ceil(7*(t.x+450)),w=0;else m=0,w=+u;let E=u?this.centroidVertexArray.length:o.vertexArrayOffset;for(const P of o.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*P.edges+P.top);for(let B=0;B<P.top;B++)this.centroidVertexArray.emplace(E++,m,w);for(let B=0;B<2*P.edges;B++)this.centroidVertexArray.emplace(E++,0,w),this.centroidVertexArray.emplace(E++,m,w)}}}function hm(r,t){const o=r.add(t)._unit();return r.x*o.x+r.y*o.y}function dm(r,t,o,u){const m=t.sub(r)._perp()._unit(),w=o.sub(t)._perp()._unit();return $l(r,t,o,hm(m,w),u)}function $l(r,t,o,u,m){const w=Math.sqrt(1-u*u);return Math.min(r.dist(t)/3,t.dist(o)/3,m*w/u)}function Wl(r,t,o){return r.x<o[0].x&&t.x<o[0].x||r.x>o[1].x&&t.x>o[1].x||r.y<o[0].y&&t.y<o[0].y||r.y>o[1].y&&t.y>o[1].y}function Kh(r,t,o){if(r.x<0||r.x>=Sn||t.x<0||t.x>=Sn||o.x<0||o.x>=Sn)return!1;const u=o.sub(t),m=u.perp(),w=r.sub(t);return(u.x*w.x+u.y*w.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(w.x*w.x+w.y*w.y))>-.866&&m.x*w.x+m.y*w.y<0}function rg(r,t,o){const u=t?2|r:-3&r;return o?1|u:-2&u}function sg(){const r=Math.PI/32,t=Math.tan(r),o=ch;return o*Math.sqrt(1+2*t*t)-o}function og(r,t,o){const u=1<<o.z,m=al(o.x/u),w=al((o.x+1)/u),E=ea(o.y/u),P=ea((o.y+1)/u);return function(B,G,J,ie,se=0,pe){const ge=[];if(!B.length||!J||!ie)return ge;const Se=(Lt,ui)=>{for(const ii of Lt)ge.push({polygon:ii,bounds:ui})},Ge=Math.ceil(Math.log2(J)),lt=Math.ceil(Math.log2(ie)),Et=Ge-lt,ut=[];for(let Lt=0;Lt<Math.abs(Et);Lt++)ut.push(Et>0?0:1);for(let Lt=0;Lt<Math.min(Ge,lt);Lt++)ut.push(0),ut.push(1);let Ct=B;if(Ct=vi(Ct,G[0].y-se,G[1].y+se,1),Ct=vi(Ct,G[0].x-se,G[1].x+se,0),!Ct.length)return ge;const At=[];for(ut.length?At.push({polygons:Ct,bounds:G,depth:0}):Se(Ct,G);At.length;){const Lt=At.pop(),ui=Lt.depth,ii=ut[ui],Ci=Lt.bounds[0],Xi=Lt.bounds[1],mi=0===ii?Ci.x:Ci.y,Ai=0===ii?Xi.x:Xi.y,Ii=pe?pe(ii,mi,Ai):.5*(mi+Ai),Ni=vi(Lt.polygons,mi-se,Ii+se,ii),Ki=vi(Lt.polygons,Ii-se,Ai+se,ii);if(Ni.length){const bi=[Ci,new rt(0===ii?Ii:Xi.x,1===ii?Ii:Xi.y)];ut.length>ui+1?At.push({polygons:Ni,bounds:bi,depth:ui+1}):Se(Ni,bi)}if(Ki.length){const bi=[new rt(0===ii?Ii:Ci.x,1===ii?Ii:Ci.y),Xi];ut.length>ui+1?At.push({polygons:Ki,bounds:bi,depth:ui+1}):Se(Ki,bi)}}return ge}(r,t,Math.ceil((w-m)/11.25),Math.ceil((E-P)/11.25),1,(B,G,J)=>{if(0===B)return.5*(G+J);{const ie=ea((o.y+G/Sn)/u);return(dc(.5*(ea((o.y+J/Sn)/u)+ie))*u-o.y)*Sn}})}vn(Qc,"FillExtrusionBucket",{omit:["layers","features"]}),vn(ma,"PartMetadata");const L_=new vt({"fill-extrusion-edge-radius":new we(M["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var P_={paint:new vt({"fill-extrusion-opacity":new we(M["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new We(M["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new we(M["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new we(M["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new We(M["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new We(M["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new We(M["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new we(M["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new we(M["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new we(M["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new we(M["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:L_};function ag(r,t,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[r*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class Jp{constructor(t,o,u){this.z=t,this.x=o,this.y=u,this.key=Hd(0,t,t,o,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o){const u=(E=this.y,P=this.z,B=ag(256*(w=this.x),256*(E=Math.pow(2,P)-E-1),P),G=ag(256*(w+1),256*(E+1),P),B[0]+","+B[1]+","+G[0]+","+G[1]),m=function(w,E,P){let B,G="";for(let J=w;J>0;J--)B=1<<J-1,G+=(E&B?1:0)+(P&B?2:0);return G}(this.z,this.x,this.y);var w,E,P,B,G;return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===o?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lg{constructor(t,o){this.wrap=t,this.canonical=o,this.key=Hd(t,o.z,o.z,o.x,o.y)}}class ja{constructor(t,o,u,m,w){this.overscaledZ=t,this.wrap=o,this.canonical=new Jp(u,+m,+w),this.key=0===o&&t===u?this.canonical.key:Hd(o,t,u,m,w)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const o=this.canonical.z-t;return t>this.canonical.z?new ja(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ja(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o=!0){if(this.overscaledZ===t&&o)return this.key;if(t>this.canonical.z)return Hd(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-t;return Hd(this.wrap*+o,t,t,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new ja(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new ja(o,this.wrap,o,u,m),new ja(o,this.wrap,o,u+1,m),new ja(o,this.wrap,o,u,m+1),new ja(o,this.wrap,o,u+1,m+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new ja(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new ja(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Hd(r,t,o,u,m){const w=1<<Math.min(o,22);let E=w*(m%w)+u%w;return r&&o<22&&(E+=w*w*((r<0?-2*r-1:2*r)%(1<<2*(22-o)))),16*(32*E+o)+(t-o)}vn(Jp,"CanonicalTileID"),vn(ja,"OverscaledTileID",{omit:["projMatrix"]});class Jh extends rt{constructor(t,o,u){super(t,o),this.z=u}}function Gd(r,t){return r.x*t.x+r.y*t.y}function cg(r,t){if(1===r.length){let o=0;const u=t[o++];let m;for(;!m||u.equals(m);)if(m=t[o++],!m)return 1/0;for(;o<t.length;o++){const w=t[o],E=r[0],P=m.sub(u),B=w.sub(u),G=E.sub(u),J=Gd(P,P),ie=Gd(P,B),se=Gd(B,B),pe=Gd(G,P),ge=Gd(G,B),Se=J*se-ie*ie,Ge=(se*pe-ie*ge)/Se,lt=(J*ge-ie*pe)/Se,Et=u.z*(1-Ge-lt)+m.z*Ge+w.z*lt;if(isFinite(Et))return Et}return 1/0}{let o=1/0;for(const u of t)o=Math.min(o,u.z);return o}}function ug(r,t,o,u,m,w,E,P){const B=E*m.getElevationAt(r,t,!0,!0),G=0!==w[0],J=G?0===w[1]?E*(w[0]/7-450):E*function(ie,se,pe){const ge=Math.floor(se[0]/8),Se=Math.floor(se[1]/8),Ge=10*(se[0]-8*ge),lt=10*(se[1]-8*Se),Et=ie.getElevationAt(ge,Se,!0,!0),ut=ie.getMeterToDEM(pe),Ct=Math.floor(.5*(Ge*ut-1)),At=Math.floor(.5*(lt*ut-1)),Lt=ie.tileCoordToPixel(ge,Se),ui=2*Ct+1,ii=2*At+1,Ci=(En=ui,_n=ii,[(Ki=ie).getElevationAtPixel(bi=Lt.x-Ct,pn=Lt.y-At,!0),Ki.getElevationAtPixel(bi+_n,pn,!0),Ki.getElevationAtPixel(bi,pn+_n,!0),Ki.getElevationAtPixel(bi+En,pn+_n,!0)]),Xi=Math.abs(Ci[0]-Ci[1]),mi=Math.abs(Ci[2]-Ci[3]),Ai=Math.abs(Ci[0]-Ci[2])+Math.abs(Ci[1]-Ci[3]),Ii=Math.min(.25,.5*ut*(Xi+mi)/ui),Ni=Math.min(.25,.5*ut*Ai/ii);var Ki,bi,pn,En,_n;return Et+Math.max(Ii*Ge,Ni*lt)}(m,w,P):B;return{base:B+(0===o)?-1:o,top:G?Math.max(J+u,B+o+2):B+u}}const O_=Ut([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:R_}=O_,z_=Ut([{name:"a_packed",components:4,type:"Float32"}]),{members:F_}=z_,B_=ft.types,eu=Math.cos(Math.PI/180*37.5);class yh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new ci,this.layoutVertexArray2=new ji,this.indexArray=new On,this.programConfigurations=new jc(t.layers,t.zoom),this.segments=new zs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u,m){this.hasPattern=lm("line",this.layers,o);const w=this.layers[0].layout.get("line-sort-key"),E=[];for(const{feature:J,id:ie,index:se,sourceLayerIndex:pe}of t){const ge=this.layers[0]._featureFilter.needGeometry,Se=Ia(J,ge);if(!this.layers[0]._featureFilter.filter(new Q(this.zoom),Se,u))continue;const Ge=w?w.evaluate(Se,{},u):void 0,lt={id:ie,properties:J.properties,type:J.type,sourceLayerIndex:pe,index:se,geometry:ge?Se.geometry:Xc(J,u,m),patterns:{},sortKey:Ge};E.push(lt)}w&&E.sort((J,ie)=>J.sortKey-ie.sortKey);const{lineAtlas:P,featureIndex:B}=o,G=this.addConstantDashes(P);for(const J of E){const{geometry:ie,index:se,sourceLayerIndex:pe}=J;if(G&&this.addFeatureDashes(J,P),this.hasPattern){const ge=Zp("line",this.layers,J,this.zoom,o);this.patternFeatures.push(ge)}else this.addFeature(J,ie,se,u,P.positions,o.availableImages);B.insert(t[se].feature,ie,se,pe,this.index)}}addConstantDashes(t){let o=!1;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,w=u.layout.get("line-cap").value;if("constant"!==m.kind||"constant"!==w.kind)o=!0;else{const E=w.value,P=m.value;if(!P)continue;t.addDash(P,E)}}return o}addFeatureDashes(t,o){const u=this.zoom;for(const m of this.layers){const w=m.paint.get("line-dasharray").value,E=m.layout.get("line-cap").value;if("constant"===w.kind&&"constant"===E.kind)continue;let P,B;if("constant"===w.kind){if(P=w.value,!P)continue}else P=w.evaluate({zoom:u},t);B="constant"===E.kind?E.value:E.evaluate({zoom:u},t),o.addDash(P,B),t.patterns[m.id]=o.getKey(P,B)}}update(t,o,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u,m)}addFeatures(t,o,u,m,w){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,o,u,m)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,F_)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,R_),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,u,m,w,E){const P=this.layers[0].layout,B=P.get("line-join").evaluate(t,{}),G=P.get("line-cap").evaluate(t,{}),J=P.get("line-miter-limit"),ie=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const se of o)this.addLine(se,t,B,G,J,ie);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,E,m)}addLine(t,o,u,m,w,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let lt=0;lt<t.length-1;lt++)this.totalDistance+=t[lt].dist(t[lt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const P="Polygon"===B_[o.type];let B=t.length;for(;B>=2&&t[B-1].equals(t[B-2]);)B--;let G=0;for(;G<B-1&&t[G].equals(t[G+1]);)G++;if(B<(P?3:2))return;"bevel"===u&&(w=1.05);const J=this.overscaling<=16?15*Sn/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let se,pe,ge,Se,Ge;this.e1=this.e2=-1,P&&(se=t[B-2],Ge=t[G].sub(se)._unit()._perp());for(let lt=G;lt<B;lt++){if(ge=lt===B-1?P?t[G+1]:void 0:t[lt+1],ge&&t[lt].equals(ge))continue;Ge&&(Se=Ge),se&&(pe=se),se=t[lt],Ge=ge?ge.sub(se)._unit()._perp():Se,Se=Se||Ge;let Et=Se.add(Ge);0===Et.x&&0===Et.y||Et._unit();const ut=Se.x*Ge.x+Se.y*Ge.y,Ct=Et.x*Ge.x+Et.y*Ge.y,At=0!==Ct?1/Ct:1/0,Lt=2*Math.sqrt(2-2*Ct),ui=Ct<eu&&pe&&ge,ii=Se.x*Ge.y-Se.y*Ge.x>0;if(ui&&lt>G){const mi=se.dist(pe);if(mi>2*J){const Ai=se.sub(se.sub(pe)._mult(J/mi)._round());this.updateDistance(pe,Ai),this.addCurrentVertex(Ai,Se,0,0,ie),pe=Ai}}const Ci=pe&&ge;let Xi=Ci?u:P?"butt":m;if(Ci&&"round"===Xi&&(At<E?Xi="miter":At<=2&&(Xi="fakeround")),"miter"===Xi&&At>w&&(Xi="bevel"),"bevel"===Xi&&(At>2&&(Xi="flipbevel"),At<w&&(Xi="miter")),pe&&this.updateDistance(pe,se),"miter"===Xi)Et._mult(At),this.addCurrentVertex(se,Et,0,0,ie);else if("flipbevel"===Xi){if(At>100)Et=Ge.mult(-1);else{const mi=At*Se.add(Ge).mag()/Se.sub(Ge).mag();Et._perp()._mult(mi*(ii?-1:1))}this.addCurrentVertex(se,Et,0,0,ie),this.addCurrentVertex(se,Et.mult(-1),0,0,ie)}else if("bevel"===Xi||"fakeround"===Xi){const mi=-Math.sqrt(At*At-1),Ai=ii?mi:0,Ii=ii?0:mi;if(pe&&this.addCurrentVertex(se,Se,Ai,Ii,ie),"fakeround"===Xi){const Ni=Math.round(180*Lt/Math.PI/20);for(let Ki=1;Ki<Ni;Ki++){let bi=Ki/Ni;if(.5!==bi){const En=bi-.5;bi+=bi*En*(bi-1)*((1.0904+ut*(ut*(3.55645-1.43519*ut)-3.2452))*En*En+(.848013+ut*(.215638*ut-1.06021)))}const pn=Ge.sub(Se)._mult(bi)._add(Se)._unit()._mult(ii?-1:1);this.addHalfVertex(se,pn.x,pn.y,!1,ii,0,ie)}}ge&&this.addCurrentVertex(se,Ge,-Ai,-Ii,ie)}else if("butt"===Xi)this.addCurrentVertex(se,Et,0,0,ie);else if("square"===Xi){const mi=pe?1:-1;pe||this.addCurrentVertex(se,Et,mi,mi,ie),this.addCurrentVertex(se,Et,0,0,ie),pe&&this.addCurrentVertex(se,Et,mi,mi,ie)}else"round"===Xi&&(pe&&(this.addCurrentVertex(se,Se,0,0,ie),this.addCurrentVertex(se,Se,1,1,ie,!0)),ge&&(this.addCurrentVertex(se,Ge,-1,-1,ie,!0),this.addCurrentVertex(se,Ge,0,0,ie)));if(ui&&lt<B-1){const mi=se.dist(ge);if(mi>2*J){const Ai=se.add(ge.sub(se)._mult(J/mi)._round());this.updateDistance(se,Ai),this.addCurrentVertex(Ai,Ge,0,0,ie),se=Ai}}}}addCurrentVertex(t,o,u,m,w,E=!1){const P=o.y*m-o.x,B=-o.y-o.x*m;this.addHalfVertex(t,o.x+o.y*u,o.y-o.x*u,E,!1,u,w),this.addHalfVertex(t,P,B,E,!0,-m,w)}addHalfVertex({x:t,y:o},u,m,w,E,P,B){this.layoutVertexArray.emplaceBack((t<<1)+(w?1:0),(o<<1)+(E?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(0===P?0:P<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const G=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,G),B.primitiveLength++),E?this.e2=G:this.e1=G}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}vn(yh,"LineBucket",{omit:["layers","patternFeatures"]});const hg=new vt({"line-cap":new We(M.layout_line["line-cap"]),"line-join":new We(M.layout_line["line-join"]),"line-miter-limit":new we(M.layout_line["line-miter-limit"]),"line-round-limit":new we(M.layout_line["line-round-limit"]),"line-sort-key":new We(M.layout_line["line-sort-key"])});var Gn={paint:new vt({"line-opacity":new We(M.paint_line["line-opacity"]),"line-color":new We(M.paint_line["line-color"]),"line-translate":new we(M.paint_line["line-translate"]),"line-translate-anchor":new we(M.paint_line["line-translate-anchor"]),"line-width":new We(M.paint_line["line-width"]),"line-gap-width":new We(M.paint_line["line-gap-width"]),"line-offset":new We(M.paint_line["line-offset"]),"line-blur":new We(M.paint_line["line-blur"]),"line-dasharray":new We(M.paint_line["line-dasharray"]),"line-pattern":new We(M.paint_line["line-pattern"]),"line-gradient":new gt(M.paint_line["line-gradient"]),"line-trim-offset":new we(M.paint_line["line-trim-offset"])}),layout:hg};const dg=new class extends We{possiblyEvaluate(r,t){return t=new Q(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(r,t)}evaluate(r,t,o,u){return t=ln({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(r,t,o,u)}}(Gn.paint.properties["line-width"].specification);function Ji(r,t){return t>0?t+2*r:r}dg.useIntegerZoom=!0;const zu=Ut([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),To=Ut([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),pg=Ut([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ut([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const fg=Ut([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Fu=Ut([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ut([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Qp=Ut([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Qh=Ut([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ut([{name:"triangle",components:3,type:"Uint16"}]),Ut([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ut([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ut([{type:"Float32",name:"offsetX"}]),Ut([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ia=24;const Mc=128;function ef(r,t){const{expression:o}=t;if("constant"===o.kind)return{kind:"constant",layoutSize:o.evaluate(new Q(r+1))};if("source"===o.kind)return{kind:"source"};{const{zoomStops:u,interpolationType:m}=o;let w=0;for(;w<u.length&&u[w]<=r;)w++;w=Math.max(0,w-1);let E=w;for(;E<u.length&&u[E]<r+1;)E++;E=Math.min(u.length-1,E);const P=u[w],B=u[E];return"composite"===o.kind?{kind:"composite",minZoom:P,maxZoom:B,interpolationType:m}:{kind:"camera",minZoom:P,maxZoom:B,minSize:o.evaluate(new Q(P)),maxSize:o.evaluate(new Q(B)),interpolationType:m}}}function xh(r,{uSize:t,uSizeT:o},{lowerSize:u,upperSize:m}){return"source"===r.kind?u/Mc:"composite"===r.kind?Cr(u/Mc,m/Mc,o):t}function bh(r,t){let o=0,u=0;if("constant"===r.kind)u=r.layoutSize;else if("source"!==r.kind){const{interpolationType:m,minZoom:w,maxZoom:E}=r,P=m?ai(Io.interpolationFactor(m,t,w,E),0,1):0;"camera"===r.kind?u=Cr(r.minSize,r.maxSize,P):o=P}return{uSizeT:o,uSize:u}}var ey=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Mc,evaluateSizeForFeature:xh,evaluateSizeForZoom:bh,getSizeData:ef});function ty(r,t,o){return r.sections.forEach(u=>{u.text=function(m,w,E){const P=w.layout.get("text-transform").evaluate(E,{});return"uppercase"===P?m=m.toLocaleUpperCase():"lowercase"===P&&(m=m.toLocaleLowerCase()),Z.applyArabicShaping&&(m=Z.applyArabicShaping(m)),m}(u.text,t,o)}),r}const jd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function N_(r){return"\ufe36"===r||"\ufe48"===r||"\ufe38"===r||"\ufe44"===r||"\ufe42"===r||"\ufe3e"===r||"\ufe3c"===r||"\ufe3a"===r||"\ufe18"===r||"\ufe40"===r||"\ufe10"===r||"\ufe13"===r||"\ufe14"===r||"\uff40"===r||"\uffe3"===r||"\ufe11"===r||"\ufe12"===r}function Y_(r){return"\ufe35"===r||"\ufe47"===r||"\ufe37"===r||"\ufe43"===r||"\ufe41"===r||"\ufe3d"===r||"\ufe3b"===r||"\ufe39"===r||"\ufe17"===r||"\ufe3f"===r}var V_=vs,H_=function(r,t,o,u,m){var w,E,P=8*m-u-1,B=(1<<P)-1,G=B>>1,J=-7,ie=o?m-1:0,se=o?-1:1,pe=r[t+ie];for(ie+=se,w=pe&(1<<-J)-1,pe>>=-J,J+=P;J>0;w=256*w+r[t+ie],ie+=se,J-=8);for(E=w&(1<<-J)-1,w>>=-J,J+=u;J>0;E=256*E+r[t+ie],ie+=se,J-=8);if(0===w)w=1-G;else{if(w===B)return E?NaN:1/0*(pe?-1:1);E+=Math.pow(2,u),w-=G}return(pe?-1:1)*E*Math.pow(2,w-u)},G_=function(r,t,o,u,m,w){var E,P,B,G=8*w-m-1,J=(1<<G)-1,ie=J>>1,se=23===m?Math.pow(2,-24)-Math.pow(2,-77):0,pe=u?0:w-1,ge=u?1:-1,Se=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(P=isNaN(t)?1:0,E=J):(E=Math.floor(Math.log(t)/Math.LN2),t*(B=Math.pow(2,-E))<1&&(E--,B*=2),(t+=E+ie>=1?se/B:se*Math.pow(2,1-ie))*B>=2&&(E++,B/=2),E+ie>=J?(P=0,E=J):E+ie>=1?(P=(t*B-1)*Math.pow(2,m),E+=ie):(P=t*Math.pow(2,ie-1)*Math.pow(2,m),E=0));m>=8;r[o+pe]=255&P,pe+=ge,P/=256,m-=8);for(E=E<<m|P,G+=m;G>0;r[o+pe]=255&E,pe+=ge,E/=256,G-=8);r[o+pe-ge]|=128*Se};function vs(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}vs.Varint=0,vs.Fixed64=1,vs.Bytes=2,vs.Fixed32=5;var tf=4294967296,nf=1/tf,mg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function tu(r){return r.type===vs.Bytes?r.readVarint()+r.pos:r.pos+1}function gg(r,t,o){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(u);for(var m=o.pos-1;m>=r;m--)o.buf[m+u]=o.buf[m]}function j_(r,t){for(var o=0;o<r.length;o++)t.writeVarint(r[o])}function wh(r,t){for(var o=0;o<r.length;o++)t.writeSVarint(r[o])}function ed(r,t){for(var o=0;o<r.length;o++)t.writeFloat(r[o])}function U_(r,t){for(var o=0;o<r.length;o++)t.writeDouble(r[o])}function _g(r,t){for(var o=0;o<r.length;o++)t.writeBoolean(r[o])}function $_(r,t){for(var o=0;o<r.length;o++)t.writeFixed32(r[o])}function pm(r,t){for(var o=0;o<r.length;o++)t.writeSFixed32(r[o])}function W_(r,t){for(var o=0;o<r.length;o++)t.writeFixed64(r[o])}function X_(r,t){for(var o=0;o<r.length;o++)t.writeSFixed64(r[o])}function rf(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+16777216*r[t+3]}function Ch(r,t,o){r[o]=t,r[o+1]=t>>>8,r[o+2]=t>>>16,r[o+3]=t>>>24}function vg(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+(r[t+3]<<24)}vs.prototype={destroy:function(){this.buf=null},readFields:function(r,t,o){for(o=o||this.length;this.pos<o;){var u=this.readVarint(),m=u>>3,w=this.pos;this.type=7&u,r(m,t,this),this.pos===w&&this.skip(u)}return t},readMessage:function(r,t){return this.readFields(r,t,this.readVarint()+this.pos)},readFixed32:function(){var r=rf(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=vg(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=rf(this.buf,this.pos)+rf(this.buf,this.pos+4)*tf;return this.pos+=8,r},readSFixed64:function(){var r=rf(this.buf,this.pos)+vg(this.buf,this.pos+4)*tf;return this.pos+=8,r},readFloat:function(){var r=H_(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=H_(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var t,o,u=this.buf;return t=127&(o=u[this.pos++]),o<128?t:(t|=(127&(o=u[this.pos++]))<<7,o<128?t:(t|=(127&(o=u[this.pos++]))<<14,o<128?t:(t|=(127&(o=u[this.pos++]))<<21,o<128?t:function(m,w,E){var P,B,G=E.buf;if(P=(112&(B=G[E.pos++]))>>4,B<128||(P|=(127&(B=G[E.pos++]))<<3,B<128)||(P|=(127&(B=G[E.pos++]))<<10,B<128)||(P|=(127&(B=G[E.pos++]))<<17,B<128)||(P|=(127&(B=G[E.pos++]))<<24,B<128)||(P|=(1&(B=G[E.pos++]))<<31,B<128))return function Ud(r,t,o){return o?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}(m,P,w);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=u[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,t=this.pos;return this.pos=r,r-t>=12&&mg?mg.decode(this.buf.subarray(t,r)):function(o,u,m){for(var w="",E=u;E<m;){var P,B,G,J=o[E],ie=null,se=J>239?4:J>223?3:J>191?2:1;if(E+se>m)break;1===se?J<128&&(ie=J):2===se?128==(192&(P=o[E+1]))&&(ie=(31&J)<<6|63&P)<=127&&(ie=null):3===se?(B=o[E+2],128==(192&(P=o[E+1]))&&128==(192&B)&&((ie=(15&J)<<12|(63&P)<<6|63&B)<=2047||ie>=55296&&ie<=57343)&&(ie=null)):4===se&&(B=o[E+2],G=o[E+3],128==(192&(P=o[E+1]))&&128==(192&B)&&128==(192&G)&&((ie=(15&J)<<18|(63&P)<<12|(63&B)<<6|63&G)<=65535||ie>=1114112)&&(ie=null)),null===ie?(ie=65533,se=1):ie>65535&&(ie-=65536,w+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),w+=String.fromCharCode(ie),E+=se}return w}(this.buf,t,r)},readBytes:function(){var r=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,r);return this.pos=r,t},readPackedVarint:function(r,t){if(this.type!==vs.Bytes)return r.push(this.readVarint(t));var o=tu(this);for(r=r||[];this.pos<o;)r.push(this.readVarint(t));return r},readPackedSVarint:function(r){if(this.type!==vs.Bytes)return r.push(this.readSVarint());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==vs.Bytes)return r.push(this.readBoolean());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==vs.Bytes)return r.push(this.readFloat());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==vs.Bytes)return r.push(this.readDouble());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==vs.Bytes)return r.push(this.readFixed32());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==vs.Bytes)return r.push(this.readSFixed32());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==vs.Bytes)return r.push(this.readFixed64());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==vs.Bytes)return r.push(this.readSFixed64());var t=tu(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed64());return r},skip:function(r){var t=7&r;if(t===vs.Varint)for(;this.buf[this.pos++]>127;);else if(t===vs.Bytes)this.pos=this.readVarint()+this.pos;else if(t===vs.Fixed32)this.pos+=4;else{if(t!==vs.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(r,t){this.writeVarint(r<<3|t)},realloc:function(r){for(var t=this.length||16;t<this.pos+r;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Ch(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Ch(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Ch(this.buf,-1&r,this.pos),Ch(this.buf,Math.floor(r*nf),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Ch(this.buf,-1&r,this.pos),Ch(this.buf,Math.floor(r*nf),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(t,o){var u,m,w,P;if(t>=0?(u=t%4294967296|0,m=t/4294967296|0):(m=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,m=m+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),w=u,(P=o).buf[P.pos++]=127&w|128,w>>>=7,P.buf[P.pos++]=127&w|128,w>>>=7,P.buf[P.pos++]=127&w|128,w>>>=7,P.buf[P.pos++]=127&w|128,P.buf[P.pos]=127&(w>>>=7),function(w,E){var P=(7&w)<<4;E.buf[E.pos++]|=P|((w>>>=3)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w)))))}(m,o)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var t=this.pos;this.pos=function(u,m,w){for(var E,P,B=0;B<m.length;B++){if((E=m.charCodeAt(B))>55295&&E<57344){if(!P){E>56319||B+1===m.length?(u[w++]=239,u[w++]=191,u[w++]=189):P=E;continue}if(E<56320){u[w++]=239,u[w++]=191,u[w++]=189,P=E;continue}E=P-55296<<10|E-56320|65536,P=null}else P&&(u[w++]=239,u[w++]=191,u[w++]=189,P=null);E<128?u[w++]=E:(E<2048?u[w++]=E>>6|192:(E<65536?u[w++]=E>>12|224:(u[w++]=E>>18|240,u[w++]=E>>12&63|128),u[w++]=E>>6&63|128),u[w++]=63&E|128)}return w}(this.buf,r,this.pos);var o=this.pos-t;o>=128&&gg(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(r){this.realloc(4),G_(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),G_(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var t=r.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=r[o]},writeRawMessage:function(r,t){this.pos++;var o=this.pos;r(t,this);var u=this.pos-o;u>=128&&gg(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeMessage:function(r,t,o){this.writeTag(r,vs.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(r,t){t.length&&this.writeMessage(r,j_,t)},writePackedSVarint:function(r,t){t.length&&this.writeMessage(r,wh,t)},writePackedBoolean:function(r,t){t.length&&this.writeMessage(r,_g,t)},writePackedFloat:function(r,t){t.length&&this.writeMessage(r,ed,t)},writePackedDouble:function(r,t){t.length&&this.writeMessage(r,U_,t)},writePackedFixed32:function(r,t){t.length&&this.writeMessage(r,$_,t)},writePackedSFixed32:function(r,t){t.length&&this.writeMessage(r,pm,t)},writePackedFixed64:function(r,t){t.length&&this.writeMessage(r,W_,t)},writePackedSFixed64:function(r,t){t.length&&this.writeMessage(r,X_,t)},writeBytesField:function(r,t){this.writeTag(r,vs.Bytes),this.writeBytes(t)},writeFixed32Field:function(r,t){this.writeTag(r,vs.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(r,t){this.writeTag(r,vs.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(r,t){this.writeTag(r,vs.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(r,t){this.writeTag(r,vs.Fixed64),this.writeSFixed64(t)},writeVarintField:function(r,t){this.writeTag(r,vs.Varint),this.writeVarint(t)},writeSVarintField:function(r,t){this.writeTag(r,vs.Varint),this.writeSVarint(t)},writeStringField:function(r,t){this.writeTag(r,vs.Bytes),this.writeString(t)},writeFloatField:function(r,t){this.writeTag(r,vs.Fixed32),this.writeFloat(t)},writeDoubleField:function(r,t){this.writeTag(r,vs.Fixed64),this.writeDouble(t)},writeBooleanField:function(r,t){this.writeVarintField(r,!!t)}};var sf=pt(V_);const fm=3;function Z_(r,t,o){t.glyphs=[],1===r&&o.readMessage(q_,t)}function q_(r,t,o){if(3===r){const{id:u,bitmap:m,width:w,height:E,left:P,top:B,advance:G}=o.readMessage(yg,{});t.glyphs.push({id:u,bitmap:new qc({width:w+2*fm,height:E+2*fm},m),metrics:{width:w,height:E,left:P,top:B,advance:G}})}else 4===r?t.ascender=o.readSVarint():5===r&&(t.descender=o.readSVarint())}function yg(r,t,o){1===r?t.id=o.readVarint():2===r?t.bitmap=o.readBytes():3===r?t.width=o.readVarint():4===r?t.height=o.readVarint():5===r?t.left=o.readSVarint():6===r?t.top=o.readSVarint():7===r&&(t.advance=o.readVarint())}const xg=fm;function mm(r){let t=0,o=0;for(const E of r)t+=E.w*E.h,o=Math.max(o,E.w);r.sort((E,P)=>P.h-E.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let m=0,w=0;for(const E of r)for(let P=u.length-1;P>=0;P--){const B=u[P];if(!(E.w>B.w||E.h>B.h)){if(E.x=B.x,E.y=B.y,w=Math.max(w,E.y+E.h),m=Math.max(m,E.x+E.w),E.w===B.w&&E.h===B.h){const G=u.pop();P<u.length&&(u[P]=G)}else E.h===B.h?(B.x+=E.w,B.w-=E.w):E.w===B.w?(B.y+=E.h,B.h-=E.h):(u.push({x:B.x+E.w,y:B.y,w:B.w-E.w,h:E.h}),B.y+=E.h,B.h-=E.h);break}}return{w:m,h:w,fill:t/(m*w)||0}}const cl=1;class of{constructor(t,{pixelRatio:o,version:u,stretchX:m,stretchY:w,content:E}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=m,this.stretchY=w,this.content=E,this.version=u}get tl(){return[this.paddedRect.x+cl,this.paddedRect.y+cl]}get br(){return[this.paddedRect.x+this.paddedRect.w-cl,this.paddedRect.y+this.paddedRect.h-cl]}get displaySize(){return[(this.paddedRect.w-2*cl)/this.pixelRatio,(this.paddedRect.h-2*cl)/this.pixelRatio]}}class bg{constructor(t,o){const u={},m={};this.haveRenderCallbacks=[];const w=[];this.addImages(t,u,w),this.addImages(o,m,w);const{w:E,h:P}=mm(w),B=new Ha({width:E||1,height:P||1});for(const G in t){const J=t[G],ie=u[G].paddedRect;Ha.copy(J.data,B,{x:0,y:0},{x:ie.x+cl,y:ie.y+cl},J.data)}for(const G in o){const J=o[G],ie=m[G].paddedRect,se=ie.x+cl,pe=ie.y+cl,ge=J.data.width,Se=J.data.height;Ha.copy(J.data,B,{x:0,y:0},{x:se,y:pe},J.data),Ha.copy(J.data,B,{x:0,y:Se-1},{x:se,y:pe-1},{width:ge,height:1}),Ha.copy(J.data,B,{x:0,y:0},{x:se,y:pe+Se},{width:ge,height:1}),Ha.copy(J.data,B,{x:ge-1,y:0},{x:se-1,y:pe},{width:1,height:Se}),Ha.copy(J.data,B,{x:0,y:0},{x:se+ge,y:pe},{width:1,height:Se})}this.image=B,this.iconPositions=u,this.patternPositions=m}addImages(t,o,u){for(const m in t){const w=t[m],E={x:0,y:0,w:w.data.width+2*cl,h:w.data.height+2*cl};u.push(E),o[m]=new of(E,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(t,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>t.hasImage(u)),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),o)}patchUpdatedImage(t,o,u){if(!t||!o||t.version===o.version)return;t.version=o.version;const[m,w]=t.tl;u.update(o.data,void 0,{x:m,y:w})}}vn(of,"ImagePosition"),vn(bg,"ImageAtlas");const Ua={horizontal:1,vertical:2,horizontalOnly:3},wg=-17;class $d{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const u=new $d;return u.scale=t||1,u.fontStack=o,u}static forImage(t){const o=new $d;return o.imageName=t,o}}class td{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const u=new td;for(let m=0;m<t.sections.length;m++){const w=t.sections[m];w.image?u.addImageSection(w):u.addTextSection(w,o)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(o,u){let m="";for(let w=0;w<o.length;w++){const E=o.charCodeAt(w+1)||null,P=o.charCodeAt(w-1)||null;m+=!u&&(E&&Qu(E)&&!jd[o[w+1]]||P&&Qu(P)&&!jd[o[w-1]])||!jd[o[w]]?o[w]:jd[o[w]]}return m}(this.text,t)}trim(){let t=0;for(let u=0;u<this.text.length&&af[this.text.charCodeAt(u)];u++)t++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&af[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const u=new td;return u.text=this.text.substring(t,o),u.sectionIndex=this.sectionIndex.slice(t,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push($d.forText(t.scale,t.fontStack||o));const u=this.sections.length-1;for(let m=0;m<t.text.length;++m)this.sectionIndex.push(u)}addImageSection(t){const o=t.image?t.image.name:"";if(0===o.length)return void hn("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push($d.forImage(o)),this.sectionIndex.push(this.sections.length-1)):hn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gm(r,t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge){const Se=td.fromFeature(r,m);ie===Ua.vertical&&Se.verticalizePunctuation(se);let Ge=[];const lt=function(Lt,ui,ii,Ci,Xi,mi){if(!Lt)return[];const Ai=[],Ii=function(pn,En,_n,ur,tn,Vn){let hr=0;for(let Gr=0;Gr<pn.length();Gr++){const or=pn.getSection(Gr);hr+=Cg(pn.getCharCode(Gr),or,ur,tn,En,Vn)}return hr/Math.max(1,Math.ceil(hr/_n))}(Lt,ui,ii,Ci,Xi,mi),Ni=Lt.text.indexOf("\u200b")>=0;let Ki=0;for(let pn=0;pn<Lt.length();pn++){const En=Lt.getSection(pn),_n=Lt.getCharCode(pn);if(af[_n]||(Ki+=Cg(_n,En,Ci,Xi,ui,mi)),pn<Lt.length()-1){const ur=!((bi=_n)<11904||!(an["Bopomofo Extended"](bi)||an.Bopomofo(bi)||an["CJK Compatibility Forms"](bi)||an["CJK Compatibility Ideographs"](bi)||an["CJK Compatibility"](bi)||an["CJK Radicals Supplement"](bi)||an["CJK Strokes"](bi)||an["CJK Symbols and Punctuation"](bi)||an["CJK Unified Ideographs Extension A"](bi)||an["CJK Unified Ideographs"](bi)||an["Enclosed CJK Letters and Months"](bi)||an["Halfwidth and Fullwidth Forms"](bi)||an.Hiragana(bi)||an["Ideographic Description Characters"](bi)||an["Kangxi Radicals"](bi)||an["Katakana Phonetic Extensions"](bi)||an.Katakana(bi)||an["Vertical Forms"](bi)||an["Yi Radicals"](bi)||an["Yi Syllables"](bi)));(K_[_n]||ur||En.imageName)&&Ai.push(kg(pn+1,Ki,Ii,Ai,J_(_n,Lt.getCharCode(pn+1),ur&&Ni),!1))}}var bi;return Th(kg(Lt.length(),Ki,Ii,Ai,0,!0))}(Se,G,w,t,u,pe),{processBidirectionalText:Et,processStyledBidirectionalText:ut}=Z;if(Et&&1===Se.sections.length){const Lt=Et(Se.toString(),lt);for(const ui of Lt){const ii=new td;ii.text=ui,ii.sections=Se.sections;for(let Ci=0;Ci<ui.length;Ci++)ii.sectionIndex.push(0);Ge.push(ii)}}else if(ut){const Lt=ut(Se.text,Se.sectionIndex,lt);for(const ui of Lt){const ii=new td;ii.text=ui[0],ii.sectionIndex=ui[1],ii.sections=Se.sections,Ge.push(ii)}}else Ge=function(Lt,ui){const ii=[],Ci=Lt.text;let Xi=0;for(const mi of ui)ii.push(Lt.substring(Xi,mi)),Xi=mi;return Xi<Ci.length&&ii.push(Lt.substring(Xi,Ci.length)),ii}(Se,lt);const Ct=[],At={positionedLines:Ct,text:Se.toString(),top:J[1],bottom:J[1],left:J[0],right:J[0],writingMode:ie,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Lt,ui,ii,Ci,Xi,mi,Ai,Ii,Ni,Ki,bi,pn){let En=0,_n=0,ur=0;const tn="right"===Ii?1:"left"===Ii?0:.5;let Vn=!1;for(const dr of Xi){const pr=dr.getSections();for(const us of pr){if(us.imageName)continue;const hs=ui[us.fontStack];if(hs&&(Vn=void 0!==hs.ascender&&void 0!==hs.descender,!Vn))break}if(!Vn)break}let hr=0;for(const dr of Xi){dr.trim();const pr=dr.getMaxScale(),us=(pr-1)*ia,hs={positionedGlyphs:[],lineOffset:0};Lt.positionedLines[hr]=hs;const ds=hs.positionedGlyphs;let ps=0;if(!dr.length()){_n+=mi,++hr;continue}let As=0,Hs=0;for(let fs=0;fs<dr.length();fs++){const mo=dr.getSection(fs),oo=dr.getSectionIndex(fs),Ls=dr.getCharCode(fs);let Ur=mo.scale,ao=null,ms=null,$a=null,Gs=ia,ra=0;const Ro=!(Ni===Ua.horizontal||!bi&&!yu(Ls)||bi&&(af[Ls]||(Gr=Ls,an.Arabic(Gr)||an["Arabic Supplement"](Gr)||an["Arabic Extended-A"](Gr)||an["Arabic Presentation Forms-A"](Gr)||an["Arabic Presentation Forms-B"](Gr))));if(mo.imageName){const Wa=Ci[mo.imageName];if(!Wa)continue;$a=mo.imageName,Lt.iconsInText=Lt.iconsInText||!0,ms=Wa.paddedRect;const ko=Wa.displaySize;Ur=Ur*ia/pn,ao={width:ko[0],height:ko[1],left:cl,top:-xg,advance:Ro?ko[1]:ko[0],localGlyph:!1},ra=Vn?-ao.height*Ur:wg+pr*ia-ko[1]*Ur,Gs=ao.advance;const Ac=(Ro?ko[0]:ko[1])*Ur-ia*pr;Ac>0&&Ac>ps&&(ps=Ac)}else{const Wa=ii[mo.fontStack];if(!Wa)continue;Wa[Ls]&&(ms=Wa[Ls]);const ko=ui[mo.fontStack];if(!ko)continue;const Ac=ko.glyphs[Ls];if(!Ac)continue;if(ao=Ac.metrics,Gs=8203!==Ls?ia:0,Vn){const ud=void 0!==ko.ascender?Math.abs(ko.ascender):0,hd=void 0!==ko.descender?Math.abs(ko.descender):0,ip=(ud+hd)*Ur;As<ip&&(As=ip,Hs=(ud-hd)/2*Ur),ra=-ud*Ur}else ra=wg+(pr-Ur)*ia}Ro?(Lt.verticalizable=!0,ds.push({glyph:Ls,imageName:$a,x:En,y:_n+ra,vertical:Ro,scale:Ur,localGlyph:ao.localGlyph,fontStack:mo.fontStack,sectionIndex:oo,metrics:ao,rect:ms}),En+=Gs*Ur+Ki):(ds.push({glyph:Ls,imageName:$a,x:En,y:_n+ra,vertical:Ro,scale:Ur,localGlyph:ao.localGlyph,fontStack:mo.fontStack,sectionIndex:oo,metrics:ao,rect:ms}),En+=ao.advance*Ur+Ki)}0!==ds.length&&(ur=Math.max(En-Ki,ur),Vn?Eg(ds,tn,ps,Hs,mi*pr/2):Eg(ds,tn,ps,0,mi/2)),En=0;const so=mi*pr+ps;hs.lineOffset=Math.max(ps,us),_n+=so,++hr}var Gr;const or=_n,{horizontalAlign:Wn,verticalAlign:Cs}=id(Ai);(function(dr,pr,us,hs,ds,ps){const As=(pr-us)*ds,Hs=-ps*hs;for(const so of dr)for(const fs of so.positionedGlyphs)fs.x+=As,fs.y+=Hs})(Lt.positionedLines,tn,Wn,Cs,ur,or),Lt.top+=-Cs*or,Lt.bottom=Lt.top+or,Lt.left+=-Wn*ur,Lt.right=Lt.left+ur,Lt.hasBaseline=Vn}(At,t,o,u,Ge,E,P,B,ie,G,se,ge),!function(Lt){for(const ui of Lt)if(0!==ui.positionedGlyphs.length)return!1;return!0}(Ct)&&At}const af={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},K_={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Cg(r,t,o,u,m,w){if(t.imageName){const E=u[t.imageName];return E?E.displaySize[0]*t.scale*ia/w+m:0}{const E=o[t.fontStack],P=E&&E.glyphs[r];return P?P.metrics.advance*t.scale+m:0}}function Tg(r,t,o,u){const m=Math.pow(r-t,2);return u?r<t?m/2:2*m:m+Math.abs(o)*o}function J_(r,t,o){let u=0;return 10===r&&(u-=1e4),o&&(u+=150),40!==r&&65288!==r||(u+=50),41!==t&&65289!==t||(u+=50),u}function kg(r,t,o,u,m,w){let E=null,P=Tg(t,o,m,w);for(const B of u){const G=Tg(t-B.x,o,m,w)+B.badness;G<=P&&(E=B,P=G)}return{index:r,x:t,priorBreak:E,badness:P}}function Th(r){return r?Th(r.priorBreak).concat(r.index):[]}function id(r){let t=.5,o=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function Eg(r,t,o,u,m){if(!(t||o||u||m))return;const w=r.length-1,E=r[w],P=(E.x+E.metrics.advance*E.scale)*t;for(let B=0;B<=w;B++)r[B].x-=P,r[B].y+=o+u+m}function Q_(r,t,o){const{horizontalAlign:u,verticalAlign:m}=id(o),w=t[0]-r.displaySize[0]*u,E=t[1]-r.displaySize[1]*m;return{image:r,top:E,bottom:E+r.displaySize[1],left:w,right:w+r.displaySize[0]}}function Sg(r,t,o,u,m,w){const E=r.image;let P;if(E.content){const Ge=E.content,lt=E.pixelRatio||1;P=[Ge[0]/lt,Ge[1]/lt,E.displaySize[0]-Ge[2]/lt,E.displaySize[1]-Ge[3]/lt]}const B=t.left*w,G=t.right*w;let J,ie,se,pe;"width"===o||"both"===o?(pe=m[0]+B-u[3],ie=m[0]+G+u[1]):(pe=m[0]+(B+G-E.displaySize[0])/2,ie=pe+E.displaySize[0]);const ge=t.top*w,Se=t.bottom*w;return"height"===o||"both"===o?(J=m[1]+ge-u[0],se=m[1]+Se+u[2]):(J=m[1]+(ge+Se-E.displaySize[1])/2,se=J+E.displaySize[1]),{image:E,top:J,right:ie,bottom:se,left:pe,collisionPadding:P}}class mu extends rt{constructor(t,o,u,m,w){super(t,o),this.angle=m,this.z=u,void 0!==w&&(this.segment=w)}clone(){return new mu(this.x,this.y,this.z,this.angle,this.segment)}}function Mg(r,t,o,u,m){if(void 0===t.segment)return!0;let w=t,E=t.segment+1,P=0;for(;P>-o/2;){if(E--,E<0)return!1;P-=r[E].dist(w),w=r[E]}P+=r[E].dist(r[E+1]),E++;const B=[];let G=0;for(;P<o/2;){const J=r[E],ie=r[E+1];if(!ie)return!1;let se=r[E-1].angleTo(J)-J.angleTo(ie);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:P,angleDelta:se}),G+=se;P-B[0].distance>u;)G-=B.shift().angleDelta;if(G>m)return!1;E++,P+=J.dist(ie)}return!0}function Dg(r){let t=0;for(let o=0;o<r.length-1;o++)t+=r[o].dist(r[o+1]);return t}function Ig(r,t,o){return r?.6*t*o:0}function Ag(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function Wd(r,t,o,u,m,w){const E=Ig(o,m,w),P=Ag(o,u)*w;let B=0;const G=Dg(r)/2;for(let J=0;J<r.length-1;J++){const ie=r[J],se=r[J+1],pe=ie.dist(se);if(B+pe>G){const ge=(G-B)/pe,Se=Cr(ie.x,se.x,ge),Ge=Cr(ie.y,se.y,ge),lt=new mu(Se,Ge,0,se.angleTo(ie),J);return!E||Mg(r,lt,P,E,t)?lt:void 0}B+=pe}}function ev(r,t,o,u,m,w,E,P,B){const G=Ig(u,w,E),J=Ag(u,m),ie=J*E,se=0===r[0].x||r[0].x===B||0===r[0].y||r[0].y===B;return t-ie<t/4&&(t=ie+t/4),Lg(r,se?t/2*P%t:(J/2+2*w)*E*P%t,t,G,o,ie,se,!1,B)}function Lg(r,t,o,u,m,w,E,P,B){const G=w/2,J=Dg(r);let ie=0,se=t-o,pe=[];for(let ge=0;ge<r.length-1;ge++){const Se=r[ge],Ge=r[ge+1],lt=Se.dist(Ge),Et=Ge.angleTo(Se);for(;se+o<ie+lt;){se+=o;const ut=(se-ie)/lt,Ct=Cr(Se.x,Ge.x,ut),At=Cr(Se.y,Ge.y,ut);if(Ct>=0&&Ct<B&&At>=0&&At<B&&se-G>=0&&se+G<=J){const Lt=new mu(Ct,At,0,Et,ge);Lt._round(),u&&!Mg(r,Lt,w,u,m)||pe.push(Lt)}}ie+=lt}return P||pe.length||E||(pe=Lg(r,ie/2,o,u,m,w,E,!0,B)),pe}function Pg(r,t,o,u,m){const w=[];for(let E=0;E<r.length;E++){const P=r[E];let B;for(let G=0;G<P.length-1;G++){let J=P[G],ie=P[G+1];J.x<t&&ie.x<t||(J.x<t?J=new rt(t,J.y+(t-J.x)/(ie.x-J.x)*(ie.y-J.y))._round():ie.x<t&&(ie=new rt(t,J.y+(t-J.x)/(ie.x-J.x)*(ie.y-J.y))._round()),J.y<o&&ie.y<o||(J.y<o?J=new rt(J.x+(o-J.y)/(ie.y-J.y)*(ie.x-J.x),o)._round():ie.y<o&&(ie=new rt(J.x+(o-J.y)/(ie.y-J.y)*(ie.x-J.x),o)._round()),J.x>=u&&ie.x>=u||(J.x>=u?J=new rt(u,J.y+(u-J.x)/(ie.x-J.x)*(ie.y-J.y))._round():ie.x>=u&&(ie=new rt(u,J.y+(u-J.x)/(ie.x-J.x)*(ie.y-J.y))._round()),J.y>=m&&ie.y>=m||(J.y>=m?J=new rt(J.x+(m-J.y)/(ie.y-J.y)*(ie.x-J.x),m)._round():ie.y>=m&&(ie=new rt(J.x+(m-J.y)/(ie.y-J.y)*(ie.x-J.x),m)._round()),B&&J.equals(B[B.length-1])||(B=[J],w.push(B)),B.push(ie)))))}}return w}vn(mu,"Anchor");const Xd=1e20;function Og(r,t,o,u,m,w,E,P,B){for(let G=t;G<t+u;G++)_m(r,o*w+G,w,m,E,P,B);for(let G=o;G<o+m;G++)_m(r,G*w+t,1,u,E,P,B)}function _m(r,t,o,u,m,w,E){w[0]=0,E[0]=-Xd,E[1]=Xd,m[0]=r[t];for(let P=1,B=0,G=0;P<u;P++){m[P]=r[t+P*o];const J=P*P;do{const ie=w[B];G=(m[P]-m[ie]+J-ie*ie)/(P-ie)/2}while(G<=E[B]&&--B>-1);B++,w[B]=P,E[B]=G,E[B+1]=Xd}for(let P=0,B=0;P<u;P++){for(;E[B+1]<P;)B++;const G=w[B],J=P-G;r[t+P*o]=m[G]+J*J}}const na=2,vm={none:0,ideographs:1,all:2};class Bu{constructor(t,o,u){this.requestManager=t,this.localGlyphMode=o,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,o){const u=[];for(const m in t)for(const w of t[m])u.push({stack:m,id:w});Yi(u,({stack:m,id:w},E)=>{let P=this.entries[m];P||(P=this.entries[m]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let B=P.glyphs[w];if(void 0!==B)return void E(null,{stack:m,id:w,glyph:B});if(B=this._tinySDF(P,m,w),B)return P.glyphs[w]=B,void E(null,{stack:m,id:w,glyph:B});const G=Math.floor(w/256);if(256*G>65535)return void E(new Error("glyphs > 65535 not supported"));if(P.ranges[G])return void E(null,{stack:m,id:w,glyph:B});let J=P.requests[G];J||(J=P.requests[G]=[],Bu.loadGlyphRange(m,G,this.url,this.requestManager,(ie,se)=>{if(se){P.ascender=se.ascender,P.descender=se.descender;for(const pe in se.glyphs)this._doesCharSupportLocalGlyph(+pe)||(P.glyphs[+pe]=se.glyphs[+pe]);P.ranges[G]=!0}for(const pe of J)pe(ie,se);delete P.requests[G]})),J.push((ie,se)=>{ie?E(ie):se&&E(null,{stack:m,id:w,glyph:se.glyphs[w]||null})})},(m,w)=>{if(m)o(m);else if(w){const E={};for(const{stack:P,id:B,glyph:G}of w)void 0===E[P]&&(E[P]={}),void 0===E[P].glyphs&&(E[P].glyphs={}),E[P].glyphs[B]=G&&{id:G.id,bitmap:G.bitmap.clone(),metrics:G.metrics},E[P].ascender=this.entries[P].ascender,E[P].descender=this.entries[P].descender;o(null,E)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==vm.none&&(this.localGlyphMode===vm.all?!!this.localFontFamily:!!this.localFontFamily&&(an["CJK Unified Ideographs"](t)||an["Hangul Syllables"](t)||an.Hiragana(t)||an.Katakana(t)||an["CJK Symbols and Punctuation"](t)))}_tinySDF(t,o,u){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(u))return;let w=t.tinySDF;if(!w){let Se="400";/bold/i.test(o)?Se="900":/medium/i.test(o)?Se="500":/light/i.test(o)&&(Se="200"),w=t.tinySDF=new Bu.TinySDF({fontFamily:m,fontWeight:Se,fontSize:24*na,buffer:3*na,radius:8*na}),w.fontWeight=Se}if(this.localGlyphs[w.fontWeight][u])return this.localGlyphs[w.fontWeight][u];const E=String.fromCharCode(u),{data:P,width:B,height:G,glyphWidth:J,glyphHeight:ie,glyphLeft:se,glyphTop:pe,glyphAdvance:ge}=w.draw(E);return this.localGlyphs[w.fontWeight][u]={id:u,bitmap:new qc({width:B,height:G},P),metrics:{width:J/na,height:ie/na,left:se/na,top:pe/na-27,advance:ge/na,localGlyph:!0}}}}Bu.loadGlyphRange=function(r,t,o,u,m){const w=256*t,E=w+255,P=u.transformRequest(u.normalizeGlyphsURL(o).replace("{fontstack}",r).replace("{range}",`${w}-${E}`),ys.Glyphs);vr(P,(B,G)=>{if(B)m(B);else if(G){const J={},ie=new sf(G).readFields(Z_,{});for(const se of ie.glyphs)J[se.id]=se;m(null,{glyphs:J,ascender:ie.ascender,descender:ie.descender})}})},Bu.TinySDF=class{constructor({fontSize:r=24,buffer:t=3,radius:o=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:w="normal",fontStyle:E="normal"}={}){this.buffer=t,this.cutoff=u,this.radius=o;const P=this.size=r+4*t,B=this._createCanvas(P),G=this.ctx=B.getContext("2d",{willReadFrequently:!0});G.font=`${E} ${w} ${r}px ${m}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(r){const t=document.createElement("canvas");return t.width=t.height=r,t}draw(r){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:w}=this.ctx.measureText(r),E=Math.ceil(o),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-m))),B=Math.min(this.size-this.buffer,E+Math.ceil(u)),G=P+2*this.buffer,J=B+2*this.buffer,ie=Math.max(G*J,0),se=new Uint8ClampedArray(ie),pe={data:se,width:G,height:J,glyphWidth:P,glyphHeight:B,glyphTop:E,glyphLeft:0,glyphAdvance:t};if(0===P||0===B)return pe;const{ctx:ge,buffer:Se,gridInner:Ge,gridOuter:lt}=this;ge.clearRect(Se,Se,P,B),ge.fillText(r,Se,Se+E);const Et=ge.getImageData(Se,Se,P,B);lt.fill(Xd,0,ie),Ge.fill(0,0,ie);for(let ut=0;ut<B;ut++)for(let Ct=0;Ct<P;Ct++){const At=Et.data[4*(ut*P+Ct)+3]/255;if(0===At)continue;const Lt=(ut+Se)*G+Ct+Se;if(1===At)lt[Lt]=0,Ge[Lt]=Xd;else{const ui=.5-At;lt[Lt]=ui>0?ui*ui:0,Ge[Lt]=ui<0?ui*ui:0}}Og(lt,0,0,G,J,G,this.f,this.v,this.z),Og(Ge,Se,Se,P,B,G,this.f,this.v,this.z);for(let ut=0;ut<ie;ut++){const Ct=Math.sqrt(lt[ut])-Math.sqrt(Ge[ut]);se[ut]=Math.round(255-255*(Ct/this.radius+this.cutoff))}return pe}};const kh=cl;function Rg(r,t,o,u){const m=[],w=r.image,E=w.pixelRatio,P=w.paddedRect.w-2*kh,B=w.paddedRect.h-2*kh,G=r.right-r.left,J=r.bottom-r.top,ie=w.stretchX||[[0,P]],se=w.stretchY||[[0,B]],pe=(mi,Ai)=>mi+Ai[1]-Ai[0],ge=ie.reduce(pe,0),Se=se.reduce(pe,0),Ge=P-ge,lt=B-Se;let Et=0,ut=ge,Ct=0,At=Se,Lt=0,ui=Ge,ii=0,Ci=lt;if(w.content&&u){const mi=w.content;Et=lf(ie,0,mi[0]),Ct=lf(se,0,mi[1]),ut=lf(ie,mi[0],mi[2]),At=lf(se,mi[1],mi[3]),Lt=mi[0]-Et,ii=mi[1]-Ct,ui=mi[2]-mi[0]-ut,Ci=mi[3]-mi[1]-At}const Xi=(mi,Ai,Ii,Ni)=>{const Ki=cf(mi.stretch-Et,ut,G,r.left),bi=uf(mi.fixed-Lt,ui,mi.stretch,ge),pn=cf(Ai.stretch-Ct,At,J,r.top),En=uf(Ai.fixed-ii,Ci,Ai.stretch,Se),_n=cf(Ii.stretch-Et,ut,G,r.left),ur=uf(Ii.fixed-Lt,ui,Ii.stretch,ge),tn=cf(Ni.stretch-Ct,At,J,r.top),Vn=uf(Ni.fixed-ii,Ci,Ni.stretch,Se),hr=new rt(Ki,pn),Gr=new rt(_n,pn),or=new rt(_n,tn),Wn=new rt(Ki,tn),Cs=new rt(bi/E,En/E),dr=new rt(ur/E,Vn/E),pr=t*Math.PI/180;if(pr){const ds=Math.sin(pr),ps=Math.cos(pr),As=[ps,-ds,ds,ps];hr._matMult(As),Gr._matMult(As),Wn._matMult(As),or._matMult(As)}const us=mi.stretch+mi.fixed,hs=Ai.stretch+Ai.fixed;return{tl:hr,tr:Gr,bl:Wn,br:or,tex:{x:w.paddedRect.x+kh+us,y:w.paddedRect.y+kh+hs,w:Ii.stretch+Ii.fixed-us,h:Ni.stretch+Ni.fixed-hs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cs,pixelOffsetBR:dr,minFontScaleX:ui/E/G,minFontScaleY:Ci/E/J,isSDF:o}};if(u&&(w.stretchX||w.stretchY)){const mi=zg(ie,Ge,ge),Ai=zg(se,lt,Se);for(let Ii=0;Ii<mi.length-1;Ii++){const Ni=mi[Ii],Ki=mi[Ii+1];for(let bi=0;bi<Ai.length-1;bi++)m.push(Xi(Ni,Ai[bi],Ki,Ai[bi+1]))}}else m.push(Xi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:B+1}));return m}function lf(r,t,o){let u=0;for(const m of r)u+=Math.max(t,Math.min(o,m[1]))-Math.max(t,Math.min(o,m[0]));return u}function zg(r,t,o){const u=[{fixed:-kh,stretch:0}];for(const[m,w]of r){const E=u[u.length-1];u.push({fixed:m-E.stretch,stretch:E.stretch}),u.push({fixed:m-E.stretch,stretch:E.stretch+(w-m)})}return u.push({fixed:t+kh,stretch:o}),u}function cf(r,t,o,u){return r/t*o+u}function uf(r,t,o,u){return r-t*o/u}function Eh(r,t,o,u){const m=t+r.positionedLines[u].lineOffset;return 0===u?o+m/2:o+(m+(t+r.positionedLines[u-1].lineOffset))/2}class tv{constructor(t=[],o=iv){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:u}=this,m=o[t];for(;t>0;){const w=t-1>>1,E=o[w];if(u(m,E)>=0)break;o[t]=E,t=w}o[t]=m}_down(t){const{data:o,compare:u}=this,m=this.length>>1,w=o[t];for(;t<m;){let E=1+(t<<1),P=o[E];const B=E+1;if(B<this.length&&u(o[B],P)<0&&(E=B,P=o[B]),u(P,w)>=0)break;o[t]=P,t=E}o[t]=w}}function iv(r,t){return r<t?-1:r>t?1:0}function nv(r,t=1,o=!1){let u=1/0,m=1/0,w=-1/0,E=-1/0;const P=r[0];for(let pe=0;pe<P.length;pe++){const ge=P[pe];(!pe||ge.x<u)&&(u=ge.x),(!pe||ge.y<m)&&(m=ge.y),(!pe||ge.x>w)&&(w=ge.x),(!pe||ge.y>E)&&(E=ge.y)}const B=Math.min(w-u,E-m);let G=B/2;const J=new tv([],rv);if(0===B)return new rt(u,m);for(let pe=u;pe<w;pe+=B)for(let ge=m;ge<E;ge+=B)J.push(new nd(pe+G,ge+G,G,r));let ie=function(pe){let ge=0,Se=0,Ge=0;const lt=pe[0];for(let Et=0,ut=lt.length,Ct=ut-1;Et<ut;Ct=Et++){const At=lt[Et],Lt=lt[Ct],ui=At.x*Lt.y-Lt.x*At.y;Se+=(At.x+Lt.x)*ui,Ge+=(At.y+Lt.y)*ui,ge+=3*ui}return new nd(Se/ge,Ge/ge,0,pe)}(r),se=J.length;for(;J.length;){const pe=J.pop();(pe.d>ie.d||!ie.d)&&(ie=pe,o&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,se)),pe.max-ie.d<=t||(G=pe.h/2,J.push(new nd(pe.p.x-G,pe.p.y-G,G,r)),J.push(new nd(pe.p.x+G,pe.p.y-G,G,r)),J.push(new nd(pe.p.x-G,pe.p.y+G,G,r)),J.push(new nd(pe.p.x+G,pe.p.y+G,G,r)),se+=4)}return o&&(console.log(`num probes: ${se}`),console.log(`best distance: ${ie.d}`)),ie.p}function rv(r,t){return t.max-r.max}class nd{constructor(t,o,u,m){this.p=new rt(t,o),this.h=u,this.d=function(w,E){let P=!1,B=1/0;for(let G=0;G<E.length;G++){const J=E[G];for(let ie=0,se=J.length,pe=se-1;ie<se;pe=ie++){const ge=J[ie],Se=J[pe];ge.y>w.y!=Se.y>w.y&&w.x<(Se.x-ge.x)*(w.y-ge.y)/(Se.y-ge.y)+ge.x&&(P=!P),B=Math.min(B,Md(w,ge,Se))}}return(P?1:-1)*Math.sqrt(B)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}}const rd=7,ym=Number.POSITIVE_INFINITY,sv=Math.sqrt(2);function Fg(r,[t,o]){let u=0,m=0;if(o===ym){t<0&&(t=0);const w=t/sv;switch(r){case"top-right":case"top-left":m=w-rd;break;case"bottom-right":case"bottom-left":m=-w+rd;break;case"bottom":m=-t+rd;break;case"top":m=t-rd}switch(r){case"top-right":case"bottom-right":u=-w;break;case"top-left":case"bottom-left":u=w;break;case"left":u=t;break;case"right":u=-t}}else{switch(t=Math.abs(t),o=Math.abs(o),r){case"top-right":case"top-left":case"top":m=o-rd;break;case"bottom-right":case"bottom-left":case"bottom":m=-o+rd}switch(r){case"top-right":case"bottom-right":case"right":u=-t;break;case"top-left":case"bottom-left":case"left":u=t}}return[u,m]}function ov(r,t,o,u,m,w,E,P,B,G){r.createArrays(),r.tilePixelRatio=Sn/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const J=r.layers[0].layout,ie=r.layers[0]._unevaluatedLayout._values,se={};if("composite"===r.textSizeData.kind){const{minZoom:Se,maxZoom:Ge}=r.textSizeData;se.compositeTextSizes=[ie["text-size"].possiblyEvaluate(new Q(Se),P),ie["text-size"].possiblyEvaluate(new Q(Ge),P)]}if("composite"===r.iconSizeData.kind){const{minZoom:Se,maxZoom:Ge}=r.iconSizeData;se.compositeIconSizes=[ie["icon-size"].possiblyEvaluate(new Q(Se),P),ie["icon-size"].possiblyEvaluate(new Q(Ge),P)]}se.layoutTextSize=ie["text-size"].possiblyEvaluate(new Q(B+1),P),se.layoutIconSize=ie["icon-size"].possiblyEvaluate(new Q(B+1),P),se.textMaxSize=ie["text-size"].possiblyEvaluate(new Q(18),P);const pe="map"===J.get("text-rotation-alignment")&&"point"!==J.get("symbol-placement"),ge=J.get("text-size");for(const Se of r.features){const Ge=J.get("text-font").evaluate(Se,{},P).join(","),lt=ge.evaluate(Se,{},P),Et=se.layoutTextSize.evaluate(Se,{},P),ut=(se.layoutIconSize.evaluate(Se,{},P),{horizontal:{},vertical:void 0}),Ct=Se.text;let At,Lt=[0,0];if(Ct){const Ci=Ct.toString(),Xi=J.get("text-letter-spacing").evaluate(Se,{},P)*ia,mi=J.get("text-line-height").evaluate(Se,{},P)*ia,Ai=hp(Ci)?Xi:0,Ii=J.get("text-anchor").evaluate(Se,{},P),Ni=J.get("text-variable-anchor");if(!Ni){const _n=J.get("text-radial-offset").evaluate(Se,{},P);Lt=_n?Fg(Ii,[_n*ia,ym]):J.get("text-offset").evaluate(Se,{},P).map(ur=>ur*ia)}let Ki=pe?"center":J.get("text-justify").evaluate(Se,{},P);const bi="point"===J.get("symbol-placement"),pn=bi?J.get("text-max-width").evaluate(Se,{},P)*ia:1/0,En=_n=>{r.allowVerticalPlacement&&Xo(Ci)&&(ut.vertical=gm(Ct,t,o,m,Ge,pn,mi,Ii,_n,Ai,Lt,Ua.vertical,!0,Et,lt))};if(!pe&&Ni){const _n="auto"===Ki?Ni.map(tn=>xm(tn)):[Ki];let ur=!1;for(let tn=0;tn<_n.length;tn++){const Vn=_n[tn];if(!ut.horizontal[Vn])if(ur)ut.horizontal[Vn]=ut.horizontal[0];else{const hr=gm(Ct,t,o,m,Ge,pn,mi,"center",Vn,Ai,Lt,Ua.horizontal,!1,Et,lt);hr&&(ut.horizontal[Vn]=hr,ur=1===hr.positionedLines.length)}}En("left")}else{if("auto"===Ki&&(Ki=xm(Ii)),bi||J.get("text-writing-mode").indexOf("horizontal")>=0||!Xo(Ci)){const _n=gm(Ct,t,o,m,Ge,pn,mi,Ii,Ki,Ai,Lt,Ua.horizontal,!1,Et,lt);_n&&(ut.horizontal[Ki]=_n)}En(bi?"left":Ki)}}let ui=!1;if(Se.icon&&Se.icon.name){const Ci=u[Se.icon.name];Ci&&(At=Q_(m[Se.icon.name],J.get("icon-offset").evaluate(Se,{},P),J.get("icon-anchor").evaluate(Se,{},P)),ui=Ci.sdf,void 0===r.sdfIcons?r.sdfIcons=Ci.sdf:r.sdfIcons!==Ci.sdf&&hn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ci.pixelRatio!==r.pixelRatio||0!==J.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}const ii=Bg(ut.horizontal)||ut.vertical;r.iconsInText||(r.iconsInText=!!ii&&ii.iconsInText),(ii||At)&&av(r,Se,ut,At,u,se,Et,0,Lt,ui,E,P,G)}w&&r.generateCollisionDebugBuffers(B,r.collisionBoxArray)}function xm(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function av(r,t,o,u,m,w,E,P,B,G,J,ie,se){let pe=w.textMaxSize.evaluate(t,{},ie);void 0===pe&&(pe=E);const ge=r.layers[0].layout,Se=ge.get("icon-offset").evaluate(t,{},ie),Ge=Bg(o.horizontal)||o.vertical,lt="globe"===se.name,Et=ia,ut=E/Et,Ct=r.tilePixelRatio*pe/Et,At=(Ii=r.overscaling,r.zoom>18&&Ii>2&&(Ii>>=1),Math.max(Sn/(512*Ii),1)*ge.get("symbol-spacing")),Lt=ge.get("text-padding")*r.tilePixelRatio,ui=ge.get("icon-padding")*r.tilePixelRatio,ii=Nt(ge.get("text-max-angle")),Ci="map"===ge.get("text-rotation-alignment")&&"point"!==ge.get("symbol-placement"),Xi="map"===ge.get("icon-rotation-alignment")&&"point"!==ge.get("symbol-placement"),mi=ge.get("symbol-placement"),Ai=At/2;var Ii;const Ni=ge.get("icon-text-fit");let Ki;u&&"none"!==Ni&&(r.allowVerticalPlacement&&o.vertical&&(Ki=Sg(u,o.vertical,Ni,ge.get("icon-text-fit-padding"),Se,ut)),Ge&&(u=Sg(u,Ge,Ni,ge.get("icon-text-fit-padding"),Se,ut)));const bi=(pn,En,_n)=>{if(En.x<0||En.x>=Sn||En.y<0||En.y>=Sn)return;let ur=null;if(lt){const{x:tn,y:Vn,z:hr}=se.projectTilePoint(En.x,En.y,_n);ur={anchor:new mu(tn,Vn,hr,0,void 0),up:se.upVector(_n,En.x,En.y)}}!function(tn,Vn,hr,Gr,or,Wn,Cs,dr,pr,us,hs,ds,ps,As,Hs,so,fs,mo,oo,Ls,Ur,ao,ms,$a,Gs){const ra=tn.addToLineVertexArray(Vn,Gr);let Ro,Wa,ko,Ac,ud,hd,ip,f_=0,m_=0,zm=0,g_=0,Fm=-1,Bm=-1;const su={};let __=Ph("");const vu=hr?hr.anchor:Vn;let Nm=0,np=0;if(void 0===pr._unevaluatedLayout.getValue("text-radial-offset")?[Nm,np]=pr.layout.get("text-offset").evaluate(Ur,{},Gs).map(Xa=>Xa*ia):(Nm=pr.layout.get("text-radial-offset").evaluate(Ur,{},Gs)*ia,np=ym),tn.allowVerticalPlacement&&or.vertical){const Xa=or.vertical;if(Hs)hd=bm(Xa),dr&&(ip=bm(dr));else{const hl=pr.layout.get("text-rotate").evaluate(Ur,{},Gs)+90;ko=Yu(us,vu,Vn,hs,ds,ps,Xa,As,hl,so),dr&&(Ac=Yu(us,vu,Vn,hs,ds,ps,dr,mo,hl))}}if(Wn){const Xa=pr.layout.get("icon-rotate").evaluate(Ur,{},Gs),hl="none"!==pr.layout.get("icon-text-fit"),sp=Rg(Wn,Xa,ms,hl),wf=dr?Rg(dr,Xa,ms,hl):void 0;Wa=Yu(us,vu,Vn,hs,ds,ps,Wn,mo,Xa),f_=4*sp.length;const Ym=tn.iconSizeData;let Wu=null;"source"===Ym.kind?(Wu=[Mc*pr.layout.get("icon-size").evaluate(Ur,{},Gs)],Wu[0]>Nu&&hn(`${tn.layerIds[0]}: Value for "icon-size" is >= ${Dc}. Reduce your "icon-size".`)):"composite"===Ym.kind&&(Wu=[Mc*ao.compositeIconSizes[0].evaluate(Ur,{},Gs),Mc*ao.compositeIconSizes[1].evaluate(Ur,{},Gs)],(Wu[0]>Nu||Wu[1]>Nu)&&hn(`${tn.layerIds[0]}: Value for "icon-size" is >= ${Dc}. Reduce your "icon-size".`)),tn.addSymbols(tn.icon,sp,Wu,Ls,oo,Ur,!1,hr,Vn,ra.lineStartIndex,ra.lineLength,-1,$a,Gs),Fm=tn.icon.placedSymbolArray.length-1,wf&&(m_=4*wf.length,tn.addSymbols(tn.icon,wf,Wu,Ls,oo,Ur,Ua.vertical,hr,Vn,ra.lineStartIndex,ra.lineLength,-1,$a,Gs),Bm=tn.icon.placedSymbolArray.length-1)}for(const Xa in or.horizontal){const hl=or.horizontal[Xa];Ro||(__=Ph(hl.text),Hs?ud=bm(hl):Ro=Yu(us,vu,Vn,hs,ds,ps,hl,As,pr.layout.get("text-rotate").evaluate(Ur,{},Gs),so));const sp=1===hl.positionedLines.length;if(zm+=sd(tn,hr,Vn,hl,Cs,pr,Hs,Ur,so,ra,or.vertical?Ua.horizontal:Ua.horizontalOnly,sp?Object.keys(or.horizontal):[Xa],su,Fm,ao,$a,Gs),sp)break}or.vertical&&(g_+=sd(tn,hr,Vn,or.vertical,Cs,pr,Hs,Ur,so,ra,Ua.vertical,["vertical"],su,Bm,ao,$a,Gs));let $u=-1;const rp=(Xa,hl)=>Xa?Math.max(Xa,hl):hl;$u=rp(ud,$u),$u=rp(hd,$u),$u=rp(ip,$u);const Av=$u>-1?1:0;tn.glyphOffsetArray.length>=Gu.MAX_GLYPHS&&hn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ur.sortKey&&tn.addToSortKeyRanges(tn.symbolInstances.length,Ur.sortKey),tn.symbolInstances.emplaceBack(vu.x,vu.y,vu.z,Vn.x,Vn.y,su.right>=0?su.right:-1,su.center>=0?su.center:-1,su.left>=0?su.left:-1,su.vertical>=0?su.vertical:-1,Fm,Bm,__,void 0!==Ro?Ro:tn.collisionBoxArray.length,void 0!==Ro?Ro+1:tn.collisionBoxArray.length,void 0!==ko?ko:tn.collisionBoxArray.length,void 0!==ko?ko+1:tn.collisionBoxArray.length,void 0!==Wa?Wa:tn.collisionBoxArray.length,void 0!==Wa?Wa+1:tn.collisionBoxArray.length,Ac||tn.collisionBoxArray.length,Ac?Ac+1:tn.collisionBoxArray.length,hs,zm,g_,f_,m_,Av,0,Nm,np,$u)}(r,En,ur,pn,o,u,m,Ki,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,Lt,Ci,B,0,ui,Xi,Se,t,w,G,J,ie)};if("line"===mi)for(const pn of Pg(t.geometry,0,0,Sn,Sn)){const En=ev(pn,At,ii,o.vertical||Ge,u,Et,Ct,r.overscaling,Sn);for(const _n of En)Ge&&lv(r,Ge.text,Ai,_n)||bi(pn,_n,ie)}else if("line-center"===mi){for(const pn of t.geometry)if(pn.length>1){const En=Wd(pn,ii,o.vertical||Ge,u,Et,Ct);En&&bi(pn,En,ie)}}else if("Polygon"===t.type)for(const pn of Bd(t.geometry,0)){const En=nv(pn,16);bi(pn[0],new mu(En.x,En.y,0,0,void 0),ie)}else if("LineString"===t.type)for(const pn of t.geometry)bi(pn,new mu(pn[0].x,pn[0].y,0,0,void 0),ie);else if("Point"===t.type)for(const pn of t.geometry)for(const En of pn)bi([En],new mu(En.x,En.y,0,0,void 0),ie)}const Dc=255,Nu=Dc*Mc;function sd(r,t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge,Se,Ge){const lt=function(Ct,At,Lt,ui,ii,Ci,Xi,mi){const Ai=[];if(0===At.positionedLines.length)return Ai;const Ii=ui.layout.get("text-rotate").evaluate(Ci,{})*Math.PI/180,Ni=function(_n){const ur=_n[0],tn=_n[1],Vn=ur*tn;return Vn>0?[ur,-tn]:Vn<0?[-ur,tn]:0===ur?[tn,ur]:[tn,-ur]}(Lt);let Ki=Math.abs(At.top-At.bottom);for(const _n of At.positionedLines)Ki-=_n.lineOffset;const bi=At.positionedLines.length,pn=Ki/bi;let En=At.top-Lt[1];for(let _n=0;_n<bi;++_n){const ur=At.positionedLines[_n];En=Eh(At,pn,En,_n);for(const tn of ur.positionedGlyphs){if(!tn.rect)continue;const Vn=tn.rect||{};let hr=xg+1,Gr=!0,or=1,Wn=0;if(tn.imageName){const ms=Xi[tn.imageName];if(!ms)continue;if(ms.sdf){hn("SDF images are not supported in formatted text and will be ignored.");continue}Gr=!1,or=ms.pixelRatio,hr=cl/or}const Cs=(ii||mi)&&tn.vertical,dr=tn.metrics.advance*tn.scale/2,pr=tn.metrics,us=tn.rect;if(null===us)continue;mi&&At.verticalizable&&(Wn=tn.imageName?dr-tn.metrics.width*tn.scale/2:0);const hs=ii?[tn.x+dr,tn.y]:[0,0];let ds=[0,0],ps=[0,0],As=!1;ii||(Cs?(ps=[tn.x+dr+Ni[0],tn.y+Ni[1]-Wn],As=!0):ds=[tn.x+dr+Lt[0],tn.y+Lt[1]-Wn]);const Hs=us.w*tn.scale/(or*(tn.localGlyph?na:1)),so=us.h*tn.scale/(or*(tn.localGlyph?na:1));let fs,mo,oo,Ls;if(Cs){const ms=tn.y-En,$a=new rt(-dr,dr-ms),Gs=-Math.PI/2,ra=new rt(...ps);fs=new rt(-dr+ds[0],ds[1]),fs._rotateAround(Gs,$a)._add(ra),fs.x+=-ms+dr,fs.y-=(pr.left-hr)*tn.scale;const Ro=tn.imageName?pr.advance*tn.scale:ia*tn.scale,Wa=String.fromCharCode(tn.glyph);N_(Wa)?fs.x+=(1-hr)*tn.scale:Y_(Wa)?fs.x+=Ro-pr.height*tn.scale+(-hr-1)*tn.scale:fs.x+=tn.imageName||pr.width+2*hr===us.w&&pr.height+2*hr===us.h?(Ro-so)/2:(Ro-(pr.height+2*hr)*tn.scale)/2,mo=new rt(fs.x,fs.y-Hs),oo=new rt(fs.x+so,fs.y),Ls=new rt(fs.x+so,fs.y-Hs)}else{const ms=(pr.left-hr)*tn.scale-dr+ds[0],$a=(-pr.top-hr)*tn.scale+ds[1],Gs=ms+Hs,ra=$a+so;fs=new rt(ms,$a),mo=new rt(Gs,$a),oo=new rt(ms,ra),Ls=new rt(Gs,ra)}if(Ii){let ms;ms=ii?new rt(0,0):As?new rt(Ni[0],Ni[1]):new rt(Lt[0],Lt[1]),fs._rotateAround(Ii,ms),mo._rotateAround(Ii,ms),oo._rotateAround(Ii,ms),Ls._rotateAround(Ii,ms)}const Ur=new rt(0,0),ao=new rt(0,0);Ai.push({tl:fs,tr:mo,bl:oo,br:Ls,tex:Vn,writingMode:At.writingMode,glyphOffset:hs,sectionIndex:tn.sectionIndex,isSDF:Gr,pixelOffsetTL:Ur,pixelOffsetBR:ao,minFontScaleX:0,minFontScaleY:0})}}return Ai}(0,u,B,w,E,P,m,r.allowVerticalPlacement),Et=r.textSizeData;let ut=null;"source"===Et.kind?(ut=[Mc*w.layout.get("text-size").evaluate(P,{},Ge)],ut[0]>Nu&&hn(`${r.layerIds[0]}: Value for "text-size" is >= ${Dc}. Reduce your "text-size".`)):"composite"===Et.kind&&(ut=[Mc*ge.compositeTextSizes[0].evaluate(P,{},Ge),Mc*ge.compositeTextSizes[1].evaluate(P,{},Ge)],(ut[0]>Nu||ut[1]>Nu)&&hn(`${r.layerIds[0]}: Value for "text-size" is >= ${Dc}. Reduce your "text-size".`)),r.addSymbols(r.text,lt,ut,B,E,P,J,t,o,G.lineStartIndex,G.lineLength,pe,Se,Ge);for(const Ct of ie)se[Ct]=r.text.placedSymbolArray.length-1;return 4*lt.length}function Bg(r){for(const t in r)return r[t];return null}function Yu(r,t,o,u,m,w,E,P,B,G){let J=E.top,ie=E.bottom,se=E.left,pe=E.right;const ge=E.collisionPadding;if(ge&&(se-=ge[0],J-=ge[1],pe+=ge[2],ie+=ge[3]),B){const Se=new rt(se,J),Ge=new rt(pe,J),lt=new rt(se,ie),Et=new rt(pe,ie),ut=Nt(B);let Ct=new rt(0,0);G&&(Ct=new rt(G[0],G[1])),Se._rotateAround(ut,Ct),Ge._rotateAround(ut,Ct),lt._rotateAround(ut,Ct),Et._rotateAround(ut,Ct),se=Math.min(Se.x,Ge.x,lt.x,Et.x),pe=Math.max(Se.x,Ge.x,lt.x,Et.x),J=Math.min(Se.y,Ge.y,lt.y,Et.y),ie=Math.max(Se.y,Ge.y,lt.y,Et.y)}return r.emplaceBack(t.x,t.y,t.z,o.x,o.y,se,J,pe,ie,P,u,m,w),r.length-1}function bm(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const t=r.bottom-r.top;return t>0?Math.max(10,t):null}function lv(r,t,o,u){const m=r.compareText;if(t in m){const w=m[t];for(let E=w.length-1;E>=0;E--)if(u.dist(w[E])<o)return!0}else m[t]=[];return m[t].push(u),!1}function Ng(r,t){const o=r.fovAboveCenter,u=r.elevation?r.elevation.getMinElevationBelowMSL()*t:0,m=(r._camera.position[2]*r.worldSize-u)/Math.cos(r._pitch),w=Math.sin(o)*m/Math.sin(Math.max(Math.PI/2-r._pitch-o,.01)),E=Math.sin(r._pitch)*w+m;return Math.min(1.01*E,m*(1/r._horizonShift))}function Sh(r,t){if(!t.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:t};const o=Math.pow(2,-r.z),u=r.x*o,m=(r.x+1)*o,w=r.y*o,E=(r.y+1)*o,P=al(u),B=al(m),G=ea(w),J=ea(E),ie=t.project(P,G),se=t.project(B,G),pe=t.project(B,J),ge=t.project(P,J);let Se=Math.min(ie.x,se.x,pe.x,ge.x),Ge=Math.min(ie.y,se.y,pe.y,ge.y),lt=Math.max(ie.x,se.x,pe.x,ge.x),Et=Math.max(ie.y,se.y,pe.y,ge.y);const ut=o/16;function Ct(Lt,ui,ii,Ci,Xi,mi){const Ai=(ii+Xi)/2,Ii=(Ci+mi)/2,Ni=t.project(al(Ai),ea(Ii)),Ki=Math.max(0,Se-Ni.x,Ge-Ni.y,Ni.x-lt,Ni.y-Et);Se=Math.min(Se,Ni.x),lt=Math.max(lt,Ni.x),Ge=Math.min(Ge,Ni.y),Et=Math.max(Et,Ni.y),Ki>ut&&(Ct(Lt,Ni,ii,Ci,Ai,Ii),Ct(Ni,ui,Ai,Ii,Xi,mi))}Ct(ie,se,u,w,m,w),Ct(se,pe,m,w,m,E),Ct(pe,ge,m,E,u,E),Ct(ge,ie,u,E,u,w),Se-=ut,Ge-=ut,lt+=ut,Et+=ut;const At=1/Math.max(lt-Se,Et-Ge);return{scale:At,x:Se*At,y:Ge*At,x2:lt*At,y2:Et*At,projection:t}}const cv=Vl(new Float32Array(16));class Vu{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,o){return{x:0,y:0,z:0}}unproject(t,o){return new ns(0,0)}projectTilePoint(t,o,u){return{x:t,y:o,z:0}}locationPoint(t,o,u=!0){return t._coordinatePoint(t.locationCoordinate(o),u)}pixelsPerMeter(t,o){return jl(1,t)*o}pixelSpaceConversion(t,o,u){return 1}farthestPixelDistance(t){return Ng(t,t.pixelsPerMeter)}pointCoordinate(t,o,u,m){const w=t.horizonLineFromTop(!1),E=new rt(o,Math.max(w,u));return t.rayIntersectionCoordinate(t.pointRayIntersection(E,m))}pointCoordinate3D(t,o,u){const m=new rt(o,u);if(t.elevation)return t.elevation.pointCoordinate(m);{const w=this.pointCoordinate(t,m.x,m.y,0);return[w.x,w.y,w.z]}}isPointAboveHorizon(t,o){if(t.elevation)return!this.pointCoordinate3D(t,o.x,o.y);const u=t.horizonLineFromTop();return o.y<u}createInversionMatrix(t,o){return cv}createTileMatrix(t,o,u){let m,w,E;const P=u.canonical,B=Vl(new Float64Array(16));if(this.isReprojectedInTileSpace){const G=Sh(P,this);m=1,w=G.x+u.wrap*G.scale,E=G.y,oc(B,B,[m/G.scale,m/G.scale,t.pixelsPerMeter/o])}else m=o/t.zoomScale(P.z),w=(P.x+Math.pow(2,P.z)*u.wrap)*m,E=P.y*m;return Cu(B,B,[w,E,0]),oc(B,B,[m/Sn,m/Sn,1]),B}upVector(t,o,u){return[0,0,1]}upVectorScale(t,o,u){return{metersToTile:1}}}class uv extends Vu{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[o,u]=this.parallels=t.parallels||[29.5,45.5],m=Math.sin(Nt(o));this.n=(m+Math.sin(Nt(u)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(t,o){const{n:u,c:m,r0:w}=this,E=Nt(t-this.center[0]),P=Nt(o),B=Math.sqrt(m-2*u*Math.sin(P))/u;return{x:B*Math.sin(E*u),y:B*Math.cos(E*u)-w,z:0}}unproject(t,o){const{n:u,c:m,r0:w}=this,E=w+o;let P=Math.atan2(t,Math.abs(E))*Math.sign(E);E*u<0&&(P-=Math.PI*Math.sign(t)*Math.sign(E));const B=Nt(this.center[0])*u;P=Mi(P,-Math.PI-B,Math.PI-B);const G=ai(ct(P/u)+this.center[0],-180,180),J=Math.asin(ai((m-(t*t+E*E)*u*u)/(2*u),-1,1)),ie=ai(ct(J),-ta,ta);return new ns(G,ie)}}const Zd=1.340264,qd=-.081106,Kd=893e-6,Jd=.003796,hf=Math.sqrt(3)/2;class hv extends Vu{project(t,o){o=o/180*Math.PI,t=t/180*Math.PI;const u=Math.asin(hf*Math.sin(o)),m=u*u,w=m*m*m;return{x:.5*(t*Math.cos(u)/(hf*(Zd+3*qd*m+w*(7*Kd+9*Jd*m)))/Math.PI+.5),y:1-.5*(u*(Zd+qd*m+w*(Kd+Jd*m))/Math.PI+1),z:0}}unproject(t,o){t=(2*t-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,m=u*u,w=m*m*m;for(let J,ie,se,pe=0;pe<12&&(ie=u*(Zd+qd*m+w*(Kd+Jd*m))-o,se=Zd+3*qd*m+w*(7*Kd+9*Jd*m),J=ie/se,u=ai(u-J,-Math.PI/3,Math.PI/3),m=u*u,w=m*m*m,!(Math.abs(J)<1e-12));++pe);const E=hf*t*(Zd+3*qd*m+w*(7*Kd+9*Jd*m))/Math.cos(u),P=Math.asin(Math.sin(u)/hf),B=ai(180*E/Math.PI,-180,180),G=ai(180*P/Math.PI,-ta,ta);return new ns(B,G)}}class dv extends Vu{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,o){return{x:.5+t/360,y:.5-o/360,z:0}}unproject(t,o){const u=360*(t-.5),m=ai(360*(.5-o),-ta,ta);return new ns(u,m)}}const od=Math.PI/2;function df(r){return Math.tan((od+r)/2)}class ad extends Vu{constructor(t){super(t),this.center=t.center||[0,30];const[o,u]=this.parallels=t.parallels||[30,30];let m=Nt(o),w=Nt(u);this.southernCenter=m+w<0,this.southernCenter&&(m=-m,w=-w);const E=Math.cos(m),P=df(m);this.n=m===w?Math.sin(m):Math.log(E/Math.cos(w))/Math.log(df(w)/P),this.f=E*Math.pow(df(m),this.n)/this.n}project(t,o){o=Nt(o),this.southernCenter&&(o=-o),t=Nt(t-this.center[0]);const u=1e-6,{n:m,f:w}=this;w>0?o<-od+u&&(o=-od+u):o>od-u&&(o=od-u);const E=w/Math.pow(df(o),m);let P=E*Math.sin(m*t),B=w-E*Math.cos(m*t);return P=.5*(P/Math.PI+.5),B=.5*(B/Math.PI+.5),{x:P,y:this.southernCenter?B:1-B,z:0}}unproject(t,o){t=(2*t-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:u,f:m}=this,w=m-o,E=Math.sign(w),P=Math.sign(u)*Math.sqrt(t*t+w*w);let B=Math.atan2(t,Math.abs(w))*E;w*u<0&&(B-=Math.PI*Math.sign(t)*E);const G=ai(ct(B/u)+this.center[0],-180,180),J=ai(ct(2*Math.atan(Math.pow(m/P,1/u))-od),-ta,ta);return new ns(G,this.southernCenter?-J:J)}}class wm extends Vu{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,o){return{x:hc(t),y:dc(o),z:0}}unproject(t,o){const u=al(t),m=ea(o);return new ns(u,m)}}const Yg=Nt(ta);class pv extends Vu{project(t,o){const u=(o=Nt(o))*o,m=u*u;return{x:.5*((t=Nt(t))*(.8707-.131979*u+m*(m*(.003971*u-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+u*(.015085+m*(.028874*u-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(t,o){t=(2*t-.5)*Math.PI;let u=o=(2*(1-o)-1)*Math.PI,m=25,w=0,E=u*u;do{E=u*u;const G=E*E;w=(u*(1.007226+E*(.015085+G*(.028874*E-.044475-.005916*G)))-o)/(1.007226+E*(.045255+G*(.259866*E-.311325-.005916*11*G))),u=ai(u-w,-Yg,Yg)}while(Math.abs(w)>1e-6&&--m>0);E=u*u;const P=ai(ct(t/(.8707+E*(E*(E*E*E*(.003971-.001529*E)-.013791)-.131979))),-180,180),B=ct(u);return new ns(P,B)}}const Vg=Nt(ta);class fv extends Vu{project(t,o){o=Nt(o),t=Nt(t);const u=Math.cos(o),m=2/Math.PI,w=Math.acos(u*Math.cos(t/2)),E=Math.sin(w)/w,P=.5*(t*m+2*u*Math.sin(t/2)/E)||0,B=.5*(o+Math.sin(o)/E)||0;return{x:.5*(P/Math.PI+.5),y:1-.5*(B/Math.PI+1),z:0}}unproject(t,o){let u=t=(2*t-.5)*Math.PI,m=o=(2*(1-o)-1)*Math.PI,w=25;const E=1e-6;let P=0,B=0;do{const G=Math.cos(m),J=Math.sin(m),ie=2*J*G,se=J*J,pe=G*G,ge=Math.cos(u/2),Se=Math.sin(u/2),Ge=2*ge*Se,lt=Se*Se,Et=1-pe*ge*ge,ut=Et?1/Et:0,Ct=Et?Math.acos(G*ge)*Math.sqrt(1/Et):0,At=.5*(2*Ct*G*Se+2*u/Math.PI)-t,Lt=.5*(Ct*J+m)-o,ui=.5*ut*(pe*lt+Ct*G*ge*se)+1/Math.PI,ii=ut*(Ge*ie/4-Ct*J*Se),Ci=.125*ut*(ie*Se-Ct*J*pe*Ge),Xi=.5*ut*(se*ge+Ct*lt*G)+.5,mi=ii*Ci-Xi*ui;P=(Lt*ii-At*Xi)/mi,B=(At*Ci-Lt*ui)/mi,u=ai(u-P,-Math.PI,Math.PI),m=ai(m-B,-Vg,Vg)}while((Math.abs(P)>E||Math.abs(B)>E)&&--w>0);return new ns(ct(u),ct(m))}}class Hg extends Vu{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Nt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,o){const{scale:u,cosPhi:m}=this;return{x:Nt(t)*m*u+.5,y:-Math.sin(Nt(o))/m*u+.5,z:0}}unproject(t,o){const{scale:u,cosPhi:m}=this,w=-(o-.5)/u,E=ai(ct((t-.5)/u)/m,-180,180),P=Math.asin(ai(w*m,-1,1)),B=ai(ct(P),-ta,ta);return new ns(E,B)}}class pf extends wm{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,o,u){const m=ah(t,o,u);return Fs(m,m,lh(cc(u))),{x:m[0],y:m[1],z:m[2]}}locationPoint(t,o){const u=Mu(o.lat,o.lng),m=Jo([],u),w=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(o),t._centerAltitude):t._centerAltitude;Ec(u,u,m,jl(1,0)*Sn*w);const E=Vl(new Float64Array(16));return wu(E,t.pixelMatrix,t.globeMatrix),Fs(u,u,E),new rt(u[0],u[1])}pixelsPerMeter(t,o){return jl(1,0)*o}pixelSpaceConversion(t,o,u){const m=jl(1,t)*o,w=Cr(jl(1,45)*o,m,u);return this.pixelsPerMeter(t,o)/w}createTileMatrix(t,o,u){const m=Ip(cc(u.canonical));return wu(new Float64Array(16),t.globeMatrix,m)}createInversionMatrix(t,o){const{center:u}=t,m=lh(cc(o));return zh(m,m,Nt(u.lng)),vp(m,m,Nt(u.lat)),oc(m,m,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(m)}pointCoordinate(t,o,u,m){return Gf(t,o,u,!0)||new uh(0,0)}pointCoordinate3D(t,o,u){const m=this.pointCoordinate(t,o,u,0);return[m.x,m.y,m.z]}isPointAboveHorizon(t,o){return!Gf(t,o.x,o.y,!1)}farthestPixelDistance(t){const o=function(m,w){const E=m.cameraToCenterDistance,P=m._centerAltitude*w,B=m._camera,G=m._camera.forward(),J=kc([],ol([],G,-E),[0,0,P]),ie=m.worldSize/(2*Math.PI),se=[0,0,-ie],pe=m.width/m.height,ge=Math.tan(m.fovAboveCenter),Se=ol([],B.up(),ge),Ge=ol([],B.right(),ge*pe),lt=Jo([],kc([],kc([],G,Se),Ge)),Et=[];let ut;if(new xd(J,lt).closestPointOnSphere(se,ie,Et)){const Ct=kc([],Et,se),At=ac([],Ct,J);ut=Math.cos(m.fovAboveCenter)*Tu(At)}else{const Ct=ac([],J,se),At=ac([],se,J);Jo(At,At);const Lt=Tu(Ct)-ie;ut=Math.sqrt(Lt*(Lt+2*ie));const ui=Math.acos(ut/(ie+Lt))-Math.acos(Va(G,At));ut*=Math.cos(ui)}return 1.01*ut}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),u=Du(t.zoom);if(u>0){const m=Ng(t,jl(1,t.center.lat)*t.worldSize),w=t.worldSize/(2*Math.PI),E=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Cr(o,m+w*(1-Math.cos(E)),Math.pow(u,10))}return o}upVector(t,o,u){return ah(o,u,t,1)}upVectorScale(t){return{metersToTile:wd(Vh(cc(t)))}}}function Gg(r){const t=r.parallels,o=!!t&&Math.abs(t[0]+t[1])<.01;switch(r.name){case"mercator":return new wm(r);case"equirectangular":return new dv(r);case"naturalEarth":return new pv(r);case"equalEarth":return new hv(r);case"winkelTripel":return new fv(r);case"albers":return o?new Hg(r):new uv(r);case"lambertConformalConic":return o?new Hg(r):new ad(r);case"globe":return new pf(r)}throw new Error(`Invalid projection name: ${r.name}`)}const mv=ft.types,gv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ff(r,t,o,u,m,w,E,P,B,G,J,ie,se){const pe=P?Math.min(Nu,Math.round(P[0])):0,ge=P?Math.min(Nu,Math.round(P[1])):0;r.emplaceBack(t,o,Math.round(32*u),Math.round(32*m),w,E,(pe<<1)+(B?1:0),ge,16*G,16*J,256*ie,256*se)}function mf(r,t,o,u,m,w,E){r.emplaceBack(t,o,u,m,w,E)}function gf(r,t,o,u,m){r.emplaceBack(t,o,u,m),r.emplaceBack(t,o,u,m),r.emplaceBack(t,o,u,m),r.emplaceBack(t,o,u,m)}function _v(r){for(const t of r.sections)if(Na(t.text))return!0;return!1}class Cm{constructor(t){this.layoutVertexArray=new zi,this.indexArray=new On,this.programConfigurations=t,this.segments=new zs,this.dynamicLayoutVertexArray=new ji,this.opacityVertexArray=new Pn,this.placedSymbolArray=new Jr,this.globeExtVertexArray=new Hi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,o,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,pg.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,gv,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,To.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}vn(Cm,"SymbolBuffers");class Hu{constructor(t,o,u){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new u,this.segments=new zs,this.collisionVertexArray=new ar,this.collisionVertexArrayExt=new Zn}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,fg.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Fu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}vn(Hu,"CollisionBuffers");class Gu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(E=>E.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Vl([]),this.placementViewportMatrix=Vl([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ef(this.zoom,o["text-size"]),this.iconSizeData=ef(this.zoom,o["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),w=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==w&&void 0!==m.constantOr(1),this.sortFeaturesByY=("viewport-y"===w||"auto"===w&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(E=>Ua[E]),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new Cm(new jc(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Cm(new jc(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new pa,this.lineVertexArray=new Hc,this.symbolInstances=new cs}calculateGlyphDependencies(t,o,u,m,w){for(let E=0;E<t.length;E++)if(o[t.charCodeAt(E)]=!0,m&&w){const P=jd[t.charAt(E)];P&&(o[P.charCodeAt(0)]=!0)}}populate(t,o,u,m){const w=this.layers[0],E=w.layout,P="globe"===this.projection.name,B=E.get("text-font"),G=E.get("text-field"),J=E.get("icon-image"),ie=("constant"!==G.value.kind||G.value.value instanceof Yn&&!G.value.value.isEmpty()||G.value.value.toString().length>0)&&("constant"!==B.value.kind||B.value.value.length>0),se="constant"!==J.value.kind||!!J.value.value||Object.keys(J.parameters).length>0,pe=E.get("symbol-sort-key");if(this.features=[],!ie&&!se)return;const ge=o.iconDependencies,Se=o.glyphDependencies,Ge=o.availableImages,lt=new Q(this.zoom);for(const{feature:Et,id:ut,index:Ct,sourceLayerIndex:At}of t){const Lt=w._featureFilter.needGeometry,ui=Ia(Et,Lt);if(!w._featureFilter.filter(lt,ui,u))continue;if(Lt||(ui.geometry=Xc(Et,u,m)),P&&1!==Et.type&&u.z<=5){const mi=ui.geometry,Ai=.98078528056,Ii=(Ni,Ki)=>Va(ah(Ni.x,Ni.y,u,1),ah(Ki.x,Ki.y,u,1))<Ai;for(let Ni=0;Ni<mi.length;Ni++)mi[Ni]=Km(mi[Ni],Ii)}let ii,Ci;if(ie){const mi=w.getValueAndResolveTokens("text-field",ui,u,Ge),Ai=Yn.factory(mi);_v(Ai)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===z()||this.hasRTLText&&Z.isParsed())&&(ii=ty(Ai,w,ui))}if(se){const mi=w.getValueAndResolveTokens("icon-image",ui,u,Ge);Ci=mi instanceof zr?mi:zr.fromString(mi)}if(!ii&&!Ci)continue;const Xi=this.sortFeaturesByKey?pe.evaluate(ui,{},u):void 0;if(this.features.push({id:ut,text:ii,icon:Ci,index:Ct,sourceLayerIndex:At,geometry:ui.geometry,properties:Et.properties,type:mv[Et.type],sortKey:Xi}),Ci&&(ge[Ci.name]=!0),ii){const mi=B.evaluate(ui,{},u).join(","),Ai="map"===E.get("text-rotation-alignment")&&"point"!==E.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ua.vertical)>=0;for(const Ii of ii.sections)if(Ii.image)ge[Ii.image.name]=!0;else{const Ni=Xo(ii.toString()),Ki=Ii.fontStack||mi,bi=Se[Ki]=Se[Ki]||{};this.calculateGlyphDependencies(Ii.text,bi,Ai,this.allowVerticalPlacement,Ni)}}}"line"===E.get("symbol-placement")&&(this.features=function(Et){const ut={},Ct={},At=[];let Lt=0;function ui(mi){At.push(Et[mi]),Lt++}function ii(mi,Ai,Ii){const Ni=Ct[mi];return delete Ct[mi],Ct[Ai]=Ni,At[Ni].geometry[0].pop(),At[Ni].geometry[0]=At[Ni].geometry[0].concat(Ii[0]),Ni}function Ci(mi,Ai,Ii){const Ni=ut[Ai];return delete ut[Ai],ut[mi]=Ni,At[Ni].geometry[0].shift(),At[Ni].geometry[0]=Ii[0].concat(At[Ni].geometry[0]),Ni}function Xi(mi,Ai,Ii){const Ni=Ii?Ai[0][Ai[0].length-1]:Ai[0][0];return`${mi}:${Ni.x}:${Ni.y}`}for(let mi=0;mi<Et.length;mi++){const Ai=Et[mi],Ii=Ai.geometry,Ni=Ai.text?Ai.text.toString():null;if(!Ni){ui(mi);continue}const Ki=Xi(Ni,Ii),bi=Xi(Ni,Ii,!0);if(Ki in Ct&&bi in ut&&Ct[Ki]!==ut[bi]){const pn=Ci(Ki,bi,Ii),En=ii(Ki,bi,At[pn].geometry);delete ut[Ki],delete Ct[bi],Ct[Xi(Ni,At[En].geometry,!0)]=En,At[pn].geometry=null}else Ki in Ct?ii(Ki,bi,Ii):bi in ut?Ci(Ki,bi,Ii):(ui(mi),ut[Ki]=Lt-1,Ct[bi]=Lt-1)}return At.filter(mi=>mi.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Et,ut)=>Et.sortKey-ut.sortKey)}update(t,o,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,u,m),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,u,m))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Gg(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const u=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:m,y:w}of o)this.lineVertexArray.emplaceBack(m,w);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,o,u,m,w,E,P,B,G,J,ie,se,pe,ge){const Se=t.indexArray,Ge=t.layoutVertexArray,lt=t.globeExtVertexArray,Et=t.segments.prepareSegment(4*o.length,Ge,Se,this.canOverlap?E.sortKey:void 0),ut=this.glyphOffsetArray.length,Ct=Et.vertexLength,At=this.allowVerticalPlacement&&P===Ua.vertical?Math.PI/2:0,Lt=E.text&&E.text.sections;for(let ii=0;ii<o.length;ii++){const{tl:Ci,tr:Xi,bl:mi,br:Ai,tex:Ii,pixelOffsetTL:Ni,pixelOffsetBR:Ki,minFontScaleX:bi,minFontScaleY:pn,glyphOffset:En,isSDF:_n,sectionIndex:ur}=o[ii],tn=Et.vertexLength,Vn=En[1];if(ff(Ge,G.x,G.y,Ci.x,Vn+Ci.y,Ii.x,Ii.y,u,_n,Ni.x,Ni.y,bi,pn),ff(Ge,G.x,G.y,Xi.x,Vn+Xi.y,Ii.x+Ii.w,Ii.y,u,_n,Ki.x,Ni.y,bi,pn),ff(Ge,G.x,G.y,mi.x,Vn+mi.y,Ii.x,Ii.y+Ii.h,u,_n,Ni.x,Ki.y,bi,pn),ff(Ge,G.x,G.y,Ai.x,Vn+Ai.y,Ii.x+Ii.w,Ii.y+Ii.h,u,_n,Ki.x,Ki.y,bi,pn),B){const{x:hr,y:Gr,z:or}=B.anchor,[Wn,Cs,dr]=B.up;mf(lt,hr,Gr,or,Wn,Cs,dr),mf(lt,hr,Gr,or,Wn,Cs,dr),mf(lt,hr,Gr,or,Wn,Cs,dr),mf(lt,hr,Gr,or,Wn,Cs,dr),gf(t.dynamicLayoutVertexArray,hr,Gr,or,At)}else gf(t.dynamicLayoutVertexArray,G.x,G.y,G.z,At);Se.emplaceBack(tn,tn+1,tn+2),Se.emplaceBack(tn+1,tn+2,tn+3),Et.vertexLength+=4,Et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(En[0]),ii!==o.length-1&&ur===o[ii+1].sectionIndex||t.programConfigurations.populatePaintArrays(Ge.length,E,E.index,{},pe,ge,Lt&&Lt[ur])}const ui=B?B.anchor:G;t.placedSymbolArray.emplaceBack(ui.x,ui.y,ui.z,G.x,G.y,ut,this.glyphOffsetArray.length-ut,Ct,J,ie,G.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],P,0,!1,0,se,0)}_commitLayoutVertex(t,o,u,m,w,E,P){t.emplaceBack(o,u,m,w,E,Math.round(P.x),Math.round(P.y))}_addCollisionDebugVertices(t,o,u,m,w,E,P){const B=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),G=B.vertexLength,J=P.tileAnchorX,ie=P.tileAnchorY;for(let pe=0;pe<4;pe++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(o,-t.padding,-t.padding),u.collisionVertexArrayExt.emplaceBack(o,t.padding,-t.padding),u.collisionVertexArrayExt.emplaceBack(o,t.padding,t.padding),u.collisionVertexArrayExt.emplaceBack(o,-t.padding,t.padding),this._commitLayoutVertex(u.layoutVertexArray,m,w,E,J,ie,new rt(t.x1,t.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,w,E,J,ie,new rt(t.x2,t.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,w,E,J,ie,new rt(t.x2,t.y2)),this._commitLayoutVertex(u.layoutVertexArray,m,w,E,J,ie,new rt(t.x1,t.y2)),B.vertexLength+=4;const se=u.indexArray;se.emplaceBack(G,G+1),se.emplaceBack(G+1,G+2),se.emplaceBack(G+2,G+3),se.emplaceBack(G+3,G),B.primitiveLength+=4}_addTextDebugCollisionBoxes(t,o,u,m,w,E){for(let P=m;P<w;P++){const B=u.get(P),G=this.getSymbolInstanceTextSize(t,E,o,P);this._addCollisionDebugVertices(B,G,this.textCollisionBox,B.projectedAnchorX,B.projectedAnchorY,B.projectedAnchorZ,E)}}_addIconDebugCollisionBoxes(t,o,u,m,w,E){for(let P=m;P<w;P++){const B=u.get(P),G=this.getSymbolInstanceIconSize(t,o,E.placedIconSymbolIndex);this._addCollisionDebugVertices(B,G,this.iconCollisionBox,B.projectedAnchorX,B.projectedAnchorY,B.projectedAnchorZ,E)}}generateCollisionDebugBuffers(t,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hu(wn,Qp.members,Ks),this.iconCollisionBox=new Hu(wn,Qp.members,Ks);const u=bh(this.iconSizeData,t),m=bh(this.textSizeData,t);for(let w=0;w<this.symbolInstances.length;w++){const E=this.symbolInstances.get(w);this._addTextDebugCollisionBoxes(m,t,o,E.textBoxStartIndex,E.textBoxEndIndex,E),this._addTextDebugCollisionBoxes(m,t,o,E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E),this._addIconDebugCollisionBoxes(u,t,o,E.iconBoxStartIndex,E.iconBoxEndIndex,E),this._addIconDebugCollisionBoxes(u,t,o,E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E)}}getSymbolInstanceTextSize(t,o,u,m){const w=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:m),E=xh(this.textSizeData,t,w)/ia;return this.tilePixelRatio*E}getSymbolInstanceIconSize(t,o,u){const m=this.icon.placedSymbolArray.get(u),w=xh(this.iconSizeData,t,m);return this.tilePixelRatio*w}_commitDebugCollisionVertexUpdate(t,o,u){t.emplaceBack(o,-u,-u),t.emplaceBack(o,u,-u),t.emplaceBack(o,u,u),t.emplaceBack(o,-u,u)}_updateTextDebugCollisionBoxes(t,o,u,m,w,E){for(let P=m;P<w;P++){const B=u.get(P),G=this.getSymbolInstanceTextSize(t,E,o,P);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,G,B.padding)}}_updateIconDebugCollisionBoxes(t,o,u,m,w,E){for(let P=m;P<w;P++){const B=u.get(P),G=this.getSymbolInstanceIconSize(t,o,E);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,G,B.padding)}}updateCollisionDebugBuffers(t,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=bh(this.iconSizeData,t),m=bh(this.textSizeData,t);for(let w=0;w<this.symbolInstances.length;w++){const E=this.symbolInstances.get(w);this._updateTextDebugCollisionBoxes(m,t,o,E.textBoxStartIndex,E.textBoxEndIndex,E),this._updateTextDebugCollisionBoxes(m,t,o,E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E),this._updateIconDebugCollisionBoxes(u,t,o,E.iconBoxStartIndex,E.iconBoxEndIndex,E.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,t,o,E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,o,u,m,w,E,P,B,G){const J={};if(o<u){const{x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct,featureIndex:At}=t.get(o);J.textBox={x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct},J.textFeatureIndex=At}if(m<w){const{x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct,featureIndex:At}=t.get(m);J.verticalTextBox={x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct},J.verticalTextFeatureIndex=At}if(E<P){const{x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct,featureIndex:At}=t.get(E);J.iconBox={x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct},J.iconFeatureIndex=At}if(B<G){const{x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct,featureIndex:At}=t.get(B);J.verticalIconBox={x1:ie,y1:se,x2:pe,y2:ge,padding:Se,projectedAnchorX:Ge,projectedAnchorY:lt,projectedAnchorZ:Et,tileAnchorX:ut,tileAnchorY:Ct},J.verticalIconFeatureIndex=At}return J}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const u=t.placedSymbolArray.get(o),m=u.vertexStartIndex+4*u.numGlyphs;for(let w=u.vertexStartIndex;w<m;w+=4)t.indexArray.emplaceBack(w,w+1,w+2),t.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const o=Math.sin(t),u=Math.cos(t),m=[],w=[],E=[];for(let P=0;P<this.symbolInstances.length;++P){E.push(P);const B=this.symbolInstances.get(P);m.push(0|Math.round(o*B.tileAnchorX+u*B.tileAnchorY)),w.push(B.featureIndex)}return E.sort((P,B)=>m[P]-m[B]||w[B]-w[P]),E}addToSortKeyRanges(t,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:m,centerJustifiedTextSymbolIndex:w,leftJustifiedTextSymbolIndex:E,verticalPlacedTextSymbolIndex:P,placedIconSymbolIndex:B,verticalPlacedIconSymbolIndex:G}=u;m>=0&&this.addIndicesForPlacedSymbol(this.text,m),w>=0&&w!==m&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&E!==w&&E!==m&&this.addIndicesForPlacedSymbol(this.text,E),P>=0&&this.addIndicesForPlacedSymbol(this.text,P),B>=0&&this.addIndicesForPlacedSymbol(this.icon,B),G>=0&&this.addIndicesForPlacedSymbol(this.icon,G)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}vn(Gu,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Gu.MAX_GLYPHS=65535,Gu.addDynamicAttributes=gf;const vv=new vt({"symbol-placement":new we(M.layout_symbol["symbol-placement"]),"symbol-spacing":new we(M.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new we(M.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new We(M.layout_symbol["symbol-sort-key"]),"symbol-z-order":new we(M.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new we(M.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new we(M.layout_symbol["icon-ignore-placement"]),"icon-optional":new we(M.layout_symbol["icon-optional"]),"icon-rotation-alignment":new we(M.layout_symbol["icon-rotation-alignment"]),"icon-size":new We(M.layout_symbol["icon-size"]),"icon-text-fit":new we(M.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new we(M.layout_symbol["icon-text-fit-padding"]),"icon-image":new We(M.layout_symbol["icon-image"]),"icon-rotate":new We(M.layout_symbol["icon-rotate"]),"icon-padding":new we(M.layout_symbol["icon-padding"]),"icon-keep-upright":new we(M.layout_symbol["icon-keep-upright"]),"icon-offset":new We(M.layout_symbol["icon-offset"]),"icon-anchor":new We(M.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new we(M.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new we(M.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new we(M.layout_symbol["text-rotation-alignment"]),"text-field":new We(M.layout_symbol["text-field"]),"text-font":new We(M.layout_symbol["text-font"]),"text-size":new We(M.layout_symbol["text-size"]),"text-max-width":new We(M.layout_symbol["text-max-width"]),"text-line-height":new We(M.layout_symbol["text-line-height"]),"text-letter-spacing":new We(M.layout_symbol["text-letter-spacing"]),"text-justify":new We(M.layout_symbol["text-justify"]),"text-radial-offset":new We(M.layout_symbol["text-radial-offset"]),"text-variable-anchor":new we(M.layout_symbol["text-variable-anchor"]),"text-anchor":new We(M.layout_symbol["text-anchor"]),"text-max-angle":new we(M.layout_symbol["text-max-angle"]),"text-writing-mode":new we(M.layout_symbol["text-writing-mode"]),"text-rotate":new We(M.layout_symbol["text-rotate"]),"text-padding":new we(M.layout_symbol["text-padding"]),"text-keep-upright":new we(M.layout_symbol["text-keep-upright"]),"text-transform":new We(M.layout_symbol["text-transform"]),"text-offset":new We(M.layout_symbol["text-offset"]),"text-allow-overlap":new we(M.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new we(M.layout_symbol["text-ignore-placement"]),"text-optional":new we(M.layout_symbol["text-optional"])});var Tm={paint:new vt({"icon-opacity":new We(M.paint_symbol["icon-opacity"]),"icon-color":new We(M.paint_symbol["icon-color"]),"icon-halo-color":new We(M.paint_symbol["icon-halo-color"]),"icon-halo-width":new We(M.paint_symbol["icon-halo-width"]),"icon-halo-blur":new We(M.paint_symbol["icon-halo-blur"]),"icon-translate":new we(M.paint_symbol["icon-translate"]),"icon-translate-anchor":new we(M.paint_symbol["icon-translate-anchor"]),"text-opacity":new We(M.paint_symbol["text-opacity"]),"text-color":new We(M.paint_symbol["text-color"],{runtimeType:K,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new We(M.paint_symbol["text-halo-color"]),"text-halo-width":new We(M.paint_symbol["text-halo-width"]),"text-halo-blur":new We(M.paint_symbol["text-halo-blur"]),"text-translate":new we(M.paint_symbol["text-translate"]),"text-translate-anchor":new we(M.paint_symbol["text-translate-anchor"])}),layout:vv};class jg{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ve,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}vn(jg,"FormatSectionOverride",{omit:["defaultValue"]});class gu extends sl{constructor(t){super(t,Tm)}recalculate(t,o){super.recalculate(t,o),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const w of u)m.indexOf(w)<0&&m.push(w);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,o,u,m){const w=this.layout.get(t).evaluate(o,{},u,m),E=this._unevaluatedLayout._values[t];return E.isDataDriven()||gs(E.value)||!w?w:(P=o.properties,w.replace(/{([^{}]+)}/g,(G,J)=>J in P?String(P[J]):""));var P}createBucket(t){return new Gu(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Tm.paint.overridableProperties){if(!gu.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),u=new jg(o),m=new nl(u,o.property.specification);let w=null;w="constant"===o.value.kind||"source"===o.value.kind?new wl("source",m):new bo("composite",m,o.value.zoomStops,o.value._interpolationType),this.paint._values[t]=new Je(o.property,w,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&gu.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const u=t.get("text-field"),m=Tm.paint.properties[o];let w=!1;const E=P=>{for(const B of P)if(m.overrides&&m.overrides.hasOverride(B))return void(w=!0)};if("constant"===u.value.kind&&u.value.value instanceof Yn)E(u.value.value.sections);else if("source"===u.value.kind){const P=G=>{w||(G instanceof go&&Kr(G.value)===$e?E(G.value.sections):G instanceof zo?E(G.sections):G.eachChild(P))},B=u.value;B._styleExpression&&P(B._styleExpression.expression)}return w}getProgramConfiguration(t){return new Da(this,t)}}var yv={paint:new vt({"background-color":new we(M.paint_background["background-color"]),"background-pattern":new we(M.paint_background["background-pattern"]),"background-opacity":new we(M.paint_background["background-opacity"])})},xv={paint:new vt({"raster-opacity":new we(M.paint_raster["raster-opacity"]),"raster-hue-rotate":new we(M.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new we(M.paint_raster["raster-brightness-min"]),"raster-brightness-max":new we(M.paint_raster["raster-brightness-max"]),"raster-saturation":new we(M.paint_raster["raster-saturation"]),"raster-contrast":new we(M.paint_raster["raster-contrast"]),"raster-resampling":new we(M.paint_raster["raster-resampling"]),"raster-fade-duration":new we(M.paint_raster["raster-fade-duration"])})};class bv extends sl{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var wv={paint:new vt({"sky-type":new we(M.paint_sky["sky-type"]),"sky-atmosphere-sun":new we(M.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new we(M.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new we(M.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new we(M.paint_sky["sky-gradient-radius"]),"sky-gradient":new gt(M.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new we(M.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new we(M.paint_sky["sky-atmosphere-color"]),"sky-opacity":new we(M.paint_sky["sky-opacity"])})};function _f(r,t,o){const u=[0,0,1],m=Nf([]);return kp(m,m,o?-Nt(r)+Math.PI:Nt(r)),Yf(m,m,-Nt(t)),wp(u,u,m),Jo(u,u)}const Cv={circle:class extends sl{constructor(r){super(r,Id)}createBucket(r){return new Gh(r)}queryRadius(r){const t=r;return Zc("circle-radius",this,t)+Zc("circle-stroke-width",this,t)+Au(this.paint.get("circle-translate"))}queryIntersectsFeature(r,t,o,u,m,w,E,P){const B=Np(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,r.pixelToTileUnitsFactor),G=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o);return Ad(r,u,w,E,P,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),B,G)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new Da(this,r)}},heatmap:class extends sl{createBucket(r){return new Jf(r)}constructor(r){super(r,Qm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"heatmap-color"===r&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Hp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return Zc("heatmap-radius",this,r)}queryIntersectsFeature(r,t,o,u,m,w,E,P){const B=this.paint.get("heatmap-radius").evaluate(t,o);return Ad(r,u,w,E,P,!0,!0,new rt(0,0),B)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new Da(this,r)}},hillshade:class extends sl{constructor(r){super(r,eg)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends sl{constructor(r){super(r,ig)}getProgramIds(){const r=this.paint.get("fill-pattern"),t=r&&r.constantOr(1),o=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(r){return new Da(this,r)}recalculate(r,t){super.recalculate(r,t);const o=this.paint._values["fill-outline-color"];"constant"===o.value.kind&&void 0===o.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Nd(r)}queryRadius(){return Au(this.paint.get("fill-translate"))}queryIntersectsFeature(r,t,o,u,m,w){return!r.queryGeometry.isAboveHorizon&&Iu(Dd(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,r.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends sl{constructor(r){super(r,P_)}createBucket(r){return new Qc(r)}queryRadius(){return Au(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new Da(this,r)}queryIntersectsFeature(r,t,o,u,m,w,E,P,B){const G=Np(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,r.pixelToTileUnitsFactor),J=this.paint.get("fill-extrusion-height").evaluate(t,o),ie=this.paint.get("fill-extrusion-base").evaluate(t,o),se=[0,0],pe=P&&w.elevation,ge=w.elevation?w.elevation.exaggeration():1,Se=r.tile.getBucket(this);if(pe&&Se instanceof Qc){const Ct=Se.centroidVertexArray,At=B+1;At<Ct.length&&(se[0]=Ct.geta_centroid_pos0(At),se[1]=Ct.geta_centroid_pos1(At))}if(0===se[0]&&1===se[1])return!1;"globe"===w.projection.name&&(u=og([u],[new rt(0,0),new rt(Sn,Sn)],r.tileID.canonical).map(Ct=>Ct.polygon).flat());const Ge=pe?P:null,[lt,Et]=(At=u,Lt=ie,ui=J,ii=G,Ci=E,Xi=Ge,mi=se,Ai=ge,Ii=w.center.lat,"globe"===(Ct=w).projection.name?function(Ki,bi,pn,En,_n,ur,tn,Vn,hr,Gr,or){const Wn=[],Cs=[],dr=Ki.projection.upVectorScale(or,Ki.center.lat,Ki.worldSize).metersToTile,pr=[0,0,0,1],us=[0,0,0,1],hs=(ps,As,Hs,so)=>{ps[0]=As,ps[1]=Hs,ps[2]=so,ps[3]=1},ds=sg();pn>0&&(pn+=ds),En+=ds;for(const ps of bi){const As=[],Hs=[];for(const so of ps){const fs=so.x+_n.x,mo=so.y+_n.y,oo=Ki.projection.projectTilePoint(fs,mo,or),Ls=Ki.projection.upVector(or,so.x,so.y);let Ur=pn,ao=En;if(tn){const ms=ug(fs,mo,pn,En,tn,Vn,hr,Gr);Ur+=ms.base,ao+=ms.top}0!==pn?hs(pr,oo.x+Ls[0]*dr*Ur,oo.y+Ls[1]*dr*Ur,oo.z+Ls[2]*dr*Ur):hs(pr,oo.x,oo.y,oo.z),hs(us,oo.x+Ls[0]*dr*ao,oo.y+Ls[1]*dr*ao,oo.z+Ls[2]*dr*ao),Fs(pr,pr,ur),Fs(us,us,ur),As.push(new Jh(pr[0],pr[1],pr[2])),Hs.push(new Jh(us[0],us[1],us[2]))}Wn.push(As),Cs.push(Hs)}return[Wn,Cs]}(Ct,At,Lt,ui,ii,Ci,Xi,mi,Ai,Ii,r.tileID.canonical):Xi?function(Ki,bi,pn,En,_n,ur,tn,Vn,hr){const Gr=[],or=[],Wn=[0,0,0,1];for(const Cs of Ki){const dr=[],pr=[];for(const us of Cs){const hs=us.x+En.x,ds=us.y+En.y,ps=ug(hs,ds,bi,pn,ur,tn,Vn,hr);Wn[0]=hs,Wn[1]=ds,Wn[2]=ps.base,Wn[3]=1,hu(Wn,Wn,_n),Wn[3]=Math.max(Wn[3],1e-5);const As=new Jh(Wn[0]/Wn[3],Wn[1]/Wn[3],Wn[2]/Wn[3]);Wn[0]=hs,Wn[1]=ds,Wn[2]=ps.top,Wn[3]=1,hu(Wn,Wn,_n),Wn[3]=Math.max(Wn[3],1e-5);const Hs=new Jh(Wn[0]/Wn[3],Wn[1]/Wn[3],Wn[2]/Wn[3]);dr.push(As),pr.push(Hs)}Gr.push(dr),or.push(pr)}return[Gr,or]}(At,Lt,ui,ii,Ci,Xi,mi,Ai,Ii):function(Ki,bi,pn,En,_n){const ur=[],tn=[],Vn=_n[8]*bi,hr=_n[9]*bi,Gr=_n[10]*bi,or=_n[11]*bi,Wn=_n[8]*pn,Cs=_n[9]*pn,dr=_n[10]*pn,pr=_n[11]*pn;for(const us of Ki){const hs=[],ds=[];for(const ps of us){const As=ps.x+En.x,Hs=ps.y+En.y,so=_n[0]*As+_n[4]*Hs+_n[12],fs=_n[1]*As+_n[5]*Hs+_n[13],mo=_n[2]*As+_n[6]*Hs+_n[14],oo=_n[3]*As+_n[7]*Hs+_n[15],Ls=so+Vn,Ur=fs+hr,ao=mo+Gr,ms=Math.max(oo+or,1e-5),$a=so+Wn,Gs=fs+Cs,ra=mo+dr,Ro=Math.max(oo+pr,1e-5);hs.push(new Jh(Ls/ms,Ur/ms,ao/ms)),ds.push(new Jh($a/Ro,Gs/Ro,ra/Ro))}ur.push(hs),tn.push(ds)}return[ur,tn]}(At,Lt,ui,ii,Ci)),ut=r.queryGeometry;var Ct,At,Lt,ui,ii,Ci,Xi,mi,Ai,Ii;return function(Ct,At,Lt){let ui=1/0;Iu(Lt,At)&&(ui=cg(Lt,At[0]));for(let ii=0;ii<At.length;ii++){const Ci=At[ii],Xi=Ct[ii];for(let mi=0;mi<Ci.length-1;mi++){const Ai=Ci[mi],Ii=[Ai,Ci[mi+1],Xi[mi+1],Xi[mi],Ai];no(Lt,Ii)&&(ui=Math.min(ui,cg(Lt,Ii)))}}return ui!==1/0&&ui}(lt,Et,ut.isPointQuery()?ut.screenBounds:ut.screenGeometry)}},line:class extends sl{constructor(r){super(r,Gn),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if("line-gradient"===r){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Ds,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(r,t){super.recalculate(r,t),this.paint._values["line-floorwidth"]=dg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new yh(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new Da(this,r)}queryRadius(r){const t=r,o=Ji(Zc("line-width",this,t),Zc("line-gap-width",this,t)),u=Zc("line-offset",this,t);return o/2+Math.abs(u)+Au(this.paint.get("line-translate"))}queryIntersectsFeature(r,t,o,u,m,w){if(r.queryGeometry.isAboveHorizon)return!1;const E=Dd(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,r.pixelToTileUnitsFactor),P=r.pixelToTileUnitsFactor/2*Ji(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),B=this.paint.get("line-offset").evaluate(t,o);return B&&(u=function(G,J){const ie=[],se=new rt(0,0);for(let pe=0;pe<G.length;pe++){const ge=G[pe],Se=[];for(let Ge=0;Ge<ge.length;Ge++){const lt=ge[Ge],Et=ge[Ge+1],ut=0===Ge?se:lt.sub(ge[Ge-1])._unit()._perp(),Ct=Ge===ge.length-1?se:Et.sub(lt)._unit()._perp(),At=ut._add(Ct)._unit();At._mult(1/(At.x*Ct.x+At.y*Ct.y)),Se.push(At._mult(J)._add(lt))}ie.push(Se)}return ie}(u,B*r.pixelToTileUnitsFactor)),function(G,J,ie){for(let se=0;se<J.length;se++){const pe=J[se];if(G.length>=3)for(let ge=0;ge<pe.length;ge++)if(pu(G,pe[ge]))return!0;if(Kf(G,pe,ie))return!0}return!1}(E,u,P)}isTileClipped(){return!0}},symbol:gu,background:class extends sl{constructor(r){super(r,yv)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends sl{constructor(r){super(r,xv)}getProgramIds(){return["raster"]}},sky:class extends sl{constructor(r){super(r,wv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"sky-gradient"===r?this._updateColorRamp():"sky-atmosphere-sun"!==r&&"sky-atmosphere-halo-color"!==r&&"sky-atmosphere-color"!==r&&"sky-atmosphere-sun-intensity"!==r||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Hp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(r,t){if("atmosphere"===this.paint.get("sky-type")){const u=this.paint.get("sky-atmosphere-sun"),m=!u,w=r.style.light,E=w.properties.get("position");return m&&"viewport"===w.properties.get("anchor")&&hn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?_f(E.azimuthal,90-E.polar,t):_f(u[0],90-u[1],t)}const o=this.paint.get("sky-gradient-center");return _f(o[0],90-o[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return"atmosphere"===r?["skyboxCapture","skybox"]:"gradient"===r?["skyboxGradient"]:null}}};class ld{constructor(t,o,u,m){this.context=t,this.format=u,this.texture=t.gl.createTexture(),this.update(o,m)}update(t,o,u){const{width:m,height:w}=t,{context:E}=this,{gl:P}=E,{HTMLImageElement:B,HTMLCanvasElement:G,HTMLVideoElement:J,ImageData:ie,ImageBitmap:se}=Y;if(P.bindTexture(P.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!o||!1!==o.premultiply)),u||this.size&&this.size[0]===m&&this.size[1]===w){const{x:pe,y:ge}=u||{x:0,y:0};t instanceof B||t instanceof G||t instanceof J||t instanceof ie||se&&t instanceof se?P.texSubImage2D(P.TEXTURE_2D,0,pe,ge,P.RGBA,P.UNSIGNED_BYTE,t):P.texSubImage2D(P.TEXTURE_2D,0,pe,ge,m,w,P.RGBA,P.UNSIGNED_BYTE,t.data)}else this.size=[m,w],t instanceof B||t instanceof G||t instanceof J||t instanceof ie||se&&t instanceof se?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,t):P.texImage2D(P.TEXTURE_2D,0,this.format,m,w,0,this.format,P.UNSIGNED_BYTE,t.data);this.useMipmap=!!(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&P.generateMipmap(P.TEXTURE_2D)}bind(t,o){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),t!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,t),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap?t===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_NEAREST:t),this.filter=t),o!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,o),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Tv{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class kv{constructor(){this.tasks={},this.taskQueue=[],Rn(["process"],this),this.invoker=new Tv(this.process),this.nextId=0}add(t,o){const u=this.nextId++,m=function({type:w,isSymbolTile:E,zoom:P}){return P=P||0,"message"===w?0:"maybePrepare"!==w||E?"parseTile"!==w||E?"parseTile"===w&&E?300-P:"maybePrepare"===w&&E?400-P:500:200-P:100-P}(o);if(0===m){Vi();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:t,metadata:o,priority:m,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Vi();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const o=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let t=null,o=1/0;for(let m=0;m<this.taskQueue.length;m++){const w=this.tasks[this.taskQueue[m]];w.priority<o&&(o=w.priority,t=m)}if(null===t)return null;const u=this.taskQueue[t];return this.taskQueue.splice(t,1),u}remove(){this.invoker.remove()}}class Ug{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const u=t[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const $g=["tile","layer","source","sourceLayer","state"];class Wg{constructor(t,o,u,m,w){this.type="Feature",this._vectorTileFeature=t,this._z=o,this._x=u,this._y=m,this.properties=t.properties,this.id=w}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const o of $g)void 0!==this[o]&&(t[o]=this[o]);return t}}const ju=new Uint16Array(8184);for(let r=0;r<2046;r++){let t=r+2,o=0,u=0,m=0,w=0,E=0,P=0;for(1&t?m=w=E=32:o=u=P=32;(t>>=1)>1;){const G=o+m>>1,J=u+w>>1;1&t?(m=o,w=u,o=E,u=P):(o=m,u=w,m=E,w=P),E=G,P=J}const B=4*r;ju[B+0]=o,ju[B+1]=u,ju[B+2]=m,ju[B+3]=w}const nu=new Uint16Array(2178),Uu=new Uint8Array(1089),Qd=new Uint16Array(1089);function km(r){return 0===r?-.03125:32===r?.03125:0}var Xg=Ut([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Zg={type:2,extent:Sn,loadGeometry:()=>[[new rt(0,0),new rt(Sn+1,0),new rt(Sn+1,Sn+1),new rt(0,Sn+1),new rt(0,0)]]};class Em{constructor(t,o,u,m,w){this.tileID=t,this.uid=jt(),this.uses=0,this.tileSize=o,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=w,this.expiredRequestCount=0,this.state="loading",m&&m.transform&&(this.projection=m.transform.projection)}registerFadeDuration(t){const o=t+this.timeAdded;o<s.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Sh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,o,u){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(m,w){const E={};if(!w)return E;for(const P of m){const B=P.layerIds.map(G=>w.getLayer(G)).filter(Boolean);if(0!==B.length){P.layers=B,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(G=>B.filter(J=>J.id===G)[0]));for(const G of B)E[G.id]=P}}return E}(t.buckets,o.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const w=this.buckets[m];if(w instanceof Gu){if(this.hasSymbolBuckets=!0,!u)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const w=this.buckets[m];if(w instanceof Gu&&w.hasRTLText){this.hasRTLText=!0,Z.isLoading()||Z.isLoaded()||"deferred"!==z()||$();break}}this.queryPadding=0;for(const m in this.buckets){const w=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(m).queryRadius(w))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Vr}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const u in this.buckets){const m=this.buckets[u];m.uploadPending()&&m.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ld(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ld(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ld(t,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,u,m,w,E,P,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:m,pixelPosMatrix:P,transform:E,params:w,tileTransform:this.tileTransform},t,o,u):{}}querySourceFeatures(t,o){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const m=u.loadVTLayers(),w=o?o.sourceLayer:"",E=m._geojsonTileLayer||m[w];if(!E)return;const P=_i(o&&o.filter),{z:B,x:G,y:J}=this.tileID.canonical,ie={z:B,x:G,y:J};for(let se=0;se<E.length;se++){const pe=E.feature(se);if(P.needGeometry){const Ge=Ia(pe,!0);if(!P.filter(new Q(this.tileID.overscaledZ),Ge,this.tileID.canonical))continue}else if(!P.filter(new Q(this.tileID.overscaledZ),pe))continue;const ge=u.getId(pe,w),Se=new Wg(pe,B,G,J,ge);Se.tile=ie,t.push(Se)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const u=Oi(t.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const u=Date.now();let m=!1;if(this.expirationTime>u)m=!1;else if(o)if(this.expirationTime<o)m=!0;else{const w=this.expirationTime-o;w?this.expirationTime=u+Math.max(w,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!o)return;const u=this.latestFeatureIndex.loadVTLayers(),m=o.style.listImages();for(const w in this.buckets){if(!o.style.hasLayer(w))continue;const E=this.buckets[w],P=E.layers[0].sourceLayer||"_geojsonTileLayer",B=u[P],G=t[P];if(!B||!G||0===Object.keys(G).length)continue;if(E.update(G,B,m,this.imageAtlas&&this.imageAtlas.patternPositions||{}),E instanceof yh||E instanceof Nd){const ie=o.style._getSourceCache(E.layers[0].source);o._terrain&&o._terrain.enabled&&ie&&E.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(ie.id,this.tileID)}const J=o&&o.style&&o.style.getLayer(w);J&&(this.queryPadding=Math.max(this.queryPadding,J.queryRadius(E)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=s.now()+t}setTexture(t,o){const u=o.context,m=u.gl;this.texture=this.texture||o.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new ld(u,t,m.RGBA,{useMipmap:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE))}setDependencies(t,o){const u={};for(const m of o)u[m]=!0;this.dependencies[t]=u}hasDependency(t,o){for(const u of t){const m=this.dependencies[u];if(m)for(const w of o)if(m[w])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,o){if(!o||"mercator"===o.name||this._tileDebugBuffer)return;const u=Xc(Zg,this.tileID.canonical,this.tileTransform)[0],m=new Gi,w=new qo;for(let E=0;E<u.length;E++){const{x:P,y:B}=u[E];m.emplaceBack(P,B),w.emplaceBack(E)}w.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(w),this._tileDebugBuffer=t.createVertexBuffer(m,rh.members),this._tileDebugSegments=zs.simpleSegment(0,0,m.length,w.length)}_makeTileBoundsBuffers(t,o){if(this._tileBoundsBuffer||!o||"mercator"===o.name)return;const u=Xc(Zg,this.tileID.canonical,this.tileTransform)[0];let m,w;if(this.isRaster){const E=function(P,B){const G=Sh(P,B),J=Math.pow(2,P.z);for(let Ge=0;Ge<33;Ge++)for(let lt=0;lt<33;lt++){const Et=al((P.x+(lt+km(lt))/32)/J),ut=ea((P.y+(Ge+km(Ge))/32)/J),Ct=B.project(Et,ut),At=33*Ge+lt;nu[2*At+0]=Math.round((Ct.x*G.scale-G.x)*Sn),nu[2*At+1]=Math.round((Ct.y*G.scale-G.y)*Sn)}Uu.fill(0),Qd.fill(0);for(let Ge=2045;Ge>=0;Ge--){const lt=4*Ge,Et=ju[lt+0],ut=ju[lt+1],Ct=ju[lt+2],At=ju[lt+3],Lt=Et+Ct>>1,ui=ut+At>>1,ii=Lt+ui-ut,Ci=ui+Et-Lt,Xi=33*ut+Et,mi=33*At+Ct,Ai=33*ui+Lt,Ii=Math.hypot((nu[2*Xi+0]+nu[2*mi+0])/2-nu[2*Ai+0],(nu[2*Xi+1]+nu[2*mi+1])/2-nu[2*Ai+1])>=16;Uu[Ai]=Uu[Ai]||(Ii?1:0),Ge<1022&&(Uu[Ai]=Uu[Ai]||Uu[33*(ut+Ci>>1)+(Et+ii>>1)]||Uu[33*(At+Ci>>1)+(Ct+ii>>1)])}const ie=new ki,se=new On;let pe=0;function ge(Ge,lt){const Et=33*lt+Ge;return 0===Qd[Et]&&(ie.emplaceBack(nu[2*Et+0],nu[2*Et+1],Ge*Sn/32,lt*Sn/32),Qd[Et]=++pe),Qd[Et]-1}function Se(Ge,lt,Et,ut,Ct,At){const Lt=Ge+Et>>1,ui=lt+ut>>1;if(Math.abs(Ge-Ct)+Math.abs(lt-At)>1&&Uu[33*ui+Lt])Se(Ct,At,Ge,lt,Lt,ui),Se(Et,ut,Ct,At,Lt,ui);else{const ii=ge(Ge,lt),Ci=ge(Et,ut),Xi=ge(Ct,At);se.emplaceBack(ii,Ci,Xi)}}return Se(0,0,32,32,32,0),Se(32,32,0,0,0,32),{vertices:ie,indices:se}}(this.tileID.canonical,o);m=E.vertices,w=E.indices}else{m=new ki,w=new On;for(const{x:P,y:B}of u)m.emplaceBack(P,B,0,0);const E=Fd(m.int16,void 0,4);for(let P=0;P<E.length;P+=3)w.emplaceBack(E[P],E[P+1],E[P+2])}this._tileBoundsBuffer=t.createVertexBuffer(m,Xg.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(w),this._tileBoundsSegments=zs.simpleSegment(0,0,m.length,w.length)}_makeGlobeTileDebugBuffers(t,o){const u=o.projection;if(!u||"globe"!==u.name||o.freezeTileCoverage)return;const m=this.tileID.canonical,w=lh($c(m,o)),E=Du(o.zoom);let P;E>0&&(P=_p(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,m,o,w,P,E),this._makeGlobeTileDebugTextBuffer(t,m,o,w,P,E)}_globePoint(t,o,u,m,w,E,P){let B=ah(t,o,u);if(E){const G=1<<u.z,J=hc(m.center.lng),ie=dc(m.center.lat),se=(u.x+.5)/G-J;let pe=0;se>.5?pe=-1:se<-.5&&(pe=1);let ge=(t/Sn+u.x)/G+pe,Se=(o/Sn+u.y)/G;ge=(ge-J)*m._pixelsPerMercatorPixel+J,Se=(Se-ie)*m._pixelsPerMercatorPixel+ie;const Ge=[ge*m.worldSize,Se*m.worldSize,0];Fs(Ge,Ge,E),B=uc(B,Ge,P)}return Fs(B,B,w)}_makeGlobeTileDebugBorderBuffer(t,o,u,m,w,E){const P=new Gi,B=new qo,G=new ti,J=(se,pe,ge,Se,Ge)=>{const lt=(ge-se)/(Ge-1),Et=(Se-pe)/(Ge-1),ut=P.length;for(let Ct=0;Ct<Ge;Ct++){const At=se+Ct*lt,Lt=pe+Ct*Et;P.emplaceBack(At,Lt);const ui=this._globePoint(At,Lt,o,u,m,w,E);G.emplaceBack(ui[0],ui[1],ui[2]),B.emplaceBack(ut+Ct)}},ie=Sn;J(0,0,ie,0,16),J(ie,0,ie,ie,16),J(ie,ie,0,ie,16),J(0,ie,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(B),this._tileDebugBuffer=t.createVertexBuffer(P,rh.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(G,Hf.members),this._tileDebugSegments=zs.simpleSegment(0,0,P.length,B.length)}_makeGlobeTileDebugTextBuffer(t,o,u,m,w,E){const P=Sn/4,B=new Gi,G=new On,J=new ti;G.reserve(32),B.reserve(25),J.reserve(25);const se=(pe,ge)=>25*pe+ge;for(let pe=0;pe<25;pe++){const ge=pe*P;for(let Se=0;Se<25;Se++){const Ge=Se*P;B.emplaceBack(Ge,ge);const lt=this._globePoint(Ge,ge,o,u,m,w,E);J.emplaceBack(lt[0],lt[1],lt[2])}}for(let pe=0;pe<4;pe++)for(let ge=0;ge<4;ge++){const Se=se(pe,ge),Ge=se(pe,ge+1),lt=se(pe+1,ge),Et=se(pe+1,ge+1);G.emplaceBack(Se,Ge,lt),G.emplaceBack(lt,Ge,Et)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(G),this._tileDebugTextBuffer=t.createVertexBuffer(B,rh.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(J,Hf.members),this._tileDebugTextSegments=zs.simpleSegment(0,0,25,32)}}class Ev{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,u){const m=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][m]=this.stateChanges[t][m]||{},ln(this.stateChanges[t][m],u),null===this.deletedStates[t]){this.deletedStates[t]={};for(const w in this.state[t])w!==m&&(this.deletedStates[t][w]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][m]){this.deletedStates[t][m]={};for(const w in this.state[t][m])u[w]||(this.deletedStates[t][m][w]=null)}else for(const w in u)this.deletedStates[t]&&this.deletedStates[t][m]&&null===this.deletedStates[t][m][w]&&delete this.deletedStates[t][m][w]}removeFeatureState(t,o,u){if(null===this.deletedStates[t])return;const m=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},u&&void 0!==o)null!==this.deletedStates[t][m]&&(this.deletedStates[t][m]=this.deletedStates[t][m]||{},this.deletedStates[t][m][u]=null);else if(void 0!==o)if(this.stateChanges[t]&&this.stateChanges[t][m])for(u in this.deletedStates[t][m]={},this.stateChanges[t][m])this.deletedStates[t][m][u]=null;else this.deletedStates[t][m]=null;else this.deletedStates[t]=null}getState(t,o){const u=String(o),m=ln({},(this.state[t]||{})[u],(this.stateChanges[t]||{})[u]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const w=this.deletedStates[t][o];if(null===w)return{};for(const E in w)delete m[E]}return m}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const u={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const w={};for(const E in this.stateChanges[m])this.state[m][E]||(this.state[m][E]={}),ln(this.state[m][E],this.stateChanges[m][E]),w[E]=this.state[m][E];u[m]=w}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const w={};if(null===this.deletedStates[m])for(const E in this.state[m])w[E]={},this.state[m][E]={};else for(const E in this.deletedStates[m]){if(null===this.deletedStates[m][E])this.state[m][E]={};else if(this.state[m][E])for(const P of Object.keys(this.deletedStates[m][E]))delete this.state[m][E][P];w[E]=this.state[m][E]}u[m]=u[m]||{},ln(u[m],w)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(u).length)for(const m in t)t[m].setFeatureState(u,o)}}class qg{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,o){const u=this.toIdx(t,o);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(t,o){return this.leaves[this.toIdx(t,o)]}toIdx(t,o){return o*this.size+t}}function vf(r,t,o,u){let m=0,w=Number.MAX_VALUE;for(let E=0;E<3;E++)if(Math.abs(u[E])<1e-15){if(o[E]<r[E]||o[E]>t[E])return null}else{const P=1/u[E];let B=(r[E]-o[E])*P,G=(t[E]-o[E])*P;if(B>G){const J=B;B=G,G=J}if(B>m&&(m=B),G<w&&(w=G),m>w)return null}return m}function Kg(r,t,o,u,m,w,E,P,B,G,J){const ie=u-r,se=m-t,pe=w-o,ge=E-r,Se=P-t,Ge=B-o,lt=J[1]*Ge-J[2]*Se,Et=J[2]*ge-J[0]*Ge,ut=J[0]*Se-J[1]*ge,Ct=ie*lt+se*Et+pe*ut;if(Math.abs(Ct)<1e-15)return null;const At=1/Ct,Lt=G[0]-r,ui=G[1]-t,ii=G[2]-o,Ci=(Lt*lt+ui*Et+ii*ut)*At;if(Ci<0||Ci>1)return null;const Xi=ui*pe-ii*se,mi=ii*ie-Lt*pe,Ai=Lt*se-ui*ie,Ii=(J[0]*Xi+J[1]*mi+J[2]*Ai)*At;return Ii<0||Ci+Ii>1?null:(ge*Xi+Se*mi+Ge*Ai)*At}function Jg(r,t,o){return(r-t)/(o-t)}function Sm(r,t,o,u,m,w,E,P,B){const G=1<<o,J=w-u,ie=E-m,se=(r+1)/G*J+u,pe=(t+0)/G*ie+m,ge=(t+1)/G*ie+m;P[0]=(r+0)/G*J+u,P[1]=pe,B[0]=se,B[1]=ge}class Mm{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(w){const E=Math.ceil(Math.log2(w.dim/8)),P=[];let B=Math.ceil(Math.pow(2,E));const G=1/B,J=(pe,ge,Se,Ge,lt)=>{const Et=Ge?1:0,ut=(pe+1)*Se-Et,Ct=ge*Se,At=(ge+1)*Se-Et;lt[0]=pe*Se,lt[1]=Ct,lt[2]=ut,lt[3]=At};let ie=new qg(B);const se=[];for(let pe=0;pe<B*B;pe++){J(pe%B,Math.floor(pe/B),G,!1,se);const ge=_u(se[0],se[1],w),Se=_u(se[2],se[1],w),Ge=_u(se[2],se[3],w),lt=_u(se[0],se[3],w);ie.minimums.push(Math.min(ge,Se,Ge,lt)),ie.maximums.push(Math.max(ge,Se,Ge,lt)),ie.leaves.push(1)}for(P.push(ie),B/=2;B>=1;B/=2){const pe=P[P.length-1];ie=new qg(B);for(let ge=0;ge<B*B;ge++){J(ge%B,Math.floor(ge/B),2,!0,se);const Se=pe.getElevation(se[0],se[1]),Ge=pe.getElevation(se[2],se[1]),lt=pe.getElevation(se[2],se[3]),Et=pe.getElevation(se[0],se[3]),ut=pe.isLeaf(se[0],se[1]),Ct=pe.isLeaf(se[2],se[1]),At=pe.isLeaf(se[2],se[3]),Lt=pe.isLeaf(se[0],se[3]),ui=Math.min(Se.min,Ge.min,lt.min,Et.min),ii=Math.max(Se.max,Ge.max,lt.max,Et.max),Ci=ut&&Ct&&At&&Lt;ie.maximums.push(ii),ie.minimums.push(ui),ie.leaves.push(ii-ui<=5&&Ci?1:0)}P.push(ie)}return P}(this.dem),u=o.length-1,m=o[u];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(o,0,0,u,0)}raycastRoot(t,o,u,m,w,E,P=1){return vf([t,o,-100],[u,m,this.maximums[0]*P],w,E)}raycast(t,o,u,m,w,E,P=1){if(!this.nodeCount)return null;const B=this.raycastRoot(t,o,u,m,w,E,P);if(null==B)return null;const G=[],J=[],ie=[],se=[],pe=[{idx:0,t:B,nodex:0,nodey:0,depth:0}];for(;pe.length>0;){const{idx:ge,t:Se,nodex:Ge,nodey:lt,depth:Et}=pe.pop();if(this.leaves[ge]){Sm(Ge,lt,Et,t,o,u,m,ie,se);const Ct=1<<Et,At=(Ge+0)/Ct,Lt=(Ge+1)/Ct,ui=(lt+0)/Ct,ii=(lt+1)/Ct,Ci=_u(At,ui,this.dem)*P,Xi=_u(Lt,ui,this.dem)*P,mi=_u(Lt,ii,this.dem)*P,Ai=_u(At,ii,this.dem)*P,Ii=Kg(ie[0],ie[1],Ci,se[0],ie[1],Xi,se[0],se[1],mi,w,E),Ni=Kg(se[0],se[1],mi,ie[0],se[1],Ai,ie[0],ie[1],Ci,w,E),Ki=Math.min(null!==Ii?Ii:Number.MAX_VALUE,null!==Ni?Ni:Number.MAX_VALUE);if(Ki!==Number.MAX_VALUE)return Ki;{const bi=Ec([],w,E,Se);if(Qg(Ci,Xi,Ai,mi,Jg(bi[0],ie[0],se[0]),Jg(bi[1],ie[1],se[1]))>=bi[2])return Se}continue}let ut=0;for(let Ct=0;Ct<this._siblingOffset.length;Ct++){Sm((Ge<<1)+this._siblingOffset[Ct][0],(lt<<1)+this._siblingOffset[Ct][1],Et+1,t,o,u,m,ie,se),ie[2]=-100,se[2]=this.maximums[this.childOffsets[ge]+Ct]*P;const At=vf(ie,se,w,E);if(null!=At){const Lt=At;G[Ct]=Lt;let ui=!1;for(let ii=0;ii<ut&&!ui;ii++)Lt>=G[J[ii]]&&(J.splice(ii,0,Ct),ui=!0);ui||(J[ut]=Ct),ut++}}for(let Ct=0;Ct<ut;Ct++){const At=J[Ct];pe.push({idx:this.childOffsets[ge]+At,t:G[At],nodex:(Ge<<1)+this._siblingOffset[At][0],nodey:(lt<<1)+this._siblingOffset[At][1],depth:Et+1})}}return null}_addNode(t,o,u){return this.minimums.push(t),this.maximums.push(o),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(t,o,u,m,w){if(1===t[m].isLeaf(o,u))return;this.childOffsets[w]||(this.childOffsets[w]=this.nodeCount);const E=m-1,P=t[E];let B=0,G=0;for(let J=0;J<this._siblingOffset.length;J++){const ie=2*o+this._siblingOffset[J][0],se=2*u+this._siblingOffset[J][1],pe=P.getElevation(ie,se),ge=P.isLeaf(ie,se),Se=this._addNode(pe.min,pe.max,ge);ge&&(B|=1<<J),G||(G=Se)}for(let J=0;J<this._siblingOffset.length;J++)B&1<<J||this._construct(t,2*o+this._siblingOffset[J][0],2*u+this._siblingOffset[J][1],E,G+J)}}function Qg(r,t,o,u,m,w){return Cr(Cr(r,o,w),Cr(t,u,w),m)}function _u(r,t,o){const u=o.dim,m=ai(r*u-.5,0,u-1),w=ai(t*u-.5,0,u-1),E=Math.floor(m),P=Math.floor(w),B=Math.min(E+1,u-1),G=Math.min(P+1,u-1);return Qg(o.get(E,P),o.get(B,P),o.get(E,G),o.get(B,G),m-E,w-P)}const e_={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Sv(r,t,o){return(256*r*256+256*t+o)/10-1e4}function t_(r,t,o){return 256*r+t+o/256-32768}class yf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,o,u,m=!1,w=!1){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&"mapbox"!==u&&"terrarium"!==u)return hn(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const E=this.dim=o.height-2,P=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=u||"mapbox",this.borderReady=m,!m){for(let B=0;B<E;B++)P[this._idx(-1,B)]=P[this._idx(0,B)],P[this._idx(E,B)]=P[this._idx(E-1,B)],P[this._idx(B,-1)]=P[this._idx(B,0)],P[this._idx(B,E)]=P[this._idx(B,E-1)];P[this._idx(-1,-1)]=P[this._idx(0,0)],P[this._idx(E,-1)]=P[this._idx(E-1,0)],P[this._idx(-1,E)]=P[this._idx(0,E-1)],P[this._idx(E,E)]=P[this._idx(E-1,E-1)],w&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Mm(this)}get(t,o,u=!1){u&&(t=ai(t,-1,this.dim),o=ai(o,-1,this.dim));const m=4*this._idx(t,o);return("terrarium"===this.encoding?t_:Sv)(this.pixels[m],this.pixels[m+1],this.pixels[m+2])}static getUnpackVector(t){return e_[t]}get unpackVector(){return e_[this.encoding]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}static pack(t,o){const u=[0,0,0,0],m=yf.getUnpackVector(o);let w=Math.floor((t+m[3])/m[2]);return u[2]=w%256,w=Math.floor(w/256),u[1]=w%256,w=Math.floor(w/256),u[0]=w,u}getPixels(){return new Ha({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,o,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let m=o*this.dim,w=o*this.dim+this.dim,E=u*this.dim,P=u*this.dim+this.dim;switch(o){case-1:m=w-1;break;case 1:w=m+1}switch(u){case-1:E=P-1;break;case 1:P=E+1}const B=-o*this.dim,G=-u*this.dim;for(let J=E;J<P;J++)for(let ie=m;ie<w;ie++){const se=4*this._idx(ie,J),pe=4*this._idx(ie+B,J+G);this.pixels[se+0]=t.pixels[pe+0],this.pixels[se+1]=t.pixels[pe+1],this.pixels[se+2]=t.pixels[pe+2],this.pixels[se+3]=t.pixels[pe+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}vn(yf,"DEMData"),vn(Mm,"DemMinMaxQuadTree",{omit:["dem"]});class Mv{constructor(t,o){this.max=t,this.onRemove=o,this.reset()}reset(){for(const t in this.data)for(const o of this.data[t])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(t,o,u){const m=t.wrapped().key;void 0===this.data[m]&&(this.data[m]=[]);const w={value:o,timeout:void 0};if(void 0!==u&&(w.timeout=setTimeout(()=>{this.remove(t,w)},u)),this.data[m].push(w),this.order.push(m),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const o=this.data[t].shift();return o.timeout&&clearTimeout(o.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),o.value}getByKey(t){const o=this.data[t];return o?o[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,o){if(!this.has(t))return this;const u=t.wrapped().key,m=void 0===o?0:this.data[u].indexOf(o),w=this.data[u][m];return this.data[u].splice(m,1),w.timeout&&clearTimeout(w.timeout),0===this.data[u].length&&delete this.data[u],this.onRemove(w.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(t){const o=[];for(const u in this.data)for(const m of this.data[u])t(m.value)||o.push(m);for(const u of o)this.remove(u.value.tileID,u)}}class cd{constructor(t,o,u){this.func=t,this.mask=o,this.range=u}}cd.ReadOnly=!1,cd.ReadWrite=!0,cd.disabled=new cd(519,cd.ReadOnly,[0,1]);class Im{constructor(t,o,u,m,w,E){this.test=t,this.ref=o,this.mask=u,this.fail=m,this.depthFail=w,this.pass=E}}Im.disabled=new Im({func:519,mask:0},0,0,7680,7680,7680);class ru{constructor(t,o,u){this.blendFunction=t,this.blendColor=o,this.mask=u}}ru.Replace=[1,0],ru.disabled=new ru(ru.Replace,yr.transparent,[!1,!1,!1,!1]),ru.unblended=new ru(ru.Replace,yr.transparent,[!0,!0,!0,!0]),ru.alphaBlended=new ru([1,771],yr.transparent,[!0,!0,!0,!0]);class Ic{constructor(t,o,u){this.enable=t,this.mode=o,this.frontFace=u}}Ic.disabled=new Ic(!1,1029,2305),Ic.backCCW=new Ic(!0,1029,2305),Ic.backCW=new Ic(!0,1029,2304),Ic.frontCW=new Ic(!0,1028,2304),Ic.frontCCW=new Ic(!0,1028,2305);class Mh extends k{constructor(t,o,u){super(),this.id=t,this._onlySymbols=u,o.on("data",m=>{"source"===m.dataType&&"metadata"===m.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===m.dataType&&"content"===m.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new Mv(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ev,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const o=this._tiles[t];if("loaded"!==o.state&&"errored"!==o.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,o){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,o)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,()=>{})}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const u=this._tiles[o];u.upload(t),u.prepare(this.map.style.imageManager)}}getIds(){return mn(this._tiles).map(t=>t.tileID).sort(i_).map(t=>t.key)}getRenderableIds(t){const o=[];for(const u in this._tiles)this._isIdRenderable(+u,t)&&o.push(this._tiles[u]);return t?o.sort((u,m)=>{const w=u.tileID,E=m.tileID,P=new rt(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),B=new rt(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-E.overscaledZ||B.y-P.y||B.x-P.x}).map(u=>u.tileID.key):o.map(u=>u.tileID).sort(i_).map(u=>u.key)}hasRenderableParent(t){const o=this.findLoadedParent(t,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(t,o){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(o||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,o){const u=this._tiles[t];u&&("loading"!==u.state&&(u.state=o),this._loadTile(u,this._tileLoaded.bind(this,u,t,o)))}_tileLoaded(t,o,u,m){if(m)if(t.state="errored",404!==m.status)this._source.fire(new x(m,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const w=this.map.painter.terrain;this.update(this.transform,w.getScaledDemTileSize(),!0),w.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=s.now(),"expired"===u&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new y("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const o=this.getRenderableIds();for(let m=0;m<o.length;m++){const w=o[m];if(t.neighboringTiles&&t.neighboringTiles[w]){const E=this.getTileByID(w);u(t,E),u(E,t)}}function u(m,w){if(!m.dem||m.dem.borderReady)return;m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0;let E=w.tileID.canonical.x-m.tileID.canonical.x;const P=w.tileID.canonical.y-m.tileID.canonical.y,B=Math.pow(2,m.tileID.canonical.z),G=w.tileID.key;0===E&&0===P||Math.abs(P)>1||(Math.abs(E)>1&&(1===Math.abs(E+B)?E+=B:1===Math.abs(E-B)&&(E-=B)),w.dem&&m.dem&&(m.dem.backfillBorder(w.dem,E,P),m.neighboringTiles&&m.neighboringTiles[G]&&(m.neighboringTiles[G].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,o,u,m){for(const w in this._tiles){let E=this._tiles[w];if(m[w]||!E.hasData()||E.tileID.overscaledZ<=o||E.tileID.overscaledZ>u)continue;let P=E.tileID;for(;E&&E.tileID.overscaledZ>o+1;){const G=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[G.key],E&&E.hasData()&&(P=G)}let B=P;for(;B.overscaledZ>o;)if(B=B.scaledTo(B.overscaledZ-1),t[B.key]){m[P.key]=P;break}}}findLoadedParent(t,o){if(t.key in this._loadedParentTiles){const u=this._loadedParentTiles[t.key];return u&&u.tileID.overscaledZ>=o?u:null}for(let u=t.overscaledZ-1;u>=o;u--){const m=t.scaledTo(u),w=this._getLoadedTile(m);if(w)return w}}_getLoadedTile(t){const o=this._tiles[t.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,o){o=o||this._source.tileSize;const u=Math.ceil(t.width/o)+1,m=Math.ceil(t.height/o)+1,w=Math.floor(u*m*5),E="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,w):w,P="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(P)}handleWrapJump(t){const o=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,o){const u={};for(const m in this._tiles){const w=this._tiles[m];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+o),u[w.tileID.key]=w}this._tiles=u;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(+m,this._tiles[m])}}update(t,o,u){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let m;this.updateCacheSize(t,o),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(P=>new ja(P.canonical.z,P.wrap,P.canonical.z,P.canonical.x,P.canonical.y)):(m=t.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(m=m.filter(P=>this._source.hasTile(P)))):m=[];const w=this._updateRetainedTiles(m);if(n_(this._source.type)&&0!==m.length){const P={},B={},G=Object.keys(w);for(const ie of G){const se=w[ie],pe=this._tiles[ie];if(!pe||pe.fadeEndTime&&pe.fadeEndTime<=s.now())continue;const ge=this.findLoadedParent(se,Math.max(se.overscaledZ-Mh.maxOverzooming,this._source.minzoom));ge&&(this._addTile(ge.tileID),P[ge.tileID.key]=ge.tileID),B[ie]=se}const J=m[m.length-1].overscaledZ;for(const ie in this._tiles){const se=this._tiles[ie];if(w[ie]||!se.hasData())continue;let pe=se.tileID;for(;pe.overscaledZ>J;){pe=pe.scaledTo(pe.overscaledZ-1);const ge=this._tiles[pe.key];if(ge&&ge.hasData()&&B[pe.key]){w[ie]=se.tileID;break}}}for(const ie in P)w[ie]||(this._coveredTiles[ie]=!0,w[ie]=P[ie])}for(const P in w)this._tiles[P].clearFadeHold();const E=function(P,B){const G=[];for(const J in P)J in B||G.push(J);return G}(this._tiles,w);for(const P of E){const B=this._tiles[P];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(+P)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const o={};if(0===t.length)return o;const u={},m=t.reduce((G,J)=>Math.min(G,J.overscaledZ),1/0),w=t[0].overscaledZ,E=Math.max(w-Mh.maxOverzooming,this._source.minzoom),P=Math.max(w+Mh.maxUnderzooming,this._source.minzoom),B={};for(const G of t){const J=this._addTile(G);o[G.key]=G,J.hasData()||m<this._source.maxzoom&&(B[G.key]=G)}this._retainLoadedChildren(B,m,P,o);for(const G of t){let J=this._tiles[G.key];if(J.hasData())continue;if(G.canonical.z>=this._source.maxzoom){const se=G.children(this._source.maxzoom)[0],pe=this.getTile(se);if(pe&&pe.hasData()){o[se.key]=se;continue}}else{const se=G.children(this._source.maxzoom);if(o[se[0].key]&&o[se[1].key]&&o[se[2].key]&&o[se[3].key])continue}let ie=J.wasRequested();for(let se=G.overscaledZ-1;se>=E;--se){const pe=G.scaledTo(se);if(u[pe.key]||(u[pe.key]=!0,J=this.getTile(pe),!J&&ie&&(J=this._addTile(pe)),J&&(o[pe.key]=pe,ie=J.wasRequested(),J.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const o=[];let u,m=this._tiles[t].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){u=this._loadedParentTiles[m.key];break}o.push(m.key);const w=m.scaledTo(m.overscaledZ-1);if(u=this._getLoadedTile(w),u)break;m=w}for(const w of o)this._loadedParentTiles[w]=u}}_addTile(t){let o=this._tiles[t.key];if(o)return o;o=this._cache.getAndRemove(t),o&&(this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,o)));const u=!!o;if(!u){const m=this.map?this.map.painter:null;o=new Em(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,m,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,t.key,o.state))}return o?(o.uses++,this._tiles[t.key]=o,u||this._source.fire(new y("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(t,o){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const u=o.getExpiryTimeout();u&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},u))}_removeTile(t){const o=this._tiles[t];o&&(o.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),o.uses>0||(o.hasData()&&"reloading"!==o.state?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,o,u){const m=[],w=this.transform;if(!w)return m;const E="globe"===w.projection.name,P=hc(w.center.lng);for(const B in this._tiles){const G=this._tiles[B];if(u&&G.clearQueryDebugViz(),G.holdingForFade())continue;let J;if(E){const ie=G.tileID.canonical;if(0===ie.z){const se=[Math.abs(ai(P,...ep(ie,-1))-P),Math.abs(ai(P,...ep(ie,1))-P)];J=[0,2*se.indexOf(Math.min(...se))-1]}else{const se=[Math.abs(ai(P,...ep(ie,-1))-P),Math.abs(ai(P,...ep(ie,0))-P),Math.abs(ai(P,...ep(ie,1))-P)];J=[se.indexOf(Math.min(...se))-1]}}else J=[0];for(const ie of J){const se=t.containsTile(G,w,o,ie);se&&m.push(se)}}return m}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map(u=>this._tiles[u].tileID);for(const u of o)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(n_(this._source.type))for(const t in this._tiles){const o=this._tiles[t];if(void 0!==o.fadeEndTime&&o.fadeEndTime>=s.now())return!0}return!1}setFeatureState(t,o,u){this._state.updateState(t=t||"_geojsonTileLayer",o,u)}removeFeatureState(t,o,u){this._state.removeFeatureState(t=t||"_geojsonTileLayer",o,u)}getFeatureState(t,o){return this._state.getState(t=t||"_geojsonTileLayer",o)}setDependencies(t,o,u){const m=this._tiles[t];m&&m.setDependencies(o,u)}reloadTilesForDependencies(t,o){for(const u in this._tiles)this._tiles[u].hasDependency(t,o)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(t,o))}_preloadTiles(t,o){if(!this._sourceLoaded){const P=()=>{this._sourceLoaded&&(this._source.off("data",P),this._preloadTiles(t,o))};return void this._source.on("data",P)}const u=new Map,m=Array.isArray(t)?t:[t],w=this.map.painter.terrain,E=this.usedForTerrain&&w?w.getScaledDemTileSize():this._source.tileSize;for(const P of m){const B=P.coveringTiles({tileSize:E,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const G of B)u.set(G.key,G);this.usedForTerrain&&P.updateElevation(!1)}Yi(Array.from(u.values()),(P,B)=>{const G=new Em(P,this._source.tileSize*P.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(G,J=>{"raster-dem"===this._source.type&&G.dem&&this._backfillDEM(G),B(J,G)})},o)}}function i_(r,t){const o=Math.abs(2*r.wrap)-+(r.wrap<0),u=Math.abs(2*t.wrap)-+(t.wrap<0);return r.overscaledZ-t.overscaledZ||u-o||t.canonical.y-r.canonical.y||t.canonical.x-r.canonical.x}function n_(r){return"raster"===r||"image"===r||"video"===r||"custom"===r}function ep(r,t){const o=1<<r.z;return[r.x/o+t,(r.x+1)/o+t]}Mh.maxOverzooming=10,Mh.maxUnderzooming=3;class bf{constructor(t,o,u){this._demTile=t,this._dem=this._demTile.dem,this._scale=o,this._offset=u}static create(t,o,u){const m=u||t.findDEMTileFor(o);if(!m||!m.dem)return;const w=m.dem,E=m.tileID,P=1<<o.canonical.z-E.canonical.z;return new bf(m,m.tileSize/Sn/P,[(o.canonical.x/P-E.canonical.x)*w.dim,(o.canonical.y/P-E.canonical.y)*w.dim])}tileCoordToPixel(t,o){const u=o*this._scale+this._offset[1],m=Math.floor(t*this._scale+this._offset[0]),w=Math.floor(u);return new rt(m,w)}getElevationAt(t,o,u,m){const w=t*this._scale+this._offset[0],E=o*this._scale+this._offset[1],P=Math.floor(w),B=Math.floor(E),G=this._dem;return m=!!m,u?Cr(Cr(G.get(P,B,m),G.get(P,B+1,m),E-B),Cr(G.get(P+1,B,m),G.get(P+1,B+1,m),E-B),w-P):G.get(P,B,m)}getElevationAtPixel(t,o,u){return this._dem.get(t,o,!!u)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*jl(1,t)*this._dem.stride}}class r_{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new is(Sn,16,0),this.featureIndexArray=new Ya,this.promoteId=o}insert(t,o,u,m,w,E=0){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,w,E);const B=this.grid;for(let G=0;G<o.length;G++){const J=o[G],ie=[1/0,1/0,-1/0,-1/0];for(let se=0;se<J.length;se++){const pe=J[se];ie[0]=Math.min(ie[0],pe.x),ie[1]=Math.min(ie[1],pe.y),ie[2]=Math.max(ie[2],pe.x),ie[3]=Math.max(ie[3],pe.y)}ie[0]<Sn&&ie[1]<Sn&&ie[2]>=0&&ie[3]>=0&&B.insert(P,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new me(new sf(this.rawTileData)).layers,this.sourceLayerCoder=new Ug(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,o,u,m){this.loadVTLayers();const w=t.params||{},E=_i(w.filter),P=t.tileResult,B=t.transform,G=P.bufferedTilespaceBounds,J=this.grid.query(G.min.x,G.min.y,G.max.x,G.max.y,(ge,Se,Ge,lt)=>Uh(P.bufferedTilespaceGeometry,ge,Se,Ge,lt));J.sort(Dv);let ie=null;B.elevation&&J.length>0&&(ie=bf.create(B.elevation,this.tileID));const se={};let pe;for(let ge=0;ge<J.length;ge++){const Se=J[ge];if(Se===pe)continue;pe=Se;const Ge=this.featureIndexArray.get(Se);let lt=null;this.loadMatchingFeature(se,Ge,E,w.layers,w.availableImages,o,u,m,(Et,ut,Ct,At=0)=>(lt||(lt=Xc(Et,this.tileID.canonical,t.tileTransform)),ut.queryIntersectsFeature(P,Et,Ct,lt,this.z,t.transform,t.pixelPosMatrix,ie,At)))}return se}loadMatchingFeature(t,o,u,m,w,E,P,B,G){const{featureIndex:J,bucketIndex:ie,sourceLayerIndex:se,layoutVertexArrayOffset:pe}=o,ge=this.bucketLayerIDs[ie];if(m&&!function(Et,ut){for(let Ct=0;Ct<Et.length;Ct++)if(ut.indexOf(Et[Ct])>=0)return!0;return!1}(m,ge))return;const Se=this.sourceLayerCoder.decode(se),Ge=this.vtLayers[Se].feature(J);if(u.needGeometry){const Et=Ia(Ge,!0);if(!u.filter(new Q(this.tileID.overscaledZ),Et,this.tileID.canonical))return}else if(!u.filter(new Q(this.tileID.overscaledZ),Ge))return;const lt=this.getId(Ge,Se);for(let Et=0;Et<ge.length;Et++){const ut=ge[Et];if(m&&m.indexOf(ut)<0)continue;const Ct=E[ut];if(!Ct)continue;let At={};void 0!==lt&&B&&(At=B.getState(Ct.sourceLayer||"_geojsonTileLayer",lt));const Lt=ln({},P[ut]);Lt.paint=s_(Lt.paint,Ct.paint,Ge,At,w),Lt.layout=s_(Lt.layout,Ct.layout,Ge,At,w);const ui=!G||G(Ge,Ct,At,pe);if(!ui)continue;const ii=new Wg(Ge,this.z,this.x,this.y,lt);ii.layer=Lt;let Ci=t[ut];void 0===Ci&&(Ci=t[ut]=[]),Ci.push({featureIndex:J,feature:ii,intersectionZ:ui})}}lookupSymbolFeatures(t,o,u,m,w,E,P,B){const G={};this.loadVTLayers();const J=_i(w);for(const ie of t)this.loadMatchingFeature(G,{bucketIndex:u,sourceLayerIndex:m,featureIndex:ie,layoutVertexArrayOffset:0},J,E,P,B,o);return G}loadFeature(t){const{featureIndex:o,sourceLayerIndex:u}=t;this.loadVTLayers();const m=this.sourceLayerCoder.decode(u),w=this.vtFeatures[m];if(w[o])return w[o];const E=this.vtLayers[m].feature(o);return w[o]=E,E}hasLayer(t){for(const o of this.bucketLayerIDs)for(const u of o)if(t===u)return!0;return!1}getId(t,o){let u=t.id;if(this.promoteId){const m="string"==typeof this.promoteId?this.promoteId:this.promoteId[o];null!=m&&(u=t.properties[m]),"boolean"==typeof u&&(u=Number(u))}return u}}function s_(r,t,o,u,m){return Pi(r,(w,E)=>{const P=t instanceof nt?t.get(E):null;return P&&P.evaluate?P.evaluate(o,u,m):P})}function Dv(r,t){return t-r}vn(r_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class o_{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.image=new qc({width:t,height:o}),this.positions={},this.uploaded=!1}getDash(t,o){const u=this.getKey(t,o);return this.positions[u]}trim(){const t=this.width,o=this.height=qi(this.nextRow);this.image.resize({width:t,height:o})}getKey(t,o){return t.join(",")+o}getDashRanges(t,o,u){const m=[];let w=t.length%2==1?-t[t.length-1]*u:0,E=t[0]*u,P=!0;m.push({left:w,right:E,isDash:P,zeroLength:0===t[0]});let B=t[0];for(let G=1;G<t.length;G++){P=!P;const J=t[G];w=B*u,B+=J,E=B*u,m.push({left:w,right:E,isDash:P,zeroLength:0===J})}return m}addRoundDash(t,o,u){const m=o/2;for(let w=-u;w<=u;w++){const E=this.width*(this.nextRow+u+w);let P=0,B=t[P];for(let G=0;G<this.width;G++){G/B.right>1&&(B=t[++P]);const J=Math.abs(G-B.left),ie=Math.abs(G-B.right),se=Math.min(J,ie);let pe;const ge=w/u*(m+1);if(B.isDash){const Se=m-Math.abs(ge);pe=Math.sqrt(se*se+Se*Se)}else pe=m-Math.sqrt(se*se+ge*ge);this.image.data[E+G]=Math.max(0,Math.min(255,pe+128))}}}addRegularDash(t,o){for(let B=t.length-1;B>=0;--B){const G=t[B],J=t[B+1];G.zeroLength?t.splice(B,1):J&&J.isDash===G.isDash&&(J.left=G.left,t.splice(B,1))}const u=t[0],m=t[t.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const w=this.width*this.nextRow;let E=0,P=t[E];for(let B=0;B<this.width;B++){B/P.right>1&&(P=t[++E]);const G=Math.abs(B-P.left),J=Math.abs(B-P.right),ie=Math.min(G,J);this.image.data[w+B]=Math.max(0,Math.min(255,(P.isDash?ie:-ie)+o+128))}}addDash(t,o){const u=this.getKey(t,o);if(this.positions[u])return this.positions[u];const m="round"===o,w=m?7:0,E=2*w+1;if(this.nextRow+E>this.height)return hn("LineAtlas out of space"),null;0===t.length&&t.push(1);let P=0;for(let J=0;J<t.length;J++)t[J]<0&&(hn("Negative value is found in line dasharray, replacing values with 0"),t[J]=0),P+=t[J];if(0!==P){const J=this.width/P,ie=this.getDashRanges(t,this.width,J);m?this.addRoundDash(ie,J,w):this.addRegularDash(ie,"square"===o?.5*J:0)}const B=this.nextRow+w;this.nextRow+=E;const G={tl:[B,w],br:[P,0]};return this.positions[u]=G,G}}vn(o_,"LineAtlas");const a_=1*na;class l_{constructor(t){const o={},u=[];for(const P in t){const B=t[P],G=o[P]={};for(const J in B.glyphs){const ie=B.glyphs[+J];if(!ie||0===ie.bitmap.width||0===ie.bitmap.height)continue;const se=ie.metrics.localGlyph?a_:1,pe={x:0,y:0,w:ie.bitmap.width+2*se,h:ie.bitmap.height+2*se};u.push(pe),G[J]=pe}}const{w:m,h:w}=mm(u),E=new qc({width:m||1,height:w||1});for(const P in t){const B=t[P];for(const G in B.glyphs){const J=B.glyphs[+G];if(!J||0===J.bitmap.width||0===J.bitmap.height)continue;const ie=o[P][G],se=J.metrics.localGlyph?a_:1;qc.copy(J.bitmap,E,{x:0,y:0},{x:ie.x+se,y:ie.y+se},J.bitmap)}}this.image=E,this.positions=o}}vn(l_,"GlyphAtlas");class Iv{constructor(t){this.tileID=new ja(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Sh(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,o,u,m,w){this.status="parsing",this.data=t,this.collisionBoxArray=new Vr;const E=new Ug(Object.keys(t.layers).sort()),P=new r_(this.tileID,this.promoteId);P.bucketLayerIDs=[];const B={},G=new o_(256,256),J={featureIndex:P,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:G,availableImages:u},ie=o.familiesBySource[this.source];for(const At in ie){const Lt=t.layers[At];if(!Lt)continue;let ui=!1,ii=!1;for(const mi of ie[At])"symbol"===mi[0].type?ui=!0:ii=!0;if(!0===this.isSymbolTile&&!ui||!1===this.isSymbolTile&&!ii)continue;1===Lt.version&&hn(`Vector tile source "${this.source}" layer "${At}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ci=E.encode(At),Xi=[];for(let mi=0;mi<Lt.length;mi++){const Ai=Lt.feature(mi),Ii=P.getId(Ai,At);Xi.push({feature:Ai,id:Ii,index:mi,sourceLayerIndex:Ci})}for(const mi of ie[At]){const Ai=mi[0];void 0!==this.isSymbolTile&&"symbol"===Ai.type!==this.isSymbolTile||Ai.minzoom&&this.zoom<Math.floor(Ai.minzoom)||Ai.maxzoom&&this.zoom>=Ai.maxzoom||"none"!==Ai.visibility&&(Lm(mi,this.zoom,u),(B[Ai.id]=Ai.createBucket({index:P.bucketLayerIDs.length,layers:mi,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ci,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Xi,J,this.tileID.canonical,this.tileTransform),P.bucketLayerIDs.push(mi.map(Ii=>Ii.id)))}}let se,pe,ge,Se;G.trim();const Ge={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},lt=()=>{if(se)return w(se);if(pe&&ge&&Se){const At=new l_(pe),Lt=new bg(ge,Se);for(const ui in B){const ii=B[ui];ii instanceof Gu?(Lm(ii.layers,this.zoom,u),ov(ii,pe,At.positions,ge,Lt.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):ii.hasPattern&&(ii instanceof yh||ii instanceof Nd||ii instanceof Qc)&&(Lm(ii.layers,this.zoom,u),ii.addFeatures(J,this.tileID.canonical,Lt.patternPositions,u,this.tileTransform))}this.status="done",w(null,{buckets:mn(B).filter(ui=>!ui.isEmpty()),featureIndex:P,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:At.image,lineAtlas:G,imageAtlas:Lt,glyphMap:this.returnDependencies?pe:null,iconMap:this.returnDependencies?ge:null,glyphPositions:this.returnDependencies?At.positions:null})}},Et=Pi(J.glyphDependencies,At=>Object.keys(At).map(Number));Object.keys(Et).length?m.send("getGlyphs",{uid:this.uid,stacks:Et},(At,Lt)=>{se||(se=At,pe=Lt,lt())},void 0,!1,Ge):pe={};const ut=Object.keys(J.iconDependencies);ut.length?m.send("getImages",{icons:ut,source:this.source,tileID:this.tileID,type:"icons"},(At,Lt)=>{se||(se=At,ge=Lt,lt())},void 0,!1,Ge):ge={};const Ct=Object.keys(J.patternDependencies);Ct.length?m.send("getImages",{icons:Ct,source:this.source,tileID:this.tileID,type:"patterns"},(At,Lt)=>{se||(se=At,Se=Lt,lt())},void 0,!1,Ge):Se={},lt()}}function Lm(r,t,o){const u=new Q(t);for(const m of r)m.recalculate(u,o)}class c_{constructor(t){this.entries={},this.scheduler=t}request(t,o,u,m){const w=this.entries[t]=this.entries[t]||{callbacks:[]};if(w.result){const[E,P]=w.result;return this.scheduler?this.scheduler.add(()=>{m(E,P)},o):m(E,P),()=>{}}return w.callbacks.push(m),w.cancel||(w.cancel=u((E,P)=>{w.result=[E,P];for(const B of w.callbacks)this.scheduler?this.scheduler.add(()=>{B(E,P)},o):B(E,P);setTimeout(()=>delete this.entries[t],3e3)})),()=>{w.result||(w.callbacks=w.callbacks.filter(E=>E!==m),w.callbacks.length||(w.cancel(),delete this.entries[t]))}}}function u_(r,t,o){const u=JSON.stringify(r.request);return r.data&&(this.deduped.entries[u]={result:[null,r.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},m=>{const w=vr(r.request,(E,P,B,G)=>{E?m(E):P&&m(null,{vectorTile:o?void 0:new me(new sf(P)),rawData:P,cacheControl:B,expires:G})});return()=>{w.cancel(),m()}},t)}const h_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Pm{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,u]=new Uint8Array(t,0,2);if(219!==o)throw new Error("Data does not appear to be in a KDBush format.");const m=u>>4;if(1!==m)throw new Error(`Got v${m} data when expected v1.`);const w=h_[15&u];if(!w)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(t,2,1),[P]=new Uint32Array(t,4,1);return new Pm(P,E,w,t)}constructor(t,o=64,u=Float64Array,m){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=u,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const w=h_.indexOf(this.ArrayType),E=2*t*this.ArrayType.BYTES_PER_ELEMENT,P=t*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-P%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${u}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+P+B,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+E+P+B),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+P+B,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=t)}add(t,o){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=t,this.coords[this._pos++]=o,u}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Om(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,o,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:E,nodeSize:P}=this,B=[0,w.length-1,0],G=[];for(;B.length;){const J=B.pop()||0,ie=B.pop()||0,se=B.pop()||0;if(ie-se<=P){for(let Ge=se;Ge<=ie;Ge++){const lt=E[2*Ge],Et=E[2*Ge+1];lt>=t&&lt<=u&&Et>=o&&Et<=m&&G.push(w[Ge])}continue}const pe=se+ie>>1,ge=E[2*pe],Se=E[2*pe+1];ge>=t&&ge<=u&&Se>=o&&Se<=m&&G.push(w[pe]),(0===J?t<=ge:o<=Se)&&(B.push(se),B.push(pe-1),B.push(1-J)),(0===J?u>=ge:m>=Se)&&(B.push(pe+1),B.push(ie),B.push(1-J))}return G}within(t,o,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:w,nodeSize:E}=this,P=[0,m.length-1,0],B=[],G=u*u;for(;P.length;){const J=P.pop()||0,ie=P.pop()||0,se=P.pop()||0;if(ie-se<=E){for(let Ge=se;Ge<=ie;Ge++)p_(w[2*Ge],w[2*Ge+1],t,o)<=G&&B.push(m[Ge]);continue}const pe=se+ie>>1,ge=w[2*pe],Se=w[2*pe+1];p_(ge,Se,t,o)<=G&&B.push(m[pe]),(0===J?t-u<=ge:o-u<=Se)&&(P.push(se),P.push(pe-1),P.push(1-J)),(0===J?t+u>=ge:o+u>=Se)&&(P.push(pe+1),P.push(ie),P.push(1-J))}return B}}function Om(r,t,o,u,m,w){if(m-u<=o)return;const E=u+m>>1;d_(r,t,E,u,m,w),Om(r,t,o,u,E-1,1-w),Om(r,t,o,E+1,m,1-w)}function d_(r,t,o,u,m,w){for(;m>u;){if(m-u>600){const G=m-u+1,J=o-u+1,ie=Math.log(G),se=.5*Math.exp(2*ie/3),pe=.5*Math.sqrt(ie*se*(G-se)/G)*(J-G/2<0?-1:1);d_(r,t,o,Math.max(u,Math.floor(o-J*se/G+pe)),Math.min(m,Math.floor(o+(G-J)*se/G+pe)),w)}const E=t[2*o+w];let P=u,B=m;for(tp(r,t,u,o),t[2*m+w]>E&&tp(r,t,u,m);P<B;){for(tp(r,t,P,B),P++,B--;t[2*P+w]<E;)P++;for(;t[2*B+w]>E;)B--}t[2*u+w]===E?tp(r,t,u,B):(B++,tp(r,t,B,m)),B<=o&&(u=B+1),o<=B&&(m=B-1)}}function tp(r,t,o,u){Rm(r,o,u),Rm(t,2*o,2*u),Rm(t,2*o+1,2*u+1)}function Rm(r,t,o){const u=r[t];r[t]=r[o],r[o]=u}function p_(r,t,o,u){const m=r-o,w=t-u;return m*m+w*w}e.ARRAY_TYPE=fa,e.AUTH_ERR_MSG=st,e.Aabb=Qo,e.Actor=class{constructor(r,t,o){this.target=r,this.parent=t,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Rn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Vi()?r:Y,this.scheduler=new kv}send(r,t,o,u,m=!1,w){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=w,this.callbacks[E]=o);const P=$i(this.globalScope)?void 0:[];return this.target.postMessage({id:E,type:r,hasCallback:!!o,targetMapId:u,mustQueue:m,sourceMapId:this.mapId,data:kl(t,P)},P),{cancel:()=>{o&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(r){const t=r.data,o=t.id;if(o&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const u=this.cancelCallbacks[o];delete this.cancelCallbacks[o],u&&u.cancel()}else if(t.mustQueue||Vi()){const u=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,t),u&&u.metadata||{type:"message"})}else this.processTask(o,t)}processTask(r,t){if("<response>"===t.type){const o=this.callbacks[r];delete this.callbacks[r],o&&(t.error?o(rs(t.error)):o(null,rs(t.data)))}else{const o=$i(this.globalScope)?void 0:[],u=t.hasCallback?(w,E)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:w?kl(w):null,data:kl(E,o)},o)}:w=>{},m=rs(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,m,u);else if(this.parent.getWorkerSource){const w=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,w[0],m.source)[w[1]](m,u)}else u(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=Jp,e.Color=yr,e.ColorMode=ru,e.CullFaceMode=Ic,e.DEMData=yf,e.DataConstantProperty=we,e.DedupedRequest=c_,e.DepthMode=cd,e.EXTENT=Sn,e.Elevation=class{isDataAvailableAtPoint(r){const t=this._source();if(this.isUsingMockSource()||!t||r.y<0||r.y>1)return!1;const o=t.getSource().maxzoom,u=1<<o,m=Math.floor(r.x),w=Math.floor((r.x-m)*u),E=Math.floor(r.y*u),P=this.findDEMTileFor(new ja(o,m,o,w,E));return!(!P||!P.dem)}getAtPointOrZero(r,t=0){return this.getAtPoint(r,t)||0}getAtPoint(r,t,o=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const u=this._source();if(!u||r.y<0||r.y>1)return t;const m=u.getSource().maxzoom,w=1<<m,E=Math.floor(r.x),P=r.x-E,B=new ja(m,E,m,Math.floor(P*w),Math.floor(r.y*w)),G=this.findDEMTileFor(B);if(!G||!G.dem)return t;const J=G.dem,ie=1<<G.tileID.canonical.z,se=(P*ie-G.tileID.canonical.x)*J.dim,pe=(r.y*ie-G.tileID.canonical.y)*J.dim,ge=Math.floor(se),Se=Math.floor(pe);return(o?this.exaggeration():1)*Cr(Cr(J.get(ge,Se),J.get(ge,Se+1),pe-Se),Cr(J.get(ge+1,Se),J.get(ge+1,Se+1),pe-Se),se-ge)}getAtTileOffset(r,t,o){const u=1<<r.canonical.z;return this.getAtPointOrZero(new uh(r.wrap+(r.canonical.x+t/Sn)/u,(r.canonical.y+o/Sn)/u))}getAtTileOffsetFunc(r,t,o,u){return m=>{const w=this.getAtTileOffset(r,m.x,m.y),E=u.upVector(r.canonical,m.x,m.y);return ol(E,E,w*u.upVectorScale(r.canonical,t,o).metersToTile),E}}getForTilePoints(r,t,o,u){if(this.isUsingMockSource())return!1;const m=bf.create(this,r,u);return!!m&&(t.forEach(w=>{w[2]=this.exaggeration()*m.getElevationAt(w[0],w[1],o)}),!0)}getMinMaxForTile(r){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(r);if(!t||!t.dem)return null;const o=t.dem.tree,u=t.tileID,m=1<<r.canonical.z-u.canonical.z;let w=r.canonical.x/m-u.canonical.x,E=r.canonical.y/m-u.canonical.y,P=0;for(let B=0;B<r.canonical.z-u.canonical.z&&!o.leaves[P];B++){w*=2,E*=2;const G=2*Math.floor(E)+Math.floor(w);P=o.childOffsets[P]+G,w%=1,E%=1}return{min:this.exaggeration()*o.minimums[P],max:this.exaggeration()*o.maximums[P]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,t,o){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=x,e.EvaluationParameters=Q,e.Event=y,e.Evented=k,e.FillExtrusionBucket=Qc,e.Frustum=Nh,e.FrustumCorners=Ep,e.GLOBE_RADIUS=lc,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=bd,e.GLOBE_ZOOM_THRESHOLD_MIN=Sp,e.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const r of this._poleSegments)r.destroy();for(const r of this._gridSegments)r.withSkirts.destroy(),r.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const r of this._wireframeSegments)r.destroy()}}_fillGridMeshWithLods(r,t){const o=new Gi,u=new On,m=[],w=r+1+2,E=t[0]+1,P=t[0]+1+(1+t.length),B=(G,J,ie)=>{let se=G===w-1?G-2:0===G?G:G-1;return se+=ie?24575:0,[se,J]};for(let G=0;G<w;++G)o.emplaceBack(...B(G,0,!0));for(let G=0;G<E;++G)for(let J=0;J<w;++J)o.emplaceBack(...B(J,G,(0===J||J===w-1)&&!0));for(let G=0;G<t.length;++G){const J=t[G];for(let ie=0;ie<w;++ie)o.emplaceBack(...B(ie,J,!0))}for(let G=0;G<t.length;++G){const J=u.length,ie=t[G]+1+2,se=new On;for(let Se=0;Se<ie-1;Se++){const Ge=Se===ie-2,lt=Ge?w*(P-t.length+G-Se):w;for(let Et=0;Et<w-1;Et++){const ut=Se*w+Et;0===Se||Ge||0===Et||Et===w-2?(se.emplaceBack(ut+1,ut,ut+lt),se.emplaceBack(ut+lt,ut+lt+1,ut+1)):(u.emplaceBack(ut+1,ut,ut+lt),u.emplaceBack(ut+lt,ut+lt+1,ut+1))}}const pe=zs.simpleSegment(0,J,o.length,u.length-J);for(let Se=0;Se<se.uint16.length;Se+=3)u.emplaceBack(se.uint16[Se],se.uint16[Se+1],se.uint16[Se+2]);const ge=zs.simpleSegment(0,J,o.length,u.length-J);m.push({withoutSkirts:pe,withSkirts:ge})}return{vertices:o,indices:u,segments:m}}_createGrid(r){const t=this._fillGridMeshWithLods(64,sh);this._gridSegments=t.segments,this._gridBuffer=r.createVertexBuffer(t.vertices,rh.members),this._gridIndexBuffer=r.createIndexBuffer(t.indices,!0)}_createPoles(r){const t=new On;for(let m=0;m<=64;m++)t.emplaceBack(0,m+1,m+2);this._poleIndexBuffer=r.createIndexBuffer(t,!0);const o=new ls,u=new ls;this._poleSegments=[];for(let m=0,w=0;m<Sp;m++){const E=360/(1<<m);o.emplaceBack(0,-lc,0,.5,0),u.emplaceBack(0,-lc,0,.5,1);for(let P=0;P<=64;P++){const B=P/64,G=Cr(0,E,B),[J,ie,se]=Gl(Uf,$f,G,lc);o.emplaceBack(J,ie,se,B,0),u.emplaceBack(J,ie,se,B,1)}this._poleSegments.push(zs.simpleSegment(w,0,66,64)),w+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(o,Vf,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(u,Vf,!1)}getGridBuffers(r,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[r].withSkirts:this._gridSegments[r].withoutSkirts]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r,t){if(!this._wireframeSegments){const o=new Ks,u=64,m=u+1+2,w=1;this._wireframeSegments=[];for(let E=0,P=0;E<sh.length;E++){const B=sh[E];for(let J=w;J<B+w;J++)for(let ie=w;ie<u+w;ie++){const se=J*m+ie;o.emplaceBack(se,se+1),o.emplaceBack(se,se+m),o.emplaceBack(se,se+m+1)}const G=B*u*3;this._wireframeSegments.push(zs.simpleSegment(0,P,(B+1)*m,G)),P+=G}this._wireframeIndexBuffer=r.createIndexBuffer(o)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=Bu,e.ImagePosition=of,e.KDBush=Pm,e.LivePerformanceUtils=Bi,e.LngLat=ns,e.LngLatBounds=sc,e.LocalGlyphMode=vm,e.MAX_MERCATOR_LATITUDE=ta,e.MercatorCoordinate=uh,e.ONE_EM=ia,e.OverscaledTileID=ja,e.PerformanceMarkers=Qi,e.Point=rt,e.Properties=vt,e.RGBAImage=Ha,e.Ray=xd,e.RequestManager=class{constructor(r,t,o){this._transformRequestFn=r,this._customAccessToken=t,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const r=function(){let t="";for(let o=0;o<10;o++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",it,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,t){return this._transformRequestFn&&this._transformRequestFn(r,t)||{url:r}}normalizeStyleURL(r,t){if(!It(r))return r;const o=bt(r);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||t)}normalizeGlyphsURL(r,t){if(!It(r))return r;const o=bt(r);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||t)}normalizeSourceURL(r,t,o,u){if(!It(r))return r;const m=bt(r);return m.path=`/v4/${m.authority}.json`,m.params.push("secure"),o&&m.params.push(`language=${o}`),u&&m.params.push(`worldview=${u}`),this._makeAPIURL(m,this._customAccessToken||t)}normalizeSpriteURL(r,t,o,u){const m=bt(r);return It(r)?(m.path=`/styles/v1${m.path}/sprite${t}${o}`,this._makeAPIURL(m,this._customAccessToken||u)):(m.path+=`${t}${o}`,Mt(m))}normalizeTileURL(r,t,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!It(r))return r;const u=bt(r);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||o&&"raster"!==u.authority&&512===o?"@2x":""}${Oe.supported?".webp":"$1"}`),"raster"===u.authority?u.path=`/${Ee.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${Ee.TILE_URL_VERSION}${u.path}`);const m=this._customAccessToken||function(w){for(const E of w){const P=E.match(/^access_token=(.*)$/);if(P)return P[1]}return null}(u.params)||Ee.ACCESS_TOKEN;return Ee.REQUIRE_ACCESS_TOKEN&&m&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,m)}canonicalizeTileURL(r,t){const o=bt(r);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return r;let u="mapbox://";o.path.match(/^\/raster\/v1\//)?u+=`raster/${o.path.replace(`/${Ee.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${o.path.replace(`/${Ee.TILE_URL_VERSION}/`,"")}`;let m=o.params;return t&&(m=m.filter(w=>!w.match(/^access_token=/))),m.length&&(u+=`?${m.join("&")}`),u}canonicalizeTileset(r,t){const o=!!t&&It(t),u=[];for(const m of r.tiles||[])Ht(m)?u.push(this.canonicalizeTileURL(m,o)):u.push(m);return u}_makeAPIURL(r,t){const o="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=bt(Ee.API_URL);if(r.protocol=u.protocol,r.authority=u.authority,"http"===r.protocol){const m=r.params.indexOf("secure");m>=0&&r.params.splice(m,1)}if("/"!==u.path&&(r.path=`${u.path}${r.path}`),!Ee.REQUIRE_ACCESS_TOKEN)return Mt(r);if(t=t||Ee.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return r.params=r.params.filter(m=>-1===m.indexOf("access_token")),r.params.push(`access_token=${t||""}`),Mt(r)}},e.ResourceType=ys,e.SegmentVector=zs,e.SourceCache=Mh,e.StencilMode=Im,e.StructArrayLayout1ui2=qo,e.StructArrayLayout2f1f2i16=jn,e.StructArrayLayout2i4=Gi,e.StructArrayLayout2ui4=Ks,e.StructArrayLayout3f12=Zn,e.StructArrayLayout3ui6=On,e.StructArrayLayout4i8=ki,e.StructArrayLayout5f20=ls,e.Texture=ld,e.Tile=Em,e.Transitionable=ye,e.Uniform1f=eh,e.Uniform1i=class extends rc{constructor(r){super(r),this.current=0}set(r,t,o){this.fetchUniformLocation(r,t)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},e.Uniform2f=class extends rc{constructor(r){super(r),this.current=[0,0]}set(r,t,o){this.fetchUniformLocation(r,t)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}},e.Uniform3f=class extends rc{constructor(r){super(r),this.current=[0,0,0]}set(r,t,o){this.fetchUniformLocation(r,t)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}},e.Uniform4f=pp,e.UniformColor=fp,e.UniformMatrix2f=class extends rc{constructor(r){super(r),this.current=Pf}set(r,t,o){if(this.fetchUniformLocation(r,t))for(let u=0;u<4;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}},e.UniformMatrix3f=class extends rc{constructor(r){super(r),this.current=fd}set(r,t,o){if(this.fetchUniformLocation(r,t))for(let u=0;u<9;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}},e.UniformMatrix4f=class extends rc{constructor(r){super(r),this.current=Lf}set(r,t,o){if(this.fetchUniformLocation(r,t)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let u=1;u<16;u++)if(o[u]!==this.current[u]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}},e.UnwrappedTileID=lg,e.ValidationError=en,e.VectorTileFeature=ft,e.VectorTileWorkerSource=class extends k{constructor(r,t,o,u,m){super(),this.actor=r,this.layerIndex=t,this.availableImages=o,this.loadVectorData=m||u_,this.loading={},this.loaded={},this.deduped=new c_(r.scheduler),this.isSpriteLoaded=u,this.scheduler=r.scheduler}loadTile(r,t){const o=r.uid,u=r&&r.request,m=u&&u.collectResourceTiming,w=this.loading[o]=new Iv(r);w.abort=this.loadVectorData(r,(E,P)=>{const B=!this.loading[o];if(delete this.loading[o],B||E||!P)return w.status="done",B||(this.loaded[o]=w),t(E);const G=P.rawData,J={};P.expires&&(J.expires=P.expires),P.cacheControl&&(J.cacheControl=P.cacheControl),w.vectorTile=P.vectorTile||new me(new sf(G));const ie=()=>{w.parse(w.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,pe)=>{if(se||!pe)return t(se);const ge={};if(m){const Se=In(u);Se.length>0&&(ge.resourceTiming=JSON.parse(JSON.stringify(Se)))}t(null,ln({rawTileData:G.slice(0)},pe,J,ge))})};this.isSpriteLoaded?ie():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(ie,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):ie()}),this.loaded=this.loaded||{},this.loaded[o]=w})}reloadTile(r,t){const o=this.loaded,u=r.uid,m=this;if(o&&o[u]){const w=o[u];w.showCollisionBoxes=r.showCollisionBoxes,w.enableTerrain=!!r.enableTerrain,w.projection=r.projection,w.tileTransform=Sh(r.tileID.canonical,r.projection);const E=(P,B)=>{const G=w.reloadCallback;G&&(delete w.reloadCallback,w.parse(w.vectorTile,m.layerIndex,this.availableImages,m.actor,G)),t(P,B)};"parsing"===w.status?w.reloadCallback=E:"done"===w.status&&(w.vectorTile?w.parse(w.vectorTile,this.layerIndex,this.availableImages,this.actor,E):E())}}abortTile(r,t){const o=r.uid,u=this.loading[o];u&&(u.abort&&u.abort(),delete this.loading[o]),t()}removeTile(r,t){const o=this.loaded,u=r.uid;o&&o[u]&&delete o[u],t()}},e.WritingMode=Ua,e.ZoomDependentExpression=bo,e.add=kc,e.addDynamicAttributes=gf,e.adjoint=function(r,t){var o=t[0],u=t[1],m=t[2],w=t[3],E=t[4],P=t[5],B=t[6],G=t[7],J=t[8];return r[0]=E*J-P*G,r[1]=m*G-u*J,r[2]=u*P-m*E,r[3]=P*B-w*J,r[4]=o*J-m*B,r[5]=m*w-o*P,r[6]=w*G-E*B,r[7]=u*B-o*G,r[8]=o*E-u*w,r},e.asyncAll=Yi,e.bezier=ri,e.bindAll=Rn,e.boundsAttributes=Xg,e.bufferConvexPolygon=function(r,t){const o=[];for(let u=0;u<r.length;u++){const m=Mi(u-1,-1,r.length-1),w=Mi(u+1,-1,r.length-1),E=r[u],P=r[w],B=r[m].sub(E).unit(),G=P.sub(E).unit(),J=G.angleWithSep(B.x,B.y),ie=B.add(G).unit().mult(-1*t/Math.sin(J/2));o.push(E.add(ie))}return o},e.cacheEntryPossiblyAdded=function(r){Sr++,Sr>kr&&(r.getActor().send("enforceCacheSizeLimit",Tr),Sr=0)},e.calculateGlobeLabelMatrix=function(r,t){const{x:o,y:u}=r.point,m=Ap(o,u,r.worldSize/r._pixelsPerMercatorPixel,0,0);return wu(m,m,Ip(cc(t)))},e.calculateGlobeMatrix=function(r){const{x:t,y:o}=r.point,{lng:u,lat:m}=r._center;return Ap(t,o,r.worldSize,u,m)},e.calculateGlobeMercatorMatrix=function(r){const t=r.pixelsPerMeter,o=t/jl(1,r.center.lat),u=Vl(new Float64Array(16));return Cu(u,u,[r.point.x,r.point.y,0]),oc(u,u,[o,o,t]),Float32Array.from(u)},e.circumferenceAtLatitude=kd,e.clamp=ai,e.clearTileCache=function(r){if(!ir())return;const t=Y.caches.delete(Mn);r&&t.catch(r).then(()=>r())},e.clipLine=Pg,e.clone=function(r){var t=new fa(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},e.clone$1=tr,e.collisionCircleLayout=Qh,e.config=Ee,e.conjugate=function(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r},e.create=function(){var r=new fa(16);return fa!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},e.create$1=mp,e.createExpression=ts,e.createLayout=Ut,e.createStyleLayer=function(r){return"custom"===r.type?new bv(r):new Cv[r.type](r)},e.cross=yd,e.degToRad=Nt,e.distance=function(r,t){return Math.hypot(t[0]-r[0],t[1]-r[1],t[2]-r[2])},e.div=function(r,t,o){return r[0]=t[0]/o[0],r[1]=t[1]/o[1],r[2]=t[2]/o[2],r},e.dot=Va,e.earthRadius=ch,e.ease=Li,e.easeCubicInOut=qt,e.ecefToLatLng=function([r,t,o]){const u=Math.hypot(r,t,o),m=Math.atan2(r,o),w=.5*Math.PI-Math.acos(-t/u);return new ns(ct(m),ct(w))},e.emitValidationErrors=lu,e.endsWith=xn,e.enforceCacheSizeLimit=function(r){yn(),xr&&xr.then(t=>{t.keys().then(o=>{for(let u=0;u<o.length-r;u++)t.delete(o[u])})})},e.evaluateSizeForFeature=xh,e.evaluateSizeForZoom=bh,e.evaluateVariableOffset=Fg,e.evented=I,e.exactEquals=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]},e.exactEquals$1=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]},e.exported=s,e.exported$1=Oe,e.extend=ln,e.extend$1=R,e.fillExtrusionHeightLift=sg,e.filterObject=gr,e.fromMat4=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r},e.fromQuat=function(r,t){var o=t[0],u=t[1],m=t[2],w=t[3],E=o+o,P=u+u,B=m+m,G=o*E,J=u*E,ie=u*P,se=m*E,pe=m*P,ge=m*B,Se=w*E,Ge=w*P,lt=w*B;return r[0]=1-ie-ge,r[1]=J+lt,r[2]=se-Ge,r[3]=0,r[4]=J-lt,r[5]=1-G-ge,r[6]=pe+Se,r[7]=0,r[8]=se+Ge,r[9]=pe-Se,r[10]=1-G-ie,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},e.fromRotation=function(r,t){var o=Math.sin(t),u=Math.cos(t);return r[0]=u,r[1]=o,r[2]=0,r[3]=-o,r[4]=u,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},e.fromScaling=yp,e.furthestTileCorner=function(r){const t=Math.round((r+45+360)%360/90)%4;return Vt[t]},e.getAABBPointSquareDist=function(r,t,o){let u=0;for(let m=0;m<2;++m){const w=o?o[m]:0;r[m]>w&&(u+=(r[m]-w)*(r[m]-w)),t[m]<w&&(u+=(w-t[m])*(w-t[m]))}return u},e.getAnchorAlignment=id,e.getAnchorJustification=xm,e.getBounds=function(r){let t=1/0,o=1/0,u=-1/0,m=-1/0;for(const w of r)t=Math.min(t,w.x),o=Math.min(o,w.y),u=Math.max(u,w.x),m=Math.max(m,w.y);return{min:new rt(t,o),max:new rt(u,m)}},e.getColumn=un,e.getDefaultExportFromCjs=pt,e.getGridMatrix=function(r,t,o,u){const m=t.getNorth(),w=t.getSouth(),E=t.getWest(),P=t.getEast(),B=1<<r.z,G=P-E,J=m-w,ie=G/64,se=-J/sh[o],pe=[0,ie,0,se,0,0,m,E,0];if(r.z>0){const ge=180/u;gp(pe,pe,[ge/G+1,0,0,0,ge/J+1,0,-.5*ge/ie,.5*ge/se,1])}return pe[2]=B,pe[5]=r.x,pe[8]=r.y,pe},e.getImage=at,e.getJSON=function(r,t){return sr(ln(r,{type:"json"}),t)},e.getLatitudinalLod=function(r){const t=ta-5;r=ai(r,-t,t)/t*90;const o=Math.pow(Math.abs(Math.sin(Nt(r))),3);return Math.round(o*(sh.length-1))},e.getMapSessionAPI=si,e.getPerformanceMeasurement=In,e.getProjection=Gg,e.getRTLTextPluginStatus=z,e.getReferrer=fr,e.getTilePoint=function(r,{x:t,y:o},u=0){return new rt(((t-u)*r.scale-r.x)*Sn,(o*r.scale-r.y)*Sn)},e.getTileVec3=function(r,t,o=0){return Tc(((t.x-o)*r.scale-r.x)*Sn,(t.y*r.scale-r.y)*Sn,Wf(t.z,t.y))},e.getVideo=function(r,t){const o=Y.document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let u=0;u<r.length;u++){const m=Y.document.createElement("source");Yr(r[u])||(o.crossOrigin="Anonymous"),m.src=r[u],o.appendChild(m)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(r){const t=[0,0,0],o=Vl(new Float64Array(16));return wu(o,r.pixelMatrix,r.globeMatrix),Fs(t,t,o),new rt(t[0],t[1])},e.globeDenormalizeECEF=Ip,e.globeECEFOrigin=function(r,t){const o=[0,0,0];return Fs(o,o,lh(cc(t.canonical))),Fs(o,o,r),o},e.globeMetersToEcef=wd,e.globeNormalizeECEF=lh,e.globePixelsToTileUnits=function(r,t){return Sn/(512*Math.pow(2,r))*Vh(cc(t))},e.globePoleMatrixForTile=function(r,t,o){const u=Vl(new Float64Array(16)),m=(t/(1<<r)-.5)*Math.PI*2;return zh(u,o.globeMatrix,m),Float32Array.from(u)},e.globeTileBounds=cc,e.globeTiltAtLngLat=Lp,e.globeToMercatorTransition=Du,e.globeUseCustomAntiAliasing=function(r,t,o){const u=Du(o.zoom),m=r.style.map._antialias,w=!!t.extStandardDerivatives,E=t.extStandardDerivativesForceOff||r.terrain&&r.terrain.exaggeration()>0;return 0===u&&!m&&!E&&w},e.identity=Vl,e.identity$1=Nf,e.invert=_p,e.isFullscreen=function(){return!!Y.document.fullscreenElement||!!Y.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Td,e.isMapAuthenticated=function(r){return Si.has(r)},e.isMapboxURL=It,e.isSafariWithAntialiasingBug=function(r){const t=r.navigator?r.navigator.userAgent:null;return!!$i(r)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=ea,e.latLngToECEF=Mu,e.len=Ff,e.length=Tu,e.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},e.lngFromMercatorX=al,e.loadVectorTile=u_,e.makeRequest=sr,e.mapValue=function(r,t,o,u,m){return ai((r-t)/(o-t)*(m-u)+u,u,m)},e.mercatorScale=Xf,e.mercatorXfromLng=hc,e.mercatorYfromLat=dc,e.mercatorZfromAltitude=jl,e.mul=zf,e.mul$1=Xm,e.multiply=wu,e.multiply$1=gp,e.multiply$2=bp,e.nextPowerOfTwo=qi,e.normalize=Jo,e.normalize$1=Zm,e.normalize$2=Tp,e.number=Cr,e.ortho=function(r,t,o,u,m,w,E){var P=1/(t-o),B=1/(u-m),G=1/(w-E);return r[0]=-2*P,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*B,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*G,r[11]=0,r[12]=(t+o)*P,r[13]=(m+u)*B,r[14]=(E+w)*G,r[15]=1,r},e.pbf=V_,e.perspective=function(r,t,o,u,m){var w,E=1/Math.tan(t/2);return r[0]=E/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=E,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=m&&m!==1/0?(r[10]=(m+u)*(w=1/(u-m)),r[14]=2*m*u*w):(r[10]=-1,r[14]=-2*u),r},e.pick=function(r,t){const o={};for(let u=0;u<t.length;u++){const m=t[u];m in r&&(o[m]=r[m])}return o},e.plugin=Z,e.pointGeometry=Zt,e.polesInViewport=function(r){const t=Vl(new Float64Array(16));wu(t,r.pixelMatrix,r.globeMatrix);const o=[0,Hl,0],u=[0,El,0];return Fs(o,o,t),Fs(u,u,t),[o[0]>0&&o[0]<=r.width&&o[1]>0&&o[1]<=r.height&&!Td(r,new ns(r.center.lat,90)),u[0]>0&&u[0]<=r.width&&u[1]>0&&u[1]<=r.height&&!Td(r,new ns(r.center.lat,-90))]},e.polygonContainsPoint=pu,e.polygonIntersectsBox=Uh,e.polygonIntersectsPolygon=no,e.polygonizeBounds=function(r,t,o=0,u=!0){const m=new rt(o,o),w=r.sub(m),E=t.add(m),P=[w,new rt(E.x,w.y),E,new rt(w.x,E.y)];return u&&P.push(w.clone()),P},e.posAttributes=rh,e.postMapLoadEvent=Fe,e.postPerformanceEvent=Rt,e.postTurnstileEvent=je,e.potpack=mm,e.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},e.radToDeg=ct,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(r){return r({pluginStatus:b,pluginURL:a}),I.on("pluginStateChange",r),r},e.removeAuthState=function(r){Si.delete(r)},e.renderColorRamp=Hp,e.resample=Zf,e.rotateX=vp,e.rotateX$1=Yf,e.rotateY=zh,e.rotateY$1=kp,e.rotateZ=function(r,t,o){var u=Math.sin(o),m=Math.cos(o),w=t[0],E=t[1],P=t[2],B=t[3],G=t[4],J=t[5],ie=t[6],se=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=w*m+G*u,r[1]=E*m+J*u,r[2]=P*m+ie*u,r[3]=B*m+se*u,r[4]=G*m-w*u,r[5]=J*m-E*u,r[6]=ie*m-P*u,r[7]=se*m-B*u,r},e.rotateZ$1=function(r,t,o){o*=.5;var u=t[0],m=t[1],w=t[2],E=t[3],P=Math.sin(o),B=Math.cos(o);return r[0]=u*B+m*P,r[1]=m*B-u*P,r[2]=w*B+E*P,r[3]=E*B-w*P,r},e.scale=oc,e.scale$1=Cp,e.scale$2=ol,e.scaleAndAdd=Ec,e.set=function(r,t,o,u){return r[0]=t,r[1]=o,r[2]=u,r},e.setCacheLimits=function(r,t){Tr=r,kr=t},e.setColumn=function(r,t,o){r[4*t+0]=o[0],r[4*t+1]=o[1],r[4*t+2]=o[2],r[4*t+3]=o[3]},e.setRTLTextPlugin=function(r,t,o=!1){if(b===cu||b===Vc||b===Lh)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=s.resolveURL(r),b=cu,xc=t,T(),o||$()},e.smoothstep=fi,e.spec=M,e.squaredLength=function(r){var t=r[0],o=r[1],u=r[2];return t*t+o*o+u*u},e.storeAuthState=function(r,t){t?Si.add(r):Si.delete(r)},e.sub=ac,e.subtract=Fh,e.symbolSize=ey,e.tileAABB=function(r,t,o,u,m,w,E,P,B){if("globe"===B.name)return function jf(r,t,o){const u=t/r.worldSize,m=r.globeMatrix;if(o.z<=1){const ii=cc(o).getCorners();return Eu(ii,m,u),Qo.fromPoints(ii)}const w=Su(o),E=Yh(w);Eu(E,m,u);const P=Number.MAX_VALUE,B=[-P,-P,-P],G=[P,P,P];if(w.contains(r.center)){for(const Xi of E)Ko(G,G,Xi),Uc(B,B,Xi);B[2]=0;const ii=r.point,Ci=[ii.x*u,ii.y*u,0];return Ko(G,G,Ci),Uc(B,B,Ci),new Qo(G,B)}const J=[m[12]*u,m[13]*u,m[14]*u],ie=w.getCenter(),se=ai(r.center.lat,-ta,ta),pe=ai(ie.lat,-ta,ta),ge=hc(r.center.lng),Se=dc(se);let Ge=ge-hc(ie.lng);const lt=Se-dc(pe);Ge>.5?Ge-=1:Ge<-.5&&(Ge+=1);let Et=0;Math.abs(Ge)>Math.abs(lt)?Et=Ge>=0?1:3:(Et=lt>=0?0:2,Ec(J,J,[m[4]*u,m[5]*u,m[6]*u],-Math.sin(Nt(lt>=0?w.getSouth():w.getNorth()))*lc));const ut=E[Et],Ct=E[(Et+1)%4],At=new ku(ut,Ct,J),Lt=[Cd(At,0)||ut[0],Cd(At,1)||ut[1],Cd(At,2)||ut[2]],ui=Du(r.zoom);if(ui>0){const ii=function({x:Xi,y:mi,z:Ai},Ii,Ni,Ki,bi){const pn=1/(1<<Ai);let En=Xi*pn,_n=En+pn,ur=mi*pn,tn=ur+pn,Vn=0;const hr=(En+_n)/2-Ki;return hr>.5?Vn=-1:hr<-.5&&(Vn=1),En=((En+Vn)*Ii-(Ki*=Ii))*Ni+Ki,_n=((_n+Vn)*Ii-Ki)*Ni+Ki,ur=(ur*Ii-(bi*=Ii))*Ni+bi,tn=(tn*Ii-bi)*Ni+bi,[[En,tn,0],[_n,tn,0],[_n,ur,0],[En,ur,0]]}(o,t,r._pixelsPerMercatorPixel,ge,Se);for(let Xi=0;Xi<E.length;Xi++)uc(E[Xi],ii[Xi],ui);const Ci=kc([],ii[Et],ii[(Et+1)%4]);ol(Ci,Ci,.5),uc(Lt,Ci,ui)}for(const ii of E)Ko(G,G,ii),Uc(B,B,ii);return G[2]=Math.min(ut[2],Ct[2]),Ko(G,G,Lt),Uc(B,B,Lt),new Qo(G,B)}(r,t,new Jp(o,u,m));const G=Sh({z:o,x:u,y:m},B);return new Qo([(w+G.x/G.scale)*t,t*(G.y/G.scale),E],[(w+G.x2/G.scale)*t,t*(G.y2/G.scale),P])},e.tileCornersToBounds=Su,e.tileTransform=Sh,e.transformMat3=function(r,t,o){var u=t[0],m=t[1],w=t[2];return r[0]=u*o[0]+m*o[3]+w*o[6],r[1]=u*o[1]+m*o[4]+w*o[7],r[2]=u*o[2]+m*o[5]+w*o[8],r},e.transformMat4=Fs,e.transformMat4$1=hu,e.transformQuat=wp,e.transitionTileAABBinECEF=$c,e.translate=Cu,e.transpose=function(r,t){if(r===t){var o=t[1],u=t[2],m=t[5];r[1]=t[3],r[2]=t[6],r[3]=o,r[5]=t[7],r[6]=u,r[7]=m}else r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8];return r},e.triggerPluginCompletionEvent=p,e.uniqueId=jt,e.updateGlobeVertexNormal=function(r,t,o,u,m){const w=5*t+2;r.float32[w+0]=o,r.float32[w+1]=u,r.float32[w+2]=m},e.validateCustomStyleLayer=function(r){const t=[],o=r.id;return void 0===o&&t.push({message:`layers.${o}: missing required property "id"`}),void 0===r.render&&t.push({message:`layers.${o}: missing required method "render"`}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=r=>Co(yc(r)),e.validateFog=r=>Co(Er(r)),e.validateLayer=r=>Co(q(r)),e.validateLight=r=>Co(bn(r)),e.validateSource=r=>Co(Dt(r)),e.validateStyle=Ih,e.validateTerrain=r=>Co(mr(r)),e.values=mn,e.vectorTile=qh,e.version=Ae,e.warnOnce=hn,e.window=Y,e.wrap=Mi}),sn(0,function(e){function Y(xt){if("number"==typeof xt||"boolean"==typeof xt||"string"==typeof xt||null==xt)return JSON.stringify(xt);if(Array.isArray(xt)){let ze="[";for(const at of xt)ze+=`${Y(at)},`;return`${ze}]`}let De="{";for(const ze of Object.keys(xt).sort())De+=`${ze}:${Y(xt[ze])},`;return`${De}}`}function Ae(xt){let De="";for(const ze of e.refProperties)De+=`/${Y(xt[ze])}`;return De}class ke{constructor(De){this.keyCache={},De&&this.replace(De)}replace(De){this._layerConfigs={},this._layers={},this.update(De,[])}update(De,ze){for(const st of De)this._layerConfigs[st.id]=st,(this._layers[st.id]=e.createStyleLayer(st)).compileFilter(),this.keyCache[st.id]&&delete this.keyCache[st.id];for(const st of ze)delete this.keyCache[st],delete this._layerConfigs[st],delete this._layers[st];this.familiesBySource={};const at=function(st,It){const Ht={};for(let Ie=0;Ie<st.length;Ie++){const He=It&&It[st[Ie].id]||Ae(st[Ie]);It&&(It[st[Ie].id]=He);let Pe=Ht[He];Pe||(Pe=Ht[He]=[]),Pe.push(st[Ie])}const Gt=[];for(const Ie in Ht)Gt.push(Ht[Ie]);return Gt}(e.values(this._layerConfigs),this.keyCache);for(const st of at){const It=st.map(bt=>this._layers[bt.id]),Ht=It[0];if("none"===Ht.visibility)continue;const Gt=Ht.source||"";let Ie=this.familiesBySource[Gt];Ie||(Ie=this.familiesBySource[Gt]={});const He=Ht.sourceLayer||"_geojsonTileLayer";let Pe=Ie[He];Pe||(Pe=Ie[He]=[]),Pe.push(It)}}}class Ee{loadTile(De,ze){const{uid:at,encoding:st,rawImageData:It,padding:Ht,buildQuadTree:Gt}=De,Ie=e.window.ImageBitmap&&It instanceof e.window.ImageBitmap?this.getImageData(It,Ht):It;ze(null,new e.DEMData(at,Ie,st,Ht<1,Gt))}getImageData(De,ze){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(De.width,De.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=De.width,this.offscreenCanvas.height=De.height,this.offscreenCanvasContext.drawImage(De,0,0,De.width,De.height);const at=this.offscreenCanvasContext.getImageData(-ze,-ze,De.width+2*ze,De.height+2*ze);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),at}}function Oe(xt,De){if(0!==xt.length){Ye(xt[0],De);for(var ze=1;ze<xt.length;ze++)Ye(xt[ze],!De)}}function Ye(xt,De){for(var ze=0,at=0,st=0,It=xt.length,Ht=It-1;st<It;Ht=st++){var Gt=(xt[st][0]-xt[Ht][0])*(xt[Ht][1]+xt[st][1]),Ie=ze+Gt;at+=Math.abs(ze)>=Math.abs(Gt)?ze-Ie+Gt:Gt-Ie+ze,ze=Ie}ze+at>=0!=!!De&&xt.reverse()}var Xe=e.getDefaultExportFromCjs(function xt(De,ze){var at,st=De&&De.type;if("FeatureCollection"===st)for(at=0;at<De.features.length;at++)xt(De.features[at],ze);else if("GeometryCollection"===st)for(at=0;at<De.geometries.length;at++)xt(De.geometries[at],ze);else if("Feature"===st)xt(De.geometry,ze);else if("Polygon"===st)Oe(De.coordinates,ze);else if("MultiPolygon"===st)for(at=0;at<De.coordinates.length;at++)Oe(De.coordinates[at],ze);return De});const et=e.VectorTileFeature.prototype.toGeoJSON;var dt={exports:{}},St=e.pointGeometry,it=e.vectorTile.VectorTileFeature,pt=yt;function yt(xt,De){this.options=De||{},this.features=xt,this.length=xt.length}function Qt(xt,De){this.id="number"==typeof xt.id?xt.id:void 0,this.type=xt.type,this.rawGeometry=1===xt.type?[xt.geometry]:xt.geometry,this.properties=xt.tags,this.extent=De||4096}yt.prototype.feature=function(xt){return new Qt(this.features[xt],this.options.extent)},Qt.prototype.loadGeometry=function(){var xt=this.rawGeometry;this.geometry=[];for(var De=0;De<xt.length;De++){for(var ze=xt[De],at=[],st=0;st<ze.length;st++)at.push(new St(ze[st][0],ze[st][1]));this.geometry.push(at)}return this.geometry},Qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var xt=this.geometry,De=1/0,ze=-1/0,at=1/0,st=-1/0,It=0;It<xt.length;It++)for(var Ht=xt[It],Gt=0;Gt<Ht.length;Gt++){var Ie=Ht[Gt];De=Math.min(De,Ie.x),ze=Math.max(ze,Ie.x),at=Math.min(at,Ie.y),st=Math.max(st,Ie.y)}return[De,at,ze,st]},Qt.prototype.toGeoJSON=it.prototype.toGeoJSON;var Ve=e.pbf,Zt=pt;function ei(xt){var De=new Ve;return function(ze,at){for(var st in ze.layers)at.writeMessage(3,rt,ze.layers[st])}(xt,De),De.finish()}function rt(xt,De){var ze;De.writeVarintField(15,xt.version||1),De.writeStringField(1,xt.name||""),De.writeVarintField(5,xt.extent||4096);var at={keys:[],values:[],keycache:{},valuecache:{}};for(ze=0;ze<xt.length;ze++)at.feature=xt.feature(ze),De.writeMessage(2,Kt,at);var st=at.keys;for(ze=0;ze<st.length;ze++)De.writeStringField(3,st[ze]);var It=at.values;for(ze=0;ze<It.length;ze++)De.writeMessage(4,qt,It[ze])}function Kt(xt,De){var ze=xt.feature;void 0!==ze.id&&De.writeVarintField(1,ze.id),De.writeMessage(2,Yt,xt),De.writeVarintField(3,ze.type),De.writeMessage(4,Vt,ze)}function Yt(xt,De){var ze=xt.feature,at=xt.keys,st=xt.values,It=xt.keycache,Ht=xt.valuecache;for(var Gt in ze.properties){var Ie=ze.properties[Gt],He=It[Gt];if(null!==Ie){void 0===He&&(at.push(Gt),It[Gt]=He=at.length-1),De.writeVarint(He);var Pe=typeof Ie;"string"!==Pe&&"boolean"!==Pe&&"number"!==Pe&&(Ie=JSON.stringify(Ie));var bt=Pe+":"+Ie,Mt=Ht[bt];void 0===Mt&&(st.push(Ie),Ht[bt]=Mt=st.length-1),De.writeVarint(Mt)}}}function Nt(xt,De){return(De<<3)+(7&xt)}function ct(xt){return xt<<1^xt>>31}function Vt(xt,De){for(var ze=xt.loadGeometry(),at=xt.type,st=0,It=0,Ht=ze.length,Gt=0;Gt<Ht;Gt++){var Ie=ze[Gt],He=1;1===at&&(He=Ie.length),De.writeVarint(Nt(1,He));for(var Pe=3===at?Ie.length-1:Ie.length,bt=0;bt<Pe;bt++){1===bt&&1!==at&&De.writeVarint(Nt(2,Pe-1));var Mt=Ie[bt].x-st,xi=Ie[bt].y-It;De.writeVarint(ct(Mt)),De.writeVarint(ct(xi)),st+=Mt,It+=xi}3===at&&De.writeVarint(Nt(7,1))}}function qt(xt,De){var ze=typeof xt;"string"===ze?De.writeStringField(1,xt):"boolean"===ze?De.writeBooleanField(7,xt):"number"===ze&&(xt%1!=0?De.writeDoubleField(3,xt):xt<0?De.writeSVarintField(6,xt):De.writeVarintField(5,xt))}dt.exports=ei,dt.exports.fromVectorTileJs=ei,dt.exports.fromGeojsonVt=function(xt,De){De=De||{};var ze={};for(var at in xt)ze[at]=new Zt(xt[at].features,De),ze[at].name=at,ze[at].version=De.version,ze[at].extent=De.extent;return ei({layers:ze})},dt.exports.GeoJSONWrapper=Zt;var ri=e.getDefaultExportFromCjs(dt.exports);const Li={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xt=>xt},ai=Math.fround||(fi=new Float32Array(1),xt=>(fi[0]=+xt,fi[0]));var fi;const Mi=3,Yi=5,mn=6;class ln{constructor(De){this.options=Object.assign(Object.create(Li),De),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(De){const{log:ze,minZoom:at,maxZoom:st}=this.options;ze&&console.time("total time");const It=`prepare ${De.length} points`;ze&&console.time(It),this.points=De;const Ht=[];for(let Ie=0;Ie<De.length;Ie++){const He=De[Ie];if(!He.geometry)continue;const[Pe,bt]=He.geometry.coordinates,Mt=ai(Di(Pe)),xi=ai(qi(bt));Ht.push(Mt,xi,1/0,Ie,-1,1),this.options.reduce&&Ht.push(0)}let Gt=this.trees[st+1]=this._createTree(Ht);ze&&console.timeEnd(It);for(let Ie=st;Ie>=at;Ie--){const He=+Date.now();Gt=this.trees[Ie]=this._createTree(this._cluster(Gt,Ie)),ze&&console.log("z%d: %d clusters in %dms",Ie,Gt.numItems,+Date.now()-He)}return ze&&console.timeEnd("total time"),this}getClusters(De,ze){let at=((De[0]+180)%360+360)%360-180;const st=Math.max(-90,Math.min(90,De[1]));let It=180===De[2]?180:((De[2]+180)%360+360)%360-180;const Ht=Math.max(-90,Math.min(90,De[3]));if(De[2]-De[0]>=360)at=-180,It=180;else if(at>It){const bt=this.getClusters([at,st,180,Ht],ze),Mt=this.getClusters([-180,st,It,Ht],ze);return bt.concat(Mt)}const Gt=this.trees[this._limitZoom(ze)],Ie=Gt.range(Di(at),qi(Ht),Di(It),qi(st)),He=Gt.data,Pe=[];for(const bt of Ie){const Mt=this.stride*bt;Pe.push(He[Mt+Yi]>1?zn(He,Mt,this.clusterProps):this.points[He[Mt+Mi]])}return Pe}getChildren(De){const ze=this._getOriginId(De),at=this._getOriginZoom(De),st="No cluster with the specified id.",It=this.trees[at];if(!It)throw new Error(st);const Ht=It.data;if(ze*this.stride>=Ht.length)throw new Error(st);const Gt=this.options.radius/(this.options.extent*Math.pow(2,at-1)),Ie=It.within(Ht[ze*this.stride],Ht[ze*this.stride+1],Gt),He=[];for(const Pe of Ie){const bt=Pe*this.stride;Ht[bt+4]===De&&He.push(Ht[bt+Yi]>1?zn(Ht,bt,this.clusterProps):this.points[Ht[bt+Mi]])}if(0===He.length)throw new Error(st);return He}getLeaves(De,ze,at){const st=[];return this._appendLeaves(st,De,ze=ze||10,at=at||0,0),st}getTile(De,ze,at){const st=this.trees[this._limitZoom(De)],It=Math.pow(2,De),{extent:Ht,radius:Gt}=this.options,Ie=Gt/Ht,He=(at-Ie)/It,Pe=(at+1+Ie)/It,bt={features:[]};return this._addTileFeatures(st.range((ze-Ie)/It,He,(ze+1+Ie)/It,Pe),st.data,ze,at,It,bt),0===ze&&this._addTileFeatures(st.range(1-Ie/It,He,1,Pe),st.data,It,at,It,bt),ze===It-1&&this._addTileFeatures(st.range(0,He,Ie/It,Pe),st.data,-1,at,It,bt),bt.features.length?bt:null}getClusterExpansionZoom(De){let ze=this._getOriginZoom(De)-1;for(;ze<=this.options.maxZoom;){const at=this.getChildren(De);if(ze++,1!==at.length)break;De=at[0].properties.cluster_id}return ze}_appendLeaves(De,ze,at,st,It){const Ht=this.getChildren(ze);for(const Gt of Ht){const Ie=Gt.properties;if(Ie&&Ie.cluster?It+Ie.point_count<=st?It+=Ie.point_count:It=this._appendLeaves(De,Ie.cluster_id,at,st,It):It<st?It++:De.push(Gt),De.length===at)break}return It}_createTree(De){const ze=new e.KDBush(De.length/this.stride|0,this.options.nodeSize,Float32Array);for(let at=0;at<De.length;at+=this.stride)ze.add(De[at],De[at+1]);return ze.finish(),ze.data=De,ze}_addTileFeatures(De,ze,at,st,It,Ht){for(const Gt of De){const Ie=Gt*this.stride,He=ze[Ie+Yi]>1;let Pe,bt,Mt;if(He)Pe=jt(ze,Ie,this.clusterProps),bt=ze[Ie],Mt=ze[Ie+1];else{const ot=this.points[ze[Ie+Mi]];Pe=ot.properties;const[Ue,je]=ot.geometry.coordinates;bt=Di(Ue),Mt=qi(je)}const xi={type:1,geometry:[[Math.round(this.options.extent*(bt*It-at)),Math.round(this.options.extent*(Mt*It-st))]],tags:Pe};let Ke;Ke=He||this.options.generateId?ze[Ie+Mi]:this.points[ze[Ie+Mi]].id,void 0!==Ke&&(xi.id=Ke),Ht.features.push(xi)}}_limitZoom(De){return Math.max(this.options.minZoom,Math.min(Math.floor(+De),this.options.maxZoom+1))}_cluster(De,ze){const{radius:at,extent:st,reduce:It,minPoints:Ht}=this.options,Gt=at/(st*Math.pow(2,ze)),Ie=De.data,He=[],Pe=this.stride;for(let bt=0;bt<Ie.length;bt+=Pe){if(Ie[bt+2]<=ze)continue;Ie[bt+2]=ze;const Mt=Ie[bt],xi=Ie[bt+1],Ke=De.within(Ie[bt],Ie[bt+1],Gt),ot=Ie[bt+Yi];let Ue=ot;for(const je of Ke){const Le=je*Pe;Ie[Le+2]>ze&&(Ue+=Ie[Le+Yi])}if(Ue>ot&&Ue>=Ht){let je,Le=Mt*ot,Fe=xi*ot,ht=-1;const Rt=((bt/Pe|0)<<5)+(ze+1)+this.points.length;for(const pi of Ke){const si=pi*Pe;if(Ie[si+2]<=ze)continue;Ie[si+2]=ze;const Si=Ie[si+Yi];Le+=Ie[si]*Si,Fe+=Ie[si+1]*Si,Ie[si+4]=Rt,It&&(je||(je=this._map(Ie,bt,!0),ht=this.clusterProps.length,this.clusterProps.push(je)),It(je,this._map(Ie,si)))}Ie[bt+4]=Rt,He.push(Le/Ue,Fe/Ue,1/0,Rt,-1,Ue),It&&He.push(ht)}else{for(let je=0;je<Pe;je++)He.push(Ie[bt+je]);if(Ue>1)for(const je of Ke){const Le=je*Pe;if(!(Ie[Le+2]<=ze)){Ie[Le+2]=ze;for(let Fe=0;Fe<Pe;Fe++)He.push(Ie[Le+Fe])}}}}return He}_getOriginId(De){return De-this.points.length>>5}_getOriginZoom(De){return(De-this.points.length)%32}_map(De,ze,at){if(De[ze+Yi]>1){const Ht=this.clusterProps[De[ze+mn]];return at?Object.assign({},Ht):Ht}const st=this.points[De[ze+Mi]].properties,It=this.options.map(st);return at&&It===st?Object.assign({},It):It}}function zn(xt,De,ze){return{type:"Feature",id:xt[De+Mi],properties:jt(xt,De,ze),geometry:{type:"Point",coordinates:[(at=xt[De],360*(at-.5)),Hn(xt[De+1])]}};var at}function jt(xt,De,ze){const at=xt[De+Yi],st=at>=1e4?`${Math.round(at/1e3)}k`:at>=1e3?Math.round(at/100)/10+"k":at,It=xt[De+mn],Ht=-1===It?{}:Object.assign({},ze[It]);return Object.assign(Ht,{cluster:!0,cluster_id:xt[De+Mi],point_count:at,point_count_abbreviated:st})}function Di(xt){return xt/360+.5}function qi(xt){const De=Math.sin(xt*Math.PI/180),ze=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return ze<0?0:ze>1?1:ze}function Hn(xt){const De=(180-360*xt)*Math.PI/180;return 360*Math.atan(Math.exp(De))/Math.PI-90}function Rn(xt,De,ze,at){for(var st,It=at,Ht=ze-De>>1,Gt=ze-De,Ie=xt[De],He=xt[De+1],Pe=xt[ze],bt=xt[ze+1],Mt=De+3;Mt<ze;Mt+=3){var xi=xn(xt[Mt],xt[Mt+1],Ie,He,Pe,bt);if(xi>It)st=Mt,It=xi;else if(xi===It){var Ke=Math.abs(Mt-Ht);Ke<Gt&&(st=Mt,Gt=Ke)}}It>at&&(st-De>3&&Rn(xt,De,st,at),xt[st+2]=It,ze-st>3&&Rn(xt,st,ze,at))}function xn(xt,De,ze,at,st,It){var Ht=st-ze,Gt=It-at;if(0!==Ht||0!==Gt){var Ie=((xt-ze)*Ht+(De-at)*Gt)/(Ht*Ht+Gt*Gt);Ie>1?(ze=st,at=It):Ie>0&&(ze+=Ht*Ie,at+=Gt*Ie)}return(Ht=xt-ze)*Ht+(Gt=De-at)*Gt}function Pi(xt,De,ze,at){var st={id:void 0===xt?null:xt,type:De,geometry:ze,tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(It){var Ht=It.geometry,Gt=It.type;if("Point"===Gt||"MultiPoint"===Gt||"LineString"===Gt)gr(It,Ht);else if("Polygon"===Gt||"MultiLineString"===Gt)for(var Ie=0;Ie<Ht.length;Ie++)gr(It,Ht[Ie]);else if("MultiPolygon"===Gt)for(Ie=0;Ie<Ht.length;Ie++)for(var He=0;He<Ht[Ie].length;He++)gr(It,Ht[Ie][He])}(st),st}function gr(xt,De){for(var ze=0;ze<De.length;ze+=3)xt.minX=Math.min(xt.minX,De[ze]),xt.minY=Math.min(xt.minY,De[ze+1]),xt.maxX=Math.max(xt.maxX,De[ze]),xt.maxY=Math.max(xt.maxY,De[ze+1])}function tr(xt,De,ze,at){if(De.geometry){var st=De.geometry.coordinates,It=De.geometry.type,Ht=Math.pow(ze.tolerance/((1<<ze.maxZoom)*ze.extent),2),Gt=[],Ie=De.id;if(ze.promoteId?Ie=De.properties[ze.promoteId]:ze.generateId&&(Ie=at||0),"Point"===It)qn(st,Gt);else if("MultiPoint"===It)for(var He=0;He<st.length;He++)qn(st[He],Gt);else if("LineString"===It)hn(st,Gt,Ht,!1);else if("MultiLineString"===It){if(ze.lineMetrics){for(He=0;He<st.length;He++)hn(st[He],Gt=[],Ht,!1),xt.push(Pi(Ie,"LineString",Gt,De.properties));return}Ui(st,Gt,Ht,!1)}else if("Polygon"===It)Ui(st,Gt,Ht,!0);else{if("MultiPolygon"!==It){if("GeometryCollection"===It){for(He=0;He<De.geometry.geometries.length;He++)tr(xt,{id:Ie,geometry:De.geometry.geometries[He],properties:De.properties},ze,at);return}throw new Error("Input data is not a valid GeoJSON object.")}for(He=0;He<st.length;He++){var Pe=[];Ui(st[He],Pe,Ht,!0),Gt.push(Pe)}}xt.push(Pi(Ie,It,Gt,De.properties))}}function qn(xt,De){De.push(cn(xt[0])),De.push(Vi(xt[1])),De.push(0)}function hn(xt,De,ze,at){for(var st,It,Ht=0,Gt=0;Gt<xt.length;Gt++){var Ie=cn(xt[Gt][0]),He=Vi(xt[Gt][1]);De.push(Ie),De.push(He),De.push(0),Gt>0&&(Ht+=at?(st*He-Ie*It)/2:Math.sqrt(Math.pow(Ie-st,2)+Math.pow(He-It,2))),st=Ie,It=He}var Pe=De.length-3;De[2]=1,Rn(De,0,Pe,ze),De[Pe+2]=1,De.size=Math.abs(Ht),De.start=0,De.end=De.size}function Ui(xt,De,ze,at){for(var st=0;st<xt.length;st++){var It=[];hn(xt[st],It,ze,at),De.push(It)}}function cn(xt){return xt/360+.5}function Vi(xt){var De=Math.sin(xt*Math.PI/180),ze=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return ze<0?0:ze>1?1:ze}function Oi(xt,De,ze,at,st,It,Ht,Gt){if(at/=De,It>=(ze/=De)&&Ht<at)return xt;if(Ht<ze||It>=at)return null;for(var Ie=[],He=0;He<xt.length;He++){var Pe=xt[He],bt=Pe.geometry,Mt=Pe.type,xi=0===st?Pe.minX:Pe.minY,Ke=0===st?Pe.maxX:Pe.maxY;if(xi>=ze&&Ke<at)Ie.push(Pe);else if(!(Ke<ze||xi>=at)){var ot=[];if("Point"===Mt||"MultiPoint"===Mt)Bn(bt,ot,ze,at,st);else if("LineString"===Mt)$i(bt,ot,ze,at,st,!1,Gt.lineMetrics);else if("MultiLineString"===Mt)un(bt,ot,ze,at,st,!1);else if("Polygon"===Mt)un(bt,ot,ze,at,st,!0);else if("MultiPolygon"===Mt)for(var Ue=0;Ue<bt.length;Ue++){var je=[];un(bt[Ue],je,ze,at,st,!0),je.length&&ot.push(je)}if(ot.length){if(Gt.lineMetrics&&"LineString"===Mt){for(Ue=0;Ue<ot.length;Ue++)Ie.push(Pi(Pe.id,Mt,ot[Ue],Pe.tags));continue}"LineString"!==Mt&&"MultiLineString"!==Mt||(1===ot.length?(Mt="LineString",ot=ot[0]):Mt="MultiLineString"),"Point"!==Mt&&"MultiPoint"!==Mt||(Mt=3===ot.length?"Point":"MultiPoint"),Ie.push(Pi(Pe.id,Mt,ot,Pe.tags))}}}return Ie.length?Ie:null}function Bn(xt,De,ze,at,st){for(var It=0;It<xt.length;It+=3){var Ht=xt[It+st];Ht>=ze&&Ht<=at&&(De.push(xt[It]),De.push(xt[It+1]),De.push(xt[It+2]))}}function $i(xt,De,ze,at,st,It,Ht){for(var Gt,Ie,He=gi(xt),Pe=0===st?Tr:kr,bt=xt.start,Mt=0;Mt<xt.length-3;Mt+=3){var xi=xt[Mt],Ke=xt[Mt+1],ot=xt[Mt+2],Ue=xt[Mt+3],je=xt[Mt+4],Le=0===st?xi:Ke,Fe=0===st?Ue:je,ht=!1;Ht&&(Gt=Math.sqrt(Math.pow(xi-Ue,2)+Math.pow(Ke-je,2))),Le<ze?Fe>ze&&(Ie=Pe(He,xi,Ke,Ue,je,ze),Ht&&(He.start=bt+Gt*Ie)):Le>at?Fe<at&&(Ie=Pe(He,xi,Ke,Ue,je,at),Ht&&(He.start=bt+Gt*Ie)):Mn(He,xi,Ke,ot),Fe<ze&&Le>=ze&&(Ie=Pe(He,xi,Ke,Ue,je,ze),ht=!0),Fe>at&&Le<=at&&(Ie=Pe(He,xi,Ke,Ue,je,at),ht=!0),!It&&ht&&(Ht&&(He.end=bt+Gt*Ie),De.push(He),He=gi(xt)),Ht&&(bt+=Gt)}var Rt=xt.length-3;xi=xt[Rt],Ke=xt[Rt+1],ot=xt[Rt+2],(Le=0===st?xi:Ke)>=ze&&Le<=at&&Mn(He,xi,Ke,ot),Rt=He.length-3,It&&Rt>=3&&(He[Rt]!==He[0]||He[Rt+1]!==He[1])&&Mn(He,He[0],He[1],He[2]),He.length&&De.push(He)}function gi(xt){var De=[];return De.size=xt.size,De.start=xt.start,De.end=xt.end,De}function un(xt,De,ze,at,st,It){for(var Ht=0;Ht<xt.length;Ht++)$i(xt[Ht],De,ze,at,st,It,!1)}function Mn(xt,De,ze,at){xt.push(De),xt.push(ze),xt.push(at)}function Tr(xt,De,ze,at,st,It){var Ht=(It-De)/(at-De);return xt.push(It),xt.push(ze+(st-ze)*Ht),xt.push(1),Ht}function kr(xt,De,ze,at,st,It){var Ht=(It-ze)/(st-ze);return xt.push(De+(at-De)*Ht),xt.push(It),xt.push(1),Ht}function xr(xt,De){for(var ze=[],at=0;at<xt.length;at++){var st,It=xt[at],Ht=It.type;if("Point"===Ht||"MultiPoint"===Ht||"LineString"===Ht)st=_r(It.geometry,De);else if("MultiLineString"===Ht||"Polygon"===Ht){st=[];for(var Gt=0;Gt<It.geometry.length;Gt++)st.push(_r(It.geometry[Gt],De))}else if("MultiPolygon"===Ht)for(st=[],Gt=0;Gt<It.geometry.length;Gt++){for(var Ie=[],He=0;He<It.geometry[Gt].length;He++)Ie.push(_r(It.geometry[Gt][He],De));st.push(Ie)}ze.push(Pi(It.id,Ht,st,It.tags))}return ze}function _r(xt,De){var ze=[];ze.size=xt.size,void 0!==xt.start&&(ze.start=xt.start,ze.end=xt.end);for(var at=0;at<xt.length;at+=3)ze.push(xt[at]+De,xt[at+1],xt[at+2]);return ze}function ir(xt,De){if(xt.transformed)return xt;var ze,at,st,It=1<<xt.z,Ht=xt.x,Gt=xt.y;for(ze=0;ze<xt.features.length;ze++){var Ie=xt.features[ze],He=Ie.geometry,Pe=Ie.type;if(Ie.geometry=[],1===Pe)for(at=0;at<He.length;at+=2)Ie.geometry.push(yn(He[at],He[at+1],De,It,Ht,Gt));else for(at=0;at<He.length;at++){var bt=[];for(st=0;st<He[at].length;st+=2)bt.push(yn(He[at][st],He[at][st+1],De,It,Ht,Gt));Ie.geometry.push(bt)}}return xt.transformed=!0,xt}function yn(xt,De,ze,at,st,It){return[Math.round(ze*(xt*at-st)),Math.round(ze*(De*at-It))]}function qr(xt,De,ze,at,st){for(var It=De===st.maxZoom?0:st.tolerance/((1<<De)*st.extent),Ht={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ze,y:at,z:De,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Gt=0;Gt<xt.length;Gt++){Ht.numFeatures++,Sr(Ht,xt[Gt],It,st);var Ie=xt[Gt].minX,He=xt[Gt].minY,Pe=xt[Gt].maxX,bt=xt[Gt].maxY;Ie<Ht.minX&&(Ht.minX=Ie),He<Ht.minY&&(Ht.minY=He),Pe>Ht.maxX&&(Ht.maxX=Pe),bt>Ht.maxY&&(Ht.maxY=bt)}return Ht}function Sr(xt,De,ze,at){var st=De.geometry,It=De.type,Ht=[];if("Point"===It||"MultiPoint"===It)for(var Gt=0;Gt<st.length;Gt+=3)Ht.push(st[Gt]),Ht.push(st[Gt+1]),xt.numPoints++,xt.numSimplified++;else if("LineString"===It)ys(Ht,st,xt,ze,!1,!1);else if("MultiLineString"===It||"Polygon"===It)for(Gt=0;Gt<st.length;Gt++)ys(Ht,st[Gt],xt,ze,"Polygon"===It,0===Gt);else if("MultiPolygon"===It)for(var Ie=0;Ie<st.length;Ie++){var He=st[Ie];for(Gt=0;Gt<He.length;Gt++)ys(Ht,He[Gt],xt,ze,!0,0===Gt)}if(Ht.length){var Pe=De.tags||null;if("LineString"===It&&at.lineMetrics){for(var bt in Pe={},De.tags)Pe[bt]=De.tags[bt];Pe.mapbox_clip_start=st.start/st.size,Pe.mapbox_clip_end=st.end/st.size}var Mt={geometry:Ht,type:"Polygon"===It||"MultiPolygon"===It?3:"LineString"===It||"MultiLineString"===It?2:1,tags:Pe};null!==De.id&&(Mt.id=De.id),xt.features.push(Mt)}}function ys(xt,De,ze,at,st,It){var Ht=at*at;if(at>0&&De.size<(st?Ht:at))ze.numPoints+=De.length/3;else{for(var Gt=[],Ie=0;Ie<De.length;Ie+=3)(0===at||De[Ie+2]>Ht)&&(ze.numSimplified++,Gt.push(De[Ie]),Gt.push(De[Ie+1])),ze.numPoints++;st&&function(He,Pe){for(var bt=0,Mt=0,xi=He.length,Ke=xi-2;Mt<xi;Ke=Mt,Mt+=2)bt+=(He[Mt]-He[Ke])*(He[Mt+1]+He[Ke+1]);if(bt>0===Pe)for(Mt=0,xi=He.length;Mt<xi/2;Mt+=2){var ot=He[Mt],Ue=He[Mt+1];He[Mt]=He[xi-2-Mt],He[Mt+1]=He[xi-1-Mt],He[xi-2-Mt]=ot,He[xi-1-Mt]=Ue}}(Gt,It),xt.push(Gt)}}function Kn(xt,De){var ze=(De=this.options=function(st,It){for(var Ht in It)st[Ht]=It[Ht];return st}(Object.create(this.options),De)).debug;if(ze&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");var st,It,Ht,Gt,Ie,He,at=function(st,It){var Ht=[];if("FeatureCollection"===st.type)for(var Gt=0;Gt<st.features.length;Gt++)tr(Ht,st.features[Gt],It,Gt);else tr(Ht,"Feature"===st.type?st:{geometry:st},It);return Ht}(xt,De);this.tiles={},this.tileCoords=[],ze&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Gt=st=at,Ie=Oi(st,1,-1-(Ht=(It=De).buffer/It.extent),Ht,0,-1,2,It),He=Oi(st,1,1-Ht,2+Ht,0,-1,2,It),(Ie||He)&&(Gt=Oi(st,1,-Ht,1+Ht,0,-1,2,It)||[],Ie&&(Gt=xr(Ie,1).concat(Gt)),He&&(Gt=Gt.concat(xr(He,-1)))),(at=Gt).length&&this.splitTile(at,0,0,0),ze&&(at.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function fr(xt,De,ze){return 32*((1<<xt)*ze+De)+xt}function sr(xt,De){const ze=xt.tileID.canonical;if(!this._geoJSONIndex)return De(null,null);const at=this._geoJSONIndex.getTile(ze.z,ze.x,ze.y);if(!at)return De(null,null);const st=new class{constructor(Ht){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Ht.length,this._features=Ht}feature(Ht){return new class{constructor(Gt){this._feature=Gt,this.extent=e.EXTENT,this.type=Gt.type,this.properties=Gt.tags,"id"in Gt&&!isNaN(Gt.id)&&(this.id=parseInt(Gt.id,10))}loadGeometry(){if(1===this._feature.type){const Gt=[];for(const Ie of this._feature.geometry)Gt.push([new e.Point(Ie[0],Ie[1])]);return Gt}{const Gt=[];for(const Ie of this._feature.geometry){const He=[];for(const Pe of Ie)He.push(new e.Point(Pe[0],Pe[1]));Gt.push(He)}return Gt}}toGeoJSON(Gt,Ie,He){return et.call(this,Gt,Ie,He)}}(this._features[Ht])}}(at.features);let It=ri(st);0===It.byteOffset&&It.byteLength===It.buffer.byteLength||(It=new Uint8Array(It)),De(null,{vectorTile:st,rawData:It.buffer})}Kn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Kn.prototype.splitTile=function(xt,De,ze,at,st,It,Ht){for(var Gt=[xt,De,ze,at],Ie=this.options,He=Ie.debug;Gt.length;){at=Gt.pop(),ze=Gt.pop(),De=Gt.pop(),xt=Gt.pop();var Pe=1<<De,bt=fr(De,ze,at),Mt=this.tiles[bt];if(!Mt&&(He>1&&console.time("creation"),Mt=this.tiles[bt]=qr(xt,De,ze,at,Ie),this.tileCoords.push({z:De,x:ze,y:at}),He)){He>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,ze,at,Mt.numFeatures,Mt.numPoints,Mt.numSimplified),console.timeEnd("creation"));var xi="z"+De;this.stats[xi]=(this.stats[xi]||0)+1,this.total++}if(Mt.source=xt,st){if(De===Ie.maxZoom||De===st)continue;var Ke=1<<st-De;if(ze!==Math.floor(It/Ke)||at!==Math.floor(Ht/Ke))continue}else if(De===Ie.indexMaxZoom||Mt.numPoints<=Ie.indexMaxPoints)continue;if(Mt.source=null,0!==xt.length){He>1&&console.time("clipping");var ot,Ue,je,Le,Fe,ht,Rt=.5*Ie.buffer/Ie.extent,pi=.5-Rt,si=.5+Rt,Si=1+Rt;ot=Ue=je=Le=null,Fe=Oi(xt,Pe,ze-Rt,ze+si,0,Mt.minX,Mt.maxX,Ie),ht=Oi(xt,Pe,ze+pi,ze+Si,0,Mt.minX,Mt.maxX,Ie),xt=null,Fe&&(ot=Oi(Fe,Pe,at-Rt,at+si,1,Mt.minY,Mt.maxY,Ie),Ue=Oi(Fe,Pe,at+pi,at+Si,1,Mt.minY,Mt.maxY,Ie),Fe=null),ht&&(je=Oi(ht,Pe,at-Rt,at+si,1,Mt.minY,Mt.maxY,Ie),Le=Oi(ht,Pe,at+pi,at+Si,1,Mt.minY,Mt.maxY,Ie),ht=null),He>1&&console.timeEnd("clipping"),Gt.push(ot||[],De+1,2*ze,2*at),Gt.push(Ue||[],De+1,2*ze,2*at+1),Gt.push(je||[],De+1,2*ze+1,2*at),Gt.push(Le||[],De+1,2*ze+1,2*at+1)}}},Kn.prototype.getTile=function(xt,De,ze){var at=this.options,st=at.extent,It=at.debug;if(xt<0||xt>24)return null;var Ht=1<<xt,Gt=fr(xt,De=(De%Ht+Ht)%Ht,ze);if(this.tiles[Gt])return ir(this.tiles[Gt],st);It>1&&console.log("drilling down to z%d-%d-%d",xt,De,ze);for(var Ie,He=xt,Pe=De,bt=ze;!Ie&&He>0;)He--,Pe=Math.floor(Pe/2),bt=Math.floor(bt/2),Ie=this.tiles[fr(He,Pe,bt)];return Ie&&Ie.source?(It>1&&console.log("found parent tile z%d-%d-%d",He,Pe,bt),It>1&&console.time("drilling down"),this.splitTile(Ie.source,He,Pe,bt,xt,De,ze),It>1&&console.timeEnd("drilling down"),this.tiles[Gt]?ir(this.tiles[Gt],st):null):null};class vr extends e.VectorTileWorkerSource{constructor(De,ze,at,st,It){super(De,ze,at,st,sr),It&&(this.loadGeoJSON=It)}loadData(De,ze){const at=De&&De.request,st=at&&at.collectResourceTiming;this.loadGeoJSON(De,(It,Ht)=>{if(It||!Ht)return ze(It);if("object"!=typeof Ht)return ze(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`));{Xe(Ht,!0);try{if(De.filter){const Ie=e.createExpression(De.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ie.result)throw new Error(Ie.value.map(Pe=>`${Pe.key}: ${Pe.message}`).join(", "));Ht={type:"FeatureCollection",features:Ht.features.filter(Pe=>Ie.value.evaluate({zoom:0},Pe))}}this._geoJSONIndex=De.cluster?new ln(function({superclusterOptions:Ie,clusterProperties:He}){if(!He||!Ie)return Ie;const Pe={},bt={},Mt={accumulated:null,zoom:0},xi={properties:null},Ke=Object.keys(He);for(const ot of Ke){const[Ue,je]=He[ot],Le=e.createExpression(je),Fe=e.createExpression("string"==typeof Ue?[Ue,["accumulated"],["get",ot]]:Ue);Pe[ot]=Le.value,bt[ot]=Fe.value}return Ie.map=ot=>{xi.properties=ot;const Ue={};for(const je of Ke)Ue[je]=Pe[je].evaluate(Mt,xi);return Ue},Ie.reduce=(ot,Ue)=>{xi.properties=Ue;for(const je of Ke)Mt.accumulated=ot[je],ot[je]=bt[je].evaluate(Mt,xi)},Ie}(De)).load(Ht.features):new Kn(Ie=Ht,De.geojsonVtOptions)}catch(Ie){return ze(Ie)}this.loaded={};const Gt={};if(st){const Ie=e.getPerformanceMeasurement(at);Ie&&(Gt.resourceTiming={},Gt.resourceTiming[De.source]=JSON.parse(JSON.stringify(Ie)))}ze(null,Gt)}var Ie})}reloadTile(De,ze){const at=this.loaded;return at&&at[De.uid]?super.reloadTile(De,ze):this.loadTile(De,ze)}loadGeoJSON(De,ze){if(De.request)e.getJSON(De.request,ze);else{if("string"!=typeof De.data)return ze(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`));try{return ze(null,JSON.parse(De.data))}catch{return ze(new Error(`Input data given to '${De.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(De,ze){try{ze(null,this._geoJSONIndex.getClusterExpansionZoom(De.clusterId))}catch(at){ze(at)}}getClusterChildren(De,ze){try{ze(null,this._geoJSONIndex.getChildren(De.clusterId))}catch(at){ze(at)}}getClusterLeaves(De,ze){try{ze(null,this._geoJSONIndex.getLeaves(De.clusterId,De.limit,De.offset))}catch(at){ze(at)}}}class Yr{constructor(De){this.self=De,this.actor=new e.Actor(De,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:vr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ze,at)=>{if(this.workerSourceTypes[ze])throw new Error(`Worker source with name "${ze}" already registered.`);this.workerSourceTypes[ze]=at},this.self.registerRTLTextPlugin=ze=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ze.applyArabicShaping,e.plugin.processBidirectionalText=ze.processBidirectionalText,e.plugin.processStyledBidirectionalText=ze.processStyledBidirectionalText}}clearCaches(De,ze,at){delete this.layerIndexes[De],delete this.availableImages[De],delete this.workerSources[De],delete this.demWorkerSources[De],at()}checkIfReady(De,ze,at){at()}setReferrer(De,ze){this.referrer=ze}spriteLoaded(De,ze){this.isSpriteLoaded[De]=ze;for(const at in this.workerSources[De]){const st=this.workerSources[De][at];for(const It in st)st[It]instanceof e.VectorTileWorkerSource&&(st[It].isSpriteLoaded=ze,st[It].fire(new e.Event("isSpriteLoaded")))}}setImages(De,ze,at){this.availableImages[De]=ze;for(const st in this.workerSources[De]){const It=this.workerSources[De][st];for(const Ht in It)It[Ht].availableImages=ze}at()}enableTerrain(De,ze,at){this.terrain=ze,at()}setProjection(De,ze){this.projections[De]=e.getProjection(ze)}setLayers(De,ze,at){this.getLayerIndex(De).replace(ze),at()}updateLayers(De,ze,at){this.getLayerIndex(De).update(ze.layers,ze.removedIds),at()}loadTile(De,ze,at){const st=this.enableTerrain?e.extend({enableTerrain:this.terrain},ze):ze;st.projection=this.projections[De]||this.defaultProjection,this.getWorkerSource(De,ze.type,ze.source).loadTile(st,at)}loadDEMTile(De,ze,at){const st=this.enableTerrain?e.extend({buildQuadTree:this.terrain},ze):ze;this.getDEMWorkerSource(De,ze.source).loadTile(st,at)}reloadTile(De,ze,at){const st=this.enableTerrain?e.extend({enableTerrain:this.terrain},ze):ze;st.projection=this.projections[De]||this.defaultProjection,this.getWorkerSource(De,ze.type,ze.source).reloadTile(st,at)}abortTile(De,ze,at){this.getWorkerSource(De,ze.type,ze.source).abortTile(ze,at)}removeTile(De,ze,at){this.getWorkerSource(De,ze.type,ze.source).removeTile(ze,at)}removeSource(De,ze,at){if(!this.workerSources[De]||!this.workerSources[De][ze.type]||!this.workerSources[De][ze.type][ze.source])return;const st=this.workerSources[De][ze.type][ze.source];delete this.workerSources[De][ze.type][ze.source],void 0!==st.removeSource?st.removeSource(ze,at):at()}loadWorkerSource(De,ze,at){try{this.self.importScripts(ze.url),at()}catch(st){at(st.toString())}}syncRTLPluginState(De,ze,at){try{e.plugin.setState(ze);const st=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=st){this.self.importScripts(st);const It=e.plugin.isParsed();at(It?void 0:new Error(`RTL Text Plugin failed to import scripts from ${st}`),It)}}catch(st){at(st.toString())}}getAvailableImages(De){let ze=this.availableImages[De];return ze||(ze=[]),ze}getLayerIndex(De){let ze=this.layerIndexes[De];return ze||(ze=this.layerIndexes[De]=new ke),ze}getWorkerSource(De,ze,at){return this.workerSources[De]||(this.workerSources[De]={}),this.workerSources[De][ze]||(this.workerSources[De][ze]={}),this.workerSources[De][ze][at]||(this.workerSources[De][ze][at]=new this.workerSourceTypes[ze]({send:(It,Ht,Gt,Ie,He,Pe)=>{this.actor.send(It,Ht,Gt,De,He,Pe)},scheduler:this.actor.scheduler},this.getLayerIndex(De),this.getAvailableImages(De),this.isSpriteLoaded[De])),this.workerSources[De][ze][at]}getDEMWorkerSource(De,ze){return this.demWorkerSources[De]||(this.demWorkerSources[De]={}),this.demWorkerSources[De][ze]||(this.demWorkerSources[De][ze]=new Ee),this.demWorkerSources[De][ze]}enforceCacheSizeLimit(De,ze){e.enforceCacheSizeLimit(ze)}getWorkerPerformanceMetrics(De,ze,at){at(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Yr(self)),Yr}),sn(0,function(e){function Y(b,a){if(Array.isArray(b)){if(!Array.isArray(a)||b.length!==a.length)return!1;for(let p=0;p<b.length;p++)if(!Y(b[p],a[p]))return!1;return!0}if("object"==typeof b&&null!==b&&null!==a){if("object"!=typeof a||Object.keys(b).length!==Object.keys(a).length)return!1;for(const p in b)if(!Y(b[p],a[p]))return!1;return!0}return b===a}var Ae=ke;function ke(b){return a=b,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,I,z=new Blob([""],{type:"text/javascript"}),$=URL.createObjectURL(z);try{I=new Worker($),T=!0}catch{T=!1}return I&&I.terminate(),URL.revokeObjectURL($),T}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var T=document.createElement("canvas");T.width=T.height=1;var I=T.getContext("2d");if(!I)return!1;var z=I.getImageData(0,0,1,1);return z&&z.width===T.width}()||(void 0===Ee[p=a&&a.failIfMajorPerformanceCaveat]&&(Ee[p]=function(T){var I,$,Z,Q,z=($=T,Z=document.createElement("canvas"),(Q=Object.create(ke.webGLContextAttributes)).failIfMajorPerformanceCaveat=$,Z.getContext("webgl",Q)||Z.getContext("experimental-webgl",Q));if(!z)return!1;try{I=z.createShader(z.VERTEX_SHADER)}catch{return!1}return!(!I||z.isContextLost())&&(z.shaderSource(I,"void main() {}"),z.compileShader(I),!0===z.getShaderParameter(I,z.COMPILE_STATUS))}(p)),!Ee[p]||document.documentMode));var a,p}var Ee={};function Oe(b,a,p){const T=e.window.document.createElement(b);return void 0!==a&&(T.className=a),p&&p.appendChild(T),T}function Ye(b,a,p){const T=e.window.document.createElementNS("http://www.w3.org/2000/svg",b);for(const I of Object.keys(a))T.setAttributeNS(null,I,a[I]);return p&&p.appendChild(T),T}ke.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Xe=e.window.document&&e.window.document.documentElement.style,et=Xe&&void 0!==Xe.userSelect?"userSelect":"WebkitUserSelect";let dt;function St(){Xe&&et&&(dt=Xe[et],Xe[et]="none")}function it(){Xe&&et&&(Xe[et]=dt)}function pt(b){b.preventDefault(),b.stopPropagation(),e.window.removeEventListener("click",pt,!0)}function yt(){e.window.addEventListener("click",pt,!0),e.window.setTimeout(()=>{e.window.removeEventListener("click",pt,!0)},0)}function Qt(b,a){const p=b.getBoundingClientRect();return ei(b,p,a)}function Ve(b,a){const p=b.getBoundingClientRect(),T=[];for(let I=0;I<a.length;I++)T.push(ei(b,p,a[I]));return T}function Zt(b){return void 0!==e.window.InstallTrigger&&2===b.button&&b.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:b.button}function ei(b,a,p){const T=b.offsetWidth===a.width?1:b.offsetWidth/a.width;return new e.Point((p.clientX-a.left)*T,(p.clientY-a.top)*T)}function rt(b,a){var p=a[0],T=a[1],I=a[2],z=a[3],$=p*z-I*T;return $?(b[0]=z*($=1/$),b[1]=-T*$,b[2]=-I*$,b[3]=p*$,b):null}function Kt(b){const{userImage:a}=b;return!!(a&&a.render&&a.render())&&(b.data.replace(new Uint8Array(a.data.buffer)),!0)}class Yt extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:p,callback:T}of this.requestors)this._notify(p,T);this.requestors=[]}}hasImage(a){return!!this.getImage(a)}getImage(a){return this.images[a]}addImage(a,p){this._validate(a,p)&&(this.images[a]=p)}_validate(a,p){let T=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${a}" has invalid "stretchX" value`))),T=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${a}" has invalid "stretchY" value`))),T=!1),this._validateContent(p.content,p)||(this.fire(new e.ErrorEvent(new Error(`Image "${a}" has invalid "content" value`))),T=!1),T}_validateStretch(a,p){if(!a)return!0;let T=0;for(const I of a){if(I[0]<T||I[1]<I[0]||p<I[1])return!1;T=I[1]}return!0}_validateContent(a,p){return!(a&&(4!==a.length||a[0]<0||p.data.width<a[0]||a[1]<0||p.data.height<a[1]||a[2]<0||p.data.width<a[2]||a[3]<0||p.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))}updateImage(a,p){p.version=this.images[a].version+1,this.images[a]=p,this.updatedImages[a]=!0}removeImage(a){const p=this.images[a];delete this.images[a],delete this.patterns[a],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,p){let T=!0;if(!this.isLoaded())for(const I of a)this.images[I]||(T=!1);this.isLoaded()||T?this._notify(a,p):this.requestors.push({ids:a,callback:p})}_notify(a,p){const T={};for(const I of a){this.images[I]||this.fire(new e.Event("styleimagemissing",{id:I}));const z=this.images[I];z?T[I]={data:z.data.clone(),pixelRatio:z.pixelRatio,sdf:z.sdf,version:z.version,stretchX:z.stretchX,stretchY:z.stretchY,content:z.content,hasRenderCallback:!(!z.userImage||!z.userImage.render)}:e.warnOnce(`Image "${I}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,T)}getPixelSize(){const{width:a,height:p}=this.atlasImage;return{width:a,height:p}}getPattern(a){const p=this.patterns[a],T=this.getImage(a);if(!T)return null;if(p&&p.position.version===T.version)return p.position;if(p)p.position.version=T.version;else{const I={w:T.data.width+2,h:T.data.height+2,x:0,y:0},z=new e.ImagePosition(I,T);this.patterns[a]={bin:I,position:z}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const p=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(a,this.atlasImage,p.RGBA),this.atlasTexture&&this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const z in this.patterns)a.push(this.patterns[z].bin);const{w:p,h:T}=e.potpack(a),I=this.atlasImage;I.resize({width:p||1,height:T||1});for(const z in this.patterns){const{bin:$}=this.patterns[z],Z=$.x+1,Q=$.y+1,le=this.images[z].data,oe=le.width,ye=le.height;e.RGBAImage.copy(le,I,{x:0,y:0},{x:Z,y:Q},{width:oe,height:ye}),e.RGBAImage.copy(le,I,{x:0,y:ye-1},{x:Z,y:Q-1},{width:oe,height:1}),e.RGBAImage.copy(le,I,{x:0,y:0},{x:Z,y:Q+ye},{width:oe,height:1}),e.RGBAImage.copy(le,I,{x:oe-1,y:0},{x:Z-1,y:Q},{width:1,height:ye}),e.RGBAImage.copy(le,I,{x:0,y:0},{x:Z+oe,y:Q},{width:1,height:ye})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const p of a){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const T=this.images[p];Kt(T)&&this.updateImage(p,T)}}}const Nt=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(b,a){return function([p,T,I]){const z=e.degToRad(T+90),$=e.degToRad(I);return{x:p*Math.cos(z)*Math.sin($),y:p*Math.sin(z)*Math.sin($),z:p*Math.cos($),azimuthal:T,polar:I}}(b.expression.evaluate(a))}interpolate(b,a,p){return{x:e.number(b.x,a.x,p),y:e.number(b.y,a.y,p),z:e.number(b.z,a.z,p),azimuthal:e.number(b.azimuthal,a.azimuthal,p),polar:e.number(b.polar,a.polar,p)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class ct extends e.Evented{constructor(a){super(),this._transitionable=new e.Transitionable(Nt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,p={}){if(!this._validate(e.validateLight,a,p))for(const T in a){const I=a[T];e.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),I):this._transitionable.setValue(T,I)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,p,T){return(!T||!1!==T.validate)&&e.emitValidationErrors(this,a.call(e.validateStyle,e.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const Vt=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let qt=class extends e.Evented{constructor(b,a){super(),this._transitionable=new e.Transitionable(Vt),this.set(b),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(b){for(const a in b){const p=b[a];e.endsWith(a,"-transition")?this._transitionable.setTransition(a.slice(0,-11),p):this._transitionable.setValue(a,p)}}updateTransitions(b){this._transitioning=this._transitionable.transitioned(b,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(b){this.properties=this._transitioning.possiblyEvaluate(b)}};function ri(b,a,p,T){const I=e.smoothstep(45,65,p),[z,$]=Li(b,T),Z=e.length(a);let Q=1-Math.min(1,Math.exp((Z-z)/($-z)*-6));return Q*=Q*Q,Q=Math.min(1,1.00747*Q),Q*I*b.alpha}function Li(b,a){const p=.5/Math.tan(.5*a);return[b.range[0]+p,b.range[1]+p]}const ai=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class fi extends e.Evented{constructor(a,p){super(),this._transitionable=new e.Transitionable(ai),this.set(a),this._transitioning=this._transitionable.untransitioned(),this._transform=p}get state(){const a=this._transform,p="globe"===a.projection.name,T=e.globeToMercatorTransition(a.zoom),I=this.properties.get("range"),z=[.5,3];return{range:p?[e.number(z[0],I[0],T),e.number(z[1],I[1],T)]:I,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,p={}){if(!this._validate(e.validateFog,a,p)){for(const T of Object.keys(e.spec.fog))a&&void 0===a[T]&&(a[T]=e.spec.fog[T].default);for(const T in a){const I=a[T];e.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),I):this._transitionable.setValue(T,I)}}}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const p=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,a))*p.a}getOpacityAtLatLng(a,p){return this._transform.projection.supportsFog?function(T,I,z){const $=e.MercatorCoordinate.fromLngLat(I),Z=z.elevation?z.elevation.getAtPointOrZero($):0,Q=[$.x,$.y,Z];return e.transformMat4(Q,Q,z.mercatorFogMatrix),ri(T,Q,z.pitch,z._fov)}(this.state,a,p):0}getFovAdjustedRange(a){return this._transform.projection.supportsFog?Li(this.state,a):[0,1]}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,p,T){return(!T||!1!==T.validate)&&e.emitValidationErrors(this,a.call(e.validateStyle,e.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class Mi{constructor(a,p){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const T=this.workerPool.acquire(this.id);for(let I=0;I<T.length;I++){const z=new Mi.Actor(T[I],p,this.id);z.name=`Worker ${I}`,this.actors.push(z)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(a,p,T){e.asyncAll(this.actors,(I,z)=>{I.send(a,p,z)},T=T||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(a=>{a.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Yi(b,a,p){return a*(e.EXTENT/(b.tileSize*Math.pow(2,p-b.tileID.overscaledZ)))}Mi.Actor=e.Actor;class mn{constructor(a,p,T,I){this.screenBounds=a,this.cameraPoint=p,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=T,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,I)}static createFromScreenPoints(a,p){let T,I;if(a instanceof e.Point||"number"==typeof a[0]){const z=e.Point.convert(a);T=[z],I=p.isPointAboveHorizon(z)}else{const z=e.Point.convert(a[0]),$=e.Point.convert(a[1]);T=[z,$],I=e.polygonizeBounds(z,$).every(Z=>p.isPointAboveHorizon(Z))}return new mn(T,p.getCameraPoint(),I,p)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(a){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const p=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],I=e.polygonizeBounds(p,T,0,!1);return this.cameraPoint.y>T.y&&(this.cameraPoint.x>p.x&&this.cameraPoint.x<T.x?I.splice(3,0,this.cameraPoint):this.cameraPoint.x>=T.x?I[2]=this.cameraPoint:this.cameraPoint.x<=p.x&&(I[3]=this.cameraPoint)),e.bufferConvexPolygon(I,a)}bufferedCameraGeometryGlobe(a){const p=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],I=e.polygonizeBounds(p,T,a),z=this.cameraPoint.clone();switch(3*((z.y>p.y)+(z.y>T.y))+((z.x>p.x)+(z.x>T.x))){case 0:I[0]=z,I[4]=z.clone();break;case 1:I.splice(1,0,z);break;case 2:I[1]=z;break;case 3:I.splice(4,0,z);break;case 5:I.splice(2,0,z);break;case 6:I[3]=z;break;case 7:I.splice(3,0,z);break;case 8:I[2]=z}return I}containsTile(a,p,T,I=0){const z=a.queryPadding/p._pixelsPerMercatorPixel+1,$=T?this._bufferedCameraMercator(z,p):this._bufferedScreenMercator(z,p);let Z=a.tileID.wrap+($.unwrapped?I:0);const Q=$.polygon.map(nt=>e.getTilePoint(a.tileTransform,nt,Z));if(!e.polygonIntersectsBox(Q,0,0,e.EXTENT,e.EXTENT))return;Z=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?I:0);const le=this.screenGeometryMercator.polygon.map(nt=>e.getTileVec3(a.tileTransform,nt,Z)),oe=le.map(nt=>new e.Point(nt[0],nt[1])),ye=p.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),Be=e.getTileVec3(a.tileTransform,ye,Z),Ze=le.map(nt=>{const we=e.sub(nt,nt,Be);return e.normalize(we,we),new e.Ray(Be,we)}),qe=Yi(a,1,p.zoom)*p._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:oe,tilespaceRays:Ze,bufferedTilespaceGeometry:Q,bufferedTilespaceBounds:(Je=e.getBounds(Q),Je.min.x=e.clamp(Je.min.x,0,e.EXTENT),Je.min.y=e.clamp(Je.min.y,0,e.EXTENT),Je.max.x=e.clamp(Je.max.x,0,e.EXTENT),Je.max.y=e.clamp(Je.max.y,0,e.EXTENT),Je),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:qe};var Je}_bufferedScreenMercator(a,p){const T=jt(a);if(this._screenRaycastCache[T])return this._screenRaycastCache[T];{let I;return I="globe"===p.projection.name?this._projectAndResample(this.bufferedScreenGeometry(a),p):{polygon:this.bufferedScreenGeometry(a).map(z=>p.pointCoordinate3D(z)),unwrapped:!0},this._screenRaycastCache[T]=I,I}}_bufferedCameraMercator(a,p){const T=jt(a);if(this._cameraRaycastCache[T])return this._cameraRaycastCache[T];{let I;return I="globe"===p.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),p):{polygon:this.bufferedCameraGeometry(a).map(z=>p.pointCoordinate3D(z)),unwrapped:!0},this._cameraRaycastCache[T]=I,I}}_projectAndResample(a,p){const T=function(z,$){const Z=e.multiply([],$.pixelMatrix,$.globeMatrix),Q=[0,-e.GLOBE_RADIUS,0,1],le=[0,e.GLOBE_RADIUS,0,1],oe=[0,0,0,1];e.transformMat4$1(Q,Q,Z),e.transformMat4$1(le,le,Z),e.transformMat4$1(oe,oe,Z);const ye=new e.Point(Q[0]/Q[3],Q[1]/Q[3]),Be=new e.Point(le[0]/le[3],le[1]/le[3]),Ze=e.polygonContainsPoint(z,ye)&&Q[3]<oe[3],qe=e.polygonContainsPoint(z,Be)&&le[3]<oe[3];if(!Ze&&!qe)return null;const Je=function(Ft,$t,Ut){for(let li=1;li<Ft.length;li++){const Gi=zn($t.pointCoordinate3D(Ft[li-1]).x),ti=zn($t.pointCoordinate3D(Ft[li]).x);if(Ut<0){if(Gi<ti)return{idx:li,t:-Gi/(ti-1-Gi)}}else if(ti<Gi)return{idx:li,t:(1-Gi)/(ti+1-Gi)}}return null}(z,$,Ze?-1:1);if(!Je)return null;const{idx:nt,t:we}=Je;let We=nt>1?ln(z.slice(0,nt),$):[],gt=nt<z.length?ln(z.slice(nt),$):[];We=We.map(Ft=>new e.Point(zn(Ft.x),Ft.y)),gt=gt.map(Ft=>new e.Point(zn(Ft.x),Ft.y));const vt=[...We];0===vt.length&&vt.push(gt[gt.length-1]);const zt=e.number(vt[vt.length-1].y,(0===gt.length?We[0]:gt[0]).y,we);let Bt;return Bt=Ze?[new e.Point(0,zt),new e.Point(0,0),new e.Point(1,0),new e.Point(1,zt)]:[new e.Point(1,zt),new e.Point(1,1),new e.Point(0,1),new e.Point(0,zt)],vt.push(...Bt),0===gt.length?vt.push(We[0]):vt.push(...gt),{polygon:vt.map(Ft=>new e.MercatorCoordinate(Ft.x,Ft.y)),unwrapped:!1}}(a,p);if(T)return T;const I=function(z,$){let Z=!1,Q=-1/0,le=0;for(let ye=0;ye<z.length-1;ye++)z[ye].x>Q&&(Q=z[ye].x,le=ye);for(let ye=0;ye<z.length-1;ye++){const Be=(le+ye)%(z.length-1),Ze=z[Be],qe=z[Be+1];Math.abs(Ze.x-qe.x)>.5&&(Ze.x<qe.x?(Ze.x+=1,0===Be&&(z[z.length-1].x+=1)):(qe.x+=1,Be+1===z.length-1&&(z[0].x+=1)),Z=!0)}const oe=e.mercatorXfromLng($.center.lng);return Z&&oe<Math.abs(oe-1)&&z.forEach(ye=>{ye.x-=1}),{polygon:z,unwrapped:Z}}(ln(a,p).map(z=>new e.Point(zn(z.x),z.y)),p);return{polygon:I.polygon.map(z=>new e.MercatorCoordinate(z.x,z.y)),unwrapped:I.unwrapped}}}function ln(b,a){return e.resample(b,p=>{const T=a.pointCoordinate3D(p);p.x=T.x,p.y=T.y},1/256)}function zn(b){return b<0?1+b%1:b%1}function jt(b){return 100*b|0}function Di(b,a,p,T,I){const z=function($,Z){if($)return I($);if(Z){b.url&&Z.tiles&&b.tiles&&delete b.tiles;const Q=e.pick(e.extend(Z,b),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Z.vector_layers&&(Q.vectorLayers=Z.vector_layers,Q.vectorLayerIds=Q.vectorLayers.map(le=>le.id)),Q.tiles=a.canonicalizeTileset(Q,b.url),I(null,Q)}};return b.url?e.getJSON(a.transformRequest(a.normalizeSourceURL(b.url,null,p,T),e.ResourceType.Source),z):e.exported.frame(()=>z(null,b))}class qi{constructor(a,p,T){this.bounds=e.LngLatBounds.convert(this.validateBounds(a)),this.minzoom=p||0,this.maxzoom=T||24}validateBounds(a){return Array.isArray(a)&&4===a.length?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const p=Math.pow(2,a.z),T=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*p),I=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*p),z=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*p),$=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*p);return a.x>=T&&a.x<z&&a.y>=I&&a.y<$}}class Hn{constructor(a,p,T){this.context=a;const I=a.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xn{constructor(a,p,T,I){this.length=p.length,this.attributes=T,this.itemSize=p.bytesPerElement,this.dynamicDraw=I,this.context=a;const z=a.gl;this.buffer=z.createBuffer(),a.bindVertexBuffer.set(this.buffer),z.bufferData(z.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,p){for(let T=0;T<this.attributes.length;T++){const I=p.attributes[this.attributes[T].name];void 0!==I&&a.enableVertexAttribArray(I)}}setVertexAttribPointers(a,p,T){for(let I=0;I<this.attributes.length;I++){const z=this.attributes[I],$=p.attributes[z.name];void 0!==$&&a.vertexAttribPointer($,z.components,a[Rn[z.type]],!1,this.itemSize,z.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pi{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gr extends Pi{getDefault(){return e.Color.transparent}set(a){const p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class tr extends Pi{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class qn extends Pi{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class hn extends Pi{getDefault(){return[!0,!0,!0,!0]}set(a){const p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ui extends Pi{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class cn extends Pi{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Vi extends Pi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const p=this.current;(a.func!==p.func||a.ref!==p.ref||a.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Oi extends Pi{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Bn extends Pi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;a?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=a,this.dirty=!1}}class $i extends Pi{getDefault(){return[0,1]}set(a){const p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class gi extends Pi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;a?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=a,this.dirty=!1}}class un extends Pi{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Mn extends Pi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;a?p.enable(p.BLEND):p.disable(p.BLEND),this.current=a,this.dirty=!1}}class Tr extends Pi{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const p=this.current;(a[0]!==p[0]||a[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class kr extends Pi{getDefault(){return e.Color.transparent}set(a){const p=this.current;(a.r!==p.r||a.g!==p.g||a.b!==p.b||a.a!==p.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class xr extends Pi{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class _r extends Pi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;a?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=a,this.dirty=!1}}class ir extends Pi{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class yn extends Pi{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let qr,Sr=class extends Pi{getDefault(){return null}set(b){(b!==this.current||this.dirty)&&(this.gl.useProgram(b),this.current=b,this.dirty=!1)}};class ys extends Pi{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Kn extends Pi{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const p=this.current;(a[0]!==p[0]||a[1]!==p[1]||a[2]!==p[2]||a[3]!==p[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class fr extends Pi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class sr extends Pi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class vr extends Pi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Yr extends Pi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class xt extends Pi{getDefault(){return null}set(a){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class De extends Pi{constructor(a){super(a),this.vao=a.extVertexArrayObject}getDefault(){return null}set(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)}}class ze extends Pi{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class at extends Pi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class st extends Pi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class It extends Pi{constructor(a,p){super(a),this.context=a,this.parent=p}getDefault(){return null}}class Ht extends It{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Gt extends It{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,this.attachment(),p.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Ie extends Gt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class He{constructor(a,p,T,I){this.context=a,this.width=p,this.height=T;const z=this.framebuffer=a.gl.createFramebuffer();this.colorAttachment=new Ht(a,z),I&&(this.depthAttachment=new Gt(a,z))}destroy(){const a=this.context.gl,p=this.colorAttachment.get();if(p&&a.deleteTexture(p),this.depthAttachment){const T=this.depthAttachment.get();T&&a.deleteRenderbuffer(T)}a.deleteFramebuffer(this.framebuffer)}}class Pe{constructor(a,p=!1){if(this.gl=a,this.isWebGL2=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),p){const T=a;this.extVertexArrayObject={createVertexArrayOES:T.createVertexArray.bind(a),deleteVertexArrayOES:T.deleteVertexArray.bind(a),bindVertexArrayOES:T.bindVertexArray.bind(a)}}this.clearColor=new gr(this),this.clearDepth=new tr(this),this.clearStencil=new qn(this),this.colorMask=new hn(this),this.depthMask=new Ui(this),this.stencilMask=new cn(this),this.stencilFunc=new Vi(this),this.stencilOp=new Oi(this),this.stencilTest=new Bn(this),this.depthRange=new $i(this),this.depthTest=new gi(this),this.depthFunc=new un(this),this.blend=new Mn(this),this.blendFunc=new Tr(this),this.blendColor=new kr(this),this.blendEquation=new xr(this),this.cullFace=new _r(this),this.cullFaceSide=new ir(this),this.frontFace=new yn(this),this.program=new Sr(this),this.activeTexture=new ys(this),this.viewport=new Kn(this),this.bindFramebuffer=new fr(this),this.bindRenderbuffer=new sr(this),this.bindTexture=new vr(this),this.bindVertexBuffer=new Yr(this),this.bindElementBuffer=new xt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new De(this),this.pixelStoreUnpack=new ze(this),this.pixelStoreUnpackPremultiplyAlpha=new at(this),this.pixelStoreUnpackFlipY=new st(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),p||(this.extTextureHalfFloat=a.getExtension("OES_texture_half_float")),(p||this.extTextureHalfFloat&&a.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=p||a.getExtension("OES_standard_derivatives"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,p){return new Hn(this,a,p)}createVertexBuffer(a,p,T){return new xn(this,a,p,T)}createRenderbuffer(a,p,T){const I=this.gl,z=I.createRenderbuffer();return this.bindRenderbuffer.set(z),I.renderbufferStorage(I.RENDERBUFFER,a,p,T),this.bindRenderbuffer.set(null),z}createFramebuffer(a,p,T){return new He(this,a,p,T)}clear({color:a,depth:p,stencil:T}){const I=this.gl;let z=0;a&&(z|=I.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),void 0!==p&&(z|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),void 0!==T&&(z|=I.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),I.clear(z)}setCullFace(a){!1===a.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){Y(a.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class bt extends e.Evented{constructor(a,p,T,I){if(super(),this.id=a,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(p,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(I),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(a){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const p=Array.isArray(this.map._language)?this.map._language.join():this.map._language,T=this.map._worldview;this._tileJSONRequest=Di(this._options,this.map._requestManager,p,T,(I,z)=>{this._tileJSONRequest=null,this._loaded=!0,I?(p&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${p}`),T&&2!==T.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${T}`),this.fire(new e.ErrorEvent(I))):z&&(e.extend(this,z),z.bounds&&(this.tileBounds=new qi(z.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(z.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),a&&a(I)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(a,p){const T=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),I={request:this.map._requestManager.transformRequest(T,e.ResourceType.Tile),data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile};if(I.request.collectResourceTiming=this._collectResourceTiming,a.actor&&"expired"!==a.state)"loading"===a.state?a.reloadCallback=p:a.request=a.actor.send("reloadTile",I,z.bind(this));else if(a.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",I,z.bind(this),void 0,!0);else{const $=e.loadVectorTile.call({deduped:this._deduped},I,(Z,Q)=>{Z||!Q?z.call(this,Z):(I.data={cacheControl:Q.cacheControl,expires:Q.expires,rawData:Q.rawData.slice(0)},a.actor&&a.actor.send("loadTile",I,z.bind(this),void 0,!0))},!0);a.request={cancel:$}}function z($,Z){return delete a.request,a.aborted?p(null):$&&404!==$.status?p($):(Z&&Z.resourceTiming&&(a.resourceTiming=Z.resourceTiming),this.map._refreshExpiredTiles&&Z&&a.setExpiryData(Z),a.loadVectorData(Z,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id})}unloadTile(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Mt extends e.Evented{constructor(a,p,T,I){super(),this.id=a,this.dispatcher=T,this.setEventedParent(I),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},p),e.extend(this,e.pick(p,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Di(this._options,this.map._requestManager,null,null,(p,T)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new e.ErrorEvent(p)):T&&(e.extend(this,T),T.bounds&&(this.tileBounds=new qi(T.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(T.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),a&&a(p)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,p){const T=e.exported.devicePixelRatio>=2,I=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),T,this.tileSize);a.request=e.getImage(this.map._requestManager.transformRequest(I,e.ResourceType.Tile),(z,$,Z,Q)=>(delete a.request,a.aborted?(a.state="unloaded",p(null)):z?(a.state="errored",p(z)):$?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:Z,expires:Q}),a.setTexture($,this.map.painter),a.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void p(null)):p(null)))}static loadTileData(a,p,T){a.setTexture(p,T)}static unloadTileData(a,p){a.texture&&p.saveTileTexture(a.texture)}abortTile(a,p){a.request&&(a.request.cancel(),delete a.request),p()}unloadTile(a,p){a.texture&&this.map.painter.saveTileTexture(a.texture),p()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function xi(b,a,p,T,I,z,$,Z){const Q=[b,p,I,a,T,z,1,1,1],le=[$,Z,1],oe=e.adjoint([],Q),[ye,Be,Ze]=e.transformMat3(le,le,e.transpose(oe,oe));return e.multiply$1(Q,[ye,0,0,0,Be,0,0,0,Ze],Q)}class Ke extends e.Evented{constructor(a,p,T,I){super(),this.id=a,this.dispatcher=T,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(I),this.options=p,this._dirty=!1}load(a,p){this._loaded=p||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(T,I)=>{if(this._imageRequest=null,this._loaded=!0,T)this.fire(new e.ErrorEvent(T));else if(I){const{HTMLImageElement:z}=e.window;this.image=I instanceof z?e.exported.getImageData(I):I,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,a&&(this.coordinates=a),this._finishLoading()}})}loaded(){return this._loaded}updateImage(a){return this.image&&a.url?(this._imageRequest&&a.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=a.url,this.load(a.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(a){this.coordinates=a,this._boundsArray=void 0;const p=a.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(T){let I=1/0,z=1/0,$=-1/0,Z=-1/0;for(const ye of T)I=Math.min(I,ye.x),z=Math.min(z,ye.y),$=Math.max($,ye.x),Z=Math.max(Z,ye.y);const Q=Math.max($-I,Z-z),le=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),oe=Math.pow(2,le);return new e.CanonicalTileID(le,Math.floor((I+$)/2*oe),Math.floor((z+Z)/2*oe))}(p),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(a){for(const Q in this.tiles){const le=this.tiles[Q];"loaded"!==le.state&&(le.state="loaded",le.texture=this.texture)}if(this._boundsArray)return;const p=e.tileTransform(this.tileID,this.map.transform.projection),[T,I,z,$]=this.coordinates.map(Q=>{const le=p.projection.project(Q[0],Q[1]);return e.getTilePoint(p,le)._round()});this.perspectiveTransform=function(Q,le,oe,ye,Be,Ze,qe,Je,nt,we){const We=xi(0,0,Q,0,0,le,Q,le),gt=xi(oe,ye,Be,Ze,qe,Je,nt,we);return e.multiply$1(gt,e.adjoint(We,We),gt),[gt[6]/gt[8]*Q/e.EXTENT,gt[7]/gt[8]*le/e.EXTENT]}(this.width,this.height,T.x,T.y,I.x,I.y,$.x,$.y,z.x,z.y);const Z=this._boundsArray=new e.StructArrayLayout4i8;Z.emplaceBack(T.x,T.y,0,0),Z.emplaceBack(I.x,I.y,e.EXTENT,0),Z.emplaceBack($.x,$.y,0,e.EXTENT),Z.emplaceBack(z.x,z.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=a.createVertexBuffer(Z,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const a=this.map.painter.context,p=a.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(a,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(a)}loadTile(a,p){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},p(null)):(a.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ot={vector:bt,raster:Mt,"raster-dem":class extends Mt{constructor(b,a,p,T){super(b,a,p,T),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(b,a){const p=this.map._requestManager.normalizeTileURL(b.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function T(I,z){I&&(b.state="errored",a(I)),z&&(b.dem=z,b.dem.onDeserialize(),b.needsHillshadePrepare=!0,b.needsDEMTextureUpload=!0,b.state="loaded",a(null))}b.request=e.getImage(this.map._requestManager.transformRequest(p,e.ResourceType.Tile),function(I,z,$,Z){if(delete b.request,b.aborted)b.state="unloaded",a(null);else if(I)b.state="errored",a(I);else if(z){this.map._refreshExpiredTiles&&b.setExpiryData({cacheControl:$,expires:Z});const Q=e.window.ImageBitmap&&z instanceof e.window.ImageBitmap&&(null==qr&&(qr=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),qr),le=1-(z.width-e.prevPowerOfTwo(z.width))/2;le<1||b.neighboringTiles||(b.neighboringTiles=this._getNeighboringTiles(b.tileID));const oe=Q?z:e.exported.getImageData(z,le),ye={uid:b.uid,coord:b.tileID,source:this.id,rawImageData:oe,encoding:this.encoding,padding:le};b.actor&&"expired"!==b.state||(b.actor=this.dispatcher.getActor(),b.actor.send("loadDEMTile",ye,T.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(b){const a=b.canonical,p=Math.pow(2,a.z),T=(a.x-1+p)%p,I=0===a.x?b.wrap-1:b.wrap,z=(a.x+1+p)%p,$=a.x+1===p?b.wrap+1:b.wrap,Z={};return Z[new e.OverscaledTileID(b.overscaledZ,I,a.z,T,a.y).key]={backfilled:!1},Z[new e.OverscaledTileID(b.overscaledZ,$,a.z,z,a.y).key]={backfilled:!1},a.y>0&&(Z[new e.OverscaledTileID(b.overscaledZ,I,a.z,T,a.y-1).key]={backfilled:!1},Z[new e.OverscaledTileID(b.overscaledZ,b.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},Z[new e.OverscaledTileID(b.overscaledZ,$,a.z,z,a.y-1).key]={backfilled:!1}),a.y+1<p&&(Z[new e.OverscaledTileID(b.overscaledZ,I,a.z,T,a.y+1).key]={backfilled:!1},Z[new e.OverscaledTileID(b.overscaledZ,b.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},Z[new e.OverscaledTileID(b.overscaledZ,$,a.z,z,a.y+1).key]={backfilled:!1}),Z}unloadTile(b){b.demTexture&&this.map.painter.saveTileTexture(b.demTexture),b.fbo&&(b.fbo.destroy(),delete b.fbo),b.dem&&delete b.dem,delete b.neighboringTiles,b.state="unloaded"}},geojson:class extends e.Evented{constructor(b,a,p,T){super(),this.id=b,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=p.getActor(),this.setEventedParent(T),this._data=a.data,this._options=e.extend({},a),this._collectResourceTiming=a.collectResourceTiming,void 0!==a.maxzoom&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const I=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(void 0!==a.buffer?a.buffer:128)*I,tolerance:(void 0!==a.tolerance?a.tolerance:.375)*I,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:void 0!==a.clusterMaxZoom?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==a.clusterRadius?a.clusterRadius:50)*I,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions)}onAdd(b){this.map=b,this.setData(this._data)}setData(b){return this._data=b,this._updateWorkerData(),this}getClusterExpansionZoom(b,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:b,source:this.id},a),this}getClusterChildren(b,a){return this.actor.send("geojson.getClusterChildren",{clusterId:b,source:this.id},a),this}getClusterLeaves(b,a,p,T){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:b,limit:a,offset:p},T),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const b=e.extend({},this.workerOptions),a=this._data;"string"==typeof a?(b.request=this.map._requestManager.transformRequest(e.exported.resolveURL(a),e.ResourceType.Source),b.request.collectResourceTiming=this._collectResourceTiming):b.data=JSON.stringify(a),this._pendingLoad=this.actor.send(`${this.type}.loadData`,b,(p,T)=>{if(this._loaded=!0,this._pendingLoad=null,p)this.fire(new e.ErrorEvent(p));else{const I={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(I.resourceTiming=T.resourceTiming[this.id]),this.fire(new e.Event("data",I)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(b,a){const p=b.actor?"reloadTile":"loadTile";b.actor=this.actor,b.request=this.actor.send(p,{type:this.type,uid:b.uid,tileID:b.tileID,tileZoom:b.tileZoom,zoom:b.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(T,I)=>(delete b.request,b.unloadVectorData(),b.aborted?a(null):T?a(T):(b.loadVectorData(I,this.map.painter,"reloadTile"===p),a(null))),void 0,"loadTile"===p)}abortTile(b){b.request&&(b.request.cancel(),delete b.request),b.aborted=!0}unloadTile(b){b.unloadVectorData(),this.actor.send("removeTile",{uid:b.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ke{constructor(b,a,p,T){super(b,a,p,T),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const b=this.options;this.urls=[];for(const a of b.urls)this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url);e.getVideo(this.urls,(a,p)=>{this._loaded=!0,a?this.fire(new e.ErrorEvent(a)):p&&(this.video=p,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(b){if(this.video){const a=this.video.seekable;b<a.start(0)||b>a.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=b}}getVideo(){return this.video}onAdd(b){this.map||(this.map=b,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const b=this.map.painter.context,a=b.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(b,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(b)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ke,canvas:class extends Ke{constructor(b,a,p,T){super(b,a,p,T),a.coordinates?Array.isArray(a.coordinates)&&4===a.coordinates.length&&!a.coordinates.some(I=>!Array.isArray(I)||2!==I.length||I.some(z=>"number"!=typeof z))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${b}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${b}`,null,'missing required property "coordinates"'))),a.animate&&"boolean"!=typeof a.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${b}`,null,'optional "animate" property must be a boolean value'))),a.canvas?"string"==typeof a.canvas||a.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${b}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${b}`,null,'missing required property "canvas"'))),this.options=a,this.animate=void 0===a.animate||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(b){this.map=b,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const a=this.map.painter.context;this.texture?(b||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(a,this.canvas,a.gl.RGBA,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const b of[this.canvas.width,this.canvas.height])if(isNaN(b)||b<=0)return!0;return!1}},custom:class extends e.Evented{constructor(b,a,p,T){super(),this.id=b,this.type="custom",this._dataType="raster",this._dispatcher=p,this._implementation=a,this.setEventedParent(T),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new qi(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(b){this._map=b,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(b),this.load()}onRemove(b){this._implementation.onRemove&&this._implementation.onRemove(b)}hasTile(b){if(this._implementation.hasTile){const{x:a,y:p,z:T}=b.canonical;return this._implementation.hasTile({x:a,y:p,z:T})}return!this.tileBounds||this.tileBounds.contains(b.canonical)}loadTile(b,a){const{x:p,y:T,z:I}=b.tileID.canonical,z=new e.window.AbortController;b.request=Promise.resolve(this._implementation.loadTile({x:p,y:T,z:I},{signal:z.signal})).then(function($){return delete b.request,b.aborted?(b.state="unloaded",a(null)):void 0===$?(b.state="errored",a(null)):null===$?(this.loadTileData(b,{width:this.tileSize,height:this.tileSize,data:null}),b.state="loaded",a(null)):(Z=$)instanceof e.window.ImageData||Z instanceof e.window.HTMLCanvasElement||Z instanceof e.window.ImageBitmap||Z instanceof e.window.HTMLImageElement?(this.loadTileData(b,$),b.state="loaded",void a(null)):(b.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var Z}.bind(this)).catch($=>{20!==$.code&&(b.state="errored",a($))}),b.request.cancel=()=>z.abort()}loadTileData(b,a){Mt.loadTileData(b,a,this._map.painter)}unloadTileData(b){Mt.unloadTileData(b,this._map.painter)}unloadTile(b,a){if(this.unloadTileData(b),this._implementation.unloadTile){const{x:p,y:T,z:I}=b.tileID.canonical;this._implementation.unloadTile({x:p,y:T,z:I})}a()}abortTile(b,a){b.request&&b.request.cancel&&(b.request.cancel(),delete b.request),a()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(b=>({x:b.canonical.x,y:b.canonical.y,z:b.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ue=function(b,a,p,T){const I=new ot[a.type](b,a,p,T);if(I.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${I.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],I),I};function je(b,a){const p=e.identity([]);return e.scale(p,p,[.5*b.width,.5*-b.height,1]),e.translate(p,p,[1,-1,0]),e.multiply(p,p,b.calculateProjMatrix(a.toUnwrapped())),Float32Array.from(p)}function Le(b,a,p,T,I,z,$,Z=!1){const Q=b.tilesIn(T,$,Z);Q.sort(ht);const le=[];for(const ye of Q)le.push({wrappedTileID:ye.tile.tileID.wrapped().key,queryResults:ye.tile.queryRenderedFeatures(a,p,b._state,ye,I,z,je(b.transform,ye.tile.tileID),Z)});const oe=function(ye){const Be={},Ze={};for(const qe of ye){const Je=qe.queryResults,nt=qe.wrappedTileID,we=Ze[nt]=Ze[nt]||{};for(const We in Je){const gt=Je[We],vt=we[We]=we[We]||{},zt=Be[We]=Be[We]||[];for(const Bt of gt)vt[Bt.featureIndex]||(vt[Bt.featureIndex]=!0,zt.push(Bt))}}return Be}(le);for(const ye in oe)oe[ye].forEach(Be=>{const Ze=Be.feature,qe=Ze.layer;qe&&"background"!==qe.type&&"sky"!==qe.type&&(Ze.source=qe.source,qe["source-layer"]&&(Ze.sourceLayer=qe["source-layer"]),Ze.state=void 0!==Ze.id?b.getFeatureState(qe["source-layer"],Ze.id):{})});return oe}function Fe(b,a){const p=b.getRenderableIds().map(z=>b.getTileByID(z)),T=[],I={};for(let z=0;z<p.length;z++){const $=p[z],Z=$.tileID.canonical.key;I[Z]||(I[Z]=!0,$.querySourceFeatures(T,a))}return T}function ht(b,a){const p=b.tileID,T=a.tileID;return p.overscaledZ-T.overscaledZ||p.canonical.y-T.canonical.y||p.wrap-T.wrap||p.canonical.x-T.canonical.x}function Rt(){return null!=xc.workerClass?new xc.workerClass:new e.window.Worker(xc.workerUrl)}const pi="mapboxgl_preloaded_worker_pool";class si{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<si.workerCount;)this.workers.push(new Rt);return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],0===this.numActive()&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[pi]}numActive(){return Object.keys(this.active).length}}let Si;function Qi(){return Si||(Si=new si),Si}function Bi(b,a){const p={};for(const T in b)"ref"!==T&&(p[T]=b[T]);return e.refProperties.forEach(T=>{T in a&&(p[T]=a[T])}),p}function Tn(b){b=b.slice();const a=Object.create(null);for(let p=0;p<b.length;p++)a[b[p].id]=b[p];for(let p=0;p<b.length;p++)"ref"in b[p]&&(b[p]=Bi(b[p],a[b[p].ref]));return b}si.workerCount=2;const Dn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function In(b,a,p){p.push({command:Dn.addSource,args:[b,a[b]]})}function tt(b,a,p){a.push({command:Dn.removeSource,args:[b]}),p[b]=!0}function di(b,a,p,T){tt(b,p,T),In(b,a,p)}function ue(b,a,p){let T;for(T in b[p])if(b[p].hasOwnProperty(T)&&"data"!==T&&!Y(b[p][T],a[p][T]))return!1;for(T in a[p])if(a[p].hasOwnProperty(T)&&"data"!==T&&!Y(b[p][T],a[p][T]))return!1;return!0}function n(b,a,p,T,I,z){let $;for($ in a=a||{},b=b||{})b.hasOwnProperty($)&&(Y(b[$],a[$])||p.push({command:z,args:[T,$,a[$],I]}));for($ in a)a.hasOwnProperty($)&&!b.hasOwnProperty($)&&(Y(b[$],a[$])||p.push({command:z,args:[T,$,a[$],I]}))}function s(b){return b.id}function c(b,a){return b[a.id]=a,b}class g{constructor(a,p){this.reset(a,p)}reset(a,p){this.points=a||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(1===this.points.length)return this.points[0];a=e.clamp(a,0,1);let p=1,T=this._distances[p];const I=a*this.paddedLength+this.padding;for(;T<I&&p<this._distances.length;)T=this._distances[++p];const z=p-1,$=this._distances[z],Z=T-$,Q=Z>0?(I-$)/Z:0;return this.points[z].mult(1-Q).add(this.points[p].mult(Q))}}class y{constructor(a,p,T){const I=this.boxCells=[],z=this.circleCells=[];this.xCellCount=Math.ceil(a/T),this.yCellCount=Math.ceil(p/T);for(let $=0;$<this.xCellCount*this.yCellCount;$++)I.push([]),z.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=p,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,p,T,I,z){this._forEachCell(p,T,I,z,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(p),this.bboxes.push(T),this.bboxes.push(I),this.bboxes.push(z)}insertCircle(a,p,T,I){this._forEachCell(p-I,T-I,p+I,T+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(p),this.circles.push(T),this.circles.push(I)}_insertBoxCell(a,p,T,I,z,$){this.boxCells[z].push($)}_insertCircleCell(a,p,T,I,z,$){this.circleCells[z].push($)}_query(a,p,T,I,z,$){if(T<0||a>this.width||I<0||p>this.height)return!z&&[];const Z=[];if(a<=0&&p<=0&&this.width<=T&&this.height<=I){if(z)return!0;for(let Q=0;Q<this.boxKeys.length;Q++)Z.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const le=this.circles[3*Q],oe=this.circles[3*Q+1],ye=this.circles[3*Q+2];Z.push({key:this.circleKeys[Q],x1:le-ye,y1:oe-ye,x2:le+ye,y2:oe+ye})}return $?Z.filter($):Z}return this._forEachCell(a,p,T,I,this._queryCell,Z,{hitTest:z,seenUids:{box:{},circle:{}}},$),z?Z.length>0:Z}_queryCircle(a,p,T,I,z){const $=a-T,Z=a+T,Q=p-T,le=p+T;if(Z<0||$>this.width||le<0||Q>this.height)return!I&&[];const oe=[];return this._forEachCell($,Q,Z,le,this._queryCellCircle,oe,{hitTest:I,circle:{x:a,y:p,radius:T},seenUids:{box:{},circle:{}}},z),I?oe.length>0:oe}query(a,p,T,I,z){return this._query(a,p,T,I,!1,z)}hitTest(a,p,T,I,z){return this._query(a,p,T,I,!0,z)}hitTestCircle(a,p,T,I){return this._queryCircle(a,p,T,!0,I)}_queryCell(a,p,T,I,z,$,Z,Q){const le=Z.seenUids,oe=this.boxCells[z];if(null!==oe){const Be=this.bboxes;for(const Ze of oe)if(!le.box[Ze]){le.box[Ze]=!0;const qe=4*Ze;if(a<=Be[qe+2]&&p<=Be[qe+3]&&T>=Be[qe+0]&&I>=Be[qe+1]&&(!Q||Q(this.boxKeys[Ze]))){if(Z.hitTest)return $.push(!0),!0;$.push({key:this.boxKeys[Ze],x1:Be[qe],y1:Be[qe+1],x2:Be[qe+2],y2:Be[qe+3]})}}}const ye=this.circleCells[z];if(null!==ye){const Be=this.circles;for(const Ze of ye)if(!le.circle[Ze]){le.circle[Ze]=!0;const qe=3*Ze;if(this._circleAndRectCollide(Be[qe],Be[qe+1],Be[qe+2],a,p,T,I)&&(!Q||Q(this.circleKeys[Ze]))){if(Z.hitTest)return $.push(!0),!0;{const Je=Be[qe],nt=Be[qe+1],we=Be[qe+2];$.push({key:this.circleKeys[Ze],x1:Je-we,y1:nt-we,x2:Je+we,y2:nt+we})}}}}}_queryCellCircle(a,p,T,I,z,$,Z,Q){const le=Z.circle,oe=Z.seenUids,ye=this.boxCells[z];if(null!==ye){const Ze=this.bboxes;for(const qe of ye)if(!oe.box[qe]){oe.box[qe]=!0;const Je=4*qe;if(this._circleAndRectCollide(le.x,le.y,le.radius,Ze[Je+0],Ze[Je+1],Ze[Je+2],Ze[Je+3])&&(!Q||Q(this.boxKeys[qe])))return $.push(!0),!0}}const Be=this.circleCells[z];if(null!==Be){const Ze=this.circles;for(const qe of Be)if(!oe.circle[qe]){oe.circle[qe]=!0;const Je=3*qe;if(this._circlesCollide(Ze[Je],Ze[Je+1],Ze[Je+2],le.x,le.y,le.radius)&&(!Q||Q(this.circleKeys[qe])))return $.push(!0),!0}}}_forEachCell(a,p,T,I,z,$,Z,Q){const le=this._convertToXCellCoord(a),oe=this._convertToYCellCoord(p),ye=this._convertToXCellCoord(T),Be=this._convertToYCellCoord(I);for(let Ze=le;Ze<=ye;Ze++)for(let qe=oe;qe<=Be;qe++)if(z.call(this,a,p,T,I,this.xCellCount*qe+Ze,$,Z,Q))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,p,T,I,z,$){const Z=I-a,Q=z-p,le=T+$;return le*le>Z*Z+Q*Q}_circleAndRectCollide(a,p,T,I,z,$,Z){const Q=($-I)/2,le=Math.abs(a-(I+Q));if(le>Q+T)return!1;const oe=(Z-z)/2,ye=Math.abs(p-(z+oe));if(ye>oe+T)return!1;if(le<=Q||ye<=oe)return!0;const Be=le-Q,Ze=ye-oe;return Be*Be+Ze*Ze<=T*T}}const x={unknown:0,flipRequired:1,flipNotRequired:2},k=Math.tan(85*Math.PI/180);function M(b,a,p,T,I,z,$){const Z=e.create();if(p)if("globe"===z.name){const Q=e.calculateGlobeLabelMatrix(I,a);e.multiply(Z,Z,Q)}else{const Q=rt([],$);Z[0]=Q[0],Z[1]=Q[1],Z[4]=Q[2],Z[5]=Q[3],T||e.rotateZ(Z,Z,I.angle)}else e.multiply(Z,I.labelPlaneMatrix,b);return Z}function R(b,a,p,T,I,z,$){const Z=M(b,a,p,T,I,z,$);return"globe"===z.name&&p||(Z[2]=Z[6]=Z[10]=Z[14]=0),Z}function j(b,a,p,T,I,z,$){if(p){if("globe"===z.name){const Z=M(b,a,p,T,I,z,$);return e.invert(Z,Z),e.multiply(Z,b,Z),Z}{const Z=e.clone(b),Q=e.identity([]);return Q[0]=$[0],Q[1]=$[1],Q[4]=$[2],Q[5]=$[3],e.multiply(Z,Z,Q),T||e.rotateZ(Z,Z,-I.angle),Z}}return I.glCoordMatrix}function U(b,a,p,T){const I=[b,a,p,1];p?e.transformMat4$1(I,I,T):_e(I,I,T);const z=I[3];return I[0]/=z,I[1]/=z,I[2]/=z,I}function X(b,a){return Math.min(.5+b/a*.5,1.5)}function ee(b,a){const p=b[0]/b[3],T=b[1]/b[3];return p>=-a[0]&&p<=a[0]&&T>=-a[1]&&T<=a[1]}function ae(b,a,p,T,I,z,$,Z,Q,le){const oe=p.transform,ye=T?b.textSizeData:b.iconSizeData,Be=e.evaluateSizeForZoom(ye,p.transform.zoom),Ze="globe"===oe.projection.name,qe=[256/p.width*2+1,256/p.height*2+1],Je=T?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;Je.clear();let nt=null;Ze&&(nt=T?b.text.globeExtVertexArray:b.icon.globeExtVertexArray);const we=b.lineVertexArray,We=T?b.text.placedSymbolArray:b.icon.placedSymbolArray,gt=p.transform.width/p.transform.height;let vt,zt=!1;for(let Bt=0;Bt<We.length;Bt++){const Ft=We.get(Bt),{numGlyphs:$t,writingMode:Ut}=Ft;if(Ut!==e.WritingMode.vertical||zt||vt===e.WritingMode.horizontal||(zt=!0),vt=Ut,(Ft.hidden||Ut===e.WritingMode.vertical)&&!zt){ce($t,Je);continue}zt=!1;const li=new e.Point(Ft.tileAnchorX,Ft.tileAnchorY);let{x:Gi,y:ti,z:ki}=oe.projection.projectTilePoint(li.x,li.y,le.canonical);if(Q){const[nr,wn,jn]=Q(li);Gi+=nr,ti+=wn,ki+=jn}const ci=[Gi,ti,ki,1];if(e.transformMat4$1(ci,ci,a),!ee(ci,qe)){ce($t,Je);continue}const ji=X(p.transform.cameraToCenterDistance,ci[3]),oi=e.evaluateSizeForFeature(ye,Be,Ft),wi=$?oi/ji:oi*ji,Wi=U(Gi,ti,ki,I);if(Wi[3]<=0){ce($t,Je);continue}let zi={};const Hi=$?null:Q,Pn=he(Ft,wi,!1,Z,a,I,z,b.glyphOffsetArray,we,Je,nt,Wi,li,zi,gt,Hi,oe.projection,le,$);zt=Pn.useVertical,Hi&&Pn.needsFlipping&&(zi={}),(Pn.notEnoughRoom||zt||Pn.needsFlipping&&he(Ft,wi,!0,Z,a,I,z,b.glyphOffsetArray,we,Je,nt,Wi,li,zi,gt,Hi,oe.projection,le,$).notEnoughRoom)&&ce($t,Je)}T?(b.text.dynamicLayoutVertexBuffer.updateData(Je),nt&&b.text.globeExtVertexBuffer.updateData(nt)):(b.icon.dynamicLayoutVertexBuffer.updateData(Je),nt&&b.icon.globeExtVertexBuffer.updateData(nt))}function de(b,a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je){const{lineStartIndex:nt,glyphStartIndex:we,segment:We}=Z,gt=we+Z.numGlyphs,vt=nt+Z.lineLength,zt=a.getoffsetX(we),Bt=a.getoffsetX(gt-1),Ft=K(b*zt,p,T,I,z,$,We,nt,vt,Q,le,oe,ye,Be,!0,Ze,qe,Je);if(!Ft)return null;const $t=K(b*Bt,p,T,I,z,$,We,nt,vt,Q,le,oe,ye,Be,!0,Ze,qe,Je);return $t?{first:Ft,last:$t}:null}function ve(b,a,p,T){return b===e.WritingMode.horizontal&&Math.abs(T)>Math.abs(p)?{useVertical:!0}:b===e.WritingMode.vertical?T>0?{needsFlipping:!0}:null:a!==x.unknown&&(0===(I=p)||Math.abs(T/I)>k)?a===x.flipRequired?{needsFlipping:!0}:null:p<0?{needsFlipping:!0}:null;var I}function he(b,a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je,nt,we,We){const gt=a/24,vt=b.lineOffsetX*gt,zt=b.lineOffsetY*gt,{lineStartIndex:Bt,glyphStartIndex:Ft,numGlyphs:$t,segment:Ut,writingMode:li,flipState:Gi}=b,ti=Bt+b.lineLength,ki=ci=>{if(oe){const[Wi,zi,Hi]=ci.up,Pn=le.length;e.updateGlobeVertexNormal(oe,Pn+0,Wi,zi,Hi),e.updateGlobeVertexNormal(oe,Pn+1,Wi,zi,Hi),e.updateGlobeVertexNormal(oe,Pn+2,Wi,zi,Hi),e.updateGlobeVertexNormal(oe,Pn+3,Wi,zi,Hi)}const[ji,oi,wi]=ci.point;e.addDynamicAttributes(le,ji,oi,wi,ci.angle)};if($t>1){const ci=de(gt,Z,vt,zt,p,ye,Be,b,Q,z,Ze,Je,!1,nt,we,We);if(!ci)return{notEnoughRoom:!0};if(T&&!p){let[ji,oi,wi]=ci.first.point,[Wi,zi,Hi]=ci.last.point;[ji,oi]=U(ji,oi,wi,$),[Wi,zi]=U(Wi,zi,Hi,$);const Pn=ve(li,Gi,(Wi-ji)*qe,zi-oi);if(b.flipState=Pn&&Pn.needsFlipping?x.flipRequired:x.flipNotRequired,Pn)return Pn}ki(ci.first);for(let ji=Ft+1;ji<Ft+$t-1;ji++){const oi=K(gt*Z.getoffsetX(ji),vt,zt,p,ye,Be,Ut,Bt,ti,Q,z,Ze,Je,!1,!1,nt,we,We);if(!oi)return le.length-=4*(ji-Ft),{notEnoughRoom:!0};ki(oi)}ki(ci.last)}else{if(T&&!p){const ji=U(Be.x,Be.y,0,I),oi=Bt+Ut+1,wi=new e.Point(Q.getx(oi),Q.gety(oi)),Wi=U(wi.x,wi.y,0,I),zi=Wi[3]>0?Wi:F(Be,wi,ji,1,I,void 0,nt,we.canonical),Hi=ve(li,Gi,(zi[0]-ji[0])*qe,zi[1]-ji[1]);if(b.flipState=Hi&&Hi.needsFlipping?x.flipRequired:x.flipNotRequired,Hi)return Hi}const ci=K(gt*Z.getoffsetX(Ft),vt,zt,p,ye,Be,Ut,Bt,ti,Q,z,Ze,Je,!1,!1,nt,we,We);if(!ci)return{notEnoughRoom:!0};ki(ci)}return{}}function be(b,a,p,T,I){const{x:z,y:$,z:Z}=T.projectTilePoint(b.x,b.y,a);if(!I)return U(z,$,Z,p);const[Q,le,oe]=I(b);return U(z+Q,$+le,Z+oe,p)}function F(b,a,p,T,I,z,$,Z){const Q=be(b.sub(a)._unit()._add(b),Z,I,$,z);return e.sub(Q,p,Q),e.normalize(Q,Q),e.scaleAndAdd(Q,p,Q,T)}function K(b,a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je,nt,we){const We=T?b-a:b+a;let gt=We>0?1:-1,vt=0;T&&(gt*=-1,vt=Math.PI),gt<0&&(vt+=Math.PI);let zt=Z+$+(gt>0?0:1)|0,Bt=I,Ft=I,$t=0,Ut=0;const li=Math.abs(We),Gi=[],ti=[];let ki=z,ci=ki;const ji=()=>F(ci,ki,Ft,li-$t+1,oe,Be,Je,nt.canonical);for(;$t+Ut<=li;){if(zt+=gt,zt<Z||zt>=Q)return null;if(Ft=Bt,ci=ki,Gi.push(Ft),Ze&&ti.push(ci),ki=new e.Point(le.getx(zt),le.gety(zt)),Bt=ye[zt],!Bt){const jn=be(ki,nt.canonical,oe,Je,Be);Bt=jn[3]>0?ye[zt]=jn:ji()}$t+=Ut,Ut=e.distance(Ft,Bt)}qe&&Be&&(ye[zt]&&(Bt=ji(),Ut=e.distance(Ft,Bt)),ye[zt]=Bt);const oi=(li-$t)/Ut,wi=ki.sub(ci)._mult(oi)._add(ci),Wi=e.sub([],Bt,Ft),zi=e.scaleAndAdd([],Ft,Wi,oi);let Hi=[0,0,1],Pn=Wi[0],nr=Wi[1];if(we&&(Hi=Je.upVector(nt.canonical,wi.x,wi.y),0!==Hi[0]||0!==Hi[1]||1!==Hi[2])){const jn=[Hi[2],0,-Hi[0]],ar=e.cross([],Hi,jn);e.normalize(jn,jn),e.normalize(ar,ar),Pn=e.dot(Wi,jn),nr=e.dot(Wi,ar)}if(p){const jn=e.cross([],Hi,Wi);e.normalize(jn,jn),e.scaleAndAdd(zi,zi,jn,p*gt)}const wn=vt+Math.atan2(nr,Pn);return Gi.push(zi),Ze&&ti.push(wi),{point:zi,angle:wn,path:Gi,tilePath:ti,up:Hi}}function ce(b,a){const p=a.length,T=p+4*b;a.resize(T),a.float32.fill(-1/0,4*p,4*T)}function _e(b,a,p){const T=a[0],I=a[1];return b[0]=p[0]*T+p[4]*I+p[12],b[1]=p[1]*T+p[5]*I+p[13],b[3]=p[3]*T+p[7]*I+p[15],b}const Me=100;class $e{constructor(a,p,T=new y(a.width+200,a.height+200,25),I=new y(a.width+200,a.height+200,25)){this.transform=a,this.grid=T,this.ignoredGrid=I,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Me,this.screenBottomBoundary=a.height+Me,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=p}placeCollisionBox(a,p,T,I,z,$,Z,Q){let le=T.projectedAnchorX,oe=T.projectedAnchorY,ye=T.projectedAnchorZ;const Be=T.elevation,Ze=T.tileID,qe=a.getProjection();if(Be&&Ze){const[Bt,Ft,$t]=qe.upVector(Ze.canonical,T.tileAnchorX,T.tileAnchorY),Ut=qe.upVectorScale(Ze.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;le+=Bt*Be*Ut,oe+=Ft*Be*Ut,ye+=$t*Be*Ut}const Je=this.projectAndGetPerspectiveRatio(Z,le,oe,ye,T.tileID,"globe"===qe.name||!!Be||this.transform.pitch>0,qe),nt=$*Je.perspectiveRatio,we=(T.x1*p+I.x-T.padding)*nt+Je.point.x,We=(T.y1*p+I.y-T.padding)*nt+Je.point.y,gt=(T.x2*p+I.x+T.padding)*nt+Je.point.x,vt=(T.y2*p+I.y+T.padding)*nt+Je.point.y,zt=Je.perspectiveRatio<=.55||Je.occluded;return!this.isInsideGrid(we,We,gt,vt)||!z&&this.grid.hitTest(we,We,gt,vt,Q)||zt?{box:[],offscreen:!1,occluded:Je.occluded}:{box:[we,We,gt,vt],offscreen:this.isOffscreen(we,We,gt,vt),occluded:!1}}placeCollisionCircles(a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je){const nt=[],we=this.transform.elevation,We=a.getProjection(),gt=we?we.getAtTileOffsetFunc(Je,this.transform.center.lat,this.transform.worldSize,We):null,vt=new e.Point(T.tileAnchorX,T.tileAnchorY);let{x:zt,y:Bt,z:Ft}=We.projectTilePoint(vt.x,vt.y,Je.canonical);if(gt){const[wi,Wi,zi]=gt(vt);zt+=wi,Bt+=Wi,Ft+=zi}const $t="globe"===We.name,Ut=this.projectAndGetPerspectiveRatio(Z,zt,Bt,Ft,Je,$t||!!we||this.transform.pitch>0,We),{perspectiveRatio:li}=Ut,Gi=(ye?$/li:$*li)/e.ONE_EM,ti=U(zt,Bt,Ft,Q),ki=Ut.signedDistanceFromCamera>0?de(Gi,z,T.lineOffsetX*Gi,T.lineOffsetY*Gi,!1,ti,vt,T,I,Q,{},we&&!ye?gt:null,ye&&!!we,We,Je,ye):null;let ci=!1,ji=!1,oi=!0;if(ki&&!Ut.occluded){const wi=.5*Ze*li+qe,Wi=new e.Point(-100,-100),zi=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Hi=new g,{first:Pn,last:nr}=ki,wn=Pn.path.length;let jn=[];for(let On=wn-1;On>=1;On--)jn.push(Pn.path[On]);for(let On=1;On<nr.path.length;On++)jn.push(nr.path[On]);const ar=2.5*wi;le&&(jn=jn.map(([On,br,ss],as)=>(gt&&!$t&&(ss=gt(as<wn-1?Pn.tilePath[wn-1-as]:nr.tilePath[as-wn+2])[2]),U(On,br,ss,le))),jn.some(On=>On[3]<=0)&&(jn=[]));let Zn=[];if(jn.length>0){let On=1/0,br=-1/0,ss=1/0,as=-1/0;for(const ls of jn)On=Math.min(On,ls[0]),ss=Math.min(ss,ls[1]),br=Math.max(br,ls[0]),as=Math.max(as,ls[1]);br>=Wi.x&&On<=zi.x&&as>=Wi.y&&ss<=zi.y&&(Zn=[jn.map(ls=>new e.Point(ls[0],ls[1]))],(On<Wi.x||br>zi.x||ss<Wi.y||as>zi.y)&&(Zn=e.clipLine(Zn,Wi.x,Wi.y,zi.x,zi.y)))}for(const On of Zn){Hi.reset(On,.25*wi);let br=0;br=Hi.length<=.5*wi?1:Math.ceil(Hi.paddedLength/ar)+1;for(let ss=0;ss<br;ss++){const as=ss/Math.max(br-1,1),ls=Hi.lerp(as),Zo=ls.x+Me,Ks=ls.y+Me;nt.push(Zo,Ks,wi,0);const qo=Zo-wi,Nl=Ks-wi,ks=Zo+wi,Vr=Ks+wi;if(oi=oi&&this.isOffscreen(qo,Nl,ks,Vr),ji=ji||this.isInsideGrid(qo,Nl,ks,Vr),!p&&this.grid.hitTestCircle(Zo,Ks,wi,Be)&&(ci=!0,!oe))return{circles:[],offscreen:!1,collisionDetected:ci,occluded:!1}}}}return{circles:!oe&&ci||!ji?[]:nt,offscreen:oi,collisionDetected:ci,occluded:Ut.occluded}}queryRenderedSymbols(a){if(0===a.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const p=[];let T=1/0,I=1/0,z=-1/0,$=-1/0;for(const oe of a){const ye=new e.Point(oe.x+Me,oe.y+Me);T=Math.min(T,ye.x),I=Math.min(I,ye.y),z=Math.max(z,ye.x),$=Math.max($,ye.y),p.push(ye)}const Z=this.grid.query(T,I,z,$).concat(this.ignoredGrid.query(T,I,z,$)),Q={},le={};for(const oe of Z){const ye=oe.key;if(void 0===Q[ye.bucketInstanceId]&&(Q[ye.bucketInstanceId]={}),Q[ye.bucketInstanceId][ye.featureIndex])continue;const Be=[new e.Point(oe.x1,oe.y1),new e.Point(oe.x2,oe.y1),new e.Point(oe.x2,oe.y2),new e.Point(oe.x1,oe.y2)];e.polygonIntersectsPolygon(p,Be)&&(Q[ye.bucketInstanceId][ye.featureIndex]=!0,void 0===le[ye.bucketInstanceId]&&(le[ye.bucketInstanceId]=[]),le[ye.bucketInstanceId].push(ye.featureIndex))}return le}insertCollisionBox(a,p,T,I,z){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:T,featureIndex:I,collisionGroupID:z},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,p,T,I,z){const $=p?this.ignoredGrid:this.grid,Z={bucketInstanceId:T,featureIndex:I,collisionGroupID:z};for(let Q=0;Q<a.length;Q+=4)$.insertCircle(Z,a[Q],a[Q+1],a[Q+2])}projectAndGetPerspectiveRatio(a,p,T,I,z,$,Z){const Q=[p,T,I,1];let le=!1;I||this.transform.pitch>0?(e.transformMat4$1(Q,Q,a),this.fogState&&z&&"globe"!==Z.name&&(le=function(Be,Ze,qe,Je,nt,we){const We=we.calculateFogTileMatrix(nt),gt=[Ze,qe,Je];return e.transformMat4(gt,gt,We),ri(Be,gt,we.pitch,we._fov)}(this.fogState,p,T,I,z.toUnwrapped(),this.transform)>.9)):_e(Q,Q,a);const oe=Q[3];return{point:new e.Point((Q[0]/oe+1)/2*this.transform.width+Me,(-Q[1]/oe+1)/2*this.transform.height+Me),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(Z)/oe*.5,1.5),signedDistanceFromCamera:oe,occluded:$&&Q[2]>oe||le}}isOffscreen(a,p,T,I){return T<Me||a>=this.screenRightBoundary||I<Me||p>this.screenBottomBoundary}isInsideGrid(a,p,T,I){return T>=0&&a<this.gridRightBoundary&&I>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const a=e.identity([]);return e.translate(a,a,[-100,-100,0]),a}}function wt(b,a,p){const T=a.createTileMatrix(b,b.worldSize,p.toUnwrapped());return e.multiply(new Float32Array(16),b.projMatrix,T)}function kt(b,a,p){if(a.projection.name===p.projection.name)return b.projMatrix;const T=p.clone();return T.setProjection(a.projection),wt(T,a.getProjection(),b)}function Wt(b,a,p){return a.name===p.projection.name?b.projMatrix:wt(p,a,b)}class hi{constructor(a,p,T,I){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?p:-p))):I&&T?1:0,this.placed=T}isHidden(){return 0===this.opacity&&!this.placed}}class yi{constructor(a,p,T,I,z,$=!1){this.text=new hi(a?a.text:null,p,T,z),this.icon=new hi(a?a.icon:null,p,I,z),this.clipped=$}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class rn{constructor(a,p,T,I=!1){this.text=a,this.icon=p,this.skipFade=T,this.clipped=I}}class gn{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class An{constructor(a,p,T,I,z){this.bucketInstanceId=a,this.featureIndex=p,this.sourceLayerIndex=T,this.bucketIndex=I,this.tileID=z}}class $n{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const p=++this.maxGroupID;this.collisionGroups[a]={ID:p,predicate:T=>T.collisionGroupID===p}}return this.collisionGroups[a]}}function Jn(b,a,p,T,I){const{horizontalAlign:z,verticalAlign:$}=e.getAnchorAlignment(b),Z=-(z-.5)*a,Q=-($-.5)*p,le=e.evaluateVariableOffset(b,T);return new e.Point(Z+le[0]*I,Q+le[1]*I)}function Qn(b,a,p,T,I){const z=new e.Point(b,a);return p&&z._rotate(T?I:-I),z}class wr{constructor(a,p,T,I,z){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new $e(this.transform,z),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new $n(T),this.collisionCircleArrays={},this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,p,T,I){const z=T.getBucket(p),$=T.latestFeatureIndex;if(!z||!$||p.id!==z.layerIds[0])return;const Z=z.layers[0].layout,Q=T.collisionBoxArray,le=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),oe=T.tileSize/e.EXTENT,ye=T.tileID.toUnwrapped();this.transform.setProjection(z.projection);const Be=(Ze=T.tileID,qe=z.getProjection(),Je=this.transform,qe.name===this.projection?Je.calculateProjMatrix(Ze.toUnwrapped()):wt(Je,qe,Ze));var Ze,qe,Je;const nt="map"===Z.get("text-pitch-alignment"),we="map"===Z.get("text-rotation-alignment");p.compileFilter();const We=p.dynamicFilter(),gt=p.dynamicFilterNeedsFeature(),vt=this.transform.calculatePixelsToTileUnitsMatrix(T),zt=R(Be,T.tileID.canonical,nt,we,this.transform,z.getProjection(),vt);let Bt=null;if(nt){const Ut=j(Be,T.tileID.canonical,nt,we,this.transform,z.getProjection(),vt);Bt=e.multiply([],this.transform.labelPlaneMatrix,Ut)}let Ft=null;We&&T.latestFeatureIndex&&(Ft={unwrappedTileID:ye,dynamicFilter:We,dynamicFilterNeedsFeature:gt,featureIndex:T.latestFeatureIndex}),this.retainedQueryData[z.bucketInstanceId]=new An(z.bucketInstanceId,$,z.sourceLayerIndex,z.index,T.tileID);const $t={bucket:z,layout:Z,posMatrix:Be,textLabelPlaneMatrix:zt,labelToScreenMatrix:Bt,clippingData:Ft,scale:le,textPixelRatio:oe,holdingForFade:T.holdingForFade(),collisionBoxArray:Q,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(z.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(z.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(z.sourceID)};if(I)for(const Ut of z.sortKeyRanges){const{sortKey:li,symbolInstanceStart:Gi,symbolInstanceEnd:ti}=Ut;a.push({sortKey:li,symbolInstanceStart:Gi,symbolInstanceEnd:ti,parameters:$t})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:z.symbolInstances.length,parameters:$t})}attemptAnchorPlacement(a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je,nt,we,We){const{textOffset0:gt,textOffset1:vt,crossTileID:zt}=Be,Bt=[gt,vt],Ft=Jn(a,T,I,Bt,z),$t=this.collisionIndex.placeCollisionBox(qe,z,p,Qn(Ft.x,Ft.y,$,Z,this.transform.angle),ye,Q,le,oe.predicate);if(nt){const Ut=qe.getSymbolInstanceIconSize(We,this.transform.zoom,Be.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(qe,Ut,nt,Qn(Ft.x,Ft.y,$,Z,this.transform.angle),ye,Q,le,oe.predicate).box.length)return}if($t.box.length>0){let Ut;return this.prevPlacement&&this.prevPlacement.variableOffsets[zt]&&this.prevPlacement.placements[zt]&&this.prevPlacement.placements[zt].text&&(Ut=this.prevPlacement.variableOffsets[zt].anchor),this.variableOffsets[zt]={textOffset:Bt,width:T,height:I,anchor:a,textScale:z,prevAnchor:Ut},this.markUsedJustification(qe,a,Be,Je),qe.allowVerticalPlacement&&(this.markUsedOrientation(qe,Je,Be),this.placedOrientations[zt]=Je),{shift:Ft,placedGlyphBoxes:$t}}}placeLayerBucketPart(a,p,T,I){const{bucket:z,layout:$,posMatrix:Z,textLabelPlaneMatrix:Q,labelToScreenMatrix:le,clippingData:oe,textPixelRatio:ye,holdingForFade:Be,collisionBoxArray:Ze,partiallyEvaluatedTextSize:qe,partiallyEvaluatedIconSize:Je,collisionGroup:nt}=a.parameters,we=$.get("text-optional"),We=$.get("icon-optional"),gt=$.get("text-allow-overlap"),vt=$.get("icon-allow-overlap"),zt="map"===$.get("text-rotation-alignment"),Bt="map"===$.get("text-pitch-alignment"),Ft="none"!==$.get("icon-text-fit"),$t="viewport-y"===$.get("symbol-z-order");this.transform.setProjection(z.projection);let Ut=gt&&(vt||!z.hasIconData()||We),li=vt&&(gt||!z.hasTextData()||we);!z.collisionArrays&&Ze&&z.deserializeCollisionBoxes(Ze),T&&I&&z.updateCollisionDebugBuffers(this.transform.zoom,Ze);const Gi=(ti,ki,ci)=>{const{crossTileID:ji,numVerticalGlyphVertices:oi}=ti;if(oe){const ks={zoom:this.transform.zoom,pitch:this.transform.pitch};let Vr=null;if(oe.dynamicFilterNeedsFeature){const Br=this.retainedQueryData[z.bucketInstanceId];Vr=oe.featureIndex.loadFeature({featureIndex:ti.featureIndex,bucketIndex:Br.bucketIndex,sourceLayerIndex:Br.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,oe.dynamicFilter)(ks,Vr,this.retainedQueryData[z.bucketInstanceId].tileID.canonical,new e.Point(ti.tileAnchorX,ti.tileAnchorY),this.transform.calculateDistanceTileData(oe.unwrappedTileID)))return this.placements[ji]=new rn(!1,!1,!1,!0),void p.add(ji)}if(p.has(ji))return;if(Be)return void(this.placements[ji]=new rn(!1,!1,!1));let wi=!1,Wi=!1,zi=!0,Hi=!1,Pn=!1,nr=null,wn={box:null,offscreen:null,occluded:null},jn={box:null,offscreen:null,occluded:null},ar=null,Zn=null,On=null,br=0,ss=0,as=0;ci.textFeatureIndex?br=ci.textFeatureIndex:ti.useRuntimeCollisionCircles&&(br=ti.featureIndex),ci.verticalTextFeatureIndex&&(ss=ci.verticalTextFeatureIndex);const ls=ks=>{ks.tileID=this.retainedQueryData[z.bucketInstanceId].tileID;const Vr=this.transform.elevation;(Vr||ks.elevation)&&(ks.elevation=Vr?Vr.getAtTileOffset(ks.tileID,ks.tileAnchorX,ks.tileAnchorY):0)},Zo=ci.textBox;if(Zo){ls(Zo);const ks=Br=>{let Jr=e.WritingMode.horizontal;if(z.allowVerticalPlacement&&!Br&&this.prevPlacement){const da=this.prevPlacement.placedOrientations[ji];da&&(this.placedOrientations[ji]=da,Jr=da,this.markUsedOrientation(z,Jr,ti))}return Jr},Vr=(Br,Jr)=>{if(z.allowVerticalPlacement&&oi>0&&ci.verticalTextBox){for(const da of z.writingModes)if(da===e.WritingMode.vertical?(wn=Jr(),jn=wn):wn=Br(),wn&&wn.box&&wn.box.length)break}else wn=Br()};if($.get("text-variable-anchor")){let Br=$.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ji]){const cs=this.prevPlacement.variableOffsets[ji];Br.indexOf(cs.anchor)>0&&(Br=Br.filter(pa=>pa!==cs.anchor),Br.unshift(cs.anchor))}const Jr=(cs,pa,Hc)=>{const rl=z.getSymbolInstanceTextSize(qe,ti,this.transform.zoom,ki),Ya=(cs.x2-cs.x1)*rl+2*cs.padding,tc=(cs.y2-cs.y1)*rl+2*cs.padding,ic=Ft&&!vt?pa:null;ic&&ls(ic);let bc={box:[],offscreen:!1,occluded:!1};const bu=gt?2*Br.length:Br.length;for(let nc=0;nc<bu;++nc){const Gc=this.attemptAnchorPlacement(Br[nc%Br.length],cs,Ya,tc,rl,zt,Bt,ye,Z,nt,nc>=Br.length,ti,ki,z,Hc,ic,qe,Je);if(Gc&&(bc=Gc.placedGlyphBoxes,bc&&bc.box&&bc.box.length)){wi=!0,nr=Gc.shift;break}}return bc};Vr(()=>Jr(Zo,ci.iconBox,e.WritingMode.horizontal),()=>{const cs=ci.verticalTextBox;return cs&&ls(cs),z.allowVerticalPlacement&&!(wn&&wn.box&&wn.box.length)&&oi>0&&cs?Jr(cs,ci.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),wn&&(wi=wn.box,zi=wn.offscreen,Hi=wn.occluded);const da=ks(!(!wn||!wn.box));if(!wi&&this.prevPlacement){const cs=this.prevPlacement.variableOffsets[ji];cs&&(this.variableOffsets[ji]=cs,this.markUsedJustification(z,cs.anchor,ti,da))}}else{const Br=(Jr,da)=>{const cs=z.getSymbolInstanceTextSize(qe,ti,this.transform.zoom,ki),pa=this.collisionIndex.placeCollisionBox(z,cs,Jr,new e.Point(0,0),gt,ye,Z,nt.predicate);return pa&&pa.box&&pa.box.length&&(this.markUsedOrientation(z,da,ti),this.placedOrientations[ji]=da),pa};Vr(()=>Br(Zo,e.WritingMode.horizontal),()=>{const Jr=ci.verticalTextBox;return z.allowVerticalPlacement&&oi>0&&Jr?(ls(Jr),Br(Jr,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),ks(!!(wn&&wn.box&&wn.box.length))}}if(ar=wn,wi=ar&&ar.box&&ar.box.length>0,zi=ar&&ar.offscreen,Hi=ar&&ar.occluded,ti.useRuntimeCollisionCircles){const ks=z.text.placedSymbolArray.get(ti.centerJustifiedTextSymbolIndex>=0?ti.centerJustifiedTextSymbolIndex:ti.verticalPlacedTextSymbolIndex),Vr=e.evaluateSizeForFeature(z.textSizeData,qe,ks),Br=$.get("text-padding");Zn=this.collisionIndex.placeCollisionCircles(z,gt,ks,z.lineVertexArray,z.glyphOffsetArray,Vr,Z,Q,le,T,Bt,nt.predicate,ti.collisionCircleDiameter*Vr/e.ONE_EM,Br,this.retainedQueryData[z.bucketInstanceId].tileID),wi=gt||Zn.circles.length>0&&!Zn.collisionDetected,zi=zi&&Zn.offscreen,Hi=Zn.occluded}if(ci.iconFeatureIndex&&(as=ci.iconFeatureIndex),ci.iconBox){const ks=Vr=>{ls(Vr);const Br=Ft&&nr?Qn(nr.x,nr.y,zt,Bt,this.transform.angle):new e.Point(0,0),Jr=z.getSymbolInstanceIconSize(Je,this.transform.zoom,ti.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(z,Jr,Vr,Br,vt,ye,Z,nt.predicate)};jn&&jn.box&&jn.box.length&&ci.verticalIconBox?(On=ks(ci.verticalIconBox),Wi=On.box.length>0):(On=ks(ci.iconBox),Wi=On.box.length>0),zi=zi&&On.offscreen,Pn=On.occluded}const Ks=we||0===ti.numHorizontalGlyphVertices&&0===oi,qo=We||0===ti.numIconVertices;if(Ks||qo?qo?Ks||(Wi=Wi&&wi):wi=Wi&&wi:Wi=wi=Wi&&wi,wi&&ar&&ar.box&&this.collisionIndex.insertCollisionBox(ar.box,$.get("text-ignore-placement"),z.bucketInstanceId,jn&&jn.box&&ss?ss:br,nt.ID),Wi&&On&&this.collisionIndex.insertCollisionBox(On.box,$.get("icon-ignore-placement"),z.bucketInstanceId,as,nt.ID),Zn&&(wi&&this.collisionIndex.insertCollisionCircles(Zn.circles,$.get("text-ignore-placement"),z.bucketInstanceId,br,nt.ID),T)){const ks=z.bucketInstanceId;let Vr=this.collisionCircleArrays[ks];void 0===Vr&&(Vr=this.collisionCircleArrays[ks]=new gn);for(let Br=0;Br<Zn.circles.length;Br+=4)Vr.circles.push(Zn.circles[Br+0]),Vr.circles.push(Zn.circles[Br+1]),Vr.circles.push(Zn.circles[Br+2]),Vr.circles.push(Zn.collisionDetected?1:0)}const Nl="globe"!==z.projection.name;Ut=Ut&&(Nl||!Hi),li=li&&(Nl||!Pn),this.placements[ji]=new rn(wi||Ut,Wi||li,zi||z.justReloaded),p.add(ji)};if($t){const ti=z.getSortedSymbolIndexes(this.transform.angle);for(let ki=ti.length-1;ki>=0;--ki){const ci=ti[ki];Gi(z.symbolInstances.get(ci),ci,z.collisionArrays[ci])}}else for(let ti=a.symbolInstanceStart;ti<a.symbolInstanceEnd;ti++)Gi(z.symbolInstances.get(ti),ti,z.collisionArrays[ti]);if(T&&z.bucketInstanceId in this.collisionCircleArrays){const ti=this.collisionCircleArrays[z.bucketInstanceId];e.invert(ti.invProjMatrix,Z),ti.viewportMatrix=this.collisionIndex.getViewportMatrix()}z.justReloaded=!1}markUsedJustification(a,p,T,I){const{leftJustifiedTextSymbolIndex:z,centerJustifiedTextSymbolIndex:$,rightJustifiedTextSymbolIndex:Z,verticalPlacedTextSymbolIndex:Q,crossTileID:le}=T,oe=e.getAnchorJustification(p),ye=I===e.WritingMode.vertical?Q:"left"===oe?z:"center"===oe?$:"right"===oe?Z:-1;z>=0&&(a.text.placedSymbolArray.get(z).crossTileID=ye>=0&&z!==ye?0:le),$>=0&&(a.text.placedSymbolArray.get($).crossTileID=ye>=0&&$!==ye?0:le),Z>=0&&(a.text.placedSymbolArray.get(Z).crossTileID=ye>=0&&Z!==ye?0:le),Q>=0&&(a.text.placedSymbolArray.get(Q).crossTileID=ye>=0&&Q!==ye?0:le)}markUsedOrientation(a,p,T){const I=p===e.WritingMode.horizontal||p===e.WritingMode.horizontalOnly?p:0,z=p===e.WritingMode.vertical?p:0,{leftJustifiedTextSymbolIndex:$,centerJustifiedTextSymbolIndex:Z,rightJustifiedTextSymbolIndex:Q,verticalPlacedTextSymbolIndex:le}=T,oe=a.text.placedSymbolArray;$>=0&&(oe.get($).placedOrientation=I),Z>=0&&(oe.get(Z).placedOrientation=I),Q>=0&&(oe.get(Q).placedOrientation=I),le>=0&&(oe.get(le).placedOrientation=z)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let T=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const I=p?p.symbolFadeChange(a):1,z=p?p.opacities:{},$=p?p.variableOffsets:{},Z=p?p.placedOrientations:{};for(const Q in this.placements){const le=this.placements[Q],oe=z[Q];oe?(this.opacities[Q]=new yi(oe,I,le.text,le.icon,null,le.clipped),T=T||le.text!==oe.text.placed||le.icon!==oe.icon.placed):(this.opacities[Q]=new yi(null,I,le.text,le.icon,le.skipFade,le.clipped),T=T||le.text||le.icon)}for(const Q in z){const le=z[Q];if(!this.opacities[Q]){const oe=new yi(le,I,!1,!1);oe.isHidden()||(this.opacities[Q]=oe,T=T||le.text.placed||le.icon.placed)}}for(const Q in $)this.variableOffsets[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.variableOffsets[Q]=$[Q]);for(const Q in Z)this.placedOrientations[Q]||!this.opacities[Q]||this.opacities[Q].isHidden()||(this.placedOrientations[Q]=Z[Q]);T?this.lastPlacementChangeTime=a:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:a)}updateLayerOpacities(a,p){const T=new Set;for(const I of p){const z=I.getBucket(a);z&&I.latestFeatureIndex&&a.id===z.layerIds[0]&&this.updateBucketOpacities(z,T,I.collisionBoxArray)}}updateBucketOpacities(a,p,T){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const I=a.layers[0].layout,z=!!a.layers[0].dynamicFilter(),$=new yi(null,0,!1,!1,!0),Z=I.get("text-allow-overlap"),Q=I.get("icon-allow-overlap"),le=I.get("text-variable-anchor"),oe="map"===I.get("text-rotation-alignment"),ye="map"===I.get("text-pitch-alignment"),Be="none"!==I.get("icon-text-fit"),Ze=new yi(null,0,Z&&(Q||!a.hasIconData()||I.get("icon-optional")),Q&&(Z||!a.hasTextData()||I.get("text-optional")),!0);!a.collisionArrays&&T&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(T);const qe=(nt,we,We)=>{for(let gt=0;gt<we/4;gt++)nt.opacityVertexArray.emplaceBack(We)};let Je=0;for(let nt=0;nt<a.symbolInstances.length;nt++){const we=a.symbolInstances.get(nt),{numHorizontalGlyphVertices:We,numVerticalGlyphVertices:gt,crossTileID:vt,numIconVertices:zt}=we,Bt=p.has(vt);let Ft=this.opacities[vt];Bt?Ft=$:Ft||(Ft=Ze,this.opacities[vt]=Ft),p.add(vt);const $t=We>0||gt>0,Ut=zt>0,li=this.placedOrientations[vt],Gi=li===e.WritingMode.vertical,ti=li===e.WritingMode.horizontal||li===e.WritingMode.horizontalOnly;if(!$t&&!Ut||Ft.isHidden()||Je++,$t){const ki=sa(Ft.text);qe(a.text,We,Gi?Kr:ki),qe(a.text,gt,ti?Kr:ki);const ci=Ft.text.isHidden(),{leftJustifiedTextSymbolIndex:ji,centerJustifiedTextSymbolIndex:oi,rightJustifiedTextSymbolIndex:wi,verticalPlacedTextSymbolIndex:Wi}=we,zi=a.text.placedSymbolArray,Hi=ci||Gi?1:0;ji>=0&&(zi.get(ji).hidden=Hi),oi>=0&&(zi.get(oi).hidden=Hi),wi>=0&&(zi.get(wi).hidden=Hi),Wi>=0&&(zi.get(Wi).hidden=ci||ti?1:0);const Pn=this.variableOffsets[vt];Pn&&this.markUsedJustification(a,Pn.anchor,we,li);const nr=this.placedOrientations[vt];nr&&(this.markUsedJustification(a,"left",we,nr),this.markUsedOrientation(a,nr,we))}if(Ut){const ki=sa(Ft.icon),{placedIconSymbolIndex:ci,verticalPlacedIconSymbolIndex:ji}=we,oi=a.icon.placedSymbolArray,wi=Ft.icon.isHidden()?1:0;ci>=0&&(qe(a.icon,zt,Gi?Kr:ki),oi.get(ci).hidden=wi),ji>=0&&(qe(a.icon,we.numVerticalIconVertices,ti?Kr:ki),oi.get(ji).hidden=wi)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const ki=a.collisionArrays[nt];if(ki){let ci=new e.Point(0,0),ji=!0;if(ki.textBox||ki.verticalTextBox){if(le){const wi=this.variableOffsets[vt];wi?(ci=Jn(wi.anchor,wi.width,wi.height,wi.textOffset,wi.textScale),oe&&ci._rotate(ye?this.transform.angle:-this.transform.angle)):ji=!1}z&&(ji=!Ft.clipped),ki.textBox&&Pr(a.textCollisionBox.collisionVertexArray,Ft.text.placed,!ji||Gi,ci.x,ci.y),ki.verticalTextBox&&Pr(a.textCollisionBox.collisionVertexArray,Ft.text.placed,!ji||ti,ci.x,ci.y)}const oi=ji&&!(ti||!ki.verticalIconBox);ki.iconBox&&Pr(a.iconCollisionBox.collisionVertexArray,Ft.icon.placed,oi,Be?ci.x:0,Be?ci.y:0),ki.verticalIconBox&&Pr(a.iconCollisionBox.collisionVertexArray,Ft.icon.placed,!oi,Be?ci.x:0,Be?ci.y:0)}}}if(a.fullyClipped=0===Je,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const nt=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=nt.invProjMatrix,a.placementViewportMatrix=nt.viewportMatrix,a.collisionCircleArray=nt.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return 0===this.fadeDuration?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,p){const T=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*T>a}setStale(){this.stale=!0}}function Pr(b,a,p,T,I){b.emplaceBack(a?1:0,p?1:0,T||0,I||0),b.emplaceBack(a?1:0,p?1:0,T||0,I||0),b.emplaceBack(a?1:0,p?1:0,T||0,I||0),b.emplaceBack(a?1:0,p?1:0,T||0,I||0)}const Rr=Math.pow(2,25),yr=Math.pow(2,24),Un=Math.pow(2,17),Wr=Math.pow(2,16),Yn=Math.pow(2,9),zr=Math.pow(2,8),qa=Math.pow(2,1);function sa(b){if(0===b.opacity&&!b.placed)return 0;if(1===b.opacity&&b.placed)return 4294967295;const a=b.placed?1:0,p=Math.floor(127*b.opacity);return p*Rr+a*yr+p*Un+a*Wr+p*Yn+a*zr+p*qa+a}const Kr=0;class So{constructor(a){this._sortAcrossTiles="viewport-y"!==a.layout.get("symbol-z-order")&&void 0!==a.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,p,T,I,z){const $=this._bucketParts;for(;this._currentTileIndex<a.length;)if(p.getBucketParts($,I,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,z())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,$.sort((Z,Q)=>Z.sortKey-Q.sortKey));this._currentPartIndex<$.length;){const Z=$[this._currentPartIndex];if(p.placeLayerBucketPart(Z,this._seenCrossTileIDs,T,0===Z.symbolInstanceStart),this._currentPartIndex++,z())return!0}return!1}}class Dl{constructor(a,p,T,I,z,$,Z,Q){this.placement=new wr(a,z,$,Z,Q),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=T,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(a,p,T){const I=e.exported.now(),z=()=>{const $=e.exported.now()-I;return!this._forceFullPlacement&&$>2};for(;this._currentPlacementIndex>=0;){const $=p[a[this._currentPlacementIndex]],Z=this.placement.collisionIndex.transform.zoom;if("symbol"===$.type&&(!$.minzoom||$.minzoom<=Z)&&(!$.maxzoom||$.maxzoom>Z)){if(this._inProgressLayer||(this._inProgressLayer=new So($)),this._inProgressLayer.continuePlacement(T[$.source],this.placement,this._showCollisionBoxes,$,z))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const go=512/e.EXTENT/2;class Fr{constructor(a,p,T){this.tileID=a,this.bucketInstanceId=T,this.index=new e.KDBush(p.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const I=a.canonical.x*e.EXTENT,z=a.canonical.y*e.EXTENT;for(let $=0;$<p.length;$++){const{key:Z,crossTileID:Q,tileAnchorX:le,tileAnchorY:oe}=p.get($),ye=Math.floor((I+le)*go),Be=Math.floor((z+oe)*go);this.index.add(ye,Be),this.keys.push(Z),this.crossTileIDs.push(Q)}this.index.finish()}findMatches(a,p,T){const I=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),z=go/Math.pow(2,p.canonical.z-this.tileID.canonical.z),$=p.canonical.x*e.EXTENT,Z=p.canonical.y*e.EXTENT;for(let Q=0;Q<a.length;Q++){const le=a.get(Q);if(le.crossTileID)continue;const{key:oe,tileAnchorX:ye,tileAnchorY:Be}=le,Ze=Math.floor(($+ye)*z),qe=Math.floor((Z+Be)*z),Je=this.index.range(Ze-I,qe-I,Ze+I,qe+I);for(const nt of Je){const we=this.crossTileIDs[nt];if(this.keys[nt]===oe&&!T.has(we)){T.add(we),le.crossTileID=we;break}}}}}class eo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const p=Math.round((a-this.lng)/360);if(0!==p)for(const T in this.indexes){const I=this.indexes[T],z={};for(const $ in I){const Z=I[$];Z.tileID=Z.tileID.unwrapTo(Z.tileID.wrap+p),z[Z.tileID.key]=Z}this.indexes[T]=z}this.lng=a}addBucket(a,p,T){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let z=0;z<p.symbolInstances.length;z++)p.symbolInstances.get(z).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const I=this.usedCrossTileIDs[a.overscaledZ];for(const z in this.indexes){const $=this.indexes[z];if(Number(z)>a.overscaledZ)for(const Z in $){const Q=$[Z];Q.tileID.isChildOf(a)&&Q.findMatches(p.symbolInstances,a,I)}else{const Z=$[a.scaledTo(Number(z)).key];Z&&Z.findMatches(p.symbolInstances,a,I)}}for(let z=0;z<p.symbolInstances.length;z++){const $=p.symbolInstances.get(z);$.crossTileID||($.crossTileID=T.generate(),I.add($.crossTileID))}return void 0===this.indexes[a.overscaledZ]&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Fr(a,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(a,p){for(const T of p.crossTileIDs)this.usedCrossTileIDs[a].delete(T)}removeStaleBuckets(a){let p=!1;for(const T in this.indexes){const I=this.indexes[T];for(const z in I)a[I[z].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,I[z]),delete I[z],p=!0)}return p}}class _a{constructor(){this.layerIndexes={},this.crossTileIDs=new eo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,p,T,I){let z=this.layerIndexes[a.id];void 0===z&&(z=this.layerIndexes[a.id]=new Zl);let $=!1;const Z={};"globe"!==I.name&&z.handleWrapJump(T);for(const Q of p){const le=Q.getBucket(a);le&&a.id===le.layerIds[0]&&(le.bucketInstanceId||(le.bucketInstanceId=++this.maxBucketInstanceId),z.addBucket(Q.tileID,le,this.crossTileIDs)&&($=!0),Z[le.bucketInstanceId]=!0)}return z.removeStaleBuckets(Z)&&($=!0),$}pruneUnusedLayers(a){const p={};a.forEach(T=>{p[T]=!0});for(const T in this.layerIndexes)p[T]||delete this.layerIndexes[T]}}const zo=(b,a)=>e.emitValidationErrors(b,a&&a.filter(p=>"source.canvas"!==p.identifier)),dl=e.pick(Dn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),mc=e.pick(Dn,["setCenter","setZoom","setBearing","setPitch"]),Rc={version:8,layers:[],sources:{}},pl={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class lr extends e.Evented{constructor(a,p={}){super(),this.map=a,this.dispatcher=new Mi(Qi(),this),this.imageManager=new Yt,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(a._requestManager,p.localFontFamily?e.LocalGlyphMode.all:p.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,p.localFontFamily||p.localIdeographFontFamily),this.crossTileSymbolIndex=new _a,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const T=this;this._rtlTextPluginCallback=lr.registerForPluginStateChange(I=>{T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:I.pluginStatus,pluginURL:I.pluginURL},(z,$)=>{if(e.triggerPluginCompletionEvent(z),$&&$.every(Z=>Z))for(const Z in T._sourceCaches){const Q=T._sourceCaches[Z],le=Q.getSource().type;"vector"!==le&&"geojson"!==le||Q.reload()}})}),this.on("data",I=>{if("source"!==I.dataType||"metadata"!==I.sourceDataType)return;const z=this.getSource(I.sourceId);if(z&&z.vectorLayerIds)for(const $ in this._layers){const Z=this._layers[$];Z.source===z.id&&this._validateLayer(Z)}})}loadURL(a,p={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const T="boolean"==typeof p.validate?p.validate:!e.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,p.accessToken);const I=this.map._requestManager.transformRequest(a,e.ResourceType.Style);this._request=e.getJSON(I,(z,$)=>{this._request=null,z?this.fire(new e.ErrorEvent(z)):$&&this._load($,T)})}loadJSON(a,p={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame(()=>{this._request=null,this._load(a,!1!==p.validate)})}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Rc,!1)}_updateLayerCount(a,p){const T=p?1:-1;a.is3D()&&(this._num3DLayers+=T),"circle"===a.type&&(this._numCircleLayers+=T),"symbol"===a.type&&(this._numSymbolLayers+=T)}_load(a,p){if(p&&zo(this,e.validateStyle(a)))return;this._loaded=!0,this.stylesheet=e.clone$1(a),this._updateMapProjection();for(const I in a.sources)this.addSource(I,a.sources[I],{validate:!1});this._changed=!1,a.sprite?this._loadSprite(a.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(a.glyphs);const T=Tn(this.stylesheet.layers);this._order=T.map(I=>I.id),this._layers={},this._serializedLayers={};for(const I of T){const z=e.createStyleLayer(I);z.setEventedParent(this,{layer:{id:z.id}}),this._layers[z.id]=z,this._serializedLayers[z.id]=z.serialize(),this._updateLayerCount(z,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ct(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(a){this._spriteRequest=function(p,T,I){let z,$,Z;const Q=e.exported.devicePixelRatio>1?"@2x":"";let le=e.getJSON(T.transformRequest(T.normalizeSpriteURL(p,Q,".json"),e.ResourceType.SpriteJSON),(Be,Ze)=>{le=null,Z||(Z=Be,z=Ze,ye())}),oe=e.getImage(T.transformRequest(T.normalizeSpriteURL(p,Q,".png"),e.ResourceType.SpriteImage),(Be,Ze)=>{oe=null,Z||(Z=Be,$=Ze,ye())});function ye(){if(Z)I(Z);else if(z&&$){const Be=e.exported.getImageData($),Ze={};for(const qe in z){const{width:Je,height:nt,x:we,y:We,sdf:gt,pixelRatio:vt,stretchX:zt,stretchY:Bt,content:Ft}=z[qe],$t=new e.RGBAImage({width:Je,height:nt});e.RGBAImage.copy(Be,$t,{x:we,y:We},{x:0,y:0},{width:Je,height:nt}),Ze[qe]={data:$t,pixelRatio:vt,sdf:gt,stretchX:zt,stretchY:Bt,content:Ft}}I(null,Ze)}}return{cancel(){le&&(le.cancel(),le=null),oe&&(oe.cancel(),oe=null)}}}(a,this.map._requestManager,(p,T)=>{if(this._spriteRequest=null,p)this.fire(new e.ErrorEvent(p));else if(T)for(const I in T)this.imageManager.addImage(I,T[I]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))})}_validateLayer(a){const p=this.getSource(a.source);if(!p)return;const T=a.sourceLayer;T&&("geojson"===p.type||p.vectorLayerIds&&-1===p.vectorLayerIds.indexOf(T))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${T}" does not exist on source "${p.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(a){const p=[];for(const T of a){const I=this._layers[T];"custom"!==I.type&&p.push(I.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(a){return!!this.terrain&&("function"==typeof a.isLayerDraped?a.isLayerDraped():pl[a.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(a){if(!this._loaded)return;const p=this._changed;if(this._changed){const I=Object.keys(this._updatedLayers),z=Object.keys(this._removedLayers);(I.length||z.length)&&this._updateWorkerLayers(I,z);for(const $ in this._updatedSources){const Z=this._updatedSources[$];"reload"===Z?this._reloadSource($):"clear"===Z&&this._clearSource($)}this._updateTilesForChangedImages();for(const $ in this._updatedPaintProps)this._layers[$].updateTransitions(a);this.light.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this._resetUpdates()}const T={};for(const I in this._sourceCaches){const z=this._sourceCaches[I];T[I]=z.used,z.used=!1}for(const I of this._order){const z=this._layers[I];if(z.recalculate(a,this._availableImages),!z.isHidden(a.zoom)){const Z=this._getLayerSourceCache(z);Z&&(Z.used=!0)}const $=this.map.painter;if($){const Z=z.getProgramIds();if(!Z)continue;const Q=z.getProgramConfiguration(a.zoom);for(const le of Z)$.useProgram(le,Q)}}for(const I in T){const z=this._sourceCaches[I];T[I]!==z.used&&z.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:z.getSource().id}))}this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),p&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const p in this._sourceCaches)this._sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateWorkerLayers(a,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(a){if(this._checkLoaded(),zo(this,e.validateStyle(a)))return!1;(a=e.clone$1(a)).layers=Tn(a.layers);const p=function(I,z){if(!I)return[{command:Dn.setStyle,args:[z]}];let $=[];try{if(!Y(I.version,z.version))return[{command:Dn.setStyle,args:[z]}];Y(I.center,z.center)||$.push({command:Dn.setCenter,args:[z.center]}),Y(I.zoom,z.zoom)||$.push({command:Dn.setZoom,args:[z.zoom]}),Y(I.bearing,z.bearing)||$.push({command:Dn.setBearing,args:[z.bearing]}),Y(I.pitch,z.pitch)||$.push({command:Dn.setPitch,args:[z.pitch]}),Y(I.sprite,z.sprite)||$.push({command:Dn.setSprite,args:[z.sprite]}),Y(I.glyphs,z.glyphs)||$.push({command:Dn.setGlyphs,args:[z.glyphs]}),Y(I.transition,z.transition)||$.push({command:Dn.setTransition,args:[z.transition]}),Y(I.light,z.light)||$.push({command:Dn.setLight,args:[z.light]}),Y(I.fog,z.fog)||$.push({command:Dn.setFog,args:[z.fog]}),Y(I.projection,z.projection)||$.push({command:Dn.setProjection,args:[z.projection]});const Z={},Q=[];!function(ye,Be,Ze,qe){let Je;for(Je in Be=Be||{},ye=ye||{})ye.hasOwnProperty(Je)&&(Be.hasOwnProperty(Je)||tt(Je,Ze,qe));for(Je in Be){if(!Be.hasOwnProperty(Je))continue;const nt=Be[Je];ye.hasOwnProperty(Je)?Y(ye[Je],nt)||("geojson"===ye[Je].type&&"geojson"===nt.type&&ue(ye,Be,Je)?Ze.push({command:Dn.setGeoJSONSourceData,args:[Je,nt.data]}):di(Je,Be,Ze,qe)):In(Je,Be,Ze)}}(I.sources,z.sources,Q,Z);const le=[];I.layers&&I.layers.forEach(ye=>{ye.source&&Z[ye.source]?$.push({command:Dn.removeLayer,args:[ye.id]}):le.push(ye)});let oe=I.terrain;oe&&Z[oe.source]&&($.push({command:Dn.setTerrain,args:[void 0]}),oe=void 0),$=$.concat(Q),Y(oe,z.terrain)||$.push({command:Dn.setTerrain,args:[z.terrain]}),function(ye,Be,Ze){Be=Be||[];const qe=(ye=ye||[]).map(s),Je=Be.map(s),nt=ye.reduce(c,{}),we=Be.reduce(c,{}),We=qe.slice(),gt=Object.create(null);let vt,zt,Bt,Ft,$t,Ut,li;for(vt=0,zt=0;vt<qe.length;vt++)Bt=qe[vt],we.hasOwnProperty(Bt)?zt++:(Ze.push({command:Dn.removeLayer,args:[Bt]}),We.splice(We.indexOf(Bt,zt),1));for(vt=0,zt=0;vt<Je.length;vt++)Bt=Je[Je.length-1-vt],We[We.length-1-vt]!==Bt&&(nt.hasOwnProperty(Bt)?(Ze.push({command:Dn.removeLayer,args:[Bt]}),We.splice(We.lastIndexOf(Bt,We.length-zt),1)):zt++,Ut=We[We.length-vt],Ze.push({command:Dn.addLayer,args:[we[Bt],Ut]}),We.splice(We.length-vt,0,Bt),gt[Bt]=!0);for(vt=0;vt<Je.length;vt++)if(Bt=Je[vt],Ft=nt[Bt],$t=we[Bt],!gt[Bt]&&!Y(Ft,$t))if(Y(Ft.source,$t.source)&&Y(Ft["source-layer"],$t["source-layer"])&&Y(Ft.type,$t.type)){for(li in n(Ft.layout,$t.layout,Ze,Bt,null,Dn.setLayoutProperty),n(Ft.paint,$t.paint,Ze,Bt,null,Dn.setPaintProperty),Y(Ft.filter,$t.filter)||Ze.push({command:Dn.setFilter,args:[Bt,$t.filter]}),Y(Ft.minzoom,$t.minzoom)&&Y(Ft.maxzoom,$t.maxzoom)||Ze.push({command:Dn.setLayerZoomRange,args:[Bt,$t.minzoom,$t.maxzoom]}),Ft)Ft.hasOwnProperty(li)&&"layout"!==li&&"paint"!==li&&"filter"!==li&&"metadata"!==li&&"minzoom"!==li&&"maxzoom"!==li&&(0===li.indexOf("paint.")?n(Ft[li],$t[li],Ze,Bt,li.slice(6),Dn.setPaintProperty):Y(Ft[li],$t[li])||Ze.push({command:Dn.setLayerProperty,args:[Bt,li,$t[li]]}));for(li in $t)$t.hasOwnProperty(li)&&!Ft.hasOwnProperty(li)&&"layout"!==li&&"paint"!==li&&"filter"!==li&&"metadata"!==li&&"minzoom"!==li&&"maxzoom"!==li&&(0===li.indexOf("paint.")?n(Ft[li],$t[li],Ze,Bt,li.slice(6),Dn.setPaintProperty):Y(Ft[li],$t[li])||Ze.push({command:Dn.setLayerProperty,args:[Bt,li,$t[li]]}))}else Ze.push({command:Dn.removeLayer,args:[Bt]}),Ut=We[We.lastIndexOf(Bt)+1],Ze.push({command:Dn.addLayer,args:[$t,Ut]})}(le,z.layers,$)}catch(Z){console.warn("Unable to compute style diff:",Z),$=[{command:Dn.setStyle,args:[z]}]}return $}(this.serialize(),a).filter(I=>!(I.command in mc));if(0===p.length)return!1;const T=p.filter(I=>!(I.command in dl));if(T.length>0)throw new Error(`Unimplemented: ${T.map(I=>I.command).join(", ")}.`);return p.forEach(I=>{"setTransition"!==I.command&&"setProjection"!==I.command&&this[I.command].apply(this,I.args)}),this.stylesheet=a,this._updateMapProjection(),!0}addImage(a,p){return this.getImage(a)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(a,p),this._afterImageUpdated(a),this)}updateImage(a,p){this.imageManager.updateImage(a,p)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a),this._afterImageUpdated(a),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(a,p,T={}){if(this._checkLoaded(),void 0!==this.getSource(a))throw new Error("There is already a source with this ID");if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(e.validateSource,`sources.${a}`,p,null,T))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const I=Ue(a,p,this.dispatcher,this);I.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(a),source:I.serialize(),sourceId:a}));const z=$=>{const Z=($?"symbol:":"other:")+a,Q=this._sourceCaches[Z]=new e.SourceCache(Z,I,$);($?this._symbolSourceCaches:this._otherSourceCaches)[a]=Q,Q.style=this,Q.onAdd(this.map)};z(!1),"vector"!==p.type&&"geojson"!==p.type||z(!0),I.onAdd&&I.onAdd(this.map),this._changed=!0}removeSource(a){this._checkLoaded();const p=this.getSource(a);if(!p)throw new Error("There is no source with this ID");for(const I in this._layers)if(this._layers[I].source===a)return this.fire(new e.ErrorEvent(new Error(`Source "${a}" cannot be removed while layer "${I}" is using it.`)));if(this.terrain&&this.terrain.get().source===a)return this.fire(new e.ErrorEvent(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));const T=this._getSourceCaches(a);for(const I of T)delete this._sourceCaches[I.id],delete this._updatedSources[I.id],I.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:I.getSource().id})),I.setEventedParent(null),I.clearTiles();return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],p.setEventedParent(null),p.onRemove&&p.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(a,p){this._checkLoaded(),this.getSource(a).setData(p),this._changed=!0}getSource(a){const p=this._getSourceCache(a);return p&&p.getSource()}_getSources(){const a=[];for(const p in this._otherSourceCaches){const T=this._getSourceCache(p);T&&a.push(T.getSource())}return a}addLayer(a,p,T={}){this._checkLoaded();const I=a.id;if(this.getLayer(I))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${I}" already exists on this map`)));let z;if("custom"===a.type){if(zo(this,e.validateCustomStyleLayer(a)))return;z=e.createStyleLayer(a)}else{if("object"==typeof a.source&&(this.addSource(I,a.source),a=e.clone$1(a),a=e.extend(a,{source:I})),this._validate(e.validateLayer,`layers.${I}`,a,{arrayIndex:-1},T))return;z=e.createStyleLayer(a),this._validateLayer(z),z.setEventedParent(this,{layer:{id:I}}),this._serializedLayers[z.id]=z.serialize(),this._updateLayerCount(z,!0)}const $=p?this._order.indexOf(p):this._order.length;if(p&&-1===$)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`)));this._order.splice($,0,I),this._layerOrderChanged=!0,this._layers[I]=z;const Z=this._getLayerSourceCache(z);if(this._removedLayers[I]&&z.source&&Z&&"custom"!==z.type){const Q=this._removedLayers[I];delete this._removedLayers[I],Q.type!==z.type?this._updatedSources[z.source]="clear":(this._updatedSources[z.source]="reload",Z.pause())}this._updateLayer(z),z.onAdd&&z.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(a,p){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new e.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===p)return;const T=this._order.indexOf(a);this._order.splice(T,1);const I=p?this._order.indexOf(p):this._order.length;p&&-1===I?this.fire(new e.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`))):(this._order.splice(I,0,a),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(a){this._checkLoaded();const p=this._layers[a];if(!p)return void this.fire(new e.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be removed.`)));p.setEventedParent(null),this._updateLayerCount(p,!1);const T=this._order.indexOf(a);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=p,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],p.onRemove&&p.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(a){return this._layers[a]}hasLayer(a){return a in this._layers}hasLayerType(a){for(const p in this._layers)if(this._layers[p].type===a)return!0;return!1}setLayerZoomRange(a,p,T){this._checkLoaded();const I=this.getLayer(a);I?I.minzoom===p&&I.maxzoom===T||(null!=p&&(I.minzoom=p),null!=T&&(I.maxzoom=T),this._updateLayer(I)):this.fire(new e.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(a,p,T={}){this._checkLoaded();const I=this.getLayer(a);if(I){if(!Y(I.filter,p))return null==p?(I.filter=void 0,void this._updateLayer(I)):void(this._validate(e.validateFilter,`layers.${I.id}.filter`,p,{layerType:I.type},T)||(I.filter=e.clone$1(p),this._updateLayer(I)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be filtered.`)))}getFilter(a){const p=this.getLayer(a);return p&&e.clone$1(p.filter)}setLayoutProperty(a,p,T,I={}){this._checkLoaded();const z=this.getLayer(a);z?Y(z.getLayoutProperty(p),T)||(z.setLayoutProperty(p,T,I),this._updateLayer(z)):this.fire(new e.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(a,p){const T=this.getLayer(a);if(T)return T.getLayoutProperty(p);this.fire(new e.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style.`)))}setPaintProperty(a,p,T,I={}){this._checkLoaded();const z=this.getLayer(a);z?Y(z.getPaintProperty(p),T)||(z.setPaintProperty(p,T,I)&&this._updateLayer(z),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(a,p){const T=this.getLayer(a);return T&&T.getPaintProperty(p)}setFeatureState(a,p){this._checkLoaded();const T=a.source,I=a.sourceLayer,z=this.getSource(T);if(!z)return void this.fire(new e.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const $=z.type;if("geojson"===$&&I)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===$&&!I)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===a.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const Z=this._getSourceCaches(T);for(const Q of Z)Q.setFeatureState(I,a.id,p)}removeFeatureState(a,p){this._checkLoaded();const T=a.source,I=this.getSource(T);if(!I)return void this.fire(new e.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const z=I.type,$="vector"===z?a.sourceLayer:void 0;if("vector"===z&&!$)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(p&&"string"!=typeof a.id&&"number"!=typeof a.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const Z=this._getSourceCaches(T);for(const Q of Z)Q.removeFeatureState($,a.id,p)}getFeatureState(a){this._checkLoaded();const p=a.source,T=a.sourceLayer,I=this.getSource(p);if(I){if("vector"!==I.type||T)return void 0===a.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(p)[0].getFeatureState(T,a.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const a={};for(const p in this._sourceCaches){const T=this._sourceCaches[p].getSource();a[T.id]||(a[T.id]=T.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:a,layers:this._serializeLayers(this._order)},p=>void 0!==p)}_updateLayer(a){this._updatedLayers[a.id]=!0;const p=this._getLayerSourceCache(a);a.source&&!this._updatedSources[a.source]&&p&&"raster"!==p.getSource().type&&(this._updatedSources[a.source]="reload",p.pause()),this._changed=!0,a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const p=$=>"fill-extrusion"===this._layers[$].type,T={},I=[];for(let $=this._order.length-1;$>=0;$--){const Z=this._order[$];if(p(Z)){T[Z]=$;for(const Q of a){const le=Q[Z];if(le)for(const oe of le)I.push(oe)}}}I.sort(($,Z)=>Z.intersectionZ-$.intersectionZ);const z=[];for(let $=this._order.length-1;$>=0;$--){const Z=this._order[$];if(p(Z))for(let Q=I.length-1;Q>=0;Q--){const le=I[Q].feature;if(T[le.layer.id]<$)break;z.push(le),I.pop()}else for(const Q of a){const le=Q[Z];if(le)for(const oe of le)z.push(oe.feature)}}return z}queryRenderedFeatures(a,p,T){p&&p.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",p.filter,null,p);const I={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const Q of p.layers){const le=this._layers[Q];if(!le)return this.fire(new e.ErrorEvent(new Error(`The layer '${Q}' does not exist in the map's style and cannot be queried for features.`))),[];I[le.source]=!0}}const z=[];p.availableImages=this._availableImages;const $=p&&p.layers?p.layers.some(Q=>{const le=this.getLayer(Q);return le&&le.is3D()}):this.has3DLayers(),Z=mn.createFromScreenPoints(a,T);for(const Q in this._sourceCaches){const le=this._sourceCaches[Q].getSource().id;p.layers&&!I[le]||z.push(Le(this._sourceCaches[Q],this._layers,this._serializedLayers,Z,p,T,$,!!this.map._showQueryGeometry))}return this.placement&&z.push(function(Q,le,oe,ye,Be,Ze,qe){const Je={},nt=Ze.queryRenderedSymbols(ye),we=[];for(const We of Object.keys(nt).map(Number))we.push(qe[We]);we.sort(ht);for(const We of we){const gt=We.featureIndex.lookupSymbolFeatures(nt[We.bucketInstanceId],le,We.bucketIndex,We.sourceLayerIndex,Be.filter,Be.layers,Be.availableImages,Q);for(const vt in gt){const zt=Je[vt]=Je[vt]||[],Bt=gt[vt];Bt.sort((Ft,$t)=>{const Ut=We.featureSortOrder;if(Ut){const li=Ut.indexOf(Ft.featureIndex);return Ut.indexOf($t.featureIndex)-li}return $t.featureIndex-Ft.featureIndex});for(const Ft of Bt)zt.push(Ft)}}for(const We in Je)Je[We].forEach(gt=>{const vt=gt.feature,zt=oe(Q[We]);if(!zt)return;const Bt=zt.getFeatureState(vt.layer["source-layer"],vt.id);vt.source=vt.layer.source,vt.layer["source-layer"]&&(vt.sourceLayer=vt.layer["source-layer"]),vt.state=Bt});return Je}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),Z.screenGeometry,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(z)}querySourceFeatures(a,p){p&&p.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",p.filter,null,p);const T=this._getSourceCaches(a);let I=[];for(const z of T)I=I.concat(Fe(z,p));return I}addSourceType(a,p,T){return lr.getSourceType(a)?T(new Error(`A source type called "${a}" already exists.`)):(lr.setSourceType(a,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:p.workerSourceURL},T):T(null,null))}getLight(){return this.light.getLight()}setLight(a,p={}){this._checkLoaded();const T=this.light.getLight();let I=!1;for(const $ in a)if(!Y(a[$],T[$])){I=!0;break}if(!I)return;const z=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(a,p),this.light.updateTransitions(z)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(a,p=1){if(this._checkLoaded(),!a)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let T=a;if(1===p){if("object"==typeof T.source){const I="terrain-dem-src";this.addSource(I,T.source),T=e.clone$1(T),T=e.extend(T,{source:I})}if(this._validate(e.validateTerrain,"terrain",T))return}if(!this.terrain||this.terrain&&p!==this.terrain.drapeRenderMode){if(!T)return;this._createTerrain(T,p)}else{const I=this.terrain,z=I.get();for(const $ of Object.keys(e.spec.terrain))!T.hasOwnProperty($)&&e.spec.terrain[$].default&&(T[$]=e.spec.terrain[$].default);for(const $ in T)if(!Y(T[$],z[$])){I.set(T),this.stylesheet.terrain=T;const Z=this._setTransitionParameters({duration:0});I.updateTransitions(Z);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const p=this.fog=new fi(a,this.map.transform);this.stylesheet.fog=a;const T=this._setTransitionParameters({duration:0});p.updateTransitions(T)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const p=this.fog,T=p.get();0===Object.keys(a).length&&p.set(a);for(const I in a)if(!Y(a[I],T[I])){p.set(a),this.stylesheet.fog=a;const z=this._setTransitionParameters({duration:0});p.updateTransitions(z);break}}else this._createFog(a);this._markersNeedUpdate=!0}_setTransitionParameters(a){return{now:e.exported.now(),transition:e.extend(a,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const a=this._order.filter(T=>this.isLayerDraped(this._layers[T])),p=this._order.filter(T=>!this.isLayerDraped(this._layers[T]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...p)}_createTerrain(a,p){const T=this.terrain=new qt(a,p);this.stylesheet.terrain=a,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const I=this._setTransitionParameters({duration:0});T.updateTransitions(I)}_force3DLayerUpdate(){for(const a in this._layers){const p=this._layers[a];"fill-extrusion"===p.type&&this._updateLayer(p)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const p=this._layers[a];"symbol"===p.type&&this._updateLayer(p)}}_validate(a,p,T,I,z={}){return(!z||!1!==z.validate)&&zo(this,a.call(e.validateStyle,e.extend({key:p,style:this.serialize(),value:T,styleSpec:e.spec},I)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this._sourceCaches)this._sourceCaches[a].clearTiles(),this._sourceCaches[a].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(a){const p=this._getSourceCaches(a);for(const T of p)T.clearTiles()}_reloadSource(a){const p=this._getSourceCaches(a);for(const T of p)T.resume(),T.reload()}_reloadSources(){for(const a of this._getSources())a.reload&&a.reload()}_updateSources(a){for(const p in this._sourceCaches)this._sourceCaches[p].update(a)}_generateCollisionBoxes(){for(const a in this._sourceCaches){const p=this._sourceCaches[a];p.resume(),p.reload()}}_updatePlacement(a,p,T,I,z=!1){let $=!1,Z=!1;const Q={};for(const le of this._order){const oe=this._layers[le];if("symbol"!==oe.type)continue;if(!Q[oe.source]){const Be=this._getLayerSourceCache(oe);if(!Be)continue;Q[oe.source]=Be.getRenderableIds(!0).map(Ze=>Be.getTileByID(Ze)).sort((Ze,qe)=>qe.tileID.overscaledZ-Ze.tileID.overscaledZ||(Ze.tileID.isLessThan(qe.tileID)?-1:1))}const ye=this.crossTileSymbolIndex.addLayer(oe,Q[oe.source],a.center.lng,a.projection);$=$||ye}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),z=z||this._layerOrderChanged||0===T,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(z||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),a.zoom))&&(this.pauseablePlacement=new Dl(a,this._order,z,p,T,I,this.placement,this.fog&&a.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),Z=!0),$&&this.pauseablePlacement.placement.setStale()),Z||$)for(const le of this._order){const oe=this._layers[le];"symbol"===oe.type&&this.placement.updateLayerOpacities(oe,Q[oe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,p,T){this.imageManager.getImages(p.icons,T),this._updateTilesForChangedImages();const I=z=>{z&&z.setDependencies(p.tileID.key,p.type,p.icons)};I(this._otherSourceCaches[p.source]),I(this._symbolSourceCaches[p.source])}getGlyphs(a,p,T){this.glyphManager.getGlyphs(p.stacks,T)}getResource(a,p,T){return e.makeRequest(p,T)}_getSourceCache(a){return this._otherSourceCaches[a]}_getLayerSourceCache(a){return"symbol"===a.type?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}_getSourceCaches(a){const p=[];return this._otherSourceCaches[a]&&p.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&p.push(this._symbolSourceCaches[a]),p}_isSourceCacheLoaded(a){const p=this._getSourceCaches(a);return 0===p.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${a}'`))),!1):p.every(T=>T.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}lr.getSourceType=function(b){return ot[b]},lr.setSourceType=function(b,a){ot[b]=a},lr.registerForPluginStateChange=e.registerForPluginStateChange;var gc="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Bs="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ps="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Il="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Fo="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let Ka={},fl={};const Aa=[];lo(gc,Aa),lo(Ps,Aa),lo(Il,Aa),lo(Fo,Aa),Ka=Mr("",Ps),fl=Mr(Fo,Il);const zc=Mr("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Al=gc,Bo="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var ml={background:Mr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Mr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Mr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Mr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Mr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Mr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Mr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Mr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Mr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Mr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Mr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Mr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Mr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Mr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Mr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Mr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Mr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Bs),skyboxGradient:Mr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Bs),skyboxCapture:Mr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Mr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function lo(b,a){const p=b.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let T of p)if(T=T.trim(),"#"===T[0]&&T.includes("if")&&!T.includes("endif")){T=T.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const I=T.split(" ");for(const z of I)a.includes(z)||a.push(z)}}function Mr(b,a){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=a.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),I={},z=[...Aa];return lo(b,z),lo(a,z),{fragmentSource:b=b.replace(p,($,Z,Q,le,oe)=>(I[oe]=!0,"define"===Z?`\n#ifndef HAS_UNIFORM_u_${oe}\nvarying ${Q} ${le} ${oe};\n#else\nuniform ${Q} ${le} u_${oe};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${oe}\n    ${Q} ${le} ${oe} = u_${oe};\n#endif\n`)),vertexSource:a=a.replace(p,($,Z,Q,le,oe)=>{const ye="float"===le?"vec2":"vec4",Be=oe.match(/color/)?"color":ye;return I[oe]?"define"===Z?`\n#ifndef HAS_UNIFORM_u_${oe}\nuniform lowp float u_${oe}_t;\nattribute ${Q} ${ye} a_${oe};\nvarying ${Q} ${le} ${oe};\n#else\nuniform ${Q} ${le} u_${oe};\n#endif\n`:"vec4"===Be?`\n#ifndef HAS_UNIFORM_u_${oe}\n    ${oe} = a_${oe};\n#else\n    ${Q} ${le} ${oe} = u_${oe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${oe}\n    ${oe} = unpack_mix_${Be}(a_${oe}, u_${oe}_t);\n#else\n    ${Q} ${le} ${oe} = u_${oe};\n#endif\n`:"define"===Z?`\n#ifndef HAS_UNIFORM_u_${oe}\nuniform lowp float u_${oe}_t;\nattribute ${Q} ${ye} a_${oe};\n#else\nuniform ${Q} ${le} u_${oe};\n#endif\n`:"vec4"===Be?`\n#ifndef HAS_UNIFORM_u_${oe}\n    ${Q} ${le} ${oe} = a_${oe};\n#else\n    ${Q} ${le} ${oe} = u_${oe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${oe}\n    ${Q} ${le} ${oe} = unpack_mix_${Be}(a_${oe}, u_${oe}_t);\n#else\n    ${Q} ${le} ${oe} = u_${oe};\n#endif\n`}),staticAttributes:T,usedDefines:z}}class au{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,p,T,I,z,$,Z){this.context=a;let Q=this.boundPaintVertexBuffers.length!==I.length;for(let oe=0;!Q&&oe<I.length;oe++)this.boundPaintVertexBuffers[oe]!==I[oe]&&(Q=!0);let le=this.boundDynamicVertexBuffers.length!==Z.length;for(let oe=0;!le&&oe<Z.length;oe++)this.boundDynamicVertexBuffers[oe]!==Z[oe]&&(le=!0);if(!a.extVertexArrayObject||!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==T||Q||le||this.boundIndexBuffer!==z||this.boundVertexOffset!==$)this.freshBind(p,T,I,z,$,Z);else{a.bindVertexArrayOES.set(this.vao);for(const oe of Z)oe&&oe.bind();z&&z.dynamicDraw&&z.bind()}}freshBind(a,p,T,I,z,$){let Z;const Q=a.numAttributes,le=this.context,oe=le.gl;if(le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=le.extVertexArrayObject.createVertexArrayOES(),le.bindVertexArrayOES.set(this.vao),Z=0,this.boundProgram=a,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=I,this.boundVertexOffset=z,this.boundDynamicVertexBuffers=$;else{Z=le.currentNumAttributes||0;for(let ye=Q;ye<Z;ye++)oe.disableVertexAttribArray(ye)}p.enableAttributes(oe,a),p.bind(),p.setVertexAttribPointers(oe,a,z);for(const ye of T)ye.enableAttributes(oe,a),ye.bind(),ye.setVertexAttribPointers(oe,a,z);for(const ye of $)ye&&(ye.enableAttributes(oe,a),ye.bind(),ye.setVertexAttribPointers(oe,a,z));I&&I.bind(),le.currentNumAttributes=Q}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function va(b,a){const p=Math.pow(2,a.canonical.z),T=a.canonical.y;return[new e.MercatorCoordinate(0,T/p).toLngLat().lat,new e.MercatorCoordinate(0,(T+1)/p).toLngLat().lat]}function ql(b,a,p,T,I,z,$){const Z=b.context,Q=Z.gl,le=p.fbo;if(!le)return;b.prepareDrawTile();const oe=b.useProgram("hillshade");Z.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,le.colorAttachment.get());const ye=((Je,nt,we,We)=>{const gt=we.paint.get("hillshade-shadow-color"),vt=we.paint.get("hillshade-highlight-color"),zt=we.paint.get("hillshade-accent-color");let Bt=we.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===we.paint.get("hillshade-illumination-anchor")&&(Bt-=Je.transform.angle);const Ft=!Je.options.moving;return{u_matrix:We||Je.transform.calculateProjMatrix(nt.tileID.toUnwrapped(),Ft),u_image:0,u_latrange:va(0,nt.tileID),u_light:[we.paint.get("hillshade-exaggeration"),Bt],u_shadow:gt,u_highlight:vt,u_accent:zt}})(b,p,T,b.terrain?a.projMatrix:null);b.prepareDrawProgram(Z,oe,a.toUnwrapped());const{tileBoundsBuffer:Be,tileBoundsIndexBuffer:Ze,tileBoundsSegments:qe}=b.getTileBoundsBuffers(p);oe.draw(Z,Q.TRIANGLES,I,z,$,e.CullFaceMode.disabled,ye,T.id,Be,Ze,qe)}function Ll(b,a,p){if(!a.needsDEMTextureUpload)return;const T=b.context,I=T.gl;T.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||b.getTileTexture(p.stride);const z=p.getPixels();a.demTexture?a.demTexture.update(z,{premultiply:!1}):a.demTexture=new e.Texture(T,z,I.RGBA,{premultiply:!1}),a.needsDEMTextureUpload=!1}function Qr(b,a,p,T,I,z){const $=b.context,Z=$.gl;if(!a.dem)return;const Q=a.dem;if($.activeTexture.set(Z.TEXTURE1),Ll(b,a,Q),!a.demTexture)return;a.demTexture.bind(Z.NEAREST,Z.CLAMP_TO_EDGE);const le=Q.dim;$.activeTexture.set(Z.TEXTURE0);let oe=a.fbo;if(!oe){const qe=new e.Texture($,{width:le,height:le,data:null},Z.RGBA);qe.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),oe=a.fbo=$.createFramebuffer(le,le,!0),oe.colorAttachment.set(qe.texture)}$.bindFramebuffer.set(oe.framebuffer),$.viewport.set([0,0,le,le]);const{tileBoundsBuffer:ye,tileBoundsIndexBuffer:Be,tileBoundsSegments:Ze}=b.getMercatorTileBoundsBuffers();b.useProgram("hillshadePrepare").draw($,Z.TRIANGLES,T,I,z,e.CullFaceMode.disabled,((qe,Je)=>{const nt=Je.stride,we=e.create();return e.ortho(we,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(we,we,[0,-e.EXTENT,0]),{u_matrix:we,u_image:1,u_dimension:[nt,nt],u_zoom:qe.overscaledZ,u_unpack:Je.unpackVector}})(a.tileID,Q),p.id,ye,Be,Ze),a.needsHillshadePrepare=!1}const Ts=b=>({u_matrix:new e.UniformMatrix4f(b),u_image0:new e.Uniform1i(b),u_skirt_height:new e.Uniform1f(b)}),_o=(b,a)=>({u_matrix:b,u_image0:0,u_skirt_height:a}),co=(b,a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe)=>({u_proj_matrix:Float32Array.from(b),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(T),u_merc_matrix:p,u_zoom_transition:I,u_merc_center:z,u_image0:0,u_frustum_tl:$,u_frustum_tr:Z,u_frustum_br:Q,u_frustum_bl:le,u_globe_pos:oe,u_globe_radius:ye,u_viewport:Be,u_grid_matrix:qe?Float32Array.from(qe):new Float32Array(9),u_skirt_height:Ze});function dn(b,a){return null!=b&&null!=a&&!(!b.hasData()||!a.hasData())&&null!=b.demTexture&&null!=a.demTexture&&b.tileID.key!==a.tileID.key}const No=new class{constructor(){this.operations={}}newMorphing(b,a,p,T,I){if(b in this.operations){const z=this.operations[b];z.to.tileID.key!==p.tileID.key&&(z.queued=p)}else this.operations[b]={startTime:T,phase:0,duration:I,from:a,to:p,queued:null}}getMorphValuesForProxy(b){if(!(b in this.operations))return null;const a=this.operations[b];return{from:a.from,to:a.to,phase:a.phase}}update(b){for(const a in this.operations){const p=this.operations[a];for(p.phase=(b-p.startTime)/p.duration;p.phase>=1||!this._validOp(p);)if(!this._nextOp(p,b)){delete this.operations[a];break}}}_nextOp(b,a){return!!b.queued&&(b.from=b.to,b.to=b.queued,b.queued=null,b.phase=0,b.startTime=a,!0)}_validOp(b){return b.from.hasData()&&b.to.hasData()}},vo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ya(b){return 6*Math.pow(1.5,22-b)}function Or(b,a){const p=1<<b.z;return!a&&(0===b.x||b.x===p-1)||0===b.y||b.y===p-1}const oa=b=>({u_matrix:b});function Fn(b,a,p,T,I){if(I>0){const z=e.exported.now(),$=(z-b.timeAdded)/I,Z=a?(z-a.timeAdded)/I:-1,Q=p.getSource(),le=T.coveringZoomLevel({tileSize:Q.tileSize,roundZoom:Q.roundZoom}),oe=!a||Math.abs(a.tileID.overscaledZ-le)>Math.abs(b.tileID.overscaledZ-le),ye=oe&&b.refreshedUponExpiration?1:e.clamp(oe?$:1-Z,0,1);return b.refreshedUponExpiration&&$>=1&&(b.refreshedUponExpiration=!1),a?{opacity:1,mix:1-ye}:{opacity:ye,mix:0}}return{opacity:1,mix:0}}class Xr extends e.SourceCache{constructor(a){const p={type:"raster-dem",maxzoom:a.transform.maxZoom},T=new Mi(Qi(),null),I=Ue("mock-dem",p,T,a.style);super("mock-dem",I,!1),I.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,p){a.state="loaded",p(null)}}class Kl extends e.SourceCache{constructor(a){const p=Ue("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new Mi(Qi(),null),a.style);super("proxy",p,!1),p.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,p,T){if(a.freezeTileCoverage)return;this.transform=a;const I=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((z,$)=>{if(z[$.key]="",!this._tiles[$.key]){const Z=new e.Tile($,this._source.tileSize*$.overscaleFactor(),a.tileZoom);Z.state="loaded",this._tiles[$.key]=Z}return z},{});for(const z in this._tiles)z in I||(this.freeFBO(z),this._tiles[z].unloadVectorData(),delete this._tiles[z])}freeFBO(a){const p=this.proxyCachedFBO[a];if(void 0!==p){const T=Object.values(p);this.renderCachePool.push(...T),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class La extends e.OverscaledTileID{constructor(a,p,T){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=p,this.projMatrix=T}}class Ds extends e.Elevation{constructor(a,p){super(),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[T,I,z]=function(Q){const le=new e.StructArrayLayout2i4,oe=new e.StructArrayLayout3ui6;le.reserve(17161),oe.reserve(33800);const Be=e.EXTENT/128,Ze=e.EXTENT+Be/2,qe=Ze+Be;for(let nt=-Be;nt<qe;nt+=Be)for(let we=-Be;we<qe;we+=Be){const We=we<0||we>Ze||nt<0||nt>Ze?24575:0,gt=e.clamp(Math.round(we),0,e.EXTENT),vt=e.clamp(Math.round(nt),0,e.EXTENT);le.emplaceBack(gt+We,vt)}const Je=(nt,we)=>{const We=131*we+nt;oe.emplaceBack(We+1,We,We+131),oe.emplaceBack(We+131,We+131+1,We+1)};for(let nt=1;nt<129;nt++)for(let we=1;we<129;we++)Je(we,nt);return[0,129].forEach(nt=>{for(let we=0;we<130;we++)Je(we,nt),Je(nt,we)}),[le,oe,32768]}(),$=a.context;this.gridBuffer=$.createVertexBuffer(T,e.posAttributes.members),this.gridIndexBuffer=$.createIndexBuffer(I),this.gridSegments=e.SegmentVector.simpleSegment(0,0,T.length,I.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,T.length,z),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Kl(p.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const Z=$.gl;this._overlapStencilMode=new e.StencilMode({func:Z.GEQUAL,mask:255},0,255,Z.KEEP,Z.KEEP,Z.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=p,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Xr(p.map)}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),a.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=a,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,p,T){if(a&&a.terrain){this._style!==a&&(this.style=a),this.enabled=!0;const I=a.terrain.properties;this.sourceCache=0===a.terrain.drapeRenderMode?this._mockSourceCache:a._getSourceCache(I.get("source")),this._exaggeration=I.get("exaggeration");const z=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const $=this.getScaledDemTileSize();this.sourceCache.update(p,$,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,z(),this._initializing=!0),z(),p.updateElevation(!0,T),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(p),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const a=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==a.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${a.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${a.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(a){a.coord&&"source"===a.dataType?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):"style"===a.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._sourceCaches)this._style._sourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const p=this.proxySourceCache,T=this.painter.transform;this._initializing&&(this._initializing=0===T._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(T.center),-1),this._emptyDEMTextureDirty=!this._initializing);const I=this.proxyCoords=p.getIds().map(Q=>{const le=p.getTileByID(Q).tileID;return le.projMatrix=T.calculateProjMatrix(le.toUnwrapped()),le});(function(Q,le){const oe=le.transform.pointCoordinate(le.transform.getCameraPoint()),ye=new e.Point(oe.x,oe.y);Q.sort((Be,Ze)=>{if(Ze.overscaledZ-Be.overscaledZ)return Ze.overscaledZ-Be.overscaledZ;const qe=new e.Point(Be.canonical.x+(1<<Be.canonical.z)*Be.wrap,Be.canonical.y),Je=new e.Point(Ze.canonical.x+(1<<Ze.canonical.z)*Ze.wrap,Ze.canonical.y),nt=ye.mult(1<<Be.canonical.z);return nt.x-=.5,nt.y-=.5,nt.distSqr(qe)-nt.distSqr(Je)})})(I,this.painter),this._previousZoom=T.zoom;const z=this.proxyToSource||{};this.proxyToSource={},I.forEach(Q=>{this.proxyToSource[Q.key]={}}),this.terrainTileForTile={};const $=this._style._sourceCaches;for(const Q in $){const le=$[Q];if(!le.used||(le!==this.sourceCache&&this.resetTileLookupCache(le.id),this._setupProxiedCoordsForOrtho(le,a[Q],z),le.usedForTerrain))continue;const oe=a[Q];le.getSource().reparseOverscaled&&this._assignTerrainTiles(oe)}this.proxiedCoords[p.id]=I.map(Q=>new La(Q,Q.key,this.orthoMatrix)),this._assignTerrainTiles(I),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(z),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const Z={};this._visibleDemTiles=[];for(const Q of this.proxyCoords){const le=this.terrainTileForTile[Q.key];if(!le)continue;const oe=le.tileID.key;oe in Z||(this._visibleDemTiles.push(le),Z[oe]=oe)}}_assignTerrainTiles(a){this._initializing||a.forEach(p=>{if(this.terrainTileForTile[p.key])return;const T=this._findTileCoveringTileID(p,this.sourceCache);T&&(this.terrainTileForTile[p.key]=T)})}_prepareDEMTextures(){const a=this.painter.context,p=a.gl;for(const T in this.terrainTileForTile){const I=this.terrainTileForTile[T],z=I.dem;!z||I.demTexture&&!I.needsDEMTextureUpload||(a.activeTexture.set(p.TEXTURE1),Ll(this.painter,I,z))}}_prepareDemTileUniforms(a,p,T,I){if(!p||null==p.demTexture)return!1;const z=a.tileID.canonical,$=Math.pow(2,p.tileID.canonical.z-z.z),Z=I||"";return T[`u_dem_tl${Z}`]=[z.x*$%1,z.y*$%1],T[`u_dem_scale${Z}`]=$,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const a=this.painter.context,p=a.gl;if(!this._emptyDepthBufferTexture){const T=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(a,T,p.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let a=0;const p=this._visibleDemTiles.reduce((T,I)=>{if(!I.dem)return T;const z=I.dem.tree.minimums[0];return z>0&&a++,T+z},0);return a?p/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,p=a.gl;a.activeTexture.set(p.TEXTURE2);const T=this._getLoadedAreaMinimum(),I=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(T,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let z=this._emptyDEMTexture;return z?z.update(I,{premultiply:!1}):z=this._emptyDEMTexture=new e.Texture(a,I,p.RGBA,{premultiply:!1}),z}setupElevationDraw(a,p,T){const I=this.painter.context,z=I.gl,$=(Z=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(Z),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var Z;$.u_dem_size=this.sourceCache.getSource().tileSize,$.u_exaggeration=this.exaggeration();let Q=null,le=null,oe=1;if(T&&T.morphing&&this._useVertexMorphing){const ye=T.morphing.srcDemTile,Be=T.morphing.dstDemTile;oe=T.morphing.phase,ye&&Be&&(this._prepareDemTileUniforms(a,ye,$,"_prev")&&(le=ye),this._prepareDemTileUniforms(a,Be,$)&&(Q=Be))}if(le&&Q?(I.activeTexture.set(z.TEXTURE2),Q.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE,z.NEAREST),I.activeTexture.set(z.TEXTURE4),le.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE,z.NEAREST),$.u_dem_lerp=oe):(Q=this.terrainTileForTile[a.tileID.key],I.activeTexture.set(z.TEXTURE2),(this._prepareDemTileUniforms(a,Q,$)?Q.demTexture:this.emptyDEMTexture).bind(z.NEAREST,z.CLAMP_TO_EDGE)),I.activeTexture.set(z.TEXTURE3),T&&T.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE),this._depthFBO&&($.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE),$.u_depth_size_inv=[1,1]),T&&T.useMeterToDem&&Q){const ye=(1<<Q.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;$.u_meter_to_dem=ye}if(T&&T.labelPlaneMatrixInv&&($.u_label_plane_matrix_inv=T.labelPlaneMatrixInv),p.setTerrainUniformValues(I,$),"globe"===this.painter.transform.projection.name){const ye=this.globeUniformValues(this.painter.transform,a.tileID.canonical,T&&T.useDenormalizedUpVectorScale);p.setGlobeUniformValues(I,ye)}}globeUniformValues(a,p,T){const I=a.projection;return{u_tile_tl_up:I.upVector(p,0,0),u_tile_tr_up:I.upVector(p,e.EXTENT,0),u_tile_br_up:I.upVector(p,e.EXTENT,e.EXTENT),u_tile_bl_up:I.upVector(p,0,e.EXTENT),u_tile_up_scale:T?e.globeMetersToEcef(1):I.upVectorScale(p,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const p=this.painter,T=this.painter.context;0!==a.length&&(T.bindFramebuffer.set(null),T.viewport.set([0,0,p.width,p.height]),p.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(I,z,$,Z,Q){if("globe"===I.transform.projection.name)!function(le,oe,ye,Be,Ze){const qe=le.context,Je=qe.gl;let nt,we;const We=le.options.showTerrainWireframe?2:0,gt=le.transform,vt=e.globeUseCustomAntiAliasing(le,qe,gt),zt=(ji,oi)=>{if(we===ji)return;const wi=[vo[ji],"PROJECTION_GLOBE_VIEW"];vt&&wi.push("CUSTOM_ANTIALIASING"),oi&&wi.push(vo[We]),nt=le.useProgram("globeRaster",null,wi),we=ji},Bt=le.colorModeForRenderPass(),Ft=new e.DepthMode(Je.LEQUAL,e.DepthMode.ReadWrite,le.depthRangeFor3D);No.update(Ze);const $t=e.calculateGlobeMercatorMatrix(gt),Ut=[e.mercatorXfromLng(gt.center.lng),e.mercatorYfromLat(gt.center.lat)],li=We?[!1,!0]:[!1],Gi=le.globeSharedBuffers,ti=[gt.width*e.exported.devicePixelRatio,gt.height*e.exported.devicePixelRatio],ki=Float32Array.from(gt.globeMatrix),ci={useDenormalizedUpVectorScale:!0};if(li.forEach(ji=>{const oi=le.transform,wi=ya(oi.zoom)*oe.exaggeration();we=-1;const Wi=ji?Je.LINES:Je.TRIANGLES;for(const zi of Be){const Hi=ye.getTile(zi),Pn=e.StencilMode.disabled,nr=oe.prevTerrainTileForTile[zi.key],wn=oe.terrainTileForTile[zi.key];dn(nr,wn)&&No.newMorphing(zi.key,nr,wn,Ze,250),qe.activeTexture.set(Je.TEXTURE0),Hi.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);const jn=No.getMorphValuesForProxy(zi.key),ar=jn?1:0;jn&&e.extend$1(ci,{morphing:{srcDemTile:jn.from,dstDemTile:jn.to,phase:e.easeCubicInOut(jn.phase)}});const Zn=e.tileCornersToBounds(zi.canonical),On=e.getLatitudinalLod(Zn.getCenter().lat),br=e.getGridMatrix(zi.canonical,Zn,On,oi.worldSize/oi._pixelsPerMercatorPixel),ss=e.globeNormalizeECEF(e.globeTileBounds(zi.canonical)),as=co(oi.projMatrix,ki,$t,ss,e.globeToMercatorTransition(oi.zoom),Ut,oi.frustumCorners.TL,oi.frustumCorners.TR,oi.frustumCorners.BR,oi.frustumCorners.BL,oi.globeCenterInViewSpace,oi.globeRadius,ti,wi,br);if(zt(ar,ji),oe.setupElevationDraw(Hi,nt,ci),le.prepareDrawProgram(qe,nt,zi.toUnwrapped()),Gi){const[ls,Zo,Ks]=ji?Gi.getWirefameBuffers(le.context,On):Gi.getGridBuffers(On,0!==wi);nt.draw(qe,Wi,Ft,Pn,Bt,e.CullFaceMode.backCCW,as,"globe_raster",ls,Zo,Ks)}}}),Gi){const ji=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];vt&&ji.push("CUSTOM_ANTIALIASING"),nt=le.useProgram("globeRaster",null,ji);for(const oi of Be){const{x:wi,y:Wi,z:zi}=oi.canonical,Hi=0===Wi,Pn=Wi===(1<<zi)-1,[nr,wn,jn,ar]=Gi.getPoleBuffers(zi);if(ar&&(Hi||Pn)){const Zn=ye.getTile(oi);qe.activeTexture.set(Je.TEXTURE0),Zn.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE);let On=e.globePoleMatrixForTile(zi,wi,gt);const br=e.globeNormalizeECEF(e.globeTileBounds(oi.canonical)),ss=(as,ls)=>as.draw(qe,Je.TRIANGLES,Ft,e.StencilMode.disabled,Bt,e.CullFaceMode.disabled,co(gt.projMatrix,On,On,br,0,Ut,gt.frustumCorners.TL,gt.frustumCorners.TR,gt.frustumCorners.BR,gt.frustumCorners.BL,gt.globeCenterInViewSpace,gt.globeRadius,ti,0),"globe_pole_raster",ls,jn,ar);oe.setupElevationDraw(Zn,nt,ci),le.prepareDrawProgram(qe,nt,oi.toUnwrapped()),Hi&&ss(nt,nr),Pn&&(On=e.scale(e.create(),On,[1,-1,1]),ss(nt,wn))}}}}(I,z,$,Z,Q);else{const le=I.context,oe=le.gl;let ye,Be;const Ze=I.options.showTerrainWireframe?2:0,qe=(gt,vt)=>{if(Be===gt)return;const zt=[vo[gt]];vt&&zt.push(vo[Ze]),ye=I.useProgram("terrainRaster",null,zt),Be=gt},Je=I.colorModeForRenderPass(),nt=new e.DepthMode(oe.LEQUAL,e.DepthMode.ReadWrite,I.depthRangeFor3D);No.update(Q);const we=I.transform,We=ya(we.zoom)*z.exaggeration();(Ze?[!1,!0]:[!1]).forEach(gt=>{Be=-1;const vt=gt?oe.LINES:oe.TRIANGLES,[zt,Bt]=gt?z.getWirefameBuffer():[z.gridIndexBuffer,z.gridSegments];for(const Ft of Z){const $t=$.getTile(Ft),Ut=e.StencilMode.disabled,li=z.prevTerrainTileForTile[Ft.key],Gi=z.terrainTileForTile[Ft.key];dn(li,Gi)&&No.newMorphing(Ft.key,li,Gi,Q,250),le.activeTexture.set(oe.TEXTURE0),$t.texture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST);const ti=No.getMorphValuesForProxy(Ft.key),ki=ti?1:0;let ci;ti&&(ci={morphing:{srcDemTile:ti.from,dstDemTile:ti.to,phase:e.easeCubicInOut(ti.phase)}});const ji=_o(Ft.projMatrix,Or(Ft.canonical,we.renderWorldCopies)?We/10:We);qe(ki,gt),z.setupElevationDraw($t,ye,ci),I.prepareDrawProgram(le,ye,Ft.toUnwrapped()),ye.draw(le,vt,nt,Ut,Je,e.CullFaceMode.backCCW,ji,"terrain_raster",z.gridBuffer,zt,Bt)}})}}(p,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,p.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(0===this._drapedRenderBatches.length)return a+1;this.renderingToTexture=!0;const p=this.painter,T=this.painter.context,I=this.proxySourceCache,z=this.proxiedCoords[I.id],$=this._drapedRenderBatches.shift(),Z=[],Q=p.style.order;let le=0;for(const oe of z){const ye=I.getTileByID(oe.proxyTileKey),Be=I.proxyCachedFBO[oe.key]?I.proxyCachedFBO[oe.key][a]:void 0,Ze=void 0!==Be?I.renderCache[Be]:this.pool[le++],qe=void 0!==Be;if(ye.texture=Ze.tex,qe&&!Ze.dirty){Z.push(ye.tileID);continue}let Je;T.bindFramebuffer.set(Ze.fb.framebuffer),this.renderedToTile=!1,Ze.dirty&&(T.clear({color:e.Color.transparent,stencil:0}),Ze.dirty=!1);for(let nt=$.start;nt<=$.end;++nt){const we=p.style._layers[Q[nt]];if(we.isHidden(p.transform.zoom))continue;const We=p.style._getLayerSourceCache(we),gt=We?this.proxyToSource[oe.key][We.id]:[oe];if(!gt)continue;const vt=gt;T.viewport.set([0,0,Ze.fb.width,Ze.fb.height]),Je!==(We?We.id:null)&&(this._setupStencil(Ze,gt,we,We),Je=We?We.id:null),p.renderLayer(p,We,we,vt)}this.renderedToTile?(Ze.dirty=!0,Z.push(ye.tileID)):qe||--le,5===le&&(le=0,this.renderToBackBuffer(Z))}return this.renderToBackBuffer(Z),this.renderingToTexture=!1,T.bindFramebuffer.set(null),T.viewport.set([0,0,p.width,p.height]),$.end+1}postRender(){}renderCacheEfficiency(a){const p=a.order.length;if(0===p)return{efficiency:100};let T,I=0,z=0,$=!1;for(let Z=0;Z<p;++Z){const Q=a._layers[a.order[Z]];this._style.isLayerDraped(Q)?($&&++I,++z):$||($=!0,T=Q.id)}return 0===z?{efficiency:100}:{efficiency:100*(1-I/z),firstUndrapedLayer:T}}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(p=>p.dem).forEach(p=>{a=Math.min(a,p.dem.tree.minimums[0])}),0===a?a:(a-30)*this._exaggeration}raycast(a,p,T){if(!this._visibleDemTiles)return null;const I=this._visibleDemTiles.filter(z=>z.dem).map(z=>{const $=z.tileID,Z=1<<$.overscaledZ,{x:Q,y:le}=$.canonical,oe=Q/Z,ye=(Q+1)/Z,Be=le/Z,Ze=(le+1)/Z;return{minx:oe,miny:Be,maxx:ye,maxy:Ze,t:z.dem.tree.raycastRoot(oe,Be,ye,Ze,a,p,T),tile:z}});I.sort((z,$)=>(null!==z.t?z.t:Number.MAX_VALUE)-(null!==$.t?$.t:Number.MAX_VALUE));for(const z of I){if(null==z.t)return null;const $=z.tile.dem.tree.raycast(z.minx,z.miny,z.maxx,z.maxy,a,p,T);if(null!=$)return $}return null}_createFBO(){const a=this.painter.context,p=a.gl,T=this.drapeBufferSize;a.activeTexture.set(p.TEXTURE0);const I=new e.Texture(a,{width:T[0],height:T[1],data:null},p.RGBA);I.bind(p.LINEAR,p.CLAMP_TO_EDGE);const z=a.createFramebuffer(T[0],T[1],!1);return z.colorAttachment.set(I.texture),z.depthAttachment=new Ie(a,z.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,T[0],T[1]),this._stencilRef=0,z.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):z.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&!a.extTextureFilterAnisotropicForceOff&&p.texParameterf(p.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:z,tex:I,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const a in this._style._sourceCaches)if(this._style._sourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const p=this._style._layers[a],T=p.isHidden(this.painter.transform.zoom);return"custom"===p.type?!T&&p.shouldRedrape():!T&&p.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const T of this._style._getSources())if(T instanceof bt){a=!0;break}if(!a)return;const p={};for(let T=0;T<this._style.order.length;++T){const I=this._style._layers[this._style.order[T]],z=this._style._getLayerSourceCache(I);if(z&&!p[z.id]&&!I.isHidden(this.painter.transform.zoom)&&"line"===I.type&&I.widthExpression()instanceof e.ZoomDependentExpression){p[z.id]=!0;for(const $ of this.proxyCoords){const Z=this.proxyToSource[$.key][z.id];if(Z)for(const Q of Z)this._clearRenderCacheForTile(z.id,Q)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const T in this._style._sourceCaches)if(this._style._sourceCaches[T]._source instanceof Mt){a=!0;break}if(!a)return;const p={};for(let T=0;T<this._style.order.length;++T){const I=this._style._layers[this._style.order[T]],z=this._style._getLayerSourceCache(I);if(!z||p[z.id]||I.isHidden(this.painter.transform.zoom)||"raster"!==I.type)continue;const $=I.paint.get("raster-fade-duration");for(const Z of this.proxyCoords){const Q=this.proxyToSource[Z.key][z.id];if(Q)for(const le of Q){const oe=Fn(z.getTile(le),z.findLoadedParent(le,0),z,this.painter.transform,$);(1!==oe.opacity||0!==oe.mix)&&this._clearRenderCacheForTile(z.id,le)}}}}_setupDrapedRenderBatches(){const a=this._style.order,p=a.length;if(0===p)return;const T=[];let I,z=0,$=this._style._layers[a[z]];for(;!this._style.isLayerDraped($)&&$.isHidden(this.painter.transform.zoom)&&++z<p;)$=this._style._layers[a[z]];for(;z<p;++z){const Z=this._style._layers[a[z]];Z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(Z)?void 0===I&&(I=z):void 0!==I&&(T.push({start:I,end:z-1}),I=void 0))}void 0!==I&&T.push({start:I,end:z-1}),this._drapedRenderBatches=T}_setupRenderCache(a){const p=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,p.renderCache.length>p.renderCachePool.length){const $=Object.values(p.proxyCachedFBO);p.proxyCachedFBO={};for(let Z=0;Z<$.length;++Z){const Q=Object.values($[Z]);p.renderCachePool.push(...Q)}}return}this._clearRasterLayersFromRenderCache();const T=this.proxyCoords,I=this._tilesDirty;for(let $=T.length-1;$>=0;$--){const Z=T[$];if(p.getTileByID(Z.key),void 0!==p.proxyCachedFBO[Z.key]){const Q=a[Z.key],le=this.proxyToSource[Z.key];let oe=0;for(const ye in le){const Be=le[ye],Ze=Q[ye];if(!Ze||Ze.length!==Be.length||Be.some((qe,Je)=>qe!==Ze[Je]||I[ye]&&I[ye].hasOwnProperty(qe.key))){oe=-1;break}++oe}for(const ye in p.proxyCachedFBO[Z.key])p.renderCache[p.proxyCachedFBO[Z.key][ye]].dirty=oe<0||oe!==Object.values(Q).length}}const z=[...this._drapedRenderBatches];z.sort(($,Z)=>Z.end-Z.start-($.end-$.start));for(const $ of z)for(const Z of T){if(p.proxyCachedFBO[Z.key])continue;let Q=p.renderCachePool.pop();void 0===Q&&p.renderCache.length<50&&(Q=p.renderCache.length,p.renderCache.push(this._createFBO())),void 0!==Q&&(p.proxyCachedFBO[Z.key]={},p.proxyCachedFBO[Z.key][$.start]=Q,p.renderCache[Q].dirty=!0)}this._tilesDirty={}}_setupStencil(a,p,T,I){if(!I||!this._sourceTilesOverlap[I.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const z=this.painter.context,$=z.gl;if(p.length<=1)return void(this._overlapStencilType=!1);let Z;if(T.isTileClipped())Z=p.length,this._overlapStencilMode.test={func:$.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(p[0].overscaledZ>p[p.length-1].overscaledZ))return void(this._overlapStencilType=!1);Z=1,this._overlapStencilMode.test={func:$.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+Z>255&&(z.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=Z,this._overlapStencilMode.ref=this._stencilRef,T.isTileClipped()&&this._renderTileClippingMasks(p,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(a,p){const T=this.painter,I=this.painter.context,z=I.gl;T._tileClippingMaskIDs={},I.setColorMode(e.ColorMode.disabled),I.setDepthMode(e.DepthMode.disabled);const $=T.useProgram("clippingMask");for(const Z of a){const Q=T._tileClippingMaskIDs[Z.key]=--p;$.draw(I,z.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:z.ALWAYS,mask:0},Q,255,z.KEEP,z.KEEP,z.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,oa(Z.projMatrix),"$clipping",T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}}pointCoordinate(a){const p=this.painter.transform;if(a.x<0||a.x>p.width||a.y<0||a.y>p.height)return null;const T=[a.x,a.y,1,1];e.transformMat4$1(T,T,p.pixelMatrixInverse),e.scale$1(T,T,1/T[3]),T[0]/=p.worldSize,T[1]/=p.worldSize;const I=p._camera.position,z=e.mercatorZfromAltitude(1,p.center.lat),$=[I[0],I[1],I[2]/z,0],Z=e.subtract([],T.slice(0,3),$);e.normalize(Z,Z);const Q=this.raycast($,Z,this._exaggeration);return null!==Q&&Q?(e.scaleAndAdd($,$,Z,Q),$[3]=$[2],$[2]*=z,$):null}drawDepth(){const a=this.painter,p=a.context,T=this.proxySourceCache,I=Math.ceil(a.width),z=Math.ceil(a.height);if(!this._depthFBO||this._depthFBO.width===I&&this._depthFBO.height===z||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const $=p.gl,Z=p.createFramebuffer(I,z,!0);p.activeTexture.set($.TEXTURE0);const Q=new e.Texture(p,{width:I,height:z,data:null},$.RGBA);Q.bind($.NEAREST,$.CLAMP_TO_EDGE),Z.colorAttachment.set(Q.texture);const le=p.createRenderbuffer(p.gl.DEPTH_COMPONENT16,I,z);Z.depthAttachment.set(le),this._depthFBO=Z,this._depthTexture=Q}p.bindFramebuffer.set(this._depthFBO.framebuffer),p.viewport.set([0,0,I,z]),function($,Z,Q,le){if("globe"===$.transform.projection.name)return;const oe=$.context,ye=oe.gl;oe.clear({depth:1});const Be=$.useProgram("terrainDepth"),Ze=new e.DepthMode(ye.LESS,e.DepthMode.ReadWrite,$.depthRangeFor3D);for(const qe of le){const Je=Q.getTile(qe),nt=_o(qe.projMatrix,0);Z.setupElevationDraw(Je,Be),Be.draw(oe,ye.TRIANGLES,Ze,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,nt,"terrain_depth",Z.gridBuffer,Z.gridIndexBuffer,Z.gridNoSkirtSegments)}}(a,this,T,this.proxyCoords)}_setupProxiedCoordsForOrtho(a,p,T){if(a.getSource()instanceof Ke)return this._setupProxiedCoordsForImageSource(a,p,T);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const I=this.proxiedCoords[a.id]=[],z=this.proxyCoords;for(let Z=0;Z<z.length;Z++){const Q=z[Z],le=this._findTileCoveringTileID(Q,a);if(le){const oe=this._createProxiedId(Q,le,T[Q.key]&&T[Q.key][a.id]);I.push(oe),this.proxyToSource[Q.key][a.id]=[oe]}}let $=!1;for(let Z=0;Z<p.length;Z++){const Q=a.getTile(p[Z]);if(!Q||!Q.hasData())continue;const le=this._findTileCoveringTileID(Q.tileID,this.proxySourceCache);if(le&&le.tileID.canonical.z!==Q.tileID.canonical.z){const oe=this.proxyToSource[le.tileID.key][a.id],ye=this._createProxiedId(le.tileID,Q,T[le.tileID.key]&&T[le.tileID.key][a.id]);oe?oe.splice(oe.length-1,0,ye):this.proxyToSource[le.tileID.key][a.id]=[ye],I.push(ye),$=!0}}this._sourceTilesOverlap[a.id]=$}_setupProxiedCoordsForImageSource(a,p,T){if(!a.getSource().loaded())return;const I=this.proxiedCoords[a.id]=[],z=this.proxyCoords,$=a.getSource(),Z=new e.Point($.tileID.x,$.tileID.y)._div(1<<$.tileID.z),Q=$.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((oe,ye)=>(oe.min.x=Math.min(oe.min.x,ye.x-Z.x),oe.min.y=Math.min(oe.min.y,ye.y-Z.y),oe.max.x=Math.max(oe.max.x,ye.x-Z.x),oe.max.y=Math.max(oe.max.y,ye.y-Z.y),oe),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),le=(oe,ye)=>{const Be=oe.wrap+oe.canonical.x/(1<<oe.canonical.z),Ze=oe.canonical.y/(1<<oe.canonical.z),qe=e.EXTENT/(1<<oe.canonical.z),Je=ye.wrap+ye.canonical.x/(1<<ye.canonical.z),nt=ye.canonical.y/(1<<ye.canonical.z);return Be+qe<Je+Q.min.x||Be>Je+Q.max.x||Ze+qe<nt+Q.min.y||Ze>nt+Q.max.y};for(let oe=0;oe<z.length;oe++){const ye=z[oe];for(let Be=0;Be<p.length;Be++){const Ze=a.getTile(p[Be]);if(!Ze||!Ze.hasData()||le(ye,Ze.tileID))continue;const qe=this._createProxiedId(ye,Ze,T[ye.key]&&T[ye.key][a.id]),Je=this.proxyToSource[ye.key][a.id];Je?Je.push(qe):this.proxyToSource[ye.key][a.id]=[qe],I.push(qe)}}}_createProxiedId(a,p,T){let I=this.orthoMatrix;if(T){const z=T.find($=>$.key===p.tileID.key);if(z)return z}if(p.tileID.key!==a.key){const z=a.canonical.z-p.tileID.canonical.z;let $,Z,Q;I=e.create();const le=p.tileID.wrap-a.wrap<<a.overscaledZ;z>0?($=e.EXTENT>>z,Z=$*((p.tileID.canonical.x<<z)-a.canonical.x+le),Q=$*((p.tileID.canonical.y<<z)-a.canonical.y)):($=e.EXTENT<<-z,Z=e.EXTENT*(p.tileID.canonical.x-(a.canonical.x+le<<-z)),Q=e.EXTENT*(p.tileID.canonical.y-(a.canonical.y<<-z))),e.ortho(I,0,$,0,$,0,1),e.translate(I,I,[Z,Q,0])}return new La(p.tileID,a.key,I)}_findTileCoveringTileID(a,p){let T=p.getTile(a);if(T&&T.hasData())return T;const I=this._findCoveringTileCache[p.id],z=I[a.key];if(T=z?p.getTileByID(z):null,T&&T.hasData()||null===z)return T;let $=T?T.tileID:a,Z=$.overscaledZ;const Q=p.getSource().minzoom,le=[];if(!z){const ye=p.getSource().maxzoom;if(a.canonical.z>=ye){const Be=a.canonical.z-ye;p.getSource().reparseOverscaled?(Z=Math.max(a.canonical.z+2,p.transform.tileZoom),$=new e.OverscaledTileID(Z,a.wrap,ye,a.canonical.x>>Be,a.canonical.y>>Be)):0!==Be&&(Z=ye,$=new e.OverscaledTileID(Z,a.wrap,ye,a.canonical.x>>Be,a.canonical.y>>Be))}$.key!==a.key&&(le.push($.key),T=p.getTile($))}const oe=ye=>{le.forEach(Be=>{I[Be]=ye}),le.length=0};for(Z-=1;Z>=Q&&(!T||!T.hasData());Z--){T&&oe(T.tileID.key);const ye=$.calculateScaledKey(Z);if(T=p.getTileByID(ye),T&&T.hasData())break;const Be=I[ye];if(null===Be)break;void 0===Be?le.push(ye):T=p.getTileByID(Be)}return oe(T?T.tileID.key:null),T&&T.hasData()?T:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,p){let T=this._tilesDirty[a];T||(T=this._tilesDirty[a]={}),T[p.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const a=function(p){let T=0;const I=new e.StructArrayLayout2ui4,z=131;for(let $=1;$<129;$++){for(let Z=1;Z<129;Z++)T=$*z+Z,I.emplaceBack(T,T+1),I.emplaceBack(T,T+z),I.emplaceBack(T+1,T+z),128===$&&I.emplaceBack(T+z,T+z+1);I.emplaceBack(T+1,T+1+z)}return I}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(a),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,a.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Cr{static cacheKey(a,p,T,I){let z=`${p}${I?I.cacheKey:""}`;for(const $ of T)a.usedDefines.includes($)&&(z+=`/${$}`);return z}constructor(a,p,T,I,z,$){const Z=a.gl;this.program=Z.createProgram();const Q=function(we){const We=[];for(let gt=0;gt<we.length;gt++){if(null===we[gt])continue;const vt=we[gt].split(" ");We.push(vt.pop())}return We}(T.staticAttributes),le=I?I.getBinderAttributes():[],oe=Q.concat(le);let ye=I?I.defines():[];ye=ye.concat($.map(we=>`#define ${we}`));const Be=a.isWebGL2?"#version 300 es\n":"",Ze=Be+ye.concat(a.extStandardDerivatives&&0===Be.length?"#extension GL_OES_standard_derivatives : enable\n".concat(Bo):Bo,Bo,Al,zc.fragmentSource,fl.fragmentSource,T.fragmentSource).join("\n"),qe=Be+ye.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Al,zc.vertexSource,fl.vertexSource,Ka.vertexSource,T.vertexSource).join("\n"),Je=Z.createShader(Z.FRAGMENT_SHADER);if(Z.isContextLost())return void(this.failedToCreate=!0);Z.shaderSource(Je,Ze),Z.compileShader(Je),Z.attachShader(this.program,Je);const nt=Z.createShader(Z.VERTEX_SHADER);if(Z.isContextLost())this.failedToCreate=!0;else{Z.shaderSource(nt,qe),Z.compileShader(nt),Z.attachShader(this.program,nt),this.attributes={},this.numAttributes=oe.length;for(let we=0;we<this.numAttributes;we++)oe[we]&&(Z.bindAttribLocation(this.program,we,oe[we]),this.attributes[oe[we]]=we);Z.linkProgram(this.program),Z.deleteShader(nt),Z.deleteShader(Je),this.fixedUniforms=z(a),this.binderUniforms=I?I.getUniforms(a):[],$.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new e.Uniform1i(we=a),u_dem_prev:new e.Uniform1i(we),u_dem_unpack:new e.Uniform4f(we),u_dem_tl:new e.Uniform2f(we),u_dem_scale:new e.Uniform1f(we),u_dem_tl_prev:new e.Uniform2f(we),u_dem_scale_prev:new e.Uniform1f(we),u_dem_size:new e.Uniform1f(we),u_dem_lerp:new e.Uniform1f(we),u_exaggeration:new e.Uniform1f(we),u_depth:new e.Uniform1i(we),u_depth_size_inv:new e.Uniform2f(we),u_meter_to_dem:new e.Uniform1f(we),u_label_plane_matrix_inv:new e.UniformMatrix4f(we)}),$.includes("GLOBE")&&(this.globeUniforms=(we=>({u_tile_tl_up:new e.Uniform3f(we),u_tile_tr_up:new e.Uniform3f(we),u_tile_br_up:new e.Uniform3f(we),u_tile_bl_up:new e.Uniform3f(we),u_tile_up_scale:new e.Uniform1f(we)}))(a)),$.includes("FOG")&&(this.fogUniforms=(we=>({u_fog_matrix:new e.UniformMatrix4f(we),u_fog_range:new e.Uniform2f(we),u_fog_color:new e.Uniform4f(we),u_fog_horizon_blend:new e.Uniform1f(we),u_fog_temporal_offset:new e.Uniform1f(we),u_frustum_tl:new e.Uniform3f(we),u_frustum_tr:new e.Uniform3f(we),u_frustum_br:new e.Uniform3f(we),u_frustum_bl:new e.Uniform3f(we),u_globe_pos:new e.Uniform3f(we),u_globe_radius:new e.Uniform1f(we),u_globe_transition:new e.Uniform1f(we),u_is_globe:new e.Uniform1i(we),u_viewport:new e.Uniform2f(we)}))(a))}var we}setTerrainUniformValues(a,p){if(!this.terrainUniforms)return;const T=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const I in p)T[I]&&T[I].set(this.program,I,p[I])}}setGlobeUniformValues(a,p){if(!this.globeUniforms)return;const T=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const I in p)T[I]&&T[I].set(this.program,I,p[I])}}setFogUniformValues(a,p){if(!this.fogUniforms)return;const T=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const I in p)T[I].set(this.program,I,p[I])}}draw(a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je){const nt=a.gl;if(this.failedToCreate)return;a.program.set(this.program),a.setDepthMode(T),a.setStencilMode(I),a.setColorMode(z),a.setCullFace($);for(const We of Object.keys(this.fixedUniforms))this.fixedUniforms[We].set(this.program,We,Z[We]);qe&&qe.setUniforms(this.program,a,this.binderUniforms,Be,{zoom:Ze});const we={[nt.LINES]:2,[nt.TRIANGLES]:3,[nt.LINE_STRIP]:1}[p];for(const We of ye.get()){const gt=We.vaos||(We.vaos={});(gt[Q]||(gt[Q]=new au)).bind(a,this,le,qe?qe.getPaintVertexBuffers():[],oe,We.vertexOffset,Je||[]),nt.drawElements(p,We.primitiveLength*we,nt.UNSIGNED_SHORT,We.primitiveOffset*we*2)}}}function Pa(b,a){const p=Math.pow(2,a.tileID.overscaledZ),T=a.tileSize*Math.pow(2,b.transform.tileZoom)/p,I=T*(a.tileID.canonical.x+a.tileID.wrap*p),z=T*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_tile_units_to_pixels:1/Yi(a,1,b.transform.tileZoom),u_pixel_coord_upper:[I>>16,z>>16],u_pixel_coord_lower:[65535&I,65535&z]}}const xa=e.create(),ba=(b,a,p,T,I,z,$,Z,Q,le,oe)=>{const ye=a.style.light,Be=ye.properties.get("position"),Ze=[Be.x,Be.y,Be.z],qe=e.create$1();"viewport"===ye.properties.get("anchor")&&(e.fromRotation(qe,-a.transform.angle),e.transformMat3(Ze,Ze,qe));const Je=ye.properties.get("color"),nt=a.transform,we={u_matrix:b,u_lightpos:Ze,u_lightintensity:ye.properties.get("intensity"),u_lightcolor:[Je.r,Je.g,Je.b],u_vertical_gradient:+p,u_opacity:T,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:xa,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:I,u_edge_radius:z};return"globe"===nt.projection.name&&(we.u_tile_id=[$.canonical.x,$.canonical.y,1<<$.canonical.z],we.u_zoom_transition=Q,we.u_inv_rot_matrix=oe,we.u_merc_center=le,we.u_up_dir=nt.projection.upVector(new e.CanonicalTileID(0,0,0),le[0]*e.EXTENT,le[1]*e.EXTENT),we.u_height_lift=Z),we},Mo=(b,a,p,T,I,z,$,Z,Q,le,oe,ye)=>{const Be=ba(b,a,p,T,I,z,$,Q,le,oe,ye),Ze={u_height_factor:-Math.pow(2,$.overscaledZ)/Z.tileSize/8};return e.extend(Be,Pa(a,Z),Ze)},Yo=b=>({u_matrix:b}),Us=(b,a,p)=>e.extend(Yo(b),Pa(a,p)),Vo=(b,a)=>({u_matrix:b,u_world:a}),Pl=(b,a,p,T)=>e.extend(Us(b,a,p),{u_world:T}),yo=e.create(),aa=(b,a,p,T,I,z)=>{const $=b.transform,Z="globe"===$.projection.name;let Q;if("map"===z.paint.get("circle-pitch-alignment"))if(Z){const oe=e.globePixelsToTileUnits($.zoom,a.canonical)*$._pixelsPerMercatorPixel;Q=Float32Array.from([oe,0,0,oe])}else Q=$.calculatePixelsToTileUnitsMatrix(p);else Q=new Float32Array([$.pixelsToGLUnits[0],0,0,$.pixelsToGLUnits[1]]);const le={u_camera_to_center_distance:$.cameraToCenterDistance,u_matrix:b.translatePosMatrix(a.projMatrix,p,z.paint.get("circle-translate"),z.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:Q,u_inv_rot_matrix:yo,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Z){le.u_inv_rot_matrix=T,le.u_merc_center=I,le.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],le.u_zoom_transition=e.globeToMercatorTransition($.zoom);const oe=I[0]*e.EXTENT,ye=I[1]*e.EXTENT;le.u_up_dir=$.projection.upVector(new e.CanonicalTileID(0,0,0),oe,ye)}return le},Fc=b=>{const a=[];return"map"===b.paint.get("circle-pitch-alignment")&&a.push("PITCH_WITH_MAP"),"map"===b.paint.get("circle-pitch-scale")&&a.push("SCALE_WITH_MAP"),a},Ns=(b,a,p,T)=>{const I=e.EXTENT/p.tileSize;return{u_matrix:b,u_camera_to_center_distance:a.getCameraToCenterDistance(T),u_extrude_scale:[a.pixelsToGLUnits[0]/I,a.pixelsToGLUnits[1]/I]}},Ol=(b,a,p=1)=>({u_matrix:b,u_color:a,u_overlay:0,u_overlay_scale:p}),Os=e.create(),la=(b,a,p,T,I,z,$)=>{const Z=b.transform,Q="globe"===Z.projection.name,le=Q?e.globePixelsToTileUnits(Z.zoom,a.canonical)*Z._pixelsPerMercatorPixel:Yi(p,1,z),oe={u_matrix:a.projMatrix,u_extrude_scale:le,u_intensity:$,u_inv_rot_matrix:Os,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Q){oe.u_inv_rot_matrix=T,oe.u_merc_center=I,oe.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],oe.u_zoom_transition=e.globeToMercatorTransition(Z.zoom);const ye=I[0]*e.EXTENT,Be=I[1]*e.EXTENT;oe.u_up_dir=Z.projection.upVector(new e.CanonicalTileID(0,0,0),ye,Be)}return oe},wa=(b,a,p,T,I,z,$)=>{const Z=b.transform,Q=Z.calculatePixelsToTileUnitsMatrix(a);return{u_matrix:Rl(b,a,p,T),u_pixels_to_tile_units:Q,u_device_pixel_ratio:z,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:I,u_texsize:$s(p)?a.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ca(a,b.transform),u_alpha_discard_threshold:0,u_trim_offset:$}},Do=(b,a,p,T,I)=>{const z=b.transform;return{u_matrix:Rl(b,a,p,T),u_texsize:a.imageAtlasTexture.size,u_pixels_to_tile_units:z.calculatePixelsToTileUnitsMatrix(a),u_device_pixel_ratio:I,u_image:0,u_tile_units_to_pixels:ca(a,z),u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ca(b,a){return 1/Yi(b,1,a.tileZoom)}function Rl(b,a,p,T){return b.translatePosMatrix(T||a.tileID.projMatrix,a,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}function $s(b){const a=b.paint.get("line-dasharray").value;return a.value||"constant"!==a.kind}const Ca=(b,a,p,T,I,z)=>{return{u_matrix:b,u_tl_parent:a,u_scale_parent:p,u_fade_t:T.mix,u_opacity:T.opacity*I.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:I.paint.get("raster-brightness-min"),u_brightness_high:I.paint.get("raster-brightness-max"),u_saturation_factor:(Z=I.paint.get("raster-saturation"),Z>0?1-1/(1.001-Z):-Z),u_contrast_factor:($=I.paint.get("raster-contrast"),$>0?1/(1-$):1+$),u_spin_weights:Io(I.paint.get("raster-hue-rotate")),u_perspective_transform:z};var $,Z};function Io(b){b*=Math.PI/180;const a=Math.sin(b),p=Math.cos(b);return[(2*p+1)/3,(-Math.sqrt(3)*a-p+1)/3,(Math.sqrt(3)*a-p+1)/3]}const Ja=e.create(),Jl=(b,a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je)=>{const nt=I.transform,we={u_is_size_zoom_constant:+("constant"===b||"source"===b),u_is_size_feature_constant:+("constant"===b||"camera"===b),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:nt.cameraToCenterDistance,u_rotate_symbol:+p,u_aspect_ratio:nt.width/nt.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:z,u_label_plane_matrix:$,u_coord_matrix:Z,u_is_text:+Q,u_pitch_with_map:+T,u_texsize:le,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ja,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ja,u_up_vector:[0,-1,0]};return"globe"===Je.name&&(we.u_tile_id=[oe.canonical.x,oe.canonical.y,1<<oe.canonical.z],we.u_zoom_transition=ye,we.u_inv_rot_matrix=Ze,we.u_merc_center=Be,we.u_camera_forward=nt._camera.forward(),we.u_ecef_origin=e.globeECEFOrigin(nt.globeMatrix,oe.toUnwrapped()),we.u_tile_matrix=Float32Array.from(nt.globeMatrix),we.u_up_vector=qe),we},uo=(b,a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je,nt)=>e.extend(Jl(b,a,p,T,I,z,$,Z,Q,le,ye,Be,Ze,qe,Je,nt),{u_gamma_scale:T?I.transform.cameraToCenterDistance*Math.cos(I.terrain?0:I.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+oe}),_c=(b,a,p,T,I,z,$,Z,Q,le,oe,ye,Be,Ze,qe,Je)=>e.extend(uo(b,a,p,T,I,z,$,Z,!0,Q,!0,oe,ye,Be,Ze,qe,Je),{u_texsize_icon:le,u_texture_icon:1}),ho=(b,a,p)=>({u_matrix:b,u_opacity:a,u_color:p}),Bc=(b,a,p,T,I)=>e.extend(function(z,$,Z){const Q=$.imageManager.getPattern(z.toString()),{width:le,height:oe}=$.imageManager.getPixelSize(),ye=Math.pow(2,Z.tileID.overscaledZ),Be=Z.tileSize*Math.pow(2,$.transform.tileZoom)/ye,Ze=Be*(Z.tileID.canonical.x+Z.tileID.wrap*ye),qe=Be*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl:Q.tl,u_pattern_br:Q.br,u_texsize:[le,oe],u_pattern_size:Q.displaySize,u_tile_units_to_pixels:1/Yi(Z,1,$.transform.tileZoom),u_pixel_coord_upper:[Ze>>16,qe>>16],u_pixel_coord_lower:[65535&Ze,65535&qe]}}(T,p,I),{u_matrix:b,u_opacity:a}),Ho={fillExtrusion:b=>({u_matrix:new e.UniformMatrix4f(b),u_lightpos:new e.Uniform3f(b),u_lightintensity:new e.Uniform1f(b),u_lightcolor:new e.Uniform3f(b),u_vertical_gradient:new e.Uniform1f(b),u_opacity:new e.Uniform1f(b),u_edge_radius:new e.Uniform1f(b),u_ao:new e.Uniform2f(b),u_tile_id:new e.Uniform3f(b),u_zoom_transition:new e.Uniform1f(b),u_inv_rot_matrix:new e.UniformMatrix4f(b),u_merc_center:new e.Uniform2f(b),u_up_dir:new e.Uniform3f(b),u_height_lift:new e.Uniform1f(b)}),fillExtrusionPattern:b=>({u_matrix:new e.UniformMatrix4f(b),u_lightpos:new e.Uniform3f(b),u_lightintensity:new e.Uniform1f(b),u_lightcolor:new e.Uniform3f(b),u_vertical_gradient:new e.Uniform1f(b),u_height_factor:new e.Uniform1f(b),u_edge_radius:new e.Uniform1f(b),u_ao:new e.Uniform2f(b),u_tile_id:new e.Uniform3f(b),u_zoom_transition:new e.Uniform1f(b),u_inv_rot_matrix:new e.UniformMatrix4f(b),u_merc_center:new e.Uniform2f(b),u_up_dir:new e.Uniform3f(b),u_height_lift:new e.Uniform1f(b),u_image:new e.Uniform1i(b),u_texsize:new e.Uniform2f(b),u_pixel_coord_upper:new e.Uniform2f(b),u_pixel_coord_lower:new e.Uniform2f(b),u_tile_units_to_pixels:new e.Uniform1f(b),u_opacity:new e.Uniform1f(b)}),fill:b=>({u_matrix:new e.UniformMatrix4f(b)}),fillPattern:b=>({u_matrix:new e.UniformMatrix4f(b),u_image:new e.Uniform1i(b),u_texsize:new e.Uniform2f(b),u_pixel_coord_upper:new e.Uniform2f(b),u_pixel_coord_lower:new e.Uniform2f(b),u_tile_units_to_pixels:new e.Uniform1f(b)}),fillOutline:b=>({u_matrix:new e.UniformMatrix4f(b),u_world:new e.Uniform2f(b)}),fillOutlinePattern:b=>({u_matrix:new e.UniformMatrix4f(b),u_world:new e.Uniform2f(b),u_image:new e.Uniform1i(b),u_texsize:new e.Uniform2f(b),u_pixel_coord_upper:new e.Uniform2f(b),u_pixel_coord_lower:new e.Uniform2f(b),u_tile_units_to_pixels:new e.Uniform1f(b)}),circle:b=>({u_camera_to_center_distance:new e.Uniform1f(b),u_extrude_scale:new e.UniformMatrix2f(b),u_device_pixel_ratio:new e.Uniform1f(b),u_matrix:new e.UniformMatrix4f(b),u_inv_rot_matrix:new e.UniformMatrix4f(b),u_merc_center:new e.Uniform2f(b),u_tile_id:new e.Uniform3f(b),u_zoom_transition:new e.Uniform1f(b),u_up_dir:new e.Uniform3f(b)}),collisionBox:b=>({u_matrix:new e.UniformMatrix4f(b),u_camera_to_center_distance:new e.Uniform1f(b),u_extrude_scale:new e.Uniform2f(b)}),collisionCircle:b=>({u_matrix:new e.UniformMatrix4f(b),u_inv_matrix:new e.UniformMatrix4f(b),u_camera_to_center_distance:new e.Uniform1f(b),u_viewport_size:new e.Uniform2f(b)}),debug:b=>({u_color:new e.UniformColor(b),u_matrix:new e.UniformMatrix4f(b),u_overlay:new e.Uniform1i(b),u_overlay_scale:new e.Uniform1f(b)}),clippingMask:b=>({u_matrix:new e.UniformMatrix4f(b)}),heatmap:b=>({u_extrude_scale:new e.Uniform1f(b),u_intensity:new e.Uniform1f(b),u_matrix:new e.UniformMatrix4f(b),u_inv_rot_matrix:new e.UniformMatrix4f(b),u_merc_center:new e.Uniform2f(b),u_tile_id:new e.Uniform3f(b),u_zoom_transition:new e.Uniform1f(b),u_up_dir:new e.Uniform3f(b)}),heatmapTexture:b=>({u_image:new e.Uniform1i(b),u_color_ramp:new e.Uniform1i(b),u_opacity:new e.Uniform1f(b)}),hillshade:b=>({u_matrix:new e.UniformMatrix4f(b),u_image:new e.Uniform1i(b),u_latrange:new e.Uniform2f(b),u_light:new e.Uniform2f(b),u_shadow:new e.UniformColor(b),u_highlight:new e.UniformColor(b),u_accent:new e.UniformColor(b)}),hillshadePrepare:b=>({u_matrix:new e.UniformMatrix4f(b),u_image:new e.Uniform1i(b),u_dimension:new e.Uniform2f(b),u_zoom:new e.Uniform1f(b),u_unpack:new e.Uniform4f(b)}),line:b=>({u_matrix:new e.UniformMatrix4f(b),u_pixels_to_tile_units:new e.UniformMatrix2f(b),u_device_pixel_ratio:new e.Uniform1f(b),u_units_to_pixels:new e.Uniform2f(b),u_dash_image:new e.Uniform1i(b),u_gradient_image:new e.Uniform1i(b),u_image_height:new e.Uniform1f(b),u_texsize:new e.Uniform2f(b),u_tile_units_to_pixels:new e.Uniform1f(b),u_alpha_discard_threshold:new e.Uniform1f(b),u_trim_offset:new e.Uniform2f(b)}),linePattern:b=>({u_matrix:new e.UniformMatrix4f(b),u_texsize:new e.Uniform2f(b),u_pixels_to_tile_units:new e.UniformMatrix2f(b),u_device_pixel_ratio:new e.Uniform1f(b),u_image:new e.Uniform1i(b),u_units_to_pixels:new e.Uniform2f(b),u_tile_units_to_pixels:new e.Uniform1f(b),u_alpha_discard_threshold:new e.Uniform1f(b)}),raster:b=>({u_matrix:new e.UniformMatrix4f(b),u_tl_parent:new e.Uniform2f(b),u_scale_parent:new e.Uniform1f(b),u_fade_t:new e.Uniform1f(b),u_opacity:new e.Uniform1f(b),u_image0:new e.Uniform1i(b),u_image1:new e.Uniform1i(b),u_brightness_low:new e.Uniform1f(b),u_brightness_high:new e.Uniform1f(b),u_saturation_factor:new e.Uniform1f(b),u_contrast_factor:new e.Uniform1f(b),u_spin_weights:new e.Uniform3f(b),u_perspective_transform:new e.Uniform2f(b)}),symbolIcon:b=>({u_is_size_zoom_constant:new e.Uniform1i(b),u_is_size_feature_constant:new e.Uniform1i(b),u_size_t:new e.Uniform1f(b),u_size:new e.Uniform1f(b),u_camera_to_center_distance:new e.Uniform1f(b),u_rotate_symbol:new e.Uniform1i(b),u_aspect_ratio:new e.Uniform1f(b),u_fade_change:new e.Uniform1f(b),u_matrix:new e.UniformMatrix4f(b),u_label_plane_matrix:new e.UniformMatrix4f(b),u_coord_matrix:new e.UniformMatrix4f(b),u_is_text:new e.Uniform1i(b),u_pitch_with_map:new e.Uniform1i(b),u_texsize:new e.Uniform2f(b),u_tile_id:new e.Uniform3f(b),u_zoom_transition:new e.Uniform1f(b),u_inv_rot_matrix:new e.UniformMatrix4f(b),u_merc_center:new e.Uniform2f(b),u_camera_forward:new e.Uniform3f(b),u_tile_matrix:new e.UniformMatrix4f(b),u_up_vector:new e.Uniform3f(b),u_ecef_origin:new e.Uniform3f(b),u_texture:new e.Uniform1i(b)}),symbolSDF:b=>({u_is_size_zoom_constant:new e.Uniform1i(b),u_is_size_feature_constant:new e.Uniform1i(b),u_size_t:new e.Uniform1f(b),u_size:new e.Uniform1f(b),u_camera_to_center_distance:new e.Uniform1f(b),u_rotate_symbol:new e.Uniform1i(b),u_aspect_ratio:new e.Uniform1f(b),u_fade_change:new e.Uniform1f(b),u_matrix:new e.UniformMatrix4f(b),u_label_plane_matrix:new e.UniformMatrix4f(b),u_coord_matrix:new e.UniformMatrix4f(b),u_is_text:new e.Uniform1i(b),u_pitch_with_map:new e.Uniform1i(b),u_texsize:new e.Uniform2f(b),u_texture:new e.Uniform1i(b),u_gamma_scale:new e.Uniform1f(b),u_device_pixel_ratio:new e.Uniform1f(b),u_tile_id:new e.Uniform3f(b),u_zoom_transition:new e.Uniform1f(b),u_inv_rot_matrix:new e.UniformMatrix4f(b),u_merc_center:new e.Uniform2f(b),u_camera_forward:new e.Uniform3f(b),u_tile_matrix:new e.UniformMatrix4f(b),u_up_vector:new e.Uniform3f(b),u_ecef_origin:new e.Uniform3f(b),u_is_halo:new e.Uniform1i(b)}),symbolTextAndIcon:b=>({u_is_size_zoom_constant:new e.Uniform1i(b),u_is_size_feature_constant:new e.Uniform1i(b),u_size_t:new e.Uniform1f(b),u_size:new e.Uniform1f(b),u_camera_to_center_distance:new e.Uniform1f(b),u_rotate_symbol:new e.Uniform1i(b),u_aspect_ratio:new e.Uniform1f(b),u_fade_change:new e.Uniform1f(b),u_matrix:new e.UniformMatrix4f(b),u_label_plane_matrix:new e.UniformMatrix4f(b),u_coord_matrix:new e.UniformMatrix4f(b),u_is_text:new e.Uniform1i(b),u_pitch_with_map:new e.Uniform1i(b),u_texsize:new e.Uniform2f(b),u_texsize_icon:new e.Uniform2f(b),u_texture:new e.Uniform1i(b),u_texture_icon:new e.Uniform1i(b),u_gamma_scale:new e.Uniform1f(b),u_device_pixel_ratio:new e.Uniform1f(b),u_is_halo:new e.Uniform1i(b)}),background:b=>({u_matrix:new e.UniformMatrix4f(b),u_opacity:new e.Uniform1f(b),u_color:new e.UniformColor(b)}),backgroundPattern:b=>({u_matrix:new e.UniformMatrix4f(b),u_opacity:new e.Uniform1f(b),u_image:new e.Uniform1i(b),u_pattern_tl:new e.Uniform2f(b),u_pattern_br:new e.Uniform2f(b),u_texsize:new e.Uniform2f(b),u_pattern_size:new e.Uniform2f(b),u_pixel_coord_upper:new e.Uniform2f(b),u_pixel_coord_lower:new e.Uniform2f(b),u_tile_units_to_pixels:new e.Uniform1f(b)}),terrainRaster:Ts,terrainDepth:Ts,skybox:b=>({u_matrix:new e.UniformMatrix4f(b),u_sun_direction:new e.Uniform3f(b),u_cubemap:new e.Uniform1i(b),u_opacity:new e.Uniform1f(b),u_temporal_offset:new e.Uniform1f(b)}),skyboxGradient:b=>({u_matrix:new e.UniformMatrix4f(b),u_color_ramp:new e.Uniform1i(b),u_center_direction:new e.Uniform3f(b),u_radius:new e.Uniform1f(b),u_opacity:new e.Uniform1f(b),u_temporal_offset:new e.Uniform1f(b)}),skyboxCapture:b=>({u_matrix_3f:new e.UniformMatrix3f(b),u_sun_direction:new e.Uniform3f(b),u_sun_intensity:new e.Uniform1f(b),u_color_tint_r:new e.Uniform4f(b),u_color_tint_m:new e.Uniform4f(b),u_luminance:new e.Uniform1f(b)}),globeRaster:b=>({u_proj_matrix:new e.UniformMatrix4f(b),u_globe_matrix:new e.UniformMatrix4f(b),u_normalize_matrix:new e.UniformMatrix4f(b),u_merc_matrix:new e.UniformMatrix4f(b),u_zoom_transition:new e.Uniform1f(b),u_merc_center:new e.Uniform2f(b),u_image0:new e.Uniform1i(b),u_grid_matrix:new e.UniformMatrix3f(b),u_skirt_height:new e.Uniform1f(b),u_frustum_tl:new e.Uniform3f(b),u_frustum_tr:new e.Uniform3f(b),u_frustum_br:new e.Uniform3f(b),u_frustum_bl:new e.Uniform3f(b),u_globe_pos:new e.Uniform3f(b),u_globe_radius:new e.Uniform1f(b),u_viewport:new e.Uniform2f(b)}),globeAtmosphere:b=>({u_frustum_tl:new e.Uniform3f(b),u_frustum_tr:new e.Uniform3f(b),u_frustum_br:new e.Uniform3f(b),u_frustum_bl:new e.Uniform3f(b),u_horizon:new e.Uniform1f(b),u_transition:new e.Uniform1f(b),u_fadeout_range:new e.Uniform1f(b),u_color:new e.Uniform4f(b),u_high_color:new e.Uniform4f(b),u_space_color:new e.Uniform4f(b),u_star_intensity:new e.Uniform1f(b),u_star_density:new e.Uniform1f(b),u_star_size:new e.Uniform1f(b),u_temporal_offset:new e.Uniform1f(b),u_horizon_angle:new e.Uniform1f(b),u_rotation_matrix:new e.UniformMatrix4f(b)})};let Qa;function Ta(b,a,p,T,I,z,$){const Z=b.context,Q=Z.gl,le=b.transform,oe=b.useProgram("collisionBox"),ye=[];let Be=0,Ze=0;for(let vt=0;vt<T.length;vt++){const zt=T[vt],Bt=a.getTile(zt),Ft=Bt.getBucket(p);if(!Ft)continue;const $t=kt(zt,Ft,le);let Ut=$t;0===I[0]&&0===I[1]||(Ut=b.translatePosMatrix($t,Bt,I,z));const li=$?Ft.textCollisionBox:Ft.iconCollisionBox,Gi=Ft.collisionCircleArray;if(Gi.length>0){const ti=e.create(),ki=Ut;e.mul(ti,Ft.placementInvProjMatrix,le.glCoordMatrix),e.mul(ti,ti,Ft.placementViewportMatrix),ye.push({circleArray:Gi,circleOffset:Ze,transform:ki,invTransform:ti,projection:Ft.getProjection()}),Be+=Gi.length/4,Ze=Be}li&&(b.terrain&&b.terrain.setupElevationDraw(Bt,oe),oe.draw(Z,Q.LINES,e.DepthMode.disabled,e.StencilMode.disabled,b.colorModeForRenderPass(),e.CullFaceMode.disabled,Ns(Ut,le,Bt,Ft.getProjection()),p.id,li.layoutVertexBuffer,li.indexBuffer,li.segments,null,le.zoom,null,[li.collisionVertexBuffer,li.collisionVertexBufferExt]))}if(!$||!ye.length)return;const qe=b.useProgram("collisionCircle"),Je=new e.StructArrayLayout2f1f2i16;Je.resize(4*Be),Je._trim();let nt=0;for(const vt of ye)for(let zt=0;zt<vt.circleArray.length/4;zt++){const Bt=4*zt,Ft=vt.circleArray[Bt+0],$t=vt.circleArray[Bt+1],Ut=vt.circleArray[Bt+2],li=vt.circleArray[Bt+3];Je.emplace(nt++,Ft,$t,Ut,li,0),Je.emplace(nt++,Ft,$t,Ut,li,1),Je.emplace(nt++,Ft,$t,Ut,li,2),Je.emplace(nt++,Ft,$t,Ut,li,3)}(!Qa||Qa.length<2*Be)&&(Qa=function(vt){const zt=2*vt,Bt=new e.StructArrayLayout3ui6;Bt.resize(zt),Bt._trim();for(let Ft=0;Ft<zt;Ft++){const $t=6*Ft;Bt.uint16[$t+0]=4*Ft+0,Bt.uint16[$t+1]=4*Ft+1,Bt.uint16[$t+2]=4*Ft+2,Bt.uint16[$t+3]=4*Ft+2,Bt.uint16[$t+4]=4*Ft+3,Bt.uint16[$t+5]=4*Ft+0}return Bt}(Be));const we=Z.createIndexBuffer(Qa,!0),We=Z.createVertexBuffer(Je,e.collisionCircleLayout.members,!0);for(const vt of ye){const zt={u_matrix:vt.transform,u_inv_matrix:vt.invTransform,u_camera_to_center_distance:(gt=le).getCameraToCenterDistance(vt.projection),u_viewport_size:[gt.width,gt.height]};qe.draw(Z,Q.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,b.colorModeForRenderPass(),e.CullFaceMode.disabled,zt,p.id,We,we,e.SegmentVector.simpleSegment(0,2*vt.circleOffset,vt.circleArray.length,vt.circleArray.length/2),null,le.zoom)}var gt;We.destroy(),we.destroy()}const gl=e.create();function Is({width:b,height:a,anchor:p,textOffset:T,textScale:I},z){const{horizontalAlign:$,verticalAlign:Z}=e.getAnchorAlignment(p),Q=-($-.5)*b,le=-(Z-.5)*a,oe=e.evaluateVariableOffset(p,T);return new e.Point((Q/I+oe[0])*z,(le/I+oe[1])*z)}function _l(b,a,p,T,I,z,$,Z,Q,le,oe){const ye=b.text.placedSymbolArray,Be=b.text.dynamicLayoutVertexArray,Ze=b.icon.dynamicLayoutVertexArray,qe={},Je=b.getProjection(),nt=Wt(Z,Je,z),we=z.elevation,We=Je.upVectorScale(Z.canonical,z.center.lat,z.worldSize).metersToTile;Be.clear();for(let gt=0;gt<ye.length;gt++){const vt=ye.get(gt),{tileAnchorX:zt,tileAnchorY:Bt,numGlyphs:Ft}=vt,$t=vt.hidden||!vt.crossTileID||b.allowVerticalPlacement&&!vt.placedOrientation?null:T[vt.crossTileID];if($t){let Ut=0,li=0,Gi=0;if(we){const Hi=we?we.getAtTileOffset(Z,zt,Bt):0,[Pn,nr,wn]=Je.upVector(Z.canonical,zt,Bt);Ut=Hi*Pn*We,li=Hi*nr*We,Gi=Hi*wn*We}let[ti,ki,ci,ji]=U(vt.projectedAnchorX+Ut,vt.projectedAnchorY+li,vt.projectedAnchorZ+Gi,p?nt:$);const oi=X(z.getCameraToCenterDistance(Je),ji);let wi=I.evaluateSizeForFeature(b.textSizeData,le,vt)*oi/e.ONE_EM;p&&(wi*=b.tilePixelRatio/Q);const Wi=Is($t,wi);p?(({x:ti,y:ki,z:ci}=Je.projectTilePoint(zt+Wi.x,Bt+Wi.y,Z.canonical)),[ti,ki,ci]=U(ti+Ut,ki+li,ci+Gi,$)):(a&&Wi._rotate(-z.angle),ti+=Wi.x,ki+=Wi.y,ci=0);const zi=b.allowVerticalPlacement&&vt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let Hi=0;Hi<Ft;Hi++)e.addDynamicAttributes(Be,ti,ki,ci,zi);oe&&vt.associatedIconIndex>=0&&(qe[vt.associatedIconIndex]={x:ti,y:ki,z:ci,angle:zi})}else ce(Ft,Be)}if(oe){Ze.clear();const gt=b.icon.placedSymbolArray;for(let vt=0;vt<gt.length;vt++){const zt=gt.get(vt),{numGlyphs:Bt}=zt,Ft=qe[vt];if(zt.hidden||!Ft)ce(Bt,Ze);else{const{x:$t,y:Ut,z:li,angle:Gi}=Ft;for(let ti=0;ti<Bt;ti++)e.addDynamicAttributes(Ze,$t,Ut,li,Gi)}}b.icon.dynamicLayoutVertexBuffer.updateData(Ze)}b.text.dynamicLayoutVertexBuffer.updateData(Be)}function el(b,a,p){return p.iconsInText&&a?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function to(b,a,p,T,I,z,$,Z,Q,le,oe,ye){const Be=b.context,Ze=Be.gl,qe=b.transform,Je="map"===Z,nt="map"===Q,we=Je&&"point"!==p.layout.get("symbol-placement"),We=Je&&!nt&&!we,gt=void 0!==p.layout.get("symbol-sort-key").constantOr(1);let vt=!1;const zt=b.depthModeForSublayer(0,e.DepthMode.ReadOnly),Bt=[e.mercatorXfromLng(qe.center.lng),e.mercatorYfromLat(qe.center.lat)],Ft=p.layout.get("text-variable-anchor"),$t="globe"===qe.projection.name,Ut=[],li=[0,-1,0];let Gi=li;!$t&&!qe.mercatorFromTransition||Je||(Gi=function(ti){const ki=ti._camera.getWorldToCamera(ti.worldSize,1),ci=e.multiply([],ki,ti.globeMatrix);e.invert(ci,ci);const ji=[0,0,0],oi=[0,1,0,0];return e.transformMat4$1(oi,oi,ci),ji[0]=oi[0],ji[1]=oi[1],ji[2]=oi[2],e.normalize(ji,ji),ji}(qe));for(const ti of T){const ki=a.getTile(ti),ci=ki.getBucket(p);if(!ci||"mercator"===ci.projection.name&&$t)continue;const ji=I?ci.text:ci.icon;if(!ji||ci.fullyClipped||!ji.segments.get().length)continue;const oi=ji.programConfigurations.get(p.id),wi=I||ci.sdfIcons,Wi=I?ci.textSizeData:ci.iconSizeData,zi=nt||0!==qe.pitch,Hi=e.evaluateSizeForZoom(Wi,qe.zoom);let Pn,nr,wn,jn,ar=[0,0],Zn=null;if(I)nr=ki.glyphAtlasTexture,wn=Ze.LINEAR,Pn=ki.glyphAtlasTexture.size,ci.iconsInText&&(ar=ki.imageAtlasTexture.size,Zn=ki.imageAtlasTexture,jn=zi||b.options.rotating||b.options.zooming||"composite"===Wi.kind||"camera"===Wi.kind?Ze.LINEAR:Ze.NEAREST);else{const tc=1!==p.layout.get("icon-size").constantOr(0)||ci.iconsNeedLinear;nr=ki.imageAtlasTexture,wn=wi||b.options.rotating||b.options.zooming||tc||zi?Ze.LINEAR:Ze.NEAREST,Pn=ki.imageAtlasTexture.size}const On="globe"===ci.projection.name,br=On?Gi:li,ss=On?e.globeToMercatorTransition(qe.zoom):0,as=Wt(ti,ci.getProjection(),qe),ls=qe.calculatePixelsToTileUnitsMatrix(ki),Zo=M(as,ki.tileID.canonical,nt,Je,qe,ci.getProjection(),ls),Ks=b.terrain&&nt&&we?e.invert(e.create(),Zo):gl,qo=j(as,ki.tileID.canonical,nt,Je,qe,ci.getProjection(),ls),Nl=Ft&&ci.hasTextData(),ks="none"!==p.layout.get("icon-text-fit")&&Nl&&ci.hasIconData();if(we){const tc=qe.elevation,ic=tc?tc.getAtTileOffsetFunc(ti,qe.center.lat,qe.worldSize,ci.getProjection()):null,bc=R(as,ki.tileID.canonical,nt,Je,qe,ci.getProjection(),ls);ae(ci,as,b,I,bc,qo,nt,le,ic,ti)}const Vr=we||I&&Ft||ks,Br=b.translatePosMatrix(as,ki,z,$),Jr=Vr?gl:Zo,da=b.translatePosMatrix(qo,ki,z,$,!0),cs=ci.getProjection().createInversionMatrix(qe,ti.canonical),pa=[];b.terrainRenderModeElevated()&&nt&&pa.push("PITCH_WITH_MAP_TERRAIN"),On&&pa.push("PROJECTION_GLOBE_VIEW"),Vr&&pa.push("PROJECTED_POS_ON_VIEWPORT");const Hc=wi&&0!==p.paint.get(I?"text-halo-width":"icon-halo-width").constantOr(1);let rl;rl=wi?ci.iconsInText?_c(Wi.kind,Hi,We,nt,b,Br,Jr,da,Pn,ar,ti,ss,Bt,cs,br,ci.getProjection()):uo(Wi.kind,Hi,We,nt,b,Br,Jr,da,I,Pn,!0,ti,ss,Bt,cs,br,ci.getProjection()):Jl(Wi.kind,Hi,We,nt,b,Br,Jr,da,I,Pn,ti,ss,Bt,cs,br,ci.getProjection());const Ya={program:b.useProgram(el(wi,I,ci),oi,pa),buffers:ji,uniformValues:rl,atlasTexture:nr,atlasTextureIcon:Zn,atlasInterpolation:wn,atlasInterpolationIcon:jn,isSDF:wi,hasHalo:Hc,tile:ki,labelPlaneMatrixInv:Ks};if(gt&&ci.canOverlap){vt=!0;const tc=ji.segments.get();for(const ic of tc)Ut.push({segments:new e.SegmentVector([ic]),sortKey:ic.sortKey,state:Ya})}else Ut.push({segments:ji.segments,sortKey:0,state:Ya})}vt&&Ut.sort((ti,ki)=>ti.sortKey-ki.sortKey);for(const ti of Ut){const ki=ti.state;if(b.terrain&&b.terrain.setupElevationDraw(ki.tile,ki.program,{useDepthForOcclusion:!$t,labelPlaneMatrixInv:ki.labelPlaneMatrixInv}),Be.activeTexture.set(Ze.TEXTURE0),ki.atlasTexture.bind(ki.atlasInterpolation,Ze.CLAMP_TO_EDGE),ki.atlasTextureIcon&&(Be.activeTexture.set(Ze.TEXTURE1),ki.atlasTextureIcon&&ki.atlasTextureIcon.bind(ki.atlasInterpolationIcon,Ze.CLAMP_TO_EDGE)),ki.isSDF){const ci=ki.uniformValues;ki.hasHalo&&(ci.u_is_halo=1,Oa(ki.buffers,ti.segments,p,b,ki.program,zt,oe,ye,ci)),ci.u_is_halo=0}Oa(ki.buffers,ti.segments,p,b,ki.program,zt,oe,ye,ki.uniformValues)}}function Oa(b,a,p,T,I,z,$,Z,Q){const le=T.context,oe=[b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer,b.globeExtVertexBuffer];I.draw(le,le.gl.TRIANGLES,z,$,Z,e.CullFaceMode.disabled,Q,p.id,b.layoutVertexBuffer,b.indexBuffer,a,p.paint,T.transform.zoom,b.programConfigurations.get(p.id),oe)}function Ra(b,a,p,T,I,z,$){const Z=b.context.gl,Q=p.paint.get("fill-pattern"),le=Q&&Q.constantOr(1);let oe,ye,Be,Ze,qe;$?(ye=le&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",oe=Z.LINES):(ye=le?"fillPattern":"fill",oe=Z.TRIANGLES);for(const Je of T){const nt=a.getTile(Je);if(le&&!nt.patternsLoaded())continue;const we=nt.getBucket(p);if(!we)continue;b.prepareDrawTile();const We=we.programConfigurations.get(p.id),gt=b.useProgram(ye,We);le&&(b.context.activeTexture.set(Z.TEXTURE0),nt.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),We.updatePaintBuffers());const vt=Q.constantOr(null);if(vt&&nt.imageAtlas){const Bt=nt.imageAtlas.patternPositions[vt.toString()];Bt&&We.setConstantPatternPositions(Bt)}const zt=b.translatePosMatrix(Je.projMatrix,nt,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if($){Ze=we.indexBuffer2,qe=we.segments2;const Bt=b.terrain&&b.terrain.renderingToTexture?b.terrain.drapeBufferSize:[Z.drawingBufferWidth,Z.drawingBufferHeight];Be="fillOutlinePattern"===ye&&le?Pl(zt,b,nt,Bt):Vo(zt,Bt)}else Ze=we.indexBuffer,qe=we.segments,Be=le?Us(zt,b,nt):Yo(zt);b.prepareDrawProgram(b.context,gt,Je.toUnwrapped()),gt.draw(b.context,oe,I,b.stencilModeForClipping(Je),z,e.CullFaceMode.disabled,Be,p.id,we.layoutVertexBuffer,Ze,qe,p.paint,b.transform.zoom,We)}}function tl(b,a,p,T,I,z,$){const Z=b.context,Q=Z.gl,le=b.transform,oe=p.paint.get("fill-extrusion-pattern"),ye=oe.constantOr(1),Be=p.paint.get("fill-extrusion-opacity"),Ze=[p.paint.get("fill-extrusion-ambient-occlusion-intensity"),p.paint.get("fill-extrusion-ambient-occlusion-radius")],qe=p.layout.get("fill-extrusion-edge-radius"),Je=qe>0&&!p.paint.get("fill-extrusion-rounded-roof"),nt=Je?0:qe,we="globe"===le.projection.name?e.fillExtrusionHeightLift():0,We="globe"===le.projection.name,gt=We?e.globeToMercatorTransition(le.zoom):0,vt=[e.mercatorXfromLng(le.center.lng),e.mercatorYfromLat(le.center.lat)],zt=[];We&&zt.push("PROJECTION_GLOBE_VIEW"),Ze[0]>0&&zt.push("FAUX_AO"),Je&&zt.push("ZERO_ROOF_RADIUS");for(const Bt of T){const Ft=a.getTile(Bt),$t=Ft.getBucket(p);if(!$t||$t.projection.name!==le.projection.name)continue;const Ut=$t.programConfigurations.get(p.id),li=b.useProgram(ye?"fillExtrusionPattern":"fillExtrusion",Ut,zt);if(b.terrain){const wi=b.terrain;if(b.style.terrainSetForDrapingOnly())wi.setupElevationDraw(Ft,li,{useMeterToDem:!0});else{if(!$t.enableTerrain)continue;if(wi.setupElevationDraw(Ft,li,{useMeterToDem:!0}),zl(Z,a,Bt,$t,p,wi),!$t.centroidVertexBuffer){const Wi=li.attributes.a_centroid_pos;void 0!==Wi&&Q.vertexAttrib2f(Wi,0,0)}}}ye&&(b.context.activeTexture.set(Q.TEXTURE0),Ft.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Ut.updatePaintBuffers());const Gi=oe.constantOr(null);if(Gi&&Ft.imageAtlas){const wi=Ft.imageAtlas.patternPositions[Gi.toString()];wi&&Ut.setConstantPatternPositions(wi)}const ti=b.translatePosMatrix(Bt.projMatrix,Ft,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),ki=le.projection.createInversionMatrix(le,Bt.canonical),ci=p.paint.get("fill-extrusion-vertical-gradient"),ji=ye?Mo(ti,b,ci,Be,Ze,nt,Bt,Ft,we,gt,vt,ki):ba(ti,b,ci,Be,Ze,nt,Bt,we,gt,vt,ki);b.prepareDrawProgram(Z,li,Bt.toUnwrapped());const oi=[];b.terrain&&oi.push($t.centroidVertexBuffer),We&&oi.push($t.layoutVertexExtBuffer),li.draw(Z,Z.gl.TRIANGLES,I,z,$,e.CullFaceMode.backCCW,ji,p.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,p.paint,b.transform.zoom,Ut,oi)}}function zl(b,a,p,T,I,z){const $=[we=>{let We=we.canonical.x-1,gt=we.wrap;return We<0&&(We=(1<<we.canonical.z)-1,gt--),new e.OverscaledTileID(we.overscaledZ,gt,we.canonical.z,We,we.canonical.y)},we=>{let We=we.canonical.x+1,gt=we.wrap;return We===1<<we.canonical.z&&(We=0,gt++),new e.OverscaledTileID(we.overscaledZ,gt,we.canonical.z,We,we.canonical.y)},we=>new e.OverscaledTileID(we.overscaledZ,we.wrap,we.canonical.z,we.canonical.x,(0===we.canonical.y?1<<we.canonical.z:we.canonical.y)-1),we=>new e.OverscaledTileID(we.overscaledZ,we.wrap,we.canonical.z,we.canonical.x,we.canonical.y===(1<<we.canonical.z)-1?0:we.canonical.y+1)],Z=we=>{const We=a.getSource().minzoom,gt=zt=>{const Bt=a.getTileByID(zt);if(Bt&&Bt.hasData())return Bt.getBucket(I)},vt=[0,-1,1];for(const zt of vt){if(we.overscaledZ+zt<We)continue;const Bt=gt(we.calculateScaledKey(we.overscaledZ+zt));if(Bt)return Bt}},Q=[0,0,0],le=(we,We)=>(Q[0]=Math.min(we.min.y,We.min.y),Q[1]=Math.max(we.max.y,We.max.y),Q[2]=e.EXTENT-We.min.x>we.max.x?We.min.x-e.EXTENT:we.max.x,Q),oe=(we,We)=>(Q[0]=Math.min(we.min.x,We.min.x),Q[1]=Math.max(we.max.x,We.max.x),Q[2]=e.EXTENT-We.min.y>we.max.y?We.min.y-e.EXTENT:we.max.y,Q),ye=[(we,We)=>le(we,We),(we,We)=>le(We,we),(we,We)=>oe(we,We),(we,We)=>oe(We,we)],Be=new e.Point(0,0);let Ze,qe,Je;const nt=(we,We,gt,vt,zt)=>{const Bt=[[vt?gt:we,vt?we:gt,0],[vt?gt:We,vt?We:gt,0]],Ft=zt<0?e.EXTENT+zt:zt,$t=[vt?Ft:(we+We)/2,vt?(we+We)/2:Ft,0];return 0===gt&&zt<0||0!==gt&&zt>0?z.getForTilePoints(Je,[$t],!0,qe):Bt.push($t),z.getForTilePoints(p,Bt,!0,Ze),Math.max(Bt[0][2],Bt[1][2],$t[2])/z.exaggeration()};for(let we=0;we<4;we++){const We=(we<2?1:5)-we,gt=T.borders[we];if(0===gt.length)continue;const vt=Je=$[we](p),zt=Z(vt);if(!(zt&&zt instanceof e.FillExtrusionBucket&&zt.enableTerrain)||T.borderDoneWithNeighborZ[we]===zt.canonical.z&&zt.borderDoneWithNeighborZ[We]===T.canonical.z||(qe=z.findDEMTileFor(vt),!qe||!qe.dem))continue;if(!Ze){const Ut=z.findDEMTileFor(p);if(!Ut||!Ut.dem)return;Ze=Ut}const Bt=zt.borders[We];let Ft=0;const $t=zt.borderDoneWithNeighborZ[We]!==T.canonical.z;if(T.canonical.z===zt.canonical.z){for(let Ut=0;Ut<gt.length;Ut++){const li=T.featuresOnBorder[gt[Ut]],Gi=li.borders[we];let ti;for(;Ft<Bt.length&&(ti=zt.featuresOnBorder[Bt[Ft]],!(ti.borders[We][1]>Gi[0]+3));)$t&&zt.encodeCentroid(void 0,ti,!1),Ft++;if(ti&&Ft<Bt.length){const ki=Ft;let ci=0;for(;!(ti.borders[We][0]>Gi[1]-3)&&(ci++,++Ft!==Bt.length);)ti=zt.featuresOnBorder[Bt[Ft]];if(ti=zt.featuresOnBorder[Bt[ki]],li.intersectsCount()>1||ti.intersectsCount()>1||1!==ci){1!==ci&&(Ft=ki),T.encodeCentroid(void 0,li,!1),$t&&zt.encodeCentroid(void 0,ti,!1);continue}const ji=ye[we](li,ti),oi=we%2?e.EXTENT-1:0;Be.x=nt(ji[0],Math.min(e.EXTENT-1,ji[1]),oi,we<2,ji[2]),Be.y=0,T.encodeCentroid(Be,li,!1),$t&&zt.encodeCentroid(Be,ti,!1)}else T.encodeCentroid(void 0,li,!1)}T.borderDoneWithNeighborZ[we]=zt.canonical.z,T.needsCentroidUpdate=!0,$t&&(zt.borderDoneWithNeighborZ[We]=T.canonical.z,zt.needsCentroidUpdate=!0)}else{for(const Ut of gt)T.encodeCentroid(void 0,T.featuresOnBorder[Ut],!1);if($t){for(const Ut of Bt)zt.encodeCentroid(void 0,zt.featuresOnBorder[Ut],!1);zt.borderDoneWithNeighborZ[We]=T.canonical.z,zt.needsCentroidUpdate=!0}T.borderDoneWithNeighborZ[we]=zt.canonical.z,T.needsCentroidUpdate=!0}}(T.needsCentroidUpdate||!T.centroidVertexBuffer&&0!==T.centroidVertexArray.length)&&T.uploadCentroid(b)}const ka=new e.Color(1,0,0,1),vc=new e.Color(0,1,0,1),Ea=new e.Color(0,0,1,1),Ql=new e.Color(1,0,1,1),vl=new e.Color(0,1,1,1);function Nc(b,a,p){const T=b.context,I=b.transform,z=T.gl,$="globe"===I.projection.name,Z=$?["PROJECTION_GLOBE_VIEW"]:null;let Q=p.projMatrix;if($&&e.globeToMercatorTransition(I.zoom)>0){const li=e.transitionTileAABBinECEF(p.canonical,I),Gi=e.globeDenormalizeECEF(li);Q=e.multiply(new Float32Array(16),I.globeMatrix,Gi),e.multiply(Q,I.projMatrix,Q)}const le=b.useProgram("debug",null,Z),oe=a.getTileByID(p.key);b.terrain&&b.terrain.setupElevationDraw(oe,le);const ye=e.DepthMode.disabled,Be=e.StencilMode.disabled,Ze=b.colorModeForRenderPass();T.activeTexture.set(z.TEXTURE0),b.emptyTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),$?oe._makeGlobeTileDebugBuffers(b.context,I):oe._makeDebugTileBoundsBuffers(b.context,I.projection);const Je=oe._tileDebugBuffer||b.debugBuffer,nt=oe._tileDebugIndexBuffer||b.debugIndexBuffer,we=oe._tileDebugSegments||b.debugSegments;le.draw(T,z.LINE_STRIP,ye,Be,Ze,e.CullFaceMode.disabled,Ol(Q,e.Color.red),"$debug",Je,nt,we,null,null,null,[oe._globeTileDebugBorderBuffer]);const We=oe.latestRawTileData,gt=Math.floor((We&&We.byteLength||0)/1024),vt=a.getTile(p).tileSize,zt=512/Math.min(vt,512)*(p.overscaledZ/I.zoom)*.5;let Bt=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Bt+=` => ${p.overscaledZ}`),Bt+=` ${gt}kb`,function(li,Gi){li.initDebugOverlayCanvas();const ti=li.debugOverlayCanvas,ki=li.context.gl,ci=li.debugOverlayCanvas.getContext("2d");ci.clearRect(0,0,ti.width,ti.height),ci.shadowColor="white",ci.shadowBlur=2,ci.lineWidth=1.5,ci.strokeStyle="white",ci.textBaseline="top",ci.font="bold 36px Open Sans, sans-serif",ci.fillText(Gi,5,5),ci.strokeText(Gi,5,5),li.debugOverlayTexture.update(ti),li.debugOverlayTexture.bind(ki.LINEAR,ki.CLAMP_TO_EDGE)}(b,Bt);const Ft=oe._tileDebugTextBuffer||b.debugBuffer,$t=oe._tileDebugTextIndexBuffer||b.quadTriangleIndexBuffer,Ut=oe._tileDebugTextSegments||b.debugSegments;le.draw(T,z.TRIANGLES,ye,Be,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Ol(Q,e.Color.transparent,zt),"$debug",Ft,$t,Ut,null,null,null,[oe._globeTileDebugTextBuffer])}function po(b,a,p,T){yl(b,0,a+p/2,b.transform.width,p,T)}function Go(b,a,p,T){yl(b,a-p/2,0,p,b.transform.height,T)}function yl(b,a,p,T,I,z){const $=b.context,Z=$.gl;Z.enable(Z.SCISSOR_TEST),Z.scissor(a*e.exported.devicePixelRatio,p*e.exported.devicePixelRatio,T*e.exported.devicePixelRatio,I*e.exported.devicePixelRatio),$.clear({color:z}),Z.disable(Z.SCISSOR_TEST)}const Fl=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:xl}=Fl;function Ao(b,a,p,T){b.emplaceBack(a,p,T)}class il{constructor(a){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Ao(this.vertexArray,-1,-1,1),Ao(this.vertexArray,1,-1,1),Ao(this.vertexArray,-1,1,1),Ao(this.vertexArray,1,1,1),Ao(this.vertexArray,-1,-1,-1),Ao(this.vertexArray,1,-1,-1),Ao(this.vertexArray,-1,1,-1),Ao(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,xl),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function es(b,a,p,T,I,z){const $=b.gl,Z=a.paint.get("sky-atmosphere-color"),Q=a.paint.get("sky-atmosphere-halo-color"),le=a.paint.get("sky-atmosphere-sun-intensity"),oe={u_matrix_3f:e.fromMat4(e.create$1(),T),u_sun_direction:I,u_sun_intensity:le,u_color_tint_r:[(qe=Z).r,qe.g,qe.b,qe.a],u_color_tint_m:[(Je=Q).r,Je.g,Je.b,Je.a],u_luminance:5e-5};var qe,Je;$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+z,a.skyboxTexture,0),p.draw(b,$.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,oe,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const Rs=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class za{constructor(a){const p=new e.StructArrayLayout5f20;p.emplaceBack(-1,1,1,0,0),p.emplaceBack(1,1,1,1,0),p.emplaceBack(1,-1,1,1,1),p.emplaceBack(-1,-1,1,0,1);const T=new e.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(p,Rs.members),this.indexBuffer=a.createIndexBuffer(T),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Sa={symbol:function(b,a,p,T,I){if("translucent"!==b.renderPass)return;const z=e.StencilMode.disabled,$=b.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(Z,Q,le,oe,ye,Be,Ze){const qe=Q.transform,Je="map"===ye,nt="map"===Be;for(const we of Z){const We=oe.getTile(we),gt=We.getBucket(le);if(!gt||!gt.text||!gt.text.segments.get().length)continue;const vt=e.evaluateSizeForZoom(gt.textSizeData,qe.zoom),zt=Wt(we,gt.getProjection(),qe),Bt=qe.calculatePixelsToTileUnitsMatrix(We),Ft=M(zt,We.tileID.canonical,nt,Je,qe,gt.getProjection(),Bt),$t="none"!==le.layout.get("icon-text-fit")&&gt.hasIconData();if(vt){const Ut=Math.pow(2,qe.zoom-We.tileID.overscaledZ);_l(gt,Je,nt,Ze,e.symbolSize,qe,Ft,we,Ut,vt,$t)}}}(T,b,p,a,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),I),0!==p.paint.get("icon-opacity").constantOr(1)&&to(b,a,p,T,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),z,$),0!==p.paint.get("text-opacity").constantOr(1)&&to(b,a,p,T,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),z,$),a.map.showCollisionBoxes&&(Ta(b,a,p,T,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Ta(b,a,p,T,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(b,a,p,T){if("translucent"!==b.renderPass)return;const I=p.paint.get("circle-opacity"),z=p.paint.get("circle-stroke-width"),$=p.paint.get("circle-stroke-opacity"),Z=void 0!==p.layout.get("circle-sort-key").constantOr(1);if(0===I.constantOr(1)&&(0===z.constantOr(1)||0===$.constantOr(1)))return;const Q=b.context,le=Q.gl,oe=b.transform,ye=b.depthModeForSublayer(0,e.DepthMode.ReadOnly),Be=e.StencilMode.disabled,Ze=b.colorModeForRenderPass(),qe="globe"===oe.projection.name,Je=[e.mercatorXfromLng(oe.center.lng),e.mercatorYfromLat(oe.center.lat)],nt=[];for(let We=0;We<T.length;We++){const gt=T[We],vt=a.getTile(gt),zt=vt.getBucket(p);if(!zt||zt.projection.name!==oe.projection.name)continue;const Bt=zt.programConfigurations.get(p.id),Ft=Fc(p);qe&&Ft.push("PROJECTION_GLOBE_VIEW");const $t=b.useProgram("circle",Bt,Ft),Ut=zt.layoutVertexBuffer,li=zt.globeExtVertexBuffer,Gi=zt.indexBuffer,ti=oe.projection.createInversionMatrix(oe,gt.canonical),ki={programConfiguration:Bt,program:$t,layoutVertexBuffer:Ut,globeExtVertexBuffer:li,indexBuffer:Gi,uniformValues:aa(b,gt,vt,ti,Je,p),tile:vt};if(Z){const ci=zt.segments.get();for(const ji of ci)nt.push({segments:new e.SegmentVector([ji]),sortKey:ji.sortKey,state:ki})}else nt.push({segments:zt.segments,sortKey:0,state:ki})}Z&&nt.sort((We,gt)=>We.sortKey-gt.sortKey);const we={useDepthForOcclusion:!qe};for(const We of nt){const{programConfiguration:gt,program:vt,layoutVertexBuffer:zt,globeExtVertexBuffer:Bt,indexBuffer:Ft,uniformValues:$t,tile:Ut}=We.state,li=We.segments;b.terrain&&b.terrain.setupElevationDraw(Ut,vt,we),b.prepareDrawProgram(Q,vt,Ut.tileID.toUnwrapped()),vt.draw(Q,le.TRIANGLES,ye,Be,Ze,e.CullFaceMode.disabled,$t,p.id,zt,Ft,li,p.paint,oe.zoom,gt,[Bt])}},heatmap:function(b,a,p,T){if(0!==p.paint.get("heatmap-opacity"))if("offscreen"===b.renderPass){const I=b.context,z=I.gl,$=e.StencilMode.disabled,Z=new e.ColorMode([z.ONE,z.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Ze,qe,Je,nt){const we=Ze.gl,We=qe.width*nt,gt=qe.height*nt;Ze.activeTexture.set(we.TEXTURE1),Ze.viewport.set([0,0,We,gt]);let vt=Je.heatmapFbo;if(!vt||vt&&(vt.width!==We||vt.height!==gt)){vt&&vt.destroy();const zt=we.createTexture();we.bindTexture(we.TEXTURE_2D,zt),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_S,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_T,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MIN_FILTER,we.LINEAR),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MAG_FILTER,we.LINEAR),vt=Je.heatmapFbo=Ze.createFramebuffer(We,gt,!1),function(Bt,Ft,$t,Ut,li,Gi){const ti=Bt.gl;ti.texImage2D(ti.TEXTURE_2D,0,Bt.isWebGL2&&Bt.extRenderToTextureHalfFloat?ti.RGBA16F:ti.RGBA,li,Gi,0,ti.RGBA,Bt.extRenderToTextureHalfFloat?Bt.isWebGL2?ti.HALF_FLOAT:Bt.extTextureHalfFloat.HALF_FLOAT_OES:ti.UNSIGNED_BYTE,null),Ut.colorAttachment.set($t)}(Ze,0,zt,vt,We,gt)}else we.bindTexture(we.TEXTURE_2D,vt.colorAttachment.get()),Ze.bindFramebuffer.set(vt.framebuffer)})(I,b,p,"globe"===b.transform.projection.name?.5:.25),I.clear({color:e.Color.transparent});const Q=b.transform,le="globe"===Q.projection.name,oe=le?["PROJECTION_GLOBE_VIEW"]:null,ye=le?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,Be=[e.mercatorXfromLng(Q.center.lng),e.mercatorYfromLat(Q.center.lat)];for(let Ze=0;Ze<T.length;Ze++){const qe=T[Ze];if(a.hasRenderableParent(qe))continue;const Je=a.getTile(qe),nt=Je.getBucket(p);if(!nt||nt.projection.name!==Q.projection.name)continue;const we=nt.programConfigurations.get(p.id),We=b.useProgram("heatmap",we,oe),{zoom:gt}=b.transform;b.terrain&&b.terrain.setupElevationDraw(Je,We),b.prepareDrawProgram(I,We,qe.toUnwrapped());const vt=Q.projection.createInversionMatrix(Q,qe.canonical);We.draw(I,z.TRIANGLES,e.DepthMode.disabled,$,Z,ye,la(b,qe,Je,vt,Be,gt,p.paint.get("heatmap-intensity")),p.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,p.paint,b.transform.zoom,we,le?[nt.globeExtVertexBuffer]:null)}I.viewport.set([0,0,b.width,b.height])}else"translucent"===b.renderPass&&(b.context.setColorMode(b.colorModeForRenderPass()),function(I,z){const $=I.context,Z=$.gl,Q=z.heatmapFbo;if(!Q)return;$.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,Q.colorAttachment.get()),$.activeTexture.set(Z.TEXTURE1);let le=z.colorRampTexture;le||(le=z.colorRampTexture=new e.Texture($,z.colorRamp,Z.RGBA)),le.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),I.useProgram("heatmapTexture").draw($,Z.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,I.colorModeForRenderPass(),e.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:z.paint.get("heatmap-opacity")},z.id,I.viewportBuffer,I.quadTriangleIndexBuffer,I.viewportSegments,z.paint,I.transform.zoom)}(b,p))},line:function(b,a,p,T){if("translucent"!==b.renderPass)return;const I=p.paint.get("line-opacity"),z=p.paint.get("line-width");if(0===I.constantOr(1)||0===z.constantOr(1))return;const $=b.depthModeForSublayer(0,e.DepthMode.ReadOnly),Z=b.colorModeForRenderPass(),Q=b.terrain&&b.terrain.renderingToTexture?1:e.exported.devicePixelRatio,le=p.paint.get("line-dasharray"),oe=le.constantOr(1),ye=p.layout.get("line-cap"),Be=p.paint.get("line-pattern"),Ze=Be.constantOr(1),qe=p.paint.get("line-gradient"),Je=Ze?"linePattern":"line",nt=b.context,we=nt.gl,We=(vt=>{const zt=[];$s(vt)&&zt.push("RENDER_LINE_DASH"),vt.paint.get("line-gradient")&&zt.push("RENDER_LINE_GRADIENT");const Bt=vt.paint.get("line-trim-offset");0===Bt[0]&&0===Bt[1]||zt.push("RENDER_LINE_TRIM_OFFSET");const Ft=vt.paint.get("line-pattern").constantOr(1),$t=1!==vt.paint.get("line-opacity").constantOr(1);return!Ft&&$t&&zt.push("RENDER_LINE_ALPHA_DISCARD"),zt})(p);let gt=We.includes("RENDER_LINE_ALPHA_DISCARD");b.terrain&&b.terrain.clipOrMaskOverlapStencilType()&&(gt=!1);for(const vt of T){const zt=a.getTile(vt);if(Ze&&!zt.patternsLoaded())continue;const Bt=zt.getBucket(p);if(!Bt)continue;b.prepareDrawTile();const Ft=Bt.programConfigurations.get(p.id),$t=b.useProgram(Je,Ft,We),Ut=Be.constantOr(null);if(Ut&&zt.imageAtlas){const wi=zt.imageAtlas.patternPositions[Ut.toString()];wi&&Ft.setConstantPatternPositions(wi)}const li=le.constantOr(null),Gi=ye.constantOr(null);if(!Ze&&li&&Gi&&zt.lineAtlas){const wi=zt.lineAtlas.getDash(li,Gi);wi&&Ft.setConstantPatternPositions(wi)}let[ti,ki]=p.paint.get("line-trim-offset");("round"===Gi||"square"===Gi)&&ti!==ki&&(0===ti&&(ti-=1),1===ki&&(ki+=1));const ci=b.terrain?vt.projMatrix:null,ji=Ze?Do(b,zt,p,ci,Q):wa(b,zt,p,ci,Bt.lineClipsArray.length,Q,[ti,ki]);if(qe){const wi=Bt.gradients[p.id];let Wi=wi.texture;if(p.gradientVersion!==wi.version){let zi=256;if(p.stepInterpolant){const Hi=a.getSource().maxzoom,Pn=vt.canonical.z===Hi?Math.ceil(1<<b.transform.maxZoom-vt.canonical.z):1;zi=e.clamp(e.nextPowerOfTwo(Bt.maxLineLength/e.EXTENT*1024*Pn),256,nt.maxTextureSize)}wi.gradient=e.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:zi,image:wi.gradient||void 0,clips:Bt.lineClipsArray}),wi.texture?wi.texture.update(wi.gradient):wi.texture=new e.Texture(nt,wi.gradient,we.RGBA),wi.version=p.gradientVersion,Wi=wi.texture}nt.activeTexture.set(we.TEXTURE1),Wi.bind(p.stepInterpolant?we.NEAREST:we.LINEAR,we.CLAMP_TO_EDGE)}oe&&(nt.activeTexture.set(we.TEXTURE0),zt.lineAtlasTexture.bind(we.LINEAR,we.REPEAT),Ft.updatePaintBuffers()),Ze&&(nt.activeTexture.set(we.TEXTURE0),zt.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),Ft.updatePaintBuffers()),b.prepareDrawProgram(nt,$t,vt.toUnwrapped());const oi=wi=>{$t.draw(nt,we.TRIANGLES,$,wi,Z,e.CullFaceMode.disabled,ji,p.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,p.paint,b.transform.zoom,Ft,[Bt.layoutVertexBuffer2])};if(gt){const wi=b.stencilModeForClipping(vt).ref;0===wi&&b.terrain&&nt.clear({stencil:0});const Wi={func:we.EQUAL,mask:255};ji.u_alpha_discard_threshold=.8,oi(new e.StencilMode(Wi,wi,255,we.KEEP,we.KEEP,we.INVERT)),ji.u_alpha_discard_threshold=0,oi(new e.StencilMode(Wi,wi,255,we.KEEP,we.KEEP,we.KEEP))}else oi(b.stencilModeForClipping(vt))}gt&&(b.resetStencilClippingMasks(),b.terrain&&nt.clear({stencil:0}))},fill:function(b,a,p,T){const I=p.paint.get("fill-color"),z=p.paint.get("fill-opacity");if(0===z.constantOr(1))return;const $=b.colorModeForRenderPass(),Z=p.paint.get("fill-pattern"),Q=b.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&1===I.constantOr(e.Color.transparent).a&&1===z.constantOr(0)?"opaque":"translucent";if(b.renderPass===Q){const le=b.depthModeForSublayer(1,"opaque"===b.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Ra(b,a,p,T,le,$,!1)}if("translucent"===b.renderPass&&p.paint.get("fill-antialias")){const le=b.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Ra(b,a,p,T,le,$,!0)}},"fill-extrusion":function(b,a,p,T){const I=p.paint.get("fill-extrusion-opacity");if(0!==I&&"translucent"===b.renderPass){const z=new e.DepthMode(b.context.gl.LEQUAL,e.DepthMode.ReadWrite,b.depthRangeFor3D);if(1!==I||p.paint.get("fill-extrusion-pattern").constantOr(1))tl(b,a,p,T,z,e.StencilMode.disabled,e.ColorMode.disabled),tl(b,a,p,T,z,b.stencilModeFor3D(),b.colorModeForRenderPass()),b.resetStencilClippingMasks();else{const $=b.colorModeForRenderPass();tl(b,a,p,T,z,e.StencilMode.disabled,$)}}},hillshade:function(b,a,p,T){if("offscreen"!==b.renderPass&&"translucent"!==b.renderPass)return;const I=b.context,z=b.depthModeForSublayer(0,e.DepthMode.ReadOnly),$=b.colorModeForRenderPass(),Z=b.terrain&&b.terrain.renderingToTexture,[Q,le]="translucent"!==b.renderPass||Z?[{},T]:b.stencilConfigForOverlap(T);for(const oe of le){const ye=a.getTile(oe);if(ye.needsHillshadePrepare&&"offscreen"===b.renderPass)Qr(b,ye,p,z,e.StencilMode.disabled,$);else if("translucent"===b.renderPass){const Be=Z&&b.terrain?b.terrain.stencilModeForRTTOverlap(oe):Q[oe.overscaledZ];ql(b,oe,ye,p,z,Be,$)}}I.viewport.set([0,0,b.width,b.height]),b.resetStencilClippingMasks()},raster:function(b,a,p,T,I,z){if("translucent"!==b.renderPass||0===p.paint.get("raster-opacity")||!T.length)return;const $=b.context,Z=$.gl,Q=a.getSource(),le=b.useProgram("raster"),oe=b.colorModeForRenderPass(),ye=b.terrain&&b.terrain.renderingToTexture,[Be,Ze]=Q instanceof Ke||ye?[{},T]:b.stencilConfigForOverlap(T),qe=Ze[Ze.length-1].overscaledZ,Je=!b.options.moving;for(const nt of Ze){const we=ye?e.DepthMode.disabled:b.depthModeForSublayer(nt.overscaledZ-qe,1===p.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,Z.LESS),We=nt.toUnwrapped(),gt=a.getTile(nt);if(ye&&(!gt||!gt.hasData()))continue;const vt=ye?nt.projMatrix:b.transform.calculateProjMatrix(We,Je),zt=b.terrain&&ye?b.terrain.stencilModeForRTTOverlap(nt):Be[nt.overscaledZ],Bt=z?0:p.paint.get("raster-fade-duration");gt.registerFadeDuration(Bt);const Ft=a.findLoadedParent(nt,0),$t=Fn(gt,Ft,a,b.transform,Bt);let Ut,li;b.terrain&&b.terrain.prepareDrawTile();const Gi="nearest"===p.paint.get("raster-resampling")?Z.NEAREST:Z.LINEAR;$.activeTexture.set(Z.TEXTURE0),gt.texture.bind(Gi,Z.CLAMP_TO_EDGE),$.activeTexture.set(Z.TEXTURE1),Ft?(Ft.texture.bind(Gi,Z.CLAMP_TO_EDGE),Ut=Math.pow(2,Ft.tileID.overscaledZ-gt.tileID.overscaledZ),li=[gt.tileID.canonical.x*Ut%1,gt.tileID.canonical.y*Ut%1]):gt.texture.bind(Gi,Z.CLAMP_TO_EDGE),gt.texture.useMipmap&&$.extTextureFilterAnisotropic&&b.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const ti=Ca(vt,li||[0,0],Ut||1,$t,p,Q instanceof Ke?Q.perspectiveTransform:[0,0]);if(b.prepareDrawProgram($,le,We),Q instanceof Ke)Q.boundsBuffer&&Q.boundsSegments&&le.draw($,Z.TRIANGLES,we,e.StencilMode.disabled,oe,e.CullFaceMode.disabled,ti,p.id,Q.boundsBuffer,b.quadTriangleIndexBuffer,Q.boundsSegments);else{const{tileBoundsBuffer:ki,tileBoundsIndexBuffer:ci,tileBoundsSegments:ji}=b.getTileBoundsBuffers(gt);le.draw($,Z.TRIANGLES,we,zt,oe,e.CullFaceMode.disabled,ti,p.id,ki,ci,ji)}}b.resetStencilClippingMasks()},background:function(b,a,p,T){const I=p.paint.get("background-color"),z=p.paint.get("background-opacity");if(0===z)return;const $=b.context,Z=$.gl,Q=b.transform,le=Q.tileSize,oe=p.paint.get("background-pattern");if(b.isPatternMissing(oe))return;const ye=!oe&&1===I.a&&1===z&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ye)return;const Be=e.StencilMode.disabled,Ze=b.depthModeForSublayer(0,"opaque"===ye?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),qe=b.colorModeForRenderPass(),Je=b.useProgram(oe?"backgroundPattern":"background");let nt,we=T;we||(nt=b.getBackgroundTiles(),we=Object.values(nt).map(We=>We.tileID)),oe&&($.activeTexture.set(Z.TEXTURE0),b.imageManager.bind(b.context));for(const We of we){const gt=We.toUnwrapped(),vt=T?We.projMatrix:b.transform.calculateProjMatrix(gt);b.prepareDrawTile();const zt=a?a.getTile(We):nt?nt[We.key]:new e.Tile(We,le,Q.zoom,b),Bt=oe?Bc(vt,z,b,oe,{tileID:We,tileSize:le}):ho(vt,z,I);b.prepareDrawProgram($,Je,gt);const{tileBoundsBuffer:Ft,tileBoundsIndexBuffer:$t,tileBoundsSegments:Ut}=b.getTileBoundsBuffers(zt);Je.draw($,Z.TRIANGLES,Ze,Be,qe,e.CullFaceMode.disabled,Bt,p.id,Ft,$t,Ut)}},sky:function(b,a,p){const T=b.transform,I="mercator"===T.projection.name||"globe"===T.projection.name?1:e.smoothstep(7,8,T.zoom),z=p.paint.get("sky-opacity")*I;if(0===z)return;const $=b.context,Z=p.paint.get("sky-type"),Q=new e.DepthMode($.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),le=b.frameCounter/1e3%1;"atmosphere"===Z?"offscreen"===b.renderPass?p.needsSkyboxCapture(b)&&(function(oe,ye,Be,Ze){const qe=oe.context,Je=qe.gl;let nt=ye.skyboxFbo;if(!nt){nt=ye.skyboxFbo=qe.createFramebuffer(32,32,!1),ye.skyboxGeometry=new il(qe),ye.skyboxTexture=qe.gl.createTexture(),Je.bindTexture(Je.TEXTURE_CUBE_MAP,ye.skyboxTexture),Je.texParameteri(Je.TEXTURE_CUBE_MAP,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_CUBE_MAP,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_CUBE_MAP,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_CUBE_MAP,Je.TEXTURE_MAG_FILTER,Je.LINEAR);for(let vt=0;vt<6;++vt)Je.texImage2D(Je.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0,Je.RGBA,32,32,0,Je.RGBA,Je.UNSIGNED_BYTE,null)}qe.bindFramebuffer.set(nt.framebuffer),qe.viewport.set([0,0,32,32]);const we=ye.getCenter(oe,!0),We=oe.useProgram("skyboxCapture"),gt=new Float64Array(16);e.identity(gt),e.rotateY(gt,gt,.5*-Math.PI),es(qe,ye,We,gt,we,0),e.identity(gt),e.rotateY(gt,gt,.5*Math.PI),es(qe,ye,We,gt,we,1),e.identity(gt),e.rotateX(gt,gt,.5*-Math.PI),es(qe,ye,We,gt,we,2),e.identity(gt),e.rotateX(gt,gt,.5*Math.PI),es(qe,ye,We,gt,we,3),e.identity(gt),es(qe,ye,We,gt,we,4),e.identity(gt),e.rotateY(gt,gt,Math.PI),es(qe,ye,We,gt,we,5),qe.viewport.set([0,0,oe.width,oe.height])}(b,p),p.markSkyboxValid(b)):"sky"===b.renderPass&&function(oe,ye,Be,Ze,qe){const Je=oe.context,nt=Je.gl,we=oe.transform,We=oe.useProgram("skybox");Je.activeTexture.set(nt.TEXTURE0),nt.bindTexture(nt.TEXTURE_CUBE_MAP,ye.skyboxTexture);const gt=((vt,zt,Bt,Ft,$t)=>({u_matrix:vt,u_sun_direction:zt,u_cubemap:0,u_opacity:Ft,u_temporal_offset:$t}))(we.skyboxMatrix,ye.getCenter(oe,!1),0,Ze,qe);oe.prepareDrawProgram(Je,We),We.draw(Je,nt.TRIANGLES,Be,e.StencilMode.disabled,oe.colorModeForRenderPass(),e.CullFaceMode.backCW,gt,"skybox",ye.skyboxGeometry.vertexBuffer,ye.skyboxGeometry.indexBuffer,ye.skyboxGeometry.segment)}(b,p,Q,z,le):"gradient"===Z&&"sky"===b.renderPass&&function(oe,ye,Be,Ze,qe){const Je=oe.context,nt=Je.gl,we=oe.transform,We=oe.useProgram("skyboxGradient");ye.skyboxGeometry||(ye.skyboxGeometry=new il(Je)),Je.activeTexture.set(nt.TEXTURE0);let gt=ye.colorRampTexture;gt||(gt=ye.colorRampTexture=new e.Texture(Je,ye.colorRamp,nt.RGBA)),gt.bind(nt.LINEAR,nt.CLAMP_TO_EDGE);const vt=(zt=we.skyboxMatrix,Bt=ye.getCenter(oe,!1),Ft=ye.paint.get("sky-gradient-radius"),$t=Ze,Ut=qe,{u_matrix:zt,u_color_ramp:0,u_center_direction:Bt,u_radius:e.degToRad(Ft),u_opacity:$t,u_temporal_offset:Ut});var zt,Bt,Ft,$t,Ut;oe.prepareDrawProgram(Je,We),We.draw(Je,nt.TRIANGLES,Be,e.StencilMode.disabled,oe.colorModeForRenderPass(),e.CullFaceMode.backCW,vt,"skyboxGradient",ye.skyboxGeometry.vertexBuffer,ye.skyboxGeometry.indexBuffer,ye.skyboxGeometry.segment)}(b,p,Q,z,le)},debug:function(b,a,p){for(let T=0;T<p.length;T++)Nc(b,a,p[T])},custom:function(b,a,p,T){const I=b.context,z=p.implementation;if(!b.transform.projection.unsupportedLayers||!b.transform.projection.unsupportedLayers.includes("custom")||b.terrain&&(b.terrain.renderingToTexture||"offscreen"===b.renderPass)&&p.isLayerDraped()){if("offscreen"===b.renderPass){const $=z.prerender;if($){if(b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),"globe"===b.transform.projection.name){const Z=b.transform.pointMerc;$.call(z,I.gl,b.transform.customLayerMatrix(),b.transform.getProjection(),b.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(b.transform.zoom),[Z.x,Z.y],b.transform.pixelsPerMeterRatio)}else $.call(z,I.gl,b.transform.customLayerMatrix());I.setDirty(),b.setBaseState()}}else if("translucent"===b.renderPass){if(b.terrain&&b.terrain.renderingToTexture){const Z=z.renderToTile;if(Z){const Q=T[0].canonical,le=new e.MercatorCoordinate(Q.x+T[0].wrap*(1<<Q.z),Q.y,Q.z);I.setDepthMode(e.DepthMode.disabled),I.setStencilMode(e.StencilMode.disabled),I.setColorMode(b.colorModeForRenderPass()),b.setCustomLayerDefaults(),Z.call(z,I.gl,le),I.setDirty(),b.setBaseState()}return}b.setCustomLayerDefaults(),I.setColorMode(b.colorModeForRenderPass()),I.setStencilMode(e.StencilMode.disabled);const $="3d"===z.renderingMode?new e.DepthMode(b.context.gl.LEQUAL,e.DepthMode.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(I.setDepthMode($),"globe"===b.transform.projection.name){const Z=b.transform.pointMerc;z.render(I.gl,b.transform.customLayerMatrix(),b.transform.getProjection(),b.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(b.transform.zoom),[Z.x,Z.y],b.transform.pixelsPerMeterRatio)}else z.render(I.gl,b.transform.customLayerMatrix());I.setDirty(),b.setBaseState(),I.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class fo{constructor(a,p,T=!1){this.context=new Pe(a,T),this.transform=p,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(a,p){const T=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(T||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ds(this,a));const I=this._terrain;this.transform.elevation=T?I:null,I.update(a,this.transform,p)}_updateFog(a){const p=a.fog;if(!p||"globe"===this.transform.projection.name||p.getOpacity(this.transform.pitch)<1||p.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[T,I]=p.getFovAdjustedRange(this.transform._fov);if(T>I)return void(this.transform.fogCullDistSq=null);const z=T+.78*(I-T);this.transform.fogCullDistSq=z*z}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(a,p){if(this.width=a*e.exported.devicePixelRatio,this.height=p*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const T of this.style.order)this.style._layers[T].resize()}setup(){const a=this.context,p=new e.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(e.EXTENT,0),p.emplaceBack(0,e.EXTENT),p.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=a.createVertexBuffer(p,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const T=new e.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(e.EXTENT,0),T.emplaceBack(0,e.EXTENT),T.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=a.createVertexBuffer(T,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const I=new e.StructArrayLayout2i4;I.emplaceBack(-1,-1),I.emplaceBack(1,-1),I.emplaceBack(-1,1),I.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(I,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const z=new e.StructArrayLayout4i8;z.emplaceBack(0,0,0,0),z.emplaceBack(e.EXTENT,0,e.EXTENT,0),z.emplaceBack(0,e.EXTENT,0,e.EXTENT),z.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=a.createVertexBuffer(z,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const $=new e.StructArrayLayout3ui6;$.emplaceBack(0,1,2),$.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer($);const Z=new e.StructArrayLayout1ui2;for(const le of[0,1,3,2,0])Z.emplaceBack(le);this.debugIndexBuffer=a.createIndexBuffer(Z),this.emptyTexture=new e.Texture(a,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA),this.identityMat=e.create();const Q=this.context.gl;this.stencilClearMode=new e.StencilMode({func:Q.ALWAYS,mask:0},0,255,Q.ZERO,Q.ZERO,Q.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new za(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context,p=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(a,p.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,oa(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,p,T){if(!p||this.currentStencilSource===p.id||!a.isTileClipped()||!T||0===T.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let Z=!1;for(const Q of T)if(void 0===this._tileClippingMaskIDs[Q.key]){Z=!0;break}if(!Z)return}this.currentStencilSource=p.id;const I=this.context,z=I.gl;this.nextStencilID+T.length>256&&this.clearStencil(),I.setColorMode(e.ColorMode.disabled),I.setDepthMode(e.DepthMode.disabled);const $=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Z of T){const Q=p.getTile(Z),le=this._tileClippingMaskIDs[Z.key]=this.nextStencilID++,{tileBoundsBuffer:oe,tileBoundsIndexBuffer:ye,tileBoundsSegments:Be}=this.getTileBoundsBuffers(Q);$.draw(I,z.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:z.ALWAYS,mask:0},le,255,z.KEEP,z.KEEP,z.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,oa(Z.projMatrix),"$clipping",oe,ye,Be)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,p=this.context.gl;return new e.StencilMode({func:p.NOTEQUAL,mask:255},a,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const p=this.context.gl;return new e.StencilMode({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(a){const p=this.context.gl,T=a.sort(($,Z)=>Z.overscaledZ-$.overscaledZ),I=T[T.length-1].overscaledZ,z=T[0].overscaledZ-I+1;if(z>1){this.currentStencilSource=void 0,this.nextStencilID+z>256&&this.clearStencil();const $={};for(let Z=0;Z<z;Z++)$[Z+I]=new e.StencilMode({func:p.GEQUAL,mask:255},Z+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=z,[$,T]}return[{[I]:e.StencilMode.disabled},T]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new e.ColorMode([a.CONSTANT_COLOR,a.ONE],new e.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(a,p,T){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const I=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new e.DepthMode(T||this.context.gl.LEQUAL,p,[I,I])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,p){this.style=a,this.options=p,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const T=this.style.order,I=this.style._sourceCaches;for(const le in I){const oe=I[le];oe.used&&oe.prepare(this.context)}const z={},$={},Z={};for(const le in I){const oe=I[le];z[le]=oe.getVisibleCoordinates(),$[le]=z[le].slice().reverse(),Z[le]=oe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let le=0;le<T.length;le++)if(this.style._layers[T[le]].is3D()){this.opaquePassCutoff=le;break}if(this.terrain&&(this.terrain.updateTileBinding(Z),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const le of T){const oe=this.style._layers[le],ye=a._getLayerSourceCache(oe);if(!oe.hasOffscreenPass()||oe.isHidden(this.transform.zoom))continue;const Be=ye?$[ye.id]:void 0;("custom"===oe.type||oe.isSky()||Be&&Be.length)&&this.renderLayer(this,ye,oe,Be)}this.depthRangeFor3D=[0,1-(a.order.length+2)*this.numSublayers*this.depthEpsilon];const Q=this.terrain;if(Q&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&Q.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:p.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const le=this.style._layers[T[this.currentLayer]],oe=a._getLayerSourceCache(le);if(le.isSky())continue;const ye=oe?$[oe.id]:void 0;this._renderTileClippingMasks(le,oe,ye),this.renderLayer(this,oe,le,ye)}if(this.style.fog&&this.transform.projection.supportsFog&&function(le,oe){const ye=le.context,Be=ye.gl,Ze=le.transform,qe=new e.DepthMode(Be.LEQUAL,e.DepthMode.ReadOnly,[0,1]),Je=le.useProgram("globeAtmosphere",null,"globe"===Ze.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),nt=e.globeToMercatorTransition(Ze.zoom),we=oe.properties.get("color").toArray01(),We=oe.properties.get("high-color").toArray01(),gt=oe.properties.get("space-color").toArray01PremultipliedAlpha(),vt=e.identity$1([]);e.rotateY$1(vt,vt,-e.degToRad(Ze._center.lng)),e.rotateX$1(vt,vt,e.degToRad(Ze._center.lat)),e.rotateZ$1(vt,vt,Ze.angle),e.rotateX$1(vt,vt,-Ze._pitch);const zt=e.fromQuat(new Float32Array(16),vt),Bt=e.mapValue(oe.properties.get("star-intensity"),0,1,0,.25),$t=e.mapValue(oe.properties.get("horizon-blend"),0,1,5e-4,.25),Ut=e.globeUseCustomAntiAliasing(le,ye,Ze)&&5e-4===$t?Ze.worldSize/(2*Math.PI*1.025)-1:Ze.globeRadius,li=le.frameCounter/1e3%1,Gi=e.length(Ze.globeCenterInViewSpace),ti=Math.sqrt(Math.pow(Gi,2)-Math.pow(Ut,2)),ki=Math.acos(ti/Gi),ci={u_frustum_tl:Ze.frustumCorners.TL,u_frustum_tr:Ze.frustumCorners.TR,u_frustum_br:Ze.frustumCorners.BR,u_frustum_bl:Ze.frustumCorners.BL,u_horizon:Ze.frustumCorners.horizon,u_transition:nt,u_fadeout_range:$t,u_color:we,u_high_color:We,u_space_color:gt,u_star_intensity:Bt,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:li,u_horizon_angle:ki,u_rotation_matrix:zt};le.prepareDrawProgram(ye,Je);const ji=le.atmosphereBuffer;ji&&Je.draw(ye,Be.TRIANGLES,qe,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,ci,"skybox",ji.vertexBuffer,ji.indexBuffer,ji.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const le=this.style._layers[T[this.currentLayer]],oe=a._getLayerSourceCache(le);le.isSky()&&this.renderLayer(this,oe,le,oe?$[oe.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;){const le=this.style._layers[T[this.currentLayer]],oe=a._getLayerSourceCache(le);if(le.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(le)){if(le.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ye=oe?("symbol"===le.type?Z:$)[oe.id]:void 0;this._renderTileClippingMasks(le,oe,oe?z[oe.id]:void 0),this.renderLayer(this,oe,le,ye),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let le=null;e.values(this.style._layers).forEach(oe=>{const ye=a._getLayerSourceCache(oe);ye&&!oe.isHidden(this.transform.zoom)&&(!le||le.getSource().maxzoom<ye.getSource().maxzoom)&&(le=ye)}),le&&this.options.showTileBoundaries&&Sa.debug(this,le,le.getVisibleCoordinates())}this.options.showPadding&&function(le){const oe=le.transform.padding;po(le,le.transform.height-(oe.top||0),3,ka),po(le,oe.bottom||0,3,vc),Go(le,oe.left||0,3,Ea),Go(le,le.transform.width-(oe.right||0),3,Ql);const ye=le.transform.centerPoint;var Be,Ze,qe,Je;yl(Be=le,(Ze=ye.x)-1,(qe=le.transform.height-ye.y)-10,2,20,Je=vl),yl(Be,Ze-10,qe-1,20,2,Je)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(a,p,T,I){T.isHidden(this.transform.zoom)||("background"===T.type||"sky"===T.type||"custom"===T.type||I&&I.length)&&(this.id=T.id,this.gpuTimingStart(T),(!a.transform.projection.unsupportedLayers||!a.transform.projection.unsupportedLayers.includes(T.type)||a.terrain&&"custom"===T.type)&&Sa[T.type](a,p,T,I,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let T=this.gpuTimers[a.id];T||(T=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),T.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,p=a.createQueryEXT();this.deferredRenderGpuTimeQueries.push(p),a.beginQueryEXT(a.TIME_ELAPSED_EXT,p)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const p={};for(const T in a){const I=a[T],z=this.context.extTimerQuery,$=z.getQueryObjectEXT(I.query,z.QUERY_RESULT_EXT)/1e6;z.deleteQueryEXT(I.query),p[T]=$}return p}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const p=this.context.extTimerQuery;let T=0;for(const I of a)T+=p.getQueryObjectEXT(I,p.QUERY_RESULT_EXT)/1e6,p.deleteQueryEXT(I);return T}translatePosMatrix(a,p,T,I,z){if(!T[0]&&!T[1])return a;const $=z?"map"===I?this.transform.angle:0:"viewport"===I?-this.transform.angle:0;if($){const le=Math.sin($),oe=Math.cos($);T=[T[0]*oe-T[1]*le,T[0]*le+T[1]*oe]}const Z=[z?T[0]:Yi(p,T[0],this.transform.zoom),z?T[1]:Yi(p,T[1],this.transform.zoom),0],Q=new Float32Array(16);return e.translate(Q,a,Z),Q}saveTileTexture(a){const p=this._tileTextures[a.size[0]];p?p.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const p=this._tileTextures[a];return p&&p.length>0?p.pop():null}isPatternMissing(a){return null===a||void 0!==a&&!this.imageManager.getPattern(a.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const a=this.terrain&&this.terrain.renderingToTexture,p=this.terrain&&0===this.terrain.exaggeration(),T=this.style&&this.style.fog,I=[];return this.terrainRenderModeElevated()&&I.push("TERRAIN"),"globe"===this.transform.projection.name&&I.push("GLOBE"),p&&I.push("ZERO_EXAGGERATION"),T&&!a&&0!==T.getOpacity(this.transform.pitch)&&I.push("FOG"),a&&I.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&I.push("OVERDRAW_INSPECTOR"),I}useProgram(a,p,T){this.cache=this.cache||{};const I=T||[],z=this.currentGlobalDefines().concat(I),$=Cr.cacheKey(ml[a],a,z,p);return this.cache[$]||(this.cache[$]=new Cr(this.context,a,ml[a],p,Ho[a],z)),this.cache[$]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(a,p,T){if(this.terrain&&this.terrain.renderingToTexture)return;const I=this.style.fog;if(I){const z=I.getOpacity(this.transform.pitch),$=((Z,Q,le,oe,ye,Be,Ze,qe,Je,nt,we)=>{const We=Z.transform,gt=Q.properties.get("color").toArray01();gt[3]=oe;const vt=Z.frameCounter/1e3%1;return{u_fog_matrix:le?We.calculateFogTileMatrix(le):Z.identityMat,u_fog_range:Q.getFovAdjustedRange(We._fov),u_fog_color:gt,u_fog_horizon_blend:Q.properties.get("horizon-blend"),u_fog_temporal_offset:vt,u_frustum_tl:ye,u_frustum_tr:Be,u_frustum_br:Ze,u_frustum_bl:qe,u_globe_pos:Je,u_globe_radius:nt,u_viewport:we,u_globe_transition:e.globeToMercatorTransition(We.zoom),u_is_globe:+("globe"===We.projection.name)}})(this,I,T,z,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);p.setFogUniformValues(a,$)}}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,p=a.createTexture();return a.bindTexture(a.TEXTURE_2D,p),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),p}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&0!==a.getOpacity(this.transform.pitch)}getBackgroundTiles(){const a=this._backgroundTiles,p=this._backgroundTiles={},T=this.transform.coveringTiles({tileSize:512});for(const I of T)p[I.key]=a[I.key]||new e.Tile(I,512,this.transform.tileZoom,this);return p}clearBackgroundTiles(){this._backgroundTiles={}}}class Bl{constructor(a=0,p=0,T=0,I=0){if(isNaN(a)||a<0||isNaN(p)||p<0||isNaN(T)||T<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=p,this.left=T,this.right=I}interpolate(a,p,T){return null!=p.top&&null!=a.top&&(this.top=e.number(a.top,p.top,T)),null!=p.bottom&&null!=a.bottom&&(this.bottom=e.number(a.bottom,p.bottom,T)),null!=p.left&&null!=a.left&&(this.left=e.number(a.left,p.left,T)),null!=p.right&&null!=a.right&&(this.right=e.number(a.right,p.right,T)),this}getCenter(a,p){const T=e.clamp((this.left+a-this.right)/2,0,a),I=e.clamp((this.top+p-this.bottom)/2,0,p);return new e.Point(T,I)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Bl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function jo(b,a){const p=e.getColumn(b,3);e.fromQuat(b,a),e.setColumn(b,3,p)}function Dr(b,a){const p=e.identity$1([]);return e.rotateZ$1(p,p,-a),e.rotateX$1(p,p,-b),p}function bl(b,a){const p=[b[0],b[1],0],T=[a[0],a[1],0];if(e.length(p)>=1e-15){const $=e.normalize([],p);e.scale$2(T,$,e.dot(T,$)),a[0]=T[0],a[1]=T[1]}const I=e.cross([],a,b);if(e.len(I)<1e-15)return null;const z=Math.atan2(-I[1],I[0]);return Dr(Math.atan2(Math.sqrt(b[0]*b[0]+b[1]*b[1]),-b[2]),z)}class Fa{constructor(a,p){this.position=a,this.orientation=p}get position(){return this._position}set position(a){if(a){const p=a instanceof e.MercatorCoordinate?a:new e.MercatorCoordinate(a[0],a[1],a[2]);this._renderWorldCopies&&(p.x=e.wrap(p.x,0,1)),this._position=p}else this._position=null}lookAtPoint(a,p){if(this.orientation=null,!this.position)return;const T=this.position,I=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(a)):0,z=e.MercatorCoordinate.fromLngLat(a,I),$=[z.x-T.x,z.y-T.y,z.z-T.z];p||(p=[0,0,1]),p[2]=Math.abs(p[2]),this.orientation=bl($,p)}setPitchBearing(a,p){this.orientation=Dr(e.degToRad(a),e.degToRad(-p))}}class Ma{constructor(a,p){this._transform=e.identity([]),this.orientation=p,this.position=a}get mercatorPosition(){const a=this.position;return new e.MercatorCoordinate(a[0],a[1],a[2])}get position(){const a=e.getColumn(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var p;a&&e.setColumn(this._transform,3,[(p=a)[0],p[1],p[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||e.identity$1([]),a&&jo(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),p=this.right();return{bearing:Math.atan2(-p[1],p[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,p){this._orientation=Dr(a,p),jo(this._transform,this._orientation)}forward(){const a=e.getColumn(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=e.getColumn(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=e.getColumn(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,p){const T=new Float64Array(16);return e.invert(T,this.getWorldToCamera(a,p)),T}getWorldToCameraPosition(a,p,T){const I=this.position;e.scale$2(I,I,-a);const z=new Float64Array(16);return e.fromScaling(z,[T,T,T]),e.translate(z,z,I),z[10]*=p,z}getWorldToCamera(a,p){const T=new Float64Array(16),I=new Float64Array(4),z=this.position;return e.conjugate(I,this._orientation),e.scale$2(z,z,-a),e.fromQuat(T,I),e.translate(T,T,z),T[1]*=-1,T[5]*=-1,T[9]*=-1,T[13]*=-1,T[8]*=p,T[9]*=p,T[10]*=p,T[11]*=p,T}getCameraToClipPerspective(a,p,T,I){const z=new Float64Array(16);return e.perspective(z,a,p,T,I),z}getDistanceToElevation(a,p=!1){const T=0===a?0:e.mercatorZfromAltitude(a,p?e.latFromMercatorY(this.position[1]):this.position[1]),I=this.forward();return(T-this.position[2])/I[2]}clone(){return new Ma([...this.position],[...this.orientation])}}function Lo(b,a){const p=Ba(b.projection,b.zoom,b.width,b.height),T=function(z,$,Z,Q,le){const oe=new e.LngLat(Z.lng-180*xs,Z.lat),ye=new e.LngLat(Z.lng+180*xs,Z.lat),Be=z.project(oe.lng,oe.lat),Ze=z.project(ye.lng,ye.lat),qe=-Math.atan2(Ze.y-Be.y,Ze.x-Be.x),Je=e.MercatorCoordinate.fromLngLat(Z);Je.y=e.clamp(Je.y,-1+xs,1-xs);const nt=Je.toLngLat(),we=z.project(nt.lng,nt.lat),We=e.MercatorCoordinate.fromLngLat(nt);We.x+=xs;const gt=We.toLngLat(),vt=z.project(gt.lng,gt.lat),zt=nl(vt.x-we.x,vt.y-we.y,qe),Bt=e.MercatorCoordinate.fromLngLat(nt);Bt.y+=xs;const Ft=Bt.toLngLat(),$t=z.project(Ft.lng,Ft.lat),Ut=nl($t.x-we.x,$t.y-we.y,qe),li=Math.abs(zt.x)/Math.abs(Ut.y),Gi=e.identity([]);e.rotateZ(Gi,Gi,-qe*(1-(le?0:Q)));const ti=e.identity([]);return e.scale(ti,ti,[1,1-(1-li)*Q,1]),ti[4]=-Ut.x/Ut.y*Q,e.rotateZ(ti,ti,qe),e.multiply(ti,Gi,ti),ti}(b.projection,0,b.center,p,a),I=xo(b);return e.scale(T,T,[I,I,1]),T}function xo(b){const a=b.projection,p=Ba(b.projection,b.zoom,b.width,b.height),T=Ws(a,b.center),I=Ws(a,e.LngLat.convert(a.center));return Math.pow(2,T*p+(1-p)*I)}function Ba(b,a,p,T,I=1/0){const z=b.range;if(!z)return 0;const $=Math.min(I,Math.max(p,T)),Z=Math.log($/1024)/Math.LN2;return e.smoothstep(z[0]+Z,z[1]+Z,a)}const xs=1/4e4;function Ws(b,a){const p=e.clamp(a.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),T=new e.LngLat(a.lng-180*xs,p),I=new e.LngLat(a.lng+180*xs,p),z=b.project(T.lng,p),$=b.project(I.lng,p),Z=e.MercatorCoordinate.fromLngLat(T),Q=e.MercatorCoordinate.fromLngLat(I),le=$.x-z.x,oe=$.y-z.y,ye=Q.x-Z.x,Be=Q.y-Z.y,Ze=Math.sqrt((ye*ye+Be*Be)/(le*le+oe*oe));return Math.log(Ze)/Math.LN2}function nl(b,a,p){const T=Math.cos(p),I=Math.sin(p);return{x:b*T-a*I,y:b*I+a*T}}class gs{constructor(a,p,T,I,z,$,Z){this.tileSize=512,this._renderWorldCopies=void 0===z||z,this._minZoom=a||0,this._maxZoom=p||22,this._minPitch=T??0,this._maxPitch=I??60,this.setProjection($),this.setMaxBounds(Z),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Bl,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Ma,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const a=new gs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(a,p=!1){const T=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||T)&&this._updateCameraOnTerrain(),(a||T)&&this._constrainCamera(p),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const p=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const T=!Y(p,this.getProjection());return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const p=a!==this.projection.name;return p&&this._calcMatrices(),p}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(a){void 0===a?a=!0:null===a&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const p=-a*Math.PI/180;var T,I,z,$,Z,Q,le,oe,ye,Be;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(T=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T),I=this.rotationMatrix,$=this.angle,Z=(z=this.rotationMatrix)[0],Q=z[1],le=z[2],oe=z[3],ye=Math.sin($),Be=Math.cos($),I[0]=Z*Be+le*ye,I[1]=Q*Be+oe*ye,I[2]=Z*-ye+le*Be,I[3]=Q*-ye+oe*Be)}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const p=e.clamp(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=e.degToRad(a),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const p=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._setZoom(p),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const a=this._elevation;this._centerAltitude=a.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=a.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,p=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],T=this.horizonLineFromTop();let I=0,z=0;for(let $=0;$<p.length;$++){const Z=new e.Point(p[$][0]*this.width,T+p[$][1]*(this.height-T)),Q=a.pointCoordinate(Z);if(!Q)continue;const le=1/Math.hypot(Q[0]-this._camera.position[0],Q[1]-this._camera.position[1]);I+=Q[3]*le,z+=le}return 0===z?NaN:I/z}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const a=this._seaLevelZoom,p=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),T=this.pixelsPerMeter/this.worldSize*p,I=this._mercatorZfromZoom(a),z=this._mercatorZfromZoom(this._maxZoom),$=Math.max(I-T,z);this._setZoom(this._zoomFromMercatorZ($))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const p=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let T;T=a.z<this._camera.position[2]?[p.x,p.y,p.z]:[a.x,a.y,a.z];const I=e.length(e.sub([],this._camera.position,T));return e.clamp(this._zoomFromMercatorZ(I),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let p=!1;if(a.orientation&&!e.exactEquals(a.orientation,this._camera.orientation)&&(p=this._setCameraOrientation(a.orientation)),a.position){const T=[a.position.x,a.position.y,a.position.z];e.exactEquals$1(T,this._camera.position)||(this._setCameraPosition(T),p=!0)}p&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,p=new Fa;return p.position=new e.MercatorCoordinate(a[0],a[1],a[2]),p.orientation=this._camera.orientation,p._elevation=this.elevation,p._renderWorldCopies=this.renderWorldCopies,p}_setCameraOrientation(a){if(!e.length$1(a))return!1;e.normalize$1(a,a);const p=e.transformQuat([],[0,0,-1],a),T=e.transformQuat([],[0,-1,0],a);if(T[2]<0)return!1;const I=bl(p,T);return!!I&&(this._camera.orientation=I,!0)}_setCameraPosition(a){const p=this.zoomScale(this.minZoom)*this.tileSize,T=this.zoomScale(this.maxZoom)*this.tileSize,I=this.cameraToCenterDistance;a[2]=e.clamp(a[2],I/T,I/p),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,p,T){this._unmodified=!1,this._edgeInsets.interpolate(a,p,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const p=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(a){const p=[new e.UnwrappedTileID(0,a)];if(this.renderWorldCopies){const T=this.pointCoordinate(new e.Point(0,0)),I=this.pointCoordinate(new e.Point(this.width,0)),z=this.pointCoordinate(new e.Point(this.width,this.height)),$=this.pointCoordinate(new e.Point(0,this.height)),Z=Math.floor(Math.min(T.x,I.x,z.x,$.x)),Q=Math.floor(Math.max(T.x,I.x,z.x,$.x)),le=1;for(let oe=Z-le;oe<=Q+le;oe++)0!==oe&&p.push(new e.UnwrappedTileID(oe,a))}return p}coveringTiles(a){let p=this.coveringZoomLevel(a);const T=p,I=this.elevation&&!a.isTerrainDEM,z="mercator"===this.projection.name;if(void 0!==a.minzoom&&p<a.minzoom)return[];void 0!==a.maxzoom&&p>a.maxzoom&&(p=a.maxzoom);const $=this.locationCoordinate(this.center),Z=this.center.lat,Q=1<<p,le=[Q*$.x,Q*$.y,0],oe="globe"===this.projection.name,ye=!oe,Be=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p,ye),Ze=oe?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),qe=Q*e.mercatorZfromAltitude(1,this.center.lat),Je=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),nt=[Q*Ze.x,Q*Ze.y,Je*(ye?1:qe)],we=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),We=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?p:0,gt=a.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,vt=a.isTerrainDEM?-gt:this._elevation?this._elevation.getMinElevationBelowMSL():0,zt=this.projection.isReprojectedInTileSpace?xo(this):1,Bt=oi=>{const Wi=new e.MercatorCoordinate(oi.x+25e-6,oi.y,oi.z),zi=new e.MercatorCoordinate(oi.x,oi.y+25e-6,oi.z),Hi=oi.toLngLat(),Pn=Wi.toLngLat(),nr=zi.toLngLat(),wn=this.locationCoordinate(Hi),jn=this.locationCoordinate(Pn),ar=this.locationCoordinate(nr),Zn=Math.hypot(jn.x-wn.x,jn.y-wn.y),On=Math.hypot(ar.x-wn.x,ar.y-wn.y);return Math.sqrt(Zn*On)*zt/25e-6},Ft=oi=>{const wi=gt,Wi=vt;return{aabb:e.tileAABB(this,Q,0,0,0,oi,Wi,wi,this.projection),zoom:0,x:0,y:0,minZ:Wi,maxZ:wi,wrap:oi,fullyVisible:!1}},$t=[];let Ut=[];const li=p,Gi=a.reparseOverscaled?T:p,ti=oi=>oi*oi,ki=ti((Je-this._centerAltitude)*qe),ci=oi=>{if(!this._elevation||!oi.tileID||!z)return;const wi=this._elevation.getMinMaxForTile(oi.tileID),Wi=oi.aabb;wi?(Wi.min[2]=wi.min,Wi.max[2]=wi.max,Wi.center[2]=(Wi.min[2]+Wi.max[2])/2):(oi.shouldSplit=ji(oi),oi.shouldSplit||(Wi.min[2]=Wi.max[2]=Wi.center[2]=this._centerAltitude))},ji=oi=>{if(oi.zoom<We)return!0;if(oi.zoom===li)return!1;if(null!=oi.shouldSplit)return oi.shouldSplit;const wi=oi.aabb.distanceX(nt),Wi=oi.aabb.distanceY(nt);let zi=ki,Hi=1;if(oe){zi=ti(oi.aabb.distanceZ(nt));const wn=Math.pow(2,oi.zoom),jn=e.latFromMercatorY((oi.y+1)/wn),ar=e.latFromMercatorY(oi.y/wn),Zn=Math.min(Math.max(Z,jn),ar),On=e.circumferenceAtLatitude(Zn)/e.circumferenceAtLatitude(Z);if(Hi=Zn===Z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,On/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&oi.zoom===li-1&&On>=.9)return!0}else if(I&&(zi=ti(oi.aabb.distanceZ(nt)*qe)),this.projection.isReprojectedInTileSpace&&T<=5){const wn=Math.pow(2,oi.zoom),jn=Bt(new e.MercatorCoordinate((oi.x+.5)/wn,(oi.y+.5)/wn));Hi=jn>.85?1:jn}const Pn=wi*wi+Wi*Wi+zi;return Pn<ti((1<<li-oi.zoom)*we*Hi*((wn,jn)=>{if(jn*ti(.707)<wn)return 1;const ar=Math.sqrt(jn/wn);return ar/(1.4144271570014144+(Math.pow(1.1,ar-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(zi,ki),Pn))};if(this.renderWorldCopies)for(let oi=1;oi<=3;oi++)$t.push(Ft(-oi)),$t.push(Ft(oi));for($t.push(Ft(0));$t.length>0;){const oi=$t.pop(),wi=oi.x,Wi=oi.y;let zi=oi.fullyVisible;if(!zi){const Hi=oi.aabb.intersects(Be);if(0===Hi)continue;zi=2===Hi}if(oi.zoom!==li&&ji(oi))for(let Hi=0;Hi<4;Hi++){const Pn=(wi<<1)+Hi%2,nr=(Wi<<1)+(Hi>>1),wn={aabb:z?oi.aabb.quadrant(Hi):e.tileAABB(this,Q,oi.zoom+1,Pn,nr,oi.wrap,oi.minZ,oi.maxZ,this.projection),zoom:oi.zoom+1,x:Pn,y:nr,wrap:oi.wrap,fullyVisible:zi,tileID:void 0,shouldSplit:void 0,minZ:oi.minZ,maxZ:oi.maxZ};I&&!oe&&(wn.tileID=new e.OverscaledTileID(oi.zoom+1===li?Gi:oi.zoom+1,oi.wrap,oi.zoom+1,Pn,nr),ci(wn)),$t.push(wn)}else{const Hi=oi.zoom===li?Gi:oi.zoom;if(a.minzoom&&a.minzoom>Hi)continue;const Pn=le[0]-(.5+wi+(oi.wrap<<oi.zoom))*(1<<p-oi.zoom),nr=le[1]-.5-Wi,wn=oi.tileID?oi.tileID:new e.OverscaledTileID(Hi,oi.wrap,oi.zoom,wi,Wi);Ut.push({tileID:wn,distanceSq:Pn*Pn+nr*nr})}}if(this.fogCullDistSq){const oi=this.fogCullDistSq,wi=this.horizonLineFromTop();Ut=Ut.filter(Wi=>{const zi=[0,0,0,1],Hi=[e.EXTENT,e.EXTENT,0,1],Pn=this.calculateFogTileMatrix(Wi.tileID.toUnwrapped());e.transformMat4$1(zi,zi,Pn),e.transformMat4$1(Hi,Hi,Pn);const nr=e.getAABBPointSquareDist(zi,Hi);if(0===nr)return!0;let wn=!1;const jn=this._elevation;if(jn&&nr>oi&&0!==wi){const ar=this.calculateProjMatrix(Wi.tileID.toUnwrapped());let Zn;a.isTerrainDEM||(Zn=jn.getMinMaxForTile(Wi.tileID)),Zn||(Zn={min:vt,max:gt});const On=e.furthestTileCorner(this.rotation),br=[On[0]*e.EXTENT,On[1]*e.EXTENT,Zn.max];e.transformMat4(br,br,ar),wn=(1-br[1])*this.height*.5<wi}return nr<oi||wn})}return Ut.sort((oi,wi)=>oi.distanceSq-wi.distanceSq).map(oi=>oi.tileID)}resize(a,p){this.width=a,this.height=p,this.pixelsToGLUnits=[2/a,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const p=e.clamp(a.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),T=this.projection.project(a.lng,p);return new e.Point(T.x*this.worldSize,T.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,p){let T,I;const z=this.centerPoint;if("globe"===this.projection.name){const Z=this.worldSize;T=(p.x-z.x)/Z,I=(p.y-z.y)/Z}else{const Z=this.pointCoordinate(p),Q=this.pointCoordinate(z);T=Z.x-Q.x,I=Z.y-Q.y}const $=this.locationCoordinate(a);this.setLocation(new e.MercatorCoordinate($.x-T,$.y-I))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a){return this.projection.locationPoint(this,a)}locationPoint3D(a){return this.projection.locationPoint(this,a,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a){return this.coordinateLocation(this.pointCoordinate3D(a))}locationCoordinate(a,p){const T=p?e.mercatorZfromAltitude(p,a.lat):void 0,I=this.projection.project(a.lng,a.lat);return new e.MercatorCoordinate(I.x,I.y,T)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,p){const T=p??this._centerAltitude,I=[a.x,a.y,0,1],z=[a.x,a.y,1,1];e.transformMat4$1(I,I,this.pixelMatrixInverse),e.transformMat4$1(z,z,this.pixelMatrixInverse);const $=z[3];e.scale$1(I,I,1/I[3]),e.scale$1(z,z,1/$);const Z=I[2],Q=z[2];return{p0:I,p1:z,t:Z===Q?0:(T-Z)/(Q-Z)}}screenPointToMercatorRay(a){const p=[a.x,a.y,0,1],T=[a.x,a.y,1,1];return e.transformMat4$1(p,p,this.pixelMatrixInverse),e.transformMat4$1(T,T,this.pixelMatrixInverse),e.scale$1(p,p,1/p[3]),e.scale$1(T,T,1/T[3]),p[2]=e.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,T[2]=e.mercatorZfromAltitude(T[2],this._center.lat)*this.worldSize,e.scale$1(p,p,1/this.worldSize),e.scale$1(T,T,1/this.worldSize),new e.Ray([p[0],p[1],p[2]],e.normalize([],e.sub([],T,p)))}rayIntersectionCoordinate(a){const{p0:p,p1:T,t:I}=a,z=e.mercatorZfromAltitude(p[2],this._center.lat),$=e.mercatorZfromAltitude(T[2],this._center.lat);return new e.MercatorCoordinate(e.number(p[0],T[0],I)/this.worldSize,e.number(p[1],T[1],I)/this.worldSize,e.number(z,$,I))}pointCoordinate(a,p=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,p)}pointCoordinate3D(a){if(!this.elevation)return this.pointCoordinate(a);let p=this.projection.pointCoordinate3D(this,a.x,a.y);if(p)return new e.MercatorCoordinate(p[0],p[1],p[2]);let T=0,I=this.horizonLineFromTop();if(a.y>I)return this.pointCoordinate(a);const z=.02*I,$=a.clone();for(let Z=0;Z<10&&I-T>z;Z++){$.y=e.number(T,I,.66);const Q=this.projection.pointCoordinate3D(this,$.x,$.y);Q?(I=$.y,p=Q):T=$.y}return p?new e.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(a);const p=this.pointCoordinate(a);return p.y>=0&&p.y<=1}_coordinatePoint(a,p){const T=p&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,I=[a.x*this.worldSize,a.y*this.worldSize,T+a.toAltitude(),1];return e.transformMat4$1(I,I,this.pixelMatrix),I[3]>0?new e.Point(I[0]/I[3],I[1]/I[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:p}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,I=this.width-this._edgeInsets.right,z=this.pointLocation3D(new e.Point(p,a)),$=this.pointLocation3D(new e.Point(I,a)),Z=this.pointLocation3D(new e.Point(I,T)),Q=this.pointLocation3D(new e.Point(p,T));let le=Math.min(z.lng,$.lng,Z.lng,Q.lng),oe=Math.max(z.lng,$.lng,Z.lng,Q.lng),ye=Math.min(z.lat,$.lat,Z.lat,Q.lat),Be=Math.max(z.lat,$.lat,Z.lat,Q.lat);const Ze=Math.pow(2,-this.zoom)/16*270,qe="globe"===this.projection.name?1:4,Je=(nt,we,We,gt,vt)=>{const zt=(nt+We)/2,Bt=(we+gt)/2,Ft=new e.Point(zt,Bt),{lng:$t,lat:Ut}=this.pointLocation3D(Ft),li=Math.max(0,le-$t,ye-Ut,$t-oe,Ut-Be);le=Math.min(le,$t),oe=Math.max(oe,$t),ye=Math.min(ye,Ut),Be=Math.max(Be,Ut),(vt<qe||li>Ze)&&(Je(nt,we,zt,Bt,vt+1),Je(zt,Bt,We,gt,vt+1))};if(Je(p,a,I,a,1),Je(I,a,I,T,1),Je(I,T,p,T,1),Je(p,T,p,a,1),"globe"===this.projection.name){const[nt,we]=e.polesInViewport(this);nt?(Be=90,oe=180,le=-180):we&&(ye=-90,oe=180,le=-180)}return new e.LngLatBounds(new e.LngLat(le,ye),new e.LngLat(oe,Be))}_getBoundsRectangular(a,p){const{top:T,left:I}=this._edgeInsets,z=this.height-this._edgeInsets.bottom,$=this.width-this._edgeInsets.right,Z=new e.Point(I,T),Q=new e.Point($,T),le=new e.Point($,z),oe=new e.Point(I,z);let ye=this.pointCoordinate(Z,a),Be=this.pointCoordinate(Q,a);const Ze=this.pointCoordinate(le,p),qe=this.pointCoordinate(oe,p),Je=(nt,we)=>(we.y-nt.y)/(we.x-nt.x);return ye.y>1&&Be.y>=0?ye=new e.MercatorCoordinate((1-qe.y)/Je(qe,ye)+qe.x,1):ye.y<0&&Be.y<=1&&(ye=new e.MercatorCoordinate(-qe.y/Je(qe,ye)+qe.x,0)),Be.y>1&&ye.y>=0?Be=new e.MercatorCoordinate((1-Ze.y)/Je(Ze,Be)+Ze.x,1):Be.y<0&&ye.y<=1&&(Be=new e.MercatorCoordinate(-Ze.y/Je(Ze,Be)+Ze.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(ye)).extend(this.coordinateLocation(Be)).extend(this.coordinateLocation(qe)).extend(this.coordinateLocation(Ze))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const p=a.visibleDemTiles.reduce((T,I)=>{if(I.dem){const z=I.dem.tree;T.min=Math.min(T.min,z.minimums[0]),T.max=Math.max(T.max,z.maximums[0])}return T},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(p.min*a.exaggeration(),p.max*a.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const p=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,T=this.height/2-p*(1-this._horizonShift);return a?Math.max(0,T):T}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,p){return this.projection.createTileMatrix(this,p,a)}calculateDistanceTileData(a){const p=a.key,T=this._distanceTileDataCache;if(T[p])return T[p];const I=a.canonical,z=1/this.height,$=this.cameraWorldSize,Z=$/this.zoomScale(I.z),Q=(I.x+Math.pow(2,I.z)*a.wrap)*Z,le=I.y*Z,oe=this.point;oe.x*=$/this.worldSize,oe.y*=$/this.worldSize;const ye=this.angle,Be=Math.sin(-ye),Ze=-Math.cos(-ye);return T[p]={bearing:[Be,Ze],center:[(oe.x-Q)*z,(oe.y-le)*z],scale:Z/e.EXTENT*z},T[p]}calculateFogTileMatrix(a){const p=a.key,T=this._fogTileMatrixCache;if(T[p])return T[p];const I=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return e.multiply(I,this.worldToFogMatrix,I),T[p]=new Float32Array(I),T[p]}calculateProjMatrix(a,p=!1){const T=a.key,I=p?this._alignedProjMatrixCache:this._projMatrixCache;if(I[T])return I[T];const z=this.calculatePosMatrix(a,this.worldSize);return e.multiply(z,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:p?this.alignedProjMatrix:this.projMatrix,z),I[T]=new Float32Array(z),I[T]}calculatePixelsToTileUnitsMatrix(a){const p=a.tileID.key,T=this._pixelsToTileUnitsCache;if(T[p])return T[p];const I=function(z,$){const{scale:Z}=z.tileTransform,Q=Z*e.EXTENT/(z.tileSize*Math.pow(2,$.zoom-z.tileID.overscaledZ+z.tileID.canonical.z));return le=new Float32Array(4),Be=(oe=$.inverseAdjustmentMatrix)[1],Ze=oe[2],qe=oe[3],nt=(ye=[Q,Q])[1],le[0]=oe[0]*(Je=ye[0]),le[1]=Be*Je,le[2]=Ze*nt,le[3]=qe*nt,le;var le,oe,ye,Be,Ze,qe,Je,nt}(a,this);return T[p]=I,T[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const a=1/this.worldSize,p=e.fromScaling([],[a,a,a]);return e.multiply(p,p,this.globeMatrix),p}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const a=this._elevation;this._updateCameraState();const p=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(p),I=this._camera.forward(),z=e.mercatorZfromAltitude(1,this._center.lat);T[2]/=z,I[2]/=z,e.normalize(I,I);const $=a.raycast(T,I,a.exaggeration());if($){const Z=e.scaleAndAdd([],T,I,$),Q=new e.MercatorCoordinate(Z[0],Z[1],e.mercatorZfromAltitude(Z[2],e.latFromMercatorY(Z[1]))),le=(Q.z+e.length([Q.x-T[0],Q.y-T[1],Q.z-T[2]*z]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(le),this._centerAltitude=Q.toAltitude(),this._center=this.coordinateLocation(Q),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const p=this._elevation,T=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,I=this._computeCameraPosition(T),z=p.getAtPointOrZero(new e.MercatorCoordinate(...I)),$=this.pixelsPerMeter/this.worldSize*z,Z=this._minimumHeightOverTerrain(),Q=I[2]-$;if(Q<=Z)if(Q<0||a){const le=this.locationCoordinate(this._center,this._centerAltitude),oe=[I[0],I[1],le.z-I[2]],ye=e.length(oe);oe[2]-=(Z-Q)/this._pixelsPerMercatorPixel;const Be=e.length(oe);if(0===Be)return;e.scale$2(oe,oe,ye/Be*this._pixelsPerMercatorPixel),this._camera.position=[I[0],I[1],le.z*this._pixelsPerMercatorPixel-oe[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const Be=this.center;return Be.lat=e.clamp(Be.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(Be.lng=e.clamp(Be.lng,this.minLng,this.maxLng)),this.center=Be,void(this._constraining=!1)}const p=this._unmodified,{x:T,y:I}=this.point;let z=0,$=T,Z=I;const Q=this.width/2,le=this.height/2,oe=this.worldMinY*this.scale,ye=this.worldMaxY*this.scale;if(I-le<oe&&(Z=oe+le),I+le>ye&&(Z=ye-le),ye-oe<this.height&&(z=Math.max(z,this.height/(ye-oe)),Z=(ye+oe)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Be=this.worldMinX*this.scale,Ze=this.worldMaxX*this.scale,qe=this.worldSize/2-(Be+Ze)/2;$=(T+qe+this.worldSize)%this.worldSize-qe,$-Q<Be&&($=Be+Q),$+Q>Ze&&($=Ze-Q),Ze-Be<this.width&&(z=Math.max(z,this.width/(Ze-Be)),$=(Ze+Be)/2)}$===T&&Z===I||(this.center=this.unproject(new e.Point($,Z))),z&&(this.zoom+=this.scaleZoom(z)),this._constrainCamera(),this._unmodified=p,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,p=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const T=Ba(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const I="meters"===this.projection.zAxisUnit?p:1,z=this._camera.getWorldToCamera(this.worldSize,I),$=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);$[8]=2*-a.x/this.width,$[9]=2*a.y/this.height;let Z=e.mul([],$,z);if(this.projection.isReprojectedInTileSpace){const Bt=this.locationCoordinate(this.center),Ft=e.identity([]);e.translate(Ft,Ft,[Bt.x*this.worldSize,Bt.y*this.worldSize,0]),e.multiply(Ft,Ft,Lo(this)),e.translate(Ft,Ft,[-Bt.x*this.worldSize,-Bt.y*this.worldSize,0]),e.multiply(Z,Z,Ft),this.inverseAdjustmentMatrix=function($t){const Ut=Lo($t,!0);return rt([],[Ut[0],Ut[1],Ut[4],Ut[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],Z,[this.worldSize,this.worldSize,this.worldSize/I,1]),this.projMatrix=Z,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const Q=e.invert([],$);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(Q,this.horizonLineFromTop(),this.height);const le=new Float32Array(16);e.identity(le),e.scale(le,le,[1,-1,1]),e.rotateX(le,le,this._pitch),e.rotateZ(le,le,this.angle);const oe=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ye=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;oe[8]=2*-a.x/this.width,oe[9]=2*(a.y+ye)/this.height,this.skyboxMatrix=e.multiply(le,oe,le);const Be=this.point,Ze=Be.x,qe=Be.y,Je=this.width%2/2,nt=this.height%2/2,we=Math.cos(this.angle),We=Math.sin(this.angle),gt=Ze-Math.round(Ze)+we*Je+We*nt,vt=qe-Math.round(qe)+we*nt+We*Je,zt=new Float64Array(Z);if(e.translate(zt,zt,[gt>.5?gt-1:gt,vt>.5?vt-1:vt,0]),this.alignedProjMatrix=zt,Z=e.create(),e.scale(Z,Z,[this.width/2,-this.height/2,1]),e.translate(Z,Z,[1,-1,0]),this.labelPlaneMatrix=Z,Z=e.create(),e.scale(Z,Z,[1,-1,1]),e.translate(Z,Z,[-1,-1,0]),e.scale(Z,Z,[2/this.width,2/this.height,1]),this.glCoordMatrix=Z,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},Z=e.invert(new Float64Array(16),this.pixelMatrix),!Z)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Z,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const Bt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(Bt,Bt,z),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Z;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,p=this.cameraPixelsPerMeter,T=this._camera.position,I=1/this.height/this._pixelsPerMercatorPixel,z=[a,a,p];e.scale$2(z,z,I),e.scale$2(T,T,-1),e.multiply$2(T,T,z);const $=e.create();e.translate($,$,T),e.scale($,$,z),this.mercatorFogMatrix=$,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,p,I)}_computeCameraPosition(a){const p=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,T=this._camera.forward(),I=this.point,z=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*p-a/this.worldSize*this._centerAltitude;return[I.x/this.worldSize-T[0]*z,I.y/this.worldSize-T[1]*z,a/this.worldSize*this._centerAltitude-T[2]*z]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const p=this._maxCameraBoundsDistance()*Math.cos(this._pitch),T=this._camera.position[2],I=a[2];let z=1;this.projection.wrap&&(this.center=this.center.wrap()),I>0&&(z=Math.min((p-T)/I,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,a,z),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,p=this._camera.forward(),{pitch:T,bearing:I}=this._camera.getPitchBearing(),z=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,$=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),Z=Math.max((a[2]-z)/Math.cos(T),$),Q=this._zoomFromMercatorZ(Z);e.scaleAndAdd(a,a,p,Z),this._pitch=e.clamp(T,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(I,-Math.PI,Math.PI),this._setZoom(e.clamp(Q,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let p=0,T=e.GLOBE_ZOOM_THRESHOLD_MAX,I=0,z=1/0;for(;T-p>1e-6&&T>p;){const $=p+.5*(T-p),Z=this.tileSize*Math.pow(2,$),Q=this.getCameraToCenterDistance(this.projection,$,Z),le=this.scaleZoom(Q/(a*this.tileSize)),oe=Math.abs($-le);oe<z&&(z=oe,I=$),$<le?p=$:T=$}return I}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,p){const T=Math.min(a.x,p.x),I=Math.max(a.x,p.x),z=Math.min(a.y,p.y),$=Math.max(a.y,p.y);if(z<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const Z=[new e.Point(T,z),new e.Point(I,$),new e.Point(T,$),new e.Point(I,z)],Q=this.renderWorldCopies?-3:0,le=this.renderWorldCopies?4:1;for(const oe of Z){const ye=this.pointRayIntersection(oe);if(ye.t<0)return!0;const Be=this.rayIntersectionCoordinate(ye);if(Be.x<Q||Be.y<0||Be.x>le||Be.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(a,p){const T=e.length(e.sub([],this._camera.position,a)),I=this._zoomFromMercatorZ(T)+p;return T-this._mercatorZfromZoom(I)}getCameraPoint(){if("globe"===this.projection.name){const a=function([p,T,I],z){const $=[p,T,I,1];e.transformMat4$1($,$,z);const Z=$[3]=Math.max($[3],1e-6);return $[0]/=Z,$[1]/=Z,$[2]/=Z,$}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,a))}}getCameraToCenterDistance(a,p=this.zoom,T=this.worldSize){const I=Ba(a,p,this.width,this.height,1024),z=a.pixelSpaceConversion(this.center.lat,T,I);return.5/Math.tan(.5*this._fov)*this.height*z}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(a,a,this.globeMatrix),a}}function ts(b,a){let p=!1,T=null;const I=()=>{T=null,p&&(b(),T=setTimeout(I,a),p=!1)};return()=>(p=!0,T||I(),T)}class wl{constructor(a){this._hashName=a&&encodeURIComponent(a),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ts(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,e.window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const p=bo(a);if(this._hashName){const T=this._hashName;let I=!1;const z=e.window.location.hash.slice(1).split("&").map($=>{const Z=$.split("=")[0];return Z===T?(I=!0,`${Z}=${p}`):$}).filter($=>$);return I||z.push(`${T}=${p}`),`#${z.join("&")}`}return`#${p}`}_getCurrentHash(){const a=e.window.location.hash.replace("#","");if(this._hashName){let p;return a.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(p=T)}),(p&&p[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const p=this._getCurrentHash();if(p.length>=3&&!p.some(T=>isNaN(T))){const T=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(p[3]||0):a.getBearing();return a.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:T,pitch:+(p[4]||0)}),!0}return!1}_updateHashUnthrottled(){const a=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,a)}}function bo(b,a){const p=b.getCenter(),T=Math.round(100*b.getZoom())/100,I=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),z=Math.pow(10,I),$=Math.round(p.lng*z)/z,Z=Math.round(p.lat*z)/z,Q=b.getBearing(),le=b.getPitch();let oe=a?`/${$}/${Z}/${T}`:`${T}/${Z}/${$}`;return(Q||le)&&(oe+="/"+Math.round(10*Q)/10),le&&(oe+=`/${Math.round(le)}`),oe}const wo={linearity:.3,easing:e.bezier(0,0,.3,1)},Xs=e.extend({deceleration:2500,maxSpeed:1400},wo),jr=e.extend({deceleration:20,maxSpeed:1400},wo),en=e.extend({deceleration:1e3,maxSpeed:360},wo),h=e.extend({deceleration:1e3,maxSpeed:90},wo);class S{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,p=e.exported.now();for(;a.length>0&&p-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const p={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:z}of this._inertiaBuffer)p.zoom+=z.zoomDelta||0,p.bearing+=z.bearingDelta||0,p.pitch+=z.pitchDelta||0,z.panDelta&&p.pan._add(z.panDelta),z.around&&(p.around=z.around),z.pinchAround&&(p.pinchAround=z.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,I={};if(p.pan.mag()){const z=te(p.pan.mag(),T,e.extend({},Xs,a||{}));I.offset=p.pan.mult(z.amount/p.pan.mag()),I.center=this._map.transform.center,V(I,z)}if(p.zoom){const z=te(p.zoom,T,jr);I.zoom=this._map.transform.zoom+z.amount,V(I,z)}if(p.bearing){const z=te(p.bearing,T,en);I.bearing=this._map.transform.bearing+e.clamp(z.amount,-179,179),V(I,z)}if(p.pitch){const z=te(p.pitch,T,h);I.pitch=this._map.transform.pitch+z.amount,V(I,z)}if(I.zoom||I.bearing){const z=void 0===p.pinchAround?p.around:p.pinchAround;I.around=z?this._map.unproject(z):this._map.getCenter()}return this.clear(),I.noMoveStart=!0,I}}function V(b,a){(!b.duration||b.duration<a.duration)&&(b.duration=a.duration,b.easing=a.easing)}function te(b,a,p){const{maxSpeed:T,linearity:I,deceleration:z}=p,$=e.clamp(b*I/(a/1e3),-T,T),Z=Math.abs($)/(z*I);return{easing:p.easing,duration:1e3*Z,amount:$*(Z/2)}}class fe extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,p,T,I={}){const z=Qt(p.getCanvasContainer(),T),$=p.unproject(z);super(a,e.extend({point:z,lngLat:$,originalEvent:T},I)),this._defaultPrevented=!1,this.target=p}}class Ne extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,p,T){const I="touchend"===a?T.changedTouches:T.touches,z=Ve(p.getCanvasContainer(),I),$=z.map(Q=>p.unproject(Q)),Z=z.reduce((Q,le,oe,ye)=>Q.add(le.div(ye.length)),new e.Point(0,0));super(a,{points:z,point:Z,lngLats:$,lngLat:p.unproject(Z),originalEvent:T}),this._defaultPrevented=!1}}class Pt extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,p,T){super(a,{originalEvent:T}),this._defaultPrevented=!1}}class Jt{constructor(a,p){this._map=a,this._clickTolerance=p.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new Pt(a.type,this._map,a))}mousedown(a,p){return this._mousedownPos=p,this._firePreventable(new fe(a.type,this._map,a))}mouseup(a){this._map.fire(new fe(a.type,this._map,a))}preclick(a){const p=e.extend({},a);p.type="preclick",this._map.fire(new fe(p.type,this._map,p))}click(a,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||(this.preclick(a),this._map.fire(new fe(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new fe(a.type,this._map,a))}mouseover(a){this._map.fire(new fe(a.type,this._map,a))}mouseout(a){this._map.fire(new fe(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Ne(a.type,this._map,a))}touchmove(a){this._map.fire(new Ne(a.type,this._map,a))}touchend(a){this._map.fire(new Ne(a.type,this._map,a))}touchcancel(a){this._map.fire(new Ne(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _i{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new fe(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fe("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new fe(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zi{constructor(a,p){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,p){this.isEnabled()&&a.shiftKey&&0===a.button&&(St(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(a,p){if(!this._active)return;const T=p,I=this._startPos,z=this._lastPos;if(!I||!z||z.equals(T)||!this._box&&T.dist(I)<this._clickTolerance)return;this._lastPos=T,this._box||(this._box=Oe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const $=Math.min(I.x,T.x),Z=Math.max(I.x,T.x),Q=Math.min(I.y,T.y),le=Math.max(I.y,T.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${$}px,${Q}px)`,this._box.style.width=Z-$+"px",this._box.style.height=le-Q+"px")})}mouseupWindow(a,p){if(!this._active)return;const T=this._startPos,I=p;if(T&&0===a.button){if(this.reset(),yt(),T.x!==I.x||T.y!==I.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:a})),{cameraAnimation:z=>z.fitScreenCoordinates(T,I,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&27===a.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),it(),delete this._startPos,delete this._lastPos}_fireEvent(a,p){return this._map.fire(new e.Event(a,{originalEvent:p}))}}function kn(b,a){const p={};for(let T=0;T<b.length;T++)p[b[T].identifier]=a[T];return p}class Ln{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,p,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=a.timeStamp),T.length===this.numTouches&&(this.centroid=function(I){const z=new e.Point(0,0);for(const $ of I)z._add($);return z.div(I.length)}(p),this.touches=kn(T,p)))}touchmove(a,p,T){if(this.aborted||!this.centroid)return;const I=kn(T,p);for(const z in this.touches){const $=I[z];(!$||$.dist(this.touches[z])>30)&&(this.aborted=!0)}}touchend(a,p,T){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),0===T.length){const I=!this.aborted&&this.centroid;if(this.reset(),I)return I}}}class cr{constructor(a){this.singleTap=new Ln(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,p,T){this.singleTap.touchstart(a,p,T)}touchmove(a,p,T){this.singleTap.touchmove(a,p,T)}touchend(a,p,T){const I=this.singleTap.touchend(a,p,T);if(I){const z=a.timeStamp-this.lastTime<500,$=!this.lastTap||this.lastTap.dist(I)<30;if(z&&$||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}}}class Ir{constructor(){this._zoomIn=new cr({numTouches:1,numTaps:2}),this._zoomOut=new cr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,p,T){this._zoomIn.touchstart(a,p,T),this._zoomOut.touchstart(a,p,T)}touchmove(a,p,T){this._zoomIn.touchmove(a,p,T),this._zoomOut.touchmove(a,p,T)}touchend(a,p,T){const I=this._zoomIn.touchend(a,p,T),z=this._zoomOut.touchend(a,p,T);return I?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:$.getZoom()+1,around:$.unproject(I)},{originalEvent:a})}):z?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:$.getZoom()-1,around:$.unproject(z)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ms={0:1,2:2};class Zs{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,p){return!1}_move(a,p){return{}}mousedown(a,p){if(this._lastPoint)return;const T=Zt(a);this._correctButton(a,T)&&(this._lastPoint=p,this._eventButton=T)}mousemoveWindow(a,p){const T=this._lastPoint;if(T)if(a.preventDefault(),null!=this._eventButton&&function(I,z){const $=Ms[z];return void 0===I.buttons||(I.buttons&$)!==$}(a,this._eventButton))this.reset();else if(this._moved||!(p.dist(T)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(T,p)}mouseupWindow(a){this._lastPoint&&Zt(a)===this._eventButton&&(this._moved&&yt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bs extends Zs{mousedown(a,p){super.mousedown(a,p),this._lastPoint&&(this._active=!0)}_correctButton(a,p){return 0===p&&!a.ctrlKey}_move(a,p){return{around:p,panDelta:p.sub(a)}}}class ua extends Zs{_correctButton(a,p){return 0===p&&a.ctrlKey||2===p}_move(a,p){const T=.8*(p.x-a.x);if(T)return this._active=!0,{bearingDelta:T}}contextmenu(a){a.preventDefault()}}class ha extends Zs{_correctButton(a,p){return 0===p&&a.ctrlKey||2===p}_move(a,p){const T=-.5*(p.y-a.y);if(T)return this._active=!0,{pitchDelta:T}}contextmenu(a){a.preventDefault()}}class qs{constructor(a,p){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(a,p,T){return this._calculateTransform(a,p,T)}touchmove(a,p,T){if(this._active&&!(T.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===T.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,p,T)}}touchend(a,p,T){this._calculateTransform(a,p,T),this._active&&T.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,p,T){T.length>0&&(this._active=!0);const I=kn(T,p),z=new e.Point(0,0),$=new e.Point(0,0);let Z=0;for(const le in I){const oe=I[le],ye=this._touches[le];ye&&(z._add(oe),$._add(oe.sub(ye)),Z++,I[le]=oe)}if(this._touches=I,Z<this._minTouches||!$.mag())return;const Q=$.div(Z);return this._sum._add(Q),this._sum.mag()<this._clickTolerance?void 0:{around:z.div(Z),panDelta:Q}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Oe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class yc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,p,T){return{}}touchstart(a,p,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([p[0],p[1]]))}touchmove(a,p,T){const I=this._firstTwoTouches;if(!I)return;a.preventDefault();const[z,$]=I,Z=Cl(T,p,z),Q=Cl(T,p,$);if(!Z||!Q)return;const le=this._aroundCenter?null:Z.add(Q).div(2);return this._move([Z,Q],le,a)}touchend(a,p,T){if(!this._firstTwoTouches)return;const[I,z]=this._firstTwoTouches,$=Cl(T,p,I),Z=Cl(T,p,z);$&&Z||(this._active&&yt(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Cl(b,a,p){for(let T=0;T<b.length;T++)if(b[T].identifier===p)return a[T]}function Uo(b,a){return Math.log(b/a)/Math.LN2}class ec extends yc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,p){const T=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Uo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Uo(this._distance,T),pinchAround:p}}}function xe(b,a){return 180*b.angleWith(a)/Math.PI}class q extends yc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,p){const T=this._vector;if(this._vector=a[0].sub(a[1]),T&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:xe(this._vector,T),pinchAround:p}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const p=25/(Math.PI*this._minDiameter)*360,T=this._startVector;if(!T)return!1;const I=xe(a,T);return Math.abs(I)<p}}function re(b){return Math.abs(b.y)>Math.abs(b.x)}class Ce extends yc{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,re(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,p,T){const I=this._lastPoints;if(!I)return;const z=a[0].sub(I[0]),$=a[1].sub(I[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&T.touches.length<3||(this._valid=this.gestureBeginsVertically(z,$,T.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(z.y+$.y)/2*-.5})}gestureBeginsVertically(a,p,T){if(void 0!==this._valid)return this._valid;const I=a.mag()>=2,z=p.mag()>=2;if(!I&&!z)return;if(!I||!z)return null==this._firstMove&&(this._firstMove=T),T-this._firstMove<100&&void 0;const $=a.y>0==p.y>0;return re(a)&&re(p)&&$}}const Dt={panStep:100,bearingStep:15,pitchStep:10};class Ei{constructor(){const a=Dt;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let p=0,T=0,I=0,z=0,$=0;switch(a.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:a.shiftKey?T=-1:(a.preventDefault(),z=-1);break;case 39:a.shiftKey?T=1:(a.preventDefault(),z=1);break;case 38:a.shiftKey?I=1:(a.preventDefault(),$=-1);break;case 40:a.shiftKey?I=-1:(a.preventDefault(),$=1);break;default:return}return this._rotationDisabled&&(T=0,I=0),{cameraAnimation:Z=>{const Q=Z.getZoom();Z.easeTo({duration:300,easeId:"keyboardHandler",easing:bn,zoom:p?Math.round(Q)+p*(a.shiftKey?2:1):Q,bearing:Z.getBearing()+T*this._bearingStep,pitch:Z.getPitch()+I*this._pitchStep,offset:[-z*this._panStep,-$*this._panStep],center:Z.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function bn(b){return b*(2-b)}const mr=4.000244140625;class Er{constructor(a,p){this._map=a,this._el=a.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let p=a.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const T=e.exported.now(),I=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,0!==p&&p%mr==0?this._type="wheel":0!==p&&Math.abs(p)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(I*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),a.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=a,this._delta-=p,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=Qt(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:p,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;"wheel"===this._type&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const p=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(0!==this._delta){const Q="wheel"===this._type&&Math.abs(this._delta)>mr?this._wheelZoomRate:this._defaultZoomRate;let le=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&0!==le&&(le=1/le);const oe=p(),ye=Math.pow(2,oe),Be="number"==typeof this._targetZoom?a.zoomScale(this._targetZoom):ye;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(Be*le))),"wheel"===this._type&&(this._startZoom=oe,this._easing=this._smoothOutEasing(200)),this._delta=0}const T="number"==typeof this._targetZoom?this._targetZoom:p(),I=this._startZoom,z=this._easing;let $,Z=!1;if("wheel"===this._type&&I&&z){const Q=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),le=z(Q);$=e.number(I,T,le),Q<1?this._frameId||(this._frameId=!0):Z=!0}else $=T,Z=!0;return this._active=!0,Z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Z,zoomDelta:$-p(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let p=e.ease;if(this._prevEase){const T=this._prevEase,I=(e.exported.now()-T.start)/T.duration,z=T.easing(I+.01)-T.easing(I),$=.27/Math.sqrt(z*z+1e-4)*.01,Z=Math.sqrt(.0729-$*$);p=e.bezier($,Z,.25,1)}return this._prevEase={start:e.exported.now(),duration:a,easing:p},p}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Oe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class ws{constructor(a,p){this._clickZoom=a,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ys{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,p){return a.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:T.getZoom()+(a.shiftKey?-1:1),around:T.unproject(p)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qu{constructor(){this._tap=new cr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,p,T){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?T.length>0&&(this._swipePoint=p[0],this._swipeTouch=T[0].identifier):this._tap.touchstart(a,p,T))}touchmove(a,p,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const I=p[0],z=I.y-this._swipePoint.y;return this._swipePoint=I,a.preventDefault(),this._active=!0,{zoomDelta:z/128}}}else this._tap.touchmove(a,p,T)}touchend(a,p,T){this._tapTime?this._swipePoint&&0===T.length&&this.reset():this._tap.touchend(a,p,T)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ih{constructor(a,p,T){this._el=a,this._mousePan=p,this._touchPan=T}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class up{constructor(a,p,T){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=p,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ku{constructor(a,p,T,I){this._el=a,this._touchZoom=p,this._touchRotate=T,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Co=b=>b.zoom||b.drag||b.pitch||b.rotate;class lu extends e.Event{}class Po{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,p){const T=e.sub([],p,a);this.radius=e.length(T[2]<0?e.div([],T,this.constants):[T[0],T[1],0])}projectRay(a){e.div(a,a,this.constants),e.normalize(a,a),e.mul$1(a,a,this.constants);const p=e.scale$2([],a,this.radius);if(p[2]>0){const T=e.scale$2([],[0,0,1],e.dot(p,[0,0,1])),I=e.scale$2([],e.normalize([],[p[0],p[1],0]),this.radius),z=e.add([],p,e.scale$2([],e.sub([],e.add([],I,T),p),2));p[0]=z[0],p[1]=z[1]}return p}}function Tl(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class $o{constructor(a,p){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new S(a),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Po,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(p),e.bindAll(["handleEvent","handleWindowEvent"],this);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[I,z,$]of this._listeners)I.addEventListener(z,I===e.window.document?this.handleWindowEvent:this.handleEvent,$)}destroy(){for(const[a,p,T]of this._listeners)a.removeEventListener(p,a===e.window.document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(a){const p=this._map,T=p.getCanvasContainer();this._add("mapEvent",new Jt(p,a));const I=p.boxZoom=new Zi(p,a);this._add("boxZoom",I);const z=new Ir,$=new Ys;p.doubleClickZoom=new ws($,z),this._add("tapZoom",z),this._add("clickZoom",$);const Z=new qu;this._add("tapDragZoom",Z);const Q=p.touchPitch=new Ce(p);this._add("touchPitch",Q);const le=new ua(a),oe=new ha(a);p.dragRotate=new up(a,le,oe),this._add("mouseRotate",le,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate"]);const ye=new bs(a),Be=new qs(p,a);p.dragPan=new Ih(T,ye,Be),this._add("mousePan",ye),this._add("touchPan",Be,["touchZoom","touchRotate"]);const Ze=new q,qe=new ec;p.touchZoomRotate=new Ku(T,qe,Ze,Z),this._add("touchRotate",Ze,["touchPan","touchZoom"]),this._add("touchZoom",qe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new _i(p));const Je=p.scrollZoom=new Er(p,this);this._add("scrollZoom",Je,["mousePan"]);const nt=p.keyboard=new Ei;this._add("keyboard",nt);for(const we of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[we]&&p[we].enable(a[we])}_add(a,p,T){this._handlers.push({handlerName:a,handler:p,allowed:T}),this._handlersById[a]=p}stop(a){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Co(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,p,T){for(const I in a)if(I!==T&&(!p||p.indexOf(I)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const p=[];for(const T of a)this._el.contains(T.target)&&p.push(T);return p}handleEvent(a,p){this._updatingCamera=!0;const T="renderFrame"===a.type,I=T?void 0:a,z={needsRenderFrame:!1},$={},Z={},Q=a.touches?this._getMapTouches(a.touches):void 0,le=Q?Ve(this._el,Q):T?void 0:Qt(this._el,a);for(const{handlerName:Be,handler:Ze,allowed:qe}of this._handlers){if(!Ze.isEnabled())continue;let Je;this._blockedByActive(Z,qe,Be)?Ze.reset():Ze[p||a.type]&&(Je=Ze[p||a.type](a,le,Q),this.mergeHandlerResult(z,$,Je,Be,I),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||Ze.isActive())&&(Z[Be]=Ze)}const oe={};for(const Be in this._previousActiveHandlers)Z[Be]||(oe[Be]=I);this._previousActiveHandlers=Z,(Object.keys(oe).length||Tl(z))&&(this._changes.push([z,$,oe]),this._triggerRenderFrame()),(Object.keys(Z).length||Tl(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=z;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))}mergeHandlerResult(a,p,T,I,z){if(!T)return;e.extend(a,T);const $={handlerName:I,originalEvent:T.originalEvent||z};void 0!==T.zoomDelta&&(p.zoom=$),void 0!==T.panDelta&&(p.drag=$),void 0!==T.pitchDelta&&(p.pitch=$),void 0!==T.bearingDelta&&(p.rotate=$)}_applyChanges(){const a={},p={},T={};for(const[I,z,$]of this._changes)I.panDelta&&(a.panDelta=(a.panDelta||new e.Point(0,0))._add(I.panDelta)),I.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+I.zoomDelta),I.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+I.bearingDelta),I.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+I.pitchDelta),void 0!==I.around&&(a.around=I.around),void 0!==I.aroundCoord&&(a.aroundCoord=I.aroundCoord),void 0!==I.pinchAround&&(a.pinchAround=I.pinchAround),I.noInertia&&(a.noInertia=I.noInertia),e.extend(p,z),e.extend(T,$);this._updateMapTransform(a,p,T),this._changes=[]}_updateMapTransform(a,p,T){const I=this._map,z=I.transform,$=We=>[We.x,We.y,We.z];if((We=>{const gt=this._eventsInProgress.drag;return gt&&!this._handlersById[gt.handlerName].isActive()})()&&!Tl(a)){const We=z.zoom;z.cameraElevationReference="sea",z.recenterOnTerrain(),z.cameraElevationReference="ground",We!==z.zoom&&this._map._update(!0)}if(z._isCameraConstrained&&I._stop(!0),!Tl(a))return void this._fireEvents(p,T,!0);let{panDelta:Z,zoomDelta:Q,bearingDelta:le,pitchDelta:oe,around:ye,aroundCoord:Be,pinchAround:Ze}=a;z._isCameraConstrained&&(Q>0&&(Q=0),z._isCameraConstrained=!1),void 0!==Ze&&(ye=Ze),(Q||(We=>p.drag&&!this._eventsInProgress.drag)())&&ye&&(this._dragOrigin=$(z.pointCoordinate3D(ye)),this._trackingEllipsoid.setup(z._camera.position,this._dragOrigin)),z.cameraElevationReference="sea",I._stop(!0),ye=ye||I.transform.centerPoint,le&&(z.bearing+=le),oe&&(z.pitch+=oe),z._updateCameraState();const qe=[0,0,0];if(Z)if("mercator"===z.projection.name){const We=this._trackingEllipsoid.projectRay(z.screenPointToMercatorRay(ye).dir),gt=this._trackingEllipsoid.projectRay(z.screenPointToMercatorRay(ye.sub(Z)).dir);qe[0]=gt[0]-We[0],qe[1]=gt[1]-We[1]}else{const We=z.pointCoordinate(ye);if("globe"===z.projection.name){Z=Z.rotate(-z.angle);const gt=z._pixelsPerMercatorPixel/z.worldSize;qe[0]=-Z.x*e.mercatorScale(e.latFromMercatorY(We.y))*gt,qe[1]=-Z.y*e.mercatorScale(z.center.lat)*gt}else{const gt=z.pointCoordinate(ye.sub(Z));We&&gt&&(qe[0]=gt.x-We.x,qe[1]=gt.y-We.y)}}const Je=z.zoom,nt=[0,0,0];if(Q){const We=$(Be||z.pointCoordinate3D(ye)),gt={dir:e.normalize([],e.sub([],We,z._camera.position))};if(gt.dir[2]<0){const vt=z.zoomDeltaToMovement(We,Q);e.scale$2(nt,gt.dir,vt)}}const we=e.add(qe,qe,nt);z._translateCameraConstrained(we),Q&&Math.abs(z.zoom-Je)>1e-4&&z.recenterOnTerrain(),z.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(p,T,!0)}_fireEvents(a,p,T){const I=Co(this._eventsInProgress),z=Co(a),$={};for(const oe in a){const{originalEvent:ye}=a[oe];this._eventsInProgress[oe]||($[`${oe}start`]=ye),this._eventsInProgress[oe]=a[oe]}!I&&z&&this._fireEvent("movestart",z.originalEvent);for(const oe in $)this._fireEvent(oe,$[oe]);z&&this._fireEvent("move",z.originalEvent);for(const oe in a){const{originalEvent:ye}=a[oe];this._fireEvent(oe,ye)}const Z={};let Q;for(const oe in this._eventsInProgress){const{handlerName:ye,originalEvent:Be}=this._eventsInProgress[oe];this._handlersById[ye].isActive()||(delete this._eventsInProgress[oe],Q=p[ye]||Be,Z[`${oe}end`]=Q)}for(const oe in Z)this._fireEvent(oe,Z[oe]);const le=Co(this._eventsInProgress);if(T&&(I||z)&&!le){this._updatingCamera=!0;const oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=Be=>0!==Be&&-this._bearingSnap<Be&&Be<this._bearingSnap;oe?(ye(oe.bearing||this._map.getBearing())&&(oe.bearing=0),this._map.easeTo(oe,{originalEvent:Q})):(this._map.fire(new e.Event("moveend",{originalEvent:Q})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,p){this._map.fire(new e.Event(a,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new lu("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const is="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Wo extends e.Evented{constructor(a,p){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=p.bearingSnap,this._respectPrefersReducedMotion=!1!==p.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(a,p){return this.jumpTo({center:a},p)}panBy(a,p,T){return a=e.Point.convert(a).mult(-1),this.panTo(this.transform.center,e.extend({offset:a},p),T)}panTo(a,p,T){return this.easeTo(e.extend({center:a},p),T)}getZoom(){return this.transform.zoom}setZoom(a,p){return this.jumpTo({zoom:a},p),this}zoomTo(a,p,T){return this.easeTo(e.extend({zoom:a},p),T)}zoomIn(a,p){return this.zoomTo(this.getZoom()+1,a,p),this}zoomOut(a,p){return this.zoomTo(this.getZoom()-1,a,p),this}getBearing(){return this.transform.bearing}setBearing(a,p){return this.jumpTo({bearing:a},p),this}getPadding(){return this.transform.padding}setPadding(a,p){return this.jumpTo({padding:a},p),this}rotateTo(a,p,T){return this.easeTo(e.extend({bearing:a},p),T)}resetNorth(a,p){return this.rotateTo(0,e.extend({duration:1e3},a),p),this}resetNorthPitch(a,p){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},a),p),this}snapToNorth(a,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,p):this}getPitch(){return this.transform.pitch}setPitch(a,p){return this.jumpTo({pitch:a},p),this}cameraForBounds(a,p){a=e.LngLatBounds.convert(a);const T=p&&p.bearing||0,I=p&&p.pitch||0,z=a.getNorthWest(),$=a.getSouthEast();return this._cameraForBounds(this.transform,z,$,T,I,p)}_extendCameraOptions(a){const p={top:0,bottom:0,right:0,left:0};if("number"==typeof(a=e.extend({padding:p,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding){const T=a.padding;a.padding={top:T,bottom:T,right:T,left:T}}return a.padding=e.extend(p,a.padding),a}_minimumAABBFrustumDistance(a,p){const T=p.max[0]-p.min[0],I=p.max[1]-p.min[1];return T/I>a.aspect?T/(2*Math.tan(.5*a.fovX)*a.aspect):I/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,p,T,I,z,$){const Z=a.clone(),Q=this._extendCameraOptions($);Z.bearing=I,Z.pitch=z;const le=e.LngLat.convert(p),oe=e.LngLat.convert(T),ye=.5*(le.lat+oe.lat),Be=.5*(le.lng+oe.lng),Ze=e.latLngToECEF(ye,Be),qe=e.normalize([],Ze),Je=e.normalize([],e.cross([],qe,[0,1,0])),nt=e.cross([],Je,qe),we=[Je[0],Je[1],Je[2],0,nt[0],nt[1],nt[2],0,qe[0],qe[1],qe[2],0,0,0,0,1],We=[Ze,e.latLngToECEF(le.lat,le.lng),e.latLngToECEF(oe.lat,le.lng),e.latLngToECEF(oe.lat,oe.lng),e.latLngToECEF(le.lat,oe.lng),e.latLngToECEF(ye,le.lng),e.latLngToECEF(ye,oe.lng),e.latLngToECEF(le.lat,Be),e.latLngToECEF(oe.lat,Be)];let gt=e.Aabb.fromPoints(We.map(zi=>[e.dot(Je,zi),e.dot(nt,zi),e.dot(qe,zi)]));const vt=e.transformMat4([],gt.center,we);0===e.squaredLength(vt)&&e.set(vt,0,0,1),e.normalize(vt,vt),e.scale$2(vt,vt,e.GLOBE_RADIUS),Z.center=e.ecefToLatLng(vt);const zt=Z.getWorldToCameraMatrix(),Bt=e.invert(new Float64Array(16),zt);gt=e.Aabb.applyTransform(gt,e.multiply([],zt,we)),e.transformMat4(vt,vt,zt);const Ft=.5*(gt.max[2]-gt.min[2]),$t=this._minimumAABBFrustumDistance(Z,gt),Ut=e.scale$2([],[0,0,1],Ft),li=e.add(Ut,vt,Ut),Gi=$t+(0===Z.pitch?0:e.distance(vt,li)),ti=Z.globeCenterInViewSpace,ki=e.sub([],vt,[ti[0],ti[1],ti[2]]);e.normalize(ki,ki),e.scale$2(ki,ki,Gi);const ci=e.add([],vt,ki);e.transformMat4(ci,ci,Bt);const ji=e.earthRadius/e.GLOBE_RADIUS,oi=e.length(ci),wi=e.mercatorZfromAltitude(Math.max(oi*ji-e.earthRadius,Number.EPSILON),0),Wi=Math.min(Z.zoomFromMercatorZAdjusted(wi),Q.maxZoom);return Wi>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(Z.setProjection({name:"mercator"}),Z.zoom=Wi,this._cameraForBounds(Z,p,T,I,z,$)):{center:Z.center,zoom:Wi,bearing:I,pitch:z}}queryTerrainElevation(a,p){const T=this.transform.elevation;return T?(p=e.extend({},{exaggerated:!0},p),T.getAtPoint(e.MercatorCoordinate.fromLngLat(a),null,p.exaggerated)):null}_cameraForBounds(a,p,T,I,z,$){if("globe"===a.projection.name)return this._cameraForBoundsOnGlobe(a,p,T,I,z,$);const Z=a.clone(),Q=this._extendCameraOptions($),le=Z.padding;Z.bearing=I,Z.pitch=z;const oe=e.LngLat.convert(p),ye=e.LngLat.convert(T),Be=new e.LngLat(oe.lng,ye.lat),Ze=new e.LngLat(ye.lng,oe.lat),qe=Z.project(oe),Je=Z.project(ye),nt=this.queryTerrainElevation(oe),we=this.queryTerrainElevation(ye),We=this.queryTerrainElevation(Be),gt=this.queryTerrainElevation(Ze),vt=[[qe.x,qe.y,Math.min(nt||0,we||0,We||0,gt||0)],[Je.x,Je.y,Math.max(nt||0,we||0,We||0,gt||0)]];let zt=e.Aabb.fromPoints(vt);const Bt=Z.getWorldToCameraMatrix(),Ft=e.invert(new Float64Array(16),Bt);zt=e.Aabb.applyTransform(zt,Bt);const $t=e.sub([],zt.max,zt.min),Ut=le.left||0,li=le.right||0,Gi=le.bottom||0,ti=le.top||0,{left:ki,right:ci,top:ji,bottom:oi}=Q.padding,wi=.5*(Ut+li),Wi=.5*(ti+Gi),zi=Math.min(Z.scaleZoom(Z.scale*Math.min((Z.width-(Ut+li+ki+ci))/$t[0],(Z.height-(Gi+ti+oi+ji))/$t[1])),Q.maxZoom),Hi=Z.scale/Z.zoomScale(zi);zt=new e.Aabb([zt.min[0]-(ki+wi)*Hi,zt.min[1]-(oi+Wi)*Hi,zt.min[2]],[zt.max[0]+(ci+wi)*Hi,zt.max[1]+(ji+Wi)*Hi,zt.max[2]]);const Pn=.5*$t[2],nr=this._minimumAABBFrustumDistance(Z,zt),wn=[0,0,1,0];e.transformMat4$1(wn,wn,Bt),e.normalize$2(wn,wn);const jn=e.scale$2([],wn,nr+Pn),ar=e.add([],zt.center,jn),Zn=("number"==typeof Q.offset.x&&"number"==typeof Q.offset.y?new e.Point(Q.offset.x,Q.offset.y):e.Point.convert(Q.offset)).rotate(-e.degToRad(I));zt.center[0]-=Zn.x*Hi,zt.center[1]+=Zn.y*Hi,e.transformMat4(zt.center,zt.center,Ft),e.transformMat4(ar,ar,Ft);const On=[zt.center[0],zt.center[1],ar[2]*Z.pixelsPerMeter];e.scale$2(On,On,1/Z.worldSize);const br=e.lngFromMercatorX(On[0]),ss=e.latFromMercatorY(On[1]),as=Math.min(Z._zoomFromMercatorZ(On[2]),Q.maxZoom),ls=new e.LngLat(br,ss);return Z.mercatorFromTransition&&as<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(Z.setProjection({name:"globe"}),Z.zoom=as,this._cameraForBounds(Z,p,T,I,z,$)):{center:ls,zoom:as,bearing:I,pitch:z}}fitBounds(a,p,T){const I=this.cameraForBounds(a,p);return this._fitInternal(I,p,T)}fitScreenCoordinates(a,p,T,I,z){const $=e.Point.convert(a),Z=e.Point.convert(p),Q=new e.Point(Math.min($.x,Z.x),Math.min($.y,Z.y)),le=new e.Point(Math.max($.x,Z.x),Math.max($.y,Z.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge($,Z))return this;const oe=this.transform.pointLocation3D(Q),ye=this.transform.pointLocation3D(le),Be=this.transform.pointLocation3D(new e.Point(Q.x,le.y)),Ze=this.transform.pointLocation3D(new e.Point(le.x,Q.y)),qe=[Math.min(oe.lng,ye.lng,Be.lng,Ze.lng),Math.min(oe.lat,ye.lat,Be.lat,Ze.lat)],Je=[Math.max(oe.lng,ye.lng,Be.lng,Ze.lng),Math.max(oe.lat,ye.lat,Be.lat,Ze.lat)],nt=I&&I.pitch?I.pitch:this.getPitch(),we=this._cameraForBounds(this.transform,qe,Je,T,nt,I);return this._fitInternal(we,I,z)}_fitInternal(a,p,T){return a?(delete(p=e.extend(a,p)).padding,p.linear?this.easeTo(p,T):this.flyTo(p,T)):this}jumpTo(a,p){this.stop();const T=a.preloadOnly?this.transform.clone():this.transform;let I=!1,z=!1,$=!1;return"zoom"in a&&T.zoom!==+a.zoom&&(I=!0,T.zoom=+a.zoom),void 0!==a.center&&(T.center=e.LngLat.convert(a.center)),"bearing"in a&&T.bearing!==+a.bearing&&(z=!0,T.bearing=+a.bearing),"pitch"in a&&T.pitch!==+a.pitch&&($=!0,T.pitch=+a.pitch),null==a.padding||T.isPaddingEqual(a.padding)||(T.padding=a.padding),a.preloadOnly?(this._preloadTiles(T),this):(this.fire(new e.Event("movestart",p)).fire(new e.Event("move",p)),I&&this.fire(new e.Event("zoomstart",p)).fire(new e.Event("zoom",p)).fire(new e.Event("zoomend",p)),z&&this.fire(new e.Event("rotatestart",p)).fire(new e.Event("rotate",p)).fire(new e.Event("rotateend",p)),$&&this.fire(new e.Event("pitchstart",p)).fire(new e.Event("pitch",p)).fire(new e.Event("pitchend",p)),this.fire(new e.Event("moveend",p)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(is),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,p){const T=this.transform;if(!T.projection.supportsFreeCamera)return e.warnOnce(is),this;this.stop();const I=T.zoom,z=T.pitch,$=T.bearing;T.setFreeCameraOptions(a);const Z=I!==T.zoom,Q=z!==T.pitch,le=$!==T.bearing;return this.fire(new e.Event("movestart",p)).fire(new e.Event("move",p)),Z&&this.fire(new e.Event("zoomstart",p)).fire(new e.Event("zoom",p)).fire(new e.Event("zoomend",p)),le&&this.fire(new e.Event("rotatestart",p)).fire(new e.Event("rotate",p)).fire(new e.Event("rotateend",p)),Q&&this.fire(new e.Event("pitchstart",p)).fire(new e.Event("pitch",p)).fire(new e.Event("pitchend",p)),this.fire(new e.Event("moveend",p)),this}easeTo(a,p){this._stop(!1,a.easeId),(!1===(a=e.extend({offset:[0,0],duration:500,easing:e.ease},a)).animate||this._prefersReducedMotion(a))&&(a.duration=0);const T=this.transform,I=this.getZoom(),z=this.getBearing(),$=this.getPitch(),Z=this.getPadding(),Q="zoom"in a?+a.zoom:I,le="bearing"in a?this._normalizeBearing(a.bearing,z):z,oe="pitch"in a?+a.pitch:$,ye="padding"in a?a.padding:T.padding,Be=e.Point.convert(a.offset);let Ze,qe,Je;if("globe"===T.projection.name){const Ut=e.MercatorCoordinate.fromLngLat(T.center),li=Be.rotate(-T.angle);Ut.x+=li.x/T.worldSize,Ut.y+=li.y/T.worldSize;const Gi=Ut.toLngLat(),ti=e.LngLat.convert(a.center||Gi);this._normalizeCenter(ti),Ze=T.centerPoint.add(li),qe=new e.Point(Ut.x,Ut.y).mult(T.worldSize),Je=new e.Point(e.mercatorXfromLng(ti.lng),e.mercatorYfromLat(ti.lat)).mult(T.worldSize).sub(qe)}else{Ze=T.centerPoint.add(Be);const Ut=T.pointLocation(Ze),li=e.LngLat.convert(a.center||Ut);this._normalizeCenter(li),qe=T.project(Ut),Je=T.project(li).sub(qe)}const nt=T.zoomScale(Q-I);let we,We;a.around&&(we=e.LngLat.convert(a.around),We=T.locationPoint(we));const gt=this._zooming||Q!==I,vt=this._rotating||z!==le,zt=this._pitching||oe!==$,Bt=!T.isPaddingEqual(ye),Ft=Ut=>li=>{if(gt&&(Ut.zoom=e.number(I,Q,li)),vt&&(Ut.bearing=e.number(z,le,li)),zt&&(Ut.pitch=e.number($,oe,li)),Bt&&(Ut.interpolatePadding(Z,ye,li),Ze=Ut.centerPoint.add(Be)),we)Ut.setLocationAtPoint(we,We);else{const Gi=Ut.zoomScale(Ut.zoom-I),ti=Q>I?Math.min(2,nt):Math.max(.5,nt),ki=Math.pow(ti,1-li),ci=Ut.unproject(qe.add(Je.mult(li*ki)).mult(Gi));Ut.setLocationAtPoint(Ut.renderWorldCopies?ci.wrap():ci,Ze)}return a.preloadOnly||this._fireMoveEvents(p),Ut};if(a.preloadOnly){const Ut=this._emulate(Ft,a.duration,T);return this._preloadTiles(Ut),this}const $t={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=gt,this._rotating=vt,this._pitching=zt,this._padding=Bt,this._easeId=a.easeId,this._prepareEase(p,a.noMoveStart,$t),this._ease(Ft(T),Ut=>{T.recenterOnTerrain(),this._afterEase(p,Ut)},a),this}_prepareEase(a,p,T={}){this._moving=!0,this.transform.cameraElevationReference="sea",p||T.moving||this.fire(new e.Event("movestart",a)),this._zooming&&!T.zooming&&this.fire(new e.Event("zoomstart",a)),this._rotating&&!T.rotating&&this.fire(new e.Event("rotatestart",a)),this._pitching&&!T.pitching&&this.fire(new e.Event("pitchstart",a))}_fireMoveEvents(a){this.fire(new e.Event("move",a)),this._zooming&&this.fire(new e.Event("zoom",a)),this._rotating&&this.fire(new e.Event("rotate",a)),this._pitching&&this.fire(new e.Event("pitch",a))}_afterEase(a,p){if(this._easeId&&p&&this._easeId===p)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const T=this._zooming,I=this._rotating,z=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new e.Event("zoomend",a)),I&&this.fire(new e.Event("rotateend",a)),z&&this.fire(new e.Event("pitchend",a)),this.fire(new e.Event("moveend",a))}flyTo(a,p){if(this._prefersReducedMotion(a)){const zi=e.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(zi,p)}this.stop(),a=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},a);const T=this.transform,I=this.getZoom(),z=this.getBearing(),$=this.getPitch(),Z=this.getPadding(),Q="zoom"in a?e.clamp(+a.zoom,T.minZoom,T.maxZoom):I,le="bearing"in a?this._normalizeBearing(a.bearing,z):z,oe="pitch"in a?+a.pitch:$,ye="padding"in a?a.padding:T.padding,Be=T.zoomScale(Q-I),Ze=e.Point.convert(a.offset);let qe=T.centerPoint.add(Ze);const Je=T.pointLocation(qe),nt=e.LngLat.convert(a.center||Je);this._normalizeCenter(nt);const we=T.project(Je),We=T.project(nt).sub(we);let gt=a.curve;const vt=Math.max(T.width,T.height),zt=vt/Be,Bt=We.mag();if("minZoom"in a){const zi=e.clamp(Math.min(a.minZoom,I,Q),T.minZoom,T.maxZoom),Hi=vt/T.zoomScale(zi-I);gt=Math.sqrt(Hi/Bt*2)}const Ft=gt*gt;function $t(zi){const Hi=(zt*zt-vt*vt+(zi?-1:1)*Ft*Ft*Bt*Bt)/(2*(zi?zt:vt)*Ft*Bt);return Math.log(Math.sqrt(Hi*Hi+1)-Hi)}function Ut(zi){return(Math.exp(zi)-Math.exp(-zi))/2}function li(zi){return(Math.exp(zi)+Math.exp(-zi))/2}const Gi=$t(0);let ti=function(zi){return li(Gi)/li(Gi+gt*zi)},ki=function(zi){return vt*((li(Gi)*(Ut(Hi=Gi+gt*zi)/li(Hi))-Ut(Gi))/Ft)/Bt;var Hi},ci=($t(1)-Gi)/gt;if(Math.abs(Bt)<1e-6||!isFinite(ci)){if(Math.abs(vt-zt)<1e-6)return this.easeTo(a,p);const zi=zt<vt?-1:1;ci=Math.abs(Math.log(zt/vt))/gt,ki=function(){return 0},ti=function(Hi){return Math.exp(zi*gt*Hi)}}a.duration="duration"in a?+a.duration:1e3*ci/("screenSpeed"in a?+a.screenSpeed/gt:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const ji=z!==le,oi=oe!==$,wi=!T.isPaddingEqual(ye),Wi=zi=>Hi=>{const Pn=Hi*ci,nr=1/ti(Pn);zi.zoom=1===Hi?Q:I+zi.scaleZoom(nr),ji&&(zi.bearing=e.number(z,le,Hi)),oi&&(zi.pitch=e.number($,oe,Hi)),wi&&(zi.interpolatePadding(Z,ye,Hi),qe=zi.centerPoint.add(Ze));const wn=1===Hi?nt:zi.unproject(we.add(We.mult(ki(Pn))).mult(nr));return zi.setLocationAtPoint(zi.renderWorldCopies?wn.wrap():wn,qe),zi._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(p),zi};if(a.preloadOnly){const zi=this._emulate(Wi,a.duration,T);return this._preloadTiles(zi),this}return this._zooming=!0,this._rotating=ji,this._pitching=oi,this._padding=wi,this._prepareEase(p,!1),this._ease(Wi(T),()=>this._afterEase(p),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const T=this._onEaseEnd;this._onEaseEnd=void 0,T.call(this,p)}if(!a){const T=this.handlers;T&&T.stop(!1)}return this}_ease(a,p,T){!1===T.animate||0===T.duration?(a(1),p()):(this._easeStart=e.exported.now(),this._easeOptions=T,this._onEaseFrame=a,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),p=this._onEaseFrame;p&&p(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,p){a=e.wrap(a,-180,180);const T=Math.abs(a-p);return Math.abs(a-360-p)<T&&(a-=360),Math.abs(a+360-p)<T&&(a+=360),a}_normalizeCenter(a){const p=this.transform;if(!p.renderWorldCopies||p.maxBounds)return;const T=a.lng-p.center.lng;a.lng+=T>180?-360:T<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,p,T){const I=Math.ceil(15*p/1e3),z=[],$=a(T.clone());for(let Z=0;Z<=I;Z++){const Q=$(Z/I);z.push(Q.clone())}return z}}class vn{constructor(a={}){this.options=a,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const p=this.options&&this.options.compact;return this._map=a,this._container=Oe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Oe("button","mapboxgl-ctrl-attrib-button",this._container),Oe("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Oe("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===p&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(a,p){const T=this._map._getUIString(`AttributionControl.${p}`);a.setAttribute("aria-label",T),a.removeAttribute("title"),a.firstElementChild&&a.firstElementChild.setAttribute("title",T)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(a){const T=p.reduce((I,z,$)=>(z.value&&(I+=`${z.key}=${z.value}${$<p.length-1?"&":""}`),I),"?");a.href=`${e.config.FEEDBACK_URL}/${T}#${bo(this._map,!0)}`,a.rel="noopener nofollow",this._setElementTitle(a,"MapFeedback")}}_updateData(a){!a||"metadata"!==a.sourceDataType&&"visibility"!==a.sourceDataType&&"style"!==a.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}const p=this._map.style._sourceCaches;for(const I in p){const z=p[I];if(z.used){const $=z.getSource();$.attribution&&a.indexOf($.attribution)<0&&a.push($.attribution)}}a.sort((I,z)=>I.length-z.length),a=a.filter((I,z)=>{for(let $=z+1;$<a.length;$++)if(a[$].indexOf(I)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const T=a.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,a.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ju{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=Oe("div","mapboxgl-ctrl");const p=Oe("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&"metadata"!==a.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(0===Object.entries(a).length)return!0;for(const p in a){const T=a[p].getSource();if(T.hasOwnProperty("mapbox_logo")&&!T.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const p=a[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}}}class Oo{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const p=++this._id;return this._queue.push({callback:a,id:p,cancelled:!1}),p}remove(a){const p=this._currentlyRunning,T=p?this._queue.concat(p):this._queue;for(const I of T)if(I.id===a)return void(I.cancelled=!0)}run(a=0){const p=this._currentlyRunning=this._queue;this._queue=[];for(const T of p)if(!T.cancelled&&(T.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function kl(b,a,p){if(b=new e.LngLat(b.lng,b.lat),a){const T=new e.LngLat(b.lng-360,b.lat),I=new e.LngLat(b.lng+360,b.lat),z=360*Math.ceil(Math.abs(b.lng-p.center.lng)/360),$=p.locationPoint(b).distSqr(a),Z=a.x<0||a.y<0||a.x>p.width||a.y>p.height;p.locationPoint(T).distSqr(a)<$&&(Z||Math.abs(T.lng-p.center.lng)<z)?b=T:p.locationPoint(I).distSqr(a)<$&&(Z||Math.abs(I.lng-p.center.lng)<z)&&(b=I)}for(;Math.abs(b.lng-p.center.lng)>180;){const T=p.locationPoint(b);if(T.x>=0&&T.y>=0&&T.x<=p.width&&T.y<=p.height)break;b.lng>p.center.lng?b.lng-=360:b.lng+=360}return b}const rs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class an extends e.Evented{constructor(a,p){if(super(),(a instanceof e.window.HTMLElement||p)&&(a=e.extend({element:a},p)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=a&&a.occludedOpacity||.2,a&&a.element)this._element=a.element,this._offset=e.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Oe("div");const I=41,z=27,$=Ye("svg",{display:"block",height:I*this._scale+"px",width:z*this._scale+"px",viewBox:`0 0 ${z} ${I}`},this._element),Z=Ye("radialGradient",{id:"shadowGradient"},Ye("defs",{},$));Ye("stop",{offset:"10%","stop-opacity":.4},Z),Ye("stop",{offset:"100%","stop-opacity":.05},Z),Ye("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},$),Ye("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},$),Ye("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},$),Ye("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},$),this._offset=e.Point.convert(a&&a.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",I=>{I.preventDefault()}),this._element.addEventListener("mousedown",I=>{I.preventDefault()});const T=this._element.classList;for(const I in rs)T.remove(`mapboxgl-marker-anchor-${I}`);T.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=e.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const I=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(24.6+I)],"bottom-right":[-I,-1*(24.6+I)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,a._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const p=a.code,T=a.charCode||a.keyCode;"Space"!==p&&"Enter"!==p&&32!==T&&13!==T||this.togglePopup()}_onMapClick(a){const p=a.originalEvent.target,T=this._element;this._popup&&(p===T||T.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,p=this._pos;if(!a||!p)return!1;const T=a.unproject(p),I=a.getFreeCameraOptions();if(!I.position)return!1;const z=I.position.toLngLat();return z.distanceTo(T)<.9*z.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const p=this._pos;if(!p||p.x<0||p.x>a.transform.width||p.y<0||p.y>a.transform.height)return void this._clearFadeTimer();const T=a.unproject(p);let I;a._showingGlobe()&&e.isLngLatBehindGlobe(a.transform,this._lngLat)?I=0:(I=1-a._queryFogOpacity(T),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(I*=this._occludedOpacity)),this._element.style.opacity=`${I}`,this._element.style.pointerEvents=I>0?"auto":"none",this._popup&&this._popup._setOpacity(I),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const p=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${a.x}px,${a.y}px)\n            ${rs[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${p.x}px,${p.y}px)\n        `}_calculateXYTransform(){const a=this._pos,p=this._map,T=this.getPitchAlignment();if(!p||!a||"map"!==T)return"";if(!p._showingGlobe()){const Q=p.getPitch();return Q?`rotateX(${Q}deg)`:""}const I=e.radToDeg(e.globeTiltAtLngLat(p.transform,this._lngLat)),z=a.sub(e.globeCenterToScreenPoint(p.transform)),$=Math.abs(z.x)+Math.abs(z.y);if(0===$)return"";const Z=I/$;return`rotateX(${-z.y*Z}deg) rotateY(${z.x*Z}deg)`}_calculateZTransform(){const a=this._pos,p=this._map;if(!p||!a)return"";let T=0;const I=this.getRotationAlignment();if("map"===I)if(p._showingGlobe()){const z=p.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),$=p.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(z);T=e.radToDeg(Math.atan2($.y,$.x))-90}else T=-p.getBearing();else if("horizon"===I){const z=e.smoothstep(4,6,p.getZoom()),$=e.globeCenterToScreenPoint(p.transform);$.y+=z*p.transform.height;const Z=a.sub($),Q=e.radToDeg(Math.atan2(Z.y,Z.x));T=(Q>90?Q-270:Q+90)*(1-z)}return T+=this._rotation,T?`rotateZ(${T}deg)`:""}_update(a){e.window.cancelAnimationFrame(this._updateFrameId);const p=this._map;p&&(p.transform.renderWorldCopies&&(this._lngLat=kl(this._lngLat,this._pos,p.transform)),this._pos=p.project(this._lngLat),!0===a?this._updateFrameId=e.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),p._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(p._showingGlobe()||p.getTerrain()||p.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=e.Point.convert(a),this._update(),this}_onMove(a){const p=this._map;if(!p)return;const T=this._pointerdownPos,I=this._positionDelta;if(T&&I){if(!this._isDragging){const z=this._clickTolerance||p._clickTolerance;if(a.point.dist(T)<z)return;this._isDragging=!0}this._pos=a.point.sub(I),this._lngLat=p.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(a){const p=this._map,T=this._pos;p&&T&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(T),this._pointerdownPos=a.point,this._state="pending",p.on("mousemove",this._onMove),p.on("touchmove",this._onMove),p.once("mouseup",this._onUp),p.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const p=this._map;return p&&(a?(p.on("mousedown",this._addDragHandler),p.on("touchstart",this._addDragHandler)):(p.off("mousedown",this._addDragHandler),p.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Xo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yc(b=new e.Point(0,0),a="bottom"){if("number"==typeof b){const p=Math.round(Math.sqrt(.5*Math.pow(b,2)));switch(a){case"top":return new e.Point(0,b);case"top-left":return new e.Point(p,p);case"top-right":return new e.Point(-p,p);case"bottom":return new e.Point(0,-b);case"bottom-left":return new e.Point(p,-p);case"bottom-right":return new e.Point(-p,-p);case"left":return new e.Point(b,0);case"right":return new e.Point(-b,0)}return new e.Point(0,0)}return b instanceof e.Point||Array.isArray(b)?e.Point.convert(b):e.Point.convert(b[a]||[0,0])}class yu{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const p=e.easeCubicInOut((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-p)+this._end*p}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,p,T){this._start=this.getValue(p),this._end=a,this._startTime=p,this._endTime=p+T}}const Qu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},xu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Ah={showCompass:!0,showZoom:!0,visualizePitch:!1};class Na{constructor(a,p,T=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new ua({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,T&&(this.mousePitch=new ha({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),p.addEventListener("mousedown",this.mousedown),p.addEventListener("touchstart",this.touchstart,{passive:!1}),p.addEventListener("touchmove",this.touchmove),p.addEventListener("touchend",this.touchend),p.addEventListener("touchcancel",this.reset)}down(a,p){this.mouseRotate.mousedown(a,p),this.mousePitch&&this.mousePitch.mousedown(a,p),St()}move(a,p){const T=this.map,I=this.mouseRotate.mousemoveWindow(a,p),z=I&&I.bearingDelta;if(z&&T.setBearing(T.getBearing()+z),this.mousePitch){const $=this.mousePitch.mousemoveWindow(a,p),Z=$&&$.pitchDelta;Z&&T.setPitch(T.getPitch()+Z)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart,{passive:!1}),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){it(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(e.extend({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),Qt(this.element,a)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,Qt(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){1!==a.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ve(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){1!==a.targetTouches.length?this.reset():(this._lastPos=Ve(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){0===a.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const cu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Vc={maxWidth:100,unit:"metric"},Lh={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},xc={version:e.version,supported:Ae,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Wo{constructor(b){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(b=e.extend({},xu,b)).minZoom&&null!=b.maxZoom&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=b.minPitch&&null!=b.maxPitch&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=b.minPitch&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=b.maxPitch&&b.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(b.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(b.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new gs(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies),b),this._interactive=b.interactive,this._minTileCacheSize=b.minTileCacheSize,this._maxTileCacheSize=b.maxTileCacheSize,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._useWebGL2=b.useWebGL2,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=b.crossSourceCollisions,this._collectResourceTiming=b.collectResourceTiming,this._optimizeForTerrain=b.optimizeForTerrain,this._language=this._parseLanguage(b.language),this._worldview=b.worldview,this._renderTaskQueue=new Oo,this._domRenderTaskQueue=new Oo,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Qu,b.locale),this._clickTolerance=b.clickTolerance,this._cooperativeGestures=b.cooperativeGestures,this._performanceMetricsCollection=b.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new yu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(b.transformRequest,b.accessToken,b.testMode),this._silenceAuthErrors=!!b.testMode,"string"==typeof b.container){if(this._container=e.window.document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),b.maxBounds&&this.setMaxBounds(b.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new $o(this,b),this._localFontFamily=b.localFontFamily,this._localIdeographFontFamily=b.localIdeographFontFamily,b.style&&this.setStyle(b.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),b.projection&&this.setProjection(b.projection),this._hash=b.hash&&new wl("string"==typeof b.hash&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,e.extend({},b.fitBoundsOptions,{duration:0})))),this.resize(),b.attributionControl&&this.addControl(new vn({customAttribution:b.customAttribution})),this._logoControl=new Ju,this.addControl(this._logoControl,b.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update("style"===a.dataType),this.fire(new e.Event(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new e.Event(`${a.dataType}dataloading`,a))})}_getMapId(){return this._mapId}addControl(b,a){if(void 0===a&&(a=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=b.onAdd(this);this._controls.push(b);const T=this._controlPositions[a];return-1!==a.indexOf("bottom")?T.insertBefore(p,T.firstChild):T.appendChild(p),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(b);return a>-1&&this._controls.splice(a,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(b){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new e.Event("movestart",b)).fire(new e.Event("move",b)),this.fire(new e.Event("resize",b)),a&&this.fire(new e.Event("moveend",b)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(b){return this.transform.setMaxBounds(e.LngLatBounds.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b?this.setZoom(b):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b?this.setZoom(b):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b?this.setPitch(b):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b?this.setPitch(b):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(b){return"auto"===b?e.window.navigator.language:Array.isArray(b)?0===b.length?void 0:b.map(a=>"auto"===a?e.window.navigator.language:a):b}setLanguage(b){const a=this._parseLanguage(b);if(!this.style||a===this._language)return this;this._language=a,this.style._reloadSources();for(const p of this._controls)p._setLanguage&&p._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(b){return this.style&&b!==this._worldview?(this._worldview=b,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(b){return this._lazyInitEmptyStyle(),b?"string"==typeof b&&(b={name:b}):b=null,this._useExplicitProjection=!!b,this._prioritizeAndUpdateProjection(b,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const b=this.transform,a=b.projection.name;let p;"globe"===a&&b.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(b.setMercatorFromTransition(),p=!0):"mercator"===a&&b.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(b.setProjection({name:"globe"}),p=!0),p&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(b,a){return this._updateProjection(b||a||{name:"mercator"})}_updateProjection(b){let a;if(a="globe"===b.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(b),this.style.applyProjectionUpdate(),a){this.painter.clearBackgroundTiles();for(const p in this.style._sourceCaches)this.style._sourceCaches[p].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(b){return this.transform.locationPoint3D(e.LngLat.convert(b))}unproject(b){return this.transform.pointLocation3D(e.Point.convert(b))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(b,a,p){if("mouseenter"===b||"mouseover"===b){let T=!1;const I=$=>{const Z=a.filter(le=>this.getLayer(le)),Q=Z.length?this.queryRenderedFeatures($.point,{layers:Z}):[];Q.length?T||(T=!0,p.call(this,new fe(b,this,$.originalEvent,{features:Q}))):T=!1},z=()=>{T=!1};return{layers:new Set(a),listener:p,delegates:{mousemove:I,mouseout:z}}}if("mouseleave"===b||"mouseout"===b){let T=!1;const I=$=>{const Z=a.filter(Q=>this.getLayer(Q));(Z.length?this.queryRenderedFeatures($.point,{layers:Z}):[]).length?T=!0:T&&(T=!1,p.call(this,new fe(b,this,$.originalEvent)))},z=$=>{T&&(T=!1,p.call(this,new fe(b,this,$.originalEvent)))};return{layers:new Set(a),listener:p,delegates:{mousemove:I,mouseout:z}}}{const T=I=>{const z=a.filter(Z=>this.getLayer(Z)),$=z.length?this.queryRenderedFeatures(I.point,{layers:z}):[];$.length&&(I.features=$,p.call(this,I),delete I.features)};return{layers:new Set(a),listener:p,delegates:{[b]:T}}}}on(b,a,p){if(void 0===p)return super.on(b,a);Array.isArray(a)||(a=[a]);const T=this._createDelegatedListener(b,a,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(T);for(const I in T.delegates)this.on(I,T.delegates[I]);return this}once(b,a,p){if(void 0===p)return super.once(b,a);Array.isArray(a)||(a=[a]);const T=this._createDelegatedListener(b,a,p);for(const I in T.delegates)this.once(I,T.delegates[I]);return this}off(b,a,p){if(void 0===p)return super.off(b,a);a=new Set(Array.isArray(a)?a:[a]);const T=(z,$)=>{if(z.size!==$.size)return!1;for(const Z of z)if(!$.has(Z))return!1;return!0},I=this._delegatedListeners?this._delegatedListeners[b]:void 0;return I&&(z=>{for(let $=0;$<z.length;$++){const Z=z[$];if(Z.listener===p&&T(Z.layers,a)){for(const Q in Z.delegates)this.off(Q,Z.delegates[Q]);return z.splice($,1),this}}})(I),this}queryRenderedFeatures(b,a){return this.style?(void 0!==a||void 0===b||b instanceof e.Point||Array.isArray(b)||(a=b,b=void 0),this.style.queryRenderedFeatures(b=b||[[0,0],[this.transform.width,this.transform.height]],a=a||{},this.transform)):[]}querySourceFeatures(b,a){return this.style.querySourceFeatures(b,a)}isPointOnSurface(b){const{name:a}=this.transform.projection;return"globe"!==a&&"mercator"!==a&&e.warnOnce(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(e.Point.convert(b))}setStyle(b,a){return!1!==(a=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a)).diff&&a.localIdeographFontFamily===this._localIdeographFontFamily&&a.localFontFamily===this._localFontFamily&&this.style&&b?(this._diffStyle(b,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(b,a))}_getUIString(b){const a=this._locale[b];if(null==a)throw new Error(`Missing UI string '${b}'`);return a}_updateStyle(b,a){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),b&&(this.style=new lr(this,a||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof b?this.style.loadURL(b):this.style.loadJSON(b)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new lr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,a){if("string"==typeof b){const p=this._requestManager.normalizeStyleURL(b),T=this._requestManager.transformRequest(p,e.ResourceType.Style);e.getJSON(T,(I,z)=>{I?this.fire(new e.ErrorEvent(I)):z&&this._updateDiff(z,a)})}else"object"==typeof b&&this._updateDiff(b,a)}_updateDiff(b,a){try{this.style.setState(b)&&this._update(!0)}catch(p){e.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(b,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(b,a){return this._lazyInitEmptyStyle(),this.style.addSource(b,a),this._update(!0)}isSourceLoaded(b){return!!this.style&&this.style._isSourceCacheLoaded(b)}areTilesLoaded(){const b=this.style&&this.style._sourceCaches;for(const a in b){const p=b[a]._tiles;for(const T in p){const I=p[T];if("loaded"!==I.state&&"errored"!==I.state)return!1}}return!0}addSourceType(b,a,p){this._lazyInitEmptyStyle(),this.style.addSourceType(b,a,p)}removeSource(b){return this.style.removeSource(b),this._updateTerrain(),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,a,{pixelRatio:p=1,sdf:T=!1,stretchX:I,stretchY:z,content:$}={}){if(this._lazyInitEmptyStyle(),a instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&a instanceof e.window.ImageBitmap){const{width:Z,height:Q,data:le}=e.exported.getImageData(a);this.style.addImage(b,{data:new e.RGBAImage({width:Z,height:Q},le),pixelRatio:p,stretchX:I,stretchY:z,content:$,sdf:T,version:0})}else if(void 0===a.width||void 0===a.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Z,height:Q}=a,le=a;this.style.addImage(b,{data:new e.RGBAImage({width:Z,height:Q},new Uint8Array(le.data)),pixelRatio:p,stretchX:I,stretchY:z,content:$,sdf:T,version:0,userImage:le}),le.onAdd&&le.onAdd(this,b)}}updateImage(b,a){const p=this.style.getImage(b);if(!p)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=a instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?e.exported.getImageData(a):a,{width:I,height:z}=T;void 0!==I&&void 0!==z?I===p.data.width&&z===p.data.height?(p.data.replace(T.data,!(a instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&a instanceof e.window.ImageBitmap)),this.style.updateImage(b,p)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${I}, ${z})\n                must be that same as the previous version of the image\n                (${p.data.width}, ${p.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b,a){e.getImage(this._requestManager.transformRequest(b,e.ResourceType.Image),(p,T)=>{a(p,T instanceof e.window.HTMLImageElement?e.exported.getImageData(T):T)})}listImages(){return this.style.listImages()}addLayer(b,a){return this._lazyInitEmptyStyle(),this.style.addLayer(b,a),this._update(!0)}moveLayer(b,a){return this.style.moveLayer(b,a),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}setLayerZoomRange(b,a,p){return this.style.setLayerZoomRange(b,a,p),this._update(!0)}setFilter(b,a,p={}){return this.style.setFilter(b,a,p),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,a,p,T={}){return this.style.setPaintProperty(b,a,p,T),this._update(!0)}getPaintProperty(b,a){return this.style.getPaintProperty(b,a)}setLayoutProperty(b,a,p,T={}){return this.style.setLayoutProperty(b,a,p,T),this._update(!0)}getLayoutProperty(b,a){return this.style.getLayoutProperty(b,a)}setLight(b,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,a),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(b){return this._lazyInitEmptyStyle(),!b&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(b),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(b){return this._lazyInitEmptyStyle(),this.style.setFog(b),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(b){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(b),this.transform):0}setFeatureState(b,a){return this.style.setFeatureState(b,a),this._update()}removeFeatureState(b,a){return this.style.removeFeatureState(b,a),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}_updateContainerDimensions(){if(!this._container)return;const b=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let p,T,I,z=this._container;for(;z&&(!T||!I);){const $=e.window.getComputedStyle(z).transform;$&&"none"!==$&&(p=$.match(/matrix.*\((.+)\)/)[1].split(", "),p[0]&&"0"!==p[0]&&"1"!==p[0]&&(T=p[0]),p[3]&&"0"!==p[3]&&"1"!==p[3]&&(I=p[3])),z=z.parentElement}this._containerWidth=T?Math.abs(b/T):b,this._containerHeight=I?Math.abs(a/I):a}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const b=this._container;b.classList.add("mapboxgl-map"),(this._missingCSSCanary=Oe("div","mapboxgl-canary",b)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=Oe("div","mapboxgl-canvas-container",b);this._interactive&&a.classList.add("mapboxgl-interactive"),this._canvas=Oe("canvas","mapboxgl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const p=this._controlContainer=Oe("div","mapboxgl-control-container",b),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{T[I]=Oe("div",`mapboxgl-ctrl-${I}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,a){const p=e.exported.devicePixelRatio||1;this._canvas.width=p*Math.ceil(b),this._canvas.height=p*Math.ceil(a),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${a}px`}_addMarker(b){this._markers.push(b)}_removeMarker(b){const a=this._markers.indexOf(b);-1!==a&&this._markers.splice(a,1)}_addPopup(b){this._popups.push(b)}_removePopup(b){const a=this._popups.indexOf(b);-1!==a&&this._popups.splice(a,1)}_setupPainter(){const b=e.extend({},Ae.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._useWebGL2&&this._canvas.getContext("webgl2",b),p=a||this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b);p?(this._useWebGL2&&!a&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(p,!0),this.painter=new fo(p,this.transform,!!a),this.on("data",T=>{"source"===T.dataType&&this.painter.setTileLoadedFlag(!0)}),e.exported$1.testSupport(p)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(b){b.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:b}))}_contextRestored(b){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:b}))}_onMapScroll(b){if(b.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_requestDomTask(b){!this.loaded()||this.loaded()&&!this.isMoving()?b():this._domRenderTaskQueue.add(b)}_render(b){let a;const p=this.painter.context.extTimerQuery,T=e.exported.now();if(this.listens("gpu-timing-frame")&&(a=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(b),this._domRenderTaskQueue.run(b),this._removed)return;this._updateProjectionTransition();const I=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const Z=this.transform.zoom,Q=this.transform.pitch,le=e.exported.now(),oe=new e.EvaluationParameters(Z,{now:le,fadeDuration:I,pitch:Q,transition:this.style.getTransition()});this.style.update(oe)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let z=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),z=this._updateAverageElevation(T),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):z=this._updateAverageElevation(T),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,I,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const Z=e.exported.now()-T;p.endQueryEXT(p.TIME_ELAPSED_EXT,a),setTimeout(()=>{const Q=p.getQueryObjectEXT(a,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(a),this.fire(new e.Event("gpu-timing-frame",{cpuTime:Z,gpuTime:Q})),e.window.performance.mark("frame-gpu",{startTime:T,detail:{gpuTime:Q}})},50)}if(this.listens("gpu-timing-layer")){const Z=this.painter.collectGpuTimers();setTimeout(()=>{const Q=this.painter.queryGpuTimers(Z);this.fire(new e.Event("gpu-timing-layer",{layerTimes:Q}))},50)}if(this.listens("gpu-timing-deferred-render")){const Z=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Q=this.painter.queryGpuTimeDeferredRender(Z);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:Q}))},50)}const $=this._sourcesDirty||this._styleDirty||this._placementDirty||z;if($||this._repaint)this.triggerRepaint();else{const Z=!this.isMoving()&&this.loaded();if(Z&&(z=this._updateAverageElevation(T,!0)),z)this.triggerRepaint();else if(this._triggerFrame(!1),Z&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Q=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:Q})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||$||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(b){for(const a of this._markers)b&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!b||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(b,a=!1){const p=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&p(0);if((a||b-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(b)){const T=this.transform.averageElevation;let I=this.transform.sampleAverageElevation(),z=!1;this.transform.elevation&&(z=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(I)?I=0:this._averageElevationLastSampledAt=b;const $=Math.abs(T-I);if($>1){if(this._isInitialLoad||z)return this._averageElevation.jumpTo(I),p(I);this._averageElevation.easeTo(I,b,300)}else if($>1e-4)return this._averageElevation.jumpTo(I),p(I)}return!!this._averageElevation.isEasing(b)&&p(this._averageElevation.getValue(b))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,b=>{if(b&&(b.message===e.AUTH_ERR_MSG||401===b.status)){const a=this.painter.context.gl;e.storeAuthState(a,!1),this._logoControl instanceof Ju&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const b=this._isDragging();this.painter.updateTerrain(this.style,b)}_calculateSpeedIndex(){const b=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const p=this.painter.context.gl,T=p.createFramebuffer();function I(z){p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,z,0);const $=new Uint8Array(p.drawingBufferWidth*p.drawingBufferHeight*4);return p.readPixels(0,0,p.drawingBufferWidth,p.drawingBufferHeight,p.RGBA,p.UNSIGNED_BYTE,$),$}return p.bindFramebuffer(p.FRAMEBUFFER,T),this._canvasPixelComparison(I(b),a.canvasCopies.map(I),a.timeStamps)}_canvasPixelComparison(b,a,p){let T=p[1]-p[0];const I=b.length/4;for(let z=0;z<a.length;z++){const $=a[z];let Z=0;for(let Q=0;Q<$.length;Q+=4)$[Q]===b[Q]&&$[Q+1]===b[Q+1]&&$[Q+2]===b[Q+2]&&$[Q+3]===b[Q+3]&&(Z+=1);T+=(p[z+2]-p[z+1])*(1-Z/I)}return T}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(b){this._renderNextFrame=this._renderNextFrame||b,this.style&&!this._frame&&(this._frame=e.exported.frame(a=>{const p=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,p&&this._render(a)}))}_preloadTiles(b){const a=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(a,(p,T)=>p._preloadTiles(b,T),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(b){this._trackResize&&this.resize({originalEvent:b})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(b){this._showTerrainWireframe!==b&&(this._showTerrainWireframe=b,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(b){this._speedIndexTiming!==b&&(this._speedIndexTiming=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(b){this._showTileAABBs!==b&&(this._showTileAABBs=b,b&&this._update())}_setCacheLimits(b,a){e.setCacheLimits(b,a)}get version(){return e.version}},NavigationControl:class{constructor(b){this.options=e.extend({},Ah,b),this._container=Oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),Oe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),Oe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const p=this._map;p&&(this.options.visualizePitch?p.resetNorthPitch({},{originalEvent:a}):p.resetNorth({},{originalEvent:a}))}),this._compassIcon=Oe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const b=this._map;if(!b)return;const a=b.getZoom(),p=a===b.getMaxZoom(),T=a===b.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())}_rotateCompassArrow(){const b=this._map;if(!b)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(b.transform.pitch*(Math.PI/180)),.5)}) rotateX(${b.transform.pitch}deg) rotateZ(${b.transform.angle*(180/Math.PI)}deg)`:`rotate(${b.transform.angle*(180/Math.PI)}deg)`;b._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),b.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&b.on("pitch",this._rotateCompassArrow),b.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Na(b,this._compass,this.options.visualizePitch)),this._container}onRemove(){const b=this._map;b&&(this._container.remove(),this.options.showZoom&&b.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&b.off("pitch",this._rotateCompassArrow),b.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(b,a){const p=Oe("button",b,this._container);return p.type="button",p.addEventListener("click",a),p}_setButtonTitle(b,a){if(!this._map)return;const p=this._map._getUIString(`NavigationControl.${a}`);b.setAttribute("aria-label",p),b.firstElementChild&&b.firstElementChild.setAttribute("title",p)}},GeolocateControl:class extends e.Evented{constructor(b){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},cu,b),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ts(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(b){return this._map=b,this._container=Oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(b){const a=(p=!!this.options.geolocation)=>{this._supportsGeolocation=p,b(p)};void 0!==this._supportsGeolocation?b(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(p=>a("denied"!==p.state)).catch(()=>a()):a()}_isOutOfMapMaxBounds(b){const a=this._map.getMaxBounds(),p=b.coords;return!!a&&(p.longitude<a.getWest()||p.longitude>a.getEast()||p.latitude<a.getSouth()||p.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(b){if(this._map){if(this._isOutOfMapMaxBounds(b))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",b)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=b,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(b),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(b),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",b)),this._finish()}}_updateCamera(b){const a=new e.LngLat(b.coords.longitude,b.coords.latitude),p=b.coords.accuracy,T=this._map.getBearing(),I=e.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(p),I,{geolocateSource:!0})}_updateMarker(b){if(b){const a=new e.LngLat(b.coords.longitude,b.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=b.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const b=this._map.transform,a=e.mercatorZfromAltitude(1,b._center.lat)*b.worldSize,p=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(b){if(this._map){if(this.options.trackUserLocation)if(1===b.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===b.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",b)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(b){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=Oe("button","mapboxgl-ctrl-geolocate",this._container),Oe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===b){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Oe("div","mapboxgl-user-location"),this._dotElement.appendChild(Oe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Oe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new an({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Oe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new an({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||"ACTIVE_LOCK"!==this._watchState||a.originalEvent&&"resize"===a.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))})}}_onDeviceOrientation(b){this._userLocationDotMarker&&(b.webkitCompassHeading?this._heading=b.webkitCompassHeading:!0===b.absolute&&(this._heading=-1*b.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let b;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(b={maximumAge:6e5,timeout:0},this._noTimeout=!0):(b=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,b),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const b=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(a=>{"granted"===a&&b()}).catch(console.error):b()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:vn,ScaleControl:class{constructor(b){this.options=e.extend({},Vc,b),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const b=this.options.maxWidth||100,a=this._map,p=a._containerHeight/2,T=a._containerWidth/2-b/2,I=a.unproject([T,p]),z=a.unproject([T+b,p]),$=I.distanceTo(z);if("imperial"===this.options.unit){const Z=3.2808*$;Z>5280?this._setScale(b,Z/5280,"mile"):this._setScale(b,Z,"foot")}else"nautical"===this.options.unit?this._setScale(b,$/1852,"nautical-mile"):$>=1e3?this._setScale(b,$/1e3,"kilometer"):this._setScale(b,$,"meter")}_setScale(b,a,p){this._map._requestDomTask(()=>{const T=function(z){const $=Math.pow(10,`${Math.floor(z)}`.length-1);let Z=z/$;return Z=Z>=10?10:Z>=5?5:Z>=3?3:Z>=2?2:Z>=1?1:function(Q){const le=Math.pow(10,Math.ceil(-Math.log(Q)/Math.LN10));return Math.round(Q*le)/le}(Z),$*Z}(a),I=T/a;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==p?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:p}).format(T):`${T}&nbsp;${Lh[p]}`,this._container.style.width=b*I+"px"})}onAdd(b){return this._map=b,this._language=b.getLanguage(),this._container=Oe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",b.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(b){this._language=b,this._update()}setUnit(b){this.options.unit=b,this._update()}},FullscreenControl:class{constructor(b){this._fullscreen=!1,b&&b.container&&(b.container instanceof e.window.HTMLElement?this._container=b.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=Oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const b=this._fullscreenButton=Oe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Oe("span","mapboxgl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",b)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(b){super(),this.options=e.extend(Object.create(Xo),b),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(b&&b.className?b.className.trim().split(/\s+/):[])}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&b.on("preclick",this._onClose),this.options.closeOnMove&&b.on("move",this._onClose),b.on("remove",this.remove),this._update(),b._addPopup(this),this._focusFirstElement(),this._trackPointer?(b.on("mousemove",this._onMouseEvent),b.on("mouseup",this._onMouseEvent),b._canvasContainer.classList.add("mapboxgl-track-pointer")):b.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const b=this._map;return b&&(b.off("move",this._update),b.off("move",this._onClose),b.off("preclick",this._onClose),b.off("click",this._onClose),b.off("remove",this.remove),b.off("mousemove",this._onMouseEvent),b.off("mouseup",this._onMouseEvent),b.off("drag",this._onMouseEvent),b._canvasContainer&&b._canvasContainer.classList.remove("mapboxgl-track-pointer"),b._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(b){this._lngLat=e.LngLat.convert(b),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const b=this._map;return b&&(b.off("move",this._update),b.on("mousemove",this._onMouseEvent),b.on("drag",this._onMouseEvent),b._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(e.window.document.createTextNode(b))}setHTML(b){const a=e.window.document.createDocumentFragment(),p=e.window.document.createElement("body");let T;for(p.innerHTML=b;T=p.firstChild,T;)a.appendChild(T);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=Oe("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(b),this.options.closeButton){const p=this._closeButton=Oe("button","mapboxgl-popup-close-button",a);p.type="button",p.setAttribute("aria-label","Close popup"),p.setAttribute("aria-hidden","true"),p.innerHTML="&#215;",p.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(b){return this._classList.add(b),this._updateClassList(),this}removeClassName(b){return this._classList.delete(b),this._updateClassList(),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){let a;return this._classList.delete(b)?a=!1:(this._classList.add(b),a=!0),this._updateClassList(),a}_onMouseEvent(b){this._update(b.point)}_getAnchor(b){if(this.options.anchor)return this.options.anchor;const a=this._map,p=this._container,T=this._pos;if(!a||!p||!T)return"bottom";const I=p.offsetWidth,z=p.offsetHeight,$=T.x<I/2,Z=T.x>a.transform.width-I/2;if(T.y+b<z)return $?"top-left":Z?"top-right":"top";if(T.y>a.transform.height-z){if($)return"bottom-left";if(Z)return"bottom-right"}return $?"left":Z?"right":"bottom"}_updateClassList(){const b=this._container;if(!b)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),b.className=a.join(" ")}_update(b){const a=this._map,p=this._content;if(!a||!this._lngLat&&!this._trackPointer||!p)return;let T=this._container;if(T||(T=this._container=Oe("div","mapboxgl-popup",a.getContainer()),this._tip=Oe("div","mapboxgl-popup-tip",T),T.appendChild(p)),this.options.maxWidth&&T.style.maxWidth!==this.options.maxWidth&&(T.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=kl(this._lngLat,this._pos,a.transform)),!this._trackPointer||b){const I=this._pos=this._trackPointer&&b?b:a.project(this._lngLat),z=Yc(this.options.offset),$=this._anchor=this._getAnchor(z.y),Z=Yc(this.options.offset,$),Q=I.add(Z).round();a._requestDomTask(()=>{this._container&&$&&(this._container.style.transform=`${rs[$]} translate(${Q.x}px,${Q.y}px)`)})}if(!this._marker&&a._showingGlobe()){const I=e.isLngLatBehindGlobe(a.transform,this._lngLat)?0:1;this._setOpacity(I)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(hp);b&&b.focus()}_onClose(){this.remove()}_setOpacity(b){this._container&&(this._container.style.opacity=`${b}`),this._content&&(this._content.style.pointerEvents=b?"auto":"none")}},Marker:an,Style:lr,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Fa,Evented:e.Evented,config:e.config,prewarm:function(){Qi().acquire(pi)},clearPrewarmedResources:function(){const b=Si;b&&(b.isPreloaded()&&1===b.numActive()?(b.release(pi),Si=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(b){e.config.ACCESS_TOKEN=b},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(b){e.config.API_URL=b},get workerCount(){return si.workerCount},set workerCount(b){si.workerCount=b},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(b){e.config.MAX_PARALLEL_IMAGE_REQUESTS=b},clearStorage(b){e.clearTileCache(b)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return xc}),A}()},1472:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{u:()=>St});var A=Ot(1364);let Re,sn=1;const e={};function Y(pt){return pt in e&&(delete e[pt],!0)}const Ae={setImmediate(pt){const yt=sn++;return e[yt]=!0,Re||(Re=Promise.resolve()),Re.then(()=>Y(yt)&&pt()),yt},clearImmediate(pt){Y(pt)}},{setImmediate:Ee,clearImmediate:Oe}=Ae,Ye={setImmediate(...pt){const{delegate:yt}=Ye;return(yt?.setImmediate||Ee)(...pt)},clearImmediate(pt){const{delegate:yt}=Ye;return(yt?.clearImmediate||Oe)(pt)},delegate:void 0};var et=Ot(9816);const St=new class dt extends et.k{flush(yt){this._active=!0;const Qt=this._scheduled;this._scheduled=void 0;const{actions:Ve}=this;let Zt;yt=yt||Ve.shift();do{if(Zt=yt.execute(yt.state,yt.delay))break}while((yt=Ve[0])&&yt.id===Qt&&Ve.shift());if(this._active=!1,Zt){for(;(yt=Ve[0])&&yt.id===Qt&&Ve.shift();)yt.unsubscribe();throw Zt}}}(class Xe extends A.m{constructor(yt,Qt){super(yt,Qt),this.scheduler=yt,this.work=Qt}requestAsyncId(yt,Qt,Ve=0){return null!==Ve&&Ve>0?super.requestAsyncId(yt,Qt,Ve):(yt.actions.push(this),yt._scheduled||(yt._scheduled=Ye.setImmediate(yt.flush.bind(yt,void 0))))}recycleAsyncId(yt,Qt,Ve=0){var Zt;if(null!=Ve?Ve>0:this.delay>0)return super.recycleAsyncId(yt,Qt,Ve);const{actions:ei}=yt;null!=Qt&&(null===(Zt=ei[ei.length-1])||void 0===Zt?void 0:Zt.id)!==Qt&&(Ye.clearImmediate(Qt),yt._scheduled===Qt&&(yt._scheduled=void 0))}})},3756:function(Qs){Qs.exports=function(){"use strict";function Lr(xe,q,re){return q=Ye(q),function dt(xe,q){if(q&&("object"==typeof q||"function"==typeof q))return q;if(void 0!==q)throw new TypeError("Derived constructors may only return object or undefined");return function et(xe){if(void 0===xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe}(xe)}(xe,A()?Reflect.construct(q,re||[],Ye(xe).constructor):q.apply(xe,re))}function A(){try{var xe=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A=function(){return!!xe})()}function e(xe){var q=function Re(xe,q){if("object"!=typeof xe||!xe)return xe;var re=xe[Symbol.toPrimitive];if(void 0!==re){var Ce=re.call(xe,q||"default");if("object"!=typeof Ce)return Ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===q?String:Number)(xe)}(xe,"string");return"symbol"==typeof q?q:String(q)}function Y(xe){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(q){return typeof q}:function(q){return q&&"function"==typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q})(xe)}function Ae(xe,q){if(!(xe instanceof q))throw new TypeError("Cannot call a class as a function")}function ke(xe,q){for(var re=0;re<q.length;re++){var Ce=q[re];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(xe,e(Ce.key),Ce)}}function Ee(xe,q,re){return q&&ke(xe.prototype,q),re&&ke(xe,re),Object.defineProperty(xe,"prototype",{writable:!1}),xe}function Ye(xe){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(re){return re.__proto__||Object.getPrototypeOf(re)})(xe)}function Xe(xe,q){return(Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ce,Dt){return Ce.__proto__=Dt,Ce})(xe,q)}function it(){return it=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(q,re,Ce){var Dt=function St(xe,q){for(;!Object.prototype.hasOwnProperty.call(xe,q)&&null!==(xe=Ye(xe)););return xe}(q,re);if(Dt){var Ei=Object.getOwnPropertyDescriptor(Dt,re);return Ei.get?Ei.get.call(arguments.length<3?q:Ce):Ei.value}},it.apply(this,arguments)}function pt(xe,q){return function Ve(xe){if(Array.isArray(xe))return xe}(xe)||function sn(xe,q){var re=null==xe?null:typeof Symbol<"u"&&xe[Symbol.iterator]||xe["@@iterator"];if(null!=re){var Ce,Dt,Ei,bn,mr=[],Er=!0,ws=!1;try{if(Ei=(re=re.call(xe)).next,0===q){if(Object(re)!==re)return;Er=!1}else for(;!(Er=(Ce=Ei.call(re)).done)&&(mr.push(Ce.value),mr.length!==q);Er=!0);}catch(Ys){ws=!0,Dt=Ys}finally{try{if(!Er&&null!=re.return&&(bn=re.return(),Object(bn)!==bn))return}finally{if(ws)throw Dt}}return mr}}(xe,q)||ei(xe,q)||function Yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(xe){return function Qt(xe){if(Array.isArray(xe))return rt(xe)}(xe)||function Zt(xe){if(typeof Symbol<"u"&&null!=xe[Symbol.iterator]||null!=xe["@@iterator"])return Array.from(xe)}(xe)||ei(xe)||function Kt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(xe,q){if(xe){if("string"==typeof xe)return rt(xe,q);var re=Object.prototype.toString.call(xe).slice(8,-1);if("Object"===re&&xe.constructor&&(re=xe.constructor.name),"Map"===re||"Set"===re)return Array.from(xe);if("Arguments"===re||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re))return rt(xe,q)}}function rt(xe,q){(null==q||q>xe.length)&&(q=xe.length);for(var re=0,Ce=new Array(q);re<q;re++)Ce[re]=xe[re];return Ce}function Nt(xe,q){return function qt(xe,q){return q.get?q.get.call(xe):q.value}(xe,Vt(xe,q,"get"))}function ct(xe,q,re){return function ri(xe,q,re){if(q.set)q.set.call(xe,re);else{if(!q.writable)throw new TypeError("attempted to set read only private field");q.value=re}}(xe,Vt(xe,q,"set"),re),re}function Vt(xe,q,re){if(!q.has(xe))throw new TypeError("attempted to "+re+" private field on non-instance");return q.get(xe)}function ai(xe,q,re){(function Li(xe,q){if(q.has(xe))throw new TypeError("Cannot initialize the same private elements twice on an object")})(xe,q),q.set(xe,re)}var Mi={},mn=function(q){return new Promise(function(re){if(!q)return re();var Ce=window.scrollX,Dt=window.scrollY;Mi.restoreFocusTimeout=setTimeout(function(){Mi.previousActiveElement instanceof HTMLElement?(Mi.previousActiveElement.focus(),Mi.previousActiveElement=null):document.body&&document.body.focus(),re()},100),window.scrollTo(Ce,Dt)})},jt=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(xe,q){return xe[q]="swal2-"+q,xe},{}),qi=["success","warning","info","question","error"].reduce(function(xe,q){return xe[q]="swal2-"+q,xe},{}),Hn="SweetAlert2:",Rn=function(q){return q.charAt(0).toUpperCase()+q.slice(1)},xn=function(q){console.warn("".concat(Hn," ").concat("object"===Y(q)?q.join(" "):q))},Pi=function(q){console.error("".concat(Hn," ").concat(q))},gr=[],qn=function(q,re){!function(q){gr.includes(q)||(gr.push(q),xn(q))}('"'.concat(q,'" is deprecated and will be removed in the next major release. Please use "').concat(re,'" instead.'))},hn=function(q){return"function"==typeof q?q():q},Ui=function(q){return q&&"function"==typeof q.toPromise},cn=function(q){return Ui(q)?q.toPromise():Promise.resolve(q)},Vi=function(q){return q&&Promise.resolve(q)===q},Oi=function(){return document.body.querySelector(".".concat(jt.container))},Bn=function(q){var re=Oi();return re?re.querySelector(q):null},$i=function(q){return Bn(".".concat(q))},gi=function(){return $i(jt.popup)},un=function(){return $i(jt.icon)},Tr=function(){return $i(jt.title)},kr=function(){return $i(jt["html-container"])},xr=function(){return $i(jt.image)},_r=function(){return $i(jt["progress-steps"])},ir=function(){return $i(jt["validation-message"])},yn=function(){return Bn(".".concat(jt.actions," .").concat(jt.confirm))},qr=function(){return Bn(".".concat(jt.actions," .").concat(jt.cancel))},Sr=function(){return Bn(".".concat(jt.actions," .").concat(jt.deny))},Kn=function(){return Bn(".".concat(jt.loader))},fr=function(){return $i(jt.actions)},sr=function(){return $i(jt.footer)},vr=function(){return $i(jt["timer-progress-bar"])},Yr=function(){return $i(jt.close)},De=function(){var q=gi();if(!q)return[];var re=q.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),Ce=Array.from(re).sort(function(bn,mr){var Er=parseInt(bn.getAttribute("tabindex")||"0"),ws=parseInt(mr.getAttribute("tabindex")||"0");return Er>ws?1:Er<ws?-1:0}),Dt=q.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),Ei=Array.from(Dt).filter(function(bn){return"-1"!==bn.getAttribute("tabindex")});return yt(new Set(Ce.concat(Ei))).filter(function(bn){return Rt(bn)})},ze=function(){return Ht(document.body,jt.shown)&&!Ht(document.body,jt["toast-shown"])&&!Ht(document.body,jt["no-backdrop"])},at=function(){var q=gi();return!!q&&Ht(q,jt.toast)},It=function(q,re){if(q.textContent="",re){var Dt=(new DOMParser).parseFromString(re,"text/html"),Ei=Dt.querySelector("head");Ei&&Array.from(Ei.childNodes).forEach(function(mr){q.appendChild(mr)});var bn=Dt.querySelector("body");bn&&Array.from(bn.childNodes).forEach(function(mr){mr instanceof HTMLVideoElement||mr instanceof HTMLAudioElement?q.appendChild(mr.cloneNode(!0)):q.appendChild(mr)})}},Ht=function(q,re){if(!re)return!1;for(var Ce=re.split(/\s+/),Dt=0;Dt<Ce.length;Dt++)if(!q.classList.contains(Ce[Dt]))return!1;return!0},Ie=function(q,re,Ce){if(function(q,re){Array.from(q.classList).forEach(function(Ce){!Object.values(jt).includes(Ce)&&!Object.values(qi).includes(Ce)&&!Object.values(re.showClass||{}).includes(Ce)&&q.classList.remove(Ce)})}(q,re),re.customClass&&re.customClass[Ce]){if("string"!=typeof re.customClass[Ce]&&!re.customClass[Ce].forEach)return void xn("Invalid type of customClass.".concat(Ce,'! Expected string or iterable object, got "').concat(Y(re.customClass[Ce]),'"'));Mt(q,re.customClass[Ce])}},He=function(q,re){if(!re)return null;switch(re){case"select":case"textarea":case"file":return q.querySelector(".".concat(jt.popup," > .").concat(jt[re]));case"checkbox":return q.querySelector(".".concat(jt.popup," > .").concat(jt.checkbox," input"));case"radio":return q.querySelector(".".concat(jt.popup," > .").concat(jt.radio," input:checked"))||q.querySelector(".".concat(jt.popup," > .").concat(jt.radio," input:first-child"));case"range":return q.querySelector(".".concat(jt.popup," > .").concat(jt.range," input"));default:return q.querySelector(".".concat(jt.popup," > .").concat(jt.input))}},Pe=function(q){if(q.focus(),"file"!==q.type){var re=q.value;q.value="",q.value=re}},bt=function(q,re,Ce){!q||!re||("string"==typeof re&&(re=re.split(/\s+/).filter(Boolean)),re.forEach(function(Dt){Array.isArray(q)?q.forEach(function(Ei){Ce?Ei.classList.add(Dt):Ei.classList.remove(Dt)}):Ce?q.classList.add(Dt):q.classList.remove(Dt)}))},Mt=function(q,re){bt(q,re,!0)},xi=function(q,re){bt(q,re,!1)},Ke=function(q,re){for(var Ce=Array.from(q.children),Dt=0;Dt<Ce.length;Dt++){var Ei=Ce[Dt];if(Ei instanceof HTMLElement&&Ht(Ei,re))return Ei}},ot=function(q,re,Ce){Ce==="".concat(parseInt(Ce))&&(Ce=parseInt(Ce)),Ce||0===parseInt(Ce)?q.style.setProperty(re,"number"==typeof Ce?"".concat(Ce,"px"):Ce):q.style.removeProperty(re)},Ue=function(q){q&&(q.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},je=function(q){q&&(q.style.display="none")},Le=function(q){var re=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";q&&new MutationObserver(function(){ht(q,q.innerHTML,re)}).observe(q,{childList:!0,subtree:!0})},Fe=function(q,re,Ce,Dt){var Ei=q.querySelector(re);Ei&&Ei.style.setProperty(Ce,Dt)},ht=function(q,re){re?Ue(q,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):je(q)},Rt=function(q){return!(!q||!(q.offsetWidth||q.offsetHeight||q.getClientRects().length))},si=function(q){return q.scrollHeight>q.clientHeight},Si=function(q){var re=window.getComputedStyle(q),Ce=parseFloat(re.getPropertyValue("animation-duration")||"0"),Dt=parseFloat(re.getPropertyValue("transition-duration")||"0");return Ce>0||Dt>0},Qi=function(q){var re=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Ce=vr();Ce&&Rt(Ce)&&(re&&(Ce.style.transition="none",Ce.style.width="100%"),setTimeout(function(){Ce.style.transition="width ".concat(q/1e3,"s linear"),Ce.style.width="0%"},10))},Tn=function(){return typeof window>"u"||typeof document>"u"},Dn='\n <div aria-labelledby="'.concat(jt.title,'" aria-describedby="').concat(jt["html-container"],'" class="').concat(jt.popup,'" tabindex="-1">\n   <button type="button" class="').concat(jt.close,'"></button>\n   <ul class="').concat(jt["progress-steps"],'"></ul>\n   <div class="').concat(jt.icon,'"></div>\n   <img class="').concat(jt.image,'" />\n   <h2 class="').concat(jt.title,'" id="').concat(jt.title,'"></h2>\n   <div class="').concat(jt["html-container"],'" id="').concat(jt["html-container"],'"></div>\n   <input class="').concat(jt.input,'" id="').concat(jt.input,'" />\n   <input type="file" class="').concat(jt.file,'" />\n   <div class="').concat(jt.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(jt.select,'" id="').concat(jt.select,'"></select>\n   <div class="').concat(jt.radio,'"></div>\n   <label class="').concat(jt.checkbox,'">\n     <input type="checkbox" id="').concat(jt.checkbox,'" />\n     <span class="').concat(jt.label,'"></span>\n   </label>\n   <textarea class="').concat(jt.textarea,'" id="').concat(jt.textarea,'"></textarea>\n   <div class="').concat(jt["validation-message"],'" id="').concat(jt["validation-message"],'"></div>\n   <div class="').concat(jt.actions,'">\n     <div class="').concat(jt.loader,'"></div>\n     <button type="button" class="').concat(jt.confirm,'"></button>\n     <button type="button" class="').concat(jt.deny,'"></button>\n     <button type="button" class="').concat(jt.cancel,'"></button>\n   </div>\n   <div class="').concat(jt.footer,'"></div>\n   <div class="').concat(jt["timer-progress-bar-container"],'">\n     <div class="').concat(jt["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),tt=function(){Mi.currentInstance.resetValidationMessage()},c=function(q){var re=function(){var q=Oi();return!!q&&(q.remove(),xi([document.documentElement,document.body],[jt["no-backdrop"],jt["toast-shown"],jt["has-column"]]),!0)}();if(Tn())Pi("SweetAlert2 requires document to initialize");else{var Ce=document.createElement("div");Ce.className=jt.container,re&&Mt(Ce,jt["no-transition"]),It(Ce,Dn);var Dt=function(q){return"string"==typeof q?document.querySelector(q):q}(q.target);Dt.appendChild(Ce),function(q){var re=gi();re.setAttribute("role",q.toast?"alert":"dialog"),re.setAttribute("aria-live",q.toast?"polite":"assertive"),q.toast||re.setAttribute("aria-modal","true")}(q),function(q){"rtl"===window.getComputedStyle(q).direction&&Mt(Oi(),jt.rtl)}(Dt),function(){var q=gi(),re=Ke(q,jt.input),Ce=Ke(q,jt.file),Dt=q.querySelector(".".concat(jt.range," input")),Ei=q.querySelector(".".concat(jt.range," output")),bn=Ke(q,jt.select),mr=q.querySelector(".".concat(jt.checkbox," input")),Er=Ke(q,jt.textarea);re.oninput=tt,Ce.onchange=tt,bn.onchange=tt,mr.onchange=tt,Er.oninput=tt,Dt.oninput=function(){tt(),Ei.value=Dt.value},Dt.onchange=function(){tt(),Ei.value=Dt.value}}()}},g=function(q,re){q instanceof HTMLElement?re.appendChild(q):"object"===Y(q)?y(q,re):q&&It(re,q)},y=function(q,re){q.jquery?x(re,q):It(re,q.toString())},x=function(q,re){if(q.textContent="",0 in re)for(var Ce=0;Ce in re;Ce++)q.appendChild(re[Ce].cloneNode(!0));else q.appendChild(re.cloneNode(!0))},k=function(){if(Tn())return!1;var xe=document.createElement("div");return typeof xe.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof xe.style.animation<"u"&&"animationend"}(),M=function(q,re){var Ce=fr(),Dt=Kn();!Ce||!Dt||(re.showConfirmButton||re.showDenyButton||re.showCancelButton?Ue(Ce):je(Ce),Ie(Ce,re,"actions"),function R(xe,q,re){var Ce=yn(),Dt=Sr(),Ei=qr();!Ce||!Dt||!Ei||(U(Ce,"confirm",re),U(Dt,"deny",re),U(Ei,"cancel",re),function j(xe,q,re,Ce){Ce.buttonsStyling?(Mt([xe,q,re],jt.styled),Ce.confirmButtonColor&&(xe.style.backgroundColor=Ce.confirmButtonColor,Mt(xe,jt["default-outline"])),Ce.denyButtonColor&&(q.style.backgroundColor=Ce.denyButtonColor,Mt(q,jt["default-outline"])),Ce.cancelButtonColor&&(re.style.backgroundColor=Ce.cancelButtonColor,Mt(re,jt["default-outline"]))):xi([xe,q,re],jt.styled)}(Ce,Dt,Ei,re),re.reverseButtons&&(re.toast?(xe.insertBefore(Ei,Ce),xe.insertBefore(Dt,Ce)):(xe.insertBefore(Ei,q),xe.insertBefore(Dt,q),xe.insertBefore(Ce,q))))}(Ce,Dt,re),It(Dt,re.loaderHtml||""),Ie(Dt,re,"loader"))};function U(xe,q,re){var Ce=Rn(q);ht(xe,re["show".concat(Ce,"Button")],"inline-block"),It(xe,re["".concat(q,"ButtonText")]||""),xe.setAttribute("aria-label",re["".concat(q,"ButtonAriaLabel")]||""),xe.className=jt[q],Ie(xe,re,"".concat(q,"Button"))}var ee=function(q,re){var Ce=Oi();Ce&&(function ae(xe,q){"string"==typeof q?xe.style.background=q:q||Mt([document.documentElement,document.body],jt["no-backdrop"])}(Ce,re.backdrop),function de(xe,q){q&&(q in jt?Mt(xe,jt[q]):(xn('The "position" parameter is not valid, defaulting to "center"'),Mt(xe,jt.center)))}(Ce,re.position),function ve(xe,q){q&&Mt(xe,jt["grow-".concat(q)])}(Ce,re.grow),Ie(Ce,re,"container"))};var he={innerParams:new WeakMap,domCache:new WeakMap},be=["input","file","range","select","radio","checkbox","textarea"],K=function(q){if(q.input){if(!hi[q.input])return void Pi("Unexpected type of input! Expected ".concat(Object.keys(hi).join(" | "),', got "').concat(q.input,'"'));var re=kt(q.input),Ce=hi[q.input](re,q);Ue(re),q.inputAutoFocus&&setTimeout(function(){Pe(Ce)})}},_e=function(q,re){var Ce=He(gi(),q);if(Ce)for(var Dt in function(q){for(var re=0;re<q.attributes.length;re++){var Ce=q.attributes[re].name;["id","type","value","style"].includes(Ce)||q.removeAttribute(Ce)}}(Ce),re)Ce.setAttribute(Dt,re[Dt])},Me=function(q){var re=kt(q.input);"object"===Y(q.customClass)&&Mt(re,q.customClass.input)},$e=function(q,re){(!q.placeholder||re.inputPlaceholder)&&(q.placeholder=re.inputPlaceholder)},wt=function(q,re,Ce){if(Ce.inputLabel){var Dt=document.createElement("label"),Ei=jt["input-label"];Dt.setAttribute("for",q.id),Dt.className=Ei,"object"===Y(Ce.customClass)&&Mt(Dt,Ce.customClass.inputLabel),Dt.innerText=Ce.inputLabel,re.insertAdjacentElement("beforebegin",Dt)}},kt=function(q){return Ke(gi(),jt[q]||jt.input)},Wt=function(q,re){["string","number"].includes(Y(re))?q.value="".concat(re):Vi(re)||xn('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(Y(re),'"'))},hi={};hi.text=hi.email=hi.password=hi.number=hi.tel=hi.url=hi.search=hi.date=hi["datetime-local"]=hi.time=hi.week=hi.month=function(xe,q){return Wt(xe,q.inputValue),wt(xe,xe,q),$e(xe,q),xe.type=q.input,xe},hi.file=function(xe,q){return wt(xe,xe,q),$e(xe,q),xe},hi.range=function(xe,q){var re=xe.querySelector("input"),Ce=xe.querySelector("output");return Wt(re,q.inputValue),re.type=q.input,Wt(Ce,q.inputValue),wt(re,xe,q),xe},hi.select=function(xe,q){if(xe.textContent="",q.inputPlaceholder){var re=document.createElement("option");It(re,q.inputPlaceholder),re.value="",re.disabled=!0,re.selected=!0,xe.appendChild(re)}return wt(xe,xe,q),xe},hi.radio=function(xe){return xe.textContent="",xe},hi.checkbox=function(xe,q){var re=He(gi(),"checkbox");re.value="1",re.checked=!!q.inputValue;var Ce=xe.querySelector("span");return It(Ce,q.inputPlaceholder),re},hi.textarea=function(xe,q){Wt(xe,q.inputValue),$e(xe,q),wt(xe,xe,q);return setTimeout(function(){if("MutationObserver"in window){var Ce=parseInt(window.getComputedStyle(gi()).width);new MutationObserver(function(){if(document.body.contains(xe)){var bn=xe.offsetWidth+(Dt=xe,parseInt(window.getComputedStyle(Dt).marginLeft)+parseInt(window.getComputedStyle(Dt).marginRight));bn>Ce?gi().style.width="".concat(bn,"px"):ot(gi(),"width",q.width)}var Dt}).observe(xe,{attributes:!0,attributeFilter:["style"]})}}),xe};var yi=function(q,re){var Ce=kr();Ce&&(Le(Ce),Ie(Ce,re,"htmlContainer"),re.html?(g(re.html,Ce),Ue(Ce,"block")):re.text?(Ce.textContent=re.text,Ue(Ce,"block")):je(Ce),function(q,re){var Ce=gi();if(Ce){var Dt=he.innerParams.get(q),Ei=!Dt||re.input!==Dt.input;be.forEach(function(bn){var mr=Ke(Ce,jt[bn]);mr&&(_e(bn,re.inputAttributes),mr.className=jt[bn],Ei&&je(mr))}),re.input&&(Ei&&K(re),Me(re))}}(q,re))},An=function(q,re){for(var Ce=0,Dt=Object.entries(qi);Ce<Dt.length;Ce++){var Ei=pt(Dt[Ce],2);re.icon!==Ei[0]&&xi(q,Ei[1])}Mt(q,re.icon&&qi[re.icon]),Pr(q,re),$n(),Ie(q,re,"icon")},$n=function(){var q=gi();if(q)for(var re=window.getComputedStyle(q).getPropertyValue("background-color"),Ce=q.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Dt=0;Dt<Ce.length;Dt++)Ce[Dt].style.backgroundColor=re},wr=function(q,re){if(re.icon||re.iconHtml){var Ce=q.innerHTML,Dt="";re.iconHtml?Dt=Rr(re.iconHtml):"success"===re.icon?(Dt='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',Ce=Ce.replace(/ style=".*?"/g,"")):"error"===re.icon?Dt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':re.icon&&(Dt=Rr({question:"?",warning:"!",info:"i"}[re.icon])),Ce.trim()!==Dt.trim()&&It(q,Dt)}},Pr=function(q,re){if(re.iconColor){q.style.color=re.iconColor,q.style.borderColor=re.iconColor;for(var Ce=0,Dt=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];Ce<Dt.length;Ce++)Fe(q,Dt[Ce],"background-color",re.iconColor);Fe(q,".swal2-success-ring","border-color",re.iconColor)}},Rr=function(q){return'<div class="'.concat(jt["icon-content"],'">').concat(q,"</div>")},Wr=function(q,re){var Ce=re.showClass||{};q.className="".concat(jt.popup," ").concat(Rt(q)?Ce.popup:""),re.toast?(Mt([document.documentElement,document.body],jt["toast-shown"]),Mt(q,jt.toast)):Mt(q,jt.modal),Ie(q,re,"popup"),"string"==typeof re.customClass&&Mt(q,re.customClass),re.icon&&Mt(q,jt["icon-".concat(re.icon)])},zr=function(q){var re=document.createElement("li");return Mt(re,jt["progress-step"]),It(re,q),re},qa=function(q){var re=document.createElement("li");return Mt(re,jt["progress-step-line"]),q.progressStepsDistance&&ot(re,"width",q.progressStepsDistance),re},Kr=function(q,re){(function(q,re){var Ce=Oi(),Dt=gi();if(Ce&&Dt){if(re.toast){ot(Ce,"width",re.width),Dt.style.width="100%";var Ei=Kn();Ei&&Dt.insertBefore(Ei,un())}else ot(Dt,"width",re.width);ot(Dt,"padding",re.padding),re.color&&(Dt.style.color=re.color),re.background&&(Dt.style.background=re.background),je(ir()),Wr(Dt,re)}})(0,re),ee(0,re),function(q,re){var Ce=_r();if(Ce){var Dt=re.progressSteps,Ei=re.currentProgressStep;if(!Dt||0===Dt.length||void 0===Ei)return void je(Ce);Ue(Ce),Ce.textContent="",Ei>=Dt.length&&xn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Dt.forEach(function(bn,mr){var Er=zr(bn);if(Ce.appendChild(Er),mr===Ei&&Mt(Er,jt["active-progress-step"]),mr!==Dt.length-1){var ws=qa(re);Ce.appendChild(ws)}})}}(0,re),function(q,re){var Ce=he.innerParams.get(q),Dt=un();if(Dt){if(Ce&&re.icon===Ce.icon)return wr(Dt,re),void An(Dt,re);if(!re.icon&&!re.iconHtml)return void je(Dt);if(re.icon&&-1===Object.keys(qi).indexOf(re.icon))return Pi('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(re.icon,'"')),void je(Dt);Ue(Dt),wr(Dt,re),An(Dt,re),Mt(Dt,re.showClass&&re.showClass.icon)}}(q,re),function(q,re){var Ce=xr();if(Ce){if(!re.imageUrl)return void je(Ce);Ue(Ce,""),Ce.setAttribute("src",re.imageUrl),Ce.setAttribute("alt",re.imageAlt||""),ot(Ce,"width",re.imageWidth),ot(Ce,"height",re.imageHeight),Ce.className=jt.image,Ie(Ce,re,"image")}}(0,re),function(q,re){var Ce=Tr();Ce&&(Le(Ce),ht(Ce,re.title||re.titleText,"block"),re.title&&g(re.title,Ce),re.titleText&&(Ce.innerText=re.titleText),Ie(Ce,re,"title"))}(0,re),function(q,re){var Ce=Yr();Ce&&(It(Ce,re.closeButtonHtml||""),Ie(Ce,re,"closeButton"),ht(Ce,re.showCloseButton),Ce.setAttribute("aria-label",re.closeButtonAriaLabel||""))}(0,re),yi(q,re),M(0,re),function(q,re){var Ce=sr();Ce&&(Le(Ce),ht(Ce,re.footer,"block"),re.footer&&g(re.footer,Ce),Ie(Ce,re,"footer"))}(0,re);var Ce=gi();"function"==typeof re.didRender&&Ce&&re.didRender(Ce)},Dl=function(){var q;return null===(q=yn())||void 0===q?void 0:q.click()},eo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Zl=function(q){q.keydownTarget&&q.keydownHandlerAdded&&(q.keydownTarget.removeEventListener("keydown",q.keydownHandler,{capture:q.keydownListenerCapture}),q.keydownHandlerAdded=!1)},zo=function(q,re){var Ce,Dt=De();if(Dt.length)return(q+=re)===Dt.length?q=0:-1===q&&(q=Dt.length-1),void Dt[q].focus();null===(Ce=gi())||void 0===Ce||Ce.focus()},dl=["ArrowRight","ArrowDown"],mc=["ArrowLeft","ArrowUp"],Rc=function(q,re,Ce){q&&(re.isComposing||229===re.keyCode||(q.stopKeydownPropagation&&re.stopPropagation(),"Enter"===re.key?pl(re,q):"Tab"===re.key?lr(re):[].concat(dl,mc).includes(re.key)?gc(re.key):"Escape"===re.key&&Bs(re,q,Ce)))},pl=function(q,re){if(hn(re.allowEnterKey)){var Ce=He(gi(),re.input);if(q.target&&Ce&&q.target instanceof HTMLElement&&q.target.outerHTML===Ce.outerHTML){if(["textarea","file"].includes(re.input))return;Dl(),q.preventDefault()}}},lr=function(q){for(var re=q.target,Ce=De(),Dt=-1,Ei=0;Ei<Ce.length;Ei++)if(re===Ce[Ei]){Dt=Ei;break}zo(Dt,q.shiftKey?-1:1),q.stopPropagation(),q.preventDefault()},gc=function(q){var re=fr(),Ce=yn(),Dt=Sr(),Ei=qr();if(re&&Ce&&Dt&&Ei&&(!(document.activeElement instanceof HTMLElement)||[Ce,Dt,Ei].includes(document.activeElement))){var mr=dl.includes(q)?"nextElementSibling":"previousElementSibling",Er=document.activeElement;if(Er){for(var ws=0;ws<re.children.length;ws++){if(!(Er=Er[mr]))return;if(Er instanceof HTMLButtonElement&&Rt(Er))break}Er instanceof HTMLButtonElement&&Er.focus()}}},Bs=function(q,re,Ce){hn(re.allowEscapeKey)&&(q.preventDefault(),Ce(eo.esc))},Ps={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Fo=function(){Array.from(document.body.children).forEach(function(re){re.hasAttribute("data-previous-aria-hidden")?(re.setAttribute("aria-hidden",re.getAttribute("data-previous-aria-hidden")||""),re.removeAttribute("data-previous-aria-hidden")):re.removeAttribute("aria-hidden")})},Ka=typeof window<"u"&&!!window.GestureEvent,Aa=function(){var re,q=Oi();q&&(q.ontouchstart=function(Ce){re=zc(Ce)},q.ontouchmove=function(Ce){re&&(Ce.preventDefault(),Ce.stopPropagation())})},zc=function(q){var re=q.target,Ce=Oi(),Dt=kr();return!(!Ce||!Dt||Al(q)||Bo(q)||re!==Ce&&(si(Ce)||!(re instanceof HTMLElement)||"INPUT"===re.tagName||"TEXTAREA"===re.tagName||si(Dt)&&Dt.contains(re)))},Al=function(q){return q.touches&&q.touches.length&&"stylus"===q.touches[0].touchType},Bo=function(q){return q.touches&&q.touches.length>1},Mr=null,au=function(q){null===Mr&&(document.body.scrollHeight>window.innerHeight||"scroll"===q)&&(Mr=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Mr+function(){var q=document.createElement("div");q.className=jt["scrollbar-measure"],document.body.appendChild(q);var re=q.getBoundingClientRect().width-q.clientWidth;return document.body.removeChild(q),re}(),"px"))};function ql(xe,q,re,Ce){at()?ya(xe,Ce):(mn(re).then(function(){return ya(xe,Ce)}),Zl(Mi)),Ka?(q.setAttribute("style","display:none !important"),q.removeAttribute("class"),q.innerHTML=""):q.remove(),ze()&&(null!==Mr&&(document.body.style.paddingRight="".concat(Mr,"px"),Mr=null),function(){if(Ht(document.body,jt.iosfix)){var q=parseInt(document.body.style.top,10);xi(document.body,jt.iosfix),document.body.style.top="",document.body.scrollTop=-1*q}}(),Fo()),function Ll(){xi([document.documentElement,document.body],[jt.shown,jt["height-auto"],jt["no-backdrop"],jt["toast-shown"]])}()}function Qr(xe){xe=dn(xe);var q=Ps.swalPromiseResolve.get(this),re=Ts(this);this.isAwaitingPromise?xe.isDismissed||(co(this),q(xe)):re&&q(xe)}var Ts=function(q){var re=gi();if(!re)return!1;var Ce=he.innerParams.get(q);if(!Ce||Ht(re,Ce.hideClass.popup))return!1;xi(re,Ce.showClass.popup),Mt(re,Ce.hideClass.popup);var Dt=Oi();return xi(Dt,Ce.showClass.backdrop),Mt(Dt,Ce.hideClass.backdrop),No(q,re,Ce),!0};function _o(xe){var q=Ps.swalPromiseReject.get(this);co(this),q&&q(xe)}var co=function(q){q.isAwaitingPromise&&(delete q.isAwaitingPromise,he.innerParams.get(q)||q._destroy())},dn=function(q){return typeof q>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},q)},No=function(q,re,Ce){var Dt=Oi(),Ei=k&&Si(re);"function"==typeof Ce.willClose&&Ce.willClose(re),Ei?vo(q,re,Dt,Ce.returnFocus,Ce.didClose):ql(q,Dt,Ce.returnFocus,Ce.didClose)},vo=function(q,re,Ce,Dt,Ei){k&&(Mi.swalCloseEventFinishedCallback=ql.bind(null,q,Ce,Dt,Ei),re.addEventListener(k,function(bn){bn.target===re&&(Mi.swalCloseEventFinishedCallback(),delete Mi.swalCloseEventFinishedCallback)}))},ya=function(q,re){setTimeout(function(){"function"==typeof re&&re.bind(q.params)(),q._destroy&&q._destroy()})},Or=function(q){var re=gi();if(re||new ec,re=gi()){var Ce=Kn();at()?je(un()):oa(re,q),Ue(Ce),re.setAttribute("data-loading","true"),re.setAttribute("aria-busy","true"),re.focus()}},oa=function(q,re){var Ce=fr(),Dt=Kn();!Ce||!Dt||(!re&&Rt(yn())&&(re=yn()),Ue(Ce),re&&(je(re),Dt.setAttribute("data-button-to-replace",re.className),Ce.insertBefore(Dt,re)),Mt([q,Ce],jt.loading))},Kl=function(q){return q.checked?1:0},La=function(q){return q.checked?q.value:null},Ds=function(q){return q.files&&q.files.length?null!==q.getAttribute("multiple")?q.files:q.files[0]:null},Cr=function(q,re){var Ce=gi();if(Ce){var Dt=function(bn){"select"===re.input?function xa(xe,q,re){var Ce=Ke(xe,jt.select);if(Ce){var Dt=function(bn,mr,Er){var ws=document.createElement("option");ws.value=Er,It(ws,mr),ws.selected=Yo(Er,re.inputValue),bn.appendChild(ws)};q.forEach(function(Ei){var bn=Ei[0],mr=Ei[1];if(Array.isArray(mr)){var Er=document.createElement("optgroup");Er.label=bn,Er.disabled=!1,Ce.appendChild(Er),mr.forEach(function(ws){return Dt(Er,ws[1],ws[0])})}else Dt(Ce,mr,bn)}),Ce.focus()}}(Ce,Mo(bn),re):"radio"===re.input&&function ba(xe,q,re){var Ce=Ke(xe,jt.radio);if(Ce){q.forEach(function(Ei){var bn=Ei[0],mr=Ei[1],Er=document.createElement("input"),ws=document.createElement("label");Er.type="radio",Er.name=jt.radio,Er.value=bn,Yo(bn,re.inputValue)&&(Er.checked=!0);var Ys=document.createElement("span");It(Ys,mr),Ys.className=jt.label,ws.appendChild(Er),ws.appendChild(Ys),Ce.appendChild(ws)});var Dt=Ce.querySelectorAll("input");Dt.length&&Dt[0].focus()}}(Ce,Mo(bn),re)};Ui(re.inputOptions)||Vi(re.inputOptions)?(Or(yn()),cn(re.inputOptions).then(function(Ei){q.hideLoading(),Dt(Ei)})):"object"===Y(re.inputOptions)?Dt(re.inputOptions):Pi("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(Y(re.inputOptions)))}},Pa=function(q,re){var Ce=q.getInput();Ce&&(je(Ce),cn(re.inputValue).then(function(Dt){Ce.value="".concat("number"===re.input?parseFloat(Dt)||0:Dt),Ue(Ce),Ce.focus(),q.hideLoading()}).catch(function(Dt){Pi("Error in inputValue promise: ".concat(Dt)),Ce.value="",Ue(Ce),Ce.focus(),q.hideLoading()}))};var Mo=function xe(q){var re=[];return q instanceof Map?q.forEach(function(Ce,Dt){var Ei=Ce;"object"===Y(Ei)&&(Ei=xe(Ei)),re.push([Dt,Ei])}):Object.keys(q).forEach(function(Ce){var Dt=q[Ce];"object"===Y(Dt)&&(Dt=xe(Dt)),re.push([Ce,Dt])}),re},Yo=function(q,re){return!!re&&re.toString()===q.toString()},Us=void 0,aa=function(q,re){var Ce=he.innerParams.get(q);if(Ce.input){var Dt=q.getInput(),Ei=function(q,re){var Ce=q.getInput();if(!Ce)return null;switch(re.input){case"checkbox":return Kl(Ce);case"radio":return La(Ce);case"file":return Ds(Ce);default:return re.inputAutoTrim?Ce.value.trim():Ce.value}}(q,Ce);Ce.inputValidator?Fc(q,Ei,re):Dt&&!Dt.checkValidity()?(q.enableButtons(),q.showValidationMessage(Ce.validationMessage||Dt.validationMessage)):"deny"===re?Ns(q,Ei):la(q,Ei)}else Pi('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Rn(re)))},Fc=function(q,re,Ce){var Dt=he.innerParams.get(q);q.disableInput(),Promise.resolve().then(function(){return cn(Dt.inputValidator(re,Dt.validationMessage))}).then(function(bn){q.enableButtons(),q.enableInput(),bn?q.showValidationMessage(bn):"deny"===Ce?Ns(q,re):la(q,re)})},Ns=function(q,re){var Ce=he.innerParams.get(q||Us);Ce.showLoaderOnDeny&&Or(Sr()),Ce.preDeny?(q.isAwaitingPromise=!0,Promise.resolve().then(function(){return cn(Ce.preDeny(re,Ce.validationMessage))}).then(function(Ei){!1===Ei?(q.hideLoading(),co(q)):q.close({isDenied:!0,value:typeof Ei>"u"?re:Ei})}).catch(function(Ei){return Os(q||Us,Ei)})):q.close({isDenied:!0,value:re})},Ol=function(q,re){q.close({isConfirmed:!0,value:re})},Os=function(q,re){q.rejectPromise(re)},la=function(q,re){var Ce=he.innerParams.get(q||Us);Ce.showLoaderOnConfirm&&Or(),Ce.preConfirm?(q.resetValidationMessage(),q.isAwaitingPromise=!0,Promise.resolve().then(function(){return cn(Ce.preConfirm(re,Ce.validationMessage))}).then(function(Ei){Rt(ir())||!1===Ei?(q.hideLoading(),co(q)):Ol(q,typeof Ei>"u"?re:Ei)}).catch(function(Ei){return Os(q||Us,Ei)})):Ol(q,re)};function wa(){var xe=he.innerParams.get(this);if(xe){var q=he.domCache.get(this);je(q.loader),at()?xe.icon&&Ue(un()):Do(q),xi([q.popup,q.actions],jt.loading),q.popup.removeAttribute("aria-busy"),q.popup.removeAttribute("data-loading"),q.confirmButton.disabled=!1,q.denyButton.disabled=!1,q.cancelButton.disabled=!1}}var Do=function(q){var re=q.popup.getElementsByClassName(q.loader.getAttribute("data-button-to-replace"));re.length?Ue(re[0],"inline-block"):!Rt(yn())&&!Rt(Sr())&&!Rt(qr())&&je(q.actions)};function ca(){var xe=he.innerParams.get(this),q=he.domCache.get(this);return q?He(q.popup,xe.input):null}function Rl(xe,q,re){var Ce=he.domCache.get(xe);q.forEach(function(Dt){Ce[Dt].disabled=re})}function $s(xe,q){var re=gi();if(re&&xe)if("radio"===xe.type)for(var Ce=re.querySelectorAll('[name="'.concat(jt.radio,'"]')),Dt=0;Dt<Ce.length;Dt++)Ce[Dt].disabled=q;else xe.disabled=q}function Ca(){Rl(this,["confirmButton","denyButton","cancelButton"],!1)}function Io(){Rl(this,["confirmButton","denyButton","cancelButton"],!0)}function Ja(){$s(this.getInput(),!1)}function Jl(){$s(this.getInput(),!0)}function uo(xe){var q=he.domCache.get(this),re=he.innerParams.get(this);It(q.validationMessage,xe),q.validationMessage.className=jt["validation-message"],re.customClass&&re.customClass.validationMessage&&Mt(q.validationMessage,re.customClass.validationMessage),Ue(q.validationMessage);var Ce=this.getInput();Ce&&(Ce.setAttribute("aria-invalid","true"),Ce.setAttribute("aria-describedby",jt["validation-message"]),Pe(Ce),Mt(Ce,jt.inputerror))}function _c(){var xe=he.domCache.get(this);xe.validationMessage&&je(xe.validationMessage);var q=this.getInput();q&&(q.removeAttribute("aria-invalid"),q.removeAttribute("aria-describedby"),xi(q,jt.inputerror))}var ho={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Bc=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ho={},Qa=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ta=function(q){return Object.prototype.hasOwnProperty.call(ho,q)},gl=function(q){return-1!==Bc.indexOf(q)},Is=function(q){return Ho[q]},_l=function(q){Ta(q)||xn('Unknown parameter "'.concat(q,'"'))},el=function(q){Qa.includes(q)&&xn('The parameter "'.concat(q,'" is incompatible with toasts'))},to=function(q){var re=Is(q);re&&qn(q,re)};function Ra(xe){var q=gi(),re=he.innerParams.get(this);if(q&&!Ht(q,re.hideClass.popup)){var Ce=tl(xe),Dt=Object.assign({},re,Ce);Kr(this,Dt),he.innerParams.set(this,Dt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,xe),writable:!1,enumerable:!0}})}else xn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var tl=function(q){var re={};return Object.keys(q).forEach(function(Ce){gl(Ce)?re[Ce]=q[Ce]:xn("Invalid parameter to update: ".concat(Ce))}),re};function zl(){var xe=he.domCache.get(this),q=he.innerParams.get(this);q?(xe.popup&&Mi.swalCloseEventFinishedCallback&&(Mi.swalCloseEventFinishedCallback(),delete Mi.swalCloseEventFinishedCallback),"function"==typeof q.didDestroy&&q.didDestroy(),ka(this)):vc(this)}var ka=function(q){vc(q),delete q.params,delete Mi.keydownHandler,delete Mi.keydownTarget,delete Mi.currentInstance},vc=function(q){q.isAwaitingPromise?(Ea(he,q),q.isAwaitingPromise=!0):(Ea(Ps,q),Ea(he,q),delete q.isAwaitingPromise,delete q.disableButtons,delete q.enableButtons,delete q.getInput,delete q.disableInput,delete q.enableInput,delete q.hideLoading,delete q.disableLoading,delete q.showValidationMessage,delete q.resetValidationMessage,delete q.close,delete q.closePopup,delete q.closeModal,delete q.closeToast,delete q.rejectPromise,delete q.update,delete q._destroy)},Ea=function(q,re){for(var Ce in q)q[Ce].delete(re)},Ql=Object.freeze({__proto__:null,_destroy:zl,close:Qr,closeModal:Qr,closePopup:Qr,closeToast:Qr,disableButtons:Io,disableInput:Jl,disableLoading:wa,enableButtons:Ca,enableInput:Ja,getInput:ca,handleAwaitingPromise:co,hideLoading:wa,rejectPromise:_o,resetValidationMessage:_c,showValidationMessage:uo,update:Ra}),Nc=function(q,re,Ce){re.popup.onclick=function(){q&&(po(q)||q.timer||q.input)||Ce(eo.close)}},po=function(q){return!!(q.showConfirmButton||q.showDenyButton||q.showCancelButton||q.showCloseButton)},Go=!1,yl=function(q){q.popup.onmousedown=function(){q.container.onmouseup=function(re){q.container.onmouseup=function(){},re.target===q.container&&(Go=!0)}}},Fl=function(q){q.container.onmousedown=function(){q.popup.onmouseup=function(re){q.popup.onmouseup=function(){},(re.target===q.popup||re.target instanceof HTMLElement&&q.popup.contains(re.target))&&(Go=!0)}}},xl=function(q,re,Ce){re.container.onclick=function(Dt){Go?Go=!1:Dt.target===re.container&&hn(q.allowOutsideClick)&&Ce(eo.backdrop)}},il=function(q){return q instanceof Element||function(q){return"object"===Y(q)&&q.jquery}(q)};var fo=function(){if(Mi.timeout)return function(){var q=vr();if(q){var re=parseInt(window.getComputedStyle(q).width);q.style.removeProperty("transition"),q.style.width="100%";var Ce=parseInt(window.getComputedStyle(q).width);q.style.width="".concat(re/Ce*100,"%")}}(),Mi.timeout.stop()},Bl=function(){if(Mi.timeout){var q=Mi.timeout.start();return Qi(q),q}},Fa=!1,Ma={};var xo=function(q){for(var re=q.target;re&&re!==document;re=re.parentNode)for(var Ce in Ma){var Dt=re.getAttribute(Ce);if(Dt)return void Ma[Ce].fire({template:Dt})}},Ba=Object.freeze({__proto__:null,argsToParams:function(q){var re={};return"object"!==Y(q[0])||il(q[0])?["title","html","icon"].forEach(function(Ce,Dt){var Ei=q[Dt];"string"==typeof Ei||il(Ei)?re[Ce]=Ei:void 0!==Ei&&Pi("Unexpected type of ".concat(Ce,'! Expected "string" or "Element", got ').concat(Y(Ei)))}):Object.assign(re,q[0]),re},bindClickHandler:function Lo(){Ma[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Fa||(document.body.addEventListener("click",xo),Fa=!0)},clickCancel:function(){var q;return null===(q=qr())||void 0===q?void 0:q.click()},clickConfirm:Dl,clickDeny:function(){var q;return null===(q=Sr())||void 0===q?void 0:q.click()},enableLoading:Or,fire:function Rs(){for(var q=arguments.length,re=new Array(q),Ce=0;Ce<q;Ce++)re[Ce]=arguments[Ce];return function Ot(xe,q,re){if(A())return Reflect.construct.apply(null,arguments);var Ce=[null];Ce.push.apply(Ce,q);var Dt=new(xe.bind.apply(xe,Ce));return re&&Xe(Dt,re.prototype),Dt}(this,re)},getActions:fr,getCancelButton:qr,getCloseButton:Yr,getConfirmButton:yn,getContainer:Oi,getDenyButton:Sr,getFocusableElements:De,getFooter:sr,getHtmlContainer:kr,getIcon:un,getIconContent:function(){return $i(jt["icon-content"])},getImage:xr,getInputLabel:function(){return $i(jt["input-label"])},getLoader:Kn,getPopup:gi,getProgressSteps:_r,getTimerLeft:function(){return Mi.timeout&&Mi.timeout.getTimerLeft()},getTimerProgressBar:vr,getTitle:Tr,getValidationMessage:ir,increaseTimer:function(q){if(Mi.timeout){var re=Mi.timeout.increase(q);return Qi(re,!0),re}},isDeprecatedParameter:Is,isLoading:function(){var q=gi();return!!q&&q.hasAttribute("data-loading")},isTimerRunning:function(){return!(!Mi.timeout||!Mi.timeout.isRunning())},isUpdatableParameter:gl,isValidParameter:Ta,isVisible:function(){return Rt(gi())},mixin:function za(xe){var q=function(re){function Ce(){return Ae(this,Ce),Lr(this,Ce,arguments)}return function Oe(xe,q){if("function"!=typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function");xe.prototype=Object.create(q&&q.prototype,{constructor:{value:xe,writable:!0,configurable:!0}}),Object.defineProperty(xe,"prototype",{writable:!1}),q&&Xe(xe,q)}(Ce,re),Ee(Ce,[{key:"_main",value:function(Ei,bn){return it(Ye(Ce.prototype),"_main",this).call(this,Ei,Object.assign({},xe,bn))}}]),Ce}(this);return q},resumeTimer:Bl,showLoading:Or,stopTimer:fo,toggleTimer:function(){var q=Mi.timeout;return q&&(q.running?fo():Bl())}}),xs=function(){function xe(q,re){Ae(this,xe),this.callback=q,this.remaining=re,this.running=!1,this.start()}return Ee(xe,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(re){var Ce=this.running;return Ce&&this.stop(),this.remaining+=re,Ce&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),xe}(),Ws=["swal-title","swal-html","swal-footer"],gs=function(q){var re={};return Array.from(q.querySelectorAll("swal-param")).forEach(function(Dt){h(Dt,["name","value"]);var Ei=Dt.getAttribute("name"),bn=Dt.getAttribute("value");re[Ei]="boolean"==typeof ho[Ei]?"false"!==bn:"object"===Y(ho[Ei])?JSON.parse(bn):bn}),re},ts=function(q){var re={};return Array.from(q.querySelectorAll("swal-function-param")).forEach(function(Dt){var Ei=Dt.getAttribute("name"),bn=Dt.getAttribute("value");re[Ei]=new Function("return ".concat(bn))()}),re},wl=function(q){var re={};return Array.from(q.querySelectorAll("swal-button")).forEach(function(Dt){h(Dt,["type","color","aria-label"]);var Ei=Dt.getAttribute("type");re["".concat(Ei,"ButtonText")]=Dt.innerHTML,re["show".concat(Rn(Ei),"Button")]=!0,Dt.hasAttribute("color")&&(re["".concat(Ei,"ButtonColor")]=Dt.getAttribute("color")),Dt.hasAttribute("aria-label")&&(re["".concat(Ei,"ButtonAriaLabel")]=Dt.getAttribute("aria-label"))}),re},bo=function(q){var re={},Ce=q.querySelector("swal-image");return Ce&&(h(Ce,["src","width","height","alt"]),Ce.hasAttribute("src")&&(re.imageUrl=Ce.getAttribute("src")),Ce.hasAttribute("width")&&(re.imageWidth=Ce.getAttribute("width")),Ce.hasAttribute("height")&&(re.imageHeight=Ce.getAttribute("height")),Ce.hasAttribute("alt")&&(re.imageAlt=Ce.getAttribute("alt"))),re},wo=function(q){var re={},Ce=q.querySelector("swal-icon");return Ce&&(h(Ce,["type","color"]),Ce.hasAttribute("type")&&(re.icon=Ce.getAttribute("type")),Ce.hasAttribute("color")&&(re.iconColor=Ce.getAttribute("color")),re.iconHtml=Ce.innerHTML),re},Xs=function(q){var re={},Ce=q.querySelector("swal-input");Ce&&(h(Ce,["type","label","placeholder","value"]),re.input=Ce.getAttribute("type")||"text",Ce.hasAttribute("label")&&(re.inputLabel=Ce.getAttribute("label")),Ce.hasAttribute("placeholder")&&(re.inputPlaceholder=Ce.getAttribute("placeholder")),Ce.hasAttribute("value")&&(re.inputValue=Ce.getAttribute("value")));var Dt=Array.from(q.querySelectorAll("swal-input-option"));return Dt.length&&(re.inputOptions={},Dt.forEach(function(Ei){h(Ei,["value"]);var bn=Ei.getAttribute("value");re.inputOptions[bn]=Ei.innerHTML})),re},jr=function(q,re){var Ce={};for(var Dt in re){var Ei=re[Dt],bn=q.querySelector(Ei);bn&&(h(bn,[]),Ce[Ei.replace(/^swal-/,"")]=bn.innerHTML.trim())}return Ce},en=function(q){var re=Ws.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(q.children).forEach(function(Ce){var Dt=Ce.tagName.toLowerCase();re.includes(Dt)||xn("Unrecognized element <".concat(Dt,">"))})},h=function(q,re){Array.from(q.attributes).forEach(function(Ce){-1===re.indexOf(Ce.name)&&xn(['Unrecognized attribute "'.concat(Ce.name,'" on <').concat(q.tagName.toLowerCase(),">."),"".concat(re.length?"Allowed attributes are: ".concat(re.join(", ")):"To set the value, use HTML within the element.")])})},V=function(q){var re=Oi(),Ce=gi();"function"==typeof q.willOpen&&q.willOpen(Ce);var Ei=window.getComputedStyle(document.body).overflowY;Pt(re,Ce,q),setTimeout(function(){fe(re,Ce)},10),ze()&&(Ne(re,q.scrollbarPadding,Ei),Array.from(document.body.children).forEach(function(re){re===Oi()||re.contains(Oi())||(re.hasAttribute("aria-hidden")&&re.setAttribute("data-previous-aria-hidden",re.getAttribute("aria-hidden")||""),re.setAttribute("aria-hidden","true"))})),!at()&&!Mi.previousActiveElement&&(Mi.previousActiveElement=document.activeElement),"function"==typeof q.didOpen&&setTimeout(function(){return q.didOpen(Ce)}),xi(re,jt["no-transition"])},te=function xe(q){var re=gi();if(q.target===re&&k){var Ce=Oi();re.removeEventListener(k,xe),Ce.style.overflowY="auto"}},fe=function(q,re){k&&Si(re)?(q.style.overflowY="hidden",re.addEventListener(k,te)):q.style.overflowY="auto"},Ne=function(q,re,Ce){(function(){if(Ka&&!Ht(document.body,jt.iosfix)){var q=document.body.scrollTop;document.body.style.top="".concat(-1*q,"px"),Mt(document.body,jt.iosfix),Aa()}})(),re&&"hidden"!==Ce&&au(Ce),setTimeout(function(){q.scrollTop=0})},Pt=function(q,re,Ce){Mt(q,Ce.showClass.backdrop),Ce.animation?(re.style.setProperty("opacity","0","important"),Ue(re,"grid"),setTimeout(function(){Mt(re,Ce.showClass.popup),re.style.removeProperty("opacity")},10)):Ue(re,"grid"),Mt([document.documentElement,document.body],jt.shown),Ce.heightAuto&&Ce.backdrop&&!Ce.toast&&Mt([document.documentElement,document.body],jt["height-auto"])},Jt={email:function(q,re){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(q)?Promise.resolve():Promise.resolve(re||"Invalid email address")},url:function(q,re){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(q)?Promise.resolve():Promise.resolve(re||"Invalid URL")}};function kn(xe){(function _i(xe){xe.inputValidator||("email"===xe.input&&(xe.inputValidator=Jt.email),"url"===xe.input&&(xe.inputValidator=Jt.url))})(xe),xe.showLoaderOnConfirm&&!xe.preConfirm&&xn("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Zi(xe){(!xe.target||"string"==typeof xe.target&&!document.querySelector(xe.target)||"string"!=typeof xe.target&&!xe.target.appendChild)&&(xn('Target parameter is not valid, defaulting to "body"'),xe.target="body")}(xe),"string"==typeof xe.title&&(xe.title=xe.title.split("\n").join("<br />")),c(xe)}var Ln,cr=new WeakMap,Ir=function(){function xe(){if(Ae(this,xe),ai(this,cr,{writable:!0,value:void 0}),!(typeof window>"u")){Ln=this;for(var q=arguments.length,re=new Array(q),Ce=0;Ce<q;Ce++)re[Ce]=arguments[Ce];var Dt=Object.freeze(this.constructor.argsToParams(re));this.params=Dt,this.isAwaitingPromise=!1,ct(this,cr,this._main(Ln.params))}}return Ee(xe,[{key:"_main",value:function(re){var Ce=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(q){for(var re in!1===q.backdrop&&q.allowOutsideClick&&xn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),q)_l(re),q.toast&&el(re),to(re)}(Object.assign({},Ce,re)),Mi.currentInstance){var Dt=Ps.swalPromiseResolve.get(Mi.currentInstance),Ei=Mi.currentInstance.isAwaitingPromise;Mi.currentInstance._destroy(),Ei||Dt({isDismissed:!0}),ze()&&Fo()}Mi.currentInstance=Ln;var bn=Zs(re,Ce);kn(bn),Object.freeze(bn),Mi.timeout&&(Mi.timeout.stop(),delete Mi.timeout),clearTimeout(Mi.restoreFocusTimeout);var mr=bs(Ln);return Kr(Ln,bn),he.innerParams.set(Ln,bn),Ms(Ln,mr,bn)}},{key:"then",value:function(re){return Nt(this,cr).then(re)}},{key:"finally",value:function(re){return Nt(this,cr).finally(re)}}]),xe}(),Ms=function(q,re,Ce){return new Promise(function(Dt,Ei){var bn=function(Er){q.close({isDismissed:!0,dismiss:Er})};Ps.swalPromiseResolve.set(q,Dt),Ps.swalPromiseReject.set(q,Ei),re.confirmButton.onclick=function(){!function(q){var re=he.innerParams.get(q);q.disableButtons(),re.input?aa(q,"confirm"):la(q,!0)}(q)},re.denyButton.onclick=function(){!function(q){var re=he.innerParams.get(q);q.disableButtons(),re.returnInputValueOnDeny?aa(q,"deny"):Ns(q,!1)}(q)},re.cancelButton.onclick=function(){!function(q,re){q.disableButtons(),re(eo.cancel)}(q,bn)},re.closeButton.onclick=function(){bn(eo.close)},function(q,re,Ce){q.toast?Nc(q,re,Ce):(yl(re),Fl(re),xl(q,re,Ce))}(Ce,re,bn),function(q,re,Ce){Zl(q),re.toast||(q.keydownHandler=function(Dt){return Rc(re,Dt,Ce)},q.keydownTarget=re.keydownListenerCapture?window:gi(),q.keydownListenerCapture=re.keydownListenerCapture,q.keydownTarget.addEventListener("keydown",q.keydownHandler,{capture:q.keydownListenerCapture}),q.keydownHandlerAdded=!0)}(Mi,Ce,bn),function(q,re){"select"===re.input||"radio"===re.input?Cr(q,re):["text","email","number","tel","textarea"].some(function(Ce){return Ce===re.input})&&(Ui(re.inputValue)||Vi(re.inputValue))&&(Or(yn()),Pa(q,re))}(q,Ce),V(Ce),ua(Mi,Ce,bn),ha(re,Ce),setTimeout(function(){re.container.scrollTop=0})})},Zs=function(q,re){var Ce=function(q){var re="string"==typeof q.template?document.querySelector(q.template):q.template;if(!re)return{};var Ce=re.content;return en(Ce),Object.assign(gs(Ce),ts(Ce),wl(Ce),bo(Ce),wo(Ce),Xs(Ce),jr(Ce,Ws))}(q),Dt=Object.assign({},ho,re,Ce,q);return Dt.showClass=Object.assign({},ho.showClass,Dt.showClass),Dt.hideClass=Object.assign({},ho.hideClass,Dt.hideClass),!1===Dt.animation&&(Dt.showClass={backdrop:"swal2-noanimation"},Dt.hideClass={}),Dt},bs=function(q){var re={popup:gi(),container:Oi(),actions:fr(),confirmButton:yn(),denyButton:Sr(),cancelButton:qr(),loader:Kn(),closeButton:Yr(),validationMessage:ir(),progressSteps:_r()};return he.domCache.set(q,re),re},ua=function(q,re,Ce){var Dt=vr();je(Dt),re.timer&&(q.timeout=new xs(function(){Ce("timer"),delete q.timeout},re.timer),re.timerProgressBar&&(Ue(Dt),Ie(Dt,re,"timerProgressBar"),setTimeout(function(){q.timeout&&q.timeout.running&&Qi(re.timer)})))},ha=function(q,re){if(!re.toast){if(!hn(re.allowEnterKey))return void yc();qs(q,re)||zo(-1,1)}},qs=function(q,re){return re.focusDeny&&Rt(q.denyButton)?(q.denyButton.focus(),!0):re.focusCancel&&Rt(q.cancelButton)?(q.cancelButton.focus(),!0):!(!re.focusConfirm||!Rt(q.confirmButton)||(q.confirmButton.focus(),0))},yc=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Cl=new Date,Uo=localStorage.getItem("swal-initiation");Uo?(Cl.getTime()-Date.parse(Uo))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var xe=document.createElement("audio");xe.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",xe.loop=!0,document.body.appendChild(xe),setTimeout(function(){xe.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Cl))}Ir.prototype.disableButtons=Io,Ir.prototype.enableButtons=Ca,Ir.prototype.getInput=ca,Ir.prototype.disableInput=Jl,Ir.prototype.enableInput=Ja,Ir.prototype.hideLoading=wa,Ir.prototype.disableLoading=wa,Ir.prototype.showValidationMessage=uo,Ir.prototype.resetValidationMessage=_c,Ir.prototype.close=Qr,Ir.prototype.closePopup=Qr,Ir.prototype.closeModal=Qr,Ir.prototype.closeToast=Qr,Ir.prototype.rejectPromise=_o,Ir.prototype.update=Ra,Ir.prototype._destroy=zl,Object.assign(Ir,Ba),Object.keys(Ql).forEach(function(xe){Ir[xe]=function(){var q;return Ln&&Ln[xe]?(q=Ln)[xe].apply(q,arguments):null}}),Ir.DismissReason=eo,Ir.version="11.10.6";var ec=Ir;return ec.default=ec,ec}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Lr,Ot){var A=Lr.createElement("style");if(Lr.getElementsByTagName("head")[0].appendChild(A),A.styleSheet)A.styleSheet.disabled||(A.styleSheet.cssText=Ot);else try{A.innerHTML=Ot}catch{A.innerText=Ot}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},7592:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{gb:()=>Gt});var A=Ot(4496),e=(Ot(4096),Ot(1472),Ot(1368));RegExp(/[&<>"']/g.source);const at=new A.UbH("ng-select-selection-model");function It(){return new Ht}class Ht{constructor(){this._selected=[]}get value(){return this._selected}select(He,Pe,bt){if(He.selected=!0,(!He.children||!Pe&&bt)&&this._selected.push(He),Pe)if(He.parent){const Mt=He.parent.children.length,xi=He.parent.children.filter(Ke=>Ke.selected).length;He.parent.selected=Mt===xi}else He.children&&(this._setChildrenSelectedState(He.children,!0),this._removeChildren(He),this._selected=bt&&this._activeChildren(He)?[...this._selected.filter(Mt=>Mt.parent!==He),He]:[...this._selected,...He.children.filter(Mt=>!Mt.disabled)])}unselect(He,Pe){if(this._selected=this._selected.filter(bt=>bt!==He),He.selected=!1,Pe)if(He.parent&&He.parent.selected){const bt=He.parent.children;this._removeParent(He.parent),this._removeChildren(He.parent),this._selected.push(...bt.filter(Mt=>Mt!==He&&!Mt.disabled)),He.parent.selected=!1}else He.children&&(this._setChildrenSelectedState(He.children,!1),this._removeChildren(He))}clear(He){this._selected=He?this._selected.filter(Pe=>Pe.disabled):[]}_setChildrenSelectedState(He,Pe){for(const bt of He)bt.disabled||(bt.selected=Pe)}_removeChildren(He){this._selected=[...this._selected.filter(Pe=>Pe.parent!==He),...He.children.filter(Pe=>Pe.parent===He&&Pe.disabled&&Pe.selected)]}_removeParent(He){this._selected=this._selected.filter(Pe=>Pe!==He)}_activeChildren(He){return He.children.every(Pe=>!Pe.disabled||Pe.selected)}}let Gt=(()=>{class Ie{static#e=this.\u0275fac=function(bt){return new(bt||Ie)};static#t=this.\u0275mod=A.a4G({type:Ie});static#i=this.\u0275inj=A.s3X({providers:[{provide:at,useValue:It}],imports:[e.MD]})}return Ie})()},2728:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{C:()=>et,Wz:()=>Ye,gD:()=>Xe});var A=Ot(4496),sn=Ot(1368),Re=Ot(4984);const e=["*"],Y=dt=>({"text-muted":dt});function Ae(dt,St){if(1&dt&&(A.I0R(0,"button",7),A.OEk(1),A.C$Y()),2&dt){const it=A.GaO();A.E7m("ngClass",A.S45(2,Y,it.isDisabled)),A.yG2(),A.oRS(" ",it.heading," ")}}const ke=[[["","accordion-heading",""]],"*"],Ee=["[accordion-heading]","*"];let Oe=(()=>{class dt{constructor(){this.closeOthers=!1,this.isAnimated=!1}static#e=this.\u0275fac=function(pt){return new(pt||dt)};static#t=this.\u0275prov=A.wxM({token:dt,factory:dt.\u0275fac,providedIn:"root"})}return dt})(),Ye=(()=>{class dt{constructor(it){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,it)}closeOtherPanels(it){this.closeOthers&&this.groups.forEach(pt=>{pt!==it&&(pt.isOpen=!1)})}addGroup(it){it.isAnimated=this.isAnimated,this.groups.push(it)}removeGroup(it){const pt=this.groups.indexOf(it);-1!==pt&&this.groups.splice(pt,1)}static#e=this.\u0275fac=function(pt){return new(pt||dt)(A.GI1(Oe))};static#t=this.\u0275cmp=A.In1({type:dt,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(pt,yt){2&pt&&A.e48("aria-multiselectable",yt.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:e,decls:1,vars:0,template:function(pt,yt){1&pt&&(A.kPM(),A._Xx(0))},encapsulation:2})}return dt})(),Xe=(()=>{class dt{get isOpen(){return this._isOpen}set isOpen(it){it!==this.isOpen&&(it&&this.accordion.closeOtherPanels(this),this._isOpen=it,Promise.resolve(null).then(()=>{this.isOpenChange.emit(it)}))}constructor(it){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new A._w7,this._isOpen=!1,this.accordion=it}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static#e=this.\u0275fac=function(pt){return new(pt||dt)(A.GI1(Ye))};static#t=this.\u0275cmp=A.In1({type:dt,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(pt,yt){2&pt&&A.eAK("panel-open",yt.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:Ee,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"ngClass","click"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(pt,yt){1&pt&&(A.kPM(ke),A.I0R(0,"div",0)(1,"div",1),A.qCj("click",function(){return yt.toggleOpen()}),A.I0R(2,"div",2)(3,"div",3),A.yuY(4,Ae,2,4,"button",4),A._Xx(5),A.C$Y()()(),A.I0R(6,"div",5)(7,"div",6),A._Xx(8,1),A.C$Y()()()),2&pt&&(A.E7m("ngClass",yt.panelClass),A.yG2(),A.E7m("ngClass",yt.isDisabled?"panel-disabled":"panel-enabled"),A.yG2(2),A.e48("aria-expanded",yt.isOpen),A.yG2(),A.E7m("ngIf",yt.heading),A.yG2(2),A.E7m("collapse",!yt.isOpen)("isAnimated",yt.isAnimated))},dependencies:[sn.QF,sn.u_,Re.m],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}return dt})(),et=(()=>{class dt{static forRoot(){return{ngModule:dt,providers:[]}}static#e=this.\u0275fac=function(pt){return new(pt||dt)};static#t=this.\u0275mod=A.a4G({type:dt});static#i=this.\u0275inj=A.s3X({imports:[sn.MD,Re.a]})}return dt})()},3304:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{em:()=>Bd,U5:()=>Yd,SO:()=>Ru});var A=Ot(4496),sn=Ot(6684),Re=Ot(4704),e=Ot(3992),Y=Ot(3616),Ae=Ot(4e3);function Ee(_){return _<0?Math.ceil(_)||0:Math.floor(_)}function Oe(_){return"string"==typeof _}function Ye(_){return _ instanceof Date||"[object Date]"===Object.prototype.toString.call(_)}function et(_){return _&&_.getTime&&!isNaN(_.getTime())}function dt(_){return _ instanceof Function||"[object Function]"===Object.prototype.toString.call(_)}function St(_){return"number"==typeof _||"[object Number]"===Object.prototype.toString.call(_)}function it(_){return _ instanceof Array||"[object Array]"===Object.prototype.toString.call(_)}function pt(_,D){return Object.prototype.hasOwnProperty.call(_,D)}function yt(_){return null!=_&&"[object Object]"===Object.prototype.toString.call(_)}function Ve(_){return void 0===_}function Zt(_){const D=+_;let C=0;return 0!==D&&isFinite(D)&&(C=Ee(D)),C}const ei={},rt={date:"day",hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Kt(_,D){const C=_.toLowerCase();let N=_;C in rt&&(N=rt[C]),ei[C]=ei[`${C}s`]=ei[D]=N}function Yt(_){return Oe(_)?ei[_]||ei[_.toLowerCase()]:void 0}const ct=0,Vt=1,qt=2,ri=3,Li=4,ai=5,fi=6,Mi=7,Yi=8;function mn(_,D,C){const N=`${Math.abs(_)}`;return(_>=0?C?"+":"":"-")+Math.pow(10,Math.max(0,D-N.length)).toString().substr(1)+N}const ln={},zn={},jt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;function Di(_,D,C,N){_&&(zn[_]=N),D&&(zn[D[0]]=function(){return mn(N.apply(null,arguments),D[1],D[2])}),C&&(zn[C]=function(W,me){return me.locale.ordinal(N.apply(null,arguments),_)})}function Hn(_){return _.match(/\[[\s\S]/)?_.replace(/^\[|\]$/g,""):_.replace(/\\/g,"")}function Rn(_,D,C){const N=new Date(Date.UTC.apply(null,arguments));return _<100&&_>=0&&isFinite(N.getUTCFullYear())&&N.setUTCFullYear(_),N}function xn(_,D=0,C=1,N=0,W=0,me=0,ft=0){const vi=new Date(_,D,C,N,W,me,ft);return _<100&&_>=0&&isFinite(vi.getFullYear())&&vi.setFullYear(_),vi}function Pi(_,D=!1){return D?_.getUTCHours():_.getHours()}function gr(_,D=!1){return D?_.getUTCMinutes():_.getMinutes()}function tr(_,D=!1){return D?_.getUTCSeconds():_.getSeconds()}function qn(_,D=!1){return D?_.getUTCMilliseconds():_.getMilliseconds()}function Ui(_,D=!1){return D?_.getUTCDay():_.getDay()}function cn(_,D=!1){return D?_.getUTCDate():_.getDate()}function Vi(_,D=!1){return D?_.getUTCMonth():_.getMonth()}function Oi(_,D=!1){return D?_.getUTCFullYear():_.getFullYear()}function kr(_,D){return!(!_||!D)&&xr(_,D)&&Vi(_)===Vi(D)}function xr(_,D){return!(!_||!D)&&Oi(_)===Oi(D)}function _r(_,D){return!(!_||!D)&&xr(_,D)&&kr(_,D)&&cn(_)===cn(D)}const ir=/\d/,yn=/\d\d/,qr=/\d{3}/,Sr=/\d{4}/,ys=/[+-]?\d{6}/,Kn=/\d\d?/,fr=/\d\d\d\d?/,sr=/\d\d\d\d\d\d?/,vr=/\d{1,3}/,Yr=/\d{1,4}/,xt=/[+-]?\d{1,6}/,De=/\d+/,ze=/[+-]?\d+/,st=/Z|[+-]\d\d(?::?\d\d)?/gi,It=/[+-]?\d+(\.\d{1,3})?/,Ht=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Gt={};function Ie(_,D,C){Gt[_]=dt(D)?D:function(N,W){return N&&C?C:D}}function He(_,D){return pt(Gt,_)?Gt[_](!1,D):new RegExp(function Pe(_){return bt(_.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(D,C,N,W,me)=>C||N||W||me))}(_))}function bt(_){return _.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const Mt={};function xi(_,D){const C=Oe(_)?[_]:_;let N=D;if(St(D)&&(N=function(W,me,ft){return me[D]=Zt(W),ft}),it(C)&&dt(N)){let W;for(W=0;W<C.length;W++)Mt[C[W]]=N}}function Ke(_,D){xi(_,function(C,N,W,me){return W._w=W._w||{},D(C,W._w,W,me)})}function ot(_,D,C){return null!=D&&pt(Mt,_)&&Mt[_](D,C._a,C,_),C}const Ue={};function je(_,D){Ue[_]=D}function ht(_){return null==_._pf&&(_._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),_._pf}function Rt(_,D){return D.locale.getFullYear?D.locale.getFullYear(_,D.isUTC).toString():Oi(_,D.isUTC).toString()}function si(_){return Zt(_)+(Zt(_)>68?1900:2e3)}function Si(_){return Qi(_)?366:365}function Qi(_){return _%4==0&&_%100!=0||_%400==0}function Bi(_,D){if(isNaN(_)||isNaN(D))return NaN;const C=function ke(_,D){return(_%D+D)%D}(D,12);return 1===C?Qi(_+(D-C)/12)?29:28:31-C%7%2}const Dn={year:0,month:0,day:0,hour:0,minute:0,seconds:0};function In(_,D){const C=Object.assign({},Dn,D),N=_.getFullYear()+(C.year||0),W=_.getMonth()+(C.month||0);let me=_.getDate()+(C.day||0);return C.month&&!C.day&&(me=Math.min(me,Bi(N,W))),xn(N,W,me,_.getHours()+(C.hour||0),_.getMinutes()+(C.minute||0),_.getSeconds()+(C.seconds||0))}function di(_,D){return St(D)?D:_}function n(_,D,C){const N=Math.min(cn(_),Bi(Oi(_),D));return C?_.setUTCMonth(D,N):_.setMonth(D,N),_}function k(_,D,C){return C?_.setUTCDate(D):_.setDate(D),_}function R(_){return new Date(_.getTime())}function j(_,D,C){const N=R(_);switch(D){case"year":n(N,0,C);case"quarter":case"month":k(N,1,C);case"week":case"isoWeek":case"day":case"date":!function c(_,D,C){C?_.setUTCHours(D):_.setHours(D)}(N,0,C);case"hours":!function g(_,D,C){C?_.setUTCMinutes(D):_.setMinutes(D)}(N,0,C);case"minutes":!function y(_,D,C){C?_.setUTCSeconds(D):_.setSeconds(D)}(N,0,C);case"seconds":!function x(_,D,C){C?_.setUTCMilliseconds(D):_.setMilliseconds(D)}(N,0,C)}return"week"===D&&function h(_,D,C={}){Ws(_,D-en(_,C.locale,C.isUTC),"day")}(N,0,{isUTC:C}),"isoWeek"===D&&function V(_,D,C={}){const N=function bo(_,D=Xr()){return Oe(_)?D.weekdaysParse(_)%7||7:St(_)&&isNaN(_)?null:_}(D,C.locale);Xs(_,function jr(_,D){return Ui(_,D)}(_)%7?N:N-7)}(N,1),"quarter"===D&&n(N,3*Math.floor(Vi(N,C)/3),C),N}function U(_,D,C){let N=D;return"date"===N&&(N="day"),function nl(_,D,C,N){return gs(_,Ma(D,C),-1,N)}(Ws(j(_,N,C),1,"isoWeek"===N?"week":N,C),1,"milliseconds",C)}function ee(_,D){const C=+j(_,"day",D),N=+j(_,"year",D);return Math.round((C-N)/864e5)+1}function de(_,D,C){const N=D-C+7;return-(Rn(_,0,N).getUTCDay()-D+7)%7+N-1}function he(_,D,C,N){const W=de(Oi(_,N),D,C),me=Math.floor((ee(_,N)-W-1)/7)+1;let ft,vi;return me<1?(vi=Oi(_,N)-1,ft=me+be(vi,D,C)):me>be(Oi(_,N),D,C)?(ft=me-be(Oi(_,N),D,C),vi=Oi(_,N)+1):(vi=Oi(_,N),ft=me),{week:ft,year:vi}}function be(_,D,C){const N=de(_,D,C),W=de(_+1,D,C);return(Si(_)-N+W)/7}const F=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,K="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_e="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Me="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),wt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},hi=Ht,yi=Ht;class rn{constructor(D){D&&this.set(D)}set(D){let C;for(C in D){if(!D.hasOwnProperty(C))continue;const N=D[C];this[dt(N)?C:`_${C}`]=N}this._config=D}calendar(D,C,N){const W=this._calendar[D]||this._calendar.sameElse;return dt(W)?W.call(null,C,N):W}longDateFormat(D){const C=this._longDateFormat[D],N=this._longDateFormat[D.toUpperCase()];return C||!N?C:(this._longDateFormat[D]=N.replace(/MMMM|MM|DD|dddd/g,function(W){return W.slice(1)}),this._longDateFormat[D])}get invalidDate(){return this._invalidDate}set invalidDate(D){this._invalidDate=D}ordinal(D,C){return this._ordinal.replace("%d",D.toString(10))}preparse(D,C){return D}getFullYear(D,C=!1){return Oi(D,C)}postformat(D){return D}relativeTime(D,C,N,W){const me=this._relativeTime[N];return dt(me)?me(D,C,N,W):me.replace(/%d/i,D.toString(10))}pastFuture(D,C){const N=this._relativeTime[D>0?"future":"past"];return dt(N)?N(C):N.replace(/%s/i,C)}months(D,C,N=!1){if(!D)return it(this._months)?this._months:this._months.standalone;if(it(this._months))return this._months[Vi(D,N)];const W=(this._months.isFormat||F).test(C)?"format":"standalone";return this._months[W][Vi(D,N)]}monthsShort(D,C,N=!1){if(!D)return it(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;if(it(this._monthsShort))return this._monthsShort[Vi(D,N)];const W=F.test(C)?"format":"standalone";return this._monthsShort[W][Vi(D,N)]}monthsParse(D,C,N){let W,me,ft;if(this._monthsParseExact)return this.handleMonthStrictParse(D,C,N);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),ft=0;ft<12;ft++){if(W=new Date(Date.UTC(2e3,ft)),N&&!this._longMonthsParse[ft]){const vi=this.months(W,"",!0).replace(".",""),on=this.monthsShort(W,"",!0).replace(".","");this._longMonthsParse[ft]=new RegExp(`^${vi}$`,"i"),this._shortMonthsParse[ft]=new RegExp(`^${on}$`,"i")}if(!N&&!this._monthsParse[ft]&&(me=`^${this.months(W,"",!0)}|^${this.monthsShort(W,"",!0)}`,this._monthsParse[ft]=new RegExp(me.replace(".",""),"i")),N&&"MMMM"===C&&this._longMonthsParse[ft].test(D)||N&&"MMM"===C&&this._shortMonthsParse[ft].test(D)||!N&&this._monthsParse[ft].test(D))return ft}}monthsRegex(D){return this._monthsParseExact?(pt(this,"_monthsRegex")||this.computeMonthsParse(),D?this._monthsStrictRegex:this._monthsRegex):(pt(this,"_monthsRegex")||(this._monthsRegex=yi),this._monthsStrictRegex&&D?this._monthsStrictRegex:this._monthsRegex)}monthsShortRegex(D){return this._monthsParseExact?(pt(this,"_monthsRegex")||this.computeMonthsParse(),D?this._monthsShortStrictRegex:this._monthsShortRegex):(pt(this,"_monthsShortRegex")||(this._monthsShortRegex=hi),this._monthsShortStrictRegex&&D?this._monthsShortStrictRegex:this._monthsShortRegex)}week(D,C){return he(D,this._week.dow,this._week.doy,C).week}firstDayOfWeek(){return this._week.dow}firstDayOfYear(){return this._week.doy}weekdays(D,C,N){if(!D)return it(this._weekdays)?this._weekdays:this._weekdays.standalone;if(it(this._weekdays))return this._weekdays[Ui(D,N)];const W=this._weekdays.isFormat.test(C)?"format":"standalone";return this._weekdays[W][Ui(D,N)]}weekdaysMin(D,C,N){return D?this._weekdaysMin[Ui(D,N)]:this._weekdaysMin}weekdaysShort(D,C,N){return D?this._weekdaysShort[Ui(D,N)]:this._weekdaysShort}weekdaysParse(D,C,N){let W,me;if(this._weekdaysParseExact)return this.handleWeekStrictParse(D,C,N);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),W=0;W<7;W++){const ft=Xs(new Date(Date.UTC(2e3,1)),W,null,!0);if(N&&!this._fullWeekdaysParse[W]&&(this._fullWeekdaysParse[W]=new RegExp(`^${this.weekdays(ft,"",!0).replace(".",".?")}$`,"i"),this._shortWeekdaysParse[W]=new RegExp(`^${this.weekdaysShort(ft,"",!0).replace(".",".?")}$`,"i"),this._minWeekdaysParse[W]=new RegExp(`^${this.weekdaysMin(ft,"",!0).replace(".",".?")}$`,"i")),this._weekdaysParse[W]||(me=`^${this.weekdays(ft,"",!0)}|^${this.weekdaysShort(ft,"",!0)}|^${this.weekdaysMin(ft,"",!0)}`,this._weekdaysParse[W]=new RegExp(me.replace(".",""),"i")),!(it(this._fullWeekdaysParse)&&it(this._shortWeekdaysParse)&&it(this._minWeekdaysParse)&&it(this._weekdaysParse)))return;if(N&&"dddd"===C&&this._fullWeekdaysParse[W].test(D))return W;if(N&&"ddd"===C&&this._shortWeekdaysParse[W].test(D))return W;if(N&&"dd"===C&&this._minWeekdaysParse[W].test(D))return W;if(!N&&this._weekdaysParse[W].test(D))return W}}weekdaysRegex(D){return this._weekdaysParseExact?(pt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),D?this._weekdaysStrictRegex:this._weekdaysRegex):(pt(this,"_weekdaysRegex")||(this._weekdaysRegex=Ht),this._weekdaysStrictRegex&&D?this._weekdaysStrictRegex:this._weekdaysRegex)}weekdaysShortRegex(D){return this._weekdaysParseExact?(pt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),D?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(pt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ht),this._weekdaysShortStrictRegex&&D?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}weekdaysMinRegex(D){return this._weekdaysParseExact?(pt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),D?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(pt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ht),this._weekdaysMinStrictRegex&&D?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}isPM(D){return"p"===D.toLowerCase().charAt(0)}meridiem(D,C,N){return D>11?N?"pm":"PM":N?"am":"AM"}formatLongDate(D){this._longDateFormat=this._longDateFormat?this._longDateFormat:wt;const C=this._longDateFormat[D],N=this._longDateFormat[D.toUpperCase()];return C||!N?C:(this._longDateFormat[D]=N.replace(/MMMM|MM|DD|dddd/g,W=>W.slice(1)),this._longDateFormat[D])}handleMonthStrictParse(D,C,N){const W=D.toLocaleLowerCase();let me,ft,vi;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],me=0;me<12;++me)vi=new Date(2e3,me),this._shortMonthsParse[me]=this.monthsShort(vi,"").toLocaleLowerCase(),this._longMonthsParse[me]=this.months(vi,"").toLocaleLowerCase();return N?"MMM"===C?(ft=this._shortMonthsParse.indexOf(W),-1!==ft?ft:null):(ft=this._longMonthsParse.indexOf(W),-1!==ft?ft:null):"MMM"===C?(ft=this._shortMonthsParse.indexOf(W),-1!==ft?ft:(ft=this._longMonthsParse.indexOf(W),-1!==ft?ft:null)):(ft=this._longMonthsParse.indexOf(W),-1!==ft?ft:(ft=this._shortMonthsParse.indexOf(W),-1!==ft?ft:null))}handleWeekStrictParse(D,C,N){let W;const me=D.toLocaleLowerCase();if(!this._weekdaysParse){let ft;for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],ft=0;ft<7;++ft){const vi=Xs(new Date(Date.UTC(2e3,1)),ft,null,!0);this._minWeekdaysParse[ft]=this.weekdaysMin(vi).toLocaleLowerCase(),this._shortWeekdaysParse[ft]=this.weekdaysShort(vi).toLocaleLowerCase(),this._weekdaysParse[ft]=this.weekdays(vi,"").toLocaleLowerCase()}}if(it(this._weekdaysParse)&&it(this._shortWeekdaysParse)&&it(this._minWeekdaysParse))return N?"dddd"===C?(W=this._weekdaysParse.indexOf(me),-1!==W?W:null):"ddd"===C?(W=this._shortWeekdaysParse.indexOf(me),-1!==W?W:null):(W=this._minWeekdaysParse.indexOf(me),-1!==W?W:null):"dddd"===C?(W=this._weekdaysParse.indexOf(me),-1!==W||(W=this._shortWeekdaysParse.indexOf(me),-1!==W)?W:(W=this._minWeekdaysParse.indexOf(me),-1!==W?W:null)):"ddd"===C?(W=this._shortWeekdaysParse.indexOf(me),-1!==W||(W=this._weekdaysParse.indexOf(me),-1!==W)?W:(W=this._minWeekdaysParse.indexOf(me),-1!==W?W:null)):(W=this._minWeekdaysParse.indexOf(me),-1!==W||(W=this._weekdaysParse.indexOf(me),-1!==W)?W:(W=this._shortWeekdaysParse.indexOf(me),-1!==W?W:null))}computeMonthsParse(){const D=[],C=[],N=[];let W,me;for(me=0;me<12;me++)W=new Date(2e3,me),D.push(this.monthsShort(W,"")),C.push(this.months(W,"")),N.push(this.months(W,"")),N.push(this.monthsShort(W,""));for(D.sort(gn),C.sort(gn),N.sort(gn),me=0;me<12;me++)D[me]=bt(D[me]),C[me]=bt(C[me]);for(me=0;me<24;me++)N[me]=bt(N[me]);this._monthsRegex=new RegExp(`^(${N.join("|")})`,"i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(`^(${C.join("|")})`,"i"),this._monthsShortStrictRegex=new RegExp(`^(${D.join("|")})`,"i")}computeWeekdaysParse(){const D=[],C=[],N=[],W=[];let me;for(me=0;me<7;me++){const ft=Xs(new Date(Date.UTC(2e3,1)),me,null,!0),vi=this.weekdaysMin(ft),on=this.weekdaysShort(ft),Nr=this.weekdays(ft);D.push(vi),C.push(on),N.push(Nr),W.push(vi),W.push(on),W.push(Nr)}for(D.sort(gn),C.sort(gn),N.sort(gn),W.sort(gn),me=0;me<7;me++)C[me]=bt(C[me]),N[me]=bt(N[me]),W[me]=bt(W[me]);this._weekdaysRegex=new RegExp(`^(${W.join("|")})`,"i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(`^(${N.join("|")})`,"i"),this._weekdaysShortStrictRegex=new RegExp(`^(${C.join("|")})`,"i"),this._weekdaysMinStrictRegex=new RegExp(`^(${D.join("|")})`,"i")}}function gn(_,D){return D.length-_.length}const Pr={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:wt,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:K,monthsShort:ce,week:{dow:0,doy:6},weekdays:_e,weekdaysMin:$e,weekdaysShort:Me,meridiemParse:/[ap]\.?m?\.?/i};function Rr(_,D,C){const N=Math.min(_.length,D.length),W=Math.abs(_.length-D.length);let ft,me=0;for(ft=0;ft<N;ft++)(C&&_[ft]!==D[ft]||!C&&Zt(_[ft])!==Zt(D[ft]))&&me++;return me+W}function sa(_,D){Di(null,[_,_.length,!1],null,D)}function Kr(_,D){return go(_,D.locale).toString()}function So(_){return eo(_).toString()}function go(_,D=Xr(),C){return he(_,D.firstDayOfWeek(),D.firstDayOfYear(),C).year}function eo(_,D){return he(_,1,4,D).year}function Fo(_,D){Di(_,null,null,function(C,N){let W=function Bo(_,D={}){return D._isUTC?D._offset||0:function Al(_){return 15*-Math.round(_.getTimezoneOffset()/15)}(_)}(C,{_isUTC:N.isUTC,_offset:N.offset}),me="+";return W<0&&(W=-W,me="-"),me+mn(~~(W/60),2)+D+mn(~~W%60,2)})}const fl=/([\+\-]|\d\d)/gi;const Ts={},_o={};let co;function dn(_){return _&&_.toLowerCase().replace("_","-")}function ya(_){return Ts[_]||console.error(`Khronos locale error: please load locale "${_}" before using it`),Ts[_]}function Or(_,D){let C;return _&&(Ve(D)?C=Xr(_):Oe(_)&&(C=oa(_,D)),C&&(co=C)),co&&co._abbr}function oa(_,D){if(null===D)return delete Ts[_],co=Xr("en"),null;if(!D)return;let C=Pr;if(D.abbr=_,null!=D.parentLocale){if(null==Ts[D.parentLocale])return _o[D.parentLocale]||(_o[D.parentLocale]=[]),_o[D.parentLocale].push({name:_,config:D}),null;C=Ts[D.parentLocale]._config}return Ts[_]=new rn(function vo(_,D){const C=Object.assign({},_);for(const N in D)pt(D,N)&&(yt(_[N])&&yt(D[N])?(C[N]={},Object.assign(C[N],_[N]),Object.assign(C[N],D[N])):null!=D[N]?C[N]=D[N]:delete C[N]);for(const N in _)pt(_,N)&&!pt(D,N)&&yt(_[N])&&(C[N]=Object.assign({},C[N]));return C}(C,D)),_o[_]&&_o[_].forEach(function(N){oa(N.name,N.config)}),Or(_),Ts[_]}function Xr(_){return function La(){Ts.en||(Or("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal(_){const D=_%10;return _+(1===Zt(_%100/10)?"th":1===D?"st":2===D?"nd":3===D?"rd":"th")}}),function yr(){Di("w",["ww",2,!1],"wo",function(_,D){return function Wr(_,D=Xr(),C){return D.week(_,C)}(_,D.locale).toString(10)}),Di("W",["WW",2,!1],"Wo",function(_){return function zr(_,D){return he(_,1,4,D).week}(_).toString(10)}),Kt("week","w"),Kt("isoWeek","W"),je("week",5),je("isoWeek",5),Ie("w",Kn),Ie("ww",Kn,yn),Ie("W",Kn),Ie("WW",Kn,yn),Ke(["w","ww","W","WW"],function(_,D,C,N){return D[N.substr(0,1)]=Zt(_),C})}(),function qa(){Di(null,["gg",2,!1],null,function(_,D){return(go(_,D.locale)%100).toString()}),Di(null,["GG",2,!1],null,function(_){return(eo(_)%100).toString()}),sa("gggg",Kr),sa("ggggg",Kr),sa("GGGG",So),sa("GGGGG",So),Kt("weekYear","gg"),Kt("isoWeekYear","GG"),je("weekYear",1),je("isoWeekYear",1),Ie("G",ze),Ie("g",ze),Ie("GG",Kn,yn),Ie("gg",Kn,yn),Ie("GGGG",Yr,Sr),Ie("gggg",Yr,Sr),Ie("GGGGG",xt,ys),Ie("ggggg",xt,ys),Ke(["gggg","ggggg","GGGG","GGGGG"],function(_,D,C,N){return D[N.substr(0,2)]=Zt(_),C}),Ke(["gg","GG"],function(_,D,C,N){return D[N]=si(_),C})}(),function pi(){Di("Y",null,null,function(_,D){const C=Oi(_,D.isUTC);return C<=9999?C.toString(10):`+${C}`}),Di(null,["YY",2,!1],null,function(_,D){return(Oi(_,D.isUTC)%100).toString(10)}),Di(null,["YYYY",4,!1],null,Rt),Di(null,["YYYYY",5,!1],null,Rt),Di(null,["YYYYYY",6,!0],null,Rt),Kt("year","y"),je("year",1),Ie("Y",ze),Ie("YY",Kn,yn),Ie("YYYY",Yr,Sr),Ie("YYYYY",xt,ys),Ie("YYYYYY",xt,ys),xi(["YYYYY","YYYYYY"],ct),xi("YYYY",function(_,D,C){return D[ct]=2===_.length?si(_):Zt(_),C}),xi("YY",function(_,D,C){return D[ct]=si(_),C}),xi("Y",function(_,D,C){return D[ct]=parseInt(_,10),C})}(),function mc(){Di("z",null,null,function(_,D){return D.isUTC?"UTC":""}),Di("zz",null,null,function(_,D){return D.isUTC?"Coordinated Universal Time":""})}(),function lr(){Di("X",null,null,function(_){return function $i(_){return Math.floor(_.valueOf()/1e3)}(_).toString(10)}),Di("x",null,null,function(_){return _.valueOf().toString(10)}),Ie("x",ze),Ie("X",It),xi("X",function(_,D,C){return C._d=new Date(1e3*parseFloat(_)),C}),xi("x",function(_,D,C){return C._d=new Date(Zt(_)),C})}(),function gc(){Di("s",["ss",2,!1],null,function(_,D){return tr(_,D.isUTC).toString(10)}),Kt("second","s"),je("second",15),Ie("s",Kn),Ie("ss",Kn,yn),xi(["s","ss"],ai)}(),function Bs(){Di("Q",null,"Qo",function(_,D){return function Ps(_,D=!1){return Math.ceil((Vi(_,D)+1)/3)}(_,D.isUTC).toString(10)}),Kt("quarter","Q"),je("quarter",7),Ie("Q",ir),xi("Q",function(_,D,C){return D[Vt]=3*(Zt(_)-1),C})}(),function Ka(){Fo("Z",":"),Fo("ZZ",""),Ie("Z",st),Ie("ZZ",st),xi(["Z","ZZ"],function(_,D,C){return C._useUTC=!0,C._tzm=function Aa(_,D){const C=(D||"").match(_);if(null===C)return null;const W=C[C.length-1].match(fl)||["-","0","0"],me=60*parseInt(W[1],10)+Zt(W[2]);return 0===me?0:"+"===W[0]?me:-me}(st,_),C})}(),function Tn(){Di("M",["MM",2,!1],"Mo",function(_,D){return(Vi(_,D.isUTC)+1).toString(10)}),Di("MMM",null,null,function(_,D){return D.locale.monthsShort(_,D.format,D.isUTC)}),Di("MMMM",null,null,function(_,D){return D.locale.months(_,D.format,D.isUTC)}),Kt("month","M"),je("month",8),Ie("M",Kn),Ie("MM",Kn,yn),Ie("MMM",function(_,D){return D.monthsShortRegex(_)}),Ie("MMMM",function(_,D){return D.monthsRegex(_)}),xi(["M","MM"],function(_,D,C){return D[Vt]=Zt(_)-1,C}),xi(["MMM","MMMM"],function(_,D,C,N){const W=C._locale.monthsParse(_,N,C._strict);return null!=W?D[Vt]=W:ht(C).invalidMonth=!!_,C})}(),function ql(){Di("m",["mm",2,!1],null,function(_,D){return gr(_,D.isUTC).toString(10)}),Kt("minute","m"),je("minute",14),Ie("m",Kn),Ie("mm",Kn,yn),xi(["m","mm"],Li)}(),function Ll(){let _;for(Di("S",null,null,function(C,N){return(~~(qn(C,N.isUTC)/100)).toString(10)}),Di(null,["SS",2,!1],null,function(C,N){return(~~(qn(C,N.isUTC)/10)).toString(10)}),Di(null,["SSS",3,!1],null,function(C,N){return qn(C,N.isUTC).toString(10)}),Di(null,["SSSS",4,!1],null,function(C,N){return(10*qn(C,N.isUTC)).toString(10)}),Di(null,["SSSSS",5,!1],null,function(C,N){return(100*qn(C,N.isUTC)).toString(10)}),Di(null,["SSSSSS",6,!1],null,function(C,N){return(1e3*qn(C,N.isUTC)).toString(10)}),Di(null,["SSSSSSS",7,!1],null,function(C,N){return(1e4*qn(C,N.isUTC)).toString(10)}),Di(null,["SSSSSSSS",8,!1],null,function(C,N){return(1e5*qn(C,N.isUTC)).toString(10)}),Di(null,["SSSSSSSSS",9,!1],null,function(C,N){return(1e6*qn(C,N.isUTC)).toString(10)}),Kt("millisecond","ms"),je("millisecond",16),Ie("S",vr,ir),Ie("SS",vr,yn),Ie("SSS",vr,qr),_="SSSS";_.length<=9;_+="S")Ie(_,De);function D(C,N,W){return N[fi]=Zt(1e3*parseFloat(`0.${C}`)),W}for(_="S";_.length<=9;_+="S")xi(_,D)}(),function Qr(){function _(W,me){return Pi(W,me)%12||12}function C(W,me){Di(W,null,null,function(ft,vi){return vi.locale.meridiem(Pi(ft,vi.isUTC),gr(ft,vi.isUTC),me)})}function N(W,me){return me._meridiemParse}Di("H",["HH",2,!1],null,function(W,me){return Pi(W,me.isUTC).toString(10)}),Di("h",["hh",2,!1],null,function(W,me){return _(W,me.isUTC).toString(10)}),Di("k",["kk",2,!1],null,function(W,me){return function D(W,me){return Pi(W,me)||24}(W,me.isUTC).toString(10)}),Di("hmm",null,null,function(W,me){return`${_(W,me.isUTC)}${mn(gr(W,me.isUTC),2)}`}),Di("hmmss",null,null,function(W,me){return`${_(W,me.isUTC)}${mn(gr(W,me.isUTC),2)}${mn(tr(W,me.isUTC),2)}`}),Di("Hmm",null,null,function(W,me){return`${Pi(W,me.isUTC)}${mn(gr(W,me.isUTC),2)}`}),Di("Hmmss",null,null,function(W,me){return`${Pi(W,me.isUTC)}${mn(gr(W,me.isUTC),2)}${mn(tr(W,me.isUTC),2)}`}),C("a",!0),C("A",!1),Kt("hour","h"),je("hour",13),Ie("a",N),Ie("A",N),Ie("H",Kn),Ie("h",Kn),Ie("k",Kn),Ie("HH",Kn,yn),Ie("hh",Kn,yn),Ie("kk",Kn,yn),Ie("hmm",fr),Ie("hmmss",sr),Ie("Hmm",fr),Ie("Hmmss",sr),xi(["H","HH"],ri),xi(["k","kk"],function(W,me,ft){const vi=Zt(W);return me[ri]=24===vi?0:vi,ft}),xi(["a","A"],function(W,me,ft){return ft._isPm=ft._locale.isPM(W),ft._meridiem=W,ft}),xi(["h","hh"],function(W,me,ft){return me[ri]=Zt(W),ht(ft).bigHour=!0,ft}),xi("hmm",function(W,me,ft){const vi=W.length-2;return me[ri]=Zt(W.substr(0,vi)),me[Li]=Zt(W.substr(vi)),ht(ft).bigHour=!0,ft}),xi("hmmss",function(W,me,ft){const vi=W.length-4,on=W.length-2;return me[ri]=Zt(W.substr(0,vi)),me[Li]=Zt(W.substr(vi,2)),me[ai]=Zt(W.substr(on)),ht(ft).bigHour=!0,ft}),xi("Hmm",function(W,me,ft){const vi=W.length-2;return me[ri]=Zt(W.substr(0,vi)),me[Li]=Zt(W.substr(vi)),ft}),xi("Hmmss",function(W,me,ft){const vi=W.length-4,on=W.length-2;return me[ri]=Zt(W.substr(0,vi)),me[Li]=Zt(W.substr(vi,2)),me[ai]=Zt(W.substr(on)),ft})}(),function X(){Di("DDD",["DDDD",3,!1],"DDDo",function(_){return ee(_).toString(10)}),Kt("dayOfYear","DDD"),je("dayOfYear",4),Ie("DDD",vr),Ie("DDDD",qr),xi(["DDD","DDDD"],function(_,D,C){return C._dayOfYear=Zt(_),C})}(),function ts(){Di("d",null,"do",function(_,D){return Ui(_,D.isUTC).toString(10)}),Di("dd",null,null,function(_,D){return D.locale.weekdaysMin(_,D.format,D.isUTC)}),Di("ddd",null,null,function(_,D){return D.locale.weekdaysShort(_,D.format,D.isUTC)}),Di("dddd",null,null,function(_,D){return D.locale.weekdays(_,D.format,D.isUTC)}),Di("e",null,null,function(_,D){return en(_,D.locale,D.isUTC).toString(10)}),Di("E",null,null,function(_,D){return function S(_,D){return Ui(_,D)||7}(_,D.isUTC).toString(10)}),Kt("day","d"),Kt("weekday","e"),Kt("isoWeekday","E"),je("day",11),je("weekday",11),je("isoWeekday",11),Ie("d",Kn),Ie("e",Kn),Ie("E",Kn),Ie("dd",function(_,D){return D.weekdaysMinRegex(_)}),Ie("ddd",function(_,D){return D.weekdaysShortRegex(_)}),Ie("dddd",function(_,D){return D.weekdaysRegex(_)}),Ke(["dd","ddd","dddd"],function(_,D,C,N){const W=C._locale.weekdaysParse(_,N,C._strict);return null!=W?D.d=W:ht(C).invalidWeekday=!!_,C}),Ke(["d","e","E"],function(_,D,C,N){return D[N]=Zt(_),C})}(),function Le(){Di("D",["DD",2,!1],"Do",function(_,D){return cn(_,D.isUTC).toString(10)}),Kt("date","D"),je("date",9),Ie("D",Kn),Ie("DD",Kn,yn),Ie("Do",function(_,D){return D._dayOfMonthOrdinalParse||D._ordinalParse}),xi(["D","DD"],qt),xi("Do",function(_,D,C){return D[qt]=Zt(_.match(Kn)[0]),C})}())}(),_?function No(_){let D,C,N=0;for(;N<_.length;){const W=dn(_[N]).split("-");let me=W.length;for(D=dn(_[N+1]),D=D?D.split("-"):null;me>0;){if(C=ya(W.slice(0,me).join("-")),C)return C;if(D&&D.length>=me&&Rr(W,D,!0)>=me-1)break;me--}N++}return null}(it(_)?_:[_]):co}const Ds=["year","quarter","month","week","day","hours","minutes","seconds","milliseconds"],Cr=Ds.reduce((_,D)=>(_[D]=!0,_),{});function xa(_){return _<0?Math.floor(_):Math.ceil(_)}function Mo(_){return 4800*_/146097}function Yo(_){return 146097*_/4800}let Us=Math.round;const Vo_ss=44,Vo_s=45,Vo_m=45,Vo_h=22,Vo_d=26,Vo_M=11;function Pl(_,D,C,N,W){return W.relativeTime(D||1,!!C,_,N)}class Ns{constructor(D,C={}){this._data={},this._locale=Xr(),this._locale=C&&C._locale||Xr();const W=D.year||0,me=D.quarter||0,ft=D.month||0,vi=D.week||0,on=D.day||0,Nr=D.hours||0,_s=D.minutes||0,ro=D.seconds||0,ma=D.milliseconds||0;return this._isValid=function Pa(_){if(Object.keys(_).some(N=>N in Cr&&null===_[N]||isNaN(_[N])))return!1;let C=!1;for(let N=0;N<Ds.length;++N)if(_[Ds[N]]){if(C)return!1;_[Ds[N]]!==Zt(_[Ds[N]])&&(C=!0)}return!0}(D),this._milliseconds=+ma+1e3*ro+60*_s*1e3+1e3*Nr*60*60,this._days=+on+7*vi,this._months=+ft+3*me+12*W,function ba(_){let D=_._milliseconds,C=_._days,N=_._months;const W=_._data;D>=0&&C>=0&&N>=0||D<=0&&C<=0&&N<=0||(D+=864e5*xa(Yo(N)+C),C=0,N=0),W.milliseconds=D%1e3;const me=Ee(D/1e3);W.seconds=me%60;const ft=Ee(me/60);W.minutes=ft%60;const vi=Ee(ft/60);W.hours=vi%24,C+=Ee(vi/24);const on=Ee(Mo(C));N+=on,C-=xa(Yo(on));const Nr=Ee(N/12);return N%=12,W.day=C,W.month=N,W.year=Nr,_}(this)}isValid(){return this._isValid}humanize(D){if(!this.isValid())return this.localeData().invalidDate;const C=this.localeData();let N=function yo(_,D,C){const N=Ma(_).abs(),W=Us(N.as("s")),me=Us(N.as("m")),ft=Us(N.as("h")),vi=Us(N.as("d")),on=Us(N.as("M")),Nr=Us(N.as("y")),_s=W<=Vo_ss&&["s",W]||W<Vo_s&&["ss",W]||me<=1&&["m"]||me<Vo_m&&["mm",me]||ft<=1&&["h"]||ft<Vo_h&&["hh",ft]||vi<=1&&["d"]||vi<Vo_d&&["dd",vi]||on<=1&&["M"]||on<Vo_M&&["MM",on]||Nr<=1&&["y"]||["yy",Nr];return Pl.apply(null,[_s[0],_s[1],D,+_>0,C])}(this,!D,C);return D&&(N=C.pastFuture(+this,N)),C.postformat(N)}localeData(){return this._locale}locale(D){return D?(this._locale=Xr(D)||this._locale,this):this._locale._abbr}abs(){const D=Math.abs,C=this._data;return this._milliseconds=D(this._milliseconds),this._days=D(this._days),this._months=D(this._months),C.milliseconds=D(C.milliseconds),C.seconds=D(C.seconds),C.minutes=D(C.minutes),C.hours=D(C.hours),C.month=D(C.month),C.year=D(C.year),this}as(D){if(!this.isValid())return NaN;let C,N;const W=this._milliseconds,me=Yt(D);if("month"===me||"year"===me)return C=this._days+W/864e5,N=this._months+Mo(C),"month"===me?N:N/12;switch(C=this._days+Math.round(Yo(this._months)),me){case"week":return C/7+W/6048e5;case"day":return C+W/864e5;case"hours":return 24*C+W/36e5;case"minutes":return 1440*C+W/6e4;case"seconds":return 86400*C+W/1e3;case"milliseconds":return Math.floor(864e5*C)+W;default:throw new Error(`Unknown unit ${me}`)}}valueOf(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Zt(this._months/12):NaN}}function Os(_){if(null==_._isValid){const D=ht(_),C=Array.prototype.some.call(D.parsedDateParts,function(W){return null!=W});let N=!isNaN(_._d&&_._d.getTime())&&D.overflow<0&&!D.empty&&!D.invalidMonth&&!D.invalidWeekday&&!D.weekdayMismatch&&!D.nullInput&&!D.invalidFormat&&!D.userInvalidated&&(!D.meridiem||D.meridiem&&C);if(_._strict&&(N=N&&0===D.charsLeftOver&&0===D.unusedTokens.length&&void 0===D.bigHour),null!=Object.isFrozen&&Object.isFrozen(_))return N;_._isValid=N}return _._isValid}function la(_,D){return _._d=new Date(NaN),Object.assign(ht(_),D||{userInvalidated:!0}),_}const Do=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ca=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Rl=/Z|[+-]\d\d(?::?\d\d)?/,$s=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/,!0],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/,!0],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/,!0],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/,!0],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/,!0],["YYYYMMDD",/\d{8}/,!0],["GGGG[W]WWE",/\d{4}W\d{3}/,!0],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/,!0]],Ca=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Io=/^\/?Date\((\-?\d+)/i,Ja={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Jl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function uo(_){if(!Oe(_._i))return _;const D=_._i,C=Do.exec(D)||ca.exec(D);let N,W,me,ft,vi,on;if(!C)return _._isValid=!1,_;for(vi=0,on=$s.length;vi<on;vi++)if($s[vi][1].exec(C[1])){W=$s[vi][0],N=!1!==$s[vi][2];break}if(null==W)return _._isValid=!1,_;if(C[3]){for(vi=0,on=Ca.length;vi<on;vi++)if(Ca[vi][1].exec(C[3])){me=(C[2]||" ")+Ca[vi][0];break}if(null==me)return _._isValid=!1,_}if(!N&&null!=me)return _._isValid=!1,_;if(C[4]){if(!Rl.exec(C[4]))return _._isValid=!1,_;ft="Z"}return _._f=W+(me||"")+(ft||""),Ea(_)}function ho(_){const D=parseInt(_,10);return D<=49?D+2e3:D}function Ta(_){if(!Oe(_._i))return _;const D=Jl.exec(function Bc(_){return _.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(_._i));if(!D)return function wa(_){return _._isValid=!1,_}(_);const C=function _c(_,D,C,N,W,me){const ft=[ho(_),ce.indexOf(D),parseInt(C,10),parseInt(N,10),parseInt(W,10)];return me&&ft.push(parseInt(me,10)),ft}(D[4],D[3],D[2],D[5],D[6],D[7]);return function Ho(_,D,C){return!_||Me.indexOf(_)===new Date(D[0],D[1],D[2]).getDay()||(ht(C).weekdayMismatch=!0,C._isValid=!1,!1)}(D[1],C,_)&&(_._a=C,_._tzm=function Qa(_,D,C){if(_)return Ja[_];if(D)return 0;{const N=parseInt(C,10),W=N%100;return(N-W)/100*60+W}}(D[8],D[9],D[10]),_._d=Rn.apply(null,_._a),_._d.setUTCMinutes(_._d.getUTCMinutes()-_._tzm),ht(_).rfc2822=!0),_}function Is(_,D,C,N,W=0){const me=Xr(C||"en");if(!me)throw new Error(`Locale "${C}" is not defined, please add it with "defineLocale(...)"`);const vi=function _l(_,D,C,N,W=0){if(!et(_))return C.invalidDate;const me=el(D,C);return ln[me]=ln[me]||function qi(_){const D=_.match(jt),C=D.length,N=new Array(C);for(let W=0;W<C;W++)N[W]=zn[D[W]]?zn[D[W]]:Hn(D[W]);return function(W,me,ft,vi=0){let on="";for(let Nr=0;Nr<C;Nr++)on+=dt(N[Nr])?N[Nr].call(null,W,{format:_,locale:me,isUTC:ft,offset:vi}):N[Nr];return on}}(me),ln[me](_,C,N,W)}(_,D||(N?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"),me,N,W);return vi&&me.postformat(vi)}function el(_,D){let C=_,N=5;const W=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,me=ft=>D.formatLongDate(ft)||ft;for(W.lastIndex=0;N>=0&&W.test(C);)C=C.replace(W,me),W.lastIndex=0,N-=1;return C}function to(_,D,C){return _??D??C}function Ra(_){const D=[];let C,N,W;if(_._d)return _;const me=function Oa(_){const D=new Date;return _._useUTC?[D.getUTCFullYear(),D.getUTCMonth(),D.getUTCDate()]:[D.getFullYear(),D.getMonth(),D.getDate()]}(_);for(_._w&&null==_._a[qt]&&null==_._a[Vt]&&function tl(_){let D,C,N,W,me,ft,vi;const on=_._w;if(null!=on.GG||null!=on.W||null!=on.E)W=1,me=4,D=to(on.GG,_._a[ct],he(new Date,1,4).year),C=to(on.W,1),N=to(on.E,1),(N<1||N>7)&&(vi=!0);else{W=_._locale._week.dow,me=_._locale._week.doy;const Nr=he(new Date,W,me);D=to(on.gg,_._a[ct],Nr.year),C=to(on.w,Nr.week),null!=on.d?(N=on.d,(N<0||N>6)&&(vi=!0)):null!=on.e?(N=on.e+W,(on.e<0||on.e>6)&&(vi=!0)):N=W}C<1||C>be(D,W,me)?ht(_)._overflowWeeks=!0:null!=vi?ht(_)._overflowWeekday=!0:(ft=function ve(_,D,C,N,W){const vi=1+7*(D-1)+(7+C-N)%7+de(_,N,W);let on,Nr;return vi<=0?(on=_-1,Nr=Si(on)+vi):vi>Si(_)?(on=_+1,Nr=vi-Si(_)):(on=_,Nr=vi),{year:on,dayOfYear:Nr}}(D,C,N,W,me),_._a[ct]=ft.year,_._dayOfYear=ft.dayOfYear)}(_),null!=_._dayOfYear&&(W=to(_._a[ct],me[ct]),(_._dayOfYear>Si(W)||0===_._dayOfYear)&&(ht(_)._overflowDayOfYear=!0),N=new Date(Date.UTC(W,0,_._dayOfYear)),_._a[Vt]=N.getUTCMonth(),_._a[qt]=N.getUTCDate()),C=0;C<3&&null==_._a[C];++C)_._a[C]=D[C]=me[C];for(;C<7;C++)_._a[C]=D[C]=null==_._a[C]?2===C?1:0:_._a[C];24===_._a[ri]&&0===_._a[Li]&&0===_._a[ai]&&0===_._a[fi]&&(_._nextDay=!0,_._a[ri]=0),_._d=(_._useUTC?Rn:xn).apply(null,D);const ft=_._useUTC?_._d.getUTCDay():_._d.getDay();return null!=_._tzm&&_._d.setUTCMinutes(_._d.getUTCMinutes()-_._tzm),_._nextDay&&(_._a[ri]=24),_._w&&typeof _._w.d<"u"&&_._w.d!==ft&&(ht(_).weekdayMismatch=!0),_}function zl(_){let D;const C=_._a;return C&&-2===ht(_).overflow&&(D=C[Vt]<0||C[Vt]>11?Vt:C[qt]<1||C[qt]>Bi(C[ct],C[Vt])?qt:C[ri]<0||C[ri]>24||24===C[ri]&&(0!==C[Li]||0!==C[ai]||0!==C[fi])?ri:C[Li]<0||C[Li]>59?Li:C[ai]<0||C[ai]>59?ai:C[fi]<0||C[fi]>999?fi:-1,ht(_)._overflowDayOfYear&&(D<ct||D>qt)&&(D=qt),ht(_)._overflowWeeks&&-1===D&&(D=Mi),ht(_)._overflowWeekday&&-1===D&&(D=Yi),ht(_).overflow=D),_}const ka="ISO_8601",vc="RFC_2822";function Ea(_){if(_._f===ka)return uo(_);if(_._f===vc)return Ta(_);if(_._a=[],ht(_).empty=!0,it(_._f)||!_._i&&0!==_._i)return _;let D=_._i.toString(),C=0;const N=D.length,W=el(_._f,_._locale).match(jt)||[];let me,ft,vi,on;for(me=0;me<W.length;me++)ft=W[me],vi=(D.match(He(ft,_._locale))||[])[0],vi&&(on=D.substr(0,D.indexOf(vi)),on.length>0&&ht(_).unusedInput.push(on),D=D.slice(D.indexOf(vi)+vi.length),C+=vi.length),zn[ft]?(vi?ht(_).empty=!1:ht(_).unusedTokens.push(ft),ot(ft,vi,_)):_._strict&&!vi&&ht(_).unusedTokens.push(ft);return ht(_).charsLeftOver=N-C,D.length>0&&ht(_).unusedInput.push(D),_._a[ri]<=12&&!0===ht(_).bigHour&&_._a[ri]>0&&(ht(_).bigHour=void 0),ht(_).parsedDateParts=_._a.slice(0),ht(_).meridiem=_._meridiem,_._a[ri]=function Ql(_,D,C){let N=D;if(null==C)return N;if(null!=_.meridiemHour)return _.meridiemHour(N,C);if(null==_.isPM)return N;const W=_.isPM(C);return W&&N<12&&(N+=12),!W&&12===N&&(N=0),N}(_._locale,_._a[ri],_._meridiem),Ra(_),zl(_)}function po(_){const D=zl(function Go(_){let D=_._i;const C=_._f;return _._locale=_._locale||Xr(_._l),null===D||void 0===C&&""===D?la(_,{nullInput:!0}):(Oe(D)&&(_._i=D=_._locale.preparse(D,C)),Ye(D)?(_._d=R(D),_):(it(C)?function vl(_){let D,C,N,W,me;if(!_._f||0===_._f.length)return ht(_).invalidFormat=!0,la(_);for(me=0;me<_._f.length;me++)W=0,D=Object.assign({},_),null!=_._useUTC&&(D._useUTC=_._useUTC),D._f=_._f[me],Ea(D),Os(D)&&(W+=ht(D).charsLeftOver,W+=10*ht(D).unusedTokens.length,ht(D).score=W,(null==N||W<N)&&(N=W,C=D));Object.assign(_,C||D)}(_):C?Ea(_):function yl(_){const D=_._i;if(Ve(D))_._d=new Date;else if(Ye(D))_._d=R(D);else if(Oe(D))!function gl(_){if(!Oe(_._i))return _;const D=Io.exec(_._i);null!==D?_._d=new Date(+D[1]):(uo(_),!1!==_._isValid||(delete _._isValid,Ta(_),!1!==_._isValid||(delete _._isValid,la(_))))}(_);else if(it(D)&&D.length){const C=D.slice(0);_._a=C.map(N=>Oe(N)?parseInt(N,10):N),Ra(_)}else if(yt(D))!function Nc(_){if(_._d)return _;const D=_._i;if(yt(D)){const C=function Nt(_){const D={};let C,N;for(N in _)pt(_,N)&&(C=Yt(N),C&&(D[C]=_[N]));return D}(D);_._a=[C.year,C.month,C.day,C.hours,C.minutes,C.seconds,C.milliseconds].map(N=>Oe(N)?parseInt(N,10):N)}return Ra(_)}(_);else{if(!St(D))return la(_);_._d=new Date(D)}}(_),Os(_)||(_._d=null),_))}(_));return D._d=new Date(null!=D._d?D._d.getTime():NaN),Os(Object.assign({},D,{_isValid:null}))||(D._d=new Date(NaN)),D}function xl(_,D,C,N,W){return Ye(_)?_:function Fl(_,D,C,N,W){const me={};let ft=_;return(yt(ft)&&function Qt(_){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(_).length;let D;for(D in _)if(_.hasOwnProperty(D))return!1;return!0}(ft)||it(ft)&&0===ft.length)&&(ft=void 0),me._useUTC=me._isUTC=W,me._l=C,me._i=ft,me._f=D,me._strict=N,po(me)}(_,D,C,N,W)._d}function Ao(_){return _ instanceof Date?new Date(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate(),_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds(),_.getUTCMilliseconds()):null}function il(_){return _<0?-1*Math.round(-1*_):Math.round(_)}function es(_,D,C="milliseconds"){return!(!_||!D)&&("milliseconds"===C?_.valueOf()>D.valueOf():D.valueOf()<j(_,C).valueOf())}function Rs(_,D,C="milliseconds"){return!(!_||!D)&&("milliseconds"===C?_.valueOf()<D.valueOf():U(_,C).valueOf()<D.valueOf())}function fo(_,D,C="milliseconds"){if(!_||!D)return!1;if("milliseconds"===C)return _.valueOf()===D.valueOf();const N=D.valueOf();return j(_,C).valueOf()<=N&&N<=U(_,C).valueOf()}const bl=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Fa=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ma(_,D,C={}){const N=function Lo(_,D){if(null==_)return{};if(function Ol(_){return _ instanceof Ns}(_))return{milliseconds:_._milliseconds,day:_._days,month:_._months};if(St(_))return D?{[D]:_}:{milliseconds:_};if(Oe(_)){let C=bl.exec(_);if(C){const N="-"===C[1]?-1:1;return{year:0,day:Zt(C[qt])*N,hours:Zt(C[ri])*N,minutes:Zt(C[Li])*N,seconds:Zt(C[ai])*N,milliseconds:Zt(il(1e3*Zt(C[fi])))*N}}if(C=Fa.exec(_),C){const N="-"===C[1]?-1:1;return{year:xo(C[2],N),month:xo(C[3],N),week:xo(C[4],N),day:xo(C[5],N),hours:xo(C[6],N),minutes:xo(C[7],N),seconds:xo(C[8],N)}}}if(yt(_)&&("from"in _||"to"in _)){const C=function xs(_,D){if(!et(_)||!et(D))return{milliseconds:0,months:0};let C;const N=function zc(_,D,C={}){if(!C._isUTC)return _;const N=R(D),W=6e4*(C._offset||0),me=_.valueOf()-N.valueOf()+W;return N.setTime(N.valueOf()+me),N}(D,_,{_offset:_.getTimezoneOffset()});return Rs(_,N)?C=Ba(_,N):(C=Ba(N,_),C.milliseconds=-C.milliseconds,C.months=-C.months),C}(xl(_.from),xl(_.to));return{milliseconds:C.milliseconds,month:C.months}}return _}(_,D);return new Ns(N,C)}function xo(_,D){const C=_&&parseFloat(_.replace(",","."));return(isNaN(C)?0:C)*D}function Ba(_,D){const C={milliseconds:0,months:0};return C.months=Vi(D)-Vi(_)+12*(Oi(D)-Oi(_)),es(Ws(R(_),C.months,"month"),D)&&--C.months,C.milliseconds=+D-+Ws(R(_),C.months,"month"),C}function Ws(_,D,C,N){return gs(_,Ma(D,C),1,N)}function gs(_,D,C,N){const W=D._milliseconds,me=il(D._days),ft=il(D._months);return ft&&n(_,Vi(_,N)+ft*C,N),me&&k(_,cn(_,N)+me*C,N),W&&function M(_,D){_.setTime(D)}(_,function hn(_){return _.getTime()}(_)+W*C),R(_)}function Xs(_,D,C=Xr(),N){const W=Ui(_,N),me=function wl(_,D){if(!Oe(_))return _;const C=parseInt(_,10);if(!isNaN(C))return C;const N=D.weekdaysParse(_);return St(N)?N:null}(D,C);return Ws(_,me-W,"day")}function en(_,D=Xr(),C){return(Ui(_,C)+7-D.firstDayOfWeek())%7}const Ne=function(_){return 0===_?0:1===_?1:2===_?2:_%100>=3&&_%100<=10?3:_%100>=11?4:5},Pt={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},Jt=function(_){return function(D,C){const N=Ne(D);let W=Pt[_][Ne(D)];return 2===N&&(W=W[C?0:1]),W.replace(/%d/i,D.toString())}};"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),Jt("s"),Jt("s"),Jt("m"),Jt("m"),Jt("h"),Jt("h"),Jt("d"),Jt("d"),Jt("M"),Jt("M"),Jt("y"),Jt("y"),"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"gen._feb._mar._abr._mai._jun._jul._ago._set._oct._nov._des.".split("_"),"ene_feb_mar_abr_mai_jun_jul_ago_set_oct_nov_des".split("_"),"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),"diu._dil._dim._dix._dij._div._dis.".split("_"),"dg_dl_dt_dc_dj_dv_ds".split("_");const bs="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),ua="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");(function(_,D){let C,N=[];for(C=0;C<12;C++)N[C]=new RegExp("^"+_[C]+"$|^"+D[C]+"$","i")})(bs,ua),function(_){let D,C=[];for(D=0;D<12;D++)C[D]=new RegExp("^"+_[D]+"$","i")}(ua),function(_){let D,C=[];for(D=0;D<12;D++)C[D]=new RegExp("^"+_[D]+"$","i")}(bs),"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"Januar_Februar_Marts_April_Maj_Juni_Juli_August_September_Oktober_November_December".split("_"),"Jan_Feb_Mar_Apr_Maj_Jun_Jul_Aug_Sep_Okt_Nov_Dec".split("_"),"S\xf8ndag_Mandag_Tirsdag_Onsdag_Torsdag_Fredag_L\xf8rdag".split("_"),"S\xf8n_Man_Tir_Ons_Tor_Fre_L\xf8r".split("_"),"S\xf8_Ma_Ti_On_To_Fr_L\xf8".split("_"),"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),"P_E_T_K_N_R_L".split("_"),"P_E_T_K_N_R_L".split("_"),"nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),"xan_feb_mar_abr_mai_xu\xf1_xul_ago_set_out_nov_dec".split("_"),"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),"vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" "),"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),"v_h_k_sze_cs_p_szo".split("_"),"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),"Sij_Velj_O\u017eu_Tra_Svi_Lip_Srp_Kol_Ruj_Lis_Stu_Pro".split("_"),"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),"Ne_Po_Ut_Sr_\u010ce_Pe_Su".split("_"),"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),"dom_lun_mar_mer_gio_ven_sab".split("_"),"do_lu_ma_me_gi_ve_sa".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),"S_P_A_T_K_Pn_\u0160".split("_"),"Janv\u0101ris_Febru\u0101ris_Marts_Apr\u012blis_Maijs_J\u016bnijs_J\u016blijs_Augusts_Septembris_Oktobris_Novembris_Decembris".split("_"),"Jan_Feb_Mar_Apr_Mai_J\u016bn_J\u016bl_Aug_Sep_Okt_Nov_Dec".split("_"),"Sv\u0113tdiena_Pirmdiena_Otrdiena_Tre\u0161diena_Ceturtdiena_Piektdiena_Sestdiena".split("_"),"Sv\u0113td_Pirmd_Otrd_Tre\u0161d_Ceturtd_Piektd_Sestd".split("_"),"Sv_Pi_Ot_Tr_Ce_Pk_Se".split("_"),"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),"jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_"),"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),"ne_po_to_sr_\u010de_pe_so".split("_"),"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),"E Diel\xeb_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),"Di_He_Ma_Me_En_Pr_Sh".split("_"),"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_");const Ks={abbr:"th-be",months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:_=>"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===_,meridiem:(_,D,C)=>_<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07",calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},preparse(_,D){const C=Ks.longDateFormat[D]?Ks.longDateFormat[D]:D;return-1!==C.indexOf("YYYY",C.length-4)?_.substr(0,_.length-4)+(parseInt(_.substr(_.length-4),10)-543):_},getFullYear:(_,D=!1)=>543+(D?_.getUTCFullYear():_.getFullYear())};function Jr(_){return function(D){return _+"\u043e"+(11===Pi(D)?"\u0431":"")+"] LT"}}"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_"),"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),Jr("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),Jr("[\u0417\u0430\u0432\u0442\u0440\u0430 "),Jr("[\u0412\u0447\u043e\u0440\u0430 "),Jr("[\u0423] dddd ["),"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_");var Hc=Ot(140),rl=Ot(6504),Ya=Ot(6700),tc=Ot(756),ic=Ot(3252),bc=Ot(3920),bu=Ot(208);class nc extends Ya.g{constructor(D,C,N){super(D),C.pipe((0,bc.y)(tc.M)).pipe((0,bu.K)((ft,vi)=>vi?N(ft,vi):ft,D)).subscribe(ft=>this.next(ft))}}class Gc extends ic._{constructor(D,C,N){super(),this._dispatcher=D,this._reducer=C,this.source=N}select(D){return(this.source?.pipe((0,Re.k)(D))||(new ic._).pipe((0,Re.k)(D))).pipe((0,Ae.a)())}lift(D){const C=new Gc(this._dispatcher,this._reducer,this);return C.operator=D,C}dispatch(D){this._dispatcher.next(D)}next(D){this._dispatcher.next(D)}error(D){this._dispatcher.error(D)}complete(){}}var Vs=Ot(1368);function dp(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0\xa0\xa0"),A.C$Y())}function If(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td")(1,"a",1),A.qCj("click",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeMinutes(W.minuteStep))}),A.wR5(2,"span",2),A.C$Y()()}if(2&_){const C=A.GaO();A.yG2(),A.eAK("disabled",!C.canIncrementMinutes||!C.isEditable)}}function Ph(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0"),A.C$Y())}function dd(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td")(1,"a",1),A.qCj("click",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeSeconds(W.secondsStep))}),A.wR5(2,"span",2),A.C$Y()()}if(2&_){const C=A.GaO();A.yG2(),A.eAK("disabled",!C.canIncrementSeconds||!C.isEditable)}}function Af(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0\xa0\xa0"),A.C$Y())}function pd(_,D){1&_&&A.wR5(0,"td")}function Oh(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0:\xa0"),A.C$Y())}function rc(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td",4)(1,"input",5),A.qCj("wheel",function(W){A.usT(C);const me=A.GaO();return me.prevDef(W),A.CGJ(me.changeMinutes(me.minuteStep*me.wheelSign(W),"wheel"))})("keydown.ArrowUp",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeMinutes(W.minuteStep,"key"))})("keydown.ArrowDown",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeMinutes(-W.minuteStep,"key"))})("change",function(W){A.usT(C);const me=A.GaO();return A.CGJ(me.updateMinutes(W.target))}),A.C$Y()()}if(2&_){const C=A.GaO();A.eAK("has-error",C.invalidMinutes),A.yG2(),A.eAK("is-invalid",C.invalidMinutes),A.E7m("placeholder",C.minutesPlaceholder)("readonly",C.readonlyInput)("disabled",C.disabled)("value",C.minutes),A.e48("aria-label",C.labelMinutes)}}function eh(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0:\xa0"),A.C$Y())}function pp(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td",4)(1,"input",5),A.qCj("wheel",function(W){A.usT(C);const me=A.GaO();return me.prevDef(W),A.CGJ(me.changeSeconds(me.secondsStep*me.wheelSign(W),"wheel"))})("keydown.ArrowUp",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeSeconds(W.secondsStep,"key"))})("keydown.ArrowDown",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeSeconds(-W.secondsStep,"key"))})("change",function(W){A.usT(C);const me=A.GaO();return A.CGJ(me.updateSeconds(W.target))}),A.C$Y()()}if(2&_){const C=A.GaO();A.eAK("has-error",C.invalidSeconds),A.yG2(),A.eAK("is-invalid",C.invalidSeconds),A.E7m("placeholder",C.secondsPlaceholder)("readonly",C.readonlyInput)("disabled",C.disabled)("value",C.seconds),A.e48("aria-label",C.labelSeconds)}}function fp(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0\xa0\xa0"),A.C$Y())}function Lf(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td")(1,"button",8),A.qCj("click",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.toggleMeridian())}),A.OEk(2),A.C$Y()()}if(2&_){const C=A.GaO();A.yG2(),A.eAK("disabled",!C.isEditable||!C.canToggleMeridian),A.E7m("disabled",!C.isEditable||!C.canToggleMeridian),A.yG2(),A.oRS("",C.meridian," ")}}function fd(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0\xa0\xa0"),A.C$Y())}function Pf(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td")(1,"a",1),A.qCj("click",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeMinutes(-W.minuteStep))}),A.wR5(2,"span",7),A.C$Y()()}if(2&_){const C=A.GaO();A.yG2(),A.eAK("disabled",!C.canDecrementMinutes||!C.isEditable)}}function Rh(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0"),A.C$Y())}function th(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td")(1,"a",1),A.qCj("click",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.changeSeconds(-W.secondsStep))}),A.wR5(2,"span",7),A.C$Y()()}if(2&_){const C=A.GaO();A.yG2(),A.eAK("disabled",!C.canDecrementSeconds||!C.isEditable)}}function ih(_,D){1&_&&(A.I0R(0,"td"),A.OEk(1,"\xa0\xa0\xa0"),A.C$Y())}function Yl(_,D){1&_&&A.wR5(0,"td")}let io=(()=>{class _{static#e=this.WRITE_VALUE="[timepicker] write value from ng model";static#t=this.CHANGE_HOURS="[timepicker] change hours";static#i=this.CHANGE_MINUTES="[timepicker] change minutes";static#n=this.CHANGE_SECONDS="[timepicker] change seconds";static#r=this.SET_TIME_UNIT="[timepicker] set time unit";static#s=this.UPDATE_CONTROLS="[timepicker] update controls";writeValue(C){return{type:_.WRITE_VALUE,payload:C}}changeHours(C){return{type:_.CHANGE_HOURS,payload:C}}changeMinutes(C){return{type:_.CHANGE_MINUTES,payload:C}}changeSeconds(C){return{type:_.CHANGE_SECONDS,payload:C}}setTime(C){return{type:_.SET_TIME_UNIT,payload:C}}updateControls(C){return{type:_.UPDATE_CONTROLS,payload:C}}static#o=this.\u0275fac=function(N){return new(N||_)};static#a=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"platform"})}return _})();const wc=10,Da=24,jc=12,$m=60,Wm=60;function nh(_){return!(!_||_ instanceof Date&&isNaN(_.getHours()))&&("string"!=typeof _||nh(new Date(_)))}function md(_,D){return!(_.min&&D<_.min||_.max&&D>_.max)}function Cc(_){return typeof _>"u"?NaN:"number"==typeof _?_:parseInt(_,wc)}function sl(_,D=!1){const C=Cc(_);return isNaN(C)||C<0||C>(D?jc:Da)?NaN:C}function gd(_){const D=Cc(_);return isNaN(D)||D<0||D>$m?NaN:D}function Rf(_){const D=Cc(_);return isNaN(D)||D<0||D>Wm?NaN:D}function zs(_){return"string"==typeof _?new Date(_):_}function Sn(_,D){if(!_)return Sn(uu(new Date,0,0,0),D);if(!D)return _;let C=_.getHours(),N=_.getMinutes(),W=_.getSeconds();return D.hour&&(C+=Cc(D.hour)),D.minute&&(N+=Cc(D.minute)),D.seconds&&(W+=Cc(D.seconds)),uu(_,C,N,W)}function sc(_,D){let C=sl(D.hour);const N=gd(D.minute),W=Rf(D.seconds)||0;return D.isPM&&12!==C&&(C+=jc),_?isNaN(C)||isNaN(N)?_:uu(_,C,N,W):isNaN(C)||isNaN(N)?_:uu(new Date,C,N,W)}function uu(_,D,C,N){const W=new Date(_.getFullYear(),_.getMonth(),_.getDate(),D,C,N,_.getMilliseconds());return W.setFullYear(_.getFullYear()),W.setMonth(_.getMonth()),W.setDate(_.getDate()),W}function fa(_){const D=_.toString();return D.length>1?D:`0${D}`}function mp(_,D){return!isNaN(sl(_,D))}function gp(_){return!isNaN(gd(_))}function Vl(_){return!isNaN(Rf(_))}function Cu(_,D="0",C="0",N){return mp(_,N)&&gp(D)&&Vl(C)}function oc(_,D){return!(_.readonlyInput||_.disabled||D&&("wheel"===D.source&&!_.mousewheel||"key"===D.source&&!_.arrowkeys))}function xp(_){const{hourStep:D,minuteStep:C,secondsStep:N,readonlyInput:W,disabled:me,mousewheel:ft,arrowkeys:vi,showSpinners:on,showMeridian:Nr,showSeconds:_s,meridians:ro,min:ma,max:Qc}=_;return{hourStep:D,minuteStep:C,secondsStep:N,readonlyInput:W,disabled:me,mousewheel:ft,arrowkeys:vi,showSpinners:on,showMeridian:Nr,showSeconds:_s,meridians:ro,min:ma,max:Qc}}let _d=(()=>{class _{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.allowEmptyTime=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();const vd={value:void 0,config:new _d,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function Tu(_=vd,D){switch(D.type){case io.WRITE_VALUE:return Object.assign({},_,{value:D.payload});case io.CHANGE_HOURS:{if(!oc(_.config,D.payload)||!function vp(_,D){return!(!_.step||_.step>0&&!D.canIncrementHours||_.step<0&&!D.canDecrementHours)}(D.payload,_.controls))return _;const C=Sn(_.value,{hour:D.payload.step});return!_.config.max&&!_.config.min||md(_.config,C)?Object.assign({},_,{value:C}):_}case io.CHANGE_MINUTES:{if(!oc(_.config,D.payload)||!function zh(_,D){return!(!_.step||_.step>0&&!D.canIncrementMinutes||_.step<0&&!D.canDecrementMinutes)}(D.payload,_.controls))return _;const C=Sn(_.value,{minute:D.payload.step});return!_.config.max&&!_.config.min||md(_.config,C)?Object.assign({},_,{value:C}):_}case io.CHANGE_SECONDS:{if(!oc(_.config,D.payload)||!function yp(_,D){return!(!_.step||_.step>0&&!D.canIncrementSeconds||_.step<0&&!D.canDecrementSeconds)}(D.payload,_.controls))return _;const C=Sn(_.value,{seconds:D.payload.step});return!_.config.max&&!_.config.min||md(_.config,C)?Object.assign({},_,{value:C}):_}case io.SET_TIME_UNIT:{if(!oc(_.config))return _;const C=sc(_.value,D.payload);return Object.assign({},_,{value:C})}case io.UPDATE_CONTROLS:{const C=function zf(_,D){const{min:W,max:me,hourStep:ft,minuteStep:vi,secondsStep:on,showSeconds:Nr}=D,_s={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!_)return _s;if(me){const ro=Sn(_,{hour:ft});if(_s.canIncrementHours=me>ro&&_.getHours()+ft<24,!_s.canIncrementHours){const ma=Sn(_,{minute:vi});_s.canIncrementMinutes=Nr?me>ma:me>=ma}if(!_s.canIncrementMinutes){const ma=Sn(_,{seconds:on});_s.canIncrementSeconds=me>=ma}_.getHours()<12&&(_s.canToggleMeridian=Sn(_,{hour:12})<me)}if(W){const ro=Sn(_,{hour:-ft});if(_s.canDecrementHours=W<ro,!_s.canDecrementHours){const ma=Sn(_,{minute:-vi});_s.canDecrementMinutes=Nr?W<ma:W<=ma}if(!_s.canDecrementMinutes){const ma=Sn(_,{seconds:-on});_s.canDecrementSeconds=W<=ma}_.getHours()>=12&&(_s.canToggleMeridian=Sn(_,{hour:-12})>W)}return _s}(_.value,D.payload),N={value:_.value,config:D.payload,controls:C};return _.config.showMeridian!==N.config.showMeridian&&_.value&&(N.value=new Date(_.value)),Object.assign({},_,N)}default:return _}}let Tc=(()=>{class _ extends Gc{constructor(){const C=new Ya.g({type:"[mini-ngrx] dispatcher init"});super(C,Tu,new nc(vd,C,Tu))}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"platform"})}return _})();const kc={provide:rl.Y6,useExisting:(0,A.wd)(()=>Fh),multi:!0};let Fh=(()=>{class _{constructor(C,N,W,me){this._cd=N,this._store=W,this._timepickerActions=me,this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showMeridian=!0,this.showMinutes=!0,this.showSeconds=!1,this.meridians=["AM","PM"],this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.isValid=new A._w7,this.meridianChange=new A._w7,this.hours="",this.minutes="",this.seconds="",this.meridian="",this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.labelHours="hours",this.labelMinutes="minutes",this.labelSeconds="seconds",this.canIncrementHours=!0,this.canIncrementMinutes=!0,this.canIncrementSeconds=!0,this.canDecrementHours=!0,this.canDecrementMinutes=!0,this.canDecrementSeconds=!0,this.canToggleMeridian=!0,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.config=C,Object.assign(this,this.config),this.timepickerSub=W.select(ft=>ft.value).subscribe(ft=>{this._renderTime(ft),this.onChange(ft),this._store.dispatch(this._timepickerActions.updateControls(xp(this)))}),W.select(ft=>ft.controls).subscribe(ft=>{const vi=Cu(this.hours,this.minutes,this.seconds,this.isPM()),on=this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||vi;this.isValid.emit(on),Object.assign(this,ft),N.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(C){C.preventDefault()}wheelSign(C){return-1*Math.sign(C.deltaY||0)}ngOnChanges(){this._store.dispatch(this._timepickerActions.updateControls(xp(this)))}changeHours(C,N=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:C,source:N}))}changeMinutes(C,N=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:C,source:N}))}changeSeconds(C,N=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:C,source:N}))}updateHours(C){this.resetValidation(),this.hours=C.value;const N=mp(this.hours,this.isPM())&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||N))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(C){this.resetValidation(),this.minutes=C.value;const N=gp(this.minutes)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||N))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(C){this.resetValidation(),this.seconds=C.value;const N=Vl(this.seconds)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||N))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function _p(_,D,C){const N=sc(new Date,_);return!(!N||D&&N>D||C&&N<C)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}isOneOfDatesIsEmpty(){return function wu(_,D,C){return 0===_.length||0===D.length||0===C.length}(this.hours,this.minutes,this.seconds)}_updateTime(){const W=Cu(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM());if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||W))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(C){nh(C)?(this.resetValidation(),this._store.dispatch(this._timepickerActions.writeValue(zs(C)))):null==C&&this._store.dispatch(this._timepickerActions.writeValue())}registerOnChange(C){this.onChange=C}registerOnTouched(C){this.onTouched=C}setDisabledState(C){this.disabled=C,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub?.unsubscribe()}_renderTime(C){if(!C||!nh(C))return this.hours="",this.minutes="",this.seconds="",this.meridian=this.meridians[0],void this.meridianChange.emit(this.meridian);const N=zs(C);if(!N)return;let me=N.getHours();this.showMeridian&&(this.meridian=this.meridians[me>=12?1:0],this.meridianChange.emit(this.meridian),me%=12,0===me&&(me=12)),this.hours=fa(me),this.minutes=fa(N.getMinutes()),this.seconds=fa(N.getUTCSeconds())}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(_d),A.GI1(A.kD9),A.GI1(Tc),A.GI1(io))};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["timepicker"]],inputs:{hourStep:"hourStep",minuteStep:"minuteStep",secondsStep:"secondsStep",readonlyInput:"readonlyInput",disabled:"disabled",mousewheel:"mousewheel",arrowkeys:"arrowkeys",showSpinners:"showSpinners",showMeridian:"showMeridian",showMinutes:"showMinutes",showSeconds:"showSeconds",meridians:"meridians",min:"min",max:"max",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",secondsPlaceholder:"secondsPlaceholder"},outputs:{isValid:"isValid",meridianChange:"meridianChange"},features:[A.M5G([kc,Tc]),A.SYr],decls:31,vars:33,consts:[[1,"text-center",3,"hidden"],["href","javascript:void(0);",1,"btn","btn-link",3,"click"],[1,"bs-chevron","bs-chevron-up"],[4,"ngIf"],[1,"form-group","mb-3"],["type","text","maxlength","2",1,"form-control","text-center","bs-timepicker-field",3,"placeholder","readonly","disabled","value","wheel","keydown.ArrowUp","keydown.ArrowDown","change"],["class","form-group mb-3",3,"has-error",4,"ngIf"],[1,"bs-chevron","bs-chevron-down"],["type","button",1,"btn","btn-default","text-center",3,"disabled","click"]],template:function(N,W){1&N&&(A.I0R(0,"table")(1,"tbody")(2,"tr",0)(3,"td")(4,"a",1),A.qCj("click",function(){return W.changeHours(W.hourStep)}),A.wR5(5,"span",2),A.C$Y()(),A.yuY(6,dp,2,0,"td",3)(7,If,3,2,"td",3)(8,Ph,2,0,"td",3)(9,dd,3,2,"td",3)(10,Af,2,0,"td",3)(11,pd,1,0,"td",3),A.C$Y(),A.I0R(12,"tr")(13,"td",4)(14,"input",5),A.qCj("wheel",function(ft){return W.prevDef(ft),W.changeHours(W.hourStep*W.wheelSign(ft),"wheel")})("keydown.ArrowUp",function(){return W.changeHours(W.hourStep,"key")})("keydown.ArrowDown",function(){return W.changeHours(-W.hourStep,"key")})("change",function(ft){return W.updateHours(ft.target)}),A.C$Y()(),A.yuY(15,Oh,2,0,"td",3)(16,rc,2,9,"td",6)(17,eh,2,0,"td",3)(18,pp,2,9,"td",6)(19,fp,2,0,"td",3)(20,Lf,3,4,"td",3),A.C$Y(),A.I0R(21,"tr",0)(22,"td")(23,"a",1),A.qCj("click",function(){return W.changeHours(-W.hourStep)}),A.wR5(24,"span",7),A.C$Y()(),A.yuY(25,fd,2,0,"td",3)(26,Pf,3,2,"td",3)(27,Rh,2,0,"td",3)(28,th,3,2,"td",3)(29,ih,2,0,"td",3)(30,Yl,1,0,"td",3),A.C$Y()()()),2&N&&(A.yG2(2),A.E7m("hidden",!W.showSpinners),A.yG2(2),A.eAK("disabled",!W.canIncrementHours||!W.isEditable),A.yG2(2),A.E7m("ngIf",W.showMinutes),A.yG2(),A.E7m("ngIf",W.showMinutes),A.yG2(),A.E7m("ngIf",W.showSeconds),A.yG2(),A.E7m("ngIf",W.showSeconds),A.yG2(),A.E7m("ngIf",W.showMeridian),A.yG2(),A.E7m("ngIf",W.showMeridian),A.yG2(2),A.eAK("has-error",W.invalidHours),A.yG2(),A.eAK("is-invalid",W.invalidHours),A.E7m("placeholder",W.hoursPlaceholder)("readonly",W.readonlyInput)("disabled",W.disabled)("value",W.hours),A.e48("aria-label",W.labelHours),A.yG2(),A.E7m("ngIf",W.showMinutes),A.yG2(),A.E7m("ngIf",W.showMinutes),A.yG2(),A.E7m("ngIf",W.showSeconds),A.yG2(),A.E7m("ngIf",W.showSeconds),A.yG2(),A.E7m("ngIf",W.showMeridian),A.yG2(),A.E7m("ngIf",W.showMeridian),A.yG2(),A.E7m("hidden",!W.showSpinners),A.yG2(2),A.eAK("disabled",!W.canDecrementHours||!W.isEditable),A.yG2(2),A.E7m("ngIf",W.showMinutes),A.yG2(),A.E7m("ngIf",W.showMinutes),A.yG2(),A.E7m("ngIf",W.showSeconds),A.yG2(),A.E7m("ngIf",W.showSeconds),A.yG2(),A.E7m("ngIf",W.showMeridian),A.yG2(),A.E7m("ngIf",W.showMeridian))},dependencies:[Vs.u_],styles:[".bs-chevron{border-style:solid;display:block;width:9px;height:9px;position:relative;border-width:3px 0px 0 3px}.bs-chevron-up{transform:rotate(45deg);top:2px}.bs-chevron-down{transform:rotate(-135deg);top:-2px}.bs-timepicker-field{width:65px;padding:.375rem .55rem}\n"],encapsulation:2,changeDetection:0})}return _})(),bp=(()=>{class _{static forRoot(){return{ngModule:_,providers:[io,Tc]}}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275mod=A.a4G({type:_});static#i=this.\u0275inj=A.s3X({providers:[Tc],imports:[Vs.MD]})}return _})();var Ko=Ot(9684),Uc=Ot(6928),ol=Ot(6040),Ec=Ot(5657),Jo=Ot(7995),Va=Ot(6552);function yd(_,D){if(1&_){const C=A.KQA();A.I0R(0,"button",2),A.qCj("click",function(){const me=A.usT(C).$implicit,ft=A.GaO();return A.CGJ(ft.selectFromRanges(me))}),A.OEk(1),A.C$Y()}if(2&_){const C=D.$implicit,N=A.GaO();A.eAK("selected",C.value===N.selectedRange),A.yG2(),A.oRS(" ",C.label," ")}}function Fs(_,D){1&_&&A.wR5(0,"bs-current-date",4)}function wp(_,D){1&_&&A.wR5(0,"bs-timepicker")}const Bh=[[["bs-datepicker-navigation-view"]],"*"],ac=["bs-datepicker-navigation-view","*"],Xm=["bsDatepickerDayDecorator",""];function Ff(_,D){if(1&_){const C=A.KQA();A.SAx(0),A.OEk(1," \u200b "),A.I0R(2,"button",2),A.qCj("click",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.view("month"))}),A.I0R(3,"span"),A.OEk(4),A.C$Y()(),A.k70()}if(2&_){const C=A.GaO();A.yG2(2),A.E7m("disabled",C.isDisabled),A.yG2(2),A.cNF(C.calendar.monthTitle)}}function Cp(_,D){1&_&&A.wR5(0,"th")}function Tp(_,D){if(1&_&&(A.I0R(0,"th",5),A.OEk(1),A.C$Y()),2&_){const C=D.index,N=A.GaO();A.yG2(),A.oRS("",N.calendar.weekdays[C]," ")}}function hu(_,D){if(1&_){const C=A.KQA();A.I0R(0,"span",11),A.qCj("click",function(){A.usT(C);const W=A.GaO(2).$implicit,me=A.GaO();return A.CGJ(me.selectWeek(W))}),A.OEk(1),A.C$Y()}if(2&_){const C=A.GaO(2).index,N=A.GaO();A.yG2(),A.cNF(N.calendar.weekNumbers[C])}}function Bf(_,D){if(1&_){const C=A.KQA();A.I0R(0,"span",12),A.qCj("click",function(){A.usT(C);const W=A.GaO(2).$implicit,me=A.GaO();return A.CGJ(me.selectWeek(W))})("mouseenter",function(){A.usT(C);const W=A.GaO(2).$implicit,me=A.GaO();return A.CGJ(me.weekHoverHandler(W,!0))})("mouseleave",function(){A.usT(C);const W=A.GaO(2).$implicit,me=A.GaO();return A.CGJ(me.weekHoverHandler(W,!1))}),A.OEk(1),A.C$Y()}if(2&_){const C=A.GaO(2).index,N=A.GaO();A.yG2(),A.cNF(N.calendar.weekNumbers[C])}}function Nf(_,D){if(1&_&&(A.I0R(0,"td",8),A.yuY(1,hu,2,1,"span",9)(2,Bf,2,1,"span",10),A.C$Y()),2&_){const C=A.GaO(2);A.eAK("active-week",C.isWeekHovered),A.yG2(),A.E7m("ngIf",C.isiOS),A.yG2(),A.E7m("ngIf",!C.isiOS)}}function Yf(_,D){if(1&_){const C=A.KQA();A.I0R(0,"span",17),A.qCj("click",function(){A.usT(C);const W=A.GaO().$implicit,me=A.GaO(2);return A.CGJ(me.selectDay(W))})("mouseenter",function(){A.usT(C);const W=A.GaO().$implicit,me=A.GaO(2);return A.CGJ(me.hoverDay(W,!0))})("mouseleave",function(){A.usT(C);const W=A.GaO().$implicit,me=A.GaO(2);return A.CGJ(me.hoverDay(W,!1))}),A.OEk(1),A.C$Y()}if(2&_){const C=A.GaO().$implicit;A._6D("tooltip",C.tooltipText),A.E7m("day",C),A.yG2(),A.oRS("",C.label," 3")}}function kp(_,D){if(1&_){const C=A.KQA();A.I0R(0,"span",18),A.qCj("click",function(){A.usT(C);const W=A.GaO().$implicit,me=A.GaO(2);return A.CGJ(me.selectDay(W))})("mouseenter",function(){A.usT(C);const W=A.GaO().$implicit,me=A.GaO(2);return A.CGJ(me.hoverDay(W,!0))})("mouseleave",function(){A.usT(C);const W=A.GaO().$implicit,me=A.GaO(2);return A.CGJ(me.hoverDay(W,!1))}),A.OEk(1),A.C$Y()}if(2&_){const C=A.GaO().$implicit;A.E7m("day",C),A.yG2(),A.oRS("",C.label," 2")}}function Zm(_,D){if(1&_){const C=A.KQA();A.I0R(0,"span",19),A.qCj("click",function(){A.usT(C);const W=A.GaO().$implicit,me=A.GaO(2);return A.CGJ(me.selectDay(W))}),A.OEk(1),A.C$Y()}if(2&_){const C=A.GaO().$implicit;A.E7m("day",C),A.yG2(),A.oRS("",C.label," 1")}}function qm(_,D){if(1&_&&(A.I0R(0,"td",13),A.yuY(1,Yf,2,3,"span",14)(2,kp,2,2,"span",15)(3,Zm,2,2,"span",16),A.C$Y()),2&_){const C=A.GaO(2);A.yG2(),A.E7m("ngIf",!C.isiOS&&C.isShowTooltip),A.yG2(),A.E7m("ngIf",!C.isiOS&&!C.isShowTooltip),A.yG2(),A.E7m("ngIf",C.isiOS)}}function Vf(_,D){if(1&_&&(A.I0R(0,"tr"),A.yuY(1,Nf,3,4,"td",6)(2,qm,4,3,"td",7),A.C$Y()),2&_){const C=D.$implicit,N=A.GaO();A.yG2(),A.E7m("ngIf",N.options&&N.options.showWeekNumbers),A.yG2(),A.E7m("ngForOf",C.days)}}function Hf(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td",4),A.qCj("click",function(){const me=A.usT(C).$implicit,ft=A.GaO(2);return A.CGJ(ft.viewMonth(me))})("mouseenter",function(){const me=A.usT(C).$implicit,ft=A.GaO(2);return A.CGJ(ft.hoverMonth(me,!0))})("mouseleave",function(){const me=A.usT(C).$implicit,ft=A.GaO(2);return A.CGJ(ft.hoverMonth(me,!1))}),A.I0R(1,"span"),A.OEk(2),A.C$Y()()}if(2&_){const C=D.$implicit;A.eAK("disabled",C.isDisabled)("is-highlighted",C.isHovered),A.yG2(),A.eAK("selected",C.isSelected),A.yG2(),A.cNF(C.label)}}function rh(_,D){if(1&_&&(A.I0R(0,"tr"),A.yuY(1,Hf,3,7,"td",3),A.C$Y()),2&_){const C=D.$implicit;A.yG2(),A.E7m("ngForOf",C)}}function xd(_,D){if(1&_){const C=A.KQA();A.I0R(0,"td",4),A.qCj("click",function(){const me=A.usT(C).$implicit,ft=A.GaO(2);return A.CGJ(ft.viewYear(me))})("mouseenter",function(){const me=A.usT(C).$implicit,ft=A.GaO(2);return A.CGJ(ft.hoverYear(me,!0))})("mouseleave",function(){const me=A.usT(C).$implicit,ft=A.GaO(2);return A.CGJ(ft.hoverYear(me,!1))}),A.I0R(1,"span"),A.OEk(2),A.C$Y()()}if(2&_){const C=D.$implicit;A.eAK("disabled",C.isDisabled)("is-highlighted",C.isHovered),A.yG2(),A.eAK("selected",C.isSelected),A.yG2(),A.cNF(C.label)}}function Ep(_,D){if(1&_&&(A.I0R(0,"tr"),A.yuY(1,xd,3,7,"td",3),A.C$Y()),2&_){const C=D.$implicit;A.yG2(),A.E7m("ngForOf",C)}}const Nh=["startTP"];function Qo(_,D){if(1&_){const C=A.KQA();A.I0R(0,"bs-days-calendar-view",11),A.qCj("onNavigate",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.navigateTo(W))})("onViewMode",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.setViewMode(W))})("onHover",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.dayHoverHandler(W))})("onHoverWeek",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.weekHoverHandler(W))})("onSelect",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.daySelectHandler(W))}),A.wVc(1,"async"),A.C$Y()}if(2&_){const C=D.$implicit,N=A.GaO(3);A.eAK("bs-datepicker-multiple",N.multipleCalendars),A.E7m("calendar",C)("isDisabled",N.isDatePickerDisabled)("options",A.kDX(1,5,N.options$))}}function Sp(_,D){if(1&_&&A.wR5(0,"timepicker",13,16),2&_){const C=A.GaO(4);A.E7m("disabled",C.isDatePickerDisabled)}}function bd(_,D){if(1&_&&(A.I0R(0,"div",12),A.wR5(1,"timepicker",13,14),A.yuY(3,Sp,2,1,"timepicker",15),A.C$Y()),2&_){const C=A.GaO(3);A.yG2(),A.E7m("disabled",C.isDatePickerDisabled),A.yG2(2),A.E7m("ngIf",C.isRangePicker)}}function lc(_,D){if(1&_&&(A.SAx(0),A.I0R(1,"div",8),A.yuY(2,Qo,2,7,"bs-days-calendar-view",9),A.wVc(3,"async"),A.C$Y(),A.yuY(4,bd,4,2,"div",10),A.k70()),2&_){const C=A.GaO(2);A.yG2(2),A.E7m("ngForOf",A.kDX(3,2,C.daysCalendar$)),A.yG2(2),A.E7m("ngIf",C.withTimepicker)}}function Mp(_,D){if(1&_){const C=A.KQA();A.I0R(0,"bs-month-calendar-view",18),A.qCj("onNavigate",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.navigateTo(W))})("onViewMode",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.setViewMode(W))})("onHover",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.monthHoverHandler(W))})("onSelect",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.monthSelectHandler(W))}),A.C$Y()}if(2&_){const C=D.$implicit,N=A.GaO(3);A.eAK("bs-datepicker-multiple",N.multipleCalendars),A.E7m("calendar",C)}}function du(_,D){if(1&_&&(A.I0R(0,"div",8),A.yuY(1,Mp,1,3,"bs-month-calendar-view",17),A.wVc(2,"async"),A.C$Y()),2&_){const C=A.GaO(2);A.yG2(),A.E7m("ngForOf",A.kDX(2,1,C.monthsCalendar))}}function sh(_,D){if(1&_){const C=A.KQA();A.I0R(0,"bs-years-calendar-view",18),A.qCj("onNavigate",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.navigateTo(W))})("onViewMode",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.setViewMode(W))})("onHover",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.yearHoverHandler(W))})("onSelect",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.yearSelectHandler(W))}),A.C$Y()}if(2&_){const C=D.$implicit,N=A.GaO(3);A.eAK("bs-datepicker-multiple",N.multipleCalendars),A.E7m("calendar",C)}}function Hl(_,D){if(1&_&&(A.I0R(0,"div",8),A.yuY(1,sh,1,3,"bs-years-calendar-view",17),A.wVc(2,"async"),A.C$Y()),2&_){const C=A.GaO(2);A.yG2(),A.E7m("ngForOf",A.kDX(2,1,C.yearsCalendar))}}function El(_,D){1&_&&(A.I0R(0,"div",19)(1,"button",20),A.OEk(2,"Apply"),A.C$Y(),A.I0R(3,"button",21),A.OEk(4,"Cancel"),A.C$Y()())}function oh(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",24)(1,"button",25),A.qCj("click",function(){A.usT(C);const W=A.GaO(3);return A.CGJ(W.setToday())}),A.OEk(2),A.C$Y()()}if(2&_){const C=A.GaO(3);A.eAK("today-left","left"===C.todayPos)("today-right","right"===C.todayPos)("today-center","center"===C.todayPos),A.yG2(2),A.cNF(C.todayBtnLbl)}}function wd(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",26)(1,"button",25),A.qCj("click",function(){A.usT(C);const W=A.GaO(3);return A.CGJ(W.clearDate())}),A.OEk(2),A.C$Y()()}if(2&_){const C=A.GaO(3);A.eAK("clear-left","left"===C.clearPos)("clear-right","right"===C.clearPos)("clear-center","center"===C.clearPos),A.yG2(2),A.cNF(C.clearBtnLbl)}}function Gf(_,D){if(1&_&&(A.I0R(0,"div",19),A.yuY(1,oh,3,7,"div",22)(2,wd,3,7,"div",23),A.C$Y()),2&_){const C=A.GaO(2);A.yG2(),A.E7m("ngIf",C.showTodayBtn),A.yG2(),A.E7m("ngIf",C.showClearBtn)}}function ku(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",27)(1,"bs-custom-date-view",28),A.qCj("onSelect",function(W){A.usT(C);const me=A.GaO(2);return A.CGJ(me.setRangeOnCalendar(W))}),A.C$Y()()}if(2&_){const C=A.GaO(2);A.yG2(),A.E7m("selectedRange",C.chosenRange)("ranges",C.customRanges)("customRangeLabel",C.customRangeBtnLbl)}}function Cd(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",1)(1,"div",2),A.qCj("@datepickerAnimation.done",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.positionServiceEnable())}),A.I0R(2,"div",3),A.wVc(3,"async"),A.yuY(4,lc,5,4,"ng-container",4)(5,du,3,3,"div",5)(6,Hl,3,3,"div",5),A.C$Y(),A.yuY(7,El,5,0,"div",6)(8,Gf,3,2,"div",6),A.C$Y(),A.yuY(9,ku,2,3,"div",7),A.C$Y()}if(2&_){const C=A.GaO();A.E7m("ngClass",C.containerClass),A.yG2(),A.E7m("@datepickerAnimation",C.animationState),A.yG2(),A.E7m("ngSwitch",A.kDX(3,9,C.viewMode)),A.yG2(2),A.E7m("ngSwitchCase","day"),A.yG2(),A.E7m("ngSwitchCase","month"),A.yG2(),A.E7m("ngSwitchCase","year"),A.yG2(),A.E7m("ngIf",!1),A.yG2(),A.E7m("ngIf",C.showTodayBtn||C.showClearBtn),A.yG2(),A.E7m("ngIf",C.customRanges&&C.customRanges.length>0)}}const Ap=["endTP"];function Du(_,D){if(1&_){const C=A.KQA();A.I0R(0,"bs-days-calendar-view",11),A.qCj("onNavigate",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.navigateTo(W))})("onViewMode",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.setViewMode(W))})("onHover",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.dayHoverHandler(W))})("onHoverWeek",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.weekHoverHandler(W))})("onSelect",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.daySelectHandler(W))}),A.wVc(1,"async"),A.C$Y()}if(2&_){const C=D.$implicit,N=A.GaO(3);A.eAK("bs-datepicker-multiple",N.multipleCalendars),A.E7m("calendar",C)("isDisabled",N.isDatePickerDisabled)("options",A.kDX(1,5,N.options$))}}function Lp(_,D){if(1&_&&A.wR5(0,"timepicker",13,16),2&_){const C=A.GaO(4);A.E7m("disabled",C.isDatePickerDisabled)}}function Td(_,D){if(1&_&&(A.I0R(0,"div",12),A.wR5(1,"timepicker",13,14),A.yuY(3,Lp,2,1,"timepicker",15),A.C$Y()),2&_){const C=A.GaO(3);A.yG2(),A.E7m("disabled",C.isDatePickerDisabled),A.yG2(2),A.E7m("ngIf",C.isRangePicker)}}function Pp(_,D){if(1&_&&(A.SAx(0),A.I0R(1,"div",8),A.yuY(2,Du,2,7,"bs-days-calendar-view",9),A.wVc(3,"async"),A.C$Y(),A.yuY(4,Td,4,2,"div",10),A.k70()),2&_){const C=A.GaO(2);A.yG2(2),A.E7m("ngForOf",A.kDX(3,2,C.daysCalendar$)),A.yG2(2),A.E7m("ngIf",C.withTimepicker)}}function Uf(_,D){if(1&_){const C=A.KQA();A.I0R(0,"bs-month-calendar-view",18),A.qCj("onNavigate",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.navigateTo(W))})("onViewMode",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.setViewMode(W))})("onHover",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.monthHoverHandler(W))})("onSelect",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.monthSelectHandler(W))}),A.C$Y()}if(2&_){const C=D.$implicit,N=A.GaO(3);A.eAK("bs-datepicker-multiple",N.multipleCalendars),A.E7m("calendar",C)}}function $f(_,D){if(1&_&&(A.I0R(0,"div",8),A.yuY(1,Uf,1,3,"bs-month-calendar-view",17),A.wVc(2,"async"),A.C$Y()),2&_){const C=A.GaO(2);A.yG2(),A.E7m("ngForOf",A.kDX(2,1,C.monthsCalendar))}}function ch(_,D){if(1&_){const C=A.KQA();A.I0R(0,"bs-years-calendar-view",18),A.qCj("onNavigate",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.navigateTo(W))})("onViewMode",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.setViewMode(W))})("onHover",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.yearHoverHandler(W))})("onSelect",function(W){A.usT(C);const me=A.GaO(3);return A.CGJ(me.yearSelectHandler(W))}),A.C$Y()}if(2&_){const C=D.$implicit,N=A.GaO(3);A.eAK("bs-datepicker-multiple",N.multipleCalendars),A.E7m("calendar",C)}}function Op(_,D){if(1&_&&(A.I0R(0,"div",8),A.yuY(1,ch,1,3,"bs-years-calendar-view",17),A.wVc(2,"async"),A.C$Y()),2&_){const C=A.GaO(2);A.yG2(),A.E7m("ngForOf",A.kDX(2,1,C.yearsCalendar))}}function Wc(_,D){1&_&&(A.I0R(0,"div",19)(1,"button",20),A.OEk(2,"Apply"),A.C$Y(),A.I0R(3,"button",21),A.OEk(4,"Cancel"),A.C$Y()())}function ns(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",24)(1,"button",25),A.qCj("click",function(){A.usT(C);const W=A.GaO(3);return A.CGJ(W.setToday())}),A.OEk(2),A.C$Y()()}if(2&_){const C=A.GaO(3);A.eAK("today-left","left"===C.todayPos)("today-right","right"===C.todayPos)("today-center","center"===C.todayPos),A.yG2(2),A.cNF(C.todayBtnLbl)}}function kd(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",26)(1,"button",25),A.qCj("click",function(){A.usT(C);const W=A.GaO(3);return A.CGJ(W.clearDate())}),A.OEk(2),A.C$Y()()}if(2&_){const C=A.GaO(3);A.eAK("clear-left","left"===C.clearPos)("clear-right","right"===C.clearPos)("clear-center","center"===C.clearPos),A.yG2(2),A.cNF(C.clearBtnLbl)}}function hc(_,D){if(1&_&&(A.I0R(0,"div",19),A.yuY(1,ns,3,7,"div",22)(2,kd,3,7,"div",23),A.C$Y()),2&_){const C=A.GaO(2);A.yG2(),A.E7m("ngIf",C.showTodayBtn),A.yG2(),A.E7m("ngIf",C.showClearBtn)}}function dc(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",27)(1,"bs-custom-date-view",28),A.qCj("onSelect",function(W){A.usT(C);const me=A.GaO(2);return A.CGJ(me.setRangeOnCalendar(W))}),A.C$Y()()}if(2&_){const C=A.GaO(2);A.yG2(),A.E7m("selectedRange",C.chosenRange)("ranges",C.customRanges)("customRangeLabel",C.customRangeBtnLbl)}}function jl(_,D){if(1&_){const C=A.KQA();A.I0R(0,"div",1)(1,"div",2),A.qCj("@datepickerAnimation.done",function(){A.usT(C);const W=A.GaO();return A.CGJ(W.positionServiceEnable())}),A.I0R(2,"div",3),A.wVc(3,"async"),A.yuY(4,Pp,5,4,"ng-container",4)(5,$f,3,3,"div",5)(6,Op,3,3,"div",5),A.C$Y(),A.yuY(7,Wc,5,0,"div",6)(8,hc,3,2,"div",6),A.C$Y(),A.yuY(9,dc,2,3,"div",7),A.C$Y()}if(2&_){const C=A.GaO();A.E7m("ngClass",C.containerClass),A.yG2(),A.E7m("@datepickerAnimation",C.animationState),A.yG2(),A.E7m("ngSwitch",A.kDX(3,9,C.viewMode)),A.yG2(2),A.E7m("ngSwitchCase","day"),A.yG2(),A.E7m("ngSwitchCase","month"),A.yG2(),A.E7m("ngSwitchCase","year"),A.yG2(),A.E7m("ngIf",!1),A.yG2(),A.E7m("ngIf",C.showTodayBtn||C.showClearBtn),A.yG2(),A.E7m("ngIf",C.customRanges&&C.customRanges.length>0)}}let Ia=(()=>{class _{constructor(){this.adaptivePosition=!1,this.useUtc=!1,this.isAnimated=!1,this.startView="day",this.returnFocusToInput=!1,this.containerClass="theme-green",this.displayMonths=1,this.showWeekNumbers=!0,this.dateInputFormat="L",this.rangeSeparator=" - ",this.rangeInputFormat="L",this.monthTitle="MMMM",this.yearTitle="YYYY",this.dayLabel="D",this.monthLabel="MMMM",this.yearLabel="YYYY",this.weekNumbers="w",this.showTodayButton=!1,this.showClearButton=!1,this.todayPosition="center",this.clearPosition="right",this.todayButtonLabel="Today",this.clearButtonLabel="Clear",this.customRangeButtonLabel="Custom Range",this.withTimepicker=!1,this.allowedPositions=["top","bottom"],this.keepDatepickerOpened=!1,this.keepDatesOutOfRules=!1}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();const hh="220ms cubic-bezier(0, 0, 0.2, 1)",dh=(0,Ko.gV)("datepickerAnimation",[(0,Ko.K2)("animated-down",(0,Ko.wb)({height:"*",overflow:"hidden"})),(0,Ko.aK)("* => animated-down",[(0,Ko.wb)({height:0,overflow:"hidden"}),(0,Ko.Cs)(hh)]),(0,Ko.K2)("animated-up",(0,Ko.wb)({height:"*",overflow:"hidden"})),(0,Ko.aK)("* => animated-up",[(0,Ko.wb)({height:"*",overflow:"hidden"}),(0,Ko.Cs)(hh)]),(0,Ko.aK)("* => unanimated",(0,Ko.Cs)("0s"))]);class Gh{constructor(){this.containerClass="",this.customRanges=[],this.chosenRange=[],this._daysCalendarSub=new Uc.wH,this.selectedTimeSub=new Uc.wH}set minDate(D){this._effects?.setMinDate(D)}set maxDate(D){this._effects?.setMaxDate(D)}set daysDisabled(D){this._effects?.setDaysDisabled(D)}set datesDisabled(D){this._effects?.setDatesDisabled(D)}set datesEnabled(D){this._effects?.setDatesEnabled(D)}set isDisabled(D){this._effects?.setDisabled(D)}set dateCustomClasses(D){this._effects?.setDateCustomClasses(D)}set dateTooltipTexts(D){this._effects?.setDateTooltipTexts(D)}set daysCalendar$(D){this._daysCalendar$=D,this._daysCalendarSub.unsubscribe(),this._daysCalendarSub.add(this._daysCalendar$.subscribe(C=>{this.multipleCalendars=!!C&&C.length>1}))}get daysCalendar$(){return this._daysCalendar$}setViewMode(D){}navigateTo(D){}dayHoverHandler(D){}weekHoverHandler(D){}monthHoverHandler(D){}yearHoverHandler(D){}timeSelectHandler(D,C){}daySelectHandler(D){}monthSelectHandler(D){}yearSelectHandler(D){}setRangeOnCalendar(D){}setToday(){}clearDate(){}_stopPropagation(D){D.stopPropagation()}}let no=(()=>{class _{static#e=this.CALCULATE="[datepicker] calculate dates matrix";static#t=this.FORMAT="[datepicker] format datepicker values";static#i=this.FLAG="[datepicker] set flags";static#n=this.SELECT="[datepicker] select date";static#r=this.NAVIGATE_OFFSET="[datepicker] shift view date";static#s=this.NAVIGATE_TO="[datepicker] change view date";static#o=this.SET_OPTIONS="[datepicker] update render options";static#a=this.HOVER="[datepicker] hover date";static#l=this.CHANGE_VIEWMODE="[datepicker] switch view mode";static#c=this.SET_MIN_DATE="[datepicker] set min date";static#u=this.SET_MAX_DATE="[datepicker] set max date";static#h=this.SET_DAYSDISABLED="[datepicker] set days disabled";static#d=this.SET_DATESDISABLED="[datepicker] set dates disabled";static#p=this.SET_DATESENABLED="[datepicker] set dates enabled";static#f=this.SET_IS_DISABLED="[datepicker] set is disabled";static#m=this.SET_DATE_CUSTOM_CLASSES="[datepicker] set date custom classes";static#g=this.SET_DATE_TOOLTIP_TEXTS="[datepicker] set date tooltip texts";static#_=this.SET_LOCALE="[datepicker] set datepicker locale";static#v=this.SELECT_TIME="[datepicker] select time";static#y=this.SELECT_RANGE="[daterangepicker] select dates range";calculate(){return{type:_.CALCULATE}}format(){return{type:_.FORMAT}}flag(){return{type:_.FLAG}}select(C){return{type:_.SELECT,payload:C}}selectTime(C,N){return{type:_.SELECT_TIME,payload:{date:C,index:N}}}changeViewMode(C){return{type:_.CHANGE_VIEWMODE,payload:C}}navigateTo(C){return{type:_.NAVIGATE_TO,payload:C}}navigateStep(C){return{type:_.NAVIGATE_OFFSET,payload:C}}setOptions(C){return{type:_.SET_OPTIONS,payload:C}}selectRange(C){return{type:_.SELECT_RANGE,payload:C}}hoverDay(C){return{type:_.HOVER,payload:C.isHovered?C.cell.date:null}}minDate(C){return{type:_.SET_MIN_DATE,payload:C}}maxDate(C){return{type:_.SET_MAX_DATE,payload:C}}daysDisabled(C){return{type:_.SET_DAYSDISABLED,payload:C}}datesDisabled(C){return{type:_.SET_DATESDISABLED,payload:C}}datesEnabled(C){return{type:_.SET_DATESENABLED,payload:C}}isDisabled(C){return{type:_.SET_IS_DISABLED,payload:C}}setDateCustomClasses(C){return{type:_.SET_DATE_CUSTOM_CLASSES,payload:C}}setDateTooltipTexts(C){return{type:_.SET_DATE_TOOLTIP_TEXTS,payload:C}}setLocale(C){return{type:_.SET_LOCALE,payload:C}}static#x=this.\u0275fac=function(N){return new(N||_)};static#b=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"platform"})}return _})(),jh=(()=>{class _{constructor(){this._defaultLocale="en",this._locale=new Ya.g(this._defaultLocale),this._localeChange=this._locale.asObservable()}get locale(){return this._locale}get localeChange(){return this._localeChange}get currentLocale(){return this._locale.getValue()}use(C){C!==this.currentLocale&&this._locale.next(C)}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"platform"})}return _})(),Iu=(()=>{class _{constructor(C,N){this._actions=C,this._localeService=N,this._subs=[]}init(C){return this._store=C,this}setValue(C){this._store?.dispatch(this._actions.select(C))}setRangeValue(C){this._store?.dispatch(this._actions.selectRange(C))}setMinDate(C){return this._store?.dispatch(this._actions.minDate(C)),this}setMaxDate(C){return this._store?.dispatch(this._actions.maxDate(C)),this}setDaysDisabled(C){return this._store?.dispatch(this._actions.daysDisabled(C)),this}setDatesDisabled(C){return this._store?.dispatch(this._actions.datesDisabled(C)),this}setDatesEnabled(C){return this._store?.dispatch(this._actions.datesEnabled(C)),this}setDisabled(C){return this._store?.dispatch(this._actions.isDisabled(C)),this}setDateCustomClasses(C){return this._store?.dispatch(this._actions.setDateCustomClasses(C)),this}setDateTooltipTexts(C){return this._store?.dispatch(this._actions.setDateTooltipTexts(C)),this}setOptions(C){const N=Object.assign({locale:this._localeService.currentLocale},C);return this._store?.dispatch(this._actions.setOptions(N)),this}setBindings(C){return this._store?(C.selectedTime=this._store.select(N=>N.selectedTime).pipe((0,sn.I)(N=>!!N)),C.daysCalendar$=this._store.select(N=>N.flaggedMonths).pipe((0,sn.I)(N=>!!N)),C.monthsCalendar=this._store.select(N=>N.flaggedMonthsCalendar).pipe((0,sn.I)(N=>!!N)),C.yearsCalendar=this._store.select(N=>N.yearsCalendarFlagged).pipe((0,sn.I)(N=>!!N)),C.viewMode=this._store.select(N=>N.view?.mode),C.options$=(0,ol.E)([this._store.select(N=>N.showWeekNumbers),this._store.select(N=>N.displayMonths)]).pipe((0,Re.k)(N=>({showWeekNumbers:N[0],displayMonths:N[1]}))),this):this}setEventHandlers(C){return C.setViewMode=N=>{this._store?.dispatch(this._actions.changeViewMode(N))},C.navigateTo=N=>{this._store?.dispatch(this._actions.navigateStep(N.step))},C.dayHoverHandler=N=>{const W=N.cell;W.isOtherMonth||W.isDisabled||(this._store?.dispatch(this._actions.hoverDay(N)),W.isHovered=N.isHovered)},C.monthHoverHandler=N=>{N.cell.isHovered=N.isHovered},C.yearHoverHandler=N=>{N.cell.isHovered=N.isHovered},this}registerDatepickerSideEffects(){return this._store?(this._subs.push(this._store.select(C=>C.view).subscribe(()=>{this._store?.dispatch(this._actions.calculate())})),this._subs.push(this._store.select(C=>C.monthsModel).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.format()))),this._subs.push(this._store.select(C=>C.formattedMonths).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(C=>C.selectedDate).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(C=>C.selectedRange).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(C=>C.monthsCalendar).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(C=>C.yearsCalendarModel).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(C=>C.hoveredDate).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(C=>C.dateCustomClasses).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(C=>C.dateTooltipTexts).pipe((0,sn.I)(C=>!!C)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._localeService.localeChange.subscribe(C=>this._store?.dispatch(this._actions.setLocale(C)))),this):this}destroy(){for(const C of this._subs)C.unsubscribe()}static#e=this.\u0275fac=function(N){return new(N||_)(A.CoB(no),A.CoB(jh))};static#t=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"platform"})}return _})();const Sd={date:new Date,mode:"day"},Md=Object.assign(new Ia,{locale:"en",view:Sd,selectedRange:[],selectedTime:[],monthViewOptions:{width:7,height:6}});function Uh(_,D,C){const N=D&&Rs(U(_,"month"),D,"day"),W=C&&es(j(_,"month"),C,"day");return N||W||!1}function ph(_,D,C){const N=D&&Rs(U(_,"year"),D,"day"),W=C&&es(j(_,"year"),C,"day");return N||W||!1}function Zc(_,D,C){return!!(D&&it(D)&&D.length)&&(C&&"year"===C&&!D[0].getDate()?D.some(N=>fo(_,N,"year")):D.some(N=>fo(_,N,"date")))}function Au(_,D,C){return!!(D&&it(D)&&D.length)&&!D.some(N=>fo(_,N,C||"date"))}function Dd(_,D=0){const C=_&&_.yearsCalendarModel&&_.yearsCalendarModel[D];return C?.years[0]&&C.years[0][0]&&C.years[0][0].date}function Np(_,D){return!_||!D||!_.length&&!_[0].value||_.forEach(C=>(!C||!C.value||C.value instanceof Date||!(C.value instanceof Array&&C.value.length)||(C.value=Id(C.value,D)),_)),_}function Yp(_,D){return!_||!D||_ instanceof Array&&!_.length||_ instanceof Date?_:Id(_,D)}function Id(_,D){return _ instanceof Array?_.map(N=>N&&(es(N,D,"date")&&(N=D),N)):_}function Ad(_){return _&&Ld(_)}function $h(_){return _?.length&&_.map(D=>D&&Ld(D)),_}function Ld(_){const D=new Date;return _.setMilliseconds(D.getMilliseconds()),_.setSeconds(D.getSeconds()),_.setMinutes(D.getMinutes()),_.setHours(D.getHours()),_}function Wh(_,D){let C=_.initialDate;const N=new Array(_.height);for(let W=0;W<_.height;W++){N[W]=new Array(_.width);for(let me=0;me<_.width;me++)N[W][me]=D(C),C=In(C,_.shift)}return N}function Pd(_,D){const C=function gi(_){return xn(_.getFullYear(),_.getMonth(),1,_.getHours(),_.getMinutes(),_.getSeconds())}(_),N=function Bp(_,D){if(function Tr(_,D){return _.getDay()===Number(D)}(_,D.firstDayOfWeek))return _;const N=function pu(_,D){const C=Number(D);if(isNaN(C))return 0;if(0===C)return _;const N=_-C%7;return N<0?N+7:N}(Ui(_),D.firstDayOfWeek);return In(_,{day:-N})}(C,D);return{daysMatrix:Wh({width:D.width||0,height:D.height||0,initialDate:N,shift:{day:1}},ft=>ft),month:C}}function Qf(_,D,C){return _.map(N=>N[0]?Is(N[0],D,C):"")}function em(_){const D=Xr(_),C=D.weekdaysShort(),N=D.firstDayOfWeek();return[...C.slice(N),...C.slice(0,N)]}function Ha(_,D){return!D||_>=D}const Qm=4,Hp=3,eg={month:1};function tm(_,D){const C=j(_,"year");return{months:Wh({width:Hp,height:Qm,initialDate:C,shift:eg},me=>({date:me,label:Is(me,D.monthLabel,D.locale)})),monthTitle:"",yearTitle:Is(_,D.yearTitle,D.locale),hideRightArrow:!1,hideLeftArrow:!1,disableRightArrow:!1,disableLeftArrow:!1}}const Xh=4,fh=4,mh=Xh*fh,Ul=-1*(Math.floor(mh/2)-1),Lu={year:1};function Gp(_,D,C){const N=function im(_,D){return D&&_.getFullYear()>=D.getFullYear()&&_.getFullYear()<D.getFullYear()+mh?D:In(_,{year:Ul})}(_,C),me=Wh({width:fh,height:Xh,initialDate:N,shift:Lu},vi=>({date:vi,label:Is(vi,D.yearLabel,D.locale)})),ft=function jp(_,D){return`${Is(_[0][0].date,D.yearTitle,D.locale)} - ${Is(_[Xh-1][fh-1].date,D.yearTitle,D.locale)}`}(me,D);return{years:me,monthTitle:"",yearTitle:ft,hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}function Up(_,D){!_||!isNaN(_.getTime())||(_.setHours(D.getHours()),_.setMinutes(D.getMinutes()),_.setSeconds(D.getSeconds()),_.setMilliseconds(D.getMilliseconds()))}function ll(_=Md,D){switch(D.type){case no.CALCULATE:return function rm(_){if(!_.view)return _;let D;D=_.displayOneMonthRange&&Rd(_.view.date,_.minDate,_.maxDate)?1:_.displayMonths||1;let C=_.view.date;if("day"===_.view.mode&&_.monthViewOptions){_.showPreviousMonth&&_.selectedRange&&0===_.selectedRange.length&&(C=In(C,{month:-1})),_.monthViewOptions.firstDayOfWeek=Xr(_.locale).firstDayOfWeek();let N=new Array(D);for(let W=0;W<D;W++)N[W]=Pd(C,_.monthViewOptions),C=In(C,{month:1});if(_.preventChangeToNextMonth&&_.flaggedMonths&&_.hoveredDate){const W=Pd(_.view.date,_.monthViewOptions);_.flaggedMonths.length&&_.flaggedMonths[1].month.getMonth()===W.month.getMonth()&&(N=_.flaggedMonths.map(me=>_.monthViewOptions?Pd(me.month,_.monthViewOptions):null).filter(me=>null!==me))}return Object.assign({},_,{monthsModel:N})}if("month"===_.view.mode){const N=new Array(D);for(let W=0;W<D;W++)N[W]=tm(C,Es(_)),C=In(C,{year:1});return Object.assign({},_,{monthsCalendar:N})}if("year"===_.view.mode){const N=new Array(D);for(let W=0;W<D;W++)N[W]=Gp(C,Es(_),"year"===_.minMode?Dd(_,W):void 0),C=In(C,{year:mh});return Object.assign({},_,{yearsCalendarModel:N})}return _}(_);case no.FORMAT:return function Od(_){if(!_.view)return _;if("day"===_.view.mode&&_.monthsModel){const N=_.monthsModel.map((W,me)=>function Jf(_,D,C){return{month:_.month,monthTitle:Is(_.month,D.monthTitle,D.locale),yearTitle:Is(_.month,D.yearTitle,D.locale),weekNumbers:Qf(_.daysMatrix,D.weekNumbers,D.locale),weekdays:em(D.locale),weeks:_.daysMatrix.map((N,W)=>({days:N.map((me,ft)=>({date:me,label:Is(me,D.dayLabel,D.locale),monthIndex:C,weekIndex:W,dayIndex:ft}))})),hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}(W,Es(_),me));return Object.assign({},_,{formattedMonths:N})}const D=_.displayMonths||1;let C=_.view.date;if("month"===_.view.mode){const N=new Array(D);for(let W=0;W<D;W++)N[W]=tm(C,Es(_)),C=In(C,{year:1});return Object.assign({},_,{monthsCalendar:N})}if("year"===_.view.mode){const N=new Array(D);for(let W=0;W<D;W++)N[W]=Gp(C,Es(_)),C=In(C,{year:16});return Object.assign({},_,{yearsCalendarModel:N})}return _}(_);case no.FLAG:return function sm(_){if(!_.view)return _;const D=Rd(_.view.date,_.minDate,_.maxDate)?1:_.displayMonths;if(_.formattedMonths&&"day"===_.view.mode){const C=_.formattedMonths.map((N,W)=>function Vp(_,D){return _.weeks.forEach(C=>{C.days.forEach((N,W)=>{const me=!kr(N.date,_.month),ft=!me&&_r(N.date,D.hoveredDate),vi=!me&&D.selectedRange&&_r(N.date,D.selectedRange[0]),on=!me&&D.selectedRange&&_r(N.date,D.selectedRange[1]),Nr=!me&&_r(N.date,D.selectedDate)||vi||on,_s=!me&&D.selectedRange&&function qc(_,D,C){return!!(_&&D&&D[0])&&(D[1]?_>D[0]&&_<=D[1]:!!C&&_>D[0]&&_<=C)}(N.date,D.selectedRange,D.hoveredDate),ro=D.isDisabled||Rs(N.date,D.minDate,"day")||es(N.date,D.maxDate,"day")||function za(_,D){return!(typeof D>"u"||!D||!D.length)&&D.some(C=>C===_.getDay())}(N.date,D.daysDisabled)||Zc(N.date,D.datesDisabled)||Au(N.date,D.datesEnabled),Qc=!me&&_r(N.date,new Date),hm=D.dateCustomClasses&&D.dateCustomClasses.map(Wl=>_r(N.date,Wl.date)?Wl.classes:[]).reduce((Wl,Kh)=>Wl.concat(Kh),[]).join(" ")||"",dm=D.dateTooltipTexts&&D.dateTooltipTexts.map(Wl=>_r(N.date,Wl.date)?Wl.tooltipText:"").reduce((Wl,Kh)=>(Wl.push(Kh),Wl),[]).join(" ")||"",$l=Object.assign({},N,{isOtherMonth:me,isHovered:ft,isSelected:Nr,isSelectionStart:vi,isSelectionEnd:on,isInRange:_s,isDisabled:ro,isToday:Qc,customClasses:hm,tooltipText:dm});(N.isOtherMonth!==$l.isOtherMonth||N.isHovered!==$l.isHovered||N.isSelected!==$l.isSelected||N.isSelectionStart!==$l.isSelectionStart||N.isSelectionEnd!==$l.isSelectionEnd||N.isDisabled!==$l.isDisabled||N.isInRange!==$l.isInRange||N.customClasses!==$l.customClasses||N.tooltipText!==$l.tooltipText)&&(C.days[W]=$l)})}),_.hideLeftArrow=D.isDisabled||!!D.monthIndex&&D.monthIndex>0&&D.monthIndex!==D.displayMonths,_.hideRightArrow=D.isDisabled||(!!D.monthIndex||0===D.monthIndex)&&!!D.displayMonths&&D.monthIndex<D.displayMonths&&D.monthIndex+1!==D.displayMonths,_.disableLeftArrow=Uh(In(_.month,{month:-1}),D.minDate,D.maxDate),_.disableRightArrow=Uh(In(_.month,{month:1}),D.minDate,D.maxDate),_}(N,{isDisabled:_.isDisabled,minDate:_.minDate,maxDate:_.maxDate,daysDisabled:_.daysDisabled,datesDisabled:_.datesDisabled,datesEnabled:_.datesEnabled,hoveredDate:_.hoveredDate,selectedDate:_.selectedDate,selectedRange:_.selectedRange,displayMonths:D,dateCustomClasses:_.dateCustomClasses,dateTooltipTexts:_.dateTooltipTexts,monthIndex:W}));return Object.assign({},_,{flaggedMonths:C})}if("month"===_.view.mode&&_.monthsCalendar){const C=_.monthsCalendar.map((N,W)=>function tg(_,D){return _.months.forEach((C,N)=>{C.forEach((W,me)=>{let ft;const vi=kr(W.date,D.hoveredMonth),on=D.isDisabled||Zc(W.date,D.datesDisabled)||Au(W.date,D.datesEnabled,"month")||Uh(W.date,D.minDate,D.maxDate);!D.selectedDate&&D.selectedRange?(ft=kr(W.date,D.selectedRange[0]),ft||(ft=kr(W.date,D.selectedRange[1]))):ft=kr(W.date,D.selectedDate);const Nr=Object.assign(W,{isHovered:vi,isDisabled:on,isSelected:ft});(W.isHovered!==Nr.isHovered||W.isDisabled!==Nr.isDisabled||W.isSelected!==Nr.isSelected)&&(_.months[N][me]=Nr)})}),_.hideLeftArrow=!!D.monthIndex&&D.monthIndex>0&&D.monthIndex!==D.displayMonths,_.hideRightArrow=(!!D.monthIndex||0===D.monthIndex)&&(!!D.displayMonths||0===D.displayMonths)&&D.monthIndex<D.displayMonths&&D.monthIndex+1!==D.displayMonths,_.disableLeftArrow=ph(In(_.months[0][0].date,{year:-1}),D.minDate,D.maxDate),_.disableRightArrow=ph(In(_.months[0][0].date,{year:1}),D.minDate,D.maxDate),_}(N,{isDisabled:_.isDisabled,minDate:_.minDate,maxDate:_.maxDate,hoveredMonth:_.hoveredMonth,selectedDate:_.selectedDate,datesDisabled:_.datesDisabled,datesEnabled:_.datesEnabled,selectedRange:_.selectedRange,displayMonths:D,monthIndex:W}));return Object.assign({},_,{flaggedMonthsCalendar:C})}if("year"===_.view.mode&&_.yearsCalendarModel){const C=_.yearsCalendarModel.map((N,W)=>function nm(_,D){_.years.forEach((W,me)=>{W.forEach((ft,vi)=>{let on;const Nr=xr(ft.date,D.hoveredYear),_s=D.isDisabled||Zc(ft.date,D.datesDisabled,"year")||Au(ft.date,D.datesEnabled,"year")||ph(ft.date,D.minDate,D.maxDate);!D.selectedDate&&D.selectedRange?(on=xr(ft.date,D.selectedRange[0]),on||(on=xr(ft.date,D.selectedRange[1]))):on=xr(ft.date,D.selectedDate);const ro=Object.assign(ft,{isHovered:Nr,isDisabled:_s,isSelected:on});(ft.isHovered!==ro.isHovered||ft.isDisabled!==ro.isDisabled||ft.isSelected!==ro.isSelected)&&(_.years[me][vi]=ro)})}),_.hideLeftArrow=!!D.yearIndex&&D.yearIndex>0&&D.yearIndex!==D.displayMonths,_.hideRightArrow=!!D.yearIndex&&!!D.displayMonths&&D.yearIndex<D.displayMonths&&D.yearIndex+1!==D.displayMonths,_.disableLeftArrow=ph(In(_.years[0][0].date,{year:-1}),D.minDate,D.maxDate);const C=_.years.length-1;return _.disableRightArrow=ph(In(_.years[C][_.years[C].length-1].date,{year:1}),D.minDate,D.maxDate),_}(N,{isDisabled:_.isDisabled,minDate:_.minDate,maxDate:_.maxDate,hoveredYear:_.hoveredYear,selectedDate:_.selectedDate,datesDisabled:_.datesDisabled,datesEnabled:_.datesEnabled,selectedRange:_.selectedRange,displayMonths:D,yearIndex:W}));return Object.assign({},_,{yearsCalendarFlagged:C})}return _}(_);case no.NAVIGATE_OFFSET:return function Pu(_,D){if(!_.view)return _;const C=function om(_,D){if(_.view){if("year"===_.view.mode&&"year"===_.minMode){const C=Dd(_,0);if(C){const N=In(C,{year:-Ul});return In(N,D.payload)}}return In(j(_.view.date,"month"),D.payload)}}(_,D);if(!C)return _;return Object.assign({},_,{view:{mode:_.view.mode,date:C}})}(_,D);case no.NAVIGATE_TO:{const C=D.payload;if(!_.view||!C.unit)return _;const N=function tt(_,D){return xn(di(_.getFullYear(),D.year),di(_.getMonth(),D.month),1,di(_.getHours(),D.hour),di(_.getMinutes(),D.minute),di(_.getSeconds(),D.seconds),di(_.getMilliseconds(),D.milliseconds))}(_.view.date,C.unit);let W,me;return Ha(C.viewMode,_.minMode)?(me=C.viewMode,W={view:{date:N,mode:me}}):(me=_.view.mode,W={selectedDate:N,view:{date:N,mode:me}}),Object.assign({},_,W)}case no.CHANGE_VIEWMODE:return Ha(D.payload,_.minMode)&&_.view?Object.assign({},_,{view:{date:_.view.date,mode:D.payload}}):_;case no.HOVER:return Object.assign({},_,{hoveredDate:D.payload});case no.SELECT:{if(!_.view)return _;const C={selectedDate:D.payload,view:_.view};if(Array.isArray(_.selectedTime)){const ft=_.selectedTime[0];C.selectedDate&&ft&&Up(C.selectedDate,ft)}const N=_.view.mode,me=Ou(D.payload||_.view.date,_.minDate,_.maxDate);return C.view={mode:N,date:me},Object.assign({},_,C)}case no.SELECT_TIME:{const{date:C,index:N}=D.payload,W=_.selectedTime?[..._.selectedTime]:[];return W[N]=C,Object.assign({},_,{selectedTime:W})}case no.SET_OPTIONS:{if(!_.view)return _;const C=D.payload,N=C.minMode?C.minMode:_.view.mode,me=Ou(et(C.value)&&C.value||it(C.value)&&et(C.value[0])&&C.value[0]||_.view.date,C.minDate,C.maxDate);return C.view={mode:N,date:me},C.value&&(it(C.value)&&(C.selectedRange=C.value,C.selectedTime=C.value.map(ft=>ft)),C.value instanceof Date&&(C.selectedDate=C.value,C.selectedTime=[C.value])),Object.assign({},_,C)}case no.SELECT_RANGE:{if(!_.view)return _;const C={selectedRange:D.payload,view:_.view};C.selectedRange?.forEach((ft,vi)=>{if(Array.isArray(_.selectedTime)){const on=_.selectedTime[vi];on&&Up(ft,on)}});const N=_.view.mode,me=Ou(D.payload&&D.payload[0]||_.view.date,_.minDate,_.maxDate);return C.view={mode:N,date:me},Object.assign({},_,C)}case no.SET_MIN_DATE:return Object.assign({},_,{minDate:D.payload});case no.SET_MAX_DATE:return Object.assign({},_,{maxDate:D.payload});case no.SET_IS_DISABLED:return Object.assign({},_,{isDisabled:D.payload});case no.SET_DATE_CUSTOM_CLASSES:return Object.assign({},_,{dateCustomClasses:D.payload});case no.SET_DATE_TOOLTIP_TEXTS:return Object.assign({},_,{dateTooltipTexts:D.payload});default:return _}}function Es(_){return{locale:_.locale,monthTitle:_.monthTitle,yearTitle:_.yearTitle,dayLabel:_.dayLabel,monthLabel:_.monthLabel,yearLabel:_.yearLabel,weekNumbers:_.weekNumbers}}function Ou(_,D,C){const N=Array.isArray(_)?_[0]:_;return D&&es(D,N,"day")?D:C&&Rs(C,N,"day")?C:N}function Rd(_,D,C){return!(!C||!fo(C,_,"day"))||D&&C&&D.getMonth()===C.getMonth()}let Kc=(()=>{class _ extends Gc{constructor(){const C=new Ya.g({type:"[datepicker] dispatcher init"});super(C,ll,new nc(Md,C,ll))}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"platform"})}return _})(),gh=(()=>{class _{constructor(){this.onSelect=new A._w7}selectFromRanges(C){this.onSelect.emit(C)}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-custom-date-view"]],inputs:{ranges:"ranges",selectedRange:"selectedRange",customRangeLabel:"customRangeLabel"},outputs:{onSelect:"onSelect"},decls:2,vars:1,consts:[[1,"bs-datepicker-predefined-btns"],["type","button","class","btn",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"]],template:function(N,W){1&N&&(A.I0R(0,"div",0),A.yuY(1,yd,2,3,"button",1),A.C$Y()),2&N&&(A.yG2(),A.E7m("ngForOf",W.ranges))},dependencies:[Vs.ay],encapsulation:2,changeDetection:0})}return _})();var pc=function(_){return _[_.UP=0]="UP",_[_.DOWN=1]="DOWN",_}(pc||{});let vh,$p=(()=>{class _{static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-current-date"]],inputs:{title:"title"},decls:3,vars:1,consts:[[1,"current-timedate"]],template:function(N,W){1&N&&(A.I0R(0,"div",0)(1,"span"),A.OEk(2),A.C$Y()()),2&N&&(A.yG2(2),A.cNF(W.title))},encapsulation:2})}return _})(),zd=(()=>{class _{constructor(){this.ampm="ok",this.hours=0,this.minutes=0}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-timepicker"]],decls:16,vars:3,consts:[[1,"bs-timepicker-container"],[1,"bs-timepicker-controls"],["type","button",1,"bs-decrease"],["type","text","placeholder","00",3,"value"],["type","button",1,"bs-increase"],["type","button",1,"switch-time-format"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==","alt",""]],template:function(N,W){1&N&&(A.I0R(0,"div",0)(1,"div",1)(2,"button",2),A.OEk(3,"-"),A.C$Y(),A.wR5(4,"input",3),A.I0R(5,"button",4),A.OEk(6,"+"),A.C$Y()(),A.I0R(7,"div",1)(8,"button",2),A.OEk(9,"-"),A.C$Y(),A.wR5(10,"input",3),A.I0R(11,"button",4),A.OEk(12,"+"),A.C$Y()(),A.I0R(13,"button",5),A.OEk(14),A.wR5(15,"img",6),A.C$Y()()),2&N&&(A.yG2(4),A.E7m("value",W.hours),A.yG2(6),A.E7m("value",W.minutes),A.yG2(4),A.oRS("",W.ampm," "))},encapsulation:2})}return _})(),Jc=(()=>{class _{static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-calendar-layout"]],ngContentSelectors:ac,decls:6,vars:2,consts:[["title","hey there",4,"ngIf"],[1,"bs-datepicker-head"],[1,"bs-datepicker-body"],[4,"ngIf"],["title","hey there"]],template:function(N,W){1&N&&(A.kPM(Bh),A.yuY(0,Fs,1,0,"bs-current-date",0),A.I0R(1,"div",1),A._Xx(2),A.C$Y(),A.I0R(3,"div",2),A._Xx(4,1),A.C$Y(),A.yuY(5,wp,1,0,"bs-timepicker",3)),2&N&&(A.E7m("ngIf",!1),A.yG2(5),A.E7m("ngIf",!1))},dependencies:[Vs.u_,$p,zd],encapsulation:2})}return _})(),Wp=(()=>{class _{constructor(C,N,W){this._config=C,this._elRef=N,this._renderer=W,this.day={date:new Date,label:""}}ngOnInit(){this.day?.isToday&&this._config&&this._config.customTodayClass&&this._renderer.addClass(this._elRef.nativeElement,this._config.customTodayClass),"string"==typeof this.day?.customClasses&&this.day?.customClasses.split(" ").filter(C=>C).forEach(C=>{this._renderer.addClass(this._elRef.nativeElement,C)})}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(Ia),A.GI1(A.GMv),A.GI1(A.q87))};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["","bsDatepickerDayDecorator",""]],hostVars:16,hostBindings:function(N,W){2&N&&A.eAK("disabled",W.day.isDisabled)("is-highlighted",W.day.isHovered)("is-other-month",W.day.isOtherMonth)("is-active-other-month",W.day.isOtherMonthHovered)("in-range",W.day.isInRange)("select-start",W.day.isSelectionStart)("select-end",W.day.isSelectionEnd)("selected",W.day.isSelected)},inputs:{day:"day"},attrs:Xm,decls:1,vars:1,template:function(N,W){1&N&&A.OEk(0),2&N&&A.cNF(W.day&&W.day.label||"")},encapsulation:2,changeDetection:0})}return _})(),_h=(()=>{class _{constructor(){this.isDisabled=!1,this.onNavigate=new A._w7,this.onViewMode=new A._w7}navTo(C){this.onNavigate.emit(C?pc.DOWN:pc.UP)}view(C){this.isDisabled||this.onViewMode.emit(C)}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-datepicker-navigation-view"]],inputs:{calendar:"calendar",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode"},decls:12,vars:9,consts:[["type","button",1,"previous",3,"disabled","click"],[4,"ngIf"],["type","button",1,"current",3,"disabled","click"],["type","button",1,"next",3,"disabled","click"]],template:function(N,W){1&N&&(A.I0R(0,"button",0),A.qCj("click",function(){return W.navTo(!0)}),A.I0R(1,"span"),A.OEk(2,"\u2039"),A.C$Y()(),A.yuY(3,Ff,5,2,"ng-container",1),A.OEk(4," \u200b "),A.I0R(5,"button",2),A.qCj("click",function(){return W.view("year")}),A.I0R(6,"span"),A.OEk(7),A.C$Y()(),A.OEk(8," \u200b "),A.I0R(9,"button",3),A.qCj("click",function(){return W.navTo(!1)}),A.I0R(10,"span"),A.OEk(11,"\u203a"),A.C$Y()()),2&N&&(A.m4B("visibility",W.calendar.hideLeftArrow?"hidden":"visible"),A.E7m("disabled",W.calendar.disableLeftArrow),A.yG2(3),A.E7m("ngIf",W.calendar&&W.calendar.monthTitle),A.yG2(2),A.E7m("disabled",W.isDisabled),A.yG2(2),A.cNF(W.calendar.yearTitle),A.yG2(2),A.m4B("visibility",W.calendar.hideRightArrow?"hidden":"visible"),A.E7m("disabled",W.calendar.disableRightArrow))},dependencies:[Vs.u_],encapsulation:2,changeDetection:0})}return _})(),Fd=(()=>{class _{constructor(C){this._config=C,this.onNavigate=new A._w7,this.onViewMode=new A._w7,this.onSelect=new A._w7,this.onHover=new A._w7,this.onHoverWeek=new A._w7,this.isiOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._config.dateTooltipTexts&&this._config.dateTooltipTexts.length>0&&(this.isShowTooltip=!0)}navigateTo(C){this.onNavigate.emit({step:{month:pc.DOWN===C?-1:1}})}changeViewMode(C){this.onViewMode.emit(C)}selectDay(C){this.onSelect.emit(C)}selectWeek(C){if(!this._config.selectWeek&&!this._config.selectWeekDateRange||0===C.days.length)return;if(this._config.selectWeek&&C.days[0]&&!C.days[0].isDisabled&&this._config.selectFromOtherMonth)return void this.onSelect.emit(C.days[0]);const N=C.days.find(W=>(this._config.selectFromOtherMonth||!W.isOtherMonth)&&!W.isDisabled);if(this.onSelect.emit(N),this._config.selectWeekDateRange){const me=C.days.slice(0).reverse().find(ft=>(this._config.selectFromOtherMonth||!ft.isOtherMonth)&&!ft.isDisabled);this.onSelect.emit(me)}}weekHoverHandler(C,N){(this._config.selectWeek||this._config.selectWeekDateRange)&&C.days.find(me=>(this._config.selectFromOtherMonth||!me.isOtherMonth)&&!me.isDisabled)&&(C.isHovered=N,this.isWeekHovered=N,this.onHoverWeek.emit(C))}hoverDay(C,N){this._config.selectFromOtherMonth&&C.isOtherMonth&&(C.isOtherMonthHovered=N),this._config.dateTooltipTexts&&(C.tooltipText="",this._config.dateTooltipTexts.forEach(W=>{_r(W.date,C.date)&&(C.tooltipText=W.tooltipText)})),this.onHover.emit({cell:C,isHovered:N})}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(Ia))};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-days-calendar-view"]],inputs:{calendar:"calendar",options:"options",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover",onHoverWeek:"onHoverWeek"},decls:9,vars:5,consts:[[3,"calendar","isDisabled","onNavigate","onViewMode"],["role","grid",1,"days","weeks"],[4,"ngIf"],["aria-label","weekday",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["aria-label","weekday"],["class","week",3,"active-week",4,"ngIf"],["role","gridcell",4,"ngFor","ngForOf"],[1,"week"],[3,"click",4,"ngIf"],[3,"click","mouseenter","mouseleave",4,"ngIf"],[3,"click"],[3,"click","mouseenter","mouseleave"],["role","gridcell"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click"]],template:function(N,W){1&N&&(A.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),A.qCj("onNavigate",function(ft){return W.navigateTo(ft)})("onViewMode",function(ft){return W.changeViewMode(ft)}),A.C$Y(),A.I0R(2,"table",1)(3,"thead")(4,"tr"),A.yuY(5,Cp,1,0,"th",2)(6,Tp,2,1,"th",3),A.C$Y()(),A.I0R(7,"tbody"),A.yuY(8,Vf,3,2,"tr",4),A.C$Y()()()),2&N&&(A.yG2(),A.E7m("calendar",W.calendar)("isDisabled",!!W.isDisabled),A.yG2(4),A.E7m("ngIf",W.options&&W.options.showWeekNumbers),A.yG2(),A.E7m("ngForOf",W.calendar.weekdays),A.yG2(2),A.E7m("ngForOf",W.calendar.weeks))},dependencies:[Vs.ay,Vs.u_,Jo.uM,Jc,Wp,_h],encapsulation:2})}return _})(),am=(()=>{class _{constructor(){this.onNavigate=new A._w7,this.onViewMode=new A._w7,this.onSelect=new A._w7,this.onHover=new A._w7}navigateTo(C){this.onNavigate.emit({step:{year:pc.DOWN===C?-1:1}})}viewMonth(C){this.onSelect.emit(C)}hoverMonth(C,N){this.onHover.emit({cell:C,isHovered:N})}changeViewMode(C){this.onViewMode.emit(C)}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-month-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"months"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(N,W){1&N&&(A.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),A.qCj("onNavigate",function(ft){return W.navigateTo(ft)})("onViewMode",function(ft){return W.changeViewMode(ft)}),A.C$Y(),A.I0R(2,"table",1)(3,"tbody"),A.yuY(4,rh,2,1,"tr",2),A.C$Y()()()),2&N&&(A.yG2(),A.E7m("calendar",W.calendar),A.yG2(3),A.E7m("ngForOf",null==W.calendar?null:W.calendar.months))},dependencies:[Vs.ay,Jc,_h],encapsulation:2})}return _})(),Xp=(()=>{class _{constructor(){this.onNavigate=new A._w7,this.onViewMode=new A._w7,this.onSelect=new A._w7,this.onHover=new A._w7}navigateTo(C){this.onNavigate.emit({step:{year:(pc.DOWN===C?-1:1)*mh}})}viewYear(C){this.onSelect.emit(C)}hoverYear(C,N){this.onHover.emit({cell:C,isHovered:N})}changeViewMode(C){this.onViewMode.emit(C)}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-years-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"years"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(N,W){1&N&&(A.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),A.qCj("onNavigate",function(ft){return W.navigateTo(ft)})("onViewMode",function(ft){return W.changeViewMode(ft)}),A.C$Y(),A.I0R(2,"table",1)(3,"tbody"),A.yuY(4,Ep,2,1,"tr",2),A.C$Y()()()),2&N&&(A.yG2(),A.E7m("calendar",W.calendar),A.yG2(3),A.E7m("ngForOf",null==W.calendar?null:W.calendar.years))},dependencies:[Vs.ay,Jc,_h],encapsulation:2})}return _})(),Zh=(()=>{class _ extends Gh{set value(C){this._effects?.setValue(C)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(C,N,W,me,ft,vi,on){super(),this._config=N,this._store=W,this._element=me,this._actions=ft,this._positionService=on,this.valueChange=new A._w7,this.animationState="void",this.isRangePicker=!1,this._subs=[],this._effects=vi,C.setStyle(me.nativeElement,"display","block"),C.setStyle(me.nativeElement,"position","absolute")}ngOnInit(){let C;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,e.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.containerClass=this._config.containerClass,this.showTodayBtn=this._config.showTodayButton,this.todayBtnLbl=this._config.todayButtonLabel,this.todayPos=this._config.todayPosition,this.showClearBtn=this._config.showClearButton,this.clearBtnLbl=this._config.clearButtonLabel,this.clearPos=this._config.clearPosition,this.customRangeBtnLbl=this._config.customRangeButtonLabel,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(N=>N.selectedDate).subscribe(N=>{C=N,this.valueChange.emit(N)})),this._subs.push(this._store.select(N=>N.selectedTime).subscribe(N=>{!N[0]||!(N[0]instanceof Date)||N[0]===C||this.valueChange.emit(N[0])})),this._store.dispatch(this._actions.changeViewMode(this._config.startView))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(C=>{Array.isArray(C)&&C.length>=1&&this.startTimepicker?.writeValue(C[0])})),this.startTimepicker?.registerOnChange(C=>{this.timeSelectHandler(C,0)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(C,N){this._store.dispatch(this._actions.selectTime(C,N))}daySelectHandler(C){!C||(this.isOtherMonthsActive?C.isDisabled:C.isOtherMonth||C.isDisabled)||this._store.dispatch(this._actions.select(C.date))}monthSelectHandler(C){!C||C.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{month:Vi(C.date),year:Oi(C.date)},viewMode:"day"}))}yearSelectHandler(C){!C||C.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{year:Oi(C.date)},viewMode:"month"}))}setToday(){this._store.dispatch(this._actions.select(new Date))}clearDate(){this._store.dispatch(this._actions.select(void 0))}ngOnDestroy(){for(const C of this._subs)C.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(A.q87),A.GI1(Ia),A.GI1(Kc),A.GI1(A.GMv),A.GI1(no),A.GI1(Iu),A.GI1(Hc.O4))};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-datepicker-container"]],viewQuery:function(N,W){if(1&N&&A.CC$(Nh,5),2&N){let me;A.wto(me=A.Gqi())&&(W.startTimepicker=me.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(N,W){1&N&&A.qCj("click",function(ft){return W._stopPropagation(ft)}),2&N&&A.e48("disabled",W.isDatepickerDisabled)("readonly",W.isDatepickerReadonly)},features:[A.M5G([Kc,Iu]),A.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(N,W){1&N&&(A.yuY(0,Cd,10,11,"div",0),A.wVc(1,"async")),2&N&&A.E7m("ngIf",A.kDX(1,1,W.viewMode))},dependencies:[Vs.QF,Vs.ay,Vs.u_,Vs.Ko,Vs.Wm,Fh,gh,Fd,am,Xp,Vs.a],encapsulation:2,data:{animation:[dh]}})}return _})(),Bd=(()=>{class _{get readonlyValue(){return this.isDisabled?"":null}constructor(C,N,W,me,ft){this._config=C,this._elementRef=N,this._renderer=W,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Ec.E,this.isDisabled=!1,this.bsValueChange=new A._w7,this._subs=[],this._dateInputFormat$=new Ec.E,Object.assign(this,this._config),this._datepicker=ft.createLoader(N,me,W),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new Ya.g(this.isOpen)}get isOpen(){return this._datepicker.isShown}set isOpen(C){this.isOpen$.next(C)}set bsValue(C){this._bsValue&&C&&this._bsValue.getTime()===C.getTime()||(!this._bsValue&&C&&!this._config.withTimepicker&&Up(C,new Date),C&&this.bsConfig?.initCurrentTime&&(C=Ad(C)),this.initPreviousValue(),this._bsValue=C,this.bsValueChange.emit(C))}get dateInputFormat$(){return this._dateInputFormat$}ngOnInit(){this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.setConfig(),this.initPreviousValue()}initPreviousValue(){vh=this._bsValue}ngOnChanges(C){C.bsConfig&&(C.bsConfig.currentValue?.initCurrentTime&&C.bsConfig.currentValue?.initCurrentTime!==C.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=Ad(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._dateInputFormat$.next(this.bsConfig&&this.bsConfig.dateInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(C.minDate&&(this._datepickerRef.instance.minDate=this.minDate),C.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),C.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),C.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),C.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),C.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),C.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses),C.dateTooltipTexts&&(this._datepickerRef.instance.dateTooltipTexts=this.dateTooltipTexts))}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(C=>{this._datepickerRef&&(this._datepickerRef.instance.value=C)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.subscribe(C=>{this.initPreviousValue(),this.bsValue=C,!this.keepDatepickerModalOpened()&&this.hide()}))}keepDatepickerModalOpened(){return!!(vh&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return vh instanceof Date&&this._bsValue?.getDate()===vh?.getDate()&&this._bsValue?.getMonth()===vh?.getMonth()&&this._bsValue?.getFullYear()===vh?.getFullYear()}ngAfterViewInit(){this.isOpen$.pipe((0,sn.I)(C=>C!==this.isOpen),(0,Y.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Ia,useValue:this._config}).attach(Zh).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}hide(){this.isOpen&&this._datepicker.hide();for(const C of this._subs)C.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this._config.keepDatesOutOfRules?this._bsValue:Yp(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,dateTooltipTexts:this.dateTooltipTexts||this.bsConfig&&this.bsConfig.dateTooltipTexts,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,minMode:this.minMode||this.bsConfig&&this.bsConfig.minMode,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(C=>C.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(Ia),A.GI1(A.GMv),A.GI1(A.q87),A.GI1(A.y8U),A.GI1(Va.Sy))};static#t=this.\u0275dir=A.Sc5({type:_,selectors:[["","bsDatepicker",""]],hostVars:1,hostBindings:function(N,W){2&N&&A.e48("readonly",W.readonlyValue)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",minMode:"minMode",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled",dateCustomClasses:"dateCustomClasses",dateTooltipTexts:"dateTooltipTexts",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDatepicker"],features:[A.SYr]})}return _})(),cm=(()=>{class _ extends Gh{set value(C){this._effects?.setRangeValue(C)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(C,N,W,me,ft,vi,on){super(),this._config=N,this._store=W,this._element=me,this._actions=ft,this._positionService=on,this.valueChange=new A._w7,this.animationState="void",this._rangeStack=[],this.chosenRange=[],this._subs=[],this.isRangePicker=!0,this._effects=vi,this.customRanges=this._config.ranges||[],this.customRangeBtnLbl=this._config.customRangeButtonLabel,C.setStyle(me.nativeElement,"display","block"),C.setStyle(me.nativeElement,"position","absolute")}ngOnInit(){let C;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,e.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.containerClass=this._config.containerClass,this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(N=>N.selectedRange).subscribe(N=>{C=N,this.valueChange.emit(N),this.chosenRange=N||[]})),this._subs.push(this._store.select(N=>N.selectedTime).subscribe(N=>{!N[0]||!N[1]||!(N[0]instanceof Date)||!(N[1]instanceof Date)||C&&N[0]===C[0]&&N[1]===C[1]||(this.valueChange.emit(N),this.chosenRange=N||[])}))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(C=>{Array.isArray(C)&&C.length>=2&&(this.startTimepicker?.writeValue(C[0]),this.endTimepicker?.writeValue(C[1]))})),this.startTimepicker?.registerOnChange(C=>{this.timeSelectHandler(C,0)}),this.endTimepicker?.registerOnChange(C=>{this.timeSelectHandler(C,1)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(C,N){this._store.dispatch(this._actions.selectTime(C,N))}daySelectHandler(C){!C||(this.isOtherMonthsActive?C.isDisabled:C.isOtherMonth||C.isDisabled)||this.rangesProcessing(C)}monthSelectHandler(C){if(C&&!C.isDisabled){if(C.isSelected=!0,"month"!==this._config.minMode){if(C.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{month:Vi(C.date),year:Oi(C.date)},viewMode:"day"}))}this.rangesProcessing(C)}}yearSelectHandler(C){if(C&&!C.isDisabled){if(C.isSelected=!0,"year"!==this._config.minMode){if(C.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{year:Oi(C.date)},viewMode:"month"}))}this.rangesProcessing(C)}}rangesProcessing(C){1===this._rangeStack.length&&(this._rangeStack=C.date>=this._rangeStack[0]?[this._rangeStack[0],C.date]:[C.date]),this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(C.date),0===this._rangeStack.length&&(this._rangeStack=[C.date],this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(C.date)),this._store.dispatch(this._actions.selectRange(this._rangeStack)),2===this._rangeStack.length&&(this._rangeStack=[])}ngOnDestroy(){for(const C of this._subs)C.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}setRangeOnCalendar(C){C&&(this._rangeStack=C.value instanceof Date?[C.value]:C.value),this._store.dispatch(this._actions.selectRange(this._rangeStack))}setMaxDateRangeOnCalendar(C){let N=new Date(C);if(this._config.maxDate){const W=this._config.maxDate.getTime(),me=C.getTime()+864e5*(this._config.maxDateRange||0);N=me>W?new Date(this._config.maxDate):new Date(me)}else N.setDate(C.getDate()+(this._config.maxDateRange||0));this._effects?.setMaxDate(N)}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(A.q87),A.GI1(Ia),A.GI1(Kc),A.GI1(A.GMv),A.GI1(no),A.GI1(Iu),A.GI1(Hc.O4))};static#t=this.\u0275cmp=A.In1({type:_,selectors:[["bs-daterangepicker-container"]],viewQuery:function(N,W){if(1&N&&(A.CC$(Nh,5),A.CC$(Ap,5)),2&N){let me;A.wto(me=A.Gqi())&&(W.startTimepicker=me.first),A.wto(me=A.Gqi())&&(W.endTimepicker=me.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(N,W){1&N&&A.qCj("click",function(ft){return W._stopPropagation(ft)}),2&N&&A.e48("disabled",W.isDatepickerDisabled)("readonly",W.isDatepickerReadonly)},features:[A.M5G([Kc,Iu]),A.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(N,W){1&N&&(A.yuY(0,jl,10,11,"div",0),A.wVc(1,"async")),2&N&&A.E7m("ngIf",A.kDX(1,1,W.viewMode))},dependencies:[Vs.QF,Vs.ay,Vs.u_,Vs.Ko,Vs.Wm,Fh,gh,Fd,am,Xp,Vs.a],encapsulation:2,data:{animation:[dh]}})}return _})();const qp={provide:rl.Y6,useExisting:(0,A.wd)(()=>Yd),multi:!0},um={provide:rl.WM,useExisting:(0,A.wd)(()=>Yd),multi:!0};let Sc,Yd=(()=>{class _{constructor(C,N,W,me,ft){this._picker=C,this._localeService=N,this._renderer=W,this._elRef=me,this.changeDetection=ft,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Uc.wH}ngOnInit(){const C=N=>{this._setInputValue(N),this._value!==N&&(this._value=N,this._onChange(N),this._onTouched()),this.changeDetection.markForCheck()};this._picker._bsValue&&C(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(C)),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.dateInputFormat$.pipe((0,Ae.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(C){(13===C.keyCode||"Enter"===C.code)&&this.hide()}_setInputValue(C){const N=C?Is(C,this._picker._config.dateInputFormat,this._localeService.currentLocale):"";this._renderer.setProperty(this._elRef.nativeElement,"value",N)}onChange(C){this.writeValue(C.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(C){const N=C.value;if(null==N||""===N)return null;if(Ye(N)){if(!et(N))return{bsDate:{invalid:N}};if(this._picker&&this._picker.minDate&&Rs(N,this._picker.minDate,"date"))return this.writeValue(this._picker.minDate),{bsDate:{minDate:this._picker.minDate}};if(this._picker&&this._picker.maxDate&&es(N,this._picker.maxDate,"date"))return this.writeValue(this._picker.maxDate),{bsDate:{maxDate:this._picker.maxDate}}}return null}registerOnValidatorChange(C){this._validatorChange=C}writeValue(C){if(C){const N=this._localeService.currentLocale;if(!Xr(N))throw new Error(`Locale "${N}" is not defined, please add it with "defineLocale(...)"`);this._value=xl(C,this._picker._config.dateInputFormat,this._localeService.currentLocale),this._picker._config.useUtc&&(this._value=Ao(this._value))}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(C){this._picker.isDisabled=C,C?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(C){this._onChange=C}registerOnTouched(C){this._onTouched=C}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(Bd,1),A.GI1(jh),A.GI1(A.q87),A.GI1(A.GMv),A.GI1(A.kD9))};static#t=this.\u0275dir=A.Sc5({type:_,selectors:[["input","bsDatepicker",""]],hostBindings:function(N,W){1&N&&A.qCj("change",function(ft){return W.onChange(ft)})("keyup.esc",function(){return W.hide()})("keydown",function(ft){return W.onKeydownEvent(ft)})("blur",function(){return W.onBlur()})},features:[A.M5G([qp,um])]})}return _})(),qh=(()=>{class _ extends Ia{constructor(){super(...arguments),this.displayMonths=2}static#e=this.\u0275fac=(()=>{let C;return function(W){return(C||(C=A.otF(_)))(W||_)}})();static#t=this.\u0275prov=A.wxM({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})(),Vd=(()=>{class _{get isOpen(){return this._datepicker.isShown}set isOpen(C){this.isOpen$.next(C)}set bsValue(C){this._bsValue!==C&&(C&&this.bsConfig?.initCurrentTime&&(C=$h(C)),this.initPreviousValue(),this._bsValue=C,this.bsValueChange.emit(C))}get isDatepickerReadonly(){return this.isDisabled?"":null}get rangeInputFormat$(){return this._rangeInputFormat$}constructor(C,N,W,me,ft){this._config=C,this._elementRef=N,this._renderer=W,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Ec.E,this.isDisabled=!1,this.bsValueChange=new A._w7,this._subs=[],this._rangeInputFormat$=new Ec.E,this._datepicker=ft.createLoader(N,me,W),Object.assign(this,C),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new Ya.g(this.isOpen)}ngOnInit(){this.isDestroy$=new Ec.E,this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.initPreviousValue(),this.setConfig()}ngOnChanges(C){C.bsConfig&&(C.bsConfig.currentValue?.initCurrentTime&&C.bsConfig.currentValue?.initCurrentTime!==C.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=$h(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._rangeInputFormat$.next(C.bsConfig.currentValue&&C.bsConfig.currentValue.rangeInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(C.minDate&&(this._datepickerRef.instance.minDate=this.minDate),C.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),C.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),C.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),C.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),C.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),C.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses))}ngAfterViewInit(){this.isOpen$.pipe((0,sn.I)(C=>C!==this.isOpen),(0,Y.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Ia,useValue:this._config}).attach(cm).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(C=>{this._datepickerRef&&(this._datepickerRef.instance.value=C)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.pipe((0,sn.I)(C=>C&&C[0]&&!!C[1])).subscribe(C=>{this.initPreviousValue(),this.bsValue=C,!this.keepDatepickerModalOpened()&&this.hide()}))}initPreviousValue(){Sc=this._bsValue}keepDatepickerModalOpened(){return!!(Sc&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return this._bsValue?.[0]?.getDate()===Sc?.[0]?.getDate()&&this._bsValue?.[0]?.getMonth()===Sc?.[0]?.getMonth()&&this._bsValue?.[0]?.getFullYear()===Sc?.[0]?.getFullYear()&&this._bsValue?.[1]?.getDate()===Sc?.[1]?.getDate()&&this._bsValue?.[1]?.getMonth()===Sc?.[1]?.getMonth()&&this._bsValue?.[1]?.getFullYear()===Sc?.[1]?.getFullYear()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this.bsConfig?.keepDatesOutOfRules?this._bsValue:Yp(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,ranges:Np(this.bsConfig&&this.bsConfig.ranges,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),maxDateRange:this.bsConfig&&this.bsConfig.maxDateRange,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}hide(){this.isOpen&&this._datepicker.hide();for(const C of this._subs)C.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(C=>C.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(qh),A.GI1(A.GMv),A.GI1(A.q87),A.GI1(A.y8U),A.GI1(Va.Sy))};static#t=this.\u0275dir=A.Sc5({type:_,selectors:[["","bsDaterangepicker",""]],hostVars:1,hostBindings:function(N,W){2&N&&A.e48("readonly",W.isDatepickerReadonly)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",dateCustomClasses:"dateCustomClasses",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDaterangepicker"],features:[A.SYr]})}return _})();const fu={provide:rl.Y6,useExisting:(0,A.wd)(()=>Ga),multi:!0},Kp={provide:rl.WM,useExisting:(0,A.wd)(()=>Ga),multi:!0};let Ga=(()=>{class _{constructor(C,N,W,me,ft){this._picker=C,this._localeService=N,this._renderer=W,this._elRef=me,this.changeDetection=ft,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Uc.wH}ngOnInit(){this._picker._bsValue&&(N=>{this._setInputValue(N),this._value!==N&&(this._value=N,this._onChange(N),this._onTouched()),this.changeDetection.markForCheck()})(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(N=>{this._setInputValue(N),this._value!==N&&(this._value=N,this._onChange(N),this._onTouched()),this.changeDetection.markForCheck()})),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.rangeInputFormat$.pipe((0,Ae.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(C){(13===C.keyCode||"Enter"===C.code)&&this.hide()}_setInputValue(C){let N="";if(C){const W=C[0]?Is(C[0],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"",me=C[1]?Is(C[1],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"";N=W&&me?W+this._picker._config.rangeSeparator+me:""}this._renderer.setProperty(this._elRef.nativeElement,"value",N)}onChange(C){this.writeValue(C.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(C){let N=C.value;const W=[];if(null==N||!it(N))return null;N=N.slice().sort((vi,on)=>vi.getTime()-on.getTime());const me=et(N[0]),ft=et(N[1]);return me?ft?(this._picker&&this._picker.minDate&&Rs(N[0],this._picker.minDate,"date")&&(N[0]=this._picker.minDate,W.push({bsDate:{minDate:this._picker.minDate}})),this._picker&&this._picker.maxDate&&es(N[1],this._picker.maxDate,"date")&&(N[1]=this._picker.maxDate,W.push({bsDate:{maxDate:this._picker.maxDate}})),W.length>0?(this.writeValue(N),W):null):{bsDate:{invalid:N[1]}}:{bsDate:{invalid:N[0]}}}registerOnValidatorChange(C){this._validatorChange=C}writeValue(C){if(C){const N=this._localeService.currentLocale;if(!Xr(N))throw new Error(`Locale "${N}" is not defined, please add it with "defineLocale(...)"`);let me=[];if("string"==typeof C){const ft=this._picker._config.rangeSeparator.trim();me=C.replace(/[^-]/g,"").length>1?C.split(this._picker._config.rangeSeparator):C.split(ft.length>0?ft:this._picker._config.rangeSeparator).map(vi=>vi.trim())}Array.isArray(C)&&(me=C),this._value=me.map(ft=>this._picker._config.useUtc?Ao(xl(ft,this._picker._config.rangeInputFormat,this._localeService.currentLocale)):xl(ft,this._picker._config.rangeInputFormat,this._localeService.currentLocale)).map(ft=>isNaN(ft.valueOf())?void 0:ft)}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(C){this._picker.isDisabled=C,C?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(C){this._onChange=C}registerOnTouched(C){this._onTouched=C}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(N){return new(N||_)(A.GI1(Vd,1),A.GI1(jh),A.GI1(A.q87),A.GI1(A.GMv),A.GI1(A.kD9))};static#t=this.\u0275dir=A.Sc5({type:_,selectors:[["input","bsDaterangepicker",""]],hostBindings:function(N,W){1&N&&A.qCj("change",function(ft){return W.onChange(ft)})("keyup.esc",function(){return W.hide()})("keydown",function(ft){return W.onKeydownEvent(ft)})("blur",function(){return W.onBlur()})},features:[A.M5G([fu,Kp])]})}return _})(),Ru=(()=>{class _{static forRoot(){return{ngModule:_,providers:[Va.Sy,Hc.O4,Kc,no,Iu,jh,io]}}static#e=this.\u0275fac=function(N){return new(N||_)};static#t=this.\u0275mod=A.a4G({type:_});static#i=this.\u0275inj=A.s3X({imports:[Vs.MD,Jo.as,bp]})}return _})()},8216:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{im:()=>rt,rO:()=>Kt});var A=Ot(4496),sn=Ot(6504),Re=Ot(1368);const e=(Yt,Nt)=>({"pull-left":Yt,"float-left":Nt}),Y=(Yt,Nt)=>({"pull-right":Yt,"float-right":Nt}),Ae=(Yt,Nt)=>({disabled:Yt,currentPage:Nt});function ke(Yt,Nt){if(1&Yt){const ct=A.KQA();A.I0R(0,"li",11)(1,"a",12),A.qCj("click",function(qt){A.usT(ct);const ri=A.GaO();return A.CGJ(ri.selectPage(1,qt))}),A.C_f(2,13),A.C$Y()()}if(2&Yt){const ct=A.GaO(),Vt=A.Gew(13);A.eAK("disabled",ct.noPrevious()||ct.disabled),A.yG2(2),A.E7m("ngTemplateOutlet",ct.customFirstTemplate||Vt)("ngTemplateOutletContext",A.IBC(4,Ae,ct.noPrevious()||ct.disabled,ct.page))}}function Ee(Yt,Nt){if(1&Yt){const ct=A.KQA();A.I0R(0,"li",14)(1,"a",12),A.qCj("click",function(qt){A.usT(ct);const ri=A.GaO();return A.CGJ(ri.selectPage(ri.page-1,qt))}),A.C_f(2,13),A.C$Y()()}if(2&Yt){const ct=A.GaO(),Vt=A.Gew(11);A.eAK("disabled",ct.noPrevious()||ct.disabled),A.yG2(2),A.E7m("ngTemplateOutlet",ct.customPreviousTemplate||Vt)("ngTemplateOutletContext",A.IBC(4,Ae,ct.noPrevious()||ct.disabled,ct.page))}}const Oe=(Yt,Nt,ct)=>({disabled:Yt,$implicit:Nt,currentPage:ct});function Ye(Yt,Nt){if(1&Yt){const ct=A.KQA();A.I0R(0,"li",15)(1,"a",12),A.qCj("click",function(qt){const Li=A.usT(ct).$implicit,ai=A.GaO();return A.CGJ(ai.selectPage(Li.number,qt))}),A.C_f(2,13),A.C$Y()()}if(2&Yt){const ct=Nt.$implicit,Vt=A.GaO(),qt=A.Gew(7);A.eAK("active",ct.active)("disabled",Vt.disabled&&!ct.active),A.yG2(2),A.E7m("ngTemplateOutlet",Vt.customPageTemplate||qt)("ngTemplateOutletContext",A.uAc(6,Oe,Vt.disabled,ct,Vt.page))}}function Xe(Yt,Nt){if(1&Yt){const ct=A.KQA();A.I0R(0,"li",16)(1,"a",12),A.qCj("click",function(qt){A.usT(ct);const ri=A.GaO();return A.CGJ(ri.selectPage(ri.page+1,qt))}),A.C_f(2,13),A.C$Y()()}if(2&Yt){const ct=A.GaO(),Vt=A.Gew(9);A.eAK("disabled",ct.noNext()||ct.disabled),A.yG2(2),A.E7m("ngTemplateOutlet",ct.customNextTemplate||Vt)("ngTemplateOutletContext",A.IBC(4,Ae,ct.noNext()||ct.disabled,ct.page))}}function et(Yt,Nt){if(1&Yt){const ct=A.KQA();A.I0R(0,"li",17)(1,"a",12),A.qCj("click",function(qt){A.usT(ct);const ri=A.GaO();return A.CGJ(ri.selectPage(ri.totalPages,qt))}),A.C_f(2,13),A.C$Y()()}if(2&Yt){const ct=A.GaO(),Vt=A.Gew(15);A.eAK("disabled",ct.noNext()||ct.disabled),A.yG2(2),A.E7m("ngTemplateOutlet",ct.customLastTemplate||Vt)("ngTemplateOutletContext",A.IBC(4,Ae,ct.noNext()||ct.disabled,ct.page))}}function dt(Yt,Nt){1&Yt&&A.OEk(0),2&Yt&&A.cNF(Nt.$implicit.text)}function St(Yt,Nt){if(1&Yt&&A.OEk(0),2&Yt){const ct=A.GaO();A.cNF(ct.getText("next"))}}function it(Yt,Nt){if(1&Yt&&A.OEk(0),2&Yt){const ct=A.GaO();A.cNF(ct.getText("previous"))}}function pt(Yt,Nt){if(1&Yt&&A.OEk(0),2&Yt){const ct=A.GaO();A.cNF(ct.getText("first"))}}function yt(Yt,Nt){if(1&Yt&&A.OEk(0),2&Yt){const ct=A.GaO();A.cNF(ct.getText("last"))}}let Qt=(()=>{class Yt{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xab Previous",nextText:"Next \xbb",pageBtnClass:"",align:!0}}static#e=this.\u0275fac=function(Vt){return new(Vt||Yt)};static#t=this.\u0275prov=A.wxM({token:Yt,factory:Yt.\u0275fac,providedIn:"root"})}return Yt})();const Ve={provide:sn.Y6,useExisting:(0,A.wd)(()=>Zt),multi:!0};let Zt=(()=>{class Yt{constructor(ct,Vt,qt){this.elementRef=ct,this.changeDetection=qt,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xab Previous",this.nextText="Next \xbb",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new A._w7,this.pageChanged=new A._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=ct,this.config||this.configureOptions(Object.assign({},Vt.main,Vt.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(ct){this._itemsPerPage=ct,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(ct){this._totalItems=ct,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(ct){this._totalPages=ct,this.numPages.emit(ct),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(ct){const Vt=this._page;this._page=ct>this.totalPages?this.totalPages:ct||1,this.changeDetection.markForCheck(),!(Vt===this._page||typeof Vt>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(ct){this.config=Object.assign({},ct)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(ct){this.page=ct,this.pages=this.getPages(this.page,this.totalPages)}getText(ct){return this[`${ct}Text`]||this.config[`${ct}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(ct){this.onChange=ct}registerOnTouched(ct){this.onTouched=ct}selectPage(ct,Vt){Vt&&Vt.preventDefault(),this.disabled||(Vt&&Vt.target&&Vt.target.blur(),this.writeValue(ct),this.onChange(this.page))}makePage(ct,Vt,qt){return{text:Vt,number:ct,active:qt}}getPages(ct,Vt){const qt=[];let ri=1,Li=Vt;const ai=typeof this.maxSize<"u"&&this.maxSize<Vt;ai&&this.maxSize&&(this.rotate?(ri=Math.max(ct-Math.floor(this.maxSize/2),1),Li=ri+this.maxSize-1,Li>Vt&&(Li=Vt,ri=Li-this.maxSize+1)):(ri=(Math.ceil(ct/this.maxSize)-1)*this.maxSize+1,Li=Math.min(ri+this.maxSize-1,Vt)));for(let fi=ri;fi<=Li;fi++){const Mi=this.makePage(fi,fi.toString(),fi===ct);qt.push(Mi)}if(ai&&!this.rotate){if(ri>1){const fi=this.makePage(ri-1,"...",!1);qt.unshift(fi)}if(Li<Vt){const fi=this.makePage(Li+1,"...",!1);qt.push(fi)}}return qt}calculateTotalPages(){const ct=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(ct||0,1)}static#e=this.\u0275fac=function(Vt){return new(Vt||Yt)(A.GI1(A.GMv),A.GI1(Qt),A.GI1(A.kD9))};static#t=this.\u0275cmp=A.In1({type:Yt,selectors:[["pager"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[A.M5G([Ve])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(Vt,qt){1&Vt&&(A.I0R(0,"ul",0)(1,"li",1)(2,"a",2),A.qCj("click",function(Li){return qt.selectPage(qt.page-1,Li)}),A.OEk(3),A.C$Y()(),A.I0R(4,"li",1)(5,"a",2),A.qCj("click",function(Li){return qt.selectPage(qt.page+1,Li)}),A.OEk(6),A.C$Y()()()),2&Vt&&(A.yG2(),A.m8U(qt.pageBtnClass),A.eAK("disabled",qt.noPrevious())("previous",qt.align),A.E7m("ngClass",A.IBC(18,e,qt.align,qt.align)),A.yG2(2),A.cNF(qt.getText("previous")),A.yG2(),A.m8U(qt.pageBtnClass),A.eAK("disabled",qt.noNext())("next",qt.align),A.E7m("ngClass",A.IBC(21,Y,qt.align,qt.align)),A.yG2(2),A.cNF(qt.getText("next")))},dependencies:[Re.QF],encapsulation:2})}return Yt})();const ei={provide:sn.Y6,useExisting:(0,A.wd)(()=>rt),multi:!0};let rt=(()=>{class Yt{constructor(ct,Vt,qt){this.elementRef=ct,this.changeDetection=qt,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new A._w7,this.pageChanged=new A._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=ct,this.config||this.configureOptions(Vt.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(ct){this._itemsPerPage=ct,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(ct){this._totalItems=ct,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(ct){this._totalPages=ct,this.numPages.emit(ct),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(ct){const Vt=this._page;this._page=ct>this.totalPages?this.totalPages:ct||1,this.changeDetection.markForCheck(),!(Vt===this._page||typeof Vt>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(ct){this.config=Object.assign({},ct)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(ct){this.page=ct,this.pages=this.getPages(this.page,this.totalPages)}getText(ct){return this[`${ct}Text`]||this.config[`${ct}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(ct){this.onChange=ct}registerOnTouched(ct){this.onTouched=ct}selectPage(ct,Vt){Vt&&Vt.preventDefault(),this.disabled||(Vt&&Vt.target&&Vt.target.blur(),this.writeValue(ct),this.onChange(this.page))}makePage(ct,Vt,qt){return{text:Vt,number:ct,active:qt}}getPages(ct,Vt){const qt=[];let ri=1,Li=Vt;const ai=typeof this.maxSize<"u"&&this.maxSize<Vt;ai&&this.maxSize&&(this.rotate?(ri=Math.max(ct-Math.floor(this.maxSize/2),1),Li=ri+this.maxSize-1,Li>Vt&&(Li=Vt,ri=Li-this.maxSize+1)):(ri=(Math.ceil(ct/this.maxSize)-1)*this.maxSize+1,Li=Math.min(ri+this.maxSize-1,Vt)));for(let fi=ri;fi<=Li;fi++){const Mi=this.makePage(fi,fi.toString(),fi===ct);qt.push(Mi)}if(ai&&!this.rotate){if(ri>1){const fi=this.makePage(ri-1,"...",!1);qt.unshift(fi)}if(Li<Vt){const fi=this.makePage(Li+1,"...",!1);qt.push(fi)}}return qt}calculateTotalPages(){const ct=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(ct||0,1)}static#e=this.\u0275fac=function(Vt){return new(Vt||Yt)(A.GI1(A.GMv),A.GI1(Qt),A.GI1(A.kD9))};static#t=this.\u0275cmp=A.In1({type:Yt,selectors:[["pagination"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[A.M5G([ei])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(Vt,qt){1&Vt&&(A.I0R(0,"ul",0),A.yuY(1,ke,3,7,"li",1)(2,Ee,3,7,"li",2)(3,Ye,3,10,"li",3)(4,Xe,3,7,"li",4)(5,et,3,7,"li",5),A.C$Y(),A.yuY(6,dt,1,1,"ng-template",null,6,A.gJz)(8,St,1,1,"ng-template",null,7,A.gJz)(10,it,1,1,"ng-template",null,8,A.gJz)(12,pt,1,1,"ng-template",null,9,A.gJz)(14,yt,1,1,"ng-template",null,10,A.gJz)),2&Vt&&(A.E7m("ngClass",qt.classMap),A.yG2(),A.E7m("ngIf",qt.boundaryLinks),A.yG2(),A.E7m("ngIf",qt.directionLinks),A.yG2(),A.E7m("ngForOf",qt.pages),A.yG2(),A.E7m("ngIf",qt.directionLinks),A.yG2(),A.E7m("ngIf",qt.boundaryLinks))},dependencies:[Re.QF,Re.ay,Re.u_,Re.XV],encapsulation:2})}return Yt})(),Kt=(()=>{class Yt{static forRoot(){return{ngModule:Yt,providers:[]}}static#e=this.\u0275fac=function(Vt){return new(Vt||Yt)};static#t=this.\u0275mod=A.a4G({type:Yt});static#i=this.\u0275inj=A.s3X({imports:[Re.MD]})}return Yt})()},8987:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{iU:()=>Xe});var A=Ot(4496),sn=Ot(1368);let Xe=(()=>{class et{static forRoot(){return{ngModule:et,providers:[]}}static#e=this.\u0275fac=function(it){return new(it||et)};static#t=this.\u0275mod=A.a4G({type:et});static#i=this.\u0275inj=A.s3X({imports:[sn.MD]})}return et})()},7995:(Qs,Lr,Ot)=>{"use strict";Ot.d(Lr,{as:()=>dt,uM:()=>et});var A=Ot(4496),sn=Ot(3676),Re=Ot(140),e=Ot(1316),Y=Ot(6552),Ae=Ot(3120),ke=Ot(1368);const Ee=["*"];let Oe=(()=>{class St{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}static#e=this.\u0275fac=function(yt){return new(yt||St)};static#t=this.\u0275prov=A.wxM({token:St,factory:St.\u0275fac,providedIn:"root"})}return St})(),Ye=(()=>{class St{get _bsVersions(){return(0,sn.w3)()}constructor(pt){Object.assign(this,pt)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=Re.Ly[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}static#e=this.\u0275fac=function(yt){return new(yt||St)(A.GI1(Oe))};static#t=this.\u0275cmp=A.In1({type:St,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(yt,Qt){2&yt&&(A.e48("id",Qt.id),A.m8U("show tooltip in tooltip-"+Qt.placement+" bs-tooltip-"+Qt.placement+" "+Qt.placement+" "+Qt.containerClass))},ngContentSelectors:Ee,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(yt,Qt){1&yt&&(A.kPM(),A.wR5(0,"div",0),A.I0R(1,"div",1),A._Xx(2),A.C$Y())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0})}return St})(),Xe=0,et=(()=>{class St{get isOpen(){return this._tooltip.isShown}set isOpen(pt){pt?this.show():this.hide()}set htmlContent(pt){(0,sn.eG)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=pt}set _placement(pt){(0,sn.eG)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=pt}set _isOpen(pt){(0,sn.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=pt}get _isOpen(){return(0,sn.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(pt){(0,sn.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!pt}get _enable(){return(0,sn.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(pt){(0,sn.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=pt?"body":this.container}get _appendToBody(){return(0,sn.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container}set _popupClass(pt){(0,sn.eG)("tooltipClass deprecated")}set _tooltipContext(pt){(0,sn.eG)("tooltipContext deprecated")}set _tooltipPopupDelay(pt){(0,sn.eG)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=pt}get _tooltipTrigger(){return(0,sn.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(pt){(0,sn.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(pt||"").toString()}constructor(pt,yt,Qt,Ve,Zt,ei){this._elementRef=Ve,this._renderer=Zt,this._positionService=ei,this.tooltipId=Xe++,this.adaptivePosition=!0,this.tooltipChange=new A._w7,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new A._w7,this._tooltip=yt.createLoader(this._elementRef,pt,this._renderer).provide({provide:Oe,useValue:Qt}),Object.assign(this,Qt),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(pt=>{pt||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const pt=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(Ye).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},yt=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,Ae.k)(this.delay).subscribe(()=>{pt(),yt()}),this.triggers&&(0,sn.GY)(this.triggers).forEach(Qt=>{Qt.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,Qt.close,()=>{this._delaySubscription?.unsubscribe(),yt()}))})):pt()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}static#e=this.\u0275fac=function(yt){return new(yt||St)(A.GI1(A.y8U),A.GI1(Y.Sy),A.GI1(Oe),A.GI1(A.GMv),A.GI1(A.q87),A.GI1(Re.O4))};static#t=this.\u0275dir=A.Sc5({type:St,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[A.Wk5.None,"tooltipHtml","htmlContent"],_placement:[A.Wk5.None,"tooltipPlacement","_placement"],_isOpen:[A.Wk5.None,"tooltipIsOpen","_isOpen"],_enable:[A.Wk5.None,"tooltipEnable","_enable"],_appendToBody:[A.Wk5.None,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[A.Wk5.None,"tooltipClass","_popupClass"],_tooltipContext:[A.Wk5.None,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[A.Wk5.None,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[A.Wk5.None,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]})}return(0,e.UN)([(0,sn.s9)(),(0,e.YR)("design:type",Object)],St.prototype,"tooltip",void 0),St})(),dt=(()=>{class St{static forRoot(){return{ngModule:St,providers:[Y.Sy,Re.O4]}}static#e=this.\u0275fac=function(yt){return new(yt||St)};static#t=this.\u0275mod=A.a4G({type:St});static#i=this.\u0275inj=A.s3X({imports:[ke.MD]})}return St})()}}]);