<div class="card py-3">
  <div class="row">
    <div class="col-lg-2">
      <div class="input-group">
        <input
          type="text"
          id="datepicker"
          class="form-control"
          showWeekNumbers="false"
          bsDatepicker
          [bsConfig]="bsConfig"
          [(ngModel)]="selectedDate"
          (bsValueChange)="onDateChange($event)"
        />
        <div class="input-group-append">
          <label for="datepicker" class="input-group-text cursor-pointer">
            <i class="ri-calendar-fill"></i>
          </label>
        </div>
      </div>
    </div>

    <div class="col-lg-2">
      <select
        class="form-control"
        [(ngModel)]="selectedInterval"
        (change)="onIntervalChange()"
      >
        <option value="15">15 Minutes</option>
        <option value="30">30 Minutes</option>
        <option value="60">1 Hour</option>
      </select>
    </div>
  </div>
</div>

<div class="p-3 user-chat-topbar border-bottom border-2">
  <div class="row align-items-center flex-nowrap">
    <div class="col-lg col-3">
      <p class="text-muted mb-2 text-uppercase">Date</p>
      <h5 class="fs-md mb-0">
        <span id="total-amount">{{
          formattedDate | date : "dd/MMM/yyyy"
        }}</span>
      </h5>
    </div>
    @if(checkIndetails?.check_in_time){
    <div class="col-lg col-3">
      <p class="text-muted mb-2 text-uppercase">Check-In At</p>
      <h5
        class="fs-md mb-0"
        [innerHTML]="formatTime(checkIndetails?.check_in_time)"
      ></h5>
    </div>
    } @if(checkIndetails?.check_out_time){
    <div class="col-lg col-3">
      <p class="text-muted mb-2 text-uppercase">Check-out At</p>
      <h5 class="fs-md mb-0">
        <span
          id="invoice-date"
          [innerHTML]="formatTime(checkIndetails?.check_out_time)"
        ></span>
      </h5>
    </div>
    } @if(checkIndetails?.check_in_time && checkIndetails?.check_out_time) {
    <div class="col-lg col-3">
      <p class="text-muted mb-2 text-uppercase">Total Time</p>
      <h5 class="fs-md mb-0">
        <span id="invoice-due-date">{{ formattedTotalTime }}</span>
      </h5>
    </div>
    } @if(totaldistanceToshow){
    <div class="col-lg col-3">
      <p class="text-muted mb-2 text-uppercase">Total Distance</p>
      <h5 class="fs-md mb-0">
        <span id="invoice-due-date">{{ totaldistanceToshow }} km</span>
      </h5>
      <!-- <span
                id="payment-status"
                class="badge bg-success-subtle text-success fs-xxs"
                >Paid</span
              > -->
    </div>
    }
  </div>
</div>

<div class="row">
  <div class="col-lg-4">
    <ul class="acitivity-timeline-2 list-unstyled mb-0 mt-3 overflow">
      <!-- @for (item of employeeTimeline; track $index) {
      <li
        (click)="updateMarkerAndPath(item.longitude, item.latitude, item)"
        class="activity-item pt-2"
        [ngClass]="{ 'selected-item': selectedItem === item }"
      >
        <div class="d-flex justify-content-between align-items-center">
          <span
            class="fs-md badge bg-body-secondary border border-secondary text-secondary"
            >{{ item.formattedTime }}</span
          >

          <button
            type="button"
            class="btn battery-status"
            [ngClass]="getBatteryClass(item.battery_status)"
            data-bs-toggle="tooltip"
            placement="top"
            tooltip="Battery Percentage"
          >
            <span class="ri-battery-saver-line"></span>
            {{ item.battery_status }} %
          </button>
        </div>

        <p class="mb-0 mt-2">{{ item.address }}</p>
      </li>
      }  -->
      @for (item of intervalTimeCoordinates; track $index) {
      <li
        (click)="
          updateMarkerAndPath(item.end.longitude, item.end.latitude, item)
        "
        class="activity-item pt-2"
        [ngClass]="{ 'selected-item': selectedItem === item }"
      >
        <div class="d-flex justify-content-between align-items-center">
          <span
            class="fs-md badge bg-body-secondary border border-secondary text-secondary"
            >{{ item.end.formattedTime }}</span
          >

          <button
            type="button"
            class="btn battery-status"
            [ngClass]="getBatteryClass(item.end.battery_status)"
            data-bs-toggle="tooltip"
            placement="top"
            tooltip="Battery Percentage"
          >
            <span class="ri-battery-saver-line"></span>
            {{ item.end.battery_status }} %
          </button>
        </div>

        <p class="mb-0 mt-2">{{ item.end.address }}</p>
      </li>
      } @empty {
      <div id="noresult">
        <div class="text-center py-4">
          <div class="avatar-md mx-auto mb-4">
            <div
              class="avatar-title bg-light text-primary rounded-circle fs-4xl"
            >
              <i class="bi bi-search"></i>
            </div>
          </div>
          <h5 class="mt-2">Sorry! No Result Found</h5>
          <!-- <p class="text-muted mb-0">We've searched more than 150+ sellers We did not find any sellers for you search.</p> -->
        </div>
      </div>
      }
    </ul>
  </div>
  <div class="col-lg-8">
    <div id="map" class="match-parent"></div>
  </div>
</div>
