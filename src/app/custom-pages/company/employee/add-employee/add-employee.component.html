<!-- Start Breadcrumbs -->
<app-breadcrumbs
  [title]="urlId ? 'Edit Employee Detail' : 'Add Employee Detail'"
  [breadcrumbItems]="breadCrumbItems"
></app-breadcrumbs>

<!-- End Breadcrumbs -->
<div class="text-end">
  <button class="btn btn-secondary mb-2" (click)="goBack()">
    <i class="mdi mdi-keyboard-backspace align-baseline me-1"></i>
    Back
  </button>
</div>

<form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
  <div class="row">
    <div class="col-xxl-3">
      <div class="card overflow-hidden">
        <div>
          <img
            src="assets/images/small/img-7.jpg"
            alt=""
            id="cover-img"
            class="card-img-top profile-wid-img object-fit-cover"
            style="height: 200px"
          />
        </div>
        <div class="card-body pt-0 mt-n5">
          <div class="text-center">
            <div class="profile-user position-relative d-inline-block mx-auto">
              @if (employeeselectedImage) { @if (employeeselectedImagePreview) {
              <img
                class="avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image"
                [src]="employeeselectedImagePreview"
                alt="Dropzone-Image"
              />
              } }@else if (employeeuploadedImage) {
              <img
                class="avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image"
                [src]="employeeuploadedImage"
                alt="Uploaded Thumbnail"
              />
              } @else {
              <img
                src="assets/images/users/avatar-1.jpg"
                alt=""
                id="user-img"
                class="avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image"
              />
              } @if (f['image'] && f['image'].hasError('required') &&
              f['image'].touched) {
              <div class="invalid-text">Image is required.</div>
              }

              <input
                type="file"
                id="empimage"
                accept="image/*"
                formControlName="image"
                (change)="employeeimageSelect($event)"
                hidden
                #empimage
              />

              <div
                for="empimage"
                class="avatar-xs p-0 rounded-circle profile-photo-edit position-absolute end-0 bottom-0"
              >
                <label
                  for="empimage"
                  class="profile-photo-edit avatar-xs"
                  placement="right"
                  tooltip="Select Employee Photo"
                >
                  <span class="avatar-title rounded-circle bg-light text-body">
                    <i class="bi bi-camera"></i>
                  </span>
                </label>
              </div>
            </div>
            <!-- <div class="mt-3">
              <h5>
                Richard Marshall
                <i
                  class="bi bi-patch-check-fill align-baseline text-info ms-1"
                ></i>
              </h5>
              <p class="text-muted">Web Developer</p>
            </div> -->
          </div>
        </div>
        <!-- <div class="card-body border-top">
          <div class="d-flex align-items-center mb-4 pb-2">
            <div class="flex-grow-1">
              <h5 class="card-title mb-0">Complete Your Profile</h5>
            </div>
            <div class="flex-shrink-0">
              <a
                href="javascript:void(0);"
                class="badge bg-light text-secondary"
                ><i class="ri-edit-box-line align-bottom me-1"></i> Edit</a
              >
            </div>
          </div>
          <div>
            <progressbar
              class="animated-progress custom-progress progress-label"
              [value]="30"
            >
              <div class="label">30%</div>
            </progressbar>
          </div>
        </div>
        <div class="card-body border-top">
          <div class="d-flex align-items-center mb-4">
            <div class="flex-grow-1">
              <h5 class="card-title mb-0">Portfolio</h5>
            </div>
            <div class="flex-shrink-0">
              <a
                href="javascript:void(0);"
                class="badge bg-info-subtle text-info fs-xs"
                ><i class="ri-add-fill align-bottom me-1"></i> Add</a
              >
            </div>
          </div>
          <div class="mb-3 d-flex">
            <div class="avatar-xs d-block flex-shrink-0 me-3">
              <span
                class="avatar-title rounded-circle bg-dark-subtle text-dark"
              >
                <i class="bi bi-github"></i>
              </span>
            </div>
            <input
              type="email"
              class="form-control"
              id="gitUsername"
              placeholder="Username"
              value="@richardmarshall"
            />
          </div>
          <div class="mb-3 d-flex">
            <div class="avatar-xs d-block flex-shrink-0 me-3">
              <span
                class="avatar-title rounded-circle bg-primary-subtle text-primary"
              >
                <i class="bi bi-facebook"></i>
              </span>
            </div>
            <input
              type="text"
              class="form-control"
              id="websiteInput"
              placeholder="www.example.com"
              value="www.steex.com"
            />
          </div>
          <div class="mb-3 d-flex">
            <div class="avatar-xs d-block flex-shrink-0 me-3">
              <span
                class="avatar-title rounded-circle bg-success-subtle text-success"
              >
                <i class="bi bi-dribbble"></i>
              </span>
            </div>
            <input
              type="text"
              class="form-control"
              id="dribbleName"
              placeholder="Username"
              value="@richard_marshall"
            />
          </div>
          <div class="d-flex">
            <div class="avatar-xs d-block flex-shrink-0 me-3">
              <span
                class="avatar-title rounded-circle bg-danger-subtle text-danger"
              >
                <i class="bi bi-instagram"></i>
              </span>
            </div>
            <input
              type="text"
              class="form-control"
              id="pinterestName"
              placeholder="Username"
              value="Richard Marshall"
            />
          </div>
        </div> -->
      </div>
    </div>
    <div class="col-xl-9">
      <div class="card">
        <div class="card-header">
          <h6 class="card-title mb-0">Personal Details</h6>
        </div>
        <div class="card-body">
          <div class="col-xxl-12">
            <!-- <form [formGroup]="formGroup" (ngSubmit)="onSubmit()"> -->
            <div class="row">
              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="name" class="form-label"
                    >Empolyee Name <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="name"
                    formControlName="name"
                    placeholder="Enter Empolyee name"
                    value="name"
                    [ngClass]="
                      f['name'] &&
                      f['name'].hasError('required') &&
                      f['name'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  />
                  @if (f['name'] && f['name'].hasError('required') &&
                  f['name'].touched) {
                  <div class="invalid-text">Empolyee name is required.</div>
                  } @if(f['name'] && f['name'].hasError('maxlength') &&
                  f['name'].touched){
                  <div class="invalid-text">
                    Empolyee name must be at most 45 characters
                  </div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="emp_id" class="form-label"
                    >Employee Id <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="emp_id"
                    formControlName="emp_id"
                    placeholder="Enter Employee Id"
                    value="emp_id"
                    [ngClass]="
                      f['emp_id'] &&
                      f['emp_id'].hasError('required') &&
                      f['emp_id'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  />

                  @if (f['emp_id'] && f['emp_id'].hasError('required') &&
                  f['emp_id'].touched) {
                  <div class="invalid-text">Employee Id is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="email" class="form-label"
                    >Email <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="email"
                    formControlName="email"
                    placeholder="Enter email"
                    value="email"
                    [ngClass]="
                      f['email'] &&
                      f['email'].hasError('required') &&
                      f['email'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  />

                  @if (f['email'] && f['email'].hasError('required') &&
                  f['email'].touched) {
                  <div class="invalid-text">Email is required.</div>
                  } @if(f['email'].hasError('pattern')){
                  <div class="invalid-text">
                    Email must be a valid email address
                  </div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="contact" class="form-label"
                    >Contact Number <span class="text-danger">*</span></label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="contact"
                    formControlName="mobile"
                    placeholder="Enter mobile"
                    value="mobile"
                    [ngClass]="
                      f['mobile'] &&
                      f['mobile'].hasError('required') &&
                      f['mobile'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  />

                  @if (f['mobile'] && f['mobile'].hasError('required') &&
                  f['mobile'].touched) {
                  <div class="invalid-text">Mobile is required.</div>
                  } @if(f['mobile'].hasError('pattern')){
                  <div class="invalid-text">
                    Please, Enter 10 digit Mobile Number.
                  </div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="dob" class="form-label">Date of Birth </label>
                  <input
                    type="date"
                    class="form-control"
                    id="dob"
                    formControlName="dob"
                    placeholder="Enter Date of Birth"
                    value="dob"
                    [ngClass]="
                      f['dob'] &&
                      f['dob'].hasError('required') &&
                      f['dob'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  />

                  @if (f['dob'] && f['dob'].hasError('required') &&
                  f['dob'].touched) {
                  <div class="invalid-text">Date of Birth is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="JoiningdatInput" class="form-label"
                    >Joining Date</label
                  >
                  <input
                    formControlName="joining_date"
                    type="date"
                    class="form-control"
                  />
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <div class="d-flex">
                    <div class="flex-grow-1">
                      <label for="designation" class="form-label"
                        >Designation <span class="text-danger">*</span></label
                      >
                    </div>
                    <div class="flex-shrink-0">
                      <a class="link-effect" (click)="onAdd()"
                        >Create New
                        <i class="bi bi-arrow-right align-baseline ms-1"></i
                      ></a>
                    </div>
                  </div>

                  <select
                    class="form-select"
                    id="designation"
                    formControlName="designation"
                    placeholder="Enter Designation"
                  >
                    <option selected>Select Designation</option>
                    @for (item of designations; track $index) {
                    <option value="{{ item.id }}">{{ item.name }}</option>
                    }
                  </select>

                  <!-- <input
                    type="text"
                    class="form-control"
                    id="designation"
                    formControlName="designation"
                    placeholder="Enter Designation"
                    value="designation"
                    [ngClass]="
                      f['designation'] &&
                      f['designation'].hasError('required') &&
                      f['designation'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  /> -->

                  @if (f['designation'] && f['designation'].hasError('required')
                  && f['designation'].touched) {
                  <div class="invalid-text">Designation is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <div class="d-flex">
                    <div class="flex-grow-1">
                      <label for="departments" class="form-label"
                        >Department <span class="text-danger">*</span></label
                      >
                    </div>
                    <div class="flex-shrink-0">
                      <a class="link-effect" (click)="onAdddep()"
                        >Create New
                        <i class="bi bi-arrow-right align-baseline ms-1"></i
                      ></a>
                    </div>
                  </div>

                  <select
                    class="form-select"
                    id="departments"
                    formControlName="department"
                    placeholder="Enter Department"
                  >
                    <option selected>Select Department</option>
                    @for (item of departments; track $index) {
                    <option value="{{ item.id }}">{{ item.name }}</option>
                    }
                  </select>

                  <!-- <input
                    type="text"
                    class="form-control"
                    id="designation"
                    formControlName="designation"
                    placeholder="Enter Designation"
                    value="designation"
                    [ngClass]="
                      f['designation'] &&
                      f['designation'].hasError('required') &&
                      f['designation'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  /> -->

                  @if (f['department'] && f['department'].hasError('required')
                  && f['department'].touched) {
                  <div class="invalid-text">Department is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="gender" class="form-label"
                    >Gender <span class="text-danger">*</span></label
                  >
                  <select
                    class="form-control"
                    formControlName="gender"
                    data-choices
                    id="gender"
                    [ngClass]="
                      f['gender'] &&
                      f['gender'].hasError('required') &&
                      f['gender'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  >
                    <option value="">Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                  </select>
                  @if (f['gender'] && f['gender'].hasError('required') &&
                  f['gender'].touched) {
                  <div class="invalid-text">Gender is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-12">
                <div class="mb-3">
                  <label for="address" class="form-label"> Address </label>

                  <textarea
                    class="form-control"
                    placeholder="Enter address"
                    rows="3"
                    formControlName="address"
                    [ngClass]="{
                      'is-invalid':
                        f['address'] &&
                        f['address'].errors &&
                        f['address'].touched
                    }"
                  ></textarea>

                  @if (f['address'] && f['address'].hasError('required') &&
                  f['address'].touched) {
                  <div class="invalid-text">Address is required.</div>
                  } @if(f['address'] && f['address'].hasError('maxlength') &&
                  f['address'].touched){
                  <div class="invalid-text">
                    Address must be at most 100 characters
                  </div>
                  }
                </div>
              </div>

              <div class="col-lg-4">
                <div class="mb-3">
                  <label for="city" class="form-label">City </label>
                  <input
                    type="text"
                    class="form-control"
                    id="city"
                    formControlName="city"
                    placeholder="Enter city"
                    value="city"
                    [ngClass]="
                      f['city'] &&
                      f['city'].hasError('required') &&
                      f['city'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  />

                  @if (f['city'] && f['city'].hasError('required') &&
                  f['city'].touched) {
                  <div class="invalid-text">City is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-4">
                <div class="mb-3">
                  <label for="zip_code" class="form-label">Zip code </label>

                  <input
                    type="number"
                    class="form-control"
                    id="zip_code"
                    formControlName="zip_code"
                    placeholder="Enter zip code"
                    [ngClass]="
                      f['zip_code'] &&
                      f['zip_code'].hasError('required') &&
                      f['zip_code'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  />

                  <div *ngIf="f['zip_code']?.touched && f['zip_code']?.errors">
                    <div
                      *ngIf="f['zip_code']?.hasError('required')"
                      class="invalid-text"
                    >
                      Zip code is required.
                    </div>
                    <div
                      *ngIf="f['zip_code']?.hasError('maxlength')"
                      class="invalid-text"
                    >
                      Invalid zip code.
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-4">
                <div class="mb-3">
                  <label for="state" class="form-label">State </label>
                  <select
                    class="form-control"
                    formControlName="state"
                    data-choices
                    id="state"
                    [ngClass]="
                      f['state'] &&
                      f['state'].hasError('required') &&
                      f['state'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  >
                    <option value="">Select State</option>
                    <option *ngFor="let state of states" [value]="state">
                      {{ state }}
                    </option>
                  </select>
                  @if (f['state'] && f['state'].hasError('required') &&
                  f['state'].touched) {
                  <div class="invalid-text">State is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-6">
                <div class="mb-3">
                  <label for="statuss" class="form-label"
                    >Status <span class="text-danger">*</span></label
                  >
                  <select
                    class="form-control"
                    formControlName="status"
                    data-choices
                    id="statuss"
                    [ngClass]="
                      f['status'] &&
                      f['status'].hasError('required') &&
                      f['status'].touched
                        ? 'is-invalid'
                        : ''
                    "
                  >
                    <option value="">Select Status</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                  </select>
                  @if (f['status'] && f['status'].hasError('required') &&
                  f['status'].touched) {
                  <div class="invalid-text">Status is required.</div>
                  }
                </div>
              </div>

              <div class="col-lg-6 d-flex align-items-center">
                <li class="d-flex">
                  <div class="flex-shrink-0">
                    <div class="form-check form-switch">
                      <input
                        type="checkbox"
                        role="switch"
                        id="directMessage"
                        class="form-check-input"
                        [checked]="useDefaultPassword"
                        (change)="onCheckboxChange($event)"
                      />
                      Use Default Password (Password : 123456)
                    </div>
                  </div>
                </li>
              </div>

              <div *ngIf="!useDefaultPassword" class="col-lg-4">
                <div class="auth-pass-inputgroup">
                  <label for="password-input" class="form-label"
                    >New Password*</label
                  >
                  <div class="position-relative">
                    <input
                      [type]="fieldTextType1 ? 'text' : 'password'"
                      class="form-control password-input"
                      id="password-input"
                      formControlName="password"
                      placeholder="Enter new password"
                      (input)="checkPasswordPattern()"
                      [ngClass]="{
                        'is-invalid':
                          f['password'].hasError('required') &&
                          f['password'].touched
                      }"
                    />
                    <button
                      class="btn btn-link position-absolute end-0 top-0 text-decoration-none text-muted password-addon"
                      type="button"
                      (click)="toggleFieldTextType1()"
                    >
                      <i
                        class="ri-eye-fill align-middle"
                        [ngClass]="{
                          'mdi-eye-off-outline': !fieldTextType1,
                          'mdi-eye-outline': fieldTextType1
                        }"
                      ></i>
                    </button>
                  </div>
                  <div
                    *ngIf="
                      f['password'].hasError('required') &&
                      f['password'].touched
                    "
                    class="invalid-text"
                  >
                    Password is required.
                  </div>
                </div>
              </div>

              <div *ngIf="!useDefaultPassword" class="col-lg-4">
                <div class="auth-pass-inputgroup">
                  <label for="confirm-password-input" class="form-label"
                    >Confirm Password*</label
                  >
                  <div class="position-relative">
                    <input
                      [type]="fieldTextType2 ? 'text' : 'password'"
                      class="form-control password-input"
                      id="confirm-password-input"
                      formControlName="confirmPassword"
                      placeholder="Confirm password"
                      [ngClass]="{
                        'is-invalid':
                          f['confirmPassword'].hasError('required') &&
                          f['confirmPassword'].touched
                      }"
                    />
                    <button
                      class="btn btn-link position-absolute end-0 top-0 text-decoration-none text-muted password-addon"
                      type="button"
                      (click)="toggleFieldTextType2()"
                    >
                      <i
                        class="ri-eye-fill align-middle"
                        [ngClass]="{
                          'mdi-eye-off-outline': !fieldTextType2,
                          'mdi-eye-outline': fieldTextType2
                        }"
                      ></i>
                    </button>
                  </div>
                  <div
                    *ngIf="
                      f['confirmPassword'].hasError('required') &&
                      f['confirmPassword'].touched
                    "
                    class="invalid-text"
                  >
                    Confirm Password is required.
                  </div>
                  <div
                    *ngIf="
                      formGroup.hasError('mismatch') &&
                      f['confirmPassword']?.value &&
                      f['password']?.value
                    "
                    class="invalid-text"
                  >
                    Password and Confirm Password does not match.
                  </div>
                </div>
              </div>

              @if(f['password'] && f['password'].hasError('pattern')){
              <div class="col-lg-12 mt-4">
                <div
                  class="card bg-light shadow-none passwd-bg"
                  id="password-contain"
                >
                  <div class="card-body">
                    <div class="mb-4">
                      <h5 class="fs-sm">Password must contain:</h5>
                    </div>
                    <div>
                      <p
                        id="pass-length"
                        class="fs-xs mb-2"
                        [ngClass]="
                          passwordValidations.length ? 'valid' : 'invalid'
                        "
                      >
                        Minimum <b>8 characters</b>
                      </p>
                      <p
                        id="pass-lower"
                        class="fs-xs mb-2"
                        [ngClass]="
                          passwordValidations.lower ? 'valid' : 'invalid'
                        "
                      >
                        At least <b>one lowercase</b> letter (a-z)
                      </p>
                      <p
                        id="pass-upper"
                        class="fs-xs mb-2"
                        [class.valid]="passwordValidations.upper"
                        [ngClass]="
                          passwordValidations.upper ? 'valid' : 'invalid'
                        "
                      >
                        At least <b>one uppercase</b> letter (A-Z)
                      </p>
                      <p
                        id="pass-number"
                        class="fs-xs mb-2"
                        [ngClass]="
                          passwordValidations.number ? 'valid' : 'invalid'
                        "
                      >
                        At least <b>one number</b> (0-9)
                      </p>

                      <p
                        id="pass-number"
                        class="fs-xs mb-0"
                        [ngClass]="
                          passwordValidations.special ? 'valid' : 'invalid'
                        "
                      >
                        At least
                        <b>one special character</b> (!&#64;#$!%*?&)
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              }
            </div>
            <div class="col-12">
              <div class="hstack gap-2 justify-content-end mb-3">
                @if (saveButtonActive) {
                <button class="btn btn-primary">Save</button>
                } @else {
                <button class="btn btn-secondary" type="button" disabled>
                  <span
                    class="spinner-border spinner-border-sm"
                    role="status"
                    aria-hidden="true"
                  ></span>
                  Please wait
                </button>
                }
              </div>
            </div>
            <!-- </form> -->

            <div></div>
          </div>
          @if (spinnerStatus) {
          <div id="elmLoader">
            <div class="spinner-border text-primary avatar-sm" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
          }
        </div>
        <!-- end card-body -->
      </div>
      <!-- end card -->
    </div>
  </div>
</form>

<!-- designation modal -->
<div
  class="modal fade"
  bsModal
  #showModal="bs-modal"
  (hidden.bs.modal)="resetFormDes()"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header px-4 pt-4">
        <h5 class="modal-title" id="exampleModalLabel">Add Designation</h5>
        <button
          type="button"
          class="btn-close"
          (click)="showModal.hide()"
        ></button>
      </div>

      <form
        (ngSubmit)="onSubmitDes()"
        [formGroup]="formGroupDesignation"
        class="tablelist-form"
        novalidate
        autocomplete="off"
      >
        <div class="modal-body p-4">
          <div
            id="alert-error-msg"
            class="d-none alert alert-danger py-2"
          ></div>

          <div class="mb-3">
            <label for="product-title-input" class="form-label"
              >Designation Name <span class="text-danger">*</span></label
            >
            <input
              type="text"
              id="product-title-input"
              formControlName="name"
              class="form-control"
              placeholder="Enter Designation Name"
            />
            @if (d['name'] && d['name'].hasError('required') &&
            d['name'].touched) {
            <div class="invalid-text">Designation name is required.</div>
            } @if(d['name'] && d['name'].hasError('maxlength') &&
            d['name'].touched){
            <div class="invalid-text">
              Designation name must be at most 45 characters
            </div>
            }
          </div>

          <div class="mb-3">
            <label for="statuss" class="form-label"
              >Status <span class="text-danger">*</span></label
            >
            <select
              class="form-control"
              formControlName="status"
              data-choices
              id="statuss"
              [ngClass]="
                d['status'] &&
                d['status'].hasError('required') &&
                d['status'].touched
                  ? 'is-invalid'
                  : ''
              "
            >
              <option value="">Select Status</option>
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
            @if (d['status'] && d['status'].hasError('required') &&
            d['status'].touched) {
            <div class="invalid-text">Status is required.</div>
            }
          </div>
        </div>
        <div class="modal-footer">
          <div class="hstack gap-2 justify-content-end">
            <button
              type="button"
              class="btn btn-ghost-danger"
              (click)="showModal.hide()"
            >
              <i class="bi bi-x-lg align-baseline me-1"></i> Close
            </button>
            <button type="submit" class="btn btn-primary" id="add-btn">
              Add
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- department modal -->
<div
  class="modal fade"
  bsModal
  #showModalDepartment="bs-modal"
  (hidden.bs.modal)="resetFormDep()"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header px-4 pt-4">
        <h5 class="modal-title" id="exampleModalLabel">Add Department</h5>
        <button
          type="button"
          class="btn-close"
          (click)="showModalDepartment.hide()"
        ></button>
      </div>

      <form
        (ngSubmit)="onSubmitDep()"
        [formGroup]="formGroupDepartment"
        class="tablelist-form"
        novalidate
        autocomplete="off"
      >
        <div class="modal-body p-4">
          <div
            id="alert-error-msg"
            class="d-none alert alert-danger py-2"
          ></div>

          <div class="mb-3">
            <label for="product-title-input" class="form-label"
              >Department Name <span class="text-danger">*</span></label
            >
            <input
              type="text"
              id="product-title-input"
              formControlName="name"
              class="form-control"
              placeholder="Enter Department Name"
            />
            @if (de['name'] && de['name'].hasError('required') &&
            de['name'].touched) {
            <div class="invalid-text">Department name is required.</div>
            } @if(de['name'] && de['name'].hasError('maxlength') &&
            de['name'].touched){
            <div class="invalid-text">
              Department name must be at most 45 characters
            </div>
            }
          </div>

          <div class="mb-3">
            <label for="statuss" class="form-label"
              >Status <span class="text-danger">*</span></label
            >
            <select
              class="form-control"
              formControlName="status"
              data-choices
              id="statuss"
              [ngClass]="
                de['status'] &&
                de['status'].hasError('required') &&
                de['status'].touched
                  ? 'is-invalid'
                  : ''
              "
            >
              <option value="">Select Status</option>
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
            @if (de['status'] && de['status'].hasError('required') &&
            de['status'].touched) {
            <div class="invalid-text">Status is required.</div>
            }
          </div>
        </div>
        <div class="modal-footer">
          <div class="hstack gap-2 justify-content-end">
            <button
              type="button"
              class="btn btn-ghost-danger"
              (click)="showModalDepartment.hide()"
            >
              <i class="bi bi-x-lg align-baseline me-1"></i> Close
            </button>
            <button type="submit" class="btn btn-primary" id="add-btn">
              Add
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
